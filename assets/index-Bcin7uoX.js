(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function a(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(i){if(i.ep)return;i.ep=!0;const l=a(i);fetch(i.href,l)}})();var OS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ss(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hN={exports:{}},zw={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p6;function hne(){if(p6)return zw;p6=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function a(r,i,l){var c=null;if(l!==void 0&&(c=""+l),i.key!==void 0&&(c=""+i.key),"key"in i){l={};for(var n in i)n!=="key"&&(l[n]=i[n])}else l=i;return i=l.ref,{$$typeof:t,type:r,key:c,ref:i!==void 0?i:null,props:l}}return zw.Fragment=e,zw.jsx=a,zw.jsxs=a,zw}var m6;function fne(){return m6||(m6=1,hN.exports=hne()),hN.exports}var q=fne(),fN={exports:{}},Ci={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g6;function pne(){if(g6)return Ci;g6=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),n=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),R=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),N=Symbol.iterator;function L(Be){return Be===null||typeof Be!="object"?null:(Be=N&&Be[N]||Be["@@iterator"],typeof Be=="function"?Be:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,$={};function H(Be,qe,be){this.props=Be,this.context=qe,this.refs=$,this.updater=be||F}H.prototype.isReactComponent={},H.prototype.setState=function(Be,qe){if(typeof Be!="object"&&typeof Be!="function"&&Be!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Be,qe,"setState")},H.prototype.forceUpdate=function(Be){this.updater.enqueueForceUpdate(this,Be,"forceUpdate")};function W(){}W.prototype=H.prototype;function ee(Be,qe,be){this.props=Be,this.context=qe,this.refs=$,this.updater=be||F}var se=ee.prototype=new W;se.constructor=ee,j(se,H.prototype),se.isPureReactComponent=!0;var fe=Array.isArray,le={H:null,A:null,T:null,S:null},me=Object.prototype.hasOwnProperty;function ge(Be,qe,be,Te,ke,Ge){return be=Ge.ref,{$$typeof:t,type:Be,key:qe,ref:be!==void 0?be:null,props:Ge}}function Re(Be,qe){return ge(Be.type,qe,void 0,void 0,void 0,Be.props)}function we(Be){return typeof Be=="object"&&Be!==null&&Be.$$typeof===t}function Ve(Be){var qe={"=":"=0",":":"=2"};return"$"+Be.replace(/[=:]/g,function(be){return qe[be]})}var oe=/\/+/g;function _e(Be,qe){return typeof Be=="object"&&Be!==null&&Be.key!=null?Ve(""+Be.key):qe.toString(36)}function Fe(){}function Ee(Be){switch(Be.status){case"fulfilled":return Be.value;case"rejected":throw Be.reason;default:switch(typeof Be.status=="string"?Be.then(Fe,Fe):(Be.status="pending",Be.then(function(qe){Be.status==="pending"&&(Be.status="fulfilled",Be.value=qe)},function(qe){Be.status==="pending"&&(Be.status="rejected",Be.reason=qe)})),Be.status){case"fulfilled":return Be.value;case"rejected":throw Be.reason}}throw Be}function ze(Be,qe,be,Te,ke){var Ge=typeof Be;(Ge==="undefined"||Ge==="boolean")&&(Be=null);var at=!1;if(Be===null)at=!0;else switch(Ge){case"bigint":case"string":case"number":at=!0;break;case"object":switch(Be.$$typeof){case t:case e:at=!0;break;case x:return at=Be._init,ze(at(Be._payload),qe,be,Te,ke)}}if(at)return ke=ke(Be),at=Te===""?"."+_e(Be,0):Te,fe(ke)?(be="",at!=null&&(be=at.replace(oe,"$&/")+"/"),ze(ke,qe,be,"",function(ot){return ot})):ke!=null&&(we(ke)&&(ke=Re(ke,be+(ke.key==null||Be&&Be.key===ke.key?"":(""+ke.key).replace(oe,"$&/")+"/")+at)),qe.push(ke)),1;at=0;var rt=Te===""?".":Te+":";if(fe(Be))for(var lt=0;lt<Be.length;lt++)Te=Be[lt],Ge=rt+_e(Te,lt),at+=ze(Te,qe,be,Ge,ke);else if(lt=L(Be),typeof lt=="function")for(Be=lt.call(Be),lt=0;!(Te=Be.next()).done;)Te=Te.value,Ge=rt+_e(Te,lt++),at+=ze(Te,qe,be,Ge,ke);else if(Ge==="object"){if(typeof Be.then=="function")return ze(Ee(Be),qe,be,Te,ke);throw qe=String(Be),Error("Objects are not valid as a React child (found: "+(qe==="[object Object]"?"object with keys {"+Object.keys(Be).join(", ")+"}":qe)+"). If you meant to render a collection of children, use an array instead.")}return at}function Se(Be,qe,be){if(Be==null)return Be;var Te=[],ke=0;return ze(Be,Te,"","",function(Ge){return qe.call(be,Ge,ke++)}),Te}function je(Be){if(Be._status===-1){var qe=Be._result;qe=qe(),qe.then(function(be){(Be._status===0||Be._status===-1)&&(Be._status=1,Be._result=be)},function(be){(Be._status===0||Be._status===-1)&&(Be._status=2,Be._result=be)}),Be._status===-1&&(Be._status=0,Be._result=qe)}if(Be._status===1)return Be._result.default;throw Be._result}var Ue=typeof reportError=="function"?reportError:function(Be){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var qe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Be=="object"&&Be!==null&&typeof Be.message=="string"?String(Be.message):String(Be),error:Be});if(!window.dispatchEvent(qe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Be);return}console.error(Be)};function $e(){}return Ci.Children={map:Se,forEach:function(Be,qe,be){Se(Be,function(){qe.apply(this,arguments)},be)},count:function(Be){var qe=0;return Se(Be,function(){qe++}),qe},toArray:function(Be){return Se(Be,function(qe){return qe})||[]},only:function(Be){if(!we(Be))throw Error("React.Children.only expected to receive a single React element child.");return Be}},Ci.Component=H,Ci.Fragment=a,Ci.Profiler=i,Ci.PureComponent=ee,Ci.StrictMode=r,Ci.Suspense=v,Ci.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=le,Ci.act=function(){throw Error("act(...) is not supported in production builds of React.")},Ci.cache=function(Be){return function(){return Be.apply(null,arguments)}},Ci.cloneElement=function(Be,qe,be){if(Be==null)throw Error("The argument must be a React element, but you passed "+Be+".");var Te=j({},Be.props),ke=Be.key,Ge=void 0;if(qe!=null)for(at in qe.ref!==void 0&&(Ge=void 0),qe.key!==void 0&&(ke=""+qe.key),qe)!me.call(qe,at)||at==="key"||at==="__self"||at==="__source"||at==="ref"&&qe.ref===void 0||(Te[at]=qe[at]);var at=arguments.length-2;if(at===1)Te.children=be;else if(1<at){for(var rt=Array(at),lt=0;lt<at;lt++)rt[lt]=arguments[lt+2];Te.children=rt}return ge(Be.type,ke,void 0,void 0,Ge,Te)},Ci.createContext=function(Be){return Be={$$typeof:c,_currentValue:Be,_currentValue2:Be,_threadCount:0,Provider:null,Consumer:null},Be.Provider=Be,Be.Consumer={$$typeof:l,_context:Be},Be},Ci.createElement=function(Be,qe,be){var Te,ke={},Ge=null;if(qe!=null)for(Te in qe.key!==void 0&&(Ge=""+qe.key),qe)me.call(qe,Te)&&Te!=="key"&&Te!=="__self"&&Te!=="__source"&&(ke[Te]=qe[Te]);var at=arguments.length-2;if(at===1)ke.children=be;else if(1<at){for(var rt=Array(at),lt=0;lt<at;lt++)rt[lt]=arguments[lt+2];ke.children=rt}if(Be&&Be.defaultProps)for(Te in at=Be.defaultProps,at)ke[Te]===void 0&&(ke[Te]=at[Te]);return ge(Be,Ge,void 0,void 0,null,ke)},Ci.createRef=function(){return{current:null}},Ci.forwardRef=function(Be){return{$$typeof:n,render:Be}},Ci.isValidElement=we,Ci.lazy=function(Be){return{$$typeof:x,_payload:{_status:-1,_result:Be},_init:je}},Ci.memo=function(Be,qe){return{$$typeof:R,type:Be,compare:qe===void 0?null:qe}},Ci.startTransition=function(Be){var qe=le.T,be={};le.T=be;try{var Te=Be(),ke=le.S;ke!==null&&ke(be,Te),typeof Te=="object"&&Te!==null&&typeof Te.then=="function"&&Te.then($e,Ue)}catch(Ge){Ue(Ge)}finally{le.T=qe}},Ci.unstable_useCacheRefresh=function(){return le.H.useCacheRefresh()},Ci.use=function(Be){return le.H.use(Be)},Ci.useActionState=function(Be,qe,be){return le.H.useActionState(Be,qe,be)},Ci.useCallback=function(Be,qe){return le.H.useCallback(Be,qe)},Ci.useContext=function(Be){return le.H.useContext(Be)},Ci.useDebugValue=function(){},Ci.useDeferredValue=function(Be,qe){return le.H.useDeferredValue(Be,qe)},Ci.useEffect=function(Be,qe){return le.H.useEffect(Be,qe)},Ci.useId=function(){return le.H.useId()},Ci.useImperativeHandle=function(Be,qe,be){return le.H.useImperativeHandle(Be,qe,be)},Ci.useInsertionEffect=function(Be,qe){return le.H.useInsertionEffect(Be,qe)},Ci.useLayoutEffect=function(Be,qe){return le.H.useLayoutEffect(Be,qe)},Ci.useMemo=function(Be,qe){return le.H.useMemo(Be,qe)},Ci.useOptimistic=function(Be,qe){return le.H.useOptimistic(Be,qe)},Ci.useReducer=function(Be,qe,be){return le.H.useReducer(Be,qe,be)},Ci.useRef=function(Be){return le.H.useRef(Be)},Ci.useState=function(Be){return le.H.useState(Be)},Ci.useSyncExternalStore=function(Be,qe,be){return le.H.useSyncExternalStore(Be,qe,be)},Ci.useTransition=function(){return le.H.useTransition()},Ci.version="19.0.0",Ci}var y6;function d3(){return y6||(y6=1,fN.exports=pne()),fN.exports}var ie=d3();const Ot=ss(ie);var pN={exports:{}},Dw={},mN={exports:{}},gN={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A6;function mne(){return A6||(A6=1,function(t){function e(Se,je){var Ue=Se.length;Se.push(je);e:for(;0<Ue;){var $e=Ue-1>>>1,Be=Se[$e];if(0<i(Be,je))Se[$e]=je,Se[Ue]=Be,Ue=$e;else break e}}function a(Se){return Se.length===0?null:Se[0]}function r(Se){if(Se.length===0)return null;var je=Se[0],Ue=Se.pop();if(Ue!==je){Se[0]=Ue;e:for(var $e=0,Be=Se.length,qe=Be>>>1;$e<qe;){var be=2*($e+1)-1,Te=Se[be],ke=be+1,Ge=Se[ke];if(0>i(Te,Ue))ke<Be&&0>i(Ge,Te)?(Se[$e]=Ge,Se[ke]=Ue,$e=ke):(Se[$e]=Te,Se[be]=Ue,$e=be);else if(ke<Be&&0>i(Ge,Ue))Se[$e]=Ge,Se[ke]=Ue,$e=ke;else break e}}return je}function i(Se,je){var Ue=Se.sortIndex-je.sortIndex;return Ue!==0?Ue:Se.id-je.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,n=c.now();t.unstable_now=function(){return c.now()-n}}var v=[],R=[],x=1,N=null,L=3,F=!1,j=!1,$=!1,H=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;function se(Se){for(var je=a(R);je!==null;){if(je.callback===null)r(R);else if(je.startTime<=Se)r(R),je.sortIndex=je.expirationTime,e(v,je);else break;je=a(R)}}function fe(Se){if($=!1,se(Se),!j)if(a(v)!==null)j=!0,Ee();else{var je=a(R);je!==null&&ze(fe,je.startTime-Se)}}var le=!1,me=-1,ge=5,Re=-1;function we(){return!(t.unstable_now()-Re<ge)}function Ve(){if(le){var Se=t.unstable_now();Re=Se;var je=!0;try{e:{j=!1,$&&($=!1,W(me),me=-1),F=!0;var Ue=L;try{t:{for(se(Se),N=a(v);N!==null&&!(N.expirationTime>Se&&we());){var $e=N.callback;if(typeof $e=="function"){N.callback=null,L=N.priorityLevel;var Be=$e(N.expirationTime<=Se);if(Se=t.unstable_now(),typeof Be=="function"){N.callback=Be,se(Se),je=!0;break t}N===a(v)&&r(v),se(Se)}else r(v);N=a(v)}if(N!==null)je=!0;else{var qe=a(R);qe!==null&&ze(fe,qe.startTime-Se),je=!1}}break e}finally{N=null,L=Ue,F=!1}je=void 0}}finally{je?oe():le=!1}}}var oe;if(typeof ee=="function")oe=function(){ee(Ve)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,Fe=_e.port2;_e.port1.onmessage=Ve,oe=function(){Fe.postMessage(null)}}else oe=function(){H(Ve,0)};function Ee(){le||(le=!0,oe())}function ze(Se,je){me=H(function(){Se(t.unstable_now())},je)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Se){Se.callback=null},t.unstable_continueExecution=function(){j||F||(j=!0,Ee())},t.unstable_forceFrameRate=function(Se){0>Se||125<Se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ge=0<Se?Math.floor(1e3/Se):5},t.unstable_getCurrentPriorityLevel=function(){return L},t.unstable_getFirstCallbackNode=function(){return a(v)},t.unstable_next=function(Se){switch(L){case 1:case 2:case 3:var je=3;break;default:je=L}var Ue=L;L=je;try{return Se()}finally{L=Ue}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Se,je){switch(Se){case 1:case 2:case 3:case 4:case 5:break;default:Se=3}var Ue=L;L=Se;try{return je()}finally{L=Ue}},t.unstable_scheduleCallback=function(Se,je,Ue){var $e=t.unstable_now();switch(typeof Ue=="object"&&Ue!==null?(Ue=Ue.delay,Ue=typeof Ue=="number"&&0<Ue?$e+Ue:$e):Ue=$e,Se){case 1:var Be=-1;break;case 2:Be=250;break;case 5:Be=1073741823;break;case 4:Be=1e4;break;default:Be=5e3}return Be=Ue+Be,Se={id:x++,callback:je,priorityLevel:Se,startTime:Ue,expirationTime:Be,sortIndex:-1},Ue>$e?(Se.sortIndex=Ue,e(R,Se),a(v)===null&&Se===a(R)&&($?(W(me),me=-1):$=!0,ze(fe,Ue-$e))):(Se.sortIndex=Be,e(v,Se),j||F||(j=!0,Ee())),Se},t.unstable_shouldYield=we,t.unstable_wrapCallback=function(Se){var je=L;return function(){var Ue=L;L=je;try{return Se.apply(this,arguments)}finally{L=Ue}}}}(gN)),gN}var v6;function gne(){return v6||(v6=1,mN.exports=mne()),mN.exports}var yN={exports:{}},ld={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _6;function yne(){if(_6)return ld;_6=1;var t=d3();function e(v){var R="https://react.dev/errors/"+v;if(1<arguments.length){R+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)R+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+v+"; visit "+R+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var r={d:{f:a,r:function(){throw Error(e(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},i=Symbol.for("react.portal");function l(v,R,x){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:N==null?null:""+N,children:v,containerInfo:R,implementation:x}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function n(v,R){if(v==="font")return"";if(typeof R=="string")return R==="use-credentials"?R:""}return ld.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ld.createPortal=function(v,R){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!R||R.nodeType!==1&&R.nodeType!==9&&R.nodeType!==11)throw Error(e(299));return l(v,R,null,x)},ld.flushSync=function(v){var R=c.T,x=r.p;try{if(c.T=null,r.p=2,v)return v()}finally{c.T=R,r.p=x,r.d.f()}},ld.preconnect=function(v,R){typeof v=="string"&&(R?(R=R.crossOrigin,R=typeof R=="string"?R==="use-credentials"?R:"":void 0):R=null,r.d.C(v,R))},ld.prefetchDNS=function(v){typeof v=="string"&&r.d.D(v)},ld.preinit=function(v,R){if(typeof v=="string"&&R&&typeof R.as=="string"){var x=R.as,N=n(x,R.crossOrigin),L=typeof R.integrity=="string"?R.integrity:void 0,F=typeof R.fetchPriority=="string"?R.fetchPriority:void 0;x==="style"?r.d.S(v,typeof R.precedence=="string"?R.precedence:void 0,{crossOrigin:N,integrity:L,fetchPriority:F}):x==="script"&&r.d.X(v,{crossOrigin:N,integrity:L,fetchPriority:F,nonce:typeof R.nonce=="string"?R.nonce:void 0})}},ld.preinitModule=function(v,R){if(typeof v=="string")if(typeof R=="object"&&R!==null){if(R.as==null||R.as==="script"){var x=n(R.as,R.crossOrigin);r.d.M(v,{crossOrigin:x,integrity:typeof R.integrity=="string"?R.integrity:void 0,nonce:typeof R.nonce=="string"?R.nonce:void 0})}}else R==null&&r.d.M(v)},ld.preload=function(v,R){if(typeof v=="string"&&typeof R=="object"&&R!==null&&typeof R.as=="string"){var x=R.as,N=n(x,R.crossOrigin);r.d.L(v,x,{crossOrigin:N,integrity:typeof R.integrity=="string"?R.integrity:void 0,nonce:typeof R.nonce=="string"?R.nonce:void 0,type:typeof R.type=="string"?R.type:void 0,fetchPriority:typeof R.fetchPriority=="string"?R.fetchPriority:void 0,referrerPolicy:typeof R.referrerPolicy=="string"?R.referrerPolicy:void 0,imageSrcSet:typeof R.imageSrcSet=="string"?R.imageSrcSet:void 0,imageSizes:typeof R.imageSizes=="string"?R.imageSizes:void 0,media:typeof R.media=="string"?R.media:void 0})}},ld.preloadModule=function(v,R){if(typeof v=="string")if(R){var x=n(R.as,R.crossOrigin);r.d.m(v,{as:typeof R.as=="string"&&R.as!=="script"?R.as:void 0,crossOrigin:x,integrity:typeof R.integrity=="string"?R.integrity:void 0})}else r.d.m(v)},ld.requestFormReset=function(v){r.d.r(v)},ld.unstable_batchedUpdates=function(v,R){return v(R)},ld.useFormState=function(v,R,x){return c.H.useFormState(v,R,x)},ld.useFormStatus=function(){return c.H.useHostTransitionStatus()},ld.version="19.0.0",ld}var w6;function F$(){if(w6)return yN.exports;w6=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),yN.exports=yne(),yN.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R6;function Ane(){if(R6)return Dw;R6=1;var t=gne(),e=d3(),a=F$();function r(p){var w="https://react.dev/errors/"+p;if(1<arguments.length){w+="?args[]="+encodeURIComponent(arguments[1]);for(var P=2;P<arguments.length;P++)w+="&args[]="+encodeURIComponent(arguments[P])}return"Minified React error #"+p+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}var l=Symbol.for("react.element"),c=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),F=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),fe=Symbol.for("react.memo_cache_sentinel"),le=Symbol.iterator;function me(p){return p===null||typeof p!="object"?null:(p=le&&p[le]||p["@@iterator"],typeof p=="function"?p:null)}var ge=Symbol.for("react.client.reference");function Re(p){if(p==null)return null;if(typeof p=="function")return p.$$typeof===ge?null:p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case v:return"Fragment";case n:return"Portal";case x:return"Profiler";case R:return"StrictMode";case $:return"Suspense";case H:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case F:return(p.displayName||"Context")+".Provider";case L:return(p._context.displayName||"Context")+".Consumer";case j:var w=p.render;return p=p.displayName,p||(p=w.displayName||w.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case W:return w=p.displayName||null,w!==null?w:Re(p.type)||"Memo";case ee:w=p._payload,p=p._init;try{return Re(p(w))}catch{}}return null}var we=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ve=Object.assign,oe,_e;function Fe(p){if(oe===void 0)try{throw Error()}catch(P){var w=P.stack.trim().match(/\n( *(at )?)/);oe=w&&w[1]||"",_e=-1<P.stack.indexOf(`
    at`)?" (<anonymous>)":-1<P.stack.indexOf("@")?"@unknown:0:0":""}return`
`+oe+p+_e}var Ee=!1;function ze(p,w){if(!p||Ee)return"";Ee=!0;var P=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var U={DetermineComponentFrameRoot:function(){try{if(w){var sr=function(){throw Error()};if(Object.defineProperty(sr.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(sr,[])}catch(Ha){var Na=Ha}Reflect.construct(p,[],sr)}else{try{sr.call()}catch(Ha){Na=Ha}p.call(sr.prototype)}}else{try{throw Error()}catch(Ha){Na=Ha}(sr=p())&&typeof sr.catch=="function"&&sr.catch(function(){})}}catch(Ha){if(Ha&&Na&&typeof Ha.stack=="string")return[Ha.stack,Na.stack]}return[null,null]}};U.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var X=Object.getOwnPropertyDescriptor(U.DetermineComponentFrameRoot,"name");X&&X.configurable&&Object.defineProperty(U.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var ue=U.DetermineComponentFrameRoot(),Ze=ue[0],ft=ue[1];if(Ze&&ft){var Ut=Ze.split(`
`),ua=ft.split(`
`);for(X=U=0;U<Ut.length&&!Ut[U].includes("DetermineComponentFrameRoot");)U++;for(;X<ua.length&&!ua[X].includes("DetermineComponentFrameRoot");)X++;if(U===Ut.length||X===ua.length)for(U=Ut.length-1,X=ua.length-1;1<=U&&0<=X&&Ut[U]!==ua[X];)X--;for(;1<=U&&0<=X;U--,X--)if(Ut[U]!==ua[X]){if(U!==1||X!==1)do if(U--,X--,0>X||Ut[U]!==ua[X]){var qa=`
`+Ut[U].replace(" at new "," at ");return p.displayName&&qa.includes("<anonymous>")&&(qa=qa.replace("<anonymous>",p.displayName)),qa}while(1<=U&&0<=X);break}}}finally{Ee=!1,Error.prepareStackTrace=P}return(P=p?p.displayName||p.name:"")?Fe(P):""}function Se(p){switch(p.tag){case 26:case 27:case 5:return Fe(p.type);case 16:return Fe("Lazy");case 13:return Fe("Suspense");case 19:return Fe("SuspenseList");case 0:case 15:return p=ze(p.type,!1),p;case 11:return p=ze(p.type.render,!1),p;case 1:return p=ze(p.type,!0),p;default:return""}}function je(p){try{var w="";do w+=Se(p),p=p.return;while(p);return w}catch(P){return`
Error generating stack: `+P.message+`
`+P.stack}}function Ue(p){var w=p,P=p;if(p.alternate)for(;w.return;)w=w.return;else{p=w;do w=p,(w.flags&4098)!==0&&(P=w.return),p=w.return;while(p)}return w.tag===3?P:null}function $e(p){if(p.tag===13){var w=p.memoizedState;if(w===null&&(p=p.alternate,p!==null&&(w=p.memoizedState)),w!==null)return w.dehydrated}return null}function Be(p){if(Ue(p)!==p)throw Error(r(188))}function qe(p){var w=p.alternate;if(!w){if(w=Ue(p),w===null)throw Error(r(188));return w!==p?null:p}for(var P=p,U=w;;){var X=P.return;if(X===null)break;var ue=X.alternate;if(ue===null){if(U=X.return,U!==null){P=U;continue}break}if(X.child===ue.child){for(ue=X.child;ue;){if(ue===P)return Be(X),p;if(ue===U)return Be(X),w;ue=ue.sibling}throw Error(r(188))}if(P.return!==U.return)P=X,U=ue;else{for(var Ze=!1,ft=X.child;ft;){if(ft===P){Ze=!0,P=X,U=ue;break}if(ft===U){Ze=!0,U=X,P=ue;break}ft=ft.sibling}if(!Ze){for(ft=ue.child;ft;){if(ft===P){Ze=!0,P=ue,U=X;break}if(ft===U){Ze=!0,U=ue,P=X;break}ft=ft.sibling}if(!Ze)throw Error(r(189))}}if(P.alternate!==U)throw Error(r(190))}if(P.tag!==3)throw Error(r(188));return P.stateNode.current===P?p:w}function be(p){var w=p.tag;if(w===5||w===26||w===27||w===6)return p;for(p=p.child;p!==null;){if(w=be(p),w!==null)return w;p=p.sibling}return null}var Te=Array.isArray,ke=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ge={pending:!1,data:null,method:null,action:null},at=[],rt=-1;function lt(p){return{current:p}}function ot(p){0>rt||(p.current=at[rt],at[rt]=null,rt--)}function ve(p,w){rt++,at[rt]=p.current,p.current=w}var Vt=lt(null),Bt=lt(null),wa=lt(null),It=lt(null);function $t(p,w){switch(ve(wa,w),ve(Bt,p),ve(Vt,null),p=w.nodeType,p){case 9:case 11:w=(w=w.documentElement)&&(w=w.namespaceURI)?U1(w):0;break;default:if(p=p===8?w.parentNode:w,w=p.tagName,p=p.namespaceURI)p=U1(p),w=B1(p,w);else switch(w){case"svg":w=1;break;case"math":w=2;break;default:w=0}}ot(Vt),ve(Vt,w)}function wt(){ot(Vt),ot(Bt),ot(wa)}function hr(p){p.memoizedState!==null&&ve(It,p);var w=Vt.current,P=B1(w,p.type);w!==P&&(ve(Bt,p),ve(Vt,P))}function ba(p){Bt.current===p&&(ot(Vt),ot(Bt)),It.current===p&&(ot(It),fy._currentValue=Ge)}var Pa=Object.prototype.hasOwnProperty,Ja=t.unstable_scheduleCallback,or=t.unstable_cancelCallback,lr=t.unstable_shouldYield,Tr=t.unstable_requestPaint,ka=t.unstable_now,kr=t.unstable_getCurrentPriorityLevel,nn=t.unstable_ImmediatePriority,wn=t.unstable_UserBlockingPriority,un=t.unstable_NormalPriority,va=t.unstable_LowPriority,$a=t.unstable_IdlePriority,la=t.log,Ya=t.unstable_setDisableYieldValue,yr=null,Tn=null;function Qr(p){if(Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(yr,p,void 0,(p.current.flags&128)===128)}catch{}}function cn(p){if(typeof la=="function"&&Ya(p),Tn&&typeof Tn.setStrictMode=="function")try{Tn.setStrictMode(yr,p)}catch{}}var $r=Math.clz32?Math.clz32:yi,br=Math.log,Fi=Math.LN2;function yi(p){return p>>>=0,p===0?32:31-(br(p)/Fi|0)|0}var oi=128,Cs=4194304;function ga(p){var w=p&42;if(w!==0)return w;switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return p&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return p}}function pr(p,w){var P=p.pendingLanes;if(P===0)return 0;var U=0,X=p.suspendedLanes,ue=p.pingedLanes,Ze=p.warmLanes;p=p.finishedLanes!==0;var ft=P&134217727;return ft!==0?(P=ft&~X,P!==0?U=ga(P):(ue&=ft,ue!==0?U=ga(ue):p||(Ze=ft&~Ze,Ze!==0&&(U=ga(Ze))))):(ft=P&~X,ft!==0?U=ga(ft):ue!==0?U=ga(ue):p||(Ze=P&~Ze,Ze!==0&&(U=ga(Ze)))),U===0?0:w!==0&&w!==U&&(w&X)===0&&(X=U&-U,Ze=w&-w,X>=Ze||X===32&&(Ze&4194176)!==0)?w:U}function Kr(p,w){return(p.pendingLanes&~(p.suspendedLanes&~p.pingedLanes)&w)===0}function ti(p,w){switch(p){case 1:case 2:case 4:case 8:return w+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rn(){var p=oi;return oi<<=1,(oi&4194176)===0&&(oi=128),p}function Zt(){var p=Cs;return Cs<<=1,(Cs&62914560)===0&&(Cs=4194304),p}function Ne(p){for(var w=[],P=0;31>P;P++)w.push(p);return w}function Ie(p,w){p.pendingLanes|=w,w!==268435456&&(p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0)}function He(p,w,P,U,X,ue){var Ze=p.pendingLanes;p.pendingLanes=P,p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0,p.expiredLanes&=P,p.entangledLanes&=P,p.errorRecoveryDisabledLanes&=P,p.shellSuspendCounter=0;var ft=p.entanglements,Ut=p.expirationTimes,ua=p.hiddenUpdates;for(P=Ze&~P;0<P;){var qa=31-$r(P),sr=1<<qa;ft[qa]=0,Ut[qa]=-1;var Na=ua[qa];if(Na!==null)for(ua[qa]=null,qa=0;qa<Na.length;qa++){var Ha=Na[qa];Ha!==null&&(Ha.lane&=-536870913)}P&=~sr}U!==0&&yt(p,U,0),ue!==0&&X===0&&p.tag!==0&&(p.suspendedLanes|=ue&~(Ze&~w))}function yt(p,w,P){p.pendingLanes|=w,p.suspendedLanes&=~w;var U=31-$r(w);p.entangledLanes|=w,p.entanglements[U]=p.entanglements[U]|1073741824|P&4194218}function At(p,w){var P=p.entangledLanes|=w;for(p=p.entanglements;P;){var U=31-$r(P),X=1<<U;X&w|p[U]&w&&(p[U]|=w),P&=~X}}function bt(p){return p&=-p,2<p?8<p?(p&134217727)!==0?32:268435456:8:2}function Gt(){var p=ke.p;return p!==0?p:(p=window.event,p===void 0?32:KC(p.type))}function Et(p,w){var P=ke.p;try{return ke.p=p,w()}finally{ke.p=P}}var Wt=Math.random().toString(36).slice(2),Yt="__reactFiber$"+Wt,Kt="__reactProps$"+Wt,Ca="__reactContainer$"+Wt,Ia="__reactEvents$"+Wt,Ga="__reactListeners$"+Wt,Cr="__reactHandles$"+Wt,Dr="__reactResources$"+Wt,Mr="__reactMarker$"+Wt;function Hr(p){delete p[Yt],delete p[Kt],delete p[Ia],delete p[Ga],delete p[Cr]}function Un(p){var w=p[Yt];if(w)return w;for(var P=p.parentNode;P;){if(w=P[Ca]||P[Yt]){if(P=w.alternate,w.child!==null||P!==null&&P.child!==null)for(p=q1(p);p!==null;){if(P=p[Yt])return P;p=q1(p)}return w}p=P,P=p.parentNode}return null}function ri(p){if(p=p[Yt]||p[Ca]){var w=p.tag;if(w===5||w===6||w===13||w===26||w===27||w===3)return p}return null}function Yr(p){var w=p.tag;if(w===5||w===26||w===27||w===6)return p.stateNode;throw Error(r(33))}function Cn(p){var w=p[Dr];return w||(w=p[Dr]={hoistableStyles:new Map,hoistableScripts:new Map}),w}function Xr(p){p[Mr]=!0}var jn=new Set,ki={};function Xi(p,w){Ps(p,w),Ps(p+"Capture",w)}function Ps(p,w){for(ki[p]=w,p=0;p<w.length;p++)jn.add(w[p])}var Es=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ns={},$s={};function pc(p){return Pa.call($s,p)?!0:Pa.call(Ns,p)?!1:Bo.test(p)?$s[p]=!0:(Ns[p]=!0,!1)}function tl(p,w,P){if(pc(w))if(P===null)p.removeAttribute(w);else{switch(typeof P){case"undefined":case"function":case"symbol":p.removeAttribute(w);return;case"boolean":var U=w.toLowerCase().slice(0,5);if(U!=="data-"&&U!=="aria-"){p.removeAttribute(w);return}}p.setAttribute(w,""+P)}}function Ui(p,w,P){if(P===null)p.removeAttribute(w);else{switch(typeof P){case"undefined":case"function":case"symbol":case"boolean":p.removeAttribute(w);return}p.setAttribute(w,""+P)}}function Xl(p,w,P,U){if(U===null)p.removeAttribute(P);else{switch(typeof U){case"undefined":case"function":case"symbol":case"boolean":p.removeAttribute(P);return}p.setAttributeNS(w,P,""+U)}}function jo(p){switch(typeof p){case"bigint":case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function Pd(p){var w=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(w==="checkbox"||w==="radio")}function kc(p){var w=Pd(p)?"checked":"value",P=Object.getOwnPropertyDescriptor(p.constructor.prototype,w),U=""+p[w];if(!p.hasOwnProperty(w)&&typeof P<"u"&&typeof P.get=="function"&&typeof P.set=="function"){var X=P.get,ue=P.set;return Object.defineProperty(p,w,{configurable:!0,get:function(){return X.call(this)},set:function(Ze){U=""+Ze,ue.call(this,Ze)}}),Object.defineProperty(p,w,{enumerable:P.enumerable}),{getValue:function(){return U},setValue:function(Ze){U=""+Ze},stopTracking:function(){p._valueTracker=null,delete p[w]}}}}function fh(p){p._valueTracker||(p._valueTracker=kc(p))}function wu(p){if(!p)return!1;var w=p._valueTracker;if(!w)return!0;var P=w.getValue(),U="";return p&&(U=Pd(p)?p.checked?"true":"false":p.value),p=U,p!==P?(w.setValue(p),!0):!1}function Uc(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}var Al=/[\n"\\]/g;function no(p){return p.replace(Al,function(w){return"\\"+w.charCodeAt(0).toString(16)+" "})}function Go(p,w,P,U,X,ue,Ze,ft){p.name="",Ze!=null&&typeof Ze!="function"&&typeof Ze!="symbol"&&typeof Ze!="boolean"?p.type=Ze:p.removeAttribute("type"),w!=null?Ze==="number"?(w===0&&p.value===""||p.value!=w)&&(p.value=""+jo(w)):p.value!==""+jo(w)&&(p.value=""+jo(w)):Ze!=="submit"&&Ze!=="reset"||p.removeAttribute("value"),w!=null?Ru(p,Ze,jo(w)):P!=null?Ru(p,Ze,jo(P)):U!=null&&p.removeAttribute("value"),X==null&&ue!=null&&(p.defaultChecked=!!ue),X!=null&&(p.checked=X&&typeof X!="function"&&typeof X!="symbol"),ft!=null&&typeof ft!="function"&&typeof ft!="symbol"&&typeof ft!="boolean"?p.name=""+jo(ft):p.removeAttribute("name")}function Jl(p,w,P,U,X,ue,Ze,ft){if(ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"&&(p.type=ue),w!=null||P!=null){if(!(ue!=="submit"&&ue!=="reset"||w!=null))return;P=P!=null?""+jo(P):"",w=w!=null?""+jo(w):P,ft||w===p.value||(p.value=w),p.defaultValue=w}U=U??X,U=typeof U!="function"&&typeof U!="symbol"&&!!U,p.checked=ft?p.checked:!!U,p.defaultChecked=!!U,Ze!=null&&typeof Ze!="function"&&typeof Ze!="symbol"&&typeof Ze!="boolean"&&(p.name=Ze)}function Ru(p,w,P){w==="number"&&Uc(p.ownerDocument)===p||p.defaultValue===""+P||(p.defaultValue=""+P)}function mo(p,w,P,U){if(p=p.options,w){w={};for(var X=0;X<P.length;X++)w["$"+P[X]]=!0;for(P=0;P<p.length;P++)X=w.hasOwnProperty("$"+p[P].value),p[P].selected!==X&&(p[P].selected=X),X&&U&&(p[P].defaultSelected=!0)}else{for(P=""+jo(P),w=null,X=0;X<p.length;X++){if(p[X].value===P){p[X].selected=!0,U&&(p[X].defaultSelected=!0);return}w!==null||p[X].disabled||(w=p[X])}w!==null&&(w.selected=!0)}}function Zo(p,w,P){if(w!=null&&(w=""+jo(w),w!==p.value&&(p.value=w),P==null)){p.defaultValue!==w&&(p.defaultValue=w);return}p.defaultValue=P!=null?""+jo(P):""}function Ed(p,w,P,U){if(w==null){if(U!=null){if(P!=null)throw Error(r(92));if(Te(U)){if(1<U.length)throw Error(r(93));U=U[0]}P=U}P==null&&(P=""),w=P}P=jo(w),p.defaultValue=P,U=p.textContent,U===P&&U!==""&&U!==null&&(p.value=U)}function Ku(p,w){if(w){var P=p.firstChild;if(P&&P===p.lastChild&&P.nodeType===3){P.nodeValue=w;return}}p.textContent=w}var Rf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ql(p,w,P){var U=w.indexOf("--")===0;P==null||typeof P=="boolean"||P===""?U?p.setProperty(w,""):w==="float"?p.cssFloat="":p[w]="":U?p.setProperty(w,P):typeof P!="number"||P===0||Rf.has(w)?w==="float"?p.cssFloat=P:p[w]=(""+P).trim():p[w]=P+"px"}function qo(p,w,P){if(w!=null&&typeof w!="object")throw Error(r(62));if(p=p.style,P!=null){for(var U in P)!P.hasOwnProperty(U)||w!=null&&w.hasOwnProperty(U)||(U.indexOf("--")===0?p.setProperty(U,""):U==="float"?p.cssFloat="":p[U]="");for(var X in w)U=w[X],w.hasOwnProperty(X)&&P[X]!==U&&Ql(p,X,U)}else for(var ue in w)w.hasOwnProperty(ue)&&Ql(p,ue,w[ue])}function Wu(p){if(p.indexOf("-")===-1)return!1;switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ph=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),al=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function zn(p){return al.test(""+p)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":p}var go=null;function gr(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var Bc=null,Sn=null;function mh(p){var w=ri(p);if(w&&(p=w.stateNode)){var P=p[Kt]||null;e:switch(p=w.stateNode,w.type){case"input":if(Go(p,P.value,P.defaultValue,P.defaultValue,P.checked,P.defaultChecked,P.type,P.name),w=P.name,P.type==="radio"&&w!=null){for(P=p;P.parentNode;)P=P.parentNode;for(P=P.querySelectorAll('input[name="'+no(""+w)+'"][type="radio"]'),w=0;w<P.length;w++){var U=P[w];if(U!==p&&U.form===p.form){var X=U[Kt]||null;if(!X)throw Error(r(90));Go(U,X.value,X.defaultValue,X.defaultValue,X.checked,X.defaultChecked,X.type,X.name)}}for(w=0;w<P.length;w++)U=P[w],U.form===p.form&&wu(U)}break e;case"textarea":Zo(p,P.value,P.defaultValue);break e;case"select":w=P.value,w!=null&&mo(p,!!P.multiple,w,!1)}}}var Nn=!1;function Ks(p,w,P){if(Nn)return p(w,P);Nn=!0;try{var U=p(w);return U}finally{if(Nn=!1,(Bc!==null||Sn!==null)&&(a0(),Bc&&(w=Bc,p=Sn,Sn=Bc=null,mh(w),p)))for(w=0;w<p.length;w++)mh(p[w])}}function mc(p,w){var P=p.stateNode;if(P===null)return null;var U=P[Kt]||null;if(U===null)return null;P=U[w];e:switch(w){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(U=!U.disabled)||(p=p.type,U=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!U;break e;default:p=!1}if(p)return null;if(P&&typeof P!="function")throw Error(r(231,w,typeof P));return P}var gc=!1;if(Es)try{var tr={};Object.defineProperty(tr,"passive",{get:function(){gc=!0}}),window.addEventListener("test",tr,tr),window.removeEventListener("test",tr,tr)}catch{gc=!1}var dn=null,bn=null,Ws=null;function Nd(){if(Ws)return Ws;var p,w=bn,P=w.length,U,X="value"in dn?dn.value:dn.textContent,ue=X.length;for(p=0;p<P&&w[p]===X[p];p++);var Ze=P-p;for(U=1;U<=Ze&&w[P-U]===X[ue-U];U++);return Ws=X.slice(p,1<U?1-U:void 0)}function yn(p){var w=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&w===13&&(p=13)):p=w,p===10&&(p=13),32<=p||p===13?p:0}function Ho(){return!0}function Tu(){return!1}function Os(p){function w(P,U,X,ue,Ze){this._reactName=P,this._targetInst=X,this.type=U,this.nativeEvent=ue,this.target=Ze,this.currentTarget=null;for(var ft in p)p.hasOwnProperty(ft)&&(P=p[ft],this[ft]=P?P(ue):ue[ft]);return this.isDefaultPrevented=(ue.defaultPrevented!=null?ue.defaultPrevented:ue.returnValue===!1)?Ho:Tu,this.isPropagationStopped=Tu,this}return Ve(w.prototype,{preventDefault:function(){this.defaultPrevented=!0;var P=this.nativeEvent;P&&(P.preventDefault?P.preventDefault():typeof P.returnValue!="unknown"&&(P.returnValue=!1),this.isDefaultPrevented=Ho)},stopPropagation:function(){var P=this.nativeEvent;P&&(P.stopPropagation?P.stopPropagation():typeof P.cancelBubble!="unknown"&&(P.cancelBubble=!0),this.isPropagationStopped=Ho)},persist:function(){},isPersistent:Ho}),w}var Ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Di=Os(Ki),yo=Ve({},Ki,{view:0,detail:0}),Od=Os(yo),gh,yc,Ac,rl=Ve({},yo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tu,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==Ac&&(Ac&&p.type==="mousemove"?(gh=p.screenX-Ac.screenX,yc=p.screenY-Ac.screenY):yc=gh=0,Ac=p),gh)},movementY:function(p){return"movementY"in p?p.movementY:yc}}),ys=Os(rl),Yu=Ve({},rl,{dataTransfer:0}),Vs=Os(Yu),zl=Ve({},yo,{relatedTarget:0}),nl=Os(zl),Ji=Ve({},Ki,{animationName:0,elapsedTime:0,pseudoElement:0}),Ys=Os(Ji),eu=Ve({},Ki,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),hs=Os(eu),Bh=Ve({},Ki,{data:0}),$o=Os(Bh),Vd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Su={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sp(p){var w=this.nativeEvent;return w.getModifierState?w.getModifierState(p):(p=Su[p])?!!w[p]:!1}function tu(){return sp}var Qm=Ve({},yo,{key:function(p){if(p.key){var w=Vd[p.key]||p.key;if(w!=="Unidentified")return w}return p.type==="keypress"?(p=yn(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?Cu[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tu,charCode:function(p){return p.type==="keypress"?yn(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?yn(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),zd=Os(Qm),Xs=Ve({},rl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tf=Os(Xs),au=Ve({},yo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tu}),Cf=Os(au),ce=Ve({},Ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),Je=Os(ce),Mt=Ve({},rl,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),Jt=Os(Mt),ha=Ve({},Ki,{newState:0,oldState:0}),Ma=Os(ha),ir=[9,13,27,32],xr=Es&&"CompositionEvent"in window,Jr=null;Es&&"documentMode"in document&&(Jr=document.documentMode);var On=Es&&"TextEvent"in window&&!Jr,Fn=Es&&(!xr||Jr&&8<Jr&&11>=Jr),Ri=" ",zs=!1;function Ds(p,w){switch(p){case"keyup":return ir.indexOf(w.keyCode)!==-1;case"keydown":return w.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function io(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var os=!1;function Vr(p,w){switch(p){case"compositionend":return io(w);case"keypress":return w.which!==32?null:(zs=!0,Ri);case"textInput":return p=w.data,p===Ri&&zs?null:p;default:return null}}function ur(p,w){if(os)return p==="compositionend"||!xr&&Ds(p,w)?(p=Nd(),Ws=bn=dn=null,os=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(w.ctrlKey||w.altKey||w.metaKey)||w.ctrlKey&&w.altKey){if(w.char&&1<w.char.length)return w.char;if(w.which)return String.fromCharCode(w.which)}return null;case"compositionend":return Fn&&w.locale!=="ko"?null:w.data;default:return null}}var vl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pr(p){var w=p&&p.nodeName&&p.nodeName.toLowerCase();return w==="input"?!!vl[p.type]:w==="textarea"}function bu(p,w,P,U){Bc?Sn?Sn.push(U):Sn=[U]:Bc=U,w=Uf(w,"onChange"),0<w.length&&(P=new Di("onChange","change",null,P,U),p.push({event:P,listeners:w}))}var ru=null,Sr=null;function yh(p){u0(p,0)}function nu(p){var w=Yr(p);if(wu(w))return p}function vc(p,w){if(p==="change")return w}var Dd=!1;if(Es){var Ms;if(Es){var bi="oninput"in document;if(!bi){var _c=document.createElement("div");_c.setAttribute("oninput","return;"),bi=typeof _c.oninput=="function"}Ms=bi}else Ms=!1;Dd=Ms&&(!document.documentMode||9<document.documentMode)}function za(){ru&&(ru.detachEvent("onpropertychange",Md),Sr=ru=null)}function Md(p){if(p.propertyName==="value"&&nu(Sr)){var w=[];bu(w,Sr,p,gr(p)),Ks(yh,w)}}function Js(p,w,P){p==="focusin"?(za(),ru=w,Sr=P,ru.attachEvent("onpropertychange",Md)):p==="focusout"&&za()}function Ao(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return nu(Sr)}function Sf(p,w){if(p==="click")return nu(w)}function jh(p,w){if(p==="input"||p==="change")return nu(w)}function vo(p,w){return p===w&&(p!==0||1/p===1/w)||p!==p&&w!==w}var js=typeof Object.is=="function"?Object.is:vo;function Dl(p,w){if(js(p,w))return!0;if(typeof p!="object"||p===null||typeof w!="object"||w===null)return!1;var P=Object.keys(p),U=Object.keys(w);if(P.length!==U.length)return!1;for(U=0;U<P.length;U++){var X=P[U];if(!Pa.call(w,X)||!js(p[X],w[X]))return!1}return!0}function jc(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function iu(p,w){var P=jc(p);p=0;for(var U;P;){if(P.nodeType===3){if(U=p+P.textContent.length,p<=w&&U>=w)return{node:P,offset:w-p};p=U}e:{for(;P;){if(P.nextSibling){P=P.nextSibling;break e}P=P.parentNode}P=void 0}P=jc(P)}}function Ah(p,w){return p&&w?p===w?!0:p&&p.nodeType===3?!1:w&&w.nodeType===3?Ah(p,w.parentNode):"contains"in p?p.contains(w):p.compareDocumentPosition?!!(p.compareDocumentPosition(w)&16):!1:!1}function Ml(p){p=p!=null&&p.ownerDocument!=null&&p.ownerDocument.defaultView!=null?p.ownerDocument.defaultView:window;for(var w=Uc(p.document);w instanceof p.HTMLIFrameElement;){try{var P=typeof w.contentWindow.location.href=="string"}catch{P=!1}if(P)p=w.contentWindow;else break;w=Uc(p.document)}return w}function No(p){var w=p&&p.nodeName&&p.nodeName.toLowerCase();return w&&(w==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||w==="textarea"||p.contentEditable==="true")}function Id(p,w){var P=Ml(w);w=p.focusedElem;var U=p.selectionRange;if(P!==w&&w&&w.ownerDocument&&Ah(w.ownerDocument.documentElement,w)){if(U!==null&&No(w)){if(p=U.start,P=U.end,P===void 0&&(P=p),"selectionStart"in w)w.selectionStart=p,w.selectionEnd=Math.min(P,w.value.length);else if(P=(p=w.ownerDocument||document)&&p.defaultView||window,P.getSelection){P=P.getSelection();var X=w.textContent.length,ue=Math.min(U.start,X);U=U.end===void 0?ue:Math.min(U.end,X),!P.extend&&ue>U&&(X=U,U=ue,ue=X),X=iu(w,ue);var Ze=iu(w,U);X&&Ze&&(P.rangeCount!==1||P.anchorNode!==X.node||P.anchorOffset!==X.offset||P.focusNode!==Ze.node||P.focusOffset!==Ze.offset)&&(p=p.createRange(),p.setStart(X.node,X.offset),P.removeAllRanges(),ue>U?(P.addRange(p),P.extend(Ze.node,Ze.offset)):(p.setEnd(Ze.node,Ze.offset),P.addRange(p)))}}for(p=[],P=w;P=P.parentNode;)P.nodeType===1&&p.push({element:P,left:P.scrollLeft,top:P.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<p.length;w++)P=p[w],P.element.scrollLeft=P.left,P.element.scrollTop=P.top}}var Gc=Es&&"documentMode"in document&&11>=document.documentMode,Il=null,wc=null,xu=null,Qi=!1;function bf(p,w,P){var U=P.window===P?P.document:P.nodeType===9?P:P.ownerDocument;Qi||Il==null||Il!==Uc(U)||(U=Il,"selectionStart"in U&&No(U)?U={start:U.selectionStart,end:U.selectionEnd}:(U=(U.ownerDocument&&U.ownerDocument.defaultView||window).getSelection(),U={anchorNode:U.anchorNode,anchorOffset:U.anchorOffset,focusNode:U.focusNode,focusOffset:U.focusOffset}),xu&&Dl(xu,U)||(xu=U,U=Uf(wc,"onSelect"),0<U.length&&(w=new Di("onSelect","select",null,w,P),p.push({event:w,listeners:U}),w.target=Il)))}function so(p,w){var P={};return P[p.toLowerCase()]=w.toLowerCase(),P["Webkit"+p]="webkit"+w,P["Moz"+p]="moz"+w,P}var _o={animationend:so("Animation","AnimationEnd"),animationiteration:so("Animation","AnimationIteration"),animationstart:so("Animation","AnimationStart"),transitionrun:so("Transition","TransitionRun"),transitionstart:so("Transition","TransitionStart"),transitioncancel:so("Transition","TransitionCancel"),transitionend:so("Transition","TransitionEnd")},Ld={},Fd={};Es&&(Fd=document.createElement("div").style,"AnimationEvent"in window||(delete _o.animationend.animation,delete _o.animationiteration.animation,delete _o.animationstart.animation),"TransitionEvent"in window||delete _o.transitionend.transition);function oo(p){if(Ld[p])return Ld[p];if(!_o[p])return p;var w=_o[p],P;for(P in w)if(w.hasOwnProperty(P)&&P in Fd)return Ld[p]=w[P];return p}var Zc=oo("animationend"),Rc=oo("animationiteration"),Pu=oo("animationstart"),qc=oo("transitionrun"),Eu=oo("transitionstart"),Hc=oo("transitioncancel"),Tc=oo("transitionend"),Xu=new Map,Ko="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function As(p,w){Xu.set(p,w),Xi(w,[p])}var ai=[],li=0,es=0;function fs(){for(var p=li,w=es=li=0;w<p;){var P=ai[w];ai[w++]=null;var U=ai[w];ai[w++]=null;var X=ai[w];ai[w++]=null;var ue=ai[w];if(ai[w++]=null,U!==null&&X!==null){var Ze=U.pending;Ze===null?X.next=X:(X.next=Ze.next,Ze.next=X),U.pending=X}ue!==0&&ou(P,X,ue)}}function su(p,w,P,U){ai[li++]=p,ai[li++]=w,ai[li++]=P,ai[li++]=U,es|=U,p.lanes|=U,p=p.alternate,p!==null&&(p.lanes|=U)}function $c(p,w,P,U){return su(p,w,P,U),ln(p)}function il(p,w){return su(p,null,null,w),ln(p)}function ou(p,w,P){p.lanes|=P;var U=p.alternate;U!==null&&(U.lanes|=P);for(var X=!1,ue=p.return;ue!==null;)ue.childLanes|=P,U=ue.alternate,U!==null&&(U.childLanes|=P),ue.tag===22&&(p=ue.stateNode,p===null||p._visibility&1||(X=!0)),p=ue,ue=ue.return;X&&w!==null&&p.tag===3&&(ue=p.stateNode,X=31-$r(P),ue=ue.hiddenUpdates,p=ue[X],p===null?ue[X]=[w]:p.push(w),w.lane=P|536870912)}function ln(p){if(50<bl)throw bl=0,Jd=null,Error(r(185));for(var w=p.return;w!==null;)p=w,w=p.return;return p.tag===3?p.stateNode:null}var Kc={},Ll=new WeakMap;function ls(p,w){if(typeof p=="object"&&p!==null){var P=Ll.get(p);return P!==void 0?P:(w={value:p,source:w,stack:je(w)},Ll.set(p,w),w)}return{value:p,source:w,stack:je(w)}}var Cc=[],kd=0,Ai=null,Gh=0,sl=[],_l=0,Wc=null,Nu=1,Ju="";function Sc(p,w){Cc[kd++]=Gh,Cc[kd++]=Ai,Ai=p,Gh=w}function tm(p,w,P){sl[_l++]=Nu,sl[_l++]=Ju,sl[_l++]=Wc,Wc=p;var U=Nu;p=Ju;var X=32-$r(U)-1;U&=~(1<<X),P+=1;var ue=32-$r(w)+X;if(30<ue){var Ze=X-X%5;ue=(U&(1<<Ze)-1).toString(32),U>>=Ze,X-=Ze,Nu=1<<32-$r(w)+X|P<<X|U,Ju=ue+p}else Nu=1<<ue|P<<X|U,Ju=p}function Zh(p){p.return!==null&&(Sc(p,1),tm(p,1,0))}function qh(p){for(;p===Ai;)Ai=Cc[--kd],Cc[kd]=null,Gh=Cc[--kd],Cc[kd]=null;for(;p===Wc;)Wc=sl[--_l],sl[_l]=null,Ju=sl[--_l],sl[_l]=null,Nu=sl[--_l],sl[_l]=null}var ol=null,ts=null,xi=!1,lu=null,Ou=!1,op=Error(r(519));function bc(p){var w=Error(r(418,""));throw Bd(ls(w,p)),op}function xf(p){var w=p.stateNode,P=p.type,U=p.memoizedProps;switch(w[Yt]=p,w[Kt]=U,P){case"dialog":Gi("cancel",w),Gi("close",w);break;case"iframe":case"object":case"embed":Gi("load",w);break;case"video":case"audio":for(P=0;P<cg.length;P++)Gi(cg[P],w);break;case"source":Gi("error",w);break;case"img":case"image":case"link":Gi("error",w),Gi("load",w);break;case"details":Gi("toggle",w);break;case"input":Gi("invalid",w),Jl(w,U.value,U.defaultValue,U.checked,U.defaultChecked,U.type,U.name,!0),fh(w);break;case"select":Gi("invalid",w);break;case"textarea":Gi("invalid",w),Ed(w,U.value,U.defaultValue,U.children),fh(w)}P=U.children,typeof P!="string"&&typeof P!="number"&&typeof P!="bigint"||w.textContent===""+P||U.suppressHydrationWarning===!0||Bf(w.textContent,P)?(U.popover!=null&&(Gi("beforetoggle",w),Gi("toggle",w)),U.onScroll!=null&&Gi("scroll",w),U.onScrollEnd!=null&&Gi("scrollend",w),U.onClick!=null&&(w.onclick=ly),w=!0):w=!1,w||bc(p)}function Ud(p){for(ol=p.return;ol;)switch(ol.tag){case 3:case 27:Ou=!0;return;case 5:case 13:Ou=!1;return;default:ol=ol.return}}function Hh(p){if(p!==ol)return!1;if(!xi)return Ud(p),xi=!0,!1;var w=!1,P;if((P=p.tag!==3&&p.tag!==27)&&((P=p.tag===5)&&(P=p.type,P=!(P!=="form"&&P!=="button")||p0(p.type,p.memoizedProps)),P=!P),P&&(w=!0),w&&ts&&bc(p),Ud(p),p.tag===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));e:{for(p=p.nextSibling,w=0;p;){if(p.nodeType===8)if(P=p.data,P==="/$"){if(w===0){ts=ju(p.nextSibling);break e}w--}else P!=="$"&&P!=="$!"&&P!=="$?"||w++;p=p.nextSibling}ts=null}}else ts=ol?ju(p.stateNode.nextSibling):null;return!0}function $h(){ts=ol=null,xi=!1}function Bd(p){lu===null?lu=[p]:lu.push(p)}var Pf=Error(r(460)),eg=Error(r(474)),vh={then:function(){}};function Hg(p){return p=p.status,p==="fulfilled"||p==="rejected"}function xc(){}function Qu(p,w,P){switch(P=p[P],P===void 0?p.push(w):P!==w&&(w.then(xc,xc),w=P),w.status){case"fulfilled":return w.value;case"rejected":throw p=w.reason,p===Pf?Error(r(483)):p;default:if(typeof w.status=="string")w.then(xc,xc);else{if(p=Gr,p!==null&&100<p.shellSuspendCounter)throw Error(r(482));p=w,p.status="pending",p.then(function(U){if(w.status==="pending"){var X=w;X.status="fulfilled",X.value=U}},function(U){if(w.status==="pending"){var X=w;X.status="rejected",X.reason=U}})}switch(w.status){case"fulfilled":return w.value;case"rejected":throw p=w.reason,p===Pf?Error(r(483)):p}throw Vu=w,Pf}}var Vu=null;function $g(){if(Vu===null)throw Error(r(459));var p=Vu;return Vu=null,p}var Kh=null,wl=0;function ll(p){var w=wl;return wl+=1,Kh===null&&(Kh=[]),Qu(Kh,p,w)}function Wh(p,w){w=w.props.ref,p.ref=w!==void 0?w:null}function jd(p,w){throw w.$$typeof===l?Error(r(525)):(p=Object.prototype.toString.call(w),Error(r(31,p==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":p)))}function am(p){var w=p._init;return w(p._payload)}function rm(p){function w(ya,ia){if(p){var Sa=ya.deletions;Sa===null?(ya.deletions=[ia],ya.flags|=16):Sa.push(ia)}}function P(ya,ia){if(!p)return null;for(;ia!==null;)w(ya,ia),ia=ia.sibling;return null}function U(ya){for(var ia=new Map;ya!==null;)ya.key!==null?ia.set(ya.key,ya):ia.set(ya.index,ya),ya=ya.sibling;return ia}function X(ya,ia){return ya=xa(ya,ia),ya.index=0,ya.sibling=null,ya}function ue(ya,ia,Sa){return ya.index=Sa,p?(Sa=ya.alternate,Sa!==null?(Sa=Sa.index,Sa<ia?(ya.flags|=33554434,ia):Sa):(ya.flags|=33554434,ia)):(ya.flags|=1048576,ia)}function Ze(ya){return p&&ya.alternate===null&&(ya.flags|=33554434),ya}function ft(ya,ia,Sa,ar){return ia===null||ia.tag!==6?(ia=ta(Sa,ya.mode,ar),ia.return=ya,ia):(ia=X(ia,Sa),ia.return=ya,ia)}function Ut(ya,ia,Sa,ar){var en=Sa.type;return en===v?qa(ya,ia,Sa.props.children,ar,Sa.key):ia!==null&&(ia.elementType===en||typeof en=="object"&&en!==null&&en.$$typeof===ee&&am(en)===ia.type)?(ia=X(ia,Sa.props),Wh(ia,Sa),ia.return=ya,ia):(ia=sa(Sa.type,Sa.key,Sa.props,null,ya.mode,ar),Wh(ia,Sa),ia.return=ya,ia)}function ua(ya,ia,Sa,ar){return ia===null||ia.tag!==4||ia.stateNode.containerInfo!==Sa.containerInfo||ia.stateNode.implementation!==Sa.implementation?(ia=da(Sa,ya.mode,ar),ia.return=ya,ia):(ia=X(ia,Sa.children||[]),ia.return=ya,ia)}function qa(ya,ia,Sa,ar,en){return ia===null||ia.tag!==7?(ia=zt(Sa,ya.mode,ar,en),ia.return=ya,ia):(ia=X(ia,Sa),ia.return=ya,ia)}function sr(ya,ia,Sa){if(typeof ia=="string"&&ia!==""||typeof ia=="number"||typeof ia=="bigint")return ia=ta(""+ia,ya.mode,Sa),ia.return=ya,ia;if(typeof ia=="object"&&ia!==null){switch(ia.$$typeof){case c:return Sa=sa(ia.type,ia.key,ia.props,null,ya.mode,Sa),Wh(Sa,ia),Sa.return=ya,Sa;case n:return ia=da(ia,ya.mode,Sa),ia.return=ya,ia;case ee:var ar=ia._init;return ia=ar(ia._payload),sr(ya,ia,Sa)}if(Te(ia)||me(ia))return ia=zt(ia,ya.mode,Sa,null),ia.return=ya,ia;if(typeof ia.then=="function")return sr(ya,ll(ia),Sa);if(ia.$$typeof===F)return sr(ya,rc(ya,ia),Sa);jd(ya,ia)}return null}function Na(ya,ia,Sa,ar){var en=ia!==null?ia.key:null;if(typeof Sa=="string"&&Sa!==""||typeof Sa=="number"||typeof Sa=="bigint")return en!==null?null:ft(ya,ia,""+Sa,ar);if(typeof Sa=="object"&&Sa!==null){switch(Sa.$$typeof){case c:return Sa.key===en?Ut(ya,ia,Sa,ar):null;case n:return Sa.key===en?ua(ya,ia,Sa,ar):null;case ee:return en=Sa._init,Sa=en(Sa._payload),Na(ya,ia,Sa,ar)}if(Te(Sa)||me(Sa))return en!==null?null:qa(ya,ia,Sa,ar,null);if(typeof Sa.then=="function")return Na(ya,ia,ll(Sa),ar);if(Sa.$$typeof===F)return Na(ya,ia,rc(ya,Sa),ar);jd(ya,Sa)}return null}function Ha(ya,ia,Sa,ar,en){if(typeof ar=="string"&&ar!==""||typeof ar=="number"||typeof ar=="bigint")return ya=ya.get(Sa)||null,ft(ia,ya,""+ar,en);if(typeof ar=="object"&&ar!==null){switch(ar.$$typeof){case c:return ya=ya.get(ar.key===null?Sa:ar.key)||null,Ut(ia,ya,ar,en);case n:return ya=ya.get(ar.key===null?Sa:ar.key)||null,ua(ia,ya,ar,en);case ee:var Ti=ar._init;return ar=Ti(ar._payload),Ha(ya,ia,Sa,ar,en)}if(Te(ar)||me(ar))return ya=ya.get(Sa)||null,qa(ia,ya,ar,en,null);if(typeof ar.then=="function")return Ha(ya,ia,Sa,ll(ar),en);if(ar.$$typeof===F)return Ha(ya,ia,Sa,rc(ia,ar),en);jd(ia,ar)}return null}function an(ya,ia,Sa,ar){for(var en=null,Ti=null,mn=ia,In=ia=0,hu=null;mn!==null&&In<Sa.length;In++){mn.index>In?(hu=mn,mn=null):hu=mn.sibling;var us=Na(ya,mn,Sa[In],ar);if(us===null){mn===null&&(mn=hu);break}p&&mn&&us.alternate===null&&w(ya,mn),ia=ue(us,ia,In),Ti===null?en=us:Ti.sibling=us,Ti=us,mn=hu}if(In===Sa.length)return P(ya,mn),xi&&Sc(ya,In),en;if(mn===null){for(;In<Sa.length;In++)mn=sr(ya,Sa[In],ar),mn!==null&&(ia=ue(mn,ia,In),Ti===null?en=mn:Ti.sibling=mn,Ti=mn);return xi&&Sc(ya,In),en}for(mn=U(mn);In<Sa.length;In++)hu=Ha(mn,ya,In,Sa[In],ar),hu!==null&&(p&&hu.alternate!==null&&mn.delete(hu.key===null?In:hu.key),ia=ue(hu,ia,In),Ti===null?en=hu:Ti.sibling=hu,Ti=hu);return p&&mn.forEach(function(Sm){return w(ya,Sm)}),xi&&Sc(ya,In),en}function ni(ya,ia,Sa,ar){if(Sa==null)throw Error(r(151));for(var en=null,Ti=null,mn=ia,In=ia=0,hu=null,us=Sa.next();mn!==null&&!us.done;In++,us=Sa.next()){mn.index>In?(hu=mn,mn=null):hu=mn.sibling;var Sm=Na(ya,mn,us.value,ar);if(Sm===null){mn===null&&(mn=hu);break}p&&mn&&Sm.alternate===null&&w(ya,mn),ia=ue(Sm,ia,In),Ti===null?en=Sm:Ti.sibling=Sm,Ti=Sm,mn=hu}if(us.done)return P(ya,mn),xi&&Sc(ya,In),en;if(mn===null){for(;!us.done;In++,us=Sa.next())us=sr(ya,us.value,ar),us!==null&&(ia=ue(us,ia,In),Ti===null?en=us:Ti.sibling=us,Ti=us);return xi&&Sc(ya,In),en}for(mn=U(mn);!us.done;In++,us=Sa.next())us=Ha(mn,ya,In,us.value,ar),us!==null&&(p&&us.alternate!==null&&mn.delete(us.key===null?In:us.key),ia=ue(us,ia,In),Ti===null?en=us:Ti.sibling=us,Ti=us);return p&&mn.forEach(function(_E){return w(ya,_E)}),xi&&Sc(ya,In),en}function Qo(ya,ia,Sa,ar){if(typeof Sa=="object"&&Sa!==null&&Sa.type===v&&Sa.key===null&&(Sa=Sa.props.children),typeof Sa=="object"&&Sa!==null){switch(Sa.$$typeof){case c:e:{for(var en=Sa.key;ia!==null;){if(ia.key===en){if(en=Sa.type,en===v){if(ia.tag===7){P(ya,ia.sibling),ar=X(ia,Sa.props.children),ar.return=ya,ya=ar;break e}}else if(ia.elementType===en||typeof en=="object"&&en!==null&&en.$$typeof===ee&&am(en)===ia.type){P(ya,ia.sibling),ar=X(ia,Sa.props),Wh(ar,Sa),ar.return=ya,ya=ar;break e}P(ya,ia);break}else w(ya,ia);ia=ia.sibling}Sa.type===v?(ar=zt(Sa.props.children,ya.mode,ar,Sa.key),ar.return=ya,ya=ar):(ar=sa(Sa.type,Sa.key,Sa.props,null,ya.mode,ar),Wh(ar,Sa),ar.return=ya,ya=ar)}return Ze(ya);case n:e:{for(en=Sa.key;ia!==null;){if(ia.key===en)if(ia.tag===4&&ia.stateNode.containerInfo===Sa.containerInfo&&ia.stateNode.implementation===Sa.implementation){P(ya,ia.sibling),ar=X(ia,Sa.children||[]),ar.return=ya,ya=ar;break e}else{P(ya,ia);break}else w(ya,ia);ia=ia.sibling}ar=da(Sa,ya.mode,ar),ar.return=ya,ya=ar}return Ze(ya);case ee:return en=Sa._init,Sa=en(Sa._payload),Qo(ya,ia,Sa,ar)}if(Te(Sa))return an(ya,ia,Sa,ar);if(me(Sa)){if(en=me(Sa),typeof en!="function")throw Error(r(150));return Sa=en.call(Sa),ni(ya,ia,Sa,ar)}if(typeof Sa.then=="function")return Qo(ya,ia,ll(Sa),ar);if(Sa.$$typeof===F)return Qo(ya,ia,rc(ya,Sa),ar);jd(ya,Sa)}return typeof Sa=="string"&&Sa!==""||typeof Sa=="number"||typeof Sa=="bigint"?(Sa=""+Sa,ia!==null&&ia.tag===6?(P(ya,ia.sibling),ar=X(ia,Sa),ar.return=ya,ya=ar):(P(ya,ia),ar=ta(Sa,ya.mode,ar),ar.return=ya,ya=ar),Ze(ya)):P(ya,ia)}return function(ya,ia,Sa,ar){try{wl=0;var en=Qo(ya,ia,Sa,ar);return Kh=null,en}catch(mn){if(mn===Pf)throw mn;var Ti=ra(29,mn,null,ya.mode);return Ti.lanes=ar,Ti.return=ya,Ti}finally{}}}var Yc=rm(!0),Ef=rm(!1),ul=lt(null),Gd=lt(0);function zu(p,w){p=An,ve(Gd,p),ve(ul,w),An=p|w.baseLanes}function Zd(){ve(Gd,An),ve(ul,ul.current)}function Xc(){An=Gd.current,ot(ul),ot(Gd)}var Fl=lt(null),ec=null;function Jc(p){var w=p.alternate;ve(Gs,Gs.current&1),ve(Fl,p),ec===null&&(w===null||ul.current!==null||w.memoizedState!==null)&&(ec=p)}function lp(p){if(p.tag===22){if(ve(Gs,Gs.current),ve(Fl,p),ec===null){var w=p.alternate;w!==null&&w.memoizedState!==null&&(ec=p)}}else qd()}function qd(){ve(Gs,Gs.current),ve(Fl,Fl.current)}function Qc(p){ot(Fl),ec===p&&(ec=null),ot(Gs)}var Gs=lt(0);function nm(p){for(var w=p;w!==null;){if(w.tag===13){var P=w.memoizedState;if(P!==null&&(P=P.dehydrated,P===null||P.data==="$?"||P.data==="$!"))return w}else if(w.tag===19&&w.memoizedProps.revealOrder!==void 0){if((w.flags&128)!==0)return w}else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===p)break;for(;w.sibling===null;){if(w.return===null||w.return===p)return null;w=w.return}w.sibling.return=w.return,w=w.sibling}return null}var tg=typeof AbortController<"u"?AbortController:function(){var p=[],w=this.signal={aborted:!1,addEventListener:function(P,U){p.push(U)}};this.abort=function(){w.aborted=!0,p.forEach(function(P){return P()})}},Nf=t.unstable_scheduleCallback,im=t.unstable_NormalPriority,lo={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yh(){return{controller:new tg,data:new Map,refCount:0}}function G(p){p.refCount--,p.refCount===0&&Nf(im,function(){p.controller.abort()})}var Q=null,ye=0,Me=0,We=null;function nt(p,w){if(Q===null){var P=Q=[];ye=0,Me=NA(),We={status:"pending",value:void 0,then:function(U){P.push(U)}}}return ye++,w.then(st,st),w}function st(){if(--ye===0&&Q!==null){We!==null&&(We.status="fulfilled");var p=Q;Q=null,Me=0,We=null;for(var w=0;w<p.length;w++)(0,p[w])()}}function ht(p,w){var P=[],U={status:"pending",value:null,reason:null,then:function(X){P.push(X)}};return p.then(function(){U.status="fulfilled",U.value=w;for(var X=0;X<P.length;X++)(0,P[X])(w)},function(X){for(U.status="rejected",U.reason=X,X=0;X<P.length;X++)(0,P[X])(void 0)}),U}var mt=we.S;we.S=function(p,w){typeof w=="object"&&w!==null&&typeof w.then=="function"&&nt(p,w),mt!==null&&mt(p,w)};var St=lt(null);function ea(){var p=St.current;return p!==null?p:Gr.pooledCache}function Pt(p,w){w===null?ve(St,St.current):ve(St,w.pool)}function _a(){var p=ea();return p===null?null:{parent:lo._currentValue,pool:p}}var na=0,Ta=null,fa=null,Rt=null,aa=!1,Za=!1,Qa=!1,Ka=0,Nr=0,Ar=null,hn=0;function fr(){throw Error(r(321))}function Pi(p,w){if(w===null)return!1;for(var P=0;P<w.length&&P<p.length;P++)if(!js(p[P],w[P]))return!1;return!0}function Mi(p,w,P,U,X,ue){return na=ue,Ta=w,w.memoizedState=null,w.updateQueue=null,w.lanes=0,we.H=p===null||p.memoizedState===null?Pc:uu,Qa=!1,ue=P(U,X),Qa=!1,Za&&(ue=ui(w,P,U,X)),Yn(p),ue}function Yn(p){we.H=Fu;var w=fa!==null&&fa.next!==null;if(na=0,Rt=fa=Ta=null,aa=!1,Nr=0,Ar=null,w)throw Error(r(300));p===null||hl||(p=p.dependencies,p!==null&&Df(p)&&(hl=!0))}function ui(p,w,P,U){Ta=p;var X=0;do{if(Za&&(Ar=null),Nr=0,Za=!1,25<=X)throw Error(r(301));if(X+=1,Rt=fa=null,p.updateQueue!=null){var ue=p.updateQueue;ue.lastEffect=null,ue.events=null,ue.stores=null,ue.memoCache!=null&&(ue.memoCache.index=0)}we.H=Ec,ue=w(P,U)}while(Za);return ue}function as(){var p=we.H,w=p.useState()[0];return w=typeof w.then=="function"?Ei(w):w,p=p.useState()[0],(fa!==null?fa.memoizedState:null)!==p&&(Ta.flags|=1024),w}function Hn(){var p=Ka!==0;return Ka=0,p}function xn(p,w,P){w.updateQueue=p.updateQueue,w.flags&=-2053,p.lanes&=~P}function vs(p){if(aa){for(p=p.memoizedState;p!==null;){var w=p.queue;w!==null&&(w.pending=null),p=p.next}aa=!1}na=0,Rt=fa=Ta=null,Za=!1,Nr=Ka=0,Ar=null}function Wi(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?Ta.memoizedState=Rt=p:Rt=Rt.next=p,Rt}function $n(){if(fa===null){var p=Ta.alternate;p=p!==null?p.memoizedState:null}else p=fa.next;var w=Rt===null?Ta.memoizedState:Rt.next;if(w!==null)Rt=w,fa=p;else{if(p===null)throw Ta.alternate===null?Error(r(467)):Error(r(310));fa=p,p={memoizedState:fa.memoizedState,baseState:fa.baseState,baseQueue:fa.baseQueue,queue:fa.queue,next:null},Rt===null?Ta.memoizedState=Rt=p:Rt=Rt.next=p}return Rt}var wo;wo=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Ei(p){var w=Nr;return Nr+=1,Ar===null&&(Ar=[]),p=Qu(Ar,p,w),w=Ta,(Rt===null?w.memoizedState:Rt.next)===null&&(w=w.alternate,we.H=w===null||w.memoizedState===null?Pc:uu),p}function ps(p){if(p!==null&&typeof p=="object"){if(typeof p.then=="function")return Ei(p);if(p.$$typeof===F)return to(p)}throw Error(r(438,String(p)))}function Pn(p){var w=null,P=Ta.updateQueue;if(P!==null&&(w=P.memoCache),w==null){var U=Ta.alternate;U!==null&&(U=U.updateQueue,U!==null&&(U=U.memoCache,U!=null&&(w={data:U.data.map(function(X){return X.slice()}),index:0})))}if(w==null&&(w={data:[],index:0}),P===null&&(P=wo(),Ta.updateQueue=P),P.memoCache=w,P=w.data[w.index],P===void 0)for(P=w.data[w.index]=Array(p),U=0;U<p;U++)P[U]=fe;return w.index++,P}function qi(p,w){return typeof w=="function"?w(p):w}function Qs(p){var w=$n();return Oo(w,fa,p)}function Oo(p,w,P){var U=p.queue;if(U===null)throw Error(r(311));U.lastRenderedReducer=P;var X=p.baseQueue,ue=U.pending;if(ue!==null){if(X!==null){var Ze=X.next;X.next=ue.next,ue.next=Ze}w.baseQueue=X=ue,U.pending=null}if(ue=p.baseState,X===null)p.memoizedState=ue;else{w=X.next;var ft=Ze=null,Ut=null,ua=w,qa=!1;do{var sr=ua.lane&-536870913;if(sr!==ua.lane?(mr&sr)===sr:(na&sr)===sr){var Na=ua.revertLane;if(Na===0)Ut!==null&&(Ut=Ut.next={lane:0,revertLane:0,action:ua.action,hasEagerState:ua.hasEagerState,eagerState:ua.eagerState,next:null}),sr===Me&&(qa=!0);else if((na&Na)===Na){ua=ua.next,Na===Me&&(qa=!0);continue}else sr={lane:0,revertLane:ua.revertLane,action:ua.action,hasEagerState:ua.hasEagerState,eagerState:ua.eagerState,next:null},Ut===null?(ft=Ut=sr,Ze=ue):Ut=Ut.next=sr,Ta.lanes|=Na,ns|=Na;sr=ua.action,Qa&&P(ue,sr),ue=ua.hasEagerState?ua.eagerState:P(ue,sr)}else Na={lane:sr,revertLane:ua.revertLane,action:ua.action,hasEagerState:ua.hasEagerState,eagerState:ua.eagerState,next:null},Ut===null?(ft=Ut=Na,Ze=ue):Ut=Ut.next=Na,Ta.lanes|=sr,ns|=sr;ua=ua.next}while(ua!==null&&ua!==w);if(Ut===null?Ze=ue:Ut.next=ft,!js(ue,p.memoizedState)&&(hl=!0,qa&&(P=We,P!==null)))throw P;p.memoizedState=ue,p.baseState=Ze,p.baseQueue=Ut,U.lastRenderedState=ue}return X===null&&(U.lanes=0),[p.memoizedState,U.dispatch]}function cl(p){var w=$n(),P=w.queue;if(P===null)throw Error(r(311));P.lastRenderedReducer=p;var U=P.dispatch,X=P.pending,ue=w.memoizedState;if(X!==null){P.pending=null;var Ze=X=X.next;do ue=p(ue,Ze.action),Ze=Ze.next;while(Ze!==X);js(ue,w.memoizedState)||(hl=!0),w.memoizedState=ue,w.baseQueue===null&&(w.baseState=ue),P.lastRenderedState=ue}return[ue,U]}function kl(p,w,P){var U=Ta,X=$n(),ue=xi;if(ue){if(P===void 0)throw Error(r(407));P=P()}else P=w();var Ze=!js((fa||X).memoizedState,P);if(Ze&&(X.memoizedState=P,hl=!0),X=X.queue,ad(Du.bind(null,U,X,p),[p]),X.getSnapshot!==w||Ze||Rt!==null&&Rt.memoizedState.tag&1){if(U.flags|=2048,Bl(9,Ul.bind(null,U,X,P,w),{destroy:void 0},null),Gr===null)throw Error(r(349));ue||(na&60)!==0||Is(U,w,P)}return P}function Is(p,w,P){p.flags|=16384,p={getSnapshot:w,value:P},w=Ta.updateQueue,w===null?(w=wo(),Ta.updateQueue=w,w.stores=[p]):(P=w.stores,P===null?w.stores=[p]:P.push(p))}function Ul(p,w,P,U){w.value=P,w.getSnapshot=U,Ea(w)&&Ba(p)}function Du(p,w,P){return P(function(){Ea(w)&&Ba(p)})}function Ea(p){var w=p.getSnapshot;p=p.value;try{var P=w();return!js(p,P)}catch{return!0}}function Ba(p){var w=il(p,2);w!==null&&Zl(w,p,2)}function rs(p){var w=Wi();if(typeof p=="function"){var P=p;if(p=P(),Qa){cn(!0);try{P()}finally{cn(!1)}}}return w.memoizedState=w.baseState=p,w.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:p},w}function Bi(p,w,P,U){return p.baseState=P,Oo(p,fa,typeof U=="function"?U:qi)}function qt(p,w,P,U,X){if(id(p))throw Error(r(485));if(p=w.action,p!==null){var ue={payload:X,action:p,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Ze){ue.listeners.push(Ze)}};we.T!==null?P(!0):ue.isTransition=!1,U(ue),P=w.pending,P===null?(ue.next=w.pending=ue,sm(w,ue)):(ue.next=P.next,w.pending=P.next=ue)}}function sm(p,w){var P=w.action,U=w.payload,X=p.state;if(w.isTransition){var ue=we.T,Ze={};we.T=Ze;try{var ft=P(X,U),Ut=we.S;Ut!==null&&Ut(Ze,ft),_h(p,w,ft)}catch(ua){Rh(p,w,ua)}finally{we.T=ue}}else try{ue=P(X,U),_h(p,w,ue)}catch(ua){Rh(p,w,ua)}}function _h(p,w,P){P!==null&&typeof P=="object"&&typeof P.then=="function"?P.then(function(U){wh(p,w,U)},function(U){return Rh(p,w,U)}):wh(p,w,P)}function wh(p,w,P){w.status="fulfilled",w.value=P,Mu(w),p.state=P,w=p.pending,w!==null&&(P=w.next,P===w?p.pending=null:(P=P.next,w.next=P,sm(p,P)))}function Rh(p,w,P){var U=p.pending;if(p.pending=null,U!==null){U=U.next;do w.status="rejected",w.reason=P,Mu(w),w=w.next;while(w!==U)}p.action=null}function Mu(p){p=p.listeners;for(var w=0;w<p.length;w++)(0,p[w])()}function Th(p,w){return w}function tc(p,w){if(xi){var P=Gr.formState;if(P!==null){e:{var U=Ta;if(xi){if(ts){t:{for(var X=ts,ue=Ou;X.nodeType!==8;){if(!ue){X=null;break t}if(X=ju(X.nextSibling),X===null){X=null;break t}}ue=X.data,X=ue==="F!"||ue==="F"?X:null}if(X){ts=ju(X.nextSibling),U=X.data==="F!";break e}}bc(U)}U=!1}U&&(w=P[0])}}return P=Wi(),P.memoizedState=P.baseState=w,U={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Th,lastRenderedState:w},P.queue=U,P=fp.bind(null,Ta,U),U.dispatch=P,U=rs(!1),ue=nd.bind(null,Ta,!1,U.queue),U=Wi(),X={state:w,dispatch:null,action:p,pending:null},U.queue=X,P=qt.bind(null,Ta,X,ue,P),X.dispatch=P,U.memoizedState=p,[w,P,!1]}function ag(p){var w=$n();return up(w,fa,p)}function up(p,w,P){w=Oo(p,w,Th)[0],p=Qs(qi)[0],w=typeof w=="object"&&w!==null&&typeof w.then=="function"?Ei(w):w;var U=$n(),X=U.queue,ue=X.dispatch;return P!==U.memoizedState&&(Ta.flags|=2048,Bl(9,rg.bind(null,X,P),{destroy:void 0},null)),[w,ue,p]}function rg(p,w){p.action=w}function Ch(p){var w=$n(),P=fa;if(P!==null)return up(w,P,p);$n(),w=w.memoizedState,P=$n();var U=P.queue.dispatch;return P.memoizedState=p,[w,U,!1]}function Bl(p,w,P,U){return p={tag:p,create:w,inst:P,deps:U,next:null},w=Ta.updateQueue,w===null&&(w=wo(),Ta.updateQueue=w),P=w.lastEffect,P===null?w.lastEffect=p.next=p:(U=P.next,P.next=p,p.next=U,w.lastEffect=p),p}function Xh(){return $n().memoizedState}function ed(p,w,P,U){var X=Wi();Ta.flags|=p,X.memoizedState=Bl(1|w,P,{destroy:void 0},U===void 0?null:U)}function td(p,w,P,U){var X=$n();U=U===void 0?null:U;var ue=X.memoizedState.inst;fa!==null&&U!==null&&Pi(U,fa.memoizedState.deps)?X.memoizedState=Bl(w,P,ue,U):(Ta.flags|=p,X.memoizedState=Bl(1|w,P,ue,U))}function cp(p,w){ed(8390656,8,p,w)}function ad(p,w){td(2048,8,p,w)}function dl(p,w){return td(4,2,p,w)}function ng(p,w){return td(4,4,p,w)}function uo(p,w){if(typeof w=="function"){p=p();var P=w(p);return function(){typeof P=="function"?P():w(null)}}if(w!=null)return p=p(),w.current=p,function(){w.current=null}}function Kg(p,w,P){P=P!=null?P.concat([p]):null,td(4,4,uo.bind(null,w,p),P)}function Sh(){}function ci(p,w){var P=$n();w=w===void 0?null:w;var U=P.memoizedState;return w!==null&&Pi(w,U[1])?U[0]:(P.memoizedState=[p,w],p)}function Mn(p,w){var P=$n();w=w===void 0?null:w;var U=P.memoizedState;if(w!==null&&Pi(w,U[1]))return U[0];if(U=p(),Qa){cn(!0);try{p()}finally{cn(!1)}}return P.memoizedState=[U,w],U}function dp(p,w,P){return P===void 0||(na&1073741824)!==0?p.memoizedState=w:(p.memoizedState=P,p=Vh(),Ta.lanes|=p,ns|=p,P)}function Iu(p,w,P,U){return js(P,w)?P:ul.current!==null?(p=dp(p,P,U),js(p,w)||(hl=!0),p):(na&42)===0?(hl=!0,p.memoizedState=P):(p=Vh(),Ta.lanes|=p,ns|=p,w)}function Hd(p,w,P,U,X){var ue=ke.p;ke.p=ue!==0&&8>ue?ue:8;var Ze=we.T,ft={};we.T=ft,nd(p,!1,w,P);try{var Ut=X(),ua=we.S;if(ua!==null&&ua(ft,Ut),Ut!==null&&typeof Ut=="object"&&typeof Ut.then=="function"){var qa=ht(Ut,U);bh(p,w,qa,Co(p))}else bh(p,w,U,Co(p))}catch(sr){bh(p,w,{then:function(){},status:"rejected",reason:sr},Co())}finally{ke.p=ue,we.T=Ze}}function Lu(){}function rd(p,w,P,U){if(p.tag!==5)throw Error(r(476));var X=Of(p).queue;Hd(p,X,w,Ge,P===null?Lu:function(){return Jh(p),P(U)})}function Of(p){var w=p.memoizedState;if(w!==null)return w;w={memoizedState:Ge,baseState:Ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:Ge},next:null};var P={};return w.next={memoizedState:P,baseState:P,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:P},next:null},p.memoizedState=w,p=p.alternate,p!==null&&(p.memoizedState=w),w}function Jh(p){var w=Of(p).next.queue;bh(p,w,{},Co())}function jl(){return to(fy)}function Vf(){return $n().memoizedState}function Vo(){return $n().memoizedState}function $d(p){for(var w=p.return;w!==null;){switch(w.tag){case 24:case 3:var P=Co();p=Mf(P);var U=If(w,p,P);U!==null&&(Zl(U,w,P),Lf(U,w,P)),w={cache:Yh()},p.payload=w;return}w=w.return}}function hp(p,w,P){var U=Co();P={lane:U,revertLane:0,action:P,hasEagerState:!1,eagerState:null,next:null},id(p)?pp(w,P):(P=$c(p,w,P,U),P!==null&&(Zl(P,p,U),Kd(P,w,U)))}function fp(p,w,P){var U=Co();bh(p,w,P,U)}function bh(p,w,P,U){var X={lane:U,revertLane:0,action:P,hasEagerState:!1,eagerState:null,next:null};if(id(p))pp(w,X);else{var ue=p.alternate;if(p.lanes===0&&(ue===null||ue.lanes===0)&&(ue=w.lastRenderedReducer,ue!==null))try{var Ze=w.lastRenderedState,ft=ue(Ze,P);if(X.hasEagerState=!0,X.eagerState=ft,js(ft,Ze))return su(p,w,X,0),Gr===null&&fs(),!1}catch{}finally{}if(P=$c(p,w,X,U),P!==null)return Zl(P,p,U),Kd(P,w,U),!0}return!1}function nd(p,w,P,U){if(U={lane:2,revertLane:NA(),action:U,hasEagerState:!1,eagerState:null,next:null},id(p)){if(w)throw Error(r(479))}else w=$c(p,P,U,2),w!==null&&Zl(w,p,2)}function id(p){var w=p.alternate;return p===Ta||w!==null&&w===Ta}function pp(p,w){Za=aa=!0;var P=p.pending;P===null?w.next=w:(w.next=P.next,P.next=w),p.pending=w}function Kd(p,w,P){if((P&4194176)!==0){var U=w.lanes;U&=p.pendingLanes,P|=U,w.lanes=P,At(p,P)}}var Fu={readContext:to,use:ps,useCallback:fr,useContext:fr,useEffect:fr,useImperativeHandle:fr,useLayoutEffect:fr,useInsertionEffect:fr,useMemo:fr,useReducer:fr,useRef:fr,useState:fr,useDebugValue:fr,useDeferredValue:fr,useTransition:fr,useSyncExternalStore:fr,useId:fr};Fu.useCacheRefresh=fr,Fu.useMemoCache=fr,Fu.useHostTransitionStatus=fr,Fu.useFormState=fr,Fu.useActionState=fr,Fu.useOptimistic=fr;var Pc={readContext:to,use:ps,useCallback:function(p,w){return Wi().memoizedState=[p,w===void 0?null:w],p},useContext:to,useEffect:cp,useImperativeHandle:function(p,w,P){P=P!=null?P.concat([p]):null,ed(4194308,4,uo.bind(null,w,p),P)},useLayoutEffect:function(p,w){return ed(4194308,4,p,w)},useInsertionEffect:function(p,w){ed(4,2,p,w)},useMemo:function(p,w){var P=Wi();w=w===void 0?null:w;var U=p();if(Qa){cn(!0);try{p()}finally{cn(!1)}}return P.memoizedState=[U,w],U},useReducer:function(p,w,P){var U=Wi();if(P!==void 0){var X=P(w);if(Qa){cn(!0);try{P(w)}finally{cn(!1)}}}else X=w;return U.memoizedState=U.baseState=X,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:X},U.queue=p,p=p.dispatch=hp.bind(null,Ta,p),[U.memoizedState,p]},useRef:function(p){var w=Wi();return p={current:p},w.memoizedState=p},useState:function(p){p=rs(p);var w=p.queue,P=fp.bind(null,Ta,w);return w.dispatch=P,[p.memoizedState,P]},useDebugValue:Sh,useDeferredValue:function(p,w){var P=Wi();return dp(P,p,w)},useTransition:function(){var p=rs(!1);return p=Hd.bind(null,Ta,p.queue,!0,!1),Wi().memoizedState=p,[!1,p]},useSyncExternalStore:function(p,w,P){var U=Ta,X=Wi();if(xi){if(P===void 0)throw Error(r(407));P=P()}else{if(P=w(),Gr===null)throw Error(r(349));(mr&60)!==0||Is(U,w,P)}X.memoizedState=P;var ue={value:P,getSnapshot:w};return X.queue=ue,cp(Du.bind(null,U,ue,p),[p]),U.flags|=2048,Bl(9,Ul.bind(null,U,ue,P,w),{destroy:void 0},null),P},useId:function(){var p=Wi(),w=Gr.identifierPrefix;if(xi){var P=Ju,U=Nu;P=(U&~(1<<32-$r(U)-1)).toString(32)+P,w=":"+w+"R"+P,P=Ka++,0<P&&(w+="H"+P.toString(32)),w+=":"}else P=hn++,w=":"+w+"r"+P.toString(32)+":";return p.memoizedState=w},useCacheRefresh:function(){return Wi().memoizedState=$d.bind(null,Ta)}};Pc.useMemoCache=Pn,Pc.useHostTransitionStatus=jl,Pc.useFormState=tc,Pc.useActionState=tc,Pc.useOptimistic=function(p){var w=Wi();w.memoizedState=w.baseState=p;var P={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return w.queue=P,w=nd.bind(null,Ta,!0,P),P.dispatch=w,[p,w]};var uu={readContext:to,use:ps,useCallback:ci,useContext:to,useEffect:ad,useImperativeHandle:Kg,useInsertionEffect:dl,useLayoutEffect:ng,useMemo:Mn,useReducer:Qs,useRef:Xh,useState:function(){return Qs(qi)},useDebugValue:Sh,useDeferredValue:function(p,w){var P=$n();return Iu(P,fa.memoizedState,p,w)},useTransition:function(){var p=Qs(qi)[0],w=$n().memoizedState;return[typeof p=="boolean"?p:Ei(p),w]},useSyncExternalStore:kl,useId:Vf};uu.useCacheRefresh=Vo,uu.useMemoCache=Pn,uu.useHostTransitionStatus=jl,uu.useFormState=ag,uu.useActionState=ag,uu.useOptimistic=function(p,w){var P=$n();return Bi(P,fa,p,w)};var Ec={readContext:to,use:ps,useCallback:ci,useContext:to,useEffect:ad,useImperativeHandle:Kg,useInsertionEffect:dl,useLayoutEffect:ng,useMemo:Mn,useReducer:cl,useRef:Xh,useState:function(){return cl(qi)},useDebugValue:Sh,useDeferredValue:function(p,w){var P=$n();return fa===null?dp(P,p,w):Iu(P,fa.memoizedState,p,w)},useTransition:function(){var p=cl(qi)[0],w=$n().memoizedState;return[typeof p=="boolean"?p:Ei(p),w]},useSyncExternalStore:kl,useId:Vf};Ec.useCacheRefresh=Vo,Ec.useMemoCache=Pn,Ec.useHostTransitionStatus=jl,Ec.useFormState=Ch,Ec.useActionState=Ch,Ec.useOptimistic=function(p,w){var P=$n();return fa!==null?Bi(P,fa,p,w):(P.baseState=p,[p,P.queue.dispatch])};function Ls(p,w,P,U){w=p.memoizedState,P=P(U,w),P=P==null?w:Ve({},w,P),p.memoizedState=P,p.lanes===0&&(p.updateQueue.baseState=P)}var cu={isMounted:function(p){return(p=p._reactInternals)?Ue(p)===p:!1},enqueueSetState:function(p,w,P){p=p._reactInternals;var U=Co(),X=Mf(U);X.payload=w,P!=null&&(X.callback=P),w=If(p,X,U),w!==null&&(Zl(w,p,U),Lf(w,p,U))},enqueueReplaceState:function(p,w,P){p=p._reactInternals;var U=Co(),X=Mf(U);X.tag=1,X.payload=w,P!=null&&(X.callback=P),w=If(p,X,U),w!==null&&(Zl(w,p,U),Lf(w,p,U))},enqueueForceUpdate:function(p,w){p=p._reactInternals;var P=Co(),U=Mf(P);U.tag=2,w!=null&&(U.callback=w),w=If(p,U,P),w!==null&&(Zl(w,p,P),Lf(w,p,P))}};function ac(p,w,P,U,X,ue,Ze){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(U,ue,Ze):w.prototype&&w.prototype.isPureReactComponent?!Dl(P,U)||!Dl(X,ue):!0}function eo(p,w,P,U){p=w.state,typeof w.componentWillReceiveProps=="function"&&w.componentWillReceiveProps(P,U),typeof w.UNSAFE_componentWillReceiveProps=="function"&&w.UNSAFE_componentWillReceiveProps(P,U),w.state!==p&&cu.enqueueReplaceState(w,w.state,null)}function ku(p,w){var P=w;if("ref"in w){P={};for(var U in w)U!=="ref"&&(P[U]=w[U])}if(p=p.defaultProps){P===w&&(P=Ve({},P));for(var X in p)P[X]===void 0&&(P[X]=p[X])}return P}var xh=typeof reportError=="function"?reportError:function(p){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var w=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof p=="object"&&p!==null&&typeof p.message=="string"?String(p.message):String(p),error:p});if(!window.dispatchEvent(w))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",p);return}console.error(p)};function mp(p){xh(p)}function Qh(p){console.error(p)}function Ph(p){xh(p)}function Wd(p,w){try{var P=p.onUncaughtError;P(w.value,{componentStack:w.stack})}catch(U){setTimeout(function(){throw U})}}function ig(p,w,P){try{var U=p.onCaughtError;U(P.value,{componentStack:P.stack,errorBoundary:w.tag===1?w.stateNode:null})}catch(X){setTimeout(function(){throw X})}}function om(p,w,P){return P=Mf(P),P.tag=3,P.payload={element:null},P.callback=function(){Wd(p,w)},P}function sg(p){return p=Mf(p),p.tag=3,p}function Wg(p,w,P,U){var X=P.type.getDerivedStateFromError;if(typeof X=="function"){var ue=U.value;p.payload=function(){return X(ue)},p.callback=function(){ig(w,P,U)}}var Ze=P.stateNode;Ze!==null&&typeof Ze.componentDidCatch=="function"&&(p.callback=function(){ig(w,P,U),typeof X!="function"&&(ms===null?ms=new Set([this]):ms.add(this));var ft=U.stack;this.componentDidCatch(U.value,{componentStack:ft!==null?ft:""})})}function pA(p,w,P,U,X){if(P.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){if(w=P.alternate,w!==null&&_p(w,P,X,!0),P=Fl.current,P!==null){switch(P.tag){case 13:return ec===null?n0():P.alternate===null&&kn===0&&(kn=3),P.flags&=-257,P.flags|=65536,P.lanes=X,U===vh?P.flags|=16384:(w=P.updateQueue,w===null?P.updateQueue=new Set([U]):w.add(U),M1(p,U,X)),!1;case 22:return P.flags|=65536,U===vh?P.flags|=16384:(w=P.updateQueue,w===null?(w={transitions:null,markerInstances:null,retryQueue:new Set([U])},P.updateQueue=w):(P=w.retryQueue,P===null?w.retryQueue=new Set([U]):P.add(U)),M1(p,U,X)),!1}throw Error(r(435,P.tag))}return M1(p,U,X),n0(),!1}if(xi)return w=Fl.current,w!==null?((w.flags&65536)===0&&(w.flags|=256),w.flags|=65536,w.lanes=X,U!==op&&(p=Error(r(422),{cause:U}),Bd(ls(p,P)))):(U!==op&&(w=Error(r(423),{cause:U}),Bd(ls(w,P))),p=p.current.alternate,p.flags|=65536,X&=-X,p.lanes|=X,U=ls(U,P),X=om(p.stateNode,U,X),Jg(p,X),kn!==4&&(kn=2)),!1;var ue=Error(r(520),{cause:U});if(ue=ls(ue,P),Vn===null?Vn=[ue]:Vn.push(ue),kn!==4&&(kn=2),w===null)return!0;U=ls(U,P),P=w;do{switch(P.tag){case 3:return P.flags|=65536,p=X&-X,P.lanes|=p,p=om(P.stateNode,U,p),Jg(P,p),!1;case 1:if(w=P.type,ue=P.stateNode,(P.flags&128)===0&&(typeof w.getDerivedStateFromError=="function"||ue!==null&&typeof ue.componentDidCatch=="function"&&(ms===null||!ms.has(ue))))return P.flags|=65536,X&=-X,P.lanes|=X,X=sg(X),Wg(X,p,P,U),Jg(P,X),!1}P=P.return}while(P!==null);return!1}var lm=Error(r(461)),hl=!1;function Rl(p,w,P,U){w.child=p===null?Ef(w,null,P,U):Yc(w,p.child,P,U)}function mA(p,w,P,U,X){P=P.render;var ue=w.ref;if("ref"in U){var Ze={};for(var ft in U)ft!=="ref"&&(Ze[ft]=U[ft])}else Ze=U;return Oc(w),U=Mi(p,w,P,Ze,ue,X),ft=Hn(),p!==null&&!hl?(xn(p,w,X),Nc(p,w,X)):(xi&&ft&&Zh(w),w.flags|=1,Rl(p,w,U,X),w.child)}function gA(p,w,P,U,X){if(p===null){var ue=P.type;return typeof ue=="function"&&!ca(ue)&&ue.defaultProps===void 0&&P.compare===null?(w.tag=15,w.type=ue,yA(p,w,ue,U,X)):(p=sa(P.type,null,U,w,w.mode,X),p.ref=w.ref,p.return=w,w.child=p)}if(ue=p.child,!Ss(p,X)){var Ze=ue.memoizedProps;if(P=P.compare,P=P!==null?P:Dl,P(Ze,U)&&p.ref===w.ref)return Nc(p,w,X)}return w.flags|=1,p=xa(ue,U),p.ref=w.ref,p.return=w,w.child=p}function yA(p,w,P,U,X){if(p!==null){var ue=p.memoizedProps;if(Dl(ue,U)&&p.ref===w.ref)if(hl=!1,w.pendingProps=U=ue,Ss(p,X))(p.flags&131072)!==0&&(hl=!0);else return w.lanes=p.lanes,Nc(p,w,X)}return gp(p,w,P,U,X)}function um(p,w,P){var U=w.pendingProps,X=U.children,ue=(w.stateNode._pendingVisibility&2)!==0,Ze=p!==null?p.memoizedState:null;if(Tl(p,w),U.mode==="hidden"||ue){if((w.flags&128)!==0){if(U=Ze!==null?Ze.baseLanes|P:P,p!==null){for(X=w.child=p.child,ue=0;X!==null;)ue=ue|X.lanes|X.childLanes,X=X.sibling;w.childLanes=ue&~U}else w.childLanes=0,w.child=null;return cm(p,w,U,P)}if((P&536870912)!==0)w.memoizedState={baseLanes:0,cachePool:null},p!==null&&Pt(w,Ze!==null?Ze.cachePool:null),Ze!==null?zu(w,Ze):Zd(),lp(w);else return w.lanes=w.childLanes=536870912,cm(p,w,Ze!==null?Ze.baseLanes|P:P,P)}else Ze!==null?(Pt(w,Ze.cachePool),zu(w,Ze),qd(),w.memoizedState=null):(p!==null&&Pt(w,null),Zd(),qd());return Rl(p,w,X,P),w.child}function cm(p,w,P,U){var X=ea();return X=X===null?null:{parent:lo._currentValue,pool:X},w.memoizedState={baseLanes:P,cachePool:X},p!==null&&Pt(w,null),Zd(),lp(w),p!==null&&_p(p,w,U,!0),null}function Tl(p,w){var P=w.ref;if(P===null)p!==null&&p.ref!==null&&(w.flags|=2097664);else{if(typeof P!="function"&&typeof P!="object")throw Error(r(284));(p===null||p.ref!==P)&&(w.flags|=2097664)}}function gp(p,w,P,U,X){return Oc(w),P=Mi(p,w,P,U,void 0,X),U=Hn(),p!==null&&!hl?(xn(p,w,X),Nc(p,w,X)):(xi&&U&&Zh(w),w.flags|=1,Rl(p,w,P,X),w.child)}function AA(p,w,P,U,X,ue){return Oc(w),w.updateQueue=null,P=ui(w,U,P,X),Yn(p),U=Hn(),p!==null&&!hl?(xn(p,w,ue),Nc(p,w,ue)):(xi&&U&&Zh(w),w.flags|=1,Rl(p,w,P,ue),w.child)}function vA(p,w,P,U,X){if(Oc(w),w.stateNode===null){var ue=Kc,Ze=P.contextType;typeof Ze=="object"&&Ze!==null&&(ue=to(Ze)),ue=new P(U,ue),w.memoizedState=ue.state!==null&&ue.state!==void 0?ue.state:null,ue.updater=cu,w.stateNode=ue,ue._reactInternals=w,ue=w.stateNode,ue.props=U,ue.state=w.memoizedState,ue.refs={},Nh(w),Ze=P.contextType,ue.context=typeof Ze=="object"&&Ze!==null?to(Ze):Kc,ue.state=w.memoizedState,Ze=P.getDerivedStateFromProps,typeof Ze=="function"&&(Ls(w,P,Ze,U),ue.state=w.memoizedState),typeof P.getDerivedStateFromProps=="function"||typeof ue.getSnapshotBeforeUpdate=="function"||typeof ue.UNSAFE_componentWillMount!="function"&&typeof ue.componentWillMount!="function"||(Ze=ue.state,typeof ue.componentWillMount=="function"&&ue.componentWillMount(),typeof ue.UNSAFE_componentWillMount=="function"&&ue.UNSAFE_componentWillMount(),Ze!==ue.state&&cu.enqueueReplaceState(ue,ue.state,null),fm(w,U,ue,X),Oh(),ue.state=w.memoizedState),typeof ue.componentDidMount=="function"&&(w.flags|=4194308),U=!0}else if(p===null){ue=w.stateNode;var ft=w.memoizedProps,Ut=ku(P,ft);ue.props=Ut;var ua=ue.context,qa=P.contextType;Ze=Kc,typeof qa=="object"&&qa!==null&&(Ze=to(qa));var sr=P.getDerivedStateFromProps;qa=typeof sr=="function"||typeof ue.getSnapshotBeforeUpdate=="function",ft=w.pendingProps!==ft,qa||typeof ue.UNSAFE_componentWillReceiveProps!="function"&&typeof ue.componentWillReceiveProps!="function"||(ft||ua!==Ze)&&eo(w,ue,U,Ze),nc=!1;var Na=w.memoizedState;ue.state=Na,fm(w,U,ue,X),Oh(),ua=w.memoizedState,ft||Na!==ua||nc?(typeof sr=="function"&&(Ls(w,P,sr,U),ua=w.memoizedState),(Ut=nc||ac(w,P,Ut,U,Na,ua,Ze))?(qa||typeof ue.UNSAFE_componentWillMount!="function"&&typeof ue.componentWillMount!="function"||(typeof ue.componentWillMount=="function"&&ue.componentWillMount(),typeof ue.UNSAFE_componentWillMount=="function"&&ue.UNSAFE_componentWillMount()),typeof ue.componentDidMount=="function"&&(w.flags|=4194308)):(typeof ue.componentDidMount=="function"&&(w.flags|=4194308),w.memoizedProps=U,w.memoizedState=ua),ue.props=U,ue.state=ua,ue.context=Ze,U=Ut):(typeof ue.componentDidMount=="function"&&(w.flags|=4194308),U=!1)}else{ue=w.stateNode,TA(p,w),Ze=w.memoizedProps,qa=ku(P,Ze),ue.props=qa,sr=w.pendingProps,Na=ue.context,ua=P.contextType,Ut=Kc,typeof ua=="object"&&ua!==null&&(Ut=to(ua)),ft=P.getDerivedStateFromProps,(ua=typeof ft=="function"||typeof ue.getSnapshotBeforeUpdate=="function")||typeof ue.UNSAFE_componentWillReceiveProps!="function"&&typeof ue.componentWillReceiveProps!="function"||(Ze!==sr||Na!==Ut)&&eo(w,ue,U,Ut),nc=!1,Na=w.memoizedState,ue.state=Na,fm(w,U,ue,X),Oh();var Ha=w.memoizedState;Ze!==sr||Na!==Ha||nc||p!==null&&p.dependencies!==null&&Df(p.dependencies)?(typeof ft=="function"&&(Ls(w,P,ft,U),Ha=w.memoizedState),(qa=nc||ac(w,P,qa,U,Na,Ha,Ut)||p!==null&&p.dependencies!==null&&Df(p.dependencies))?(ua||typeof ue.UNSAFE_componentWillUpdate!="function"&&typeof ue.componentWillUpdate!="function"||(typeof ue.componentWillUpdate=="function"&&ue.componentWillUpdate(U,Ha,Ut),typeof ue.UNSAFE_componentWillUpdate=="function"&&ue.UNSAFE_componentWillUpdate(U,Ha,Ut)),typeof ue.componentDidUpdate=="function"&&(w.flags|=4),typeof ue.getSnapshotBeforeUpdate=="function"&&(w.flags|=1024)):(typeof ue.componentDidUpdate!="function"||Ze===p.memoizedProps&&Na===p.memoizedState||(w.flags|=4),typeof ue.getSnapshotBeforeUpdate!="function"||Ze===p.memoizedProps&&Na===p.memoizedState||(w.flags|=1024),w.memoizedProps=U,w.memoizedState=Ha),ue.props=U,ue.state=Ha,ue.context=Ut,U=qa):(typeof ue.componentDidUpdate!="function"||Ze===p.memoizedProps&&Na===p.memoizedState||(w.flags|=4),typeof ue.getSnapshotBeforeUpdate!="function"||Ze===p.memoizedProps&&Na===p.memoizedState||(w.flags|=1024),U=!1)}return ue=U,Tl(p,w),U=(w.flags&128)!==0,ue||U?(ue=w.stateNode,P=U&&typeof P.getDerivedStateFromError!="function"?null:ue.render(),w.flags|=1,p!==null&&U?(w.child=Yc(w,p.child,null,X),w.child=Yc(w,null,P,X)):Rl(p,w,P,X),w.memoizedState=ue.state,p=w.child):p=Nc(p,w,X),p}function t0(p,w,P,U){return $h(),w.flags|=256,Rl(p,w,P,U),w.child}var _A={dehydrated:null,treeContext:null,retryLane:0};function ji(p){return{baseLanes:p,cachePool:_a()}}function Yg(p,w,P){return p=p!==null?p.childLanes&~P:0,w&&(p|=ao),p}function Xg(p,w,P){var U=w.pendingProps,X=!1,ue=(w.flags&128)!==0,Ze;if((Ze=ue)||(Ze=p!==null&&p.memoizedState===null?!1:(Gs.current&2)!==0),Ze&&(X=!0,w.flags&=-129),Ze=(w.flags&32)!==0,w.flags&=-33,p===null){if(xi){if(X?Jc(w):qd(),xi){var ft=ts,Ut;if(Ut=ft){e:{for(Ut=ft,ft=Ou;Ut.nodeType!==8;){if(!ft){ft=null;break e}if(Ut=ju(Ut.nextSibling),Ut===null){ft=null;break e}}ft=Ut}ft!==null?(w.memoizedState={dehydrated:ft,treeContext:Wc!==null?{id:Nu,overflow:Ju}:null,retryLane:536870912},Ut=ra(18,null,null,0),Ut.stateNode=ft,Ut.return=w,w.child=Ut,ol=w,ts=null,Ut=!0):Ut=!1}Ut||bc(w)}if(ft=w.memoizedState,ft!==null&&(ft=ft.dehydrated,ft!==null))return ft.data==="$!"?w.lanes=16:w.lanes=536870912,null;Qc(w)}return ft=U.children,U=U.fallback,X?(qd(),X=w.mode,ft=yp({mode:"hidden",children:ft},X),U=zt(U,X,P,null),ft.return=w,U.return=w,ft.sibling=U,w.child=ft,X=w.child,X.memoizedState=ji(P),X.childLanes=Yg(p,Ze,P),w.memoizedState=_A,U):(Jc(w),wA(w,ft))}if(Ut=p.memoizedState,Ut!==null&&(ft=Ut.dehydrated,ft!==null)){if(ue)w.flags&256?(Jc(w),w.flags&=-257,w=og(p,w,P)):w.memoizedState!==null?(qd(),w.child=p.child,w.flags|=128,w=null):(qd(),X=U.fallback,ft=w.mode,U=yp({mode:"visible",children:U.children},ft),X=zt(X,ft,P,null),X.flags|=2,U.return=w,X.return=w,U.sibling=X,w.child=U,Yc(w,p.child,null,P),U=w.child,U.memoizedState=ji(P),U.childLanes=Yg(p,Ze,P),w.memoizedState=_A,w=X);else if(Jc(w),ft.data==="$!"){if(Ze=ft.nextSibling&&ft.nextSibling.dataset,Ze)var ua=Ze.dgst;Ze=ua,U=Error(r(419)),U.stack="",U.digest=Ze,Bd({value:U,source:null,stack:null}),w=og(p,w,P)}else if(hl||_p(p,w,P,!1),Ze=(P&p.childLanes)!==0,hl||Ze){if(Ze=Gr,Ze!==null){if(U=P&-P,(U&42)!==0)U=1;else switch(U){case 2:U=1;break;case 8:U=4;break;case 32:U=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:U=64;break;case 268435456:U=134217728;break;default:U=0}if(U=(U&(Ze.suspendedLanes|P))!==0?0:U,U!==0&&U!==Ut.retryLane)throw Ut.retryLane=U,il(p,U),Zl(Ze,p,U),lm}ft.data==="$?"||n0(),w=og(p,w,P)}else ft.data==="$?"?(w.flags|=128,w.child=p.child,w=oE.bind(null,p),ft._reactRetry=w,w=null):(p=Ut.treeContext,ts=ju(ft.nextSibling),ol=w,xi=!0,lu=null,Ou=!1,p!==null&&(sl[_l++]=Nu,sl[_l++]=Ju,sl[_l++]=Wc,Nu=p.id,Ju=p.overflow,Wc=w),w=wA(w,U.children),w.flags|=4096);return w}return X?(qd(),X=U.fallback,ft=w.mode,Ut=p.child,ua=Ut.sibling,U=xa(Ut,{mode:"hidden",children:U.children}),U.subtreeFlags=Ut.subtreeFlags&31457280,ua!==null?X=xa(ua,X):(X=zt(X,ft,P,null),X.flags|=2),X.return=w,U.return=w,U.sibling=X,w.child=U,U=X,X=w.child,ft=p.child.memoizedState,ft===null?ft=ji(P):(Ut=ft.cachePool,Ut!==null?(ua=lo._currentValue,Ut=Ut.parent!==ua?{parent:ua,pool:ua}:Ut):Ut=_a(),ft={baseLanes:ft.baseLanes|P,cachePool:Ut}),X.memoizedState=ft,X.childLanes=Yg(p,Ze,P),w.memoizedState=_A,U):(Jc(w),P=p.child,p=P.sibling,P=xa(P,{mode:"visible",children:U.children}),P.return=w,P.sibling=null,p!==null&&(Ze=w.deletions,Ze===null?(w.deletions=[p],w.flags|=16):Ze.push(p)),w.child=P,w.memoizedState=null,P)}function wA(p,w){return w=yp({mode:"visible",children:w},p.mode),w.return=p,p.child=w}function yp(p,w){return oa(p,w,0,null)}function og(p,w,P){return Yc(w,p.child,null,P),p=wA(w,w.pendingProps.children),p.flags|=2,w.memoizedState=null,p}function dm(p,w,P){p.lanes|=w;var U=p.alternate;U!==null&&(U.lanes|=w),RA(p.return,w,P)}function hm(p,w,P,U,X){var ue=p.memoizedState;ue===null?p.memoizedState={isBackwards:w,rendering:null,renderingStartTime:0,last:U,tail:P,tailMode:X}:(ue.isBackwards=w,ue.rendering=null,ue.renderingStartTime=0,ue.last=U,ue.tail=P,ue.tailMode=X)}function Yd(p,w,P){var U=w.pendingProps,X=U.revealOrder,ue=U.tail;if(Rl(p,w,U.children,P),U=Gs.current,(U&2)!==0)U=U&1|2,w.flags|=128;else{if(p!==null&&(p.flags&128)!==0)e:for(p=w.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&dm(p,P,w);else if(p.tag===19)dm(p,P,w);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===w)break e;for(;p.sibling===null;){if(p.return===null||p.return===w)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}U&=1}switch(ve(Gs,U),X){case"forwards":for(P=w.child,X=null;P!==null;)p=P.alternate,p!==null&&nm(p)===null&&(X=P),P=P.sibling;P=X,P===null?(X=w.child,w.child=null):(X=P.sibling,P.sibling=null),hm(w,!1,X,P,ue);break;case"backwards":for(P=null,X=w.child,w.child=null;X!==null;){if(p=X.alternate,p!==null&&nm(p)===null){w.child=X;break}p=X.sibling,X.sibling=P,P=X,X=p}hm(w,!0,P,null,ue);break;case"together":hm(w,!1,null,null,void 0);break;default:w.memoizedState=null}return w.child}function Nc(p,w,P){if(p!==null&&(w.dependencies=p.dependencies),ns|=w.lanes,(P&w.childLanes)===0)if(p!==null){if(_p(p,w,P,!1),(P&w.childLanes)===0)return null}else return null;if(p!==null&&w.child!==p.child)throw Error(r(153));if(w.child!==null){for(p=w.child,P=xa(p,p.pendingProps),w.child=P,P.return=w;p.sibling!==null;)p=p.sibling,P=P.sibling=xa(p,p.pendingProps),P.return=w;P.sibling=null}return w.child}function Ss(p,w){return(p.lanes&w)!==0?!0:(p=p.dependencies,!!(p!==null&&Df(p)))}function sd(p,w,P){switch(w.tag){case 3:$t(w,w.stateNode.containerInfo),od(w,lo,p.memoizedState.cache),$h();break;case 27:case 5:hr(w);break;case 4:$t(w,w.stateNode.containerInfo);break;case 10:od(w,w.type,w.memoizedProps.value);break;case 13:var U=w.memoizedState;if(U!==null)return U.dehydrated!==null?(Jc(w),w.flags|=128,null):(P&w.child.childLanes)!==0?Xg(p,w,P):(Jc(w),p=Nc(p,w,P),p!==null?p.sibling:null);Jc(w);break;case 19:var X=(p.flags&128)!==0;if(U=(P&w.childLanes)!==0,U||(_p(p,w,P,!1),U=(P&w.childLanes)!==0),X){if(U)return Yd(p,w,P);w.flags|=128}if(X=w.memoizedState,X!==null&&(X.rendering=null,X.tail=null,X.lastEffect=null),ve(Gs,Gs.current),U)break;return null;case 22:case 23:return w.lanes=0,um(p,w,P);case 24:od(w,lo,p.memoizedState.cache)}return Nc(p,w,P)}function Ap(p,w,P){if(p!==null)if(p.memoizedProps!==w.pendingProps)hl=!0;else{if(!Ss(p,P)&&(w.flags&128)===0)return hl=!1,sd(p,w,P);hl=(p.flags&131072)!==0}else hl=!1,xi&&(w.flags&1048576)!==0&&tm(w,Gh,w.index);switch(w.lanes=0,w.tag){case 16:e:{p=w.pendingProps;var U=w.elementType,X=U._init;if(U=X(U._payload),w.type=U,typeof U=="function")ca(U)?(p=ku(U,p),w.tag=1,w=vA(null,w,U,p,P)):(w.tag=0,w=gp(null,w,U,p,P));else{if(U!=null){if(X=U.$$typeof,X===j){w.tag=11,w=mA(null,w,U,p,P);break e}else if(X===W){w.tag=14,w=gA(null,w,U,p,P);break e}}throw w=Re(U)||U,Error(r(306,w,""))}}return w;case 0:return gp(p,w,w.type,w.pendingProps,P);case 1:return U=w.type,X=ku(U,w.pendingProps),vA(p,w,U,X,P);case 3:e:{if($t(w,w.stateNode.containerInfo),p===null)throw Error(r(387));var ue=w.pendingProps;X=w.memoizedState,U=X.element,TA(p,w),fm(w,ue,null,P);var Ze=w.memoizedState;if(ue=Ze.cache,od(w,lo,ue),ue!==X.cache&&lg(w,[lo],P,!0),Oh(),ue=Ze.element,X.isDehydrated)if(X={element:ue,isDehydrated:!1,cache:Ze.cache},w.updateQueue.baseState=X,w.memoizedState=X,w.flags&256){w=t0(p,w,ue,P);break e}else if(ue!==U){U=ls(Error(r(424)),w),Bd(U),w=t0(p,w,ue,P);break e}else for(ts=ju(w.stateNode.containerInfo.firstChild),ol=w,xi=!0,lu=null,Ou=!0,P=Ef(w,null,ue,P),w.child=P;P;)P.flags=P.flags&-3|4096,P=P.sibling;else{if($h(),ue===U){w=Nc(p,w,P);break e}Rl(p,w,ue,P)}w=w.child}return w;case 26:return Tl(p,w),p===null?(P=K1(w.type,null,w.pendingProps,null))?w.memoizedState=P:xi||(P=w.type,p=w.pendingProps,U=uy(wa.current).createElement(P),U[Yt]=w,U[Kt]=p,zo(U,P,p),Xr(U),w.stateNode=U):w.memoizedState=K1(w.type,p.memoizedProps,w.pendingProps,p.memoizedState),null;case 27:return hr(w),p===null&&xi&&(U=w.stateNode=MA(w.type,w.pendingProps,wa.current),ol=w,Ou=!0,ts=ju(U.firstChild)),U=w.pendingProps.children,p!==null||xi?Rl(p,w,U,P):w.child=Yc(w,null,U,P),Tl(p,w),w.child;case 5:return p===null&&xi&&((X=U=ts)&&(U=pE(U,w.type,w.pendingProps,Ou),U!==null?(w.stateNode=U,ol=w,ts=ju(U.firstChild),Ou=!1,X=!0):X=!1),X||bc(w)),hr(w),X=w.type,ue=w.pendingProps,Ze=p!==null?p.memoizedProps:null,U=ue.children,p0(X,ue)?U=null:Ze!==null&&p0(X,Ze)&&(w.flags|=32),w.memoizedState!==null&&(X=Mi(p,w,as,null,null,P),fy._currentValue=X),Tl(p,w),Rl(p,w,U,P),w.child;case 6:return p===null&&xi&&((p=P=ts)&&(P=mE(P,w.pendingProps,Ou),P!==null?(w.stateNode=P,ol=w,ts=null,p=!0):p=!1),p||bc(w)),null;case 13:return Xg(p,w,P);case 4:return $t(w,w.stateNode.containerInfo),U=w.pendingProps,p===null?w.child=Yc(w,null,U,P):Rl(p,w,U,P),w.child;case 11:return mA(p,w,w.type,w.pendingProps,P);case 7:return Rl(p,w,w.pendingProps,P),w.child;case 8:return Rl(p,w,w.pendingProps.children,P),w.child;case 12:return Rl(p,w,w.pendingProps.children,P),w.child;case 10:return U=w.pendingProps,od(w,w.type,U.value),Rl(p,w,U.children,P),w.child;case 9:return X=w.type._context,U=w.pendingProps.children,Oc(w),X=to(X),U=U(X),w.flags|=1,Rl(p,w,U,P),w.child;case 14:return gA(p,w,w.type,w.pendingProps,P);case 15:return yA(p,w,w.type,w.pendingProps,P);case 19:return Yd(p,w,P);case 22:return um(p,w,P);case 24:return Oc(w),U=to(lo),p===null?(X=ea(),X===null&&(X=Gr,ue=Yh(),X.pooledCache=ue,ue.refCount++,ue!==null&&(X.pooledCacheLanes|=P),X=ue),w.memoizedState={parent:U,cache:X},Nh(w),od(w,lo,X)):((p.lanes&P)!==0&&(TA(p,w),fm(w,null,null,P),Oh()),X=p.memoizedState,ue=w.memoizedState,X.parent!==U?(X={parent:U,cache:U},w.memoizedState=X,w.lanes===0&&(w.memoizedState=w.updateQueue.baseState=X),od(w,lo,U)):(U=ue.cache,od(w,lo,U),U!==X.cache&&lg(w,[lo],P,!0))),Rl(p,w,w.pendingProps.children,P),w.child;case 29:throw w.pendingProps}throw Error(r(156,w.tag))}var vp=lt(null),zf=null,Eh=null;function od(p,w,P){ve(vp,w._currentValue),w._currentValue=P}function Xd(p){p._currentValue=vp.current,ot(vp)}function RA(p,w,P){for(;p!==null;){var U=p.alternate;if((p.childLanes&w)!==w?(p.childLanes|=w,U!==null&&(U.childLanes|=w)):U!==null&&(U.childLanes&w)!==w&&(U.childLanes|=w),p===P)break;p=p.return}}function lg(p,w,P,U){var X=p.child;for(X!==null&&(X.return=p);X!==null;){var ue=X.dependencies;if(ue!==null){var Ze=X.child;ue=ue.firstContext;e:for(;ue!==null;){var ft=ue;ue=X;for(var Ut=0;Ut<w.length;Ut++)if(ft.context===w[Ut]){ue.lanes|=P,ft=ue.alternate,ft!==null&&(ft.lanes|=P),RA(ue.return,P,p),U||(Ze=null);break e}ue=ft.next}}else if(X.tag===18){if(Ze=X.return,Ze===null)throw Error(r(341));Ze.lanes|=P,ue=Ze.alternate,ue!==null&&(ue.lanes|=P),RA(Ze,P,p),Ze=null}else Ze=X.child;if(Ze!==null)Ze.return=X;else for(Ze=X;Ze!==null;){if(Ze===p){Ze=null;break}if(X=Ze.sibling,X!==null){X.return=Ze.return,Ze=X;break}Ze=Ze.return}X=Ze}}function _p(p,w,P,U){p=null;for(var X=w,ue=!1;X!==null;){if(!ue){if((X.flags&524288)!==0)ue=!0;else if((X.flags&262144)!==0)break}if(X.tag===10){var Ze=X.alternate;if(Ze===null)throw Error(r(387));if(Ze=Ze.memoizedProps,Ze!==null){var ft=X.type;js(X.pendingProps.value,Ze.value)||(p!==null?p.push(ft):p=[ft])}}else if(X===It.current){if(Ze=X.alternate,Ze===null)throw Error(r(387));Ze.memoizedState.memoizedState!==X.memoizedState.memoizedState&&(p!==null?p.push(fy):p=[fy])}X=X.return}p!==null&&lg(w,p,P,U),w.flags|=262144}function Df(p){for(p=p.firstContext;p!==null;){if(!js(p.context._currentValue,p.memoizedValue))return!0;p=p.next}return!1}function Oc(p){zf=p,Eh=null,p=p.dependencies,p!==null&&(p.firstContext=null)}function to(p){return ef(zf,p)}function rc(p,w){return zf===null&&Oc(p),ef(p,w)}function ef(p,w){var P=w._currentValue;if(w={context:w,memoizedValue:P,next:null},Eh===null){if(p===null)throw Error(r(308));Eh=w,p.dependencies={lanes:0,firstContext:w},p.flags|=524288}else Eh=Eh.next=w;return P}var nc=!1;function Nh(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function TA(p,w){p=p.updateQueue,w.updateQueue===p&&(w.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,callbacks:null})}function Mf(p){return{lane:p,tag:0,payload:null,callback:null,next:null}}function If(p,w,P){var U=p.updateQueue;if(U===null)return null;if(U=U.shared,(zr&2)!==0){var X=U.pending;return X===null?w.next=w:(w.next=X.next,X.next=w),U.pending=w,w=ln(p),ou(p,null,P),w}return su(p,U,w,P),ln(p)}function Lf(p,w,P){if(w=w.updateQueue,w!==null&&(w=w.shared,(P&4194176)!==0)){var U=w.lanes;U&=p.pendingLanes,P|=U,w.lanes=P,At(p,P)}}function Jg(p,w){var P=p.updateQueue,U=p.alternate;if(U!==null&&(U=U.updateQueue,P===U)){var X=null,ue=null;if(P=P.firstBaseUpdate,P!==null){do{var Ze={lane:P.lane,tag:P.tag,payload:P.payload,callback:null,next:null};ue===null?X=ue=Ze:ue=ue.next=Ze,P=P.next}while(P!==null);ue===null?X=ue=w:ue=ue.next=w}else X=ue=w;P={baseState:U.baseState,firstBaseUpdate:X,lastBaseUpdate:ue,shared:U.shared,callbacks:U.callbacks},p.updateQueue=P;return}p=P.lastBaseUpdate,p===null?P.firstBaseUpdate=w:p.next=w,P.lastBaseUpdate=w}var Cl=!1;function Oh(){if(Cl){var p=We;if(p!==null)throw p}}function fm(p,w,P,U){Cl=!1;var X=p.updateQueue;nc=!1;var ue=X.firstBaseUpdate,Ze=X.lastBaseUpdate,ft=X.shared.pending;if(ft!==null){X.shared.pending=null;var Ut=ft,ua=Ut.next;Ut.next=null,Ze===null?ue=ua:Ze.next=ua,Ze=Ut;var qa=p.alternate;qa!==null&&(qa=qa.updateQueue,ft=qa.lastBaseUpdate,ft!==Ze&&(ft===null?qa.firstBaseUpdate=ua:ft.next=ua,qa.lastBaseUpdate=Ut))}if(ue!==null){var sr=X.baseState;Ze=0,qa=ua=Ut=null,ft=ue;do{var Na=ft.lane&-536870913,Ha=Na!==ft.lane;if(Ha?(mr&Na)===Na:(U&Na)===Na){Na!==0&&Na===Me&&(Cl=!0),qa!==null&&(qa=qa.next={lane:0,tag:ft.tag,payload:ft.payload,callback:null,next:null});e:{var an=p,ni=ft;Na=w;var Qo=P;switch(ni.tag){case 1:if(an=ni.payload,typeof an=="function"){sr=an.call(Qo,sr,Na);break e}sr=an;break e;case 3:an.flags=an.flags&-65537|128;case 0:if(an=ni.payload,Na=typeof an=="function"?an.call(Qo,sr,Na):an,Na==null)break e;sr=Ve({},sr,Na);break e;case 2:nc=!0}}Na=ft.callback,Na!==null&&(p.flags|=64,Ha&&(p.flags|=8192),Ha=X.callbacks,Ha===null?X.callbacks=[Na]:Ha.push(Na))}else Ha={lane:Na,tag:ft.tag,payload:ft.payload,callback:ft.callback,next:null},qa===null?(ua=qa=Ha,Ut=sr):qa=qa.next=Ha,Ze|=Na;if(ft=ft.next,ft===null){if(ft=X.shared.pending,ft===null)break;Ha=ft,ft=Ha.next,Ha.next=null,X.lastBaseUpdate=Ha,X.shared.pending=null}}while(!0);qa===null&&(Ut=sr),X.baseState=Ut,X.firstBaseUpdate=ua,X.lastBaseUpdate=qa,ue===null&&(X.shared.lanes=0),ns|=Ze,p.lanes=Ze,p.memoizedState=sr}}function CA(p,w){if(typeof p!="function")throw Error(r(191,p));p.call(w)}function wp(p,w){var P=p.callbacks;if(P!==null)for(p.callbacks=null,p=0;p<P.length;p++)CA(P[p],w)}function Ff(p,w){try{var P=w.updateQueue,U=P!==null?P.lastEffect:null;if(U!==null){var X=U.next;P=X;do{if((P.tag&p)===p){U=void 0;var ue=P.create,Ze=P.inst;U=ue(),Ze.destroy=U}P=P.next}while(P!==X)}}catch(ft){Zs(w,w.return,ft)}}function Wo(p,w,P){try{var U=w.updateQueue,X=U!==null?U.lastEffect:null;if(X!==null){var ue=X.next;U=ue;do{if((U.tag&p)===p){var Ze=U.inst,ft=Ze.destroy;if(ft!==void 0){Ze.destroy=void 0,X=w;var Ut=P;try{ft()}catch(ua){Zs(X,Ut,ua)}}}U=U.next}while(U!==ue)}}catch(ua){Zs(w,w.return,ua)}}function ic(p){var w=p.updateQueue;if(w!==null){var P=p.stateNode;try{wp(w,P)}catch(U){Zs(p,p.return,U)}}}function Rp(p,w,P){P.props=ku(p.type,p.memoizedProps),P.state=p.memoizedState;try{P.componentWillUnmount()}catch(U){Zs(p,w,U)}}function Vc(p,w){try{var P=p.ref;if(P!==null){var U=p.stateNode;switch(p.tag){case 26:case 27:case 5:var X=U;break;default:X=U}typeof P=="function"?p.refCleanup=P(X):P.current=X}}catch(ue){Zs(p,w,ue)}}function fl(p,w){var P=p.ref,U=p.refCleanup;if(P!==null)if(typeof U=="function")try{U()}catch(X){Zs(p,w,X)}finally{p.refCleanup=null,p=p.alternate,p!=null&&(p.refCleanup=null)}else if(typeof P=="function")try{P(null)}catch(X){Zs(p,w,X)}else P.current=null}function Qg(p){var w=p.type,P=p.memoizedProps,U=p.stateNode;try{e:switch(w){case"button":case"input":case"select":case"textarea":P.autoFocus&&U.focus();break e;case"img":P.src?U.src=P.src:P.srcSet&&(U.srcset=P.srcSet)}}catch(X){Zs(p,p.return,X)}}function Gn(p,w,P){try{var U=p.stateNode;dE(U,p.type,P,w),U[Kt]=w}catch(X){Zs(p,p.return,X)}}function tf(p){return p.tag===5||p.tag===3||p.tag===26||p.tag===27||p.tag===4}function SA(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||tf(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==27&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function bA(p,w,P){var U=p.tag;if(U===5||U===6)p=p.stateNode,w?P.nodeType===8?P.parentNode.insertBefore(p,w):P.insertBefore(p,w):(P.nodeType===8?(w=P.parentNode,w.insertBefore(p,P)):(w=P,w.appendChild(p)),P=P._reactRootContainer,P!=null||w.onclick!==null||(w.onclick=ly));else if(U!==4&&U!==27&&(p=p.child,p!==null))for(bA(p,w,P),p=p.sibling;p!==null;)bA(p,w,P),p=p.sibling}function Tp(p,w,P){var U=p.tag;if(U===5||U===6)p=p.stateNode,w?P.insertBefore(p,w):P.appendChild(p);else if(U!==4&&U!==27&&(p=p.child,p!==null))for(Tp(p,w,P),p=p.sibling;p!==null;)Tp(p,w,P),p=p.sibling}var Sl=!1,Ii=!1,Yo=!1,Uu=typeof WeakSet=="function"?WeakSet:Set,Ni=null,ey=!1;function Bu(p,w){if(p=p.containerInfo,Qd=Rm,p=Ml(p),No(p)){if("selectionStart"in p)var P={start:p.selectionStart,end:p.selectionEnd};else e:{P=(P=p.ownerDocument)&&P.defaultView||window;var U=P.getSelection&&P.getSelection();if(U&&U.rangeCount!==0){P=U.anchorNode;var X=U.anchorOffset,ue=U.focusNode;U=U.focusOffset;try{P.nodeType,ue.nodeType}catch{P=null;break e}var Ze=0,ft=-1,Ut=-1,ua=0,qa=0,sr=p,Na=null;t:for(;;){for(var Ha;sr!==P||X!==0&&sr.nodeType!==3||(ft=Ze+X),sr!==ue||U!==0&&sr.nodeType!==3||(Ut=Ze+U),sr.nodeType===3&&(Ze+=sr.nodeValue.length),(Ha=sr.firstChild)!==null;)Na=sr,sr=Ha;for(;;){if(sr===p)break t;if(Na===P&&++ua===X&&(ft=Ze),Na===ue&&++qa===U&&(Ut=Ze),(Ha=sr.nextSibling)!==null)break;sr=Na,Na=sr.parentNode}sr=Ha}P=ft===-1||Ut===-1?null:{start:ft,end:Ut}}else P=null}P=P||{start:0,end:0}}else P=null;for(DA={focusedElem:p,selectionRange:P},Rm=!1,Ni=w;Ni!==null;)if(w=Ni,p=w.child,(w.subtreeFlags&1028)!==0&&p!==null)p.return=w,Ni=p;else for(;Ni!==null;){switch(w=Ni,ue=w.alternate,p=w.flags,w.tag){case 0:break;case 11:case 15:break;case 1:if((p&1024)!==0&&ue!==null){p=void 0,P=w,X=ue.memoizedProps,ue=ue.memoizedState,U=P.stateNode;try{var an=ku(P.type,X,P.elementType===P.type);p=U.getSnapshotBeforeUpdate(an,ue),U.__reactInternalSnapshotBeforeUpdate=p}catch(ni){Zs(P,P.return,ni)}}break;case 3:if((p&1024)!==0){if(p=w.stateNode.containerInfo,P=p.nodeType,P===9)Z1(p);else if(P===1)switch(p.nodeName){case"HEAD":case"HTML":case"BODY":Z1(p);break;default:p.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((p&1024)!==0)throw Error(r(163))}if(p=w.sibling,p!==null){p.return=w.return,Ni=p;break}Ni=w.return}return an=ey,ey=!1,an}function xA(p,w,P){var U=P.flags;switch(P.tag){case 0:case 11:case 15:ae(p,P),U&4&&Ff(5,P);break;case 1:if(ae(p,P),U&4)if(p=P.stateNode,w===null)try{p.componentDidMount()}catch(ft){Zs(P,P.return,ft)}else{var X=ku(P.type,w.memoizedProps);w=w.memoizedState;try{p.componentDidUpdate(X,w,p.__reactInternalSnapshotBeforeUpdate)}catch(ft){Zs(P,P.return,ft)}}U&64&&ic(P),U&512&&Vc(P,P.return);break;case 3:if(ae(p,P),U&64&&(U=P.updateQueue,U!==null)){if(p=null,P.child!==null)switch(P.child.tag){case 27:case 5:p=P.child.stateNode;break;case 1:p=P.child.stateNode}try{wp(U,p)}catch(ft){Zs(P,P.return,ft)}}break;case 26:ae(p,P),U&512&&Vc(P,P.return);break;case 27:case 5:ae(p,P),w===null&&U&4&&Qg(P),U&512&&Vc(P,P.return);break;case 12:ae(p,P);break;case 13:ae(p,P),U&4&&A(p,P);break;case 22:if(X=P.memoizedState!==null||Sl,!X){w=w!==null&&w.memoizedState!==null||Ii;var ue=Sl,Ze=Ii;Sl=X,(Ii=w)&&!Ze?pe(p,P,(P.subtreeFlags&8772)!==0):ae(p,P),Sl=ue,Ii=Ze}U&512&&(P.memoizedProps.mode==="manual"?Vc(P,P.return):fl(P,P.return));break;default:ae(p,P)}}function af(p){var w=p.alternate;w!==null&&(p.alternate=null,af(w)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(w=p.stateNode,w!==null&&Hr(w)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}var Xo=null,y=!1;function o(p,w,P){for(P=P.child;P!==null;)d(p,w,P),P=P.sibling}function d(p,w,P){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(yr,P)}catch{}switch(P.tag){case 26:Ii||fl(P,w),o(p,w,P),P.memoizedState?P.memoizedState.count--:P.stateNode&&(P=P.stateNode,P.parentNode.removeChild(P));break;case 27:Ii||fl(P,w);var U=Xo,X=y;for(Xo=P.stateNode,o(p,w,P),P=P.stateNode,w=P.attributes;w.length;)P.removeAttributeNode(w[0]);Hr(P),Xo=U,y=X;break;case 5:Ii||fl(P,w);case 6:X=Xo;var ue=y;if(Xo=null,o(p,w,P),Xo=X,y=ue,Xo!==null)if(y)try{p=Xo,U=P.stateNode,p.nodeType===8?p.parentNode.removeChild(U):p.removeChild(U)}catch(Ze){Zs(P,w,Ze)}else try{Xo.removeChild(P.stateNode)}catch(Ze){Zs(P,w,Ze)}break;case 18:Xo!==null&&(y?(w=Xo,P=P.stateNode,w.nodeType===8?G1(w.parentNode,P):w.nodeType===1&&G1(w,P),GA(w)):G1(Xo,P.stateNode));break;case 4:U=Xo,X=y,Xo=P.stateNode.containerInfo,y=!0,o(p,w,P),Xo=U,y=X;break;case 0:case 11:case 14:case 15:Ii||Wo(2,P,w),Ii||Wo(4,P,w),o(p,w,P);break;case 1:Ii||(fl(P,w),U=P.stateNode,typeof U.componentWillUnmount=="function"&&Rp(P,w,U)),o(p,w,P);break;case 21:o(p,w,P);break;case 22:Ii||fl(P,w),Ii=(U=Ii)||P.memoizedState!==null,o(p,w,P),Ii=U;break;default:o(p,w,P)}}function A(p,w){if(w.memoizedState===null&&(p=w.alternate,p!==null&&(p=p.memoizedState,p!==null&&(p=p.dehydrated,p!==null))))try{GA(p)}catch(P){Zs(w,w.return,P)}}function T(p){switch(p.tag){case 13:case 19:var w=p.stateNode;return w===null&&(w=p.stateNode=new Uu),w;case 22:return p=p.stateNode,w=p._retryCache,w===null&&(w=p._retryCache=new Uu),w;default:throw Error(r(435,p.tag))}}function S(p,w){var P=T(p);w.forEach(function(U){var X=lE.bind(null,p,U);P.has(U)||(P.add(U),U.then(X,X))})}function E(p,w){var P=w.deletions;if(P!==null)for(var U=0;U<P.length;U++){var X=P[U],ue=p,Ze=w,ft=Ze;e:for(;ft!==null;){switch(ft.tag){case 27:case 5:Xo=ft.stateNode,y=!1;break e;case 3:Xo=ft.stateNode.containerInfo,y=!0;break e;case 4:Xo=ft.stateNode.containerInfo,y=!0;break e}ft=ft.return}if(Xo===null)throw Error(r(160));d(ue,Ze,X),Xo=null,y=!1,ue=X.alternate,ue!==null&&(ue.return=null),X.return=null}if(w.subtreeFlags&13878)for(w=w.child;w!==null;)Z(w,p),w=w.sibling}var k=null;function Z(p,w){var P=p.alternate,U=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:E(w,p),K(p),U&4&&(Wo(3,p,p.return),Ff(3,p),Wo(5,p,p.return));break;case 1:E(w,p),K(p),U&512&&(Ii||P===null||fl(P,P.return)),U&64&&Sl&&(p=p.updateQueue,p!==null&&(U=p.callbacks,U!==null&&(P=p.shared.hiddenCallbacks,p.shared.hiddenCallbacks=P===null?U:P.concat(U))));break;case 26:var X=k;if(E(w,p),K(p),U&512&&(Ii||P===null||fl(P,P.return)),U&4){var ue=P!==null?P.memoizedState:null;if(U=p.memoizedState,P===null)if(U===null)if(p.stateNode===null){e:{U=p.type,P=p.memoizedProps,X=X.ownerDocument||X;t:switch(U){case"title":ue=X.getElementsByTagName("title")[0],(!ue||ue[Mr]||ue[Yt]||ue.namespaceURI==="http://www.w3.org/2000/svg"||ue.hasAttribute("itemprop"))&&(ue=X.createElement(U),X.head.insertBefore(ue,X.querySelector("head > title"))),zo(ue,U,P),ue[Yt]=p,Xr(ue),U=ue;break e;case"link":var Ze=W1("link","href",X).get(U+(P.href||""));if(Ze){for(var ft=0;ft<Ze.length;ft++)if(ue=Ze[ft],ue.getAttribute("href")===(P.href==null?null:P.href)&&ue.getAttribute("rel")===(P.rel==null?null:P.rel)&&ue.getAttribute("title")===(P.title==null?null:P.title)&&ue.getAttribute("crossorigin")===(P.crossOrigin==null?null:P.crossOrigin)){Ze.splice(ft,1);break t}}ue=X.createElement(U),zo(ue,U,P),X.head.appendChild(ue);break;case"meta":if(Ze=W1("meta","content",X).get(U+(P.content||""))){for(ft=0;ft<Ze.length;ft++)if(ue=Ze[ft],ue.getAttribute("content")===(P.content==null?null:""+P.content)&&ue.getAttribute("name")===(P.name==null?null:P.name)&&ue.getAttribute("property")===(P.property==null?null:P.property)&&ue.getAttribute("http-equiv")===(P.httpEquiv==null?null:P.httpEquiv)&&ue.getAttribute("charset")===(P.charSet==null?null:P.charSet)){Ze.splice(ft,1);break t}}ue=X.createElement(U),zo(ue,U,P),X.head.appendChild(ue);break;default:throw Error(r(468,U))}ue[Yt]=p,Xr(ue),U=ue}p.stateNode=U}else Y1(X,p.type,p.stateNode);else p.stateNode=bp(X,U,p.memoizedProps);else ue!==U?(ue===null?P.stateNode!==null&&(P=P.stateNode,P.parentNode.removeChild(P)):ue.count--,U===null?Y1(X,p.type,p.stateNode):bp(X,U,p.memoizedProps)):U===null&&p.stateNode!==null&&Gn(p,p.memoizedProps,P.memoizedProps)}break;case 27:if(U&4&&p.alternate===null){X=p.stateNode,ue=p.memoizedProps;try{for(var Ut=X.firstChild;Ut;){var ua=Ut.nextSibling,qa=Ut.nodeName;Ut[Mr]||qa==="HEAD"||qa==="BODY"||qa==="SCRIPT"||qa==="STYLE"||qa==="LINK"&&Ut.rel.toLowerCase()==="stylesheet"||X.removeChild(Ut),Ut=ua}for(var sr=p.type,Na=X.attributes;Na.length;)X.removeAttributeNode(Na[0]);zo(X,sr,ue),X[Yt]=p,X[Kt]=ue}catch(an){Zs(p,p.return,an)}}case 5:if(E(w,p),K(p),U&512&&(Ii||P===null||fl(P,P.return)),p.flags&32){X=p.stateNode;try{Ku(X,"")}catch(an){Zs(p,p.return,an)}}U&4&&p.stateNode!=null&&(X=p.memoizedProps,Gn(p,X,P!==null?P.memoizedProps:X)),U&1024&&(Yo=!0);break;case 6:if(E(w,p),K(p),U&4){if(p.stateNode===null)throw Error(r(162));U=p.memoizedProps,P=p.stateNode;try{P.nodeValue=U}catch(an){Zs(p,p.return,an)}}break;case 3:if(wm=null,X=k,k=fg(w.containerInfo),E(w,p),k=X,K(p),U&4&&P!==null&&P.memoizedState.isDehydrated)try{GA(w.containerInfo)}catch(an){Zs(p,p.return,an)}Yo&&(Yo=!1,Y(p));break;case 4:U=k,k=fg(p.stateNode.containerInfo),E(w,p),K(p),k=U;break;case 12:E(w,p),K(p);break;case 13:E(w,p),K(p),p.child.flags&8192&&p.memoizedState!==null!=(P!==null&&P.memoizedState!==null)&&(fi=ka()),U&4&&(U=p.updateQueue,U!==null&&(p.updateQueue=null,S(p,U)));break;case 22:if(U&512&&(Ii||P===null||fl(P,P.return)),Ut=p.memoizedState!==null,ua=P!==null&&P.memoizedState!==null,qa=Sl,sr=Ii,Sl=qa||Ut,Ii=sr||ua,E(w,p),Ii=sr,Sl=qa,K(p),w=p.stateNode,w._current=p,w._visibility&=-3,w._visibility|=w._pendingVisibility&2,U&8192&&(w._visibility=Ut?w._visibility&-2:w._visibility|1,Ut&&(w=Sl||Ii,P===null||ua||w||re(p)),p.memoizedProps===null||p.memoizedProps.mode!=="manual"))e:for(P=null,w=p;;){if(w.tag===5||w.tag===26||w.tag===27){if(P===null){ua=P=w;try{if(X=ua.stateNode,Ut)ue=X.style,typeof ue.setProperty=="function"?ue.setProperty("display","none","important"):ue.display="none";else{Ze=ua.stateNode,ft=ua.memoizedProps.style;var Ha=ft!=null&&ft.hasOwnProperty("display")?ft.display:null;Ze.style.display=Ha==null||typeof Ha=="boolean"?"":(""+Ha).trim()}}catch(an){Zs(ua,ua.return,an)}}}else if(w.tag===6){if(P===null){ua=w;try{ua.stateNode.nodeValue=Ut?"":ua.memoizedProps}catch(an){Zs(ua,ua.return,an)}}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===p)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===p)break e;for(;w.sibling===null;){if(w.return===null||w.return===p)break e;P===w&&(P=null),w=w.return}P===w&&(P=null),w.sibling.return=w.return,w=w.sibling}U&4&&(U=p.updateQueue,U!==null&&(P=U.retryQueue,P!==null&&(U.retryQueue=null,S(p,P))));break;case 19:E(w,p),K(p),U&4&&(U=p.updateQueue,U!==null&&(p.updateQueue=null,S(p,U)));break;case 21:break;default:E(w,p),K(p)}}function K(p){var w=p.flags;if(w&2){try{if(p.tag!==27){e:{for(var P=p.return;P!==null;){if(tf(P)){var U=P;break e}P=P.return}throw Error(r(160))}switch(U.tag){case 27:var X=U.stateNode,ue=SA(p);Tp(p,ue,X);break;case 5:var Ze=U.stateNode;U.flags&32&&(Ku(Ze,""),U.flags&=-33);var ft=SA(p);Tp(p,ft,Ze);break;case 3:case 4:var Ut=U.stateNode.containerInfo,ua=SA(p);bA(p,ua,Ut);break;default:throw Error(r(161))}}}catch(qa){Zs(p,p.return,qa)}p.flags&=-3}w&4096&&(p.flags&=-4097)}function Y(p){if(p.subtreeFlags&1024)for(p=p.child;p!==null;){var w=p;Y(w),w.tag===5&&w.flags&1024&&w.stateNode.reset(),p=p.sibling}}function ae(p,w){if(w.subtreeFlags&8772)for(w=w.child;w!==null;)xA(p,w.alternate,w),w=w.sibling}function re(p){for(p=p.child;p!==null;){var w=p;switch(w.tag){case 0:case 11:case 14:case 15:Wo(4,w,w.return),re(w);break;case 1:fl(w,w.return);var P=w.stateNode;typeof P.componentWillUnmount=="function"&&Rp(w,w.return,P),re(w);break;case 26:case 27:case 5:fl(w,w.return),re(w);break;case 22:fl(w,w.return),w.memoizedState===null&&re(w);break;default:re(w)}p=p.sibling}}function pe(p,w,P){for(P=P&&(w.subtreeFlags&8772)!==0,w=w.child;w!==null;){var U=w.alternate,X=p,ue=w,Ze=ue.flags;switch(ue.tag){case 0:case 11:case 15:pe(X,ue,P),Ff(4,ue);break;case 1:if(pe(X,ue,P),U=ue,X=U.stateNode,typeof X.componentDidMount=="function")try{X.componentDidMount()}catch(ua){Zs(U,U.return,ua)}if(U=ue,X=U.updateQueue,X!==null){var ft=U.stateNode;try{var Ut=X.shared.hiddenCallbacks;if(Ut!==null)for(X.shared.hiddenCallbacks=null,X=0;X<Ut.length;X++)CA(Ut[X],ft)}catch(ua){Zs(U,U.return,ua)}}P&&Ze&64&&ic(ue),Vc(ue,ue.return);break;case 26:case 27:case 5:pe(X,ue,P),P&&U===null&&Ze&4&&Qg(ue),Vc(ue,ue.return);break;case 12:pe(X,ue,P);break;case 13:pe(X,ue,P),P&&Ze&4&&A(X,ue);break;case 22:ue.memoizedState===null&&pe(X,ue,P),Vc(ue,ue.return);break;default:pe(X,ue,P)}w=w.sibling}}function Pe(p,w){var P=null;p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(P=p.memoizedState.cachePool.pool),p=null,w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(p=w.memoizedState.cachePool.pool),p!==P&&(p!=null&&p.refCount++,P!=null&&G(P))}function Ce(p,w){p=null,w.alternate!==null&&(p=w.alternate.memoizedState.cache),w=w.memoizedState.cache,w!==p&&(w.refCount++,p!=null&&G(p))}function De(p,w,P,U){if(w.subtreeFlags&10256)for(w=w.child;w!==null;)Le(p,w,P,U),w=w.sibling}function Le(p,w,P,U){var X=w.flags;switch(w.tag){case 0:case 11:case 15:De(p,w,P,U),X&2048&&Ff(9,w);break;case 3:De(p,w,P,U),X&2048&&(p=null,w.alternate!==null&&(p=w.alternate.memoizedState.cache),w=w.memoizedState.cache,w!==p&&(w.refCount++,p!=null&&G(p)));break;case 12:if(X&2048){De(p,w,P,U),p=w.stateNode;try{var ue=w.memoizedProps,Ze=ue.id,ft=ue.onPostCommit;typeof ft=="function"&&ft(Ze,w.alternate===null?"mount":"update",p.passiveEffectDuration,-0)}catch(Ut){Zs(w,w.return,Ut)}}else De(p,w,P,U);break;case 23:break;case 22:ue=w.stateNode,w.memoizedState!==null?ue._visibility&4?De(p,w,P,U):it(p,w):ue._visibility&4?De(p,w,P,U):(ue._visibility|=4,Ke(p,w,P,U,(w.subtreeFlags&10256)!==0)),X&2048&&Pe(w.alternate,w);break;case 24:De(p,w,P,U),X&2048&&Ce(w.alternate,w);break;default:De(p,w,P,U)}}function Ke(p,w,P,U,X){for(X=X&&(w.subtreeFlags&10256)!==0,w=w.child;w!==null;){var ue=p,Ze=w,ft=P,Ut=U,ua=Ze.flags;switch(Ze.tag){case 0:case 11:case 15:Ke(ue,Ze,ft,Ut,X),Ff(8,Ze);break;case 23:break;case 22:var qa=Ze.stateNode;Ze.memoizedState!==null?qa._visibility&4?Ke(ue,Ze,ft,Ut,X):it(ue,Ze):(qa._visibility|=4,Ke(ue,Ze,ft,Ut,X)),X&&ua&2048&&Pe(Ze.alternate,Ze);break;case 24:Ke(ue,Ze,ft,Ut,X),X&&ua&2048&&Ce(Ze.alternate,Ze);break;default:Ke(ue,Ze,ft,Ut,X)}w=w.sibling}}function it(p,w){if(w.subtreeFlags&10256)for(w=w.child;w!==null;){var P=p,U=w,X=U.flags;switch(U.tag){case 22:it(P,U),X&2048&&Pe(U.alternate,U);break;case 24:it(P,U),X&2048&&Ce(U.alternate,U);break;default:it(P,U)}w=w.sibling}}var tt=8192;function pt(p){if(p.subtreeFlags&tt)for(p=p.child;p!==null;)ut(p),p=p.sibling}function ut(p){switch(p.tag){case 26:pt(p),p.flags&tt&&p.memoizedState!==null&&GC(k,p.memoizedState,p.memoizedProps);break;case 5:pt(p);break;case 3:case 4:var w=k;k=fg(p.stateNode.containerInfo),pt(p),k=w;break;case 22:p.memoizedState===null&&(w=p.alternate,w!==null&&w.memoizedState!==null?(w=tt,tt=16777216,pt(p),tt=w):pt(p));break;default:pt(p)}}function ct(p){var w=p.alternate;if(w!==null&&(p=w.child,p!==null)){w.child=null;do w=p.sibling,p.sibling=null,p=w;while(p!==null)}}function dt(p){var w=p.deletions;if((p.flags&16)!==0){if(w!==null)for(var P=0;P<w.length;P++){var U=w[P];Ni=U,Qt(U,p)}ct(p)}if(p.subtreeFlags&10256)for(p=p.child;p!==null;)vt(p),p=p.sibling}function vt(p){switch(p.tag){case 0:case 11:case 15:dt(p),p.flags&2048&&Wo(9,p,p.return);break;case 3:dt(p);break;case 12:dt(p);break;case 22:var w=p.stateNode;p.memoizedState!==null&&w._visibility&4&&(p.return===null||p.return.tag!==13)?(w._visibility&=-5,Tt(p)):dt(p);break;default:dt(p)}}function Tt(p){var w=p.deletions;if((p.flags&16)!==0){if(w!==null)for(var P=0;P<w.length;P++){var U=w[P];Ni=U,Qt(U,p)}ct(p)}for(p=p.child;p!==null;){switch(w=p,w.tag){case 0:case 11:case 15:Wo(8,w,w.return),Tt(w);break;case 22:P=w.stateNode,P._visibility&4&&(P._visibility&=-5,Tt(w));break;default:Tt(w)}p=p.sibling}}function Qt(p,w){for(;Ni!==null;){var P=Ni;switch(P.tag){case 0:case 11:case 15:Wo(8,P,w);break;case 23:case 22:if(P.memoizedState!==null&&P.memoizedState.cachePool!==null){var U=P.memoizedState.cachePool.pool;U!=null&&U.refCount++}break;case 24:G(P.memoizedState.cache)}if(U=P.child,U!==null)U.return=P,Ni=U;else e:for(P=p;Ni!==null;){U=Ni;var X=U.sibling,ue=U.return;if(af(U),U===P){Ni=null;break e}if(X!==null){X.return=ue,Ni=X;break e}Ni=ue}}}function kt(p,w,P,U){this.tag=p,this.key=P,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=w,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=U,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ra(p,w,P,U){return new kt(p,w,P,U)}function ca(p){return p=p.prototype,!(!p||!p.isReactComponent)}function xa(p,w){var P=p.alternate;return P===null?(P=ra(p.tag,w,p.key,p.mode),P.elementType=p.elementType,P.type=p.type,P.stateNode=p.stateNode,P.alternate=p,p.alternate=P):(P.pendingProps=w,P.type=p.type,P.flags=0,P.subtreeFlags=0,P.deletions=null),P.flags=p.flags&31457280,P.childLanes=p.childLanes,P.lanes=p.lanes,P.child=p.child,P.memoizedProps=p.memoizedProps,P.memoizedState=p.memoizedState,P.updateQueue=p.updateQueue,w=p.dependencies,P.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext},P.sibling=p.sibling,P.index=p.index,P.ref=p.ref,P.refCleanup=p.refCleanup,P}function Ft(p,w){p.flags&=31457282;var P=p.alternate;return P===null?(p.childLanes=0,p.lanes=w,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=P.childLanes,p.lanes=P.lanes,p.child=P.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=P.memoizedProps,p.memoizedState=P.memoizedState,p.updateQueue=P.updateQueue,p.type=P.type,w=P.dependencies,p.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext}),p}function sa(p,w,P,U,X,ue){var Ze=0;if(U=p,typeof p=="function")ca(p)&&(Ze=1);else if(typeof p=="string")Ze=jC(p,P,Vt.current)?26:p==="html"||p==="head"||p==="body"?27:5;else e:switch(p){case v:return zt(P.children,X,ue,w);case R:Ze=8,X|=24;break;case x:return p=ra(12,P,w,X|2),p.elementType=x,p.lanes=ue,p;case $:return p=ra(13,P,w,X),p.elementType=$,p.lanes=ue,p;case H:return p=ra(19,P,w,X),p.elementType=H,p.lanes=ue,p;case se:return oa(P,X,ue,w);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case N:case F:Ze=10;break e;case L:Ze=9;break e;case j:Ze=11;break e;case W:Ze=14;break e;case ee:Ze=16,U=null;break e}Ze=29,P=Error(r(130,p===null?"null":typeof p,"")),U=null}return w=ra(Ze,P,w,X),w.elementType=p,w.type=U,w.lanes=ue,w}function zt(p,w,P,U){return p=ra(7,p,U,w),p.lanes=P,p}function oa(p,w,P,U){p=ra(22,p,U,w),p.elementType=se,p.lanes=P;var X={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var ue=X._current;if(ue===null)throw Error(r(456));if((X._pendingVisibility&2)===0){var Ze=il(ue,2);Ze!==null&&(X._pendingVisibility|=2,Zl(Ze,ue,2))}},attach:function(){var ue=X._current;if(ue===null)throw Error(r(456));if((X._pendingVisibility&2)!==0){var Ze=il(ue,2);Ze!==null&&(X._pendingVisibility&=-3,Zl(Ze,ue,2))}}};return p.stateNode=X,p}function ta(p,w,P){return p=ra(6,p,null,w),p.lanes=P,p}function da(p,w,P){return w=ra(4,p.children!==null?p.children:[],p.key,w),w.lanes=P,w.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},w}function Xt(p){p.flags|=4}function pa(p,w){if(w.type!=="stylesheet"||(w.state.loading&4)!==0)p.flags&=-16777217;else if(p.flags|=16777216,!X1(w)){if(w=Fl.current,w!==null&&((mr&4194176)===mr?ec!==null:(mr&62914560)!==mr&&(mr&536870912)===0||w!==ec))throw Vu=vh,eg;p.flags|=8192}}function La(p,w){w!==null&&(p.flags|=4),p.flags&16384&&(w=p.tag!==22?Zt():536870912,p.lanes|=w,Ro|=w)}function Fa(p,w){if(!xi)switch(p.tailMode){case"hidden":w=p.tail;for(var P=null;w!==null;)w.alternate!==null&&(P=w),w=w.sibling;P===null?p.tail=null:P.sibling=null;break;case"collapsed":P=p.tail;for(var U=null;P!==null;)P.alternate!==null&&(U=P),P=P.sibling;U===null?w||p.tail===null?p.tail=null:p.tail.sibling=null:U.sibling=null}}function Va(p){var w=p.alternate!==null&&p.alternate.child===p.child,P=0,U=0;if(w)for(var X=p.child;X!==null;)P|=X.lanes|X.childLanes,U|=X.subtreeFlags&31457280,U|=X.flags&31457280,X.return=p,X=X.sibling;else for(X=p.child;X!==null;)P|=X.lanes|X.childLanes,U|=X.subtreeFlags,U|=X.flags,X.return=p,X=X.sibling;return p.subtreeFlags|=U,p.childLanes=P,w}function cr(p,w,P){var U=w.pendingProps;switch(qh(w),w.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Va(w),null;case 1:return Va(w),null;case 3:return P=w.stateNode,U=null,p!==null&&(U=p.memoizedState.cache),w.memoizedState.cache!==U&&(w.flags|=2048),Xd(lo),wt(),P.pendingContext&&(P.context=P.pendingContext,P.pendingContext=null),(p===null||p.child===null)&&(Hh(w)?Xt(w):p===null||p.memoizedState.isDehydrated&&(w.flags&256)===0||(w.flags|=1024,lu!==null&&(pm(lu),lu=null))),Va(w),null;case 26:return P=w.memoizedState,p===null?(Xt(w),P!==null?(Va(w),pa(w,P)):(Va(w),w.flags&=-16777217)):P?P!==p.memoizedState?(Xt(w),Va(w),pa(w,P)):(Va(w),w.flags&=-16777217):(p.memoizedProps!==U&&Xt(w),Va(w),w.flags&=-16777217),null;case 27:ba(w),P=wa.current;var X=w.type;if(p!==null&&w.stateNode!=null)p.memoizedProps!==U&&Xt(w);else{if(!U){if(w.stateNode===null)throw Error(r(166));return Va(w),null}p=Vt.current,Hh(w)?xf(w):(p=MA(X,U,P),w.stateNode=p,Xt(w))}return Va(w),null;case 5:if(ba(w),P=w.type,p!==null&&w.stateNode!=null)p.memoizedProps!==U&&Xt(w);else{if(!U){if(w.stateNode===null)throw Error(r(166));return Va(w),null}if(p=Vt.current,Hh(w))xf(w);else{switch(X=uy(wa.current),p){case 1:p=X.createElementNS("http://www.w3.org/2000/svg",P);break;case 2:p=X.createElementNS("http://www.w3.org/1998/Math/MathML",P);break;default:switch(P){case"svg":p=X.createElementNS("http://www.w3.org/2000/svg",P);break;case"math":p=X.createElementNS("http://www.w3.org/1998/Math/MathML",P);break;case"script":p=X.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof U.is=="string"?X.createElement("select",{is:U.is}):X.createElement("select"),U.multiple?p.multiple=!0:U.size&&(p.size=U.size);break;default:p=typeof U.is=="string"?X.createElement(P,{is:U.is}):X.createElement(P)}}p[Yt]=w,p[Kt]=U;e:for(X=w.child;X!==null;){if(X.tag===5||X.tag===6)p.appendChild(X.stateNode);else if(X.tag!==4&&X.tag!==27&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===w)break e;for(;X.sibling===null;){if(X.return===null||X.return===w)break e;X=X.return}X.sibling.return=X.return,X=X.sibling}w.stateNode=p;e:switch(zo(p,P,U),P){case"button":case"input":case"select":case"textarea":p=!!U.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&Xt(w)}}return Va(w),w.flags&=-16777217,null;case 6:if(p&&w.stateNode!=null)p.memoizedProps!==U&&Xt(w);else{if(typeof U!="string"&&w.stateNode===null)throw Error(r(166));if(p=wa.current,Hh(w)){if(p=w.stateNode,P=w.memoizedProps,U=null,X=ol,X!==null)switch(X.tag){case 27:case 5:U=X.memoizedProps}p[Yt]=w,p=!!(p.nodeValue===P||U!==null&&U.suppressHydrationWarning===!0||Bf(p.nodeValue,P)),p||bc(w)}else p=uy(p).createTextNode(U),p[Yt]=w,w.stateNode=p}return Va(w),null;case 13:if(U=w.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(X=Hh(w),U!==null&&U.dehydrated!==null){if(p===null){if(!X)throw Error(r(318));if(X=w.memoizedState,X=X!==null?X.dehydrated:null,!X)throw Error(r(317));X[Yt]=w}else $h(),(w.flags&128)===0&&(w.memoizedState=null),w.flags|=4;Va(w),X=!1}else lu!==null&&(pm(lu),lu=null),X=!0;if(!X)return w.flags&256?(Qc(w),w):(Qc(w),null)}if(Qc(w),(w.flags&128)!==0)return w.lanes=P,w;if(P=U!==null,p=p!==null&&p.memoizedState!==null,P){U=w.child,X=null,U.alternate!==null&&U.alternate.memoizedState!==null&&U.alternate.memoizedState.cachePool!==null&&(X=U.alternate.memoizedState.cachePool.pool);var ue=null;U.memoizedState!==null&&U.memoizedState.cachePool!==null&&(ue=U.memoizedState.cachePool.pool),ue!==X&&(U.flags|=2048)}return P!==p&&P&&(w.child.flags|=8192),La(w,w.updateQueue),Va(w),null;case 4:return wt(),p===null&&d0(w.stateNode.containerInfo),Va(w),null;case 10:return Xd(w.type),Va(w),null;case 19:if(ot(Gs),X=w.memoizedState,X===null)return Va(w),null;if(U=(w.flags&128)!==0,ue=X.rendering,ue===null)if(U)Fa(X,!1);else{if(kn!==0||p!==null&&(p.flags&128)!==0)for(p=w.child;p!==null;){if(ue=nm(p),ue!==null){for(w.flags|=128,Fa(X,!1),p=ue.updateQueue,w.updateQueue=p,La(w,p),w.subtreeFlags=0,p=P,P=w.child;P!==null;)Ft(P,p),P=P.sibling;return ve(Gs,Gs.current&1|2),w.child}p=p.sibling}X.tail!==null&&ka()>To&&(w.flags|=128,U=!0,Fa(X,!1),w.lanes=4194304)}else{if(!U)if(p=nm(ue),p!==null){if(w.flags|=128,U=!0,p=p.updateQueue,w.updateQueue=p,La(w,p),Fa(X,!0),X.tail===null&&X.tailMode==="hidden"&&!ue.alternate&&!xi)return Va(w),null}else 2*ka()-X.renderingStartTime>To&&P!==536870912&&(w.flags|=128,U=!0,Fa(X,!1),w.lanes=4194304);X.isBackwards?(ue.sibling=w.child,w.child=ue):(p=X.last,p!==null?p.sibling=ue:w.child=ue,X.last=ue)}return X.tail!==null?(w=X.tail,X.rendering=w,X.tail=w.sibling,X.renderingStartTime=ka(),w.sibling=null,p=Gs.current,ve(Gs,U?p&1|2:p&1),w):(Va(w),null);case 22:case 23:return Qc(w),Xc(),U=w.memoizedState!==null,p!==null?p.memoizedState!==null!==U&&(w.flags|=8192):U&&(w.flags|=8192),U?(P&536870912)!==0&&(w.flags&128)===0&&(Va(w),w.subtreeFlags&6&&(w.flags|=8192)):Va(w),P=w.updateQueue,P!==null&&La(w,P.retryQueue),P=null,p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(P=p.memoizedState.cachePool.pool),U=null,w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(U=w.memoizedState.cachePool.pool),U!==P&&(w.flags|=2048),p!==null&&ot(St),null;case 24:return P=null,p!==null&&(P=p.memoizedState.cache),w.memoizedState.cache!==P&&(w.flags|=2048),Xd(lo),Va(w),null;case 25:return null}throw Error(r(156,w.tag))}function jr(p,w){switch(qh(w),w.tag){case 1:return p=w.flags,p&65536?(w.flags=p&-65537|128,w):null;case 3:return Xd(lo),wt(),p=w.flags,(p&65536)!==0&&(p&128)===0?(w.flags=p&-65537|128,w):null;case 26:case 27:case 5:return ba(w),null;case 13:if(Qc(w),p=w.memoizedState,p!==null&&p.dehydrated!==null){if(w.alternate===null)throw Error(r(340));$h()}return p=w.flags,p&65536?(w.flags=p&-65537|128,w):null;case 19:return ot(Gs),null;case 4:return wt(),null;case 10:return Xd(w.type),null;case 22:case 23:return Qc(w),Xc(),p!==null&&ot(St),p=w.flags,p&65536?(w.flags=p&-65537|128,w):null;case 24:return Xd(lo),null;case 25:return null;default:return null}}function vr(p,w){switch(qh(w),w.tag){case 3:Xd(lo),wt();break;case 26:case 27:case 5:ba(w);break;case 4:wt();break;case 13:Qc(w);break;case 19:ot(Gs);break;case 10:Xd(w.type);break;case 22:case 23:Qc(w),Xc(),p!==null&&ot(St);break;case 24:Xd(lo)}}var Ir={getCacheForType:function(p){var w=to(lo),P=w.data.get(p);return P===void 0&&(P=p(),w.data.set(p,P)),P}},Or=typeof WeakMap=="function"?WeakMap:Map,zr=0,Gr=null,Ur=null,mr=0,fn=0,Er=null,rr=!1,pn=!1,Xn=!1,An=0,kn=0,ns=0,_s=0,co=0,ao=0,Ro=0,Vn=null,di=null,Bn=!1,fi=0,To=1/0,Oi=null,ms=null,zc=!1,Jo=null,du=0,Gl=0,sc=null,bl=0,Jd=null;function Co(){if((zr&2)!==0&&mr!==0)return mr&-mr;if(we.T!==null){var p=Me;return p!==0?p:NA()}return Gt()}function Vh(){ao===0&&(ao=(mr&536870912)===0||xi?Rn():536870912);var p=Fl.current;return p!==null&&(p.flags|=32),ao}function Zl(p,w,P){(p===Gr&&fn===2||p.cancelPendingCommit!==null)&&(ug(p,0),Sp(p,mr,ao,!1)),Ie(p,P),((zr&2)===0||p!==Gr)&&(p===Gr&&((zr&2)===0&&(_s|=P),kn===4&&Sp(p,mr,ao,!1)),rf(p))}function Cp(p,w,P){if((zr&6)!==0)throw Error(r(327));var U=!P&&(w&60)===0&&(w&p.expiredLanes)===0||Kr(p,w),X=U?mm(p,w):i0(p,w,!0),ue=U;do{if(X===0){pn&&!U&&Sp(p,w,0,!1);break}else if(X===6)Sp(p,w,0,!rr);else{if(P=p.current.alternate,ue&&!RC(P)){X=i0(p,w,!1),ue=!1;continue}if(X===2){if(ue=w,p.errorRecoveryDisabledLanes&ue)var Ze=0;else Ze=p.pendingLanes&-536870913,Ze=Ze!==0?Ze:Ze&536870912?536870912:0;if(Ze!==0){w=Ze;e:{var ft=p;X=Vn;var Ut=ft.current.memoizedState.isDehydrated;if(Ut&&(ug(ft,Ze).flags|=256),Ze=i0(ft,Ze,!1),Ze!==2){if(Xn&&!Ut){ft.errorRecoveryDisabledLanes|=ue,_s|=ue,X=4;break e}ue=di,di=X,ue!==null&&pm(ue)}X=Ze}if(ue=!1,X!==2)continue}}if(X===1){ug(p,0),Sp(p,w,0,!0);break}e:{switch(U=p,X){case 0:case 1:throw Error(r(345));case 4:if((w&4194176)===w){Sp(U,w,ao,!rr);break e}break;case 2:di=null;break;case 3:case 5:break;default:throw Error(r(329))}if(U.finishedWork=P,U.finishedLanes=w,(w&62914560)===w&&(ue=fi+300-ka(),10<ue)){if(Sp(U,w,ao,!rr),pr(U,0)!==0)break e;U.timeoutHandle=nf(ty.bind(null,U,P,di,Oi,Bn,w,ao,_s,Ro,rr,2,-0,0),ue);break e}ty(U,P,di,Oi,Bn,w,ao,_s,Ro,rr,0,-0,0)}}break}while(!0);rf(p)}function pm(p){di===null?di=p:di.push.apply(di,p)}function ty(p,w,P,U,X,ue,Ze,ft,Ut,ua,qa,sr,Na){var Ha=w.subtreeFlags;if((Ha&8192||(Ha&16785408)===16785408)&&(LA={stylesheets:null,count:0,unsuspend:AE},ut(w),w=A0(),w!==null)){p.cancelPendingCommit=w(CC.bind(null,p,P,U,X,Ze,ft,Ut,1,sr,Na)),Sp(p,ue,Ze,!ua);return}CC(p,P,U,X,Ze,ft,Ut,qa,sr,Na)}function RC(p){for(var w=p;;){var P=w.tag;if((P===0||P===11||P===15)&&w.flags&16384&&(P=w.updateQueue,P!==null&&(P=P.stores,P!==null)))for(var U=0;U<P.length;U++){var X=P[U],ue=X.getSnapshot;X=X.value;try{if(!js(ue(),X))return!1}catch{return!1}}if(P=w.child,w.subtreeFlags&16384&&P!==null)P.return=w,w=P;else{if(w===p)break;for(;w.sibling===null;){if(w.return===null||w.return===p)return!0;w=w.return}w.sibling.return=w.return,w=w.sibling}}return!0}function Sp(p,w,P,U){w&=~co,w&=~_s,p.suspendedLanes|=w,p.pingedLanes&=~w,U&&(p.warmLanes|=w),U=p.expirationTimes;for(var X=w;0<X;){var ue=31-$r(X),Ze=1<<ue;U[ue]=-1,X&=~Ze}P!==0&&yt(p,P,w)}function a0(){return(zr&6)===0?(ym(0),!1):!0}function r0(){if(Ur!==null){if(fn===0)var p=Ur.return;else p=Ur,Eh=zf=null,vs(p),Kh=null,wl=0,p=Ur;for(;p!==null;)vr(p.alternate,p),p=p.return;Ur=null}}function ug(p,w){p.finishedWork=null,p.finishedLanes=0;var P=p.timeoutHandle;P!==-1&&(p.timeoutHandle=-1,zC(P)),P=p.cancelPendingCommit,P!==null&&(p.cancelPendingCommit=null,P()),r0(),Gr=p,Ur=P=xa(p.current,null),mr=w,fn=0,Er=null,rr=!1,pn=Kr(p,w),Xn=!1,Ro=ao=co=_s=ns=kn=0,di=Vn=null,Bn=!1,(w&8)!==0&&(w|=w&32);var U=p.entangledLanes;if(U!==0)for(p=p.entanglements,U&=w;0<U;){var X=31-$r(U),ue=1<<X;w|=p[X],U&=~ue}return An=w,fs(),P}function E1(p,w){Ta=null,we.H=Fu,w===Pf?(w=$g(),fn=3):w===eg?(w=$g(),fn=4):fn=w===lm?8:w!==null&&typeof w=="object"&&typeof w.then=="function"?6:1,Er=w,Ur===null&&(kn=1,Wd(p,ls(w,p.current)))}function N1(){var p=we.H;return we.H=Fu,p===null?Fu:p}function O1(){var p=we.A;return we.A=Ir,p}function n0(){kn=4,rr||(mr&4194176)!==mr&&Fl.current!==null||(pn=!0),(ns&134217727)===0&&(_s&134217727)===0||Gr===null||Sp(Gr,mr,ao,!1)}function i0(p,w,P){var U=zr;zr|=2;var X=N1(),ue=O1();(Gr!==p||mr!==w)&&(Oi=null,ug(p,w)),w=!1;var Ze=kn;e:do try{if(fn!==0&&Ur!==null){var ft=Ur,Ut=Er;switch(fn){case 8:r0(),Ze=6;break e;case 3:case 2:case 6:Fl.current===null&&(w=!0);var ua=fn;if(fn=0,Er=null,ry(p,ft,Ut,ua),P&&pn){Ze=0;break e}break;default:ua=fn,fn=0,Er=null,ry(p,ft,Ut,ua)}}V1(),Ze=kn;break}catch(qa){E1(p,qa)}while(!0);return w&&p.shellSuspendCounter++,Eh=zf=null,zr=U,we.H=X,we.A=ue,Ur===null&&(Gr=null,mr=0,fs()),Ze}function V1(){for(;Ur!==null;)z1(Ur)}function mm(p,w){var P=zr;zr|=2;var U=N1(),X=O1();Gr!==p||mr!==w?(Oi=null,To=ka()+500,ug(p,w)):pn=Kr(p,w);e:do try{if(fn!==0&&Ur!==null){w=Ur;var ue=Er;t:switch(fn){case 1:fn=0,Er=null,ry(p,w,ue,1);break;case 2:if(Hg(ue)){fn=0,Er=null,ay(w);break}w=function(){fn===2&&Gr===p&&(fn=7),rf(p)},ue.then(w,w);break e;case 3:fn=7;break e;case 4:fn=5;break e;case 7:Hg(ue)?(fn=0,Er=null,ay(w)):(fn=0,Er=null,ry(p,w,ue,7));break;case 5:var Ze=null;switch(Ur.tag){case 26:Ze=Ur.memoizedState;case 5:case 27:var ft=Ur;if(!Ze||X1(Ze)){fn=0,Er=null;var Ut=ft.sibling;if(Ut!==null)Ur=Ut;else{var ua=ft.return;ua!==null?(Ur=ua,s0(ua)):Ur=null}break t}}fn=0,Er=null,ry(p,w,ue,5);break;case 6:fn=0,Er=null,ry(p,w,ue,6);break;case 8:r0(),kn=6;break e;default:throw Error(r(462))}}xl();break}catch(qa){E1(p,qa)}while(!0);return Eh=zf=null,we.H=U,we.A=X,zr=P,Ur!==null?0:(Gr=null,mr=0,fs(),kn)}function xl(){for(;Ur!==null&&!lr();)z1(Ur)}function z1(p){var w=Ap(p.alternate,p,An);p.memoizedProps=p.pendingProps,w===null?s0(p):Ur=w}function ay(p){var w=p,P=w.alternate;switch(w.tag){case 15:case 0:w=AA(P,w,w.pendingProps,w.type,void 0,mr);break;case 11:w=AA(P,w,w.pendingProps,w.type.render,w.ref,mr);break;case 5:vs(w);default:vr(P,w),w=Ur=Ft(w,An),w=Ap(P,w,An)}p.memoizedProps=p.pendingProps,w===null?s0(p):Ur=w}function ry(p,w,P,U){Eh=zf=null,vs(w),Kh=null,wl=0;var X=w.return;try{if(pA(p,X,w,P,mr)){kn=1,Wd(p,ls(P,p.current)),Ur=null;return}}catch(ue){if(X!==null)throw Ur=X,ue;kn=1,Wd(p,ls(P,p.current)),Ur=null;return}w.flags&32768?(xi||U===1?p=!0:pn||(mr&536870912)!==0?p=!1:(rr=p=!0,(U===2||U===3||U===6)&&(U=Fl.current,U!==null&&U.tag===13&&(U.flags|=16384))),TC(w,p)):s0(w)}function s0(p){var w=p;do{if((w.flags&32768)!==0){TC(w,rr);return}p=w.return;var P=cr(w.alternate,w,An);if(P!==null){Ur=P;return}if(w=w.sibling,w!==null){Ur=w;return}Ur=w=p}while(w!==null);kn===0&&(kn=5)}function TC(p,w){do{var P=jr(p.alternate,p);if(P!==null){P.flags&=32767,Ur=P;return}if(P=p.return,P!==null&&(P.flags|=32768,P.subtreeFlags=0,P.deletions=null),!w&&(p=p.sibling,p!==null)){Ur=p;return}Ur=p=P}while(p!==null);kn=6,Ur=null}function CC(p,w,P,U,X,ue,Ze,ft,Ut,ua){var qa=we.T,sr=ke.p;try{ke.p=2,we.T=null,PA(p,w,P,U,sr,X,ue,Ze,ft,Ut,ua)}finally{we.T=qa,ke.p=sr}}function PA(p,w,P,U,X,ue,Ze,ft){do zh();while(Jo!==null);if((zr&6)!==0)throw Error(r(327));var Ut=p.finishedWork;if(U=p.finishedLanes,Ut===null)return null;if(p.finishedWork=null,p.finishedLanes=0,Ut===p.current)throw Error(r(177));p.callbackNode=null,p.callbackPriority=0,p.cancelPendingCommit=null;var ua=Ut.lanes|Ut.childLanes;if(ua|=es,He(p,U,ua,ue,Ze,ft),p===Gr&&(Ur=Gr=null,mr=0),(Ut.subtreeFlags&10256)===0&&(Ut.flags&10256)===0||zc||(zc=!0,Gl=ua,sc=P,uE(un,function(){return zh(),null})),P=(Ut.flags&15990)!==0,(Ut.subtreeFlags&15990)!==0||P?(P=we.T,we.T=null,ue=ke.p,ke.p=2,Ze=zr,zr|=4,Bu(p,Ut),Z(Ut,p),Id(DA,p.containerInfo),Rm=!!Qd,DA=Qd=null,p.current=Ut,xA(p,Ut.alternate,Ut),Tr(),zr=Ze,ke.p=ue,we.T=P):p.current=Ut,zc?(zc=!1,Jo=p,du=U):D1(p,ua),ua=p.pendingLanes,ua===0&&(ms=null),Qr(Ut.stateNode),rf(p),w!==null)for(X=p.onRecoverableError,Ut=0;Ut<w.length;Ut++)ua=w[Ut],X(ua.value,{componentStack:ua.stack});return(du&3)!==0&&zh(),ua=p.pendingLanes,(U&4194218)!==0&&(ua&42)!==0?p===Jd?bl++:(bl=0,Jd=p):bl=0,ym(0),null}function D1(p,w){(p.pooledCacheLanes&=w)===0&&(w=p.pooledCache,w!=null&&(p.pooledCache=null,G(w)))}function zh(){if(Jo!==null){var p=Jo,w=Gl;Gl=0;var P=bt(du),U=we.T,X=ke.p;try{if(ke.p=32>P?32:P,we.T=null,Jo===null)var ue=!1;else{P=sc,sc=null;var Ze=Jo,ft=du;if(Jo=null,du=0,(zr&6)!==0)throw Error(r(331));var Ut=zr;if(zr|=4,vt(Ze.current),Le(Ze,Ze.current,ft,P),zr=Ut,ym(0,!1),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(yr,Ze)}catch{}ue=!0}return ue}finally{ke.p=X,we.T=U,D1(p,w)}}return!1}function ny(p,w,P){w=ls(P,w),w=om(p.stateNode,w,2),p=If(p,w,2),p!==null&&(Ie(p,2),rf(p))}function Zs(p,w,P){if(p.tag===3)ny(p,p,P);else for(;w!==null;){if(w.tag===3){ny(w,p,P);break}else if(w.tag===1){var U=w.stateNode;if(typeof w.type.getDerivedStateFromError=="function"||typeof U.componentDidCatch=="function"&&(ms===null||!ms.has(U))){p=ls(P,p),P=sg(2),U=If(w,P,2),U!==null&&(Wg(P,U,w,p),Ie(U,2),rf(U));break}}w=w.return}}function M1(p,w,P){var U=p.pingCache;if(U===null){U=p.pingCache=new Or;var X=new Set;U.set(w,X)}else X=U.get(w),X===void 0&&(X=new Set,U.set(w,X));X.has(P)||(Xn=!0,X.add(P),p=sE.bind(null,p,w,P),w.then(p,p))}function sE(p,w,P){var U=p.pingCache;U!==null&&U.delete(w),p.pingedLanes|=p.suspendedLanes&P,p.warmLanes&=~P,Gr===p&&(mr&P)===P&&(kn===4||kn===3&&(mr&62914560)===mr&&300>ka()-fi?(zr&2)===0&&ug(p,0):co|=P,Ro===mr&&(Ro=0)),rf(p)}function SC(p,w){w===0&&(w=Zt()),p=il(p,w),p!==null&&(Ie(p,w),rf(p))}function oE(p){var w=p.memoizedState,P=0;w!==null&&(P=w.retryLane),SC(p,P)}function lE(p,w){var P=0;switch(p.tag){case 13:var U=p.stateNode,X=p.memoizedState;X!==null&&(P=X.retryLane);break;case 19:U=p.stateNode;break;case 22:U=p.stateNode._retryCache;break;default:throw Error(r(314))}U!==null&&U.delete(w),SC(p,P)}function uE(p,w){return Ja(p,w)}var iy=null,sy=null,gm=!1,o0=!1,ho=!1,kf=0;function rf(p){p!==sy&&p.next===null&&(sy===null?iy=sy=p:sy=sy.next=p),o0=!0,gm||(gm=!0,EA(l0))}function ym(p,w){if(!ho&&o0){ho=!0;do for(var P=!1,U=iy;U!==null;){if(p!==0){var X=U.pendingLanes;if(X===0)var ue=0;else{var Ze=U.suspendedLanes,ft=U.pingedLanes;ue=(1<<31-$r(42|p)+1)-1,ue&=X&~(Ze&~ft),ue=ue&201326677?ue&201326677|1:ue?ue|2:0}ue!==0&&(P=!0,L1(U,ue))}else ue=mr,ue=pr(U,U===Gr?ue:0),(ue&3)===0||Kr(U,ue)||(P=!0,L1(U,ue));U=U.next}while(P);ho=!1}}function l0(){o0=gm=!1;var p=0;kf!==0&&(j1()&&(p=kf),kf=0);for(var w=ka(),P=null,U=iy;U!==null;){var X=U.next,ue=oy(U,w);ue===0?(U.next=null,P===null?iy=X:P.next=X,X===null&&(sy=P)):(P=U,(p!==0||(ue&3)!==0)&&(o0=!0)),U=X}ym(p)}function oy(p,w){for(var P=p.suspendedLanes,U=p.pingedLanes,X=p.expirationTimes,ue=p.pendingLanes&-62914561;0<ue;){var Ze=31-$r(ue),ft=1<<Ze,Ut=X[Ze];Ut===-1?((ft&P)===0||(ft&U)!==0)&&(X[Ze]=ti(ft,w)):Ut<=w&&(p.expiredLanes|=ft),ue&=~ft}if(w=Gr,P=mr,P=pr(p,p===w?P:0),U=p.callbackNode,P===0||p===w&&fn===2||p.cancelPendingCommit!==null)return U!==null&&U!==null&&or(U),p.callbackNode=null,p.callbackPriority=0;if((P&3)===0||Kr(p,P)){if(w=P&-P,w===p.callbackPriority)return w;switch(U!==null&&or(U),bt(P)){case 2:case 8:P=wn;break;case 32:P=un;break;case 268435456:P=$a;break;default:P=un}return U=I1.bind(null,p),P=Ja(P,U),p.callbackPriority=w,p.callbackNode=P,w}return U!==null&&U!==null&&or(U),p.callbackPriority=2,p.callbackNode=null,2}function I1(p,w){var P=p.callbackNode;if(zh()&&p.callbackNode!==P)return null;var U=mr;return U=pr(p,p===Gr?U:0),U===0?null:(Cp(p,U,w),oy(p,ka()),p.callbackNode!=null&&p.callbackNode===P?I1.bind(null,p):null)}function L1(p,w){if(zh())return null;Cp(p,w,!0)}function EA(p){hE(function(){(zr&6)!==0?Ja(nn,p):p()})}function NA(){return kf===0&&(kf=Rn()),kf}function OA(p){return p==null||typeof p=="symbol"||typeof p=="boolean"?null:typeof p=="function"?p:zn(""+p)}function bC(p,w){var P=w.ownerDocument.createElement("input");return P.name=w.name,P.value=w.value,p.id&&P.setAttribute("form",p.id),w.parentNode.insertBefore(P,w),p=new FormData(p),P.parentNode.removeChild(P),p}function xC(p,w,P,U,X){if(w==="submit"&&P&&P.stateNode===X){var ue=OA((X[Kt]||null).action),Ze=U.submitter;Ze&&(w=(w=Ze[Kt]||null)?OA(w.formAction):Ze.getAttribute("formAction"),w!==null&&(ue=w,Ze=null));var ft=new Di("action","action",null,U,X);p.push({event:ft,listeners:[{instance:null,listener:function(){if(U.defaultPrevented){if(kf!==0){var Ut=Ze?bC(X,Ze):new FormData(X);rd(P,{pending:!0,data:Ut,method:X.method,action:ue},null,Ut)}}else typeof ue=="function"&&(ft.preventDefault(),Ut=Ze?bC(X,Ze):new FormData(X),rd(P,{pending:!0,data:Ut,method:X.method,action:ue},ue,Ut))},currentTarget:X}]})}}for(var VA=0;VA<Ko.length;VA++){var zA=Ko[VA],F1=zA.toLowerCase(),PC=zA[0].toUpperCase()+zA.slice(1);As(F1,"on"+PC)}As(Zc,"onAnimationEnd"),As(Rc,"onAnimationIteration"),As(Pu,"onAnimationStart"),As("dblclick","onDoubleClick"),As("focusin","onFocus"),As("focusout","onBlur"),As(qc,"onTransitionRun"),As(Eu,"onTransitionStart"),As(Hc,"onTransitionCancel"),As(Tc,"onTransitionEnd"),Ps("onMouseEnter",["mouseout","mouseover"]),Ps("onMouseLeave",["mouseout","mouseover"]),Ps("onPointerEnter",["pointerout","pointerover"]),Ps("onPointerLeave",["pointerout","pointerover"]),Xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cg));function u0(p,w){w=(w&4)!==0;for(var P=0;P<p.length;P++){var U=p[P],X=U.event;U=U.listeners;e:{var ue=void 0;if(w)for(var Ze=U.length-1;0<=Ze;Ze--){var ft=U[Ze],Ut=ft.instance,ua=ft.currentTarget;if(ft=ft.listener,Ut!==ue&&X.isPropagationStopped())break e;ue=ft,X.currentTarget=ua;try{ue(X)}catch(qa){xh(qa)}X.currentTarget=null,ue=Ut}else for(Ze=0;Ze<U.length;Ze++){if(ft=U[Ze],Ut=ft.instance,ua=ft.currentTarget,ft=ft.listener,Ut!==ue&&X.isPropagationStopped())break e;ue=ft,X.currentTarget=ua;try{ue(X)}catch(qa){xh(qa)}X.currentTarget=null,ue=Ut}}}}function Gi(p,w){var P=w[Ia];P===void 0&&(P=w[Ia]=new Set);var U=p+"__bubble";P.has(U)||(k1(w,p,2,!1),P.add(U))}function c0(p,w,P){var U=0;w&&(U|=4),k1(P,p,U,w)}var dg="_reactListening"+Math.random().toString(36).slice(2);function d0(p){if(!p[dg]){p[dg]=!0,jn.forEach(function(P){P!=="selectionchange"&&(EC.has(P)||c0(P,!1,p),c0(P,!0,p))});var w=p.nodeType===9?p:p.ownerDocument;w===null||w[dg]||(w[dg]=!0,c0("selectionchange",!1,w))}}function k1(p,w,P,U){switch(KC(w)){case 2:var X=HC;break;case 8:X=$C;break;default:X=rw}P=X.bind(null,w,P,p),X=void 0,!gc||w!=="touchstart"&&w!=="touchmove"&&w!=="wheel"||(X=!0),U?X!==void 0?p.addEventListener(w,P,{capture:!0,passive:X}):p.addEventListener(w,P,!0):X!==void 0?p.addEventListener(w,P,{passive:X}):p.addEventListener(w,P,!1)}function h0(p,w,P,U,X){var ue=U;if((w&1)===0&&(w&2)===0&&U!==null)e:for(;;){if(U===null)return;var Ze=U.tag;if(Ze===3||Ze===4){var ft=U.stateNode.containerInfo;if(ft===X||ft.nodeType===8&&ft.parentNode===X)break;if(Ze===4)for(Ze=U.return;Ze!==null;){var Ut=Ze.tag;if((Ut===3||Ut===4)&&(Ut=Ze.stateNode.containerInfo,Ut===X||Ut.nodeType===8&&Ut.parentNode===X))return;Ze=Ze.return}for(;ft!==null;){if(Ze=Un(ft),Ze===null)return;if(Ut=Ze.tag,Ut===5||Ut===6||Ut===26||Ut===27){U=ue=Ze;continue e}ft=ft.parentNode}}U=U.return}Ks(function(){var ua=ue,qa=gr(P),sr=[];e:{var Na=Xu.get(p);if(Na!==void 0){var Ha=Di,an=p;switch(p){case"keypress":if(yn(P)===0)break e;case"keydown":case"keyup":Ha=zd;break;case"focusin":an="focus",Ha=nl;break;case"focusout":an="blur",Ha=nl;break;case"beforeblur":case"afterblur":Ha=nl;break;case"click":if(P.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ha=ys;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ha=Vs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ha=Cf;break;case Zc:case Rc:case Pu:Ha=Ys;break;case Tc:Ha=Je;break;case"scroll":case"scrollend":Ha=Od;break;case"wheel":Ha=Jt;break;case"copy":case"cut":case"paste":Ha=hs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ha=Tf;break;case"toggle":case"beforetoggle":Ha=Ma}var ni=(w&4)!==0,Qo=!ni&&(p==="scroll"||p==="scrollend"),ya=ni?Na!==null?Na+"Capture":null:Na;ni=[];for(var ia=ua,Sa;ia!==null;){var ar=ia;if(Sa=ar.stateNode,ar=ar.tag,ar!==5&&ar!==26&&ar!==27||Sa===null||ya===null||(ar=mc(ia,ya),ar!=null&&ni.push(Dh(ia,ar,Sa))),Qo)break;ia=ia.return}0<ni.length&&(Na=new Ha(Na,an,null,P,qa),sr.push({event:Na,listeners:ni}))}}if((w&7)===0){e:{if(Na=p==="mouseover"||p==="pointerover",Ha=p==="mouseout"||p==="pointerout",Na&&P!==go&&(an=P.relatedTarget||P.fromElement)&&(Un(an)||an[Ca]))break e;if((Ha||Na)&&(Na=qa.window===qa?qa:(Na=qa.ownerDocument)?Na.defaultView||Na.parentWindow:window,Ha?(an=P.relatedTarget||P.toElement,Ha=ua,an=an?Un(an):null,an!==null&&(Qo=Ue(an),ni=an.tag,an!==Qo||ni!==5&&ni!==27&&ni!==6)&&(an=null)):(Ha=null,an=ua),Ha!==an)){if(ni=ys,ar="onMouseLeave",ya="onMouseEnter",ia="mouse",(p==="pointerout"||p==="pointerover")&&(ni=Tf,ar="onPointerLeave",ya="onPointerEnter",ia="pointer"),Qo=Ha==null?Na:Yr(Ha),Sa=an==null?Na:Yr(an),Na=new ni(ar,ia+"leave",Ha,P,qa),Na.target=Qo,Na.relatedTarget=Sa,ar=null,Un(qa)===ua&&(ni=new ni(ya,ia+"enter",an,P,qa),ni.target=Sa,ni.relatedTarget=Qo,ar=ni),Qo=ar,Ha&&an)t:{for(ni=Ha,ya=an,ia=0,Sa=ni;Sa;Sa=hg(Sa))ia++;for(Sa=0,ar=ya;ar;ar=hg(ar))Sa++;for(;0<ia-Sa;)ni=hg(ni),ia--;for(;0<Sa-ia;)ya=hg(ya),Sa--;for(;ia--;){if(ni===ya||ya!==null&&ni===ya.alternate)break t;ni=hg(ni),ya=hg(ya)}ni=null}else ni=null;Ha!==null&&NC(sr,Na,Ha,ni,!1),an!==null&&Qo!==null&&NC(sr,Qo,an,ni,!0)}}e:{if(Na=ua?Yr(ua):window,Ha=Na.nodeName&&Na.nodeName.toLowerCase(),Ha==="select"||Ha==="input"&&Na.type==="file")var en=vc;else if(Pr(Na))if(Dd)en=jh;else{en=Ao;var Ti=Js}else Ha=Na.nodeName,!Ha||Ha.toLowerCase()!=="input"||Na.type!=="checkbox"&&Na.type!=="radio"?ua&&Wu(ua.elementType)&&(en=vc):en=Sf;if(en&&(en=en(p,ua))){bu(sr,en,P,qa);break e}Ti&&Ti(p,Na,ua),p==="focusout"&&ua&&Na.type==="number"&&ua.memoizedProps.value!=null&&Ru(Na,"number",Na.value)}switch(Ti=ua?Yr(ua):window,p){case"focusin":(Pr(Ti)||Ti.contentEditable==="true")&&(Il=Ti,wc=ua,xu=null);break;case"focusout":xu=wc=Il=null;break;case"mousedown":Qi=!0;break;case"contextmenu":case"mouseup":case"dragend":Qi=!1,bf(sr,P,qa);break;case"selectionchange":if(Gc)break;case"keydown":case"keyup":bf(sr,P,qa)}var mn;if(xr)e:{switch(p){case"compositionstart":var In="onCompositionStart";break e;case"compositionend":In="onCompositionEnd";break e;case"compositionupdate":In="onCompositionUpdate";break e}In=void 0}else os?Ds(p,P)&&(In="onCompositionEnd"):p==="keydown"&&P.keyCode===229&&(In="onCompositionStart");In&&(Fn&&P.locale!=="ko"&&(os||In!=="onCompositionStart"?In==="onCompositionEnd"&&os&&(mn=Nd()):(dn=qa,bn="value"in dn?dn.value:dn.textContent,os=!0)),Ti=Uf(ua,In),0<Ti.length&&(In=new $o(In,p,null,P,qa),sr.push({event:In,listeners:Ti}),mn?In.data=mn:(mn=io(P),mn!==null&&(In.data=mn)))),(mn=On?Vr(p,P):ur(p,P))&&(In=Uf(ua,"onBeforeInput"),0<In.length&&(Ti=new $o("onBeforeInput","beforeinput",null,P,qa),sr.push({event:Ti,listeners:In}),Ti.data=mn)),xC(sr,p,ua,P,qa)}u0(sr,w)})}function Dh(p,w,P){return{instance:p,listener:w,currentTarget:P}}function Uf(p,w){for(var P=w+"Capture",U=[];p!==null;){var X=p,ue=X.stateNode;X=X.tag,X!==5&&X!==26&&X!==27||ue===null||(X=mc(p,P),X!=null&&U.unshift(Dh(p,X,ue)),X=mc(p,w),X!=null&&U.push(Dh(p,X,ue))),p=p.return}return U}function hg(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5&&p.tag!==27);return p||null}function NC(p,w,P,U,X){for(var ue=w._reactName,Ze=[];P!==null&&P!==U;){var ft=P,Ut=ft.alternate,ua=ft.stateNode;if(ft=ft.tag,Ut!==null&&Ut===U)break;ft!==5&&ft!==26&&ft!==27||ua===null||(Ut=ua,X?(ua=mc(P,ue),ua!=null&&Ze.unshift(Dh(P,ua,Ut))):X||(ua=mc(P,ue),ua!=null&&Ze.push(Dh(P,ua,Ut)))),P=P.return}Ze.length!==0&&p.push({event:w,listeners:Ze})}var OC=/\r\n?/g,cE=/\u0000|\uFFFD/g;function VC(p){return(typeof p=="string"?p:""+p).replace(OC,`
`).replace(cE,"")}function Bf(p,w){return w=VC(w),VC(p)===w}function ly(){}function Fs(p,w,P,U,X,ue){switch(P){case"children":typeof U=="string"?w==="body"||w==="textarea"&&U===""||Ku(p,U):(typeof U=="number"||typeof U=="bigint")&&w!=="body"&&Ku(p,""+U);break;case"className":Ui(p,"class",U);break;case"tabIndex":Ui(p,"tabindex",U);break;case"dir":case"role":case"viewBox":case"width":case"height":Ui(p,P,U);break;case"style":qo(p,U,ue);break;case"data":if(w!=="object"){Ui(p,"data",U);break}case"src":case"href":if(U===""&&(w!=="a"||P!=="href")){p.removeAttribute(P);break}if(U==null||typeof U=="function"||typeof U=="symbol"||typeof U=="boolean"){p.removeAttribute(P);break}U=zn(""+U),p.setAttribute(P,U);break;case"action":case"formAction":if(typeof U=="function"){p.setAttribute(P,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof ue=="function"&&(P==="formAction"?(w!=="input"&&Fs(p,w,"name",X.name,X,null),Fs(p,w,"formEncType",X.formEncType,X,null),Fs(p,w,"formMethod",X.formMethod,X,null),Fs(p,w,"formTarget",X.formTarget,X,null)):(Fs(p,w,"encType",X.encType,X,null),Fs(p,w,"method",X.method,X,null),Fs(p,w,"target",X.target,X,null)));if(U==null||typeof U=="symbol"||typeof U=="boolean"){p.removeAttribute(P);break}U=zn(""+U),p.setAttribute(P,U);break;case"onClick":U!=null&&(p.onclick=ly);break;case"onScroll":U!=null&&Gi("scroll",p);break;case"onScrollEnd":U!=null&&Gi("scrollend",p);break;case"dangerouslySetInnerHTML":if(U!=null){if(typeof U!="object"||!("__html"in U))throw Error(r(61));if(P=U.__html,P!=null){if(X.children!=null)throw Error(r(60));p.innerHTML=P}}break;case"multiple":p.multiple=U&&typeof U!="function"&&typeof U!="symbol";break;case"muted":p.muted=U&&typeof U!="function"&&typeof U!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(U==null||typeof U=="function"||typeof U=="boolean"||typeof U=="symbol"){p.removeAttribute("xlink:href");break}P=zn(""+U),p.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",P);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":U!=null&&typeof U!="function"&&typeof U!="symbol"?p.setAttribute(P,""+U):p.removeAttribute(P);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":U&&typeof U!="function"&&typeof U!="symbol"?p.setAttribute(P,""):p.removeAttribute(P);break;case"capture":case"download":U===!0?p.setAttribute(P,""):U!==!1&&U!=null&&typeof U!="function"&&typeof U!="symbol"?p.setAttribute(P,U):p.removeAttribute(P);break;case"cols":case"rows":case"size":case"span":U!=null&&typeof U!="function"&&typeof U!="symbol"&&!isNaN(U)&&1<=U?p.setAttribute(P,U):p.removeAttribute(P);break;case"rowSpan":case"start":U==null||typeof U=="function"||typeof U=="symbol"||isNaN(U)?p.removeAttribute(P):p.setAttribute(P,U);break;case"popover":Gi("beforetoggle",p),Gi("toggle",p),tl(p,"popover",U);break;case"xlinkActuate":Xl(p,"http://www.w3.org/1999/xlink","xlink:actuate",U);break;case"xlinkArcrole":Xl(p,"http://www.w3.org/1999/xlink","xlink:arcrole",U);break;case"xlinkRole":Xl(p,"http://www.w3.org/1999/xlink","xlink:role",U);break;case"xlinkShow":Xl(p,"http://www.w3.org/1999/xlink","xlink:show",U);break;case"xlinkTitle":Xl(p,"http://www.w3.org/1999/xlink","xlink:title",U);break;case"xlinkType":Xl(p,"http://www.w3.org/1999/xlink","xlink:type",U);break;case"xmlBase":Xl(p,"http://www.w3.org/XML/1998/namespace","xml:base",U);break;case"xmlLang":Xl(p,"http://www.w3.org/XML/1998/namespace","xml:lang",U);break;case"xmlSpace":Xl(p,"http://www.w3.org/XML/1998/namespace","xml:space",U);break;case"is":tl(p,"is",U);break;case"innerText":case"textContent":break;default:(!(2<P.length)||P[0]!=="o"&&P[0]!=="O"||P[1]!=="n"&&P[1]!=="N")&&(P=ph.get(P)||P,tl(p,P,U))}}function f0(p,w,P,U,X,ue){switch(P){case"style":qo(p,U,ue);break;case"dangerouslySetInnerHTML":if(U!=null){if(typeof U!="object"||!("__html"in U))throw Error(r(61));if(P=U.__html,P!=null){if(X.children!=null)throw Error(r(60));p.innerHTML=P}}break;case"children":typeof U=="string"?Ku(p,U):(typeof U=="number"||typeof U=="bigint")&&Ku(p,""+U);break;case"onScroll":U!=null&&Gi("scroll",p);break;case"onScrollEnd":U!=null&&Gi("scrollend",p);break;case"onClick":U!=null&&(p.onclick=ly);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ki.hasOwnProperty(P))e:{if(P[0]==="o"&&P[1]==="n"&&(X=P.endsWith("Capture"),w=P.slice(2,X?P.length-7:void 0),ue=p[Kt]||null,ue=ue!=null?ue[P]:null,typeof ue=="function"&&p.removeEventListener(w,ue,X),typeof U=="function")){typeof ue!="function"&&ue!==null&&(P in p?p[P]=null:p.hasAttribute(P)&&p.removeAttribute(P)),p.addEventListener(w,U,X);break e}P in p?p[P]=U:U===!0?p.setAttribute(P,""):tl(p,P,U)}}}function zo(p,w,P){switch(w){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Gi("error",p),Gi("load",p);var U=!1,X=!1,ue;for(ue in P)if(P.hasOwnProperty(ue)){var Ze=P[ue];if(Ze!=null)switch(ue){case"src":U=!0;break;case"srcSet":X=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,w));default:Fs(p,w,ue,Ze,P,null)}}X&&Fs(p,w,"srcSet",P.srcSet,P,null),U&&Fs(p,w,"src",P.src,P,null);return;case"input":Gi("invalid",p);var ft=ue=Ze=X=null,Ut=null,ua=null;for(U in P)if(P.hasOwnProperty(U)){var qa=P[U];if(qa!=null)switch(U){case"name":X=qa;break;case"type":Ze=qa;break;case"checked":Ut=qa;break;case"defaultChecked":ua=qa;break;case"value":ue=qa;break;case"defaultValue":ft=qa;break;case"children":case"dangerouslySetInnerHTML":if(qa!=null)throw Error(r(137,w));break;default:Fs(p,w,U,qa,P,null)}}Jl(p,ue,ft,Ut,ua,Ze,X,!1),fh(p);return;case"select":Gi("invalid",p),U=Ze=ue=null;for(X in P)if(P.hasOwnProperty(X)&&(ft=P[X],ft!=null))switch(X){case"value":ue=ft;break;case"defaultValue":Ze=ft;break;case"multiple":U=ft;default:Fs(p,w,X,ft,P,null)}w=ue,P=Ze,p.multiple=!!U,w!=null?mo(p,!!U,w,!1):P!=null&&mo(p,!!U,P,!0);return;case"textarea":Gi("invalid",p),ue=X=U=null;for(Ze in P)if(P.hasOwnProperty(Ze)&&(ft=P[Ze],ft!=null))switch(Ze){case"value":U=ft;break;case"defaultValue":X=ft;break;case"children":ue=ft;break;case"dangerouslySetInnerHTML":if(ft!=null)throw Error(r(91));break;default:Fs(p,w,Ze,ft,P,null)}Ed(p,U,X,ue),fh(p);return;case"option":for(Ut in P)if(P.hasOwnProperty(Ut)&&(U=P[Ut],U!=null))switch(Ut){case"selected":p.selected=U&&typeof U!="function"&&typeof U!="symbol";break;default:Fs(p,w,Ut,U,P,null)}return;case"dialog":Gi("cancel",p),Gi("close",p);break;case"iframe":case"object":Gi("load",p);break;case"video":case"audio":for(U=0;U<cg.length;U++)Gi(cg[U],p);break;case"image":Gi("error",p),Gi("load",p);break;case"details":Gi("toggle",p);break;case"embed":case"source":case"link":Gi("error",p),Gi("load",p);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ua in P)if(P.hasOwnProperty(ua)&&(U=P[ua],U!=null))switch(ua){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,w));default:Fs(p,w,ua,U,P,null)}return;default:if(Wu(w)){for(qa in P)P.hasOwnProperty(qa)&&(U=P[qa],U!==void 0&&f0(p,w,qa,U,P,void 0));return}}for(ft in P)P.hasOwnProperty(ft)&&(U=P[ft],U!=null&&Fs(p,w,ft,U,P,null))}function dE(p,w,P,U){switch(w){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var X=null,ue=null,Ze=null,ft=null,Ut=null,ua=null,qa=null;for(Ha in P){var sr=P[Ha];if(P.hasOwnProperty(Ha)&&sr!=null)switch(Ha){case"checked":break;case"value":break;case"defaultValue":Ut=sr;default:U.hasOwnProperty(Ha)||Fs(p,w,Ha,null,U,sr)}}for(var Na in U){var Ha=U[Na];if(sr=P[Na],U.hasOwnProperty(Na)&&(Ha!=null||sr!=null))switch(Na){case"type":ue=Ha;break;case"name":X=Ha;break;case"checked":ua=Ha;break;case"defaultChecked":qa=Ha;break;case"value":Ze=Ha;break;case"defaultValue":ft=Ha;break;case"children":case"dangerouslySetInnerHTML":if(Ha!=null)throw Error(r(137,w));break;default:Ha!==sr&&Fs(p,w,Na,Ha,U,sr)}}Go(p,Ze,ft,Ut,ua,qa,ue,X);return;case"select":Ha=Ze=ft=Na=null;for(ue in P)if(Ut=P[ue],P.hasOwnProperty(ue)&&Ut!=null)switch(ue){case"value":break;case"multiple":Ha=Ut;default:U.hasOwnProperty(ue)||Fs(p,w,ue,null,U,Ut)}for(X in U)if(ue=U[X],Ut=P[X],U.hasOwnProperty(X)&&(ue!=null||Ut!=null))switch(X){case"value":Na=ue;break;case"defaultValue":ft=ue;break;case"multiple":Ze=ue;default:ue!==Ut&&Fs(p,w,X,ue,U,Ut)}w=ft,P=Ze,U=Ha,Na!=null?mo(p,!!P,Na,!1):!!U!=!!P&&(w!=null?mo(p,!!P,w,!0):mo(p,!!P,P?[]:"",!1));return;case"textarea":Ha=Na=null;for(ft in P)if(X=P[ft],P.hasOwnProperty(ft)&&X!=null&&!U.hasOwnProperty(ft))switch(ft){case"value":break;case"children":break;default:Fs(p,w,ft,null,U,X)}for(Ze in U)if(X=U[Ze],ue=P[Ze],U.hasOwnProperty(Ze)&&(X!=null||ue!=null))switch(Ze){case"value":Na=X;break;case"defaultValue":Ha=X;break;case"children":break;case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(91));break;default:X!==ue&&Fs(p,w,Ze,X,U,ue)}Zo(p,Na,Ha);return;case"option":for(var an in P)if(Na=P[an],P.hasOwnProperty(an)&&Na!=null&&!U.hasOwnProperty(an))switch(an){case"selected":p.selected=!1;break;default:Fs(p,w,an,null,U,Na)}for(Ut in U)if(Na=U[Ut],Ha=P[Ut],U.hasOwnProperty(Ut)&&Na!==Ha&&(Na!=null||Ha!=null))switch(Ut){case"selected":p.selected=Na&&typeof Na!="function"&&typeof Na!="symbol";break;default:Fs(p,w,Ut,Na,U,Ha)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ni in P)Na=P[ni],P.hasOwnProperty(ni)&&Na!=null&&!U.hasOwnProperty(ni)&&Fs(p,w,ni,null,U,Na);for(ua in U)if(Na=U[ua],Ha=P[ua],U.hasOwnProperty(ua)&&Na!==Ha&&(Na!=null||Ha!=null))switch(ua){case"children":case"dangerouslySetInnerHTML":if(Na!=null)throw Error(r(137,w));break;default:Fs(p,w,ua,Na,U,Ha)}return;default:if(Wu(w)){for(var Qo in P)Na=P[Qo],P.hasOwnProperty(Qo)&&Na!==void 0&&!U.hasOwnProperty(Qo)&&f0(p,w,Qo,void 0,U,Na);for(qa in U)Na=U[qa],Ha=P[qa],!U.hasOwnProperty(qa)||Na===Ha||Na===void 0&&Ha===void 0||f0(p,w,qa,Na,U,Ha);return}}for(var ya in P)Na=P[ya],P.hasOwnProperty(ya)&&Na!=null&&!U.hasOwnProperty(ya)&&Fs(p,w,ya,null,U,Na);for(sr in U)Na=U[sr],Ha=P[sr],!U.hasOwnProperty(sr)||Na===Ha||Na==null&&Ha==null||Fs(p,w,sr,Na,U,Ha)}var Qd=null,DA=null;function uy(p){return p.nodeType===9?p:p.ownerDocument}function U1(p){switch(p){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function B1(p,w){if(p===0)switch(w){case"svg":return 1;case"math":return 2;default:return 0}return p===1&&w==="foreignObject"?0:p}function p0(p,w){return p==="textarea"||p==="noscript"||typeof w.children=="string"||typeof w.children=="number"||typeof w.children=="bigint"||typeof w.dangerouslySetInnerHTML=="object"&&w.dangerouslySetInnerHTML!==null&&w.dangerouslySetInnerHTML.__html!=null}var m0=null;function j1(){var p=window.event;return p&&p.type==="popstate"?p===m0?!1:(m0=p,!0):(m0=null,!1)}var nf=typeof setTimeout=="function"?setTimeout:void 0,zC=typeof clearTimeout=="function"?clearTimeout:void 0,DC=typeof Promise=="function"?Promise:void 0,hE=typeof queueMicrotask=="function"?queueMicrotask:typeof DC<"u"?function(p){return DC.resolve(null).then(p).catch(fE)}:nf;function fE(p){setTimeout(function(){throw p})}function G1(p,w){var P=w,U=0;do{var X=P.nextSibling;if(p.removeChild(P),X&&X.nodeType===8)if(P=X.data,P==="/$"){if(U===0){p.removeChild(X),GA(w);return}U--}else P!=="$"&&P!=="$?"&&P!=="$!"||U++;P=X}while(P);GA(w)}function Z1(p){var w=p.firstChild;for(w&&w.nodeType===10&&(w=w.nextSibling);w;){var P=w;switch(w=w.nextSibling,P.nodeName){case"HTML":case"HEAD":case"BODY":Z1(P),Hr(P);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(P.rel.toLowerCase()==="stylesheet")continue}p.removeChild(P)}}function pE(p,w,P,U){for(;p.nodeType===1;){var X=P;if(p.nodeName.toLowerCase()!==w.toLowerCase()){if(!U&&(p.nodeName!=="INPUT"||p.type!=="hidden"))break}else if(U){if(!p[Mr])switch(w){case"meta":if(!p.hasAttribute("itemprop"))break;return p;case"link":if(ue=p.getAttribute("rel"),ue==="stylesheet"&&p.hasAttribute("data-precedence"))break;if(ue!==X.rel||p.getAttribute("href")!==(X.href==null?null:X.href)||p.getAttribute("crossorigin")!==(X.crossOrigin==null?null:X.crossOrigin)||p.getAttribute("title")!==(X.title==null?null:X.title))break;return p;case"style":if(p.hasAttribute("data-precedence"))break;return p;case"script":if(ue=p.getAttribute("src"),(ue!==(X.src==null?null:X.src)||p.getAttribute("type")!==(X.type==null?null:X.type)||p.getAttribute("crossorigin")!==(X.crossOrigin==null?null:X.crossOrigin))&&ue&&p.hasAttribute("async")&&!p.hasAttribute("itemprop"))break;return p;default:return p}}else if(w==="input"&&p.type==="hidden"){var ue=X.name==null?null:""+X.name;if(X.type==="hidden"&&p.getAttribute("name")===ue)return p}else return p;if(p=ju(p.nextSibling),p===null)break}return null}function mE(p,w,P){if(w==="")return null;for(;p.nodeType!==3;)if((p.nodeType!==1||p.nodeName!=="INPUT"||p.type!=="hidden")&&!P||(p=ju(p.nextSibling),p===null))return null;return p}function ju(p){for(;p!=null;p=p.nextSibling){var w=p.nodeType;if(w===1||w===3)break;if(w===8){if(w=p.data,w==="$"||w==="$!"||w==="$?"||w==="F!"||w==="F")break;if(w==="/$")return null}}return p}function q1(p){p=p.previousSibling;for(var w=0;p;){if(p.nodeType===8){var P=p.data;if(P==="$"||P==="$!"||P==="$?"){if(w===0)return p;w--}else P==="/$"&&w++}p=p.previousSibling}return null}function MA(p,w,P){switch(w=uy(P),p){case"html":if(p=w.documentElement,!p)throw Error(r(452));return p;case"head":if(p=w.head,!p)throw Error(r(453));return p;case"body":if(p=w.body,!p)throw Error(r(454));return p;default:throw Error(r(451))}}var eh=new Map,H1=new Set;function fg(p){return typeof p.getRootNode=="function"?p.getRootNode():p.ownerDocument}var jf=ke.d;ke.d={f:g0,r:MC,D:IC,C:gE,L:LC,m:FC,X:UC,S:kC,M:$1};function g0(){var p=jf.f(),w=a0();return p||w}function MC(p){var w=ri(p);w!==null&&w.tag===5&&w.type==="form"?Jh(w):jf.r(p)}var Am=typeof document>"u"?null:document;function y0(p,w,P){var U=Am;if(U&&typeof w=="string"&&w){var X=no(w);X='link[rel="'+p+'"][href="'+X+'"]',typeof P=="string"&&(X+='[crossorigin="'+P+'"]'),H1.has(X)||(H1.add(X),p={rel:p,crossOrigin:P,href:w},U.querySelector(X)===null&&(w=U.createElement("link"),zo(w,"link",p),Xr(w),U.head.appendChild(w)))}}function IC(p){jf.D(p),y0("dns-prefetch",p,null)}function gE(p,w){jf.C(p,w),y0("preconnect",p,w)}function LC(p,w,P){jf.L(p,w,P);var U=Am;if(U&&p&&w){var X='link[rel="preload"][as="'+no(w)+'"]';w==="image"&&P&&P.imageSrcSet?(X+='[imagesrcset="'+no(P.imageSrcSet)+'"]',typeof P.imageSizes=="string"&&(X+='[imagesizes="'+no(P.imageSizes)+'"]')):X+='[href="'+no(p)+'"]';var ue=X;switch(w){case"style":ue=vm(p);break;case"script":ue=cy(p)}eh.has(ue)||(p=Ve({rel:"preload",href:w==="image"&&P&&P.imageSrcSet?void 0:p,as:w},P),eh.set(ue,p),U.querySelector(X)!==null||w==="style"&&U.querySelector(IA(ue))||w==="script"&&U.querySelector(dy(ue))||(w=U.createElement("link"),zo(w,"link",p),Xr(w),U.head.appendChild(w)))}}function FC(p,w){jf.m(p,w);var P=Am;if(P&&p){var U=w&&typeof w.as=="string"?w.as:"script",X='link[rel="modulepreload"][as="'+no(U)+'"][href="'+no(p)+'"]',ue=X;switch(U){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":ue=cy(p)}if(!eh.has(ue)&&(p=Ve({rel:"modulepreload",href:p},w),eh.set(ue,p),P.querySelector(X)===null)){switch(U){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(P.querySelector(dy(ue)))return}U=P.createElement("link"),zo(U,"link",p),Xr(U),P.head.appendChild(U)}}}function kC(p,w,P){jf.S(p,w,P);var U=Am;if(U&&p){var X=Cn(U).hoistableStyles,ue=vm(p);w=w||"default";var Ze=X.get(ue);if(!Ze){var ft={loading:0,preload:null};if(Ze=U.querySelector(IA(ue)))ft.loading=5;else{p=Ve({rel:"stylesheet",href:p,"data-precedence":w},P),(P=eh.get(ue))&&pg(p,P);var Ut=Ze=U.createElement("link");Xr(Ut),zo(Ut,"link",p),Ut._p=new Promise(function(ua,qa){Ut.onload=ua,Ut.onerror=qa}),Ut.addEventListener("load",function(){ft.loading|=1}),Ut.addEventListener("error",function(){ft.loading|=2}),ft.loading|=4,_m(Ze,w,U)}Ze={type:"stylesheet",instance:Ze,count:1,state:ft},X.set(ue,Ze)}}}function UC(p,w){jf.X(p,w);var P=Am;if(P&&p){var U=Cn(P).hoistableScripts,X=cy(p),ue=U.get(X);ue||(ue=P.querySelector(dy(X)),ue||(p=Ve({src:p,async:!0},w),(w=eh.get(X))&&hy(p,w),ue=P.createElement("script"),Xr(ue),zo(ue,"link",p),P.head.appendChild(ue)),ue={type:"script",instance:ue,count:1,state:null},U.set(X,ue))}}function $1(p,w){jf.M(p,w);var P=Am;if(P&&p){var U=Cn(P).hoistableScripts,X=cy(p),ue=U.get(X);ue||(ue=P.querySelector(dy(X)),ue||(p=Ve({src:p,async:!0,type:"module"},w),(w=eh.get(X))&&hy(p,w),ue=P.createElement("script"),Xr(ue),zo(ue,"link",p),P.head.appendChild(ue)),ue={type:"script",instance:ue,count:1,state:null},U.set(X,ue))}}function K1(p,w,P,U){var X=(X=wa.current)?fg(X):null;if(!X)throw Error(r(446));switch(p){case"meta":case"title":return null;case"style":return typeof P.precedence=="string"&&typeof P.href=="string"?(w=vm(P.href),P=Cn(X).hoistableStyles,U=P.get(w),U||(U={type:"style",instance:null,count:0,state:null},P.set(w,U)),U):{type:"void",instance:null,count:0,state:null};case"link":if(P.rel==="stylesheet"&&typeof P.href=="string"&&typeof P.precedence=="string"){p=vm(P.href);var ue=Cn(X).hoistableStyles,Ze=ue.get(p);if(Ze||(X=X.ownerDocument||X,Ze={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},ue.set(p,Ze),(ue=X.querySelector(IA(p)))&&!ue._p&&(Ze.instance=ue,Ze.state.loading=5),eh.has(p)||(P={rel:"preload",as:"style",href:P.href,crossOrigin:P.crossOrigin,integrity:P.integrity,media:P.media,hrefLang:P.hrefLang,referrerPolicy:P.referrerPolicy},eh.set(p,P),ue||yE(X,p,P,Ze.state))),w&&U===null)throw Error(r(528,""));return Ze}if(w&&U!==null)throw Error(r(529,""));return null;case"script":return w=P.async,P=P.src,typeof P=="string"&&w&&typeof w!="function"&&typeof w!="symbol"?(w=cy(P),P=Cn(X).hoistableScripts,U=P.get(w),U||(U={type:"script",instance:null,count:0,state:null},P.set(w,U)),U):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,p))}}function vm(p){return'href="'+no(p)+'"'}function IA(p){return'link[rel="stylesheet"]['+p+"]"}function BC(p){return Ve({},p,{"data-precedence":p.precedence,precedence:null})}function yE(p,w,P,U){p.querySelector('link[rel="preload"][as="style"]['+w+"]")?U.loading=1:(w=p.createElement("link"),U.preload=w,w.addEventListener("load",function(){return U.loading|=1}),w.addEventListener("error",function(){return U.loading|=2}),zo(w,"link",P),Xr(w),p.head.appendChild(w))}function cy(p){return'[src="'+no(p)+'"]'}function dy(p){return"script[async]"+p}function bp(p,w,P){if(w.count++,w.instance===null)switch(w.type){case"style":var U=p.querySelector('style[data-href~="'+no(P.href)+'"]');if(U)return w.instance=U,Xr(U),U;var X=Ve({},P,{"data-href":P.href,"data-precedence":P.precedence,href:null,precedence:null});return U=(p.ownerDocument||p).createElement("style"),Xr(U),zo(U,"style",X),_m(U,P.precedence,p),w.instance=U;case"stylesheet":X=vm(P.href);var ue=p.querySelector(IA(X));if(ue)return w.state.loading|=4,w.instance=ue,Xr(ue),ue;U=BC(P),(X=eh.get(X))&&pg(U,X),ue=(p.ownerDocument||p).createElement("link"),Xr(ue);var Ze=ue;return Ze._p=new Promise(function(ft,Ut){Ze.onload=ft,Ze.onerror=Ut}),zo(ue,"link",U),w.state.loading|=4,_m(ue,P.precedence,p),w.instance=ue;case"script":return ue=cy(P.src),(X=p.querySelector(dy(ue)))?(w.instance=X,Xr(X),X):(U=P,(X=eh.get(ue))&&(U=Ve({},P),hy(U,X)),p=p.ownerDocument||p,X=p.createElement("script"),Xr(X),zo(X,"link",U),p.head.appendChild(X),w.instance=X);case"void":return null;default:throw Error(r(443,w.type))}else w.type==="stylesheet"&&(w.state.loading&4)===0&&(U=w.instance,w.state.loading|=4,_m(U,P.precedence,p));return w.instance}function _m(p,w,P){for(var U=P.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),X=U.length?U[U.length-1]:null,ue=X,Ze=0;Ze<U.length;Ze++){var ft=U[Ze];if(ft.dataset.precedence===w)ue=ft;else if(ue!==X)break}ue?ue.parentNode.insertBefore(p,ue.nextSibling):(w=P.nodeType===9?P.head:P,w.insertBefore(p,w.firstChild))}function pg(p,w){p.crossOrigin==null&&(p.crossOrigin=w.crossOrigin),p.referrerPolicy==null&&(p.referrerPolicy=w.referrerPolicy),p.title==null&&(p.title=w.title)}function hy(p,w){p.crossOrigin==null&&(p.crossOrigin=w.crossOrigin),p.referrerPolicy==null&&(p.referrerPolicy=w.referrerPolicy),p.integrity==null&&(p.integrity=w.integrity)}var wm=null;function W1(p,w,P){if(wm===null){var U=new Map,X=wm=new Map;X.set(P,U)}else X=wm,U=X.get(P),U||(U=new Map,X.set(P,U));if(U.has(p))return U;for(U.set(p,null),P=P.getElementsByTagName(p),X=0;X<P.length;X++){var ue=P[X];if(!(ue[Mr]||ue[Yt]||p==="link"&&ue.getAttribute("rel")==="stylesheet")&&ue.namespaceURI!=="http://www.w3.org/2000/svg"){var Ze=ue.getAttribute(w)||"";Ze=p+Ze;var ft=U.get(Ze);ft?ft.push(ue):U.set(Ze,[ue])}}return U}function Y1(p,w,P){p=p.ownerDocument||p,p.head.insertBefore(P,w==="title"?p.querySelector("head > title"):null)}function jC(p,w,P){if(P===1||w.itemProp!=null)return!1;switch(p){case"meta":case"title":return!0;case"style":if(typeof w.precedence!="string"||typeof w.href!="string"||w.href==="")break;return!0;case"link":if(typeof w.rel!="string"||typeof w.href!="string"||w.href===""||w.onLoad||w.onError)break;switch(w.rel){case"stylesheet":return p=w.disabled,typeof w.precedence=="string"&&p==null;default:return!0}case"script":if(w.async&&typeof w.async!="function"&&typeof w.async!="symbol"&&!w.onLoad&&!w.onError&&w.src&&typeof w.src=="string")return!0}return!1}function X1(p){return!(p.type==="stylesheet"&&(p.state.loading&3)===0)}var LA=null;function AE(){}function GC(p,w,P){if(LA===null)throw Error(r(475));var U=LA;if(w.type==="stylesheet"&&(typeof P.media!="string"||matchMedia(P.media).matches!==!1)&&(w.state.loading&4)===0){if(w.instance===null){var X=vm(P.href),ue=p.querySelector(IA(X));if(ue){p=ue._p,p!==null&&typeof p=="object"&&typeof p.then=="function"&&(U.count++,U=FA.bind(U),p.then(U,U)),w.state.loading|=4,w.instance=ue,Xr(ue);return}ue=p.ownerDocument||p,P=BC(P),(X=eh.get(X))&&pg(P,X),ue=ue.createElement("link"),Xr(ue);var Ze=ue;Ze._p=new Promise(function(ft,Ut){Ze.onload=ft,Ze.onerror=Ut}),zo(ue,"link",P),w.instance=ue}U.stylesheets===null&&(U.stylesheets=new Map),U.stylesheets.set(w,p),(p=w.state.preload)&&(w.state.loading&3)===0&&(U.count++,w=FA.bind(U),p.addEventListener("load",w),p.addEventListener("error",w))}}function A0(){if(LA===null)throw Error(r(475));var p=LA;return p.stylesheets&&p.count===0&&_0(p,p.stylesheets),0<p.count?function(w){var P=setTimeout(function(){if(p.stylesheets&&_0(p,p.stylesheets),p.unsuspend){var U=p.unsuspend;p.unsuspend=null,U()}},6e4);return p.unsuspend=w,function(){p.unsuspend=null,clearTimeout(P)}}:null}function FA(){if(this.count--,this.count===0){if(this.stylesheets)_0(this,this.stylesheets);else if(this.unsuspend){var p=this.unsuspend;this.unsuspend=null,p()}}}var v0=null;function _0(p,w){p.stylesheets=null,p.unsuspend!==null&&(p.count++,v0=new Map,w.forEach(J1,p),v0=null,FA.call(p))}function J1(p,w){if(!(w.state.loading&4)){var P=v0.get(p);if(P)var U=P.get(null);else{P=new Map,v0.set(p,P);for(var X=p.querySelectorAll("link[data-precedence],style[data-precedence]"),ue=0;ue<X.length;ue++){var Ze=X[ue];(Ze.nodeName==="LINK"||Ze.getAttribute("media")!=="not all")&&(P.set(Ze.dataset.precedence,Ze),U=Ze)}U&&P.set(null,U)}X=w.instance,Ze=X.getAttribute("data-precedence"),ue=P.get(Ze)||U,ue===U&&P.set(null,X),P.set(Ze,X),this.count++,U=FA.bind(this),X.addEventListener("load",U),X.addEventListener("error",U),ue?ue.parentNode.insertBefore(X,ue.nextSibling):(p=p.nodeType===9?p.head:p,p.insertBefore(X,p.firstChild)),w.state.loading|=4}}var fy={$$typeof:F,Provider:null,Consumer:null,_currentValue:Ge,_currentValue2:Ge,_threadCount:0};function ZC(p,w,P,U,X,ue,Ze,ft){this.tag=1,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ne(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ne(0),this.hiddenUpdates=Ne(null),this.identifierPrefix=U,this.onUncaughtError=X,this.onCaughtError=ue,this.onRecoverableError=Ze,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ft,this.incompleteTransitions=new Map}function Q1(p,w,P,U,X,ue,Ze,ft,Ut,ua,qa,sr){return p=new ZC(p,w,P,Ze,ft,Ut,ua,sr),w=1,ue===!0&&(w|=24),ue=ra(3,null,null,w),p.current=ue,ue.stateNode=p,w=Yh(),w.refCount++,p.pooledCache=w,w.refCount++,ue.memoizedState={element:U,isDehydrated:P,cache:w},Nh(ue),p}function ew(p){return p?(p=Kc,p):Kc}function tw(p,w,P,U,X,ue){X=ew(X),U.context===null?U.context=X:U.pendingContext=X,U=Mf(w),U.payload={element:P},ue=ue===void 0?null:ue,ue!==null&&(U.callback=ue),P=If(p,U,w),P!==null&&(Zl(P,p,w),Lf(P,p,w))}function qC(p,w){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var P=p.retryLane;p.retryLane=P!==0&&P<w?P:w}}function w0(p,w){qC(p,w),(p=p.alternate)&&qC(p,w)}function aw(p){if(p.tag===13){var w=il(p,67108864);w!==null&&Zl(w,p,67108864),w0(p,67108864)}}var Rm=!0;function HC(p,w,P,U){var X=we.T;we.T=null;var ue=ke.p;try{ke.p=2,rw(p,w,P,U)}finally{ke.p=ue,we.T=X}}function $C(p,w,P,U){var X=we.T;we.T=null;var ue=ke.p;try{ke.p=8,rw(p,w,P,U)}finally{ke.p=ue,we.T=X}}function rw(p,w,P,U){if(Rm){var X=nw(U);if(X===null)h0(p,w,U,R0,P),lw(p,U);else if(WC(X,p,w,P,U))U.stopPropagation();else if(lw(p,U),w&4&&-1<ow.indexOf(p)){for(;X!==null;){var ue=ri(X);if(ue!==null)switch(ue.tag){case 3:if(ue=ue.stateNode,ue.current.memoizedState.isDehydrated){var Ze=ga(ue.pendingLanes);if(Ze!==0){var ft=ue;for(ft.pendingLanes|=2,ft.entangledLanes|=2;Ze;){var Ut=1<<31-$r(Ze);ft.entanglements[1]|=Ut,Ze&=~Ut}rf(ue),(zr&6)===0&&(To=ka()+500,ym(0))}}break;case 13:ft=il(ue,2),ft!==null&&Zl(ft,ue,2),a0(),w0(ue,2)}if(ue=nw(U),ue===null&&h0(p,w,U,R0,P),ue===X)break;X=ue}X!==null&&U.stopPropagation()}else h0(p,w,U,null,P)}}function nw(p){return p=gr(p),iw(p)}var R0=null;function iw(p){if(R0=null,p=Un(p),p!==null){var w=Ue(p);if(w===null)p=null;else{var P=w.tag;if(P===13){if(p=$e(w),p!==null)return p;p=null}else if(P===3){if(w.stateNode.current.memoizedState.isDehydrated)return w.tag===3?w.stateNode.containerInfo:null;p=null}else w!==p&&(p=null)}}return R0=p,null}function KC(p){switch(p){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kr()){case nn:return 2;case wn:return 8;case un:case va:return 32;case $a:return 268435456;default:return 32}default:return 32}}var sw=!1,Tm=null,xp=null,Cm=null,kA=new Map,UA=new Map,Gf=[],ow="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lw(p,w){switch(p){case"focusin":case"focusout":Tm=null;break;case"dragenter":case"dragleave":xp=null;break;case"mouseover":case"mouseout":Cm=null;break;case"pointerover":case"pointerout":kA.delete(w.pointerId);break;case"gotpointercapture":case"lostpointercapture":UA.delete(w.pointerId)}}function py(p,w,P,U,X,ue){return p===null||p.nativeEvent!==ue?(p={blockedOn:w,domEventName:P,eventSystemFlags:U,nativeEvent:ue,targetContainers:[X]},w!==null&&(w=ri(w),w!==null&&aw(w)),p):(p.eventSystemFlags|=U,w=p.targetContainers,X!==null&&w.indexOf(X)===-1&&w.push(X),p)}function WC(p,w,P,U,X){switch(w){case"focusin":return Tm=py(Tm,p,w,P,U,X),!0;case"dragenter":return xp=py(xp,p,w,P,U,X),!0;case"mouseover":return Cm=py(Cm,p,w,P,U,X),!0;case"pointerover":var ue=X.pointerId;return kA.set(ue,py(kA.get(ue)||null,p,w,P,U,X)),!0;case"gotpointercapture":return ue=X.pointerId,UA.set(ue,py(UA.get(ue)||null,p,w,P,U,X)),!0}return!1}function uw(p){var w=Un(p.target);if(w!==null){var P=Ue(w);if(P!==null){if(w=P.tag,w===13){if(w=$e(P),w!==null){p.blockedOn=w,Et(p.priority,function(){if(P.tag===13){var U=Co(),X=il(P,U);X!==null&&Zl(X,P,U),w0(P,U)}});return}}else if(w===3&&P.stateNode.current.memoizedState.isDehydrated){p.blockedOn=P.tag===3?P.stateNode.containerInfo:null;return}}}p.blockedOn=null}function BA(p){if(p.blockedOn!==null)return!1;for(var w=p.targetContainers;0<w.length;){var P=nw(p.nativeEvent);if(P===null){P=p.nativeEvent;var U=new P.constructor(P.type,P);go=U,P.target.dispatchEvent(U),go=null}else return w=ri(P),w!==null&&aw(w),p.blockedOn=P,!1;w.shift()}return!0}function cw(p,w,P){BA(p)&&P.delete(w)}function YC(){sw=!1,Tm!==null&&BA(Tm)&&(Tm=null),xp!==null&&BA(xp)&&(xp=null),Cm!==null&&BA(Cm)&&(Cm=null),kA.forEach(cw),UA.forEach(cw)}function jA(p,w){p.blockedOn===w&&(p.blockedOn=null,sw||(sw=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,YC)))}var my=null;function dw(p){my!==p&&(my=p,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){my===p&&(my=null);for(var w=0;w<p.length;w+=3){var P=p[w],U=p[w+1],X=p[w+2];if(typeof U!="function"){if(iw(U||P)===null)continue;break}var ue=ri(P);ue!==null&&(p.splice(w,3),w-=3,rd(ue,{pending:!0,data:X,method:P.method,action:U},U,X))}}))}function GA(p){function w(Ut){return jA(Ut,p)}Tm!==null&&jA(Tm,p),xp!==null&&jA(xp,p),Cm!==null&&jA(Cm,p),kA.forEach(w),UA.forEach(w);for(var P=0;P<Gf.length;P++){var U=Gf[P];U.blockedOn===p&&(U.blockedOn=null)}for(;0<Gf.length&&(P=Gf[0],P.blockedOn===null);)uw(P),P.blockedOn===null&&Gf.shift();if(P=(p.ownerDocument||p).$$reactFormReplay,P!=null)for(U=0;U<P.length;U+=3){var X=P[U],ue=P[U+1],Ze=X[Kt]||null;if(typeof ue=="function")Ze||dw(P);else if(Ze){var ft=null;if(ue&&ue.hasAttribute("formAction")){if(X=ue,Ze=ue[Kt]||null)ft=Ze.formAction;else if(iw(X)!==null)continue}else ft=Ze.action;typeof ft=="function"?P[U+1]=ft:(P.splice(U,3),U-=3),dw(P)}}}function mg(p){this._internalRoot=p}ZA.prototype.render=mg.prototype.render=function(p){var w=this._internalRoot;if(w===null)throw Error(r(409));var P=w.current,U=Co();tw(P,U,p,w,null,null)},ZA.prototype.unmount=mg.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var w=p.containerInfo;p.tag===0&&zh(),tw(p.current,2,null,p,null,null),a0(),w[Ca]=null}};function ZA(p){this._internalRoot=p}ZA.prototype.unstable_scheduleHydration=function(p){if(p){var w=Gt();p={blockedOn:null,target:p,priority:w};for(var P=0;P<Gf.length&&w!==0&&w<Gf[P].priority;P++);Gf.splice(P,0,p),P===0&&uw(p)}};var XC=e.version;if(XC!=="19.0.0")throw Error(r(527,XC,"19.0.0"));ke.findDOMNode=function(p){var w=p._reactInternals;if(w===void 0)throw typeof p.render=="function"?Error(r(188)):(p=Object.keys(p).join(","),Error(r(268,p)));return p=qe(w),p=p!==null?be(p):null,p=p===null?null:p.stateNode,p};var vE={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:we,findFiberByHostInstance:Un,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var T0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!T0.isDisabled&&T0.supportsFiber)try{yr=T0.inject(vE),Tn=T0}catch{}}return Dw.createRoot=function(p,w){if(!i(p))throw Error(r(299));var P=!1,U="",X=mp,ue=Qh,Ze=Ph,ft=null;return w!=null&&(w.unstable_strictMode===!0&&(P=!0),w.identifierPrefix!==void 0&&(U=w.identifierPrefix),w.onUncaughtError!==void 0&&(X=w.onUncaughtError),w.onCaughtError!==void 0&&(ue=w.onCaughtError),w.onRecoverableError!==void 0&&(Ze=w.onRecoverableError),w.unstable_transitionCallbacks!==void 0&&(ft=w.unstable_transitionCallbacks)),w=Q1(p,1,!1,null,null,P,U,X,ue,Ze,ft,null),p[Ca]=w.current,d0(p.nodeType===8?p.parentNode:p),new mg(w)},Dw.hydrateRoot=function(p,w,P){if(!i(p))throw Error(r(299));var U=!1,X="",ue=mp,Ze=Qh,ft=Ph,Ut=null,ua=null;return P!=null&&(P.unstable_strictMode===!0&&(U=!0),P.identifierPrefix!==void 0&&(X=P.identifierPrefix),P.onUncaughtError!==void 0&&(ue=P.onUncaughtError),P.onCaughtError!==void 0&&(Ze=P.onCaughtError),P.onRecoverableError!==void 0&&(ft=P.onRecoverableError),P.unstable_transitionCallbacks!==void 0&&(Ut=P.unstable_transitionCallbacks),P.formState!==void 0&&(ua=P.formState)),w=Q1(p,1,!0,w,P??null,U,X,ue,Ze,ft,Ut,ua),w.context=ew(null),P=w.current,U=Co(),X=Mf(U),X.callback=null,If(P,X,U),w.current.lanes=U,Ie(w,U),rf(w),p[Ca]=w.current,d0(p),new ZA(w)},Dw.version="19.0.0",Dw}var T6;function vne(){if(T6)return pN.exports;T6=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),pN.exports=Ane(),pN.exports}var _ne=vne(),Mw={},C6;function wne(){if(C6)return Mw;C6=1,Object.defineProperty(Mw,"__esModule",{value:!0}),Mw.parse=c,Mw.serialize=R;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,l=(()=>{const L=function(){};return L.prototype=Object.create(null),L})();function c(L,F){const j=new l,$=L.length;if($<2)return j;const H=(F==null?void 0:F.decode)||x;let W=0;do{const ee=L.indexOf("=",W);if(ee===-1)break;const se=L.indexOf(";",W),fe=se===-1?$:se;if(ee>fe){W=L.lastIndexOf(";",ee-1)+1;continue}const le=n(L,W,ee),me=v(L,ee,le),ge=L.slice(le,me);if(j[ge]===void 0){let Re=n(L,ee+1,fe),we=v(L,fe,Re);const Ve=H(L.slice(Re,we));j[ge]=Ve}W=fe+1}while(W<$);return j}function n(L,F,j){do{const $=L.charCodeAt(F);if($!==32&&$!==9)return F}while(++F<j);return j}function v(L,F,j){for(;F>j;){const $=L.charCodeAt(--F);if($!==32&&$!==9)return F+1}return j}function R(L,F,j){const $=(j==null?void 0:j.encode)||encodeURIComponent;if(!t.test(L))throw new TypeError(`argument name is invalid: ${L}`);const H=$(F);if(!e.test(H))throw new TypeError(`argument val is invalid: ${F}`);let W=L+"="+H;if(!j)return W;if(j.maxAge!==void 0){if(!Number.isInteger(j.maxAge))throw new TypeError(`option maxAge is invalid: ${j.maxAge}`);W+="; Max-Age="+j.maxAge}if(j.domain){if(!a.test(j.domain))throw new TypeError(`option domain is invalid: ${j.domain}`);W+="; Domain="+j.domain}if(j.path){if(!r.test(j.path))throw new TypeError(`option path is invalid: ${j.path}`);W+="; Path="+j.path}if(j.expires){if(!N(j.expires)||!Number.isFinite(j.expires.valueOf()))throw new TypeError(`option expires is invalid: ${j.expires}`);W+="; Expires="+j.expires.toUTCString()}if(j.httpOnly&&(W+="; HttpOnly"),j.secure&&(W+="; Secure"),j.partitioned&&(W+="; Partitioned"),j.priority)switch(typeof j.priority=="string"?j.priority.toLowerCase():void 0){case"low":W+="; Priority=Low";break;case"medium":W+="; Priority=Medium";break;case"high":W+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${j.priority}`)}if(j.sameSite)switch(typeof j.sameSite=="string"?j.sameSite.toLowerCase():j.sameSite){case!0:case"strict":W+="; SameSite=Strict";break;case"lax":W+="; SameSite=Lax";break;case"none":W+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${j.sameSite}`)}return W}function x(L){if(L.indexOf("%")===-1)return L;try{return decodeURIComponent(L)}catch{return L}}function N(L){return i.call(L)==="[object Date]"}return Mw}wne();/**
 * react-router v7.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var S6="popstate";function Rne(t={}){function e(i,l){let{pathname:c="/",search:n="",hash:v=""}=Bv(i.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),VD("",{pathname:c,search:n,hash:v},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function a(i,l){let c=i.document.querySelector("base"),n="";if(c&&c.getAttribute("href")){let v=i.location.href,R=v.indexOf("#");n=R===-1?v:v.slice(0,R)}return n+"#"+(typeof l=="string"?l:zR(l))}function r(i,l){Hp(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return Cne(e,a,r,t)}function gl(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Hp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Tne(){return Math.random().toString(36).substring(2,10)}function b6(t,e){return{usr:t.state,key:t.key,idx:e}}function VD(t,e,a=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Bv(e):e,state:a,key:e&&e.key||r||Tne()}}function zR({pathname:t="/",search:e="",hash:a=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function Bv(t){let e={};if(t){let a=t.indexOf("#");a>=0&&(e.hash=t.substring(a),t=t.substring(0,a));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Cne(t,e,a,r={}){let{window:i=document.defaultView,v5Compat:l=!1}=r,c=i.history,n="POP",v=null,R=x();R==null&&(R=0,c.replaceState({...c.state,idx:R},""));function x(){return(c.state||{idx:null}).idx}function N(){n="POP";let H=x(),W=H==null?null:H-R;R=H,v&&v({action:n,location:$.location,delta:W})}function L(H,W){n="PUSH";let ee=VD($.location,H,W);a&&a(ee,H),R=x()+1;let se=b6(ee,R),fe=$.createHref(ee);try{c.pushState(se,"",fe)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;i.location.assign(fe)}l&&v&&v({action:n,location:$.location,delta:1})}function F(H,W){n="REPLACE";let ee=VD($.location,H,W);a&&a(ee,H),R=x();let se=b6(ee,R),fe=$.createHref(ee);c.replaceState(se,"",fe),l&&v&&v({action:n,location:$.location,delta:0})}function j(H){let W=i.location.origin!=="null"?i.location.origin:i.location.href,ee=typeof H=="string"?H:zR(H);return ee=ee.replace(/ $/,"%20"),gl(W,`No window.location.(origin|href) available to create URL for href: ${ee}`),new URL(ee,W)}let $={get action(){return n},get location(){return t(i,c)},listen(H){if(v)throw new Error("A history only accepts one active listener");return i.addEventListener(S6,N),v=H,()=>{i.removeEventListener(S6,N),v=null}},createHref(H){return e(i,H)},createURL:j,encodeLocation(H){let W=j(H);return{pathname:W.pathname,search:W.search,hash:W.hash}},push:L,replace:F,go(H){return c.go(H)}};return $}function k$(t,e,a="/"){return Sne(t,e,a,!1)}function Sne(t,e,a,r){let i=typeof e=="string"?Bv(e):e,l=Og(i.pathname||"/",a);if(l==null)return null;let c=U$(t);bne(c);let n=null;for(let v=0;n==null&&v<c.length;++v){let R=Lne(l);n=Mne(c[v],R,r)}return n}function U$(t,e=[],a=[],r=""){let i=(l,c,n)=>{let v={relativePath:n===void 0?l.path||"":n,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};v.relativePath.startsWith("/")&&(gl(v.relativePath.startsWith(r),`Absolute route path "${v.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(r.length));let R=xg([r,v.relativePath]),x=a.concat(v);l.children&&l.children.length>0&&(gl(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${R}".`),U$(l.children,e,x,R)),!(l.path==null&&!l.index)&&e.push({path:R,score:zne(R,l.index),routesMeta:x})};return t.forEach((l,c)=>{var n;if(l.path===""||!((n=l.path)!=null&&n.includes("?")))i(l,c);else for(let v of B$(l.path))i(l,c,v)}),e}function B$(t){let e=t.split("/");if(e.length===0)return[];let[a,...r]=e,i=a.endsWith("?"),l=a.replace(/\?$/,"");if(r.length===0)return i?[l,""]:[l];let c=B$(r.join("/")),n=[];return n.push(...c.map(v=>v===""?l:[l,v].join("/"))),i&&n.push(...c),n.map(v=>t.startsWith("/")&&v===""?"/":v)}function bne(t){t.sort((e,a)=>e.score!==a.score?a.score-e.score:Dne(e.routesMeta.map(r=>r.childrenIndex),a.routesMeta.map(r=>r.childrenIndex)))}var xne=/^:[\w-]+$/,Pne=3,Ene=2,Nne=1,One=10,Vne=-2,x6=t=>t==="*";function zne(t,e){let a=t.split("/"),r=a.length;return a.some(x6)&&(r+=Vne),e&&(r+=Ene),a.filter(i=>!x6(i)).reduce((i,l)=>i+(xne.test(l)?Pne:l===""?Nne:One),r)}function Dne(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Mne(t,e,a=!1){let{routesMeta:r}=t,i={},l="/",c=[];for(let n=0;n<r.length;++n){let v=r[n],R=n===r.length-1,x=l==="/"?e:e.slice(l.length)||"/",N=Lb({path:v.relativePath,caseSensitive:v.caseSensitive,end:R},x),L=v.route;if(!N&&R&&a&&!r[r.length-1].route.index&&(N=Lb({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},x)),!N)return null;Object.assign(i,N.params),c.push({params:i,pathname:xg([l,N.pathname]),pathnameBase:Bne(xg([l,N.pathnameBase])),route:L}),N.pathnameBase!=="/"&&(l=xg([l,N.pathnameBase]))}return c}function Lb(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,r]=Ine(t.path,t.caseSensitive,t.end),i=e.match(a);if(!i)return null;let l=i[0],c=l.replace(/(.)\/+$/,"$1"),n=i.slice(1);return{params:r.reduce((R,{paramName:x,isOptional:N},L)=>{if(x==="*"){let j=n[L]||"";c=l.slice(0,l.length-j.length).replace(/(.)\/+$/,"$1")}const F=n[L];return N&&!F?R[x]=void 0:R[x]=(F||"").replace(/%2F/g,"/"),R},{}),pathname:l,pathnameBase:c,pattern:t}}function Ine(t,e=!1,a=!0){Hp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,n,v)=>(r.push({paramName:n,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Lne(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Hp(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Og(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let a=e.endsWith("/")?e.length-1:e.length,r=t.charAt(a);return r&&r!=="/"?null:t.slice(a)||"/"}function Fne(t,e="/"){let{pathname:a,search:r="",hash:i=""}=typeof t=="string"?Bv(t):t;return{pathname:a?a.startsWith("/")?a:kne(a,e):e,search:jne(r),hash:Gne(i)}}function kne(t,e){let a=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?a.length>1&&a.pop():i!=="."&&a.push(i)}),a.length>1?a.join("/"):"/"}function AN(t,e,a,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Une(t){return t.filter((e,a)=>a===0||e.route.path&&e.route.path.length>0)}function j$(t){let e=Une(t);return e.map((a,r)=>r===e.length-1?a.pathname:a.pathnameBase)}function G$(t,e,a,r=!1){let i;typeof t=="string"?i=Bv(t):(i={...t},gl(!i.pathname||!i.pathname.includes("?"),AN("?","pathname","search",i)),gl(!i.pathname||!i.pathname.includes("#"),AN("#","pathname","hash",i)),gl(!i.search||!i.search.includes("#"),AN("#","search","hash",i)));let l=t===""||i.pathname==="",c=l?"/":i.pathname,n;if(c==null)n=a;else{let N=e.length-1;if(!r&&c.startsWith("..")){let L=c.split("/");for(;L[0]==="..";)L.shift(),N-=1;i.pathname=L.join("/")}n=N>=0?e[N]:"/"}let v=Fne(i,n),R=c&&c!=="/"&&c.endsWith("/"),x=(l||c===".")&&a.endsWith("/");return!v.pathname.endsWith("/")&&(R||x)&&(v.pathname+="/"),v}var xg=t=>t.join("/").replace(/\/\/+/g,"/"),Bne=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),jne=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Gne=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Zne(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Z$=["POST","PUT","PATCH","DELETE"];new Set(Z$);var qne=["GET",...Z$];new Set(qne);var i1=ie.createContext(null);i1.displayName="DataRouter";var b2=ie.createContext(null);b2.displayName="DataRouterState";var q$=ie.createContext({isTransitioning:!1});q$.displayName="ViewTransition";var Hne=ie.createContext(new Map);Hne.displayName="Fetchers";var $ne=ie.createContext(null);$ne.displayName="Await";var Km=ie.createContext(null);Km.displayName="Navigation";var FT=ie.createContext(null);FT.displayName="Location";var Ug=ie.createContext({outlet:null,matches:[],isDataRoute:!1});Ug.displayName="Route";var h3=ie.createContext(null);h3.displayName="RouteError";function Kne(t,{relative:e}={}){gl(kT(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:r}=ie.useContext(Km),{hash:i,pathname:l,search:c}=UT(t,{relative:e}),n=l;return a!=="/"&&(n=l==="/"?a:xg([a,l])),r.createHref({pathname:n,search:c,hash:i})}function kT(){return ie.useContext(FT)!=null}function rA(){return gl(kT(),"useLocation() may be used only in the context of a <Router> component."),ie.useContext(FT).location}var H$="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function $$(t){ie.useContext(Km).static||ie.useLayoutEffect(t)}function f3(){let{isDataRoute:t}=ie.useContext(Ug);return t?oie():Wne()}function Wne(){gl(kT(),"useNavigate() may be used only in the context of a <Router> component.");let t=ie.useContext(i1),{basename:e,navigator:a}=ie.useContext(Km),{matches:r}=ie.useContext(Ug),{pathname:i}=rA(),l=JSON.stringify(j$(r)),c=ie.useRef(!1);return $$(()=>{c.current=!0}),ie.useCallback((v,R={})=>{if(Hp(c.current,H$),!c.current)return;if(typeof v=="number"){a.go(v);return}let x=G$(v,JSON.parse(l),i,R.relative==="path");t==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:xg([e,x.pathname])),(R.replace?a.replace:a.push)(x,R.state,R)},[e,a,l,i,t])}ie.createContext(null);function UT(t,{relative:e}={}){let{matches:a}=ie.useContext(Ug),{pathname:r}=rA(),i=JSON.stringify(j$(a));return ie.useMemo(()=>G$(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function Yne(t,e){return K$(t,e)}function K$(t,e,a,r){var ee;gl(kT(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:l}=ie.useContext(Km),{matches:c}=ie.useContext(Ug),n=c[c.length-1],v=n?n.params:{},R=n?n.pathname:"/",x=n?n.pathnameBase:"/",N=n&&n.route;{let se=N&&N.path||"";W$(R,!N||se.endsWith("*")||se.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${R}" (under <Route path="${se}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${se}"> to <Route path="${se==="/"?"*":`${se}/*`}">.`)}let L=rA(),F;if(e){let se=typeof e=="string"?Bv(e):e;gl(x==="/"||((ee=se.pathname)==null?void 0:ee.startsWith(x)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${se.pathname}" was given in the \`location\` prop.`),F=se}else F=L;let j=F.pathname||"/",$=j;if(x!=="/"){let se=x.replace(/^\//,"").split("/");$="/"+j.replace(/^\//,"").split("/").slice(se.length).join("/")}let H=!l&&a&&a.matches&&a.matches.length>0?a.matches:k$(t,{pathname:$});Hp(N||H!=null,`No routes matched location "${F.pathname}${F.search}${F.hash}" `),Hp(H==null||H[H.length-1].route.element!==void 0||H[H.length-1].route.Component!==void 0||H[H.length-1].route.lazy!==void 0,`Matched leaf route at location "${F.pathname}${F.search}${F.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let W=tie(H&&H.map(se=>Object.assign({},se,{params:Object.assign({},v,se.params),pathname:xg([x,i.encodeLocation?i.encodeLocation(se.pathname).pathname:se.pathname]),pathnameBase:se.pathnameBase==="/"?x:xg([x,i.encodeLocation?i.encodeLocation(se.pathnameBase).pathname:se.pathnameBase])})),c,a,r);return e&&W?ie.createElement(FT.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...F},navigationType:"POP"}},W):W}function Xne(){let t=sie(),e=Zne(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=ie.createElement(ie.Fragment,null,ie.createElement("p",null,"💿 Hey developer 👋"),ie.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ie.createElement("code",{style:l},"ErrorBoundary")," or"," ",ie.createElement("code",{style:l},"errorElement")," prop on your route.")),ie.createElement(ie.Fragment,null,ie.createElement("h2",null,"Unexpected Application Error!"),ie.createElement("h3",{style:{fontStyle:"italic"}},e),a?ie.createElement("pre",{style:i},a):null,c)}var Jne=ie.createElement(Xne,null),Qne=class extends ie.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?ie.createElement(Ug.Provider,{value:this.props.routeContext},ie.createElement(h3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function eie({routeContext:t,match:e,children:a}){let r=ie.useContext(i1);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),ie.createElement(Ug.Provider,{value:t},a)}function tie(t,e=[],a=null,r=null){if(t==null){if(!a)return null;if(a.errors)t=a.matches;else if(e.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let i=t,l=a==null?void 0:a.errors;if(l!=null){let v=i.findIndex(R=>R.route.id&&(l==null?void 0:l[R.route.id])!==void 0);gl(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,v+1))}let c=!1,n=-1;if(a)for(let v=0;v<i.length;v++){let R=i[v];if((R.route.HydrateFallback||R.route.hydrateFallbackElement)&&(n=v),R.route.id){let{loaderData:x,errors:N}=a,L=R.route.loader&&!x.hasOwnProperty(R.route.id)&&(!N||N[R.route.id]===void 0);if(R.route.lazy||L){c=!0,n>=0?i=i.slice(0,n+1):i=[i[0]];break}}}return i.reduceRight((v,R,x)=>{let N,L=!1,F=null,j=null;a&&(N=l&&R.route.id?l[R.route.id]:void 0,F=R.route.errorElement||Jne,c&&(n<0&&x===0?(W$("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),L=!0,j=null):n===x&&(L=!0,j=R.route.hydrateFallbackElement||null)));let $=e.concat(i.slice(0,x+1)),H=()=>{let W;return N?W=F:L?W=j:R.route.Component?W=ie.createElement(R.route.Component,null):R.route.element?W=R.route.element:W=v,ie.createElement(eie,{match:R,routeContext:{outlet:v,matches:$,isDataRoute:a!=null},children:W})};return a&&(R.route.ErrorBoundary||R.route.errorElement||x===0)?ie.createElement(Qne,{location:a.location,revalidation:a.revalidation,component:F,error:N,children:H(),routeContext:{outlet:null,matches:$,isDataRoute:!0}}):H()},null)}function p3(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aie(t){let e=ie.useContext(i1);return gl(e,p3(t)),e}function rie(t){let e=ie.useContext(b2);return gl(e,p3(t)),e}function nie(t){let e=ie.useContext(Ug);return gl(e,p3(t)),e}function m3(t){let e=nie(t),a=e.matches[e.matches.length-1];return gl(a.route.id,`${t} can only be used on routes that contain a unique "id"`),a.route.id}function iie(){return m3("useRouteId")}function sie(){var r;let t=ie.useContext(h3),e=rie("useRouteError"),a=m3("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[a]}function oie(){let{router:t}=aie("useNavigate"),e=m3("useNavigate"),a=ie.useRef(!1);return $$(()=>{a.current=!0}),ie.useCallback(async(i,l={})=>{Hp(a.current,H$),a.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...l}))},[t,e])}var P6={};function W$(t,e,a){!e&&!P6[t]&&(P6[t]=!0,Hp(!1,a))}ie.memo(lie);function lie({routes:t,future:e,state:a}){return K$(t,void 0,a,e)}function Kf(t){gl(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function uie({basename:t="/",children:e=null,location:a,navigationType:r="POP",navigator:i,static:l=!1}){gl(!kT(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),n=ie.useMemo(()=>({basename:c,navigator:i,static:l,future:{}}),[c,i,l]);typeof a=="string"&&(a=Bv(a));let{pathname:v="/",search:R="",hash:x="",state:N=null,key:L="default"}=a,F=ie.useMemo(()=>{let j=Og(v,c);return j==null?null:{location:{pathname:j,search:R,hash:x,state:N,key:L},navigationType:r}},[c,v,R,x,N,L,r]);return Hp(F!=null,`<Router basename="${c}"> is not able to match the URL "${v}${R}${x}" because it does not start with the basename, so the <Router> won't render anything.`),F==null?null:ie.createElement(Km.Provider,{value:n},ie.createElement(FT.Provider,{children:e,value:F}))}function cie({children:t,location:e}){return Yne(zD(t),e)}function zD(t,e=[]){let a=[];return ie.Children.forEach(t,(r,i)=>{if(!ie.isValidElement(r))return;let l=[...e,i];if(r.type===ie.Fragment){a.push.apply(a,zD(r.props.children,l));return}gl(r.type===Kf,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gl(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=zD(r.props.children,l)),a.push(c)}),a}var db="get",hb="application/x-www-form-urlencoded";function x2(t){return t!=null&&typeof t.tagName=="string"}function die(t){return x2(t)&&t.tagName.toLowerCase()==="button"}function hie(t){return x2(t)&&t.tagName.toLowerCase()==="form"}function fie(t){return x2(t)&&t.tagName.toLowerCase()==="input"}function pie(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function mie(t,e){return t.button===0&&(!e||e==="_self")&&!pie(t)}var VS=null;function gie(){if(VS===null)try{new FormData(document.createElement("form"),0),VS=!1}catch{VS=!0}return VS}var yie=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function vN(t){return t!=null&&!yie.has(t)?(Hp(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hb}"`),null):t}function Aie(t,e){let a,r,i,l,c;if(hie(t)){let n=t.getAttribute("action");r=n?Og(n,e):null,a=t.getAttribute("method")||db,i=vN(t.getAttribute("enctype"))||hb,l=new FormData(t)}else if(die(t)||fie(t)&&(t.type==="submit"||t.type==="image")){let n=t.form;if(n==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=t.getAttribute("formaction")||n.getAttribute("action");if(r=v?Og(v,e):null,a=t.getAttribute("formmethod")||n.getAttribute("method")||db,i=vN(t.getAttribute("formenctype"))||vN(n.getAttribute("enctype"))||hb,l=new FormData(n,t),!gie()){let{name:R,type:x,value:N}=t;if(x==="image"){let L=R?`${R}.`:"";l.append(`${L}x`,"0"),l.append(`${L}y`,"0")}else R&&l.append(R,N)}}else{if(x2(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=db,r=null,i=hb,c=t}return l&&i==="text/plain"&&(c=l,l=void 0),{action:r,method:a.toLowerCase(),encType:i,formData:l,body:c}}function g3(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function vie(t,e){if(t.id in e)return e[t.id];try{let a=await import(t.module);return e[t.id]=a,a}catch(a){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function _ie(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function wie(t,e,a){let r=await Promise.all(t.map(async i=>{let l=e.routes[i.route.id];if(l){let c=await vie(l,a);return c.links?c.links():[]}return[]}));return Sie(r.flat(1).filter(_ie).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function E6(t,e,a,r,i,l){let c=(v,R)=>a[R]?v.route.id!==a[R].route.id:!0,n=(v,R)=>{var x;return a[R].pathname!==v.pathname||((x=a[R].route.path)==null?void 0:x.endsWith("*"))&&a[R].params["*"]!==v.params["*"]};return l==="assets"?e.filter((v,R)=>c(v,R)||n(v,R)):l==="data"?e.filter((v,R)=>{var N;let x=r.routes[v.route.id];if(!x||!x.hasLoader)return!1;if(c(v,R)||n(v,R))return!0;if(v.route.shouldRevalidate){let L=v.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((N=a[0])==null?void 0:N.params)||{},nextUrl:new URL(t,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof L=="boolean")return L}return!0}):[]}function Rie(t,e,{includeHydrateFallback:a}={}){return Tie(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let l=[i.module];return i.clientActionModule&&(l=l.concat(i.clientActionModule)),i.clientLoaderModule&&(l=l.concat(i.clientLoaderModule)),a&&i.hydrateFallbackModule&&(l=l.concat(i.hydrateFallbackModule)),i.imports&&(l=l.concat(i.imports)),l}).flat(1))}function Tie(t){return[...new Set(t)]}function Cie(t){let e={},a=Object.keys(t).sort();for(let r of a)e[r]=t[r];return e}function Sie(t,e){let a=new Set;return new Set(e),t.reduce((r,i)=>{let l=JSON.stringify(Cie(i));return a.has(l)||(a.add(l),r.push({key:l,link:i})),r},[])}function bie(t,e){let a=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return a.pathname==="/"?a.pathname="_root.data":e&&Og(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.data`:a.pathname=`${a.pathname.replace(/\/$/,"")}.data`,a}function Y$(){let t=ie.useContext(i1);return g3(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function xie(){let t=ie.useContext(b2);return g3(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var y3=ie.createContext(void 0);y3.displayName="FrameworkContext";function X$(){let t=ie.useContext(y3);return g3(t,"You must render this element inside a <HydratedRouter> element"),t}function Pie(t,e){let a=ie.useContext(y3),[r,i]=ie.useState(!1),[l,c]=ie.useState(!1),{onFocus:n,onBlur:v,onMouseEnter:R,onMouseLeave:x,onTouchStart:N}=e,L=ie.useRef(null);ie.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let $=W=>{W.forEach(ee=>{c(ee.isIntersecting)})},H=new IntersectionObserver($,{threshold:.5});return L.current&&H.observe(L.current),()=>{H.disconnect()}}},[t]),ie.useEffect(()=>{if(r){let $=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout($)}}},[r]);let F=()=>{i(!0)},j=()=>{i(!1),c(!1)};return a?t!=="intent"?[l,L,{}]:[l,L,{onFocus:Iw(n,F),onBlur:Iw(v,j),onMouseEnter:Iw(R,F),onMouseLeave:Iw(x,j),onTouchStart:Iw(N,F)}]:[!1,L,{}]}function Iw(t,e){return a=>{t&&t(a),a.defaultPrevented||e(a)}}function Eie({page:t,...e}){let{router:a}=Y$(),r=ie.useMemo(()=>k$(a.routes,t,a.basename),[a.routes,t,a.basename]);return r?ie.createElement(Oie,{page:t,matches:r,...e}):null}function Nie(t){let{manifest:e,routeModules:a}=X$(),[r,i]=ie.useState([]);return ie.useEffect(()=>{let l=!1;return wie(t,e,a).then(c=>{l||i(c)}),()=>{l=!0}},[t,e,a]),r}function Oie({page:t,matches:e,...a}){let r=rA(),{manifest:i,routeModules:l}=X$(),{basename:c}=Y$(),{loaderData:n,matches:v}=xie(),R=ie.useMemo(()=>E6(t,e,v,i,r,"data"),[t,e,v,i,r]),x=ie.useMemo(()=>E6(t,e,v,i,r,"assets"),[t,e,v,i,r]),N=ie.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let j=new Set,$=!1;if(e.forEach(W=>{var se;let ee=i.routes[W.route.id];!ee||!ee.hasLoader||(!R.some(fe=>fe.route.id===W.route.id)&&W.route.id in n&&((se=l[W.route.id])!=null&&se.shouldRevalidate)||ee.hasClientLoader?$=!0:j.add(W.route.id))}),j.size===0)return[];let H=bie(t,c);return $&&j.size>0&&H.searchParams.set("_routes",e.filter(W=>j.has(W.route.id)).map(W=>W.route.id).join(",")),[H.pathname+H.search]},[c,n,r,i,R,e,t,l]),L=ie.useMemo(()=>Rie(x,i),[x,i]),F=Nie(x);return ie.createElement(ie.Fragment,null,N.map(j=>ie.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...a})),L.map(j=>ie.createElement("link",{key:j,rel:"modulepreload",href:j,...a})),F.map(({key:j,link:$})=>ie.createElement("link",{key:j,...$})))}function Vie(...t){return e=>{t.forEach(a=>{typeof a=="function"?a(e):a!=null&&(a.current=e)})}}var J$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{J$&&(window.__reactRouterVersion="7.3.0")}catch{}function zie({basename:t,children:e,window:a}){let r=ie.useRef();r.current==null&&(r.current=Rne({window:a,v5Compat:!0}));let i=r.current,[l,c]=ie.useState({action:i.action,location:i.location}),n=ie.useCallback(v=>{ie.startTransition(()=>c(v))},[c]);return ie.useLayoutEffect(()=>i.listen(n),[i,n]),ie.createElement(uie,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:i})}var Q$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eK=ie.forwardRef(function({onClick:e,discover:a="render",prefetch:r="none",relative:i,reloadDocument:l,replace:c,state:n,target:v,to:R,preventScrollReset:x,viewTransition:N,...L},F){let{basename:j}=ie.useContext(Km),$=typeof R=="string"&&Q$.test(R),H,W=!1;if(typeof R=="string"&&$&&(H=R,J$))try{let we=new URL(window.location.href),Ve=R.startsWith("//")?new URL(we.protocol+R):new URL(R),oe=Og(Ve.pathname,j);Ve.origin===we.origin&&oe!=null?R=oe+Ve.search+Ve.hash:W=!0}catch{Hp(!1,`<Link to="${R}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ee=Kne(R,{relative:i}),[se,fe,le]=Pie(r,L),me=Lie(R,{replace:c,state:n,target:v,preventScrollReset:x,relative:i,viewTransition:N});function ge(we){e&&e(we),we.defaultPrevented||me(we)}let Re=ie.createElement("a",{...L,...le,href:H||ee,onClick:W||l?e:ge,ref:Vie(F,fe),target:v,"data-discover":!$&&a==="render"?"true":void 0});return se&&!$?ie.createElement(ie.Fragment,null,Re,ie.createElement(Eie,{page:ee})):Re});eK.displayName="Link";var Die=ie.forwardRef(function({"aria-current":e="page",caseSensitive:a=!1,className:r="",end:i=!1,style:l,to:c,viewTransition:n,children:v,...R},x){let N=UT(c,{relative:R.relative}),L=rA(),F=ie.useContext(b2),{navigator:j,basename:$}=ie.useContext(Km),H=F!=null&&jie(N)&&n===!0,W=j.encodeLocation?j.encodeLocation(N).pathname:N.pathname,ee=L.pathname,se=F&&F.navigation&&F.navigation.location?F.navigation.location.pathname:null;a||(ee=ee.toLowerCase(),se=se?se.toLowerCase():null,W=W.toLowerCase()),se&&$&&(se=Og(se,$)||se);const fe=W!=="/"&&W.endsWith("/")?W.length-1:W.length;let le=ee===W||!i&&ee.startsWith(W)&&ee.charAt(fe)==="/",me=se!=null&&(se===W||!i&&se.startsWith(W)&&se.charAt(W.length)==="/"),ge={isActive:le,isPending:me,isTransitioning:H},Re=le?e:void 0,we;typeof r=="function"?we=r(ge):we=[r,le?"active":null,me?"pending":null,H?"transitioning":null].filter(Boolean).join(" ");let Ve=typeof l=="function"?l(ge):l;return ie.createElement(eK,{...R,"aria-current":Re,className:we,ref:x,style:Ve,to:c,viewTransition:n},typeof v=="function"?v(ge):v)});Die.displayName="NavLink";var Mie=ie.forwardRef(({discover:t="render",fetcherKey:e,navigate:a,reloadDocument:r,replace:i,state:l,method:c=db,action:n,onSubmit:v,relative:R,preventScrollReset:x,viewTransition:N,...L},F)=>{let j=Uie(),$=Bie(n,{relative:R}),H=c.toLowerCase()==="get"?"get":"post",W=typeof n=="string"&&Q$.test(n),ee=se=>{if(v&&v(se),se.defaultPrevented)return;se.preventDefault();let fe=se.nativeEvent.submitter,le=(fe==null?void 0:fe.getAttribute("formmethod"))||c;j(fe||se.currentTarget,{fetcherKey:e,method:le,navigate:a,replace:i,state:l,relative:R,preventScrollReset:x,viewTransition:N})};return ie.createElement("form",{ref:F,method:H,action:$,onSubmit:r?v:ee,...L,"data-discover":!W&&t==="render"?"true":void 0})});Mie.displayName="Form";function Iie(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tK(t){let e=ie.useContext(i1);return gl(e,Iie(t)),e}function Lie(t,{target:e,replace:a,state:r,preventScrollReset:i,relative:l,viewTransition:c}={}){let n=f3(),v=rA(),R=UT(t,{relative:l});return ie.useCallback(x=>{if(mie(x,e)){x.preventDefault();let N=a!==void 0?a:zR(v)===zR(R);n(t,{replace:N,state:r,preventScrollReset:i,relative:l,viewTransition:c})}},[v,n,R,a,r,e,t,i,l,c])}var Fie=0,kie=()=>`__${String(++Fie)}__`;function Uie(){let{router:t}=tK("useSubmit"),{basename:e}=ie.useContext(Km),a=iie();return ie.useCallback(async(r,i={})=>{let{action:l,method:c,encType:n,formData:v,body:R}=Aie(r,e);if(i.navigate===!1){let x=i.fetcherKey||kie();await t.fetch(x,a,i.action||l,{preventScrollReset:i.preventScrollReset,formData:v,body:R,formMethod:i.method||c,formEncType:i.encType||n,flushSync:i.flushSync})}else await t.navigate(i.action||l,{preventScrollReset:i.preventScrollReset,formData:v,body:R,formMethod:i.method||c,formEncType:i.encType||n,replace:i.replace,state:i.state,fromRouteId:a,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,a])}function Bie(t,{relative:e}={}){let{basename:a}=ie.useContext(Km),r=ie.useContext(Ug);gl(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),l={...UT(t||".",{relative:e})},c=rA();if(t==null){l.search=c.search;let n=new URLSearchParams(l.search),v=n.getAll("index");if(v.some(x=>x==="")){n.delete("index"),v.filter(N=>N).forEach(N=>n.append("index",N));let x=n.toString();l.search=x?`?${x}`:""}}return(!t||t===".")&&i.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(l.pathname=l.pathname==="/"?a:xg([a,l.pathname])),zR(l)}function jie(t,e={}){let a=ie.useContext(q$);gl(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=tK("useViewTransitionState"),i=UT(t,{relative:e.relative});if(!a.isTransitioning)return!1;let l=Og(a.currentLocation.pathname,r)||a.currentLocation.pathname,c=Og(a.nextLocation.pathname,r)||a.nextLocation.pathname;return Lb(i.pathname,c)!=null||Lb(i.pathname,l)!=null}new TextEncoder;var s1=F$(),N6={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aK=function(t){const e=[];let a=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[a++]=i:i<2048?(e[a++]=i>>6|192,e[a++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[a++]=i>>18|240,e[a++]=i>>12&63|128,e[a++]=i>>6&63|128,e[a++]=i&63|128):(e[a++]=i>>12|224,e[a++]=i>>6&63|128,e[a++]=i&63|128)}return e},Gie=function(t){const e=[];let a=0,r=0;for(;a<t.length;){const i=t[a++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const l=t[a++];e[r++]=String.fromCharCode((i&31)<<6|l&63)}else if(i>239&&i<365){const l=t[a++],c=t[a++],n=t[a++],v=((i&7)<<18|(l&63)<<12|(c&63)<<6|n&63)-65536;e[r++]=String.fromCharCode(55296+(v>>10)),e[r++]=String.fromCharCode(56320+(v&1023))}else{const l=t[a++],c=t[a++];e[r++]=String.fromCharCode((i&15)<<12|(l&63)<<6|c&63)}}return e.join("")},rK={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const a=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const l=t[i],c=i+1<t.length,n=c?t[i+1]:0,v=i+2<t.length,R=v?t[i+2]:0,x=l>>2,N=(l&3)<<4|n>>4;let L=(n&15)<<2|R>>6,F=R&63;v||(F=64,c||(L=64)),r.push(a[x],a[N],a[L],a[F])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(aK(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Gie(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const a=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const l=a[t.charAt(i++)],n=i<t.length?a[t.charAt(i)]:0;++i;const R=i<t.length?a[t.charAt(i)]:64;++i;const N=i<t.length?a[t.charAt(i)]:64;if(++i,l==null||n==null||R==null||N==null)throw new Zie;const L=l<<2|n>>4;if(r.push(L),R!==64){const F=n<<4&240|R>>2;if(r.push(F),N!==64){const j=R<<6&192|N;r.push(j)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Zie extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qie=function(t){const e=aK(t);return rK.encodeByteArray(e,!0)},Fb=function(t){return qie(t).replace(/\./g,"")},nK=function(t){try{return rK.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hie(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $ie=()=>Hie().__FIREBASE_DEFAULTS__,Kie=()=>{if(typeof process>"u"||typeof N6>"u")return;const t=N6.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Wie=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&nK(t[1]);return e&&JSON.parse(e)},P2=()=>{try{return $ie()||Kie()||Wie()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},iK=t=>{var e,a;return(a=(e=P2())===null||e===void 0?void 0:e.emulatorHosts)===null||a===void 0?void 0:a[t]},sK=t=>{const e=iK(t);if(!e)return;const a=e.lastIndexOf(":");if(a<=0||a+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(a+1),10);return e[0]==="["?[e.substring(1,a-1),r]:[e.substring(0,a),r]},oK=()=>{var t;return(t=P2())===null||t===void 0?void 0:t.config},lK=t=>{var e;return(e=P2())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yie{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,a)=>{this.resolve=e,this.reject=a})}wrapCallback(e){return(a,r)=>{a?this.reject(a):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(a):e(a,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uK(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const a={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Fb(JSON.stringify(a)),Fb(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Xie(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bd())}function Jie(){var t;const e=(t=P2())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Qie(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ese(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tse(){const t=bd();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ase(){try{return typeof indexedDB=="object"}catch{return!1}}function rse(){return new Promise((t,e)=>{try{let a=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),a||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{a=!1},i.onerror=()=>{var l;e(((l=i.error)===null||l===void 0?void 0:l.message)||"")}}catch(a){e(a)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nse="FirebaseError";class Wm extends Error{constructor(e,a,r){super(a),this.code=e,this.customData=r,this.name=nse,Object.setPrototypeOf(this,Wm.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,BT.prototype.create)}}class BT{constructor(e,a,r){this.service=e,this.serviceName=a,this.errors=r}create(e,...a){const r=a[0]||{},i=`${this.service}/${e}`,l=this.errors[e],c=l?ise(l,r):"Error",n=`${this.serviceName}: ${c} (${i}).`;return new Wm(i,n,r)}}function ise(t,e){return t.replace(sse,(a,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const sse=/\{\$([^}]+)}/g;function ose(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function kb(t,e){if(t===e)return!0;const a=Object.keys(t),r=Object.keys(e);for(const i of a){if(!r.includes(i))return!1;const l=t[i],c=e[i];if(O6(l)&&O6(c)){if(!kb(l,c))return!1}else if(l!==c)return!1}for(const i of r)if(!a.includes(i))return!1;return!0}function O6(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(t){const e=[];for(const[a,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(a)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(a)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function rR(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,l]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(l)}}),e}function nR(t){const e=t.indexOf("?");if(!e)return"";const a=t.indexOf("#",e);return t.substring(e,a>0?a:void 0)}function lse(t,e){const a=new use(t,e);return a.subscribe.bind(a)}class use{constructor(e,a){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=a,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(a=>{a.next(e)})}error(e){this.forEachObserver(a=>{a.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,a,r){let i;if(e===void 0&&a===void 0&&r===void 0)throw new Error("Missing Observer.");cse(e,["next","error","complete"])?i=e:i={next:e,error:a,complete:r},i.next===void 0&&(i.next=_N),i.error===void 0&&(i.error=_N),i.complete===void 0&&(i.complete=_N);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let a=0;a<this.observers.length;a++)this.sendOne(a,e)}sendOne(e,a){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{a(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cse(t,e){if(typeof t!="object"||t===null)return!1;for(const a of e)if(a in t&&typeof t[a]=="function")return!0;return!1}function _N(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(t){return t&&t._delegate?t._delegate:t}class Yy{constructor(e,a,r){this.name=e,this.instanceFactory=a,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dse{constructor(e,a){this.name=e,this.container=a,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const a=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(a)){const r=new Yie;if(this.instancesDeferred.set(a,r),this.isInitialized(a)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:a});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(a).promise}getImmediate(e){var a;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(a=e==null?void 0:e.optional)!==null&&a!==void 0?a:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fse(e))try{this.getOrInitializeService({instanceIdentifier:rv})}catch{}for(const[a,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(a);try{const l=this.getOrInitializeService({instanceIdentifier:i});r.resolve(l)}catch{}}}}clearInstance(e=rv){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(a=>"INTERNAL"in a).map(a=>a.INTERNAL.delete()),...e.filter(a=>"_delete"in a).map(a=>a._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=rv){return this.instances.has(e)}getOptions(e=rv){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:a={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:a});for(const[l,c]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(l);r===n&&c.resolve(i)}return i}onInit(e,a){var r;const i=this.normalizeInstanceIdentifier(a),l=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(i,l);const c=this.instances.get(i);return c&&e(c,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,a){const r=this.onInitCallbacks.get(a);if(r)for(const i of r)try{i(e,a)}catch{}}getOrInitializeService({instanceIdentifier:e,options:a={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hse(e),options:a}),this.instances.set(e,r),this.instancesOptions.set(e,a),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=rv){return this.component?this.component.multipleInstances?e:rv:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hse(t){return t===rv?void 0:t}function fse(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pse{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const a=this.getProvider(e.name);if(a.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);a.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const a=new dse(e,this);return this.providers.set(e,a),a}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rs;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Rs||(Rs={}));const mse={debug:Rs.DEBUG,verbose:Rs.VERBOSE,info:Rs.INFO,warn:Rs.WARN,error:Rs.ERROR,silent:Rs.SILENT},gse=Rs.INFO,yse={[Rs.DEBUG]:"log",[Rs.VERBOSE]:"log",[Rs.INFO]:"info",[Rs.WARN]:"warn",[Rs.ERROR]:"error"},Ase=(t,e,...a)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=yse[e];if(i)console[i](`[${r}]  ${t.name}:`,...a);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class A3{constructor(e){this.name=e,this._logLevel=gse,this._logHandler=Ase,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Rs))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mse[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Rs.DEBUG,...e),this._logHandler(this,Rs.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Rs.VERBOSE,...e),this._logHandler(this,Rs.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Rs.INFO,...e),this._logHandler(this,Rs.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Rs.WARN,...e),this._logHandler(this,Rs.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Rs.ERROR,...e),this._logHandler(this,Rs.ERROR,...e)}}const vse=(t,e)=>e.some(a=>t instanceof a);let V6,z6;function _se(){return V6||(V6=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wse(){return z6||(z6=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cK=new WeakMap,DD=new WeakMap,dK=new WeakMap,wN=new WeakMap,v3=new WeakMap;function Rse(t){const e=new Promise((a,r)=>{const i=()=>{t.removeEventListener("success",l),t.removeEventListener("error",c)},l=()=>{a(qy(t.result)),i()},c=()=>{r(t.error),i()};t.addEventListener("success",l),t.addEventListener("error",c)});return e.then(a=>{a instanceof IDBCursor&&cK.set(a,t)}).catch(()=>{}),v3.set(e,t),e}function Tse(t){if(DD.has(t))return;const e=new Promise((a,r)=>{const i=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",c),t.removeEventListener("abort",c)},l=()=>{a(),i()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",l),t.addEventListener("error",c),t.addEventListener("abort",c)});DD.set(t,e)}let MD={get(t,e,a){if(t instanceof IDBTransaction){if(e==="done")return DD.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dK.get(t);if(e==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return qy(t[e])},set(t,e,a){return t[e]=a,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Cse(t){MD=t(MD)}function Sse(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...a){const r=t.call(RN(this),e,...a);return dK.set(r,e.sort?e.sort():[e]),qy(r)}:wse().includes(t)?function(...e){return t.apply(RN(this),e),qy(cK.get(this))}:function(...e){return qy(t.apply(RN(this),e))}}function bse(t){return typeof t=="function"?Sse(t):(t instanceof IDBTransaction&&Tse(t),vse(t,_se())?new Proxy(t,MD):t)}function qy(t){if(t instanceof IDBRequest)return Rse(t);if(wN.has(t))return wN.get(t);const e=bse(t);return e!==t&&(wN.set(t,e),v3.set(e,t)),e}const RN=t=>v3.get(t);function xse(t,e,{blocked:a,upgrade:r,blocking:i,terminated:l}={}){const c=indexedDB.open(t,e),n=qy(c);return r&&c.addEventListener("upgradeneeded",v=>{r(qy(c.result),v.oldVersion,v.newVersion,qy(c.transaction),v)}),a&&c.addEventListener("blocked",v=>a(v.oldVersion,v.newVersion,v)),n.then(v=>{l&&v.addEventListener("close",()=>l()),i&&v.addEventListener("versionchange",R=>i(R.oldVersion,R.newVersion,R))}).catch(()=>{}),n}const Pse=["get","getKey","getAll","getAllKeys","count"],Ese=["put","add","delete","clear"],TN=new Map;function D6(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(TN.get(e))return TN.get(e);const a=e.replace(/FromIndex$/,""),r=e!==a,i=Ese.includes(a);if(!(a in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Pse.includes(a)))return;const l=async function(c,...n){const v=this.transaction(c,i?"readwrite":"readonly");let R=v.store;return r&&(R=R.index(n.shift())),(await Promise.all([R[a](...n),i&&v.done]))[0]};return TN.set(e,l),l}Cse(t=>({...t,get:(e,a,r)=>D6(e,a)||t.get(e,a,r),has:(e,a)=>!!D6(e,a)||t.has(e,a)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nse{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(a=>{if(Ose(a)){const r=a.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(a=>a).join(" ")}}function Ose(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ID="@firebase/app",M6="0.9.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv=new A3("@firebase/app"),Vse="@firebase/app-compat",zse="@firebase/analytics-compat",Dse="@firebase/analytics",Mse="@firebase/app-check-compat",Ise="@firebase/app-check",Lse="@firebase/auth",Fse="@firebase/auth-compat",kse="@firebase/database",Use="@firebase/database-compat",Bse="@firebase/functions",jse="@firebase/functions-compat",Gse="@firebase/installations",Zse="@firebase/installations-compat",qse="@firebase/messaging",Hse="@firebase/messaging-compat",$se="@firebase/performance",Kse="@firebase/performance-compat",Wse="@firebase/remote-config",Yse="@firebase/remote-config-compat",Xse="@firebase/storage",Jse="@firebase/storage-compat",Qse="@firebase/firestore",eoe="@firebase/firestore-compat",toe="firebase",aoe="9.23.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD="[DEFAULT]",roe={[ID]:"fire-core",[Vse]:"fire-core-compat",[Dse]:"fire-analytics",[zse]:"fire-analytics-compat",[Ise]:"fire-app-check",[Mse]:"fire-app-check-compat",[Lse]:"fire-auth",[Fse]:"fire-auth-compat",[kse]:"fire-rtdb",[Use]:"fire-rtdb-compat",[Bse]:"fire-fn",[jse]:"fire-fn-compat",[Gse]:"fire-iid",[Zse]:"fire-iid-compat",[qse]:"fire-fcm",[Hse]:"fire-fcm-compat",[$se]:"fire-perf",[Kse]:"fire-perf-compat",[Wse]:"fire-rc",[Yse]:"fire-rc-compat",[Xse]:"fire-gcs",[Jse]:"fire-gcs-compat",[Qse]:"fire-fst",[eoe]:"fire-fst-compat","fire-js":"fire-js",[toe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub=new Map,FD=new Map;function noe(t,e){try{t.container.addComponent(e)}catch(a){bv.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,a)}}function xv(t){const e=t.name;if(FD.has(e))return bv.debug(`There were multiple attempts to register component ${e}.`),!1;FD.set(e,t);for(const a of Ub.values())noe(a,t);return!0}function E2(t,e){const a=t.container.getProvider("heartbeat").getImmediate({optional:!0});return a&&a.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ioe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Hy=new BT("app","Firebase",ioe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class soe{constructor(e,a,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},a),this._name=a.name,this._automaticDataCollectionEnabled=a.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Yy("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hy.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv=aoe;function hK(t,e={}){let a=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:LD,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Hy.create("bad-app-name",{appName:String(i)});if(a||(a=oK()),!a)throw Hy.create("no-options");const l=Ub.get(i);if(l){if(kb(a,l.options)&&kb(r,l.config))return l;throw Hy.create("duplicate-app",{appName:i})}const c=new pse(i);for(const v of FD.values())c.addComponent(v);const n=new soe(a,r,c);return Ub.set(i,n),n}function _3(t=LD){const e=Ub.get(t);if(!e&&t===LD&&oK())return hK();if(!e)throw Hy.create("no-app",{appName:t});return e}function Lm(t,e,a){var r;let i=(r=roe[t])!==null&&r!==void 0?r:t;a&&(i+=`-${a}`);const l=i.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const n=[`Unable to register library "${i}" with version "${e}":`];l&&n.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&c&&n.push("and"),c&&n.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bv.warn(n.join(" "));return}xv(new Yy(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ooe="firebase-heartbeat-database",loe=1,DR="firebase-heartbeat-store";let CN=null;function fK(){return CN||(CN=xse(ooe,loe,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(DR)}}}).catch(t=>{throw Hy.create("idb-open",{originalErrorMessage:t.message})})),CN}async function uoe(t){try{return await(await fK()).transaction(DR).objectStore(DR).get(pK(t))}catch(e){if(e instanceof Wm)bv.warn(e.message);else{const a=Hy.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bv.warn(a.message)}}}async function I6(t,e){try{const r=(await fK()).transaction(DR,"readwrite");await r.objectStore(DR).put(e,pK(t)),await r.done}catch(a){if(a instanceof Wm)bv.warn(a.message);else{const r=Hy.create("idb-set",{originalErrorMessage:a==null?void 0:a.message});bv.warn(r.message)}}}function pK(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const coe=1024,doe=30*24*60*60*1e3;class hoe{constructor(e){this.container=e,this._heartbeatsCache=null;const a=this.container.getProvider("app").getImmediate();this._storage=new poe(a),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=L6();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const l=new Date(i.date).valueOf();return Date.now()-l<=doe}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=L6(),{heartbeatsToSend:a,unsentEntries:r}=foe(this._heartbeatsCache.heartbeats),i=Fb(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function L6(){return new Date().toISOString().substring(0,10)}function foe(t,e=coe){const a=[];let r=t.slice();for(const i of t){const l=a.find(c=>c.agent===i.agent);if(l){if(l.dates.push(i.date),F6(a)>e){l.dates.pop();break}}else if(a.push({agent:i.agent,dates:[i.date]}),F6(a)>e){a.pop();break}r=r.slice(1)}return{heartbeatsToSend:a,unsentEntries:r}}class poe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ase()?rse().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await uoe(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var a;if(await this._canUseIndexedDBPromise){const i=await this.read();return I6(this.app,{lastSentHeartbeatDate:(a=e.lastSentHeartbeatDate)!==null&&a!==void 0?a:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var a;if(await this._canUseIndexedDBPromise){const i=await this.read();return I6(this.app,{lastSentHeartbeatDate:(a=e.lastSentHeartbeatDate)!==null&&a!==void 0?a:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function F6(t){return Fb(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function moe(t){xv(new Yy("platform-logger",e=>new Nse(e),"PRIVATE")),xv(new Yy("heartbeat",e=>new hoe(e),"PRIVATE")),Lm(ID,M6,t),Lm(ID,M6,"esm2017"),Lm("fire-js","")}moe("");var goe="firebase",yoe="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lm(goe,yoe,"app");function w3(t,e){var a={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(a[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(a[r[i]]=t[r[i]]);return a}function mK(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Aoe=mK,gK=new BT("auth","Firebase",mK());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb=new A3("@firebase/auth");function voe(t,...e){Bb.logLevel<=Rs.WARN&&Bb.warn(`Auth (${jv}): ${t}`,...e)}function fb(t,...e){Bb.logLevel<=Rs.ERROR&&Bb.error(`Auth (${jv}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(t,...e){throw R3(t,...e)}function Fm(t,...e){return R3(t,...e)}function _oe(t,e,a){const r=Object.assign(Object.assign({},Aoe()),{[e]:a});return new BT("auth","Firebase",r).create(e,{appName:t.name})}function R3(t,...e){if(typeof t!="string"){const a=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(a,...r)}return gK.create(t,...e)}function ii(t,e,...a){if(!t)throw R3(e,...a)}function _g(t){const e="INTERNAL ASSERTION FAILED: "+t;throw fb(e),new Error(e)}function Vg(t,e){t||_g(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function woe(){return k6()==="http:"||k6()==="https:"}function k6(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Roe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(woe()||Qie()||"connection"in navigator)?navigator.onLine:!0}function Toe(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e,a){this.shortDelay=e,this.longDelay=a,Vg(a>e,"Short delay should be less than long delay!"),this.isMobile=Xie()||ese()}get(){return Roe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T3(t,e){Vg(t.emulator,"Emulator should always be set here");const{url:a}=t.emulator;return e?`${a}${e.startsWith("/")?e.slice(1):e}`:a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yK{static initialize(e,a,r){this.fetchImpl=e,a&&(this.headersImpl=a),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;_g("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;_g("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;_g("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Coe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Soe=new GT(3e4,6e4);function o1(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function l1(t,e,a,r,i={}){return AK(t,i,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const n=jT(Object.assign({key:t.config.apiKey},c)).slice(1),v=await t._getAdditionalHeaders();return v["Content-Type"]="application/json",t.languageCode&&(v["X-Firebase-Locale"]=t.languageCode),yK.fetch()(vK(t,t.config.apiHost,a,n),Object.assign({method:e,headers:v,referrerPolicy:"no-referrer"},l))})}async function AK(t,e,a){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Coe),e);try{const i=new boe(t),l=await Promise.race([a(),i.promise]);i.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw zS(t,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const n=l.ok?c.errorMessage:c.error.message,[v,R]=n.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw zS(t,"credential-already-in-use",c);if(v==="EMAIL_EXISTS")throw zS(t,"email-already-in-use",c);if(v==="USER_DISABLED")throw zS(t,"user-disabled",c);const x=r[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(R)throw _oe(t,x,R);$p(t,x)}}catch(i){if(i instanceof Wm)throw i;$p(t,"network-request-failed",{message:String(i)})}}async function ZT(t,e,a,r,i={}){const l=await l1(t,e,a,r,i);return"mfaPendingCredential"in l&&$p(t,"multi-factor-auth-required",{_serverResponse:l}),l}function vK(t,e,a,r){const i=`${e}${a}?${r}`;return t.config.emulator?T3(t.config,i):`${t.config.apiScheme}://${i}`}class boe{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((a,r)=>{this.timer=setTimeout(()=>r(Fm(this.auth,"network-request-failed")),Soe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function zS(t,e,a){const r={appName:t.name};a.email&&(r.email=a.email),a.phoneNumber&&(r.phoneNumber=a.phoneNumber);const i=Fm(t,e,r);return i.customData._tokenResponse=a,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xoe(t,e){return l1(t,"POST","/v1/accounts:delete",e)}async function Poe(t,e){return l1(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Eoe(t,e=!1){const a=yl(t),r=await a.getIdToken(e),i=C3(r);ii(i&&i.exp&&i.auth_time&&i.iat,a.auth,"internal-error");const l=typeof i.firebase=="object"?i.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:i,token:r,authTime:mR(SN(i.auth_time)),issuedAtTime:mR(SN(i.iat)),expirationTime:mR(SN(i.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function SN(t){return Number(t)*1e3}function C3(t){const[e,a,r]=t.split(".");if(e===void 0||a===void 0||r===void 0)return fb("JWT malformed, contained fewer than 3 sections"),null;try{const i=nK(a);return i?JSON.parse(i):(fb("Failed to decode base64 JWT payload"),null)}catch(i){return fb("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Noe(t){const e=C3(t);return ii(e,"internal-error"),ii(typeof e.exp<"u","internal-error"),ii(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(t,e,a=!1){if(a)return e;try{return await e}catch(r){throw r instanceof Wm&&Ooe(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Ooe({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Voe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var a;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((a=this.user.stsTokenManager.expirationTime)!==null&&a!==void 0?a:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const a=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},a)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _K{constructor(e,a){this.createdAt=e,this.lastLoginAt=a,this._initializeTime()}_initializeTime(){this.lastSignInTime=mR(this.lastLoginAt),this.creationTime=mR(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jb(t){var e;const a=t.auth,r=await t.getIdToken(),i=await MR(t,Poe(a,{idToken:r}));ii(i==null?void 0:i.users.length,a,"internal-error");const l=i.users[0];t._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?Moe(l.providerUserInfo):[],n=Doe(t.providerData,c),v=t.isAnonymous,R=!(t.email&&l.passwordHash)&&!(n!=null&&n.length),x=v?R:!1,N={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:n,metadata:new _K(l.createdAt,l.lastLoginAt),isAnonymous:x};Object.assign(t,N)}async function zoe(t){const e=yl(t);await jb(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Doe(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Moe(t){return t.map(e=>{var{providerId:a}=e,r=w3(e,["providerId"]);return{providerId:a,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ioe(t,e){const a=await AK(t,{},async()=>{const r=jT({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:l}=t.config,c=vK(t,i,"/v1/token",`key=${l}`),n=await t._getAdditionalHeaders();return n["Content-Type"]="application/x-www-form-urlencoded",yK.fetch()(c,{method:"POST",headers:n,body:r})});return{accessToken:a.access_token,expiresIn:a.expires_in,refreshToken:a.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ii(e.idToken,"internal-error"),ii(typeof e.idToken<"u","internal-error"),ii(typeof e.refreshToken<"u","internal-error");const a="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Noe(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,a)}async getToken(e,a=!1){return ii(!this.accessToken||this.refreshToken,e,"user-token-expired"),!a&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,a){const{accessToken:r,refreshToken:i,expiresIn:l}=await Ioe(e,a);this.updateTokensAndExpiration(r,i,Number(l))}updateTokensAndExpiration(e,a,r){this.refreshToken=a||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,a){const{refreshToken:r,accessToken:i,expirationTime:l}=a,c=new IR;return r&&(ii(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(ii(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),l&&(ii(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new IR,this.toJSON())}_performRefresh(){return _g("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(t,e){ii(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class vv{constructor(e){var{uid:a,auth:r,stsTokenManager:i}=e,l=w3(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Voe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=a,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new _K(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const a=await MR(this,this.stsTokenManager.getToken(this.auth,e));return ii(a,this.auth,"internal-error"),this.accessToken!==a&&(this.accessToken=a,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),a}getIdTokenResult(e){return Eoe(this,e)}reload(){return zoe(this)}_assign(e){this!==e&&(ii(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(a=>Object.assign({},a)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const a=new vv(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return a.metadata._copy(this.metadata),a}_onReload(e){ii(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,a=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),a&&await jb(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await MR(this,xoe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,a){var r,i,l,c,n,v,R,x;const N=(r=a.displayName)!==null&&r!==void 0?r:void 0,L=(i=a.email)!==null&&i!==void 0?i:void 0,F=(l=a.phoneNumber)!==null&&l!==void 0?l:void 0,j=(c=a.photoURL)!==null&&c!==void 0?c:void 0,$=(n=a.tenantId)!==null&&n!==void 0?n:void 0,H=(v=a._redirectEventId)!==null&&v!==void 0?v:void 0,W=(R=a.createdAt)!==null&&R!==void 0?R:void 0,ee=(x=a.lastLoginAt)!==null&&x!==void 0?x:void 0,{uid:se,emailVerified:fe,isAnonymous:le,providerData:me,stsTokenManager:ge}=a;ii(se&&ge,e,"internal-error");const Re=IR.fromJSON(this.name,ge);ii(typeof se=="string",e,"internal-error"),Cy(N,e.name),Cy(L,e.name),ii(typeof fe=="boolean",e,"internal-error"),ii(typeof le=="boolean",e,"internal-error"),Cy(F,e.name),Cy(j,e.name),Cy($,e.name),Cy(H,e.name),Cy(W,e.name),Cy(ee,e.name);const we=new vv({uid:se,auth:e,email:L,emailVerified:fe,displayName:N,isAnonymous:le,photoURL:j,phoneNumber:F,tenantId:$,stsTokenManager:Re,createdAt:W,lastLoginAt:ee});return me&&Array.isArray(me)&&(we.providerData=me.map(Ve=>Object.assign({},Ve))),H&&(we._redirectEventId=H),we}static async _fromIdTokenResponse(e,a,r=!1){const i=new IR;i.updateFromServerResponse(a);const l=new vv({uid:a.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await jb(l),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6=new Map;function wg(t){Vg(t instanceof Function,"Expected a class definition");let e=U6.get(t);return e?(Vg(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,U6.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wK{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,a){this.storage[e]=a}async _get(e){const a=this.storage[e];return a===void 0?null:a}async _remove(e){delete this.storage[e]}_addListener(e,a){}_removeListener(e,a){}}wK.type="NONE";const B6=wK;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(t,e,a){return`firebase:${t}:${e}:${a}`}class s_{constructor(e,a,r){this.persistence=e,this.auth=a,this.userKey=r;const{config:i,name:l}=this.auth;this.fullUserKey=pb(this.userKey,i.apiKey,l),this.fullPersistenceKey=pb("persistence",i.apiKey,l),this.boundEventHandler=a._onStorageEvent.bind(a),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?vv._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const a=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,a)return this.setCurrentUser(a)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,a,r="authUser"){if(!a.length)return new s_(wg(B6),e,r);const i=(await Promise.all(a.map(async R=>{if(await R._isAvailable())return R}))).filter(R=>R);let l=i[0]||wg(B6);const c=pb(r,e.config.apiKey,e.name);let n=null;for(const R of a)try{const x=await R._get(c);if(x){const N=vv._fromJSON(e,x);R!==l&&(n=N),l=R;break}}catch{}const v=i.filter(R=>R._shouldAllowMigration);return!l._shouldAllowMigration||!v.length?new s_(l,e,r):(l=v[0],n&&await l._set(c,n.toJSON()),await Promise.all(a.map(async R=>{if(R!==l)try{await R._remove(c)}catch{}})),new s_(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j6(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(CK(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(RK(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bK(e))return"Blackberry";if(xK(e))return"Webos";if(S3(e))return"Safari";if((e.includes("chrome/")||TK(e))&&!e.includes("edge/"))return"Chrome";if(SK(e))return"Android";{const a=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(a);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function RK(t=bd()){return/firefox\//i.test(t)}function S3(t=bd()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TK(t=bd()){return/crios\//i.test(t)}function CK(t=bd()){return/iemobile/i.test(t)}function SK(t=bd()){return/android/i.test(t)}function bK(t=bd()){return/blackberry/i.test(t)}function xK(t=bd()){return/webos/i.test(t)}function N2(t=bd()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Loe(t=bd()){var e;return N2(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Foe(){return tse()&&document.documentMode===10}function PK(t=bd()){return N2(t)||SK(t)||xK(t)||bK(t)||/windows phone/i.test(t)||CK(t)}function koe(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EK(t,e=[]){let a;switch(t){case"Browser":a=j6(bd());break;case"Worker":a=`${j6(bd())}-${t}`;break;default:a=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${a}/JsCore/${jv}/${r}`}async function NK(t,e){return l1(t,"GET","/v2/recaptchaConfig",o1(t,e))}function G6(t){return t!==void 0&&t.enterprise!==void 0}class OK{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(a=>a.provider==="EMAIL_PASSWORD_PROVIDER"&&a.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uoe(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function VK(t){return new Promise((e,a)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const l=Fm("internal-error");l.customData=i,a(l)},r.type="text/javascript",r.charset="UTF-8",Uoe().appendChild(r)})}function Boe(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const joe="https://www.google.com/recaptcha/enterprise.js?render=",Goe="recaptcha-enterprise",Zoe="NO_RECAPTCHA";class zK{constructor(e){this.type=Goe,this.auth=u1(e)}async verify(e="verify",a=!1){async function r(l){if(!a){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,n)=>{NK(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(v=>{if(v.recaptchaKey===void 0)n(new Error("recaptcha Enterprise site key undefined"));else{const R=new OK(v);return l.tenantId==null?l._agentRecaptchaConfig=R:l._tenantRecaptchaConfigs[l.tenantId]=R,c(R.siteKey)}}).catch(v=>{n(v)})})}function i(l,c,n){const v=window.grecaptcha;G6(v)?v.enterprise.ready(()=>{v.enterprise.execute(l,{action:e}).then(R=>{c(R)}).catch(()=>{c(Zoe)})}):n(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((l,c)=>{r(this.auth).then(n=>{if(!a&&G6(window.grecaptcha))i(n,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}VK(joe+n).then(()=>{i(n,l,c)}).catch(v=>{c(v)})}}).catch(n=>{c(n)})})}}async function Gb(t,e,a,r=!1){const i=new zK(t);let l;try{l=await i.verify(a)}catch{l=await i.verify(a,!0)}const c=Object.assign({},e);return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qoe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,a){const r=l=>new Promise((c,n)=>{try{const v=e(l);c(v)}catch(v){n(v)}});r.onAbort=a,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const a=[];try{for(const r of this.queue)await r(e),r.onAbort&&a.push(r.onAbort)}catch(r){a.reverse();for(const i of a)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hoe{constructor(e,a,r,i){this.app=e,this.heartbeatServiceProvider=a,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Z6(this),this.idTokenSubscription=new Z6(this),this.beforeStateQueue=new qoe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gK,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,a){return a&&(this._popupRedirectResolver=wg(a)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await s_.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(a),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var a;const r=await this.assertedPersistence.getCurrentUser();let i=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId,n=i==null?void 0:i._redirectEventId,v=await this.tryRedirectSignIn(e);(!c||c===n)&&(v!=null&&v.user)&&(i=v.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ii(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let a=null;try{a=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return a}async reloadAndSetCurrentUserOrClear(e){try{await jb(e)}catch(a){if((a==null?void 0:a.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Toe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const a=e?yl(e):null;return a&&ii(a.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(a&&a._clone(this))}async _updateCurrentUser(e,a=!1){if(!this._deleted)return e&&ii(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),a||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(wg(e))})}async initializeRecaptchaConfig(){const e=await NK(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),a=new OK(e);this.tenantId==null?this._agentRecaptchaConfig=a:this._tenantRecaptchaConfigs[this.tenantId]=a,a.emailPasswordEnabled&&new zK(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new BT("auth","Firebase",e())}onAuthStateChanged(e,a,r){return this.registerStateListener(this.authStateSubscription,e,a,r)}beforeAuthStateChanged(e,a){return this.beforeStateQueue.pushCallback(e,a)}onIdTokenChanged(e,a,r){return this.registerStateListener(this.idTokenSubscription,e,a,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,a){const r=await this.getOrInitRedirectPersistenceManager(a);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const a=e&&wg(e)||this._popupRedirectResolver;ii(a,this,"argument-error"),this.redirectPersistenceManager=await s_.create(this,[wg(a._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var a,r;return this._isInitialized&&await this.queue(async()=>{}),((a=this._currentUser)===null||a===void 0?void 0:a._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,a;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(a=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&a!==void 0?a:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,a,r,i){if(this._deleted)return()=>{};const l=typeof a=="function"?a:a.next.bind(a),c=this._isInitialized?Promise.resolve():this._initializationPromise;return ii(c,this,"internal-error"),c.then(()=>l(this.currentUser)),typeof a=="function"?e.addObserver(a,r,i):e.addObserver(a)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ii(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=EK(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const a={"X-Client-Version":this.clientVersion};this.app.options.appId&&(a["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(a["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(a["X-Firebase-AppCheck"]=i),a}async _getAppCheckToken(){var e;const a=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return a!=null&&a.error&&voe(`Error while retrieving App Check token: ${a.error}`),a==null?void 0:a.token}}function u1(t){return yl(t)}class Z6{constructor(e){this.auth=e,this.observer=null,this.addObserver=lse(a=>this.observer=a)}get next(){return ii(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $oe(t,e){const a=E2(t,"auth");if(a.isInitialized()){const i=a.getImmediate(),l=a.getOptions();if(kb(l,e??{}))return i;$p(i,"already-initialized")}return a.initialize({options:e})}function Koe(t,e){const a=(e==null?void 0:e.persistence)||[],r=(Array.isArray(a)?a:[a]).map(wg);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Woe(t,e,a){const r=u1(t);ii(r._canInitEmulator,r,"emulator-config-failed"),ii(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,l=DK(e),{host:c,port:n}=Yoe(e),v=n===null?"":`:${n}`;r.config.emulator={url:`${l}//${c}${v}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:c,port:n,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:i})}),Xoe()}function DK(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Yoe(t){const e=DK(t),a=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!a)return{host:"",port:null};const r=a[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const l=i[1];return{host:l,port:q6(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:q6(c)}}}function q6(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Xoe(){function t(){const e=document.createElement("p"),a=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",a.position="fixed",a.width="100%",a.backgroundColor="#ffffff",a.border=".1em solid #000000",a.color="#b50000",a.bottom="0px",a.left="0px",a.margin="0px",a.zIndex="10000",a.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e,a){this.providerId=e,this.signInMethod=a}toJSON(){return _g("not implemented")}_getIdTokenResponse(e){return _g("not implemented")}_linkToIdToken(e,a){return _g("not implemented")}_getReauthenticationResolver(e){return _g("not implemented")}}async function Joe(t,e){return l1(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bN(t,e){return ZT(t,"POST","/v1/accounts:signInWithPassword",o1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qoe(t,e){return ZT(t,"POST","/v1/accounts:signInWithEmailLink",o1(t,e))}async function ele(t,e){return ZT(t,"POST","/v1/accounts:signInWithEmailLink",o1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR extends b3{constructor(e,a,r,i=null){super("password",r),this._email=e,this._password=a,this._tenantId=i}static _fromEmailAndPassword(e,a){return new LR(e,a,"password")}static _fromEmailAndCode(e,a,r=null){return new LR(e,a,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const a=typeof e=="string"?JSON.parse(e):e;if(a!=null&&a.email&&(a!=null&&a.password)){if(a.signInMethod==="password")return this._fromEmailAndPassword(a.email,a.password);if(a.signInMethod==="emailLink")return this._fromEmailAndCode(a.email,a.password,a.tenantId)}return null}async _getIdTokenResponse(e){var a;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((a=e._getRecaptchaConfig())===null||a===void 0)&&a.emailPasswordEnabled){const i=await Gb(e,r,"signInWithPassword");return bN(e,i)}else return bN(e,r).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const l=await Gb(e,r,"signInWithPassword");return bN(e,l)}else return Promise.reject(i)});case"emailLink":return Qoe(e,{email:this._email,oobCode:this._password});default:$p(e,"internal-error")}}async _linkToIdToken(e,a){switch(this.signInMethod){case"password":return Joe(e,{idToken:a,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return ele(e,{idToken:a,email:this._email,oobCode:this._password});default:$p(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o_(t,e){return ZT(t,"POST","/v1/accounts:signInWithIdp",o1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tle="http://localhost";class Pv extends b3{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const a=new Pv(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(a.idToken=e.idToken),e.accessToken&&(a.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(a.nonce=e.nonce),e.pendingToken&&(a.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(a.accessToken=e.oauthToken,a.secret=e.oauthTokenSecret):$p("argument-error"),a}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const a=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=a,l=w3(a,["providerId","signInMethod"]);if(!r||!i)return null;const c=new Pv(r,i);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const a=this.buildRequest();return o_(e,a)}_linkToIdToken(e,a){const r=this.buildRequest();return r.idToken=a,o_(e,r)}_getReauthenticationResolver(e){const a=this.buildRequest();return a.autoCreate=!1,o_(e,a)}buildRequest(){const e={requestUri:tle,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const a={};this.idToken&&(a.id_token=this.idToken),this.accessToken&&(a.access_token=this.accessToken),this.secret&&(a.oauth_token_secret=this.secret),a.providerId=this.providerId,this.nonce&&!this.pendingToken&&(a.nonce=this.nonce),e.postBody=jT(a)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ale(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function rle(t){const e=rR(nR(t)).link,a=e?rR(nR(e)).deep_link_id:null,r=rR(nR(t)).deep_link_id;return(r?rR(nR(r)).link:null)||r||a||e||t}class x3{constructor(e){var a,r,i,l,c,n;const v=rR(nR(e)),R=(a=v.apiKey)!==null&&a!==void 0?a:null,x=(r=v.oobCode)!==null&&r!==void 0?r:null,N=ale((i=v.mode)!==null&&i!==void 0?i:null);ii(R&&x&&N,"argument-error"),this.apiKey=R,this.operation=N,this.code=x,this.continueUrl=(l=v.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=v.languageCode)!==null&&c!==void 0?c:null,this.tenantId=(n=v.tenantId)!==null&&n!==void 0?n:null}static parseLink(e){const a=rle(e);try{return new x3(a)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(){this.providerId=c1.PROVIDER_ID}static credential(e,a){return LR._fromEmailAndPassword(e,a)}static credentialWithLink(e,a){const r=x3.parseLink(a);return ii(r,"argument-error"),LR._fromEmailAndCode(e,r.code,r.tenantId)}}c1.PROVIDER_ID="password";c1.EMAIL_PASSWORD_SIGN_IN_METHOD="password";c1.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MK{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT extends MK{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy extends qT{constructor(){super("facebook.com")}static credential(e){return Pv._fromParams({providerId:zy.PROVIDER_ID,signInMethod:zy.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zy.credentialFromTaggedObject(e)}static credentialFromError(e){return zy.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zy.credential(e.oauthAccessToken)}catch{return null}}}zy.FACEBOOK_SIGN_IN_METHOD="facebook.com";zy.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy extends qT{constructor(){super("google.com"),this.addScope("profile")}static credential(e,a){return Pv._fromParams({providerId:Dy.PROVIDER_ID,signInMethod:Dy.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:a})}static credentialFromResult(e){return Dy.credentialFromTaggedObject(e)}static credentialFromError(e){return Dy.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:a,oauthAccessToken:r}=e;if(!a&&!r)return null;try{return Dy.credential(a,r)}catch{return null}}}Dy.GOOGLE_SIGN_IN_METHOD="google.com";Dy.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My extends qT{constructor(){super("github.com")}static credential(e){return Pv._fromParams({providerId:My.PROVIDER_ID,signInMethod:My.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return My.credentialFromTaggedObject(e)}static credentialFromError(e){return My.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return My.credential(e.oauthAccessToken)}catch{return null}}}My.GITHUB_SIGN_IN_METHOD="github.com";My.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy extends qT{constructor(){super("twitter.com")}static credential(e,a){return Pv._fromParams({providerId:Iy.PROVIDER_ID,signInMethod:Iy.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:a})}static credentialFromResult(e){return Iy.credentialFromTaggedObject(e)}static credentialFromError(e){return Iy.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:a,oauthTokenSecret:r}=e;if(!a||!r)return null;try{return Iy.credential(a,r)}catch{return null}}}Iy.TWITTER_SIGN_IN_METHOD="twitter.com";Iy.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xN(t,e){return ZT(t,"POST","/v1/accounts:signUp",o1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,a,r,i=!1){const l=await vv._fromIdTokenResponse(e,r,i),c=H6(r);return new Ev({user:l,providerId:c,_tokenResponse:r,operationType:a})}static async _forOperation(e,a,r){await e._updateTokensIfNecessary(r,!0);const i=H6(r);return new Ev({user:e,providerId:i,_tokenResponse:r,operationType:a})}}function H6(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb extends Wm{constructor(e,a,r,i){var l;super(a.code,a.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Zb.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:a.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,a,r,i){return new Zb(e,a,r,i)}}function IK(t,e,a,r){return(e==="reauthenticate"?a._getReauthenticationResolver(t):a._getIdTokenResponse(t)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Zb._fromErrorAndOperation(t,l,e,r):l})}async function nle(t,e,a=!1){const r=await MR(t,e._linkToIdToken(t.auth,await t.getIdToken()),a);return Ev._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ile(t,e,a=!1){const{auth:r}=t,i="reauthenticate";try{const l=await MR(t,IK(r,i,e,t),a);ii(l.idToken,r,"internal-error");const c=C3(l.idToken);ii(c,r,"internal-error");const{sub:n}=c;return ii(t.uid===n,r,"user-mismatch"),Ev._forOperation(t,i,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&$p(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LK(t,e,a=!1){const r="signIn",i=await IK(t,r,e),l=await Ev._fromIdTokenResponse(t,r,i);return a||await t._updateCurrentUser(l.user),l}async function sle(t,e){return LK(u1(t),e)}async function ole(t,e,a){var r;const i=u1(t),l={returnSecureToken:!0,email:e,password:a,clientType:"CLIENT_TYPE_WEB"};let c;if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const R=await Gb(i,l,"signUpPassword");c=xN(i,R)}else c=xN(i,l).catch(async R=>{if(R.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const x=await Gb(i,l,"signUpPassword");return xN(i,x)}else return Promise.reject(R)});const n=await c.catch(R=>Promise.reject(R)),v=await Ev._fromIdTokenResponse(i,"signIn",n);return await i._updateCurrentUser(v.user),v}function lle(t,e,a){return sle(yl(t),c1.credential(e,a))}function ule(t,e,a,r){return yl(t).onIdTokenChanged(e,a,r)}function cle(t,e,a){return yl(t).beforeAuthStateChanged(e,a)}const qb="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FK{constructor(e,a){this.storageRetriever=e,this.type=a}_isAvailable(){try{return this.storage?(this.storage.setItem(qb,"1"),this.storage.removeItem(qb),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,a){return this.storage.setItem(e,JSON.stringify(a)),Promise.resolve()}_get(e){const a=this.storage.getItem(e);return Promise.resolve(a?JSON.parse(a):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dle(){const t=bd();return S3(t)||N2(t)}const hle=1e3,fle=10;class kK extends FK{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,a)=>this.onStorageEvent(e,a),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=dle()&&koe(),this.fallbackToPolling=PK(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const a of Object.keys(this.listeners)){const r=this.storage.getItem(a),i=this.localCache[a];r!==i&&e(a,i,r)}}onStorageEvent(e,a=!1){if(!e.key){this.forAllChangedKeys((c,n,v)=>{this.notifyListeners(c,v)});return}const r=e.key;if(a?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const c=this.storage.getItem(r);if(e.newValue!==c)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!a)return}const i=()=>{const c=this.storage.getItem(r);!a&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);Foe()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,fle):i()}notifyListeners(e,a){this.localCache[e]=a;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(a&&JSON.parse(a))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,a,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:a,newValue:r}),!0)})},hle)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,a){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(a)}_removeListener(e,a){this.listeners[e]&&(this.listeners[e].delete(a),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,a){await super._set(e,a),this.localCache[e]=JSON.stringify(a)}async _get(e){const a=await super._get(e);return this.localCache[e]=JSON.stringify(a),a}async _remove(e){await super._remove(e),delete this.localCache[e]}}kK.type="LOCAL";const ple=kK;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UK extends FK{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,a){}_removeListener(e,a){}}UK.type="SESSION";const BK=UK;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mle(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(a){return{fulfilled:!1,reason:a}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const a=this.receivers.find(i=>i.isListeningto(e));if(a)return a;const r=new O2(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const a=e,{eventId:r,eventType:i,data:l}=a.data,c=this.handlersMap[i];if(!(c!=null&&c.size))return;a.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const n=Array.from(c).map(async R=>R(a.origin,l)),v=await mle(n);a.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:v})}_subscribe(e,a){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(a)}_unsubscribe(e,a){this.handlersMap[e]&&a&&this.handlersMap[e].delete(a),(!a||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}O2.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P3(t="",e=10){let a="";for(let r=0;r<e;r++)a+=Math.floor(Math.random()*10);return t+a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gle{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,a,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let l,c;return new Promise((n,v)=>{const R=P3("",20);i.port1.start();const x=setTimeout(()=>{v(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(N){const L=N;if(L.data.eventId===R)switch(L.data.status){case"ack":clearTimeout(x),l=setTimeout(()=>{v(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),n(L.data.response);break;default:clearTimeout(x),clearTimeout(l),v(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:R,data:a},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(){return window}function yle(t){km().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jK(){return typeof km().WorkerGlobalScope<"u"&&typeof km().importScripts=="function"}async function Ale(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vle(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function _le(){return jK()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GK="firebaseLocalStorageDb",wle=1,Hb="firebaseLocalStorage",ZK="fbase_key";class HT{constructor(e){this.request=e}toPromise(){return new Promise((e,a)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{a(this.request.error)})})}}function V2(t,e){return t.transaction([Hb],e?"readwrite":"readonly").objectStore(Hb)}function Rle(){const t=indexedDB.deleteDatabase(GK);return new HT(t).toPromise()}function UD(){const t=indexedDB.open(GK,wle);return new Promise((e,a)=>{t.addEventListener("error",()=>{a(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Hb,{keyPath:ZK})}catch(i){a(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Hb)?e(r):(r.close(),await Rle(),e(await UD()))})})}async function $6(t,e,a){const r=V2(t,!0).put({[ZK]:e,value:a});return new HT(r).toPromise()}async function Tle(t,e){const a=V2(t,!1).get(e),r=await new HT(a).toPromise();return r===void 0?null:r.value}function K6(t,e){const a=V2(t,!0).delete(e);return new HT(a).toPromise()}const Cle=800,Sle=3;class qK{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await UD(),this.db)}async _withRetries(e){let a=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(a++>Sle)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jK()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=O2._getInstance(_le()),this.receiver._subscribe("keyChanged",async(e,a)=>({keyProcessed:(await this._poll()).includes(a.key)})),this.receiver._subscribe("ping",async(e,a)=>["keyChanged"])}async initializeSender(){var e,a;if(this.activeServiceWorker=await Ale(),!this.activeServiceWorker)return;this.sender=new gle(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((a=r[0])===null||a===void 0)&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vle()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await UD();return await $6(e,qb,"1"),await K6(e,qb),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,a){return this._withPendingWrite(async()=>(await this._withRetries(r=>$6(r,e,a)),this.localCache[e]=a,this.notifyServiceWorker(e)))}async _get(e){const a=await this._withRetries(r=>Tle(r,e));return this.localCache[e]=a,a}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(a=>K6(a,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const l=V2(i,!1).getAll();return new HT(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const a=[],r=new Set;for(const{fbase_key:i,value:l}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(l)&&(this.notifyListeners(i,l),a.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),a.push(i));return a}notifyListeners(e,a){this.localCache[e]=a;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(a)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Cle)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,a){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(a)}_removeListener(e,a){this.listeners[e]&&(this.listeners[e].delete(a),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qK.type="LOCAL";const ble=qK;new GT(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xle(t,e){return e?wg(e):(ii(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3 extends b3{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return o_(e,this._buildIdpRequest())}_linkToIdToken(e,a){return o_(e,this._buildIdpRequest(a))}_getReauthenticationResolver(e){return o_(e,this._buildIdpRequest())}_buildIdpRequest(e){const a={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(a.idToken=e),a}}function Ple(t){return LK(t.auth,new E3(t),t.bypassAuthState)}function Ele(t){const{auth:e,user:a}=t;return ii(a,e,"internal-error"),ile(a,new E3(t),t.bypassAuthState)}async function Nle(t){const{auth:e,user:a}=t;return ii(a,e,"internal-error"),nle(a,new E3(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HK{constructor(e,a,r,i,l=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(a)?a:[a]}execute(){return new Promise(async(e,a)=>{this.pendingPromise={resolve:e,reject:a};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:a,sessionId:r,postBody:i,tenantId:l,error:c,type:n}=e;if(c){this.reject(c);return}const v={auth:this.auth,requestUri:a,sessionId:r,tenantId:l||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(n)(v))}catch(R){this.reject(R)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ple;case"linkViaPopup":case"linkViaRedirect":return Nle;case"reauthViaPopup":case"reauthViaRedirect":return Ele;default:$p(this.auth,"internal-error")}}resolve(e){Vg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ole=new GT(2e3,1e4);class X0 extends HK{constructor(e,a,r,i,l){super(e,a,i,l),this.provider=r,this.authWindow=null,this.pollId=null,X0.currentPopupAction&&X0.currentPopupAction.cancel(),X0.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ii(e,this.auth,"internal-error"),e}async onExecution(){Vg(this.filter.length===1,"Popup operations only handle one event");const e=P3();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(a=>{this.reject(a)}),this.resolver._isIframeWebStorageSupported(this.auth,a=>{a||this.reject(Fm(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Fm(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,X0.currentPopupAction=null}pollUserCancellation(){const e=()=>{var a,r;if(!((r=(a=this.authWindow)===null||a===void 0?void 0:a.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fm(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Ole.get())};e()}}X0.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vle="pendingRedirect",mb=new Map;class zle extends HK{constructor(e,a,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],a,void 0,r),this.eventId=null}async execute(){let e=mb.get(this.auth._key());if(!e){try{const r=await Dle(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(a){e=()=>Promise.reject(a)}mb.set(this.auth._key(),e)}return this.bypassAuthState||mb.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const a=await this.auth._redirectUserForId(e.eventId);if(a)return this.user=a,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Dle(t,e){const a=Lle(e),r=Ile(t);if(!await r._isAvailable())return!1;const i=await r._get(a)==="true";return await r._remove(a),i}function Mle(t,e){mb.set(t._key(),e)}function Ile(t){return wg(t._redirectPersistence)}function Lle(t){return pb(Vle,t.config.apiKey,t.name)}async function Fle(t,e,a=!1){const r=u1(t),i=xle(r,e),c=await new zle(r,i,a).execute();return c&&!a&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kle=10*60*1e3;class Ule{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let a=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(a=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ble(e)||(this.hasHandledPotentialRedirect=!0,a||(this.queuedRedirectEvent=e,a=!0)),a}sendToConsumer(e,a){var r;if(e.error&&!$K(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";a.onError(Fm(this.auth,i))}else a.onAuthEvent(e)}isEventForConsumer(e,a){const r=a.eventId===null||!!e.eventId&&e.eventId===a.eventId;return a.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kle&&this.cachedEventUids.clear(),this.cachedEventUids.has(W6(e))}saveEventToCache(e){this.cachedEventUids.add(W6(e)),this.lastProcessedEventTime=Date.now()}}function W6(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $K({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Ble(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $K(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jle(t,e={}){return l1(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gle=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zle=/^https?/;async function qle(t){if(t.config.emulator)return;const{authorizedDomains:e}=await jle(t);for(const a of e)try{if(Hle(a))return}catch{}$p(t,"unauthorized-domain")}function Hle(t){const e=kD(),{protocol:a,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&r===""?a==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):a==="chrome-extension:"&&c.hostname===r}if(!Zle.test(a))return!1;if(Gle.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $le=new GT(3e4,6e4);function Y6(){const t=km().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let a=0;a<t.CP.length;a++)t.CP[a]=null}}function Kle(t){return new Promise((e,a)=>{var r,i,l;function c(){Y6(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Y6(),a(Fm(t,"network-request-failed"))},timeout:$le.get()})}if(!((i=(r=km().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((l=km().gapi)===null||l===void 0)&&l.load)c();else{const n=Boe("iframefcb");return km()[n]=()=>{gapi.load?c():a(Fm(t,"network-request-failed"))},VK(`https://apis.google.com/js/api.js?onload=${n}`).catch(v=>a(v))}}).catch(e=>{throw gb=null,e})}let gb=null;function Wle(t){return gb=gb||Kle(t),gb}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yle=new GT(5e3,15e3),Xle="__/auth/iframe",Jle="emulator/auth/iframe",Qle={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eue=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tue(t){const e=t.config;ii(e.authDomain,t,"auth-domain-config-required");const a=e.emulator?T3(e,Jle):`https://${t.config.authDomain}/${Xle}`,r={apiKey:e.apiKey,appName:t.name,v:jv},i=eue.get(t.config.apiHost);i&&(r.eid=i);const l=t._getFrameworks();return l.length&&(r.fw=l.join(",")),`${a}?${jT(r).slice(1)}`}async function aue(t){const e=await Wle(t),a=km().gapi;return ii(a,t,"internal-error"),e.open({where:document.body,url:tue(t),messageHandlersFilter:a.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qle,dontclear:!0},r=>new Promise(async(i,l)=>{await r.restyle({setHideOnLeave:!1});const c=Fm(t,"network-request-failed"),n=km().setTimeout(()=>{l(c)},Yle.get());function v(){km().clearTimeout(n),i(r)}r.ping(v).then(v,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rue={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nue=500,iue=600,sue="_blank",oue="http://localhost";class X6{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lue(t,e,a,r=nue,i=iue){const l=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let n="";const v=Object.assign(Object.assign({},rue),{width:r.toString(),height:i.toString(),top:l,left:c}),R=bd().toLowerCase();a&&(n=TK(R)?sue:a),RK(R)&&(e=e||oue,v.scrollbars="yes");const x=Object.entries(v).reduce((L,[F,j])=>`${L}${F}=${j},`,"");if(Loe(R)&&n!=="_self")return uue(e||"",n),new X6(null);const N=window.open(e||"",n,x);ii(N,t,"popup-blocked");try{N.focus()}catch{}return new X6(N)}function uue(t,e){const a=document.createElement("a");a.href=t,a.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),a.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cue="__/auth/handler",due="emulator/auth/handler",hue=encodeURIComponent("fac");async function J6(t,e,a,r,i,l){ii(t.config.authDomain,t,"auth-domain-config-required"),ii(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:a,redirectUrl:r,v:jv,eventId:i};if(e instanceof MK){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",ose(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,N]of Object.entries({}))c[x]=N}if(e instanceof qT){const x=e.getScopes().filter(N=>N!=="");x.length>0&&(c.scopes=x.join(","))}t.tenantId&&(c.tid=t.tenantId);const n=c;for(const x of Object.keys(n))n[x]===void 0&&delete n[x];const v=await t._getAppCheckToken(),R=v?`#${hue}=${encodeURIComponent(v)}`:"";return`${fue(t)}?${jT(n).slice(1)}${R}`}function fue({config:t}){return t.emulator?T3(t,due):`https://${t.authDomain}/${cue}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="webStorageSupport";class pue{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=BK,this._completeRedirectFn=Fle,this._overrideRedirectResult=Mle}async _openPopup(e,a,r,i){var l;Vg((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await J6(e,a,r,kD(),i);return lue(e,c,P3())}async _openRedirect(e,a,r,i){await this._originValidation(e);const l=await J6(e,a,r,kD(),i);return yle(l),new Promise(()=>{})}_initialize(e){const a=e._key();if(this.eventManagers[a]){const{manager:i,promise:l}=this.eventManagers[a];return i?Promise.resolve(i):(Vg(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[a]={promise:r},r.catch(()=>{delete this.eventManagers[a]}),r}async initAndGetManager(e){const a=await aue(e),r=new Ule(e);return a.register("authEvent",i=>(ii(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=a,r}_isIframeWebStorageSupported(e,a){this.iframes[e._key()].send(PN,{type:PN},i=>{var l;const c=(l=i==null?void 0:i[0])===null||l===void 0?void 0:l[PN];c!==void 0&&a(!!c),$p(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const a=e._key();return this.originValidationPromises[a]||(this.originValidationPromises[a]=qle(e)),this.originValidationPromises[a]}get _shouldInitProactively(){return PK()||S3()||N2()}}const mue=pue;var Q6="@firebase/auth",eU="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gue{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const a=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,a),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const a=this.internalListeners.get(e);a&&(this.internalListeners.delete(e),a(),this.updateProactiveRefresh())}assertAuthConfigured(){ii(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yue(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Aue(t){xv(new Yy("auth",(e,{options:a})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:n}=r.options;ii(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const v={apiKey:c,authDomain:n,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:EK(t)},R=new Hoe(r,i,l,v);return Koe(R,a),R},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,a,r)=>{e.getProvider("auth-internal").initialize()})),xv(new Yy("auth-internal",e=>{const a=u1(e.getProvider("auth").getImmediate());return(r=>new gue(r))(a)},"PRIVATE").setInstantiationMode("EXPLICIT")),Lm(Q6,eU,yue(t)),Lm(Q6,eU,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vue=5*60,_ue=lK("authIdTokenMaxAge")||vue;let tU=null;const wue=t=>async e=>{const a=e&&await e.getIdTokenResult(),r=a&&(new Date().getTime()-Date.parse(a.issuedAtTime))/1e3;if(r&&r>_ue)return;const i=a==null?void 0:a.token;tU!==i&&(tU=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function KK(t=_3()){const e=E2(t,"auth");if(e.isInitialized())return e.getImmediate();const a=$oe(t,{popupRedirectResolver:mue,persistence:[ble,ple,BK]}),r=lK("authTokenSyncURL");if(r){const l=wue(r);cle(a,l,()=>l(a.currentUser)),ule(a,c=>l(c))}const i=iK("auth");return i&&Woe(a,`http://${i}`),a}Aue("Browser");var Rue=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qr,N3=N3||{},hi=Rue||self;function z2(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function D2(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Tue(t,e,a){return t.call.apply(t.bind,arguments)}function Cue(t,e,a){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Rd(t,e,a){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Rd=Tue:Rd=Cue,Rd.apply(null,arguments)}function DS(t,e){var a=Array.prototype.slice.call(arguments,1);return function(){var r=a.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function hc(t,e){function a(){}a.prototype=e.prototype,t.$=e.prototype,t.prototype=new a,t.prototype.constructor=t,t.ac=function(r,i,l){for(var c=Array(arguments.length-2),n=2;n<arguments.length;n++)c[n-2]=arguments[n];return e.prototype[i].apply(r,c)}}function nA(){this.s=this.s,this.o=this.o}var Sue=0;nA.prototype.s=!1;nA.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Sue!=0)};nA.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const WK=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let a=0;a<t.length;a++)if(a in t&&t[a]===e)return a;return-1};function O3(t){const e=t.length;if(0<e){const a=Array(e);for(let r=0;r<e;r++)a[r]=t[r];return a}return[]}function aU(t,e){for(let a=1;a<arguments.length;a++){const r=arguments[a];if(z2(r)){const i=t.length||0,l=r.length||0;t.length=i+l;for(let c=0;c<l;c++)t[i+c]=r[c]}else t.push(r)}}function Td(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Td.prototype.h=function(){this.defaultPrevented=!0};var bue=function(){if(!hi.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{hi.addEventListener("test",()=>{},e),hi.removeEventListener("test",()=>{},e)}catch{}return t}();function FR(t){return/^[\s\xa0]*$/.test(t)}function M2(){var t=hi.navigator;return t&&(t=t.userAgent)?t:""}function Nm(t){return M2().indexOf(t)!=-1}function V3(t){return V3[" "](t),t}V3[" "]=function(){};function xue(t,e){var a=_ce;return Object.prototype.hasOwnProperty.call(a,t)?a[t]:a[t]=e(t)}var Pue=Nm("Opera"),w_=Nm("Trident")||Nm("MSIE"),YK=Nm("Edge"),BD=YK||w_,XK=Nm("Gecko")&&!(M2().toLowerCase().indexOf("webkit")!=-1&&!Nm("Edge"))&&!(Nm("Trident")||Nm("MSIE"))&&!Nm("Edge"),Eue=M2().toLowerCase().indexOf("webkit")!=-1&&!Nm("Edge");function JK(){var t=hi.document;return t?t.documentMode:void 0}var jD;e:{var EN="",NN=function(){var t=M2();if(XK)return/rv:([^\);]+)(\)|;)/.exec(t);if(YK)return/Edge\/([\d\.]+)/.exec(t);if(w_)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Eue)return/WebKit\/(\S+)/.exec(t);if(Pue)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(NN&&(EN=NN?NN[1]:""),w_){var ON=JK();if(ON!=null&&ON>parseFloat(EN)){jD=String(ON);break e}}jD=EN}var GD;if(hi.document&&w_){var rU=JK();GD=rU||parseInt(jD,10)||void 0}else GD=void 0;var Nue=GD;function kR(t,e){if(Td.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var a=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(XK){e:{try{V3(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else a=="mouseover"?e=t.fromElement:a=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Oue[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&kR.$.h.call(this)}}hc(kR,Td);var Oue={2:"touch",3:"pen",4:"mouse"};kR.prototype.h=function(){kR.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var I2="closure_listenable_"+(1e6*Math.random()|0),Vue=0;function zue(t,e,a,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=a,this.capture=!!r,this.la=i,this.key=++Vue,this.fa=this.ia=!1}function L2(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function z3(t,e,a){for(const r in t)e.call(a,t[r],r,t)}function Due(t,e){for(const a in t)e.call(void 0,t[a],a,t)}function QK(t){const e={};for(const a in t)e[a]=t[a];return e}const nU="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function eW(t,e){let a,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(a in r)t[a]=r[a];for(let l=0;l<nU.length;l++)a=nU[l],Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}}function F2(t){this.src=t,this.g={},this.h=0}F2.prototype.add=function(t,e,a,r,i){var l=t.toString();t=this.g[l],t||(t=this.g[l]=[],this.h++);var c=qD(t,e,r,i);return-1<c?(e=t[c],a||(e.ia=!1)):(e=new zue(e,this.src,l,!!r,i),e.ia=a,t.push(e)),e};function ZD(t,e){var a=e.type;if(a in t.g){var r=t.g[a],i=WK(r,e),l;(l=0<=i)&&Array.prototype.splice.call(r,i,1),l&&(L2(e),t.g[a].length==0&&(delete t.g[a],t.h--))}}function qD(t,e,a,r){for(var i=0;i<t.length;++i){var l=t[i];if(!l.fa&&l.listener==e&&l.capture==!!a&&l.la==r)return i}return-1}var D3="closure_lm_"+(1e6*Math.random()|0),VN={};function tW(t,e,a,r,i){if(Array.isArray(e)){for(var l=0;l<e.length;l++)tW(t,e[l],a,r,i);return null}return a=nW(a),t&&t[I2]?t.O(e,a,D2(r)?!!r.capture:!1,i):Mue(t,e,a,!1,r,i)}function Mue(t,e,a,r,i,l){if(!e)throw Error("Invalid event type");var c=D2(i)?!!i.capture:!!i,n=I3(t);if(n||(t[D3]=n=new F2(t)),a=n.add(e,a,r,c,l),a.proxy)return a;if(r=Iue(),a.proxy=r,r.src=t,r.listener=a,t.addEventListener)bue||(i=c),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(rW(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return a}function Iue(){function t(a){return e.call(t.src,t.listener,a)}const e=Lue;return t}function aW(t,e,a,r,i){if(Array.isArray(e))for(var l=0;l<e.length;l++)aW(t,e[l],a,r,i);else r=D2(r)?!!r.capture:!!r,a=nW(a),t&&t[I2]?(t=t.i,e=String(e).toString(),e in t.g&&(l=t.g[e],a=qD(l,a,r,i),-1<a&&(L2(l[a]),Array.prototype.splice.call(l,a,1),l.length==0&&(delete t.g[e],t.h--)))):t&&(t=I3(t))&&(e=t.g[e.toString()],t=-1,e&&(t=qD(e,a,r,i)),(a=-1<t?e[t]:null)&&M3(a))}function M3(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[I2])ZD(e.i,t);else{var a=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(a,r,t.capture):e.detachEvent?e.detachEvent(rW(a),r):e.addListener&&e.removeListener&&e.removeListener(r),(a=I3(e))?(ZD(a,t),a.h==0&&(a.src=null,e[D3]=null)):L2(t)}}}function rW(t){return t in VN?VN[t]:VN[t]="on"+t}function Lue(t,e){if(t.fa)t=!0;else{e=new kR(e,this);var a=t.listener,r=t.la||t.src;t.ia&&M3(t),t=a.call(r,e)}return t}function I3(t){return t=t[D3],t instanceof F2?t:null}var zN="__closure_events_fn_"+(1e9*Math.random()>>>0);function nW(t){return typeof t=="function"?t:(t[zN]||(t[zN]=function(e){return t.handleEvent(e)}),t[zN])}function dc(){nA.call(this),this.i=new F2(this),this.S=this,this.J=null}hc(dc,nA);dc.prototype[I2]=!0;dc.prototype.removeEventListener=function(t,e,a,r){aW(this,t,e,a,r)};function Fc(t,e){var a,r=t.J;if(r)for(a=[];r;r=r.J)a.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Td(e,t);else if(e instanceof Td)e.target=e.target||t;else{var i=e;e=new Td(r,t),eW(e,i)}if(i=!0,a)for(var l=a.length-1;0<=l;l--){var c=e.g=a[l];i=MS(c,r,!0,e)&&i}if(c=e.g=t,i=MS(c,r,!0,e)&&i,i=MS(c,r,!1,e)&&i,a)for(l=0;l<a.length;l++)c=e.g=a[l],i=MS(c,r,!1,e)&&i}dc.prototype.N=function(){if(dc.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var a=t.g[e],r=0;r<a.length;r++)L2(a[r]);delete t.g[e],t.h--}}this.J=null};dc.prototype.O=function(t,e,a,r){return this.i.add(String(t),e,!1,a,r)};dc.prototype.P=function(t,e,a,r){return this.i.add(String(t),e,!0,a,r)};function MS(t,e,a,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,l=0;l<e.length;++l){var c=e[l];if(c&&!c.fa&&c.capture==a){var n=c.listener,v=c.la||c.src;c.ia&&ZD(t.i,c),i=n.call(v,r)!==!1&&i}}return i&&!r.defaultPrevented}var L3=hi.JSON.stringify;class Fue{constructor(e,a){this.i=e,this.j=a,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function kue(){var t=F3;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class Uue{constructor(){this.h=this.g=null}add(e,a){const r=iW.get();r.set(e,a),this.h?this.h.next=r:this.g=r,this.h=r}}var iW=new Fue(()=>new Bue,t=>t.reset());class Bue{constructor(){this.next=this.g=this.h=null}set(e,a){this.h=e,this.g=a,this.next=null}reset(){this.next=this.g=this.h=null}}function jue(t){var e=1;t=t.split(":");const a=[];for(;0<e&&t.length;)a.push(t.shift()),e--;return t.length&&a.push(t.join(":")),a}function Gue(t){hi.setTimeout(()=>{throw t},0)}let UR,BR=!1,F3=new Uue,sW=()=>{const t=hi.Promise.resolve(void 0);UR=()=>{t.then(Zue)}};var Zue=()=>{for(var t;t=kue();){try{t.h.call(t.g)}catch(a){Gue(a)}var e=iW;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}BR=!1};function k2(t,e){dc.call(this),this.h=t||1,this.g=e||hi,this.j=Rd(this.qb,this),this.l=Date.now()}hc(k2,dc);qr=k2.prototype;qr.ga=!1;qr.T=null;qr.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Fc(this,"tick"),this.ga&&(k3(this),this.start()))}};qr.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function k3(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}qr.N=function(){k2.$.N.call(this),k3(this),delete this.g};function U3(t,e,a){if(typeof t=="function")a&&(t=Rd(t,a));else if(t&&typeof t.handleEvent=="function")t=Rd(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:hi.setTimeout(t,e||0)}function oW(t){t.g=U3(()=>{t.g=null,t.i&&(t.i=!1,oW(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class que extends nA{constructor(e,a){super(),this.m=e,this.j=a,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:oW(this)}N(){super.N(),this.g&&(hi.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jR(t){nA.call(this),this.h=t,this.g={}}hc(jR,nA);var iU=[];function lW(t,e,a,r){Array.isArray(a)||(a&&(iU[0]=a.toString()),a=iU);for(var i=0;i<a.length;i++){var l=tW(e,a[i],r||t.handleEvent,!1,t.h||t);if(!l)break;t.g[l.key]=l}}function uW(t){z3(t.g,function(e,a){this.g.hasOwnProperty(a)&&M3(e)},t),t.g={}}jR.prototype.N=function(){jR.$.N.call(this),uW(this)};jR.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function U2(){this.g=!0}U2.prototype.Ea=function(){this.g=!1};function Hue(t,e,a,r,i,l){t.info(function(){if(t.g)if(l)for(var c="",n=l.split("&"),v=0;v<n.length;v++){var R=n[v].split("=");if(1<R.length){var x=R[0];R=R[1];var N=x.split("_");c=2<=N.length&&N[1]=="type"?c+(x+"="+R+"&"):c+(x+"=redacted&")}}else c=null;else c=l;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+a+`
`+c})}function $ue(t,e,a,r,i,l,c){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+a+`
`+l+" "+c})}function J0(t,e,a,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Wue(t,a)+(r?" "+r:"")})}function Kue(t,e){t.info(function(){return"TIMEOUT: "+e})}U2.prototype.info=function(){};function Wue(t,e){if(!t.g)return e;if(!e)return null;try{var a=JSON.parse(e);if(a){for(t=0;t<a.length;t++)if(Array.isArray(a[t])){var r=a[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var l=i[0];if(l!="noop"&&l!="stop"&&l!="close")for(var c=1;c<i.length;c++)i[c]=""}}}}return L3(a)}catch{return e}}var Gv={},sU=null;function B2(){return sU=sU||new dc}Gv.Ta="serverreachability";function cW(t){Td.call(this,Gv.Ta,t)}hc(cW,Td);function GR(t){const e=B2();Fc(e,new cW(e))}Gv.STAT_EVENT="statevent";function dW(t,e){Td.call(this,Gv.STAT_EVENT,t),this.stat=e}hc(dW,Td);function ih(t){const e=B2();Fc(e,new dW(e,t))}Gv.Ua="timingevent";function hW(t,e){Td.call(this,Gv.Ua,t),this.size=e}hc(hW,Td);function $T(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return hi.setTimeout(function(){t()},e)}var j2={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},fW={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function B3(){}B3.prototype.h=null;function oU(t){return t.h||(t.h=t.i())}function pW(){}var KT={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function j3(){Td.call(this,"d")}hc(j3,Td);function G3(){Td.call(this,"c")}hc(G3,Td);var HD;function G2(){}hc(G2,B3);G2.prototype.g=function(){return new XMLHttpRequest};G2.prototype.i=function(){return{}};HD=new G2;function WT(t,e,a,r){this.l=t,this.j=e,this.m=a,this.W=r||1,this.U=new jR(this),this.P=Yue,t=BD?125:void 0,this.V=new k2(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new mW}function mW(){this.i=null,this.g="",this.h=!1}var Yue=45e3,$D={},$b={};qr=WT.prototype;qr.setTimeout=function(t){this.P=t};function KD(t,e,a){t.L=1,t.v=q2(zg(e)),t.s=a,t.S=!0,gW(t,null)}function gW(t,e){t.G=Date.now(),YT(t),t.A=zg(t.v);var a=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),CW(a.i,"t",r),t.C=0,a=t.l.J,t.h=new mW,t.g=qW(t.l,a?e:null,!t.s),0<t.O&&(t.M=new que(Rd(t.Pa,t,t.g),t.O)),lW(t.U,t.g,"readystatechange",t.nb),e=t.I?QK(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),GR(),Hue(t.j,t.u,t.A,t.m,t.W,t.s)}qr.nb=function(t){t=t.target;const e=this.M;e&&Om(t)==3?e.l():this.Pa(t)};qr.Pa=function(t){try{if(t==this.g)e:{const x=Om(this.g);var e=this.g.Ia();const N=this.g.da();if(!(3>x)&&(x!=3||BD||this.g&&(this.h.h||this.g.ja()||dU(this.g)))){this.J||x!=4||e==7||(e==8||0>=N?GR(3):GR(2)),Z2(this);var a=this.g.da();this.ca=a;t:if(yW(this)){var r=dU(this.g);t="";var i=r.length,l=Om(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cv(this),gR(this);var c="";break t}this.h.i=new hi.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:l&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=a==200,$ue(this.j,this.u,this.A,this.m,this.W,x,a),this.i){if(this.aa&&!this.K){t:{if(this.g){var n,v=this.g;if((n=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!FR(n)){var R=n;break t}}R=null}if(a=R)J0(this.j,this.m,a,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,WD(this,a);else{this.i=!1,this.o=3,ih(12),cv(this),gR(this);break e}}this.S?(AW(this,x,c),BD&&this.i&&x==3&&(lW(this.U,this.V,"tick",this.mb),this.V.start())):(J0(this.j,this.m,c,null),WD(this,c)),x==4&&cv(this),this.i&&!this.J&&(x==4?BW(this.l,this):(this.i=!1,YT(this)))}else yce(this.g),a==400&&0<c.indexOf("Unknown SID")?(this.o=3,ih(12)):(this.o=0,ih(13)),cv(this),gR(this)}}}catch{}finally{}};function yW(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function AW(t,e,a){let r=!0,i;for(;!t.J&&t.C<a.length;)if(i=Xue(t,a),i==$b){e==4&&(t.o=4,ih(14),r=!1),J0(t.j,t.m,null,"[Incomplete Response]");break}else if(i==$D){t.o=4,ih(15),J0(t.j,t.m,a,"[Invalid Chunk]"),r=!1;break}else J0(t.j,t.m,i,null),WD(t,i);yW(t)&&i!=$b&&i!=$D&&(t.h.g="",t.C=0),e!=4||a.length!=0||t.h.h||(t.o=1,ih(16),r=!1),t.i=t.i&&r,r?0<a.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+a.length),W3(e),e.M=!0,ih(11))):(J0(t.j,t.m,a,"[Invalid Chunked Response]"),cv(t),gR(t))}qr.mb=function(){if(this.g){var t=Om(this.g),e=this.g.ja();this.C<e.length&&(Z2(this),AW(this,t,e),this.i&&t!=4&&YT(this))}};function Xue(t,e){var a=t.C,r=e.indexOf(`
`,a);return r==-1?$b:(a=Number(e.substring(a,r)),isNaN(a)?$D:(r+=1,r+a>e.length?$b:(e=e.slice(r,r+a),t.C=r+a,e)))}qr.cancel=function(){this.J=!0,cv(this)};function YT(t){t.Y=Date.now()+t.P,vW(t,t.P)}function vW(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=$T(Rd(t.lb,t),e)}function Z2(t){t.B&&(hi.clearTimeout(t.B),t.B=null)}qr.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(Kue(this.j,this.A),this.L!=2&&(GR(),ih(17)),cv(this),this.o=2,gR(this)):vW(this,this.Y-t)};function gR(t){t.l.H==0||t.J||BW(t.l,t)}function cv(t){Z2(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,k3(t.V),uW(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function WD(t,e){try{var a=t.l;if(a.H!=0&&(a.g==t||YD(a.i,t))){if(!t.K&&YD(a.i,t)&&a.H==3){try{var r=a.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!a.u){if(a.g)if(a.g.G+3e3<t.G)Yb(a),K2(a);else break e;K3(a),ih(18)}}else a.Fa=i[1],0<a.Fa-a.V&&37500>i[2]&&a.G&&a.A==0&&!a.v&&(a.v=$T(Rd(a.ib,a),6e3));if(1>=xW(a.i)&&a.oa){try{a.oa()}catch{}a.oa=void 0}}else dv(a,11)}else if((t.K||a.g==t)&&Yb(a),!FR(e))for(i=a.Ja.g.parse(e),e=0;e<i.length;e++){let R=i[e];if(a.V=R[0],R=R[1],a.H==2)if(R[0]=="c"){a.K=R[1],a.pa=R[2];const x=R[3];x!=null&&(a.ra=x,a.l.info("VER="+a.ra));const N=R[4];N!=null&&(a.Ga=N,a.l.info("SVER="+a.Ga));const L=R[5];L!=null&&typeof L=="number"&&0<L&&(r=1.5*L,a.L=r,a.l.info("backChannelRequestTimeoutMs_="+r)),r=a;const F=t.g;if(F){const j=F.g?F.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(j){var l=r.i;l.g||j.indexOf("spdy")==-1&&j.indexOf("quic")==-1&&j.indexOf("h2")==-1||(l.j=l.l,l.g=new Set,l.h&&(Z3(l,l.h),l.h=null))}if(r.F){const $=F.g?F.g.getResponseHeader("X-HTTP-Session-Id"):null;$&&(r.Da=$,Lo(r.I,r.F,$))}}a.H=3,a.h&&a.h.Ba(),a.ca&&(a.S=Date.now()-t.G,a.l.info("Handshake RTT: "+a.S+"ms")),r=a;var c=t;if(r.wa=ZW(r,r.J?r.pa:null,r.Y),c.K){PW(r.i,c);var n=c,v=r.L;v&&n.setTimeout(v),n.B&&(Z2(n),YT(n)),r.g=c}else kW(r);0<a.j.length&&W2(a)}else R[0]!="stop"&&R[0]!="close"||dv(a,7);else a.H==3&&(R[0]=="stop"||R[0]=="close"?R[0]=="stop"?dv(a,7):$3(a):R[0]!="noop"&&a.h&&a.h.Aa(R),a.A=0)}}GR(4)}catch{}}function Jue(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(z2(t)){for(var e=[],a=t.length,r=0;r<a;r++)e.push(t[r]);return e}e=[],a=0;for(r in t)e[a++]=t[r];return e}function Que(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(z2(t)||typeof t=="string"){var e=[];t=t.length;for(var a=0;a<t;a++)e.push(a);return e}e=[],a=0;for(const r in t)e[a++]=r;return e}}}function _W(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(z2(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var a=Que(t),r=Jue(t),i=r.length,l=0;l<i;l++)e.call(void 0,r[l],a&&a[l],t)}var wW=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ece(t,e){if(t){t=t.split("&");for(var a=0;a<t.length;a++){var r=t[a].indexOf("="),i=null;if(0<=r){var l=t[a].substring(0,r);i=t[a].substring(r+1)}else l=t[a];e(l,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function _v(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof _v){this.h=t.h,Kb(this,t.j),this.s=t.s,this.g=t.g,Wb(this,t.m),this.l=t.l;var e=t.i,a=new ZR;a.i=e.i,e.g&&(a.g=new Map(e.g),a.h=e.h),lU(this,a),this.o=t.o}else t&&(e=String(t).match(wW))?(this.h=!1,Kb(this,e[1]||"",!0),this.s=iR(e[2]||""),this.g=iR(e[3]||"",!0),Wb(this,e[4]),this.l=iR(e[5]||"",!0),lU(this,e[6]||"",!0),this.o=iR(e[7]||"")):(this.h=!1,this.i=new ZR(null,this.h))}_v.prototype.toString=function(){var t=[],e=this.j;e&&t.push(sR(e,uU,!0),":");var a=this.g;return(a||e=="file")&&(t.push("//"),(e=this.s)&&t.push(sR(e,uU,!0),"@"),t.push(encodeURIComponent(String(a)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a=this.m,a!=null&&t.push(":",String(a))),(a=this.l)&&(this.g&&a.charAt(0)!="/"&&t.push("/"),t.push(sR(a,a.charAt(0)=="/"?rce:ace,!0))),(a=this.i.toString())&&t.push("?",a),(a=this.o)&&t.push("#",sR(a,ice)),t.join("")};function zg(t){return new _v(t)}function Kb(t,e,a){t.j=a?iR(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Wb(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function lU(t,e,a){e instanceof ZR?(t.i=e,sce(t.i,t.h)):(a||(e=sR(e,nce)),t.i=new ZR(e,t.h))}function Lo(t,e,a){t.i.set(e,a)}function q2(t){return Lo(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function iR(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function sR(t,e,a){return typeof t=="string"?(t=encodeURI(t).replace(e,tce),a&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function tce(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var uU=/[#\/\?@]/g,ace=/[#\?:]/g,rce=/[#\?]/g,nce=/[#\?@]/g,ice=/#/g;function ZR(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function iA(t){t.g||(t.g=new Map,t.h=0,t.i&&ece(t.i,function(e,a){t.add(decodeURIComponent(e.replace(/\+/g," ")),a)}))}qr=ZR.prototype;qr.add=function(t,e){iA(this),this.i=null,t=d1(this,t);var a=this.g.get(t);return a||this.g.set(t,a=[]),a.push(e),this.h+=1,this};function RW(t,e){iA(t),e=d1(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function TW(t,e){return iA(t),e=d1(t,e),t.g.has(e)}qr.forEach=function(t,e){iA(this),this.g.forEach(function(a,r){a.forEach(function(i){t.call(e,i,r,this)},this)},this)};qr.ta=function(){iA(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),a=[];for(let r=0;r<e.length;r++){const i=t[r];for(let l=0;l<i.length;l++)a.push(e[r])}return a};qr.Z=function(t){iA(this);let e=[];if(typeof t=="string")TW(this,t)&&(e=e.concat(this.g.get(d1(this,t))));else{t=Array.from(this.g.values());for(let a=0;a<t.length;a++)e=e.concat(t[a])}return e};qr.set=function(t,e){return iA(this),this.i=null,t=d1(this,t),TW(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};qr.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function CW(t,e,a){RW(t,e),0<a.length&&(t.i=null,t.g.set(d1(t,e),O3(a)),t.h+=a.length)}qr.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var a=0;a<e.length;a++){var r=e[a];const l=encodeURIComponent(String(r)),c=this.Z(r);for(r=0;r<c.length;r++){var i=l;c[r]!==""&&(i+="="+encodeURIComponent(String(c[r]))),t.push(i)}}return this.i=t.join("&")};function d1(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function sce(t,e){e&&!t.j&&(iA(t),t.i=null,t.g.forEach(function(a,r){var i=r.toLowerCase();r!=i&&(RW(this,r),CW(this,i,a))},t)),t.j=e}var oce=class{constructor(t,e){this.g=t,this.map=e}};function SW(t){this.l=t||lce,hi.PerformanceNavigationTiming?(t=hi.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(hi.g&&hi.g.Ka&&hi.g.Ka()&&hi.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var lce=10;function bW(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function xW(t){return t.h?1:t.g?t.g.size:0}function YD(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Z3(t,e){t.g?t.g.add(e):t.h=e}function PW(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}SW.prototype.cancel=function(){if(this.i=EW(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function EW(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const a of t.g.values())e=e.concat(a.F);return e}return O3(t.i)}var uce=class{stringify(t){return hi.JSON.stringify(t,void 0)}parse(t){return hi.JSON.parse(t,void 0)}};function cce(){this.g=new uce}function dce(t,e,a){const r=a||"";try{_W(t,function(i,l){let c=i;D2(i)&&(c=L3(i)),e.push(r+l+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function hce(t,e){const a=new U2;if(hi.Image){const r=new Image;r.onload=DS(IS,a,r,"TestLoadImage: loaded",!0,e),r.onerror=DS(IS,a,r,"TestLoadImage: error",!1,e),r.onabort=DS(IS,a,r,"TestLoadImage: abort",!1,e),r.ontimeout=DS(IS,a,r,"TestLoadImage: timeout",!1,e),hi.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function IS(t,e,a,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function XT(t){this.l=t.fc||null,this.j=t.ob||!1}hc(XT,B3);XT.prototype.g=function(){return new H2(this.l,this.j)};XT.prototype.i=function(t){return function(){return t}}({});function H2(t,e){dc.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=q3,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}hc(H2,dc);var q3=0;qr=H2.prototype;qr.open=function(t,e){if(this.readyState!=q3)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,qR(this)};qr.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||hi).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};qr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,JT(this)),this.readyState=q3};qr.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,qR(this)),this.g&&(this.readyState=3,qR(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof hi.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;NW(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function NW(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}qr.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?JT(this):qR(this),this.readyState==3&&NW(this)}};qr.Za=function(t){this.g&&(this.response=this.responseText=t,JT(this))};qr.Ya=function(t){this.g&&(this.response=t,JT(this))};qr.ka=function(){this.g&&JT(this)};function JT(t){t.readyState=4,t.l=null,t.j=null,t.A=null,qR(t)}qr.setRequestHeader=function(t,e){this.v.append(t,e)};qr.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};qr.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var a=e.next();!a.done;)a=a.value,t.push(a[0]+": "+a[1]),a=e.next();return t.join(`\r
`)};function qR(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(H2.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var fce=hi.JSON.parse;function Nl(t){dc.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=OW,this.L=this.M=!1}hc(Nl,dc);var OW="",pce=/^https?$/i,mce=["POST","PUT"];qr=Nl.prototype;qr.Oa=function(t){this.M=t};qr.ha=function(t,e,a,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():HD.g(),this.C=this.u?oU(this.u):oU(HD),this.g.onreadystatechange=Rd(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(l){cU(this,l);return}if(t=a||"",a=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)a.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const l of r.keys())a.set(l,r.get(l));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(a.keys()).find(l=>l.toLowerCase()=="content-type"),i=hi.FormData&&t instanceof hi.FormData,!(0<=WK(mce,e))||r||i||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,c]of a)this.g.setRequestHeader(l,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{DW(this),0<this.B&&((this.L=gce(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Rd(this.ua,this)):this.A=U3(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(l){cU(this,l)}};function gce(t){return w_&&typeof t.timeout=="number"&&t.ontimeout!==void 0}qr.ua=function(){typeof N3<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Fc(this,"timeout"),this.abort(8))};function cU(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,VW(t),$2(t)}function VW(t){t.F||(t.F=!0,Fc(t,"complete"),Fc(t,"error"))}qr.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Fc(this,"complete"),Fc(this,"abort"),$2(this))};qr.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),$2(this,!0)),Nl.$.N.call(this)};qr.La=function(){this.s||(this.G||this.v||this.l?zW(this):this.kb())};qr.kb=function(){zW(this)};function zW(t){if(t.h&&typeof N3<"u"&&(!t.C[1]||Om(t)!=4||t.da()!=2)){if(t.v&&Om(t)==4)U3(t.La,0,t);else if(Fc(t,"readystatechange"),Om(t)==4){t.h=!1;try{const c=t.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var a;if(!(a=e)){var r;if(r=c===0){var i=String(t.I).match(wW)[1]||null;!i&&hi.self&&hi.self.location&&(i=hi.self.location.protocol.slice(0,-1)),r=!pce.test(i?i.toLowerCase():"")}a=r}if(a)Fc(t,"complete"),Fc(t,"success");else{t.m=6;try{var l=2<Om(t)?t.g.statusText:""}catch{l=""}t.j=l+" ["+t.da()+"]",VW(t)}}finally{$2(t)}}}}function $2(t,e){if(t.g){DW(t);const a=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Fc(t,"ready");try{a.onreadystatechange=r}catch{}}}function DW(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(hi.clearTimeout(t.A),t.A=null)}qr.isActive=function(){return!!this.g};function Om(t){return t.g?t.g.readyState:0}qr.da=function(){try{return 2<Om(this)?this.g.status:-1}catch{return-1}};qr.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};qr.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),fce(e)}};function dU(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case OW:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function yce(t){const e={};t=(t.g&&2<=Om(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(FR(t[r]))continue;var a=jue(t[r]);const i=a[0];if(a=a[1],typeof a!="string")continue;a=a.trim();const l=e[i]||[];e[i]=l,l.push(a)}Due(e,function(r){return r.join(", ")})}qr.Ia=function(){return this.m};qr.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function MW(t){let e="";return z3(t,function(a,r){e+=r,e+=":",e+=a,e+=`\r
`}),e}function H3(t,e,a){e:{for(r in a){var r=!1;break e}r=!0}r||(a=MW(a),typeof t=="string"?a!=null&&encodeURIComponent(String(a)):Lo(t,e,a))}function Lw(t,e,a){return a&&a.internalChannelParams&&a.internalChannelParams[t]||e}function IW(t){this.Ga=0,this.j=[],this.l=new U2,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Lw("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Lw("baseRetryDelayMs",5e3,t),this.hb=Lw("retryDelaySeedMs",1e4,t),this.eb=Lw("forwardChannelMaxRetries",2,t),this.xa=Lw("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new SW(t&&t.concurrentRequestLimit),this.Ja=new cce,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}qr=IW.prototype;qr.ra=8;qr.H=1;function $3(t){if(LW(t),t.H==3){var e=t.W++,a=zg(t.I);if(Lo(a,"SID",t.K),Lo(a,"RID",e),Lo(a,"TYPE","terminate"),QT(t,a),e=new WT(t,t.l,e),e.L=2,e.v=q2(zg(a)),a=!1,hi.navigator&&hi.navigator.sendBeacon)try{a=hi.navigator.sendBeacon(e.v.toString(),"")}catch{}!a&&hi.Image&&(new Image().src=e.v,a=!0),a||(e.g=qW(e.l,null),e.g.ha(e.v)),e.G=Date.now(),YT(e)}GW(t)}function K2(t){t.g&&(W3(t),t.g.cancel(),t.g=null)}function LW(t){K2(t),t.u&&(hi.clearTimeout(t.u),t.u=null),Yb(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&hi.clearTimeout(t.m),t.m=null)}function W2(t){if(!bW(t.i)&&!t.m){t.m=!0;var e=t.Na;UR||sW(),BR||(UR(),BR=!0),F3.add(e,t),t.C=0}}function Ace(t,e){return xW(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=$T(Rd(t.Na,t,e),jW(t,t.C)),t.C++,!0)}qr.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new WT(this,this.l,t);let l=this.s;if(this.U&&(l?(l=QK(l),eW(l,this.U)):l=this.U),this.o!==null||this.O||(i.I=l,l=null),this.P)e:{for(var e=0,a=0;a<this.j.length;a++){t:{var r=this.j[a];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=a;break e}if(e===4096||a===this.j.length-1){e=a+1;break e}}e=1e3}else e=1e3;e=FW(this,i,e),a=zg(this.I),Lo(a,"RID",t),Lo(a,"CVER",22),this.F&&Lo(a,"X-HTTP-Session-Id",this.F),QT(this,a),l&&(this.O?e="headers="+encodeURIComponent(String(MW(l)))+"&"+e:this.o&&H3(a,this.o,l)),Z3(this.i,i),this.bb&&Lo(a,"TYPE","init"),this.P?(Lo(a,"$req",e),Lo(a,"SID","null"),i.aa=!0,KD(i,a,null)):KD(i,a,e),this.H=2}}else this.H==3&&(t?hU(this,t):this.j.length==0||bW(this.i)||hU(this))};function hU(t,e){var a;e?a=e.m:a=t.W++;const r=zg(t.I);Lo(r,"SID",t.K),Lo(r,"RID",a),Lo(r,"AID",t.V),QT(t,r),t.o&&t.s&&H3(r,t.o,t.s),a=new WT(t,t.l,a,t.C+1),t.o===null&&(a.I=t.s),e&&(t.j=e.F.concat(t.j)),e=FW(t,a,1e3),a.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Z3(t.i,a),KD(a,r,e)}function QT(t,e){t.na&&z3(t.na,function(a,r){Lo(e,r,a)}),t.h&&_W({},function(a,r){Lo(e,r,a)})}function FW(t,e,a){a=Math.min(t.j.length,a);var r=t.h?Rd(t.h.Va,t.h,t):null;e:{var i=t.j;let l=-1;for(;;){const c=["count="+a];l==-1?0<a?(l=i[0].g,c.push("ofs="+l)):l=0:c.push("ofs="+l);let n=!0;for(let v=0;v<a;v++){let R=i[v].g;const x=i[v].map;if(R-=l,0>R)l=Math.max(0,i[v].g-100),n=!1;else try{dce(x,c,"req"+R+"_")}catch{r&&r(x)}}if(n){r=c.join("&");break e}}}return t=t.j.splice(0,a),e.F=t,r}function kW(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;UR||sW(),BR||(UR(),BR=!0),F3.add(e,t),t.A=0}}function K3(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=$T(Rd(t.Ma,t),jW(t,t.A)),t.A++,!0)}qr.Ma=function(){if(this.u=null,UW(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=$T(Rd(this.jb,this),t)}};qr.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ih(10),K2(this),UW(this))};function W3(t){t.B!=null&&(hi.clearTimeout(t.B),t.B=null)}function UW(t){t.g=new WT(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=zg(t.wa);Lo(e,"RID","rpc"),Lo(e,"SID",t.K),Lo(e,"AID",t.V),Lo(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Lo(e,"TO",t.qa),Lo(e,"TYPE","xmlhttp"),QT(t,e),t.o&&t.s&&H3(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var a=t.g;t=t.pa,a.L=1,a.v=q2(zg(e)),a.s=null,a.S=!0,gW(a,t)}qr.ib=function(){this.v!=null&&(this.v=null,K2(this),K3(this),ih(19))};function Yb(t){t.v!=null&&(hi.clearTimeout(t.v),t.v=null)}function BW(t,e){var a=null;if(t.g==e){Yb(t),W3(t),t.g=null;var r=2}else if(YD(t.i,e))a=e.F,PW(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){a=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;r=B2(),Fc(r,new hW(r,a)),W2(t)}else kW(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(r==1&&Ace(t,e)||r==2&&K3(t)))switch(a&&0<a.length&&(e=t.i,e.i=e.i.concat(a)),i){case 1:dv(t,5);break;case 4:dv(t,10);break;case 3:dv(t,6);break;default:dv(t,2)}}}function jW(t,e){let a=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(a*=2),a*e}function dv(t,e){if(t.l.info("Error code "+e),e==2){var a=null;t.h&&(a=null);var r=Rd(t.pb,t);a||(a=new _v("//www.google.com/images/cleardot.gif"),hi.location&&hi.location.protocol=="http"||Kb(a,"https"),q2(a)),hce(a.toString(),r)}else ih(2);t.H=0,t.h&&t.h.za(e),GW(t),LW(t)}qr.pb=function(t){t?(this.l.info("Successfully pinged google.com"),ih(2)):(this.l.info("Failed to ping google.com"),ih(1))};function GW(t){if(t.H=0,t.ma=[],t.h){const e=EW(t.i);(e.length!=0||t.j.length!=0)&&(aU(t.ma,e),aU(t.ma,t.j),t.i.i.length=0,O3(t.j),t.j.length=0),t.h.ya()}}function ZW(t,e,a){var r=a instanceof _v?zg(a):new _v(a);if(r.g!="")e&&(r.g=e+"."+r.g),Wb(r,r.m);else{var i=hi.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var l=new _v(null);r&&Kb(l,r),e&&(l.g=e),i&&Wb(l,i),a&&(l.l=a),r=l}return a=t.F,e=t.Da,a&&e&&Lo(r,a,e),Lo(r,"VER",t.ra),QT(t,r),r}function qW(t,e,a){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=a&&t.Ha&&!t.va?new Nl(new XT({ob:!0})):new Nl(t.va),e.Oa(t.J),e}qr.isActive=function(){return!!this.h&&this.h.isActive(this)};function HW(){}qr=HW.prototype;qr.Ba=function(){};qr.Aa=function(){};qr.za=function(){};qr.ya=function(){};qr.isActive=function(){return!0};qr.Va=function(){};function Xb(){if(w_&&!(10<=Number(Nue)))throw Error("Environmental error: no available transport.")}Xb.prototype.g=function(t,e){return new wf(t,e)};function wf(t,e){dc.call(this),this.g=new IW(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!FR(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!FR(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new h1(this)}hc(wf,dc);wf.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,a=this.h||void 0;ih(0),t.Y=e,t.na=a||{},t.G=t.aa,t.I=ZW(t,null,t.Y),W2(t)};wf.prototype.close=function(){$3(this.g)};wf.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var a={};a.__data__=t,t=a}else this.v&&(a={},a.__data__=L3(t),t=a);e.j.push(new oce(e.fb++,t)),e.H==3&&W2(e)};wf.prototype.N=function(){this.g.h=null,delete this.j,$3(this.g),delete this.g,wf.$.N.call(this)};function $W(t){j3.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const a in e){t=a;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}hc($W,j3);function KW(){G3.call(this),this.status=1}hc(KW,G3);function h1(t){this.g=t}hc(h1,HW);h1.prototype.Ba=function(){Fc(this.g,"a")};h1.prototype.Aa=function(t){Fc(this.g,new $W(t))};h1.prototype.za=function(t){Fc(this.g,new KW)};h1.prototype.ya=function(){Fc(this.g,"b")};function vce(){this.blockSize=-1}function Kp(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}hc(Kp,vce);Kp.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function DN(t,e,a){a||(a=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(a++)|e.charCodeAt(a++)<<8|e.charCodeAt(a++)<<16|e.charCodeAt(a++)<<24;else for(i=0;16>i;++i)r[i]=e[a++]|e[a++]<<8|e[a++]<<16|e[a++]<<24;e=t.g[0],a=t.g[1],i=t.g[2];var l=t.g[3],c=e+(l^a&(i^l))+r[0]+3614090360&4294967295;e=a+(c<<7&4294967295|c>>>25),c=l+(i^e&(a^i))+r[1]+3905402710&4294967295,l=e+(c<<12&4294967295|c>>>20),c=i+(a^l&(e^a))+r[2]+606105819&4294967295,i=l+(c<<17&4294967295|c>>>15),c=a+(e^i&(l^e))+r[3]+3250441966&4294967295,a=i+(c<<22&4294967295|c>>>10),c=e+(l^a&(i^l))+r[4]+4118548399&4294967295,e=a+(c<<7&4294967295|c>>>25),c=l+(i^e&(a^i))+r[5]+1200080426&4294967295,l=e+(c<<12&4294967295|c>>>20),c=i+(a^l&(e^a))+r[6]+2821735955&4294967295,i=l+(c<<17&4294967295|c>>>15),c=a+(e^i&(l^e))+r[7]+4249261313&4294967295,a=i+(c<<22&4294967295|c>>>10),c=e+(l^a&(i^l))+r[8]+1770035416&4294967295,e=a+(c<<7&4294967295|c>>>25),c=l+(i^e&(a^i))+r[9]+2336552879&4294967295,l=e+(c<<12&4294967295|c>>>20),c=i+(a^l&(e^a))+r[10]+4294925233&4294967295,i=l+(c<<17&4294967295|c>>>15),c=a+(e^i&(l^e))+r[11]+2304563134&4294967295,a=i+(c<<22&4294967295|c>>>10),c=e+(l^a&(i^l))+r[12]+1804603682&4294967295,e=a+(c<<7&4294967295|c>>>25),c=l+(i^e&(a^i))+r[13]+4254626195&4294967295,l=e+(c<<12&4294967295|c>>>20),c=i+(a^l&(e^a))+r[14]+2792965006&4294967295,i=l+(c<<17&4294967295|c>>>15),c=a+(e^i&(l^e))+r[15]+1236535329&4294967295,a=i+(c<<22&4294967295|c>>>10),c=e+(i^l&(a^i))+r[1]+4129170786&4294967295,e=a+(c<<5&4294967295|c>>>27),c=l+(a^i&(e^a))+r[6]+3225465664&4294967295,l=e+(c<<9&4294967295|c>>>23),c=i+(e^a&(l^e))+r[11]+643717713&4294967295,i=l+(c<<14&4294967295|c>>>18),c=a+(l^e&(i^l))+r[0]+3921069994&4294967295,a=i+(c<<20&4294967295|c>>>12),c=e+(i^l&(a^i))+r[5]+3593408605&4294967295,e=a+(c<<5&4294967295|c>>>27),c=l+(a^i&(e^a))+r[10]+38016083&4294967295,l=e+(c<<9&4294967295|c>>>23),c=i+(e^a&(l^e))+r[15]+3634488961&4294967295,i=l+(c<<14&4294967295|c>>>18),c=a+(l^e&(i^l))+r[4]+3889429448&4294967295,a=i+(c<<20&4294967295|c>>>12),c=e+(i^l&(a^i))+r[9]+568446438&4294967295,e=a+(c<<5&4294967295|c>>>27),c=l+(a^i&(e^a))+r[14]+3275163606&4294967295,l=e+(c<<9&4294967295|c>>>23),c=i+(e^a&(l^e))+r[3]+4107603335&4294967295,i=l+(c<<14&4294967295|c>>>18),c=a+(l^e&(i^l))+r[8]+1163531501&4294967295,a=i+(c<<20&4294967295|c>>>12),c=e+(i^l&(a^i))+r[13]+2850285829&4294967295,e=a+(c<<5&4294967295|c>>>27),c=l+(a^i&(e^a))+r[2]+4243563512&4294967295,l=e+(c<<9&4294967295|c>>>23),c=i+(e^a&(l^e))+r[7]+1735328473&4294967295,i=l+(c<<14&4294967295|c>>>18),c=a+(l^e&(i^l))+r[12]+2368359562&4294967295,a=i+(c<<20&4294967295|c>>>12),c=e+(a^i^l)+r[5]+4294588738&4294967295,e=a+(c<<4&4294967295|c>>>28),c=l+(e^a^i)+r[8]+2272392833&4294967295,l=e+(c<<11&4294967295|c>>>21),c=i+(l^e^a)+r[11]+1839030562&4294967295,i=l+(c<<16&4294967295|c>>>16),c=a+(i^l^e)+r[14]+4259657740&4294967295,a=i+(c<<23&4294967295|c>>>9),c=e+(a^i^l)+r[1]+2763975236&4294967295,e=a+(c<<4&4294967295|c>>>28),c=l+(e^a^i)+r[4]+1272893353&4294967295,l=e+(c<<11&4294967295|c>>>21),c=i+(l^e^a)+r[7]+4139469664&4294967295,i=l+(c<<16&4294967295|c>>>16),c=a+(i^l^e)+r[10]+3200236656&4294967295,a=i+(c<<23&4294967295|c>>>9),c=e+(a^i^l)+r[13]+681279174&4294967295,e=a+(c<<4&4294967295|c>>>28),c=l+(e^a^i)+r[0]+3936430074&4294967295,l=e+(c<<11&4294967295|c>>>21),c=i+(l^e^a)+r[3]+3572445317&4294967295,i=l+(c<<16&4294967295|c>>>16),c=a+(i^l^e)+r[6]+76029189&4294967295,a=i+(c<<23&4294967295|c>>>9),c=e+(a^i^l)+r[9]+3654602809&4294967295,e=a+(c<<4&4294967295|c>>>28),c=l+(e^a^i)+r[12]+3873151461&4294967295,l=e+(c<<11&4294967295|c>>>21),c=i+(l^e^a)+r[15]+530742520&4294967295,i=l+(c<<16&4294967295|c>>>16),c=a+(i^l^e)+r[2]+3299628645&4294967295,a=i+(c<<23&4294967295|c>>>9),c=e+(i^(a|~l))+r[0]+4096336452&4294967295,e=a+(c<<6&4294967295|c>>>26),c=l+(a^(e|~i))+r[7]+1126891415&4294967295,l=e+(c<<10&4294967295|c>>>22),c=i+(e^(l|~a))+r[14]+2878612391&4294967295,i=l+(c<<15&4294967295|c>>>17),c=a+(l^(i|~e))+r[5]+4237533241&4294967295,a=i+(c<<21&4294967295|c>>>11),c=e+(i^(a|~l))+r[12]+1700485571&4294967295,e=a+(c<<6&4294967295|c>>>26),c=l+(a^(e|~i))+r[3]+2399980690&4294967295,l=e+(c<<10&4294967295|c>>>22),c=i+(e^(l|~a))+r[10]+4293915773&4294967295,i=l+(c<<15&4294967295|c>>>17),c=a+(l^(i|~e))+r[1]+2240044497&4294967295,a=i+(c<<21&4294967295|c>>>11),c=e+(i^(a|~l))+r[8]+1873313359&4294967295,e=a+(c<<6&4294967295|c>>>26),c=l+(a^(e|~i))+r[15]+4264355552&4294967295,l=e+(c<<10&4294967295|c>>>22),c=i+(e^(l|~a))+r[6]+2734768916&4294967295,i=l+(c<<15&4294967295|c>>>17),c=a+(l^(i|~e))+r[13]+1309151649&4294967295,a=i+(c<<21&4294967295|c>>>11),c=e+(i^(a|~l))+r[4]+4149444226&4294967295,e=a+(c<<6&4294967295|c>>>26),c=l+(a^(e|~i))+r[11]+3174756917&4294967295,l=e+(c<<10&4294967295|c>>>22),c=i+(e^(l|~a))+r[2]+718787259&4294967295,i=l+(c<<15&4294967295|c>>>17),c=a+(l^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(c<<21&4294967295|c>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+l&4294967295}Kp.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var a=e-this.blockSize,r=this.m,i=this.h,l=0;l<e;){if(i==0)for(;l<=a;)DN(this,t,l),l+=this.blockSize;if(typeof t=="string"){for(;l<e;)if(r[i++]=t.charCodeAt(l++),i==this.blockSize){DN(this,r),i=0;break}}else for(;l<e;)if(r[i++]=t[l++],i==this.blockSize){DN(this,r),i=0;break}}this.h=i,this.i+=e};Kp.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var a=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=a&255,a/=256;for(this.j(t),t=Array(16),e=a=0;4>e;++e)for(var r=0;32>r;r+=8)t[a++]=this.g[e]>>>r&255;return t};function Hs(t,e){this.h=e;for(var a=[],r=!0,i=t.length-1;0<=i;i--){var l=t[i]|0;r&&l==e||(a[i]=l,r=!1)}this.g=a}var _ce={};function Y3(t){return-128<=t&&128>t?xue(t,function(e){return new Hs([e|0],0>e?-1:0)}):new Hs([t|0],0>t?-1:0)}function Vm(t){if(isNaN(t)||!isFinite(t))return l_;if(0>t)return Lc(Vm(-t));for(var e=[],a=1,r=0;t>=a;r++)e[r]=t/a|0,a*=XD;return new Hs(e,0)}function WW(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Lc(WW(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var a=Vm(Math.pow(e,8)),r=l_,i=0;i<t.length;i+=8){var l=Math.min(8,t.length-i),c=parseInt(t.substring(i,i+l),e);8>l?(l=Vm(Math.pow(e,l)),r=r.R(l).add(Vm(c))):(r=r.R(a),r=r.add(Vm(c)))}return r}var XD=4294967296,l_=Y3(0),JD=Y3(1),fU=Y3(16777216);qr=Hs.prototype;qr.ea=function(){if(Jf(this))return-Lc(this).ea();for(var t=0,e=1,a=0;a<this.g.length;a++){var r=this.D(a);t+=(0<=r?r:XD+r)*e,e*=XD}return t};qr.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Rg(this))return"0";if(Jf(this))return"-"+Lc(this).toString(t);for(var e=Vm(Math.pow(t,6)),a=this,r="";;){var i=Qb(a,e).g;a=Jb(a,i.R(e));var l=((0<a.g.length?a.g[0]:a.h)>>>0).toString(t);if(a=i,Rg(a))return l+r;for(;6>l.length;)l="0"+l;r=l+r}};qr.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Rg(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Jf(t){return t.h==-1}qr.X=function(t){return t=Jb(this,t),Jf(t)?-1:Rg(t)?0:1};function Lc(t){for(var e=t.g.length,a=[],r=0;r<e;r++)a[r]=~t.g[r];return new Hs(a,~t.h).add(JD)}qr.abs=function(){return Jf(this)?Lc(this):this};qr.add=function(t){for(var e=Math.max(this.g.length,t.g.length),a=[],r=0,i=0;i<=e;i++){var l=r+(this.D(i)&65535)+(t.D(i)&65535),c=(l>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=c>>>16,l&=65535,c&=65535,a[i]=c<<16|l}return new Hs(a,a[a.length-1]&-2147483648?-1:0)};function Jb(t,e){return t.add(Lc(e))}qr.R=function(t){if(Rg(this)||Rg(t))return l_;if(Jf(this))return Jf(t)?Lc(this).R(Lc(t)):Lc(Lc(this).R(t));if(Jf(t))return Lc(this.R(Lc(t)));if(0>this.X(fU)&&0>t.X(fU))return Vm(this.ea()*t.ea());for(var e=this.g.length+t.g.length,a=[],r=0;r<2*e;r++)a[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var l=this.D(r)>>>16,c=this.D(r)&65535,n=t.D(i)>>>16,v=t.D(i)&65535;a[2*r+2*i]+=c*v,LS(a,2*r+2*i),a[2*r+2*i+1]+=l*v,LS(a,2*r+2*i+1),a[2*r+2*i+1]+=c*n,LS(a,2*r+2*i+1),a[2*r+2*i+2]+=l*n,LS(a,2*r+2*i+2)}for(r=0;r<e;r++)a[r]=a[2*r+1]<<16|a[2*r];for(r=e;r<2*e;r++)a[r]=0;return new Hs(a,0)};function LS(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Fw(t,e){this.g=t,this.h=e}function Qb(t,e){if(Rg(e))throw Error("division by zero");if(Rg(t))return new Fw(l_,l_);if(Jf(t))return e=Qb(Lc(t),e),new Fw(Lc(e.g),Lc(e.h));if(Jf(e))return e=Qb(t,Lc(e)),new Fw(Lc(e.g),e.h);if(30<t.g.length){if(Jf(t)||Jf(e))throw Error("slowDivide_ only works with positive integers.");for(var a=JD,r=e;0>=r.X(t);)a=pU(a),r=pU(r);var i=F0(a,1),l=F0(r,1);for(r=F0(r,2),a=F0(a,2);!Rg(r);){var c=l.add(r);0>=c.X(t)&&(i=i.add(a),l=c),r=F0(r,1),a=F0(a,1)}return e=Jb(t,i.R(e)),new Fw(i,e)}for(i=l_;0<=t.X(e);){for(a=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(a)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),l=Vm(a),c=l.R(e);Jf(c)||0<c.X(t);)a-=r,l=Vm(a),c=l.R(e);Rg(l)&&(l=JD),i=i.add(l),t=Jb(t,c)}return new Fw(i,t)}qr.gb=function(t){return Qb(this,t).h};qr.and=function(t){for(var e=Math.max(this.g.length,t.g.length),a=[],r=0;r<e;r++)a[r]=this.D(r)&t.D(r);return new Hs(a,this.h&t.h)};qr.or=function(t){for(var e=Math.max(this.g.length,t.g.length),a=[],r=0;r<e;r++)a[r]=this.D(r)|t.D(r);return new Hs(a,this.h|t.h)};qr.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),a=[],r=0;r<e;r++)a[r]=this.D(r)^t.D(r);return new Hs(a,this.h^t.h)};function pU(t){for(var e=t.g.length+1,a=[],r=0;r<e;r++)a[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Hs(a,t.h)}function F0(t,e){var a=e>>5;e%=32;for(var r=t.g.length-a,i=[],l=0;l<r;l++)i[l]=0<e?t.D(l+a)>>>e|t.D(l+a+1)<<32-e:t.D(l+a);return new Hs(i,t.h)}Xb.prototype.createWebChannel=Xb.prototype.g;wf.prototype.send=wf.prototype.u;wf.prototype.open=wf.prototype.m;wf.prototype.close=wf.prototype.close;j2.NO_ERROR=0;j2.TIMEOUT=8;j2.HTTP_ERROR=6;fW.COMPLETE="complete";pW.EventType=KT;KT.OPEN="a";KT.CLOSE="b";KT.ERROR="c";KT.MESSAGE="d";dc.prototype.listen=dc.prototype.O;Nl.prototype.listenOnce=Nl.prototype.P;Nl.prototype.getLastError=Nl.prototype.Sa;Nl.prototype.getLastErrorCode=Nl.prototype.Ia;Nl.prototype.getStatus=Nl.prototype.da;Nl.prototype.getResponseJson=Nl.prototype.Wa;Nl.prototype.getResponseText=Nl.prototype.ja;Nl.prototype.send=Nl.prototype.ha;Nl.prototype.setWithCredentials=Nl.prototype.Oa;Kp.prototype.digest=Kp.prototype.l;Kp.prototype.reset=Kp.prototype.reset;Kp.prototype.update=Kp.prototype.j;Hs.prototype.add=Hs.prototype.add;Hs.prototype.multiply=Hs.prototype.R;Hs.prototype.modulo=Hs.prototype.gb;Hs.prototype.compare=Hs.prototype.X;Hs.prototype.toNumber=Hs.prototype.ea;Hs.prototype.toString=Hs.prototype.toString;Hs.prototype.getBits=Hs.prototype.D;Hs.fromNumber=Vm;Hs.fromString=WW;var wce=function(){return new Xb},Rce=function(){return B2()},MN=j2,Tce=fW,Cce=Gv,mU={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Sce=XT,FS=pW,bce=Nl,xce=Kp,u_=Hs;const gU="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let md=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};md.UNAUTHENTICATED=new md(null),md.GOOGLE_CREDENTIALS=new md("google-credentials-uid"),md.FIRST_PARTY=new md("first-party-uid"),md.MOCK_USER=new md("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let f1="9.23.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=new A3("@firebase/firestore");function yU(){return Nv.logLevel}function _n(t,...e){if(Nv.logLevel<=Rs.DEBUG){const a=e.map(X3);Nv.debug(`Firestore (${f1}): ${t}`,...a)}}function Dg(t,...e){if(Nv.logLevel<=Rs.ERROR){const a=e.map(X3);Nv.error(`Firestore (${f1}): ${t}`,...a)}}function R_(t,...e){if(Nv.logLevel<=Rs.WARN){const a=e.map(X3);Nv.warn(`Firestore (${f1}): ${t}`,...a)}}function X3(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(t="Unexpected state"){const e=`FIRESTORE (${f1}) INTERNAL ASSERTION FAILED: `+t;throw Dg(e),new Error(e)}function Uo(t,e){t||si()}function wi(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};let Wr=class extends Wm{constructor(e,a){super(e,a),this.code=e,this.message=a,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pg=class{constructor(){this.promise=new Promise((e,a)=>{this.resolve=e,this.reject=a})}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YW=class{constructor(e,a){this.user=a,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Pce=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,a){e.enqueueRetryable(()=>a(md.UNAUTHENTICATED))}shutdown(){}},Ece=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,a){this.changeListener=a,e.enqueueRetryable(()=>a(this.token.user))}shutdown(){this.changeListener=null}},Nce=class{constructor(e){this.t=e,this.currentUser=md.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,a){let r=this.i;const i=v=>this.i!==r?(r=this.i,a(v)):Promise.resolve();let l=new Pg;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Pg,e.enqueueRetryable(()=>i(this.currentUser))};const c=()=>{const v=l;e.enqueueRetryable(async()=>{await v.promise,await i(this.currentUser)})},n=v=>{_n("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),c()};this.t.onInit(v=>n(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?n(v):(_n("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Pg)}},0),c()}getToken(){const e=this.i,a=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(a).then(r=>this.i!==e?(_n("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Uo(typeof r.accessToken=="string"),new YW(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Uo(e===null||typeof e=="string"),new md(e)}},Oce=class{constructor(e,a,r){this.h=e,this.l=a,this.m=r,this.type="FirstParty",this.user=md.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}},Vce=class{constructor(e,a,r){this.h=e,this.l=a,this.m=r}getToken(){return Promise.resolve(new Oce(this.h,this.l,this.m))}start(e,a){e.enqueueRetryable(()=>a(md.FIRST_PARTY))}shutdown(){}invalidateToken(){}},zce=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Dce=class{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,a){const r=l=>{l.error!=null&&_n("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.T;return this.T=l.token,_n("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?a(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const i=l=>{_n("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.I.onInit(l=>i(l)),setTimeout(()=>{if(!this.appCheck){const l=this.I.getImmediate({optional:!0});l?i(l):_n("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(a=>a?(Uo(typeof a.token=="string"),this.T=a.token,new zce(a.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mce(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),a=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(a);else for(let r=0;r<t;r++)a[r]=Math.floor(256*Math.random());return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XW=class{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Mce(40);for(let l=0;l<i.length;++l)r.length<20&&i[l]<a&&(r+=e.charAt(i[l]%e.length))}return r}};function xs(t,e){return t<e?-1:t>e?1:0}function T_(t,e,a){return t.length===e.length&&t.every((r,i)=>a(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uh=class yb{constructor(e,a){if(this.seconds=e,this.nanoseconds=a,a<0)throw new Wr(nr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+a);if(a>=1e9)throw new Wr(nr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+a);if(e<-62135596800)throw new Wr(nr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Wr(nr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return yb.fromMillis(Date.now())}static fromDate(e){return yb.fromMillis(e.getTime())}static fromMillis(e){const a=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*a));return new yb(a,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xs(this.nanoseconds,e.nanoseconds):xs(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zi=class Ab{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ab(e)}static min(){return new Ab(new uh(0,0))}static max(){return new Ab(new uh(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let JW=class QD{constructor(e,a,r){a===void 0?a=0:a>e.length&&si(),r===void 0?r=e.length-a:r>e.length-a&&si(),this.segments=e,this.offset=a,this.len=r}get length(){return this.len}isEqual(e){return QD.comparator(this,e)===0}child(e){const a=this.segments.slice(this.offset,this.limit());return e instanceof QD?e.forEach(r=>{a.push(r)}):a.push(e),this.construct(a)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let a=0;a<this.length;a++)if(this.get(a)!==e.get(a))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let a=0;a<this.length;a++)if(this.get(a)!==e.get(a))return!1;return!0}forEach(e){for(let a=this.offset,r=this.limit();a<r;a++)e(this.segments[a])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,a){const r=Math.min(e.length,a.length);for(let i=0;i<r;i++){const l=e.get(i),c=a.get(i);if(l<c)return-1;if(l>c)return 1}return e.length<a.length?-1:e.length>a.length?1:0}},Hl=class vb extends JW{construct(e,a,r){return new vb(e,a,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const a=[];for(const r of e){if(r.indexOf("//")>=0)throw new Wr(nr.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);a.push(...r.split("/").filter(i=>i.length>0))}return new vb(a)}static emptyPath(){return new vb([])}};const Ice=/^[_a-zA-Z][_a-zA-Z0-9]*$/;let Zm=class H0 extends JW{construct(e,a,r){return new H0(e,a,r)}static isValidIdentifier(e){return Ice.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),H0.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new H0(["__name__"])}static fromServerFormat(e){const a=[];let r="",i=0;const l=()=>{if(r.length===0)throw new Wr(nr.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);a.push(r),r=""};let c=!1;for(;i<e.length;){const n=e[i];if(n==="\\"){if(i+1===e.length)throw new Wr(nr.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[i+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new Wr(nr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,i+=2}else n==="`"?(c=!c,i++):n!=="."||c?(r+=n,i++):(l(),i++)}if(l(),c)throw new Wr(nr.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new H0(a)}static emptyPath(){return new H0([])}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ei=class oR{constructor(e){this.path=e}static fromPath(e){return new oR(Hl.fromString(e))}static fromName(e){return new oR(Hl.fromString(e).popFirst(5))}static empty(){return new oR(Hl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Hl.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,a){return Hl.comparator(e.path,a.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oR(new Hl(e.slice()))}};function Lce(t,e){const a=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=zi.fromTimestamp(r===1e9?new uh(a+1,0):new uh(a,r));return new HR(i,ei.empty(),e)}function Fce(t){return new HR(t.readTime,t.key,-1)}let HR=class eM{constructor(e,a,r){this.readTime=e,this.documentKey=a,this.largestBatchId=r}static min(){return new eM(zi.min(),ei.empty(),-1)}static max(){return new eM(zi.max(),ei.empty(),-1)}};function kce(t,e){let a=t.readTime.compareTo(e.readTime);return a!==0?a:(a=ei.comparator(t.documentKey,e.documentKey),a!==0?a:xs(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uce="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";let Bce=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eC(t){if(t.code!==nr.FAILED_PRECONDITION||t.message!==Uce)throw t;_n("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fr=class Mh{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(a=>{this.isDone=!0,this.result=a,this.nextCallback&&this.nextCallback(a)},a=>{this.isDone=!0,this.error=a,this.catchCallback&&this.catchCallback(a)})}catch(e){return this.next(void 0,e)}next(e,a){return this.callbackAttached&&si(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(a,this.error):this.wrapSuccess(e,this.result):new Mh((r,i)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,i)},this.catchCallback=l=>{this.wrapFailure(a,l).next(r,i)}})}toPromise(){return new Promise((e,a)=>{this.next(e,a)})}wrapUserFunction(e){try{const a=e();return a instanceof Mh?a:Mh.resolve(a)}catch(a){return Mh.reject(a)}}wrapSuccess(e,a){return e?this.wrapUserFunction(()=>e(a)):Mh.resolve(a)}wrapFailure(e,a){return e?this.wrapUserFunction(()=>e(a)):Mh.reject(a)}static resolve(e){return new Mh((a,r)=>{a(e)})}static reject(e){return new Mh((a,r)=>{r(e)})}static waitFor(e){return new Mh((a,r)=>{let i=0,l=0,c=!1;e.forEach(n=>{++i,n.next(()=>{++l,c&&l===i&&a()},v=>r(v))}),c=!0,l===i&&a()})}static or(e){let a=Mh.resolve(!1);for(const r of e)a=a.next(i=>i?Mh.resolve(i):r());return a}static forEach(e,a){const r=[];return e.forEach((i,l)=>{r.push(a.call(this,i,l))}),this.waitFor(r)}static mapArray(e,a){return new Mh((r,i)=>{const l=e.length,c=new Array(l);let n=0;for(let v=0;v<l;v++){const R=v;a(e[R]).next(x=>{c[R]=x,++n,n===l&&r(c)},x=>i(x))}})}static doWhile(e,a){return new Mh((r,i)=>{const l=()=>{e()===!0?a().next(()=>{l()},i):r()};l()})}};function tC(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let J3=class{constructor(e,a){this.previousValue=e,a&&(a.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>a.writeSequenceNumber(r))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}};J3.ct=-1;function Y2(t){return t==null}function ex(t){return t===0&&1/t==-1/0}function jce(t){return typeof t=="number"&&Number.isInteger(t)&&!ex(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AU(t){let e=0;for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&e++;return e}function Zv(t,e){for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&e(a,t[a])}function QW(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _u=class tM{constructor(e,a){this.comparator=e,this.root=a||Ic.EMPTY}insert(e,a){return new tM(this.comparator,this.root.insert(e,a,this.comparator).copy(null,null,Ic.BLACK,null,null))}remove(e){return new tM(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ic.BLACK,null,null))}get(e){let a=this.root;for(;!a.isEmpty();){const r=this.comparator(e,a.key);if(r===0)return a.value;r<0?a=a.left:r>0&&(a=a.right)}return null}indexOf(e){let a=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return a+r.left.size;i<0?r=r.left:(a+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((a,r)=>(e(a,r),!1))}toString(){const e=[];return this.inorderTraversal((a,r)=>(e.push(`${a}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kS(this.root,e,this.comparator,!1)}getReverseIterator(){return new kS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kS(this.root,e,this.comparator,!0)}};class kS{constructor(e,a,r,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=a?r(e.key,a):1,a&&i&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const a={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return a}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ic{constructor(e,a,r,i,l){this.key=e,this.value=a,this.color=r??Ic.RED,this.left=i??Ic.EMPTY,this.right=l??Ic.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,a,r,i,l){return new Ic(e??this.key,a??this.value,r??this.color,i??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,a,r){let i=this;const l=r(e,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(e,a,r),null):l===0?i.copy(null,a,null,null,null):i.copy(null,null,null,null,i.right.insert(e,a,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ic.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,a){let r,i=this;if(a(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,a),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),a(e,i.key)===0){if(i.right.isEmpty())return Ic.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,a))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ic.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ic.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),a=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,a)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw si();const e=this.left.check();if(e!==this.right.check())throw si();return e+(this.isRed()?0:1)}}Ic.EMPTY=null,Ic.RED=!0,Ic.BLACK=!1;Ic.EMPTY=new class{constructor(){this.size=0}get key(){throw si()}get value(){throw si()}get color(){throw si()}get left(){throw si()}get right(){throw si()}copy(t,e,a,r,i){return this}insert(t,e,a){return new Ic(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e){this.comparator=e,this.data=new _u(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((a,r)=>(e(a),!1))}forEachInRange(e,a){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;a(i.key)}}forEachWhile(e,a){let r;for(r=a!==void 0?this.data.getIteratorFrom(a):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const a=this.data.getIteratorFrom(e);return a.hasNext()?a.getNext().key:null}getIterator(){return new vU(this.data.getIterator())}getIteratorFrom(e){return new vU(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let a=this;return a.size<e.size&&(a=e,e=this),e.forEach(r=>{a=a.add(r)}),a}isEqual(e){if(!(e instanceof Cd)||this.size!==e.size)return!1;const a=this.data.getIterator(),r=e.data.getIterator();for(;a.hasNext();){const i=a.getNext().key,l=r.getNext().key;if(this.comparator(i,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(a=>{e.push(a)}),e}toString(){const e=[];return this.forEach(a=>e.push(a)),"SortedSet("+e.toString()+")"}copy(e){const a=new Cd(this.comparator);return a.data=e,a}}class vU{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e){this.fields=e,e.sort(Zm.comparator)}static empty(){return new gf([])}unionWith(e){let a=new Cd(Zm.comparator);for(const r of this.fields)a=a.add(r);for(const r of e)a=a.add(r);return new gf(a.toArray())}covers(e){for(const a of this.fields)if(a.isPrefixOf(e))return!0;return!1}isEqual(e){return T_(this.fields,e.fields,(a,r)=>a.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eY extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e){this.binaryString=e}static fromBase64String(e){const a=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new eY("Invalid base64 string: "+i):i}}(e);return new xd(a)}static fromUint8Array(e){const a=function(r){let i="";for(let l=0;l<r.length;++l)i+=String.fromCharCode(r[l]);return i}(e);return new xd(a)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const a=new Uint8Array(e.length);for(let r=0;r<e.length;r++)a[r]=e.charCodeAt(r);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xs(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xd.EMPTY_BYTE_STRING=new xd("");const Gce=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xy(t){if(Uo(!!t),typeof t=="string"){let e=0;const a=Gce.exec(t);if(Uo(!!a),a[1]){let i=a[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mu(t.seconds),nanos:mu(t.nanos)}}function mu(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ov(t){return typeof t=="string"?xd.fromBase64String(t):xd.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q3(t){var e,a;return((a=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||a===void 0?void 0:a.stringValue)==="server_timestamp"}function eL(t){const e=t.mapValue.fields.__previous_value__;return Q3(e)?eL(e):e}function $R(t){const e=Xy(t.mapValue.fields.__local_write_time__.timestampValue);return new uh(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zce{constructor(e,a,r,i,l,c,n,v,R){this.databaseId=e,this.appId=a,this.persistenceKey=r,this.host=i,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=n,this.longPollingOptions=v,this.useFetchStreams=R}}class KR{constructor(e,a){this.projectId=e,this.database=a||"(default)"}static empty(){return new KR("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof KR&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US={mapValue:{}};function Vv(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Q3(t)?4:qce(t)?9007199254740991:10:si()}function qm(t,e){if(t===e)return!0;const a=Vv(t);if(a!==Vv(e))return!1;switch(a){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $R(t).isEqual($R(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const l=Xy(r.timestampValue),c=Xy(i.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Ov(r.bytesValue).isEqual(Ov(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return mu(r.geoPointValue.latitude)===mu(i.geoPointValue.latitude)&&mu(r.geoPointValue.longitude)===mu(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return mu(r.integerValue)===mu(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const l=mu(r.doubleValue),c=mu(i.doubleValue);return l===c?ex(l)===ex(c):isNaN(l)&&isNaN(c)}return!1}(t,e);case 9:return T_(t.arrayValue.values||[],e.arrayValue.values||[],qm);case 10:return function(r,i){const l=r.mapValue.fields||{},c=i.mapValue.fields||{};if(AU(l)!==AU(c))return!1;for(const n in l)if(l.hasOwnProperty(n)&&(c[n]===void 0||!qm(l[n],c[n])))return!1;return!0}(t,e);default:return si()}}function WR(t,e){return(t.values||[]).find(a=>qm(a,e))!==void 0}function C_(t,e){if(t===e)return 0;const a=Vv(t),r=Vv(e);if(a!==r)return xs(a,r);switch(a){case 0:case 9007199254740991:return 0;case 1:return xs(t.booleanValue,e.booleanValue);case 2:return function(i,l){const c=mu(i.integerValue||i.doubleValue),n=mu(l.integerValue||l.doubleValue);return c<n?-1:c>n?1:c===n?0:isNaN(c)?isNaN(n)?0:-1:1}(t,e);case 3:return _U(t.timestampValue,e.timestampValue);case 4:return _U($R(t),$R(e));case 5:return xs(t.stringValue,e.stringValue);case 6:return function(i,l){const c=Ov(i),n=Ov(l);return c.compareTo(n)}(t.bytesValue,e.bytesValue);case 7:return function(i,l){const c=i.split("/"),n=l.split("/");for(let v=0;v<c.length&&v<n.length;v++){const R=xs(c[v],n[v]);if(R!==0)return R}return xs(c.length,n.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,l){const c=xs(mu(i.latitude),mu(l.latitude));return c!==0?c:xs(mu(i.longitude),mu(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,l){const c=i.values||[],n=l.values||[];for(let v=0;v<c.length&&v<n.length;++v){const R=C_(c[v],n[v]);if(R)return R}return xs(c.length,n.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,l){if(i===US.mapValue&&l===US.mapValue)return 0;if(i===US.mapValue)return 1;if(l===US.mapValue)return-1;const c=i.fields||{},n=Object.keys(c),v=l.fields||{},R=Object.keys(v);n.sort(),R.sort();for(let x=0;x<n.length&&x<R.length;++x){const N=xs(n[x],R[x]);if(N!==0)return N;const L=C_(c[n[x]],v[R[x]]);if(L!==0)return L}return xs(n.length,R.length)}(t.mapValue,e.mapValue);default:throw si()}}function _U(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xs(t,e);const a=Xy(t),r=Xy(e),i=xs(a.seconds,r.seconds);return i!==0?i:xs(a.nanos,r.nanos)}function S_(t){return aM(t)}function aM(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=Xy(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ov(t.bytesValue).toBase64():"referenceValue"in t?(a=t.referenceValue,ei.fromName(a).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",l=!0;for(const c of r.values||[])l?l=!1:i+=",",i+=aM(c);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let l="{",c=!0;for(const n of i)c?c=!1:l+=",",l+=`${n}:${aM(r.fields[n])}`;return l+"}"}(t.mapValue):si();var e,a}function wU(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function rM(t){return!!t&&"integerValue"in t}function tL(t){return!!t&&"arrayValue"in t}function RU(t){return!!t&&"nullValue"in t}function TU(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function _b(t){return!!t&&"mapValue"in t}function yR(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Zv(t.mapValue.fields,(a,r)=>e.mapValue.fields[a]=yR(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let a=0;a<(t.arrayValue.values||[]).length;++a)e.arrayValue.values[a]=yR(t.arrayValue.values[a]);return e}return Object.assign({},t)}function qce(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e){this.value=e}static empty(){return new Ih({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let a=this.value;for(let r=0;r<e.length-1;++r)if(a=(a.mapValue.fields||{})[e.get(r)],!_b(a))return null;return a=(a.mapValue.fields||{})[e.lastSegment()],a||null}}set(e,a){this.getFieldsMap(e.popLast())[e.lastSegment()]=yR(a)}setAll(e){let a=Zm.emptyPath(),r={},i=[];e.forEach((c,n)=>{if(!a.isImmediateParentOf(n)){const v=this.getFieldsMap(a);this.applyChanges(v,r,i),r={},i=[],a=n.popLast()}c?r[n.lastSegment()]=yR(c):i.push(n.lastSegment())});const l=this.getFieldsMap(a);this.applyChanges(l,r,i)}delete(e){const a=this.field(e.popLast());_b(a)&&a.mapValue.fields&&delete a.mapValue.fields[e.lastSegment()]}isEqual(e){return qm(this.value,e.value)}getFieldsMap(e){let a=this.value;a.mapValue.fields||(a.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=a.mapValue.fields[e.get(r)];_b(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},a.mapValue.fields[e.get(r)]=i),a=i}return a.mapValue.fields}applyChanges(e,a,r){Zv(a,(i,l)=>e[i]=l);for(const i of r)delete e[i]}clone(){return new Ih(yR(this.value))}}function tY(t){const e=[];return Zv(t.fields,(a,r)=>{const i=new Zm([a]);if(_b(r)){const l=tY(r.mapValue).fields;if(l.length===0)e.push(i);else for(const c of l)e.push(i.child(c))}else e.push(i)}),new gf(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,a,r,i,l,c,n){this.key=e,this.documentType=a,this.version=r,this.readTime=i,this.createTime=l,this.data=c,this.documentState=n}static newInvalidDocument(e){return new Ad(e,0,zi.min(),zi.min(),zi.min(),Ih.empty(),0)}static newFoundDocument(e,a,r,i){return new Ad(e,1,a,zi.min(),r,i,0)}static newNoDocument(e,a){return new Ad(e,2,a,zi.min(),zi.min(),Ih.empty(),0)}static newUnknownDocument(e,a){return new Ad(e,3,a,zi.min(),zi.min(),Ih.empty(),2)}convertToFoundDocument(e,a){return!this.createTime.isEqual(zi.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=a,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ih.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ih.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=zi.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ad&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ad(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,a){this.position=e,this.inclusive=a}}function CU(t,e,a){let r=0;for(let i=0;i<t.position.length;i++){const l=e[i],c=t.position[i];if(l.field.isKeyField()?r=ei.comparator(ei.fromName(c.referenceValue),a.key):r=C_(c,a.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function SU(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let a=0;a<t.position.length;a++)if(!qm(t.position[a],e.position[a]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e,a="asc"){this.field=e,this.dir=a}}function Hce(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aY{}class Au extends aY{constructor(e,a,r){super(),this.field=e,this.op=a,this.value=r}static create(e,a,r){return e.isKeyField()?a==="in"||a==="not-in"?this.createKeyFieldInFilter(e,a,r):new Kce(e,a,r):a==="array-contains"?new Xce(e,r):a==="in"?new Jce(e,r):a==="not-in"?new Qce(e,r):a==="array-contains-any"?new ede(e,r):new Au(e,a,r)}static createKeyFieldInFilter(e,a,r){return a==="in"?new Wce(e,r):new Yce(e,r)}matches(e){const a=e.data.field(this.field);return this.op==="!="?a!==null&&this.matchesComparison(C_(a,this.value)):a!==null&&Vv(this.value)===Vv(a)&&this.matchesComparison(C_(a,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return si()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Wp extends aY{constructor(e,a){super(),this.filters=e,this.op=a,this.lt=null}static create(e,a){return new Wp(e,a)}matches(e){return rY(this)?this.filters.find(a=>!a.matches(e))===void 0:this.filters.find(a=>a.matches(e))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce((e,a)=>e.concat(a.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(a=>a.isInequality());return e!==null?e.field:null}ft(e){for(const a of this.getFlattenedFilters())if(e(a))return a;return null}}function rY(t){return t.op==="and"}function nY(t){return $ce(t)&&rY(t)}function $ce(t){for(const e of t.filters)if(e instanceof Wp)return!1;return!0}function nM(t){if(t instanceof Au)return t.field.canonicalString()+t.op.toString()+S_(t.value);if(nY(t))return t.filters.map(e=>nM(e)).join(",");{const e=t.filters.map(a=>nM(a)).join(",");return`${t.op}(${e})`}}function iY(t,e){return t instanceof Au?function(a,r){return r instanceof Au&&a.op===r.op&&a.field.isEqual(r.field)&&qm(a.value,r.value)}(t,e):t instanceof Wp?function(a,r){return r instanceof Wp&&a.op===r.op&&a.filters.length===r.filters.length?a.filters.reduce((i,l,c)=>i&&iY(l,r.filters[c]),!0):!1}(t,e):void si()}function sY(t){return t instanceof Au?function(e){return`${e.field.canonicalString()} ${e.op} ${S_(e.value)}`}(t):t instanceof Wp?function(e){return e.op.toString()+" {"+e.getFilters().map(sY).join(" ,")+"}"}(t):"Filter"}class Kce extends Au{constructor(e,a,r){super(e,a,r),this.key=ei.fromName(r.referenceValue)}matches(e){const a=ei.comparator(e.key,this.key);return this.matchesComparison(a)}}class Wce extends Au{constructor(e,a){super(e,"in",a),this.keys=oY("in",a)}matches(e){return this.keys.some(a=>a.isEqual(e.key))}}class Yce extends Au{constructor(e,a){super(e,"not-in",a),this.keys=oY("not-in",a)}matches(e){return!this.keys.some(a=>a.isEqual(e.key))}}function oY(t,e){var a;return(((a=e.arrayValue)===null||a===void 0?void 0:a.values)||[]).map(r=>ei.fromName(r.referenceValue))}class Xce extends Au{constructor(e,a){super(e,"array-contains",a)}matches(e){const a=e.data.field(this.field);return tL(a)&&WR(a.arrayValue,this.value)}}class Jce extends Au{constructor(e,a){super(e,"in",a)}matches(e){const a=e.data.field(this.field);return a!==null&&WR(this.value.arrayValue,a)}}class Qce extends Au{constructor(e,a){super(e,"not-in",a)}matches(e){if(WR(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const a=e.data.field(this.field);return a!==null&&!WR(this.value.arrayValue,a)}}class ede extends Au{constructor(e,a){super(e,"array-contains-any",a)}matches(e){const a=e.data.field(this.field);return!(!tL(a)||!a.arrayValue.values)&&a.arrayValue.values.some(r=>WR(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tde{constructor(e,a=null,r=[],i=[],l=null,c=null,n=null){this.path=e,this.collectionGroup=a,this.orderBy=r,this.filters=i,this.limit=l,this.startAt=c,this.endAt=n,this.dt=null}}function bU(t,e=null,a=[],r=[],i=null,l=null,c=null){return new tde(t,e,a,r,i,l,c)}function aL(t){const e=wi(t);if(e.dt===null){let a=e.path.canonicalString();e.collectionGroup!==null&&(a+="|cg:"+e.collectionGroup),a+="|f:",a+=e.filters.map(r=>nM(r)).join(","),a+="|ob:",a+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Y2(e.limit)||(a+="|l:",a+=e.limit),e.startAt&&(a+="|lb:",a+=e.startAt.inclusive?"b:":"a:",a+=e.startAt.position.map(r=>S_(r)).join(",")),e.endAt&&(a+="|ub:",a+=e.endAt.inclusive?"a:":"b:",a+=e.endAt.position.map(r=>S_(r)).join(",")),e.dt=a}return e.dt}function rL(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let a=0;a<t.orderBy.length;a++)if(!Hce(t.orderBy[a],e.orderBy[a]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let a=0;a<t.filters.length;a++)if(!iY(t.filters[a],e.filters[a]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!SU(t.startAt,e.startAt)&&SU(t.endAt,e.endAt)}function iM(t){return ei.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,a=null,r=[],i=[],l=null,c="F",n=null,v=null){this.path=e,this.collectionGroup=a,this.explicitOrderBy=r,this.filters=i,this.limit=l,this.limitType=c,this.startAt=n,this.endAt=v,this.wt=null,this._t=null,this.startAt,this.endAt}}function ade(t,e,a,r,i,l,c,n){return new p1(t,e,a,r,i,l,c,n)}function X2(t){return new p1(t)}function xU(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function nL(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function J2(t){for(const e of t.filters){const a=e.getFirstInequalityField();if(a!==null)return a}return null}function lY(t){return t.collectionGroup!==null}function d_(t){const e=wi(t);if(e.wt===null){e.wt=[];const a=J2(e),r=nL(e);if(a!==null&&r===null)a.isKeyField()||e.wt.push(new c_(a)),e.wt.push(new c_(Zm.keyField(),"asc"));else{let i=!1;for(const l of e.explicitOrderBy)e.wt.push(l),l.field.isKeyField()&&(i=!0);if(!i){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new c_(Zm.keyField(),l))}}}return e.wt}function Mg(t){const e=wi(t);if(!e._t)if(e.limitType==="F")e._t=bU(e.path,e.collectionGroup,d_(e),e.filters,e.limit,e.startAt,e.endAt);else{const a=[];for(const l of d_(e)){const c=l.dir==="desc"?"asc":"desc";a.push(new c_(l.field,c))}const r=e.endAt?new tx(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new tx(e.startAt.position,e.startAt.inclusive):null;e._t=bU(e.path,e.collectionGroup,a,e.filters,e.limit,r,i)}return e._t}function sM(t,e){e.getFirstInequalityField(),J2(t);const a=t.filters.concat([e]);return new p1(t.path,t.collectionGroup,t.explicitOrderBy.slice(),a,t.limit,t.limitType,t.startAt,t.endAt)}function oM(t,e,a){return new p1(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,a,t.startAt,t.endAt)}function Q2(t,e){return rL(Mg(t),Mg(e))&&t.limitType===e.limitType}function uY(t){return`${aL(Mg(t))}|lt:${t.limitType}`}function lM(t){return`Query(target=${function(e){let a=e.path.canonicalString();return e.collectionGroup!==null&&(a+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(a+=`, filters: [${e.filters.map(r=>sY(r)).join(", ")}]`),Y2(e.limit)||(a+=", limit: "+e.limit),e.orderBy.length>0&&(a+=`, orderBy: [${e.orderBy.map(r=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(r)).join(", ")}]`),e.startAt&&(a+=", startAt: ",a+=e.startAt.inclusive?"b:":"a:",a+=e.startAt.position.map(r=>S_(r)).join(",")),e.endAt&&(a+=", endAt: ",a+=e.endAt.inclusive?"a:":"b:",a+=e.endAt.position.map(r=>S_(r)).join(",")),`Target(${a})`}(Mg(t))}; limitType=${t.limitType})`}function eP(t,e){return e.isFoundDocument()&&function(a,r){const i=r.key.path;return a.collectionGroup!==null?r.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(i):ei.isDocumentKey(a.path)?a.path.isEqual(i):a.path.isImmediateParentOf(i)}(t,e)&&function(a,r){for(const i of d_(a))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(a,r){for(const i of a.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(a,r){return!(a.startAt&&!function(i,l,c){const n=CU(i,l,c);return i.inclusive?n<=0:n<0}(a.startAt,d_(a),r)||a.endAt&&!function(i,l,c){const n=CU(i,l,c);return i.inclusive?n>=0:n>0}(a.endAt,d_(a),r))}(t,e)}function rde(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function cY(t){return(e,a)=>{let r=!1;for(const i of d_(t)){const l=nde(i,e,a);if(l!==0)return l;r=r||i.field.isKeyField()}return 0}}function nde(t,e,a){const r=t.field.isKeyField()?ei.comparator(e.key,a.key):function(i,l,c){const n=l.data.field(i),v=c.data.field(i);return n!==null&&v!==null?C_(n,v):si()}(t.field,e,a);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return si()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,a){this.mapKeyFn=e,this.equalsFn=a,this.inner={},this.innerSize=0}get(e){const a=this.mapKeyFn(e),r=this.inner[a];if(r!==void 0){for(const[i,l]of r)if(this.equalsFn(i,e))return l}}has(e){return this.get(e)!==void 0}set(e,a){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,a]],void this.innerSize++;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return void(i[l]=[e,a]);i.push([e,a]),this.innerSize++}delete(e){const a=this.mapKeyFn(e),r=this.inner[a];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[a]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Zv(this.inner,(a,r)=>{for(const[i,l]of r)e(i,l)})}isEmpty(){return QW(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ide=new _u(ei.comparator);function Ig(){return ide}const dY=new _u(ei.comparator);function lR(...t){let e=dY;for(const a of t)e=e.insert(a.key,a);return e}function hY(t){let e=dY;return t.forEach((a,r)=>e=e.insert(a,r.overlayedDocument)),e}function hv(){return AR()}function fY(){return AR()}function AR(){return new m1(t=>t.toString(),(t,e)=>t.isEqual(e))}const sde=new _u(ei.comparator),ode=new Cd(ei.comparator);function Yi(...t){let e=ode;for(const a of t)e=e.add(a);return e}const lde=new Cd(xs);function ude(){return lde}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pY(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ex(e)?"-0":e}}function mY(t){return{integerValue:""+t}}function cde(t,e){return jce(e)?mY(e):pY(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(){this._=void 0}}function dde(t,e,a){return t instanceof ax?function(r,i){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Q3(i)&&(i=eL(i)),i&&(l.fields.__previous_value__=i),{mapValue:l}}(a,e):t instanceof YR?yY(t,e):t instanceof XR?AY(t,e):function(r,i){const l=gY(r,i),c=PU(l)+PU(r.gt);return rM(l)&&rM(r.gt)?mY(c):pY(r.serializer,c)}(t,e)}function hde(t,e,a){return t instanceof YR?yY(t,e):t instanceof XR?AY(t,e):a}function gY(t,e){return t instanceof rx?rM(a=e)||function(r){return!!r&&"doubleValue"in r}(a)?e:{integerValue:0}:null;var a}class ax extends tP{}class YR extends tP{constructor(e){super(),this.elements=e}}function yY(t,e){const a=vY(e);for(const r of t.elements)a.some(i=>qm(i,r))||a.push(r);return{arrayValue:{values:a}}}class XR extends tP{constructor(e){super(),this.elements=e}}function AY(t,e){let a=vY(e);for(const r of t.elements)a=a.filter(i=>!qm(i,r));return{arrayValue:{values:a}}}class rx extends tP{constructor(e,a){super(),this.serializer=e,this.gt=a}}function PU(t){return mu(t.integerValue||t.doubleValue)}function vY(t){return tL(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function fde(t,e){return t.field.isEqual(e.field)&&function(a,r){return a instanceof YR&&r instanceof YR||a instanceof XR&&r instanceof XR?T_(a.elements,r.elements,qm):a instanceof rx&&r instanceof rx?qm(a.gt,r.gt):a instanceof ax&&r instanceof ax}(t.transform,e.transform)}class pde{constructor(e,a){this.version=e,this.transformResults=a}}class ch{constructor(e,a){this.updateTime=e,this.exists=a}static none(){return new ch}static exists(e){return new ch(void 0,e)}static updateTime(e){return new ch(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wb(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class aP{}function _Y(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new rP(t.key,ch.none()):new aC(t.key,t.data,ch.none());{const a=t.data,r=Ih.empty();let i=new Cd(Zm.comparator);for(let l of e.fields)if(!i.has(l)){let c=a.field(l);c===null&&l.length>1&&(l=l.popLast(),c=a.field(l)),c===null?r.delete(l):r.set(l,c),i=i.add(l)}return new sA(t.key,r,new gf(i.toArray()),ch.none())}}function mde(t,e,a){t instanceof aC?function(r,i,l){const c=r.value.clone(),n=NU(r.fieldTransforms,i,l.transformResults);c.setAll(n),i.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(t,e,a):t instanceof sA?function(r,i,l){if(!wb(r.precondition,i))return void i.convertToUnknownDocument(l.version);const c=NU(r.fieldTransforms,i,l.transformResults),n=i.data;n.setAll(wY(r)),n.setAll(c),i.convertToFoundDocument(l.version,n).setHasCommittedMutations()}(t,e,a):function(r,i,l){i.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,a)}function vR(t,e,a,r){return t instanceof aC?function(i,l,c,n){if(!wb(i.precondition,l))return c;const v=i.value.clone(),R=OU(i.fieldTransforms,n,l);return v.setAll(R),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),null}(t,e,a,r):t instanceof sA?function(i,l,c,n){if(!wb(i.precondition,l))return c;const v=OU(i.fieldTransforms,n,l),R=l.data;return R.setAll(wY(i)),R.setAll(v),l.convertToFoundDocument(l.version,R).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(x=>x.field))}(t,e,a,r):function(i,l,c){return wb(i.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(t,e,a)}function gde(t,e){let a=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),l=gY(r.transform,i||null);l!=null&&(a===null&&(a=Ih.empty()),a.set(r.field,l))}return a||null}function EU(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(a,r){return a===void 0&&r===void 0||!(!a||!r)&&T_(a,r,(i,l)=>fde(i,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class aC extends aP{constructor(e,a,r,i=[]){super(),this.key=e,this.value=a,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class sA extends aP{constructor(e,a,r,i,l=[]){super(),this.key=e,this.data=a,this.fieldMask=r,this.precondition=i,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function wY(t){const e=new Map;return t.fieldMask.fields.forEach(a=>{if(!a.isEmpty()){const r=t.data.field(a);e.set(a,r)}}),e}function NU(t,e,a){const r=new Map;Uo(t.length===a.length);for(let i=0;i<a.length;i++){const l=t[i],c=l.transform,n=e.data.field(l.field);r.set(l.field,hde(c,n,a[i]))}return r}function OU(t,e,a){const r=new Map;for(const i of t){const l=i.transform,c=a.data.field(i.field);r.set(i.field,dde(l,c,e))}return r}class rP extends aP{constructor(e,a){super(),this.key=e,this.precondition=a,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yde extends aP{constructor(e,a){super(),this.key=e,this.precondition=a,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ade{constructor(e,a,r,i){this.batchId=e,this.localWriteTime=a,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,a){const r=a.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(e.key)&&mde(l,e,r[i])}}applyToLocalView(e,a){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(a=vR(r,e,a,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(a=vR(r,e,a,this.localWriteTime));return a}applyToLocalDocumentSet(e,a){const r=fY();return this.mutations.forEach(i=>{const l=e.get(i.key),c=l.overlayedDocument;let n=this.applyToLocalView(c,l.mutatedFields);n=a.has(i.key)?null:n;const v=_Y(c,n);v!==null&&r.set(i.key,v),c.isValidDocument()||c.convertToNoDocument(zi.min())}),r}keys(){return this.mutations.reduce((e,a)=>e.add(a.key),Yi())}isEqual(e){return this.batchId===e.batchId&&T_(this.mutations,e.mutations,(a,r)=>EU(a,r))&&T_(this.baseMutations,e.baseMutations,(a,r)=>EU(a,r))}}class iL{constructor(e,a,r,i){this.batch=e,this.commitVersion=a,this.mutationResults=r,this.docVersions=i}static from(e,a,r){Uo(e.mutations.length===r.length);let i=sde;const l=e.mutations;for(let c=0;c<l.length;c++)i=i.insert(l[c].key,r[c].version);return new iL(e,a,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vde{constructor(e,a){this.largestBatchId=e,this.mutation=a}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _de{constructor(e,a){this.count=e,this.unchangedNames=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fu,cs;function wde(t){switch(t){default:return si();case nr.CANCELLED:case nr.UNKNOWN:case nr.DEADLINE_EXCEEDED:case nr.RESOURCE_EXHAUSTED:case nr.INTERNAL:case nr.UNAVAILABLE:case nr.UNAUTHENTICATED:return!1;case nr.INVALID_ARGUMENT:case nr.NOT_FOUND:case nr.ALREADY_EXISTS:case nr.PERMISSION_DENIED:case nr.FAILED_PRECONDITION:case nr.ABORTED:case nr.OUT_OF_RANGE:case nr.UNIMPLEMENTED:case nr.DATA_LOSS:return!0}}function RY(t){if(t===void 0)return Dg("GRPC error has no .code"),nr.UNKNOWN;switch(t){case fu.OK:return nr.OK;case fu.CANCELLED:return nr.CANCELLED;case fu.UNKNOWN:return nr.UNKNOWN;case fu.DEADLINE_EXCEEDED:return nr.DEADLINE_EXCEEDED;case fu.RESOURCE_EXHAUSTED:return nr.RESOURCE_EXHAUSTED;case fu.INTERNAL:return nr.INTERNAL;case fu.UNAVAILABLE:return nr.UNAVAILABLE;case fu.UNAUTHENTICATED:return nr.UNAUTHENTICATED;case fu.INVALID_ARGUMENT:return nr.INVALID_ARGUMENT;case fu.NOT_FOUND:return nr.NOT_FOUND;case fu.ALREADY_EXISTS:return nr.ALREADY_EXISTS;case fu.PERMISSION_DENIED:return nr.PERMISSION_DENIED;case fu.FAILED_PRECONDITION:return nr.FAILED_PRECONDITION;case fu.ABORTED:return nr.ABORTED;case fu.OUT_OF_RANGE:return nr.OUT_OF_RANGE;case fu.UNIMPLEMENTED:return nr.UNIMPLEMENTED;case fu.DATA_LOSS:return nr.DATA_LOSS;default:return si()}}(cs=fu||(fu={}))[cs.OK=0]="OK",cs[cs.CANCELLED=1]="CANCELLED",cs[cs.UNKNOWN=2]="UNKNOWN",cs[cs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cs[cs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cs[cs.NOT_FOUND=5]="NOT_FOUND",cs[cs.ALREADY_EXISTS=6]="ALREADY_EXISTS",cs[cs.PERMISSION_DENIED=7]="PERMISSION_DENIED",cs[cs.UNAUTHENTICATED=16]="UNAUTHENTICATED",cs[cs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cs[cs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cs[cs.ABORTED=10]="ABORTED",cs[cs.OUT_OF_RANGE=11]="OUT_OF_RANGE",cs[cs.UNIMPLEMENTED=12]="UNIMPLEMENTED",cs[cs.INTERNAL=13]="INTERNAL",cs[cs.UNAVAILABLE=14]="UNAVAILABLE",cs[cs.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return BS}static getOrCreateInstance(){return BS===null&&(BS=new sL),BS}onExistenceFilterMismatch(e){const a=Symbol();return this.onExistenceFilterMismatchCallbacks.set(a,e),()=>this.onExistenceFilterMismatchCallbacks.delete(a)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(a=>a(e))}}let BS=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rde(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tde=new u_([4294967295,4294967295],0);function VU(t){const e=Rde().encode(t),a=new xce;return a.update(e),new Uint8Array(a.digest())}function zU(t){const e=new DataView(t.buffer),a=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new u_([a,r],0),new u_([i,l],0)]}class oL{constructor(e,a,r){if(this.bitmap=e,this.padding=a,this.hashCount=r,a<0||a>=8)throw new uR(`Invalid padding: ${a}`);if(r<0)throw new uR(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new uR(`Invalid hash count: ${r}`);if(e.length===0&&a!==0)throw new uR(`Invalid padding when bitmap length is 0: ${a}`);this.It=8*e.length-a,this.Tt=u_.fromNumber(this.It)}Et(e,a,r){let i=e.add(a.multiply(u_.fromNumber(r)));return i.compare(Tde)===1&&(i=new u_([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}vt(e){if(this.It===0)return!1;const a=VU(e),[r,i]=zU(a);for(let l=0;l<this.hashCount;l++){const c=this.Et(r,i,l);if(!this.At(c))return!1}return!0}static create(e,a,r){const i=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new oL(l,i,a);return r.forEach(n=>c.insert(n)),c}insert(e){if(this.It===0)return;const a=VU(e),[r,i]=zU(a);for(let l=0;l<this.hashCount;l++){const c=this.Et(r,i,l);this.Rt(c)}}Rt(e){const a=Math.floor(e/8),r=e%8;this.bitmap[a]|=1<<r}}class uR extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e,a,r,i,l){this.snapshotVersion=e,this.targetChanges=a,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,a,r){const i=new Map;return i.set(e,rC.createSynthesizedTargetChangeForCurrentChange(e,a,r)),new nP(zi.min(),i,new _u(xs),Ig(),Yi())}}class rC{constructor(e,a,r,i,l){this.resumeToken=e,this.current=a,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,a,r){return new rC(r,a,Yi(),Yi(),Yi())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e,a,r,i){this.Pt=e,this.removedTargetIds=a,this.key=r,this.bt=i}}let TY=class{constructor(e,a){this.targetId=e,this.Vt=a}};class CY{constructor(e,a,r=xd.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=a,this.resumeToken=r,this.cause=i}}class DU{constructor(){this.St=0,this.Dt=IU(),this.Ct=xd.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return this.St!==0}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Yi(),a=Yi(),r=Yi();return this.Dt.forEach((i,l)=>{switch(l){case 0:e=e.add(i);break;case 2:a=a.add(i);break;case 1:r=r.add(i);break;default:si()}}),new rC(this.Ct,this.xt,e,a,r)}Ft(){this.Nt=!1,this.Dt=IU()}Bt(e,a){this.Nt=!0,this.Dt=this.Dt.insert(e,a)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Cde{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Ig(),this.zt=MU(),this.Wt=new _u(xs)}Ht(e){for(const a of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(a,e.bt):this.Yt(a,e.key,e.bt);for(const a of e.removedTargetIds)this.Yt(a,e.key,e.bt)}Xt(e){this.forEachTarget(e,a=>{const r=this.Zt(a);switch(e.state){case 0:this.te(a)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(a);break;case 3:this.te(a)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(a)&&(this.ee(a),r.$t(e.resumeToken));break;default:si()}})}forEachTarget(e,a){e.targetIds.length>0?e.targetIds.forEach(a):this.Qt.forEach((r,i)=>{this.te(i)&&a(i)})}ne(e){var a;const r=e.targetId,i=e.Vt.count,l=this.se(r);if(l){const c=l.target;if(iM(c))if(i===0){const n=new ei(c.path);this.Yt(r,n,Ad.newNoDocument(n,zi.min()))}else Uo(i===1);else{const n=this.ie(r);if(n!==i){const v=this.re(e,n);if(v!==0){this.ee(r);const R=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(r,R)}(a=sL.instance)===null||a===void 0||a.notifyOnExistenceFilterMismatch(function(R,x,N){var L,F,j,$,H,W;const ee={localCacheCount:x,existenceFilterCount:N.count},se=N.unchangedNames;return se&&(ee.bloomFilter={applied:R===0,hashCount:(L=se==null?void 0:se.hashCount)!==null&&L!==void 0?L:0,bitmapLength:($=(j=(F=se==null?void 0:se.bits)===null||F===void 0?void 0:F.bitmap)===null||j===void 0?void 0:j.length)!==null&&$!==void 0?$:0,padding:(W=(H=se==null?void 0:se.bits)===null||H===void 0?void 0:H.padding)!==null&&W!==void 0?W:0}),ee}(v,n,e.Vt))}}}}re(e,a){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:l="",padding:c=0},hashCount:n=0}=r;let v,R;try{v=Ov(l).toUint8Array()}catch(x){if(x instanceof eY)return R_("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw x}try{R=new oL(v,c,n)}catch(x){return R_(x instanceof uR?"BloomFilter error: ":"Applying bloom filter failed: ",x),1}return R.It===0?1:i!==a-this.oe(e.targetId,R)?2:0}oe(e,a){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(l=>{const c=this.Gt.ue(),n=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;a.vt(n)||(this.Yt(e,l,null),i++)}),i}ce(e){const a=new Map;this.Qt.forEach((l,c)=>{const n=this.se(c);if(n){if(l.current&&iM(n.target)){const v=new ei(n.target.path);this.jt.get(v)!==null||this.ae(c,v)||this.Yt(c,v,Ad.newNoDocument(v,e))}l.Mt&&(a.set(c,l.Ot()),l.Ft())}});let r=Yi();this.zt.forEach((l,c)=>{let n=!0;c.forEachWhile(v=>{const R=this.se(v);return!R||R.purpose==="TargetPurposeLimboResolution"||(n=!1,!1)}),n&&(r=r.add(l))}),this.jt.forEach((l,c)=>c.setReadTime(e));const i=new nP(e,a,this.Wt,this.jt,r);return this.jt=Ig(),this.zt=MU(),this.Wt=new _u(xs),i}Jt(e,a){if(!this.te(e))return;const r=this.ae(e,a.key)?2:0;this.Zt(e).Bt(a.key,r),this.jt=this.jt.insert(a.key,a),this.zt=this.zt.insert(a.key,this.he(a.key).add(e))}Yt(e,a,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,a)?i.Bt(a,1):i.Lt(a),this.zt=this.zt.insert(a,this.he(a).delete(e)),r&&(this.jt=this.jt.insert(a,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const a=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+a.addedDocuments.size-a.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let a=this.Qt.get(e);return a||(a=new DU,this.Qt.set(e,a)),a}he(e){let a=this.zt.get(e);return a||(a=new Cd(xs),this.zt=this.zt.insert(e,a)),a}te(e){const a=this.se(e)!==null;return a||_n("WatchChangeAggregator","Detected inactive target",e),a}se(e){const a=this.Qt.get(e);return a&&a.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new DU),this.Gt.getRemoteKeysForTarget(e).forEach(a=>{this.Yt(e,a,null)})}ae(e,a){return this.Gt.getRemoteKeysForTarget(e).has(a)}}function MU(){return new _u(ei.comparator)}function IU(){return new _u(ei.comparator)}const Sde={asc:"ASCENDING",desc:"DESCENDING"},bde={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xde={and:"AND",or:"OR"};class Pde{constructor(e,a){this.databaseId=e,this.useProto3Json=a}}function uM(t,e){return t.useProto3Json||Y2(e)?e:{value:e}}function nx(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function SY(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Ede(t,e){return nx(t,e.toTimestamp())}function Um(t){return Uo(!!t),zi.fromTimestamp(function(e){const a=Xy(e);return new uh(a.seconds,a.nanos)}(t))}function lL(t,e){return function(a){return new Hl(["projects",a.projectId,"databases",a.database])}(t).child("documents").child(e).canonicalString()}function bY(t){const e=Hl.fromString(t);return Uo(NY(e)),e}function cM(t,e){return lL(t.databaseId,e.path)}function IN(t,e){const a=bY(e);if(a.get(1)!==t.databaseId.projectId)throw new Wr(nr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+a.get(1)+" vs "+t.databaseId.projectId);if(a.get(3)!==t.databaseId.database)throw new Wr(nr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+a.get(3)+" vs "+t.databaseId.database);return new ei(xY(a))}function dM(t,e){return lL(t.databaseId,e)}function Nde(t){const e=bY(t);return e.length===4?Hl.emptyPath():xY(e)}function hM(t){return new Hl(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function xY(t){return Uo(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function LU(t,e,a){return{name:cM(t,e),fields:a.value.mapValue.fields}}function Ode(t,e){let a;if("targetChange"in e){e.targetChange;const r=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:si()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],l=function(v,R){return v.useProto3Json?(Uo(R===void 0||typeof R=="string"),xd.fromBase64String(R||"")):(Uo(R===void 0||R instanceof Uint8Array),xd.fromUint8Array(R||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,n=c&&function(v){const R=v.code===void 0?nr.UNKNOWN:RY(v.code);return new Wr(R,v.message||"")}(c);a=new CY(r,i,l,n||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=IN(t,r.document.name),l=Um(r.document.updateTime),c=r.document.createTime?Um(r.document.createTime):zi.min(),n=new Ih({mapValue:{fields:r.document.fields}}),v=Ad.newFoundDocument(i,l,c,n),R=r.targetIds||[],x=r.removedTargetIds||[];a=new Rb(R,x,v.key,v)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=IN(t,r.document),l=r.readTime?Um(r.readTime):zi.min(),c=Ad.newNoDocument(i,l),n=r.removedTargetIds||[];a=new Rb([],n,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=IN(t,r.document),l=r.removedTargetIds||[];a=new Rb([],l,i,null)}else{if(!("filter"in e))return si();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:l}=r,c=new _de(i,l),n=r.targetId;a=new TY(n,c)}}return a}function Vde(t,e){let a;if(e instanceof aC)a={update:LU(t,e.key,e.value)};else if(e instanceof rP)a={delete:cM(t,e.key)};else if(e instanceof sA)a={update:LU(t,e.key,e.data),updateMask:Bde(e.fieldMask)};else{if(!(e instanceof yde))return si();a={verify:cM(t,e.key)}}return e.fieldTransforms.length>0&&(a.updateTransforms=e.fieldTransforms.map(r=>function(i,l){const c=l.transform;if(c instanceof ax)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof YR)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof XR)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof rx)return{fieldPath:l.field.canonicalString(),increment:c.gt};throw si()}(0,r))),e.precondition.isNone||(a.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:Ede(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:si()}(t,e.precondition)),a}function zde(t,e){return t&&t.length>0?(Uo(e!==void 0),t.map(a=>function(r,i){let l=r.updateTime?Um(r.updateTime):Um(i);return l.isEqual(zi.min())&&(l=Um(i)),new pde(l,r.transformResults||[])}(a,e))):[]}function Dde(t,e){return{documents:[dM(t,e.path)]}}function Mde(t,e){const a={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(a.parent=dM(t,r),a.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a.parent=dM(t,r.popLast()),a.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(v){if(v.length!==0)return EY(Wp.create(v,"and"))}(e.filters);i&&(a.structuredQuery.where=i);const l=function(v){if(v.length!==0)return v.map(R=>function(x){return{field:$0(x.field),direction:Fde(x.dir)}}(R))}(e.orderBy);l&&(a.structuredQuery.orderBy=l);const c=uM(t,e.limit);var n;return c!==null&&(a.structuredQuery.limit=c),e.startAt&&(a.structuredQuery.startAt={before:(n=e.startAt).inclusive,values:n.position}),e.endAt&&(a.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),a}function Ide(t){let e=Nde(t.parent);const a=t.structuredQuery,r=a.from?a.from.length:0;let i=null;if(r>0){Uo(r===1);const x=a.from[0];x.allDescendants?i=x.collectionId:e=e.child(x.collectionId)}let l=[];a.where&&(l=function(x){const N=PY(x);return N instanceof Wp&&nY(N)?N.getFilters():[N]}(a.where));let c=[];a.orderBy&&(c=a.orderBy.map(x=>function(N){return new c_(K0(N.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(x)));let n=null;a.limit&&(n=function(x){let N;return N=typeof x=="object"?x.value:x,Y2(N)?null:N}(a.limit));let v=null;a.startAt&&(v=function(x){const N=!!x.before,L=x.values||[];return new tx(L,N)}(a.startAt));let R=null;return a.endAt&&(R=function(x){const N=!x.before,L=x.values||[];return new tx(L,N)}(a.endAt)),ade(e,i,c,l,n,"F",v,R)}function Lde(t,e){const a=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return si()}}(e.purpose);return a==null?null:{"goog-listen-tags":a}}function PY(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const a=K0(e.unaryFilter.field);return Au.create(a,"==",{doubleValue:NaN});case"IS_NULL":const r=K0(e.unaryFilter.field);return Au.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=K0(e.unaryFilter.field);return Au.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=K0(e.unaryFilter.field);return Au.create(l,"!=",{nullValue:"NULL_VALUE"});default:return si()}}(t):t.fieldFilter!==void 0?function(e){return Au.create(K0(e.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return si()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Wp.create(e.compositeFilter.filters.map(a=>PY(a)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return si()}}(e.compositeFilter.op))}(t):si()}function Fde(t){return Sde[t]}function kde(t){return bde[t]}function Ude(t){return xde[t]}function $0(t){return{fieldPath:t.canonicalString()}}function K0(t){return Zm.fromServerFormat(t.fieldPath)}function EY(t){return t instanceof Au?function(e){if(e.op==="=="){if(TU(e.value))return{unaryFilter:{field:$0(e.field),op:"IS_NAN"}};if(RU(e.value))return{unaryFilter:{field:$0(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(TU(e.value))return{unaryFilter:{field:$0(e.field),op:"IS_NOT_NAN"}};if(RU(e.value))return{unaryFilter:{field:$0(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$0(e.field),op:kde(e.op),value:e.value}}}(t):t instanceof Wp?function(e){const a=e.getFilters().map(r=>EY(r));return a.length===1?a[0]:{compositeFilter:{op:Ude(e.op),filters:a}}}(t):si()}function Bde(t){const e=[];return t.fields.forEach(a=>e.push(a.canonicalString())),{fieldPaths:e}}function NY(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e,a,r,i,l=zi.min(),c=zi.min(),n=xd.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=a,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=n,this.expectedCount=v}withSequenceNumber(e){return new ky(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,a){return new ky(this.target,this.targetId,this.purpose,this.sequenceNumber,a,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ky(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ky(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jde{constructor(e){this.fe=e}}function Gde(t){const e=Ide({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?oM(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zde{constructor(){this.rn=new qde}addToCollectionParentIndex(e,a){return this.rn.add(a),Fr.resolve()}getCollectionParents(e,a){return Fr.resolve(this.rn.getEntries(a))}addFieldIndex(e,a){return Fr.resolve()}deleteFieldIndex(e,a){return Fr.resolve()}getDocumentsMatchingTarget(e,a){return Fr.resolve(null)}getIndexType(e,a){return Fr.resolve(0)}getFieldIndexes(e,a){return Fr.resolve([])}getNextCollectionGroupToUpdate(e){return Fr.resolve(null)}getMinOffset(e,a){return Fr.resolve(HR.min())}getMinOffsetFromCollectionGroup(e,a){return Fr.resolve(HR.min())}updateCollectionGroup(e,a,r){return Fr.resolve()}updateIndexEntries(e,a){return Fr.resolve()}}class qde{constructor(){this.index={}}add(e){const a=e.lastSegment(),r=e.popLast(),i=this.index[a]||new Cd(Hl.comparator),l=!i.has(r);return this.index[a]=i.add(r),l}has(e){const a=e.lastSegment(),r=e.popLast(),i=this.index[a];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Cd(Hl.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new b_(0)}static Mn(){return new b_(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hde{constructor(){this.changes=new m1(e=>e.toString(),(e,a)=>e.isEqual(a)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,a){this.assertNotApplied(),this.changes.set(e,Ad.newInvalidDocument(e).setReadTime(a))}getEntry(e,a){this.assertNotApplied();const r=this.changes.get(a);return r!==void 0?Fr.resolve(r):this.getFromCache(e,a)}getEntries(e,a){return this.getAllFromCache(e,a)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $de{constructor(e,a){this.overlayedDocument=e,this.mutatedFields=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kde{constructor(e,a,r,i){this.remoteDocumentCache=e,this.mutationQueue=a,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,a){let r=null;return this.documentOverlayCache.getOverlay(e,a).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,a))).next(i=>(r!==null&&vR(r.mutation,i,gf.empty(),uh.now()),i))}getDocuments(e,a){return this.remoteDocumentCache.getEntries(e,a).next(r=>this.getLocalViewOfDocuments(e,r,Yi()).next(()=>r))}getLocalViewOfDocuments(e,a,r=Yi()){const i=hv();return this.populateOverlays(e,i,a).next(()=>this.computeViews(e,a,i,r).next(l=>{let c=lR();return l.forEach((n,v)=>{c=c.insert(n,v.overlayedDocument)}),c}))}getOverlayedDocuments(e,a){const r=hv();return this.populateOverlays(e,r,a).next(()=>this.computeViews(e,a,r,Yi()))}populateOverlays(e,a,r){const i=[];return r.forEach(l=>{a.has(l)||i.push(l)}),this.documentOverlayCache.getOverlays(e,i).next(l=>{l.forEach((c,n)=>{a.set(c,n)})})}computeViews(e,a,r,i){let l=Ig();const c=AR(),n=AR();return a.forEach((v,R)=>{const x=r.get(R.key);i.has(R.key)&&(x===void 0||x.mutation instanceof sA)?l=l.insert(R.key,R):x!==void 0?(c.set(R.key,x.mutation.getFieldMask()),vR(x.mutation,R,x.mutation.getFieldMask(),uh.now())):c.set(R.key,gf.empty())}),this.recalculateAndSaveOverlays(e,l).next(v=>(v.forEach((R,x)=>c.set(R,x)),a.forEach((R,x)=>{var N;return n.set(R,new $de(x,(N=c.get(R))!==null&&N!==void 0?N:null))}),n))}recalculateAndSaveOverlays(e,a){const r=AR();let i=new _u((c,n)=>c-n),l=Yi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,a).next(c=>{for(const n of c)n.keys().forEach(v=>{const R=a.get(v);if(R===null)return;let x=r.get(v)||gf.empty();x=n.applyToLocalView(R,x),r.set(v,x);const N=(i.get(n.batchId)||Yi()).add(v);i=i.insert(n.batchId,N)})}).next(()=>{const c=[],n=i.getReverseIterator();for(;n.hasNext();){const v=n.getNext(),R=v.key,x=v.value,N=fY();x.forEach(L=>{if(!l.has(L)){const F=_Y(a.get(L),r.get(L));F!==null&&N.set(L,F),l=l.add(L)}}),c.push(this.documentOverlayCache.saveOverlays(e,R,N))}return Fr.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,a){return this.remoteDocumentCache.getEntries(e,a).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,a,r){return function(i){return ei.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(a)?this.getDocumentsMatchingDocumentQuery(e,a.path):lY(a)?this.getDocumentsMatchingCollectionGroupQuery(e,a,r):this.getDocumentsMatchingCollectionQuery(e,a,r)}getNextDocuments(e,a,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,a,r,i).next(l=>{const c=i-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,a,r.largestBatchId,i-l.size):Fr.resolve(hv());let n=-1,v=l;return c.next(R=>Fr.forEach(R,(x,N)=>(n<N.largestBatchId&&(n=N.largestBatchId),l.get(x)?Fr.resolve():this.remoteDocumentCache.getEntry(e,x).next(L=>{v=v.insert(x,L)}))).next(()=>this.populateOverlays(e,R,l)).next(()=>this.computeViews(e,v,R,Yi())).next(x=>({batchId:n,changes:hY(x)})))})}getDocumentsMatchingDocumentQuery(e,a){return this.getDocument(e,new ei(a)).next(r=>{let i=lR();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,a,r){const i=a.collectionGroup;let l=lR();return this.indexManager.getCollectionParents(e,i).next(c=>Fr.forEach(c,n=>{const v=function(R,x){return new p1(x,null,R.explicitOrderBy.slice(),R.filters.slice(),R.limit,R.limitType,R.startAt,R.endAt)}(a,n.child(i));return this.getDocumentsMatchingCollectionQuery(e,v,r).next(R=>{R.forEach((x,N)=>{l=l.insert(x,N)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,a,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,a.path,r.largestBatchId).next(l=>(i=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,a,r,i))).next(l=>{i.forEach((n,v)=>{const R=v.getKey();l.get(R)===null&&(l=l.insert(R,Ad.newInvalidDocument(R)))});let c=lR();return l.forEach((n,v)=>{const R=i.get(n);R!==void 0&&vR(R.mutation,v,gf.empty(),uh.now()),eP(a,v)&&(c=c.insert(n,v))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wde{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,a){return Fr.resolve(this.cs.get(a))}saveBundleMetadata(e,a){var r;return this.cs.set(a.id,{id:(r=a).id,version:r.version,createTime:Um(r.createTime)}),Fr.resolve()}getNamedQuery(e,a){return Fr.resolve(this.hs.get(a))}saveNamedQuery(e,a){return this.hs.set(a.name,function(r){return{name:r.name,query:Gde(r.bundledQuery),readTime:Um(r.readTime)}}(a)),Fr.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yde{constructor(){this.overlays=new _u(ei.comparator),this.ls=new Map}getOverlay(e,a){return Fr.resolve(this.overlays.get(a))}getOverlays(e,a){const r=hv();return Fr.forEach(a,i=>this.getOverlay(e,i).next(l=>{l!==null&&r.set(i,l)})).next(()=>r)}saveOverlays(e,a,r){return r.forEach((i,l)=>{this.we(e,a,l)}),Fr.resolve()}removeOverlaysForBatchId(e,a,r){const i=this.ls.get(r);return i!==void 0&&(i.forEach(l=>this.overlays=this.overlays.remove(l)),this.ls.delete(r)),Fr.resolve()}getOverlaysForCollection(e,a,r){const i=hv(),l=a.length+1,c=new ei(a.child("")),n=this.overlays.getIteratorFrom(c);for(;n.hasNext();){const v=n.getNext().value,R=v.getKey();if(!a.isPrefixOf(R.path))break;R.path.length===l&&v.largestBatchId>r&&i.set(v.getKey(),v)}return Fr.resolve(i)}getOverlaysForCollectionGroup(e,a,r,i){let l=new _u((R,x)=>R-x);const c=this.overlays.getIterator();for(;c.hasNext();){const R=c.getNext().value;if(R.getKey().getCollectionGroup()===a&&R.largestBatchId>r){let x=l.get(R.largestBatchId);x===null&&(x=hv(),l=l.insert(R.largestBatchId,x)),x.set(R.getKey(),R)}}const n=hv(),v=l.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((R,x)=>n.set(R,x)),!(n.size()>=i)););return Fr.resolve(n)}we(e,a,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new vde(a,r));let l=this.ls.get(a);l===void 0&&(l=Yi(),this.ls.set(a,l)),this.ls.set(a,l.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(){this.fs=new Cd(oc.ds),this.ws=new Cd(oc._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,a){const r=new oc(e,a);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,a){e.forEach(r=>this.addReference(r,a))}removeReference(e,a){this.ys(new oc(e,a))}ps(e,a){e.forEach(r=>this.removeReference(r,a))}Is(e){const a=new ei(new Hl([])),r=new oc(a,e),i=new oc(a,e+1),l=[];return this.ws.forEachInRange([r,i],c=>{this.ys(c),l.push(c.key)}),l}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const a=new ei(new Hl([])),r=new oc(a,e),i=new oc(a,e+1);let l=Yi();return this.ws.forEachInRange([r,i],c=>{l=l.add(c.key)}),l}containsKey(e){const a=new oc(e,0),r=this.fs.firstAfterOrEqual(a);return r!==null&&e.isEqual(r.key)}}class oc{constructor(e,a){this.key=e,this.As=a}static ds(e,a){return ei.comparator(e.key,a.key)||xs(e.As,a.As)}static _s(e,a){return xs(e.As,a.As)||ei.comparator(e.key,a.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xde{constructor(e,a){this.indexManager=e,this.referenceDelegate=a,this.mutationQueue=[],this.vs=1,this.Rs=new Cd(oc.ds)}checkEmpty(e){return Fr.resolve(this.mutationQueue.length===0)}addMutationBatch(e,a,r,i){const l=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Ade(l,a,r,i);this.mutationQueue.push(c);for(const n of i)this.Rs=this.Rs.add(new oc(n.key,l)),this.indexManager.addToCollectionParentIndex(e,n.key.path.popLast());return Fr.resolve(c)}lookupMutationBatch(e,a){return Fr.resolve(this.Ps(a))}getNextMutationBatchAfterBatchId(e,a){const r=a+1,i=this.bs(r),l=i<0?0:i;return Fr.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Fr.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(e){return Fr.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,a){const r=new oc(a,0),i=new oc(a,Number.POSITIVE_INFINITY),l=[];return this.Rs.forEachInRange([r,i],c=>{const n=this.Ps(c.As);l.push(n)}),Fr.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,a){let r=new Cd(xs);return a.forEach(i=>{const l=new oc(i,0),c=new oc(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([l,c],n=>{r=r.add(n.As)})}),Fr.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,a){const r=a.path,i=r.length+1;let l=r;ei.isDocumentKey(l)||(l=l.child(""));const c=new oc(new ei(l),0);let n=new Cd(xs);return this.Rs.forEachWhile(v=>{const R=v.key.path;return!!r.isPrefixOf(R)&&(R.length===i&&(n=n.add(v.As)),!0)},c),Fr.resolve(this.Vs(n))}Vs(e){const a=[];return e.forEach(r=>{const i=this.Ps(r);i!==null&&a.push(i)}),a}removeMutationBatch(e,a){Uo(this.Ss(a.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Rs;return Fr.forEach(a.mutations,i=>{const l=new oc(i.key,a.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,a){const r=new oc(a,0),i=this.Rs.firstAfterOrEqual(r);return Fr.resolve(a.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Fr.resolve()}Ss(e,a){return this.bs(e)}bs(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Ps(e){const a=this.bs(e);return a<0||a>=this.mutationQueue.length?null:this.mutationQueue[a]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jde{constructor(e){this.Ds=e,this.docs=new _u(ei.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,a){const r=a.key,i=this.docs.get(r),l=i?i.size:0,c=this.Ds(a);return this.docs=this.docs.insert(r,{document:a.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const a=this.docs.get(e);a&&(this.docs=this.docs.remove(e),this.size-=a.size)}getEntry(e,a){const r=this.docs.get(a);return Fr.resolve(r?r.document.mutableCopy():Ad.newInvalidDocument(a))}getEntries(e,a){let r=Ig();return a.forEach(i=>{const l=this.docs.get(i);r=r.insert(i,l?l.document.mutableCopy():Ad.newInvalidDocument(i))}),Fr.resolve(r)}getDocumentsMatchingQuery(e,a,r,i){let l=Ig();const c=a.path,n=new ei(c.child("")),v=this.docs.getIteratorFrom(n);for(;v.hasNext();){const{key:R,value:{document:x}}=v.getNext();if(!c.isPrefixOf(R.path))break;R.path.length>c.length+1||kce(Fce(x),r)<=0||(i.has(x.key)||eP(a,x))&&(l=l.insert(x.key,x.mutableCopy()))}return Fr.resolve(l)}getAllFromCollectionGroup(e,a,r,i){si()}Cs(e,a){return Fr.forEach(this.docs,r=>a(r))}newChangeBuffer(e){return new Qde(this)}getSize(e){return Fr.resolve(this.size)}}class Qde extends Hde{constructor(e){super(),this.os=e}applyChanges(e){const a=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?a.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),Fr.waitFor(a)}getFromCache(e,a){return this.os.getEntry(e,a)}getAllFromCache(e,a){return this.os.getEntries(e,a)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ehe{constructor(e){this.persistence=e,this.xs=new m1(a=>aL(a),rL),this.lastRemoteSnapshotVersion=zi.min(),this.highestTargetId=0,this.Ns=0,this.ks=new uL,this.targetCount=0,this.Ms=b_.kn()}forEachTarget(e,a){return this.xs.forEach((r,i)=>a(i)),Fr.resolve()}getLastRemoteSnapshotVersion(e){return Fr.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Fr.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Fr.resolve(this.highestTargetId)}setTargetsMetadata(e,a,r){return r&&(this.lastRemoteSnapshotVersion=r),a>this.Ns&&(this.Ns=a),Fr.resolve()}Fn(e){this.xs.set(e.target,e);const a=e.targetId;a>this.highestTargetId&&(this.Ms=new b_(a),this.highestTargetId=a),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,a){return this.Fn(a),this.targetCount+=1,Fr.resolve()}updateTargetData(e,a){return this.Fn(a),Fr.resolve()}removeTargetData(e,a){return this.xs.delete(a.target),this.ks.Is(a.targetId),this.targetCount-=1,Fr.resolve()}removeTargets(e,a,r){let i=0;const l=[];return this.xs.forEach((c,n)=>{n.sequenceNumber<=a&&r.get(n.targetId)===null&&(this.xs.delete(c),l.push(this.removeMatchingKeysForTargetId(e,n.targetId)),i++)}),Fr.waitFor(l).next(()=>i)}getTargetCount(e){return Fr.resolve(this.targetCount)}getTargetData(e,a){const r=this.xs.get(a)||null;return Fr.resolve(r)}addMatchingKeys(e,a,r){return this.ks.gs(a,r),Fr.resolve()}removeMatchingKeys(e,a,r){this.ks.ps(a,r);const i=this.persistence.referenceDelegate,l=[];return i&&a.forEach(c=>{l.push(i.markPotentiallyOrphaned(e,c))}),Fr.waitFor(l)}removeMatchingKeysForTargetId(e,a){return this.ks.Is(a),Fr.resolve()}getMatchingKeysForTargetId(e,a){const r=this.ks.Es(a);return Fr.resolve(r)}containsKey(e,a){return Fr.resolve(this.ks.containsKey(a))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class the{constructor(e,a){this.$s={},this.overlays={},this.Os=new J3(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new ehe(this),this.indexManager=new Zde,this.remoteDocumentCache=function(r){return new Jde(r)}(r=>this.referenceDelegate.Ls(r)),this.serializer=new jde(a),this.qs=new Wde(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let a=this.overlays[e.toKey()];return a||(a=new Yde,this.overlays[e.toKey()]=a),a}getMutationQueue(e,a){let r=this.$s[e.toKey()];return r||(r=new Xde(a,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,a,r){_n("MemoryPersistence","Starting transaction:",e);const i=new ahe(this.Os.next());return this.referenceDelegate.Us(),r(i).next(l=>this.referenceDelegate.Ks(i).next(()=>l)).toPromise().then(l=>(i.raiseOnCommittedEvent(),l))}Gs(e,a){return Fr.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,a)))}}class ahe extends Bce{constructor(e){super(),this.currentSequenceNumber=e}}class cL{constructor(e){this.persistence=e,this.Qs=new uL,this.js=null}static zs(e){return new cL(e)}get Ws(){if(this.js)return this.js;throw si()}addReference(e,a,r){return this.Qs.addReference(r,a),this.Ws.delete(r.toString()),Fr.resolve()}removeReference(e,a,r){return this.Qs.removeReference(r,a),this.Ws.add(r.toString()),Fr.resolve()}markPotentiallyOrphaned(e,a){return this.Ws.add(a.toString()),Fr.resolve()}removeTarget(e,a){this.Qs.Is(a.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,a.targetId).next(i=>{i.forEach(l=>this.Ws.add(l.toString()))}).next(()=>r.removeTargetData(e,a))}Us(){this.js=new Set}Ks(e){const a=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Fr.forEach(this.Ws,r=>{const i=ei.fromPath(r);return this.Hs(e,i).next(l=>{l||a.removeEntry(i,zi.min())})}).next(()=>(this.js=null,a.apply(e)))}updateLimboDocument(e,a){return this.Hs(e,a).next(r=>{r?this.Ws.delete(a.toString()):this.Ws.add(a.toString())})}Ls(e){return 0}Hs(e,a){return Fr.or([()=>Fr.resolve(this.Qs.containsKey(a)),()=>this.persistence.getTargetCache().containsKey(e,a),()=>this.persistence.Gs(e,a)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e,a,r,i){this.targetId=e,this.fromCache=a,this.Fi=r,this.Bi=i}static Li(e,a){let r=Yi(),i=Yi();for(const l of a.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new dL(e,a.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rhe{constructor(){this.qi=!1}initialize(e,a){this.Ui=e,this.indexManager=a,this.qi=!0}getDocumentsMatchingQuery(e,a,r,i){return this.Ki(e,a).next(l=>l||this.Gi(e,a,i,r)).next(l=>l||this.Qi(e,a))}Ki(e,a){if(xU(a))return Fr.resolve(null);let r=Mg(a);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(a.limit!==null&&i===1&&(a=oM(a,null,"F"),r=Mg(a)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const c=Yi(...l);return this.Ui.getDocuments(e,c).next(n=>this.indexManager.getMinOffset(e,r).next(v=>{const R=this.ji(a,n);return this.zi(a,R,c,v.readTime)?this.Ki(e,oM(a,null,"F")):this.Wi(e,R,a,v)}))})))}Gi(e,a,r,i){return xU(a)||i.isEqual(zi.min())?this.Qi(e,a):this.Ui.getDocuments(e,r).next(l=>{const c=this.ji(a,l);return this.zi(a,c,r,i)?this.Qi(e,a):(yU()<=Rs.DEBUG&&_n("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),lM(a)),this.Wi(e,c,a,Lce(i,-1)))})}ji(e,a){let r=new Cd(cY(e));return a.forEach((i,l)=>{eP(e,l)&&(r=r.add(l))}),r}zi(e,a,r,i){if(e.limit===null)return!1;if(r.size!==a.size)return!0;const l=e.limitType==="F"?a.last():a.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}Qi(e,a){return yU()<=Rs.DEBUG&&_n("QueryEngine","Using full collection scan to execute query:",lM(a)),this.Ui.getDocumentsMatchingQuery(e,a,HR.min())}Wi(e,a,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(l=>(a.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nhe{constructor(e,a,r,i){this.persistence=e,this.Hi=a,this.serializer=i,this.Ji=new _u(xs),this.Yi=new m1(l=>aL(l),rL),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Kde(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",a=>e.collect(a,this.Ji))}}function ihe(t,e,a,r){return new nhe(t,e,a,r)}async function OY(t,e){const a=wi(t);return await a.persistence.runTransaction("Handle user change","readonly",r=>{let i;return a.mutationQueue.getAllMutationBatches(r).next(l=>(i=l,a.tr(e),a.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],n=[];let v=Yi();for(const R of i){c.push(R.batchId);for(const x of R.mutations)v=v.add(x.key)}for(const R of l){n.push(R.batchId);for(const x of R.mutations)v=v.add(x.key)}return a.localDocuments.getDocuments(r,v).next(R=>({er:R,removedBatchIds:c,addedBatchIds:n}))})})}function she(t,e){const a=wi(t);return a.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),l=a.Zi.newChangeBuffer({trackRemovals:!0});return function(c,n,v,R){const x=v.batch,N=x.keys();let L=Fr.resolve();return N.forEach(F=>{L=L.next(()=>R.getEntry(n,F)).next(j=>{const $=v.docVersions.get(F);Uo($!==null),j.version.compareTo($)<0&&(x.applyToRemoteDocument(j,v),j.isValidDocument()&&(j.setReadTime(v.commitVersion),R.addEntry(j)))})}),L.next(()=>c.mutationQueue.removeMutationBatch(n,x))}(a,r,e,l).next(()=>l.apply(r)).next(()=>a.mutationQueue.performConsistencyCheck(r)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let n=Yi();for(let v=0;v<c.mutationResults.length;++v)c.mutationResults[v].transformResults.length>0&&(n=n.add(c.batch.mutations[v].key));return n}(e))).next(()=>a.localDocuments.getDocuments(r,i))})}function VY(t){const e=wi(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",a=>e.Bs.getLastRemoteSnapshotVersion(a))}function ohe(t,e){const a=wi(t),r=e.snapshotVersion;let i=a.Ji;return a.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=a.Zi.newChangeBuffer({trackRemovals:!0});i=a.Ji;const n=[];e.targetChanges.forEach((x,N)=>{const L=i.get(N);if(!L)return;n.push(a.Bs.removeMatchingKeys(l,x.removedDocuments,N).next(()=>a.Bs.addMatchingKeys(l,x.addedDocuments,N)));let F=L.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(N)!==null?F=F.withResumeToken(xd.EMPTY_BYTE_STRING,zi.min()).withLastLimboFreeSnapshotVersion(zi.min()):x.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(x.resumeToken,r)),i=i.insert(N,F),function(j,$,H){return j.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(L,F,x)&&n.push(a.Bs.updateTargetData(l,F))});let v=Ig(),R=Yi();if(e.documentUpdates.forEach(x=>{e.resolvedLimboDocuments.has(x)&&n.push(a.persistence.referenceDelegate.updateLimboDocument(l,x))}),n.push(lhe(l,c,e.documentUpdates).next(x=>{v=x.nr,R=x.sr})),!r.isEqual(zi.min())){const x=a.Bs.getLastRemoteSnapshotVersion(l).next(N=>a.Bs.setTargetsMetadata(l,l.currentSequenceNumber,r));n.push(x)}return Fr.waitFor(n).next(()=>c.apply(l)).next(()=>a.localDocuments.getLocalViewOfDocuments(l,v,R)).next(()=>v)}).then(l=>(a.Ji=i,l))}function lhe(t,e,a){let r=Yi(),i=Yi();return a.forEach(l=>r=r.add(l)),e.getEntries(t,r).next(l=>{let c=Ig();return a.forEach((n,v)=>{const R=l.get(n);v.isFoundDocument()!==R.isFoundDocument()&&(i=i.add(n)),v.isNoDocument()&&v.version.isEqual(zi.min())?(e.removeEntry(n,v.readTime),c=c.insert(n,v)):!R.isValidDocument()||v.version.compareTo(R.version)>0||v.version.compareTo(R.version)===0&&R.hasPendingWrites?(e.addEntry(v),c=c.insert(n,v)):_n("LocalStore","Ignoring outdated watch update for ",n,". Current version:",R.version," Watch version:",v.version)}),{nr:c,sr:i}})}function uhe(t,e){const a=wi(t);return a.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),a.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function che(t,e){const a=wi(t);return a.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return a.Bs.getTargetData(r,e).next(l=>l?(i=l,Fr.resolve(i)):a.Bs.allocateTargetId(r).next(c=>(i=new ky(e,c,"TargetPurposeListen",r.currentSequenceNumber),a.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=a.Ji.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(a.Ji=a.Ji.insert(r.targetId,r),a.Yi.set(e,r.targetId)),r})}async function fM(t,e,a){const r=wi(t),i=r.Ji.get(e),l=a?"readwrite":"readwrite-primary";try{a||await r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,i))}catch(c){if(!tC(c))throw c;_n("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}function FU(t,e,a){const r=wi(t);let i=zi.min(),l=Yi();return r.persistence.runTransaction("Execute query","readonly",c=>function(n,v,R){const x=wi(n),N=x.Yi.get(R);return N!==void 0?Fr.resolve(x.Ji.get(N)):x.Bs.getTargetData(v,R)}(r,c,Mg(e)).next(n=>{if(n)return i=n.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(c,n.targetId).next(v=>{l=v})}).next(()=>r.Hi.getDocumentsMatchingQuery(c,e,a?i:zi.min(),a?l:Yi())).next(n=>(dhe(r,rde(e),n),{documents:n,ir:l})))}function dhe(t,e,a){let r=t.Xi.get(e)||zi.min();a.forEach((i,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),t.Xi.set(e,r)}class kU{constructor(){this.activeTargetIds=ude()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hhe{constructor(){this.Hr=new kU,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,a,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,a,r){this.Jr[e]=a}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new kU,Promise.resolve()}handleUserChange(e,a,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fhe{Yr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){_n("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){_n("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jS=null;function LN(){return jS===null?jS=268435456+Math.round(2147483648*Math.random()):jS++,"0x"+jS.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const phe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mhe{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ud="WebChannelConnection";class ghe extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const a=e.ssl?"https":"http";this.mo=a+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,a,r,i,l){const c=LN(),n=this.To(e,a);_n("RestConnection",`Sending RPC '${e}' ${c}:`,n,r);const v={};return this.Eo(v,i,l),this.Ao(e,n,v,r).then(R=>(_n("RestConnection",`Received RPC '${e}' ${c}: `,R),R),R=>{throw R_("RestConnection",`RPC '${e}' ${c} failed with error: `,R,"url: ",n,"request:",r),R})}vo(e,a,r,i,l,c){return this.Io(e,a,r,i,l)}Eo(e,a,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+f1,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),a&&a.headers.forEach((i,l)=>e[l]=i),r&&r.headers.forEach((i,l)=>e[l]=i)}To(e,a){const r=phe[e];return`${this.mo}/v1/${a}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,a,r,i){const l=LN();return new Promise((c,n)=>{const v=new bce;v.setWithCredentials(!0),v.listenOnce(Tce.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case MN.NO_ERROR:const x=v.getResponseJson();_n(ud,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(x)),c(x);break;case MN.TIMEOUT:_n(ud,`RPC '${e}' ${l} timed out`),n(new Wr(nr.DEADLINE_EXCEEDED,"Request time out"));break;case MN.HTTP_ERROR:const N=v.getStatus();if(_n(ud,`RPC '${e}' ${l} failed with status:`,N,"response text:",v.getResponseText()),N>0){let L=v.getResponseJson();Array.isArray(L)&&(L=L[0]);const F=L==null?void 0:L.error;if(F&&F.status&&F.message){const j=function($){const H=$.toLowerCase().replace(/_/g,"-");return Object.values(nr).indexOf(H)>=0?H:nr.UNKNOWN}(F.status);n(new Wr(j,F.message))}else n(new Wr(nr.UNKNOWN,"Server responded with status "+v.getStatus()))}else n(new Wr(nr.UNAVAILABLE,"Connection failed."));break;default:si()}}finally{_n(ud,`RPC '${e}' ${l} completed.`)}});const R=JSON.stringify(i);_n(ud,`RPC '${e}' ${l} sending request:`,i),v.send(a,"POST",R,r,15)})}Ro(e,a,r){const i=LN(),l=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=wce(),n=Rce(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},R=this.longPollingOptions.timeoutSeconds;R!==void 0&&(v.longPollingTimeout=Math.round(1e3*R)),this.useFetchStreams&&(v.xmlHttpFactory=new Sce({})),this.Eo(v.initMessageHeaders,a,r),v.encodeInitMessageHeaders=!0;const x=l.join("");_n(ud,`Creating RPC '${e}' stream ${i}: ${x}`,v);const N=c.createWebChannel(x,v);let L=!1,F=!1;const j=new mhe({ro:H=>{F?_n(ud,`Not sending because RPC '${e}' stream ${i} is closed:`,H):(L||(_n(ud,`Opening RPC '${e}' stream ${i} transport.`),N.open(),L=!0),_n(ud,`RPC '${e}' stream ${i} sending:`,H),N.send(H))},oo:()=>N.close()}),$=(H,W,ee)=>{H.listen(W,se=>{try{ee(se)}catch(fe){setTimeout(()=>{throw fe},0)}})};return $(N,FS.EventType.OPEN,()=>{F||_n(ud,`RPC '${e}' stream ${i} transport opened.`)}),$(N,FS.EventType.CLOSE,()=>{F||(F=!0,_n(ud,`RPC '${e}' stream ${i} transport closed`),j.wo())}),$(N,FS.EventType.ERROR,H=>{F||(F=!0,R_(ud,`RPC '${e}' stream ${i} transport errored:`,H),j.wo(new Wr(nr.UNAVAILABLE,"The operation could not be completed")))}),$(N,FS.EventType.MESSAGE,H=>{var W;if(!F){const ee=H.data[0];Uo(!!ee);const se=ee,fe=se.error||((W=se[0])===null||W===void 0?void 0:W.error);if(fe){_n(ud,`RPC '${e}' stream ${i} received error:`,fe);const le=fe.status;let me=function(Re){const we=fu[Re];if(we!==void 0)return RY(we)}(le),ge=fe.message;me===void 0&&(me=nr.INTERNAL,ge="Unknown error status: "+le+" with message "+fe.message),F=!0,j.wo(new Wr(me,ge)),N.close()}else _n(ud,`RPC '${e}' stream ${i} received:`,ee),j._o(ee)}}),$(n,Cce.STAT_EVENT,H=>{H.stat===mU.PROXY?_n(ud,`RPC '${e}' stream ${i} detected buffering proxy`):H.stat===mU.NOPROXY&&_n(ud,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{j.fo()},0),j}}function FN(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(t){return new Pde(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zY{constructor(e,a,r=1e3,i=1.5,l=6e4){this.ii=e,this.timerId=a,this.Po=r,this.bo=i,this.Vo=l,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const a=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,a-r);i>0&&_n("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${a} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DY{constructor(e,a,r,i,l,c,n,v){this.ii=e,this.$o=r,this.Oo=i,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=n,this.listener=v,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new zY(e,a)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,a){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,e!==4?this.qo.reset():a&&a.code===nr.RESOURCE_EXHAUSTED?(Dg(a.toString()),Dg("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):a&&a.code===nr.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(a)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),a=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===a&&this.Zo(r,i)},r=>{e(()=>{const i=new Wr(nr.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,a){const r=this.Xo(this.Fo);this.stream=this.eu(e,a),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return _n("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return a=>{this.ii.enqueueAndForget(()=>this.Fo===e?a():(_n("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yhe extends DY{constructor(e,a,r,i,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",a,r,i,c),this.serializer=l}eu(e,a){return this.connection.Ro("Listen",e,a)}onMessage(e){this.qo.reset();const a=Ode(this.serializer,e),r=function(i){if(!("targetChange"in i))return zi.min();const l=i.targetChange;return l.targetIds&&l.targetIds.length?zi.min():l.readTime?Um(l.readTime):zi.min()}(e);return this.listener.nu(a,r)}su(e){const a={};a.database=hM(this.serializer),a.addTarget=function(i,l){let c;const n=l.target;if(c=iM(n)?{documents:Dde(i,n)}:{query:Mde(i,n)},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=SY(i,l.resumeToken);const v=uM(i,l.expectedCount);v!==null&&(c.expectedCount=v)}else if(l.snapshotVersion.compareTo(zi.min())>0){c.readTime=nx(i,l.snapshotVersion.toTimestamp());const v=uM(i,l.expectedCount);v!==null&&(c.expectedCount=v)}return c}(this.serializer,e);const r=Lde(this.serializer,e);r&&(a.labels=r),this.Wo(a)}iu(e){const a={};a.database=hM(this.serializer),a.removeTarget=e,this.Wo(a)}}class Ahe extends DY{constructor(e,a,r,i,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",a,r,i,c),this.serializer=l,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,a){return this.connection.Ro("Write",e,a)}onMessage(e){if(Uo(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const a=zde(e.writeResults,e.commitTime),r=Um(e.commitTime);return this.listener.cu(r,a)}return Uo(!e.writeResults||e.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const e={};e.database=hM(this.serializer),this.Wo(e)}uu(e){const a={streamToken:this.lastStreamToken,writes:e.map(r=>Vde(this.serializer,r))};this.Wo(a)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vhe extends class{}{constructor(e,a,r,i){super(),this.authCredentials=e,this.appCheckCredentials=a,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Wr(nr.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,a,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.connection.Io(e,a,r,i,l)).catch(i=>{throw i.name==="FirebaseError"?(i.code===nr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Wr(nr.UNKNOWN,i.toString())})}vo(e,a,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.vo(e,a,r,l,c,i)).catch(l=>{throw l.name==="FirebaseError"?(l.code===nr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Wr(nr.UNKNOWN,l.toString())})}terminate(){this.lu=!0}}class _he{constructor(e,a){this.asyncQueue=e,this.onlineStateHandler=a,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,e==="Online"&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const a=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Dg(a),this.mu=!1):_n("OnlineStateTracker",a)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class whe{constructor(e,a,r,i,l){this.localStore=e,this.datastore=a,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=l,this.Pu.Yr(c=>{r.enqueueAndForget(async()=>{qv(this)&&(_n("RemoteStore","Restarting streams for network reachability change."),await async function(n){const v=wi(n);v.vu.add(4),await nC(v),v.bu.set("Unknown"),v.vu.delete(4),await sP(v)}(this))})}),this.bu=new _he(r,i)}}async function sP(t){if(qv(t))for(const e of t.Ru)await e(!0)}async function nC(t){for(const e of t.Ru)await e(!1)}function MY(t,e){const a=wi(t);a.Au.has(e.targetId)||(a.Au.set(e.targetId,e),pL(a)?fL(a):g1(a).Ko()&&hL(a,e))}function IY(t,e){const a=wi(t),r=g1(a);a.Au.delete(e),r.Ko()&&LY(a,e),a.Au.size===0&&(r.Ko()?r.jo():qv(a)&&a.bu.set("Unknown"))}function hL(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(zi.min())>0){const a=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(a)}g1(t).su(e)}function LY(t,e){t.Vu.qt(e),g1(t).iu(e)}function fL(t){t.Vu=new Cde({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),g1(t).start(),t.bu.gu()}function pL(t){return qv(t)&&!g1(t).Uo()&&t.Au.size>0}function qv(t){return wi(t).vu.size===0}function FY(t){t.Vu=void 0}async function Rhe(t){t.Au.forEach((e,a)=>{hL(t,e)})}async function The(t,e){FY(t),pL(t)?(t.bu.Iu(e),fL(t)):t.bu.set("Unknown")}async function Che(t,e,a){if(t.bu.set("Online"),e instanceof CY&&e.state===2&&e.cause)try{await async function(r,i){const l=i.cause;for(const c of i.targetIds)r.Au.has(c)&&(await r.remoteSyncer.rejectListen(c,l),r.Au.delete(c),r.Vu.removeTarget(c))}(t,e)}catch(r){_n("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ix(t,r)}else if(e instanceof Rb?t.Vu.Ht(e):e instanceof TY?t.Vu.ne(e):t.Vu.Xt(e),!a.isEqual(zi.min()))try{const r=await VY(t.localStore);a.compareTo(r)>=0&&await function(i,l){const c=i.Vu.ce(l);return c.targetChanges.forEach((n,v)=>{if(n.resumeToken.approximateByteSize()>0){const R=i.Au.get(v);R&&i.Au.set(v,R.withResumeToken(n.resumeToken,l))}}),c.targetMismatches.forEach((n,v)=>{const R=i.Au.get(n);if(!R)return;i.Au.set(n,R.withResumeToken(xd.EMPTY_BYTE_STRING,R.snapshotVersion)),LY(i,n);const x=new ky(R.target,n,v,R.sequenceNumber);hL(i,x)}),i.remoteSyncer.applyRemoteEvent(c)}(t,a)}catch(r){_n("RemoteStore","Failed to raise snapshot:",r),await ix(t,r)}}async function ix(t,e,a){if(!tC(e))throw e;t.vu.add(1),await nC(t),t.bu.set("Offline"),a||(a=()=>VY(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{_n("RemoteStore","Retrying IndexedDB access"),await a(),t.vu.delete(1),await sP(t)})}function kY(t,e){return e().catch(a=>ix(t,a,e))}async function oP(t){const e=wi(t),a=Jy(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;She(e);)try{const i=await uhe(e.localStore,r);if(i===null){e.Eu.length===0&&a.jo();break}r=i.batchId,bhe(e,i)}catch(i){await ix(e,i)}UY(e)&&BY(e)}function She(t){return qv(t)&&t.Eu.length<10}function bhe(t,e){t.Eu.push(e);const a=Jy(t);a.Ko()&&a.ou&&a.uu(e.mutations)}function UY(t){return qv(t)&&!Jy(t).Uo()&&t.Eu.length>0}function BY(t){Jy(t).start()}async function xhe(t){Jy(t).hu()}async function Phe(t){const e=Jy(t);for(const a of t.Eu)e.uu(a.mutations)}async function Ehe(t,e,a){const r=t.Eu.shift(),i=iL.from(r,e,a);await kY(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await oP(t)}async function Nhe(t,e){e&&Jy(t).ou&&await async function(a,r){if(i=r.code,wde(i)&&i!==nr.ABORTED){const l=a.Eu.shift();Jy(a).Qo(),await kY(a,()=>a.remoteSyncer.rejectFailedWrite(l.batchId,r)),await oP(a)}var i}(t,e),UY(t)&&BY(t)}async function BU(t,e){const a=wi(t);a.asyncQueue.verifyOperationInProgress(),_n("RemoteStore","RemoteStore received new credentials");const r=qv(a);a.vu.add(3),await nC(a),r&&a.bu.set("Unknown"),await a.remoteSyncer.handleCredentialChange(e),a.vu.delete(3),await sP(a)}async function Ohe(t,e){const a=wi(t);e?(a.vu.delete(2),await sP(a)):e||(a.vu.add(2),await nC(a),a.bu.set("Unknown"))}function g1(t){return t.Su||(t.Su=function(e,a,r){const i=wi(e);return i.fu(),new yhe(a,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:Rhe.bind(null,t),ao:The.bind(null,t),nu:Che.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Qo(),pL(t)?fL(t):t.bu.set("Unknown")):(await t.Su.stop(),FY(t))})),t.Su}function Jy(t){return t.Du||(t.Du=function(e,a,r){const i=wi(e);return i.fu(),new Ahe(a,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:xhe.bind(null,t),ao:Nhe.bind(null,t),au:Phe.bind(null,t),cu:Ehe.bind(null,t)}),t.Ru.push(async e=>{e?(t.Du.Qo(),await oP(t)):(await t.Du.stop(),t.Eu.length>0&&(_n("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))})),t.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e,a,r,i,l){this.asyncQueue=e,this.timerId=a,this.targetTimeMs=r,this.op=i,this.removalCallback=l,this.deferred=new Pg,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,a,r,i,l){const c=Date.now()+r,n=new mL(e,a,c,i,l);return n.start(r),n}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Wr(nr.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gL(t,e){if(Dg("AsyncQueue",`${e}: ${t}`),tC(t))return new Wr(nr.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e){this.comparator=e?(a,r)=>e(a,r)||ei.comparator(a.key,r.key):(a,r)=>ei.comparator(a.key,r.key),this.keyedMap=lR(),this.sortedSet=new _u(this.comparator)}static emptySet(e){return new h_(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const a=this.keyedMap.get(e);return a?this.sortedSet.indexOf(a):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((a,r)=>(e(a),!1))}add(e){const a=this.delete(e.key);return a.copy(a.keyedMap.insert(e.key,e),a.sortedSet.insert(e,null))}delete(e){const a=this.get(e);return a?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(a)):this}isEqual(e){if(!(e instanceof h_)||this.size!==e.size)return!1;const a=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;a.hasNext();){const i=a.getNext().key,l=r.getNext().key;if(!i.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(a=>{e.push(a.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,a){const r=new h_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=a,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(){this.Cu=new _u(ei.comparator)}track(e){const a=e.doc.key,r=this.Cu.get(a);r?e.type!==0&&r.type===3?this.Cu=this.Cu.insert(a,e):e.type===3&&r.type!==1?this.Cu=this.Cu.insert(a,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Cu=this.Cu.insert(a,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Cu=this.Cu.insert(a,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Cu=this.Cu.remove(a):e.type===1&&r.type===2?this.Cu=this.Cu.insert(a,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Cu=this.Cu.insert(a,{type:2,doc:e.doc}):si():this.Cu=this.Cu.insert(a,e)}xu(){const e=[];return this.Cu.inorderTraversal((a,r)=>{e.push(r)}),e}}class x_{constructor(e,a,r,i,l,c,n,v,R){this.query=e,this.docs=a,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=n,this.excludesMetadataChanges=v,this.hasCachedResults=R}static fromInitialDocuments(e,a,r,i,l){const c=[];return a.forEach(n=>{c.push({type:0,doc:n})}),new x_(e,a,h_.emptySet(a),c,r,i,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Q2(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const a=this.docChanges,r=e.docChanges;if(a.length!==r.length)return!1;for(let i=0;i<a.length;i++)if(a[i].type!==r[i].type||!a[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vhe{constructor(){this.Nu=void 0,this.listeners=[]}}class zhe{constructor(){this.queries=new m1(e=>uY(e),Q2),this.onlineState="Unknown",this.ku=new Set}}async function yL(t,e){const a=wi(t),r=e.query;let i=!1,l=a.queries.get(r);if(l||(i=!0,l=new Vhe),i)try{l.Nu=await a.onListen(r)}catch(c){const n=gL(c,`Initialization of query '${lM(e.query)}' failed`);return void e.onError(n)}a.queries.set(r,l),l.listeners.push(e),e.Mu(a.onlineState),l.Nu&&e.$u(l.Nu)&&vL(a)}async function AL(t,e){const a=wi(t),r=e.query;let i=!1;const l=a.queries.get(r);if(l){const c=l.listeners.indexOf(e);c>=0&&(l.listeners.splice(c,1),i=l.listeners.length===0)}if(i)return a.queries.delete(r),a.onUnlisten(r)}function Dhe(t,e){const a=wi(t);let r=!1;for(const i of e){const l=i.query,c=a.queries.get(l);if(c){for(const n of c.listeners)n.$u(i)&&(r=!0);c.Nu=i}}r&&vL(a)}function Mhe(t,e,a){const r=wi(t),i=r.queries.get(e);if(i)for(const l of i.listeners)l.onError(a);r.queries.delete(e)}function vL(t){t.ku.forEach(e=>{e.next()})}class _L{constructor(e,a,r){this.query=e,this.Ou=a,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new x_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let a=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),a=!0):this.qu(e,this.onlineState)&&(this.Uu(e),a=!0),this.Bu=e,a}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let a=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),a=!0),a}qu(e,a){if(!e.fromCache)return!0;const r=a!=="Offline";return(!this.options.Ku||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||a==="Offline")}Lu(e){if(e.docChanges.length>0)return!0;const a=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!a)&&this.options.includeMetadataChanges===!0}Uu(e){e=x_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jY{constructor(e){this.key=e}}class GY{constructor(e){this.key=e}}class Ihe{constructor(e,a){this.query=e,this.Yu=a,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Yi(),this.mutatedKeys=Yi(),this.tc=cY(e),this.ec=new h_(this.tc)}get nc(){return this.Yu}sc(e,a){const r=a?a.ic:new jU,i=a?a.ec:this.ec;let l=a?a.mutatedKeys:this.mutatedKeys,c=i,n=!1;const v=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,R=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((x,N)=>{const L=i.get(x),F=eP(this.query,N)?N:null,j=!!L&&this.mutatedKeys.has(L.key),$=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let H=!1;L&&F?L.data.isEqual(F.data)?j!==$&&(r.track({type:3,doc:F}),H=!0):this.rc(L,F)||(r.track({type:2,doc:F}),H=!0,(v&&this.tc(F,v)>0||R&&this.tc(F,R)<0)&&(n=!0)):!L&&F?(r.track({type:0,doc:F}),H=!0):L&&!F&&(r.track({type:1,doc:L}),H=!0,(v||R)&&(n=!0)),H&&(F?(c=c.add(F),l=$?l.add(x):l.delete(x)):(c=c.delete(x),l=l.delete(x)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const x=this.query.limitType==="F"?c.last():c.first();c=c.delete(x.key),l=l.delete(x.key),r.track({type:1,doc:x})}return{ec:c,ic:r,zi:n,mutatedKeys:l}}rc(e,a){return e.hasLocalMutations&&a.hasCommittedMutations&&!a.hasLocalMutations}applyChanges(e,a,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const l=e.ic.xu();l.sort((R,x)=>function(N,L){const F=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return si()}};return F(N)-F(L)}(R.type,x.type)||this.tc(R.doc,x.doc)),this.oc(r);const c=a?this.uc():[],n=this.Zu.size===0&&this.current?1:0,v=n!==this.Xu;return this.Xu=n,l.length!==0||v?{snapshot:new x_(this.query,e.ec,i,l,e.mutatedKeys,n===0,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:c}:{cc:c}}Mu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ec:this.ec,ic:new jU,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(a=>this.Yu=this.Yu.add(a)),e.modifiedDocuments.forEach(a=>{}),e.removedDocuments.forEach(a=>this.Yu=this.Yu.delete(a)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Yi(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const a=[];return e.forEach(r=>{this.Zu.has(r)||a.push(new GY(r))}),this.Zu.forEach(r=>{e.has(r)||a.push(new jY(r))}),a}hc(e){this.Yu=e.ir,this.Zu=Yi();const a=this.sc(e.documents);return this.applyChanges(a,!0)}lc(){return x_.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,this.Xu===0,this.hasCachedResults)}}class Lhe{constructor(e,a,r){this.query=e,this.targetId=a,this.view=r}}class Fhe{constructor(e){this.key=e,this.fc=!1}}class khe{constructor(e,a,r,i,l,c){this.localStore=e,this.remoteStore=a,this.eventManager=r,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.dc={},this.wc=new m1(n=>uY(n),Q2),this._c=new Map,this.mc=new Set,this.gc=new _u(ei.comparator),this.yc=new Map,this.Ic=new uL,this.Tc={},this.Ec=new Map,this.Ac=b_.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function Uhe(t,e){const a=Yhe(t);let r,i;const l=a.wc.get(e);if(l)r=l.targetId,a.sharedClientState.addLocalQueryTarget(r),i=l.view.lc();else{const c=await che(a.localStore,Mg(e)),n=a.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=await Bhe(a,e,r,n==="current",c.resumeToken),a.isPrimaryClient&&MY(a.remoteStore,c)}return i}async function Bhe(t,e,a,r,i){t.Rc=(N,L,F)=>async function(j,$,H,W){let ee=$.view.sc(H);ee.zi&&(ee=await FU(j.localStore,$.query,!1).then(({documents:le})=>$.view.sc(le,ee)));const se=W&&W.targetChanges.get($.targetId),fe=$.view.applyChanges(ee,j.isPrimaryClient,se);return ZU(j,$.targetId,fe.cc),fe.snapshot}(t,N,L,F);const l=await FU(t.localStore,e,!0),c=new Ihe(e,l.ir),n=c.sc(l.documents),v=rC.createSynthesizedTargetChangeForCurrentChange(a,r&&t.onlineState!=="Offline",i),R=c.applyChanges(n,t.isPrimaryClient,v);ZU(t,a,R.cc);const x=new Lhe(e,a,c);return t.wc.set(e,x),t._c.has(a)?t._c.get(a).push(e):t._c.set(a,[e]),R.snapshot}async function jhe(t,e){const a=wi(t),r=a.wc.get(e),i=a._c.get(r.targetId);if(i.length>1)return a._c.set(r.targetId,i.filter(l=>!Q2(l,e))),void a.wc.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(r.targetId),a.sharedClientState.isActiveQueryTarget(r.targetId)||await fM(a.localStore,r.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(r.targetId),IY(a.remoteStore,r.targetId),pM(a,r.targetId)}).catch(eC)):(pM(a,r.targetId),await fM(a.localStore,r.targetId,!0))}async function Ghe(t,e,a){const r=Xhe(t);try{const i=await function(l,c){const n=wi(l),v=uh.now(),R=c.reduce((L,F)=>L.add(F.key),Yi());let x,N;return n.persistence.runTransaction("Locally write mutations","readwrite",L=>{let F=Ig(),j=Yi();return n.Zi.getEntries(L,R).next($=>{F=$,F.forEach((H,W)=>{W.isValidDocument()||(j=j.add(H))})}).next(()=>n.localDocuments.getOverlayedDocuments(L,F)).next($=>{x=$;const H=[];for(const W of c){const ee=gde(W,x.get(W.key).overlayedDocument);ee!=null&&H.push(new sA(W.key,ee,tY(ee.value.mapValue),ch.exists(!0)))}return n.mutationQueue.addMutationBatch(L,v,H,c)}).next($=>{N=$;const H=$.applyToLocalDocumentSet(x,j);return n.documentOverlayCache.saveOverlays(L,$.batchId,H)})}).then(()=>({batchId:N.batchId,changes:hY(x)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,c,n){let v=l.Tc[l.currentUser.toKey()];v||(v=new _u(xs)),v=v.insert(c,n),l.Tc[l.currentUser.toKey()]=v}(r,i.batchId,a),await iC(r,i.changes),await oP(r.remoteStore)}catch(i){const l=gL(i,"Failed to persist write");a.reject(l)}}async function ZY(t,e){const a=wi(t);try{const r=await ohe(a.localStore,e);e.targetChanges.forEach((i,l)=>{const c=a.yc.get(l);c&&(Uo(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.fc=!0:i.modifiedDocuments.size>0?Uo(c.fc):i.removedDocuments.size>0&&(Uo(c.fc),c.fc=!1))}),await iC(a,r,e)}catch(r){await eC(r)}}function GU(t,e,a){const r=wi(t);if(r.isPrimaryClient&&a===0||!r.isPrimaryClient&&a===1){const i=[];r.wc.forEach((l,c)=>{const n=c.view.Mu(e);n.snapshot&&i.push(n.snapshot)}),function(l,c){const n=wi(l);n.onlineState=c;let v=!1;n.queries.forEach((R,x)=>{for(const N of x.listeners)N.Mu(c)&&(v=!0)}),v&&vL(n)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Zhe(t,e,a){const r=wi(t);r.sharedClientState.updateQueryState(e,"rejected",a);const i=r.yc.get(e),l=i&&i.key;if(l){let c=new _u(ei.comparator);c=c.insert(l,Ad.newNoDocument(l,zi.min()));const n=Yi().add(l),v=new nP(zi.min(),new Map,new _u(xs),c,n);await ZY(r,v),r.gc=r.gc.remove(l),r.yc.delete(e),wL(r)}else await fM(r.localStore,e,!1).then(()=>pM(r,e,a)).catch(eC)}async function qhe(t,e){const a=wi(t),r=e.batch.batchId;try{const i=await she(a.localStore,e);HY(a,r,null),qY(a,r),a.sharedClientState.updateMutationState(r,"acknowledged"),await iC(a,i)}catch(i){await eC(i)}}async function Hhe(t,e,a){const r=wi(t);try{const i=await function(l,c){const n=wi(l);return n.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let R;return n.mutationQueue.lookupMutationBatch(v,c).next(x=>(Uo(x!==null),R=x.keys(),n.mutationQueue.removeMutationBatch(v,x))).next(()=>n.mutationQueue.performConsistencyCheck(v)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(v,R,c)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,R)).next(()=>n.localDocuments.getDocuments(v,R))})}(r.localStore,e);HY(r,e,a),qY(r,e),r.sharedClientState.updateMutationState(e,"rejected",a),await iC(r,i)}catch(i){await eC(i)}}function qY(t,e){(t.Ec.get(e)||[]).forEach(a=>{a.resolve()}),t.Ec.delete(e)}function HY(t,e,a){const r=wi(t);let i=r.Tc[r.currentUser.toKey()];if(i){const l=i.get(e);l&&(a?l.reject(a):l.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function pM(t,e,a=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t._c.get(e))t.wc.delete(r),a&&t.dc.Pc(r,a);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(r=>{t.Ic.containsKey(r)||$Y(t,r)})}function $Y(t,e){t.mc.delete(e.path.canonicalString());const a=t.gc.get(e);a!==null&&(IY(t.remoteStore,a),t.gc=t.gc.remove(e),t.yc.delete(a),wL(t))}function ZU(t,e,a){for(const r of a)r instanceof jY?(t.Ic.addReference(r.key,e),$he(t,r)):r instanceof GY?(_n("SyncEngine","Document no longer in limbo: "+r.key),t.Ic.removeReference(r.key,e),t.Ic.containsKey(r.key)||$Y(t,r.key)):si()}function $he(t,e){const a=e.key,r=a.path.canonicalString();t.gc.get(a)||t.mc.has(r)||(_n("SyncEngine","New document in limbo: "+a),t.mc.add(r),wL(t))}function wL(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const a=new ei(Hl.fromString(e)),r=t.Ac.next();t.yc.set(r,new Fhe(a)),t.gc=t.gc.insert(a,r),MY(t.remoteStore,new ky(Mg(X2(a.path)),r,"TargetPurposeLimboResolution",J3.ct))}}async function iC(t,e,a){const r=wi(t),i=[],l=[],c=[];r.wc.isEmpty()||(r.wc.forEach((n,v)=>{c.push(r.Rc(v,e,a).then(R=>{if((R||a)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,R!=null&&R.fromCache?"not-current":"current"),R){i.push(R);const x=dL.Li(v.targetId,R);l.push(x)}}))}),await Promise.all(c),r.dc.nu(i),await async function(n,v){const R=wi(n);try{await R.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>Fr.forEach(v,N=>Fr.forEach(N.Fi,L=>R.persistence.referenceDelegate.addReference(x,N.targetId,L)).next(()=>Fr.forEach(N.Bi,L=>R.persistence.referenceDelegate.removeReference(x,N.targetId,L)))))}catch(x){if(!tC(x))throw x;_n("LocalStore","Failed to update sequence numbers: "+x)}for(const x of v){const N=x.targetId;if(!x.fromCache){const L=R.Ji.get(N),F=L.snapshotVersion,j=L.withLastLimboFreeSnapshotVersion(F);R.Ji=R.Ji.insert(N,j)}}}(r.localStore,l))}async function Khe(t,e){const a=wi(t);if(!a.currentUser.isEqual(e)){_n("SyncEngine","User change. New user:",e.toKey());const r=await OY(a.localStore,e);a.currentUser=e,function(i,l){i.Ec.forEach(c=>{c.forEach(n=>{n.reject(new Wr(nr.CANCELLED,l))})}),i.Ec.clear()}(a,"'waitForPendingWrites' promise is rejected due to a user change."),a.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await iC(a,r.er)}}function Whe(t,e){const a=wi(t),r=a.yc.get(e);if(r&&r.fc)return Yi().add(r.key);{let i=Yi();const l=a._c.get(e);if(!l)return i;for(const c of l){const n=a.wc.get(c);i=i.unionWith(n.view.nc)}return i}}function Yhe(t){const e=wi(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZY.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Whe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Zhe.bind(null,e),e.dc.nu=Dhe.bind(null,e.eventManager),e.dc.Pc=Mhe.bind(null,e.eventManager),e}function Xhe(t){const e=wi(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qhe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Hhe.bind(null,e),e}class qU{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=iP(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,a){return null}createIndexBackfillerScheduler(e,a){return null}createLocalStore(e){return ihe(this.persistence,new rhe,e.initialUser,this.serializer)}createPersistence(e){return new the(cL.zs,this.serializer)}createSharedClientState(e){return new hhe}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Jhe{async initialize(e,a){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(a),this.remoteStore=this.createRemoteStore(a),this.eventManager=this.createEventManager(a),this.syncEngine=this.createSyncEngine(a,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>GU(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Khe.bind(null,this.syncEngine),await Ohe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new zhe}createDatastore(e){const a=iP(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new ghe(i));var i;return function(l,c,n,v){return new vhe(l,c,n,v)}(e.authCredentials,e.appCheckCredentials,r,a)}createRemoteStore(e){return a=this.localStore,r=this.datastore,i=e.asyncQueue,l=n=>GU(this.syncEngine,n,0),c=UU.D()?new UU:new fhe,new whe(a,r,i,l,c);var a,r,i,l,c}createSyncEngine(e,a){return function(r,i,l,c,n,v,R){const x=new khe(r,i,l,c,n,v);return R&&(x.vc=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,a)}terminate(){return async function(e){const a=wi(e);_n("RemoteStore","RemoteStore shutting down."),a.vu.add(5),await nC(a),a.Pu.shutdown(),a.bu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Dg("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,a){this.muted||setTimeout(()=>{this.muted||e(a)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qhe{constructor(e,a,r,i){this.authCredentials=e,this.appCheckCredentials=a,this.asyncQueue=r,this.databaseInfo=i,this.user=md.UNAUTHENTICATED,this.clientId=XW.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async l=>{_n("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(_n("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Wr(nr.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pg;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(a){const r=gL(a,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function kN(t,e){t.asyncQueue.verifyOperationInProgress(),_n("FirestoreClient","Initializing OfflineComponentProvider");const a=await t.getConfiguration();await e.initialize(a);let r=a.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await OY(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function HU(t,e){t.asyncQueue.verifyOperationInProgress();const a=await tfe(t);_n("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(a,r),t.setCredentialChangeListener(i=>BU(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,l)=>BU(e.remoteStore,l)),t._onlineComponents=e}function efe(t){return t.name==="FirebaseError"?t.code===nr.FAILED_PRECONDITION||t.code===nr.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function tfe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){_n("FirestoreClient","Using user provided OfflineComponentProvider");try{await kN(t,t._uninitializedComponentsProvider._offline)}catch(e){const a=e;if(!efe(a))throw a;R_("Error using user provided cache. Falling back to memory cache: "+a),await kN(t,new qU)}}else _n("FirestoreClient","Using default OfflineComponentProvider"),await kN(t,new qU);return t._offlineComponents}async function KY(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(_n("FirestoreClient","Using user provided OnlineComponentProvider"),await HU(t,t._uninitializedComponentsProvider._online)):(_n("FirestoreClient","Using default OnlineComponentProvider"),await HU(t,new Jhe))),t._onlineComponents}function afe(t){return KY(t).then(e=>e.syncEngine)}async function sx(t){const e=await KY(t),a=e.eventManager;return a.onListen=Uhe.bind(null,e.syncEngine),a.onUnlisten=jhe.bind(null,e.syncEngine),a}function rfe(t,e,a={}){const r=new Pg;return t.asyncQueue.enqueueAndForget(async()=>function(i,l,c,n,v){const R=new RL({next:N=>{l.enqueueAndForget(()=>AL(i,x));const L=N.docs.has(c);!L&&N.fromCache?v.reject(new Wr(nr.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&N.fromCache&&n&&n.source==="server"?v.reject(new Wr(nr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(N)},error:N=>v.reject(N)}),x=new _L(X2(c.path),R,{includeMetadataChanges:!0,Ku:!0});return yL(i,x)}(await sx(t),t.asyncQueue,e,a,r)),r.promise}function nfe(t,e,a={}){const r=new Pg;return t.asyncQueue.enqueueAndForget(async()=>function(i,l,c,n,v){const R=new RL({next:N=>{l.enqueueAndForget(()=>AL(i,x)),N.fromCache&&n.source==="server"?v.reject(new Wr(nr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(N)},error:N=>v.reject(N)}),x=new _L(c,R,{includeMetadataChanges:!0,Ku:!0});return yL(i,x)}(await sx(t),t.asyncQueue,e,a,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WY(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $U=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YY(t,e,a){if(!a)throw new Wr(nr.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ife(t,e,a,r){if(e===!0&&r===!0)throw new Wr(nr.INVALID_ARGUMENT,`${t} and ${a} cannot be used together.`)}function KU(t){if(!ei.isDocumentKey(t))throw new Wr(nr.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function WU(t){if(ei.isDocumentKey(t))throw new Wr(nr.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function lP(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(a){return a.constructor?a.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":si()}function dh(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Wr(nr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const a=lP(t);throw new Wr(nr.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${a}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YU{constructor(e){var a,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Wr(nr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(a=e.ssl)===null||a===void 0||a;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Wr(nr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ife("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WY((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Wr(nr.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Wr(nr.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Wr(nr.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(a=this.experimentalLongPollingOptions,r=e.experimentalLongPollingOptions,a.timeoutSeconds===r.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var a,r}}class uP{constructor(e,a,r,i){this._authCredentials=e,this._appCheckCredentials=a,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new YU({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Wr(nr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Wr(nr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new YU(e),e.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new Pce;switch(a.type){case"firstParty":return new Vce(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Wr(nr.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const a=$U.get(e);a&&(_n("ComponentProvider","Removing Datastore"),$U.delete(e),a.terminate())}(this),Promise.resolve()}}function sfe(t,e,a,r={}){var i;const l=(t=dh(t,uP))._getSettings(),c=`${e}:${a}`;if(l.host!=="firestore.googleapis.com"&&l.host!==c&&R_("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},l),{host:c,ssl:!1})),r.mockUserToken){let n,v;if(typeof r.mockUserToken=="string")n=r.mockUserToken,v=md.MOCK_USER;else{n=uK(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const R=r.mockUserToken.sub||r.mockUserToken.user_id;if(!R)throw new Wr(nr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new md(R)}t._authCredentials=new Ece(new YW(n,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,a,r){this.converter=a,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $y(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Sd(this.firestore,e,this._key)}}class oA{constructor(e,a,r){this.converter=a,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new oA(this.firestore,e,this._query)}}class $y extends oA{constructor(e,a,r){super(e,a,X2(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sd(this.firestore,null,new ei(e))}withConverter(e){return new $y(this.firestore,e,this._path)}}function Dn(t,e,...a){if(t=yl(t),YY("collection","path",e),t instanceof uP){const r=Hl.fromString(e,...a);return WU(r),new $y(t,null,r)}{if(!(t instanceof Sd||t instanceof $y))throw new Wr(nr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Hl.fromString(e,...a));return WU(r),new $y(t.firestore,null,r)}}function ds(t,e,...a){if(t=yl(t),arguments.length===1&&(e=XW.A()),YY("doc","path",e),t instanceof uP){const r=Hl.fromString(e,...a);return KU(r),new Sd(t,null,new ei(r))}{if(!(t instanceof Sd||t instanceof $y))throw new Wr(nr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Hl.fromString(e,...a));return KU(r),new Sd(t.firestore,t instanceof $y?t.converter:null,new ei(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ofe{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new zY(this,"async_queue_retry"),this.Xc=()=>{const a=FN();a&&_n("AsyncQueue","Visibility state changed to "+a.visibilityState),this.qo.Mo()};const e=FN();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const a=FN();a&&typeof a.removeEventListener=="function"&&a.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const a=new Pg;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(a.resolve,a.reject),a.promise)).then(()=>a.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!tC(e))throw e;_n("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const a=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{this.Wc=r,this.Hc=!1;const i=function(l){let c=l.message||"";return l.stack&&(c=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),c}(r);throw Dg("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Hc=!1,r))));return this.Gc=a,a}enqueueAfterDelay(e,a,r){this.Zc(),this.Yc.indexOf(e)>-1&&(a=0);const i=mL.createAndSchedule(this,e,a,r,l=>this.na(l));return this.zc.push(i),i}Zc(){this.Wc&&si()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(const a of this.zc)if(a.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((a,r)=>a.targetTimeMs-r.targetTimeMs);for(const a of this.zc)if(a.skipDelay(),e!=="all"&&a.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const a=this.zc.indexOf(e);this.zc.splice(a,1)}}function XU(t){return function(e,a){if(typeof e!="object"||e===null)return!1;const r=e;for(const i of a)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Hm extends uP{constructor(e,a,r,i){super(e,a,r,i),this.type="firestore",this._queue=new ofe,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||XY(this),this._firestoreClient.terminate()}}function lfe(t,e){const a=typeof t=="object"?t:_3(),r=typeof t=="string"?t:"(default)",i=E2(a,"firestore").getImmediate({identifier:r});if(!i._initialized){const l=sK("firestore");l&&sfe(i,...l)}return i}function sC(t){return t._firestoreClient||XY(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function XY(t){var e,a,r;const i=t._freezeSettings(),l=function(c,n,v,R){return new Zce(c,n,v,R.host,R.ssl,R.experimentalForceLongPolling,R.experimentalAutoDetectLongPolling,WY(R.experimentalLongPollingOptions),R.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Qhe(t._authCredentials,t._appCheckCredentials,t._queue,l),!((a=i.cache)===null||a===void 0)&&a._offlineComponentProvider&&(!((r=i.cache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e){this._byteString=e}static fromBase64String(e){try{return new P_(xd.fromBase64String(e))}catch(a){throw new Wr(nr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+a)}}static fromUint8Array(e){return new P_(xd.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(...e){for(let a=0;a<e.length;++a)if(e[a].length===0)throw new Wr(nr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zm(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e,a){if(!isFinite(e)||e<-90||e>90)throw new Wr(nr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(a)||a<-180||a>180)throw new Wr(nr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+a);this._lat=e,this._long=a}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xs(this._lat,e._lat)||xs(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ufe=/^__.*__$/;class cfe{constructor(e,a,r){this.data=e,this.fieldMask=a,this.fieldTransforms=r}toMutation(e,a){return this.fieldMask!==null?new sA(e,this.data,this.fieldMask,a,this.fieldTransforms):new aC(e,this.data,a,this.fieldTransforms)}}class JY{constructor(e,a,r){this.data=e,this.fieldMask=a,this.fieldTransforms=r}toMutation(e,a){return new sA(e,this.data,this.fieldMask,a,this.fieldTransforms)}}function QY(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw si()}}class SL{constructor(e,a,r,i,l,c){this.settings=e,this.databaseId=a,this.serializer=r,this.ignoreUndefinedProperties=i,l===void 0&&this.ua(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new SL(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var a;const r=(a=this.path)===null||a===void 0?void 0:a.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var a;const r=(a=this.path)===null||a===void 0?void 0:a.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return ox(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return this.fieldMask.find(a=>e.isPrefixOf(a))!==void 0||this.fieldTransforms.find(a=>e.isPrefixOf(a.field))!==void 0}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(e.length===0)throw this._a("Document fields must not be empty");if(QY(this.ca)&&ufe.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class dfe{constructor(e,a,r){this.databaseId=e,this.ignoreUndefinedProperties=a,this.serializer=r||iP(e)}ya(e,a,r,i=!1){return new SL({ca:e,methodName:a,ga:r,path:Zm.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lC(t){const e=t._freezeSettings(),a=iP(t._databaseId);return new dfe(t._databaseId,!!e.ignoreUndefinedProperties,a)}function bL(t,e,a,r,i,l={}){const c=t.ya(l.merge||l.mergeFields?2:0,e,a,i);xL("Data must be an object, but it was:",c,r);const n=aX(r,c);let v,R;if(l.merge)v=new gf(c.fieldMask),R=c.fieldTransforms;else if(l.mergeFields){const x=[];for(const N of l.mergeFields){const L=mM(e,N,a);if(!c.contains(L))throw new Wr(nr.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);nX(x,L)||x.push(L)}v=new gf(x),R=c.fieldTransforms.filter(N=>v.covers(N.field))}else v=null,R=c.fieldTransforms;return new cfe(new Ih(n),v,R)}class cP extends TL{_toFieldTransform(e){if(e.ca!==2)throw e.ca===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cP}}function eX(t,e,a,r){const i=t.ya(1,e,a);xL("Data must be an object, but it was:",i,r);const l=[],c=Ih.empty();Zv(r,(v,R)=>{const x=PL(e,v,a);R=yl(R);const N=i.da(x);if(R instanceof cP)l.push(x);else{const L=uC(R,N);L!=null&&(l.push(x),c.set(x,L))}});const n=new gf(l);return new JY(c,n,i.fieldTransforms)}function tX(t,e,a,r,i,l){const c=t.ya(1,e,a),n=[mM(e,r,a)],v=[i];if(l.length%2!=0)throw new Wr(nr.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<l.length;L+=2)n.push(mM(e,l[L])),v.push(l[L+1]);const R=[],x=Ih.empty();for(let L=n.length-1;L>=0;--L)if(!nX(R,n[L])){const F=n[L];let j=v[L];j=yl(j);const $=c.da(F);if(j instanceof cP)R.push(F);else{const H=uC(j,$);H!=null&&(R.push(F),x.set(F,H))}}const N=new gf(R);return new JY(x,N,c.fieldTransforms)}function hfe(t,e,a,r=!1){return uC(a,t.ya(r?4:3,e))}function uC(t,e){if(rX(t=yl(t)))return xL("Unsupported field value:",e,t),aX(t,e);if(t instanceof TL)return function(a,r){if(!QY(r.ca))throw r._a(`${a._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${a._methodName}() is not currently supported inside arrays`);const i=a._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&e.ca!==4)throw e._a("Nested arrays are not supported");return function(a,r){const i=[];let l=0;for(const c of a){let n=uC(c,r.wa(l));n==null&&(n={nullValue:"NULL_VALUE"}),i.push(n),l++}return{arrayValue:{values:i}}}(t,e)}return function(a,r){if((a=yl(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return cde(r.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const i=uh.fromDate(a);return{timestampValue:nx(r.serializer,i)}}if(a instanceof uh){const i=new uh(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:nx(r.serializer,i)}}if(a instanceof CL)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof P_)return{bytesValue:SY(r.serializer,a._byteString)};if(a instanceof Sd){const i=r.databaseId,l=a.firestore._databaseId;if(!l.isEqual(i))throw r._a(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:lL(a.firestore._databaseId||r.databaseId,a._key.path)}}throw r._a(`Unsupported field value: ${lP(a)}`)}(t,e)}function aX(t,e){const a={};return QW(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zv(t,(r,i)=>{const l=uC(i,e.ha(r));l!=null&&(a[r]=l)}),{mapValue:{fields:a}}}function rX(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof uh||t instanceof CL||t instanceof P_||t instanceof Sd||t instanceof TL)}function xL(t,e,a){if(!rX(a)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(a)){const r=lP(a);throw r==="an object"?e._a(t+" a custom object"):e._a(t+" "+r)}}function mM(t,e,a){if((e=yl(e))instanceof oC)return e._internalPath;if(typeof e=="string")return PL(t,e);throw ox("Field path arguments must be of type string or ",t,!1,void 0,a)}const ffe=new RegExp("[~\\*/\\[\\]]");function PL(t,e,a){if(e.search(ffe)>=0)throw ox(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,a);try{return new oC(...e.split("."))._internalPath}catch{throw ox(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,a)}}function ox(t,e,a,r,i){const l=r&&!r.isEmpty(),c=i!==void 0;let n=`Function ${e}() called with invalid data`;a&&(n+=" (via `toFirestore()`)"),n+=". ";let v="";return(l||c)&&(v+=" (found",l&&(v+=` in field ${r}`),c&&(v+=` in document ${i}`),v+=")"),new Wr(nr.INVALID_ARGUMENT,n+t+v)}function nX(t,e){return t.some(a=>a.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iX{constructor(e,a,r,i,l){this._firestore=e,this._userDataWriter=a,this._key=r,this._document=i,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Sd(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pfe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const a=this._document.data.field(dP("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a)}}}class pfe extends iX{data(){return super.data()}}function dP(t,e){return typeof e=="string"?PL(t,e):e instanceof oC?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sX(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Wr(nr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class EL{}class oX extends EL{}function Tg(t,e,...a){let r=[];e instanceof EL&&r.push(e),r=r.concat(a),function(i){const l=i.filter(n=>n instanceof NL).length,c=i.filter(n=>n instanceof hP).length;if(l>1||l>0&&c>0)throw new Wr(nr.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class hP extends oX{constructor(e,a,r){super(),this._field=e,this._op=a,this._value=r,this.type="where"}static _create(e,a,r){return new hP(e,a,r)}_apply(e){const a=this._parse(e);return lX(e._query,a),new oA(e.firestore,e.converter,sM(e._query,a))}_parse(e){const a=lC(e.firestore);return function(i,l,c,n,v,R,x){let N;if(v.isKeyField()){if(R==="array-contains"||R==="array-contains-any")throw new Wr(nr.INVALID_ARGUMENT,`Invalid Query. You can't perform '${R}' queries on documentId().`);if(R==="in"||R==="not-in"){QU(x,R);const L=[];for(const F of x)L.push(JU(n,i,F));N={arrayValue:{values:L}}}else N=JU(n,i,x)}else R!=="in"&&R!=="not-in"&&R!=="array-contains-any"||QU(x,R),N=hfe(c,l,x,R==="in"||R==="not-in");return Au.create(v,R,N)}(e._query,"where",a,e.firestore._databaseId,this._field,this._op,this._value)}}function cR(t,e,a){const r=e,i=dP("where",t);return hP._create(i,r,a)}class NL extends EL{constructor(e,a){super(),this.type=e,this._queryConstraints=a}static _create(e,a){return new NL(e,a)}_parse(e){const a=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return a.length===1?a[0]:Wp.create(a,this._getOperator())}_apply(e){const a=this._parse(e);return a.getFilters().length===0?e:(function(r,i){let l=r;const c=i.getFlattenedFilters();for(const n of c)lX(l,n),l=sM(l,n)}(e._query,a),new oA(e.firestore,e.converter,sM(e._query,a)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class OL extends oX{constructor(e,a){super(),this._field=e,this._direction=a,this.type="orderBy"}static _create(e,a){return new OL(e,a)}_apply(e){const a=function(r,i,l){if(r.startAt!==null)throw new Wr(nr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Wr(nr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new c_(i,l);return function(n,v){if(nL(n)===null){const R=J2(n);R!==null&&uX(n,R,v.field)}}(r,c),c}(e._query,this._field,this._direction);return new oA(e.firestore,e.converter,function(r,i){const l=r.explicitOrderBy.concat([i]);return new p1(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,a))}}function lx(t,e="asc"){const a=e,r=dP("orderBy",t);return OL._create(r,a)}function JU(t,e,a){if(typeof(a=yl(a))=="string"){if(a==="")throw new Wr(nr.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lY(e)&&a.indexOf("/")!==-1)throw new Wr(nr.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${a}' contains a '/' character.`);const r=e.path.child(Hl.fromString(a));if(!ei.isDocumentKey(r))throw new Wr(nr.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wU(t,new ei(r))}if(a instanceof Sd)return wU(t,a._key);throw new Wr(nr.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lP(a)}.`)}function QU(t,e){if(!Array.isArray(t)||t.length===0)throw new Wr(nr.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lX(t,e){if(e.isInequality()){const r=J2(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new Wr(nr.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const l=nL(t);l!==null&&uX(t,i,l)}const a=function(r,i){for(const l of r)for(const c of l.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(a!==null)throw a===e.op?new Wr(nr.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Wr(nr.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${a.toString()}' filters.`)}function uX(t,e,a){if(!a.isEqual(e))throw new Wr(nr.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${a.toString()}' instead.`)}class mfe{convertValue(e,a="none"){switch(Vv(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,a);case 5:return e.stringValue;case 6:return this.convertBytes(Ov(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,a);case 10:return this.convertObject(e.mapValue,a);default:throw si()}}convertObject(e,a){return this.convertObjectMap(e.fields,a)}convertObjectMap(e,a="none"){const r={};return Zv(e,(i,l)=>{r[i]=this.convertValue(l,a)}),r}convertGeoPoint(e){return new CL(mu(e.latitude),mu(e.longitude))}convertArray(e,a){return(e.values||[]).map(r=>this.convertValue(r,a))}convertServerTimestamp(e,a){switch(a){case"previous":const r=eL(e);return r==null?null:this.convertValue(r,a);case"estimate":return this.convertTimestamp($R(e));default:return null}}convertTimestamp(e){const a=Xy(e);return new uh(a.seconds,a.nanos)}convertDocumentKey(e,a){const r=Hl.fromString(e);Uo(NY(r));const i=new KR(r.get(1),r.get(3)),l=new ei(r.popFirst(5));return i.isEqual(a)||Dg(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${a.projectId}/${a.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(t,e,a){let r;return r=t?a&&(a.merge||a.mergeFields)?t.toFirestore(e,a):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,a){this.hasPendingWrites=e,this.fromCache=a}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cX extends iX{constructor(e,a,r,i,l,c){super(e,a,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const a=new Tb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(a,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,a={}){if(this._document){const r=this._document.data.field(dP("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,a.serverTimestamps)}}}class Tb extends cX{data(e={}){return super.data(e)}}class dX{constructor(e,a,r,i){this._firestore=e,this._userDataWriter=a,this._snapshot=i,this.metadata=new dR(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(a=>e.push(a)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,a){this._snapshot.docs.forEach(r=>{e.call(a,new Tb(this._firestore,this._userDataWriter,r.key,r,new dR(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const a=!!e.includeMetadataChanges;if(a&&this._snapshot.excludesMetadataChanges)throw new Wr(nr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===a||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(c=>{const n=new Tb(r._firestore,r._userDataWriter,c.doc.key,c.doc,new dR(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:n,oldIndex:-1,newIndex:l++}})}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const n=new Tb(r._firestore,r._userDataWriter,c.doc.key,c.doc,new dR(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,R=-1;return c.type!==0&&(v=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),R=l.indexOf(c.doc.key)),{type:gfe(c.type),doc:n,oldIndex:v,newIndex:R}})}}(this,a),this._cachedChangesIncludeMetadataChanges=a),this._cachedChanges}}function gfe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return si()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(t){t=dh(t,Sd);const e=dh(t.firestore,Hm);return rfe(sC(e),t._key).then(a=>fX(e,t,a))}class zL extends mfe{constructor(e){super(),this.firestore=e}convertBytes(e){return new P_(e)}convertReference(e){const a=this.convertDocumentKey(e,this.firestore._databaseId);return new Sd(this.firestore,null,a)}}function Hi(t){t=dh(t,oA);const e=dh(t.firestore,Hm),a=sC(e),r=new zL(e);return sX(t._query),nfe(a,t._query).then(i=>new dX(e,r,t,i))}function yfe(t,e,a){t=dh(t,Sd);const r=dh(t.firestore,Hm),i=VL(t.converter,e,a);return cC(r,[bL(lC(r),"setDoc",t._key,i,t.converter!==null,a).toMutation(t._key,ch.none())])}function yu(t,e,a,...r){t=dh(t,Sd);const i=dh(t.firestore,Hm),l=lC(i);let c;return c=typeof(e=yl(e))=="string"||e instanceof oC?tX(l,"updateDoc",t._key,e,a,r):eX(l,"updateDoc",t._key,e),cC(i,[c.toMutation(t._key,ch.exists(!0))])}function hX(t){return cC(dh(t.firestore,Hm),[new rP(t._key,ch.none())])}function zv(t,e){const a=dh(t.firestore,Hm),r=ds(t),i=VL(t.converter,e);return cC(a,[bL(lC(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,ch.exists(!1))]).then(()=>r)}function Up(t,...e){var a,r,i;t=yl(t);let l={includeMetadataChanges:!1},c=0;typeof e[c]!="object"||XU(e[c])||(l=e[c],c++);const n={includeMetadataChanges:l.includeMetadataChanges};if(XU(e[c])){const N=e[c];e[c]=(a=N.next)===null||a===void 0?void 0:a.bind(N),e[c+1]=(r=N.error)===null||r===void 0?void 0:r.bind(N),e[c+2]=(i=N.complete)===null||i===void 0?void 0:i.bind(N)}let v,R,x;if(t instanceof Sd)R=dh(t.firestore,Hm),x=X2(t._key.path),v={next:N=>{e[c]&&e[c](fX(R,t,N))},error:e[c+1],complete:e[c+2]};else{const N=dh(t,oA);R=dh(N.firestore,Hm),x=N._query;const L=new zL(R);v={next:F=>{e[c]&&e[c](new dX(R,L,N,F))},error:e[c+1],complete:e[c+2]},sX(t._query)}return function(N,L,F,j){const $=new RL(j),H=new _L(L,$,F);return N.asyncQueue.enqueueAndForget(async()=>yL(await sx(N),H)),()=>{$.Dc(),N.asyncQueue.enqueueAndForget(async()=>AL(await sx(N),H))}}(sC(R),x,n,v)}function cC(t,e){return function(a,r){const i=new Pg;return a.asyncQueue.enqueueAndForget(async()=>Ghe(await afe(a),r,i)),i.promise}(sC(t),e)}function fX(t,e,a){const r=a.docs.get(e._key),i=new zL(t);return new cX(t,i,e._key,r,new dR(a.hasPendingWrites,a.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Afe{constructor(e,a){this._firestore=e,this._commitHandler=a,this._mutations=[],this._committed=!1,this._dataReader=lC(e)}set(e,a,r){this._verifyNotCommitted();const i=UN(e,this._firestore),l=VL(i.converter,a,r),c=bL(this._dataReader,"WriteBatch.set",i._key,l,i.converter!==null,r);return this._mutations.push(c.toMutation(i._key,ch.none())),this}update(e,a,r,...i){this._verifyNotCommitted();const l=UN(e,this._firestore);let c;return c=typeof(a=yl(a))=="string"||a instanceof oC?tX(this._dataReader,"WriteBatch.update",l._key,a,r,i):eX(this._dataReader,"WriteBatch.update",l._key,a),this._mutations.push(c.toMutation(l._key,ch.exists(!0))),this}delete(e){this._verifyNotCommitted();const a=UN(e,this._firestore);return this._mutations=this._mutations.concat(new rP(a._key,ch.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Wr(nr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function UN(t,e){if((t=yl(t)).firestore!==e)throw new Wr(nr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vfe(t){return sC(t=dh(t,Hm)),new Afe(t,e=>cC(t,e))}(function(t,e=!0){(function(a){f1=a})(jv),xv(new Yy("firestore",(a,{instanceIdentifier:r,options:i})=>{const l=a.getProvider("app").getImmediate(),c=new Hm(new Nce(a.getProvider("auth-internal")),new Dce(a.getProvider("app-check-internal")),function(n,v){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Wr(nr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new KR(n.options.projectId,v)}(l,r),l);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Lm(gU,"3.13.0",t),Lm(gU,"3.13.0","esm2017")})();const _fe={apiKey:"AIzaSyAqEefB5cZ1jVzeqdhxfRYHUzOqgyUqieo",authDomain:"ecp-caps.firebaseapp.com",projectId:"ecp-caps",storageBucket:"ecp-caps.firebasestorage.app",messagingSenderId:"1040391525167",appId:"1:1040391525167:web:c4b9bff139a86daacf47da"},pX=hK(_fe),Dv=KK(pX),wr=lfe(pX);var mX={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},eB=Ot.createContext&&Ot.createContext(mX),wfe=["attr","size","title"];function Rfe(t,e){if(t==null)return{};var a=Tfe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Tfe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function ux(){return ux=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ux.apply(this,arguments)}function tB(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function cx(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?tB(Object(a),!0).forEach(function(r){Cfe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):tB(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Cfe(t,e,a){return e=Sfe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Sfe(t){var e=bfe(t,"string");return typeof e=="symbol"?e:e+""}function bfe(t,e){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gX(t){return t&&t.map((e,a)=>Ot.createElement(e.tag,cx({key:a},e.attr),gX(e.child)))}function Eo(t){return e=>Ot.createElement(xfe,ux({attr:cx({},t.attr)},e),gX(t.child))}function xfe(t){var e=a=>{var{attr:r,size:i,title:l}=t,c=Rfe(t,wfe),n=i||a.size||"1em",v;return a.className&&(v=a.className),t.className&&(v=(v?v+" ":"")+t.className),Ot.createElement("svg",ux({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,r,c,{className:v,style:cx(cx({color:t.color||a.color},a.style),t.style),height:n,width:n,xmlns:"http://www.w3.org/2000/svg"}),l&&Ot.createElement("title",null,l),t.children)};return eB!==void 0?Ot.createElement(eB.Consumer,null,a=>e(a)):e(mX)}function Pfe(t){return Eo({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(t)}function Efe(t){return Eo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"},child:[]}]})(t)}function aB(t){return Eo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function Nfe(t){return Eo({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(t)}function Ofe(t){return Eo({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(t)}function Vfe(t){return Eo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(t)}function _R(t){return Eo({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function zfe(t){return Eo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"},child:[]}]})(t)}function Dfe(t){return Eo({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 0c-69.59 0-126 56.41-126 126 0 56.26 82.35 158.8 113.9 196.02 6.39 7.54 17.82 7.54 24.2 0C331.65 284.8 414 182.26 414 126 414 56.41 357.59 0 288 0zm0 168c-23.2 0-42-18.8-42-42s18.8-42 42-42 42 18.8 42 42-18.8 42-42 42zM20.12 215.95A32.006 32.006 0 0 0 0 245.66v250.32c0 11.32 11.43 19.06 21.94 14.86L160 448V214.92c-8.84-15.98-16.07-31.54-21.25-46.42L20.12 215.95zM288 359.67c-14.07 0-27.38-6.18-36.51-16.96-19.66-23.2-40.57-49.62-59.49-76.72v182l192 64V266c-18.92 27.09-39.82 53.52-59.49 76.72-9.13 10.77-22.44 16.95-36.51 16.95zm266.06-198.51L416 224v288l139.88-55.95A31.996 31.996 0 0 0 576 426.34V176.02c0-11.32-11.43-19.06-21.94-14.86z"},child:[]}]})(t)}function Mfe(t){return Eo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"},child:[]}]})(t)}function dx(t){return Eo({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function DL(t){return Eo({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function Ife(t){return Eo({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"},child:[]}]})(t)}function rB(t){return Eo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}function Lfe(t){return Eo({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M630.6 364.9l-90.3-90.2c-12-12-28.3-18.7-45.3-18.7h-79.3c-17.7 0-32 14.3-32 32v79.2c0 17 6.7 33.2 18.7 45.2l90.3 90.2c12.5 12.5 32.8 12.5 45.3 0l92.5-92.5c12.6-12.5 12.6-32.7.1-45.2zm-182.8-21c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24c0 13.2-10.7 24-24 24zm-223.8-88c70.7 0 128-57.3 128-128C352 57.3 294.7 0 224 0S96 57.3 96 128c0 70.6 57.3 127.9 128 127.9zm127.8 111.2V294c-12.2-3.6-24.9-6.2-38.2-6.2h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 287.9 0 348.1 0 422.3v41.6c0 26.5 21.5 48 48 48h352c15.5 0 29.1-7.5 37.9-18.9l-58-58c-18.1-18.1-28.1-42.2-28.1-67.9z"},child:[]}]})(t)}function Ffe(t){return Eo({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M589.6 240l45.6-45.6c6.3-6.3 6.3-16.5 0-22.8l-22.8-22.8c-6.3-6.3-16.5-6.3-22.8 0L544 194.4l-45.6-45.6c-6.3-6.3-16.5-6.3-22.8 0l-22.8 22.8c-6.3 6.3-6.3 16.5 0 22.8l45.6 45.6-45.6 45.6c-6.3 6.3-6.3 16.5 0 22.8l22.8 22.8c6.3 6.3 16.5 6.3 22.8 0l45.6-45.6 45.6 45.6c6.3 6.3 16.5 6.3 22.8 0l22.8-22.8c6.3-6.3 6.3-16.5 0-22.8L589.6 240zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}const lA=()=>{const[t,e]=ie.useState("Loading..."),[a,r]=ie.useState([]),[i,l]=ie.useState(!1),[c,n]=ie.useState(0),v="https://ecorideupload.s3.ap-southeast-2.amazonaws.com/uploads/profile/1742829316204_image.png";ie.useEffect(()=>{const F=Dn(wr,"notifications"),j=Tg(F,lx("timestamp","desc")),$=Up(j,H=>{const W=[];H.forEach(ee=>{W.push({id:ee.id,...ee.data()})}),r(W),n(W.filter(ee=>!ee.read).length)});return()=>$()},[]),ie.useEffect(()=>{const F=Dv.onAuthStateChanged(async j=>{if(j)try{const $=ds(wr,"users",j.uid),H=await Xf($);H.exists()?e(H.data().name):e("Super Admin")}catch($){console.error("Error fetching user data:",$)}else e("Unknown User")});return()=>F()},[]);const R=()=>{l(!i)},x=async()=>{try{const F=vfe(wr);a.filter(j=>!j.read).forEach(j=>{const $=ds(wr,"notifications",j.id);F.update($,{read:!0})}),await F.commit(),r(a.map(j=>({...j,read:!0}))),n(0)}catch(F){console.error("Error marking notifications as read:",F)}},N=F=>{if(!F)return"";const j=F.toDate();return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(j)},L=F=>{switch(F.type){case"status_update":return q.jsxs("div",{className:"notification-message",children:[q.jsx("p",{children:F.message}),q.jsx("span",{className:`status-badge ${F.status.toLowerCase().replace(" ","-")}`,children:F.status})]});case"battery_update":return q.jsxs("div",{className:"notification-message",children:[q.jsx("p",{children:F.message}),q.jsx("div",{className:"battery-indicator",children:q.jsx("span",{className:"battery-level",style:{width:`${F.batteryLevel}%`}})})]});default:return q.jsx("p",{children:F.message})}};return q.jsx("div",{className:"header",children:q.jsxs("div",{className:"user-profile",children:[q.jsxs("div",{className:"profile",children:[q.jsx("img",{src:v,alt:"Profile",className:"profile-img"}),q.jsxs("div",{className:"profile-name",children:[q.jsx("p",{children:t}),q.jsx("small",{children:"Super Admin"})]})]}),q.jsxs("div",{className:"notification-container",children:[q.jsx(Pfe,{className:"icon",onClick:R}),c>0&&q.jsx("span",{className:"notification-badge",children:c}),i&&q.jsxs("div",{className:"notifications-modal",children:[q.jsxs("div",{className:"notifications-header",children:[q.jsx("h3",{children:"Notifications"}),q.jsx("button",{className:"mark-all-read",onClick:x,disabled:c===0,children:"Mark all as read"})]}),q.jsx("div",{className:"notifications-list",children:a.length>0?a.map(F=>q.jsx("div",{className:`notification-item ${F.read?"":"unread"}`,children:q.jsxs("div",{className:"notification-content",children:[L(F),q.jsx("span",{className:"notification-time",children:N(F.timestamp)})]})},F.id)):q.jsx("p",{className:"no-notifications",children:"No notifications"})})]})]})]})})};function kfe(t){return Eo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19 2H6c-1.206 0-3 .799-3 3v14c0 2.201 1.794 3 3 3h15v-2H6.012C5.55 19.988 5 19.806 5 19s.55-.988 1.012-1H21V4c0-1.103-.897-2-2-2zm0 14H5V5c0-.806.55-.988 1-1h13v12z"},child:[]}]})(t)}function Ufe(t){return Eo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M11 15.414V20h2v-4.586c0-.526-.214-1.042-.586-1.414l-2-2L13 9.414l2 2c.372.372.888.586 1.414.586H20v-2h-3.586l-3.707-3.707a.999.999 0 0 0-1.414 0L8 9.586c-.378.378-.586.88-.586 1.414s.208 1.036.586 1.414l3 3z"},child:[]},{tag:"circle",attr:{cx:"16",cy:"5",r:"2"},child:[]},{tag:"path",attr:{d:"M18 14c-2.206 0-4 1.794-4 4s1.794 4 4 4 4-1.794 4-4-1.794-4-4-4zm0 6c-1.103 0-2-.897-2-2s.897-2 2-2 2 .897 2 2-.897 2-2 2zM6 22c2.206 0 4-1.794 4-4s-1.794-4-4-4-4 1.794-4 4 1.794 4 4 4zm0-6c1.103 0 2 .897 2 2s-.897 2-2 2-2-.897-2-2 .897-2 2-2z"},child:[]}]})(t)}function Bfe(t){return Eo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M3 13h1v7c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2v-7h1a1 1 0 0 0 .707-1.707l-9-9a.999.999 0 0 0-1.414 0l-9 9A1 1 0 0 0 3 13zm7 7v-5h4v5h-4zm2-15.586 6 6V15l.001 5H16v-5c0-1.103-.897-2-2-2h-4c-1.103 0-2 .897-2 2v5H6v-9.586l6-6z"},child:[]}]})(t)}function jfe(t){return Eo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16 13v-2H7V8l-5 4 5 4v-3z"},child:[]},{tag:"path",attr:{d:"M20 3h-9c-1.103 0-2 .897-2 2v4h2V5h9v14h-9v-4H9v4c0 1.103.897 2 2 2h9c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2z"},child:[]}]})(t)}function Gfe(t){return Eo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 14c2.206 0 4-1.794 4-4s-1.794-4-4-4-4 1.794-4 4 1.794 4 4 4zm0-6c1.103 0 2 .897 2 2s-.897 2-2 2-2-.897-2-2 .897-2 2-2z"},child:[]},{tag:"path",attr:{d:"M11.42 21.814a.998.998 0 0 0 1.16 0C12.884 21.599 20.029 16.44 20 10c0-4.411-3.589-8-8-8S4 5.589 4 9.995c-.029 6.445 7.116 11.604 7.42 11.819zM12 4c3.309 0 6 2.691 6 6.005.021 4.438-4.388 8.423-6 9.73-1.611-1.308-6.021-5.294-6-9.735 0-3.309 2.691-6 6-6z"},child:[]}]})(t)}function Zfe(t){return Eo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 12a2 2 0 0 0-.703.133l-2.398-1.963c.059-.214.101-.436.101-.67C17 8.114 15.886 7 14.5 7S12 8.114 12 9.5c0 .396.1.765.262 1.097l-2.909 3.438A2.06 2.06 0 0 0 9 14c-.179 0-.348.03-.512.074l-2.563-2.563C5.97 11.348 6 11.179 6 11c0-1.108-.892-2-2-2s-2 .892-2 2 .892 2 2 2c.179 0 .348-.03.512-.074l2.563 2.563A1.906 1.906 0 0 0 7 16c0 1.108.892 2 2 2s2-.892 2-2c0-.237-.048-.46-.123-.671l2.913-3.442c.227.066.462.113.71.113a2.48 2.48 0 0 0 1.133-.281l2.399 1.963A2.077 2.077 0 0 0 18 14c0 1.108.892 2 2 2s2-.892 2-2-.892-2-2-2z"},child:[]}]})(t)}function qfe(t){return Eo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4 21h15.893c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2H4c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2zm0-2v-5h4v5H4zM14 7v5h-4V7h4zM8 7v5H4V7h4zm2 12v-5h4v5h-4zm6 0v-5h3.894v5H16zm3.893-7H16V7h3.893v5z"},child:[]}]})(t)}function Hfe(t){return Eo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M5 22h14c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2h-2a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1H5c-1.103 0-2 .897-2 2v15c0 1.103.897 2 2 2zM5 5h2v2h10V5h2v15H5V5z"},child:[]},{tag:"path",attr:{d:"m11 13.586-1.793-1.793-1.414 1.414L11 16.414l5.207-5.207-1.414-1.414z"},child:[]}]})(t)}function $fe(t){return Eo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20.29 8.29 16 12.58l-1.3-1.29-1.41 1.42 2.7 2.7 5.72-5.7zM4 8a3.91 3.91 0 0 0 4 4 3.91 3.91 0 0 0 4-4 3.91 3.91 0 0 0-4-4 3.91 3.91 0 0 0-4 4zm6 0a1.91 1.91 0 0 1-2 2 1.91 1.91 0 0 1-2-2 1.91 1.91 0 0 1 2-2 1.91 1.91 0 0 1 2 2zM4 18a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1h2v-1a5 5 0 0 0-5-5H7a5 5 0 0 0-5 5v1h2z"},child:[]}]})(t)}function Kfe(t){return Eo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m20 8-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8zM9 19H7v-9h2v9zm4 0h-2v-6h2v6zm4 0h-2v-3h2v3zM14 9h-1V4l5 5h-4z"},child:[]}]})(t)}const ML=()=>{const t=f3(),e=rA(),a=async()=>{try{await Dv.signOut(),t("/login")}catch(i){console.error("Error signing out: ",i.message)}},r=i=>e.pathname===i;return q.jsxs("div",{className:"sidebar",children:[q.jsx("div",{className:"logo",children:q.jsx("img",{src:"/ecpcaps/assets/ecoridelogo2.png",alt:"EcoRide Logo",style:{width:"100%",maxWidth:"100px",height:"auto"}})}),q.jsxs("div",{className:"menu-list",children:[q.jsxs("div",{className:`menu-item ${r("/dashboard")?"active":""}`,onClick:()=>t("/dashboard"),children:[q.jsx(Bfe,{}),q.jsx("span",{children:"Dashboard"})]}),q.jsxs("div",{className:`menu-item ${r("/stations")?"active":""}`,onClick:()=>t("/stations"),children:[q.jsx(kfe,{}),q.jsx("span",{children:"Manage Stations"})]}),q.jsxs("div",{className:`menu-item ${r("/user-management")?"active":""}`,onClick:()=>t("/user-management"),children:[q.jsx($fe,{}),q.jsx("span",{children:"Manage User"})]}),q.jsxs("div",{className:`menu-item ${r("/admin-management")?"active":""}`,onClick:()=>t("/admin-management"),children:[q.jsx(Kfe,{}),q.jsx("span",{children:"Manage & Create Admin"})]}),q.jsxs("div",{className:`menu-item ${r("/bike-management")?"active":""}`,onClick:()=>t("/bike-management"),children:[q.jsx(Ufe,{}),q.jsx("span",{children:"Manage Bikes"})]}),q.jsxs("div",{className:`menu-item ${r("/rate-management")?"active":""}`,onClick:()=>t("/rate-management"),children:[q.jsx(Hfe,{}),q.jsx("span",{children:"Rate Management"})]}),q.jsxs("div",{className:`menu-item ${r("/system-analytics")?"active":""}`,onClick:()=>t("/system-analytics"),children:[q.jsx(Zfe,{}),q.jsx("span",{children:"System Analytics"})]}),q.jsxs("div",{className:`menu-item ${r("/ride-details")?"active":""}`,onClick:()=>t("/ride-details"),children:[q.jsx(qfe,{}),q.jsx("span",{children:"Ride Details"})]}),q.jsxs("div",{className:`menu-item ${r("/coverage-area")?"active":""}`,onClick:()=>t("/coverage-area"),children:[q.jsx(Gfe,{}),q.jsx("span",{children:"Coverage Area"})]}),q.jsxs("div",{className:"menu-item logout",onClick:a,children:[q.jsx(jfe,{}),q.jsx("span",{children:"Logout"})]})]})]})};var Cb={exports:{}},Wfe=Cb.exports,nB;function Yfe(){return nB||(nB=1,function(t,e){(function(a,r){t.exports=r()})(Wfe,function(){var a,r,i;function l(n,v){if(!a)a=v;else if(!r)r=v;else{var R="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+a+")(sharedChunk); ("+r+")(sharedChunk); self.onerror = null;",x={};a(x),i=v(x),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(i.workerUrl=window.URL.createObjectURL(new Blob([R],{type:"text/javascript"})))}}l(["exports"],function(n){function v(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var R,x={},N={};function L(){if(R)return N;R=1,Object.defineProperty(N,"__esModule",{value:!0}),N.setMatrixArrayType=function(g){N.ARRAY_TYPE=s=g},N.toRadian=function(g){return g*f},N.equals=function(g,m){return Math.abs(g-m)<=h*Math.max(1,Math.abs(g),Math.abs(m))},N.RANDOM=N.ARRAY_TYPE=N.EPSILON=void 0;var h=1e-6;N.EPSILON=h;var s=typeof Float32Array<"u"?Float32Array:Array;N.ARRAY_TYPE=s;var u=Math.random;N.RANDOM=u;var f=Math.PI/180;return Math.hypot||(Math.hypot=function(){for(var g=0,m=arguments.length;m--;)g+=arguments[m]*arguments[m];return Math.sqrt(g)}),N}var F,j={};function $(){if(F)return j;function h(m){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},h(m)}F=1,Object.defineProperty(j,"__esModule",{value:!0}),j.create=function(){var m=new s.ARRAY_TYPE(4);return s.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m},j.clone=function(m){var _=new s.ARRAY_TYPE(4);return _[0]=m[0],_[1]=m[1],_[2]=m[2],_[3]=m[3],_},j.copy=function(m,_){return m[0]=_[0],m[1]=_[1],m[2]=_[2],m[3]=_[3],m},j.identity=function(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=1,m},j.fromValues=function(m,_,b,O){var D=new s.ARRAY_TYPE(4);return D[0]=m,D[1]=_,D[2]=b,D[3]=O,D},j.set=function(m,_,b,O,D){return m[0]=_,m[1]=b,m[2]=O,m[3]=D,m},j.transpose=function(m,_){if(m===_){var b=_[1];m[1]=_[2],m[2]=b}else m[0]=_[0],m[1]=_[2],m[2]=_[1],m[3]=_[3];return m},j.invert=function(m,_){var b=_[0],O=_[1],D=_[2],C=_[3],V=b*C-D*O;return V?(m[0]=C*(V=1/V),m[1]=-O*V,m[2]=-D*V,m[3]=b*V,m):null},j.adjoint=function(m,_){var b=_[0];return m[0]=_[3],m[1]=-_[1],m[2]=-_[2],m[3]=b,m},j.determinant=function(m){return m[0]*m[3]-m[2]*m[1]},j.multiply=f,j.rotate=function(m,_,b){var O=_[0],D=_[1],C=_[2],V=_[3],I=Math.sin(b),z=Math.cos(b);return m[0]=O*z+C*I,m[1]=D*z+V*I,m[2]=O*-I+C*z,m[3]=D*-I+V*z,m},j.scale=function(m,_,b){var O=_[1],D=_[2],C=_[3],V=b[0],I=b[1];return m[0]=_[0]*V,m[1]=O*V,m[2]=D*I,m[3]=C*I,m},j.fromRotation=function(m,_){var b=Math.sin(_),O=Math.cos(_);return m[0]=O,m[1]=b,m[2]=-b,m[3]=O,m},j.fromScaling=function(m,_){return m[0]=_[0],m[1]=0,m[2]=0,m[3]=_[1],m},j.str=function(m){return"mat2("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+")"},j.frob=function(m){return Math.hypot(m[0],m[1],m[2],m[3])},j.LDU=function(m,_,b,O){return m[2]=O[2]/O[0],b[0]=O[0],b[1]=O[1],b[3]=O[3]-m[2]*b[1],[m,_,b]},j.add=function(m,_,b){return m[0]=_[0]+b[0],m[1]=_[1]+b[1],m[2]=_[2]+b[2],m[3]=_[3]+b[3],m},j.subtract=g,j.exactEquals=function(m,_){return m[0]===_[0]&&m[1]===_[1]&&m[2]===_[2]&&m[3]===_[3]},j.equals=function(m,_){var b=m[0],O=m[1],D=m[2],C=m[3],V=_[0],I=_[1],z=_[2],M=_[3];return Math.abs(b-V)<=s.EPSILON*Math.max(1,Math.abs(b),Math.abs(V))&&Math.abs(O-I)<=s.EPSILON*Math.max(1,Math.abs(O),Math.abs(I))&&Math.abs(D-z)<=s.EPSILON*Math.max(1,Math.abs(D),Math.abs(z))&&Math.abs(C-M)<=s.EPSILON*Math.max(1,Math.abs(C),Math.abs(M))},j.multiplyScalar=function(m,_,b){return m[0]=_[0]*b,m[1]=_[1]*b,m[2]=_[2]*b,m[3]=_[3]*b,m},j.multiplyScalarAndAdd=function(m,_,b,O){return m[0]=_[0]+b[0]*O,m[1]=_[1]+b[1]*O,m[2]=_[2]+b[2]*O,m[3]=_[3]+b[3]*O,m},j.sub=j.mul=void 0;var s=function(m,_){if(m&&m.__esModule)return m;if(m===null||h(m)!=="object"&&typeof m!="function")return{default:m};var b=u(void 0);if(b&&b.has(m))return b.get(m);var O={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var C in m)if(C!=="default"&&Object.prototype.hasOwnProperty.call(m,C)){var V=D?Object.getOwnPropertyDescriptor(m,C):null;V&&(V.get||V.set)?Object.defineProperty(O,C,V):O[C]=m[C]}return O.default=m,b&&b.set(m,O),O}(L());function u(m){if(typeof WeakMap!="function")return null;var _=new WeakMap,b=new WeakMap;return(u=function(O){return O?b:_})(m)}function f(m,_,b){var O=_[0],D=_[1],C=_[2],V=_[3],I=b[0],z=b[1],M=b[2],B=b[3];return m[0]=O*I+C*z,m[1]=D*I+V*z,m[2]=O*M+C*B,m[3]=D*M+V*B,m}function g(m,_,b){return m[0]=_[0]-b[0],m[1]=_[1]-b[1],m[2]=_[2]-b[2],m[3]=_[3]-b[3],m}return j.mul=f,j.sub=g,j}var H,W={};function ee(){if(H)return W;function h(m){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},h(m)}H=1,Object.defineProperty(W,"__esModule",{value:!0}),W.create=function(){var m=new s.ARRAY_TYPE(6);return s.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0,m[4]=0,m[5]=0),m[0]=1,m[3]=1,m},W.clone=function(m){var _=new s.ARRAY_TYPE(6);return _[0]=m[0],_[1]=m[1],_[2]=m[2],_[3]=m[3],_[4]=m[4],_[5]=m[5],_},W.copy=function(m,_){return m[0]=_[0],m[1]=_[1],m[2]=_[2],m[3]=_[3],m[4]=_[4],m[5]=_[5],m},W.identity=function(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=1,m[4]=0,m[5]=0,m},W.fromValues=function(m,_,b,O,D,C){var V=new s.ARRAY_TYPE(6);return V[0]=m,V[1]=_,V[2]=b,V[3]=O,V[4]=D,V[5]=C,V},W.set=function(m,_,b,O,D,C,V){return m[0]=_,m[1]=b,m[2]=O,m[3]=D,m[4]=C,m[5]=V,m},W.invert=function(m,_){var b=_[0],O=_[1],D=_[2],C=_[3],V=_[4],I=_[5],z=b*C-O*D;return z?(m[0]=C*(z=1/z),m[1]=-O*z,m[2]=-D*z,m[3]=b*z,m[4]=(D*I-C*V)*z,m[5]=(O*V-b*I)*z,m):null},W.determinant=function(m){return m[0]*m[3]-m[1]*m[2]},W.multiply=f,W.rotate=function(m,_,b){var O=_[0],D=_[1],C=_[2],V=_[3],I=_[4],z=_[5],M=Math.sin(b),B=Math.cos(b);return m[0]=O*B+C*M,m[1]=D*B+V*M,m[2]=O*-M+C*B,m[3]=D*-M+V*B,m[4]=I,m[5]=z,m},W.scale=function(m,_,b){var O=_[1],D=_[2],C=_[3],V=_[4],I=_[5],z=b[0],M=b[1];return m[0]=_[0]*z,m[1]=O*z,m[2]=D*M,m[3]=C*M,m[4]=V,m[5]=I,m},W.translate=function(m,_,b){var O=_[0],D=_[1],C=_[2],V=_[3],I=_[4],z=_[5],M=b[0],B=b[1];return m[0]=O,m[1]=D,m[2]=C,m[3]=V,m[4]=O*M+C*B+I,m[5]=D*M+V*B+z,m},W.fromRotation=function(m,_){var b=Math.sin(_),O=Math.cos(_);return m[0]=O,m[1]=b,m[2]=-b,m[3]=O,m[4]=0,m[5]=0,m},W.fromScaling=function(m,_){return m[0]=_[0],m[1]=0,m[2]=0,m[3]=_[1],m[4]=0,m[5]=0,m},W.fromTranslation=function(m,_){return m[0]=1,m[1]=0,m[2]=0,m[3]=1,m[4]=_[0],m[5]=_[1],m},W.str=function(m){return"mat2d("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+", "+m[4]+", "+m[5]+")"},W.frob=function(m){return Math.hypot(m[0],m[1],m[2],m[3],m[4],m[5],1)},W.add=function(m,_,b){return m[0]=_[0]+b[0],m[1]=_[1]+b[1],m[2]=_[2]+b[2],m[3]=_[3]+b[3],m[4]=_[4]+b[4],m[5]=_[5]+b[5],m},W.subtract=g,W.multiplyScalar=function(m,_,b){return m[0]=_[0]*b,m[1]=_[1]*b,m[2]=_[2]*b,m[3]=_[3]*b,m[4]=_[4]*b,m[5]=_[5]*b,m},W.multiplyScalarAndAdd=function(m,_,b,O){return m[0]=_[0]+b[0]*O,m[1]=_[1]+b[1]*O,m[2]=_[2]+b[2]*O,m[3]=_[3]+b[3]*O,m[4]=_[4]+b[4]*O,m[5]=_[5]+b[5]*O,m},W.exactEquals=function(m,_){return m[0]===_[0]&&m[1]===_[1]&&m[2]===_[2]&&m[3]===_[3]&&m[4]===_[4]&&m[5]===_[5]},W.equals=function(m,_){var b=m[0],O=m[1],D=m[2],C=m[3],V=m[4],I=m[5],z=_[0],M=_[1],B=_[2],J=_[3],te=_[4],he=_[5];return Math.abs(b-z)<=s.EPSILON*Math.max(1,Math.abs(b),Math.abs(z))&&Math.abs(O-M)<=s.EPSILON*Math.max(1,Math.abs(O),Math.abs(M))&&Math.abs(D-B)<=s.EPSILON*Math.max(1,Math.abs(D),Math.abs(B))&&Math.abs(C-J)<=s.EPSILON*Math.max(1,Math.abs(C),Math.abs(J))&&Math.abs(V-te)<=s.EPSILON*Math.max(1,Math.abs(V),Math.abs(te))&&Math.abs(I-he)<=s.EPSILON*Math.max(1,Math.abs(I),Math.abs(he))},W.sub=W.mul=void 0;var s=function(m,_){if(m&&m.__esModule)return m;if(m===null||h(m)!=="object"&&typeof m!="function")return{default:m};var b=u(void 0);if(b&&b.has(m))return b.get(m);var O={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var C in m)if(C!=="default"&&Object.prototype.hasOwnProperty.call(m,C)){var V=D?Object.getOwnPropertyDescriptor(m,C):null;V&&(V.get||V.set)?Object.defineProperty(O,C,V):O[C]=m[C]}return O.default=m,b&&b.set(m,O),O}(L());function u(m){if(typeof WeakMap!="function")return null;var _=new WeakMap,b=new WeakMap;return(u=function(O){return O?b:_})(m)}function f(m,_,b){var O=_[0],D=_[1],C=_[2],V=_[3],I=_[4],z=_[5],M=b[0],B=b[1],J=b[2],te=b[3],he=b[4],de=b[5];return m[0]=O*M+C*B,m[1]=D*M+V*B,m[2]=O*J+C*te,m[3]=D*J+V*te,m[4]=O*he+C*de+I,m[5]=D*he+V*de+z,m}function g(m,_,b){return m[0]=_[0]-b[0],m[1]=_[1]-b[1],m[2]=_[2]-b[2],m[3]=_[3]-b[3],m[4]=_[4]-b[4],m[5]=_[5]-b[5],m}return W.mul=f,W.sub=g,W}var se,fe={};function le(){if(se)return fe;function h(m){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},h(m)}se=1,Object.defineProperty(fe,"__esModule",{value:!0}),fe.create=function(){var m=new s.ARRAY_TYPE(9);return s.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0,m[3]=0,m[5]=0,m[6]=0,m[7]=0),m[0]=1,m[4]=1,m[8]=1,m},fe.fromMat4=function(m,_){return m[0]=_[0],m[1]=_[1],m[2]=_[2],m[3]=_[4],m[4]=_[5],m[5]=_[6],m[6]=_[8],m[7]=_[9],m[8]=_[10],m},fe.clone=function(m){var _=new s.ARRAY_TYPE(9);return _[0]=m[0],_[1]=m[1],_[2]=m[2],_[3]=m[3],_[4]=m[4],_[5]=m[5],_[6]=m[6],_[7]=m[7],_[8]=m[8],_},fe.copy=function(m,_){return m[0]=_[0],m[1]=_[1],m[2]=_[2],m[3]=_[3],m[4]=_[4],m[5]=_[5],m[6]=_[6],m[7]=_[7],m[8]=_[8],m},fe.fromValues=function(m,_,b,O,D,C,V,I,z){var M=new s.ARRAY_TYPE(9);return M[0]=m,M[1]=_,M[2]=b,M[3]=O,M[4]=D,M[5]=C,M[6]=V,M[7]=I,M[8]=z,M},fe.set=function(m,_,b,O,D,C,V,I,z,M){return m[0]=_,m[1]=b,m[2]=O,m[3]=D,m[4]=C,m[5]=V,m[6]=I,m[7]=z,m[8]=M,m},fe.identity=function(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=1,m[5]=0,m[6]=0,m[7]=0,m[8]=1,m},fe.transpose=function(m,_){if(m===_){var b=_[1],O=_[2],D=_[5];m[1]=_[3],m[2]=_[6],m[3]=b,m[5]=_[7],m[6]=O,m[7]=D}else m[0]=_[0],m[1]=_[3],m[2]=_[6],m[3]=_[1],m[4]=_[4],m[5]=_[7],m[6]=_[2],m[7]=_[5],m[8]=_[8];return m},fe.invert=function(m,_){var b=_[0],O=_[1],D=_[2],C=_[3],V=_[4],I=_[5],z=_[6],M=_[7],B=_[8],J=B*V-I*M,te=-B*C+I*z,he=M*C-V*z,de=b*J+O*te+D*he;return de?(m[0]=J*(de=1/de),m[1]=(-B*O+D*M)*de,m[2]=(I*O-D*V)*de,m[3]=te*de,m[4]=(B*b-D*z)*de,m[5]=(-I*b+D*C)*de,m[6]=he*de,m[7]=(-M*b+O*z)*de,m[8]=(V*b-O*C)*de,m):null},fe.adjoint=function(m,_){var b=_[0],O=_[1],D=_[2],C=_[3],V=_[4],I=_[5],z=_[6],M=_[7],B=_[8];return m[0]=V*B-I*M,m[1]=D*M-O*B,m[2]=O*I-D*V,m[3]=I*z-C*B,m[4]=b*B-D*z,m[5]=D*C-b*I,m[6]=C*M-V*z,m[7]=O*z-b*M,m[8]=b*V-O*C,m},fe.determinant=function(m){var _=m[3],b=m[4],O=m[5],D=m[6],C=m[7],V=m[8];return m[0]*(V*b-O*C)+m[1]*(-V*_+O*D)+m[2]*(C*_-b*D)},fe.multiply=f,fe.translate=function(m,_,b){var O=_[0],D=_[1],C=_[2],V=_[3],I=_[4],z=_[5],M=_[6],B=_[7],J=_[8],te=b[0],he=b[1];return m[0]=O,m[1]=D,m[2]=C,m[3]=V,m[4]=I,m[5]=z,m[6]=te*O+he*V+M,m[7]=te*D+he*I+B,m[8]=te*C+he*z+J,m},fe.rotate=function(m,_,b){var O=_[0],D=_[1],C=_[2],V=_[3],I=_[4],z=_[5],M=_[6],B=_[7],J=_[8],te=Math.sin(b),he=Math.cos(b);return m[0]=he*O+te*V,m[1]=he*D+te*I,m[2]=he*C+te*z,m[3]=he*V-te*O,m[4]=he*I-te*D,m[5]=he*z-te*C,m[6]=M,m[7]=B,m[8]=J,m},fe.scale=function(m,_,b){var O=b[0],D=b[1];return m[0]=O*_[0],m[1]=O*_[1],m[2]=O*_[2],m[3]=D*_[3],m[4]=D*_[4],m[5]=D*_[5],m[6]=_[6],m[7]=_[7],m[8]=_[8],m},fe.fromTranslation=function(m,_){return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=1,m[5]=0,m[6]=_[0],m[7]=_[1],m[8]=1,m},fe.fromRotation=function(m,_){var b=Math.sin(_),O=Math.cos(_);return m[0]=O,m[1]=b,m[2]=0,m[3]=-b,m[4]=O,m[5]=0,m[6]=0,m[7]=0,m[8]=1,m},fe.fromScaling=function(m,_){return m[0]=_[0],m[1]=0,m[2]=0,m[3]=0,m[4]=_[1],m[5]=0,m[6]=0,m[7]=0,m[8]=1,m},fe.fromMat2d=function(m,_){return m[0]=_[0],m[1]=_[1],m[2]=0,m[3]=_[2],m[4]=_[3],m[5]=0,m[6]=_[4],m[7]=_[5],m[8]=1,m},fe.fromQuat=function(m,_){var b=_[0],O=_[1],D=_[2],C=_[3],V=b+b,I=O+O,z=D+D,M=b*V,B=O*V,J=O*I,te=D*V,he=D*I,de=D*z,ne=C*V,Ae=C*I,xe=C*z;return m[0]=1-J-de,m[3]=B-xe,m[6]=te+Ae,m[1]=B+xe,m[4]=1-M-de,m[7]=he-ne,m[2]=te-Ae,m[5]=he+ne,m[8]=1-M-J,m},fe.normalFromMat4=function(m,_){var b=_[0],O=_[1],D=_[2],C=_[3],V=_[4],I=_[5],z=_[6],M=_[7],B=_[8],J=_[9],te=_[10],he=_[11],de=_[12],ne=_[13],Ae=_[14],xe=_[15],Oe=b*I-O*V,Qe=b*z-D*V,Ye=b*M-C*V,Xe=O*z-D*I,gt=O*M-C*I,et=D*M-C*z,_t=B*ne-J*de,xt=B*Ae-te*de,Ct=B*xe-he*de,Dt=J*Ae-te*ne,Nt=J*xe-he*ne,jt=te*xe-he*Ae,Lt=Oe*jt-Qe*Nt+Ye*Dt+Xe*Ct-gt*xt+et*_t;return Lt?(m[0]=(I*jt-z*Nt+M*Dt)*(Lt=1/Lt),m[1]=(z*Ct-V*jt-M*xt)*Lt,m[2]=(V*Nt-I*Ct+M*_t)*Lt,m[3]=(D*Nt-O*jt-C*Dt)*Lt,m[4]=(b*jt-D*Ct+C*xt)*Lt,m[5]=(O*Ct-b*Nt-C*_t)*Lt,m[6]=(ne*et-Ae*gt+xe*Xe)*Lt,m[7]=(Ae*Ye-de*et-xe*Qe)*Lt,m[8]=(de*gt-ne*Ye+xe*Oe)*Lt,m):null},fe.projection=function(m,_,b){return m[0]=2/_,m[1]=0,m[2]=0,m[3]=0,m[4]=-2/b,m[5]=0,m[6]=-1,m[7]=1,m[8]=1,m},fe.str=function(m){return"mat3("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+", "+m[4]+", "+m[5]+", "+m[6]+", "+m[7]+", "+m[8]+")"},fe.frob=function(m){return Math.hypot(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8])},fe.add=function(m,_,b){return m[0]=_[0]+b[0],m[1]=_[1]+b[1],m[2]=_[2]+b[2],m[3]=_[3]+b[3],m[4]=_[4]+b[4],m[5]=_[5]+b[5],m[6]=_[6]+b[6],m[7]=_[7]+b[7],m[8]=_[8]+b[8],m},fe.subtract=g,fe.multiplyScalar=function(m,_,b){return m[0]=_[0]*b,m[1]=_[1]*b,m[2]=_[2]*b,m[3]=_[3]*b,m[4]=_[4]*b,m[5]=_[5]*b,m[6]=_[6]*b,m[7]=_[7]*b,m[8]=_[8]*b,m},fe.multiplyScalarAndAdd=function(m,_,b,O){return m[0]=_[0]+b[0]*O,m[1]=_[1]+b[1]*O,m[2]=_[2]+b[2]*O,m[3]=_[3]+b[3]*O,m[4]=_[4]+b[4]*O,m[5]=_[5]+b[5]*O,m[6]=_[6]+b[6]*O,m[7]=_[7]+b[7]*O,m[8]=_[8]+b[8]*O,m},fe.exactEquals=function(m,_){return m[0]===_[0]&&m[1]===_[1]&&m[2]===_[2]&&m[3]===_[3]&&m[4]===_[4]&&m[5]===_[5]&&m[6]===_[6]&&m[7]===_[7]&&m[8]===_[8]},fe.equals=function(m,_){var b=m[0],O=m[1],D=m[2],C=m[3],V=m[4],I=m[5],z=m[6],M=m[7],B=m[8],J=_[0],te=_[1],he=_[2],de=_[3],ne=_[4],Ae=_[5],xe=_[6],Oe=_[7],Qe=_[8];return Math.abs(b-J)<=s.EPSILON*Math.max(1,Math.abs(b),Math.abs(J))&&Math.abs(O-te)<=s.EPSILON*Math.max(1,Math.abs(O),Math.abs(te))&&Math.abs(D-he)<=s.EPSILON*Math.max(1,Math.abs(D),Math.abs(he))&&Math.abs(C-de)<=s.EPSILON*Math.max(1,Math.abs(C),Math.abs(de))&&Math.abs(V-ne)<=s.EPSILON*Math.max(1,Math.abs(V),Math.abs(ne))&&Math.abs(I-Ae)<=s.EPSILON*Math.max(1,Math.abs(I),Math.abs(Ae))&&Math.abs(z-xe)<=s.EPSILON*Math.max(1,Math.abs(z),Math.abs(xe))&&Math.abs(M-Oe)<=s.EPSILON*Math.max(1,Math.abs(M),Math.abs(Oe))&&Math.abs(B-Qe)<=s.EPSILON*Math.max(1,Math.abs(B),Math.abs(Qe))},fe.sub=fe.mul=void 0;var s=function(m,_){if(m&&m.__esModule)return m;if(m===null||h(m)!=="object"&&typeof m!="function")return{default:m};var b=u(void 0);if(b&&b.has(m))return b.get(m);var O={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var C in m)if(C!=="default"&&Object.prototype.hasOwnProperty.call(m,C)){var V=D?Object.getOwnPropertyDescriptor(m,C):null;V&&(V.get||V.set)?Object.defineProperty(O,C,V):O[C]=m[C]}return O.default=m,b&&b.set(m,O),O}(L());function u(m){if(typeof WeakMap!="function")return null;var _=new WeakMap,b=new WeakMap;return(u=function(O){return O?b:_})(m)}function f(m,_,b){var O=_[0],D=_[1],C=_[2],V=_[3],I=_[4],z=_[5],M=_[6],B=_[7],J=_[8],te=b[0],he=b[1],de=b[2],ne=b[3],Ae=b[4],xe=b[5],Oe=b[6],Qe=b[7],Ye=b[8];return m[0]=te*O+he*V+de*M,m[1]=te*D+he*I+de*B,m[2]=te*C+he*z+de*J,m[3]=ne*O+Ae*V+xe*M,m[4]=ne*D+Ae*I+xe*B,m[5]=ne*C+Ae*z+xe*J,m[6]=Oe*O+Qe*V+Ye*M,m[7]=Oe*D+Qe*I+Ye*B,m[8]=Oe*C+Qe*z+Ye*J,m}function g(m,_,b){return m[0]=_[0]-b[0],m[1]=_[1]-b[1],m[2]=_[2]-b[2],m[3]=_[3]-b[3],m[4]=_[4]-b[4],m[5]=_[5]-b[5],m[6]=_[6]-b[6],m[7]=_[7]-b[7],m[8]=_[8]-b[8],m}return fe.mul=f,fe.sub=g,fe}var me,ge={};function Re(){if(me)return ge;function h(C){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},h(C)}me=1,Object.defineProperty(ge,"__esModule",{value:!0}),ge.create=function(){var C=new s.ARRAY_TYPE(16);return s.ARRAY_TYPE!=Float32Array&&(C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[11]=0,C[12]=0,C[13]=0,C[14]=0),C[0]=1,C[5]=1,C[10]=1,C[15]=1,C},ge.clone=function(C){var V=new s.ARRAY_TYPE(16);return V[0]=C[0],V[1]=C[1],V[2]=C[2],V[3]=C[3],V[4]=C[4],V[5]=C[5],V[6]=C[6],V[7]=C[7],V[8]=C[8],V[9]=C[9],V[10]=C[10],V[11]=C[11],V[12]=C[12],V[13]=C[13],V[14]=C[14],V[15]=C[15],V},ge.copy=function(C,V){return C[0]=V[0],C[1]=V[1],C[2]=V[2],C[3]=V[3],C[4]=V[4],C[5]=V[5],C[6]=V[6],C[7]=V[7],C[8]=V[8],C[9]=V[9],C[10]=V[10],C[11]=V[11],C[12]=V[12],C[13]=V[13],C[14]=V[14],C[15]=V[15],C},ge.fromValues=function(C,V,I,z,M,B,J,te,he,de,ne,Ae,xe,Oe,Qe,Ye){var Xe=new s.ARRAY_TYPE(16);return Xe[0]=C,Xe[1]=V,Xe[2]=I,Xe[3]=z,Xe[4]=M,Xe[5]=B,Xe[6]=J,Xe[7]=te,Xe[8]=he,Xe[9]=de,Xe[10]=ne,Xe[11]=Ae,Xe[12]=xe,Xe[13]=Oe,Xe[14]=Qe,Xe[15]=Ye,Xe},ge.set=function(C,V,I,z,M,B,J,te,he,de,ne,Ae,xe,Oe,Qe,Ye,Xe){return C[0]=V,C[1]=I,C[2]=z,C[3]=M,C[4]=B,C[5]=J,C[6]=te,C[7]=he,C[8]=de,C[9]=ne,C[10]=Ae,C[11]=xe,C[12]=Oe,C[13]=Qe,C[14]=Ye,C[15]=Xe,C},ge.identity=f,ge.transpose=function(C,V){if(C===V){var I=V[1],z=V[2],M=V[3],B=V[6],J=V[7],te=V[11];C[1]=V[4],C[2]=V[8],C[3]=V[12],C[4]=I,C[6]=V[9],C[7]=V[13],C[8]=z,C[9]=B,C[11]=V[14],C[12]=M,C[13]=J,C[14]=te}else C[0]=V[0],C[1]=V[4],C[2]=V[8],C[3]=V[12],C[4]=V[1],C[5]=V[5],C[6]=V[9],C[7]=V[13],C[8]=V[2],C[9]=V[6],C[10]=V[10],C[11]=V[14],C[12]=V[3],C[13]=V[7],C[14]=V[11],C[15]=V[15];return C},ge.invert=function(C,V){var I=V[0],z=V[1],M=V[2],B=V[3],J=V[4],te=V[5],he=V[6],de=V[7],ne=V[8],Ae=V[9],xe=V[10],Oe=V[11],Qe=V[12],Ye=V[13],Xe=V[14],gt=V[15],et=I*te-z*J,_t=I*he-M*J,xt=I*de-B*J,Ct=z*he-M*te,Dt=z*de-B*te,Nt=M*de-B*he,jt=ne*Ye-Ae*Qe,Lt=ne*Xe-xe*Qe,Ht=ne*gt-Oe*Qe,Aa=Ae*Xe-xe*Ye,ma=Ae*gt-Oe*Ye,er=xe*gt-Oe*Xe,Oa=et*er-_t*ma+xt*Aa+Ct*Ht-Dt*Lt+Nt*jt;return Oa?(C[0]=(te*er-he*ma+de*Aa)*(Oa=1/Oa),C[1]=(M*ma-z*er-B*Aa)*Oa,C[2]=(Ye*Nt-Xe*Dt+gt*Ct)*Oa,C[3]=(xe*Dt-Ae*Nt-Oe*Ct)*Oa,C[4]=(he*Ht-J*er-de*Lt)*Oa,C[5]=(I*er-M*Ht+B*Lt)*Oa,C[6]=(Xe*xt-Qe*Nt-gt*_t)*Oa,C[7]=(ne*Nt-xe*xt+Oe*_t)*Oa,C[8]=(J*ma-te*Ht+de*jt)*Oa,C[9]=(z*Ht-I*ma-B*jt)*Oa,C[10]=(Qe*Dt-Ye*xt+gt*et)*Oa,C[11]=(Ae*xt-ne*Dt-Oe*et)*Oa,C[12]=(te*Lt-J*Aa-he*jt)*Oa,C[13]=(I*Aa-z*Lt+M*jt)*Oa,C[14]=(Ye*_t-Qe*Ct-Xe*et)*Oa,C[15]=(ne*Ct-Ae*_t+xe*et)*Oa,C):null},ge.adjoint=function(C,V){var I=V[0],z=V[1],M=V[2],B=V[3],J=V[4],te=V[5],he=V[6],de=V[7],ne=V[8],Ae=V[9],xe=V[10],Oe=V[11],Qe=V[12],Ye=V[13],Xe=V[14],gt=V[15];return C[0]=te*(xe*gt-Oe*Xe)-Ae*(he*gt-de*Xe)+Ye*(he*Oe-de*xe),C[1]=-(z*(xe*gt-Oe*Xe)-Ae*(M*gt-B*Xe)+Ye*(M*Oe-B*xe)),C[2]=z*(he*gt-de*Xe)-te*(M*gt-B*Xe)+Ye*(M*de-B*he),C[3]=-(z*(he*Oe-de*xe)-te*(M*Oe-B*xe)+Ae*(M*de-B*he)),C[4]=-(J*(xe*gt-Oe*Xe)-ne*(he*gt-de*Xe)+Qe*(he*Oe-de*xe)),C[5]=I*(xe*gt-Oe*Xe)-ne*(M*gt-B*Xe)+Qe*(M*Oe-B*xe),C[6]=-(I*(he*gt-de*Xe)-J*(M*gt-B*Xe)+Qe*(M*de-B*he)),C[7]=I*(he*Oe-de*xe)-J*(M*Oe-B*xe)+ne*(M*de-B*he),C[8]=J*(Ae*gt-Oe*Ye)-ne*(te*gt-de*Ye)+Qe*(te*Oe-de*Ae),C[9]=-(I*(Ae*gt-Oe*Ye)-ne*(z*gt-B*Ye)+Qe*(z*Oe-B*Ae)),C[10]=I*(te*gt-de*Ye)-J*(z*gt-B*Ye)+Qe*(z*de-B*te),C[11]=-(I*(te*Oe-de*Ae)-J*(z*Oe-B*Ae)+ne*(z*de-B*te)),C[12]=-(J*(Ae*Xe-xe*Ye)-ne*(te*Xe-he*Ye)+Qe*(te*xe-he*Ae)),C[13]=I*(Ae*Xe-xe*Ye)-ne*(z*Xe-M*Ye)+Qe*(z*xe-M*Ae),C[14]=-(I*(te*Xe-he*Ye)-J*(z*Xe-M*Ye)+Qe*(z*he-M*te)),C[15]=I*(te*xe-he*Ae)-J*(z*xe-M*Ae)+ne*(z*he-M*te),C},ge.determinant=function(C){var V=C[0],I=C[1],z=C[2],M=C[3],B=C[4],J=C[5],te=C[6],he=C[7],de=C[8],ne=C[9],Ae=C[10],xe=C[11],Oe=C[12],Qe=C[13],Ye=C[14],Xe=C[15];return(V*J-I*B)*(Ae*Xe-xe*Ye)-(V*te-z*B)*(ne*Xe-xe*Qe)+(V*he-M*B)*(ne*Ye-Ae*Qe)+(I*te-z*J)*(de*Xe-xe*Oe)-(I*he-M*J)*(de*Ye-Ae*Oe)+(z*he-M*te)*(de*Qe-ne*Oe)},ge.multiply=g,ge.translate=function(C,V,I){var z,M,B,J,te,he,de,ne,Ae,xe,Oe,Qe,Ye=I[0],Xe=I[1],gt=I[2];return V===C?(C[12]=V[0]*Ye+V[4]*Xe+V[8]*gt+V[12],C[13]=V[1]*Ye+V[5]*Xe+V[9]*gt+V[13],C[14]=V[2]*Ye+V[6]*Xe+V[10]*gt+V[14],C[15]=V[3]*Ye+V[7]*Xe+V[11]*gt+V[15]):(M=V[1],B=V[2],J=V[3],te=V[4],he=V[5],de=V[6],ne=V[7],Ae=V[8],xe=V[9],Oe=V[10],Qe=V[11],C[0]=z=V[0],C[1]=M,C[2]=B,C[3]=J,C[4]=te,C[5]=he,C[6]=de,C[7]=ne,C[8]=Ae,C[9]=xe,C[10]=Oe,C[11]=Qe,C[12]=z*Ye+te*Xe+Ae*gt+V[12],C[13]=M*Ye+he*Xe+xe*gt+V[13],C[14]=B*Ye+de*Xe+Oe*gt+V[14],C[15]=J*Ye+ne*Xe+Qe*gt+V[15]),C},ge.scale=function(C,V,I){var z=I[0],M=I[1],B=I[2];return C[0]=V[0]*z,C[1]=V[1]*z,C[2]=V[2]*z,C[3]=V[3]*z,C[4]=V[4]*M,C[5]=V[5]*M,C[6]=V[6]*M,C[7]=V[7]*M,C[8]=V[8]*B,C[9]=V[9]*B,C[10]=V[10]*B,C[11]=V[11]*B,C[12]=V[12],C[13]=V[13],C[14]=V[14],C[15]=V[15],C},ge.rotate=function(C,V,I,z){var M,B,J,te,he,de,ne,Ae,xe,Oe,Qe,Ye,Xe,gt,et,_t,xt,Ct,Dt,Nt,jt,Lt,Ht,Aa,ma=z[0],er=z[1],Oa=z[2],Da=Math.hypot(ma,er,Oa);return Da<s.EPSILON?null:(ma*=Da=1/Da,er*=Da,Oa*=Da,M=Math.sin(I),B=Math.cos(I),he=V[1],de=V[2],ne=V[3],xe=V[5],Oe=V[6],Qe=V[7],Xe=V[9],gt=V[10],et=V[11],_t=ma*ma*(J=1-B)+B,Dt=ma*er*J-Oa*M,Nt=er*er*J+B,jt=Oa*er*J+ma*M,Lt=ma*Oa*J+er*M,Ht=er*Oa*J-ma*M,Aa=Oa*Oa*J+B,C[0]=(te=V[0])*_t+(Ae=V[4])*(xt=er*ma*J+Oa*M)+(Ye=V[8])*(Ct=Oa*ma*J-er*M),C[1]=he*_t+xe*xt+Xe*Ct,C[2]=de*_t+Oe*xt+gt*Ct,C[3]=ne*_t+Qe*xt+et*Ct,C[4]=te*Dt+Ae*Nt+Ye*jt,C[5]=he*Dt+xe*Nt+Xe*jt,C[6]=de*Dt+Oe*Nt+gt*jt,C[7]=ne*Dt+Qe*Nt+et*jt,C[8]=te*Lt+Ae*Ht+Ye*Aa,C[9]=he*Lt+xe*Ht+Xe*Aa,C[10]=de*Lt+Oe*Ht+gt*Aa,C[11]=ne*Lt+Qe*Ht+et*Aa,V!==C&&(C[12]=V[12],C[13]=V[13],C[14]=V[14],C[15]=V[15]),C)},ge.rotateX=function(C,V,I){var z=Math.sin(I),M=Math.cos(I),B=V[4],J=V[5],te=V[6],he=V[7],de=V[8],ne=V[9],Ae=V[10],xe=V[11];return V!==C&&(C[0]=V[0],C[1]=V[1],C[2]=V[2],C[3]=V[3],C[12]=V[12],C[13]=V[13],C[14]=V[14],C[15]=V[15]),C[4]=B*M+de*z,C[5]=J*M+ne*z,C[6]=te*M+Ae*z,C[7]=he*M+xe*z,C[8]=de*M-B*z,C[9]=ne*M-J*z,C[10]=Ae*M-te*z,C[11]=xe*M-he*z,C},ge.rotateY=function(C,V,I){var z=Math.sin(I),M=Math.cos(I),B=V[0],J=V[1],te=V[2],he=V[3],de=V[8],ne=V[9],Ae=V[10],xe=V[11];return V!==C&&(C[4]=V[4],C[5]=V[5],C[6]=V[6],C[7]=V[7],C[12]=V[12],C[13]=V[13],C[14]=V[14],C[15]=V[15]),C[0]=B*M-de*z,C[1]=J*M-ne*z,C[2]=te*M-Ae*z,C[3]=he*M-xe*z,C[8]=B*z+de*M,C[9]=J*z+ne*M,C[10]=te*z+Ae*M,C[11]=he*z+xe*M,C},ge.rotateZ=function(C,V,I){var z=Math.sin(I),M=Math.cos(I),B=V[0],J=V[1],te=V[2],he=V[3],de=V[4],ne=V[5],Ae=V[6],xe=V[7];return V!==C&&(C[8]=V[8],C[9]=V[9],C[10]=V[10],C[11]=V[11],C[12]=V[12],C[13]=V[13],C[14]=V[14],C[15]=V[15]),C[0]=B*M+de*z,C[1]=J*M+ne*z,C[2]=te*M+Ae*z,C[3]=he*M+xe*z,C[4]=de*M-B*z,C[5]=ne*M-J*z,C[6]=Ae*M-te*z,C[7]=xe*M-he*z,C},ge.fromTranslation=function(C,V){return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=V[0],C[13]=V[1],C[14]=V[2],C[15]=1,C},ge.fromScaling=function(C,V){return C[0]=V[0],C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=V[1],C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=V[2],C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C},ge.fromRotation=function(C,V,I){var z,M,B,J=I[0],te=I[1],he=I[2],de=Math.hypot(J,te,he);return de<s.EPSILON?null:(J*=de=1/de,te*=de,he*=de,z=Math.sin(V),M=Math.cos(V),C[0]=J*J*(B=1-M)+M,C[1]=te*J*B+he*z,C[2]=he*J*B-te*z,C[3]=0,C[4]=J*te*B-he*z,C[5]=te*te*B+M,C[6]=he*te*B+J*z,C[7]=0,C[8]=J*he*B+te*z,C[9]=te*he*B-J*z,C[10]=he*he*B+M,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C)},ge.fromXRotation=function(C,V){var I=Math.sin(V),z=Math.cos(V);return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=z,C[6]=I,C[7]=0,C[8]=0,C[9]=-I,C[10]=z,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C},ge.fromYRotation=function(C,V){var I=Math.sin(V),z=Math.cos(V);return C[0]=z,C[1]=0,C[2]=-I,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=I,C[9]=0,C[10]=z,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C},ge.fromZRotation=function(C,V){var I=Math.sin(V),z=Math.cos(V);return C[0]=z,C[1]=I,C[2]=0,C[3]=0,C[4]=-I,C[5]=z,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C},ge.fromRotationTranslation=m,ge.fromQuat2=function(C,V){var I=new s.ARRAY_TYPE(3),z=-V[0],M=-V[1],B=-V[2],J=V[3],te=V[4],he=V[5],de=V[6],ne=V[7],Ae=z*z+M*M+B*B+J*J;return Ae>0?(I[0]=2*(te*J+ne*z+he*B-de*M)/Ae,I[1]=2*(he*J+ne*M+de*z-te*B)/Ae,I[2]=2*(de*J+ne*B+te*M-he*z)/Ae):(I[0]=2*(te*J+ne*z+he*B-de*M),I[1]=2*(he*J+ne*M+de*z-te*B),I[2]=2*(de*J+ne*B+te*M-he*z)),m(C,V,I),C},ge.getTranslation=function(C,V){return C[0]=V[12],C[1]=V[13],C[2]=V[14],C},ge.getScaling=_,ge.getRotation=function(C,V){var I=new s.ARRAY_TYPE(3);_(I,V);var z=1/I[0],M=1/I[1],B=1/I[2],J=V[0]*z,te=V[1]*M,he=V[2]*B,de=V[4]*z,ne=V[5]*M,Ae=V[6]*B,xe=V[8]*z,Oe=V[9]*M,Qe=V[10]*B,Ye=J+ne+Qe,Xe=0;return Ye>0?(Xe=2*Math.sqrt(Ye+1),C[3]=.25*Xe,C[0]=(Ae-Oe)/Xe,C[1]=(xe-he)/Xe,C[2]=(te-de)/Xe):J>ne&&J>Qe?(Xe=2*Math.sqrt(1+J-ne-Qe),C[3]=(Ae-Oe)/Xe,C[0]=.25*Xe,C[1]=(te+de)/Xe,C[2]=(xe+he)/Xe):ne>Qe?(Xe=2*Math.sqrt(1+ne-J-Qe),C[3]=(xe-he)/Xe,C[0]=(te+de)/Xe,C[1]=.25*Xe,C[2]=(Ae+Oe)/Xe):(Xe=2*Math.sqrt(1+Qe-J-ne),C[3]=(te-de)/Xe,C[0]=(xe+he)/Xe,C[1]=(Ae+Oe)/Xe,C[2]=.25*Xe),C},ge.fromRotationTranslationScale=function(C,V,I,z){var M=V[0],B=V[1],J=V[2],te=V[3],he=M+M,de=B+B,ne=J+J,Ae=M*he,xe=M*de,Oe=M*ne,Qe=B*de,Ye=B*ne,Xe=J*ne,gt=te*he,et=te*de,_t=te*ne,xt=z[0],Ct=z[1],Dt=z[2];return C[0]=(1-(Qe+Xe))*xt,C[1]=(xe+_t)*xt,C[2]=(Oe-et)*xt,C[3]=0,C[4]=(xe-_t)*Ct,C[5]=(1-(Ae+Xe))*Ct,C[6]=(Ye+gt)*Ct,C[7]=0,C[8]=(Oe+et)*Dt,C[9]=(Ye-gt)*Dt,C[10]=(1-(Ae+Qe))*Dt,C[11]=0,C[12]=I[0],C[13]=I[1],C[14]=I[2],C[15]=1,C},ge.fromRotationTranslationScaleOrigin=function(C,V,I,z,M){var B=V[0],J=V[1],te=V[2],he=V[3],de=B+B,ne=J+J,Ae=te+te,xe=B*de,Oe=B*ne,Qe=B*Ae,Ye=J*ne,Xe=J*Ae,gt=te*Ae,et=he*de,_t=he*ne,xt=he*Ae,Ct=z[0],Dt=z[1],Nt=z[2],jt=M[0],Lt=M[1],Ht=M[2],Aa=(1-(Ye+gt))*Ct,ma=(Oe+xt)*Ct,er=(Qe-_t)*Ct,Oa=(Oe-xt)*Dt,Da=(1-(xe+gt))*Dt,Ra=(Xe+et)*Dt,Rr=(Qe+_t)*Nt,Xa=(Xe-et)*Nt,dr=(1-(xe+Ye))*Nt;return C[0]=Aa,C[1]=ma,C[2]=er,C[3]=0,C[4]=Oa,C[5]=Da,C[6]=Ra,C[7]=0,C[8]=Rr,C[9]=Xa,C[10]=dr,C[11]=0,C[12]=I[0]+jt-(Aa*jt+Oa*Lt+Rr*Ht),C[13]=I[1]+Lt-(ma*jt+Da*Lt+Xa*Ht),C[14]=I[2]+Ht-(er*jt+Ra*Lt+dr*Ht),C[15]=1,C},ge.fromQuat=function(C,V){var I=V[0],z=V[1],M=V[2],B=V[3],J=I+I,te=z+z,he=M+M,de=I*J,ne=z*J,Ae=z*te,xe=M*J,Oe=M*te,Qe=M*he,Ye=B*J,Xe=B*te,gt=B*he;return C[0]=1-Ae-Qe,C[1]=ne+gt,C[2]=xe-Xe,C[3]=0,C[4]=ne-gt,C[5]=1-de-Qe,C[6]=Oe+Ye,C[7]=0,C[8]=xe+Xe,C[9]=Oe-Ye,C[10]=1-de-Ae,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C},ge.frustum=function(C,V,I,z,M,B,J){var te=1/(I-V),he=1/(M-z),de=1/(B-J);return C[0]=2*B*te,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=2*B*he,C[6]=0,C[7]=0,C[8]=(I+V)*te,C[9]=(M+z)*he,C[10]=(J+B)*de,C[11]=-1,C[12]=0,C[13]=0,C[14]=J*B*2*de,C[15]=0,C},ge.perspectiveNO=b,ge.perspectiveZO=function(C,V,I,z,M){var B,J=1/Math.tan(V/2);return C[0]=J/I,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=J,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[11]=-1,C[12]=0,C[13]=0,C[15]=0,M!=null&&M!==1/0?(C[10]=M*(B=1/(z-M)),C[14]=M*z*B):(C[10]=-1,C[14]=-z),C},ge.perspectiveFromFieldOfView=function(C,V,I,z){var M=Math.tan(V.upDegrees*Math.PI/180),B=Math.tan(V.downDegrees*Math.PI/180),J=Math.tan(V.leftDegrees*Math.PI/180),te=Math.tan(V.rightDegrees*Math.PI/180),he=2/(J+te),de=2/(M+B);return C[0]=he,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=de,C[6]=0,C[7]=0,C[8]=-(J-te)*he*.5,C[9]=(M-B)*de*.5,C[10]=z/(I-z),C[11]=-1,C[12]=0,C[13]=0,C[14]=z*I/(I-z),C[15]=0,C},ge.orthoNO=O,ge.orthoZO=function(C,V,I,z,M,B,J){var te=1/(V-I),he=1/(z-M),de=1/(B-J);return C[0]=-2*te,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=-2*he,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=de,C[11]=0,C[12]=(V+I)*te,C[13]=(M+z)*he,C[14]=B*de,C[15]=1,C},ge.lookAt=function(C,V,I,z){var M,B,J,te,he,de,ne,Ae,xe,Oe,Qe=V[0],Ye=V[1],Xe=V[2],gt=z[0],et=z[1],_t=z[2],xt=I[0],Ct=I[1],Dt=I[2];return Math.abs(Qe-xt)<s.EPSILON&&Math.abs(Ye-Ct)<s.EPSILON&&Math.abs(Xe-Dt)<s.EPSILON?f(C):(ne=Qe-xt,Ae=Ye-Ct,xe=Xe-Dt,M=et*(xe*=Oe=1/Math.hypot(ne,Ae,xe))-_t*(Ae*=Oe),B=_t*(ne*=Oe)-gt*xe,J=gt*Ae-et*ne,(Oe=Math.hypot(M,B,J))?(M*=Oe=1/Oe,B*=Oe,J*=Oe):(M=0,B=0,J=0),te=Ae*J-xe*B,he=xe*M-ne*J,de=ne*B-Ae*M,(Oe=Math.hypot(te,he,de))?(te*=Oe=1/Oe,he*=Oe,de*=Oe):(te=0,he=0,de=0),C[0]=M,C[1]=te,C[2]=ne,C[3]=0,C[4]=B,C[5]=he,C[6]=Ae,C[7]=0,C[8]=J,C[9]=de,C[10]=xe,C[11]=0,C[12]=-(M*Qe+B*Ye+J*Xe),C[13]=-(te*Qe+he*Ye+de*Xe),C[14]=-(ne*Qe+Ae*Ye+xe*Xe),C[15]=1,C)},ge.targetTo=function(C,V,I,z){var M=V[0],B=V[1],J=V[2],te=z[0],he=z[1],de=z[2],ne=M-I[0],Ae=B-I[1],xe=J-I[2],Oe=ne*ne+Ae*Ae+xe*xe;Oe>0&&(ne*=Oe=1/Math.sqrt(Oe),Ae*=Oe,xe*=Oe);var Qe=he*xe-de*Ae,Ye=de*ne-te*xe,Xe=te*Ae-he*ne;return(Oe=Qe*Qe+Ye*Ye+Xe*Xe)>0&&(Qe*=Oe=1/Math.sqrt(Oe),Ye*=Oe,Xe*=Oe),C[0]=Qe,C[1]=Ye,C[2]=Xe,C[3]=0,C[4]=Ae*Xe-xe*Ye,C[5]=xe*Qe-ne*Xe,C[6]=ne*Ye-Ae*Qe,C[7]=0,C[8]=ne,C[9]=Ae,C[10]=xe,C[11]=0,C[12]=M,C[13]=B,C[14]=J,C[15]=1,C},ge.str=function(C){return"mat4("+C[0]+", "+C[1]+", "+C[2]+", "+C[3]+", "+C[4]+", "+C[5]+", "+C[6]+", "+C[7]+", "+C[8]+", "+C[9]+", "+C[10]+", "+C[11]+", "+C[12]+", "+C[13]+", "+C[14]+", "+C[15]+")"},ge.frob=function(C){return Math.hypot(C[0],C[1],C[2],C[3],C[4],C[5],C[6],C[7],C[8],C[9],C[10],C[11],C[12],C[13],C[14],C[15])},ge.add=function(C,V,I){return C[0]=V[0]+I[0],C[1]=V[1]+I[1],C[2]=V[2]+I[2],C[3]=V[3]+I[3],C[4]=V[4]+I[4],C[5]=V[5]+I[5],C[6]=V[6]+I[6],C[7]=V[7]+I[7],C[8]=V[8]+I[8],C[9]=V[9]+I[9],C[10]=V[10]+I[10],C[11]=V[11]+I[11],C[12]=V[12]+I[12],C[13]=V[13]+I[13],C[14]=V[14]+I[14],C[15]=V[15]+I[15],C},ge.subtract=D,ge.multiplyScalar=function(C,V,I){return C[0]=V[0]*I,C[1]=V[1]*I,C[2]=V[2]*I,C[3]=V[3]*I,C[4]=V[4]*I,C[5]=V[5]*I,C[6]=V[6]*I,C[7]=V[7]*I,C[8]=V[8]*I,C[9]=V[9]*I,C[10]=V[10]*I,C[11]=V[11]*I,C[12]=V[12]*I,C[13]=V[13]*I,C[14]=V[14]*I,C[15]=V[15]*I,C},ge.multiplyScalarAndAdd=function(C,V,I,z){return C[0]=V[0]+I[0]*z,C[1]=V[1]+I[1]*z,C[2]=V[2]+I[2]*z,C[3]=V[3]+I[3]*z,C[4]=V[4]+I[4]*z,C[5]=V[5]+I[5]*z,C[6]=V[6]+I[6]*z,C[7]=V[7]+I[7]*z,C[8]=V[8]+I[8]*z,C[9]=V[9]+I[9]*z,C[10]=V[10]+I[10]*z,C[11]=V[11]+I[11]*z,C[12]=V[12]+I[12]*z,C[13]=V[13]+I[13]*z,C[14]=V[14]+I[14]*z,C[15]=V[15]+I[15]*z,C},ge.exactEquals=function(C,V){return C[0]===V[0]&&C[1]===V[1]&&C[2]===V[2]&&C[3]===V[3]&&C[4]===V[4]&&C[5]===V[5]&&C[6]===V[6]&&C[7]===V[7]&&C[8]===V[8]&&C[9]===V[9]&&C[10]===V[10]&&C[11]===V[11]&&C[12]===V[12]&&C[13]===V[13]&&C[14]===V[14]&&C[15]===V[15]},ge.equals=function(C,V){var I=C[0],z=C[1],M=C[2],B=C[3],J=C[4],te=C[5],he=C[6],de=C[7],ne=C[8],Ae=C[9],xe=C[10],Oe=C[11],Qe=C[12],Ye=C[13],Xe=C[14],gt=C[15],et=V[0],_t=V[1],xt=V[2],Ct=V[3],Dt=V[4],Nt=V[5],jt=V[6],Lt=V[7],Ht=V[8],Aa=V[9],ma=V[10],er=V[11],Oa=V[12],Da=V[13],Ra=V[14],Rr=V[15];return Math.abs(I-et)<=s.EPSILON*Math.max(1,Math.abs(I),Math.abs(et))&&Math.abs(z-_t)<=s.EPSILON*Math.max(1,Math.abs(z),Math.abs(_t))&&Math.abs(M-xt)<=s.EPSILON*Math.max(1,Math.abs(M),Math.abs(xt))&&Math.abs(B-Ct)<=s.EPSILON*Math.max(1,Math.abs(B),Math.abs(Ct))&&Math.abs(J-Dt)<=s.EPSILON*Math.max(1,Math.abs(J),Math.abs(Dt))&&Math.abs(te-Nt)<=s.EPSILON*Math.max(1,Math.abs(te),Math.abs(Nt))&&Math.abs(he-jt)<=s.EPSILON*Math.max(1,Math.abs(he),Math.abs(jt))&&Math.abs(de-Lt)<=s.EPSILON*Math.max(1,Math.abs(de),Math.abs(Lt))&&Math.abs(ne-Ht)<=s.EPSILON*Math.max(1,Math.abs(ne),Math.abs(Ht))&&Math.abs(Ae-Aa)<=s.EPSILON*Math.max(1,Math.abs(Ae),Math.abs(Aa))&&Math.abs(xe-ma)<=s.EPSILON*Math.max(1,Math.abs(xe),Math.abs(ma))&&Math.abs(Oe-er)<=s.EPSILON*Math.max(1,Math.abs(Oe),Math.abs(er))&&Math.abs(Qe-Oa)<=s.EPSILON*Math.max(1,Math.abs(Qe),Math.abs(Oa))&&Math.abs(Ye-Da)<=s.EPSILON*Math.max(1,Math.abs(Ye),Math.abs(Da))&&Math.abs(Xe-Ra)<=s.EPSILON*Math.max(1,Math.abs(Xe),Math.abs(Ra))&&Math.abs(gt-Rr)<=s.EPSILON*Math.max(1,Math.abs(gt),Math.abs(Rr))},ge.sub=ge.mul=ge.ortho=ge.perspective=void 0;var s=function(C,V){if(C&&C.__esModule)return C;if(C===null||h(C)!=="object"&&typeof C!="function")return{default:C};var I=u(void 0);if(I&&I.has(C))return I.get(C);var z={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in C)if(B!=="default"&&Object.prototype.hasOwnProperty.call(C,B)){var J=M?Object.getOwnPropertyDescriptor(C,B):null;J&&(J.get||J.set)?Object.defineProperty(z,B,J):z[B]=C[B]}return z.default=C,I&&I.set(C,z),z}(L());function u(C){if(typeof WeakMap!="function")return null;var V=new WeakMap,I=new WeakMap;return(u=function(z){return z?I:V})(C)}function f(C){return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}function g(C,V,I){var z=V[0],M=V[1],B=V[2],J=V[3],te=V[4],he=V[5],de=V[6],ne=V[7],Ae=V[8],xe=V[9],Oe=V[10],Qe=V[11],Ye=V[12],Xe=V[13],gt=V[14],et=V[15],_t=I[0],xt=I[1],Ct=I[2],Dt=I[3];return C[0]=_t*z+xt*te+Ct*Ae+Dt*Ye,C[1]=_t*M+xt*he+Ct*xe+Dt*Xe,C[2]=_t*B+xt*de+Ct*Oe+Dt*gt,C[3]=_t*J+xt*ne+Ct*Qe+Dt*et,C[4]=(_t=I[4])*z+(xt=I[5])*te+(Ct=I[6])*Ae+(Dt=I[7])*Ye,C[5]=_t*M+xt*he+Ct*xe+Dt*Xe,C[6]=_t*B+xt*de+Ct*Oe+Dt*gt,C[7]=_t*J+xt*ne+Ct*Qe+Dt*et,C[8]=(_t=I[8])*z+(xt=I[9])*te+(Ct=I[10])*Ae+(Dt=I[11])*Ye,C[9]=_t*M+xt*he+Ct*xe+Dt*Xe,C[10]=_t*B+xt*de+Ct*Oe+Dt*gt,C[11]=_t*J+xt*ne+Ct*Qe+Dt*et,C[12]=(_t=I[12])*z+(xt=I[13])*te+(Ct=I[14])*Ae+(Dt=I[15])*Ye,C[13]=_t*M+xt*he+Ct*xe+Dt*Xe,C[14]=_t*B+xt*de+Ct*Oe+Dt*gt,C[15]=_t*J+xt*ne+Ct*Qe+Dt*et,C}function m(C,V,I){var z=V[0],M=V[1],B=V[2],J=V[3],te=z+z,he=M+M,de=B+B,ne=z*te,Ae=z*he,xe=z*de,Oe=M*he,Qe=M*de,Ye=B*de,Xe=J*te,gt=J*he,et=J*de;return C[0]=1-(Oe+Ye),C[1]=Ae+et,C[2]=xe-gt,C[3]=0,C[4]=Ae-et,C[5]=1-(ne+Ye),C[6]=Qe+Xe,C[7]=0,C[8]=xe+gt,C[9]=Qe-Xe,C[10]=1-(ne+Oe),C[11]=0,C[12]=I[0],C[13]=I[1],C[14]=I[2],C[15]=1,C}function _(C,V){var I=V[4],z=V[5],M=V[6],B=V[8],J=V[9],te=V[10];return C[0]=Math.hypot(V[0],V[1],V[2]),C[1]=Math.hypot(I,z,M),C[2]=Math.hypot(B,J,te),C}function b(C,V,I,z,M){var B,J=1/Math.tan(V/2);return C[0]=J/I,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=J,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[11]=-1,C[12]=0,C[13]=0,C[15]=0,M!=null&&M!==1/0?(C[10]=(M+z)*(B=1/(z-M)),C[14]=2*M*z*B):(C[10]=-1,C[14]=-2*z),C}function O(C,V,I,z,M,B,J){var te=1/(V-I),he=1/(z-M),de=1/(B-J);return C[0]=-2*te,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=-2*he,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=2*de,C[11]=0,C[12]=(V+I)*te,C[13]=(M+z)*he,C[14]=(J+B)*de,C[15]=1,C}function D(C,V,I){return C[0]=V[0]-I[0],C[1]=V[1]-I[1],C[2]=V[2]-I[2],C[3]=V[3]-I[3],C[4]=V[4]-I[4],C[5]=V[5]-I[5],C[6]=V[6]-I[6],C[7]=V[7]-I[7],C[8]=V[8]-I[8],C[9]=V[9]-I[9],C[10]=V[10]-I[10],C[11]=V[11]-I[11],C[12]=V[12]-I[12],C[13]=V[13]-I[13],C[14]=V[14]-I[14],C[15]=V[15]-I[15],C}return ge.perspective=b,ge.ortho=O,ge.mul=g,ge.sub=D,ge}var we,Ve={},oe={};function _e(){if(we)return oe;function h(M){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},h(M)}we=1,Object.defineProperty(oe,"__esModule",{value:!0}),oe.create=f,oe.clone=function(M){var B=new s.ARRAY_TYPE(3);return B[0]=M[0],B[1]=M[1],B[2]=M[2],B},oe.length=g,oe.fromValues=function(M,B,J){var te=new s.ARRAY_TYPE(3);return te[0]=M,te[1]=B,te[2]=J,te},oe.copy=function(M,B){return M[0]=B[0],M[1]=B[1],M[2]=B[2],M},oe.set=function(M,B,J,te){return M[0]=B,M[1]=J,M[2]=te,M},oe.add=function(M,B,J){return M[0]=B[0]+J[0],M[1]=B[1]+J[1],M[2]=B[2]+J[2],M},oe.subtract=m,oe.multiply=_,oe.divide=b,oe.ceil=function(M,B){return M[0]=Math.ceil(B[0]),M[1]=Math.ceil(B[1]),M[2]=Math.ceil(B[2]),M},oe.floor=function(M,B){return M[0]=Math.floor(B[0]),M[1]=Math.floor(B[1]),M[2]=Math.floor(B[2]),M},oe.min=function(M,B,J){return M[0]=Math.min(B[0],J[0]),M[1]=Math.min(B[1],J[1]),M[2]=Math.min(B[2],J[2]),M},oe.max=function(M,B,J){return M[0]=Math.max(B[0],J[0]),M[1]=Math.max(B[1],J[1]),M[2]=Math.max(B[2],J[2]),M},oe.round=function(M,B){return M[0]=Math.round(B[0]),M[1]=Math.round(B[1]),M[2]=Math.round(B[2]),M},oe.scale=function(M,B,J){return M[0]=B[0]*J,M[1]=B[1]*J,M[2]=B[2]*J,M},oe.scaleAndAdd=function(M,B,J,te){return M[0]=B[0]+J[0]*te,M[1]=B[1]+J[1]*te,M[2]=B[2]+J[2]*te,M},oe.distance=O,oe.squaredDistance=D,oe.squaredLength=C,oe.negate=function(M,B){return M[0]=-B[0],M[1]=-B[1],M[2]=-B[2],M},oe.inverse=function(M,B){return M[0]=1/B[0],M[1]=1/B[1],M[2]=1/B[2],M},oe.normalize=function(M,B){var J=B[0],te=B[1],he=B[2],de=J*J+te*te+he*he;return de>0&&(de=1/Math.sqrt(de)),M[0]=B[0]*de,M[1]=B[1]*de,M[2]=B[2]*de,M},oe.dot=V,oe.cross=function(M,B,J){var te=B[0],he=B[1],de=B[2],ne=J[0],Ae=J[1],xe=J[2];return M[0]=he*xe-de*Ae,M[1]=de*ne-te*xe,M[2]=te*Ae-he*ne,M},oe.lerp=function(M,B,J,te){var he=B[0],de=B[1],ne=B[2];return M[0]=he+te*(J[0]-he),M[1]=de+te*(J[1]-de),M[2]=ne+te*(J[2]-ne),M},oe.hermite=function(M,B,J,te,he,de){var ne=de*de,Ae=ne*(2*de-3)+1,xe=ne*(de-2)+de,Oe=ne*(de-1),Qe=ne*(3-2*de);return M[0]=B[0]*Ae+J[0]*xe+te[0]*Oe+he[0]*Qe,M[1]=B[1]*Ae+J[1]*xe+te[1]*Oe+he[1]*Qe,M[2]=B[2]*Ae+J[2]*xe+te[2]*Oe+he[2]*Qe,M},oe.bezier=function(M,B,J,te,he,de){var ne=1-de,Ae=ne*ne,xe=de*de,Oe=Ae*ne,Qe=3*de*Ae,Ye=3*xe*ne,Xe=xe*de;return M[0]=B[0]*Oe+J[0]*Qe+te[0]*Ye+he[0]*Xe,M[1]=B[1]*Oe+J[1]*Qe+te[1]*Ye+he[1]*Xe,M[2]=B[2]*Oe+J[2]*Qe+te[2]*Ye+he[2]*Xe,M},oe.random=function(M,B){B=B||1;var J=2*s.RANDOM()*Math.PI,te=2*s.RANDOM()-1,he=Math.sqrt(1-te*te)*B;return M[0]=Math.cos(J)*he,M[1]=Math.sin(J)*he,M[2]=te*B,M},oe.transformMat4=function(M,B,J){var te=B[0],he=B[1],de=B[2],ne=J[3]*te+J[7]*he+J[11]*de+J[15];return M[0]=(J[0]*te+J[4]*he+J[8]*de+J[12])/(ne=ne||1),M[1]=(J[1]*te+J[5]*he+J[9]*de+J[13])/ne,M[2]=(J[2]*te+J[6]*he+J[10]*de+J[14])/ne,M},oe.transformMat3=function(M,B,J){var te=B[0],he=B[1],de=B[2];return M[0]=te*J[0]+he*J[3]+de*J[6],M[1]=te*J[1]+he*J[4]+de*J[7],M[2]=te*J[2]+he*J[5]+de*J[8],M},oe.transformQuat=function(M,B,J){var te=J[0],he=J[1],de=J[2],ne=B[0],Ae=B[1],xe=B[2],Oe=he*xe-de*Ae,Qe=de*ne-te*xe,Ye=te*Ae-he*ne,Xe=he*Ye-de*Qe,gt=de*Oe-te*Ye,et=te*Qe-he*Oe,_t=2*J[3];return Qe*=_t,Ye*=_t,gt*=2,et*=2,M[0]=ne+(Oe*=_t)+(Xe*=2),M[1]=Ae+Qe+gt,M[2]=xe+Ye+et,M},oe.rotateX=function(M,B,J,te){var he=[],de=[];return he[0]=B[0]-J[0],he[1]=B[1]-J[1],he[2]=B[2]-J[2],de[0]=he[0],de[1]=he[1]*Math.cos(te)-he[2]*Math.sin(te),de[2]=he[1]*Math.sin(te)+he[2]*Math.cos(te),M[0]=de[0]+J[0],M[1]=de[1]+J[1],M[2]=de[2]+J[2],M},oe.rotateY=function(M,B,J,te){var he=[],de=[];return he[0]=B[0]-J[0],he[1]=B[1]-J[1],he[2]=B[2]-J[2],de[0]=he[2]*Math.sin(te)+he[0]*Math.cos(te),de[1]=he[1],de[2]=he[2]*Math.cos(te)-he[0]*Math.sin(te),M[0]=de[0]+J[0],M[1]=de[1]+J[1],M[2]=de[2]+J[2],M},oe.rotateZ=function(M,B,J,te){var he=[],de=[];return he[0]=B[0]-J[0],he[1]=B[1]-J[1],he[2]=B[2]-J[2],de[0]=he[0]*Math.cos(te)-he[1]*Math.sin(te),de[1]=he[0]*Math.sin(te)+he[1]*Math.cos(te),de[2]=he[2],M[0]=de[0]+J[0],M[1]=de[1]+J[1],M[2]=de[2]+J[2],M},oe.angle=function(M,B){var J=M[0],te=M[1],he=M[2],de=B[0],ne=B[1],Ae=B[2],xe=Math.sqrt(J*J+te*te+he*he)*Math.sqrt(de*de+ne*ne+Ae*Ae),Oe=xe&&V(M,B)/xe;return Math.acos(Math.min(Math.max(Oe,-1),1))},oe.zero=function(M){return M[0]=0,M[1]=0,M[2]=0,M},oe.str=function(M){return"vec3("+M[0]+", "+M[1]+", "+M[2]+")"},oe.exactEquals=function(M,B){return M[0]===B[0]&&M[1]===B[1]&&M[2]===B[2]},oe.equals=function(M,B){var J=M[0],te=M[1],he=M[2],de=B[0],ne=B[1],Ae=B[2];return Math.abs(J-de)<=s.EPSILON*Math.max(1,Math.abs(J),Math.abs(de))&&Math.abs(te-ne)<=s.EPSILON*Math.max(1,Math.abs(te),Math.abs(ne))&&Math.abs(he-Ae)<=s.EPSILON*Math.max(1,Math.abs(he),Math.abs(Ae))},oe.forEach=oe.sqrLen=oe.len=oe.sqrDist=oe.dist=oe.div=oe.mul=oe.sub=void 0;var s=function(M,B){if(M&&M.__esModule)return M;if(M===null||h(M)!=="object"&&typeof M!="function")return{default:M};var J=u(void 0);if(J&&J.has(M))return J.get(M);var te={},he=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var de in M)if(de!=="default"&&Object.prototype.hasOwnProperty.call(M,de)){var ne=he?Object.getOwnPropertyDescriptor(M,de):null;ne&&(ne.get||ne.set)?Object.defineProperty(te,de,ne):te[de]=M[de]}return te.default=M,J&&J.set(M,te),te}(L());function u(M){if(typeof WeakMap!="function")return null;var B=new WeakMap,J=new WeakMap;return(u=function(te){return te?J:B})(M)}function f(){var M=new s.ARRAY_TYPE(3);return s.ARRAY_TYPE!=Float32Array&&(M[0]=0,M[1]=0,M[2]=0),M}function g(M){return Math.hypot(M[0],M[1],M[2])}function m(M,B,J){return M[0]=B[0]-J[0],M[1]=B[1]-J[1],M[2]=B[2]-J[2],M}function _(M,B,J){return M[0]=B[0]*J[0],M[1]=B[1]*J[1],M[2]=B[2]*J[2],M}function b(M,B,J){return M[0]=B[0]/J[0],M[1]=B[1]/J[1],M[2]=B[2]/J[2],M}function O(M,B){return Math.hypot(B[0]-M[0],B[1]-M[1],B[2]-M[2])}function D(M,B){var J=B[0]-M[0],te=B[1]-M[1],he=B[2]-M[2];return J*J+te*te+he*he}function C(M){var B=M[0],J=M[1],te=M[2];return B*B+J*J+te*te}function V(M,B){return M[0]*B[0]+M[1]*B[1]+M[2]*B[2]}oe.sub=m,oe.mul=_,oe.div=b,oe.dist=O,oe.sqrDist=D,oe.len=g,oe.sqrLen=C;var I,z=(I=f(),function(M,B,J,te,he,de){var ne,Ae;for(B||(B=3),J||(J=0),Ae=te?Math.min(te*B+J,M.length):M.length,ne=J;ne<Ae;ne+=B)I[0]=M[ne],I[1]=M[ne+1],I[2]=M[ne+2],he(I,I,de),M[ne]=I[0],M[ne+1]=I[1],M[ne+2]=I[2];return M});return oe.forEach=z,oe}var Fe,Ee,ze={};function Se(){if(Fe)return ze;function h(z){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},h(z)}Fe=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.create=f,ze.clone=function(z){var M=new s.ARRAY_TYPE(4);return M[0]=z[0],M[1]=z[1],M[2]=z[2],M[3]=z[3],M},ze.fromValues=function(z,M,B,J){var te=new s.ARRAY_TYPE(4);return te[0]=z,te[1]=M,te[2]=B,te[3]=J,te},ze.copy=function(z,M){return z[0]=M[0],z[1]=M[1],z[2]=M[2],z[3]=M[3],z},ze.set=function(z,M,B,J,te){return z[0]=M,z[1]=B,z[2]=J,z[3]=te,z},ze.add=function(z,M,B){return z[0]=M[0]+B[0],z[1]=M[1]+B[1],z[2]=M[2]+B[2],z[3]=M[3]+B[3],z},ze.subtract=g,ze.multiply=m,ze.divide=_,ze.ceil=function(z,M){return z[0]=Math.ceil(M[0]),z[1]=Math.ceil(M[1]),z[2]=Math.ceil(M[2]),z[3]=Math.ceil(M[3]),z},ze.floor=function(z,M){return z[0]=Math.floor(M[0]),z[1]=Math.floor(M[1]),z[2]=Math.floor(M[2]),z[3]=Math.floor(M[3]),z},ze.min=function(z,M,B){return z[0]=Math.min(M[0],B[0]),z[1]=Math.min(M[1],B[1]),z[2]=Math.min(M[2],B[2]),z[3]=Math.min(M[3],B[3]),z},ze.max=function(z,M,B){return z[0]=Math.max(M[0],B[0]),z[1]=Math.max(M[1],B[1]),z[2]=Math.max(M[2],B[2]),z[3]=Math.max(M[3],B[3]),z},ze.round=function(z,M){return z[0]=Math.round(M[0]),z[1]=Math.round(M[1]),z[2]=Math.round(M[2]),z[3]=Math.round(M[3]),z},ze.scale=function(z,M,B){return z[0]=M[0]*B,z[1]=M[1]*B,z[2]=M[2]*B,z[3]=M[3]*B,z},ze.scaleAndAdd=function(z,M,B,J){return z[0]=M[0]+B[0]*J,z[1]=M[1]+B[1]*J,z[2]=M[2]+B[2]*J,z[3]=M[3]+B[3]*J,z},ze.distance=b,ze.squaredDistance=O,ze.length=D,ze.squaredLength=C,ze.negate=function(z,M){return z[0]=-M[0],z[1]=-M[1],z[2]=-M[2],z[3]=-M[3],z},ze.inverse=function(z,M){return z[0]=1/M[0],z[1]=1/M[1],z[2]=1/M[2],z[3]=1/M[3],z},ze.normalize=function(z,M){var B=M[0],J=M[1],te=M[2],he=M[3],de=B*B+J*J+te*te+he*he;return de>0&&(de=1/Math.sqrt(de)),z[0]=B*de,z[1]=J*de,z[2]=te*de,z[3]=he*de,z},ze.dot=function(z,M){return z[0]*M[0]+z[1]*M[1]+z[2]*M[2]+z[3]*M[3]},ze.cross=function(z,M,B,J){var te=B[0]*J[1]-B[1]*J[0],he=B[0]*J[2]-B[2]*J[0],de=B[0]*J[3]-B[3]*J[0],ne=B[1]*J[2]-B[2]*J[1],Ae=B[1]*J[3]-B[3]*J[1],xe=B[2]*J[3]-B[3]*J[2],Oe=M[0],Qe=M[1],Ye=M[2],Xe=M[3];return z[0]=Qe*xe-Ye*Ae+Xe*ne,z[1]=-Oe*xe+Ye*de-Xe*he,z[2]=Oe*Ae-Qe*de+Xe*te,z[3]=-Oe*ne+Qe*he-Ye*te,z},ze.lerp=function(z,M,B,J){var te=M[0],he=M[1],de=M[2],ne=M[3];return z[0]=te+J*(B[0]-te),z[1]=he+J*(B[1]-he),z[2]=de+J*(B[2]-de),z[3]=ne+J*(B[3]-ne),z},ze.random=function(z,M){var B,J,te,he,de,ne;M=M||1;do de=(B=2*s.RANDOM()-1)*B+(J=2*s.RANDOM()-1)*J;while(de>=1);do ne=(te=2*s.RANDOM()-1)*te+(he=2*s.RANDOM()-1)*he;while(ne>=1);var Ae=Math.sqrt((1-de)/ne);return z[0]=M*B,z[1]=M*J,z[2]=M*te*Ae,z[3]=M*he*Ae,z},ze.transformMat4=function(z,M,B){var J=M[0],te=M[1],he=M[2],de=M[3];return z[0]=B[0]*J+B[4]*te+B[8]*he+B[12]*de,z[1]=B[1]*J+B[5]*te+B[9]*he+B[13]*de,z[2]=B[2]*J+B[6]*te+B[10]*he+B[14]*de,z[3]=B[3]*J+B[7]*te+B[11]*he+B[15]*de,z},ze.transformQuat=function(z,M,B){var J=M[0],te=M[1],he=M[2],de=B[0],ne=B[1],Ae=B[2],xe=B[3],Oe=xe*J+ne*he-Ae*te,Qe=xe*te+Ae*J-de*he,Ye=xe*he+de*te-ne*J,Xe=-de*J-ne*te-Ae*he;return z[0]=Oe*xe+Xe*-de+Qe*-Ae-Ye*-ne,z[1]=Qe*xe+Xe*-ne+Ye*-de-Oe*-Ae,z[2]=Ye*xe+Xe*-Ae+Oe*-ne-Qe*-de,z[3]=M[3],z},ze.zero=function(z){return z[0]=0,z[1]=0,z[2]=0,z[3]=0,z},ze.str=function(z){return"vec4("+z[0]+", "+z[1]+", "+z[2]+", "+z[3]+")"},ze.exactEquals=function(z,M){return z[0]===M[0]&&z[1]===M[1]&&z[2]===M[2]&&z[3]===M[3]},ze.equals=function(z,M){var B=z[0],J=z[1],te=z[2],he=z[3],de=M[0],ne=M[1],Ae=M[2],xe=M[3];return Math.abs(B-de)<=s.EPSILON*Math.max(1,Math.abs(B),Math.abs(de))&&Math.abs(J-ne)<=s.EPSILON*Math.max(1,Math.abs(J),Math.abs(ne))&&Math.abs(te-Ae)<=s.EPSILON*Math.max(1,Math.abs(te),Math.abs(Ae))&&Math.abs(he-xe)<=s.EPSILON*Math.max(1,Math.abs(he),Math.abs(xe))},ze.forEach=ze.sqrLen=ze.len=ze.sqrDist=ze.dist=ze.div=ze.mul=ze.sub=void 0;var s=function(z,M){if(z&&z.__esModule)return z;if(z===null||h(z)!=="object"&&typeof z!="function")return{default:z};var B=u(void 0);if(B&&B.has(z))return B.get(z);var J={},te=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var he in z)if(he!=="default"&&Object.prototype.hasOwnProperty.call(z,he)){var de=te?Object.getOwnPropertyDescriptor(z,he):null;de&&(de.get||de.set)?Object.defineProperty(J,he,de):J[he]=z[he]}return J.default=z,B&&B.set(z,J),J}(L());function u(z){if(typeof WeakMap!="function")return null;var M=new WeakMap,B=new WeakMap;return(u=function(J){return J?B:M})(z)}function f(){var z=new s.ARRAY_TYPE(4);return s.ARRAY_TYPE!=Float32Array&&(z[0]=0,z[1]=0,z[2]=0,z[3]=0),z}function g(z,M,B){return z[0]=M[0]-B[0],z[1]=M[1]-B[1],z[2]=M[2]-B[2],z[3]=M[3]-B[3],z}function m(z,M,B){return z[0]=M[0]*B[0],z[1]=M[1]*B[1],z[2]=M[2]*B[2],z[3]=M[3]*B[3],z}function _(z,M,B){return z[0]=M[0]/B[0],z[1]=M[1]/B[1],z[2]=M[2]/B[2],z[3]=M[3]/B[3],z}function b(z,M){return Math.hypot(M[0]-z[0],M[1]-z[1],M[2]-z[2],M[3]-z[3])}function O(z,M){var B=M[0]-z[0],J=M[1]-z[1],te=M[2]-z[2],he=M[3]-z[3];return B*B+J*J+te*te+he*he}function D(z){return Math.hypot(z[0],z[1],z[2],z[3])}function C(z){var M=z[0],B=z[1],J=z[2],te=z[3];return M*M+B*B+J*J+te*te}ze.sub=g,ze.mul=m,ze.div=_,ze.dist=b,ze.sqrDist=O,ze.len=D,ze.sqrLen=C;var V,I=(V=f(),function(z,M,B,J,te,he){var de,ne;for(M||(M=4),B||(B=0),ne=J?Math.min(J*M+B,z.length):z.length,de=B;de<ne;de+=M)V[0]=z[de],V[1]=z[de+1],V[2]=z[de+2],V[3]=z[de+3],te(V,V,he),z[de]=V[0],z[de+1]=V[1],z[de+2]=V[2],z[de+3]=V[3];return z});return ze.forEach=I,ze}function je(){if(Ee)return Ve;function h(et){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_t){return typeof _t}:function(_t){return _t&&typeof Symbol=="function"&&_t.constructor===Symbol&&_t!==Symbol.prototype?"symbol":typeof _t},h(et)}Ee=1,Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.create=b,Ve.identity=function(et){return et[0]=0,et[1]=0,et[2]=0,et[3]=1,et},Ve.setAxisAngle=O,Ve.getAxisAngle=function(et,_t){var xt=2*Math.acos(_t[3]),Ct=Math.sin(xt/2);return Ct>s.EPSILON?(et[0]=_t[0]/Ct,et[1]=_t[1]/Ct,et[2]=_t[2]/Ct):(et[0]=1,et[1]=0,et[2]=0),xt},Ve.getAngle=function(et,_t){var xt=B(et,_t);return Math.acos(2*xt*xt-1)},Ve.multiply=D,Ve.rotateX=function(et,_t,xt){xt*=.5;var Ct=_t[0],Dt=_t[1],Nt=_t[2],jt=_t[3],Lt=Math.sin(xt),Ht=Math.cos(xt);return et[0]=Ct*Ht+jt*Lt,et[1]=Dt*Ht+Nt*Lt,et[2]=Nt*Ht-Dt*Lt,et[3]=jt*Ht-Ct*Lt,et},Ve.rotateY=function(et,_t,xt){xt*=.5;var Ct=_t[0],Dt=_t[1],Nt=_t[2],jt=_t[3],Lt=Math.sin(xt),Ht=Math.cos(xt);return et[0]=Ct*Ht-Nt*Lt,et[1]=Dt*Ht+jt*Lt,et[2]=Nt*Ht+Ct*Lt,et[3]=jt*Ht-Dt*Lt,et},Ve.rotateZ=function(et,_t,xt){xt*=.5;var Ct=_t[0],Dt=_t[1],Nt=_t[2],jt=_t[3],Lt=Math.sin(xt),Ht=Math.cos(xt);return et[0]=Ct*Ht+Dt*Lt,et[1]=Dt*Ht-Ct*Lt,et[2]=Nt*Ht+jt*Lt,et[3]=jt*Ht-Nt*Lt,et},Ve.calculateW=function(et,_t){var xt=_t[0],Ct=_t[1],Dt=_t[2];return et[0]=xt,et[1]=Ct,et[2]=Dt,et[3]=Math.sqrt(Math.abs(1-xt*xt-Ct*Ct-Dt*Dt)),et},Ve.exp=C,Ve.ln=V,Ve.pow=function(et,_t,xt){return V(et,_t),M(et,et,xt),C(et,et),et},Ve.slerp=I,Ve.random=function(et){var _t=s.RANDOM(),xt=s.RANDOM(),Ct=s.RANDOM(),Dt=Math.sqrt(1-_t),Nt=Math.sqrt(_t);return et[0]=Dt*Math.sin(2*Math.PI*xt),et[1]=Dt*Math.cos(2*Math.PI*xt),et[2]=Nt*Math.sin(2*Math.PI*Ct),et[3]=Nt*Math.cos(2*Math.PI*Ct),et},Ve.invert=function(et,_t){var xt=_t[0],Ct=_t[1],Dt=_t[2],Nt=_t[3],jt=xt*xt+Ct*Ct+Dt*Dt+Nt*Nt,Lt=jt?1/jt:0;return et[0]=-xt*Lt,et[1]=-Ct*Lt,et[2]=-Dt*Lt,et[3]=Nt*Lt,et},Ve.conjugate=function(et,_t){return et[0]=-_t[0],et[1]=-_t[1],et[2]=-_t[2],et[3]=_t[3],et},Ve.fromMat3=z,Ve.fromEuler=function(et,_t,xt,Ct){var Dt=.5*Math.PI/180;_t*=Dt,xt*=Dt,Ct*=Dt;var Nt=Math.sin(_t),jt=Math.cos(_t),Lt=Math.sin(xt),Ht=Math.cos(xt),Aa=Math.sin(Ct),ma=Math.cos(Ct);return et[0]=Nt*Ht*ma-jt*Lt*Aa,et[1]=jt*Lt*ma+Nt*Ht*Aa,et[2]=jt*Ht*Aa-Nt*Lt*ma,et[3]=jt*Ht*ma+Nt*Lt*Aa,et},Ve.str=function(et){return"quat("+et[0]+", "+et[1]+", "+et[2]+", "+et[3]+")"},Ve.setAxes=Ve.sqlerp=Ve.rotationTo=Ve.equals=Ve.exactEquals=Ve.normalize=Ve.sqrLen=Ve.squaredLength=Ve.len=Ve.length=Ve.lerp=Ve.dot=Ve.scale=Ve.mul=Ve.add=Ve.set=Ve.copy=Ve.fromValues=Ve.clone=void 0;var s=_(L()),u=_(le()),f=_(_e()),g=_(Se());function m(et){if(typeof WeakMap!="function")return null;var _t=new WeakMap,xt=new WeakMap;return(m=function(Ct){return Ct?xt:_t})(et)}function _(et,_t){if(et&&et.__esModule)return et;if(et===null||h(et)!=="object"&&typeof et!="function")return{default:et};var xt=m(_t);if(xt&&xt.has(et))return xt.get(et);var Ct={},Dt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Nt in et)if(Nt!=="default"&&Object.prototype.hasOwnProperty.call(et,Nt)){var jt=Dt?Object.getOwnPropertyDescriptor(et,Nt):null;jt&&(jt.get||jt.set)?Object.defineProperty(Ct,Nt,jt):Ct[Nt]=et[Nt]}return Ct.default=et,xt&&xt.set(et,Ct),Ct}function b(){var et=new s.ARRAY_TYPE(4);return s.ARRAY_TYPE!=Float32Array&&(et[0]=0,et[1]=0,et[2]=0),et[3]=1,et}function O(et,_t,xt){xt*=.5;var Ct=Math.sin(xt);return et[0]=Ct*_t[0],et[1]=Ct*_t[1],et[2]=Ct*_t[2],et[3]=Math.cos(xt),et}function D(et,_t,xt){var Ct=_t[0],Dt=_t[1],Nt=_t[2],jt=_t[3],Lt=xt[0],Ht=xt[1],Aa=xt[2],ma=xt[3];return et[0]=Ct*ma+jt*Lt+Dt*Aa-Nt*Ht,et[1]=Dt*ma+jt*Ht+Nt*Lt-Ct*Aa,et[2]=Nt*ma+jt*Aa+Ct*Ht-Dt*Lt,et[3]=jt*ma-Ct*Lt-Dt*Ht-Nt*Aa,et}function C(et,_t){var xt=_t[0],Ct=_t[1],Dt=_t[2],Nt=_t[3],jt=Math.sqrt(xt*xt+Ct*Ct+Dt*Dt),Lt=Math.exp(Nt),Ht=jt>0?Lt*Math.sin(jt)/jt:0;return et[0]=xt*Ht,et[1]=Ct*Ht,et[2]=Dt*Ht,et[3]=Lt*Math.cos(jt),et}function V(et,_t){var xt=_t[0],Ct=_t[1],Dt=_t[2],Nt=_t[3],jt=Math.sqrt(xt*xt+Ct*Ct+Dt*Dt),Lt=jt>0?Math.atan2(jt,Nt)/jt:0;return et[0]=xt*Lt,et[1]=Ct*Lt,et[2]=Dt*Lt,et[3]=.5*Math.log(xt*xt+Ct*Ct+Dt*Dt+Nt*Nt),et}function I(et,_t,xt,Ct){var Dt,Nt,jt,Lt,Ht,Aa=_t[0],ma=_t[1],er=_t[2],Oa=_t[3],Da=xt[0],Ra=xt[1],Rr=xt[2],Xa=xt[3];return(Nt=Aa*Da+ma*Ra+er*Rr+Oa*Xa)<0&&(Nt=-Nt,Da=-Da,Ra=-Ra,Rr=-Rr,Xa=-Xa),1-Nt>s.EPSILON?(Dt=Math.acos(Nt),jt=Math.sin(Dt),Lt=Math.sin((1-Ct)*Dt)/jt,Ht=Math.sin(Ct*Dt)/jt):(Lt=1-Ct,Ht=Ct),et[0]=Lt*Aa+Ht*Da,et[1]=Lt*ma+Ht*Ra,et[2]=Lt*er+Ht*Rr,et[3]=Lt*Oa+Ht*Xa,et}function z(et,_t){var xt,Ct=_t[0]+_t[4]+_t[8];if(Ct>0)xt=Math.sqrt(Ct+1),et[3]=.5*xt,et[0]=(_t[5]-_t[7])*(xt=.5/xt),et[1]=(_t[6]-_t[2])*xt,et[2]=(_t[1]-_t[3])*xt;else{var Dt=0;_t[4]>_t[0]&&(Dt=1),_t[8]>_t[3*Dt+Dt]&&(Dt=2);var Nt=(Dt+1)%3,jt=(Dt+2)%3;xt=Math.sqrt(_t[3*Dt+Dt]-_t[3*Nt+Nt]-_t[3*jt+jt]+1),et[Dt]=.5*xt,et[3]=(_t[3*Nt+jt]-_t[3*jt+Nt])*(xt=.5/xt),et[Nt]=(_t[3*Nt+Dt]+_t[3*Dt+Nt])*xt,et[jt]=(_t[3*jt+Dt]+_t[3*Dt+jt])*xt}return et}Ve.clone=g.clone,Ve.fromValues=g.fromValues,Ve.copy=g.copy,Ve.set=g.set,Ve.add=g.add,Ve.mul=D;var M=g.scale;Ve.scale=M;var B=g.dot;Ve.dot=B,Ve.lerp=g.lerp;var J=g.length;Ve.length=J,Ve.len=J;var te=g.squaredLength;Ve.squaredLength=te,Ve.sqrLen=te;var he=g.normalize;Ve.normalize=he,Ve.exactEquals=g.exactEquals,Ve.equals=g.equals;var de,ne,Ae,xe=(de=f.create(),ne=f.fromValues(1,0,0),Ae=f.fromValues(0,1,0),function(et,_t,xt){var Ct=f.dot(_t,xt);return Ct<-.999999?(f.cross(de,ne,_t),f.len(de)<1e-6&&f.cross(de,Ae,_t),f.normalize(de,de),O(et,de,Math.PI),et):Ct>.999999?(et[0]=0,et[1]=0,et[2]=0,et[3]=1,et):(f.cross(de,_t,xt),et[0]=de[0],et[1]=de[1],et[2]=de[2],et[3]=1+Ct,he(et,et))});Ve.rotationTo=xe;var Oe,Qe,Ye=(Oe=b(),Qe=b(),function(et,_t,xt,Ct,Dt,Nt){return I(Oe,_t,Dt,Nt),I(Qe,xt,Ct,Nt),I(et,Oe,Qe,2*Nt*(1-Nt)),et});Ve.sqlerp=Ye;var Xe,gt=(Xe=u.create(),function(et,_t,xt,Ct){return Xe[0]=xt[0],Xe[3]=xt[1],Xe[6]=xt[2],Xe[1]=Ct[0],Xe[4]=Ct[1],Xe[7]=Ct[2],Xe[2]=-_t[0],Xe[5]=-_t[1],Xe[8]=-_t[2],he(et,z(et,Xe))});return Ve.setAxes=gt,Ve}var Ue,$e={};function Be(){if(Ue)return $e;function h(I){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},h(I)}Ue=1,Object.defineProperty($e,"__esModule",{value:!0}),$e.create=function(){var I=new s.ARRAY_TYPE(8);return s.ARRAY_TYPE!=Float32Array&&(I[0]=0,I[1]=0,I[2]=0,I[4]=0,I[5]=0,I[6]=0,I[7]=0),I[3]=1,I},$e.clone=function(I){var z=new s.ARRAY_TYPE(8);return z[0]=I[0],z[1]=I[1],z[2]=I[2],z[3]=I[3],z[4]=I[4],z[5]=I[5],z[6]=I[6],z[7]=I[7],z},$e.fromValues=function(I,z,M,B,J,te,he,de){var ne=new s.ARRAY_TYPE(8);return ne[0]=I,ne[1]=z,ne[2]=M,ne[3]=B,ne[4]=J,ne[5]=te,ne[6]=he,ne[7]=de,ne},$e.fromRotationTranslationValues=function(I,z,M,B,J,te,he){var de=new s.ARRAY_TYPE(8);de[0]=I,de[1]=z,de[2]=M,de[3]=B;var ne=.5*J,Ae=.5*te,xe=.5*he;return de[4]=ne*B+Ae*M-xe*z,de[5]=Ae*B+xe*I-ne*M,de[6]=xe*B+ne*z-Ae*I,de[7]=-ne*I-Ae*z-xe*M,de},$e.fromRotationTranslation=_,$e.fromTranslation=function(I,z){return I[0]=0,I[1]=0,I[2]=0,I[3]=1,I[4]=.5*z[0],I[5]=.5*z[1],I[6]=.5*z[2],I[7]=0,I},$e.fromRotation=function(I,z){return I[0]=z[0],I[1]=z[1],I[2]=z[2],I[3]=z[3],I[4]=0,I[5]=0,I[6]=0,I[7]=0,I},$e.fromMat4=function(I,z){var M=u.create();f.getRotation(M,z);var B=new s.ARRAY_TYPE(3);return f.getTranslation(B,z),_(I,M,B),I},$e.copy=b,$e.identity=function(I){return I[0]=0,I[1]=0,I[2]=0,I[3]=1,I[4]=0,I[5]=0,I[6]=0,I[7]=0,I},$e.set=function(I,z,M,B,J,te,he,de,ne){return I[0]=z,I[1]=M,I[2]=B,I[3]=J,I[4]=te,I[5]=he,I[6]=de,I[7]=ne,I},$e.getDual=function(I,z){return I[0]=z[4],I[1]=z[5],I[2]=z[6],I[3]=z[7],I},$e.setDual=function(I,z){return I[4]=z[0],I[5]=z[1],I[6]=z[2],I[7]=z[3],I},$e.getTranslation=function(I,z){var M=z[4],B=z[5],J=z[6],te=z[7],he=-z[0],de=-z[1],ne=-z[2],Ae=z[3];return I[0]=2*(M*Ae+te*he+B*ne-J*de),I[1]=2*(B*Ae+te*de+J*he-M*ne),I[2]=2*(J*Ae+te*ne+M*de-B*he),I},$e.translate=function(I,z,M){var B=z[0],J=z[1],te=z[2],he=z[3],de=.5*M[0],ne=.5*M[1],Ae=.5*M[2],xe=z[4],Oe=z[5],Qe=z[6],Ye=z[7];return I[0]=B,I[1]=J,I[2]=te,I[3]=he,I[4]=he*de+J*Ae-te*ne+xe,I[5]=he*ne+te*de-B*Ae+Oe,I[6]=he*Ae+B*ne-J*de+Qe,I[7]=-B*de-J*ne-te*Ae+Ye,I},$e.rotateX=function(I,z,M){var B=-z[0],J=-z[1],te=-z[2],he=z[3],de=z[4],ne=z[5],Ae=z[6],xe=z[7],Oe=de*he+xe*B+ne*te-Ae*J,Qe=ne*he+xe*J+Ae*B-de*te,Ye=Ae*he+xe*te+de*J-ne*B,Xe=xe*he-de*B-ne*J-Ae*te;return u.rotateX(I,z,M),I[4]=Oe*(he=I[3])+Xe*(B=I[0])+Qe*(te=I[2])-Ye*(J=I[1]),I[5]=Qe*he+Xe*J+Ye*B-Oe*te,I[6]=Ye*he+Xe*te+Oe*J-Qe*B,I[7]=Xe*he-Oe*B-Qe*J-Ye*te,I},$e.rotateY=function(I,z,M){var B=-z[0],J=-z[1],te=-z[2],he=z[3],de=z[4],ne=z[5],Ae=z[6],xe=z[7],Oe=de*he+xe*B+ne*te-Ae*J,Qe=ne*he+xe*J+Ae*B-de*te,Ye=Ae*he+xe*te+de*J-ne*B,Xe=xe*he-de*B-ne*J-Ae*te;return u.rotateY(I,z,M),I[4]=Oe*(he=I[3])+Xe*(B=I[0])+Qe*(te=I[2])-Ye*(J=I[1]),I[5]=Qe*he+Xe*J+Ye*B-Oe*te,I[6]=Ye*he+Xe*te+Oe*J-Qe*B,I[7]=Xe*he-Oe*B-Qe*J-Ye*te,I},$e.rotateZ=function(I,z,M){var B=-z[0],J=-z[1],te=-z[2],he=z[3],de=z[4],ne=z[5],Ae=z[6],xe=z[7],Oe=de*he+xe*B+ne*te-Ae*J,Qe=ne*he+xe*J+Ae*B-de*te,Ye=Ae*he+xe*te+de*J-ne*B,Xe=xe*he-de*B-ne*J-Ae*te;return u.rotateZ(I,z,M),I[4]=Oe*(he=I[3])+Xe*(B=I[0])+Qe*(te=I[2])-Ye*(J=I[1]),I[5]=Qe*he+Xe*J+Ye*B-Oe*te,I[6]=Ye*he+Xe*te+Oe*J-Qe*B,I[7]=Xe*he-Oe*B-Qe*J-Ye*te,I},$e.rotateByQuatAppend=function(I,z,M){var B=M[0],J=M[1],te=M[2],he=M[3],de=z[0],ne=z[1],Ae=z[2],xe=z[3];return I[0]=de*he+xe*B+ne*te-Ae*J,I[1]=ne*he+xe*J+Ae*B-de*te,I[2]=Ae*he+xe*te+de*J-ne*B,I[3]=xe*he-de*B-ne*J-Ae*te,I[4]=(de=z[4])*he+(xe=z[7])*B+(ne=z[5])*te-(Ae=z[6])*J,I[5]=ne*he+xe*J+Ae*B-de*te,I[6]=Ae*he+xe*te+de*J-ne*B,I[7]=xe*he-de*B-ne*J-Ae*te,I},$e.rotateByQuatPrepend=function(I,z,M){var B=z[0],J=z[1],te=z[2],he=z[3],de=M[0],ne=M[1],Ae=M[2],xe=M[3];return I[0]=B*xe+he*de+J*Ae-te*ne,I[1]=J*xe+he*ne+te*de-B*Ae,I[2]=te*xe+he*Ae+B*ne-J*de,I[3]=he*xe-B*de-J*ne-te*Ae,I[4]=B*(xe=M[7])+he*(de=M[4])+J*(Ae=M[6])-te*(ne=M[5]),I[5]=J*xe+he*ne+te*de-B*Ae,I[6]=te*xe+he*Ae+B*ne-J*de,I[7]=he*xe-B*de-J*ne-te*Ae,I},$e.rotateAroundAxis=function(I,z,M,B){if(Math.abs(B)<s.EPSILON)return b(I,z);var J=Math.hypot(M[0],M[1],M[2]);B*=.5;var te=Math.sin(B),he=te*M[0]/J,de=te*M[1]/J,ne=te*M[2]/J,Ae=Math.cos(B),xe=z[0],Oe=z[1],Qe=z[2],Ye=z[3];I[0]=xe*Ae+Ye*he+Oe*ne-Qe*de,I[1]=Oe*Ae+Ye*de+Qe*he-xe*ne,I[2]=Qe*Ae+Ye*ne+xe*de-Oe*he,I[3]=Ye*Ae-xe*he-Oe*de-Qe*ne;var Xe=z[4],gt=z[5],et=z[6],_t=z[7];return I[4]=Xe*Ae+_t*he+gt*ne-et*de,I[5]=gt*Ae+_t*de+et*he-Xe*ne,I[6]=et*Ae+_t*ne+Xe*de-gt*he,I[7]=_t*Ae-Xe*he-gt*de-et*ne,I},$e.add=function(I,z,M){return I[0]=z[0]+M[0],I[1]=z[1]+M[1],I[2]=z[2]+M[2],I[3]=z[3]+M[3],I[4]=z[4]+M[4],I[5]=z[5]+M[5],I[6]=z[6]+M[6],I[7]=z[7]+M[7],I},$e.multiply=O,$e.scale=function(I,z,M){return I[0]=z[0]*M,I[1]=z[1]*M,I[2]=z[2]*M,I[3]=z[3]*M,I[4]=z[4]*M,I[5]=z[5]*M,I[6]=z[6]*M,I[7]=z[7]*M,I},$e.lerp=function(I,z,M,B){var J=1-B;return D(z,M)<0&&(B=-B),I[0]=z[0]*J+M[0]*B,I[1]=z[1]*J+M[1]*B,I[2]=z[2]*J+M[2]*B,I[3]=z[3]*J+M[3]*B,I[4]=z[4]*J+M[4]*B,I[5]=z[5]*J+M[5]*B,I[6]=z[6]*J+M[6]*B,I[7]=z[7]*J+M[7]*B,I},$e.invert=function(I,z){var M=V(z);return I[0]=-z[0]/M,I[1]=-z[1]/M,I[2]=-z[2]/M,I[3]=z[3]/M,I[4]=-z[4]/M,I[5]=-z[5]/M,I[6]=-z[6]/M,I[7]=z[7]/M,I},$e.conjugate=function(I,z){return I[0]=-z[0],I[1]=-z[1],I[2]=-z[2],I[3]=z[3],I[4]=-z[4],I[5]=-z[5],I[6]=-z[6],I[7]=z[7],I},$e.normalize=function(I,z){var M=V(z);if(M>0){M=Math.sqrt(M);var B=z[0]/M,J=z[1]/M,te=z[2]/M,he=z[3]/M,de=z[4],ne=z[5],Ae=z[6],xe=z[7],Oe=B*de+J*ne+te*Ae+he*xe;I[0]=B,I[1]=J,I[2]=te,I[3]=he,I[4]=(de-B*Oe)/M,I[5]=(ne-J*Oe)/M,I[6]=(Ae-te*Oe)/M,I[7]=(xe-he*Oe)/M}return I},$e.str=function(I){return"quat2("+I[0]+", "+I[1]+", "+I[2]+", "+I[3]+", "+I[4]+", "+I[5]+", "+I[6]+", "+I[7]+")"},$e.exactEquals=function(I,z){return I[0]===z[0]&&I[1]===z[1]&&I[2]===z[2]&&I[3]===z[3]&&I[4]===z[4]&&I[5]===z[5]&&I[6]===z[6]&&I[7]===z[7]},$e.equals=function(I,z){var M=I[0],B=I[1],J=I[2],te=I[3],he=I[4],de=I[5],ne=I[6],Ae=I[7],xe=z[0],Oe=z[1],Qe=z[2],Ye=z[3],Xe=z[4],gt=z[5],et=z[6],_t=z[7];return Math.abs(M-xe)<=s.EPSILON*Math.max(1,Math.abs(M),Math.abs(xe))&&Math.abs(B-Oe)<=s.EPSILON*Math.max(1,Math.abs(B),Math.abs(Oe))&&Math.abs(J-Qe)<=s.EPSILON*Math.max(1,Math.abs(J),Math.abs(Qe))&&Math.abs(te-Ye)<=s.EPSILON*Math.max(1,Math.abs(te),Math.abs(Ye))&&Math.abs(he-Xe)<=s.EPSILON*Math.max(1,Math.abs(he),Math.abs(Xe))&&Math.abs(de-gt)<=s.EPSILON*Math.max(1,Math.abs(de),Math.abs(gt))&&Math.abs(ne-et)<=s.EPSILON*Math.max(1,Math.abs(ne),Math.abs(et))&&Math.abs(Ae-_t)<=s.EPSILON*Math.max(1,Math.abs(Ae),Math.abs(_t))},$e.sqrLen=$e.squaredLength=$e.len=$e.length=$e.dot=$e.mul=$e.setReal=$e.getReal=void 0;var s=m(L()),u=m(je()),f=m(Re());function g(I){if(typeof WeakMap!="function")return null;var z=new WeakMap,M=new WeakMap;return(g=function(B){return B?M:z})(I)}function m(I,z){if(I&&I.__esModule)return I;if(I===null||h(I)!=="object"&&typeof I!="function")return{default:I};var M=g(z);if(M&&M.has(I))return M.get(I);var B={},J=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var te in I)if(te!=="default"&&Object.prototype.hasOwnProperty.call(I,te)){var he=J?Object.getOwnPropertyDescriptor(I,te):null;he&&(he.get||he.set)?Object.defineProperty(B,te,he):B[te]=I[te]}return B.default=I,M&&M.set(I,B),B}function _(I,z,M){var B=.5*M[0],J=.5*M[1],te=.5*M[2],he=z[0],de=z[1],ne=z[2],Ae=z[3];return I[0]=he,I[1]=de,I[2]=ne,I[3]=Ae,I[4]=B*Ae+J*ne-te*de,I[5]=J*Ae+te*he-B*ne,I[6]=te*Ae+B*de-J*he,I[7]=-B*he-J*de-te*ne,I}function b(I,z){return I[0]=z[0],I[1]=z[1],I[2]=z[2],I[3]=z[3],I[4]=z[4],I[5]=z[5],I[6]=z[6],I[7]=z[7],I}function O(I,z,M){var B=z[0],J=z[1],te=z[2],he=z[3],de=M[4],ne=M[5],Ae=M[6],xe=M[7],Oe=z[4],Qe=z[5],Ye=z[6],Xe=z[7],gt=M[0],et=M[1],_t=M[2],xt=M[3];return I[0]=B*xt+he*gt+J*_t-te*et,I[1]=J*xt+he*et+te*gt-B*_t,I[2]=te*xt+he*_t+B*et-J*gt,I[3]=he*xt-B*gt-J*et-te*_t,I[4]=B*xe+he*de+J*Ae-te*ne+Oe*xt+Xe*gt+Qe*_t-Ye*et,I[5]=J*xe+he*ne+te*de-B*Ae+Qe*xt+Xe*et+Ye*gt-Oe*_t,I[6]=te*xe+he*Ae+B*ne-J*de+Ye*xt+Xe*_t+Oe*et-Qe*gt,I[7]=he*xe-B*de-J*ne-te*Ae+Xe*xt-Oe*gt-Qe*et-Ye*_t,I}$e.getReal=u.copy,$e.setReal=u.copy,$e.mul=O;var D=u.dot;$e.dot=D;var C=u.length;$e.length=C,$e.len=C;var V=u.squaredLength;return $e.squaredLength=V,$e.sqrLen=V,$e}var qe,be,Te={};function ke(){if(qe)return Te;function h(z){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},h(z)}qe=1,Object.defineProperty(Te,"__esModule",{value:!0}),Te.create=f,Te.clone=function(z){var M=new s.ARRAY_TYPE(2);return M[0]=z[0],M[1]=z[1],M},Te.fromValues=function(z,M){var B=new s.ARRAY_TYPE(2);return B[0]=z,B[1]=M,B},Te.copy=function(z,M){return z[0]=M[0],z[1]=M[1],z},Te.set=function(z,M,B){return z[0]=M,z[1]=B,z},Te.add=function(z,M,B){return z[0]=M[0]+B[0],z[1]=M[1]+B[1],z},Te.subtract=g,Te.multiply=m,Te.divide=_,Te.ceil=function(z,M){return z[0]=Math.ceil(M[0]),z[1]=Math.ceil(M[1]),z},Te.floor=function(z,M){return z[0]=Math.floor(M[0]),z[1]=Math.floor(M[1]),z},Te.min=function(z,M,B){return z[0]=Math.min(M[0],B[0]),z[1]=Math.min(M[1],B[1]),z},Te.max=function(z,M,B){return z[0]=Math.max(M[0],B[0]),z[1]=Math.max(M[1],B[1]),z},Te.round=function(z,M){return z[0]=Math.round(M[0]),z[1]=Math.round(M[1]),z},Te.scale=function(z,M,B){return z[0]=M[0]*B,z[1]=M[1]*B,z},Te.scaleAndAdd=function(z,M,B,J){return z[0]=M[0]+B[0]*J,z[1]=M[1]+B[1]*J,z},Te.distance=b,Te.squaredDistance=O,Te.length=D,Te.squaredLength=C,Te.negate=function(z,M){return z[0]=-M[0],z[1]=-M[1],z},Te.inverse=function(z,M){return z[0]=1/M[0],z[1]=1/M[1],z},Te.normalize=function(z,M){var B=M[0],J=M[1],te=B*B+J*J;return te>0&&(te=1/Math.sqrt(te)),z[0]=M[0]*te,z[1]=M[1]*te,z},Te.dot=function(z,M){return z[0]*M[0]+z[1]*M[1]},Te.cross=function(z,M,B){var J=M[0]*B[1]-M[1]*B[0];return z[0]=z[1]=0,z[2]=J,z},Te.lerp=function(z,M,B,J){var te=M[0],he=M[1];return z[0]=te+J*(B[0]-te),z[1]=he+J*(B[1]-he),z},Te.random=function(z,M){M=M||1;var B=2*s.RANDOM()*Math.PI;return z[0]=Math.cos(B)*M,z[1]=Math.sin(B)*M,z},Te.transformMat2=function(z,M,B){var J=M[0],te=M[1];return z[0]=B[0]*J+B[2]*te,z[1]=B[1]*J+B[3]*te,z},Te.transformMat2d=function(z,M,B){var J=M[0],te=M[1];return z[0]=B[0]*J+B[2]*te+B[4],z[1]=B[1]*J+B[3]*te+B[5],z},Te.transformMat3=function(z,M,B){var J=M[0],te=M[1];return z[0]=B[0]*J+B[3]*te+B[6],z[1]=B[1]*J+B[4]*te+B[7],z},Te.transformMat4=function(z,M,B){var J=M[0],te=M[1];return z[0]=B[0]*J+B[4]*te+B[12],z[1]=B[1]*J+B[5]*te+B[13],z},Te.rotate=function(z,M,B,J){var te=M[0]-B[0],he=M[1]-B[1],de=Math.sin(J),ne=Math.cos(J);return z[0]=te*ne-he*de+B[0],z[1]=te*de+he*ne+B[1],z},Te.angle=function(z,M){var B=z[0],J=z[1],te=M[0],he=M[1],de=Math.sqrt(B*B+J*J)*Math.sqrt(te*te+he*he);return Math.acos(Math.min(Math.max(de&&(B*te+J*he)/de,-1),1))},Te.zero=function(z){return z[0]=0,z[1]=0,z},Te.str=function(z){return"vec2("+z[0]+", "+z[1]+")"},Te.exactEquals=function(z,M){return z[0]===M[0]&&z[1]===M[1]},Te.equals=function(z,M){var B=z[0],J=z[1],te=M[0],he=M[1];return Math.abs(B-te)<=s.EPSILON*Math.max(1,Math.abs(B),Math.abs(te))&&Math.abs(J-he)<=s.EPSILON*Math.max(1,Math.abs(J),Math.abs(he))},Te.forEach=Te.sqrLen=Te.sqrDist=Te.dist=Te.div=Te.mul=Te.sub=Te.len=void 0;var s=function(z,M){if(z&&z.__esModule)return z;if(z===null||h(z)!=="object"&&typeof z!="function")return{default:z};var B=u(void 0);if(B&&B.has(z))return B.get(z);var J={},te=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var he in z)if(he!=="default"&&Object.prototype.hasOwnProperty.call(z,he)){var de=te?Object.getOwnPropertyDescriptor(z,he):null;de&&(de.get||de.set)?Object.defineProperty(J,he,de):J[he]=z[he]}return J.default=z,B&&B.set(z,J),J}(L());function u(z){if(typeof WeakMap!="function")return null;var M=new WeakMap,B=new WeakMap;return(u=function(J){return J?B:M})(z)}function f(){var z=new s.ARRAY_TYPE(2);return s.ARRAY_TYPE!=Float32Array&&(z[0]=0,z[1]=0),z}function g(z,M,B){return z[0]=M[0]-B[0],z[1]=M[1]-B[1],z}function m(z,M,B){return z[0]=M[0]*B[0],z[1]=M[1]*B[1],z}function _(z,M,B){return z[0]=M[0]/B[0],z[1]=M[1]/B[1],z}function b(z,M){return Math.hypot(M[0]-z[0],M[1]-z[1])}function O(z,M){var B=M[0]-z[0],J=M[1]-z[1];return B*B+J*J}function D(z){return Math.hypot(z[0],z[1])}function C(z){var M=z[0],B=z[1];return M*M+B*B}Te.len=D,Te.sub=g,Te.mul=m,Te.div=_,Te.dist=b,Te.sqrDist=O,Te.sqrLen=C;var V,I=(V=f(),function(z,M,B,J,te,he){var de,ne;for(M||(M=2),B||(B=0),ne=J?Math.min(J*M+B,z.length):z.length,de=B;de<ne;de+=M)V[0]=z[de],V[1]=z[de+1],te(V,V,he),z[de]=V[0],z[de+1]=V[1];return z});return Te.forEach=I,Te}function Ge(){if(be)return x;function h(z){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},h(z)}be=1,Object.defineProperty(x,"__esModule",{value:!0}),x.vec4=x.vec3=x.vec2=x.quat2=x.quat=x.mat4=x.mat3=x.mat2d=x.mat2=x.glMatrix=void 0;var s=I(L());x.glMatrix=s;var u=I($());x.mat2=u;var f=I(ee());x.mat2d=f;var g=I(le());x.mat3=g;var m=I(Re());x.mat4=m;var _=I(je());x.quat=_;var b=I(Be());x.quat2=b;var O=I(ke());x.vec2=O;var D=I(_e());x.vec3=D;var C=I(Se());function V(z){if(typeof WeakMap!="function")return null;var M=new WeakMap,B=new WeakMap;return(V=function(J){return J?B:M})(z)}function I(z,M){if(z&&z.__esModule)return z;if(z===null||h(z)!=="object"&&typeof z!="function")return{default:z};var B=V(M);if(B&&B.has(z))return B.get(z);var J={},te=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var he in z)if(he!=="default"&&Object.prototype.hasOwnProperty.call(z,he)){var de=te?Object.getOwnPropertyDescriptor(z,he):null;de&&(de.get||de.set)?Object.defineProperty(J,he,de):J[he]=z[he]}return J.default=z,B&&B.set(z,J),J}return x.vec4=C,x}var at,rt,lt,ot,ve=Ge(),Vt=function(){if(rt)return at;function h(s,u,f,g){this.cx=3*s,this.bx=3*(f-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(g-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=u,this.p2x=f,this.p2y=g}return rt=1,at=h,h.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,u){if(u===void 0&&(u=1e-6),s<0)return 0;if(s>1)return 1;for(var f=s,g=0;g<8;g++){var m=this.sampleCurveX(f)-s;if(Math.abs(m)<u)return f;var _=this.sampleCurveDerivativeX(f);if(Math.abs(_)<1e-6)break;f-=m/_}var b=0,O=1;for(f=s,g=0;g<20&&(m=this.sampleCurveX(f),!(Math.abs(m-s)<u));g++)s>m?b=f:O=f,f=.5*(O-b)+b;return f},solve:function(s,u){return this.sampleCurveY(this.solveCurveX(s,u))}},at}(),Bt=v(Vt);function wa(){if(ot)return lt;function h(s,u){this.x=s,this.y=u}return ot=1,lt=h,h.prototype={clone:function(){return new h(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,u){return this.clone()._rotateAround(s,u)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var u=s.x-this.x,f=s.y-this.y;return u*u+f*f},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,u){return Math.atan2(this.x*u-this.y*s,this.x*s+this.y*u)},_matMult:function(s){var u=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=u,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var u=Math.cos(s),f=Math.sin(s),g=f*this.x+u*this.y;return this.x=u*this.x-f*this.y,this.y=g,this},_rotateAround:function(s,u){var f=Math.cos(s),g=Math.sin(s),m=u.y+g*(this.x-u.x)+f*(this.y-u.y);return this.x=u.x+f*(this.x-u.x)-g*(this.y-u.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},h.convert=function(s){return s instanceof h?s:Array.isArray(s)?new h(s[0],s[1]):s},lt}var It=v(wa());function $t(h,s){if(Array.isArray(h)){if(!Array.isArray(s)||h.length!==s.length)return!1;for(let u=0;u<h.length;u++)if(!$t(h[u],s[u]))return!1;return!0}if(typeof h=="object"&&h!==null&&s!==null){if(typeof s!="object"||Object.keys(h).length!==Object.keys(s).length)return!1;for(const u in h)if(!$t(h[u],s[u]))return!1;return!0}return h===s}const wt=Math.PI/180,hr=180/Math.PI;function ba(h){return h*wt}function Pa(h){return h*hr}const Ja=[[0,0],[1,0],[1,1],[0,1]];function or(h){if(h<=0)return 0;if(h>=1)return 1;const s=h*h,u=s*h;return 4*(h<.5?u:3*(h-s)+u-.75)}function lr(h,s,u,f){const g=new Bt(h,s,u,f);return function(m){return g.solve(m)}}const Tr=lr(.25,.1,.25,1);function ka(h,s,u){return Math.min(u,Math.max(s,h))}function kr(h,s,u){return(u=ka((u-h)/(s-h),0,1))*u*(3-2*u)}function nn(h,s,u){const f=u-s,g=((h-s)%f+f)%f+s;return g===s?u:g}function wn(h,s,u){if(!h.length)return u(null,[]);let f=h.length;const g=new Array(h.length);let m=null;h.forEach((_,b)=>{s(_,(O,D)=>{O&&(m=O),g[b]=D,--f==0&&u(m,g)})})}function un(h,...s){for(const u of s)for(const f in u)h[f]=u[f];return h}let va=1;function $a(){return va++}function la(h){return h<=1?1:Math.pow(2,Math.ceil(Math.log(h)/Math.LN2))}function Ya(h,s){h.forEach(u=>{s[u]&&(s[u]=s[u].bind(s))})}function yr(h,s,u){const f={};for(const g in h)f[g]=s.call(this,h[g],g,h);return f}function Tn(h,s,u){const f={};for(const g in h)s.call(this,h[g],g,h)&&(f[g]=h[g]);return f}function Qr(h){return Array.isArray(h)?h.map(Qr):typeof h=="object"&&h?yr(h,Qr):h}const cn={};function $r(h){cn[h]||(typeof console<"u"&&console.warn(h),cn[h]=!0)}function br(h,s,u){return(u.y-h.y)*(s.x-h.x)>(s.y-h.y)*(u.x-h.x)}function Fi(h){let s=0;for(let u,f,g=0,m=h.length,_=m-1;g<m;_=g++)u=h[g],f=h[_],s+=(f.x-u.x)*(u.y+f.y);return s}function yi([h,s,u]){const f=ba(s+90),g=ba(u);return{x:h*Math.cos(f)*Math.sin(g),y:h*Math.sin(f)*Math.sin(g),z:h*Math.cos(g),azimuthal:s,polar:u}}function oi(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Cs(h){const s={};if(h.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,f,g,m)=>{const _=g||m;return s[f]=!_||_.toLowerCase(),""}),s["max-age"]){const u=parseInt(s["max-age"],10);isNaN(u)?delete s["max-age"]:s["max-age"]=u}return s}let ga=null;function pr(h,s){return[h[4*s],h[4*s+1],h[4*s+2],h[4*s+3]]}function Kr(h,s,u,f){for(;s<u;){const g=s+u>>1;h[g]<f?s=g+1:u=g}return s}function ti(h,s,u,f){for(;s<u;){const g=s+u>>1;h[g]<=f?s=g+1:u=g}return s}function Rn(h){return h>0?1/(1.001-h):1+h}function Zt(h){return h>0?1-1/(1.001-h):-h}const Ne={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!Ne.API_URL)return null;try{const h=new URL(Ne.API_URL);return h.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":h.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function Ie(h){return Ne.API_URL_REGEX.test(h)}function He(h){return Ne.API_SPRITE_REGEX.test(h)}let yt,At,bt,Gt,Et,Wt;function Yt(){return yt==null&&(yt=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),yt}const Kt={now:()=>Gt!==void 0?Gt:performance.now(),setNow(h){Gt=h},restoreNow(){Gt=void 0},frame(h){const s=requestAnimationFrame(h);return{cancel:()=>cancelAnimationFrame(s)}},getImageData(h,s=0){const{width:u,height:f}=h;Et||(Et=document.createElement("canvas"));const g=Et.getContext("2d",{willReadFrequently:!0});if(!g)throw new Error("failed to create canvas 2d context");return(u>Et.width||f>Et.height)&&(Et.width=u,Et.height=f),g.clearRect(-s,-s,u+2*s,f+2*s),g.drawImage(h,0,0,u,f),g.getImageData(-s,-s,u+2*s,f+2*s)},resolveURL:h=>(At||(At=document.createElement("a")),At.href=h,At.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(bt==null&&(bt=window.matchMedia("(prefers-reduced-motion: reduce)")),bt.matches)},hasCanvasFingerprintNoise(){if(Wt!==void 0)return Wt;if(!Yt())return Wt=!1,!1;const h=new OffscreenCanvas(85,1),s=h.getContext("2d",{willReadFrequently:!0});let u=0;for(let g=0;g<h.width;++g)s.fillStyle=`rgba(${u++},${u++},${u++}, 255)`,s.fillRect(g,0,1,1);const f=s.getImageData(0,0,h.width,h.height);u=0;for(let g=0;g<f.data.length;++g)if(g%4!=3&&u++!==f.data[g])return Wt=!0,!0;return Wt=!1,!1}};function Ca(h,s){const u=h.indexOf("?");if(u<0)return`${h}?${new URLSearchParams(s).toString()}`;const f=new URLSearchParams(h.slice(u));for(const g in s)f.set(g,s[g]);return`${h.slice(0,u)}?${f.toString()}`}function Ia(h,s={persistentParams:[]}){const u=h.indexOf("?");if(u<0)return h;const f=new URLSearchParams,g=new URLSearchParams(h.slice(u));for(const _ of s.persistentParams){const b=g.get(_);b&&f.set(_,b)}const m=f.toString();return`${h.slice(0,u)}${m.length>0?`?${m}`:""}`}const Ga="mapbox-tiles";let Cr=500,Dr=50;const Mr=["language","worldview","jobid"];let Hr,Un;function ri(){try{return caches}catch{}}function Yr(){const h=ri();h&&Hr==null&&(Hr=h.open(Ga))}let Cn=1/0;const Xr={supported:!1,testSupport:function(h){!Xi&&ki&&(Ps?Bo(h):jn=h)}};let jn,ki,Xi=!1,Ps=!1;const Es=typeof self<"u"?self:{};function Bo(h){const s=h.createTexture();h.bindTexture(h.TEXTURE_2D,s);try{if(h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,ki),h.isContextLost())return;Xr.supported=!0}catch{}h.deleteTexture(s),Xi=!0}Es.document&&(ki=Es.document.createElement("img"),ki.onload=function(){jn&&Bo(jn),jn=null,Ps=!0},ki.onerror=function(){Xi=!0,jn=null},ki.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Ns={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Iconset:"Iconset",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(Ns);class $s extends Error{constructor(s,u,f){u===401&&Ie(f)&&(s+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(s),this.status=u,this.url=f}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const pc=oi()?()=>self.worker&&self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,tl=function(h,s){if(!(/^file:/.test(u=h.url)||/^file:/.test(pc())&&!/^\w+:/.test(u))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(f,g){const m=new AbortController,_=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,referrer:pc(),referrerPolicy:f.referrerPolicy,signal:m.signal});let b=!1,O=!1;const D=(C=_.url).indexOf("sku=")>0&&Ie(C);var C;f.type==="json"&&_.headers.set("Accept","application/json");const V=(z,M,B)=>{if(O)return;if(z&&z.message!=="SecurityError"&&$r(z.toString()),M&&B)return I(M);const J=Date.now();fetch(_).then(te=>{if(te.ok){const he=D?te.clone():null;return I(te,he,J)}return g(new $s(te.statusText,te.status,f.url))}).catch(te=>{te.name!=="AbortError"&&g(new Error(`${te.message} ${f.url}`))})},I=(z,M,B)=>{(f.type==="arrayBuffer"?z.arrayBuffer():f.type==="json"?z.json():z.text()).then(J=>{O||(M&&B&&function(te,he,de){if(Yr(),Hr==null)return;const ne=Cs(he.headers.get("Cache-Control")||"");if(ne["no-store"])return;const Ae={status:he.status,statusText:he.statusText,headers:new Headers};he.headers.forEach((Qe,Ye)=>Ae.headers.set(Ye,Qe)),ne["max-age"]&&Ae.headers.set("Expires",new Date(de+1e3*ne["max-age"]).toUTCString());const xe=Ae.headers.get("Expires");if(!xe||new Date(xe).getTime()-de<42e4)return;let Oe=Ia(te.url,{persistentParams:Mr});if(he.status===206){const Qe=te.headers.get("Range");if(!Qe)return;Ae.status=200,Oe=Ca(Oe,{range:Qe})}(function(Qe,Ye){if(Un===void 0)try{new Response(new ReadableStream),Un=!0}catch{Un=!1}Un?Ye(Qe.body):Qe.blob().then(Ye)})(he,Qe=>{const Ye=new Response((Xe=he.status)!==200&&Xe!==404&&[101,103,204,205,304].includes(Xe)?null:Qe,Ae);var Xe;Yr(),Hr!=null&&Hr.then(gt=>gt.put(Oe,Ye)).catch(gt=>$r(gt.message))})}(_,M,B),b=!0,g(null,J,z.headers.get("Cache-Control"),z.headers.get("Expires")))}).catch(J=>{O||g(new Error(J.message))})};return D?function(z,M){if(Yr(),Hr==null)return M(null);Hr.then(B=>{let J=Ia(z.url,{persistentParams:Mr});const te=z.headers.get("Range");te&&(J=Ca(J,{range:te})),B.match(J).then(he=>{const de=function(ne){if(!ne)return!1;const Ae=new Date(ne.headers.get("Expires")||0),xe=Cs(ne.headers.get("Cache-Control")||"");return Ae>Date.now()&&!xe["no-cache"]}(he);B.delete(J),de&&B.put(J,he.clone()),M(null,he,de)}).catch(M)}).catch(M)}(_,V):V(null,null),{cancel:()=>{O=!0,b||m.abort()}}}(h,s);if(oi()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",h,s,void 0,!0)}var u;return function(f,g){const m=new XMLHttpRequest;m.open(f.method||"GET",f.url,!0),f.type==="arrayBuffer"&&(m.responseType="arraybuffer");for(const _ in f.headers)m.setRequestHeader(_,f.headers[_]);return f.type==="json"&&(m.responseType="text",m.setRequestHeader("Accept","application/json")),m.withCredentials=f.credentials==="include",m.onerror=()=>{g(new Error(m.statusText))},m.onload=()=>{if((m.status>=200&&m.status<300||m.status===0)&&m.response!==null){let _=m.response;if(f.type==="json")try{_=JSON.parse(m.response)}catch(b){return g(b)}g(null,_,m.getResponseHeader("Cache-Control"),m.getResponseHeader("Expires"))}else g(new $s(m.statusText,m.status,f.url))},m.send(f.body),{cancel:()=>m.abort()}}(h,s)},Ui=function(h,s){return tl(un(h,{type:"arrayBuffer"}),s)};function Xl(h){const s=document.createElement("a");return s.href=h,s.protocol===location.protocol&&s.host===location.host}const jo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Pd,kc;Pd=[],kc=0;const fh=function(h,s){if(Xr.supported&&(h.headers||(h.headers={}),h.headers.accept="image/webp,*/*"),kc>=Ne.MAX_PARALLEL_IMAGE_REQUESTS){const m={requestParameters:h,callback:s,cancelled:!1,cancel(){this.cancelled=!0}};return Pd.push(m),m}kc++;let u=!1;const f=()=>{if(!u)for(u=!0,kc--;Pd.length&&kc<Ne.MAX_PARALLEL_IMAGE_REQUESTS;){const m=Pd.shift(),{requestParameters:_,callback:b,cancelled:O}=m;O||(m.cancel=fh(_,b).cancel)}},g=Ui(h,(m,_,b,O)=>{f(),m?s(m):_&&(self.createImageBitmap?function(D,C){const V=new Blob([new Uint8Array(D)],{type:"image/png"});createImageBitmap(V).then(I=>{C(null,I)}).catch(I=>{C(new Error(`Could not load image because of ${I.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(_,(D,C)=>s(D,C,b,O)):function(D,C){const V=new Image;V.onload=()=>{C(null,V),URL.revokeObjectURL(V.src),V.onload=null,requestAnimationFrame(()=>{V.src=jo})},V.onerror=()=>C(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const I=new Blob([new Uint8Array(D)],{type:"image/png"});V.src=D.byteLength?URL.createObjectURL(I):jo}(_,(D,C)=>s(D,C,b,O)))});return{cancel:()=>{g.cancel(),f()}}};var wu,Uc,Al,no={exports:{}},Go={exports:{}},Jl={exports:{}},Ru=function(){if(Al)return no.exports;Al=1;var h=(wu||(wu=1,Go.exports=function(u,f){var g,m,_,b,O,D,C,V;for(m=u.length-(g=3&u.length),_=f,O=3432918353,D=461845907,V=0;V<m;)C=255&u.charCodeAt(V)|(255&u.charCodeAt(++V))<<8|(255&u.charCodeAt(++V))<<16|(255&u.charCodeAt(++V))<<24,++V,_=27492+(65535&(b=5*(65535&(_=(_^=C=(65535&(C=(C=(65535&C)*O+(((C>>>16)*O&65535)<<16)&4294967295)<<15|C>>>17))*D+(((C>>>16)*D&65535)<<16)&4294967295)<<13|_>>>19))+((5*(_>>>16)&65535)<<16)&4294967295))+((58964+(b>>>16)&65535)<<16);switch(C=0,g){case 3:C^=(255&u.charCodeAt(V+2))<<16;case 2:C^=(255&u.charCodeAt(V+1))<<8;case 1:_^=C=(65535&(C=(C=(65535&(C^=255&u.charCodeAt(V)))*O+(((C>>>16)*O&65535)<<16)&4294967295)<<15|C>>>17))*D+(((C>>>16)*D&65535)<<16)&4294967295}return _^=u.length,_=2246822507*(65535&(_^=_>>>16))+((2246822507*(_>>>16)&65535)<<16)&4294967295,_=3266489909*(65535&(_^=_>>>13))+((3266489909*(_>>>16)&65535)<<16)&4294967295,(_^=_>>>16)>>>0}),Go.exports),s=(Uc||(Uc=1,Jl.exports=function(u,f){for(var g,m=u.length,_=f^m,b=0;m>=4;)g=1540483477*(65535&(g=255&u.charCodeAt(b)|(255&u.charCodeAt(++b))<<8|(255&u.charCodeAt(++b))<<16|(255&u.charCodeAt(++b))<<24))+((1540483477*(g>>>16)&65535)<<16),_=1540483477*(65535&_)+((1540483477*(_>>>16)&65535)<<16)^(g=1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16)),m-=4,++b;switch(m){case 3:_^=(255&u.charCodeAt(b+2))<<16;case 2:_^=(255&u.charCodeAt(b+1))<<8;case 1:_=1540483477*(65535&(_^=255&u.charCodeAt(b)))+((1540483477*(_>>>16)&65535)<<16)}return _=1540483477*(65535&(_^=_>>>13))+((1540483477*(_>>>16)&65535)<<16),(_^=_>>>15)>>>0}),Jl.exports);return no.exports=h,no.exports.murmur3=h,no.exports.murmur2=s,no.exports}(),mo=v(Ru);class Zo{constructor(s,...u){un(this,u[0]||{}),this.type=s}}class Ed extends Zo{constructor(s,u={}){super("error",un({error:s},u))}}function Ku(h,s,u){u[h]&&u[h].indexOf(s)!==-1||(u[h]=u[h]||[],u[h].push(s))}function Rf(h,s,u){if(u&&u[h]){const f=u[h].indexOf(s);f!==-1&&u[h].splice(f,1)}}class Ql{on(s,u){return this._listeners=this._listeners||{},Ku(s,u,this._listeners),this}off(s,u){return Rf(s,u,this._listeners),Rf(s,u,this._oneTimeListeners),this}once(s,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},Ku(s,u,this._oneTimeListeners),this):new Promise(f=>{this.once(s,f)})}fire(s,u){const f=typeof s=="string"?new Zo(s,u):s,g=f.type;if(this.listens(g)){f.target=this;const m=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];for(const O of m)O.call(this,f);const _=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];for(const O of _)Rf(g,O,this._oneTimeListeners),O.call(this,f);const b=this._eventedParent;b&&(un(f,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),b.fire(f))}else f instanceof Ed&&console.error(f.error);return this}listens(s){return!!(this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s))}setEventedParent(s,u){return this._eventedParent=s,this._eventedParentData=u,this}}class qo{constructor(s){typeof s=="string"?this.name=s:(this.name=s.name,this.iconsetId=s.iconsetId)}static from(s){return new qo(s)}static toString(s){return s.iconsetId?`${s.name}${s.iconsetId}`:s.name}static parse(s){const[u,f]=s.split("");return new qo({name:u,iconsetId:f})}static isEqual(s,u){return s.name===u.name&&s.iconsetId===u.iconsetId}toString(){return qo.toString(this)}serialize(){return{name:this.name,iconsetId:this.iconsetId}}}var Wu,ph={},al=function(){if(Wu)return ph;Wu=1;var h={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function s(m){return(m=Math.round(m))<0?0:m>255?255:m}function u(m){return s(m[m.length-1]==="%"?parseFloat(m)/100*255:parseInt(m))}function f(m){return(_=m[m.length-1]==="%"?parseFloat(m)/100:parseFloat(m))<0?0:_>1?1:_;var _}function g(m,_,b){return b<0?b+=1:b>1&&(b-=1),6*b<1?m+(_-m)*b*6:2*b<1?_:3*b<2?m+(_-m)*(2/3-b)*6:m}try{ph.parseCSSColor=function(m){var _,b=m.replace(/ /g,"").toLowerCase();if(b in h)return h[b].slice();if(b[0]==="#")return b.length===4?(_=parseInt(b.substr(1),16))>=0&&_<=4095?[(3840&_)>>4|(3840&_)>>8,240&_|(240&_)>>4,15&_|(15&_)<<4,1]:null:b.length===7&&(_=parseInt(b.substr(1),16))>=0&&_<=16777215?[(16711680&_)>>16,(65280&_)>>8,255&_,1]:null;var O=b.indexOf("("),D=b.indexOf(")");if(O!==-1&&D+1===b.length){var C=b.substr(0,O),V=b.substr(O+1,D-(O+1)).split(","),I=1;switch(C){case"rgba":if(V.length!==4)return null;I=f(V.pop());case"rgb":return V.length!==3?null:[u(V[0]),u(V[1]),u(V[2]),I];case"hsla":if(V.length!==4)return null;I=f(V.pop());case"hsl":if(V.length!==3)return null;var z=(parseFloat(V[0])%360+360)%360/360,M=f(V[1]),B=f(V[2]),J=B<=.5?B*(M+1):B+M-B*M,te=2*B-J;return[s(255*g(te,J,z+1/3)),s(255*g(te,J,z)),s(255*g(te,J,z-1/3)),I];default:return null}}return null}}catch{}return ph}();class zn{constructor(s,u,f,g=1){this.r=s,this.g=u,this.b=f,this.a=g}static parse(s){if(!s)return;if(s instanceof zn)return s;if(typeof s!="string")return;const u=al.parseCSSColor(s);return u?new zn(u[0]/255*u[3],u[1]/255*u[3],u[2]/255*u[3],u[3]):void 0}toStringPremultipliedAlpha(){const[s,u,f,g]=this.a===0?[0,0,0,0]:[255*this.r/this.a,255*this.g/this.a,255*this.b/this.a,this.a];return`rgba(${Math.round(s)},${Math.round(u)},${Math.round(f)},${g})`}toString(){const[s,u,f,g]=[this.r,this.g,this.b,this.a];return`rgba(${Math.round(255*s)},${Math.round(255*u)},${Math.round(255*f)},${g})`}toRenderColor(s){const{r:u,g:f,b:g,a:m}=this;return new go(s,u,f,g,m)}clone(){return new zn(this.r,this.g,this.b,this.a)}}class go{constructor(s,u,f,g,m){if(s){const _=s.image.height,b=_*_;u=m===0?0:u/m*(_-1),f=m===0?0:f/m*(_-1),g=m===0?0:g/m*(_-1);const O=Math.floor(u),D=Math.floor(f),C=Math.floor(g),V=Math.ceil(u),I=Math.ceil(f),z=Math.ceil(g),M=u-O,B=f-D,J=g-C,te=s.image.data,he=4*(O+D*b+C*_),de=4*(O+D*b+z*_),ne=4*(O+I*b+C*_),Ae=4*(O+I*b+z*_),xe=4*(V+D*b+C*_),Oe=4*(V+D*b+z*_),Qe=4*(V+I*b+C*_),Ye=4*(V+I*b+z*_);if(he<0||Ye>=te.length)throw new Error("out of range");this.r=gr(gr(gr(te[he],te[de],J),gr(te[ne],te[Ae],J),B),gr(gr(te[xe],te[Oe],J),gr(te[Qe],te[Ye],J),B),M)/255*m,this.g=gr(gr(gr(te[he+1],te[de+1],J),gr(te[ne+1],te[Ae+1],J),B),gr(gr(te[xe+1],te[Oe+1],J),gr(te[Qe+1],te[Ye+1],J),B),M)/255*m,this.b=gr(gr(gr(te[he+2],te[de+2],J),gr(te[ne+2],te[Ae+2],J),B),gr(gr(te[xe+2],te[Oe+2],J),gr(te[Qe+2],te[Ye+2],J),B),M)/255*m,this.a=m}else this.r=u,this.g=f,this.b=g,this.a=m}toArray(){const{r:s,g:u,b:f,a:g}=this;return g===0?[0,0,0,0]:[255*s/g,255*u/g,255*f/g,g]}toHslaArray(){if(this.a===0)return[0,0,0,0];const{r:s,g:u,b:f,a:g}=this,m=Math.min(Math.max(s/g,0),1),_=Math.min(Math.max(u/g,0),1),b=Math.min(Math.max(f/g,0),1),O=Math.min(m,_,b),D=Math.max(m,_,b),C=(O+D)/2;if(O===D)return[0,0,100*C,g];const V=D-O,I=C>.5?V/(2-D-O):V/(D+O);let z=0;return D===m?z=(_-b)/V+(_<b?6:0):D===_?z=(b-m)/V+2:D===b&&(z=(m-_)/V+4),z*=60,[Math.min(Math.max(z,0),360),Math.min(Math.max(100*I,0),100),Math.min(Math.max(100*C,0),100),g]}toArray01(){const{r:s,g:u,b:f,a:g}=this;return g===0?[0,0,0,0]:[s/g,u/g,f/g,g]}toArray01Scaled(s){const{r:u,g:f,b:g,a:m}=this;return m===0?[0,0,0]:[u/m*s,f/m*s,g/m*s]}toArray01PremultipliedAlpha(){const{r:s,g:u,b:f,a:g}=this;return[s,u,f,g]}toArray01Linear(){const{r:s,g:u,b:f,a:g}=this;return g===0?[0,0,0,0]:[Math.pow(s/g,2.2),Math.pow(u/g,2.2),Math.pow(f/g,2.2),g]}}function gr(h,s,u){return h*(1-u)+s*u}function Bc(h,s,u){return h.map((f,g)=>gr(f,s[g],u))}function Sn(h){return h*h*h*h*h}zn.black=new zn(0,0,0,1),zn.white=new zn(1,1,1,1),zn.transparent=new zn(0,0,0,0),zn.red=new zn(1,0,0,1),zn.blue=new zn(0,0,1,1);var mh=Object.freeze({__proto__:null,array:Bc,color:function(h,s,u){return new zn(gr(h.r,s.r,u),gr(h.g,s.g,u),gr(h.b,s.b,u),gr(h.a,s.a,u))},easeIn:Sn,number:gr});function Nn(h,...s){for(const u of s)for(const f in u)h[f]=u[f];return h}class Ks extends Error{constructor(s,u){super(u),this.message=u,this.key=s}}class mc{constructor(s,u=[]){this.parent=s,this.bindings={};for(const[f,g]of u)this.bindings[f]=g}concat(s){return new mc(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}const gc={kind:"null"},tr={kind:"number"},dn={kind:"string"},bn={kind:"boolean"},Ws={kind:"color"},Nd={kind:"object"},yn={kind:"value"},Ho={kind:"collator"},Tu={kind:"formatted"},Os={kind:"resolvedImage"};function Ki(h,s){return{kind:"array",itemType:h,N:s}}function Di(h){if(h.kind==="array"){const s=Di(h.itemType);return typeof h.N=="number"?`array<${s}, ${h.N}>`:h.itemType.kind==="value"?"array":`array<${s}>`}return h.kind}const yo=[gc,tr,dn,bn,Ws,Tu,Nd,Ki(yn),Os];function Od(h,s){if(s.kind==="error")return null;if(h.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!Od(h.itemType,s.itemType))&&(typeof h.N!="number"||h.N===s.N))return null}else{if(h.kind===s.kind)return null;if(h.kind==="value"){for(const u of yo)if(!Od(u,s))return null}}return`Expected ${Di(h)} but found ${Di(s)} instead.`}function gh(h,s){return s.some(u=>u.kind===h.kind)}function yc(h,s){return s.some(u=>u==="null"?h===null:u==="array"?Array.isArray(h):u==="object"?h&&!Array.isArray(h)&&typeof h=="object":u===typeof h)}class Ac{constructor(s,u,f){this.sensitivity=s?u?"variant":"case":u?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,u){return this.collator.compare(s,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class rl{constructor(s,u,f,g,m){this.text=s.normalize?s.normalize():s,this.image=u,this.scale=f,this.fontStack=g,this.textColor=m}}class ys{constructor(s){this.sections=s}static fromString(s){return new ys([new rl(s,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(s=>s.text.length!==0||!!s.image&&s.image.hasPrimary())}static factory(s){return s instanceof ys?s:ys.fromString(s)}toString(){return this.sections.length===0?"":this.sections.map(s=>s.text).join("")}serialize(){const s=["format"];for(const u of this.sections){if(u.image){const g=u.image.getPrimary().id.toString();s.push(["image",g]);continue}s.push(u.text);const f={};u.fontStack&&(f["text-font"]=["literal",u.fontStack.split(",")]),u.scale&&(f["font-scale"]=u.scale),u.textColor&&(f["text-color"]=["rgba"].concat(u.textColor.toRenderColor(null).toArray())),s.push(f)}return s}}class Yu{constructor(s,u={}){if(this.id=qo.from(s),this.options=Object.assign({},u),u.transform){const{a:f,b:g,c:m,d:_,e:b,f:O}=u.transform;this.options.transform=new DOMMatrix([f,g,m,_,b,O])}else this.options.transform=new DOMMatrix([1,0,0,1,0,0])}toString(){const{a:s,b:u,c:f,d:g,e:m,f:_}=this.options.transform;return JSON.stringify({name:this.id.name,iconsetId:this.id.iconsetId,params:this.options.params,transform:{a:s,b:u,c:f,d:g,e:m,f:_}})}static parse(s){let u,f,g,m;try{({name:u,iconsetId:f,params:g,transform:m}=JSON.parse(s)||{})}catch{return null}if(!u)return null;const{a:_,b,c:O,d:D,e:C,f:V}=m||{};return new Yu({name:u,iconsetId:f},{params:g,transform:new DOMMatrix([_,b,O,D,C,V])})}scaleSelf(s){return this.options.transform.scaleSelf(s),this}}class Vs{constructor(s,u,f,g,m=!1){this.primaryId=qo.from(s),this.primaryOptions=u,f&&(this.secondaryId=qo.from(f)),this.secondaryOptions=g,this.available=m}toString(){return this.primaryId&&this.secondaryId?`[${this.primaryId.name},${this.secondaryId.name}]`:this.primaryId.name}hasPrimary(){return!!this.primaryId}getPrimary(){return new Yu(this.primaryId,this.primaryOptions)}hasSecondary(){return!!this.secondaryId}getSecondary(){return this.secondaryId?new Yu(this.secondaryId,this.secondaryOptions):null}static from(s){return typeof s=="string"?Vs.build({name:s}):s}static build(s,u,f,g){return!s||typeof s=="object"&&!("name"in s)?null:new Vs(s,f,u,g)}}function zl(h,s,u,f){return typeof h=="number"&&h>=0&&h<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof u=="number"&&u>=0&&u<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[h,s,u,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[h,s,u,f]:[h,s,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function nl(h){if(h===null||typeof h=="string"||typeof h=="boolean"||typeof h=="number"||h instanceof zn||h instanceof Ac||h instanceof ys||h instanceof Vs)return!0;if(Array.isArray(h)){for(const s of h)if(!nl(s))return!1;return!0}if(typeof h=="object"){for(const s in h)if(!nl(h[s]))return!1;return!0}return!1}function Ji(h){if(h===null)return gc;if(typeof h=="string")return dn;if(typeof h=="boolean")return bn;if(typeof h=="number")return tr;if(h instanceof zn)return Ws;if(h instanceof Ac)return Ho;if(h instanceof ys)return Tu;if(h instanceof Vs)return Os;if(Array.isArray(h)){const s=h.length;let u;for(const f of h){const g=Ji(f);if(u){if(u===g)continue;u=yn;break}u=g}return Ki(u||yn,s)}return Nd}function Ys(h){const s=typeof h;return h===null?"":s==="string"||s==="number"||s==="boolean"?String(h):h instanceof zn?h.toStringPremultipliedAlpha():h instanceof ys||h instanceof Vs?h.toString():JSON.stringify(h)}class eu{constructor(s,u){this.type=s,this.value=u}static parse(s,u){if(s.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!nl(s[1]))return u.error("invalid value");const f=s[1];let g=Ji(f);const m=u.expectedType;return g.kind!=="array"||g.N!==0||!m||m.kind!=="array"||typeof m.N=="number"&&m.N!==0||(g=m),new eu(g,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof zn?["rgba"].concat(this.value.toRenderColor(null).toArray()):this.value instanceof ys?this.value.serialize():this.value}}class hs{constructor(s){this.name="ExpressionEvaluationError",this.message=s}toJSON(){return this.message}}const Bh={string:dn,number:tr,boolean:bn,object:Nd};class $o{constructor(s,u){this.type=s,this.args=u}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");let f,g=1;const m=s[0];if(m==="array"){let b,O;if(s.length>2){const D=s[1];if(typeof D!="string"||!(D in Bh)||D==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);b=Bh[D],g++}else b=yn;if(s.length>3){if(s[2]!==null&&(typeof s[2]!="number"||s[2]<0||s[2]!==Math.floor(s[2])))return u.error('The length argument to "array" must be a positive integer literal',2);O=s[2],g++}f=Ki(b,O)}else f=Bh[m];const _=[];for(;g<s.length;g++){const b=u.parse(s[g],g,yn);if(!b)return null;_.push(b)}return new $o(f,_)}evaluate(s){for(let u=0;u<this.args.length;u++){const f=this.args[u].evaluate(s);if(!Od(this.type,Ji(f)))return f;if(u===this.args.length-1)throw new hs(`The expression ${JSON.stringify(this.args[u].serialize())} evaluated to ${Di(Ji(f))} but was expected to be of type ${Di(this.type)}.`)}return null}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}serialize(){const s=this.type,u=[s.kind];if(s.kind==="array"){const f=s.itemType;if(f.kind==="string"||f.kind==="number"||f.kind==="boolean"){u.push(f.kind);const g=s.N;(typeof g=="number"||this.args.length>1)&&u.push(g)}}return u.concat(this.args.map(f=>f.serialize()))}}class Vd{constructor(s){this.type=Tu,this.sections=s}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");const f=s[1];if(!Array.isArray(f)&&typeof f=="object")return u.error("First argument must be an image or text section.");const g=[];let m=!1;for(let _=1;_<=s.length-1;++_){const b=s[_];if(m&&typeof b=="object"&&!Array.isArray(b)){m=!1;let O=null;if(b["font-scale"]&&(O=u.parseObjectValue(b["font-scale"],_,"font-scale",tr),!O))return null;let D=null;if(b["text-font"]&&(D=u.parseObjectValue(b["text-font"],_,"text-font",Ki(dn)),!D))return null;let C=null;if(b["text-color"]&&(C=u.parseObjectValue(b["text-color"],_,"text-color",Ws),!C))return null;const V=g[g.length-1];V.scale=O,V.font=D,V.textColor=C}else{const O=u.parse(s[_],_,yn);if(!O)return null;const D=O.type.kind;if(D!=="string"&&D!=="value"&&D!=="null"&&D!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,g.push({content:O,scale:null,font:null,textColor:null})}}return new Vd(g)}evaluate(s){return new ys(this.sections.map(u=>{const f=u.content.evaluate(s);return Ji(f)===Os?new rl("",f,null,null,null):new rl(Ys(f),null,u.scale?u.scale.evaluate(s):null,u.font?u.font.evaluate(s).join(","):null,u.textColor?u.textColor.evaluate(s):null)}))}eachChild(s){for(const u of this.sections)s(u.content),u.scale&&s(u.scale),u.font&&s(u.font),u.textColor&&s(u.textColor)}outputDefined(){return!1}serialize(){const s=["format"];for(const u of this.sections){s.push(u.content.serialize());const f={};u.scale&&(f["font-scale"]=u.scale.serialize()),u.font&&(f["text-font"]=u.font.serialize()),u.textColor&&(f["text-color"]=u.textColor.serialize()),s.push(f)}return s}}class Cu{constructor(s,u,f,g){this._imageWarnHistory={},this.type=Os,this.namePrimary=s,this.nameSecondary=u,f&&(this.paramsPrimary=f.params,this.iconsetIdPrimary=f.iconset?f.iconset.id:void 0),g&&(this.paramsSecondary=g.params,this.iconsetIdSecondary=g.iconset?g.iconset.id:void 0)}static parse(s,u){if(s.length<2)return u.error("Expected two or more arguments.");let f=1;const g=[];function m(){if(f<s.length){const b=u.parse(s[f],f++,dn);return b?(g.push({image:b,options:{}}),!0):(u.error(g.length?"Secondary image variant is not a string.":"No image name provided."),!1)}return!0}function _(){if(f<s.length){const O=s[f];if((b=O)===null||typeof b!="object"||Array.isArray(b))return!0;const D=O.params,C=O.iconset,V=u.concat(f);if(!D&&!C)return f++,!0;if(D){if(typeof D!="object"||D.constructor!==Object)return V.error('Image options "params" should be an object'),!1;const I={},z=V.concat(void 0,"params");for(const M in D){if(!M)return z.error("Image parameter name should be non-empty"),!1;const B=z.concat(void 0,M).parse(D[M],void 0,Ws,void 0,{typeAnnotation:"coerce"});if(!B)return!1;I[M]=B}g[g.length-1].options.params=I}if(C){if(typeof C!="object"||C.constructor!==Object)return V.error('Image options "iconset" should be an object'),!1;if(!C.id)return V.error('Image options "iconset" should have an "id" property'),!1;g[g.length-1].options.iconset=C}return f++,!0}var b;return!0}for(let b=0;b<2;b++)if(!m()||!_())return;return new Cu(g[0].image,g[1]?g[1].image:void 0,g[0].options,g[1]?g[1].options:void 0)}evaluateParams(s,u){const f={};if(u){for(const g in u)if(u[g])try{f[g]=u[g].evaluate(s)}catch{continue}if(Object.keys(f).length!==0)return{params:f}}}evaluate(s){const u={name:this.namePrimary.evaluate(s),iconsetId:this.iconsetIdPrimary},f=this.nameSecondary?{name:this.nameSecondary.evaluate(s),iconsetId:this.iconsetIdSecondary}:void 0,g=Vs.build(u,f,this.paramsPrimary?this.evaluateParams(s,this.paramsPrimary):void 0,this.paramsSecondary?this.evaluateParams(s,this.paramsSecondary):void 0);if(g&&s.availableImages){const m=g.getPrimary().id;if(g.available=s.availableImages.some(_=>qo.isEqual(_,m)),g.available){const _=g.getSecondary()?g.getSecondary().id:null;_&&(g.available=s.availableImages.some(b=>qo.isEqual(b,_)))}}return g}eachChild(s){if(s(this.namePrimary),this.paramsPrimary)for(const u in this.paramsPrimary)this.paramsPrimary[u]&&s(this.paramsPrimary[u]);if(this.nameSecondary&&(s(this.nameSecondary),this.paramsSecondary))for(const u in this.paramsSecondary)this.paramsSecondary[u]&&s(this.paramsSecondary[u])}outputDefined(){return!1}serializeOptions(s,u){const f={};if(u&&(f.iconset={id:u}),s){f.params={};for(const g in s)s[g]&&(f.params[g]=s[g].serialize())}return Object.keys(f).length>0?f:void 0}serialize(){const s=["image",this.namePrimary.serialize()];if(this.paramsPrimary||this.iconsetIdPrimary){const u=this.serializeOptions(this.paramsPrimary,this.iconsetIdPrimary);u&&s.push(u)}if(this.nameSecondary&&(s.push(this.nameSecondary.serialize()),this.paramsSecondary||this.iconsetIdSecondary)){const u=this.serializeOptions(this.paramsSecondary,this.iconsetIdSecondary);u&&s.push(u)}return s}}function Su(h){return h instanceof Number?"number":h instanceof String?"string":h instanceof Boolean?"boolean":Array.isArray(h)?"array":h===null?"null":typeof h}const sp={"to-boolean":bn,"to-color":Ws,"to-number":tr,"to-string":dn};class tu{constructor(s,u){this.type=s,this.args=u}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");const f=s[0],g=[];let m=gc;if(f==="to-array"){if(!Array.isArray(s[1]))return null;const _=s[1].length;if(u.expectedType){if(u.expectedType.kind!=="array")return u.error(`Expected ${u.expectedType.kind} but found array.`);m=Ki(u.expectedType.itemType,_)}else{if(!(_>0&&nl(s[1][0])))return null;m=Ki(Ji(s[1][0]),_)}for(let b=0;b<_;b++){const O=s[1][b];let D;if(Su(O)==="array")D=u.parse(O,void 0,m.itemType);else{const C=Su(O);if(C!==m.itemType.kind)return u.error(`Expected ${m.itemType.kind} but found ${C}.`);D=u.registry.literal.parse(["literal",O===void 0?null:O],u)}if(!D)return null;g.push(D)}}else{if((f==="to-boolean"||f==="to-string")&&s.length!==2)return u.error("Expected one argument.");m=sp[f];for(let _=1;_<s.length;_++){const b=u.parse(s[_],_,yn);if(!b)return null;g.push(b)}}return new tu(m,g)}evaluate(s){if(this.type.kind==="boolean")return!!this.args[0].evaluate(s);if(this.type.kind==="color"){let u,f;for(const g of this.args){if(u=g.evaluate(s),f=null,u instanceof zn)return u;if(typeof u=="string"){const m=s.parseColor(u);if(m)return m}else if(Array.isArray(u)&&(f=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:zl(u[0],u[1],u[2],u[3]),!f))return new zn(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new hs(f||`Could not parse color from value '${typeof u=="string"?u:String(JSON.stringify(u))}'`)}if(this.type.kind==="number"){let u=null;for(const f of this.args){if(u=f.evaluate(s),u===null)return 0;const g=Number(u);if(!isNaN(g))return g}throw new hs(`Could not convert ${JSON.stringify(u)} to number.`)}return this.type.kind==="formatted"?ys.fromString(Ys(this.args[0].evaluate(s))):this.type.kind==="resolvedImage"?Vs.build(Ys(this.args[0].evaluate(s))):this.type.kind==="array"?this.args.map(u=>u.evaluate(s)):Ys(this.args[0].evaluate(s))}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Vd([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Cu(this.args[0]).serialize();const s=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(u=>{s.push(u.serialize())}),s}}const Qm=["Unknown","Point","LineString","Polygon"];class zd{constructor(s,u){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=s,this.options=u}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Qm[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(s){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const s=this.featureDistanceData.center,u=this.featureDistanceData.scale,{x:f,y:g}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(f*u-s[0])+this.featureDistanceData.bearing[1]*(g*u-s[1])}return 0}parseColor(s){let u=this._parseColorCache[s];return u||(u=this._parseColorCache[s]=zn.parse(s)),u}getConfig(s){return this.options?this.options.get(s):null}}class Xs{constructor(s,u,f,g,m){this.name=s,this.type=u,this._evaluate=f,this.args=g,this._overloadIndex=m}evaluate(s){if(!this._evaluate){const u=Xs.definitions[this.name];this._evaluate=Array.isArray(u)?u[2]:u.overloads[this._overloadIndex][1]}return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(s=>s.serialize()))}static parse(s,u){const f=s[0],g=Xs.definitions[f];if(!g)return u.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const m=Array.isArray(g)?g[0]:g.type,_=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,b=[];let O=null,D=-1;for(const[C,V]of _){if(Array.isArray(C)&&C.length!==s.length-1)continue;b.push(C),D++,O=new su(u.registry,u.path,null,u.scope,void 0,u._scope,u.options);const I=[];let z=!1;for(let M=1;M<s.length;M++){const B=s[M],J=Array.isArray(C)?C[M-1]:C.type,te=O.parse(B,1+I.length,J);if(!te){z=!0;break}I.push(te)}if(!z)if(Array.isArray(C)&&C.length!==I.length)O.error(`Expected ${C.length} arguments, but found ${I.length} instead.`);else{for(let M=0;M<I.length;M++){const B=Array.isArray(C)?C[M]:C.type,J=I[M];O.concat(M+1).checkSubtype(B,J.type)}if(O.errors.length===0)return new Xs(f,m,V,I,D)}}if(b.length===1)u.errors.push(...O.errors);else{const C=(b.length?b:_.map(([I])=>I)).map(Tf).join(" | "),V=[];for(let I=1;I<s.length;I++){const z=u.parse(s[I],1+V.length);if(!z)return null;V.push(Di(z.type))}u.error(`Expected arguments of type ${C}, but found (${V.join(", ")}) instead.`)}return null}static register(s,u){Xs.definitions=u;for(const f in u)s[f]=Xs}}function Tf(h){return Array.isArray(h)?`(${h.map(Di).join(", ")})`:`(${Di(h.type)}...)`}class au{constructor(s,u,f){this.type=Ho,this.locale=f,this.caseSensitive=s,this.diacriticSensitive=u}static parse(s,u){if(s.length!==2)return u.error("Expected one argument.");const f=s[1];if(typeof f!="object"||Array.isArray(f))return u.error("Collator options argument must be an object.");const g=f["case-sensitive"]===void 0?u.parse(!1,1,bn):u.parseObjectValue(f["case-sensitive"],1,"case-sensitive",bn);if(!g)return null;const m=f["diacritic-sensitive"]===void 0?u.parse(!1,1,bn):u.parseObjectValue(f["diacritic-sensitive"],1,"diacritic-sensitive",bn);if(!m)return null;let _=null;return f.locale&&(_=u.parseObjectValue(f.locale,1,"locale",dn),!_)?null:new au(g,m,_)}evaluate(s){return new Ac(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}serialize(){const s={};return s["case-sensitive"]=this.caseSensitive.serialize(),s["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(s.locale=this.locale.serialize()),["collator",s]}}function Cf(h,s,u=0,f=h.length-1,g=Je){for(;f>u;){if(f-u>600){const O=f-u+1,D=s-u+1,C=Math.log(O),V=.5*Math.exp(2*C/3),I=.5*Math.sqrt(C*V*(O-V)/O)*(D-O/2<0?-1:1);Cf(h,s,Math.max(u,Math.floor(s-D*V/O+I)),Math.min(f,Math.floor(s+(O-D)*V/O+I)),g)}const m=h[s];let _=u,b=f;for(ce(h,u,s),g(h[f],m)>0&&ce(h,u,f);_<b;){for(ce(h,_,b),_++,b--;g(h[_],m)<0;)_++;for(;g(h[b],m)>0;)b--}g(h[u],m)===0?ce(h,u,b):(b++,ce(h,b,f)),b<=s&&(u=b+1),s<=b&&(f=b-1)}}function ce(h,s,u){const f=h[s];h[s]=h[u],h[u]=f}function Je(h,s){return h<s?-1:h>s?1:0}function Mt(h){let s=0;for(let u,f,g=0,m=h.length,_=m-1;g<m;_=g++)u=h[g],f=h[_],s+=(f.x-u.x)*(u.y+f.y);return s}function Jt(h,s){h[0]=Math.min(h[0],s[0]),h[1]=Math.min(h[1],s[1]),h[2]=Math.max(h[2],s[0]),h[3]=Math.max(h[3],s[1])}function ha(h,s){return!(h[0]<=s[0]||h[2]>=s[2]||h[1]<=s[1]||h[3]>=s[3])}function Ma(h,s,u){const f=h[0]-s[0],g=h[1]-s[1],m=h[0]-u[0],_=h[1]-u[1];return f*_-m*g==0&&f*m<=0&&g*_<=0}function ir(h,s,u=!1){let f=!1;for(let b=0,O=s.length;b<O;b++){const D=s[b];for(let C=0,V=D.length,I=V-1;C<V;I=C++){const z=D[I],M=D[C];if(Ma(h,z,M))return u;(m=z)[1]>(g=h)[1]!=(_=M)[1]>g[1]&&g[0]<(_[0]-m[0])*(g[1]-m[1])/(_[1]-m[1])+m[0]&&(f=!f)}}var g,m,_;return f}function xr(h,s,u,f){const g=f[0]-u[0],m=f[1]-u[1],_=(h[0]-u[0])*m-g*(h[1]-u[1]),b=(s[0]-u[0])*m-g*(s[1]-u[1]);return _>0&&b<0||_<0&&b>0}function Jr(h,s,u,f){return(g=[f[0]-u[0],f[1]-u[1]])[0]*(m=[s[0]-h[0],s[1]-h[1]])[1]-g[1]*m[0]!=0&&!(!xr(h,s,u,f)||!xr(u,f,h,s));var g,m}const On=8192;function Fn(h,s){const u=(180+h[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h[1]*Math.PI/360)))/360,g=Math.pow(2,s.z);return[Math.round(u*g*On),Math.round(f*g*On)]}function Ri(h,s){for(let u=0;u<s.length;u++)if(ir(h,s[u]))return!0;return!1}function zs(h,s,u){for(const f of u)for(let g=0,m=f.length,_=m-1;g<m;_=g++)if(Jr(h,s,f[_],f[g]))return!0;return!1}function Ds(h,s){for(let u=0;u<h.length;++u)if(!ir(h[u],s))return!1;for(let u=0;u<h.length-1;++u)if(zs(h[u],h[u+1],s))return!1;return!0}function io(h,s){for(let u=0;u<s.length;u++)if(Ds(h,s[u]))return!0;return!1}function os(h,s,u){const f=[];for(let g=0;g<h.length;g++){const m=[];for(let _=0;_<h[g].length;_++){const b=Fn(h[g][_],u);Jt(s,b),m.push(b)}f.push(m)}return f}function Vr(h,s,u){const f=[];for(let g=0;g<h.length;g++){const m=os(h[g],s,u);f.push(m)}return f}function ur(h,s,u,f){if(h[0]<u[0]||h[0]>u[2]){const g=.5*f;let m=h[0]-u[0]>g?-f:u[0]-h[0]>g?f:0;m===0&&(m=h[0]-u[2]>g?-f:u[2]-h[0]>g?f:0),h[0]+=m}Jt(s,h)}function vl(h,s,u,f){const g=Math.pow(2,f.z)*On,m=[f.x*On,f.y*On],_=[];if(!h)return _;for(const b of h)for(const O of b){const D=[O.x+m[0],O.y+m[1]];ur(D,s,u,g),_.push(D)}return _}function Pr(h,s,u,f){const g=Math.pow(2,f.z)*On,m=[f.x*On,f.y*On],_=[];if(!h)return _;for(const O of h){const D=[];for(const C of O){const V=[C.x+m[0],C.y+m[1]];Jt(s,V),D.push(V)}_.push(D)}if(s[2]-s[0]<=g/2){(b=s)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const O of _)for(const D of O)ur(D,s,u,g)}var b;return _}class bu{constructor(s,u){this.type=bn,this.geojson=s,this.geometries=u}static parse(s,u){if(s.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(nl(s[1])){const f=s[1];if(f.type==="FeatureCollection")for(let g=0;g<f.features.length;++g){const m=f.features[g].geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new bu(f,f.features[g].geometry)}else if(f.type==="Feature"){const g=f.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new bu(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new bu(f,f)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(u,f){const g=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],_=u.canonicalID();if(!_)return!1;if(f.type==="Polygon"){const b=os(f.coordinates,m,_),O=vl(u.geometry(),g,m,_);if(!ha(g,m))return!1;for(const D of O)if(!ir(D,b))return!1}if(f.type==="MultiPolygon"){const b=Vr(f.coordinates,m,_),O=vl(u.geometry(),g,m,_);if(!ha(g,m))return!1;for(const D of O)if(!Ri(D,b))return!1}return!0}(s,this.geometries);if(s.geometryType()==="LineString")return function(u,f){const g=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],_=u.canonicalID();if(!_)return!1;if(f.type==="Polygon"){const b=os(f.coordinates,m,_),O=Pr(u.geometry(),g,m,_);if(!ha(g,m))return!1;for(const D of O)if(!Ds(D,b))return!1}if(f.type==="MultiPolygon"){const b=Vr(f.coordinates,m,_),O=Pr(u.geometry(),g,m,_);if(!ha(g,m))return!1;for(const D of O)if(!io(D,b))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const ru={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},Sr=1/298.257223563,yh=Sr*(2-Sr),nu=Math.PI/180;class vc{static fromTile(s,u,f){const g=Math.PI*(1-2*(s+.5)/Math.pow(2,u)),m=Math.atan(.5*(Math.exp(g)-Math.exp(-g)))/nu;return new vc(m,f)}static get units(){return ru}constructor(s,u){if(s===void 0)throw new Error("No latitude given.");if(u&&!ru[u])throw new Error(`Unknown unit ${u}. Use one of: ${Object.keys(ru).join(", ")}`);const f=6378.137*nu*(u?ru[u]:1),g=Math.cos(s*nu),m=1/(1-yh*(1-g*g)),_=Math.sqrt(m);this.kx=f*_*g,this.ky=f*_*m*(1-yh)}distance(s,u){const f=bi(s[0]-u[0])*this.kx,g=(s[1]-u[1])*this.ky;return Math.sqrt(f*f+g*g)}bearing(s,u){const f=bi(u[0]-s[0])*this.kx;return Math.atan2(f,(u[1]-s[1])*this.ky)/nu}destination(s,u,f){const g=f*nu;return this.offset(s,Math.sin(g)*u,Math.cos(g)*u)}offset(s,u,f){return[s[0]+u/this.kx,s[1]+f/this.ky]}lineDistance(s){let u=0;for(let f=0;f<s.length-1;f++)u+=this.distance(s[f],s[f+1]);return u}area(s){let u=0;for(let f=0;f<s.length;f++){const g=s[f];for(let m=0,_=g.length,b=_-1;m<_;b=m++)u+=bi(g[m][0]-g[b][0])*(g[m][1]+g[b][1])*(f?-1:1)}return Math.abs(u)/2*this.kx*this.ky}along(s,u){let f=0;if(u<=0)return s[0];for(let g=0;g<s.length-1;g++){const m=s[g],_=s[g+1],b=this.distance(m,_);if(f+=b,f>u)return Ms(m,_,(u-(f-b))/b)}return s[s.length-1]}pointToSegmentDistance(s,u,f){let[g,m]=u,_=bi(f[0]-g)*this.kx,b=(f[1]-m)*this.ky;if(_!==0||b!==0){const O=(bi(s[0]-g)*this.kx*_+(s[1]-m)*this.ky*b)/(_*_+b*b);O>1?(g=f[0],m=f[1]):O>0&&(g+=_/this.kx*O,m+=b/this.ky*O)}return _=bi(s[0]-g)*this.kx,b=(s[1]-m)*this.ky,Math.sqrt(_*_+b*b)}pointOnLine(s,u){let f=1/0,g=s[0][0],m=s[0][1],_=0,b=0;for(let O=0;O<s.length-1;O++){let D=s[O][0],C=s[O][1],V=bi(s[O+1][0]-D)*this.kx,I=(s[O+1][1]-C)*this.ky,z=0;V===0&&I===0||(z=(bi(u[0]-D)*this.kx*V+(u[1]-C)*this.ky*I)/(V*V+I*I),z>1?(D=s[O+1][0],C=s[O+1][1]):z>0&&(D+=V/this.kx*z,C+=I/this.ky*z)),V=bi(u[0]-D)*this.kx,I=(u[1]-C)*this.ky;const M=V*V+I*I;M<f&&(f=M,g=D,m=C,_=O,b=z)}return{point:[g,m],index:_,t:Math.max(0,Math.min(1,b))}}lineSlice(s,u,f){let g=this.pointOnLine(f,s),m=this.pointOnLine(f,u);if(g.index>m.index||g.index===m.index&&g.t>m.t){const D=g;g=m,m=D}const _=[g.point],b=g.index+1,O=m.index;!Dd(f[b],_[0])&&b<=O&&_.push(f[b]);for(let D=b+1;D<=O;D++)_.push(f[D]);return Dd(f[O],m.point)||_.push(m.point),_}lineSliceAlong(s,u,f){let g=0;const m=[];for(let _=0;_<f.length-1;_++){const b=f[_],O=f[_+1],D=this.distance(b,O);if(g+=D,g>s&&m.length===0&&m.push(Ms(b,O,(s-(g-D))/D)),g>=u)return m.push(Ms(b,O,(u-(g-D))/D)),m;g>s&&m.push(O)}return m}bufferPoint(s,u){const f=u/this.ky,g=u/this.kx;return[s[0]-g,s[1]-f,s[0]+g,s[1]+f]}bufferBBox(s,u){const f=u/this.ky,g=u/this.kx;return[s[0]-g,s[1]-f,s[2]+g,s[3]+f]}insideBBox(s,u){return bi(s[0]-u[0])>=0&&bi(s[0]-u[2])<=0&&s[1]>=u[1]&&s[1]<=u[3]}}function Dd(h,s){return h[0]===s[0]&&h[1]===s[1]}function Ms(h,s,u){const f=bi(s[0]-h[0]);return[h[0]+f*u,h[1]+(s[1]-h[1])*u]}function bi(h){for(;h<-180;)h+=360;for(;h>180;)h-=360;return h}class _c{constructor(s=[],u=(f,g)=>f<g?-1:f>g?1:0){if(this.data=s,this.length=this.data.length,this.compare=u,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;const s=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:u,compare:f}=this,g=u[s];for(;s>0;){const m=s-1>>1,_=u[m];if(f(g,_)>=0)break;u[s]=_,s=m}u[s]=g}_down(s){const{data:u,compare:f}=this,g=this.length>>1,m=u[s];for(;s<g;){let _=1+(s<<1);const b=_+1;if(b<this.length&&f(u[b],u[_])<0&&(_=b),f(u[_],m)>=0)break;u[s]=u[_],s=_}u[s]=m}}var za=8192;function Md(h,s){return s.dist-h.dist}const Js=100,Ao=50;function Sf(h){const s=[1/0,1/0,-1/0,-1/0];if(s.length!==h.length)return!1;for(let u=0;u<s.length;u++)if(s[u]!==h[u])return!1;return!0}function jh(h){return h[1]-h[0]+1}function vo(h,s){const u=h[1]>=h[0]&&h[1]<s;return u||console.warn("Distance Expression: Index is out of range"),u}function js(h,s){if(h[0]>h[1])return[null,null];const u=jh(h);if(s){if(u===2)return[h,null];const f=Math.floor(u/2);return[[h[0],h[0]+f],[h[0]+f,h[1]]]}{if(u===1)return[h,null];const f=Math.floor(u/2)-1;return[[h[0],h[0]+f],[h[0]+f+1,h[1]]]}}function Dl(h,s){const u=[1/0,1/0,-1/0,-1/0];if(!vo(s,h.length))return u;for(let f=s[0];f<=s[1];++f)Jt(u,h[f]);return u}function jc(h){const s=[1/0,1/0,-1/0,-1/0];for(let u=0;u<h.length;++u)for(let f=0;f<h[u].length;++f)Jt(s,h[u][f]);return s}function iu(h,s,u){if(Sf(h)||Sf(s))return NaN;let f=0,g=0;return h[2]<s[0]&&(f=s[0]-h[2]),h[0]>s[2]&&(f=h[0]-s[2]),h[1]>s[3]&&(g=h[1]-s[3]),h[3]<s[1]&&(g=s[1]-h[3]),u.distance([0,0],[f,g])}function Ah(h){return 360*h-180}function Ml(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}function No(h,s){const u=Math.pow(2,s.z),f=(h.y/za+s.y)/u;return[Ah((h.x/za+s.x)/u),Ml(f)]}function Id(h,s){const u=[];for(let f=0;f<h.length;++f)u.push(No(h[f],s));return u}function Gc(h,s,u){const f=u.pointOnLine(s,h).point;return u.distance(h,f)}function Il(h,s,u,f,g){const m=u.slice(f[0],f[1]+1);let _=1/0;for(let b=s[0];b<=s[1];++b)if((_=Math.min(_,Gc(h[b],m,g)))===0)return 0;return _}function wc(h,s,u,f,g){const m=Math.min(g.pointToSegmentDistance(h,u,f),g.pointToSegmentDistance(s,u,f)),_=Math.min(g.pointToSegmentDistance(u,h,s),g.pointToSegmentDistance(f,h,s));return Math.min(m,_)}function xu(h,s,u,f,g){if(!vo(s,h.length)||!vo(f,u.length))return NaN;let m=1/0;for(let _=s[0];_<s[1];++_)for(let b=f[0];b<f[1];++b){if(Jr(h[_],h[_+1],u[b],u[b+1]))return 0;m=Math.min(m,wc(h[_],h[_+1],u[b],u[b+1],g))}return m}function Qi(h,s,u,f,g){if(!vo(s,h.length)||!vo(f,u.length))return NaN;let m=1/0;for(let _=s[0];_<=s[1];++_)for(let b=f[0];b<=f[1];++b)if((m=Math.min(m,g.distance(h[_],u[b])))===0)return m;return m}function bf(h,s,u){if(ir(h,s,!0))return 0;let f=1/0;for(const g of s){const m=g.length;if(m<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(g[0]!==g[m-1]&&(f=Math.min(f,u.pointToSegmentDistance(h,g[m-1],g[0])))===0||(f=Math.min(f,Gc(h,g,u)))===0)return f}return f}function so(h,s,u,f){if(!vo(s,h.length))return NaN;for(let m=s[0];m<=s[1];++m)if(ir(h[m],u,!0))return 0;let g=1/0;for(let m=s[0];m<s[1];++m)for(const _ of u)for(let b=0,O=_.length,D=O-1;b<O;D=b++){if(Jr(h[m],h[m+1],_[D],_[b]))return 0;g=Math.min(g,wc(h[m],h[m+1],_[D],_[b],f))}return g}function _o(h,s){for(const u of h)for(let f=0;f<=u.length-1;++f)if(ir(u[f],s,!0))return!0;return!1}function Ld(h,s,u,f=1/0){const g=jc(h),m=jc(s);if(f!==1/0&&iu(g,m,u)>=f)return f;if(ha(g,m)){if(_o(h,s))return 0}else if(_o(s,h))return 0;let _=f;for(const b of h)for(let O=0,D=b.length,C=D-1;O<D;C=O++)for(const V of s)for(let I=0,z=V.length,M=z-1;I<z;M=I++){if(Jr(b[C],b[O],V[M],V[I]))return 0;_=Math.min(_,wc(b[C],b[O],V[M],V[I],u))}return _}function Fd(h,s,u,f,g,m,_){if(m===null||_===null)return;const b=iu(Dl(f,m),Dl(g,_),u);b<s&&h.push({dist:b,range1:m,range2:_})}function oo(h,s,u,f,g=1/0){let m=Math.min(f.distance(h[0],u[0][0]),g);if(m===0)return m;const _=new _c([{dist:0,range1:[0,h.length-1],range2:[0,0]}],Md),b=s?Ao:Js,O=jc(u);for(;_.length;){const D=_.pop();if(D.dist>=m)continue;const C=D.range1;if(jh(C)<=b){if(!vo(C,h.length))return NaN;if(s){const V=so(h,C,u,f);if((m=Math.min(m,V))===0)return m}else for(let V=C[0];V<=C[1];++V){const I=bf(h[V],u,f);if((m=Math.min(m,I))===0)return m}}else{const V=js(C,s);if(V[0]!==null){const I=iu(Dl(h,V[0]),O,f);I<m&&_.push({dist:I,range1:V[0],range2:[0,0]})}if(V[1]!==null){const I=iu(Dl(h,V[1]),O,f);I<m&&_.push({dist:I,range1:V[1],range2:[0,0]})}}}return m}function Zc(h,s,u,f,g,m=1/0){let _=Math.min(m,g.distance(h[0],u[0]));if(_===0)return _;const b=new _c([{dist:0,range1:[0,h.length-1],range2:[0,u.length-1]}],Md),O=s?Ao:Js,D=f?Ao:Js;for(;b.length;){const C=b.pop();if(C.dist>=_)continue;const V=C.range1,I=C.range2;if(jh(V)<=O&&jh(I)<=D){if(!vo(V,h.length)||!vo(I,u.length))return NaN;if(s&&f?_=Math.min(_,xu(h,V,u,I,g)):s||f?s&&!f?_=Math.min(_,Il(u,I,h,V,g)):!s&&f&&(_=Math.min(_,Il(h,V,u,I,g))):_=Math.min(_,Qi(h,V,u,I,g)),_===0)return _}else{const z=js(V,s),M=js(I,f);Fd(b,_,g,h,u,z[0],M[0]),Fd(b,_,g,h,u,z[0],M[1]),Fd(b,_,g,h,u,z[1],M[0]),Fd(b,_,g,h,u,z[1],M[1])}}return _}function Rc(h,s,u,f,g=1/0){let m=g;const _=Dl(h,[0,h.length-1]);for(const b of u)if(!(m!==1/0&&iu(_,Dl(b,[0,b.length-1]),f)>=m)&&(m=Math.min(m,Zc(h,s,b,!0,f,m)),m===0))return m;return m}function Pu(h,s,u,f,g=1/0){let m=g;const _=Dl(h,[0,h.length-1]);for(const b of u){if(m!==1/0&&iu(_,jc(b),f)>=m)continue;const O=oo(h,s,b,f,m);if(isNaN(O))return O;if((m=Math.min(m,O))===0)return m}return m}function qc(h){return h==="Point"||h==="MultiPoint"||h==="LineString"||h==="MultiLineString"||h==="Polygon"||h==="MultiPolygon"}class Eu{constructor(s,u){this.type=tr,this.geojson=s,this.geometries=u}static parse(s,u){if(s.length!==2)return u.error(`'distance' expression requires either one argument, but found ' ${s.length-1} instead.`);if(nl(s[1])){const f=s[1];if(f.type==="FeatureCollection"){for(let g=0;g<f.features.length;++g)if(qc(f.features[g].geometry.type))return new Eu(f,f.features[g].geometry)}else if(f.type==="Feature"){if(qc(f.geometry.type))return new Eu(f,f.geometry)}else if(qc(f.type))return new Eu(f,f)}return u.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(s){const u=s.geometry(),f=s.canonicalID();if(u!=null&&f!=null){if(s.geometryType()==="Point")return function(g,m,_){const b=[];for(const D of g)for(const C of D)b.push(No(C,m));const O=new vc(b[0][1],"meters");return _.type==="Point"||_.type==="MultiPoint"||_.type==="LineString"?Zc(b,!1,_.type==="Point"?[_.coordinates]:_.coordinates,_.type==="LineString",O):_.type==="MultiLineString"?Rc(b,!1,_.coordinates,O):_.type==="Polygon"||_.type==="MultiPolygon"?Pu(b,!1,_.type==="Polygon"?[_.coordinates]:_.coordinates,O):null}(u,f,this.geometries);if(s.geometryType()==="LineString")return function(g,m,_){const b=[];for(const D of g){const C=[];for(const V of D)C.push(No(V,m));b.push(C)}const O=new vc(b[0][0][1],"meters");if(_.type==="Point"||_.type==="MultiPoint"||_.type==="LineString")return Rc(_.type==="Point"?[_.coordinates]:_.coordinates,_.type==="LineString",b,O);if(_.type==="MultiLineString"){let D=1/0;for(let C=0;C<_.coordinates.length;C++){const V=Rc(_.coordinates[C],!0,b,O,D);if(isNaN(V))return V;if((D=Math.min(D,V))===0)return D}return D}if(_.type==="Polygon"||_.type==="MultiPolygon"){let D=1/0;for(let C=0;C<b.length;C++){const V=Pu(b[C],!0,_.type==="Polygon"?[_.coordinates]:_.coordinates,O,D);if(isNaN(V))return V;if((D=Math.min(D,V))===0)return D}return D}return null}(u,f,this.geometries);if(s.geometryType()==="Polygon")return function(g,m,_){const b=[];for(const D of function(C,V){const I=C.length;if(I<=1)return[C];const z=[];let M,B;for(let J=0;J<I;J++){const te=Mt(C[J]);te!==0&&(C[J].area=Math.abs(te),B===void 0&&(B=te<0),B===te<0?(M&&z.push(M),M=[C[J]]):M.push(C[J]))}return M&&z.push(M),z}(g)){const C=[];for(let V=0;V<D.length;++V)C.push(Id(D[V],m));b.push(C)}const O=new vc(b[0][0][0][1],"meters");if(_.type==="Point"||_.type==="MultiPoint"||_.type==="LineString")return Pu(_.type==="Point"?[_.coordinates]:_.coordinates,_.type==="LineString",b,O);if(_.type==="MultiLineString"){let D=1/0;for(let C=0;C<_.coordinates.length;C++){const V=Pu(_.coordinates[C],!0,b,O,D);if(isNaN(V))return V;if((D=Math.min(D,V))===0)return D}return D}return _.type==="Polygon"||_.type==="MultiPolygon"?function(D,C,V){let I=1/0;for(const z of D)for(const M of C){const B=Ld(z,M,V,I);if(isNaN(B))return B;if((I=Math.min(I,B))===0)return I}return I}(_.type==="Polygon"?[_.coordinates]:_.coordinates,b,O):null}(u,f,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function Hc(h,s){switch(h){case"string":return Ys(s);case"number":return+s;case"boolean":return!!s;case"color":return zn.parse(s);case"formatted":return ys.fromString(Ys(s));case"resolvedImage":return Vs.build(Ys(s))}return s}function Tc(h,s,u,f){return f!==void 0&&(h=f*Math.round(h/f)),s!==void 0&&h<s&&(h=s),u!==void 0&&h>u&&(h=u),h}class Xu{constructor(s,u,f){this.type=s,this.key=u,this.scope=f}static parse(s,u){let f=u.expectedType;if(f==null&&(f=yn),s.length<2||s.length>3)return u.error("Invalid number of arguments for 'config' expression.");const g=u.parse(s[1],1);if(!(g instanceof eu))return u.error("Key name of 'config' expression must be a string literal.");if(s.length>=3){const m=u.parse(s[2],2);return m instanceof eu?new Xu(f,Ys(g.value),Ys(m.value)):u.error("Scope of 'config' expression must be a string literal.")}return new Xu(f,Ys(g.value))}evaluate(s){const u=[this.key,this.scope,s.scope].filter(Boolean).join(""),f=s.getConfig(u);if(!f)return null;const{type:g,value:m,values:_,minValue:b,maxValue:O,stepValue:D}=f,C=f.default.evaluate(s);let V=C;if(m){const I=s.scope;s.scope=(I||"").split("").slice(1).join(""),V=m.evaluate(s),s.scope=I}return g&&(V=Hc(g,V)),V===void 0||b===void 0&&O===void 0&&D===void 0||(typeof V=="number"?V=Tc(V,b,O,D):Array.isArray(V)&&(V=V.map(I=>typeof I=="number"?Tc(I,b,O,D):I))),m!==void 0&&V!==void 0&&_&&!_.includes(V)&&(V=C,g&&(V=Hc(g,V))),(g&&g!==this.type||V!==void 0&&Ji(V)!==this.type)&&(V=Hc(this.type.kind,V)),V}eachChild(){}outputDefined(){return!1}serialize(){const s=["config",this.key];return this.scope&&s.concat(this.key),s}}function Ko(h){if(h instanceof Xs&&(h.name==="get"&&h.args.length===1||h.name==="feature-state"||h.name==="has"&&h.args.length===1||h.name==="properties"||h.name==="geometry-type"||h.name==="id"||/^filter-/.test(h.name))||h instanceof bu||h instanceof Eu)return!1;let s=!0;return h.eachChild(u=>{s&&!Ko(u)&&(s=!1)}),s}function As(h){if(h instanceof Xs&&h.name==="feature-state")return!1;let s=!0;return h.eachChild(u=>{s&&!As(u)&&(s=!1)}),s}function ai(h){if(h instanceof Xu)return new Set([h.key]);let s=new Set;return h.eachChild(u=>{s=new Set([...s,...ai(u)])}),s}function li(h,s){if(h instanceof Xs&&s.indexOf(h.name)>=0)return!1;let u=!0;return h.eachChild(f=>{u&&!li(f,s)&&(u=!1)}),u}class es{constructor(s,u){this.type=u.type,this.name=s,this.boundExpression=u}static parse(s,u){if(s.length!==2||typeof s[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const f=s[1];return u.scope.has(f)?new es(f,u.scope.get(f)):u.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class fs{constructor(s,u=[],f,g=new mc,m=[],_,b){this.registry=s,this.path=u,this.key=u.map(O=>typeof O=="string"?`['${O}']`:`[${O}]`).join(""),this.scope=g,this.errors=m,this.expectedType=f,this._scope=_,this.options=b}parse(s,u,f,g,m={}){return u||f?this.concat(u,null,f,g)._parse(s,m):this._parse(s,m)}parseObjectValue(s,u,f,g,m,_={}){return this.concat(u,f,g,m)._parse(s,_)}_parse(s,u){function f(g,m,_){return _==="assert"?new $o(m,[g]):_==="coerce"?new tu(m,[g]):g}if(s!==null&&typeof s!="string"&&typeof s!="boolean"&&typeof s!="number"||(s=["literal",s]),Array.isArray(s)){if(s.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=typeof s[0]=="string"?this.registry[s[0]]:void 0;if(g){let m=g.parse(s,this);if(!m)return null;if(this.expectedType){const _=this.expectedType,b=m.type;if(_.kind!=="string"&&_.kind!=="number"&&_.kind!=="boolean"&&_.kind!=="object"&&_.kind!=="array"||b.kind!=="value")if(_.kind!=="color"&&_.kind!=="formatted"&&_.kind!=="resolvedImage"||b.kind!=="value"&&b.kind!=="string"){if(this.checkSubtype(_,b))return null}else m=f(m,_,u.typeAnnotation||"coerce");else m=f(m,_,u.typeAnnotation||"assert")}if(!(m instanceof eu)&&m.type.kind!=="resolvedImage"&&$c(m)){const _=new zd(this._scope,this.options);try{m=new eu(m.type,m.evaluate(_))}catch(b){return this.error(b.message),null}}return m}return tu.parse(["to-array",s],this)}return this.error(s===void 0?"'undefined' value invalid. Use null instead.":typeof s=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof s} instead.`)}concat(s,u,f,g){let m=typeof s=="number"?this.path.concat(s):this.path;m=typeof u=="string"?m.concat(u):m;const _=g?this.scope.concat(g):this.scope;return new fs(this.registry,m,f||null,_,this.errors,this._scope,this.options)}error(s,...u){const f=`${this.key}${u.map(g=>`[${g}]`).join("")}`;this.errors.push(new Ks(f,s))}checkSubtype(s,u){const f=Od(s,u);return f&&this.error(f),f}}var su=fs;function $c(h){if(h instanceof es)return $c(h.boundExpression);if(h instanceof Xs&&h.name==="error"||h instanceof au||h instanceof bu||h instanceof Eu||h instanceof Xu)return!1;const s=h instanceof tu||h instanceof $o;let u=!0;return h.eachChild(f=>{u=s?u&&$c(f):u&&f instanceof eu}),!!u&&Ko(h)&&li(h,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function il(h,s){const u=h.length-1;let f,g,m=0,_=u,b=0;for(;m<=_;)if(b=Math.floor((m+_)/2),f=h[b],g=h[b+1],f<=s){if(b===u||s<g)return b;m=b+1}else{if(!(f>s))throw new hs("Input is not a number.");_=b-1}return 0}class ou{constructor(s,u,f){this.type=s,this.input=u,this.labels=[],this.outputs=[];for(const[g,m]of f)this.labels.push(g),this.outputs.push(m)}static parse(s,u){if(s.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return u.error("Expected an even number of arguments.");const f=u.parse(s[1],1,tr);if(!f)return null;const g=[];let m=null;u.expectedType&&u.expectedType.kind!=="value"&&(m=u.expectedType);for(let _=1;_<s.length;_+=2){const b=_===1?-1/0:s[_],O=s[_+1],D=_,C=_+1;if(typeof b!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(g.length&&g[g.length-1][0]>=b)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);const V=u.parse(O,C,m);if(!V)return null;m=m||V.type,g.push([b,V])}return new ou(m,f,g)}evaluate(s){const u=this.labels,f=this.outputs;if(u.length===1)return f[0].evaluate(s);const g=this.input.evaluate(s);if(g<=u[0])return f[0].evaluate(s);const m=u.length;return g>=u[m-1]?f[m-1].evaluate(s):f[il(u,g)].evaluate(s)}eachChild(s){s(this.input);for(const u of this.outputs)s(u)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}serialize(){const s=["step",this.input.serialize()];for(let u=0;u<this.labels.length;u++)u>0&&s.push(this.labels[u]),s.push(this.outputs[u].serialize());return s}}const ln=.95047,Kc=1.08883,Ll=4/29,ls=6/29,Cc=3*ls*ls,kd=ls*ls*ls,Ai=Math.PI/180,Gh=180/Math.PI;function sl(h){return h>kd?Math.pow(h,1/3):h/Cc+Ll}function _l(h){return h>ls?h*h*h:Cc*(h-Ll)}function Wc(h){return 255*(h<=.0031308?12.92*h:1.055*Math.pow(h,1/2.4)-.055)}function Nu(h){return(h/=255)<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function Ju(h){const s=Nu(h.r),u=Nu(h.g),f=Nu(h.b),g=sl((.4124564*s+.3575761*u+.1804375*f)/ln),m=sl((.2126729*s+.7151522*u+.072175*f)/1);return{l:116*m-16,a:500*(g-m),b:200*(m-sl((.0193339*s+.119192*u+.9503041*f)/Kc)),alpha:h.a}}function Sc(h){let s=(h.l+16)/116,u=isNaN(h.a)?s:s+h.a/500,f=isNaN(h.b)?s:s-h.b/200;return s=1*_l(s),u=ln*_l(u),f=Kc*_l(f),new zn(Wc(3.2404542*u-1.5371385*s-.4985314*f),Wc(-.969266*u+1.8760108*s+.041556*f),Wc(.0556434*u-.2040259*s+1.0572252*f),h.alpha)}function tm(h,s,u){const f=s-h;return h+u*(f>180||f<-180?f-360*Math.round(f/360):f)}const Zh={forward:Ju,reverse:Sc,interpolate:function(h,s,u){return{l:gr(h.l,s.l,u),a:gr(h.a,s.a,u),b:gr(h.b,s.b,u),alpha:gr(h.alpha,s.alpha,u)}}},qh={forward:function(h){const{l:s,a:u,b:f}=Ju(h),g=Math.atan2(f,u)*Gh;return{h:g<0?g+360:g,c:Math.sqrt(u*u+f*f),l:s,alpha:h.a}},reverse:function(h){const s=h.h*Ai,u=h.c;return Sc({l:h.l,a:Math.cos(s)*u,b:Math.sin(s)*u,alpha:h.alpha})},interpolate:function(h,s,u){return{h:tm(h.h,s.h,u),c:gr(h.c,s.c,u),l:gr(h.l,s.l,u),alpha:gr(h.alpha,s.alpha,u)}}};var ol=Object.freeze({__proto__:null,hcl:qh,lab:Zh});class ts{constructor(s,u,f,g,m){this.type=s,this.operator=u,this.interpolation=f,this.input=g,this.labels=[],this.outputs=[];for(const[_,b]of m)this.labels.push(_),this.outputs.push(b)}static interpolationFactor(s,u,f,g){let m=0;if(s.name==="exponential")m=xi(u,s.base,f,g);else if(s.name==="linear")m=xi(u,1,f,g);else if(s.name==="cubic-bezier"){const _=s.controlPoints;m=new Bt(_[0],_[1],_[2],_[3]).solve(xi(u,1,f,g))}return m}static parse(s,u){let[f,g,m,..._]=s;if(!Array.isArray(g)||g.length===0)return u.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const D=g[1];if(typeof D!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:D}}else{if(g[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const D=g.slice(1);if(D.length!==4||D.some(C=>typeof C!="number"||C<0||C>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:D}}}if(s.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length-1>3&&(s.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(m=u.parse(m,2,tr),!m)return null;const b=[];let O=null;f==="interpolate-hcl"||f==="interpolate-lab"?O=Ws:u.expectedType&&u.expectedType.kind!=="value"&&(O=u.expectedType);for(let D=0;D<_.length;D+=2){const C=_[D],V=_[D+1],I=D+3,z=D+4;if(typeof C!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(b.length&&b[b.length-1][0]>=C)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',I);const M=u.parse(V,z,O);if(!M)return null;O=O||M.type,b.push([C,M])}return O.kind==="number"||O.kind==="color"||O.kind==="array"&&O.itemType.kind==="number"&&typeof O.N=="number"?new ts(O,f,g,m,b):u.error(`Type ${Di(O)} is not interpolatable.`)}evaluate(s){const u=this.labels,f=this.outputs;if(u.length===1)return f[0].evaluate(s);const g=this.input.evaluate(s);if(g<=u[0])return f[0].evaluate(s);const m=u.length;if(g>=u[m-1])return f[m-1].evaluate(s);const _=il(u,g),b=ts.interpolationFactor(this.interpolation,g,u[_],u[_+1]),O=f[_].evaluate(s),D=f[_+1].evaluate(s);return this.operator==="interpolate"?mh[this.type.kind.toLowerCase()](O,D,b):this.operator==="interpolate-hcl"?qh.reverse(qh.interpolate(qh.forward(O),qh.forward(D),b)):Zh.reverse(Zh.interpolate(Zh.forward(O),Zh.forward(D),b))}eachChild(s){s(this.input);for(const u of this.outputs)s(u)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}serialize(){let s;s=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier",...this.interpolation.controlPoints];const u=[this.operator,s,this.input.serialize()];for(let f=0;f<this.labels.length;f++)u.push(this.labels[f],this.outputs[f].serialize());return u}}function xi(h,s,u,f){const g=f-u,m=h-u;return g===0?0:s===1?m/g:(Math.pow(s,m)-1)/(Math.pow(s,g)-1)}class lu{constructor(s,u){this.type=s,this.args=u}static parse(s,u){if(s.length<2)return u.error("Expectected at least one argument.");let f=null;const g=u.expectedType;g&&g.kind!=="value"&&(f=g);const m=[];for(const b of s.slice(1)){const O=u.parse(b,1+m.length,f,void 0,{typeAnnotation:"omit"});if(!O)return null;f=f||O.type,m.push(O)}const _=g&&m.some(b=>Od(g,b.type));return new lu(_?yn:f,m)}evaluate(s){let u,f=null,g=0;for(const m of this.args){if(g++,f=m.evaluate(s),f&&f instanceof Vs&&!f.available&&(u||(u=f),f=null,g===this.args.length))return u;if(f!==null)break}return f}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}serialize(){const s=["coalesce"];return this.eachChild(u=>{s.push(u.serialize())}),s}}class Ou{constructor(s,u){this.type=u.type,this.bindings=[].concat(s),this.result=u}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(const u of this.bindings)s(u[1]);s(this.result)}static parse(s,u){if(s.length<4)return u.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);const f=[];for(let m=1;m<s.length-1;m+=2){const _=s[m];if(typeof _!="string")return u.error(`Expected string, but found ${typeof _} instead.`,m);if(/[^a-zA-Z0-9_]/.test(_))return u.error("Variable names must contain only alphanumeric characters or '_'.",m);const b=u.parse(s[m+1],m+1);if(!b)return null;f.push([_,b])}const g=u.parse(s[s.length-1],s.length-1,u.expectedType,f);return g?new Ou(f,g):null}outputDefined(){return this.result.outputDefined()}serialize(){const s=["let"];for(const[u,f]of this.bindings)s.push(u,f.serialize());return s.push(this.result.serialize()),s}}class op{constructor(s,u,f){this.type=s,this.index=u,this.input=f}static parse(s,u){if(s.length!==3)return u.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const f=u.parse(s[1],1,tr),g=u.parse(s[2],2,Ki(u.expectedType||yn));return f&&g?new op(g.type.itemType,f,g):null}evaluate(s){const u=this.index.evaluate(s),f=this.input.evaluate(s);if(u<0)throw new hs(`Array index out of bounds: ${u} < 0.`);if(u>=f.length)throw new hs(`Array index out of bounds: ${u} > ${f.length-1}.`);if(u!==Math.floor(u))throw new hs(`Array index must be an integer, but found ${u} instead. Use at-interpolated to retrieve interpolated result with a fractional index.`);return f[u]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class bc{constructor(s,u,f){this.type=s,this.index=u,this.input=f}static parse(s,u){if(s.length!==3)return u.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const f=u.parse(s[1],1,tr),g=u.parse(s[2],2,Ki(u.expectedType||yn));return f&&g?new bc(g.type.itemType,f,g):null}evaluate(s){const u=this.index.evaluate(s),f=this.input.evaluate(s);if(u<0)throw new hs(`Array index out of bounds: ${u} < 0.`);if(u>f.length-1)throw new hs(`Array index out of bounds: ${u} > ${f.length-1}.`);if(u===Math.floor(u))return f[u];const g=Math.floor(u),m=Math.ceil(u),_=f[g],b=f[m];if(typeof _!="number"||typeof b!="number")throw new hs(`Cannot interpolate between non-number values at index ${u}.`);const O=u-g;return _*(1-O)+b*O}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}serialize(){return["at-interpolated",this.index.serialize(),this.input.serialize()]}}class xf{constructor(s,u){this.type=bn,this.needle=s,this.haystack=u}static parse(s,u){if(s.length!==3)return u.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const f=u.parse(s[1],1,yn),g=u.parse(s[2],2,yn);return f&&g?gh(f.type,[bn,dn,tr,gc,yn])?new xf(f,g):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Di(f.type)} instead`):null}evaluate(s){const u=this.needle.evaluate(s),f=this.haystack.evaluate(s);if(f==null)return!1;if(!yc(u,["boolean","string","number","null"]))throw new hs(`Expected first argument to be of type boolean, string, number or null, but found ${Di(Ji(u))} instead.`);if(!yc(f,["string","array"]))throw new hs(`Expected second argument to be of type array or string, but found ${Di(Ji(f))} instead.`);return f.indexOf(u)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Ud{constructor(s,u,f){this.type=tr,this.needle=s,this.haystack=u,this.fromIndex=f}static parse(s,u){if(s.length<=2||s.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const f=u.parse(s[1],1,yn),g=u.parse(s[2],2,yn);if(!f||!g)return null;if(!gh(f.type,[bn,dn,tr,gc,yn]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Di(f.type)} instead`);if(s.length===4){const m=u.parse(s[3],3,tr);return m?new Ud(f,g,m):null}return new Ud(f,g)}evaluate(s){const u=this.needle.evaluate(s),f=this.haystack.evaluate(s);if(!yc(u,["boolean","string","number","null"]))throw new hs(`Expected first argument to be of type boolean, string, number or null, but found ${Di(Ji(u))} instead.`);if(!yc(f,["string","array"]))throw new hs(`Expected second argument to be of type array or string, but found ${Di(Ji(f))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(s);return f.indexOf(u,g)}return f.indexOf(u)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const s=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),s]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Hh{constructor(s,u,f,g,m,_){this.inputType=s,this.type=u,this.input=f,this.cases=g,this.outputs=m,this.otherwise=_}static parse(s,u){if(s.length<5)return u.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return u.error("Expected an even number of arguments.");let f,g;u.expectedType&&u.expectedType.kind!=="value"&&(g=u.expectedType);const m={},_=[];for(let D=2;D<s.length-1;D+=2){let C=s[D];const V=s[D+1];Array.isArray(C)||(C=[C]);const I=u.concat(D);if(C.length===0)return I.error("Expected at least one branch label.");for(const M of C){if(typeof M!="number"&&typeof M!="string")return I.error("Branch labels must be numbers or strings.");if(typeof M=="number"&&Math.abs(M)>Number.MAX_SAFE_INTEGER)return I.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof M=="number"&&Math.floor(M)!==M)return I.error("Numeric branch labels must be integer values.");if(f){if(I.checkSubtype(f,Ji(M)))return null}else f=Ji(M);if(m[String(M)]!==void 0)return I.error("Branch labels must be unique.");m[String(M)]=_.length}const z=u.parse(V,D,g);if(!z)return null;g=g||z.type,_.push(z)}const b=u.parse(s[1],1,yn);if(!b)return null;const O=u.parse(s[s.length-1],s.length-1,g);return O?b.type.kind!=="value"&&u.concat(1).checkSubtype(f,b.type)?null:new Hh(f,g,b,m,_,O):null}evaluate(s){const u=this.input.evaluate(s);return(Ji(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}serialize(){const s=["match",this.input.serialize()],u=Object.keys(this.cases).sort(),f=[],g={};for(const _ of u){const b=g[this.cases[_]];b===void 0?(g[this.cases[_]]=f.length,f.push([this.cases[_],[_]])):f[b][1].push(_)}const m=_=>this.inputType.kind==="number"?Number(_):_;for(const[_,b]of f)s.push(b.length===1?m(b[0]):b.map(m)),s.push(this.outputs[_].serialize());return s.push(this.otherwise.serialize()),s}}class $h{constructor(s,u,f){this.type=s,this.branches=u,this.otherwise=f}static parse(s,u){if(s.length<4)return u.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return u.error("Expected an odd number of arguments.");let f;u.expectedType&&u.expectedType.kind!=="value"&&(f=u.expectedType);const g=[];for(let _=1;_<s.length-1;_+=2){const b=u.parse(s[_],_,bn);if(!b)return null;const O=u.parse(s[_+1],_+1,f);if(!O)return null;g.push([b,O]),f=f||O.type}const m=u.parse(s[s.length-1],s.length-1,f);return m?new $h(f,g,m):null}evaluate(s){for(const[u,f]of this.branches)if(u.evaluate(s))return f.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(const[u,f]of this.branches)s(u),s(f);s(this.otherwise)}outputDefined(){return this.branches.every(([s,u])=>u.outputDefined())&&this.otherwise.outputDefined()}serialize(){const s=["case"];return this.eachChild(u=>{s.push(u.serialize())}),s}}class Bd{constructor(s,u,f,g){this.type=s,this.input=u,this.beginIndex=f,this.endIndex=g}static parse(s,u){if(s.length<=2||s.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const f=u.parse(s[1],1,yn),g=u.parse(s[2],2,tr);if(!f||!g)return null;if(!gh(f.type,[Ki(yn),dn,yn]))return u.error(`Expected first argument to be of type array or string, but found ${Di(f.type)} instead`);if(s.length===4){const m=u.parse(s[3],3,tr);return m?new Bd(f.type,f,g,m):null}return new Bd(f.type,f,g)}evaluate(s){const u=this.input.evaluate(s),f=this.beginIndex.evaluate(s);if(!yc(u,["string","array"]))throw new hs(`Expected first argument to be of type array or string, but found ${Di(Ji(u))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(s);return u.slice(f,g)}return u.slice(f)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const s=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),s]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Pf(h,s){return h==="=="||h==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function eg(h,s,u,f){return f.compare(s,u)===0}function vh(h,s,u){const f=h!=="=="&&h!=="!=";return class yX{constructor(m,_,b){this.type=bn,this.lhs=m,this.rhs=_,this.collator=b,this.hasUntypedArgument=m.type.kind==="value"||_.type.kind==="value"}static parse(m,_){if(m.length!==3&&m.length!==4)return _.error("Expected two or three arguments.");const b=m[0];let O=_.parse(m[1],1,yn);if(!O)return null;if(!Pf(b,O.type))return _.concat(1).error(`"${b}" comparisons are not supported for type '${Di(O.type)}'.`);let D=_.parse(m[2],2,yn);if(!D)return null;if(!Pf(b,D.type))return _.concat(2).error(`"${b}" comparisons are not supported for type '${Di(D.type)}'.`);if(O.type.kind!==D.type.kind&&O.type.kind!=="value"&&D.type.kind!=="value")return _.error(`Cannot compare types '${Di(O.type)}' and '${Di(D.type)}'.`);f&&(O.type.kind==="value"&&D.type.kind!=="value"?O=new $o(D.type,[O]):O.type.kind!=="value"&&D.type.kind==="value"&&(D=new $o(O.type,[D])));let C=null;if(m.length===4){if(O.type.kind!=="string"&&D.type.kind!=="string"&&O.type.kind!=="value"&&D.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(C=_.parse(m[3],3,Ho),!C)return null}return new yX(O,D,C)}evaluate(m){const _=this.lhs.evaluate(m),b=this.rhs.evaluate(m);if(f&&this.hasUntypedArgument){const O=Ji(_),D=Ji(b);if(O.kind!==D.kind||O.kind!=="string"&&O.kind!=="number")throw new hs(`Expected arguments for "${h}" to be (string, string) or (number, number), but found (${O.kind}, ${D.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const O=Ji(_),D=Ji(b);if(O.kind!=="string"||D.kind!=="string")return s(m,_,b)}return this.collator?u(m,_,b,this.collator.evaluate(m)):s(m,_,b)}eachChild(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)}outputDefined(){return!0}serialize(){const m=[h];return this.eachChild(_=>{m.push(_.serialize())}),m}}}const Hg=vh("==",function(h,s,u){return s===u},eg),xc=vh("!=",function(h,s,u){return s!==u},function(h,s,u,f){return!eg(0,s,u,f)}),Qu=vh("<",function(h,s,u){return s<u},function(h,s,u,f){return f.compare(s,u)<0}),Vu=vh(">",function(h,s,u){return s>u},function(h,s,u,f){return f.compare(s,u)>0}),$g=vh("<=",function(h,s,u){return s<=u},function(h,s,u,f){return f.compare(s,u)<=0}),Kh=vh(">=",function(h,s,u){return s>=u},function(h,s,u,f){return f.compare(s,u)>=0});class wl{constructor(s,u,f,g,m,_){this.type=dn,this.number=s,this.locale=u,this.currency=f,this.unit=g,this.minFractionDigits=m,this.maxFractionDigits=_}static parse(s,u){if(s.length!==3)return u.error("Expected two arguments.");const f=u.parse(s[1],1,tr);if(!f)return null;const g=s[2];if(typeof g!="object"||Array.isArray(g))return u.error("NumberFormat options argument must be an object.");let m=null;if(g.locale&&(m=u.parseObjectValue(g.locale,2,"locale",dn),!m))return null;let _=null;if(g.currency&&(_=u.parseObjectValue(g.currency,2,"currency",dn),!_))return null;let b=null;if(g.unit&&(b=u.parseObjectValue(g.unit,2,"unit",dn),!b))return null;let O=null;if(g["min-fraction-digits"]&&(O=u.parseObjectValue(g["min-fraction-digits"],2,"min-fraction-digits",tr),!O))return null;let D=null;return g["max-fraction-digits"]&&(D=u.parseObjectValue(g["max-fraction-digits"],2,"max-fraction-digits",tr),!D)?null:new wl(f,m,_,b,O,D)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(s):void 0,unit:this.unit?this.unit.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.unit&&s(this.unit),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const s={};return this.locale&&(s.locale=this.locale.serialize()),this.currency&&(s.currency=this.currency.serialize()),this.unit&&(s.unit=this.unit.serialize()),this.minFractionDigits&&(s["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(s["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),s]}}class ll{constructor(s){this.type=tr,this.input=s}static parse(s,u){if(s.length!==2)return u.error(`Expected 1 argument, but found ${s.length-1} instead.`);const f=u.parse(s[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${Di(f.type)} instead.`):new ll(f):null}evaluate(s){const u=this.input.evaluate(s);if(typeof u=="string"||Array.isArray(u))return u.length;throw new hs(`Expected value to be of type string or array, but found ${Di(Ji(u))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}serialize(){const s=["length"];return this.eachChild(u=>{s.push(u.serialize())}),s}}function Wh(h){return function(){h=1831565813+(h|=0)|0;let s=Math.imul(h^h>>>15,1|h);return s=s+Math.imul(s^s>>>7,61|s)^s,((s^s>>>14)>>>0)/4294967296}}const jd={"==":Hg,"!=":xc,">":Vu,"<":Qu,">=":Kh,"<=":$g,array:$o,at:op,"at-interpolated":bc,boolean:$o,case:$h,coalesce:lu,collator:au,format:Vd,image:Cu,in:xf,"index-of":Ud,interpolate:ts,"interpolate-hcl":ts,"interpolate-lab":ts,length:ll,let:Ou,literal:eu,match:Hh,number:$o,"number-format":wl,object:$o,slice:Bd,step:ou,string:$o,"to-boolean":tu,"to-color":tu,"to-number":tu,"to-string":tu,var:es,within:bu,distance:Eu,config:Xu};function am(h,[s,u,f,g]){s=s.evaluate(h),u=u.evaluate(h),f=f.evaluate(h);const m=g?g.evaluate(h):1,_=zl(s,u,f,m);if(_)throw new hs(_);return new zn(s/255*m,u/255*m,f/255*m,m)}function rm(h,[s,u,f,g]){s=s.evaluate(h),u=u.evaluate(h),f=f.evaluate(h);const m=g?g.evaluate(h):1,_=function(D,C,V,I){return typeof D=="number"&&D>=0&&D<=360?typeof C=="number"&&C>=0&&C<=100&&typeof V=="number"&&V>=0&&V<=100?I===void 0||typeof I=="number"&&I>=0&&I<=1?null:`Invalid hsla value [${[D,C,V,I].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof I=="number"?[D,C,V,I]:[D,C,V]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof I=="number"?[D,C,V,I]:[D,C,V]).join(", ")}]: 'h' must be between 0 and 360.`}(s,u,f,m);if(_)throw new hs(_);const b=`hsla(${s}, ${u}%, ${f}%, ${m})`,O=zn.parse(b);if(!O)throw new hs(`Failed to parse HSLA color: ${b}`);return O}function Yc(h,s){return h in s}function Ef(h,s){const u=s[h];return u===void 0?null:u}function ul(h){return{type:h}}function Gd(h){return{result:"success",value:h}}function zu(h){return{result:"error",value:h}}function Zd(h,s){return!!h&&!!h.parameters&&h.parameters.indexOf(s)>-1}function Xc(h){return h["property-type"]==="data-driven"}function Fl(h){return Zd(h.expression,"measure-light")}function ec(h){return Zd(h.expression,"zoom")}function Jc(h){return!!h.expression&&h.expression.interpolated}function lp(h){return typeof h=="object"&&h!==null&&!Array.isArray(h)}function qd(h){return h}function Qc(h,s){const u=s.type==="color",f=h.stops&&typeof h.stops[0][0]=="object",g=f||!(f||h.property!==void 0),m=h.type||(Jc(s)?"exponential":"interval");if(u&&((h=Nn({},h)).stops&&(h.stops=h.stops.map(D=>[D[0],zn.parse(D[1])])),h.default=zn.parse(h.default?h.default:s.default)),h.colorSpace&&h.colorSpace!=="rgb"&&!ol[h.colorSpace])throw new Error(`Unknown color space: ${h.colorSpace}`);let _,b,O;if(m==="exponential")_=Nf;else if(m==="interval")_=tg;else if(m==="categorical"){_=nm,b=Object.create(null);for(const D of h.stops)b[D[0]]=D[1];O=typeof h.stops[0][0]}else{if(m!=="identity")throw new Error(`Unknown function type "${m}"`);_=im}if(f){const D={},C=[];for(let z=0;z<h.stops.length;z++){const M=h.stops[z],B=M[0].zoom;D[B]===void 0&&(D[B]={zoom:B,type:h.type,property:h.property,default:h.default,stops:[]},C.push(B)),D[B].stops.push([M[0].value,M[1]])}const V=[];for(const z of C)V.push([D[z].zoom,Qc(D[z],s)]);const I={name:"linear"};return{kind:"composite",interpolationType:I,interpolationFactor:ts.interpolationFactor.bind(void 0,I),zoomStops:V.map(z=>z[0]),evaluate:({zoom:z},M)=>Nf({stops:V,base:h.base},s,z).evaluate(z,M)}}if(g){const D=m==="exponential"?{name:"exponential",base:h.base!==void 0?h.base:1}:null;return{kind:"camera",interpolationType:D,interpolationFactor:ts.interpolationFactor.bind(void 0,D),zoomStops:h.stops.map(C=>C[0]),evaluate:({zoom:C})=>_(h,s,C,b,O)}}return{kind:"source",evaluate(D,C){const V=C&&C.properties?C.properties[h.property]:void 0;return V===void 0?Gs(h.default,s.default):_(h,s,V,b,O)}}}function Gs(h,s,u){return h!==void 0?h:s!==void 0?s:u!==void 0?u:void 0}function nm(h,s,u,f,g){return Gs(typeof u===g?f[u]:void 0,h.default,s.default)}function tg(h,s,u){if(Su(u)!=="number")return Gs(h.default,s.default);const f=h.stops.length;if(f===1||u<=h.stops[0][0])return h.stops[0][1];if(u>=h.stops[f-1][0])return h.stops[f-1][1];const g=il(h.stops.map(m=>m[0]),u);return h.stops[g][1]}function Nf(h,s,u){const f=h.base!==void 0?h.base:1;if(Su(u)!=="number")return Gs(h.default,s.default);const g=h.stops.length;if(g===1||u<=h.stops[0][0])return h.stops[0][1];if(u>=h.stops[g-1][0])return h.stops[g-1][1];const m=il(h.stops.map(C=>C[0]),u),_=function(C,V,I,z){const M=z-I,B=C-I;return M===0?0:V===1?B/M:(Math.pow(V,B)-1)/(Math.pow(V,M)-1)}(u,f,h.stops[m][0],h.stops[m+1][0]),b=h.stops[m][1],O=h.stops[m+1][1];let D=mh[s.type]||qd;if(h.colorSpace&&h.colorSpace!=="rgb"){const C=ol[h.colorSpace];D=(V,I)=>C.reverse(C.interpolate(C.forward(V),C.forward(I),_))}return typeof b.evaluate=="function"?{evaluate(...C){const V=b.evaluate.apply(void 0,C),I=O.evaluate.apply(void 0,C);if(V!==void 0&&I!==void 0)return D(V,I,_)}}:D(b,O,_)}function im(h,s,u){return s.type==="color"?u=zn.parse(u):s.type==="formatted"?u=ys.fromString(u.toString()):s.type==="resolvedImage"?u=Vs.build(u.toString()):Su(u)===s.type||s.type==="enum"&&s.values[u]||(u=void 0),Gs(u,h.default,s.default)}Xs.register(jd,{error:[{kind:"error"},[dn],(h,[s])=>{throw new hs(s.evaluate(h))}],typeof:[dn,[yn],(h,[s])=>Di(Ji(s.evaluate(h)))],"to-rgba":[Ki(tr,4),[Ws],(h,[s])=>s.evaluate(h).toRenderColor(null).toArray()],"to-hsla":[Ki(tr,4),[Ws],(h,[s])=>s.evaluate(h).toRenderColor(null).toHslaArray()],rgb:[Ws,[tr,tr,tr],am],rgba:[Ws,[tr,tr,tr,tr],am],hsl:[Ws,[tr,tr,tr],rm],hsla:[Ws,[tr,tr,tr,tr],rm],has:{type:bn,overloads:[[[dn],(h,[s])=>Yc(s.evaluate(h),h.properties())],[[dn,Nd],(h,[s,u])=>Yc(s.evaluate(h),u.evaluate(h))]]},get:{type:yn,overloads:[[[dn],(h,[s])=>Ef(s.evaluate(h),h.properties())],[[dn,Nd],(h,[s,u])=>Ef(s.evaluate(h),u.evaluate(h))]]},"feature-state":[yn,[dn],(h,[s])=>Ef(s.evaluate(h),h.featureState||{})],properties:[Nd,[],h=>h.properties()],"geometry-type":[dn,[],h=>h.geometryType()],id:[yn,[],h=>h.id()],zoom:[tr,[],h=>h.globals.zoom],pitch:[tr,[],h=>h.globals.pitch||0],"distance-from-center":[tr,[],h=>h.distanceFromCenter()],"measure-light":[tr,[dn],(h,[s])=>h.measureLight(s.evaluate(h))],"heatmap-density":[tr,[],h=>h.globals.heatmapDensity||0],"line-progress":[tr,[],h=>h.globals.lineProgress||0],"raster-value":[tr,[],h=>h.globals.rasterValue||0],"raster-particle-speed":[tr,[],h=>h.globals.rasterParticleSpeed||0],"sky-radial-progress":[tr,[],h=>h.globals.skyRadialProgress||0],accumulated:[yn,[],h=>h.globals.accumulated===void 0?null:h.globals.accumulated],"+":[tr,ul(tr),(h,s)=>{let u=0;for(const f of s)u+=f.evaluate(h);return u}],"*":[tr,ul(tr),(h,s)=>{let u=1;for(const f of s)u*=f.evaluate(h);return u}],"-":{type:tr,overloads:[[[tr,tr],(h,[s,u])=>s.evaluate(h)-u.evaluate(h)],[[tr],(h,[s])=>-s.evaluate(h)]]},"/":[tr,[tr,tr],(h,[s,u])=>s.evaluate(h)/u.evaluate(h)],"%":[tr,[tr,tr],(h,[s,u])=>s.evaluate(h)%u.evaluate(h)],ln2:[tr,[],()=>Math.LN2],pi:[tr,[],()=>Math.PI],e:[tr,[],()=>Math.E],"^":[tr,[tr,tr],(h,[s,u])=>Math.pow(s.evaluate(h),u.evaluate(h))],sqrt:[tr,[tr],(h,[s])=>Math.sqrt(s.evaluate(h))],log10:[tr,[tr],(h,[s])=>Math.log(s.evaluate(h))/Math.LN10],ln:[tr,[tr],(h,[s])=>Math.log(s.evaluate(h))],log2:[tr,[tr],(h,[s])=>Math.log(s.evaluate(h))/Math.LN2],sin:[tr,[tr],(h,[s])=>Math.sin(s.evaluate(h))],cos:[tr,[tr],(h,[s])=>Math.cos(s.evaluate(h))],tan:[tr,[tr],(h,[s])=>Math.tan(s.evaluate(h))],asin:[tr,[tr],(h,[s])=>Math.asin(s.evaluate(h))],acos:[tr,[tr],(h,[s])=>Math.acos(s.evaluate(h))],atan:[tr,[tr],(h,[s])=>Math.atan(s.evaluate(h))],min:[tr,ul(tr),(h,s)=>Math.min(...s.map(u=>u.evaluate(h)))],max:[tr,ul(tr),(h,s)=>Math.max(...s.map(u=>u.evaluate(h)))],abs:[tr,[tr],(h,[s])=>Math.abs(s.evaluate(h))],round:[tr,[tr],(h,[s])=>{const u=s.evaluate(h);return u<0?-Math.round(-u):Math.round(u)}],floor:[tr,[tr],(h,[s])=>Math.floor(s.evaluate(h))],ceil:[tr,[tr],(h,[s])=>Math.ceil(s.evaluate(h))],"filter-==":[bn,[dn,yn],(h,[s,u])=>h.properties()[s.value]===u.value],"filter-id-==":[bn,[yn],(h,[s])=>h.id()===s.value],"filter-type-==":[bn,[dn],(h,[s])=>h.geometryType()===s.value],"filter-<":[bn,[dn,yn],(h,[s,u])=>{const f=h.properties()[s.value],g=u.value;return typeof f==typeof g&&f<g}],"filter-id-<":[bn,[yn],(h,[s])=>{const u=h.id(),f=s.value;return typeof u==typeof f&&u<f}],"filter->":[bn,[dn,yn],(h,[s,u])=>{const f=h.properties()[s.value],g=u.value;return typeof f==typeof g&&f>g}],"filter-id->":[bn,[yn],(h,[s])=>{const u=h.id(),f=s.value;return typeof u==typeof f&&u>f}],"filter-<=":[bn,[dn,yn],(h,[s,u])=>{const f=h.properties()[s.value],g=u.value;return typeof f==typeof g&&f<=g}],"filter-id-<=":[bn,[yn],(h,[s])=>{const u=h.id(),f=s.value;return typeof u==typeof f&&u<=f}],"filter->=":[bn,[dn,yn],(h,[s,u])=>{const f=h.properties()[s.value],g=u.value;return typeof f==typeof g&&f>=g}],"filter-id->=":[bn,[yn],(h,[s])=>{const u=h.id(),f=s.value;return typeof u==typeof f&&u>=f}],"filter-has":[bn,[yn],(h,[s])=>s.value in h.properties()],"filter-has-id":[bn,[],h=>h.id()!==null&&h.id()!==void 0],"filter-type-in":[bn,[Ki(dn)],(h,[s])=>s.value.indexOf(h.geometryType())>=0],"filter-id-in":[bn,[Ki(yn)],(h,[s])=>s.value.indexOf(h.id())>=0],"filter-in-small":[bn,[dn,Ki(yn)],(h,[s,u])=>u.value.indexOf(h.properties()[s.value])>=0],"filter-in-large":[bn,[dn,Ki(yn)],(h,[s,u])=>function(f,g,m,_){for(;m<=_;){const b=m+_>>1;if(g[b]===f)return!0;g[b]>f?_=b-1:m=b+1}return!1}(h.properties()[s.value],u.value,0,u.value.length-1)],all:{type:bn,overloads:[[[bn,bn],(h,[s,u])=>s.evaluate(h)&&u.evaluate(h)],[ul(bn),(h,s)=>{for(const u of s)if(!u.evaluate(h))return!1;return!0}]]},any:{type:bn,overloads:[[[bn,bn],(h,[s,u])=>s.evaluate(h)||u.evaluate(h)],[ul(bn),(h,s)=>{for(const u of s)if(u.evaluate(h))return!0;return!1}]]},"!":[bn,[bn],(h,[s])=>!s.evaluate(h)],"is-supported-script":[bn,[dn],(h,[s])=>{const u=h.globals&&h.globals.isSupportedScript;return!u||u(s.evaluate(h))}],upcase:[dn,[dn],(h,[s])=>s.evaluate(h).toUpperCase()],downcase:[dn,[dn],(h,[s])=>s.evaluate(h).toLowerCase()],concat:[dn,ul(yn),(h,s)=>s.map(u=>Ys(u.evaluate(h))).join("")],"resolved-locale":[dn,[Ho],(h,[s])=>s.evaluate(h).resolvedLocale()],random:[tr,[tr,tr,yn],(h,s)=>{const[u,f,g]=s.map(_=>_.evaluate(h));if(u>f||u===f)return u;let m;if(typeof g=="string")m=function(_){let b=0;if(_.length===0)return b;for(let O=0;O<_.length;O++)b=(b<<5)-b+_.charCodeAt(O),b|=0;return b}(g);else{if(typeof g!="number")throw new hs(`Invalid seed input: ${g}`);m=g}return u+Wh(m)()*(f-u)}]});class lo{constructor(s,u,f,g){this.expression=s,this._warningHistory={},this._evaluator=new zd(f,g),this._defaultValue=u?function(m){return m.type==="color"&&(lp(m.default)||Array.isArray(m.default))?new zn(0,0,0,0):m.type==="color"?zn.parse(m.default)||null:m.default===void 0?null:m.default}(u):null,this._enumValues=u&&u.type==="enum"?u.values:null,this.configDependencies=ai(s)}evaluateWithoutErrorHandling(s,u,f,g,m,_,b,O){return this._evaluator.globals=s,this._evaluator.feature=u,this._evaluator.featureState=f,this._evaluator.canonical=g||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=_,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=O||null,this.expression.evaluate(this._evaluator)}evaluate(s,u,f,g,m,_,b,O){this._evaluator.globals=s,this._evaluator.feature=u||null,this._evaluator.featureState=f||null,this._evaluator.canonical=g||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=_||null,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=O||null;try{const D=this.expression.evaluate(this._evaluator);if(D==null||typeof D=="number"&&D!=D)return this._defaultValue;if(this._enumValues&&!(D in this._enumValues))throw new hs(`Expected value to be one of ${Object.keys(this._enumValues).map(C=>JSON.stringify(C)).join(", ")}, but found ${JSON.stringify(D)} instead.`);return D}catch(D){return this._warningHistory[D.message]||(this._warningHistory[D.message]=!0,typeof console<"u"&&console.warn(`Failed to evaluate expression "${JSON.stringify(this.expression.serialize())}". ${D.message}`)),this._defaultValue}}}function Yh(h){return Array.isArray(h)&&h.length>0&&typeof h[0]=="string"&&h[0]in jd}function G(h,s,u,f){const g=new su(jd,[],s?function(_){const b={color:Ws,string:dn,number:tr,enum:dn,boolean:bn,formatted:Tu,resolvedImage:Os};return _.type==="array"?Ki(b[_.value]||yn,_.length):b[_.type]}(s):void 0,void 0,void 0,u,f),m=g.parse(h,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?Gd(new lo(m,s,u,f)):zu(g.errors)}class Q{constructor(s,u,f,g){this.kind=s,this._styleExpression=u,this.isLightConstant=f,this.isLineProgressConstant=g,this.isStateDependent=s!=="constant"&&!As(u.expression),this.configDependencies=ai(u.expression)}evaluateWithoutErrorHandling(s,u,f,g,m,_){return this._styleExpression.evaluateWithoutErrorHandling(s,u,f,g,m,_)}evaluate(s,u,f,g,m,_){return this._styleExpression.evaluate(s,u,f,g,m,_)}}class ye{constructor(s,u,f,g,m,_){this.kind=s,this.zoomStops=f,this._styleExpression=u,this.isStateDependent=s!=="camera"&&!As(u.expression),this.isLightConstant=m,this.isLineProgressConstant=_,this.configDependencies=ai(u.expression),this.interpolationType=g}evaluateWithoutErrorHandling(s,u,f,g,m,_){return this._styleExpression.evaluateWithoutErrorHandling(s,u,f,g,m,_)}evaluate(s,u,f,g,m,_){return this._styleExpression.evaluate(s,u,f,g,m,_)}interpolationFactor(s,u,f){return this.interpolationType?ts.interpolationFactor(this.interpolationType,s,u,f):0}}function Me(h,s,u,f){if((h=G(h,s,u,f)).result==="error")return h;const g=h.value.expression,m=Ko(g);if(!m&&!Xc(s))return zu([new Ks("","data expressions not supported")]);const _=li(g,["zoom","pitch","distance-from-center"]);if(!_&&!ec(s))return zu([new Ks("","zoom expressions not supported")]);const b=li(g,["measure-light"]);if(!b&&!Fl(s))return zu([new Ks("","measure-light expression not supported")]);const O=li(g,["line-progress"]);if(!O&&!function(V){return Zd(V.expression,"line-progress")}(s))return zu([new Ks("","line-progress expression not supported")]);const D=s.expression&&s.expression.relaxZoomRestriction,C=nt(g);return C||_||D?C instanceof Ks?zu([C]):C instanceof ts&&!Jc(s)?zu([new Ks("",'"interpolate" expressions cannot be used with this property')]):Gd(C?new ye(m&&O?"camera":"composite",h.value,C.labels,C instanceof ts?C.interpolation:void 0,b,O):new Q(m&&O?"constant":"source",h.value,b,O)):zu([new Ks("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class We{constructor(s,u){this._parameters=s,this._specification=u,Nn(this,Qc(this._parameters,this._specification))}static deserialize(s){return new We(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function nt(h){let s=null;if(h instanceof Ou)s=nt(h.result);else if(h instanceof lu){for(const u of h.args)if(s=nt(u),s)break}else(h instanceof ou||h instanceof ts)&&h.input instanceof Xs&&h.input.name==="zoom"&&(s=h);return s instanceof Ks||h.eachChild(u=>{const f=nt(u);f instanceof Ks?s=f:s&&f&&s!==f&&(s=new Ks("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),s}var st,ht,mt=function(){if(ht)return st;ht=1,st=s;var h=3;function s(u,f,g){var m=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;var _=new Int32Array(this.arrayBuffer);u=_[0],this.d=(f=_[1])+2*(g=_[2]);for(var b=0;b<this.d*this.d;b++){var O=_[h+b],D=_[h+b+1];m.push(O===D?null:_.subarray(O,D))}var C=_[h+m.length+1];this.keys=_.subarray(_[h+m.length],C),this.bboxes=_.subarray(C),this.insert=this._insertReadonly}else{this.d=f+2*g;for(var V=0;V<this.d*this.d;V++)m.push([]);this.keys=[],this.bboxes=[]}this.n=f,this.extent=u,this.padding=g,this.scale=f/u,this.uid=0;var I=g/f*u;this.min=-I,this.max=u+I}return s.prototype.insert=function(u,f,g,m,_){this._forEachCell(f,g,m,_,this._insertCell,this.uid++),this.keys.push(u),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(m),this.bboxes.push(_)},s.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},s.prototype._insertCell=function(u,f,g,m,_,b){this.cells[_].push(b)},s.prototype.query=function(u,f,g,m,_){var b=this.min,O=this.max;if(u<=b&&f<=b&&O<=g&&O<=m&&!_)return Array.prototype.slice.call(this.keys);var D=[];return this._forEachCell(u,f,g,m,this._queryCell,D,{},_),D},s.prototype._queryCell=function(u,f,g,m,_,b,O,D){var C=this.cells[_];if(C!==null)for(var V=this.keys,I=this.bboxes,z=0;z<C.length;z++){var M=C[z];if(O[M]===void 0){var B=4*M;(D?D(I[B+0],I[B+1],I[B+2],I[B+3]):u<=I[B+2]&&f<=I[B+3]&&g>=I[B+0]&&m>=I[B+1])?(O[M]=!0,b.push(V[M])):O[M]=!1}}},s.prototype._forEachCell=function(u,f,g,m,_,b,O,D){for(var C=this._convertToCellCoord(u),V=this._convertToCellCoord(f),I=this._convertToCellCoord(g),z=this._convertToCellCoord(m),M=C;M<=I;M++)for(var B=V;B<=z;B++){var J=this.d*B+M;if((!D||D(this._convertFromCellCoord(M),this._convertFromCellCoord(B),this._convertFromCellCoord(M+1),this._convertFromCellCoord(B+1)))&&_.call(this,u,f,g,m,J,b,O,D))return}},s.prototype._convertFromCellCoord=function(u){return(u-this.padding)/this.scale},s.prototype._convertToCellCoord=function(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))},s.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var u=this.cells,f=h+this.cells.length+1+1,g=0,m=0;m<this.cells.length;m++)g+=this.cells[m].length;var _=new Int32Array(f+g+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;for(var b=f,O=0;O<u.length;O++){var D=u[O];_[h+O]=b,_.set(D,b),b+=D.length}return _[h+u.length]=b,_.set(this.keys,b),_[h+u.length+1]=b+=this.keys.length,_.set(this.bboxes,b),b+=this.bboxes.length,_.buffer},st}(),St=v(mt);const ea={};function Pt(h,s,u={}){Object.defineProperty(h,"_classRegistryKey",{value:s,writable:!1}),ea[s]={klass:h,omit:u.omit||[]}}Pt(Object,"Object"),St.serialize=function(h,s){const u=h.toArrayBuffer();return s&&s.add(u),{buffer:u}},St.deserialize=function(h){return new St(h.buffer)},Object.defineProperty(St,"name",{value:"Grid"}),Pt(St,"Grid"),typeof DOMMatrix<"u"&&Pt(DOMMatrix,"DOMMatrix"),Pt(zn,"Color"),Pt(Error,"Error"),Pt(ys,"Formatted"),Pt(rl,"FormattedSection"),Pt($s,"AJAXError"),Pt(Vs,"ResolvedImage"),Pt(We,"StylePropertyFunction"),Pt(lo,"StyleExpression",{omit:["_evaluator"]}),Pt(qo,"ImageId"),Pt(Yu,"ImageVariant"),Pt(ye,"ZoomDependentExpression"),Pt(Q,"ZoomConstantExpression"),Pt(Xs,"CompoundExpression",{omit:["_evaluate"]});for(const h in jd)ea[jd[h]._classRegistryKey]||Pt(jd[h],`Expression${h}`);function _a(h){return h&&typeof ArrayBuffer<"u"&&(h instanceof ArrayBuffer||h.constructor&&h.constructor.name==="ArrayBuffer")}function na(h){return self.ImageBitmap&&h instanceof ImageBitmap}function Ta(h,s){if(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp)return h;if(_a(h)||na(h))return s&&s.add(h),h;if(ArrayBuffer.isView(h))return s&&s.add(h.buffer),h;if(h instanceof ImageData)return s&&s.add(h.data.buffer),h;if(Array.isArray(h)){const u=[];for(const f of h)u.push(Ta(f,s));return u}if(h instanceof Map){const u={$name:"Map",entries:[]};for(const[f,g]of h.entries())u.entries.push(Ta(f),Ta(g));return u}if(h instanceof Set){const u={$name:"Set"};let f=0;for(const g of h.values())u[++f]=Ta(g);return u}if(h instanceof DOMMatrix){const u={$name:"DOMMatrix"},f=["is2D","m11","m12","m13","m14","m21","m22","m23","m24","m31","m32","m33","m34","m41","m42","m43","m44","a","b","c","d","e","f"];for(const g of f)u[g]=h[g];return u}if(typeof h=="bigint")return{$name:"BigInt",value:h.toString()};if(typeof h=="object"){const u=h.constructor,f=u._classRegistryKey;if(!f)throw new Error(`Can't serialize object of unregistered class "${u.name}".`);const g=u.serialize?u.serialize(h,s):{};if(!u.serialize){for(const m in h)h.hasOwnProperty(m)&&(ea[f].omit.indexOf(m)>=0||(g[m]=Ta(h[m],s)));h instanceof Error&&(g.message=h.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(g.$name=f),g}throw new Error("can't serialize object of type "+typeof h)}function fa(h){if(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||_a(h)||na(h)||ArrayBuffer.isView(h)||h instanceof ImageData)return h;if(Array.isArray(h))return h.map(fa);if(typeof h=="object"){const s=h.$name||"Object";if(s==="Map"){const g=h.entries||[],m=new Map;for(let _=0;_<g.length;_+=2)m.set(fa(g[_]),fa(g[_+1]));return m}if(s==="Set"){const g=new Set;for(const m of Object.keys(h))m!=="$name"&&g.add(fa(h[m]));return g}if(s==="DOMMatrix"){let g;return g=h.is2D?[h.a,h.b,h.c,h.d,h.e,h.f]:[h.m11,h.m12,h.m13,h.m14,h.m21,h.m22,h.m23,h.m24,h.m31,h.m32,h.m33,h.m34,h.m41,h.m42,h.m43,h.m44],new DOMMatrix(g)}if(s==="BigInt")return BigInt(h.value);const{klass:u}=ea[s];if(!u)throw new Error(`Can't deserialize unregistered class "${s}".`);if(u.deserialize)return u.deserialize(h);const f=Object.create(u.prototype);for(const g of Object.keys(h))g!=="$name"&&(f[g]=fa(h[g]));return f}throw new Error("can't deserialize object of type "+typeof h)}const Rt={"Latin-1 Supplement":h=>h>=128&&h<=255,Arabic:h=>h>=1536&&h<=1791,"Arabic Supplement":h=>h>=1872&&h<=1919,"Arabic Extended-A":h=>h>=2208&&h<=2303,"Hangul Jamo":h=>h>=4352&&h<=4607,"Unified Canadian Aboriginal Syllabics":h=>h>=5120&&h<=5759,Khmer:h=>h>=6016&&h<=6143,"Unified Canadian Aboriginal Syllabics Extended":h=>h>=6320&&h<=6399,"General Punctuation":h=>h>=8192&&h<=8303,"Letterlike Symbols":h=>h>=8448&&h<=8527,"Number Forms":h=>h>=8528&&h<=8591,"Miscellaneous Technical":h=>h>=8960&&h<=9215,"Control Pictures":h=>h>=9216&&h<=9279,"Optical Character Recognition":h=>h>=9280&&h<=9311,"Enclosed Alphanumerics":h=>h>=9312&&h<=9471,"Geometric Shapes":h=>h>=9632&&h<=9727,"Miscellaneous Symbols":h=>h>=9728&&h<=9983,"Miscellaneous Symbols and Arrows":h=>h>=11008&&h<=11263,"CJK Radicals Supplement":h=>h>=11904&&h<=12031,"Kangxi Radicals":h=>h>=12032&&h<=12255,"Ideographic Description Characters":h=>h>=12272&&h<=12287,"CJK Symbols and Punctuation":h=>h>=12288&&h<=12351,Hiragana:h=>h>=12352&&h<=12447,Katakana:h=>h>=12448&&h<=12543,Bopomofo:h=>h>=12544&&h<=12591,"Hangul Compatibility Jamo":h=>h>=12592&&h<=12687,Kanbun:h=>h>=12688&&h<=12703,"Bopomofo Extended":h=>h>=12704&&h<=12735,"CJK Strokes":h=>h>=12736&&h<=12783,"Katakana Phonetic Extensions":h=>h>=12784&&h<=12799,"Enclosed CJK Letters and Months":h=>h>=12800&&h<=13055,"CJK Compatibility":h=>h>=13056&&h<=13311,"CJK Unified Ideographs Extension A":h=>h>=13312&&h<=19903,"Yijing Hexagram Symbols":h=>h>=19904&&h<=19967,"CJK Unified Ideographs":h=>h>=19968&&h<=40959,"Yi Syllables":h=>h>=40960&&h<=42127,"Yi Radicals":h=>h>=42128&&h<=42191,"Hangul Jamo Extended-A":h=>h>=43360&&h<=43391,"Hangul Syllables":h=>h>=44032&&h<=55215,"Hangul Jamo Extended-B":h=>h>=55216&&h<=55295,"Private Use Area":h=>h>=57344&&h<=63743,"CJK Compatibility Ideographs":h=>h>=63744&&h<=64255,"Arabic Presentation Forms-A":h=>h>=64336&&h<=65023,"Vertical Forms":h=>h>=65040&&h<=65055,"CJK Compatibility Forms":h=>h>=65072&&h<=65103,"Small Form Variants":h=>h>=65104&&h<=65135,"Arabic Presentation Forms-B":h=>h>=65136&&h<=65279,"Halfwidth and Fullwidth Forms":h=>h>=65280&&h<=65519,Osage:h=>h>=66736&&h<=66815,"CJK Unified Ideographs Extension B":h=>h>=131072&&h<=173791};function aa(h){for(const s of h)if(Ka(s.charCodeAt(0)))return!0;return!1}function Za(h){for(const s of h)if(!Qa(s.charCodeAt(0)))return!1;return!0}function Qa(h){return!(Rt.Arabic(h)||Rt["Arabic Supplement"](h)||Rt["Arabic Extended-A"](h)||Rt["Arabic Presentation Forms-A"](h)||Rt["Arabic Presentation Forms-B"](h))}function Ka(h){return!(h!==746&&h!==747&&(h<4352||!(Rt["Bopomofo Extended"](h)||Rt.Bopomofo(h)||Rt["CJK Compatibility Forms"](h)&&!(h>=65097&&h<=65103)||Rt["CJK Compatibility Ideographs"](h)||Rt["CJK Compatibility"](h)||Rt["CJK Radicals Supplement"](h)||Rt["CJK Strokes"](h)||!(!Rt["CJK Symbols and Punctuation"](h)||h>=12296&&h<=12305||h>=12308&&h<=12319||h===12336)||Rt["CJK Unified Ideographs Extension A"](h)||Rt["CJK Unified Ideographs"](h)||Rt["Enclosed CJK Letters and Months"](h)||Rt["Hangul Compatibility Jamo"](h)||Rt["Hangul Jamo Extended-A"](h)||Rt["Hangul Jamo Extended-B"](h)||Rt["Hangul Jamo"](h)||Rt["Hangul Syllables"](h)||Rt.Hiragana(h)||Rt["Ideographic Description Characters"](h)||Rt.Kanbun(h)||Rt["Kangxi Radicals"](h)||Rt["Katakana Phonetic Extensions"](h)||Rt.Katakana(h)&&h!==12540||!(!Rt["Halfwidth and Fullwidth Forms"](h)||h===65288||h===65289||h===65293||h>=65306&&h<=65310||h===65339||h===65341||h===65343||h>=65371&&h<=65503||h===65507||h>=65512&&h<=65519)||!(!Rt["Small Form Variants"](h)||h>=65112&&h<=65118||h>=65123&&h<=65126)||Rt["Unified Canadian Aboriginal Syllabics"](h)||Rt["Unified Canadian Aboriginal Syllabics Extended"](h)||Rt["Vertical Forms"](h)||Rt["Yijing Hexagram Symbols"](h)||Rt["Yi Syllables"](h)||Rt["Yi Radicals"](h))))}function Nr(h){return!(Ka(h)||function(s){return!!(Rt["Latin-1 Supplement"](s)&&(s===167||s===169||s===174||s===177||s===188||s===189||s===190||s===215||s===247)||Rt["General Punctuation"](s)&&(s===8214||s===8224||s===8225||s===8240||s===8241||s===8251||s===8252||s===8258||s===8263||s===8264||s===8265||s===8273)||Rt["Letterlike Symbols"](s)||Rt["Number Forms"](s)||Rt["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215)||Rt["Control Pictures"](s)&&s!==9251||Rt["Optical Character Recognition"](s)||Rt["Enclosed Alphanumerics"](s)||Rt["Geometric Shapes"](s)||Rt["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||Rt["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||Rt["CJK Symbols and Punctuation"](s)||Rt.Katakana(s)||Rt["Private Use Area"](s)||Rt["CJK Compatibility Forms"](s)||Rt["Small Form Variants"](s)||Rt["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533)}(h))}function Ar(h){return Rt.Arabic(h)||Rt["Arabic Supplement"](h)||Rt["Arabic Extended-A"](h)||Rt["Arabic Presentation Forms-A"](h)||Rt["Arabic Presentation Forms-B"](h)}function hn(h){return h>=1424&&h<=2303||Rt["Arabic Presentation Forms-A"](h)||Rt["Arabic Presentation Forms-B"](h)}function fr(h,s){return!(!s&&hn(h)||h>=2304&&h<=3583||h>=3840&&h<=4255||Rt.Khmer(h))}function Pi(h){for(const s of h)if(hn(s.charCodeAt(0)))return!0;return!1}const Mi="deferred",Yn="loading",ui="loaded";let as=null,Hn="unavailable",xn=null;const vs=function(h){h&&typeof h=="string"&&h.indexOf("NetworkError")>-1&&(Hn="error"),as&&as(h)};function Wi(){$n.fire(new Zo("pluginStateChange",{pluginStatus:Hn,pluginURL:xn}))}const $n=new Ql,wo=function(){return Hn},Ei=function(){if(Hn!==Mi||!xn)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Hn=Yn,Wi(),xn&&Ui({url:xn},h=>{h?vs(h):(Hn=ui,Wi())})},ps={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Hn===ui||ps.applyArabicShaping!=null,isLoading:()=>Hn===Yn,setState(h){Hn=h.pluginStatus,xn=h.pluginURL},isParsed:()=>ps.applyArabicShaping!=null&&ps.processBidirectionalText!=null&&ps.processStyledBidirectionalText!=null,getPluginURL:()=>xn};class Pn{constructor(s,u){this.zoom=s,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.transition=u.transition,this.pitch=u.pitch,this.brightness=u.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(s){return function(u,f){for(const g of u)if(!fr(g.charCodeAt(0),f))return!1;return!0}(s,ps.isLoaded())}}class qi{constructor(s,u,f,g){this.property=s,this.value=u,this.expression=function(m,_,b,O){if(lp(m))return new We(m,_);if(Yh(m)||Array.isArray(m)&&m.length>0){const D=Me(m,_,b,O);if(D.result==="error")throw new Error(D.value.map(C=>`${C.key}: ${C.message}`).join(", "));return D.value}{let D=m;return typeof m=="string"&&_.type==="color"&&(D=zn.parse(m)),{kind:"constant",configDependencies:new Set,evaluate:()=>D}}}(u===void 0?s.specification.default:u,s.specification,f,g)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(s,u,f){return this.property.possiblyEvaluate(this,s,u,f)}}class Qs{constructor(s,u,f){this.property=s,this.value=new qi(s,void 0,u,f)}transitioned(s,u){return new cl(this.property,this.value,u,un({},s.transition,this.transition),s.now)}untransitioned(){return new cl(this.property,this.value,null,{},0)}}class Oo{constructor(s,u,f){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues),this._scope=u,this._options=f,this.configDependencies=new Set}getValue(s){return Qr(this._values[s].value.value)}setValue(s,u){this._values.hasOwnProperty(s)||(this._values[s]=new Qs(this._values[s].property,this._scope,this._options)),this._values[s].value=new qi(this._values[s].property,u===null?void 0:Qr(u),this._scope,this._options),this._values[s].value.expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[s].value.expression.configDependencies]))}setTransitionOrValue(s,u){u&&(this._options=u);const f=this._properties.properties;if(s)for(const g in s){const m=s[g];if(g.endsWith("-transition")){const _=g.slice(0,-11);f[_]&&this.setTransition(_,m)}else f.hasOwnProperty(g)&&this.setValue(g,m)}}getTransition(s){return Qr(this._values[s].transition)}setTransition(s,u){this._values.hasOwnProperty(s)||(this._values[s]=new Qs(this._values[s].property)),this._values[s].transition=Qr(u)||void 0}serialize(){const s={};for(const u of Object.keys(this._values)){const f=this.getValue(u);f!==void 0&&(s[u]=f);const g=this.getTransition(u);g!==void 0&&(s[`${u}-transition`]=g)}return s}transitioned(s,u){const f=new kl(this._properties);for(const g of Object.keys(this._values))f._values[g]=this._values[g].transitioned(s,u._values[g]);return f}untransitioned(){const s=new kl(this._properties);for(const u of Object.keys(this._values))s._values[u]=this._values[u].untransitioned();return s}}class cl{constructor(s,u,f,g,m){const _=g.delay||0,b=g.duration||0;m=m||0,this.property=s,this.value=u,this.begin=m+_,this.end=this.begin+b,s.specification.transition&&(g.delay||g.duration)&&(this.prior=f)}possiblyEvaluate(s,u,f){const g=s.now||0,m=this.value.possiblyEvaluate(s,u,f),_=this.prior;if(_){if(g>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(g<this.begin)return _.possiblyEvaluate(s,u,f);{const b=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(s,u,f),m,or(b))}}return m}}class kl{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,u,f){const g=new Du(this._properties);for(const m of Object.keys(this._values))g._values[m]=this._values[m].possiblyEvaluate(s,u,f);return g}hasTransition(){for(const s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class Is{constructor(s,u,f){this._properties=s,this._values=Object.create(s.defaultPropertyValues),this._scope=u,this._options=f,this.configDependencies=new Set}getValue(s){return Qr(this._values[s].value)}setValue(s,u){this._values[s]=new qi(this._values[s].property,u===null?void 0:Qr(u),this._scope,this._options),this._values[s].expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[s].expression.configDependencies]))}serialize(){const s={};for(const u of Object.keys(this._values)){const f=this.getValue(u);f!==void 0&&(s[u]=f)}return s}possiblyEvaluate(s,u,f){const g=new Du(this._properties);for(const m of Object.keys(this._values))g._values[m]=this._values[m].possiblyEvaluate(s,u,f);return g}}class Ul{constructor(s,u,f){this.property=s,this.value=u,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(s){return this.value.kind==="constant"?this.value.value:s}evaluate(s,u,f,g){return this.property.evaluate(this.value,this.parameters,s,u,f,g)}}class Du{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class Ea{constructor(s){this.specification=s}possiblyEvaluate(s,u){return s.expression.evaluate(u)}interpolate(s,u,f){const g=mh[this.specification.type];return g?g(s,u,f):s}}class Ba{constructor(s,u){this.specification=s,this.overrides=u}possiblyEvaluate(s,u,f,g){return new Ul(this,s.expression.kind==="constant"||s.expression.kind==="camera"?{kind:"constant",value:s.expression.evaluate(u,null,{},f,g)}:s.expression,u)}interpolate(s,u,f){if(s.value.kind!=="constant"||u.value.kind!=="constant")return s;if(s.value.value===void 0||u.value.value===void 0)return new Ul(this,{kind:"constant",value:void 0},s.parameters);const g=mh[this.specification.type];return g?new Ul(this,{kind:"constant",value:g(s.value.value,u.value.value,f)},s.parameters):s}evaluate(s,u,f,g,m,_){return s.kind==="constant"?s.value:s.evaluate(u,f,g,m,_)}}class rs{constructor(s){this.specification=s}possiblyEvaluate(s,u,f,g){return!!s.expression.evaluate(u,null,{},f,g)}interpolate(){return!1}}class Bi{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const u=new Pn(0,{});for(const f in s){const g=s[f];g.specification.overridable&&this.overridableProperties.push(f);const m=this.defaultPropertyValues[f]=new qi(g,void 0),_=this.defaultTransitionablePropertyValues[f]=new Qs(g);this.defaultTransitioningPropertyValues[f]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=m.possiblyEvaluate(u)}}}Pt(Ba,"DataDrivenProperty"),Pt(Ea,"DataConstantProperty"),Pt(rs,"ColorRampProperty");var qt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"snow":{"type":"snow","experimental":true},"rain":{"type":"rain","experimental":true},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"indoor":{"type":"indoor","experimental":true},"imports":{"type":"array","value":"import"},"iconsets":{"experimental":true,"type":"iconsets"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"},"featuresets":{"experimental":true,"type":"featuresets"}},"featuresets":{"experimental":true,"*":{"type":"featureset"}},"featureset":{"experimental":true,"metadata":{"experimental":true,"type":"*"},"selectors":{"experimental":true,"type":"array","value":"selector"}},"selector":{"experimental":true,"layer":{"experimental":true,"type":"string","required":true},"properties":{"experimental":true,"type":"selectorProperty","required":false},"featureNamespace":{"experimental":true,"type":"string","required":false},"_uniqueFeatureID":{"experimental":true,"type":"boolean","private":true,"required":false}},"selectorProperty":{"experimental":true,"*":{"experimental":true,"type":"*"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"},"color-theme":{"type":"colorTheme","optional":true}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","property-type":"data-constant","expression":{},"required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"property-type":"data-constant"},"shadow-quality":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"parameters":["zoom"]},"experimental":true},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"iconsets":{"*":{"type":"iconset"}},"iconset":["iconset_sprite","iconset_source"],"iconset_sprite":{"type":{"required":true,"type":"enum","values":{"sprite":1}},"url":{"required":true,"type":"string"}},"iconset_source":{"type":{"required":true,"type":"enum","values":{"source":1}},"source":{"required":true,"type":"string"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"experimental":true,"type":{"required":true,"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"raster-particle":{"experimental":true},"hillshade":{},"model":{"experimental":true},"background":{},"sky":{},"slot":{},"clip":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{},"property-type":"data-constant"},"clip-layer-scope":{"type":"array","value":"string","default":[],"expression":{},"property-type":"data-constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-base":1,"hd-road-markup":1},"default":"none","experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"fill-construct-bridge-guard-rail":{"type":"boolean","default":"true","experimental":true,"private":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"circle-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-markup":1},"default":"none","experimental":true,"expression":{},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","experimental":true,"default":0,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"line-elevation-reference":{"type":"enum","values":{"none":1,"sea":1,"ground":1,"hd-road-markup":1},"default":"none","experimental":true,"expression":{},"property-type":"data-constant"},"line-cross-slope":{"type":"number","experimental":true,"expression":{},"property-type":"constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"line-width-unit":{"type":"enum","values":{"pixels":1,"meters":1},"default":"pixels","experimental":true,"private":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-elevation-reference":{"type":"enum","values":{"sea":1,"ground":1,"hd-road-markup":1},"default":"ground","experimental":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_hillshade":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster-particle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_clip":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_model":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"snow":{"density":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.85],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.3],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","property-type":"data-constant","default":"#ffffff","experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"center-thinning":{"type":"number","property-type":"data-constant","default":0.4,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,50],"minimum":0,"maximum":360,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"flake-size":{"type":"number","property-type":"data-constant","default":0.71,"minimum":0,"maximum":5,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"rain":{"density":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.5],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,"#03113d",0.3,"#a8adbc"],"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,0.88,1,0.7],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,1],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,"#001736",0.3,"#464646"],"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"center-thinning":{"type":"number","property-type":"data-constant","default":0.57,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,80],"minimum":0,"maximum":360,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"droplet-size":{"type":"array","default":[2.6,18.2],"minimum":0,"maximum":50,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"distortion-strength":{"type":"number","property-type":"data-constant","default":0.7,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"colorTheme":{"data":{"type":"string","property-type":"data-constant","expression":{}}},"indoor":{"floorplanFeaturesetId":{"type":"string","experimental":true,"property-type":"data-constant","expression":{}},"buildingFeaturesetId":{"type":"string","experimental":true,"property-type":"data-constant","expression":{}}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"fill-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-bridge-guard-rail-color":{"type":"color","default":"rgba(241, 236, 225, 255)","experimental":true,"private":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"},"fill-tunnel-structure-color":{"type":"color","default":"rgba(241, 236, 225, 255)","transition":true,"experimental":true,"private":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-height-alignment":{"type":"enum","experimental":true,"values":{"terrain":1,"flat":1},"default":"flat","property-type":"data-constant"},"fill-extrusion-base-alignment":{"type":"enum","experimental":true,"values":{"terrain":1,"flat":1},"default":"terrain","property-type":"data-constant"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","experimental":true,"default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","experimental":true,"default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"experimental":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"fill-extrusion-line-width":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light","line-progress"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-trim-fade-range":{"type":"array","value":"number","experimental":true,"length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-trim-color":{"type":"color","experimental":true,"default":"transparent","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"property-type":"data-constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"symbol-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"experimental":true,"property-type":"data-constant"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-particle-count":{"type":"number","default":512,"minimum":1,"property-type":"data-constant"},"raster-particle-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-particle-speed"]},"property-type":"color-ramp"},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1,"property-type":"data-constant"},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1,"property-type":"data-constant"},"raster-particle-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":[]},"experimental":true,"property-type":"data-constant"},"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"property-type":"data-driven"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"model-front-cutoff":{"type":"array","private":true,"value":"number","property-type":"data-constant","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"*"}}}');function sm(h){return h instanceof Number||h instanceof String||h instanceof Boolean?h.valueOf():h}function _h(h){if(Array.isArray(h))return h.map(_h);if(h instanceof Object&&!(h instanceof Number||h instanceof String||h instanceof Boolean)){const s={};for(const u in h)s[u]=_h(h[u]);return s}return sm(h)}function wh(h){if(h===!0||h===!1)return!0;if(!Array.isArray(h)||h.length===0)return!1;switch(h[0]){case"has":return h.length>=2&&h[1]!=="$id"&&h[1]!=="$type";case"in":return h.length>=3&&(typeof h[1]!="string"||Array.isArray(h[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return h.length!==3||Array.isArray(h[1])||Array.isArray(h[2]);case"any":case"all":for(const s of h.slice(1))if(!wh(s)&&typeof s!="boolean")return!1;return!0;default:return!0}}function Rh(h,s="",u=null,f="fill"){if(h==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};wh(h)||(h=Ch(h));const g=h;let m=!0;try{m=function(C){if(!tc(C))return C;let V=_h(C);return Th(V),V=Mu(V),V}(g)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(g,null,2)}
        `)}let _=null,b=null;if(f!=="background"&&f!=="sky"&&f!=="slot"){b=qt[`filter_${f}`];const C=G(m,b,s,u);if(C.result==="error")throw new Error(C.value.map(V=>`${V.key}: ${V.message}`).join(", "));_=(V,I,z)=>C.value.evaluate(V,I,{},z)}let O=null,D=null;if(m!==g){const C=G(g,b,s,u);if(C.result==="error")throw new Error(C.value.map(V=>`${V.key}: ${V.message}`).join(", "));O=(V,I,z,M,B)=>C.value.evaluate(V,I,{},z,void 0,void 0,M,B),D=!Ko(C.value.expression)}return{filter:_,dynamicFilter:O||void 0,needGeometry:rg(m),needFeature:!!D}}function Mu(h){if(!Array.isArray(h))return h;const s=function(u){if(ag.has(u[0])){for(let f=1;f<u.length;f++)if(tc(u[f]))return!0}return u}(h);return s===!0?s:s.map(u=>Mu(u))}function Th(h){let s=!1;const u=[];if(h[0]==="case"){for(let f=1;f<h.length-1;f+=2)s=s||tc(h[f]),u.push(h[f+1]);u.push(h[h.length-1])}else if(h[0]==="match"){s=s||tc(h[1]);for(let f=2;f<h.length-1;f+=2)u.push(h[f+1]);u.push(h[h.length-1])}else if(h[0]==="step"){s=s||tc(h[1]);for(let f=1;f<h.length-1;f+=2)u.push(h[f+1])}s&&(h.length=0,h.push("any",...u));for(let f=1;f<h.length;f++)Th(h[f])}function tc(h){if(!Array.isArray(h))return!1;if((s=h[0])==="pitch"||s==="distance-from-center")return!0;var s;for(let u=1;u<h.length;u++)if(tc(h[u]))return!0;return!1}const ag=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function up(h,s){return h<s?-1:h>s?1:0}function rg(h){if(!Array.isArray(h))return!1;if(h[0]==="within"||h[0]==="distance")return!0;for(let s=1;s<h.length;s++)if(rg(h[s]))return!0;return!1}function Ch(h){if(!h)return!0;const s=h[0];return h.length<=1?s!=="any":s==="=="?Bl(h[1],h[2],"=="):s==="!="?td(Bl(h[1],h[2],"==")):s==="<"||s===">"||s==="<="||s===">="?Bl(h[1],h[2],s):s==="any"?(u=h.slice(1),["any"].concat(u.map(Ch))):s==="all"?["all"].concat(h.slice(1).map(Ch)):s==="none"?["all"].concat(h.slice(1).map(Ch).map(td)):s==="in"?Xh(h[1],h.slice(2)):s==="!in"?td(Xh(h[1],h.slice(2))):s==="has"?ed(h[1]):s!=="!has"||td(ed(h[1]));var u}function Bl(h,s,u){switch(h){case"$type":return[`filter-type-${u}`,s];case"$id":return[`filter-id-${u}`,s];default:return[`filter-${u}`,h,s]}}function Xh(h,s){if(s.length===0)return!1;switch(h){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(u=>typeof u!=typeof s[0])?["filter-in-large",h,["literal",s.sort(up)]]:["filter-in-small",h,["literal",s]]}}function ed(h){switch(h){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",h]}}function td(h){return["!",h]}const cp="";function ad(h,s){return s?`${h}${cp}${s}`:h}const dl="-transition",ng=new Set(["fill","line","background","hillshade","raster"]);class uo extends Ql{constructor(s,u,f,g,m){if(super(),this.id=s.id,this.fqid=ad(this.id,f),this.type=s.type,this.scope=f,this.lut=g,this.options=m,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.configDependencies=new Set,s.type!=="custom"){if(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type&&s.type!=="background"&&s.type!=="sky"&&s.type!=="slot"){this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter;const _=G(this.filter,qt[`filter_${s.type}`]);_.result!=="error"&&(this.configDependencies=new Set([...this.configDependencies,..._.value.configDependencies]))}if(s.slot&&(this.slot=s.slot),u.layout&&(this._unevaluatedLayout=new Is(u.layout,this.scope,m),this.configDependencies=new Set([...this.configDependencies,...this._unevaluatedLayout.configDependencies])),u.paint){this._transitionablePaint=new Oo(u.paint,this.scope,m);for(const _ in s.paint)this.setPaintProperty(_,s.paint[_]);for(const _ in s.layout)this.setLayoutProperty(_,s.layout[_]);this.configDependencies=new Set([...this.configDependencies,...this._transitionablePaint.configDependencies]),this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Du(u.paint)}}}onAdd(s){}onRemove(s){}isDraped(s){return!this.is3D(!0)&&ng.has(this.type)}getLayoutProperty(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)}setLayoutProperty(s,u){if(this.type==="custom"&&s==="visibility")return void(this.visibility=u);const f=this._unevaluatedLayout;f._properties.properties[s]&&(f.setValue(s,u),this.configDependencies=new Set([...this.configDependencies,...f.configDependencies]),s==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this._unevaluatedLayout._values.visibility&&(this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0}))}getPaintProperty(s){return s.endsWith(dl)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,u){const f=this._transitionablePaint,g=f._properties.properties;if(s.endsWith(dl)){const V=s.slice(0,-11);return g[V]&&f.setTransition(V,u||void 0),!1}if(!g[s])return!1;const m=f._values[s],_=m.value.isDataDriven(),b=m.value;f.setValue(s,u),this.configDependencies=new Set([...this.configDependencies,...f.configDependencies]),this._handleSpecialPaintPropertyUpdate(s);const O=f._values[s].value,D=O.isDataDriven(),C=s.endsWith("pattern")||s==="line-dasharray";return D||_||C||this._handleOverridablePaintPropertyUpdate(s,b,O)}_handleSpecialPaintPropertyUpdate(s){}getProgramIds(){return null}getDefaultProgramParams(s,u,f){return null}_handleOverridablePaintPropertyUpdate(s,u,f){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,u){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,u)}serialize(){return Tn({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(s,u)=>!(s===void 0||u==="layout"&&!Object.keys(s).length||u==="paint"&&!Object.keys(s).length))}is3D(s){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const s in this.paint._values){const u=this.paint.get(s);if(u instanceof Ul&&Xc(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}compileFilter(s){this._filterCompiled||(this._featureFilter=Rh(this.filter,this.scope,s),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(s){this._stats&&(s.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}queryRadius(s){}queryIntersectsFeature(s,u,f,g,m,_,b,O,D){}}const Kg={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Sh{constructor(s,u){this._structArray=s,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ci{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,u){return s._trim(),u&&(s.isTransferred=!0,u.add(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){const u=Object.create(this.prototype);return u.arrayBuffer=s.arrayBuffer,u.length=s.length,u.capacity=s.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...s){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...s){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Mn(h,s=1){let u=0,f=0;return{members:h.map(g=>{const m=Kg[g.type].BYTES_PER_ELEMENT,_=u=dp(u,Math.max(s,m)),b=g.components||1;return f=Math.max(f,m),u+=m*b,{name:g.name,type:g.type,components:b,offset:_}}),size:dp(u,Math.max(f,s)),alignment:s}}function dp(h,s){return Math.ceil(h/s)*s}class Iu extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u){const f=this.length;return this.resize(f+1),this.emplace(f,s,u)}emplace(s,u,f){const g=2*s;return this.int16[g+0]=u,this.int16[g+1]=f,s}}Iu.prototype.bytesPerElement=4,Pt(Iu,"StructArrayLayout2i4");class Hd extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,s,u,f)}emplace(s,u,f,g){const m=3*s;return this.int16[m+0]=u,this.int16[m+1]=f,this.int16[m+2]=g,s}}Hd.prototype.bytesPerElement=6,Pt(Hd,"StructArrayLayout3i6");class Lu extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,f,g){const m=this.length;return this.resize(m+1),this.emplace(m,s,u,f,g)}emplace(s,u,f,g,m){const _=4*s;return this.int16[_+0]=u,this.int16[_+1]=f,this.int16[_+2]=g,this.int16[_+3]=m,s}}Lu.prototype.bytesPerElement=8,Pt(Lu,"StructArrayLayout4i8");class rd extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){const u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.float32[1*s+0]=u,s}}rd.prototype.bytesPerElement=4,Pt(rd,"StructArrayLayout1f4");class Of extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,s,u,f)}emplace(s,u,f,g){const m=4*s,_=2*s;return this.int16[m+0]=u,this.int16[m+1]=f,this.float32[_+1]=g,s}}Of.prototype.bytesPerElement=8,Pt(Of,"StructArrayLayout2i1f8");class Jh extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,s,u,f)}emplace(s,u,f,g){const m=4*s;return this.int16[m+0]=u,this.int16[m+1]=f,this.int16[m+2]=g,s}}Jh.prototype.bytesPerElement=8,Pt(Jh,"StructArrayLayout3i8");class jl extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m){const _=this.length;return this.resize(_+1),this.emplace(_,s,u,f,g,m)}emplace(s,u,f,g,m,_){const b=5*s;return this.int16[b+0]=u,this.int16[b+1]=f,this.int16[b+2]=g,this.int16[b+3]=m,this.int16[b+4]=_,s}}jl.prototype.bytesPerElement=10,Pt(jl,"StructArrayLayout5i10");class Vf extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b){const O=this.length;return this.resize(O+1),this.emplace(O,s,u,f,g,m,_,b)}emplace(s,u,f,g,m,_,b,O){const D=6*s,C=12*s,V=3*s;return this.int16[D+0]=u,this.int16[D+1]=f,this.uint8[C+4]=g,this.uint8[C+5]=m,this.uint8[C+6]=_,this.uint8[C+7]=b,this.float32[V+2]=O,s}}Vf.prototype.bytesPerElement=12,Pt(Vf,"StructArrayLayout2i4ub1f12");class Vo extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,s,u,f)}emplace(s,u,f,g){const m=3*s;return this.float32[m+0]=u,this.float32[m+1]=f,this.float32[m+2]=g,s}}Vo.prototype.bytesPerElement=12,Pt(Vo,"StructArrayLayout3f12");class $d extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m){const _=this.length;return this.resize(_+1),this.emplace(_,s,u,f,g,m)}emplace(s,u,f,g,m,_){const b=6*s,O=3*s;return this.uint16[b+0]=u,this.uint16[b+1]=f,this.uint16[b+2]=g,this.uint16[b+3]=m,this.float32[O+2]=_,s}}$d.prototype.bytesPerElement=12,Pt($d,"StructArrayLayout4ui1f12");class hp extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,f,g){const m=this.length;return this.resize(m+1),this.emplace(m,s,u,f,g)}emplace(s,u,f,g,m){const _=4*s;return this.uint16[_+0]=u,this.uint16[_+1]=f,this.uint16[_+2]=g,this.uint16[_+3]=m,s}}hp.prototype.bytesPerElement=8,Pt(hp,"StructArrayLayout4ui8");class fp extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_){const b=this.length;return this.resize(b+1),this.emplace(b,s,u,f,g,m,_)}emplace(s,u,f,g,m,_,b){const O=6*s;return this.int16[O+0]=u,this.int16[O+1]=f,this.int16[O+2]=g,this.int16[O+3]=m,this.int16[O+4]=_,this.int16[O+5]=b,s}}fp.prototype.bytesPerElement=12,Pt(fp,"StructArrayLayout6i12");class bh extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b,O,D,C,V,I){const z=this.length;return this.resize(z+1),this.emplace(z,s,u,f,g,m,_,b,O,D,C,V,I)}emplace(s,u,f,g,m,_,b,O,D,C,V,I,z){const M=12*s;return this.int16[M+0]=u,this.int16[M+1]=f,this.int16[M+2]=g,this.int16[M+3]=m,this.uint16[M+4]=_,this.uint16[M+5]=b,this.uint16[M+6]=O,this.uint16[M+7]=D,this.int16[M+8]=C,this.int16[M+9]=V,this.int16[M+10]=I,this.int16[M+11]=z,s}}bh.prototype.bytesPerElement=24,Pt(bh,"StructArrayLayout4i4ui4i24");class nd extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_){const b=this.length;return this.resize(b+1),this.emplace(b,s,u,f,g,m,_)}emplace(s,u,f,g,m,_,b){const O=10*s,D=5*s;return this.int16[O+0]=u,this.int16[O+1]=f,this.int16[O+2]=g,this.float32[D+2]=m,this.float32[D+3]=_,this.float32[D+4]=b,s}}nd.prototype.bytesPerElement=20,Pt(nd,"StructArrayLayout3i3f20");class id extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g){const m=this.length;return this.resize(m+1),this.emplace(m,s,u,f,g)}emplace(s,u,f,g,m){const _=4*s;return this.float32[_+0]=u,this.float32[_+1]=f,this.float32[_+2]=g,this.float32[_+3]=m,s}}id.prototype.bytesPerElement=16,Pt(id,"StructArrayLayout4f16");class pp extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){const u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.uint32[1*s+0]=u,s}}pp.prototype.bytesPerElement=4,Pt(pp,"StructArrayLayout1ul4");class Kd extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u){const f=this.length;return this.resize(f+1),this.emplace(f,s,u)}emplace(s,u,f){const g=2*s;return this.uint16[g+0]=u,this.uint16[g+1]=f,s}}Kd.prototype.bytesPerElement=4,Pt(Kd,"StructArrayLayout2ui4");class Fu extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b,O,D,C,V,I,z){const M=this.length;return this.resize(M+1),this.emplace(M,s,u,f,g,m,_,b,O,D,C,V,I,z)}emplace(s,u,f,g,m,_,b,O,D,C,V,I,z,M){const B=20*s,J=10*s;return this.int16[B+0]=u,this.int16[B+1]=f,this.int16[B+2]=g,this.int16[B+3]=m,this.int16[B+4]=_,this.float32[J+3]=b,this.float32[J+4]=O,this.float32[J+5]=D,this.float32[J+6]=C,this.int16[B+14]=V,this.uint32[J+8]=I,this.uint16[B+18]=z,this.uint16[B+19]=M,s}}Fu.prototype.bytesPerElement=40,Pt(Fu,"StructArrayLayout5i4f1i1ul2ui40");class Pc extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b){const O=this.length;return this.resize(O+1),this.emplace(O,s,u,f,g,m,_,b)}emplace(s,u,f,g,m,_,b,O){const D=8*s;return this.int16[D+0]=u,this.int16[D+1]=f,this.int16[D+2]=g,this.int16[D+4]=m,this.int16[D+5]=_,this.int16[D+6]=b,this.int16[D+7]=O,s}}Pc.prototype.bytesPerElement=16,Pt(Pc,"StructArrayLayout3i2i2i16");class uu extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m){const _=this.length;return this.resize(_+1),this.emplace(_,s,u,f,g,m)}emplace(s,u,f,g,m,_){const b=4*s,O=8*s;return this.float32[b+0]=u,this.float32[b+1]=f,this.float32[b+2]=g,this.int16[O+6]=m,this.int16[O+7]=_,s}}uu.prototype.bytesPerElement=16,Pt(uu,"StructArrayLayout2f1f2i16");class Ec extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_){const b=this.length;return this.resize(b+1),this.emplace(b,s,u,f,g,m,_)}emplace(s,u,f,g,m,_,b){const O=20*s,D=5*s;return this.uint8[O+0]=u,this.uint8[O+1]=f,this.float32[D+1]=g,this.float32[D+2]=m,this.float32[D+3]=_,this.float32[D+4]=b,s}}Ec.prototype.bytesPerElement=20,Pt(Ec,"StructArrayLayout2ub4f20");class Ls extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,s,u,f)}emplace(s,u,f,g){const m=3*s;return this.uint16[m+0]=u,this.uint16[m+1]=f,this.uint16[m+2]=g,s}}Ls.prototype.bytesPerElement=6,Pt(Ls,"StructArrayLayout3ui6");class cu extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b,O,D,C,V,I,z,M,B,J,te,he,de,ne,Ae){const xe=this.length;return this.resize(xe+1),this.emplace(xe,s,u,f,g,m,_,b,O,D,C,V,I,z,M,B,J,te,he,de,ne,Ae)}emplace(s,u,f,g,m,_,b,O,D,C,V,I,z,M,B,J,te,he,de,ne,Ae,xe){const Oe=30*s,Qe=15*s,Ye=60*s;return this.int16[Oe+0]=u,this.int16[Oe+1]=f,this.int16[Oe+2]=g,this.float32[Qe+2]=m,this.float32[Qe+3]=_,this.uint16[Oe+8]=b,this.uint16[Oe+9]=O,this.uint32[Qe+5]=D,this.uint32[Qe+6]=C,this.uint32[Qe+7]=V,this.uint16[Oe+16]=I,this.uint16[Oe+17]=z,this.uint16[Oe+18]=M,this.float32[Qe+10]=B,this.float32[Qe+11]=J,this.uint8[Ye+48]=te,this.uint8[Ye+49]=he,this.uint8[Ye+50]=de,this.uint32[Qe+13]=ne,this.int16[Oe+28]=Ae,this.uint8[Ye+58]=xe,s}}cu.prototype.bytesPerElement=60,Pt(cu,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class ac extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b,O,D,C,V,I,z,M,B,J,te,he,de,ne,Ae,xe,Oe,Qe,Ye,Xe,gt,et,_t,xt,Ct,Dt,Nt){const jt=this.length;return this.resize(jt+1),this.emplace(jt,s,u,f,g,m,_,b,O,D,C,V,I,z,M,B,J,te,he,de,ne,Ae,xe,Oe,Qe,Ye,Xe,gt,et,_t,xt,Ct,Dt,Nt)}emplace(s,u,f,g,m,_,b,O,D,C,V,I,z,M,B,J,te,he,de,ne,Ae,xe,Oe,Qe,Ye,Xe,gt,et,_t,xt,Ct,Dt,Nt,jt){const Lt=20*s,Ht=40*s,Aa=80*s;return this.float32[Lt+0]=u,this.float32[Lt+1]=f,this.int16[Ht+4]=g,this.int16[Ht+5]=m,this.int16[Ht+6]=_,this.int16[Ht+7]=b,this.int16[Ht+8]=O,this.int16[Ht+9]=D,this.int16[Ht+10]=C,this.int16[Ht+11]=V,this.int16[Ht+12]=I,this.uint16[Ht+13]=z,this.uint16[Ht+14]=M,this.uint16[Ht+15]=B,this.uint16[Ht+16]=J,this.uint16[Ht+17]=te,this.uint16[Ht+18]=he,this.uint16[Ht+19]=de,this.uint16[Ht+20]=ne,this.uint16[Ht+21]=Ae,this.uint16[Ht+22]=xe,this.uint16[Ht+23]=Oe,this.uint16[Ht+24]=Qe,this.uint16[Ht+25]=Ye,this.uint16[Ht+26]=Xe,this.uint16[Ht+27]=gt,this.uint32[Lt+14]=et,this.float32[Lt+15]=_t,this.float32[Lt+16]=xt,this.float32[Lt+17]=Ct,this.float32[Lt+18]=Dt,this.uint8[Aa+76]=Nt,this.uint16[Ht+39]=jt,s}}ac.prototype.bytesPerElement=80,Pt(ac,"StructArrayLayout2f9i15ui1ul4f1ub1ui80");class eo extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m){const _=this.length;return this.resize(_+1),this.emplace(_,s,u,f,g,m)}emplace(s,u,f,g,m,_){const b=5*s;return this.float32[b+0]=u,this.float32[b+1]=f,this.float32[b+2]=g,this.float32[b+3]=m,this.float32[b+4]=_,s}}eo.prototype.bytesPerElement=20,Pt(eo,"StructArrayLayout5f20");class ku extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b){const O=this.length;return this.resize(O+1),this.emplace(O,s,u,f,g,m,_,b)}emplace(s,u,f,g,m,_,b,O){const D=7*s;return this.float32[D+0]=u,this.float32[D+1]=f,this.float32[D+2]=g,this.float32[D+3]=m,this.float32[D+4]=_,this.float32[D+5]=b,this.float32[D+6]=O,s}}ku.prototype.bytesPerElement=28,Pt(ku,"StructArrayLayout7f28");class xh extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b,O,D,C,V){const I=this.length;return this.resize(I+1),this.emplace(I,s,u,f,g,m,_,b,O,D,C,V)}emplace(s,u,f,g,m,_,b,O,D,C,V,I){const z=11*s;return this.float32[z+0]=u,this.float32[z+1]=f,this.float32[z+2]=g,this.float32[z+3]=m,this.float32[z+4]=_,this.float32[z+5]=b,this.float32[z+6]=O,this.float32[z+7]=D,this.float32[z+8]=C,this.float32[z+9]=V,this.float32[z+10]=I,s}}xh.prototype.bytesPerElement=44,Pt(xh,"StructArrayLayout11f44");class mp extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b,O,D){const C=this.length;return this.resize(C+1),this.emplace(C,s,u,f,g,m,_,b,O,D)}emplace(s,u,f,g,m,_,b,O,D,C){const V=9*s;return this.float32[V+0]=u,this.float32[V+1]=f,this.float32[V+2]=g,this.float32[V+3]=m,this.float32[V+4]=_,this.float32[V+5]=b,this.float32[V+6]=O,this.float32[V+7]=D,this.float32[V+8]=C,s}}mp.prototype.bytesPerElement=36,Pt(mp,"StructArrayLayout9f36");class Qh extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u){const f=this.length;return this.resize(f+1),this.emplace(f,s,u)}emplace(s,u,f){const g=2*s;return this.float32[g+0]=u,this.float32[g+1]=f,s}}Qh.prototype.bytesPerElement=8,Pt(Qh,"StructArrayLayout2f8");class Ph extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,f,g){const m=this.length;return this.resize(m+1),this.emplace(m,s,u,f,g)}emplace(s,u,f,g,m){const _=6*s;return this.uint32[3*s+0]=u,this.uint16[_+2]=f,this.uint16[_+3]=g,this.uint16[_+4]=m,s}}Ph.prototype.bytesPerElement=12,Pt(Ph,"StructArrayLayout1ul3ui12");class Wd extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){const u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.uint16[1*s+0]=u,s}}Wd.prototype.bytesPerElement=2,Pt(Wd,"StructArrayLayout1ui2");class ig extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b,O,D,C,V,I,z,M,B,J){const te=this.length;return this.resize(te+1),this.emplace(te,s,u,f,g,m,_,b,O,D,C,V,I,z,M,B,J)}emplace(s,u,f,g,m,_,b,O,D,C,V,I,z,M,B,J,te){const he=16*s;return this.float32[he+0]=u,this.float32[he+1]=f,this.float32[he+2]=g,this.float32[he+3]=m,this.float32[he+4]=_,this.float32[he+5]=b,this.float32[he+6]=O,this.float32[he+7]=D,this.float32[he+8]=C,this.float32[he+9]=V,this.float32[he+10]=I,this.float32[he+11]=z,this.float32[he+12]=M,this.float32[he+13]=B,this.float32[he+14]=J,this.float32[he+15]=te,s}}ig.prototype.bytesPerElement=64,Pt(ig,"StructArrayLayout16f64");class om extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,f,g,m,_,b){const O=this.length;return this.resize(O+1),this.emplace(O,s,u,f,g,m,_,b)}emplace(s,u,f,g,m,_,b,O){const D=10*s,C=5*s;return this.uint16[D+0]=u,this.uint16[D+1]=f,this.uint16[D+2]=g,this.uint16[D+3]=m,this.float32[C+2]=_,this.float32[C+3]=b,this.float32[C+4]=O,s}}om.prototype.bytesPerElement=20,Pt(om,"StructArrayLayout4ui3f20");class sg extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s){const u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.int16[1*s+0]=u,s}}sg.prototype.bytesPerElement=2,Pt(sg,"StructArrayLayout1i2");class Wg extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(s){const u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.uint8[1*s+0]=u,s}}Wg.prototype.bytesPerElement=1,Pt(Wg,"StructArrayLayout1ub1");class pA extends Sh{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}pA.prototype.size=40;class lm extends Fu{get(s){return new pA(this,s)}}Pt(lm,"CollisionBoxArray");class hl extends Sh{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(s){this._structArray.uint8[this._pos1+49]=s}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(s){this._structArray.uint8[this._pos1+50]=s}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(s){this._structArray.uint32[this._pos4+13]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(s){this._structArray.uint8[this._pos1+58]=s}}hl.prototype.size=60;class Rl extends cu{get(s){return new hl(this,s)}}Pt(Rl,"PlacedSymbolArray");class mA extends Sh{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(s){this._structArray.uint32[this._pos4+14]=s}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(s){this._structArray.float32[this._pos4+18]=s}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}get elevationFeatureIndex(){return this._structArray.uint16[this._pos2+39]}}mA.prototype.size=80;class gA extends ac{get(s){return new mA(this,s)}}Pt(gA,"SymbolInstanceArray");class yA extends rd{getoffsetX(s){return this.float32[1*s+0]}}Pt(yA,"GlyphOffsetArray");class um extends Iu{getx(s){return this.int16[2*s+0]}gety(s){return this.int16[2*s+1]}}Pt(um,"SymbolLineVertexArray");class cm extends Sh{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}cm.prototype.size=12;class Tl extends Ph{get(s){return new cm(this,s)}}Pt(Tl,"FeatureIndexArray");class gp extends Kd{geta_centroid_pos0(s){return this.uint16[2*s+0]}geta_centroid_pos1(s){return this.uint16[2*s+1]}}Pt(gp,"FillExtrusionCentroidArray");class AA extends Sh{get a_join_normal_inside0(){return this._structArray.int16[this._pos2+0]}get a_join_normal_inside1(){return this._structArray.int16[this._pos2+1]}get a_join_normal_inside2(){return this._structArray.int16[this._pos2+2]}}AA.prototype.size=6;class vA extends Hd{get(s){return new AA(this,s)}}Pt(vA,"FillExtrusionWallArray");const t0=Mn([{name:"a_pos",components:2,type:"Int16"}],4),_A=Mn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class ji{constructor(s=[]){this.segments=s}_prepareSegment(s,u,f,g){let m=this.segments[this.segments.length-1];return s>ji.MAX_VERTEX_ARRAY_LENGTH&&$r(`Max vertices per segment is ${ji.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}`),(!m||m.vertexLength+s>ji.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==g)&&(m={vertexOffset:u,primitiveOffset:f,vertexLength:0,primitiveLength:0},g!==void 0&&(m.sortKey=g),this.segments.push(m)),m}prepareSegment(s,u,f,g){return this._prepareSegment(s,u.length,f.length,g)}get(){return this.segments}destroy(){for(const s of this.segments)for(const u in s.vaos)s.vaos[u].destroy()}static simpleSegment(s,u,f,g){return new ji([{vertexOffset:s,primitiveOffset:u,vertexLength:f,primitiveLength:g,vaos:{},sortKey:0}])}}function Yg(h,s){return 256*(h=ka(Math.floor(h),0,255))+ka(Math.floor(s),0,255)}ji.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Pt(ji,"SegmentVector");const Xg=Mn([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),wA=Mn([{name:"a_dash",components:4,type:"Uint16"}]);class yp{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(s,u,f,g){this.ids.push(og(s)),this.positions.push(u,f,g)}eachPosition(s,u){const f=og(s);let g=0,m=this.ids.length-1;for(;g<m;){const _=g+m>>1;this.ids[_]>=f?m=_:g=_+1}for(;this.ids[g]===f;)u(this.positions[3*g],this.positions[3*g+1],this.positions[3*g+2]),g++}static serialize(s,u){const f=new Float64Array(s.ids),g=new Uint32Array(s.positions);return dm(f,g,0,f.length-1),u&&(u.add(f.buffer),u.add(g.buffer)),{ids:f,positions:g}}static deserialize(s){const u=new yp;let f;u.ids=s.ids,u.positions=s.positions;for(const g of u.ids)g!==f&&u.uniqueIds.push(g),f=g;return u.indexed=!0,u}}function og(h){const s=+h;return!isNaN(s)&&Number.MIN_SAFE_INTEGER<=s&&s<=Number.MAX_SAFE_INTEGER?s:mo(String(h))}function dm(h,s,u,f){for(;u<f;){const g=h[u+f>>1];let m=u-1,_=f+1;for(;;){do m++;while(h[m]<g);do _--;while(h[_]>g);if(m>=_)break;hm(h,m,_),hm(s,3*m,3*_),hm(s,3*m+1,3*_+1),hm(s,3*m+2,3*_+2)}_-u<f-_?(dm(h,s,u,_),u=_+1):(dm(h,s,_+1,f),f=_)}}function hm(h,s,u){const f=h[s];h[s]=h[u],h[u]=f}Pt(yp,"FeaturePositionMap");class Yd{constructor(s){this.gl=s.gl,this.initialized=!1}fetchUniformLocation(s,u){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(s,u),this.initialized=!0),!!this.location}set(s,u,f){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class Nc extends Yd{constructor(s){super(s),this.current=0}set(s,u,f){this.fetchUniformLocation(s,u)&&this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}}class Ss extends Yd{constructor(s){super(s),this.current=0}set(s,u,f){this.fetchUniformLocation(s,u)&&this.current!==f&&(this.current=f,this.gl.uniform1f(this.location,f))}}class sd extends Yd{constructor(s){super(s),this.current=[0,0]}set(s,u,f){this.fetchUniformLocation(s,u)&&(f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1])))}}class Ap extends Yd{constructor(s){super(s),this.current=[0,0,0]}set(s,u,f){this.fetchUniformLocation(s,u)&&(f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2])))}}class vp extends Yd{constructor(s){super(s),this.current=[0,0,0,0]}set(s,u,f){this.fetchUniformLocation(s,u)&&(f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]&&f[3]===this.current[3]||(this.current=f,this.gl.uniform4f(this.location,f[0],f[1],f[2],f[3])))}}class zf extends Yd{constructor(s){super(s),this.current=zn.transparent.toRenderColor(null)}set(s,u,f){this.fetchUniformLocation(s,u)&&(f.r===this.current.r&&f.g===this.current.g&&f.b===this.current.b&&f.a===this.current.a||(this.current=f,this.gl.uniform4f(this.location,f.r,f.g,f.b,f.a)))}}const Eh=new Float32Array(16);class od extends Yd{constructor(s){super(s),this.current=Eh}set(s,u,f){if(this.fetchUniformLocation(s,u)){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let g=1;g<16;g++)if(f[g]!==this.current[g]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}}}const Xd=new Float32Array(9),RA=new Float32Array(4);class lg extends Yd{constructor(s){super(s),this.current=RA}set(s,u,f){if(this.fetchUniformLocation(s,u)){for(let g=0;g<4;g++)if(f[g]!==this.current[g]){this.current=f,this.gl.uniformMatrix2fv(this.location,!1,f);break}}}}function _p(h){return[Yg(255*h.r,255*h.g),Yg(255*h.b,255*h.a)]}class Df{constructor(s,u,f,g){this.value=s,this.uniformNames=u.map(m=>`u_${m}`),this.type=f,this.context=g}setUniform(s,u,f,g,m){const _=g.constantOr(this.value);u.set(s,m,_ instanceof zn?_.toRenderColor(this.lutExpression&&this.lutExpression.value==="none"?null:this.context.lut):_)}getBinding(s,u){return this.type==="color"?new zf(s):new Ss(s)}}class Oc{constructor(s,u){this.uniformNames=u.map(f=>`u_${f}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(s){this.pixelRatio=s.pixelRatio||1,this.pattern=s.tl.concat(s.br)}setUniform(s,u,f,g,m){const _=m==="u_pattern"||m==="u_dash"?this.pattern:m==="u_pixel_ratio"?this.pixelRatio:null;_&&u.set(s,m,_)}getBinding(s,u){return u==="u_pattern"||u==="u_dash"?new vp(s):new Ss(s)}}class to{constructor(s,u,f,g){this.expression=s,this.type=f,this.maxValue=0,this.paintVertexAttributes=u.map(m=>({name:`a_${m}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(s,u,f,g,m,_,b){const O=this.paintVertexArray.length,D=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate(new Pn(0,{brightness:_}),u,{},m,g,b):this.expression.kind==="constant"&&this.expression.value,C=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Pn(0,{brightness:_}),u,{},m,g,b):this.lutExpression.value)==="none";this.paintVertexArray.resize(s),this._setPaintValue(O,s,D,C?null:this.context.lut)}updatePaintArray(s,u,f,g,m,_,b){const O=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate({zoom:0,brightness:b},f,g,void 0,m):this.expression.kind==="constant"&&this.expression.value,D=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Pn(0,{brightness:b}),f,g,void 0,m):this.lutExpression.value)==="none";this._setPaintValue(s,u,O,D?null:this.context.lut)}_setPaintValue(s,u,f,g){if(this.type==="color"){const m=_p(f.toRenderColor(g));for(let _=s;_<u;_++)this.paintVertexArray.emplace(_,m[0],m[1])}else{for(let m=s;m<u;m++)this.paintVertexArray.emplace(m,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.lutExpression&&this.lutExpression.kind!=="constant"&&(this.lutExpression.isStateDependent||!this.lutExpression.isLightConstant)||this.expression.kind!=="constant"&&(this.expression.isStateDependent||!this.expression.isLightConstant)))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class rc{constructor(s,u,f,g,m,_){this.expression=s,this.uniformNames=u.map(b=>`u_${b}_t`),this.type=f,this.useIntegerZoom=g,this.context=m,this.maxValue=0,this.paintVertexAttributes=u.map(b=>({name:`a_${b}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(s,u,f,g,m,_,b){const O=this.expression.evaluate(new Pn(this.context.zoom,{brightness:_}),u,{},m,g,b),D=this.expression.evaluate(new Pn(this.context.zoom+1,{brightness:_}),u,{},m,g,b),C=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Pn(0,{brightness:_}),u,{},m,g,b):this.lutExpression.value)==="none",V=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(V,s,O,D,C?null:this.context.lut)}updatePaintArray(s,u,f,g,m,_,b){const O=this.expression.evaluate({zoom:this.context.zoom,brightness:b},f,g,void 0,m),D=this.expression.evaluate({zoom:this.context.zoom+1,brightness:b},f,g,void 0,m),C=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Pn(0,{brightness:b}),f,g,void 0,m):this.lutExpression.value)==="none";this._setPaintValue(s,u,O,D,C?null:this.context.lut)}_setPaintValue(s,u,f,g,m){if(this.type==="color"){const _=_p(f.toRenderColor(m)),b=_p(f.toRenderColor(m));for(let O=s;O<u;O++)this.paintVertexArray.emplace(O,_[0],_[1],b[0],b[1])}else{for(let _=s;_<u;_++)this.paintVertexArray.emplace(_,f,g);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(g))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,u,f,g,m){const _=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,b=ka(this.expression.interpolationFactor(_,this.context.zoom,this.context.zoom+1),0,1);u.set(s,m,b)}getBinding(s,u){return new Ss(s)}}class ef{constructor(s,u,f,g,m){this.expression=s,this.layerId=m,this.paintVertexAttributes=(f==="array"?wA:Xg).members;for(let _=0;_<u.length;++_);this.paintVertexArray=new g}populatePaintArray(s,u,f,g){const m=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValues(m,s,u.patterns&&u.patterns[this.layerId],f)}updatePaintArray(s,u,f,g,m,_,b){this._setPaintValues(s,u,f.patterns&&f.patterns[this.layerId],_)}_setPaintValues(s,u,f,g){if(!g||!f)return;const m=g[f];if(!m)return;const{tl:_,br:b,pixelRatio:O}=m;for(let D=s;D<u;D++)this.paintVertexArray.emplace(D,_[0],_[1],b[0],b[1],O)}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class nc{constructor(s,u,f=()=>!0){this.binders={},this._buffers=[],this.context=u;const g=[];for(const m in s.paint._values){const _=s.paint.get(m);if(m.endsWith("-use-theme")||!f(m)||!(_ instanceof Ul&&Xc(_.property.specification)))continue;const b=Mf(m,s.type),O=_.value,D=_.property.specification.type,C=!!_.property.useIntegerZoom,V=m==="line-dasharray"||m.endsWith("pattern"),I=s.paint.get(`${m}-use-theme`),z=m==="line-dasharray"&&s.layout.get("line-cap").value.kind!=="constant"||I&&I.value.kind!=="constant";if(O.kind!=="constant"||z)if(O.kind==="source"||z||V){const M=Jg(m,D,"source");this.binders[m]=V?new ef(O,b,D,M,s.id):new to(O,b,D,M),g.push(`/a_${m}`)}else{const M=Jg(m,D,"composite");this.binders[m]=new rc(O,b,D,C,u,M),g.push(`/z_${m}`)}else this.binders[m]=V?new Oc(O.value,b):new Df(O.value,b,D,u),g.push(`/u_${m}`);I&&(this.binders[m].lutExpression=I.value)}this.cacheKey=g.sort().join("")}getMaxValue(s){const u=this.binders[s];return u instanceof to||u instanceof rc?u.maxValue:0}populatePaintArrays(s,u,f,g,m,_,b){for(const O in this.binders){const D=this.binders[O];D.context=this.context,(D instanceof to||D instanceof rc||D instanceof ef)&&D.populatePaintArray(s,u,f,g,m,_,b)}}setConstantPatternPositions(s){for(const u in this.binders){const f=this.binders[u];f instanceof Oc&&f.setConstantPatternPositions(s)}}updatePaintArrays(s,u,f,g,m,_,b,O,D){let C=!1;const V=Object.keys(s),I=V.length!==0&&!O,z=I?V:u.uniqueIds;this.context.lut=m.lut;for(const M in this.binders){const B=this.binders[M];if(B.context=this.context,(B instanceof to||B instanceof rc||B instanceof ef)&&B.expression&&B.expression.kind&&B.expression.kind!=="constant"&&(B.expression.isStateDependent===!0||B.expression.isLightConstant===!1)){const J=m.paint.get(M);B.expression=J.value;for(const te of z){const he=s[te.toString()];u.eachPosition(te,(de,ne,Ae)=>{const xe=g.feature(de);B.updatePaintArray(ne,Ae,xe,he,_,b,D)})}if(!I)for(const te of f.uniqueIds){const he=s[te.toString()];f.eachPosition(te,(de,ne,Ae)=>{const xe=g.feature(de);B.updatePaintArray(ne,Ae,xe,he,_,b,D)})}C=!0}}return C}defines(){const s=[];for(const u in this.binders){const f=this.binders[u];(f instanceof Df||f instanceof Oc)&&s.push(...f.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return s}getBinderAttributes(){const s=[];for(const u in this.binders){const f=this.binders[u];if(f instanceof to||f instanceof rc||f instanceof ef)for(let g=0;g<f.paintVertexAttributes.length;g++)s.push(f.paintVertexAttributes[g].name)}return s}getBinderUniforms(){const s=[];for(const u in this.binders){const f=this.binders[u];if(f instanceof Df||f instanceof Oc||f instanceof rc)for(const g of f.uniformNames)s.push(g)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s){const u=[];for(const f in this.binders){const g=this.binders[f];if(g instanceof Df||g instanceof Oc||g instanceof rc)for(const m of g.uniformNames)u.push({name:m,property:f,binding:g.getBinding(s,m)})}return u}setUniforms(s,u,f,g,m){for(const{name:_,property:b,binding:O}of f)this.binders[b].setUniform(s,O,m,g.get(b),_)}updatePaintBuffers(){this._buffers=[];for(const s in this.binders){const u=this.binders[s];(u instanceof to||u instanceof rc||u instanceof ef)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}}upload(s){for(const u in this.binders){const f=this.binders[u];(f instanceof to||f instanceof rc||f instanceof ef)&&f.upload(s)}this.updatePaintBuffers()}destroy(){for(const s in this.binders){const u=this.binders[s];(u instanceof to||u instanceof rc||u instanceof ef)&&u.destroy()}}}class Nh{constructor(s,u,f=()=>!0){this.programConfigurations={};for(const g of s)this.programConfigurations[g.id]=new nc(g,u,f);this.needsUpload=!1,this._featureMap=new yp,this._featureMapWithoutIds=new yp,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(s,u,f,g,m,_,b,O){for(const D in this.programConfigurations)this.programConfigurations[D].populatePaintArrays(s,u,g,m,_,b,O);u.id!==void 0?this._featureMap.add(u.id,f,this._bufferOffset,s):(this._featureMapWithoutIds.add(this._idlessCounter,f,this._bufferOffset,s),this._idlessCounter+=1),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,u,f,g,m,_,b){for(const O of f)this.needsUpload=this.programConfigurations[O.id].updatePaintArrays(s,this._featureMap,this._featureMapWithoutIds,u,O,g,m,_,b||0)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(s);this.needsUpload=!1}}destroy(){for(const s in this.programConfigurations)this.programConfigurations[s].destroy()}}const TA={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"symbol-z-offset":["z_offset"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function Mf(h,s){return TA[h]||[h.replace(`${s}-`,"").replace(/-/g,"_")]}const If={"line-pattern":{source:$d,composite:$d},"fill-pattern":{source:$d,composite:$d},"fill-extrusion-pattern":{source:$d,composite:$d},"line-dasharray":{source:hp,composite:hp}},Lf={color:{source:Qh,composite:id},number:{source:rd,composite:Qh}};function Jg(h,s,u){const f=If[h];return f&&f[u]||Lf[s][u]}Pt(Df,"ConstantBinder"),Pt(Oc,"PatternConstantBinder"),Pt(to,"SourceExpressionBinder"),Pt(ef,"PatternCompositeBinder"),Pt(rc,"CompositeExpressionBinder"),Pt(nc,"ProgramConfiguration",{omit:["_buffers"]}),Pt(Nh,"ProgramConfigurationSet");const Cl=za/Math.PI/2,Oh=5,fm=6,CA=16383,wp=64,Ff=[wp,32,16],Wo=-Cl,ic=Cl;function Rp(h,s,u,f=Cl){return u=ba(u),[h*Math.sin(u)*f,-s*f,h*Math.cos(u)*f]}function Vc(h,s,u){return Rp(Math.cos(ba(h)),Math.sin(ba(h)),s,u)}const fl=63710088e-1,Qg=2*Math.PI*fl;class Gn{constructor(s,u){if(isNaN(s)||isNaN(u))throw new Error(`Invalid LngLat object: (${s}, ${u})`);if(this.lng=+s,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Gn(nn(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){const u=Math.PI/180,f=this.lat*u,g=s.lat*u,m=Math.sin(f)*Math.sin(g)+Math.cos(f)*Math.cos(g)*Math.cos((s.lng-this.lng)*u);return fl*Math.acos(Math.min(m,1))}toBounds(s=0){const u=360*s/40075017,f=u/Math.cos(Math.PI/180*this.lat);return new tf({lng:this.lng-f,lat:this.lat-u},{lng:this.lng+f,lat:this.lat+u})}toEcef(s){return Vc(this.lat,this.lng,Cl+s*Cl/fl)}static convert(s){if(s instanceof Gn)return s;if(Array.isArray(s)&&(s.length===2||s.length===3))return new Gn(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&typeof s=="object"&&s!==null)return new Gn(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class tf{constructor(s,u){if(s)if(u)this.setSouthWest(s).setNorthEast(u);else if(s.length===4){const f=s;this.setSouthWest([f[0],f[1]]).setNorthEast([f[2],f[3]])}else{const f=s;this.setSouthWest(f[0]).setNorthEast(f[1])}}setNorthEast(s){return this._ne=s instanceof Gn?new Gn(s.lng,s.lat):Gn.convert(s),this}setSouthWest(s){return this._sw=s instanceof Gn?new Gn(s.lng,s.lat):Gn.convert(s),this}extend(s){const u=this._sw,f=this._ne;let g,m;if(s instanceof Gn)g=s,m=s;else{if(!(s instanceof tf))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(tf.convert(s)):this.extend(Gn.convert(s)):typeof s=="object"&&s!==null&&s.hasOwnProperty("lat")&&(s.hasOwnProperty("lon")||s.hasOwnProperty("lng"))?this.extend(Gn.convert(s)):this;if(g=s._sw,m=s._ne,!g||!m)return this}return u||f?(u.lng=Math.min(g.lng,u.lng),u.lat=Math.min(g.lat,u.lat),f.lng=Math.max(m.lng,f.lng),f.lat=Math.max(m.lat,f.lat)):(this._sw=new Gn(g.lng,g.lat),this._ne=new Gn(m.lng,m.lat)),this}getCenter(){return new Gn((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Gn(this.getWest(),this.getNorth())}getSouthEast(){return new Gn(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:u,lat:f}=Gn.convert(s);let g=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&g}static convert(s){if(s)return s instanceof tf?s:new tf(s)}}const SA=0,bA=25.5;function Tp(h){return Qg*Math.cos(h*Math.PI/180)}function Sl(h){return(180+h)/360}function Ii(h){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360)))/360}function Yo(h,s){return h/Tp(s)}function Uu(h){return 360*h-180}function Ni(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}function ey(h,s){return h*Tp(Ni(s))}const Bu=85.051129;function xA(h){return Math.cos(ba(ka(h,-85.051129,Bu)))}function af(h,s){const u=ka(s,SA,bA),f=Math.pow(2,u);return xA(h)*Qg/(512*f)}function Xo(h){return 1/Math.cos(h*Math.PI/180)}function y(h,s=0){const u=Math.exp(Math.PI*(1-(h.y+s/za)/(1<<h.z)*2));return 80150034*u/(u*u+1)/za/(1<<h.z)}class o{constructor(s,u,f=0){this.x=+s,this.y=+u,this.z=+f}static fromLngLat(s,u=0){const f=Gn.convert(s);return new o(Sl(f.lng),Ii(f.lat),Yo(u,f.lat))}toLngLat(){return new Gn(Uu(this.x),Ni(this.y))}toAltitude(){return ey(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Qg*Xo(Ni(this.y))}}function d(h,s,u,f,g,m,_,b,O){const D=(s+f)/2,C=(u+g)/2,V=new It(D,C);b(V),function(I,z,M,B,J,te){const he=M-J,de=B-te;return Math.abs((B-z)*he-(M-I)*de)/Math.hypot(he,de)}(V.x,V.y,m.x,m.y,_.x,_.y)>=O?(d(h,s,u,D,C,m,V,b,O),d(h,D,C,f,g,V,_,b,O)):h.push(_)}function A(h,s,u){let f=h[0],g=f.x,m=f.y;s(f);const _=[f];for(let b=1;b<h.length;b++){const O=h[b],{x:D,y:C}=O;s(O),d(_,g,m,D,C,f,O,s,u),g=D,m=C,f=O}return _}function T(h,s,u,f){if(f(s,u)){const g=s.add(u)._mult(.5);T(h,s,g,f),T(h,g,u,f)}else h.push(u)}function S(h,s){let u=h[0];const f=[u];for(let g=1;g<h.length;g++){const m=h[g];T(f,u,m,s),u=m}return f}const E=Math.pow(2,14)-1,k=-E-1;function Z(h,s){const u=Math.round(h.x*s),f=Math.round(h.y*s);return h.x=ka(u,k,E),h.y=ka(f,k,E),(u<h.x||u>h.x+1||f<h.y||f>h.y+1)&&$r("Geometry exceeds allowed extent, reduce your vector tile buffer size"),h}function K(h,s,u){const f=h.loadGeometry(),g=h.extent,m=za/g;if(s&&u&&u.projection.isReprojectedInTileSpace){const _=1<<s.z,{scale:b,x:O,y:D,projection:C}=u,V=I=>{const z=Uu((s.x+I.x/g)/_),M=Ni((s.y+I.y/g)/_),B=C.project(z,M);I.x=(B.x*b-O)*g,I.y=(B.y*b-D)*g};for(let I=0;I<f.length;I++)if(h.type!==1)f[I]=A(f[I],V,1);else{const z=[];for(const M of f[I])M.x<0||M.x>=g||M.y<0||M.y>=g||(V(M),z.push(M));f[I]=z}}for(const _ of f)for(const b of _)Z(b,m);return f}function Y(h,s){return{type:h.type,id:h.id,properties:h.properties,geometry:s?K(h):[]}}function ae(h,s,u,f,g){h.emplaceBack(2*s+(f+1)/2,2*u+(g+1)/2)}function re(h,s,u){h.emplaceBack(s.x,s.y,s.z,u[0]*16384,u[1]*16384,u[2]*16384)}class pe{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=s.index,this.hasPattern=!1,this.projection=s.projection,this.layoutVertexArray=new Iu,this.indexArray=new Ls,this.segments=new ji,this.programConfigurations=new Nh(s.layers,{zoom:s.zoom,lut:s.lut}),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}updateFootprints(s,u){}populate(s,u,f,g){const m=this.layers[0],_=[];let b=null;m.type==="circle"&&(b=m.layout.get("circle-sort-key"));for(const{feature:D,id:C,index:V,sourceLayerIndex:I}of s){const z=this.layers[0]._featureFilter.needGeometry,M=Y(D,z);if(!this.layers[0]._featureFilter.filter(new Pn(this.zoom),M,f))continue;const B=b?b.evaluate(M,{},f):void 0,J={id:C,properties:D.properties,type:D.type,sourceLayerIndex:I,index:V,geometry:z?M.geometry:K(D,f,g),patterns:{},sortKey:B};_.push(J)}b&&_.sort((D,C)=>D.sortKey-C.sortKey);let O=null;g.projection.name==="globe"&&(this.globeExtVertexArray=new fp,O=g.projection);for(const D of _){const{geometry:C,index:V,sourceLayerIndex:I}=D,z=s[V].feature;this.addFeature(D,C,V,u.availableImages,f,O,u.brightness),u.featureIndex.insert(z,C,V,I,this.index)}}update(s,u,f,g,m,_,b){this.programConfigurations.updatePaintArrays(s,u,m,f,g,_,b)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,t0.members),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=s.createVertexBuffer(this.globeExtVertexArray,_A.members))),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(s,u,f,g,m,_,b){for(const O of u)for(const D of O){const C=D.x,V=D.y;if(C<0||C>=za||V<0||V>=za)continue;if(_){const M=_.projectTilePoint(C,V,m),B=_.upVector(m,C,V),J=this.globeExtVertexArray;re(J,M,B),re(J,M,B),re(J,M,B),re(J,M,B)}const I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,s.sortKey),z=I.vertexLength;ae(this.layoutVertexArray,C,V,-1,-1),ae(this.layoutVertexArray,C,V,1,-1),ae(this.layoutVertexArray,C,V,1,1),ae(this.layoutVertexArray,C,V,-1,1),this.indexArray.emplaceBack(z,z+1,z+2),this.indexArray.emplaceBack(z,z+2,z+3),I.vertexLength+=4,I.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,f,{},g,m,b)}}function Pe(h,s){for(let u=0;u<h.length;u++)if(ct(s,h[u]))return!0;for(let u=0;u<s.length;u++)if(ct(h,s[u]))return!0;return!!Ke(h,s)}function Ce(h,s,u){return!!ct(h,s)||!!tt(s,h,u)}function De(h,s){if(h.length===1)return ut(s,h[0]);for(let u=0;u<s.length;u++){const f=s[u];for(let g=0;g<f.length;g++)if(ct(h,f[g]))return!0}for(let u=0;u<h.length;u++)if(ut(s,h[u]))return!0;for(let u=0;u<s.length;u++)if(Ke(h,s[u]))return!0;return!1}function Le(h,s,u){if(h.length>1){if(Ke(h,s))return!0;for(let f=0;f<s.length;f++)if(tt(s[f],h,u))return!0}for(let f=0;f<h.length;f++)if(tt(h[f],s,u))return!0;return!1}function Ke(h,s){if(h.length===0||s.length===0)return!1;for(let u=0;u<h.length-1;u++){const f=h[u],g=h[u+1];for(let m=0;m<s.length-1;m++)if(it(f,g,s[m],s[m+1]))return!0}return!1}function it(h,s,u,f){return br(h,u,f)!==br(s,u,f)&&br(h,s,u)!==br(h,s,f)}function tt(h,s,u){const f=u*u;if(s.length===1)return h.distSqr(s[0])<f;for(let g=1;g<s.length;g++)if(pt(h,s[g-1],s[g])<f)return!0;return!1}function pt(h,s,u){const f=s.distSqr(u);if(f===0)return h.distSqr(s);const g=((h.x-s.x)*(u.x-s.x)+(h.y-s.y)*(u.y-s.y))/f;return h.distSqr(g<0?s:g>1?u:u.sub(s)._mult(g)._add(s))}function ut(h,s){let u,f,g,m=!1;for(let _=0;_<h.length;_++){u=h[_];for(let b=0,O=u.length-1;b<u.length;O=b++)f=u[b],g=u[O],f.y>s.y!=g.y>s.y&&s.x<(g.x-f.x)*(s.y-f.y)/(g.y-f.y)+f.x&&(m=!m)}return m}function ct(h,s){let u=!1;for(let f=0,g=h.length-1;f<h.length;g=f++){const m=h[f],_=h[g];m.y>s.y!=_.y>s.y&&s.x<(_.x-m.x)*(s.y-m.y)/(_.y-m.y)+m.x&&(u=!u)}return u}function dt(h,s,u,f,g){for(const _ of h)if(s<=_.x&&u<=_.y&&f>=_.x&&g>=_.y)return!0;const m=[new It(s,u),new It(s,g),new It(f,g),new It(f,u)];if(h.length>2){for(const _ of m)if(ct(h,_))return!0}for(let _=0;_<h.length-1;_++)if(vt(h[_],h[_+1],m))return!0;return!1}function vt(h,s,u){const f=u[0],g=u[2];if(h.x<f.x&&s.x<f.x||h.x>g.x&&s.x>g.x||h.y<f.y&&s.y<f.y||h.y>g.y&&s.y>g.y)return!1;const m=br(h,s,u[0]);return m!==br(h,s,u[1])||m!==br(h,s,u[2])||m!==br(h,s,u[3])}function Tt(h,s,u,f,g,m){let _=s.y-h.y,b=h.x-s.x;if(m=m||0){const O=_*_+b*b;if(O===0)return!0;const D=Math.sqrt(O);_/=D,b/=D}return!((u.x-h.x)*_+(u.y-h.y)*b-m<0||(f.x-h.x)*_+(f.y-h.y)*b-m<0||(g.x-h.x)*_+(g.y-h.y)*b-m<0)}function Qt(h,s,u,f,g,m,_){return!(Tt(h,s,f,g,m,_)||Tt(s,u,f,g,m,_)||Tt(u,h,f,g,m,_)||Tt(f,g,h,s,u,_)||Tt(g,m,h,s,u,_)||Tt(m,f,h,s,u,_))}function kt(h,s,u){const f=s.paint.get(h).value;return f.kind==="constant"?f.value:u.programConfigurations.get(s.id).getMaxValue(h)}function ra(h){return Math.sqrt(h[0]*h[0]+h[1]*h[1])}function ca(h,s,u,f,g){if(!s[0]&&!s[1])return h;const m=It.convert(s)._mult(g);u==="viewport"&&m._rotate(-f);const _=[];for(let b=0;b<h.length;b++)_.push(h[b].sub(m));return _}function xa(h,s,u,f){const g=It.convert(h)._mult(f);return s==="viewport"&&g._rotate(-u),g}let Ft,sa;Pt(pe,"CircleBucket",{omit:["layers"]});var zt,oa={exports:{}},ta=(zt||(zt=1,function(h,s){(function(u){function f(m,_,b){var O=g(256*m,256*(_=Math.pow(2,b)-_-1),b),D=g(256*(m+1),256*(_+1),b);return O[0]+","+O[1]+","+D[0]+","+D[1]}function g(m,_,b){var O=2*Math.PI*6378137/256/Math.pow(2,b);return[m*O-2*Math.PI*6378137/2,_*O-2*Math.PI*6378137/2]}u.getURL=function(m,_,b,O,D,C){return C=C||{},m+"?"+["bbox="+f(b,O,D),"format="+(C.format||"image/png"),"service="+(C.service||"WMS"),"version="+(C.version||"1.1.1"),"request="+(C.request||"GetMap"),"srs="+(C.srs||"EPSG:3857"),"width="+(C.width||256),"height="+(C.height||256),"layers="+_].join("&")},u.getTileBBox=f,u.getMercCoords=g,Object.defineProperty(u,"__esModule",{value:!0})})(s)}(0,oa.exports)),oa.exports);class da{constructor(s,u,f){this.z=s,this.x=u,this.y=f,this.key=La(0,s,s,u,f)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,u){const f=ta.getTileBBox(this.x,this.y,this.z),g=function(m,_,b){let O,D="";for(let C=m;C>0;C--)O=1<<C-1,D+=(_&O?1:0)+(b&O?2:0);return D}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(u==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",g).replace("{bbox-epsg-3857}",f)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Xt{constructor(s,u){this.wrap=s,this.canonical=u,this.key=La(s,u.z,u.z,u.x,u.y)}}class pa{constructor(s,u,f,g,m){this.overscaledZ=s,this.wrap=u,this.canonical=new da(f,+g,+m),this.key=u===0&&s===f?this.canonical.key:La(u,s,f,g,m)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){const u=this.canonical.z-s;return s>this.canonical.z?new pa(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new pa(s,this.wrap,s,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(s,u=!0){if(this.overscaledZ===s&&u)return this.key;if(s>this.canonical.z)return La(this.wrap*+u,s,this.canonical.z,this.canonical.x,this.canonical.y);{const f=this.canonical.z-s;return La(this.wrap*+u,s,s,this.canonical.x>>f,this.canonical.y>>f)}}isChildOf(s){if(s.wrap!==this.wrap)return!1;const u=this.canonical.z-s.canonical.z;return s.overscaledZ===0||s.overscaledZ<this.overscaledZ&&s.canonical.z<this.canonical.z&&s.canonical.x===this.canonical.x>>u&&s.canonical.y===this.canonical.y>>u}children(s){if(this.overscaledZ>=s)return[new pa(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,f=2*this.canonical.x,g=2*this.canonical.y;return[new pa(u,this.wrap,u,f,g),new pa(u,this.wrap,u,f+1,g),new pa(u,this.wrap,u,f,g+1),new pa(u,this.wrap,u,f+1,g+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new pa(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new pa(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Xt(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function La(h,s,u,f,g){const m=1<<Math.min(u,22);let _=m*(g%m)+f%m;return h&&u<22&&(_+=m*m*((h<0?-2*h-1:2*h)%(1<<2*(22-u)))),16*(32*_+u)+(s-u)}const Fa=[h=>{let s=h.canonical.x-1,u=h.wrap;return s<0&&(s=(1<<h.canonical.z)-1,u--),new pa(h.overscaledZ,u,h.canonical.z,s,h.canonical.y)},h=>{let s=h.canonical.x+1,u=h.wrap;return s===1<<h.canonical.z&&(s=0,u++),new pa(h.overscaledZ,u,h.canonical.z,s,h.canonical.y)},h=>new pa(h.overscaledZ,h.wrap,h.canonical.z,h.canonical.x,(h.canonical.y===0?1<<h.canonical.z:h.canonical.y)-1),h=>new pa(h.overscaledZ,h.wrap,h.canonical.z,h.canonical.x,h.canonical.y===(1<<h.canonical.z)-1?0:h.canonical.y+1)];Pt(da,"CanonicalTileID"),Pt(pa,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const Va=Mn([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:cr}=Va,jr=Mn([{name:"a_pos_3",components:3,type:"Int16"}]);var vr=Mn([{name:"a_pos",type:"Int16",components:2}]);class Ir{constructor(s,u){this.pos=s,this.dir=u}intersectsPlane(s,u,f){const g=ve.vec2.dot(u,this.dir);if(Math.abs(g)<1e-6)return!1;const m=((s[0]-this.pos[0])*u[0]+(s[1]-this.pos[1])*u[1])/g;return f[0]=this.pos[0]+this.dir[0]*m,f[1]=this.pos[1]+this.dir[1]*m,!0}}class Or{constructor(s,u){this.pos=s,this.dir=u}intersectsPlane(s,u,f){const g=ve.vec3.dot(u,this.dir);if(Math.abs(g)<1e-6)return!1;const m=((s[0]-this.pos[0])*u[0]+(s[1]-this.pos[1])*u[1]+(s[2]-this.pos[2])*u[2])/g;return f[0]=this.pos[0]+this.dir[0]*m,f[1]=this.pos[1]+this.dir[1]*m,f[2]=this.pos[2]+this.dir[2]*m,!0}closestPointOnSphere(s,u,f){if(ve.vec3.equals(this.pos,s)||u===0)return f[0]=f[1]=f[2]=0,!1;const[g,m,_]=this.dir,b=this.pos[0]-s[0],O=this.pos[1]-s[1],D=this.pos[2]-s[2],C=g*g+m*m+_*_,V=2*(b*g+O*m+D*_),I=V*V-4*C*(b*b+O*O+D*D-u*u);if(I<0){const z=Math.max(-V/2,0),M=b+g*z,B=O+m*z,J=D+_*z,te=Math.hypot(M,B,J);return f[0]=M*u/te,f[1]=B*u/te,f[2]=J*u/te,!1}{const z=(-V-Math.sqrt(I))/(2*C);if(z<0){const M=Math.hypot(b,O,D);return f[0]=b*u/M,f[1]=O*u/M,f[2]=D*u/M,!1}return f[0]=b+g*z,f[1]=O+m*z,f[2]=D+_*z,!0}}}class zr{constructor(s,u,f,g,m){this.TL=s,this.TR=u,this.BR=f,this.BL=g,this.horizon=m}static fromInvProjectionMatrix(s,u,f){const g=[-1,1,1],m=[1,1,1],_=[1,-1,1],b=[-1,-1,1],O=ve.vec3.transformMat4(g,g,s),D=ve.vec3.transformMat4(m,m,s),C=ve.vec3.transformMat4(_,_,s),V=ve.vec3.transformMat4(b,b,s);return new zr(O,D,C,V,u/f)}}function Gr(h,s,u){let f=1/0,g=-1/0;const m=[];for(const _ of h){ve.vec3.sub(m,_,s);const b=ve.vec3.dot(m,u);f=Math.min(f,b),g=Math.max(g,b)}return[f,g]}function Ur(h,s){let u=!0;for(let f=0;f<h.planes.length;f++){const g=h.planes[f];let m=0;for(let _=0;_<s.length;_++)m+=ve.vec3.dot(g,s[_])+g[3]>=0;if(m===0)return 0;m!==s.length&&(u=!1)}return u?2:1}function mr(h,s){for(const u of h.projections){const f=Gr(s,h.points[0],u.axis);if(u.projection[1]<f[0]||u.projection[0]>f[1])return 0}return 1}function fn(h,s){let u=0;const f=[0,0,0,0];for(let g=0;g<h.length;g++)f[0]=h[g][0],f[1]=h[g][1],f[2]=h[g][2],f[3]=1,ve.vec4.dot(f,s)>=0&&u++;return u}class Er{constructor(s,u){this.points=s||new Array(8).fill([0,0,0]),this.planes=u||new Array(6).fill([0,0,0,0]),this.bounds=rr.fromPoints(this.points),this.projections=[],this.frustumEdges=[ve.vec3.sub([],this.points[2],this.points[3]),ve.vec3.sub([],this.points[0],this.points[3]),ve.vec3.sub([],this.points[4],this.points[0]),ve.vec3.sub([],this.points[5],this.points[1]),ve.vec3.sub([],this.points[6],this.points[2]),ve.vec3.sub([],this.points[7],this.points[3])];for(const f of this.frustumEdges){const g=[0,-f[2],f[1]],m=[f[2],0,-f[0]];this.projections.push({axis:g,projection:Gr(this.points,this.points[0],g)}),this.projections.push({axis:m,projection:Gr(this.points,this.points[0],m)})}}static fromInvProjectionMatrix(s,u,f,g){const m=Math.pow(2,f),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(D=>{const C=ve.vec4.transformMat4([],D,s),V=1/C[3]/u*m;return ve.vec4.mul(C,C,[V,V,g?1/C[3]:V,V])}),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(D=>{const C=ve.vec3.sub([],_[D[0]],_[D[1]]),V=ve.vec3.sub([],_[D[2]],_[D[1]]),I=ve.vec3.normalize([],ve.vec3.cross([],C,V)),z=-ve.vec3.dot(I,_[D[1]]);return I.concat(z)}),O=[];for(let D=0;D<_.length;D++)O.push([_[D][0],_[D][1],_[D][2]]);return new Er(O,b)}intersectsPrecise(s,u,f){for(let g=0;g<u.length;g++)if(!fn(s,u[g]))return 0;for(let g=0;g<this.planes.length;g++)if(!fn(s,this.planes[g]))return 0;for(const g of f)for(const m of this.frustumEdges){const _=ve.vec3.cross([],g,m),b=ve.vec3.length(_);if(b===0)continue;ve.vec3.scale(_,_,1/b);const O=Gr(this.points,this.points[0],_),D=Gr(s,this.points[0],_);if(O[0]>D[1]||D[0]>O[1])return 0}return 1}containsPoint(s){for(const u of this.planes){const f=u[3];if(ve.vec3.dot([u[0],u[1],u[2]],s)+f<0)return!1}return!0}}class rr{static fromPoints(s){const u=[1/0,1/0,1/0],f=[-1/0,-1/0,-1/0];for(const g of s)ve.vec3.min(u,u,g),ve.vec3.max(f,f,g);return new rr(u,f)}static fromTileIdAndHeight(s,u,f){const g=1<<s.canonical.z,m=s.canonical.x,_=s.canonical.y;return new rr([m/g,_/g,u],[(m+1)/g,(_+1)/g,f])}static applyTransform(s,u){const f=s.getCorners();for(let g=0;g<f.length;++g)ve.vec3.transformMat4(f[g],f[g],u);return rr.fromPoints(f)}static applyTransformFast(s,u){const f=[u[12],u[13],u[14]],g=[...f];for(let m=0;m<3;m++)for(let _=0;_<3;_++){const b=u[4*_+m],O=b*s.min[_],D=b*s.max[_];f[m]+=Math.min(O,D),g[m]+=Math.max(O,D)}return new rr(f,g)}static projectAabbCorners(s,u){const f=s.getCorners();for(let g=0;g<f.length;++g)ve.vec3.transformMat4(f[g],f[g],u);return f}constructor(s,u){this.min=s,this.max=u,this.center=ve.vec3.scale([],ve.vec3.add([],this.min,this.max),.5)}quadrant(s){const u=[s%2==0,s<2],f=ve.vec3.clone(this.min),g=ve.vec3.clone(this.max);for(let m=0;m<u.length;m++)f[m]=u[m]?this.min[m]:this.center[m],g[m]=u[m]?this.center[m]:this.max[m];return g[2]=this.max[2],new rr(f,g)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}distanceZ(s){return Math.max(Math.min(this.max[2],s[2]),this.min[2])-s[2]}getCorners(){const s=this.min,u=this.max;return[[s[0],s[1],s[2]],[u[0],s[1],s[2]],[u[0],u[1],s[2]],[s[0],u[1],s[2]],[s[0],s[1],u[2]],[u[0],s[1],u[2]],[u[0],u[1],u[2]],[s[0],u[1],u[2]]]}intersects(s){return this.intersectsAabb(s.bounds)?Ur(s,this.getCorners()):0}intersectsFlat(s){return this.intersectsAabb(s.bounds)?Ur(s,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(s,u){return u||this.intersects(s)?mr(s,this.getCorners()):0}intersectsPreciseFlat(s,u){return u||this.intersectsFlat(s)?mr(s,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(s){for(let u=0;u<3;++u)if(this.min[u]>s.max[u]||s.min[u]>this.max[u])return!1;return!0}intersectsAabbXY(s){return!(this.min[0]>s.max[0]||s.min[0]>this.max[0]||this.min[1]>s.max[1]||s.min[1]>this.max[1])}encapsulate(s){for(let u=0;u<3;u++)this.min[u]=Math.min(this.min[u],s.min[u]),this.max[u]=Math.max(this.max[u],s.max[u])}encapsulatePoint(s){for(let u=0;u<3;u++)this.min[u]=Math.min(this.min[u],s[u]),this.max[u]=Math.max(this.max[u],s[u])}closestPoint(s){return[Math.max(Math.min(this.max[0],s[0]),this.min[0]),Math.max(Math.min(this.max[1],s[1]),this.min[1]),Math.max(Math.min(this.max[2],s[2]),this.min[2])]}}function pn(h){return h*Cl/fl}Pt(rr,"Aabb");const Xn=[new rr([Wo,Wo,Wo],[ic,ic,ic]),new rr([Wo,Wo,Wo],[0,0,ic]),new rr([0,Wo,Wo],[ic,0,ic]),new rr([Wo,0,Wo],[0,ic,ic]),new rr([0,0,Wo],[ic,ic,ic])];function An(h,s,u,f=!0){const g=ve.vec3.scale([],h._camera.position,h.worldSize),m=[s,u,1,1];ve.vec4.transformMat4(m,m,h.pixelMatrixInverse),ve.vec4.scale(m,m,1/m[3]);const _=ve.vec3.sub([],m,g),b=ve.vec3.normalize([],_),O=h.globeMatrix,D=[O[12],O[13],O[14]],C=ve.vec3.sub([],D,g),V=ve.vec3.length(C),I=ve.vec3.normalize([],C),z=h.worldSize/(2*Math.PI),M=ve.vec3.dot(I,b),B=Math.asin(z/V);if(B<Math.acos(M)){if(!f)return null;const gt=[],et=[];ve.vec3.scale(gt,b,V/M),ve.vec3.normalize(et,ve.vec3.sub(et,gt,C)),ve.vec3.normalize(b,ve.vec3.add(b,C,ve.vec3.scale(b,et,Math.tan(B)*V)))}const J=[];new Or(g,b).closestPointOnSphere(D,z,J);const te=ve.vec3.normalize([],pr(O,0)),he=ve.vec3.normalize([],pr(O,1)),de=ve.vec3.normalize([],pr(O,2)),ne=ve.vec3.dot(te,J),Ae=ve.vec3.dot(he,J),xe=ve.vec3.dot(de,J),Oe=Pa(Math.asin(-Ae/z));let Qe=Pa(Math.atan2(ne,xe));Qe=h.center.lng+function(gt,et){const _t=(et-gt+180)%360-180;return _t<-180?_t+360:_t}(h.center.lng,Qe);const Ye=Sl(Qe),Xe=ka(Ii(Oe),0,1);return new o(Ye,Xe)}class kn{constructor(s,u,f){this.a=ve.vec3.sub([],s,f),this.b=ve.vec3.sub([],u,f),this.center=f;const g=ve.vec3.normalize([],this.a),m=ve.vec3.normalize([],this.b);this.angle=Math.acos(ve.vec3.dot(g,m))}}function ns(h,s){if(h.angle===0)return null;let u;return u=h.a[s]===0?1/h.angle*.5*Math.PI:1/h.angle*Math.atan(h.b[s]/h.a[s]/Math.sin(h.angle)-1/Math.tan(h.angle)),u<0||u>1?null:function(f,g,m,_){const b=Math.sin(m);return f*(Math.sin((1-_)*m)/b)+g*(Math.sin(_*m)/b)}(h.a[s],h.b[s],h.angle,ka(u,0,1))+h.center[s]}function _s(h){if(h.z<=1)return Xn[h.z+2*h.y+h.x];const s=di(Vn(h));return rr.fromPoints(s)}function co(h,s,u){return ve.vec3.scale(h,h,1-u),ve.vec3.scaleAndAdd(h,h,s,u)}function ao(h,s,u){for(const f of h)ve.vec3.transformMat4(f,f,s),ve.vec3.scale(f,f,u)}function Ro(h,s,u,f){const g=s/h.worldSize,m=h.globeMatrix;if(u.z<=1){const Ye=_s(u).getCorners();return ao(Ye,m,g),rr.fromPoints(Ye)}const _=Vn(u,f),b=di(_,Cl+pn(h._tileCoverLift));ao(b,m,g);const O=Number.MAX_VALUE,D=[-O,-O,-O],C=[O,O,O];if(_.contains(h.center)){for(const gt of b)ve.vec3.min(C,C,gt),ve.vec3.max(D,D,gt);D[2]=0;const Ye=h.point,Xe=[Ye.x*g,Ye.y*g,0];return ve.vec3.min(C,C,Xe),ve.vec3.max(D,D,Xe),new rr(C,D)}if(h._tileCoverLift>0){for(const Ye of b)ve.vec3.min(C,C,Ye),ve.vec3.max(D,D,Ye);return new rr(C,D)}const V=[m[12]*g,m[13]*g,m[14]*g],I=_.getCenter(),z=ka(h.center.lat,-85.051129,Bu),M=ka(I.lat,-85.051129,Bu),B=Sl(h.center.lng),J=Ii(z);let te=B-Sl(I.lng);const he=J-Ii(M);te>.5?te-=1:te<-.5&&(te+=1);let de=0;if(Math.abs(te)>Math.abs(he))de=te>=0?1:3;else{de=he>=0?0:2;const Ye=[m[4]*g,m[5]*g,m[6]*g],Xe=-Math.sin(ba(he>=0?_.getSouth():_.getNorth()))*Cl;ve.vec3.scaleAndAdd(V,V,Ye,Xe)}const ne=b[de],Ae=b[(de+1)%4],xe=new kn(ne,Ae,V),Oe=[ns(xe,0)||ne[0],ns(xe,1)||ne[1],ns(xe,2)||ne[2]],Qe=Gl(h.zoom);if(Qe>0){const Ye=function({x:gt,y:et,z:_t},xt,Ct,Dt,Nt){const jt=1/(1<<_t);let Lt=gt*jt,Ht=Lt+jt,Aa=et*jt,ma=Aa+jt,er=0;const Oa=(Lt+Ht)/2-Dt;return Oa>.5?er=-1:Oa<-.5&&(er=1),Lt=((Lt+er)*xt-(Dt*=xt))*Ct+Dt,Ht=((Ht+er)*xt-Dt)*Ct+Dt,Aa=(Aa*xt-(Nt*=xt))*Ct+Nt,ma=(ma*xt-Nt)*Ct+Nt,[[Lt,ma,0],[Ht,ma,0],[Ht,Aa,0],[Lt,Aa,0]]}(u,s,h._pixelsPerMercatorPixel,B,J);for(let gt=0;gt<b.length;gt++)co(b[gt],Ye[gt],Qe);const Xe=ve.vec3.add([],Ye[de],Ye[(de+1)%4]);ve.vec3.scale(Xe,Xe,.5),co(Oe,Xe,Qe)}for(const Ye of b)ve.vec3.min(C,C,Ye),ve.vec3.max(D,D,Ye);return C[2]=Math.min(ne[2],Ae[2]),ve.vec3.min(C,C,Oe),ve.vec3.max(D,D,Oe),new rr(C,D)}function Vn({x:h,y:s,z:u},f=!1){const g=1/(1<<u),m=new Gn(Uu(h*g),s===(1<<u)-1&&f?-90:Ni((s+1)*g)),_=new Gn(Uu((h+1)*g),s===0&&f?90:Ni(s*g));return new tf(m,_)}function di(h,s=Cl){const u=ba(h.getNorth()),f=ba(h.getSouth()),g=Math.cos(u),m=Math.cos(f),_=Math.sin(u),b=Math.sin(f),O=h.getWest(),D=h.getEast();return[Rp(m,b,O,s),Rp(m,b,D,s),Rp(g,_,D,s),Rp(g,_,O,s)]}function Bn(h,s,u,f){const g=1<<u.z,m=(h/za+u.x)/g;return Vc(Ni((s/za+u.y)/g),Uu(m),f)}function fi({min:h,max:s}){return CA/Math.max(s[0]-h[0],s[1]-h[1],s[2]-h[2])}const To=new Float64Array(16);function Oi(h){const s=fi(h),u=ve.mat4.fromScaling(To,[s,s,s]);return ve.mat4.translate(u,u,ve.vec3.negate([],h.min))}function ms(h){const s=ve.mat4.fromTranslation(To,h.min),u=1/fi(h);return ve.mat4.scale(s,s,[u,u,u])}function zc(h){const s=za/(2*Math.PI);return h/(2*Math.PI)/s}function Jo(h,s){return za/(512*Math.pow(2,h))*fi(_s(s))}function du(h,s,u,f,g){const m=zc(u),_=[h,s,-u/(2*Math.PI)],b=ve.mat4.identity(new Float64Array(16));return ve.mat4.translate(b,b,_),ve.mat4.scale(b,b,[m,m,m]),ve.mat4.rotateX(b,b,ba(-g)),ve.mat4.rotateY(b,b,ba(-f)),b}function Gl(h){return kr(Oh,fm,h)}function sc(h,s){const u=Vc(s.lat,s.lng),f=function(m){const _=Vc(m._center.lat,m._center.lng),b=ve.vec3.fromValues(0,1,0);let O=ve.vec3.cross([],b,_);const D=ve.mat4.fromRotation([],-m.angle,_);O=ve.vec3.transformMat4(O,O,D),ve.mat4.fromRotation(D,-m._pitch,O);const C=ve.vec3.normalize([],_);return ve.vec3.scale(C,C,pn(m.cameraToCenterDistance/m.pixelsPerMeter)),ve.vec3.transformMat4(C,C,D),ve.vec3.add([],_,C)}(h),g=ve.vec3.subtract([],f,u);return ve.vec3.angle(g,u)}function bl(h,s){return sc(h,s)>Math.PI/2*1.01}const Jd=ba(85),Co=Math.cos(Jd),Vh=Math.sin(Jd),Zl=ve.mat4.create(),Cp=h=>{const s=[];return h.paint.get("circle-pitch-alignment")==="map"&&s.push("PITCH_WITH_MAP"),h.paint.get("circle-pitch-scale")==="map"&&s.push("SCALE_WITH_MAP"),s};function pm(h,s,u,f,g,m,_,b,O){if(m&&h.queryGeometry.isAboveHorizon)return!1;m&&(O*=h.pixelToTileUnitsFactor);const D=h.tileID.canonical,C=u.projection.upVectorScale(D,u.center.lat,u.worldSize).metersToTile;for(const V of s)for(const I of V){const z=I.add(b),M=g&&u.elevation?u.elevation.exaggeration()*g.getElevationAt(z.x,z.y,!0):0,B=u.projection.projectTilePoint(z.x,z.y,D);if(M>0){const de=u.projection.upVector(D,z.x,z.y);B.x+=de[0]*C*M,B.y+=de[1]*C*M,B.z+=de[2]*C*M}const J=m?z:ty(B.x,B.y,B.z,f),te=m?h.tilespaceRays.map(de=>a0(de,M)):h.queryGeometry.screenGeometry,he=ve.vec4.transformMat4([],[B.x,B.y,B.z,1],f);if(!_&&m?O*=he[3]/u.cameraToCenterDistance:_&&!m&&(O*=u.cameraToCenterDistance/he[3]),m){const de=Ni((I.y/za+D.y)/(1<<D.z));O/=u.projection.pixelsPerMeter(de,1)/Yo(1,de)}if(Ce(te,J,O))return!0}return!1}function ty(h,s,u,f){const g=ve.vec4.transformMat4([],[h,s,u,1],f);return new It(g[0]/g[3],g[1]/g[3])}const RC=ve.vec3.fromValues(0,0,0),Sp=ve.vec3.fromValues(0,0,1);function a0(h,s){const u=ve.vec3.create();return RC[2]=s,h.intersectsPlane(RC,Sp,u),new It(u[0],u[1])}class r0 extends pe{}let ug,E1,N1,O1;function n0(h,{width:s,height:u},f,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==s*u*f)throw new RangeError("mismatched image size")}else g=new Uint8Array(s*u*f);return h.width=s,h.height=u,h.data=g,h}function i0(h,s,u){const{width:f,height:g}=s;f===h.width&&g===h.height||(V1(h,s,{x:0,y:0},{x:0,y:0},{width:Math.min(h.width,f),height:Math.min(h.height,g)},u,null),h.width=f,h.height=g,h.data=s.data)}function V1(h,s,u,f,g,m,_,b){if(g.width===0||g.height===0)return s;if(g.width>h.width||g.height>h.height||u.x>h.width-g.width||u.y>h.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>s.width||g.height>s.height||f.x>s.width-g.width||f.y>s.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const O=h.data,D=s.data,C=m===4&&b;for(let V=0;V<g.height;V++){const I=((u.y+V)*h.width+u.x)*m,z=((f.y+V)*s.width+f.x)*m;if(C)for(let M=0;M<g.width;M++){const B=I+M*m+3,J=z+M*m;D[J+0]=255,D[J+1]=255,D[J+2]=255,D[J+3]=O[B]}else if(_)for(let M=0;M<g.width;M++){const B=I+M*m,J=z+M*m,te=O[B+3],he=new zn(O[B+0]/255*te,O[B+1]/255*te,O[B+2]/255*te,te).toRenderColor(_).toArray();D[J+0]=he[0],D[J+1]=he[1],D[J+2]=he[2],D[J+3]=he[3]}else for(let M=0;M<g.width*m;M++)D[z+M]=O[I+M]}return s}Pt(r0,"HeatmapBucket",{omit:["layers"]});class mm{constructor(s,u){n0(this,s,1,u)}resize(s){i0(this,new mm(s),1)}clone(){return new mm({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,u,f,g,m){V1(s,u,f,g,m,1,null)}}class xl{constructor(s,u){n0(this,s,4,u)}resize(s){i0(this,new xl(s),4)}replace(s,u){u?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new xl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,u,f,g,m,_,b){V1(s,u,f,g,m,4,_,b)}}class z1{constructor(s,u){this.width=s.width,this.height=s.height,this.data=u instanceof Uint8Array?new Float32Array(u.buffer):u}}function ay(h){const s={},u=h.resolution||256,f=h.clips?h.clips.length:1,g=h.image||new xl({width:u,height:f}),m=(_,b,O)=>{s[h.evaluationKey]=O;const D=h.expression.evaluate(s);D&&(g.data[_+b+0]=Math.floor(255*D.r/D.a),g.data[_+b+1]=Math.floor(255*D.g/D.a),g.data[_+b+2]=Math.floor(255*D.b/D.a),g.data[_+b+3]=Math.floor(255*D.a))};if(h.clips)for(let _=0,b=0;_<f;++_,b+=4*u)for(let O=0,D=0;O<u;O++,D+=4){const C=O/(u-1),{start:V,end:I}=h.clips[_];m(b,D,V*(1-C)+I*C)}else for(let _=0,b=0;_<u;_++,b+=4)m(0,b,_/(u-1));return g}Pt(mm,"AlphaImage"),Pt(xl,"RGBAImage");const ry=Mn([{name:"a_pos",components:2,type:"Int16"}],4),s0=Mn([{name:"a_road_z_offset",components:1,type:"Float32"}],4),TC=Mn([{name:"a_pos",components:2,type:"Int16"},{name:"a_height",components:1,type:"Float32"}],4),CC=Mn([{name:"a_pos_normal_3",components:3,type:"Int16"}],4);function PA(h,s,u=2){const f=s&&s.length,g=f?s[0]*u:h.length;let m=D1(h,0,g,u,!0);const _=[];if(!m||m.next===m.prev)return _;let b,O,D;if(f&&(m=function(C,V,I,z){const M=[];for(let B=0,J=V.length;B<J;B++){const te=D1(C,V[B]*z,B<J-1?V[B+1]*z:C.length,z,!1);te===te.next&&(te.steiner=!0),M.push(sy(te))}M.sort(oE);for(let B=0;B<M.length;B++)I=lE(M[B],I);return I}(h,s,m,u)),h.length>80*u){b=1/0,O=1/0;let C=-1/0,V=-1/0;for(let I=u;I<g;I+=u){const z=h[I],M=h[I+1];z<b&&(b=z),M<O&&(O=M),z>C&&(C=z),M>V&&(V=M)}D=Math.max(C-b,V-O),D=D!==0?32767/D:0}return ny(m,_,u,b,O,D,0),_}function D1(h,s,u,f,g){let m;if(g===function(_,b,O,D){let C=0;for(let V=b,I=O-D;V<O;V+=D)C+=(_[I]-_[V])*(_[V+1]+_[I+1]),I=V;return C}(h,s,u,f)>0)for(let _=s;_<u;_+=f)m=L1(_/f|0,h[_],h[_+1],m);else for(let _=u-f;_>=s;_-=f)m=L1(_/f|0,h[_],h[_+1],m);return m&&kf(m,m.next)&&(EA(m),m=m.next),m}function zh(h,s){if(!h)return h;s||(s=h);let u,f=h;do if(u=!1,f.steiner||!kf(f,f.next)&&ho(f.prev,f,f.next)!==0)f=f.next;else{if(EA(f),f=s=f.prev,f===f.next)break;u=!0}while(u||f!==s);return s}function ny(h,s,u,f,g,m,_){if(!h)return;!_&&m&&function(O,D,C,V){let I=O;do I.z===0&&(I.z=iy(I.x,I.y,D,C,V)),I.prevZ=I.prev,I.nextZ=I.next,I=I.next;while(I!==O);I.prevZ.nextZ=null,I.prevZ=null,function(z){let M,B=1;do{let J,te=z;z=null;let he=null;for(M=0;te;){M++;let de=te,ne=0;for(let xe=0;xe<B&&(ne++,de=de.nextZ,de);xe++);let Ae=B;for(;ne>0||Ae>0&&de;)ne!==0&&(Ae===0||!de||te.z<=de.z)?(J=te,te=te.nextZ,ne--):(J=de,de=de.nextZ,Ae--),he?he.nextZ=J:z=J,J.prevZ=he,he=J;te=de}he.nextZ=null,B*=2}while(M>1)}(I)}(h,f,g,m);let b=h;for(;h.prev!==h.next;){const O=h.prev,D=h.next;if(m?M1(h,f,g,m):Zs(h))s.push(O.i,h.i,D.i),EA(h),h=D.next,b=D.next;else if((h=D)===b){_?_===1?ny(h=sE(zh(h),s),s,u,f,g,m,2):_===2&&SC(h,s,u,f,g,m):ny(zh(h),s,u,f,g,m,1);break}}}function Zs(h){const s=h.prev,u=h,f=h.next;if(ho(s,u,f)>=0)return!1;const g=s.x,m=u.x,_=f.x,b=s.y,O=u.y,D=f.y,C=g<m?g<_?g:_:m<_?m:_,V=b<O?b<D?b:D:O<D?O:D,I=g>m?g>_?g:_:m>_?m:_,z=b>O?b>D?b:D:O>D?O:D;let M=f.next;for(;M!==s;){if(M.x>=C&&M.x<=I&&M.y>=V&&M.y<=z&&gm(g,b,m,O,_,D,M.x,M.y)&&ho(M.prev,M,M.next)>=0)return!1;M=M.next}return!0}function M1(h,s,u,f){const g=h.prev,m=h,_=h.next;if(ho(g,m,_)>=0)return!1;const b=g.x,O=m.x,D=_.x,C=g.y,V=m.y,I=_.y,z=b<O?b<D?b:D:O<D?O:D,M=C<V?C<I?C:I:V<I?V:I,B=b>O?b>D?b:D:O>D?O:D,J=C>V?C>I?C:I:V>I?V:I,te=iy(z,M,s,u,f),he=iy(B,J,s,u,f);let de=h.prevZ,ne=h.nextZ;for(;de&&de.z>=te&&ne&&ne.z<=he;){if(de.x>=z&&de.x<=B&&de.y>=M&&de.y<=J&&de!==g&&de!==_&&gm(b,C,O,V,D,I,de.x,de.y)&&ho(de.prev,de,de.next)>=0||(de=de.prevZ,ne.x>=z&&ne.x<=B&&ne.y>=M&&ne.y<=J&&ne!==g&&ne!==_&&gm(b,C,O,V,D,I,ne.x,ne.y)&&ho(ne.prev,ne,ne.next)>=0))return!1;ne=ne.nextZ}for(;de&&de.z>=te;){if(de.x>=z&&de.x<=B&&de.y>=M&&de.y<=J&&de!==g&&de!==_&&gm(b,C,O,V,D,I,de.x,de.y)&&ho(de.prev,de,de.next)>=0)return!1;de=de.prevZ}for(;ne&&ne.z<=he;){if(ne.x>=z&&ne.x<=B&&ne.y>=M&&ne.y<=J&&ne!==g&&ne!==_&&gm(b,C,O,V,D,I,ne.x,ne.y)&&ho(ne.prev,ne,ne.next)>=0)return!1;ne=ne.nextZ}return!0}function sE(h,s){let u=h;do{const f=u.prev,g=u.next.next;!kf(f,g)&&rf(f,u,u.next,g)&&oy(f,g)&&oy(g,f)&&(s.push(f.i,u.i,g.i),EA(u),EA(u.next),u=h=g),u=u.next}while(u!==h);return zh(u)}function SC(h,s,u,f,g,m){let _=h;do{let b=_.next.next;for(;b!==_.prev;){if(_.i!==b.i&&o0(_,b)){let O=I1(_,b);return _=zh(_,_.next),O=zh(O,O.next),ny(_,s,u,f,g,m,0),void ny(O,s,u,f,g,m,0)}b=b.next}_=_.next}while(_!==h)}function oE(h,s){return h.x-s.x}function lE(h,s){const u=function(g,m){let _=m;const b=g.x,O=g.y;let D,C=-1/0;do{if(O<=_.y&&O>=_.next.y&&_.next.y!==_.y){const B=_.x+(O-_.y)*(_.next.x-_.x)/(_.next.y-_.y);if(B<=b&&B>C&&(C=B,D=_.x<_.next.x?_:_.next,B===b))return D}_=_.next}while(_!==m);if(!D)return null;const V=D,I=D.x,z=D.y;let M=1/0;_=D;do{if(b>=_.x&&_.x>=I&&b!==_.x&&gm(O<z?b:C,O,I,z,O<z?C:b,O,_.x,_.y)){const B=Math.abs(O-_.y)/(b-_.x);oy(_,g)&&(B<M||B===M&&(_.x>D.x||_.x===D.x&&uE(D,_)))&&(D=_,M=B)}_=_.next}while(_!==V);return D}(h,s);if(!u)return s;const f=I1(u,h);return zh(f,f.next),zh(u,u.next)}function uE(h,s){return ho(h.prev,h,s.prev)<0&&ho(s.next,h,h.next)<0}function iy(h,s,u,f,g){return(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=(h-u)*g|0)|h<<8))|h<<4))|h<<2))|h<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-f)*g|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function sy(h){let s=h,u=h;do(s.x<u.x||s.x===u.x&&s.y<u.y)&&(u=s),s=s.next;while(s!==h);return u}function gm(h,s,u,f,g,m,_,b){return(g-_)*(s-b)>=(h-_)*(m-b)&&(h-_)*(f-b)>=(u-_)*(s-b)&&(u-_)*(m-b)>=(g-_)*(f-b)}function o0(h,s){return h.next.i!==s.i&&h.prev.i!==s.i&&!function(u,f){let g=u;do{if(g.i!==u.i&&g.next.i!==u.i&&g.i!==f.i&&g.next.i!==f.i&&rf(g,g.next,u,f))return!0;g=g.next}while(g!==u);return!1}(h,s)&&(oy(h,s)&&oy(s,h)&&function(u,f){let g=u,m=!1;const _=(u.x+f.x)/2,b=(u.y+f.y)/2;do g.y>b!=g.next.y>b&&g.next.y!==g.y&&_<(g.next.x-g.x)*(b-g.y)/(g.next.y-g.y)+g.x&&(m=!m),g=g.next;while(g!==u);return m}(h,s)&&(ho(h.prev,h,s.prev)||ho(h,s.prev,s))||kf(h,s)&&ho(h.prev,h,h.next)>0&&ho(s.prev,s,s.next)>0)}function ho(h,s,u){return(s.y-h.y)*(u.x-s.x)-(s.x-h.x)*(u.y-s.y)}function kf(h,s){return h.x===s.x&&h.y===s.y}function rf(h,s,u,f){const g=l0(ho(h,s,u)),m=l0(ho(h,s,f)),_=l0(ho(u,f,h)),b=l0(ho(u,f,s));return g!==m&&_!==b||!(g!==0||!ym(h,u,s))||!(m!==0||!ym(h,f,s))||!(_!==0||!ym(u,h,f))||!(b!==0||!ym(u,s,f))}function ym(h,s,u){return s.x<=Math.max(h.x,u.x)&&s.x>=Math.min(h.x,u.x)&&s.y<=Math.max(h.y,u.y)&&s.y>=Math.min(h.y,u.y)}function l0(h){return h>0?1:h<0?-1:0}function oy(h,s){return ho(h.prev,h,h.next)<0?ho(h,s,h.next)>=0&&ho(h,h.prev,s)>=0:ho(h,s,h.prev)<0||ho(h,h.next,s)<0}function I1(h,s){const u=NA(h.i,h.x,h.y),f=NA(s.i,s.x,s.y),g=h.next,m=s.prev;return h.next=s,s.prev=h,u.next=g,g.prev=u,f.next=u,u.prev=f,m.next=f,f.prev=m,f}function L1(h,s,u,f){const g=NA(h,s,u);return f?(g.next=f.next,g.prev=f,f.next.prev=g,f.next=g):(g.prev=g,g.next=g),g}function EA(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function NA(h,s,u){return{i:h,x:s,y:u,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function OA(h,s){const u=h.length;if(u<=1)return[h];const f=[];let g,m;for(let _=0;_<u;_++){const b=Fi(h[_]);b!==0&&(h[_].area=Math.abs(b),m===void 0&&(m=b<0),m===b<0?(g&&f.push(g),g=[h[_]]):g.push(h[_]))}if(g&&f.push(g),s>1)for(let _=0;_<f.length;_++)f[_].length<=s||(Cf(f[_],s,1,f[_].length-1,bC),f[_]=f[_].slice(0,s));return f}function bC(h,s){return s.area-h.area}function xC(h,s,u=1){if(!h)return null;const f=typeof h=="string"?Vs.from(h).getPrimary():h.getPrimary(),g=f.id.toString();return s.has(g)||s.set(g,[]),f.scaleSelf(u),s.get(g).push(f),f.toString()}function VA(h,s,u,f){const g=f.patternDependencies;let m=!1;for(const _ of s){const b=_.paint.get(`${h}-pattern`);b.isConstant()||(m=!0),xC(b.constantOr(null),g,u)&&(m=!0)}return m}function zA(h,s,u,f,g,m){const _=m.patternDependencies;for(const b of s){const O=b.paint.get(`${h}-pattern`).value;if(O.kind!=="constant"){let D=O.evaluate({zoom:f},u,{},m.availableImages);D=D&&D.name?D.name:D;const C=xC(D,_,g);C&&(u.patterns[b.id]=C)}}return u}var F1,PC,cg,EC,u0,Gi,c0,dg={};function d0(){if(PC)return F1;PC=1;var h=wa();function s(g,m,_,b,O){this.properties={},this.extent=_,this.type=0,this._pbf=g,this._geometry=-1,this._keys=b,this._values=O,g.readFields(u,this,m)}function u(g,m,_){g==1?m.id=_.readVarint():g==2?function(b,O){for(var D=b.readVarint()+b.pos;b.pos<D;){var C=O._keys[b.readVarint()],V=O._values[b.readVarint()];O.properties[C]=V}}(_,m):g==3?m.type=_.readVarint():g==4&&(m._geometry=_.pos)}function f(g){for(var m,_,b=0,O=0,D=g.length,C=D-1;O<D;C=O++)b+=((_=g[C]).x-(m=g[O]).x)*(m.y+_.y);return b}return F1=s,s.types=["Unknown","Point","LineString","Polygon"],s.prototype.loadGeometry=function(){var g=this._pbf;g.pos=this._geometry;for(var m,_=g.readVarint()+g.pos,b=1,O=0,D=0,C=0,V=[];g.pos<_;){if(O<=0){var I=g.readVarint();b=7&I,O=I>>3}if(O--,b===1||b===2)D+=g.readSVarint(),C+=g.readSVarint(),b===1&&(m&&V.push(m),m=[]),m.push(new h(D,C));else{if(b!==7)throw new Error("unknown command "+b);m&&m.push(m[0].clone())}}return m&&V.push(m),V},s.prototype.bbox=function(){var g=this._pbf;g.pos=this._geometry;for(var m=g.readVarint()+g.pos,_=1,b=0,O=0,D=0,C=1/0,V=-1/0,I=1/0,z=-1/0;g.pos<m;){if(b<=0){var M=g.readVarint();_=7&M,b=M>>3}if(b--,_===1||_===2)(O+=g.readSVarint())<C&&(C=O),O>V&&(V=O),(D+=g.readSVarint())<I&&(I=D),D>z&&(z=D);else if(_!==7)throw new Error("unknown command "+_)}return[C,I,V,z]},s.prototype.toGeoJSON=function(g,m,_){var b,O,D=this.extent*Math.pow(2,_),C=this.extent*g,V=this.extent*m,I=this.loadGeometry(),z=s.types[this.type];function M(te){for(var he=0;he<te.length;he++){var de=te[he];te[he]=[360*(de.x+C)/D-180,360/Math.PI*Math.atan(Math.exp((180-360*(de.y+V)/D)*Math.PI/180))-90]}}switch(this.type){case 1:var B=[];for(b=0;b<I.length;b++)B[b]=I[b][0];M(I=B);break;case 2:for(b=0;b<I.length;b++)M(I[b]);break;case 3:for(I=function(te){var he=te.length;if(he<=1)return[te];for(var de,ne,Ae=[],xe=0;xe<he;xe++){var Oe=f(te[xe]);Oe!==0&&(ne===void 0&&(ne=Oe<0),ne===Oe<0?(de&&Ae.push(de),de=[te[xe]]):de.push(te[xe]))}return de&&Ae.push(de),Ae}(I),b=0;b<I.length;b++)for(O=0;O<I[b].length;O++)M(I[b][O])}I.length===1?I=I[0]:z="Multi"+z;var J={type:"Feature",geometry:{type:z,coordinates:I},properties:this.properties};return"id"in this&&(J.id=this.id),J},F1}function k1(){if(EC)return cg;EC=1;var h=d0();function s(f,g){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=f,this._keys=[],this._values=[],this._features=[],f.readFields(u,this,g),this.length=this._features.length}function u(f,g,m){f===15?g.version=m.readVarint():f===1?g.name=m.readString():f===5?g.extent=m.readVarint():f===2?g._features.push(m.pos):f===3?g._keys.push(m.readString()):f===4&&g._values.push(function(_){for(var b=null,O=_.readVarint()+_.pos;_.pos<O;){var D=_.readVarint()>>3;b=D===1?_.readString():D===2?_.readFloat():D===3?_.readDouble():D===4?_.readVarint64():D===5?_.readVarint():D===6?_.readSVarint():D===7?_.readBoolean():null}return b}(m))}return cg=s,s.prototype.feature=function(f){if(f<0||f>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[f];var g=this._pbf.readVarint()+this._pbf.pos;return new h(this._pbf,g,this.extent,this._keys,this._values)},cg}function h0(){return c0||(c0=1,dg.VectorTile=function(){if(Gi)return u0;Gi=1;var h=k1();function s(u,f,g){if(u===3){var m=new h(g,g.readVarint()+g.pos);m.length&&(f[m.name]=m)}}return u0=function(u,f){this.layers=u.readFields(s,{},f)},u0}(),dg.VectorTileFeature=d0(),dg.VectorTileLayer=k1()),dg}var Dh=h0();const Uf="3d_elevation_id",hg="level";class NC{constructor(){this._valid=!1}reset(s){return this.feature=s,this._valid=!0,this._geometry=s.loadGeometry(),this._geometry.length!==0&&this._geometry[0].length!==0||(this._valid=!1),this}geometry(s,u){return this._valid&&s(u(this._geometry)),this}require(s,u,f){return this.get(s,!0,u,f)}optional(s,u,f){return this.get(s,!1,u,f)}success(){return this._valid}get(s,u,f,g){const m=this.feature.properties.hasOwnProperty(s)?+this.feature.properties[s]:void 0;return this._valid&&m!==void 0?f(g?g(m):m):u&&(this._valid=!1),this}}class OC{constructor(s,u){this.featureFunc=s,this.vertexFunc=u}parseFeature(s,u,f){return this.featureFunc(s,u,f)}parseVertex(s,u,f){return this.vertexFunc(s,u,f)}}const cE=new OC((h,s,u)=>h.reset(s).require(Uf,f=>{u.id=f}).optional("fixed_height_relative",f=>{u.constantHeight=f},Bf.decodeRelativeHeight).geometry(f=>{u.bounds=f},Bf.computeBounds).success(),(h,s,u)=>h.reset(s).require(Uf,f=>{u.id=f}).require("elevation_idx",f=>{u.idx=f}).require("extent",f=>{u.extent=f}).require("height_relative",f=>{u.height=f},Bf.decodeRelativeHeight).geometry(f=>{u.position=f},Bf.getPoint).success()),VC=new OC((h,s,u)=>h.reset(s).require(Uf,f=>{u.id=f}).optional("fixed_height",f=>{u.constantHeight=f},Bf.decodeMetricHeight).geometry(f=>{u.bounds=f},Bf.computeBounds).success(),(h,s,u)=>h.reset(s).require(Uf,f=>{u.id=f}).require("elevation_idx",f=>{u.idx=f}).require("extent",f=>{u.extent=f}).require("height",f=>{u.height=f},Bf.decodeMetricHeight).geometry(f=>{u.position=f},Bf.getPoint).success());class Bf{static computeBounds(s){const u=new It(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),f=new It(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);for(const g of s[0])u.x>g.x&&(u.x=g.x),u.y>g.y&&(u.y=g.y),f.x<g.x&&(f.x=g.x),f.y<g.y&&(f.y=g.y);return{min:u,max:f}}static getPoint(s){return ve.vec2.fromValues(s[0][0].x,s[0][0].y)}static decodeRelativeHeight(s){return 1e-4*s*5}static decodeMetricHeight(s){return 1e-4*s}static parse(s){const u=[],f=[],g=s.length,m=new NC;for(let b=0;b<g;b++){const O=s.feature(b),D=O.properties.hasOwnProperty("version")?String(O.properties.version):void 0,C=(_=D)?_==="1.0.1"?VC:void 0:cE;if(C===void 0){$r(`Unknown elevation feature version number ${D||"(unknown)"}`);continue}const V=O.properties.hasOwnProperty("type")?O.properties.type:void 0;if(V){if(Dh.VectorTileFeature.types[O.type]==="Point"&&V==="curve_point"){const I={};C.parseVertex(m,O,I)&&u.push(I)}else if(Dh.VectorTileFeature.types[O.type]==="Polygon"&&V==="curve_meta"){const I={};C.parseFeature(m,O,I)&&f.push(I)}}}var _;return{vertices:u,features:f}}}class ly{constructor(s,u,f,g,m,_){if(this.vertices=new Array,this.vertexProps=new Array,this.edges=new Array,this.edgeProps=new Array,this.id=s,this.heightRange={min:f,max:f},this.safeArea=u,this.constantHeight=f,this.constantHeight==null&&(this.constantHeight!=null||g.length!==0)){this.vertices=g,this.edges=m,this.edges=this.edges.filter(b=>b.a<this.vertices.length&&b.b<this.vertices.length&&!ve.vec2.exactEquals(this.vertices[b.a].position,this.vertices[b.b].position)),this.heightRange={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};for(const b of this.vertices)this.vertexProps.push({dir:ve.vec2.fromValues(0,0)}),this.heightRange.min=Math.min(this.heightRange.min,b.height),this.heightRange.max=Math.max(this.heightRange.max,b.height);for(const b of this.edges){const O=this.vertices[b.a].position,D=this.vertices[b.b].position,C=ve.vec2.subtract(ve.vec2.create(),D,O),V=ve.vec2.length(C),I=ve.vec2.scale(ve.vec2.create(),C,1/V);this.edgeProps.push({vec:C,dir:I,len:V});const z=this.vertexProps[b.a].dir,M=this.vertexProps[b.b].dir;ve.vec2.add(z,z,I),ve.vec2.add(M,M,I)}for(const b of this.vertexProps)b.dir[0]===0&&b.dir[1]===0||ve.vec2.normalize(b.dir,b.dir);this.tessellate(_)}}pointElevation(s){if(this.constantHeight!=null)return this.constantHeight;const u=this.getClosestEdge(s);if(u==null)return 0;const[f,g]=u;return((m,_,b)=>(1-b)*m+b*_)(this.vertices[this.edges[f].a].height,this.vertices[this.edges[f].b].height,g)}getSafeArea(){return this.safeArea}isTunnel(){return this.heightRange.max<=-5}getClosestEdge(s){if(this.edges.length===0)return;let u=0,f=Number.POSITIVE_INFINITY,g=0;const m=ve.vec2.fromValues(s.x,s.y);for(let _=0;_<this.edges.length;_++){const b=this.edges[_],O=this.edgeProps[_].dir,D=new Ir(m,this.edgeProps[_].dir),C=this.vertices[b.a].position,V=this.vertices[b.b].position,I=ve.vec2.create(),z=ve.vec2.create(),M=D.intersectsPlane(C,this.vertexProps[b.a].dir,I),B=D.intersectsPlane(V,this.vertexProps[b.b].dir,z);if(!M||!B)continue;const J=ve.vec2.subtract(ve.vec2.create(),z,I),te=ve.vec2.subtract(ve.vec2.create(),m,I),he=ve.vec2.dot(J,J),de=he>0?ve.vec2.dot(te,J)/he:0,ne=ka(de,0,1),Ae=Math.abs((de-ne)*this.edgeProps[_].len),xe=ve.vec2.subtract(ve.vec2.create(),m,C),Oe=Ae+Math.abs(ve.vec2.dot(xe,ve.vec2.fromValues(O[1],-O[0])));Oe<f&&(u=_,f=Oe,g=ne)}return[u,g]}tessellate(s){for(let u=this.edges.length-1;u>=0;--u){const f=this.edges[u].a,g=this.edges[u].b,{position:m,height:_,extent:b}=this.vertices[f],{position:O,height:D,extent:C}=this.vertices[g],V=this.vertexProps[f].dir,I=this.vertexProps[g].dir,z=ve.vec3.fromValues(m[0]/s,m[1]/s,_),M=ve.vec3.fromValues(O[0]/s,O[1]/s,D),B=ve.vec3.fromValues(V[1],-V[0],0);ve.vec3.scale(B,B,b);const J=ve.vec3.fromValues(I[1],-I[0],0);if(ve.vec3.scale(J,J,C),this.distSqLines(ve.vec3.fromValues(z[0]+.5*B[0],z[1]+.5*B[1],z[2]+.5*B[2]),ve.vec3.fromValues(M[0]-.5*J[0],M[1]-.5*J[1],M[2]-.5*J[2]),ve.vec3.fromValues(z[0]-.5*B[0],z[1]-.5*B[1],z[2]-.5*B[2]),ve.vec3.fromValues(M[0]+.5*J[0],M[1]+.5*J[1],M[2]+.5*J[2]))<=.05*.05)continue;const te=this.vertices.length,he=ve.vec2.add(ve.vec2.create(),m,O);this.vertices.push({position:ve.vec2.scale(he,he,.5),height:.5*(_+D),extent:.5*(b+C)});const de=ve.vec2.add(ve.vec2.create(),V,I);this.vertexProps.push({dir:ve.vec2.normalize(de,de)}),this.edges.splice(u,1),this.edgeProps.splice(u,1),this.edges.push({a:f,b:te}),this.edges.push({a:te,b:g});const ne=ve.vec2.subtract(ve.vec2.create(),this.vertices[te].position,m),Ae=ve.vec2.length(ne),xe={vec:ne,dir:ve.vec2.scale(ve.vec2.create(),ne,1/Ae),len:Ae};this.edgeProps.push(xe),this.edgeProps.push(xe)}}distSqLines(s,u,f,g){const m=ve.vec3.subtract(ve.vec3.create(),u,s),_=ve.vec3.subtract(ve.vec3.create(),g,f),b=ve.vec3.subtract(ve.vec3.create(),s,f),O=ve.vec3.dot(m,m),D=ve.vec3.dot(m,_),C=ve.vec3.dot(m,b),V=ve.vec3.dot(_,_),I=ve.vec3.dot(_,b),z=O*V-D*D;if(z===0){const he=ve.vec3.dot(b,_)/ve.vec3.dot(_,_),de=ve.vec3.lerp(ve.vec3.create(),f,g,he);return ve.vec3.squaredDistance(de,s)}const M=(D*I-C*V)/z,B=(O*I-D*C)/z,J=ve.vec3.lerp(ve.vec3.create(),s,u,M),te=ve.vec3.lerp(ve.vec3.create(),f,g,B);return ve.vec3.squaredDistance(J,te)}}class Fs{constructor(s,u){this.zScale=1,this.xOffset=0,this.yOffset=0,s.equals(u)||(this.zScale=Math.pow(2,u.z-s.z),this.xOffset=(s.x*this.zScale-u.x)*za,this.yOffset=(s.y*this.zScale-u.y)*za)}constantElevation(s,u){if(s.constantHeight!=null)return this.computeBiasedHeight(s.constantHeight,u)}pointElevation(s,u,f){const g=this.constantElevation(u,f);return g??(s.x=s.x*this.zScale+this.xOffset,s.y=s.y*this.zScale+this.yOffset,this.computeBiasedHeight(u.pointElevation(s),f))}computeBiasedHeight(s,u){return u<=0?s:s+u*kr(0,u,s>=0?s:Math.abs(.5*s))}}Pt(ly,"ElevationFeature");class f0{constructor(){this.polygons=new Map}add(s,...u){this.polygons.has(s)?this.polygons.get(s).push(...u):this.polygons.set(s,u)}merge(s){for(const[u,f]of s.polygons)this.add(u,...f)}}class zo{constructor(){this.portals=[]}static evaluate(s){if(s.length===0)return new zo;let u=[];for(const D of s)u.push(...D.portals);if(u.length===0)return new zo;const f=(D,C)=>D<=0&&C<=0||D>=za&&C>=za;for(const D of u){const C=D.va,V=D.vb;(f(C.x,V.x)||f(C.y,V.y))&&(D.type="border")}const g=u.filter(D=>D.type!=="unevaluated"),m=u.filter(D=>D.type==="unevaluated");if(m.length===0)return new zo;m.sort((D,C)=>D.hash===C.hash?D.isTunnel===C.isTunnel?0:D.isTunnel?-1:1:D.hash<C.hash?1:-1),u=g.concat(m);let _=g.length,b=_,O=_;do if(b++,b===u.length||u[_].hash!==u[b].hash){if(b-_==2){O<_&&(u[O]=u[_],u[_]=null);const D=u[O],C=u[b-1];D.type=D.isTunnel!==C.isTunnel?"tunnel":"polygon",D.connection={a:D.connection.a,b:C.connection.a},O++}_=b}while(_!==u.length);return u.splice(O),u.sort((D,C)=>D.hash<C.hash?1:-1),{portals:u}}}Pt(zo,"ElevationPortalGraph"),Pt(f0,"ElevationPolygons");class dE{constructor(s,u,f){this.outPositions=s,this.outNormals=u,this.outIndices=f,this.vertexLookup=new Map,this.buffer=new ArrayBuffer(4),this.view=new DataView(this.buffer)}addVertex(s,u,f){let g=s[2];f!=null&&(g*=f);const m=this.getVec3Bits(s)<<96n|this.getVec3Bits(u),_=this.vertexLookup.get(m);if(_!=null)return _;const b=this.outPositions.length;this.vertexLookup.set(m,b);const O=Math.trunc(16384*u[0]),D=Math.trunc(16384*u[1]),C=Math.trunc(16384*u[2]);return this.outPositions.emplaceBack(s[0],s[1],g),this.outNormals.emplaceBack(O,D,C),b}addVertices(s,u,...f){const g=[];for(const m of f){const _=this.addVertex(m,s,u);g.push(_)}return g}addTriangles(s,u,f){if(u&&f){const g=f.length===1,m=ve.vec3.fromValues(0,0,0);for(let _=0;_<s.length;_+=3){const b=u[s[_+0]],O=u[s[_+1]],D=u[s[_+2]],C=g?f[0]:f[s[_+1]],V=g?f[0]:f[s[_+2]],I=this.addVertex(ve.vec3.fromValues(b.x,b.y,g?f[0]:f[s[_+0]]),m),z=this.addVertex(ve.vec3.fromValues(O.x,O.y,C),m),M=this.addVertex(ve.vec3.fromValues(D.x,D.y,V),m);this.outIndices.emplaceBack(I,z,M)}}else for(let g=0;g<s.length;g+=3)this.outIndices.emplaceBack(s[g+0],s[g+1],s[g+2])}addQuad(s,u){const f=this.addVertices(u,void 0,...s.map(O=>ve.vec3.fromValues(O.coord.x,O.coord.y,O.height))),[g,m,_,b]=f;this.addTriangles([g,m,_,_,b,g])}getBits(s){return this.view.setFloat32(0,s),BigInt(this.view.getUint32(0))}getVec3Bits(s){return this.getBits(s[0])<<64n|this.getBits(s[1])<<32n|this.getBits(s[2])}}class Qd{constructor(s){this.unevaluatedPortals=new zo,this.portalPolygons=new f0,this.vertexHashLookup=new Map,this.unevalVertices=[],this.unevalHeights=[],this.unevalTriangles=[],this.unevalTunnelTriangles=[],this.unevalEdges=[],this.vertexPositions=new Of,this.vertexNormals=new Jh,this.indexArray=new Ls,this.tileToMeters=y(s)}addVertices(s,u){const f=this.unevalVertices.length;for(let g=0;g<s.length;g++)this.unevalVertices.push(s[g]),this.unevalHeights.push(u[g]);return f}addTriangles(s,u,f){const g=f?this.unevalTunnelTriangles:this.unevalTriangles;for(const m of s)g.push(m+u)}addRenderableRing(s,u,f,g,m){const _=[new It(m.min.x,m.min.y),new It(m.max.x,m.min.y),new It(m.max.x,m.max.y),new It(m.min.x,m.max.y)];for(let b=0;b<f-1;b++){const O=u+b,D=O+1,C=this.unevalVertices[O],V=this.unevalVertices[D];if(!(C.x>=m.min.x&&C.x<=m.max.x&&C.y>=m.min.y&&C.y<=m.max.y||V.x>=m.min.x&&V.x<=m.max.x&&V.y>=m.min.y&&V.y<=m.max.y||vt(C,V,_))||this.isOnBorder(C.x,V.x)||this.isOnBorder(C.y,V.y))continue;const I=Qd.computeEdgeHash(this.unevalVertices[O],this.unevalVertices[D]);let z,M=this.vertexHashLookup.get(Qd.computePosHash(C));M!=null?z=M.next:(M=this.vertexHashLookup.get(Qd.computePosHash(V)),z=M!=null?M.prev:I),this.unevalEdges.push({polygonIdx:s,a:O,b:D,hash:I,portalHash:z,isTunnel:g,type:"unevaluated"})}}addPortalCandidates(s,u,f,g,m){if(u.length===0)return;this.portalPolygons.add(s,{geometry:u,zLevel:m});const _=u[0];this.vertexHashLookup.clear();let b=Qd.computeEdgeHash(_[_.length-2],_[_.length-1]);for(let O=0;O<_.length-1;O++){const D=_[O+0],C=_[O+1],V=ve.vec2.fromValues(C.x-D.x,C.y-D.y),I=ve.vec2.length(V);if(I===0)continue;let z="unevaluated";const M=g.pointElevation(D),B=g.pointElevation(C);Math.abs(M)<.01&&Math.abs(B)<.01?z="entrance":(this.isOnBorder(D.x,C.x)||this.isOnBorder(D.y,C.y))&&(z="border");const J=Qd.computeEdgeHash(D,C);this.unevaluatedPortals.portals.push({connection:{a:s,b:void 0},va:D,vb:C,vab:V,length:I,hash:J,isTunnel:f,type:z});const te=Qd.computePosHash(D);this.vertexHashLookup.set(te,{prev:b,next:J}),b=J}}construct(s){if(this.unevalVertices.length===0)return;const u=()=>({vertexOffset:0,primitiveOffset:this.indexArray.length}),f=V=>{V.primitiveLength=this.indexArray.length-V.primitiveOffset},g=new dE(this.vertexPositions,this.vertexNormals,this.indexArray);this.prepareEdges(s.portals,this.unevalEdges);const m=u(),_=u(),b=u(),O=(V,I)=>{V.sort((M,B)=>M.type===I&&B.type!==I?-1:M.type!==I&&B.type===I?1:0);const z=V.findIndex(M=>M.type!==I);return z>=0?z:V.length};let D=0;this.unevalEdges.length>0&&(D=O(this.unevalEdges,"none"),this.constructBridgeStructures(g,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:D},this.tileToMeters));const C=u();if(this.unevalEdges.length>0){const V=this.unevalEdges.splice(D),I=O(V,"tunnel")+D;this.unevalEdges.push(...V),this.constructTunnelStructures(g,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:D},{min:D,max:I})}f(b),g.addTriangles(this.unevalTriangles,this.unevalVertices,this.unevalHeights),f(C),g.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,this.unevalHeights),f(_),g.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,[-.1]),f(m),this.maskSegments=ji.simpleSegment(0,C.primitiveOffset,0,C.primitiveLength),this.depthSegments=ji.simpleSegment(0,_.primitiveOffset,0,_.primitiveLength),this.renderableSegments=ji.simpleSegment(0,b.primitiveOffset,0,b.primitiveLength),this.shadowCasterSegments=ji.simpleSegment(0,m.primitiveOffset,0,m.primitiveLength)}upload(s){this.vertexBuffer||this.vertexPositions.length===0||this.vertexNormals.length===0||this.indexArray.length===0||(this.vertexBuffer=s.createVertexBuffer(this.vertexPositions,TC.members),this.vertexBufferNormal=s.createVertexBuffer(this.vertexNormals,CC.members),this.indexBuffer=s.createIndexBuffer(this.indexArray))}destroy(){this.vertexBuffer&&(this.vertexBuffer.destroy(),this.vertexBufferNormal.destroy(),this.indexBuffer.destroy()),this.maskSegments&&(this.maskSegments.destroy(),this.depthSegments.destroy(),this.renderableSegments.destroy(),this.shadowCasterSegments.destroy())}computeVertexConnections(s,u,f,g){const m=new Map;for(let _=f;_<g;_++){const b=u[_],O=b.a,D=b.b;m.has(O)||m.set(O,{}),m.has(D)||m.set(D,{});const C=m.get(O),V=m.get(D);s[D]>0&&(C.to=D),s[O]>0&&(V.from=O)}return m}constructBridgeStructures(s,u,f,g,m,_){const b=this.computeVertexConnections(f,g,m.min,m.max),O=1/_,D=.5*O,C=I=>ve.vec3.fromValues(u[I].x,u[I].y,f[I]*O),V=I=>{const z=b.get(I),M=z.from,B=z.to;if(!M||!B)return;const J=C(M),te=C(I),he=C(B),de=ve.vec3.fromValues(0,0,0);if(!ve.vec3.exactEquals(J,te)){const Ae=ve.vec3.sub(ve.vec3.create(),te,J);ve.vec3.add(de,de,ve.vec3.normalize(Ae,Ae))}if(!ve.vec3.exactEquals(he,te)){const Ae=ve.vec3.sub(ve.vec3.create(),he,te);ve.vec3.add(de,de,ve.vec3.normalize(Ae,Ae))}const ne=ve.vec3.len(de);return ne>0?ve.vec3.scale(de,de,1/ne):void 0};for(let I=m.min;I<m.max;I++){const z=g[I],M=this.prepareEdgePoints(u,f,z,(Ra,Rr)=>Ra>=Rr);if(M==null)continue;const B=M[0],J=M[1],te=ve.vec3.fromValues(B.coord.x,B.coord.y,O*B.height),he=ve.vec3.fromValues(J.coord.x,J.coord.y,O*J.height);if(ve.vec3.exactEquals(te,he))continue;const de=ve.vec3.sub(ve.vec3.create(),he,te);ve.vec3.normalize(de,de);const ne=Ra=>ve.vec3.normalize(Ra,Ra),Ae=V(z.a)||de,xe=V(z.b)||de,Oe=ne(ve.vec3.fromValues(Ae[1],-Ae[0],0)),Qe=ne(ve.vec3.fromValues(xe[1],-xe[0],0)),Ye=ne(ve.vec3.cross(ve.vec3.create(),Oe,Ae)),Xe=ne(ve.vec3.cross(ve.vec3.create(),Qe,xe)),gt=ve.vec3.create(),et=[ve.vec3.add(ve.vec3.create(),te,ve.vec3.scale(gt,ve.vec3.sub(gt,Oe,Ye),D)),ve.vec3.add(ve.vec3.create(),te,ve.vec3.scale(gt,ve.vec3.add(gt,Oe,Ye),D)),ve.vec3.add(ve.vec3.create(),te,ve.vec3.scale(gt,Ye,D)),te],_t=[ve.vec3.add(ve.vec3.create(),he,ve.vec3.scale(gt,ve.vec3.sub(gt,Qe,Xe),D)),ve.vec3.add(ve.vec3.create(),he,ve.vec3.scale(gt,ve.vec3.add(gt,Qe,Xe),D)),ve.vec3.add(ve.vec3.create(),he,ve.vec3.scale(gt,Xe,D)),he],[xt,Ct]=s.addVertices(Oe,_,et[0],et[1]),[Dt,Nt]=s.addVertices(Qe,_,_t[0],_t[1]);s.addTriangles([xt,Ct,Dt,Ct,Nt,Dt]);const[jt,Lt]=s.addVertices(Ye,_,et[1],et[2]),[Ht,Aa]=s.addVertices(Xe,_,_t[1],_t[2]);s.addTriangles([jt,Lt,Ht,Lt,Aa,Ht]);const[ma,er]=s.addVertices(ve.vec3.negate(Oe,Oe),_,et[2],et[3]),[Oa,Da]=s.addVertices(ve.vec3.negate(Qe,Qe),_,_t[2],_t[3]);s.addTriangles([ma,er,Oa,er,Da,Oa])}}constructTunnelStructures(s,u,f,g,m,_){const b=O=>ve.vec3.normalize(O,O);for(let O=m.min;O<m.max;O++){const D=this.prepareEdgePoints(u,f,g[O],(z,M)=>z<=M);if(D==null)continue;const[C,V]=D,I=b(ve.vec3.fromValues(V.coord.y-C.coord.y,-(V.coord.x-C.coord.x),0));s.addQuad([C,V,{coord:V.coord,height:g[O].isTunnel?-.1:0},{coord:C.coord,height:g[O].isTunnel?-.1:0}],I)}for(let O=_.min;O<_.max;O++){const D=g[O],C=u[D.a],V=u[D.b],I=b(ve.vec3.fromValues(V.y-C.y,-(V.x-C.x),0));s.addQuad([{coord:V,height:0},{coord:C,height:0},{coord:C,height:f[D.a]+4},{coord:V,height:f[D.b]+4}],I),s.addQuad([{coord:C,height:0},{coord:V,height:0},{coord:V,height:f[D.b]+4},{coord:C,height:f[D.a]+4}],I)}}prepareEdgePoints(s,u,f,g){const m=s[f.a],_=s[f.b];let b=u[f.a],O=u[f.b];if(!(b!==0&&g(b,0)||O!==0&&g(O,0)))return;const D=m.clone(),C=_.clone();if(g(b,0)){if(!g(O,0)){const V=O/(O-b);C.x=gr(C.x,D.x,V),C.y=gr(C.y,D.y,V),O=gr(O,b,V)}}else{const V=b/(b-O);D.x=gr(D.x,C.x,V),D.y=gr(D.y,C.y,V),b=gr(b,O,V)}return[{coord:D,height:b},{coord:C,height:O}]}prepareEdges(s,u){if(u.length===0)return;u.sort((b,O)=>b.hash===O.hash?O.polygonIdx-b.polygonIdx:O.hash>b.hash?1:-1);let f=0,g=0,m=0,_=u[f].polygonIdx;do g++,(g===u.length||u[f].hash!==u[g].hash)&&((g-f==1||u[g-1].polygonIdx!==_)&&(m<f&&(u[m]=u[f],u[f]=null),u[m].type="none",m++),f=g,f!==u.length&&(_=u[f].polygonIdx));while(f!==u.length);if(u.splice(m),u.length!==0&&s.length!==0){u.sort((D,C)=>D.hash<C.hash?1:-1);let b=0,O=0;for(;b!==u.length&&O!==s.length;){const D=u[b],C=s[O];D.portalHash>C.hash?b++:C.hash>D.portalHash?O++:(D.type=C.type,b++)}}}isOnBorder(s,u){return s<=0&&u<=0||s>=za&&u>=za}static computeEdgeHash(s,u){return(s.y===u.y&&s.x>u.x||s.y>u.y)&&([s,u]=[u,s]),BigInt(Qd.computePosHash(s))<<32n|BigInt(Qd.computePosHash(u))}static computePosHash(s){return((65535&s.x)<<16|65535&s.y)>>>0}}class DA{constructor(s,u){this.layoutVertexArray=new Iu,this.indexArray=new Ls,this.lineIndexArray=new Kd,this.triangleSegments=new ji,this.lineSegments=new ji,this.programConfigurations=new Nh(s.layers,{zoom:s.zoom,lut:s.lut}),this.uploaded=!1,u&&(this.elevatedLayoutVertexArray=new rd)}update(s,u,f,g,m,_,b){this.programConfigurations.updatePaintArrays(s,u,m,f,g,_,b)}isEmpty(){return this.layoutVertexArray.length===0}needsUpload(){return this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,ry.members),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.lineIndexBuffer=s.createIndexBuffer(this.lineIndexArray),this.elevatedLayoutVertexArray&&this.elevatedLayoutVertexArray.length>0&&(this.elevatedLayoutVertexBuffer=s.createVertexBuffer(this.elevatedLayoutVertexArray,s0.members))),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.elevatedLayoutVertexBuffer&&this.elevatedLayoutVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.lineIndexBuffer.destroy(),this.programConfigurations.destroy(),this.triangleSegments.destroy(),this.lineSegments.destroy())}populatePaintArrays(s,u,f,g,m,_){this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,u,f,g,m,_)}}class uy{constructor(s){this.zoom=s.zoom,this.pixelRatio=s.pixelRatio,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.bufferData=new DA(s,!1),this.elevationBufferData=new DA(s,!0),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.projection=s.projection,this.elevationMode=this.layers[0].layout.get("fill-elevation-reference")}updateFootprints(s,u){}populate(s,u,f,g){this.hasPattern=VA("fill",this.layers,this.pixelRatio,u);const m=this.layers[0].layout.get("fill-sort-key"),_=[];for(const{feature:b,id:O,index:D,sourceLayerIndex:C}of s){const V=this.layers[0]._featureFilter.needGeometry,I=Y(b,V);if(!this.layers[0]._featureFilter.filter(new Pn(this.zoom),I,f))continue;const z=m?m.evaluate(I,{},f,u.availableImages):void 0,M={id:O,properties:b.properties,type:b.type,sourceLayerIndex:C,index:D,geometry:V?I.geometry:K(b,f,g),patterns:{},sortKey:z};_.push(M)}m&&_.sort((b,O)=>b.sortKey-O.sortKey);for(const b of _){const{geometry:O,index:D,sourceLayerIndex:C}=b;if(this.hasPattern){const V=zA("fill",this.layers,b,this.zoom,this.pixelRatio,u);this.patternFeatures.push(V)}else this.addFeature(b,O,D,f,{},u.availableImages,u.brightness,u.elevationFeatures);u.featureIndex.insert(s[D].feature,O,D,C,this.index)}}update(s,u,f,g,m,_,b){this.bufferData.update(s,u,f,g,m,_,b),this.elevationBufferData.update(s,u,f,g,m,_,b)}addFeatures(s,u,f,g,m,_){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,u,f,g,_,s.elevationFeatures)}isEmpty(){return this.bufferData.isEmpty()&&this.elevationBufferData.isEmpty()}uploadPending(){return!this.uploaded||this.bufferData.needsUpload()||this.elevationBufferData.needsUpload()}upload(s){this.bufferData.upload(s),this.elevationBufferData.upload(s),this.elevatedStructures&&this.elevatedStructures.upload(s)}destroy(){this.bufferData.destroy(),this.elevationBufferData.destroy(),this.elevatedStructures&&this.elevatedStructures.destroy()}addFeature(s,u,f,g,m,_=[],b,O){const D=OA(u,500);this.elevationMode!=="none"?this.addElevatedRoadFeature(s,D,g,f,O):this.addGeometry(D,this.bufferData),this.bufferData.populatePaintArrays(s,f,m,_,g,b),this.elevationBufferData.populatePaintArrays(s,f,m,_,g,b)}getUnevaluatedPortalGraph(){return this.elevatedStructures?this.elevatedStructures.unevaluatedPortals:void 0}getElevationPolygons(){return this.elevatedStructures?this.elevatedStructures.portalPolygons:void 0}setEvaluatedPortalGraph(s){this.elevatedStructures&&this.elevatedStructures.construct(s)}addElevatedRoadFeature(s,u,f,g,m){const _=new Array,b=this.getElevationFeature(s,m);if(b){_.push({polygons:u,elevationFeature:b,elevationTileID:f});for(const O of _)if(O.elevationFeature){if(this.elevationMode==="hd-road-base"){this.elevatedStructures||(this.elevatedStructures=new Qd(O.elevationTileID));const C=O.elevationFeature.isTunnel();let V=0;s.properties.hasOwnProperty(hg)&&(V=+s.properties[hg]);for(const I of O.polygons)this.elevatedStructures.addPortalCandidates(O.elevationFeature.id,I,C,O.elevationFeature,V)}const D=new Fs(f,O.elevationTileID);this.addElevatedGeometry(O.polygons,D,O.elevationFeature,this.elevationMode==="hd-road-base"?0:.05,g)}}else this.addGeometry(u,this.bufferData)}addElevatedGeometry(s,u,f,g,m){const _={elevation:f,elevationSampler:u,bias:g,index:m},[b,O]=this.addGeometry(s,this.elevationBufferData,_);this.elevationBufferData.heightRange==null?this.elevationBufferData.heightRange={min:b,max:O}:(this.elevationBufferData.heightRange.min=Math.min(this.elevationBufferData.heightRange.min,b),this.elevationBufferData.heightRange.max=Math.max(this.elevationBufferData.heightRange.max,O))}addGeometry(s,u,f){let g=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,_=null;f&&(_=f.elevationSampler.constantElevation(f.elevation,f.bias),_!=null&&(g=_,m=_));const b=(O,D,C)=>{if(f!=null)if(D.push(O),_!=null)u.elevatedLayoutVertexArray.emplaceBack(_),C.push(_);else{const V=f.elevationSampler.pointElevation(O,f.elevation,f.bias);u.elevatedLayoutVertexArray.emplaceBack(V),C.push(V),g=Math.min(g,V),m=Math.max(m,V)}};for(const O of s){let D=0;for(const de of O)D+=de.length;const C=u.triangleSegments.prepareSegment(D,u.layoutVertexArray,u.indexArray),V=C.vertexLength,I=[],z=[],M=[],B=[],J=[],te=u.layoutVertexArray.length;for(const de of O){if(de.length===0)continue;de!==O[0]&&z.push(I.length/2);const ne=u.lineSegments.prepareSegment(de.length,u.layoutVertexArray,u.lineIndexArray),Ae=ne.vertexLength;f&&J.push(u.layoutVertexArray.length-te),b(de[0],M,B),u.layoutVertexArray.emplaceBack(de[0].x,de[0].y),u.lineIndexArray.emplaceBack(Ae+de.length-1,Ae),I.push(de[0].x),I.push(de[0].y);for(let xe=1;xe<de.length;xe++)b(de[xe],M,B),u.layoutVertexArray.emplaceBack(de[xe].x,de[xe].y),u.lineIndexArray.emplaceBack(Ae+xe-1,Ae+xe),I.push(de[xe].x),I.push(de[xe].y);ne.vertexLength+=de.length,ne.primitiveLength+=de.length}const he=PA(I,z);for(let de=0;de<he.length;de+=3)u.indexArray.emplaceBack(V+he[de],V+he[de+1],V+he[de+2]);if(f&&this.elevationMode==="hd-road-base"){const de=f.elevation.isTunnel(),ne=f.elevation.safeArea,Ae=this.elevatedStructures.addVertices(M,B);this.elevatedStructures.addTriangles(he,Ae,de);const xe=J.length;if(xe>0){for(let Oe=0;Oe<xe-1;Oe++)this.elevatedStructures.addRenderableRing(f.index,J[Oe]+Ae,J[Oe+1]-J[Oe],de,ne);this.elevatedStructures.addRenderableRing(f.index,J[xe-1]+Ae,M.length-J[xe-1],de,ne)}}C.vertexLength+=D,C.primitiveLength+=he.length/3}return[g,m]}getElevationFeature(s,u){if(!u)return;const f=+s.properties[Uf];return f!=null?u.find(g=>g.id===f):void 0}}let U1,B1,p0,m0;Pt(uy,"FillBucket",{omit:["layers","patternFeatures"]}),Pt(DA,"FillBufferData"),Pt(Qd,"ElevatedStructures");class j1{constructor(s,u,f,g){if(this.triangleCount=u.length/3,this.min=new It(0,0),this.max=new It(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||s.length===0)return;const[m,_]=[s[0].clone(),s[0].clone()];for(let V=1;V<s.length;++V){const I=s[V];m.x=Math.min(m.x,I.x),m.y=Math.min(m.y,I.y),_.x=Math.max(_.x,I.x),_.y=Math.max(_.y,I.y)}if(g){const V=Math.ceil(Math.max(_.x-m.x,_.y-m.y)/g);f=Math.max(f,V)}if(f===0)return;this.min=m,this.max=_;const b=this.max.sub(this.min);b.x=Math.max(b.x,1),b.y=Math.max(b.y,1);const O=Math.max(b.x,b.y)/f;this.cellsX=Math.max(1,Math.ceil(b.x/O)),this.cellsY=Math.max(1,Math.ceil(b.y/O)),this.xScale=1/O,this.yScale=1/O;const D=[];for(let V=0;V<this.triangleCount;V++){const I=s[u[3*V+0]].sub(this.min),z=s[u[3*V+1]].sub(this.min),M=s[u[3*V+2]].sub(this.min),B=nf(Math.floor(Math.min(I.x,z.x,M.x)),this.xScale,this.cellsX),J=nf(Math.floor(Math.max(I.x,z.x,M.x)),this.xScale,this.cellsX),te=nf(Math.floor(Math.min(I.y,z.y,M.y)),this.yScale,this.cellsY),he=nf(Math.floor(Math.max(I.y,z.y,M.y)),this.yScale,this.cellsY),de=new It(0,0),ne=new It(0,0),Ae=new It(0,0),xe=new It(0,0);for(let Oe=te;Oe<=he;++Oe){de.y=ne.y=Oe*O,Ae.y=xe.y=(Oe+1)*O;for(let Qe=B;Qe<=J;++Qe)de.x=Ae.x=Qe*O,ne.x=xe.x=(Qe+1)*O,(Qt(I,z,M,de,ne,xe)||Qt(I,z,M,de,xe,Ae))&&D.push({cellIdx:Oe*this.cellsX+Qe,triIdx:V})}}if(D.length===0)return;D.sort((V,I)=>V.cellIdx-I.cellIdx||V.triIdx-I.triIdx);let C=0;for(;C<D.length;){const V=D[C].cellIdx,I={start:this.payload.length,len:0};for(;C<D.length&&D[C].cellIdx===V;)++I.len,this.payload.push(D[C++].triIdx);this.cells[V]=I}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(s,u){if(this.triangleCount===0||this.cells.length===0||s.x>this.max.x||this.min.x>s.x||s.y>this.max.y||this.min.y>s.y)return;const f=nf(s.x-this.min.x,this.xScale,this.cellsX),g=nf(s.y-this.min.y,this.yScale,this.cellsY),m=this.cells[g*this.cellsX+f];if(m){this._lazyInitLookup();for(let _=0;_<m.len;_++){const b=this.payload[m.start+_],O=Math.floor(b/8),D=1<<b%8;if(!(this.lookup[O]&D)&&(this.lookup[O]|=D,u.push(b),u.length===this.triangleCount))return}}}query(s,u,f){if(this.triangleCount===0||this.cells.length===0||s.x>this.max.x||this.min.x>u.x||s.y>this.max.y||this.min.y>u.y)return;this._lazyInitLookup();const g=nf(s.x-this.min.x,this.xScale,this.cellsX),m=nf(u.x-this.min.x,this.xScale,this.cellsX),_=nf(s.y-this.min.y,this.yScale,this.cellsY),b=nf(u.y-this.min.y,this.yScale,this.cellsY);for(let O=_;O<=b;O++)for(let D=g;D<=m;D++){const C=this.cells[O*this.cellsX+D];if(C)for(let V=0;V<C.len;V++){const I=this.payload[C.start+V],z=Math.floor(I/8),M=1<<I%8;if(!(this.lookup[z]&M)&&(this.lookup[z]|=M,f.push(I),f.length===this.triangleCount))return}}}}function nf(h,s,u){return Math.max(0,Math.min(u-1,Math.floor(h*s)))}Pt(j1,"TriangleGridIndex");class zC{constructor(s){this.zoom=s.zoom,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=s.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.footprints=[]}updateFootprints(s,u){for(const f of this.footprints)u.push({footprint:f,id:s})}populate(s,u,f,g){const m=[];for(const{feature:_,id:b,index:O,sourceLayerIndex:D}of s){const C=this.layers[0]._featureFilter.needGeometry,V=Y(_,C);if(!this.layers[0]._featureFilter.filter(new Pn(this.zoom),V,f))continue;const I={id:b,properties:_.properties,type:_.type,sourceLayerIndex:D,index:O,geometry:C?V.geometry:K(_,f,g),patterns:{}};m.push(I)}for(const _ of m){const{geometry:b,index:O,sourceLayerIndex:D}=_;this.addFeature(_,b,O,f,{},u.availableImages,u.brightness),u.featureIndex.insert(s[O].feature,b,O,D,this.index)}}isEmpty(){return this.footprints.length===0}uploadPending(){return!1}upload(s){}update(s,u,f,g,m,_,b){}destroy(){}addFeature(s,u,f,g,m,_=[],b){for(const O of OA(u,2)){const D=[],C=[],V=[],I=new It(1/0,1/0),z=new It(-1/0,-1/0);for(const J of O)if(J.length!==0){J!==O[0]&&V.push(C.length/2);for(let te=0;te<J.length;te++)C.push(J[te].x),C.push(J[te].y),D.push(J[te]),I.x=Math.min(I.x,J[te].x),I.y=Math.min(I.y,J[te].y),z.x=Math.max(z.x,J[te].x),z.y=Math.max(z.y,J[te].y)}const M=PA(C,V),B=new j1(D,M,8,256);this.footprints.push({vertices:D,indices:M,grid:B,min:I,max:z})}}}Pt(zC,"ClipBucket",{omit:["layers"]});const DC=Mn([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),hE=Mn([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),fE=Mn([{name:"a_centroid_pos",components:2,type:"Uint16"}]),G1=Mn([{name:"a_join_normal_inside",components:3,type:"Int16"}]),Z1=Mn([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),pE=Mn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:mE}=DC;class ju extends It{constructor(s,u,f){super(s,u),this.z=f}}class q1 extends ju{constructor(s,u,f,g){super(s,u,f),this.w=g}}function MA(h,s,u,f){const g=[],m=f===0?(_,b,O,D,C,V)=>{_.push(new It(V,O+(V-b)/(D-b)*(C-O)))}:(_,b,O,D,C,V)=>{_.push(new It(b+(V-O)/(C-O)*(D-b),V))};for(const _ of h){const b=[];for(const O of _){if(O.length<=2)continue;const D=[];for(let I=0;I<O.length-1;I++){const z=O[I].x,M=O[I].y,B=O[I+1].x,J=O[I+1].y,te=f===0?z:M,he=f===0?B:J;te<s?he>s&&m(D,z,M,B,J,s):te>u?he<u&&m(D,z,M,B,J,u):D.push(O[I]),he<s&&te>=s&&m(D,z,M,B,J,s),he>u&&te<=u&&m(D,z,M,B,J,u)}let C=O[O.length-1];const V=f===0?C.x:C.y;V>=s&&V<=u&&D.push(C),D.length&&(C=D[D.length-1],D[0].x===C.x&&D[0].y===C.y||D.push(D[0]),b.push(D))}b.length&&g.push(b)}return g}function eh(h,s,u,f){const g=u==="x"?"y":"x",m=(f-h[u])/(s[u]-h[u]);h[g]=h[g]+(s[g]-h[g])*m,h[u]=f,h.hasOwnProperty("z")&&(h.z=gr(h.z,s.z,m)),h.hasOwnProperty("w")&&(h.w=gr(h.w,s.w,m))}function H1(h,s,u,f){const g=u,m=f;for(const _ of["x","y"]){let b=h,O=s;b[_]>=O[_]&&(b=s,O=h),b[_]<g&&O[_]>g&&eh(b,O,_,g),b[_]<m&&O[_]>m&&eh(O,b,_,m)}}const fg=Number.MAX_SAFE_INTEGER;function jf(h,s,u,f){return h.order<s||h.order===fg||!(h.clipMask&u)||function(g,m){return m.length!==0&&m.find(_=>_===g)===void 0}(f,h.clipScope)}function g0(h,s){return h.x-s.x||h.y-s.y}function MC(h,s){return g0(h.min,s.min)===0&&g0(h.max,s.max)===0}function Am(h,s){return!(h.min.x>s.max.x||h.max.x<s.min.x||h.min.y>s.max.y||h.max.y<s.min.y)}function y0(h,s){if(h.length!==s.length)return!1;for(let u=0;u<h.length;u++)if(h[u].sourceId!==s[u].sourceId||!MC(h[u],s[u])||h[u].order!==s[u].order||h[u].clipMask!==s[u].clipMask||!$t(h[u].clipScope,s[u].clipScope))return!1;return!0}function IC(h,s,u){const f=1/za,g=1/(1<<u.canonical.z),m=(s.x*f+u.canonical.x)*g+u.wrap,_=(s.y*f+u.canonical.y)*g;return{min:new It((h.x*f+u.canonical.x)*g+u.wrap,(h.y*f+u.canonical.y)*g),max:new It(m,_)}}function gE(h,s,u){const f=1<<u.canonical.z,g=((s.x-u.wrap)*f-u.canonical.x)*za,m=(s.y*f-u.canonical.y)*za;return{min:new It(((h.x-u.wrap)*f-u.canonical.x)*za,(h.y*f-u.canonical.y)*za),max:new It(g,m)}}function LC(h,s,u,f,g,m,_){const b=h.indices,O=h.vertices,D=[];for(let C=f;C<f+g;C+=3){const V=s[u[C+0]+m],I=s[u[C+1]+m],z=s[u[C+2]+m],M=Math.min(V.x,I.x,z.x),B=Math.max(V.x,I.x,z.x),J=Math.min(V.y,I.y,z.y),te=Math.max(V.y,I.y,z.y);D.length=0,h.grid.query(new It(M,J),new It(B,te),D);for(let he=0;he<D.length;he++){const de=D[he];if(Qt(O[b[3*de+0]],O[b[3*de+1]],O[b[3*de+2]],V,I,z,_))return!0}}return!1}function FC(h,s,u,f){if(!h||!u)return!1;let g=h.vertices;if(!s.canonical.equals(f.canonical)||s.wrap!==f.wrap){if(u.vertices.length<h.vertices.length)return FC(u,f,h,s);const m=s.canonical,_=f.canonical,b=Math.pow(2,_.z-m.z);g=h.vertices.map(O=>new It((O.x+m.x*za)*b-_.x*za,(O.y+m.y*za)*b-_.y*za))}return LC(u,g,h.indices,0,h.indices.length,0,0)}function kC(h,s,u,f){const g=Math.pow(2,f.z-u.z);return new It((h+u.x*za)*g-f.x*za,(s+u.y*za)*g-f.y*za)}function UC(h,s){const u=[];s.grid.queryPoint(h,u);const f=s.indices,g=s.vertices;for(let m=0;m<u.length;m++){const _=u[m];if(ct([g[f[3*_+0]],g[f[3*_+1]],g[f[3*_+2]]],h))return!0}return!1}const $1=[new It(0,0),new It(za,0),new It(za,za),new It(0,za)];function K1(h,s){const u=[];let f=[];if(!s||h.length<2)return[h];if(h.length===2)return vt(h[0],h[1],$1)?[h]:[];for(let g=0;g<h.length+2;g++){const m=h[g%h.length],_=h[(g+1)%h.length],b=vt(g===0?h[h.length-1]:h[(g-1)%h.length],m,$1),O=vt(m,_,$1),D=b||O;D&&f.push(m),D&&O||f.length>0&&(f.length>1&&u.push(f),f=[])}return f.length>1&&u.push(f),u}const vm=Dh.VectorTileFeature.types,IA=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius","fill-extrusion-line-width","fill-extrusion-emissive-strength"],BC=["fill-extrusion-flood-light-ground-radius"],yE=Math.pow(2,13),cy=Math.pow(2,15)-1,dy=new It(0,1),bp=2147483648;function _m(h,s,u,f,g,m,_,b){h.emplaceBack((s<<1)+_,(u<<1)+m,(Math.floor(f*yE)<<1)+g,Math.round(b))}function pg(h,s,u){h.emplaceBack(s.x*za,s.y*za,u?1:0)}function hy(h,s,u,f,g,m){h.emplaceBack(s.x,s.y,(u.x<<1)+f,(u.y<<1)+g,m)}function wm(h,s,u){h.emplaceBack(s.x,s.y,s.z,u[0]*16384,u[1]*16384,u[2]*16384)}class W1{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class Y1{constructor(){this.centroidXY=new It(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new It(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new It(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new It(this.max.x-this.min.x,this.max.y-this.min.y)}}class jC{constructor(){this.acc=new It(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(s,u){s.min.x===Number.MAX_VALUE&&(s.min.x=s.max.x=u.x,s.min.y=s.max.y=u.y)}appendEdge(s,u,f){this.accCount++,this.acc._add(u);let g=!!this.borders;u.x<s.min.x?(s.min.x=u.x,g=!0):u.x>s.max.x&&(s.max.x=u.x,g=!0),u.y<s.min.y?(s.min.y=u.y,g=!0):u.y>s.max.y&&(s.max.y=u.y,g=!0),((u.x===0||u.x===za)&&u.x===f.x)!=((u.y===0||u.y===za)&&u.y===f.y)&&this.processBorderOverlap(u,f),g&&this.checkBorderIntersection(u,f)}checkBorderIntersection(s,u){u.x<0!=s.x<0&&this.addBorderIntersection(0,gr(u.y,s.y,(0-u.x)/(s.x-u.x))),u.x>za!=s.x>za&&this.addBorderIntersection(1,gr(u.y,s.y,(za-u.x)/(s.x-u.x))),u.y<0!=s.y<0&&this.addBorderIntersection(2,gr(u.x,s.x,(0-u.y)/(s.y-u.y))),u.y>za!=s.y>za&&this.addBorderIntersection(3,gr(u.x,s.x,(za-u.y)/(s.y-u.y)))}addBorderIntersection(s,u){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const f=this.borders[s];u<f[0]&&(f[0]=u),u>f[1]&&(f[1]=u)}processBorderOverlap(s,u){if(s.x===u.x){if(s.y===u.y)return;const f=s.x===0?0:1;this.addBorderIntersection(f,u.y),this.addBorderIntersection(f,s.y)}else{const f=s.y===0?2:3;this.addBorderIntersection(f,u.x),this.addBorderIntersection(f,s.x)}}centroid(){return this.accCount===0?new It(0,0):new It(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((s,u)=>s+ +(u[0]!==Number.MAX_VALUE),0):0}}function X1(h,s){const u=h.add(s)._unit(),f=ka(h.x*u.x+h.y*u.y,-1,1);var g,m,_;return _=Math.acos(f),Math.min(4,Math.max(-4,Math.tan(_)))/4*cy*((g=h).x*(m=s).y-g.y*m.x<0?-1:1)}const LA=[h=>h.x<0,h=>h.x>za,h=>h.y<0,h=>h.y>za];function AE(h,s,u,f){const g=[4];if(f===0)return g;u._mult(f);const m=h.sub(u),_=s.sub(u),b=[h,s,m,_];for(let O=0;O<4;O++)for(const D of b)if(LA[O](D)){g.push(O);break}return g}class GC{constructor(s){this.vertexArray=new jl,this.indexArray=new Ls,this.programConfigurations=new Nh(s.layers,{zoom:s.zoom,lut:s.lut},u=>BC.includes(u)),this._segments=new ji,this.hiddenByLandmarkVertexArray=new Wg,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new ji}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(s,u,f,g=!1){const m=s.length;if(m>2){let _=Math.max(0,this._segments.get().length-1);const b=this._segments._prepareSegment(4*m,this.vertexArray.length,2*this._segmentToGroundQuads[_].length);let O;_!==this._segments.get().length-1&&(_++,this._segmentToGroundQuads[_]=[],this._segmentToRegionTriCounts[_]=[0,0,0,0,0]);{const D=s[0],C=s[1];O=X1(D.sub(s[m-1])._perp()._unit(),C.sub(D)._perp()._unit())}for(let D=0;D<m;D++){const C=D===m-1?0:D+1,V=s[D],I=s[C],z=s[C===m-1?0:C+1],M=I.sub(V)._perp()._unit(),B=X1(M,z.sub(I)._perp()._unit()),J=O,te=B;if(J1(V,I,u)||g&&fy(V,u)&&fy(I,u)){O=B;continue}const he=b.vertexLength;hy(this.vertexArray,V,I,1,1,J),hy(this.vertexArray,V,I,1,0,J),hy(this.vertexArray,V,I,0,1,te),hy(this.vertexArray,V,I,0,0,te),b.vertexLength+=4;const de=AE(V,I,M,f);for(const ne of de)this._segmentToGroundQuads[_].push({id:he,region:ne}),this._segmentToRegionTriCounts[_][ne]+=2,b.primitiveLength+=2;O=B}}}prepareBorderSegments(){if(!this.hasData())return;const s=this._segments.get(),u=s.length;for(let f=0;f<u;f++)this._segmentToGroundQuads[f].sort((g,m)=>g.region-m.region);for(let f=0;f<u;f++){const g=this._segmentToGroundQuads[f],m=s[f],_=this._segmentToRegionTriCounts[f];_.reduce((O,D)=>O+D,0);let b=0;for(let O=0;O<=4;O++){const D=_[O];if(D!==0){let C=this.regionSegments[O];C||(C=this.regionSegments[O]=new ji);const V={vertexOffset:m.vertexOffset,primitiveOffset:m.primitiveOffset+b,vertexLength:m.vertexLength,primitiveLength:D};C.get().push(V)}b+=D}for(let O=0;O<g.length;O++){const D=g[O].id;this.indexArray.emplaceBack(D,D+1,D+3),this.indexArray.emplaceBack(D,D+3,D+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(s,u,f,g,m,_){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,s,u,f,g,m,_)}upload(s){this.hasData()&&(this.vertexBuffer=s.createVertexBuffer(this.vertexArray,hE.members),this.indexBuffer=s.createIndexBuffer(this.indexArray))}uploadPaintProperties(s){this.hasData()&&this.programConfigurations.upload(s)}update(s,u,f,g,m,_,b){this.hasData()&&this.programConfigurations.updatePaintArrays(s,u,f,g,m,_,b)}updateHiddenByLandmark(s){if(!this.hasData())return;const u=s.groundVertexCount+s.groundVertexArrayOffset;if(s.groundVertexCount===0)return;const f=s.flags&bp?1:0;for(let g=s.groundVertexArrayOffset;g<u;++g)this.hiddenByLandmarkVertexArray.emplace(g,f);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(s){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=s.createVertexBuffer(this.hiddenByLandmarkVertexArray,Z1.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let s=0;s<=4;s++){const u=this.regionSegments[s];u&&u.destroy()}}}}class A0{constructor(s){this.zoom=s.zoom,this.canonical=s.canonical,this.overscaling=s.overscaling,this.layers=s.layers,this.pixelRatio=s.pixelRatio,this.layerIds=this.layers.map(u=>u.fqid),this.index=s.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=s.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new Ls,this.footprintVertices=new Iu,this.footprintSegments=[],this.layoutVertexArray=new Lu,this.centroidVertexArray=new gp,this.wallVertexArray=new vA,this.indexArray=new Ls,this.programConfigurations=new Nh(s.layers,{zoom:s.zoom,lut:s.lut},u=>IA.includes(u)),this.segments=new ji,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.groundEffect=new GC(s),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}updateFootprints(s,u){}populate(s,u,f,g){this.features=[],this.hasPattern=VA("fill-extrusion",this.layers,this.pixelRatio,u),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.selfDEMTileTimestamp=Number.MAX_VALUE,this.borderDEMTileTimestamp=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],this.tileToMeter=y(f),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,this.wallMode=this.layers[0].paint.get("fill-extrusion-line-width").constantOr(1)!==0;for(const{feature:m,id:_,index:b,sourceLayerIndex:O}of s){const D=this.layers[0]._featureFilter.needGeometry,C=Y(m,D);if(!this.layers[0]._featureFilter.filter(new Pn(this.zoom),C,f))continue;const V={id:_,sourceLayerIndex:O,index:b,geometry:D?C.geometry:K(m,f,g),properties:m.properties,type:m.type,patterns:{}},I=this.layoutVertexArray.length,z=vm[V.type]==="Polygon";if(this.hasPattern)this.features.push(zA("fill-extrusion",this.layers,V,this.zoom,this.pixelRatio,u));else if(this.wallMode)for(const M of V.geometry)for(const B of K1(M,z))this.addFeature(V,[B],b,f,{},u.availableImages,g,u.brightness);else this.addFeature(V,V.geometry,b,f,{},u.availableImages,g,u.brightness);u.featureIndex.insert(m,V.geometry,b,O,this.index,I)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(s,u,f,g,m,_){for(const b of this.features){const O=vm[b.type]==="Polygon",{geometry:D}=b;if(this.wallMode)for(const C of D)for(const V of K1(C,O))this.addFeature(b,[V],b.index,u,f,g,m,_);else this.addFeature(b,D,b.index,u,f,g,m,_)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(s,u,f,g,m,_,b){this.programConfigurations.updatePaintArrays(s,u,m,f,g,_,b),this.groundEffect.update(s,u,m,f,g,_,b)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,mE),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.wallVertexBuffer=s.createVertexBuffer(this.wallVertexArray,G1.members),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=s.createVertexBuffer(this.layoutVertexExtArray,pE.members,!0)),this.groundEffect.upload(s)),this.groundEffect.uploadPaintProperties(s),this.programConfigurations.upload(s),this.uploaded=!0}uploadCentroid(s){this.groundEffect.uploadHiddenByLandmark(s),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,fE.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,u,f,g,m,_,b,O){const D=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(s,{})/this.tileToMeter,C=[new It(0,0),new It(za,za)],V=b.projection,I=V.name==="globe",z=this.wallMode||vm[s.type]==="Polygon",M=new jC;M.centroidDataIndex=this.centroidData.length;const B=new Y1,J=this.layers[0].paint.get("fill-extrusion-base").evaluate(s,{},g)<=0,te=this.layers[0].paint.get("fill-extrusion-height").evaluate(s,{},g);let he;if(B.height=te,B.vertexArrayOffset=this.layoutVertexArray.length,B.groundVertexArrayOffset=this.groundEffect.vertexArray.length,I&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new fp),this.wallMode){if(I)return void $r("Non zero fill-extrusion-line-width is not yet supported on globe.");if(u.length!==1)return;he=function(Xe){const gt=Xe[0].x===Xe[Xe.length-1].x&&Xe[0].y===Xe[Xe.length-1].y;(function(Da){let Ra=0;const Rr=Da.length;for(let Xa=0;Xa<Rr;Xa++)Ra+=(Da[(Xa+1)%Rr].x-Da[Xa].x)*(Da[(Xa+1)%Rr].y+Da[Xa].y);return Ra>=0})(Xe)||(Xe=Xe.reverse());const _t={geometry:[],joinNormals:[],indices:[]},xt=[],Ct=[],Dt=[];let Nt=Xe.length;for(;Nt>=2&&Xe[Nt-1].equals(Xe[Nt-2]);)Nt--;if(Nt<(gt?3:2))return _t;let jt,Lt,Ht,Aa,ma,er=0;for(;er<Nt-1&&Xe[er].equals(Xe[er+1]);)er++;gt&&(jt=Xe[Nt-2],ma=Xe[er].sub(jt)._unit()._perp());for(let Da=er;Da<Nt;Da++){if(Ht=Da===Nt-1?gt?Xe[er+1]:void 0:Xe[Da+1],Ht&&Xe[Da].equals(Ht))continue;ma&&(Aa=ma),jt&&(Lt=jt),jt=Xe[Da],ma=Ht?Ht.sub(jt)._unit()._perp():Aa,Aa=Aa||ma;let Ra=Aa.add(ma);Ra.x===0&&Ra.y===0||Ra._unit();const Rr=Ra.x*ma.x+Ra.y*ma.y,Xa=Rr!==0?1/Rr:1/0,dr=Aa.x*ma.y-Aa.y*ma.x>0;let Lr="miter";const sn=2;Lr==="miter"&&Xa>sn&&(Lr="bevel"),Lr==="bevel"&&(Xa>100&&(Lr="flipbevel"),Xa<sn&&(Lr="miter"));const Zr=(vn,rn,En,Jn)=>{const Li=new It(vn.x,vn.y),Br=new It(vn.x,vn.y);Li.x+=rn.x*Jn,Li.y+=rn.y*Jn,Br.x-=rn.x*Math.max(En,1),Br.y-=rn.y*Math.max(En,1),Dt.push(rn),xt.push(Li),Ct.push(Br)};if(Lr==="miter")Ra._mult(Xa),Zr(jt,Ra,0,0);else if(Lr==="flipbevel")Ra=ma.mult(-1),Zr(jt,Ra,0,0),Zr(jt,Ra.mult(-1),0,0);else{const vn=-Math.sqrt(Xa*Xa-1),rn=dr?vn:0,En=dr?0:vn;Lt&&Zr(jt,Aa,rn,En),Ht&&Zr(jt,ma,rn,En)}}_t.geometry=[...xt,...Ct.reverse(),xt[0]],_t.joinNormals=[...Dt,...Dt.reverse(),Dt[Dt.length-1]];const Oa=_t.geometry.length-1;for(let Da=0;Da<Oa/2;Da++)if(Da+1<Oa/2){let Ra=Da,Rr=Da+1,Xa=Oa-1-Da,dr=Oa-2-Da;Ra=Ra===0?Oa-1:Ra-1,Rr=Rr===0?Oa-1:Rr-1,Xa=Xa===0?Oa-1:Xa-1,dr=dr===0?Oa-1:dr-1,_t.indices.push(Xa),_t.indices.push(Rr),_t.indices.push(Ra),_t.indices.push(Xa),_t.indices.push(dr),_t.indices.push(Rr)}return _t}(u[0]),u=[he.geometry]}const de=(Xe,gt)=>Xe<(gt.length-1)/2||Xe===gt.length-1,ne=this.wallMode?[u]:OA(u,500);for(let Xe=ne.length-1;Xe>=0;Xe--){const gt=ne[Xe];(gt.length===0||(Ae=gt[0]).every(et=>et.x<=0)||Ae.every(et=>et.x>=za)||Ae.every(et=>et.y<=0)||Ae.every(et=>et.y>=za))&&ne.splice(Xe,1)}var Ae;let xe;if(I)xe=tw(ne,C,g);else{xe=[];for(const Xe of ne)xe.push({polygon:Xe,bounds:C})}const Oe=z?this.edgeRadius:0,Qe=Oe>0&&this.zoom<17,Ye=(Xe,gt)=>{if(Xe.length===0)return!1;const et=Xe[Xe.length-1];return gt.x===et.x&&gt.y===et.y};for(const{polygon:Xe,bounds:gt}of xe){let et=0,_t=0;for(const Nt of Xe)z&&!Nt[0].equals(Nt[Nt.length-1])&&Nt.push(Nt[0]),_t+=z?Nt.length-1:Nt.length;const xt=this.segments.prepareSegment((z?5:4)*_t,this.layoutVertexArray,this.indexArray);B.footprintSegIdx<0&&(B.footprintSegIdx=this.footprintSegments.length),B.polygonSegIdx<0&&(B.polygonSegIdx=this.polygonSegments.length);const Ct={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},Dt=new W1;if(Dt.vertexOffset=this.footprintVertices.length,Dt.indexOffset=3*this.footprintIndices.length,Dt.ringIndices=[],z){const Nt=[],jt=[];et=xt.vertexLength;for(let Ht=0;Ht<Xe.length;Ht++){const Aa=Xe[Ht];Aa.length&&Ht!==0&&jt.push(Nt.length/2);const ma=[];let er,Oa;er=Aa[1].sub(Aa[0])._perp()._unit(),Dt.ringIndices.push(Aa.length-1);for(let Da=1;Da<Aa.length;Da++){const Ra=Aa[Da],Rr=Aa[Da===Aa.length-1?1:Da+1],Xa=Ra.clone();if(Oe){Oa=Rr.sub(Ra)._perp()._unit();const dr=er.add(Oa)._unit(),Lr=Oe*Math.min(4,1/(er.x*dr.x+er.y*dr.y));Xa.x+=Lr*dr.x,Xa.y+=Lr*dr.y,Xa.x=Math.round(Xa.x),Xa.y=Math.round(Xa.y),er=Oa}if(!J||Oe!==0&&!Qe||Ye(ma,Xa)||ma.push(Xa),_m(this.layoutVertexArray,Xa.x,Xa.y,0,0,1,1,0),this.wallMode){const dr=de(Da,Aa);pg(this.wallVertexArray,he.joinNormals[Da],!dr)}xt.vertexLength++,this.footprintVertices.emplaceBack(Ra.x,Ra.y),Nt.push(Ra.x,Ra.y),I&&wm(this.layoutVertexExtArray,V.projectTilePoint(Xa.x,Xa.y,g),V.upVector(g,Xa.x,Xa.y))}J&&(Oe===0||Qe)&&(ma.length!==0&&Ye(ma,ma[0])&&ma.pop(),this.groundEffect.addData(ma,gt,D))}const Lt=this.wallMode?he.indices:PA(Nt,jt);for(let Ht=0;Ht<Lt.length;Ht+=3)this.footprintIndices.emplaceBack(Dt.vertexOffset+Lt[Ht+0],Dt.vertexOffset+Lt[Ht+1],Dt.vertexOffset+Lt[Ht+2]),this.indexArray.emplaceBack(et+Lt[Ht],et+Lt[Ht+2],et+Lt[Ht+1]),xt.primitiveLength++;Dt.indexCount+=Lt.length,Dt.vertexCount+=this.footprintVertices.length-Dt.vertexOffset}for(let Nt=0;Nt<Xe.length;Nt++){const jt=Xe[Nt];M.startRing(B,jt[0]);let Lt=jt.length>4&&ZC(jt[jt.length-2],jt[0],jt[1]),Ht=Oe?v0(jt[jt.length-2],jt[0],jt[1],Oe):0;const Aa=[];let ma,er,Oa;er=jt[1].sub(jt[0])._perp()._unit();let Da=!0;for(let Ra=1,Rr=0;Ra<jt.length;Ra++){let Xa=jt[Ra-1],dr=jt[Ra];const Lr=jt[Ra===jt.length-1?1:Ra+1];if(M.appendEdge(B,dr,Xa),J1(dr,Xa,gt)){Oe&&(er=Lr.sub(dr)._perp()._unit(),Da=!Da);continue}const sn=dr.sub(Xa)._perp(),Zr=sn.x/(Math.abs(sn.x)+Math.abs(sn.y)),vn=sn.y>0?1:0,rn=Xa.dist(dr);if(Rr+rn>32768&&(Rr=0),Oe){Oa=Lr.sub(dr)._perp()._unit();let Br=_0(Xa,dr,Lr,FA(er,Oa),Oe);isNaN(Br)&&(Br=0);const Ln=dr.sub(Xa)._unit();Xa=Xa.add(Ln.mult(Ht))._round(),dr=dr.add(Ln.mult(-Br))._round(),Ht=Br,er=Oa,J&&this.zoom>=17&&(Ye(Aa,Xa)||Aa.push(Xa),Ye(Aa,dr)||Aa.push(dr))}const En=xt.vertexLength,Jn=jt.length>4&&ZC(Xa,dr,Lr);let Li=Q1(Rr,Lt,Da);if(_m(this.layoutVertexArray,Xa.x,Xa.y,Zr,vn,0,0,Li),_m(this.layoutVertexArray,Xa.x,Xa.y,Zr,vn,0,1,Li),this.wallMode){const Br=de(Ra-1,jt),Ln=he.joinNormals[Ra-1];pg(this.wallVertexArray,Ln,Br),pg(this.wallVertexArray,Ln,Br)}if(Rr+=rn,Li=Q1(Rr,Jn,!Da),Lt=Jn,_m(this.layoutVertexArray,dr.x,dr.y,Zr,vn,0,0,Li),_m(this.layoutVertexArray,dr.x,dr.y,Zr,vn,0,1,Li),this.wallMode){const Br=de(Ra,jt),Ln=he.joinNormals[Ra];pg(this.wallVertexArray,Ln,Br),pg(this.wallVertexArray,Ln,Br)}if(xt.vertexLength+=4,this.indexArray.emplaceBack(En+0,En+1,En+2),this.indexArray.emplaceBack(En+1,En+3,En+2),xt.primitiveLength+=2,Oe){const Br=et+(Ra===1?jt.length-2:Ra-2),Ln=Ra===1?et:Br+1;if(this.indexArray.emplaceBack(En+1,Br,En+3),this.indexArray.emplaceBack(Br,Ln,En+3),xt.primitiveLength+=2,ma===void 0&&(ma=En),!J1(Lr,jt[Ra],gt)){const is=Ra===jt.length-1?ma:xt.vertexLength;this.indexArray.emplaceBack(En+2,En+3,is),this.indexArray.emplaceBack(En+3,is+1,is),this.indexArray.emplaceBack(En+3,Ln,is+1),xt.primitiveLength+=3}Da=!Da}if(I){const Br=this.layoutVertexExtArray,Ln=V.projectTilePoint(Xa.x,Xa.y,g),is=V.projectTilePoint(dr.x,dr.y,g),gs=V.upVector(g,Xa.x,Xa.y),bs=V.upVector(g,dr.x,dr.y);wm(Br,Ln,gs),wm(Br,Ln,gs),wm(Br,is,bs),wm(Br,is,bs)}}z&&(et+=jt.length-1),J&&Oe&&this.zoom>=17&&(Aa.length!==0&&Ye(Aa,Aa[0])&&Aa.pop(),this.groundEffect.addData(Aa,gt,D,Oe>0))}this.footprintSegments.push(Dt),Ct.triangleCount=this.indexArray.length-Ct.triangleArrayOffset,this.polygonSegments.push(Ct),++B.footprintSegLen,++B.polygonSegLen}if(B.vertexCount=this.layoutVertexArray.length-B.vertexArrayOffset,B.groundVertexCount=this.groundEffect.vertexArray.length-B.groundVertexArrayOffset,B.vertexCount!==0){if(B.centroidXY=M.borders?dy:this.encodeCentroid(M,B),this.centroidData.push(B),M.borders){this.featuresOnBorder.push(M);const Xe=this.featuresOnBorder.length-1;for(let gt=0;gt<M.borders.length;gt++)M.borders[gt][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[gt].push(Xe)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,f,m,_,g,O),this.groundEffect.addPaintPropertiesData(s,f,m,_,g,O),this.maxHeight=Math.max(this.maxHeight,te)}}sortBorders(){for(let s=0;s<this.borderFeatureIndices.length;s++)this.borderFeatureIndices[s].sort((u,f)=>this.featuresOnBorder[u].borders[s][0]-this.featuresOnBorder[f].borders[s][0])}splitToSubtiles(){const s=[];for(let b=0;b<this.centroidData.length;b++){const O=this.centroidData[b],D=+(O.min.y+O.max.y>za),C=2*D+(+(O.min.x+O.max.x>za)^D);for(let V=0;V<O.polygonSegLen;V++){const I=O.polygonSegIdx+V;s.push({centroidIdx:b,subtile:C,polygonSegmentIdx:I,triangleSegmentIdx:this.polygonSegments[I].triangleSegIdx})}}const u=new Ls;s.sort((b,O)=>b.triangleSegmentIdx===O.triangleSegmentIdx?b.subtile-O.subtile:b.triangleSegmentIdx-O.triangleSegmentIdx);let f=0,g=0,m=0;for(const b of s){if(b.triangleSegmentIdx!==f)break;m++}const _=s.length;for(;g!==s.length;){f=s[g].triangleSegmentIdx;let b=0,O=g,D=g;for(let C=O;C<m&&s[C].subtile===b;C++)D++;for(;O!==m;){const C=s[O];b=C.subtile;const V=this.centroidData[C.centroidIdx].min.clone(),I=this.centroidData[C.centroidIdx].max.clone(),z={vertexOffset:this.segments.segments[f].vertexOffset,primitiveOffset:u.length,vertexLength:this.segments.segments[f].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let M=O;M<D;M++){const B=s[M],J=this.polygonSegments[B.polygonSegmentIdx],te=this.centroidData[B.centroidIdx].min,he=this.centroidData[B.centroidIdx].max,de=this.indexArray.uint16;for(let ne=J.triangleArrayOffset;ne<J.triangleArrayOffset+J.triangleCount;ne++)u.emplaceBack(de[3*ne],de[3*ne+1],de[3*ne+2]);z.primitiveLength+=J.triangleCount,V.x=Math.min(V.x,te.x),V.y=Math.min(V.y,te.y),I.x=Math.max(I.x,he.x),I.y=Math.max(I.y,he.y)}z.primitiveLength>0&&this.triangleSubSegments.push({segment:z,min:V,max:I}),O=D;for(let M=O;M<m&&s[M].subtile===s[O].subtile;M++)D++}g=m;for(let C=g;C<_&&s[C].triangleSegmentIdx===s[g].triangleSegmentIdx;C++)m++}u._trim(),this.indexArray=u}getVisibleSegments(s,u,f){const g=new ji;if(this.wallMode){for(const B of this.triangleSubSegments)g.segments.push(B.segment);return g}let m=0,_=0;const b=1<<s.canonical.z;if(u){const B=u.getMinMaxForTile(s);B&&(m=B.min,_=B.max)}_+=this.maxHeight;const O=s.toUnwrapped();let D;const C=[O.canonical.x/b+O.wrap,O.canonical.y/b],V=[(O.canonical.x+1)/b+O.wrap,(O.canonical.y+1)/b],I=(B,J,te)=>[B[0]*(1-te[0])+J[0]*te[0],B[1]*(1-te[1])+J[1]*te[1]],z=[],M=[];for(const B of this.triangleSubSegments){z[0]=B.min.x/za,z[1]=B.min.y/za,M[0]=B.max.x/za,M[1]=B.max.y/za;const J=I(C,V,z),te=I(C,V,M);if(new rr([J[0],J[1],m],[te[0],te[1],_]).intersectsPrecise(f)===0){D&&(g.segments.push(D),D=void 0);continue}const he=B.segment;D&&D.vertexOffset!==he.vertexOffset&&(g.segments.push(D),D=void 0),D?(D.vertexLength+=he.vertexLength,D.primitiveLength+=he.primitiveLength):D={vertexOffset:he.vertexOffset,primitiveLength:he.primitiveLength,vertexLength:he.vertexLength,primitiveOffset:he.primitiveOffset,sortKey:void 0,vaos:{}}}return D&&g.segments.push(D),g}encodeCentroid(s,u){const f=s.centroid(),g=u.span(),m=Math.min(7,Math.round(g.x*this.tileToMeter/10)),_=Math.min(7,Math.round(g.y*this.tileToMeter/10));return new It(ka(f.x,1,za-1)<<3|m,ka(f.y,1,za-1)<<3|_)}encodeBorderCentroid(s){if(!s.borders)return new It(0,0);const u=s.borders,f=Number.MAX_VALUE;if(u[0][0]!==f||u[1][0]!==f){const g=u[0][0]!==f?0:1;return new It(6|(u[0][0]!==f?0:65528),(u[g][0]+u[g][1])/2<<3|6)}{const g=u[2][0]!==f?2:3;return new It((u[g][0]+u[g][1])/2<<3|6,6|(u[2][0]!==f?0:65528))}}showCentroid(s){const u=this.centroidData[s.centroidDataIndex];u.flags&=bp,u.centroidXY.x=0,u.centroidXY.y=0,this.writeCentroidToBuffer(u)}writeCentroidToBuffer(s){this.groundEffect.updateHiddenByLandmark(s);const u=s.vertexArrayOffset,f=s.vertexCount+s.vertexArrayOffset,g=s.flags&bp?dy:s.centroidXY,m=this.centroidVertexArray.geta_centroid_pos0(u);if(this.centroidVertexArray.geta_centroid_pos1(u)!==g.y||m!==g.x){for(let _=u;_<f;++_)this.centroidVertexArray.emplace(_,g.x,g.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const s of this.centroidData)this.writeCentroidToBuffer(s)}updateReplacement(s,u,f){if(u.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=u.updateTime;const g=u.getReplacementRegionsForTile(s.toUnwrapped());if(y0(this.activeReplacements,g))return;if(this.activeReplacements=g,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const _ of this.centroidData)_.flags&=2147483647;const m=[];for(const _ of this.activeReplacements){if(_.order<f)continue;const b=Math.max(1,Math.pow(2,_.footprintTileId.canonical.z-s.canonical.z));for(const O of this.centroidData)if(!(O.flags&bp||_.min.x>O.max.x||O.min.x>_.max.x||_.min.y>O.max.y||O.min.y>_.max.y))for(let D=0;D<O.footprintSegLen;D++){const C=this.footprintSegments[O.footprintSegIdx+D];if(m.length=0,qC(this.footprintVertices,C.vertexOffset,C.vertexCount,_.footprintTileId.canonical,s.canonical,m),LC(_.footprint,m,this.footprintIndices.uint16,C.indexOffset,C.indexCount,-C.vertexOffset,-b)){O.flags|=bp;break}}}for(const _ of this.centroidData)this.writeCentroidToBuffer(_);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(s,u,f){let g=!1;for(let m=0;m<f.footprintSegLen;m++){const _=this.footprintSegments[f.footprintSegIdx+m];let b=0;for(const O of _.ringIndices){for(let D=b,C=O+b-1;D<O+b;C=D++){const V=this.footprintVertices.int16[2*(D+_.vertexOffset)+0],I=this.footprintVertices.int16[2*(D+_.vertexOffset)+1],z=this.footprintVertices.int16[2*(C+_.vertexOffset)+1];I>u!=z>u&&s<(this.footprintVertices.int16[2*(C+_.vertexOffset)+0]-V)*(u-I)/(z-I)+V&&(g=!g)}b=O}}return g}getHeightAtTileCoord(s,u){let f=Number.NEGATIVE_INFINITY,g=!0;const m=4*(s+za)*za+(u+za);if(this.partLookup.hasOwnProperty(m)){const _=this.partLookup[m];return _?{height:_.height,hidden:!!(_.flags&bp)}:void 0}for(const _ of this.centroidData)s>_.max.x||_.min.x>s||u>_.max.y||_.min.y>u||this.footprintContainsPoint(s,u,_)&&_&&_.height>f&&(f=_.height,this.partLookup[m]=_,g=!!(_.flags&bp));if(f!==Number.NEGATIVE_INFINITY)return{height:f,hidden:g};this.partLookup[m]=void 0}}function FA(h,s){const u=h.add(s)._unit();return h.x*u.x+h.y*u.y}function v0(h,s,u,f){const g=s.sub(h)._perp()._unit(),m=u.sub(s)._perp()._unit();return _0(h,s,u,FA(g,m),f)}function _0(h,s,u,f,g){const m=Math.sqrt(1-f*f);return Math.min(h.dist(s)/3,s.dist(u)/3,g*m/f)}function J1(h,s,u){return h.x<u[0].x&&s.x<u[0].x||h.x>u[1].x&&s.x>u[1].x||h.y<u[0].y&&s.y<u[0].y||h.y>u[1].y&&s.y>u[1].y}function fy(h,s){return h.x<s[0].x||h.x>s[1].x||h.y<s[0].y||h.y>s[1].y}function ZC(h,s,u){if(h.x<0||h.x>=za||s.x<0||s.x>=za||u.x<0||u.x>=za)return!1;const f=u.sub(s),g=f.perp(),m=h.sub(s);return(f.x*m.x+f.y*m.y)/Math.sqrt((f.x*f.x+f.y*f.y)*(m.x*m.x+m.y*m.y))>-.866&&g.x*m.x+g.y*m.y<0}function Q1(h,s,u){const f=s?2|h:-3&h;return u?1|f:-2&f}function ew(){const h=Math.PI/32,s=Math.tan(h),u=fl;return u*Math.sqrt(1+2*s*s)-u}function tw(h,s,u){const f=1<<u.z,g=Uu(u.x/f),m=Uu((u.x+1)/f),_=Ni(u.y/f),b=Ni((u.y+1)/f);return function(O,D,C,V,I=0,z){const M=[];if(!O.length||!C||!V)return M;const B=(xe,Oe)=>{for(const Qe of xe)M.push({polygon:Qe,bounds:Oe})},J=Math.ceil(Math.log2(C)),te=Math.ceil(Math.log2(V)),he=J-te,de=[];for(let xe=0;xe<Math.abs(he);xe++)de.push(he>0?0:1);for(let xe=0;xe<Math.min(J,te);xe++)de.push(0),de.push(1);let ne=O;if(ne=MA(ne,D[0].y-I,D[1].y+I,1),ne=MA(ne,D[0].x-I,D[1].x+I,0),!ne.length)return M;const Ae=[];for(de.length?Ae.push({polygons:ne,bounds:D,depth:0}):B(ne,D);Ae.length;){const xe=Ae.pop(),Oe=xe.depth,Qe=de[Oe],Ye=xe.bounds[0],Xe=xe.bounds[1],gt=Qe===0?Ye.x:Ye.y,et=Qe===0?Xe.x:Xe.y,_t=z?z(Qe,gt,et):.5*(gt+et),xt=MA(xe.polygons,gt-I,_t+I,Qe),Ct=MA(xe.polygons,_t-I,et+I,Qe);if(xt.length){const Dt=[Ye,new It(Qe===0?_t:Xe.x,Qe===1?_t:Xe.y)];de.length>Oe+1?Ae.push({polygons:xt,bounds:Dt,depth:Oe+1}):B(xt,Dt)}if(Ct.length){const Dt=[new It(Qe===0?_t:Ye.x,Qe===1?_t:Ye.y),Xe];de.length>Oe+1?Ae.push({polygons:Ct,bounds:Dt,depth:Oe+1}):B(Ct,Dt)}}return M}(h,s,Math.ceil((m-g)/11.25),Math.ceil((_-b)/11.25),1,(O,D,C)=>{if(O===0)return .5*(D+C);{const V=Ni((u.y+D/za)/f);return(Ii(.5*(Ni((u.y+C/za)/f)+V))*f-u.y)*za}})}function qC(h,s,u,f,g,m){const _=Math.pow(2,f.z-g.z);for(let b=0;b<u;b++){let O=h.int16[2*(b+s)+0],D=h.int16[2*(b+s)+1];O=(O+g.x*za)*_-f.x*za,D=(D+g.y*za)*_-f.y*za,m.push(new It(O,D))}}let w0,aw;function Rm(h,s){return h.x*s.x+h.y*s.y}function HC(h,s){if(h.length===1){let u=0;const f=s[u++];let g;for(;!g||f.equals(g);)if(g=s[u++],!g)return 1/0;for(;u<s.length;u++){const m=s[u],_=h[0],b=g.sub(f),O=m.sub(f),D=_.sub(f),C=Rm(b,b),V=Rm(b,O),I=Rm(O,O),z=Rm(D,b),M=Rm(D,O),B=C*I-V*V,J=(I*z-V*M)/B,te=(C*M-V*z)/B,he=f.z*(1-J-te)+g.z*J+m.z*te;if(isFinite(he))return he}return 1/0}{let u=1/0;for(const f of s)u=Math.min(u,f.z);return u}}function $C(h,s,u,f,g,m,_,b){const O=_*g.getElevationAt(h,s,!0,!0),D=m[0]!==0,C=D?m[1]===0?_*(m[0]/7-450):_*function(V,I,z){const M=Math.floor(I[0]/8),B=Math.floor(I[1]/8),J=10*(I[0]-8*M),te=10*(I[1]-8*B),he=V.getElevationAt(M,B,!0,!0),de=V.getMeterToDEM(z),ne=Math.floor(.5*(J*de-1)),Ae=Math.floor(.5*(te*de-1)),xe=V.tileCoordToPixel(M,B),Oe=2*ne+1,Qe=2*Ae+1,Ye=function(Ct,Dt,Nt,jt,Lt){return[Ct.getElevationAtPixel(Dt,Nt,!0),Ct.getElevationAtPixel(Dt+Lt,Nt,!0),Ct.getElevationAtPixel(Dt,Nt+Lt,!0),Ct.getElevationAtPixel(Dt+jt,Nt+Lt,!0)]}(V,xe.x-ne,xe.y-Ae,Oe,Qe),Xe=Math.abs(Ye[0]-Ye[1]),gt=Math.abs(Ye[2]-Ye[3]),et=Math.abs(Ye[0]-Ye[2])+Math.abs(Ye[1]-Ye[3]),_t=Math.min(.25,.5*de*(Xe+gt)/Oe),xt=Math.min(.25,.5*de*et/Qe);return he+Math.max(_t*J,xt*te)}(g,m,b):O;return{base:O+(u===0?-1:u),top:D?Math.max(C+f,O+u+2):O+f}}Pt(A0,"FillExtrusionBucket",{omit:["layers","features"]}),Pt(Y1,"PartData"),Pt(W1,"FootprintSegment"),Pt(jC,"BorderCentroidData"),Pt(GC,"GroundEffect");const rw=Mn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),nw=Mn([{name:"a_z_offset_width",components:3,type:"Float32"}],4),{members:R0}=rw,iw=Mn([{name:"a_packed",components:3,type:"Float32"}]),{members:KC}=iw,sw=Mn([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:Tm}=sw;class xp{constructor(s,u){this.width=s,this.height=u,this.nextRow=0,this.image=new mm({width:s,height:u}),this.positions={},this.uploaded=!1}getDash(s,u){const f=this.getKey(s,u);return this.positions[f]}trim(){const s=this.width,u=this.height=la(this.nextRow);this.image.resize({width:s,height:u})}getKey(s,u){return s.join(",")+u}getDashRanges(s,u,f){const g=[];let m=s.length%2==1?-s[s.length-1]*f:0,_=s[0]*f,b=!0;g.push({left:m,right:_,isDash:b,zeroLength:s[0]===0});let O=s[0];for(let D=1;D<s.length;D++){b=!b;const C=s[D];m=O*f,O+=C,_=O*f,g.push({left:m,right:_,isDash:b,zeroLength:C===0})}return g}addRoundDash(s,u,f){const g=u/2;for(let m=-f;m<=f;m++){const _=this.width*(this.nextRow+f+m);let b=0,O=s[b];for(let D=0;D<this.width;D++){D/O.right>1&&(O=s[++b]);const C=Math.abs(D-O.left),V=Math.abs(D-O.right),I=Math.min(C,V);let z;const M=m/f*(g+1);if(O.isDash){const B=g-Math.abs(M);z=Math.sqrt(I*I+B*B)}else z=g-Math.sqrt(I*I+M*M);this.image.data[_+D]=Math.max(0,Math.min(255,z+128))}}}addRegularDash(s,u){for(let O=s.length-1;O>=0;--O){const D=s[O],C=s[O+1];D.zeroLength?s.splice(O,1):C&&C.isDash===D.isDash&&(C.left=D.left,s.splice(O,1))}const f=s[0],g=s[s.length-1];f.isDash===g.isDash&&(f.left=g.left-this.width,g.right=f.right+this.width);const m=this.width*this.nextRow;let _=0,b=s[_];for(let O=0;O<this.width;O++){O/b.right>1&&(b=s[++_]);const D=Math.abs(O-b.left),C=Math.abs(O-b.right),V=Math.min(D,C);this.image.data[m+O]=Math.max(0,Math.min(255,(b.isDash?V:-V)+u+128))}}addDash(s,u){const f=this.getKey(s,u);if(this.positions[f])return this.positions[f];const g=u==="round",m=g?7:0,_=2*m+1;if(this.nextRow+_>this.height)return $r("LineAtlas out of space"),null;s.length===0&&s.push(1);let b=0;for(let C=0;C<s.length;C++)s[C]<0&&($r("Negative value is found in line dasharray, replacing values with 0"),s[C]=0),b+=s[C];if(b!==0){const C=this.width/b,V=this.getDashRanges(s,this.width,C);g?this.addRoundDash(V,C,m):this.addRegularDash(V,u==="square"?.5*C:0)}const O=this.nextRow+m;this.nextRow+=_;const D={tl:[O,m],br:[b,0]};return this.positions[f]=D,D}}Pt(xp,"LineAtlas");const Cm=Dh.VectorTileFeature.types,kA=Math.cos(Math.PI/180*37.5),UA=Math.cos(Math.PI/180*5);class Gf{constructor(s){this.evaluationGlobals={zoom:0,lineProgress:void 0},this.zoom=s.zoom,this.evaluationGlobals.zoom=this.zoom,this.overscaling=s.overscaling,this.pixelRatio=s.pixelRatio,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=s.index,this.projection=s.projection,this.hasPattern=!1,this.hasZOffset=!1,this.hasCrossSlope=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new Vf,this.layoutVertexArray2=new Vo,this.patternVertexArray=new Vo,this.indexArray=new Ls,this.programConfigurations=new Nh(s.layers,{zoom:s.zoom,lut:s.lut}),this.segments=new ji,this.maxLineLength=0,this.zOffsetVertexArray=new Vo,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.tessellationStep=s.tessellationStep?s.tessellationStep:za/64}updateFootprints(s,u){}populate(s,u,f,g){this.hasPattern=VA("line",this.layers,this.pixelRatio,u);const m=this.layers[0].layout.get("line-sort-key");this.tileToMeter=y(f);const _=this.layers[0].layout.get("line-z-offset"),b=_.isConstant()&&!_.constantOr(0),O=this.layers[0].layout.get("line-elevation-reference");this.hasZOffset=O==="sea"||O==="ground"||!b&&O==="none",this.hasZOffset&&O==="none"&&$r(`line-elevation-reference: ground is used for the layer ${this.layerIds[0]} because non-zero line-z-offset value was found.`);const D=this.layers[0].layout.get("line-cross-slope");this.hasCrossSlope=this.hasZOffset&&D!==void 0;const C=[];for(const{feature:M,id:B,index:J,sourceLayerIndex:te}of s){const he=this.layers[0]._featureFilter.needGeometry,de=Y(M,he);if(!this.layers[0]._featureFilter.filter(new Pn(this.zoom),de,f))continue;const ne=m?m.evaluate(de,{},f):void 0,Ae={id:B,properties:M.properties,type:M.type,sourceLayerIndex:te,index:J,geometry:he?de.geometry:K(M,f,g),patterns:{},sortKey:ne};C.push(Ae)}m&&C.sort((M,B)=>M.sortKey-B.sortKey);const{lineAtlas:V,featureIndex:I}=u,z=this.addConstantDashes(V);for(const M of C){const{geometry:B,index:J,sourceLayerIndex:te}=M;if(z&&this.addFeatureDashes(M,V),this.hasPattern){const he=zA("line",this.layers,M,this.zoom,this.pixelRatio,u);this.patternFeatures.push(he)}else this.addFeature(M,B,J,f,V.positions,u.availableImages,u.brightness);I.insert(s[J].feature,B,J,te,this.index)}}addConstantDashes(s){let u=!1;for(const f of this.layers){const g=f.paint.get("line-dasharray").value,m=f.layout.get("line-cap").value;if(g.kind!=="constant"||m.kind!=="constant")u=!0;else{const _=m.value,b=g.value;if(!b)continue;s.addDash(b,_)}}return u}addFeatureDashes(s,u){const f=this.zoom;for(const g of this.layers){const m=g.paint.get("line-dasharray").value,_=g.layout.get("line-cap").value;if(m.kind==="constant"&&_.kind==="constant")continue;let b,O;if(m.kind==="constant"){if(b=m.value,!b)continue}else b=m.evaluate({zoom:f},s);O=_.kind==="constant"?_.value:_.evaluate({zoom:f},s),u.addDash(b,O),s.patterns[g.id]=u.getKey(b,O)}}update(s,u,f,g,m,_,b){this.programConfigurations.updatePaintArrays(s,u,m,f,g,_,b)}addFeatures(s,u,f,g,m,_){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,u,f,g,_)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,KC)),this.patternVertexArray.length!==0&&(this.patternVertexBuffer=s.createVertexBuffer(this.patternVertexArray,Tm)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=s.createVertexBuffer(this.zOffsetVertexArray,nw.members,!0)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,R0),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&s.properties.hasOwnProperty("mapbox_clip_start")&&s.properties.hasOwnProperty("mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,u,f,g,m,_,b){const O=this.layers[0].layout,D=O.get("line-join").evaluate(s,{}),C=O.get("line-cap").evaluate(s,{}),V=O.get("line-miter-limit"),I=O.get("line-round-limit");this.lineClips=this.lineFeatureClips(s),this.lineFeature=s,this.zOffsetValue=O.get("line-z-offset").value;const z=this.layers[0].paint.get("line-width").value;z.kind!=="constant"&&z.isLineProgressConstant===!1&&(this.variableWidthValue=z);for(const M of u)this.addLine(M,s,g,D,C,V,I);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,f,m,_,g,b)}addLine(s,u,f,g,m,_,b){this.distance=0,this.prevDistance=0,this.scaledDistance=0,this.totalDistance=0,this.totalFeatureLength=0,this.lineSoFar=0,this.currentVertex=void 0;const O=g==="none";if(this.patternJoinNone=this.hasPattern&&O,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[],this.lineClips){this.lineClipsArray.push(this.lineClips);for(let de=0;de<s.length-1;de++)this.totalDistance+=s[de].dist(s[de+1]);this.totalFeatureLength=this.totalDistance/(this.lineClips.end-this.lineClips.start),this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const D=Cm[u.type]==="Polygon";let C=s.length;for(;C>=2&&s[C-1].equals(s[C-2]);)C--;let V=0;for(;V<C-1&&s[V].equals(s[V+1]);)V++;if(C<(D?3:2))return;g==="bevel"&&(_=1.05);const I=this.segments.prepareSegment(10*C,this.layoutVertexArray,this.indexArray);let z,M,B,J,te,he;this.e1=this.e2=-1,D&&(z=s[C-2],te=s[V].sub(z)._unit()._perp());for(let de=V;de<C;de++){if(B=de===C-1?D?s[V+1]:void 0:s[de+1],B&&s[de].equals(B))continue;te&&(J=te),z&&(M=z),z=s[de],he=this.evaluateLineProgressFeatures(M?M.dist(z):0),te=B?B.sub(z)._unit()._perp():J,J=J||te;const ne=M&&B;let Ae=ne?g:D||O?"butt":m;const xe=J.x*te.x+J.y*te.y;if(O){const xt=function(Ct){if(Ct.patternJoinNone){const Dt=Ct.segmentPoints.length/2,Nt=Ct.lineSoFar-Ct.segmentStart;for(let jt=0;jt<Dt;++jt){const Lt=Ct.segmentPoints[2*jt+1],Ht=Math.round(Ct.segmentPoints[2*jt])+.5+.25*Lt;Ct.patternVertexArray.emplaceBack(Ht,Nt,Ct.segmentStart),Ct.patternVertexArray.emplaceBack(Ht,Nt,Ct.segmentStart)}Ct.segmentPoints.length=0}Ct.e1=Ct.e2=-1};if(ne&&xe<UA){this.updateDistance(M,z),this.addCurrentVertex(z,J,1,1,I,he),xt(this),this.addCurrentVertex(z,te,-1,-1,I,he);continue}if(M){if(!B){this.updateDistance(M,z),this.addCurrentVertex(z,J,1,1,I,he),xt(this);continue}Ae="miter"}}let Oe=J.add(te);Oe.x===0&&Oe.y===0||Oe._unit();const Qe=Oe.x*te.x+Oe.y*te.y,Ye=Qe!==0?1/Qe:1/0,Xe=2*Math.sqrt(2-2*Qe),gt=Qe<kA&&M&&B,et=J.x*te.y-J.y*te.x>0,_t=this.overscaling<=16?15*za/(512*this.overscaling):0;if(ne&&Ae==="round"){if(Ye<b)Ae="miter";else if(Ye<=2){const xt=ow(z,-10,za+10);Ae=this.hasZOffset&&(xt||this.hasCrossSlope)?"miter":"fakeround"}}if(Ae==="miter"&&Ye>_&&(Ae="bevel"),Ae==="bevel"&&(Ye>2&&(Ae="flipbevel"),Ye<_&&(Ae="miter")),M&&!(Ae==="miter"&&gt)&&this.updateDistance(M,z),Ae==="miter")if(gt){const xt=z.dist(M);if(xt>2*_t){const Dt=z.sub(z.sub(M)._mult(_t/xt)._round());this.updateDistance(M,Dt),this.addCurrentVertex(Dt,J,0,0,I,he),M=Dt}this.updateDistance(M,z),Oe._mult(Ye),this.addCurrentVertex(z,Oe,0,0,I,he);const Ct=z.dist(B);if(Ct>2*_t){const Dt=z.add(B.sub(z)._mult(_t/Ct)._round());this.updateDistance(z,Dt),this.addCurrentVertex(Dt,te,0,0,I,he),z=Dt}}else Oe._mult(Ye),this.addCurrentVertex(z,Oe,0,0,I,he);else if(Ae==="flipbevel"){if(Ye>100)Oe=te.mult(-1);else{const xt=Ye*J.add(te).mag()/J.sub(te).mag();Oe._perp()._mult(xt*(et?-1:1))}this.addCurrentVertex(z,Oe,0,0,I,he),this.addCurrentVertex(z,Oe.mult(-1),0,0,I,he)}else if(Ae==="bevel"||Ae==="fakeround"){he!=null&&M&&this.addCurrentVertex(z,J,-1,-1,I,he);const xt=z.dist(M)<=2*_t&&Ae!=="bevel",Ct=Oe.mult(et?1:-1);Ct._mult(Ye);const Dt=te.mult(et?-1:1),Nt=J.mult(et?-1:1),jt=this.evaluateLineProgressFeatures(this.distance);if(he==null&&(this.addHalfVertex(z,Ct.x,Ct.y,!1,!et,0,I,jt),xt||this.addHalfVertex(z,Ct.x+2*Nt.x,Ct.y+2*Nt.y,!1,et,0,I,jt)),Ae==="fakeround"){const Lt=Math.round(180*Xe/Math.PI/20);this.addHalfVertex(z,Nt.x,Nt.y,!1,et,0,I,jt);for(let Ht=0;Ht<Lt;Ht++){let Aa=Ht/Lt;if(Aa!==.5){const er=Aa-.5;Aa+=Aa*er*(Aa-1)*((1.0904+xe*(xe*(3.55645-1.43519*xe)-3.2452))*er*er+(.848013+xe*(.215638*xe-1.06021)))}const ma=Dt.sub(Nt)._mult(Aa)._add(Nt)._unit();this.addHalfVertex(z,ma.x,ma.y,!1,et,0,I,jt)}this.addHalfVertex(z,Dt.x,Dt.y,!1,et,0,I,jt)}xt||he!=null||this.addHalfVertex(z,Ct.x+2*Dt.x,Ct.y+2*Dt.y,!1,et,0,I,jt),he!=null&&B&&this.addCurrentVertex(z,te,1,1,I,he)}else Ae==="butt"?this.addCurrentVertex(z,Oe,0,0,I,he):Ae==="square"?(M||this.addCurrentVertex(z,Oe,-1,-1,I,he),this.addCurrentVertex(z,Oe,0,0,I,he),M&&this.addCurrentVertex(z,Oe,1,1,I,he)):Ae==="round"&&(M&&(this.addCurrentVertex(z,J,0,0,I,he),this.addCurrentVertex(z,J,1,1,I,he,!0)),B&&(this.addCurrentVertex(z,te,-1,-1,I,he,!0),this.addCurrentVertex(z,te,0,0,I,he)))}}addVerticesTo(s,u,f,g,m,_,b,O,D,C){const V=(u.w-s.w)/this.tessellationStep|0;let I=0;const z=this.scaledDistance;if(V>1){this.lineSoFar=s.w;const B=(u.x-s.x)/V,J=(u.y-s.y)/V,te=(u.z-s.z)/V,he=(u.w-s.w)/V;for(let de=1;de<V;++de){s.x+=B,s.y+=J,s.z+=te,this.lineSoFar+=he,I+=he;const ne=this.evaluateLineProgressFeatures(this.prevDistance+I);this.scaledDistance=(this.prevDistance+I)/this.totalDistance,this.addHalfVertex(s,f,g,C,!1,b,D,ne),this.addHalfVertex(s,m,_,C,!0,-O,D,ne)}}this.lineSoFar=u.w,this.scaledDistance=z;const M=this.evaluateLineProgressFeatures(this.distance);this.addHalfVertex(u,f,g,C,!1,b,D,M),this.addHalfVertex(u,m,_,C,!0,-O,D,M)}evaluateLineProgressFeatures(s){if(!this.variableWidthValue&&!this.hasZOffset)return null;this.evaluationGlobals.lineProgress=0,this.lineClips?this.evaluationGlobals.lineProgress=Math.min(1,(this.totalFeatureLength*this.lineClips.start+s)/this.totalFeatureLength):$r(`line-progress evaluation for ${this.layerIds[0]} requires enabling 'lineMetrics' for the source.`);let u=0;return this.variableWidthValue&&this.variableWidthValue.kind!=="constant"&&(u=this.variableWidthValue.evaluate(this.evaluationGlobals,this.lineFeature)||0),this.hasZOffset?this.zOffsetValue.kind==="constant"?{zOffset:this.zOffsetValue.value,variableWidth:u}:{zOffset:this.zOffsetValue.evaluate(this.evaluationGlobals,this.lineFeature)||0,variableWidth:u}:{zOffset:0,variableWidth:u}}addCurrentVertex(s,u,f,g,m,_,b=!1){const O=u.x+u.y*f,D=u.y-u.x*f,C=u.y*g-u.x,V=-u.y-u.x*g;if(_!=null){const I=this.hasZOffset,z=-10,M=za+10,B=_.zOffset,J=new q1(s.x,s.y,B,this.lineSoFar),te=!!I&&ow(s,z,M),he=this.lineSoFar,de=this.distance;if(this.currentVertex)if(te){const ne=this.currentVertexIsOutside,Ae=this.currentVertex,xe=new q1(s.x,s.y,B,this.lineSoFar);if(H1(Ae,xe,z,M),!ow(xe,z,M)){if(ne){this.e1=this.e2=-1,this.distance-=Ae.dist(J),this.lineSoFar=Ae.w;const Oe=this.evaluateLineProgressFeatures(Ae.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(Ae,O,D,b,!1,f,m,Oe),this.addHalfVertex(Ae,C,V,b,!0,-g,m,Oe),this.prevDistance=this.distance}this.distance=this.prevDistance+Ae.dist(xe),this.scaledDistance=this.distance/this.totalDistance,this.addVerticesTo(Ae,xe,O,D,C,V,f,g,m,b),this.distance=de,this.scaledDistance=this.distance/this.totalDistance}}else{const ne=this.currentVertex;if(this.currentVertexIsOutside){H1(ne,J,z,M),this.e1=this.e2=-1,this.distance-=ne.dist(J),this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=ne.w;const Ae=this.evaluateLineProgressFeatures(ne.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(ne,O,D,b,!1,f,m,Ae),this.addHalfVertex(ne,C,V,b,!0,-g,m,Ae),this.prevDistance=this.distance,this.distance=de,this.scaledDistance=this.distance/this.totalDistance}this.addVerticesTo(ne,J,O,D,C,V,f,g,m,b)}else te||(this.addHalfVertex(s,O,D,b,!1,f,m,_),this.addHalfVertex(s,C,V,b,!0,-g,m,_));this.currentVertex=J,this.currentVertexIsOutside=te,this.lineSoFar=he}else this.addHalfVertex(s,O,D,b,!1,f,m,_),this.addHalfVertex(s,C,V,b,!0,-g,m,_)}addHalfVertex({x:s,y:u},f,g,m,_,b,O,D){if(this.patternJoinNone&&(this.segmentPoints.length===0&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),_||this.segmentPoints.push(this.lineSoFar-this.segmentStart,b)),this.layoutVertexArray.emplaceBack((s<<1)+(m?1:0),(u<<1)+(_?1:0),Math.round(63*f)+128,Math.round(63*g)+128,1+(b===0?0:b<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips){const V=gr(this.lineClips.start,this.lineClips.end,this.scaledDistance);this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,V)}const C=O.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,C),O.primitiveLength++),_?this.e2=C:this.e1=C,D!=null&&this.zOffsetVertexArray.emplaceBack(D.zOffset,D.variableWidth,D.variableWidth)}updateScaledDistance(){this.lineClips?(this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=this.totalFeatureLength*this.lineClips.start+this.distance):this.lineSoFar=this.distance}updateDistance(s,u){this.prevDistance=this.distance,this.distance+=s.dist(u),this.updateScaledDistance()}}function ow(h,s,u){return h.x<s||h.x>u||h.y<s||h.y>u}let lw,py;function WC(h,s,u){return s*(za/(h.tileSize*Math.pow(2,u-h.tileID.overscaledZ)))}Pt(Gf,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const uw=(h,s,u)=>(1-u)*h+u*s;function BA(h,s){return 1/WC(h,1,s.tileZoom)}function cw(h,s,u,f){return h.translatePosMatrix(f||s.tileID.projMatrix,s,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const YC=h=>{const s=[];jA(h)&&s.push("RENDER_LINE_DASH"),h.paint.get("line-gradient")&&s.push("RENDER_LINE_GRADIENT");const u=h.paint.get("line-trim-offset");u[0]===0&&u[1]===0||s.push("RENDER_LINE_TRIM_OFFSET"),h.paint.get("line-border-width").constantOr(1)!==0&&s.push("RENDER_LINE_BORDER");const f=h.layout.get("line-join").constantOr("miter")==="none",g=!!h.paint.get("line-pattern").constantOr(1);return f&&g&&s.push("LINE_JOIN_NONE"),s};function jA(h){const s=h.paint.get("line-dasharray").value;return s.value||s.kind!=="constant"}let my;const dw=()=>my||(my={layout:lw||(lw=new Bi({"line-cap":new Ba(qt.layout_line["line-cap"]),"line-join":new Ba(qt.layout_line["line-join"]),"line-miter-limit":new Ea(qt.layout_line["line-miter-limit"]),"line-round-limit":new Ea(qt.layout_line["line-round-limit"]),"line-sort-key":new Ba(qt.layout_line["line-sort-key"]),"line-z-offset":new Ba(qt.layout_line["line-z-offset"]),"line-elevation-reference":new Ea(qt.layout_line["line-elevation-reference"]),"line-cross-slope":new Ea(qt.layout_line["line-cross-slope"]),visibility:new Ea(qt.layout_line.visibility),"line-width-unit":new Ea(qt.layout_line["line-width-unit"])})),paint:py||(py=new Bi({"line-opacity":new Ba(qt.paint_line["line-opacity"]),"line-color":new Ba(qt.paint_line["line-color"]),"line-translate":new Ea(qt.paint_line["line-translate"]),"line-translate-anchor":new Ea(qt.paint_line["line-translate-anchor"]),"line-width":new Ba(qt.paint_line["line-width"]),"line-gap-width":new Ba(qt.paint_line["line-gap-width"]),"line-offset":new Ba(qt.paint_line["line-offset"]),"line-blur":new Ba(qt.paint_line["line-blur"]),"line-dasharray":new Ba(qt.paint_line["line-dasharray"]),"line-pattern":new Ba(qt.paint_line["line-pattern"]),"line-gradient":new rs(qt.paint_line["line-gradient"]),"line-trim-offset":new Ea(qt.paint_line["line-trim-offset"]),"line-trim-fade-range":new Ea(qt.paint_line["line-trim-fade-range"]),"line-trim-color":new Ea(qt.paint_line["line-trim-color"]),"line-emissive-strength":new Ea(qt.paint_line["line-emissive-strength"]),"line-border-width":new Ba(qt.paint_line["line-border-width"]),"line-border-color":new Ba(qt.paint_line["line-border-color"]),"line-occlusion-opacity":new Ea(qt.paint_line["line-occlusion-opacity"]),"line-color-use-theme":new Ba({type:"string",default:"default","property-type":"data-driven"}),"line-gradient-use-theme":new Ba({type:"string",default:"default","property-type":"data-driven"}),"line-trim-color-use-theme":new Ba({type:"string",default:"default","property-type":"data-driven"}),"line-border-color-use-theme":new Ba({type:"string",default:"default","property-type":"data-driven"})}))},my);class GA extends Ba{possiblyEvaluate(s,u){return u=new Pn(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,transition:u.transition}),super.possiblyEvaluate(s,u)}evaluate(s,u,f,g){return u=un({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(s,u,f,g)}}let mg;function ZA(h,s){return s>0?s+2*h:h}const XC=Mn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),vE=Mn([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),T0=Mn([{name:"a_projected_pos",components:4,type:"Float32"}],4);Mn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const p=Mn([{name:"a_auto_z_offset",components:1,type:"Float32"}],4),w=Mn([{name:"a_texb",components:2,type:"Uint16"}]),P=Mn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_elevation_from_sea",components:2,type:"Float32"}]),U=Mn([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_auto_z_offset",components:1,type:"Float32"}]);Mn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const X=Mn([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ue=Mn([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Mn([{name:"triangle",components:3,type:"Uint16"}]),Mn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Mn([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"},{type:"Uint16",name:"elevationFeatureIndex"}]),Mn([{type:"Float32",name:"offsetX"}]),Mn([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Ze=24;const ft=128;function Ut(h,s,u,f,g){if(h.kind==="camera")return h.maxSize;if(h.kind==="composite"){const m=s.possiblyEvaluate(new Pn(h.maxZoom),u).evaluate(g,{},u),_=s.possiblyEvaluate(new Pn(h.minZoom),u).evaluate(g,{},u);return Math.max(m,_)}return s.possiblyEvaluate(new Pn(f)).evaluate(g,{},u)}function ua(h,s){const{expression:u}=s;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new Pn(h+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:g}=u;let m=0;for(;m<f.length&&f[m]<=h;)m++;m=Math.max(0,m-1);let _=m;for(;_<f.length&&f[_]<h+1;)_++;_=Math.min(f.length-1,_);const b=f[m],O=f[_];return u.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:O,interpolationType:g}:{kind:"camera",minZoom:b,maxZoom:O,minSize:u.evaluate(new Pn(b)),maxSize:u.evaluate(new Pn(O)),interpolationType:g}}}function qa(h,{uSize:s,uSizeT:u},{lowerSize:f,upperSize:g}){return h.kind==="source"?f/ft:h.kind==="composite"?gr(f/ft,g/ft,u):s}function sr(h,s,u=1){let f=0,g=0;if(h.kind==="constant")g=h.layoutSize*u;else if(h.kind!=="source"){const{interpolationType:m,minZoom:_,maxZoom:b}=h,O=m?ka(ts.interpolationFactor(m,s,_,b),0,1):0;h.kind==="camera"?g=gr(h.minSize,h.maxSize,O)*u:f=O*u}return{uSizeT:f,uSize:g}}var Na=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:ft,evaluateSizeForFeature:qa,evaluateSizeForZoom:sr,getRasterizedIconSize:Ut,getSizeData:ua});function Ha(h,s,u){return h.sections.forEach(f=>{f.text=function(g,m,_){const b=m.layout.get("text-transform").evaluate(_,{});return b==="uppercase"?g=g.toLocaleUpperCase():b==="lowercase"&&(g=g.toLocaleLowerCase()),ps.applyArabicShaping&&(g=ps.applyArabicShaping(g)),g}(f.text,s,u)}),h}const an={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂","←":"↑","→":"↓"};function ni(h){return h==="︶"||h==="﹈"||h==="︸"||h==="﹄"||h==="﹂"||h==="︾"||h==="︼"||h==="︺"||h==="︘"||h==="﹀"||h==="︐"||h==="︓"||h==="︔"||h==="｀"||h==="￣"||h==="︑"||h==="︒"}function Qo(h){return h==="︵"||h==="﹇"||h==="︷"||h==="﹃"||h==="﹁"||h==="︽"||h==="︻"||h==="︹"||h==="︗"||h==="︿"}var ya,ia,Sa,ar={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function en(){return ya||(ya=1,ar.read=function(h,s,u,f,g){var m,_,b=8*g-f-1,O=(1<<b)-1,D=O>>1,C=-7,V=u?g-1:0,I=u?-1:1,z=h[s+V];for(V+=I,m=z&(1<<-C)-1,z>>=-C,C+=b;C>0;m=256*m+h[s+V],V+=I,C-=8);for(_=m&(1<<-C)-1,m>>=-C,C+=f;C>0;_=256*_+h[s+V],V+=I,C-=8);if(m===0)m=1-D;else{if(m===O)return _?NaN:1/0*(z?-1:1);_+=Math.pow(2,f),m-=D}return(z?-1:1)*_*Math.pow(2,m-f)},ar.write=function(h,s,u,f,g,m){var _,b,O,D=8*m-g-1,C=(1<<D)-1,V=C>>1,I=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,z=f?0:m-1,M=f?1:-1,B=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(b=isNaN(s)?1:0,_=C):(_=Math.floor(Math.log(s)/Math.LN2),s*(O=Math.pow(2,-_))<1&&(_--,O*=2),(s+=_+V>=1?I/O:I*Math.pow(2,1-V))*O>=2&&(_++,O/=2),_+V>=C?(b=0,_=C):_+V>=1?(b=(s*O-1)*Math.pow(2,g),_+=V):(b=s*Math.pow(2,V-1)*Math.pow(2,g),_=0));g>=8;h[u+z]=255&b,z+=M,b/=256,g-=8);for(_=_<<g|b,D+=g;D>0;h[u+z]=255&_,z+=M,_/=256,D-=8);h[u+z-M]|=128*B}),ar}function Ti(){if(Sa)return ia;Sa=1,ia=s;var h=en();function s(ne){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(ne)?ne:new Uint8Array(ne||0),this.pos=0,this.type=0,this.length=this.buf.length}s.Varint=0,s.Fixed64=1,s.Bytes=2,s.Fixed32=5;var u=4294967296,f=1/u,g=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function m(ne){return ne.type===s.Bytes?ne.readVarint()+ne.pos:ne.pos+1}function _(ne,Ae,xe){return xe?4294967296*Ae+(ne>>>0):4294967296*(Ae>>>0)+(ne>>>0)}function b(ne,Ae,xe){var Oe=Ae<=16383?1:Ae<=2097151?2:Ae<=268435455?3:Math.floor(Math.log(Ae)/(7*Math.LN2));xe.realloc(Oe);for(var Qe=xe.pos-1;Qe>=ne;Qe--)xe.buf[Qe+Oe]=xe.buf[Qe]}function O(ne,Ae){for(var xe=0;xe<ne.length;xe++)Ae.writeVarint(ne[xe])}function D(ne,Ae){for(var xe=0;xe<ne.length;xe++)Ae.writeSVarint(ne[xe])}function C(ne,Ae){for(var xe=0;xe<ne.length;xe++)Ae.writeFloat(ne[xe])}function V(ne,Ae){for(var xe=0;xe<ne.length;xe++)Ae.writeDouble(ne[xe])}function I(ne,Ae){for(var xe=0;xe<ne.length;xe++)Ae.writeBoolean(ne[xe])}function z(ne,Ae){for(var xe=0;xe<ne.length;xe++)Ae.writeFixed32(ne[xe])}function M(ne,Ae){for(var xe=0;xe<ne.length;xe++)Ae.writeSFixed32(ne[xe])}function B(ne,Ae){for(var xe=0;xe<ne.length;xe++)Ae.writeFixed64(ne[xe])}function J(ne,Ae){for(var xe=0;xe<ne.length;xe++)Ae.writeSFixed64(ne[xe])}function te(ne,Ae){return(ne[Ae]|ne[Ae+1]<<8|ne[Ae+2]<<16)+16777216*ne[Ae+3]}function he(ne,Ae,xe){ne[xe]=Ae,ne[xe+1]=Ae>>>8,ne[xe+2]=Ae>>>16,ne[xe+3]=Ae>>>24}function de(ne,Ae){return(ne[Ae]|ne[Ae+1]<<8|ne[Ae+2]<<16)+(ne[Ae+3]<<24)}return s.prototype={destroy:function(){this.buf=null},readFields:function(ne,Ae,xe){for(xe=xe||this.length;this.pos<xe;){var Oe=this.readVarint(),Qe=Oe>>3,Ye=this.pos;this.type=7&Oe,ne(Qe,Ae,this),this.pos===Ye&&this.skip(Oe)}return Ae},readMessage:function(ne,Ae){return this.readFields(ne,Ae,this.readVarint()+this.pos)},readFixed32:function(){var ne=te(this.buf,this.pos);return this.pos+=4,ne},readSFixed32:function(){var ne=de(this.buf,this.pos);return this.pos+=4,ne},readFixed64:function(){var ne=te(this.buf,this.pos)+te(this.buf,this.pos+4)*u;return this.pos+=8,ne},readSFixed64:function(){var ne=te(this.buf,this.pos)+de(this.buf,this.pos+4)*u;return this.pos+=8,ne},readFloat:function(){var ne=h.read(this.buf,this.pos,!0,23,4);return this.pos+=4,ne},readDouble:function(){var ne=h.read(this.buf,this.pos,!0,52,8);return this.pos+=8,ne},readVarint:function(ne){var Ae,xe,Oe=this.buf;return Ae=127&(xe=Oe[this.pos++]),xe<128?Ae:(Ae|=(127&(xe=Oe[this.pos++]))<<7,xe<128?Ae:(Ae|=(127&(xe=Oe[this.pos++]))<<14,xe<128?Ae:(Ae|=(127&(xe=Oe[this.pos++]))<<21,xe<128?Ae:function(Qe,Ye,Xe){var gt,et,_t=Xe.buf;if(gt=(112&(et=_t[Xe.pos++]))>>4,et<128||(gt|=(127&(et=_t[Xe.pos++]))<<3,et<128)||(gt|=(127&(et=_t[Xe.pos++]))<<10,et<128)||(gt|=(127&(et=_t[Xe.pos++]))<<17,et<128)||(gt|=(127&(et=_t[Xe.pos++]))<<24,et<128)||(gt|=(1&(et=_t[Xe.pos++]))<<31,et<128))return _(Qe,gt,Ye);throw new Error("Expected varint not more than 10 bytes")}(Ae|=(15&(xe=Oe[this.pos]))<<28,ne,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var ne=this.readVarint();return ne%2==1?(ne+1)/-2:ne/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var ne=this.readVarint()+this.pos,Ae=this.pos;return this.pos=ne,ne-Ae>=12&&g?function(xe,Oe,Qe){return g.decode(xe.subarray(Oe,Qe))}(this.buf,Ae,ne):function(xe,Oe,Qe){for(var Ye="",Xe=Oe;Xe<Qe;){var gt,et,_t,xt=xe[Xe],Ct=null,Dt=xt>239?4:xt>223?3:xt>191?2:1;if(Xe+Dt>Qe)break;Dt===1?xt<128&&(Ct=xt):Dt===2?(192&(gt=xe[Xe+1]))==128&&(Ct=(31&xt)<<6|63&gt)<=127&&(Ct=null):Dt===3?(et=xe[Xe+2],(192&(gt=xe[Xe+1]))==128&&(192&et)==128&&((Ct=(15&xt)<<12|(63&gt)<<6|63&et)<=2047||Ct>=55296&&Ct<=57343)&&(Ct=null)):Dt===4&&(et=xe[Xe+2],_t=xe[Xe+3],(192&(gt=xe[Xe+1]))==128&&(192&et)==128&&(192&_t)==128&&((Ct=(15&xt)<<18|(63&gt)<<12|(63&et)<<6|63&_t)<=65535||Ct>=1114112)&&(Ct=null)),Ct===null?(Ct=65533,Dt=1):Ct>65535&&(Ct-=65536,Ye+=String.fromCharCode(Ct>>>10&1023|55296),Ct=56320|1023&Ct),Ye+=String.fromCharCode(Ct),Xe+=Dt}return Ye}(this.buf,Ae,ne)},readBytes:function(){var ne=this.readVarint()+this.pos,Ae=this.buf.subarray(this.pos,ne);return this.pos=ne,Ae},readPackedVarint:function(ne,Ae){if(this.type!==s.Bytes)return ne.push(this.readVarint(Ae));var xe=m(this);for(ne=ne||[];this.pos<xe;)ne.push(this.readVarint(Ae));return ne},readPackedSVarint:function(ne){if(this.type!==s.Bytes)return ne.push(this.readSVarint());var Ae=m(this);for(ne=ne||[];this.pos<Ae;)ne.push(this.readSVarint());return ne},readPackedBoolean:function(ne){if(this.type!==s.Bytes)return ne.push(this.readBoolean());var Ae=m(this);for(ne=ne||[];this.pos<Ae;)ne.push(this.readBoolean());return ne},readPackedFloat:function(ne){if(this.type!==s.Bytes)return ne.push(this.readFloat());var Ae=m(this);for(ne=ne||[];this.pos<Ae;)ne.push(this.readFloat());return ne},readPackedDouble:function(ne){if(this.type!==s.Bytes)return ne.push(this.readDouble());var Ae=m(this);for(ne=ne||[];this.pos<Ae;)ne.push(this.readDouble());return ne},readPackedFixed32:function(ne){if(this.type!==s.Bytes)return ne.push(this.readFixed32());var Ae=m(this);for(ne=ne||[];this.pos<Ae;)ne.push(this.readFixed32());return ne},readPackedSFixed32:function(ne){if(this.type!==s.Bytes)return ne.push(this.readSFixed32());var Ae=m(this);for(ne=ne||[];this.pos<Ae;)ne.push(this.readSFixed32());return ne},readPackedFixed64:function(ne){if(this.type!==s.Bytes)return ne.push(this.readFixed64());var Ae=m(this);for(ne=ne||[];this.pos<Ae;)ne.push(this.readFixed64());return ne},readPackedSFixed64:function(ne){if(this.type!==s.Bytes)return ne.push(this.readSFixed64());var Ae=m(this);for(ne=ne||[];this.pos<Ae;)ne.push(this.readSFixed64());return ne},skip:function(ne){var Ae=7&ne;if(Ae===s.Varint)for(;this.buf[this.pos++]>127;);else if(Ae===s.Bytes)this.pos=this.readVarint()+this.pos;else if(Ae===s.Fixed32)this.pos+=4;else{if(Ae!==s.Fixed64)throw new Error("Unimplemented type: "+Ae);this.pos+=8}},writeTag:function(ne,Ae){this.writeVarint(ne<<3|Ae)},realloc:function(ne){for(var Ae=this.length||16;Ae<this.pos+ne;)Ae*=2;if(Ae!==this.length){var xe=new Uint8Array(Ae);xe.set(this.buf),this.buf=xe,this.length=Ae}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(ne){this.realloc(4),he(this.buf,ne,this.pos),this.pos+=4},writeSFixed32:function(ne){this.realloc(4),he(this.buf,ne,this.pos),this.pos+=4},writeFixed64:function(ne){this.realloc(8),he(this.buf,-1&ne,this.pos),he(this.buf,Math.floor(ne*f),this.pos+4),this.pos+=8},writeSFixed64:function(ne){this.realloc(8),he(this.buf,-1&ne,this.pos),he(this.buf,Math.floor(ne*f),this.pos+4),this.pos+=8},writeVarint:function(ne){(ne=+ne||0)>268435455||ne<0?function(Ae,xe){var Oe,Qe;if(Ae>=0?(Oe=Ae%4294967296|0,Qe=Ae/4294967296|0):(Qe=~(-Ae/4294967296),4294967295^(Oe=~(-Ae%4294967296))?Oe=Oe+1|0:(Oe=0,Qe=Qe+1|0)),Ae>=18446744073709552e3||Ae<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");xe.realloc(10),function(Ye,Xe,gt){gt.buf[gt.pos++]=127&Ye|128,Ye>>>=7,gt.buf[gt.pos++]=127&Ye|128,Ye>>>=7,gt.buf[gt.pos++]=127&Ye|128,Ye>>>=7,gt.buf[gt.pos++]=127&Ye|128,gt.buf[gt.pos]=127&(Ye>>>=7)}(Oe,0,xe),function(Ye,Xe){var gt=(7&Ye)<<4;Xe.buf[Xe.pos++]|=gt|((Ye>>>=3)?128:0),Ye&&(Xe.buf[Xe.pos++]=127&Ye|((Ye>>>=7)?128:0),Ye&&(Xe.buf[Xe.pos++]=127&Ye|((Ye>>>=7)?128:0),Ye&&(Xe.buf[Xe.pos++]=127&Ye|((Ye>>>=7)?128:0),Ye&&(Xe.buf[Xe.pos++]=127&Ye|((Ye>>>=7)?128:0),Ye&&(Xe.buf[Xe.pos++]=127&Ye)))))}(Qe,xe)}(ne,this):(this.realloc(4),this.buf[this.pos++]=127&ne|(ne>127?128:0),ne<=127||(this.buf[this.pos++]=127&(ne>>>=7)|(ne>127?128:0),ne<=127||(this.buf[this.pos++]=127&(ne>>>=7)|(ne>127?128:0),ne<=127||(this.buf[this.pos++]=ne>>>7&127))))},writeSVarint:function(ne){this.writeVarint(ne<0?2*-ne-1:2*ne)},writeBoolean:function(ne){this.writeVarint(!!ne)},writeString:function(ne){ne=String(ne),this.realloc(4*ne.length),this.pos++;var Ae=this.pos;this.pos=function(Oe,Qe,Ye){for(var Xe,gt,et=0;et<Qe.length;et++){if((Xe=Qe.charCodeAt(et))>55295&&Xe<57344){if(!gt){Xe>56319||et+1===Qe.length?(Oe[Ye++]=239,Oe[Ye++]=191,Oe[Ye++]=189):gt=Xe;continue}if(Xe<56320){Oe[Ye++]=239,Oe[Ye++]=191,Oe[Ye++]=189,gt=Xe;continue}Xe=gt-55296<<10|Xe-56320|65536,gt=null}else gt&&(Oe[Ye++]=239,Oe[Ye++]=191,Oe[Ye++]=189,gt=null);Xe<128?Oe[Ye++]=Xe:(Xe<2048?Oe[Ye++]=Xe>>6|192:(Xe<65536?Oe[Ye++]=Xe>>12|224:(Oe[Ye++]=Xe>>18|240,Oe[Ye++]=Xe>>12&63|128),Oe[Ye++]=Xe>>6&63|128),Oe[Ye++]=63&Xe|128)}return Ye}(this.buf,ne,this.pos);var xe=this.pos-Ae;xe>=128&&b(Ae,xe,this),this.pos=Ae-1,this.writeVarint(xe),this.pos+=xe},writeFloat:function(ne){this.realloc(4),h.write(this.buf,ne,this.pos,!0,23,4),this.pos+=4},writeDouble:function(ne){this.realloc(8),h.write(this.buf,ne,this.pos,!0,52,8),this.pos+=8},writeBytes:function(ne){var Ae=ne.length;this.writeVarint(Ae),this.realloc(Ae);for(var xe=0;xe<Ae;xe++)this.buf[this.pos++]=ne[xe]},writeRawMessage:function(ne,Ae){this.pos++;var xe=this.pos;ne(Ae,this);var Oe=this.pos-xe;Oe>=128&&b(xe,Oe,this),this.pos=xe-1,this.writeVarint(Oe),this.pos+=Oe},writeMessage:function(ne,Ae,xe){this.writeTag(ne,s.Bytes),this.writeRawMessage(Ae,xe)},writePackedVarint:function(ne,Ae){Ae.length&&this.writeMessage(ne,O,Ae)},writePackedSVarint:function(ne,Ae){Ae.length&&this.writeMessage(ne,D,Ae)},writePackedBoolean:function(ne,Ae){Ae.length&&this.writeMessage(ne,I,Ae)},writePackedFloat:function(ne,Ae){Ae.length&&this.writeMessage(ne,C,Ae)},writePackedDouble:function(ne,Ae){Ae.length&&this.writeMessage(ne,V,Ae)},writePackedFixed32:function(ne,Ae){Ae.length&&this.writeMessage(ne,z,Ae)},writePackedSFixed32:function(ne,Ae){Ae.length&&this.writeMessage(ne,M,Ae)},writePackedFixed64:function(ne,Ae){Ae.length&&this.writeMessage(ne,B,Ae)},writePackedSFixed64:function(ne,Ae){Ae.length&&this.writeMessage(ne,J,Ae)},writeBytesField:function(ne,Ae){this.writeTag(ne,s.Bytes),this.writeBytes(Ae)},writeFixed32Field:function(ne,Ae){this.writeTag(ne,s.Fixed32),this.writeFixed32(Ae)},writeSFixed32Field:function(ne,Ae){this.writeTag(ne,s.Fixed32),this.writeSFixed32(Ae)},writeFixed64Field:function(ne,Ae){this.writeTag(ne,s.Fixed64),this.writeFixed64(Ae)},writeSFixed64Field:function(ne,Ae){this.writeTag(ne,s.Fixed64),this.writeSFixed64(Ae)},writeVarintField:function(ne,Ae){this.writeTag(ne,s.Varint),this.writeVarint(Ae)},writeSVarintField:function(ne,Ae){this.writeTag(ne,s.Varint),this.writeSVarint(Ae)},writeStringField:function(ne,Ae){this.writeTag(ne,s.Bytes),this.writeString(Ae)},writeFloatField:function(ne,Ae){this.writeTag(ne,s.Fixed32),this.writeFloat(Ae)},writeDoubleField:function(ne,Ae){this.writeTag(ne,s.Fixed64),this.writeDouble(Ae)},writeBooleanField:function(ne,Ae){this.writeVarintField(ne,!!Ae)}},ia}var mn=v(Ti());const In=3;function hu(h,s,u){s.glyphs=[],h===1&&u.readMessage(us,s)}function us(h,s,u){if(h===3){const{id:f,bitmap:g,width:m,height:_,left:b,top:O,advance:D}=u.readMessage(Sm,{});s.glyphs.push({id:f,bitmap:new mm({width:m+2*In,height:_+2*In},g),metrics:{width:m,height:_,left:b,top:O,advance:D}})}else h===4?s.ascender=u.readSVarint():h===5&&(s.descender=u.readSVarint())}function Sm(h,s,u){h===1?s.id=u.readVarint():h===2?s.bitmap=u.readBytes():h===3?s.width=u.readVarint():h===4?s.height=u.readVarint():h===5?s.left=u.readSVarint():h===6?s.top=u.readSVarint():h===7&&(s.advance=u.readVarint())}const _E=In,th={horizontal:1,vertical:2,horizontalOnly:3};class hw{constructor(){this.scale=1,this.fontStack="",this.image=null}static forText(s,u){const f=new hw;return f.scale=s||1,f.fontStack=u,f}static forImage(s){const u=new hw;return u.image=s,u}}class C0{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,u,f){const g=new C0;for(let m=0;m<s.sections.length;m++){const _=s.sections[m];_.image?g.addImageSection(_,f):g.addTextSection(_,u)}return g}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSections(){return this.sections}getSectionIndex(s){return this.sectionIndex[s]}getCodePoint(s){return this.text.codePointAt(s)}verticalizePunctuation(s){this.text=function(u,f){let g="";for(let m=0;m<u.length;m++){const _=u.charCodeAt(m+1)||null,b=u.charCodeAt(m-1)||null;g+=!f&&(_&&Nr(_)&&!an[u[m+1]]||b&&Nr(b)&&!an[u[m-1]])||!an[u[m]]?u[m]:an[u[m]]}return g}(this.text,s)}trim(){let s=0;for(let f=0;f<this.text.length&&JC[this.text.charCodeAt(f)];f++)s++;let u=this.text.length;for(let f=this.text.length-1;f>=0&&f>=s&&JC[this.text.charCodeAt(f)];f--)u--;this.text=this.text.substring(s,u),this.sectionIndex=this.sectionIndex.slice(s,u)}substring(s,u){const f=new C0;return f.text=this.text.substring(s,u),f.sectionIndex=this.sectionIndex.slice(s,u),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,u)=>Math.max(s,this.sections[u].scale),0)}addTextSection(s,u){this.text+=s.text,this.sections.push(hw.forText(s.scale,s.fontStack||u));const f=this.sections.length-1;for(let g=0;g<s.text.length;++g)this.sectionIndex.push(f)}addImageSection(s,u){const f=s.image?s.image.getPrimary():null;if(!f)return void $r("Can't add FormattedSection with an empty image.");f.scaleSelf(u);const g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCodePoint(g),this.sections.push(hw.forImage(f)),this.sectionIndex.push(this.sections.length-1)):$r("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function wE(h,s,u,f,g,m,_,b,O,D,C,V,I,z,M,B=1){const J=C0.fromFeature(h,g,B);V===th.vertical&&J.verticalizePunctuation(I);let te=[];const he=function(Oe,Qe,Ye,Xe,gt,et){if(!Oe)return[];const _t=[],xt=function(jt,Lt,Ht,Aa,ma,er){let Oa=0;for(let Da=0;Da<jt.length();Da++){const Ra=jt.getSection(Da);Oa+=eF(jt.getCodePoint(Da),Ra,Aa,ma,Lt,er)}return Oa/Math.max(1,Math.ceil(Oa/Ht))}(Oe,Qe,Ye,Xe,gt,et),Ct=Oe.text.indexOf("​")>=0;let Dt=0;for(let jt=0;jt<Oe.length();jt++){const Lt=Oe.getSection(jt),Ht=Oe.getCodePoint(jt);if(JC[Ht]||(Dt+=eF(Ht,Lt,Xe,gt,Qe,et)),jt<Oe.length()-1){const Aa=!((Nt=Ht)<11904||!(Rt["Bopomofo Extended"](Nt)||Rt.Bopomofo(Nt)||Rt["CJK Compatibility Forms"](Nt)||Rt["CJK Compatibility Ideographs"](Nt)||Rt["CJK Compatibility"](Nt)||Rt["CJK Radicals Supplement"](Nt)||Rt["CJK Strokes"](Nt)||Rt["CJK Symbols and Punctuation"](Nt)||Rt["CJK Unified Ideographs Extension A"](Nt)||Rt["CJK Unified Ideographs"](Nt)||Rt["Enclosed CJK Letters and Months"](Nt)||Rt["Halfwidth and Fullwidth Forms"](Nt)||Rt.Hiragana(Nt)||Rt["Ideographic Description Characters"](Nt)||Rt["Kangxi Radicals"](Nt)||Rt["Katakana Phonetic Extensions"](Nt)||Rt.Katakana(Nt)||Rt["Vertical Forms"](Nt)||Rt["Yi Radicals"](Nt)||Rt["Yi Syllables"](Nt)));(Rae[Ht]||Aa||Lt.image)&&_t.push(aF(jt+1,Dt,xt,_t,Tae(Ht,Oe.getCodePoint(jt+1),Aa&&Ct),!1))}}var Nt;return rF(aF(Oe.length(),Dt,xt,_t,0,!0))}(J,D,m,s,f,z),{processBidirectionalText:de,processStyledBidirectionalText:ne}=ps;if(de&&J.sections.length===1){const Oe=de(J.toString(),he);for(const Qe of Oe){const Ye=new C0;Ye.text=Qe,Ye.sections=J.sections;for(let Xe=0;Xe<Qe.length;Xe++)Ye.sectionIndex.push(0);te.push(Ye)}}else if(ne){const Oe=ne(J.text,J.sectionIndex,he);for(const Qe of Oe){const Ye=new C0;Ye.text=Qe[0],Ye.sectionIndex=Qe[1],Ye.sections=J.sections,te.push(Ye)}}else te=function(Oe,Qe){const Ye=[],Xe=Oe.text;let gt=0;for(const et of Qe)Ye.push(Oe.substring(gt,et)),gt=et;return gt<Xe.length&&Ye.push(Oe.substring(gt,Xe.length)),Ye}(J,he);const Ae=[],xe={positionedLines:Ae,text:J.toString(),top:C[1],bottom:C[1],left:C[0],right:C[0],writingMode:V,iconsInText:!1,verticalizable:!1,hasBaseline:!1};if(function(Oe,Qe,Ye,Xe,gt,et,_t,xt,Ct,Dt,Nt,jt){let Lt=0,Ht=0,Aa=0;const ma=xt==="right"?1:xt==="left"?0:.5;let er=!1;for(const dr of gt){const Lr=dr.getSections();for(const sn of Lr){if(sn.image)continue;const Zr=Qe[sn.fontStack];if(Zr&&(er=Zr.ascender!==void 0&&Zr.descender!==void 0,!er))break}if(!er)break}let Oa=0;for(const dr of gt){dr.trim();const Lr=dr.getMaxScale(),sn=(Lr-1)*Ze,Zr={positionedGlyphs:[],lineOffset:0};Oe.positionedLines[Oa]=Zr;const vn=Zr.positionedGlyphs;let rn=0;if(!dr.length()){Ht+=et,++Oa;continue}let En=0,Jn=0;for(let Br=0;Br<dr.length();Br++){const Ln=dr.getSection(Br),is=dr.getSectionIndex(Br),gs=dr.getCodePoint(Br);let bs=Ln.scale,ks=null,Vi=null,pl=null,Dc=Ze,So=0;Ct===th.vertical&&((Da=gs)===12312||Da===12313||Da===12316||Da===12540||Da===12448)&&(Ct=th.horizontal);const Mo=!(Ct===th.horizontal||!Nt&&!Ka(gs)||Nt&&(JC[gs]||Ar(gs)));if(Ln.image){const Gu=Xe.get(Ln.image.toString());if(!Gu)continue;pl=Ln.image,Oe.iconsInText=Oe.iconsInText||!0,Vi=Gu.paddedRect;const ql=Gu.displaySize;bs=bs*Ze/jt,ks={width:ql[0],height:ql[1],left:0,top:-3,advance:Mo?ql[1]:ql[0],localGlyph:!1},So=er?-ks.height*bs:Lr*Ze-17-ql[1]*bs,Dc=ks.advance;const of=(Mo?ql[0]:ql[1])*bs-Ze*Lr;of>0&&of>rn&&(rn=of)}else{const Gu=Ye[Ln.fontStack];if(!Gu)continue;Gu[gs]&&(Vi=Gu[gs]);const ql=Qe[Ln.fontStack];if(!ql)continue;const of=ql.glyphs[gs];if(!of)continue;if(ks=of.metrics,Dc=gs!==8203?Ze:0,er){const _y=ql.ascender!==void 0?Math.abs(ql.ascender):0,qf=ql.descender!==void 0?Math.abs(ql.descender):0,Vp=(_y+qf)*bs;En<Vp&&(En=Vp,Jn=(_y-qf)/2*bs),So=-_y*bs}else So=(Lr-bs)*Ze-17}Mo?(Oe.verticalizable=!0,vn.push({glyph:gs,image:pl,x:Lt,y:Ht+So,vertical:Mo,scale:bs,localGlyph:ks.localGlyph,fontStack:Ln.fontStack,sectionIndex:is,metrics:ks,rect:Vi}),Lt+=Dc*bs+Dt):(vn.push({glyph:gs,image:pl,x:Lt,y:Ht+So,vertical:Mo,scale:bs,localGlyph:ks.localGlyph,fontStack:Ln.fontStack,sectionIndex:is,metrics:ks,rect:Vi}),Lt+=ks.advance*bs+Dt)}vn.length!==0&&(Aa=Math.max(Lt-Dt,Aa),er?nF(vn,ma,rn,Jn,et*Lr/2):nF(vn,ma,rn,0,et/2)),Lt=0;const Li=et*Lr+rn;Zr.lineOffset=Math.max(rn,sn),Ht+=Li,++Oa}var Da;const Ra=Ht,{horizontalAlign:Rr,verticalAlign:Xa}=RE(_t);(function(dr,Lr,sn,Zr,vn,rn){const En=(Lr-sn)*vn,Jn=-rn*Zr;for(const Li of dr)for(const Br of Li.positionedGlyphs)Br.x+=En,Br.y+=Jn})(Oe.positionedLines,ma,Rr,Xa,Aa,Ra),Oe.top+=-Xa*Ra,Oe.bottom=Oe.top+Ra,Oe.left+=-Rr*Aa,Oe.right=Oe.left+Aa,Oe.hasBaseline=er}(xe,s,u,f,te,_,b,O,V,D,I,M),!function(Oe){for(const Qe of Oe)if(Qe.positionedGlyphs.length!==0)return!1;return!0}(Ae))return xe}const JC={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Rae={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function eF(h,s,u,f,g,m){if(s.image){const _=f.get(s.image.toString());return _?_.displaySize[0]*s.scale*Ze/m+g:0}{const _=u[s.fontStack],b=_&&_.glyphs[h];return b?b.metrics.advance*s.scale+g:0}}function tF(h,s,u,f){const g=Math.pow(h-s,2);return f?h<s?g/2:2*g:g+Math.abs(u)*u}function Tae(h,s,u){let f=0;return h===10&&(f-=1e4),u&&(f+=150),h!==40&&h!==65288||(f+=50),s!==41&&s!==65289||(f+=50),f}function aF(h,s,u,f,g,m){let _=null,b=tF(s,u,g,m);for(const O of f){const D=tF(s-O.x,u,g,m)+O.badness;D<=b&&(_=O,b=D)}return{index:h,x:s,priorBreak:_,badness:b}}function rF(h){return h?rF(h.priorBreak).concat(h.index):[]}function RE(h){let s=.5,u=.5;switch(h){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(h){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:s,verticalAlign:u}}function nF(h,s,u,f,g){if(!(s||u||f||g))return;const m=h.length-1,_=h[m],b=(_.x+_.metrics.advance*_.scale)*s;for(let O=0;O<=m;O++)h[O].x-=b,h[O].y+=u+f+g}function Cae(h,s,u,f){const{horizontalAlign:g,verticalAlign:m}=RE(f),_=u[0]-h.displaySize[0]*g,b=u[1]-h.displaySize[1]*m;return{imagePrimary:h,imageSecondary:s,top:b,bottom:b+h.displaySize[1],left:_,right:_+h.displaySize[0]}}function iF(h,s,u,f,g,m){const _=h.imagePrimary;let b;if(_.content){const J=_.content,te=_.pixelRatio||1;b=[J[0]/te,J[1]/te,_.displaySize[0]-J[2]/te,_.displaySize[1]-J[3]/te]}const O=s.left*m,D=s.right*m;let C,V,I,z;u==="width"||u==="both"?(z=g[0]+O-f[3],V=g[0]+D+f[1]):(z=g[0]+(O+D-_.displaySize[0])/2,V=z+_.displaySize[0]);const M=s.top*m,B=s.bottom*m;return u==="height"||u==="both"?(C=g[1]+M-f[0],I=g[1]+B+f[2]):(C=g[1]+(M+B-_.displaySize[1])/2,I=C+_.displaySize[1]),{imagePrimary:_,imageSecondary:void 0,top:C,right:V,bottom:I,left:z,collisionPadding:b}}class gg extends It{constructor(s,u,f,g,m){super(s,u),this.angle=g,this.z=f,m!==void 0&&(this.segment=m)}clone(){return new gg(this.x,this.y,this.z,this.angle,this.segment)}}function sF(h,s,u,f,g){if(s.segment===void 0)return!0;let m=s,_=s.segment+1,b=0;for(;b>-u/2;){if(_--,_<0)return!1;b-=h[_].dist(m),m=h[_]}b+=h[_].dist(h[_+1]),_++;const O=[];let D=0;for(;b<u/2;){const C=h[_],V=h[_+1];if(!V)return!1;let I=h[_-1].angleTo(C)-C.angleTo(V);for(I=Math.abs((I+3*Math.PI)%(2*Math.PI)-Math.PI),O.push({distance:b,angleDelta:I}),D+=I;b-O[0].distance>f;)D-=O.shift().angleDelta;if(D>g)return!1;_++,b+=C.dist(V)}return!0}function oF(h){let s=0;for(let u=0;u<h.length-1;u++)s+=h[u].dist(h[u+1]);return s}function lF(h,s,u){return h?.6*s*u:0}function uF(h,s){return Math.max(h?h.right-h.left:0,s?s.right-s.left:0)}function Sae(h,s,u,f,g,m){const _=lF(u,g,m),b=uF(u,f)*m;let O=0;const D=oF(h)/2;for(let C=0;C<h.length-1;C++){const V=h[C],I=h[C+1],z=V.dist(I);if(O+z>D){const M=(D-O)/z,B=gr(V.x,I.x,M),J=gr(V.y,I.y,M),te=new gg(B,J,0,I.angleTo(V),C);return!_||sF(h,te,b,_,s)?te:void 0}O+=z}}function bae(h,s,u,f,g,m,_,b,O){const D=lF(f,m,_),C=uF(f,g),V=C*_,I=h[0].x===0||h[0].x===O||h[0].y===0||h[0].y===O;return s-V<s/4&&(s=V+s/4),cF(h,I?s/2*b%s:(C/2+2*m)*_*b%s,s,D,u,V,I,!1,O)}function cF(h,s,u,f,g,m,_,b,O){const D=m/2,C=oF(h);let V=0,I=s-u,z=[];for(let M=0;M<h.length-1;M++){const B=h[M],J=h[M+1],te=B.dist(J),he=J.angleTo(B);for(;I+u<V+te;){I+=u;const de=(I-V)/te,ne=gr(B.x,J.x,de),Ae=gr(B.y,J.y,de);if(ne>=0&&ne<O&&Ae>=0&&Ae<O&&I-D>=0&&I+D<=C){const xe=new gg(ne,Ae,0,he,M);f&&!sF(h,xe,m,f,g)||z.push(xe)}}V+=te}return b||z.length||_||(z=cF(h,V/2,u,f,g,m,_,!0,O)),z}function dF(h,s,u,f,g){const m=[];for(let _=0;_<h.length;_++){const b=h[_];let O;for(let D=0;D<b.length-1;D++){let C=b[D],V=b[D+1];C.x<s&&V.x<s||(C.x<s?C=new It(s,C.y+(s-C.x)/(V.x-C.x)*(V.y-C.y))._round():V.x<s&&(V=new It(s,C.y+(s-C.x)/(V.x-C.x)*(V.y-C.y))._round()),C.y<u&&V.y<u||(C.y<u?C=new It(C.x+(u-C.y)/(V.y-C.y)*(V.x-C.x),u)._round():V.y<u&&(V=new It(C.x+(u-C.y)/(V.y-C.y)*(V.x-C.x),u)._round()),C.x>=f&&V.x>=f||(C.x>=f?C=new It(f,C.y+(f-C.x)/(V.x-C.x)*(V.y-C.y))._round():V.x>=f&&(V=new It(f,C.y+(f-C.x)/(V.x-C.x)*(V.y-C.y))._round()),C.y>=g&&V.y>=g||(C.y>=g?C=new It(C.x+(g-C.y)/(V.y-C.y)*(V.x-C.x),g)._round():V.y>=g&&(V=new It(C.x+(g-C.y)/(V.y-C.y)*(V.x-C.x),g)._round()),O&&C.equals(O[O.length-1])||(O=[C],m.push(O)),O.push(V)))))}}return m}function hF(h){let s=0,u=0;for(const _ of h)s+=_.w*_.h,u=Math.max(u,_.w);h.sort((_,b)=>b.h-_.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),u),h:1/0}];let g=0,m=0;for(const _ of h)for(let b=f.length-1;b>=0;b--){const O=f[b];if(!(_.w>O.w||_.h>O.h)){if(_.x=O.x,_.y=O.y,m=Math.max(m,_.y+_.h),g=Math.max(g,_.x+_.w),_.w===O.w&&_.h===O.h){const D=f.pop();b<f.length&&(f[b]=D)}else _.h===O.h?(O.x+=_.w,O.w-=_.w):_.w===O.w?(O.y+=_.h,O.h-=_.h):(f.push({x:O.x+_.w,y:O.y,w:O.w-_.w,h:_.h}),O.y+=_.h,O.h-=_.h);break}}return{w:g,h:m,fill:s/(g*m)||0}}Pt(gg,"Anchor");const S0=1;class fw{static getImagePositionScale(s,u,f){if(u&&s&&s.options&&s.options.transform){const g=s.options.transform;return{x:g.a,y:g.d}}return{x:f,y:f}}constructor(s,u,f,g){this.paddedRect=s;const{pixelRatio:m,version:_,stretchX:b,stretchY:O,content:D,sdf:C,usvg:V}=u;this.pixelRatio=m,this.stretchX=b,this.stretchY=O,this.content=D,this.version=_,this.padding=f,this.sdf=C,this.scale=fw.getImagePositionScale(g,V,m)}get tl(){return[this.paddedRect.x+this.padding,this.paddedRect.y+this.padding]}get br(){return[this.paddedRect.x+this.paddedRect.w-this.padding,this.paddedRect.y+this.paddedRect.h-this.padding]}get displaySize(){return[(this.paddedRect.w-2*this.padding)/this.scale.x,(this.paddedRect.h-2*this.padding)/this.scale.y]}}function fF(h,s,u){const f=Yu.parse(h),g=function(m,_,b=[1,1]){return{x:0,y:0,w:(m.data?m.data.width:m.width*b[0])+2*_,h:(m.data?m.data.height:m.height*b[1])+2*_}}(s,u,[f.options.transform.a,f.options.transform.d]);return{bin:g,imagePosition:new fw(g,s,u,f),imageVariant:f}}class pF{constructor(s,u,f){const g=new Map,m=new Map;this.haveRenderCallbacks=[];const _=[];this.addImages(s,g,S0,_),this.addImages(u,m,2,_);const{w:b,h:O}=hF(_),D=new xl({width:b||1,height:O||1});for(const[C,V]of s.entries()){const I=g.get(C).paddedRect;xl.copy(V.data,D,{x:0,y:0},{x:I.x+S0,y:I.y+S0},V.data,f,V.sdf)}for(const[C,V]of u.entries()){const I=m.get(C),z=I.paddedRect;let M=I.padding;const B=z.x+M,J=z.y+M,te=V.data.width,he=V.data.height;M=M>1?M-1:M,xl.copy(V.data,D,{x:0,y:0},{x:B,y:J},V.data,f),xl.copy(V.data,D,{x:0,y:he-M},{x:B,y:J-M},{width:te,height:M},f),xl.copy(V.data,D,{x:0,y:0},{x:B,y:J+he},{width:te,height:M},f),xl.copy(V.data,D,{x:te-M,y:0},{x:B-M,y:J},{width:M,height:he},f),xl.copy(V.data,D,{x:0,y:0},{x:B+te,y:J},{width:M,height:he},f),xl.copy(V.data,D,{x:te-M,y:he-M},{x:B-M,y:J-M},{width:M,height:M},f),xl.copy(V.data,D,{x:0,y:he-M},{x:B+te,y:J-M},{width:M,height:M},f),xl.copy(V.data,D,{x:0,y:0},{x:B+te,y:J+he},{width:M,height:M},f),xl.copy(V.data,D,{x:te-M,y:0},{x:B-M,y:J+he},{width:M,height:M},f)}this.lut=f,this.image=D,this.iconPositions=g,this.patternPositions=m}addImages(s,u,f,g){for(const[m,_]of s.entries()){const{bin:b,imagePosition:O,imageVariant:D}=fF(m,_,f);u.set(m,O),g.push(b),_.hasRenderCallback&&this.haveRenderCallbacks.push(D.id)}}patchUpdatedImages(s,u,f){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(g=>s.hasImage(g,f)),s.dispatchRenderCallbacks(this.haveRenderCallbacks,f);for(const g of s.getUpdatedImages(f)){for(const m of this.iconPositions.keys()){const _=Yu.parse(m);if(qo.isEqual(_.id,g)){const b=s.getImage(g,f);this.patchUpdatedImage(this.iconPositions.get(m),b,u)}}for(const m of this.patternPositions.keys()){const _=Yu.parse(m);if(qo.isEqual(_.id,g)){const b=s.getImage(g,f);this.patchUpdatedImage(this.patternPositions.get(m),b,u)}}}}patchUpdatedImage(s,u,f){if(!s||!u||s.version===u.version)return;s.version=u.version;const[g,m]=s.tl,_=s.sdf;if(this.lut||_){const b={width:u.data.width,height:u.data.height},O=new xl(b);xl.copy(u.data,O,{x:0,y:0},{x:0,y:0},b,this.lut,_),f.update(O,{position:{x:g,y:m}})}else f.update(u.data,{position:{x:g,y:m}})}}Pt(fw,"ImagePosition"),Pt(pF,"ImageAtlas");const QC=1e20;function mF(h,s,u,f,g,m,_,b,O){for(let D=s;D<s+f;D++)gF(h,u*m+D,m,g,_,b,O);for(let D=u;D<u+g;D++)gF(h,D*m+s,1,f,_,b,O)}function gF(h,s,u,f,g,m,_){m[0]=0,_[0]=-1e20,_[1]=QC,g[0]=h[s];for(let b=1,O=0,D=0;b<f;b++){g[b]=h[s+b*u];const C=b*b;do{const V=m[O];D=(g[b]-g[V]+C-V*V)/(b-V)/2}while(D<=_[O]&&--O>-1);O++,m[O]=b,_[O]=D,_[O+1]=QC}for(let b=0,O=0;b<f;b++){for(;_[O+1]<b;)O++;const D=m[O],C=b-D;h[s+b*u]=g[D]+C*C}}const Pp=2,TE={none:0,ideographs:1,all:2};class b0{constructor(s,u,f){this.requestManager=s,this.localGlyphMode=u,this.localFontFamily=f,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(s,u){this.urls[u]=s}getGlyphs(s,u,f){const g=[],m=this.urls[u]||Ne.GLYPHS_URL;for(const _ in s)for(const b of s[_])g.push({stack:_,id:b});wn(g,({stack:_,id:b},O)=>{let D=this.entries[_];D||(D=this.entries[_]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let C=D.glyphs[b];if(C!==void 0)return void O(null,{stack:_,id:b,glyph:C});if(C=this._tinySDF(D,_,b),C)return D.glyphs[b]=C,void O(null,{stack:_,id:b,glyph:C});const V=Math.floor(b/256);if(256*V>65535)return $r("glyphs > 65535 not supported"),void O(null,{stack:_,id:b,glyph:C});if(D.ranges[V])return void O(null,{stack:_,id:b,glyph:C});let I=D.requests[V];I||(I=D.requests[V]=[],b0.loadGlyphRange(_,V,m,this.requestManager,(z,M)=>{if(M){D.ascender=M.ascender,D.descender=M.descender;for(const B in M.glyphs)this._doesCharSupportLocalGlyph(+B)||(D.glyphs[+B]=M.glyphs[+B]);D.ranges[V]=!0}for(const B of I)B(z,M);delete D.requests[V]})),I.push((z,M)=>{z?O(z):M&&O(null,{stack:_,id:b,glyph:M.glyphs[b]||null})})},(_,b)=>{if(_)f(_);else if(b){const O={};for(const{stack:D,id:C,glyph:V}of b)O[D]===void 0&&(O[D]={}),O[D].glyphs===void 0&&(O[D].glyphs={}),O[D].glyphs[C]=V&&{id:V.id,bitmap:V.bitmap.clone(),metrics:V.metrics},O[D].ascender=this.entries[D].ascender,O[D].descender=this.entries[D].descender;f(null,O)}})}_doesCharSupportLocalGlyph(s){return this.localGlyphMode!==TE.none&&(this.localGlyphMode===TE.all?!!this.localFontFamily:!!this.localFontFamily&&(Rt["CJK Unified Ideographs"](s)||Rt["Hangul Syllables"](s)||Rt.Hiragana(s)||Rt.Katakana(s)||Rt["CJK Symbols and Punctuation"](s)||Rt["CJK Unified Ideographs Extension A"](s)||Rt["CJK Unified Ideographs Extension B"](s)||Rt.Osage(s)))}_tinySDF(s,u,f){const g=this.localFontFamily;if(!g||!this._doesCharSupportLocalGlyph(f))return;let m=s.tinySDF;if(!m){let B="400";/bold/i.test(u)?B="900":/medium/i.test(u)?B="500":/light/i.test(u)&&(B="200"),m=s.tinySDF=new b0.TinySDF({fontFamily:g,fontWeight:B,fontSize:24*Pp,buffer:3*Pp,radius:8*Pp}),m.fontWeight=B}if(this.localGlyphs[m.fontWeight][f])return this.localGlyphs[m.fontWeight][f];const _=String.fromCodePoint(f),{data:b,width:O,height:D,glyphWidth:C,glyphHeight:V,glyphLeft:I,glyphTop:z,glyphAdvance:M}=m.draw(_);return this.localGlyphs[m.fontWeight][f]={id:f,bitmap:new mm({width:O,height:D},b),metrics:{width:C/Pp,height:V/Pp,left:I/Pp,top:z/Pp-27,advance:M/Pp,localGlyph:!0}}}}b0.loadGlyphRange=function(h,s,u,f,g){const m=256*s,_=m+255,b=f.transformRequest(f.normalizeGlyphsURL(u).replace("{fontstack}",h).replace("{range}",`${m}-${_}`),Ns.Glyphs);Ui(b,(O,D)=>{if(O)g(O);else if(D){const C={},V=function(I){return new mn(I).readFields(hu,{})}(D);for(const I of V.glyphs)C[I.id]=I;g(null,{glyphs:C,ascender:V.ascender,descender:V.descender})}})},b0.TinySDF=class{constructor({fontSize:h=24,buffer:s=3,radius:u=8,cutoff:f=.25,fontFamily:g="sans-serif",fontWeight:m="normal",fontStyle:_="normal"}={}){this.buffer=s,this.cutoff=f,this.radius=u;const b=this.size=h+4*s,O=this._createCanvas(b),D=this.ctx=O.getContext("2d",{willReadFrequently:!0});D.font=`${_} ${m} ${h}px ${g}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(b*b),this.gridInner=new Float64Array(b*b),this.f=new Float64Array(b),this.z=new Float64Array(b+1),this.v=new Uint16Array(b)}_createCanvas(h){const s=document.createElement("canvas");return s.width=s.height=h,s}draw(h){const{width:s,actualBoundingBoxAscent:u,actualBoundingBoxDescent:f,actualBoundingBoxLeft:g,actualBoundingBoxRight:m}=this.ctx.measureText(h),_=Math.ceil(u),b=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(m-g))),O=Math.min(this.size-this.buffer,_+Math.ceil(f)),D=b+2*this.buffer,C=O+2*this.buffer,V=Math.max(D*C,0),I=new Uint8ClampedArray(V),z={data:I,width:D,height:C,glyphWidth:b,glyphHeight:O,glyphTop:_,glyphLeft:0,glyphAdvance:s};if(b===0||O===0)return z;const{ctx:M,buffer:B,gridInner:J,gridOuter:te}=this;M.clearRect(B,B,b,O),M.fillText(h,B,B+_);const he=M.getImageData(B,B,b,O);te.fill(QC,0,V),J.fill(0,0,V);for(let de=0;de<O;de++)for(let ne=0;ne<b;ne++){const Ae=he.data[4*(de*b+ne)+3]/255;if(Ae===0)continue;const xe=(de+B)*D+ne+B;if(Ae===1)te[xe]=0,J[xe]=QC;else{const Oe=.5-Ae;te[xe]=Oe>0?Oe*Oe:0,J[xe]=Oe<0?Oe*Oe:0}}mF(te,0,0,D,C,D,this.f,this.v,this.z),mF(J,B,B,b,O,D,this.f,this.v,this.z);for(let de=0;de<V;de++){const ne=Math.sqrt(te[de])-Math.sqrt(J[de]);I[de]=Math.round(255-255*(ne/this.radius+this.cutoff))}return z}};const qA=S0;function yF(h,s){return h+s[1]-s[0]}function AF(h,s,u,f,g=1){const m=[],_=h.imagePrimary,b=_.pixelRatio,O=_.paddedRect.w-2*qA,D=_.paddedRect.h-2*qA,C=(h.right-h.left)*g,V=(h.bottom-h.top)*g,I=_.stretchX||[[0,O]],z=_.stretchY||[[0,D]],M=I.reduce(yF,0),B=z.reduce(yF,0),J=O-M,te=D-B;let he=0,de=M,ne=0,Ae=B,xe=0,Oe=J,Qe=0,Ye=te;if(_.content&&f){const gt=_.content;he=eS(I,0,gt[0]),ne=eS(z,0,gt[1]),de=eS(I,gt[0],gt[2]),Ae=eS(z,gt[1],gt[3]),xe=gt[0]-he,Qe=gt[1]-ne,Oe=gt[2]-gt[0]-de,Ye=gt[3]-gt[1]-Ae}const Xe=(gt,et,_t,xt)=>{const Ct=tS(gt.stretch-he,de,C,h.left*g),Dt=aS(gt.fixed-xe,Oe,gt.stretch,M),Nt=tS(et.stretch-ne,Ae,V,h.top*g),jt=aS(et.fixed-Qe,Ye,et.stretch,B),Lt=tS(_t.stretch-he,de,C,h.left*g),Ht=aS(_t.fixed-xe,Oe,_t.stretch,M),Aa=tS(xt.stretch-ne,Ae,V,h.top*g),ma=aS(xt.fixed-Qe,Ye,xt.stretch,B),er=new It(Ct,Nt),Oa=new It(Lt,Nt),Da=new It(Lt,Aa),Ra=new It(Ct,Aa),Rr=new It(Dt/b,jt/b),Xa=new It(Ht/b,ma/b),dr=s*Math.PI/180;if(dr){const En=Math.sin(dr),Jn=Math.cos(dr),Li=[Jn,-En,En,Jn];er._matMult(Li),Oa._matMult(Li),Ra._matMult(Li),Da._matMult(Li)}const Lr=gt.stretch+gt.fixed,sn=_t.stretch+_t.fixed,Zr=et.stretch+et.fixed,vn=xt.stretch+xt.fixed,rn=h.imageSecondary;return{tl:er,tr:Oa,bl:Ra,br:Da,texPrimary:{x:_.paddedRect.x+qA+Lr,y:_.paddedRect.y+qA+Zr,w:sn-Lr,h:vn-Zr},texSecondary:rn?{x:rn.paddedRect.x+qA+Lr,y:rn.paddedRect.y+qA+Zr,w:sn-Lr,h:vn-Zr}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Rr,pixelOffsetBR:Xa,minFontScaleX:Oe/b/C,minFontScaleY:Ye/b/V,isSDF:u}};if(f&&(_.stretchX||_.stretchY)){const gt=vF(I,J,M),et=vF(z,te,B);for(let _t=0;_t<gt.length-1;_t++){const xt=gt[_t],Ct=gt[_t+1];for(let Dt=0;Dt<et.length-1;Dt++)m.push(Xe(xt,et[Dt],Ct,et[Dt+1]))}}else m.push(Xe({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:O+1},{fixed:0,stretch:D+1}));return m}function eS(h,s,u){let f=0;for(const g of h)f+=Math.max(s,Math.min(u,g[1]))-Math.max(s,Math.min(u,g[0]));return f}function vF(h,s,u){const f=[{fixed:-1,stretch:0}];for(const[g,m]of h){const _=f[f.length-1];f.push({fixed:g-_.stretch,stretch:_.stretch}),f.push({fixed:g-_.stretch,stretch:_.stretch+(m-g)})}return f.push({fixed:s+qA,stretch:u}),f}function tS(h,s,u,f){return h/s*u+f}function aS(h,s,u,f){return h-s*u/f}function xae(h,s,u,f){const g=s+h.positionedLines[f].lineOffset;return f===0?u+g/2:u+(g+(s+h.positionedLines[f-1].lineOffset))/2}function Pae(h,s=1,u=!1){let f=1/0,g=1/0,m=-1/0,_=-1/0;const b=h[0];for(let z=0;z<b.length;z++){const M=b[z];(!z||M.x<f)&&(f=M.x),(!z||M.y<g)&&(g=M.y),(!z||M.x>m)&&(m=M.x),(!z||M.y>_)&&(_=M.y)}const O=Math.min(m-f,_-g);let D=O/2;const C=new _c([],Eae);if(O===0)return new It(f,g);for(let z=f;z<m;z+=O)for(let M=g;M<_;M+=O)C.push(new x0(z+D,M+D,D,h));let V=function(z){let M=0,B=0,J=0;const te=z[0];for(let he=0,de=te.length,ne=de-1;he<de;ne=he++){const Ae=te[he],xe=te[ne],Oe=Ae.x*xe.y-xe.x*Ae.y;B+=(Ae.x+xe.x)*Oe,J+=(Ae.y+xe.y)*Oe,M+=3*Oe}return new x0(B/M,J/M,0,z)}(h),I=C.length;for(;C.length;){const z=C.pop();(z.d>V.d||!V.d)&&(V=z,u&&console.log("found best %d after %d probes",Math.round(1e4*z.d)/1e4,I)),z.max-V.d<=s||(D=z.h/2,C.push(new x0(z.p.x-D,z.p.y-D,D,h)),C.push(new x0(z.p.x+D,z.p.y-D,D,h)),C.push(new x0(z.p.x-D,z.p.y+D,D,h)),C.push(new x0(z.p.x+D,z.p.y+D,D,h)),I+=4)}return u&&(console.log(`num probes: ${I}`),console.log(`best distance: ${V.d}`)),V.p}function Eae(h,s){return s.max-h.max}class x0{constructor(s,u,f,g){this.p=new It(s,u),this.h=f,this.d=function(m,_){let b=!1,O=1/0;for(let D=0;D<_.length;D++){const C=_[D];for(let V=0,I=C.length,z=I-1;V<I;z=V++){const M=C[V],B=C[z];M.y>m.y!=B.y>m.y&&m.x<(B.x-M.x)*(m.y-M.y)/(B.y-M.y)+M.x&&(b=!b),O=Math.min(O,pt(m,M,B))}}return(b?1:-1)*Math.sqrt(O)}(this.p,g),this.max=this.d+this.h*Math.SQRT2}}const CE=Number.POSITIVE_INFINITY,Nae=Math.sqrt(2);function _F(h,[s,u]){let f=0,g=0;if(u===CE){s<0&&(s=0);const m=s/Nae;switch(h){case"top-right":case"top-left":g=m-7;break;case"bottom-right":case"bottom-left":g=7-m;break;case"bottom":g=7-s;break;case"top":g=s-7}switch(h){case"top-right":case"bottom-right":f=-m;break;case"top-left":case"bottom-left":f=m;break;case"left":f=s;break;case"right":f=-s}}else{switch(s=Math.abs(s),u=Math.abs(u),h){case"top-right":case"top-left":case"top":g=u-7;break;case"bottom-right":case"bottom-left":case"bottom":g=7-u}switch(h){case"top-right":case"bottom-right":case"right":f=-s;break;case"top-left":case"bottom-left":case"left":f=s}}return[f,g]}function wF(h,s,u,f,g,m,_,b){if(!h)return;const O=Ut(s,u,f,g,m);return h.scaleSelf(O*b*_)}function RF(h,s,u,f,g,m,_,b){return{iconPrimary:wF(h.getPrimary(),s,u,f,g,m,_,b),iconSecondary:wF(h.getSecondary(),s,u,f,g,m,_,b)}}function TF(h,s,u,f){if(!h)return;const g=s.get(u.toString());if(h.imagePrimary=g,f){const m=s.get(f.toString());h.imageSecondary=m}}function Oae(h,s){for(const u in h.horizontal)CF(h.horizontal[u],s);CF(h.vertical,s)}function CF(h,s){if(h){for(const u of h.positionedLines)for(const f of u.positionedGlyphs)if(f.image!==null){const g=f.image.toString();f.rect=s.get(g).paddedRect}}}function SE(h){switch(h){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Vae(h,s,u,f,g,m,_,b,O){const D=bE(m.horizontal)||m.vertical,C=u.get("icon-text-fit-padding").evaluate(f,{},g);let V,I=s;return s&&O!=="none"&&(h.allowVerticalPlacement&&m.vertical&&(V=iF(s,m.vertical,O,C,b,_)),D&&(I=iF(s,D,O,C,b,_))),{defaultShapedIcon:I,verticallyShapedIcon:V}}function zae(h,s,u,f,g,m,_,b,O,D,C,V,I,z,M,B,J,te,he,de){let ne=_.textMaxSize.evaluate(s,{},I);ne===void 0?ne=b*_.textScaleFactor:ne*=_.textScaleFactor;const Ae=h.layers[0].layout,xe=bE(u.horizontal)||u.vertical,Oe=z.name==="globe",Qe=Ze,Ye=h.tilePixelRatio*ne/Qe,Xe=(Dt=h.overscaling,h.zoom>18&&Dt>2&&(Dt>>=1),Math.max(za/(512*Dt),1)*Ae.get("symbol-spacing")),gt=Ae.get("text-padding")*h.tilePixelRatio,et=Ae.get("icon-padding")*h.tilePixelRatio,_t=ba(Ae.get("text-max-angle")),xt=Ae.get("icon-rotation-alignment")==="map"&&de!=="point",Ct=Xe/2;var Dt;h.hasAnyIconTextFit===!1&&J!=="none"&&(h.hasAnyIconTextFit=!0);const Nt=s.properties?+s.properties[Uf]:null,jt=Nt&&h.elevationFeatureIdToIndex?h.elevationFeatureIdToIndex.get(Nt):65535,Lt=(Ht,Aa,ma)=>{if(Aa.x<0||Aa.x>=za||Aa.y<0||Aa.y>=za)return;let er=null;if(Oe){const{x:Oa,y:Da,z:Ra}=z.projectTilePoint(Aa.x,Aa.y,ma);er={anchor:new gg(Oa,Da,Ra,0,void 0),up:z.upVector(ma,Aa.x,Aa.y)}}(function(Oa,Da,Ra,Rr,Xa,dr,Lr,sn,Zr,vn,rn,En,Jn,Li,Br,Ln,is,gs,bs,ks,Vi,pl,Dc,So,Mo,Gu,ql,of,_y){const qf=Oa.addToLineVertexArray(Da,Rr);let Vp,wy,Ry,YA,s6,o6,l6,u6=0,c6=0,d6=0,h6=0,iN=-1,sN=-1;const bm={};let f6=mo("");const XA=Ra?Ra.anchor:Da,oN=of!=="none";let lN=0,uN=0;if(Zr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[lN,uN]=Zr.layout.get("text-offset").evaluate(Vi,{},Mo).map(lf=>lf*Ze):(lN=Zr.layout.get("text-radial-offset").evaluate(Vi,{},Mo)*Ze,uN=CE),Oa.allowVerticalPlacement&&Xa.vertical){const lf=Xa.vertical;if(Br)o6=xE(lf),sn&&(l6=xE(sn));else{const ah=Zr.layout.get("text-rotate").evaluate(Vi,{},Mo)+90;Ry=rS(vn,XA,Da,rn,En,Jn,lf,Li,ah,Ln),sn&&(YA=rS(vn,XA,Da,rn,En,Jn,sn,gs,ah))}}if(dr){const lf=Oa.iconSizeData,ah=Zr.layout.get("icon-rotate").evaluate(Vi,{},Mo),Vw=AF(dr,ah,Dc,oN,pl.iconScaleFactor),dN=sn?AF(sn,ah,Dc,oN,pl.iconScaleFactor):void 0;wy=rS(vn,XA,Da,rn,En,Jn,dr,gs,ah,null),u6=4*Vw.length;let JA=null;lf.kind==="source"?(JA=[ft*Zr.layout.get("icon-size").evaluate(Vi,{},Mo)*pl.iconScaleFactor],JA[0]>gy&&$r(`${Oa.layerIds[0]}: Value for "icon-size" is >= ${pw}. Reduce your "icon-size".`)):lf.kind==="composite"&&(JA=[ft*pl.compositeIconSizes[0].evaluate(Vi,{},Mo)*pl.iconScaleFactor,ft*pl.compositeIconSizes[1].evaluate(Vi,{},Mo)*pl.iconScaleFactor],(JA[0]>gy||JA[1]>gy)&&$r(`${Oa.layerIds[0]}: Value for "icon-size" is >= ${pw}. Reduce your "icon-size".`)),Oa.addSymbols(Oa.icon,Vw,JA,ks,bs,Vi,!1,Ra,Da,qf.lineStartIndex,qf.lineLength,-1,So,Mo,Gu,ql),iN=Oa.icon.placedSymbolArray.length-1,dN&&(c6=4*dN.length,Oa.addSymbols(Oa.icon,dN,JA,ks,bs,Vi,th.vertical,Ra,Da,qf.lineStartIndex,qf.lineLength,-1,So,Mo,Gu,ql),sN=Oa.icon.placedSymbolArray.length-1)}for(const lf in Xa.horizontal){const ah=Xa.horizontal[lf];Vp||(f6=mo(ah.text),Br?s6=xE(ah):Vp=rS(vn,XA,Da,rn,En,Jn,ah,Li,Zr.layout.get("text-rotate").evaluate(Vi,{},Mo),Ln));const Vw=ah.positionedLines.length===1;if(d6+=SF(Oa,Ra,Da,ah,Lr,Zr,Br,Vi,Ln,qf,Xa.vertical?th.horizontal:th.horizontalOnly,Vw?Object.keys(Xa.horizontal):[lf],bm,iN,pl,So,Mo,Gu),Vw)break}Xa.vertical&&(h6+=SF(Oa,Ra,Da,Xa.vertical,Lr,Zr,Br,Vi,Ln,qf,th.vertical,["vertical"],bm,sN,pl,So,Mo,Gu));let Ty=-1;const cN=(lf,ah)=>lf?Math.max(lf,ah):ah;Ty=cN(s6,Ty),Ty=cN(o6,Ty),Ty=cN(l6,Ty);const dne=Ty>-1?1:0;Oa.glyphOffsetArray.length>=65535&&$r("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Vi.sortKey!==void 0&&Oa.addToSortKeyRanges(Oa.symbolInstances.length,Vi.sortKey),Oa.symbolInstances.emplaceBack(Da.x,Da.y,XA.x,XA.y,XA.z,bm.right>=0?bm.right:-1,bm.center>=0?bm.center:-1,bm.left>=0?bm.left:-1,bm.vertical>=0?bm.vertical:-1,iN,sN,f6,Vp!==void 0?Vp:Oa.collisionBoxArray.length,Vp!==void 0?Vp+1:Oa.collisionBoxArray.length,Ry!==void 0?Ry:Oa.collisionBoxArray.length,Ry!==void 0?Ry+1:Oa.collisionBoxArray.length,wy!==void 0?wy:Oa.collisionBoxArray.length,wy!==void 0?wy+1:Oa.collisionBoxArray.length,YA||Oa.collisionBoxArray.length,YA?YA+1:Oa.collisionBoxArray.length,rn,d6,h6,u6,c6,dne,0,lN,uN,Ty,0,oN?1:0,_y)})(h,Aa,er,Ht,u,f,m,g,h.layers[0],h.collisionBoxArray,s.index,s.sourceLayerIndex,h.index,gt,he,D,0,et,xt,te,s,_,C,V,I,M,B,J,jt)};if(de==="line")for(const Ht of dF(s.geometry,0,0,za,za)){const Aa=bae(Ht,Xe,_t,u.vertical||xe,f,Qe,Ye,h.overscaling,za);for(const ma of Aa)xe&&Dae(h,xe.text,Ct,ma)||Lt(Ht,ma,I)}else if(de==="line-center"){for(const Ht of s.geometry)if(Ht.length>1){const Aa=Sae(Ht,_t,u.vertical||xe,f,Qe,Ye);Aa&&Lt(Ht,Aa,I)}}else if(s.type==="Polygon")for(const Ht of OA(s.geometry,0)){const Aa=Pae(Ht,16);Lt(Ht[0],new gg(Aa.x,Aa.y,0,0,void 0),I)}else if(s.type==="LineString")for(const Ht of s.geometry)Lt(Ht,new gg(Ht[0].x,Ht[0].y,0,0,void 0),I);else if(s.type==="Point")for(const Ht of s.geometry)for(const Aa of Ht)Lt([Aa],new gg(Aa.x,Aa.y,0,0,void 0),I)}const pw=255,gy=pw*ft;function SF(h,s,u,f,g,m,_,b,O,D,C,V,I,z,M,B,J,te){const he=function(Ae,xe,Oe,Qe,Ye,Xe,gt,et){const _t=[];if(xe.positionedLines.length===0)return _t;const xt=Qe.layout.get("text-rotate").evaluate(Xe,{})*Math.PI/180,Ct=function(Ht){const Aa=Ht[0],ma=Ht[1],er=Aa*ma;return er>0?[Aa,-ma]:er<0?[-Aa,ma]:Aa===0?[ma,Aa]:[ma,-Aa]}(Oe);let Dt=Math.abs(xe.top-xe.bottom);for(const Ht of xe.positionedLines)Dt-=Ht.lineOffset;const Nt=xe.positionedLines.length,jt=Dt/Nt;let Lt=xe.top-Oe[1];for(let Ht=0;Ht<Nt;++Ht){const Aa=xe.positionedLines[Ht];Lt=xae(xe,jt,Lt,Ht);for(const ma of Aa.positionedGlyphs){if(!ma.rect)continue;const er=ma.rect||{};let Oa=_E+1,Da=!0,Ra=1,Rr=0;if(ma.image){const Vi=gt.get(ma.image.toString());if(!Vi)continue;if(Vi.sdf){$r("SDF images are not supported in formatted text and will be ignored.");continue}Da=!1,Ra=Vi.pixelRatio,Oa=S0/Ra}const Xa=(Ye||et)&&ma.vertical,dr=ma.metrics.advance*ma.scale/2,Lr=ma.metrics,sn=ma.rect;if(sn===null)continue;et&&xe.verticalizable&&(Rr=ma.image?dr-ma.metrics.width*ma.scale/2:0);const Zr=Ye?[ma.x+dr,ma.y]:[0,0];let vn=[0,0],rn=[0,0],En=!1;Ye||(Xa?(rn=[ma.x+dr+Ct[0],ma.y+Ct[1]-Rr],En=!0):vn=[ma.x+dr+Oe[0],ma.y+Oe[1]-Rr]);const Jn=sn.w*ma.scale/(Ra*(ma.localGlyph?Pp:1)),Li=sn.h*ma.scale/(Ra*(ma.localGlyph?Pp:1));let Br,Ln,is,gs;if(Xa){const Vi=ma.y-Lt,pl=new It(-dr,dr-Vi),Dc=-Math.PI/2,So=new It(...rn);Br=new It(-dr+vn[0],vn[1]),Br._rotateAround(Dc,pl)._add(So),Br.x+=-Vi+dr,Br.y-=(Lr.left-Oa)*ma.scale;const Mo=ma.image?Lr.advance*ma.scale:Ze*ma.scale,Gu=String.fromCodePoint(ma.glyph);ni(Gu)?Br.x+=(1-Oa)*ma.scale:Qo(Gu)?Br.x+=Mo-Lr.height*ma.scale+(-Oa-1)*ma.scale:Br.x+=ma.image||Lr.width+2*Oa===sn.w&&Lr.height+2*Oa===sn.h?(Mo-Li)/2:(Mo-(Lr.height+2*Oa)*ma.scale)/2,Ln=new It(Br.x,Br.y-Jn),is=new It(Br.x+Li,Br.y),gs=new It(Br.x+Li,Br.y-Jn)}else{const Vi=(Lr.left-Oa)*ma.scale-dr+vn[0],pl=(-Lr.top-Oa)*ma.scale+vn[1],Dc=Vi+Jn,So=pl+Li;Br=new It(Vi,pl),Ln=new It(Dc,pl),is=new It(Vi,So),gs=new It(Dc,So)}if(xt){let Vi;Vi=Ye?new It(0,0):En?new It(Ct[0],Ct[1]):new It(Oe[0],Oe[1]),Br._rotateAround(xt,Vi),Ln._rotateAround(xt,Vi),is._rotateAround(xt,Vi),gs._rotateAround(xt,Vi)}const bs=new It(0,0),ks=new It(0,0);_t.push({tl:Br,tr:Ln,bl:is,br:gs,texPrimary:er,texSecondary:void 0,writingMode:xe.writingMode,glyphOffset:Zr,sectionIndex:ma.sectionIndex,isSDF:Da,pixelOffsetTL:bs,pixelOffsetBR:ks,minFontScaleX:0,minFontScaleY:0})}}return _t}(0,f,O,m,_,b,g,h.allowVerticalPlacement),de=h.textSizeData;let ne=null;de.kind==="source"?(ne=[ft*m.layout.get("text-size").evaluate(b,{},J)*M.textScaleFactor],ne[0]>gy&&$r(`${h.layerIds[0]}: Value for "text-size" is >= ${pw}. Reduce your "text-size".`)):de.kind==="composite"&&(ne=[ft*M.compositeTextSizes[0].evaluate(b,{},J)*M.textScaleFactor,ft*M.compositeTextSizes[1].evaluate(b,{},J)*M.textScaleFactor],(ne[0]>gy||ne[1]>gy)&&$r(`${h.layerIds[0]}: Value for "text-size" is >= ${pw}. Reduce your "text-size".`)),h.addSymbols(h.text,he,ne,O,_,b,C,s,u,D.lineStartIndex,D.lineLength,z,B,J,te,!1);for(const Ae of V)I[Ae]=h.text.placedSymbolArray.length-1;return 4*he.length}function bE(h){for(const s in h)return h[s];return null}function rS(h,s,u,f,g,m,_,b,O,D){let C=_.top,V=_.bottom,I=_.left,z=_.right;const M=_.collisionPadding;if(M&&(I-=M[0],C-=M[1],z+=M[2],V+=M[3]),O){const B=new It(I,C),J=new It(z,C),te=new It(I,V),he=new It(z,V),de=ba(O);let ne=new It(0,0);D&&(ne=new It(D[0],D[1])),B._rotateAround(de,ne),J._rotateAround(de,ne),te._rotateAround(de,ne),he._rotateAround(de,ne),I=Math.min(B.x,J.x,te.x,he.x),z=Math.max(B.x,J.x,te.x,he.x),C=Math.min(B.y,J.y,te.y,he.y),V=Math.max(B.y,J.y,te.y,he.y)}return h.emplaceBack(s.x,s.y,s.z,u.x,u.y,I,C,z,V,b,f,g,m),h.length-1}function xE(h){h.collisionPadding&&(h.top-=h.collisionPadding[1],h.bottom+=h.collisionPadding[3]);const s=h.bottom-h.top;return s>0?Math.max(10,s):null}function Dae(h,s,u,f){const g=h.compareText;if(s in g){const m=g[s];for(let _=m.length-1;_>=0;_--)if(f.dist(m[_])<u)return!0}else g[s]=[];return g[s].push(f),!1}function bF(h,s){const u=h.fovAboveCenter,f=h.elevation?h.elevation.getMinElevationBelowMSL()*s:0,g=(h._camera.position[2]*h.worldSize-f)/Math.cos(h._pitch),m=Math.sin(u)*g/Math.sin(Math.max(Math.PI/2-h._pitch-u,.01));let _=Math.sin(h._pitch)*m+g;const b=g*(1/h._horizonShift);if(!h.elevation||h.elevation.exaggeration()===0){let O=Math.max(h.zoom-17,0);h.isOrthographic&&(O/=10),_*=1+O}return Math.min(1.01*_,b)}function mw(h,s){if(!s.isReprojectedInTileSpace)return{scale:1<<h.z,x:h.x,y:h.y,x2:h.x+1,y2:h.y+1,projection:s};const u=Math.pow(2,-h.z),f=h.x*u,g=(h.x+1)*u,m=h.y*u,_=(h.y+1)*u,b=Uu(f),O=Uu(g),D=Ni(m),C=Ni(_),V=s.project(b,D),I=s.project(O,D),z=s.project(O,C),M=s.project(b,C);let B=Math.min(V.x,I.x,z.x,M.x),J=Math.min(V.y,I.y,z.y,M.y),te=Math.max(V.x,I.x,z.x,M.x),he=Math.max(V.y,I.y,z.y,M.y);const de=u/16;function ne(xe,Oe,Qe,Ye,Xe,gt){const et=(Qe+Xe)/2,_t=(Ye+gt)/2,xt=s.project(Uu(et),Ni(_t)),Ct=Math.max(0,B-xt.x,J-xt.y,xt.x-te,xt.y-he);B=Math.min(B,xt.x),te=Math.max(te,xt.x),J=Math.min(J,xt.y),he=Math.max(he,xt.y),Ct>de&&(ne(xe,xt,Qe,Ye,et,_t),ne(xt,Oe,et,_t,Xe,gt))}ne(V,I,f,m,g,m),ne(I,z,g,m,g,_),ne(z,M,g,_,f,_),ne(M,V,f,_,f,m),B-=de,J-=de,te+=de,he+=de;const Ae=1/Math.max(te-B,he-J);return{scale:Ae,x:B*Ae,y:J*Ae,x2:te*Ae,y2:he*Ae,projection:s}}function xF(h,{x:s,y:u},f=0){return new It(((s-f)*h.scale-h.x)*za,(u*h.scale-h.y)*za)}const Mae=ve.mat4.identity(new Float32Array(16));class yy{constructor(s){this.spec=s,this.name=s.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(s,u){return{x:0,y:0,z:0}}unproject(s,u){return new Gn(0,0)}projectTilePoint(s,u,f){return{x:s,y:u,z:0}}locationPoint(s,u,f,g=!0){return s._coordinatePoint(s.locationCoordinate(u,f),g)}pixelsPerMeter(s,u){return Yo(1,s)*u}pixelSpaceConversion(s,u,f){return 1}farthestPixelDistance(s){return bF(s,s.pixelsPerMeter)}pointCoordinate(s,u,f,g){const m=s.horizonLineFromTop(!1),_=new It(u,Math.max(m,f));return s.rayIntersectionCoordinate(s.pointRayIntersection(_,g))}pointCoordinate3D(s,u,f){const g=new It(u,f);if(s.elevation)return s.elevation.pointCoordinate(g);{const m=this.pointCoordinate(s,g.x,g.y,0);return[m.x,m.y,m.z]}}isPointAboveHorizon(s,u){if(s.elevation&&s.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(s,u.x,u.y);const f=s.horizonLineFromTop();return u.y<f}createInversionMatrix(s,u){return Mae}createTileMatrix(s,u,f){let g,m,_;const b=f.canonical,O=ve.mat4.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){const D=mw(b,this);g=1,m=D.x+f.wrap*D.scale,_=D.y,ve.mat4.scale(O,O,[g/D.scale,g/D.scale,s.pixelsPerMeter/u])}else g=u/s.zoomScale(b.z),m=(b.x+Math.pow(2,b.z)*f.wrap)*g,_=b.y*g;return ve.mat4.translate(O,O,[m,_,0]),ve.mat4.scale(O,O,[g/za,g/za,1]),O}upVector(s,u,f){return[0,0,1]}upVectorScale(s,u,f){return{metersToTile:1}}}class Iae extends yy{constructor(s){super(s),this.range=[4,7],this.center=s.center||[-96,37.5];const[u,f]=this.parallels=s.parallels||[29.5,45.5],g=Math.sin(ba(u));this.n=(g+Math.sin(ba(f)))/2,this.c=1+g*(2*this.n-g),this.r0=Math.sqrt(this.c)/this.n}project(s,u){const{n:f,c:g,r0:m}=this,_=ba(s-this.center[0]),b=ba(u),O=Math.sqrt(g-2*f*Math.sin(b))/f;return{x:O*Math.sin(_*f),y:O*Math.cos(_*f)-m,z:0}}unproject(s,u){const{n:f,c:g,r0:m}=this,_=m+u;let b=Math.atan2(s,Math.abs(_))*Math.sign(_);_*f<0&&(b-=Math.PI*Math.sign(s)*Math.sign(_));const O=ba(this.center[0])*f;b=nn(b,-Math.PI-O,Math.PI-O);const D=ka(Pa(b/f)+this.center[0],-180,180),C=Math.asin(ka((g-(s*s+_*_)*f*f)/(2*f),-1,1)),V=ka(Pa(C),-85.051129,Bu);return new Gn(D,V)}}const gw=1.340264,yw=-.081106,Aw=893e-6,vw=.003796,nS=Math.sqrt(3)/2;class Lae extends yy{project(s,u){u=u/180*Math.PI,s=s/180*Math.PI;const f=Math.asin(nS*Math.sin(u)),g=f*f,m=g*g*g;return{x:.5*(s*Math.cos(f)/(nS*(gw+3*yw*g+m*(7*Aw+9*vw*g)))/Math.PI+.5),y:1-.5*(f*(gw+yw*g+m*(Aw+vw*g))/Math.PI+1),z:0}}unproject(s,u){s=(2*s-.5)*Math.PI;let f=u=(2*(1-u)-1)*Math.PI,g=f*f,m=g*g*g;for(let C,V,I,z=0;z<12&&(V=f*(gw+yw*g+m*(Aw+vw*g))-u,I=gw+3*yw*g+m*(7*Aw+9*vw*g),C=V/I,f=ka(f-C,-Math.PI/3,Math.PI/3),g=f*f,m=g*g*g,!(Math.abs(C)<1e-12));++z);const _=nS*s*(gw+3*yw*g+m*(7*Aw+9*vw*g))/Math.cos(f),b=Math.asin(Math.sin(f)/nS),O=ka(180*_/Math.PI,-180,180),D=ka(180*b/Math.PI,-85.051129,Bu);return new Gn(O,D)}}class Fae extends yy{constructor(s){super(s),this.wrap=!0,this.supportsWorldCopies=!0}project(s,u){return{x:.5+s/360,y:.5-u/360,z:0}}unproject(s,u){const f=360*(s-.5),g=ka(360*(.5-u),-85.051129,Bu);return new Gn(f,g)}}const P0=Math.PI/2;function iS(h){return Math.tan((P0+h)/2)}class kae extends yy{constructor(s){super(s),this.center=s.center||[0,30];const[u,f]=this.parallels=s.parallels||[30,30];let g=ba(u),m=ba(f);this.southernCenter=g+m<0,this.southernCenter&&(g=-g,m=-m);const _=Math.cos(g),b=iS(g);this.n=g===m?Math.sin(g):Math.log(_/Math.cos(m))/Math.log(iS(m)/b),this.f=_*Math.pow(iS(g),this.n)/this.n}project(s,u){u=ba(u),this.southernCenter&&(u=-u),s=ba(s-this.center[0]);const f=1e-6,{n:g,f:m}=this;m>0?u<-P0+f&&(u=-P0+f):u>P0-f&&(u=P0-f);const _=m/Math.pow(iS(u),g);let b=_*Math.sin(g*s),O=m-_*Math.cos(g*s);return b=.5*(b/Math.PI+.5),O=.5*(O/Math.PI+.5),{x:b,y:this.southernCenter?O:1-O,z:0}}unproject(s,u){s=(2*s-.5)*Math.PI,this.southernCenter&&(u=1-u),u=(2*(1-u)-.5)*Math.PI;const{n:f,f:g}=this,m=g-u,_=Math.sign(m),b=Math.sign(f)*Math.sqrt(s*s+m*m);let O=Math.atan2(s,Math.abs(m))*_;m*f<0&&(O-=Math.PI*Math.sign(s)*_);const D=ka(Pa(O/f)+this.center[0],-180,180),C=ka(Pa(2*Math.atan(Math.pow(g/b,1/f))-P0),-85.051129,Bu);return new Gn(D,this.southernCenter?-C:C)}}class PF extends yy{constructor(s){super(s),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(s,u){return{x:Sl(s),y:Ii(u),z:0}}unproject(s,u){const f=Uu(s),g=Ni(u);return new Gn(f,g)}}const EF=ba(Bu);class Uae extends yy{project(s,u){const f=(u=ba(u))*u,g=f*f;return{x:.5*((s=ba(s))*(.8707-.131979*f+g*(g*(.003971*f-.001529*g)-.013791))/Math.PI+.5),y:1-.5*(u*(1.007226+f*(.015085+g*(.028874*f-.044475-.005916*g)))/Math.PI+1),z:0}}unproject(s,u){s=(2*s-.5)*Math.PI;let f=u=(2*(1-u)-1)*Math.PI,g=25,m=0,_=f*f;do{_=f*f;const D=_*_;m=(f*(1.007226+_*(.015085+D*(.028874*_-.044475-.005916*D)))-u)/(1.007226+_*(.045255+D*(.259866*_-.311325-.005916*11*D))),f=ka(f-m,-EF,EF)}while(Math.abs(m)>1e-6&&--g>0);_=f*f;const b=ka(Pa(s/(.8707+_*(_*(_*_*_*(.003971-.001529*_)-.013791)-.131979))),-180,180),O=Pa(f);return new Gn(b,O)}}const NF=ba(Bu);class Bae extends yy{project(s,u){u=ba(u),s=ba(s);const f=Math.cos(u),g=2/Math.PI,m=Math.acos(f*Math.cos(s/2)),_=Math.sin(m)/m,b=.5*(s*g+2*f*Math.sin(s/2)/_)||0,O=.5*(u+Math.sin(u)/_)||0;return{x:.5*(b/Math.PI+.5),y:1-.5*(O/Math.PI+1),z:0}}unproject(s,u){let f=s=(2*s-.5)*Math.PI,g=u=(2*(1-u)-1)*Math.PI,m=25;const _=1e-6;let b=0,O=0;do{const D=Math.cos(g),C=Math.sin(g),V=2*C*D,I=C*C,z=D*D,M=Math.cos(f/2),B=Math.sin(f/2),J=2*M*B,te=B*B,he=1-z*M*M,de=he?1/he:0,ne=he?Math.acos(D*M)*Math.sqrt(1/he):0,Ae=.5*(2*ne*D*B+2*f/Math.PI)-s,xe=.5*(ne*C+g)-u,Oe=.5*de*(z*te+ne*D*M*I)+1/Math.PI,Qe=de*(J*V/4-ne*C*B),Ye=.125*de*(V*B-ne*C*z*J),Xe=.5*de*(I*M+ne*te*D)+.5,gt=Qe*Ye-Xe*Oe;b=(xe*Qe-Ae*Xe)/gt,O=(Ae*Ye-xe*Oe)/gt,f=ka(f-b,-Math.PI,Math.PI),g=ka(g-O,-NF,NF)}while((Math.abs(b)>_||Math.abs(O)>_)&&--m>0);return new Gn(Pa(f),Pa(g))}}class OF extends yy{constructor(s){super(s),this.center=s.center||[0,0],this.parallels=s.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(ba(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(s,u){const{scale:f,cosPhi:g}=this;return{x:ba(s)*g*f+.5,y:-Math.sin(ba(u))/g*f+.5,z:0}}unproject(s,u){const{scale:f,cosPhi:g}=this,m=-(u-.5)/f,_=ka(Pa((s-.5)/f)/g,-180,180),b=Math.asin(ka(m*g,-1,1)),O=ka(Pa(b),-85.051129,Bu);return new Gn(_,O)}}class jae extends PF{constructor(s){super(s),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(s,u,f){const g=Bn(s,u,f),m=Oi(_s(f));return ve.vec3.transformMat4(g,g,m),{x:g[0],y:g[1],z:g[2]}}locationPoint(s,u,f){const g=Vc(u.lat,u.lng),m=ve.vec3.normalize([],g),_=f?s._centerAltitude+f:s.elevation?s.elevation.getAtPointOrZero(s.locationCoordinate(u),s._centerAltitude):s._centerAltitude,b=Yo(1,0)*za*_;ve.vec3.scaleAndAdd(g,g,m,b);const O=ve.mat4.identity(new Float64Array(16));return ve.mat4.multiply(O,s.pixelMatrix,s.globeMatrix),ve.vec3.transformMat4(g,g,O),new It(g[0],g[1])}pixelsPerMeter(s,u){return Yo(1,0)*u}pixelSpaceConversion(s,u,f){const g=Yo(1,s)*u,m=gr(Yo(1,45)*u,g,f);return this.pixelsPerMeter(s,u)/m}createTileMatrix(s,u,f){const g=ms(_s(f.canonical));return ve.mat4.multiply(new Float64Array(16),s.globeMatrix,g)}createInversionMatrix(s,u){const{center:f}=s,g=Oi(_s(u));return ve.mat4.rotateY(g,g,ba(f.lng)),ve.mat4.rotateX(g,g,ba(f.lat)),ve.mat4.scale(g,g,[s._pixelsPerMercatorPixel,s._pixelsPerMercatorPixel,1]),Float32Array.from(g)}pointCoordinate(s,u,f,g){return An(s,u,f,!0)||new o(0,0)}pointCoordinate3D(s,u,f){const g=this.pointCoordinate(s,u,f,0);return[g.x,g.y,g.z]}isPointAboveHorizon(s,u){return!An(s,u.x,u.y,!1)}farthestPixelDistance(s){const u=function(g,m){const _=g.cameraToCenterDistance,b=g._centerAltitude*m,O=g._camera,D=g._camera.forward(),C=ve.vec3.add([],ve.vec3.scale([],D,-_),[0,0,b]),V=g.worldSize/(2*Math.PI),I=[0,0,-V],z=g.width/g.height,M=Math.tan(g.fovAboveCenter),B=ve.vec3.scale([],O.up(),M),J=ve.vec3.scale([],O.right(),M*z),te=ve.vec3.normalize([],ve.vec3.add([],ve.vec3.add([],D,B),J)),he=[];let de;if(new Or(C,te).closestPointOnSphere(I,V,he)){const ne=ve.vec3.add([],he,I),Ae=ve.vec3.sub([],ne,C);de=Math.cos(g.fovAboveCenter)*ve.vec3.length(Ae)}else{const ne=ve.vec3.sub([],C,I),Ae=ve.vec3.sub([],I,C);ve.vec3.normalize(Ae,Ae);const xe=ve.vec3.length(ne)-V;de=Math.sqrt(xe*(xe+2*V));const Oe=Math.acos(de/(V+xe))-Math.acos(ve.vec3.dot(D,Ae));de*=Math.cos(Oe)}return 1.01*de}(s,this.pixelsPerMeter(s.center.lat,s.worldSize)),f=Gl(s.zoom);if(f>0){const g=bF(s,Yo(1,s.center.lat)*s.worldSize),m=s.worldSize/(2*Math.PI),_=Math.max(s.width,s.height)/s.worldSize*Math.PI;return gr(u,g+m*(1-Math.cos(_)),Math.pow(f,10))}return u}upVector(s,u,f){return Bn(u,f,s,1)}upVectorScale(s){return{metersToTile:pn(fi(_s(s)))}}}function VF(h){const s=h.parallels,u=!!s&&Math.abs(s[0]+s[1])<.01;switch(h.name){case"mercator":return new PF(h);case"equirectangular":return new Fae(h);case"naturalEarth":return new Uae(h);case"equalEarth":return new Lae(h);case"winkelTripel":return new Bae(h);case"albers":return u?new OF(h):new Iae(h);case"lambertConformalConic":return u?new OF(h):new kae(h);case"globe":return new jae(h)}throw new Error(`Invalid projection name: ${h.name}`)}const Gae=Dh.VectorTileFeature.types,Zae=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function sS(h,s,u,f,g,m,_,b,O,D,C,V,I){const z=b?Math.min(gy,Math.round(b[0])):0,M=b?Math.min(gy,Math.round(b[1])):0;h.emplaceBack(s,u,Math.round(32*f),Math.round(32*g),m,_,(z<<1)+(O?1:0),M,16*D,16*C,256*V,256*I)}function oS(h,s,u){h.emplaceBack(s,u)}function lS(h,s,u,f,g,m,_){h.emplaceBack(s,u,f,g,m,_)}function uS(h,s,u,f,g){h.emplaceBack(s,u,f,g),h.emplaceBack(s,u,f,g),h.emplaceBack(s,u,f,g),h.emplaceBack(s,u,f,g)}function qae(h){for(const s of h.sections)if(Pi(s.text))return!0;return!1}class PE{constructor(s){this.layoutVertexArray=new bh,this.indexArray=new Ls,this.programConfigurations=s,this.segments=new ji,this.dynamicLayoutVertexArray=new id,this.opacityVertexArray=new pp,this.placedSymbolArray=new Rl,this.iconTransitioningVertexArray=new Kd,this.globeExtVertexArray=new nd,this.zOffsetVertexArray=new rd}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(s,u,f,g,m){this.isEmpty()||(f&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,XC.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,T0.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,Zae,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=s.createVertexBuffer(this.iconTransitioningVertexArray,w.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=s.createVertexBuffer(this.globeExtVertexArray,vE.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||m)&&(this.zOffsetVertexBuffer=s.createVertexBuffer(this.zOffsetVertexArray,p.members,!0)),this.opacityVertexBuffer.itemSize=1),(f||g)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}Pt(PE,"SymbolBuffers");class EE{constructor(s,u,f){this.layoutVertexArray=new s,this.layoutAttributes=u,this.indexArray=new f,this.segments=new ji,this.collisionVertexArray=new Ec,this.collisionVertexArrayExt=new id}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,P.members,!0),this.collisionVertexBufferExt=s.createVertexBuffer(this.collisionVertexArrayExt,U.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Pt(EE,"CollisionBuffers");class cS{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.lut=s.lut,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(_=>_.fqid),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ve.mat4.identity([]),this.placementViewportMatrix=ve.mat4.identity([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ua(this.zoom,u["text-size"]),this.iconSizeData=ua(this.zoom,u["icon-size"]);const f=this.layers[0].layout,g=f.get("symbol-sort-key"),m=f.get("symbol-z-order");this.canOverlap=f.get("text-allow-overlap")||f.get("icon-allow-overlap")||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=m!=="viewport-y"&&g.constantOr(1)!==void 0,this.sortFeaturesByY=(m==="viewport-y"||m==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=f.get("text-writing-mode").map(_=>th[_]),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=s.sourceID,this.projection=s.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=!1,this.elevationType="none",this.elevationStateComplete=!1,this.activeReplacements=[],this.replacementUpdateTime=0}createArrays(){this.text=new PE(new Nh(this.layers,{zoom:this.zoom,lut:this.lut},s=>s.startsWith("text")||s.startsWith("symbol"))),this.icon=new PE(new Nh(this.layers,{zoom:this.zoom,lut:this.lut},s=>s.startsWith("icon")||s.startsWith("symbol"))),this.glyphOffsetArray=new yA,this.lineVertexArray=new um,this.symbolInstances=new gA}calculateGlyphDependencies(s,u,f,g,m){for(const _ of s){const b=_.codePointAt(0);if(b===void 0)break;if(u[b]=!0,g&&m&&b<=65535){const O=an[_];O&&(u[O.charCodeAt(0)]=!0)}}}updateFootprints(s,u){}updateReplacement(s,u){if(u.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=u.updateTime;const f=u.getReplacementRegionsForTile(s.toUnwrapped(),!0);return!y0(this.activeReplacements,f)&&(this.activeReplacements=f,!0)}populate(s,u,f,g){const m=this.layers[0],_=m.layout,b=this.projection.name==="globe",O=_.get("text-font"),D=_.get("text-field"),C=_.get("icon-image"),[V,I]=_.get("icon-size-scale-range"),z=ka(u.scaleFactor||1,V,I),M=(D.value.kind!=="constant"||D.value.value instanceof ys&&!D.value.value.isEmpty()||D.value.value.toString().length>0)&&(O.value.kind!=="constant"||O.value.value.length>0),B=C.value.kind!=="constant"||!!C.value.value||Object.keys(C.parameters).length>0,J=_.get("symbol-sort-key");if(this.features=[],!M&&!B)return;const te=u.iconDependencies,he=u.glyphDependencies,de=u.availableImages,ne=new Pn(this.zoom);for(const{feature:Ae,id:xe,index:Oe,sourceLayerIndex:Qe}of s){const Ye=m._featureFilter.needGeometry,Xe=Y(Ae,Ye);if(!m._featureFilter.filter(ne,Xe,f))continue;if(Ye||(Xe.geometry=K(Ae,f,g)),b&&Ae.type!==1&&f.z<=5){const Ct=Xe.geometry,Dt=.98078528056,Nt=(jt,Lt)=>{const Ht=Bn(jt.x,jt.y,f,1),Aa=Bn(Lt.x,Lt.y,f,1);return ve.vec3.dot(Ht,Aa)<Dt};for(let jt=0;jt<Ct.length;jt++)Ct[jt]=S(Ct[jt],Nt)}let gt,et;if(M){const Ct=m.getValueAndResolveTokens("text-field",Xe,f,de),Dt=ys.factory(Ct);qae(Dt)&&(this.hasRTLText=!0),(!this.hasRTLText||wo()==="unavailable"||this.hasRTLText&&ps.isParsed())&&(gt=Ha(Dt,m,Xe))}if(B){const Ct=m.getValueAndResolveTokens("icon-image",Xe,f,de);et=Ct instanceof Vs?Ct:Vs.build(Ct)}if(!gt&&!et)continue;const _t=this.sortFeaturesByKey?J.evaluate(Xe,{},f):void 0,xt={id:xe,text:gt,icon:et,index:Oe,sourceLayerIndex:Qe,geometry:Xe.geometry,properties:Ae.properties,type:Gae[Ae.type],sortKey:_t};if(this.features.push(xt),et){const Ct=this.layers[0]._unevaluatedLayout._values,{iconPrimary:Dt,iconSecondary:Nt}=RF(et,this.iconSizeData,Ct["icon-size"],f,this.zoom,xt,this.pixelRatio,z),jt=Dt.id.toString();if(te.has(jt)?te.get(jt).push(Dt):te.set(jt,[Dt]),Nt){const Lt=Nt.id.toString();te.has(Lt)?te.get(Lt).push(Nt):te.set(Lt,[Nt])}}if(gt){const Ct=O.evaluate(Xe,{},f).join(","),Dt=_.get("text-rotation-alignment")==="map"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(th.vertical)>=0;for(const Nt of gt.sections)if(Nt.image){const jt=Nt.image.getPrimary().scaleSelf(this.pixelRatio),Lt=jt.id.toString(),Ht=te.get(Lt)||[];Ht.push(jt),te.set(Lt,Ht)}else{const jt=aa(gt.toString()),Lt=Nt.fontStack||Ct,Ht=he[Lt]=he[Lt]||{};this.calculateGlyphDependencies(Nt.text,Ht,Dt,this.allowVerticalPlacement,jt)}}}if(_.get("symbol-placement")==="line"&&(this.features=function(Ae){const xe={},Oe={},Qe=[];let Ye=0;function Xe(xt){Qe.push(Ae[xt]),Ye++}function gt(xt,Ct,Dt){const Nt=Oe[xt];return delete Oe[xt],Oe[Ct]=Nt,Qe[Nt].geometry[0].pop(),Qe[Nt].geometry[0]=Qe[Nt].geometry[0].concat(Dt[0]),Nt}function et(xt,Ct,Dt){const Nt=xe[Ct];return delete xe[Ct],xe[xt]=Nt,Qe[Nt].geometry[0].shift(),Qe[Nt].geometry[0]=Dt[0].concat(Qe[Nt].geometry[0]),Nt}function _t(xt,Ct,Dt){const Nt=Dt?Ct[0][Ct[0].length-1]:Ct[0][0];return`${xt}:${Nt.x}:${Nt.y}`}for(let xt=0;xt<Ae.length;xt++){const Ct=Ae[xt],Dt=Ct.geometry,Nt=Ct.text?Ct.text.toString():null;if(!Nt){Xe(xt);continue}const jt=_t(Nt,Dt),Lt=_t(Nt,Dt,!0);if(jt in Oe&&Lt in xe&&Oe[jt]!==xe[Lt]){const Ht=et(jt,Lt,Dt),Aa=gt(jt,Lt,Qe[Ht].geometry);delete xe[jt],delete Oe[Lt],Oe[_t(Nt,Qe[Aa].geometry,!0)]=Aa,Qe[Ht].geometry=null}else jt in Oe?gt(jt,Lt,Dt):Lt in xe?et(jt,Lt,Dt):(Xe(xt),xe[jt]=Ye-1,Oe[Lt]=Ye-1)}return Qe.filter(xt=>xt.geometry)}(this.features)),_.get("symbol-elevation-reference")==="hd-road-markup"){if(this.elevationType="road",u.elevationFeatures){!this.elevationFeatures&&u.elevationFeatures.length>0&&(this.elevationFeatures=[],this.elevationFeatureIdToIndex=new Map);for(const Ae of u.elevationFeatures)this.elevationFeatureIdToIndex.set(Ae.id,this.elevationFeatures.length),this.elevationFeatures.push(Ae)}}else _.get("symbol-z-elevate")&&(this.elevationType="offset");this.elevationType!=="none"&&(this.zOffsetBuffersNeedUpload=!0),this.sortFeaturesByKey&&this.features.sort((Ae,xe)=>Ae.sortKey-xe.sortKey)}update(s,u,f,g,m,_,b){this.text.programConfigurations.updatePaintArrays(s,u,m,f,g,_,b),this.icon.programConfigurations.updatePaintArrays(s,u,m,f,g,_,b)}updateRoadElevation(){if(this.elevationType!=="road"||!this.elevationFeatures||this.elevationStateComplete)return;this.elevationStateComplete=!0,this.hasAnyZOffset=!1;let s=!1;for(let u=0;u<this.symbolInstances.length;u++){const f=this.symbolInstances.get(u);if(f.elevationFeatureIndex===65535)continue;const g=this.elevationFeatures[f.elevationFeatureIndex];if(g){const m=.05+g.pointElevation(new It(f.tileAnchorX,f.tileAnchorY));f.zOffset!==m&&(s=!0,f.zOffset=m)}}s&&(this.zOffsetBuffersNeedUpload=!0,this.zOffsetSortDirty=!0)}updateZOffset(){const s=(m,_,b)=>{f+=_,f>m.length&&m.resize(f);for(let O=-_;O<0;O++)m.emplace(O+f,b)},u=(m,_,b)=>{g+=_,g>m.length&&m.resize(g);for(let O=-_;O<0;O++)m.emplace(O+g,b)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let f=0,g=0;for(let m=0;m<this.symbolInstances.length;m++){const _=this.symbolInstances.get(m),{numHorizontalGlyphVertices:b,numVerticalGlyphVertices:O,numIconVertices:D}=_,C=_.zOffset,V=D>0;if((b>0||O>0)&&(s(this.text.zOffsetVertexArray,b,C),s(this.text.zOffsetVertexArray,O,C)),V){const{placedIconSymbolIndex:I,verticalPlacedIconSymbolIndex:z}=_;I>=0&&u(this.icon.zOffsetVertexArray,D,C),z>=0&&u(this.icon.zOffsetVertexArray,_.numVerticalIconVertices,C)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=VF(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,u){const f=this.lineVertexArray.length;if(s.segment!==void 0)for(const{x:g,y:m}of u)this.lineVertexArray.emplaceBack(g,m);return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(s,u,f,g,m,_,b,O,D,C,V,I,z,M,B,J){const te=s.indexArray,he=s.layoutVertexArray,de=s.globeExtVertexArray,ne=s.segments.prepareSegment(4*u.length,he,te,this.canOverlap?_.sortKey:void 0),Ae=this.glyphOffsetArray.length,xe=ne.vertexLength,Oe=this.allowVerticalPlacement&&b===th.vertical?Math.PI/2:0,Qe=_.text&&_.text.sections;for(let Xe=0;Xe<u.length;Xe++){const{tl:gt,tr:et,bl:_t,br:xt,texPrimary:Ct,texSecondary:Dt,pixelOffsetTL:Nt,pixelOffsetBR:jt,minFontScaleX:Lt,minFontScaleY:Ht,glyphOffset:Aa,isSDF:ma,sectionIndex:er}=u[Xe],Oa=ne.vertexLength,Da=Aa[1];if(sS(he,D.x,D.y,gt.x,Da+gt.y,Ct.x,Ct.y,f,ma,Nt.x,Nt.y,Lt,Ht),sS(he,D.x,D.y,et.x,Da+et.y,Ct.x+Ct.w,Ct.y,f,ma,jt.x,Nt.y,Lt,Ht),sS(he,D.x,D.y,_t.x,Da+_t.y,Ct.x,Ct.y+Ct.h,f,ma,Nt.x,jt.y,Lt,Ht),sS(he,D.x,D.y,xt.x,Da+xt.y,Ct.x+Ct.w,Ct.y+Ct.h,f,ma,jt.x,jt.y,Lt,Ht),O){const{x:Ra,y:Rr,z:Xa}=O.anchor,[dr,Lr,sn]=O.up;lS(de,Ra,Rr,Xa,dr,Lr,sn),lS(de,Ra,Rr,Xa,dr,Lr,sn),lS(de,Ra,Rr,Xa,dr,Lr,sn),lS(de,Ra,Rr,Xa,dr,Lr,sn),uS(s.dynamicLayoutVertexArray,Ra,Rr,Xa,Oe)}else uS(s.dynamicLayoutVertexArray,D.x,D.y,D.z,Oe);if(J){const Ra=Dt||Ct;oS(s.iconTransitioningVertexArray,Ra.x,Ra.y),oS(s.iconTransitioningVertexArray,Ra.x+Ra.w,Ra.y),oS(s.iconTransitioningVertexArray,Ra.x,Ra.y+Ra.h),oS(s.iconTransitioningVertexArray,Ra.x+Ra.w,Ra.y+Ra.h)}te.emplaceBack(Oa,Oa+1,Oa+2),te.emplaceBack(Oa+1,Oa+2,Oa+3),ne.vertexLength+=4,ne.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Aa[0]),Xe!==u.length-1&&er===u[Xe+1].sectionIndex||s.programConfigurations.populatePaintArrays(he.length,_,_.index,{},z,M,B,Qe&&Qe[er])}const Ye=O?O.anchor:D;s.placedSymbolArray.emplaceBack(Ye.x,Ye.y,Ye.z,D.x,D.y,Ae,this.glyphOffsetArray.length-Ae,xe,C,V,D.segment,f?f[0]:0,f?f[1]:0,g[0],g[1],b,0,!1,0,I,0)}_commitLayoutVertex(s,u,f,g,m,_,b){s.emplaceBack(u,f,g,m,_,Math.round(b.x),Math.round(b.y))}_addCollisionDebugVertices(s,u,f,g,m,_,b){const O=f.segments.prepareSegment(4,f.layoutVertexArray,f.indexArray),D=O.vertexLength,C=b.tileAnchorX,V=b.tileAnchorY;for(let z=0;z<4;z++)f.collisionVertexArray.emplaceBack(0,0,0,0,0,0);this._commitDebugCollisionVertexUpdate(f.collisionVertexArrayExt,u,s.padding,b.zOffset),this._commitLayoutVertex(f.layoutVertexArray,g,m,_,C,V,new It(s.x1,s.y1)),this._commitLayoutVertex(f.layoutVertexArray,g,m,_,C,V,new It(s.x2,s.y1)),this._commitLayoutVertex(f.layoutVertexArray,g,m,_,C,V,new It(s.x2,s.y2)),this._commitLayoutVertex(f.layoutVertexArray,g,m,_,C,V,new It(s.x1,s.y2)),O.vertexLength+=4;const I=f.indexArray;I.emplaceBack(D,D+1),I.emplaceBack(D+1,D+2),I.emplaceBack(D+2,D+3),I.emplaceBack(D+3,D),O.primitiveLength+=4}_addTextDebugCollisionBoxes(s,u,f,g,m,_){for(let b=g;b<m;b++){const O=f.get(b),D=this.getSymbolInstanceTextSize(s,_,u,b);this._addCollisionDebugVertices(O,D,this.textCollisionBox,O.projectedAnchorX,O.projectedAnchorY,O.projectedAnchorZ,_)}}_addIconDebugCollisionBoxes(s,u,f,g,m,_){for(let b=g;b<m;b++){const O=f.get(b),D=this.getSymbolInstanceIconSize(s,u,_.placedIconSymbolIndex);this._addCollisionDebugVertices(O,D,this.iconCollisionBox,O.projectedAnchorX,O.projectedAnchorY,O.projectedAnchorZ,_)}}generateCollisionDebugBuffers(s,u,f){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new EE(Pc,X.members,Kd),this.iconCollisionBox=new EE(Pc,X.members,Kd);const g=sr(this.iconSizeData,s),m=sr(this.textSizeData,s,f);for(let _=0;_<this.symbolInstances.length;_++){const b=this.symbolInstances.get(_);this._addTextDebugCollisionBoxes(m,s,u,b.textBoxStartIndex,b.textBoxEndIndex,b),this._addTextDebugCollisionBoxes(m,s,u,b.verticalTextBoxStartIndex,b.verticalTextBoxEndIndex,b),this._addIconDebugCollisionBoxes(g,s,u,b.iconBoxStartIndex,b.iconBoxEndIndex,b),this._addIconDebugCollisionBoxes(g,s,u,b.verticalIconBoxStartIndex,b.verticalIconBoxEndIndex,b)}}getSymbolInstanceTextSize(s,u,f,g){const m=this.text.placedSymbolArray.get(u.rightJustifiedTextSymbolIndex>=0?u.rightJustifiedTextSymbolIndex:u.centerJustifiedTextSymbolIndex>=0?u.centerJustifiedTextSymbolIndex:u.leftJustifiedTextSymbolIndex>=0?u.leftJustifiedTextSymbolIndex:u.verticalPlacedTextSymbolIndex>=0?u.verticalPlacedTextSymbolIndex:g),_=qa(this.textSizeData,s,m)/Ze;return this.tilePixelRatio*_}getSymbolInstanceIconSize(s,u,f){const g=this.icon.placedSymbolArray.get(f),m=qa(this.iconSizeData,s,g);return this.tilePixelRatio*m}_commitDebugCollisionVertexUpdate(s,u,f,g){s.emplaceBack(u,-f,-f,g),s.emplaceBack(u,f,-f,g),s.emplaceBack(u,f,f,g),s.emplaceBack(u,-f,f,g)}_updateTextDebugCollisionBoxes(s,u,f,g,m,_,b){for(let O=g;O<m;O++){const D=f.get(O),C=this.getSymbolInstanceTextSize(s,_,u,O);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,C,D.padding,_.zOffset)}}_updateIconDebugCollisionBoxes(s,u,f,g,m,_,b){for(let O=g;O<m;O++){const D=f.get(O),C=this.getSymbolInstanceIconSize(s,u,_.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,C,D.padding,_.zOffset)}}updateCollisionDebugBuffers(s,u,f,g){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const m=sr(this.iconSizeData,s,g),_=sr(this.textSizeData,s,f);for(let b=0;b<this.symbolInstances.length;b++){const O=this.symbolInstances.get(b);this._updateTextDebugCollisionBoxes(_,s,u,O.textBoxStartIndex,O.textBoxEndIndex,O,f),this._updateTextDebugCollisionBoxes(_,s,u,O.verticalTextBoxStartIndex,O.verticalTextBoxEndIndex,O,f),this._updateIconDebugCollisionBoxes(m,s,u,O.iconBoxStartIndex,O.iconBoxEndIndex,O,g),this._updateIconDebugCollisionBoxes(m,s,u,O.verticalIconBoxStartIndex,O.verticalIconBoxEndIndex,O,g)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(s,u,f,g,m,_,b,O,D){const C={};if(u<f){const{x1:V,y1:I,x2:z,y2:M,padding:B,projectedAnchorX:J,projectedAnchorY:te,projectedAnchorZ:he,tileAnchorX:de,tileAnchorY:ne,featureIndex:Ae}=s.get(u);C.textBox={x1:V,y1:I,x2:z,y2:M,padding:B,projectedAnchorX:J,projectedAnchorY:te,projectedAnchorZ:he,tileAnchorX:de,tileAnchorY:ne},C.textFeatureIndex=Ae}if(g<m){const{x1:V,y1:I,x2:z,y2:M,padding:B,projectedAnchorX:J,projectedAnchorY:te,projectedAnchorZ:he,tileAnchorX:de,tileAnchorY:ne,featureIndex:Ae}=s.get(g);C.verticalTextBox={x1:V,y1:I,x2:z,y2:M,padding:B,projectedAnchorX:J,projectedAnchorY:te,projectedAnchorZ:he,tileAnchorX:de,tileAnchorY:ne},C.verticalTextFeatureIndex=Ae}if(_<b){const{x1:V,y1:I,x2:z,y2:M,padding:B,projectedAnchorX:J,projectedAnchorY:te,projectedAnchorZ:he,tileAnchorX:de,tileAnchorY:ne,featureIndex:Ae}=s.get(_);C.iconBox={x1:V,y1:I,x2:z,y2:M,padding:B,projectedAnchorX:J,projectedAnchorY:te,projectedAnchorZ:he,tileAnchorX:de,tileAnchorY:ne},C.iconFeatureIndex=Ae}if(O<D){const{x1:V,y1:I,x2:z,y2:M,padding:B,projectedAnchorX:J,projectedAnchorY:te,projectedAnchorZ:he,tileAnchorX:de,tileAnchorY:ne,featureIndex:Ae}=s.get(O);C.verticalIconBox={x1:V,y1:I,x2:z,y2:M,padding:B,projectedAnchorX:J,projectedAnchorY:te,projectedAnchorZ:he,tileAnchorX:de,tileAnchorY:ne},C.verticalIconFeatureIndex=Ae}return C}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const f=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(s,u){const f=s.placedSymbolArray.get(u),g=f.vertexStartIndex+4*f.numGlyphs;for(let m=f.vertexStartIndex;m<g;m+=4)s.indexArray.emplaceBack(m,m+1,m+2),s.indexArray.emplaceBack(m+1,m+2,m+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(s),f=Math.cos(s),g=[],m=[],_=[];for(let b=0;b<this.symbolInstances.length;++b){_.push(b);const O=this.symbolInstances.get(b);g.push(0|Math.round(u*O.tileAnchorX+f*O.tileAnchorY)),m.push(O.featureIndex)}return _.sort((b,O)=>g[b]-g[O]||m[O]-m[b]),_}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let s=0;s<this.symbolInstances.length;++s)this.symbolInstanceIndexesSortedZOffset.push(s)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((s,u)=>this.symbolInstances.get(u).zOffset-this.symbolInstances.get(s).zOffset)}addToSortKeyRanges(s,u){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===u?f.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const f=this.symbolInstances.get(u);this.featureSortOrder.push(f.featureIndex);const{rightJustifiedTextSymbolIndex:g,centerJustifiedTextSymbolIndex:m,leftJustifiedTextSymbolIndex:_,verticalPlacedTextSymbolIndex:b,placedIconSymbolIndex:O,verticalPlacedIconSymbolIndex:D}=f;g>=0&&this.addIndicesForPlacedSymbol(this.text,g),m>=0&&m!==g&&this.addIndicesForPlacedSymbol(this.text,m),_>=0&&_!==m&&_!==g&&this.addIndicesForPlacedSymbol(this.text,_),b>=0&&this.addIndicesForPlacedSymbol(this.text,b),O>=0&&this.addIndicesForPlacedSymbol(this.icon,O),D>=0&&this.addIndicesForPlacedSymbol(this.icon,D)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let zF,DF,NE;Pt(cS,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),cS.addDynamicAttributes=uS;class MF{constructor(s){this.type=s.property.overrides?s.property.overrides.runtimeType:gc,this.defaultValue=s}evaluate(s){if(s.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(s.formattedSection))return u.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Pt(MF,"FormatSectionOverride",{omit:["defaultValue"]});const OE=()=>NE||(NE={layout:zF||(zF=new Bi({"symbol-placement":new Ea(qt.layout_symbol["symbol-placement"]),"symbol-spacing":new Ea(qt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ea(qt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ba(qt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ea(qt.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new Ea(qt.layout_symbol["symbol-z-elevate"]),"symbol-elevation-reference":new Ea(qt.layout_symbol["symbol-elevation-reference"]),"icon-allow-overlap":new Ea(qt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ea(qt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ea(qt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ea(qt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ba(qt.layout_symbol["icon-size"]),"icon-size-scale-range":new Ea(qt.layout_symbol["icon-size-scale-range"]),"icon-text-fit":new Ba(qt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ba(qt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ba(qt.layout_symbol["icon-image"]),"icon-rotate":new Ba(qt.layout_symbol["icon-rotate"]),"icon-padding":new Ea(qt.layout_symbol["icon-padding"]),"icon-keep-upright":new Ea(qt.layout_symbol["icon-keep-upright"]),"icon-offset":new Ba(qt.layout_symbol["icon-offset"]),"icon-anchor":new Ba(qt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ea(qt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ea(qt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ea(qt.layout_symbol["text-rotation-alignment"]),"text-field":new Ba(qt.layout_symbol["text-field"]),"text-font":new Ba(qt.layout_symbol["text-font"]),"text-size":new Ba(qt.layout_symbol["text-size"]),"text-size-scale-range":new Ea(qt.layout_symbol["text-size-scale-range"]),"text-max-width":new Ba(qt.layout_symbol["text-max-width"]),"text-line-height":new Ba(qt.layout_symbol["text-line-height"]),"text-letter-spacing":new Ba(qt.layout_symbol["text-letter-spacing"]),"text-justify":new Ba(qt.layout_symbol["text-justify"]),"text-radial-offset":new Ba(qt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ea(qt.layout_symbol["text-variable-anchor"]),"text-anchor":new Ba(qt.layout_symbol["text-anchor"]),"text-max-angle":new Ea(qt.layout_symbol["text-max-angle"]),"text-writing-mode":new Ea(qt.layout_symbol["text-writing-mode"]),"text-rotate":new Ba(qt.layout_symbol["text-rotate"]),"text-padding":new Ea(qt.layout_symbol["text-padding"]),"text-keep-upright":new Ea(qt.layout_symbol["text-keep-upright"]),"text-transform":new Ba(qt.layout_symbol["text-transform"]),"text-offset":new Ba(qt.layout_symbol["text-offset"]),"text-allow-overlap":new Ea(qt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ea(qt.layout_symbol["text-ignore-placement"]),"text-optional":new Ea(qt.layout_symbol["text-optional"]),visibility:new Ea(qt.layout_symbol.visibility)})),paint:DF||(DF=new Bi({"icon-opacity":new Ba(qt.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new Ba(qt.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new Ba(qt.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new Ba(qt.paint_symbol["text-emissive-strength"]),"icon-color":new Ba(qt.paint_symbol["icon-color"]),"icon-halo-color":new Ba(qt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ba(qt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ba(qt.paint_symbol["icon-halo-blur"]),"icon-translate":new Ea(qt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ea(qt.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new Ba(qt.paint_symbol["icon-image-cross-fade"]),"text-opacity":new Ba(qt.paint_symbol["text-opacity"]),"text-occlusion-opacity":new Ba(qt.paint_symbol["text-occlusion-opacity"]),"text-color":new Ba(qt.paint_symbol["text-color"],{runtimeType:Ws,getOverride:h=>h.textColor,hasOverride:h=>!!h.textColor}),"text-halo-color":new Ba(qt.paint_symbol["text-halo-color"]),"text-halo-width":new Ba(qt.paint_symbol["text-halo-width"]),"text-halo-blur":new Ba(qt.paint_symbol["text-halo-blur"]),"text-translate":new Ea(qt.paint_symbol["text-translate"]),"text-translate-anchor":new Ea(qt.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new Ea(qt.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new Ea(qt.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new Ea(qt.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new Ea(qt.paint_symbol["icon-color-brightness-max"]),"symbol-z-offset":new Ba(qt.paint_symbol["symbol-z-offset"]),"icon-color-use-theme":new Ba({type:"string",default:"default","property-type":"data-driven"}),"icon-halo-color-use-theme":new Ba({type:"string",default:"default","property-type":"data-driven"}),"text-color-use-theme":new Ba({type:"string",default:"default","property-type":"data-driven"}),"text-halo-color-use-theme":new Ba({type:"string",default:"default","property-type":"data-driven"})}))},NE);class dS extends uo{constructor(s,u,f,g){super(s,OE(),u,f,g),this._colorAdjustmentMatrix=ve.mat4.identity([]),this.hasInitialOcclusionOpacityProperties=s.paint!==void 0&&("icon-occlusion-opacity"in s.paint||"text-occlusion-opacity"in s.paint)}recalculate(s,u){super.recalculate(s,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const f=this.layout.get("text-writing-mode");if(f){const g=[];for(const m of f)g.indexOf(m)<0&&g.push(m);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(s,u,f,g){return this._saturation===s&&this._contrast===u&&this._brightnessMin===f&&this._brightnessMax===g||(this._colorAdjustmentMatrix=function(m,_,b,O){m=Zt(m),_=Rn(_);const D=ve.mat4.create(),C=m/3,V=1-2*C,I=[V,C,C,0,C,V,C,0,C,C,V,0,0,0,0,1],z=.5-.5*_,M=O-b;return ve.mat4.multiply(D,[M,0,0,0,0,M,0,0,0,0,M,0,b,b,b,1],[_,0,0,0,0,_,0,0,0,0,_,0,z,z,z,1]),ve.mat4.multiply(D,D,I),D}(s,u,f,g),this._saturation=s,this._contrast=u,this._brightnessMin=f,this._brightnessMax=g),this._colorAdjustmentMatrix}getValueAndResolveTokens(s,u,f,g){const m=this.layout.get(s).evaluate(u,{},f,g),_=this._unevaluatedLayout._values[s];return _.isDataDriven()||Yh(_.value)||!m?m:function(b,O){return O.replace(/{([^{}]+)}/g,(D,C)=>C in b?String(b[C]):"")}(u.properties,m)}createBucket(s){return new cS(s)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const s of OE().paint.overridableProperties){if(!dS.hasPaintOverride(this.layout,s))continue;const u=this.paint.get(s),f=new MF(u),g=new lo(f,u.property.specification,this.scope,this.options);let m=null;m=u.value.kind==="constant"||u.value.kind==="source"?new Q("source",g):new ye("composite",g,u.value.zoomStops,u.value._interpolationType),this.paint._values[s]=new Ul(u.property,m,u.parameters)}}_handleOverridablePaintPropertyUpdate(s,u,f){return!(!this.layout||u.isDataDriven()||f.isDataDriven())&&dS.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,u){const f=s.get("text-field"),g=OE().paint.properties[u];let m=!1;const _=b=>{for(const O of b)if(g.overrides&&g.overrides.hasOverride(O))return void(m=!0)};if(f.value.kind==="constant"&&f.value.value instanceof ys)_(f.value.value.sections);else if(f.value.kind==="source"){const b=D=>{m||(D instanceof eu&&Ji(D.value)===Tu?_(D.value.sections):D instanceof Vd?_(D.sections):D.eachChild(b))},O=f.value;O._styleExpression&&b(O._styleExpression.expression)}return m}getProgramIds(){return["symbol"]}getDefaultProgramParams(s,u,f){return{config:new nc(this,{zoom:u,lut:f}),overrideFog:!1}}}let IF,LF,FF,kF;var VE=Mn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);function zE(h){switch(h){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.RGBA;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.DEPTH_COMPONENT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.DEPTH_STENCIL;case WebGL2RenderingContext.R8:case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.RED}}function DE(h){switch(h){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.UNSIGNED_SHORT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.UNSIGNED_INT_24_8;case WebGL2RenderingContext.R8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.FLOAT}}class ME{constructor(s,u,f,g){this.context=s,this.format=f,this.useMipmap=g&&g.useMipmap,this.texture=s.gl.createTexture(),this.update(u,{premultiply:g&&g.premultiply})}update(s,u){const f=s&&s instanceof HTMLVideoElement&&s.width===0?s.videoWidth:s.width,g=s&&s instanceof HTMLVideoElement&&s.height===0?s.videoHeight:s.height,{context:m}=this,{gl:_}=m,{x:b,y:O}=u&&u.position?u.position:{x:0,y:0},D=b+f,C=O+g;!this.size||this.size[0]===D&&this.size[1]===C||(_.bindTexture(_.TEXTURE_2D,null),_.deleteTexture(this.texture),this.texture=_.createTexture(),this.size=null),_.bindTexture(_.TEXTURE_2D,this.texture),m.pixelStoreUnpackFlipY.set(!1),m.pixelStoreUnpack.set(1),m.pixelStoreUnpackPremultiplyAlpha.set(this.format===_.RGBA8&&(!u||u.premultiply!==!1));const V=s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||ImageBitmap&&s instanceof ImageBitmap;if(!this.size&&D>0&&C>0){const I=this.useMipmap?Math.floor(Math.log2(Math.max(D,C)))+1:1;_.texStorage2D(_.TEXTURE_2D,I,this.format,D,C),this.size=[D,C]}if(this.size)if(V)_.texSubImage2D(_.TEXTURE_2D,0,b,O,zE(this.format),DE(this.format),s);else{const I=s.data;I&&_.texSubImage2D(_.TEXTURE_2D,0,b,O,f,g,zE(this.format),DE(this.format),I)}this.useMipmap&&_.generateMipmap(_.TEXTURE_2D)}bind(s,u,f=!1){const{context:g}=this,{gl:m}=g;m.bindTexture(m.TEXTURE_2D,this.texture),s!==this.minFilter&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,s),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,this.useMipmap&&!f?s===m.NEAREST?m.NEAREST_MIPMAP_NEAREST:m.LINEAR_MIPMAP_LINEAR:s),this.minFilter=s),u!==this.wrapS&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,u),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,u),this.wrapS=u)}bindExtraParam(s,u,f,g){const{context:m}=this,{gl:_}=m;_.bindTexture(_.TEXTURE_2D,this.texture),u!==this.magFilter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,u),this.magFilter=u),s!==this.minFilter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,this.useMipmap?s===_.NEAREST?_.NEAREST_MIPMAP_NEAREST:_.LINEAR_MIPMAP_LINEAR:s),this.minFilter=s),f!==this.wrapS&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,f),this.wrapS=f),g!==this.wrapT&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,g),this.wrapT=g)}destroy(){const{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}class hS{constructor(s,u){this.context=s,this.texture=u}bind(s,u){const{context:f}=this,{gl:g}=f;g.bindTexture(g.TEXTURE_2D,this.texture),s!==this.minFilter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,s),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,s),this.minFilter=s),u!==this.wrapS&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,u),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,u),this.wrapS=u)}}function fS(h,s,u,f,g,m,_,b){const O=[h,s,1,u,f,1,g,m,1],D=[_,b,1],C=ve.mat3.adjoint([],O),[V,I,z]=ve.vec3.transformMat3(D,D,C);return ve.mat3.multiply(O,O,[V,0,0,0,I,0,0,0,z])}function UF(h,s,u,f,g,m,_,b){const O=function(D,C,V,I,z,M,B,J){const te=fS(0,0,1,0,1,1,0,1),he=fS(D,C,V,I,z,M,B,J),de=ve.mat3.adjoint([],te);return ve.mat3.multiply(he,he,de)}(h,s,u,f,g,m,_,b);return[O[2]/O[8]/za,O[5]/O[8]/za]}function pS(h){return[h[0],Math.min(Math.max(h[1],-85.051129),Bu)]}class BF extends Ql{constructor(s,u,f,g){super(),this.id=s,this.dispatcher=f,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(g),this.options=u,this._dirty=!1}load(s,u){if(this._loaded=u||!1,this.fire(new Zo("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return s&&(this.coordinates=s),this._loaded=!0,void this._finishLoading();this._imageRequest=fh(this.map._requestManager.transformRequest(this.url,Ns.Image),(f,g)=>{this._imageRequest=null,this._loaded=!0,f?this.fire(new Ed(f)):g&&(this.image=g instanceof HTMLImageElement?Kt.getImageData(g):g,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,s&&(this.coordinates=s),this._finishLoading())})}loaded(){return this._loaded}updateImage(s){return s.url?(this._imageRequest&&s.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=s.url,this.load(s.coordinates,this._loaded),this):this}setTexture(s){if(!(s.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new hS(this.map.painter.context,s.handle),this.width=s.dimensions[0],this.height=s.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new Zo("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(s){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof hS||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(s){if(this.coordinates=s,this._boundsArray=void 0,this._unsupportedCoords=!1,!s.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let u=s[0][1],f=s[0][1];for(const m of s)m[1]>f&&(f=m[1]),m[1]<u&&(u=m[1]);const g=(f+u)/2;if(g>Bu?this.onNorthPole=!0:g<-85.051129&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const m=s.map(o.fromLngLat);this.tileID=function(_){let b=1/0,O=1/0,D=-1/0,C=-1/0;for(const B of _)b=Math.min(b,B.x),O=Math.min(O,B.y),D=Math.max(D,B.x),C=Math.max(C,B.y);const V=Math.max(D-b,C-O),I=Math.max(0,Math.floor(-Math.log(V)/Math.LN2)),z=Math.pow(2,I);let M=Math.floor((b+D)/2*z);return M>1&&(M-=1),new da(I,M,Math.floor((O+C)/2*z))}(m),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new Zo("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(s){for(const te in this.tiles){const he=this.tiles[te];he.state!=="loaded"&&(he.state="loaded",he.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const u=mw(new da(0,0,0),this.map.transform.projection),f=[u.projection.project(this.coordinates[0][0],this.coordinates[0][1]),u.projection.project(this.coordinates[1][0],this.coordinates[1][1]),u.projection.project(this.coordinates[2][0],this.coordinates[2][1]),u.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(te){const he=te[1].x-te[0].x,de=te[1].y-te[0].y,ne=te[2].x-te[1].x,Ae=te[2].y-te[1].y,xe=te[3].x-te[2].x,Oe=te[3].y-te[2].y,Qe=te[0].x-te[3].x,Ye=te[0].y-te[3].y,Xe=he*Ae-ne*de,gt=ne*Oe-xe*Ae,et=xe*Ye-Qe*Oe,_t=Qe*de-he*Ye;return Xe>0&&gt>0&&et>0&&_t>0||Xe<0&&gt<0&&et<0&&_t<0}(f))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const g=mw(this.tileID,this.map.transform.projection),[m,_,b,O]=this.coordinates.map(te=>{const he=g.projection.project(te[0],te[1]);return xF(g,he)._round()});this.perspectiveTransform=UF(m.x,m.y,_.x,_.y,b.x,b.y,O.x,O.y);const D=this._boundsArray=new Lu;D.emplaceBack(m.x,m.y,0,0),D.emplaceBack(_.x,_.y,za,0),D.emplaceBack(O.x,O.y,0,za),D.emplaceBack(b.x,b.y,za,za),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=s.createVertexBuffer(D,VE.members),this.boundsSegments=ji.simpleSegment(0,0,4,2);const C=[],V=[pS((I=this.coordinates)[0]),pS(I[1]),pS(I[2]),pS(I[3])];var I;const[z,M,B,J]=function(te){let he=te[0][0],de=he,ne=te[0][1],Ae=ne;for(let xe=1;xe<te.length;xe++)te[xe][0]<he?he=te[xe][0]:te[xe][0]>de&&(de=te[xe][0]),te[xe][1]<ne?ne=te[xe][1]:te[xe][1]>Ae&&(Ae=te[xe][1]);return[he,ne,de-he,Ae-ne]}(V);{const te=new Lu,[he,de,ne,Ae]=function(Nt){let jt=Nt[0].x,Lt=jt,Ht=Nt[0].y,Aa=Ht;for(let ma=1;ma<Nt.length;ma++)Nt[ma].x<jt?jt=Nt[ma].x:Nt[ma].x>Lt&&(Lt=Nt[ma].x),Nt[ma].y<Ht?Ht=Nt[ma].y:Nt[ma].y>Aa&&(Aa=Nt[ma].y);return[jt,Ht,Lt-jt,Aa-Ht]}(f),xe=Nt=>[(Nt.x-he)/ne,(Nt.y-de)/Ae],[Oe,Qe,Ye,Xe]=f.map(xe),gt=function(Nt,jt,Lt,Ht,Aa,ma,er,Oa){const Da=fS(0,0,1,0,1,1,0,1),Ra=fS(Nt,jt,Lt,Ht,Aa,ma,er,Oa),Rr=ve.mat3.adjoint([],Ra);return ve.mat3.multiply(Da,Da,Rr)}(Oe[0],Oe[1],Qe[0],Qe[1],Ye[0],Ye[1],Xe[0],Xe[1]);this.elevatedGlobePerspectiveTransform=UF(Oe[0],Oe[1],Qe[0],Qe[1],Ye[0],Ye[1],Xe[0],Xe[1]);const et=(Nt,jt)=>{C.push(Nt.lng);const Lt=Math.round((Nt.lng-z)/B*za),Ht=Math.round((Nt.lat-M)/J*za),Aa=xe(jt),ma=ve.vec3.transformMat3([],[Aa[0],Aa[1],1],gt),er=Math.round(ma[0]/ma[2]*za),Oa=Math.round(ma[1]/ma[2]*za);te.emplaceBack(Lt,Ht,er,Oa)},_t=f[3].x-f[0].x,xt=f[3].y-f[0].y,Ct=f[2].x-f[1].x,Dt=f[2].y-f[1].y;for(let Nt=0;Nt<65;Nt++){const jt=Nt/64,Lt=[f[0].x+jt*_t,f[0].y+jt*xt],Ht=[f[1].x+jt*Ct,f[1].y+jt*Dt],Aa=Ht[0]-Lt[0],ma=Ht[1]-Lt[1];for(let er=0;er<65;er++){const Oa=er/64,Da={x:Lt[0]+Aa*Oa,y:Lt[1]+ma*Oa};et(u.projection.unproject(Da.x,Da.y),Da)}}this.elevatedGlobeVertexBuffer=s.createVertexBuffer(te,VE.members)}{this.maxLongitudeTriangleSize=0;let te=[],he=new Ls;const de=(ne,Ae,xe)=>{he.emplaceBack(ne,Ae,xe);const Oe=C[ne],Qe=C[Ae],Ye=C[xe],Xe=Math.min(Math.min(Oe,Qe),Ye),gt=Math.max(Math.max(Oe,Qe),Ye)-Xe;gt>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=gt),te.push(Xe+gt/2)};for(let ne=0;ne<64;ne++)for(let Ae=0;Ae<64;Ae++){const xe=65*ne+Ae,Oe=xe+1,Qe=xe+65,Ye=Qe+1;de(xe,Qe,Oe),de(Oe,Qe,Ye)}[te,he]=function(ne,Ae){const xe=Array.from({length:ne.length},(Ye,Xe)=>Xe);xe.sort((Ye,Xe)=>ne[Ye]-ne[Xe]);const Oe=[],Qe=new Ls;for(let Ye=0;Ye<xe.length;Ye++){const Xe=xe[Ye];Oe.push(ne[Xe]);const gt=3*Xe,et=gt+1;Qe.emplaceBack(Ae.uint16[gt],Ae.uint16[et],Ae.uint16[et+1])}return[Oe,Qe]}(te,he),this.elevatedGlobeTrianglesCenterLongitudes=te,this.elevatedGlobeIndexBuffer=s.createIndexBuffer(he)}this.elevatedGlobeSegments=ji.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,B/za,0,J/za,0,0,M,z,0])}prepare(){const s=Object.keys(this.tiles).length!==0;if(this.tileID&&!s)return;const u=this.map.painter.context,f=u.gl;!this._dirty||this.texture instanceof hS||(this.texture?this.texture.update(this.image):(this.texture=new ME(u,this.image,f.RGBA8),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE)),this._dirty=!1),s&&this._prepareData(u)}loadTile(s,u){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={},u(null)):(s.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(s){const u=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!u)return null;const f=this.elevatedGlobeTrianglesCenterLongitudes;let g=(m=s+180)+360*Math.round((f[0]-m)/360);var m;const _=new ji,b=(V,I)=>{_.segments.push({vertexOffset:0,primitiveOffset:V,vertexLength:u.segments[0].vertexLength,primitiveLength:I,sortKey:void 0,vaos:{}})},O=.51*this.maxLongitudeTriangleSize;if(Math.abs(f[0]-g)<=O){const V=ti(f,0,f.length,g+O);return V===f.length||b(V,Kr(f,V+1,f.length,g+360-O)-V),_}g<f[0]&&(g+=360);const D=Kr(f,0,f.length,g-O);if(D===f.length)return b(0,f.length),_;b(0,D-0);const C=ti(f,D+1,f.length,g+O);return C!==f.length&&b(C,f.length-C),_}}const Hae=(Math.pow(256,2)-1)/16907520;class jF extends uo{constructor(s,u,f,g){super(s,{layout:FF||(FF=new Bi({visibility:new Ea(qt.layout_raster.visibility)})),paint:kF||(kF=new Bi({"raster-opacity":new Ea(qt.paint_raster["raster-opacity"]),"raster-color":new rs(qt.paint_raster["raster-color"]),"raster-color-mix":new Ea(qt.paint_raster["raster-color-mix"]),"raster-color-range":new Ea(qt.paint_raster["raster-color-range"]),"raster-hue-rotate":new Ea(qt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ea(qt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ea(qt.paint_raster["raster-brightness-max"]),"raster-saturation":new Ea(qt.paint_raster["raster-saturation"]),"raster-contrast":new Ea(qt.paint_raster["raster-contrast"]),"raster-resampling":new Ea(qt.paint_raster["raster-resampling"]),"raster-fade-duration":new Ea(qt.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new Ea(qt.paint_raster["raster-emissive-strength"]),"raster-array-band":new Ea(qt.paint_raster["raster-array-band"]),"raster-elevation":new Ea(qt.paint_raster["raster-elevation"]),"raster-color-use-theme":new Ba({type:"string",default:"default","property-type":"data-driven"})}))},u,f,g),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(s){return!(s&&s._source instanceof BF&&(s._source.onNorthPole||s._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(s){s!=="raster-color"&&s!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(s){if(!this.hasColorMap()||!this._curRampRange)return;const u=this._transitionablePaint._values["raster-color"].value.expression,[f,g]=s||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(f)&&isNaN(g)||f===this._curRampRange[0]&&g===this._curRampRange[1]||(this.colorRamp=ay({expression:u,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:f,end:g}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[f,g])}}let GF,ZF,qF,HF,$F;class KF extends uo{constructor(s,u,f,g){super(s,{layout:GF||(GF=new Bi({visibility:new Ea(qt["layout_raster-particle"].visibility)})),paint:ZF||(ZF=new Bi({"raster-particle-array-band":new Ea(qt["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new Ea(qt["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new rs(qt["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new Ea(qt["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new Ea(qt["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new Ea(qt["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new Ea(qt["paint_raster-particle"]["raster-particle-reset-rate-factor"]),"raster-particle-elevation":new Ea(qt["paint_raster-particle"]["raster-particle-elevation"]),"raster-particle-color-use-theme":new Ba({type:"string",default:"default","property-type":"data-driven"})}))},u,f,g),this._updateColorRamp(),this.lastInvalidatedAt=Kt.now()}onRemove(s){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isDraped(s){return!1}_handleSpecialPaintPropertyUpdate(s){s!=="raster-particle-color"&&s!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),s==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const s=this._transitionablePaint._values["raster-particle-color"].value.expression,u=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=ay({expression:s,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:u}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=Kt.now()}tileCoverLift(){return this.paint.get("raster-particle-elevation")}}class $ae extends uo{constructor(s,u){super(s,{},u,null),this.implementation=s,s.slot&&(this.slot=s.slot)}is3D(s){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isDraped(s){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(s){this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)}onRemove(s){this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)}}function IE(h,s,u){const f=[0,0,1],g=ve.quat.identity([]);return ve.quat.rotateY(g,g,u?-ba(h)+Math.PI:ba(h)),ve.quat.rotateX(g,g,-ba(s)),ve.vec3.transformQuat(f,f,g),ve.vec3.normalize(f,f)}function WF(h,s){const u=mS(h.projection,h.zoom,h.width,h.height),f=function(m,_,b,O,D){const C=new Gn(b.lng-180*Ay,b.lat),V=new Gn(b.lng+180*Ay,b.lat),I=m.project(C.lng,C.lat),z=m.project(V.lng,V.lat),M=-Math.atan2(z.y-I.y,z.x-I.x),B=o.fromLngLat(b);B.y=ka(B.y,-1+Ay,1-Ay);const J=B.toLngLat(),te=m.project(J.lng,J.lat),he=o.fromLngLat(J);he.x+=Ay;const de=he.toLngLat(),ne=m.project(de.lng,de.lat),Ae=XF(ne.x-te.x,ne.y-te.y,M),xe=o.fromLngLat(J);xe.y+=Ay;const Oe=xe.toLngLat(),Qe=m.project(Oe.lng,Oe.lat),Ye=XF(Qe.x-te.x,Qe.y-te.y,M),Xe=Math.abs(Ae.x)/Math.abs(Ye.y),gt=ve.mat4.identity([]);ve.mat4.rotateZ(gt,gt,-M*(1-(D?0:O)));const et=ve.mat4.identity([]);return ve.mat4.scale(et,et,[1,1-(1-Xe)*O,1]),et[4]=-Ye.x/Ye.y*O,ve.mat4.rotateZ(et,et,M),ve.mat4.multiply(et,gt,et),et}(h.projection,0,h.center,u,s),g=YF(h);return ve.mat4.scale(f,f,[g,g,1]),f}function YF(h){const s=h.projection,u=mS(h.projection,h.zoom,h.width,h.height),f=LE(s,h.center),g=LE(s,Gn.convert(s.center));return Math.pow(2,f*u+(1-u)*g)}function mS(h,s,u,f,g=1/0){const m=h.range;if(!m)return 0;const _=Math.min(g,Math.max(u,f)),b=Math.log(_/1024)/Math.LN2;return kr(m[0]+b,m[1]+b,s)}const Ay=1/4e4;function LE(h,s){const u=ka(s.lat,-85.051129,Bu),f=new Gn(s.lng-180*Ay,u),g=new Gn(s.lng+180*Ay,u),m=h.project(f.lng,u),_=h.project(g.lng,u),b=o.fromLngLat(f),O=o.fromLngLat(g),D=_.x-m.x,C=_.y-m.y,V=O.x-b.x,I=O.y-b.y,z=Math.sqrt((V*V+I*I)/(D*D+C*C));return Math.log(z)/Math.LN2}function XF(h,s,u){const f=Math.cos(u),g=Math.sin(u);return{x:h*f-s*g,y:h*g+s*f}}function JF(h,s,u){ve.mat4.identity(h),ve.mat4.rotateZ(h,h,ba(s[2])),ve.mat4.rotateX(h,h,ba(s[0])),ve.mat4.rotateY(h,h,ba(s[1])),ve.mat4.scale(h,h,u),ve.mat4.multiply(h,h,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function gS(h,s,u,f,g,m,_,b){const O=[u[0]-s[0],u[1]-s[1],0],D=[f[0]-s[0],f[1]-s[1],0];if(ve.vec3.length(O)<1e-12||ve.vec3.length(D)<1e-12)return ve.quat.identity(h);const C=ve.vec3.cross([],O,D);ve.vec3.normalize(C,C),ve.vec3.subtract(D,f,s),O[2]=(m-g)*b,D[2]=(_-g)*b;const V=O;return ve.vec3.cross(V,O,D),ve.vec3.normalize(V,V),ve.quat.rotationTo(h,C,V)}function FE(h,s,u=!1){const f=Gl(s.zoom),g=function(m,_,b){const O=_.worldSize,D=[m[12],m[13],m[14]],C=Ni(D[1]/O),V=Uu(D[0]/O),I=ve.mat4.identity([]),z=Yo(1,C)*O,M=Yo(1,0)*O*af(C,_.zoom),B=1/zc(O);let J=M*B;if(b){const ne=mS(_.projection,_.zoom,_.width,_.height,1024);J=B*_.projection.pixelSpaceConversion(_.center.lat,O,ne)}const te=Vc(C,V);ve.vec3.add(te,te,ve.vec3.scale([],ve.vec3.normalize([],te),z*J*D[2]));const he=function(ne){const Ae=[ne[0],ne[1],ne[2]];let xe=[0,1,0];const Oe=ve.vec3.cross([],xe,Ae);return ve.vec3.cross(xe,Ae,Oe),ve.vec3.squaredLength(xe)===0&&(xe=[0,1,0],ve.vec3.cross(Oe,Ae,xe)),ve.vec3.normalize(Oe,Oe),ve.vec3.normalize(xe,xe),ve.vec3.normalize(Ae,Ae),[Oe[0],Oe[1],Oe[2],0,xe[0],xe[1],xe[2],0,Ae[0],Ae[1],Ae[2],0,ne[0],ne[1],ne[2],1]}(te);ve.mat4.scale(I,I,[J,J,J*z]),ve.mat4.translate(I,I,[-D[0],-D[1],-D[2]]);const de=ve.mat4.multiply([],_.globeMatrix,he);return ve.mat4.multiply(de,de,I),ve.mat4.multiply(de,de,m),de}(h,s,u);if(f>0){const m=function(_,b){const O=b.worldSize,D=Yo(1,0)*O*af(b.center.lat,b.zoom)/zc(O),C=Yo(1,b.center.lat)*O,V=ve.mat4.identity([]);return ve.mat4.rotateY(V,V,ba(b.center.lng)),ve.mat4.rotateX(V,V,ba(b.center.lat)),ve.mat4.translate(V,V,[0,0,Cl]),ve.mat4.scale(V,V,[D,D,D*C]),ve.mat4.translate(V,V,[b.point.x-.5*O,b.point.y-.5*O,0]),ve.mat4.multiply(V,V,_),ve.mat4.multiply(V,b.globeMatrix,V)}(h,s);return function(_,b,O){const D=(M,B,J)=>{const te=ve.vec3.length(M),he=ve.vec3.length(B),de=co(M,B,J);return ve.vec3.scale(de,de,1/ve.vec3.length(de)*gr(te,he,J))},C=D([_[0],_[1],_[2]],[b[0],b[1],b[2]],O),V=D([_[4],_[5],_[6]],[b[4],b[5],b[6]],O),I=D([_[8],_[9],_[10]],[b[8],b[9],b[10]],O),z=co([_[12],_[13],_[14]],[b[12],b[13],b[14]],O);return[C[0],C[1],C[2],0,V[0],V[1],V[2],0,I[0],I[1],I[2],0,z[0],z[1],z[2],1]}(g,m,f)}return g}function QF(h,s,u,f){const g=rr.projectAabbCorners(f,u);let m=Number.MAX_VALUE,_=-1;for(let D=0;D<g.length;++D){const C=g[D];C[0]=(.5*C[0]+.5)*s.width,C[1]=(.5-.5*C[1])*s.height,C[2]<m&&(_=D,m=C[2])}const b=D=>new It(g[D][0],g[D][1]);let O;switch(_){case 0:case 6:O=[b(1),b(5),b(4),b(7),b(3),b(2),b(1)];break;case 1:case 7:O=[b(0),b(4),b(5),b(6),b(2),b(3),b(0)];break;case 3:case 5:O=[b(1),b(0),b(4),b(7),b(6),b(2),b(1)];break;default:O=[b(1),b(5),b(6),b(7),b(3),b(0),b(1)]}if(Pe(h,O))return m}const Kae=Mn([{name:"a_pos_3f",components:3,type:"Float32"}]),Wae=Mn([{name:"a_color_3f",components:3,type:"Float32"}]),Yae=Mn([{name:"a_color_4f",components:4,type:"Float32"}]),Xae=Mn([{name:"a_uv_2f",components:2,type:"Float32"}]),Jae=Mn([{name:"a_normal_3f",components:3,type:"Float32"}]),Qae=Mn([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),ere=Mn([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]),ek={None:0,Model:1,Symbol:2,FillExtrusion:4,All:7};class yS{constructor(s,u,f,g){this.message=(s?`${s}: `:"")+f,g&&(this.identifier=g),u!=null&&u.__line__&&(this.line=u.__line__)}}function tk(h,s){const u=h.indexOf("://")===-1;try{return new URL(h,u&&s?"http://example.com":void 0),!0}catch{return!1}}class ak{constructor(s,u){this.feature=s,this.instancedDataOffset=u,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class rk{constructor(){this.instancedDataArray=new ig,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class kE{constructor(s){this.zoom=s.zoom,this.canonical=s.canonical,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.fqid),this.projection=s.projection,this.index=s.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0}updateFootprints(s,u){}populate(s,u,f,g){this.tileToMeter=y(f);const m=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:_,id:b,index:O,sourceLayerIndex:D}of s){const C=b??(_.properties&&_.properties.hasOwnProperty("id")?_.properties.id:void 0),V=Y(_,m);if(!this.layers[0]._featureFilter.filter(new Pn(this.zoom),V,f))continue;const I={id:C,sourceLayerIndex:D,index:O,geometry:m?V.geometry:K(_,f,g),properties:_.properties,type:_.type,patterns:{}},z=this.addFeature(I,I.geometry,V);z&&u.featureIndex.insert(_,I.geometry,O,D,this.index,this.instancesPerModel[z].instancedDataArray.length,za/32)}this.lookup=null}update(s,u,f,g){for(const m in this.instancesPerModel){const _=this.instancesPerModel[m];for(const b in s)_.idToFeaturesIndex.hasOwnProperty(b)&&(this.evaluate(_.features[_.idToFeaturesIndex[b]],s[b],_,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let s=!1;for(const u in this.instancesPerModel){const f=this.instancesPerModel[u];for(const g of f.features){const m=this.layers[0],_=g.feature,b=this.canonical,O=m.paint.get("model-rotation").evaluate(_,{},b),D=m.paint.get("model-scale").evaluate(_,{},b),C=m.paint.get("model-translation").evaluate(_,{},b);ve.vec3.exactEquals(g.rotation,O)&&ve.vec3.exactEquals(g.scale,D)&&ve.vec3.exactEquals(g.translation,C)||(this.evaluate(g,g.featureStates,f,!0),s=!0)}}return s}updateReplacement(s,u,f,g){if(u.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=u.updateTime;const m=u.getReplacementRegionsForTile(s.toUnwrapped(),!0);if(y0(this.activeReplacements,m))return!1;this.activeReplacements=m;let _=!1;for(const b in this.instancesPerModel){const O=this.instancesPerModel[b],D=O.instancedDataArray;for(const C of O.features){const V=C.instancedDataOffset,I=C.instancedDataCount;for(let z=0;z<I;z++){const M=16*(z+V);let B=D.float32[M+0];const J=B>za;B=J?B-za:B;const te=Math.floor(B),he=D.float32[M+1];let de=!1;for(const ne of this.activeReplacements)if(!jf(ne,f,ek.Model,g)&&!(ne.min.x>te||te>ne.max.x||ne.min.y>he||he>ne.max.y)&&(de=UC(kC(te,he,s.canonical,ne.footprintTileId.canonical),ne.footprint),de))break;D.float32[M]=de?B+za:B,_=_||de!==J}}}return _}isEmpty(){for(const s in this.instancesPerModel)if(this.instancesPerModel[s].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(s){if(!this.uploaded)for(const u in this.instancesPerModel){const f=this.instancesPerModel[u];f.instancedDataArray.length<0||f.instancedDataArray.length===0||(f.instancedDataBuffer?f.instancedDataBuffer.updateData(f.instancedDataArray):f.instancedDataBuffer=s.createVertexBuffer(f.instancedDataArray,Qae.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const u in this.instancesPerModel){const f=this.instancesPerModel[u];f.instancedDataArray.length!==0&&f.instancedDataBuffer&&f.instancedDataBuffer.destroy()}const s=this.layers[0].modelManager;if(s&&this.modelUris)for(const u of this.modelUris)s.removeModel(u,"")}addFeature(s,u,f){const g=this.layers[0],m=g.layout.get("model-id").evaluate(f,{},this.canonical);if(!m)return $r(`modelId is not evaluated for layer ${g.id} and it is not going to get rendered.`),m;tk(m,!1)&&(this.modelUris.includes(m)||this.modelUris.push(m)),this.instancesPerModel[m]||(this.instancesPerModel[m]=new rk);const _=this.instancesPerModel[m],b=_.instancedDataArray,O=new ak(f,b.length);for(const D of u)for(const C of D){if(C.x<0||C.x>=za||C.y<0||C.y>=za)continue;const V=(this.lookupDim-1)/za,I=this.lookupDim*(C.y*V|0)+C.x*V|0;if(this.lookup){if(this.lookup[I]!==0)continue;this.lookup[I]=1}this.instanceCount++;const z=b.length;b.resize(z+1),_.instancesEvaluatedElevation.push(0),b.float32[16*z]=C.x,b.float32[16*z+1]=C.y}return O.instancedDataCount=_.instancedDataArray.length-O.instancedDataOffset,O.instancedDataCount>0&&(s.id&&(_.idToFeaturesIndex[s.id]=_.features.length),_.features.push(O),this.evaluate(O,{},_,!1)),m}getModelUris(){return this.modelUris}evaluate(s,u,f,g){const m=this.layers[0],_=s.feature,b=this.canonical,O=s.rotation=m.paint.get("model-rotation").evaluate(_,u,b),D=s.scale=m.paint.get("model-scale").evaluate(_,u,b),C=s.translation=m.paint.get("model-translation").evaluate(_,u,b),V=m.paint.get("model-color").evaluate(_,u,b);V.a=m.paint.get("model-color-mix-intensity").evaluate(_,u,b);const I=[];this.maxVerticalOffset<C[2]&&(this.maxVerticalOffset=C[2]),this.maxScale=Math.max(Math.max(this.maxScale,D[0]),Math.max(D[1],D[2])),JF(I,O,D);const z=Math.round(100*V.a)+V.b/1.05;for(let M=0;M<s.instancedDataCount;++M){const B=s.instancedDataOffset+M,J=16*B,te=f.instancedDataArray.float32;let he=0;g&&(he=te[J+6]-f.instancesEvaluatedElevation[B]);const de=0|te[J+1];te[J]=(0|te[J])+V.r/1.05,te[J+1]=de+V.g/1.05,te[J+2]=z,te[J+3]=1/(b.z>10?this.tileToMeter:y(b,de)),te[J+4]=C[0],te[J+5]=C[1],te[J+6]=C[2]+he,te[J+7]=I[0],te[J+8]=I[1],te[J+9]=I[2],te[J+10]=I[4],te[J+11]=I[5],te[J+12]=I[6],te[J+13]=I[8],te[J+14]=I[9],te[J+15]=I[10],f.instancesEvaluatedElevation[B]=C[2]}}}let nk,ik;Pt(kE,"ModelBucket",{omit:["layers"]}),Pt(rk,"PerModelAttributes"),Pt(ak,"ModelFeature");const HA=64,E0={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function sk(h,s,u,f,g,m,_,b,O,D=!1){const C=u.zoom,V=u.project(f),I=af(f.lat,C),z=1/I;ve.mat4.identity(h),ve.mat4.translate(h,h,[V.x+_[0]*z,V.y+_[1]*z,_[2]]);let M=1,B=1;const J=u.worldSize;if(D){if(u.projection.name==="mercator"){let ne=0;u.elevation&&(ne=u.elevation.getAtPointOrZero(new o(V.x/J,V.y/J),0));const Ae=ve.vec4.transformMat4([],[V.x,V.y,ne,1],u.projMatrix)[3]/u.cameraToCenterDistance;M=Ae,B=Ae*af(u.center.lat,C)}else if(u.projection.name==="globe"){const ne=FE(h,u),Ae=ve.mat4.multiply([],u.projMatrix,ne),xe=[0,0,0,1];ve.vec4.transformMat4(xe,xe,Ae);const Oe=xe[3]/u.cameraToCenterDistance,Qe=Gl(C),Ye=u.projection.pixelsPerMeter(f.lat,J)*af(f.lat,C),Xe=u.projection.pixelsPerMeter(u.center.lat,J)*af(u.center.lat,C);M=Oe/gr(Ye,xA(u.center.lat),Qe),B=Oe*I/Ye,M*=Xe,B*=Xe}}else M=z;ve.mat4.scale(h,h,[M,M,B]);const te=[...h],he=s.orientation,de=[];if(JF(de,[he[0]+g[0],he[1]+g[1],he[2]+g[2]],m),ve.mat4.multiply(h,te,de),b&&u.elevation){let ne=0;const Ae=[];if(O&&u.elevation){ne=function(Qe,Ye,Xe,gt,et){const _t=Ye.elevation;if(!_t)return 0;const xt=rr.projectAabbCorners(Xe,gt),Ct=Yo(1,et.lat)*Ye.worldSize,Dt=function(Rr,Xa){const dr=[0,0,1],Lr=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const sn of Lr){const Zr=Rr[sn.corners[0]],vn=Rr[sn.corners[1]],rn=Rr[sn.corners[2]],En=[vn[0]-Zr[0],vn[1]-Zr[1],Xa*(vn[2]-Zr[2])],Jn=ve.vec3.cross(En,En,[rn[0]-Zr[0],rn[1]-Zr[1],Xa*(rn[2]-Zr[2])]);ve.vec3.normalize(Jn,Jn),sn.dotProductWithUp=ve.vec3.dot(Jn,dr)}return Lr.sort((sn,Zr)=>sn.dotProductWithUp-Zr.dotProductWithUp),Lr[0].corners}(xt,Ct),Nt=xt[Dt[0]],jt=xt[Dt[1]],Lt=xt[Dt[2]],Ht=xt[Dt[3]],Aa=_t.getAtPointOrZero(new o(Nt[0]/Ye.worldSize,Nt[1]/Ye.worldSize),0),ma=_t.getAtPointOrZero(new o(jt[0]/Ye.worldSize,jt[1]/Ye.worldSize),0),er=_t.getAtPointOrZero(new o(Lt[0]/Ye.worldSize,Lt[1]/Ye.worldSize),0),Oa=_t.getAtPointOrZero(new o(Ht[0]/Ye.worldSize,Ht[1]/Ye.worldSize),0),Da=(Aa+Oa)/2,Ra=(ma+er)/2;return Da>Ra?ma<er?gS(Qe,jt,Ht,Nt,ma,Oa,Aa,Ct):gS(Qe,Lt,Nt,Ht,er,Aa,Oa,Ct):Aa<Oa?gS(Qe,Nt,jt,Lt,Aa,ma,er,Ct):gS(Qe,Ht,Lt,jt,Oa,er,ma,Ct),Math.max(Da,Ra)}(Ae,u,s.aabb,h,f);const xe=ve.mat4.fromQuat([],Ae),Oe=ve.mat4.multiply([],xe,de);ve.mat4.multiply(h,te,Oe)}else ne=u.elevation.getAtPointOrZero(new o(V.x/J,V.y/J),0);ne!==0&&(h[14]+=ne)}}function _w(h,s,u=!1){h.uploaded||(h.gfxTexture=new ME(s,h.image,u?s.gl.R8:s.gl.RGBA8,{useMipmap:h.sampler.minFilter>=s.gl.NEAREST_MIPMAP_NEAREST}),h.uploaded=!0,h.image=null)}function tre(h,s,u){h.indexBuffer=s.createIndexBuffer(h.indexArray,!1,!0),h.vertexBuffer=s.createVertexBuffer(h.vertexArray,Kae.members,!1,!0),h.normalArray&&(h.normalBuffer=s.createVertexBuffer(h.normalArray,Jae.members,!1,!0)),h.texcoordArray&&(h.texcoordBuffer=s.createVertexBuffer(h.texcoordArray,Xae.members,!1,!0)),h.colorArray&&(h.colorBuffer=s.createVertexBuffer(h.colorArray,(h.colorArray.bytesPerElement===12?Wae:Yae).members,!1,!0)),h.featureArray&&(h.pbrBuffer=s.createVertexBuffer(h.featureArray,ere.members,!0)),h.segments=ji.simpleSegment(0,0,h.vertexArray.length,h.indexArray.length);const f=h.material;f.pbrMetallicRoughness.baseColorTexture&&_w(f.pbrMetallicRoughness.baseColorTexture,s),f.pbrMetallicRoughness.metallicRoughnessTexture&&_w(f.pbrMetallicRoughness.metallicRoughnessTexture,s),f.normalTexture&&_w(f.normalTexture,s),f.occlusionTexture&&_w(f.occlusionTexture,s,u),f.emissionTexture&&_w(f.emissionTexture,s)}function UE(h,s,u){if(h.meshes)for(const f of h.meshes)tre(f,s,u);if(h.children)for(const f of h.children)UE(f,s,u)}function AS(h){if(h.meshes)for(const s of h.meshes)s.indexArray.destroy(),s.vertexArray.destroy(),s.colorArray&&s.colorArray.destroy(),s.normalArray&&s.normalArray.destroy(),s.texcoordArray&&s.texcoordArray.destroy(),s.featureArray&&s.featureArray.destroy();if(h.children)for(const s of h.children)AS(s)}function BE(h){if(h.meshes)for(const u of h.meshes)u.vertexBuffer&&(u.vertexBuffer.destroy(),u.indexBuffer.destroy(),u.normalBuffer&&u.normalBuffer.destroy(),u.texcoordBuffer&&u.texcoordBuffer.destroy(),u.colorBuffer&&u.colorBuffer.destroy(),u.pbrBuffer&&u.pbrBuffer.destroy(),u.segments.destroy(),u.material&&((s=u.material).pbrMetallicRoughness.baseColorTexture&&s.pbrMetallicRoughness.baseColorTexture.gfxTexture&&s.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),s.pbrMetallicRoughness.metallicRoughnessTexture&&s.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&s.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),s.normalTexture&&s.normalTexture.gfxTexture&&s.normalTexture.gfxTexture.destroy(),s.emissionTexture&&s.emissionTexture.gfxTexture&&s.emissionTexture.gfxTexture.destroy(),s.occlusionTexture&&s.occlusionTexture.gfxTexture&&s.occlusionTexture.gfxTexture.destroy()));var s;if(h.children)for(const u of h.children)BE(u)}class N0{constructor(s,u,f){this._demTile=s,this._dem=this._demTile.dem,this._scale=u,this._offset=f}static create(s,u,f){const g=f||s.findDEMTileFor(u);if(!g||!g.dem)return;const m=g.dem,_=g.tileID,b=1<<u.canonical.z-_.canonical.z;return new N0(g,m.dim/za/b,[(u.canonical.x/b-_.canonical.x)*m.dim,(u.canonical.y/b-_.canonical.y)*m.dim])}tileCoordToPixel(s,u){const f=u*this._scale+this._offset[1],g=Math.floor(s*this._scale+this._offset[0]),m=Math.floor(f);return new It(g,m)}getElevationAt(s,u,f,g){const m=s*this._scale+this._offset[0],_=u*this._scale+this._offset[1],b=Math.floor(m),O=Math.floor(_),D=this._dem;return g=!!g,f?gr(gr(D.get(b,O,g),D.get(b,O+1,g),_-O),gr(D.get(b+1,O,g),D.get(b+1,O+1,g),_-O),m-b):D.get(b,O,g)}getElevationAtPixel(s,u,f){return this._dem.get(s,u,!!f)}getMeterToDEM(s){return(1<<this._demTile.tileID.canonical.z)*Yo(1,s)*this._dem.stride}}const jE=new Float32Array(262144),$A=new Uint8Array(262144);function ok(h){let s=0;if(h.meshes)for(const u of h.meshes)s=Math.max(s,u.aabb.max[2]);if(h.children)for(const u of h.children)s=Math.max(s,ok(u));return s}function lk(h,s,u){if(h.meshes)for(const f of h.meshes){if(f.aabb.min[0]===1/0)continue;const g=rr.applyTransform(f.aabb,h.matrix);u.insert(s,g.min[0],g.min[1],g.max[0],g.max[1])}if(h.children)for(const f of h.children)lk(f,s,u)}const uk=["","wall","door","roof","window","lamp","logo"];class ck{constructor(s){this.node=s,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.cameraCollisionOpacity=1,this.feature={type:"Point",id:s.id,geometry:[],properties:{height:ok(s)}},this.aabb=this._getLocalBounds(),this.state=null}_getLocalBounds(){if(!this.node.meshes)return new rr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let s=0;const u=new rr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const f of this.node.meshes)this.node.lightMeshIndex!==s&&(f.transformedAabb=rr.applyTransformFast(f.aabb,this.node.matrix),u.encapsulate(f.transformedAabb)),s++;this.aabb=u}return this.aabb}}class vS{constructor(s,u,f,g,m,_,b){this.id=f,this.layers=s,this.layerIds=this.layers.map(O=>O.fqid),this.stateDependentLayerIds=this.layers.filter(O=>O.isStateDependent()).map(O=>O.id),this.modelTraits|=E0.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,g&&(this.modelTraits|=E0.HasMapboxMeshFeatures),m&&(this.modelTraits|=E0.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=_,this.dirty=!0,this.needsUpload=!1,this.filter=null,this.nodesInfo=[];for(const O of u)this.nodesInfo.push(new ck(O)),lk(O,b.featureIndexArray.length,b.grid),b.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,b.bucketLayerIDs.length-1,0);this.states={}}updateFootprints(s,u){for(const f of this.getNodesInfo()){const g=f.node;g.footprint&&u.push({footprint:g.footprint,id:s})}}update(s){const u=Object.keys(s).length!==0;if(u&&!this.stateDependentLayers.length)return;const f=u?this.stateDependentLayers:this.layers;if(!$t(s,this.states))for(const g of f)this.evaluate(g,s);this.states=structuredClone(s)}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(s){if(!this.needsUpload)return;const u=this.getNodesInfo();for(const f of u){const g=f.node;this.uploaded?this.updatePbrBuffer(g):UE(g,s,!0)}for(const f of u)AS(f.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(s){let u=!1;if(!s.meshes)return u;for(const f of s.meshes)f.pbrBuffer&&(f.pbrBuffer.updateData(f.featureArray),u=!0);return u}needsReEvaluation(s,u,f){const g=s.transform.projectionOptions,m=s.style.getBrightness(),_=this.brightness!==m;if(!this.uploaded||this.dirty||g.name!==this.projection.name||ww(f.paint.get("model-color").value,_)||ww(f.paint.get("model-color-mix-intensity").value,_)||ww(f.paint.get("model-roughness").value,_)||ww(f.paint.get("model-emissive-strength").value,_)||ww(f.paint.get("model-height-based-emissive-strength-multiplier").value,_)){this.projection=g,this.brightness=m;const b=this.getNodesInfo();for(const O of b)O.state=null;return!0}return!1}evaluateScale(s,u){if(s.transform.zoom===this.zoom)return;this.zoom=s.transform.zoom;const f=this.getNodesInfo(),g=this.id.canonical;for(const m of f){const _=m.feature;m.evaluatedScale=u.paint.get("model-scale").evaluate(_,{},g)}}evaluate(s,u){const f=this.getNodesInfo();for(const g of f){if(!g.node.meshes)continue;const m=g.feature,_=u&&u[m.id];if($t(_,g.state))continue;g.state=structuredClone(_);const b=g.node.meshes&&g.node.meshes[0].featureData,O=g.evaluatedColor[2],D=g.evaluatedRMEA[2],C=this.id.canonical;if(g.hasTranslucentParts=!1,b){for(let V=0;V<uk.length;V++){const I=uk[V];I.length&&(m.properties.part=I);const z=s.paint.get("model-color").evaluate(m,_,C).toRenderColor(null),M=s.paint.get("model-color-mix-intensity").evaluate(m,_,C);g.evaluatedColor[V]=[z.r,z.g,z.b,M],g.evaluatedRMEA[V][0]=s.paint.get("model-roughness").evaluate(m,_,C),g.evaluatedRMEA[V][2]=s.paint.get("model-emissive-strength").evaluate(m,_,C),g.evaluatedRMEA[V][3]=z.a,g.emissionHeightBasedParams[V]=s.paint.get("model-height-based-emissive-strength-multiplier").evaluate(m,_,C),!g.hasTranslucentParts&&z.a<1&&(g.hasTranslucentParts=!0)}delete m.properties.part,rre(g,O!==g.evaluatedColor[2]||D!==g.evaluatedRMEA[2],this.modelTraits)}else g.evaluatedRMEA[0][2]=s.paint.get("model-emissive-strength").evaluate(m,_,C);g.evaluatedScale=s.paint.get("model-scale").evaluate(m,_,C),this.updatePbrBuffer(g.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(s,u,f,g){const m=s.findDEMTileFor(f);if(m&&(m.tileID.canonical!==this.terrainTile||u!==this.terrainExaggeration)){if(m.dem&&m.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=m.tileID.overscaledZ;const _=N0.create(s,f,m);if(!_)return;this.modelTraits&E0.HasMapboxMeshFeatures&&this.updateDEM(s,_,f,g);for(const b of this.getNodesInfo()){const O=b.node;if(!O.footprint||!O.footprint.vertices||!O.footprint.vertices.length)continue;const D=O.footprint.vertices;let C=_.getElevationAt(D[0].x,D[0].y,!0,!0);for(let V=1;V<D.length;V++)C=Math.min(C,_.getElevationAt(D[V].x,D[V].y,!0,!0));O.elevation=C}}this.terrainTile=m.tileID.canonical,this.terrainExaggeration=u}}updateDEM(s,u,f,g){let m=u._dem._modifiedForSources[g];if(m===void 0&&(u._dem._modifiedForSources[g]=[],m=u._dem._modifiedForSources[g]),m.includes(f.canonical))return;const _=u._dem.dim;m.push(f.canonical);let b=!1;for(const O of this.getNodesInfo()){const D=O.node;if(!D.footprint||!D.footprint.grid)continue;const C=D.footprint.grid,V=u.tileCoordToPixel(C.min.x,C.min.y),I=u.tileCoordToPixel(C.max.x,C.max.y),z=Math.min(Math.min(_-I.y,V.x),Math.min(V.y,_-I.x));if(z<0)continue;const M=ka(z,2,5);let B=Math.max(0,V.x-M),J=Math.max(0,V.y-M),te=Math.min(I.x+M,_-1),he=Math.min(I.y+M,_-1);for(let xe=J;xe<=he;++xe)for(let Oe=B;Oe<=te;++Oe)$A[xe*_+Oe]=255;let de=0,ne=0;for(let xe=0;xe<C.cellsY;++xe)for(let Oe=0;Oe<C.cellsX;++Oe){if(!C.cells[xe*C.cellsX+Oe])continue;const Qe=u.tileCoordToPixel(C.min.x+Oe/C.xScale,C.min.y+xe/C.yScale),Ye=u.tileCoordToPixel(C.min.x+(Oe+1)/C.xScale,C.min.y+(xe+1)/C.yScale);for(let Xe=Qe.y;Xe<=Math.min(Ye.y+1,_-1);++Xe)for(let gt=Qe.x;gt<=Math.min(Ye.x+1,_-1);++gt)$A[Xe*_+gt]===255&&($A[Xe*_+gt]=0,de+=u.getElevationAtPixel(gt,Xe),ne++)}const Ae=de/ne;B=Math.max(1,V.x-M),J=Math.max(1,V.y-M),te=Math.min(I.x+M,_-2),he=Math.min(I.y+M,_-2),b=!0;for(let xe=J;xe<=he;++xe)for(let Oe=B;Oe<=te;++Oe)$A[xe*_+Oe]===0&&(jE[xe*_+Oe]=u._dem.set(Oe,xe,Ae));for(let xe=1;xe<M;++xe){B=Math.max(1,V.x-xe),J=Math.max(1,V.y-xe),te=Math.min(I.x+xe,_-2),he=Math.min(I.y+xe,_-2);for(let Oe=J;Oe<=he;++Oe)for(let Qe=B;Qe<=te;++Qe){const Ye=Oe*_+Qe;if($A[Ye]===255){let Xe=0,gt=0,et=-1,_t=-1;for(let xt=-1;xt<=1;++xt)for(let Ct=-1;Ct<=1;++Ct){const Dt=(Oe+xt)*_+Qe+Ct;if($A[Dt]>=xe)continue;const Nt=jE[Dt],jt=Math.abs(Nt);jt>gt&&(Xe=Nt,gt=jt,et=Ct,_t=xt)}if(gt>.1){const xt=1-(xe+.5*Math.abs(et*_t))/M;let Ct=u._dem.get(Qe,Oe)+Xe*xt;const Dt=u._dem.get(Qe+et,Oe+_t),Nt=u._dem.get(Qe-et,Oe-_t,!0);(Ct-Dt)*(Ct-Nt)>0&&(Ct=(Dt+Nt)/2),jE[Ye]=u._dem.set(Qe,Oe,Ct),$A[Ye]=xe}}}}}b&&(u._demTile.needsDEMTextureUpload=!0,u._dem._timestamp=Kt.now())}setFilter(s){this.filter=s?Rh(s):null}getNodesInfo(){return this.filter?this.nodesInfo.filter(s=>this.filter.filter(new Pn(this.id.overscaledZ),s.feature,this.id.canonical)):this.nodesInfo}destroy(){const s=this.getNodesInfo();for(const u of s)AS(u.node),BE(u.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(s,u){if(u.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=u.updateTime;const f=u.getReplacementRegionsForTile(s.toUnwrapped()),g=this.getNodesInfo();for(let m=0;m<this.nodesInfo.length;m++){const _=g[m].node;g[m].hiddenByReplacement=!!_.footprint&&!f.find(b=>b.footprint===_.footprint)}}getHeightAtTileCoord(s,u){const f=this.getNodesInfo(),g=[],m=[0,0,0],_=ve.mat4.identity([]);for(let b=0;b<this.nodesInfo.length;b++){const O=f[b],D=O.node.meshes[0],C=D.transformedAabb;if(s<C.min[0]||u<C.min[1]||s>C.max[0]||u>C.max[1])continue;if(O.node.hidden===!0)return{height:1/0,maxHeight:O.feature.properties.height,hidden:!1,verticalScale:O.evaluatedScale[2]};ve.mat4.invert(_,O.node.matrix),m[0]=s,m[1]=u,ve.vec3.transformMat4(m,m,_);const V=(m[0]-D.aabb.min[0])/(D.aabb.max[0]-D.aabb.min[0])*HA|0,I=Math.min(63,(m[1]-D.aabb.min[1])/(D.aabb.max[1]-D.aabb.min[1])*HA|0)*HA+Math.min(63,V),z=D.heightmap[I];if(!(z<0&&O.node.footprint))return O.hiddenByReplacement?void 0:{height:z,maxHeight:O.feature.properties.height,hidden:!1,verticalScale:O.evaluatedScale[2]};if(O.node.footprint.grid.query(new It(s,u),new It(s,u),g),g.length>0)return{height:void 0,maxHeight:O.feature.properties.height,hidden:O.hiddenByReplacement,verticalScale:O.evaluatedScale[2]}}}}function ww(h,s){return!h.isLightConstant&&s}function are(h,s,u,f,g,m,_,b){let O=(61440&s|(61440&s)>>4)>>8,D=(3840&s|(3840&s)>>4)>>4,C=240&s|(240&s)>>4;u[3]>0&&(O=gr(O,255*u[0],u[3]),D=gr(D,255*u[1],u[3]),C=gr(C,255*u[2],u[3]));const V=O<<8|D,I=C<<8|Math.floor(255*f[3]),z=function(xe){const Oe=ka(xe,0,2);return Math.min(Math.round(.5*Oe*255),255)}(f[2])<<8|15*f[0]<<4|15*f[1],M=ka(g[0],0,1),B=ka(g[1],0,1),J=ka(g[2],0,1),te=ka(g[3],0,1);let he,de,ne,Ae;if(M!==B&&_!==m&&B!==M){const xe=_-m;de=1/(xe*(B-M)),ne=-(m+xe*M)/(xe*(B-M));const Oe=ka(g[4],-1,1);Ae=Math.pow(10,Oe),he=255*J<<8|255*te}else he=65535,de=0,ne=1,Ae=1;if(h.emplaceBack(V,I,z,he,de,ne,Ae),b){const xe=b.length;b.clear();for(let Oe=0;Oe<xe;Oe++)b.emplaceBack(V,I,z,he,de,ne,Ae)}}function rre(h,s,u){const f=h.node;let g=0;const m=u&E0.HasMeshoptCompression;for(const _ of f.meshes){if(f.lights&&f.lightMeshIndex===g||!_.featureData)continue;_.featureArray=new om,_.featureArray.reserve(_.featureData.length);let b=s;for(const O of _.featureData){const D=m?65535&O:O>>16&65535,C=m?O>>16&65535:65535&O,V=(15&C)<8?15&C:0,I=h.evaluatedRMEA[V],z=h.evaluatedColor[V],M=h.emissionHeightBasedParams[V];let B;if(b&&V===2&&f.lights&&(B=new om,B.resize(10*f.lights.length)),are(_.featureArray,D,z,I,M,_.aabb.min[2],_.aabb.max[2],B),B&&b){b=!1;const J=f.meshes[f.lightMeshIndex];J.featureArray=B,J.featureArray._trim()}}_.featureArray._trim(),g++}}function dk(h,s,u,f){const g=1<<h.z;s.lat=Ni((f/za+h.y)/g),s.lng=Uu((u/za+h.x)/g)}Pt(vS,"Tiled3dModelBucket",{omit:["layers"]}),Pt(ck,"Tiled3dModelFeature");const nre={circle:class extends uo{constructor(h,s,u,f){super(h,{layout:Ft||(Ft=new Bi({"circle-sort-key":new Ba(qt.layout_circle["circle-sort-key"]),"circle-elevation-reference":new Ea(qt.layout_circle["circle-elevation-reference"]),visibility:new Ea(qt.layout_circle.visibility)})),paint:sa||(sa=new Bi({"circle-radius":new Ba(qt.paint_circle["circle-radius"]),"circle-color":new Ba(qt.paint_circle["circle-color"]),"circle-blur":new Ba(qt.paint_circle["circle-blur"]),"circle-opacity":new Ba(qt.paint_circle["circle-opacity"]),"circle-translate":new Ea(qt.paint_circle["circle-translate"]),"circle-translate-anchor":new Ea(qt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ea(qt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ea(qt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ba(qt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ba(qt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ba(qt.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new Ea(qt.paint_circle["circle-emissive-strength"]),"circle-color-use-theme":new Ba({type:"string",default:"default","property-type":"data-driven"}),"circle-stroke-color-use-theme":new Ba({type:"string",default:"default","property-type":"data-driven"})}))},s,u,f)}createBucket(h){return new pe(h)}queryRadius(h){const s=h;return kt("circle-radius",this,s)+kt("circle-stroke-width",this,s)+ra(this.paint.get("circle-translate"))}queryIntersectsFeature(h,s,u,f,g,m,_,b){const O=xa(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),m.angle,h.pixelToTileUnitsFactor),D=this.paint.get("circle-radius").evaluate(s,u)+this.paint.get("circle-stroke-width").evaluate(s,u);return pm(h,f,m,_,b,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",O,D)}getProgramIds(){return["circle"]}getDefaultProgramParams(h,s,u){const f=Cp(this);return{config:new nc(this,{zoom:s,lut:u}),defines:f,overrideFog:!1}}},heatmap:class extends uo{createBucket(h){return new r0(h)}constructor(h,s,u,f){super(h,{layout:ug||(ug=new Bi({visibility:new Ea(qt.layout_heatmap.visibility)})),paint:E1||(E1=new Bi({"heatmap-radius":new Ba(qt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ba(qt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ea(qt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new rs(qt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ea(qt.paint_heatmap["heatmap-opacity"]),"heatmap-color-use-theme":new Ba({type:"string",default:"default","property-type":"data-driven"})}))},s,u,f),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(h){h==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=ay({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(h){return kt("heatmap-radius",this,h)}queryIntersectsFeature(h,s,u,f,g,m,_,b){const O=this.paint.get("heatmap-radius").evaluate(s,u);return pm(h,f,m,_,b,!0,!0,new It(0,0),O)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(h,s,u){return h==="heatmap"?{config:new nc(this,{zoom:s,lut:u}),overrideFog:!1}:{}}},hillshade:class extends uo{constructor(h,s,u,f){super(h,{layout:N1||(N1=new Bi({visibility:new Ea(qt.layout_hillshade.visibility)})),paint:O1||(O1=new Bi({"hillshade-illumination-direction":new Ea(qt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ea(qt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ea(qt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ea(qt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ea(qt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ea(qt.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new Ea(qt.paint_hillshade["hillshade-emissive-strength"]),"hillshade-shadow-color-use-theme":new Ba({type:"string",default:"default","property-type":"data-driven"}),"hillshade-highlight-color-use-theme":new Ba({type:"string",default:"default","property-type":"data-driven"}),"hillshade-accent-color-use-theme":new Ba({type:"string",default:"default","property-type":"data-driven"})}))},s,u,f)}shouldRedrape(){return this.hasOffscreenPass()&&this.paint.get("hillshade-illumination-anchor")==="viewport"}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(h,s,u){return{overrideFog:!1}}},fill:class extends uo{constructor(h,s,u,f){super(h,{layout:U1||(U1=new Bi({"fill-sort-key":new Ba(qt.layout_fill["fill-sort-key"]),visibility:new Ea(qt.layout_fill.visibility),"fill-elevation-reference":new Ea(qt.layout_fill["fill-elevation-reference"]),"fill-construct-bridge-guard-rail":new Ba(qt.layout_fill["fill-construct-bridge-guard-rail"])})),paint:B1||(B1=new Bi({"fill-antialias":new Ea(qt.paint_fill["fill-antialias"]),"fill-opacity":new Ba(qt.paint_fill["fill-opacity"]),"fill-color":new Ba(qt.paint_fill["fill-color"]),"fill-outline-color":new Ba(qt.paint_fill["fill-outline-color"]),"fill-translate":new Ea(qt.paint_fill["fill-translate"]),"fill-translate-anchor":new Ea(qt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ba(qt.paint_fill["fill-pattern"]),"fill-emissive-strength":new Ea(qt.paint_fill["fill-emissive-strength"]),"fill-z-offset":new Ba(qt.paint_fill["fill-z-offset"]),"fill-bridge-guard-rail-color":new Ba(qt.paint_fill["fill-bridge-guard-rail-color"]),"fill-tunnel-structure-color":new Ba(qt.paint_fill["fill-tunnel-structure-color"]),"fill-color-use-theme":new Ba({type:"string",default:"default","property-type":"data-driven"}),"fill-outline-color-use-theme":new Ba({type:"string",default:"default","property-type":"data-driven"}),"fill-bridge-guard-rail-color-use-theme":new Ba({type:"string",default:"default","property-type":"data-driven"}),"fill-tunnel-structure-color-use-theme":new Ba({type:"string",default:"default","property-type":"data-driven"})}))},s,u,f)}getProgramIds(){const h=this.paint.get("fill-pattern"),s=h&&h.constantOr(1),u=[s?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&u.push(s&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),u}getDefaultProgramParams(h,s,u){return{config:new nc(this,{zoom:s,lut:u}),overrideFog:!1}}recalculate(h,s){super.recalculate(h,s);const u=this.paint._values["fill-outline-color"];u.value.kind==="constant"&&u.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(h){return new uy(h)}queryRadius(){return ra(this.paint.get("fill-translate"))}queryIntersectsFeature(h,s,u,f,g,m){return!h.queryGeometry.isAboveHorizon&&De(ca(h.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),m.angle,h.pixelToTileUnitsFactor),f)}isTileClipped(){return this.paint.get("fill-z-offset").constantOr(1)===0}is3D(h){if(this.paint.get("fill-z-offset").constantOr(1)!==0)return!0;const s=this.layout&&this.layout.get("fill-elevation-reference")!=="none";return h!=null?s&&!h:s}},"fill-extrusion":class extends uo{constructor(h,s,u,f){super(h,{layout:w0||(w0=new Bi({visibility:new Ea(qt["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new Ea(qt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])})),paint:aw||(aw=new Bi({"fill-extrusion-opacity":new Ea(qt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ba(qt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ea(qt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ea(qt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ba(qt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ba(qt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ba(qt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-height-alignment":new Ea(qt["paint_fill-extrusion"]["fill-extrusion-height-alignment"]),"fill-extrusion-base-alignment":new Ea(qt["paint_fill-extrusion"]["fill-extrusion-base-alignment"]),"fill-extrusion-vertical-gradient":new Ea(qt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Ea(qt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Ea(qt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new Ea(qt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new Ea(qt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new Ea(qt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new Ea(qt["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new Ea(qt["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new Ba(qt["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new Ba(qt["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new Ea(qt["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new Ea(qt["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new Ea(qt["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new Ea(qt["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new Ba(qt["paint_fill-extrusion"]["fill-extrusion-emissive-strength"]),"fill-extrusion-line-width":new Ba(qt["paint_fill-extrusion"]["fill-extrusion-line-width"]),"fill-extrusion-cast-shadows":new Ea(qt["paint_fill-extrusion"]["fill-extrusion-cast-shadows"]),"fill-extrusion-color-use-theme":new Ba({type:"string",default:"default","property-type":"data-driven"}),"fill-extrusion-flood-light-color-use-theme":new Ba({type:"string",default:"default","property-type":"data-driven"})}))},s,u,f),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(h){return new A0(h)}queryRadius(){return ra(this.paint.get("fill-extrusion-translate"))}is3D(h){return!0}hasShadowPass(){return this.paint.get("fill-extrusion-cast-shadows")}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(h,s,u,f,g,m,_,b,O){const D=xa(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),m.angle,h.pixelToTileUnitsFactor),C=this.paint.get("fill-extrusion-height").evaluate(s,u),V=this.paint.get("fill-extrusion-base").evaluate(s,u),I=[0,0],z=b&&m.elevation,M=m.elevation?m.elevation.exaggeration():1,B=h.tile.getBucket(this);if(z&&B instanceof A0){const ne=B.centroidVertexArray,Ae=O+1;Ae<ne.length&&(I[0]=ne.geta_centroid_pos0(Ae),I[1]=ne.geta_centroid_pos1(Ae))}if(I[0]===0&&I[1]===1)return!1;m.projection.name==="globe"&&(f=tw([f],[new It(0,0),new It(za,za)],h.tileID.canonical).map(ne=>ne.polygon).flat());const J=z?b:null,[te,he]=function(ne,Ae,xe,Oe,Qe,Ye,Xe,gt,et,_t,xt){return ne.projection.name==="globe"?function(Ct,Dt,Nt,jt,Lt,Ht,Aa,ma,er,Oa,Da){const Ra=[],Rr=[],Xa=Ct.projection.upVectorScale(Da,Ct.center.lat,Ct.worldSize).metersToTile,dr=[0,0,0,1],Lr=[0,0,0,1],sn=(vn,rn,En,Jn)=>{vn[0]=rn,vn[1]=En,vn[2]=Jn,vn[3]=1},Zr=ew();Nt>0&&(Nt+=Zr),jt+=Zr;for(const vn of Dt){const rn=[],En=[];for(const Jn of vn){const Li=Jn.x+Lt.x,Br=Jn.y+Lt.y,Ln=Ct.projection.projectTilePoint(Li,Br,Da),is=Ct.projection.upVector(Da,Jn.x,Jn.y);let gs=Nt,bs=jt;if(Aa){const ks=$C(Li,Br,Nt,jt,Aa,ma,er,Oa);gs+=ks.base,bs+=ks.top}Nt!==0?sn(dr,Ln.x+is[0]*Xa*gs,Ln.y+is[1]*Xa*gs,Ln.z+is[2]*Xa*gs):sn(dr,Ln.x,Ln.y,Ln.z),sn(Lr,Ln.x+is[0]*Xa*bs,Ln.y+is[1]*Xa*bs,Ln.z+is[2]*Xa*bs),ve.vec3.transformMat4(dr,dr,Ht),ve.vec3.transformMat4(Lr,Lr,Ht),rn.push(new ju(dr[0],dr[1],dr[2])),En.push(new ju(Lr[0],Lr[1],Lr[2]))}Ra.push(rn),Rr.push(En)}return[Ra,Rr]}(ne,Ae,xe,Oe,Qe,Ye,Xe,gt,et,_t,xt):Xe?function(Ct,Dt,Nt,jt,Lt,Ht,Aa,ma,er){const Oa=[],Da=[],Ra=[0,0,0,1];for(const Rr of Ct){const Xa=[],dr=[];for(const Lr of Rr){const sn=Lr.x+jt.x,Zr=Lr.y+jt.y,vn=$C(sn,Zr,Dt,Nt,Ht,Aa,ma,er);Ra[0]=sn,Ra[1]=Zr,Ra[2]=vn.base,Ra[3]=1,ve.vec4.transformMat4(Ra,Ra,Lt),Ra[3]=Math.max(Ra[3],1e-5);const rn=new ju(Ra[0]/Ra[3],Ra[1]/Ra[3],Ra[2]/Ra[3]);Ra[0]=sn,Ra[1]=Zr,Ra[2]=vn.top,Ra[3]=1,ve.vec4.transformMat4(Ra,Ra,Lt),Ra[3]=Math.max(Ra[3],1e-5);const En=new ju(Ra[0]/Ra[3],Ra[1]/Ra[3],Ra[2]/Ra[3]);Xa.push(rn),dr.push(En)}Oa.push(Xa),Da.push(dr)}return[Oa,Da]}(Ae,xe,Oe,Qe,Ye,Xe,gt,et,_t):function(Ct,Dt,Nt,jt,Lt){const Ht=[],Aa=[],ma=Lt[8]*Dt,er=Lt[9]*Dt,Oa=Lt[10]*Dt,Da=Lt[11]*Dt,Ra=Lt[8]*Nt,Rr=Lt[9]*Nt,Xa=Lt[10]*Nt,dr=Lt[11]*Nt;for(const Lr of Ct){const sn=[],Zr=[];for(const vn of Lr){const rn=vn.x+jt.x,En=vn.y+jt.y,Jn=Lt[0]*rn+Lt[4]*En+Lt[12],Li=Lt[1]*rn+Lt[5]*En+Lt[13],Br=Lt[2]*rn+Lt[6]*En+Lt[14],Ln=Lt[3]*rn+Lt[7]*En+Lt[15],is=Jn+ma,gs=Li+er,bs=Br+Oa,ks=Math.max(Ln+Da,1e-5),Vi=Jn+Ra,pl=Li+Rr,Dc=Br+Xa,So=Math.max(Ln+dr,1e-5);sn.push(new ju(is/ks,gs/ks,bs/ks)),Zr.push(new ju(Vi/So,pl/So,Dc/So))}Ht.push(sn),Aa.push(Zr)}return[Ht,Aa]}(Ae,xe,Oe,Qe,Ye)}(m,f,V,C,D,_,J,I,M,m.center.lat,h.tileID.canonical),de=h.queryGeometry;return function(ne,Ae,xe){let Oe=1/0;De(xe,Ae)&&(Oe=HC(xe,Ae[0]));for(let Qe=0;Qe<Ae.length;Qe++){const Ye=Ae[Qe],Xe=ne[Qe];for(let gt=0;gt<Ye.length-1;gt++){const et=Ye[gt],_t=[et,Ye[gt+1],Xe[gt+1],Xe[gt],et];Pe(xe,_t)&&(Oe=Math.min(Oe,HC(xe,_t)))}}return Oe!==1/0&&Oe}(te,he,de.isPointQuery()?de.screenBounds:de.screenGeometry)}},line:class extends uo{constructor(h,s,u,f){const g=dw();super(h,g,s,u,f),g.layout&&(this.layout=new Du(g.layout)),this.gradientVersion=0,this.hasElevatedBuckets=!1,this.hasNonElevatedBuckets=!1}_handleSpecialPaintPropertyUpdate(h){if(h==="line-gradient"){const s=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=s._styleExpression&&s._styleExpression.expression instanceof ou,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(h,s){super.recalculate(h,s),this.paint._values["line-floorwidth"]=(()=>{if(mg)return mg;const u=dw();return mg=new GA(u.paint.properties["line-width"].specification),mg.useIntegerZoom=!0,mg})().possiblyEvaluate(this._transitioningPaint._values["line-width"].value,h)}createBucket(h){return new Gf(h)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(h,s,u){const f=YC(this);return{config:new nc(this,{zoom:s,lut:u}),defines:f,overrideFog:!1}}queryRadius(h){const s=h,u=ZA(kt("line-width",this,s),kt("line-gap-width",this,s)),f=kt("line-offset",this,s);return u/2+Math.abs(f)+ra(this.paint.get("line-translate"))}queryIntersectsFeature(h,s,u,f,g,m){if(h.queryGeometry.isAboveHorizon)return!1;const _=ca(h.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),m.angle,h.pixelToTileUnitsFactor),b=h.pixelToTileUnitsFactor/2*ZA(this.paint.get("line-width").evaluate(s,u),this.paint.get("line-gap-width").evaluate(s,u)),O=this.paint.get("line-offset").evaluate(s,u);return O&&(f=function(D,C){const V=[],I=new It(0,0);for(let z=0;z<D.length;z++){const M=D[z],B=[];for(let J=0;J<M.length;J++){const te=M[J],he=M[J+1],de=J===0?I:te.sub(M[J-1])._unit()._perp(),ne=J===M.length-1?I:he.sub(te)._unit()._perp(),Ae=de._add(ne)._unit();Ae._mult(1/(Ae.x*ne.x+Ae.y*ne.y)),B.push(Ae._mult(C)._add(te))}V.push(B)}return V}(f,O*h.pixelToTileUnitsFactor)),function(D,C,V){for(let I=0;I<C.length;I++){const z=C[I];if(D.length>=3){for(let M=0;M<z.length;M++)if(ct(D,z[M]))return!0}if(Le(D,z,V))return!0}return!1}(_,f,b)}isTileClipped(){return this.hasNonElevatedBuckets}isDraped(h){return!this.hasElevatedBuckets}},symbol:dS,background:class extends uo{constructor(h,s,u,f){super(h,{layout:IF||(IF=new Bi({visibility:new Ea(qt.layout_background.visibility)})),paint:LF||(LF=new Bi({"background-pitch-alignment":new Ea(qt.paint_background["background-pitch-alignment"]),"background-color":new Ea(qt.paint_background["background-color"]),"background-pattern":new Ea(qt.paint_background["background-pattern"]),"background-opacity":new Ea(qt.paint_background["background-opacity"]),"background-emissive-strength":new Ea(qt.paint_background["background-emissive-strength"]),"background-color-use-theme":new Ba({type:"string",default:"default","property-type":"data-driven"})}))},s,u,f)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(h,s,u){return{overrideFog:!1}}is3D(h){return this.paint.get("background-pitch-alignment")==="viewport"}},raster:jF,"raster-particle":KF,sky:class extends uo{constructor(h,s,u,f){super(h,{layout:qF||(qF=new Bi({visibility:new Ea(qt.layout_sky.visibility)})),paint:HF||(HF=new Bi({"sky-type":new Ea(qt.paint_sky["sky-type"]),"sky-atmosphere-sun":new Ea(qt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Ea(qt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Ea(qt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Ea(qt.paint_sky["sky-gradient-radius"]),"sky-gradient":new rs(qt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Ea(qt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Ea(qt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Ea(qt.paint_sky["sky-opacity"]),"sky-gradient-use-theme":new Ba({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-halo-color-use-theme":new Ba({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-color-use-theme":new Ba({type:"string",default:"default","property-type":"data-driven"})}))},s,u,f),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(h){h==="sky-gradient"?this._updateColorRamp():h!=="sky-atmosphere-sun"&&h!=="sky-atmosphere-halo-color"&&h!=="sky-atmosphere-color"&&h!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=ay({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(h){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const s=h.style.light.properties.get("position");return this._lightPosition.azimuthal!==s.azimuthal||this._lightPosition.polar!==s.polar}return!1}getCenter(h,s){if(this.paint.get("sky-type")==="atmosphere"){const f=this.paint.get("sky-atmosphere-sun"),g=!f,m=h.style.light,_=m.properties.get("position");return g&&m.properties.get("anchor")==="viewport"&&$r("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),g?IE(_.azimuthal,90-_.polar,s):IE(f[0],90-f[1],s)}const u=this.paint.get("sky-gradient-center");return IE(u[0],90-u[1],s)}isSky(){return!0}markSkyboxValid(h){this._skyboxInvalidated=!1,this._lightPosition=h.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const h=this.paint.get("sky-type");return h==="atmosphere"?["skyboxCapture","skybox"]:h==="gradient"?["skyboxGradient"]:null}},slot:class extends uo{constructor(h,s,u,f){super(h,{paint:$F||($F=new Bi({}))},s,null)}},model:class extends uo{constructor(h,s,u,f){super(h,{layout:nk||(nk=new Bi({visibility:new Ea(qt.layout_model.visibility),"model-id":new Ba(qt.layout_model["model-id"])})),paint:ik||(ik=new Bi({"model-opacity":new Ba(qt.paint_model["model-opacity"]),"model-rotation":new Ba(qt.paint_model["model-rotation"]),"model-scale":new Ba(qt.paint_model["model-scale"]),"model-translation":new Ba(qt.paint_model["model-translation"]),"model-color":new Ba(qt.paint_model["model-color"]),"model-color-mix-intensity":new Ba(qt.paint_model["model-color-mix-intensity"]),"model-type":new Ea(qt.paint_model["model-type"]),"model-cast-shadows":new Ea(qt.paint_model["model-cast-shadows"]),"model-receive-shadows":new Ea(qt.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new Ea(qt.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new Ba(qt.paint_model["model-emissive-strength"]),"model-roughness":new Ba(qt.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new Ba(qt.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new Ea(qt.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new Ea(qt.paint_model["model-front-cutoff"]),"model-color-use-theme":new Ba({type:"string",default:"default","property-type":"data-driven"})}))},s,u,f),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(h){return new kE(h)}getProgramIds(){return["model"]}is3D(h){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(h){return h instanceof vS?za-1:0}queryIntersectsFeature(h,s,u,f,g,m){if(!this.modelManager)return!1;const _=this.modelManager,b=h.tile.getBucket(this);if(!(b&&b instanceof kE))return!1;for(const O in b.instancesPerModel){const D=b.instancesPerModel[O],C=s.id!==void 0?s.id:s.properties&&s.properties.hasOwnProperty("id")?s.properties.id:void 0;if(D.idToFeaturesIndex.hasOwnProperty(C)){const V=D.features[D.idToFeaturesIndex[C]],I=_.getModel(O,this.scope);if(!I)return!1;let z=ve.mat4.create();const M=new Gn(0,0),B=b.canonical;let J=Number.MAX_VALUE;for(let te=0;te<V.instancedDataCount;++te){const he=16*(V.instancedDataOffset+te),de=D.instancedDataArray.float32,ne=[de[he+4],de[he+5],de[he+6]];dk(B,M,de[he],0|de[he+1]),sk(z,I,m,M,V.rotation,V.scale,ne,!1,!1,!1),m.projection.name==="globe"&&(z=FE(z,m));const Ae=ve.mat4.multiply([],m.projMatrix,z),xe=h.queryGeometry,Oe=QF(xe.isPointQuery()?xe.screenBounds:xe.screenGeometry,m,Ae,I.aabb);Oe!=null&&(J=Math.min(Oe,J))}return J!==Number.MAX_VALUE&&J}}return!1}_handleOverridablePaintPropertyUpdate(h,s,u){return!(!this.layout||s.isDataDriven()||u.isDataDriven()||h!=="model-color"&&h!=="model-color-mix-intensity"&&h!=="model-rotation"&&h!=="model-scale"&&h!=="model-translation"&&h!=="model-emissive-strength")}_isPropertyZoomDependent(h){const s=this._transitionablePaint._values[h];return s!=null&&s.value!=null&&s.value.expression!=null&&s.value.expression instanceof ye}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}},clip:class extends uo{constructor(h,s,u,f){super(h,{layout:p0||(p0=new Bi({"clip-layer-types":new Ea(qt.layout_clip["clip-layer-types"]),"clip-layer-scope":new Ea(qt.layout_clip["clip-layer-scope"])})),paint:m0||(m0=new Bi({}))},s,u,f)}recalculate(h,s){super.recalculate(h,s)}createBucket(h){return new zC(h)}is3D(h){return!0}}};class ire{constructor(s){this._callback=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class sre{constructor(){this.tasks={},this.taskQueue=[],Ya(["process"],this),this.invoker=new ire(this.process),this.nextId=0}add(s,u){const f=this.nextId++,g=function({type:m,isSymbolTile:_,zoom:b}){return b=b||0,m==="message"?0:m!=="maybePrepare"||_?m!=="parseTile"||_?m==="parseTile"&&_?300-b:m==="maybePrepare"&&_?400-b:500:200-b:100-b}(u);if(g===0){try{s()}finally{}return null}return this.tasks[f]={fn:s,metadata:u,priority:g,id:f},this.taskQueue.push(f),this.invoker.trigger(),{cancel:()=>{delete this.tasks[f]}}}process(){try{if(this.taskQueue=this.taskQueue.filter(f=>!!this.tasks[f]),!this.taskQueue.length)return;const s=this.pick();if(s===null)return;const u=this.tasks[s];if(delete this.tasks[s],this.taskQueue.length&&this.invoker.trigger(),!u)return;u.fn()}finally{}}pick(){let s=null,u=1/0;for(let g=0;g<this.taskQueue.length;g++){const m=this.tasks[this.taskQueue[g]];m.priority<u&&(u=m.priority,s=g)}if(s===null)return null;const f=this.taskQueue[s];return this.taskQueue.splice(s,1),f}remove(){this.invoker.remove()}}class hk{constructor(s,u,f){this.target=s,this.parent=u,this.mapId=f,this.callbacks={},this.cancelCallbacks={},Ya(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new sre}send(s,u,f,g,m=!1,_){const b=Math.round(1e18*Math.random()).toString(36).substring(0,10);f&&(f.metadata=_,this.callbacks[b]=f);const O=new Set;return this.target.postMessage({id:b,type:s,hasCallback:!!f,targetMapId:g,mustQueue:m,sourceMapId:this.mapId,data:Ta(u,O)},O),{cancel:()=>{f&&delete this.callbacks[b],this.target.postMessage({id:b,type:"<cancel>",targetMapId:g,sourceMapId:this.mapId})}}}receive(s){const u=s.data;if(!u)return;const f=u.id;if(f&&(!u.targetMapId||this.mapId===u.targetMapId))if(u.type==="<cancel>"){const g=this.cancelCallbacks[f];delete this.cancelCallbacks[f],g&&g.cancel()}else if(u.mustQueue||oi()){const g=this.callbacks[f],m=this.scheduler.add(()=>this.processTask(f,u),g&&g.metadata||{type:"message"});m&&(this.cancelCallbacks[f]=m)}else this.processTask(f,u)}processTask(s,u){if(delete this.cancelCallbacks[s],u.type==="<response>"){const f=this.callbacks[s];delete this.callbacks[s],f&&(u.error?f(fa(u.error)):f(null,fa(u.data)))}else{const f=new Set,g=u.hasCallback?(_,b)=>{this.target.postMessage({id:s,type:"<response>",sourceMapId:this.mapId,error:_?Ta(_):null,data:Ta(b,f)},f)}:()=>{},m=fa(u.data);if(this.parent[u.type])this.parent[u.type](u.sourceMapId,m,g);else if(this.parent.getWorkerSource){const _=u.type.split(".");this.parent.getWorkerSource(u.sourceMapId,_[0],m.source,m.scope)[_[1]](m,g)}else g(new Error(`Could not find function ${u.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}var Rw={workerUrl:"",workerClass:null,workerParams:void 0};const GE="mapboxgl_preloaded_worker_pool";class KA{constructor(){this.active={}}acquire(s,u=KA.workerCount){if(!this.workers)for(this.workers=[];this.workers.length<u;)this.workers.push(Rw.workerClass!=null?new Rw.workerClass:new self.Worker(Rw.workerUrl,Rw.workerParams));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.workers&&this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[GE]}numActive(){return Object.keys(this.active).length}}KA.workerCount=2;class O0{constructor(s,u,f="Worker",g=KA.workerCount){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=$a();const m=this.workerPool.acquire(this.id,g);for(let _=0;_<m.length;_++){const b=new O0.Actor(m[_],u,this.id);b.name=`${f} ${_}`,this.actors.push(b)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(s,u,f){wn(this.actors,(g,m)=>{g.send(s,u,m)},f=f||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(s=>{s.remove()}),this.actors=[],this.workerPool.release(this.id)}}let Tw,ZE;function _S(){return Tw||(Tw=new KA),Tw}O0.Actor=hk;const qE=new zn(0,0,0);var HE=(h=>(h[h.PATH_RULE_UNSPECIFIED=0]="PATH_RULE_UNSPECIFIED",h[h.PATH_RULE_NON_ZERO=1]="PATH_RULE_NON_ZERO",h[h.PATH_RULE_EVEN_ODD=2]="PATH_RULE_EVEN_ODD",h))(HE||{}),wS=(h=>(h[h.LINE_CAP_UNSPECIFIED=0]="LINE_CAP_UNSPECIFIED",h[h.LINE_CAP_BUTT=1]="LINE_CAP_BUTT",h[h.LINE_CAP_ROUND=2]="LINE_CAP_ROUND",h[h.LINE_CAP_SQUARE=3]="LINE_CAP_SQUARE",h))(wS||{}),Cw=(h=>(h[h.LINE_JOIN_UNSPECIFIED=0]="LINE_JOIN_UNSPECIFIED",h[h.LINE_JOIN_MITER=1]="LINE_JOIN_MITER",h[h.LINE_JOIN_MITER_CLIP=2]="LINE_JOIN_MITER_CLIP",h[h.LINE_JOIN_ROUND=3]="LINE_JOIN_ROUND",h[h.LINE_JOIN_BEVEL=4]="LINE_JOIN_BEVEL",h))(Cw||{}),fk=(h=>(h[h.PAINT_ORDER_UNSPECIFIED=0]="PAINT_ORDER_UNSPECIFIED",h[h.PAINT_ORDER_FILL_AND_STROKE=1]="PAINT_ORDER_FILL_AND_STROKE",h[h.PAINT_ORDER_STROKE_AND_FILL=2]="PAINT_ORDER_STROKE_AND_FILL",h))(fk||{}),V0=(h=>(h[h.PATH_COMMAND_UNSPECIFIED=0]="PATH_COMMAND_UNSPECIFIED",h[h.PATH_COMMAND_MOVE=1]="PATH_COMMAND_MOVE",h[h.PATH_COMMAND_LINE=2]="PATH_COMMAND_LINE",h[h.PATH_COMMAND_QUAD=3]="PATH_COMMAND_QUAD",h[h.PATH_COMMAND_CUBIC=4]="PATH_COMMAND_CUBIC",h[h.PATH_COMMAND_CLOSE=5]="PATH_COMMAND_CLOSE",h))(V0||{}),pk=(h=>(h[h.MASK_TYPE_UNSPECIFIED=0]="MASK_TYPE_UNSPECIFIED",h[h.MASK_TYPE_LUMINANCE=1]="MASK_TYPE_LUMINANCE",h[h.MASK_TYPE_ALPHA=2]="MASK_TYPE_ALPHA",h))(pk||{});function ore(h,s,u){h===1&&s.icons.push(function(f,g){return function(m){if(m.usvg_tree.height||(m.usvg_tree.height=m.usvg_tree.width),!m.metadata)return m;const{metadata:_}=m;if(_.content_area){const{content_area:b}=_;b.top==null&&(b.top=b.left),b.width==null&&(b.width=m.usvg_tree.width),b.height==null&&(b.height=b.width)}return _.stretch_x&&_.stretch_x.length&&mk(_,"x"),_.stretch_y&&_.stretch_y.length&&mk(_,"y"),m}(f.readFields(lre,{name:void 0},g))}(u,u.readVarint()+u.pos))}function mk(h,s){const u=[],f=h[`stretch_${s}`];let g=null;for(let m=0;m<f.length;m++)g===null?g=u.length===0?f[0]:u[u.length-1][1]+f[m]:(u.push([g,g+f[m]]),g=null);h[`stretch_${s}_areas`]=u}function lre(h,s,u){h===1?s.name=u.readString():h===2?s.metadata=function(f,g){return f.readFields(ure,{stretch_x:null,stretch_y:null,stretch_x_areas:null,stretch_y_areas:null,variables:[]},g)}(u,u.readVarint()+u.pos):h===3&&(s.usvg_tree=function(f,g){return f.readFields(hre,{width:20,children:[],linear_gradients:[],radial_gradients:[],clip_paths:[],masks:[]},g)}(u,u.readVarint()+u.pos),s.data="usvg_tree")}function ure(h,s,u){h===1?s.stretch_x=u.readPackedVarint():h===2?s.stretch_y=u.readPackedVarint():h===3?s.content_area=function(f,g){return f.readFields(cre,{left:0},g)}(u,u.readVarint()+u.pos):h===4&&s.variables.push(function(f,g){return f.readFields(dre,{name:void 0},g)}(u,u.readVarint()+u.pos))}function cre(h,s,u){h===1?s.left=u.readVarint():h===2?s.width=u.readVarint():h===3?s.top=u.readVarint():h===4&&(s.height=u.readVarint())}function dre(h,s,u){h===1?s.name=u.readString():h===2&&(s.rgb_color=CS(u.readVarint()),s.value="rgb_color")}function hre(h,s,u){h===1?s.width=s.height=u.readVarint():h===2?s.height=u.readVarint():h===3?s.children.push(RS(u,u.readVarint()+u.pos)):h===4?s.linear_gradients.push(function(f,g){return f.readFields(vre,{spread_method:1,stops:[],x1:0,y1:0,x2:1,y2:0},g)}(u,u.readVarint()+u.pos)):h===5?s.radial_gradients.push(function(f,g){return f.readFields(wre,{spread_method:1,stops:[],cx:.5,cy:.5,r:.5,fx:.5,fy:.5,fr:0},g)}(u,u.readVarint()+u.pos)):h===7?s.clip_paths.push(function(f,g){return f.readFields(Rre,{children:[]},g)}(u,u.readVarint()+u.pos)):h===8&&s.masks.push(function(f,g){const m=f.readFields(Tre,{left:0,width:20,mask_type:1,children:[]},g);return m.height==null&&(m.height=m.width),m.top==null&&(m.top=m.left),m}(u,u.readVarint()+u.pos))}function RS(h,s){return h.readFields(fre,{},s)}function fre(h,s,u){h===1?(s.group=function(f,g){return f.readFields(pre,{opacity:255,children:[]},g)}(u,u.readVarint()+u.pos),s.node="group"):h===2&&(s.path=function(f,g){return f.readFields(gre,{paint_order:1,commands:[],step:1,diffs:[],rule:1},g)}(u,u.readVarint()+u.pos),s.node="path")}function pre(h,s,u){h===1?s.transform=TS(u,u.readVarint()+u.pos):h===2?s.opacity=u.readVarint():h===5?s.clip_path_idx=u.readVarint():h===6?s.mask_idx=u.readVarint():h===7&&s.children.push(RS(u,u.readVarint()+u.pos))}function TS(h,s){return h.readFields(mre,{sx:1,ky:0,kx:0,sy:1,tx:0,ty:0},s)}function mre(h,s,u){h===1?s.sx=u.readFloat():h===2?s.ky=u.readFloat():h===3?s.kx=u.readFloat():h===4?s.sy=u.readFloat():h===5?s.tx=u.readFloat():h===6&&(s.ty=u.readFloat())}function gre(h,s,u){h===1?s.fill=function(f,g){return f.readFields(yre,{rgb_color:qE,paint:"rgb_color",opacity:255},g)}(u,u.readVarint()+u.pos):h===2?s.stroke=function(f,g){return f.readFields(Are,{rgb_color:qE,paint:"rgb_color",dasharray:[],dashoffset:0,miterlimit:4,opacity:255,width:1,linecap:1,linejoin:1},g)}(u,u.readVarint()+u.pos):h===3?s.paint_order=u.readVarint():h===5?u.readPackedVarint(s.commands):h===6?s.step=u.readFloat():h===7?u.readPackedSVarint(s.diffs):h===8&&(s.rule=u.readVarint())}function yre(h,s,u){h===1?(s.rgb_color=CS(u.readVarint()),s.paint="rgb_color"):h===2?(s.linear_gradient_idx=u.readVarint(),s.paint="linear_gradient_idx"):h===3?(s.radial_gradient_idx=u.readVarint(),s.paint="radial_gradient_idx"):h===5&&(s.opacity=u.readVarint())}function CS(h){return new zn((h>>16&255)/255,(h>>8&255)/255,(255&h)/255,1)}function Are(h,s,u){h===1?(s.rgb_color=CS(u.readVarint()),s.paint="rgb_color"):h===2?(s.linear_gradient_idx=u.readVarint(),s.paint="linear_gradient_idx"):h===3?(s.radial_gradient_idx=u.readVarint(),s.paint="radial_gradient_idx"):h===5?u.readPackedFloat(s.dasharray):h===6?s.dashoffset=u.readFloat():h===7?s.miterlimit=u.readFloat():h===8?s.opacity=u.readVarint():h===9?s.width=u.readFloat():h===10?s.linecap=u.readVarint():h===11&&(s.linejoin=u.readVarint())}function vre(h,s,u){h===1?s.transform=TS(u,u.readVarint()+u.pos):h===2?s.spread_method=u.readVarint():h===3?s.stops.push(gk(u,u.readVarint()+u.pos)):h===4?s.x1=u.readFloat():h===5?s.y1=u.readFloat():h===6?s.x2=u.readFloat():h===7&&(s.y2=u.readFloat())}function gk(h,s){return h.readFields(_re,{offset:0,opacity:255,rgb_color:qE},s)}function _re(h,s,u){h===1?s.offset=u.readFloat():h===2?s.opacity=u.readVarint():h===3&&(s.rgb_color=CS(u.readVarint()))}function wre(h,s,u){h===1?s.transform=TS(u,u.readVarint()+u.pos):h===2?s.spread_method=u.readVarint():h===3?s.stops.push(gk(u,u.readVarint()+u.pos)):h===4?s.cx=u.readFloat():h===5?s.cy=u.readFloat():h===6?s.r=u.readFloat():h===7?s.fx=u.readFloat():h===8?s.fy=u.readFloat():h===9&&(s.fr=u.readFloat())}function Rre(h,s,u){h===1?s.transform=TS(u,u.readVarint()+u.pos):h===2?s.clip_path_idx=u.readVarint():h===3&&s.children.push(RS(u,u.readVarint()+u.pos))}function Tre(h,s,u){h===1?s.left=s.top=u.readFloat():h===2?s.width=s.height=u.readFloat():h===3?s.top=u.readFloat():h===4?s.height=u.readFloat():h===5?s.mask_type=u.readVarint():h===6?s.mask_idx=u.readVarint():h===7&&s.children.push(RS(u,u.readVarint()+u.pos))}class Cre{static calculate(s={},u=[]){const f=new Map,g=new Map;if(Object.keys(s).length===0)return f;u.forEach(m=>{g.set(m.name,m.rgb_color||new zn(0,0,0))});for(const[m,_]of Object.entries(s))g.has(m)?f.set(g.get(m).toStringPremultipliedAlpha(),_):console.warn(`Ignoring unknown image variable "${m}"`);return f}}function z0(h,s=255,u){const f=s/255,g=h.toStringPremultipliedAlpha(),m=u.has(g)?u.get(g).clone():h.clone();return m.a*=f,m.toString()}function Sw(h,s){if(!Yt()){const u=document.createElement("canvas");return u.width=h,u.height=s,u}return new OffscreenCanvas(h,s)}function Sre(h,s){const u=Cre.calculate(s.params,h.metadata?h.metadata.variables:[]),f=h.usvg_tree,g=f.width,m=f.height,_=s.transform?s.transform:new DOMMatrix,b=Math.max(1,Math.round(g*_.a)),O=Math.max(1,Math.round(m*_.d)),D=new DOMMatrix([b/g,0,0,O/m,0,0]),C=Sw(b,O).getContext("2d");return $E(C,D,f,f,u),C.getImageData(0,0,b,O)}function $E(h,s,u,f,g){for(const m of f.children)yk(h,s,u,m,g)}function yk(h,s,u,f,g){f.group?(h.save(),function(m,_,b,O,D){const C=O.mask_idx!=null?b.masks[O.mask_idx]:null,V=O.clip_path_idx!=null?b.clip_paths[O.clip_path_idx]:null;if(O.transform&&(_=SS(O.transform).preMultiplySelf(_)),!function(M,B,J){return M.opacity!==255||B||J}(O,V!=null,C!=null))return void $E(m,_,b,O,D);const I=Sw(m.canvas.width,m.canvas.height),z=I.getContext("2d");$E(z,_,b,O,D),V&&Ck(z,_,b,V),C&&Sk(z,_,b,C,D),m.globalAlpha=O.opacity/255,m.drawImage(I,0,0)}(h,s,u,f.group,g),h.restore()):f.path&&(h.save(),function(m,_,b,O,D){const C=bk(O);m.setTransform(_),O.paint_order===fk.PAINT_ORDER_FILL_AND_STROKE?(Ak(m,b,O,C,D),_k(m,b,O,C,D)):(_k(m,b,O,C,D),Ak(m,b,O,C,D))}(h,s,u,f.path,g),h.restore())}function Ak(h,s,u,f,g){const m=u.fill;if(!m)return;const _=m.opacity/255;switch(m.paint){case"rgb_color":h.fillStyle=z0(m.rgb_color,m.opacity,g);break;case"linear_gradient_idx":h.fillStyle=wk(h,s.linear_gradients[m.linear_gradient_idx],_,g);break;case"radial_gradient_idx":h.fillStyle=Rk(h,s.radial_gradients[m.radial_gradient_idx],_,g)}h.fill(f,vk(u))}function vk(h){return h.rule===HE.PATH_RULE_NON_ZERO?"nonzero":h.rule===HE.PATH_RULE_EVEN_ODD?"evenodd":void 0}function _k(h,s,u,f,g){const m=u.stroke;if(!m)return;h.lineWidth=m.width,h.miterLimit=m.miterlimit,h.setLineDash(m.dasharray),h.lineDashOffset=m.dashoffset;const _=m.opacity/255;switch(m.paint){case"rgb_color":h.strokeStyle=z0(m.rgb_color,m.opacity,g);break;case"linear_gradient_idx":h.strokeStyle=wk(h,s.linear_gradients[m.linear_gradient_idx],_,g);break;case"radial_gradient_idx":h.strokeStyle=Rk(h,s.radial_gradients[m.radial_gradient_idx],_,g)}switch(m.linejoin){case Cw.LINE_JOIN_MITER_CLIP:case Cw.LINE_JOIN_MITER:h.lineJoin="miter";break;case Cw.LINE_JOIN_ROUND:h.lineJoin="round";break;case Cw.LINE_JOIN_BEVEL:h.lineJoin="bevel"}switch(m.linecap){case wS.LINE_CAP_BUTT:h.lineCap="butt";break;case wS.LINE_CAP_ROUND:h.lineCap="round";break;case wS.LINE_CAP_SQUARE:h.lineCap="square"}h.stroke(f)}function wk(h,s,u,f){if(s.stops.length===1){const I=s.stops[0];return z0(I.rgb_color,I.opacity*u,f)}const g=SS(s.transform),{x1:m,y1:_,x2:b,y2:O}=s,D=g.transformPoint(new DOMPoint(m,_)),C=g.transformPoint(new DOMPoint(b,O)),V=h.createLinearGradient(D.x,D.y,C.x,C.y);for(const I of s.stops)V.addColorStop(I.offset,z0(I.rgb_color,I.opacity*u,f));return V}function Rk(h,s,u,f){if(s.stops.length===1){const I=s.stops[0];return z0(I.rgb_color,I.opacity*u,f)}const g=SS(s.transform),{fx:m,fy:_,cx:b,cy:O}=s,D=g.transformPoint(new DOMPoint(m,_)),C=g.transformPoint(new DOMPoint(b,O)),V=h.createRadialGradient(D.x,D.y,0,C.x,C.y,s.r*((g.a+g.d)/2));for(const I of s.stops)V.addColorStop(I.offset,z0(I.rgb_color,I.opacity*u,f));return V}function Tk(h,s,u,f){const g=f.transform?SS(f.transform).preMultiplySelf(s):s,m=Sw(h.canvas.width,h.canvas.height),_=m.getContext("2d");for(const O of f.children)if(O.group)Tk(_,g,u,O.group);else if(O.path){const D=O.path,C=new Path2D;C.addPath(bk(D),g),_.fill(C,vk(D))}const b=f.clip_path_idx!=null?u.clip_paths[f.clip_path_idx]:null;b&&Ck(_,g,u,b),h.globalCompositeOperation="source-over",h.drawImage(m,0,0)}function Ck(h,s,u,f){const g=Sw(h.canvas.width,h.canvas.height);Tk(g.getContext("2d"),s,u,f),h.globalCompositeOperation="destination-in",h.drawImage(g,0,0)}function Sk(h,s,u,f,g){if(f.children.length===0)return;const m=f.mask_idx!=null?u.masks[f.mask_idx]:null;m&&Sk(h,s,u,m,g);const _=h.canvas.width,b=h.canvas.height,O=Sw(_,b),D=O.getContext("2d"),C=f.width,V=f.height,I=f.left,z=f.top,M=new Path2D,B=new Path2D;B.rect(I,z,C,V),M.addPath(B,s),D.clip(M);for(const he of f.children)yk(D,s,u,he,g);const J=D.getImageData(0,0,_,b),te=J.data;if(f.mask_type===pk.MASK_TYPE_LUMINANCE)for(let he=0;he<te.length;he+=4)te[he+3]=te[he+3]/255*(.2126*te[he]+.7152*te[he+1]+.0722*te[he+2]);D.putImageData(J,0,0),h.globalCompositeOperation="destination-in",h.drawImage(O,0,0)}function SS(h){return h?new DOMMatrix([h.sx,h.ky,h.kx,h.sy,h.tx,h.ty]):new DOMMatrix}function bk(h){const s=new Path2D,u=h.step;let f=h.diffs[0]*u,g=h.diffs[1]*u;s.moveTo(f,g);for(let m=0,_=2;m<h.commands.length;m++)switch(h.commands[m]){case V0.PATH_COMMAND_MOVE:f+=h.diffs[_++]*u,g+=h.diffs[_++]*u,s.moveTo(f,g);break;case V0.PATH_COMMAND_LINE:f+=h.diffs[_++]*u,g+=h.diffs[_++]*u,s.lineTo(f,g);break;case V0.PATH_COMMAND_QUAD:{const b=f+h.diffs[_++]*u,O=g+h.diffs[_++]*u;f=b+h.diffs[_++]*u,g=O+h.diffs[_++]*u,s.quadraticCurveTo(b,O,f,g);break}case V0.PATH_COMMAND_CUBIC:{const b=f+h.diffs[_++]*u,O=g+h.diffs[_++]*u,D=b+h.diffs[_++]*u,C=O+h.diffs[_++]*u;f=D+h.diffs[_++]*u,g=C+h.diffs[_++]*u,s.bezierCurveTo(b,O,D,C,f,g);break}case V0.PATH_COMMAND_CLOSE:s.closePath()}return s}class bS{constructor(s){this.capacity=s,this.cache=new Map}get(s){if(!this.cache.has(s))return;const u=this.cache.get(s);return this.cache.delete(s),this.cache.set(s,u),u}put(s,u){this.cache.has(s)?this.cache.delete(s):this.cache.size===this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(s,u)}delete(s){this.cache.delete(s)}}Pt(bS,"LRUCache");class KE{constructor(){this.cacheMap=new Map,this.cacheDependenciesMap=new Map}static _getImage(s){return new xl(s,s.data)}getFromCache(s,u,f){return this.cacheMap.has(f)||this.cacheMap.set(f,new bS(150)),this.cacheMap.get(f).get(ad(s.toString(),u))}setInCache(s,u,f,g){this.cacheDependenciesMap.has(g)||this.cacheDependenciesMap.set(g,new Map),this.cacheMap.has(g)||this.cacheMap.set(g,new bS(150));const m=this.cacheDependenciesMap.get(g),_=ad(s.id.toString(),f);m.get(_)||m.set(_,new Set);const b=this.cacheMap.get(g),O=s.toString();m.get(_).add(O),b.put(ad(s.toString(),f),u)}removeImagesFromCacheByIds(s,u,f=0){if(!this.cacheMap.has(f)||!this.cacheDependenciesMap.has(f))return;const g=this.cacheMap.get(f),m=this.cacheDependenciesMap.get(f);for(const _ of s){const b=ad(_.toString(),u);if(m.has(b)){for(const O of m.get(b))g.delete(O);m.delete(b)}}}rasterize(s,u,f,g,m=Sre){const _=this.getFromCache(s,f,g);if(_)return _.clone();const b=m(u.icon,s.options),O=KE._getImage(b);return this.setInCache(s,O,f,g),O.clone()}}class xk{constructor(s){this.size=s,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(s,u){const f=this.toIdx(s,u);return{min:this.minimums[f],max:this.maximums[f]}}isLeaf(s,u){return this.leaves[this.toIdx(s,u)]}toIdx(s,u){return u*this.size+s}}function Pk(h,s,u,f){let g=0,m=Number.MAX_VALUE;for(let _=0;_<3;_++)if(Math.abs(f[_])<1e-15){if(u[_]<h[_]||u[_]>s[_])return null}else{const b=1/f[_];let O=(h[_]-u[_])*b,D=(s[_]-u[_])*b;if(O>D){const C=O;O=D,D=C}if(O>g&&(g=O),D<m&&(m=D),g>m)return null}return g}function Ek(h,s,u,f,g,m,_,b,O,D,C){const V=f-h,I=g-s,z=m-u,M=_-h,B=b-s,J=O-u,te=C[1]*J-C[2]*B,he=C[2]*M-C[0]*J,de=C[0]*B-C[1]*M,ne=V*te+I*he+z*de;if(Math.abs(ne)<1e-15)return null;const Ae=1/ne,xe=D[0]-h,Oe=D[1]-s,Qe=D[2]-u,Ye=(xe*te+Oe*he+Qe*de)*Ae;if(Ye<0||Ye>1)return null;const Xe=Oe*z-Qe*I,gt=Qe*V-xe*z,et=xe*I-Oe*V,_t=(C[0]*Xe+C[1]*gt+C[2]*et)*Ae;return _t<0||Ye+_t>1?null:(M*Xe+B*gt+J*et)*Ae}function Nk(h,s,u){return(h-s)/(u-s)}function Ok(h,s,u,f,g,m,_,b,O){const D=1<<u,C=m-f,V=_-g,I=(h+1)/D*C+f,z=(s+0)/D*V+g,M=(s+1)/D*V+g;b[0]=(h+0)/D*C+f,b[1]=z,O[0]=I,O[1]=M}class Vk{constructor(s){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=s,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const u=function(m){const _=Math.ceil(Math.log2(m.dim/8)),b=[];let O=Math.ceil(Math.pow(2,_));const D=1/O,C=(z,M,B,J,te)=>{const he=J?1:0,de=(z+1)*B-he,ne=M*B,Ae=(M+1)*B-he;te[0]=z*B,te[1]=ne,te[2]=de,te[3]=Ae};let V=new xk(O);const I=[];for(let z=0;z<O*O;z++){C(z%O,Math.floor(z/O),D,!1,I);const M=vy(I[0],I[1],m),B=vy(I[2],I[1],m),J=vy(I[2],I[3],m),te=vy(I[0],I[3],m);V.minimums.push(Math.min(M,B,J,te)),V.maximums.push(Math.max(M,B,J,te)),V.leaves.push(1)}for(b.push(V),O/=2;O>=1;O/=2){const z=b[b.length-1];V=new xk(O);for(let M=0;M<O*O;M++){C(M%O,Math.floor(M/O),2,!0,I);const B=z.getElevation(I[0],I[1]),J=z.getElevation(I[2],I[1]),te=z.getElevation(I[2],I[3]),he=z.getElevation(I[0],I[3]),de=z.isLeaf(I[0],I[1]),ne=z.isLeaf(I[2],I[1]),Ae=z.isLeaf(I[2],I[3]),xe=z.isLeaf(I[0],I[3]),Oe=Math.min(B.min,J.min,te.min,he.min),Qe=Math.max(B.max,J.max,te.max,he.max),Ye=de&&ne&&Ae&&xe;V.maximums.push(Qe),V.minimums.push(Oe),V.leaves.push(Qe-Oe<=5&&Ye?1:0)}b.push(V)}return b}(this.dem),f=u.length-1,g=u[f];this._addNode(g.minimums[0],g.maximums[0],g.leaves[0]),this._construct(u,0,0,f,0)}raycastRoot(s,u,f,g,m,_,b=1){return Pk([s,u,-100],[f,g,this.maximums[0]*b],m,_)}raycast(s,u,f,g,m,_,b=1){if(!this.nodeCount)return null;const O=this.raycastRoot(s,u,f,g,m,_,b);if(O==null)return null;const D=[],C=[],V=[],I=[],z=[{idx:0,t:O,nodex:0,nodey:0,depth:0}];for(;z.length>0;){const{idx:M,t:B,nodex:J,nodey:te,depth:he}=z.pop();if(this.leaves[M]){Ok(J,te,he,s,u,f,g,V,I);const ne=1<<he,Ae=(J+0)/ne,xe=(J+1)/ne,Oe=(te+0)/ne,Qe=(te+1)/ne,Ye=vy(Ae,Oe,this.dem)*b,Xe=vy(xe,Oe,this.dem)*b,gt=vy(xe,Qe,this.dem)*b,et=vy(Ae,Qe,this.dem)*b,_t=Ek(V[0],V[1],Ye,I[0],V[1],Xe,I[0],I[1],gt,m,_),xt=Ek(I[0],I[1],gt,V[0],I[1],et,V[0],V[1],Ye,m,_),Ct=Math.min(_t!==null?_t:Number.MAX_VALUE,xt!==null?xt:Number.MAX_VALUE);if(Ct!==Number.MAX_VALUE)return Ct;{const Dt=ve.vec3.scaleAndAdd([],m,_,B);if(zk(Ye,Xe,et,gt,Nk(Dt[0],V[0],I[0]),Nk(Dt[1],V[1],I[1]))>=Dt[2])return B}continue}let de=0;for(let ne=0;ne<this._siblingOffset.length;ne++){Ok((J<<1)+this._siblingOffset[ne][0],(te<<1)+this._siblingOffset[ne][1],he+1,s,u,f,g,V,I),V[2]=-100,I[2]=this.maximums[this.childOffsets[M]+ne]*b;const Ae=Pk(V,I,m,_);if(Ae!=null){const xe=Ae;D[ne]=xe;let Oe=!1;for(let Qe=0;Qe<de&&!Oe;Qe++)xe>=D[C[Qe]]&&(C.splice(Qe,0,ne),Oe=!0);Oe||(C[de]=ne),de++}}for(let ne=0;ne<de;ne++){const Ae=C[ne];z.push({idx:this.childOffsets[M]+Ae,t:D[Ae],nodex:(J<<1)+this._siblingOffset[Ae][0],nodey:(te<<1)+this._siblingOffset[Ae][1],depth:he+1})}}return null}_addNode(s,u,f){return this.minimums.push(s),this.maximums.push(u),this.leaves.push(f),this.childOffsets.push(0),this.nodeCount++}_construct(s,u,f,g,m){if(s[g].isLeaf(u,f)===1)return;this.childOffsets[m]||(this.childOffsets[m]=this.nodeCount);const _=g-1,b=s[_];let O=0,D=0;for(let C=0;C<this._siblingOffset.length;C++){const V=2*u+this._siblingOffset[C][0],I=2*f+this._siblingOffset[C][1],z=b.getElevation(V,I),M=b.isLeaf(V,I),B=this._addNode(z.min,z.max,M);M&&(O|=1<<C),D||(D=B)}for(let C=0;C<this._siblingOffset.length;C++)O&1<<C||this._construct(s,2*u+this._siblingOffset[C][0],2*f+this._siblingOffset[C][1],_,D+C)}}function zk(h,s,u,f,g,m){return gr(gr(h,u,m),gr(s,f,m),g)}function vy(h,s,u){const f=u.dim,g=ka(h*f-.5,0,f-1),m=ka(s*f-.5,0,f-1),_=Math.floor(g),b=Math.floor(m),O=Math.min(_+1,f-1),D=Math.min(b+1,f-1);return zk(u.get(_,b),u.get(O,b),u.get(_,D),u.get(O,D),g-_,m-b)}const bre={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function xre(h,s,u){return(256*h*256+256*s+u)/10-1e4}function Pre(h,s,u){return 256*h+s+u/256-32768}class xS{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(s,u,f,g=!1){if(this.uid=s,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(f&&f!=="mapbox"&&f!=="terrarium")return void $r(`"${f}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=u.height;const m=this.dim=u.height-2,_=new Uint32Array(u.data.buffer);if(this.pixels=new Uint8Array(u.data.buffer),this.floatView=new Float32Array(u.data.buffer),this.borderReady=g,this._modifiedForSources={},!g){for(let O=0;O<m;O++)_[this._idx(-1,O)]=_[this._idx(0,O)],_[this._idx(m,O)]=_[this._idx(m-1,O)],_[this._idx(O,-1)]=_[this._idx(O,0)],_[this._idx(O,m)]=_[this._idx(O,m-1)];_[this._idx(-1,-1)]=_[this._idx(0,0)],_[this._idx(m,-1)]=_[this._idx(m-1,0)],_[this._idx(-1,m)]=_[this._idx(0,m-1)],_[this._idx(m,m)]=_[this._idx(m-1,m-1)]}const b=f==="terrarium"?Pre:xre;for(let O=0;O<_.length;++O){const D=4*O;this.floatView[O]=b(this.pixels[D],this.pixels[D+1],this.pixels[D+2])}this._timestamp=Kt.now()}_buildQuadTree(){this._tree=new Vk(this)}get(s,u,f=!1){f&&(s=ka(s,-1,this.dim),u=ka(u,-1,this.dim));const g=this._idx(s,u);return this.floatView[g]}set(s,u,f){const g=this._idx(s,u),m=this.floatView[g];return this.floatView[g]=f,f-m}static getUnpackVector(s){return bre[s]}_idx(s,u){if(s<-1||s>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(s+1)}static pack(s,u){const f=[0,0,0,0],g=xS.getUnpackVector(u);let m=Math.floor((s+g[3])/g[2]);return f[2]=m%256,m=Math.floor(m/256),f[1]=m%256,m=Math.floor(m/256),f[0]=m,f}getPixels(){return new z1({width:this.stride,height:this.stride},this.pixels)}backfillBorder(s,u,f){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let g=u*this.dim,m=u*this.dim+this.dim,_=f*this.dim,b=f*this.dim+this.dim;switch(u){case-1:g=m-1;break;case 1:m=g+1}switch(f){case-1:_=b-1;break;case 1:b=_+1}const O=-u*this.dim,D=-f*this.dim;for(let C=_;C<b;C++)for(let V=g;V<m;V++){const I=4*this._idx(V,C),z=4*this._idx(V+O,C+D);this.pixels[I+0]=s.pixels[z+0],this.pixels[I+1]=s.pixels[z+1],this.pixels[I+2]=s.pixels[z+2],this.pixels[I+3]=s.pixels[z+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}function Ere(h,s,u){h===1?s.headerLength=u.readFixed32():h===2?s.x=u.readVarint():h===3?s.y=u.readVarint():h===4?s.z=u.readVarint():h===5&&s.layers.push(function(f,g){return f.readFields(Dre,{version:0,name:"",units:"",tileSize:0,buffer:0,pixelFormat:0,dataIndex:[]},g)}(u,u.readVarint()+u.pos))}function Nre(h,s,u){h===1?(s.delta_filter=function(f,g){return f.readFields(Ore,{blockSize:0},g)}(u,u.readVarint()+u.pos),s.filter="delta_filter"):h===2?(u.readVarint(),s.filter="zigzag_filter"):h===3?(u.readVarint(),s.filter="bitshuffle_filter"):h===4&&(u.readVarint(),s.filter="byteshuffle_filter")}function Ore(h,s,u){h===1&&(s.blockSize=u.readVarint())}function Vre(h,s,u){h===1?(u.readVarint(),s.codec="gzip_data"):h===2?(u.readVarint(),s.codec="jpeg_image"):h===3?(u.readVarint(),s.codec="webp_image"):h===4&&(u.readVarint(),s.codec="png_image")}function zre(h,s,u){let f=0,g=0;h===1?s.firstByte=u.readFixed64():h===2?s.lastByte=u.readFixed64():h===3?s.filters.push(function(m,_){return m.readFields(Nre,{},_)}(u,u.readVarint()+u.pos)):h===4?s.codec=function(m,_){return m.readFields(Vre,{},_)}(u,u.readVarint()+u.pos):h===5?g=u.readFloat():h===6?f=u.readFloat():h===7?s.bands.push(u.readString()):h===8?s.offset=u.readDouble():h===9&&(s.scale=u.readDouble()),s.offset===0&&(s.offset=g),s.scale===0&&(s.scale=f)}function Dre(h,s,u){h===1?s.version=u.readVarint():h===2?s.name=u.readString():h===3?s.units=u.readString():h===4?s.tileSize=u.readVarint():h===5?s.buffer=u.readVarint():h===6?s.pixelFormat=u.readVarint():h===7&&s.dataIndex.push(function(f,g){return f.readFields(zre,{firstByte:0,lastByte:0,filters:[],codec:null,offset:0,scale:0,bands:[]},g)}(u,u.readVarint()+u.pos))}function Mre(h,s,u){if(h===2)(function(f,g,m){f.readFields(Ire,m,g)})(u,u.readVarint()+u.pos,s);else if(h===3)throw new Error("Not implemented")}function Ire(h,s,u){if(h===1){let f=0;const g=u.readVarint()+u.pos;for(;u.pos<g;)s[f++]=u.readVarint()}}function Lre(h,s){if(s.length!==4)throw new Error(`Expected data of dimension 4 but got ${s.length}.`);let u=s[3];for(let f=2;f>=1;f--){const g=f===1?1:0,m=f===2?1:0;for(let _=0;_<s[0];_++){const b=s[1]*_;for(let O=g;O<s[1];O++){const D=s[2]*(O+b);for(let C=m;C<s[2];C++){const V=s[3]*(C+D);for(let I=0;I<s[3];I++){const z=V+I;h[z]+=h[z-u]}}}}u*=s[f]}return h}function Fre(h){for(let s=0,u=h.length;s<u;s++)h[s]=h[s]>>>1^-(1&h[s]);return h}function kre(h,s){switch(s){case"uint32":return h;case"uint16":for(let u=0;u<h.length;u+=2){const f=h[u],g=h[u+1];h[u]=(240&f)>>4|(61440&f)>>8|(240&g)<<4|61440&g,h[u+1]=15&f|(3840&f)>>4|(15&g)<<8|(3840&g)<<4}return h;case"uint8":for(let u=0;u<h.length;u+=4){const f=h[u],g=h[u+1],m=h[u+2],_=h[u+3];h[u+0]=(192&f)>>6|(192&g)>>4|(192&m)>>2|192&_,h[u+1]=(48&f)>>4|(48&g)>>2|48&m|(48&_)<<2,h[u+2]=(12&f)>>2|12&g|(12&m)<<2|(12&_)<<4,h[u+3]=3&f|(3&g)<<2|(3&m)<<4|(3&_)<<6}return h;default:throw new Error(`Invalid pixel format, "${s}"`)}}Pt(xS,"DEMData"),Pt(Vk,"DemMinMaxQuadTree",{omit:["dem"]});var sf=Uint8Array,bw=Uint16Array,Ure=Int32Array,Dk=new sf([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Mk=new sf([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Bre=new sf([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ik=function(h,s){for(var u=new bw(31),f=0;f<31;++f)u[f]=s+=1<<h[f-1];var g=new Ure(u[30]);for(f=1;f<30;++f)for(var m=u[f];m<u[f+1];++m)g[m]=m-u[f]<<5|f;return{b:u,r:g}},Lk=Ik(Dk,2),Fk=Lk.b,jre=Lk.r;Fk[28]=258,jre[258]=28;for(var Gre=Ik(Mk,0).b,kk=new bw(32768),Do=0;Do<32768;++Do){var D0=(43690&Do)>>1|(21845&Do)<<1;kk[Do]=((65280&(D0=(61680&(D0=(52428&D0)>>2|(13107&D0)<<2))>>4|(3855&D0)<<4))>>8|(255&D0)<<8)>>1}var xw=function(h,s,u){for(var f=h.length,g=0,m=new bw(s);g<f;++g)h[g]&&++m[h[g]-1];var _,b=new bw(s);for(g=1;g<s;++g)b[g]=b[g-1]+m[g-1]<<1;_=new bw(1<<s);var O=15-s;for(g=0;g<f;++g)if(h[g])for(var D=g<<4|h[g],C=s-h[g],V=b[h[g]-1]++<<C,I=V|(1<<C)-1;V<=I;++V)_[kk[V]>>O]=D;return _},Pw=new sf(288);for(Do=0;Do<144;++Do)Pw[Do]=8;for(Do=144;Do<256;++Do)Pw[Do]=9;for(Do=256;Do<280;++Do)Pw[Do]=7;for(Do=280;Do<288;++Do)Pw[Do]=8;var Uk=new sf(32);for(Do=0;Do<32;++Do)Uk[Do]=5;var Zre=xw(Pw,9),qre=xw(Uk,5),WE=function(h){for(var s=h[0],u=1;u<h.length;++u)h[u]>s&&(s=h[u]);return s},Ep=function(h,s,u){var f=s/8|0;return(h[f]|h[f+1]<<8)>>(7&s)&u},YE=function(h,s){var u=s/8|0;return(h[u]|h[u+1]<<8|h[u+2]<<16)>>(7&s)},Hre=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Np=function(h,s,u){var f=new Error(s||Hre[h]);if(f.code=h,Error.captureStackTrace&&Error.captureStackTrace(f,Np),!u)throw f;return f},$re=new sf(0),Kre=typeof TextDecoder<"u"&&new TextDecoder;try{Kre.decode($re,{stream:!0})}catch{}const Wre={gzip_data:"gzip"};class Zf extends Error{constructor(s){super(s),this.name="MRTError"}}const Yre={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},Bk={uint32:1,uint16:2,uint8:4},Xre={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};let XE;class PS{constructor(s=5){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=s}getLayer(s){const u=this.layers[s];if(!u)throw new Zf(`Layer '${s}' not found`);return u}getHeaderLength(s){const u=new Uint8Array(s),f=new DataView(s);if(u[0]!==13)throw new Zf("File is not a valid MRT.");return f.getUint32(1,!0)}parseHeader(s){const u=new Uint8Array(s),f=this.getHeaderLength(s);if(u.length<f)throw new Zf(`Expected header with length >= ${f} but got buffer of length ${u.length}`);const g=function(m,_){return m.readFields(Ere,{headerLength:0,x:0,y:0,z:0,layers:[]},void 0)}(new XE(u.subarray(0,f)));if(!isNaN(this.x)&&(this.x!==g.x||this.y!==g.y||this.z!==g.z))throw new Zf(`Invalid attempt to parse header ${g.z}/${g.x}/${g.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=g.x,this.y=g.y,this.z=g.z;for(const m of g.layers)this.layers[m.name]=new jk(m,{cacheSize:this._cacheSize});return this}createDecodingTask(s){const u=[],f=this.getLayer(s.layerName);for(let g of s.blockIndices){const m=f.dataIndex[g],_=m.firstByte-s.firstByte,b=m.lastByte-s.firstByte;if(f._blocksInProgress.has(g))continue;const O={layerName:f.name,firstByte:_,lastByte:b,pixelFormat:f.pixelFormat,blockIndex:g,blockShape:[m.bands.length].concat(f.bandShape),buffer:f.buffer,codec:m.codec.codec,filters:m.filters.map(D=>D.filter)};f._blocksInProgress.add(g),u.push(O)}return new Gk(u,()=>{u.forEach(g=>f._blocksInProgress.delete(g.blockIndex))},(g,m)=>{if(u.forEach(_=>f._blocksInProgress.delete(_.blockIndex)),g)throw g;m.forEach(_=>{this.getLayer(_.layerName).processDecodedData(_)})})}}class jk{constructor({version:s,name:u,units:f,tileSize:g,pixelFormat:m,buffer:_,dataIndex:b},O){if(this.version=s,this.version!==1)throw new Zf(`Cannot parse raster layer encoded with MRT version ${s}`);this.name=u,this.units=f,this.tileSize=g,this.buffer=_,this.pixelFormat=Yre[m],this.dataIndex=b,this.bandShape=[g+2*_,g+2*_,Bk[this.pixelFormat]],this._decodedBlocks=new bS(O?O.cacheSize:5),this._blocksInProgress=new Set}get dimension(){return Bk[this.pixelFormat]}get cacheSize(){return this._decodedBlocks.capacity}getBandList(){return this.dataIndex.map(({bands:s})=>s).flat()}processDecodedData(s){const u=s.blockIndex.toString();this._decodedBlocks.get(u)||this._decodedBlocks.put(u,s.data)}getBlockForBand(s){let u=0;switch(typeof s){case"string":for(const[f,g]of this.dataIndex.entries()){for(const[m,_]of g.bands.entries())if(_===s)return{bandIndex:u+m,blockIndex:f,blockBandIndex:m};u+=g.bands.length}break;case"number":for(const[f,g]of this.dataIndex.entries()){if(s>=u&&s<u+g.bands.length)return{bandIndex:s,blockIndex:f,blockBandIndex:s-u};u+=g.bands.length}break;default:throw new Zf(`Invalid band \`${JSON.stringify(s)}\`. Expected string or integer.`)}throw new Zf(`Band not found: ${JSON.stringify(s)}`)}getDataRange(s){let u=1/0,f=-1/0;const g=[],m=new Set;for(const _ of s){const{blockIndex:b}=this.getBlockForBand(_);if(b<0)throw new Zf(`Invalid band: ${JSON.stringify(_)}`);const O=this.dataIndex[b];g.includes(b)||g.push(b),m.add(b),u=Math.min(u,O.firstByte),f=Math.max(f,O.lastByte)}if(m.size>this.cacheSize)throw new Zf(`Number of blocks to decode (${m.size}) exceeds cache size (${this.cacheSize}).`);return{layerName:this.name,firstByte:u,lastByte:f,blockIndices:g}}hasBand(s){const{blockIndex:u}=this.getBlockForBand(s);return u>=0}hasDataForBand(s){const{blockIndex:u}=this.getBlockForBand(s);return u>=0&&!!this._decodedBlocks.get(u.toString())}getBandView(s){const{blockIndex:u,blockBandIndex:f}=this.getBlockForBand(s),g=this._decodedBlocks.get(u.toString());if(!g)throw new Zf(`Data for band ${JSON.stringify(s)} of layer "${this.name}" not decoded.`);const m=this.dataIndex[u],_=this.bandShape.reduce((D,C)=>D*C,1),b=f*_,O=g.subarray(b,b+_);return{data:O,bytes:new Uint8Array(O.buffer).subarray(O.byteOffset,O.byteOffset+O.byteLength),tileSize:this.tileSize,buffer:this.buffer,pixelFormat:this.pixelFormat,dimension:this.dimension,offset:m.offset,scale:m.scale}}}PS.setPbf=function(h){XE=h};class Gk{constructor(s,u,f){this.tasks=s,this._onCancel=u,this._onComplete=f,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(s,u){this._finalized||(this._onComplete(s,u),this._finalized=!0)}}PS.performDecoding=function(h,s){const u=new Uint8Array(h);return Promise.all(s.tasks.map(f=>{const{layerName:g,firstByte:m,lastByte:_,pixelFormat:b,blockShape:O,blockIndex:D,filters:C,codec:V}=f,I=u.subarray(m,_+1),z=new Uint32Array(O[0]*O[1]*O[2]);let M;if(V!=="gzip_data")throw new Zf(`Unhandled codec: ${V}`);return M=function(B,J){if(!globalThis.DecompressionStream&&J==="gzip_data")return Promise.resolve(((ne=function(Oe){Oe[0]==31&&Oe[1]==139&&Oe[2]==8||Np(6,"invalid gzip data");var Qe=Oe[3],Ye=10;4&Qe&&(Ye+=2+(Oe[10]|Oe[11]<<8));for(var Xe=(Qe>>3&1)+(Qe>>4&1);Xe>0;Xe-=!Oe[Ye++]);return Ye+(2&Qe)}(de=B))+8>de.length&&Np(6,"invalid gzip data"),function(Oe,Qe,Ye,Xe){var gt=Oe.length;if(!gt||Qe.f&&!Qe.l)return Ye||new sf(0);var et=!Ye,_t=et||Qe.i!=2,xt=Qe.i;et&&(Ye=new sf(3*gt));var Ct,Dt,Nt=function(wy){var Ry=Ye.length;if(wy>Ry){var YA=new sf(Math.max(2*Ry,wy));YA.set(Ye),Ye=YA}},jt=Qe.f||0,Lt=Qe.p||0,Ht=Qe.b||0,Aa=Qe.l,ma=Qe.d,er=Qe.m,Oa=Qe.n,Da=8*gt;do{if(!Aa){jt=Ep(Oe,Lt,1);var Ra=Ep(Oe,Lt+1,3);if(Lt+=3,!Ra){var Rr=Oe[(Br=4+((Lt+7)/8|0))-4]|Oe[Br-3]<<8,Xa=Br+Rr;if(Xa>gt){xt&&Np(0);break}_t&&Nt(Ht+Rr),Ye.set(Oe.subarray(Br,Xa),Ht),Qe.b=Ht+=Rr,Qe.p=Lt=8*Xa,Qe.f=jt;continue}if(Ra==1)Aa=Zre,ma=qre,er=9,Oa=5;else if(Ra==2){var dr=Ep(Oe,Lt,31)+257,Lr=Ep(Oe,Lt+10,15)+4,sn=dr+Ep(Oe,Lt+5,31)+1;Lt+=14;for(var Zr=new sf(sn),vn=new sf(19),rn=0;rn<Lr;++rn)vn[Bre[rn]]=Ep(Oe,Lt+3*rn,7);Lt+=3*Lr;var En=WE(vn),Jn=(1<<En)-1,Li=xw(vn,En);for(rn=0;rn<sn;){var Br,Ln=Li[Ep(Oe,Lt,Jn)];if(Lt+=15&Ln,(Br=Ln>>4)<16)Zr[rn++]=Br;else{var is=0,gs=0;for(Br==16?(gs=3+Ep(Oe,Lt,3),Lt+=2,is=Zr[rn-1]):Br==17?(gs=3+Ep(Oe,Lt,7),Lt+=3):Br==18&&(gs=11+Ep(Oe,Lt,127),Lt+=7);gs--;)Zr[rn++]=is}}var bs=Zr.subarray(0,dr),ks=Zr.subarray(dr);er=WE(bs),Oa=WE(ks),Aa=xw(bs,er),ma=xw(ks,Oa)}else Np(1);if(Lt>Da){xt&&Np(0);break}}_t&&Nt(Ht+131072);for(var Vi=(1<<er)-1,pl=(1<<Oa)-1,Dc=Lt;;Dc=Lt){var So=(is=Aa[YE(Oe,Lt)&Vi])>>4;if((Lt+=15&is)>Da){xt&&Np(0);break}if(is||Np(2),So<256)Ye[Ht++]=So;else{if(So==256){Dc=Lt,Aa=null;break}var Mo=So-254;So>264&&(Mo=Ep(Oe,Lt,(1<<(of=Dk[rn=So-257]))-1)+Fk[rn],Lt+=of);var Gu=ma[YE(Oe,Lt)&pl],ql=Gu>>4;if(Gu||Np(3),Lt+=15&Gu,ks=Gre[ql],ql>3){var of=Mk[ql];ks+=YE(Oe,Lt)&(1<<of)-1,Lt+=of}if(Lt>Da){xt&&Np(0);break}_t&&Nt(Ht+131072);var _y=Ht+Mo;if(Ht<ks){var qf=0-ks,Vp=Math.min(ks,_y);for(qf+Ht<0&&Np(3);Ht<Vp;++Ht)Ye[Ht]=(void 0)[qf+Ht]}for(;Ht<_y;++Ht)Ye[Ht]=Ye[Ht-ks]}}Qe.l=Aa,Qe.p=Dc,Qe.b=Ht,Qe.f=jt,Aa&&(jt=1,Qe.m=er,Qe.d=ma,Qe.n=Oa)}while(!jt);return Ht!=Ye.length&&et?(Ct=Ye,((Dt=Ht)==null||Dt>Ct.length)&&(Dt=Ct.length),new sf(Ct.subarray(0,Dt))):Ye.subarray(0,Ht)}(de.subarray(ne,-8),{i:2},new sf(((te=de)[(he=te.length)-4]|te[he-3]<<8|te[he-2]<<16|te[he-1]<<24)>>>0))));var te,he,de,ne;const Ae=Wre[J];if(!Ae)throw new Error(`Unhandled codec: ${J}`);const xe=new globalThis.DecompressionStream(Ae);return new Response(new Blob([B]).stream().pipeThrough(xe)).arrayBuffer().then(Oe=>new Uint8Array(Oe))}(I,V).then(B=>(function(J,te){J.readFields(Mre,te)}(new XE(B),z),new Xre[b](z.buffer))),M.then(B=>{for(let J=C.length-1;J>=0;J--)switch(C[J]){case"delta_filter":Lre(B,O);break;case"zigzag_filter":Fre(B);break;case"bitshuffle_filter":kre(B,b);break;default:throw new Zf(`Unhandled filter "${C[J]}"`)}return{layerName:g,blockIndex:D,data:B}}).catch(B=>{throw B})}))},Pt(Gk,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]}),Pt(PS,"MapboxRasterTile"),Pt(jk,"MapboxRasterLayer",{omit:["_blocksInProgress"]});let Ew,JE,Op,M0,QE,I0=null;function Zk(){return oi()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:JE||Ne.DRACO_URL}function qk(){if(oi()&&self.worker&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(M0)return M0;const h=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return M0=WebAssembly.validate(h)?Ne.MESHOPT_SIMD_URL:Ne.MESHOPT_URL,M0}const ES={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Jre={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},Nw={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function Hk(h,s,u){const f=u.json.bufferViews.length,g=u.buffers.length;s.bufferView=f,u.json.bufferViews[f]={buffer:g,byteLength:h.byteLength},u.buffers[g]=h}const eN="KHR_draco_mesh_compression";function Qre(h,s){const u=h.extensions&&h.extensions[eN];if(!u)return;const f=new Op.Decoder,g=Yk(s,u.bufferView),m=new Op.Mesh;if(!f.DecodeArrayToMesh(g,g.byteLength,m))throw new Error("Failed to decode Draco mesh");const _=s.json.accessors[h.indices],b=ES[_.componentType],O=_.count*b.BYTES_PER_ELEMENT,D=Op._malloc(O);b===Uint16Array?f.GetTrianglesUInt16Array(m,O,D):f.GetTrianglesUInt32Array(m,O,D),Hk(Op.memory.buffer.slice(D,D+O),_,s),Op._free(D);for(const C of Object.keys(u.attributes)){const V=f.GetAttributeByUniqueId(m,u.attributes[C]),I=s.json.accessors[h.attributes[C]],z=Jre[I.componentType],M=I.count*Nw[I.type]*ES[I.componentType].BYTES_PER_ELEMENT,B=Op._malloc(M);f.GetAttributeDataArrayForAllPoints(m,V,Op[z],M,B),Hk(Op.memory.buffer.slice(B,B+M),I,s),Op._free(B)}f.destroy(),m.destroy(),delete h.extensions[eN]}const NS="EXT_meshopt_compression";function ene(h,s){if(!h.extensions||!h.extensions[NS])return;const u=h.extensions[NS],f=new Uint8Array(s.buffers[u.buffer],u.byteOffset||0,u.byteLength||0),g=new Uint8Array(u.count*u.byteStride);QE.decodeGltfBuffer(g,u.count,u.byteStride,f,u.mode,u.filter),h.buffer=s.buffers.length,h.byteOffset=0,s.buffers[h.buffer]=g.buffer,delete h.extensions[NS]}const $k=1179937895,Kk=new TextDecoder("utf8");function Wk(h,s){return new URL(h,s).href}function tne(h,s,u,f){return fetch(Wk(h.uri,f)).then(g=>g.arrayBuffer()).then(g=>{s.buffers[u]=g})}function Yk(h,s){const u=h.json.bufferViews[s];return new Uint8Array(h.buffers[u.buffer],u.byteOffset||0,u.byteLength)}function ane(h,s,u,f){if(h.uri){const g=Wk(h.uri,f);return fetch(g).then(m=>m.blob()).then(m=>createImageBitmap(m)).then(m=>{s.images[u]=m})}if(h.bufferView!==void 0){const g=Yk(s,h.bufferView),m=new Blob([g],{type:h.mimeType});return createImageBitmap(m).then(_=>{s.images[u]=_})}}function Xk(h,s=0,u){const f={json:null,images:[],buffers:[]};if(new Uint32Array(h,s,1)[0]===$k){const C=new Uint32Array(h,s);let V=2;const I=(C[V++]>>2)-3,z=C[V++]>>2;if(V++,f.json=JSON.parse(Kk.decode(C.subarray(V,V+z))),V+=z,V<I){const M=C[V++];V++;const B=s+(V<<2);f.buffers[0]=h.slice(B,B+M)}}else f.json=JSON.parse(Kk.decode(new Uint8Array(h,s)));const{buffers:g,images:m,meshes:_,extensionsUsed:b,bufferViews:O}=f.json;let D=Promise.resolve();if(g){const C=[];for(let V=0;V<g.length;V++){const I=g[V];I.uri?C.push(tne(I,f,V,u)):f.buffers[V]||(f.buffers[V]=null)}D=Promise.all(C)}return D.then(()=>{const C=[],V=b&&b.includes(eN),I=b&&b.includes(NS);if(V&&C.push(function(){if(!Op)return Ew??(Ew=function(z){let M,B=null;function J(){M=new Uint8Array(B.buffer)}function te(){throw new Error("Unexpected Draco error.")}const he={a:{a:te,d:function(de,ne,Ae){return M.copyWithin(de,ne,ne+Ae)},c:function(de){const ne=M.length,Ae=Math.max(de>>>0,Math.ceil(1.2*ne)),xe=Math.ceil((Ae-ne)/65536);try{return B.grow(xe),J(),!0}catch{return!1}},b:te}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(z,he):z.then(de=>de.arrayBuffer()).then(de=>WebAssembly.instantiate(de,he))).then(de=>{const{Rb:ne,Qb:Ae,P:xe,T:Oe,X:Qe,Ja:Ye,La:Xe,Qa:gt,Va:et,Wa:_t,eb:xt,jb:Ct,f:Dt,e:Nt,yb:jt,zb:Lt,Ab:Ht,Bb:Aa,Db:ma,Gb:er}=de.instance.exports;B=Nt;const Oa=(()=>{let Da=0,Ra=0,Rr=0,Xa=0;return dr=>{Rr&&(ne(Xa),ne(Da),Ra+=Rr,Rr=Da=0),Da||(Ra+=128,Da=Ae(Ra));const Lr=dr.length+7&-8;let sn=Da;Lr>=Ra&&(Rr=Lr,sn=Xa=Ae(Lr));for(let Zr=0;Zr<dr.length;Zr++)M[sn+Zr]=dr[Zr];return sn}})();return J(),Dt(),{memory:Nt,_free:ne,_malloc:Ae,Mesh:class{constructor(){this.ptr=xe()}destroy(){Oe(this.ptr)}},Decoder:class{constructor(){this.ptr=Ye()}destroy(){Ct(this.ptr)}DecodeArrayToMesh(Da,Ra,Rr){const Xa=Oa(Da),dr=Xe(this.ptr,Xa,Ra,Rr.ptr);return!!Qe(dr)}GetAttributeByUniqueId(Da,Ra){return{ptr:gt(this.ptr,Da.ptr,Ra)}}GetTrianglesUInt16Array(Da,Ra,Rr){et(this.ptr,Da.ptr,Ra,Rr)}GetTrianglesUInt32Array(Da,Ra,Rr){_t(this.ptr,Da.ptr,Ra,Rr)}GetAttributeDataArrayForAllPoints(Da,Ra,Rr,Xa,dr){xt(this.ptr,Da.ptr,Ra.ptr,Rr,Xa,dr)}},DT_INT8:jt(),DT_UINT8:Lt(),DT_INT16:Ht(),DT_UINT16:Aa(),DT_UINT32:ma(),DT_FLOAT32:er()}})}(fetch(Zk())),Ew.then(z=>{Op=z,Ew=void 0}))}()),I&&C.push(function(){if(QE)return;const z=function(M){let B;const J=WebAssembly.instantiateStreaming(M,{}).then(de=>{B=de.instance,B.exports.__wasm_call_ctors()}),te={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},he={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:J,supported:!0,decodeGltfBuffer(de,ne,Ae,xe,Oe,Qe){(function(Ye,Xe,gt,et,_t,xt,Ct){const Dt=Ye.exports.sbrk,Nt=et+3&-4,jt=Dt(Nt*_t),Lt=Dt(xt.length),Ht=new Uint8Array(Ye.exports.memory.buffer);Ht.set(xt,Lt);const Aa=Xe(jt,et,_t,Lt,xt.length);if(Aa===0&&Ct&&Ct(jt,Nt,_t),gt.set(Ht.subarray(jt,jt+et*_t)),Dt(jt-Dt(0)),Aa!==0)throw new Error(`Malformed buffer data: ${Aa}`)})(B,B.exports[he[Oe]],de,ne,Ae,xe,B.exports[te[Qe]])}}}(fetch(qk()));return z.ready.then(()=>{QE=z})}()),m)for(let z=0;z<m.length;z++)C.push(ane(m[z],f,z,u));return(C.length?Promise.all(C):Promise.resolve()).then(()=>{if(V&&_)for(const{primitives:z}of _)for(const M of z)Qre(M,f);if(I&&_&&O)for(const z of O)ene(z,f);return f})})}function WA(h,s){const u=h.json.bufferViews[s.bufferView],f=ES[s.componentType];return new f(h.buffers[u.buffer],(s.byteOffset||0)+(u.byteOffset||0),s.count*(u.byteStride&&u.byteStride!==Nw[s.type]*f.BYTES_PER_ELEMENT?u.byteStride/f.BYTES_PER_ELEMENT:Nw[s.type]))}function tN(h,s,u,f){const g=ES[s.componentType],m=function(C){switch(C){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(g),_=h.json.bufferViews[s.bufferView],b=_.byteStride?_.byteStride/g.BYTES_PER_ELEMENT:Nw[s.type],O=u.float32,D=O.length/u.capacity;for(let C=0,V=0;C<s.count*b;C+=b,V+=D)for(let I=0;I<D;I++)O[V+I]=f[C+I]*m;u._trim()}function rne(h,s,u){const f=h.indices,g=h.attributes,m={};m.indexArray=new Ls;const _=s.json.accessors[f],b=_.count/3;m.indexArray.reserve(b);const O=WA(s,_);for(let I=0;I<b;I++)m.indexArray.emplaceBack(O[3*I],O[3*I+1],O[3*I+2]);m.indexArray._trim(),m.vertexArray=new Vo;const D=s.json.accessors[g.POSITION];m.vertexArray.reserve(D.count);const C=WA(s,D);for(let I=0;I<D.count;I++)m.vertexArray.emplaceBack(C[3*I],C[3*I+1],C[3*I+2]);if(m.vertexArray._trim(),m.aabb=new rr(D.min,D.max),m.centroid=function(I,z){const M=[0,0,0],B=I.length;if(B>0){for(let J=0;J<B;J++){const te=3*I[J];M[0]+=z[te],M[1]+=z[te+1],M[2]+=z[te+2]}M[0]/=B,M[1]/=B,M[2]/=B}return M}(O,C),g.COLOR_0!==void 0){const I=s.json.accessors[g.COLOR_0],z=Nw[I.type],M=WA(s,I);m.colorArray=z===3?new Vo:new id,m.colorArray.resize(I.count),tN(s,I,m.colorArray,M)}if(g.NORMAL!==void 0){m.normalArray=new Vo;const I=s.json.accessors[g.NORMAL];m.normalArray.resize(I.count);const z=WA(s,I);tN(s,I,m.normalArray,z)}if(g.TEXCOORD_0!==void 0&&u.length>0){m.texcoordArray=new Qh;const I=s.json.accessors[g.TEXCOORD_0];m.texcoordArray.resize(I.count);const z=WA(s,I);tN(s,I,m.texcoordArray,z)}if(g._FEATURE_ID_RGBA4444!==void 0){const I=s.json.accessors[g._FEATURE_ID_RGBA4444];s.json.extensionsUsed&&s.json.extensionsUsed.includes("EXT_meshopt_compression")&&(m.featureData=WA(s,I))}g._FEATURE_RGBA4444!==void 0&&(m.featureData=new Uint32Array(WA(s,s.json.accessors[g._FEATURE_RGBA4444]).buffer));const V=h.material;return m.material=function(I,z){const{emissiveFactor:M=[0,0,0],alphaMode:B="OPAQUE",alphaCutoff:J=.5,normalTexture:te,occlusionTexture:he,emissiveTexture:de,doubleSided:ne}=I,{baseColorFactor:Ae=[1,1,1,1],metallicFactor:xe=1,roughnessFactor:Oe=1,baseColorTexture:Qe,metallicRoughnessTexture:Ye}=I.pbrMetallicRoughness||{},Xe=he?z[he.index]:void 0;if(he&&he.extensions&&he.extensions.KHR_texture_transform&&Xe){const gt=he.extensions.KHR_texture_transform;Xe.offsetScale=[gt.offset[0],gt.offset[1],gt.scale[0],gt.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new zn(...Ae),metallicFactor:xe,roughnessFactor:Oe,baseColorTexture:Qe?z[Qe.index]:void 0,metallicRoughnessTexture:Ye?z[Ye.index]:void 0},doubleSided:ne,emissiveFactor:M,alphaMode:B,alphaCutoff:J,normalTexture:te?z[te.index]:void 0,occlusionTexture:Xe,emissionTexture:de?z[de.index]:void 0,defined:I.defined===void 0}}(V!==void 0?s.json.materials[V]:{defined:!1},u),m}function Jk(h,s,u){const{matrix:f,rotation:g,translation:m,scale:_,mesh:b,extras:O,children:D}=h,C={};if(C.matrix=f||ve.mat4.fromRotationTranslationScale([],g||[0,0,0,1],m||[0,0,0],_||[1,1,1]),b!==void 0){C.meshes=u[b];const V=C.anchor=[0,0];for(const I of C.meshes){const{min:z,max:M}=I.aabb;V[0]+=z[0]+M[0],V[1]+=z[1]+M[1]}V[0]=Math.floor(V[0]/C.meshes.length/2),V[1]=Math.floor(V[1]/C.meshes.length/2)}if(O&&(O.id&&(C.id=O.id),O.lights&&(C.lights=function(V){if(!V.length)return[];const I=function(te){const he=atob(te),de=new Uint8Array(he.length);for(let ne=0;ne<he.length;ne++)de[ne]=he.codePointAt(ne);return de}(V),z=[],M=I.length/24,B=new Uint16Array(I.buffer),J=new Float32Array(I.buffer);for(let te=0;te<M;te++){const he=B[2*te*6]/30,de=B[2*te*6+1]/30,ne=B[2*te*6+10]/100,Ae=J[6*te+1],xe=J[6*te+2],Oe=J[6*te+3],Qe=J[6*te+4],Ye=Oe-Ae,Xe=Qe-xe,gt=Math.hypot(Ye,Xe);z.push({pos:[Ae+.5*Ye,xe+.5*Xe,de],normal:[Xe/gt,-Ye/gt,0],width:gt,height:he,depth:ne,points:[Ae,xe,Oe,Qe]})}return z}(O.lights))),D){const V=[];for(const I of D)V.push(Jk(s.json.nodes[I],s,u));C.children=V}return C}function nne(h){if(h.vertices.length===0||h.indices.length===0)return null;const s=new j1(h.vertices,h.indices,8,256),[u,f]=[s.min.clone(),s.max.clone()];return{vertices:h.vertices,indices:h.indices,grid:s,min:u,max:f}}function ine(h){if(!h.extras||!h.extras.ground)return null;const s=h.extras.ground;if(!s||!Array.isArray(s)||s.length===0)return null;const u=s[0];if(!u||!Array.isArray(u)||u.length===0)return null;const f=[];for(const _ of u){if(!Array.isArray(_)||_.length!==2)continue;const b=_[0],O=_[1];typeof b=="number"&&typeof O=="number"&&f.push(new It(b,O))}if(f.length<3)return null;f.length>1&&f[f.length-1].equals(f[0])&&f.pop();let g=0;for(let _=0;_<f.length;_++){const b=f[_],O=f[(_+1)%f.length],D=f[(_+2)%f.length];g+=(b.x-O.x)*(D.y-O.y)-(D.x-O.x)*(b.y-O.y)}g>0&&f.reverse();const m=PA(f.flatMap(_=>[_.x,_.y]),[]);return m.length===0?null:{vertices:f,indices:m}}function sne(h,s){const u=[],f=[];let g=0;const m=[];for(const _ of h){g=u.length;const b=_.vertexArray.float32,O=_.indexArray.uint16;for(let D=0;D<_.vertexArray.length;D++)m[0]=b[3*D+0],m[1]=b[3*D+1],m[2]=b[3*D+2],ve.vec3.transformMat4(m,m,s),u.push(new It(m[0],m[1]));for(let D=0;D<3*_.indexArray.length;D++)f.push(O[D]+g)}if(f.length%3!=0)return null;for(let _=0;_<f.length;_+=3){const b=u[f[_+0]],O=u[f[_+1]],D=u[f[_+2]];(b.x-O.x)*(D.y-O.y)-(D.x-O.x)*(b.y-O.y)>0&&([f[_+1],f[_+2]]=[f[_+2],f[_+1]])}return{vertices:u,indices:f}}function Qk(h){const s=function(O,D){const C=[],V=WebGL2RenderingContext;if(O.json.textures)for(const I of O.json.textures){const z={magFilter:V.LINEAR,minFilter:V.NEAREST,wrapS:V.REPEAT,wrapT:V.REPEAT};I.sampler!==void 0&&Object.assign(z,O.json.samplers[I.sampler]),C.push({image:D[I.source],sampler:z,uploaded:!1})}return C}(h,h.images),u=function(O,D){const C=[];for(const V of O.json.meshes){const I=[];for(const z of V.primitives)I.push(rne(z,O,D));C.push(I)}return C}(h,s),{scenes:f,scene:g,nodes:m}=h.json,_=f?f[g||0].nodes:m,b=[];for(const O of _)b.push(Jk(m[O],h,u));return function(O,D,C){const V={},I=new Set;for(let z=0;z<O.length;z++){const M=C[D[z]];if(!M.extras)continue;const B=M.extras["mapbox:footprint:version"],J=M.extras["mapbox:footprint:id"];(B||J)&&I.add(z),B==="1.0.0"&&J&&(V[J]=z)}for(let z=0;z<O.length;z++){if(I.has(z))continue;const M=O[z],B=C[D[z]];if(!B.extras)continue;let J=null;M.id in V&&(J=sne(O[V[M.id]].meshes,M.matrix)),J||(J=ine(B)),J&&(M.footprint=nne(J))}if(I.size>0){const z=Array.from(I.values()).sort((M,B)=>M-B);for(let M=z.length-1;M>=0;M--)O.splice(z[M],1)}}(b,_,h.json.nodes),b}function one(h){h.heightmap=new Float32Array(4096),h.heightmap.fill(-1);const s=h.vertexArray.float32,u=h.aabb.min[0]-1,f=h.aabb.min[1]-1,g=HA/(h.aabb.max[0]-u+2),m=HA/(h.aabb.max[1]-f+2);for(let _=0;_<s.length;_+=3){const b=s[_+2],O=(s[_+0]-u)*g|0,D=(s[_+1]-f)*m|0;b>h.heightmap[D*HA+O]&&(h.heightmap[D*HA+O]=b)}}function lne(h,s){const u={};u.indexArray=new Ls,u.indexArray.reserve(4*h.length),u.vertexArray=new Vo,u.vertexArray.reserve(10*h.length),u.colorArray=new id,u.vertexArray.reserve(10*h.length);let f=0;for(const _ of h){const b=Math.min(10,Math.max(4,1.3*_.height))*s,O=[-_.normal[1],_.normal[0],0],D=Math.min(.29,.1*_.width/_.depth),C=_.width-2*_.depth*s*(D+.01),V=ve.vec3.scaleAndAdd([],_.pos,O,C/2),I=ve.vec3.scaleAndAdd([],_.pos,O,-C/2),z=[V[0],V[1],V[2]+_.height],M=[I[0],I[1],I[2]+_.height],B=ve.vec3.scaleAndAdd([],_.normal,O,D);ve.vec3.scale(B,B,b);const J=ve.vec3.scaleAndAdd([],_.normal,O,-D);ve.vec3.scale(J,J,b),ve.vec3.add(B,V,B),ve.vec3.add(J,I,J),V[2]+=.1,I[2]+=.1,u.vertexArray.emplaceBack(B[0],B[1],B[2]),u.vertexArray.emplaceBack(J[0],J[1],J[2]),u.vertexArray.emplaceBack(V[0],V[1],V[2]),u.vertexArray.emplaceBack(I[0],I[1],I[2]),u.vertexArray.emplaceBack(z[0],z[1],z[2]),u.vertexArray.emplaceBack(M[0],M[1],M[2]),u.vertexArray.emplaceBack(V[0],V[1],V[2]),u.vertexArray.emplaceBack(I[0],I[1],I[2]),u.vertexArray.emplaceBack(B[0],B[1],B[2]),u.vertexArray.emplaceBack(J[0],J[1],J[2]);const te=C/b/2;u.colorArray.emplaceBack(-te-D,-1,te,.8),u.colorArray.emplaceBack(te+D,-1,te,.8),u.colorArray.emplaceBack(-te,0,te,1.3),u.colorArray.emplaceBack(te,0,te,1.3),u.colorArray.emplaceBack(te+D,-.8,te,.7),u.colorArray.emplaceBack(te+D,-.8,te,.7),u.colorArray.emplaceBack(0,0,te,1.3),u.colorArray.emplaceBack(0,0,te,1.3),u.colorArray.emplaceBack(te+D,-1.2,te,.8),u.colorArray.emplaceBack(te+D,-1.2,te,.8),u.indexArray.emplaceBack(6+f,4+f,8+f),u.indexArray.emplaceBack(7+f,9+f,5+f),u.indexArray.emplaceBack(0+f,1+f,2+f),u.indexArray.emplaceBack(1+f,3+f,2+f),f+=10}const g={defined:!0,emissiveFactor:[0,0,0]},m={};return m.baseColorFactor=zn.white,g.pbrMetallicRoughness=m,u.material=g,u.aabb=new rr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),u}class e6{constructor(s){this._stringToNumber={},this._numberToString=[];for(let u=0;u<s.length;u++){const f=s[u];this._stringToNumber[f]=u,this._numberToString[u]=f}}encode(s){return this._stringToNumber[s]}decode(s){return this._numberToString[s]}}const une=["id","tile","layer","source","sourceLayer","state"];class L0{constructor(s,u,f,g,m){this.type="Feature",this._vectorTileFeature=s,this._z=u,this._x=f,this._y=g,this.properties=s.properties,this.id=m}clone(){const s=new L0(this._vectorTileFeature,this._z,this._x,this._y,this.id);return this.state&&(s.state=Object.assign({},this.state)),this.layer&&(s.layer=Object.assign({},this.layer)),this.source&&(s.source=this.source),this.sourceLayer&&(s.sourceLayer=this.sourceLayer),s}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){const s={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const u of une)this[u]!==void 0&&(s[u]=this[u]);return s}}class t6{constructor(s,u){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new St(za,16,0),this.featureIndexArray=new Tl,this.promoteId=u,this.is3DTile=!1,this.serializedLayersCache=new Map}insert(s,u,f,g,m,_=0,b=0){const O=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,g,m,_);const D=this.grid;for(let C=0;C<u.length;C++){const V=u[C],I=[1/0,1/0,-1/0,-1/0];for(let z=0;z<V.length;z++){const M=V[z];I[0]=Math.min(I[0],M.x),I[1]=Math.min(I[1],M.y),I[2]=Math.max(I[2],M.x),I[3]=Math.max(I[3],M.y)}b!==0&&(I[0]-=b,I[1]-=b,I[2]+=b,I[3]+=b),I[0]<za&&I[1]<za&&I[2]>=0&&I[3]>=0&&D.insert(O,I[0],I[1],I[2],I[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Dh.VectorTile(new mn(this.rawTileData)).layers,this.sourceLayerCoder=new e6(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const s in this.vtLayers)this.vtFeatures[s]=[]}return this.vtLayers}query(s,u){const{tilespaceGeometry:f,transform:g,tileTransform:m,pixelPosMatrix:_,availableImages:b}=u;this.loadVTLayers(),this.serializedLayersCache.clear();const O=f.bufferedTilespaceBounds,D=this.grid.query(O.min.x,O.min.y,O.max.x,O.max.y,(z,M,B,J)=>dt(f.bufferedTilespaceGeometry,z,M,B,J));D.sort(cne);let C=null;g.elevation&&D.length>0&&(C=N0.create(g.elevation,this.tileID));const V={};let I;for(let z=0;z<D.length;z++){const M=D[z];if(M===I)continue;I=M;const B=this.featureIndexArray.get(M);let J=null;this.is3DTile?this.loadMatchingModelFeature(V,B,s,f,g):this.loadMatchingFeature(V,B,s,b,(te,he,de,ne=0)=>(J||(J=K(te,this.tileID.canonical,m)),he.queryIntersectsFeature(f,te,de,J,this.z,g,_,C,ne)))}return V}loadMatchingFeature(s,u,f,g,m){const{featureIndex:_,bucketIndex:b,sourceLayerIndex:O,layoutVertexArrayOffset:D}=u,C=this.bucketLayerIDs[b],V=f.layers,I=Object.keys(V);if(I.length&&!function(te,he){for(let de=0;de<te.length;de++)if(he.indexOf(te[de])>=0)return!0;return!1}(I,C))return;const z=f.sourceCache,M=this.sourceLayerCoder.decode(O),B=this.vtLayers[M].feature(_),J=this.getId(B,M);for(let te=0;te<C.length;te++){const he=C[te];if(!V[he])continue;const{styleLayer:de,targets:ne}=V[he];let Ae={};J!==void 0&&(Ae=z.getFeatureState(de.sourceLayer,J));const xe=!m||m(B,de,Ae,D);if(!xe)continue;const Oe=new L0(B,this.z,this.x,this.y,J);Oe.tile=this.tileID.canonical,Oe.state=Ae;let Qe=this.serializedLayersCache.get(he);Qe||(Qe=de.serialize(),Qe.id=he,this.serializedLayersCache.set(he,Qe)),Oe.source=Qe.source,Oe.sourceLayer=Qe["source-layer"],Oe.layer=un({},Qe),Oe.layer.paint=a6(Qe.paint,de.paint,B,Ae,g),Oe.layer.layout=a6(Qe.layout,de.layout,B,Ae,g);let Ye=!1;for(const Xe of ne){this.updateFeatureProperties(Oe,Xe);const{filter:gt}=Xe;if(gt){if(B.properties=Oe.properties,gt.needGeometry){const et=Y(B,!0);if(!gt.filter(new Pn(this.tileID.overscaledZ),et,this.tileID.canonical))continue}else if(!gt.filter(new Pn(this.tileID.overscaledZ),B))continue}Ye=!0,Xe.targetId&&this.addFeatureVariant(Oe,Xe)}Ye&&this.appendToResult(s,he,_,Oe,xe)}}loadMatchingModelFeature(s,u,f,g,m){const _=this.bucketLayerIDs[0][0],b=f.layers;if(!b[_])return;const{styleLayer:O,targets:D}=b[_];if(O.type!=="model")return;const C=g.tile,V=u.featureIndex,I=C.getBucket(O);if(!(I&&I instanceof vS))return;const z=function(Qe,Ye,Xe,gt){const et=Qe.getNodesInfo()[Ye];if(et.hiddenByReplacement||!et.node.meshes)return;let _t=Number.MAX_VALUE;const xt=et.node,Ct=Xe.tile,Dt=gt.calculatePosMatrix(Ct.tileID.toUnwrapped(),gt.worldSize),Nt=et.evaluatedScale;let jt=0;gt.elevation&&xt.elevation&&(jt=xt.elevation*gt.elevation.exaggeration()),ve.mat4.translate(Dt,Dt,[(xt.anchor?xt.anchor[0]:0)*(Nt[0]-1),(xt.anchor?xt.anchor[1]:0)*(Nt[1]-1),jt]),ve.mat4.scale(Dt,Dt,Nt);const Lt=Xe.queryGeometry,Ht=Lt.isPointQuery()?Lt.screenBounds:Lt.screenGeometry,Aa=function(er){const Oa=ve.mat4.multiply([],Dt,er.matrix);ve.mat4.multiply(Oa,gt.expandedFarZProjMatrix,Oa);for(let Da=0;Da<er.meshes.length;++Da){const Ra=er.meshes[Da];if(Da===er.lightMeshIndex)continue;const Rr=QF(Ht,gt,Oa,Ra.aabb);Rr!=null&&(_t=Math.min(Rr,_t))}if(er.children)for(const Da of er.children)Aa(Da)};if(Aa(xt),_t===Number.MAX_VALUE)return;const ma=new Gn(0,0);return dk(Ct.tileID.canonical,ma,et.node.anchor[0],et.node.anchor[1]),{intersectionZ:_t,position:ma,feature:et.feature}}(I,V,g,m);if(!z)return;const{z:M,x:B,y:J}=C.tileID.canonical,{feature:te,intersectionZ:he,position:de}=z;let ne={};te.id!==void 0&&(ne=f.sourceCache.getFeatureState(O.sourceLayer,te.id));const Ae=new L0({},M,B,J,te.id);Ae.tile=this.tileID.canonical,Ae.state=ne,Ae.properties=te.properties,Ae.geometry={type:"Point",coordinates:[de.lng,de.lat]};let xe=this.serializedLayersCache.get(_);xe||(xe=O.serialize(),xe.id=_,this.serializedLayersCache.set(_,xe)),Ae.source=xe.source,Ae.sourceLayer=xe["source-layer"],Ae.layer=un({},xe);let Oe=!1;for(const Qe of D){this.updateFeatureProperties(Ae,Qe);const{filter:Ye}=Qe;if(Ye){if(te.properties=Ae.properties,Ye.needGeometry){if(!Ye.filter(new Pn(this.tileID.overscaledZ),te,this.tileID.canonical))continue}else if(!Ye.filter(new Pn(this.tileID.overscaledZ),te))continue}Oe=!0,Qe.targetId&&this.addFeatureVariant(Ae,Qe)}Oe&&this.appendToResult(s,_,V,Ae,he)}updateFeatureProperties(s,u,f){if(u.properties){const g={};for(const m in u.properties){const _=u.properties[m].evaluate({zoom:this.z},s._vectorTileFeature,s.state,s.tile,f);_!=null&&(g[m]=_)}s.properties=g}}addFeatureVariant(s,u,f){const g={target:u.target,namespace:u.namespace,uniqueFeatureID:u.uniqueFeatureID};u.properties&&(g.properties=s.properties),s.variants=s.variants||{},s.variants[u.targetId]=s.variants[u.targetId]||[],s.variants[u.targetId].push(g)}appendToResult(s,u,f,g,m){let _=s[u];_===void 0&&(_=s[u]=[]),_.push({featureIndex:f,feature:g,intersectionZ:m})}lookupSymbolFeatures(s,u,f,g,m){const _={};this.loadVTLayers();for(const b of s)this.loadMatchingFeature(_,{bucketIndex:u,sourceLayerIndex:f,featureIndex:b,layoutVertexArrayOffset:0},g,m);return _}loadFeature(s){const{featureIndex:u,sourceLayerIndex:f}=s;this.loadVTLayers();const g=this.sourceLayerCoder.decode(f),m=this.vtFeatures[g];if(m[u])return m[u];const _=this.vtLayers[g].feature(u);return m[u]=_,_}hasLayer(s){for(const u of this.bucketLayerIDs)for(const f of u)if(s===f)return!0;return!1}getId(s,u){let f=s.id;if(this.promoteId){const g=Array.isArray(this.promoteId)||typeof this.promoteId!="object"?this.promoteId:this.promoteId[u];if(g!=null)if(Array.isArray(g)){if(!this.promoteIdExpression){const m=G(g);if(m.result!=="success"){const _=m.value.map(b=>`${b.key}: ${b.message}`).join(", ");return void $r(`Failed to create expression for promoteId: ${_}`)}this.promoteIdExpression=m.value}this.promoteIdExpression._evaluator||(this.promoteIdExpression._evaluator=new zd),f=this.promoteIdExpression.evaluate({zoom:0},s)}else f=s.properties[g];typeof f=="boolean"&&(f=Number(f))}return f}}function a6(h,s,u,f,g){return yr(h,(m,_)=>{const b=s instanceof Du?s.get(_):null;return b&&b.evaluate?b.evaluate(u,f,g):b})}function cne(h,s){return s-h}Pt(t6,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const r6=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class aN{static from(s){if(!(s instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,f]=new Uint8Array(s,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=f>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const m=r6[15&f];if(!m)throw new Error("Unrecognized array type.");const[_]=new Uint16Array(s,2,1),[b]=new Uint32Array(s,4,1);return new aN(b,_,m,s)}constructor(s,u=64,f=Float64Array,g){if(isNaN(s)||s<0)throw new Error(`Unpexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=f,this.IndexArrayType=s<65536?Uint16Array:Uint32Array;const m=r6.indexOf(this.ArrayType),_=2*s*this.ArrayType.BYTES_PER_ELEMENT,b=s*this.IndexArrayType.BYTES_PER_ELEMENT,O=(8-b%8)%8;if(m<0)throw new Error(`Unexpected typed array class: ${f}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+b+O,2*s),this._pos=2*s,this._finished=!0):(this.data=new ArrayBuffer(8+_+b+O),this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+b+O,2*s),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+m]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=s)}add(s,u){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=s,this.coords[this._pos++]=u,f}finish(){const s=this._pos>>1;if(s!==this.numItems)throw new Error(`Added ${s} items when expected ${this.numItems}.`);return rN(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(s,u,f,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:_,nodeSize:b}=this,O=[0,m.length-1,0],D=[];for(;O.length;){const C=O.pop()||0,V=O.pop()||0,I=O.pop()||0;if(V-I<=b){for(let J=I;J<=V;J++){const te=_[2*J],he=_[2*J+1];te>=s&&te<=f&&he>=u&&he<=g&&D.push(m[J])}continue}const z=I+V>>1,M=_[2*z],B=_[2*z+1];M>=s&&M<=f&&B>=u&&B<=g&&D.push(m[z]),(C===0?s<=M:u<=B)&&(O.push(I),O.push(z-1),O.push(1-C)),(C===0?f>=M:g>=B)&&(O.push(z+1),O.push(V),O.push(1-C))}return D}within(s,u,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:m,nodeSize:_}=this,b=[0,g.length-1,0],O=[],D=f*f;for(;b.length;){const C=b.pop()||0,V=b.pop()||0,I=b.pop()||0;if(V-I<=_){for(let J=I;J<=V;J++)i6(m[2*J],m[2*J+1],s,u)<=D&&O.push(g[J]);continue}const z=I+V>>1,M=m[2*z],B=m[2*z+1];i6(M,B,s,u)<=D&&O.push(g[z]),(C===0?s-f<=M:u-f<=B)&&(b.push(I),b.push(z-1),b.push(1-C)),(C===0?s+f>=M:u+f>=B)&&(b.push(z+1),b.push(V),b.push(1-C))}return O}}function rN(h,s,u,f,g,m){if(g-f<=u)return;const _=f+g>>1;n6(h,s,_,f,g,m),rN(h,s,u,f,_-1,1-m),rN(h,s,u,_+1,g,1-m)}function n6(h,s,u,f,g,m){for(;g>f;){if(g-f>600){const D=g-f+1,C=u-f+1,V=Math.log(D),I=.5*Math.exp(2*V/3),z=.5*Math.sqrt(V*I*(D-I)/D)*(C-D/2<0?-1:1);n6(h,s,u,Math.max(f,Math.floor(u-C*I/D+z)),Math.min(g,Math.floor(u+(D-C)*I/D+z)),m)}const _=s[2*u+m];let b=f,O=g;for(Ow(h,s,f,u),s[2*g+m]>_&&Ow(h,s,f,g);b<O;){for(Ow(h,s,b,O),b++,O--;s[2*b+m]<_;)b++;for(;s[2*O+m]>_;)O--}s[2*f+m]===_?Ow(h,s,f,O):(O++,Ow(h,s,O,g)),O<=u&&(f=O+1),u<=O&&(g=O-1)}}function Ow(h,s,u,f){nN(h,u,f),nN(s,2*u,2*f),nN(s,2*u+1,2*f+1)}function nN(h,s,u){const f=h[s];h[s]=h[u],h[u]=f}function i6(h,s,u,f){const g=h-u,m=s-f;return g*g+m*m}n.$=Xs,n.A=Zo,n.B=Yu,n.C=ad,n.D=O0,n.E=Ql,n.F=2,n.G=fw,n.H=hF,n.I=qo,n.J=class extends yS{},n.K=Su,n.L=Nn,n.M=sm,n.N=Jc,n.O=Xc,n.P=It,n.Q=ec,n.R=Ns,n.S=Yh,n.T=ME,n.U=_h,n.V=yS,n.W=Me,n.X=G,n.Y=As,n.Z=li,n._=Ko,n.a=function(h){return Ne.API_CDN_URL_REGEX.test(h)},n.a$=Y,n.a0=al,n.a1=wh,n.a2=lp,n.a3=Fl,n.a4=function(h){const s=h.value;let u=[];if(!s)return u;const f=Su(s);return f!=="string"?(u=u.concat([new yS(h.key,s,`string expected, "${f}" found`)]),u):(tk(s,!0)||(u=u.concat([new yS(h.key,s,`invalid url "${s}"`)])),u)},n.a5=qt,n.a6=Oo,n.a7=Bi,n.a8=Ea,n.a9=class{constructor(h){this.specification=h}possiblyEvaluate(h,s){return yi(h.expression.evaluate(s))}interpolate(h,s,u){return{x:gr(h.x,s.x,u),y:gr(h.y,s.y,u),z:gr(h.z,s.z,u),azimuthal:gr(h.azimuthal,s.azimuthal,u),polar:gr(h.polar,s.polar,u)}}},n.aA=function(h,s){const u={};for(let f=0;f<s.length;f++){const g=s[f];g in h&&(u[g]=h[g])}return u},n.aB=tf,n.aC=Ii,n.aD=class{constructor(h){this.entries={},this.scheduler=h}request(h,s,u,f){const g=this.entries[h]=this.entries[h]||{callbacks:[]};if(g.result){const[m,_]=g.result;return this.scheduler?this.scheduler.add(()=>{f(m,_)},s):f(m,_),()=>{}}return g.callbacks.push(f),g.cancel||(g.cancel=u((m,_)=>{g.result=[m,_];for(const b of g.callbacks)this.scheduler?this.scheduler.add(()=>{b(m,_)},s):b(m,_);setTimeout(()=>delete this.entries[h],3e3)})),()=>{g.result||(g.callbacks=g.callbacks.filter(m=>m!==f),g.callbacks.length||(g.cancel(),delete this.entries[h]))}}},n.aE=function(h,s,u){const f=JSON.stringify(h.request);return h.data&&(this.deduped.entries[f]={result:[null,h.data]}),this.deduped.request(f,{type:"parseTile",isSymbolTile:h.isSymbolTile,zoom:h.tileZoom},g=>{const m=Ui(h.request,(_,b,O,D)=>{_?g(_):b&&g(null,{vectorTile:u?void 0:new Dh.VectorTile(new mn(b)),rawData:b,cacheControl:O,expires:D})});return()=>{m.cancel(),g()}},s)},n.aF=function(h){Cn++,Cn>Dr&&(h.getActor().send("enforceCacheSizeLimit",Cr),Cn=0)},n.aG=function(h){return h<=1?1:Math.pow(2,Math.floor(Math.log(h)/Math.LN2))},n.aH=pa,n.aI=jF,n.aJ=KF,n.aK=BF,n.aL=function(h,s){const u=document.createElement("video");u.muted=!0,u.onloadstart=function(){s(null,u)};for(let f=0;f<h.length;f++){const g=document.createElement("source");Xl(h[f])||(u.crossOrigin="Anonymous"),g.src=h[f],u.appendChild(g)}return{cancel:()=>{}}},n.aM=hS,n.aN=function(h){return fetch(h).then(s=>s.arrayBuffer()).then(s=>Xk(s,0,h))},n.aO=Qk,n.aP=class{constructor(h,s,u,f){this.id=h,this.position=s!=null?new Gn(s[0],s[1]):new Gn(0,0),this.orientation=u??[0,0,0],this.nodes=f,this.uploaded=!1,this.aabb=new rr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(h,s){if(ve.mat4.multiply(h.matrix,s,h.matrix),h.meshes)for(const u of h.meshes){const f=rr.applyTransformFast(u.aabb,h.matrix);this.aabb.encapsulate(f)}if(h.children)for(const u of h.children)this._applyTransformations(u,h.matrix)}computeBoundsAndApplyParent(){const h=ve.mat4.identity([]);for(const s of this.nodes)this._applyTransformations(s,h)}computeModelMatrix(h,s,u,f,g,m,_=!1){sk(this.matrix,this,h.transform,this.position,s,u,f,g,m,_)}upload(h){if(!this.uploaded){for(const s of this.nodes)UE(s,h);for(const s of this.nodes)AS(s);this.uploaded=!0}}destroy(){for(const h of this.nodes)BE(h)}},n.aQ=Ya,n.aR=mw,n.aS=Uu,n.aT=Ni,n.aU=Lu,n.aV=Ls,n.aW=$a,n.aX=lm,n.aY=cS,n.aZ=function(){ps.isLoading()||ps.isLoaded()||wo()!=="deferred"||Ei()},n.a_=Rh,n.aa=Pn,n.ab=ye,n.ac=o,n.ad=ve,n.ae=kr,n.af=Du,n.ag=Gl,n.ah=gr,n.ai=za,n.aj=Bc,n.ak=ba,n.al=zn,n.am=class{constructor(h){this.specification=h}possiblyEvaluate(h,s){return function([u,f]){const g=yi([1,u,f]);return{x:g.x,y:g.y,z:g.z}}(h.expression.evaluate(s))}interpolate(h,s,u){return{x:gr(h.x,s.x,u),y:gr(h.y,s.y,u),z:gr(h.z,s.z,u)}}},n.an=function(h,s,u=0,f=!0){const g=new It(u,u),m=h.sub(g),_=s.add(g),b=[m,new It(_.x,m.y),_,new It(m.x,_.y)];return f&&b.push(m.clone()),b},n.ao=function(h,s){const u=[];for(let f=0;f<h.length;f++){const g=nn(f-1,-1,h.length-1),m=nn(f+1,-1,h.length-1),_=h[f],b=h[m],O=h[g].sub(_).unit(),D=b.sub(_).unit(),C=D.angleWithSep(O.x,O.y),V=O.add(D).unit().mult(-1*s/Math.sin(C/2));u.push(_.add(V))}return u},n.ap=xF,n.aq=dt,n.ar=function(h,s,u=0){return ve.vec3.fromValues(((s.x-u)*h.scale-h.x)*za,(s.y*h.scale-h.y)*za,ey(s.z,s.y))},n.as=Or,n.at=WC,n.au=function(h){let s=1/0,u=1/0,f=-1/0,g=-1/0;for(const m of h)s=Math.min(s,m.x),u=Math.min(u,m.y),f=Math.max(f,m.x),g=Math.max(g,m.y);return{min:new It(s,u),max:new It(f,g)}},n.av=Sl,n.aw=ct,n.ax=A,n.ay=ka,n.az=Cl,n.b=function(h){return Ne.API_FONTS_REGEX.test(h)},n.b$=mS,n.b0=L0,n.b1=Cs,n.b2=Gf,n.b3=uy,n.b4=K,n.b5=Iu,n.b6=Wd,n.b7=vr,n.b8=ji,n.b9=PA,n.bA=UC,n.bB=SE,n.bC=_F,n.bD=RE,n.bE=aN,n.bF=nn,n.bG=pr,n.bH=Yo,n.bI=function(h,s,u){h[4*s+0]=u[0],h[4*s+1]=u[1],h[4*s+2]=u[2],h[4*s+3]=u[3]},n.bJ=od,n.bK=sd,n.bL=Ap,n.bM=Ss,n.bN=Nc,n.bO=Gn,n.bP=VF,n.bQ=Xt,n.bR=Er,n.bS=YF,n.bT=da,n.bU=Ro,n.bV=function(h,s,u,f,g,m,_,b,O){if(O.name==="globe")return Ro(h,s,new da(u,f,g),!1);const D=mw({z:u,x:f,y:g},O);return new rr([(m+D.x/D.scale)*s,s*(D.y/D.scale),_],[(m+D.x2/D.scale)*s,s*(D.y2/D.scale),b])},n.bW=function(h,s,u){let f=0;for(let g=0;g<2;++g)h[g]>0&&(f+=(h[g]-0)*(h[g]-0)),s[g]<0&&(f+=(0-s[g])*(0-s[g]));return f},n.bX=Bu,n.bY=fm,n.bZ=function(h){const s=ve.mat4.identity(new Float64Array(16));ve.mat4.multiply(s,h.pixelMatrix,h.globeMatrix);const u=[0,Wo,0],f=[0,ic,0];return ve.vec3.transformMat4(u,u,s),ve.vec3.transformMat4(f,f,s),[u[0]>0&&u[0]<=h.width&&u[1]>0&&u[1]<=h.height&&!bl(h,new Gn(h.center.lat,90)),f[0]>0&&f[0]<=h.width&&f[1]>0&&f[1]<=h.height&&!bl(h,new Gn(h.center.lat,-90))]},n.b_=function(h,s){const{scale:u}=h.tileTransform,f=u*za/(h.tileSize*Math.pow(2,s.zoom-h.tileID.overscaledZ+h.tileID.canonical.z));return ve.mat2.scale(new Float32Array(4),s.inverseAdjustmentMatrix,[f,f])},n.ba=VE,n.bb=function(h,s){const u=Gl(s.zoom);if(u===0)return _s(h);const f=Vn(h),g=di(f),m=Sl(f.getWest())*s.worldSize,_=Sl(f.getEast())*s.worldSize,b=Ii(f.getNorth())*s.worldSize,O=Ii(f.getSouth())*s.worldSize,D=[m,b,0],C=[_,b,0],V=[m,O,0],I=[_,O,0],z=ve.mat4.invert([],s.globeMatrix);return ve.vec3.transformMat4(D,D,z),ve.vec3.transformMat4(C,C,z),ve.vec3.transformMat4(V,V,z),ve.vec3.transformMat4(I,I,z),g[0]=co(g[0],V,u),g[1]=co(g[1],I,u),g[2]=co(g[2],C,u),g[3]=co(g[3],D,u),rr.fromPoints(g)},n.bc=Oi,n.bd=Bn,n.be=co,n.bf=Hd,n.bg=jr,n.bh=PS,n.bi=mn,n.bj=Ui,n.bk=function(h,s){const u=[];for(const f in h)f in s||u.push(f);return u},n.bl=wn,n.bm=["type","source","source-layer","minzoom","maxzoom","filter","layout"],n.bn=$t,n.bo=function(h,s){const{x:u,y:f}=h.point,g=du(u,f,h.worldSize/h._pixelsPerMercatorPixel,0,0);return ve.mat4.multiply(g,g,ms(_s(s)))},n.bp=sr,n.bq=th,n.br=qa,n.bs=function(h,s,u,f,g){const m=5*s+2;h.float32[m+0]=u,h.float32[m+1]=f,h.float32[m+2]=g},n.bt=uS,n.bu=dF,n.bv=Pe,n.bw=Ze,n.bx=jf,n.by=ek,n.bz=kC,n.c=He,n.c$=YC,n.c0=WF,n.c1=function(h){const s=WF(h,!0);return ve.mat2.invert([],[s[0],s[1],s[4],s[5]])},n.c2=zr,n.c3=function(h){const{x:s,y:u}=h.point,{lng:f,lat:g}=h._center;return du(s,u,h.worldSize,f,g)},n.c4=Pa,n.c5=La,n.c6=Oh,n.c7=function(h){const s=Math.round((h+45+360)%360/90)%4;return Ja[s]},n.c8=45,n.c9=Sn,n.cA=zf,n.cB=class extends Yd{constructor(h){super(h),this.current=Xd}set(h,s,u){if(this.fetchUniformLocation(h,s)){for(let f=0;f<9;f++)if(u[f]!==this.current[f]){this.current=u,this.gl.uniformMatrix3fv(this.location,!1,u);break}}}},n.cC=or,n.cD=function(h,s,u){const f=Gl(u.zoom),g=h.style.map._antialias,m=h.terrain&&h.terrain.exaggeration()>0;return f===0&&!g&&!m},n.cE=function(h){const s=h.pixelsPerMeter,u=s/Yo(1,h.center.lat),f=ve.mat4.identity(new Float64Array(16));return ve.mat4.translate(f,f,[h.point.x,h.point.y,0]),ve.mat4.scale(f,f,[u,u,s]),Float32Array.from(f)},n.cF=Vn,n.cG=function(h){const s=Bu-5;h=ka(h,-80.051129,s)/s*90;const u=Math.pow(Math.abs(Math.sin(ba(h))),3);return Math.round(u*(Ff.length-1))},n.cH=function(h,s,u,f){const g=s.getNorth(),m=s.getSouth(),_=s.getWest(),b=s.getEast(),O=1<<h.z,D=b-_,C=g-m,V=D/wp,I=-C/Ff[u],z=[0,V,0,I,0,0,g,_,0];if(h.z>0){const M=180/f;ve.mat3.multiply(z,z,[M/D+1,0,0,0,M/C+1,0,-.5*M/V,.5*M/I,1])}return z[2]=O,z[5]=h.x,z[8]=h.y,z},n.cI=_s,n.cJ=function(h,s,u){const f=ve.mat4.identity(new Float64Array(16)),g=(s/(1<<h)-.5)*Math.PI*2;return ve.mat4.rotateY(f,u.globeMatrix,g),Float32Array.from(f)},n.cK=class{isDataAvailableAtPoint(h){const s=this._source();if(this.isUsingMockSource()||!s||h.y<0||h.y>1)return!1;const u=s.getSource().maxzoom,f=1<<u,g=Math.floor(h.x),m=Math.floor((h.x-g)*f),_=Math.floor(h.y*f),b=this.findDEMTileFor(new pa(u,g,u,m,_));return!(!b||!b.dem)}getAtPointOrZero(h,s=0){return this.getAtPoint(h,s)||0}getAtPoint(h,s,u=!0){if(this.isUsingMockSource())return null;s==null&&(s=null);const f=this._source();if(!f||h.y<0||h.y>1)return s;const g=f.getSource().maxzoom,m=1<<g,_=Math.floor(h.x),b=h.x-_,O=new pa(g,_,g,Math.floor(b*m),Math.floor(h.y*m)),D=this.findDEMTileFor(O);if(!D||!D.dem)return s;const C=D.dem,V=1<<D.tileID.canonical.z,I=(b*V-D.tileID.canonical.x)*C.dim,z=(h.y*V-D.tileID.canonical.y)*C.dim,M=Math.floor(I),B=Math.floor(z);return(u?this.exaggeration():1)*gr(gr(C.get(M,B),C.get(M,B+1),z-B),gr(C.get(M+1,B),C.get(M+1,B+1),z-B),I-M)}getAtTileOffset(h,s,u){const f=1<<h.canonical.z;return this.getAtPointOrZero(new o(h.wrap+(h.canonical.x+s/za)/f,(h.canonical.y+u/za)/f))}getAtTileOffsetFunc(h,s,u,f){return g=>{const m=this.getAtTileOffset(h,g.x,g.y),_=f.upVector(h.canonical,g.x,g.y),b=f.upVectorScale(h.canonical,s,u).metersToTile;return ve.vec3.scale(_,_,m*b),_}}getForTilePoints(h,s,u,f){if(this.isUsingMockSource())return!1;const g=N0.create(this,h,f);return!!g&&(s.forEach(m=>{m[2]=this.exaggeration()*g.getElevationAt(m[0],m[1],u)}),!0)}getMinMaxForTile(h){if(this.isUsingMockSource())return null;const s=this.findDEMTileFor(h);if(!s||!s.dem)return null;const u=s.dem.tree,f=s.tileID,g=1<<h.canonical.z-f.canonical.z;let m=h.canonical.x/g-f.canonical.x,_=h.canonical.y/g-f.canonical.y,b=0;for(let O=0;O<h.canonical.z-f.canonical.z&&!u.leaves[b];O++){m*=2,_*=2;const D=2*Math.floor(_)+Math.floor(m);b=u.childOffsets[b]+D,m%=1,_%=1}return{min:this.exaggeration()*u.minimums[b],max:this.exaggeration()*u.maximums[b]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(h,s,u){throw new Error("Pure virtual method called.")}pointCoordinate(h){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(h){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const h=this.visibleDemTiles;if(h.length===0)return null;let s=!1,u=Number.MAX_VALUE,f=Number.MIN_VALUE;for(const g of h){const m=this.getMinMaxForTile(g.tileID);m&&(u=Math.min(u,m.min),f=Math.max(f,m.max),s=!0)}return s?{min:u,max:f}:null}},n.cL=z1,n.cM=pn,n.cN=function(h,s){return[Math.pow(h[0],2.2)*s,Math.pow(h[1],2.2)*s,Math.pow(h[2],2.2)*s]},n.cO=Jo,n.cP=Zt,n.cQ=Rn,n.cR=256,n.cS=function(h,s){const u=[0,0,0],f=Oi(_s(s.canonical));return ve.vec3.transformMat4(u,u,f),ve.vec3.transformMat4(u,u,h),u},n.cT=h=>({u_camera_to_center_distance:new Ss(h),u_extrude_scale:new lg(h),u_device_pixel_ratio:new Ss(h),u_matrix:new od(h),u_inv_rot_matrix:new od(h),u_merc_center:new sd(h),u_tile_id:new Ap(h),u_zoom_transition:new Ss(h),u_up_dir:new Ap(h),u_emissive_strength:new Ss(h)}),n.cU=h=>({u_matrix:new od(h),u_pixels_to_tile_units:new lg(h),u_device_pixel_ratio:new Ss(h),u_width_scale:new Ss(h),u_floor_width_scale:new Ss(h),u_units_to_pixels:new sd(h),u_dash_image:new Nc(h),u_gradient_image:new Nc(h),u_image_height:new Ss(h),u_texsize:new sd(h),u_tile_units_to_pixels:new Ss(h),u_alpha_discard_threshold:new Ss(h),u_trim_offset:new sd(h),u_trim_fade_range:new sd(h),u_trim_color:new vp(h),u_emissive_strength:new Ss(h),u_zbias_factor:new Ss(h),u_tile_to_meter:new Ss(h)}),n.cV=h=>({u_matrix:new od(h),u_texsize:new sd(h),u_pixels_to_tile_units:new lg(h),u_device_pixel_ratio:new Ss(h),u_width_scale:new Ss(h),u_floor_width_scale:new Ss(h),u_image:new Nc(h),u_units_to_pixels:new sd(h),u_tile_units_to_pixels:new Ss(h),u_alpha_discard_threshold:new Ss(h),u_trim_offset:new sd(h),u_trim_fade_range:new sd(h),u_trim_color:new vp(h),u_emissive_strength:new Ss(h),u_zbias_factor:new Ss(h),u_tile_to_meter:new Ss(h)}),n.cW=uu,n.cX=ue,n.cY=Na,n.cZ=Cp,n.c_=(h,s,u,f,g,m)=>{const _=h.transform,b=_.projection.name==="globe";let O;if(m.paint.get("circle-pitch-alignment")==="map")if(b){const C=Jo(_.zoom,s.canonical)*_._pixelsPerMercatorPixel;O=Float32Array.from([C,0,0,C])}else O=_.calculatePixelsToTileUnitsMatrix(u);else O=new Float32Array([_.pixelsToGLUnits[0],0,0,_.pixelsToGLUnits[1]]);const D={u_camera_to_center_distance:h.transform.getCameraToCenterDistance(_.projection),u_matrix:h.translatePosMatrix(s.projMatrix,u,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_device_pixel_ratio:Kt.devicePixelRatio,u_extrude_scale:O,u_inv_rot_matrix:Zl,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:m.paint.get("circle-emissive-strength")};if(b){D.u_inv_rot_matrix=f,D.u_merc_center=g,D.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],D.u_zoom_transition=Gl(_.zoom);const C=g[0]*za,V=g[1]*za;D.u_up_dir=_.projection.upVector(new da(0,0,0),C,V)}return D},n.ca=Tp,n.cb=vp,n.cc=function(h,s,u){const f=Math.sqrt(h*h+s*s+u*u),g=f>0?Math.acos(u/f)*hr:0;let m=h!==0||s!==0?Math.atan2(-s,-h)*hr+90:0;return m<0&&(m+=360),[f,m,g]},n.cd=y,n.ce=rr,n.cf=yi,n.cg=function(h){return[Math.pow(h[0],1/2.2),Math.pow(h[1],1/2.2),Math.pow(h[2],1/2.2)]},n.ch=function(h,s){return h.readFields(ore,{icons:[]},s)},n.ci=function(h){return h({pluginStatus:Hn,pluginURL:xn}),$n.on("pluginStateChange",h),h},n.cj=_S,n.ck=b0,n.cl=TE,n.cm=pc,n.cn=vs,n.co=Ia,n.cp=mo,n.cq=Qr,n.cr=function(h){const s=h.indexOf(cp);return s>=0?h.slice(0,s):h},n.cs=function(h){return h.indexOf(cp)>=0},n.ct=function(h){const s=h.indexOf(cp);return s>=0?h.slice(s+1):""},n.cu=function(h){const s=[],u=h.id;return u===void 0&&s.push({message:`layers.${u}: missing required property "id"`}),h.render===void 0&&s.push({message:`layers.${u}: missing required method "render"`}),h.renderingMode&&h.renderingMode!=="2d"&&h.renderingMode!=="3d"&&s.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),s},n.cv=function(h,s,u,f){return h.type==="custom"?new $ae(h,s):new nre[h.type](h,s,u,f)},n.cw=Tn,n.cx=class extends L0{constructor(h,s){super(h._vectorTileFeature,h._z,h._x,h._y,h.id),h.state&&(this.state=Object.assign({},h.state)),this.target=s.target,this.namespace=s.namespace,s.properties&&(this.properties=s.properties),this.target&&("featuresetId"in this.target&&!this.target.importId||"layerId"in this.target)&&(this.source=h.source,this.sourceLayer=h.sourceLayer,this.layer=h.layer)}toJSON(){const h=super.toJSON();return h.target=this.target,h.namespace=this.namespace,h}},n.cy=$n,n.cz=tl,n.d=function(h){return Ne.API_TILEJSON_REGEX.test(h)},n.d$=e6,n.d0=Vs,n.d1=(h,s,u,f,g,m,_,b)=>{const O=h.transform,D=O.pitch<15?uw(.07,.7,ka((14-O.zoom)/5,0,1)):.07,C=u.paint.get("line-trim-color-use-theme").constantOr("default")==="none";return{u_matrix:cw(h,s,u,f),u_texsize:s.imageAtlasTexture?s.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:O.calculatePixelsToTileUnitsMatrix(s),u_device_pixel_ratio:g,u_width_scale:m,u_floor_width_scale:_,u_image:0,u_tile_units_to_pixels:BA(s,O),u_units_to_pixels:[1/O.pixelsToGLUnits[0],1/O.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:b,u_trim_fade_range:u.paint.get("line-trim-fade-range"),u_trim_color:u.paint.get("line-trim-color").toRenderColor(C?null:u.lut).toArray01(),u_emissive_strength:u.paint.get("line-emissive-strength"),u_zbias_factor:D,u_tile_to_meter:y(s.tileID.canonical,0)}},n.d2=(h,s,u,f,g,m,_,b,O)=>{const D=h.transform,C=D.calculatePixelsToTileUnitsMatrix(s),V=u.paint.get("line-trim-color-use-theme").constantOr("default")==="none",I=D.pitch<15?uw(.07,.7,ka((14-D.zoom)/5,0,1)):.07;return{u_matrix:cw(h,s,u,f),u_pixels_to_tile_units:C,u_device_pixel_ratio:m,u_width_scale:_,u_floor_width_scale:b,u_units_to_pixels:[1/D.pixelsToGLUnits[0],1/D.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:g,u_texsize:jA(u)&&s.lineAtlasTexture?s.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:BA(s,h.transform),u_alpha_discard_threshold:0,u_trim_offset:O,u_trim_fade_range:u.paint.get("line-trim-fade-range"),u_trim_color:u.paint.get("line-trim-color").toRenderColor(V?null:u.lut).toArray01(),u_emissive_strength:u.paint.get("line-emissive-strength"),u_zbias_factor:I,u_tile_to_meter:y(s.tileID.canonical,0)}},n.d3=la,n.d4=ay,n.d5=ey,n.d6=ew,n.d7=Fa,n.d8=A0,n.d9=bp,n.dA=fg,n.dB=lr,n.dC=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},n.dD=Tr,n.dE=Xo,n.dF=Vc,n.dG=function([h,s,u]){const f=Math.hypot(h,s,u),g=Math.atan2(h,u),m=.5*Math.PI-Math.acos(-s/f);return new Gn(Pa(g),Pa(m))},n.dH=LE,n.dI=function(h){const s=h.navigator?h.navigator.userAgent:null;return!!function(u){if(ga==null){const f=u.navigator?u.navigator.userAgent:null;ga=!!u.safari||!(!f||!(/\b(iPad|iPhone|iPod)\b/.test(f)||f.match("Safari")&&!f.match("Chrome")))}return ga}(h)&&s&&(s.match("Version/15.4")||s.match("Version/15.5")||s.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},n.dJ=function(h,s){Cr=h,Dr=s},n.dK=bl,n.dL=sc,n.dM=function(h){const s=[0,0,0],u=ve.mat4.identity(new Float64Array(16));return ve.mat4.multiply(u,h.pixelMatrix,h.globeMatrix),ve.vec3.transformMat4(s,s,u),new It(s[0],s[1])},n.dN=function(h,s,u=!1){if(Hn===Mi||Hn===Yn||Hn===ui)throw new Error("setRTLTextPlugin cannot be called multiple times.");xn=Kt.resolveURL(h),Hn=Mi,as=s,Wi(),u||Ei()},n.dO=wo,n.dP=function(){_S().acquire(GE)},n.dQ=function(){const h=Tw;h&&(h.isPreloaded()&&h.numActive()===1?(h.release(GE),Tw=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},n.dR=KA,n.dS=function(h){const s=ri();if(!s)return;const u=s.delete(Ga);h&&u.catch(h).then(()=>h())},n.dT=Rw,n.dU=Zk,n.dV=function(h){JE=Kt.resolveURL(h),I0||(I0=new O0(_S(),new Ql)),I0.broadcast("setDracoUrl",JE)},n.dW=qk,n.dX=function(h){M0=Kt.resolveURL(h),I0||(I0=new O0(_S(),new Ql)),I0.broadcast("setMeshoptUrl",M0)},n.dY=Pt,n.dZ=mm,n.d_=Pp,n.da=450,n.db=7,n.dc=Hae,n.dd=Mn,n.de=sg,n.df=256,n.dg=ms,n.dh=Vo,n.di=eo,n.dj=ku,n.dk=function(h,s,u,f,g){return ka((h-s)/(u-s)*(g-f)+f,f,g)},n.dl=Wh,n.dm=af,n.dn=class{constructor(h,s,u,f){this.context=h,this.format=f,this.size=u,this.texture=h.gl.createTexture();const[g,m,_]=this.size,{gl:b}=h;b.bindTexture(b.TEXTURE_3D,this.texture),h.pixelStoreUnpackFlipY.set(!1),h.pixelStoreUnpack.set(1),h.pixelStoreUnpackPremultiplyAlpha.set(!1),b.texImage3D(b.TEXTURE_3D,0,this.format,g,m,_,0,zE(this.format),DE(this.format),s.data)}bind(h,s){const{context:u}=this,{gl:f}=u;f.bindTexture(f.TEXTURE_3D,this.texture),h!==this.minFilter&&(f.texParameteri(f.TEXTURE_3D,f.TEXTURE_MAG_FILTER,h),f.texParameteri(f.TEXTURE_3D,f.TEXTURE_MIN_FILTER,h),this.minFilter=h),s!==this.wrapS&&(f.texParameteri(f.TEXTURE_3D,f.TEXTURE_WRAP_S,s),f.texParameteri(f.TEXTURE_3D,f.TEXTURE_WRAP_T,s),this.wrapS=s)}destroy(){const{gl:h}=this.context;h.deleteTexture(this.texture),this.texture=null}},n.dp=FE,n.dq=[1,1,1],n.dr=N0,n.ds=E0,n.dt=Kd,n.du=Qh,n.dv=fl,n.dw=mp,n.dx=xh,n.dy=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new It(1/0,1/0),max:new It(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(h,s=!1){const u=IC(new It(0,0),new It(za,za),h),f=[];if(s&&!Am(u,this._globalClipBounds))return f;for(const g of this._activeRegions){if(g.hiddenByOverlap||!Am(u,g))continue;const m=gE(g.min,g.max,h);f.push({min:m.min,max:m.max,sourceId:this._sourceIds[g.priority],footprint:g.footprint,footprintTileId:g.tileId,order:g.order,clipMask:g.clipMask,clipScope:g.clipScope})}return f}setSources(h){this._setSources(h.map(s=>({getSourceId:()=>s.cache.id,getFootprints:()=>{const u=[];for(const f of s.cache.getVisibleCoordinates()){const g=s.cache.getTile(f).buckets[s.layer];g&&g.updateFootprints(f.toUnwrapped(),u)}return u},getOrder:()=>s.order,getClipMask:()=>s.clipMask,getClipScope:()=>s.clipScope})))}_addSource(h){const s=h.getFootprints();if(s.length===0)return;const u=h.getOrder(),f=h.getClipMask(),g=h.getClipScope();for(const m of s){if(!m.footprint)continue;const _=IC(m.footprint.min,m.footprint.max,m.id);this._activeRegions.push({min:_.min,max:_.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:m.id,footprint:m.footprint,order:u,clipMask:f,clipScope:g})}this._sourceIds.push(h.getSourceId())}_computeReplacement(){this._activeRegions.sort((s,u)=>s.priority-u.priority||g0(s.min,u.min)||g0(s.max,u.max)||s.order-u.order||s.clipMask-u.clipMask||function(f,g){const m=(_,b)=>_+b;return f.length-g.length||f.reduce(m,"").localeCompare(g.reduce(m,""))}(s.clipScope,u.clipScope));let h=this._activeRegions.length!==this._prevRegions.length;if(!h){let s=0;for(;!h&&s!==this._activeRegions.length;){const u=this._activeRegions[s],f=this._prevRegions[s];h=u.priority!==f.priority||!MC(u,f)||u.order!==f.order||u.clipMask!==f.clipMask||!$t(u.clipScope,f.clipScope),++s}}if(h){++this._updateTime;for(const u of this._activeRegions)u.order!==fg&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,u.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,u.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,u.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,u.max.y));const s=u=>{const f=this._activeRegions;if(u>=f.length)return u;const g=f[u].priority;for(;u<f.length&&f[u].priority===g;)++u;return u};if(this._sourceIds.length>1){let u=0,f=s(u);for(;u!==f;){let g=u;const m=u;for(;g!==f;){const _=this._activeRegions[g];_.hiddenByOverlap=!1;for(let b=0;b<m;b++){const O=this._activeRegions[b];if(!O.hiddenByOverlap&&_.order===fg&&Am(_,O)&&(_.hiddenByOverlap=FC(_.footprint,_.tileId,O.footprint,O.tileId),_.hiddenByOverlap))break}++g}u=f,f=s(u)}}}}_setSources(h){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let s=h.length-1;s>=0;s--)this._addSource(h[s]);this._computeReplacement()}},n.dz=class{constructor(h){this._createGrid(h),this._createPoles(h)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const h of this._poleSegments)h.destroy();for(const h of this._gridSegments)h.withSkirts.destroy(),h.withoutSkirts.destroy()}_fillGridMeshWithLods(h,s){const u=new Iu,f=new Ls,g=[],m=h+1+2,_=s[0]+1,b=s[0]+1+(1+s.length),O=(D,C,V)=>{let I=D===m-1?D-2:D===0?D:D-1;return I+=V?24575:0,[I,C]};for(let D=0;D<m;++D)u.emplaceBack(...O(D,0,!0));for(let D=0;D<_;++D)for(let C=0;C<m;++C)u.emplaceBack(...O(C,D,(C===0||C===m-1)&&!0));for(let D=0;D<s.length;++D){const C=s[D];for(let V=0;V<m;++V)u.emplaceBack(...O(V,C,!0))}for(let D=0;D<s.length;++D){const C=f.length,V=s[D]+1+2,I=new Ls;for(let B=0;B<V-1;B++){const J=B===V-2,te=J?m*(b-s.length+D-B):m;for(let he=0;he<m-1;he++){const de=B*m+he;B===0||J||he===0||he===m-2?(I.emplaceBack(de+1,de,de+te),I.emplaceBack(de+te,de+te+1,de+1)):(f.emplaceBack(de+1,de,de+te),f.emplaceBack(de+te,de+te+1,de+1))}}const z=ji.simpleSegment(0,C,u.length,f.length-C);for(let B=0;B<I.uint16.length;B+=3)f.emplaceBack(I.uint16[B],I.uint16[B+1],I.uint16[B+2]);const M=ji.simpleSegment(0,C,u.length,f.length-C);g.push({withoutSkirts:z,withSkirts:M})}return{vertices:u,indices:f,segments:g}}_createGrid(h){const s=this._fillGridMeshWithLods(wp,Ff);this._gridSegments=s.segments,this._gridBuffer=h.createVertexBuffer(s.vertices,vr.members),this._gridIndexBuffer=h.createIndexBuffer(s.indices,!0)}_createPoles(h){const s=new Ls;for(let _=0;_<=wp;_++)s.emplaceBack(0,_+1,_+2);this._poleIndexBuffer=h.createIndexBuffer(s,!0);const u=new eo,f=new eo,g=new eo,m=new eo;this._poleSegments=[];for(let _=0,b=0;_<Oh;_++){const O=360/(1<<_);u.emplaceBack(0,-Cl,0,.5,0),f.emplaceBack(0,-Cl,0,.5,1),g.emplaceBack(0,-Cl,0,.5,.5),m.emplaceBack(0,-Cl,0,.5,.5);for(let D=0;D<=wp;D++){let C=D/wp,V=0;const I=gr(0,O,C),[z,M,B]=Rp(Co,Vh,I,Cl);u.emplaceBack(z,M,B,C,V),f.emplaceBack(z,M,B,C,1-V);const J=ba(I);C=.5+.5*Math.sin(J),V=.5+.5*Math.cos(J),g.emplaceBack(z,M,B,C,V),m.emplaceBack(z,M,B,C,1-V)}this._poleSegments.push(ji.simpleSegment(b,0,66,64)),b+=66}this._poleNorthVertexBuffer=h.createVertexBuffer(u,cr,!1),this._poleSouthVertexBuffer=h.createVertexBuffer(f,cr,!1),this._texturedPoleNorthVertexBuffer=h.createVertexBuffer(g,cr,!1),this._texturedPoleSouthVertexBuffer=h.createVertexBuffer(m,cr,!1)}getGridBuffers(h,s){return[this._gridBuffer,this._gridIndexBuffer,s?this._gridSegments[h].withSkirts:this._gridSegments[h].withoutSkirts]}getPoleBuffers(h,s){return[s?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,s?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[h]]}},n.e=Ne,n.e0=t6,n.e1=xp,n.e2=Uf,n.e3="hd_road_elevation",n.e4=class{static parseFrom(h,s){const u=Bf.parse(h);if(!u)return[];let{vertices:f,features:g}=u;const m=1/y(s);g.sort((D,C)=>D.id-C.id),f.sort((D,C)=>D.id-C.id||D.idx-C.idx),f=f.filter((D,C,V)=>C===V.findIndex(I=>I.id===D.id&&I.idx===D.idx));const _=new Array;let b=0;const O=f.length;for(const D of g){if(D.constantHeight){_.push(new ly(D.id,D.bounds,D.constantHeight));continue}for(;b!==O&&f[b].id<D.id;)b++;if(b===O||f[b].id!==D.id)continue;const C=new Array,V=new Array,I=b;for(;b!==O&&f[b].id===D.id;){const z=f[b];if(C.push({position:z.position,height:z.height,extent:z.extent}),b!==I&&f[b-1].idx===z.idx-1){const M=b-I;V.push({a:M-1,b:M})}b++}_.push(new ly(D.id,D.bounds,void 0,C,V,m))}return _}},n.e5=yr,n.e6=zo,n.e7=fF,n.e8=S0,n.e9=function(h,s,u,f,g,m,_,b=1,O){h.createArrays(),h.tilePixelRatio=za/(512*h.overscaling),h.compareText={},h.iconsNeedLinear=!1;const D=h.layers[0].layout,C=h.layers[0]._unevaluatedLayout._values,V={};V.scaleFactor=b,V.textSizeScaleRange=D.get("text-size-scale-range"),V.iconSizeScaleRange=D.get("icon-size-scale-range");const[I,z]=V.textSizeScaleRange,[M,B]=V.iconSizeScaleRange;V.textScaleFactor=ka(V.scaleFactor,I,z),V.iconScaleFactor=ka(V.scaleFactor,M,B);const J=C["text-size"],te=C["icon-size"];if(h.textSizeData.kind==="composite"){const{minZoom:Oe,maxZoom:Qe}=h.textSizeData;V.compositeTextSizes=[J.possiblyEvaluate(new Pn(Oe),m),J.possiblyEvaluate(new Pn(Qe),m)]}if(h.iconSizeData.kind==="composite"){const{minZoom:Oe,maxZoom:Qe}=h.iconSizeData;V.compositeIconSizes=[te.possiblyEvaluate(new Pn(Oe),m),te.possiblyEvaluate(new Pn(Qe),m)]}V.layoutTextSize=J.possiblyEvaluate(new Pn(_+1),m),V.layoutIconSize=te.possiblyEvaluate(new Pn(_+1),m),V.textMaxSize=J.possiblyEvaluate(new Pn(18),m);const he=D.get("symbol-placement"),de=D.get("text-rotation-alignment")==="map"&&he!=="point",ne=D.get("text-size");let Ae=!1;const xe=[];for(const Oe of h.features){const Qe=D.get("text-font").evaluate(Oe,{},m).join(","),Ye=ne.evaluate(Oe,{},m)*V.textScaleFactor,Xe=V.layoutTextSize.evaluate(Oe,{},m)*V.textScaleFactor,gt=V.layoutIconSize.evaluate(Oe,{},m)*V.iconScaleFactor,et={horizontal:{},vertical:void 0},_t=Oe.text;let xt,Ct=[0,0];if(_t){const Ra=_t.toString(),Rr=D.get("text-letter-spacing").evaluate(Oe,{},m)*Ze,Xa=D.get("text-line-height").evaluate(Oe,{},m)*Ze,dr=Za(Ra)?Rr:0,Lr=D.get("text-anchor").evaluate(Oe,{},m),sn=D.get("text-variable-anchor");if(!sn){const Jn=D.get("text-radial-offset").evaluate(Oe,{},m);Ct=Jn?_F(Lr,[Jn*Ze,CE]):D.get("text-offset").evaluate(Oe,{},m).map(Li=>Li*Ze)}let Zr=de?"center":D.get("text-justify").evaluate(Oe,{},m);const vn=he==="point",rn=vn?D.get("text-max-width").evaluate(Oe,{},m)*Ze:1/0,En=Jn=>{h.allowVerticalPlacement&&aa(Ra)&&(et.vertical=wE(_t,s,u,g,Qe,rn,Xa,Lr,Jn,dr,Ct,th.vertical,!0,Xe,Ye,O))};if(!de&&sn){const Jn=Zr==="auto"?sn.map(Br=>SE(Br)):[Zr];let Li=!1;for(let Br=0;Br<Jn.length;Br++){const Ln=Jn[Br];if(!et.horizontal[Ln])if(Li)et.horizontal[Ln]=et.horizontal[0];else{const is=wE(_t,s,u,g,Qe,rn,Xa,"center",Ln,dr,Ct,th.horizontal,!1,Xe,Ye,O);is&&(et.horizontal[Ln]=is,Li=is.positionedLines.length===1)}}En("left")}else{if(Zr==="auto"&&(Zr=SE(Lr)),vn||D.get("text-writing-mode").indexOf("horizontal")>=0||!aa(Ra)){const Jn=wE(_t,s,u,g,Qe,rn,Xa,Lr,Zr,dr,Ct,th.horizontal,!1,Xe,Ye,O);Jn&&(et.horizontal[Zr]=Jn)}En(vn?"left":Zr)}}let Dt,Nt,jt,Lt,Ht,Aa=!1;if(Oe.icon&&Oe.icon.hasPrimary()){const Ra=RF(Oe.icon,h.iconSizeData,C["icon-size"],m,h.zoom,Oe,O,V.iconScaleFactor);Dt=Ra.iconPrimary,Nt=Ra.iconSecondary;const Rr=Dt.toString(),Xa=f.get(Rr);Xa&&(jt=D.get("icon-offset").evaluate(Oe,{},m),Lt=D.get("icon-anchor").evaluate(Oe,{},m),Ht=D.get("icon-text-fit").evaluate(Oe,{},m),xt=Cae(g.get(Rr),Nt?g.get(Nt.toString()):void 0,jt,Lt),Aa=Xa.sdf,h.sdfIcons===void 0?h.sdfIcons=Xa.sdf:h.sdfIcons!==Xa.sdf&&$r("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Xa.pixelRatio!==h.pixelRatio||D.get("icon-rotate").constantOr(1)!==0)&&(h.iconsNeedLinear=!0))}Ae=Ae||!(!Oe.icon||!Oe.icon.hasSecondary());const ma=bE(et.horizontal)||et.vertical;h.iconsInText||(h.iconsInText=!!ma&&ma.iconsInText);const er=Xe*V.textScaleFactor/Ze,{defaultShapedIcon:Oa,verticallyShapedIcon:Da}=Vae(h,xt,D,Oe,m,et,er,jt,Ht);xt=Oa,xe.push({feature:Oe,shapedTextOrientations:et,shapedText:ma,shapedIcon:xt,iconPrimary:Dt,iconSecondary:Nt,iconOffset:jt,iconAnchor:Lt,verticallyShapedIcon:Da,layoutTextSize:Xe,layoutIconSize:gt,textOffset:Ct,isSDFIcon:Aa,iconTextFit:Ht})}return{featureData:xe,sizes:V,hasAnySecondaryIcon:Ae,textAlongLine:de,symbolPlacement:he}},n.ea=pF,n.eb=function(h,s,u,f,g,m,_,b,O,D){const{featureData:C,hasAnySecondaryIcon:V,sizes:I,textAlongLine:z,symbolPlacement:M}=s;for(const B of C){const{shapedIcon:J,verticallyShapedIcon:te,feature:he,shapedTextOrientations:de,shapedText:ne,layoutTextSize:Ae,textOffset:xe,isSDFIcon:Oe,iconPrimary:Qe,iconSecondary:Ye,iconTextFit:Xe,iconOffset:gt}=B;TF(J,D.iconPositions,Qe,Ye),TF(te,D.iconPositions,Qe,Ye),Oae(de,D.iconPositions),(ne||J)&&zae(h,he,de,J,te,O,I,Ae,0,xe,Oe,f,g,_,b,V,Xe,gt,z,M)}u&&h.generateCollisionDebugBuffers(m,h.collisionBoxArray,I.textScaleFactor)},n.ec=Dh,n.ed=xS,n.ee=wa,n.ef=h0,n.eg=Ti,n.eh=v,n.ei=function(h){let s=0;if(new Uint32Array(h,0,1)[0]!==$k){const u=new Uint32Array(h,0,7),[,,f,g,m,_]=u;s=u.byteLength+g+m+_+m,(f!==h.byteLength||s>=h.byteLength)&&$r("Invalid b3dm header information.")}return Xk(h,s)},n.ej=function(h,s){const u=Qk(h);for(const f of u){for(const g of f.meshes)one(g);f.lights&&(f.lightMeshIndex=f.meshes.length,f.meshes.push(lne(f.lights,s)))}return u},n.ek=vS,n.el=hk,n.em=ps,n.en=function(h){Yr(),Hr!=null&&Hr.then(s=>{s.keys().then(u=>{for(let f=0;f<u.length-h;f++)s.delete(u[f])})})},n.f=function(h){return h.indexOf("mapbox:")===0},n.g=function(h,s){return tl(un(h,{method:"GET"}),s)},n.h=Ie,n.i=function(h){return Ne.API_STYLE_REGEX.test(h)&&!He(h)},n.j=function(h){return decodeURIComponent(atob(h).split("").map(s=>"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)).join(""))},n.k=function(h){return btoa(encodeURIComponent(h).replace(/%([0-9A-F]{2})/g,(s,u)=>String.fromCharCode(+("0x"+u))))},n.l=un,n.m=Xr,n.n=function(h,s){return tl(un(h,{type:"json"}),s)},n.o=fh,n.p=function(h,s){return tl(un(h,{method:"POST"}),s)},n.q=Kt,n.r=xl,n.s=function(h){try{const s=self[h];return s.setItem("_mapbox_test_",1),s.removeItem("_mapbox_test_"),!0}catch{return!1}},n.t=Yt,n.u=function(){return function h(s){return s?(s^Math.random()*(16>>s/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,h)}()},n.v=function(h){return!!h&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(h)},n.w=$r,n.x=function(){return ZE||(ZE=new KA),ZE},n.y=KE,n.z=Ed}),l(["./shared"],function(n){function v(Zt){const Ne=Zt?Zt.url.toString():void 0;return Ne?performance.getEntriesByName(Ne):[]}function R(Zt){if(typeof Zt=="number"||typeof Zt=="boolean"||typeof Zt=="string"||Zt==null)return JSON.stringify(Zt);if(Array.isArray(Zt)){let Ie="[";for(const He of Zt)Ie+=`${R(He)},`;return`${Ie}]`}let Ne="{";for(const Ie of Object.keys(Zt).sort())Ne+=`${Ie}:${R(Zt[Ie])},`;return`${Ne}}`}function x(Zt){let Ne="";for(const Ie of n.bm)(Zt.type!=="model"||Ie!=="minzoom"&&Ie!=="maxzoom")&&(Ne+=`/${R(Zt[Ie])}`);return Ne}class N{constructor(Ne){this.keyCache={},this._layers={},this._layerConfigs={},Ne&&this.replace(Ne)}replace(Ne,Ie){this._layerConfigs={},this._layers={},this.update(Ne,[],Ie)}update(Ne,Ie,He){this._options=He;for(const At of Ne)this._layerConfigs[At.id]=At,(this._layers[At.id]=n.cv(At,this.scope,null,this._options)).compileFilter(He),this.keyCache[At.id]&&delete this.keyCache[At.id];for(const At of Ie)delete this.keyCache[At],delete this._layerConfigs[At],delete this._layers[At];this.familiesBySource={};const yt=function(At,bt){const Gt={};for(let Wt=0;Wt<At.length;Wt++){const Yt=At[Wt];let Kt=bt&&bt[Yt.id];!Kt&&(Kt=x(Yt),Yt.type==="line"&&Yt.paint)&&function Ia(Ga){return typeof Ga=="string"&&Ga==="line-progress"||(Array.isArray(Ga)?Ga.some(Ia):!(!Ga||typeof Ga!="object")&&Object.values(Ga).some(Ia))}(Yt.paint["line-width"])&&(Kt+=`/${R(Yt.paint["line-width"])}`),bt&&(bt[Yt.id]=Kt);let Ca=Gt[Kt];Ca||(Ca=Gt[Kt]=[]),Ca.push(Yt)}const Et=[];for(const Wt in Gt)Et.push(Gt[Wt]);return Et}(Object.values(this._layerConfigs),this.keyCache);for(const At of yt){const bt=At.map(Ca=>this._layers[Ca.id]),Gt=bt[0];if(Gt.visibility==="none")continue;const Et=Gt.source||"";let Wt=this.familiesBySource[Et];Wt||(Wt=this.familiesBySource[Et]={});const Yt=Gt.sourceLayer||"_geojsonTileLayer";let Kt=Wt[Yt];Kt||(Kt=Wt[Yt]=[]),Kt.push(bt)}}}const L=1*n.d_;class F{constructor(Ne){const Ie={},He=[];for(const Gt in Ne){const Et=Ne[Gt],Wt=Ie[Gt]={};for(const Yt in Et.glyphs){const Kt=Et.glyphs[+Yt];if(!Kt||Kt.bitmap.width===0||Kt.bitmap.height===0)continue;const Ca=Kt.metrics.localGlyph?L:1,Ia={x:0,y:0,w:Kt.bitmap.width+2*Ca,h:Kt.bitmap.height+2*Ca};He.push(Ia),Wt[Yt]=Ia}}const{w:yt,h:At}=n.H(He),bt=new n.dZ({width:yt||1,height:At||1});for(const Gt in Ne){const Et=Ne[Gt];for(const Wt in Et.glyphs){const Yt=Et.glyphs[+Wt];if(!Yt||Yt.bitmap.width===0||Yt.bitmap.height===0)continue;const Kt=Ie[Gt][Wt],Ca=Yt.metrics.localGlyph?L:1;n.dZ.copy(Yt.bitmap,bt,{x:0,y:0},{x:Kt.x+Ca,y:Kt.y+Ca},Yt.bitmap)}}this.image=bt,this.positions=Ie}}n.dY(F,"GlyphAtlas");class j{constructor(Ne){this.tileID=new n.aH(Ne.tileID.overscaledZ,Ne.tileID.wrap,Ne.tileID.canonical.z,Ne.tileID.canonical.x,Ne.tileID.canonical.y),this.tileZoom=Ne.tileZoom,this.uid=Ne.uid,this.zoom=Ne.zoom,this.lut=Ne.lut,this.canonical=Ne.tileID.canonical,this.pixelRatio=Ne.pixelRatio,this.tileSize=Ne.tileSize,this.source=Ne.source,this.scope=Ne.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ne.showCollisionBoxes,this.collectResourceTiming=!!Ne.request&&Ne.request.collectResourceTiming,this.promoteId=Ne.promoteId,this.isSymbolTile=Ne.isSymbolTile,this.tileTransform=n.aR(Ne.tileID.canonical,Ne.projection),this.projection=Ne.projection,this.worldview=Ne.worldview,this.localizableLayerIds=Ne.localizableLayerIds,this.brightness=Ne.brightness,this.extraShadowCaster=!!Ne.extraShadowCaster,this.tessellationStep=Ne.tessellationStep,this.scaleFactor=Ne.scaleFactor}parse(Ne,Ie,He,yt,At){this.status="parsing",this.data=Ne,this.collisionBoxArray=new n.aX;const bt=new n.d$(Object.keys(Ne.layers).sort()),Gt=new n.e0(this.tileID,this.promoteId);Gt.bucketLayerIDs=[];const Et={},Wt=new n.e1(256,256),Yt={featureIndex:Gt,iconDependencies:new Map,patternDependencies:new Map,glyphDependencies:{},lineAtlas:Wt,availableImages:He,brightness:this.brightness,scaleFactor:this.scaleFactor,elevationFeatures:void 0},Kt=Ie.familiesBySource[this.source];for(const Yr in Kt){const Cn=Ne.layers[Yr];if(!Cn)continue;let Xr=!1,jn=!1,ki=!1;for(const Bo of Kt[Yr])Bo[0].type==="symbol"?Xr=!0:jn=!0,Bo[0].is3D()&&Bo[0].type!=="model"&&(ki=!0);if(this.extraShadowCaster&&!ki||this.isSymbolTile===!0&&!Xr||this.isSymbolTile===!1&&!jn)continue;Cn.version===1&&n.w(`Vector tile source "${this.source}" layer "${Yr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Xi=bt.encode(Yr),Ps=[];let Es=!1;for(let Bo=0,Ns=0;Bo<Cn.length;Bo++){const $s=Cn.feature(Bo),pc=Gt.getId($s,Yr);if(this.localizableLayerIds&&this.localizableLayerIds.has(Yr)){const tl=$s.properties?$s.properties.worldview:null;if(this.worldview&&typeof tl=="string")if(tl==="all")$s.properties.$localized=!0;else{if(!tl.split(",").includes(this.worldview))continue;$s.properties.$localized=!0,$s.properties.worldview=this.worldview}}!Es&&$s.properties&&$s.properties.hasOwnProperty(n.e2)&&(Es=!0),Ps.push({feature:$s,id:pc,index:Ns,sourceLayerIndex:Xi}),Ns++}Es&&!Yt.elevationFeatures&&Ne.layers.hasOwnProperty(n.e3)&&(Yt.elevationFeatures=n.e4.parseFrom(Ne.layers[n.e3],this.canonical));for(const Bo of Kt[Yr]){const Ns=Bo[0];(!this.extraShadowCaster||Ns.is3D()&&Ns.type!=="model")&&(this.isSymbolTile!==void 0&&Ns.type==="symbol"!==this.isSymbolTile||Ns.minzoom&&this.zoom<Math.floor(Ns.minzoom)||Ns.maxzoom&&this.zoom>=Ns.maxzoom||Ns.visibility!=="none"&&($(Bo,this.zoom,Yt.brightness,He),(Et[Ns.id]=Ns.createBucket({index:Gt.bucketLayerIDs.length,layers:Bo,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Xi,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep})).populate(Ps,Yt,this.tileID.canonical,this.tileTransform),Gt.bucketLayerIDs.push(Bo.map($s=>n.C($s.id,$s.scope)))))}}let Ca,Ia,Ga,Cr,Dr,Mr;Wt.trim();const Hr={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Un=()=>{if(Ca)return this.status="done",At(Ca);if(this.extraShadowCaster)this.status="done",At(null,{buckets:Object.values(Et).filter(Yr=>!Yr.isEmpty()),featureIndex:Gt,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:Yt.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(Ia&&Ga&&Cr){const Yr=new F(Ia),Cn=new Map;for(const[ki,Xi]of Ga.entries()){const{imagePosition:Ps}=n.e7(ki,Xi,n.e8);Cn.set(ki,Ps)}const Xr={};for(const ki in Et){const Xi=Et[ki];Xi instanceof n.aY&&($(Xi.layers,this.zoom,Yt.brightness,He),Xr[ki]=n.e9(Xi,Ia,Yr.positions,Ga,Cn,this.tileID.canonical,this.tileZoom,this.scaleFactor,this.pixelRatio))}const jn={iconsPending:!0,patternsPending:!0};this.rasterizeIfNeeded(yt,Ga,Dr,()=>{jn.iconsPending=!1,ri(Xr,Yr,jn)}),this.rasterizeIfNeeded(yt,Cr,Mr,()=>{jn.patternsPending=!1,ri(Xr,Yr,jn)})}},ri=(Yr,Cn,Xr,jn)=>{if(Xr.iconsPending||Xr.patternsPending)return;const ki=new n.ea(Ga,Cr,this.lut);for(const Xi in Et){const Ps=Et[Xi];if(Xi in Yr)n.eb(Ps,Yr[Xi],this.showCollisionBoxes,He,this.tileID.canonical,this.tileZoom,this.projection,this.brightness,Ga,ki);else if(Ps.hasPattern&&(Ps instanceof n.b2||Ps instanceof n.b3||Ps instanceof n.d8)){$(Ps.layers,this.zoom,Yt.brightness,He);const Es=Object.fromEntries(ki.patternPositions);Ps.addFeatures(Yt,this.tileID.canonical,Es,He,this.tileTransform,this.brightness)}}this.status="done",At(null,{buckets:Object.values(Et).filter(Xi=>!Xi.isEmpty()),featureIndex:Gt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Cn.image,lineAtlas:Wt,imageAtlas:ki,brightness:Yt.brightness})};if(!this.extraShadowCaster){const Yr=n.e5(Yt.glyphDependencies,jn=>Object.keys(jn).map(Number));Object.keys(Yr).length?yt.send("getGlyphs",{uid:this.uid,stacks:Yr,scope:this.scope},(jn,ki)=>{Ca||(Ca=jn,Ia=ki,Un())},void 0,!1,Hr):Ia={};const Cn=Array.from(Yt.iconDependencies.keys()).map(jn=>n.I.parse(jn));Cn.length?yt.send("getImages",{images:Cn,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(jn,ki)=>{Ca||(Ca=jn,Ga=new Map,Dr=this.updateImageMapAndGetImageTaskQueue(Ga,ki,Yt.iconDependencies),Un())},void 0,!1,Hr):(Ga=new Map,Dr=new Map);const Xr=Array.from(Yt.patternDependencies.keys()).map(jn=>n.I.parse(jn));Xr.length?yt.send("getImages",{images:Xr,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(jn,ki)=>{Ca||(Ca=jn,Cr=new Map,Mr=this.updateImageMapAndGetImageTaskQueue(Cr,ki,Yt.patternDependencies),Un())},void 0,!1,Hr):(Cr=new Map,Mr=new Map)}if(Yt.elevationFeatures&&Yt.elevationFeatures.length>0){const Yr=[];for(const Xr of Object.values(Et))if(Xr instanceof n.b3){const jn=Xr.getUnevaluatedPortalGraph();jn&&Yr.push(jn)}const Cn=n.e6.evaluate(Yr);for(const Xr of Object.values(Et))Xr instanceof n.b3&&Xr.setEvaluatedPortalGraph(Cn)}Un()}rasterizeIfNeeded(Ne,Ie,He,yt){Array.from(Ie.values()).some(At=>At.usvg)?this.rasterize(Ne,Ie,He,yt):yt()}updateImageMapAndGetImageTaskQueue(Ne,Ie,He){const yt=new Map;for(const At of Ie.keys()){const bt=He.get(At)||[];for(const Gt of bt){const Et=Gt.toString(),Wt=Ie.get(Gt.id.toString());Wt.usvg?yt.has(Et)||(yt.set(Et,Gt),Ne.set(Et,Object.assign({},Wt))):Ne.set(Et,Wt)}}return yt}rasterize(Ne,Ie,He,yt){this.rasterizeTask=Ne.send("rasterizeImages",{scope:this.scope,tasks:He},(At,bt)=>{if(!At)for(const[Gt,Et]of bt.entries()){const Wt=Object.assign(Ie.get(Gt),{data:Et});Ie.set(Gt,Wt)}yt()})}cancelRasterize(){this.rasterizeTask&&this.rasterizeTask.cancel()}}function $(Zt,Ne,Ie,He){const yt=new n.aa(Ne,{brightness:Ie});for(const At of Zt)At.recalculate(yt,He)}class H extends n.E{constructor(Ne,Ie,He,yt,At,bt){super(),this.actor=Ne,this.layerIndex=Ie,this.availableImages=He,this.loadVectorData=At||n.aE,this.loading={},this.loaded={},this.deduped=new n.aD(Ne.scheduler),this.isSpriteLoaded=yt,this.scheduler=Ne.scheduler,this.brightness=bt}loadTile(Ne,Ie){const He=Ne.uid,yt=Ne&&Ne.request,At=yt&&yt.collectResourceTiming,bt=this.loading[He]=new j(Ne);bt.abort=this.loadVectorData(Ne,(Gt,Et)=>{const Wt=!this.loading[He];if(delete this.loading[He],bt.cancelRasterize(),Wt||Gt||!Et)return bt.status="done",Wt||(this.loaded[He]=bt),Ie(Gt);const Yt=Et.rawData,Kt={};Et.expires&&(Kt.expires=Et.expires),Et.cacheControl&&(Kt.cacheControl=Et.cacheControl),bt.vectorTile=Et.vectorTile||new n.ec.VectorTile(new n.bi(Yt));const Ca=()=>{bt.parse(bt.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ia,Ga)=>{if(Ia||!Ga)return Ie(Ia);const Cr={};if(At){const Dr=v(yt);Dr.length>0&&(Cr.resourceTiming=JSON.parse(JSON.stringify(Dr)))}Ie(null,n.l({rawTileData:Yt.slice(0)},Ga,Kt,Cr))})};this.isSpriteLoaded?Ca():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(Ca,{type:"parseTile",isSymbolTile:Ne.isSymbolTile,zoom:Ne.tileZoom}):Ca()}),this.loaded=this.loaded||{},this.loaded[He]=bt})}reloadTile(Ne,Ie){const He=this.loaded,yt=Ne.uid;if(He&&He[yt]){const At=He[yt];At.scaleFactor=Ne.scaleFactor,At.showCollisionBoxes=Ne.showCollisionBoxes,At.projection=Ne.projection,At.brightness=Ne.brightness,At.tileTransform=n.aR(Ne.tileID.canonical,Ne.projection),At.extraShadowCaster=Ne.extraShadowCaster,At.lut=Ne.lut;const bt=(Gt,Et)=>{const Wt=At.reloadCallback;Wt&&(delete At.reloadCallback,At.parse(At.vectorTile,this.layerIndex,this.availableImages,this.actor,Wt)),Ie(Gt,Et)};At.status==="parsing"?At.reloadCallback=bt:At.status==="done"&&(At.vectorTile?At.parse(At.vectorTile,this.layerIndex,this.availableImages,this.actor,bt):bt())}else Ie(null,void 0)}abortTile(Ne,Ie){const He=Ne.uid,yt=this.loading[He];yt&&(yt.abort&&yt.abort(),delete this.loading[He]),Ie()}removeTile(Ne,Ie){const He=this.loaded,yt=Ne.uid;He&&He[yt]&&delete He[yt],Ie()}}class W{loadTile(Ne,Ie){const{uid:He,encoding:yt,rawImageData:At,padding:bt}=Ne,Gt=ImageBitmap&&At instanceof ImageBitmap?this.getImageData(At,bt):At;Ie(null,new n.ed(He,Gt,yt,bt<1))}reloadTile(Ne,Ie){Ie(null,null)}abortTile(Ne,Ie){Ie()}removeTile(Ne,Ie){Ie()}getImageData(Ne,Ie){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ne.width,Ne.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=Ne.width,this.offscreenCanvas.height=Ne.height,this.offscreenCanvasContext.drawImage(Ne,0,0,Ne.width,Ne.height);const He=this.offscreenCanvasContext.getImageData(-Ie,-Ie,Ne.width+2*Ie,Ne.height+2*Ie);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),He}}n.bh.setPbf(n.bi);class ee{constructor(Ne){this._mrt=new n.bh(Ne.partial?30:1/0),this._isHeaderLoaded=!1,this.uid=Ne.uid,this.tileID=Ne.tileID,this.source=Ne.source}parse(Ne,Ie){const He=this._mrt;this.status="parsing",this._entireBuffer=Ne;try{He.parseHeader(Ne),this._isHeaderLoaded=!0;const yt=[];for(const At in He.layers){const bt=He.getLayer(At),Gt=bt.getDataRange(bt.getBandList()),Et=He.createDecodingTask(Gt),Wt=Ne.slice(Gt.firstByte,Gt.lastByte+1),Yt=n.bh.performDecoding(Wt,Et).then(Kt=>Et.complete(null,Kt)).catch(Kt=>Et.complete(Kt,null));yt.push(Yt)}Promise.allSettled(yt).then(()=>Ie(null,He))}catch(yt){Ie(yt)}}}class se{constructor(Ne){this.actor=Ne,this.loading={},this.loaded={}}loadTile(Ne,Ie){const He=Ne.uid,yt=Ne.request,At=this.loading[He]=new ee(Ne),{cancel:bt}=n.bj(yt,(Gt,Et,Wt,Yt)=>{const Kt=!this.loading[He];if(delete this.loading[He],Kt||Gt||!Et)return At.status="done",Kt||(this.loaded[He]=At),Ie(Gt);At.parse(Et,(Ca,Ia)=>{if(Ca||!Ia)return Ie(Ca);Ie(null,Ia,Wt,Yt)}),this.loaded[He]=At});At.abort=bt}reloadTile(Ne,Ie){Ie(null,void 0)}abortTile(Ne,Ie){const He=Ne.uid,yt=this.loading[He];yt&&(yt.abort&&yt.abort(),delete this.loading[He]),Ie()}removeTile(Ne,Ie){const He=Ne.uid;this.loaded[He]&&delete this.loaded[He],Ie()}decodeRasterArray({task:Ne,buffer:Ie},He){n.bh.performDecoding(Ie,Ne).then(yt=>He(null,yt)).catch(yt=>He(yt))}}const fe=n.ec.VectorTileFeature.prototype.toGeoJSON;class le{constructor(Ne){this._feature=Ne,this.extent=n.ai,this.type=Ne.type,this.properties=Ne.tags,"id"in Ne&&!isNaN(Ne.id)&&(this.id=parseInt(Ne.id,10))}loadGeometry(){if(this._feature.type===1){const Ne=[];for(const Ie of this._feature.geometry)Ne.push([new n.P(Ie[0],Ie[1])]);return Ne}{const Ne=[];for(const Ie of this._feature.geometry){const He=[];for(const yt of Ie)He.push(new n.P(yt[0],yt[1]));Ne.push(He)}return Ne}}toGeoJSON(Ne,Ie,He){return fe.call(this,Ne,Ie,He)}}class me{constructor(Ne){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=n.ai,this.length=Ne.length,this._features=Ne}feature(Ne){return new le(this._features[Ne])}}const ge=64/4096,Re=128;class we{constructor(){this.features=new Map}clear(){this.features.clear()}load(Ne=[],Ie){for(const He of Ne){const yt=He.id;if(yt==null)continue;let At=this.features.get(yt);At&&this.updateCache(At,Ie),He.geometry?(At=oe(He),this.updateCache(At,Ie),this.features.set(yt,At)):this.features.delete(yt),this.updateCache(At,Ie)}}updateCache(Ne,Ie){for(const{canonical:He,uid:yt}of Object.values(Ie)){const{z:At,x:bt,y:Gt}=He;Ve(Ne,Math.pow(2,At),bt,Gt)&&delete Ie[yt]}}getTile(Ne,Ie,He){const yt=Math.pow(2,Ne),At=[];for(const bt of this.features.values())Ve(bt,yt,Ie,He)&&At.push(ze(bt,yt,Ie,He));return{features:At}}getFeatures(){return[...this.features.values()]}}function Ve({minX:Zt,minY:Ne,maxX:Ie,maxY:He},yt,At,bt){return Zt<(At+1+ge)/yt&&Ne<(bt+1+ge)/yt&&Ie>(At-ge)/yt&&He>(bt-ge)/yt}function oe(Zt){const{id:Ne,geometry:Ie,properties:He}=Zt;if(!Ie)return;if(Ie.type==="GeometryCollection")throw new Error("GeometryCollection not supported in dynamic mode.");const{type:yt,coordinates:At}=Ie,bt={id:Ne,type:1,geometry:[],tags:He,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},Gt=bt.geometry;if(yt==="Point")_e(At,Gt,bt);else if(yt==="MultiPoint")for(const Et of At)_e(Et,Gt,bt);else if(yt==="LineString")bt.type=2,Fe(At,Gt,bt);else if(yt==="MultiLineString")bt.type=2,Ee(At,Gt,bt);else if(yt==="Polygon")bt.type=3,Ee(At,Gt,bt,!0);else{if(yt!=="MultiPolygon")throw new Error("Input data is not a valid GeoJSON object.");bt.type=3;for(const Et of At)Ee(Et,Gt,bt,!0)}return bt}function _e([Zt,Ne],Ie,He){const yt=n.av(Zt);let At=n.aC(Ne);At=At<0?0:At>1?1:At,Ie.push(yt,At),He.minX=Math.min(He.minX,yt),He.minY=Math.min(He.minY,At),He.maxX=Math.max(He.maxX,yt),He.maxY=Math.max(He.maxY,At)}function Fe(Zt,Ne,Ie,He=!1,yt=!1){const At=[];for(const bt of Zt)_e(bt,At,Ie);Ne.push(At),He&&function(bt,Gt){let Et=0;for(let Wt=0,Yt=bt.length,Kt=Yt-2;Wt<Yt;Kt=Wt,Wt+=2)Et+=(bt[Wt]-bt[Kt])*(bt[Wt+1]+bt[Kt+1]);if(Et>0===Gt)for(let Wt=0,Yt=bt.length;Wt<Yt/2;Wt+=2){const Kt=bt[Wt],Ca=bt[Wt+1];bt[Wt]=bt[Yt-2-Wt],bt[Wt+1]=bt[Yt-1-Wt],bt[Yt-2-Wt]=Kt,bt[Yt-1-Wt]=Ca}}(At,yt)}function Ee(Zt,Ne,Ie,He=!1){for(let yt=0;yt<Zt.length;yt++)Fe(Zt[yt],Ne,Ie,He,yt===0)}function ze(Zt,Ne,Ie,He){const{id:yt,type:At,geometry:bt,tags:Gt}=Zt,Et=[];if(At===1)(function(Wt,Yt,Kt,Ca,Ia){for(let Ga=0;Ga<Wt.length;Ga+=2){const Cr=Math.round(n.ai*(Wt[Ga+0]*Yt-Kt)),Dr=Math.round(n.ai*(Wt[Ga+1]*Yt-Ca));Ia.push([Cr,Dr])}})(bt,Ne,Ie,He,Et);else for(const Wt of bt)Se(Wt,Ne,Ie,He,Et);return{id:yt,type:At,geometry:Et,tags:Gt}}function Se(Zt,Ne,Ie,He,yt){const bt=n.ai+Re;let Gt;for(let Et=0;Et<Zt.length-2;Et+=2){let Wt=Math.round(n.ai*(Zt[Et+0]*Ne-Ie)),Yt=Math.round(n.ai*(Zt[Et+1]*Ne-He)),Kt=Math.round(n.ai*(Zt[Et+2]*Ne-Ie)),Ca=Math.round(n.ai*(Zt[Et+3]*Ne-He));const Ia=Kt-Wt,Ga=Ca-Yt;Wt<-128&&Kt<-128||(Wt<-128?(Yt+=Math.round(Ga*((-128-Wt)/Ia)),Wt=-128):Kt<-128&&(Ca=Yt+Math.round(Ga*((-128-Wt)/Ia)),Kt=-128),Yt<-128&&Ca<-128||(Yt<-128?(Wt+=Math.round(Ia*((-128-Yt)/Ga)),Yt=-128):Ca<-128&&(Kt=Wt+Math.round(Ia*((-128-Yt)/Ga)),Ca=-128),Wt>=bt&&Kt>=bt||(Wt>=bt?(Yt+=Math.round(Ga*((bt-Wt)/Ia)),Wt=bt):Kt>=bt&&(Ca=Yt+Math.round(Ga*((bt-Wt)/Ia)),Kt=bt),Yt>=bt&&Ca>=bt||(Yt>=bt?(Wt+=Math.round(Ia*((bt-Yt)/Ga)),Yt=bt):Ca>=bt&&(Kt=Wt+Math.round(Ia*((bt-Yt)/Ga)),Ca=bt),Gt&&Wt===Gt[Gt.length-1][0]&&Yt===Gt[Gt.length-1][1]||(Gt=[[Wt,Yt]],yt.push(Gt)),Gt.push([Kt,Ca])))))}}var je,Ue,$e,Be={exports:{}},qe=function(){if($e)return Be.exports;$e=1;var Zt=n.eg(),Ne=function(){if(Ue)return je;Ue=1;var Yt=n.ee(),Kt=n.ef().VectorTileFeature;function Ca(Ga,Cr){this.options=Cr||{},this.features=Ga,this.length=Ga.length}function Ia(Ga,Cr){this.id=typeof Ga.id=="number"?Ga.id:void 0,this.type=Ga.type,this.rawGeometry=Ga.type===1?[Ga.geometry]:Ga.geometry,this.properties=Ga.tags,this.extent=Cr||4096}return je=Ca,Ca.prototype.feature=function(Ga){return new Ia(this.features[Ga],this.options.extent)},Ia.prototype.loadGeometry=function(){var Ga=this.rawGeometry;this.geometry=[];for(var Cr=0;Cr<Ga.length;Cr++){for(var Dr=Ga[Cr],Mr=[],Hr=0;Hr<Dr.length;Hr++)Mr.push(new Yt(Dr[Hr][0],Dr[Hr][1]));this.geometry.push(Mr)}return this.geometry},Ia.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ga=this.geometry,Cr=1/0,Dr=-1/0,Mr=1/0,Hr=-1/0,Un=0;Un<Ga.length;Un++)for(var ri=Ga[Un],Yr=0;Yr<ri.length;Yr++){var Cn=ri[Yr];Cr=Math.min(Cr,Cn.x),Dr=Math.max(Dr,Cn.x),Mr=Math.min(Mr,Cn.y),Hr=Math.max(Hr,Cn.y)}return[Cr,Mr,Dr,Hr]},Ia.prototype.toGeoJSON=Kt.prototype.toGeoJSON,je}();function Ie(Yt){var Kt=new Zt;return function(Ca,Ia){for(var Ga in Ca.layers)Ia.writeMessage(3,He,Ca.layers[Ga])}(Yt,Kt),Kt.finish()}function He(Yt,Kt){var Ca;Kt.writeVarintField(15,Yt.version||1),Kt.writeStringField(1,Yt.name||""),Kt.writeVarintField(5,Yt.extent||4096);var Ia={keys:[],values:[],keycache:{},valuecache:{}};for(Ca=0;Ca<Yt.length;Ca++)Ia.feature=Yt.feature(Ca),Kt.writeMessage(2,yt,Ia);var Ga=Ia.keys;for(Ca=0;Ca<Ga.length;Ca++)Kt.writeStringField(3,Ga[Ca]);var Cr=Ia.values;for(Ca=0;Ca<Cr.length;Ca++)Kt.writeMessage(4,Wt,Cr[Ca])}function yt(Yt,Kt){var Ca=Yt.feature;Ca.id!==void 0&&Kt.writeVarintField(1,Ca.id),Kt.writeMessage(2,At,Yt),Kt.writeVarintField(3,Ca.type),Kt.writeMessage(4,Et,Ca)}function At(Yt,Kt){var Ca=Yt.feature,Ia=Yt.keys,Ga=Yt.values,Cr=Yt.keycache,Dr=Yt.valuecache;for(var Mr in Ca.properties){var Hr=Ca.properties[Mr],Un=Cr[Mr];if(Hr!==null){Un===void 0&&(Ia.push(Mr),Cr[Mr]=Un=Ia.length-1),Kt.writeVarint(Un);var ri=typeof Hr;ri!=="string"&&ri!=="boolean"&&ri!=="number"&&(Hr=JSON.stringify(Hr));var Yr=ri+":"+Hr,Cn=Dr[Yr];Cn===void 0&&(Ga.push(Hr),Dr[Yr]=Cn=Ga.length-1),Kt.writeVarint(Cn)}}}function bt(Yt,Kt){return(Kt<<3)+(7&Yt)}function Gt(Yt){return Yt<<1^Yt>>31}function Et(Yt,Kt){for(var Ca=Yt.loadGeometry(),Ia=Yt.type,Ga=0,Cr=0,Dr=Ca.length,Mr=0;Mr<Dr;Mr++){var Hr=Ca[Mr],Un=1;Ia===1&&(Un=Hr.length),Kt.writeVarint(bt(1,Un));for(var ri=Ia===3?Hr.length-1:Hr.length,Yr=0;Yr<ri;Yr++){Yr===1&&Ia!==1&&Kt.writeVarint(bt(2,ri-1));var Cn=Hr[Yr].x-Ga,Xr=Hr[Yr].y-Cr;Kt.writeVarint(Gt(Cn)),Kt.writeVarint(Gt(Xr)),Ga+=Cn,Cr+=Xr}Ia===3&&Kt.writeVarint(bt(7,1))}}function Wt(Yt,Kt){var Ca=typeof Yt;Ca==="string"?Kt.writeStringField(1,Yt):Ca==="boolean"?Kt.writeBooleanField(7,Yt):Ca==="number"&&(Yt%1!=0?Kt.writeDoubleField(3,Yt):Yt<0?Kt.writeSVarintField(6,Yt):Kt.writeVarintField(5,Yt))}return Be.exports=Ie,Be.exports.fromVectorTileJs=Ie,Be.exports.fromGeojsonVt=function(Yt,Kt){Kt=Kt||{};var Ca={};for(var Ia in Yt)Ca[Ia]=new Ne(Yt[Ia].features,Kt),Ca[Ia].name=Ia,Ca[Ia].version=Kt.version,Ca[Ia].extent=Kt.extent;return Ie({layers:Ca})},Be.exports.GeoJSONWrapper=Ne,Be.exports}(),be=n.eh(qe);const Te={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Zt=>Zt},ke=Math.fround||(Ge=new Float32Array(1),Zt=>(Ge[0]=+Zt,Ge[0]));var Ge;const at=3,rt=5,lt=6;class ot{constructor(Ne){this.options=Object.assign(Object.create(Te),Ne),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Ne){const{log:Ie,minZoom:He,maxZoom:yt}=this.options;Ie&&console.time("total time");const At=`prepare ${Ne.length} points`;Ie&&console.time(At),this.points=Ne;const bt=[];for(let Et=0;Et<Ne.length;Et++){const Wt=Ne[Et];if(!Wt.geometry)continue;const[Yt,Kt]=Wt.geometry.coordinates,Ca=ke(Bt(Yt)),Ia=ke(wa(Kt));bt.push(Ca,Ia,1/0,Et,-1,1),this.options.reduce&&bt.push(0)}let Gt=this.trees[yt+1]=this._createTree(bt);Ie&&console.timeEnd(At);for(let Et=yt;Et>=He;Et--){const Wt=+Date.now();Gt=this.trees[Et]=this._createTree(this._cluster(Gt,Et)),Ie&&console.log("z%d: %d clusters in %dms",Et,Gt.numItems,+Date.now()-Wt)}return Ie&&console.timeEnd("total time"),this}getClusters(Ne,Ie){let He=((Ne[0]+180)%360+360)%360-180;const yt=Math.max(-90,Math.min(90,Ne[1]));let At=Ne[2]===180?180:((Ne[2]+180)%360+360)%360-180;const bt=Math.max(-90,Math.min(90,Ne[3]));if(Ne[2]-Ne[0]>=360)He=-180,At=180;else if(He>At){const Kt=this.getClusters([He,yt,180,bt],Ie),Ca=this.getClusters([-180,yt,At,bt],Ie);return Kt.concat(Ca)}const Gt=this.trees[this._limitZoom(Ie)],Et=Gt.range(Bt(He),wa(bt),Bt(At),wa(yt)),Wt=Gt.data,Yt=[];for(const Kt of Et){const Ca=this.stride*Kt;Yt.push(Wt[Ca+rt]>1?ve(Wt,Ca,this.clusterProps):this.points[Wt[Ca+at]])}return Yt}getChildren(Ne){const Ie=this._getOriginId(Ne),He=this._getOriginZoom(Ne),yt="No cluster with the specified id.",At=this.trees[He];if(!At)throw new Error(yt);const bt=At.data;if(Ie*this.stride>=bt.length)throw new Error(yt);const Gt=this.options.radius/(this.options.extent*Math.pow(2,He-1)),Et=At.within(bt[Ie*this.stride],bt[Ie*this.stride+1],Gt),Wt=[];for(const Yt of Et){const Kt=Yt*this.stride;bt[Kt+4]===Ne&&Wt.push(bt[Kt+rt]>1?ve(bt,Kt,this.clusterProps):this.points[bt[Kt+at]])}if(Wt.length===0)throw new Error(yt);return Wt}getLeaves(Ne,Ie,He){const yt=[];return this._appendLeaves(yt,Ne,Ie=Ie||10,He=He||0,0),yt}getTile(Ne,Ie,He){const yt=this.trees[this._limitZoom(Ne)],At=Math.pow(2,Ne),{extent:bt,radius:Gt}=this.options,Et=Gt/bt,Wt=(He-Et)/At,Yt=(He+1+Et)/At,Kt={features:[]};return this._addTileFeatures(yt.range((Ie-Et)/At,Wt,(Ie+1+Et)/At,Yt),yt.data,Ie,He,At,Kt),Ie===0&&this._addTileFeatures(yt.range(1-Et/At,Wt,1,Yt),yt.data,At,He,At,Kt),Ie===At-1&&this._addTileFeatures(yt.range(0,Wt,Et/At,Yt),yt.data,-1,He,At,Kt),Kt.features.length?Kt:null}getClusterExpansionZoom(Ne){let Ie=this._getOriginZoom(Ne)-1;for(;Ie<=this.options.maxZoom;){const He=this.getChildren(Ne);if(Ie++,He.length!==1)break;Ne=He[0].properties.cluster_id}return Ie}_appendLeaves(Ne,Ie,He,yt,At){const bt=this.getChildren(Ie);for(const Gt of bt){const Et=Gt.properties;if(Et&&Et.cluster?At+Et.point_count<=yt?At+=Et.point_count:At=this._appendLeaves(Ne,Et.cluster_id,He,yt,At):At<yt?At++:Ne.push(Gt),Ne.length===He)break}return At}_createTree(Ne){const Ie=new n.bE(Ne.length/this.stride|0,this.options.nodeSize,Float32Array);for(let He=0;He<Ne.length;He+=this.stride)Ie.add(Ne[He],Ne[He+1]);return Ie.finish(),Ie.data=Ne,Ie}_addTileFeatures(Ne,Ie,He,yt,At,bt){for(const Gt of Ne){const Et=Gt*this.stride,Wt=Ie[Et+rt]>1;let Yt,Kt,Ca;if(Wt)Yt=Vt(Ie,Et,this.clusterProps),Kt=Ie[Et],Ca=Ie[Et+1];else{const Cr=this.points[Ie[Et+at]];Yt=Cr.properties;const[Dr,Mr]=Cr.geometry.coordinates;Kt=Bt(Dr),Ca=wa(Mr)}const Ia={type:1,geometry:[[Math.round(this.options.extent*(Kt*At-He)),Math.round(this.options.extent*(Ca*At-yt))]],tags:Yt};let Ga;Ga=Wt||this.options.generateId?Ie[Et+at]:this.points[Ie[Et+at]].id,Ga!==void 0&&(Ia.id=Ga),bt.features.push(Ia)}}_limitZoom(Ne){return Math.max(this.options.minZoom,Math.min(Math.floor(+Ne),this.options.maxZoom+1))}_cluster(Ne,Ie){const{radius:He,extent:yt,reduce:At,minPoints:bt}=this.options,Gt=He/(yt*Math.pow(2,Ie)),Et=Ne.data,Wt=[],Yt=this.stride;for(let Kt=0;Kt<Et.length;Kt+=Yt){if(Et[Kt+2]<=Ie)continue;Et[Kt+2]=Ie;const Ca=Et[Kt],Ia=Et[Kt+1],Ga=Ne.within(Et[Kt],Et[Kt+1],Gt),Cr=Et[Kt+rt];let Dr=Cr;for(const Mr of Ga){const Hr=Mr*Yt;Et[Hr+2]>Ie&&(Dr+=Et[Hr+rt])}if(Dr>Cr&&Dr>=bt){let Mr,Hr=Ca*Cr,Un=Ia*Cr,ri=-1;const Yr=(Kt/Yt<<5)+(Ie+1)+this.points.length;for(const Cn of Ga){const Xr=Cn*Yt;if(Et[Xr+2]<=Ie)continue;Et[Xr+2]=Ie;const jn=Et[Xr+rt];Hr+=Et[Xr]*jn,Un+=Et[Xr+1]*jn,Et[Xr+4]=Yr,At&&(Mr||(Mr=this._map(Et,Kt,!0),ri=this.clusterProps.length,this.clusterProps.push(Mr)),At(Mr,this._map(Et,Xr)))}Et[Kt+4]=Yr,Wt.push(Hr/Dr,Un/Dr,1/0,Yr,-1,Dr),At&&Wt.push(ri)}else{for(let Mr=0;Mr<Yt;Mr++)Wt.push(Et[Kt+Mr]);if(Dr>1)for(const Mr of Ga){const Hr=Mr*Yt;if(!(Et[Hr+2]<=Ie)){Et[Hr+2]=Ie;for(let Un=0;Un<Yt;Un++)Wt.push(Et[Hr+Un])}}}}return Wt}_getOriginId(Ne){return Ne-this.points.length>>5}_getOriginZoom(Ne){return(Ne-this.points.length)%32}_map(Ne,Ie,He){if(Ne[Ie+rt]>1){const bt=this.clusterProps[Ne[Ie+lt]];return He?Object.assign({},bt):bt}const yt=this.points[Ne[Ie+at]].properties,At=this.options.map(yt);return He&&At===yt?Object.assign({},At):At}}function ve(Zt,Ne,Ie){return{type:"Feature",id:Zt[Ne+at],properties:Vt(Zt,Ne,Ie),geometry:{type:"Point",coordinates:[(He=Zt[Ne],360*(He-.5)),It(Zt[Ne+1])]}};var He}function Vt(Zt,Ne,Ie){const He=Zt[Ne+rt],yt=He>=1e4?`${Math.round(He/1e3)}k`:He>=1e3?Math.round(He/100)/10+"k":He,At=Zt[Ne+lt],bt=At===-1?{}:Object.assign({},Ie[At]);return Object.assign(bt,{cluster:!0,cluster_id:Zt[Ne+at],point_count:He,point_count_abbreviated:yt})}function Bt(Zt){return Zt/360+.5}function wa(Zt){const Ne=Math.sin(Zt*Math.PI/180),Ie=.5-.25*Math.log((1+Ne)/(1-Ne))/Math.PI;return Ie<0?0:Ie>1?1:Ie}function It(Zt){const Ne=(180-360*Zt)*Math.PI/180;return 360*Math.atan(Math.exp(Ne))/Math.PI-90}function $t(Zt,Ne,Ie,He){let yt=He;const At=Ne+(Ie-Ne>>1);let bt,Gt=Ie-Ne;const Et=Zt[Ne],Wt=Zt[Ne+1],Yt=Zt[Ie],Kt=Zt[Ie+1];for(let Ca=Ne+3;Ca<Ie;Ca+=3){const Ia=wt(Zt[Ca],Zt[Ca+1],Et,Wt,Yt,Kt);if(Ia>yt)bt=Ca,yt=Ia;else if(Ia===yt){const Ga=Math.abs(Ca-At);Ga<Gt&&(bt=Ca,Gt=Ga)}}yt>He&&(bt-Ne>3&&$t(Zt,Ne,bt,He),Zt[bt+2]=yt,Ie-bt>3&&$t(Zt,bt,Ie,He))}function wt(Zt,Ne,Ie,He,yt,At){let bt=yt-Ie,Gt=At-He;if(bt!==0||Gt!==0){const Et=((Zt-Ie)*bt+(Ne-He)*Gt)/(bt*bt+Gt*Gt);Et>1?(Ie=yt,He=At):Et>0&&(Ie+=bt*Et,He+=Gt*Et)}return bt=Zt-Ie,Gt=Ne-He,bt*bt+Gt*Gt}function hr(Zt,Ne,Ie,He){const yt={id:Zt??null,type:Ne,geometry:Ie,tags:He,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(Ne==="Point"||Ne==="MultiPoint"||Ne==="LineString")ba(yt,Ie);else if(Ne==="Polygon")ba(yt,Ie[0]);else if(Ne==="MultiLineString")for(const At of Ie)ba(yt,At);else if(Ne==="MultiPolygon")for(const At of Ie)ba(yt,At[0]);return yt}function ba(Zt,Ne){for(let Ie=0;Ie<Ne.length;Ie+=3)Zt.minX=Math.min(Zt.minX,Ne[Ie]),Zt.minY=Math.min(Zt.minY,Ne[Ie+1]),Zt.maxX=Math.max(Zt.maxX,Ne[Ie]),Zt.maxY=Math.max(Zt.maxY,Ne[Ie+1])}function Pa(Zt,Ne,Ie,He){if(!Ne.geometry)return;const yt=Ne.geometry.coordinates;if(yt&&yt.length===0)return;const At=Ne.geometry.type,bt=Math.pow(Ie.tolerance/((1<<Ie.maxZoom)*Ie.extent),2);let Gt=[],Et=Ne.id;if(Ie.promoteId?Et=Ne.properties[Ie.promoteId]:Ie.generateId&&(Et=He||0),At==="Point")Ja(yt,Gt);else if(At==="MultiPoint")for(const Wt of yt)Ja(Wt,Gt);else if(At==="LineString")or(yt,Gt,bt,!1);else if(At==="MultiLineString"){if(Ie.lineMetrics){for(const Wt of yt)Gt=[],or(Wt,Gt,bt,!1),Zt.push(hr(Et,"LineString",Gt,Ne.properties));return}lr(yt,Gt,bt,!1)}else if(At==="Polygon")lr(yt,Gt,bt,!0);else{if(At!=="MultiPolygon"){if(At==="GeometryCollection"){for(const Wt of Ne.geometry.geometries)Pa(Zt,{id:Et,geometry:Wt,properties:Ne.properties},Ie,He);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Wt of yt){const Yt=[];lr(Wt,Yt,bt,!0),Gt.push(Yt)}}Zt.push(hr(Et,At,Gt,Ne.properties))}function Ja(Zt,Ne){Ne.push(Tr(Zt[0]),ka(Zt[1]),0)}function or(Zt,Ne,Ie,He){let yt,At,bt=0;for(let Et=0;Et<Zt.length;Et++){const Wt=Tr(Zt[Et][0]),Yt=ka(Zt[Et][1]);Ne.push(Wt,Yt,0),Et>0&&(bt+=He?(yt*Yt-Wt*At)/2:Math.sqrt(Math.pow(Wt-yt,2)+Math.pow(Yt-At,2))),yt=Wt,At=Yt}const Gt=Ne.length-3;Ne[2]=1,$t(Ne,0,Gt,Ie),Ne[Gt+2]=1,Ne.size=Math.abs(bt),Ne.start=0,Ne.end=Ne.size}function lr(Zt,Ne,Ie,He){for(let yt=0;yt<Zt.length;yt++){const At=[];or(Zt[yt],At,Ie,He),Ne.push(At)}}function Tr(Zt){return Zt/360+.5}function ka(Zt){const Ne=Math.sin(Zt*Math.PI/180),Ie=.5-.25*Math.log((1+Ne)/(1-Ne))/Math.PI;return Ie<0?0:Ie>1?1:Ie}function kr(Zt,Ne,Ie,He,yt,At,bt,Gt){if(He/=Ne,At>=(Ie/=Ne)&&bt<He)return Zt;if(bt<Ie||At>=He)return null;const Et=[];for(const Wt of Zt){const Yt=Wt.geometry;let Kt=Wt.type;const Ca=yt===0?Wt.minX:Wt.minY,Ia=yt===0?Wt.maxX:Wt.maxY;if(Ca>=Ie&&Ia<He){Et.push(Wt);continue}if(Ia<Ie||Ca>=He)continue;let Ga=[];if(Kt==="Point"||Kt==="MultiPoint")nn(Yt,Ga,Ie,He,yt);else if(Kt==="LineString")wn(Yt,Ga,Ie,He,yt,!1,Gt.lineMetrics);else if(Kt==="MultiLineString")va(Yt,Ga,Ie,He,yt,!1);else if(Kt==="Polygon")va(Yt,Ga,Ie,He,yt,!0);else if(Kt==="MultiPolygon")for(const Cr of Yt){const Dr=[];va(Cr,Dr,Ie,He,yt,!0),Dr.length&&Ga.push(Dr)}if(Ga.length){if(Gt.lineMetrics&&Kt==="LineString"){for(const Cr of Ga)Et.push(hr(Wt.id,Kt,Cr,Wt.tags));continue}Kt!=="LineString"&&Kt!=="MultiLineString"||(Ga.length===1?(Kt="LineString",Ga=Ga[0]):Kt="MultiLineString"),Kt!=="Point"&&Kt!=="MultiPoint"||(Kt=Ga.length===3?"Point":"MultiPoint"),Et.push(hr(Wt.id,Kt,Ga,Wt.tags))}}return Et.length?Et:null}function nn(Zt,Ne,Ie,He,yt){for(let At=0;At<Zt.length;At+=3){const bt=Zt[At+yt];bt>=Ie&&bt<=He&&$a(Ne,Zt[At],Zt[At+1],Zt[At+2])}}function wn(Zt,Ne,Ie,He,yt,At,bt){let Gt=un(Zt);const Et=yt===0?la:Ya;let Wt,Yt,Kt=Zt.start;for(let Dr=0;Dr<Zt.length-3;Dr+=3){const Mr=Zt[Dr],Hr=Zt[Dr+1],Un=Zt[Dr+2],ri=Zt[Dr+3],Yr=Zt[Dr+4],Cn=yt===0?Mr:Hr,Xr=yt===0?ri:Yr;let jn=!1;bt&&(Wt=Math.sqrt(Math.pow(Mr-ri,2)+Math.pow(Hr-Yr,2))),Cn<Ie?Xr>Ie&&(Yt=Et(Gt,Mr,Hr,ri,Yr,Ie),bt&&(Gt.start=Kt+Wt*Yt)):Cn>He?Xr<He&&(Yt=Et(Gt,Mr,Hr,ri,Yr,He),bt&&(Gt.start=Kt+Wt*Yt)):$a(Gt,Mr,Hr,Un),Xr<Ie&&Cn>=Ie&&(Yt=Et(Gt,Mr,Hr,ri,Yr,Ie),jn=!0),Xr>He&&Cn<=He&&(Yt=Et(Gt,Mr,Hr,ri,Yr,He),jn=!0),!At&&jn&&(bt&&(Gt.end=Kt+Wt*Yt),Ne.push(Gt),Gt=un(Zt)),bt&&(Kt+=Wt)}let Ca=Zt.length-3;const Ia=Zt[Ca],Ga=Zt[Ca+1],Cr=yt===0?Ia:Ga;Cr>=Ie&&Cr<=He&&$a(Gt,Ia,Ga,Zt[Ca+2]),Ca=Gt.length-3,At&&Ca>=3&&(Gt[Ca]!==Gt[0]||Gt[Ca+1]!==Gt[1])&&$a(Gt,Gt[0],Gt[1],Gt[2]),Gt.length&&Ne.push(Gt)}function un(Zt){const Ne=[];return Ne.size=Zt.size,Ne.start=Zt.start,Ne.end=Zt.end,Ne}function va(Zt,Ne,Ie,He,yt,At){for(const bt of Zt)wn(bt,Ne,Ie,He,yt,At,!1)}function $a(Zt,Ne,Ie,He){Zt.push(Ne,Ie,He)}function la(Zt,Ne,Ie,He,yt,At){const bt=(At-Ne)/(He-Ne);return $a(Zt,At,Ie+(yt-Ie)*bt,1),bt}function Ya(Zt,Ne,Ie,He,yt,At){const bt=(At-Ie)/(yt-Ie);return $a(Zt,Ne+(He-Ne)*bt,At,1),bt}function yr(Zt,Ne){const Ie=[];for(let He=0;He<Zt.length;He++){const yt=Zt[He],At=yt.type;let bt;if(At==="Point"||At==="MultiPoint"||At==="LineString")bt=Tn(yt.geometry,Ne);else if(At==="MultiLineString"||At==="Polygon"){bt=[];for(const Gt of yt.geometry)bt.push(Tn(Gt,Ne))}else if(At==="MultiPolygon"){bt=[];for(const Gt of yt.geometry){const Et=[];for(const Wt of Gt)Et.push(Tn(Wt,Ne));bt.push(Et)}}Ie.push(hr(yt.id,At,bt,yt.tags))}return Ie}function Tn(Zt,Ne){const Ie=[];Ie.size=Zt.size,Zt.start!==void 0&&(Ie.start=Zt.start,Ie.end=Zt.end);for(let He=0;He<Zt.length;He+=3)Ie.push(Zt[He]+Ne,Zt[He+1],Zt[He+2]);return Ie}function Qr(Zt,Ne){if(Zt.transformed)return Zt;const Ie=1<<Zt.z,He=Zt.x,yt=Zt.y;for(const At of Zt.features){const bt=At.geometry,Gt=At.type;if(At.geometry=[],Gt===1)for(let Et=0;Et<bt.length;Et+=2)At.geometry.push(cn(bt[Et],bt[Et+1],Ne,Ie,He,yt));else for(let Et=0;Et<bt.length;Et++){const Wt=[];for(let Yt=0;Yt<bt[Et].length;Yt+=2)Wt.push(cn(bt[Et][Yt],bt[Et][Yt+1],Ne,Ie,He,yt));At.geometry.push(Wt)}}return Zt.transformed=!0,Zt}function cn(Zt,Ne,Ie,He,yt,At){return[Math.round(Ie*(Zt*He-yt)),Math.round(Ie*(Ne*He-At))]}function $r(Zt,Ne,Ie,He,yt){const At=Ne===yt.maxZoom?0:yt.tolerance/((1<<Ne)*yt.extent),bt={features:[],numPoints:0,numSimplified:0,numFeatures:Zt.length,source:null,x:Ie,y:He,z:Ne,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Gt of Zt)br(bt,Gt,At,yt);return bt}function br(Zt,Ne,Ie,He){const yt=Ne.geometry,At=Ne.type,bt=[];if(Zt.minX=Math.min(Zt.minX,Ne.minX),Zt.minY=Math.min(Zt.minY,Ne.minY),Zt.maxX=Math.max(Zt.maxX,Ne.maxX),Zt.maxY=Math.max(Zt.maxY,Ne.maxY),At==="Point"||At==="MultiPoint")for(let Gt=0;Gt<yt.length;Gt+=3)bt.push(yt[Gt],yt[Gt+1]),Zt.numPoints++,Zt.numSimplified++;else if(At==="LineString")Fi(bt,yt,Zt,Ie,!1,!1);else if(At==="MultiLineString"||At==="Polygon")for(let Gt=0;Gt<yt.length;Gt++)Fi(bt,yt[Gt],Zt,Ie,At==="Polygon",Gt===0);else if(At==="MultiPolygon")for(let Gt=0;Gt<yt.length;Gt++){const Et=yt[Gt];for(let Wt=0;Wt<Et.length;Wt++)Fi(bt,Et[Wt],Zt,Ie,!0,Wt===0)}if(bt.length){let Gt=Ne.tags||null;if(At==="LineString"&&He.lineMetrics){Gt={};for(const Wt in Ne.tags)Gt[Wt]=Ne.tags[Wt];Gt.mapbox_clip_start=yt.start/yt.size,Gt.mapbox_clip_end=yt.end/yt.size}const Et={geometry:bt,type:At==="Polygon"||At==="MultiPolygon"?3:At==="LineString"||At==="MultiLineString"?2:1,tags:Gt};Ne.id!==null&&(Et.id=Ne.id),Zt.features.push(Et)}}function Fi(Zt,Ne,Ie,He,yt,At){const bt=He*He;if(He>0&&Ne.size<(yt?bt:He))return void(Ie.numPoints+=Ne.length/3);const Gt=[];for(let Et=0;Et<Ne.length;Et+=3)(He===0||Ne[Et+2]>bt)&&(Ie.numSimplified++,Gt.push(Ne[Et],Ne[Et+1])),Ie.numPoints++;yt&&function(Et,Wt){let Yt=0;for(let Kt=0,Ca=Et.length,Ia=Ca-2;Kt<Ca;Ia=Kt,Kt+=2)Yt+=(Et[Kt]-Et[Ia])*(Et[Kt+1]+Et[Ia+1]);if(Yt>0===Wt)for(let Kt=0,Ca=Et.length;Kt<Ca/2;Kt+=2){const Ia=Et[Kt],Ga=Et[Kt+1];Et[Kt]=Et[Ca-2-Kt],Et[Kt+1]=Et[Ca-1-Kt],Et[Ca-2-Kt]=Ia,Et[Ca-1-Kt]=Ga}}(Gt,At),Zt.push(Gt)}const yi={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class oi{constructor(Ne,Ie){const He=(Ie=this.options=function(At,bt){for(const Gt in bt)At[Gt]=bt[Gt];return At}(Object.create(yi),Ie)).debug;if(He&&console.time("preprocess data"),Ie.maxZoom<0||Ie.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ie.promoteId&&Ie.generateId)throw new Error("promoteId and generateId cannot be used together.");let yt=function(At,bt){const Gt=[];if(At.type==="FeatureCollection")for(let Et=0;Et<At.features.length;Et++)Pa(Gt,At.features[Et],bt,Et);else Pa(Gt,At.type==="Feature"?At:{geometry:At},bt);return Gt}(Ne,Ie);this.tiles={},this.tileCoords=[],He&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ie.indexMaxZoom,Ie.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),yt=function(At,bt){const Gt=bt.buffer/bt.extent;let Et=At;const Wt=kr(At,1,-1-Gt,Gt,0,-1,2,bt),Yt=kr(At,1,1-Gt,2+Gt,0,-1,2,bt);return(Wt||Yt)&&(Et=kr(At,1,-Gt,1+Gt,0,-1,2,bt)||[],Wt&&(Et=yr(Wt,1).concat(Et)),Yt&&(Et=Et.concat(yr(Yt,-1)))),Et}(yt,Ie),yt.length&&this.splitTile(yt,0,0,0),He&&(yt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(Ne,Ie,He,yt,At,bt,Gt){const Et=[Ne,Ie,He,yt],Wt=this.options,Yt=Wt.debug;for(;Et.length;){yt=Et.pop(),He=Et.pop(),Ie=Et.pop(),Ne=Et.pop();const Kt=1<<Ie,Ca=Cs(Ie,He,yt);let Ia=this.tiles[Ca];if(!Ia&&(Yt>1&&console.time("creation"),Ia=this.tiles[Ca]=$r(Ne,Ie,He,yt,Wt),this.tileCoords.push({z:Ie,x:He,y:yt}),Yt)){Yt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ie,He,yt,Ia.numFeatures,Ia.numPoints,Ia.numSimplified),console.timeEnd("creation"));const jn=`z${Ie}`;this.stats[jn]=(this.stats[jn]||0)+1,this.total++}if(Ia.source=Ne,At==null){if(Ie===Wt.indexMaxZoom||Ia.numPoints<=Wt.indexMaxPoints)continue}else{if(Ie===Wt.maxZoom||Ie===At)continue;if(At!=null){const jn=At-Ie;if(He!==bt>>jn||yt!==Gt>>jn)continue}}if(Ia.source=null,Ne.length===0)continue;Yt>1&&console.time("clipping");const Ga=.5*Wt.buffer/Wt.extent,Cr=.5-Ga,Dr=.5+Ga,Mr=1+Ga;let Hr=null,Un=null,ri=null,Yr=null,Cn=kr(Ne,Kt,He-Ga,He+Dr,0,Ia.minX,Ia.maxX,Wt),Xr=kr(Ne,Kt,He+Cr,He+Mr,0,Ia.minX,Ia.maxX,Wt);Ne=null,Cn&&(Hr=kr(Cn,Kt,yt-Ga,yt+Dr,1,Ia.minY,Ia.maxY,Wt),Un=kr(Cn,Kt,yt+Cr,yt+Mr,1,Ia.minY,Ia.maxY,Wt),Cn=null),Xr&&(ri=kr(Xr,Kt,yt-Ga,yt+Dr,1,Ia.minY,Ia.maxY,Wt),Yr=kr(Xr,Kt,yt+Cr,yt+Mr,1,Ia.minY,Ia.maxY,Wt),Xr=null),Yt>1&&console.timeEnd("clipping"),Et.push(Hr||[],Ie+1,2*He,2*yt),Et.push(Un||[],Ie+1,2*He,2*yt+1),Et.push(ri||[],Ie+1,2*He+1,2*yt),Et.push(Yr||[],Ie+1,2*He+1,2*yt+1)}}getTile(Ne,Ie,He){Ne=+Ne,Ie=+Ie,He=+He;const yt=this.options,{extent:At,debug:bt}=yt;if(Ne<0||Ne>24)return null;const Gt=1<<Ne,Et=Cs(Ne,Ie=Ie+Gt&Gt-1,He);if(this.tiles[Et])return Qr(this.tiles[Et],At);bt>1&&console.log("drilling down to z%d-%d-%d",Ne,Ie,He);let Wt,Yt=Ne,Kt=Ie,Ca=He;for(;!Wt&&Yt>0;)Yt--,Kt>>=1,Ca>>=1,Wt=this.tiles[Cs(Yt,Kt,Ca)];return Wt&&Wt.source?(bt>1&&(console.log("found parent tile z%d-%d-%d",Yt,Kt,Ca),console.time("drilling down")),this.splitTile(Wt.source,Yt,Kt,Ca,Ne,Ie,He),bt>1&&console.timeEnd("drilling down"),this.tiles[Et]?Qr(this.tiles[Et],At):null):null}}function Cs(Zt,Ne,Ie){return 32*((1<<Zt)*Ie+Ne)+Zt}function ga(Zt,Ne){const Ie=Zt.tileID.canonical;if(!this._geoJSONIndex)return void Ne(null,null);const He=this._geoJSONIndex.getTile(Ie.z,Ie.x,Ie.y);if(!He)return void Ne(null,null);const yt=new me(He.features);let At=be(yt);At.byteOffset===0&&At.byteLength===At.buffer.byteLength||(At=new Uint8Array(At)),Ne(null,{vectorTile:yt,rawData:At.buffer})}class pr extends H{constructor(Ne,Ie,He,yt,At,bt){super(Ne,Ie,He,yt,ga,bt),At&&(this.loadGeoJSON=At),this._dynamicIndex=new we}loadData(Ne,Ie){const He=Ne&&Ne.request,yt=He&&He.collectResourceTiming;this.loadGeoJSON(Ne,(At,bt)=>{if(At||!bt)return Ie(At);if(typeof bt!="object")return Ie(new Error(`Input data given to '${Ne.source}' is not a valid GeoJSON object.`));{try{if(Ne.filter){const Et=n.X(Ne.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Et.result==="error")throw new Error(Et.value.map(Wt=>`${Wt.key}: ${Wt.message}`).join(", "));bt.features=bt.features.filter(Wt=>Et.value.evaluate({zoom:0},Wt))}Ne.dynamic?(bt.type==="Feature"&&(bt={type:"FeatureCollection",features:[bt]}),Ne.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load(bt.features,this.loaded),Ne.cluster&&(bt.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=Ne.cluster?new ot(function({superclusterOptions:Et,clusterProperties:Wt}){if(!Wt||!Et)return Et;const Yt={},Kt={},Ca={accumulated:null,zoom:0},Ia={properties:null},Ga=Object.keys(Wt);for(const Cr of Ga){const[Dr,Mr]=Wt[Cr],Hr=n.X(Mr),Un=n.X(typeof Dr=="string"?[Dr,["accumulated"],["get",Cr]]:Dr);Yt[Cr]=Hr.value,Kt[Cr]=Un.value}return Et.map=Cr=>{Ia.properties=Cr;const Dr={};for(const Mr of Ga)Dr[Mr]=Yt[Mr].evaluate(Ca,Ia);return Dr},Et.reduce=(Cr,Dr)=>{Ia.properties=Dr;for(const Mr of Ga)Ca.accumulated=Cr[Mr],Cr[Mr]=Kt[Mr].evaluate(Ca,Ia)},Et}(Ne)).load(bt.features):Ne.dynamic?this._dynamicIndex:function(Et,Wt){return new oi(Et,Wt)}(bt,Ne.geojsonVtOptions)}catch(Et){return Ie(Et)}const Gt={};if(yt){const Et=v(He);Et&&(Gt.resourceTiming={},Gt.resourceTiming[Ne.source]=JSON.parse(JSON.stringify(Et)))}Ie(null,Gt)}})}reloadTile(Ne,Ie){const He=this.loaded;return He&&He[Ne.uid]?Ne.partial?Ie(null,void 0):super.reloadTile(Ne,Ie):this.loadTile(Ne,Ie)}loadGeoJSON(Ne,Ie){if(Ne.request)n.n(Ne.request,Ie);else{if(typeof Ne.data!="string")return Ie(new Error(`Input data given to '${Ne.source}' is not a valid GeoJSON object.`));try{return Ie(null,JSON.parse(Ne.data))}catch{return Ie(new Error(`Input data given to '${Ne.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(Ne,Ie){try{Ie(null,this._geoJSONIndex.getClusterExpansionZoom(Ne.clusterId))}catch(He){Ie(He)}}getClusterChildren(Ne,Ie){try{Ie(null,this._geoJSONIndex.getChildren(Ne.clusterId))}catch(He){Ie(He)}}getClusterLeaves(Ne,Ie){try{Ie(null,this._geoJSONIndex.getLeaves(Ne.clusterId,Ne.limit,Ne.offset))}catch(He){Ie(He)}}}class Kr{constructor(Ne,Ie){this.tileID=new n.aH(Ne.tileID.overscaledZ,Ne.tileID.wrap,Ne.tileID.canonical.z,Ne.tileID.canonical.x,Ne.tileID.canonical.y),this.tileZoom=Ne.tileZoom,this.uid=Ne.uid,this.zoom=Ne.zoom,this.canonical=Ne.tileID.canonical,this.pixelRatio=Ne.pixelRatio,this.tileSize=Ne.tileSize,this.source=Ne.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=Ne.projection,this.brightness=Ie}parse(Ne,Ie,He,yt){this.status="parsing";const At=new n.aH(He.tileID.overscaledZ,He.tileID.wrap,He.tileID.canonical.z,He.tileID.canonical.x,He.tileID.canonical.y),bt=[],Gt=Ie.familiesBySource[He.source],Et=new n.e0(At,He.promoteId);return Et.bucketLayerIDs=[],Et.is3DTile=!0,n.ei(Ne).then(Wt=>{if(!Wt)return yt(new Error("Could not parse tile"));const Yt=n.ej(Wt,1/n.cd(He.tileID.canonical)),Kt=Wt.json.extensionsUsed&&Wt.json.extensionsUsed.includes("MAPBOX_mesh_features")||Wt.json.asset.extras&&Wt.json.asset.extras.MAPBOX_mesh_features,Ca=Wt.json.extensionsUsed&&Wt.json.extensionsUsed.includes("EXT_meshopt_compression"),Ia=new n.aa(this.zoom,{brightness:this.brightness});for(const Ga in Gt)for(const Cr of Gt[Ga]){const Dr=Cr[0];Et.bucketLayerIDs.push(Cr.map(Hr=>n.C(Hr.id,Hr.scope))),Dr.recalculate(Ia,[]);const Mr=new n.ek(Cr,Yt,At,Kt,Ca,this.brightness,Et);Kt||(Mr.needsUpload=!0),bt.push(Mr),Mr.evaluate(Dr)}this.status="done",yt(null,{buckets:bt,featureIndex:Et,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:null})}).catch(Wt=>yt(new Error(Wt.message)))}}class ti{constructor(Ne,Ie,He,yt,At,bt){this.actor=Ne,this.layerIndex=Ie,this.availableImages=He,this.brightness=bt,this.loading={},this.loaded={}}loadTile(Ne,Ie){const He=Ne.uid,yt=this.loading[He]=new Kr(Ne,this.brightness);n.bj(Ne.request,(At,bt)=>{const Gt=!this.loading[He];return delete this.loading[He],Gt||At?(yt.status="done",Gt||(this.loaded[He]=yt),Ie(At)):bt&&bt.byteLength!==0?void yt.parse(bt,this.layerIndex,Ne,(Et,Wt)=>{yt.status="done",this.loaded=this.loaded||{},this.loaded[He]=yt,Et||!Wt?Ie(Et):Ie(null,Wt)}):(yt.status="done",this.loaded[He]=yt,Ie())})}reloadTile(Ne,Ie){const He=this.loaded,yt=Ne.uid;if(He&&He[yt]){const At=He[yt];At.projection=Ne.projection,At.brightness=Ne.brightness;const bt=(Gt,Et)=>{At.reloadCallback&&(delete At.reloadCallback,this.loadTile(Ne,Ie)),Ie(Gt,Et)};At.status==="parsing"?At.reloadCallback=bt:At.status==="done"&&this.loadTile(Ne,Ie)}}abortTile(Ne,Ie){const He=Ne.uid;this.loading[He]&&delete this.loading[He],Ie()}removeTile(Ne,Ie){const He=this.loaded,yt=Ne.uid;He&&He[yt]&&delete He[yt],Ie()}}class Rn{constructor(Ne){this.self=Ne,this.actor=new n.el(Ne,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.imageRasterizer=new n.y,this.projections={},this.defaultProjection=n.bP({name:"mercator"}),this.workerSourceTypes={vector:H,geojson:pr,"raster-dem":W,"raster-array":se,"batched-model":ti},this.workerSources={},this.self.registerWorkerSource=(Ie,He)=>{if(this.workerSourceTypes[Ie])throw new Error(`Worker source with name "${Ie}" already registered.`);this.workerSourceTypes[Ie]=He},this.self.registerRTLTextPlugin=Ie=>{if(n.em.isParsed())throw new Error("RTL text plugin already registered.");n.em.applyArabicShaping=Ie.applyArabicShaping,n.em.processBidirectionalText=Ie.processBidirectionalText,n.em.processStyledBidirectionalText=Ie.processStyledBidirectionalText}}clearCaches(Ne,Ie,He){delete this.layerIndexes[Ne],delete this.availableImages[Ne],delete this.workerSources[Ne],He()}checkIfReady(Ne,Ie,He){He()}setReferrer(Ne,Ie){this.referrer=Ie}spriteLoaded(Ne,{scope:Ie,isLoaded:He}){if(this.isSpriteLoaded[Ne]||(this.isSpriteLoaded[Ne]={}),this.isSpriteLoaded[Ne][Ie]=He,this.workerSources[Ne]&&this.workerSources[Ne][Ie])for(const yt in this.workerSources[Ne][Ie]){const At=this.workerSources[Ne][Ie][yt];for(const bt in At){const Gt=At[bt];Gt instanceof H&&(Gt.isSpriteLoaded=He,Gt.fire(new n.A("isSpriteLoaded")))}}}setImages(Ne,{scope:Ie,images:He},yt){if(this.availableImages[Ne]||(this.availableImages[Ne]={}),this.availableImages[Ne][Ie]=He,this.workerSources[Ne]&&this.workerSources[Ne][Ie]){for(const At in this.workerSources[Ne][Ie]){const bt=this.workerSources[Ne][Ie][At];for(const Gt in bt)bt[Gt].availableImages=He}yt()}else yt()}setProjection(Ne,Ie){this.projections[Ne]=n.bP(Ie)}setBrightness(Ne,Ie,He){this.brightness=Ie,He()}setLayers(Ne,Ie,He){this.getLayerIndex(Ne,Ie.scope).replace(Ie.layers,Ie.options),He()}updateLayers(Ne,Ie,He){this.getLayerIndex(Ne,Ie.scope).update(Ie.layers,Ie.removedIds,Ie.options),He()}loadTile(Ne,Ie,He){Ie.projection=this.projections[Ne]||this.defaultProjection,this.getWorkerSource(Ne,Ie.type,Ie.source,Ie.scope).loadTile(Ie,He)}decodeRasterArray(Ne,Ie,He){this.getWorkerSource(Ne,Ie.type,Ie.source,Ie.scope).decodeRasterArray(Ie,He)}reloadTile(Ne,Ie,He){Ie.projection=this.projections[Ne]||this.defaultProjection,this.getWorkerSource(Ne,Ie.type,Ie.source,Ie.scope).reloadTile(Ie,He)}abortTile(Ne,Ie,He){this.getWorkerSource(Ne,Ie.type,Ie.source,Ie.scope).abortTile(Ie,He)}removeTile(Ne,Ie,He){this.getWorkerSource(Ne,Ie.type,Ie.source,Ie.scope).removeTile(Ie,He)}removeSource(Ne,Ie,He){if(!(this.workerSources[Ne]&&this.workerSources[Ne][Ie.scope]&&this.workerSources[Ne][Ie.scope][Ie.type]&&this.workerSources[Ne][Ie.scope][Ie.type][Ie.source]))return;const yt=this.workerSources[Ne][Ie.scope][Ie.type][Ie.source];delete this.workerSources[Ne][Ie.scope][Ie.type][Ie.source],yt.removeSource!==void 0?yt.removeSource(Ie,He):He()}loadWorkerSource(Ne,Ie,He){try{this.self.importScripts(Ie.url),He()}catch(yt){He(yt.toString())}}syncRTLPluginState(Ne,Ie,He){try{n.em.setState(Ie);const yt=n.em.getPluginURL();if(n.em.isLoaded()&&!n.em.isParsed()&&yt!=null){this.self.importScripts(yt);const At=n.em.isParsed();He(At?void 0:new Error(`RTL Text Plugin failed to import scripts from ${yt}`),At)}}catch(yt){He(yt.toString())}}setDracoUrl(Ne,Ie){this.dracoUrl=Ie}getAvailableImages(Ne,Ie){this.availableImages[Ne]||(this.availableImages[Ne]={});let He=this.availableImages[Ne][Ie];return He||(He=[]),He}getLayerIndex(Ne,Ie){this.layerIndexes[Ne]||(this.layerIndexes[Ne]={});let He=this.layerIndexes[Ne][Ie];return He||(He=this.layerIndexes[Ne][Ie]=new N,He.scope=Ie),He}getWorkerSource(Ne,Ie,He,yt){const At=this.workerSources;return At[Ne]||(At[Ne]={}),At[Ne][yt]||(At[Ne][yt]={}),At[Ne][yt][Ie]||(At[Ne][yt][Ie]={}),this.isSpriteLoaded[Ne]||(this.isSpriteLoaded[Ne]={}),At[Ne][yt][Ie][He]||(At[Ne][yt][Ie][He]=new this.workerSourceTypes[Ie]({send:(bt,Gt,Et,Wt,Yt,Kt)=>{this.actor.send(bt,Gt,Et,Ne,Yt,Kt)},scheduler:this.actor.scheduler},this.getLayerIndex(Ne,yt),this.getAvailableImages(Ne,yt),this.isSpriteLoaded[Ne][yt],void 0,this.brightness)),At[Ne][yt][Ie][He]}rasterizeImages(Ne,Ie,He){const yt=new Map;for(const[At,{image:bt,imageVariant:Gt}]of Ie.tasks.entries()){const Et=this.imageRasterizer.rasterize(Gt,bt,Ie.scope,Ne);yt.set(At,Et)}He(void 0,yt)}removeRasterizedImages(Ne,Ie,He){this.imageRasterizer.removeImagesFromCacheByIds(Ie.imageIds,Ie.scope,Ne),He()}enforceCacheSizeLimit(Ne,Ie){n.en(Ie)}getWorkerPerformanceMetrics(Ne,Ie,He){He(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Rn(self)),Rn}),l(["./shared"],function(n){var v="3.11.0";const R={create:"create",load:"load",fullLoad:"fullLoad"},x={mark(y){performance.mark(y)},measure(y,o,d){performance.measure(y,o,d)}};function N(y){const o=y.name.split("?")[0];return n.a(o)&&o.includes("mapbox-gl.js")?"javascript":n.a(o)&&o.includes("mapbox-gl.css")?"css":n.b(o)?"fontRange":n.c(o)?"sprite":n.i(o)?"style":n.d(o)?"tilejson":"other"}var L,F={},j=function(){if(L)return F;function y(A){return!o(A)}function o(A){return typeof window>"u"||typeof document>"u"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var S,E,k=new Blob([""],{type:"text/javascript"}),Z=URL.createObjectURL(k);try{E=new Worker(Z),S=!0}catch{S=!1}return E&&E.terminate(),URL.revokeObjectURL(Z),S}()?function(){var S=document.createElement("canvas");S.width=S.height=1;var E=S.getContext("2d");if(!E)return!1;var k=E.getImageData(0,0,1,1);return k&&k.width===S.width}()?(d[T=A&&A.failIfMajorPerformanceCaveat]===void 0&&(d[T]=function(S){var E,k=function(Z){var K=document.createElement("canvas"),Y=Object.create(y.webGLContextAttributes);return Y.failIfMajorPerformanceCaveat=Z,K.getContext("webgl2",Y)}(S);if(!k)return!1;try{E=k.createShader(k.VERTEX_SHADER)}catch{return!1}return!(!E||k.isContextLost())&&(k.shaderSource(E,"void main() {}"),k.compileShader(E),k.getShaderParameter(E,k.COMPILE_STATUS)===!0)}(T)),d[T]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var T}L=1,F.supported=y,F.notSupportedReason=o;var d={};return y.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0},F}();function $(y,o,d){const A=document.createElement(y);return o!=null&&(A.className=o),d&&d.appendChild(A),A}function H(y,o,d){const A=document.createElementNS("http://www.w3.org/2000/svg",y);for(const T of Object.keys(o))A.setAttributeNS(null,T,String(o[T]));return d&&d.appendChild(A),A}const W=typeof document<"u"?document.documentElement&&document.documentElement.style:null,ee=W&&W.userSelect!==void 0?"userSelect":"WebkitUserSelect";let se;function fe(){W&&ee&&(se=W[ee],W[ee]="none")}function le(){W&&ee&&(W[ee]=se)}function me(y){y.preventDefault(),y.stopPropagation(),window.removeEventListener("click",me,!0)}function ge(){window.addEventListener("click",me,!0),window.setTimeout(()=>{window.removeEventListener("click",me,!0)},0)}function Re(y,o){const d=y.getBoundingClientRect();return oe(y,d,o)}function we(y,o){const d=y.getBoundingClientRect(),A=[];for(let T=0;T<o.length;T++)A.push(oe(y,d,o[T]));return A}function Ve(y){return/firefox/i.test(navigator.userAgent)&&/macintosh/i.test(navigator.userAgent)&&y.button===2&&y.ctrlKey?0:y.button}function oe(y,o,d){const A=y.offsetWidth===o.width?1:y.offsetWidth/o.width;return new n.P((d.clientX-o.left)*A,(d.clientY-o.top)*A)}const _e="01",Fe="NO_ACCESS_TOKEN";class Ee{constructor(o,d,A){this._transformRequestFn=o,this._customAccessToken=d,this._silenceAuthErrors=!!A,this._createSkuToken()}_createSkuToken(){const o=function(){let d="";for(let A=0;A<10;A++)d+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",_e,d].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=o.token,this._skuTokenExpiresAt=o.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(o,d){return this._transformRequestFn&&this._transformRequestFn(o,d)||{url:o}}normalizeStyleURL(o,d){if(!n.f(o))return o;const A=Se(o);return A.params.push(`sdk=js-${v}`),A.path=`/styles/v1${A.path}`,this._makeAPIURL(A,this._customAccessToken||d)}normalizeGlyphsURL(o,d){if(!n.f(o))return o;const A=Se(o);return A.path=`/fonts/v1${A.path}`,this._makeAPIURL(A,this._customAccessToken||d)}normalizeModelURL(o,d){if(!n.f(o))return o;const A=Se(o);return A.path=`/models/v1${A.path}`,this._makeAPIURL(A,this._customAccessToken||d)}normalizeSourceURL(o,d,A,T){if(!n.f(o))return o;const S=Se(o);return S.path=`/v4/${S.authority}.json`,S.params.push("secure"),A&&S.params.push(`language=${A}`),T&&S.params.push(`worldview=${T}`),this._makeAPIURL(S,this._customAccessToken||d)}normalizeIconsetURL(o,d){const A=Se(o);return n.f(o)?(A.path=`/styles/v1${A.path}/iconset.pbf`,this._makeAPIURL(A,this._customAccessToken||d)):je(A)}normalizeSpriteURL(o,d,A,T){const S=Se(o);return n.f(o)?(S.path=`/styles/v1${S.path}/sprite${d}${A}`,this._makeAPIURL(S,this._customAccessToken||T)):(S.path+=`${d}${A}`,je(S))}normalizeTileURL(o,d,A){if(this._isSkuTokenExpired()&&this._createSkuToken(),o&&!n.f(o))return o;const T=Se(o);T.path=T.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${d||A&&T.authority!=="raster"&&A===512?"@2x":""}${n.m.supported?".webp":"$1"}`),T.authority==="raster"?T.path=`/${n.e.RASTER_URL_PREFIX}${T.path}`:T.authority==="rasterarrays"?T.path=`/${n.e.RASTERARRAYS_URL_PREFIX}${T.path}`:T.authority==="3dtiles"?T.path=`/${n.e.TILES3D_URL_PREFIX}${T.path}`:(T.path=T.path.replace(/^.+\/v4\//,"/"),T.path=`/${n.e.TILE_URL_VERSION}${T.path}`);const S=this._customAccessToken||function(E){for(const k of E){const Z=k.match(/^access_token=(.*)$/);if(Z)return Z[1]}return null}(T.params)||n.e.ACCESS_TOKEN;return n.e.REQUIRE_ACCESS_TOKEN&&S&&this._skuToken&&T.params.push(`sku=${this._skuToken}`),this._makeAPIURL(T,S)}canonicalizeTileURL(o,d){const A=Se(o);if(!A.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!A.path.match(/\.[\w]+$/))return o;let T="mapbox://";A.path.match(/^\/raster\/v1\//)?T+=`raster/${A.path.replace(`/${n.e.RASTER_URL_PREFIX}/`,"")}`:A.path.match(/^\/rasterarrays\/v1\//)?T+=`rasterarrays/${A.path.replace(`/${n.e.RASTERARRAYS_URL_PREFIX}/`,"")}`:T+=`tiles/${A.path.replace(`/${n.e.TILE_URL_VERSION}/`,"")}`;let S=A.params;return d&&(S=S.filter(E=>!E.match(/^access_token=/))),S.length&&(T+=`?${S.join("&")}`),T}canonicalizeTileset(o,d){const A=!!d&&n.f(d),T=[];for(const S of o.tiles||[])n.h(S)?T.push(this.canonicalizeTileURL(S,A)):T.push(S);return T}_makeAPIURL(o,d){const A="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",T=Se(n.e.API_URL);if(o.protocol=T.protocol,o.authority=T.authority,o.protocol==="http"){const S=o.params.indexOf("secure");S>=0&&o.params.splice(S,1)}if(T.path!=="/"&&(o.path=`${T.path}${o.path}`),!n.e.REQUIRE_ACCESS_TOKEN)return je(o);if(d=d||n.e.ACCESS_TOKEN,!this._silenceAuthErrors){if(!d)throw new Error(`An API access token is required to use Mapbox GL. ${A}`);if(d[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${A}`)}return o.params=o.params.filter(S=>S.indexOf("access_token")===-1),o.params.push(`access_token=${d||""}`),je(o)}}const ze=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Se(y){const o=y.match(ze);if(!o)throw new Error("Unable to parse URL object");return{protocol:o[1],authority:o[2],path:o[3]||"/",params:o[4]?o[4].split("&"):[]}}function je(y){const o=y.params.length?`?${y.params.join("&")}`:"";return`${y.protocol}://${y.authority}${y.path}${o}`}const Ue="mapbox.eventData";function $e(y){if(!y)return null;const o=y.split(".");if(!o||o.length!==3)return null;try{return JSON.parse(n.j(o[1]))}catch{return null}}class Be{constructor(o){this.type=o,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(o){const d=$e(n.e.ACCESS_TOKEN);let A="";return A=d&&d.u?n.k(d.u):n.e.ACCESS_TOKEN||"",o?`${Ue}.${o}:${A}`:`${Ue}:${A}`}fetchEventData(){const o=n.s("localStorage"),d=this.getStorageKey(),A=this.getStorageKey("uuid");if(o)try{const T=localStorage.getItem(d);T&&(this.eventData=JSON.parse(T));const S=localStorage.getItem(A);S&&(this.anonId=S)}catch{n.w("Unable to read from LocalStorage")}}saveEventData(){const o=n.s("localStorage"),d=this.getStorageKey(),A=this.getStorageKey("uuid"),T=this.anonId;if(o&&T)try{localStorage.setItem(A,T),Object.keys(this.eventData).length>=1&&localStorage.setItem(d,JSON.stringify(this.eventData))}catch{n.w("Unable to write to LocalStorage")}}processRequests(o){}postEvent(o,d,A,T){if(!n.e.EVENTS_URL)return;const S=Se(n.e.EVENTS_URL);S.params.push(`access_token=${T||n.e.ACCESS_TOKEN||""}`);const E={event:this.type,created:new Date(o).toISOString()},k=d?n.l(E,d):E,Z={url:je(S),headers:{"Content-Type":"text/plain"},body:JSON.stringify([k])};this.pendingRequest=n.p(Z,K=>{this.pendingRequest=null,A(K),this.saveEventData(),this.processRequests(T)})}queueRequest(o,d){this.queue.push(o),this.processRequests(d)}}const qe=new class extends Be{constructor(y){super("appUserTurnstile"),this._customAccessToken=y}postTurnstileEvent(y,o){n.e.EVENTS_URL&&n.e.ACCESS_TOKEN&&Array.isArray(y)&&y.some(d=>n.f(d)||n.h(d))&&this.queueRequest(Date.now(),o)}processRequests(y){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const o=$e(n.e.ACCESS_TOKEN),d=o?o.u:n.e.ACCESS_TOKEN;let A=d!==this.eventData.tokenU;n.v(this.anonId)||(this.anonId=n.u(),A=!0);const T=this.queue.shift();if(this.eventData.lastSuccess){const S=new Date(this.eventData.lastSuccess),E=new Date(T),k=(T-this.eventData.lastSuccess)/864e5;A=A||k>=1||k<-1||S.getDate()!==E.getDate()}else A=!0;A?this.postEvent(T,{sdkIdentifier:"mapbox-gl-js",sdkVersion:v,skuId:_e,"enabled.telemetry":!1,userId:this.anonId},S=>{S||(this.eventData.lastSuccess=T,this.eventData.tokenU=d)},y):this.processRequests()}},be=qe.postTurnstileEvent.bind(qe),Te=new class extends Be{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(y,o,d,A){this.skuToken=o,this.errorCb=A,n.e.EVENTS_URL&&(d||n.e.ACCESS_TOKEN?this.queueRequest({id:y,timestamp:Date.now()},d):this.errorCb(new Error(Fe)))}processRequests(y){if(this.pendingRequest||this.queue.length===0)return;const{id:o,timestamp:d}=this.queue.shift();o&&this.success[o]||(this.anonId||this.fetchEventData(),n.v(this.anonId)||(this.anonId=n.u()),this.postEvent(d,{sdkIdentifier:"mapbox-gl-js",sdkVersion:v,skuId:_e,skuToken:this.skuToken,userId:this.anonId},A=>{A?this.errorCb(A):o&&(this.success[o]=!0)},y))}remove(){this.errorCb=null}},ke=Te.postMapLoadEvent.bind(Te),Ge=new class extends Be{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(y){let o=this.mapInstanceIdMap.get(y);return o||(o=n.u(),this.mapInstanceIdMap.set(y,o)),o}getEventId(y){const o=this.eventIdPerMapInstanceMap.get(y)||0;return this.eventIdPerMapInstanceMap.set(y,o+1),o}postStyleLoadEvent(y,o){const{map:d,style:A,importedStyles:T}=o;if(!n.e.EVENTS_URL||!y&&!n.e.ACCESS_TOKEN)return;const S=this.getMapInstanceId(d),E={mapInstanceId:S,eventId:this.getEventId(S),style:A};T.length&&(E.importedStyles=T),this.queueRequest({timestamp:Date.now(),payload:E},y)}processRequests(y){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:o,payload:d}=this.queue.shift();this.postEvent(o,d,()=>{},y)}},at=Ge.postStyleLoadEvent.bind(Ge),rt=new class extends Be{constructor(){super("gljs.performance")}postPerformanceEvent(y,o){n.e.EVENTS_URL&&(y||n.e.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:o},y)}processRequests(y){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:o,performanceData:d}=this.queue.shift(),A=function(T){const S=performance.getEntriesByType("resource"),E=performance.getEntriesByType("mark"),k=function(pe){const Pe={};if(pe){for(const Ce in pe)if(Ce!=="other")for(const De of pe[Ce]){const Le=`${Ce}ResolveRangeMin`,Ke=`${Ce}ResolveRangeMax`,it=`${Ce}RequestCount`,tt=`${Ce}RequestCachedCount`;Pe[Le]=Math.min(Pe[Le]||1/0,De.startTime),Pe[Ke]=Math.max(Pe[Ke]||-1/0,De.responseEnd);const pt=ut=>{Pe[ut]===void 0&&(Pe[ut]=0),++Pe[ut]};De.transferSize!==void 0&&De.transferSize===0&&pt(tt),pt(it)}}return Pe}(function(pe,Pe){const Ce={};if(pe)for(const De of pe){const Le=Pe(De);Ce[Le]===void 0&&(Ce[Le]=[]),Ce[Le].push(De)}return Ce}(S,N)),Z=window.devicePixelRatio,K=navigator.connection||navigator.mozConnection||navigator.webkitConnection,Y=K?K.effectiveType:void 0,ae={counters:[],metadata:[],attributes:[]},re=(pe,Pe,Ce)=>{Ce!=null&&pe.push({name:Pe,value:Ce.toString()})};for(const pe in k)re(ae.counters,pe,k[pe]);if(T.interactionRange[0]!==1/0&&T.interactionRange[1]!==-1/0&&(re(ae.counters,"interactionRangeMin",T.interactionRange[0]),re(ae.counters,"interactionRangeMax",T.interactionRange[1])),E)for(const pe of Object.keys(R)){const Pe=R[pe],Ce=E.find(De=>De.name===Pe);Ce&&re(ae.counters,Pe,Ce.startTime)}return re(ae.counters,"visibilityHidden",T.visibilityHidden),re(ae.attributes,"style",function(pe){if(pe)for(const Pe of pe){const Ce=Pe.name.split("?")[0];if(n.i(Ce)){const De=Ce.split("/").slice(-2);if(De.length===2)return`mapbox://styles/${De[0]}/${De[1]}`}}}(S)),re(ae.attributes,"terrainEnabled",T.terrainEnabled?"true":"false"),re(ae.attributes,"fogEnabled",T.fogEnabled?"true":"false"),re(ae.attributes,"projection",T.projection),re(ae.attributes,"zoom",T.zoom),re(ae.metadata,"devicePixelRatio",Z),re(ae.metadata,"connectionEffectiveType",Y),re(ae.metadata,"navigatorUserAgent",navigator.userAgent),re(ae.metadata,"screenWidth",window.screen.width),re(ae.metadata,"screenHeight",window.screen.height),re(ae.metadata,"windowWidth",window.innerWidth),re(ae.metadata,"windowHeight",window.innerHeight),re(ae.metadata,"mapWidth",T.width/Z),re(ae.metadata,"mapHeight",T.height/Z),re(ae.metadata,"webglRenderer",T.renderer),re(ae.metadata,"webglVendor",T.vendor),re(ae.metadata,"sdkVersion",v),re(ae.metadata,"sdkIdentifier","mapbox-gl-js"),ae}(d);for(const T of A.metadata);for(const T of A.counters);for(const T of A.attributes);this.postEvent(o,A,()=>{},y)}},lt=rt.postPerformanceEvent.bind(rt),ot=new class extends Be{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(y,o,d,A){if(!n.e.API_URL||!n.e.SESSION_PATH)return;const T=Se(n.e.API_URL+n.e.SESSION_PATH);T.params.push(`sku=${o||""}`),T.params.push(`access_token=${A||n.e.ACCESS_TOKEN||""}`);const S={url:je(T),headers:{"Content-Type":"text/plain"}};this.pendingRequest=n.g(S,E=>{this.pendingRequest=null,d(E),this.saveEventData(),this.processRequests(A)})}getSessionAPI(y,o,d,A){this.skuToken=o,this.errorCb=A,n.e.SESSION_PATH&&n.e.API_URL&&(d||n.e.ACCESS_TOKEN?this.queueRequest({id:y,timestamp:Date.now()},d):this.errorCb(new Error(Fe)))}processRequests(y){if(this.pendingRequest||this.queue.length===0)return;const{id:o,timestamp:d}=this.queue.shift();o&&this.success[o]||this.getSession(d,this.skuToken,A=>{A?this.errorCb(A):o&&(this.success[o]=!0)},y)}remove(){this.errorCb=null}},ve=ot.getSessionAPI.bind(ot),Vt=new Set;function Bt(y,o){o?Vt.add(y):Vt.delete(y)}class wa{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages=new Set}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(o,d){this._updatedSourceCaches[o]=d,this.setDirty()}discardSourceCacheUpdate(o){delete this._updatedSourceCaches[o]}updateLayer(o){const d=o.scope;this._updatedLayers[d]=this._updatedLayers[d]||new Set,this._updatedLayers[d].add(o.id),this.setDirty()}removeLayer(o){const d=o.scope;this._removedLayers[d]=this._removedLayers[d]||{},this._updatedLayers[d]=this._updatedLayers[d]||new Set,this._removedLayers[d][o.id]=o,this._updatedLayers[d].delete(o.id),this._updatedPaintProps.delete(o.fqid),this.setDirty()}getRemovedLayer(o){return this._removedLayers[o.scope]?this._removedLayers[o.scope][o.id]:null}discardLayerRemoval(o){this._removedLayers[o.scope]&&delete this._removedLayers[o.scope][o.id]}getLayerUpdatesByScope(){const o={};for(const d in this._updatedLayers)o[d]=o[d]||{},o[d].updatedIds=Array.from(this._updatedLayers[d].values());for(const d in this._removedLayers)o[d]=o[d]||{},o[d].removedIds=Object.keys(this._removedLayers[d]);return o}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(o){this._updatedPaintProps.add(o.fqid),this.setDirty()}getUpdatedImages(){return Array.from(this._updatedImages.values())}updateImage(o){this._updatedImages.add(n.I.toString(o)),this.setDirty()}resetUpdatedImages(){this._updatedImages.clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages.clear()}}function It(y){const{userImage:o}=y;return!!(o&&o.render&&o.render())&&(y.data.replace(new Uint8Array(o.data.buffer)),!0)}class $t extends n.E{constructor(o){super(),this._images={},this._iconsets={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded={},this.requestors=[],this.patterns={},this.patternsInFlight=new Set,this.atlasImage={},this.atlasTexture={},this.dirty=!0,this.spriteFormat=o,o!=="raster"&&n.t()&&(this.imageRasterizerDispatcher=new n.D(n.x(),this,"Image Rasterizer Worker",1))}get imageRasterizer(){return this._imageRasterizer||(this._imageRasterizer=new n.y),this._imageRasterizer}createScope(o){this._images[o]={},this._iconsets[o]={},this.loaded[o]=!1,this.updatedImages[o]=new Set,this.patterns[o]={},this.callbackDispatchedThisFrame[o]=new Set,this.atlasImage[o]=new n.r({width:1,height:1})}createIconset(o,d){this._iconsets[o][d]={}}isLoaded(){for(const o in this.loaded)if(!this.loaded[o])return!1;return!0}setLoaded(o,d){if(this.loaded[d]!==o&&(this.loaded[d]=o,o)){for(const{ids:A,callback:T}of this.requestors)this._notify(A,d,T);this.requestors=[]}}hasImage(o,d){return!!this.getImage(o,d)}getImage(o,d){return(o.iconsetId?this._iconsets[d][o.iconsetId]:this._images[d])[o.name]}addImage(o,d,A){const T=o.iconsetId?this._iconsets[d][o.iconsetId]:this._images[d];this._validate(o,A)&&(T[o.name]=A)}_validate(o,d){let A=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new n.z(new Error(`Image "${o.name}" has invalid "stretchX" value`))),A=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new n.z(new Error(`Image "${o.name}" has invalid "stretchY" value`))),A=!1),this._validateContent(d.content,d)||(this.fire(new n.z(new Error(`Image "${o.name}" has invalid "content" value`))),A=!1),A}_validateStretch(o,d){if(!o)return!0;let A=0;for(const T of o){if(T[0]<A||T[1]<T[0]||d<T[1])return!1;A=T[1]}return!0}_validateContent(o,d){return o?o.length!==4||!d.usvg&&(o[0]<0||d.data.width<o[0]||o[1]<0||d.data.height<o[1]||o[2]<0||d.data.width<o[2]||o[3]<0||d.data.height<o[3])?!1:!(o[2]<o[0]||o[3]<o[1]):!0}updateImage(o,d,A){const T=o.iconsetId?this._iconsets[d][o.iconsetId]:this._images[d];A.version=T[o.name].version+1,T[o.name]=A,this.updatedImages[d].add(o),this.removeFromImageRasterizerCache(o,d)}clearUpdatedImages(o){this.updatedImages[o].clear()}removeFromImageRasterizerCache(o,d){if(this.spriteFormat!=="raster")if(n.t()){const A={imageIds:[o],scope:d};this.imageRasterizerDispatcher.getActor().send("removeRasterizedImages",A)}else this.imageRasterizer.removeImagesFromCacheByIds([o],d)}removeImage(o,d){const A=o.iconsetId?this._iconsets[d][o.iconsetId]:this._images[d],T=A[o.name];delete A[o.name],delete this.patterns[d][o.name],this.removeFromImageRasterizerCache(o,d),T.userImage&&T.userImage.onRemove&&T.userImage.onRemove()}listImages(o){const d=[];for(const A of Object.keys(this._images[o]))d.push(new n.I(A));for(const A in this._iconsets[o])for(const T of Object.keys(this._iconsets[o][A]))d.push(new n.I({name:T,iconsetId:A}));return d}getImages(o,d,A){let T=!0;const S=!!this.loaded[d];if(!S)for(const E of o)(E.iconsetId?this._iconsets[d][E.iconsetId]:this._images[d])[E.name]||(T=!1);S||T?this._notify(o,d,A):this.requestors.push({ids:o,scope:d,callback:A})}rasterizeImages({scope:o,tasks:d},A){const T=new Map;for(const[S,E]of d.entries()){const k=this.getImage(E.id,o);k&&T.set(S,{image:k,imageVariant:E})}this._rasterizeImages(o,T,A)}_rasterizeImages(o,d,A){if(n.t())this.imageRasterizerDispatcher.getActor().send("rasterizeImages",{tasks:d,scope:o},A);else{const T=new Map;for(const[S,{image:E,imageVariant:k}]of d.entries())T.set(S,this.imageRasterizer.rasterize(k,E,o,0));A(void 0,T)}}getUpdatedImages(o){return this.updatedImages[o]||new Set}_notify(o,d,A){const T=new Map;for(const S of o){S.iconsetId&&(this._iconsets[d][S.iconsetId]=this._iconsets[d][S.iconsetId]||{});const E=(S.iconsetId?this._iconsets[d][S.iconsetId]:this._images[d])[S.name];if(!E){if(S.iconsetId)continue;n.w(`Image "${S.name}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`),this.fire(new n.A("styleimagemissing",{id:S.name}));continue}const k={data:E.usvg?null:E.data.clone(),pixelRatio:E.pixelRatio,sdf:E.sdf,usvg:E.usvg,version:E.version,stretchX:E.stretchX,stretchY:E.stretchY,content:E.content,hasRenderCallback:!!(E.userImage&&E.userImage.render)};E.usvg&&Object.assign(k,{width:E.icon.usvg_tree.width,height:E.icon.usvg_tree.height}),T.set(n.I.toString(S),k)}A(null,T)}getPixelSize(o){const{width:d,height:A}=this.atlasImage[o];return{width:d,height:A}}getPattern(o,d,A){const T=this.patterns[d][o.name],S=this.getImage(o,d);if(!S)return null;if(T){if(T.position.version===S.version)return T.position;T.position.version=S.version}else{if(S.usvg&&!S.data){const E=this.getPatternInFlightId(o.toString(),d);if(this.patternsInFlight.has(E))return null;this.patternsInFlight.add(E);const k=new n.B(o).scaleSelf(n.q.devicePixelRatio),Z=new Map([[k.toString(),{image:S,imageVariant:k}]]);return this._rasterizeImages(d,Z,(K,Y)=>this.storePatternImage(k,d,S,A,Y)),null}this.storePattern(o,d,S)}return this._updatePatternAtlas(d,A),this.patterns[d][o.name].position}getPatternInFlightId(o,d){return n.C(o,d)}hasPatternsInFlight(){return this.patternsInFlight.size!==0}storePatternImage(o,d,A,T,S){const E=o.toString(),k=S?S.get(E):void 0;k&&(A.data=k,this.storePattern(o.id,d,A),this._updatePatternAtlas(d,T),this.patternsInFlight.delete(this.getPatternInFlightId(o.id.toString(),d)))}storePattern(o,d,A){const T={w:A.data.width+2*n.F,h:A.data.height+2*n.F,x:0,y:0},S=new n.G(T,A,n.F);this.patterns[d][o.name]={bin:T,position:S}}bind(o,d){const A=o.gl;let T=this.atlasTexture[d];T?this.dirty&&(T.update(this.atlasImage[d]),this.dirty=!1):(T=new n.T(o,this.atlasImage[d],A.RGBA8),this.atlasTexture[d]=T),T.bind(A.LINEAR,A.CLAMP_TO_EDGE)}_updatePatternAtlas(o,d){const A=[];for(const k in this.patterns[o])A.push(this.patterns[o][k].bin);const{w:T,h:S}=n.H(A),E=this.atlasImage[o];E.resize({width:T||1,height:S||1});for(const k in this.patterns[o]){const{bin:Z,position:K}=this.patterns[o][k];let Y=K.padding;const ae=Z.x+Y,re=Z.y+Y,pe=this._images[o][k].data,Pe=pe.width,Ce=pe.height;Y=Y>1?Y-1:Y,n.r.copy(pe,E,{x:0,y:0},{x:ae,y:re},{width:Pe,height:Ce},d),n.r.copy(pe,E,{x:0,y:Ce-Y},{x:ae,y:re-Y},{width:Pe,height:Y},d),n.r.copy(pe,E,{x:0,y:0},{x:ae,y:re+Ce},{width:Pe,height:Y},d),n.r.copy(pe,E,{x:Pe-Y,y:0},{x:ae-Y,y:re},{width:Y,height:Ce},d),n.r.copy(pe,E,{x:0,y:0},{x:ae+Pe,y:re},{width:Y,height:Ce},d),n.r.copy(pe,E,{x:Pe-Y,y:Ce-Y},{x:ae-Y,y:re-Y},{width:Y,height:Y},d),n.r.copy(pe,E,{x:0,y:Ce-Y},{x:ae+Pe,y:re-Y},{width:Y,height:Y},d),n.r.copy(pe,E,{x:0,y:0},{x:ae+Pe,y:re+Ce},{width:Y,height:Y},d),n.r.copy(pe,E,{x:Pe-Y,y:0},{x:ae-Y,y:re+Ce},{width:Y,height:Y},d)}this.dirty=!0}beginFrame(){for(const o in this._images)this.callbackDispatchedThisFrame[o]=new Set}dispatchRenderCallbacks(o,d){for(const A of o){if(this.callbackDispatchedThisFrame[d].has(A.toString()))continue;this.callbackDispatchedThisFrame[d].add(A.toString());const T=(A.iconsetId?this._iconsets[d][A.iconsetId]:this._images[d])[A.name];It(T)&&this.updateImage(A,d,T)}}}function wt(y){const o=y.key,d=y.value,A=y.valueSpec||{},T=y.objectElementValidators||{},S=y.style,E=y.styleSpec;let k=[];const Z=n.K(d);if(Z!=="object")return[new n.V(o,d,`object expected, ${Z} found`)];for(const K in d){const Y=K.split(".")[0];let ae;T[Y]?ae=T[Y]:A[Y]?ae=br:T["*"]?ae=T["*"]:A["*"]&&(ae=br),ae?k=k.concat(ae({key:(o&&`${o}.`)+K,value:d[K],valueSpec:A[Y]||A["*"],style:S,styleSpec:E,object:d,objectKey:K},d)):k.push(new n.J(o,d[K],`unknown property "${K}"`))}for(const K in A)T[K]||A[K].required&&A[K].default===void 0&&d[K]===void 0&&k.push(new n.V(o,d,`missing required property "${K}"`));return k}function hr(y){const o=y.value,d=y.valueSpec,A=y.style,T=y.styleSpec,S=y.key,E=y.arrayElementValidator||br;if(n.K(o)!=="array")return[new n.V(S,o,`array expected, ${n.K(o)} found`)];if(d.length&&o.length!==d.length)return[new n.V(S,o,`array length ${d.length} expected, length ${o.length} found`)];if(d["min-length"]&&o.length<d["min-length"])return[new n.V(S,o,`array length at least ${d["min-length"]} expected, length ${o.length} found`)];let k={type:d.value,values:d.values,minimum:d.minimum,maximum:d.maximum,function:void 0};T.$version<7&&(k.function=d.function),n.K(d.value)==="object"&&(k=d.value);let Z=[];for(let K=0;K<o.length;K++)Z=Z.concat(E({array:o,arrayIndex:K,value:o[K],valueSpec:k,style:A,styleSpec:T,key:`${S}[${K}]`},!0));return Z}function ba(y){const o=y.key,d=y.value,A=y.valueSpec;let T=n.K(d);if(T==="number"&&d!=d&&(T="NaN"),T!=="number")return[new n.V(o,d,`number expected, ${T} found`)];if("minimum"in A){let S=A.minimum;if(n.K(A.minimum)==="array"&&(S=A.minimum[y.arrayIndex]),d<S)return[new n.V(o,d,`${d} is less than the minimum value ${S}`)]}if("maximum"in A){let S=A.maximum;if(n.K(A.maximum)==="array"&&(S=A.maximum[y.arrayIndex]),d>S)return[new n.V(o,d,`${d} is greater than the maximum value ${S}`)]}return[]}function Pa(y){const o=y.valueSpec,d=n.M(y.value.type);let A,T,S,E={};const k=d!=="categorical"&&y.value.property===void 0,Z=!k,K=n.K(y.value.stops)==="array"&&n.K(y.value.stops[0])==="array"&&n.K(y.value.stops[0][0])==="object",Y=wt({key:y.key,value:y.value,valueSpec:y.styleSpec.function,style:y.style,styleSpec:y.styleSpec,objectElementValidators:{stops:function(pe){if(d==="identity")return[new n.V(pe.key,pe.value,'identity function may not have a "stops" property')];let Pe=[];const Ce=pe.value;return Pe=Pe.concat(hr({key:pe.key,value:Ce,valueSpec:pe.valueSpec,style:pe.style,styleSpec:pe.styleSpec,arrayElementValidator:ae})),n.K(Ce)==="array"&&Ce.length===0&&Pe.push(new n.V(pe.key,Ce,"array must have at least one stop")),Pe},default:function(pe){return br({key:pe.key,value:pe.value,valueSpec:o,style:pe.style,styleSpec:pe.styleSpec})}}});return d==="identity"&&k&&Y.push(new n.V(y.key,y.value,'missing required property "property"')),d==="identity"||y.value.stops||Y.push(new n.V(y.key,y.value,'missing required property "stops"')),d==="exponential"&&y.valueSpec.expression&&!n.N(y.valueSpec)&&Y.push(new n.V(y.key,y.value,"exponential functions not supported")),y.styleSpec.$version>=8&&(Z&&!n.O(y.valueSpec)?Y.push(new n.V(y.key,y.value,"property functions not supported")):k&&!n.Q(y.valueSpec)&&Y.push(new n.V(y.key,y.value,"zoom functions not supported"))),d!=="categorical"&&!K||y.value.property!==void 0||Y.push(new n.V(y.key,y.value,'"property" property is required')),Y;function ae(pe){let Pe=[];const Ce=pe.value,De=pe.key;if(n.K(Ce)!=="array")return[new n.V(De,Ce,`array expected, ${n.K(Ce)} found`)];if(Ce.length!==2)return[new n.V(De,Ce,`array length 2 expected, length ${Ce.length} found`)];if(K){if(n.K(Ce[0])!=="object")return[new n.V(De,Ce,`object expected, ${n.K(Ce[0])} found`)];if(Ce[0].zoom===void 0)return[new n.V(De,Ce,"object stop key must have zoom")];if(Ce[0].value===void 0)return[new n.V(De,Ce,"object stop key must have value")];const Le=n.M(Ce[0].zoom);if(typeof Le!="number")return[new n.V(De,Ce[0].zoom,"stop zoom values must be numbers")];if(S&&S>Le)return[new n.V(De,Ce[0].zoom,"stop zoom values must appear in ascending order")];Le!==S&&(S=Le,T=void 0,E={}),Pe=Pe.concat(wt({key:`${De}[0]`,value:Ce[0],valueSpec:{zoom:{}},style:pe.style,styleSpec:pe.styleSpec,objectElementValidators:{zoom:ba,value:re}}))}else Pe=Pe.concat(re({key:`${De}[0]`,value:Ce[0],style:pe.style,styleSpec:pe.styleSpec},Ce));return n.S(n.U(Ce[1]))?Pe.concat([new n.V(`${De}[1]`,Ce[1],"expressions are not allowed in function stops.")]):Pe.concat(br({key:`${De}[1]`,value:Ce[1],valueSpec:o,style:pe.style,styleSpec:pe.styleSpec}))}function re(pe,Pe){const Ce=n.K(pe.value),De=n.M(pe.value),Le=pe.value!==null?pe.value:Pe;if(A){if(Ce!==A)return[new n.V(pe.key,Le,`${Ce} stop domain type must match previous stop domain type ${A}`)]}else A=Ce;if(Ce!=="number"&&Ce!=="string"&&Ce!=="boolean"&&typeof De!="number"&&typeof De!="string"&&typeof De!="boolean")return[new n.V(pe.key,Le,"stop domain value must be a number, string, or boolean")];if(Ce!=="number"&&d!=="categorical"){let Ke=`number expected, ${Ce} found`;return n.O(o)&&d===void 0&&(Ke+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new n.V(pe.key,Le,Ke)]}return d!=="categorical"||Ce!=="number"||typeof De=="number"&&isFinite(De)&&Math.floor(De)===De?d!=="categorical"&&Ce==="number"&&typeof De=="number"&&typeof T=="number"&&T!==void 0&&De<T?[new n.V(pe.key,Le,"stop domain values must appear in ascending order")]:(T=De,d==="categorical"&&De in E?[new n.V(pe.key,Le,"stop domain values must be unique")]:(E[De]=!0,[])):[new n.V(pe.key,Le,`integer expected, found ${String(De)}`)]}}function Ja(y){const o=(y.expressionContext==="property"?n.W:n.X)(n.U(y.value),y.valueSpec);if(o.result==="error")return o.value.map(A=>new n.V(`${y.key}${A.key}`,y.value,A.message));const d=o.value.expression||o.value._styleExpression.expression;if(y.expressionContext==="property"&&y.propertyKey==="text-font"&&!d.outputDefined())return[new n.V(y.key,y.value,`Invalid data expression for "${y.propertyKey}". Output values must be contained as literals within the expression.`)];if(y.expressionContext==="property"&&y.propertyType==="layout"&&!n.Y(d))return[new n.V(y.key,y.value,'"feature-state" data expressions are not supported with layout properties.')];if(y.expressionContext==="filter")return or(d,y);if(y.expressionContext&&y.expressionContext.indexOf("cluster")===0){if(!n.Z(d,["zoom","feature-state"]))return[new n.V(y.key,y.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(y.expressionContext==="cluster-initial"&&!n._(d))return[new n.V(y.key,y.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function or(y,o){const d=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(o.valueSpec&&o.valueSpec.expression)for(const T of o.valueSpec.expression.parameters)d.delete(T);if(d.size===0)return[];const A=[];return y instanceof n.$&&d.has(y.name)?[new n.V(o.key,o.value,`["${y.name}"] expression is not supported in a filter for a ${o.object.type} layer with id: ${o.object.id}`)]:(y.eachChild(T=>{A.push(...or(T,o))}),A)}function lr(y){const o=y.key,d=y.value,A=y.valueSpec,T=[];return Array.isArray(A.values)?A.values.indexOf(n.M(d))===-1&&T.push(new n.V(o,d,`expected one of [${A.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(A.values).indexOf(n.M(d))===-1&&T.push(new n.V(o,d,`expected one of [${Object.keys(A.values).join(", ")}], ${JSON.stringify(d)} found`)),T}function Tr(y){return n.a1(n.U(y.value))?Ja(n.L({},y,{expressionContext:"filter",valueSpec:y.styleSpec[`filter_${y.layerType||"fill"}`]})):ka(y)}function ka(y){const o=y.value,d=y.key;if(n.K(o)!=="array")return[new n.V(d,o,`array expected, ${n.K(o)} found`)];const A=y.styleSpec;let T,S=[];if(o.length<1)return[new n.V(d,o,"filter array must have at least 1 element")];switch(S=S.concat(lr({key:`${d}[0]`,value:o[0],valueSpec:A.filter_operator,style:y.style,styleSpec:y.styleSpec})),n.M(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&n.M(o[1])==="$type"&&S.push(new n.V(d,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":o.length!==3&&S.push(new n.V(d,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(T=n.K(o[1]),T!=="string"&&S.push(new n.V(`${d}[1]`,o[1],`string expected, ${T} found`)));for(let E=2;E<o.length;E++)T=n.K(o[E]),n.M(o[1])==="$type"?S=S.concat(lr({key:`${d}[${E}]`,value:o[E],valueSpec:A.geometry_type,style:y.style,styleSpec:y.styleSpec})):T!=="string"&&T!=="number"&&T!=="boolean"&&S.push(new n.V(`${d}[${E}]`,o[E],`string, number, or boolean expected, ${T} found`));break;case"any":case"all":case"none":for(let E=1;E<o.length;E++)S=S.concat(ka({key:`${d}[${E}]`,value:o[E],style:y.style,styleSpec:y.styleSpec}));break;case"has":case"!has":T=n.K(o[1]),o.length!==2?S.push(new n.V(d,o,`filter array for "${o[0]}" operator must have 2 elements`)):T!=="string"&&S.push(new n.V(`${d}[1]`,o[1],`string expected, ${T} found`))}return S}function kr(y,o){const d=y.key,A=y.style,T=y.layer,S=y.styleSpec,E=y.value,k=y.objectKey,Z=S[`${o}_${y.layerType}`];if(!Z)return[];const K=k.match(/^(.*)-use-theme$/);if(o==="paint"&&K&&Z[K[1]])return n.S(E)?[].concat(br({key:y.key,value:E,valueSpec:{type:"string",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},style:A,styleSpec:S,expressionContext:"property",propertyType:o,propertyKey:k})):br({key:d,value:E,valueSpec:{type:"string"},style:A,styleSpec:S});const Y=k.match(/^(.*)-transition$/);if(o==="paint"&&Y&&Z[Y[1]]&&Z[Y[1]].transition)return br({key:d,value:E,valueSpec:S.transition,style:A,styleSpec:S});const ae=y.valueSpec||Z[k];if(!ae)return[new n.J(d,E,`unknown property "${k}"`)];let re;if(n.K(E)==="string"&&n.O(ae)&&!ae.tokens&&(re=/^{([^}]+)}$/.exec(E))){const Pe=`\`{ "type": "identity", "property": ${re?JSON.stringify(re[1]):'"_"'} }\``;return[new n.V(d,E,`"${k}" does not support interpolation syntax
Use an identity property function instead: ${Pe}.`)]}const pe=[];if(y.layerType==="symbol")k!=="text-field"||!A||A.glyphs||A.imports||pe.push(new n.V(d,E,'use of "text-field" requires a style "glyphs" property')),k==="text-font"&&n.a2(n.U(E))&&n.M(E.type)==="identity"&&pe.push(new n.V(d,E,'"text-font" does not support identity functions'));else if(y.layerType==="model"&&o==="paint"&&T&&T.layout&&T.layout.hasOwnProperty("model-id")&&n.O(ae)&&(n.a3(ae)||n.Q(ae))){const Pe=n.W(n.U(E),ae),Ce=Pe.value.expression||Pe.value._styleExpression.expression;Ce&&!n.Z(Ce,["measure-light"])&&(k==="model-emissive-strength"&&n._(Ce)&&n.Y(Ce)||pe.push(new n.V(d,E,`${k} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return pe.concat(br({key:y.key,value:E,valueSpec:ae,style:A,styleSpec:S,expressionContext:"property",propertyType:o,propertyKey:k}))}function nn(y){return kr(y,"paint")}function wn(y){return kr(y,"layout")}function un(y){let o=[];const d=y.value,A=y.key,T=y.style,S=y.styleSpec;d.type||d.ref||o.push(new n.V(A,d,'either "type" or "ref" is required'));let E=n.M(d.type);const k=n.M(d.ref);if(d.id){const Z=n.M(d.id);for(let K=0;K<y.arrayIndex;K++){const Y=T.layers[K];n.M(Y.id)===Z&&o.push(new n.V(A,d.id,`duplicate layer id "${d.id}", previously used at line ${Y.id.__line__}`))}}if("ref"in d){let Z;["type","source","source-layer","filter","layout"].forEach(K=>{K in d&&o.push(new n.V(A,d[K],`"${K}" is prohibited for ref layers`))}),T.layers.forEach(K=>{n.M(K.id)===k&&(Z=K)}),Z?Z.ref?o.push(new n.V(A,d.ref,"ref cannot reference another ref layer")):E=n.M(Z.type):typeof k=="string"&&o.push(new n.V(A,d.ref,`ref layer "${k}" not found`))}else if(E!=="background"&&E!=="sky"&&E!=="slot")if(d.source){const Z=T.sources&&T.sources[d.source],K=Z&&n.M(Z.type);Z?K==="vector"&&E==="raster"?o.push(new n.V(A,d.source,`layer "${d.id}" requires a raster source`)):K==="raster"&&E!=="raster"?o.push(new n.V(A,d.source,`layer "${d.id}" requires a vector source`)):K!=="vector"||d["source-layer"]?K==="raster-dem"&&E!=="hillshade"?o.push(new n.V(A,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):K!=="raster-array"||["raster","raster-particle"].includes(E)?E!=="line"||!d.paint||!d.paint["line-gradient"]&&!d.paint["line-trim-offset"]||K==="geojson"&&Z.lineMetrics?E==="raster-particle"&&K!=="raster-array"&&o.push(new n.V(A,d.source,`layer "${d.id}" requires a 'raster-array' source.`)):o.push(new n.V(A,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new n.V(A,d.source,"raster-array source can only be used with layer type 'raster'.")):o.push(new n.V(A,d,`layer "${d.id}" must specify a "source-layer"`)):o.push(new n.V(A,d.source,`source "${d.source}" not found`))}else o.push(new n.V(A,d,'missing required property "source"'));return o=o.concat(wt({key:A,value:d,valueSpec:S.layer,style:y.style,styleSpec:y.styleSpec,objectElementValidators:{"*":()=>[],type:()=>br({key:`${A}.type`,value:d.type,valueSpec:S.layer.type,style:y.style,styleSpec:y.styleSpec,object:d,objectKey:"type"}),filter:Z=>Tr(n.L({layerType:E},Z)),layout:Z=>wt({layer:d,key:Z.key,value:Z.value,valueSpec:{},style:Z.style,styleSpec:Z.styleSpec,objectElementValidators:{"*":K=>wn(n.L({layerType:E},K))}}),paint:Z=>wt({layer:d,key:Z.key,value:Z.value,valueSpec:{},style:Z.style,styleSpec:Z.styleSpec,objectElementValidators:{"*":K=>nn(n.L({layerType:E,layer:d},K))}})}})),o}function va(y){const o=y.value,d=y.key,A=n.K(o);return A!=="string"?[new n.V(d,o,`string expected, ${A} found`)]:[]}const $a={promoteId:function y({key:o,value:d}){if(n.K(d)==="string")return va({key:o,value:d});if(Array.isArray(d)){const A=[],T=n.U(d),S=n.X(T);return S.result==="error"&&S.value.forEach(E=>{A.push(new n.V(`${o}${E.key}`,null,`${E.message}`))}),n.Z(S.value.expression,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])||A.push(new n.V(`${o}`,null,"promoteId expression should be only feature dependent")),A}{const A=[];for(const T in d)A.push(...y({key:`${o}.${T}`,value:d[T]}));return A}}};function la(y){const o=y.value,d=y.key,A=y.styleSpec,T=y.style;if(!o.type)return[new n.V(d,o,'"type" is required')];const S=n.M(o.type);let E=[];switch(["vector","raster","raster-dem","raster-array"].includes(S)&&(o.url||o.tiles||E.push(new n.J(d,o,'Either "url" or "tiles" is required.'))),S){case"vector":case"raster":case"raster-dem":case"raster-array":return E=E.concat(wt({key:d,value:o,valueSpec:A[`source_${S.replace("-","_")}`],style:y.style,styleSpec:A,objectElementValidators:$a})),E;case"geojson":if(E=wt({key:d,value:o,valueSpec:A.source_geojson,style:T,styleSpec:A,objectElementValidators:$a}),o.cluster)for(const k in o.clusterProperties){const[Z,K]=o.clusterProperties[k],Y=typeof Z=="string"?[Z,["accumulated"],["get",k]]:Z;E.push(...Ja({key:`${d}.${k}.map`,value:K,expressionContext:"cluster-map"})),E.push(...Ja({key:`${d}.${k}.reduce`,value:Y,expressionContext:"cluster-reduce"}))}return E;case"video":return wt({key:d,value:o,valueSpec:A.source_video,style:T,styleSpec:A});case"image":return wt({key:d,value:o,valueSpec:A.source_image,style:T,styleSpec:A});case"canvas":return[new n.V(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return lr({key:`${d}.type`,value:o.type,valueSpec:{values:Ya(A)}})}}function Ya(y){return y.source.reduce((o,d)=>{const A=y[d];return A.type.type==="enum"&&(o=o.concat(Object.keys(A.type.values))),o},[])}function yr(y){const o=y.value,d=y.styleSpec,A=d.light,T=y.style;let S=[];const E=n.K(o);if(o===void 0)return S;if(E!=="object")return S=S.concat([new n.V("light",o,`object expected, ${E} found`)]),S;for(const k in o){const Z=k.match(/^(.*)-transition$/),K=k.match(/^(.*)-use-theme$/);S=S.concat(K&&A[K[1]]?br({key:k,value:o[k],valueSpec:{type:"string"},style:T,styleSpec:d}):Z&&A[Z[1]]&&A[Z[1]].transition?br({key:k,value:o[k],valueSpec:d.transition,style:T,styleSpec:d}):A[k]?br({key:k,value:o[k],valueSpec:A[k],style:T,styleSpec:d}):[new n.V(k,o[k],`unknown property "${k}"`)])}return S}function Tn(y){const o=y.value;let d=[];if(!o)return d;const A=n.K(o);if(A!=="object")return d=d.concat([new n.V("light-3d",o,`object expected, ${A} found`)]),d;const T=y.styleSpec,S=T["light-3d"],E=y.key,k=y.style,Z=y.style.lights;for(const ae of["type","id"])if(!(ae in o))return d=d.concat([new n.V("light-3d",o,`missing property ${ae} on light`)]),d;if(o.type&&Z)for(let ae=0;ae<y.arrayIndex;ae++){const re=n.M(o.type),pe=Z[ae];n.M(pe.type)===re&&d.push(new n.V(E,o.id,`duplicate light type "${o.type}", previously defined at line ${pe.id.__line__}`))}const K=`properties_light_${o.type}`;if(!(K in T))return d=d.concat([new n.V("light-3d",o,`Invalid light type ${o.type}`)]),d;const Y=T[K];for(const ae in o)if(ae==="properties"){const re=o[ae],pe=n.K(re);if(pe!=="object")return d=d.concat([new n.V("properties",re,`object expected, ${pe} found`)]),d;for(const Pe in re)d=d.concat(Y[Pe]?br({key:Pe,value:re[Pe],valueSpec:Y[Pe],style:k,styleSpec:T}):[new n.J(y.key,re[Pe],`unknown property "${Pe}"`)])}else{const re=ae.match(/^(.*)-transition$/),pe=ae.match(/^(.*)-use-theme$/);d=d.concat(pe&&S[pe[1]]?br({key:ae,value:o[ae],valueSpec:{type:"string"},style:k,styleSpec:T}):re&&S[re[1]]&&S[re[1]].transition?br({key:ae,value:o[ae],valueSpec:T.transition,style:k,styleSpec:T}):S[ae]?br({key:ae,value:o[ae],valueSpec:S[ae],style:k,styleSpec:T}):[new n.J(ae,o[ae],`unknown property "${ae}"`)])}return d}function Qr(y){const o=y.value,d=y.key,A=y.style,T=y.styleSpec,S=T.terrain;let E=[];const k=n.K(o);if(o===void 0||k==="null")return E;if(k!=="object")return E=E.concat([new n.V("terrain",o,`object expected, ${k} found`)]),E;for(const Z in o){const K=Z.match(/^(.*)-transition$/),Y=Z.match(/^(.*)-use-theme$/);E=E.concat(Y&&S[Y[1]]?br({key:Z,value:o[Z],valueSpec:{type:"string"},style:A,styleSpec:T}):K&&S[K[1]]&&S[K[1]].transition?br({key:Z,value:o[Z],valueSpec:T.transition,style:A,styleSpec:T}):S[Z]?br({key:Z,value:o[Z],valueSpec:S[Z],style:A,styleSpec:T}):[new n.J(Z,o[Z],`unknown property "${Z}"`)])}if(o.source){const Z=A.sources&&A.sources[o.source],K=Z&&n.M(Z.type);Z?K!=="raster-dem"&&E.push(new n.V(d,o.source,`terrain cannot be used with a source of type ${String(K)}, it only be used with a "raster-dem" source type`)):E.push(new n.V(d,o.source,`source "${o.source}" not found`))}else E.push(new n.V(d,o,'terrain is missing required property "source"'));return E}function cn(y){const o=y.value,d=y.style,A=y.styleSpec,T=A.fog;let S=[];const E=n.K(o);if(o===void 0)return S;if(E!=="object")return S=S.concat([new n.V("fog",o,`object expected, ${E} found`)]),S;for(const k in o){const Z=k.match(/^(.*)-transition$/),K=k.match(/^(.*)-use-theme$/);S=S.concat(K&&T[K[1]]?br({key:k,value:o[k],valueSpec:{type:"string"},style:d,styleSpec:A}):Z&&T[Z[1]]&&T[Z[1]].transition?br({key:k,value:o[k],valueSpec:A.transition,style:d,styleSpec:A}):T[k]?br({key:k,value:o[k],valueSpec:T[k],style:d,styleSpec:A}):[new n.J(k,o[k],`unknown property "${k}"`)])}return S}const $r={"*":()=>[],array:hr,boolean:function(y){const o=y.value,d=y.key,A=n.K(o);return A!=="boolean"?[new n.V(d,o,`boolean expected, ${A} found`)]:[]},number:ba,color:function(y){const o=y.key,d=y.value,A=n.K(d);return A!=="string"?[new n.V(o,d,`color expected, ${A} found`)]:n.a0.parseCSSColor(d)===null?[new n.V(o,d,`color expected, "${d}" found`)]:[]},enum:lr,filter:Tr,function:Pa,layer:un,object:wt,source:la,model:n.a4,light:yr,"light-3d":Tn,terrain:Qr,fog:cn,string:va,formatted:function(y){return va(y).length===0?[]:Ja(y)},resolvedImage:function(y){return va(y).length===0?[]:Ja(y)},projection:function(y){const o=y.value,d=y.styleSpec,A=d.projection,T=y.style;let S=[];const E=n.K(o);if(E==="object")for(const k in o)S=S.concat(br({key:k,value:o[k],valueSpec:A[k],style:T,styleSpec:d}));else E!=="string"&&(S=S.concat([new n.V("projection",o,`object or string expected, ${E} found`)]));return S},import:function(y){const{value:o,styleSpec:d}=y,{data:A,...T}=o;Object.defineProperty(T,"__line__",{value:o.__line__,enumerable:!1});let S=wt(n.L({},y,{value:T,valueSpec:d.import}));return n.M(T.id)===""&&S.push(new n.V(`${y.key}.id`,T,"import id can't be an empty string")),A&&(S=S.concat(yi(A,d,{key:`${y.key}.data`}))),S},iconset:function(y){const o=y.value,d=y.key,A=y.styleSpec,T=y.style;if(!o.type)return[new n.V(d,o,'"type" is required')];const S=n.M(o.type);let E=[];if(E=E.concat(wt({key:d,value:o,valueSpec:A[`iconset_${S}`],style:T,styleSpec:A})),S==="source"&&o.source){const k=T.sources&&T.sources[o.source],Z=k&&n.M(k.type);k?Z!=="raster-array"&&E.push(new n.V(d,o.source,`iconset cannot be used with a source of type ${String(Z)}, it only be used with a "raster-array" source type`)):E.push(new n.V(d,o.source,`source "${o.source}" not found`))}return E}};function br(y,o=!1){const d=y.value,A=y.valueSpec,T=y.styleSpec;if(A.expression&&n.a2(n.M(d)))return Pa(y);if(A.expression&&n.S(n.U(d)))return Ja(y);if(A.type&&$r[A.type]){const S=$r[A.type](y);return o===!0&&S.length>0&&n.K(y.value)==="array"?Ja(y):S}return wt(n.L({},y,{valueSpec:A.type?T[A.type]:A}))}function Fi(y){const o=y.value,d=y.key,A=va(y);return A.length||(o.indexOf("{fontstack}")===-1&&A.push(new n.V(d,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&A.push(new n.V(d,o,'"glyphs" url must include a "{range}" token'))),A}function yi(y,o=n.a5,d={}){return br({key:d.key||"",value:y,valueSpec:o.$root,styleSpec:o,style:y,objectElementValidators:{glyphs:Fi,"*":()=>[]}})}function oi(y,o=n.a5){return bt(yi(y,o))}const Cs=y=>bt(la(y)),ga=y=>bt(yr(y)),pr=y=>bt(Tn(y)),Kr=y=>bt(Qr(y)),ti=y=>bt(cn(y)),Rn=y=>bt(function(o){const d=o.value,A=o.style,T=o.styleSpec,S=T.snow;let E=[];const k=n.K(d);if(d===void 0)return E;if(k!=="object")return E=E.concat([new n.V("snow",d,`object expected, ${k} found`)]),E;for(const Z in d){const K=Z.match(/^(.*)-transition$/);E=E.concat(K&&S[K[1]]&&S[K[1]].transition?br({key:Z,value:d[Z],valueSpec:T.transition,style:A,styleSpec:T}):S[Z]?br({key:Z,value:d[Z],valueSpec:S[Z],style:A,styleSpec:T}):[new n.J(Z,d[Z],`unknown property "${Z}"`)])}return E}(y)),Zt=y=>bt(function(o){const d=o.value,A=o.style,T=o.styleSpec,S=T.rain;let E=[];const k=n.K(d);if(d===void 0)return E;if(k!=="object")return E=E.concat([new n.V("rain",d,`object expected, ${k} found`)]),E;for(const Z in d){const K=Z.match(/^(.*)-transition$/);E=E.concat(K&&S[K[1]]&&S[K[1]].transition?br({key:Z,value:d[Z],valueSpec:T.transition,style:A,styleSpec:T}):S[Z]?br({key:Z,value:d[Z],valueSpec:S[Z],style:A,styleSpec:T}):[new n.J(Z,d[Z],`unknown property "${Z}"`)])}return E}(y)),Ne=y=>bt(un(y)),Ie=y=>bt(Tr(y)),He=y=>bt(nn(y)),yt=y=>bt(wn(y)),At=y=>bt(n.a4(y));function bt(y){return y.slice().sort((o,d)=>o.line&&d.line?o.line-d.line:0)}function Gt(y,o){let d=!1;if(o&&o.length)for(const A of o)A instanceof n.J?n.w(A.message):(y.fire(new n.z(new Error(A.message))),d=!0);return d}let Et;class Wt extends n.E{constructor(o,d="flat"){super(),this._transitionable=new n.a6(Et||(Et=new n.a7({anchor:new n.a8(n.a5.light.anchor),position:new n.a9(n.a5.light.position),color:new n.a8(n.a5.light.color),intensity:new n.a8(n.a5.light.intensity)}))),this.setLight(o,d),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,d,A={}){this._validate(ga,o,A)||(this._transitionable.setTransitionOrValue(o),this.id=d)}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,d,A){return(!A||A.validate!==!1)&&Gt(this,o.call(oi,n.l({value:d,style:{glyphs:!0,sprite:!0},styleSpec:n.a5})))}}let Yt=class extends n.E{constructor(y,o,d,A){super(),this.scope=d,this._transitionable=new n.a6(new n.a7({source:new n.a8(n.a5.terrain.source),exaggeration:new n.a8(n.a5.terrain.exaggeration)}),d,A),this._transitionable.setTransitionOrValue(y,A),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=o}get(){return this._transitionable.serialize()}set(y,o){this._transitionable.setTransitionOrValue(y,o)}updateTransitions(y){this._transitioning=this._transitionable.transitioned(y,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(y){this.properties=this._transitioning.possiblyEvaluate(y)}getExaggeration(y){return this._transitioning.possiblyEvaluate(new n.aa(y)).get("exaggeration")}getAttenuationRange(){if(!this.isZoomDependent())return null;const y=this._transitionable._values.exaggeration;if(!y)return null;const o=y.value.expression;if(!o)return null;let d=-1,A=-1,T=1;for(const S of o.zoomStops)T=o.evaluate(new n.aa(S)),T>.01?(d=S,A=-1):A=S;return T<.01&&d>0&&A>d?[d,A]:null}isZoomDependent(){const y=this._transitionable._values.exaggeration;return y!=null&&y.value!=null&&y.value.expression!=null&&y.value.expression instanceof n.ab}};const Kt=45,Ca=65,Ia=.05;function Ga(y,o,d,A){const T=n.ae(Kt,Ca,d),[S,E]=Cr(y,A);let k=1-Math.min(1,Math.exp((o-S)/(E-S)*-6));return k*=k*k,k=Math.min(1,1.00747*k),k*T*y.alpha}function Cr(y,o){const d=.5/Math.tan(.5*o);return[y.range[0]+d,y.range[1]+d]}function Dr(y,o,d,A,T){const S=n.ad.vec3.transformMat4([],[o,d,A],T.mercatorFogMatrix);return Ga(y,n.ad.vec3.length(S),T.pitch,T._fov)}function Mr(y,o,d,A,T,S,E){const k=[[d,A,0],[T,A,0],[T,S,0],[d,S,0]];let Z=Number.MAX_VALUE,K=-Number.MAX_VALUE;for(const Y of k){const ae=n.ad.vec3.transformMat4([],Y,o),re=n.ad.vec3.length(ae);Z=Math.min(Z,re),K=Math.max(K,re)}return[Ga(y,Z,E.pitch,E._fov),Ga(y,K,E.pitch,E._fov)]}class Hr extends n.E{constructor(o,d,A,T){super();const S=new n.a7({range:new n.a8(n.a5.fog.range),color:new n.a8(n.a5.fog.color),"color-use-theme":new n.a8({type:"string","property-type":"data-constant",default:"default"}),"high-color":new n.a8(n.a5.fog["high-color"]),"high-color-use-theme":new n.a8({type:"string","property-type":"data-constant",default:"default"}),"space-color":new n.a8(n.a5.fog["space-color"]),"space-color-use-theme":new n.a8({type:"string","property-type":"data-constant",default:"default"}),"horizon-blend":new n.a8(n.a5.fog["horizon-blend"]),"star-intensity":new n.a8(n.a5.fog["star-intensity"]),"vertical-range":new n.a8(n.a5.fog["vertical-range"])});this._transitionable=new n.a6(S,A,new Map(T)),this.set(o,T),this._transitioning=this._transitionable.untransitioned(),this._transform=d,this.properties=new n.af(S),this.scope=A}get state(){const o=this._transform,d=o.projection.name==="globe",A=n.ag(o.zoom),T=this.properties.get("range"),S=[.5,3];return{range:d?[n.ah(S[0],T[0],A),n.ah(S[1],T[1],A)]:T,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(o,d,A={}){if(this._validate(ti,o,A))return;const T=n.l({},o);for(const S of Object.keys(n.a5.fog))T[S]===void 0&&(T[S]=n.a5.fog[S].default);this._options=T,this._transitionable.setTransitionOrValue(this._options,d)}getOpacity(o){if(!this._transform.projection.supportsFog)return 0;const d=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:n.ae(Kt,Ca,o))*d.a}getOpacityAtLatLng(o,d){return this._transform.projection.supportsFog?function(A,T,S){const E=n.ac.fromLngLat(T),k=S.elevation?S.elevation.getAtPointOrZero(E):0;return Dr(A,E.x,E.y,k,S)}(this.state,o,d):0}getOpacityForTile(o){if(!this._transform.projection.supportsFog)return[1,1];const d=this._transform.calculateFogTileMatrix(o.toUnwrapped());return Mr(this.state,d,0,0,n.ai,n.ai,this._transform)}getOpacityForBounds(o,d,A,T,S){return this._transform.projection.supportsFog?Mr(this.state,o,d,A,T,S,this._transform):[1,1]}getFovAdjustedRange(o){return this._transform.projection.supportsFog?Cr(this.state,o):[0,1]}isVisibleOnFrustum(o){if(!this._transform.projection.supportsFog)return!1;const d=[4,5,6,7];for(const A of d){const T=o.points[A];let S;if(T[2]>=0)S=T;else{const E=o.points[A-4];S=n.aj(E,T,E[2]/(E[2]-T[2]))}if(Dr(this.state,S[0],S[1],0,this._transform)>=Ia)return!0}return!1}updateConfig(o){this._transitionable.setTransitionOrValue(this._options,new Map(o))}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,d,A){return(!A||A.validate!==!1)&&Gt(this,o.call(oi,n.l({value:d,style:{glyphs:!0,sprite:!0},styleSpec:n.a5})))}}let Un,ri,Yr,Cn,Xr=class extends n.E{constructor(y,o,d,A){super();const T=Un||(Un=new n.a7({density:new n.a8(n.a5.snow.density),intensity:new n.a8(n.a5.snow.intensity),color:new n.a8(n.a5.snow.color),opacity:new n.a8(n.a5.snow.opacity),vignette:new n.a8(n.a5.snow.vignette),"vignette-color":new n.a8(n.a5.snow["vignette-color"]),"center-thinning":new n.a8(n.a5.snow["center-thinning"]),direction:new n.a8(n.a5.snow.direction),"flake-size":new n.a8(n.a5.snow["flake-size"])}));this._transitionable=new n.a6(T,d,new Map(A)),this.set(y,A),this._transitioning=this._transitionable.untransitioned(),this.properties=new n.af(T),this.scope=d}get state(){const y=this.properties.get("opacity"),o=this.properties.get("color"),d=this.properties.get("direction"),A=n.ak(d[0]),T=-Math.max(n.ak(d[1]),.01),S=[Math.cos(A)*Math.cos(T),Math.sin(A)*Math.cos(T),Math.sin(T)],E=this.properties.get("vignette"),k=this.properties.get("vignette-color");return k.a=E,{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new n.al(o.r,o.g,o.b,o.a*y),direction:S,centerThinning:this.properties.get("center-thinning"),flakeSize:this.properties.get("flake-size"),vignetteColor:k}}get(){return this._transitionable.serialize()}set(y,o,d={}){if(this._validate(Rn,y,d))return;const A=n.l({},y);for(const T of Object.keys(n.a5.snow))A[T]===void 0&&(A[T]=n.a5.snow[T].default);this._options=A,this._transitionable.setTransitionOrValue(this._options,o)}updateConfig(y){this._transitionable.setTransitionOrValue(this._options,new Map(y))}updateTransitions(y){this._transitioning=this._transitionable.transitioned(y,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(y){this.properties=this._transitioning.possiblyEvaluate(y)}_validate(y,o,d){return(!d||d.validate!==!1)&&Gt(this,y.call(oi,n.l({value:o,style:{glyphs:!0,sprite:!0},styleSpec:n.a5})))}},jn=class extends n.E{constructor(y,o,d,A){super();const T=ri||(ri=new n.a7({density:new n.a8(n.a5.rain.density),intensity:new n.a8(n.a5.rain.intensity),color:new n.a8(n.a5.rain.color),opacity:new n.a8(n.a5.rain.opacity),vignette:new n.a8(n.a5.rain.vignette),"vignette-color":new n.a8(n.a5.rain["vignette-color"]),"center-thinning":new n.a8(n.a5.rain["center-thinning"]),direction:new n.a8(n.a5.rain.direction),"droplet-size":new n.a8(n.a5.rain["droplet-size"]),"distortion-strength":new n.a8(n.a5.rain["distortion-strength"])}));this._transitionable=new n.a6(T,d,new Map(A)),this.set(y,A),this._transitioning=this._transitionable.untransitioned(),this.properties=new n.af(T),this.scope=d}get state(){const y=this.properties.get("opacity"),o=this.properties.get("color"),d=this.properties.get("direction"),A=n.ak(d[0]),T=-Math.max(n.ak(d[1]),.01),S=[Math.cos(A)*Math.cos(T),Math.sin(A)*Math.cos(T),Math.sin(T)],E=this.properties.get("vignette-color");return E.a=this.properties.get("vignette"),{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new n.al(o.r,o.g,o.b,o.a*y),direction:S,centerThinning:this.properties.get("center-thinning"),dropletSize:this.properties.get("droplet-size"),distortionStrength:this.properties.get("distortion-strength"),vignetteColor:E}}get(){return this._transitionable.serialize()}set(y,o,d={}){if(this._validate(Zt,y,d))return;const A=n.l({},y);for(const T of Object.keys(n.a5.rain))A[T]===void 0&&(A[T]=n.a5.rain[T].default);this._options=A,this._transitionable.setTransitionOrValue(this._options,o)}updateConfig(y){this._transitionable.setTransitionOrValue(this._options,new Map(y))}updateTransitions(y){this._transitioning=this._transitionable.transitioned(y,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(y){this.properties=this._transitioning.possiblyEvaluate(y)}_validate(y,o,d){return(!d||d.validate!==!1)&&Gt(this,y.call(oi,n.l({value:o,style:{glyphs:!0,sprite:!0},styleSpec:n.a5})))}};class ki extends n.E{constructor(o,d,A,T){super(),this.scope=A,this._options=o,this.properties=new n.af(d),this._transitionable=new n.a6(d,A,new Map(T)),this._transitionable.setTransitionOrValue(o.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(o){this._transitionable.setTransitionOrValue(this._options.properties,new Map(o))}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(o,d){this._options=o,this._transitionable.setTransitionOrValue(o.properties,d)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}class Xi{constructor(o,d,A,T){this.screenBounds=o,this.cameraPoint=d,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=A,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,T)}static createFromScreenPoints(o,d){let A,T;if(o instanceof n.P||typeof o[0]=="number"){const S=n.P.convert(o);A=[S],T=d.isPointAboveHorizon(S)}else{const S=n.P.convert(o[0]),E=n.P.convert(o[1]);A=[S,E],T=n.an(S,E).every(k=>d.isPointAboveHorizon(k))}return new Xi(A,d.getCameraPoint(),T,d)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(o){return n.an(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],o)}bufferedCameraGeometry(o){const d=this.screenBounds[0],A=this.screenBounds.length===1?this.screenBounds[0].add(new n.P(1,1)):this.screenBounds[1],T=n.an(d,A,0,!1);return this.cameraPoint.y>A.y&&(this.cameraPoint.x>d.x&&this.cameraPoint.x<A.x?T.splice(3,0,this.cameraPoint):this.cameraPoint.x>=A.x?T[2]=this.cameraPoint:this.cameraPoint.x<=d.x&&(T[3]=this.cameraPoint)),n.ao(T,o)}bufferedCameraGeometryGlobe(o){const d=this.screenBounds[0],A=this.screenBounds.length===1?this.screenBounds[0].add(new n.P(1,1)):this.screenBounds[1],T=n.an(d,A,o),S=this.cameraPoint.clone();switch(3*((S.y>d.y)+(S.y>A.y))+((S.x>d.x)+(S.x>A.x))){case 0:T[0]=S,T[4]=S.clone();break;case 1:T.splice(1,0,S);break;case 2:T[1]=S;break;case 3:T.splice(4,0,S);break;case 5:T.splice(2,0,S);break;case 6:T[3]=S;break;case 7:T.splice(3,0,S);break;case 8:T[2]=S}return T}containsTile(o,d,A,T=0){const S=o.queryPadding/d._pixelsPerMercatorPixel+1,E=A?this._bufferedCameraMercator(S,d):this._bufferedScreenMercator(S,d);let k=o.tileID.wrap+(E.unwrapped?T:0);const Z=E.polygon.map(De=>n.ap(o.tileTransform,De,k));if(!n.aq(Z,0,0,n.ai,n.ai))return;k=o.tileID.wrap+(this.screenGeometryMercator.unwrapped?T:0);const K=this.screenGeometryMercator.polygon.map(De=>n.ar(o.tileTransform,De,k)),Y=K.map(De=>new n.P(De[0],De[1])),ae=d.getFreeCameraOptions().position||new n.ac(0,0,0),re=n.ar(o.tileTransform,ae,k),pe=K.map(De=>{const Le=n.ad.vec3.sub(De,De,re);return n.ad.vec3.normalize(Le,Le),new n.as(re,Le)}),Pe=n.at(o,1,d.zoom)*d._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:Y,tilespaceRays:pe,bufferedTilespaceGeometry:Z,bufferedTilespaceBounds:(Ce=n.au(Z),Ce.min.x=n.ay(Ce.min.x,0,n.ai),Ce.min.y=n.ay(Ce.min.y,0,n.ai),Ce.max.x=n.ay(Ce.max.x,0,n.ai),Ce.max.y=n.ay(Ce.max.y,0,n.ai),Ce),tile:o,tileID:o.tileID,pixelToTileUnitsFactor:Pe};var Ce}_bufferedScreenMercator(o,d){const A=Bo(o);if(this._screenRaycastCache[A])return this._screenRaycastCache[A];{let T;return T=d.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(o),d):{polygon:this.bufferedScreenGeometry(o).map(S=>d.pointCoordinate3D(S)),unwrapped:!0},this._screenRaycastCache[A]=T,T}}_bufferedCameraMercator(o,d){const A=Bo(o);if(this._cameraRaycastCache[A])return this._cameraRaycastCache[A];{let T;return T=d.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(o),d):{polygon:this.bufferedCameraGeometry(o).map(S=>d.pointCoordinate3D(S)),unwrapped:!0},this._cameraRaycastCache[A]=T,T}}_projectAndResample(o,d){const A=function(S,E){const k=n.ad.mat4.multiply([],E.pixelMatrix,E.globeMatrix),Z=[0,-n.az,0,1],K=[0,n.az,0,1],Y=[0,0,0,1];n.ad.vec4.transformMat4(Z,Z,k),n.ad.vec4.transformMat4(K,K,k),n.ad.vec4.transformMat4(Y,Y,k);const ae=new n.P(Z[0]/Z[3],Z[1]/Z[3]),re=new n.P(K[0]/K[3],K[1]/K[3]),pe=n.aw(S,ae)&&Z[3]<Y[3],Pe=n.aw(S,re)&&K[3]<Y[3];if(!pe&&!Pe)return null;const Ce=function(ct,dt,vt){for(let Tt=1;Tt<ct.length;Tt++){const Qt=Es(dt.pointCoordinate3D(ct[Tt-1]).x),kt=Es(dt.pointCoordinate3D(ct[Tt]).x);if(vt<0){if(Qt<kt)return{idx:Tt,t:-Qt/(kt-1-Qt)}}else if(kt<Qt)return{idx:Tt,t:(1-Qt)/(kt+1-Qt)}}return null}(S,E,pe?-1:1);if(!Ce)return null;const{idx:De,t:Le}=Ce;let Ke=De>1?Ps(S.slice(0,De),E):[],it=De<S.length?Ps(S.slice(De),E):[];Ke=Ke.map(ct=>new n.P(Es(ct.x),ct.y)),it=it.map(ct=>new n.P(Es(ct.x),ct.y));const tt=[...Ke];tt.length===0&&tt.push(it[it.length-1]);const pt=n.ah(tt[tt.length-1].y,(it.length===0?Ke[0]:it[0]).y,Le);let ut;return ut=pe?[new n.P(0,pt),new n.P(0,0),new n.P(1,0),new n.P(1,pt)]:[new n.P(1,pt),new n.P(1,1),new n.P(0,1),new n.P(0,pt)],tt.push(...ut),it.length===0?tt.push(Ke[0]):tt.push(...it),{polygon:tt.map(ct=>new n.ac(ct.x,ct.y)),unwrapped:!1}}(o,d);if(A)return A;const T=function(S,E){let k=!1,Z=-1/0,K=0;for(let ae=0;ae<S.length-1;ae++)S[ae].x>Z&&(Z=S[ae].x,K=ae);for(let ae=0;ae<S.length-1;ae++){const re=(K+ae)%(S.length-1),pe=S[re],Pe=S[re+1];Math.abs(pe.x-Pe.x)>.5&&(pe.x<Pe.x?(pe.x+=1,re===0&&(S[S.length-1].x+=1)):(Pe.x+=1,re+1===S.length-1&&(S[0].x+=1)),k=!0)}const Y=n.av(E.center.lng);return k&&Y<Math.abs(Y-1)&&S.forEach(ae=>{ae.x-=1}),{polygon:S,unwrapped:k}}(Ps(o,d).map(S=>new n.P(Es(S.x),S.y)),d);return{polygon:T.polygon.map(S=>new n.ac(S.x,S.y)),unwrapped:T.unwrapped}}}function Ps(y,o){return n.ax(y,d=>{const A=o.pointCoordinate3D(d);d.x=A.x,d.y=A.y},1/256)}function Es(y){return y<0?1+y%1:y%1}function Bo(y){return 100*y|0}function Ns(y,o,d,A,T){const S=function(k,Z){if(k)return T(k);if(Z){if(y.url&&Z.tiles&&y.tiles&&delete y.tiles,Z.variants){if(!Array.isArray(Z.variants))return T(new Error("variants must be an array"));for(const Y of Z.variants){if(Y==null||typeof Y!="object"||Y.constructor!==Object)return T(new Error("variant must be an object"));if(!Array.isArray(Y.capabilities))return T(new Error("capabilities must be an array"));if(Y.capabilities.length===1&&Y.capabilities[0]==="meshopt"){Z=n.l(Z,Y);break}}}const K=n.aA(n.l({},Z,y),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding","vector_layers","raster_layers","worldview_options","worldview_default","worldview"]);K.tiles=o.canonicalizeTileset(K,y.url),T(null,K)}},E=function(k,Z,K){if(!k)return null;if(!Z&&!K)return k;K=K||k.worldview_default;const Y=Object.values(k.language||{});if(Y.length===0)return null;const ae=Object.values(k.worldview||{});if(ae.length===0)return null;const re=Y.every(Pe=>Pe===Z),pe=ae.every(Pe=>Pe===K);return re&&pe?k:Z in(k.language_options||{})||K in(k.worldview_options||{})?null:k.language_options&&k.worldview_options?k:null}(y.data,d,A);return E?n.q.frame(()=>S(null,E)):y.url?n.n(o.transformRequest(o.normalizeSourceURL(y.url,null,d,A),n.R.Source),S):n.q.frame(()=>{const{data:k,...Z}=y;S(null,Z)})}class $s{constructor(o,d,A){this.bounds=n.aB.convert(this.validateBounds(o)),this.minzoom=d||0,this.maxzoom=A||24}validateBounds(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}contains(o){const d=Math.pow(2,o.z),A=Math.floor(n.av(this.bounds.getWest())*d),T=Math.floor(n.aC(this.bounds.getNorth())*d),S=Math.ceil(n.av(this.bounds.getEast())*d),E=Math.ceil(n.aC(this.bounds.getSouth())*d);return o.x>=A&&o.x<S&&o.y>=T&&o.y<E}}class pc extends n.E{constructor(o,d,A,T){if(super(),this.id=o,this.dispatcher=A,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,n.l(this,n.aA(d,["url","scheme","tileSize","promoteId"])),this._options=n.l({type:"vector"},d),this._collectResourceTiming=!!d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(T),this._tileWorkers={},this._deduped=new n.aD}load(o){this._loaded=!1,this.fire(new n.A("dataloading",{dataType:"source"}));const d=Array.isArray(this.map._language)?this.map._language.join():this.map._language,A=this.map.getWorldview();this._tileJSONRequest=Ns(this._options,this.map._requestManager,d,A,(T,S)=>{if(this._tileJSONRequest=null,this._loaded=!0,T)d&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${d}`),A&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${A}`),this.fire(new n.z(T));else if(S){if(n.l(this,S),this.hasWorldviews=!!S.worldview_options,S.worldview_default&&(this.worldviewDefault=S.worldview_default),S.vector_layers){this.vectorLayers=S.vector_layers,this.vectorLayerIds=[],this.localizableLayerIds=new Set;for(const E of S.vector_layers)this.vectorLayerIds.push(E.id),S.worldview&&S.worldview[E.source]&&this.localizableLayerIds.add(E.id)}S.bounds&&(this.tileBounds=new $s(S.bounds,this.minzoom,this.maxzoom)),be(S.tiles,this.map._requestManager._customAccessToken),this.fire(new n.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.A("data",{dataType:"source",sourceDataType:"content"}))}o&&o(T)})}loaded(){return this._loaded}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}onAdd(o){this.map=o,this.load()}reload(){this.cancelTileJSONRequest();const o=n.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(o))}setTiles(o){return this._options.tiles=o,this.reload(),this}setUrl(o){return this.url=o,this._options.url=o,this.reload(),this}onRemove(o){this.cancelTileJSONRequest()}serialize(){return n.l({},this._options)}loadTile(o,d){const A=o.tileID.canonical.url(this.tiles,this.scheme),T=this.map._requestManager.normalizeTileURL(A),S=this.map._requestManager.transformRequest(T,n.R.Tile),E=this.map.style?this.map.style.getLut(this.scope):null,k=E?{image:E.image.clone()}:null,Z={request:S,data:void 0,uid:o.uid,tileID:o.tileID,tileZoom:o.tileZoom,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,lut:k,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:n.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:o.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:o.isExtraShadowCaster,tessellationStep:this.map._tessellationStep,scaleFactor:this.map.getScaleFactor()};if(this.hasWorldviews&&n.f(A)&&(Z.worldview=this.map.getWorldview()||this.worldviewDefault,Z.localizableLayerIds=this.localizableLayerIds),Z.request.collectResourceTiming=this._collectResourceTiming,o.actor&&o.state!=="expired")o.state==="loading"?o.reloadCallback=d:o.request=o.actor.send("reloadTile",Z,K.bind(this));else if(o.actor=this._tileWorkers[T]=this._tileWorkers[T]||this.dispatcher.getActor(),this.dispatcher.ready)o.request=o.actor.send("loadTile",Z,K.bind(this),void 0,!0);else{const Y=n.aE.call({deduped:this._deduped},Z,(ae,re)=>{ae||!re?K.call(this,ae):(Z.data={cacheControl:re.cacheControl,expires:re.expires,rawData:re.rawData.slice(0)},o.actor&&o.actor.send("loadTile",Z,K.bind(this),void 0,!0))},!0);o.request={cancel:Y}}function K(Y,ae){return delete o.request,o.aborted?d(null):Y&&Y.status!==404?d(Y):(ae&&ae.resourceTiming&&(o.resourceTiming=ae.resourceTiming),this.map._refreshExpiredTiles&&ae&&o.setExpiryData(ae),o.loadVectorData(ae,this.map.painter),n.aF(this.dispatcher),d(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(o,d){o.actor&&o.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id,scope:this.scope}),o.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class tl extends n.E{constructor(o,d,A,T){super(),this.id=o,this.dispatcher=A,this.setEventedParent(T),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=n.l({type:"raster"},d),n.l(this,n.aA(d,["url","scheme","tileSize"]))}load(o){this._loaded=!1,this.fire(new n.A("dataloading",{dataType:"source"})),this._tileJSONRequest=Ns(this._options,this.map._requestManager,null,null,(d,A)=>{this._tileJSONRequest=null,this._loaded=!0,d?this.fire(new n.z(d)):A&&(n.l(this,A),A.raster_layers&&(this.rasterLayers=A.raster_layers,this.rasterLayerIds=this.rasterLayers.map(T=>T.id)),A.bounds&&(this.tileBounds=new $s(A.bounds,this.minzoom,this.maxzoom)),be(A.tiles),this.fire(new n.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.A("data",{dataType:"source",sourceDataType:"content"}))),o&&o(d)})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}reload(){this.cancelTileJSONRequest();const o=n.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(o))}setTiles(o){return this._options.tiles=o,this.reload(),this}setUrl(o){return this.url=o,this._options.url=o,this.reload(),this}onRemove(o){this.cancelTileJSONRequest()}serialize(){return n.l({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o,d){const A=n.q.devicePixelRatio>=2,T=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),A,this.tileSize);o.request=n.o(this.map._requestManager.transformRequest(T,n.R.Tile),(S,E,k,Z)=>(delete o.request,o.aborted?(o.state="unloaded",d(null)):S?(o.state="errored",d(S)):E?(this.map._refreshExpiredTiles&&o.setExpiryData({cacheControl:k,expires:Z}),o.setTexture(E,this.map.painter),o.state="loaded",n.aF(this.dispatcher),void d(null)):d(null)))}abortTile(o,d){o.request&&(o.request.cancel(),delete o.request),d&&d()}unloadTile(o,d){o.texture&&o.texture instanceof n.T?(o.destroy(!0),o.texture&&o.texture instanceof n.T&&this.map.painter.saveTileTexture(o.texture)):o.destroy(),d&&d()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Ui extends tl{constructor(o,d,A,T){super(o,d,A,T),this.type="raster-array",this.maxzoom=22,this.partial=!0,this.iconsets={},this._options=n.l({type:"raster-array"},d)}triggerRepaint(o){const d=this.map.painter._terrain,A=this.map.style.getSourceCache(this.id);d&&d.enabled&&A&&d._clearRenderCacheForTile(A.id,o.tileID),this.map.triggerRepaint()}loadTile(o,d){const A=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),T=this.map._requestManager.transformRequest(A,n.R.Tile),S={request:T,uid:o.uid,tileID:o.tileID,type:this.type,source:this.id,scope:this.scope,partial:this.partial};o.source=this.id,o.scope=this.scope,o.requestParams=T,o.actor||(o.actor=this.dispatcher.getActor());const E=(k,Z,K,Y)=>{if(delete o.request,o.aborted)return o.state="unloaded",d(null);if(k)return k.name==="AbortError"?void 0:(o.state="errored",d(k));if(this.map._refreshExpiredTiles&&Z&&o.setExpiryData({cacheControl:K,expires:Y}),this.partial)o.state="empty";else{if(!Z)return d(null);o.state="loaded",o._isHeaderLoaded=!0,o._mrt=Z;const ae=new Map;for(const re in o._mrt.layers){const pe=o.getLayer(re);if(pe)for(const Pe of pe.getBandList()){const{bytes:Ce,tileSize:De,buffer:Le}=pe.getBandView(Pe),Ke=De+2*Le,it={data:new n.r({width:Ke,height:Ke},Ce),pixelRatio:2,sdf:!1,usvg:!1,version:0};ae.set(`${re}/${Pe}`,it)}}for(const re in this.iconsets)this.iconsets[re].addIcons(ae)}d(null)};o.request=this.partial?o.fetchHeader(void 0,E.bind(this)):o.actor.send("loadTile",S,E.bind(this),void 0,!0)}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(o,d){const A=o.texture;A&&A instanceof n.T?(o.destroy(!0),this.map.painter.saveTileTexture(A)):(o.destroy(),o.flushQueues(),o._isHeaderLoaded=!1,delete o._mrt,delete o.textureDescriptor),o.fbo&&(o.fbo.destroy(),delete o.fbo),delete o.request,delete o.requestParams,delete o.neighboringTiles,o.state="unloaded"}prepareTile(o,d,A){o._isHeaderLoaded&&(o.state!=="empty"&&(o.state="reloading"),o.fetchBand(d,A,(T,S)=>{if(T)return o.state="errored",this.fire(new n.z(T)),void this.triggerRepaint(o);S&&(o._isHeaderLoaded=!0,o.setTexture(S,this.map.painter),o.state="loaded",this.triggerRepaint(o))}))}getInitialBand(o){if(!this.rasterLayers)return 0;const d=this.rasterLayers.find(({id:S})=>S===o),A=d&&d.fields,T=A&&A.bands&&A.bands;return T?T[0]:0}getTextureDescriptor(o,d,A){if(!o)return;const T=d.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!T)return;let S=null;d instanceof n.aI?S=d.paint.get("raster-array-band"):d instanceof n.aJ&&(S=d.paint.get("raster-particle-array-band"));const E=S||this.getInitialBand(T);if(E!=null)if(o.textureDescriptor){if(!o.updateNeeded(T,E)||A)return Object.assign({},o.textureDescriptor,{texture:o.texture})}else this.prepareTile(o,T,E)}addIconset(o,d){this.iconsets[o]=d,this.partial=!1}}const Xl={vector:pc,raster:tl,"raster-dem":class extends tl{constructor(y,o,d,A){super(y,o,d,A),this.type="raster-dem",this.maxzoom=22,this._options=n.l({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox"}loadTile(y,o){const d=this.map._requestManager.normalizeTileURL(y.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function A(T,S){T&&(y.state="errored",o(T)),S&&(y.dem=S,y.dem.onDeserialize(),y.needsHillshadePrepare=!0,y.needsDEMTextureUpload=!0,y.state="loaded",o(null))}y.request=n.o(this.map._requestManager.transformRequest(d,n.R.Tile),(function(T,S,E,k){if(delete y.request,y.aborted)y.state="unloaded",o(null);else if(T)y.state="errored",o(T);else if(S){this.map._refreshExpiredTiles&&y.setExpiryData({cacheControl:E,expires:k});const Z=ImageBitmap&&S instanceof ImageBitmap&&n.t(),K=1-(S.width-n.aG(S.width))/2;K<1||y.neighboringTiles||(y.neighboringTiles=this._getNeighboringTiles(y.tileID));const Y=Z?S:n.q.getImageData(S,K),ae={uid:y.uid,tileID:y.tileID,source:this.id,type:this.type,scope:this.scope,rawImageData:Y,encoding:this.encoding,padding:K};y.actor&&y.state!=="expired"||(y.actor=this.dispatcher.getActor(),y.actor.send("loadTile",ae,A.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(y){const o=y.canonical,d=Math.pow(2,o.z),A=(o.x-1+d)%d,T=o.x===0?y.wrap-1:y.wrap,S=(o.x+1+d)%d,E=o.x+1===d?y.wrap+1:y.wrap,k={};return k[new n.aH(y.overscaledZ,T,o.z,A,o.y).key]={backfilled:!1},k[new n.aH(y.overscaledZ,E,o.z,S,o.y).key]={backfilled:!1},o.y>0&&(k[new n.aH(y.overscaledZ,T,o.z,A,o.y-1).key]={backfilled:!1},k[new n.aH(y.overscaledZ,y.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},k[new n.aH(y.overscaledZ,E,o.z,S,o.y-1).key]={backfilled:!1}),o.y+1<d&&(k[new n.aH(y.overscaledZ,T,o.z,A,o.y+1).key]={backfilled:!1},k[new n.aH(y.overscaledZ,y.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},k[new n.aH(y.overscaledZ,E,o.z,S,o.y+1).key]={backfilled:!1}),k}},"raster-array":Ui,geojson:class extends n.E{constructor(y,o,d,A){super(),this.id=y,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=d.getActor(),this.setEventedParent(A),this._data=o.data,this._options=n.l({},o),this._collectResourceTiming=o.collectResourceTiming,o.maxzoom!==void 0&&(this.maxzoom=o.maxzoom),o.minzoom!==void 0&&(this.minzoom=o.minzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId;const T=n.ai/this.tileSize;this.workerOptions=n.l({source:this.id,scope:this.scope,cluster:o.cluster||!1,geojsonVtOptions:{buffer:(o.buffer!==void 0?o.buffer:128)*T,tolerance:(o.tolerance!==void 0?o.tolerance:.375)*T,extent:n.ai,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:o.clusterMaxZoom!==void 0?o.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,o.clusterMinPoints||2),extent:n.ai,radius:(o.clusterRadius!==void 0?o.clusterRadius:50)*T,log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter,dynamic:o.dynamic},o.workerOptions)}onAdd(y){this.map=y,this.setData(this._data)}setData(y){return this._data=y,this._updateWorkerData(),this}updateData(y){if(!this._options.dynamic)return this.fire(new n.z(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")));if(typeof y!="string"&&(y.type==="Feature"&&(y={type:"FeatureCollection",features:[y]}),y.type!=="FeatureCollection"))return this.fire(new n.z(new Error("Data to update should be a feature or a feature collection.")));if(this._coalesce&&typeof y!="string"&&typeof this._data!="string"&&this._data.type==="FeatureCollection"){const o=new Map;for(const d of this._data.features)o.set(d.id,d);for(const d of y.features)o.set(d.id,d);this._data.features=[...o.values()]}else this._data=y;return this._updateWorkerData(!0),this}getClusterExpansionZoom(y,o){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:y,source:this.id,scope:this.scope},o),this}getClusterChildren(y,o){return this.actor.send("geojson.getClusterChildren",{clusterId:y,source:this.id,scope:this.scope},o),this}getClusterLeaves(y,o,d,A){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:y,limit:o,offset:d},A),this}_updateWorkerData(y=!1){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new n.A("dataloading",{dataType:"source"})),this._loaded=!1;const o=n.l({append:y},this.workerOptions);o.scope=this.scope;const d=this._data;typeof d=="string"?(o.request=this.map._requestManager.transformRequest(n.q.resolveURL(d),n.R.Source),o.request.collectResourceTiming=this._collectResourceTiming):o.data=JSON.stringify(d),this._pendingLoad=this.actor.send(`${this.type}.loadData`,o,(A,T)=>{if(this._loaded=!0,this._pendingLoad=null,A)this.fire(new n.z(A));else{const S={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&T&&T.resourceTiming&&T.resourceTiming[this.id]&&(S.resourceTiming=T.resourceTiming[this.id]),y&&(this._partialReload=!0),this.fire(new n.A("data",S)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(y),this._coalesce=!1)})}loaded(){return this._loaded}reload(){const y=n.C(this.id,this.scope);this.map.style.clearSource(y),this._updateWorkerData()}loadTile(y,o){const d=y.actor?"reloadTile":"loadTile";y.actor=this.actor;const A=this.map.style?this.map.style.getLut(this.scope):null,T=A?{image:A.image.clone()}:null,S=this._partialReload,E={type:this.type,uid:y.uid,tileID:y.tileID,tileZoom:y.tileZoom,zoom:y.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:T,scope:this.scope,pixelRatio:n.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,scaleFactor:this.map.getScaleFactor(),partial:S};y.request=this.actor.send(d,E,(k,Z)=>S&&!Z?(y.state="loaded",o(null)):(delete y.request,y.destroy(),y.aborted?o(null):k?o(k):(y.loadVectorData(Z,this.map.painter,d==="reloadTile"),o(null))),void 0,d==="loadTile")}abortTile(y){y.request&&(y.request.cancel(),delete y.request),y.aborted=!0}unloadTile(y,o){this.actor.send("removeTile",{uid:y.uid,type:this.type,source:this.id,scope:this.scope}),y.destroy()}onRemove(y){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return n.l({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends n.aK{constructor(y,o,d,A){super(y,o,d,A),this.roundZoom=!0,this.type="video",this.options=o}load(){this._loaded=!1;const y=this.options;this.urls=[];for(const o of y.urls)this.urls.push(this.map._requestManager.transformRequest(o,n.R.Source).url);n.aL(this.urls,(o,d)=>{this._loaded=!0,o?this.fire(new n.z(o)):d&&(this.video=d,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(y){if(this.video){const o=this.video.seekable;y<o.start(0)||y>o.end(0)?this.fire(new n.z(new n.V(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=y}}getVideo(){return this.video}onAdd(y){this.map||(this.map=y,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const y=this.map.painter.context,o=y.gl;this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new n.T(y,this.video,o.RGBA8),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(y)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:n.aK,model:class extends n.E{constructor(y,o,d,A){super(),this.id=y,this.type="model",this.models=[],this._loaded=!1,this._options=o}load(){const y=[];for(const o in this._options.models){const d=this._options.models[o],A=n.aN(this.map._requestManager.transformRequest(d.uri,n.R.Model).url).then(T=>{if(!T)return;const S=n.aO(T),E=new n.aP(o,d.position,d.orientation,S);E.computeBoundsAndApplyParent(),this.models.push(E)}).catch(T=>{this.fire(new n.z(new Error(`Could not load model ${o} from ${d.uri}: ${T.message}`)))});y.push(A)}return Promise.allSettled(y).then(()=>{this._loaded=!0,this.fire(new n.A("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(o=>{this.fire(new n.z(new Error(`Could not load models: ${o.message}`)))})}onAdd(y){this.map=y,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(y,o){}serialize(){return{type:"model"}}},"batched-model":class extends n.E{constructor(y,o,d,A){super(),this.type="batched-model",this.id=y,this.tileSize=512,this._options=o,this.tiles=this._options.tiles,this.maxzoom=o.maxzoom||19,this.minzoom=o.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=d,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(A)}onAdd(y){this.map=y,this.load()}reload(){this.cancelTileJSONRequest();const y=n.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(y))}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}load(y){this._loaded=!1,this.fire(new n.A("dataloading",{dataType:"source"}));const o=Array.isArray(this.map._language)?this.map._language.join():this.map._language,d=this.map.getWorldview();this._tileJSONRequest=Ns(this._options,this.map._requestManager,o,d,(A,T)=>{this._tileJSONRequest=null,this._loaded=!0,A?(o&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${o}`),d&&d.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${d}`),this.fire(new n.z(A))):T&&(n.l(this,T),T.bounds&&(this.tileBounds=new $s(T.bounds,this.minzoom,this.maxzoom)),be(T.tiles,this.map._requestManager._customAccessToken),this.fire(new n.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.A("data",{dataType:"source",sourceDataType:"content"}))),y&&y(A)})}hasTransition(){return!1}hasTile(y){return!this.tileBounds||this.tileBounds.contains(y.canonical)}loaded(){return this._loaded}loadTile(y,o){const d=this.map._requestManager.normalizeTileURL(y.tileID.canonical.url(this.tiles,this.scheme)),A={request:this.map._requestManager.transformRequest(d,n.R.Tile),data:void 0,uid:y.uid,tileID:y.tileID,tileZoom:y.tileZoom,zoom:y.tileID.overscaledZ,tileSize:this.tileSize*y.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:y.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,pixelRatio:n.q.devicePixelRatio,promoteId:this.promoteId};if(y.actor&&y.state!=="expired")if(y.state==="loading")y.reloadCallback=o;else{if(y.buckets){const S=Object.values(y.buckets);for(const E of S)E.dirty=!0;return void(y.state="loaded")}y.request=y.actor.send("reloadTile",A,T.bind(this))}else y.actor=this.dispatcher.getActor(),y.request=y.actor.send("loadTile",A,T.bind(this),void 0,!0);function T(S,E){return y.aborted?o(null):S&&S.status!==404?o(S):(this.map._refreshExpiredTiles&&E&&y.setExpiryData(E),y.loadModelData(E,this.map.painter),y.state="loaded",void o(null))}}serialize(){return n.l({},this._options)}},canvas:class extends n.aK{constructor(y,o,d,A){super(y,o,d,A),o.coordinates?Array.isArray(o.coordinates)&&o.coordinates.length===4&&!o.coordinates.some(T=>!Array.isArray(T)||T.length!==2||T.some(S=>typeof S!="number"))||this.fire(new n.z(new n.V(`sources.${y}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new n.z(new n.V(`sources.${y}`,null,'missing required property "coordinates"'))),o.animate&&typeof o.animate!="boolean"&&this.fire(new n.z(new n.V(`sources.${y}`,null,'optional "animate" property must be a boolean value'))),o.canvas?typeof o.canvas=="string"||o.canvas instanceof HTMLCanvasElement||this.fire(new n.z(new n.V(`sources.${y}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new n.z(new n.V(`sources.${y}`,null,'missing required property "canvas"'))),this.options=o,this.animate=o.animate===void 0||o.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new n.z(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(y){this.map=y,this.load(),this.canvas&&this.animate&&this.play()}onRemove(y){this.pause()}prepare(){let y=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,y=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,y=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const o=this.map.painter.context;this.texture?!y&&!this._playing||this.texture instanceof n.aM||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new n.T(o,this.canvas,o.gl.RGBA8,{premultiply:!0}),this._prepareData(o)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const y of[this.canvas.width,this.canvas.height])if(isNaN(y)||y<=0)return!0;return!1}},custom:class extends n.E{constructor(y,o,d,A){super(),this.id=y,this.type="custom",this._dataType="raster",this._dispatcher=d,this._implementation=o,this.setEventedParent(A),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new n.z(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new n.z(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new $s(this._implementation.bounds,this.minzoom,this.maxzoom)),o.update=this._update.bind(this),o.clearTiles=this._clearTiles.bind(this),o.coveringTiles=this._coveringTiles.bind(this),n.l(this,n.aA(o,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return n.aA(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new n.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.A("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(y){this.map=y,this._loaded=!1,this.fire(new n.A("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(y),this.load()}onRemove(y){this._implementation.onRemove&&this._implementation.onRemove(y)}hasTile(y){if(this._implementation.hasTile){const{x:o,y:d,z:A}=y.canonical;return this._implementation.hasTile({x:o,y:d,z:A})}return!this.tileBounds||this.tileBounds.contains(y.canonical)}loadTile(y,o){const{x:d,y:A,z:T}=y.tileID.canonical,S=new AbortController;y.request=Promise.resolve(this._implementation.loadTile({x:d,y:A,z:T},{signal:S.signal})).then((function(E){return delete y.request,y.aborted?(y.state="unloaded",o(null)):E===void 0?(y.state="errored",o(null)):E===null?(this.loadTileData(y,{width:this.tileSize,height:this.tileSize,data:null}),y.state="loaded",o(null)):function(k){return k instanceof ImageData||k instanceof HTMLCanvasElement||k instanceof ImageBitmap||k instanceof HTMLImageElement}(E)?(this.loadTileData(y,E),y.state="loaded",void o(null)):(y.state="errored",o(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(E=>{E.name!=="AbortError"&&(y.state="errored",o(E))}),y.request.cancel=()=>S.abort()}loadTileData(y,o){y.setTexture(o,this.map.painter)}unloadTile(y,o){if(y.texture&&y.texture instanceof n.T?(y.destroy(!0),y.texture&&y.texture instanceof n.T&&this.map.painter.saveTileTexture(y.texture)):y.destroy(),this._implementation.unloadTile){const{x:d,y:A,z:T}=y.tileID.canonical;this._implementation.unloadTile({x:d,y:A,z:T})}o&&o()}abortTile(y,o){y.request&&y.request.cancel&&(y.request.cancel(),delete y.request),o&&o()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(y=>({x:y.canonical.x,y:y.canonical.y,z:y.canonical.z}))}_clearTiles(){const y=n.C(this.id,this.scope);this.map.style.clearSource(y)}_update(){this.fire(new n.A("data",{dataType:"source",sourceDataType:"content"}))}}},jo=function(y,o,d,A){const T=new Xl[o.type](y,o,d,A);if(T.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${T.id}`);return n.aQ(["load","abort","unload","serialize","prepare"],T),T};function Pd(y,o,d=""){return`${d}:${o.id||""}:${o.layer.id}:${function(A){if("layerId"in A)return`layer:${A.layerId}`;{const{featuresetId:T,importId:S}=A;return`featureset:${T}${S?`:import:${S}`:""}`}}(y.target)}`}function kc(y,o,d,A=""){if(y.uniqueFeatureID){const T=Pd(y,o,A);if(d.has(T))return!0;d.add(T)}return!1}function fh(y,o,d,A,T=!1){const S=o.sourceCache.transform,E=o.sourceCache.tilesIn(y,o.has3DLayers,T);E.sort(Al);const k=[];for(const Z of E){const K=Z.tile.queryRenderedFeatures(o,Z,d,A,S,T);Object.keys(K).length&&k.push({wrappedTileID:Z.tile.tileID.wrapped().key,queryResults:K})}return k.length===0?{}:function(Z){const K={},Y={};for(const ae of Z){const re=ae.queryResults,pe=ae.wrappedTileID,Pe=Y[pe]=Y[pe]||{};for(const Ce in re){const De=re[Ce],Le=Pe[Ce]=Pe[Ce]||{},Ke=K[Ce]=K[Ce]||[];for(const it of De)Le[it.featureIndex]||(Le[it.featureIndex]=!0,Ke.push(it))}}return K}(k)}function wu(y,o,d,A,T){const S={},E=A.queryRenderedSymbols(y),k=[];for(const Z of Object.keys(E).map(Number))k.push(T[Z]);k.sort(Al);for(const Z of k){const K=Z.featureIndex.lookupSymbolFeatures(E[Z.bucketInstanceId],Z.bucketIndex,Z.sourceLayerIndex,o,d);for(const Y in K){const ae=S[Y]=S[Y]||[],re=K[Y];re.sort((pe,Pe)=>{const Ce=Z.featureSortOrder;if(Ce){const De=Ce.indexOf(pe.featureIndex);return Ce.indexOf(Pe.featureIndex)-De}return Pe.featureIndex-pe.featureIndex});for(const pe of re)ae.push(pe)}}return S}function Uc(y,o){const d=y.getRenderableIds().map(S=>y.getTileByID(S)),A=[],T={};for(let S=0;S<d.length;S++){const E=d[S],k=E.tileID.canonical.key;T[k]||(T[k]=!0,E.querySourceFeatures(A,o))}return A}function Al(y,o){const d=y.tileID,A=o.tileID;return d.overscaledZ-A.overscaledZ||d.canonical.y-A.canonical.y||d.wrap-A.wrap||d.canonical.x-A.canonical.x}function no(y,o){const d={};if(!o)return d;for(const A of y){const T=A.layerIds.map(S=>o.getLayer(S)).filter(Boolean);if(T.length!==0){A.layers=T,A.stateDependentLayerIds&&(A.stateDependentLayers=A.stateDependentLayerIds.map(S=>T.filter(E=>E.id===S)[0]));for(const S of T)d[S.fqid]=A}}return d}const Go=32,Jl=33,Ru=new Uint16Array(8184);for(let y=0;y<2046;y++){let o=y+2,d=0,A=0,T=0,S=0,E=0,k=0;for(1&o?T=S=E=Go:d=A=k=Go;(o>>=1)>1;){const K=d+T>>1,Y=A+S>>1;1&o?(T=d,S=A,d=E,A=k):(d=T,A=S,T=E,S=k),E=K,k=Y}const Z=4*y;Ru[Z+0]=d,Ru[Z+1]=A,Ru[Z+2]=T,Ru[Z+3]=S}const mo=new Uint16Array(2178),Zo=new Uint8Array(1089),Ed=new Uint16Array(1089);function Ku(y){return y===0?-.03125:y===32?.03125:0}const Rf={type:2,extent:n.ai,loadGeometry:()=>[[new n.P(0,0),new n.P(n.ai+1,0),new n.P(n.ai+1,n.ai+1),new n.P(0,n.ai+1),new n.P(0,0)]]};class Ql{constructor(o,d,A,T,S){this.tileID=o,this.uid=n.aW(),this.uses=0,this.tileSize=d,this.tileZoom=A,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=S,T&&T.style&&(this._lastUpdatedBrightness=T.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",T&&T.transform&&(this.projection=T.transform.projection)}registerFadeDuration(o){const d=o+this.timeAdded;d<n.q.now()||this.fadeEndTime&&d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=n.aR(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(o,d,A){if(this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=no(o.buckets,d.style),this.hasSymbolBuckets=!1;for(const T in this.buckets){const S=this.buckets[T];if(S instanceof n.aY){if(this.hasSymbolBuckets=!0,!A)break;S.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const T in this.buckets){const S=this.buckets[T];if(S instanceof n.aY&&S.hasRTLText){this.hasRTLText=!0,n.aZ();break}}this.queryPadding=0;for(const T in this.buckets){const S=this.buckets[T],E=d.style.getOwnLayer(T);if(!E)continue;const k=E.queryRadius(S);this.queryPadding=Math.max(this.queryPadding,k)}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage),o.lineAtlas&&(this.lineAtlas=o.lineAtlas),this._lastUpdatedBrightness=o.brightness}else this.collisionBoxArray=new n.aX}unloadVectorData(){if(this.hasData()){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}loadModelData(o,d,A){o&&(o.resourceTiming&&(this.resourceTiming=o.resourceTiming),this.buckets=Object.assign({},this.buckets,no(o.buckets,d.style)),o.featureIndex&&(this.latestFeatureIndex=o.featureIndex))}getBucket(o){return this.buckets[o.fqid]}upload(o){for(const T in this.buckets){const S=this.buckets[T];S.uploadPending()&&S.upload(o)}const d=o.gl,A=this.imageAtlas;A&&!A.uploaded&&(this.imageAtlasTexture=new n.T(o,A.image,d.RGBA8,{useMipmap:!!A.patternPositions.size}),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new n.T(o,this.glyphAtlasImage,d.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new n.T(o,this.lineAtlas.image,d.R8),this.lineAtlas.uploaded=!0)}prepare(o,d,A){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture,A),!d||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const T=d.style.getBrightness();(this._lastUpdatedBrightness||T)&&(this._lastUpdatedBrightness&&T&&Math.abs(this._lastUpdatedBrightness-T)<.001||(this.updateBuckets(d,this._lastUpdatedBrightness!==T),this._lastUpdatedBrightness=T))}queryRenderedFeatures(o,d,A,T,S,E){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData&&!this.latestFeatureIndex.is3DTile)return{};const k=function(Z,K){const Y=n.ad.mat4.fromScaling([],[.5*Z.width,.5*-Z.height,1]);return n.ad.mat4.translate(Y,Y,[1,-1,0]),n.ad.mat4.multiply(Y,Y,Z.calculateProjMatrix(K.toUnwrapped())),Float32Array.from(Y)}(S,this.tileID);return this.latestFeatureIndex.query(o,{tilespaceGeometry:d,pixelPosMatrix:k,transform:T,availableImages:A,tileTransform:this.tileTransform})}querySourceFeatures(o,d){const A=this.latestFeatureIndex;if(!A||!A.rawTileData)return;const T=A.loadVTLayers(),S=d?d.sourceLayer:"",E=T._geojsonTileLayer||T[S];if(!E)return;const k=n.a_(d&&d.filter),{z:Z,x:K,y:Y}=this.tileID.canonical,ae={z:Z,x:K,y:Y};for(let re=0;re<E.length;re++){const pe=E.feature(re);if(k.needGeometry){const De=n.a$(pe,!0);if(!k.filter(new n.aa(this.tileID.overscaledZ),De,this.tileID.canonical))continue}else if(!k.filter(new n.aa(this.tileID.overscaledZ),pe))continue;const Pe=A.getId(pe,S),Ce=new n.b0(pe,Z,K,Y,Pe);Ce.tile=ae,o.push(Ce)}}loaded(){return this.state==="loaded"||this.state==="errored"}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!this.imageAtlas.patternPositions.size}setExpiryData(o){const d=this.expirationTime;if(o.cacheControl){const A=n.b1(o.cacheControl);A["max-age"]&&(this.expirationTime=Date.now()+1e3*A["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const A=Date.now();let T=!1;if(this.expirationTime>A)T=!1;else if(d)if(this.expirationTime<d)T=!0;else{const S=this.expirationTime-d;S?this.expirationTime=A+Math.max(S,3e4):T=!0}else T=!0;T?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}refreshFeatureState(o){this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)&&o&&this.updateBuckets(o)}updateBuckets(o,d){if(!this.latestFeatureIndex||!o.style)return;const A=this.latestFeatureIndex.loadVTLayers(),T=o.style.listImages(),S=o.style.getBrightness();for(const E in this.buckets){if(!o.style.hasLayer(E))continue;const k=this.buckets[E],Z=k.layers[0],K=Z.sourceLayer||"_geojsonTileLayer",Y=A[K],ae=o.style.getLayerSourceCache(Z);let re={};ae&&(re=ae._state.getState(K,void 0));const pe=this.imageAtlas?Object.fromEntries(this.imageAtlas.patternPositions):{},Pe=Object.keys(re).length>0&&!d;Pe&&!k.stateDependentLayers.length&&!d||k.update(re,Y,T,pe,Pe?k.stateDependentLayers:k.layers,d,S),(k instanceof n.b2||k instanceof n.b3)&&o._terrain&&o._terrain.enabled&&ae&&k.uploadPending()&&o._terrain._clearRenderCacheForTile(ae.id,this.tileID);const Ce=o&&o.style&&o.style.getOwnLayer(E);Ce&&(this.queryPadding=Math.max(this.queryPadding,Ce.queryRadius(k)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<n.q.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=n.q.now()+o}setTexture(o,d){const A=d.context,T=A.gl;this.texture=this.texture||d.getTileTexture(o.width),this.texture&&this.texture instanceof n.T?this.texture.update(o):(this.texture=new n.T(A,o,T.RGBA8,{useMipmap:!0}),this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE))}setDependencies(o,d){const A={};for(const T of d)A[T]=!0;this.dependencies[o]=A}hasDependency(o,d){for(const A of o){const T=this.dependencies[A];if(T){for(const S of d)if(T[S])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(o,d){if(!d||d.name==="mercator"||this._tileDebugBuffer)return;const A=n.b4(Rf,this.tileID.canonical,this.tileTransform)[0],T=new n.b5,S=new n.b6;for(let E=0;E<A.length;E++){const{x:k,y:Z}=A[E];T.emplaceBack(k,Z),S.emplaceBack(E)}S.emplaceBack(0),this._tileDebugIndexBuffer=o.createIndexBuffer(S),this._tileDebugBuffer=o.createVertexBuffer(T,n.b7.members),this._tileDebugSegments=n.b8.simpleSegment(0,0,T.length,S.length)}_makeTileBoundsBuffers(o,d){if(this._tileBoundsBuffer||!d||d.name==="mercator")return;const A=n.b4(Rf,this.tileID.canonical,this.tileTransform)[0];let T,S;if(this.isRaster){const E=function(k,Z){const K=n.aR(k,Z),Y=Math.pow(2,k.z);for(let De=0;De<Jl;De++)for(let Le=0;Le<Jl;Le++){const Ke=n.aS((k.x+(Le+Ku(Le))/Go)/Y),it=n.aT((k.y+(De+Ku(De))/Go)/Y),tt=Z.project(Ke,it),pt=De*Jl+Le;mo[2*pt+0]=Math.round((tt.x*K.scale-K.x)*n.ai),mo[2*pt+1]=Math.round((tt.y*K.scale-K.y)*n.ai)}Zo.fill(0),Ed.fill(0);for(let De=2045;De>=0;De--){const Le=4*De,Ke=Ru[Le+0],it=Ru[Le+1],tt=Ru[Le+2],pt=Ru[Le+3],ut=Ke+tt>>1,ct=it+pt>>1,dt=ut+ct-it,vt=ct+Ke-ut,Tt=it*Jl+Ke,Qt=pt*Jl+tt,kt=ct*Jl+ut,ra=Math.hypot((mo[2*Tt+0]+mo[2*Qt+0])/2-mo[2*kt+0],(mo[2*Tt+1]+mo[2*Qt+1])/2-mo[2*kt+1])>=16;Zo[kt]=Zo[kt]||(ra?1:0),De<1022&&(Zo[kt]=Zo[kt]||Zo[(it+vt>>1)*Jl+(Ke+dt>>1)]||Zo[(pt+vt>>1)*Jl+(tt+dt>>1)])}const ae=new n.aU,re=new n.aV;let pe=0;function Pe(De,Le){const Ke=Le*Jl+De;return Ed[Ke]===0&&(ae.emplaceBack(mo[2*Ke+0],mo[2*Ke+1],De*n.ai/Go,Le*n.ai/Go),Ed[Ke]=++pe),Ed[Ke]-1}function Ce(De,Le,Ke,it,tt,pt){const ut=De+Ke>>1,ct=Le+it>>1;if(Math.abs(De-tt)+Math.abs(Le-pt)>1&&Zo[ct*Jl+ut])Ce(tt,pt,De,Le,ut,ct),Ce(Ke,it,tt,pt,ut,ct);else{const dt=Pe(De,Le),vt=Pe(Ke,it),Tt=Pe(tt,pt);re.emplaceBack(dt,vt,Tt)}}return Ce(0,0,Go,Go,Go,0),Ce(Go,Go,0,0,0,Go),{vertices:ae,indices:re}}(this.tileID.canonical,d);T=E.vertices,S=E.indices}else{T=new n.aU,S=new n.aV;for(const{x:k,y:Z}of A)T.emplaceBack(k,Z,0,0);const E=n.b9(T.int16,void 0,4);for(let k=0;k<E.length;k+=3)S.emplaceBack(E[k],E[k+1],E[k+2])}this._tileBoundsBuffer=o.createVertexBuffer(T,n.ba.members),this._tileBoundsIndexBuffer=o.createIndexBuffer(S),this._tileBoundsSegments=n.b8.simpleSegment(0,0,T.length,S.length)}_makeGlobeTileDebugBuffers(o,d){const A=d.projection;if(!A||A.name!=="globe"||d.freezeTileCoverage)return;const T=this.tileID.canonical,S=n.bb(T,d),E=n.bc(S),k=n.ag(d.zoom);let Z;k>0&&(Z=n.ad.mat4.invert(new Float64Array(16),d.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(o,T,d,E,Z,k),this._makeGlobeTileDebugTextBuffer(o,T,d,E,Z,k)}_globePoint(o,d,A,T,S,E,k){let Z=n.bd(o,d,A);if(E){const K=1<<A.z,Y=n.av(T.center.lng),ae=n.aC(T.center.lat),re=(A.x+.5)/K-Y;let pe=0;re>.5?pe=-1:re<-.5&&(pe=1);let Pe=(o/n.ai+A.x)/K+pe,Ce=(d/n.ai+A.y)/K;Pe=(Pe-Y)*T._pixelsPerMercatorPixel+Y,Ce=(Ce-ae)*T._pixelsPerMercatorPixel+ae;const De=[Pe*T.worldSize,Ce*T.worldSize,0];n.ad.vec3.transformMat4(De,De,E),Z=n.be(Z,De,k)}return n.ad.vec3.transformMat4(Z,Z,S)}_makeGlobeTileDebugBorderBuffer(o,d,A,T,S,E){const k=new n.b5,Z=new n.b6,K=new n.bf,Y=(re,pe,Pe,Ce,De)=>{const Le=(Pe-re)/(De-1),Ke=(Ce-pe)/(De-1),it=k.length;for(let tt=0;tt<De;tt++){const pt=re+tt*Le,ut=pe+tt*Ke;k.emplaceBack(pt,ut);const ct=this._globePoint(pt,ut,d,A,T,S,E);K.emplaceBack(ct[0],ct[1],ct[2]),Z.emplaceBack(it+tt)}},ae=n.ai;Y(0,0,ae,0,16),Y(ae,0,ae,ae,16),Y(ae,ae,0,ae,16),Y(0,ae,0,0,16),this._tileDebugIndexBuffer=o.createIndexBuffer(Z),this._tileDebugBuffer=o.createVertexBuffer(k,n.b7.members),this._globeTileDebugBorderBuffer=o.createVertexBuffer(K,n.bg.members),this._tileDebugSegments=n.b8.simpleSegment(0,0,k.length,Z.length)}_makeGlobeTileDebugTextBuffer(o,d,A,T,S,E){const k=n.ai/4,Z=new n.b5,K=new n.aV,Y=new n.bf,ae=25;K.reserve(32),Z.reserve(ae),Y.reserve(ae);const re=(pe,Pe)=>ae*pe+Pe;for(let pe=0;pe<ae;pe++){const Pe=pe*k;for(let Ce=0;Ce<ae;Ce++){const De=Ce*k;Z.emplaceBack(De,Pe);const Le=this._globePoint(De,Pe,d,A,T,S,E);Y.emplaceBack(Le[0],Le[1],Le[2])}}for(let pe=0;pe<4;pe++)for(let Pe=0;Pe<4;Pe++){const Ce=re(pe,Pe),De=re(pe,Pe+1),Le=re(pe+1,Pe),Ke=re(pe+1,Pe+1);K.emplaceBack(Ce,De,Le),K.emplaceBack(Le,De,Ke)}this._tileDebugTextIndexBuffer=o.createIndexBuffer(K),this._tileDebugTextBuffer=o.createVertexBuffer(Z,n.b7.members),this._globeTileDebugTextBuffer=o.createVertexBuffer(Y,n.bg.members),this._tileDebugTextSegments=n.b8.simpleSegment(0,0,ae,32)}destroy(o=!1){for(const d in this.buckets)this.buckets[d].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!o&&this.texture&&this.texture instanceof n.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}n.bh.setPbf(n.bi);class qo extends Ql{constructor(o,d,A,T,S){super(o,d,A,T,S),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}getLayers(){return this._mrt?Object.values(this._mrt.layers):[]}getLayer(o){return this._mrt&&this._mrt.getLayer(o)}setTexture(o,d){const A=d.context,T=A.gl;this.texture=this.texture||d.getTileTexture(o.width),this.texture&&this.texture instanceof n.T?this.texture.update(o,{premultiply:!1}):this.texture=new n.T(A,o,T.RGBA8,{premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(o=16384,d){const A=this._mrt=new n.bh(30),T=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(o-1)}});return this.entireBuffer=null,this.request=n.bj(T,(S,E,k,Z)=>{if(S)d(S);else try{const K=A.getHeaderLength(E);if(K>o)return void(this.request=this.fetchHeader(K,d));A.parseHeader(E),this._isHeaderLoaded=!0;let Y=0;for(const ae of Object.values(A.layers))Y=Math.max(Y,ae.dataIndex[ae.dataIndex.length-1].lastByte);E.byteLength>=Y&&(this.entireBuffer=E),d(null,this.entireBuffer||E,k,Z)}catch(K){d(K)}}),this.request}fetchBand(o,d,A){const T=this._mrt;if(!this._isHeaderLoaded||!T)return void A(new Error("Tile header is not ready"));const S=this.actor;if(!S)return void A(new Error("Can't fetch tile band without an actor"));let E;const k=(ae,re)=>{E.complete(ae,re),ae?A(ae):(this.updateTextureDescriptor(o,d),A(null,this.textureDescriptor&&this.textureDescriptor.img))},Z=(ae,re)=>{if(ae)return A(ae);const pe=S.send("decodeRasterArray",{type:"raster-array",source:this.source,scope:this.scope,tileID:this.tileID,uid:this.uid,buffer:re,task:E},k,void 0,!0);this._workQueue.push(()=>{pe&&pe.cancel(),E.cancel()})},K=T.getLayer(o);if(!K)return void A(new Error(`Unknown sourceLayer "${o}"`));if(K.hasDataForBand(d))return this.updateTextureDescriptor(o,d),void A(null,this.textureDescriptor?this.textureDescriptor.img:null);const Y=K.getDataRange([d]);if(E=T.createDecodingTask(Y),!E||E.tasks.length)if(this.flushQueues(),this.entireBuffer)Z(null,this.entireBuffer.slice(Y.firstByte,Y.lastByte+1));else{const ae=Object.assign({},this.requestParams,{headers:{Range:`bytes=${Y.firstByte}-${Y.lastByte}`}}),re=n.bj(ae,Z);this._fetchQueue.push(()=>{re.cancel(),E.cancel()})}else A(null)}updateNeeded(o,d){return(!this.textureDescriptor||this.textureDescriptor.band!==d||this.textureDescriptor.layer!==o)&&this.state!=="errored"}updateTextureDescriptor(o,d){if(!this._mrt)return;const A=this._mrt.getLayer(o);if(!A||!A.hasBand(d)||!A.hasDataForBand(d))return;const{bytes:T,tileSize:S,buffer:E,offset:k,scale:Z}=A.getBandView(d),K=S+2*E,Y=new n.r({width:K,height:K},T),ae=this.texture;ae&&ae instanceof n.T&&ae.update(Y,{premultiply:!1}),this.textureDescriptor={layer:o,band:d,img:Y,buffer:E,offset:k,tileSize:S,format:A.pixelFormat,mix:[Z,256*Z,65536*Z,16777216*Z]}}}class Wu{constructor(o,d){this.max=o,this.onRemove=d,this.reset()}reset(){for(const o in this.data)for(const d of this.data[o])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(o,d,A){const T=o.wrapped().key;this.data[T]===void 0&&(this.data[T]=[]);const S={value:d,timeout:void 0};if(A!==void 0&&(S.timeout=setTimeout(()=>{this.remove(o,S)},A)),this.data[T].push(S),this.order.push(T),this.order.length>this.max){const E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const d=this.data[o].shift();return d.timeout&&clearTimeout(d.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),d.value}getByKey(o){const d=this.data[o];return d?d[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,d){if(!this.has(o))return this;const A=o.wrapped().key,T=d===void 0?0:this.data[A].indexOf(d),S=this.data[A][T];return this.data[A].splice(T,1),S.timeout&&clearTimeout(S.timeout),this.data[A].length===0&&delete this.data[A],this.onRemove(S.value),this.order.splice(this.order.indexOf(A),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(o){const d=[];for(const A in this.data)for(const T of this.data[A])o(T.value)||d.push(T);for(const A of d)this.remove(A.value.tileID,A)}}class ph{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,d,A){const T=String(d);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][T]=this.stateChanges[o][T]||{},n.l(this.stateChanges[o][T],A),this.deletedStates[o]===null){this.deletedStates[o]={};for(const S in this.state[o])S!==T&&(this.deletedStates[o][S]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][T]===null){this.deletedStates[o][T]={};for(const S in this.state[o][T])A[S]||(this.deletedStates[o][T][S]=null)}else for(const S in A)this.deletedStates[o]&&this.deletedStates[o][T]&&this.deletedStates[o][T][S]===null&&delete this.deletedStates[o][T][S]}removeFeatureState(o,d,A){if(this.deletedStates[o]===null)return;const T=String(d);if(this.deletedStates[o]=this.deletedStates[o]||{},A&&d!==void 0)this.deletedStates[o][T]!==null&&(this.deletedStates[o][T]=this.deletedStates[o][T]||{},this.deletedStates[o][T][A]=null);else if(d!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][T])for(A in this.deletedStates[o][T]={},this.stateChanges[o][T])this.deletedStates[o][T][A]=null;else this.deletedStates[o][T]=null;else this.deletedStates[o]=null}getState(o,d){const A=this.state[o]||{},T=this.stateChanges[o]||{},S=this.deletedStates[o];if(S===null)return{};if(d!==void 0){const k=String(d),Z=n.l({},A[k],T[k]);if(S){const K=S[d];if(K===null)return{};for(const Y in K)delete Z[Y]}return Z}const E=n.l({},A,T);if(S)for(const k in S)delete E[k];return E}initializeTileState(o,d){o.refreshFeatureState(d)}coalesceChanges(o,d){const A={};for(const T in this.stateChanges){this.state[T]=this.state[T]||{};const S={};for(const E in this.stateChanges[T])this.state[T][E]||(this.state[T][E]={}),n.l(this.state[T][E],this.stateChanges[T][E]),S[E]=this.state[T][E];A[T]=S}for(const T in this.deletedStates){this.state[T]=this.state[T]||{};const S={};if(this.deletedStates[T]===null)for(const E in this.state[T])S[E]={},this.state[T][E]={};else for(const E in this.deletedStates[T]){if(this.deletedStates[T][E]===null)this.state[T][E]={};else if(this.state[T][E])for(const k of Object.keys(this.deletedStates[T][E]))delete this.state[T][E][k];S[E]=this.state[T][E]}A[T]=A[T]||{},n.l(A[T],S)}if(this.stateChanges={},this.deletedStates={},Object.keys(A).length!==0)for(const T in o)o[T].refreshFeatureState(d)}}class al extends n.E{constructor(o,d,A){super(),this.id=o,this._onlySymbols=A,d.on("data",T=>{T.dataType==="source"&&T.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&T.dataType==="source"&&T.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),d.on("error",()=>{this._sourceErrored=!0}),this._source=d,this._tiles={},this._cache=new Wu(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=d.minTileCacheSize,this._maxTileCacheSize=d.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new ph,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(o){this.map=o,this._minTileCacheSize=this._minTileCacheSize===void 0&&o?o._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&o?o._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const o in this._tiles)if(!this._tiles[o].loaded())return!1;return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(o,d){return o.isSymbolTile=this._onlySymbols,o.isExtraShadowCaster=this._shadowCasterTiles[o.tileID.key],this._source.loadTile(o,d)}_unloadTile(o){if(this._source.unloadTile)return this._source.unloadTile(o)}_abortTile(o){if(this._source.abortTile)return this._source.abortTile(o)}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const A=this._tiles[d];A.upload(o),A.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return Object.values(this._tiles).map(o=>o.tileID).sort(zn).map(o=>o.key)}getRenderableIds(o,d){const A=[];for(const T in this._tiles)this._isIdRenderable(+T,o,d)&&A.push(this._tiles[T]);return o?A.sort((T,S)=>{const E=T.tileID,k=S.tileID,Z=new n.P(E.canonical.x,E.canonical.y)._rotate(this.transform.angle),K=new n.P(k.canonical.x,k.canonical.y)._rotate(this.transform.angle);return E.overscaledZ-k.overscaledZ||K.y-Z.y||K.x-Z.x}).map(T=>T.tileID.key):A.map(T=>T.tileID).sort(zn).map(T=>T.key)}hasRenderableParent(o){const d=this.findLoadedParent(o,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(o,d,A){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(d||!this._tiles[o].holdingForFade())&&(A||!this._shadowCasterTiles[o])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(+o,"reloading")}}_reloadTile(o,d){const A=this._tiles[o];A&&(A.state!=="loading"&&(A.state=d),this._loadTile(A,this._tileLoaded.bind(this,A,o,d)))}_tileLoaded(o,d,A,T){if(T)if(o.state="errored",T.status!==404)this._source.fire(new n.z(T,{tile:o}));else{if(this._source.fire(new n.A("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id,tile:o})),!(o.tileID.key in this._loadedParentTiles))return;if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const S=this.map.painter.terrain;this.update(this.transform,S.getScaledDemTileSize(),!0),S.resetTileLookupCache(this.id)}else this.update(this.transform)}else o.timeAdded=n.q.now(),A==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(d,o),this._source.type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new n.A("data",{dataType:"source",tile:o,coord:o.tileID,sourceCacheId:this.id}))}_backfillDEM(o){const d=this.getRenderableIds();for(let T=0;T<d.length;T++){const S=d[T];if(o.neighboringTiles&&o.neighboringTiles[S]){const E=this.getTileByID(S);A(o,E),A(E,o)}}function A(T,S){if(!T.dem||T.dem.borderReady)return;T.needsHillshadePrepare=!0,T.needsDEMTextureUpload=!0;let E=S.tileID.canonical.x-T.tileID.canonical.x;const k=S.tileID.canonical.y-T.tileID.canonical.y,Z=Math.pow(2,T.tileID.canonical.z),K=S.tileID.key;E===0&&k===0||Math.abs(k)>1||(Math.abs(E)>1&&(Math.abs(E+Z)===1?E+=Z:Math.abs(E-Z)===1&&(E-=Z)),S.dem&&T.dem&&(T.dem.backfillBorder(S.dem,E,k),T.neighboringTiles&&T.neighboringTiles[K]&&(T.neighboringTiles[K].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,d,A,T){for(const S in this._tiles){let E=this._tiles[S];if(T[S]||!E.hasData()||E.tileID.overscaledZ<=d||E.tileID.overscaledZ>A)continue;let k=E.tileID;for(;E&&E.tileID.overscaledZ>d+1;){const K=E.tileID.scaledTo(E.tileID.overscaledZ-1);E=this._tiles[K.key],E&&E.hasData()&&(k=K)}let Z=k;for(;Z.overscaledZ>d;)if(Z=Z.scaledTo(Z.overscaledZ-1),o[Z.key]){T[k.key]=k;break}}}findLoadedParent(o,d){if(o.key in this._loadedParentTiles){const A=this._loadedParentTiles[o.key];return A&&A.tileID.overscaledZ>=d?A:null}for(let A=o.overscaledZ-1;A>=d;A--){const T=o.scaledTo(A),S=this._getLoadedTile(T);if(S)return S}}_getLoadedTile(o){const d=this._tiles[o.key];return d&&d.hasData()?d:this._cache.getByKey(this._source.reparseOverscaled?o.wrapped().key:o.canonical.key)}updateCacheSize(o,d){d=d||this._source.tileSize;const A=Math.ceil(o.width/d)+1,T=Math.ceil(o.height/d)+1,S=Math.floor(A*T*5),E=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,S):S,k=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,E):E;this._cache.setMaxSize(k)}handleWrapJump(o){const d=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,d){const A={};for(const T in this._tiles){const S=this._tiles[T];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+d),A[S.tileID.key]=S}this._tiles=A;for(const T in this._timers)clearTimeout(this._timers[T]),delete this._timers[T];for(const T in this._tiles)this._setTileReloadTimer(+T,this._tiles[T])}}update(o,d,A,T){if(this.transform=o,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!A)return;this.updateCacheSize(o,d),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={};const S=this._source.type==="batched-model";let E,k=this._source.maxzoom;const Z=this.map&&this.map.painter?this.map.painter._terrain:null;if(Z&&Z.sourceCache===this&&Z.attenuationRange()){const ae=Z.attenuationRange()[0],re=Math.floor(ae)-Math.log2(Z.getDemUpscale());k>re&&(k=re)}if(this.used||this.usedForTerrain){if(this._source.tileID)E=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(ae=>new n.aH(ae.canonical.z,ae.wrap,ae.canonical.z,ae.canonical.x,ae.canonical.y));else if(this.tileCoverLift!==0){const ae=o.clone();ae.tileCoverLift=this.tileCoverLift,E=ae.coveringTiles({tileSize:d||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:k,roundZoom:this._source.roundZoom&&!A,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:S}),this._source.minzoom<=1&&o.projection.name==="globe"&&(E.push(new n.aH(1,0,1,0,0)),E.push(new n.aH(1,0,1,1,0)),E.push(new n.aH(1,0,1,0,1)),E.push(new n.aH(1,0,1,1,1)))}else if(E=o.coveringTiles({tileSize:d||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:k,roundZoom:this._source.roundZoom&&!A,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:S}),this._source.hasTile){const ae=this._source.hasTile.bind(this._source);E=E.filter(re=>ae(re))}}else E=[];if(E.length>0&&this.castsShadows&&T&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!go(this._source.type)){const ae=o.coveringZoomLevel({tileSize:d||this._source.tileSize,roundZoom:this._source.roundZoom&&!A}),re=Math.min(ae,this._source.maxzoom);if(S){const pe=o.extendTileCover(E,re);for(const Pe of pe)E.push(Pe)}else{const pe=o.extendTileCover(E,re,T);for(const Pe of pe)this._shadowCasterTiles[Pe.key]=!0,E.push(Pe)}}const K=this._updateRetainedTiles(E);if(go(this._source.type)&&E.length!==0){const ae={},re={},pe=Object.keys(K);for(const Ce of pe){const De=K[Ce],Le=this._tiles[Ce];if(!Le||Le.fadeEndTime&&Le.fadeEndTime<=n.q.now())continue;const Ke=this.findLoadedParent(De,Math.max(De.overscaledZ-al.maxOverzooming,this._source.minzoom));Ke&&(this._addTile(Ke.tileID),ae[Ke.tileID.key]=Ke.tileID),re[Ce]=De}const Pe=E[E.length-1].overscaledZ;for(const Ce in this._tiles){const De=this._tiles[Ce];if(K[Ce]||!De.hasData())continue;let Le=De.tileID;for(;Le.overscaledZ>Pe;){Le=Le.scaledTo(Le.overscaledZ-1);const Ke=this._tiles[Le.key];if(Ke&&Ke.hasData()&&re[Le.key]){K[Ce]=De.tileID;break}}}for(const Ce in ae)K[Ce]||(this._coveredTiles[Ce]=!0,K[Ce]=ae[Ce])}for(const ae in K)this._tiles[ae].clearFadeHold();const Y=n.bk(this._tiles,K);for(const ae of Y){const re=this._tiles[ae];re.hasSymbolBuckets&&!re.holdingForFade()?re.setHoldDuration(this.map._fadeDuration):re.hasSymbolBuckets&&!re.symbolFadeFinished()||this._removeTile(+ae)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(+o)}_updateRetainedTiles(o){const d={};if(o.length===0)return d;const A={},T=o.reduce((K,Y)=>Math.min(K,Y.overscaledZ),1/0),S=o[0].overscaledZ,E=Math.max(S-al.maxOverzooming,this._source.minzoom),k=Math.max(S+al.maxUnderzooming,this._source.minzoom),Z={};for(const K of o){const Y=this._addTile(K);d[K.key]=K,Y.hasData()||T<this._source.maxzoom&&(Z[K.key]=K)}this._retainLoadedChildren(Z,T,k,d);for(const K of o){let Y=this._tiles[K.key];if(Y.hasData())continue;if(K.canonical.z>=this._source.maxzoom){const re=K.children(this._source.maxzoom)[0],pe=this.getTile(re);if(pe&&pe.hasData()){d[re.key]=re;continue}}else{const re=K.children(this._source.maxzoom);if(d[re[0].key]&&d[re[1].key]&&d[re[2].key]&&d[re[3].key])continue}let ae=Y.wasRequested();for(let re=K.overscaledZ-1;re>=E;--re){const pe=K.scaledTo(re);if(A[pe.key]||(A[pe.key]=!0,Y=this.getTile(pe),!Y&&ae&&(Y=this._addTile(pe)),Y&&(d[pe.key]=pe,ae=Y.wasRequested(),Y.hasData())))break}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const d=[];let A,T=this._tiles[o].tileID;for(;T.overscaledZ>0;){if(T.key in this._loadedParentTiles){A=this._loadedParentTiles[T.key];break}d.push(T.key);const S=T.scaledTo(T.overscaledZ-1);if(A=this._getLoadedTile(S),A)break;T=S}for(const S of d)this._loadedParentTiles[S]=A}}_addTile(o){let d=this._tiles[o.key];if(d)return d.isExtraShadowCaster!==!0||this._shadowCasterTiles[o.key]||this._reloadTile(o.key,"reloading"),d;d=this._cache.getAndRemove(o),d&&(this._setTileReloadTimer(o.key,d),d.tileID=o,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,d)));const A=!!d;if(!A){const T=this.map?this.map.painter:null,S=this._source.tileSize*o.overscaleFactor();d=this._source.type==="raster-array"?new qo(o,S,this.transform.tileZoom,T,this._isRaster):new Ql(o,S,this.transform.tileZoom,T,this._isRaster),this._loadTile(d,this._tileLoaded.bind(this,d,o.key,d.state))}return d?(d.uses++,this._tiles[o.key]=d,A||this._source.fire(new n.A("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d):null}_setTileReloadTimer(o,d){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const A=d.getExpiryTimeout();A&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},A))}_removeTile(o){const d=this._tiles[o];d&&(d.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),d.uses>0||(d.hasData()&&d.state!=="reloading"||d.state==="empty"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(+o);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(o,d,A){const T=[],S=this.transform;if(!S)return T;const E=S.projection.name==="globe",k=n.av(S.center.lng);for(const Z in this._tiles){const K=this._tiles[Z];if(A&&K.clearQueryDebugViz(),K.holdingForFade())continue;let Y;if(E){const ae=K.tileID.canonical;if(ae.z===0){const re=[Math.abs(n.ay(k,...gr(ae,-1))-k),Math.abs(n.ay(k,...gr(ae,1))-k)];Y=[0,2*re.indexOf(Math.min(...re))-1]}else{const re=[Math.abs(n.ay(k,...gr(ae,-1))-k),Math.abs(n.ay(k,...gr(ae,0))-k),Math.abs(n.ay(k,...gr(ae,1))-k)];Y=[re.indexOf(Math.min(...re))-1]}}else Y=[0];for(const ae of Y){const re=o.containsTile(K,S,d,ae);re&&T.push(re)}}return T}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(o){return this._getRenderableCoordinates(o)}_getRenderableCoordinates(o,d){const A=this.getRenderableIds(o,d).map(S=>this._tiles[S].tileID),T=this.transform.projection.name==="globe";for(const S of A)S.projMatrix=this.transform.calculateProjMatrix(S.toUnwrapped()),S.expandedProjMatrix=T?this.transform.calculateProjMatrix(S.toUnwrapped(),!1,!0):S.projMatrix;return A}sortCoordinatesByDistance(o){const d=o.slice(),A=this.transform._camera.position,T=this.transform._camera.forward(),S={};for(const E of d){const k=1/(1<<E.canonical.z);S[E.key]=((E.canonical.x+.5)*k+E.wrap-A[0])*T[0]+((E.canonical.y+.5)*k-A[1])*T[1]-A[2]*T[2]}return d.sort((E,k)=>S[E.key]-S[k.key]),d}hasTransition(){if(this._source.hasTransition())return!0;if(go(this._source.type))for(const o in this._tiles){const d=this._tiles[o];if(d.fadeEndTime!==void 0&&d.fadeEndTime>=n.q.now())return!0}return!1}setFeatureState(o,d,A){this._state.updateState(o=o||"_geojsonTileLayer",d,A)}removeFeatureState(o,d,A){this._state.removeFeatureState(o=o||"_geojsonTileLayer",d,A)}getFeatureState(o,d){return this._state.getState(o=o||"_geojsonTileLayer",d)}setDependencies(o,d,A){const T=this._tiles[o];T&&T.setDependencies(d,A)}reloadTilesForDependencies(o,d){for(const A in this._tiles)this._tiles[A].hasDependency(o,d)&&this._reloadTile(+A,"reloading");this._cache.filter(A=>!A.hasDependency(o,d))}_preloadTiles(o,d){if(!this._sourceLoaded){const Z=()=>{this._sourceLoaded&&(this._source.off("data",Z),this._preloadTiles(o,d))};return void this._source.on("data",Z)}const A=new Map,T=Array.isArray(o)?o:[o],S=this.map.painter.terrain,E=this.usedForTerrain&&S?S.getScaledDemTileSize():this._source.tileSize;for(const Z of T){const K=Z.coveringTiles({tileSize:E,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const Y of K)A.set(Y.key,Y);this.usedForTerrain&&Z.updateElevation(!1)}const k=Array.from(A.values());n.bl(k,(Z,K)=>{const Y=new Ql(Z,this._source.tileSize*Z.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(Y,ae=>{this._source.type==="raster-dem"&&Y.dem&&this._backfillDEM(Y),K(ae,Y)})},d)}}function zn(y,o){const d=Math.abs(2*y.wrap)-+(y.wrap<0),A=Math.abs(2*o.wrap)-+(o.wrap<0);return y.overscaledZ-o.overscaledZ||A-d||o.canonical.y-y.canonical.y||o.canonical.x-y.canonical.x}function go(y){return y==="raster"||y==="image"||y==="video"||y==="custom"}function gr(y,o){const d=1<<y.z;return[y.x/d+o,(y.x+1)/d+o]}al.maxOverzooming=10,al.maxUnderzooming=3;class Bc{constructor(o){this.style=o,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const o=!1,d=!1;for(const A in this.style._mergedLayers){const T=this.style._mergedLayers[A];if(T.type==="fill-extrusion")this.layers.push({layer:T,visible:o,visibilityChanged:d});else if(T.type==="model"){const S=this.style.getLayerSource(T);S&&S.type==="batched-model"&&this.layers.push({layer:T,visible:o,visibilityChanged:d})}}}onNewFrame(o){this.layersGotHidden=!1;for(const d of this.layers){const A=d.layer;let T=!1;A.type==="fill-extrusion"?T=!A.isHidden(o)&&A.paint.get("fill-extrusion-opacity")>0:A.type==="model"&&(T=!A.isHidden(o)&&A.paint.get("model-opacity").constantOr(1)>0),this.layersGotHidden=this.layersGotHidden||!T&&d.visible,d.visible=T}}updateZOffset(o,d){this.currentBuildingBuckets=[];for(const T of this.layers){const S=T.layer,E=this.style.getLayerSourceCache(S);let k=1;S.type==="fill-extrusion"&&(k=T.visible?S.paint.get("fill-extrusion-vertical-scale"):0);let Z=E?E.getTile(d):null;if(!Z&&E&&d.canonical.z>E.getSource().minzoom){let K=d.scaledTo(Math.min(E.getSource().maxzoom,d.overscaledZ-1));for(;K.overscaledZ>=E.getSource().minzoom&&(Z=E.getTile(K),!Z&&K.overscaledZ!==0);)K=K.scaledTo(K.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:Z?Z.getBucket(S):null,tileID:Z?Z.tileID:d,verticalScale:k})}o.hasAnyZOffset=!1;let A=!1;for(let T=0;T<o.symbolInstances.length;T++){const S=o.symbolInstances.get(T),E=S.zOffset,k=this._getHeightAtTileOffset(d,S.tileAnchorX,S.tileAnchorY);S.zOffset=k!==Number.NEGATIVE_INFINITY?k:E,A||E===S.zOffset||(A=!0),o.hasAnyZOffset||S.zOffset===0||(o.hasAnyZOffset=!0)}A&&(o.zOffsetBuffersNeedUpload=!0,o.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(o,d,A,T){let S=d,E=A;if(o.canonical.z!==T.canonical.z){const k=T.canonical,Z=1/(1<<o.canonical.z-k.z);S=(d+o.canonical.x*n.ai)*Z-k.x*n.ai|0,E=(A+o.canonical.y*n.ai)*Z-k.y*n.ai|0}return{tileX:S,tileY:E}}_getHeightAtTileOffset(o,d,A){let T,S;for(let E=0;E<this.layers.length;++E){if(this.layers[E].layer.type!=="fill-extrusion")continue;const{bucket:k,tileID:Z,verticalScale:K}=this.currentBuildingBuckets[E];if(!k)continue;const{tileX:Y,tileY:ae}=this._mapCoordToOverlappingTile(o,d,A,Z),re=k.getHeightAtTileCoord(Y,ae);re&&re.height!==void 0&&(re.hidden?T=re.height:S=Math.max(re.height*K,S||0))}if(S!==void 0)return S;for(let E=0;E<this.layers.length;++E){const k=this.layers[E];if(k.layer.type!=="model"||!k.visible)continue;const{bucket:Z,tileID:K}=this.currentBuildingBuckets[E];if(!Z)continue;const{tileX:Y,tileY:ae}=this._mapCoordToOverlappingTile(o,d,A,K),re=Z.getHeightAtTileCoord(Y,ae);if(re&&!re.hidden)return re.height===void 0&&T!==void 0?Math.min(re.maxHeight,T)*re.verticalScale:re.height?re.height*re.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function Sn(y,o){const d={};for(const A in y)A!=="ref"&&(d[A]=y[A]);return n.bm.forEach(A=>{A in o&&(d[A]=o[A])}),d}function mh(y){y=y.slice();const o=Object.create(null);for(let d=0;d<y.length;d++)o[y[d].id]=y[d];for(let d=0;d<y.length;d++)"ref"in y[d]&&(y[d]=Sn(y[d],o[y[d].ref]));return y}const Nn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setSnow:"setSnow",setRain:"setRain",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport"};function Ks(y,o,d){d.push({command:Nn.addSource,args:[y,o[y]]})}function mc(y,o,d){o.push({command:Nn.removeSource,args:[y]}),d[y]=!0}function gc(y,o,d,A){mc(y,d,A),Ks(y,o,d)}function tr(y,o,d){let A;for(A in y[d])if(y[d].hasOwnProperty(A)&&A!=="data"&&!n.bn(y[d][A],o[d][A]))return!1;for(A in o[d])if(o[d].hasOwnProperty(A)&&A!=="data"&&!n.bn(y[d][A],o[d][A]))return!1;return!0}function dn(y,o,d,A,T,S){let E;for(E in o=o||{},y=y||{})y.hasOwnProperty(E)&&(n.bn(y[E],o[E])||d.push({command:S,args:[A,E,o[E],T]}));for(E in o)o.hasOwnProperty(E)&&!y.hasOwnProperty(E)&&(n.bn(y[E],o[E])||d.push({command:S,args:[A,E,o[E],T]}))}function bn(y){return y.id}function Ws(y,o){return y[o.id]=o,y}class Nd{constructor(o,d){this.reset(o,d)}reset(o,d){this.points=o||[],this._distances=[0];for(let A=1;A<this.points.length;A++)this._distances[A]=this._distances[A-1]+this.points[A].dist(this.points[A-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(this.points.length===1)return this.points[0];o=n.ay(o,0,1);let d=1,A=this._distances[d];const T=o*this.paddedLength+this.padding;for(;A<T&&d<this._distances.length;)A=this._distances[++d];const S=d-1,E=this._distances[S],k=A-E,Z=k>0?(T-E)/k:0;return this.points[S].mult(1-Z).add(this.points[d].mult(Z))}}class yn{constructor(o,d,A){const T=this.boxCells=[],S=this.circleCells=[];this.xCellCount=Math.ceil(o/A),this.yCellCount=Math.ceil(d/A);for(let E=0;E<this.xCellCount*this.yCellCount;E++)T.push([]),S.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=d,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,d,A,T,S){this._forEachCell(d,A,T,S,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(d),this.bboxes.push(A),this.bboxes.push(T),this.bboxes.push(S)}insertCircle(o,d,A,T){this._forEachCell(d-T,A-T,d+T,A+T,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(d),this.circles.push(A),this.circles.push(T)}_insertBoxCell(o,d,A,T,S,E){this.boxCells[S].push(E)}_insertCircleCell(o,d,A,T,S,E){this.circleCells[S].push(E)}_query(o,d,A,T,S,E){if(A<0||o>this.width||T<0||d>this.height)return!S&&[];const k=[];if(o<=0&&d<=0&&this.width<=A&&this.height<=T){if(S)return!0;for(let Z=0;Z<this.boxKeys.length;Z++)k.push({key:this.boxKeys[Z],x1:this.bboxes[4*Z],y1:this.bboxes[4*Z+1],x2:this.bboxes[4*Z+2],y2:this.bboxes[4*Z+3]});for(let Z=0;Z<this.circleKeys.length;Z++){const K=this.circles[3*Z],Y=this.circles[3*Z+1],ae=this.circles[3*Z+2];k.push({key:this.circleKeys[Z],x1:K-ae,y1:Y-ae,x2:K+ae,y2:Y+ae})}return E?k.filter(E):k}return this._forEachCell(o,d,A,T,this._queryCell,k,{hitTest:S,seenUids:{box:{},circle:{}}},E),S?k.length>0:k}_queryCircle(o,d,A,T,S){const E=o-A,k=o+A,Z=d-A,K=d+A;if(k<0||E>this.width||K<0||Z>this.height)return!T&&[];const Y=[];return this._forEachCell(E,Z,k,K,this._queryCellCircle,Y,{hitTest:T,circle:{x:o,y:d,radius:A},seenUids:{box:{},circle:{}}},S),T?Y.length>0:Y}query(o,d,A,T,S){return this._query(o,d,A,T,!1,S)}hitTest(o,d,A,T,S){return this._query(o,d,A,T,!0,S)}hitTestCircle(o,d,A,T){return this._queryCircle(o,d,A,!0,T)}_queryCell(o,d,A,T,S,E,k,Z){const K=k.seenUids,Y=this.boxCells[S];if(Y!==null){const re=this.bboxes;for(const pe of Y)if(!K.box[pe]){K.box[pe]=!0;const Pe=4*pe;if(o<=re[Pe+2]&&d<=re[Pe+3]&&A>=re[Pe+0]&&T>=re[Pe+1]&&(!Z||Z(this.boxKeys[pe]))){if(k.hitTest)return E.push(!0),!0;E.push({key:this.boxKeys[pe],x1:re[Pe],y1:re[Pe+1],x2:re[Pe+2],y2:re[Pe+3]})}}}const ae=this.circleCells[S];if(ae!==null){const re=this.circles;for(const pe of ae)if(!K.circle[pe]){K.circle[pe]=!0;const Pe=3*pe;if(this._circleAndRectCollide(re[Pe],re[Pe+1],re[Pe+2],o,d,A,T)&&(!Z||Z(this.circleKeys[pe]))){if(k.hitTest)return E.push(!0),!0;{const Ce=re[Pe],De=re[Pe+1],Le=re[Pe+2];E.push({key:this.circleKeys[pe],x1:Ce-Le,y1:De-Le,x2:Ce+Le,y2:De+Le})}}}}}_queryCellCircle(o,d,A,T,S,E,k,Z){const K=k.circle,Y=k.seenUids,ae=this.boxCells[S];if(ae!==null){const pe=this.bboxes;for(const Pe of ae)if(!Y.box[Pe]){Y.box[Pe]=!0;const Ce=4*Pe;if(this._circleAndRectCollide(K.x,K.y,K.radius,pe[Ce+0],pe[Ce+1],pe[Ce+2],pe[Ce+3])&&(!Z||Z(this.boxKeys[Pe])))return E.push(!0),!0}}const re=this.circleCells[S];if(re!==null){const pe=this.circles;for(const Pe of re)if(!Y.circle[Pe]){Y.circle[Pe]=!0;const Ce=3*Pe;if(this._circlesCollide(pe[Ce],pe[Ce+1],pe[Ce+2],K.x,K.y,K.radius)&&(!Z||Z(this.circleKeys[Pe])))return E.push(!0),!0}}}_forEachCell(o,d,A,T,S,E,k,Z){const K=this._convertToXCellCoord(o),Y=this._convertToYCellCoord(d),ae=this._convertToXCellCoord(A),re=this._convertToYCellCoord(T);for(let pe=K;pe<=ae;pe++)for(let Pe=Y;Pe<=re;Pe++)if(S.call(this,o,d,A,T,this.xCellCount*Pe+pe,E,k,Z))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,d,A,T,S,E){const k=T-o,Z=S-d,K=A+E;return K*K>k*k+Z*Z}_circleAndRectCollide(o,d,A,T,S,E,k){const Z=(E-T)/2,K=Math.abs(o-(T+Z));if(K>Z+A)return!1;const Y=(k-S)/2,ae=Math.abs(d-(S+Y));if(ae>Y+A)return!1;if(K<=Z||ae<=Y)return!0;const re=K-Z,pe=ae-Y;return re*re+pe*pe<=A*A}}const Ho={unknown:0,flipRequired:1,flipNotRequired:2},Tu=Math.tan(85*Math.PI/180);function Os(y,o,d,A,T,S,E){const k=n.ad.mat4.create();if(d)if(S.name==="globe"){const Z=n.bo(T,o);n.ad.mat4.multiply(k,k,Z)}else{const Z=n.ad.mat2.invert([],E);k[0]=Z[0],k[1]=Z[1],k[4]=Z[2],k[5]=Z[3],A||n.ad.mat4.rotateZ(k,k,T.angle)}else n.ad.mat4.multiply(k,T.labelPlaneMatrix,y);return k}function Ki(y,o,d,A,T,S,E){const k=Os(y,o,d,A,T,S,E);return S.name==="globe"&&d||(k[2]=k[6]=k[10]=k[14]=0),k}function Di(y,o,d,A,T,S,E){if(d){if(S.name==="globe"){const k=Os(y,o,d,A,T,S,E);return n.ad.mat4.invert(k,k),n.ad.mat4.multiply(k,y,k),k}{const k=n.ad.mat4.clone(y),Z=n.ad.mat4.identity([]);return Z[0]=E[0],Z[1]=E[1],Z[4]=E[2],Z[5]=E[3],n.ad.mat4.multiply(k,k,Z),A||n.ad.mat4.rotateZ(k,k,-T.angle),k}}return T.glCoordMatrix}function yo(y,o,d,A){const T=[y,o,d,1];d?n.ad.vec4.transformMat4(T,T,A):Ji(T,T,A);const S=T[3];return T[0]/=S,T[1]/=S,T[2]/=S,T}function Od(y,o){return Math.min(.5+y/o*.5,1.5)}function gh(y,o){const d=y[0]/y[3],A=y[1]/y[3];return d>=-o[0]&&d<=o[0]&&A>=-o[1]&&A<=o[1]}function yc(y,o,d,A,T,S,E,k,Z,K){const Y=d.transform,ae=A?y.textSizeData:y.iconSizeData,re=n.bp(ae,d.transform.zoom),pe=Y.projection.name==="globe",Pe=[256/d.width*2+1,256/d.height*2+1],Ce=A?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;Ce.clear();let De=null;pe&&(De=A?y.text.globeExtVertexArray:y.icon.globeExtVertexArray);const Le=y.lineVertexArray,Ke=A?y.text.placedSymbolArray:y.icon.placedSymbolArray,it=d.transform.width/d.transform.height;let tt,pt=!1;for(let ut=0;ut<Ke.length;ut++){const ct=Ke.get(ut),{numGlyphs:dt,writingMode:vt}=ct;if(vt!==n.bq.vertical||pt||tt===n.bq.horizontal||(pt=!0),tt=vt,(ct.hidden||vt===n.bq.vertical)&&!pt){nl(dt,Ce);continue}pt=!1;const Tt=new n.P(ct.tileAnchorX,ct.tileAnchorY);let{x:Qt,y:kt,z:ra}=Y.projection.projectTilePoint(Tt.x,Tt.y,K.canonical);if(Z){const[Fa,Va,cr]=Z(Tt);Qt+=Fa,kt+=Va,ra+=cr}const ca=[Qt,kt,ra,1];if(n.ad.vec4.transformMat4(ca,ca,o),!gh(ca,Pe)){nl(dt,Ce);continue}const xa=ca[3],Ft=Od(d.transform.getCameraToCenterDistance(Y.projection),xa),sa=n.br(ae,re,ct),zt=E?sa/Ft:sa*Ft,oa=yo(Qt,kt,ra,T);if(oa[3]<=0){nl(dt,Ce);continue}let ta={};const da=n.ak(y.layers[0].layout.get("text-max-angle")),Xt=Math.cos(da),pa=E?null:Z,La=ys(ct,zt,!1,k,o,T,S,y.glyphOffsetArray,Le,Ce,De,oa,Tt,ta,it,pa,Y.projection,K,E,Xt);pt=La.useVertical,pa&&La.needsFlipping&&(ta={}),(La.notEnoughRoom||pt||La.needsFlipping&&ys(ct,zt,!0,k,o,T,S,y.glyphOffsetArray,Le,Ce,De,oa,Tt,ta,it,pa,Y.projection,K,E,Xt).notEnoughRoom)&&nl(dt,Ce)}A?(y.text.dynamicLayoutVertexBuffer.updateData(Ce),De&&y.text.globeExtVertexBuffer&&y.text.globeExtVertexBuffer.updateData(De)):(y.icon.dynamicLayoutVertexBuffer.updateData(Ce),De&&y.icon.globeExtVertexBuffer&&y.icon.globeExtVertexBuffer.updateData(De))}function Ac(y,o,d,A,T,S,E,k,Z,K,Y,ae,re,pe,Pe,Ce,De){const{lineStartIndex:Le,glyphStartIndex:Ke,segment:it}=k,tt=Ke+k.numGlyphs,pt=Le+k.lineLength,ut=o.getoffsetX(Ke),ct=o.getoffsetX(tt-1),dt=zl(y*ut,d,A,T,S,E,it,Le,pt,Z,K,Y,ae,re,!0,pe,Pe,Ce,De);if(!dt)return null;const vt=zl(y*ct,d,A,T,S,E,it,Le,pt,Z,K,Y,ae,re,!0,pe,Pe,Ce,De);return vt?{first:dt,last:vt}:null}function rl(y,o,d,A){return y===n.bq.horizontal&&Math.abs(A)>Math.abs(d)?{useVertical:!0}:y===n.bq.vertical?A>0?{needsFlipping:!0}:null:o!==Ho.unknown&&function(T,S){return T===0||Math.abs(S/T)>Tu}(d,A)?o===Ho.flipRequired?{needsFlipping:!0}:null:d<0?{needsFlipping:!0}:null}function ys(y,o,d,A,T,S,E,k,Z,K,Y,ae,re,pe,Pe,Ce,De,Le,Ke,it){const tt=o/24,pt=y.lineOffsetX*tt,ut=y.lineOffsetY*tt,{lineStartIndex:ct,glyphStartIndex:dt,numGlyphs:vt,segment:Tt,writingMode:Qt,flipState:kt}=y,ra=ct+y.lineLength,ca=xa=>{if(Y){const[oa,ta,da]=xa.up,Xt=K.length;n.bs(Y,Xt+0,oa,ta,da),n.bs(Y,Xt+1,oa,ta,da),n.bs(Y,Xt+2,oa,ta,da),n.bs(Y,Xt+3,oa,ta,da)}const[Ft,sa,zt]=xa.point;n.bt(K,Ft,sa,zt,xa.angle)};if(vt>1){const xa=Ac(tt,k,pt,ut,d,ae,re,y,Z,S,pe,Ce,!1,De,Le,Ke,it);if(!xa)return{notEnoughRoom:!0};if(A&&!d){let[Ft,sa,zt]=xa.first.point,[oa,ta,da]=xa.last.point;[Ft,sa]=yo(Ft,sa,zt,E),[oa,ta]=yo(oa,ta,da,E);const Xt=rl(Qt,kt,(oa-Ft)*Pe,ta-sa);if(y.flipState=Xt&&Xt.needsFlipping?Ho.flipRequired:Ho.flipNotRequired,Xt)return Xt}ca(xa.first);for(let Ft=dt+1;Ft<dt+vt-1;Ft++){const sa=zl(tt*k.getoffsetX(Ft),pt,ut,d,ae,re,Tt,ct,ra,Z,S,pe,Ce,!1,!1,De,Le,Ke,it);if(!sa)return K.length-=4*(Ft-dt),{notEnoughRoom:!0};ca(sa)}ca(xa.last)}else{if(A&&!d){const Ft=yo(re.x,re.y,0,T),sa=ct+Tt+1,zt=new n.P(Z.getx(sa),Z.gety(sa)),oa=yo(zt.x,zt.y,0,T),ta=oa[3]>0?oa:Vs(re,zt,Ft,1,T,void 0,De,Le.canonical),da=rl(Qt,kt,(ta[0]-Ft[0])*Pe,ta[1]-Ft[1]);if(y.flipState=da&&da.needsFlipping?Ho.flipRequired:Ho.flipNotRequired,da)return da}const xa=zl(tt*k.getoffsetX(dt),pt,ut,d,ae,re,Tt,ct,ra,Z,S,pe,Ce,!1,!1,De,Le,Ke,it);if(!xa)return{notEnoughRoom:!0};ca(xa)}return{}}function Yu(y,o,d,A,T){const{x:S,y:E,z:k}=A.projectTilePoint(y.x,y.y,o);if(!T)return yo(S,E,k,d);const[Z,K,Y]=T(y);return yo(S+Z,E+K,k+Y,d)}function Vs(y,o,d,A,T,S,E,k){const Z=Yu(y.sub(o)._unit()._add(y),k,T,E,S);return n.ad.vec3.sub(Z,d,Z),n.ad.vec3.normalize(Z,Z),n.ad.vec3.scaleAndAdd(Z,d,Z,A)}function zl(y,o,d,A,T,S,E,k,Z,K,Y,ae,re,pe,Pe,Ce,De,Le,Ke){const it=A?y-o:y+o;let tt=it>0?1:-1,pt=0;A&&(tt*=-1,pt=Math.PI),tt<0&&(pt+=Math.PI);let ut=k+E+(tt>0?0:1)|0,ct=T,dt=T,vt=0,Tt=0;const Qt=Math.abs(it),kt=[],ra=[];let ca=S,xa=ca,Ft=n.ad.vec3.zero([]);const sa=()=>Vs(xa,ca,dt,Qt-vt+1,Y,re,Ce,De.canonical);for(;vt+Tt<=Qt;){if(ut+=tt,ut<k||ut>=Z)return null;if(dt=ct,xa=ca,kt.push(dt),pe&&ra.push(xa),ca=new n.P(K.getx(ut),K.gety(ut)),ct=ae[ut],!ct){const cr=Yu(ca,De.canonical,Y,Ce,re);ct=cr[3]>0?ae[ut]=cr:sa()}vt+=Tt;const Fa=n.ad.vec3.sub([],ct,dt),Va=n.ad.vec3.distance(dt,ct);if(d&&Va>0&&Tt>0&&n.ad.vec3.dot(Ft,Fa)/(Tt*Va)<Ke)return null;Tt=Va,Ft=Fa}Pe&&re&&(ae[ut]&&(ct=sa(),Tt=n.ad.vec3.distance(dt,ct),Ft=n.ad.vec3.sub([],ct,dt)),ae[ut]=ct);const zt=(Qt-vt)/Tt,oa=ca.sub(xa)._mult(zt)._add(xa),ta=n.ad.vec3.scaleAndAdd([],dt,Ft,zt);let da=[0,0,1],Xt=Ft[0],pa=Ft[1];if(Le&&(da=Ce.upVector(De.canonical,oa.x,oa.y),da[0]!==0||da[1]!==0||da[2]!==1)){const Fa=[da[2],0,-da[0]],Va=n.ad.vec3.cross([],da,Fa);n.ad.vec3.normalize(Fa,Fa),n.ad.vec3.normalize(Va,Va),Xt=n.ad.vec3.dot(Ft,Fa),pa=n.ad.vec3.dot(Ft,Va)}if(d){const Fa=n.ad.vec3.cross([],da,Ft);n.ad.vec3.normalize(Fa,Fa),n.ad.vec3.scaleAndAdd(ta,ta,Fa,d*tt)}const La=pt+Math.atan2(pa,Xt);return kt.push(ta),pe&&ra.push(oa),{point:ta,angle:La,path:kt,tilePath:ra,up:da}}function nl(y,o){const d=o.length,A=d+4*y;o.resize(A),o.float32.fill(-1/0,4*d,4*A)}function Ji(y,o,d){const A=o[0],T=o[1];return y[0]=d[0]*A+d[4]*T+d[12],y[1]=d[1]*A+d[5]*T+d[13],y[3]=d[3]*A+d[7]*T+d[15],y}const Ys=100;class eu{constructor(o,d,A=new yn(o.width+200,o.height+200,25),T=new yn(o.width+200,o.height+200,25)){this.transform=o,this.grid=A,this.ignoredGrid=T,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+Ys,this.screenBottomBoundary=o.height+Ys,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.fogState=d}placeCollisionBox(o,d,A,T,S,E,k,Z){let K=A.projectedAnchorX,Y=A.projectedAnchorY,ae=A.projectedAnchorZ;const re=A.elevation,pe=A.tileID,Pe=o.getProjection();if(re&&pe){const[ut,ct,dt]=Pe.upVector(pe.canonical,A.tileAnchorX,A.tileAnchorY),vt=Pe.upVectorScale(pe.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;K+=ut*re*vt,Y+=ct*re*vt,ae+=dt*re*vt}const Ce=this.projectAndGetPerspectiveRatio(k,K,Y,ae,A.tileID,Pe.name==="globe"||!!re||this.transform.pitch>0,Pe),De=E*Ce.perspectiveRatio,Le=(A.x1*d+T.x-A.padding)*De+Ce.point.x,Ke=(A.y1*d+T.y-A.padding)*De+Ce.point.y,it=(A.x2*d+T.x+A.padding)*De+Ce.point.x,tt=(A.y2*d+T.y+A.padding)*De+Ce.point.y,pt=Ce.perspectiveRatio<=.55||Ce.occluded;return!this.isInsideGrid(Le,Ke,it,tt)||!S&&this.grid.hitTest(Le,Ke,it,tt,Z)||pt?{box:[],offscreen:!1,occluded:Ce.occluded}:{box:[Le,Ke,it,tt],offscreen:this.isOffscreen(Le,Ke,it,tt),occluded:!1}}placeCollisionCircles(o,d,A,T,S,E,k,Z,K,Y,ae,re,pe,Pe,Ce){const De=[],Le=this.transform.elevation,Ke=o.getProjection(),it=Le?Le.getAtTileOffsetFunc(Ce,this.transform.center.lat,this.transform.worldSize,Ke):null,tt=new n.P(A.tileAnchorX,A.tileAnchorY);let{x:pt,y:ut,z:ct}=Ke.projectTilePoint(tt.x,tt.y,Ce.canonical);if(it){const[da,Xt,pa]=it(tt);pt+=da,ut+=Xt,ct+=pa}const dt=Ke.name==="globe",vt=this.projectAndGetPerspectiveRatio(k,pt,ut,ct,Ce,dt||!!Le||this.transform.pitch>0,Ke),{perspectiveRatio:Tt}=vt,Qt=(ae?E/Tt:E*Tt)/n.bw,kt=yo(pt,ut,ct,Z),ra=A.lineOffsetX*Qt,ca=A.lineOffsetY*Qt,xa=n.ak(o.layers[0].layout.get("text-max-angle")),Ft=Math.cos(xa),sa=vt.signedDistanceFromCamera>0?Ac(Qt,S,ra,ca,!1,kt,tt,A,T,Z,{},Le&&!ae?it:null,ae&&!!Le,Ke,Ce,ae,Ft):null;let zt=!1,oa=!1,ta=!0;if(sa&&!vt.occluded){const da=.5*pe*Tt+Pe,Xt=new n.P(-100,-100),pa=new n.P(this.screenRightBoundary,this.screenBottomBoundary),La=new Nd,{first:Fa,last:Va}=sa,cr=Fa.path.length;let jr=[];for(let Or=cr-1;Or>=1;Or--)jr.push(Fa.path[Or]);for(let Or=1;Or<Va.path.length;Or++)jr.push(Va.path[Or]);const vr=2.5*da;K&&(jr=jr.map(([Or,zr,Gr],Ur)=>(it&&!dt&&(Gr=it(Ur<cr-1?Fa.tilePath[cr-1-Ur]:Va.tilePath[Ur-cr+2])[2]),yo(Or,zr,Gr,K))),jr.some(Or=>Or[3]<=0)&&(jr=[]));let Ir=[];if(jr.length>0){let Or=1/0,zr=-1/0,Gr=1/0,Ur=-1/0;for(const mr of jr)Or=Math.min(Or,mr[0]),Gr=Math.min(Gr,mr[1]),zr=Math.max(zr,mr[0]),Ur=Math.max(Ur,mr[1]);zr>=Xt.x&&Or<=pa.x&&Ur>=Xt.y&&Gr<=pa.y&&(Ir=[jr.map(mr=>new n.P(mr[0],mr[1]))],(Or<Xt.x||zr>pa.x||Gr<Xt.y||Ur>pa.y)&&(Ir=n.bu(Ir,Xt.x,Xt.y,pa.x,pa.y)))}for(const Or of Ir){La.reset(Or,.25*da);let zr=0;zr=La.length<=.5*da?1:Math.ceil(La.paddedLength/vr)+1;for(let Gr=0;Gr<zr;Gr++){const Ur=Gr/Math.max(zr-1,1),mr=La.lerp(Ur),fn=mr.x+Ys,Er=mr.y+Ys;De.push(fn,Er,da,0);const rr=fn-da,pn=Er-da,Xn=fn+da,An=Er+da;if(ta=ta&&this.isOffscreen(rr,pn,Xn,An),oa=oa||this.isInsideGrid(rr,pn,Xn,An),!d&&this.grid.hitTestCircle(fn,Er,da,re)&&(zt=!0,!Y))return{circles:[],offscreen:!1,collisionDetected:zt,occluded:!1}}}}return{circles:!Y&&zt||!oa?[]:De,offscreen:ta,collisionDetected:zt,occluded:vt.occluded}}queryRenderedSymbols(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let A=1/0,T=1/0,S=-1/0,E=-1/0;for(const Y of o){const ae=new n.P(Y.x+Ys,Y.y+Ys);A=Math.min(A,ae.x),T=Math.min(T,ae.y),S=Math.max(S,ae.x),E=Math.max(E,ae.y),d.push(ae)}const k=this.grid.query(A,T,S,E).concat(this.ignoredGrid.query(A,T,S,E)),Z={},K={};for(const Y of k){const ae=Y.key;if(Z[ae.bucketInstanceId]===void 0&&(Z[ae.bucketInstanceId]={}),Z[ae.bucketInstanceId][ae.featureIndex])continue;const re=[new n.P(Y.x1,Y.y1),new n.P(Y.x2,Y.y1),new n.P(Y.x2,Y.y2),new n.P(Y.x1,Y.y2)];n.bv(d,re)&&(Z[ae.bucketInstanceId][ae.featureIndex]=!0,K[ae.bucketInstanceId]===void 0&&(K[ae.bucketInstanceId]=[]),K[ae.bucketInstanceId].push(ae.featureIndex))}return K}insertCollisionBox(o,d,A,T,S){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:A,featureIndex:T,collisionGroupID:S},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,d,A,T,S){const E=d?this.ignoredGrid:this.grid,k={bucketInstanceId:A,featureIndex:T,collisionGroupID:S};for(let Z=0;Z<o.length;Z+=4)E.insertCircle(k,o[Z],o[Z+1],o[Z+2])}projectAndGetPerspectiveRatio(o,d,A,T,S,E,k){const Z=[d,A,T,1];let K=!1;T||this.transform.pitch>0?(n.ad.vec4.transformMat4(Z,Z,o),this.fogState&&S&&k.name!=="globe"&&(K=function(re,pe,Pe,Ce,De,Le){const Ke=Le.calculateFogTileMatrix(De),it=[pe,Pe,Ce];return n.ad.vec3.transformMat4(it,it,Ke),Ga(re,n.ad.vec3.length(it),Le.pitch,Le._fov)}(this.fogState,d,A,T,S.toUnwrapped(),this.transform)>.9)):Ji(Z,Z,o);const Y=Z[3];return{point:new n.P((Z[0]/Y+1)/2*this.transform.width+Ys,(-Z[1]/Y+1)/2*this.transform.height+Ys),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(k)/Y*.5,1.5),signedDistanceFromCamera:Y,occluded:E&&Z[2]>Y||K}}isOffscreen(o,d,A,T){return A<Ys||o>=this.screenRightBoundary||T<Ys||d>this.screenBottomBoundary}isInsideGrid(o,d,A,T){return A>=0&&o<this.gridRightBoundary&&T>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const o=n.ad.mat4.identity([]);return n.ad.mat4.translate(o,o,[-100,-100,0]),o}}function hs(y,o,d){const A=o.createTileMatrix(y,y.worldSize,d.toUnwrapped());return n.ad.mat4.multiply(new Float32Array(16),y.projMatrix,A)}function Bh(y,o,d){if(o.projection.name===d.projection.name)return y.projMatrix;const A=d.clone();return A.setProjection(o.projection),hs(A,o.getProjection(),y)}function $o(y,o,d){return o.name===d.projection.name?y.projMatrix:hs(d,o,y)}class Vd{constructor(o,d,A,T){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?d:-d))):T&&A?1:0,this.placed=A}isHidden(){return this.opacity===0&&!this.placed}}class Cu{constructor(o,d,A,T,S,E=!1){this.text=new Vd(o?o.text:null,d,A,S),this.icon=new Vd(o?o.icon:null,d,T,S),this.clipped=E}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Su{constructor(o,d,A,T=!1){this.text=o,this.icon=d,this.skipFade=A,this.clipped=T}}class sp{constructor(){this.invProjMatrix=n.ad.mat4.create(),this.viewportMatrix=n.ad.mat4.create(),this.circles=[]}}class tu{constructor(o,d,A,T,S){this.bucketInstanceId=o,this.featureIndex=d,this.sourceLayerIndex=A,this.bucketIndex=T,this.tileID=S}}class Qm{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){const d=++this.maxGroupID;this.collisionGroups[o]={ID:d,predicate:A=>A.collisionGroupID===d}}return this.collisionGroups[o]}}function zd(y,o,d,A,T){const{horizontalAlign:S,verticalAlign:E}=n.bD(y),k=-(S-.5)*o,Z=-(E-.5)*d,K=n.bC(y,A);return new n.P(k+K[0]*T,Z+K[1]*T)}function Xs(y,o,d,A,T){const S=new n.P(y,o);return d&&S._rotate(A?T:-T),S}class Tf{constructor(o,d,A,T,S,E){this.transform=o.clone(),this.projection=o.projection.name,this.collisionIndex=new eu(this.transform,S),this.buildingIndex=E,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new Qm(A),this.collisionCircleArrays={},this.prevPlacement=T,T&&(T.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(o,d,A,T,S=1){const E=A.getBucket(d),k=A.latestFeatureIndex;if(!E||!k||d.fqid!==E.layerIds[0])return;const Z=E.layers[0].layout,K=E.layers[0].paint,Y=A.collisionBoxArray,ae=Math.pow(2,this.transform.zoom-A.tileID.overscaledZ),re=A.tileSize/n.ai,pe=A.tileID.toUnwrapped();this.transform.setProjection(E.projection);const Pe=(Ce=A.tileID,De=E.getProjection(),Le=this.transform,De.name===this.projection?Le.calculateProjMatrix(Ce.toUnwrapped()):hs(Le,De,Ce));var Ce,De,Le;const Ke=Z.get("text-pitch-alignment")==="map",it=Z.get("text-rotation-alignment")==="map";d.compileFilter(d.options);const tt=d.dynamicFilter(),pt=d.dynamicFilterNeedsFeature(),ut=this.transform.calculatePixelsToTileUnitsMatrix(A),ct=Ki(Pe,A.tileID.canonical,Ke,it,this.transform,E.getProjection(),ut);let dt=null;if(Ke){const sa=Di(Pe,A.tileID.canonical,Ke,it,this.transform,E.getProjection(),ut);dt=n.ad.mat4.multiply([],this.transform.labelPlaneMatrix,sa)}let vt=null;tt&&A.latestFeatureIndex&&(vt={unwrappedTileID:pe,dynamicFilter:tt,dynamicFilterNeedsFeature:pt}),this.retainedQueryData[E.bucketInstanceId]=new tu(E.bucketInstanceId,k,E.sourceLayerIndex,E.index,A.tileID);const[Tt,Qt]=E.layers[0].layout.get("text-size-scale-range"),kt=n.ay(S,Tt,Qt),[ra,ca]=Z.get("icon-size-scale-range"),xa=n.ay(S,ra,ca),Ft={bucket:E,layout:Z,paint:K,posMatrix:Pe,textLabelPlaneMatrix:ct,labelToScreenMatrix:dt,clippingData:vt,scale:ae,textPixelRatio:re,holdingForFade:A.holdingForFade(),collisionBoxArray:Y,partiallyEvaluatedTextSize:n.bp(E.textSizeData,this.transform.zoom,kt),partiallyEvaluatedIconSize:n.bp(E.iconSizeData,this.transform.zoom,xa),collisionGroup:this.collisionGroups.get(E.sourceID),latestFeatureIndex:A.latestFeatureIndex};if(T)for(const sa of E.sortKeyRanges){const{sortKey:zt,symbolInstanceStart:oa,symbolInstanceEnd:ta}=sa;o.push({sortKey:zt,symbolInstanceStart:oa,symbolInstanceEnd:ta,parameters:Ft})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:E.symbolInstances.length,parameters:Ft})}attemptAnchorPlacement(o,d,A,T,S,E,k,Z,K,Y,ae,re,pe,Pe,Ce,De,Le,Ke){const{textOffset0:it,textOffset1:tt,crossTileID:pt}=re,ut=[it,tt],ct=zd(o,A,T,ut,S),dt=this.collisionIndex.placeCollisionBox(Pe,S,d,Xs(ct.x,ct.y,E,k,this.transform.angle),ae,Z,K,Y.predicate);if(De){const vt=Pe.getSymbolInstanceIconSize(Ke,this.transform.zoom,re.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(Pe,vt,De,Xs(ct.x,ct.y,E,k,this.transform.angle),ae,Z,K,Y.predicate).box.length===0)return}if(dt.box.length>0){let vt;return this.prevPlacement&&this.prevPlacement.variableOffsets[pt]&&this.prevPlacement.placements[pt]&&this.prevPlacement.placements[pt].text&&(vt=this.prevPlacement.variableOffsets[pt].anchor),this.variableOffsets[pt]={textOffset:ut,width:A,height:T,anchor:o,textScale:S,prevAnchor:vt},this.markUsedJustification(Pe,o,re,Ce),Pe.allowVerticalPlacement&&(this.markUsedOrientation(Pe,Ce,re),this.placedOrientations[pt]=Ce),{shift:ct,placedGlyphBoxes:dt}}}placeLayerBucketPart(o,d,A,T,S=1){const{bucket:E,layout:k,paint:Z,posMatrix:K,textLabelPlaneMatrix:Y,labelToScreenMatrix:ae,clippingData:re,textPixelRatio:pe,holdingForFade:Pe,collisionBoxArray:Ce,partiallyEvaluatedTextSize:De,partiallyEvaluatedIconSize:Le,collisionGroup:Ke,latestFeatureIndex:it}=o.parameters,tt=k.get("text-optional"),pt=k.get("icon-optional"),ut=k.get("text-allow-overlap"),ct=k.get("icon-allow-overlap"),dt=k.get("text-rotation-alignment")==="map",vt=k.get("text-pitch-alignment")==="map",Tt=Z.get("symbol-z-offset"),Qt=k.get("symbol-elevation-reference")==="sea",[kt,ra]=k.get("text-size-scale-range"),[ca,xa]=k.get("icon-size-scale-range"),Ft=n.ay(S,kt,ra),sa=n.ay(S,ca,xa);this.transform.setProjection(E.projection);let zt=ut&&(ct||!E.hasIconData()||pt),oa=ct&&(ut||!E.hasTextData()||tt);const ta=!Tt.isConstant();!E.collisionArrays&&Ce&&E.deserializeCollisionBoxes(Ce),A&&T&&E.updateCollisionDebugBuffers(this.transform.zoom,Ce,Ft,sa);const da=(Xt,pa,La)=>{const{crossTileID:Fa,numVerticalGlyphVertices:Va}=Xt;let cr=null;if(re&&re.dynamicFilterNeedsFeature||ta){const Vn=this.retainedQueryData[E.bucketInstanceId];cr=it.loadFeature({featureIndex:Xt.featureIndex,bucketIndex:Vn.bucketIndex,sourceLayerIndex:Vn.sourceLayerIndex,layoutVertexArrayOffset:0})}if(re&&!(0,re.dynamicFilter)({zoom:this.transform.zoom,pitch:this.transform.pitch},cr,this.retainedQueryData[E.bucketInstanceId].tileID.canonical,new n.P(Xt.tileAnchorX,Xt.tileAnchorY),this.transform.calculateDistanceTileData(re.unwrappedTileID)))return this.placements[Fa]=new Su(!1,!1,!1,!0),void d.add(Fa);const jr=Tt.evaluate(cr,{});if(d.has(Fa))return;if(Pe)return void(this.placements[Fa]=new Su(!1,!1,!1));let vr=!1,Ir=!1,Or=!0,zr=!1,Gr=!1,Ur=null,mr={box:null,offscreen:null,occluded:null},fn={box:null},Er=null,rr=null,pn=null,Xn=0,An=0,kn=0;La.textFeatureIndex?Xn=La.textFeatureIndex:Xt.useRuntimeCollisionCircles&&(Xn=Xt.featureIndex),La.verticalTextFeatureIndex&&(An=La.verticalTextFeatureIndex);const ns=Vn=>{Vn.tileID=this.retainedQueryData[E.bucketInstanceId].tileID;const di=this.transform.elevation;Vn.elevation=Qt?jr:jr+(di?di.getAtTileOffset(Vn.tileID,Vn.tileAnchorX,Vn.tileAnchorY):0),Vn.elevation+=Xt.zOffset},_s=La.textBox;if(_s){ns(_s);const Vn=Bn=>{let fi=n.bq.horizontal;if(E.allowVerticalPlacement&&!Bn&&this.prevPlacement){const To=this.prevPlacement.placedOrientations[Fa];To&&(this.placedOrientations[Fa]=To,fi=To,this.markUsedOrientation(E,fi,Xt))}return fi},di=(Bn,fi)=>{if(E.allowVerticalPlacement&&Va>0&&La.verticalTextBox){for(const To of E.writingModes)if(To===n.bq.vertical?(mr=fi(),fn=mr):mr=Bn(),mr&&mr.box&&mr.box.length)break}else mr=Bn()};if(k.get("text-variable-anchor")){let Bn=k.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Fa]){const Oi=this.prevPlacement.variableOffsets[Fa];Bn.indexOf(Oi.anchor)>0&&(Bn=Bn.filter(ms=>ms!==Oi.anchor),Bn.unshift(Oi.anchor))}const fi=(Oi,ms,zc)=>{const Jo=E.getSymbolInstanceTextSize(De,Xt,this.transform.zoom,pa),du=(Oi.x2-Oi.x1)*Jo+2*Oi.padding,Gl=(Oi.y2-Oi.y1)*Jo+2*Oi.padding,sc=Xt.hasIconTextFit&&!ct?ms:null;sc&&ns(sc);let bl={box:[],offscreen:!1,occluded:!1};const Jd=ut?2*Bn.length:Bn.length;for(let Co=0;Co<Jd;++Co){const Vh=this.attemptAnchorPlacement(Bn[Co%Bn.length],Oi,du,Gl,Jo,dt,vt,pe,K,Ke,Co>=Bn.length,Xt,pa,E,zc,sc,De,Le);if(Vh&&(bl=Vh.placedGlyphBoxes,bl&&bl.box&&bl.box.length)){vr=!0,Ur=Vh.shift;break}}return bl};di(()=>fi(_s,La.iconBox,n.bq.horizontal),()=>{const Oi=La.verticalTextBox;return Oi&&ns(Oi),E.allowVerticalPlacement&&!(mr&&mr.box&&mr.box.length)&&Va>0&&Oi?fi(Oi,La.verticalIconBox,n.bq.vertical):{box:null,offscreen:null,occluded:null}}),mr&&(vr=mr.box,Or=mr.offscreen,zr=mr.occluded);const To=Vn(!(!mr||!mr.box));if(!vr&&this.prevPlacement){const Oi=this.prevPlacement.variableOffsets[Fa];Oi&&(this.variableOffsets[Fa]=Oi,this.markUsedJustification(E,Oi.anchor,Xt,To))}}else{const Bn=(fi,To)=>{const Oi=E.getSymbolInstanceTextSize(De,Xt,this.transform.zoom,pa,S),ms=this.collisionIndex.placeCollisionBox(E,Oi,fi,new n.P(0,0),ut,pe,K,Ke.predicate);return ms&&ms.box&&ms.box.length&&(this.markUsedOrientation(E,To,Xt),this.placedOrientations[Fa]=To),ms};di(()=>Bn(_s,n.bq.horizontal),()=>{const fi=La.verticalTextBox;return E.allowVerticalPlacement&&Va>0&&fi?(ns(fi),Bn(fi,n.bq.vertical)):{box:null,offscreen:null,occluded:null}}),Vn(!!(mr&&mr.box&&mr.box.length))}}if(Er=mr,vr=Er&&Er.box&&Er.box.length>0,Or=Er&&Er.offscreen,zr=Er&&Er.occluded,Xt.useRuntimeCollisionCircles){const Vn=E.text.placedSymbolArray.get(Xt.centerJustifiedTextSymbolIndex>=0?Xt.centerJustifiedTextSymbolIndex:Xt.verticalPlacedTextSymbolIndex),di=n.br(E.textSizeData,De,Vn),Bn=k.get("text-padding");rr=this.collisionIndex.placeCollisionCircles(E,ut,Vn,E.lineVertexArray,E.glyphOffsetArray,di,K,Y,ae,A,vt,Ke.predicate,Xt.collisionCircleDiameter*di/n.bw,Bn,this.retainedQueryData[E.bucketInstanceId].tileID),vr=ut||rr.circles.length>0&&!rr.collisionDetected,Or=Or&&rr.offscreen,zr=rr.occluded}if(La.iconFeatureIndex&&(kn=La.iconFeatureIndex),La.iconBox){const Vn=di=>{ns(di);const Bn=Xt.hasIconTextFit&&Ur?Xs(Ur.x,Ur.y,dt,vt,this.transform.angle):new n.P(0,0),fi=E.getSymbolInstanceIconSize(Le,this.transform.zoom,Xt.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(E,fi,di,Bn,ct,pe,K,Ke.predicate)};fn&&fn.box&&fn.box.length&&La.verticalIconBox?(pn=Vn(La.verticalIconBox),Ir=pn.box.length>0):(pn=Vn(La.iconBox),Ir=pn.box.length>0),Or=Or&&pn.offscreen,Gr=pn.occluded}const co=tt||Xt.numHorizontalGlyphVertices===0&&Va===0,ao=pt||Xt.numIconVertices===0;if(co||ao?ao?co||(Ir=Ir&&vr):vr=Ir&&vr:Ir=vr=Ir&&vr,vr&&Er&&Er.box&&this.collisionIndex.insertCollisionBox(Er.box,k.get("text-ignore-placement"),E.bucketInstanceId,fn&&fn.box&&An?An:Xn,Ke.ID),Ir&&pn&&this.collisionIndex.insertCollisionBox(pn.box,k.get("icon-ignore-placement"),E.bucketInstanceId,kn,Ke.ID),rr&&(vr&&this.collisionIndex.insertCollisionCircles(rr.circles,k.get("text-ignore-placement"),E.bucketInstanceId,Xn,Ke.ID),A)){const Vn=E.bucketInstanceId;let di=this.collisionCircleArrays[Vn];di===void 0&&(di=this.collisionCircleArrays[Vn]=new sp);for(let Bn=0;Bn<rr.circles.length;Bn+=4)di.circles.push(rr.circles[Bn+0]),di.circles.push(rr.circles[Bn+1]),di.circles.push(rr.circles[Bn+2]),di.circles.push(rr.collisionDetected?1:0)}const Ro=E.projection.name!=="globe";zt=zt&&(Ro||!zr),oa=oa&&(Ro||!Gr),this.placements[Fa]=new Su(vr||zt,Ir||oa,Or||E.justReloaded),d.add(Fa)};if(E.elevationType==="offset"&&this.buildingIndex&&this.buildingIndex.updateZOffset(E,this.retainedQueryData[E.bucketInstanceId].tileID),E.elevationType==="road"&&E.updateRoadElevation(),E.updateZOffset(),E.sortFeaturesByY){const Xt=E.getSortedSymbolIndexes(this.transform.angle);for(let pa=Xt.length-1;pa>=0;--pa){const La=Xt[pa];da(E.symbolInstances.get(La),La,E.collisionArrays[La])}E.hasAnyZOffset&&n.w(`${E.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(E.hasAnyZOffset){const Xt=E.getSortedIndexesByZOffset();for(let pa=0;pa<Xt.length;++pa){const La=Xt[pa];da(E.symbolInstances.get(La),La,E.collisionArrays[La])}}else for(let Xt=o.symbolInstanceStart;Xt<o.symbolInstanceEnd;Xt++)da(E.symbolInstances.get(Xt),Xt,E.collisionArrays[Xt]);if(A&&E.bucketInstanceId in this.collisionCircleArrays){const Xt=this.collisionCircleArrays[E.bucketInstanceId];n.ad.mat4.invert(Xt.invProjMatrix,K),Xt.viewportMatrix=this.collisionIndex.getViewportMatrix()}E.justReloaded=!1}markUsedJustification(o,d,A,T){const{leftJustifiedTextSymbolIndex:S,centerJustifiedTextSymbolIndex:E,rightJustifiedTextSymbolIndex:k,verticalPlacedTextSymbolIndex:Z,crossTileID:K}=A,Y=n.bB(d),ae=T===n.bq.vertical?Z:Y==="left"?S:Y==="center"?E:Y==="right"?k:-1;S>=0&&(o.text.placedSymbolArray.get(S).crossTileID=ae>=0&&S!==ae?0:K),E>=0&&(o.text.placedSymbolArray.get(E).crossTileID=ae>=0&&E!==ae?0:K),k>=0&&(o.text.placedSymbolArray.get(k).crossTileID=ae>=0&&k!==ae?0:K),Z>=0&&(o.text.placedSymbolArray.get(Z).crossTileID=ae>=0&&Z!==ae?0:K)}markUsedOrientation(o,d,A){const T=d===n.bq.horizontal||d===n.bq.horizontalOnly?d:0,S=d===n.bq.vertical?d:0,{leftJustifiedTextSymbolIndex:E,centerJustifiedTextSymbolIndex:k,rightJustifiedTextSymbolIndex:Z,verticalPlacedTextSymbolIndex:K}=A,Y=o.text.placedSymbolArray;E>=0&&(Y.get(E).placedOrientation=T),k>=0&&(Y.get(k).placedOrientation=T),Z>=0&&(Y.get(Z).placedOrientation=T),K>=0&&(Y.get(K).placedOrientation=S)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let A=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const T=d?d.symbolFadeChange(o):1,S=d?d.opacities:{},E=d?d.variableOffsets:{},k=d?d.placedOrientations:{};for(const Z in this.placements){const K=this.placements[Z],Y=S[Z];Y?(this.opacities[Z]=new Cu(Y,T,K.text,K.icon,null,K.clipped),A=A||K.text!==Y.text.placed||K.icon!==Y.icon.placed):(this.opacities[Z]=new Cu(null,T,K.text,K.icon,K.skipFade,K.clipped),A=A||K.text||K.icon)}for(const Z in S){const K=S[Z];if(!this.opacities[Z]){const Y=new Cu(K,T,!1,!1);Y.isHidden()||(this.opacities[Z]=Y,A=A||K.text.placed||K.icon.placed)}}for(const Z in E)this.variableOffsets[Z]||!this.opacities[Z]||this.opacities[Z].isHidden()||(this.variableOffsets[Z]=E[Z]);for(const Z in k)this.placedOrientations[Z]||!this.opacities[Z]||this.opacities[Z].isHidden()||(this.placedOrientations[Z]=k[Z]);A?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:o)}updateLayerOpacities(o,d,A,T){const S=new Set;for(const E of d){const k=E.getBucket(o);k&&E.latestFeatureIndex&&o.fqid===k.layerIds[0]&&(this.updateBucketOpacities(k,S,E,E.collisionBoxArray,A,T,E.tileID,o.scope),k.elevationType==="offset"&&this.buildingIndex&&this.buildingIndex.updateZOffset(k,E.tileID),k.elevationType==="road"&&k.updateRoadElevation(),k.updateZOffset())}}updateBucketOpacities(o,d,A,T,S,E,k,Z){o.hasTextData()&&o.text.opacityVertexArray.clear(),o.hasIconData()&&o.icon.opacityVertexArray.clear(),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();const K=o.layers[0].layout,Y=o.layers[0].paint,ae=!!o.layers[0].dynamicFilter(),re=new Cu(null,0,!1,!1,!0),pe=K.get("text-allow-overlap"),Pe=K.get("icon-allow-overlap"),Ce=K.get("text-variable-anchor"),De=K.get("text-rotation-alignment")==="map",Le=K.get("text-pitch-alignment")==="map",Ke=Y.get("symbol-z-offset"),it=K.get("symbol-elevation-reference")==="sea",tt=!Ke.isConstant(),pt=new Cu(null,0,pe&&(Pe||!o.hasIconData()||K.get("icon-optional")),Pe&&(pe||!o.hasTextData()||K.get("text-optional")),!0);!o.collisionArrays&&T&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(T);const ut=(dt,vt,Tt)=>{for(let Qt=0;Qt<vt/4;Qt++)dt.opacityVertexArray.emplaceBack(Tt)};let ct=0;E&&o.updateReplacement(k,E);for(let dt=0;dt<o.symbolInstances.length;dt++){const vt=o.symbolInstances.get(dt),{numHorizontalGlyphVertices:Tt,numVerticalGlyphVertices:Qt,crossTileID:kt,numIconVertices:ra,tileAnchorX:ca,tileAnchorY:xa}=vt;let Ft=null;const sa=this.retainedQueryData[o.bucketInstanceId];tt&&vt&&sa&&(Ft=A.latestFeatureIndex.loadFeature({featureIndex:vt.featureIndex,bucketIndex:sa.bucketIndex,sourceLayerIndex:sa.sourceLayerIndex,layoutVertexArrayOffset:0}));const zt=Ke.evaluate(Ft,{}),oa=d.has(kt);let ta=this.opacities[kt];oa?ta=re:ta||(ta=pt,this.opacities[kt]=ta),d.add(kt);const da=Tt>0||Qt>0,Xt=ra>0,pa=this.placedOrientations[kt],La=pa===n.bq.vertical,Fa=pa===n.bq.horizontal||pa===n.bq.horizontalOnly;!da&&!Xt||ta.isHidden()||ct++;let Va=!1;if((da||Xt)&&E)for(const cr of o.activeReplacements){if(n.bx(cr,S,n.by.Symbol,Z)||cr.min.x>ca||ca>cr.max.x||cr.min.y>xa||xa>cr.max.y)continue;const jr=n.bz(ca,xa,k.canonical,cr.footprintTileId.canonical);if(Va=n.bA(jr,cr.footprint),Va)break}if(da){const cr=Va?xr:ir(ta.text);ut(o.text,Tt,La?xr:cr),ut(o.text,Qt,Fa?xr:cr);const jr=ta.text.isHidden(),{leftJustifiedTextSymbolIndex:vr,centerJustifiedTextSymbolIndex:Ir,rightJustifiedTextSymbolIndex:Or,verticalPlacedTextSymbolIndex:zr}=vt,Gr=o.text.placedSymbolArray,Ur=jr||La?1:0;vr>=0&&(Gr.get(vr).hidden=Ur),Ir>=0&&(Gr.get(Ir).hidden=Ur),Or>=0&&(Gr.get(Or).hidden=Ur),zr>=0&&(Gr.get(zr).hidden=jr||Fa?1:0);const mr=this.variableOffsets[kt];mr&&this.markUsedJustification(o,mr.anchor,vt,pa);const fn=this.placedOrientations[kt];fn&&(this.markUsedJustification(o,"left",vt,fn),this.markUsedOrientation(o,fn,vt))}if(Xt){const cr=Va?xr:ir(ta.icon),{placedIconSymbolIndex:jr,verticalPlacedIconSymbolIndex:vr}=vt,Ir=o.icon.placedSymbolArray,Or=ta.icon.isHidden()?1:0;jr>=0&&(ut(o.icon,ra,La?xr:cr),Ir.get(jr).hidden=Or),vr>=0&&(ut(o.icon,vt.numVerticalIconVertices,Fa?xr:cr),Ir.get(vr).hidden=Or)}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){const cr=o.collisionArrays[dt];if(cr){let jr=new n.P(0,0),vr=!0;if(cr.textBox||cr.verticalTextBox){if(Ce){const Or=this.variableOffsets[kt];Or?(jr=zd(Or.anchor,Or.width,Or.height,Or.textOffset,Or.textScale),De&&jr._rotate(Le?this.transform.angle:-this.transform.angle)):vr=!1}ae&&(vr=!ta.clipped),cr.textBox&&au(o.textCollisionBox.collisionVertexArray,ta.text.placed,!vr||La,zt,it,jr.x,jr.y),cr.verticalTextBox&&au(o.textCollisionBox.collisionVertexArray,ta.text.placed,!vr||Fa,zt,it,jr.x,jr.y)}const Ir=vr&&!!(!Fa&&cr.verticalIconBox);cr.iconBox&&au(o.iconCollisionBox.collisionVertexArray,ta.icon.placed,Ir,zt,it,vt.hasIconTextFit?jr.x:0,vt.hasIconTextFit?jr.y:0),cr.verticalIconBox&&au(o.iconCollisionBox.collisionVertexArray,ta.icon.placed,!Ir,zt,it,vt.hasIconTextFit?jr.x:0,vt.hasIconTextFit?jr.y:0)}}}if(o.fullyClipped=ct===0,o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.bucketInstanceId in this.collisionCircleArrays){const dt=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=dt.invProjMatrix,o.placementViewportMatrix=dt.viewportMatrix,o.collisionCircleArray=dt.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}}symbolFadeChange(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,d){const A=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*A>o}setStale(){this.stale=!0}}function au(y,o,d,A,T,S,E){y.emplaceBack(o?1:0,d?1:0,S||0,E||0,A,T?1:0),y.emplaceBack(o?1:0,d?1:0,S||0,E||0,A,T?1:0),y.emplaceBack(o?1:0,d?1:0,S||0,E||0,A,T?1:0),y.emplaceBack(o?1:0,d?1:0,S||0,E||0,A,T?1:0)}const Cf=Math.pow(2,25),ce=Math.pow(2,24),Je=Math.pow(2,17),Mt=Math.pow(2,16),Jt=Math.pow(2,9),ha=Math.pow(2,8),Ma=Math.pow(2,1);function ir(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const o=y.placed?1:0,d=Math.floor(127*y.opacity);return d*Cf+o*ce+d*Je+o*Mt+d*Jt+o*ha+d*Ma+o}const xr=0;class Jr{constructor(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&o.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(o,d,A,T,S,E){const k=this._bucketParts;for(;this._currentTileIndex<o.length;)if(d.getBucketParts(k,T,o[this._currentTileIndex],this._sortAcrossTiles,E),this._currentTileIndex++,S())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,k.sort((Z,K)=>Z.sortKey-K.sortKey));this._currentPartIndex<k.length;){const Z=k[this._currentPartIndex];if(d.placeLayerBucketPart(Z,this._seenCrossTileIDs,A,Z.symbolInstanceStart===0,E),this._currentPartIndex++,S())return!0}return!1}}class On{constructor(o,d,A,T,S,E,k,Z,K){this.placement=new Tf(o,S,E,k,Z,K),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=A,this._showCollisionBoxes=T,this._done=!1}isDone(){return this._done}continuePlacement(o,d,A,T,S){const E=n.q.now(),k=()=>{const Z=n.q.now()-E;return!this._forceFullPlacement&&Z>2};for(;this._currentPlacementIndex>=0;){const Z=d[o[this._currentPlacementIndex]],K=this.placement.collisionIndex.transform.zoom;if(Z.type==="symbol"&&(!Z.minzoom||Z.minzoom<=K)&&(!Z.maxzoom||Z.maxzoom>K)){const Y=Z,ae=Y.layout.get("symbol-z-elevate"),re=Y.layout.get("symbol-sort-key").constantOr(1)!==void 0,pe=Y.layout.get("symbol-z-order"),Pe=pe==="viewport-y"||pe==="auto"&&!(pe!=="viewport-y"&&re),Ce=Y.layout.get("text-allow-overlap")||Y.layout.get("icon-allow-overlap")||Y.layout.get("text-ignore-placement")||Y.layout.get("icon-ignore-placement"),De=Pe&&Ce,Le=this._inProgressLayer=this._inProgressLayer||new Jr(Y),Ke=n.C(Z.source,Z.scope);if(Le.continuePlacement(ae||De?T[Ke]:A[Ke],this.placement,this._showCollisionBoxes,Z,k,S))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}const Fn=512/n.ai/2;class Ri{constructor(o,d,A){this.tileID=o,this.bucketInstanceId=A,this.index=new n.bE(d.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const T=o.canonical.x*n.ai,S=o.canonical.y*n.ai;for(let E=0;E<d.length;E++){const{key:k,crossTileID:Z,tileAnchorX:K,tileAnchorY:Y}=d.get(E),ae=Math.floor((T+K)*Fn),re=Math.floor((S+Y)*Fn);this.index.add(ae,re),this.keys.push(k),this.crossTileIDs.push(Z)}this.index.finish()}findMatches(o,d,A){const T=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z),S=Fn/Math.pow(2,d.canonical.z-this.tileID.canonical.z),E=d.canonical.x*n.ai,k=d.canonical.y*n.ai;for(let Z=0;Z<o.length;Z++){const K=o.get(Z);if(K.crossTileID)continue;const{key:Y,tileAnchorX:ae,tileAnchorY:re}=K,pe=Math.floor((E+ae)*S),Pe=Math.floor((k+re)*S),Ce=this.index.range(pe-T,Pe-T,pe+T,Pe+T);for(const De of Ce){const Le=this.crossTileIDs[De];if(this.keys[De]===Y&&!A.has(Le)){A.add(Le),K.crossTileID=Le;break}}}}}class zs{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ds{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){const d=Math.round((o-this.lng)/360);if(d!==0)for(const A in this.indexes){const T=this.indexes[A],S={};for(const E in T){const k=T[E];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+d),S[k.tileID.key]=k}this.indexes[A]=S}this.lng=o}addBucket(o,d,A){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let S=0;S<d.symbolInstances.length;S++)d.symbolInstances.get(S).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]=new Set);const T=this.usedCrossTileIDs[o.overscaledZ];for(const S in this.indexes){const E=this.indexes[S];if(Number(S)>o.overscaledZ)for(const k in E){const Z=E[k];Z.tileID.isChildOf(o)&&Z.findMatches(d.symbolInstances,o,T)}else{const k=E[o.scaledTo(Number(S)).key];k&&k.findMatches(d.symbolInstances,o,T)}}for(let S=0;S<d.symbolInstances.length;S++){const E=d.symbolInstances.get(S);E.crossTileID||(E.crossTileID=A.generate(),T.add(E.crossTileID))}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new Ri(o,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(o,d){for(const A of d.crossTileIDs)this.usedCrossTileIDs[o].delete(A)}removeStaleBuckets(o){let d=!1;for(const A in this.indexes){const T=this.indexes[A];for(const S in T)o[T[S].bucketInstanceId]||(this.removeBucketCrossTileIDs(A,T[S]),delete T[S],d=!0)}return d}}class io{constructor(){this.layerIndexes={},this.crossTileIDs=new zs,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,d,A,T){let S=this.layerIndexes[o.fqid];S===void 0&&(S=this.layerIndexes[o.fqid]=new Ds);let E=!1;const k={};T.name!=="globe"&&S.handleWrapJump(A);for(const Z of d){const K=Z.getBucket(o);K&&o.fqid===K.layerIds[0]&&(K.bucketInstanceId||(K.bucketInstanceId=++this.maxBucketInstanceId),S.addBucket(Z.tileID,K,this.crossTileIDs)&&(E=!0),k[K.bucketInstanceId]=!0)}return S.removeStaleBuckets(k)&&(E=!0),E}pruneUnusedLayers(o){const d={};o.forEach(A=>{d[A]=!0});for(const A in this.layerIndexes)d[A]||delete this.layerIndexes[A]}}const os=771;class Vr{constructor(o,d,A,T){this.blendFunction=o,this.blendColor=d,this.mask=A,this.blendEquation=T}}Vr.Replace=[1,0,1,0],Vr.disabled=new Vr(Vr.Replace,n.al.transparent,[!1,!1,!1,!1]),Vr.unblended=new Vr(Vr.Replace,n.al.transparent,[!0,!0,!0,!0]),Vr.alphaBlended=new Vr([1,os,1,os],n.al.transparent,[!0,!0,!0,!0]),Vr.alphaBlendedNonPremultiplied=new Vr([770,os,770,os],n.al.transparent,[!0,!0,!0,!0]),Vr.multiply=new Vr([774,0,774,0],n.al.transparent,[!0,!0,!0,!0]);class ur{constructor(o,d,A){this.func=o,this.mask=d,this.range=A}}ur.ReadOnly=!1,ur.ReadWrite=!0,ur.disabled=new ur(519,ur.ReadOnly,[0,1]);const vl=7680;class Pr{constructor(o,d,A,T,S,E){this.test=o,this.ref=d,this.mask=A,this.fail=T,this.depthFail=S,this.pass=E}}Pr.disabled=new Pr({func:519,mask:0},0,0,vl,vl,vl);const bu=1029,ru=2305;class Sr{constructor(o,d,A){this.enable=o,this.mode=d,this.frontFace=A}}function yh(y,o){const d=n.bG(y,3);n.ad.mat4.fromQuat(y,o),n.bI(y,3,d)}function nu(y,o){const d=n.ad.quat.identity([]);return n.ad.quat.rotateZ(d,d,-o),n.ad.quat.rotateX(d,d,-y),d}function vc(y,o){const d=[y[0],y[1],0],A=[o[0],o[1],0];if(n.ad.vec3.length(d)>=1e-15){const E=n.ad.vec3.normalize([],d);n.ad.vec3.scale(A,E,n.ad.vec3.dot(A,E)),o[0]=A[0],o[1]=A[1]}const T=n.ad.vec3.cross([],o,y);if(n.ad.vec3.len(T)<1e-15)return null;const S=Math.atan2(-T[1],T[0]);return nu(Math.atan2(Math.sqrt(y[0]*y[0]+y[1]*y[1]),-y[2]),S)}Sr.disabled=new Sr(!1,bu,ru),Sr.backCCW=new Sr(!0,bu,ru),Sr.backCW=new Sr(!0,bu,2304),Sr.frontCW=new Sr(!0,1028,2304),Sr.frontCCW=new Sr(!0,1028,ru);class Dd{constructor(o,d){this.position=o,this.orientation=d}get position(){return this._position}set position(o){if(o){const d=o instanceof n.ac?o:new n.ac(o[0],o[1],o[2]);this._renderWorldCopies&&(d.x=n.bF(d.x,0,1)),this._position=d}else this._position=null}lookAtPoint(o,d){if(this.orientation=null,!this.position)return;const A=this.position,T=this._elevation?this._elevation.getAtPointOrZero(n.ac.fromLngLat(o)):0,S=n.ac.fromLngLat(o,T),E=[S.x-A.x,S.y-A.y,S.z-A.z];d||(d=[0,0,1]),d[2]=Math.abs(d[2]),this.orientation=vc(E,d)}setPitchBearing(o,d){this.orientation=nu(n.ak(o),n.ak(-d))}}class Ms{constructor(o,d){this._transform=n.ad.mat4.identity([]),this.orientation=d,this.position=o}get mercatorPosition(){const o=this.position;return new n.ac(o[0],o[1],o[2])}get position(){const o=n.bG(this._transform,3);return[o[0],o[1],o[2]]}set position(o){var d;o&&n.bI(this._transform,3,[(d=o)[0],d[1],d[2],1])}get orientation(){return this._orientation}set orientation(o){this._orientation=o||n.ad.quat.identity([]),o&&yh(this._transform,this._orientation)}getPitchBearing(){const o=this.forward(),d=this.right();return{bearing:Math.atan2(-d[1],d[0]),pitch:Math.atan2(Math.sqrt(o[0]*o[0]+o[1]*o[1]),-o[2])}}setPitchBearing(o,d){this._orientation=nu(o,d),yh(this._transform,this._orientation)}forward(){const o=n.bG(this._transform,2);return[-o[0],-o[1],-o[2]]}up(){const o=n.bG(this._transform,1);return[-o[0],-o[1],-o[2]]}right(){const o=n.bG(this._transform,0);return[o[0],o[1],o[2]]}getCameraToWorld(o,d){const A=new Float64Array(16);return n.ad.mat4.invert(A,this.getWorldToCamera(o,d)),A}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(o,d,A){const T=this.position;n.ad.vec3.scale(T,T,-o);const S=new Float64Array(16);return n.ad.mat4.fromScaling(S,[A,A,A]),n.ad.mat4.translate(S,S,T),S[10]*=d,S}getWorldToCamera(o,d){const A=new Float64Array(16),T=new Float64Array(4),S=this.position;return n.ad.quat.conjugate(T,this._orientation),n.ad.vec3.scale(S,S,-o),n.ad.mat4.fromQuat(A,T),n.ad.mat4.translate(A,A,S),A[1]*=-1,A[5]*=-1,A[9]*=-1,A[13]*=-1,A[8]*=d,A[9]*=d,A[10]*=d,A[11]*=d,A}getCameraToClipPerspective(o,d,A,T){const S=new Float64Array(16);return n.ad.mat4.perspective(S,o,d,A,T),S}getCameraToClipOrthographic(o,d,A,T,S,E){const k=new Float64Array(16);return n.ad.mat4.ortho(k,o,d,A,T,S,E),k}getDistanceToElevation(o,d=!1){const A=o===0?0:n.bH(o,d?n.aT(this.position[1]):this.position[1]),T=this.forward();return(A-this.position[2])/T[2]}clone(){return new Ms([...this.position],[...this.orientation])}}const bi={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,LUT:10,ShadowMap0:11};class _c{constructor(o=0,d=0,A=0,T=0){if(isNaN(o)||o<0||isNaN(d)||d<0||isNaN(A)||A<0||isNaN(T)||T<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=d,this.left=A,this.right=T}interpolate(o,d,A){return d.top!=null&&o.top!=null&&(this.top=n.ah(o.top,d.top,A)),d.bottom!=null&&o.bottom!=null&&(this.bottom=n.ah(o.bottom,d.bottom,A)),d.left!=null&&o.left!=null&&(this.left=n.ah(o.left,d.left,A)),d.right!=null&&o.right!=null&&(this.right=n.ah(o.right,d.right,A)),this}getCenter(o,d){const A=n.ay((this.left+o-this.right)/2,0,o),T=n.ay((this.top+d-this.bottom)/2,0,d);return new n.P(A,T)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new _c(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const za=15;class Md{constructor(o,d,A,T,S,E,k){this.tileSize=512,this._renderWorldCopies=S===void 0||S,this._minZoom=o||0,this._maxZoom=d||22,this._minPitch=A??0,this._maxPitch=T??60,this.setProjection(E),this.setMaxBounds(k),this.width=0,this.height=0,this._center=new n.bO(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new _c,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new Ms,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1,this._allowWorldUnderZoom=!1}clone(){const o=new Md(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection(),this.maxBounds);return o._elevation=this._elevation,o._centerAltitude=this._centerAltitude,o._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,o.tileSize=this.tileSize,o.mercatorFromTransition=this.mercatorFromTransition,o.width=this.width,o.height=this.height,o.cameraElevationReference=this.cameraElevationReference,o._center=this._center,o._setZoom(this.zoom),o._seaLevelZoom=this._seaLevelZoom,o.angle=this.angle,o._fov=this._fov,o._pitch=this._pitch,o._nearZ=this._nearZ,o._farZ=this._farZ,o._averageElevation=this._averageElevation,o._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,o._unmodified=this._unmodified,o._edgeInsets=this._edgeInsets.clone(),o._camera=this._camera.clone(),o._calcMatrices(),o.freezeTileCoverage=this.freezeTileCoverage,o.frustumCorners=this.frustumCorners,o._allowWorldUnderZoom=this._allowWorldUnderZoom,o}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<za}get elevation(){return this._elevation}set elevation(o){this._elevation!==o&&(this._elevation=o,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(o,d=!1){const A=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||A)&&this._updateCameraOnTerrain(),(o||A)&&this._constrainCamera(d),this._calcMatrices()}getProjection(){return n.aA(this.projection,["name","center","parallels"])}setProjection(o){this.projectionOptions=o||{name:"mercator"};const d=this.projection?this.getProjection():void 0;this.projection=n.bP(this.projectionOptions);const A=this.getProjection(),T=!n.bn(d,A);return T&&this._calcMatrices(),this.mercatorFromTransition=!1,T}setOrthographicProjectionAtLowPitch(o){return this._orthographicProjectionAtLowPitch!==o&&(this._orthographicProjectionAtLowPitch=o,this._calcMatrices(),!0)}setMercatorFromTransition(){const o=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=n.bP({name:"mercator"});const d=o!==this.projection.name;return d&&this._calcMatrices(),d}get minZoom(){return this._minZoom}set minZoom(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))}get maxZoom(){return this._maxZoom}set maxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))}get minPitch(){return this._minPitch}set minPitch(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))}get maxPitch(){return this._maxPitch}set maxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const o=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(o))}get cameraWorldSize(){const o=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(o))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return n.bH(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new n.P(this.width,this.height)}get bearing(){return n.bF(this.rotation,-180,180)}set bearing(o){this.rotation=o}get rotation(){return-this.angle/Math.PI*180}set rotation(o){const d=-o*Math.PI/180;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=n.ad.mat2.create(),n.ad.mat2.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(o){const d=n.ay(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}set fov(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=n.ak(o),this._calcMatrices())}get fovX(){return this._fov}get fovY(){const o=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/o)}get averageElevation(){return this._averageElevation}set averageElevation(o){this._averageElevation=o,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(o){const d=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._setZoom(d),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(o){this._zoom=o,this.scale=this.zoomScale(o),this.tileZoom=Math.floor(o),this.zoomFraction=o-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(o){this._tileCoverLift!==o&&(this._tileCoverLift=o)}_updateCameraOnTerrain(){const o=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,d=this.elevation&&o===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||o===Number.NEGATIVE_INFINITY&&(!d||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const A=this._elevation;d||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&A.exaggeration()&&this._centerAltitudeValidForExaggeration!==A.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*A.exaggeration(),this._centerAltitudeValidForExaggeration=A.exaggeration()):(this._centerAltitude=o||0,this._centerAltitudeValidForExaggeration=A.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const o=this._elevation,d=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],A=this.horizonLineFromTop();let T=0,S=0;for(let E=0;E<d.length;E++){const k=new n.P(d[E][0]*this.width,A+d[E][1]*(this.height-A)),Z=o.pointCoordinate(k);if(!Z)continue;const K=1/Math.hypot(Z[0]-this._camera.position[0],Z[1]-this._camera.position[1]);T+=Z[3]*K,S+=K}return S===0?NaN:T/S}get center(){return this._center}set center(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const o=this._seaLevelZoom,d=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),A=this.pixelsPerMeter/this.worldSize*d,T=this._mercatorZfromZoom(o),S=this._mercatorZfromZoom(this._maxZoom),E=Math.max(T-A,S);this._setZoom(this._zoomFromMercatorZ(E))}get padding(){return this._edgeInsets.toJSON()}set padding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}computeZoomRelativeTo(o){const d=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,o.toAltitude()));let A;A=o.z<this._camera.position[2]?[d.x,d.y,d.z]:[o.x,o.y,o.z];const T=n.ad.vec3.length(n.ad.vec3.sub([],this._camera.position,A));return n.ay(this._zoomFromMercatorZ(T),this._minZoom,this._maxZoom)}setFreeCameraOptions(o){if(!this.height||!o.position&&!o.orientation)return;this._updateCameraState();let d=!1;if(o.orientation&&!n.ad.quat.exactEquals(o.orientation,this._camera.orientation)&&(d=this._setCameraOrientation(o.orientation)),o.position){const A=[o.position.x,o.position.y,o.position.z];n.ad.vec3.exactEquals(A,this._camera.position)||(this._setCameraPosition(A),d=!0)}d&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const o=this._camera.position,d=new Dd;return d.position=new n.ac(o[0],o[1],o[2]),d.orientation=this._camera.orientation,d._elevation=this.elevation,d._renderWorldCopies=this.renderWorldCopies,d}_setCameraOrientation(o){if(!n.ad.quat.length(o))return!1;n.ad.quat.normalize(o,o);const d=n.ad.vec3.transformQuat([],[0,0,-1],o),A=n.ad.vec3.transformQuat([],[0,-1,0],o);if(A[2]<0)return!1;const T=vc(d,A);return!!T&&(this._camera.orientation=T,!0)}_setCameraPosition(o){const d=this.zoomScale(this.minZoom)*this.tileSize,A=this.zoomScale(this.maxZoom)*this.tileSize,T=this.cameraToCenterDistance;o[2]=n.ay(o[2],T/A,T/d),this._camera.position=o}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,d,A){this._unmodified=!1,this._edgeInsets.interpolate(o,d,A),this._constrain(),this._calcMatrices()}coveringZoomLevel(o){const d=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(o){const d=[new n.bQ(0,o)];if(this.renderWorldCopies){const A=this.pointCoordinate(new n.P(0,0)),T=this.pointCoordinate(new n.P(this.width,0)),S=this.pointCoordinate(new n.P(this.width,this.height)),E=this.pointCoordinate(new n.P(0,this.height)),k=Math.floor(Math.min(A.x,T.x,S.x,E.x)),Z=Math.floor(Math.max(A.x,T.x,S.x,E.x)),K=1;for(let Y=k-K;Y<=Z+K;Y++)Y!==0&&d.push(new n.bQ(Y,o))}return d}isLODDisabled(o){return(!o||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCover(o,d,A){let T=[];const S=A!==void 0,E=!S;if(E&&this.zoom<d||S&&A[0]===0&&A[1]===0)return T;const k=new Set,Z=(Y,ae,re,pe,Pe)=>{const Ce=n.c5(ae,Y,re,pe,Pe);k.has(Ce)||(T.push(new n.aH(Y,ae,re,pe,Pe)),k.add(Ce))};for(let Y=0;Y<o.length;Y++){const ae=o[Y];if(E&&ae.canonical.z!==d)continue;const re=ae.canonical,pe=ae.overscaledZ,Pe=ae.wrap,Ce=1<<re.z,De=re.x+1<Ce,Le=re.x>0,Ke=re.y+1<Ce,it=re.y>0,tt=ae.wrap-(Le?0:1),pt=ae.wrap+(De?0:1),ut=Le?re.x-1:Ce-1,ct=De?re.x+1:0;if(S)A[0]<0?(Z(pe,pt,re.z,ct,re.y),A[1]<0&&Ke&&(Z(pe,Pe,re.z,re.x,re.y+1),Z(pe,pt,re.z,ct,re.y+1)),A[1]>0&&it&&(Z(pe,Pe,re.z,re.x,re.y-1),Z(pe,pt,re.z,ct,re.y-1))):A[0]>0?(Z(pe,tt,re.z,ut,re.y),A[1]<0&&Ke&&(Z(pe,Pe,re.z,re.x,re.y+1),Z(pe,tt,re.z,ut,re.y+1)),A[1]>0&&it&&(Z(pe,Pe,re.z,re.x,re.y-1),Z(pe,tt,re.z,ut,re.y-1))):A[1]<0&&Ke?Z(pe,Pe,re.z,re.x,re.y+1):it&&Z(pe,Pe,re.z,re.x,re.y-1);else{const dt=ae.visibleQuadrants;1&dt&&(Z(pe,tt,re.z,ut,re.y),it&&(Z(pe,Pe,re.z,re.x,re.y-1),Z(pe,tt,re.z,ut,re.y-1))),2&dt&&(Z(pe,pt,re.z,ct,re.y),it&&(Z(pe,Pe,re.z,re.x,re.y-1),Z(pe,pt,re.z,ct,re.y-1))),4&dt&&(Z(pe,tt,re.z,ut,re.y),Ke&&(Z(pe,Pe,re.z,re.x,re.y+1),Z(pe,tt,re.z,ut,re.y+1))),8&dt&&(Z(pe,pt,re.z,ct,re.y),Ke&&(Z(pe,Pe,re.z,re.x,re.y+1),Z(pe,pt,re.z,ct,re.y+1)))}}const K=[];for(const Y of T)T.some(ae=>Y.isChildOf(ae))||K.push(Y);if(T=K.filter(Y=>!o.some(ae=>!!(Y.overscaledZ<d&&ae.isChildOf(Y))||Y.equals(ae)||Y.isChildOf(ae))),E){const Y=1<<d,ae=this.projection.name==="globe"?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),re=[Y*ae.x,Y*ae.y],pe=4,Pe=pe*pe;T=T.filter(Ce=>{const De=Ce.canonical.x+.5-re[0],Le=Ce.canonical.y+.5-re[1];return De*De+Le*Le<Pe})}return T}coveringTiles(o){let d=this.coveringZoomLevel(o);const A=d,T=this.elevation&&this.elevation.exaggeration(),S=T&&!o.isTerrainDEM,E=this.projection.name==="mercator";if(o.minzoom!==void 0&&d<o.minzoom)return[];o.maxzoom!==void 0&&d>o.maxzoom&&(d=o.maxzoom);const k=this.locationCoordinate(this.center),Z=this.center.lat,K=1<<d,Y=[K*k.x,K*k.y,0],ae=this.projection.name==="globe",re=!ae,pe=n.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,d,re),Pe=ae?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),Ce=K*n.bH(1,this.center.lat),De=this._camera.position[2]/n.bH(1,this.center.lat),Le=[K*Pe.x,K*Pe.y,De*(re?1:Ce)],Ke=ae||T,it=this.cameraToCenterDistance/o.tileSize*(o.roundZoom?1:.502),tt=this.isLODDisabled(!0)?d:0;let pt;if(this._elevation&&o.isTerrainDEM)pt=1e4*this._elevation.exaggeration();else if(this._elevation){const zt=this._elevation.getMinMaxForVisibleTiles();pt=zt?zt.max:this._centerAltitude}else pt=this._centerAltitude;const ut=o.isTerrainDEM?-pt:this._elevation?this._elevation.getMinElevationBelowMSL():0,ct=this.projection.isReprojectedInTileSpace?n.bS(this):1,dt=zt=>{const ta=new n.ac(zt.x+25e-6,zt.y,zt.z),da=new n.ac(zt.x,zt.y+25e-6,zt.z),Xt=zt.toLngLat(),pa=ta.toLngLat(),La=da.toLngLat(),Fa=this.locationCoordinate(Xt),Va=this.locationCoordinate(pa),cr=this.locationCoordinate(La),jr=Math.hypot(Va.x-Fa.x,Va.y-Fa.y),vr=Math.hypot(cr.x-Fa.x,cr.y-Fa.y);return Math.sqrt(jr*vr)*ct/25e-6},vt=zt=>{const oa=pt,ta=ut;return{aabb:n.bV(this,K,0,0,0,zt,ta,oa,this.projection),zoom:0,x:0,y:0,minZ:ta,maxZ:oa,wrap:zt,fullyVisible:!1}},Tt=[];let Qt=[];const kt=d,ra=o.reparseOverscaled?A:d,ca=(De-this._centerAltitude)*Ce,xa=zt=>{if(!this._elevation||!zt.tileID||!E)return;const oa=this._elevation.getMinMaxForTile(zt.tileID),ta=zt.aabb;oa?(ta.min[2]=oa.min,ta.max[2]=oa.max,ta.center[2]=(ta.min[2]+ta.max[2])/2):(zt.shouldSplit=sa(zt),zt.shouldSplit||(ta.min[2]=ta.max[2]=ta.center[2]=this._centerAltitude))},Ft=(zt,oa)=>{if(.707*oa<zt)return 1;const ta=oa/zt;return ta/(1.4144271570014144+(Math.pow(1.1,ta-1.4144271570014144+1)-1)/(1.1-1)-1)},sa=zt=>{if(zt.zoom<tt)return!0;if(zt.zoom===kt)return!1;if(zt.shouldSplit!=null)return zt.shouldSplit;const oa=zt.aabb.distanceX(Le),ta=zt.aabb.distanceY(Le);let da=ca,Xt=1;if(ae){da=zt.aabb.distanceZ(Le);const vr=Math.pow(2,zt.zoom),Ir=n.aT((zt.y+1)/vr),Or=n.aT(zt.y/vr),zr=Math.min(Math.max(Z,Ir),Or),Gr=n.ca(zr)/n.ca(Z);if(Xt=zr===Z?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Gr/this._mercatorScaleRatio),this.zoom<=n.c6&&zt.zoom===kt-1&&Gr>=.9)return!0}else if(S&&(da=zt.aabb.distanceZ(Le)*Ce),this.projection.isReprojectedInTileSpace&&A<=5){const vr=Math.pow(2,zt.zoom),Ir=dt(new n.ac((zt.x+.5)/vr,(zt.y+.5)/vr));Xt=Ir>.85?1:Ir}if(!E){const vr=Math.sqrt(oa*oa+ta*ta+da*da);let Ir=(1<<kt-zt.zoom)*it*Xt;return Ir*=Ft(Math.max(da,ca),vr),vr<Ir}let pa=Number.MAX_VALUE,La=0;const Fa=zt.aabb.getCorners(),Va=[];for(const vr of Fa){n.ad.vec3.sub(Va,vr,Le),ae||(S?Va[2]*=Ce:Va[2]=ca);const Ir=n.ad.vec3.dot(Va,this._camera.forward());Ir<pa&&(pa=Ir,La=Math.abs(Va[2]))}let cr=(1<<kt-zt.zoom)*it*Xt;if(cr*=Ft(Math.max(La,ca),pa),pa<cr)return!0;const jr=zt.aabb.closestPoint(Y);return jr[0]===Y[0]&&jr[1]===Y[1]};if(this.renderWorldCopies)for(let zt=1;zt<=3;zt++)Tt.push(vt(-zt)),Tt.push(vt(zt));for(Tt.push(vt(0));Tt.length>0;){const zt=Tt.pop(),oa=zt.x,ta=zt.y;let da=zt.fullyVisible;const Xt=()=>this.projection.name==="globe"&&(zt.y===0||zt.y===(1<<zt.zoom)-1);if(!da){let pa=Ke?zt.aabb.intersects(pe):zt.aabb.intersectsFlat(pe);if(pa===0&&Xt()){const La=new n.bT(zt.zoom,oa,ta);pa=n.bU(this,K,La,!0).intersects(pe)}if(pa===0)continue;da=pa===2}if(zt.zoom!==kt&&sa(zt))for(let pa=0;pa<4;pa++){const La=(oa<<1)+pa%2,Fa=(ta<<1)+(pa>>1),Va={aabb:E?zt.aabb.quadrant(pa):n.bV(this,K,zt.zoom+1,La,Fa,zt.wrap,zt.minZ,zt.maxZ,this.projection),zoom:zt.zoom+1,x:La,y:Fa,wrap:zt.wrap,fullyVisible:da,tileID:void 0,shouldSplit:void 0,minZ:zt.minZ,maxZ:zt.maxZ};S&&!ae&&(Va.tileID=new n.aH(zt.zoom+1===kt?ra:zt.zoom+1,zt.wrap,zt.zoom+1,La,Fa),xa(Va)),Tt.push(Va)}else{const pa=zt.zoom===kt?ra:zt.zoom;if(o.minzoom&&o.minzoom>pa)continue;let La=0;if(!da){let jr=Ke?zt.aabb.intersectsPrecise(pe):zt.aabb.intersectsPreciseFlat(pe);if(jr===0&&Xt()){const vr=new n.bT(zt.zoom,oa,ta);jr=n.bU(this,K,vr,!0).intersectsPrecise(pe)}if(jr===0)continue;if(o.calculateQuadrantVisibility)if(pe.containsPoint(zt.aabb.center))La=15;else for(let vr=0;vr<4;vr++)zt.aabb.quadrant(vr).intersects(pe)!==0&&(La|=1<<vr)}const Fa=Y[0]-(.5+oa+(zt.wrap<<zt.zoom))*(1<<d-zt.zoom),Va=Y[1]-.5-ta,cr=zt.tileID?zt.tileID:new n.aH(pa,zt.wrap,zt.zoom,oa,ta);o.calculateQuadrantVisibility&&(cr.visibleQuadrants=La),Qt.push({tileID:cr,distanceSq:Fa*Fa+Va*Va})}}if(this.fogCullDistSq){const zt=this.fogCullDistSq,oa=this.horizonLineFromTop();Qt=Qt.filter(ta=>{const da=[0,0,0,1],Xt=[n.ai,n.ai,0,1],pa=this.calculateFogTileMatrix(ta.tileID.toUnwrapped());n.ad.vec4.transformMat4(da,da,pa),n.ad.vec4.transformMat4(Xt,Xt,pa);const La=n.ad.vec4.min([],da,Xt),Fa=n.ad.vec4.max([],da,Xt),Va=n.bW(La,Fa);if(Va===0)return!0;let cr=!1;const jr=this._elevation;if(jr&&Va>zt&&oa!==0){const vr=this.calculateProjMatrix(ta.tileID.toUnwrapped());let Ir;o.isTerrainDEM||(Ir=jr.getMinMaxForTile(ta.tileID)),Ir||(Ir={min:ut,max:pt});const Or=n.c7(this.rotation),zr=[Or[0]*n.ai,Or[1]*n.ai,Ir.max];n.ad.vec3.transformMat4(zr,zr,vr),cr=(1-zr[1])*this.height*.5<oa}return Va<zt||cr})}return Qt.sort((zt,oa)=>zt.distanceSq-oa.distanceSq).map(zt=>zt.tileID)}resize(o,d){this.width=o,this.height=d,this.pixelsToGLUnits=[2/o,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(o){return Math.pow(2,o)}scaleZoom(o){return Math.log(o)/Math.LN2}project(o){const d=n.ay(o.lat,-n.bX,n.bX),A=this.projection.project(o.lng,d);return new n.P(A.x*this.worldSize,A.y*this.worldSize)}unproject(o){return this.projection.unproject(o.x/this.worldSize,o.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/n.bH(1,this.center.lat)/this.worldSize}setLocationAtPoint(o,d){let A,T;const S=this.centerPoint;if(this.projection.name==="globe"){const k=this.worldSize;A=(d.x-S.x)/k,T=(d.y-S.y)/k}else{const k=this.pointCoordinate(d),Z=this.pointCoordinate(S);A=k.x-Z.x,T=k.y-Z.y}const E=this.locationCoordinate(o);this.setLocation(new n.ac(E.x-A,E.y-T))}setLocation(o){this.center=this.coordinateLocation(o),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(o,d){return this.projection.locationPoint(this,o,d)}locationPoint3D(o,d){return this.projection.locationPoint(this,o,d,!0)}pointLocation(o){return this.coordinateLocation(this.pointCoordinate(o))}pointLocation3D(o,d){return this.coordinateLocation(this.pointCoordinate3D(o,d))}locationCoordinate(o,d){const A=d?n.bH(d,o.lat):void 0,T=this.projection.project(o.lng,o.lat);return new n.ac(T.x,T.y,A)}coordinateLocation(o){return this.projection.unproject(o.x,o.y)}pointRayIntersection(o,d){const A=d??this._centerAltitude,T=[o.x,o.y,0,1],S=[o.x,o.y,1,1];n.ad.vec4.transformMat4(T,T,this.pixelMatrixInverse),n.ad.vec4.transformMat4(S,S,this.pixelMatrixInverse);const E=S[3];n.ad.vec4.scale(T,T,1/T[3]),n.ad.vec4.scale(S,S,1/E);const k=T[2],Z=S[2];return{p0:T,p1:S,t:k===Z?0:(A-k)/(Z-k)}}screenPointToMercatorRay(o){const d=[o.x,o.y,0,1],A=[o.x,o.y,1,1];return n.ad.vec4.transformMat4(d,d,this.pixelMatrixInverse),n.ad.vec4.transformMat4(A,A,this.pixelMatrixInverse),n.ad.vec4.scale(d,d,1/d[3]),n.ad.vec4.scale(A,A,1/A[3]),d[2]=n.bH(d[2],this._center.lat)*this.worldSize,A[2]=n.bH(A[2],this._center.lat)*this.worldSize,n.ad.vec4.scale(d,d,1/this.worldSize),n.ad.vec4.scale(A,A,1/this.worldSize),new n.as([d[0],d[1],d[2]],n.ad.vec3.normalize([],n.ad.vec3.sub([],A,d)))}rayIntersectionCoordinate(o){const{p0:d,p1:A,t:T}=o,S=n.bH(d[2],this._center.lat),E=n.bH(A[2],this._center.lat);return new n.ac(n.ah(d[0],A[0],T)/this.worldSize,n.ah(d[1],A[1],T)/this.worldSize,n.ah(S,E,T))}pointCoordinate(o,d=this._centerAltitude){return this.projection.pointCoordinate(this,o.x,o.y,d)}pointCoordinate3D(o,d){if(!this.elevation)return this.pointCoordinate(o,d);let A=this.projection.pointCoordinate3D(this,o.x,o.y);if(A)return new n.ac(A[0],A[1],A[2]);let T=0,S=this.horizonLineFromTop();if(o.y>S)return this.pointCoordinate(o,d);const E=.02*S,k=o.clone();for(let Z=0;Z<10&&S-T>E;Z++){k.y=n.ah(T,S,.66);const K=this.projection.pointCoordinate3D(this,k.x,k.y);K?(S=k.y,A=K):T=k.y}return A?new n.ac(A[0],A[1],A[2]):this.pointCoordinate(o)}isPointAboveHorizon(o){return this.projection.isPointAboveHorizon(this,o)}isPointOnSurface(o){if(o.y<0||o.y>this.height||o.x<0||o.x>this.width)return!1;if(this.elevation||this.zoom>=n.bY)return!this.isPointAboveHorizon(o);const d=this.pointCoordinate(o);return d.y>=0&&d.y<=1}_coordinatePoint(o,d){const A=d&&this.elevation?this.elevation.getAtPointOrZero(o,this._centerAltitude):this._centerAltitude,T=[o.x*this.worldSize,o.y*this.worldSize,A+o.toAltitude(),1];return n.ad.vec4.transformMat4(T,T,this.pixelMatrix),T[3]>0?new n.P(T[0]/T[3],T[1]/T[3]):new n.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:o,left:d}=this._edgeInsets,A=this.height-this._edgeInsets.bottom,T=this.width-this._edgeInsets.right,S=this.pointLocation3D(new n.P(d,o)),E=this.pointLocation3D(new n.P(T,o)),k=this.pointLocation3D(new n.P(T,A)),Z=this.pointLocation3D(new n.P(d,A));let K=Math.min(S.lng,E.lng,k.lng,Z.lng),Y=Math.max(S.lng,E.lng,k.lng,Z.lng),ae=Math.min(S.lat,E.lat,k.lat,Z.lat),re=Math.max(S.lat,E.lat,k.lat,Z.lat);const pe=Math.pow(2,-this.zoom)/16*270,Pe=this.projection.name==="globe"?1:4,Ce=(De,Le,Ke,it,tt)=>{const pt=(De+Ke)/2,ut=(Le+it)/2,ct=new n.P(pt,ut),{lng:dt,lat:vt}=this.pointLocation3D(ct),Tt=Math.max(0,K-dt,ae-vt,dt-Y,vt-re);K=Math.min(K,dt),Y=Math.max(Y,dt),ae=Math.min(ae,vt),re=Math.max(re,vt),(tt<Pe||Tt>pe)&&(Ce(De,Le,pt,ut,tt+1),Ce(pt,ut,Ke,it,tt+1))};if(Ce(d,o,T,o,1),Ce(T,o,T,A,1),Ce(T,A,d,A,1),Ce(d,A,d,o,1),this.projection.name==="globe"){const[De,Le]=n.bZ(this);De?(re=90,Y=180,K=-180):Le&&(ae=-90,Y=180,K=-180)}return new n.aB(new n.bO(K,ae),new n.bO(Y,re))}_getBoundsRectangular(o,d){const{top:A,left:T}=this._edgeInsets,S=this.height-this._edgeInsets.bottom,E=this.width-this._edgeInsets.right,k=new n.P(T,A),Z=new n.P(E,A),K=new n.P(E,S),Y=new n.P(T,S);let ae=this.pointCoordinate(k,o),re=this.pointCoordinate(Z,o);const pe=this.pointCoordinate(K,d),Pe=this.pointCoordinate(Y,d),Ce=(De,Le)=>(Le.y-De.y)/(Le.x-De.x);return ae.y>1&&re.y>=0?ae=new n.ac((1-Pe.y)/Ce(Pe,ae)+Pe.x,1):ae.y<0&&re.y<=1&&(ae=new n.ac(-Pe.y/Ce(Pe,ae)+Pe.x,0)),re.y>1&&ae.y>=0?re=new n.ac((1-pe.y)/Ce(pe,re)+pe.x,1):re.y<0&&ae.y<=1&&(re=new n.ac(-pe.y/Ce(pe,re)+pe.x,0)),new n.aB().extend(this.coordinateLocation(ae)).extend(this.coordinateLocation(re)).extend(this.coordinateLocation(Pe)).extend(this.coordinateLocation(pe))}_getBoundsRectangularTerrain(){const o=this.elevation;if(!o.visibleDemTiles.length||o.isUsingMockSource())return this._getBoundsRectangular(0,0);const d=o.visibleDemTiles.reduce((A,T)=>{if(T.dem){const S=T.dem.tree;A.min=Math.min(A.min,S.minimums[0]),A.max=Math.max(A.max,S.maximums[0])}return A},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(d.min*o.exaggeration(),d.max*o.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(o=!0){const d=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,A=this.height/2-d*(1-this._horizonShift);return o?Math.max(0,A):A}getMaxBounds(){return this.maxBounds}setMaxBounds(o){this.maxBounds=o,this.minLat=-n.bX,this.maxLat=n.bX,this.minLng=-180,this.maxLng=180,o&&(this.minLat=o.getSouth(),this.maxLat=o.getNorth(),this.minLng=o.getWest(),this.maxLng=o.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=n.av(this.minLng)*this.tileSize,this.worldMaxX=n.av(this.maxLng)*this.tileSize,this.worldMinY=n.aC(this.maxLat)*this.tileSize,this.worldMaxY=n.aC(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(o,d){return this.projection.createTileMatrix(this,d,o)}calculateDistanceTileData(o){const d=o.key,A=this._distanceTileDataCache;if(A[d])return A[d];const T=o.canonical,S=1/this.height,E=this.cameraWorldSize,k=E/this.zoomScale(T.z),Z=(T.x+Math.pow(2,T.z)*o.wrap)*k,K=T.y*k,Y=this.point;Y.x*=E/this.worldSize,Y.y*=E/this.worldSize;const ae=this.angle,re=Math.sin(-ae),pe=-Math.cos(-ae);return A[d]={bearing:[re,pe],center:[(Y.x-Z)*S,(Y.y-K)*S],scale:k/n.ai*S},A[d]}calculateFogTileMatrix(o){const d=o.key,A=this._fogTileMatrixCache;if(A[d])return A[d];const T=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,o);return n.ad.mat4.multiply(T,this.worldToFogMatrix,T),A[d]=new Float32Array(T),A[d]}calculateProjMatrix(o,d=!1,A=!1){const T=o.key;let S;if(S=A?this._expandedProjMatrixCache:d?this._alignedProjMatrixCache:this._projMatrixCache,S[T])return S[T];const E=this.calculatePosMatrix(o,this.worldSize);let k;return k=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:A?this.expandedFarZProjMatrix:d?this.alignedProjMatrix:this.projMatrix,n.ad.mat4.multiply(E,k,E),S[T]=new Float32Array(E),S[T]}calculatePixelsToTileUnitsMatrix(o){const d=o.tileID.key,A=this._pixelsToTileUnitsCache;if(A[d])return A[d];const T=n.b_(o,this);return A[d]=T,A[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const o=1/this.worldSize,d=n.ad.mat4.fromScaling([],[o,o,o]);return n.ad.mat4.multiply(d,d,this.globeMatrix),d}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const o=this._elevation;this._updateCameraState();const d=n.bH(1,this._center.lat)*this.worldSize,A=this._computeCameraPosition(d),T=this._camera.forward(),S=n.bH(1,this._center.lat);A[2]/=S,T[2]/=S,n.ad.vec3.normalize(T,T);const E=o.raycast(A,T,o.exaggeration());if(E){const k=n.ad.vec3.scaleAndAdd([],A,T,E),Z=new n.ac(k[0],k[1],n.bH(k[2],n.aT(k[1]))),K=(Z.z+n.ad.vec3.length([Z.x-A[0],Z.y-A[1],Z.z-A[2]*S]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(K),this._centerAltitude=Z.toAltitude(),this._center=this.coordinateLocation(Z),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(o=!1){if(!this._elevation)return;const d=this._elevation,A=n.bH(1,this._center.lat)*this.worldSize,T=this._computeCameraPosition(A),S=d.getAtPointOrZero(new n.ac(...T)),E=this.pixelsPerMeter/this.worldSize*S,k=this._minimumHeightOverTerrain(),Z=T[2]-E;if(Z<=k)if(Z<0||o){const K=this.locationCoordinate(this._center,this._centerAltitude),Y=[T[0],T[1],K.z-T[2]],ae=n.ad.vec3.length(Y);Y[2]-=(k-Z)/this._pixelsPerMercatorPixel;const re=n.ad.vec3.length(Y);if(re===0)return;n.ad.vec3.scale(Y,Y,ae/re*this._pixelsPerMercatorPixel),this._camera.position=[T[0],T[1],K.z*this._pixelsPerMercatorPixel-Y[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const o=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||o){const re=this.center;return re.lat=n.ay(re.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!o)&&(re.lng=n.ay(re.lng,this.minLng,this.maxLng)),this.center=re,void(this._constraining=!1)}const d=this._unmodified,{x:A,y:T}=this.point;let S=0,E=A,k=T;const Z=this.width/2,K=this.height/2,Y=this.worldMinY*this.scale,ae=this.worldMaxY*this.scale;if(T-K<Y&&(k=Y+K),T+K>ae&&(k=ae-K),ae-Y<this.height&&(S=Math.max(S,this.height/(ae-Y)),k=(ae+Y)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const re=this.worldMinX*this.scale,pe=this.worldMaxX*this.scale,Pe=this.worldSize/2-(re+pe)/2;E=(A+Pe+this.worldSize)%this.worldSize-Pe,E-Z<re&&(E=re+Z),E+Z>pe&&(E=pe-Z),pe-re<this.width&&(S=Math.max(S,this.width/(pe-re)),E=(pe+re)/2)}E===A&&k===T||this._allowWorldUnderZoom||(this.center=this.unproject(new n.P(E,k))),S&&!this._allowWorldUnderZoom&&(this.zoom+=this.scaleZoom(S)),this._constrainCamera(),this._unmodified=d,this._constraining=!1}_minZoomForBounds(){let o=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(o=Math.max(o,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),o}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const o=this.centerOffset,d=this.projection.name==="globe",A=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=n.bH(1,this.center.lat)/n.bH(1,n.c8));const T=n.b$(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,T),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const S=this.projection.zAxisUnit==="meters"?A:1,E=this._camera.getWorldToCamera(this.worldSize,S);let k;const Z=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(Z[8]=2*-o.x/this.width,Z[9]=2*o.y/this.height,this.isOrthographic){let vt=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),Tt=vt*this.aspect,Qt=-Tt,kt=-vt;Tt-=o.x,Qt-=o.x,vt+=o.y,kt+=o.y,k=this._camera.getCameraToClipOrthographic(Qt,Tt,kt,vt,this._nearZ,this._farZ),((ra,ca,xa,Ft)=>{for(let sa=0;sa<16;sa++)ra[sa]=n.ah(ca[sa],xa[sa],Ft)})(k,k,Z,n.c9(this.pitch>=za?1:this.pitch/za))}else k=Z;const K=n.ad.mat4.mul([],Z,E);let Y=n.ad.mat4.mul([],k,E);if(this.projection.isReprojectedInTileSpace){const vt=this.locationCoordinate(this.center),Tt=n.ad.mat4.identity([]);n.ad.mat4.translate(Tt,Tt,[vt.x*this.worldSize,vt.y*this.worldSize,0]),n.ad.mat4.multiply(Tt,Tt,n.c0(this)),n.ad.mat4.translate(Tt,Tt,[-vt.x*this.worldSize,-vt.y*this.worldSize,0]),n.ad.mat4.multiply(Y,Y,Tt),n.ad.mat4.multiply(K,K,Tt),this.inverseAdjustmentMatrix=n.c1(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=n.ad.mat4.scale([],Y,[this.worldSize,this.worldSize,this.worldSize/S,1]),this.projMatrix=Y,this.invProjMatrix=n.ad.mat4.invert(new Float64Array(16),this.projMatrix),d){const vt=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);vt[8]=2*-o.x/this.width,vt[9]=2*o.y/this.height,this.expandedFarZProjMatrix=n.ad.mat4.mul([],vt,E)}else this.expandedFarZProjMatrix=this.projMatrix;const ae=n.ad.mat4.invert([],k);this.frustumCorners=n.c2.fromInvProjectionMatrix(ae,this.horizonLineFromTop(),this.height),this.cameraFrustum=n.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!d);const re=new Float32Array(16);n.ad.mat4.identity(re),n.ad.mat4.scale(re,re,[1,-1,1]),n.ad.mat4.rotateX(re,re,this._pitch),n.ad.mat4.rotateZ(re,re,this.angle);const pe=n.ad.mat4.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=n.ad.mat4.clone(pe);const Pe=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;pe[8]=2*-o.x/this.width,pe[9]=2*(o.y+Pe)/this.height,this.skyboxMatrix=n.ad.mat4.multiply(re,pe,re);const Ce=this.point,De=Ce.x,Le=Ce.y,Ke=this.width%2/2,it=this.height%2/2,tt=Math.cos(this.angle),pt=Math.sin(this.angle),ut=De-Math.round(De)+tt*Ke+pt*it,ct=Le-Math.round(Le)+tt*it+pt*Ke,dt=new Float64Array(Y);if(n.ad.mat4.translate(dt,dt,[ut>.5?ut-1:ut,ct>.5?ct-1:ct,0]),this.alignedProjMatrix=dt,Y=n.ad.mat4.create(),n.ad.mat4.scale(Y,Y,[this.width/2,-this.height/2,1]),n.ad.mat4.translate(Y,Y,[1,-1,0]),this.labelPlaneMatrix=Y,Y=n.ad.mat4.create(),n.ad.mat4.scale(Y,Y,[1,-1,1]),n.ad.mat4.translate(Y,Y,[-1,-1,0]),n.ad.mat4.scale(Y,Y,[2/this.width,2/this.height,1]),this.glCoordMatrix=Y,this.pixelMatrix=n.ad.mat4.multiply(new Float64Array(16),this.labelPlaneMatrix,K),this._calcFogMatrices(),this._distanceTileDataCache={},Y=n.ad.mat4.invert(new Float64Array(16),this.pixelMatrix),!Y)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=Y,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=n.c3(this);const vt=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=n.ad.vec3.transformMat4(vt,vt,E),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=Y;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const o=this.cameraWorldSizeForFog,d=this.cameraPixelsPerMeter,A=this._camera.position,T=1/this.height/this._pixelsPerMercatorPixel,S=[o,o,d];n.ad.vec3.scale(S,S,T),n.ad.vec3.scale(A,A,-1),n.ad.vec3.multiply(A,A,S);const E=n.ad.mat4.create();n.ad.mat4.translate(E,E,A),n.ad.mat4.scale(E,E,S),this.mercatorFogMatrix=E,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(o,d,T)}_computeCameraPosition(o){const d=(o=o||this.pixelsPerMeter)/this.pixelsPerMeter,A=this._camera.forward(),T=this.point,S=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*d-o/this.worldSize*this._centerAltitude;return[T.x/this.worldSize-A[0]*S,T.y/this.worldSize-A[1]*S,o/this.worldSize*this._centerAltitude-A[2]*S]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(o){const d=this._maxCameraBoundsDistance()*Math.cos(this._pitch),A=this._camera.position[2],T=o[2];let S=1;this.projection.wrap&&(this.center=this.center.wrap()),T>0&&(S=Math.min((d-A)/T,1)),this._camera.position=n.ad.vec3.scaleAndAdd([],this._camera.position,o,S),this._updateStateFromCamera()}_updateStateFromCamera(){const o=this._camera.position,d=this._camera.forward(),{pitch:A,bearing:T}=this._camera.getPitchBearing(),S=n.bH(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,E=this._mercatorZfromZoom(this._maxZoom)*Math.cos(n.ak(this._maxPitch)),k=Math.max((o[2]-S)/Math.cos(A),E),Z=this._zoomFromMercatorZ(k);n.ad.vec3.scaleAndAdd(o,o,d,k),this._pitch=n.ay(A,n.ak(this.minPitch),n.ak(this.maxPitch)),this.angle=n.bF(T,-Math.PI,Math.PI),this._setZoom(n.ay(Z,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new n.ac(o[0],o[1],o[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(o){return Math.pow(2,o)*this.tileSize}_mercatorZfromZoom(o){return this.cameraToCenterDistance/this._worldSizeFromZoom(o)}_minimumHeightOverTerrain(){const o=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(o)}_zoomFromMercatorZ(o){return this.scaleZoom(this.cameraToCenterDistance/(o*this.tileSize))}zoomFromMercatorZAdjusted(o){let d=0,A=n.bY,T=0,S=1/0;for(;A-d>1e-6&&A>d;){const E=d+.5*(A-d),k=this.tileSize*Math.pow(2,E),Z=this.getCameraToCenterDistance(this.projection,E,k),K=this.scaleZoom(Z/(o*this.tileSize)),Y=Math.abs(E-K);Y<S&&(S=Y,T=E),E<K?d=E:A=E}return T}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(n.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(o,d){const A=Math.min(o.x,d.x),T=Math.max(o.x,d.x),S=Math.min(o.y,d.y),E=Math.max(o.y,d.y);if(S<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const k=[new n.P(A,S),new n.P(T,E),new n.P(A,E),new n.P(T,S)],Z=this.renderWorldCopies?-3:0,K=this.renderWorldCopies?4:1;for(const Y of k){const ae=this.pointRayIntersection(Y);if(ae.t<0)return!0;const re=this.rayIntersectionCoordinate(ae);if(re.x<Z||re.y<0||re.x>K||re.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+n.c4(this.fovAboveCenter)>88||this.anyCornerOffEdge(new n.P(0,0),new n.P(this.width,this.height))}zoomDeltaToMovement(o,d){const A=n.ad.vec3.length(n.ad.vec3.sub([],this._camera.position,o)),T=this._zoomFromMercatorZ(A)+d;return A-this._mercatorZfromZoom(T)}getCameraPoint(){if(this.projection.name==="globe"){const o=function([d,A,T],S){const E=[d,A,T,1];n.ad.vec4.transformMat4(E,E,S);const k=E[3]=Math.max(E[3],1e-6);return E[0]/=k,E[1]/=k,E[2]/=k,E}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new n.P(o[0],o[1])}{const o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new n.P(0,o))}}getCameraToCenterDistance(o,d=this.zoom,A=this.worldSize){const T=n.b$(o,d,this.width,this.height,1024),S=o.pixelSpaceConversion(this.center.lat,A,T);let E=.5/Math.tan(.5*this._fov)*this.height*S;return this.isOrthographic&&(E=n.ah(1,E,n.c9(this.pitch>=za?1:this.pitch/za))),E}getWorldToCameraMatrix(){const o=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&n.ad.mat4.multiply(o,o,this.globeMatrix),o}getFrustum(o){return n.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,o,this.projection.zAxisUnit==="meters")}}const Js=(y,o)=>{if(o>0&&y.terrain&&n.w("Cutoff is currently disabled on terrain"),o<=0||y.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const d=y.transform,A=Math.max(Math.abs(d._zoom-(y.minCutoffZoom-1)),1),T=d.isLODDisabled(!1)?n.ae(60,45,d.pitch):n.ae(30,15,d.pitch),S=d._farZ-d._nearZ,E=o*d.height,k=((1-(Z=T))*d.cameraToCenterDistance+Z*(d._farZ+E))*A;var Z;return{shouldRenderCutoff:T<1,uniformValues:{u_cutoff_params:[d._nearZ,d._farZ,(k-d._nearZ)/S,(k-E-d._nearZ)/S]}}},Ao={cascadeCount:2,normalOffset:3,shadowMapResolution:2048};class Sf{constructor(o,d){this.aabb=o,this.lastCascade=d}}class jh{add(o,d){const A=this.receivers[o.key];A!==void 0?(A.aabb.min[0]=Math.min(A.aabb.min[0],d.min[0]),A.aabb.min[1]=Math.min(A.aabb.min[1],d.min[1]),A.aabb.min[2]=Math.min(A.aabb.min[2],d.min[2]),A.aabb.max[0]=Math.max(A.aabb.max[0],d.max[0]),A.aabb.max[1]=Math.max(A.aabb.max[1],d.max[1]),A.aabb.max[2]=Math.max(A.aabb.max[2],d.max[2])):this.receivers[o.key]=new Sf(d,null)}clear(){this.receivers={}}get(o){return this.receivers[o.key]}computeRequiredCascades(o,d,A){const T=n.ce.fromPoints(o.points);let S=0;for(const E in this.receivers){const k=this.receivers[E];if(!k||!T.intersectsAabb(k.aabb))continue;k.aabb.min=T.closestPoint(k.aabb.min),k.aabb.max=T.closestPoint(k.aabb.max);const Z=k.aabb.getCorners();for(let K=0;K<A.length;K++){let Y=!0;for(const ae of Z){const re=[ae[0]*d,ae[1]*d,ae[2]];if(n.ad.vec3.transformMat4(re,re,A[K].matrix),re[0]<-1||re[0]>1||re[1]<-1||re[1]>1){Y=!1;break}}if(k.lastCascade=K,S=Math.max(S,K),Y)break}}return S+1}}class vo{constructor(o){this.painter=o,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new jh,this._depthMode=new ur(o.context.gl.LEQUAL,ur.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1,o.tp.registerParameter(this,["Shadows"],"_forceDisable",{label:"forceDisable"},()=>{this.painter.style.map.triggerRepaint()}),o.tp.registerParameter(Ao,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),o.tp.registerParameter(Ao,["Shadows"],"normalOffset",{min:0,max:10,step:.05}),o.tp.registerParameter(Ao,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32}),o.tp.registerBinding(this,["Shadows"],"_numCascadesToRender",{readonly:!0,label:"numCascadesToRender"})}destroy(){for(const o of this._cascades)o.texture.destroy(),o.framebuffer.destroy();this._cascades=[]}updateShadowParameters(o,d){const A=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!d||!d.properties)return;const T=d.properties.get("shadow-intensity");if(!d.shadowsEnabled()||T<=0||(this._shadowLayerCount=A.style.order.reduce((Pe,Ce)=>{const De=A.style._mergedLayers[Ce];return Pe+(De.hasShadowPass()&&!De.isHidden(o.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this.enabled))return;const S=A.context,E=Ao.shadowMapResolution,k=Ao.shadowMapResolution;if(this._cascades.length===0||Ao.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let Pe=0;Pe<Ao.cascadeCount;++Pe){const Ce=A._shadowMapDebug,De=S.gl,Le=S.createFramebuffer(E,k,Ce,"texture"),Ke=new n.T(S,{width:E,height:k,data:null},De.DEPTH_COMPONENT16);if(Le.depthAttachment.set(Ke.texture),Ce){const it=new n.T(S,{width:E,height:k,data:null},De.RGBA8);Le.colorAttachment.set(it.texture)}this._cascades.push({framebuffer:Le,texture:Ke,matrix:[],far:0,boundingSphereRadius:0,frustum:new n.bR,scale:0})}}this.shadowDirection=Dl(d);let Z=0;if(o.elevation){const Pe=o.elevation,Ce=[1e4,-1e4];Pe.visibleDemTiles.filter(De=>De.dem).forEach(De=>{const Le=De.dem.tree;Ce[0]=Math.min(Ce[0],Le.minimums[0]),Ce[1]=Math.max(Ce[1],Le.maximums[0])}),Ce[0]!==1e4&&(Z=(Ce[1]-Ce[0])*Pe.exaggeration())}const K=1.5*o.cameraToCenterDistance,Y=3*K,ae=new Float64Array(16);for(let Pe=0;Pe<this._cascades.length;++Pe){const Ce=this._cascades[Pe];let De=o.height/50,Le=1;Ao.cascadeCount===1?Le=Y:Pe===0?Le=K:(De=K,Le=Y);const[Ke,it]=iu(o,this.shadowDirection,De,Le,Ao.shadowMapResolution,Z);Ce.scale=o.scale,Ce.matrix=Ke,Ce.boundingSphereRadius=it,n.ad.mat4.invert(ae,Ce.matrix),Ce.frustum=n.bR.fromInvProjectionMatrix(ae,1,0,!0),Ce.far=Le}const re=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[re].far,this._cascades[re].far],this._uniformValues.u_shadow_intensity=T,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/Ao.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=Ao.shadowMapResolution,this._uniformValues.u_shadowmap_0=bi.ShadowMap0,this._uniformValues.u_shadowmap_1=bi.ShadowMap0+1,this._groundShadowTiles=A.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const pe=A.transform.elevation;for(const Pe of this._groundShadowTiles){let Ce={min:0,max:0};if(pe){const De=pe.getMinMaxForTile(Pe);De&&(Ce=De)}this.addShadowReceiver(Pe.toUnwrapped(),Ce.min,Ce.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(o){this._enabled=o}drawShadowPass(o,d){if(!this.enabled)return;const A=this.painter,T=A.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(A.transform.getFrustum(0),A.transform.worldSize,this._cascades),T.viewport.set([0,0,Ao.shadowMapResolution,Ao.shadowMapResolution]);for(let S=0;S<this._numCascadesToRender;++S){A.currentShadowCascade=S,T.bindFramebuffer.set(this._cascades[S].framebuffer.framebuffer),T.clear({color:n.al.white,depth:1});for(const E of o.order){const k=o._mergedLayers[E];if(!k.hasShadowPass()||k.isHidden(A.transform.zoom))continue;const Z=o.getLayerSourceCache(k),K=Z?d[Z.id]:void 0;(k.type==="model"||K&&K.length)&&A.renderLayer(A,Z,k,K)}}A.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const o=this.painter,d=o.style,A=o.context,T=d.directionalLight,S=d.ambientLight;if(!T||!S)return;const E=[],k=Js(o,o.longestCutoffRange);k.shouldRenderCutoff&&E.push("RENDER_CUTOFF"),E.push("RENDER_SHADOWS","DEPTH_TEXTURE"),this.useNormalOffset&&E.push("NORMAL_OFFSET");const Z=jc(d,T,S),K=new ur(A.gl.LEQUAL,ur.ReadOnly,o.depthRangeFor3D);for(const Y of this._groundShadowTiles){const ae=Y.toUnwrapped(),re=o.isTileAffectedByFog(Y),pe=o.getOrCreateProgram("groundShadow",{defines:E,overrideFog:re});this.setupShadows(ae,pe),o.uploadCommonUniforms(A,pe,ae,null,k);const Pe={u_matrix:o.transform.calculateProjMatrix(ae),u_ground_shadow_factor:Z};pe.draw(o,A.gl.TRIANGLES,K,Pr.disabled,Vr.multiply,Sr.disabled,Pe,"ground_shadow",o.tileExtentBuffer,o.quadTriangleIndexBuffer,o.tileExtentSegments,null,o.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?Vr.unblended:Vr.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(o){const d=this.painter.transform,A=d.calculatePosMatrix(o,d.worldSize);return n.ad.mat4.multiply(A,this._cascades[this.painter.currentShadowCascade].matrix,A),Float32Array.from(A)}calculateShadowPassMatrixFromMatrix(o){return n.ad.mat4.multiply(o,this._cascades[this.painter.currentShadowCascade].matrix,o),Float32Array.from(o)}setupShadows(o,d,A,T=0){if(!this.enabled)return;const S=this.painter.transform,E=this.painter.context,k=E.gl,Z=this._uniformValues,K=new Float64Array(16),Y=S.calculatePosMatrix(o,S.worldSize);for(let ae=0;ae<this._cascades.length;ae++)n.ad.mat4.multiply(K,this._cascades[ae].matrix,Y),Z[ae===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(K),E.activeTexture.set(k.TEXTURE0+bi.ShadowMap0+ae),this._cascades[ae].texture.bind(k.NEAREST,k.CLAMP_TO_EDGE);if(this.useNormalOffset=!!A,this.useNormalOffset){const ae=n.cd(o.canonical),re=2/S.tileSize*n.ai/Ao.shadowMapResolution,pe=re*this._cascades[0].boundingSphereRadius,Pe=re*this._cascades[this._cascades.length-1].boundingSphereRadius,Ce=(A==="vector-tile"?1:3)/Math.pow(2,T-o.canonical.z-(1-S.zoom+Math.floor(S.zoom)));Z.u_shadow_normal_offset=[ae,pe*Ce,Pe*Ce],Z.u_shadow_bias=[6e-5,.0012,.012]}else Z.u_shadow_bias=[36e-5,.0012,.012];d.setShadowUniformValues(E,Z)}setupShadowsFromMatrix(o,d,A=!1){if(!this.enabled)return;const T=this.painter.context,S=T.gl,E=this._uniformValues,k=new Float64Array(16);for(let Z=0;Z<Ao.cascadeCount;Z++)n.ad.mat4.multiply(k,this._cascades[Z].matrix,o),E[Z===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(k),T.activeTexture.set(S.TEXTURE0+bi.ShadowMap0+Z),this._cascades[Z].texture.bind(S.NEAREST,S.CLAMP_TO_EDGE);if(this.useNormalOffset=A,A){const Z=Ao.normalOffset;E.u_shadow_normal_offset=[1,Z,Z],E.u_shadow_bias=[6e-5,.0012,.012]}else E.u_shadow_bias=[36e-5,.0012,.012];d.setShadowUniformValues(T,E)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(o,d,A,T){if(T[2]>=0)return{};const S=function(Z,K,Y){const ae=Y/(1<<Z.canonical.z);return new n.ce([Z.canonical.x*ae+Z.wrap*Y,Z.canonical.y*ae+Z.wrap*Y,0],[(Z.canonical.x+1)*ae+Z.wrap*Y,(Z.canonical.y+1)*ae+Z.wrap*Y,K])}(o,d,A).getCorners(),E=d/-T[2];T[0]<0?(n.ad.vec3.add(S[0],S[0],[T[0]*E,0,0]),n.ad.vec3.add(S[3],S[3],[T[0]*E,0,0])):T[0]>0&&(n.ad.vec3.add(S[1],S[1],[T[0]*E,0,0]),n.ad.vec3.add(S[2],S[2],[T[0]*E,0,0])),T[1]<0?(n.ad.vec3.add(S[0],S[0],[0,T[1]*E,0]),n.ad.vec3.add(S[1],S[1],[0,T[1]*E,0])):T[1]>0&&(n.ad.vec3.add(S[2],S[2],[0,T[1]*E,0]),n.ad.vec3.add(S[3],S[3],[0,T[1]*E,0]));const k={};return k.vertices=S,k.planes=[js(S[1],S[0],S[4]),js(S[2],S[1],S[5]),js(S[3],S[2],S[6]),js(S[0],S[3],S[7])],k}addShadowReceiver(o,d,A){this._receivers.add(o,n.ce.fromTileIdAndHeight(o,d,A))}getMaxCascadeForTile(o){const d=this._receivers.get(o);return d&&d.lastCascade?d.lastCascade:0}}function js(y,o,d){const A=n.ad.vec3.sub([],d,o),T=n.ad.vec3.sub([],y,o),S=n.ad.vec3.cross([],A,T),E=n.ad.vec3.length(S);return E===0?[0,0,1,0]:(n.ad.vec3.scale(S,S,1/E),[S[0],S[1],S[2],-n.ad.vec3.dot(S,o)])}function Dl(y){const o=y.properties.get("direction"),d=n.cc(o.x,o.y,o.z);d[2]=n.ay(d[2],0,75);const A=n.cf([d[0],d[1],d[2]]);return n.ad.vec3.fromValues(A.x,A.y,A.z)}function jc(y,o,d){const A=o.properties.get("color-use-theme")==="none",T=o.properties.get("color"),S=o.properties.get("intensity"),E=o.properties.get("direction"),k=[E.x,E.y,E.z],Z=d.properties.get("color-use-theme")==="none",K=d.properties.get("color"),Y=d.properties.get("intensity"),ae=Math.max(n.ad.vec3.dot([0,0,1],k),0),re=[0,0,0];n.ad.vec3.scale(re,K.toRenderColor(Z?null:y.getLut(o.scope)).toArray01Linear().slice(0,3),Y);const pe=[0,0,0];return n.ad.vec3.scale(pe,T.toRenderColor(A?null:y.getLut(d.scope)).toArray01Linear().slice(0,3),ae*S),n.cg([re[0]>0?re[0]/(re[0]+pe[0]):0,re[1]>0?re[1]/(re[1]+pe[1]):0,re[2]>0?re[2]/(re[2]+pe[2]):0])}function iu(y,o,d,A,T,S){const E=y.zoom,k=y.scale,Z=y.worldSize,K=1/Z,Y=y.aspect,ae=Math.sqrt(1+Y*Y)*Math.tan(.5*y.fovX),re=ae*ae,pe=A-d,Pe=A+d;let Ce,De;re>pe/Pe?(Ce=A,De=A*ae):(Ce=.5*Pe*(1+re),De=.5*Math.sqrt(pe*pe+2*(A*A+d*d)*re+Pe*Pe*re*re));const Le=y.projection.pixelsPerMeter(y.center.lat,Z),Ke=y._camera.getCameraToWorldMercator(),it=[0,0,-Ce*K];n.ad.vec3.transformMat4(it,it,Ke);let tt=De*K;const pt=y._edgeInsets;if(!(pt.left===0&&pt.top===0&&pt.right===0&&pt.bottom===0||pt.left===pt.right&&pt.top===pt.bottom)){const da=y._camera.getWorldToCamera(y.worldSize,y.projection.zAxisUnit==="meters"?Le:1),Xt=y._camera.getCameraToClipPerspective(y._fov,y.width/y.height,d,A);Xt[8]=2*-y.centerOffset.x/y.width,Xt[9]=2*y.centerOffset.y/y.height;const pa=new Float64Array(16);n.ad.mat4.mul(pa,Xt,da);const La=new Float64Array(16);n.ad.mat4.invert(La,pa);const Fa=n.bR.fromInvProjectionMatrix(La,Z,E,!0);for(const Va of Fa.points){const cr=((ut=Va)[0]/=k,ut[1]/=k,ut[2]=n.bH(ut[2],y._center.lat),ut);tt=Math.max(tt,n.ad.vec3.len(n.ad.vec3.subtract([],it,cr)))}}var ut;tt*=T/(T-1);const ct=Math.acos(o[2]),dt=Math.atan2(-o[0],-o[1]),vt=new Ms;vt.position=it,vt.setPitchBearing(ct,dt);const Tt=vt.getWorldToCamera(Z,Le),Qt=tt*Z,kt=Math.min(y._mercatorZfromZoom(17)*Z*-2,-2*Qt),ra=vt.getCameraToClipOrthographic(-Qt,Qt,-Qt,Qt,kt,(Qt+S*Le)/o[2]),ca=new Float64Array(16);n.ad.mat4.multiply(ca,ra,Tt);const xa=n.ad.vec3.fromValues(Math.floor(1e6*it[0])/1e6*Z,Math.floor(1e6*it[1])/1e6*Z,0),Ft=.5*T,sa=[0,0,0];n.ad.vec3.transformMat4(sa,xa,ca),n.ad.vec3.scale(sa,sa,Ft);const zt=[Math.floor(sa[0]),Math.floor(sa[1]),Math.floor(sa[2])],oa=[0,0,0];n.ad.vec3.sub(oa,sa,zt),n.ad.vec3.scale(oa,oa,-1/Ft);const ta=new Float64Array(16);return n.ad.mat4.identity(ta),n.ad.mat4.translate(ta,ta,oa),n.ad.mat4.multiply(ca,ta,ca),[ca,Qt]}class Ah extends n.E{constructor(o){super(),this.requestManager=o,this.models={"":{}},this.modelUris={"":{}},this.numModelsLoading={}}loadModel(o,d){return n.aN(this.requestManager.transformRequest(d,n.R.Model).url).then(A=>{if(!A)return;const T=n.aO(A),S=new n.aP(o,void 0,void 0,T);return S.computeBoundsAndApplyParent(),S}).catch(A=>{if(A&&A.status===404)return null;this.fire(new n.z(new Error(`Could not load model ${o} from ${d}: ${A.message}`)))})}load(o,d,A={keepNumReferences:!1}){this.models[d]||(this.models[d]={});const T=Object.keys(o);this.numModelsLoading[d]=(this.numModelsLoading[d]||0)+T.length;const S=[];for(const E of T)S.push(this.loadModel(E,o[E]));Promise.allSettled(S).then(E=>{for(let k=0;k<E.length;k++){const{status:Z,value:K}=E[k];if(Z==="fulfilled"&&K){const Y=this.models[d][T[k]];this.models[d][T[k]]={model:K,numReferences:A.keepNumReferences&&Y?Y.numReferences:1}}}this.numModelsLoading[d]-=T.length,this.fire(new n.A("data",{dataType:"style"}))}).catch(E=>{this.fire(new n.z(new Error(`Could not load models: ${E.message}`)))})}isLoaded(){for(const o in this.numModelsLoading)if(this.numModelsLoading[o]>0)return!1;return!0}hasModel(o,d){return!!this.getModel(o,d)}getModel(o,d){return this.models[d]||(this.models[d]={}),this.models[d][o]?this.models[d][o].model:void 0}addModel(o,d,A){this.models[A]||(this.models[A]={}),this.modelUris[A]||(this.modelUris[A]={}),this.hasModel(o,A)&&this.models[A][o].numReferences++,this.modelUris[A][o]=this.requestManager.normalizeModelURL(d),this.load({[o]:this.modelUris[A][o]},A)}addModels(o,d){this.models[d]||(this.models[d]={}),this.modelUris[d]||(this.modelUris[d]={});const A=this.modelUris[d];for(const T in o)this.models[d][T]={},A[T]=this.requestManager.normalizeModelURL(o[T]);this.load(A,d,{keepNumReferences:!0})}reloadModels(o){this.load(this.modelUris[o],o)}addModelsFromBucket(o,d){this.models[d]||(this.models[d]={}),this.modelUris[d]||(this.modelUris[d]={});const A={};for(const T of o)this.hasModel(T,d)?this.models[d][T].numReferences++:(this.modelUris[d][T]=this.requestManager.normalizeModelURL(T),A[T]=this.modelUris[d][T]);this.load(A,d)}removeModel(o,d){if(this.models[d]&&this.models[d][o]&&(this.models[d][o].numReferences--,this.models[d][o].numReferences===0)){const A=this.models[d][o].model;delete this.models[d][o],delete this.modelUris[d][o],A.destroy()}}listModels(o){return this.models[o]||(this.models[o]={}),Object.keys(this.models[o])}upload(o,d){this.models[d]||(this.models[d]={});for(const A in this.models[d])this.models[d][A].model&&this.models[d][A].model.upload(o.context)}}const Ml=new n.a7({data:new n.a8(n.a5.colorTheme.data)}),No={"mbx-indoor-active-floorplans":{default:["literal",[]]},"mbx-indoor-underground":{default:["literal",!1]},"mbx-indoor-loaded-levels":{default:["literal",[]]},"mbx-indoor-level-height":{default:["literal",{}]},"mbx-indoor-level-base":{default:["literal",{}]},"mbx-indoor-level-selected":{default:["literal",{}]},"mbx-indoor-level-overlapped":{default:["literal",{}]}};function Id(y){return y=y||{},Object.assign(y,No)}class Gc extends n.E{constructor(o){super(),this.mergeFloors=!0,this._scope=void 0,this._queryFeatureSetId=void 0,this._buildingEntryFeatureSetId=void 0,this._selectedFloorplan=void 0,this._indoorData=void 0,this._selectedLevel=void 0,this._floorplanStates={},n.aQ(["_onLoad","_onMove","_checkFloorplanVisible"],this),this._map=o,this._checkFloorplanVisible(!0),this._map.on("load",this._onLoad),this._map.on("move",this._onMove)}destroy(){this._map.indoor.off("load",this._onLoad),this._map.indoor.off("move",this._onMove),this._map=void 0}_onLoad(){this._map.style.forEachFragmentStyle(o=>{o.stylesheet.indoor&&(this._queryFeatureSetId?this.fire(new n.z(new Error("Multiple indoor map styles detected, simultaneous usage is not allowed currently."))):(this._queryFeatureSetId=o.stylesheet.indoor.floorplanFeaturesetId,this._buildingEntryFeatureSetId=o.stylesheet.indoor.buildingFeaturesetId,this._scope=o.scope))}),this._queryFeatureSetId&&this._buildingEntryFeatureSetId&&this._map.addInteraction("mbx-indoor-buildingclick",{type:"click",target:{featuresetId:this._buildingEntryFeatureSetId,importId:this._scope},handler:o=>(o.feature&&o.feature.properties.floorplan&&this.selectFloorplan(o.feature.properties.floorplan),!0)}),this._checkFloorplanVisible(!0)}_onMove(){this._checkFloorplanVisible(!1)}_checkFloorplanVisible(o){if(!this._queryFeatureSetId||!this._map.isStyleLoaded()||this._map.transform.zoom<13)return;this._indoorData&&!function(E,k){const[Z,K]=E,{center:Y,radius:ae}=k,[re,pe]=Y,Pe=Math.abs(Z-re);return Math.sqrt((Pe>180?360-Pe:Pe)**2+(K-pe)**2)<=ae}([this._map.getCenter().lng,this._map.getCenter().lat],this._indoorData.circumCircle)&&(this._indoorData=void 0,this._selectedFloorplan=void 0,this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",["literal",[]]),this.fire(new n.A("floorplangone")));const d={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},A=new n.P(this._map.transform.width/2,this._map.transform.height/2),T=[new n.P(0,0),new n.P(this._map.transform.width,this._map.transform.height)],S=this._map.queryRenderedFeatures(o?T:A,d);S.length>0&&(this._selectedFloorplan&&S[0].properties.id===this._selectedFloorplan.properties.id||(this._selectedFloorplan=S[0],this._floorplanSelected(!1)))}_floorplanSelected(o){this._indoorData=JSON.parse(this._selectedFloorplan.properties["indoor-data"]),this._indoorData.id=this._selectedFloorplan.properties.id,this._indoorData.circumCircle=function(S){const[[E,k],[Z,K]]=S,Y=(Z-E+360)%360,ae=Y>180?360-Y:Y;return{center:[(E+ae/2+360)%360,(k+K)/2],radius:Math.sqrt(ae**2+(K-k)**2)/2}}(this._indoorData.extent),this._floorplanStates[this._indoorData.id]||(this._floorplanStates[this._indoorData.id]={});const d=this._floorplanStates[this._indoorData.id].selectedBuilding,A=this._floorplanStates[this._indoorData.id].selectedLevel;let T;if(this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",this._indoorData.floorplanIDs),this._selectedLevel)for(const S of this._indoorData.levels)S.id===this._selectedLevel.id&&(T=S.id);if(this.fire(new n.A("floorplanselected",{buildings:this._indoorData.buildings,levels:this._indoorData.levels,selectedLevelId:T})),d){const S=this._indoorData.buildings.find(E=>E.id===d);this._buildingSelected(S,!1)}else this._indoorData.buildings.length>0&&this._buildingSelected(this._indoorData.buildings[0],!1);if(A){const S=this._indoorData.levels.find(E=>E.id===A);this._updateLevels(S,o)}else o&&this._indoorData["default-levels"].length>0&&this.selectLevel(this._indoorData["default-levels"][0])}_buildingSelected(o,d){d&&o&&o.extent&&this._map.fitBounds(o.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),this._floorplanStates[this._indoorData.id].selectedBuilding=o?o.id:void 0;const A=this._indoorData.levels.filter(T=>o.levels.includes(T.id));this.fire(new n.A("buildingselected",{buildingId:o.id,levels:A}))}_levelSelected(o){if(o==="overview")this._updateLevels(void 0,!0);else{const d=this._indoorData.levels.find(A=>A.id===o);this._updateLevels(d,!0)}this.fire(new n.A("levelselected",{levelId:o==="overview"?void 0:o}))}_updateLevels(o,d){if(!o)return this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",[]]),this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._floorplanStates[this._indoorData.id].selectedLevel=void 0,void(d&&this._indoorData.extent&&this._map.fitBounds(this._indoorData.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}));function A(K){const Y=K.indexOf("/floor/");if(Y===-1)return K;const ae=Y+7,re=K.indexOf("/",ae);return re===-1?K.slice(ae):K.slice(ae,re)}this._selectedLevel=o,this._floorplanStates[this._indoorData.id].selectedLevel=o?o.id:void 0;const T=[],S={},E={},k={},Z={};for(const K of this._indoorData.levels)if(T.push(K.id),S[K.id]=K.height,E[K.id]=K.base,o){if(this.mergeFloors){const Y=A(o.id),ae=A(K.id);k[K.id]=ae===Y?"true":"false"}else k[K.id]=K.id===o.id?"true":"false";Z[K.id]=K.base<o.base?"true":"false"}else Z[K.id]=!0;if(this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",T]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-height",["literal",S]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-base",["literal",E]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-selected",["literal",k]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-overlapped",["literal",Z]),o&&(this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!!o.isUnderground),d&&o.extent)){const K=this._map.cameraForBounds(o.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),Y=this._map.getZoom(),ae=K.zoom?Math.abs(Y-K.zoom):0;this._map.fitBounds(o.extent,ae>=1?{pitch:this._map.getPitch(),bearing:this._map.getBearing()}:{pitch:this._map.getPitch(),bearing:this._map.getBearing(),zoom:Y})}}selectFloorplan(o){const d={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},A=[new n.P(0,0),new n.P(this._map.transform.width,this._map.transform.height)],T=this._map.queryRenderedFeatures(A,d);if(T.length>0){for(const S of T)if(JSON.parse(S.properties["indoor-data"]).floorplanIDs.includes(o)){this._selectedFloorplan=S,this._floorplanSelected(!0);break}}}selectBuilding(o){const d=this._indoorData.buildings.find(A=>A.id===o);this._buildingSelected(d,!0)}selectLevel(o){this._levelSelected(o)}}function Il(y){if(!y.metadata||!y.metadata.content_area)return;const o=n.q.devicePixelRatio,{left:d,top:A,width:T,height:S}=y.metadata.content_area,E=d*o,k=A*o;return[E,k,E+T*o,k+S*o]}function wc(y){if(y)return y.map(([o,d])=>[o*n.q.devicePixelRatio,d*n.q.devicePixelRatio])}class xu{constructor(o,d){this.id=o,this.style=d}addIcons(o){const d=new Map;for(const[A,T]of o.entries()){const S=n.I.from({name:A,iconsetId:this.id});d.set(S,T)}this.style.addImages(d)}}const Qi=(y,o)=>Gt(y,o&&o.filter(d=>d.identifier!=="source.canvas")),bf=n.aA(Nn,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setSnow","setRain","setProjection","setCamera","addImport","removeImport","updateImport"]),so=n.aA(Nn,["setCenter","setZoom","setBearing","setPitch"]),_o=new Set(["background","sky","slot","custom"]),Ld={version:8,layers:[],sources:{}},Fd={duration:300,delay:0};class oo extends n.E{constructor(o,d={}){super(),this.map=o,this.scope=d.scope||"",this.globalId=null,this.fragments=[],this.importDepth=d.importDepth||0,this.importsCache=d.importsCache||new Map,this.resolvedImports=d.resolvedImports||new Set,this.transition=n.l({},Fd),this._buildingIndex=new Bc(this),this.crossTileSymbolIndex=new io,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._clipLayerPresent=!1,this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=d.styleChanges||new wa,this.dispatcher=d.dispatcher?d.dispatcher:new n.D(n.cj(),this),d.imageManager?this.imageManager=d.imageManager:(this.imageManager=new $t(this.map._spriteFormat),this.imageManager.setEventedParent(this)),this.imageManager.createScope(this.scope),this.glyphManager=d.glyphManager?d.glyphManager:new n.ck(o._requestManager,d.localFontFamily?n.cl.all:d.localIdeographFontFamily?n.cl.ideographs:n.cl.none,d.localFontFamily||d.localIdeographFontFamily),d.modelManager?this.modelManager=d.modelManager:(this.modelManager=new Ah(o._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this.options=d.configOptions?d.configOptions:new Map,this._configDependentLayers=d.configDependentLayers?d.configDependentLayers:new Set,this._config=d.config,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null,colorThemeOverride:d.colorThemeOverride},this._styleColorThemeForScope={},this._initialConfig=d.initialConfig,this.dispatcher.broadcast("setReferrer",n.cm());const A=this;this._rtlTextPluginCallback=oo.registerForPluginStateChange(T=>{A.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:T.pluginStatus,pluginURL:T.pluginURL},(S,E)=>{if(n.cn(S),E&&E.every(k=>k))for(const k in A._sourceCaches){const Z=A._sourceCaches[k],K=Z.getSource().type;K!=="vector"&&K!=="geojson"||Z.reload()}})}),this.on("data",T=>{if(T.dataType!=="source"||T.sourceDataType!=="metadata")return;const S=this.getOwnSource(T.sourceId);if(S&&S.vectorLayerIds)for(const E in this._layers){const k=this._layers[E];k.source===S.id&&this._validateLayer(k)}})}load(o){return o?(typeof o=="string"?this.loadURL(o):this.loadJSON(o),this):this}_getGlobalId(o){if(!o)return null;if(typeof o=="string"){if(n.f(o))return o;const d=n.co(o);if(!d.startsWith("http"))try{return new URL(d,location.href).toString()}catch{return d}return d}return`json://${n.cp(JSON.stringify(o))}`}_diffStyle(o,d,A){this.globalId=this._getGlobalId(o);const T=(S,E)=>{try{E(null,this.setState(S,A))}catch(k){E(k,!1)}};if(typeof o=="string"){const S=this.map._requestManager.normalizeStyleURL(o),E=this.map._requestManager.transformRequest(S,n.R.Style);n.n(E,(k,Z)=>{k?this.fire(new n.z(k)):Z&&T(Z,d)})}else typeof o=="object"&&T(o,d)}loadURL(o,d={}){this.fire(new n.A("dataloading",{dataType:"style"}));const A=typeof d.validate=="boolean"?d.validate:!n.f(o);this.globalId=this._getGlobalId(o),o=this.map._requestManager.normalizeStyleURL(o,d.accessToken),this.resolvedImports.add(o);const T=this.importsCache.get(o);if(T)return this._load(T,A);const S=this.map._requestManager.transformRequest(o,n.R.Style);this._request=n.n(S,(E,k)=>{if(this._request=null,E)this.fire(new n.z(E));else if(k)return this.importsCache.set(o,k),this._load(k,A)})}loadJSON(o,d={}){this.fire(new n.A("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(o),this._request=n.q.frame(()=>{this._request=null,this._load(o,d.validate!==!1)})}loadEmpty(){this.fire(new n.A("dataloading",{dataType:"style"})),this._load(Ld,!1)}_loadImports(o,d,A){if(this.importDepth>=4)return n.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const T=[];for(const S of o){const E=this._createFragmentStyle(S),k=new Promise(Y=>{E.once("style.import.load",Y),E.once("error",Y)}).then(()=>this.mergeAll());if(T.push(k),this.resolvedImports.has(S.url)){E.loadEmpty();continue}const Z=S.data||this.importsCache.get(S.url);Z?(E.loadJSON(Z,{validate:d}),this._isInternalStyle(Z)&&(E.globalId=null)):S.url?E.loadURL(S.url,{validate:d}):E.loadEmpty();const K={style:E,id:S.id,config:S.config};if(A){const Y=this.fragments.findIndex(({id:ae})=>ae===A);this.fragments=this.fragments.slice(0,Y).concat(K).concat(this.fragments.slice(Y))}else this.fragments.push(K)}return Promise.allSettled(T)}getImportGlobalIds(o=this,d=new Set){for(const A of o.fragments)A.style.globalId&&d.add(A.style.globalId),this.getImportGlobalIds(A.style,d);return[...d.values()]}_createFragmentStyle(o){const d=this.scope?n.C(o.id,this.scope):o.id;let A;const T=this._initialConfig&&this._initialConfig[d];(o.config||T)&&(A=n.l({},o.config,T));const S=new oo(this.map,{scope:d,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:A,configOptions:this.options,colorThemeOverride:o["color-theme"],configDependentLayers:this._configDependentLayers});return S.setEventedParent(this.map,{style:S}),S}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.map._precompilePrograms&&this.isRootStyle()}_isInternalStyle(o){return this.isRootStyle()&&(o.fragment||!!o.schema&&o.fragment!==!1)}_load(o,d){const A=o.indoor?Id(o.schema):o.schema;if(this._isInternalStyle(o)){const E=n.l({},Ld,{imports:[{id:"basemap",data:o,url:""}]});return void this._load(E,d)}if(this.updateConfig(this._config,A),d&&Qi(this,oi(o)))return;this._loaded=!0,this.stylesheet=n.cq(o);const T=()=>{for(const K in o.sources)this.addSource(K,o.sources[K],{validate:!1,isInitialLoad:!0});if(o.iconsets)for(const K in o.iconsets)this.addIconset(K,o.iconsets[K]);o.sprite?this._loadIconset(o.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.setGlyphsUrl(o.glyphs);const E=mh(this.stylesheet.layers);if(this._order=E.map(K=>K.id),this.stylesheet.light&&n.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const K=this.stylesheet.lights[0];this.light=new Wt(K.properties,K.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new Wt(this.stylesheet.light)),this._layers={};for(const K of E){const Y=n.cv(K,this.scope,this._styleColorTheme.lut,this.options);Y.configDependencies.size!==0&&this._configDependentLayers.add(Y.fqid),Y.setEventedParent(this,{layer:{id:Y.id}}),this._layers[Y.id]=Y;const ae=this.getOwnLayerSourceCache(Y),re=!!this.directionalLight&&this.directionalLight.shadowsEnabled();ae&&Y.canCastShadows()&&re&&(ae.castsShadows=!0)}this.stylesheet.featuresets&&this.setFeaturesetSelectors(this.stylesheet.featuresets),this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);const k=this.stylesheet.terrain;k&&(this.checkCanvasFingerprintNoise(),this.disableElevatedTerrain||this.terrainSetForDrapingOnly()||this._createTerrain(k,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.snow&&this._createSnow(this.stylesheet.snow),this.stylesheet.rain&&this._createRain(this.stylesheet.rain),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new n.A("data",{dataType:"style"}));const Z=this.isRootStyle();o.imports?this._loadImports(o.imports,d).then(()=>{this._reloadImports(),this.fire(new n.A(Z?"style.load":"style.import.load"))}):(this._reloadImports(),this.fire(new n.A(Z?"style.load":"style.import.load")))};this._styleColorTheme.colorTheme=this.stylesheet["color-theme"];const S=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(S){const E=this._evaluateColorThemeData(S);this._loadColorTheme(E).then(()=>{T()}).catch(k=>{n.w(`Couldn't load color theme from the stylesheet: ${k}`),T()})}else this._styleColorTheme.lut=null,T()}isRootStyle(){return this.importDepth===0}mergeAll(){let o,d,A,T,S,E,k,Z,K,Y;const ae={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(re=>{if(re.stylesheet){if(re.light!=null&&(o=re.light),re.stylesheet.lights)for(const pe of re.stylesheet.lights)pe.type==="ambient"&&re.ambientLight!=null&&(d=re.ambientLight),pe.type==="directional"&&re.directionalLight!=null&&(A=re.directionalLight);T=this._prioritizeTerrain(T,re.terrain,re.stylesheet.terrain),re.stylesheet.fog&&re.fog!=null&&(S=re.fog),re.stylesheet.snow&&re.snow!=null&&(E=re.snow),re.stylesheet.rain&&re.rain!=null&&(k=re.rain),re.stylesheet.camera!=null&&(Y=re.stylesheet.camera),re.stylesheet.projection!=null&&(Z=re.stylesheet.projection),re.stylesheet.transition!=null&&(K=re.stylesheet.transition),ae[re.scope]=re._styleColorTheme}}),this.light=o,this.ambientLight=d,this.directionalLight=A,this.fog=S,this.snow=E,this.rain=k,this._styleColorThemeForScope=ae,T===null?delete this.terrain:this.terrain=T,this.camera=Y||{"camera-projection":"perspective"},this.projection=Z||{name:"mercator"},this.transition=n.l({},Fd,K),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(o){const d=A=>{for(const T of A.fragments)d(T.style);o(A)};d(this)}_prioritizeTerrain(o,d,A){const T=o&&o.drapeRenderMode===0;return A===null?d&&d.drapeRenderMode===0?d:T?o:null:d!=null&&(!o||T||d&&d.drapeRenderMode===1)?d:o}mergeTerrain(){let o;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(d=>{o=this._prioritizeTerrain(o,d.terrain,d.stylesheet.terrain)}),o===null?delete this.terrain:this.terrain=o}mergeProjection(){let o;this.forEachFragmentStyle(d=>{d.stylesheet.projection!=null&&(o=d.stylesheet.projection)}),this.projection=o||{name:"mercator"}}mergeSources(){const o={},d={},A={};this.forEachFragmentStyle(T=>{for(const S in T._sourceCaches){const E=n.C(S,T.scope);o[E]=T._sourceCaches[S]}for(const S in T._otherSourceCaches){const E=n.C(S,T.scope);d[E]=T._otherSourceCaches[S]}for(const S in T._symbolSourceCaches){const E=n.C(S,T.scope);A[E]=T._symbolSourceCaches[S]}}),this._mergedSourceCaches=o,this._mergedOtherSourceCaches=d,this._mergedSymbolSourceCaches=A}mergeLayers(){const o={},d=[],A={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(S=>{for(const E of S._order){const k=S._layers[E];if(k.type==="slot"){const Z=n.cr(E);if(o[Z])continue;o[Z]=[]}k.slot&&o[k.slot]?o[k.slot].push(k):d.push(k)}}),this._mergedOrder=[];const T=(S=[])=>{for(const E of S)if(E.type==="slot"){const k=n.cr(E.id);o[k]&&T(o[k]),this._mergedSlots.push(k)}else{const k=n.C(E.id,E.scope);this._mergedOrder.push(k),A[k]=E,E.is3D(!!this.terrain)&&(this._has3DLayers=!0),E.type==="circle"&&(this._hasCircleLayers=!0),E.type==="symbol"&&(this._hasSymbolLayers=!0),E.type==="clip"&&(this._clipLayerPresent=!0)}};T(d),this._mergedOrder.sort((S,E)=>{const k=A[S],Z=A[E];return k.hasInitialOcclusionOpacityProperties?Z.is3D(!!this.terrain)?1:0:k.is3D(!!this.terrain)&&Z.hasInitialOcclusionOpacityProperties?-1:0}),this._mergedLayers=A,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(o){return this.stylesheet.camera=n.l({},this.stylesheet.camera,o),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(o){return o.data?function(d,A,T){const S=n.l({},A);for(const k of Object.keys(n.a5.colorTheme))S[k]===void 0&&(S[k]=n.a5.colorTheme[k].default);const E=new n.a6(Ml,d,new Map(T));return E.setTransitionOrValue(S,T),E.untransitioned().possiblyEvaluate(new n.aa(0))}(this.scope,o,this.options).get("data"):null}_loadColorTheme(o){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const d=this._styleColorTheme.lutLoadingCorrelationID;return new Promise((A,T)=>{const S="data:image/png;base64,";if(!o||o.length===0)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void A();let E=o;E.startsWith(S)||(E=S+E);const k=n.I.from("mapbox-reserved-lut"),Z=new Image;Z.src=E,Z.onerror=()=>{this._styleColorTheme.lutLoading=!1,T(new Error("Failed to load image data"))},Z.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==d)return void A();this._styleColorTheme.lutLoading=!1;const{width:K,height:Y,data:ae}=n.q.getImageData(Z);if(Y>32)return void T(new Error("The height of the image must be less than or equal to 32 pixels."));if(K!==Y*Y)return void T(new Error("The width of the image must be equal to the height squared."));this.getImage(k)&&this.removeImage(k),this.addImage(k,{data:new n.r({width:K,height:Y},ae),pixelRatio:1,sdf:!1,usvg:!1,version:0});const re=this.imageManager.getImage(k,this.scope);re?(this._styleColorTheme.lut={image:re.data,data:o},A()):T(new Error("Missing LUT image."))}})}getLut(o){const d=this._styleColorThemeForScope[o];return d?d.lut:null}setProjection(o){o?this.stylesheet.projection=o:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(o){this._spriteRequest=function(d,A,T){let S,E,k;const Z=n.q.devicePixelRatio>1?"@2x":"";let K=n.n(A.transformRequest(A.normalizeSpriteURL(d,Z,".json"),n.R.SpriteJSON),(re,pe)=>{K=null,k||(k=re,S=pe,ae())}),Y=n.o(A.transformRequest(A.normalizeSpriteURL(d,Z,".png"),n.R.SpriteImage),(re,pe)=>{Y=null,k||(k=re,E=pe,ae())});function ae(){if(k)T(k);else if(S&&E){const re=n.q.getImageData(E),pe={};for(const Pe in S){const{width:Ce,height:De,x:Le,y:Ke,sdf:it,pixelRatio:tt,stretchX:pt,stretchY:ut,content:ct}=S[Pe],dt=new n.r({width:Ce,height:De});n.r.copy(re,dt,{x:Le,y:Ke},{x:0,y:0},{width:Ce,height:De},null),pe[Pe]={data:dt,pixelRatio:tt,sdf:it,stretchX:pt,stretchY:ut,content:ct,usvg:!1}}T(null,pe)}}return{cancel(){K&&(K.cancel(),K=null),Y&&(Y.cancel(),Y=null)}}}(o,this.map._requestManager,(d,A)=>{if(this._spriteRequest=null,d)this.fire(new n.z(d));else if(A){const T=new Map;for(const S in A)T.set(n.I.from(S),A[S]);this.addImages(T)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new n.A("data",{dataType:"style"}))})}addIconset(o,d){if(d.type==="sprite")return void this._loadSprite(d.url);const A=this.getOwnSource(d.source);if(!A)return void this.fire(new n.z(new Error(`Source "${d.source}" as specified by iconset "${o}" does not exist and cannot be used as an iconset source`)));if(A.type!=="raster-array")return void this.fire(new n.z(new Error(`Source "${d.source}" as specified by iconset "${o}" is not a "raster-array" source and cannot be used as an iconset source`)));this.imageManager.createIconset(this.scope,o);const T=new xu(o,this);A.addIconset(o,T)}_loadIconset(o){if(!n.f(o)&&this.map._spriteFormat!=="icon_set"||this.map._spriteFormat==="raster")return void this._loadSprite(o);const d=this.map._spriteFormat==="auto";var A,T;this._spriteRequest=(T=(S,E)=>{if(this._spriteRequest=null,S)d?this._loadSprite(o):this.fire(new n.z(S));else if(E){const k=new Map;for(const Z in E)k.set(n.I.from(Z),E[Z]);this.addImages(k)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new n.A("data",{dataType:"style"}))},n.bj((A=this.map._requestManager).transformRequest(A.normalizeIconsetURL(o),n.R.Iconset),(S,E)=>{if(S)return void T(S);const k={},Z=n.ch(new n.bi(E));for(const K of Z.icons){const Y={version:1,pixelRatio:n.q.devicePixelRatio,content:Il(K),stretchX:K.metadata?wc(K.metadata.stretch_x_areas):void 0,stretchY:K.metadata?wc(K.metadata.stretch_y_areas):void 0,sdf:!1,usvg:!0,icon:K};k[K.name]=Y}T(null,k)}))}_validateLayer(o){const d=this.getOwnSource(o.source);if(!d)return;const A=o.sourceLayer;A&&(d.type==="geojson"||d.vectorLayerIds&&d.vectorLayerIds.indexOf(A)===-1)&&this.fire(new n.z(new Error(`Source layer "${A}" does not exist on source "${d.id}" as specified by style layer "${o.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const o in this._sourceCaches)if(!this._sourceCaches[o].loaded())return!1;if(!this.imageManager.isLoaded()||this.imageManager.hasPatternsInFlight()||!this.modelManager.isLoaded()||this._styleColorTheme.lutLoading)return!1;for(const{style:o}of this.fragments)if(!o.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((o,d)=>{const A=this.fragments[d];return A&&A.style&&(o.data=A.style.serialize()),o})}_serializeSources(){const o={};for(const d in this._sourceCaches){const A=this._sourceCaches[d].getSource();o[A.id]||(o[A.id]=A.serialize())}return o}_serializeLayers(o){const d=[];for(const A of o){const T=this._layers[A];T&&T.type!=="custom"&&d.push(T.serialize())}return d}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasSnowTransition(){return!!this.snow&&this.snow.hasTransition()}hasRainTransition(){return!!this.rain&&this.rain.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition()||this.hasSnowTransition()||this.hasRainTransition())return!0;for(const o in this._sourceCaches)if(this._sourceCaches[o].hasTransition())return!0;for(const o in this._layers)if(this._layers[o].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}_getOrder(o){return o?this.order:this._mergedOrder}isLayerDraped(o){return!!this.terrain&&o.isDraped(this.getLayerSourceCache(o))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(o){const d=this.getOwnLayer(o);if(d)return d;this.fire(new n.z(new Error(`The layer '${o}' does not exist in the map's style.`)))}_checkSource(o){const d=this.getOwnSource(o);if(d)return d;this.fire(new n.z(new Error(`The source '${o}' does not exist in the map's style.`)))}precompilePrograms(o,d){const A=this.map.painter;if(A)for(let T=o.minzoom||0;T<(o.maxzoom||25.5);T++){const S=o.getProgramIds();if(S)for(const E of S){const k=o.getDefaultProgramParams(E,d.zoom,this._styleColorTheme.lut);k&&(A.style=this,this.fog&&(A._fogVisible=!0,k.overrideFog=!0,A.getOrCreateProgram(E,k)),A._fogVisible=!1,k.overrideFog=!1,A.getOrCreateProgram(E,k),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(k.overrideRtt=!0,A.getOrCreateProgram(E,k)))}}}update(o){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(o),this.directionalLight&&this.directionalLight.recalculate(o);const d=this.calculateLightsBrightness();o.brightness=d||0,d!==this._brightness&&(this._brightness=d,this.dispatcher.broadcast("setBrightness",d));const A=this._changes.isDirty();let T=!1;if(this._changes.isDirty()){const E=this._changes.getLayerUpdatesByScope();for(const k in E){const{updatedIds:Z,removedIds:K}=E[k];(Z||K)&&(this._updateWorkerLayers(k,Z,K),T=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(o),this.light&&this.light.updateTransitions(o),this.ambientLight&&this.ambientLight.updateTransitions(o),this.directionalLight&&this.directionalLight.updateTransitions(o),this.fog&&this.fog.updateTransitions(o),this.snow&&this.snow.updateTransitions(o),this.rain&&this.rain.updateTransitions(o),this._changes.reset()}const S={};for(const E in this._mergedSourceCaches){const k=this._mergedSourceCaches[E];S[E]=k.used,k.used=!1,k.tileCoverLift=0}for(const E of this._mergedOrder){const k=this._mergedLayers[E];if(k.recalculate(o,this._availableImages),!k.isHidden(o.zoom)){const Z=this.getLayerSourceCache(k);Z&&(Z.used=!0,Z.tileCoverLift=Math.max(Z.tileCoverLift,k.tileCoverLift()))}!this._precompileDone&&this._shouldPrecompile&&("requestIdleCallback"in window?requestIdleCallback(()=>{this.precompilePrograms(k,o)}):this.precompilePrograms(k,o))}for(const E in this._mergedSourceCaches){const k=this._mergedSourceCaches[E];if(!k)continue;const Z=k._source;Z.type==="raster-array"&&Z.iconsets&&(k.used=!0)}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&T&&this.mergeLayers();for(const E in S){const k=this._mergedSourceCaches[E];S[E]!==k.used&&k.getSource().fire(new n.A("data",{sourceDataType:"visibility",dataType:"source",sourceId:k.getSource().id}))}this.light&&this.light.recalculate(o),this.terrain&&this.terrain.recalculate(o),this.fog&&this.fog.recalculate(o),this.snow&&this.snow.recalculate(o),this.rain&&this.rain.recalculate(o),this.z=o.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),this.imageManager.clearUpdatedImages(this.scope),A&&this.fire(new n.A("data",{dataType:"style"}))}_updateTilesForChangedImages(){const o=this._changes.getUpdatedImages();if(o.length){for(const d in this._mergedSourceCaches)this._mergedSourceCaches[d].reloadTilesForDependencies(["icons","patterns"],o);this._changes.resetUpdatedImages()}}_updateWorkerLayers(o,d,A){const T=this.getFragmentStyle(o);T&&this.dispatcher.broadcast("updateLayers",{layers:d?T._serializeLayers(d):[],scope:o,removedIds:A||[],options:T.options})}setState(o,d){if(this._checkLoaded(),Qi(this,oi(o)))return!1;(o=n.cq(o)).layers=mh(o.layers);const A=function(E,k){if(!E)return[{command:Nn.setStyle,args:[k]}];let Z=[];try{if(!n.bn(E.version,k.version))return[{command:Nn.setStyle,args:[k]}];if(n.bn(E.center,k.center)||Z.push({command:Nn.setCenter,args:[k.center]}),n.bn(E.zoom,k.zoom)||Z.push({command:Nn.setZoom,args:[k.zoom]}),n.bn(E.bearing,k.bearing)||Z.push({command:Nn.setBearing,args:[k.bearing]}),n.bn(E.pitch,k.pitch)||Z.push({command:Nn.setPitch,args:[k.pitch]}),n.bn(E.sprite,k.sprite)||Z.push({command:Nn.setSprite,args:[k.sprite]}),n.bn(E.glyphs,k.glyphs)||Z.push({command:Nn.setGlyphs,args:[k.glyphs]}),n.bn(E.imports,k.imports)||function(pe=[],Pe=[],Ce){Pe=Pe||[];const De=(pe=pe||[]).map(bn),Le=Pe.map(bn),Ke=pe.reduce(Ws,{}),it=Pe.reduce(Ws,{}),tt=De.slice();let pt,ut,ct,dt;for(pt=0,ut=0;pt<De.length;pt++)ct=De[pt],it.hasOwnProperty(ct)?ut++:(Ce.push({command:Nn.removeImport,args:[ct]}),tt.splice(tt.indexOf(ct,ut),1));for(pt=0,ut=0;pt<Le.length;pt++)ct=Le[Le.length-1-pt],tt[tt.length-1-pt]!==ct&&(Ke.hasOwnProperty(ct)?(Ce.push({command:Nn.removeImport,args:[ct]}),tt.splice(tt.lastIndexOf(ct,tt.length-ut),1)):ut++,dt=tt[tt.length-pt],Ce.push({command:Nn.addImport,args:[it[ct],dt]}),tt.splice(tt.length-pt,0,ct));for(const vt of Pe){const Tt=Ke[vt.id];Tt&&!n.bn(Tt,vt)&&Ce.push({command:Nn.updateImport,args:[vt.id,vt]})}}(E.imports,k.imports,Z),n.bn(E.transition,k.transition)||Z.push({command:Nn.setTransition,args:[k.transition]}),n.bn(E.light,k.light)||Z.push({command:Nn.setLight,args:[k.light]}),n.bn(E.fog,k.fog)||Z.push({command:Nn.setFog,args:[k.fog]}),n.bn(E.snow,k.snow)||Z.push({command:Nn.setSnow,args:[k.snow]}),n.bn(E.rain,k.rain)||Z.push({command:Nn.setRain,args:[k.rain]}),n.bn(E.projection,k.projection)||Z.push({command:Nn.setProjection,args:[k.projection]}),n.bn(E.lights,k.lights)||Z.push({command:Nn.setLights,args:[k.lights]}),n.bn(E.camera,k.camera)||Z.push({command:Nn.setCamera,args:[k.camera]}),!n.bn(E["color-theme"],k["color-theme"]))return[{command:Nn.setStyle,args:[k]}];const K={},Y=[];(function(pe,Pe,Ce,De){let Le;for(Le in Pe=Pe||{},pe=pe||{})pe.hasOwnProperty(Le)&&(Pe.hasOwnProperty(Le)||mc(Le,Ce,De));for(Le in Pe){if(!Pe.hasOwnProperty(Le))continue;const Ke=Pe[Le];pe.hasOwnProperty(Le)?n.bn(pe[Le],Ke)||(pe[Le].type==="geojson"&&Ke.type==="geojson"&&tr(pe,Pe,Le)?Ce.push({command:Nn.setGeoJSONSourceData,args:[Le,Ke.data]}):gc(Le,Pe,Ce,De)):Ks(Le,Pe,Ce)}})(E.sources,k.sources,Y,K);const ae=[];E.layers&&E.layers.forEach(pe=>{pe.source&&K[pe.source]?Z.push({command:Nn.removeLayer,args:[pe.id]}):ae.push(pe)});let re=E.terrain;re&&K[re.source]&&(Z.push({command:Nn.setTerrain,args:[void 0]}),re=void 0),Z=Z.concat(Y),n.bn(re,k.terrain)||Z.push({command:Nn.setTerrain,args:[k.terrain]}),function(pe,Pe,Ce){Pe=Pe||[];const De=(pe=pe||[]).map(bn),Le=Pe.map(bn),Ke=pe.reduce(Ws,{}),it=Pe.reduce(Ws,{}),tt=De.slice(),pt=Object.create(null);let ut,ct,dt,vt,Tt,Qt,kt;for(ut=0,ct=0;ut<De.length;ut++)dt=De[ut],it.hasOwnProperty(dt)?ct++:(Ce.push({command:Nn.removeLayer,args:[dt]}),tt.splice(tt.indexOf(dt,ct),1));for(ut=0,ct=0;ut<Le.length;ut++)dt=Le[Le.length-1-ut],tt[tt.length-1-ut]!==dt&&(Ke.hasOwnProperty(dt)?(Ce.push({command:Nn.removeLayer,args:[dt]}),tt.splice(tt.lastIndexOf(dt,tt.length-ct),1)):ct++,Qt=tt[tt.length-ut],Ce.push({command:Nn.addLayer,args:[it[dt],Qt]}),tt.splice(tt.length-ut,0,dt),pt[dt]=!0);for(ut=0;ut<Le.length;ut++)if(dt=Le[ut],vt=Ke[dt],Tt=it[dt],!pt[dt]&&!n.bn(vt,Tt))if(n.bn(vt.source,Tt.source)&&n.bn(vt["source-layer"],Tt["source-layer"])&&n.bn(vt.type,Tt.type)){for(kt in dn(vt.layout,Tt.layout,Ce,dt,null,Nn.setLayoutProperty),dn(vt.paint,Tt.paint,Ce,dt,null,Nn.setPaintProperty),n.bn(vt.slot,Tt.slot)||Ce.push({command:Nn.setSlot,args:[dt,Tt.slot]}),n.bn(vt.filter,Tt.filter)||Ce.push({command:Nn.setFilter,args:[dt,Tt.filter]}),n.bn(vt.minzoom,Tt.minzoom)&&n.bn(vt.maxzoom,Tt.maxzoom)||Ce.push({command:Nn.setLayerZoomRange,args:[dt,Tt.minzoom,Tt.maxzoom]}),vt)vt.hasOwnProperty(kt)&&kt!=="layout"&&kt!=="paint"&&kt!=="filter"&&kt!=="metadata"&&kt!=="minzoom"&&kt!=="maxzoom"&&kt!=="slot"&&(kt.indexOf("paint.")===0?dn(vt[kt],Tt[kt],Ce,dt,kt.slice(6),Nn.setPaintProperty):n.bn(vt[kt],Tt[kt])||Ce.push({command:Nn.setLayerProperty,args:[dt,kt,Tt[kt]]}));for(kt in Tt)Tt.hasOwnProperty(kt)&&!vt.hasOwnProperty(kt)&&kt!=="layout"&&kt!=="paint"&&kt!=="filter"&&kt!=="metadata"&&kt!=="minzoom"&&kt!=="maxzoom"&&kt!=="slot"&&(kt.indexOf("paint.")===0?dn(vt[kt],Tt[kt],Ce,dt,kt.slice(6),Nn.setPaintProperty):n.bn(vt[kt],Tt[kt])||Ce.push({command:Nn.setLayerProperty,args:[dt,kt,Tt[kt]]}))}else Ce.push({command:Nn.removeLayer,args:[dt]}),Qt=tt[tt.lastIndexOf(dt)+1],Ce.push({command:Nn.addLayer,args:[Tt,Qt]})}(ae,k.layers,Z)}catch(K){console.warn("Unable to compute style diff:",K),Z=[{command:Nn.setStyle,args:[k]}]}return Z}(this.serialize(),o).filter(E=>!(E.command in so));if(A.length===0)return!1;const T=A.filter(E=>!(E.command in bf));if(T.length>0)throw new Error(`Unimplemented: ${T.map(E=>E.command).join(", ")}.`);const S=[];return A.forEach(E=>{S.push(this[E.command].apply(this,E.args))}),d&&Promise.all(S).then(d),this.stylesheet=o,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}_updateWorkerImages(){this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages})}addImages(o){for(const[d,A]of o.entries()){if(this.getImage(d)&&!d.iconsetId)return this.fire(new n.z(new Error(`An image with the name "${d.name}" already exists.`)));this.imageManager.addImage(d,this.scope,A),this._changes.updateImage(d)}return this._updateWorkerImages(),this.fire(new n.A("data",{dataType:"style"})),this}addImage(o,d){return this.getImage(o)&&!o.iconsetId?this.fire(new n.z(new Error(`An image with the name "${o.name}" already exists.`))):(this.imageManager.addImage(o,this.scope,d),this._changes.updateImage(o),this._updateWorkerImages(),this.fire(new n.A("data",{dataType:"style"})),this)}updateImage(o,d,A=!1){this.imageManager.updateImage(o,this.scope,d),A&&(this._changes.updateImage(o),this._updateWorkerImages(),this.fire(new n.A("data",{dataType:"style"})))}getImage(o){return this.imageManager.getImage(o,this.scope)}removeImage(o){return this.getImage(o)?(this.imageManager.removeImage(o,this.scope),this._changes.updateImage(o),this._updateWorkerImages(),this.fire(new n.A("data",{dataType:"style"})),this):this.fire(new n.z(new Error("No image with this name exists.")))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(o,d,A={}){return this._checkLoaded(),this._validate(At,`models.${o}`,d,null,A)||(this.modelManager.addModel(o,d,this.scope),this._changes.setDirty()),this}hasModel(o){return this.modelManager.hasModel(o,this.scope)}removeModel(o){return this.hasModel(o)?(this.modelManager.removeModel(o,this.scope),this):this.fire(new n.z(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(o,d,A={}){if(this._checkLoaded(),this.getOwnSource(o)!==void 0)throw new Error(`There is already a source with ID "${o}".`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(Cs,`sources.${o}`,d,null,A))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const T=jo(o,d,this.dispatcher,this);T.scope=this.scope,T.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(T.id),source:T.serialize(),sourceId:T.id}));const S=E=>{const k=(E?"symbol:":"other:")+T.id,Z=n.C(k,this.scope),K=this._sourceCaches[k]=new al(Z,T,E);(E?this._symbolSourceCaches:this._otherSourceCaches)[T.id]=K,K.onAdd(this.map)};S(!1),d.type!=="vector"&&d.type!=="geojson"||S(!0),T.onAdd&&T.onAdd(this.map),A.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(o){this._checkLoaded();const d=this.getOwnSource(o);if(!d)throw new Error("There is no source with this ID");for(const T in this._layers)if(this._layers[T].source===o)return this.fire(new n.z(new Error(`Source "${o}" cannot be removed while layer "${T}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===o)return this.fire(new n.z(new Error(`Source "${o}" cannot be removed while terrain is using it.`)));const A=this.getOwnSourceCaches(o);for(const T of A){const S=n.cr(T.id);delete this._sourceCaches[S],this._changes.discardSourceCacheUpdate(T.id),T.fire(new n.A("data",{sourceDataType:"metadata",dataType:"source",sourceId:T.getSource().id})),T.setEventedParent(null),T.clearTiles()}return delete this._otherSourceCaches[o],delete this._symbolSourceCaches[o],this.mergeSources(),d.setEventedParent(null),d.onRemove&&d.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(o,d){this._checkLoaded(),this.getOwnSource(o).setData(d),this._changes.setDirty()}getOwnSource(o){const d=this.getOwnSourceCache(o);return d&&d.getSource()}getOwnSources(){const o=[];for(const d in this._otherSourceCaches){const A=this.getOwnSourceCache(d);A&&o.push(A.getSource())}return o}areTilesLoaded(){const o=this._mergedSourceCaches;for(const d in o){const A=o[d]._tiles;for(const T in A){const S=A[T];if(S.state!=="loaded"&&S.state!=="errored")return!1}}return!0}setLights(o){if(this._checkLoaded(),!o)return delete this.ambientLight,void delete this.directionalLight;const d=this._getTransitionParameters();for(const T of o){if(this._validate(pr,"lights",T))return;switch(T.type){case"ambient":if(this.ambientLight){const S=this.ambientLight;S.set(T),S.updateTransitions(d)}else this.ambientLight=new ki(T,Yr||(Yr=new n.a7({color:new n.a8(n.a5.properties_light_ambient.color),"color-use-theme":new n.a8({type:"string",default:"default","property-type":"data-constant"}),intensity:new n.a8(n.a5.properties_light_ambient.intensity)})),this.scope,this.options);break;case"directional":if(this.directionalLight){const S=this.directionalLight;S.set(T),S.updateTransitions(d)}else this.directionalLight=new ki(T,Cn||(Cn=new n.a7({direction:new n.am(n.a5.properties_light_directional.direction),color:new n.a8(n.a5.properties_light_directional.color),"color-use-theme":new n.a8({type:"string",default:"default","property-type":"data-constant"}),intensity:new n.a8(n.a5.properties_light_directional.intensity),"cast-shadows":new n.a8(n.a5.properties_light_directional["cast-shadows"]),"shadow-quality":new n.a8(n.a5.properties_light_directional["shadow-quality"]),"shadow-intensity":new n.a8(n.a5.properties_light_directional["shadow-intensity"])})),this.scope,this.options)}}const A=new n.aa(this.z||0,d);this.ambientLight&&this.ambientLight.recalculate(A),this.directionalLight&&this.directionalLight.recalculate(A),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const o=this.directionalLight,d=this.ambientLight;if(!o||!d)return;const A=re=>.2126*(re[0]<=.03928?re[0]/12.92:Math.pow((re[0]+.055)/1.055,2.4))+.7152*(re[1]<=.03928?re[1]/12.92:Math.pow((re[1]+.055)/1.055,2.4))+.0722*(re[2]<=.03928?re[2]/12.92:Math.pow((re[2]+.055)/1.055,2.4)),T=o.properties.get("color").toRenderColor(null).toArray01(),S=o.properties.get("intensity"),E=o.properties.get("direction"),k=1-n.cc(E.x,E.y,E.z)[2]/90,Z=A(T)*S*k,K=d.properties.get("color").toRenderColor(null).toArray01(),Y=d.properties.get("intensity"),ae=A(K)*Y;return Number(((Z+ae)/2).toFixed(6))}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const o=[];return this.directionalLight&&o.push(this.directionalLight.get()),this.ambientLight&&o.push(this.ambientLight.get()),o}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(o){if(!o)return this;if(n.cs(o)){const d=n.ct(o),A=this.fragments.find(({id:S})=>S===d);if(!A)throw new Error(`Style import '${o}' not found`);const T=n.cr(o);return A.style.getFragmentStyle(T)}{const d=this.fragments.find(({id:A})=>A===o);return d?d.style:void 0}}setFeaturesetSelectors(o){if(!o)return;const d={},A=(T,S="")=>`${T}::${S}`;this._featuresetSelectors={};for(const T in o){const S=this._featuresetSelectors[T]=[];for(const E of o[T].selectors){if(E.featureNamespace){const Z=this.getOwnLayer(E.layer);if(!Z){n.w(`Layer is undefined for selector: ${E.layer}`);continue}const K=A(Z.source,Z.sourceLayer);if(K in d&&d[K]!==E.featureNamespace){n.w(`"featureNamespace ${E.featureNamespace} of featureset ${T}'s selector is not associated to the same source, skip this selector`);continue}d[K]=E.featureNamespace}let k;if(E.properties)for(const Z in E.properties){const K=n.X(E.properties[Z]);K.result==="success"&&(k=k||{},k[Z]=K.value)}S.push({layerId:E.layer,namespace:E.featureNamespace,properties:k,uniqueFeatureID:E._uniqueFeatureID})}}}getFeaturesetDescriptors(o){const d=this.getFragmentStyle(o);if(!d||!d.stylesheet.featuresets)return[];const A=[];for(const T in d.stylesheet.featuresets)A.push({featuresetId:T,importId:d.scope?d.scope:void 0});return A}getFeaturesetLayers(o,d){const A=this.getFragmentStyle(d),T=A.stylesheet.featuresets;if(!T||!T[o])return this.fire(new n.z(new Error(`The featureset '${o}' does not exist in the map's style and cannot be queried.`))),[];const S=[];for(const E of T[o].selectors){const k=A.getOwnLayer(E.layer);k&&S.push(k)}return S}getConfigProperty(o,d){const A=this.getFragmentStyle(o);if(!A)return null;const T=n.C(d,A.scope),S=A.options.get(T),E=S?S.value||S.default:null;return E?E.serialize():null}setConfigProperty(o,d,A){const T=this.getFragmentStyle(o);if(!T)return;const S=T.stylesheet.indoor?Id(T.stylesheet.schema):T.stylesheet.schema;if(!S||!S[d])return;const E=n.X(A);if(E.result!=="success")return void Qi(this,E.value);const k=E.value.expression,Z=n.C(d,T.scope),K=T.options.get(Z);if(!K)return;let Y;const{minValue:ae,maxValue:re,stepValue:pe,type:Pe,values:Ce}=S[d],De=n.X(S[d].default);De.result==="success"&&(Y=De.value.expression),Y?(this.options.set(Z,Object.assign({},K,{value:k,default:Y,minValue:ae,maxValue:re,stepValue:pe,type:Pe,values:Ce})),this.updateConfigDependencies(d)):this.fire(new n.z(new Error(`No schema defined for the config option "${d}" in the "${o}" fragment.`)))}getConfig(o){const d=this.getFragmentStyle(o);if(!d)return null;const A=d.stylesheet.schema;if(!A)return null;const T={};for(const S in A){const E=n.C(S,d.scope),k=d.options.get(E),Z=k?k.value||k.default:null;T[S]=Z?Z.serialize():null}return T}setConfig(o,d){const A=this.getFragmentStyle(o);A&&(A.updateConfig(d,A.stylesheet.schema),this.updateConfigDependencies())}getSchema(o){const d=this.getFragmentStyle(o);return d?d.stylesheet.schema:null}setSchema(o,d){const A=this.getFragmentStyle(o);A&&(A.stylesheet.schema=d,A.updateConfig(A._config,d),this.updateConfigDependencies())}updateConfig(o,d){if(this._config=o,o||d)if(d)for(const A in d){let T,S;const E=n.X(d[A].default);if(E.result==="success"&&(T=E.value.expression),o&&o[A]!==void 0){const re=n.X(o[A]);re.result==="success"&&(S=re.value.expression)}const{minValue:k,maxValue:Z,stepValue:K,type:Y,values:ae}=d[A];if(T){const re=n.C(A,this.scope);this.options.set(re,{default:T,value:S,minValue:k,maxValue:Z,stepValue:K,type:Y,values:ae})}else this.fire(new n.z(new Error(`No schema defined for config option "${A}".`)))}else this.fire(new n.z(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(o){for(const d of this._configDependentLayers){const A=this.getLayer(d);if(A){if(o&&!A.configDependencies.has(o))continue;A.possiblyEvaluateVisibility(),this._updateLayer(A)}}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.snow&&this.snow.updateConfig(this.options),this.rain&&this.rain.updateConfig(this.options),this.forEachFragmentStyle(d=>{const A=d._styleColorTheme.colorThemeOverride?d._styleColorTheme.colorThemeOverride:d._styleColorTheme.colorTheme;if(A){const T=d._evaluateColorThemeData(A);(!d._styleColorTheme.lut&&T!==""||d._styleColorTheme.lut&&T!==d._styleColorTheme.lut.data)&&d.setColorTheme(A)}}),this._changes.setDirty()}addLayer(o,d,A={}){this._checkLoaded();const T=o.id;if(this._layers[T])return void this.fire(new n.z(new Error(`Layer with id "${T}" already exists on this map`)));let S;if(o.type==="custom"){if(Qi(this,n.cu(o)))return;S=n.cv(o,this.scope,this._styleColorTheme.lut,this.options)}else{if(typeof o.source=="object"&&(this.addSource(T,o.source),o=n.cq(o),o=n.l(o,{source:T})),this._validate(Ne,`layers.${T}`,o,{arrayIndex:-1},A))return;S=n.cv(o,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(S),S.setEventedParent(this,{layer:{id:T}})}S.configDependencies.size!==0&&this._configDependentLayers.add(S.fqid);let E=this._order.length;if(d){const Y=this._order.indexOf(d);if(Y===-1)return void this.fire(new n.z(new Error(`Layer with id "${d}" does not exist on this map.`)));S.slot===this._layers[d].slot?E=Y:n.w(`Layer with id "${d}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(E,0,T),this._layerOrderChanged=!0,this._layers[T]=S;const k=this.getOwnLayerSourceCache(S),Z=!!this.directionalLight&&this.directionalLight.shadowsEnabled();k&&S.canCastShadows()&&Z&&(k.castsShadows=!0);const K=this._changes.getRemovedLayer(S);if(K&&S.source&&k&&S.type!=="custom"){this._changes.discardLayerRemoval(S);const Y=n.C(S.source,S.scope);K.type!==S.type?this._changes.updateSourceCache(Y,"clear"):(this._changes.updateSourceCache(Y,"reload"),k.pause())}this._updateLayer(S),S.onAdd&&S.onAdd(this.map),S.scope=this.scope,this.mergeLayers()}moveLayer(o,d){this._checkLoaded();const A=this._checkLayer(o);if(!A||o===d)return;const T=this._order.indexOf(o);this._order.splice(T,1);let S=this._order.length;if(d){const E=this._order.indexOf(d);if(E===-1)return void this.fire(new n.z(new Error(`Layer with id "${d}" does not exist on this map.`)));A.slot===this._layers[d].slot?S=E:n.w(`Layer with id "${d}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(S,0,o),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(o){this._checkLoaded();const d=this._checkLayer(o);if(!d)return;d.setEventedParent(null);const A=this._order.indexOf(o);this._order.splice(A,1),delete this._layers[o],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(d.fqid),this._changes.removeLayer(d);const T=this.getOwnLayerSourceCache(d);if(T&&T.castsShadows){let S=!1;for(const E in this._layers)if(this._layers[E].source===d.source&&this._layers[E].canCastShadows()){S=!0;break}T.castsShadows=S}d.onRemove&&d.onRemove(this.map),this.mergeLayers()}getOwnLayer(o){return this._layers[o]}hasLayer(o){return o in this._mergedLayers}hasLayerType(o){for(const d in this._layers)if(this._layers[d].type===o)return!0;return!1}setLayerZoomRange(o,d,A){this._checkLoaded();const T=this._checkLayer(o);T&&(T.minzoom===d&&T.maxzoom===A||(d!=null&&(T.minzoom=d),A!=null&&(T.maxzoom=A),this._updateLayer(T)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(o,d){this._checkLoaded();const A=this._checkLayer(o);A&&A.slot!==d&&(A.slot=d,this._updateLayer(A))}setFilter(o,d,A={}){this._checkLoaded();const T=this._checkLayer(o);if(T&&!n.bn(T.filter,d))return d==null?(T.filter=void 0,void this._updateLayer(T)):void(this._validate(Ie,`layers.${T.id}.filter`,d,{layerType:T.type},A)||(T.filter=n.cq(d),this._updateLayer(T)))}getFilter(o){const d=this._checkLayer(o);if(d)return n.cq(d.filter)}setLayoutProperty(o,d,A,T={}){this._checkLoaded();const S=this._checkLayer(o);if(S&&!n.bn(S.getLayoutProperty(d),A)){if(A!=null&&(!T||T.validate!==!1)&&Qi(S,yt.call(oi,{key:`layers.${o}.layout.${d}`,layerType:S.type,objectKey:d,value:A,styleSpec:n.a5,style:{glyphs:!0,sprite:!0}})))return;S.setLayoutProperty(d,A),S.configDependencies.size!==0&&this._configDependentLayers.add(S.fqid),this._updateLayer(S)}}getLayoutProperty(o,d){const A=this._checkLayer(o);if(A)return A.getLayoutProperty(d)}setPaintProperty(o,d,A,T={}){this._checkLoaded();const S=this._checkLayer(o);if(!S||n.bn(S.getPaintProperty(d),A)||A!=null&&(!T||T.validate!==!1)&&Qi(S,He.call(oi,{key:`layers.${o}.paint.${d}`,layerType:S.type,objectKey:d,value:A,styleSpec:n.a5})))return;const E=S.setPaintProperty(d,A);S.configDependencies.size!==0&&this._configDependentLayers.add(S.fqid),E&&this._updateLayer(S),this._changes.updatePaintProperties(S)}getPaintProperty(o,d){const A=this._checkLayer(o);if(A)return A.getPaintProperty(d)}setFeatureState(o,d){if(this._checkLoaded(),"target"in o){if("featuresetId"in o.target){const{featuresetId:Z,importId:K}=o.target,Y=this.getFragmentStyle(K),ae=Y.getFeaturesetLayers(Z);for(const{source:re,sourceLayer:pe}of ae)Y.setFeatureState({id:o.id,source:re,sourceLayer:pe},d)}else if("layerId"in o.target){const{layerId:Z}=o.target,K=this.getLayer(Z);this.setFeatureState({id:o.id,source:K.source,sourceLayer:K.sourceLayer},d)}return}const A=o.source,T=o.sourceLayer,S=this._checkSource(A);if(!S)return;const E=S.type;if(E==="geojson"&&T)return void this.fire(new n.z(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(E==="vector"&&!T)return void this.fire(new n.z(new Error("The sourceLayer parameter must be provided for vector source types.")));o.id===void 0&&this.fire(new n.z(new Error("The feature id parameter must be provided.")));const k=this.getOwnSourceCaches(A);for(const Z of k)Z.setFeatureState(T,o.id,d)}removeFeatureState(o,d){if(this._checkLoaded(),"target"in o){if("featuresetId"in o.target){const{featuresetId:Z,importId:K}=o.target,Y=this.getFragmentStyle(K),ae=Y.getFeaturesetLayers(Z);for(const{source:re,sourceLayer:pe}of ae)Y.removeFeatureState({id:o.id,source:re,sourceLayer:pe},d)}else if("layerId"in o.target){const{layerId:Z}=o.target,K=this.getLayer(Z);this.removeFeatureState({id:o.id,source:K.source,sourceLayer:K.sourceLayer},d)}return}const A=o.source,T=this._checkSource(A);if(!T)return;const S=T.type,E=S==="vector"?o.sourceLayer:void 0;if(S==="vector"&&!E)return void this.fire(new n.z(new Error("The sourceLayer parameter must be provided for vector source types.")));if(d&&typeof o.id!="string"&&typeof o.id!="number")return void this.fire(new n.z(new Error("A feature id is required to remove its specific state property.")));const k=this.getOwnSourceCaches(A);for(const Z of k)Z.removeFeatureState(E,o.id,d)}getFeatureState(o){if(this._checkLoaded(),"target"in o){let S;if("featuresetId"in o.target){const{featuresetId:E,importId:k}=o.target,Z=this.getFragmentStyle(k),K=Z.getFeaturesetLayers(E);for(const{source:Y,sourceLayer:ae}of K){const re=Z.getFeatureState({id:o.id,source:Y,sourceLayer:ae});if(re&&!S)S=re;else if(!n.bn(S,re))return void this.fire(new n.z(new Error("The same feature id exists in multiple sources in the featureset, but their feature states are not consistent through the sources.")))}}else if("layerId"in o.target){const{layerId:E}=o.target,k=this.getLayer(E);S=this.getFeatureState({id:o.id,source:k.source,sourceLayer:k.sourceLayer})}return S}const d=o.source,A=o.sourceLayer,T=this._checkSource(d);if(T){if(T.type!=="vector"||A)return o.id===void 0&&this.fire(new n.z(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(d)[0].getFeatureState(A,o.id);this.fire(new n.z(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(o){return this.stylesheet.transition=n.l({},this.stylesheet.transition,o),this.transition=this.stylesheet.transition,this}getTransition(){return n.l({},this.stylesheet.transition)}serialize(){this._checkLoaded();const o=this.getTerrain(),d=o&&this.terrain&&this.terrain.scope===this.scope?o:this.stylesheet.terrain;return n.cw({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,iconsets:this.stylesheet.iconsets,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:d,fog:this.stylesheet.fog,snow:this.stylesheet.snow,rain:this.stylesheet.rain,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},A=>A!==void 0)}_updateFilteredLayers(o){for(const d of Object.values(this._mergedLayers))o(d)&&this._updateLayer(d)}_updateLayer(o){this._changes.updateLayer(o);const d=this.getLayerSourceCache(o),A=n.C(o.source,o.scope),T=this._changes.getUpdatedSourceCaches();o.source&&!T[A]&&d&&d.getSource().type!=="raster"&&(this._changes.updateSourceCache(A,"reload"),d.pause()),o.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(o){const d=k=>this._mergedLayers[k].is3D(!!this.terrain),A=this.order,T={},S=[];for(let k=A.length-1;k>=0;k--){const Z=A[k];if(d(Z)){T[Z]=k;for(const K of o){const Y=K[Z];if(Y)for(const ae of Y)S.push(ae)}}}S.sort((k,Z)=>Z.intersectionZ-k.intersectionZ);const E=[];for(let k=A.length-1;k>=0;k--){const Z=A[k];if(d(Z))for(let K=S.length-1;K>=0;K--){const Y=S[K].feature;if(Y.layer&&T[Y.layer.id]<k)break;E.push(Y),S.pop()}else for(const K of o){const Y=K[Z];if(Y)for(const ae of Y)E.push(ae.feature)}}return E}queryRenderedFeatures(o,d,A){let T;d&&!Array.isArray(d)&&d.filter&&(this._validate(Ie,"queryRenderedFeatures.filter",d.filter,null,d),T=n.a_(d.filter));const S={},E=Y=>{if(_o.has(Y.type))return;const ae=this.getOwnLayerSourceCache(Y),re=S[ae.id]=S[ae.id]||{sourceCache:ae,layers:{},has3DLayers:!1};Y.is3D(!!this.terrain)&&(re.has3DLayers=!0),re.layers[Y.fqid]=re.layers[Y.fqid]||{styleLayer:Y,targets:[]},re.layers[Y.fqid].targets.push({filter:T})};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new n.z(new Error("parameters.layers must be an Array."))),[];for(const Y of d.layers){const ae=this._layers[Y];if(!ae)return this.fire(new n.z(new Error(`The layer '${Y}' does not exist in the map's style and cannot be queried for features.`))),[];E(ae)}}else for(const Y in this._layers)E(this._layers[Y]);const k=this._queryRenderedFeatures(o,S,A),Z=this._flattenAndSortRenderedFeatures(k),K=[];for(const Y of Z)n.ct(Y.layer.id)===this.scope&&K.push(Y);return K}queryRenderedFeatureset(o,d,A){let T;d&&!Array.isArray(d)&&d.filter&&(this._validate(Ie,"queryRenderedFeatures.filter",d.filter,null,d),T=n.a_(d.filter));const S="mock",E=[];if(d&&d.target)E.push(Object.assign({},d,{targetId:S,filter:T}));else{const Y=this.getFeaturesetDescriptors();for(const ae of Y)E.push({targetId:S,filter:T,target:ae});for(const{style:ae}of this.fragments){const re=ae.getFeaturesetDescriptors();for(const pe of re)E.push({targetId:S,filter:T,target:pe})}}const k=this.queryRenderedTargets(o,E,A),Z=[],K=new Set;for(const Y of k)for(const ae of Y.variants[S])kc(ae,Y,K)||Z.push(new n.cx(Y,ae));return Z}queryRenderedTargets(o,d,A){const T={},S=(k,Z,K,Y)=>{const ae=T[Z.id]=T[Z.id]||{sourceCache:Z,layers:{},has3DLayers:!1};if(ae.layers[k.fqid]=ae.layers[k.fqid]||{styleLayer:k,targets:[]},k.is3D(!!this.terrain)&&(ae.has3DLayers=!0),!Y)return K.uniqueFeatureID=!1,void ae.layers[k.fqid].targets.push(K);ae.layers[k.fqid].targets.push(Object.assign({},K,{namespace:Y.namespace,properties:Y.properties,uniqueFeatureID:Y.uniqueFeatureID}))};for(const k of d)if("featuresetId"in k.target){const{featuresetId:Z,importId:K}=k.target,Y=this.getFragmentStyle(K);if(!Y||!Y._featuresetSelectors)continue;const ae=Y._featuresetSelectors[Z];if(!ae){this.fire(new n.z(new Error(`The featureset '${Z}' does not exist in the map's style and cannot be queried for features.`)));continue}for(const re of ae){const pe=Y.getOwnLayer(re.layerId);pe&&!_o.has(pe.type)&&S(pe,Y.getOwnLayerSourceCache(pe),k,re)}}else if("layerId"in k.target){const{layerId:Z}=k.target,K=this.getLayer(Z);if(!K||_o.has(K.type))continue;S(K,this.getLayerSourceCache(K),k)}const E=this._queryRenderedFeatures(o,T,A);return this._flattenAndSortRenderedFeatures(E)}_queryRenderedFeatures(o,d,A){const T=[],S=!!this.map._showQueryGeometry,E=Xi.createFromScreenPoints(o,A);for(const k in d){const Z=fh(E,d[k],this._availableImages,A,S);Object.keys(Z).length&&T.push(Z)}if(this.placement)for(const k in d){if(!d[k].sourceCache._onlySymbols)continue;const Z=wu(E.screenGeometry,d[k],this._availableImages,this.placement.collisionIndex,this.placement.retainedQueryData);Object.keys(Z).length&&T.push(Z)}return T}querySourceFeatures(o,d){const A=d&&d.filter;A&&this._validate(Ie,"querySourceFeatures.filter",A,null,d);let T=[];const S=this.getOwnSourceCaches(o);for(const E of S)T=T.concat(Uc(E,d));return T}addSourceType(o,d,A){return oo.getSourceType(o)?A(new Error(`A source type called "${o}" already exists.`)):(oo.setSourceType(o,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:d.workerSourceURL},A):A(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(o,d,A={}){this._checkLoaded();const T=this.light.getLight();let S=!1;for(const k in o)if(!n.bn(o[k],T[k])){S=!0;break}if(!S)return;const E=this._getTransitionParameters();this.light.setLight(o,d,A),this.light.updateTransitions(E)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=n.q.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&n.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(o,d=1){if(this._checkLoaded(),!o)return this.terrainSetForDrapingOnly()||(delete this.terrain,this.map.transform.projection.requiresDraping&&this.setTerrainForDraping()),d===0&&delete this.terrain,o===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let A=o;const T=o.source==null;if(d===1){if(this.disableElevatedTerrain)return;if(typeof A.source=="object"){const k="terrain-dem-src";this.addSource(k,A.source),A=n.cq(A),A=n.l(A,{source:k})}const S=n.l({},A),E={};if(this.terrain&&T){S.source=this.terrain.get().source;const k=this.terrain?this.getFragmentStyle(this.terrain.scope):null;k&&(E.style=k.serialize())}if(this._validate(Kr,"terrain",S,E))return}if(!this.terrain||this.terrain.scope!==this.scope&&!T||this.terrain&&d!==this.terrain.drapeRenderMode){if(!A)return;this._createTerrain(A,d),this.fire(new n.A("data",{dataType:"style"}))}else{const S=this.terrain,E=S.get();for(const k of Object.keys(n.a5.terrain))!A.hasOwnProperty(k)&&n.a5.terrain[k].default&&(A[k]=n.a5.terrain[k].default);for(const k in o)if(!n.bn(o[k],E[k])){S.set(o,this.options),this.stylesheet.terrain=o;const Z=this._getTransitionParameters({duration:0});S.updateTransitions(Z),this.fire(new n.A("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(o){const d=this.fog=new Hr(o,this.map.transform,this.scope,this.options);this.stylesheet.fog=d.get();const A=this._getTransitionParameters({duration:0});d.updateTransitions(A)}_createSnow(o){const d=this.snow=new Xr(o,this.map.transform,this.scope,this.options);this.stylesheet.snow=d.get();const A=this._getTransitionParameters({duration:0});d.updateTransitions(A)}_createRain(o){const d=this.rain=new jn(o,this.map.transform,this.scope,this.options);this.stylesheet.rain=d.get();const A=this._getTransitionParameters({duration:0});d.updateTransitions(A)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const o of this.map._markers)o._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(o){if(this._checkLoaded(),!o)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const d=this.fog;if(!n.bn(d.get(),o)){d.set(o,this.options),this.stylesheet.fog=d.get();const A=this._getTransitionParameters({duration:0});d.updateTransitions(A)}}else this._createFog(o);this._markersNeedUpdate=!0}getSnow(){return this.snow?this.snow.get():null}setSnow(o){if(this._checkLoaded(),!o)return delete this.snow,void delete this.stylesheet.snow;if(this.snow){const d=this.snow;if(!n.bn(d.get(),o)){d.set(o,this.options),this.stylesheet.snow=d.get();const A=this._getTransitionParameters({duration:0});d.updateTransitions(A)}}else this._createSnow(o);this._markersNeedUpdate=!0}getRain(){return this.rain?this.rain.get():null}setRain(o){if(this._checkLoaded(),!o)return delete this.rain,void delete this.stylesheet.rain;if(this.rain){const d=this.rain;if(!n.bn(d.get(),o)){d.set(o,this.options),this.stylesheet.rain=d.get();const A=this._getTransitionParameters({duration:0});d.updateTransitions(A)}}else this._createRain(o);this._markersNeedUpdate=!0}_reloadColorTheme(){const o=()=>{for(const T in this._layers)this._layers[T].lut=this._styleColorTheme.lut;for(const T in this._sourceCaches)this._sourceCaches[T].clearTiles()},d=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(!d)return this._styleColorTheme.lut=null,void o();const A=this._evaluateColorThemeData(d);this._loadColorTheme(A).then(()=>{this.fire(new n.A("colorthemeset")),o()}).catch(T=>{n.w(`Couldn't set color theme: ${T}`)})}setColorTheme(o){this._checkLoaded(),this._styleColorTheme.colorThemeOverride&&n.w("Note: setColorTheme is called on a style with a color-theme override, the passed color-theme won't be visible."),this._styleColorTheme.colorTheme=o,this._reloadColorTheme()}setImportColorTheme(o,d){const A=this.getFragmentStyle(o);A&&(A._styleColorTheme.colorThemeOverride=d,A._reloadColorTheme())}_getTransitionParameters(o){return{now:n.q.now(),transition:n.l(this.transition,o)}}updateDrapeFirstLayers(){if(!this.terrain)return;const o=[],d=[];for(const A of this._mergedOrder)this.isLayerDraped(this._mergedLayers[A])?o.push(A):d.push(A);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...o),this._drapedFirstOrder.push(...d)}_createTerrain(o,d){const A=this.terrain=new Yt(o,d,this.scope,this.options);d===1&&(this.stylesheet.terrain=o),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const T=this._getTransitionParameters({duration:0});A.updateTransitions(T)}_force3DLayerUpdate(){for(const o in this._layers){const d=this._layers[o];d.type==="fill-extrusion"&&this._updateLayer(d)}}_forceSymbolLayerUpdate(){for(const o in this._layers){const d=this._layers[o];d.type==="symbol"&&this._updateLayer(d)}}_validate(o,d,A,T,S={}){if(S&&S.validate===!1)return!1;const E=n.l({},this.serialize());return Qi(this,o.call(oi,n.l({key:d,style:E,value:A,styleSpec:n.a5},T)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),n.cy.off("pluginStateChange",this._rtlTextPluginCallback);for(const o in this._mergedLayers)this._mergedLayers[o].setEventedParent(null);for(const o in this._mergedSourceCaches)this._mergedSourceCaches[o].clearTiles(),this._mergedSourceCaches[o].setEventedParent(null);this.setEventedParent(null),delete this.fog,delete this.snow,delete this.rain,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(o){const d=this.getSourceCaches(o);for(const A of d)A.clearTiles()}clearSources(){for(const o in this._mergedSourceCaches)this._mergedSourceCaches[o].clearTiles()}reloadSource(o){const d=this.getSourceCaches(o);for(const A of d)A.resume(),A.reload()}reloadSources(){for(const o of this.getSources())o.reload&&o.reload()}reloadModels(){this.modelManager.reloadModels(""),this.forEachFragmentStyle(o=>{o.modelManager.reloadModels(o.scope)})}updateSources(o){let d;this.directionalLight&&(d=Dl(this.directionalLight));for(const A in this._mergedSourceCaches)this._mergedSourceCaches[A].update(o,void 0,void 0,d)}_generateCollisionBoxes(){for(const o in this._sourceCaches){const d=this._sourceCaches[o];d.resume(),d.reload()}}_updatePlacement(o,d,A,T,S,E,k=!1){let Z=!1,K=!1;const Y={},ae={};for(const re of this._mergedOrder){const pe=this._mergedLayers[re];if(pe.type!=="symbol")continue;const Pe=n.C(pe.source,pe.scope);let Ce=Y[Pe];if(!Ce){const Le=this.getLayerSourceCache(pe);if(!Le)continue;const Ke=Le.getRenderableIds(!0).map(it=>Le.getTileByID(it));ae[Pe]=Ke.slice(),Ce=Y[Pe]=Ke.sort((it,tt)=>tt.tileID.overscaledZ-it.tileID.overscaledZ||(it.tileID.isLessThan(tt.tileID)?-1:1))}const De=this.crossTileSymbolIndex.addLayer(pe,Ce,d.center.lng,d.projection);Z=Z||De}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),k=k||this._layerOrderChanged||T===0,this._layerOrderChanged&&this.fire(new n.A("neworder")),(k||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(n.q.now(),d.zoom))&&(this.pauseablePlacement=new On(d,this._mergedOrder,k,A,T,S,this.placement,this.fog&&d.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,Y,ae,this.map.painter.scaleFactor),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(n.q.now()),K=!0),Z&&this.pauseablePlacement.placement.setStale()),K||Z){this._buildingIndex.onNewFrame(d.zoom);for(let re=0;re<this._mergedOrder.length;re++){const pe=this._mergedLayers[this._mergedOrder[re]];if(pe.type!=="symbol")continue;const Pe=this.isLayerClipped(pe);this.placement.updateLayerOpacities(pe,Y[n.C(pe.source,pe.scope)],re,Pe?E:null)}}return{needsRerender:!this.pauseablePlacement.isDone()||this.placement.hasTransitions(n.q.now())}}_releaseSymbolFadeTiles(){for(const o in this._sourceCaches)this._sourceCaches[o].releaseSymbolFadeTiles()}addImport(o,d){this._checkLoaded();const A=this.stylesheet.imports=this.stylesheet.imports||[];if(A.findIndex(({id:S})=>S===o.id)!==-1)return void this.fire(new n.z(new Error(`Import with id '${o.id}' already exists in the map's style.`)));if(!d)return A.push(o),this._loadImports([o],!0);const T=A.findIndex(({id:S})=>S===d);return T===-1&&this.fire(new n.z(new Error(`Import with id "${d}" does not exist on this map.`))),this.stylesheet.imports=A.slice(0,T).concat(o).concat(A.slice(T)),this._loadImports([o],!0,d)}updateImport(o,d){this._checkLoaded();const A=this.stylesheet.imports||[],T=this.getImportIndex(o);return T===-1?this:typeof d=="string"?(this.setImportUrl(o,d),this):(d.url&&d.url!==A[T].url&&this.setImportUrl(o,d.url),n.bn(d.config,A[T].config)||this.setImportConfig(o,d.config,d.data.schema),n.bn(d.data,A[T].data)||this.setImportData(o,d.data),this)}moveImport(o,d){this._checkLoaded();let A=this.stylesheet.imports||[];const T=this.getImportIndex(o);if(T===-1)return this;const S=this.getImportIndex(d);if(S===-1)return this;const E=A[T],k=this.fragments[T];return A=A.filter(({id:Z})=>Z!==o),this.fragments=this.fragments.filter(({id:Z})=>Z!==o),this.stylesheet.imports=A.slice(0,S).concat(E).concat(A.slice(S)),this.fragments=this.fragments.slice(0,S).concat(k).concat(this.fragments.slice(S)),this.mergeLayers(),this}setImportUrl(o,d){this._checkLoaded();const A=this.stylesheet.imports||[],T=this.getImportIndex(o);if(T===-1)return this;A[T].url=d;const S=this.fragments[T];return S.style=this._createFragmentStyle(A[T]),S.style.on("style.import.load",()=>this.mergeAll()),S.style.loadURL(d),this}setImportData(o,d){this._checkLoaded();const A=this.getImportIndex(o),T=this.stylesheet.imports||[];return A===-1?this:d?(this.fragments[A].style.setState(d),this._reloadImports(),this):(delete T[A].data,this.setImportUrl(o,T[A].url))}setImportConfig(o,d,A){this._checkLoaded();const T=this.getImportIndex(o),S=this.stylesheet.imports||[];if(T===-1)return this;d?S[T].config=d:delete S[T].config;const E=this.fragments[T];A&&E.style.stylesheet&&(E.style.stylesheet.schema=A);const k=E.style.stylesheet&&E.style.stylesheet.schema;return E.config=d,E.style.updateConfig(d,k),this.updateConfigDependencies(),this}removeImport(o){this._checkLoaded();const d=this.stylesheet.imports||[],A=this.getImportIndex(o);A!==-1&&(d.splice(A,1),this.fragments[A].style._remove(),this.fragments.splice(A,1),this._reloadImports())}getImportIndex(o){const d=(this.stylesheet.imports||[]).findIndex(A=>A.id===o);return d===-1&&this.fire(new n.z(new Error(`Import '${o}' does not exist in the map's style and cannot be updated.`))),d}getLayer(o){return this._mergedLayers[o]}getSources(){const o=[];for(const d in this._mergedOtherSourceCaches){const A=this._mergedOtherSourceCaches[d];A&&o.push(A.getSource())}return o}getSource(o,d){const A=this.getSourceCache(o,d);return A&&A.getSource()}getLayerSource(o){const d=this.getLayerSourceCache(o);return d&&d.getSource()}getSourceCache(o,d){const A=n.C(o,d);return this._mergedOtherSourceCaches[A]}getLayerSourceCache(o){const d=n.C(o.source,o.scope);return o.type==="symbol"?this._mergedSymbolSourceCaches[d]:this._mergedOtherSourceCaches[d]}getSourceCaches(o){if(o==null)return Object.values(this._mergedSourceCaches);const d=[];return this._mergedOtherSourceCaches[o]&&d.push(this._mergedOtherSourceCaches[o]),this._mergedSymbolSourceCaches[o]&&d.push(this._mergedSymbolSourceCaches[o]),d}updateSourceCaches(){const o=this._changes.getUpdatedSourceCaches();for(const d in o){const A=o[d];A==="reload"?this.reloadSource(d):A==="clear"&&this.clearSource(d)}}updateLayers(o){const d=this._changes.getUpdatedPaintProperties();for(const A of d){const T=this.getLayer(A);T&&T.updateTransitions(o)}}getGlyphsUrl(){return this.stylesheet.glyphs}setGlyphsUrl(o){this.stylesheet.glyphs=o,this.glyphManager.setURL(o,this.scope)}getImages(o,d,A){this.imageManager.getImages(d.images,d.scope,A),this._updateTilesForChangedImages();const T=E=>{if(E){const k=d.images.map(Z=>n.I.toString(Z));E.setDependencies(d.tileID.key,d.type,k)}},S=n.C(d.source,d.scope);T(this._mergedOtherSourceCaches[S]),T(this._mergedSymbolSourceCaches[S])}rasterizeImages(o,d,A){this.imageManager.rasterizeImages(d,A)}getGlyphs(o,d,A){this.glyphManager.getGlyphs(d.stacks,d.scope,A)}getResource(o,d,A){return n.cz(d,A)}getOwnSourceCache(o){return this._otherSourceCaches[o]}getOwnLayerSourceCache(o){return o.type==="symbol"?this._symbolSourceCaches[o.source]:this._otherSourceCaches[o.source]}getOwnSourceCaches(o){const d=[];return this._otherSourceCaches[o]&&d.push(this._otherSourceCaches[o]),this._symbolSourceCaches[o]&&d.push(this._symbolSourceCaches[o]),d}_isSourceCacheLoaded(o){const d=this.getOwnSourceCaches(o);return d.length===0?(this.fire(new n.z(new Error(`There is no source with ID '${o}'`))),!1):d.every(A=>A.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(o,d){if(!this._clipLayerPresent&&o.type!=="fill-extrusion")return!1;const A=o.type==="fill-extrusion"&&o.sourceLayer==="building";if(o.is3D(!!this.terrain)){if(A||d&&d.type==="batched-model"||o.type==="model")return!0}else if(o.type==="symbol")return!0;return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(o=>{o.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}oo.getSourceType=function(y){return Xl[y]},oo.setSourceType=function(y,o){Xl[y]=o},oo.registerForPluginStateChange=n.ci;var Zc=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,Rc=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec3 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color,float height) {
#ifdef INDICATOR_CUTOUT
float verticalFadeRange=u_indicator_cutout_centers.z*0.25;float holeMinOpacity=mix(1.0,u_indicator_cutout_params.x,smoothstep(u_indicator_cutout_centers.z,u_indicator_cutout_centers.z+verticalFadeRange,height));float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,highp vec2 pos,highp vec2 lod_coord) {highp vec2 size=vec2(textureSize(image,0));highp vec2 dx=dFdx(lod_coord.xy*size);highp vec2 dy=dFdy(lod_coord.xy*size);highp float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));highp float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}`,Pu=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const vec2 units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (units_to_pixels*pos+offset)/pattern_size;}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {return get_pattern_pos(pixel_coord_upper,pixel_coord_lower,pattern_size,vec2(tile_units_to_pixels),pos);}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,qc="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Eu=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }
#endif
#ifdef DEPTH_OCCLUSION
uniform highp sampler2D u_depth;uniform highp vec2 u_depth_size_inv;uniform highp vec2 u_depth_range_unpack;uniform highp float u_occluder_half_size;uniform highp float u_occlusion_depth_offset;
#ifdef DEPTH_D24
float unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}
#else
highp float unpack_depth_rgba(vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;
#ifdef DEPTH_D24
float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);
#else
float depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));
#endif
return coord.z+u_occlusion_depth_offset > depth;}highp vec4 getCornerDepths(vec2 coord) {highp vec3 df=vec3(u_occluder_half_size*u_depth_size_inv,0.0);highp vec2 uv=0.5*coord.xy+0.5;
#ifdef DEPTH_D24
highp vec4 depth=vec4(
texture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r
);depth=unpack_depth4(depth);
#else
highp vec4 depth=vec4(
unpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))
);
#endif
return depth;}highp float occlusionFadeMultiSample(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec2 uv=0.5*coord.xy+0.5;int NX=3;int NY=4;highp vec2 df=u_occluder_half_size*u_depth_size_inv;highp vec2 oneStep=2.0*u_occluder_half_size*u_depth_size_inv/vec2(NX-1,NY-1);highp float res=0.0;for (int y=0; y < NY;++y) {for (int x=0; x < NX;++x) {
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)));
#endif
res+=1.0-clamp(300.0*(coord.z+u_occlusion_depth_offset-depth),0.0,1.0);}}res=clamp(2.0*res/float(NX*NY)-0.5,0.0,1.0);return res;}highp float occlusionFade(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec4 depth=getCornerDepths(coord.xy);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z+u_occlusion_depth_offset)-depth),0.0,1.0));}
#else
bool isOccluded(vec4 frag) { return false; }highp float occlusionFade(vec4 frag) { return 1.0; }highp float occlusionFadeMultiSample(vec4 frag) { return 1.0; }
#endif//DEPTH_OCCLUSION`,Hc=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Tc=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {return color;}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,Xu=`#ifdef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,Ko=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}
#endif
uniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}`,As=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {vec3 transformed_normal=vec3(-normal.xy,normal.z);float NDotL=dot(normalize(transformed_normal),u_shadow_direction);float dotScale=min(1.0-NDotL,1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,ai=`#ifdef RENDER_SHADOWS
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef TEXTURE_GATHER
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return clamp(mix(lerpx.x,lerpx.y,f.y),0.0,1.0);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz/=light_view_pos0.w;vec2 abs_bounds=abs(light_view_pos0.xy);if (abs_bounds.x >=1.0 || abs_bounds.y >=1.0) {return 0.0;}light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return clamp(mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth)),0.0,1.0);
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}highp vec2 compute_receiver_plane_depth_bias(highp vec3 pos_dx,highp vec3 pos_dy)
{highp vec2 biasUV=vec2(
pos_dy.y*pos_dx.z-pos_dx.y*pos_dy.z,pos_dx.x*pos_dy.z-pos_dy.x*pos_dx.z);biasUV*=1.0/((pos_dx.x*pos_dy.y)-(pos_dx.y*pos_dy.x));return biasUV;}float shadowed_light_factor_plane_bias(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {highp vec3 light_view_pos0_xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;highp vec3 light_view_pos0_ddx=dFdx(light_view_pos0_xyz);highp vec3 light_view_pos0_ddy=dFdy(light_view_pos0_xyz);highp vec2 plane_depth_bias=compute_receiver_plane_depth_bias(light_view_pos0_ddx,light_view_pos0_ddy);highp float bias=dot(vec2(u_shadow_texel_size,u_shadow_texel_size),plane_depth_bias)+0.0001;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const li=[];ou(Zc,li),ou(Pu,li),ou(Rc,li);const es={"_prelude_fog.vertex.glsl":Hc,"_prelude_terrain.vertex.glsl":Eu,"_prelude_shadow.vertex.glsl":As,"_prelude_fog.fragment.glsl":Tc,"_prelude_shadow.fragment.glsl":ai,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":Xu,"_prelude_raster_particle.glsl":Ko},fs={};ln("",Eu),ln(Tc,Hc),ln(ai,As),ln(Xu,""),ln(Ko,"");const su=ln(Rc,Pu),$c=Zc;var il={background:ln(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:ln(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in highp vec2 v_pos;void main() {highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec2 u_pattern_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_pattern_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:ln(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float blur_positive=blur < 0.0 ? 0.0 : 1.0;lowp float antialiasblur=v_data.z;float extrude_length=length(extrude)+antialiasblur*(1.0-blur_positive);float antialiased_blur=-max(abs(blur),antialiasblur);float antialiase_blur_opacity=smoothstep(0.0,antialiasblur,extrude_length-1.0);float opacity_t=blur_positive==1.0 ? 
smoothstep(0.0,-antialiased_blur,1.0-extrude_length) : 
smoothstep(antialiased_blur,0.0,extrude_length-1.0)-antialiase_blur_opacity;float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
#ifdef ELEVATED_ROADS
in float a_circle_z_offset;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
#ifdef ELEVATED_ROADS
world_center.z+=a_circle_z_offset+ELEVATION_BIAS;
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:ln("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ln(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:ln(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:ln("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in vec2 a_elevation_from_sea;in float a_size_scale;in vec2 a_padding;in float a_auto_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {float feature_elevation=a_elevation_from_sea.x+a_auto_z_offset;float terrain_elevation=(a_elevation_from_sea.y==1.0 ? 0.0 : elevation(a_anchor_pos));vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(feature_elevation+terrain_elevation),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:ln("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:ln("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),elevatedStructuresDepth:ln(`void main() {
#ifndef DEPTH_TEXTURE
glFragColor=vec4(0.);
#endif
}`,"in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform float u_depth_bias;void main() {gl_Position=u_matrix*vec4(a_pos,a_height,1);gl_Position.z=gl_Position.z+u_depth_bias;}"),elevatedStructuresDepthReconstruct:ln(`#ifdef DEPTH_RECONSTRUCTION
in float v_height;
#endif
void main() {
#ifdef DEPTH_RECONSTRUCTION
if (v_height >=0.0)
discard;
#endif
glFragColor=vec4(1.0,0.0,0.0,1.0);}`,`in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform vec3 u_camera_pos;uniform highp float u_depth_bias;uniform lowp float u_height_scale;uniform lowp float u_reset_depth;
#ifdef DEPTH_RECONSTRUCTION
out float v_height;
#endif
void main() {vec3 vpos=vec3(a_pos,a_height*u_height_scale);
#ifdef DEPTH_RECONSTRUCTION
if (u_camera_pos.z > vpos.z) {vpos-=(u_camera_pos-vpos)*(vpos.z/(u_camera_pos.z-vpos.z));}v_height=a_height;
#endif
gl_Position=u_matrix*vec4(vpos,1);gl_Position.z=u_reset_depth==1.0 ? gl_Position.w : gl_Position.z+u_depth_bias;}`),elevatedStructures:ln(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in vec3 v_normal;in float v_height;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth;
#endif
void main() {vec3 color=vec3(241.0/255.0,236.0/255.0,225.0/255.0);
#ifdef LIGHTING_3D_MODE
vec3 normal=normalize(v_normal);
#ifdef RENDER_SHADOWS
float shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,v_depth);color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#else
color=apply_lighting(color,normal);
#endif
if (v_height < 0.0) {float penetration=max(v_height+7.5,0.0);float occlusion=1.0-1.0/PI*acos(1.0-penetration/4.0);color=color*(1.0-pow(occlusion,2.0)*0.3);}
#endif
#ifdef FOG
color=fog_apply(color,v_fog_pos);
#endif
vec4 out_color=vec4(color,1.0);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_height);
#endif
glFragColor=out_color;HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;in float a_height;in vec3 a_pos_normal_3;uniform mat4 u_matrix;out vec3 v_normal;out float v_height;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {v_normal=a_pos_normal_3/16384.0;v_height=a_height;vec3 pos=vec3(a_pos,a_height);gl_Position=u_matrix*vec4(pos,1);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(v_normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fill:ln(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=opacity;
#ifdef INDICATOR_CUTOUT
if (v_z_offset >=0.0) {out_color=applyCutout(out_color,v_z_offset);}
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=z_offset;
#endif
}`),fillOutline:ln(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:ln(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:ln(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:ln(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
in float v_height;
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float emissive_strength
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor;
#ifdef RENDER_CUTOFF
shadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}
#else
shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);
#endif
color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,h);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;uniform float u_width_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp float emissive_strength
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=cutoff_opacity(u_cutoff_params,ground.z);if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0) || (color.a==0.0));
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);scaled_pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;scaled_pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);float ndotl=calculate_NdotL(normal);v_flat.rgb=sRGBToLinear(color.rgb);v_flat.rgb=v_flat.rgb*(ndotl+(1.0-min(ndotl*57.29,1.0))*emissive_strength);v_flat=vec4(linearTosRGB(v_flat.rgb),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:ln(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_width_scale;uniform float u_vertical_scale;
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp vec4 color
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp vec4 color
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;float ele=elevation(pos_nx.xy);float c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);float h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:ln(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in highp vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,height);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_width_scale;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
out highp vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
#pragma mapbox: define highp float line_width
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
#pragma mapbox: initialize highp float line_width
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);p.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;p.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:ln(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor_plane_bias(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0),0.0).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:ln(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp float u_dynamic_offset;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(u_dynamic_offset,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:ln(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ln(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:ln(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform lowp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_floor_width_scale;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec3 v_uv;
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;float scaled_floorwidth=(floorwidth*u_floor_width_scale);alpha*=linearstep(0.5-sdfgamma/scaled_floorwidth,0.5+sdfgamma/scaled_floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trim_alpha=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);out_color=mix(out_color,u_trim_color,transition_factor);trim_alpha=1.0-transition_factor;}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=((border_width*u_width_scale)+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color=mix(border_color*trim_alpha,out_color,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
out_color.rgb*=mix(v_road_z_offset > 0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS) || defined(VARIABLE_LINE_WIDTH)
in vec3 a_z_offset_width;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec3 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;uniform float u_width_scale;uniform highp float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec3 v_uv;
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth;
#ifdef VARIABLE_LINE_WIDTH
float left=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);halfwidth=(u_width_scale*(left==1.0 ? a_z_offset_width.y : a_z_offset_width.z))/2.0;
#else
halfwidth=(u_width_scale*width)/2.0;
#endif
offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=max(length(projected_extrude_xy/gl_Position.w*u_units_to_pixels),0.001);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
highp float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float line_progress=a_packed[2];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec3(a_uv_x,a_split_index*texel_height-half_texel_height,line_progress);
#else
v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/(floorwidth*u_floor_width_scale),(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),linePattern:ln(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform highp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef LINE_JOIN_NONE
in vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
uniform float u_emissive_strength;
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;highp float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;highp float x=mod(pattern_x,1.0);highp float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;highp vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));highp vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);color=mix(color,color.a*u_trim_color,transition_factor);}
#endif
#ifdef LINE_JOIN_NONE
highp float pattern_len=pattern_size/aspect;highp float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);highp float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;highp float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_with_emission_ground(color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
color.rgb*=mix(v_road_z_offset > 0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,v_z_offset);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in vec3 a_z_offset_width;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 a_packed;
#endif
in highp float a_linesofar;
#ifdef LINE_JOIN_NONE
in highp vec3 a_pattern_data;out vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;uniform float u_width_scale;uniform float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
#pragma mapbox: define mediump float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define mediump float floorwidth
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
void main() {
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
#pragma mapbox: initialize mediump float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=(u_width_scale*width)/2.0;offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude_xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float a_uv_x=a_packed[0];highp float line_progress=a_packed[2];v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=(floorwidth*u_floor_width_scale);
#ifdef LINE_JOIN_NONE
v_width=(floorwidth*u_floor_width_scale)+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),raster:ln(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:ln(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:ln("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`#include "_prelude_raster_particle.glsl"
in float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(
mod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}`),rasterParticleTexture:ln("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:ln(`#include "_prelude_raster_particle.glsl"
uniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(
linearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)
);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}`,"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbol:ln(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;uniform lowp float u_scale_factor;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
#ifdef COLOR_ADJUSTMENT
uniform mat4 u_color_adj_mat;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
in float v_draw_halo;in vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
in float is_sdf;in vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec4 out_color;float fade_opacity=v_gamma_scale_size_fade_opacity[2];
#ifdef RENDER_TEXT_AND_SYMBOL
if (is_sdf==ICON) {vec2 tex_icon=v_tex_a_icon;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}
#endif
#ifdef RENDER_SDF
float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_gamma_scale_size_fade_opacity.x;float size=v_gamma_scale_size_fade_opacity.y;float fontScale=u_is_text ? size/24.0 : size;out_color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {out_color=halo_color;gamma=(halo_blur*u_scale_factor*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width*u_scale_factor/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,v_tex_a).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);out_color*=alpha;
#else
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);
#else
out_color=texture(u_texture,v_tex_a);
#endif
#ifdef COLOR_ADJUSTMENT
out_color=u_color_adj_mat*out_color;
#endif
#endif
out_color*=opacity*fade_opacity;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_auto_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
#ifdef OCCLUSION_QUERIES
in float a_occlusion_query_opacity;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_elevation_from_sea;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_draw_halo;out vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
out float is_sdf;out vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
#pragma mapbox: define lowp float occlusion_opacity
#pragma mapbox: define lowp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
#pragma mapbox: initialize lowp float occlusion_opacity
#pragma mapbox: initialize lowp float z_offset
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=u_elevation_from_sea ? z_offset : z_offset+elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_auto_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;
#endif
vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
#ifdef PROJECTED_POS_ON_VIEWPORT
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xyz+h,1.0);
#else
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz,mercator_pos,u_zoom_transition)+h;projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);    
#endif
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
#ifdef Z_OFFSET
z+=u_pitch_with_map ? a_auto_z_offset+(u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#else
z+=u_pitch_with_map ? (u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#endif
float occlusion_fade=globe_occlusion_fade;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float out_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));
#ifdef DEPTH_OCCLUSION
float depth_occlusion=occlusionFadeMultiSample(projected_point);float depth_occlusion_multplier=mix(occlusion_opacity,1.0,depth_occlusion);out_fade_opacity*=depth_occlusion_multplier;
#endif
#ifdef OCCLUSION_QUERIES
float occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;
#endif
float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_gamma_scale_size_fade_opacity=vec3(gamma_scale,size,out_fade_opacity);v_tex_a=a_tex/u_texsize;
#ifdef RENDER_TEXT_AND_SYMBOL
is_sdf=a_size[0]-2.0*a_size_min;v_tex_a_icon=a_tex/u_texsize_icon;
#endif
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=e;
#endif
}`),terrainRaster:ln(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:ln("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:ln(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,qc),skyboxGradient:ln(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,qc),skyboxCapture:ln(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:ln(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;highp float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);highp float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(clamp(raster.rgb,vec3(0),vec3(1))*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:ln(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:ln(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform highp sampler2D u_depthTexture;uniform highp vec2 u_inv_depth_size;uniform highp vec2 u_depth_range_unpack;
#ifdef DEPTH_D24
highp float unpack_depth(highp float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}
#else
highp float unpack_depth_rgba(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded() {highp vec2 coord=gl_FragCoord.xy*u_inv_depth_size;
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depthTexture,coord).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));
#endif
return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
vec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);
#ifdef APPLY_LUT_ON_GPU
color=applyLUT(u_lutTexture,color);
#endif
return color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
#ifdef APPLY_LUT_ON_GPU
float emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;
#ifdef APPLY_LUT_ON_GPU
color_mix=applyLUT(u_lutTexture,color_mix);
#endif
color=mix(color,color_mix,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor,v_position_height.w);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normal_3f);shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:ln(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:ln(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`),snowParticle:ln("in highp vec2 uv;in highp float alphaMultiplier;uniform vec4 u_particleColor;uniform vec2 u_simpleShapeParameters;void main() {float t=clamp((length(uv)-u_simpleShapeParameters.x)/(1.0-u_simpleShapeParameters.x),0.0,1.0);float alpha=1.0-pow(t,pow(10.0,u_simpleShapeParameters.y));alpha*=alphaMultiplier;alpha*=u_particleColor.a;vec3 color=u_particleColor.rgb*alpha;glFragColor=vec4(color,alpha) ;HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_snowParticleData;in highp vec4 a_snowParticleDataHorizontalOscillation;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform vec2 u_screenSize;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity;uniform vec3 u_direction;uniform float u_horizontalOscillationRadius; 
uniform float u_horizontalOscillationRate; 
uniform float u_billboardSize;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;out highp vec2 uv;out highp float alphaMultiplier;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos.xyz*=halfBoxSize;pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_snowParticleData.z;float coneAngleHeadingRad=a_snowParticleData.w*radians(360.0);vec3 localZ=normalize(u_direction);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 direction;direction.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.z=cos(coneAnglePichRad);direction=normalize(direction);vec3 simPosLocal=vec3(0,0,0);float velocityScale=(1.0+3.0*a_snowParticleData.y)*u_velocity;simPosLocal+=direction*velocityScale*u_time;float horizontalOscillationRadius=u_horizontalOscillationRadius*a_snowParticleDataHorizontalOscillation.x;float horizontalOscillationAngle=u_horizontalOscillationRate*u_time*(-1.0+2.0*a_snowParticleDataHorizontalOscillation.y);simPosLocal.xy+=horizontalOscillationRadius*vec2(cos(horizontalOscillationAngle),sin(horizontalOscillationAngle));vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);float clipZ=-u_cam_pos.z+pos.z;vec4 posView=u_modelview*vec4(pos,1.0);float size=u_billboardSize;alphaMultiplier=1.0;vec4 posScreen=u_projection*posView;posScreen/=posScreen.w;posScreen.xy=vec2(0.5)+posScreen.xy*0.5;posScreen.xy*=u_screenSize;vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=u_screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-posScreen.xy)/(0.5*u_screenSize));screenDist+=a_snowParticleData.x*u_thinningParticleOffset;float scaleFactorMode=0.0;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);if (a_snowParticleData.x < u_thinningAffectedRatio) {scaleFactorMode=1.0-thinningFadeRatio;alphaMultiplier=thinningFadeRatio;}}vec4 posScreen1=u_projection*vec4(posView.x-size,posView.yzw);posScreen1/=posScreen1.w;vec4 posScreen2=u_projection*vec4(posView.x+size,posView.yzw);posScreen2/=posScreen2.w;posScreen1.xy=vec2(0.5)+posScreen1.xy*0.5;posScreen1.xy*=u_screenSize;posScreen2.xy=vec2(0.5)+posScreen2.xy*0.5;posScreen2.xy*=u_screenSize;float screenLength=length(posScreen1.xy-posScreen2.xy);float screenEpsilon=3.0;float scaleFactor=1.0;if (screenLength < screenEpsilon) {scaleFactor=screenEpsilon/max(screenLength,0.01);scaleFactor=mix(scaleFactor,1.0,scaleFactorMode);}float screenEpsilon2=15.0;if (screenLength > screenEpsilon2) {scaleFactor=screenEpsilon2/max(screenLength,0.01);}size*=scaleFactor;vec2 right=size*vec2(1,0);vec2 up=size*vec2(0,1);posView.xy+=right*a_uv.x;posView.xy+=up*a_uv.y;uv=a_uv;gl_Position=u_projection*posView;}`),rainParticle:ln("in highp vec2 uv;in highp float particleRandomValue;uniform sampler2D u_texScreen;uniform float u_distortionStrength;uniform vec4 u_color;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;uniform float u_shapeDirectionalPower;uniform float u_mode;void main() {vec2 st=uv*0.5+vec2(0.5);vec2 uvm=uv;uvm.y=-1.0+2.0*pow(st.y,u_shapeDirectionalPower);float shape=clamp(1.0-length(uvm),0.0,1.0);float alpha=abs(shape)*u_color.a;vec2 screenSize=vec2(textureSize(u_texScreen,0));vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-gl_FragCoord.xy)/(0.5*screenSize));screenDist+=(0.5+0.5*particleRandomValue)*u_thinningParticleOffset;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;float thinningAlpha=1.0;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);thinningAlpha*=thinningFadeRatio;}vec2 offsetXY=normalize(uvm)*abs(shape);vec2 stScreen=(gl_FragCoord.xy+offsetXY*u_distortionStrength*thinningAlpha)/screenSize;vec3 colorScreen=texture(u_texScreen,stScreen).rgb;alpha*=thinningAlpha;glFragColor=mix(vec4(colorScreen,1.0),vec4(u_color.rgb*alpha,alpha),u_mode);HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_rainParticleData;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity; 
uniform vec2 u_rainDropletSize;uniform vec3 u_rainDirection;out highp vec2 uv;out highp float particleRandomValue;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos*=halfBoxSize; 
pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_rainParticleData.z;float coneAngleHeadingRad=a_rainParticleData.w*radians(360.0);vec3 localZ=normalize(u_rainDirection);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 directionLocal;directionLocal.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.z=cos(coneAnglePichRad);directionLocal=normalize(directionLocal);vec3 directionWorld=localX*directionLocal.x+localY*directionLocal.y+localZ*directionLocal.z;float velocityScale=(1.0+3.0*a_rainParticleData.y)*u_velocity;vec3 simPosLocal=vec3(0,0,0);simPosLocal+=directionLocal*velocityScale*u_time;vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);vec4 posView=u_modelview*vec4(pos,1.0);vec3 directionView=normalize((u_modelview*vec4(directionWorld,0.0)).xyz);vec3 side=cross(directionView,normalize(posView.xyz));posView.xyz+=side*a_uv.x*u_rainDropletSize.x;posView.xyz+=directionView*a_uv.y*u_rainDropletSize.y;uv=a_uv;particleRandomValue=a_rainParticleData.x;gl_Position=u_projection*posView;}`),vignette:ln("uniform vec3 u_vignetteShape;uniform vec4 u_vignetteColor;in vec2 st;void main() {float screenDist=length(st);float alpha=clamp((screenDist-u_vignetteShape.x)/u_vignetteShape.y,0.0,1.0);alpha=pow(alpha,u_vignetteShape.z)*u_vignetteColor.a;vec3 color=u_vignetteColor.rgb;glFragColor=vec4(color*alpha,alpha) ;}","in vec2 a_pos_2f;out vec2 st;void main() {st=a_pos_2f;gl_Position=vec4(a_pos_2f,0,1);}"),occlusion:ln("uniform vec4 u_color;void main() {glFragColor=u_color;}",`#include "_prelude_terrain.vertex.glsl"
in highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;
#ifdef TERRAIN
float e=elevation(world_pos.xy);world_pos.z+=e;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}`)};function ou(y,o){const d=y.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let A of d)if(A=A.trim(),A[0]==="#"&&A.includes("if")&&!A.includes("endif")){A=A.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const T=A.split(" ");for(const S of T)o.includes(S)||o.push(S)}}function ln(y,o){const d=/#include\s+"([^"]+)"/g,A=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let T=o.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);T&&(T=T.map(K=>{const Y=K.split(" ");return Y[Y.length-1]}),T=[...new Set(T)]);const S={},E=[],k=[];if(y=y.replace(d,(K,Y)=>(k.push(Y),"")),(o=o.replace(d,(K,Y)=>(E.push(Y),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let Z=[...li];ou(y,Z),ou(o,Z);for(const K of[...E,...k])es[K]||console.error(`Undefined include: ${K}`),fs[K]||(fs[K]=[],ou(es[K],fs[K])),Z=[...Z,...fs[K]];return{fragmentSource:y=y.replace(A,(K,Y,ae,re,pe)=>(S[pe]=!0,Y==="define"?`
#ifndef HAS_UNIFORM_u_${pe}
in ${ae} ${re} ${pe};
#else
uniform ${ae} ${re} u_${pe};
#endif
`:Y==="initialize"?`
#ifdef HAS_UNIFORM_u_${pe}
    ${ae} ${re} ${pe} = u_${pe};
#endif
`:Y==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${pe}
    in ${ae} ${re} ${pe};
#endif
`:Y==="initialize-attribute"?"":void 0)),vertexSource:o=o.replace(A,(K,Y,ae,re,pe)=>{const Pe=re==="float"?"vec2":re,Ce=pe.match(/color/)?"color":Pe;return Y==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${pe}
in ${ae} ${re} a_${pe};
#endif
`:S[pe]?Y==="define"?`
#ifndef HAS_UNIFORM_u_${pe}
uniform lowp float u_${pe}_t;
in ${ae} ${Pe} a_${pe};
out ${ae} ${re} ${pe};
#else
uniform ${ae} ${re} u_${pe};
#endif
`:Y==="initialize"?Ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${pe}
    ${pe} = a_${pe};
#else
    ${ae} ${re} ${pe} = u_${pe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${pe}
    ${pe} = unpack_mix_${Ce}(a_${pe}, u_${pe}_t);
#else
    ${ae} ${re} ${pe} = u_${pe};
#endif
`:Y==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${pe}
    in ${ae} ${re} a_${pe};
    out ${ae} ${re} ${pe};
#endif
`:Y==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${pe}
    ${pe} = a_${pe};
#endif
`:void 0:Y==="define"?`
#ifndef HAS_UNIFORM_u_${pe}
uniform lowp float u_${pe}_t;
in ${ae} ${Pe} a_${pe};
#else
uniform ${ae} ${re} u_${pe};
#endif
`:Y==="define-instanced"?Ce==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${pe}0;
in vec4 a_${pe}1;
in vec4 a_${pe}2;
in vec4 a_${pe}3;
#else
uniform ${ae} ${re} u_${pe};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${ae} ${Pe} a_${pe};
#else
uniform ${ae} ${re} u_${pe};
#endif
`:Y==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${pe}
    ${ae} ${re} ${pe} = a_${pe};
#endif
`:Ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${pe}
    ${ae} ${re} ${pe} = a_${pe};
#else
    ${ae} ${re} ${pe} = u_${pe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${pe}
    ${ae} ${re} ${pe} = unpack_mix_${Ce}(a_${pe}, u_${pe}_t);
#else
    ${ae} ${re} ${pe} = u_${pe};
#endif
`}),staticAttributes:T,usedDefines:Z,vertexIncludes:E,fragmentIncludes:k}}class Kc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(o,d,A,T,S,E,k,Z){this.context=o;let K=this.boundPaintVertexBuffers.length!==T.length;for(let ae=0;!K&&ae<T.length;ae++)this.boundPaintVertexBuffers[ae]!==T[ae]&&(K=!0);let Y=this.boundDynamicVertexBuffers.length!==k.length;for(let ae=0;!Y&&ae<k.length;ae++)this.boundDynamicVertexBuffers[ae]!==k[ae]&&(Y=!0);if(!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==A||K||Y||this.boundIndexBuffer!==S||this.boundVertexOffset!==E)this.freshBind(d,A,T,S,E,k,Z);else{o.bindVertexArrayOES.set(this.vao);for(const ae of k)ae&&(ae.bind(),Z&&ae.instanceCount&&ae.setVertexAttribDivisor(o.gl,d,Z));S&&S.dynamicDraw&&S.bind()}}freshBind(o,d,A,T,S,E,k){const Z=o.numAttributes,K=this.context,Y=K.gl;this.vao&&this.destroy(),this.vao=K.gl.createVertexArray(),K.bindVertexArrayOES.set(this.vao),this.boundProgram=o,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=A,this.boundIndexBuffer=T,this.boundVertexOffset=S,this.boundDynamicVertexBuffers=E,d.enableAttributes(Y,o),d.bind(),d.setVertexAttribPointers(Y,o,S);for(const ae of A)ae.enableAttributes(Y,o),ae.bind(),ae.setVertexAttribPointers(Y,o,S);for(const ae of E)ae&&(ae.enableAttributes(Y,o),ae.bind(),ae.setVertexAttribPointers(Y,o,S),k&&ae.instanceCount&&ae.setVertexAttribDivisor(Y,o,k));T&&T.bind(),K.currentNumAttributes=Z}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function Ll(y,o){const d=Math.pow(2,o.canonical.z),A=o.canonical.y;return[new n.ac(0,A/d).toLngLat().lat,new n.ac(0,(A+1)/d).toLngLat().lat]}function ls(y,o,d,A,T,S,E){const k=y.context,Z=k.gl,K=d.hillshadeFBO;if(!K)return;y.prepareDrawTile();const Y=y.isTileAffectedByFog(o),ae=y.getOrCreateProgram("hillshade",{overrideFog:Y});k.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,K.colorAttachment.get());const re=((De,Le,Ke,it)=>{const tt=Ke.paint.get("hillshade-shadow-color"),pt=Ke.paint.get("hillshade-shadow-color-use-theme").constantOr("default")==="none",ut=Ke.paint.get("hillshade-highlight-color"),ct=Ke.paint.get("hillshade-highlight-color-use-theme").constantOr("default")==="none",dt=Ke.paint.get("hillshade-accent-color"),vt=Ke.paint.get("hillshade-accent-color-use-theme").constantOr("default")==="none",Tt=Ke.paint.get("hillshade-emissive-strength");let Qt=n.ak(Ke.paint.get("hillshade-illumination-direction"));if(Ke.paint.get("hillshade-illumination-anchor")==="viewport")Qt-=De.transform.angle;else if(De.style&&De.style.enable3dLights()&&De.style.directionalLight){const ra=De.style.directionalLight.properties.get("direction"),ca=n.cc(ra.x,ra.y,ra.z);Qt=n.ak(ca[1])}const kt=!De.options.moving;return{u_matrix:it||De.transform.calculateProjMatrix(Le.tileID.toUnwrapped(),kt),u_image:0,u_latrange:Ll(0,Le.tileID),u_light:[Ke.paint.get("hillshade-exaggeration"),Qt],u_shadow:tt.toRenderColor(pt?null:Ke.lut),u_highlight:ut.toRenderColor(ct?null:Ke.lut),u_emissive_strength:Tt,u_accent:dt.toRenderColor(vt?null:Ke.lut)}})(y,d,A,y.terrain?o.projMatrix:null);y.uploadCommonUniforms(k,ae,o.toUnwrapped());const{tileBoundsBuffer:pe,tileBoundsIndexBuffer:Pe,tileBoundsSegments:Ce}=y.getTileBoundsBuffers(d);ae.draw(y,Z.TRIANGLES,T,S,E,Sr.disabled,re,A.id,pe,Pe,Ce)}function Cc(y,o,d){if(!o.needsDEMTextureUpload)return;const A=y.context,T=A.gl;A.pixelStoreUnpackPremultiplyAlpha.set(!1),o.demTexture=o.demTexture||y.getTileTexture(d.stride);const S=d.getPixels();o.demTexture?o.demTexture.update(S,{premultiply:!1}):o.demTexture=new n.T(A,S,T.R32F,{premultiply:!1}),o.needsDEMTextureUpload=!1}function kd(y,o,d){const A=y.context,T=A.gl;if(!o.dem)return;const S=o.dem;if(A.activeTexture.set(T.TEXTURE1),Cc(y,o,S),!o.demTexture)return;o.demTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE);const E=S.dim;A.activeTexture.set(T.TEXTURE0);let k=o.hillshadeFBO;if(!k){const re=new n.T(A,{width:E,height:E,data:null},T.RGBA8);re.bind(T.LINEAR,T.CLAMP_TO_EDGE),k=o.hillshadeFBO=A.createFramebuffer(E,E,!0,"renderbuffer"),k.colorAttachment.set(re.texture)}A.bindFramebuffer.set(k.framebuffer),A.viewport.set([0,0,E,E]);const{tileBoundsBuffer:Z,tileBoundsIndexBuffer:K,tileBoundsSegments:Y}=y.getMercatorTileBoundsBuffers(),ae=[];y.linearFloatFilteringSupported()&&ae.push("TERRAIN_DEM_FLOAT_FORMAT"),y.getOrCreateProgram("hillshadePrepare",{defines:ae}).draw(y,T.TRIANGLES,ur.disabled,Pr.disabled,Vr.unblended,Sr.disabled,((re,pe)=>{const Pe=pe.stride,Ce=n.ad.mat4.create();return n.ad.mat4.ortho(Ce,0,n.ai,-n.ai,0,0,1),n.ad.mat4.translate(Ce,Ce,[0,-n.ai,0]),{u_matrix:Ce,u_image:1,u_dimension:[Pe,Pe],u_zoom:re.overscaledZ}})(o.tileID,S),d.id,Z,K,Y),o.needsHillshadePrepare=!1}class Ai{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Gh extends Ai{getDefault(){return n.al.transparent}set(o){const d=this.current;(o.r!==d.r||o.g!==d.g||o.b!==d.b||o.a!==d.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class sl extends Ai{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class _l extends Ai{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class Wc extends Ai{getDefault(){return[!0,!0,!0,!0]}set(o){const d=this.current;(o[0]!==d[0]||o[1]!==d[1]||o[2]!==d[2]||o[3]!==d[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Nu extends Ai{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class Ju extends Ai{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class Sc extends Ai{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){const d=this.current;(o.func!==d.func||o.ref!==d.ref||o.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class tm extends Ai{getDefault(){const o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){const d=this.current;(o[0]!==d[0]||o[1]!==d[1]||o[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class Zh extends Ai{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;o?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=o,this.dirty=!1}}class qh extends Ai{getDefault(){return[0,1]}set(o){const d=this.current;(o[0]!==d[0]||o[1]!==d[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class ol extends Ai{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;o?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=o,this.dirty=!1}}class ts extends Ai{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class xi extends Ai{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;o?d.enable(d.BLEND):d.disable(d.BLEND),this.current=o,this.dirty=!1}}class lu extends Ai{getDefault(){const o=this.gl;return[o.ONE,o.ZERO,o.ONE,o.ZERO]}set(o){const d=this.current;(o[0]!==d[0]||o[1]!==d[1]||o[2]!==d[2]||o[3]!==d[3]||this.dirty)&&(this.gl.blendFuncSeparate(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Ou extends Ai{getDefault(){return n.al.transparent}set(o){const d=this.current;(o.r!==d.r||o.g!==d.g||o.b!==d.b||o.a!==d.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class op extends Ai{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(o,o),this.current=o,this.dirty=!1)}}class bc extends Ai{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;o?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=o,this.dirty=!1}}class xf extends Ai{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class Ud extends Ai{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}let Hh=class extends Ai{getDefault(){return null}set(y){(y!==this.current||this.dirty)&&(this.gl.useProgram(y),this.current=y,this.dirty=!1)}};class $h extends Ai{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class Bd extends Ai{getDefault(){const o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){const d=this.current;(o[0]!==d[0]||o[1]!==d[1]||o[2]!==d[2]||o[3]!==d[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Pf extends Ai{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class eg extends Ai{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class vh extends Ai{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class Hg extends Ai{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class xc extends Ai{getDefault(){return null}set(o){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Qu extends Ai{getDefault(){return null}set(o){this.gl&&(o!==this.current||this.dirty)&&(this.gl.bindVertexArray(o),this.current=o,this.dirty=!1)}}class Vu extends Ai{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class $g extends Ai{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class Kh extends Ai{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class wl extends Ai{constructor(o,d){super(o),this.context=o,this.parent=d}getDefault(){return null}}class ll extends wl{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class Wh extends wl{attachment(){return this.gl.DEPTH_ATTACHMENT}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,this.attachment(),d.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class jd extends wl{attachment(){return this.gl.DEPTH_ATTACHMENT}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,this.attachment(),d.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class am extends Wh{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}const rm=(y,o,d)=>({u_matrix:y,u_image0:0,u_skirt_height:o,u_ground_shadow_factor:d}),Yc=(y,o,d,A,T,S,E,k,Z,K,Y,ae,re,pe,Pe,Ce)=>({u_proj_matrix:Float32Array.from(y),u_globe_matrix:o,u_normalize_matrix:Float32Array.from(A),u_merc_matrix:d,u_zoom_transition:T,u_merc_center:S,u_image0:0,u_frustum_tl:E,u_frustum_tr:k,u_frustum_br:Z,u_frustum_bl:K,u_globe_pos:Y,u_globe_radius:ae,u_viewport:re,u_grid_matrix:Ce?Float32Array.from(Ce):new Float32Array(9),u_skirt_height:pe,u_far_z_cutoff:Pe});function Ef(y,o){return y!=null&&o!=null&&!(!y.hasData()||!o.hasData())&&y.demTexture!=null&&o.demTexture!=null&&y.tileID.key!==o.tileID.key}const ul=new class{constructor(){this.operations={}}newMorphing(y,o,d,A,T){if(y in this.operations){const S=this.operations[y];S.to.tileID.key!==d.tileID.key&&(S.queued=d)}else this.operations[y]={startTime:A,phase:0,duration:T,from:o,to:d,queued:null}}getMorphValuesForProxy(y){if(!(y in this.operations))return null;const o=this.operations[y];return{from:o.from,to:o.to,phase:o.phase}}update(y){for(const o in this.operations){const d=this.operations[o];for(d.phase=(y-d.startTime)/d.duration;d.phase>=1||!this._validOp(d);)if(!this._nextOp(d,y)){delete this.operations[o];break}}}_nextOp(y,o){return!!y.queued&&(y.from=y.to,y.to=y.queued,y.queued=null,y.phase=0,y.startTime=o,!0)}_validOp(y){return y.from.hasData()&&y.to.hasData()}},Gd={0:null,1:"TERRAIN_VERTEX_MORPHING"};function zu(y,o,d){if(o===0)return 0;const A=o<1&&d===514?.25/o:1;return 6*Math.pow(1.5,22-y)*Math.max(o,1)*A}function Zd(y,o){const d=1<<y.z;return!o&&(y.x===0||y.x===d-1)||y.y===0||y.y===d-1}const Xc=y=>({u_matrix:y});function Fl(y,o,d,A,T){if(T>0){const S=n.q.now(),E=(S-y.timeAdded)/T,k=o?(S-o.timeAdded)/T:-1,Z=d.getSource(),K=A.coveringZoomLevel({tileSize:Z.tileSize,roundZoom:Z.roundZoom}),Y=!o||Math.abs(o.tileID.overscaledZ-K)>Math.abs(y.tileID.overscaledZ-K),ae=Y&&y.refreshedUponExpiration?1:n.ay(Y?E:1-k,0,1);return y.refreshedUponExpiration&&E>=1&&(y.refreshedUponExpiration=!1),o?{opacity:1,mix:1-ae}:{opacity:ae,mix:0}}return{opacity:1,mix:0}}class ec extends al{constructor(o){const d={type:"raster-dem",maxzoom:o.transform.maxZoom},A=new n.D(n.cj(),null),T=jo("mock-dem",d,A,o.style);super("mock-dem",T,!1),T.setEventedParent(this),this._sourceLoaded=!0}_loadTile(o,d){o.state="loaded",d(null)}}class Jc extends al{constructor(o){const d=jo("proxy",{type:"geojson",maxzoom:o.transform.maxZoom},new n.D(n.cj(),null),o.style);super("proxy",d,!1),d.setEventedParent(this),this.map=this.getSource().map=o,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(o,d,A){if(o.freezeTileCoverage)return;this.transform=o;const T=o.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((S,E)=>{if(S[E.key]="",!this._tiles[E.key]){const k=new Ql(E,this._source.tileSize*E.overscaleFactor(),o.tileZoom);k.state="loaded",this._tiles[E.key]=k}return S},{});for(const S in this._tiles)S in T||(this.freeFBO(S),this._tiles[S].unloadVectorData(),delete this._tiles[S])}freeFBO(o){const d=this.proxyCachedFBO[o];if(d!==void 0){const A=Object.values(d);this.renderCachePool.push(...A),delete this.proxyCachedFBO[o]}}deallocRenderCache(){this.renderCache.forEach(o=>o.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class lp extends n.aH{constructor(o,d,A){super(o.overscaledZ,o.wrap,o.canonical.z,o.canonical.x,o.canonical.y),this.proxyTileKey=d,this.projMatrix=A}}class qd extends n.cK{constructor(o,d){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},o.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),o.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),o.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=o,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[A,T,S]=function(Z){const K=new n.b5,Y=new n.aV,ae=131;K.reserve(17161),Y.reserve(33800);const re=n.ai/128,pe=n.ai+re/2,Pe=pe+re;for(let De=-re;De<Pe;De+=re)for(let Le=-re;Le<Pe;Le+=re){const Ke=Le<0||Le>pe||De<0||De>pe?24575:0,it=n.ay(Math.round(Le),0,n.ai),tt=n.ay(Math.round(De),0,n.ai);K.emplaceBack(it+Ke,tt)}const Ce=(De,Le)=>{const Ke=Le*ae+De;Y.emplaceBack(Ke+1,Ke,Ke+ae),Y.emplaceBack(Ke+ae,Ke+ae+1,Ke+1)};for(let De=1;De<129;De++)for(let Le=1;Le<129;Le++)Ce(Le,De);return[0,129].forEach(De=>{for(let Le=0;Le<130;Le++)Ce(Le,De),Ce(De,Le)}),[K,Y,32768]}(),E=o.context;this.gridBuffer=E.createVertexBuffer(A,n.b7.members),this.gridIndexBuffer=E.createIndexBuffer(T),this.gridSegments=n.b8.simpleSegment(0,0,A.length,T.length),this.gridNoSkirtSegments=n.b8.simpleSegment(0,0,A.length,S),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Jc(d.map),this.orthoMatrix=n.ad.mat4.create(),n.ad.mat4.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,n.ai,0,n.ai,0,1);const k=E.gl;this._overlapStencilMode=new Pr({func:k.GEQUAL,mask:255},0,255,k.KEEP,k.KEEP,k.REPLACE),this._previousZoom=o.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=d,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new ec(d.map),this._pendingGroundEffectLayers=[]}set style(o){o.on("data",this._onStyleDataEvent.bind(this)),this._style=o,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(o,d,A){if(o&&o.terrain){this._style!==o&&(this.style=o,this._evaluationZoom=void 0);const T=o.terrain.properties,S=o.terrain.drapeRenderMode===0,E=o.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=n.q.now();const k=o.terrain&&o.terrain.scope,Z=T.get("source"),K=S?this._mockSourceCache:o.getSourceCache(Z,k);if(!K)return void n.w(`Couldn't find terrain source "${Z}".`);if(this.sourceCache=K,this._attenuationRange=o.terrain.getAttenuationRange(),this._exaggeration=E?this.calculateExaggeration(d):T.get("exaggeration"),!d.projection.requiresDraping&&E&&this._exaggeration===0)return void this._disable();this.enabled=!0;const Y=()=>{this.sourceCache.used&&n.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const ae=this.getScaledDemTileSize();this.sourceCache.update(d,ae,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,Y(),this._initializing=!0),Y(),d.updateElevation(!0,A),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(d),this._emptyDEMTextureDirty=!0,this._previousZoom=d.zoom}else this._disable()}calculateExaggeration(o){if(this._attenuationRange&&o.zoom>=Math.ceil(this._attenuationRange[1]))return this._style.terrain.getExaggeration(o.zoom);const d=this._previousCameraAltitude,A=o.getFreeCameraOptions().position.z/o.pixelsPerMeter*o.worldSize;this._previousCameraAltitude=A;const T=d!=null?A-d:Number.MAX_VALUE;if(Math.abs(T)<2)return this._exaggeration;const S=o.zoom,E=this._style.terrain;if(!this._previousUpdateTimestamp)return E.getExaggeration(S);let k=S-this._previousZoom;const Z=this._previousUpdateTimestamp;let K=S;this._evaluationZoom!=null&&(K=this._evaluationZoom,Math.abs(S-K)>.5&&(k=.5*(S-K+k)),k*T<0&&(K+=k)),this._evaluationZoom=K;const Y=E.getExaggeration(K),ae=Y===E.getExaggeration(Math.max(0,K-.1));if(ae&&Math.abs(Y-this._exaggeration)<.01)return Y;let re=Math.min(.1,.00375*(this._updateTimestamp-Z));return(ae||Y<.1||Math.abs(k)<1e-4)&&(re=Math.min(.2,4*re)),n.ah(this._exaggeration,Y,re)}resetTileLookupCache(o){this._findCoveringTileCache[o]={}}attenuationRange(){return this._attenuationRange}getDemUpscale(){return this.proxySourceCache.getSource().tileSize/128}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(o){o.coord&&o.dataType==="source"?this._clearRenderCacheForTile(o.sourceCacheId,o.coord):o.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const o in this._style._mergedSourceCaches)this._style._mergedSourceCaches[o].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(o=>o.fb.destroy()),this.pool=[],this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const o=2*this.proxySourceCache.getSource().tileSize;return[o,o]}set useVertexMorphing(o){this._useVertexMorphing=o}updateTileBinding(o){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const d=this.proxySourceCache,A=this.painter.transform;this._initializing&&(this._initializing=A._centerAltitude===0&&this.getAtPointOrZero(n.ac.fromLngLat(A.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const T=this.proxyCoords=d.getIds().map(Z=>{const K=d.getTileByID(Z).tileID;return K.projMatrix=A.calculateProjMatrix(K.toUnwrapped()),K});(function(Z,K){const Y=K.transform.pointCoordinate(K.transform.getCameraPoint()),ae=new n.P(Y.x,Y.y);Z.sort((re,pe)=>{if(pe.overscaledZ-re.overscaledZ)return pe.overscaledZ-re.overscaledZ;const Pe=new n.P(re.canonical.x+(1<<re.canonical.z)*re.wrap,re.canonical.y),Ce=new n.P(pe.canonical.x+(1<<pe.canonical.z)*pe.wrap,pe.canonical.y),De=ae.mult(1<<re.canonical.z);return De.x-=.5,De.y-=.5,De.distSqr(Pe)-De.distSqr(Ce)})})(T,this.painter);const S=this.proxyToSource||{};this.proxyToSource={},T.forEach(Z=>{this.proxyToSource[Z.key]={}}),this.terrainTileForTile={};const E=this._style._mergedSourceCaches;for(const Z in E){const K=E[Z];if(!K.used||(K!==this.sourceCache&&this.resetTileLookupCache(K.id),this._setupProxiedCoordsForOrtho(K,o[Z],S),K.usedForTerrain))continue;const Y=o[Z];K.getSource().reparseOverscaled&&this._assignTerrainTiles(Y)}this.proxiedCoords[d.id]=T.map(Z=>new lp(Z,Z.key,this.orthoMatrix)),this._assignTerrainTiles(T),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(S),this.renderingToTexture=!1;const k={};this._visibleDemTiles=[];for(const Z of this.proxyCoords){const K=this.terrainTileForTile[Z.key];if(!K)continue;const Y=K.tileID.key;Y in k||(this._visibleDemTiles.push(K),k[Y]=Y)}}_assignTerrainTiles(o){this._initializing||o.forEach(d=>{if(this.terrainTileForTile[d.key])return;const A=this._findTileCoveringTileID(d,this.sourceCache);A&&(this.terrainTileForTile[d.key]=A)})}_prepareDEMTextures(){const o=this.painter.context,d=o.gl;for(const A in this.terrainTileForTile){const T=this.terrainTileForTile[A],S=T.dem;!S||T.demTexture&&!T.needsDEMTextureUpload||(o.activeTexture.set(d.TEXTURE1),Cc(this.painter,T,S))}}_prepareDemTileUniforms(o,d,A,T){if(!d||d.demTexture==null)return!1;const S=o.tileID.canonical,E=Math.pow(2,d.tileID.canonical.z-S.z),k=T||"";return A[`u_dem_tl${k}`]=[S.x*E%1,S.y*E%1],A[`u_dem_scale${k}`]=E,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let o=0;const d=this._visibleDemTiles.reduce((A,T)=>{if(!T.dem)return A;const S=T.dem.tree.minimums[0];return S>0&&o++,A+S},0);return o?d/o:0}_updateEmptyDEMTexture(){const o=this.painter.context,d=o.gl;o.activeTexture.set(d.TEXTURE2);const A=this._getLoadedAreaMinimum(),T=new n.cL({width:1,height:1},new Float32Array([A]));this._emptyDEMTextureDirty=!1;let S=this._emptyDEMTexture;return S?S.update(T,{premultiply:!1}):S=this._emptyDEMTexture=new n.T(o,T,d.R32F,{premultiply:!1}),S}setupElevationDraw(o,d,A){const T=this.painter.context,S=T.gl,E={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0};E.u_exaggeration=this.exaggeration();let k=null,Z=null,K=1;if(A&&A.morphing&&this._useVertexMorphing){const pe=A.morphing.srcDemTile,Pe=A.morphing.dstDemTile;K=A.morphing.phase,pe&&Pe&&(this._prepareDemTileUniforms(o,pe,E,"_prev")&&(Z=pe),this._prepareDemTileUniforms(o,Pe,E)&&(k=Pe))}const Y=pe=>pe&&pe.demTexture&&this.painter.linearFloatFilteringSupported()?S.LINEAR:S.NEAREST;let ae=null;var re;if(this.enabled?Z&&k?(ae=k.demTexture,T.activeTexture.set(S.TEXTURE4),Z.demTexture.bind(Y(Z),S.CLAMP_TO_EDGE),E.u_dem_lerp=K):(k=this.terrainTileForTile[o.tileID.key],ae=this._prepareDemTileUniforms(o,k,E)?k.demTexture:this.emptyDEMTexture):ae=this.emptyDEMTexture,T.activeTexture.set(S.TEXTURE2),ae&&(E.u_dem_size=(re=ae).size[0]===1?1:re.size[0]-2,ae.bind(Y(k),S.CLAMP_TO_EDGE)),this.painter.setupDepthForOcclusion(A&&A.useDepthForOcclusion,d,E),A&&A.useMeterToDem&&k){const pe=(1<<k.tileID.canonical.z)*n.bH(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;E.u_meter_to_dem=pe}if(A&&A.labelPlaneMatrixInv&&(E.u_label_plane_matrix_inv=A.labelPlaneMatrixInv),d.setTerrainUniformValues(T,E),this.painter.transform.projection.name==="globe"){const pe=this.globeUniformValues(this.painter.transform,o.tileID.canonical,A&&A.useDenormalizedUpVectorScale);d.setGlobeUniformValues(T,pe)}}globeUniformValues(o,d,A){const T=o.projection;return{u_tile_tl_up:T.upVector(d,0,0),u_tile_tr_up:T.upVector(d,n.ai,0),u_tile_br_up:T.upVector(d,n.ai,n.ai),u_tile_bl_up:T.upVector(d,0,n.ai),u_tile_up_scale:A?n.cM(1):T.upVectorScale(d,o.center.lat,o.worldSize).metersToTile}}renderToBackBuffer(o){const d=this.painter,A=this.painter.context;o.length!==0&&(A.bindFramebuffer.set(null),A.viewport.set([0,0,d.width,d.height]),d.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(T,S,E,k,Z){if(T.transform.projection.name==="globe")(function(K,Y,ae,re,pe){const Pe=K.context,Ce=Pe.gl;let De,Le;const Ke=K.transform,it=n.cD(K,Pe,Ke),tt=(ra,ca)=>{if(Le===ca)return;const xa=[Gd[ca],"PROJECTION_GLOBE_VIEW"];it&&xa.push("CUSTOM_ANTIALIASING");const Ft=K.isTileAffectedByFog(ra);De=K.getOrCreateProgram("globeRaster",{defines:xa,overrideFog:Ft}),Le=ca},pt=K.colorModeForRenderPass(),ut=new ur(Ce.LEQUAL,ur.ReadWrite,K.depthRangeFor3D);ul.update(pe);const ct=n.cE(Ke),dt=[n.av(Ke.center.lng),n.aC(Ke.center.lat)],vt=K.globeSharedBuffers,Tt=[Ke.width*n.q.devicePixelRatio,Ke.height*n.q.devicePixelRatio],Qt=Float32Array.from(Ke.globeMatrix),kt={useDenormalizedUpVectorScale:!0};{const ra=K.transform,ca=zu(ra.zoom,Y.exaggeration(),Y.sourceCache._source.tileSize);Le=-1;const xa=Ce.TRIANGLES;for(const Ft of re){const sa=ae.getTile(Ft),zt=Pr.disabled,oa=Y.prevTerrainTileForTile[Ft.key],ta=Y.terrainTileForTile[Ft.key];Ef(oa,ta)&&ul.newMorphing(Ft.key,oa,ta,pe,250),Pe.activeTexture.set(Ce.TEXTURE0),sa.texture&&sa.texture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE);const da=ul.getMorphValuesForProxy(Ft.key),Xt=da?1:0;da&&n.L(kt,{morphing:{srcDemTile:da.from,dstDemTile:da.to,phase:n.cC(da.phase)}});const pa=n.cF(Ft.canonical),La=n.cG(pa.getCenter().lat),Fa=n.cH(Ft.canonical,pa,La,ra.worldSize/ra._pixelsPerMercatorPixel),Va=n.bc(n.cI(Ft.canonical)),cr=Yc(ra.expandedFarZProjMatrix,Qt,ct,Va,n.ag(ra.zoom),dt,ra.frustumCorners.TL,ra.frustumCorners.TR,ra.frustumCorners.BR,ra.frustumCorners.BL,ra.globeCenterInViewSpace,ra.globeRadius,Tt,ca,ra._farZ,Fa);if(tt(Ft,Xt),De&&(Y.setupElevationDraw(sa,De,kt),K.uploadCommonUniforms(Pe,De,Ft.toUnwrapped()),vt)){const[jr,vr,Ir]=vt.getGridBuffers(La,ca!==0);De.draw(K,xa,ut,zt,pt,Sr.backCCW,cr,"globe_raster",jr,vr,Ir)}}}if(vt&&(K.renderDefaultNorthPole||K.renderDefaultSouthPole)){const ra=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];it&&ra.push("CUSTOM_ANTIALIASING"),De=K.getOrCreateProgram("globeRaster",{defines:ra});for(const ca of re){const{x:xa,y:Ft,z:sa}=ca.canonical,zt=Ft===0,oa=Ft===(1<<sa)-1,[ta,da,Xt,pa]=vt.getPoleBuffers(sa,!1);if(pa&&(zt||oa)){const La=ae.getTile(ca);Pe.activeTexture.set(Ce.TEXTURE0),La.texture&&La.texture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE);let Fa=n.cJ(sa,xa,Ke);const Va=n.bc(n.cI(ca.canonical)),cr=(jr,vr)=>jr.draw(K,Ce.TRIANGLES,ut,Pr.disabled,pt,Sr.disabled,Yc(Ke.expandedFarZProjMatrix,Fa,Fa,Va,0,dt,Ke.frustumCorners.TL,Ke.frustumCorners.TR,Ke.frustumCorners.BR,Ke.frustumCorners.BL,Ke.globeCenterInViewSpace,Ke.globeRadius,Tt,0,Ke._farZ),"globe_pole_raster",vr,Xt,pa);Y.setupElevationDraw(La,De,kt),K.uploadCommonUniforms(Pe,De,ca.toUnwrapped()),zt&&K.renderDefaultNorthPole&&cr(De,ta),oa&&K.renderDefaultSouthPole&&(Fa=n.ad.mat4.scale(n.ad.mat4.create(),Fa,[1,-1,1]),cr(De,da))}}}})(T,S,E,k,Z);else{const K=T.context,Y=K.gl;let ae,re;const pe=T.shadowRenderer,Pe=Js(T,T.longestCutoffRange),Ce=pt=>{if(re===pt)return;const ut=[];ut.push(Gd[pt]),Pe.shouldRenderCutoff&&ut.push("RENDER_CUTOFF"),pe&&(ut.push("RENDER_SHADOWS","DEPTH_TEXTURE"),pe.useNormalOffset&&ut.push("NORMAL_OFFSET")),ae=T.getOrCreateProgram("terrainRaster",{defines:ut}),re=pt},De=T.colorModeForRenderPass(),Le=new ur(Y.LEQUAL,ur.ReadWrite,T.depthRangeFor3D);ul.update(Z);const Ke=T.transform,it=zu(Ke.zoom,S.exaggeration(),S.sourceCache._source.tileSize);let tt=[0,0,0];if(pe){const pt=T.style.directionalLight,ut=T.style.ambientLight;pt&&ut&&(tt=jc(T.style,pt,ut))}{re=-1;const pt=Y.TRIANGLES,[ut,ct]=[S.gridIndexBuffer,S.gridSegments];for(const dt of k){const vt=E.getTile(dt),Tt=Pr.disabled,Qt=S.prevTerrainTileForTile[dt.key],kt=S.terrainTileForTile[dt.key];Ef(Qt,kt)&&ul.newMorphing(dt.key,Qt,kt,Z,250),K.activeTexture.set(Y.TEXTURE0),vt.texture&&vt.texture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE);const ra=ul.getMorphValuesForProxy(dt.key),ca=ra?1:0;let xa;ra&&(xa={morphing:{srcDemTile:ra.from,dstDemTile:ra.to,phase:n.cC(ra.phase)}});const Ft=rm(dt.projMatrix,Zd(dt.canonical,Ke.renderWorldCopies)?it/10:it,tt);if(Ce(ca),!ae)continue;S.setupElevationDraw(vt,ae,xa);const sa=dt.toUnwrapped();pe&&pe.setupShadows(sa,ae),T.uploadCommonUniforms(K,ae,sa,null,Pe),ae.draw(T,pt,Le,Tt,De,Sr.backCCW,Ft,"terrain_raster",S.gridBuffer,ut,ct)}}}}(d,this,this.proxySourceCache,o,this._updateTimestamp),this.renderingToTexture=!0,d.gpuTimingDeferredRenderEnd(),o.splice(0,o.length))}renderBatch(o){if(this._drapedRenderBatches.length===0)return o+1;this.renderingToTexture=!0;const d=this.painter,A=this.painter.context,T=this.proxySourceCache,S=this.proxiedCoords[T.id],E=this._drapedRenderBatches.shift(),k=d.style.order,Z=[];let K=0;for(const Y of S){const ae=T.getTileByID(Y.proxyTileKey),re=T.proxyCachedFBO[Y.key]?T.proxyCachedFBO[Y.key][o]:void 0,pe=re!==void 0?T.renderCache[re]:this.pool[K++],Pe=re!==void 0;if(ae.texture=pe.tex,Pe&&!pe.dirty){Z.push(ae.tileID);continue}let Ce;A.bindFramebuffer.set(pe.fb.framebuffer),this.renderedToTile=!1,pe.dirty&&(A.clear({color:n.al.transparent,stencil:0}),pe.dirty=!1);for(let De=E.start;De<=E.end;++De){const Le=d.style._mergedLayers[k[De]];if(Le.isHidden(d.transform.zoom))continue;const Ke=d.style.getLayerSourceCache(Le),it=Ke?this.proxyToSource[Y.key][Ke.id]:[Y];if(!it)continue;const tt=it;A.viewport.set([0,0,pe.fb.width,pe.fb.height]),Ce!==(Ke?Ke.id:null)&&(this._setupStencil(pe,it,Le,Ke),Ce=Ke?Ke.id:null),d.renderLayer(d,Ke,Le,tt)}if(this._drapedRenderBatches.length===0)for(const De of this._pendingGroundEffectLayers){const Le=d.style._mergedLayers[k[De]];if(Le.isHidden(d.transform.zoom))continue;const Ke=d.style.getLayerSourceCache(Le),it=Ke?this.proxyToSource[Y.key][Ke.id]:[Y];if(!it)continue;const tt=it;A.viewport.set([0,0,pe.fb.width,pe.fb.height]),Ce!==(Ke?Ke.id:null)&&(this._setupStencil(pe,it,Le,Ke),Ce=Ke?Ke.id:null),d.renderLayer(d,Ke,Le,tt)}this.renderedToTile?(pe.dirty=!0,Z.push(ae.tileID)):Pe||--K,K===5&&(K=0,this.renderToBackBuffer(Z))}return this.renderToBackBuffer(Z),this.renderingToTexture=!1,A.bindFramebuffer.set(null),A.viewport.set([0,0,d.width,d.height]),E.end+1}postRender(){}isLayerOrderingCorrect(o){const d=o.order.length;let A=-1,T=d;for(let S=0;S<d;++S)this._style.isLayerDraped(o._mergedLayers[o.order[S]])?A=Math.max(A,S):T=Math.min(T,S);return T>A}getMinElevationBelowMSL(){let o=0;return this._visibleDemTiles.filter(d=>d.dem).forEach(d=>{o=Math.min(o,d.dem.tree.minimums[0])}),o===0?o:(o-30)*this._exaggeration}raycast(o,d,A){if(!this._visibleDemTiles)return null;const T=this._visibleDemTiles.filter(S=>S.dem).map(S=>{const E=S.tileID,k=1<<E.overscaledZ,{x:Z,y:K}=E.canonical,Y=Z/k,ae=(Z+1)/k,re=K/k,pe=(K+1)/k;return{minx:Y,miny:re,maxx:ae,maxy:pe,t:S.dem.tree.raycastRoot(Y,re,ae,pe,o,d,A),tile:S}});T.sort((S,E)=>(S.t!==null?S.t:Number.MAX_VALUE)-(E.t!==null?E.t:Number.MAX_VALUE));for(const S of T){if(S.t==null)return null;const E=S.tile.dem.tree.raycast(S.minx,S.miny,S.maxx,S.maxy,o,d,A);if(E!=null)return E}return null}_createFBO(){const o=this.painter.context,d=o.gl,A=this.drapeBufferSize;o.activeTexture.set(d.TEXTURE0);const T=new n.T(o,{width:A[0],height:A[1],data:null},d.RGBA8);T.bind(d.LINEAR,d.CLAMP_TO_EDGE);const S=o.createFramebuffer(A[0],A[1],!0,null);return S.colorAttachment.set(T.texture),S.depthAttachment=new am(o,S.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=o.createRenderbuffer(o.gl.DEPTH_STENCIL,A[0],A[1]),this._stencilRef=0,S.depthAttachment.set(this._sharedDepthStencil),o.clear({stencil:0})):S.depthAttachment.set(this._sharedDepthStencil),o.extTextureFilterAnisotropic&&d.texParameterf(d.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax),{fb:S,tex:T,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const o in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[o].hasTransition())return!0;return this._style.order.some(o=>{const d=this._style._mergedLayers[o],A=d.isHidden(this.painter.transform.zoom);return d.type==="hillshade"||d.type==="custom"?!A&&d.shouldRedrape():!A&&d.hasTransition()})}_clearLineLayersFromRenderCache(){let o=!1;for(const A of this._style.getSources())if(A instanceof pc){o=!0;break}if(!o)return;const d={};for(let A=0;A<this._style.order.length;++A){const T=this._style._mergedLayers[this._style.order[A]],S=this._style.getLayerSourceCache(T);if(S&&!d[S.id]&&!T.isHidden(this.painter.transform.zoom)&&T.type==="line"&&T.widthExpression()instanceof n.ab){d[S.id]=!0;for(const E of this.proxyCoords){const k=this.proxyToSource[E.key][S.id];if(k)for(const Z of k)this._clearRenderCacheForTile(S.id,Z)}}}}_clearRasterLayersFromRenderCache(){let o=!1;for(const A in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[A]._source instanceof tl){o=!0;break}if(!o)return;const d={};for(let A=0;A<this._style.order.length;++A){const T=this._style._mergedLayers[this._style.order[A]],S=this._style.getLayerSourceCache(T);if(!S||d[S.id]||T.isHidden(this.painter.transform.zoom)||T.type!=="raster")continue;const E=T.paint.get("raster-fade-duration");for(const k of this.proxyCoords){const Z=this.proxyToSource[k.key][S.id];if(Z)for(const K of Z){const Y=Fl(S.getTile(K),S.findLoadedParent(K,0),S,this.painter.transform,E);(Y.opacity!==1||Y.mix!==0)&&this._clearRenderCacheForTile(S.id,K)}}}}_setupDrapedRenderBatches(){this._style.updateDrapeFirstLayers();const o=this._style.order,d=o.length;if(d===0)return;const A=[];this._pendingGroundEffectLayers=[];let T,S=0,E=this._style._mergedLayers[o[S]];for(;!this._style.isLayerDraped(E)&&E.isHidden(this.painter.transform.zoom)&&++S<d;)E=this._style._mergedLayers[o[S]];for(;S<d;++S){const k=this._style._mergedLayers[o[S]];k.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(k)?T===void 0&&(T=S):(k.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(S),T!==void 0&&(A.push({start:T,end:S-1}),T=void 0)))}if(T!==void 0&&A.push({start:T,end:S-1}),A.length!==0){const k=A[A.length-1];this._pendingGroundEffectLayers.every(Z=>Z>k.end)||n.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=A}_setupRenderCache(o){const d=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,d.renderCache.length>d.renderCachePool.length){const E=Object.values(d.proxyCachedFBO);d.proxyCachedFBO={};for(let k=0;k<E.length;++k){const Z=Object.values(E[k]);d.renderCachePool.push(...Z)}}return}this._clearRasterLayersFromRenderCache();const A=this.proxyCoords,T=this._tilesDirty;for(let E=A.length-1;E>=0;E--){const k=A[E];if(d.getTileByID(k.key),d.proxyCachedFBO[k.key]!==void 0){const Z=o[k.key],K=this.proxyToSource[k.key];let Y=0;for(const ae in K){const re=K[ae],pe=Z[ae];if(!pe||pe.length!==re.length||re.some((Pe,Ce)=>Pe!==pe[Ce]||T[ae]&&T[ae].hasOwnProperty(Pe.key))){Y=-1;break}++Y}for(const ae in d.proxyCachedFBO[k.key])d.renderCache[d.proxyCachedFBO[k.key][ae]].dirty=Y<0||Y!==Object.values(Z).length}}const S=[...this._drapedRenderBatches];S.sort((E,k)=>k.end-k.start-(E.end-E.start));for(const E of S)for(const k of A){if(d.proxyCachedFBO[k.key])continue;let Z=d.renderCachePool.pop();Z===void 0&&d.renderCache.length<50&&(Z=d.renderCache.length,d.renderCache.push(this._createFBO())),Z!==void 0&&(d.proxyCachedFBO[k.key]={},d.proxyCachedFBO[k.key][E.start]=Z,d.renderCache[Z].dirty=!0)}this._tilesDirty={}}_setupStencil(o,d,A,T){if(!T||!this._sourceTilesOverlap[T.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const S=this.painter.context,E=S.gl;if(d.length<=1)return void(this._overlapStencilType=!1);let k;if(A.isTileClipped())k=d.length,this._overlapStencilMode.test={func:E.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(d[0].overscaledZ>d[d.length-1].overscaledZ))return void(this._overlapStencilType=!1);k=1,this._overlapStencilMode.test={func:E.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+k>255&&(S.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=k,this._overlapStencilMode.ref=this._stencilRef,A.isTileClipped()&&this._renderTileClippingMasks(d,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(o){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[o.key]),this._overlapStencilMode):Pr.disabled}_renderTileClippingMasks(o,d){const A=this.painter,T=this.painter.context,S=T.gl;A._tileClippingMaskIDs={},T.setColorMode(Vr.disabled),T.setDepthMode(ur.disabled);const E=A.getOrCreateProgram("clippingMask");for(const k of o){const Z=A._tileClippingMaskIDs[k.key]=--d;E.draw(A,S.TRIANGLES,ur.disabled,new Pr({func:S.ALWAYS,mask:0},Z,255,S.KEEP,S.KEEP,S.REPLACE),Vr.disabled,Sr.disabled,Xc(k.projMatrix),"$clipping",A.tileExtentBuffer,A.quadTriangleIndexBuffer,A.tileExtentSegments)}}pointCoordinate(o){const d=this.painter.transform;if(o.x<0||o.x>d.width||o.y<0||o.y>d.height)return null;const A=[o.x,o.y,1,1];n.ad.vec4.transformMat4(A,A,d.pixelMatrixInverse),n.ad.vec4.scale(A,A,1/A[3]),A[0]/=d.worldSize,A[1]/=d.worldSize;const T=d._camera.position,S=n.bH(1,d.center.lat),E=[T[0],T[1],T[2]/S,0],k=n.ad.vec3.subtract([],A.slice(0,3),E);n.ad.vec3.normalize(k,k);const Z=this.raycast(E,k,this._exaggeration);return Z!==null&&Z?(n.ad.vec3.scaleAndAdd(E,E,k,Z),E[3]=E[2],E[2]*=S,E):null}_setupProxiedCoordsForOrtho(o,d,A){if(o.getSource()instanceof n.aK)return this._setupProxiedCoordsForImageSource(o,d,A);this._findCoveringTileCache[o.id]=this._findCoveringTileCache[o.id]||{};const T=this.proxiedCoords[o.id]=[],S=this.proxyCoords;for(let Z=0;Z<S.length;Z++){const K=S[Z],Y=this._findTileCoveringTileID(K,o);if(Y){const ae=this._createProxiedId(K,Y,A[K.key]&&A[K.key][o.id]);T.push(ae),this.proxyToSource[K.key][o.id]=[ae]}}let E=!1;const k=new Set;for(let Z=0;Z<d.length;Z++){const K=o.getTile(d[Z]);if(!K||!K.hasData())continue;const Y=this._findTileCoveringTileID(K.tileID,this.proxySourceCache);if(Y&&Y.tileID.canonical.z!==K.tileID.canonical.z){const ae=this.proxyToSource[Y.tileID.key][o.id],re=this._createProxiedId(Y.tileID,K,A[Y.tileID.key]&&A[Y.tileID.key][o.id]);ae?ae.splice(ae.length-1,0,re):this.proxyToSource[Y.tileID.key][o.id]=[re];const pe=this.proxyToSource[Y.tileID.key][o.id];k.has(pe)||k.add(pe),T.push(re),E=!0}}if(this._sourceTilesOverlap[o.id]=E,E&&this._debugParams.sortTilesHiZFirst)for(const Z of k)Z.sort((K,Y)=>Y.overscaledZ-K.overscaledZ)}_setupProxiedCoordsForImageSource(o,d,A){if(!o.getSource().loaded())return;const T=this.proxiedCoords[o.id]=[],S=this.proxyCoords,E=o.getSource(),k=E.tileID;if(!k)return;const Z=new n.P(k.x,k.y)._div(1<<k.z),K=E.coordinates.map(n.ac.fromLngLat).reduce((ae,re)=>(ae.min.x=Math.min(ae.min.x,re.x-Z.x),ae.min.y=Math.min(ae.min.y,re.y-Z.y),ae.max.x=Math.max(ae.max.x,re.x-Z.x),ae.max.y=Math.max(ae.max.y,re.y-Z.y),ae),{min:new n.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new n.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),Y=(ae,re)=>{const pe=ae.wrap+ae.canonical.x/(1<<ae.canonical.z),Pe=ae.canonical.y/(1<<ae.canonical.z),Ce=n.ai/(1<<ae.canonical.z),De=re.wrap+re.canonical.x/(1<<re.canonical.z),Le=re.canonical.y/(1<<re.canonical.z);return pe+Ce<De+K.min.x||pe>De+K.max.x||Pe+Ce<Le+K.min.y||Pe>Le+K.max.y};for(let ae=0;ae<S.length;ae++){const re=S[ae];for(let pe=0;pe<d.length;pe++){const Pe=o.getTile(d[pe]);if(!Pe||!Pe.hasData()||Y(re,Pe.tileID))continue;const Ce=this._createProxiedId(re,Pe,A[re.key]&&A[re.key][o.id]),De=this.proxyToSource[re.key][o.id];De?De.push(Ce):this.proxyToSource[re.key][o.id]=[Ce],T.push(Ce)}}}_createProxiedId(o,d,A){let T=this.orthoMatrix;if(A){const S=A.find(E=>E.key===d.tileID.key);if(S)return S}if(d.tileID.key!==o.key){const S=o.canonical.z-d.tileID.canonical.z;let E,k,Z;T=n.ad.mat4.create();const K=d.tileID.wrap-o.wrap<<o.overscaledZ;S>0?(E=n.ai>>S,k=E*((d.tileID.canonical.x<<S)-o.canonical.x+K),Z=E*((d.tileID.canonical.y<<S)-o.canonical.y)):(E=n.ai<<-S,k=n.ai*(d.tileID.canonical.x-(o.canonical.x+K<<-S)),Z=n.ai*(d.tileID.canonical.y-(o.canonical.y<<-S))),n.ad.mat4.ortho(T,0,E,0,E,0,1),n.ad.mat4.translate(T,T,[k,Z,0])}return new lp(d.tileID,o.key,T)}_findTileCoveringTileID(o,d){let A=d.getTile(o);if(A&&A.hasData())return A;const T=this._findCoveringTileCache[d.id],S=T[o.key];if(A=S?d.getTileByID(S):null,A&&A.hasData()||S===null)return A;let E=A?A.tileID:o,k=E.overscaledZ;const Z=d.getSource().minzoom,K=[];if(!S){const ae=d.getSource().maxzoom;if(o.canonical.z>=ae){const re=o.canonical.z-ae;d.getSource().reparseOverscaled?(k=Math.max(o.canonical.z+2,d.transform.tileZoom),E=new n.aH(k,o.wrap,ae,o.canonical.x>>re,o.canonical.y>>re)):re!==0&&(k=ae,E=new n.aH(k,o.wrap,ae,o.canonical.x>>re,o.canonical.y>>re))}E.key!==o.key&&(K.push(E.key),A=d.getTile(E))}const Y=ae=>{K.forEach(re=>{T[re]=ae}),K.length=0};for(k-=1;k>=Z&&(!A||!A.hasData());k--){A&&Y(A.tileID.key);const ae=E.calculateScaledKey(k);if(A=d.getTileByID(ae),A&&A.hasData())break;const re=T[ae];if(re===null)break;re===void 0?K.push(ae):A=d.getTileByID(re)}return Y(A?A.tileID.key:null),A&&A.hasData()?A:null}findDEMTileFor(o){return this.enabled?this._findTileCoveringTileID(o,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(o,d){let A=this._tilesDirty[o];A||(A=this._tilesDirty[o]={}),A[d.key]=!0}}function Qc(y,o,d){const A=function(k,Z,K){const Y=n.ad.vec3.dot(Z,k),ae=n.ad.vec3.dot(K,[.2126,.7152,.0722]),re=(Pe,Ce,De)=>(1-De)*Pe+De*Ce,pe=re(1-.3*Math.min(ae,1),1,Math.min(Y+1,1));return re(.92,1,Math.asin(n.ay(Z[2],-1,1))/Math.PI+.5)*pe}(y,[0,0,1],o),T=[0,0,0];n.ad.vec3.scale(T,d.slice(0,3),A);const S=[0,0,0];n.ad.vec3.scale(S,o.slice(0,3),y[2]);const E=[0,0,0];return n.ad.vec3.add(E,T,S),n.cg(E)}const Gs=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],nm=["stars","rainParticle","snowParticle","fillExtrusion","fillExtrusionGroundEffect","elevatedStructures","model","symbol"];class tg{static cacheKey(o,d,A,T){let S=`${d}${T?T.cacheKey:""}`;for(const E of A)o.usedDefines.includes(E)&&(S+=`/${E}`);return S}constructor(o,d,A,T,S,E){const k=o.gl;this.program=k.createProgram(),this.configuration=T,this.name=d,this.fixedDefines=[...E];const Z=T?T.getBinderAttributes():[],K=(A.staticAttributes||[]).concat(Z);let Y=T?T.defines():[];Y=Y.concat(E.map(De=>`#define ${De}`));const ae=`#version 300 es
`;let re=ae+Y.concat("precision mediump float;",$c,su.fragmentSource).join(`
`);for(const De of A.fragmentIncludes)re+=`
${es[De]}`;re+=`
${A.fragmentSource}`;let pe=ae+Y.concat("precision highp float;",$c,su.vertexSource).join(`
`);for(const De of A.vertexIncludes)pe+=`
${es[De]}`;this.forceManualRenderingForInstanceIDShaders=o.forceManualRenderingForInstanceIDShaders&&A.vertexSource.indexOf("gl_InstanceID")!==-1,this.forceManualRenderingForInstanceIDShaders&&(pe+=`
uniform int u_instanceID;
`),pe+=`
${A.vertexSource}`,this.forceManualRenderingForInstanceIDShaders&&(pe=pe.replaceAll("gl_InstanceID","u_instanceID"));const Pe=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);k.shaderSource(Pe,re),k.compileShader(Pe),k.attachShader(this.program,Pe);const Ce=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())this.failedToCreate=!0;else{k.shaderSource(Ce,pe),k.compileShader(Ce),k.attachShader(this.program,Ce),this.attributes={},this.numAttributes=K.length;for(let De=0;De<this.numAttributes;De++)if(K[De]){const Le=K[De].startsWith("a_")?K[De]:`a_${K[De]}`;k.bindAttribLocation(this.program,De,Le),this.attributes[Le]=De}k.linkProgram(this.program),k.deleteShader(Ce),k.deleteShader(Pe),this.fixedUniforms=S(o),this.binderUniforms=T?T.getUniforms(o):[],this.forceManualRenderingForInstanceIDShaders&&(this.instancingUniforms=(De=>({u_instanceID:new n.bN(De)}))(o)),(E.includes("TERRAIN")||d.indexOf("symbol")!==-1||d.indexOf("circle")!==-1)&&(this.terrainUniforms=(De=>({u_dem:new n.bN(De),u_dem_prev:new n.bN(De),u_dem_tl:new n.bK(De),u_dem_scale:new n.bM(De),u_dem_tl_prev:new n.bK(De),u_dem_scale_prev:new n.bM(De),u_dem_size:new n.bM(De),u_dem_lerp:new n.bM(De),u_exaggeration:new n.bM(De),u_depth:new n.bN(De),u_depth_size_inv:new n.bK(De),u_depth_range_unpack:new n.bK(De),u_occluder_half_size:new n.bM(De),u_occlusion_depth_offset:new n.bM(De),u_meter_to_dem:new n.bM(De),u_label_plane_matrix_inv:new n.bJ(De)}))(o)),E.includes("GLOBE")&&(this.globeUniforms=(De=>({u_tile_tl_up:new n.bL(De),u_tile_tr_up:new n.bL(De),u_tile_br_up:new n.bL(De),u_tile_bl_up:new n.bL(De),u_tile_up_scale:new n.bM(De)}))(o)),E.includes("FOG")&&(this.fogUniforms=(De=>({u_fog_matrix:new n.bJ(De),u_fog_range:new n.bK(De),u_fog_color:new n.cb(De),u_fog_horizon_blend:new n.bM(De),u_fog_vertical_limit:new n.bK(De),u_fog_temporal_offset:new n.bM(De),u_frustum_tl:new n.bL(De),u_frustum_tr:new n.bL(De),u_frustum_br:new n.bL(De),u_frustum_bl:new n.bL(De),u_globe_pos:new n.bL(De),u_globe_radius:new n.bM(De),u_globe_transition:new n.bM(De),u_is_globe:new n.bN(De),u_viewport:new n.bK(De)}))(o)),E.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(De=>({u_cutoff_params:new n.cb(De)}))(o)),E.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(De=>({u_lighting_ambient_color:new n.bL(De),u_lighting_directional_dir:new n.bL(De),u_lighting_directional_color:new n.bL(De),u_ground_radiance:new n.bL(De)}))(o)),E.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(De=>({u_light_matrix_0:new n.bJ(De),u_light_matrix_1:new n.bJ(De),u_fade_range:new n.bK(De),u_shadow_normal_offset:new n.bL(De),u_shadow_intensity:new n.bM(De),u_shadow_texel_size:new n.bM(De),u_shadow_map_resolution:new n.bM(De),u_shadow_direction:new n.bL(De),u_shadow_bias:new n.bL(De),u_shadowmap_0:new n.bN(De),u_shadowmap_1:new n.bN(De)}))(o))}}setTerrainUniformValues(o,d){if(!this.terrainUniforms)return;const A=this.terrainUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const T in d)A[T]&&A[T].set(this.program,T,d[T])}}setGlobeUniformValues(o,d){if(!this.globeUniforms)return;const A=this.globeUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const T in d)A[T]&&A[T].set(this.program,T,d[T])}}setFogUniformValues(o,d){if(!this.fogUniforms)return;const A=this.fogUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const T in d)A[T].set(this.program,T,d[T])}}setCutoffUniformValues(o,d){if(!this.cutoffUniforms)return;const A=this.cutoffUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const T in d)A[T].set(this.program,T,d[T])}}setLightsUniformValues(o,d){if(!this.lightsUniforms)return;const A=this.lightsUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const T in d)A[T].set(this.program,T,d[T])}}setShadowUniformValues(o,d){if(this.failedToCreate||!this.shadowUniforms)return;const A=this.shadowUniforms;o.program.set(this.program);for(const T in d)A[T].set(this.program,T,d[T])}_drawDebugWireframe(o,d,A,T,S,E,k,Z,K,Y){const ae=o.options.wireframe;if(ae.terrain===!1&&ae.layers2D===!1&&ae.layers3D===!1)return;const re=o.context;if(!(!(!ae.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!ae.layers2D||o._terrain&&o._terrain.renderingToTexture||!Gs.includes(this.name))||!(!ae.layers3D||!nm.includes(this.name))))return;const pe=re.gl,Pe=o.wireframeDebugCache.getLinesFromTrianglesBuffer(o.frameCounter,S,re);if(!Pe)return;const Ce=[...this.fixedDefines];Ce.push("DEBUG_WIREFRAME");const De=o.getOrCreateProgram(this.name,{config:this.configuration,defines:Ce});re.program.set(De.program);const Le=(tt,pt,ut)=>{if(pt[tt]&&ut[tt])for(const ct in pt[tt])ut[tt][ct]&&ut[tt][ct].set(ut.program,ct,pt[tt][ct].current)};K&&K.setUniforms(De.program,re,De.binderUniforms,k,{zoom:Z}),Le("fixedUniforms",this,De),Le("terrainUniforms",this,De),Le("globeUniforms",this,De),Le("fogUniforms",this,De),Le("lightsUniforms",this,De),Le("shadowUniforms",this,De),Pe.bind(),re.setColorMode(new Vr([pe.ONE,pe.ONE_MINUS_SRC_ALPHA,pe.ZERO,pe.ONE],n.al.transparent,[!0,!0,!0,!1])),re.setDepthMode(new ur(d.func===pe.LESS?pe.LEQUAL:d.func,ur.ReadOnly,d.range)),re.setStencilMode(Pr.disabled);const Ke=3*E.primitiveLength*2,it=3*E.primitiveOffset*2*2;if(this.forceManualRenderingForInstanceIDShaders){const tt=Y||1;for(let pt=0;pt<tt;++pt)De.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",pt),pe.drawElements(pe.LINES,Ke,pe.UNSIGNED_SHORT,it)}else Y&&Y>1?pe.drawElementsInstanced(pe.LINES,Ke,pe.UNSIGNED_SHORT,it,Y):pe.drawElements(pe.LINES,Ke,pe.UNSIGNED_SHORT,it);S.bind(),re.program.set(this.program),re.setDepthMode(d),re.setStencilMode(A),re.setColorMode(T)}checkUniforms(o,d,A){if(this.fixedDefines.includes(d)){for(const T of Object.keys(A))if(!A[T].initialized)throw new Error(`Program '${this.name}', from draw '${o}': uniform ${T} not set but required by ${d} being defined`)}}draw(o,d,A,T,S,E,k,Z,K,Y,ae,re,pe,Pe,Ce,De){const Le=o.context,Ke=Le.gl;if(this.failedToCreate)return;Le.program.set(this.program),Le.setDepthMode(A),Le.setStencilMode(T),Le.setColorMode(S),Le.setCullFace(E);for(const pt of Object.keys(this.fixedUniforms))this.fixedUniforms[pt].set(this.program,pt,k[pt]);Pe&&Pe.setUniforms(this.program,Le,this.binderUniforms,re,{zoom:pe});const it={[Ke.POINTS]:1,[Ke.LINES]:2,[Ke.TRIANGLES]:3,[Ke.LINE_STRIP]:1}[d];this.checkUniforms(Z,"RENDER_SHADOWS",this.shadowUniforms);const tt=De&&De>0?1:void 0;for(const pt of ae.get()){const ut=pt.vaos||(pt.vaos={});if((ut[Z]||(ut[Z]=new Kc)).bind(Le,this,K,Pe?Pe.getPaintVertexBuffers():[],Y,pt.vertexOffset,Ce||[],tt),this.forceManualRenderingForInstanceIDShaders){const ct=De||1;for(let dt=0;dt<ct;++dt)this.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",dt),Y?Ke.drawElements(d,pt.primitiveLength*it,Ke.UNSIGNED_SHORT,pt.primitiveOffset*it*2):Ke.drawArrays(d,pt.vertexOffset,pt.vertexLength)}else De&&De>1?Ke.drawElementsInstanced(d,pt.primitiveLength*it,Ke.UNSIGNED_SHORT,pt.primitiveOffset*it*2,De):Y?Ke.drawElements(d,pt.primitiveLength*it,Ke.UNSIGNED_SHORT,pt.primitiveOffset*it*2):Ke.drawArrays(d,pt.vertexOffset,pt.vertexLength);d===Ke.TRIANGLES&&Y&&this._drawDebugWireframe(o,A,T,S,Y,pt,re,pe,Pe,De)}}}function Nf(y,o){const d=Math.pow(2,o.tileID.overscaledZ),A=o.tileSize*Math.pow(2,y.transform.tileZoom)/d,T=A*(o.tileID.canonical.x+o.tileID.wrap*d),S=A*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture?o.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/n.at(o,1,y.transform.tileZoom),u_pixel_coord_upper:[T>>16,S>>16],u_pixel_coord_lower:[65535&T,65535&S]}}const im={terrain:0,flat:1},lo=n.ad.mat4.create(),Yh=(y,o,d,A,T,S,E,k,Z,K,Y,ae,re,pe,Pe,Ce,De,Le)=>{const Ke=o.style.light,it=Ke.properties.get("position"),tt=[it.x,it.y,it.z],pt=n.ad.mat3.create();Ke.properties.get("anchor")==="viewport"&&(n.ad.mat3.fromRotation(pt,-o.transform.angle),n.ad.vec3.transformMat3(tt,tt,pt));const ut=Ke.properties.get("color"),ct=o.transform,dt={u_matrix:y,u_lightpos:tt,u_lightintensity:Ke.properties.get("intensity"),u_lightcolor:[ut.r,ut.g,ut.b],u_vertical_gradient:+d,u_opacity:A,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:lo,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_height_type:im[K],u_base_type:im[Y],u_ao:T,u_edge_radius:S,u_width_scale:E,u_flood_light_color:Pe,u_vertical_scale:Ce,u_flood_light_intensity:De,u_ground_shadow_factor:Le};return ct.projection.name==="globe"&&(dt.u_tile_id=[k.canonical.x,k.canonical.y,1<<k.canonical.z],dt.u_zoom_transition=ae,dt.u_inv_rot_matrix=pe,dt.u_merc_center=re,dt.u_up_dir=ct.projection.upVector(new n.bT(0,0,0),re[0]*n.ai,re[1]*n.ai),dt.u_height_lift=Z),dt},G=(y,o,d,A,T,S)=>({u_matrix:y,u_edge_radius:o,u_width_scale:d,u_vertical_scale:A,u_height_type:im[T],u_base_type:im[S]}),Q=(y,o,d,A,T,S,E,k,Z,K,Y,ae,re,pe,Pe,Ce,De)=>{const Le=Yh(y,o,d,A,T,S,E,k,K,Y,ae,re,pe,Pe,Ce,De,1,[0,0,0]),Ke={u_height_factor:-Math.pow(2,k.overscaledZ)/Z.tileSize/8};return n.l(Le,Nf(o,Z),Ke)},ye=(y,o)=>({u_matrix:y,u_emissive_strength:o}),Me=(y,o,d,A)=>n.l(ye(y,o),Nf(d,A)),We=(y,o,d)=>({u_matrix:y,u_world:d,u_emissive_strength:o}),nt=(y,o,d,A,T)=>n.l(Me(y,o,d,A),{u_world:T}),st=(y,o,d,A,T)=>({u_matrix:y,u_camera_pos:[o[0],o[1],o[2]],u_depth_bias:d,u_height_scale:A,u_reset_depth:T}),ht=(y,o,d,A)=>{const T=n.ai/d.tileSize;return{u_matrix:y,u_camera_to_center_distance:o.getCameraToCenterDistance(A),u_extrude_scale:[o.pixelsToGLUnits[0]/T,o.pixelsToGLUnits[1]/T]}},mt=(y,o,d=1)=>({u_matrix:y,u_color:o.toRenderColor(null),u_overlay:0,u_overlay_scale:d}),St=n.ad.mat4.create(),ea=(y,o,d,A,T,S,E)=>{const k=y.transform,Z=k.projection.name==="globe",K=Z?n.cO(k.zoom,o.canonical)*k._pixelsPerMercatorPixel:n.at(d,1,S),Y={u_matrix:o.projMatrix,u_extrude_scale:K,u_intensity:E,u_inv_rot_matrix:St,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(Z){Y.u_inv_rot_matrix=A,Y.u_merc_center=T,Y.u_tile_id=[o.canonical.x,o.canonical.y,1<<o.canonical.z],Y.u_zoom_transition=n.ag(k.zoom);const ae=T[0]*n.ai,re=T[1]*n.ai;Y.u_up_dir=k.projection.upVector(new n.bT(0,0,0),ae,re)}return Y};function Pt(y,[o,d,A,T],[S,E]){if(S===E)return[0,0,0,0];const k=255*(y-1)/(y*(E-S));return[o*k,d*k,A*k,T*k]}function _a(y,o,[d,A]){return d===A?0:.5/y+(o-d)*(y-1)/(y*(A-d))}const na=(y,o,d,A,T,S,E,k,Z,K,Y,ae,re,pe,Pe,Ce,De,Le,Ke,it,tt)=>({u_matrix:y,u_normalize_matrix:o,u_globe_matrix:d,u_merc_matrix:A,u_grid_matrix:T,u_tl_parent:S,u_scale_parent:K,u_fade_t:Y.mix,u_opacity:Y.opacity*ae.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:ae.paint.get("raster-brightness-min"),u_brightness_high:ae.paint.get("raster-brightness-max"),u_saturation_factor:n.cP(ae.paint.get("raster-saturation")),u_contrast_factor:n.cQ(ae.paint.get("raster-contrast")),u_spin_weights:Ta(ae.paint.get("raster-hue-rotate")),u_perspective_transform:re,u_raster_elevation:pe,u_zoom_transition:E,u_merc_center:k,u_cutoff_params:Z,u_colorization_mix:Pt(n.cR,Ce,Le),u_colorization_offset:_a(n.cR,De,Le),u_color_ramp:Pe,u_texture_offset:[it/(Ke+2*it),Ke/(Ke+2*it)],u_texture_res:[Ke+2*it,Ke+2*it],u_emissive_strength:tt});function Ta(y){y*=Math.PI/180;const o=Math.sin(y),d=Math.cos(y);return[(2*d+1)/3,(-Math.sqrt(3)*o-d+1)/3,(Math.sqrt(3)*o-d+1)/3]}const fa=.05,Rt=(y,o,d,A,T,S,E,k,Z,K,Y,ae)=>({u_matrix:y,u_normalize_matrix:o,u_globe_matrix:d,u_merc_matrix:A,u_grid_matrix:T,u_tl_parent:S,u_scale_parent:K,u_fade_t:Y.mix,u_opacity:Y.opacity,u_image0:0,u_image1:1,u_raster_elevation:ae,u_zoom_transition:E,u_merc_center:k,u_cutoff_params:Z}),aa=(y,o,d,A,T,S,E,k,Z,K)=>({u_particle_texture:y,u_particle_texture_side_len:o,u_tile_offset:d,u_velocity:A,u_color_ramp:S,u_velocity_res:T,u_max_speed:E,u_uv_offset:k,u_data_scale:[255*Z[0],255*Z[1]],u_data_offset:K,u_particle_pos_scale:1.1,u_particle_pos_offset:[fa,fa]}),Za=(y,o,d,A,T,S,E,k,Z,K)=>({u_particle_texture:y,u_particle_texture_side_len:o,u_velocity:d,u_velocity_res:A,u_max_speed:T,u_speed_factor:S,u_reset_rate:E,u_rand_seed:Math.random(),u_uv_offset:k,u_data_scale:[255*Z[0],255*Z[1]],u_data_offset:K,u_particle_pos_scale:1.1,u_particle_pos_offset:[fa,fa]}),Qa=n.ad.mat4.create(),Ka=(y,o,d,A,T,S,E,k,Z,K,Y,ae,re,pe,Pe,Ce,De,Le,Ke,it,tt,pt)=>{const ut=T.transform,ct={u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:ut.getCameraToCenterDistance(Ke),u_rotate_symbol:+d,u_aspect_ratio:ut.width/ut.height,u_fade_change:T.options.fadeDuration?T.symbolFadeChange:1,u_matrix:S,u_label_plane_matrix:E,u_coord_matrix:k,u_is_text:+K,u_elevation_from_sea:Z?1:0,u_pitch_with_map:+A,u_texsize:Y,u_texsize_icon:ae,u_texture:0,u_texture_icon:1,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Qa,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Qa,u_up_vector:[0,-1,0],u_color_adj_mat:it,u_icon_transition:tt||0,u_gamma_scale:A?T.transform.getCameraToCenterDistance(Ke)*Math.cos(T.terrain?0:T.transform._pitch):1,u_device_pixel_ratio:n.q.devicePixelRatio,u_is_halo:1,u_scale_factor:pt||1};return Ke.name==="globe"&&(ct.u_tile_id=[pe.canonical.x,pe.canonical.y,1<<pe.canonical.z],ct.u_zoom_transition=Pe,ct.u_inv_rot_matrix=De,ct.u_merc_center=Ce,ct.u_camera_forward=ut._camera.forward(),ct.u_ecef_origin=n.cS(ut.globeMatrix,pe.toUnwrapped()),ct.u_tile_matrix=Float32Array.from(ut.globeMatrix),ct.u_up_vector=Le),ct},Nr=(y,o,d,A)=>({u_matrix:y,u_emissive_strength:o,u_opacity:d,u_color:A}),Ar=(y,o,d,A,T,S,E,k,Z)=>n.l(function(K,Y,ae,re,pe,Pe){const{width:Ce,height:De}=re.imageManager.getPixelSize(Y),Le=Math.pow(2,Pe.tileID.overscaledZ),Ke=Pe.tileSize*Math.pow(2,re.transform.tileZoom)/Le,it=Ke*(Pe.tileID.canonical.x+Pe.tileID.wrap*Le),tt=Ke*Pe.tileID.canonical.y;return{u_image:0,u_pattern_tl:ae.tl,u_pattern_br:ae.br,u_texsize:[Ce,De],u_pattern_size:ae.displaySize,u_pattern_units_to_pixels:pe?[re.transform.width,-1*re.transform.height]:[1/n.at(Pe,1,re.transform.tileZoom),1/n.at(Pe,1,re.transform.tileZoom)],u_pixel_coord_upper:[it>>16,tt>>16],u_pixel_coord_lower:[65535&it,65535&tt]}}(0,S,E,A,k,Z),{u_matrix:y,u_emissive_strength:o,u_opacity:d}),hn=new Float32Array(n.ad.mat4.identity([])),fr=(y,o,d,A,T,S,E,k,Z,K,Y,ae,re,pe=[0,0,0],Pe)=>{const Ce=T.style.light,De=Ce.properties.get("position"),Le=[-De.x,-De.y,De.z],Ke=n.ad.mat3.create();Ce.properties.get("anchor")==="viewport"&&(n.ad.mat3.fromRotation(Ke,-T.transform.angle),n.ad.vec3.transformMat3(Le,Le,Ke));const it=Y.alphaMode==="MASK",tt=Ce.properties.get("color").toRenderColor(null),pt=re.paint.get("model-ambient-occlusion-intensity"),ut=re.paint.get("model-color").constantOr(n.al.white).toRenderColor(null),ct=re.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:y,u_lighting_matrix:o,u_normal_matrix:d,u_node_matrix:A||hn,u_lightpos:Le,u_lightintensity:Ce.properties.get("intensity"),u_lightcolor:[tt.r,tt.g,tt.b],u_camera_pos:pe,u_opacity:S,u_baseTextureIsAlpha:0,u_alphaMask:+it,u_alphaCutoff:Y.alphaCutoff,u_baseColorFactor:[E.r,E.g,E.b,E.a],u_emissiveFactor:[k[0],k[1],k[2],1],u_metallicFactor:Z,u_roughnessFactor:K,u_baseColorTexture:bi.BaseColor,u_metallicRoughnessTexture:bi.MetallicRoughness,u_normalTexture:bi.Normal,u_occlusionTexture:bi.Occlusion,u_emissionTexture:bi.Emission,u_lutTexture:bi.LUT,u_color_mix:[ut.r,ut.g,ut.b,ct],u_aoIntensity:pt,u_emissive_strength:ae,u_occlusionTextureTransform:Pe||[0,0,0,0]}},Pi=(y,o=hn,d=hn)=>({u_matrix:y,u_instance:o,u_node_matrix:d}),Mi={fillExtrusion:y=>({u_matrix:new n.bJ(y),u_lightpos:new n.bL(y),u_lightintensity:new n.bM(y),u_lightcolor:new n.bL(y),u_vertical_gradient:new n.bM(y),u_opacity:new n.bM(y),u_edge_radius:new n.bM(y),u_width_scale:new n.bM(y),u_ao:new n.bK(y),u_height_type:new n.bN(y),u_base_type:new n.bN(y),u_tile_id:new n.bL(y),u_zoom_transition:new n.bM(y),u_inv_rot_matrix:new n.bJ(y),u_merc_center:new n.bK(y),u_up_dir:new n.bL(y),u_height_lift:new n.bM(y),u_flood_light_color:new n.bL(y),u_vertical_scale:new n.bM(y),u_flood_light_intensity:new n.bM(y),u_ground_shadow_factor:new n.bL(y)}),fillExtrusionDepth:y=>({u_matrix:new n.bJ(y),u_edge_radius:new n.bM(y),u_width_scale:new n.bM(y),u_vertical_scale:new n.bM(y),u_height_type:new n.bN(y),u_base_type:new n.bN(y)}),fillExtrusionPattern:y=>({u_matrix:new n.bJ(y),u_lightpos:new n.bL(y),u_lightintensity:new n.bM(y),u_lightcolor:new n.bL(y),u_vertical_gradient:new n.bM(y),u_height_factor:new n.bM(y),u_edge_radius:new n.bM(y),u_width_scale:new n.bM(y),u_ao:new n.bK(y),u_height_type:new n.bN(y),u_base_type:new n.bN(y),u_tile_id:new n.bL(y),u_zoom_transition:new n.bM(y),u_inv_rot_matrix:new n.bJ(y),u_merc_center:new n.bK(y),u_up_dir:new n.bL(y),u_height_lift:new n.bM(y),u_image:new n.bN(y),u_texsize:new n.bK(y),u_pixel_coord_upper:new n.bK(y),u_pixel_coord_lower:new n.bK(y),u_tile_units_to_pixels:new n.bM(y),u_opacity:new n.bM(y)}),fillExtrusionGroundEffect:y=>({u_matrix:new n.bJ(y),u_opacity:new n.bM(y),u_ao_pass:new n.bM(y),u_meter_to_tile:new n.bM(y),u_ao:new n.bK(y),u_flood_light_intensity:new n.bM(y),u_flood_light_color:new n.bL(y),u_attenuation:new n.bM(y),u_edge_radius:new n.bM(y),u_fb:new n.bN(y),u_fb_size:new n.bM(y),u_dynamic_offset:new n.bM(y)}),fill:y=>({u_matrix:new n.bJ(y),u_emissive_strength:new n.bM(y)}),fillPattern:y=>({u_matrix:new n.bJ(y),u_emissive_strength:new n.bM(y),u_image:new n.bN(y),u_texsize:new n.bK(y),u_pixel_coord_upper:new n.bK(y),u_pixel_coord_lower:new n.bK(y),u_tile_units_to_pixels:new n.bM(y)}),fillOutline:y=>({u_matrix:new n.bJ(y),u_emissive_strength:new n.bM(y),u_world:new n.bK(y)}),fillOutlinePattern:y=>({u_matrix:new n.bJ(y),u_emissive_strength:new n.bM(y),u_world:new n.bK(y),u_image:new n.bN(y),u_texsize:new n.bK(y),u_pixel_coord_upper:new n.bK(y),u_pixel_coord_lower:new n.bK(y),u_tile_units_to_pixels:new n.bM(y)}),elevatedStructures:y=>({u_matrix:new n.bJ(y)}),elevatedStructuresDepthReconstruct:y=>({u_matrix:new n.bJ(y),u_camera_pos:new n.bL(y),u_depth_bias:new n.bM(y),u_height_scale:new n.bM(y),u_reset_depth:new n.bM(y)}),circle:n.cT,collisionBox:y=>({u_matrix:new n.bJ(y),u_camera_to_center_distance:new n.bM(y),u_extrude_scale:new n.bK(y)}),collisionCircle:y=>({u_matrix:new n.bJ(y),u_inv_matrix:new n.bJ(y),u_camera_to_center_distance:new n.bM(y),u_viewport_size:new n.bK(y)}),debug:y=>({u_color:new n.cA(y),u_matrix:new n.bJ(y),u_overlay:new n.bN(y),u_overlay_scale:new n.bM(y)}),clippingMask:y=>({u_matrix:new n.bJ(y)}),heatmap:y=>({u_extrude_scale:new n.bM(y),u_intensity:new n.bM(y),u_matrix:new n.bJ(y),u_inv_rot_matrix:new n.bJ(y),u_merc_center:new n.bK(y),u_tile_id:new n.bL(y),u_zoom_transition:new n.bM(y),u_up_dir:new n.bL(y)}),heatmapTexture:y=>({u_image:new n.bN(y),u_color_ramp:new n.bN(y),u_opacity:new n.bM(y)}),hillshade:y=>({u_matrix:new n.bJ(y),u_image:new n.bN(y),u_latrange:new n.bK(y),u_light:new n.bK(y),u_shadow:new n.cA(y),u_highlight:new n.cA(y),u_emissive_strength:new n.bM(y),u_accent:new n.cA(y)}),hillshadePrepare:y=>({u_matrix:new n.bJ(y),u_image:new n.bN(y),u_dimension:new n.bK(y),u_zoom:new n.bM(y)}),line:n.cU,linePattern:n.cV,raster:y=>({u_matrix:new n.bJ(y),u_normalize_matrix:new n.bJ(y),u_globe_matrix:new n.bJ(y),u_merc_matrix:new n.bJ(y),u_grid_matrix:new n.cB(y),u_tl_parent:new n.bK(y),u_scale_parent:new n.bM(y),u_fade_t:new n.bM(y),u_opacity:new n.bM(y),u_image0:new n.bN(y),u_image1:new n.bN(y),u_brightness_low:new n.bM(y),u_brightness_high:new n.bM(y),u_saturation_factor:new n.bM(y),u_contrast_factor:new n.bM(y),u_spin_weights:new n.bL(y),u_perspective_transform:new n.bK(y),u_raster_elevation:new n.bM(y),u_zoom_transition:new n.bM(y),u_merc_center:new n.bK(y),u_cutoff_params:new n.cb(y),u_colorization_mix:new n.cb(y),u_colorization_offset:new n.bM(y),u_color_ramp:new n.bN(y),u_texture_offset:new n.bK(y),u_texture_res:new n.bK(y),u_emissive_strength:new n.bM(y)}),rasterParticle:y=>({u_matrix:new n.bJ(y),u_normalize_matrix:new n.bJ(y),u_globe_matrix:new n.bJ(y),u_merc_matrix:new n.bJ(y),u_grid_matrix:new n.cB(y),u_tl_parent:new n.bK(y),u_scale_parent:new n.bM(y),u_fade_t:new n.bM(y),u_opacity:new n.bM(y),u_image0:new n.bN(y),u_image1:new n.bN(y),u_raster_elevation:new n.bM(y),u_zoom_transition:new n.bM(y),u_merc_center:new n.bK(y),u_cutoff_params:new n.cb(y)}),rasterParticleTexture:y=>({u_texture:new n.bN(y),u_opacity:new n.bM(y)}),rasterParticleDraw:y=>({u_particle_texture:new n.bN(y),u_particle_texture_side_len:new n.bM(y),u_tile_offset:new n.bK(y),u_velocity:new n.bN(y),u_color_ramp:new n.bN(y),u_velocity_res:new n.bK(y),u_max_speed:new n.bM(y),u_uv_offset:new n.bK(y),u_data_scale:new n.bK(y),u_data_offset:new n.bM(y),u_particle_pos_scale:new n.bM(y),u_particle_pos_offset:new n.bK(y)}),rasterParticleUpdate:y=>({u_particle_texture:new n.bN(y),u_particle_texture_side_len:new n.bM(y),u_velocity:new n.bN(y),u_velocity_res:new n.bK(y),u_max_speed:new n.bM(y),u_speed_factor:new n.bM(y),u_reset_rate:new n.bM(y),u_rand_seed:new n.bM(y),u_uv_offset:new n.bK(y),u_data_scale:new n.bK(y),u_data_offset:new n.bM(y),u_particle_pos_scale:new n.bM(y),u_particle_pos_offset:new n.bK(y)}),symbol:y=>({u_is_size_zoom_constant:new n.bN(y),u_is_size_feature_constant:new n.bN(y),u_size_t:new n.bM(y),u_size:new n.bM(y),u_camera_to_center_distance:new n.bM(y),u_rotate_symbol:new n.bN(y),u_aspect_ratio:new n.bM(y),u_fade_change:new n.bM(y),u_matrix:new n.bJ(y),u_label_plane_matrix:new n.bJ(y),u_coord_matrix:new n.bJ(y),u_is_text:new n.bN(y),u_elevation_from_sea:new n.bN(y),u_pitch_with_map:new n.bN(y),u_texsize:new n.bK(y),u_texsize_icon:new n.bK(y),u_texture:new n.bN(y),u_texture_icon:new n.bN(y),u_gamma_scale:new n.bM(y),u_device_pixel_ratio:new n.bM(y),u_tile_id:new n.bL(y),u_zoom_transition:new n.bM(y),u_inv_rot_matrix:new n.bJ(y),u_merc_center:new n.bK(y),u_camera_forward:new n.bL(y),u_tile_matrix:new n.bJ(y),u_up_vector:new n.bL(y),u_ecef_origin:new n.bL(y),u_is_halo:new n.bN(y),u_icon_transition:new n.bM(y),u_color_adj_mat:new n.bJ(y),u_scale_factor:new n.bM(y)}),background:y=>({u_matrix:new n.bJ(y),u_emissive_strength:new n.bM(y),u_opacity:new n.bM(y),u_color:new n.cA(y)}),backgroundPattern:y=>({u_matrix:new n.bJ(y),u_emissive_strength:new n.bM(y),u_opacity:new n.bM(y),u_image:new n.bN(y),u_pattern_tl:new n.bK(y),u_pattern_br:new n.bK(y),u_texsize:new n.bK(y),u_pattern_size:new n.bK(y),u_pixel_coord_upper:new n.bK(y),u_pixel_coord_lower:new n.bK(y),u_pattern_units_to_pixels:new n.bK(y)}),terrainRaster:y=>({u_matrix:new n.bJ(y),u_image0:new n.bN(y),u_skirt_height:new n.bM(y),u_ground_shadow_factor:new n.bL(y)}),skybox:y=>({u_matrix:new n.bJ(y),u_sun_direction:new n.bL(y),u_cubemap:new n.bN(y),u_opacity:new n.bM(y),u_temporal_offset:new n.bM(y)}),skyboxGradient:y=>({u_matrix:new n.bJ(y),u_color_ramp:new n.bN(y),u_center_direction:new n.bL(y),u_radius:new n.bM(y),u_opacity:new n.bM(y),u_temporal_offset:new n.bM(y)}),skyboxCapture:y=>({u_matrix_3f:new n.cB(y),u_sun_direction:new n.bL(y),u_sun_intensity:new n.bM(y),u_color_tint_r:new n.cb(y),u_color_tint_m:new n.cb(y),u_luminance:new n.bM(y)}),globeRaster:y=>({u_proj_matrix:new n.bJ(y),u_globe_matrix:new n.bJ(y),u_normalize_matrix:new n.bJ(y),u_merc_matrix:new n.bJ(y),u_zoom_transition:new n.bM(y),u_merc_center:new n.bK(y),u_image0:new n.bN(y),u_grid_matrix:new n.cB(y),u_skirt_height:new n.bM(y),u_far_z_cutoff:new n.bM(y),u_frustum_tl:new n.bL(y),u_frustum_tr:new n.bL(y),u_frustum_br:new n.bL(y),u_frustum_bl:new n.bL(y),u_globe_pos:new n.bL(y),u_globe_radius:new n.bM(y),u_viewport:new n.bK(y)}),globeAtmosphere:y=>({u_frustum_tl:new n.bL(y),u_frustum_tr:new n.bL(y),u_frustum_br:new n.bL(y),u_frustum_bl:new n.bL(y),u_horizon:new n.bM(y),u_transition:new n.bM(y),u_fadeout_range:new n.bM(y),u_color:new n.cb(y),u_high_color:new n.cb(y),u_space_color:new n.cb(y),u_temporal_offset:new n.bM(y),u_horizon_angle:new n.bM(y)}),model:y=>({u_matrix:new n.bJ(y),u_lighting_matrix:new n.bJ(y),u_normal_matrix:new n.bJ(y),u_node_matrix:new n.bJ(y),u_lightpos:new n.bL(y),u_lightintensity:new n.bM(y),u_lightcolor:new n.bL(y),u_camera_pos:new n.bL(y),u_opacity:new n.bM(y),u_baseColorFactor:new n.cb(y),u_emissiveFactor:new n.cb(y),u_metallicFactor:new n.bM(y),u_roughnessFactor:new n.bM(y),u_baseTextureIsAlpha:new n.bN(y),u_alphaMask:new n.bN(y),u_alphaCutoff:new n.bM(y),u_baseColorTexture:new n.bN(y),u_metallicRoughnessTexture:new n.bN(y),u_normalTexture:new n.bN(y),u_occlusionTexture:new n.bN(y),u_emissionTexture:new n.bN(y),u_lutTexture:new n.bN(y),u_color_mix:new n.cb(y),u_aoIntensity:new n.bM(y),u_emissive_strength:new n.bM(y),u_occlusionTextureTransform:new n.cb(y)}),modelDepth:y=>({u_matrix:new n.bJ(y),u_instance:new n.bJ(y),u_node_matrix:new n.bJ(y)}),groundShadow:y=>({u_matrix:new n.bJ(y),u_ground_shadow_factor:new n.bL(y)}),stars:y=>({u_matrix:new n.bJ(y),u_up:new n.bL(y),u_right:new n.bL(y),u_intensity_multiplier:new n.bM(y)}),snowParticle:y=>({u_modelview:new n.bJ(y),u_projection:new n.bJ(y),u_time:new n.bM(y),u_cam_pos:new n.bL(y),u_velocityConeAperture:new n.bM(y),u_velocity:new n.bM(y),u_horizontalOscillationRadius:new n.bM(y),u_horizontalOscillationRate:new n.bM(y),u_boxSize:new n.bM(y),u_billboardSize:new n.bM(y),u_simpleShapeParameters:new n.bK(y),u_screenSize:new n.bK(y),u_thinningCenterPos:new n.bK(y),u_thinningShape:new n.bL(y),u_thinningAffectedRatio:new n.bM(y),u_thinningParticleOffset:new n.bM(y),u_particleColor:new n.cb(y),u_direction:new n.bL(y)}),rainParticle:y=>({u_modelview:new n.bJ(y),u_projection:new n.bJ(y),u_time:new n.bM(y),u_cam_pos:new n.bL(y),u_texScreen:new n.bN(y),u_velocityConeAperture:new n.bM(y),u_velocity:new n.bM(y),u_boxSize:new n.bM(y),u_rainDropletSize:new n.bK(y),u_distortionStrength:new n.bM(y),u_rainDirection:new n.bL(y),u_color:new n.cb(y),u_screenSize:new n.bK(y),u_thinningCenterPos:new n.bK(y),u_thinningShape:new n.bL(y),u_thinningAffectedRatio:new n.bM(y),u_thinningParticleOffset:new n.bM(y),u_shapeDirectionalPower:new n.bM(y),u_shapeNormalPower:new n.bM(y),u_mode:new n.bM(y)}),vignette:y=>({u_vignetteShape:new n.bL(y),u_vignetteColor:new n.cb(y)}),occlusion:y=>({u_matrix:new n.bJ(y),u_anchorPos:new n.bL(y),u_screenSizePx:new n.bK(y),u_occluderSizePx:new n.bK(y),u_color:new n.cb(y)})};class Yn{constructor(o,d,A,T){this.id=Yn.uniqueIdxCounter,Yn.uniqueIdxCounter++,this.context=o;const S=o.gl;this.buffer=S.createBuffer(),this.dynamicDraw=!!A,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),S.bufferData(S.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||T||d.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){this.id=Yn.uniqueIdxCounter,Yn.uniqueIdxCounter++;const d=this.context.gl;this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}Yn.uniqueIdxCounter=0;const ui={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class as{constructor(o,d,A,T,S,E){this.length=d.length,this.attributes=A,this.itemSize=d.bytesPerElement,this.dynamicDraw=T,this.instanceCount=E,this.context=o;const k=o.gl;this.buffer=k.createBuffer(),o.bindVertexBuffer.set(this.buffer),k.bufferData(k.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||S||d.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,d){for(let A=0;A<this.attributes.length;A++){const T=d.attributes[this.attributes[A].name];T!==void 0&&o.enableVertexAttribArray(T)}}setVertexAttribPointers(o,d,A){for(let T=0;T<this.attributes.length;T++){const S=this.attributes[T],E=d.attributes[S.name];E!==void 0&&o.vertexAttribPointer(E,S.components,o[ui[S.type]],!1,this.itemSize,S.offset+this.itemSize*(A||0))}}setVertexAttribDivisor(o,d,A){for(let T=0;T<this.attributes.length;T++){const S=d.attributes[this.attributes[T].name];S!==void 0&&this.instanceCount&&this.instanceCount>0&&o.vertexAttribDivisor(S,A)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Hn{constructor(o,d,A,T,S){this.context=o,this.width=d,this.height=A;const E=this.framebuffer=o.gl.createFramebuffer();T&&(this.colorAttachment=new ll(o,E)),S&&(this.depthAttachmentType=S,this.depthAttachment=S==="renderbuffer"?new Wh(o,E):new jd(o,E))}destroy(){const o=this.context.gl;if(this.colorAttachment){const d=this.colorAttachment.get();d&&o.deleteTexture(d)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const d=this.depthAttachment.get();d&&o.deleteRenderbuffer(d)}else{const d=this.depthAttachment.get();d&&o.deleteTexture(d)}o.deleteFramebuffer(this.framebuffer)}}class xn{constructor(o,d){this.gl=o,this.clearColor=new Gh(this),this.clearDepth=new sl(this),this.clearStencil=new _l(this),this.colorMask=new Wc(this),this.depthMask=new Nu(this),this.stencilMask=new Ju(this),this.stencilFunc=new Sc(this),this.stencilOp=new tm(this),this.stencilTest=new Zh(this),this.depthRange=new qh(this),this.depthTest=new ol(this),this.depthFunc=new ts(this),this.blend=new xi(this),this.blendFunc=new lu(this),this.blendColor=new Ou(this),this.blendEquation=new op(this),this.cullFace=new bc(this),this.cullFaceSide=new xf(this),this.frontFace=new Ud(this),this.program=new Hh(this),this.activeTexture=new $h(this),this.viewport=new Bd(this),this.bindFramebuffer=new Pf(this),this.bindRenderbuffer=new eg(this),this.bindTexture=new vh(this),this.bindVertexBuffer=new Hg(this),this.bindElementBuffer=new xc(this),this.bindVertexArrayOES=new Qu(this),this.pixelStoreUnpack=new Vu(this),this.pixelStoreUnpackPremultiplyAlpha=new $g(this),this.pixelStoreUnpackFlipY=new Kh(this),this.options=d?Object.assign({},d):{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=o.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=o.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=o.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.forceManualRenderingForInstanceIDShaders=d&&!!d.forceManualRenderingForInstanceIDShaders||this.renderer&&this.renderer.indexOf("PowerVR")!==-1,this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=o.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=o.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=o.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),this.maxPointSize=o.getParameter(o.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,d,A){return new Yn(this,o,d,A)}createVertexBuffer(o,d,A,T,S){return new as(this,o,d,A,T,S)}createRenderbuffer(o,d,A){const T=this.gl,S=T.createRenderbuffer();return this.bindRenderbuffer.set(S),T.renderbufferStorage(T.RENDERBUFFER,o,d,A),this.bindRenderbuffer.set(null),S}createFramebuffer(o,d,A,T){return new Hn(this,o,d,A,T)}clear({color:o,depth:d,stencil:A,colorMask:T}){const S=this.gl;let E=0;o&&(E|=S.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set(T||[!0,!0,!0,!0])),d!==void 0&&(E|=S.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),A!==void 0&&(E|=S.STENCIL_BUFFER_BIT,this.clearStencil.set(A),this.stencilMask.set(255)),S.clear(E)}setCullFace(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){n.bn(o.blendFunction,Vr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor),o.blendEquation?this.blendEquation.set(o.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(o.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}let vs;function Wi(y,o,d,A,T,S,E){const k=y.context,Z=k.gl,K=y.transform,Y=y.getOrCreateProgram("collisionBox"),ae=[];let re=0,pe=0;for(let tt=0;tt<A.length;tt++){const pt=A[tt],ut=o.getTile(pt),ct=ut.getBucket(d);if(!ct)continue;const dt=Bh(pt,ct,K);let vt=dt;T[0]===0&&T[1]===0||(vt=y.translatePosMatrix(dt,ut,T,S));const Tt=E?ct.textCollisionBox:ct.iconCollisionBox,Qt=ct.collisionCircleArray;if(Qt.length>0){const kt=n.ad.mat4.create(),ra=vt;n.ad.mat4.mul(kt,ct.placementInvProjMatrix,K.glCoordMatrix),n.ad.mat4.mul(kt,kt,ct.placementViewportMatrix),ae.push({circleArray:Qt,circleOffset:pe,transform:ra,invTransform:kt,projection:ct.getProjection()}),re+=Qt.length/4,pe=re}Tt&&(y.terrain&&y.terrain.setupElevationDraw(ut,Y),Y.draw(y,Z.LINES,ur.disabled,Pr.disabled,y.colorModeForRenderPass(),Sr.disabled,ht(vt,K,ut,ct.getProjection()),d.id,Tt.layoutVertexBuffer,Tt.indexBuffer,Tt.segments,null,K.zoom,null,[Tt.collisionVertexBuffer,Tt.collisionVertexBufferExt]))}if(!E||!ae.length)return;const Pe=y.getOrCreateProgram("collisionCircle"),Ce=new n.cW;Ce.resize(4*re),Ce._trim();let De=0;for(const tt of ae)for(let pt=0;pt<tt.circleArray.length/4;pt++){const ut=4*pt,ct=tt.circleArray[ut+0],dt=tt.circleArray[ut+1],vt=tt.circleArray[ut+2],Tt=tt.circleArray[ut+3];Ce.emplace(De++,ct,dt,vt,Tt,0),Ce.emplace(De++,ct,dt,vt,Tt,1),Ce.emplace(De++,ct,dt,vt,Tt,2),Ce.emplace(De++,ct,dt,vt,Tt,3)}(!vs||vs.length<2*re)&&(vs=function(tt){const pt=2*tt,ut=new n.aV;ut.resize(pt),ut._trim();for(let ct=0;ct<pt;ct++){const dt=6*ct;ut.uint16[dt+0]=4*ct+0,ut.uint16[dt+1]=4*ct+1,ut.uint16[dt+2]=4*ct+2,ut.uint16[dt+3]=4*ct+2,ut.uint16[dt+4]=4*ct+3,ut.uint16[dt+5]=4*ct+0}return ut}(re));const Le=k.createIndexBuffer(vs,!0),Ke=k.createVertexBuffer(Ce,n.cX.members,!0);for(const tt of ae){const pt={u_matrix:tt.transform,u_inv_matrix:tt.invTransform,u_camera_to_center_distance:(it=K).getCameraToCenterDistance(tt.projection),u_viewport_size:[it.width,it.height]};Pe.draw(y,Z.TRIANGLES,ur.disabled,Pr.disabled,y.colorModeForRenderPass(),Sr.disabled,pt,d.id,Ke,Le,n.b8.simpleSegment(0,2*tt.circleOffset,tt.circleArray.length,tt.circleArray.length/2),null,K.zoom)}var it;Ke.destroy(),Le.destroy()}const $n=n.ad.mat4.create();function wo(y){const o=y._camera.getWorldToCamera(y.worldSize,1),d=n.ad.mat4.multiply([],o,y.globeMatrix);n.ad.mat4.invert(d,d);const A=[0,0,0],T=[0,1,0,0];return n.ad.vec4.transformMat4(T,T,d),A[0]=T[0],A[1]=T[1],A[2]=T[2],n.ad.vec3.normalize(A,A),A}function Ei({width:y,height:o,anchor:d,textOffset:A,textScale:T},S){const{horizontalAlign:E,verticalAlign:k}=n.bD(d),Z=-(E-.5)*y,K=-(k-.5)*o,Y=n.bC(d,A);return new n.P((Z/T+Y[0])*S,(K/T+Y[1])*S)}function ps(y,o,d,A,T,S,E,k,Z,K,Y){const ae=y.text.placedSymbolArray,re=y.text.dynamicLayoutVertexArray,pe=y.icon.dynamicLayoutVertexArray,Pe={},Ce=y.getProjection(),De=$o(k,Ce,S),Le=S.elevation,Ke=Ce.upVectorScale(k.canonical,S.center.lat,S.worldSize).metersToTile;re.clear();for(let it=0;it<ae.length;it++){const tt=ae.get(it),{tileAnchorX:pt,tileAnchorY:ut,numGlyphs:ct}=tt,dt=tt.hidden||!tt.crossTileID||y.allowVerticalPlacement&&!tt.placedOrientation?null:A[tt.crossTileID];if(dt){let vt=0,Tt=0,Qt=0;if(Le){const ta=Le?Le.getAtTileOffset(k,pt,ut):0,[da,Xt,pa]=Ce.upVector(k.canonical,pt,ut);vt=ta*da*Ke,Tt=ta*Xt*Ke,Qt=ta*pa*Ke}let[kt,ra,ca,xa]=yo(tt.projectedAnchorX+vt,tt.projectedAnchorY+Tt,tt.projectedAnchorZ+Qt,d?De:E);const Ft=Od(S.getCameraToCenterDistance(Ce),xa);let sa=T.evaluateSizeForFeature(y.textSizeData,K,tt)*Ft/n.bw;d&&(sa*=y.tilePixelRatio/Z);const zt=Ei(dt,sa);d?({x:kt,y:ra,z:ca}=Ce.projectTilePoint(pt+zt.x,ut+zt.y,k.canonical),[kt,ra,ca]=yo(kt+vt,ra+Tt,ca+Qt,E)):(o&&zt._rotate(-S.angle),kt+=zt.x,ra+=zt.y,ca=0);const oa=y.allowVerticalPlacement&&tt.placedOrientation===n.bq.vertical?Math.PI/2:0;for(let ta=0;ta<ct;ta++)n.bt(re,kt,ra,ca,oa);Y&&tt.associatedIconIndex>=0&&(Pe[tt.associatedIconIndex]={x:kt,y:ra,z:ca,angle:oa})}else nl(ct,re)}if(Y){pe.clear();const it=y.icon.placedSymbolArray;for(let tt=0;tt<it.length;tt++){const pt=it.get(tt),{numGlyphs:ut}=pt,ct=Pe[tt];if(pt.hidden||!ct)nl(ut,pe);else{const{x:dt,y:vt,z:Tt,angle:Qt}=ct;for(let kt=0;kt<ut;kt++)n.bt(pe,dt,vt,Tt,Qt)}}y.icon.dynamicLayoutVertexBuffer.updateData(pe)}y.text.dynamicLayoutVertexBuffer.updateData(re)}function Pn(y,o,d,A,T,S,E={}){const k=d.paint.get("icon-translate"),Z=d.paint.get("text-translate"),K=d.paint.get("icon-translate-anchor"),Y=d.paint.get("text-translate-anchor"),ae=d.layout.get("icon-rotation-alignment"),re=d.layout.get("text-rotation-alignment"),pe=d.layout.get("icon-pitch-alignment"),Pe=d.layout.get("text-pitch-alignment"),Ce=d.layout.get("icon-keep-upright"),De=d.layout.get("text-keep-upright"),Le=d.paint.get("icon-color-saturation"),Ke=d.paint.get("icon-color-contrast"),it=d.paint.get("icon-color-brightness-min"),tt=d.paint.get("icon-color-brightness-max"),pt=d.layout.get("symbol-elevation-reference")==="sea",ut=y.context,ct=ut.gl,dt=y.transform,vt=ae==="map",Tt=re==="map",Qt=pe==="map",kt=Pe==="map",ra=d.layout.get("symbol-sort-key").constantOr(1)!==void 0;let ca=!1;const xa=y.depthModeForSublayer(0,ur.ReadOnly),Ft=[n.av(dt.center.lng),n.aC(dt.center.lat)],sa=d.layout.get("text-variable-anchor"),zt=dt.projection.name==="globe",oa=[],ta=[0,-1,0];for(const da of A){const Xt=o.getTile(da),pa=Xt.getBucket(d);if(!pa||pa.projection.name==="mercator"&&zt||pa.fullyClipped)continue;const La=pa.projection.name==="globe",Fa=La?n.ag(dt.zoom):0,Va=$o(da,pa.getProjection(),dt),cr=dt.calculatePixelsToTileUnitsMatrix(Xt),jr=sa&&pa.hasTextData(),vr=pa.hasIconTextFit()&&jr&&pa.hasIconData(),Ir=pa.getProjection().createInversionMatrix(dt,da.canonical),Or=Xn=>{dt.depthOcclusionForSymbolsAndCircles&&(d.hasInitialOcclusionOpacityProperties||y.terrain)&&(Xn.push("DEPTH_D24"),Xn.push("DEPTH_OCCLUSION"))},zr=()=>{const Xn=vt&&d.layout.get("symbol-placement")!=="point",An=[];Or(An);const kn=Xn||vr,ns=d.paint.get("icon-image-cross-fade").constantOr(0);y.terrainRenderModeElevated()&&Qt&&An.push("PITCH_WITH_MAP_TERRAIN"),La&&(An.push("PROJECTION_GLOBE_VIEW"),kn&&An.push("PROJECTED_POS_ON_VIEWPORT")),ns>0&&An.push("ICON_TRANSITION"),pa.icon.zOffsetVertexBuffer&&An.push("Z_OFFSET"),Le===0&&Ke===0&&it===0&&tt===1||An.push("COLOR_ADJUSTMENT"),pa.sdfIcons&&An.push("RENDER_SDF");const _s=pa.icon.programConfigurations.get(d.id),co=y.getOrCreateProgram("symbol",{config:_s,defines:An}),ao=Xt.imageAtlasTexture?Xt.imageAtlasTexture.size:[0,0],Ro=pa.iconSizeData,Vn=n.bp(Ro,dt.zoom),di=Qt||dt.pitch!==0,Bn=Os(Va,Xt.tileID.canonical,Qt,vt,dt,pa.getProjection(),cr),fi=Di(Va,Xt.tileID.canonical,Qt,vt,dt,pa.getProjection(),cr),To=y.translatePosMatrix(fi,Xt,k,K,!0),Oi=y.translatePosMatrix(Va,Xt,k,K),ms=kn?$n:Bn,zc=vt&&!Qt&&!Xn;let Jo=ta;!zt&&!dt.mercatorFromTransition||vt||(Jo=wo(dt));const du=La?Jo:ta,Gl=d.getColorAdjustmentMatrix(Le,Ke,it,tt),sc=Ka(Ro.kind,Vn,zc,Qt,y,Oi,ms,To,pt,!1,ao,[0,0],!0,da,Fa,Ft,Ir,du,pa.getProjection(),Gl,ns),bl=Xt.imageAtlasTexture?Xt.imageAtlasTexture:null,Jd=d.layout.get("icon-size").constantOr(0)!==1||pa.iconsNeedLinear,Co=pa.sdfIcons||y.options.rotating||y.options.zooming||Jd||di?ct.LINEAR:ct.NEAREST,Vh=pa.sdfIcons&&d.paint.get("icon-halo-width").constantOr(1)!==0,Zl=y.terrain&&Qt&&Xn?n.ad.mat4.invert(n.ad.mat4.create(),Bn):$n;if(Xn&&pa.icon){const Cp=dt.elevation,pm=Cp?Cp.getAtTileOffsetFunc(da,dt.center.lat,dt.worldSize,pa.getProjection()):null,ty=Ki(Va,Xt.tileID.canonical,Qt,vt,dt,pa.getProjection(),cr);yc(pa,Va,y,!1,ty,fi,Qt,Ce,pm,da)}return{program:co,buffers:pa.icon,uniformValues:sc,atlasTexture:bl,atlasTextureIcon:null,atlasInterpolation:Co,atlasInterpolationIcon:null,isSDF:pa.sdfIcons,hasHalo:Vh,tile:Xt,labelPlaneMatrixInv:Zl}},Gr=()=>{const Xn=Tt&&d.layout.get("symbol-placement")!=="point",An=[],kn=Xn||sa||vr;y.terrainRenderModeElevated()&&kt&&An.push("PITCH_WITH_MAP_TERRAIN"),La&&(An.push("PROJECTION_GLOBE_VIEW"),kn&&An.push("PROJECTED_POS_ON_VIEWPORT")),pa.text.zOffsetVertexBuffer&&An.push("Z_OFFSET"),pa.iconsInText&&An.push("RENDER_TEXT_AND_SYMBOL"),An.push("RENDER_SDF"),Or(An);const ns=pa.text.programConfigurations.get(d.id),_s=y.getOrCreateProgram("symbol",{config:ns,defines:An});let co,ao=[0,0],Ro=null;const Vn=pa.textSizeData;pa.iconsInText&&(ao=Xt.imageAtlasTexture?Xt.imageAtlasTexture.size:[0,0],Ro=Xt.imageAtlasTexture?Xt.imageAtlasTexture:null,co=kt||dt.pitch!==0||y.options.rotating||y.options.zooming||Vn.kind==="composite"||Vn.kind==="camera"?ct.LINEAR:ct.NEAREST);const di=Xt.glyphAtlasTexture?Xt.glyphAtlasTexture.size:[0,0],Bn=d.layout.get("text-size-scale-range"),fi=n.ay(y.scaleFactor,Bn[0],Bn[1]),To=n.bp(Vn,dt.zoom,fi),Oi=Os(Va,Xt.tileID.canonical,kt,Tt,dt,pa.getProjection(),cr),ms=Di(Va,Xt.tileID.canonical,kt,Tt,dt,pa.getProjection(),cr),zc=y.translatePosMatrix(ms,Xt,Z,Y,!0),Jo=y.translatePosMatrix(Va,Xt,Z,Y),du=kn?$n:Oi,Gl=Tt&&!kt&&!Xn;let sc=ta;!zt&&!dt.mercatorFromTransition||Tt||(sc=wo(dt));const bl=Ka(Vn.kind,To,Gl,kt,y,Jo,du,zc,pt,!0,di,ao,!0,da,Fa,Ft,Ir,La?sc:ta,pa.getProjection(),null,null,fi),Jd=Xt.glyphAtlasTexture?Xt.glyphAtlasTexture:null,Co=ct.LINEAR,Vh=d.paint.get("text-halo-width").constantOr(1)!==0,Zl=y.terrain&&kt&&Xn?n.ad.mat4.invert(n.ad.mat4.create(),Oi):$n;if(Xn&&pa.text){const Cp=dt.elevation,pm=Cp?Cp.getAtTileOffsetFunc(da,dt.center.lat,dt.worldSize,pa.getProjection()):null,ty=Ki(Va,Xt.tileID.canonical,kt,Tt,dt,pa.getProjection(),cr);yc(pa,Va,y,!0,ty,ms,kt,De,pm,da)}return{program:_s,buffers:pa.text,uniformValues:bl,atlasTexture:Jd,atlasTextureIcon:Ro,atlasInterpolation:Co,atlasInterpolationIcon:co,isSDF:!0,hasHalo:Vh,tile:Xt,labelPlaneMatrixInv:Zl}},Ur=pa.icon.segments.get().length,mr=pa.text.segments.get().length,fn=Ur&&!E.onlyText?zr():null,Er=mr&&!E.onlyIcons?Gr():null,rr=d.paint.get("icon-opacity").constantOr(1),pn=d.paint.get("text-opacity").constantOr(1);if(ra&&pa.canOverlap){ca=!0;const Xn=rr&&!E.onlyText?pa.icon.segments.get():[],An=pn&&!E.onlyIcons?pa.text.segments.get():[];for(const kn of Xn)oa.push({segments:new n.b8([kn]),sortKey:kn.sortKey,state:fn});for(const kn of An)oa.push({segments:new n.b8([kn]),sortKey:kn.sortKey,state:Er})}else E.onlyText||oa.push({segments:rr?pa.icon.segments:new n.b8([]),sortKey:0,state:fn}),E.onlyIcons||oa.push({segments:pn?pa.text.segments:new n.b8([]),sortKey:0,state:Er})}ca&&oa.sort((da,Xt)=>da.sortKey-Xt.sortKey);for(const da of oa){const Xt=da.state;if(Xt)if(y.terrain?y.terrain.setupElevationDraw(Xt.tile,Xt.program,{useDepthForOcclusion:dt.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:Xt.labelPlaneMatrixInv}):y.setupDepthForOcclusion(dt.depthOcclusionForSymbolsAndCircles,Xt.program),ut.activeTexture.set(ct.TEXTURE0),Xt.atlasTexture&&Xt.atlasTexture.bind(Xt.atlasInterpolation,ct.CLAMP_TO_EDGE,!0),Xt.atlasTextureIcon&&(ut.activeTexture.set(ct.TEXTURE1),Xt.atlasTextureIcon&&Xt.atlasTextureIcon.bind(Xt.atlasInterpolationIcon,ct.CLAMP_TO_EDGE,!0)),y.uploadCommonLightUniforms(y.context,Xt.program),Xt.hasHalo){const pa=Xt.uniformValues;pa.u_is_halo=1,qi(Xt.buffers,da.segments,d,y,Xt.program,xa,T,S,pa,2),pa.u_is_halo=0}else{if(Xt.isSDF){const pa=Xt.uniformValues;Xt.hasHalo&&(pa.u_is_halo=1,qi(Xt.buffers,da.segments,d,y,Xt.program,xa,T,S,pa,1)),pa.u_is_halo=0}qi(Xt.buffers,da.segments,d,y,Xt.program,xa,T,S,Xt.uniformValues,1)}}}function qi(y,o,d,A,T,S,E,k,Z,K){const Y=[y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer,y.iconTransitioningVertexBuffer,y.globeExtVertexBuffer,y.zOffsetVertexBuffer];T.draw(A,A.context.gl.TRIANGLES,S,E,k,Sr.disabled,Z,d.id,y.layoutVertexBuffer,y.indexBuffer,o,d.paint,A.transform.zoom,y.programConfigurations.get(d.id),Y,K)}function Qs(y,o){const d=1<<y.canonical.z,A=(o.x*d-y.canonical.x-y.wrap*d)*n.ai,T=(o.y*d-y.canonical.y)*n.ai,S=n.d5(o.z,o.y);return n.ad.vec3.fromValues(A,T,S)}function Oo(y,o,d,A,T){if(!d.layout||d.layout.get("fill-elevation-reference")==="none")return;const S=y.context.gl,E=new ur(y.context.gl.LEQUAL,ur.ReadWrite,y.depthRangeFor3D),k=new ur(y.context.gl.GREATER,ur.ReadWrite,y.depthRangeFor3D),Z=function(pe){const Pe=n.c4(pe.pitch);let Ce=.01;return pe.isOrthographic&&(Ce=n.ah(1e-4,Ce,n.c9(Pe>=za?1:Pe/za))),2*Ce}(y.transform),K=y.transform.getFreeCameraOptions().position,Y="elevatedStructuresDepthReconstruct",ae=y.getOrCreateProgram(Y,{defines:["DEPTH_RECONSTRUCTION"]}),re=y.getOrCreateProgram(Y);for(const pe of A){const Pe=o.getTile(pe),Ce=Pe.getBucket(d);if(!Ce)continue;const De=Ce.elevatedStructures;if(!De)continue;const Le=Ce.elevationBufferData.heightRange,Ke=Qs(pe.toUnwrapped(),K),it=y.translatePosMatrix(pe.projMatrix,Pe,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));let tt,pt,ut,ct;if(T==="initialize"){if(!Le||Le.min>=1||De.depthSegments.segments[0].primitiveLength===0)continue;tt=st(it,Ke,Z,1,0),pt=E,ut=De.depthSegments,ct=ae}else if(T==="reset"){if(!Le||Le.min>=0||De.maskSegments.segments[0].primitiveLength===0)continue;tt=st(it,Ke,0,0,1),pt=k,ut=De.maskSegments,ct=ae}else if(T==="geometry"){if(De.depthSegments.segments[0].primitiveLength===0)continue;tt=st(it,Ke,Z,1,0),pt=E,ut=De.depthSegments,ct=re}ct.draw(y,S.TRIANGLES,pt,Pr.disabled,Vr.disabled,Sr.disabled,tt,d.id,De.vertexBuffer,De.indexBuffer,ut,d.paint,y.transform.zoom)}}function cl(y,o,d){const{painter:A,sourceCache:T,layer:S,coords:E,colorMode:k,elevationType:Z,terrainEnabled:K,pass:Y}=y,ae=A.context.gl,re=S.paint.get("fill-pattern");let pe=Z;Z!=="road"||o&&!K||(pe="none");const Pe=pe==="road",Ce=new ur(A.context.gl.LEQUAL,ur.ReadWrite,A.depthRangeFor3D),De=re&&re.constantOr(1),Le=(Ke,it)=>{let tt,pt,ut,ct,dt;it?(pt=De&&!S.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",tt=ae.LINES):(pt=De?"fillPattern":"fill",tt=ae.TRIANGLES);for(const vt of E){const Tt=T.getTile(vt);if(De&&!Tt.patternsLoaded())continue;const Qt=Tt.getBucket(S);if(!Qt)continue;const kt=o?Qt.elevationBufferData:Qt.bufferData;if(kt.isEmpty())continue;A.prepareDrawTile();const ra=kt.programConfigurations.get(S.id),ca=A.isTileAffectedByFog(vt),xa=[],Ft=[];Pe&&(xa.push("ELEVATED_ROADS"),Ft.push(kt.elevatedLayoutVertexBuffer));const sa=A.getOrCreateProgram(pt,{config:ra,overrideFog:ca,defines:xa});De&&(A.context.activeTexture.set(ae.TEXTURE0),Tt.imageAtlasTexture&&Tt.imageAtlasTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),ra.updatePaintBuffers());const zt=re.constantOr(null);if(zt&&Tt.imageAtlas){const da=Tt.imageAtlas,Xt=n.d0.from(zt).getPrimary().scaleSelf(n.q.devicePixelRatio).toString(),pa=da.patternPositions.get(Xt);pa&&ra.setConstantPatternPositions(pa)}const oa=A.translatePosMatrix(vt.projMatrix,Tt,S.paint.get("fill-translate"),S.paint.get("fill-translate-anchor")),ta=S.paint.get("fill-emissive-strength");if(it){ct=kt.lineIndexBuffer,dt=kt.lineSegments;const da=A.terrain&&A.terrain.renderingToTexture?A.terrain.drapeBufferSize:[ae.drawingBufferWidth,ae.drawingBufferHeight];ut=pt==="fillOutlinePattern"&&De?nt(oa,ta,A,Tt,da):We(oa,ta,da)}else ct=kt.indexBuffer,dt=kt.triangleSegments,ut=De?Me(oa,ta,A,Tt):ye(oa,ta);A.uploadCommonUniforms(A.context,sa,vt.toUnwrapped()),sa.draw(A,tt,pe!=="none"?Ce:Ke,d||A.stencilModeForClipping(vt),k,Sr.disabled,ut,S.id,kt.layoutVertexBuffer,ct,dt,S.paint,A.transform.zoom,ra,Ft)}};A.renderPass===Y&&Le(A.depthModeForSublayer(1,A.renderPass==="opaque"?ur.ReadWrite:ur.ReadOnly),!1),pe==="none"&&A.renderPass==="translucent"&&S.paint.get("fill-antialias")&&Le(A.depthModeForSublayer(S.getPaintProperty("fill-outline-color")?2:0,ur.ReadOnly),!0)}function kl(y,o,d,A,T,S,E,k){d.resetLayerRenderingStats(y);const Z=y.context,K=Z.gl,Y=y.transform,ae=d.paint.get("fill-extrusion-pattern"),re=ae.constantOr(1),pe=d.paint.get("fill-extrusion-opacity"),Pe=y.style.enable3dLights(),Ce=d.paint.get(Pe&&!re?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),De=[d.paint.get("fill-extrusion-ambient-occlusion-intensity"),Ce],Le=d.layout.get("fill-extrusion-edge-radius"),Ke=Le>0&&!d.paint.get("fill-extrusion-rounded-roof"),it=Ke?0:Le,tt=Y.projection.name==="globe"?n.d6():0,pt=Y.projection.name==="globe",ut=pt?n.ag(Y.zoom):0,ct=[n.av(Y.center.lng),n.aC(Y.center.lat)],dt=d.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",vt=d.paint.get("fill-extrusion-flood-light-color").toRenderColor(dt?null:d.lut).toArray01().slice(0,3),Tt=d.paint.get("fill-extrusion-flood-light-intensity"),Qt=d.paint.get("fill-extrusion-vertical-scale"),kt=d.paint.get("fill-extrusion-line-width").constantOr(1)!==0,ra=d.paint.get("fill-extrusion-height-alignment"),ca=d.paint.get("fill-extrusion-base-alignment"),xa=Js(y,d.paint.get("fill-extrusion-cutoff-fade-range")),Ft=[];let sa;pt&&Ft.push("PROJECTION_GLOBE_VIEW"),De[0]>0&&Ft.push("FAUX_AO"),Ke&&Ft.push("ZERO_ROOF_RADIUS"),k&&Ft.push("HAS_CENTROID"),Tt>0&&Ft.push("FLOOD_LIGHT"),xa.shouldRenderCutoff&&Ft.push("RENDER_CUTOFF"),kt&&Ft.push("RENDER_WALL_MODE");const zt=y.renderPass==="shadow",oa=y.shadowRenderer,ta=zt&&!!oa;y.shadowRenderer&&(y.shadowRenderer.useNormalOffset=!0);let da=[0,0,0];if(oa){const La=y.style.directionalLight,Fa=y.style.ambientLight;La&&Fa&&(da=jc(y.style,La,Fa)),zt||(Ft.push("RENDER_SHADOWS","DEPTH_TEXTURE"),oa.useNormalOffset&&Ft.push("NORMAL_OFFSET")),sa=Ft.concat(["SHADOWS_SINGLE_CASCADE"])}const Xt=ta?"fillExtrusionDepth":re?"fillExtrusionPattern":"fillExtrusion",pa=d.getLayerRenderingStats();for(const La of A){const Fa=o.getTile(La),Va=Fa.getBucket(d);if(!Va||Va.projection.name!==Y.projection.name)continue;let cr=!1;oa&&(cr=oa.getMaxCascadeForTile(La.toUnwrapped())===0);const jr=y.isTileAffectedByFog(La),vr=Va.programConfigurations.get(d.id),Ir=y.getOrCreateProgram(Xt,{config:vr,defines:cr?sa:Ft,overrideFog:jr});if(y.terrain&&y.terrain.setupElevationDraw(Fa,Ir,{useMeterToDem:!0}),!Va.centroidVertexBuffer){const Er=Ir.attributes.a_centroid_pos;Er!==void 0&&K.vertexAttrib2f(Er,0,0)}!zt&&oa&&oa.setupShadows(Fa.tileID.toUnwrapped(),Ir,"vector-tile",Fa.tileID.overscaledZ),re&&(y.context.activeTexture.set(K.TEXTURE0),Fa.imageAtlasTexture&&Fa.imageAtlasTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE),vr.updatePaintBuffers());const Or=ae.constantOr(null);if(Or&&Fa.imageAtlas){const Er=Fa.imageAtlas,rr=n.d0.from(Or).getPrimary().scaleSelf(n.q.devicePixelRatio),pn=Er.patternPositions.get(rr.toString());pn&&vr.setConstantPatternPositions(pn)}const zr=d.paint.get("fill-extrusion-vertical-gradient"),Gr=1/Va.tileToMeter;let Ur;if(zt&&oa){if(rs(Fa.tileID,Va,y))continue;const Er=oa.calculateShadowPassMatrixFromTile(Fa.tileID.toUnwrapped());Ur=G(Er,it,Gr,Qt,ra,ca)}else{const Er=y.translatePosMatrix(La.expandedProjMatrix,Fa,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),rr=Y.projection.createInversionMatrix(Y,La.canonical);Ur=re?Q(Er,y,zr,pe,De,it,Gr,La,Fa,tt,ra,ca,ut,ct,rr,vt,Qt):Yh(Er,y,zr,pe,De,it,Gr,La,tt,ra,ca,ut,ct,rr,vt,Qt,Tt,da)}y.uploadCommonUniforms(Z,Ir,La.toUnwrapped(),null,xa);let mr=Va.segments;if(Y.projection.name==="mercator"&&!zt&&(mr=Va.getVisibleSegments(Fa.tileID,y.terrain,y.transform.getFrustum(0)),!mr.get().length))continue;if(pa)if(zt)for(const Er of mr.get())pa.numRenderedVerticesInShadowPass+=Er.primitiveLength;else for(const Er of mr.get())pa.numRenderedVerticesInTransparentPass+=Er.primitiveLength;const fn=[];(y.terrain||k)&&fn.push(Va.centroidVertexBuffer),pt&&fn.push(Va.layoutVertexExtBuffer),kt&&fn.push(Va.wallVertexBuffer),Ir.draw(y,Z.gl.TRIANGLES,T,S,E,Sr.backCCW,Ur,d.id,Va.layoutVertexBuffer,Va.indexBuffer,mr,d.paint,y.transform.zoom,vr,fn)}y.shadowRenderer&&(y.shadowRenderer.useNormalOffset=!1)}function Is(y,o,d,A,T,S,E,k,Z,K,Y,ae,re,pe,Pe,Ce,De,Le,Ke){const it=y.context,tt=it.gl,pt=y.transform,ut=y.transform.zoom,ct=[],dt=Js(y,d.paint.get("fill-extrusion-cutoff-fade-range"));K==="clear"?(ct.push("CLEAR_SUBPASS"),Ke&&(ct.push("CLEAR_FROM_TEXTURE"),it.activeTexture.set(tt.TEXTURE0),Ke.bind(tt.LINEAR,tt.CLAMP_TO_EDGE))):K==="sdf"&&ct.push("SDF_SUBPASS"),De&&ct.push("HAS_CENTROID"),dt.shouldRenderCutoff&&ct.push("RENDER_CUTOFF");const vt=d.layout.get("fill-extrusion-edge-radius"),Tt=(Qt,kt,ra,ca,xa)=>{const Ft=kt.programConfigurations.get(d.id),sa=y.isTileAffectedByFog(Qt),zt=y.getOrCreateProgram("fillExtrusionGroundEffect",{config:Ft,defines:ct,overrideFog:sa}),oa=((da,Xt,pa,La,Fa,Va,cr,jr,vr,Ir,Or)=>({u_matrix:Xt,u_opacity:pa,u_ao_pass:La?1:0,u_meter_to_tile:Fa,u_ao:Va,u_flood_light_intensity:cr,u_flood_light_color:jr,u_attenuation:vr,u_edge_radius:Ir,u_fb:0,u_fb_size:Or,u_dynamic_offset:1}))(0,ca,Y,Z,xa,[ae,re*xa],pe,Pe,Ce,ut>=17?0:vt*xa,Ke?Ke.size[0]:0),ta=[];De&&ta.push(kt.hiddenByLandmarkVertexBuffer),y.uploadCommonUniforms(it,zt,Qt.toUnwrapped(),null,dt),zt.draw(y,it.gl.TRIANGLES,T,S,E,k,oa,d.id,kt.vertexBuffer,kt.indexBuffer,ra,d.paint,ut,Ft,ta)};for(const Qt of A){const kt=o.getTile(Qt),ra=kt.getBucket(d);if(!ra||ra.projection.name!==pt.projection.name||!ra.groundEffect||ra.groundEffect&&!ra.groundEffect.hasData())continue;const ca=ra.groundEffect,xa=1/ra.tileToMeter;{const Ft=y.translatePosMatrix(Qt.projMatrix,kt,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),sa=ca.getDefaultSegment();Tt(Qt,ca,sa,Ft,xa)}if(Le)for(let Ft=0;Ft<4;Ft++){const sa=n.d7[Ft](Qt),zt=o.getTile(sa);if(!zt)continue;const oa=zt.getBucket(d);if(!oa||oa.projection.name!==pt.projection.name||!oa.groundEffect||oa.groundEffect&&!oa.groundEffect.hasData())continue;const ta=oa.groundEffect;let da,Xt;Ft===0?(da=[-n.ai,0,0],Xt=1):Ft===1?(da=[n.ai,0,0],Xt=0):Ft===2?(da=[0,-n.ai,0],Xt=3):(da=[0,n.ai,0],Xt=2);const pa=ta.regionSegments[Xt];if(!pa)continue;const La=new Float32Array(16);n.ad.mat4.translate(La,Qt.projMatrix,da),Tt(Qt,ta,pa,y.translatePosMatrix(La,kt,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),xa)}}}function Ul(y,o,d,A,T,S,E){A.centroidVertexArray.length===0&&A.createCentroidsBuffer();const k=S?S.findDEMTileFor(d):null;if(!(k&&k.dem||E))return;S&&k&&k.dem&&A.selfDEMTileTimestamp!==k.dem._timestamp&&(A.borderDoneWithNeighborZ=[-1,-1,-1,-1],A.selfDEMTileTimestamp=k.dem._timestamp);const Z=Le=>new n.P(Math.ceil((Le+n.da)*n.db),0),K=Le=>{const Ke=o.getSource().minzoom,it=pt=>{const ut=o.getTileByID(pt);if(ut&&ut.hasData())return ut.getBucket(T)},tt=[0,-1,1];for(const pt of tt){if(Le.overscaledZ+pt<Ke)continue;const ut=it(Le.calculateScaledKey(Le.overscaledZ+pt));if(ut)return ut}},Y=[0,0,0],ae=(Le,Ke)=>(Y[0]=Math.min(Le.min.y,Ke.min.y),Y[1]=Math.max(Le.max.y,Ke.max.y),Y[2]=n.ai-Ke.min.x>Le.max.x?Ke.min.x-n.ai:Le.max.x,Y),re=(Le,Ke)=>(Y[0]=Math.min(Le.min.x,Ke.min.x),Y[1]=Math.max(Le.max.x,Ke.max.x),Y[2]=n.ai-Ke.min.y>Le.max.y?Ke.min.y-n.ai:Le.max.y,Y),pe=[(Le,Ke)=>ae(Le,Ke),(Le,Ke)=>ae(Ke,Le),(Le,Ke)=>re(Le,Ke),(Le,Ke)=>re(Ke,Le)],Pe=(Le,Ke,it,tt,pt,ut,ct)=>{if(!S)return 0;const dt=[[ut?it:Le,ut?Le:it,0],[ut?it:Ke,ut?Ke:it,0]],vt=ct<0?n.ai+ct:ct,Tt=[ut?vt:(Le+Ke)/2,ut?(Le+Ke)/2:vt,0];return it===0&&ct<0||it!==0&&ct>0?S.getForTilePoints(pt,[Tt],!0,tt):dt.push(Tt),S.getForTilePoints(d,dt,!0,k),Math.max(dt[0][2],dt[1][2],Tt[2])/S.exaggeration()};for(let Le=0;Le<4;Le++){const Ke=A.borderFeatureIndices[Le];if(Ke.length===0)continue;const it=n.d7[Le](d),tt=K(it);if(!(tt&&tt instanceof n.d8))continue;const pt=S?S.findDEMTileFor(it):null;if(!(pt&&pt.dem||E)||(S&&pt&&pt.dem&&A.borderDEMTileTimestamp[Le]!==pt.dem._timestamp&&(A.borderDoneWithNeighborZ[Le]=-1,A.borderDEMTileTimestamp[Le]=pt.dem._timestamp),A.borderDoneWithNeighborZ[Le]===tt.canonical.z))continue;tt.centroidVertexArray.length===0&&tt.createCentroidsBuffer();const ut=(Le<2?1:5)-Le,ct=tt.borderDoneWithNeighborZ[ut]!==A.canonical.z,dt=tt.borderFeatureIndices[ut];let vt=0;if(A.canonical.z!==tt.canonical.z){for(const Tt of Ke)A.showCentroid(A.featuresOnBorder[Tt]);if(ct)for(const Tt of dt)tt.showCentroid(tt.featuresOnBorder[Tt]);A.borderDoneWithNeighborZ[Le]=tt.canonical.z,tt.borderDoneWithNeighborZ[ut]=A.canonical.z}for(const Tt of Ke){const Qt=A.featuresOnBorder[Tt],kt=A.centroidData[Qt.centroidDataIndex],ra=Qt.borders[Le];let ca;for(;vt<dt.length;){ca=tt.featuresOnBorder[dt[vt]];const xa=ca.borders[ut];if(xa[1]>ra[0]+3||xa[0]>ra[0]-3)break;tt.showCentroid(ca),vt++}if(ca&&vt<dt.length){const xa=vt;let Ft=0;for(;!(ca.borders[ut][0]>ra[1]-3)&&(Ft++,++vt!==dt.length);)ca=tt.featuresOnBorder[dt[vt]];ca=tt.featuresOnBorder[dt[xa]];let sa=!1;if(Ft>=1){const ta=ca.borders[ut];Math.abs(ra[0]-ta[0])<3&&Math.abs(ra[1]-ta[1])<3&&(Ft=1,sa=!0,vt=xa+1)}else if(Ft===0){A.showCentroid(Qt);continue}const zt=tt.centroidData[ca.centroidDataIndex];E&&sa&&(((Ce=kt).flags|(De=zt).flags)&n.d9?(Ce.flags|=n.d9,De.flags|=n.d9):(Ce.flags&=~n.d9,De.flags&=~n.d9));const oa=Qt.intersectsCount()>1||ca.intersectsCount()>1;if(Ft>1)vt=xa,kt.centroidXY=zt.centroidXY=new n.P(0,0);else if(pt&&pt.dem&&!oa){const ta=pe[Le](kt,zt),da=Le%2?n.ai-1:0,Xt=Pe(ta[0],Math.min(n.ai-1,ta[1]),da,pt,it,Le<2,ta[2]);kt.centroidXY=zt.centroidXY=Z(Xt)}else oa?kt.centroidXY=zt.centroidXY=new n.P(0,0):(kt.centroidXY=A.encodeBorderCentroid(Qt),zt.centroidXY=tt.encodeBorderCentroid(ca));A.writeCentroidToBuffer(kt),tt.writeCentroidToBuffer(zt)}else A.showCentroid(Qt)}A.borderDoneWithNeighborZ[Le]=tt.canonical.z,tt.borderDoneWithNeighborZ[ut]=A.canonical.z}var Ce,De;(A.needsCentroidUpdate||!A.centroidVertexBuffer&&A.centroidVertexArray.length!==0)&&A.uploadCentroid(y)}const Du=[1,0,0],Ea=[0,1,0],Ba=[0,0,1];function rs(y,o,d){const A=d.transform,T=d.shadowRenderer;if(!T)return!0;const S=y.toUnwrapped(),E=A.tileSize*T._cascades[d.currentShadowCascade].scale;let k=o.maxHeight;if(A.elevation){const Ce=A.elevation.getMinMaxForTile(y);Ce&&(k+=Ce.max)}const Z=[...T.shadowDirection];Z[2]=-Z[2];const K=T.computeSimplifiedTileShadowVolume(S,k,E,Z);if(!K)return!1;const Y=[Du,Ea,Ba,Z,[Z[0],0,Z[2]],[0,Z[1],Z[2]]],ae=A.projection.name==="globe",re=A.scaleZoom(E),pe=n.bR.fromInvProjectionMatrix(A.invProjMatrix,A.worldSize,re,!ae),Pe=T.getCurrentCascadeFrustum();return pe.intersectsPrecise(K.vertices,K.planes,Y)===0||Pe.intersectsPrecise(K.vertices,K.planes,Y)===0}function Bi(y){return[y[0]*n.dc,y[1]*n.dc,y[2]*n.dc,0]}function qt(y,o,d,A,T,S,E,k,Z){const K=A.getSource(),Y=d.globeSharedBuffers;if(!Y)return;let ae,re,pe;if(o&&(ae=A.getTile(o)),K instanceof n.aK?(re=K.texture,pe=n.cJ(0,0,d.transform)):ae&&o&&(re=ae.texture,pe=n.cJ(o.canonical.z,o.canonical.x,d.transform)),!re||!pe)return;y||(pe=n.ad.mat4.scale(n.ad.mat4.create(),pe,[1,-1,1]));const Pe=d.context,Ce=Pe.gl,De=T.paint.get("raster-resampling")==="nearest"?Ce.NEAREST:Ce.LINEAR,Le=d.colorModeForDrapableLayerRenderPass(S),Ke=E.defines;Ke.push("GLOBE_POLES");const it=new ur(Ce.LEQUAL,ur.ReadWrite,d.depthRangeFor3D),tt=Float32Array.from(d.transform.expandedFarZProjMatrix),pt=Float32Array.from(n.bc(n.cI(new n.bT(0,0,0))));d.terrain&&d.terrain.prepareDrawTile(),Pe.activeTexture.set(Ce.TEXTURE0),re.bind(De,Ce.CLAMP_TO_EDGE),Pe.activeTexture.set(Ce.TEXTURE1),re.bind(De,Ce.CLAMP_TO_EDGE),"useMipmap"in re&&Pe.extTextureFilterAnisotropic&&d.transform.pitch>20&&Ce.texParameterf(Ce.TEXTURE_2D,Pe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Pe.extTextureFilterAnisotropicMax);const[ut,ct,dt,vt]=o?Y.getPoleBuffers(o.canonical.z,!1):Y.getPoleBuffers(0,!0),Tt=T.paint.get("raster-elevation");let Qt;y?(Qt=ut,d.renderDefaultNorthPole=Tt!==0):(Qt=ct,d.renderDefaultSouthPole=Tt!==0);const kt=Bi(E.mix),ra=((xa,Ft,sa,zt,oa,ta,da,Xt,pa,La,Fa,Va,cr)=>na(xa,Ft,sa,new Float32Array(16),new Float32Array(9),[0,0],zt,[0,0],[0,0,0,0],1,{opacity:1,mix:0},ta,[0,0],Xt,2,La,Fa,Va,1,0,cr))(tt,pt,pe,n.ag(d.transform.zoom),0,T,0,Tt,0,kt,E.offset,E.range,S),ca=d.getOrCreateProgram("raster",{defines:Ke});d.uploadCommonUniforms(Pe,ca,null),ca.draw(d,Ce.TRIANGLES,it,Z,Le,k,ra,T.id,Qt,dt,vt)}function sm(y){const o=y._nearZ,d=y.projection.farthestPixelDistance(y),A=d-o,T=.2*y.height,S=o+T;return[o,d,(S-T-o)/A,(S-o)/A]}function _h(y,o,d,A){if(y)return o instanceof Ui&&y instanceof qo?o.getTextureDescriptor(y,d,!0):{texture:y.texture,mix:Bi(A.mix),offset:A.offset,buffer:0,tileSize:1}}var wh=n.dd([{name:"a_index",type:"Int16",components:1}]);class Rh{constructor(o,d,A,T){const S={width:A[0],height:A[1],data:null},E=o.gl;this.targetColorTexture=new n.T(o,S,E.RGBA8,{useMipmap:!1}),this.backgroundColorTexture=new n.T(o,S,E.RGBA8,{useMipmap:!1}),this.context=o,this.updateParticleTexture(d,T),this.lastInvalidatedAt=0}updateParticleTexture(o,d){if(this.particleTextureDimension===d.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const A=this.context.gl,T=d.width*d.height;this.particleTexture0=new n.T(this.context,d,A.RGBA8,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new n.T(this.context,d,A.RGBA8,{premultiply:!1,useMipmap:!1});const S=new n.de;S.reserve(T);for(let E=0;E<T;E++)S.emplaceBack(E);this.particleIndexBuffer=this.context.createVertexBuffer(S,wh.members,!0),this.particleSegment=n.b8.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=d.width}update(o){return!(this.lastInvalidatedAt<o&&(this.lastInvalidatedAt=n.q.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}function Mu(y,o,d){if(!y)return null;const A=o.getTextureDescriptor(y,d,!0);if(!A)return null;let{texture:T,mix:S,offset:E,tileSize:k,buffer:Z,format:K}=A;if(!T||!K)return null;let Y=!1;return K==="uint32"&&(Y=!0,S[3]=0,S=Pt(n.df,S,[0,d.paint.get("raster-particle-max-speed")]),E=_a(n.df,E,[0,d.paint.get("raster-particle-max-speed")])),{texture:T,textureOffset:[Z/(k+2*Z),k/(k+2*Z)],tileSize:k,scalarData:Y,scale:S,offset:E,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[K]]}}function Th(y){const o=y._nearZ,d=y.projection.farthestPixelDistance(y),A=d-o,T=.2*y.height,S=o+T;return[o,d,(S-T-o)/A,(S-o)/A]}const tc=new n.al(1,0,0,1),ag=new n.al(0,1,0,1),up=new n.al(0,0,1,1),rg=new n.al(1,0,1,1),Ch=new n.al(0,1,1,1);function Bl(y,o,d,A,T,S,E){const k=y.context,Z=y.transform,K=k.gl,Y=Z.projection.name==="globe",ae=Y?["PROJECTION_GLOBE_VIEW"]:[];let re=n.ad.mat4.clone(d.projMatrix);if(Y&&n.ag(Z.zoom)>0){const kt=n.bb(d.canonical,Z),ra=n.dg(kt);re=n.ad.mat4.multiply(new Float32Array(16),Z.globeMatrix,ra),n.ad.mat4.multiply(re,Z.projMatrix,re)}const pe=n.ad.mat4.create();pe[12]+=2*T/(n.q.devicePixelRatio*Z.width),pe[13]+=2*S/(n.q.devicePixelRatio*Z.height),n.ad.mat4.multiply(re,pe,re);const Pe=y.getOrCreateProgram("debug",{defines:ae}),Ce=o.getTileByID(d.key);y.terrain&&y.terrain.setupElevationDraw(Ce,Pe);const De=ur.disabled,Le=Pr.disabled,Ke=y.colorModeForRenderPass(),it="$debug";k.activeTexture.set(K.TEXTURE0),y.emptyTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE),Y?Ce._makeGlobeTileDebugBuffers(y.context,Z):Ce._makeDebugTileBoundsBuffers(y.context,Z.projection);const tt=Ce._tileDebugBuffer||y.debugBuffer,pt=Ce._tileDebugIndexBuffer||y.debugIndexBuffer,ut=Ce._tileDebugSegments||y.debugSegments;if(Pe.draw(y,K.LINE_STRIP,De,Le,Ke,Sr.disabled,mt(re,A),it,tt,pt,ut,null,null,null,[Ce._globeTileDebugBorderBuffer]),E){const kt=Ce.latestRawTileData,ra=Math.floor((kt&&kt.byteLength||0)/1024);let ca=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(ca+=` => ${d.overscaledZ}`),ca+=` ${Ce.state}`,ca+=` ${ra}kb`,function(xa,Ft){xa.initDebugOverlayCanvas();const sa=xa.debugOverlayCanvas,zt=xa.context.gl,oa=xa.debugOverlayCanvas.getContext("2d");oa.clearRect(0,0,sa.width,sa.height),oa.shadowColor="white",oa.shadowBlur=2,oa.lineWidth=1.5,oa.strokeStyle="white",oa.textBaseline="top",oa.font="bold 36px Open Sans, sans-serif",oa.fillText(Ft,5,5),oa.strokeText(Ft,5,5),xa.debugOverlayTexture.update(sa),xa.debugOverlayTexture.bind(zt.LINEAR,zt.CLAMP_TO_EDGE)}(y,ca)}const ct=o.getTile(d).tileSize,dt=512/Math.min(ct,512)*(d.overscaledZ/Z.zoom)*.5,vt=Ce._tileDebugTextBuffer||y.debugBuffer,Tt=Ce._tileDebugTextIndexBuffer||y.quadTriangleIndexBuffer,Qt=Ce._tileDebugTextSegments||y.debugSegments;Pe.draw(y,K.TRIANGLES,De,Le,Vr.alphaBlended,Sr.disabled,mt(re,n.al.transparent,dt),it,vt,Tt,Qt,null,null,null,[Ce._globeTileDebugTextBuffer])}function Xh(y,o,d,A){td(y,0,o+d/2,y.transform.width,d,A)}function ed(y,o,d,A){td(y,o-d/2,0,d,y.transform.height,A)}function td(y,o,d,A,T,S){const E=y.context,k=E.gl;k.enable(k.SCISSOR_TEST),k.scissor(o*n.q.devicePixelRatio,d*n.q.devicePixelRatio,A*n.q.devicePixelRatio,T*n.q.devicePixelRatio),E.clear({color:S}),k.disable(k.SCISSOR_TEST)}const cp=n.dd([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:ad}=cp;function dl(y,o,d,A){y.emplaceBack(o,d,A)}class ng{constructor(o){this.vertexArray=new n.dh,this.indices=new n.aV,dl(this.vertexArray,-1,-1,1),dl(this.vertexArray,1,-1,1),dl(this.vertexArray,-1,1,1),dl(this.vertexArray,1,1,1),dl(this.vertexArray,-1,-1,-1),dl(this.vertexArray,1,-1,-1),dl(this.vertexArray,-1,1,-1),dl(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=o.createVertexBuffer(this.vertexArray,ad),this.indexBuffer=o.createIndexBuffer(this.indices),this.segment=n.b8.simpleSegment(0,0,36,12)}}function uo(y,o,d,A,T,S){const E=y.context.gl,k=o.paint.get("sky-atmosphere-color"),Z=o.paint.get("sky-atmosphere-halo-color"),K=o.paint.get("sky-atmosphere-sun-intensity"),Y=((ae,re,pe,Pe,Ce)=>({u_matrix_3f:ae,u_sun_direction:re,u_sun_intensity:pe,u_color_tint_r:[Pe.r,Pe.g,Pe.b,Pe.a],u_color_tint_m:[Ce.r,Ce.g,Ce.b,Ce.a],u_luminance:5e-5}))(n.ad.mat3.fromMat4(n.ad.mat3.create(),A),T,K,k,Z);E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_CUBE_MAP_POSITIVE_X+S,o.skyboxTexture,0),d.draw(y,E.TRIANGLES,ur.disabled,Pr.disabled,Vr.unblended,Sr.frontCW,Y,"skyboxCapture",o.skyboxGeometry.vertexBuffer,o.skyboxGeometry.indexBuffer,o.skyboxGeometry.segment)}const Kg=n.dd([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Sh{constructor(o){const d=new n.di;d.emplaceBack(-1,1,1,0,0),d.emplaceBack(1,1,1,1,0),d.emplaceBack(1,-1,1,1,1),d.emplaceBack(-1,-1,1,0,1);const A=new n.aV;A.emplaceBack(0,1,2),A.emplaceBack(2,3,0),this.vertexBuffer=o.createVertexBuffer(d,Kg.members),this.indexBuffer=o.createIndexBuffer(A),this.segments=n.b8.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const ci=n.dd([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class Mn{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class dp{constructor(o){this.colorModeAlphaBlendedWriteRGB=new Vr([1,os,1,os],n.al.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new Vr([1,0,1,0],n.al.transparent,[!1,!1,!1,!0]),this.params=new Mn,this.updateNeeded=!0,o.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),o.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),o.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),o.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(o){const d=o.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new Sh(d);const A=this.params.sizeRange,T=this.params.intensityRange,S=function(Y){const ae=n.dl(30),re=[];for(let pe=0;pe<Y;++pe){const Pe=2*Math.PI*ae(),Ce=Math.acos(1-2*ae())-.5*Math.PI;re.push(n.ad.vec3.fromValues(Math.cos(Ce)*Math.cos(Pe),Math.cos(Ce)*Math.sin(Pe),Math.sin(Ce)))}return re}(this.params.starsCount),E=n.dl(300),k=new n.dj,Z=new n.aV;let K=0;for(let Y=0;Y<S.length;++Y){const ae=n.ad.vec3.scale([],S[Y],200),re=Math.max(0,1+.01*A*(1*E()-.5)),pe=Math.max(0,1+.01*T*(1*E()-.5));k.emplaceBack(ae[0],ae[1],ae[2],-1,-1,re,pe),k.emplaceBack(ae[0],ae[1],ae[2],1,-1,re,pe),k.emplaceBack(ae[0],ae[1],ae[2],1,1,re,pe),k.emplaceBack(ae[0],ae[1],ae[2],-1,1,re,pe),Z.emplaceBack(K+0,K+1,K+2),Z.emplaceBack(K+0,K+2,K+3),K+=4}this.starsVx=d.createVertexBuffer(k,ci.members),this.starsIdx=d.createIndexBuffer(Z),this.starsSegments=n.b8.simpleSegment(0,0,k.length,Z.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(o,d){const A=o.context,T=A.gl,S=o.transform,E=new ur(T.LEQUAL,ur.ReadOnly,[0,1]),k=n.ag(S.zoom),Z=o.style.getLut(d.scope),K=d.properties.get("color-use-theme")==="none",Y=d.properties.get("color").toRenderColor(K?null:Z).toArray01(),ae=d.properties.get("high-color-use-theme")==="none",re=d.properties.get("high-color").toRenderColor(ae?null:Z).toArray01(),pe=d.properties.get("space-color-use-theme")==="none",Pe=d.properties.get("space-color").toRenderColor(pe?null:Z).toArray01PremultipliedAlpha(),Ce=5e-4,De=n.dk(d.properties.get("horizon-blend"),0,1,Ce,.25),Le=n.cD(o,A,S)&&De===Ce?S.worldSize/(2*Math.PI*1.025)-1:S.globeRadius,Ke=o.frameCounter/1e3%1,it=n.ad.vec3.length(S.globeCenterInViewSpace),tt=Math.sqrt(Math.pow(it,2)-Math.pow(Le,2)),pt=Math.acos(tt/it),ut=ct=>{const dt=S.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];ct&&dt.push("ALPHA_PASS");const vt=o.getOrCreateProgram("globeAtmosphere",{defines:dt}),Tt=((kt,ra,ca,xa,Ft,sa,zt,oa,ta,da,Xt,pa)=>({u_frustum_tl:kt,u_frustum_tr:ra,u_frustum_br:ca,u_frustum_bl:xa,u_horizon:Ft,u_transition:sa,u_fadeout_range:zt,u_color:oa,u_high_color:ta,u_space_color:da,u_temporal_offset:Xt,u_horizon_angle:pa}))(S.frustumCorners.TL,S.frustumCorners.TR,S.frustumCorners.BR,S.frustumCorners.BL,S.frustumCorners.horizon,k,De,Y,re,Pe,Ke,pt);o.uploadCommonUniforms(A,vt);const Qt=this.atmosphereBuffer;Qt&&vt.draw(o,T.TRIANGLES,E,Pr.disabled,ct?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,Sr.backCW,Tt,ct?"atmosphere_glow_alpha":"atmosphere_glow",Qt.vertexBuffer,Qt.indexBuffer,Qt.segments)};ut(!1),ut(!0)}drawStars(o,d){const A=n.ay(d.properties.get("star-intensity"),0,1);if(A===0)return;const T=o.context,S=T.gl,E=o.transform,k=o.getOrCreateProgram("stars"),Z=n.ad.quat.identity([]);n.ad.quat.rotateX(Z,Z,-E._pitch),n.ad.quat.rotateZ(Z,Z,-E.angle),n.ad.quat.rotateX(Z,Z,n.ak(E._center.lat)),n.ad.quat.rotateY(Z,Z,-n.ak(E._center.lng));const K=n.ad.mat4.fromQuat(new Float32Array(16),Z),Y=n.ad.mat4.multiply([],E.starsProjMatrix,K),ae=n.ad.mat3.fromMat4([],K),re=n.ad.mat3.invert([],ae),pe=[0,1,0];n.ad.vec3.transformMat3(pe,pe,re),n.ad.vec3.scale(pe,pe,this.params.sizeMultiplier);const Pe=[1,0,0];n.ad.vec3.transformMat3(Pe,Pe,re),n.ad.vec3.scale(Pe,Pe,this.params.sizeMultiplier);const Ce=(De=pe,Le=Pe,Ke=A,{u_matrix:Float32Array.from(Y),u_up:De,u_right:Le,u_intensity_multiplier:Ke});var De,Le,Ke;o.uploadCommonUniforms(T,k),this.starsVx&&this.starsIdx&&k.draw(o,S.TRIANGLES,ur.disabled,Pr.disabled,this.colorModeAlphaBlendedWriteRGB,Sr.disabled,Ce,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function Iu(y,o){const d=[...y],A=o.cameraWorldSizeForFog/o.worldSize,T=n.ad.mat4.identity([]);return n.ad.mat4.scale(T,T,[A,A,1]),n.ad.mat4.multiply(d,T,d),n.ad.mat4.multiply(d,o.worldToFogMatrix,d),d}function Hd(y,o,d,A,T){const S=d.material,E=A.context,{baseColorTexture:k,metallicRoughnessTexture:Z}=S.pbrMetallicRoughness,{normalTexture:K,occlusionTexture:Y,emissionTexture:ae}=S;function re(Pe,Ce,De){if(Pe&&(y.push(Ce),E.activeTexture.set(E.gl.TEXTURE0+De),Pe.gfxTexture)){const{minFilter:Le,magFilter:Ke,wrapS:it,wrapT:tt}=Pe.sampler;Pe.gfxTexture.bindExtraParam(Le,Ke,it,tt)}}re(k,"HAS_TEXTURE_u_baseColorTexture",bi.BaseColor),re(Z,"HAS_TEXTURE_u_metallicRoughnessTexture",bi.MetallicRoughness),re(K,"HAS_TEXTURE_u_normalTexture",bi.Normal),re(Y,"HAS_TEXTURE_u_occlusionTexture",bi.Occlusion),re(ae,"HAS_TEXTURE_u_emissionTexture",bi.Emission),T&&(T.texture||(T.texture=new n.dn(A.context,T.image,[T.image.height,T.image.height,T.image.height],E.gl.RGBA8)),E.activeTexture.set(E.gl.TEXTURE0+bi.LUT),T.texture&&T.texture.bind(E.gl.LINEAR,E.gl.CLAMP_TO_EDGE),y.push("APPLY_LUT_ON_GPU")),d.texcoordBuffer&&(y.push("HAS_ATTRIBUTE_a_uv_2f"),o.push(d.texcoordBuffer)),d.colorBuffer&&(y.push(d.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),o.push(d.colorBuffer)),d.normalBuffer&&(y.push("HAS_ATTRIBUTE_a_normal_3f"),o.push(d.normalBuffer)),d.pbrBuffer&&(y.push("HAS_ATTRIBUTE_a_pbr"),y.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),o.push(d.pbrBuffer)),S.alphaMode!=="OPAQUE"&&S.alphaMode!=="MASK"||y.push("UNPREMULT_TEXTURE_IN_SHADER"),S.defined||y.push("DIFFUSE_SHADED");const pe=A.shadowRenderer;pe&&(y.push("RENDER_SHADOWS","DEPTH_TEXTURE"),pe.useNormalOffset&&y.push("NORMAL_OFFSET"))}function Lu(y,o,d,A,T,S){const E=d.paint.get("model-opacity").constantOr(1),k=o.context,Z=new ur(o.context.gl.LEQUAL,ur.ReadWrite,o.depthRangeFor3D),K=o.transform,Y=y.mesh,ae=Y.material,re=ae.pbrMetallicRoughness,pe=o.style.fog;let Pe;Pe=o.transform.projection.zAxisUnit==="pixels"?[...y.nodeModelMatrix]:n.ad.mat4.multiply([],A.zScaleMatrix,y.nodeModelMatrix),n.ad.mat4.multiply(Pe,A.negCameraPosMatrix,Pe);const Ce=n.ad.mat4.invert([],Pe);n.ad.mat4.transpose(Ce,Ce);const De=d.paint.get("model-color-use-theme").constantOr("default")==="none",Le=d.paint.get("model-emissive-strength").constantOr(0),Ke=fr(new Float32Array(y.worldViewProjection),new Float32Array(Pe),new Float32Array(Ce),null,o,E,re.baseColorFactor.toRenderColor(null),ae.emissiveFactor,re.metallicFactor,re.roughnessFactor,ae,Le,d),it={defines:[]},tt=[],pt=o.shadowRenderer;pt&&(pt.useNormalOffset=!1),Hd(it.defines,tt,Y,o,De?null:d.lut);let ut=null;if(pe){const vt=Iu(y.nodeModelMatrix,o.transform);if(ut=new Float32Array(vt),K.projection.name!=="globe"){const Tt=Y.aabb.min,Qt=Y.aabb.max,[kt,ra]=pe.getOpacityForBounds(vt,Tt[0],Tt[1],Qt[0],Qt[1]);it.overrideFog=kt>=Ia||ra>=Ia}}const ct=Js(o,d.paint.get("model-cutoff-fade-range"));ct.shouldRenderCutoff&&it.defines.push("RENDER_CUTOFF");const dt=o.getOrCreateProgram("model",it);o.uploadCommonUniforms(k,dt,null,ut,ct),o.renderPass!=="shadow"&&pt&&pt.setupShadowsFromMatrix(y.nodeModelMatrix,dt),dt.draw(o,k.gl.TRIANGLES,Z,T,S,Y.material.doubleSided?Sr.disabled:Sr.backCCW,Ke,d.id,Y.vertexBuffer,Y.indexBuffer,Y.segments,d.paint,o.transform.zoom,void 0,tt)}function rd(y,o,d,A,T,S,E){let k;k=y.projection.name==="globe"?n.dp(d,y):[...d],n.ad.mat4.multiply(k,k,o.matrix);const Z=n.ad.mat4.multiply([],A,k);if(o.meshes)for(const K of o.meshes){if(K.material.alphaMode!=="BLEND"){E.push({mesh:K,depth:0,modelIndex:T,worldViewProjection:Z,nodeModelMatrix:k});continue}const Y=n.ad.vec3.transformMat4([],K.centroid,Z);!y.isOrthographic&&Y[2]<=0||S.push({mesh:K,depth:Y[2],modelIndex:T,worldViewProjection:Z,nodeModelMatrix:k})}if(o.children)for(const K of o.children)rd(y,K,d,A,T,S,E)}function Of(y,o,d,A){const T=d.shadowRenderer;if(!T)return;const S=T.getShadowPassDepthMode(),E=T.getShadowPassColorMode(),k=T.calculateShadowPassMatrixFromMatrix(o),Z=Pi(k);d.getOrCreateProgram("modelDepth",{defines:d._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(d,d.context.gl.TRIANGLES,S,Pr.disabled,E,Sr.backCCW,Z,A.id,y.vertexBuffer,y.indexBuffer,y.segments,A.paint,d.transform.zoom,void 0,void 0)}function Jh(y,o,d){const A=o.updateZoomBasedPaintProperties(),T=function(S,E,k){let Z,K,Y,ae=S.terrain?S.terrain.exaggeration():0;if(S.terrain&&ae>0){const re=S.terrain,pe=re.findDEMTileFor(k);pe&&pe.dem?Z=n.dr.create(re,k,pe):ae=0}if(ae===0&&(E.terrainElevationMin=0,E.terrainElevationMax=0),ae===E.validForExaggeration&&(ae===0||Z&&Z._demTile&&Z._demTile.tileID===E.validForDEMTile.id&&Z._dem._timestamp===E.validForDEMTile.timestamp))return!1;for(const re in E.instancesPerModel){const pe=E.instancesPerModel[re];for(let Pe=0;Pe<pe.instancedDataArray.length;++Pe){const Ce=(Z?ae*Z.getElevationAt(0|pe.instancedDataArray.float32[16*Pe],0|pe.instancedDataArray.float32[16*Pe+1],!0,!0):0)+pe.instancesEvaluatedElevation[Pe];pe.instancedDataArray.float32[16*Pe+6]=Ce,K=K?Math.min(E.terrainElevationMin,Ce):Ce,Y=Y?Math.max(E.terrainElevationMax,Ce):Ce}}return E.terrainElevationMin=K||0,E.terrainElevationMax=Y||0,E.validForExaggeration=ae,E.validForDEMTile=Z&&Z._demTile?{id:Z._demTile.tileID,timestamp:Z._dem._timestamp}:{id:void 0,timestamp:0},!0}(y,o,d);(A||T)&&(o.uploaded=!1,o.upload(y.context))}const jl={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new n.ce([0,0,0],[n.ai,n.ai,0])};function Vf(y,o){const d=1<<y.canonical.z,A=o.getFreeCameraOptions().position,T=o.elevation,S=y.canonical.x/d,E=(y.canonical.x+1)/d,k=y.canonical.y/d,Z=(y.canonical.y+1)/d;let K=o._centerAltitude;if(T){const pe=T.getMinMaxForTile(y);pe&&pe.max>K&&(K=pe.max)}const Y=n.ay(A.x,S,E)-A.x,ae=n.ay(A.y,k,Z)-A.y,re=n.bH(K,o.center.lat)-A.z;return o._zoomFromMercatorZ(Math.sqrt(Y*Y+ae*ae+re*re))}function Vo(y,o,d,A,T,S,E){const k=y.context,Z=y.renderPass==="shadow",K=y.shadowRenderer,Y=Z&&K?K.getShadowPassDepthMode():new ur(k.gl.LEQUAL,ur.ReadWrite,y.depthRangeFor3D),ae=y.isTileAffectedByFog(S);if(d.meshes)for(const re of d.meshes){const pe=["MODEL_POSITION_ON_GPU"],Pe=[];let Ce,De,Le;A.instancedDataArray.length>20&&pe.push("INSTANCED_ARRAYS");const Ke=Js(y,o.paint.get("model-cutoff-fade-range"));if(Ke.shouldRenderCutoff&&pe.push("RENDER_CUTOFF"),Z&&K)Ce=y.getOrCreateProgram("modelDepth",{defines:pe}),De=Pi(E.shadowTileMatrix,E.shadowTileMatrix,Float32Array.from(d.matrix)),Le=K.getShadowPassColorMode();else{Hd(pe,Pe,re,y,o.paint.get("model-color-use-theme").constantOr("default")==="none"?null:o.lut),Ce=y.getOrCreateProgram("model",{defines:pe,overrideFog:ae});const tt=re.material,pt=tt.pbrMetallicRoughness,ut=o.paint.get("model-opacity").constantOr(1),ct=o.paint.get("model-emissive-strength").constantOr(0);De=fr(S.expandedProjMatrix,Float32Array.from(d.matrix),new Float32Array(16),null,y,ut,pt.baseColorFactor.toRenderColor(null),tt.emissiveFactor,pt.metallicFactor,pt.roughnessFactor,tt,ct,o,T),K&&(E.shadowUniformsInitialized?Ce.setShadowUniformValues(k,K.getShadowUniformValues()):(K.setupShadows(S.toUnwrapped(),Ce,"model-tile",S.overscaledZ),E.shadowUniformsInitialized=!0)),Le=Ke.shouldRenderCutoff||ut<1||tt.alphaMode!=="OPAQUE"?Vr.alphaBlended:Vr.unblended}y.uploadCommonUniforms(k,Ce,S.toUnwrapped(),null,Ke);const it=re.material.doubleSided?Sr.disabled:Sr.backCCW;if(A.instancedDataArray.length>20)Pe.push(A.instancedDataBuffer),Ce.draw(y,k.gl.TRIANGLES,Y,Pr.disabled,Le,it,De,o.id,re.vertexBuffer,re.indexBuffer,re.segments,o.paint,y.transform.zoom,void 0,Pe,A.instancedDataArray.length);else{const tt=Z?"u_instance":"u_normal_matrix";for(let pt=0;pt<A.instancedDataArray.length;++pt)De[tt]=new Float32Array(A.instancedDataArray.arrayBuffer,64*pt,16),Ce.draw(y,k.gl.TRIANGLES,Y,Pr.disabled,Le,it,De,o.id,re.vertexBuffer,re.indexBuffer,re.segments,o.paint,y.transform.zoom,void 0,Pe)}}if(d.children)for(const re of d.children)Vo(y,o,re,A,T,S,E)}const $d=[1,-1,1];function hp(y,o,d,A){if(!d.modelManager)return!0;const T=d.modelManager;if(!d.shadowRenderer)return!0;const S=d.shadowRenderer,E=o.aabb;let k=!0,Z=y.maxHeight;if(Z===0){let Y=0;for(const ae in y.instancesPerModel){const re=T.getModel(ae,A);re?Y=Math.max(Y,Math.max(Math.max(re.aabb.max[0],re.aabb.max[1]),re.aabb.max[2])):k=!1}Z=y.maxScale*Y*1.41+y.maxVerticalOffset,k&&(y.maxHeight=Z)}E.max[2]=Z,E.min[2]+=y.terrainElevationMin,E.max[2]+=y.terrainElevationMax,n.ad.vec3.transformMat4(E.min,E.min,o.tileMatrix),n.ad.vec3.transformMat4(E.max,E.max,o.tileMatrix);const K=E.intersects(S.getCurrentCascadeFrustum());return d.currentShadowCascade===0&&(y.isInsideFirstShadowMapFrustum=K===2),K===0}function fp(y,o){const d=y.uniformValues.u_cutoff_params[0],A=y.uniformValues.u_cutoff_params[1],T=y.uniformValues.u_cutoff_params[2],S=y.uniformValues.u_cutoff_params[3];return A===d||S===T?1:n.ay(((o-d)/(A-d)-T)/(S-T),0,1)}function bh(y,o,d,A){if(o.pitch<20)return 1;const T=o.getWorldToCameraMatrix();n.ad.mat4.multiply(T,T,y);const S=n.ad.vec4.fromValues(d.min[0],d.min[1],d.min[2],1);let E=n.ad.vec4.transformMat4(n.ad.vec4.create(),S,T),k=E,Z=E;S[1]=d.max[1],E=n.ad.vec4.transformMat4(n.ad.vec4.create(),S,T),k=E[1]<k[1]?E:k,Z=E[1]>Z[1]?E:Z,S[0]=d.max[0],E=n.ad.vec4.transformMat4(n.ad.vec4.create(),S,T),k=E[1]<k[1]?E:k,Z=E[1]>Z[1]?E:Z,S[1]=d.min[1],E=n.ad.vec4.transformMat4(n.ad.vec4.create(),S,T),k=E[1]<k[1]?E:k,Z=E[1]>Z[1]?E:Z;const K=n.ay(A[0],0,1),Y=100*o.pixelsPerMeter*n.ay(A[1],0,1),ae=n.ay(A[2],0,1),re=n.ad.vec4.lerp(n.ad.vec4.create(),k,Z,K),pe=Math.tan(.5*o.fovX),Pe=-re[2]*pe;if(Y===0)return re[1]<-Math.abs(Pe)?ae:1;const Ce=(-Math.abs(Pe)-re[1])/Y,De=(Ke,it,tt)=>(1-tt)*Ke+tt*it,Le=n.ay(De(1,ae,Ce),ae,1);return De(1,Le,n.ay((o.pitch-20)/20,0,1))}class nd{}class id{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(o,d,A){{const ae=this._storage.get(d.id);if(ae)return ae.lastUsedFrameIdx=o,ae.buf}const T=A.gl,S=T.getBufferParameter(T.ELEMENT_ARRAY_BUFFER,T.BUFFER_SIZE),E=new ArrayBuffer(S),k=new Int16Array(E);T.getBufferSubData(T.ELEMENT_ARRAY_BUFFER,0,new Int16Array(E));const Z=new n.dt;for(let ae=0;ae<S/2;ae+=3){const re=k[ae],pe=k[ae+1],Pe=k[ae+2];Z.emplaceBack(re,pe),Z.emplaceBack(pe,Pe),Z.emplaceBack(Pe,re)}const K=A.bindVertexArrayOES.current,Y=new nd;return Y.buf=new Yn(A,Z),Y.lastUsedFrameIdx=o,this._storage.set(d.id,Y),A.bindVertexArrayOES.set(K),Y.buf}update(o){for(const[d,A]of this._storage)o-A.lastUsedFrameIdx>30&&(A.buf.destroy(),this._storage.delete(d))}destroy(){for(const[o,d]of this._storage)d.buf.destroy(),this._storage.delete(o)}}class pp{constructor(o){this.occluderSize=30,this.depthOffset=-1e-4,o.registerParameter(this,["Occlusion"],"occluderSize",{min:1,max:100,step:1}),o.registerParameter(this,["Occlusion"],"depthOffset",{min:-.05,max:0,step:1e-5})}}const Kd=n.dd([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_rainParticleData",components:4}]);class Fu{registerParameter(){}registerButton(){}registerBinding(){}refreshUI(){}}class Pc{constructor(o,d){this.revealStart=11,this.revealRange=2,o.registerParameter(this,[...d,"Reveal"],"revealStart",{min:0,max:17,step:.05}),o.registerParameter(this,[...d,"Reveal"],"revealRange",{min:.1,max:5.1,step:.05})}}const uu=n.dd([{type:"Float32",name:"a_pos_2f",components:2}]);class Ec{destroy(){this.vignetteVx&&this.vignetteVx.destroy(),this.vignetteIdx&&this.vignetteIdx.destroy()}draw(o,d){const A=o.getOrCreateProgram("vignette");if(!this.vignetteVx||!this.vignetteIdx){const E=new n.du,k=new n.aV;E.emplaceBack(-1,-1),E.emplaceBack(1,-1),E.emplaceBack(1,1),E.emplaceBack(-1,1),k.emplaceBack(0,1,2),k.emplaceBack(0,2,3),this.vignetteVx=o.context.createVertexBuffer(E,uu.members),this.vignetteIdx=o.context.createIndexBuffer(k)}const T=n.b8.simpleSegment(0,0,4,6);if(this.vignetteVx&&this.vignetteIdx){o.uploadCommonUniforms(o.context,A);const E={u_vignetteShape:(S={vignetteShape:[d.start,d.range,Math.pow(10,d.fadePower)],vignetteColor:[d.color.r,d.color.g,d.color.b,d.color.a*d.strength]}).vignetteShape,u_vignetteColor:S.vignetteColor};A.draw(o,o.context.gl.TRIANGLES,ur.disabled,Pr.disabled,Vr.alphaBlended,Sr.disabled,E,"vignette",this.vignetteVx,this.vignetteIdx,T)}var S}}class Ls{constructor(){this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0}update(o,d){const A=o.getFreeCameraOptions().position,T=A.toAltitude(),S=A.toLngLat(),E=n.ak(S.lng),k=n.ak(S.lat),Z=o.pixelsPerMeter/d,K=E*n.dv,Y=n.dv*Math.log(Math.tan(Math.PI/4+k/2));if(this._offsetXPrev===void 0)this._offsetXPrev=0,this._offsetYPrev=0,this._elevationPrev=0,this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0;else{const ae=-this._offsetYPrev+Y,re=-this._elevationPrev+T;this._accumulatedOffsetX+=(-this._offsetXPrev+K)*Z,this._accumulatedOffsetY+=ae*Z,this._accumulatedElevation+=re*Z,this._offsetXPrev=K,this._offsetYPrev=Y,this._elevationPrev=T}}getPosition(){return[this._accumulatedOffsetX,this._accumulatedOffsetY,this._accumulatedElevation]}}function cu(y,o){return[-(y[0]-Math.floor(y[0]/o)*o),-(y[1]-Math.floor(y[1]/o)*o),-(y[2]-Math.floor(y[2]/o)*o)]}function ac(y){const o=n.dl(1323123451230),d=[];for(let A=0;A<y;++A){const T=2*o()-1,S=2*o()-1,E=2*o()-1;d.push(n.ad.vec3.fromValues(T,S,E))}return d}function eo(y,o,d,A,T){const S=n.ay((T-d)/(A-d),0,1);return(1-S)*y+S*o}class ku{constructor(o){this._movement=new Ls,this._accumulatedTimeFromStart=0,this._prevTime=Date.now()/1e3,this._vignette=new Ec,this._ppmScaleFactor=o}destroy(){this.particlesVx&&this.particlesVx.destroy(),this.particlesIdx&&this.particlesIdx.destroy(),this._vignette&&this._vignette.destroy()}updateOnRender(o,d){const A=o.transform;this._movement.update(A,this._ppmScaleFactor);const T=A.starsProjMatrix,S=n.ad.quat.identity([]);n.ad.quat.rotateX(S,S,n.ak(90)-A._pitch),n.ad.quat.rotateZ(S,S,-A.angle);const E=n.ad.mat4.fromQuat(new Float32Array(16),S),k=n.ad.mat4.fromValues(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1),Z=n.ad.mat4.transpose([],k),K=n.ad.mat4.multiply([],Z,E),Y=Date.now()/1e3;return this._accumulatedTimeFromStart+=(Y-this._prevTime)*d,this._prevTime=Y,{projectionMatrix:T,modelviewMatrix:K}}}class xh extends ku{constructor(o){super(4.25),this._params={overrideStyleParameters:!1,intensity:.5,timeFactor:1,velocityConeAperture:0,velocity:300,boxSize:2500,dropletSizeX:1,dropletSizeYScale:10,distortionStrength:70,screenThinning:{intensity:.57,start:.46,range:1.17,fadePower:.17,affectedRatio:1,particleOffset:-.2},color:{r:.66,g:.68,b:.74,a:.7},direction:{x:-50,y:-35},shapeDirPower:2,shapeNormalPower:1},this._revealParams=new Pc(o.tp,["Precipitation","Rain"]),this._vignetteParams={strength:1,start:.7,range:1,fadePower:.4,color:{r:.27,g:.27,b:.27,a:1}},this.particlesCount=16e3}update(o){const d=o.context;if(!this.particlesVx){const A=ac(this.particlesCount),T=new n.dw,S=new n.aV;let E=0;const k=n.dl(1323123451230);for(let Z=0;Z<A.length;++Z){const K=A[Z],Y=[2*k()-1,k(),k(),k()];T.emplaceBack(K[0],K[1],K[2],-1,-1,...Y),T.emplaceBack(K[0],K[1],K[2],1,-1,...Y),T.emplaceBack(K[0],K[1],K[2],1,1,...Y),T.emplaceBack(K[0],K[1],K[2],-1,1,...Y),S.emplaceBack(E+0,E+1,E+2),S.emplaceBack(E+0,E+2,E+3),E+=4}this.particlesVx=d.createVertexBuffer(T,Kd.members),this.particlesIdx=d.createIndexBuffer(S)}}draw(o){if(!this._params.overrideStyleParameters&&!o.style.rain)return;const d=this._params.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},A=o.transform.zoom;if(d.revealStart>A)return;const T=eo(0,1,d.revealStart,d.revealStart+d.revealRange,A);if(!this.particlesVx||!this.particlesIdx)return;const S=structuredClone(this._params);let E=[-S.direction.x,S.direction.y,-100];n.ad.vec3.normalize(E,E);const k=structuredClone(this._vignetteParams);k.strength*=T,S.overrideStyleParameters||(S.intensity=o.style.rain.state.density,S.timeFactor=o.style.rain.state.intensity,S.color=structuredClone(o.style.rain.state.color),E=structuredClone(o.style.rain.state.direction),S.screenThinning.intensity=o.style.rain.state.centerThinning,S.dropletSizeX=o.style.rain.state.dropletSize[0],S.dropletSizeYScale=o.style.rain.state.dropletSize[1]/o.style.rain.state.dropletSize[0],S.distortionStrength=100*o.style.rain.state.distortionStrength,k.strength=1,k.color=structuredClone(o.style.rain.state.vignetteColor));const Z=this.updateOnRender(o,S.timeFactor),K=o.context,Y=K.gl,ae=o.transform;this.screenTexture&&this.screenTexture.size[0]===o.width&&this.screenTexture.size[1]===o.height||(this.screenTexture=new n.T(K,{width:o.width,height:o.height,data:null},Y.RGBA8)),S.distortionStrength>0&&(K.activeTexture.set(Y.TEXTURE0),this.screenTexture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE),Y.copyTexSubImage2D(Y.TEXTURE_2D,0,0,0,0,0,o.width,o.height));const re=o.getOrCreateProgram("rainParticle");o.uploadCommonUniforms(K,re),K.activeTexture.set(Y.TEXTURE0),this.screenTexture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE);const pe=[S.color.r,S.color.g,S.color.b,S.color.a],Pe=(Ce,De)=>{const Le=cu(this._movement.getPosition(),Ce),Ke=S.dropletSizeX,it=S.dropletSizeX*S.dropletSizeYScale,tt=o.width/2,pt=o.height/2,ut=eo(0,S.screenThinning.start,0,1,S.screenThinning.intensity),ct=eo(.001,S.screenThinning.range,0,1,S.screenThinning.intensity),dt=eo(0,S.screenThinning.particleOffset,0,1,S.screenThinning.intensity),vt=(Tt={modelview:Z.modelviewMatrix,projection:Z.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:Le,velocityConeAperture:S.velocityConeAperture,velocity:S.velocity,boxSize:Ce,rainDropletSize:[Ke,it],distortionStrength:S.distortionStrength,rainDirection:E,color:pe,screenSize:[ae.width,ae.height],thinningCenterPos:[tt,pt],thinningShape:[ut,ct,Math.pow(10,S.screenThinning.fadePower)],thinningAffectedRatio:S.screenThinning.affectedRatio,thinningParticleOffset:dt,shapeDirectionalPower:S.shapeDirPower,shapeNormalPower:S.shapeNormalPower,mode:De?0:1},{u_modelview:Float32Array.from(Tt.modelview),u_projection:Float32Array.from(Tt.projection),u_time:Tt.time,u_cam_pos:Tt.camPos,u_texScreen:0,u_velocityConeAperture:Tt.velocityConeAperture,u_velocity:Tt.velocity,u_boxSize:Tt.boxSize,u_rainDropletSize:Tt.rainDropletSize,u_distortionStrength:Tt.distortionStrength,u_rainDirection:Tt.rainDirection,u_color:Tt.color,u_screenSize:Tt.screenSize,u_thinningCenterPos:Tt.thinningCenterPos,u_thinningShape:Tt.thinningShape,u_thinningAffectedRatio:Tt.thinningAffectedRatio,u_thinningParticleOffset:Tt.thinningParticleOffset,u_shapeDirectionalPower:Tt.shapeDirectionalPower,u_shapeNormalPower:Tt.shapeNormalPower,u_mode:Tt.mode});var Tt;const Qt=Math.round(S.intensity*this.particlesCount),kt=n.b8.simpleSegment(0,0,4*Qt,2*Qt);re.draw(o,Y.TRIANGLES,ur.disabled,Pr.disabled,Vr.alphaBlended,Sr.disabled,vt,"rain_particles",this.particlesVx,this.particlesIdx,kt)};S.distortionStrength>0&&Pe(S.boxSize,!0),Pe(S.boxSize,!1),this._vignette.draw(o,k)}}const mp=n.dd([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_snowParticleData",components:4},{type:"Float32",name:"a_snowParticleDataHorizontalOscillation",components:2}]);class Qh extends ku{constructor(o){super(2.25),this._params={overrideStyleParameters:!1,intensity:.85,timeFactor:.75,velocityConeAperture:70,velocity:40,horizontalOscillationRadius:4,horizontalOscillationRate:1.5,boxSize:2e3,billboardSize:2,shapeFadeStart:.27,shapeFadePower:.21,screenThinning:{intensity:.4,start:.15,range:1.4,fadePower:.24,affectedRatio:1,particleOffset:-.2},color:{r:1,g:1,b:1,a:1},direction:{x:-50,y:-35}},this._revealParams=new Pc(o.tp,["Precipitation","Snow"]),this._vignetteParams={strength:.3,start:.78,range:.46,fadePower:.2,color:{r:1,g:1,b:1,a:1}},this.particlesCount=16e3}update(o){const d=o.context;if(!this.particlesVx){const A=ac(this.particlesCount),T=new n.dx,S=new n.aV;let E=0;const k=n.dl(1323123451230);for(let Z=0;Z<A.length;++Z){const K=A[Z],Y=k(),ae=k(),re=k(),pe=[Z/A.length,Y,ae,re],Pe=[k(),k()];T.emplaceBack(K[0],K[1],K[2],-1,-1,...pe,...Pe),T.emplaceBack(K[0],K[1],K[2],1,-1,...pe,...Pe),T.emplaceBack(K[0],K[1],K[2],1,1,...pe,...Pe),T.emplaceBack(K[0],K[1],K[2],-1,1,...pe,...Pe),S.emplaceBack(E+0,E+1,E+2),S.emplaceBack(E+0,E+2,E+3),E+=4}this.particlesVx=d.createVertexBuffer(T,mp.members),this.particlesIdx=d.createIndexBuffer(S)}}draw(o){if(!this._params.overrideStyleParameters&&!o.style.snow)return;const d=structuredClone(this._params);let A=[-d.direction.x,d.direction.y,-100];n.ad.vec3.normalize(A,A);const T=structuredClone(this._vignetteParams),S=d.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},E=o.transform.zoom;if(S.revealStart>E)return;const k=eo(0,1,S.revealStart,S.revealStart+S.revealRange,E);T.strength*=k,d.overrideStyleParameters||(d.intensity=o.style.snow.state.density,d.timeFactor=o.style.snow.state.intensity,d.color=structuredClone(o.style.snow.state.color),A=structuredClone(o.style.snow.state.direction),d.screenThinning.intensity=o.style.snow.state.centerThinning,d.billboardSize=2.79*o.style.snow.state.flakeSize,T.strength=1,T.color=structuredClone(o.style.snow.state.vignetteColor));const Z=this.updateOnRender(o,d.timeFactor);if(!this.particlesVx||!this.particlesIdx)return;const K=o.context,Y=K.gl,ae=o.transform,re=o.getOrCreateProgram("snowParticle");o.uploadCommonUniforms(K,re),((pe,Pe,Ce)=>{const De=cu(this._movement.getPosition(),pe),Le=ae.width/2,Ke=ae.height/2,it=eo(0,Ce.screenThinning.start,0,1,Ce.screenThinning.intensity),tt=eo(.001,Ce.screenThinning.range,0,1,Ce.screenThinning.intensity),pt=eo(0,Ce.screenThinning.particleOffset,0,1,Ce.screenThinning.intensity),ut=(ct={modelview:Z.modelviewMatrix,projection:Z.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:De,velocityConeAperture:Ce.velocityConeAperture,velocity:Ce.velocity,horizontalOscillationRadius:Ce.horizontalOscillationRadius,horizontalOscillationRate:Ce.horizontalOscillationRate,boxSize:pe,billboardSize:1*Ce.billboardSize,simpleShapeParameters:[Ce.shapeFadeStart,Ce.shapeFadePower],screenSize:[ae.width,ae.height],thinningCenterPos:[Le,Ke],thinningShape:[it,tt,Math.pow(10,Ce.screenThinning.fadePower)],thinningAffectedRatio:Ce.screenThinning.affectedRatio,thinningParticleOffset:pt,color:[Ce.color.r,Ce.color.g,Ce.color.b,Ce.color.a],direction:A},{u_modelview:Float32Array.from(ct.modelview),u_projection:Float32Array.from(ct.projection),u_time:ct.time,u_cam_pos:ct.camPos,u_velocityConeAperture:ct.velocityConeAperture,u_velocity:ct.velocity,u_horizontalOscillationRadius:ct.horizontalOscillationRadius,u_horizontalOscillationRate:ct.horizontalOscillationRate,u_boxSize:ct.boxSize,u_billboardSize:ct.billboardSize,u_simpleShapeParameters:ct.simpleShapeParameters,u_screenSize:ct.screenSize,u_thinningCenterPos:ct.thinningCenterPos,u_thinningShape:ct.thinningShape,u_thinningAffectedRatio:ct.thinningAffectedRatio,u_thinningParticleOffset:ct.thinningParticleOffset,u_particleColor:ct.color,u_direction:ct.direction});var ct;const dt=Math.round(Ce.intensity*this.particlesCount),vt=n.b8.simpleSegment(0,0,4*dt,2*dt);this.particlesVx&&this.particlesIdx&&re.draw(o,Y.TRIANGLES,ur.disabled,Pr.disabled,Vr.alphaBlended,Sr.disabled,ut,"snow_particles",this.particlesVx,this.particlesIdx,vt)})(d.boxSize,0,d),this._vignette.draw(o,T)}}const Ph={symbol:function(y,o,d,A,T){if(y.renderPass!=="translucent")return;const S=Pr.disabled,E=y.colorModeForRenderPass(),k=d.layout.get("text-variable-anchor"),Z=d.layout.get("text-size-scale-range"),K=n.ay(y.scaleFactor,Z[0],Z[1]);k&&function(re,pe,Pe,Ce,De,Le,Ke,it){const tt=pe.transform,pt=De==="map",ut=Le==="map";for(const ct of re){const dt=Ce.getTile(ct),vt=dt.getBucket(Pe);if(!vt||!vt.text||!vt.text.segments.get().length)continue;const Tt=n.bp(vt.textSizeData,tt.zoom,it),Qt=$o(ct,vt.getProjection(),tt),kt=tt.calculatePixelsToTileUnitsMatrix(dt),ra=Os(Qt,dt.tileID.canonical,ut,pt,tt,vt.getProjection(),kt),ca=vt.hasIconTextFit()&&vt.hasIconData();if(Tt){const xa=Math.pow(2,tt.zoom-dt.tileID.overscaledZ);ps(vt,pt,ut,Ke,n.cY,tt,ra,ct,xa,Tt,ca)}}}(A,y,d,o,d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),T,K);const Y=d.paint.get("icon-opacity").constantOr(1)!==0,ae=d.paint.get("text-opacity").constantOr(1)!==0;d.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(Y||ae)?Pn(y,o,d,A,S,E):(Y&&Pn(y,o,d,A,S,E,{onlyIcons:!0}),ae&&Pn(y,o,d,A,S,E,{onlyText:!0})),o.map.showCollisionBoxes&&(Wi(y,o,d,A,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),!0),Wi(y,o,d,A,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),!1))},circle:function(y,o,d,A){if(y.renderPass!=="translucent")return;const T=d.paint.get("circle-opacity"),S=d.paint.get("circle-stroke-width"),E=d.paint.get("circle-stroke-opacity"),k=d.layout.get("circle-sort-key").constantOr(1)!==void 0,Z=d.paint.get("circle-emissive-strength");if(T.constantOr(1)===0&&(S.constantOr(1)===0||E.constantOr(1)===0))return;const K=y.context,Y=K.gl,ae=y.transform,re=y.depthModeForSublayer(0,ur.ReadOnly),pe=Pr.disabled,Pe=y.colorModeForDrapableLayerRenderPass(Z),Ce=ae.projection.name==="globe",De=[n.av(ae.center.lng),n.aC(ae.center.lat)],Le=[];for(let it=0;it<A.length;it++){const tt=A[it],pt=o.getTile(tt),ut=pt.getBucket(d);if(!ut||ut.projection.name!==ae.projection.name)continue;const ct=ut.programConfigurations.get(d.id),dt=n.cZ(d),vt=y.isTileAffectedByFog(tt);Ce&&dt.push("PROJECTION_GLOBE_VIEW"),dt.push("DEPTH_D24"),y.terrain&&ae.depthOcclusionForSymbolsAndCircles&&dt.push("DEPTH_OCCLUSION");const Tt=y.getOrCreateProgram("circle",{config:ct,defines:dt,overrideFog:vt}),Qt=ut.layoutVertexBuffer,kt=ut.globeExtVertexBuffer,ra=ut.indexBuffer,ca=ae.projection.createInversionMatrix(ae,tt.canonical),xa={programConfiguration:ct,program:Tt,layoutVertexBuffer:Qt,globeExtVertexBuffer:kt,indexBuffer:ra,uniformValues:n.c_(y,tt,pt,ca,De,d),tile:pt};if(k){const Ft=ut.segments.get();for(const sa of Ft)Le.push({segments:new n.b8([sa]),sortKey:sa.sortKey,state:xa})}else Le.push({segments:ut.segments,sortKey:0,state:xa})}k&&Le.sort((it,tt)=>it.sortKey-tt.sortKey);const Ke={useDepthForOcclusion:ae.depthOcclusionForSymbolsAndCircles};for(const it of Le){const{programConfiguration:tt,program:pt,layoutVertexBuffer:ut,globeExtVertexBuffer:ct,indexBuffer:dt,uniformValues:vt,tile:Tt}=it.state,Qt=it.segments;y.terrain&&y.terrain.setupElevationDraw(Tt,pt,Ke),y.uploadCommonUniforms(K,pt,Tt.tileID.toUnwrapped()),pt.draw(y,Y.TRIANGLES,re,pe,Pe,Sr.disabled,vt,d.id,ut,dt,Qt,d.paint,ae.zoom,tt,[ct])}},heatmap:function(y,o,d,A){if(d.paint.get("heatmap-opacity")!==0)if(y.renderPass==="offscreen"){const T=y.context,S=T.gl,E=Pr.disabled,k=new Vr([S.ONE,S.ONE,S.ONE,S.ONE],n.al.transparent,[!0,!0,!0,!0]);(function(pe,Pe,Ce,De){const Le=pe.gl,Ke=Pe.width*De,it=Pe.height*De;pe.activeTexture.set(Le.TEXTURE1),pe.viewport.set([0,0,Ke,it]);let tt=Ce.heatmapFbo;if(!tt||tt&&(tt.width!==Ke||tt.height!==it)){tt&&tt.destroy();const pt=Le.createTexture();Le.bindTexture(Le.TEXTURE_2D,pt),Le.texParameteri(Le.TEXTURE_2D,Le.TEXTURE_WRAP_S,Le.CLAMP_TO_EDGE),Le.texParameteri(Le.TEXTURE_2D,Le.TEXTURE_WRAP_T,Le.CLAMP_TO_EDGE),Le.texParameteri(Le.TEXTURE_2D,Le.TEXTURE_MIN_FILTER,Le.LINEAR),Le.texParameteri(Le.TEXTURE_2D,Le.TEXTURE_MAG_FILTER,Le.LINEAR),tt=Ce.heatmapFbo=pe.createFramebuffer(Ke,it,!0,null),function(ut,ct,dt,vt,Tt,Qt){const kt=ut.gl;kt.texImage2D(kt.TEXTURE_2D,0,ut.extRenderToTextureHalfFloat?kt.RGBA16F:kt.RGBA,Tt,Qt,0,kt.RGBA,ut.extRenderToTextureHalfFloat?kt.HALF_FLOAT:kt.UNSIGNED_BYTE,null),vt.colorAttachment.set(dt)}(pe,0,pt,tt,Ke,it)}else Le.bindTexture(Le.TEXTURE_2D,tt.colorAttachment.get()),pe.bindFramebuffer.set(tt.framebuffer)})(T,y,d,y.transform.projection.name==="globe"?.5:.25),T.clear({color:n.al.transparent});const Z=y.transform,K=Z.projection.name==="globe",Y=K?["PROJECTION_GLOBE_VIEW"]:[],ae=K?Sr.frontCCW:Sr.disabled,re=[n.av(Z.center.lng),n.aC(Z.center.lat)];for(let pe=0;pe<A.length;pe++){const Pe=A[pe];if(o.hasRenderableParent(Pe))continue;const Ce=o.getTile(Pe),De=Ce.getBucket(d);if(!De||De.projection.name!==Z.projection.name)continue;const Le=y.isTileAffectedByFog(Pe),Ke=De.programConfigurations.get(d.id),it=y.getOrCreateProgram("heatmap",{config:Ke,defines:Y,overrideFog:Le}),{zoom:tt}=y.transform;y.terrain&&y.terrain.setupElevationDraw(Ce,it),y.uploadCommonUniforms(T,it,Pe.toUnwrapped());const pt=Z.projection.createInversionMatrix(Z,Pe.canonical);it.draw(y,S.TRIANGLES,ur.disabled,E,k,ae,ea(y,Pe,Ce,pt,re,tt,d.paint.get("heatmap-intensity")),d.id,De.layoutVertexBuffer,De.indexBuffer,De.segments,d.paint,y.transform.zoom,Ke,K?[De.globeExtVertexBuffer]:null)}T.viewport.set([0,0,y.width,y.height])}else y.renderPass==="translucent"&&(y.context.setColorMode(y.colorModeForRenderPass()),function(T,S){const E=T.context,k=E.gl,Z=S.heatmapFbo;if(!Z)return;E.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,Z.colorAttachment.get()),E.activeTexture.set(k.TEXTURE1);let K=S.colorRampTexture;K||(K=S.colorRampTexture=new n.T(E,S.colorRamp,k.RGBA8)),K.bind(k.LINEAR,k.CLAMP_TO_EDGE),T.getOrCreateProgram("heatmapTexture").draw(T,k.TRIANGLES,ur.disabled,Pr.disabled,T.colorModeForRenderPass(),Sr.disabled,((Y,ae,re,pe)=>({u_image:0,u_color_ramp:1,u_opacity:ae.paint.get("heatmap-opacity")}))(0,S),S.id,T.viewportBuffer,T.quadTriangleIndexBuffer,T.viewportSegments,S.paint,T.transform.zoom)}(y,d))},line:function(y,o,d,A){if(y.renderPass!=="translucent")return;const T=d.paint.get("line-opacity"),S=d.paint.get("line-width");if(T.constantOr(1)===0||S.constantOr(1)===0)return;const E=d.paint.get("line-emissive-strength"),k=d.paint.get("line-occlusion-opacity"),Z=d.layout.get("line-elevation-reference"),K=d.layout.get("line-width-unit")==="meters",Y=Z==="sea",ae=y.context,re=ae.gl;if(d.hasElevatedBuckets&&y.transform.projection.name==="globe")return;const pe=d.layout.get("line-cross-slope"),Pe=pe!==void 0,Ce=pe<1,De=y.colorModeForDrapableLayerRenderPass(E),Le=y.terrain&&y.terrain.renderingToTexture,Ke=Le?1:n.q.devicePixelRatio,it=d.paint.get("line-dasharray"),tt=it.constantOr(1),pt=d.layout.get("line-cap"),ut=it.constantOr(null),ct=pt.constantOr(null),dt=d.paint.get("line-pattern"),vt=dt.constantOr(1),Tt=dt.constantOr(null),Qt=d.paint.get("line-opacity").constantOr(1);let kt=!vt&&Qt!==1||y.depthOcclusion&&k>0&&k<1;const ra=d.paint.get("line-gradient"),ca=vt?"linePattern":"line",xa=n.c$(d);let Ft;if(Le&&y.terrain&&y.terrain.clipOrMaskOverlapStencilType()&&(kt=!1),k!==0&&y.depthOcclusion){const zt=d.paint._values["line-opacity"];zt&&zt.value&&zt.value.kind==="constant"?Ft=zt.value:n.w(`Occlusion opacity for layer ${d.id} is supported only when line-opacity isn't data-driven.`)}S.value.kind!=="constant"&&S.value.isLineProgressConstant===!1&&xa.push("VARIABLE_LINE_WIDTH");const sa=(zt,oa,ta,da,Xt,pa)=>{for(const La of zt){const Fa=o.getTile(La);if(vt&&!Fa.patternsLoaded())continue;const Va=Fa.getBucket(d);if(!Va||Va.hasZOffset&&!Xt||!Va.hasZOffset&&Xt)continue;y.prepareDrawTile();const cr=Va.programConfigurations.get(d.id),jr=y.isTileAffectedByFog(La),vr=y.getOrCreateProgram(ca,{config:cr,defines:oa,overrideFog:jr,overrideRtt:!Xt&&void 0});if(Tt&&Fa.imageAtlas){const Er=n.d0.from(Tt).getPrimary().scaleSelf(Ke).toString(),rr=Fa.imageAtlas.patternPositions.get(Er);rr&&cr.setConstantPatternPositions(rr)}if(!vt&&ut&&ct&&Fa.lineAtlas){const Er=Fa.lineAtlas.getDash(ut,ct);Er&&cr.setConstantPatternPositions(Er)}let[Ir,Or]=d.paint.get("line-trim-offset");(ct==="round"||ct==="square")&&Ir!==Or&&(Ir===0&&(Ir-=1),Or===1&&(Or+=1));const zr=Le?La.projMatrix:null,Gr=K?1/Va.tileToMeter/n.at(Fa,1,y.transform.zoom):1,Ur=K?1/Va.tileToMeter/n.at(Fa,1,Math.floor(y.transform.zoom)):1,mr=vt?n.d1(y,Fa,d,zr,Ke,Gr,Ur,[Ir,Or]):n.d2(y,Fa,d,zr,Va.lineClipsArray.length,Ke,Gr,Ur,[Ir,Or]);if(ra){const Er=Va.gradients[d.id];let rr=Er.texture;if(d.gradientVersion!==Er.version){let pn=256;if(d.stepInterpolant){const Xn=o.getSource().maxzoom,An=La.canonical.z===Xn?Math.ceil(1<<y.transform.maxZoom-La.canonical.z):1;pn=n.ay(n.d3(Va.maxLineLength/n.ai*1024*An),256,ae.maxTextureSize)}Er.gradient=n.d4({expression:d.gradientExpression(),evaluationKey:"lineProgress",resolution:pn,image:Er.gradient||void 0,clips:Va.lineClipsArray}),Er.texture?Er.texture.update(Er.gradient):Er.texture=new n.T(ae,Er.gradient,re.RGBA8),Er.version=d.gradientVersion,rr=Er.texture}ae.activeTexture.set(re.TEXTURE1),rr.bind(d.stepInterpolant?re.NEAREST:re.LINEAR,re.CLAMP_TO_EDGE)}tt&&(ae.activeTexture.set(re.TEXTURE0),Fa.lineAtlasTexture&&Fa.lineAtlasTexture.bind(re.LINEAR,re.REPEAT),cr.updatePaintBuffers()),vt&&(ae.activeTexture.set(re.TEXTURE0),Fa.imageAtlasTexture&&Fa.imageAtlasTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE),cr.updatePaintBuffers()),Xt&&!Y&&y.terrain.setupElevationDraw(Fa,vr),y.uploadCommonUniforms(ae,vr,La.toUnwrapped());const fn=Er=>{Ft!=null&&(Ft.value=Qt*k),vr.draw(y,re.TRIANGLES,ta,Er,De,Sr.disabled,mr,d.id,Va.layoutVertexBuffer,Va.indexBuffer,Va.segments,d.paint,y.transform.zoom,cr,[Va.layoutVertexBuffer2,Va.patternVertexBuffer,Va.zOffsetVertexBuffer]),Ft!=null&&(Ft.value=Qt)};if(kt&&!Xt){const Er=y.stencilModeForClipping(La).ref;Er===0&&Le&&ae.clear({stencil:0});const rr={func:re.EQUAL,mask:255};mr.u_alpha_discard_threshold=.8,fn(new Pr(rr,Er,255,re.KEEP,re.KEEP,re.INVERT)),mr.u_alpha_discard_threshold=0,fn(new Pr(rr,Er,255,re.KEEP,re.KEEP,re.KEEP))}else mr.u_alpha_discard_threshold=kt&&Xt&&pa?.8:0,fn(Xt?da:y.stencilModeForClipping(La))}};if(d.hasNonElevatedBuckets){const zt=!Le&&y.terrain;k!==0&&zt?n.w(`Occlusion opacity for layer ${d.id} is supported on terrain only if the layer has line-z-offset enabled.`):zt?n.w(`Cannot render non-elevated lines in immediate mode when terrain is enabled. Layer: ${d.id}.`):sa(A,xa,y.depthModeForSublayer(0,ur.ReadOnly),Pr.disabled,!1,!0)}if(d.hasElevatedBuckets){xa.push("ELEVATED"),Pe&&xa.push(Ce?"CROSS_SLOPE_HORIZONTAL":"CROSS_SLOPE_VERTICAL"),Y&&xa.push("ELEVATION_REFERENCE_SEA");const zt=kt?y.stencilModeFor3D():Pr.disabled,oa=new ur(y.depthOcclusion?re.GREATER:re.LEQUAL,ur.ReadOnly,y.depthRangeFor3D);y.forceTerrainMode=!0,sa(A,xa,oa,zt,!0,!0),kt&&sa(A,xa,oa,zt,!0,!1),y.forceTerrainMode=!1}kt&&(y.resetStencilClippingMasks(),Le&&ae.clear({stencil:0})),k===0||y.depthOcclusion||Le||y.layersWithOcclusionOpacity.push(y.currentLayer)},fill:function(y,o,d,A){const T=d.paint.get("fill-color"),S=d.paint.get("fill-opacity");if(S.constantOr(1)===0)return;const E=d.paint.get("fill-emissive-strength"),k=y.colorModeForDrapableLayerRenderPass(E),Z=d.paint.get("fill-pattern"),K=y.opaquePassEnabledForLayer()&&!Z.constantOr(1)&&T.constantOr(n.al.transparent).a===1&&S.constantOr(0)===1?"opaque":"translucent";let Y="none";d.layout.get("fill-elevation-reference")!=="none"?Y="road":d.paint.get("fill-z-offset").constantOr(1)!==0&&(Y="offset");const ae=!(!y.terrain||!y.terrain.enabled),re={painter:y,sourceCache:o,layer:d,coords:A,colorMode:k,elevationType:Y,terrainEnabled:ae,pass:K};if(Y!=="offset"){if(cl(re,!1),Y==="road"){const pe=!ae&&y.renderPass==="translucent";pe&&Oo(y,o,d,A,"geometry"),cl(re,!0,Pr.disabled),pe&&function(Pe){const{painter:Ce,sourceCache:De,layer:Le,coords:Ke,colorMode:it}=Pe,tt=Ce.context.gl,pt=new ur(Ce.context.gl.LEQUAL,ur.ReadOnly,Ce.depthRangeFor3D);for(const ut of Ke){const ct=De.getTile(ut),dt=ct.getBucket(Le);if(!dt)continue;const vt=dt.elevatedStructures;if(!vt||!vt.renderableSegments||vt.renderableSegments.segments[0].primitiveLength===0)continue;Ce.prepareDrawTile();const Tt=dt.bufferData.programConfigurations.get(Le.id),Qt=Ce.isTileAffectedByFog(ut),kt=Ce.getOrCreateProgram("elevatedStructures",{config:Tt,overrideFog:Qt,defines:["NORMAL_OFFSET"]}),ra={u_matrix:Ce.translatePosMatrix(ut.projMatrix,ct,Le.paint.get("fill-translate"),Le.paint.get("fill-translate-anchor"))};Ce.uploadCommonUniforms(Ce.context,kt,ut.toUnwrapped()),kt.draw(Ce,tt.TRIANGLES,pt,Pr.disabled,it,Sr.backCCW,ra,Le.id,vt.vertexBuffer,vt.indexBuffer,vt.renderableSegments,Le.paint,Ce.transform.zoom,Tt,[vt.vertexBufferNormal])}}(re)}}else cl(re,!1,y.stencilModeFor3D())},"fill-extrusion":function(y,o,d,A){const T=d.paint.get("fill-extrusion-opacity"),S=y.context,E=S.gl,k=y.terrain,Z=k&&k.renderingToTexture;if(T===0)return;const K=y.conflationActive&&y.style.isLayerClipped(d,o.getSource()),Y=y.style.order.indexOf(d.fqid);if(K&&function(ae,re,pe,Pe,Ce){for(const De of Pe){const Le=re.getTile(De).getBucket(pe);Le&&(Le.updateReplacement(De,ae.replacementSource,Ce),Le.uploadCentroid(ae.context))}}(y,o,d,A,Y),k||K)for(const ae of A){const re=o.getTile(ae).getBucket(d);re&&Ul(y.context,o,ae,re,d,k,K)}if(y.renderPass==="shadow"&&y.shadowRenderer){const ae=y.shadowRenderer;if(k&&T<.65&&d._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof n.ab)return;const re=ae.getShadowPassDepthMode(),pe=ae.getShadowPassColorMode();kl(y,o,d,A,re,Pr.disabled,pe,K)}else if(y.renderPass==="translucent"){const ae=!d.paint.get("fill-extrusion-pattern").constantOr(1),re=d.paint.get("fill-extrusion-color").constantOr(n.al.white);if(!Z&&re.a!==0){const pe=new ur(y.context.gl.LEQUAL,ur.ReadWrite,y.depthRangeFor3D);T===1&&ae?kl(y,o,d,A,pe,Pr.disabled,Vr.unblended,K):(kl(y,o,d,A,pe,Pr.disabled,Vr.disabled,K),kl(y,o,d,A,pe,y.stencilModeFor3D(),y.colorModeForRenderPass(),K),y.resetStencilClippingMasks())}if(y.style.enable3dLights()&&ae&&(!k&&y.transform.projection.name!=="globe"||Z)){const pe=d.paint.get("fill-extrusion-opacity"),Pe=d.paint.get("fill-extrusion-ambient-occlusion-intensity"),Ce=d.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),De=d.paint.get("fill-extrusion-flood-light-intensity"),Le=d.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",Ke=d.paint.get("fill-extrusion-flood-light-color").toRenderColor(Le?null:d.lut).toArray01().slice(0,3),it=Pe>0&&Ce>0,tt=De>0,pt=(ct,dt,vt)=>(1-vt)*ct+vt*dt,ut=ct=>{const dt=y.depthModeForSublayer(1,ur.ReadOnly,E.LEQUAL,!0),vt=d.paint.get(ct?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),Tt=pt(.1,3,vt),Qt=y._showOverdrawInspector;if(!Qt){const kt=new Pr({func:E.ALWAYS,mask:255},255,255,E.KEEP,E.KEEP,E.REPLACE),ra=new Vr([E.ONE,E.ONE,E.ONE,E.ONE],n.al.transparent,[!1,!1,!1,!0],E.MIN);Is(y,o,d,A,dt,kt,ra,Sr.disabled,ct,"sdf",pe,Pe,Ce,De,Ke,Tt,K,!1)}{const kt=Qt?Pr.disabled:new Pr({func:E.EQUAL,mask:255},255,255,E.KEEP,E.DECR,E.DECR),ra=Qt?y.colorModeForRenderPass():new Vr([E.ONE_MINUS_DST_ALPHA,E.DST_ALPHA,E.ONE,E.ONE],n.al.transparent,[!0,!0,!0,!0]);Is(y,o,d,A,dt,kt,ra,Sr.disabled,ct,"color",pe,Pe,Ce,De,Ke,Tt,K,!1)}};if(Z){const ct=(dt,vt,Tt)=>{const Qt=y.depthModeForSublayer(1,ur.ReadOnly,E.LEQUAL,!1),kt=d.paint.get(dt?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),ra=pt(.1,3,kt);{const ca=new Vr([E.ONE,E.ONE,E.ONE,E.ONE],n.al.transparent,[!1,!1,!1,!0]);Is(y,o,d,A,Qt,Pr.disabled,ca,Sr.disabled,dt,"clear",pe,Pe,Ce,De,Ke,ra,K,vt)}{const ca=new Pr({func:E.ALWAYS,mask:255},255,255,E.KEEP,E.KEEP,E.REPLACE),xa=new Vr([E.ONE,E.ONE,E.ONE,E.ONE],n.al.transparent,[!1,!1,!1,!0],E.MIN);Is(y,o,d,A,Qt,ca,xa,Sr.disabled,dt,"sdf",pe,Pe,Ce,De,Ke,ra,K,vt)}{const ca=dt?E.ZERO:E.ONE_MINUS_DST_ALPHA,xa=new Pr({func:E.EQUAL,mask:255},255,255,E.KEEP,E.DECR,E.DECR),Ft=new Vr([ca,E.DST_ALPHA,E.ONE_MINUS_DST_ALPHA,E.ZERO],n.al.transparent,[!0,!0,!0,!0]);Is(y,o,d,A,Qt,xa,Ft,Sr.disabled,dt,"color",pe,Pe,Ce,De,Ke,ra,K,vt)}{const ca=new Vr([E.ONE,E.ONE,E.ONE,dt?E.ZERO:E.ONE],n.al.transparent,[!1,!1,!1,!0],dt?E.FUNC_ADD:E.MAX);Is(y,o,d,A,Qt,Pr.disabled,ca,Sr.disabled,dt,"clear",pe,Pe,Ce,De,Ke,ra,K,vt,Tt)}};if(it||tt){let dt;if(y.prepareDrawTile(),k){const vt=k.drapeBufferSize[0],Tt=k.drapeBufferSize[1];dt=k.framebufferCopyTexture,dt&&(!dt||dt.size[0]===vt&&dt.size[1]===Tt)||(dt&&dt.destroy(),dt=k.framebufferCopyTexture=new n.T(S,new n.r({width:vt,height:Tt}),E.RGBA8)),dt.bind(E.LINEAR,E.CLAMP_TO_EDGE),E.copyTexSubImage2D(E.TEXTURE_2D,0,0,0,0,0,vt,Tt)}it&&ct(!0,!1,dt),tt&&ct(!1,!0,dt)}}else it&&ut(!0),tt&&ut(!1),(it||tt)&&y.resetStencilClippingMasks()}}},hillshade:function(y,o,d,A){if(y.renderPass!=="offscreen"&&y.renderPass!=="translucent"||y.style.disableElevatedTerrain)return;const T=y.context,S=y.terrain&&y.terrain.renderingToTexture,[E,k]=y.renderPass!=="translucent"||S?[{},A]:y.stencilConfigForOverlap(A);for(const Z of k){const K=o.getTile(Z);if(K.needsHillshadePrepare&&y.renderPass==="offscreen")kd(y,K,d);else if(y.renderPass==="translucent"){const Y=y.depthModeForSublayer(0,ur.ReadOnly),ae=d.paint.get("hillshade-emissive-strength"),re=y.colorModeForDrapableLayerRenderPass(ae),pe=S&&y.terrain?y.terrain.stencilModeForRTTOverlap(Z):E[Z.overscaledZ];ls(y,Z,K,d,Y,pe,re)}}T.viewport.set([0,0,y.width,y.height]),y.resetStencilClippingMasks()},raster:function(y,o,d,A,T,S){if(y.renderPass!=="translucent"||d.paint.get("raster-opacity")===0)return;const E=y.transform.projection.name==="globe",k=d.paint.get("raster-elevation")!==0,Z=k&&E;if(y.renderElevatedRasterBackface&&!Z)return;const K=y.context,Y=K.gl,ae=o.getSource(),re=function(ut,ct,dt,vt){const Tt=ct.paint.get("raster-color"),Qt=ut.type==="raster-array",kt=[],ra=ct.paint.get("raster-resampling"),ca=ct.paint.get("raster-color-mix");let xa=ct.paint.get("raster-color-range");const Ft=[ca[0],ca[1],ca[2],0],sa=ca[3];let zt=ra==="nearest"?vt.NEAREST:vt.LINEAR;if(Qt&&(kt.push("RASTER_ARRAY"),Tt||kt.push("RASTER_COLOR"),ra==="linear"&&kt.push("RASTER_ARRAY_LINEAR"),zt=vt.NEAREST,!xa&&ut.rasterLayers)){const oa=ut.rasterLayers.find(({id:ta})=>ta===ct.sourceLayer);oa&&oa.fields&&oa.fields.range&&(xa=oa.fields.range)}if(xa=xa||[0,1],Tt){kt.push("RASTER_COLOR"),dt.activeTexture.set(vt.TEXTURE2),ct.updateColorRamp(xa);let oa=ct.colorRampTexture;oa||(oa=ct.colorRampTexture=new n.T(dt,ct.colorRamp,vt.RGBA8)),oa.bind(vt.LINEAR,vt.CLAMP_TO_EDGE)}return{mix:Ft,range:xa,offset:sa,defines:kt,resampling:zt}}(ae,d,K,Y);if(ae instanceof n.aK&&!A.length&&!E)return;const pe=d.paint.get("raster-emissive-strength"),Pe=y.colorModeForDrapableLayerRenderPass(pe),Ce=y.terrain&&y.terrain.renderingToTexture,De=!y.options.moving,Le=d.paint.get("raster-resampling")==="nearest"?Y.NEAREST:Y.LINEAR;if(ae instanceof n.aK&&!A.length&&(ae.onNorthPole||ae.onSouthPole)){const ut=k?y.stencilModeFor3D():Pr.disabled;return void qt(!!ae.onNorthPole,null,y,o,d,pe,re,Sr.disabled,ut)}if(!A.length)return;const[Ke,it]=ae instanceof n.aK||Ce?[{},A]:y.stencilConfigForOverlap(A),tt=it[it.length-1].overscaledZ;Z&&re.defines.push("PROJECTION_GLOBE_VIEW"),k&&re.defines.push("RENDER_CUTOFF");const pt=(ut,ct,dt)=>{for(const vt of ut){const Tt=vt.toUnwrapped(),Qt=o.getTile(vt);if(Ce&&(!Qt||!Qt.hasData()))continue;K.activeTexture.set(Y.TEXTURE0);const kt=_h(Qt,ae,d,re);if(!kt||!kt.texture)continue;const{texture:ra,mix:ca,offset:xa,tileSize:Ft,buffer:sa}=kt;let zt,oa;Ce?(zt=ur.disabled,oa=vt.projMatrix):k?(zt=new ur(Y.LEQUAL,ur.ReadWrite,y.depthRangeFor3D),oa=E?Float32Array.from(y.transform.expandedFarZProjMatrix):y.transform.calculateProjMatrix(Tt,De)):(zt=y.depthModeForSublayer(vt.overscaledZ-tt,d.paint.get("raster-opacity")===1?ur.ReadWrite:ur.ReadOnly,Y.LESS),oa=y.transform.calculateProjMatrix(Tt,De));const ta=y.terrain&&Ce?y.terrain.stencilModeForRTTOverlap(vt):Ke[vt.overscaledZ],da=S?0:d.paint.get("raster-fade-duration");Qt.registerFadeDuration(da);const Xt=o.findLoadedParent(vt,0),pa=Fl(Qt,Xt,o,y.transform,da);let La,Fa;y.terrain&&y.terrain.prepareDrawTile(),K.activeTexture.set(Y.TEXTURE0),ra.bind(Le,Y.CLAMP_TO_EDGE),K.activeTexture.set(Y.TEXTURE1),Xt?(Xt.texture&&Xt.texture.bind(Le,Y.CLAMP_TO_EDGE),La=Math.pow(2,Xt.tileID.overscaledZ-Qt.tileID.overscaledZ),Fa=[Qt.tileID.canonical.x*La%1,Qt.tileID.canonical.y*La%1]):ra.bind(Le,Y.CLAMP_TO_EDGE),"useMipmap"in ra&&K.extTextureFilterAnisotropic&&y.transform.pitch>20&&Y.texParameterf(Y.TEXTURE_2D,K.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,K.extTextureFilterAnisotropicMax);const Va=y.transform;let cr;const jr=k?sm(Va):[0,0,0,0];let vr,Ir,Or,zr,Gr,Ur=0;if(Z&&ae instanceof n.aK&&ae.coordinates.length>3)vr=Float32Array.from(n.bc(n.cI(new n.bT(0,0,0)))),Ir=Float32Array.from(Va.globeMatrix),Or=Float32Array.from(n.cE(Va)),zr=[n.av(Va.center.lng),n.aC(Va.center.lat)],cr=ae.elevatedGlobePerspectiveTransform,Gr=ae.elevatedGlobeGridMatrix||new Float32Array(9);else if(Z){const rr=n.cF(vt.canonical);Ur=n.cG(rr.getCenter().lat),vr=Float32Array.from(n.bc(n.cI(vt.canonical))),Ir=Float32Array.from(Va.globeMatrix),Or=Float32Array.from(n.cE(Va)),zr=[n.av(Va.center.lng),n.aC(Va.center.lat)],cr=[0,0],Gr=Float32Array.from(n.cH(vt.canonical,rr,Ur,Va.worldSize/Va._pixelsPerMercatorPixel))}else cr=ae instanceof n.aK?ae.perspectiveTransform:[0,0],vr=new Float32Array(16),Ir=new Float32Array(9),Or=new Float32Array(16),zr=[0,0],Gr=new Float32Array(9);const mr=na(oa,vr,Ir,Or,Gr,Fa||[0,0],n.ag(y.transform.zoom),zr,jr,La||1,pa,d,cr,k?d.paint.get("raster-elevation"):0,2,ca,xa,re.range,Ft,sa,pe),fn=y.isTileAffectedByFog(vt),Er=y.getOrCreateProgram("raster",{defines:re.defines,overrideFog:fn});if(y.uploadCommonUniforms(K,Er,Tt),ae instanceof n.aK){const rr=ae.elevatedGlobeVertexBuffer,pn=ae.elevatedGlobeIndexBuffer;if(Ce||!E)ae.boundsBuffer&&ae.boundsSegments&&Er.draw(y,Y.TRIANGLES,zt,Pr.disabled,Pe,Sr.disabled,mr,d.id,ae.boundsBuffer,y.quadTriangleIndexBuffer,ae.boundsSegments);else if(rr&&pn){const Xn=Va.zoom<=n.c6?ae.elevatedGlobeSegments:ae.getSegmentsForLongitude(Va.center.lng);Xn&&Er.draw(y,Y.TRIANGLES,zt,Pr.disabled,Pe,ct,mr,d.id,rr,pn,Xn)}}else if(Z){zt=new ur(Y.LEQUAL,ur.ReadOnly,y.depthRangeFor3D);const rr=y.globeSharedBuffers;if(rr){const[pn,Xn,An]=rr.getGridBuffers(Ur,!1);Er.draw(y,Y.TRIANGLES,zt,dt||ta,y.colorModeForRenderPass(),ct,mr,d.id,pn,Xn,An)}}else{const{tileBoundsBuffer:rr,tileBoundsIndexBuffer:pn,tileBoundsSegments:Xn}=y.getTileBoundsBuffers(Qt);Er.draw(y,Y.TRIANGLES,zt,ta,Pe,Sr.disabled,mr,d.id,rr,pn,Xn)}}if(!(ae instanceof n.aK)&&Z)for(const vt of ut){const Tt=vt.canonical.y===(1<<vt.canonical.z)-1;vt.canonical.y===0&&qt(!0,vt,y,o,d,pe,re,ct,dt||Pr.disabled),Tt&&qt(!1,vt,y,o,d,pe,re,ct===Sr.frontCW?Sr.backCW:Sr.frontCW,dt||Pr.disabled)}};Z?pt(it,y.renderElevatedRasterBackface?Sr.backCW:Sr.frontCW,y.stencilModeFor3D()):pt(it,Sr.disabled,void 0),y.resetStencilClippingMasks()},"raster-particle":function(y,o,d,A,T,S){y.renderPass==="offscreen"&&function(E,k,Z,K){if(!K.length)return;const Y=E.context,ae=Y.gl,re=k.getSource();if(!(re instanceof Ui))return;const pe=Math.ceil(Math.sqrt(Z.paint.get("raster-particle-count")));let Pe=Z.particlePositionRGBAImage;if(!Pe||Pe.width!==pe){const it=function(tt){const pt=tt*tt,ut=new Uint8Array(4*pt),ct=function(vt){return vt|=0,vt=Math.imul(2747636419^vt,2654435769),vt=Math.imul(vt^vt>>>16,2654435769),((vt=Math.imul(vt^vt>>>16,2654435769))>>>0)/4294967296},dt=1/1.1;for(let vt=0;vt<pt;vt++){const Tt=dt*(ct(2*vt+0)+fa),Qt=dt*(ct(2*vt+1)+fa),kt=255*Tt%1,ra=255*Qt%1,ca=kt,xa=Qt-ra/255,Ft=ra;ut[4*vt+0]=255*(Tt-kt/255),ut[4*vt+1]=255*ca,ut[4*vt+2]=255*xa,ut[4*vt+3]=255*Ft}return ut}(pe);Pe=Z.particlePositionRGBAImage=new n.r({width:pe,height:pe},it)}let Ce=Z.particleFramebuffer;Ce?Ce.width!==pe&&(Ce.destroy(),Ce=Z.particleFramebuffer=Y.createFramebuffer(pe,pe,!0,null)):Ce=Z.particleFramebuffer=Y.createFramebuffer(pe,pe,!0,null);const De=[];for(const it of K){const tt=k.getTile(it);if(!(tt instanceof qo))continue;const pt=Mu(tt,re,Z);if(!pt)continue;const ut=[tt.tileSize,tt.tileSize];let ct=Z.tileFramebuffer;ct||(ct=Z.tileFramebuffer=Y.createFramebuffer(ut[0],ut[1],!0,null));let dt=tt.rasterParticleState;dt||(dt=tt.rasterParticleState=new Rh(Y,it,ut,Pe));const vt=dt.update(Z.lastInvalidatedAt);dt.particleTextureDimension!==pe&&dt.updateParticleTexture(it,Pe);const Tt=dt.targetColorTexture;dt.targetColorTexture=dt.backgroundColorTexture,dt.backgroundColorTexture=Tt;const Qt=dt.particleTexture0;dt.particleTexture0=dt.particleTexture1,dt.particleTexture1=Qt,De.push([it,pt,dt,vt])}if(De.length===0)return;const Le=n.q.now(),Ke=Z.previousDrawTimestamp?.001*(Le-Z.previousDrawTimestamp):.0167;if(Z.previousDrawTimestamp=Le,Z.hasColorMap()){Y.activeTexture.set(ae.TEXTURE0+2);let it=Z.colorRampTexture;it||(it=Z.colorRampTexture=new n.T(Y,Z.colorRamp,ae.RGBA8)),it.bind(ae.LINEAR,ae.CLAMP_TO_EDGE)}Y.bindFramebuffer.set(Z.tileFramebuffer.framebuffer),function(it,tt,pt){const ut=it.context,ct=ut.gl,dt=tt.tileFramebuffer;ut.activeTexture.set(ct.TEXTURE0);const vt={u_texture:0,u_opacity:1.05*(Qt=tt.paint.get("raster-particle-fade-opacity-factor"))/(Qt+.05)},Tt=it.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var Qt;for(const kt of pt){const[,,ra,ca]=kt;dt.colorAttachment.set(ra.targetColorTexture.texture),ut.viewport.set([0,0,dt.width,dt.height]),ut.clear({color:n.al.transparent}),ca&&(ra.backgroundColorTexture.bind(ct.NEAREST,ct.CLAMP_TO_EDGE),Tt.draw(it,ct.TRIANGLES,ur.disabled,Pr.disabled,Vr.alphaBlended,Sr.disabled,vt,tt.id,it.viewportBuffer,it.quadTriangleIndexBuffer,it.viewportSegments))}}(E,Z,De),function(it,tt,pt,ut){const ct=it.context,dt=ct.gl,vt=pt.tileFramebuffer,Tt=it.transform.projection.name==="globe",Qt=pt.paint.get("raster-particle-max-speed");for(const kt of ut){const[ra,ca,xa]=kt;ct.activeTexture.set(dt.TEXTURE0+0),ca.texture.bind(dt.LINEAR,dt.CLAMP_TO_EDGE),vt.colorAttachment.set(xa.targetColorTexture.texture);const Ft=it.getOrCreateProgram("rasterParticleDraw",{defines:ca.defines,overrideFog:!1});ct.activeTexture.set(dt.TEXTURE0+1);const sa=ca.scalarData?[]:[0,1,2,3].map(ta=>n.d7[ta](ra));sa.push(ra);const zt=ra.canonical.x,oa=ra.canonical.y;for(const ta of sa){const da=tt.getTile(Tt?ta.wrapped():ta);if(!da)continue;const Xt=da.rasterParticleState;if(!Xt)continue;const pa=ta.canonical.x+(1<<ta.canonical.z)*(ta.wrap-ra.wrap),La=ta.canonical.y;Xt.particleTexture0.bind(dt.NEAREST,dt.CLAMP_TO_EDGE);const Fa=aa(1,Xt.particleTexture0.size[0],[pa-zt,La-oa],0,ca.texture.size,2,Qt,ca.textureOffset,ca.scale,ca.offset);Ft.draw(it,dt.POINTS,ur.disabled,Pr.disabled,Vr.alphaBlended,Sr.disabled,Fa,pt.id,Xt.particleIndexBuffer,void 0,Xt.particleSegment)}}}(E,k,Z,De),Y.bindFramebuffer.set(Z.particleFramebuffer.framebuffer),function(it,tt,pt,ut){const ct=it.context,dt=ct.gl,vt=tt.paint.get("raster-particle-max-speed"),Tt=ut*tt.paint.get("raster-particle-speed-factor")*.15,Qt=function(ra){return Math.pow(ra,6)}(.01+1*tt.paint.get("raster-particle-reset-rate-factor")),kt=tt.particleFramebuffer;ct.viewport.set([0,0,kt.width,kt.height]);for(const ra of pt){const[,ca,xa]=ra;ct.activeTexture.set(dt.TEXTURE0+0),ca.texture.bind(dt.LINEAR,dt.CLAMP_TO_EDGE),ct.activeTexture.set(dt.TEXTURE0+1);const Ft=xa.particleTexture0;Ft.bind(dt.NEAREST,dt.CLAMP_TO_EDGE);const sa=Za(1,Ft.size[0],0,ca.texture.size,vt,Tt,Qt,ca.textureOffset,ca.scale,ca.offset);kt.colorAttachment.set(xa.particleTexture1.texture),ct.clear({color:n.al.transparent}),it.getOrCreateProgram("rasterParticleUpdate",{defines:ca.defines}).draw(it,dt.TRIANGLES,ur.disabled,Pr.disabled,Vr.unblended,Sr.disabled,sa,tt.id,it.viewportBuffer,it.quadTriangleIndexBuffer,it.viewportSegments)}}(E,Z,De,Ke)}(y,o,d,A),y.renderPass==="translucent"&&(function(E,k,Z,K,Y){const ae=E.context,re=ae.gl,pe=k.getSource().tileSize,Pe=5*(1-n.ae(n.bY,n.bY+1,E.transform.zoom))*pe+Z.paint.get("raster-particle-elevation"),Ce=!E.options.moving,De=E.transform.projection.name==="globe";if(!K.length)return;const[Le,Ke]=E.stencilConfigForOverlap(K),it=[];De&&it.push("PROJECTION_GLOBE_VIEW");const tt=E.stencilModeFor3D();for(const pt of Ke){const ut=pt.toUnwrapped(),ct=k.getTile(pt);if(!ct.rasterParticleState)continue;const dt=ct.rasterParticleState,vt=100;ct.registerFadeDuration(vt);const Tt=k.findLoadedParent(pt,0),Qt=Fl(ct,Tt,k,E.transform,vt);let kt,ra;E.terrain&&E.terrain.prepareDrawTile(),ae.activeTexture.set(re.TEXTURE0),dt.targetColorTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE),ae.activeTexture.set(re.TEXTURE1),Tt&&Tt.rasterParticleState?(Tt.rasterParticleState.targetColorTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE),kt=Math.pow(2,Tt.tileID.overscaledZ-ct.tileID.overscaledZ),ra=[ct.tileID.canonical.x*kt%1,ct.tileID.canonical.y*kt%1]):dt.targetColorTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE);const ca=De?Float32Array.from(E.transform.expandedFarZProjMatrix):E.transform.calculateProjMatrix(ut,Ce),xa=E.transform,Ft=Th(xa),sa=n.cF(pt.canonical),zt=n.cG(sa.getCenter().lat);let oa,ta,da,Xt,pa;De?(oa=Float32Array.from(n.bc(n.cI(pt.canonical))),ta=Float32Array.from(xa.globeMatrix),da=Float32Array.from(n.cE(xa)),Xt=[n.av(xa.center.lng),n.aC(xa.center.lat)],pa=Float32Array.from(n.cH(pt.canonical,sa,zt,xa.worldSize/xa._pixelsPerMercatorPixel))):(oa=new Float32Array(16),ta=new Float32Array(9),da=new Float32Array(16),Xt=[0,0],pa=new Float32Array(9));const La=Rt(ca,oa,ta,da,pa,ra||[0,0],n.ag(E.transform.zoom),Xt,Ft,kt||1,Qt,Pe),Fa=E.isTileAffectedByFog(pt),Va=E.getOrCreateProgram("rasterParticle",{defines:it,overrideFog:Fa});if(E.uploadCommonUniforms(ae,Va,ut),De){const cr=new ur(re.LEQUAL,ur.ReadOnly,E.depthRangeFor3D),jr=0,vr=E.globeSharedBuffers;if(vr){const[Ir,Or,zr]=vr.getGridBuffers(zt,jr!==0);Va.draw(E,re.TRIANGLES,cr,tt,Vr.alphaBlended,E.renderElevatedRasterBackface?Sr.frontCCW:Sr.backCCW,La,Z.id,Ir,Or,zr)}}else{const cr=E.depthModeForSublayer(0,ur.ReadOnly),jr=Le[pt.overscaledZ],{tileBoundsBuffer:vr,tileBoundsIndexBuffer:Ir,tileBoundsSegments:Or}=E.getTileBoundsBuffers(ct);Va.draw(E,re.TRIANGLES,cr,jr,Vr.alphaBlended,Sr.disabled,La,Z.id,vr,Ir,Or)}}E.resetStencilClippingMasks()}(y,o,d,A),y.style.map.triggerRepaint())},background:function(y,o,d,A){const T=d.paint.get("background-color"),S=d.paint.get("background-color-use-theme").constantOr("default")==="none",E=d.paint.get("background-opacity"),k=d.paint.get("background-emissive-strength"),Z=d.paint.get("background-pitch-alignment")==="viewport";if(E===0)return;const K=y.context,Y=K.gl,ae=y.transform,re=ae.tileSize,pe=d.paint.get("background-pattern");let Pe;if(pe!==void 0&&(pe===null||(Pe=y.imageManager.getPattern(n.I.from(pe.toString()),d.scope,y.style.getLut(d.scope)),!Pe)))return;const Ce=!pe&&T.a===1&&E===1&&y.opaquePassEnabledForLayer()?"opaque":"translucent";if(y.renderPass!==Ce)return;const De=Pr.disabled,Le=y.depthModeForSublayer(0,Ce==="opaque"?ur.ReadWrite:ur.ReadOnly),Ke=y.colorModeForDrapableLayerRenderPass(k),it=pe?"backgroundPattern":"background";let tt,pt=A;if(pt||(tt=y.getBackgroundTiles(),pt=Object.values(tt).map(ut=>ut.tileID)),pe&&(K.activeTexture.set(Y.TEXTURE0),y.imageManager.bind(y.context,d.scope)),Z){const ut=y.getOrCreateProgram(it,{overrideFog:!1,overrideRtt:!0}),ct=new Float32Array(n.ad.mat4.identity([])),dt=new n.aH(0,0,0,0,0),vt=pe?Ar(ct,k,E,y,0,d.scope,Pe,Z,{tileID:dt,tileSize:re}):Nr(ct,k,E,T.toRenderColor(S?null:d.lut));ut.draw(y,Y.TRIANGLES,Le,De,Ke,Sr.disabled,vt,d.id,y.viewportBuffer,y.quadTriangleIndexBuffer,y.viewportSegments)}else for(const ut of pt){const ct=y.isTileAffectedByFog(ut),dt=y.getOrCreateProgram(it,{overrideFog:ct}),vt=ut.toUnwrapped(),Tt=A?ut.projMatrix:y.transform.calculateProjMatrix(vt);y.prepareDrawTile();const Qt=o?o.getTile(ut):tt?tt[ut.key]:new Ql(ut,re,ae.zoom,y),kt=pe?Ar(Tt,k,E,y,0,d.scope,Pe,Z,{tileID:ut,tileSize:re}):Nr(Tt,k,E,T.toRenderColor(S?null:d.lut));y.uploadCommonUniforms(K,dt,vt);const{tileBoundsBuffer:ra,tileBoundsIndexBuffer:ca,tileBoundsSegments:xa}=y.getTileBoundsBuffers(Qt);dt.draw(y,Y.TRIANGLES,Le,De,Ke,Sr.disabled,kt,d.id,ra,ca,xa)}},sky:function(y,o,d){const A=y._atmosphere?n.ag(y.transform.zoom):1,T=d.paint.get("sky-opacity")*A;if(T===0)return;const S=y.context,E=d.paint.get("sky-type"),k=new ur(S.gl.LEQUAL,ur.ReadOnly,[0,1]),Z=y.frameCounter/1e3%1;E==="atmosphere"?y.renderPass==="offscreen"?d.needsSkyboxCapture(y)&&(function(K,Y,ae,re){const pe=K.context,Pe=pe.gl;let Ce=Y.skyboxFbo;if(!Ce){Ce=Y.skyboxFbo=pe.createFramebuffer(32,32,!0,null),Y.skyboxGeometry=new ng(pe),Y.skyboxTexture=pe.gl.createTexture(),Pe.bindTexture(Pe.TEXTURE_CUBE_MAP,Y.skyboxTexture),Pe.texParameteri(Pe.TEXTURE_CUBE_MAP,Pe.TEXTURE_WRAP_S,Pe.CLAMP_TO_EDGE),Pe.texParameteri(Pe.TEXTURE_CUBE_MAP,Pe.TEXTURE_WRAP_T,Pe.CLAMP_TO_EDGE),Pe.texParameteri(Pe.TEXTURE_CUBE_MAP,Pe.TEXTURE_MIN_FILTER,Pe.LINEAR),Pe.texParameteri(Pe.TEXTURE_CUBE_MAP,Pe.TEXTURE_MAG_FILTER,Pe.LINEAR);for(let it=0;it<6;++it)Pe.texImage2D(Pe.TEXTURE_CUBE_MAP_POSITIVE_X+it,0,Pe.RGBA,32,32,0,Pe.RGBA,Pe.UNSIGNED_BYTE,null)}pe.bindFramebuffer.set(Ce.framebuffer),pe.viewport.set([0,0,32,32]);const De=Y.getCenter(K,!0),Le=K.getOrCreateProgram("skyboxCapture"),Ke=new Float64Array(16);n.ad.mat4.identity(Ke),n.ad.mat4.rotateY(Ke,Ke,.5*-Math.PI),uo(K,Y,Le,Ke,De,0),n.ad.mat4.identity(Ke),n.ad.mat4.rotateY(Ke,Ke,.5*Math.PI),uo(K,Y,Le,Ke,De,1),n.ad.mat4.identity(Ke),n.ad.mat4.rotateX(Ke,Ke,.5*-Math.PI),uo(K,Y,Le,Ke,De,2),n.ad.mat4.identity(Ke),n.ad.mat4.rotateX(Ke,Ke,.5*Math.PI),uo(K,Y,Le,Ke,De,3),n.ad.mat4.identity(Ke),uo(K,Y,Le,Ke,De,4),n.ad.mat4.identity(Ke),n.ad.mat4.rotateY(Ke,Ke,Math.PI),uo(K,Y,Le,Ke,De,5),pe.viewport.set([0,0,K.width,K.height])}(y,d),d.markSkyboxValid(y)):y.renderPass==="sky"&&function(K,Y,ae,re,pe){const Pe=K.context,Ce=Pe.gl,De=K.transform,Le=K.getOrCreateProgram("skybox");Pe.activeTexture.set(Ce.TEXTURE0),Ce.bindTexture(Ce.TEXTURE_CUBE_MAP,Y.skyboxTexture);const Ke=((it,tt,pt,ut,ct)=>({u_matrix:it,u_sun_direction:tt,u_cubemap:0,u_opacity:ut,u_temporal_offset:ct}))(De.skyboxMatrix,Y.getCenter(K,!1),0,re,pe);K.uploadCommonUniforms(Pe,Le),Le.draw(K,Ce.TRIANGLES,ae,Pr.disabled,K.colorModeForRenderPass(),Sr.backCW,Ke,"skybox",Y.skyboxGeometry.vertexBuffer,Y.skyboxGeometry.indexBuffer,Y.skyboxGeometry.segment)}(y,d,k,T,Z):E==="gradient"&&y.renderPass==="sky"&&function(K,Y,ae,re,pe){const Pe=K.context,Ce=Pe.gl,De=K.transform,Le=K.getOrCreateProgram("skyboxGradient");Y.skyboxGeometry||(Y.skyboxGeometry=new ng(Pe)),Pe.activeTexture.set(Ce.TEXTURE0);let Ke=Y.colorRampTexture;Ke||(Ke=Y.colorRampTexture=new n.T(Pe,Y.colorRamp,Ce.RGBA8)),Ke.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE);const it=((tt,pt,ut,ct,dt)=>({u_matrix:tt,u_color_ramp:0,u_center_direction:pt,u_radius:n.ak(ut),u_opacity:ct,u_temporal_offset:dt}))(De.skyboxMatrix,Y.getCenter(K,!1),Y.paint.get("sky-gradient-radius"),re,pe);K.uploadCommonUniforms(Pe,Le),Le.draw(K,Ce.TRIANGLES,ae,Pr.disabled,K.colorModeForRenderPass(),Sr.backCW,it,"skyboxGradient",Y.skyboxGeometry.vertexBuffer,Y.skyboxGeometry.indexBuffer,Y.skyboxGeometry.segment)}(y,d,k,T,Z)},debug:function(y,o,d,A,T,S){for(let E=0;E<d.length;E++)if(T){const K=new n.al(A.r*.8,A.g*.8,A.b*.8,1);Bl(y,o,d[E],A,-1,-1,S),Bl(y,o,d[E],A,-1,1,S),Bl(y,o,d[E],A,1,1,S),Bl(y,o,d[E],A,1,-1,S),Bl(y,o,d[E],K,0,0,S)}else Bl(y,o,d[E],A,0,0,S)},custom:function(y,o,d,A){const T=y.context,S=d.implementation;if(!y.transform.projection.unsupportedLayers||!y.transform.projection.unsupportedLayers.includes("custom")||y.terrain&&(y.terrain.renderingToTexture||y.renderPass==="offscreen")&&d.isDraped(o)){if(y.renderPass==="offscreen"){const E=S.prerender;if(E){if(y.setCustomLayerDefaults(),T.setColorMode(y.colorModeForRenderPass()),y.transform.projection.name==="globe"){const k=y.transform.pointMerc;E.call(S,T.gl,y.transform.customLayerMatrix(),y.transform.getProjection(),y.transform.globeToMercatorMatrix(),n.ag(y.transform.zoom),[k.x,k.y],y.transform.pixelsPerMeterRatio)}else E.call(S,T.gl,y.transform.customLayerMatrix());T.setDirty(),y.setBaseState()}}else if(y.renderPass==="translucent"){if(y.terrain&&y.terrain.renderingToTexture){const k=S.renderToTile;if(k){const Z=A[0].canonical,K=new n.ac(Z.x+A[0].wrap*(1<<Z.z),Z.y,Z.z);T.setDepthMode(ur.disabled),T.setStencilMode(Pr.disabled),T.setColorMode(y.colorModeForRenderPass()),y.setCustomLayerDefaults(),k.call(S,T.gl,K),T.setDirty(),y.setBaseState()}return}y.setCustomLayerDefaults(),T.setColorMode(y.colorModeForRenderPass()),T.setStencilMode(Pr.disabled);const E=S.renderingMode==="3d"?new ur(y.context.gl.LEQUAL,ur.ReadWrite,y.depthRangeFor3D):y.depthModeForSublayer(0,ur.ReadOnly);if(T.setDepthMode(E),y.transform.projection.name==="globe"){const k=y.transform.pointMerc;S.render(T.gl,y.transform.customLayerMatrix(),y.transform.getProjection(),y.transform.globeToMercatorMatrix(),n.ag(y.transform.zoom),[k.x,k.y],y.transform.pixelsPerMeterRatio)}else S.render(T.gl,y.transform.customLayerMatrix());T.setDirty(),y.setBaseState(),T.bindFramebuffer.set(null)}}else n.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(y,o,d,A){if(y.renderPass==="opaque")return;const T=d.paint.get("model-opacity").constantOr(1);if(T===0)return;const S=d.paint.get("model-cast-shadows");if(y.renderPass==="shadow"&&(!S||y.terrain&&T<.65&&d._transitionablePaint._values["model-opacity"].value.expression instanceof n.ab))return;const E=y.shadowRenderer,k=d.paint.get("model-receive-shadows");E&&(E.useNormalOffset=!0,k||(E.enabled=!1));const Z=()=>{E&&(E.useNormalOffset=!0,k||(E.enabled=!0))},K=o.getSource();if(y.renderPass==="light-beam"&&K.type!=="batched-model")return;if(K.type==="vector"||K.type==="geojson")return function(Le,Ke,it,tt,pt){const ut=Le.transform;if(ut.projection.name!=="mercator")return void n.w(`Drawing 3D models for ${ut.projection.name} projection is not yet implemented`);const ct=ut.getFreeCameraOptions().position;if(!Le.modelManager)return;const dt=Le.modelManager;it.modelManager=dt;const vt=Le.shadowRenderer;if(!it._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const Tt=it._unevaluatedLayout._values["model-id"],Qt=Object.assign({},it.layout.get("model-id").parameters),kt=Le.style.order.indexOf(it.fqid);for(const ra of tt){const ca=Ke.getTile(ra).getBucket(it);if(!ca||ca.projection.name!==ut.projection.name)continue;const xa=ca.getModelUris();xa&&!ca.modelsRequested&&(dt.addModelsFromBucket(xa,pt),ca.modelsRequested=!0);const Ft=Vf(ra,ut);Qt.zoom=Ft;const sa=Tt.possiblyEvaluate(Qt);if(Jh(Le,ca,ra),jl.shadowUniformsInitialized=!1,jl.useSingleShadowCascade=!!vt&&vt.getMaxCascadeForTile(ra.toUnwrapped())===0,Le.renderPass==="shadow"&&vt){if(Le.currentShadowCascade===1&&ca.isInsideFirstShadowMapFrustum)continue;const ta=ut.calculatePosMatrix(ra.toUnwrapped(),ut.worldSize);if(jl.tileMatrix.set(ta),jl.shadowTileMatrix=Float32Array.from(vt.calculateShadowPassMatrixFromMatrix(ta)),jl.aabb.min.fill(0),jl.aabb.max[0]=jl.aabb.max[1]=n.ai,jl.aabb.max[2]=0,hp(ca,jl,Le,it.scope))continue}const zt=1<<ra.canonical.z,oa=[((ct.x-ra.wrap)*zt-ra.canonical.x)*n.ai,(ct.y*zt-ra.canonical.y)*n.ai,ct.z*zt*n.ai];Le.conflationActive&&Object.keys(ca.instancesPerModel).length>0&&Le.style.isLayerClipped(it,Ke.getSource())&&ca.updateReplacement(ra,Le.replacementSource,kt,pt)&&(ca.uploaded=!1,ca.upload(Le.context));for(let ta in ca.instancesPerModel){const da=ca.instancesPerModel[ta];da.features.length>0&&(ta=sa.evaluate(da.features[0].feature,{}));const Xt=dt.getModel(ta,pt);if(Xt&&Xt.uploaded)for(const pa of Xt.nodes)Vo(Le,it,pa,da,oa,ra,jl)}}}(y,o,d,A,K.type==="vector"?d.scope:""),void Z();if(!K.loaded())return;if(K.type==="batched-model")return function(Le,Ke,it,tt){it.resetLayerRenderingStats(Le);const pt=Le.context,ut=Le.transform,ct=Le.style.fog,dt=Le.shadowRenderer;if(ut.projection.name!=="mercator")return void n.w(`Drawing 3D landmark models for ${ut.projection.name} projection is not yet implemented`);const vt=Le.transform.getFreeCameraOptions().position,Tt=n.ad.vec3.scale([],[vt.x,vt.y,vt.z],Le.transform.worldSize),Qt=n.ad.vec3.negate([],Tt),kt=n.ad.mat4.identity([]),ra=n.dm(ut.center.lat,ut.zoom),ca=n.ad.mat4.fromScaling([],[1,1,1/ra]);n.ad.mat4.translate(kt,kt,Qt);const xa=it.paint.get("model-opacity").constantOr(1),Ft=new ur(pt.gl.LEQUAL,ur.ReadWrite,Le.depthRangeFor3D),sa=new ur(pt.gl.LEQUAL,ur.ReadOnly,Le.depthRangeFor3D),zt=new n.ce([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),oa=Le.renderPass==="shadow",ta=oa&&dt?dt.getCurrentCascadeFrustum():ut.getFrustum(ut.scaleZoom(ut.worldSize)),da=it.paint.get("model-front-cutoff"),Xt=da[2]<1,pa=Js(Le,it.paint.get("model-cutoff-fade-range")),La=it.getLayerRenderingStats();(function(Fa,Va,cr,jr){const vr=Fa.terrain?Fa.terrain.exaggeration():0,Ir=Fa.transform.zoom;for(const Or of jr){const zr=Va.getTile(Or).getBucket(cr);zr&&(zr.setFilter(cr.filter),Fa.conflationActive&&zr.updateReplacement(Or,Fa.replacementSource),zr.evaluateScale(Fa,cr),Fa.terrain&&vr>0&&zr.elevationUpdate(Fa.terrain,vr,Or,cr.source),zr.needsReEvaluation(Fa,Ir,cr)&&zr.evaluate(cr))}})(Le,Ke,it,tt),function(){let Fa,Va,cr;Xt?(Fa=tt.length-1,Va=-1,cr=-1):(Fa=0,Va=tt.length,cr=1);const jr=new Float64Array(16),vr=n.ad.vec3.create(),Ir=new n.P(0,0);for(let Or=Fa;Or!==Va;Or+=cr){const zr=tt[Or],Gr=Ke.getTile(zr).getBucket(it);if(!Gr||!Gr.uploaded)continue;let Ur=!1;dt&&(Ur=dt.getMaxCascadeForTile(zr.toUnwrapped())===0);const mr=ut.calculatePosMatrix(zr.toUnwrapped(),ut.worldSize),fn=Gr.modelTraits;!oa&&Xt&&(n.ad.mat4.invert(jr,mr),n.ad.vec3.transformMat4(vr,Tt,jr),Ir.x=vr[0],Ir.y=vr[1]);const Er=[];Gr.setFilter(it.filter);for(const rr of Gr.getNodesInfo()){if(rr.hiddenByReplacement||!rr.node.meshes)continue;const pn=rr.node;let Xn=0;Le.terrain&&pn.elevation&&(Xn=pn.elevation*Le.terrain.exaggeration());const An=(()=>{const fi=rr.aabb;return zt.min=[...fi.min],zt.max=[...fi.max],zt.min[2]+=Xn,zt.max[2]+=Xn,n.ad.vec3.transformMat4(zt.min,zt.min,mr),n.ad.vec3.transformMat4(zt.max,zt.max,mr),zt})(),kn=rr.evaluatedScale;if(kn[0]<=1&&kn[1]<=1&&kn[2]<=1&&An.intersects(ta)===0)continue;if(!oa&&Xt){const fi=.16666666666666666;rr.cameraCollisionOpacity=Tt[0]>An.min[0]&&Tt[0]<An.max[0]&&Tt[1]>An.min[1]&&Tt[1]<An.max[1]&&Tt[2]*ra<An.max[2]&&pn.footprint&&n.bA(Ir,pn.footprint)?Math.max(rr.cameraCollisionOpacity-fi,0):Math.min(1,rr.cameraCollisionOpacity+fi)}const ns=[...mr],_s=pn.anchor?pn.anchor[0]:0,co=pn.anchor?pn.anchor[1]:0;n.ad.mat4.translate(ns,ns,[_s*(kn[0]-1),co*(kn[1]-1),Xn]),n.ad.vec3.exactEquals(kn,n.dq)||n.ad.mat4.scale(ns,ns,kn);const ao=n.ad.mat4.multiply([],ns,pn.matrix),Ro=n.ad.mat4.multiply([],ut.expandedFarZProjMatrix,ao),Vn=n.ad.mat4.multiply([],ut.expandedFarZProjMatrix,ns),di=n.ad.vec4.transformMat4([],[_s,co,Xn,1],Ro)[2];pn.hidden=!1;let Bn=xa;oa||(Xt&&(Bn*=rr.cameraCollisionOpacity,Bn*=bh(ns,ut,rr.aabb,da)),Bn*=fp(pa,di)),Bn!==0?Er.push({nodeInfo:rr,depth:di,opacity:Bn,wvpForNode:Ro,wvpForTile:Vn,nodeModelMatrix:ao,tileModelMatrix:ns}):pn.hidden=!0}oa||Er.sort((rr,pn)=>!Xt||rr.opacity===1&&pn.opacity===1?rr.depth<pn.depth?-1:1:rr.opacity===1?-1:pn.opacity===1?1:rr.depth>pn.depth?-1:1);for(const rr of Er){const pn=rr.nodeInfo,Xn=pn.node;let An=n.ad.mat4.multiply([],ca,rr.tileModelMatrix);n.ad.mat4.multiply(An,kt,An);const kn=n.ad.mat4.invert([],An);n.ad.mat4.transpose(kn,kn),n.ad.mat4.scale(kn,kn,$d),An=n.ad.mat4.multiply(An,An,Xn.matrix);const ns=Le.renderPass==="light-beam",_s=it.paint.get("model-color-use-theme").constantOr("default")==="none",co=fn&n.ds.HasMapboxMeshFeatures,ao=co?0:pn.evaluatedRMEA[0][2];for(let Ro=0;Ro<Xn.meshes.length;++Ro){const Vn=Xn.meshes[Ro],di=Ro===Xn.lightMeshIndex;let Bn=rr.wvpForNode;if(di){if(!ns&&!Le.terrain&&Le.shadowRenderer){Le.currentLayer<Le.firstLightBeamLayer&&(Le.firstLightBeamLayer=Le.currentLayer);continue}Bn=rr.wvpForTile}else if(ns)continue;const fi={defines:[]},To=[];if(!oa&&dt&&(dt.useNormalOffset=!!Vn.normalBuffer),Hd(fi.defines,To,Vn,Le,_s?null:it.lut),co||fi.defines.push("DIFFUSE_SHADED"),Ur&&fi.defines.push("SHADOWS_SINGLE_CASCADE"),La&&(oa?La.numRenderedVerticesInShadowPass+=Vn.vertexArray.length:La.numRenderedVerticesInTransparentPass+=Vn.vertexArray.length),oa){Of(Vn,rr.nodeModelMatrix,Le,it);continue}let Oi=null;if(ct){const sc=Iu(rr.nodeModelMatrix,Le.transform);if(Oi=new Float32Array(sc),ut.projection.name!=="globe"){const bl=Vn.aabb.min,Jd=Vn.aabb.max,[Co,Vh]=ct.getOpacityForBounds(sc,bl[0],bl[1],Jd[0],Jd[1]);fi.overrideFog=Co>=Ia||Vh>=Ia}}const ms=Vn.material;let zc;ms.occlusionTexture&&ms.occlusionTexture.offsetScale&&(zc=ms.occlusionTexture.offsetScale,fi.defines.push("OCCLUSION_TEXTURE_TRANSFORM"));const Jo=Le.getOrCreateProgram("model",fi);!oa&&dt&&dt.setupShadowsFromMatrix(rr.tileModelMatrix,Jo,dt.useNormalOffset),Le.uploadCommonUniforms(pt,Jo,null,Oi);const du=ms.pbrMetallicRoughness;du.metallicFactor=.9,du.roughnessFactor=.5;const Gl=fr(new Float32Array(Bn),new Float32Array(An),new Float32Array(kn),new Float32Array(Xn.matrix),Le,rr.opacity,du.baseColorFactor.toRenderColor(null),ms.emissiveFactor,du.metallicFactor,du.roughnessFactor,ms,ao,it,[0,0,0],zc);!di&&(pn.hasTranslucentParts||rr.opacity<1)&&Jo.draw(Le,pt.gl.TRIANGLES,Ft,Pr.disabled,Vr.disabled,Sr.backCCW,Gl,it.id,Vn.vertexBuffer,Vn.indexBuffer,Vn.segments,it.paint,Le.transform.zoom,void 0,To),Jo.draw(Le,pt.gl.TRIANGLES,di?sa:Ft,Pr.disabled,di||rr.opacity<1||pn.hasTranslucentParts?Vr.alphaBlended:Vr.unblended,Sr.backCCW,Gl,it.id,Vn.vertexBuffer,Vn.indexBuffer,Vn.segments,it.paint,Le.transform.zoom,void 0,To)}}}}()}(y,o,d,A),void Z();if(K.type!=="model")return;const Y=K.getModels(),ae=[],re=y.transform.getFreeCameraOptions().position,pe=n.ad.vec3.scale([],[re.x,re.y,re.z],y.transform.worldSize);n.ad.vec3.negate(pe,pe);const Pe=[],Ce=[];let De=0;for(const Le of Y){const Ke=d.paint.get("model-rotation").constantOr(null),it=d.paint.get("model-scale").constantOr(null),tt=d.paint.get("model-translation").constantOr(null);Le.computeModelMatrix(y,Ke,it,tt,!0,!0,!1);const pt=n.ad.mat4.identity([]),ut=n.dm(Le.position.lat,y.transform.zoom),ct=n.ad.mat4.fromScaling([],[1,1,1/ut]);n.ad.mat4.translate(pt,pt,pe),ae.push({zScaleMatrix:ct,negCameraPosMatrix:pt});for(const dt of Le.nodes)rd(y.transform,dt,Le.matrix,y.transform.expandedFarZProjMatrix,De,Pe,Ce);De++}if(Pe.sort((Le,Ke)=>Ke.depth-Le.depth),y.renderPass!=="shadow"){if(T===1)for(const Le of Ce)Lu(Le,y,d,ae[Le.modelIndex],Pr.disabled,y.colorModeForRenderPass());else{for(const Le of Ce)Lu(Le,y,d,ae[Le.modelIndex],Pr.disabled,Vr.disabled);for(const Le of Ce)Lu(Le,y,d,ae[Le.modelIndex],y.stencilModeFor3D(),y.colorModeForRenderPass());y.resetStencilClippingMasks()}for(const Le of Pe)Lu(Le,y,d,ae[Le.modelIndex],Pr.disabled,y.colorModeForRenderPass());Z()}else{for(const Le of Ce)Of(Le.mesh,Le.nodeModelMatrix,y,d);for(const Le of Pe)Of(Le.mesh,Le.nodeModelMatrix,y,d);Z()}}},Wd={line:function(y,o,d){if(y.hasElevatedBuckets=!1,y.hasNonElevatedBuckets=!1,y._unevaluatedLayout.getValue("line-elevation-reference")!==void 0||y._unevaluatedLayout.getValue("line-z-offset")!==void 0){if(o){const A=o.getVisibleCoordinates();for(const T of A){const S=o.getTile(T).getBucket(y);if(S&&(S.hasZOffset?y.hasElevatedBuckets=!0:y.hasNonElevatedBuckets=!0,y.hasElevatedBuckets&&y.hasNonElevatedBuckets))break}}}else y.hasNonElevatedBuckets=!0},model:function(y,o,d){const A=o.getSource();if(!A.loaded())return;if(A.type==="vector"||A.type==="geojson")return void(d.modelManager&&d.modelManager.upload(d,A.type==="vector"?y.scope:""));if(A.type==="batched-model"||A.type!=="model")return;const T=A.getModels();for(const S of T)S.upload(d.context)},raster:function(y,o,d){const A=o.getSource();if(!(A instanceof Ui&&A.loaded()))return;const T=y.sourceLayer||A.rasterLayerIds&&A.rasterLayerIds[0];if(!T)return;const S=y.paint.get("raster-array-band")||A.getInitialBand(T);if(S==null)return;const E=o.getIds().map(k=>o.getTileByID(k));for(const k of E)k.updateNeeded(T,S)&&A.prepareTile(k,T,S)},"raster-particle":function(y,o,d){const A=o.getSource();if(!(A instanceof Ui&&A.loaded()))return;const T=y.sourceLayer||A.rasterLayerIds&&A.rasterLayerIds[0];if(!T)return;const S=y.paint.get("raster-particle-array-band")||A.getInitialBand(T);if(S==null)return;const E=o.getIds().map(k=>o.getTileByID(k));for(const k of E)k.updateNeeded(T,S)&&A.prepareTile(k,T,S)}},ig={fill:Oo};class om{constructor(o,d,A,T,S){this.context=new xn(o,d),this.transform=A,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=S,this._timeStamp=n.q.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={forceEnablePrecipitation:!1,showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const E=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","raster-particle","hillshade","model","background","sky"];for(const Z of E)this._debugParams.enabledLayers[Z]=!0;S.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),S.registerParameter(this._debugParams,["Precipitation"],"forceEnablePrecipitation"),S.registerParameter(this._debugParams,["FPS"],"fpsWindow",{min:1,max:100,step:1}),S.registerBinding(this._debugParams,["FPS"],"continousRedraw",{readonly:!0,label:"continuous redraw"}),S.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"value"}),S.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"graph",view:"graph",min:0,max:200});for(const Z of E)S.registerParameter(this._debugParams.enabledLayers,["Debug","Layers"],Z);this.occlusionParams=new pp(S),this.setup(),this.numSublayers=al.maxUnderzooming+al.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new n.dy,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new vo(this),this._wireframeDebugCache=new id,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[];const k=new n.r({width:1,height:1},Uint8Array.of(0,0,0,0));this.emptyDepthTexture=new n.T(this.context,k,o.RGBA8),this._clippingActiveLastFrame=!1,this.scaleFactor=T}updateTerrain(o,d){const A=!!o&&!!o.terrain&&this.transform.projection.supportsTerrain;if(!(A||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new qd(this,o));const T=this._terrain;this.transform.elevation=A?T:null,T.update(o,this.transform,d),this.transform.elevation&&!T.enabled&&(this.transform.elevation=null)}_updateFog(o){const d=o.fog;if(!d||this.transform.projection.name==="globe"||d.getOpacity(this.transform.pitch)<1||d.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[A,T]=d.getFovAdjustedRange(this.transform._fov);if(A>T)return void(this.transform.fogCullDistSq=null);const S=A+.78*(T-A);this.transform.fogCullDistSq=S*S}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(o){o&&!this._terrain&&(this._terrain=new qd(this,this.style)),this._forceTerrainMode=o}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(o,d){if(this.width=o*n.q.devicePixelRatio,this.height=d*n.q.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const A of this.style.order)this.style._mergedLayers[A].resize()}setup(){const o=this.context,d=new n.b5;d.emplaceBack(0,0),d.emplaceBack(n.ai,0),d.emplaceBack(0,n.ai),d.emplaceBack(n.ai,n.ai),this.tileExtentBuffer=o.createVertexBuffer(d,n.b7.members),this.tileExtentSegments=n.b8.simpleSegment(0,0,4,2);const A=new n.b5;A.emplaceBack(0,0),A.emplaceBack(n.ai,0),A.emplaceBack(0,n.ai),A.emplaceBack(n.ai,n.ai),this.debugBuffer=o.createVertexBuffer(A,n.b7.members),this.debugSegments=n.b8.simpleSegment(0,0,4,5);const T=new n.b5;T.emplaceBack(-1,-1),T.emplaceBack(1,-1),T.emplaceBack(-1,1),T.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(T,n.b7.members),this.viewportSegments=n.b8.simpleSegment(0,0,4,2);const S=new n.aU;S.emplaceBack(0,0,0,0),S.emplaceBack(n.ai,0,n.ai,0),S.emplaceBack(0,n.ai,0,n.ai),S.emplaceBack(n.ai,n.ai,n.ai,n.ai),this.mercatorBoundsBuffer=o.createVertexBuffer(S,n.ba.members),this.mercatorBoundsSegments=n.b8.simpleSegment(0,0,4,2);const E=new n.aV;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(E);const k=new n.b6;for(const K of[0,1,3,2,0])k.emplaceBack(K);this.debugIndexBuffer=o.createIndexBuffer(k),this.emptyTexture=new n.T(o,new n.r({width:1,height:1},Uint8Array.of(0,0,0,0)),o.gl.RGBA8),this.identityMat=n.ad.mat4.create();const Z=this.context.gl;this.stencilClearMode=new Pr({func:Z.ALWAYS,mask:0},0,255,Z.ZERO,Z.ZERO,Z.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(o){return o._makeTileBoundsBuffers(this.context,this.transform.projection),o._tileBoundsBuffer?{tileBoundsBuffer:o._tileBoundsBuffer,tileBoundsIndexBuffer:o._tileBoundsIndexBuffer,tileBoundsSegments:o._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const o=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,o.TRIANGLES,ur.disabled,this.stencilClearMode,Vr.disabled,Sr.disabled,Xc(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(o,d,A){if(!d||this.currentStencilSource===d.id||!o.isTileClipped()||!A||A.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let k=!1;for(const Z of A)if(this._tileClippingMaskIDs[Z.key]===void 0){k=!0;break}if(!k)return}this.currentStencilSource=d.id;const T=this.context,S=T.gl;this.nextStencilID+A.length>256&&this.clearStencil(),T.setColorMode(Vr.disabled),T.setDepthMode(ur.disabled);const E=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const k of A){const Z=d.getTile(k),K=this._tileClippingMaskIDs[k.key]=this.nextStencilID++,{tileBoundsBuffer:Y,tileBoundsIndexBuffer:ae,tileBoundsSegments:re}=this.getTileBoundsBuffers(Z);E.draw(this,S.TRIANGLES,ur.disabled,new Pr({func:S.ALWAYS,mask:0},K,255,S.KEEP,S.KEEP,S.REPLACE),Vr.disabled,Sr.disabled,Xc(k.projMatrix),"$clipping",Y,ae,re)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const o=this.nextStencilID++,d=this.context.gl;return new Pr({func:d.NOTEQUAL,mask:255},o,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(o){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(o);const d=this.context.gl;return new Pr({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(o){const d=this.context.gl,A=o.sort((E,k)=>k.overscaledZ-E.overscaledZ),T=A[A.length-1].overscaledZ,S=A[0].overscaledZ-T+1;if(S>1){this.currentStencilSource=void 0,this.nextStencilID+S>256&&this.clearStencil();const E={};for(let k=0;k<S;k++)E[k+T]=new Pr({func:d.GEQUAL,mask:255},k+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=S,[E,A]}return[{[T]:Pr.disabled},A]}colorModeForRenderPass(){const o=this.context.gl;return this._showOverdrawInspector?new Vr([o.CONSTANT_COLOR,o.ONE,o.CONSTANT_COLOR,o.ONE],new n.al(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Vr.unblended:Vr.alphaBlended}colorModeForDrapableLayerRenderPass(o){const d=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new Vr([d.ONE,d.ONE_MINUS_SRC_ALPHA,d.CONSTANT_ALPHA,d.ONE_MINUS_SRC_ALPHA],new n.al(0,0,0,o===void 0?0:o),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(o,d,A,T=!1){if(this.depthOcclusion)return new ur(this.context.gl.GREATER,ur.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!T)return ur.disabled;const S=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new ur(A||this.context.gl.LEQUAL,d,[S,S])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const o=this.context.gl,d=Math.ceil(this.width),A=Math.ceil(this.height),T=this.context.bindFramebuffer.get(),S=o.getParameter(o.TEXTURE_BINDING_2D);this.depthFBO&&this.depthFBO.width===d&&this.depthFBO.height===A||(this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),d!==0&&A!==0&&(this.depthFBO=new Hn(this.context,d,A,!1,"texture"),this.depthTexture=new n.T(this.context,{width:d,height:A,data:null},o.DEPTH24_STENCIL8),this.depthFBO.depthAttachment.set(this.depthTexture.texture))),this.context.bindFramebuffer.set(T),o.bindTexture(o.TEXTURE_2D,S),this.depthFBO&&(o.bindFramebuffer(o.READ_FRAMEBUFFER,null),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,this.depthFBO.framebuffer),o.blitFramebuffer(0,0,d,A,0,0,d,A,o.DEPTH_BUFFER_BIT,o.NEAREST),o.bindFramebuffer(o.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(this._dt===0?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce((o,d)=>o+d/this._fpsHistory.length,0))}render(o,d){const A=n.q.now();this._dt=A-this._timeStamp,this._timeStamp=A,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=o.map.repaint,this.style=o,this.options=d;const T=this.style._mergedLayers,S=!(!this.terrain||!this.terrain.enabled),E=()=>this.style._getOrder(S).filter(Ft=>{const sa=T[Ft];return!(sa.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[sa.type]});let k=E(),Z=!1,K=!1;for(const Ft of k){const sa=T[Ft];sa.type==="circle"&&(Z=!0),sa.type==="symbol"&&(sa.hasInitialOcclusionOpacityProperties?K=!0:Z=!0)}let Y=k.map(Ft=>T[Ft]);const ae=this.style._mergedSourceCaches;this.imageManager=o.imageManager,this.modelManager=o.modelManager,this.symbolFadeChange=o.placement.symbolFadeChange(n.q.now()),this.imageManager.beginFrame();let re=0,pe=!1;for(const Ft in ae){const sa=ae[Ft];sa.used&&(sa.prepare(this.context),sa.getSource().usedInConflation&&++re)}let Pe=!1;for(const Ft of Y)Ft.isHidden(this.transform.zoom)||(Ft.type==="clip"&&(Pe=!0),this.prepareLayer(Ft));const Ce={},De={},Le={},Ke={},it={};for(const Ft in ae){const sa=ae[Ft];Ce[Ft]=sa.getVisibleCoordinates(),De[Ft]=Ce[Ft].slice().reverse(),Le[Ft]=sa.getVisibleCoordinates(!0).reverse(),Ke[Ft]=sa.getShadowCasterCoordinates(),it[Ft]=sa.sortCoordinatesByDistance(Ce[Ft])}const tt=Ft=>{const sa=this.style.getLayerSourceCache(Ft);return sa&&sa.used?sa.getSource():null};if(re||Pe||this._clippingActiveLastFrame){const Ft=[],sa=[];let zt=0;for(const oa of Y)this.isSourceForClippingOrConflation(oa,tt(oa))&&(Ft.push(oa),sa.push(zt)),zt++;if(Ft&&(Pe||Ft.length>1)||this._clippingActiveLastFrame){Pe=!1;const oa=[];for(let ta=0;ta<Ft.length;ta++){const da=Ft[ta],Xt=sa[ta],pa=this.style.getLayerSourceCache(da);if(!pa||!pa.used||!pa.getSource().usedInConflation&&da.type!=="clip")continue;let La=n.dA,Fa=n.by.None;const Va=[];let cr=!0;if(da.type==="clip"){La=Xt;for(const jr of da.layout.get("clip-layer-types"))Fa|=jr==="model"?n.by.Model:jr==="symbol"?n.by.Symbol:n.by.FillExtrusion;for(const jr of da.layout.get("clip-layer-scope"))Va.push(jr);da.isHidden(this.transform.zoom)?cr=!1:Pe=!0}cr&&oa.push({layer:da.fqid,cache:pa,order:La,clipMask:Fa,clipScope:Va})}this.replacementSource.setSources(oa),pe=!0}}this._clippingActiveLastFrame=Pe,pe||this.replacementSource.clear(),this.conflationActive=pe,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let Ft=0;Ft<Y.length;Ft++){const sa=Y[Ft],zt=sa.cutoffRange();if(this.longestCutoffRange=Math.max(zt,this.longestCutoffRange),zt>0){const oa=tt(sa);oa&&(this.minCutoffZoom=Math.max(oa.minzoom,this.minCutoffZoom)),sa.minzoom&&(this.minCutoffZoom=Math.max(sa.minzoom,this.minCutoffZoom))}sa.is3D(S)&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=Ft),this._lastOcclusionLayer=Ft)}const pt=this.style&&this.style.fog;pt?(this._fogVisible=pt.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=pt.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(Le),this.opaquePassCutoff=0,k=E(),Y=k.map(Ft=>T[Ft]));const ut=this._shadowRenderer;if(ut){ut.updateShadowParameters(this.transform,this.style.directionalLight);for(const Ft in ae)for(const sa of Ce[Ft]){let zt={min:0,max:0};this.terrain&&(zt=this.terrain.getMinMaxForTile(sa)||zt),ut.addShadowReceiver(sa.toUnwrapped(),zt.min,zt.max)}}this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new n.dz(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new dp(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0);const ct=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.snow),dt=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.rain);if(ct&&!this._snow&&(this._snow=new Qh(this)),!ct&&this._snow&&(this._snow.destroy(),delete this._snow),dt&&!this._rain&&(this._rain=new xh(this)),!dt&&this._rain&&(this._rain.destroy(),delete this._rain),this._snow&&this._snow.update(this),this._rain&&this._rain.update(this),!Vt.has(this.context.gl))return;this.renderPass="offscreen";for(const Ft of Y){const sa=o.getLayerSourceCache(Ft);if(!Ft.hasOffscreenPass()||Ft.isHidden(this.transform.zoom))continue;const zt=sa?De[sa.id]:void 0;(Ft.type==="custom"||Ft.type==="raster"||Ft.type==="raster-particle"||Ft.isSky()||zt&&zt.length)&&this.renderLayer(this,sa,Ft,zt)}this.depthRangeFor3D=[0,1-(Y.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,Ke)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const vt=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),Tt=(()=>{if(d.showOverdrawInspector)return n.al.black;const Ft=this.style.fog;if(Ft&&this.transform.projection.supportsFog){const sa=this.style.getLut(Ft.scope);if(!vt){const zt=Ft.properties.get("color-use-theme")==="none",oa=Ft.properties.get("color").toRenderColor(zt?null:sa).toArray01();return new n.al(...oa)}if(vt){const zt=Ft.properties.get("space-color-use-theme")==="none",oa=Ft.properties.get("space-color").toRenderColor(zt?null:sa).toArray01();return new n.al(...oa)}}return n.al.transparent})();if(this.context.clear({color:Tt,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&vt&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=k.length-1;this.currentLayer>=0;this.currentLayer--){const Ft=Y[this.currentLayer],sa=o.getLayerSourceCache(Ft);if(Ft.isSky())continue;const zt=sa?(Ft.is3D(S)?it:De)[sa.id]:void 0;this._renderTileClippingMasks(Ft,sa,zt),this.renderLayer(this,sa,Ft,zt)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&vt&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||n.ag(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<k.length;this.currentLayer++){const Ft=Y[this.currentLayer],sa=o.getLayerSourceCache(Ft);Ft.isSky()&&this.renderLayer(this,sa,Ft,sa?De[sa.id]:void 0)}function Qt(Ft,sa){let zt;return sa&&(zt=(Ft.type==="symbol"?Le:Ft.is3D(S)?it:De)[sa.id]),zt}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<k.length;){const Ft=Y[this.currentLayer];if(Ft.type==="raster"||Ft.type==="raster-particle"){const sa=o.getLayerSourceCache(Ft);this.renderLayer(this,sa,Ft,Qt(Ft,sa))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let kt=0;ut&&(kt=ut.getShadowCastingLayerCount());let ra=!1,ca=-1;for(let Ft=0;Ft<k.length;++Ft){const sa=Y[Ft];sa.isHidden(this.transform.zoom)||sa.is3D(S)&&(ca=Ft)}K&&ca===-1&&(Z=!0);let xa=!1;for(;this.currentLayer<k.length;){const Ft=Y[this.currentLayer],sa=o.getLayerSourceCache(Ft);if(Ft.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(Ft)){if(Ft.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(!xa&&Ft.is3D(S)&&!S){const zt=this.currentLayer,oa=ta=>{for(this.currentLayer=0;this.currentLayer<Y.length;this.currentLayer++){const da=Y[this.currentLayer];if(ig[da.type]){const Xt=this.style.getLayerSourceCache(da);ig[da.type](this,Xt,da,Qt(da,Xt),ta)}}};oa("initialize"),oa("reset"),this.currentLayer=zt,xa=!0}if(Z&&!ra&&this.terrain&&!this.transform.isOrthographic&&(ra=!0,this.blitDepth()),K&&ca!==-1&&this.currentLayer===ca+1&&!this.transform.isOrthographic&&this.blitDepth(),this.terrain||this._renderTileClippingMasks(Ft,sa,sa?Ce[sa.id]:void 0),this.renderLayer(this,sa,Ft,Qt(Ft,sa)),!this.terrain&&ut&&kt>0&&Ft.hasShadowPass()&&--kt==0&&(ut.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const zt=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=zt;this.currentLayer++){const oa=Y[this.currentLayer];if(!oa.hasLightBeamPass())continue;const ta=o.getLayerSourceCache(oa);this.renderLayer(this,ta,oa,ta?De[ta.id]:void 0)}this.currentLayer=zt,this.renderPass="translucent"}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const zt=this.currentLayer;this.depthOcclusion=!0;for(const oa of this.layersWithOcclusionOpacity){this.currentLayer=oa;const ta=Y[this.currentLayer],da=o.getLayerSourceCache(ta),Xt=da?De[da.id]:void 0;this.terrain||this._renderTileClippingMasks(ta,da,da?Ce[da.id]:void 0),this.renderLayer(this,da,ta,Xt)}this.depthOcclusion=!1,this.currentLayer=zt,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this._snow&&this._snow.draw(this),this._rain&&this._rain.draw(this),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let Ft=null;Y.forEach(sa=>{const zt=o.getLayerSourceCache(sa);zt&&!sa.isHidden(this.transform.zoom)&&zt.getVisibleCoordinates().length&&(!Ft||Ft.getSource().maxzoom<zt.getSource().maxzoom)&&(Ft=zt)}),Ft&&this.options.showTileBoundaries&&Ph.debug(this,Ft,Ft.getVisibleCoordinates(),n.al.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&Ph.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new n.al(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(Ft){const sa=Ft.transform.padding;Xh(Ft,Ft.transform.height-(sa.top||0),3,tc),Xh(Ft,sa.bottom||0,3,ag),ed(Ft,sa.left||0,3,up),ed(Ft,Ft.transform.width-(sa.right||0),3,rg);const zt=Ft.transform.centerPoint;(function(oa,ta,da,Xt){td(oa,ta-1,da-10,2,20,Xt),td(oa,ta-10,da-1,20,2,Xt)})(Ft,zt.x,Ft.transform.height-zt.y,Ch)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),pe||(this.conflationActive=!1)}prepareLayer(o){this.gpuTimingStart(o);const{unsupportedLayers:d}=this.transform.projection,A=!d||!d.includes(o.type);if(Wd[o.type]&&(A||this.terrain&&o.type==="custom")){const T=this.style.getLayerSourceCache(o);Wd[o.type](o,T,this)}this.gpuTimingEnd()}renderLayer(o,d,A,T){A.isHidden(this.transform.zoom)||(A.type==="background"||A.type==="sky"||A.type==="custom"||A.type==="model"||A.type==="raster"||A.type==="raster-particle"||T&&T.length)&&(this.id=A.id,this.gpuTimingStart(A),o.transform.projection.unsupportedLayers&&o.transform.projection.unsupportedLayers.includes(A.type)&&(!o.terrain||A.type!=="custom")||A.type==="clip"||Ph[A.type](o,d,A,T,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(o){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery,A=this.context.gl;let T=this.gpuTimers[o.id];T||(T=this.gpuTimers[o.id]={calls:0,cpuTime:0,query:A.createQuery()}),T.calls++,A.beginQuery(d.TIME_ELAPSED_EXT,T.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const o=this.context.extTimerQuery,d=this.context.gl,A=d.createQuery();this.deferredRenderGpuTimeQueries.push(A),d.beginQuery(o.TIME_ELAPSED_EXT,A)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const o=this.gpuTimers;return this.gpuTimers={},o}collectDeferredRenderGpuQueries(){const o=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],o}queryGpuTimers(o){const d={};for(const A in o){const T=o[A],S=this.context.extTimerQuery,E=S.getQueryParameter(T.query,this.context.gl.QUERY_RESULT)/1e6;S.deleteQueryEXT(T.query),d[A]=E}return d}queryGpuTimeDeferredRender(o){if(!this.options.gpuTimingDeferredRender)return 0;const d=this.context.gl;let A=0;for(const T of o)A+=d.getQueryParameter(T,d.QUERY_RESULT)/1e6,d.deleteQuery(T);return A}translatePosMatrix(o,d,A,T,S){if(!A[0]&&!A[1])return o;const E=S?T==="map"?this.transform.angle:0:T==="viewport"?-this.transform.angle:0;if(E){const K=Math.sin(E),Y=Math.cos(E);A=[A[0]*Y-A[1]*K,A[0]*K+A[1]*Y]}const k=[S?A[0]:n.at(d,A[0],this.transform.zoom),S?A[1]:n.at(d,A[1],this.transform.zoom),0],Z=new Float32Array(16);return n.ad.mat4.translate(Z,o,k),Z}saveTileTexture(o){const d=o.size[0],A=this._tileTextures[d];A?A.push(o):this._tileTextures[d]=[o]}getTileTexture(o){const d=this._tileTextures[o];return d&&d.length>0?d.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(o,d,A){const T=A===void 0?this.terrain&&this.terrain.renderingToTexture:A,S=[];return this.style&&this.style.enable3dLights()&&(o==="globeRaster"||o==="terrainRaster"?(S.push("LIGHTING_3D_MODE"),S.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):T||S.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"&&(this._shadowMapDebug||S.push("DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(S.push("TERRAIN"),this.linearFloatFilteringSupported()&&S.push("TERRAIN_DEM_FLOAT_FORMAT")),this.transform.projection.name==="globe"&&S.push("GLOBE"),!this._fogVisible||T||d!==void 0&&!d||S.push("FOG","FOG_DITHERING"),T&&S.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&S.push("OVERDRAW_INSPECTOR"),S}getOrCreateProgram(o,d){this.cache=this.cache||{};const A=d&&d.defines||[],T=d&&d.config,S=this.currentGlobalDefines(o,d&&d.overrideFog,d&&d.overrideRtt).concat(A),E=tg.cacheKey(il[o],o,S,T);return this.cache[E]||(this.cache[E]=new tg(this.context,o,il[o],T,Mi[o],S)),this.cache[E]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new n.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA8))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),this.emptyDepthTexture&&this.emptyDepthTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(o,d){if(this.style.enable3dLights()){const A=this.style.directionalLight,T=this.style.ambientLight;if(A&&T){const S=((E,k,Z)=>{const K=E.properties.get("direction"),Y=E.properties.get("color-use-theme")==="none",ae=E.properties.get("color").toRenderColor(Y?null:Z.getLut(E.scope)).toArray01(),re=E.properties.get("intensity"),pe=k.properties.get("color-use-theme")==="none",Pe=k.properties.get("color").toRenderColor(pe?null:Z.getLut(k.scope)).toArray01(),Ce=k.properties.get("intensity"),De=[K.x,K.y,K.z],Le=n.cN(Pe,Ce),Ke=n.cN(ae,re);return{u_lighting_ambient_color:Le,u_lighting_directional_dir:De,u_lighting_directional_color:Ke,u_ground_radiance:Qc(De,Ke,Le)}})(A,T,this.style);d.setLightsUniformValues(o,S)}}}uploadCommonUniforms(o,d,A,T,S){if(this.uploadCommonLightUniforms(o,d),this.terrain&&this.terrain.renderingToTexture)return;const E=this.style.fog;if(E){const k=E.getOpacity(this.transform.pitch),Z=((K,Y,ae,re,pe,Pe,Ce,De,Le,Ke,it,tt)=>{const pt=K.transform,ut=Y.properties.get("color-use-theme")==="none",ct=Y.properties.get("color").toRenderColor(ut?null:K.style.getLut(Y.scope)).toArray01();ct[3]=re;const dt=K.frameCounter/1e3%1,[vt,Tt]=Y.properties.get("vertical-range");return{u_fog_matrix:ae?pt.calculateFogTileMatrix(ae):tt||K.identityMat,u_fog_range:Y.getFovAdjustedRange(pt._fov),u_fog_color:ct,u_fog_horizon_blend:Y.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(vt,Tt),Tt],u_fog_temporal_offset:dt,u_frustum_tl:pe,u_frustum_tr:Pe,u_frustum_br:Ce,u_frustum_bl:De,u_globe_pos:Le,u_globe_radius:Ke,u_viewport:it,u_globe_transition:n.ag(pt.zoom),u_is_globe:+(pt.projection.name==="globe")}})(this,E,A,k,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*n.q.devicePixelRatio,this.transform.height*n.q.devicePixelRatio],T);d.setFogUniformValues(o,Z)}S&&d.setCutoffUniformValues(o,S.uniformValues)}setTileLoadedFlag(o){this.tileLoaded=o}saveCanvasCopy(){const o=this.canvasCopy();o&&(this.frameCopies.push(o),this.tileLoaded=!1)}canvasCopy(){const o=this.context.gl,d=o.createTexture();return o.bindTexture(o.TEXTURE_2D,d),o.copyTexImage2D(o.TEXTURE_2D,0,o.RGBA,0,0,o.drawingBufferWidth,o.drawingBufferHeight,0),d}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const o=this.style&&this.style.fog;return!!o&&o.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const o=this._backgroundTiles,d=this._backgroundTiles={},A=this.transform.coveringTiles({tileSize:512});for(const T of A)d[T.key]=o[T.key]||new Ql(T,512,this.transform.tileZoom,this);return d}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(o,d){return!(!o.is3D(!(!this.terrain||!this.terrain.enabled))||o.type!=="clip"&&(o.minzoom&&o.minzoom>this.transform.zoom||(this.style._clipLayerPresent||o.sourceLayer!=="building")&&(!d||d.type!=="batched-model")))}isTileAffectedByFog(o){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let d=this._cachedTileFogOpacities[o.key];return d||(this._cachedTileFogOpacities[o.key]=d=this.style.fog.getOpacityForTile(o)),d[0]>=Ia||d[1]>=Ia}setupDepthForOcclusion(o,d,A){const T=this.context,S=T.gl,E=!!A;var k;A||(A={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0}),T.activeTexture.set(S.TEXTURE3),o&&this.depthFBO&&this.depthTexture?(this.depthTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE),A.u_depth_size_inv=[1/this.depthFBO.width,1/this.depthFBO.height],A.u_depth_range_unpack=[2/((k=this.depthRangeFor3D)[1]-k[0]),-1-2*k[0]/(k[1]-k[0])],A.u_occluder_half_size=.5*this.occlusionParams.occluderSize,A.u_occlusion_depth_offset=this.occlusionParams.depthOffset):this.emptyDepthTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE),T.activeTexture.set(S.TEXTURE0),E||d.setTerrainUniformValues(T,A)}}function sg(y,o){let d=!1,A=null;const T=()=>{A=null,d&&(y(),A=setTimeout(T,o),d=!1)};return()=>(d=!0,A||T(),A)}class Wg{constructor(o){this._hashName=o&&encodeURIComponent(o),n.aQ(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=sg(this._updateHashUnthrottled.bind(this),300)}addTo(o){return this._map=o,window.addEventListener("hashchange",this._onHashChange,!1),o.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const o=this._map;if(!o)return"";const d=pA(o);if(this._hashName){const A=this._hashName;let T=!1;const S=location.hash.slice(1).split("&").map(E=>{const k=E.split("=")[0];return k===A?(T=!0,`${k}=${d}`):E}).filter(E=>E);return T||S.push(`${A}=${d}`),`#${S.join("&")}`}return`#${d}`}_getCurrentHash(){const o=location.hash.replace("#","");if(this._hashName){let d;return o.split("&").map(A=>A.split("=")).forEach(A=>{A[0]===this._hashName&&(d=A)}),(d&&d[1]||"").split("/")}return o.split("/")}_onHashChange(){const o=this._map;if(!o)return!1;const d=this._getCurrentHash();if(d.length>=3&&!d.some(A=>isNaN(A))){const A=o.dragRotate.isEnabled()&&o.touchZoomRotate.isEnabled()?+(d[3]||0):o.getBearing();return o.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:A,pitch:+(d[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function pA(y,o){const d=y.getCenter(),A=Math.round(100*y.getZoom())/100,T=Math.ceil((A*Math.LN2+Math.log(512/360/.5))/Math.LN10),S=Math.pow(10,T),E=Math.round(d.lng*S)/S,k=Math.round(d.lat*S)/S,Z=y.getBearing(),K=y.getPitch();let Y=o?`/${E}/${k}/${A}`:`${A}/${k}/${E}`;return(Z||K)&&(Y+="/"+Math.round(10*Z)/10),K&&(Y+=`/${Math.round(K)}`),Y}const lm={linearity:.3,easing:n.dB(0,0,.3,1)},hl=n.l({deceleration:2500,maxSpeed:1400},lm),Rl=n.l({deceleration:20,maxSpeed:1400},lm),mA=n.l({deceleration:1e3,maxSpeed:360},lm),gA=n.l({deceleration:1e3,maxSpeed:90},lm);class yA{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:n.q.now(),settings:o})}_drainInertiaBuffer(){const o=this._inertiaBuffer,d=n.q.now();for(;o.length>0&&d-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const d={zoom:0,bearing:0,pitch:0,pan:new n.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:S}of this._inertiaBuffer)d.zoom+=S.zoomDelta||0,d.bearing+=S.bearingDelta||0,d.pitch+=S.pitchDelta||0,S.panDelta&&d.pan._add(S.panDelta),S.around&&(d.around=S.around),S.pinchAround&&(d.pinchAround=S.pinchAround);const A=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,T={};if(d.pan.mag()){const S=cm(d.pan.mag(),A,n.l({},hl,o||{}));T.offset=d.pan.mult(S.amount/d.pan.mag()),T.center=this._map.transform.center,um(T,S)}if(d.zoom){const S=cm(d.zoom,A,Rl);T.zoom=this._map.transform.zoom+S.amount,um(T,S)}if(d.bearing){const S=cm(d.bearing,A,mA);T.bearing=this._map.transform.bearing+n.ay(S.amount,-179,179),um(T,S)}if(d.pitch){const S=cm(d.pitch,A,gA);T.pitch=this._map.transform.pitch+S.amount,um(T,S)}if(T.zoom||T.bearing){const S=d.pinchAround===void 0?d.around:d.pinchAround;T.around=S?this._map.unproject(S):this._map.getCenter()}return this.clear(),T.noMoveStart=!0,T}}function um(y,o){(!y.duration||y.duration<o.duration)&&(y.duration=o.duration,y.easing=o.easing)}function cm(y,o,d){const{maxSpeed:A,linearity:T,deceleration:S}=d,E=n.ay(y*T/(o/1e3),-A,A),k=Math.abs(E)/(S*T);return{easing:d.easing,duration:1e3*k,amount:E*(k/2)}}class Tl extends n.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,d,A,T={}){const S=Re(d.getCanvasContainer(),A),E=d.unproject(S);super(o,n.l({point:S,lngLat:E,originalEvent:A},T)),this._defaultPrevented=!1,this.target=d}}class gp extends n.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,d,A){const T=o==="touchend"?A.changedTouches:A.touches,S=we(d.getCanvasContainer(),T),E=S.map(Z=>d.unproject(Z)),k=S.reduce((Z,K,Y,ae)=>Z.add(K.div(ae.length)),new n.P(0,0));super(o,{points:S,point:k,lngLats:E,lngLat:d.unproject(k),originalEvent:A}),this._defaultPrevented=!1}}class AA extends n.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,d){super("wheel",{originalEvent:d}),this._defaultPrevented=!1}}class vA{constructor(o,d){this._map=o,this._clickTolerance=d.clickTolerance}reset(){this._mousedownPos=void 0}wheel(o){return this._firePreventable(new AA(this._map,o))}mousedown(o,d){return this._mousedownPos=d,this._firePreventable(new Tl(o.type,this._map,o))}mouseup(o){this._map.fire(new Tl(o.type,this._map,o))}preclick(o){const d=n.l({},o);d.type="preclick",this._map.fire(new Tl(d.type,this._map,d))}click(o,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||(this.preclick(o),this._map.fire(new Tl(o.type,this._map,o)))}dblclick(o){return this._firePreventable(new Tl(o.type,this._map,o))}mouseover(o){this._map.fire(new Tl(o.type,this._map,o))}mouseout(o){this._map.fire(new Tl(o.type,this._map,o))}touchstart(o){return this._firePreventable(new gp(o.type,this._map,o))}touchmove(o){this._map.fire(new gp(o.type,this._map,o))}touchend(o){this._map.fire(new gp(o.type,this._map,o))}touchcancel(o){this._map.fire(new gp(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class t0{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(o){this._map.fire(new Tl(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Tl("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._map.fire(new Tl(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class _A{constructor(o,d){this._map=o,this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,d){this.isEnabled()&&o.shiftKey&&o.button===0&&(fe(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(o,d){if(!this._active)return;const A=d,T=this._startPos,S=this._lastPos;if(!T||!S||S.equals(A)||!this._box&&A.dist(T)<this._clickTolerance)return;this._lastPos=A,this._box||(this._box=$("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",o));const E=Math.min(T.x,A.x),k=Math.max(T.x,A.x),Z=Math.min(T.y,A.y),K=Math.max(T.y,A.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${E}px,${Z}px)`,this._box.style.width=k-E+"px",this._box.style.height=K-Z+"px")})}mouseupWindow(o,d){if(!this._active)return;const A=this._startPos,T=d;if(A&&o.button===0){if(this.reset(),ge(),A.x!==T.x||A.y!==T.y)return this._map.fire(new n.A("boxzoomend",{originalEvent:o})),{cameraAnimation:S=>S.fitScreenCoordinates(A,T,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",o)}}keydown(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),le(),delete this._startPos,delete this._lastPos}_fireEvent(o,d){return this._map.fire(new n.A(o,{originalEvent:d}))}}function ji(y,o){const d={};for(let A=0;A<y.length;A++)d[y[A].identifier]=o[A];return d}class Yg{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(o,d,A){(this.centroid||A.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=o.timeStamp),A.length===this.numTouches&&(this.centroid=function(T){const S=new n.P(0,0);for(const E of T)S._add(E);return S.div(T.length)}(d),this.touches=ji(A,d)))}touchmove(o,d,A){if(this.aborted||!this.centroid)return;const T=ji(A,d);for(const S in this.touches){const E=T[S];(!E||E.dist(this.touches[S])>30)&&(this.aborted=!0)}}touchend(o,d,A){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),A.length===0){const T=!this.aborted&&this.centroid;if(this.reset(),T)return T}}}class Xg{constructor(o){this.singleTap=new Yg(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(o,d,A){this.singleTap.touchstart(o,d,A)}touchmove(o,d,A){this.singleTap.touchmove(o,d,A)}touchend(o,d,A){const T=this.singleTap.touchend(o,d,A);if(T){const S=o.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(T)<30;if(S&&E||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=T,this.count===this.numTaps)return this.reset(),T}}}class wA{constructor(){this._zoomIn=new Xg({numTouches:1,numTaps:2}),this._zoomOut=new Xg({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,d,A){this._zoomIn.touchstart(o,d,A),this._zoomOut.touchstart(o,d,A)}touchmove(o,d,A){this._zoomIn.touchmove(o,d,A),this._zoomOut.touchmove(o,d,A)}touchend(o,d,A){const T=this._zoomIn.touchend(o,d,A),S=this._zoomOut.touchend(o,d,A);return T?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:E.getZoom()+1,around:E.unproject(T)},{originalEvent:o})}):S?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:E.getZoom()-1,around:E.unproject(S)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const yp={0:1,2:2},og={Control:"ctrlKey",Alt:"altKey",Shift:"shiftKey",Meta:"metaKey"};class dm{constructor(o){this.reset(),this._clickTolerance=o.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(o,d){return!1}_move(o,d){return{}}mousedown(o,d){if(this._lastPoint)return;const A=Ve(o);this._correctButton(o,A)&&(this._lastPoint=d,this._eventButton=A)}mousemoveWindow(o,d){const A=this._lastPoint;if(A){if(o.preventDefault(),this._eventButton!=null&&function(T,S){const E=yp[S];return T.buttons===void 0||(T.buttons&E)!==E}(o,this._eventButton))this.reset();else if(this._moved||!(d.dist(A)<this._clickTolerance))return this._moved=!0,this._lastPoint=d,this._move(A,d)}}mouseupWindow(o){this._lastPoint&&Ve(o)===this._eventButton&&(this._moved&&ge(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class hm extends dm{mousedown(o,d){super.mousedown(o,d),this._lastPoint&&(this._active=!0)}_correctButton(o,d){return d===0&&!o.ctrlKey}_move(o,d){return{around:d,panDelta:d.sub(o)}}}class Yd extends dm{constructor(o){super(o),this._pitchRotateKey=o.pitchRotateKey?og[o.pitchRotateKey]:void 0}_correctButton(o,d){return this._pitchRotateKey?d===0&&o[this._pitchRotateKey]:d===0&&o.ctrlKey||d===2}_move(o,d){const A=.8*(d.x-o.x);if(A)return this._active=!0,{bearingDelta:A}}contextmenu(o){this._pitchRotateKey||o.preventDefault()}}class Nc extends dm{constructor(o){super(o),this._pitchRotateKey=o.pitchRotateKey?og[o.pitchRotateKey]:void 0}_correctButton(o,d){return this._pitchRotateKey?d===0&&o[this._pitchRotateKey]:d===0&&o.ctrlKey||d===2}_move(o,d){const A=-.5*(d.y-o.y);if(A)return this._active=!0,{pitchDelta:A}}contextmenu(o){this._pitchRotateKey||o.preventDefault()}}class Ss{constructor(o,d){this._map=o,this._el=o.getCanvasContainer(),this._minTouches=1,this._clickTolerance=d.clickTolerance||1,this.reset(),n.aQ(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new n.P(0,0)}touchstart(o,d,A){return this._calculateTransform(o,d,A)}touchmove(o,d,A){if(this._active&&!(A.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(A.length===1&&!n.dC())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return o.cancelable&&o.preventDefault(),this._calculateTransform(o,d,A)}}touchend(o,d,A){this._calculateTransform(o,d,A),this._active&&A.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,d,A){A.length>0&&(this._active=!0);const T=ji(A,d),S=new n.P(0,0),E=new n.P(0,0);let k=0;for(const K in T){const Y=T[K],ae=this._touches[K];ae&&(S._add(Y),E._add(Y.sub(ae)),k++,T[K]=Y)}if(this._touches=T,k<this._minTouches||!E.mag())return;const Z=E.div(k);return this._sum._add(Z),this._sum.mag()<this._clickTolerance?void 0:{around:S.div(k),panDelta:Z}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=$("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class sd{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(o){}_move(o,d,A){return{}}touchstart(o,d,A){this._firstTwoTouches||A.length<2||(this._firstTwoTouches=[A[0].identifier,A[1].identifier],this._start([d[0],d[1]]))}touchmove(o,d,A){const T=this._firstTwoTouches;if(!T)return;o.preventDefault();const[S,E]=T,k=Ap(A,d,S),Z=Ap(A,d,E);if(!k||!Z)return;const K=this._aroundCenter?null:k.add(Z).div(2);return this._move([k,Z],K,o)}touchend(o,d,A){if(!this._firstTwoTouches)return;const[T,S]=this._firstTwoTouches,E=Ap(A,d,T),k=Ap(A,d,S);E&&k||(this._active&&ge(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ap(y,o,d){for(let A=0;A<y.length;A++)if(y[A].identifier===d)return o[A]}function vp(y,o){return Math.log(y/o)/Math.LN2}class zf extends sd{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,d){const A=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(vp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:vp(this._distance,A),pinchAround:d}}}function Eh(y,o){return 180*y.angleWith(o)/Math.PI}class od extends sd{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,d){const A=this._vector;if(this._vector=o[0].sub(o[1]),A&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Eh(this._vector,A),pinchAround:d}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());const d=25/(Math.PI*this._minDiameter)*360,A=this._startVector;if(!A)return!1;const T=Eh(o,A);return Math.abs(T)<d}}function Xd(y){return Math.abs(y.y)>Math.abs(y.x)}class RA extends sd{constructor(o){super(),this._map=o}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(o){this._lastPoints=o,Xd(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,d,A){const T=this._lastPoints;if(!T)return;const S=o[0].sub(T[0]),E=o[1].sub(T[1]);return this._map._cooperativeGestures&&!n.dC()&&A.touches.length<3||(this._valid=this.gestureBeginsVertically(S,E,A.timeStamp),!this._valid)?void 0:(this._lastPoints=o,this._active=!0,{pitchDelta:(S.y+E.y)/2*-.5})}gestureBeginsVertically(o,d,A){if(this._valid!==void 0)return this._valid;const T=o.mag()>=2,S=d.mag()>=2;if(!T&&!S)return;if(!T||!S)return this._firstMove==null&&(this._firstMove=A),A-this._firstMove<100&&void 0;const E=o.y>0==d.y>0;return Xd(o)&&Xd(d)&&E}}const lg={panStep:100,bearingStep:15,pitchStep:10};class _p{constructor(){const o=lg;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let d=0,A=0,T=0,S=0,E=0;switch(o.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:o.shiftKey?A=-1:(o.preventDefault(),S=-1);break;case 39:o.shiftKey?A=1:(o.preventDefault(),S=1);break;case 38:o.shiftKey?T=1:(o.preventDefault(),E=-1);break;case 40:o.shiftKey?T=-1:(o.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(A=0,T=0),{cameraAnimation:k=>{const Z=k.getZoom();k.easeTo({duration:300,easeId:"keyboardHandler",easing:Df,zoom:d?Math.round(Z)+d*(o.shiftKey?2:1):Z,bearing:k.getBearing()+A*this._bearingStep,pitch:k.getPitch()+T*this._pitchStep,offset:[-S*this._panStep,-E*this._panStep],center:k.getCenter()},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Df(y){return y*(2-y)}const Oc=4.000244140625,to=1/450;class rc{constructor(o,d){this._map=o,this._el=o.getCanvasContainer(),this._handler=d,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=to,n.aQ(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!o&&o.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(o){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(o.ctrlKey||o.metaKey||this.isZooming()||n.dC()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let d=o.deltaMode===WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY;const A=n.q.now(),T=A-(this._lastWheelEventTime||0);this._lastWheelEventTime=A,d!==0&&d%Oc==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":T>400?(this._type=null,this._lastValue=d,this._timeout=window.setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(T*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),o.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=o,this._delta-=d,this._active||this._start(o)),o.preventDefault()}_onTimeout(o){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(o)}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=Re(this._el,o);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:d,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const o=this._map.transform;this._type==="wheel"&&o.projection.wrap&&(o._center.lng>=180||o._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const d=()=>o._terrainEnabled()&&this._aroundCoord?o.computeZoomRelativeTo(this._aroundCoord):o.zoom;if(this._delta!==0){const K=this._type==="wheel"&&Math.abs(this._delta)>Oc?this._wheelZoomRate:this._defaultZoomRate;let Y=2/(1+Math.exp(-Math.abs(this._delta*K)));this._delta<0&&Y!==0&&(Y=1/Y);const ae=d(),re=Math.pow(2,ae),pe=typeof this._targetZoom=="number"?o.zoomScale(this._targetZoom):re;this._targetZoom=Math.min(o.maxZoom,Math.max(o.minZoom,o.scaleZoom(pe*Y))),this._type==="wheel"&&(this._startZoom=ae,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const A=typeof this._targetZoom=="number"?this._targetZoom:d(),T=this._startZoom,S=this._easing;let E,k=!1;if(this._type==="wheel"&&T&&S){const K=Math.min((n.q.now()-this._lastWheelEventTime)/200,1),Y=S(K);E=n.ah(T,A,Y),K<1?this._frameId||(this._frameId=!0):k=!0}else E=A,k=!0;this._active=!0,k&&(this._active=!1,this._finishTimeout=window.setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let Z=E-d();return Z*this._lastDelta<0&&(Z=0),{noInertia:!0,needsRenderFrame:!k,zoomDelta:Z,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let d=n.dD;if(this._prevEase){const A=this._prevEase,T=(n.q.now()-A.start)/A.duration,S=A.easing(T+.01)-A.easing(T),E=.27/Math.sqrt(S*S+1e-4)*.01,k=Math.sqrt(.0729-E*E);d=n.dB(E,k,.25,1)}return this._prevEase={start:n.q.now(),duration:o,easing:d},d}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=$("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class ef{constructor(o,d){this._clickZoom=o,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class nc{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(o,d){return o.preventDefault(),{cameraAnimation:A=>{A.easeTo({duration:300,zoom:A.getZoom()+(o.shiftKey?-1:1),around:A.unproject(d)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Nh{constructor(){this._tap=new Xg({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(o,d,A){this._swipePoint||(this._tapTime&&o.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?A.length>0&&(this._swipePoint=d[0],this._swipeTouch=A[0].identifier):this._tap.touchstart(o,d,A))}touchmove(o,d,A){if(this._tapTime){if(this._swipePoint){if(A[0].identifier!==this._swipeTouch)return;const T=d[0],S=T.y-this._swipePoint.y;return this._swipePoint=T,o.preventDefault(),this._active=!0,{zoomDelta:S/128}}}else this._tap.touchmove(o,d,A)}touchend(o,d,A){this._tapTime?this._swipePoint&&A.length===0&&this.reset():this._tap.touchend(o,d,A)&&(this._tapTime=o.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class TA{constructor(o,d,A){this._el=o,this._mousePan=d,this._touchPan=A}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Mf{constructor(o,d,A){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=d,this._mousePitch=A}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class If{constructor(o,d,A,T){this._el=o,this._touchZoom=d,this._touchRotate=A,this._tapDragZoom=T,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Lf=y=>y.zoom||y.drag||y.pitch||y.rotate;class Jg extends n.A{}class Cl{constructor(){this.constants=[1,1,.01],this.radius=0}setup(o,d){const A=n.ad.vec3.sub([],d,o);this.radius=n.ad.vec3.length(A[2]<0?n.ad.vec3.div([],A,this.constants):[A[0],A[1],0])}projectRay(o){n.ad.vec3.div(o,o,this.constants),n.ad.vec3.normalize(o,o),n.ad.vec3.mul(o,o,this.constants);const d=n.ad.vec3.scale([],o,this.radius);if(d[2]>0){const A=n.ad.vec3.scale([],[0,0,1],n.ad.vec3.dot(d,[0,0,1])),T=n.ad.vec3.scale([],n.ad.vec3.normalize([],[d[0],d[1],0]),this.radius),S=n.ad.vec3.add([],d,n.ad.vec3.scale([],n.ad.vec3.sub([],n.ad.vec3.add([],T,A),d),2));d[0]=S[0],d[1]=S[1]}return d}}function Oh(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class fm{constructor(o,d){this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new yA(o),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Cl,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(d),n.aQ(["handleEvent","handleWindowEvent"],this);const A=this._el;this._listeners=[[A,"touchstart",{passive:!0}],[A,"touchmove",{passive:!1}],[A,"touchend",void 0],[A,"touchcancel",void 0],[A,"mousedown",void 0],[A,"mousemove",void 0],[A,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[A,"mouseover",void 0],[A,"mouseout",void 0],[A,"dblclick",void 0],[A,"click",void 0],[A,"keydown",{capture:!1}],[A,"keyup",void 0],[A,"wheel",{passive:!1}],[A,"contextmenu",void 0],[window,"blur",void 0]];for(const[T,S,E]of this._listeners){const k=T===document?this.handleWindowEvent:this.handleEvent;T.addEventListener(S,k,E)}}destroy(){for(const[o,d,A]of this._listeners){const T=o===document?this.handleWindowEvent:this.handleEvent;o.removeEventListener(d,T,A)}}_addDefaultHandlers(o){const d=this._map,A=d.getCanvasContainer();this._add("mapEvent",new vA(d,o));const T=d.boxZoom=new _A(d,o);this._add("boxZoom",T);const S=new wA,E=new nc;d.doubleClickZoom=new ef(E,S),this._add("tapZoom",S),this._add("clickZoom",E);const k=new Nh;this._add("tapDragZoom",k);const Z=d.touchPitch=new RA(d);this._add("touchPitch",Z);const K=new Yd(o),Y=new Nc(o);d.dragRotate=new Mf(o,K,Y),this._add("mouseRotate",K,["mousePitch"]),this._add("mousePitch",Y,["mouseRotate"]);const ae=new hm(o),re=new Ss(d,o);d.dragPan=new TA(A,ae,re),this._add("mousePan",ae),this._add("touchPan",re,["touchZoom","touchRotate"]);const pe=new od,Pe=new zf;d.touchZoomRotate=new If(A,Pe,pe,k),this._add("touchRotate",pe,["touchPan","touchZoom"]),this._add("touchZoom",Pe,["touchPan","touchRotate"]),this._add("blockableMapEvent",new t0(d));const Ce=d.scrollZoom=new rc(d,this);this._add("scrollZoom",Ce,["mousePan"]);const De=d.keyboard=new _p;this._add("keyboard",De);for(const Le of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])o.interactive&&o[Le]&&d[Le].enable(o[Le])}_add(o,d,A){this._handlers.push({handlerName:o,handler:d,allowed:A}),this._handlersById[o]=d}stop(o){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Lf(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(o,d,A){for(const T in o)if(T!==A&&(!d||d.indexOf(T)<0))return!0;return!1}handleWindowEvent(o){this.handleEvent(o,`${o.type}Window`)}_getMapTouches(o){const d=[];for(const A of o)this._el.contains(A.target)&&d.push(A);return d}handleEvent(o,d){this._updatingCamera=!0;const A=o.type==="renderFrame",T=A?void 0:o,S={needsRenderFrame:!1},E={},k={},Z=o.touches?this._getMapTouches(o.touches):void 0,K=Z?we(this._el,Z):A?void 0:Re(this._el,o);for(const{handlerName:re,handler:pe,allowed:Pe}of this._handlers){if(!pe.isEnabled())continue;let Ce;this._blockedByActive(k,Pe,re)?pe.reset():pe[d||o.type]&&(Ce=pe[d||o.type](o,K,Z),this.mergeHandlerResult(S,E,Ce,re,T),Ce&&Ce.needsRenderFrame&&this._triggerRenderFrame()),(Ce||pe.isActive())&&(k[re]=pe)}const Y={};for(const re in this._previousActiveHandlers)k[re]||(Y[re]=T);this._previousActiveHandlers=k,(Object.keys(Y).length||Oh(S))&&(this._changes.push([S,E,Y]),this._triggerRenderFrame()),(Object.keys(k).length||Oh(S))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ae}=S;ae&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ae(this._map))}mergeHandlerResult(o,d,A,T,S){if(!A)return;n.l(o,A);const E={handlerName:T,originalEvent:A.originalEvent||S};A.zoomDelta!==void 0&&(d.zoom=E),A.panDelta!==void 0&&(d.drag=E),A.pitchDelta!==void 0&&(d.pitch=E),A.bearingDelta!==void 0&&(d.rotate=E)}_applyChanges(){const o={},d={},A={};for(const[T,S,E]of this._changes)T.panDelta&&(o.panDelta=(o.panDelta||new n.P(0,0))._add(T.panDelta)),T.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+T.zoomDelta),T.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+T.bearingDelta),T.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+T.pitchDelta),T.around!==void 0&&(o.around=T.around),T.aroundCoord!==void 0&&(o.aroundCoord=T.aroundCoord),T.pinchAround!==void 0&&(o.pinchAround=T.pinchAround),T.noInertia&&(o.noInertia=T.noInertia),n.l(d,S),n.l(A,E);this._updateMapTransform(o,d,A),this._changes=[]}_updateMapTransform(o,d,A){const T=this._map,S=T.transform,E=Ke=>[Ke.x,Ke.y,Ke.z];if((Ke=>{const it=this._eventsInProgress.drag;return it&&!this._handlersById[it.handlerName].isActive()})()&&!Oh(o)){const Ke=S.zoom;S.cameraElevationReference="sea",this._originalZoom!=null&&S._orthographicProjectionAtLowPitch&&S.projection.name!=="globe"&&S.pitch===0?(S.cameraElevationReference="ground",S.zoom=this._originalZoom):(S.recenterOnTerrain(),S.cameraElevationReference="ground"),Ke!==S.zoom&&this._map._update(!0)}if(S._isCameraConstrained&&T._stop(!0),!Oh(o))return void this._fireEvents(d,A,!0);let{panDelta:k,zoomDelta:Z,bearingDelta:K,pitchDelta:Y,around:ae,aroundCoord:re,pinchAround:pe}=o;S._isCameraConstrained&&(Z>0&&(Z=0),S._isCameraConstrained=!1),pe!==void 0&&(ae=pe),(Z||(Ke=>d[Ke]&&!this._eventsInProgress[Ke])("drag"))&&ae&&(this._dragOrigin=E(S.pointCoordinate3D(ae)),this._originalZoom=S.zoom,this._trackingEllipsoid.setup(S._camera.position,this._dragOrigin)),S.cameraElevationReference="sea",T._stop(!0),ae=ae||T.transform.centerPoint,K&&(S.bearing+=K),Y&&(S.pitch+=Y),S._updateCameraState();const Pe=[0,0,0];if(k)if(S.projection.name==="mercator"){const Ke=this._trackingEllipsoid.projectRay(S.screenPointToMercatorRay(ae).dir),it=this._trackingEllipsoid.projectRay(S.screenPointToMercatorRay(ae.sub(k)).dir);Pe[0]=it[0]-Ke[0],Pe[1]=it[1]-Ke[1]}else{const Ke=S.pointCoordinate(ae);if(S.projection.name==="globe"){k=k.rotate(-S.angle);const it=S._pixelsPerMercatorPixel/S.worldSize;Pe[0]=-k.x*n.dE(n.aT(Ke.y))*it,Pe[1]=-k.y*n.dE(S.center.lat)*it}else{const it=S.pointCoordinate(ae.sub(k));Ke&&it&&(Pe[0]=it.x-Ke.x,Pe[1]=it.y-Ke.y)}}const Ce=S.zoom,De=[0,0,0];if(Z){const Ke=E(re||S.pointCoordinate3D(ae)),it={dir:n.ad.vec3.normalize([],n.ad.vec3.sub([],Ke,S._camera.position))};if(it.dir[2]<0){const tt=S.zoomDeltaToMovement(Ke,Z);n.ad.vec3.scale(De,it.dir,tt)}}const Le=n.ad.vec3.add(Pe,Pe,De);S._translateCameraConstrained(Le),Z&&Math.abs(S.zoom-Ce)>1e-4&&S.recenterOnTerrain(),S.cameraElevationReference="ground",this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(d,A,!0)}_fireEvents(o,d,A){const T=Lf(this._eventsInProgress),S=Lf(o),E={};for(const Y in o){const{originalEvent:ae}=o[Y];this._eventsInProgress[Y]||(E[`${Y}start`]=ae),this._eventsInProgress[Y]=o[Y]}!T&&S&&this._fireEvent("movestart",S.originalEvent);for(const Y in E)this._fireEvent(Y,E[Y]);S&&this._fireEvent("move",S.originalEvent);for(const Y in o){const{originalEvent:ae}=o[Y];this._fireEvent(Y,ae)}const k={};let Z;for(const Y in this._eventsInProgress){const{handlerName:ae,originalEvent:re}=this._eventsInProgress[Y];this._handlersById[ae].isActive()||(delete this._eventsInProgress[Y],Z=d[ae]||re,k[`${Y}end`]=Z)}for(const Y in k)this._fireEvent(Y,k[Y]);const K=Lf(this._eventsInProgress);if(A&&(T||S)&&!K){this._updatingCamera=!0;const Y=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ae=re=>re!==0&&-this._bearingSnap<re&&re<this._bearingSnap;Y?(ae(Y.bearing||this._map.getBearing())&&(Y.bearing=0),this._map.easeTo(Y,{originalEvent:Z})):(this._map.fire(new n.A("moveend",{originalEvent:Z})),ae(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(o,d){this._map.fire(new n.A(o,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{this._frameId=void 0,this.handleEvent(new Jg("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const CA="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class wp extends n.E{constructor(o,d){super(),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=d.bearingSnap,this._respectPrefersReducedMotion=d.respectPrefersReducedMotion!==!1,n.aQ(["_renderFrameCallback"],this)}getCenter(){return new n.bO(this.transform.center.lng,this.transform.center.lat)}setCenter(o,d){return this.jumpTo({center:o},d)}panBy(o,d,A){return o=n.P.convert(o).mult(-1),this.panTo(this.transform.center,n.l({offset:o},d),A)}panTo(o,d,A){return this.easeTo(n.l({center:o},d),A)}getZoom(){return this.transform.zoom}setZoom(o,d){return this.jumpTo({zoom:o},d),this}zoomTo(o,d,A){return this.easeTo(n.l({zoom:o},d),A)}zoomIn(o,d){return this.zoomTo(this.getZoom()+1,o,d),this}zoomOut(o,d){return this.zoomTo(this.getZoom()-1,o,d),this}getBearing(){return this.transform.bearing}setBearing(o,d){return this.jumpTo({bearing:o},d),this}getPadding(){return this.transform.padding}setPadding(o,d){return this.jumpTo({padding:o},d),this}rotateTo(o,d,A){return this.easeTo(n.l({bearing:o},d),A)}resetNorth(o,d){return this.rotateTo(0,n.l({duration:1e3},o),d),this}resetNorthPitch(o,d){return this.easeTo(n.l({bearing:0,pitch:0,duration:1e3},o),d),this}snapToNorth(o,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,d):this}getPitch(){return this.transform.pitch}setPitch(o,d){return this.jumpTo({pitch:o},d),this}cameraForBounds(o,d){o=n.aB.convert(o);const A=d&&d.bearing||0,T=d&&d.pitch||0,S=o.getNorthWest(),E=o.getSouthEast();return this._cameraForBounds(this.transform,S,E,A,T,d)}_extendPadding(o){const d={top:0,right:0,bottom:0,left:0};return o==null?n.l({},d,this.transform.padding):typeof o=="number"?{top:o,bottom:o,right:o,left:o}:n.l({},d,o)}_extendCameraOptions(o){return(o=n.l({offset:[0,0],maxZoom:this.transform.maxZoom},o)).padding=this._extendPadding(o.padding),o}_minimumAABBFrustumDistance(o,d){const A=d.max[0]-d.min[0],T=d.max[1]-d.min[1];return A/T>o.aspect?A/(2*Math.tan(.5*o.fovX)*o.aspect):T/(2*Math.tan(.5*o.fovY)*o.aspect)}_cameraForBoundsOnGlobe(o,d,A,T,S,E){const k=o.clone(),Z=this._extendCameraOptions(E);k.bearing=T,k.pitch=S;const K=n.bO.convert(d),Y=n.bO.convert(A),ae=.5*(K.lat+Y.lat),re=.5*(K.lng+Y.lng),pe=n.dF(ae,re),Pe=n.ad.vec3.normalize([],pe),Ce=n.ad.vec3.normalize([],n.ad.vec3.cross([],Pe,[0,1,0])),De=n.ad.vec3.cross([],Ce,Pe),Le=[Ce[0],Ce[1],Ce[2],0,De[0],De[1],De[2],0,Pe[0],Pe[1],Pe[2],0,0,0,0,1],Ke=[pe,n.dF(K.lat,K.lng),n.dF(Y.lat,K.lng),n.dF(Y.lat,Y.lng),n.dF(K.lat,Y.lng),n.dF(ae,K.lng),n.dF(ae,Y.lng),n.dF(K.lat,re),n.dF(Y.lat,re)];let it=n.ce.fromPoints(Ke.map(ta=>[n.ad.vec3.dot(Ce,ta),n.ad.vec3.dot(De,ta),n.ad.vec3.dot(Pe,ta)]));const tt=n.ad.vec3.transformMat4([],it.center,Le);n.ad.vec3.squaredLength(tt)===0&&n.ad.vec3.set(tt,0,0,1),n.ad.vec3.normalize(tt,tt),n.ad.vec3.scale(tt,tt,n.az),k.center=n.dG(tt);const pt=k.getWorldToCameraMatrix(),ut=n.ad.mat4.invert(new Float64Array(16),pt);it=n.ce.applyTransform(it,n.ad.mat4.multiply([],pt,Le));const ct=this._extendAABB(it,k,Z,T);if(!ct)return void n.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");it=ct,n.ad.vec3.transformMat4(tt,tt,pt);const dt=.5*(it.max[2]-it.min[2]),vt=this._minimumAABBFrustumDistance(k,it),Tt=n.ad.vec3.scale([],[0,0,1],dt),Qt=n.ad.vec3.add(Tt,tt,Tt),kt=vt+(k.pitch===0?0:n.ad.vec3.distance(tt,Qt)),ra=k.globeCenterInViewSpace,ca=n.ad.vec3.sub([],tt,[ra[0],ra[1],ra[2]]);n.ad.vec3.normalize(ca,ca),n.ad.vec3.scale(ca,ca,kt);const xa=n.ad.vec3.add([],tt,ca);n.ad.vec3.transformMat4(xa,xa,ut);const Ft=n.dv/n.az,sa=n.ad.vec3.length(xa),zt=n.bH(Math.max(sa*Ft-n.dv,Number.EPSILON),0),oa=Math.min(k.zoomFromMercatorZAdjusted(zt),Z.maxZoom);return oa>.5*(n.c6+n.bY)?(k.setProjection({name:"mercator"}),k.zoom=oa,this._cameraForBounds(k,d,A,T,S,E)):{center:k.center,zoom:oa,bearing:T,pitch:S}}_extendAABB(o,d,A,T){const S=.5*((A.padding.left||0)+(A.padding.right||0)),E=.5*((A.padding.top||0)+(A.padding.bottom||0)),k=E,Z=S,K=S,Y=E,ae=d.width-(Z+K),re=d.height-(k+Y),pe=n.ad.vec3.sub([],o.max,o.min),Pe=Math.min(ae/pe[0],re/pe[1]),Ce=Math.min(d.scaleZoom(d.scale*Pe),A.maxZoom);if(isNaN(Ce))return null;const De=d.scale/d.zoomScale(Ce),Le=new n.ce([o.min[0]-Z*De,o.min[1]-Y*De,o.min[2]],[o.max[0]+K*De,o.max[1]+k*De,o.max[2]]),Ke=(typeof A.offset.x=="number"&&typeof A.offset.y=="number"?new n.P(A.offset.x,A.offset.y):n.P.convert(A.offset)).rotate(-n.ak(T));return Le.center[0]-=Ke.x*De,Le.center[1]+=Ke.y*De,Le}queryTerrainElevation(o,d){const A=this.transform.elevation;return A?(d=n.l({},{exaggerated:!0},d),A.getAtPoint(n.ac.fromLngLat(o),null,d.exaggerated)):null}_cameraForBounds(o,d,A,T,S,E){if(o.projection.name==="globe")return this._cameraForBoundsOnGlobe(o,d,A,T,S,E);const k=o.clone(),Z=this._extendCameraOptions(E);k.bearing=T,k.pitch=S;const K=n.bO.convert(d),Y=n.bO.convert(A),ae=new n.bO(K.lng,Y.lat),re=new n.bO(Y.lng,K.lat),pe=k.project(K),Pe=k.project(Y),Ce=this.queryTerrainElevation(K),De=this.queryTerrainElevation(Y),Le=this.queryTerrainElevation(ae),Ke=this.queryTerrainElevation(re),it=[[pe.x,pe.y,Math.min(Ce||0,De||0,Le||0,Ke||0)],[Pe.x,Pe.y,Math.max(Ce||0,De||0,Le||0,Ke||0)]];let tt=n.ce.fromPoints(it);const pt=k.getWorldToCameraMatrix(),ut=n.ad.mat4.invert(new Float64Array(16),pt);tt=n.ce.applyTransform(tt,pt);const ct=this._extendAABB(tt,k,Z,T);if(!ct)return void n.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");tt=ct;const dt=.5*n.ad.vec3.sub([],tt.max,tt.min)[2],vt=this._minimumAABBFrustumDistance(k,tt),Tt=[0,0,1,0];n.ad.vec4.transformMat4(Tt,Tt,pt),n.ad.vec4.normalize(Tt,Tt);const Qt=n.ad.vec3.scale([],Tt,vt+dt),kt=n.ad.vec3.add([],tt.center,Qt);n.ad.vec3.transformMat4(tt.center,tt.center,ut),n.ad.vec3.transformMat4(kt,kt,ut);const ra=k.unproject(new n.P(tt.center[0],tt.center[1])),ca=n.dH(k.projection,ra),xa=Math.pow(2,ca),Ft=Math.min(k._zoomFromMercatorZ(kt[2]*k.pixelsPerMeter*xa/k.worldSize),Z.maxZoom);return k.mercatorFromTransition&&Ft<.5*(n.c6+n.bY)?(k.setProjection({name:"globe"}),k.zoom=Ft,this._cameraForBounds(k,d,A,T,S,E)):{center:ra,zoom:Ft,bearing:T,pitch:S}}fitBounds(o,d,A){const T=this.cameraForBounds(o,d);return this._fitInternal(T,d,A)}fitScreenCoordinates(o,d,A,T,S){const E=n.P.convert(o),k=n.P.convert(d),Z=new n.P(Math.min(E.x,k.x),Math.min(E.y,k.y)),K=new n.P(Math.max(E.x,k.x),Math.max(E.y,k.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(E,k))return this;const Y=this.transform.pointLocation3D(Z),ae=this.transform.pointLocation3D(K),re=this.transform.pointLocation3D(new n.P(Z.x,K.y)),pe=this.transform.pointLocation3D(new n.P(K.x,Z.y)),Pe=[Math.min(Y.lng,ae.lng,re.lng,pe.lng),Math.min(Y.lat,ae.lat,re.lat,pe.lat)],Ce=[Math.max(Y.lng,ae.lng,re.lng,pe.lng),Math.max(Y.lat,ae.lat,re.lat,pe.lat)],De=T&&T.pitch?T.pitch:this.getPitch(),Le=this._cameraForBounds(this.transform,Pe,Ce,A,De,T);return this._fitInternal(Le,T,S)}_fitInternal(o,d,A){return o?(d=n.l(o,d)).linear?this.easeTo(d,A):this.flyTo(d,A):this}jumpTo(o,d){this.stop();const A=o.preloadOnly?this.transform.clone():this.transform;let T=!1,S=!1,E=!1;"zoom"in o&&A.zoom!==+o.zoom&&(T=!0,A.zoom=+o.zoom),o.center!==void 0&&(A.center=n.bO.convert(o.center)),"bearing"in o&&A.bearing!==+o.bearing&&(S=!0,A.bearing=+o.bearing),"pitch"in o&&A.pitch!==+o.pitch&&(E=!0,A.pitch=+o.pitch);const k=typeof o.padding=="number"?this._extendPadding(o.padding):o.padding;if(o.padding!=null&&!A.isPaddingEqual(k))if(o.retainPadding===!1){const Z=A.clone();Z.padding=k,A.setLocationAtPoint(A.center,Z.centerPoint)}else A.padding=k;return o.preloadOnly?(this._preloadTiles(A),this):(this.fire(new n.A("movestart",d)).fire(new n.A("move",d)),T&&this.fire(new n.A("zoomstart",d)).fire(new n.A("zoom",d)).fire(new n.A("zoomend",d)),S&&this.fire(new n.A("rotatestart",d)).fire(new n.A("rotate",d)).fire(new n.A("rotateend",d)),E&&this.fire(new n.A("pitchstart",d)).fire(new n.A("pitch",d)).fire(new n.A("pitchend",d)),this.fire(new n.A("moveend",d)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||n.w(CA),this.transform.getFreeCameraOptions()}setFreeCameraOptions(o,d){const A=this.transform;if(!A.projection.supportsFreeCamera)return n.w(CA),this;this.stop();const T=A.zoom,S=A.pitch,E=A.bearing;A.setFreeCameraOptions(o);const k=T!==A.zoom,Z=S!==A.pitch,K=E!==A.bearing;return this.fire(new n.A("movestart",d)).fire(new n.A("move",d)),k&&this.fire(new n.A("zoomstart",d)).fire(new n.A("zoom",d)).fire(new n.A("zoomend",d)),K&&this.fire(new n.A("rotatestart",d)).fire(new n.A("rotate",d)).fire(new n.A("rotateend",d)),Z&&this.fire(new n.A("pitchstart",d)).fire(new n.A("pitch",d)).fire(new n.A("pitchend",d)),this.fire(new n.A("moveend",d)),this}easeTo(o,d){this._stop(!1,o.easeId),((o=n.l({offset:[0,0],duration:500,easing:n.dD},o)).animate===!1||this._prefersReducedMotion(o))&&(o.duration=0);const A=this.transform,T=this.getZoom(),S=this.getBearing(),E=this.getPitch(),k=this.getPadding(),Z="zoom"in o?+o.zoom:T,K="bearing"in o?this._normalizeBearing(o.bearing,S):S,Y="pitch"in o?+o.pitch:E,ae=this._extendPadding(o.padding),re=n.P.convert(o.offset);let pe,Pe,Ce;if(A.projection.name==="globe"){const Tt=n.ac.fromLngLat(A.center),Qt=re.rotate(-A.angle);Tt.x+=Qt.x/A.worldSize,Tt.y+=Qt.y/A.worldSize;const kt=Tt.toLngLat(),ra=n.bO.convert(o.center||kt);this._normalizeCenter(ra),pe=A.centerPoint.add(Qt),Pe=new n.P(Tt.x,Tt.y).mult(A.worldSize),Ce=new n.P(n.av(ra.lng),n.aC(ra.lat)).mult(A.worldSize).sub(Pe)}else{pe=A.centerPoint.add(re);const Tt=A.pointLocation(pe),Qt=n.bO.convert(o.center||Tt);this._normalizeCenter(Qt),Pe=A.project(Tt),Ce=A.project(Qt).sub(Pe)}const De=A.zoomScale(Z-T);let Le,Ke;o.around&&(Le=n.bO.convert(o.around),Ke=A.locationPoint(Le));const it=this._zooming||Z!==T,tt=this._rotating||S!==K,pt=this._pitching||Y!==E,ut=!A.isPaddingEqual(ae),ct=o.retainPadding===!1?A.clone():A,dt=Tt=>Qt=>{if(it&&(Tt.zoom=n.ah(T,Z,Qt)),tt&&(Tt.bearing=n.ah(S,K,Qt)),pt&&(Tt.pitch=n.ah(E,Y,Qt)),ut&&(ct.interpolatePadding(k,ae,Qt),pe=ct.centerPoint.add(re)),Le)Tt.setLocationAtPoint(Le,Ke);else{const kt=Tt.zoomScale(Tt.zoom-T),ra=Z>T?Math.min(2,De):Math.max(.5,De),ca=Math.pow(ra,1-Qt),xa=Tt.unproject(Pe.add(Ce.mult(Qt*ca)).mult(kt));Tt.setLocationAtPoint(Tt.renderWorldCopies?xa.wrap():xa,pe)}return o.preloadOnly||this._fireMoveEvents(d),Tt};if(o.preloadOnly){const Tt=this._emulate(dt,o.duration,A);return this._preloadTiles(Tt),this}const vt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=it,this._rotating=tt,this._pitching=pt,this._padding=ut,this._easeId=o.easeId,this._prepareEase(d,o.noMoveStart,vt),this._ease(dt(A),Tt=>{A.cameraElevationReference==="sea"&&A.recenterOnTerrain(),this._afterEase(d,Tt)},o),this}_prepareEase(o,d,A={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),d||A.moving||this.fire(new n.A("movestart",o)),this._zooming&&!A.zooming&&this.fire(new n.A("zoomstart",o)),this._rotating&&!A.rotating&&this.fire(new n.A("rotatestart",o)),this._pitching&&!A.pitching&&this.fire(new n.A("pitchstart",o))}_fireMoveEvents(o){this.fire(new n.A("move",o)),this._zooming&&this.fire(new n.A("zoom",o)),this._rotating&&this.fire(new n.A("rotate",o)),this._pitching&&this.fire(new n.A("pitch",o))}_afterEase(o,d){if(this._easeId&&d&&this._easeId===d)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const A=this._zooming,T=this._rotating,S=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,A&&this.fire(new n.A("zoomend",o)),T&&this.fire(new n.A("rotateend",o)),S&&this.fire(new n.A("pitchend",o)),this.fire(new n.A("moveend",o))}flyTo(o,d){if(this._prefersReducedMotion(o)){const ta=n.aA(o,["center","zoom","bearing","pitch","around","padding","retainPadding"]);return this.jumpTo(ta,d)}this.stop(),o=n.l({offset:[0,0],speed:1.2,curve:1.42,easing:n.dD},o);const A=this.transform,T=this.getZoom(),S=this.getBearing(),E=this.getPitch(),k=this.getPadding(),Z="zoom"in o?n.ay(+o.zoom,A.minZoom,A.maxZoom):T,K="bearing"in o?this._normalizeBearing(o.bearing,S):S,Y="pitch"in o?+o.pitch:E,ae=this._extendPadding(o.padding),re=A.zoomScale(Z-T),pe=n.P.convert(o.offset);let Pe=A.centerPoint.add(pe);const Ce=A.pointLocation(Pe),De=n.bO.convert(o.center||Ce);this._normalizeCenter(De);const Le=A.project(Ce),Ke=A.project(De).sub(Le);let it=o.curve;const tt=Math.max(A.width,A.height),pt=tt/re,ut=Ke.mag();if("minZoom"in o){const ta=n.ay(Math.min(o.minZoom,T,Z),A.minZoom,A.maxZoom),da=tt/A.zoomScale(ta-T);it=Math.sqrt(da/ut*2)}const ct=it*it;function dt(ta){const da=(pt*pt-tt*tt+(ta?-1:1)*ct*ct*ut*ut)/(2*(ta?pt:tt)*ct*ut);return Math.log(Math.sqrt(da*da+1)-da)}function vt(ta){return(Math.exp(ta)-Math.exp(-ta))/2}function Tt(ta){return(Math.exp(ta)+Math.exp(-ta))/2}const Qt=dt(0);let kt=function(ta){return Tt(Qt)/Tt(Qt+it*ta)},ra=function(ta){return tt*((Tt(Qt)*(vt(da=Qt+it*ta)/Tt(da))-vt(Qt))/ct)/ut;var da},ca=(dt(1)-Qt)/it;if(Math.abs(ut)<1e-6||!isFinite(ca)){if(Math.abs(tt-pt)<1e-6)return this.easeTo(o,d);const ta=pt<tt?-1:1;ca=Math.abs(Math.log(pt/tt))/it,ra=function(){return 0},kt=function(da){return Math.exp(ta*it*da)}}o.duration="duration"in o?+o.duration:1e3*ca/("screenSpeed"in o?+o.screenSpeed/it:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0);const xa=S!==K,Ft=Y!==E,sa=!A.isPaddingEqual(ae),zt=o.retainPadding===!1?A.clone():A,oa=ta=>da=>{const Xt=da*ca,pa=1/kt(Xt);ta.zoom=da===1?Z:T+ta.scaleZoom(pa),xa&&(ta.bearing=n.ah(S,K,da)),Ft&&(ta.pitch=n.ah(E,Y,da)),sa&&(zt.interpolatePadding(k,ae,da),Pe=zt.centerPoint.add(pe));const La=da===1?De:ta.unproject(Le.add(Ke.mult(ra(Xt))).mult(pa));return ta.setLocationAtPoint(ta.renderWorldCopies?La.wrap():La,Pe),ta._updateCameraOnTerrain(),o.preloadOnly||this._fireMoveEvents(d),ta};if(o.preloadOnly){const ta=this._emulate(oa,o.duration,A);return this._preloadTiles(ta),this}return this._zooming=!0,this._rotating=xa,this._pitching=Ft,this._padding=sa,this._prepareEase(d,!1),this._ease(oa(A),()=>this._afterEase(d),o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(o){}_cancelRenderFrame(o){}_stop(o,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const A=this._onEaseEnd;this._onEaseEnd=void 0,A.call(this,d)}if(!o){const A=this.handlers;A&&A.stop(!1)}return this}_ease(o,d,A){A.animate===!1||A.duration===0?(o(1),d()):(this._easeStart=n.q.now(),this._easeOptions=A,this._onEaseFrame=o,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const o=Math.min((n.q.now()-this._easeStart)/this._easeOptions.duration,1),d=this._onEaseFrame;d&&d(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(o,d){o=n.bF(o,-180,180);const A=Math.abs(o-d);return Math.abs(o-360-d)<A&&(o-=360),Math.abs(o+360-d)<A&&(o+=360),o}_normalizeCenter(o){const d=this.transform;if(d.maxBounds||d.projection.name!=="globe"&&!d.renderWorldCopies)return;const A=o.lng-d.center.lng;o.lng+=A>180?-360:A<-180?360:0}_prefersReducedMotion(o){return this._respectPrefersReducedMotion&&n.q.prefersReducedMotion&&!(o&&o.essential)}_emulate(o,d,A){const T=Math.ceil(15*d/1e3),S=[],E=o(A.clone());for(let k=0;k<=T;k++){const Z=E(k/T);S.push(Z.clone())}return S}_preloadTiles(o,d){}}class Ff{constructor(o={}){this.options=o,n.aQ(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(o){const d=this.options&&this.options.compact,A=o._getUIString("AttributionControl.ToggleAttribution");this._map=o,this._container=$("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=$("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.setAttribute("aria-label",A);const T=$("span","mapboxgl-ctrl-icon",this._compactButton);return T.setAttribute("aria-hidden","true"),T.setAttribute("title",A),this._innerContainer=$("div","mapboxgl-ctrl-attrib-inner",this._container),d&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),d===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let o=this._editLink;o||(o=this._editLink=this._container.querySelector(".mapbox-improve-map"));const d=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||n.e.ACCESS_TOKEN}];if(o){const A=d.reduce((T,S,E)=>(S.value&&(T+=`${S.key}=${S.value}${E<d.length-1?"&":""}`),T),"?");o.href=`${n.e.FEEDBACK_URL}/${A}#${pA(this._map,!0)}`,o.rel="noopener nofollow"}}_updateData(o){!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let o=[];if(this._map.style.stylesheet){const T=this._map.style.stylesheet;this.styleOwner=T.owner,this.styleId=T.id}const d=this._map.style._mergedSourceCaches;for(const T in d){const S=d[T];if(S.used){const E=S.getSource();E.attribution&&o.indexOf(E.attribution)<0&&o.push(E.attribution)}}o.sort((T,S)=>T.length-S.length),o=o.filter((T,S)=>{for(let E=S+1;E<o.length;E++)if(o[E].indexOf(T)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=[...this.options.customAttribution,...o]:o.unshift(this.options.customAttribution));const A=o.join(" | ");A!==this._attribHTML&&(this._attribHTML=A,o.length?(this._innerContainer.innerHTML=A,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Wo{constructor(){n.aQ(["_updateLogo","_updateCompact"],this)}onAdd(o){this._map=o,this._container=$("div","mapboxgl-ctrl");const d=$("a","mapboxgl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://www.mapbox.com/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(o){o&&o.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const o=this._map.style._sourceCaches;if(Object.entries(o).length===0)return!0;for(const d in o){const A=o[d].getSource();if(A.hasOwnProperty("mapbox_logo")&&!A.mapbox_logo)return!1}return!0}_updateCompact(){const o=this._container.children;if(o.length){const d=o[0];this._map.getCanvasContainer().offsetWidth<250?d.classList.add("mapboxgl-compact"):d.classList.remove("mapboxgl-compact")}}}class ic{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){const d=++this._id;return this._queue.push({callback:o,id:d,cancelled:!1}),d}remove(o){const d=this._currentlyRunning,A=d?this._queue.concat(d):this._queue;for(const T of A)if(T.id===o)return void(T.cancelled=!0)}run(o=0){const d=this._currentlyRunning=this._queue;this._queue=[];for(const A of d)if(!A.cancelled&&(A.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}class Rp{constructor(o){this.jumpTo(o)}getValue(o){if(o<=this._startTime)return this._start;if(o>=this._endTime)return this._end;const d=n.cC((o-this._startTime)/(this._endTime-this._startTime));return this._start*(1-d)+this._end*d}isEasing(o){return o>=this._startTime&&o<=this._endTime}jumpTo(o){this._startTime=-1/0,this._endTime=-1/0,this._start=o,this._end=o}easeTo(o,d,A){this._start=this.getValue(d),this._end=o,this._startTime=d,this._endTime=d+A}}const Vc={"AttributionControl.ToggleAttribution":"Toggle attribution","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox homepage","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"};class fl extends n.A{constructor(o,d,A,T){const{point:S,lngLat:E,originalEvent:k,target:Z}=o;super(o.type,{point:S,lngLat:E,originalEvent:k,target:Z}),this.preventDefault=()=>{o.preventDefault()},this.id=d,this.interaction=A,this.feature=T}}class Qg{constructor(o){this.map=o,this.interactionsByType=new Map,this.delegatedInteractions=new Map,this.typeById=new Map,this.filters=new Map,this.handleType=this.handleType.bind(this),this.handleMove=this.handleMove.bind(this),this.handleOut=this.handleOut.bind(this),this.hoveredFeatures=new Map,this.prevHoveredFeatures=new Map}add(o,d){if(this.typeById.has(o))throw new Error(`Interaction id "${o}" already exists.`);const A=d.filter;let T=d.type;A&&this.filters.set(o,n.a_(A)),T==="mouseover"&&(T="mouseenter"),T==="mouseout"&&(T="mouseleave");const S=this.interactionsByType.get(T)||new Map;T==="mouseenter"||T==="mouseleave"?(this.delegatedInteractions.size===0&&(this.map.on("mousemove",this.handleMove),this.map.on("mouseout",this.handleOut)),this.delegatedInteractions.set(o,d)):S.size===0&&this.map.on(T,this.handleType),S.size===0&&this.interactionsByType.set(T,S),S.set(o,d),this.typeById.set(o,T)}get(o){const d=this.typeById.get(o);if(!d)return;const A=this.interactionsByType.get(d);return A?A.get(o):void 0}remove(o){const d=this.typeById.get(o);if(!d)return;this.typeById.delete(o),this.filters.delete(o);const A=this.interactionsByType.get(d);A&&(A.delete(o),d==="mouseenter"||d==="mouseleave"?(this.delegatedInteractions.delete(o),this.delegatedInteractions.size===0&&(this.map.off("mousemove",this.handleMove),this.map.off("mouseout",this.handleOut))):A.size===0&&this.map.off(d,this.handleType))}queryTargets(o,d){const A=[];for(const[T,S]of d)S.target&&A.push({targetId:T,target:S.target,filter:this.filters.get(T)});return this.map.style.queryRenderedTargets(o,A,this.map.transform)}handleMove(o){this.prevHoveredFeatures=this.hoveredFeatures,this.hoveredFeatures=new Map;const d=this.queryTargets(o.point,Array.from(this.delegatedInteractions).reverse());d.length&&(o.type="mouseenter",this.handleType(o,d));const A=new Map;for(const[T,{feature:S}]of this.prevHoveredFeatures)this.hoveredFeatures.has(T)||A.set(S.id,S);A.size&&(o.type="mouseleave",this.handleType(o,Array.from(A.values())))}handleOut(o){const d=Array.from(this.hoveredFeatures.values()).map(({feature:A})=>A);d.length&&(o.type="mouseleave",this.handleType(o,d)),this.hoveredFeatures.clear()}handleType(o,d){const A=Array.from(this.interactionsByType.get(o.type)).reverse(),T=!!d;d=d||this.queryTargets(o.point,A);const S=o.type==="mouseenter";let E=!1;const k=new Set;for(const Z of d){for(const[K,Y]of A){if(!Y.target)continue;const ae=Z.variants?Z.variants[K]:null;if(ae){for(const re of ae){if(kc(re,Z,k,K))continue;const pe=new n.cx(Z,re),Pe=Pd(re,Z,K);T&&(pe.state=this.map.getFeatureState(pe));const Ce=S?this.prevHoveredFeatures.get(Pe):null,De=new fl(o,K,Y,pe),Le=Ce?Ce.stop:Y.handler(De);if(S&&this.hoveredFeatures.set(Pe,{feature:Z,stop:Le}),Le!==!1){E=!0;break}}if(E)break}}if(E)break}if(!E)for(const[Z,K]of A){const{handler:Y,target:ae}=K;if(!ae&&Y(new fl(o,Z,K,null))!==!1)break}}}function Gn(y,o){if(Array.isArray(y)&&Array.isArray(o)){const d=new Set(y),A=new Set(o);return d.size===A.size&&y.every(T=>A.has(T))}return n.bn(y,o)}const tf={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1,precompilePrograms:!0,scaleFactor:1,spriteFormat:"auto"},SA={showCompass:!0,showZoom:!0,visualizePitch:!1};class bA{constructor(o,d,A=!1){this._clickTolerance=10,this.element=d,this.mouseRotate=new Yd({clickTolerance:o.dragRotate._mouseRotate._clickTolerance}),this.map=o,A&&(this.mousePitch=new Nc({clickTolerance:o.dragRotate._mousePitch._clickTolerance})),n.aQ(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),d.addEventListener("mousedown",this.mousedown),d.addEventListener("touchstart",this.touchstart,{passive:!1}),d.addEventListener("touchmove",this.touchmove),d.addEventListener("touchend",this.touchend),d.addEventListener("touchcancel",this.reset)}down(o,d){this.mouseRotate.mousedown(o,d),this.mousePitch&&this.mousePitch.mousedown(o,d),fe()}move(o,d){const A=this.map,T=this.mouseRotate.mousemoveWindow(o,d),S=T&&T.bearingDelta;if(S&&A.setBearing(A.getBearing()+S),this.mousePitch){const E=this.mousePitch.mousemoveWindow(o,d),k=E&&E.pitchDelta;k&&A.setPitch(A.getPitch()+k)}}off(){const o=this.element;o.removeEventListener("mousedown",this.mousedown),o.removeEventListener("touchstart",this.touchstart,{passive:!1}),o.removeEventListener("touchmove",this.touchmove),o.removeEventListener("touchend",this.touchend),o.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){le(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(o){this.down(n.l({},o,{ctrlKey:!0,preventDefault:()=>o.preventDefault()}),Re(this.element,o)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(o){this.move(o,Re(this.element,o))}mouseup(o){this.mouseRotate.mouseupWindow(o),this.mousePitch&&this.mousePitch.mouseupWindow(o),this.offTemp()}touchstart(o){o.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=we(this.element,o.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>o.preventDefault()},this._startPos))}touchmove(o){o.targetTouches.length!==1?this.reset():(this._lastPos=we(this.element,o.targetTouches)[0],this.move({preventDefault:()=>o.preventDefault()},this._lastPos))}touchend(o){o.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Tp(y,o,d){if(y=new n.bO(y.lng,y.lat),o){const A=new n.bO(y.lng-360,y.lat),T=new n.bO(y.lng+360,y.lat),S=360*Math.ceil(Math.abs(y.lng-d.center.lng)/360),E=d.locationPoint3D(y).distSqr(o),k=o.x<0||o.y<0||o.x>d.width||o.y>d.height;d.locationPoint3D(A).distSqr(o)<E&&(k||Math.abs(A.lng-d.center.lng)<S)?y=A:d.locationPoint3D(T).distSqr(o)<E&&(k||Math.abs(T.lng-d.center.lng)<S)&&(y=T)}for(;Math.abs(y.lng-d.center.lng)>180;){const A=d.locationPoint3D(y);if(A.x>=0&&A.y>=0&&A.x<=d.width&&A.y<=d.height)break;y.lng>d.center.lng?y.lng-=360:y.lng+=360}return y}const Sl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},Ii={anchor:"center",color:"#3FB1CE",scale:1,draggable:!1,clickTolerance:0,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto",occludedOpacity:.2,altitude:0};class Yo extends n.E{constructor(o,d){super(),(o instanceof HTMLElement||d)&&(o=n.l({element:o},d)),n.aQ(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),o=n.l({},Ii,o),this._anchor=o.anchor,this._color=o.color,this._scale=o.scale,this._draggable=o.draggable,this._clickTolerance=o.clickTolerance,this._rotation=o.rotation,this._rotationAlignment=o.rotationAlignment,this._pitchAlignment=o.pitchAlignment,this._occludedOpacity=o.occludedOpacity,this._altitude=o.altitude,this._state="inactive",this._isDragging=!1,this._updateMoving=()=>this._update(!0),o&&o.element?(this._element=o.element,this._offset=n.P.convert(o&&o.offset||[0,0])):(this._defaultMarker=!0,this._element=this._createDefaultMarker(),this._offset=n.P.convert(o&&o.offset||[0,-14])),this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",S=>{S.preventDefault()}),this._element.addEventListener("mousedown",S=>{S.preventDefault()});const A=this._element.classList;for(const S in Sl)A.remove(`mapboxgl-marker-anchor-${S}`);A.add(`mapboxgl-marker-anchor-${this._anchor}`);const T=o&&o.className?o.className.trim().split(/\s+/):[];A.add(...T),this._popup=null}_createDefaultMarker(){const o=$("div"),d=H("svg",{display:"block",height:41*this._scale+"px",width:27*this._scale+"px",viewBox:"0 0 27 41"},o);if(this._altitude===0){const A=H("radialGradient",{id:"shadowGradient"},H("defs",{},d));H("stop",{offset:"10%","stop-opacity":.4},A),H("stop",{offset:"100%","stop-opacity":.05},A),H("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},d)}return H("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},d),H("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},d),H("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},d),o}addTo(o){return o===this._map||(this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._updateMoving),o.on("moveend",this._update),o.on("remove",this._clearFadeTimer),o._addMarker(this),this.setDraggable(this._draggable),this._update(),o.on("click",this._onMapClick)),this}remove(){const o=this._map;return o&&(o.off("click",this._onMapClick),o.off("move",this._updateMoving),o.off("moveend",this._update),o.off("mousedown",this._addDragHandler),o.off("touchstart",this._addDragHandler),o.off("mouseup",this._onUp),o.off("touchend",this._onUp),o.off("mousemove",this._onMove),o.off("touchmove",this._onMove),o.off("remove",this._clearFadeTimer),o._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=n.bO.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}setAltitude(o){return o===this._altitude||(this._defaultMarker&&(this._altitude===0&&o!==0||this._altitude!==0&&o===0)&&(this._element=this._createDefaultMarker()),this._altitude=o||Ii.altitude,this._update()),this}getAltitude(){return this._altitude}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){const T=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[T,-1*(38.1-13.5+T)],"bottom-right":[-T,-1*(38.1-13.5+T)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=o,o._marker=this,o._altitude=this._altitude,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(o){const d=o.code,A=o.charCode||o.keyCode;d!=="Space"&&d!=="Enter"&&A!==32&&A!==13||this.togglePopup()}_onMapClick(o){const d=o.originalEvent.target,A=this._element;this._popup&&(d===A||A.contains(d))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const o=this._popup;return o?(o.isOpen()?(o.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(o.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const o=this._map,d=this._pos;if(!o||!d)return!1;const A=o.unproject(d,this._altitude),T=o.getFreeCameraOptions();if(!T.position)return!1;const S=T.position.toLngLat();return S.distanceTo(A)<.9*S.distanceTo(this._lngLat)}_evaluateOpacity(){const o=this._map;if(!o)return;const d=this._pos;if(!d||d.x<0||d.x>o.transform.width||d.y<0||d.y>o.transform.height)return void this._clearFadeTimer();const A=o.unproject(d,this._altitude);let T;o._showingGlobe()&&n.dK(o.transform,this._lngLat)?T=0:(T=1-o._queryFogOpacity(A),o.transform._terrainEnabled()&&o.getTerrain()&&this._behindTerrain()&&(T*=this._occludedOpacity)),this._element.style.opacity=`${T}`,this._element.style.pointerEvents=T>0?"auto":"none",this._popup&&this._popup._setOpacity(T),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const o=this._pos;if(!o||!this._map)return;const d=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${o.x}px,${o.y}px)
            ${Sl[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${d.x}px,${d.y}px)
        `}_calculateXYTransform(){const o=this._pos,d=this._map,A=this.getPitchAlignment();if(!d||!o||A!=="map")return"";if(!d._showingGlobe()){const Z=d.getPitch();return Z?`rotateX(${Z}deg)`:""}const T=n.c4(n.dL(d.transform,this._lngLat)),S=o.sub(n.dM(d.transform)),E=Math.abs(S.x)+Math.abs(S.y);if(E===0)return"";const k=T/E;return`rotateX(${-S.y*k}deg) rotateY(${S.x*k}deg)`}_calculateZTransform(){const o=this._pos,d=this._map;if(!d||!o)return"";let A=0;const T=this.getRotationAlignment();if(T==="map")if(d._showingGlobe()){const S=d.project(new n.bO(this._lngLat.lng,this._lngLat.lat+.001),this._altitude),E=d.project(new n.bO(this._lngLat.lng,this._lngLat.lat-.001),this._altitude).sub(S);A=n.c4(Math.atan2(E.y,E.x))-90}else A=-d.getBearing();else if(T==="horizon"){const S=n.ae(4,6,d.getZoom()),E=n.dM(d.transform);E.y+=S*d.transform.height;const k=o.sub(E),Z=n.c4(Math.atan2(k.y,k.x));A=(Z>90?Z-270:Z+90)*(1-S)}return A+=this._rotation,A?`rotateZ(${A}deg)`:""}_update(o){cancelAnimationFrame(this._updateFrameId);const d=this._map;d&&(d.transform.renderWorldCopies&&(this._lngLat=Tp(this._lngLat,this._pos,d.transform)),this._pos=d.project(this._lngLat,this._altitude),o===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),d._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(d._showingGlobe()||d.getTerrain()||d.getFog())&&!this._fadeTimer&&(this._fadeTimer=window.setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(o){return this._offset=n.P.convert(o),this._update(),this}addClassName(o){return this._element.classList.add(o),this}removeClassName(o){return this._element.classList.remove(o),this}toggleClassName(o){return this._element.classList.toggle(o)}_onMove(o){const d=this._map;if(!d)return;const A=this._pointerdownPos,T=this._positionDelta;if(A&&T){if(!this._isDragging){const S=this._clickTolerance||d._clickTolerance;if(o.point.dist(A)<S)return;this._isDragging=!0}this._pos=o.point.sub(T),this._lngLat=d.unproject(this._pos,this._altitude),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new n.A("dragstart"))),this.fire(new n.A("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const o=this._map;o&&(o.off("mousemove",this._onMove),o.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new n.A("dragend")),this._state="inactive"}_addDragHandler(o){const d=this._map,A=this._pos;d&&A&&this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(A),this._pointerdownPos=o.point,this._state="pending",d.on("mousemove",this._onMove),d.on("touchmove",this._onMove),d.once("mouseup",this._onUp),d.once("touchend",this._onUp))}setDraggable(o){this._draggable=!!o;const d=this._map;return d&&(o?(d.on("mousedown",this._addDragHandler),d.on("touchstart",this._addDragHandler)):(d.off("mousedown",this._addDragHandler),d.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||Ii.rotation,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||Ii.rotationAlignment,this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o||Ii.pitchAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(o){return this._occludedOpacity=o||Ii.occludedOpacity,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Uu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Ni={maxWidth:100,unit:"metric"},ey={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},Bu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",altitude:0},xA=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function af(y=new n.P(0,0),o="bottom"){if(typeof y=="number"){const d=Math.round(Math.sqrt(.5*Math.pow(y,2)));switch(o){case"top":return new n.P(0,y);case"top-left":return new n.P(d,d);case"top-right":return new n.P(-d,d);case"bottom":return new n.P(0,-y);case"bottom-left":return new n.P(d,-d);case"bottom-right":return new n.P(-d,-d);case"left":return new n.P(y,0);case"right":return new n.P(-y,0)}return new n.P(0,0)}return y instanceof n.P||Array.isArray(y)?n.P.convert(y):n.P.convert(y[o]||[0,0])}return{version:v,supported:j.supported,setRTLTextPlugin:n.dN,getRTLTextPluginStatus:n.dO,Map:class extends wp{constructor(y){x.mark(R.create);const o=y;if((y=n.l({},tf,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(y.antialias&&n.dI(window)&&(y.antialias=!1,n.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Md(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies,null,null),y),this._repaint=!!y.repaint,this._interactive=y.interactive,this._minTileCacheSize=y.minTileCacheSize,this._maxTileCacheSize=y.maxTileCacheSize,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=y.crossSourceCollisions,this._collectResourceTiming=y.collectResourceTiming,this._language=this._parseLanguage(y.language),this._worldview=y.worldview,this._renderTaskQueue=new ic,this._domRenderTaskQueue=new ic,this._controls=[],this._markers=[],this._popups=[],this._mapId=n.aW(),this._locale=n.l({},Vc,y.locale),this._clickTolerance=y.clickTolerance,this._cooperativeGestures=y.cooperativeGestures,this._performanceMetricsCollection=y.performanceMetricsCollection,this._tessellationStep=y.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._precompilePrograms=y.precompilePrograms,this._scaleFactorChanged=!1,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Rp(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._scaleFactor=y.scaleFactor,this._requestManager=new Ee(y.transformRequest,y.accessToken,y.testMode),this._silenceAuthErrors=!!y.testMode,this._contextCreateOptions=y.contextCreateOptions?Object.assign({},y.contextCreateOptions):{},typeof y.container=="string"){const d=document.getElementById(y.container);if(!d)throw new Error(`Container '${y.container.toString()}' not found.`);this._container=d}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(this._container.childNodes.length>0&&n.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),y.maxBounds&&this.setMaxBounds(y.maxBounds),this._spriteFormat=y.spriteFormat,n.aQ(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._tp||(this._tp=new Fu),this._tp.registerParameter(this,["Debug"],"showOverdrawInspector"),this._tp.registerParameter(this,["Debug"],"showTileBoundaries"),this._tp.registerParameter(this,["Debug"],"showParseStatus"),this._tp.registerParameter(this,["Debug"],"repaint"),this._tp.registerParameter(this,["Debug"],"showTileAABBs"),this._tp.registerParameter(this,["Debug"],"showPadding"),this._tp.registerParameter(this,["Debug"],"showCollisionBoxes",{noSave:!0}),this._tp.registerParameter(this.transform,["Debug"],"freezeTileCoverage",{noSave:!0},()=>{this._update()}),this._tp.registerParameter(this,["Debug","Wireframe"],"showTerrainWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers2DWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers3DWireframe"),this._tp.registerParameter(this,["Scaling"],"_scaleFactor",{min:.1,max:10,step:.1},()=>{this.setScaleFactor(this._scaleFactor)}),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new fm(this,y),this._localFontFamily=y.localFontFamily,this._localIdeographFontFamily=y.localIdeographFontFamily,(y.style||!y.testMode)&&this.setStyle(y.style||n.e.DEFAULT_STYLE,{config:y.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),y.projection&&this.setProjection(y.projection),this.indoor=new Gc(this),y.hash&&(this._hash=new Wg(typeof y.hash=="string"&&y.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){o.center==null&&o.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch});const d=y.bounds;d&&(this.resize(),this.fitBounds(d,n.l({},y.fitBoundsOptions,{duration:0})))}this.resize(),y.attributionControl&&this.addControl(new Ff({customAttribution:y.customAttribution})),this._logoControl=new Wo,this.addControl(this._logoControl,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent()}),this.on("data",d=>{this._update(d.dataType==="style"),this.fire(new n.A(`${d.dataType}data`,d))}),this.on("dataloading",d=>{this.fire(new n.A(`${d.dataType}dataloading`,d))}),this._interactions=new Qg(this)}_getMapId(){return this._mapId}addControl(y,o){if(o===void 0&&(o=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new n.z(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=y.onAdd(this);this._controls.push(y);const A=this._controlPositions[o];return o.indexOf("bottom")!==-1?A.insertBefore(d,A.firstChild):A.appendChild(d),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new n.z(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const o=this._controls.indexOf(y);return o>-1&&this._controls.splice(o,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(y){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const o=!this._moving;return o&&this.fire(new n.A("movestart",y)).fire(new n.A("move",y)),this.fire(new n.A("resize",y)),o&&this.fire(new n.A("moveend",y)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(y){return this.transform.setMaxBounds(n.aB.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y?this.setZoom(y):this.fire(new n.A("zoomstart")).fire(new n.A("zoom")).fire(new n.A("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y?this.setZoom(y):this.fire(new n.A("zoomstart")).fire(new n.A("zoom")).fire(new n.A("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y?this.setPitch(y):this.fire(new n.A("pitchstart")).fire(new n.A("pitch")).fire(new n.A("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y?this.setPitch(y):this.fire(new n.A("pitchstart")).fire(new n.A("pitch")).fire(new n.A("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getScaleFactor(){return this._scaleFactor}setScaleFactor(y){return this._scaleFactor=y,this.painter.scaleFactor=y,this._tp.refreshUI(),this._scaleFactorChanged=!0,this.style._updateFilteredLayers(o=>o.type==="symbol"),this._update(!0),this}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(y){return y==="auto"?navigator.language:Array.isArray(y)?y.length===0?void 0:y.map(o=>o==="auto"?navigator.language:o):y}setLanguage(y){const o=this._parseLanguage(y);if(!this.style||o===this._language)return this;this._language=o,this.style.reloadSources();for(const d of this._controls)d._setLanguage&&d._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(y){return this.style&&y!==this._worldview?(this._worldview=y,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(y){return this._lazyInitEmptyStyle(),y?typeof y=="string"&&(y={name:y}):y=null,this._useExplicitProjection=!!y,this._prioritizeAndUpdateProjection(y,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const y=this.transform,o=y.projection.name;let d;o==="globe"&&y.zoom>=n.bY?(y.setMercatorFromTransition(),d=!0):o==="mercator"&&y.zoom<n.bY&&(y.setProjection({name:"globe"}),d=!0),d&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(y,o){return this._updateProjection(y||o||{name:"mercator"})}_updateProjection(y){let o;return o=y.name==="globe"&&this.transform.zoom>=n.bY?this.transform.setMercatorFromTransition():this.transform.setProjection(y),this.style.applyProjectionUpdate(),o&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(y,o){return this.transform.locationPoint3D(n.bO.convert(y),o)}unproject(y,o){return this.transform.pointLocation3D(n.P.convert(y),o)}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(y,o,d){const A=T=>{let S=[];if(Array.isArray(o)){const E=o.filter(k=>this.getLayer(k));S=E.length?this.queryRenderedFeatures(T,{layers:E}):[]}else S=this.queryRenderedFeatures(T,{target:o});return S};if(y==="mouseenter"||y==="mouseover"){let T=!1;return{listener:d,targets:o,delegates:{mousemove:E=>{const k=A(E.point);k.length?T||(T=!0,d.call(this,new Tl(y,this,E.originalEvent,{features:k}))):T=!1},mouseout:()=>{T=!1}}}}if(y==="mouseleave"||y==="mouseout"){let T=!1;return{listener:d,targets:o,delegates:{mousemove:k=>{A(k.point).length?T=!0:T&&(T=!1,d.call(this,new Tl(y,this,k.originalEvent)))},mouseout:k=>{T&&(T=!1,d.call(this,new Tl(y,this,k.originalEvent)))}}}}{const T=S=>{const E=A(S.point);E.length&&(S.features=E,d.call(this,S),delete S.features)};return{listener:d,targets:o,delegates:{[y]:T}}}}on(y,o,d){if(typeof o=="function"||d===void 0)return super.on(y,o);if(typeof o=="string"&&(o=[o]),!this._areTargetsValid(o))return this;const A=this._createDelegatedListener(y,o,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(A);for(const T in A.delegates)this.on(T,A.delegates[T]);return this}once(y,o,d){if(typeof o=="function"||d===void 0)return super.once(y,o);if(typeof o=="string"&&(o=[o]),!this._areTargetsValid(o))return this;const A=this._createDelegatedListener(y,o,d);for(const T in A.delegates)this.once(T,A.delegates[T]);return this}off(y,o,d){if(typeof o=="function"||d===void 0)return super.off(y,o);if(typeof o=="string"&&(o=[o]),!this._areTargetsValid(o))return this;const A=this._delegatedListeners?this._delegatedListeners[y]:void 0;return A&&(T=>{for(let S=0;S<T.length;S++){const E=T[S];if(E.listener===d&&Gn(E.targets,o)){for(const k in E.delegates)this.off(k,E.delegates[k]);return T.splice(S,1),this}}})(A),this}queryRenderedFeatures(y,o){if(!this.style)return[];if(y===void 0||y instanceof n.P||Array.isArray(y)||o!==void 0||(o=y,y=void 0),y=y||[[0,0],[this.transform.width,this.transform.height]],!o){const S=this.style.queryRenderedFeatures(y,void 0,this.transform),E=this.style.queryRenderedFeatureset(y,void 0,this.transform);return S.concat(E)}let d=!0;if(o.target&&(d=this._isTargetValid(o.target),d&&!o.layers))return this.style.queryRenderedFeatureset(y,o,this.transform);let A=!0;if(o.layers&&Array.isArray(o.layers)){for(const S of o.layers)if(!this._isValidId(S)){A=!1;break}if(A&&!o.target)return this.style.queryRenderedFeatures(y,o,this.transform)}let T=[];return A&&(T=T.concat(this.style.queryRenderedFeatures(y,o,this.transform))),d&&(T=T.concat(this.style.queryRenderedFeatureset(y,o,this.transform))),T}querySourceFeatures(y,o){return!y||typeof y=="string"&&!this._isValidId(y)?[]:this.style.querySourceFeatures(y,o)}isPointOnSurface(y){const{name:o}=this.transform.projection;return o!=="globe"&&o!=="mercator"&&n.w(`${o} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(n.P.convert(y))}addInteraction(y,o){return this._interactions.add(y,o),this}removeInteraction(y){return this._interactions.remove(y),this}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(y){return this._cooperativeGestures=y,this}setStyle(y,o){return o=n.l({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},o),this.style&&y&&o.diff!==!1&&o.localFontFamily===this._localFontFamily&&o.localIdeographFontFamily===this._localIdeographFontFamily&&!o.config?(this.style._diffStyle(y,(d,A)=>{d?(n.w(`Unable to perform style diff: ${String(d.message||d.error||d)}. Rebuilding the style from scratch.`),this._updateStyle(y,o)):A&&this._update(!0)},()=>{this._postStyleLoadEvent()}),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._localFontFamily=o.localFontFamily,this._updateStyle(y,o))}_getUIString(y){const o=this._locale[y];if(o==null)throw new Error(`Missing UI string '${y}'`);return o}_updateStyle(y,o){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),y){const d=n.l({},o);o&&o.config&&(d.initialConfig=o.config,delete d.config),this.style=new oo(this,d).load(y),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new oo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(n.w("There is no style added to the map."),!1)}_isValidId(y){return y==null?(this.fire(new n.z(new Error("IDs can't be empty."))),!1):!n.cs(y)||(this.fire(new n.z(new Error(`IDs can't contain special symbols: "${y}".`))),!1)}_isTargetValid(y){return"featuresetId"in y?this._isValidId("importId"in y?y.importId:y.featuresetId):"layerId"in y&&this._isValidId(y.layerId)}_areTargetsValid(y){if(Array.isArray(y)){for(const o of y)if(!this._isValidId(o))return!1;return!0}return this._isTargetValid(y)}addSource(y,o){return this._isValidId(y)?(this._lazyInitEmptyStyle(),this.style.addSource(y,o),this._update(!0)):this}isSourceLoaded(y){return!!this._isValidId(y)&&!!this.style&&this.style._isSourceCacheLoaded(y)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(y,o,d){this._lazyInitEmptyStyle(),this.style.addSourceType(y,o,d)}removeSource(y){return this._isValidId(y)?(this.style.removeSource(y),this._updateTerrain(),this._update(!0)):this}getSource(y){return this._isValidId(y)?this.style.getOwnSource(y):null}addImage(y,o,{pixelRatio:d=1,sdf:A=!1,stretchX:T,stretchY:S,content:E}={}){this._lazyInitEmptyStyle();const k=n.I.from(y);if(o instanceof HTMLImageElement||ImageBitmap&&o instanceof ImageBitmap){const{width:Z,height:K,data:Y}=n.q.getImageData(o);this.style.addImage(k,{data:new n.r({width:Z,height:K},Y),pixelRatio:d,stretchX:T,stretchY:S,content:E,sdf:A,version:0,usvg:!1})}else if(o.width===void 0||o.height===void 0)this.fire(new n.z(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:Z,height:K}=o,Y=o;this.style.addImage(k,{data:new n.r({width:Z,height:K},new Uint8Array(Y.data)),pixelRatio:d,stretchX:T,stretchY:S,content:E,sdf:A,usvg:!1,version:0,userImage:Y}),Y.onAdd&&Y.onAdd(this,y)}}updateImage(y,o){this._lazyInitEmptyStyle();const d=n.I.from(y),A=this.style.getImage(d);if(!A)return void this.fire(new n.z(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const T=o instanceof HTMLImageElement||ImageBitmap&&o instanceof ImageBitmap?n.q.getImageData(o):o,{width:S,height:E,data:k}=T;if(S===void 0||E===void 0)return void this.fire(new n.z(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(S!==(A.usvg?A.icon.usvg_tree.width:A.data.width)||E!==(A.usvg?A.icon.usvg_tree.height:A.data.height))return void this.fire(new n.z(new Error(`The width and height of the updated image (${S}, ${E})
                must be that same as the previous version of the image
                (${A.data.width}, ${A.data.height})`)));const Z=!(o instanceof HTMLImageElement||ImageBitmap&&o instanceof ImageBitmap);let K=!1;A.usvg?(A.data=new n.r({width:S,height:E},new Uint8Array(k)),A.usvg=!1,A.icon=void 0,K=!0):A.data.replace(k,Z),this.style.updateImage(d,A,K)}hasImage(y){return y?!!this.style&&!!this.style.getImage(n.I.from(y)):(this.fire(new n.z(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(n.I.from(y))}loadImage(y,o){n.o(this._requestManager.transformRequest(y,n.R.Image),(d,A)=>{o(d,A instanceof HTMLImageElement?n.q.getImageData(A):A)})}listImages(){return this.style.listImages().map(y=>y.name)}addModel(y,o){this._lazyInitEmptyStyle(),this.style.addModel(y,o)}hasModel(y){return y?this.style.hasModel(y):(this.fire(new n.z(new Error("Missing required model id"))),!1)}removeModel(y){this.style.removeModel(y)}listModels(){return this.style.listModels()}addLayer(y,o){return this._isValidId(y.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(y,o),this._update(!0)):this}getSlot(y){const o=this.getLayer(y);return o&&o.slot||null}setSlot(y,o){return this.style.setSlot(y,o),this.style.mergeLayers(),this._update(!0)}addImport(y,o){return this.style.addImport(y,o),this}updateImport(y,o){return typeof o!="string"&&o.id!==y?(this.removeImport(y),this.addImport(o)):(this.style.updateImport(y,o),this._update(!0))}removeImport(y){return this.style.removeImport(y),this}moveImport(y,o){return this.style.moveImport(y,o),this._update(!0)}moveLayer(y,o){return this._isValidId(y)?(this.style.moveLayer(y,o),this._update(!0)):this}removeLayer(y){return this._isValidId(y)?(this.style.removeLayer(y),this._update(!0)):this}getLayer(y){if(!this._isValidId(y))return null;const o=this.style.getOwnLayer(y);return o?o.type==="custom"?o.implementation:o.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(y,o,d){return this._isValidId(y)?(this.style.setLayerZoomRange(y,o,d),this._update(!0)):this}setFilter(y,o,d={}){return this._isValidId(y)?(this.style.setFilter(y,o,d),this._update(!0)):this}getFilter(y){return this._isValidId(y)?this.style.getFilter(y):null}setPaintProperty(y,o,d,A={}){return this._isValidId(y)?(this.style.setPaintProperty(y,o,d,A),this._update(!0)):this}getPaintProperty(y,o){return this._isValidId(y)?this.style.getPaintProperty(y,o):null}setLayoutProperty(y,o,d,A={}){return this._isValidId(y)?(this.style.setLayoutProperty(y,o,d,A),this._update(!0)):this}getLayoutProperty(y,o){return this._isValidId(y)?this.style.getLayoutProperty(y,o):null}getGlyphsUrl(){return this.style.getGlyphsUrl()}setGlyphsUrl(y){return this.style.setGlyphsUrl(y),this._update(!0)}getSchema(y){return this.style.getSchema(y)}setSchema(y,o){return this.style.setSchema(y,o),this._update(!0)}getConfig(y){return this.style.getConfig(y)}setConfig(y,o){return this.style.setConfig(y,o),this._update(!0)}getConfigProperty(y,o){return this.style.getConfigProperty(y,o)}setConfigProperty(y,o,d){return this.style.setConfigProperty(y,o,d),this._update(!0)}getFeaturesetDescriptors(y){return this.style.getFeaturesetDescriptors(y)}setLights(y){if(this._lazyInitEmptyStyle(),y&&y.length===1&&y[0].type==="flat"){const o=y[0];o.properties?this.style.setFlatLight(o.properties,o.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(y),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const y=this.style.getLights()||[];return y.length===0&&y.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),y}setLight(y,o={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:y}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(y){return this._lazyInitEmptyStyle(),!y&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(y),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(y){return this._lazyInitEmptyStyle(),this.style.setFog(y),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setSnow(y){return this._lazyInitEmptyStyle(),this.style.setSnow(y),this._update(!0)}getSnow(){return this.style?this.style.getSnow():null}setRain(y){return this._lazyInitEmptyStyle(),this.style.setRain(y),this._update(!0)}getRain(){return this.style?this.style.getRain():null}setColorTheme(y){return this._lazyInitEmptyStyle(),this.style.setColorTheme(y),this._update(!0)}setImportColorTheme(y,o){return this._lazyInitEmptyStyle(),this.style.setImportColorTheme(y,o),this._update(!0)}setCamera(y){return this.style.setCamera(y),this._triggerCameraUpdate(y)}_triggerCameraUpdate(y){return this._update(this.transform.setOrthographicProjectionAtLowPitch(y["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(y){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(n.bO.convert(y),this.transform):0}setFeatureState(y,o){return y.source&&!this._isValidId(y.source)?this:(this.style.setFeatureState(y,o),this._update())}removeFeatureState(y,o){return y.source&&!this._isValidId(y.source)?this:(this.style.removeFeatureState(y,o),this._update())}getFeatureState(y){return y.source&&!this._isValidId(y.source)?null:this.style.getFeatureState(y)}_updateContainerDimensions(){if(!this._container)return;const y=this._container.getBoundingClientRect().width||400,o=this._container.getBoundingClientRect().height||300;let d,A,T,S=this._container;for(;S&&(!A||!T);){const E=window.getComputedStyle(S).transform;E&&E!=="none"&&(d=E.match(/matrix.*\((.+)\)/)[1].split(", "),d[0]&&d[0]!=="0"&&d[0]!=="1"&&(A=d[0]),d[3]&&d[3]!=="0"&&d[3]!=="1"&&(T=d[3])),S=S.parentElement}this._containerWidth=A?Math.abs(y/A):y,this._containerHeight=T?Math.abs(o/T):o}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&n.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const y=this._container;y.classList.add("mapboxgl-map"),(this._missingCSSCanary=$("div","mapboxgl-canary",y)).style.visibility="hidden",this._detectMissingCSS();const o=this._canvasContainer=$("div","mapboxgl-canvas-container",y);this._canvas=$("canvas","mapboxgl-canvas",o),this._interactive&&(o.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const d=this._controlContainer=$("div","mapboxgl-control-container",y),A=this._controlPositions={};["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"].forEach(T=>{A[T]=$("div",`mapboxgl-ctrl-${T}`,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,o){const d=n.q.devicePixelRatio||1;this._canvas.width=d*Math.ceil(y),this._canvas.height=d*Math.ceil(o),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${o}px`}_addMarker(y){this._markers.push(y)}_removeMarker(y){const o=this._markers.indexOf(y);o!==-1&&this._markers.splice(o,1)}_addPopup(y){this._popups.push(y)}_removePopup(y){const o=this._popups.indexOf(y);o!==-1&&this._popups.splice(o,1)}_setupPainter(){const y=n.l({},j.supported.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),o=this._canvas.getContext("webgl2",y);o?(Bt(o,!0),this.painter=new om(o,this._contextCreateOptions,this.transform,this._scaleFactor,this._tp),this.on("data",d=>{d.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),n.m.testSupport(o)):this.fire(new n.z(new Error("Failed to initialize WebGL")))}_contextLost(y){y.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new n.A("webglcontextlost",{originalEvent:y}))}_contextRestored(y){this._setupPainter(),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight)),this._updateTerrain(),this.style.reloadModels(),this.style.clearSources(),this._update(),this.fire(new n.A("webglcontextrestored",{originalEvent:y}))}_onMapScroll(y){if(y.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}idle(){return!this.isMoving()&&this.loaded()}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty}_update(y){return this.style?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_requestDomTask(y){!this.loaded()||this.loaded()&&!this.isMoving()?y():this._domRenderTaskQueue.add(y)}_render(y){let o;this.fire(new n.A("renderstart")),++this._frameId;const d=this.painter.context.extTimerQuery,A=n.q.now(),T=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(o=T.createQuery(),T.beginQuery(d.TIME_ELAPSED_EXT,o)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(y),this._domRenderTaskQueue.run(y),this._removed)return;this._updateProjectionTransition();const S=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const K=this.transform.zoom,Y=this.transform.pitch,ae=n.q.now(),re=new n.aa(K,{now:ae,fadeDuration:S,pitch:Y,transition:this.style.transition});this.style.update(re)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let E=!1;this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),E=this._updateAverageElevation(A),this.style.updateSources(this.transform),this.isMoving()||this._forceMarkerAndPopupUpdate()):E=this._updateAverageElevation(A);const k=this.style&&this.style._updatePlacement(this.painter,this.painter.transform,this.showCollisionBoxes,S,this._crossSourceCollisions,this.painter.replacementSource,this._scaleFactorChanged);if(this._scaleFactorChanged&&(this._scaleFactorChanged=!1),k&&(this._placementDirty=k.needsRerender),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:S,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new n.A("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,x.mark(R.load),this.fire(new n.A("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&(this.style.snow||this.style.rain)&&(this._styleDirty=!0),this.style&&this.style.imageManager.hasPatternsInFlight()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),o){const K=n.q.now()-A;T.endQuery(d.TIME_ELAPSED_EXT),setTimeout(()=>{const Y=T.getQueryParameter(o,T.QUERY_RESULT)/1e6;T.deleteQuery(o),this.fire(new n.A("gpu-timing-frame",{cpuTime:K,gpuTime:Y}))},50)}if(this.listens("gpu-timing-layer")){const K=this.painter.collectGpuTimers();setTimeout(()=>{const Y=this.painter.queryGpuTimers(K);this.fire(new n.A("gpu-timing-layer",{layerTimes:Y}))},50)}if(this.listens("gpu-timing-deferred-render")){const K=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const Y=this.painter.queryGpuTimeDeferredRender(K);this.fire(new n.A("gpu-timing-deferred-render",{gpuTime:Y}))},50)}const Z=this._sourcesDirty||this._styleDirty||this._placementDirty||E;if(Z||this._repaint)this.triggerRepaint();else{const K=this.idle();if(K&&(E=this._updateAverageElevation(A,!0)),E)this.triggerRepaint();else if(this._triggerFrame(!1),K&&(this.fire(new n.A("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const Y=this._calculateSpeedIndex();this.fire(new n.A("speedindexcompleted",{speedIndex:Y})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||Z||(this._fullyLoaded=!0,x.mark(R.fullLoad),this._performanceMetricsCollection&&lt(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(y){for(const o of this._markers)y&&!this.getRenderWorldCopies()&&(o._lngLat=o._lngLat.wrap()),o._update();for(const o of this._popups)!y||this.getRenderWorldCopies()||o._trackPointer||(o._lngLat=o._lngLat.wrap()),o._update()}_updateAverageElevation(y,o=!1){const d=T=>(this.transform.averageElevation=T,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&d(0);const A=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(A||(o||y-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(y)){const T=this.transform.averageElevation;let S=this.transform.sampleAverageElevation();this.transform.elevation!=null&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(S)?S=0:this._averageElevationLastSampledAt=y;const E=Math.abs(T-S);if(E>1){if(this._isInitialLoad||A)return this._averageElevation.jumpTo(S),d(S);this._averageElevation.easeTo(S,y,300)}else if(E>1e-4)return this._averageElevation.jumpTo(S),d(S)}return!!this._averageElevation.isEasing(y)&&d(this._averageElevation.getValue(y))}_authenticate(){ve(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,y=>{if(y&&(y.message===Fe||y.status===401)){const o=this.painter.context.gl;Bt(o,!1),this._logoControl instanceof Wo&&this._logoControl._updateLogo(),o&&o.clear(o.DEPTH_BUFFER_BIT|o.COLOR_BUFFER_BIT|o.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new n.z(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),ke(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_postStyleLoadEvent(){this.style.globalId&&at(this._requestManager._customAccessToken,{map:this,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_updateTerrain(){const y=this._isDragging();this.painter.updateTerrain(this.style,y)}_calculateSpeedIndex(){const y=this.painter.canvasCopy(),o=this.painter.getCanvasCopiesAndTimestamps();o.timeStamps.push(performance.now());const d=this.painter.context.gl,A=d.createFramebuffer();function T(S){d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,S,0);const E=new Uint8Array(d.drawingBufferWidth*d.drawingBufferHeight*4);return d.readPixels(0,0,d.drawingBufferWidth,d.drawingBufferHeight,d.RGBA,d.UNSIGNED_BYTE,E),E}return d.bindFramebuffer(d.FRAMEBUFFER,A),this._canvasPixelComparison(T(y),o.canvasCopies.map(T),o.timeStamps)}_canvasPixelComparison(y,o,d){let A=d[1]-d[0];const T=y.length/4;for(let S=0;S<o.length;S++){const E=o[S];let k=0;for(let Z=0;Z<E.length;Z+=4)E[Z]===y[Z]&&E[Z+1]===y[Z+1]&&E[Z+2]===y[Z+2]&&E[Z+3]===y[Z+3]&&(k+=1);A+=(d[S+2]-d[S+1])*(1-k/T)}return A}remove(){this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.indoor.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const y=this.painter.context.gl.getExtension("WEBGL_lose_context");y&&y.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),Vt.delete(this.painter.context.gl),ot.remove(),Te.remove(),this._removed=!0,this.fire(new n.A("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(y){this._renderNextFrame=this._renderNextFrame||y,this.style&&!this._frame&&(this._frame=n.q.frame(o=>{const d=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,d&&this._render(o)}))}_preloadTiles(y){const o=this.style?this.style.getSourceCaches():[];return n.bl(o,(d,A)=>d._preloadTiles(y,A),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(y){this._trackResize&&this.resize({originalEvent:y})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._tp.refreshUI(),this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(y){this._showParseStatus!==y&&(this._showParseStatus=y,this._tp.refreshUI(),this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(y){this._showTerrainWireframe!==y&&(this._showTerrainWireframe=y,this._tp.refreshUI(),this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(y){this._showLayers2DWireframe!==y&&(this._showLayers2DWireframe=y,this._tp.refreshUI(),this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(y){this._showLayers3DWireframe!==y&&(this._showLayers3DWireframe=y,this._tp.refreshUI(),this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(y){this._speedIndexTiming!==y&&(this._speedIndexTiming=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._tp.refreshUI(),this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,this._tp.refreshUI(),y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._tp.refreshUI(),this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this._tp.refreshUI(),this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(y){this._showTileAABBs!==y&&(this._showTileAABBs=y,this._tp.refreshUI(),y&&this._update())}_setCacheLimits(y,o){n.dJ(y,o)}get version(){return v}},NavigationControl:class{constructor(y={}){this.options=n.l({},SA,y),this._container=$("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(n.aQ(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",o=>{this._map&&this._map.zoomIn({},{originalEvent:o})}),$("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",o=>{this._map&&this._map.zoomOut({},{originalEvent:o})}),$("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(n.aQ(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",o=>{const d=this._map;d&&(this.options.visualizePitch?d.resetNorthPitch({},{originalEvent:o}):d.resetNorth({},{originalEvent:o}))}),this._compassIcon=$("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const y=this._map;if(!y)return;const o=y.getZoom(),d=o===y.getMaxZoom(),A=o===y.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=A,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",A.toString())}_rotateCompassArrow(){const y=this._map;if(!y)return;const o=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(y.transform.pitch*(Math.PI/180)),.5)}) rotateX(${y.transform.pitch}deg) rotateZ(${y.transform.angle*(180/Math.PI)}deg)`:`rotate(${y.transform.angle*(180/Math.PI)}deg)`;y._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=o)})}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),y.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&y.on("pitch",this._rotateCompassArrow),y.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new bA(y,this._compass,this.options.visualizePitch)),this._container}onRemove(){const y=this._map;y&&(this._container.remove(),this.options.showZoom&&y.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&y.off("pitch",this._rotateCompassArrow),y.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(y,o){const d=$("button",y,this._container);return d.type="button",d.addEventListener("click",o),d}_setButtonTitle(y,o){if(!this._map)return;const d=this._map._getUIString(`NavigationControl.${o}`);y.setAttribute("aria-label",d),y.firstElementChild&&y.firstElementChild.setAttribute("title",d)}},GeolocateControl:class extends n.E{constructor(y={}){super();const o=navigator.geolocation;this.options=n.l({geolocation:o},Uu,y),n.aQ(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=sg(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(y){return this._map=y,this._container=$("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(y){const o=(d=!!this.options.geolocation)=>{this._supportsGeolocation=d,y(d)};this._supportsGeolocation!==void 0?y(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(d=>o(d.state!=="denied")).catch(()=>o()):o()}_isOutOfMapMaxBounds(y){const o=this._map.getMaxBounds(),d=y.coords;return!!o&&(d.longitude<o.getWest()||d.longitude>o.getEast()||d.latitude<o.getSouth()||d.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(y){if(this._map){if(this._isOutOfMapMaxBounds(y))return this._setErrorState(),this.fire(new n.A("outofmaxbounds",y)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=y,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(y),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(y),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new n.A("geolocate",y)),this._finish()}}_updateCamera(y){const o=new n.bO(y.coords.longitude,y.coords.latitude),d=y.coords.accuracy,A=this._map.getBearing(),T=n.l({bearing:A},this.options.fitBoundsOptions);this._map.fitBounds(o.toBounds(d),T,{geolocateSource:!0})}_updateMarker(y){if(y){const o=new n.bO(y.coords.longitude,y.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=y.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const y=this._map.transform,o=n.bH(1,y._center.lat)*y.worldSize,d=Math.ceil(2*this._accuracy*o);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(y){if(this._map){if(this.options.trackUserLocation)if(y.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(y.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new n.A("error",y)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(y){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",o=>o.preventDefault()),this._geolocateButton=$("button","mapboxgl-ctrl-geolocate",this._container),$("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",y===!1){n.w("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=$("div","mapboxgl-user-location"),this._dotElement.appendChild($("div","mapboxgl-user-location-dot")),this._dotElement.appendChild($("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Yo({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=$("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Yo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new n.A("trackuserlocationend")))})}}_onDeviceOrientation(y){this._userLocationDotMarker&&(y.webkitCompassHeading?this._heading=y.webkitCompassHeading:y.absolute===!0&&(this._heading=-1*y.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return n.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new n.A("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new n.A("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new n.A("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(y={maximumAge:6e5,timeout:0},this._noTimeout=!0):(y=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,y),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=window.setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const y=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(o=>{o==="granted"&&y()}).catch(console.error):y()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Ff,ScaleControl:class{constructor(y={}){this.options=n.l({},Ni,y),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),n.aQ(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const y=this.options.maxWidth||100,o=this._map,d=o._containerHeight/2,A=o._containerWidth/2-y/2,T=o.unproject([A,d]),S=o.unproject([A+y,d]),E=T.distanceTo(S);if(this.options.unit==="imperial"){const k=3.2808*E;k>5280?this._setScale(y,k/5280,"mile"):this._setScale(y,k,"foot")}else this.options.unit==="nautical"?this._setScale(y,E/1852,"nautical-mile"):E>=1e3?this._setScale(y,E/1e3,"kilometer"):this._setScale(y,E,"meter")}_setScale(y,o,d){this._map._requestDomTask(()=>{const A=function(S){const E=Math.pow(10,`${Math.floor(S)}`.length-1);let k=S/E;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(Z){const K=Math.pow(10,Math.ceil(-Math.log(Z)/Math.LN10));return Math.round(Z*K)/K}(k),E*k}(o),T=A/o;this._container.innerHTML=this._isNumberFormatSupported&&d!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:d}).format(A):`${A}&nbsp;${ey[d]}`,this._container.style.width=y*T+"px"})}onAdd(y){return this._map=y,this._language=y.getLanguage(),this._container=$("div","mapboxgl-ctrl mapboxgl-ctrl-scale",y.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(y){this._language=y,this._update()}setUnit(y){this.options.unit=y,this._update()}},FullscreenControl:class{constructor(y={}){this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:n.w("Full screen control 'container' must be a DOM element.")),n.aQ(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=$("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",n.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const y=this._fullscreenButton=$("button","mapboxgl-ctrl-fullscreen",this._controlContainer);$("span","mapboxgl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",y)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends n.E{constructor(y){super(),this.options=n.l(Object.create(Bu),y),this._altitude=this.options.altitude,n.aQ(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(y&&y.className?y.className.trim().split(/\s+/):[])}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&y.on("preclick",this._onClose),this.options.closeOnMove&&y.on("move",this._onClose),y.on("remove",this.remove),this._update(),y._addPopup(this),this._focusFirstElement(),this._trackPointer?(y.on("mousemove",this._onMouseEvent),y.on("mouseup",this._onMouseEvent),y._canvasContainer.classList.add("mapboxgl-track-pointer")):y.on("move",this._update),this.fire(new n.A("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const y=this._map;return y&&(y.off("move",this._update),y.off("move",this._onClose),y.off("preclick",this._onClose),y.off("click",this._onClose),y.off("remove",this.remove),y.off("mousemove",this._onMouseEvent),y.off("mouseup",this._onMouseEvent),y.off("drag",this._onMouseEvent),y._canvasContainer&&y._canvasContainer.classList.remove("mapboxgl-track-pointer"),y._removePopup(this),this._map=void 0),this.fire(new n.A("close")),this}getLngLat(){return this._lngLat}setLngLat(y){this._lngLat=n.bO.convert(y),this._pos=null,this._trackPointer=!1,this._update();const o=this._map;return o&&(o.on("move",this._update),o.off("mousemove",this._onMouseEvent),o._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}getAltitude(){return this._altitude}setAltitude(y){return this._altitude=y,this._update(),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const y=this._map;return y&&(y.off("move",this._update),y.on("mousemove",this._onMouseEvent),y.on("drag",this._onMouseEvent),y._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const o=document.createDocumentFragment(),d=document.createElement("body");let A;for(d.innerHTML=y;A=d.firstChild,A;)o.appendChild(A);return this.setDOMContent(o)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){let o=this._content;if(o)for(;o.hasChildNodes();)o.firstChild&&o.removeChild(o.firstChild);else o=this._content=$("div","mapboxgl-popup-content",this._container||void 0);if(o.appendChild(y),this.options.closeButton){const d=this._closeButton=$("button","mapboxgl-popup-close-button",o);d.type="button",d.setAttribute("aria-label","Close popup"),d.innerHTML='<span aria-hidden="true">&#215;</span>',d.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(y){return this._classList.add(y),this._updateClassList(),this}removeClassName(y){return this._classList.delete(y),this._updateClassList(),this}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){let o;return this._classList.delete(y)?o=!1:(this._classList.add(y),o=!0),this._updateClassList(),o}_onMouseEvent(y){this._update(y.point)}_getAnchor(y){if(this.options.anchor)return this.options.anchor;const o=this._map,d=this._container,A=this._pos;if(!o||!d||!A)return"bottom";const T=d.offsetWidth,S=d.offsetHeight,E=A.x<T/2,k=A.x>o.transform.width-T/2;if(A.y+y<S)return E?"top-left":k?"top-right":"top";if(A.y>o.transform.height-S){if(E)return"bottom-left";if(k)return"bottom-right"}return E?"left":k?"right":"bottom"}_updateClassList(){const y=this._container;if(!y)return;const o=[...this._classList];o.push("mapboxgl-popup"),this._anchor&&o.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&o.push("mapboxgl-popup-track-pointer"),y.className=o.join(" ")}_update(y){const o=this._map,d=this._content;if(!o||!this._lngLat&&!this._trackPointer||!d)return;let A=this._container;if(A||(A=this._container=$("div","mapboxgl-popup",o.getContainer()),this._tip=$("div","mapboxgl-popup-tip",A),A.appendChild(d)),this.options.maxWidth&&A.style.maxWidth!==this.options.maxWidth&&(A.style.maxWidth=this.options.maxWidth),o.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Tp(this._lngLat,this._pos,o.transform)),!this._trackPointer||y){const T=this._pos=this._trackPointer&&y instanceof n.P?y:o.project(this._lngLat,this._altitude),S=af(this.options.offset),E=this._anchor=this._getAnchor(S.y),k=af(this.options.offset,E),Z=T.add(k).round();o._requestDomTask(()=>{this._container&&E&&(this._container.style.transform=`${Sl[E]} translate(${Z.x}px,${Z.y}px)`)})}if(!this._marker&&o._showingGlobe()){const T=n.dK(o.transform,this._lngLat)?0:1;this._setOpacity(T)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(xA);y&&y.focus()}_onClose(){this.remove()}_setOpacity(y){this._container&&(this._container.style.opacity=`${y}`),this._content&&(this._content.style.pointerEvents=y?"auto":"none")}},Marker:Yo,Style:oo,LngLat:n.bO,LngLatBounds:n.aB,Point:n.P,MercatorCoordinate:n.ac,FreeCameraOptions:Dd,Evented:n.E,config:n.e,prewarm:n.dP,clearPrewarmedResources:n.dQ,get accessToken(){return n.e.ACCESS_TOKEN},set accessToken(y){n.e.ACCESS_TOKEN=y},get baseApiUrl(){return n.e.API_URL},set baseApiUrl(y){n.e.API_URL=y},get workerCount(){return n.dR.workerCount},set workerCount(y){n.dR.workerCount=y},get maxParallelImageRequests(){return n.e.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(y){n.e.MAX_PARALLEL_IMAGE_REQUESTS=y},clearStorage(y){n.dS(y)},get workerUrl(){return n.dT.workerUrl},set workerUrl(y){n.dT.workerUrl=y},get workerClass(){return n.dT.workerClass},set workerClass(y){n.dT.workerClass=y},get workerParams(){return n.dT.workerParams},set workerParams(y){n.dT.workerParams=y},get dracoUrl(){return n.dU()},set dracoUrl(y){n.dV(y)},get meshoptUrl(){return n.dW()},set meshoptUrl(y){n.dX(y)},setNow:n.q.setNow,restoreNow:n.q.restoreNow}});var c=i;return c})}(Cb)),Cb.exports}var Xfe=Yfe();const ep=ss(Xfe);function AX(t){var e,a,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(a=AX(t[e]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}function gi(){for(var t,e,a=0,r="",i=arguments.length;a<i;a++)(t=arguments[a])&&(e=AX(t))&&(r&&(r+=" "),r+=e);return r}var BN,iB;function kh(){if(iB)return BN;iB=1;var t=Array.isArray;return BN=t,BN}var jN,sB;function vX(){if(sB)return jN;sB=1;var t=typeof OS=="object"&&OS&&OS.Object===Object&&OS;return jN=t,jN}var GN,oB;function Ym(){if(oB)return GN;oB=1;var t=vX(),e=typeof self=="object"&&self&&self.Object===Object&&self,a=t||e||Function("return this")();return GN=a,GN}var ZN,lB;function dC(){if(lB)return ZN;lB=1;var t=Ym(),e=t.Symbol;return ZN=e,ZN}var qN,uB;function Jfe(){if(uB)return qN;uB=1;var t=dC(),e=Object.prototype,a=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function l(c){var n=a.call(c,i),v=c[i];try{c[i]=void 0;var R=!0}catch{}var x=r.call(c);return R&&(n?c[i]=v:delete c[i]),x}return qN=l,qN}var HN,cB;function Qfe(){if(cB)return HN;cB=1;var t=Object.prototype,e=t.toString;function a(r){return e.call(r)}return HN=a,HN}var $N,dB;function Bg(){if(dB)return $N;dB=1;var t=dC(),e=Jfe(),a=Qfe(),r="[object Null]",i="[object Undefined]",l=t?t.toStringTag:void 0;function c(n){return n==null?n===void 0?i:r:l&&l in Object(n)?e(n):a(n)}return $N=c,$N}var KN,hB;function jg(){if(hB)return KN;hB=1;function t(e){return e!=null&&typeof e=="object"}return KN=t,KN}var WN,fB;function y1(){if(fB)return WN;fB=1;var t=Bg(),e=jg(),a="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==a}return WN=r,WN}var YN,pB;function IL(){if(pB)return YN;pB=1;var t=kh(),e=y1(),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(l,c){if(t(l))return!1;var n=typeof l;return n=="number"||n=="symbol"||n=="boolean"||l==null||e(l)?!0:r.test(l)||!a.test(l)||c!=null&&l in Object(c)}return YN=i,YN}var XN,mB;function uA(){if(mB)return XN;mB=1;function t(e){var a=typeof e;return e!=null&&(a=="object"||a=="function")}return XN=t,XN}var JN,gB;function LL(){if(gB)return JN;gB=1;var t=Bg(),e=uA(),a="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",l="[object Proxy]";function c(n){if(!e(n))return!1;var v=t(n);return v==r||v==i||v==a||v==l}return JN=c,JN}var QN,yB;function epe(){if(yB)return QN;yB=1;var t=Ym(),e=t["__core-js_shared__"];return QN=e,QN}var eO,AB;function tpe(){if(AB)return eO;AB=1;var t=epe(),e=function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function a(r){return!!e&&e in r}return eO=a,eO}var tO,vB;function _X(){if(vB)return tO;vB=1;var t=Function.prototype,e=t.toString;function a(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return tO=a,tO}var aO,_B;function ape(){if(_B)return aO;_B=1;var t=LL(),e=tpe(),a=uA(),r=_X(),i=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,c=Function.prototype,n=Object.prototype,v=c.toString,R=n.hasOwnProperty,x=RegExp("^"+v.call(R).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function N(L){if(!a(L)||e(L))return!1;var F=t(L)?x:l;return F.test(r(L))}return aO=N,aO}var rO,wB;function rpe(){if(wB)return rO;wB=1;function t(e,a){return e==null?void 0:e[a]}return rO=t,rO}var nO,RB;function Hv(){if(RB)return nO;RB=1;var t=ape(),e=rpe();function a(r,i){var l=e(r,i);return t(l)?l:void 0}return nO=a,nO}var iO,TB;function fP(){if(TB)return iO;TB=1;var t=Hv(),e=t(Object,"create");return iO=e,iO}var sO,CB;function npe(){if(CB)return sO;CB=1;var t=fP();function e(){this.__data__=t?t(null):{},this.size=0}return sO=e,sO}var oO,SB;function ipe(){if(SB)return oO;SB=1;function t(e){var a=this.has(e)&&delete this.__data__[e];return this.size-=a?1:0,a}return oO=t,oO}var lO,bB;function spe(){if(bB)return lO;bB=1;var t=fP(),e="__lodash_hash_undefined__",a=Object.prototype,r=a.hasOwnProperty;function i(l){var c=this.__data__;if(t){var n=c[l];return n===e?void 0:n}return r.call(c,l)?c[l]:void 0}return lO=i,lO}var uO,xB;function ope(){if(xB)return uO;xB=1;var t=fP(),e=Object.prototype,a=e.hasOwnProperty;function r(i){var l=this.__data__;return t?l[i]!==void 0:a.call(l,i)}return uO=r,uO}var cO,PB;function lpe(){if(PB)return cO;PB=1;var t=fP(),e="__lodash_hash_undefined__";function a(r,i){var l=this.__data__;return this.size+=this.has(r)?0:1,l[r]=t&&i===void 0?e:i,this}return cO=a,cO}var dO,EB;function upe(){if(EB)return dO;EB=1;var t=npe(),e=ipe(),a=spe(),r=ope(),i=lpe();function l(c){var n=-1,v=c==null?0:c.length;for(this.clear();++n<v;){var R=c[n];this.set(R[0],R[1])}}return l.prototype.clear=t,l.prototype.delete=e,l.prototype.get=a,l.prototype.has=r,l.prototype.set=i,dO=l,dO}var hO,NB;function cpe(){if(NB)return hO;NB=1;function t(){this.__data__=[],this.size=0}return hO=t,hO}var fO,OB;function FL(){if(OB)return fO;OB=1;function t(e,a){return e===a||e!==e&&a!==a}return fO=t,fO}var pO,VB;function pP(){if(VB)return pO;VB=1;var t=FL();function e(a,r){for(var i=a.length;i--;)if(t(a[i][0],r))return i;return-1}return pO=e,pO}var mO,zB;function dpe(){if(zB)return mO;zB=1;var t=pP(),e=Array.prototype,a=e.splice;function r(i){var l=this.__data__,c=t(l,i);if(c<0)return!1;var n=l.length-1;return c==n?l.pop():a.call(l,c,1),--this.size,!0}return mO=r,mO}var gO,DB;function hpe(){if(DB)return gO;DB=1;var t=pP();function e(a){var r=this.__data__,i=t(r,a);return i<0?void 0:r[i][1]}return gO=e,gO}var yO,MB;function fpe(){if(MB)return yO;MB=1;var t=pP();function e(a){return t(this.__data__,a)>-1}return yO=e,yO}var AO,IB;function ppe(){if(IB)return AO;IB=1;var t=pP();function e(a,r){var i=this.__data__,l=t(i,a);return l<0?(++this.size,i.push([a,r])):i[l][1]=r,this}return AO=e,AO}var vO,LB;function mP(){if(LB)return vO;LB=1;var t=cpe(),e=dpe(),a=hpe(),r=fpe(),i=ppe();function l(c){var n=-1,v=c==null?0:c.length;for(this.clear();++n<v;){var R=c[n];this.set(R[0],R[1])}}return l.prototype.clear=t,l.prototype.delete=e,l.prototype.get=a,l.prototype.has=r,l.prototype.set=i,vO=l,vO}var _O,FB;function kL(){if(FB)return _O;FB=1;var t=Hv(),e=Ym(),a=t(e,"Map");return _O=a,_O}var wO,kB;function mpe(){if(kB)return wO;kB=1;var t=upe(),e=mP(),a=kL();function r(){this.size=0,this.__data__={hash:new t,map:new(a||e),string:new t}}return wO=r,wO}var RO,UB;function gpe(){if(UB)return RO;UB=1;function t(e){var a=typeof e;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?e!=="__proto__":e===null}return RO=t,RO}var TO,BB;function gP(){if(BB)return TO;BB=1;var t=gpe();function e(a,r){var i=a.__data__;return t(r)?i[typeof r=="string"?"string":"hash"]:i.map}return TO=e,TO}var CO,jB;function ype(){if(jB)return CO;jB=1;var t=gP();function e(a){var r=t(this,a).delete(a);return this.size-=r?1:0,r}return CO=e,CO}var SO,GB;function Ape(){if(GB)return SO;GB=1;var t=gP();function e(a){return t(this,a).get(a)}return SO=e,SO}var bO,ZB;function vpe(){if(ZB)return bO;ZB=1;var t=gP();function e(a){return t(this,a).has(a)}return bO=e,bO}var xO,qB;function _pe(){if(qB)return xO;qB=1;var t=gP();function e(a,r){var i=t(this,a),l=i.size;return i.set(a,r),this.size+=i.size==l?0:1,this}return xO=e,xO}var PO,HB;function UL(){if(HB)return PO;HB=1;var t=mpe(),e=ype(),a=Ape(),r=vpe(),i=_pe();function l(c){var n=-1,v=c==null?0:c.length;for(this.clear();++n<v;){var R=c[n];this.set(R[0],R[1])}}return l.prototype.clear=t,l.prototype.delete=e,l.prototype.get=a,l.prototype.has=r,l.prototype.set=i,PO=l,PO}var EO,$B;function wX(){if($B)return EO;$B=1;var t=UL(),e="Expected a function";function a(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var l=function(){var c=arguments,n=i?i.apply(this,c):c[0],v=l.cache;if(v.has(n))return v.get(n);var R=r.apply(this,c);return l.cache=v.set(n,R)||v,R};return l.cache=new(a.Cache||t),l}return a.Cache=t,EO=a,EO}var NO,KB;function wpe(){if(KB)return NO;KB=1;var t=wX(),e=500;function a(r){var i=t(r,function(c){return l.size===e&&l.clear(),c}),l=i.cache;return i}return NO=a,NO}var OO,WB;function Rpe(){if(WB)return OO;WB=1;var t=wpe(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,r=t(function(i){var l=[];return i.charCodeAt(0)===46&&l.push(""),i.replace(e,function(c,n,v,R){l.push(v?R.replace(a,"$1"):n||c)}),l});return OO=r,OO}var VO,YB;function BL(){if(YB)return VO;YB=1;function t(e,a){for(var r=-1,i=e==null?0:e.length,l=Array(i);++r<i;)l[r]=a(e[r],r,e);return l}return VO=t,VO}var zO,XB;function Tpe(){if(XB)return zO;XB=1;var t=dC(),e=BL(),a=kh(),r=y1(),i=t?t.prototype:void 0,l=i?i.toString:void 0;function c(n){if(typeof n=="string")return n;if(a(n))return e(n,c)+"";if(r(n))return l?l.call(n):"";var v=n+"";return v=="0"&&1/n==-1/0?"-0":v}return zO=c,zO}var DO,JB;function RX(){if(JB)return DO;JB=1;var t=Tpe();function e(a){return a==null?"":t(a)}return DO=e,DO}var MO,QB;function TX(){if(QB)return MO;QB=1;var t=kh(),e=IL(),a=Rpe(),r=RX();function i(l,c){return t(l)?l:e(l,c)?[l]:a(r(l))}return MO=i,MO}var IO,e8;function yP(){if(e8)return IO;e8=1;var t=y1();function e(a){if(typeof a=="string"||t(a))return a;var r=a+"";return r=="0"&&1/a==-1/0?"-0":r}return IO=e,IO}var LO,t8;function jL(){if(t8)return LO;t8=1;var t=TX(),e=yP();function a(r,i){i=t(i,r);for(var l=0,c=i.length;r!=null&&l<c;)r=r[e(i[l++])];return l&&l==c?r:void 0}return LO=a,LO}var FO,a8;function CX(){if(a8)return FO;a8=1;var t=jL();function e(a,r,i){var l=a==null?void 0:t(a,r);return l===void 0?i:l}return FO=e,FO}var Cpe=CX();const vf=ss(Cpe);var kO,r8;function Spe(){if(r8)return kO;r8=1;function t(e){return e==null}return kO=t,kO}var bpe=Spe();const qn=ss(bpe);var UO,n8;function xpe(){if(n8)return UO;n8=1;var t=Bg(),e=kh(),a=jg(),r="[object String]";function i(l){return typeof l=="string"||!e(l)&&a(l)&&t(l)==r}return UO=i,UO}var Ppe=xpe();const hC=ss(Ppe);var Epe=LL();const Zn=ss(Epe);var Npe=uA();const A1=ss(Npe);var BO={exports:{}},Us={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i8;function Ope(){if(i8)return Us;i8=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),n=Symbol.for("react.server_context"),v=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),F=Symbol.for("react.offscreen"),j;j=Symbol.for("react.module.reference");function $(H){if(typeof H=="object"&&H!==null){var W=H.$$typeof;switch(W){case t:switch(H=H.type,H){case a:case i:case r:case R:case x:return H;default:switch(H=H&&H.$$typeof,H){case n:case c:case v:case L:case N:case l:return H;default:return W}}case e:return W}}}return Us.ContextConsumer=c,Us.ContextProvider=l,Us.Element=t,Us.ForwardRef=v,Us.Fragment=a,Us.Lazy=L,Us.Memo=N,Us.Portal=e,Us.Profiler=i,Us.StrictMode=r,Us.Suspense=R,Us.SuspenseList=x,Us.isAsyncMode=function(){return!1},Us.isConcurrentMode=function(){return!1},Us.isContextConsumer=function(H){return $(H)===c},Us.isContextProvider=function(H){return $(H)===l},Us.isElement=function(H){return typeof H=="object"&&H!==null&&H.$$typeof===t},Us.isForwardRef=function(H){return $(H)===v},Us.isFragment=function(H){return $(H)===a},Us.isLazy=function(H){return $(H)===L},Us.isMemo=function(H){return $(H)===N},Us.isPortal=function(H){return $(H)===e},Us.isProfiler=function(H){return $(H)===i},Us.isStrictMode=function(H){return $(H)===r},Us.isSuspense=function(H){return $(H)===R},Us.isSuspenseList=function(H){return $(H)===x},Us.isValidElementType=function(H){return typeof H=="string"||typeof H=="function"||H===a||H===i||H===r||H===R||H===x||H===F||typeof H=="object"&&H!==null&&(H.$$typeof===L||H.$$typeof===N||H.$$typeof===l||H.$$typeof===c||H.$$typeof===v||H.$$typeof===j||H.getModuleId!==void 0)},Us.typeOf=$,Us}var s8;function Vpe(){return s8||(s8=1,BO.exports=Ope()),BO.exports}var zpe=Vpe(),jO,o8;function SX(){if(o8)return jO;o8=1;var t=Bg(),e=jg(),a="[object Number]";function r(i){return typeof i=="number"||e(i)&&t(i)==a}return jO=r,jO}var GO,l8;function Dpe(){if(l8)return GO;l8=1;var t=SX();function e(a){return t(a)&&a!=+a}return GO=e,GO}var Mpe=Dpe();const v1=ss(Mpe);var Ipe=SX();const Lpe=ss(Ipe);var sh=function(e){return e===0?0:e>0?1:-1},fv=function(e){return hC(e)&&e.indexOf("%")===e.length-1},_r=function(e){return Lpe(e)&&!v1(e)},qu=function(e){return _r(e)||hC(e)},Fpe=0,cA=function(e){var a=++Fpe;return"".concat(e||"").concat(a)},oh=function(e,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!_r(e)&&!hC(e))return r;var l;if(fv(e)){var c=e.indexOf("%");l=a*parseFloat(e.slice(0,c))/100}else l=+e;return v1(l)&&(l=r),i&&l>a&&(l=a),l},Ly=function(e){if(!e)return null;var a=Object.keys(e);return a&&a.length?e[a[0]]:null},kpe=function(e){if(!Array.isArray(e))return!1;for(var a=e.length,r={},i=0;i<a;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},ml=function(e,a){return _r(e)&&_r(a)?function(r){return e+r*(a-e)}:function(){return a}};function hx(t,e,a){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):vf(r,e))===a})}var Upe=function(e){if(!e||!e.length)return null;for(var a=e.length,r=0,i=0,l=0,c=0,n=1/0,v=-1/0,R=0,x=0,N=0;N<a;N++)R=e[N].cx||0,x=e[N].cy||0,r+=R,i+=x,l+=R*x,c+=R*R,n=Math.min(n,R),v=Math.max(v,R);var L=a*c!==r*r?(a*l-r*i)/(a*c-r*r):0;return{xmin:n,xmax:v,a:L,b:(i-L*r)/a}};function f_(t,e){for(var a in t)if({}.hasOwnProperty.call(t,a)&&(!{}.hasOwnProperty.call(e,a)||t[a]!==e[a]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function gM(t){"@babel/helpers - typeof";return gM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gM(t)}var Bpe=["viewBox","children"],jpe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],u8=["points","pathLength"],ZO={svg:Bpe,polygon:u8,polyline:u8},GL=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],fx=function(e,a){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(ie.isValidElement(e)&&(r=e.props),!A1(r))return null;var i={};return Object.keys(r).forEach(function(l){GL.includes(l)&&(i[l]=a||function(c){return r[l](r,c)})}),i},Gpe=function(e,a,r){return function(i){return e(a,r,i),null}},Qy=function(e,a,r){if(!A1(e)||gM(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(l){var c=e[l];GL.includes(l)&&typeof c=="function"&&(i||(i={}),i[l]=Gpe(c,a,r))}),i},Zpe=["children"],qpe=["children"];function c8(t,e){if(t==null)return{};var a=Hpe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Hpe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function yM(t){"@babel/helpers - typeof";return yM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yM(t)}var d8={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Eg=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},h8=null,qO=null,ZL=function t(e){if(e===h8&&Array.isArray(qO))return qO;var a=[];return ie.Children.forEach(e,function(r){qn(r)||(zpe.isFragment(r)?a=a.concat(t(r.props.children)):a.push(r))}),qO=a,h8=e,a};function hh(t,e){var a=[],r=[];return Array.isArray(e)?r=e.map(function(i){return Eg(i)}):r=[Eg(e)],ZL(t).forEach(function(i){var l=vf(i,"type.displayName")||vf(i,"type.name");r.indexOf(l)!==-1&&a.push(i)}),a}function df(t,e){var a=hh(t,e);return a&&a[0]}var f8=function(e){if(!e||!e.props)return!1;var a=e.props,r=a.width,i=a.height;return!(!_r(r)||r<=0||!_r(i)||i<=0)},$pe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Kpe=function(e){return e&&e.type&&hC(e.type)&&$pe.indexOf(e.type)>=0},bX=function(e){return e&&yM(e)==="object"&&"clipDot"in e},Wpe=function(e,a,r,i){var l,c=(l=ZO==null?void 0:ZO[i])!==null&&l!==void 0?l:[];return!Zn(e)&&(i&&c.includes(a)||jpe.includes(a))||r&&GL.includes(a)},gn=function(e,a,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(ie.isValidElement(e)&&(i=e.props),!A1(i))return null;var l={};return Object.keys(i).forEach(function(c){var n;Wpe((n=i)===null||n===void 0?void 0:n[c],c,a,r)&&(l[c]=i[c])}),l},AM=function t(e,a){if(e===a)return!0;var r=ie.Children.count(e);if(r!==ie.Children.count(a))return!1;if(r===0)return!0;if(r===1)return p8(Array.isArray(e)?e[0]:e,Array.isArray(a)?a[0]:a);for(var i=0;i<r;i++){var l=e[i],c=a[i];if(Array.isArray(l)||Array.isArray(c)){if(!t(l,c))return!1}else if(!p8(l,c))return!1}return!0},p8=function(e,a){if(qn(e)&&qn(a))return!0;if(!qn(e)&&!qn(a)){var r=e.props||{},i=r.children,l=c8(r,Zpe),c=a.props||{},n=c.children,v=c8(c,qpe);return i&&n?f_(l,v)&&AM(i,n):!i&&!n?f_(l,v):!1}return!1},m8=function(e,a){var r=[],i={};return ZL(e).forEach(function(l,c){if(Kpe(l))r.push(l);else if(l){var n=Eg(l.type),v=a[n]||{},R=v.handler,x=v.once;if(R&&(!x||!i[n])){var N=R(l,n,c);r.push(N),i[n]=!0}}}),r},Ype=function(e){var a=e&&e.type;return a&&d8[a]?d8[a]:null},Xpe=function(e,a){return ZL(a).indexOf(e)},Jpe=["children","width","height","viewBox","className","style","title","desc"];function vM(){return vM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},vM.apply(this,arguments)}function Qpe(t,e){if(t==null)return{};var a=eme(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function eme(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function _M(t){var e=t.children,a=t.width,r=t.height,i=t.viewBox,l=t.className,c=t.style,n=t.title,v=t.desc,R=Qpe(t,Jpe),x=i||{width:a,height:r,x:0,y:0},N=gi("recharts-surface",l);return Ot.createElement("svg",vM({},gn(R,!0,"svg"),{className:N,width:a,height:r,style:c,viewBox:"".concat(x.x," ").concat(x.y," ").concat(x.width," ").concat(x.height)}),Ot.createElement("title",null,n),Ot.createElement("desc",null,v),e)}var tme=["children","className"];function wM(){return wM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},wM.apply(this,arguments)}function ame(t,e){if(t==null)return{};var a=rme(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function rme(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}var _i=Ot.forwardRef(function(t,e){var a=t.children,r=t.className,i=ame(t,tme),l=gi("recharts-layer",r);return Ot.createElement("g",wM({className:l},gn(i,!0),{ref:e}),a)}),qp=function(e,a){for(var r=arguments.length,i=new Array(r>2?r-2:0),l=2;l<r;l++)i[l-2]=arguments[l]},HO,g8;function nme(){if(g8)return HO;g8=1;function t(e,a,r){var i=-1,l=e.length;a<0&&(a=-a>l?0:l+a),r=r>l?l:r,r<0&&(r+=l),l=a>r?0:r-a>>>0,a>>>=0;for(var c=Array(l);++i<l;)c[i]=e[i+a];return c}return HO=t,HO}var $O,y8;function ime(){if(y8)return $O;y8=1;var t=nme();function e(a,r,i){var l=a.length;return i=i===void 0?l:i,!r&&i>=l?a:t(a,r,i)}return $O=e,$O}var KO,A8;function xX(){if(A8)return KO;A8=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+a+r,l="\\ufe0e\\ufe0f",c="\\u200d",n=RegExp("["+c+t+i+l+"]");function v(R){return n.test(R)}return KO=v,KO}var WO,v8;function sme(){if(v8)return WO;v8=1;function t(e){return e.split("")}return WO=t,WO}var YO,_8;function ome(){if(_8)return YO;_8=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+a+r,l="\\ufe0e\\ufe0f",c="["+t+"]",n="["+i+"]",v="\\ud83c[\\udffb-\\udfff]",R="(?:"+n+"|"+v+")",x="[^"+t+"]",N="(?:\\ud83c[\\udde6-\\uddff]){2}",L="[\\ud800-\\udbff][\\udc00-\\udfff]",F="\\u200d",j=R+"?",$="["+l+"]?",H="(?:"+F+"(?:"+[x,N,L].join("|")+")"+$+j+")*",W=$+j+H,ee="(?:"+[x+n+"?",n,N,L,c].join("|")+")",se=RegExp(v+"(?="+v+")|"+ee+W,"g");function fe(le){return le.match(se)||[]}return YO=fe,YO}var XO,w8;function lme(){if(w8)return XO;w8=1;var t=sme(),e=xX(),a=ome();function r(i){return e(i)?a(i):t(i)}return XO=r,XO}var JO,R8;function ume(){if(R8)return JO;R8=1;var t=ime(),e=xX(),a=lme(),r=RX();function i(l){return function(c){c=r(c);var n=e(c)?a(c):void 0,v=n?n[0]:c.charAt(0),R=n?t(n,1).join(""):c.slice(1);return v[l]()+R}}return JO=i,JO}var QO,T8;function cme(){if(T8)return QO;T8=1;var t=ume(),e=t("toUpperCase");return QO=e,QO}var dme=cme();const AP=ss(dme);function xo(t){return function(){return t}}const PX=Math.cos,px=Math.sin,Xp=Math.sqrt,mx=Math.PI,vP=2*mx,RM=Math.PI,TM=2*RM,nv=1e-6,hme=TM-nv;function EX(t){this._+=t[0];for(let e=1,a=t.length;e<a;++e)this._+=arguments[e]+t[e]}function fme(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return EX;const a=10**e;return function(r){this._+=r[0];for(let i=1,l=r.length;i<l;++i)this._+=Math.round(arguments[i]*a)/a+r[i]}}class pme{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?EX:fme(e)}moveTo(e,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,a){this._append`L${this._x1=+e},${this._y1=+a}`}quadraticCurveTo(e,a,r,i){this._append`Q${+e},${+a},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,a,r,i,l,c){this._append`C${+e},${+a},${+r},${+i},${this._x1=+l},${this._y1=+c}`}arcTo(e,a,r,i,l){if(e=+e,a=+a,r=+r,i=+i,l=+l,l<0)throw new Error(`negative radius: ${l}`);let c=this._x1,n=this._y1,v=r-e,R=i-a,x=c-e,N=n-a,L=x*x+N*N;if(this._x1===null)this._append`M${this._x1=e},${this._y1=a}`;else if(L>nv)if(!(Math.abs(N*v-R*x)>nv)||!l)this._append`L${this._x1=e},${this._y1=a}`;else{let F=r-c,j=i-n,$=v*v+R*R,H=F*F+j*j,W=Math.sqrt($),ee=Math.sqrt(L),se=l*Math.tan((RM-Math.acos(($+L-H)/(2*W*ee)))/2),fe=se/ee,le=se/W;Math.abs(fe-1)>nv&&this._append`L${e+fe*x},${a+fe*N}`,this._append`A${l},${l},0,0,${+(N*F>x*j)},${this._x1=e+le*v},${this._y1=a+le*R}`}}arc(e,a,r,i,l,c){if(e=+e,a=+a,r=+r,c=!!c,r<0)throw new Error(`negative radius: ${r}`);let n=r*Math.cos(i),v=r*Math.sin(i),R=e+n,x=a+v,N=1^c,L=c?i-l:l-i;this._x1===null?this._append`M${R},${x}`:(Math.abs(this._x1-R)>nv||Math.abs(this._y1-x)>nv)&&this._append`L${R},${x}`,r&&(L<0&&(L=L%TM+TM),L>hme?this._append`A${r},${r},0,1,${N},${e-n},${a-v}A${r},${r},0,1,${N},${this._x1=R},${this._y1=x}`:L>nv&&this._append`A${r},${r},0,${+(L>=RM)},${N},${this._x1=e+r*Math.cos(l)},${this._y1=a+r*Math.sin(l)}`)}rect(e,a,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function qL(t){let e=3;return t.digits=function(a){if(!arguments.length)return e;if(a==null)e=null;else{const r=Math.floor(a);if(!(r>=0))throw new RangeError(`invalid digits: ${a}`);e=r}return t},()=>new pme(e)}function HL(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function NX(t){this._context=t}NX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function _P(t){return new NX(t)}function OX(t){return t[0]}function VX(t){return t[1]}function zX(t,e){var a=xo(!0),r=null,i=_P,l=null,c=qL(n);t=typeof t=="function"?t:t===void 0?OX:xo(t),e=typeof e=="function"?e:e===void 0?VX:xo(e);function n(v){var R,x=(v=HL(v)).length,N,L=!1,F;for(r==null&&(l=i(F=c())),R=0;R<=x;++R)!(R<x&&a(N=v[R],R,v))===L&&((L=!L)?l.lineStart():l.lineEnd()),L&&l.point(+t(N,R,v),+e(N,R,v));if(F)return l=null,F+""||null}return n.x=function(v){return arguments.length?(t=typeof v=="function"?v:xo(+v),n):t},n.y=function(v){return arguments.length?(e=typeof v=="function"?v:xo(+v),n):e},n.defined=function(v){return arguments.length?(a=typeof v=="function"?v:xo(!!v),n):a},n.curve=function(v){return arguments.length?(i=v,r!=null&&(l=i(r)),n):i},n.context=function(v){return arguments.length?(v==null?r=l=null:l=i(r=v),n):r},n}function GS(t,e,a){var r=null,i=xo(!0),l=null,c=_P,n=null,v=qL(R);t=typeof t=="function"?t:t===void 0?OX:xo(+t),e=typeof e=="function"?e:xo(e===void 0?0:+e),a=typeof a=="function"?a:a===void 0?VX:xo(+a);function R(N){var L,F,j,$=(N=HL(N)).length,H,W=!1,ee,se=new Array($),fe=new Array($);for(l==null&&(n=c(ee=v())),L=0;L<=$;++L){if(!(L<$&&i(H=N[L],L,N))===W)if(W=!W)F=L,n.areaStart(),n.lineStart();else{for(n.lineEnd(),n.lineStart(),j=L-1;j>=F;--j)n.point(se[j],fe[j]);n.lineEnd(),n.areaEnd()}W&&(se[L]=+t(H,L,N),fe[L]=+e(H,L,N),n.point(r?+r(H,L,N):se[L],a?+a(H,L,N):fe[L]))}if(ee)return n=null,ee+""||null}function x(){return zX().defined(i).curve(c).context(l)}return R.x=function(N){return arguments.length?(t=typeof N=="function"?N:xo(+N),r=null,R):t},R.x0=function(N){return arguments.length?(t=typeof N=="function"?N:xo(+N),R):t},R.x1=function(N){return arguments.length?(r=N==null?null:typeof N=="function"?N:xo(+N),R):r},R.y=function(N){return arguments.length?(e=typeof N=="function"?N:xo(+N),a=null,R):e},R.y0=function(N){return arguments.length?(e=typeof N=="function"?N:xo(+N),R):e},R.y1=function(N){return arguments.length?(a=N==null?null:typeof N=="function"?N:xo(+N),R):a},R.lineX0=R.lineY0=function(){return x().x(t).y(e)},R.lineY1=function(){return x().x(t).y(a)},R.lineX1=function(){return x().x(r).y(e)},R.defined=function(N){return arguments.length?(i=typeof N=="function"?N:xo(!!N),R):i},R.curve=function(N){return arguments.length?(c=N,l!=null&&(n=c(l)),R):c},R.context=function(N){return arguments.length?(N==null?l=n=null:n=c(l=N),R):l},R}class DX{constructor(e,a){this._context=e,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,a){switch(e=+e,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,a):this._context.moveTo(e,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,a,e,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,e,this._y0,e,a);break}}this._x0=e,this._y0=a}}function mme(t){return new DX(t,!0)}function gme(t){return new DX(t,!1)}const $L={draw(t,e){const a=Xp(e/mx);t.moveTo(a,0),t.arc(0,0,a,0,vP)}},yme={draw(t,e){const a=Xp(e/5)/2;t.moveTo(-3*a,-a),t.lineTo(-a,-a),t.lineTo(-a,-3*a),t.lineTo(a,-3*a),t.lineTo(a,-a),t.lineTo(3*a,-a),t.lineTo(3*a,a),t.lineTo(a,a),t.lineTo(a,3*a),t.lineTo(-a,3*a),t.lineTo(-a,a),t.lineTo(-3*a,a),t.closePath()}},MX=Xp(1/3),Ame=MX*2,vme={draw(t,e){const a=Xp(e/Ame),r=a*MX;t.moveTo(0,-a),t.lineTo(r,0),t.lineTo(0,a),t.lineTo(-r,0),t.closePath()}},_me={draw(t,e){const a=Xp(e),r=-a/2;t.rect(r,r,a,a)}},wme=.8908130915292852,IX=px(mx/10)/px(7*mx/10),Rme=px(vP/10)*IX,Tme=-PX(vP/10)*IX,Cme={draw(t,e){const a=Xp(e*wme),r=Rme*a,i=Tme*a;t.moveTo(0,-a),t.lineTo(r,i);for(let l=1;l<5;++l){const c=vP*l/5,n=PX(c),v=px(c);t.lineTo(v*a,-n*a),t.lineTo(n*r-v*i,v*r+n*i)}t.closePath()}},eV=Xp(3),Sme={draw(t,e){const a=-Xp(e/(eV*3));t.moveTo(0,a*2),t.lineTo(-eV*a,-a),t.lineTo(eV*a,-a),t.closePath()}},Hf=-.5,$f=Xp(3)/2,CM=1/Xp(12),bme=(CM/2+1)*3,xme={draw(t,e){const a=Xp(e/bme),r=a/2,i=a*CM,l=r,c=a*CM+a,n=-l,v=c;t.moveTo(r,i),t.lineTo(l,c),t.lineTo(n,v),t.lineTo(Hf*r-$f*i,$f*r+Hf*i),t.lineTo(Hf*l-$f*c,$f*l+Hf*c),t.lineTo(Hf*n-$f*v,$f*n+Hf*v),t.lineTo(Hf*r+$f*i,Hf*i-$f*r),t.lineTo(Hf*l+$f*c,Hf*c-$f*l),t.lineTo(Hf*n+$f*v,Hf*v-$f*n),t.closePath()}};function Pme(t,e){let a=null,r=qL(i);t=typeof t=="function"?t:xo(t||$L),e=typeof e=="function"?e:xo(e===void 0?64:+e);function i(){let l;if(a||(a=l=r()),t.apply(this,arguments).draw(a,+e.apply(this,arguments)),l)return a=null,l+""||null}return i.type=function(l){return arguments.length?(t=typeof l=="function"?l:xo(l),i):t},i.size=function(l){return arguments.length?(e=typeof l=="function"?l:xo(+l),i):e},i.context=function(l){return arguments.length?(a=l??null,i):a},i}function gx(){}function yx(t,e,a){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+a)/6)}function LX(t){this._context=t}LX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:yx(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:yx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Eme(t){return new LX(t)}function FX(t){this._context=t}FX.prototype={areaStart:gx,areaEnd:gx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:yx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Nme(t){return new FX(t)}function kX(t){this._context=t}kX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(a,r):this._context.moveTo(a,r);break;case 3:this._point=4;default:yx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Ome(t){return new kX(t)}function UX(t){this._context=t}UX.prototype={areaStart:gx,areaEnd:gx,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Vme(t){return new UX(t)}function C8(t){return t<0?-1:1}function S8(t,e,a){var r=t._x1-t._x0,i=e-t._x1,l=(t._y1-t._y0)/(r||i<0&&-0),c=(a-t._y1)/(i||r<0&&-0),n=(l*i+c*r)/(r+i);return(C8(l)+C8(c))*Math.min(Math.abs(l),Math.abs(c),.5*Math.abs(n))||0}function b8(t,e){var a=t._x1-t._x0;return a?(3*(t._y1-t._y0)/a-e)/2:e}function tV(t,e,a){var r=t._x0,i=t._y0,l=t._x1,c=t._y1,n=(l-r)/3;t._context.bezierCurveTo(r+n,i+n*e,l-n,c-n*a,l,c)}function Ax(t){this._context=t}Ax.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:tV(this,this._t0,b8(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var a=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,tV(this,b8(this,a=S8(this,t,e)),a);break;default:tV(this,this._t0,a=S8(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=a}}};function BX(t){this._context=new jX(t)}(BX.prototype=Object.create(Ax.prototype)).point=function(t,e){Ax.prototype.point.call(this,e,t)};function jX(t){this._context=t}jX.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,a,r,i,l){this._context.bezierCurveTo(e,t,r,a,l,i)}};function zme(t){return new Ax(t)}function Dme(t){return new BX(t)}function GX(t){this._context=t}GX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,a=t.length;if(a)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),a===2)this._context.lineTo(t[1],e[1]);else for(var r=x8(t),i=x8(e),l=0,c=1;c<a;++l,++c)this._context.bezierCurveTo(r[0][l],i[0][l],r[1][l],i[1][l],t[c],e[c]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function x8(t){var e,a=t.length-1,r,i=new Array(a),l=new Array(a),c=new Array(a);for(i[0]=0,l[0]=2,c[0]=t[0]+2*t[1],e=1;e<a-1;++e)i[e]=1,l[e]=4,c[e]=4*t[e]+2*t[e+1];for(i[a-1]=2,l[a-1]=7,c[a-1]=8*t[a-1]+t[a],e=1;e<a;++e)r=i[e]/l[e-1],l[e]-=r,c[e]-=r*c[e-1];for(i[a-1]=c[a-1]/l[a-1],e=a-2;e>=0;--e)i[e]=(c[e]-i[e+1])/l[e];for(l[a-1]=(t[a]+i[a-1])/2,e=0;e<a-1;++e)l[e]=2*t[e+1]-i[e+1];return[i,l]}function Mme(t){return new GX(t)}function wP(t,e){this._context=t,this._t=e}wP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var a=this._x*(1-this._t)+t*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,e)}break}}this._x=t,this._y=e}};function Ime(t){return new wP(t,.5)}function Lme(t){return new wP(t,0)}function Fme(t){return new wP(t,1)}function E_(t,e){if((c=t.length)>1)for(var a=1,r,i,l=t[e[0]],c,n=l.length;a<c;++a)for(i=l,l=t[e[a]],r=0;r<n;++r)l[r][1]+=l[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function SM(t){for(var e=t.length,a=new Array(e);--e>=0;)a[e]=e;return a}function kme(t,e){return t[e]}function Ume(t){const e=[];return e.key=t,e}function Bme(){var t=xo([]),e=SM,a=E_,r=kme;function i(l){var c=Array.from(t.apply(this,arguments),Ume),n,v=c.length,R=-1,x;for(const N of l)for(n=0,++R;n<v;++n)(c[n][R]=[0,+r(N,c[n].key,R,l)]).data=N;for(n=0,x=HL(e(c));n<v;++n)c[x[n]].index=n;return a(c,x),c}return i.keys=function(l){return arguments.length?(t=typeof l=="function"?l:xo(Array.from(l)),i):t},i.value=function(l){return arguments.length?(r=typeof l=="function"?l:xo(+l),i):r},i.order=function(l){return arguments.length?(e=l==null?SM:typeof l=="function"?l:xo(Array.from(l)),i):e},i.offset=function(l){return arguments.length?(a=l??E_,i):a},i}function jme(t,e){if((r=t.length)>0){for(var a,r,i=0,l=t[0].length,c;i<l;++i){for(c=a=0;a<r;++a)c+=t[a][i][1]||0;if(c)for(a=0;a<r;++a)t[a][i][1]/=c}E_(t,e)}}function Gme(t,e){if((i=t.length)>0){for(var a=0,r=t[e[0]],i,l=r.length;a<l;++a){for(var c=0,n=0;c<i;++c)n+=t[c][a][1]||0;r[a][1]+=r[a][0]=-n/2}E_(t,e)}}function Zme(t,e){if(!(!((c=t.length)>0)||!((l=(i=t[e[0]]).length)>0))){for(var a=0,r=1,i,l,c;r<l;++r){for(var n=0,v=0,R=0;n<c;++n){for(var x=t[e[n]],N=x[r][1]||0,L=x[r-1][1]||0,F=(N-L)/2,j=0;j<n;++j){var $=t[e[j]],H=$[r][1]||0,W=$[r-1][1]||0;F+=H-W}v+=N,R+=F*N}i[r-1][1]+=i[r-1][0]=a,v&&(a-=R/v)}i[r-1][1]+=i[r-1][0]=a,E_(t,e)}}function JR(t){"@babel/helpers - typeof";return JR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},JR(t)}var qme=["type","size","sizeType"];function bM(){return bM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},bM.apply(this,arguments)}function P8(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function E8(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?P8(Object(a),!0).forEach(function(r){Hme(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):P8(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Hme(t,e,a){return e=$me(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function $me(t){var e=Kme(t,"string");return JR(e)=="symbol"?e:e+""}function Kme(t,e){if(JR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(JR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wme(t,e){if(t==null)return{};var a=Yme(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Yme(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}var ZX={symbolCircle:$L,symbolCross:yme,symbolDiamond:vme,symbolSquare:_me,symbolStar:Cme,symbolTriangle:Sme,symbolWye:xme},Xme=Math.PI/180,Jme=function(e){var a="symbol".concat(AP(e));return ZX[a]||$L},Qme=function(e,a,r){if(a==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*Xme;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},ege=function(e,a){ZX["symbol".concat(AP(e))]=a},RP=function(e){var a=e.type,r=a===void 0?"circle":a,i=e.size,l=i===void 0?64:i,c=e.sizeType,n=c===void 0?"area":c,v=Wme(e,qme),R=E8(E8({},v),{},{type:r,size:l,sizeType:n}),x=function(){var H=Jme(r),W=Pme().type(H).size(Qme(l,n,r));return W()},N=R.className,L=R.cx,F=R.cy,j=gn(R,!0);return L===+L&&F===+F&&l===+l?Ot.createElement("path",bM({},j,{className:gi("recharts-symbols",N),transform:"translate(".concat(L,", ").concat(F,")"),d:x()})):null};RP.registerSymbol=ege;function N_(t){"@babel/helpers - typeof";return N_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N_(t)}function xM(){return xM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},xM.apply(this,arguments)}function N8(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function tge(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?N8(Object(a),!0).forEach(function(r){QR(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):N8(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function age(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rge(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,HX(r.key),r)}}function nge(t,e,a){return e&&rge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ige(t,e,a){return e=vx(e),sge(t,qX()?Reflect.construct(e,a||[],vx(t).constructor):e.apply(t,a))}function sge(t,e){if(e&&(N_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oge(t)}function oge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qX=function(){return!!t})()}function vx(t){return vx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},vx(t)}function lge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PM(t,e)}function PM(t,e){return PM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},PM(t,e)}function QR(t,e,a){return e=HX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function HX(t){var e=uge(t,"string");return N_(e)=="symbol"?e:e+""}function uge(t,e){if(N_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(N_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var zp=32,KL=function(t){function e(){return age(this,e),ige(this,e,arguments)}return lge(e,t),nge(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,l=zp/2,c=zp/6,n=zp/3,v=r.inactive?i:r.color;if(r.type==="plainline")return Ot.createElement("line",{strokeWidth:4,fill:"none",stroke:v,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:l,x2:zp,y2:l,className:"recharts-legend-icon"});if(r.type==="line")return Ot.createElement("path",{strokeWidth:4,fill:"none",stroke:v,d:"M0,".concat(l,"h").concat(n,`
            A`).concat(c,",").concat(c,",0,1,1,").concat(2*n,",").concat(l,`
            H`).concat(zp,"M").concat(2*n,",").concat(l,`
            A`).concat(c,",").concat(c,",0,1,1,").concat(n,",").concat(l),className:"recharts-legend-icon"});if(r.type==="rect")return Ot.createElement("path",{stroke:"none",fill:v,d:"M0,".concat(zp/8,"h").concat(zp,"v").concat(zp*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(Ot.isValidElement(r.legendIcon)){var R=tge({},r);return delete R.legendIcon,Ot.cloneElement(r.legendIcon,R)}return Ot.createElement(RP,{fill:v,cx:l,cy:l,size:zp,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,l=i.payload,c=i.iconSize,n=i.layout,v=i.formatter,R=i.inactiveColor,x={x:0,y:0,width:zp,height:zp},N={display:n==="horizontal"?"inline-block":"block",marginRight:10},L={display:"inline-block",verticalAlign:"middle",marginRight:4};return l.map(function(F,j){var $=F.formatter||v,H=gi(QR(QR({"recharts-legend-item":!0},"legend-item-".concat(j),!0),"inactive",F.inactive));if(F.type==="none")return null;var W=Zn(F.value)?null:F.value;qp(!Zn(F.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var ee=F.inactive?R:F.color;return Ot.createElement("li",xM({className:H,style:N,key:"legend-item-".concat(j)},Qy(r.props,F,j)),Ot.createElement(_M,{width:c,height:c,viewBox:x,style:L},r.renderIcon(F)),Ot.createElement("span",{className:"recharts-legend-item-text",style:{color:ee}},$?$(W,F,j):W))})}},{key:"render",value:function(){var r=this.props,i=r.payload,l=r.layout,c=r.align;if(!i||!i.length)return null;var n={padding:0,margin:0,textAlign:l==="horizontal"?c:"left"};return Ot.createElement("ul",{className:"recharts-default-legend",style:n},this.renderItems())}}])}(ie.PureComponent);QR(KL,"displayName","Legend");QR(KL,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var aV,O8;function cge(){if(O8)return aV;O8=1;var t=mP();function e(){this.__data__=new t,this.size=0}return aV=e,aV}var rV,V8;function dge(){if(V8)return rV;V8=1;function t(e){var a=this.__data__,r=a.delete(e);return this.size=a.size,r}return rV=t,rV}var nV,z8;function hge(){if(z8)return nV;z8=1;function t(e){return this.__data__.get(e)}return nV=t,nV}var iV,D8;function fge(){if(D8)return iV;D8=1;function t(e){return this.__data__.has(e)}return iV=t,iV}var sV,M8;function pge(){if(M8)return sV;M8=1;var t=mP(),e=kL(),a=UL(),r=200;function i(l,c){var n=this.__data__;if(n instanceof t){var v=n.__data__;if(!e||v.length<r-1)return v.push([l,c]),this.size=++n.size,this;n=this.__data__=new a(v)}return n.set(l,c),this.size=n.size,this}return sV=i,sV}var oV,I8;function $X(){if(I8)return oV;I8=1;var t=mP(),e=cge(),a=dge(),r=hge(),i=fge(),l=pge();function c(n){var v=this.__data__=new t(n);this.size=v.size}return c.prototype.clear=e,c.prototype.delete=a,c.prototype.get=r,c.prototype.has=i,c.prototype.set=l,oV=c,oV}var lV,L8;function mge(){if(L8)return lV;L8=1;var t="__lodash_hash_undefined__";function e(a){return this.__data__.set(a,t),this}return lV=e,lV}var uV,F8;function gge(){if(F8)return uV;F8=1;function t(e){return this.__data__.has(e)}return uV=t,uV}var cV,k8;function KX(){if(k8)return cV;k8=1;var t=UL(),e=mge(),a=gge();function r(i){var l=-1,c=i==null?0:i.length;for(this.__data__=new t;++l<c;)this.add(i[l])}return r.prototype.add=r.prototype.push=e,r.prototype.has=a,cV=r,cV}var dV,U8;function WX(){if(U8)return dV;U8=1;function t(e,a){for(var r=-1,i=e==null?0:e.length;++r<i;)if(a(e[r],r,e))return!0;return!1}return dV=t,dV}var hV,B8;function YX(){if(B8)return hV;B8=1;function t(e,a){return e.has(a)}return hV=t,hV}var fV,j8;function XX(){if(j8)return fV;j8=1;var t=KX(),e=WX(),a=YX(),r=1,i=2;function l(c,n,v,R,x,N){var L=v&r,F=c.length,j=n.length;if(F!=j&&!(L&&j>F))return!1;var $=N.get(c),H=N.get(n);if($&&H)return $==n&&H==c;var W=-1,ee=!0,se=v&i?new t:void 0;for(N.set(c,n),N.set(n,c);++W<F;){var fe=c[W],le=n[W];if(R)var me=L?R(le,fe,W,n,c,N):R(fe,le,W,c,n,N);if(me!==void 0){if(me)continue;ee=!1;break}if(se){if(!e(n,function(ge,Re){if(!a(se,Re)&&(fe===ge||x(fe,ge,v,R,N)))return se.push(Re)})){ee=!1;break}}else if(!(fe===le||x(fe,le,v,R,N))){ee=!1;break}}return N.delete(c),N.delete(n),ee}return fV=l,fV}var pV,G8;function yge(){if(G8)return pV;G8=1;var t=Ym(),e=t.Uint8Array;return pV=e,pV}var mV,Z8;function Age(){if(Z8)return mV;Z8=1;function t(e){var a=-1,r=Array(e.size);return e.forEach(function(i,l){r[++a]=[l,i]}),r}return mV=t,mV}var gV,q8;function WL(){if(q8)return gV;q8=1;function t(e){var a=-1,r=Array(e.size);return e.forEach(function(i){r[++a]=i}),r}return gV=t,gV}var yV,H8;function vge(){if(H8)return yV;H8=1;var t=dC(),e=yge(),a=FL(),r=XX(),i=Age(),l=WL(),c=1,n=2,v="[object Boolean]",R="[object Date]",x="[object Error]",N="[object Map]",L="[object Number]",F="[object RegExp]",j="[object Set]",$="[object String]",H="[object Symbol]",W="[object ArrayBuffer]",ee="[object DataView]",se=t?t.prototype:void 0,fe=se?se.valueOf:void 0;function le(me,ge,Re,we,Ve,oe,_e){switch(Re){case ee:if(me.byteLength!=ge.byteLength||me.byteOffset!=ge.byteOffset)return!1;me=me.buffer,ge=ge.buffer;case W:return!(me.byteLength!=ge.byteLength||!oe(new e(me),new e(ge)));case v:case R:case L:return a(+me,+ge);case x:return me.name==ge.name&&me.message==ge.message;case F:case $:return me==ge+"";case N:var Fe=i;case j:var Ee=we&c;if(Fe||(Fe=l),me.size!=ge.size&&!Ee)return!1;var ze=_e.get(me);if(ze)return ze==ge;we|=n,_e.set(me,ge);var Se=r(Fe(me),Fe(ge),we,Ve,oe,_e);return _e.delete(me),Se;case H:if(fe)return fe.call(me)==fe.call(ge)}return!1}return yV=le,yV}var AV,$8;function JX(){if($8)return AV;$8=1;function t(e,a){for(var r=-1,i=a.length,l=e.length;++r<i;)e[l+r]=a[r];return e}return AV=t,AV}var vV,K8;function _ge(){if(K8)return vV;K8=1;var t=JX(),e=kh();function a(r,i,l){var c=i(r);return e(r)?c:t(c,l(r))}return vV=a,vV}var _V,W8;function wge(){if(W8)return _V;W8=1;function t(e,a){for(var r=-1,i=e==null?0:e.length,l=0,c=[];++r<i;){var n=e[r];a(n,r,e)&&(c[l++]=n)}return c}return _V=t,_V}var wV,Y8;function Rge(){if(Y8)return wV;Y8=1;function t(){return[]}return wV=t,wV}var RV,X8;function Tge(){if(X8)return RV;X8=1;var t=wge(),e=Rge(),a=Object.prototype,r=a.propertyIsEnumerable,i=Object.getOwnPropertySymbols,l=i?function(c){return c==null?[]:(c=Object(c),t(i(c),function(n){return r.call(c,n)}))}:e;return RV=l,RV}var TV,J8;function Cge(){if(J8)return TV;J8=1;function t(e,a){for(var r=-1,i=Array(e);++r<e;)i[r]=a(r);return i}return TV=t,TV}var CV,Q8;function Sge(){if(Q8)return CV;Q8=1;var t=Bg(),e=jg(),a="[object Arguments]";function r(i){return e(i)&&t(i)==a}return CV=r,CV}var SV,ej;function YL(){if(ej)return SV;ej=1;var t=Sge(),e=jg(),a=Object.prototype,r=a.hasOwnProperty,i=a.propertyIsEnumerable,l=t(function(){return arguments}())?t:function(c){return e(c)&&r.call(c,"callee")&&!i.call(c,"callee")};return SV=l,SV}var hR={exports:{}},bV,tj;function bge(){if(tj)return bV;tj=1;function t(){return!1}return bV=t,bV}hR.exports;var aj;function QX(){return aj||(aj=1,function(t,e){var a=Ym(),r=bge(),i=e&&!e.nodeType&&e,l=i&&!0&&t&&!t.nodeType&&t,c=l&&l.exports===i,n=c?a.Buffer:void 0,v=n?n.isBuffer:void 0,R=v||r;t.exports=R}(hR,hR.exports)),hR.exports}var xV,rj;function XL(){if(rj)return xV;rj=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function a(r,i){var l=typeof r;return i=i??t,!!i&&(l=="number"||l!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return xV=a,xV}var PV,nj;function JL(){if(nj)return PV;nj=1;var t=9007199254740991;function e(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=t}return PV=e,PV}var EV,ij;function xge(){if(ij)return EV;ij=1;var t=Bg(),e=JL(),a=jg(),r="[object Arguments]",i="[object Array]",l="[object Boolean]",c="[object Date]",n="[object Error]",v="[object Function]",R="[object Map]",x="[object Number]",N="[object Object]",L="[object RegExp]",F="[object Set]",j="[object String]",$="[object WeakMap]",H="[object ArrayBuffer]",W="[object DataView]",ee="[object Float32Array]",se="[object Float64Array]",fe="[object Int8Array]",le="[object Int16Array]",me="[object Int32Array]",ge="[object Uint8Array]",Re="[object Uint8ClampedArray]",we="[object Uint16Array]",Ve="[object Uint32Array]",oe={};oe[ee]=oe[se]=oe[fe]=oe[le]=oe[me]=oe[ge]=oe[Re]=oe[we]=oe[Ve]=!0,oe[r]=oe[i]=oe[H]=oe[l]=oe[W]=oe[c]=oe[n]=oe[v]=oe[R]=oe[x]=oe[N]=oe[L]=oe[F]=oe[j]=oe[$]=!1;function _e(Fe){return a(Fe)&&e(Fe.length)&&!!oe[t(Fe)]}return EV=_e,EV}var NV,sj;function eJ(){if(sj)return NV;sj=1;function t(e){return function(a){return e(a)}}return NV=t,NV}var fR={exports:{}};fR.exports;var oj;function Pge(){return oj||(oj=1,function(t,e){var a=vX(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,l=i&&i.exports===r,c=l&&a.process,n=function(){try{var v=i&&i.require&&i.require("util").types;return v||c&&c.binding&&c.binding("util")}catch{}}();t.exports=n}(fR,fR.exports)),fR.exports}var OV,lj;function tJ(){if(lj)return OV;lj=1;var t=xge(),e=eJ(),a=Pge(),r=a&&a.isTypedArray,i=r?e(r):t;return OV=i,OV}var VV,uj;function Ege(){if(uj)return VV;uj=1;var t=Cge(),e=YL(),a=kh(),r=QX(),i=XL(),l=tJ(),c=Object.prototype,n=c.hasOwnProperty;function v(R,x){var N=a(R),L=!N&&e(R),F=!N&&!L&&r(R),j=!N&&!L&&!F&&l(R),$=N||L||F||j,H=$?t(R.length,String):[],W=H.length;for(var ee in R)(x||n.call(R,ee))&&!($&&(ee=="length"||F&&(ee=="offset"||ee=="parent")||j&&(ee=="buffer"||ee=="byteLength"||ee=="byteOffset")||i(ee,W)))&&H.push(ee);return H}return VV=v,VV}var zV,cj;function Nge(){if(cj)return zV;cj=1;var t=Object.prototype;function e(a){var r=a&&a.constructor,i=typeof r=="function"&&r.prototype||t;return a===i}return zV=e,zV}var DV,dj;function aJ(){if(dj)return DV;dj=1;function t(e,a){return function(r){return e(a(r))}}return DV=t,DV}var MV,hj;function Oge(){if(hj)return MV;hj=1;var t=aJ(),e=t(Object.keys,Object);return MV=e,MV}var IV,fj;function Vge(){if(fj)return IV;fj=1;var t=Nge(),e=Oge(),a=Object.prototype,r=a.hasOwnProperty;function i(l){if(!t(l))return e(l);var c=[];for(var n in Object(l))r.call(l,n)&&n!="constructor"&&c.push(n);return c}return IV=i,IV}var LV,pj;function fC(){if(pj)return LV;pj=1;var t=LL(),e=JL();function a(r){return r!=null&&e(r.length)&&!t(r)}return LV=a,LV}var FV,mj;function TP(){if(mj)return FV;mj=1;var t=Ege(),e=Vge(),a=fC();function r(i){return a(i)?t(i):e(i)}return FV=r,FV}var kV,gj;function zge(){if(gj)return kV;gj=1;var t=_ge(),e=Tge(),a=TP();function r(i){return t(i,a,e)}return kV=r,kV}var UV,yj;function Dge(){if(yj)return UV;yj=1;var t=zge(),e=1,a=Object.prototype,r=a.hasOwnProperty;function i(l,c,n,v,R,x){var N=n&e,L=t(l),F=L.length,j=t(c),$=j.length;if(F!=$&&!N)return!1;for(var H=F;H--;){var W=L[H];if(!(N?W in c:r.call(c,W)))return!1}var ee=x.get(l),se=x.get(c);if(ee&&se)return ee==c&&se==l;var fe=!0;x.set(l,c),x.set(c,l);for(var le=N;++H<F;){W=L[H];var me=l[W],ge=c[W];if(v)var Re=N?v(ge,me,W,c,l,x):v(me,ge,W,l,c,x);if(!(Re===void 0?me===ge||R(me,ge,n,v,x):Re)){fe=!1;break}le||(le=W=="constructor")}if(fe&&!le){var we=l.constructor,Ve=c.constructor;we!=Ve&&"constructor"in l&&"constructor"in c&&!(typeof we=="function"&&we instanceof we&&typeof Ve=="function"&&Ve instanceof Ve)&&(fe=!1)}return x.delete(l),x.delete(c),fe}return UV=i,UV}var BV,Aj;function Mge(){if(Aj)return BV;Aj=1;var t=Hv(),e=Ym(),a=t(e,"DataView");return BV=a,BV}var jV,vj;function Ige(){if(vj)return jV;vj=1;var t=Hv(),e=Ym(),a=t(e,"Promise");return jV=a,jV}var GV,_j;function rJ(){if(_j)return GV;_j=1;var t=Hv(),e=Ym(),a=t(e,"Set");return GV=a,GV}var ZV,wj;function Lge(){if(wj)return ZV;wj=1;var t=Hv(),e=Ym(),a=t(e,"WeakMap");return ZV=a,ZV}var qV,Rj;function Fge(){if(Rj)return qV;Rj=1;var t=Mge(),e=kL(),a=Ige(),r=rJ(),i=Lge(),l=Bg(),c=_X(),n="[object Map]",v="[object Object]",R="[object Promise]",x="[object Set]",N="[object WeakMap]",L="[object DataView]",F=c(t),j=c(e),$=c(a),H=c(r),W=c(i),ee=l;return(t&&ee(new t(new ArrayBuffer(1)))!=L||e&&ee(new e)!=n||a&&ee(a.resolve())!=R||r&&ee(new r)!=x||i&&ee(new i)!=N)&&(ee=function(se){var fe=l(se),le=fe==v?se.constructor:void 0,me=le?c(le):"";if(me)switch(me){case F:return L;case j:return n;case $:return R;case H:return x;case W:return N}return fe}),qV=ee,qV}var HV,Tj;function kge(){if(Tj)return HV;Tj=1;var t=$X(),e=XX(),a=vge(),r=Dge(),i=Fge(),l=kh(),c=QX(),n=tJ(),v=1,R="[object Arguments]",x="[object Array]",N="[object Object]",L=Object.prototype,F=L.hasOwnProperty;function j($,H,W,ee,se,fe){var le=l($),me=l(H),ge=le?x:i($),Re=me?x:i(H);ge=ge==R?N:ge,Re=Re==R?N:Re;var we=ge==N,Ve=Re==N,oe=ge==Re;if(oe&&c($)){if(!c(H))return!1;le=!0,we=!1}if(oe&&!we)return fe||(fe=new t),le||n($)?e($,H,W,ee,se,fe):a($,H,ge,W,ee,se,fe);if(!(W&v)){var _e=we&&F.call($,"__wrapped__"),Fe=Ve&&F.call(H,"__wrapped__");if(_e||Fe){var Ee=_e?$.value():$,ze=Fe?H.value():H;return fe||(fe=new t),se(Ee,ze,W,ee,fe)}}return oe?(fe||(fe=new t),r($,H,W,ee,se,fe)):!1}return HV=j,HV}var $V,Cj;function QL(){if(Cj)return $V;Cj=1;var t=kge(),e=jg();function a(r,i,l,c,n){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:t(r,i,l,c,a,n)}return $V=a,$V}var KV,Sj;function Uge(){if(Sj)return KV;Sj=1;var t=$X(),e=QL(),a=1,r=2;function i(l,c,n,v){var R=n.length,x=R,N=!v;if(l==null)return!x;for(l=Object(l);R--;){var L=n[R];if(N&&L[2]?L[1]!==l[L[0]]:!(L[0]in l))return!1}for(;++R<x;){L=n[R];var F=L[0],j=l[F],$=L[1];if(N&&L[2]){if(j===void 0&&!(F in l))return!1}else{var H=new t;if(v)var W=v(j,$,F,l,c,H);if(!(W===void 0?e($,j,a|r,v,H):W))return!1}}return!0}return KV=i,KV}var WV,bj;function nJ(){if(bj)return WV;bj=1;var t=uA();function e(a){return a===a&&!t(a)}return WV=e,WV}var YV,xj;function Bge(){if(xj)return YV;xj=1;var t=nJ(),e=TP();function a(r){for(var i=e(r),l=i.length;l--;){var c=i[l],n=r[c];i[l]=[c,n,t(n)]}return i}return YV=a,YV}var XV,Pj;function iJ(){if(Pj)return XV;Pj=1;function t(e,a){return function(r){return r==null?!1:r[e]===a&&(a!==void 0||e in Object(r))}}return XV=t,XV}var JV,Ej;function jge(){if(Ej)return JV;Ej=1;var t=Uge(),e=Bge(),a=iJ();function r(i){var l=e(i);return l.length==1&&l[0][2]?a(l[0][0],l[0][1]):function(c){return c===i||t(c,i,l)}}return JV=r,JV}var QV,Nj;function Gge(){if(Nj)return QV;Nj=1;function t(e,a){return e!=null&&a in Object(e)}return QV=t,QV}var ez,Oj;function Zge(){if(Oj)return ez;Oj=1;var t=TX(),e=YL(),a=kh(),r=XL(),i=JL(),l=yP();function c(n,v,R){v=t(v,n);for(var x=-1,N=v.length,L=!1;++x<N;){var F=l(v[x]);if(!(L=n!=null&&R(n,F)))break;n=n[F]}return L||++x!=N?L:(N=n==null?0:n.length,!!N&&i(N)&&r(F,N)&&(a(n)||e(n)))}return ez=c,ez}var tz,Vj;function qge(){if(Vj)return tz;Vj=1;var t=Gge(),e=Zge();function a(r,i){return r!=null&&e(r,i,t)}return tz=a,tz}var az,zj;function Hge(){if(zj)return az;zj=1;var t=QL(),e=CX(),a=qge(),r=IL(),i=nJ(),l=iJ(),c=yP(),n=1,v=2;function R(x,N){return r(x)&&i(N)?l(c(x),N):function(L){var F=e(L,x);return F===void 0&&F===N?a(L,x):t(N,F,n|v)}}return az=R,az}var rz,Dj;function _1(){if(Dj)return rz;Dj=1;function t(e){return e}return rz=t,rz}var nz,Mj;function $ge(){if(Mj)return nz;Mj=1;function t(e){return function(a){return a==null?void 0:a[e]}}return nz=t,nz}var iz,Ij;function Kge(){if(Ij)return iz;Ij=1;var t=jL();function e(a){return function(r){return t(r,a)}}return iz=e,iz}var sz,Lj;function Wge(){if(Lj)return sz;Lj=1;var t=$ge(),e=Kge(),a=IL(),r=yP();function i(l){return a(l)?t(r(l)):e(l)}return sz=i,sz}var oz,Fj;function Xm(){if(Fj)return oz;Fj=1;var t=jge(),e=Hge(),a=_1(),r=kh(),i=Wge();function l(c){return typeof c=="function"?c:c==null?a:typeof c=="object"?r(c)?e(c[0],c[1]):t(c):i(c)}return oz=l,oz}var lz,kj;function sJ(){if(kj)return lz;kj=1;function t(e,a,r,i){for(var l=e.length,c=r+(i?1:-1);i?c--:++c<l;)if(a(e[c],c,e))return c;return-1}return lz=t,lz}var uz,Uj;function Yge(){if(Uj)return uz;Uj=1;function t(e){return e!==e}return uz=t,uz}var cz,Bj;function Xge(){if(Bj)return cz;Bj=1;function t(e,a,r){for(var i=r-1,l=e.length;++i<l;)if(e[i]===a)return i;return-1}return cz=t,cz}var dz,jj;function Jge(){if(jj)return dz;jj=1;var t=sJ(),e=Yge(),a=Xge();function r(i,l,c){return l===l?a(i,l,c):t(i,e,c)}return dz=r,dz}var hz,Gj;function Qge(){if(Gj)return hz;Gj=1;var t=Jge();function e(a,r){var i=a==null?0:a.length;return!!i&&t(a,r,0)>-1}return hz=e,hz}var fz,Zj;function eye(){if(Zj)return fz;Zj=1;function t(e,a,r){for(var i=-1,l=e==null?0:e.length;++i<l;)if(r(a,e[i]))return!0;return!1}return fz=t,fz}var pz,qj;function tye(){if(qj)return pz;qj=1;function t(){}return pz=t,pz}var mz,Hj;function aye(){if(Hj)return mz;Hj=1;var t=rJ(),e=tye(),a=WL(),r=1/0,i=t&&1/a(new t([,-0]))[1]==r?function(l){return new t(l)}:e;return mz=i,mz}var gz,$j;function rye(){if($j)return gz;$j=1;var t=KX(),e=Qge(),a=eye(),r=YX(),i=aye(),l=WL(),c=200;function n(v,R,x){var N=-1,L=e,F=v.length,j=!0,$=[],H=$;if(x)j=!1,L=a;else if(F>=c){var W=R?null:i(v);if(W)return l(W);j=!1,L=r,H=new t}else H=R?[]:$;e:for(;++N<F;){var ee=v[N],se=R?R(ee):ee;if(ee=x||ee!==0?ee:0,j&&se===se){for(var fe=H.length;fe--;)if(H[fe]===se)continue e;R&&H.push(se),$.push(ee)}else L(H,se,x)||(H!==$&&H.push(se),$.push(ee))}return $}return gz=n,gz}var yz,Kj;function nye(){if(Kj)return yz;Kj=1;var t=Xm(),e=rye();function a(r,i){return r&&r.length?e(r,t(i,2)):[]}return yz=a,yz}var iye=nye();const Wj=ss(iye);function oJ(t,e,a){return e===!0?Wj(t,a):Zn(e)?Wj(t,e):t}function O_(t){"@babel/helpers - typeof";return O_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O_(t)}var sye=["ref"];function Yj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function yg(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Yj(Object(a),!0).forEach(function(r){CP(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Yj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function oye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xj(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,uJ(r.key),r)}}function lye(t,e,a){return e&&Xj(t.prototype,e),a&&Xj(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function uye(t,e,a){return e=_x(e),cye(t,lJ()?Reflect.construct(e,a||[],_x(t).constructor):e.apply(t,a))}function cye(t,e){if(e&&(O_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dye(t)}function dye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lJ=function(){return!!t})()}function _x(t){return _x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},_x(t)}function hye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&EM(t,e)}function EM(t,e){return EM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},EM(t,e)}function CP(t,e,a){return e=uJ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function uJ(t){var e=fye(t,"string");return O_(e)=="symbol"?e:e+""}function fye(t,e){if(O_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(O_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function pye(t,e){if(t==null)return{};var a=mye(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function mye(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function gye(t){return t.value}function yye(t,e){if(Ot.isValidElement(t))return Ot.cloneElement(t,e);if(typeof t=="function")return Ot.createElement(t,e);e.ref;var a=pye(e,sye);return Ot.createElement(KL,a)}var Jj=1,hf=function(t){function e(){var a;oye(this,e);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return a=uye(this,e,[].concat(i)),CP(a,"lastBoundingBox",{width:-1,height:-1}),a}return hye(e,t),lye(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>Jj||Math.abs(i.height-this.lastBoundingBox.height)>Jj)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?yg({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,l=i.layout,c=i.align,n=i.verticalAlign,v=i.margin,R=i.chartWidth,x=i.chartHeight,N,L;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(c==="center"&&l==="vertical"){var F=this.getBBoxSnapshot();N={left:((R||0)-F.width)/2}}else N=c==="right"?{right:v&&v.right||0}:{left:v&&v.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(n==="middle"){var j=this.getBBoxSnapshot();L={top:((x||0)-j.height)/2}}else L=n==="bottom"?{bottom:v&&v.bottom||0}:{top:v&&v.top||0};return yg(yg({},N),L)}},{key:"render",value:function(){var r=this,i=this.props,l=i.content,c=i.width,n=i.height,v=i.wrapperStyle,R=i.payloadUniqBy,x=i.payload,N=yg(yg({position:"absolute",width:c||"auto",height:n||"auto"},this.getDefaultPosition(v)),v);return Ot.createElement("div",{className:"recharts-legend-wrapper",style:N,ref:function(F){r.wrapperNode=F}},yye(l,yg(yg({},this.props),{},{payload:oJ(x,R,gye)})))}}],[{key:"getWithHeight",value:function(r,i){var l=yg(yg({},this.defaultProps),r.props),c=l.layout;return c==="vertical"&&_r(r.props.height)?{height:r.props.height}:c==="horizontal"?{width:r.props.width||i}:null}}])}(ie.PureComponent);CP(hf,"displayName","Legend");CP(hf,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Az,Qj;function Aye(){if(Qj)return Az;Qj=1;var t=dC(),e=YL(),a=kh(),r=t?t.isConcatSpreadable:void 0;function i(l){return a(l)||e(l)||!!(r&&l&&l[r])}return Az=i,Az}var vz,eG;function cJ(){if(eG)return vz;eG=1;var t=JX(),e=Aye();function a(r,i,l,c,n){var v=-1,R=r.length;for(l||(l=e),n||(n=[]);++v<R;){var x=r[v];i>0&&l(x)?i>1?a(x,i-1,l,c,n):t(n,x):c||(n[n.length]=x)}return n}return vz=a,vz}var _z,tG;function vye(){if(tG)return _z;tG=1;function t(e){return function(a,r,i){for(var l=-1,c=Object(a),n=i(a),v=n.length;v--;){var R=n[e?v:++l];if(r(c[R],R,c)===!1)break}return a}}return _z=t,_z}var wz,aG;function _ye(){if(aG)return wz;aG=1;var t=vye(),e=t();return wz=e,wz}var Rz,rG;function dJ(){if(rG)return Rz;rG=1;var t=_ye(),e=TP();function a(r,i){return r&&t(r,i,e)}return Rz=a,Rz}var Tz,nG;function wye(){if(nG)return Tz;nG=1;var t=fC();function e(a,r){return function(i,l){if(i==null)return i;if(!t(i))return a(i,l);for(var c=i.length,n=r?c:-1,v=Object(i);(r?n--:++n<c)&&l(v[n],n,v)!==!1;);return i}}return Tz=e,Tz}var Cz,iG;function e4(){if(iG)return Cz;iG=1;var t=dJ(),e=wye(),a=e(t);return Cz=a,Cz}var Sz,sG;function hJ(){if(sG)return Sz;sG=1;var t=e4(),e=fC();function a(r,i){var l=-1,c=e(r)?Array(r.length):[];return t(r,function(n,v,R){c[++l]=i(n,v,R)}),c}return Sz=a,Sz}var bz,oG;function Rye(){if(oG)return bz;oG=1;function t(e,a){var r=e.length;for(e.sort(a);r--;)e[r]=e[r].value;return e}return bz=t,bz}var xz,lG;function Tye(){if(lG)return xz;lG=1;var t=y1();function e(a,r){if(a!==r){var i=a!==void 0,l=a===null,c=a===a,n=t(a),v=r!==void 0,R=r===null,x=r===r,N=t(r);if(!R&&!N&&!n&&a>r||n&&v&&x&&!R&&!N||l&&v&&x||!i&&x||!c)return 1;if(!l&&!n&&!N&&a<r||N&&i&&c&&!l&&!n||R&&i&&c||!v&&c||!x)return-1}return 0}return xz=e,xz}var Pz,uG;function Cye(){if(uG)return Pz;uG=1;var t=Tye();function e(a,r,i){for(var l=-1,c=a.criteria,n=r.criteria,v=c.length,R=i.length;++l<v;){var x=t(c[l],n[l]);if(x){if(l>=R)return x;var N=i[l];return x*(N=="desc"?-1:1)}}return a.index-r.index}return Pz=e,Pz}var Ez,cG;function Sye(){if(cG)return Ez;cG=1;var t=BL(),e=jL(),a=Xm(),r=hJ(),i=Rye(),l=eJ(),c=Cye(),n=_1(),v=kh();function R(x,N,L){N.length?N=t(N,function($){return v($)?function(H){return e(H,$.length===1?$[0]:$)}:$}):N=[n];var F=-1;N=t(N,l(a));var j=r(x,function($,H,W){var ee=t(N,function(se){return se($)});return{criteria:ee,index:++F,value:$}});return i(j,function($,H){return c($,H,L)})}return Ez=R,Ez}var Nz,dG;function bye(){if(dG)return Nz;dG=1;function t(e,a,r){switch(r.length){case 0:return e.call(a);case 1:return e.call(a,r[0]);case 2:return e.call(a,r[0],r[1]);case 3:return e.call(a,r[0],r[1],r[2])}return e.apply(a,r)}return Nz=t,Nz}var Oz,hG;function xye(){if(hG)return Oz;hG=1;var t=bye(),e=Math.max;function a(r,i,l){return i=e(i===void 0?r.length-1:i,0),function(){for(var c=arguments,n=-1,v=e(c.length-i,0),R=Array(v);++n<v;)R[n]=c[i+n];n=-1;for(var x=Array(i+1);++n<i;)x[n]=c[n];return x[i]=l(R),t(r,this,x)}}return Oz=a,Oz}var Vz,fG;function Pye(){if(fG)return Vz;fG=1;function t(e){return function(){return e}}return Vz=t,Vz}var zz,pG;function fJ(){if(pG)return zz;pG=1;var t=Hv(),e=function(){try{var a=t(Object,"defineProperty");return a({},"",{}),a}catch{}}();return zz=e,zz}var Dz,mG;function Eye(){if(mG)return Dz;mG=1;var t=Pye(),e=fJ(),a=_1(),r=e?function(i,l){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(l),writable:!0})}:a;return Dz=r,Dz}var Mz,gG;function Nye(){if(gG)return Mz;gG=1;var t=800,e=16,a=Date.now;function r(i){var l=0,c=0;return function(){var n=a(),v=e-(n-c);if(c=n,v>0){if(++l>=t)return arguments[0]}else l=0;return i.apply(void 0,arguments)}}return Mz=r,Mz}var Iz,yG;function Oye(){if(yG)return Iz;yG=1;var t=Eye(),e=Nye(),a=e(t);return Iz=a,Iz}var Lz,AG;function Vye(){if(AG)return Lz;AG=1;var t=_1(),e=xye(),a=Oye();function r(i,l){return a(e(i,l,t),i+"")}return Lz=r,Lz}var Fz,vG;function SP(){if(vG)return Fz;vG=1;var t=FL(),e=fC(),a=XL(),r=uA();function i(l,c,n){if(!r(n))return!1;var v=typeof c;return(v=="number"?e(n)&&a(c,n.length):v=="string"&&c in n)?t(n[c],l):!1}return Fz=i,Fz}var kz,_G;function zye(){if(_G)return kz;_G=1;var t=cJ(),e=Sye(),a=Vye(),r=SP(),i=a(function(l,c){if(l==null)return[];var n=c.length;return n>1&&r(l,c[0],c[1])?c=[]:n>2&&r(c[0],c[1],c[2])&&(c=[c[0]]),e(l,t(c,1),[])});return kz=i,kz}var Dye=zye();const t4=ss(Dye);function eT(t){"@babel/helpers - typeof";return eT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eT(t)}function NM(){return NM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},NM.apply(this,arguments)}function Mye(t,e){return kye(t)||Fye(t,e)||Lye(t,e)||Iye()}function Iye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lye(t,e){if(t){if(typeof t=="string")return wG(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return wG(t,e)}}function wG(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function Fye(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function kye(t){if(Array.isArray(t))return t}function RG(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Uz(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?RG(Object(a),!0).forEach(function(r){Uye(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):RG(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Uye(t,e,a){return e=Bye(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Bye(t){var e=jye(t,"string");return eT(e)=="symbol"?e:e+""}function jye(t,e){if(eT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(eT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gye(t){return Array.isArray(t)&&qu(t[0])&&qu(t[1])?t.join(" ~ "):t}var Zye=function(e){var a=e.separator,r=a===void 0?" : ":a,i=e.contentStyle,l=i===void 0?{}:i,c=e.itemStyle,n=c===void 0?{}:c,v=e.labelStyle,R=v===void 0?{}:v,x=e.payload,N=e.formatter,L=e.itemSorter,F=e.wrapperClassName,j=e.labelClassName,$=e.label,H=e.labelFormatter,W=e.accessibilityLayer,ee=W===void 0?!1:W,se=function(){if(x&&x.length){var _e={padding:0,margin:0},Fe=(L?t4(x,L):x).map(function(Ee,ze){if(Ee.type==="none")return null;var Se=Uz({display:"block",paddingTop:4,paddingBottom:4,color:Ee.color||"#000"},n),je=Ee.formatter||N||Gye,Ue=Ee.value,$e=Ee.name,Be=Ue,qe=$e;if(je&&Be!=null&&qe!=null){var be=je(Ue,$e,Ee,ze,x);if(Array.isArray(be)){var Te=Mye(be,2);Be=Te[0],qe=Te[1]}else Be=be}return Ot.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(ze),style:Se},qu(qe)?Ot.createElement("span",{className:"recharts-tooltip-item-name"},qe):null,qu(qe)?Ot.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,Ot.createElement("span",{className:"recharts-tooltip-item-value"},Be),Ot.createElement("span",{className:"recharts-tooltip-item-unit"},Ee.unit||""))});return Ot.createElement("ul",{className:"recharts-tooltip-item-list",style:_e},Fe)}return null},fe=Uz({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},l),le=Uz({margin:0},R),me=!qn($),ge=me?$:"",Re=gi("recharts-default-tooltip",F),we=gi("recharts-tooltip-label",j);me&&H&&x!==void 0&&x!==null&&(ge=H($,x));var Ve=ee?{role:"status","aria-live":"assertive"}:{};return Ot.createElement("div",NM({className:Re,style:fe},Ve),Ot.createElement("p",{className:we,style:le},Ot.isValidElement(ge)?ge:"".concat(ge)),se())};function tT(t){"@babel/helpers - typeof";return tT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tT(t)}function ZS(t,e,a){return e=qye(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function qye(t){var e=Hye(t,"string");return tT(e)=="symbol"?e:e+""}function Hye(t,e){if(tT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(tT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kw="recharts-tooltip-wrapper",$ye={visibility:"hidden"};function Kye(t){var e=t.coordinate,a=t.translateX,r=t.translateY;return gi(kw,ZS(ZS(ZS(ZS({},"".concat(kw,"-right"),_r(a)&&e&&_r(e.x)&&a>=e.x),"".concat(kw,"-left"),_r(a)&&e&&_r(e.x)&&a<e.x),"".concat(kw,"-bottom"),_r(r)&&e&&_r(e.y)&&r>=e.y),"".concat(kw,"-top"),_r(r)&&e&&_r(e.y)&&r<e.y))}function TG(t){var e=t.allowEscapeViewBox,a=t.coordinate,r=t.key,i=t.offsetTopLeft,l=t.position,c=t.reverseDirection,n=t.tooltipDimension,v=t.viewBox,R=t.viewBoxDimension;if(l&&_r(l[r]))return l[r];var x=a[r]-n-i,N=a[r]+i;if(e[r])return c[r]?x:N;if(c[r]){var L=x,F=v[r];return L<F?Math.max(N,v[r]):Math.max(x,v[r])}var j=N+n,$=v[r]+R;return j>$?Math.max(x,v[r]):Math.max(N,v[r])}function Wye(t){var e=t.translateX,a=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(a,"px, 0)"):"translate(".concat(e,"px, ").concat(a,"px)")}}function Yye(t){var e=t.allowEscapeViewBox,a=t.coordinate,r=t.offsetTopLeft,i=t.position,l=t.reverseDirection,c=t.tooltipBox,n=t.useTranslate3d,v=t.viewBox,R,x,N;return c.height>0&&c.width>0&&a?(x=TG({allowEscapeViewBox:e,coordinate:a,key:"x",offsetTopLeft:r,position:i,reverseDirection:l,tooltipDimension:c.width,viewBox:v,viewBoxDimension:v.width}),N=TG({allowEscapeViewBox:e,coordinate:a,key:"y",offsetTopLeft:r,position:i,reverseDirection:l,tooltipDimension:c.height,viewBox:v,viewBoxDimension:v.height}),R=Wye({translateX:x,translateY:N,useTranslate3d:n})):R=$ye,{cssProperties:R,cssClasses:Kye({translateX:x,translateY:N,coordinate:a})}}function V_(t){"@babel/helpers - typeof";return V_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V_(t)}function CG(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function SG(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?CG(Object(a),!0).forEach(function(r){VM(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):CG(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Xye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jye(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mJ(r.key),r)}}function Qye(t,e,a){return e&&Jye(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function eAe(t,e,a){return e=wx(e),tAe(t,pJ()?Reflect.construct(e,a||[],wx(t).constructor):e.apply(t,a))}function tAe(t,e){if(e&&(V_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aAe(t)}function aAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pJ=function(){return!!t})()}function wx(t){return wx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},wx(t)}function rAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OM(t,e)}function OM(t,e){return OM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},OM(t,e)}function VM(t,e,a){return e=mJ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function mJ(t){var e=nAe(t,"string");return V_(e)=="symbol"?e:e+""}function nAe(t,e){if(V_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(V_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var bG=1,iAe=function(t){function e(){var a;Xye(this,e);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return a=eAe(this,e,[].concat(i)),VM(a,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),VM(a,"handleKeyDown",function(c){if(c.key==="Escape"){var n,v,R,x;a.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(v=a.props.coordinate)===null||v===void 0?void 0:v.x)!==null&&n!==void 0?n:0,y:(R=(x=a.props.coordinate)===null||x===void 0?void 0:x.y)!==null&&R!==void 0?R:0}})}}),a}return rAe(e,t),Qye(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>bG||Math.abs(r.height-this.state.lastBoundingBox.height)>bG)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,l=i.active,c=i.allowEscapeViewBox,n=i.animationDuration,v=i.animationEasing,R=i.children,x=i.coordinate,N=i.hasPayload,L=i.isAnimationActive,F=i.offset,j=i.position,$=i.reverseDirection,H=i.useTranslate3d,W=i.viewBox,ee=i.wrapperStyle,se=Yye({allowEscapeViewBox:c,coordinate:x,offsetTopLeft:F,position:j,reverseDirection:$,tooltipBox:this.state.lastBoundingBox,useTranslate3d:H,viewBox:W}),fe=se.cssClasses,le=se.cssProperties,me=SG(SG({transition:L&&l?"transform ".concat(n,"ms ").concat(v):void 0},le),{},{pointerEvents:"none",visibility:!this.state.dismissed&&l&&N?"visible":"hidden",position:"absolute",top:0,left:0},ee);return Ot.createElement("div",{tabIndex:-1,className:fe,style:me,ref:function(Re){r.wrapperNode=Re}},R)}}])}(ie.PureComponent),sAe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Gg={isSsr:sAe()};function z_(t){"@babel/helpers - typeof";return z_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z_(t)}function xG(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function PG(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?xG(Object(a),!0).forEach(function(r){a4(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):xG(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function oAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lAe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yJ(r.key),r)}}function uAe(t,e,a){return e&&lAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function cAe(t,e,a){return e=Rx(e),dAe(t,gJ()?Reflect.construct(e,a||[],Rx(t).constructor):e.apply(t,a))}function dAe(t,e){if(e&&(z_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hAe(t)}function hAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gJ=function(){return!!t})()}function Rx(t){return Rx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Rx(t)}function fAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zM(t,e)}function zM(t,e){return zM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},zM(t,e)}function a4(t,e,a){return e=yJ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function yJ(t){var e=pAe(t,"string");return z_(e)=="symbol"?e:e+""}function pAe(t,e){if(z_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(z_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function mAe(t){return t.dataKey}function gAe(t,e){return Ot.isValidElement(t)?Ot.cloneElement(t,e):typeof t=="function"?Ot.createElement(t,e):Ot.createElement(Zye,e)}var gu=function(t){function e(){return oAe(this,e),cAe(this,e,arguments)}return fAe(e,t),uAe(e,[{key:"render",value:function(){var r=this,i=this.props,l=i.active,c=i.allowEscapeViewBox,n=i.animationDuration,v=i.animationEasing,R=i.content,x=i.coordinate,N=i.filterNull,L=i.isAnimationActive,F=i.offset,j=i.payload,$=i.payloadUniqBy,H=i.position,W=i.reverseDirection,ee=i.useTranslate3d,se=i.viewBox,fe=i.wrapperStyle,le=j??[];N&&le.length&&(le=oJ(j.filter(function(ge){return ge.value!=null&&(ge.hide!==!0||r.props.includeHidden)}),$,mAe));var me=le.length>0;return Ot.createElement(iAe,{allowEscapeViewBox:c,animationDuration:n,animationEasing:v,isAnimationActive:L,active:l,coordinate:x,hasPayload:me,offset:F,position:H,reverseDirection:W,useTranslate3d:ee,viewBox:se,wrapperStyle:fe},gAe(R,PG(PG({},this.props),{},{payload:le})))}}])}(ie.PureComponent);a4(gu,"displayName","Tooltip");a4(gu,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Gg.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Bz,EG;function yAe(){if(EG)return Bz;EG=1;var t=Ym(),e=function(){return t.Date.now()};return Bz=e,Bz}var jz,NG;function AAe(){if(NG)return jz;NG=1;var t=/\s/;function e(a){for(var r=a.length;r--&&t.test(a.charAt(r)););return r}return jz=e,jz}var Gz,OG;function vAe(){if(OG)return Gz;OG=1;var t=AAe(),e=/^\s+/;function a(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return Gz=a,Gz}var Zz,VG;function AJ(){if(VG)return Zz;VG=1;var t=vAe(),e=uA(),a=y1(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,n=parseInt;function v(R){if(typeof R=="number")return R;if(a(R))return r;if(e(R)){var x=typeof R.valueOf=="function"?R.valueOf():R;R=e(x)?x+"":x}if(typeof R!="string")return R===0?R:+R;R=t(R);var N=l.test(R);return N||c.test(R)?n(R.slice(2),N?2:8):i.test(R)?r:+R}return Zz=v,Zz}var qz,zG;function _Ae(){if(zG)return qz;zG=1;var t=uA(),e=yAe(),a=AJ(),r="Expected a function",i=Math.max,l=Math.min;function c(n,v,R){var x,N,L,F,j,$,H=0,W=!1,ee=!1,se=!0;if(typeof n!="function")throw new TypeError(r);v=a(v)||0,t(R)&&(W=!!R.leading,ee="maxWait"in R,L=ee?i(a(R.maxWait)||0,v):L,se="trailing"in R?!!R.trailing:se);function fe(Fe){var Ee=x,ze=N;return x=N=void 0,H=Fe,F=n.apply(ze,Ee),F}function le(Fe){return H=Fe,j=setTimeout(Re,v),W?fe(Fe):F}function me(Fe){var Ee=Fe-$,ze=Fe-H,Se=v-Ee;return ee?l(Se,L-ze):Se}function ge(Fe){var Ee=Fe-$,ze=Fe-H;return $===void 0||Ee>=v||Ee<0||ee&&ze>=L}function Re(){var Fe=e();if(ge(Fe))return we(Fe);j=setTimeout(Re,me(Fe))}function we(Fe){return j=void 0,se&&x?fe(Fe):(x=N=void 0,F)}function Ve(){j!==void 0&&clearTimeout(j),H=0,x=$=N=j=void 0}function oe(){return j===void 0?F:we(e())}function _e(){var Fe=e(),Ee=ge(Fe);if(x=arguments,N=this,$=Fe,Ee){if(j===void 0)return le($);if(ee)return clearTimeout(j),j=setTimeout(Re,v),fe($)}return j===void 0&&(j=setTimeout(Re,v)),F}return _e.cancel=Ve,_e.flush=oe,_e}return qz=c,qz}var Hz,DG;function wAe(){if(DG)return Hz;DG=1;var t=_Ae(),e=uA(),a="Expected a function";function r(i,l,c){var n=!0,v=!0;if(typeof i!="function")throw new TypeError(a);return e(c)&&(n="leading"in c?!!c.leading:n,v="trailing"in c?!!c.trailing:v),t(i,l,{leading:n,maxWait:l,trailing:v})}return Hz=r,Hz}var RAe=wAe();const vJ=ss(RAe);function aT(t){"@babel/helpers - typeof";return aT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aT(t)}function MG(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function qS(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?MG(Object(a),!0).forEach(function(r){TAe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):MG(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function TAe(t,e,a){return e=CAe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function CAe(t){var e=SAe(t,"string");return aT(e)=="symbol"?e:e+""}function SAe(t,e){if(aT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(aT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bAe(t,e){return NAe(t)||EAe(t,e)||PAe(t,e)||xAe()}function xAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PAe(t,e){if(t){if(typeof t=="string")return IG(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return IG(t,e)}}function IG(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function EAe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function NAe(t){if(Array.isArray(t))return t}var Fp=ie.forwardRef(function(t,e){var a=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,l=t.width,c=l===void 0?"100%":l,n=t.height,v=n===void 0?"100%":n,R=t.minWidth,x=R===void 0?0:R,N=t.minHeight,L=t.maxHeight,F=t.children,j=t.debounce,$=j===void 0?0:j,H=t.id,W=t.className,ee=t.onResize,se=t.style,fe=se===void 0?{}:se,le=ie.useRef(null),me=ie.useRef();me.current=ee,ie.useImperativeHandle(e,function(){return Object.defineProperty(le.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),le.current},configurable:!0})});var ge=ie.useState({containerWidth:i.width,containerHeight:i.height}),Re=bAe(ge,2),we=Re[0],Ve=Re[1],oe=ie.useCallback(function(Fe,Ee){Ve(function(ze){var Se=Math.round(Fe),je=Math.round(Ee);return ze.containerWidth===Se&&ze.containerHeight===je?ze:{containerWidth:Se,containerHeight:je}})},[]);ie.useEffect(function(){var Fe=function($e){var Be,qe=$e[0].contentRect,be=qe.width,Te=qe.height;oe(be,Te),(Be=me.current)===null||Be===void 0||Be.call(me,be,Te)};$>0&&(Fe=vJ(Fe,$,{trailing:!0,leading:!1}));var Ee=new ResizeObserver(Fe),ze=le.current.getBoundingClientRect(),Se=ze.width,je=ze.height;return oe(Se,je),Ee.observe(le.current),function(){Ee.disconnect()}},[oe,$]);var _e=ie.useMemo(function(){var Fe=we.containerWidth,Ee=we.containerHeight;if(Fe<0||Ee<0)return null;qp(fv(c)||fv(v),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,c,v),qp(!a||a>0,"The aspect(%s) must be greater than zero.",a);var ze=fv(c)?Fe:c,Se=fv(v)?Ee:v;a&&a>0&&(ze?Se=ze/a:Se&&(ze=Se*a),L&&Se>L&&(Se=L)),qp(ze>0||Se>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,ze,Se,c,v,x,N,a);var je=!Array.isArray(F)&&Eg(F.type).endsWith("Chart");return Ot.Children.map(F,function(Ue){return Ot.isValidElement(Ue)?ie.cloneElement(Ue,qS({width:ze,height:Se},je?{style:qS({height:"100%",width:"100%",maxHeight:Se,maxWidth:ze},Ue.props.style)}:{})):Ue})},[a,F,v,L,N,x,we,c]);return Ot.createElement("div",{id:H?"".concat(H):void 0,className:gi("recharts-responsive-container",W),style:qS(qS({},fe),{},{width:c,height:v,minWidth:x,minHeight:N,maxHeight:L}),ref:le},_e)}),D_=function(e){return null};D_.displayName="Cell";function rT(t){"@babel/helpers - typeof";return rT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rT(t)}function LG(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function DM(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?LG(Object(a),!0).forEach(function(r){OAe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):LG(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function OAe(t,e,a){return e=VAe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function VAe(t){var e=zAe(t,"string");return rT(e)=="symbol"?e:e+""}function zAe(t,e){if(rT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(rT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var k0={widthCache:{},cacheCount:0},DAe=2e3,MAe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},FG="recharts_measurement_span";function IAe(t){var e=DM({},t);return Object.keys(e).forEach(function(a){e[a]||delete e[a]}),e}var wR=function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Gg.isSsr)return{width:0,height:0};var r=IAe(a),i=JSON.stringify({text:e,copyStyle:r});if(k0.widthCache[i])return k0.widthCache[i];try{var l=document.getElementById(FG);l||(l=document.createElement("span"),l.setAttribute("id",FG),l.setAttribute("aria-hidden","true"),document.body.appendChild(l));var c=DM(DM({},MAe),r);Object.assign(l.style,c),l.textContent="".concat(e);var n=l.getBoundingClientRect(),v={width:n.width,height:n.height};return k0.widthCache[i]=v,++k0.cacheCount>DAe&&(k0.cacheCount=0,k0.widthCache={}),v}catch{return{width:0,height:0}}},LAe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function nT(t){"@babel/helpers - typeof";return nT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nT(t)}function Tx(t,e){return BAe(t)||UAe(t,e)||kAe(t,e)||FAe()}function FAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kAe(t,e){if(t){if(typeof t=="string")return kG(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return kG(t,e)}}function kG(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function UAe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e===0){if(Object(a)!==a)return;v=!1}else for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function BAe(t){if(Array.isArray(t))return t}function jAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function UG(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ZAe(r.key),r)}}function GAe(t,e,a){return e&&UG(t.prototype,e),a&&UG(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function ZAe(t){var e=qAe(t,"string");return nT(e)=="symbol"?e:e+""}function qAe(t,e){if(nT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(nT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var BG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,jG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,HAe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,$Ae=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,_J={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},KAe=Object.keys(_J),Q0="NaN";function WAe(t,e){return t*_J[e]}var HS=function(){function t(e,a){jAe(this,t),this.num=e,this.unit=a,this.num=e,this.unit=a,Number.isNaN(e)&&(this.unit=""),a!==""&&!HAe.test(a)&&(this.num=NaN,this.unit=""),KAe.includes(a)&&(this.num=WAe(e,a),this.unit="px")}return GAe(t,[{key:"add",value:function(a){return this.unit!==a.unit?new t(NaN,""):new t(this.num+a.num,this.unit)}},{key:"subtract",value:function(a){return this.unit!==a.unit?new t(NaN,""):new t(this.num-a.num,this.unit)}},{key:"multiply",value:function(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new t(NaN,""):new t(this.num*a.num,this.unit||a.unit)}},{key:"divide",value:function(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new t(NaN,""):new t(this.num/a.num,this.unit||a.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(a){var r,i=(r=$Ae.exec(a))!==null&&r!==void 0?r:[],l=Tx(i,3),c=l[1],n=l[2];return new t(parseFloat(c),n??"")}}])}();function wJ(t){if(t.includes(Q0))return Q0;for(var e=t;e.includes("*")||e.includes("/");){var a,r=(a=BG.exec(e))!==null&&a!==void 0?a:[],i=Tx(r,4),l=i[1],c=i[2],n=i[3],v=HS.parse(l??""),R=HS.parse(n??""),x=c==="*"?v.multiply(R):v.divide(R);if(x.isNaN())return Q0;e=e.replace(BG,x.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var N,L=(N=jG.exec(e))!==null&&N!==void 0?N:[],F=Tx(L,4),j=F[1],$=F[2],H=F[3],W=HS.parse(j??""),ee=HS.parse(H??""),se=$==="+"?W.add(ee):W.subtract(ee);if(se.isNaN())return Q0;e=e.replace(jG,se.toString())}return e}var GG=/\(([^()]*)\)/;function YAe(t){for(var e=t;e.includes("(");){var a=GG.exec(e),r=Tx(a,2),i=r[1];e=e.replace(GG,wJ(i))}return e}function XAe(t){var e=t.replace(/\s+/g,"");return e=YAe(e),e=wJ(e),e}function JAe(t){try{return XAe(t)}catch{return Q0}}function $z(t){var e=JAe(t.slice(5,-1));return e===Q0?"":e}var QAe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],eve=["dx","dy","angle","className","breakAll"];function MM(){return MM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},MM.apply(this,arguments)}function ZG(t,e){if(t==null)return{};var a=tve(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function tve(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function qG(t,e){return ive(t)||nve(t,e)||rve(t,e)||ave()}function ave(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rve(t,e){if(t){if(typeof t=="string")return HG(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return HG(t,e)}}function HG(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function nve(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e===0){if(Object(a)!==a)return;v=!1}else for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function ive(t){if(Array.isArray(t))return t}var RJ=/[ \f\n\r\t\v\u2028\u2029]+/,TJ=function(e){var a=e.children,r=e.breakAll,i=e.style;try{var l=[];qn(a)||(r?l=a.toString().split(""):l=a.toString().split(RJ));var c=l.map(function(v){return{word:v,width:wR(v,i).width}}),n=r?0:wR(" ",i).width;return{wordsWithComputedWidth:c,spaceWidth:n}}catch{return null}},sve=function(e,a,r,i,l){var c=e.maxLines,n=e.children,v=e.style,R=e.breakAll,x=_r(c),N=n,L=function(){var ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return ze.reduce(function(Se,je){var Ue=je.word,$e=je.width,Be=Se[Se.length-1];if(Be&&(i==null||l||Be.width+$e+r<Number(i)))Be.words.push(Ue),Be.width+=$e+r;else{var qe={words:[Ue],width:$e};Se.push(qe)}return Se},[])},F=L(a),j=function(ze){return ze.reduce(function(Se,je){return Se.width>je.width?Se:je})};if(!x)return F;for(var $="…",H=function(ze){var Se=N.slice(0,ze),je=TJ({breakAll:R,style:v,children:Se+$}).wordsWithComputedWidth,Ue=L(je),$e=Ue.length>c||j(Ue).width>Number(i);return[$e,Ue]},W=0,ee=N.length-1,se=0,fe;W<=ee&&se<=N.length-1;){var le=Math.floor((W+ee)/2),me=le-1,ge=H(me),Re=qG(ge,2),we=Re[0],Ve=Re[1],oe=H(le),_e=qG(oe,1),Fe=_e[0];if(!we&&!Fe&&(W=le+1),we&&Fe&&(ee=le-1),!we&&Fe){fe=Ve;break}se++}return fe||F},$G=function(e){var a=qn(e)?[]:e.toString().split(RJ);return[{words:a}]},ove=function(e){var a=e.width,r=e.scaleToFit,i=e.children,l=e.style,c=e.breakAll,n=e.maxLines;if((a||r)&&!Gg.isSsr){var v,R,x=TJ({breakAll:c,children:i,style:l});if(x){var N=x.wordsWithComputedWidth,L=x.spaceWidth;v=N,R=L}else return $G(i);return sve({breakAll:c,children:i,maxLines:n,style:l},v,R,a,r)}return $G(i)},KG="#808080",Mv=function(e){var a=e.x,r=a===void 0?0:a,i=e.y,l=i===void 0?0:i,c=e.lineHeight,n=c===void 0?"1em":c,v=e.capHeight,R=v===void 0?"0.71em":v,x=e.scaleToFit,N=x===void 0?!1:x,L=e.textAnchor,F=L===void 0?"start":L,j=e.verticalAnchor,$=j===void 0?"end":j,H=e.fill,W=H===void 0?KG:H,ee=ZG(e,QAe),se=ie.useMemo(function(){return ove({breakAll:ee.breakAll,children:ee.children,maxLines:ee.maxLines,scaleToFit:N,style:ee.style,width:ee.width})},[ee.breakAll,ee.children,ee.maxLines,N,ee.style,ee.width]),fe=ee.dx,le=ee.dy,me=ee.angle,ge=ee.className,Re=ee.breakAll,we=ZG(ee,eve);if(!qu(r)||!qu(l))return null;var Ve=r+(_r(fe)?fe:0),oe=l+(_r(le)?le:0),_e;switch($){case"start":_e=$z("calc(".concat(R,")"));break;case"middle":_e=$z("calc(".concat((se.length-1)/2," * -").concat(n," + (").concat(R," / 2))"));break;default:_e=$z("calc(".concat(se.length-1," * -").concat(n,")"));break}var Fe=[];if(N){var Ee=se[0].width,ze=ee.width;Fe.push("scale(".concat((_r(ze)?ze/Ee:1)/Ee,")"))}return me&&Fe.push("rotate(".concat(me,", ").concat(Ve,", ").concat(oe,")")),Fe.length&&(we.transform=Fe.join(" ")),Ot.createElement("text",MM({},gn(we,!0),{x:Ve,y:oe,className:gi("recharts-text",ge),textAnchor:F,fill:W.includes("url")?KG:W}),se.map(function(Se,je){var Ue=Se.words.join(Re?"":" ");return Ot.createElement("tspan",{x:Ve,dy:je===0?_e:n,key:"".concat(Ue,"-").concat(je)},Ue)}))};function Ky(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function lve(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function r4(t){let e,a,r;t.length!==2?(e=Ky,a=(n,v)=>Ky(t(n),v),r=(n,v)=>t(n)-v):(e=t===Ky||t===lve?t:uve,a=t,r=t);function i(n,v,R=0,x=n.length){if(R<x){if(e(v,v)!==0)return x;do{const N=R+x>>>1;a(n[N],v)<0?R=N+1:x=N}while(R<x)}return R}function l(n,v,R=0,x=n.length){if(R<x){if(e(v,v)!==0)return x;do{const N=R+x>>>1;a(n[N],v)<=0?R=N+1:x=N}while(R<x)}return R}function c(n,v,R=0,x=n.length){const N=i(n,v,R,x-1);return N>R&&r(n[N-1],v)>-r(n[N],v)?N-1:N}return{left:i,center:c,right:l}}function uve(){return 0}function CJ(t){return t===null?NaN:+t}function*cve(t,e){for(let a of t)a!=null&&(a=+a)>=a&&(yield a)}const dve=r4(Ky),pC=dve.right;r4(CJ).center;class WG extends Map{constructor(e,a=pve){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(YG(this,e))}has(e){return super.has(YG(this,e))}set(e,a){return super.set(hve(this,e),a)}delete(e){return super.delete(fve(this,e))}}function YG({_intern:t,_key:e},a){const r=e(a);return t.has(r)?t.get(r):a}function hve({_intern:t,_key:e},a){const r=e(a);return t.has(r)?t.get(r):(t.set(r,a),a)}function fve({_intern:t,_key:e},a){const r=e(a);return t.has(r)&&(a=t.get(r),t.delete(r)),a}function pve(t){return t!==null&&typeof t=="object"?t.valueOf():t}function mve(t=Ky){if(t===Ky)return SJ;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,a)=>{const r=t(e,a);return r||r===0?r:(t(a,a)===0)-(t(e,e)===0)}}function SJ(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const gve=Math.sqrt(50),yve=Math.sqrt(10),Ave=Math.sqrt(2);function Cx(t,e,a){const r=(e-t)/Math.max(0,a),i=Math.floor(Math.log10(r)),l=r/Math.pow(10,i),c=l>=gve?10:l>=yve?5:l>=Ave?2:1;let n,v,R;return i<0?(R=Math.pow(10,-i)/c,n=Math.round(t*R),v=Math.round(e*R),n/R<t&&++n,v/R>e&&--v,R=-R):(R=Math.pow(10,i)*c,n=Math.round(t/R),v=Math.round(e/R),n*R<t&&++n,v*R>e&&--v),v<n&&.5<=a&&a<2?Cx(t,e,a*2):[n,v,R]}function IM(t,e,a){if(e=+e,t=+t,a=+a,!(a>0))return[];if(t===e)return[t];const r=e<t,[i,l,c]=r?Cx(e,t,a):Cx(t,e,a);if(!(l>=i))return[];const n=l-i+1,v=new Array(n);if(r)if(c<0)for(let R=0;R<n;++R)v[R]=(l-R)/-c;else for(let R=0;R<n;++R)v[R]=(l-R)*c;else if(c<0)for(let R=0;R<n;++R)v[R]=(i+R)/-c;else for(let R=0;R<n;++R)v[R]=(i+R)*c;return v}function LM(t,e,a){return e=+e,t=+t,a=+a,Cx(t,e,a)[2]}function FM(t,e,a){e=+e,t=+t,a=+a;const r=e<t,i=r?LM(e,t,a):LM(t,e,a);return(r?-1:1)*(i<0?1/-i:i)}function XG(t,e){let a;for(const r of t)r!=null&&(a<r||a===void 0&&r>=r)&&(a=r);return a}function JG(t,e){let a;for(const r of t)r!=null&&(a>r||a===void 0&&r>=r)&&(a=r);return a}function bJ(t,e,a=0,r=1/0,i){if(e=Math.floor(e),a=Math.floor(Math.max(0,a)),r=Math.floor(Math.min(t.length-1,r)),!(a<=e&&e<=r))return t;for(i=i===void 0?SJ:mve(i);r>a;){if(r-a>600){const v=r-a+1,R=e-a+1,x=Math.log(v),N=.5*Math.exp(2*x/3),L=.5*Math.sqrt(x*N*(v-N)/v)*(R-v/2<0?-1:1),F=Math.max(a,Math.floor(e-R*N/v+L)),j=Math.min(r,Math.floor(e+(v-R)*N/v+L));bJ(t,e,F,j,i)}const l=t[e];let c=a,n=r;for(Uw(t,a,e),i(t[r],l)>0&&Uw(t,a,r);c<n;){for(Uw(t,c,n),++c,--n;i(t[c],l)<0;)++c;for(;i(t[n],l)>0;)--n}i(t[a],l)===0?Uw(t,a,n):(++n,Uw(t,n,r)),n<=e&&(a=n+1),e<=n&&(r=n-1)}return t}function Uw(t,e,a){const r=t[e];t[e]=t[a],t[a]=r}function vve(t,e,a){if(t=Float64Array.from(cve(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return JG(t);if(e>=1)return XG(t);var r,i=(r-1)*e,l=Math.floor(i),c=XG(bJ(t,l).subarray(0,l+1)),n=JG(t.subarray(l+1));return c+(n-c)*(i-l)}}function _ve(t,e,a=CJ){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+a(t[0],0,t);if(e>=1)return+a(t[r-1],r-1,t);var r,i=(r-1)*e,l=Math.floor(i),c=+a(t[l],l,t),n=+a(t[l+1],l+1,t);return c+(n-c)*(i-l)}}function wve(t,e,a){t=+t,e=+e,a=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+a;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/a))|0,l=new Array(i);++r<i;)l[r]=t+r*a;return l}function ip(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Zg(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const kM=Symbol("implicit");function n4(){var t=new WG,e=[],a=[],r=kM;function i(l){let c=t.get(l);if(c===void 0){if(r!==kM)return r;t.set(l,c=e.push(l)-1)}return a[c%a.length]}return i.domain=function(l){if(!arguments.length)return e.slice();e=[],t=new WG;for(const c of l)t.has(c)||t.set(c,e.push(c)-1);return i},i.range=function(l){return arguments.length?(a=Array.from(l),i):a.slice()},i.unknown=function(l){return arguments.length?(r=l,i):r},i.copy=function(){return n4(e,a).unknown(r)},ip.apply(i,arguments),i}function iT(){var t=n4().unknown(void 0),e=t.domain,a=t.range,r=0,i=1,l,c,n=!1,v=0,R=0,x=.5;delete t.unknown;function N(){var L=e().length,F=i<r,j=F?i:r,$=F?r:i;l=($-j)/Math.max(1,L-v+R*2),n&&(l=Math.floor(l)),j+=($-j-l*(L-v))*x,c=l*(1-v),n&&(j=Math.round(j),c=Math.round(c));var H=wve(L).map(function(W){return j+l*W});return a(F?H.reverse():H)}return t.domain=function(L){return arguments.length?(e(L),N()):e()},t.range=function(L){return arguments.length?([r,i]=L,r=+r,i=+i,N()):[r,i]},t.rangeRound=function(L){return[r,i]=L,r=+r,i=+i,n=!0,N()},t.bandwidth=function(){return c},t.step=function(){return l},t.round=function(L){return arguments.length?(n=!!L,N()):n},t.padding=function(L){return arguments.length?(v=Math.min(1,R=+L),N()):v},t.paddingInner=function(L){return arguments.length?(v=Math.min(1,L),N()):v},t.paddingOuter=function(L){return arguments.length?(R=+L,N()):R},t.align=function(L){return arguments.length?(x=Math.max(0,Math.min(1,L)),N()):x},t.copy=function(){return iT(e(),[r,i]).round(n).paddingInner(v).paddingOuter(R).align(x)},ip.apply(N(),arguments)}function xJ(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return xJ(e())},t}function RR(){return xJ(iT.apply(null,arguments).paddingInner(1))}function i4(t,e,a){t.prototype=e.prototype=a,a.constructor=t}function PJ(t,e){var a=Object.create(t.prototype);for(var r in e)a[r]=e[r];return a}function mC(){}var sT=.7,Sx=1/sT,p_="\\s*([+-]?\\d+)\\s*",oT="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Bm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Rve=/^#([0-9a-f]{3,8})$/,Tve=new RegExp(`^rgb\\(${p_},${p_},${p_}\\)$`),Cve=new RegExp(`^rgb\\(${Bm},${Bm},${Bm}\\)$`),Sve=new RegExp(`^rgba\\(${p_},${p_},${p_},${oT}\\)$`),bve=new RegExp(`^rgba\\(${Bm},${Bm},${Bm},${oT}\\)$`),xve=new RegExp(`^hsl\\(${oT},${Bm},${Bm}\\)$`),Pve=new RegExp(`^hsla\\(${oT},${Bm},${Bm},${oT}\\)$`),QG={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};i4(mC,lT,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:e7,formatHex:e7,formatHex8:Eve,formatHsl:Nve,formatRgb:t7,toString:t7});function e7(){return this.rgb().formatHex()}function Eve(){return this.rgb().formatHex8()}function Nve(){return EJ(this).formatHsl()}function t7(){return this.rgb().formatRgb()}function lT(t){var e,a;return t=(t+"").trim().toLowerCase(),(e=Rve.exec(t))?(a=e[1].length,e=parseInt(e[1],16),a===6?a7(e):a===3?new Lh(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):a===8?$S(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):a===4?$S(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Tve.exec(t))?new Lh(e[1],e[2],e[3],1):(e=Cve.exec(t))?new Lh(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Sve.exec(t))?$S(e[1],e[2],e[3],e[4]):(e=bve.exec(t))?$S(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=xve.exec(t))?i7(e[1],e[2]/100,e[3]/100,1):(e=Pve.exec(t))?i7(e[1],e[2]/100,e[3]/100,e[4]):QG.hasOwnProperty(t)?a7(QG[t]):t==="transparent"?new Lh(NaN,NaN,NaN,0):null}function a7(t){return new Lh(t>>16&255,t>>8&255,t&255,1)}function $S(t,e,a,r){return r<=0&&(t=e=a=NaN),new Lh(t,e,a,r)}function Ove(t){return t instanceof mC||(t=lT(t)),t?(t=t.rgb(),new Lh(t.r,t.g,t.b,t.opacity)):new Lh}function UM(t,e,a,r){return arguments.length===1?Ove(t):new Lh(t,e,a,r??1)}function Lh(t,e,a,r){this.r=+t,this.g=+e,this.b=+a,this.opacity=+r}i4(Lh,UM,PJ(mC,{brighter(t){return t=t==null?Sx:Math.pow(Sx,t),new Lh(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?sT:Math.pow(sT,t),new Lh(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Lh(wv(this.r),wv(this.g),wv(this.b),bx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:r7,formatHex:r7,formatHex8:Vve,formatRgb:n7,toString:n7}));function r7(){return`#${pv(this.r)}${pv(this.g)}${pv(this.b)}`}function Vve(){return`#${pv(this.r)}${pv(this.g)}${pv(this.b)}${pv((isNaN(this.opacity)?1:this.opacity)*255)}`}function n7(){const t=bx(this.opacity);return`${t===1?"rgb(":"rgba("}${wv(this.r)}, ${wv(this.g)}, ${wv(this.b)}${t===1?")":`, ${t})`}`}function bx(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function wv(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function pv(t){return t=wv(t),(t<16?"0":"")+t.toString(16)}function i7(t,e,a,r){return r<=0?t=e=a=NaN:a<=0||a>=1?t=e=NaN:e<=0&&(t=NaN),new Zp(t,e,a,r)}function EJ(t){if(t instanceof Zp)return new Zp(t.h,t.s,t.l,t.opacity);if(t instanceof mC||(t=lT(t)),!t)return new Zp;if(t instanceof Zp)return t;t=t.rgb();var e=t.r/255,a=t.g/255,r=t.b/255,i=Math.min(e,a,r),l=Math.max(e,a,r),c=NaN,n=l-i,v=(l+i)/2;return n?(e===l?c=(a-r)/n+(a<r)*6:a===l?c=(r-e)/n+2:c=(e-a)/n+4,n/=v<.5?l+i:2-l-i,c*=60):n=v>0&&v<1?0:c,new Zp(c,n,v,t.opacity)}function zve(t,e,a,r){return arguments.length===1?EJ(t):new Zp(t,e,a,r??1)}function Zp(t,e,a,r){this.h=+t,this.s=+e,this.l=+a,this.opacity=+r}i4(Zp,zve,PJ(mC,{brighter(t){return t=t==null?Sx:Math.pow(Sx,t),new Zp(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?sT:Math.pow(sT,t),new Zp(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,a=this.l,r=a+(a<.5?a:1-a)*e,i=2*a-r;return new Lh(Kz(t>=240?t-240:t+120,i,r),Kz(t,i,r),Kz(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Zp(s7(this.h),KS(this.s),KS(this.l),bx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=bx(this.opacity);return`${t===1?"hsl(":"hsla("}${s7(this.h)}, ${KS(this.s)*100}%, ${KS(this.l)*100}%${t===1?")":`, ${t})`}`}}));function s7(t){return t=(t||0)%360,t<0?t+360:t}function KS(t){return Math.max(0,Math.min(1,t||0))}function Kz(t,e,a){return(t<60?e+(a-e)*t/60:t<180?a:t<240?e+(a-e)*(240-t)/60:e)*255}const s4=t=>()=>t;function Dve(t,e){return function(a){return t+a*e}}function Mve(t,e,a){return t=Math.pow(t,a),e=Math.pow(e,a)-t,a=1/a,function(r){return Math.pow(t+r*e,a)}}function Ive(t){return(t=+t)==1?NJ:function(e,a){return a-e?Mve(e,a,t):s4(isNaN(e)?a:e)}}function NJ(t,e){var a=e-t;return a?Dve(t,a):s4(isNaN(t)?e:t)}const o7=function t(e){var a=Ive(e);function r(i,l){var c=a((i=UM(i)).r,(l=UM(l)).r),n=a(i.g,l.g),v=a(i.b,l.b),R=NJ(i.opacity,l.opacity);return function(x){return i.r=c(x),i.g=n(x),i.b=v(x),i.opacity=R(x),i+""}}return r.gamma=t,r}(1);function Lve(t,e){e||(e=[]);var a=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(l){for(i=0;i<a;++i)r[i]=t[i]*(1-l)+e[i]*l;return r}}function Fve(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function kve(t,e){var a=e?e.length:0,r=t?Math.min(a,t.length):0,i=new Array(r),l=new Array(a),c;for(c=0;c<r;++c)i[c]=w1(t[c],e[c]);for(;c<a;++c)l[c]=e[c];return function(n){for(c=0;c<r;++c)l[c]=i[c](n);return l}}function Uve(t,e){var a=new Date;return t=+t,e=+e,function(r){return a.setTime(t*(1-r)+e*r),a}}function xx(t,e){return t=+t,e=+e,function(a){return t*(1-a)+e*a}}function Bve(t,e){var a={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?a[i]=w1(t[i],e[i]):r[i]=e[i];return function(l){for(i in a)r[i]=a[i](l);return r}}var BM=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wz=new RegExp(BM.source,"g");function jve(t){return function(){return t}}function Gve(t){return function(e){return t(e)+""}}function Zve(t,e){var a=BM.lastIndex=Wz.lastIndex=0,r,i,l,c=-1,n=[],v=[];for(t=t+"",e=e+"";(r=BM.exec(t))&&(i=Wz.exec(e));)(l=i.index)>a&&(l=e.slice(a,l),n[c]?n[c]+=l:n[++c]=l),(r=r[0])===(i=i[0])?n[c]?n[c]+=i:n[++c]=i:(n[++c]=null,v.push({i:c,x:xx(r,i)})),a=Wz.lastIndex;return a<e.length&&(l=e.slice(a),n[c]?n[c]+=l:n[++c]=l),n.length<2?v[0]?Gve(v[0].x):jve(e):(e=v.length,function(R){for(var x=0,N;x<e;++x)n[(N=v[x]).i]=N.x(R);return n.join("")})}function w1(t,e){var a=typeof e,r;return e==null||a==="boolean"?s4(e):(a==="number"?xx:a==="string"?(r=lT(e))?(e=r,o7):Zve:e instanceof lT?o7:e instanceof Date?Uve:Fve(e)?Lve:Array.isArray(e)?kve:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Bve:xx)(t,e)}function o4(t,e){return t=+t,e=+e,function(a){return Math.round(t*(1-a)+e*a)}}function qve(t,e){e===void 0&&(e=t,t=w1);for(var a=0,r=e.length-1,i=e[0],l=new Array(r<0?0:r);a<r;)l[a]=t(i,i=e[++a]);return function(c){var n=Math.max(0,Math.min(r-1,Math.floor(c*=r)));return l[n](c-n)}}function Hve(t){return function(){return t}}function Px(t){return+t}var l7=[0,1];function lh(t){return t}function jM(t,e){return(e-=t=+t)?function(a){return(a-t)/e}:Hve(isNaN(e)?NaN:.5)}function $ve(t,e){var a;return t>e&&(a=t,t=e,e=a),function(r){return Math.max(t,Math.min(e,r))}}function Kve(t,e,a){var r=t[0],i=t[1],l=e[0],c=e[1];return i<r?(r=jM(i,r),l=a(c,l)):(r=jM(r,i),l=a(l,c)),function(n){return l(r(n))}}function Wve(t,e,a){var r=Math.min(t.length,e.length)-1,i=new Array(r),l=new Array(r),c=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++c<r;)i[c]=jM(t[c],t[c+1]),l[c]=a(e[c],e[c+1]);return function(n){var v=pC(t,n,1,r)-1;return l[v](i[v](n))}}function gC(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function bP(){var t=l7,e=l7,a=w1,r,i,l,c=lh,n,v,R;function x(){var L=Math.min(t.length,e.length);return c!==lh&&(c=$ve(t[0],t[L-1])),n=L>2?Wve:Kve,v=R=null,N}function N(L){return L==null||isNaN(L=+L)?l:(v||(v=n(t.map(r),e,a)))(r(c(L)))}return N.invert=function(L){return c(i((R||(R=n(e,t.map(r),xx)))(L)))},N.domain=function(L){return arguments.length?(t=Array.from(L,Px),x()):t.slice()},N.range=function(L){return arguments.length?(e=Array.from(L),x()):e.slice()},N.rangeRound=function(L){return e=Array.from(L),a=o4,x()},N.clamp=function(L){return arguments.length?(c=L?!0:lh,x()):c!==lh},N.interpolate=function(L){return arguments.length?(a=L,x()):a},N.unknown=function(L){return arguments.length?(l=L,N):l},function(L,F){return r=L,i=F,x()}}function l4(){return bP()(lh,lh)}function Yve(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ex(t,e){if((a=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var a,r=t.slice(0,a);return[r.length>1?r[0]+r.slice(2):r,+t.slice(a+1)]}function M_(t){return t=Ex(Math.abs(t)),t?t[1]:NaN}function Xve(t,e){return function(a,r){for(var i=a.length,l=[],c=0,n=t[0],v=0;i>0&&n>0&&(v+n+1>r&&(n=Math.max(1,r-v)),l.push(a.substring(i-=n,i+n)),!((v+=n+1)>r));)n=t[c=(c+1)%t.length];return l.reverse().join(e)}}function Jve(t){return function(e){return e.replace(/[0-9]/g,function(a){return t[+a]})}}var Qve=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function uT(t){if(!(e=Qve.exec(t)))throw new Error("invalid format: "+t);var e;return new u4({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}uT.prototype=u4.prototype;function u4(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}u4.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function e0e(t){e:for(var e=t.length,a=1,r=-1,i;a<e;++a)switch(t[a]){case".":r=i=a;break;case"0":r===0&&(r=a),i=a;break;default:if(!+t[a])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var OJ;function t0e(t,e){var a=Ex(t,e);if(!a)return t+"";var r=a[0],i=a[1],l=i-(OJ=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,c=r.length;return l===c?r:l>c?r+new Array(l-c+1).join("0"):l>0?r.slice(0,l)+"."+r.slice(l):"0."+new Array(1-l).join("0")+Ex(t,Math.max(0,e+l-1))[0]}function u7(t,e){var a=Ex(t,e);if(!a)return t+"";var r=a[0],i=a[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const c7={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Yve,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>u7(t*100,e),r:u7,s:t0e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function d7(t){return t}var h7=Array.prototype.map,f7=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function a0e(t){var e=t.grouping===void 0||t.thousands===void 0?d7:Xve(h7.call(t.grouping,Number),t.thousands+""),a=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",l=t.numerals===void 0?d7:Jve(h7.call(t.numerals,String)),c=t.percent===void 0?"%":t.percent+"",n=t.minus===void 0?"−":t.minus+"",v=t.nan===void 0?"NaN":t.nan+"";function R(N){N=uT(N);var L=N.fill,F=N.align,j=N.sign,$=N.symbol,H=N.zero,W=N.width,ee=N.comma,se=N.precision,fe=N.trim,le=N.type;le==="n"?(ee=!0,le="g"):c7[le]||(se===void 0&&(se=12),fe=!0,le="g"),(H||L==="0"&&F==="=")&&(H=!0,L="0",F="=");var me=$==="$"?a:$==="#"&&/[boxX]/.test(le)?"0"+le.toLowerCase():"",ge=$==="$"?r:/[%p]/.test(le)?c:"",Re=c7[le],we=/[defgprs%]/.test(le);se=se===void 0?6:/[gprs]/.test(le)?Math.max(1,Math.min(21,se)):Math.max(0,Math.min(20,se));function Ve(oe){var _e=me,Fe=ge,Ee,ze,Se;if(le==="c")Fe=Re(oe)+Fe,oe="";else{oe=+oe;var je=oe<0||1/oe<0;if(oe=isNaN(oe)?v:Re(Math.abs(oe),se),fe&&(oe=e0e(oe)),je&&+oe==0&&j!=="+"&&(je=!1),_e=(je?j==="("?j:n:j==="-"||j==="("?"":j)+_e,Fe=(le==="s"?f7[8+OJ/3]:"")+Fe+(je&&j==="("?")":""),we){for(Ee=-1,ze=oe.length;++Ee<ze;)if(Se=oe.charCodeAt(Ee),48>Se||Se>57){Fe=(Se===46?i+oe.slice(Ee+1):oe.slice(Ee))+Fe,oe=oe.slice(0,Ee);break}}}ee&&!H&&(oe=e(oe,1/0));var Ue=_e.length+oe.length+Fe.length,$e=Ue<W?new Array(W-Ue+1).join(L):"";switch(ee&&H&&(oe=e($e+oe,$e.length?W-Fe.length:1/0),$e=""),F){case"<":oe=_e+oe+Fe+$e;break;case"=":oe=_e+$e+oe+Fe;break;case"^":oe=$e.slice(0,Ue=$e.length>>1)+_e+oe+Fe+$e.slice(Ue);break;default:oe=$e+_e+oe+Fe;break}return l(oe)}return Ve.toString=function(){return N+""},Ve}function x(N,L){var F=R((N=uT(N),N.type="f",N)),j=Math.max(-8,Math.min(8,Math.floor(M_(L)/3)))*3,$=Math.pow(10,-j),H=f7[8+j/3];return function(W){return F($*W)+H}}return{format:R,formatPrefix:x}}var WS,c4,VJ;r0e({thousands:",",grouping:[3],currency:["$",""]});function r0e(t){return WS=a0e(t),c4=WS.format,VJ=WS.formatPrefix,WS}function n0e(t){return Math.max(0,-M_(Math.abs(t)))}function i0e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(M_(e)/3)))*3-M_(Math.abs(t)))}function s0e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,M_(e)-M_(t))+1}function zJ(t,e,a,r){var i=FM(t,e,a),l;switch(r=uT(r??",f"),r.type){case"s":{var c=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(l=i0e(i,c))&&(r.precision=l),VJ(r,c)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(l=s0e(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=l-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(l=n0e(i))&&(r.precision=l-(r.type==="%")*2);break}}return c4(r)}function dA(t){var e=t.domain;return t.ticks=function(a){var r=e();return IM(r[0],r[r.length-1],a??10)},t.tickFormat=function(a,r){var i=e();return zJ(i[0],i[i.length-1],a??10,r)},t.nice=function(a){a==null&&(a=10);var r=e(),i=0,l=r.length-1,c=r[i],n=r[l],v,R,x=10;for(n<c&&(R=c,c=n,n=R,R=i,i=l,l=R);x-- >0;){if(R=LM(c,n,a),R===v)return r[i]=c,r[l]=n,e(r);if(R>0)c=Math.floor(c/R)*R,n=Math.ceil(n/R)*R;else if(R<0)c=Math.ceil(c*R)/R,n=Math.floor(n*R)/R;else break;v=R}return t},t}function Nx(){var t=l4();return t.copy=function(){return gC(t,Nx())},ip.apply(t,arguments),dA(t)}function DJ(t){var e;function a(r){return r==null||isNaN(r=+r)?e:r}return a.invert=a,a.domain=a.range=function(r){return arguments.length?(t=Array.from(r,Px),a):t.slice()},a.unknown=function(r){return arguments.length?(e=r,a):e},a.copy=function(){return DJ(t).unknown(e)},t=arguments.length?Array.from(t,Px):[0,1],dA(a)}function MJ(t,e){t=t.slice();var a=0,r=t.length-1,i=t[a],l=t[r],c;return l<i&&(c=a,a=r,r=c,c=i,i=l,l=c),t[a]=e.floor(i),t[r]=e.ceil(l),t}function p7(t){return Math.log(t)}function m7(t){return Math.exp(t)}function o0e(t){return-Math.log(-t)}function l0e(t){return-Math.exp(-t)}function u0e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function c0e(t){return t===10?u0e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function d0e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function g7(t){return(e,a)=>-t(-e,a)}function d4(t){const e=t(p7,m7),a=e.domain;let r=10,i,l;function c(){return i=d0e(r),l=c0e(r),a()[0]<0?(i=g7(i),l=g7(l),t(o0e,l0e)):t(p7,m7),e}return e.base=function(n){return arguments.length?(r=+n,c()):r},e.domain=function(n){return arguments.length?(a(n),c()):a()},e.ticks=n=>{const v=a();let R=v[0],x=v[v.length-1];const N=x<R;N&&([R,x]=[x,R]);let L=i(R),F=i(x),j,$;const H=n==null?10:+n;let W=[];if(!(r%1)&&F-L<H){if(L=Math.floor(L),F=Math.ceil(F),R>0){for(;L<=F;++L)for(j=1;j<r;++j)if($=L<0?j/l(-L):j*l(L),!($<R)){if($>x)break;W.push($)}}else for(;L<=F;++L)for(j=r-1;j>=1;--j)if($=L>0?j/l(-L):j*l(L),!($<R)){if($>x)break;W.push($)}W.length*2<H&&(W=IM(R,x,H))}else W=IM(L,F,Math.min(F-L,H)).map(l);return N?W.reverse():W},e.tickFormat=(n,v)=>{if(n==null&&(n=10),v==null&&(v=r===10?"s":","),typeof v!="function"&&(!(r%1)&&(v=uT(v)).precision==null&&(v.trim=!0),v=c4(v)),n===1/0)return v;const R=Math.max(1,r*n/e.ticks().length);return x=>{let N=x/l(Math.round(i(x)));return N*r<r-.5&&(N*=r),N<=R?v(x):""}},e.nice=()=>a(MJ(a(),{floor:n=>l(Math.floor(i(n))),ceil:n=>l(Math.ceil(i(n)))})),e}function IJ(){const t=d4(bP()).domain([1,10]);return t.copy=()=>gC(t,IJ()).base(t.base()),ip.apply(t,arguments),t}function y7(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function A7(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function h4(t){var e=1,a=t(y7(e),A7(e));return a.constant=function(r){return arguments.length?t(y7(e=+r),A7(e)):e},dA(a)}function LJ(){var t=h4(bP());return t.copy=function(){return gC(t,LJ()).constant(t.constant())},ip.apply(t,arguments)}function v7(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function h0e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function f0e(t){return t<0?-t*t:t*t}function f4(t){var e=t(lh,lh),a=1;function r(){return a===1?t(lh,lh):a===.5?t(h0e,f0e):t(v7(a),v7(1/a))}return e.exponent=function(i){return arguments.length?(a=+i,r()):a},dA(e)}function p4(){var t=f4(bP());return t.copy=function(){return gC(t,p4()).exponent(t.exponent())},ip.apply(t,arguments),t}function p0e(){return p4.apply(null,arguments).exponent(.5)}function _7(t){return Math.sign(t)*t*t}function m0e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function FJ(){var t=l4(),e=[0,1],a=!1,r;function i(l){var c=m0e(t(l));return isNaN(c)?r:a?Math.round(c):c}return i.invert=function(l){return t.invert(_7(l))},i.domain=function(l){return arguments.length?(t.domain(l),i):t.domain()},i.range=function(l){return arguments.length?(t.range((e=Array.from(l,Px)).map(_7)),i):e.slice()},i.rangeRound=function(l){return i.range(l).round(!0)},i.round=function(l){return arguments.length?(a=!!l,i):a},i.clamp=function(l){return arguments.length?(t.clamp(l),i):t.clamp()},i.unknown=function(l){return arguments.length?(r=l,i):r},i.copy=function(){return FJ(t.domain(),e).round(a).clamp(t.clamp()).unknown(r)},ip.apply(i,arguments),dA(i)}function kJ(){var t=[],e=[],a=[],r;function i(){var c=0,n=Math.max(1,e.length);for(a=new Array(n-1);++c<n;)a[c-1]=_ve(t,c/n);return l}function l(c){return c==null||isNaN(c=+c)?r:e[pC(a,c)]}return l.invertExtent=function(c){var n=e.indexOf(c);return n<0?[NaN,NaN]:[n>0?a[n-1]:t[0],n<a.length?a[n]:t[t.length-1]]},l.domain=function(c){if(!arguments.length)return t.slice();t=[];for(let n of c)n!=null&&!isNaN(n=+n)&&t.push(n);return t.sort(Ky),i()},l.range=function(c){return arguments.length?(e=Array.from(c),i()):e.slice()},l.unknown=function(c){return arguments.length?(r=c,l):r},l.quantiles=function(){return a.slice()},l.copy=function(){return kJ().domain(t).range(e).unknown(r)},ip.apply(l,arguments)}function UJ(){var t=0,e=1,a=1,r=[.5],i=[0,1],l;function c(v){return v!=null&&v<=v?i[pC(r,v,0,a)]:l}function n(){var v=-1;for(r=new Array(a);++v<a;)r[v]=((v+1)*e-(v-a)*t)/(a+1);return c}return c.domain=function(v){return arguments.length?([t,e]=v,t=+t,e=+e,n()):[t,e]},c.range=function(v){return arguments.length?(a=(i=Array.from(v)).length-1,n()):i.slice()},c.invertExtent=function(v){var R=i.indexOf(v);return R<0?[NaN,NaN]:R<1?[t,r[0]]:R>=a?[r[a-1],e]:[r[R-1],r[R]]},c.unknown=function(v){return arguments.length&&(l=v),c},c.thresholds=function(){return r.slice()},c.copy=function(){return UJ().domain([t,e]).range(i).unknown(l)},ip.apply(dA(c),arguments)}function BJ(){var t=[.5],e=[0,1],a,r=1;function i(l){return l!=null&&l<=l?e[pC(t,l,0,r)]:a}return i.domain=function(l){return arguments.length?(t=Array.from(l),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(l){return arguments.length?(e=Array.from(l),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(l){var c=e.indexOf(l);return[t[c-1],t[c]]},i.unknown=function(l){return arguments.length?(a=l,i):a},i.copy=function(){return BJ().domain(t).range(e).unknown(a)},ip.apply(i,arguments)}const Yz=new Date,Xz=new Date;function $u(t,e,a,r){function i(l){return t(l=arguments.length===0?new Date:new Date(+l)),l}return i.floor=l=>(t(l=new Date(+l)),l),i.ceil=l=>(t(l=new Date(l-1)),e(l,1),t(l),l),i.round=l=>{const c=i(l),n=i.ceil(l);return l-c<n-l?c:n},i.offset=(l,c)=>(e(l=new Date(+l),c==null?1:Math.floor(c)),l),i.range=(l,c,n)=>{const v=[];if(l=i.ceil(l),n=n==null?1:Math.floor(n),!(l<c)||!(n>0))return v;let R;do v.push(R=new Date(+l)),e(l,n),t(l);while(R<l&&l<c);return v},i.filter=l=>$u(c=>{if(c>=c)for(;t(c),!l(c);)c.setTime(c-1)},(c,n)=>{if(c>=c)if(n<0)for(;++n<=0;)for(;e(c,-1),!l(c););else for(;--n>=0;)for(;e(c,1),!l(c););}),a&&(i.count=(l,c)=>(Yz.setTime(+l),Xz.setTime(+c),t(Yz),t(Xz),Math.floor(a(Yz,Xz))),i.every=l=>(l=Math.floor(l),!isFinite(l)||!(l>0)?null:l>1?i.filter(r?c=>r(c)%l===0:c=>i.count(0,c)%l===0):i)),i}const Ox=$u(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Ox.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?$u(e=>{e.setTime(Math.floor(e/t)*t)},(e,a)=>{e.setTime(+e+a*t)},(e,a)=>(a-e)/t):Ox);Ox.range;const Cg=1e3,tp=Cg*60,Sg=tp*60,Lg=Sg*24,m4=Lg*7,w7=Lg*30,Jz=Lg*365,mv=$u(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Cg)},(t,e)=>(e-t)/Cg,t=>t.getUTCSeconds());mv.range;const g4=$u(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Cg)},(t,e)=>{t.setTime(+t+e*tp)},(t,e)=>(e-t)/tp,t=>t.getMinutes());g4.range;const y4=$u(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*tp)},(t,e)=>(e-t)/tp,t=>t.getUTCMinutes());y4.range;const A4=$u(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Cg-t.getMinutes()*tp)},(t,e)=>{t.setTime(+t+e*Sg)},(t,e)=>(e-t)/Sg,t=>t.getHours());A4.range;const v4=$u(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Sg)},(t,e)=>(e-t)/Sg,t=>t.getUTCHours());v4.range;const yC=$u(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*tp)/Lg,t=>t.getDate()-1);yC.range;const xP=$u(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Lg,t=>t.getUTCDate()-1);xP.range;const jJ=$u(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Lg,t=>Math.floor(t/Lg));jJ.range;function $v(t){return $u(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,a)=>{e.setDate(e.getDate()+a*7)},(e,a)=>(a-e-(a.getTimezoneOffset()-e.getTimezoneOffset())*tp)/m4)}const PP=$v(0),Vx=$v(1),g0e=$v(2),y0e=$v(3),I_=$v(4),A0e=$v(5),v0e=$v(6);PP.range;Vx.range;g0e.range;y0e.range;I_.range;A0e.range;v0e.range;function Kv(t){return $u(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,a)=>{e.setUTCDate(e.getUTCDate()+a*7)},(e,a)=>(a-e)/m4)}const EP=Kv(0),zx=Kv(1),_0e=Kv(2),w0e=Kv(3),L_=Kv(4),R0e=Kv(5),T0e=Kv(6);EP.range;zx.range;_0e.range;w0e.range;L_.range;R0e.range;T0e.range;const _4=$u(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());_4.range;const w4=$u(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());w4.range;const Fg=$u(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Fg.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:$u(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,a)=>{e.setFullYear(e.getFullYear()+a*t)});Fg.range;const kg=$u(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());kg.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:$u(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,a)=>{e.setUTCFullYear(e.getUTCFullYear()+a*t)});kg.range;function GJ(t,e,a,r,i,l){const c=[[mv,1,Cg],[mv,5,5*Cg],[mv,15,15*Cg],[mv,30,30*Cg],[l,1,tp],[l,5,5*tp],[l,15,15*tp],[l,30,30*tp],[i,1,Sg],[i,3,3*Sg],[i,6,6*Sg],[i,12,12*Sg],[r,1,Lg],[r,2,2*Lg],[a,1,m4],[e,1,w7],[e,3,3*w7],[t,1,Jz]];function n(R,x,N){const L=x<R;L&&([R,x]=[x,R]);const F=N&&typeof N.range=="function"?N:v(R,x,N),j=F?F.range(R,+x+1):[];return L?j.reverse():j}function v(R,x,N){const L=Math.abs(x-R)/N,F=r4(([,,H])=>H).right(c,L);if(F===c.length)return t.every(FM(R/Jz,x/Jz,N));if(F===0)return Ox.every(Math.max(FM(R,x,N),1));const[j,$]=c[L/c[F-1][2]<c[F][2]/L?F-1:F];return j.every($)}return[n,v]}const[C0e,S0e]=GJ(kg,w4,EP,jJ,v4,y4),[b0e,x0e]=GJ(Fg,_4,PP,yC,A4,g4);function Qz(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function e5(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Bw(t,e,a){return{y:t,m:e,d:a,H:0,M:0,S:0,L:0}}function P0e(t){var e=t.dateTime,a=t.date,r=t.time,i=t.periods,l=t.days,c=t.shortDays,n=t.months,v=t.shortMonths,R=jw(i),x=Gw(i),N=jw(l),L=Gw(l),F=jw(c),j=Gw(c),$=jw(n),H=Gw(n),W=jw(v),ee=Gw(v),se={a:je,A:Ue,b:$e,B:Be,c:null,d:x7,e:x7,f:X0e,g:o_e,G:u_e,H:K0e,I:W0e,j:Y0e,L:ZJ,m:J0e,M:Q0e,p:qe,q:be,Q:N7,s:O7,S:e_e,u:t_e,U:a_e,V:r_e,w:n_e,W:i_e,x:null,X:null,y:s_e,Y:l_e,Z:c_e,"%":E7},fe={a:Te,A:ke,b:Ge,B:at,c:null,d:P7,e:P7,f:p_e,g:C_e,G:b_e,H:d_e,I:h_e,j:f_e,L:HJ,m:m_e,M:g_e,p:rt,q:lt,Q:N7,s:O7,S:y_e,u:A_e,U:v_e,V:__e,w:w_e,W:R_e,x:null,X:null,y:T_e,Y:S_e,Z:x_e,"%":E7},le={a:Ve,A:oe,b:_e,B:Fe,c:Ee,d:S7,e:S7,f:Z0e,g:C7,G:T7,H:b7,I:b7,j:U0e,L:G0e,m:k0e,M:B0e,p:we,q:F0e,Q:H0e,s:$0e,S:j0e,u:z0e,U:D0e,V:M0e,w:V0e,W:I0e,x:ze,X:Se,y:C7,Y:T7,Z:L0e,"%":q0e};se.x=me(a,se),se.X=me(r,se),se.c=me(e,se),fe.x=me(a,fe),fe.X=me(r,fe),fe.c=me(e,fe);function me(ot,ve){return function(Vt){var Bt=[],wa=-1,It=0,$t=ot.length,wt,hr,ba;for(Vt instanceof Date||(Vt=new Date(+Vt));++wa<$t;)ot.charCodeAt(wa)===37&&(Bt.push(ot.slice(It,wa)),(hr=R7[wt=ot.charAt(++wa)])!=null?wt=ot.charAt(++wa):hr=wt==="e"?" ":"0",(ba=ve[wt])&&(wt=ba(Vt,hr)),Bt.push(wt),It=wa+1);return Bt.push(ot.slice(It,wa)),Bt.join("")}}function ge(ot,ve){return function(Vt){var Bt=Bw(1900,void 0,1),wa=Re(Bt,ot,Vt+="",0),It,$t;if(wa!=Vt.length)return null;if("Q"in Bt)return new Date(Bt.Q);if("s"in Bt)return new Date(Bt.s*1e3+("L"in Bt?Bt.L:0));if(ve&&!("Z"in Bt)&&(Bt.Z=0),"p"in Bt&&(Bt.H=Bt.H%12+Bt.p*12),Bt.m===void 0&&(Bt.m="q"in Bt?Bt.q:0),"V"in Bt){if(Bt.V<1||Bt.V>53)return null;"w"in Bt||(Bt.w=1),"Z"in Bt?(It=e5(Bw(Bt.y,0,1)),$t=It.getUTCDay(),It=$t>4||$t===0?zx.ceil(It):zx(It),It=xP.offset(It,(Bt.V-1)*7),Bt.y=It.getUTCFullYear(),Bt.m=It.getUTCMonth(),Bt.d=It.getUTCDate()+(Bt.w+6)%7):(It=Qz(Bw(Bt.y,0,1)),$t=It.getDay(),It=$t>4||$t===0?Vx.ceil(It):Vx(It),It=yC.offset(It,(Bt.V-1)*7),Bt.y=It.getFullYear(),Bt.m=It.getMonth(),Bt.d=It.getDate()+(Bt.w+6)%7)}else("W"in Bt||"U"in Bt)&&("w"in Bt||(Bt.w="u"in Bt?Bt.u%7:"W"in Bt?1:0),$t="Z"in Bt?e5(Bw(Bt.y,0,1)).getUTCDay():Qz(Bw(Bt.y,0,1)).getDay(),Bt.m=0,Bt.d="W"in Bt?(Bt.w+6)%7+Bt.W*7-($t+5)%7:Bt.w+Bt.U*7-($t+6)%7);return"Z"in Bt?(Bt.H+=Bt.Z/100|0,Bt.M+=Bt.Z%100,e5(Bt)):Qz(Bt)}}function Re(ot,ve,Vt,Bt){for(var wa=0,It=ve.length,$t=Vt.length,wt,hr;wa<It;){if(Bt>=$t)return-1;if(wt=ve.charCodeAt(wa++),wt===37){if(wt=ve.charAt(wa++),hr=le[wt in R7?ve.charAt(wa++):wt],!hr||(Bt=hr(ot,Vt,Bt))<0)return-1}else if(wt!=Vt.charCodeAt(Bt++))return-1}return Bt}function we(ot,ve,Vt){var Bt=R.exec(ve.slice(Vt));return Bt?(ot.p=x.get(Bt[0].toLowerCase()),Vt+Bt[0].length):-1}function Ve(ot,ve,Vt){var Bt=F.exec(ve.slice(Vt));return Bt?(ot.w=j.get(Bt[0].toLowerCase()),Vt+Bt[0].length):-1}function oe(ot,ve,Vt){var Bt=N.exec(ve.slice(Vt));return Bt?(ot.w=L.get(Bt[0].toLowerCase()),Vt+Bt[0].length):-1}function _e(ot,ve,Vt){var Bt=W.exec(ve.slice(Vt));return Bt?(ot.m=ee.get(Bt[0].toLowerCase()),Vt+Bt[0].length):-1}function Fe(ot,ve,Vt){var Bt=$.exec(ve.slice(Vt));return Bt?(ot.m=H.get(Bt[0].toLowerCase()),Vt+Bt[0].length):-1}function Ee(ot,ve,Vt){return Re(ot,e,ve,Vt)}function ze(ot,ve,Vt){return Re(ot,a,ve,Vt)}function Se(ot,ve,Vt){return Re(ot,r,ve,Vt)}function je(ot){return c[ot.getDay()]}function Ue(ot){return l[ot.getDay()]}function $e(ot){return v[ot.getMonth()]}function Be(ot){return n[ot.getMonth()]}function qe(ot){return i[+(ot.getHours()>=12)]}function be(ot){return 1+~~(ot.getMonth()/3)}function Te(ot){return c[ot.getUTCDay()]}function ke(ot){return l[ot.getUTCDay()]}function Ge(ot){return v[ot.getUTCMonth()]}function at(ot){return n[ot.getUTCMonth()]}function rt(ot){return i[+(ot.getUTCHours()>=12)]}function lt(ot){return 1+~~(ot.getUTCMonth()/3)}return{format:function(ot){var ve=me(ot+="",se);return ve.toString=function(){return ot},ve},parse:function(ot){var ve=ge(ot+="",!1);return ve.toString=function(){return ot},ve},utcFormat:function(ot){var ve=me(ot+="",fe);return ve.toString=function(){return ot},ve},utcParse:function(ot){var ve=ge(ot+="",!0);return ve.toString=function(){return ot},ve}}}var R7={"-":"",_:" ",0:"0"},fc=/^\s*\d+/,E0e=/^%/,N0e=/[\\^$*+?|[\]().{}]/g;function Ts(t,e,a){var r=t<0?"-":"",i=(r?-t:t)+"",l=i.length;return r+(l<a?new Array(a-l+1).join(e)+i:i)}function O0e(t){return t.replace(N0e,"\\$&")}function jw(t){return new RegExp("^(?:"+t.map(O0e).join("|")+")","i")}function Gw(t){return new Map(t.map((e,a)=>[e.toLowerCase(),a]))}function V0e(t,e,a){var r=fc.exec(e.slice(a,a+1));return r?(t.w=+r[0],a+r[0].length):-1}function z0e(t,e,a){var r=fc.exec(e.slice(a,a+1));return r?(t.u=+r[0],a+r[0].length):-1}function D0e(t,e,a){var r=fc.exec(e.slice(a,a+2));return r?(t.U=+r[0],a+r[0].length):-1}function M0e(t,e,a){var r=fc.exec(e.slice(a,a+2));return r?(t.V=+r[0],a+r[0].length):-1}function I0e(t,e,a){var r=fc.exec(e.slice(a,a+2));return r?(t.W=+r[0],a+r[0].length):-1}function T7(t,e,a){var r=fc.exec(e.slice(a,a+4));return r?(t.y=+r[0],a+r[0].length):-1}function C7(t,e,a){var r=fc.exec(e.slice(a,a+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),a+r[0].length):-1}function L0e(t,e,a){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(a,a+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),a+r[0].length):-1}function F0e(t,e,a){var r=fc.exec(e.slice(a,a+1));return r?(t.q=r[0]*3-3,a+r[0].length):-1}function k0e(t,e,a){var r=fc.exec(e.slice(a,a+2));return r?(t.m=r[0]-1,a+r[0].length):-1}function S7(t,e,a){var r=fc.exec(e.slice(a,a+2));return r?(t.d=+r[0],a+r[0].length):-1}function U0e(t,e,a){var r=fc.exec(e.slice(a,a+3));return r?(t.m=0,t.d=+r[0],a+r[0].length):-1}function b7(t,e,a){var r=fc.exec(e.slice(a,a+2));return r?(t.H=+r[0],a+r[0].length):-1}function B0e(t,e,a){var r=fc.exec(e.slice(a,a+2));return r?(t.M=+r[0],a+r[0].length):-1}function j0e(t,e,a){var r=fc.exec(e.slice(a,a+2));return r?(t.S=+r[0],a+r[0].length):-1}function G0e(t,e,a){var r=fc.exec(e.slice(a,a+3));return r?(t.L=+r[0],a+r[0].length):-1}function Z0e(t,e,a){var r=fc.exec(e.slice(a,a+6));return r?(t.L=Math.floor(r[0]/1e3),a+r[0].length):-1}function q0e(t,e,a){var r=E0e.exec(e.slice(a,a+1));return r?a+r[0].length:-1}function H0e(t,e,a){var r=fc.exec(e.slice(a));return r?(t.Q=+r[0],a+r[0].length):-1}function $0e(t,e,a){var r=fc.exec(e.slice(a));return r?(t.s=+r[0],a+r[0].length):-1}function x7(t,e){return Ts(t.getDate(),e,2)}function K0e(t,e){return Ts(t.getHours(),e,2)}function W0e(t,e){return Ts(t.getHours()%12||12,e,2)}function Y0e(t,e){return Ts(1+yC.count(Fg(t),t),e,3)}function ZJ(t,e){return Ts(t.getMilliseconds(),e,3)}function X0e(t,e){return ZJ(t,e)+"000"}function J0e(t,e){return Ts(t.getMonth()+1,e,2)}function Q0e(t,e){return Ts(t.getMinutes(),e,2)}function e_e(t,e){return Ts(t.getSeconds(),e,2)}function t_e(t){var e=t.getDay();return e===0?7:e}function a_e(t,e){return Ts(PP.count(Fg(t)-1,t),e,2)}function qJ(t){var e=t.getDay();return e>=4||e===0?I_(t):I_.ceil(t)}function r_e(t,e){return t=qJ(t),Ts(I_.count(Fg(t),t)+(Fg(t).getDay()===4),e,2)}function n_e(t){return t.getDay()}function i_e(t,e){return Ts(Vx.count(Fg(t)-1,t),e,2)}function s_e(t,e){return Ts(t.getFullYear()%100,e,2)}function o_e(t,e){return t=qJ(t),Ts(t.getFullYear()%100,e,2)}function l_e(t,e){return Ts(t.getFullYear()%1e4,e,4)}function u_e(t,e){var a=t.getDay();return t=a>=4||a===0?I_(t):I_.ceil(t),Ts(t.getFullYear()%1e4,e,4)}function c_e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ts(e/60|0,"0",2)+Ts(e%60,"0",2)}function P7(t,e){return Ts(t.getUTCDate(),e,2)}function d_e(t,e){return Ts(t.getUTCHours(),e,2)}function h_e(t,e){return Ts(t.getUTCHours()%12||12,e,2)}function f_e(t,e){return Ts(1+xP.count(kg(t),t),e,3)}function HJ(t,e){return Ts(t.getUTCMilliseconds(),e,3)}function p_e(t,e){return HJ(t,e)+"000"}function m_e(t,e){return Ts(t.getUTCMonth()+1,e,2)}function g_e(t,e){return Ts(t.getUTCMinutes(),e,2)}function y_e(t,e){return Ts(t.getUTCSeconds(),e,2)}function A_e(t){var e=t.getUTCDay();return e===0?7:e}function v_e(t,e){return Ts(EP.count(kg(t)-1,t),e,2)}function $J(t){var e=t.getUTCDay();return e>=4||e===0?L_(t):L_.ceil(t)}function __e(t,e){return t=$J(t),Ts(L_.count(kg(t),t)+(kg(t).getUTCDay()===4),e,2)}function w_e(t){return t.getUTCDay()}function R_e(t,e){return Ts(zx.count(kg(t)-1,t),e,2)}function T_e(t,e){return Ts(t.getUTCFullYear()%100,e,2)}function C_e(t,e){return t=$J(t),Ts(t.getUTCFullYear()%100,e,2)}function S_e(t,e){return Ts(t.getUTCFullYear()%1e4,e,4)}function b_e(t,e){var a=t.getUTCDay();return t=a>=4||a===0?L_(t):L_.ceil(t),Ts(t.getUTCFullYear()%1e4,e,4)}function x_e(){return"+0000"}function E7(){return"%"}function N7(t){return+t}function O7(t){return Math.floor(+t/1e3)}var U0,KJ,WJ;P_e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function P_e(t){return U0=P0e(t),KJ=U0.format,U0.parse,WJ=U0.utcFormat,U0.utcParse,U0}function E_e(t){return new Date(t)}function N_e(t){return t instanceof Date?+t:+new Date(+t)}function R4(t,e,a,r,i,l,c,n,v,R){var x=l4(),N=x.invert,L=x.domain,F=R(".%L"),j=R(":%S"),$=R("%I:%M"),H=R("%I %p"),W=R("%a %d"),ee=R("%b %d"),se=R("%B"),fe=R("%Y");function le(me){return(v(me)<me?F:n(me)<me?j:c(me)<me?$:l(me)<me?H:r(me)<me?i(me)<me?W:ee:a(me)<me?se:fe)(me)}return x.invert=function(me){return new Date(N(me))},x.domain=function(me){return arguments.length?L(Array.from(me,N_e)):L().map(E_e)},x.ticks=function(me){var ge=L();return t(ge[0],ge[ge.length-1],me??10)},x.tickFormat=function(me,ge){return ge==null?le:R(ge)},x.nice=function(me){var ge=L();return(!me||typeof me.range!="function")&&(me=e(ge[0],ge[ge.length-1],me??10)),me?L(MJ(ge,me)):x},x.copy=function(){return gC(x,R4(t,e,a,r,i,l,c,n,v,R))},x}function O_e(){return ip.apply(R4(b0e,x0e,Fg,_4,PP,yC,A4,g4,mv,KJ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function V_e(){return ip.apply(R4(C0e,S0e,kg,w4,EP,xP,v4,y4,mv,WJ).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function NP(){var t=0,e=1,a,r,i,l,c=lh,n=!1,v;function R(N){return N==null||isNaN(N=+N)?v:c(i===0?.5:(N=(l(N)-a)*i,n?Math.max(0,Math.min(1,N)):N))}R.domain=function(N){return arguments.length?([t,e]=N,a=l(t=+t),r=l(e=+e),i=a===r?0:1/(r-a),R):[t,e]},R.clamp=function(N){return arguments.length?(n=!!N,R):n},R.interpolator=function(N){return arguments.length?(c=N,R):c};function x(N){return function(L){var F,j;return arguments.length?([F,j]=L,c=N(F,j),R):[c(0),c(1)]}}return R.range=x(w1),R.rangeRound=x(o4),R.unknown=function(N){return arguments.length?(v=N,R):v},function(N){return l=N,a=N(t),r=N(e),i=a===r?0:1/(r-a),R}}function hA(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function YJ(){var t=dA(NP()(lh));return t.copy=function(){return hA(t,YJ())},Zg.apply(t,arguments)}function XJ(){var t=d4(NP()).domain([1,10]);return t.copy=function(){return hA(t,XJ()).base(t.base())},Zg.apply(t,arguments)}function JJ(){var t=h4(NP());return t.copy=function(){return hA(t,JJ()).constant(t.constant())},Zg.apply(t,arguments)}function T4(){var t=f4(NP());return t.copy=function(){return hA(t,T4()).exponent(t.exponent())},Zg.apply(t,arguments)}function z_e(){return T4.apply(null,arguments).exponent(.5)}function QJ(){var t=[],e=lh;function a(r){if(r!=null&&!isNaN(r=+r))return e((pC(t,r,1)-1)/(t.length-1))}return a.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Ky),a},a.interpolator=function(r){return arguments.length?(e=r,a):e},a.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},a.quantiles=function(r){return Array.from({length:r+1},(i,l)=>vve(t,l/r))},a.copy=function(){return QJ(e).domain(t)},Zg.apply(a,arguments)}function OP(){var t=0,e=.5,a=1,r=1,i,l,c,n,v,R=lh,x,N=!1,L;function F($){return isNaN($=+$)?L:($=.5+(($=+x($))-l)*(r*$<r*l?n:v),R(N?Math.max(0,Math.min(1,$)):$))}F.domain=function($){return arguments.length?([t,e,a]=$,i=x(t=+t),l=x(e=+e),c=x(a=+a),n=i===l?0:.5/(l-i),v=l===c?0:.5/(c-l),r=l<i?-1:1,F):[t,e,a]},F.clamp=function($){return arguments.length?(N=!!$,F):N},F.interpolator=function($){return arguments.length?(R=$,F):R};function j($){return function(H){var W,ee,se;return arguments.length?([W,ee,se]=H,R=qve($,[W,ee,se]),F):[R(0),R(.5),R(1)]}}return F.range=j(w1),F.rangeRound=j(o4),F.unknown=function($){return arguments.length?(L=$,F):L},function($){return x=$,i=$(t),l=$(e),c=$(a),n=i===l?0:.5/(l-i),v=l===c?0:.5/(c-l),r=l<i?-1:1,F}}function eQ(){var t=dA(OP()(lh));return t.copy=function(){return hA(t,eQ())},Zg.apply(t,arguments)}function tQ(){var t=d4(OP()).domain([.1,1,10]);return t.copy=function(){return hA(t,tQ()).base(t.base())},Zg.apply(t,arguments)}function aQ(){var t=h4(OP());return t.copy=function(){return hA(t,aQ()).constant(t.constant())},Zg.apply(t,arguments)}function C4(){var t=f4(OP());return t.copy=function(){return hA(t,C4()).exponent(t.exponent())},Zg.apply(t,arguments)}function D_e(){return C4.apply(null,arguments).exponent(.5)}const V7=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:iT,scaleDiverging:eQ,scaleDivergingLog:tQ,scaleDivergingPow:C4,scaleDivergingSqrt:D_e,scaleDivergingSymlog:aQ,scaleIdentity:DJ,scaleImplicit:kM,scaleLinear:Nx,scaleLog:IJ,scaleOrdinal:n4,scalePoint:RR,scalePow:p4,scaleQuantile:kJ,scaleQuantize:UJ,scaleRadial:FJ,scaleSequential:YJ,scaleSequentialLog:XJ,scaleSequentialPow:T4,scaleSequentialQuantile:QJ,scaleSequentialSqrt:z_e,scaleSequentialSymlog:JJ,scaleSqrt:p0e,scaleSymlog:LJ,scaleThreshold:BJ,scaleTime:O_e,scaleUtc:V_e,tickFormat:zJ},Symbol.toStringTag,{value:"Module"}));var t5,z7;function VP(){if(z7)return t5;z7=1;var t=y1();function e(a,r,i){for(var l=-1,c=a.length;++l<c;){var n=a[l],v=r(n);if(v!=null&&(R===void 0?v===v&&!t(v):i(v,R)))var R=v,x=n}return x}return t5=e,t5}var a5,D7;function rQ(){if(D7)return a5;D7=1;function t(e,a){return e>a}return a5=t,a5}var r5,M7;function M_e(){if(M7)return r5;M7=1;var t=VP(),e=rQ(),a=_1();function r(i){return i&&i.length?t(i,a,e):void 0}return r5=r,r5}var I_e=M_e();const Uy=ss(I_e);var n5,I7;function nQ(){if(I7)return n5;I7=1;function t(e,a){return e<a}return n5=t,n5}var i5,L7;function L_e(){if(L7)return i5;L7=1;var t=VP(),e=nQ(),a=_1();function r(i){return i&&i.length?t(i,a,e):void 0}return i5=r,i5}var F_e=L_e();const zP=ss(F_e);var s5,F7;function k_e(){if(F7)return s5;F7=1;var t=BL(),e=Xm(),a=hJ(),r=kh();function i(l,c){var n=r(l)?t:a;return n(l,e(c,3))}return s5=i,s5}var o5,k7;function U_e(){if(k7)return o5;k7=1;var t=cJ(),e=k_e();function a(r,i){return t(e(r,i),1)}return o5=a,o5}var B_e=U_e();const j_e=ss(B_e);var l5,U7;function G_e(){if(U7)return l5;U7=1;var t=QL();function e(a,r){return t(a,r)}return l5=e,l5}var Z_e=G_e();const eA=ss(Z_e);var R1=1e9,q_e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},b4,el=!0,rp="[DecimalError] ",Rv=rp+"Invalid argument: ",S4=rp+"Exponent out of range: ",T1=Math.floor,iv=Math.pow,H_e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,pf,lc=1e7,Io=7,iQ=9007199254740991,Dx=T1(iQ/Io),tn={};tn.absoluteValue=tn.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};tn.comparedTo=tn.cmp=function(t){var e,a,r,i,l=this;if(t=new l.constructor(t),l.s!==t.s)return l.s||-t.s;if(l.e!==t.e)return l.e>t.e^l.s<0?1:-1;for(r=l.d.length,i=t.d.length,e=0,a=r<i?r:i;e<a;++e)if(l.d[e]!==t.d[e])return l.d[e]>t.d[e]^l.s<0?1:-1;return r===i?0:r>i^l.s<0?1:-1};tn.decimalPlaces=tn.dp=function(){var t=this,e=t.d.length-1,a=(e-t.e)*Io;if(e=t.d[e],e)for(;e%10==0;e/=10)a--;return a<0?0:a};tn.dividedBy=tn.div=function(t){return Ng(this,new this.constructor(t))};tn.dividedToIntegerBy=tn.idiv=function(t){var e=this,a=e.constructor;return po(Ng(e,new a(t),0,1),a.precision)};tn.equals=tn.eq=function(t){return!this.cmp(t)};tn.exponent=function(){return vu(this)};tn.greaterThan=tn.gt=function(t){return this.cmp(t)>0};tn.greaterThanOrEqualTo=tn.gte=function(t){return this.cmp(t)>=0};tn.isInteger=tn.isint=function(){return this.e>this.d.length-2};tn.isNegative=tn.isneg=function(){return this.s<0};tn.isPositive=tn.ispos=function(){return this.s>0};tn.isZero=function(){return this.s===0};tn.lessThan=tn.lt=function(t){return this.cmp(t)<0};tn.lessThanOrEqualTo=tn.lte=function(t){return this.cmp(t)<1};tn.logarithm=tn.log=function(t){var e,a=this,r=a.constructor,i=r.precision,l=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(pf))throw Error(rp+"NaN");if(a.s<1)throw Error(rp+(a.s?"NaN":"-Infinity"));return a.eq(pf)?new r(0):(el=!1,e=Ng(cT(a,l),cT(t,l),l),el=!0,po(e,i))};tn.minus=tn.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?lQ(e,t):sQ(e,(t.s=-t.s,t))};tn.modulo=tn.mod=function(t){var e,a=this,r=a.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(rp+"NaN");return a.s?(el=!1,e=Ng(a,t,0,1).times(t),el=!0,a.minus(e)):po(new r(a),i)};tn.naturalExponential=tn.exp=function(){return oQ(this)};tn.naturalLogarithm=tn.ln=function(){return cT(this)};tn.negated=tn.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};tn.plus=tn.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?sQ(e,t):lQ(e,(t.s=-t.s,t))};tn.precision=tn.sd=function(t){var e,a,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Rv+t);if(e=vu(i)+1,r=i.d.length-1,a=r*Io+1,r=i.d[r],r){for(;r%10==0;r/=10)a--;for(r=i.d[0];r>=10;r/=10)a++}return t&&e>a?e:a};tn.squareRoot=tn.sqrt=function(){var t,e,a,r,i,l,c,n=this,v=n.constructor;if(n.s<1){if(!n.s)return new v(0);throw Error(rp+"NaN")}for(t=vu(n),el=!1,i=Math.sqrt(+n),i==0||i==1/0?(e=zm(n.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=T1((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new v(e)):r=new v(i.toString()),a=v.precision,i=c=a+3;;)if(l=r,r=l.plus(Ng(n,l,c+2)).times(.5),zm(l.d).slice(0,c)===(e=zm(r.d)).slice(0,c)){if(e=e.slice(c-3,c+1),i==c&&e=="4999"){if(po(l,a+1,0),l.times(l).eq(n)){r=l;break}}else if(e!="9999")break;c+=4}return el=!0,po(r,a)};tn.times=tn.mul=function(t){var e,a,r,i,l,c,n,v,R,x=this,N=x.constructor,L=x.d,F=(t=new N(t)).d;if(!x.s||!t.s)return new N(0);for(t.s*=x.s,a=x.e+t.e,v=L.length,R=F.length,v<R&&(l=L,L=F,F=l,c=v,v=R,R=c),l=[],c=v+R,r=c;r--;)l.push(0);for(r=R;--r>=0;){for(e=0,i=v+r;i>r;)n=l[i]+F[r]*L[i-r-1]+e,l[i--]=n%lc|0,e=n/lc|0;l[i]=(l[i]+e)%lc|0}for(;!l[--c];)l.pop();return e?++a:l.shift(),t.d=l,t.e=a,el?po(t,N.precision):t};tn.toDecimalPlaces=tn.todp=function(t,e){var a=this,r=a.constructor;return a=new r(a),t===void 0?a:($m(t,0,R1),e===void 0?e=r.rounding:$m(e,0,8),po(a,t+vu(a)+1,e))};tn.toExponential=function(t,e){var a,r=this,i=r.constructor;return t===void 0?a=Iv(r,!0):($m(t,0,R1),e===void 0?e=i.rounding:$m(e,0,8),r=po(new i(r),t+1,e),a=Iv(r,!0,t+1)),a};tn.toFixed=function(t,e){var a,r,i=this,l=i.constructor;return t===void 0?Iv(i):($m(t,0,R1),e===void 0?e=l.rounding:$m(e,0,8),r=po(new l(i),t+vu(i)+1,e),a=Iv(r.abs(),!1,t+vu(r)+1),i.isneg()&&!i.isZero()?"-"+a:a)};tn.toInteger=tn.toint=function(){var t=this,e=t.constructor;return po(new e(t),vu(t)+1,e.rounding)};tn.toNumber=function(){return+this};tn.toPower=tn.pow=function(t){var e,a,r,i,l,c,n=this,v=n.constructor,R=12,x=+(t=new v(t));if(!t.s)return new v(pf);if(n=new v(n),!n.s){if(t.s<1)throw Error(rp+"Infinity");return n}if(n.eq(pf))return n;if(r=v.precision,t.eq(pf))return po(n,r);if(e=t.e,a=t.d.length-1,c=e>=a,l=n.s,c){if((a=x<0?-x:x)<=iQ){for(i=new v(pf),e=Math.ceil(r/Io+4),el=!1;a%2&&(i=i.times(n),j7(i.d,e)),a=T1(a/2),a!==0;)n=n.times(n),j7(n.d,e);return el=!0,t.s<0?new v(pf).div(i):po(i,r)}}else if(l<0)throw Error(rp+"NaN");return l=l<0&&t.d[Math.max(e,a)]&1?-1:1,n.s=1,el=!1,i=t.times(cT(n,r+R)),el=!0,i=oQ(i),i.s=l,i};tn.toPrecision=function(t,e){var a,r,i=this,l=i.constructor;return t===void 0?(a=vu(i),r=Iv(i,a<=l.toExpNeg||a>=l.toExpPos)):($m(t,1,R1),e===void 0?e=l.rounding:$m(e,0,8),i=po(new l(i),t,e),a=vu(i),r=Iv(i,t<=a||a<=l.toExpNeg,t)),r};tn.toSignificantDigits=tn.tosd=function(t,e){var a=this,r=a.constructor;return t===void 0?(t=r.precision,e=r.rounding):($m(t,1,R1),e===void 0?e=r.rounding:$m(e,0,8)),po(new r(a),t,e)};tn.toString=tn.valueOf=tn.val=tn.toJSON=tn[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=vu(t),a=t.constructor;return Iv(t,e<=a.toExpNeg||e>=a.toExpPos)};function sQ(t,e){var a,r,i,l,c,n,v,R,x=t.constructor,N=x.precision;if(!t.s||!e.s)return e.s||(e=new x(t)),el?po(e,N):e;if(v=t.d,R=e.d,c=t.e,i=e.e,v=v.slice(),l=c-i,l){for(l<0?(r=v,l=-l,n=R.length):(r=R,i=c,n=v.length),c=Math.ceil(N/Io),n=c>n?c+1:n+1,l>n&&(l=n,r.length=1),r.reverse();l--;)r.push(0);r.reverse()}for(n=v.length,l=R.length,n-l<0&&(l=n,r=R,R=v,v=r),a=0;l;)a=(v[--l]=v[l]+R[l]+a)/lc|0,v[l]%=lc;for(a&&(v.unshift(a),++i),n=v.length;v[--n]==0;)v.pop();return e.d=v,e.e=i,el?po(e,N):e}function $m(t,e,a){if(t!==~~t||t<e||t>a)throw Error(Rv+t)}function zm(t){var e,a,r,i=t.length-1,l="",c=t[0];if(i>0){for(l+=c,e=1;e<i;e++)r=t[e]+"",a=Io-r.length,a&&(l+=Oy(a)),l+=r;c=t[e],r=c+"",a=Io-r.length,a&&(l+=Oy(a))}else if(c===0)return"0";for(;c%10===0;)c/=10;return l+c}var Ng=function(){function t(r,i){var l,c=0,n=r.length;for(r=r.slice();n--;)l=r[n]*i+c,r[n]=l%lc|0,c=l/lc|0;return c&&r.unshift(c),r}function e(r,i,l,c){var n,v;if(l!=c)v=l>c?1:-1;else for(n=v=0;n<l;n++)if(r[n]!=i[n]){v=r[n]>i[n]?1:-1;break}return v}function a(r,i,l){for(var c=0;l--;)r[l]-=c,c=r[l]<i[l]?1:0,r[l]=c*lc+r[l]-i[l];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,l,c){var n,v,R,x,N,L,F,j,$,H,W,ee,se,fe,le,me,ge,Re,we=r.constructor,Ve=r.s==i.s?1:-1,oe=r.d,_e=i.d;if(!r.s)return new we(r);if(!i.s)throw Error(rp+"Division by zero");for(v=r.e-i.e,ge=_e.length,le=oe.length,F=new we(Ve),j=F.d=[],R=0;_e[R]==(oe[R]||0);)++R;if(_e[R]>(oe[R]||0)&&--v,l==null?ee=l=we.precision:c?ee=l+(vu(r)-vu(i))+1:ee=l,ee<0)return new we(0);if(ee=ee/Io+2|0,R=0,ge==1)for(x=0,_e=_e[0],ee++;(R<le||x)&&ee--;R++)se=x*lc+(oe[R]||0),j[R]=se/_e|0,x=se%_e|0;else{for(x=lc/(_e[0]+1)|0,x>1&&(_e=t(_e,x),oe=t(oe,x),ge=_e.length,le=oe.length),fe=ge,$=oe.slice(0,ge),H=$.length;H<ge;)$[H++]=0;Re=_e.slice(),Re.unshift(0),me=_e[0],_e[1]>=lc/2&&++me;do x=0,n=e(_e,$,ge,H),n<0?(W=$[0],ge!=H&&(W=W*lc+($[1]||0)),x=W/me|0,x>1?(x>=lc&&(x=lc-1),N=t(_e,x),L=N.length,H=$.length,n=e(N,$,L,H),n==1&&(x--,a(N,ge<L?Re:_e,L))):(x==0&&(n=x=1),N=_e.slice()),L=N.length,L<H&&N.unshift(0),a($,N,H),n==-1&&(H=$.length,n=e(_e,$,ge,H),n<1&&(x++,a($,ge<H?Re:_e,H))),H=$.length):n===0&&(x++,$=[0]),j[R++]=x,n&&$[0]?$[H++]=oe[fe]||0:($=[oe[fe]],H=1);while((fe++<le||$[0]!==void 0)&&ee--)}return j[0]||j.shift(),F.e=v,po(F,c?l+vu(F)+1:l)}}();function oQ(t,e){var a,r,i,l,c,n,v=0,R=0,x=t.constructor,N=x.precision;if(vu(t)>16)throw Error(S4+vu(t));if(!t.s)return new x(pf);for(el=!1,n=N,c=new x(.03125);t.abs().gte(.1);)t=t.times(c),R+=5;for(r=Math.log(iv(2,R))/Math.LN10*2+5|0,n+=r,a=i=l=new x(pf),x.precision=n;;){if(i=po(i.times(t),n),a=a.times(++v),c=l.plus(Ng(i,a,n)),zm(c.d).slice(0,n)===zm(l.d).slice(0,n)){for(;R--;)l=po(l.times(l),n);return x.precision=N,e==null?(el=!0,po(l,N)):l}l=c}}function vu(t){for(var e=t.e*Io,a=t.d[0];a>=10;a/=10)e++;return e}function u5(t,e,a){if(e>t.LN10.sd())throw el=!0,a&&(t.precision=a),Error(rp+"LN10 precision limit exceeded");return po(new t(t.LN10),e)}function Oy(t){for(var e="";t--;)e+="0";return e}function cT(t,e){var a,r,i,l,c,n,v,R,x,N=1,L=10,F=t,j=F.d,$=F.constructor,H=$.precision;if(F.s<1)throw Error(rp+(F.s?"NaN":"-Infinity"));if(F.eq(pf))return new $(0);if(e==null?(el=!1,R=H):R=e,F.eq(10))return e==null&&(el=!0),u5($,R);if(R+=L,$.precision=R,a=zm(j),r=a.charAt(0),l=vu(F),Math.abs(l)<15e14){for(;r<7&&r!=1||r==1&&a.charAt(1)>3;)F=F.times(t),a=zm(F.d),r=a.charAt(0),N++;l=vu(F),r>1?(F=new $("0."+a),l++):F=new $(r+"."+a.slice(1))}else return v=u5($,R+2,H).times(l+""),F=cT(new $(r+"."+a.slice(1)),R-L).plus(v),$.precision=H,e==null?(el=!0,po(F,H)):F;for(n=c=F=Ng(F.minus(pf),F.plus(pf),R),x=po(F.times(F),R),i=3;;){if(c=po(c.times(x),R),v=n.plus(Ng(c,new $(i),R)),zm(v.d).slice(0,R)===zm(n.d).slice(0,R))return n=n.times(2),l!==0&&(n=n.plus(u5($,R+2,H).times(l+""))),n=Ng(n,new $(N),R),$.precision=H,e==null?(el=!0,po(n,H)):n;n=v,i+=2}}function B7(t,e){var a,r,i;for((a=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(a<0&&(a=r),a+=+e.slice(r+1),e=e.substring(0,r)):a<0&&(a=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,a=a-r-1,t.e=T1(a/Io),t.d=[],r=(a+1)%Io,a<0&&(r+=Io),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Io;r<i;)t.d.push(+e.slice(r,r+=Io));e=e.slice(r),r=Io-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),el&&(t.e>Dx||t.e<-Dx))throw Error(S4+a)}else t.s=0,t.e=0,t.d=[0];return t}function po(t,e,a){var r,i,l,c,n,v,R,x,N=t.d;for(c=1,l=N[0];l>=10;l/=10)c++;if(r=e-c,r<0)r+=Io,i=e,R=N[x=0];else{if(x=Math.ceil((r+1)/Io),l=N.length,x>=l)return t;for(R=l=N[x],c=1;l>=10;l/=10)c++;r%=Io,i=r-Io+c}if(a!==void 0&&(l=iv(10,c-i-1),n=R/l%10|0,v=e<0||N[x+1]!==void 0||R%l,v=a<4?(n||v)&&(a==0||a==(t.s<0?3:2)):n>5||n==5&&(a==4||v||a==6&&(r>0?i>0?R/iv(10,c-i):0:N[x-1])%10&1||a==(t.s<0?8:7))),e<1||!N[0])return v?(l=vu(t),N.length=1,e=e-l-1,N[0]=iv(10,(Io-e%Io)%Io),t.e=T1(-e/Io)||0):(N.length=1,N[0]=t.e=t.s=0),t;if(r==0?(N.length=x,l=1,x--):(N.length=x+1,l=iv(10,Io-r),N[x]=i>0?(R/iv(10,c-i)%iv(10,i)|0)*l:0),v)for(;;)if(x==0){(N[0]+=l)==lc&&(N[0]=1,++t.e);break}else{if(N[x]+=l,N[x]!=lc)break;N[x--]=0,l=1}for(r=N.length;N[--r]===0;)N.pop();if(el&&(t.e>Dx||t.e<-Dx))throw Error(S4+vu(t));return t}function lQ(t,e){var a,r,i,l,c,n,v,R,x,N,L=t.constructor,F=L.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new L(t),el?po(e,F):e;if(v=t.d,N=e.d,r=e.e,R=t.e,v=v.slice(),c=R-r,c){for(x=c<0,x?(a=v,c=-c,n=N.length):(a=N,r=R,n=v.length),i=Math.max(Math.ceil(F/Io),n)+2,c>i&&(c=i,a.length=1),a.reverse(),i=c;i--;)a.push(0);a.reverse()}else{for(i=v.length,n=N.length,x=i<n,x&&(n=i),i=0;i<n;i++)if(v[i]!=N[i]){x=v[i]<N[i];break}c=0}for(x&&(a=v,v=N,N=a,e.s=-e.s),n=v.length,i=N.length-n;i>0;--i)v[n++]=0;for(i=N.length;i>c;){if(v[--i]<N[i]){for(l=i;l&&v[--l]===0;)v[l]=lc-1;--v[l],v[i]+=lc}v[i]-=N[i]}for(;v[--n]===0;)v.pop();for(;v[0]===0;v.shift())--r;return v[0]?(e.d=v,e.e=r,el?po(e,F):e):new L(0)}function Iv(t,e,a){var r,i=vu(t),l=zm(t.d),c=l.length;return e?(a&&(r=a-c)>0?l=l.charAt(0)+"."+l.slice(1)+Oy(r):c>1&&(l=l.charAt(0)+"."+l.slice(1)),l=l+(i<0?"e":"e+")+i):i<0?(l="0."+Oy(-i-1)+l,a&&(r=a-c)>0&&(l+=Oy(r))):i>=c?(l+=Oy(i+1-c),a&&(r=a-i-1)>0&&(l=l+"."+Oy(r))):((r=i+1)<c&&(l=l.slice(0,r)+"."+l.slice(r)),a&&(r=a-c)>0&&(i+1===c&&(l+="."),l+=Oy(r))),t.s<0?"-"+l:l}function j7(t,e){if(t.length>e)return t.length=e,!0}function uQ(t){var e,a,r;function i(l){var c=this;if(!(c instanceof i))return new i(l);if(c.constructor=i,l instanceof i){c.s=l.s,c.e=l.e,c.d=(l=l.d)?l.slice():l;return}if(typeof l=="number"){if(l*0!==0)throw Error(Rv+l);if(l>0)c.s=1;else if(l<0)l=-l,c.s=-1;else{c.s=0,c.e=0,c.d=[0];return}if(l===~~l&&l<1e7){c.e=0,c.d=[l];return}return B7(c,l.toString())}else if(typeof l!="string")throw Error(Rv+l);if(l.charCodeAt(0)===45?(l=l.slice(1),c.s=-1):c.s=1,H_e.test(l))B7(c,l);else throw Error(Rv+l)}if(i.prototype=tn,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=uQ,i.config=i.set=$_e,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(a=r[e++])||(t[a]=this[a]);return i.config(t),i}function $_e(t){if(!t||typeof t!="object")throw Error(rp+"Object expected");var e,a,r,i=["precision",1,R1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[a=i[e]])!==void 0)if(T1(r)===r&&r>=i[e+1]&&r<=i[e+2])this[a]=r;else throw Error(Rv+a+": "+r);if((r=t[a="LN10"])!==void 0)if(r==Math.LN10)this[a]=new this(r);else throw Error(Rv+a+": "+r);return this}var b4=uQ(q_e);pf=new b4(1);const ro=b4;function K_e(t){return J_e(t)||X_e(t)||Y_e(t)||W_e()}function W_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y_e(t,e){if(t){if(typeof t=="string")return GM(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return GM(t,e)}}function X_e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function J_e(t){if(Array.isArray(t))return GM(t)}function GM(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var Q_e=function(e){return e},cQ={},dQ=function(e){return e===cQ},G7=function(e){return function a(){return arguments.length===0||arguments.length===1&&dQ(arguments.length<=0?void 0:arguments[0])?a:e.apply(void 0,arguments)}},e1e=function t(e,a){return e===1?a:G7(function(){for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];var c=i.filter(function(n){return n!==cQ}).length;return c>=e?a.apply(void 0,i):t(e-c,G7(function(){for(var n=arguments.length,v=new Array(n),R=0;R<n;R++)v[R]=arguments[R];var x=i.map(function(N){return dQ(N)?v.shift():N});return a.apply(void 0,K_e(x).concat(v))}))})},DP=function(e){return e1e(e.length,e)},ZM=function(e,a){for(var r=[],i=e;i<a;++i)r[i-e]=i;return r},t1e=DP(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(a){return e[a]}).map(t)}),a1e=function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];if(!a.length)return Q_e;var i=a.reverse(),l=i[0],c=i.slice(1);return function(){return c.reduce(function(n,v){return v(n)},l.apply(void 0,arguments))}},qM=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},hQ=function(e){var a=null,r=null;return function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];return a&&l.every(function(n,v){return n===a[v]})||(a=l,r=e.apply(void 0,l)),r}};function r1e(t){var e;return t===0?e=1:e=Math.floor(new ro(t).abs().log(10).toNumber())+1,e}function n1e(t,e,a){for(var r=new ro(t),i=0,l=[];r.lt(e)&&i<1e5;)l.push(r.toNumber()),r=r.add(a),i++;return l}var i1e=DP(function(t,e,a){var r=+t,i=+e;return r+a*(i-r)}),s1e=DP(function(t,e,a){var r=e-+t;return r=r||1/0,(a-t)/r}),o1e=DP(function(t,e,a){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(a-t)/r))});const MP={rangeStep:n1e,getDigitCount:r1e,interpolateNumber:i1e,uninterpolateNumber:s1e,uninterpolateTruncation:o1e};function HM(t){return c1e(t)||u1e(t)||fQ(t)||l1e()}function l1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u1e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function c1e(t){if(Array.isArray(t))return $M(t)}function dT(t,e){return f1e(t)||h1e(t,e)||fQ(t,e)||d1e()}function d1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fQ(t,e){if(t){if(typeof t=="string")return $M(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return $M(t,e)}}function $M(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function h1e(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var a=[],r=!0,i=!1,l=void 0;try{for(var c=t[Symbol.iterator](),n;!(r=(n=c.next()).done)&&(a.push(n.value),!(e&&a.length===e));r=!0);}catch(v){i=!0,l=v}finally{try{!r&&c.return!=null&&c.return()}finally{if(i)throw l}}return a}}function f1e(t){if(Array.isArray(t))return t}function pQ(t){var e=dT(t,2),a=e[0],r=e[1],i=a,l=r;return a>r&&(i=r,l=a),[i,l]}function mQ(t,e,a){if(t.lte(0))return new ro(0);var r=MP.getDigitCount(t.toNumber()),i=new ro(10).pow(r),l=t.div(i),c=r!==1?.05:.1,n=new ro(Math.ceil(l.div(c).toNumber())).add(a).mul(c),v=n.mul(i);return e?v:new ro(Math.ceil(v))}function p1e(t,e,a){var r=1,i=new ro(t);if(!i.isint()&&a){var l=Math.abs(t);l<1?(r=new ro(10).pow(MP.getDigitCount(t)-1),i=new ro(Math.floor(i.div(r).toNumber())).mul(r)):l>1&&(i=new ro(Math.floor(t)))}else t===0?i=new ro(Math.floor((e-1)/2)):a||(i=new ro(Math.floor(t)));var c=Math.floor((e-1)/2),n=a1e(t1e(function(v){return i.add(new ro(v-c).mul(r)).toNumber()}),ZM);return n(0,e)}function gQ(t,e,a,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(a-1)))return{step:new ro(0),tickMin:new ro(0),tickMax:new ro(0)};var l=mQ(new ro(e).sub(t).div(a-1),r,i),c;t<=0&&e>=0?c=new ro(0):(c=new ro(t).add(e).div(2),c=c.sub(new ro(c).mod(l)));var n=Math.ceil(c.sub(t).div(l).toNumber()),v=Math.ceil(new ro(e).sub(c).div(l).toNumber()),R=n+v+1;return R>a?gQ(t,e,a,r,i+1):(R<a&&(v=e>0?v+(a-R):v,n=e>0?n:n+(a-R)),{step:l,tickMin:c.sub(new ro(n).mul(l)),tickMax:c.add(new ro(v).mul(l))})}function m1e(t){var e=dT(t,2),a=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,c=Math.max(i,2),n=pQ([a,r]),v=dT(n,2),R=v[0],x=v[1];if(R===-1/0||x===1/0){var N=x===1/0?[R].concat(HM(ZM(0,i-1).map(function(){return 1/0}))):[].concat(HM(ZM(0,i-1).map(function(){return-1/0})),[x]);return a>r?qM(N):N}if(R===x)return p1e(R,i,l);var L=gQ(R,x,c,l),F=L.step,j=L.tickMin,$=L.tickMax,H=MP.rangeStep(j,$.add(new ro(.1).mul(F)),F);return a>r?qM(H):H}function g1e(t,e){var a=dT(t,2),r=a[0],i=a[1],l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,c=pQ([r,i]),n=dT(c,2),v=n[0],R=n[1];if(v===-1/0||R===1/0)return[r,i];if(v===R)return[v];var x=Math.max(e,2),N=mQ(new ro(R).sub(v).div(x-1),l,0),L=[].concat(HM(MP.rangeStep(new ro(v),new ro(R).sub(new ro(.99).mul(N)),N)),[R]);return r>i?qM(L):L}var y1e=hQ(m1e),A1e=hQ(g1e),v1e="Invariant failed";function Lv(t,e){throw new Error(v1e)}var _1e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function F_(t){"@babel/helpers - typeof";return F_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F_(t)}function Mx(){return Mx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Mx.apply(this,arguments)}function w1e(t,e){return S1e(t)||C1e(t,e)||T1e(t,e)||R1e()}function R1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T1e(t,e){if(t){if(typeof t=="string")return Z7(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Z7(t,e)}}function Z7(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function C1e(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function S1e(t){if(Array.isArray(t))return t}function b1e(t,e){if(t==null)return{};var a=x1e(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function x1e(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function P1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E1e(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vQ(r.key),r)}}function N1e(t,e,a){return e&&E1e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function O1e(t,e,a){return e=Ix(e),V1e(t,yQ()?Reflect.construct(e,a||[],Ix(t).constructor):e.apply(t,a))}function V1e(t,e){if(e&&(F_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return z1e(t)}function z1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yQ=function(){return!!t})()}function Ix(t){return Ix=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Ix(t)}function D1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KM(t,e)}function KM(t,e){return KM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},KM(t,e)}function AQ(t,e,a){return e=vQ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function vQ(t){var e=M1e(t,"string");return F_(e)=="symbol"?e:e+""}function M1e(t,e){if(F_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(F_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var C1=function(t){function e(){return P1e(this,e),O1e(this,e,arguments)}return D1e(e,t),N1e(e,[{key:"render",value:function(){var r=this.props,i=r.offset,l=r.layout,c=r.width,n=r.dataKey,v=r.data,R=r.dataPointFormatter,x=r.xAxis,N=r.yAxis,L=b1e(r,_1e),F=gn(L,!1);this.props.direction==="x"&&x.type!=="number"&&Lv();var j=v.map(function($){var H=R($,n),W=H.x,ee=H.y,se=H.value,fe=H.errorVal;if(!fe)return null;var le=[],me,ge;if(Array.isArray(fe)){var Re=w1e(fe,2);me=Re[0],ge=Re[1]}else me=ge=fe;if(l==="vertical"){var we=x.scale,Ve=ee+i,oe=Ve+c,_e=Ve-c,Fe=we(se-me),Ee=we(se+ge);le.push({x1:Ee,y1:oe,x2:Ee,y2:_e}),le.push({x1:Fe,y1:Ve,x2:Ee,y2:Ve}),le.push({x1:Fe,y1:oe,x2:Fe,y2:_e})}else if(l==="horizontal"){var ze=N.scale,Se=W+i,je=Se-c,Ue=Se+c,$e=ze(se-me),Be=ze(se+ge);le.push({x1:je,y1:Be,x2:Ue,y2:Be}),le.push({x1:Se,y1:$e,x2:Se,y2:Be}),le.push({x1:je,y1:$e,x2:Ue,y2:$e})}return Ot.createElement(_i,Mx({className:"recharts-errorBar",key:"bar-".concat(le.map(function(qe){return"".concat(qe.x1,"-").concat(qe.x2,"-").concat(qe.y1,"-").concat(qe.y2)}))},F),le.map(function(qe){return Ot.createElement("line",Mx({},qe,{key:"line-".concat(qe.x1,"-").concat(qe.x2,"-").concat(qe.y1,"-").concat(qe.y2)}))}))});return Ot.createElement(_i,{className:"recharts-errorBars"},j)}}])}(Ot.Component);AQ(C1,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});AQ(C1,"displayName","ErrorBar");function hT(t){"@babel/helpers - typeof";return hT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hT(t)}function q7(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function QA(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?q7(Object(a),!0).forEach(function(r){I1e(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):q7(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function I1e(t,e,a){return e=L1e(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function L1e(t){var e=F1e(t,"string");return hT(e)=="symbol"?e:e+""}function F1e(t,e){if(hT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(hT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _Q=function(e){var a=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,l=e.legendContent,c=df(a,hf);if(!c)return null;var n=hf.defaultProps,v=n!==void 0?QA(QA({},n),c.props):{},R;return c.props&&c.props.payload?R=c.props&&c.props.payload:l==="children"?R=(r||[]).reduce(function(x,N){var L=N.item,F=N.props,j=F.sectors||F.data||[];return x.concat(j.map(function($){return{type:c.props.iconType||L.props.legendType,value:$.name,color:$.fill,payload:$}}))},[]):R=(r||[]).map(function(x){var N=x.item,L=N.type.defaultProps,F=L!==void 0?QA(QA({},L),N.props):{},j=F.dataKey,$=F.name,H=F.legendType,W=F.hide;return{inactive:W,dataKey:j,type:v.iconType||H||"square",color:x4(N),value:$||j,payload:F}}),QA(QA(QA({},v),hf.getWithHeight(c,i)),{},{payload:R,item:c})};function fT(t){"@babel/helpers - typeof";return fT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fT(t)}function H7(t){return j1e(t)||B1e(t)||U1e(t)||k1e()}function k1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U1e(t,e){if(t){if(typeof t=="string")return WM(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return WM(t,e)}}function B1e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function j1e(t){if(Array.isArray(t))return WM(t)}function WM(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function $7(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function El(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?$7(Object(a),!0).forEach(function(r){m_(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):$7(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function m_(t,e,a){return e=G1e(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function G1e(t){var e=Z1e(t,"string");return fT(e)=="symbol"?e:e+""}function Z1e(t,e){if(fT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(fT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fo(t,e,a){return qn(t)||qn(e)?a:qu(e)?vf(t,e,a):Zn(e)?e(t):a}function TR(t,e,a,r){var i=j_e(t,function(n){return Fo(n,e)});if(a==="number"){var l=i.filter(function(n){return _r(n)||parseFloat(n)});return l.length?[zP(l),Uy(l)]:[1/0,-1/0]}var c=r?i.filter(function(n){return!qn(n)}):i;return c.map(function(n){return qu(n)||n instanceof Date?n:""})}var q1e=function(e){var a,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0,c=-1,n=(a=r==null?void 0:r.length)!==null&&a!==void 0?a:0;if(n<=1)return 0;if(l&&l.axisType==="angleAxis"&&Math.abs(Math.abs(l.range[1]-l.range[0])-360)<=1e-6)for(var v=l.range,R=0;R<n;R++){var x=R>0?i[R-1].coordinate:i[n-1].coordinate,N=i[R].coordinate,L=R>=n-1?i[0].coordinate:i[R+1].coordinate,F=void 0;if(sh(N-x)!==sh(L-N)){var j=[];if(sh(L-N)===sh(v[1]-v[0])){F=L;var $=N+v[1]-v[0];j[0]=Math.min($,($+x)/2),j[1]=Math.max($,($+x)/2)}else{F=x;var H=L+v[1]-v[0];j[0]=Math.min(N,(H+N)/2),j[1]=Math.max(N,(H+N)/2)}var W=[Math.min(N,(F+N)/2),Math.max(N,(F+N)/2)];if(e>W[0]&&e<=W[1]||e>=j[0]&&e<=j[1]){c=i[R].index;break}}else{var ee=Math.min(x,L),se=Math.max(x,L);if(e>(ee+N)/2&&e<=(se+N)/2){c=i[R].index;break}}}else for(var fe=0;fe<n;fe++)if(fe===0&&e<=(r[fe].coordinate+r[fe+1].coordinate)/2||fe>0&&fe<n-1&&e>(r[fe].coordinate+r[fe-1].coordinate)/2&&e<=(r[fe].coordinate+r[fe+1].coordinate)/2||fe===n-1&&e>(r[fe].coordinate+r[fe-1].coordinate)/2){c=r[fe].index;break}return c},x4=function(e){var a,r=e,i=r.type.displayName,l=(a=e.type)!==null&&a!==void 0&&a.defaultProps?El(El({},e.type.defaultProps),e.props):e.props,c=l.stroke,n=l.fill,v;switch(i){case"Line":v=c;break;case"Area":case"Radar":v=c&&c!=="none"?c:n;break;default:v=n;break}return v},H1e=function(e){var a=e.barSize,r=e.totalSize,i=e.stackGroups,l=i===void 0?{}:i;if(!l)return{};for(var c={},n=Object.keys(l),v=0,R=n.length;v<R;v++)for(var x=l[n[v]].stackGroups,N=Object.keys(x),L=0,F=N.length;L<F;L++){var j=x[N[L]],$=j.items,H=j.cateAxisId,W=$.filter(function(ge){return Eg(ge.type).indexOf("Bar")>=0});if(W&&W.length){var ee=W[0].type.defaultProps,se=ee!==void 0?El(El({},ee),W[0].props):W[0].props,fe=se.barSize,le=se[H];c[le]||(c[le]=[]);var me=qn(fe)?a:fe;c[le].push({item:W[0],stackList:W.slice(1),barSize:qn(me)?void 0:oh(me,r,0)})}}return c},$1e=function(e){var a=e.barGap,r=e.barCategoryGap,i=e.bandSize,l=e.sizeList,c=l===void 0?[]:l,n=e.maxBarSize,v=c.length;if(v<1)return null;var R=oh(a,i,0,!0),x,N=[];if(c[0].barSize===+c[0].barSize){var L=!1,F=i/v,j=c.reduce(function(fe,le){return fe+le.barSize||0},0);j+=(v-1)*R,j>=i&&(j-=(v-1)*R,R=0),j>=i&&F>0&&(L=!0,F*=.9,j=v*F);var $=(i-j)/2>>0,H={offset:$-R,size:0};x=c.reduce(function(fe,le){var me={item:le.item,position:{offset:H.offset+H.size+R,size:L?F:le.barSize}},ge=[].concat(H7(fe),[me]);return H=ge[ge.length-1].position,le.stackList&&le.stackList.length&&le.stackList.forEach(function(Re){ge.push({item:Re,position:H})}),ge},N)}else{var W=oh(r,i,0,!0);i-2*W-(v-1)*R<=0&&(R=0);var ee=(i-2*W-(v-1)*R)/v;ee>1&&(ee>>=0);var se=n===+n?Math.min(ee,n):ee;x=c.reduce(function(fe,le,me){var ge=[].concat(H7(fe),[{item:le.item,position:{offset:W+(ee+R)*me+(ee-se)/2,size:se}}]);return le.stackList&&le.stackList.length&&le.stackList.forEach(function(Re){ge.push({item:Re,position:ge[ge.length-1].position})}),ge},N)}return x},K1e=function(e,a,r,i){var l=r.children,c=r.width,n=r.margin,v=c-(n.left||0)-(n.right||0),R=_Q({children:l,legendWidth:v});if(R){var x=i||{},N=x.width,L=x.height,F=R.align,j=R.verticalAlign,$=R.layout;if(($==="vertical"||$==="horizontal"&&j==="middle")&&F!=="center"&&_r(e[F]))return El(El({},e),{},m_({},F,e[F]+(N||0)));if(($==="horizontal"||$==="vertical"&&F==="center")&&j!=="middle"&&_r(e[j]))return El(El({},e),{},m_({},j,e[j]+(L||0)))}return e},W1e=function(e,a,r){return qn(a)?!0:e==="horizontal"?a==="yAxis":e==="vertical"||r==="x"?a==="xAxis":r==="y"?a==="yAxis":!0},wQ=function(e,a,r,i,l){var c=a.props.children,n=hh(c,C1).filter(function(R){return W1e(i,l,R.props.direction)});if(n&&n.length){var v=n.map(function(R){return R.props.dataKey});return e.reduce(function(R,x){var N=Fo(x,r);if(qn(N))return R;var L=Array.isArray(N)?[zP(N),Uy(N)]:[N,N],F=v.reduce(function(j,$){var H=Fo(x,$,0),W=L[0]-Math.abs(Array.isArray(H)?H[0]:H),ee=L[1]+Math.abs(Array.isArray(H)?H[1]:H);return[Math.min(W,j[0]),Math.max(ee,j[1])]},[1/0,-1/0]);return[Math.min(F[0],R[0]),Math.max(F[1],R[1])]},[1/0,-1/0])}return null},Y1e=function(e,a,r,i,l){var c=a.map(function(n){return wQ(e,n,r,l,i)}).filter(function(n){return!qn(n)});return c&&c.length?c.reduce(function(n,v){return[Math.min(n[0],v[0]),Math.max(n[1],v[1])]},[1/0,-1/0]):null},RQ=function(e,a,r,i,l){var c=a.map(function(v){var R=v.props.dataKey;return r==="number"&&R&&wQ(e,v,R,i)||TR(e,R,r,l)});if(r==="number")return c.reduce(function(v,R){return[Math.min(v[0],R[0]),Math.max(v[1],R[1])]},[1/0,-1/0]);var n={};return c.reduce(function(v,R){for(var x=0,N=R.length;x<N;x++)n[R[x]]||(n[R[x]]=!0,v.push(R[x]));return v},[])},TQ=function(e,a){return e==="horizontal"&&a==="xAxis"||e==="vertical"&&a==="yAxis"||e==="centric"&&a==="angleAxis"||e==="radial"&&a==="radiusAxis"},CQ=function(e,a,r,i){if(i)return e.map(function(v){return v.coordinate});var l,c,n=e.map(function(v){return v.coordinate===a&&(l=!0),v.coordinate===r&&(c=!0),v.coordinate});return l||n.push(a),c||n.push(r),n},bg=function(e,a,r){if(!e)return null;var i=e.scale,l=e.duplicateDomain,c=e.type,n=e.range,v=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,R=(a||r)&&c==="category"&&i.bandwidth?i.bandwidth()/v:0;if(R=e.axisType==="angleAxis"&&(n==null?void 0:n.length)>=2?sh(n[0]-n[1])*2*R:R,a&&(e.ticks||e.niceTicks)){var x=(e.ticks||e.niceTicks).map(function(N){var L=l?l.indexOf(N):N;return{coordinate:i(L)+R,value:N,offset:R}});return x.filter(function(N){return!v1(N.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(N,L){return{coordinate:i(N)+R,value:N,index:L,offset:R}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(N){return{coordinate:i(N)+R,value:N,offset:R}}):i.domain().map(function(N,L){return{coordinate:i(N)+R,value:l?l[N]:N,index:L,offset:R}})},c5=new WeakMap,YS=function(e,a){if(typeof a!="function")return e;c5.has(e)||c5.set(e,new WeakMap);var r=c5.get(e);if(r.has(a))return r.get(a);var i=function(){e.apply(void 0,arguments),a.apply(void 0,arguments)};return r.set(a,i),i},SQ=function(e,a,r){var i=e.scale,l=e.type,c=e.layout,n=e.axisType;if(i==="auto")return c==="radial"&&n==="radiusAxis"?{scale:iT(),realScaleType:"band"}:c==="radial"&&n==="angleAxis"?{scale:Nx(),realScaleType:"linear"}:l==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!r)?{scale:RR(),realScaleType:"point"}:l==="category"?{scale:iT(),realScaleType:"band"}:{scale:Nx(),realScaleType:"linear"};if(hC(i)){var v="scale".concat(AP(i));return{scale:(V7[v]||RR)(),realScaleType:V7[v]?v:"point"}}return Zn(i)?{scale:i}:{scale:RR(),realScaleType:"point"}},K7=1e-4,bQ=function(e){var a=e.domain();if(!(!a||a.length<=2)){var r=a.length,i=e.range(),l=Math.min(i[0],i[1])-K7,c=Math.max(i[0],i[1])+K7,n=e(a[0]),v=e(a[r-1]);(n<l||n>c||v<l||v>c)&&e.domain([a[0],a[r-1]])}},X1e=function(e,a){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===a)return e[r].position;return null},J1e=function(e,a){if(!a||a.length!==2||!_r(a[0])||!_r(a[1]))return e;var r=Math.min(a[0],a[1]),i=Math.max(a[0],a[1]),l=[e[0],e[1]];return(!_r(e[0])||e[0]<r)&&(l[0]=r),(!_r(e[1])||e[1]>i)&&(l[1]=i),l[0]>i&&(l[0]=i),l[1]<r&&(l[1]=r),l},Q1e=function(e){var a=e.length;if(!(a<=0))for(var r=0,i=e[0].length;r<i;++r)for(var l=0,c=0,n=0;n<a;++n){var v=v1(e[n][r][1])?e[n][r][0]:e[n][r][1];v>=0?(e[n][r][0]=l,e[n][r][1]=l+v,l=e[n][r][1]):(e[n][r][0]=c,e[n][r][1]=c+v,c=e[n][r][1])}},ewe=function(e){var a=e.length;if(!(a<=0))for(var r=0,i=e[0].length;r<i;++r)for(var l=0,c=0;c<a;++c){var n=v1(e[c][r][1])?e[c][r][0]:e[c][r][1];n>=0?(e[c][r][0]=l,e[c][r][1]=l+n,l=e[c][r][1]):(e[c][r][0]=0,e[c][r][1]=0)}},twe={sign:Q1e,expand:jme,none:E_,silhouette:Gme,wiggle:Zme,positive:ewe},awe=function(e,a,r){var i=a.map(function(n){return n.props.dataKey}),l=twe[r],c=Bme().keys(i).value(function(n,v){return+Fo(n,v,0)}).order(SM).offset(l);return c(e)},rwe=function(e,a,r,i,l,c){if(!e)return null;var n=c?a.reverse():a,v={},R=n.reduce(function(N,L){var F,j=(F=L.type)!==null&&F!==void 0&&F.defaultProps?El(El({},L.type.defaultProps),L.props):L.props,$=j.stackId,H=j.hide;if(H)return N;var W=j[r],ee=N[W]||{hasStack:!1,stackGroups:{}};if(qu($)){var se=ee.stackGroups[$]||{numericAxisId:r,cateAxisId:i,items:[]};se.items.push(L),ee.hasStack=!0,ee.stackGroups[$]=se}else ee.stackGroups[cA("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[L]};return El(El({},N),{},m_({},W,ee))},v),x={};return Object.keys(R).reduce(function(N,L){var F=R[L];if(F.hasStack){var j={};F.stackGroups=Object.keys(F.stackGroups).reduce(function($,H){var W=F.stackGroups[H];return El(El({},$),{},m_({},H,{numericAxisId:r,cateAxisId:i,items:W.items,stackedData:awe(e,W.items,l)}))},j)}return El(El({},N),{},m_({},L,F))},x)},xQ=function(e,a){var r=a.realScaleType,i=a.type,l=a.tickCount,c=a.originalDomain,n=a.allowDecimals,v=r||a.scale;if(v!=="auto"&&v!=="linear")return null;if(l&&i==="number"&&c&&(c[0]==="auto"||c[1]==="auto")){var R=e.domain();if(!R.length)return null;var x=y1e(R,l,n);return e.domain([zP(x),Uy(x)]),{niceTicks:x}}if(l&&i==="number"){var N=e.domain(),L=A1e(N,l,n);return{niceTicks:L}}return null};function k_(t){var e=t.axis,a=t.ticks,r=t.bandSize,i=t.entry,l=t.index,c=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!qn(i[e.dataKey])){var n=hx(a,"value",i[e.dataKey]);if(n)return n.coordinate+r/2}return a[l]?a[l].coordinate+r/2:null}var v=Fo(i,qn(c)?e.dataKey:c);return qn(v)?null:e.scale(v)}var W7=function(e){var a=e.axis,r=e.ticks,i=e.offset,l=e.bandSize,c=e.entry,n=e.index;if(a.type==="category")return r[n]?r[n].coordinate+i:null;var v=Fo(c,a.dataKey,a.domain[n]);return qn(v)?null:a.scale(v)-l/2+i},nwe=function(e){var a=e.numericAxis,r=a.scale.domain();if(a.type==="number"){var i=Math.min(r[0],r[1]),l=Math.max(r[0],r[1]);return i<=0&&l>=0?0:l<0?l:i}return r[0]},iwe=function(e,a){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?El(El({},e.type.defaultProps),e.props):e.props,l=i.stackId;if(qu(l)){var c=a[l];if(c){var n=c.items.indexOf(e);return n>=0?c.stackedData[n]:null}}return null},swe=function(e){return e.reduce(function(a,r){return[zP(r.concat([a[0]]).filter(_r)),Uy(r.concat([a[1]]).filter(_r))]},[1/0,-1/0])},PQ=function(e,a,r){return Object.keys(e).reduce(function(i,l){var c=e[l],n=c.stackedData,v=n.reduce(function(R,x){var N=swe(x.slice(a,r+1));return[Math.min(R[0],N[0]),Math.max(R[1],N[1])]},[1/0,-1/0]);return[Math.min(v[0],i[0]),Math.max(v[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},Y7=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,X7=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,YM=function(e,a,r){if(Zn(e))return e(a,r);if(!Array.isArray(e))return a;var i=[];if(_r(e[0]))i[0]=r?e[0]:Math.min(e[0],a[0]);else if(Y7.test(e[0])){var l=+Y7.exec(e[0])[1];i[0]=a[0]-l}else Zn(e[0])?i[0]=e[0](a[0]):i[0]=a[0];if(_r(e[1]))i[1]=r?e[1]:Math.max(e[1],a[1]);else if(X7.test(e[1])){var c=+X7.exec(e[1])[1];i[1]=a[1]+c}else Zn(e[1])?i[1]=e[1](a[1]):i[1]=a[1];return i},Lx=function(e,a,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&a&&a.length>=2){for(var l=t4(a,function(N){return N.coordinate}),c=1/0,n=1,v=l.length;n<v;n++){var R=l[n],x=l[n-1];c=Math.min((R.coordinate||0)-(x.coordinate||0),c)}return c===1/0?0:c}return r?void 0:0},J7=function(e,a,r){return!e||!e.length||eA(e,vf(r,"type.defaultProps.domain"))?a:e},EQ=function(e,a){var r=e.type.defaultProps?El(El({},e.type.defaultProps),e.props):e.props,i=r.dataKey,l=r.name,c=r.unit,n=r.formatter,v=r.tooltipType,R=r.chartType,x=r.hide;return El(El({},gn(e,!1)),{},{dataKey:i,unit:c,formatter:n,name:l||i,color:x4(e),value:Fo(a,i),type:v,payload:a,chartType:R,hide:x})};function pT(t){"@babel/helpers - typeof";return pT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pT(t)}function Q7(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function vg(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Q7(Object(a),!0).forEach(function(r){NQ(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Q7(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function NQ(t,e,a){return e=owe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function owe(t){var e=lwe(t,"string");return pT(e)=="symbol"?e:e+""}function lwe(t,e){if(pT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(pT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uwe(t,e){return fwe(t)||hwe(t,e)||dwe(t,e)||cwe()}function cwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dwe(t,e){if(t){if(typeof t=="string")return e9(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return e9(t,e)}}function e9(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function hwe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function fwe(t){if(Array.isArray(t))return t}var Fx=Math.PI/180,pwe=function(e){return e*180/Math.PI},Po=function(e,a,r,i){return{x:e+Math.cos(-Fx*i)*r,y:a+Math.sin(-Fx*i)*r}},OQ=function(e,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(a-(r.top||0)-(r.bottom||0)))/2},mwe=function(e,a,r,i,l){var c=e.width,n=e.height,v=e.startAngle,R=e.endAngle,x=oh(e.cx,c,c/2),N=oh(e.cy,n,n/2),L=OQ(c,n,r),F=oh(e.innerRadius,L,0),j=oh(e.outerRadius,L,L*.8),$=Object.keys(a);return $.reduce(function(H,W){var ee=a[W],se=ee.domain,fe=ee.reversed,le;if(qn(ee.range))i==="angleAxis"?le=[v,R]:i==="radiusAxis"&&(le=[F,j]),fe&&(le=[le[1],le[0]]);else{le=ee.range;var me=le,ge=uwe(me,2);v=ge[0],R=ge[1]}var Re=SQ(ee,l),we=Re.realScaleType,Ve=Re.scale;Ve.domain(se).range(le),bQ(Ve);var oe=xQ(Ve,vg(vg({},ee),{},{realScaleType:we})),_e=vg(vg(vg({},ee),oe),{},{range:le,radius:j,realScaleType:we,scale:Ve,cx:x,cy:N,innerRadius:F,outerRadius:j,startAngle:v,endAngle:R});return vg(vg({},H),{},NQ({},W,_e))},{})},gwe=function(e,a){var r=e.x,i=e.y,l=a.x,c=a.y;return Math.sqrt(Math.pow(r-l,2)+Math.pow(i-c,2))},ywe=function(e,a){var r=e.x,i=e.y,l=a.cx,c=a.cy,n=gwe({x:r,y:i},{x:l,y:c});if(n<=0)return{radius:n};var v=(r-l)/n,R=Math.acos(v);return i>c&&(R=2*Math.PI-R),{radius:n,angle:pwe(R),angleInRadian:R}},Awe=function(e){var a=e.startAngle,r=e.endAngle,i=Math.floor(a/360),l=Math.floor(r/360),c=Math.min(i,l);return{startAngle:a-c*360,endAngle:r-c*360}},vwe=function(e,a){var r=a.startAngle,i=a.endAngle,l=Math.floor(r/360),c=Math.floor(i/360),n=Math.min(l,c);return e+n*360},t9=function(e,a){var r=e.x,i=e.y,l=ywe({x:r,y:i},a),c=l.radius,n=l.angle,v=a.innerRadius,R=a.outerRadius;if(c<v||c>R)return!1;if(c===0)return!0;var x=Awe(a),N=x.startAngle,L=x.endAngle,F=n,j;if(N<=L){for(;F>L;)F-=360;for(;F<N;)F+=360;j=F>=N&&F<=L}else{for(;F>N;)F-=360;for(;F<L;)F+=360;j=F>=L&&F<=N}return j?vg(vg({},a),{},{radius:c,angle:vwe(F,a)}):null},VQ=function(e){return!ie.isValidElement(e)&&!Zn(e)&&typeof e!="boolean"?e.className:""};function mT(t){"@babel/helpers - typeof";return mT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mT(t)}var _we=["offset"];function wwe(t){return Swe(t)||Cwe(t)||Twe(t)||Rwe()}function Rwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Twe(t,e){if(t){if(typeof t=="string")return XM(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return XM(t,e)}}function Cwe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Swe(t){if(Array.isArray(t))return XM(t)}function XM(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function bwe(t,e){if(t==null)return{};var a=xwe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function xwe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function a9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Zu(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?a9(Object(a),!0).forEach(function(r){Pwe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):a9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Pwe(t,e,a){return e=Ewe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Ewe(t){var e=Nwe(t,"string");return mT(e)=="symbol"?e:e+""}function Nwe(t,e){if(mT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(mT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gT(){return gT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},gT.apply(this,arguments)}var Owe=function(e){var a=e.value,r=e.formatter,i=qn(e.children)?a:e.children;return Zn(r)?r(i):i},Vwe=function(e,a){var r=sh(a-e),i=Math.min(Math.abs(a-e),360);return r*i},zwe=function(e,a,r){var i=e.position,l=e.viewBox,c=e.offset,n=e.className,v=l,R=v.cx,x=v.cy,N=v.innerRadius,L=v.outerRadius,F=v.startAngle,j=v.endAngle,$=v.clockWise,H=(N+L)/2,W=Vwe(F,j),ee=W>=0?1:-1,se,fe;i==="insideStart"?(se=F+ee*c,fe=$):i==="insideEnd"?(se=j-ee*c,fe=!$):i==="end"&&(se=j+ee*c,fe=$),fe=W<=0?fe:!fe;var le=Po(R,x,H,se),me=Po(R,x,H,se+(fe?1:-1)*359),ge="M".concat(le.x,",").concat(le.y,`
    A`).concat(H,",").concat(H,",0,1,").concat(fe?0:1,`,
    `).concat(me.x,",").concat(me.y),Re=qn(e.id)?cA("recharts-radial-line-"):e.id;return Ot.createElement("text",gT({},r,{dominantBaseline:"central",className:gi("recharts-radial-bar-label",n)}),Ot.createElement("defs",null,Ot.createElement("path",{id:Re,d:ge})),Ot.createElement("textPath",{xlinkHref:"#".concat(Re)},a))},Dwe=function(e){var a=e.viewBox,r=e.offset,i=e.position,l=a,c=l.cx,n=l.cy,v=l.innerRadius,R=l.outerRadius,x=l.startAngle,N=l.endAngle,L=(x+N)/2;if(i==="outside"){var F=Po(c,n,R+r,L),j=F.x,$=F.y;return{x:j,y:$,textAnchor:j>=c?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:c,y:n,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:c,y:n,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:c,y:n,textAnchor:"middle",verticalAnchor:"end"};var H=(v+R)/2,W=Po(c,n,H,L),ee=W.x,se=W.y;return{x:ee,y:se,textAnchor:"middle",verticalAnchor:"middle"}},Mwe=function(e){var a=e.viewBox,r=e.parentViewBox,i=e.offset,l=e.position,c=a,n=c.x,v=c.y,R=c.width,x=c.height,N=x>=0?1:-1,L=N*i,F=N>0?"end":"start",j=N>0?"start":"end",$=R>=0?1:-1,H=$*i,W=$>0?"end":"start",ee=$>0?"start":"end";if(l==="top"){var se={x:n+R/2,y:v-N*i,textAnchor:"middle",verticalAnchor:F};return Zu(Zu({},se),r?{height:Math.max(v-r.y,0),width:R}:{})}if(l==="bottom"){var fe={x:n+R/2,y:v+x+L,textAnchor:"middle",verticalAnchor:j};return Zu(Zu({},fe),r?{height:Math.max(r.y+r.height-(v+x),0),width:R}:{})}if(l==="left"){var le={x:n-H,y:v+x/2,textAnchor:W,verticalAnchor:"middle"};return Zu(Zu({},le),r?{width:Math.max(le.x-r.x,0),height:x}:{})}if(l==="right"){var me={x:n+R+H,y:v+x/2,textAnchor:ee,verticalAnchor:"middle"};return Zu(Zu({},me),r?{width:Math.max(r.x+r.width-me.x,0),height:x}:{})}var ge=r?{width:R,height:x}:{};return l==="insideLeft"?Zu({x:n+H,y:v+x/2,textAnchor:ee,verticalAnchor:"middle"},ge):l==="insideRight"?Zu({x:n+R-H,y:v+x/2,textAnchor:W,verticalAnchor:"middle"},ge):l==="insideTop"?Zu({x:n+R/2,y:v+L,textAnchor:"middle",verticalAnchor:j},ge):l==="insideBottom"?Zu({x:n+R/2,y:v+x-L,textAnchor:"middle",verticalAnchor:F},ge):l==="insideTopLeft"?Zu({x:n+H,y:v+L,textAnchor:ee,verticalAnchor:j},ge):l==="insideTopRight"?Zu({x:n+R-H,y:v+L,textAnchor:W,verticalAnchor:j},ge):l==="insideBottomLeft"?Zu({x:n+H,y:v+x-L,textAnchor:ee,verticalAnchor:F},ge):l==="insideBottomRight"?Zu({x:n+R-H,y:v+x-L,textAnchor:W,verticalAnchor:F},ge):A1(l)&&(_r(l.x)||fv(l.x))&&(_r(l.y)||fv(l.y))?Zu({x:n+oh(l.x,R),y:v+oh(l.y,x),textAnchor:"end",verticalAnchor:"end"},ge):Zu({x:n+R/2,y:v+x/2,textAnchor:"middle",verticalAnchor:"middle"},ge)},Iwe=function(e){return"cx"in e&&_r(e.cx)};function cc(t){var e=t.offset,a=e===void 0?5:e,r=bwe(t,_we),i=Zu({offset:a},r),l=i.viewBox,c=i.position,n=i.value,v=i.children,R=i.content,x=i.className,N=x===void 0?"":x,L=i.textBreakAll;if(!l||qn(n)&&qn(v)&&!ie.isValidElement(R)&&!Zn(R))return null;if(ie.isValidElement(R))return ie.cloneElement(R,i);var F;if(Zn(R)){if(F=ie.createElement(R,i),ie.isValidElement(F))return F}else F=Owe(i);var j=Iwe(l),$=gn(i,!0);if(j&&(c==="insideStart"||c==="insideEnd"||c==="end"))return zwe(i,F,$);var H=j?Dwe(i):Mwe(i);return Ot.createElement(Mv,gT({className:gi("recharts-label",N)},$,H,{breakAll:L}),F)}cc.displayName="Label";var zQ=function(e){var a=e.cx,r=e.cy,i=e.angle,l=e.startAngle,c=e.endAngle,n=e.r,v=e.radius,R=e.innerRadius,x=e.outerRadius,N=e.x,L=e.y,F=e.top,j=e.left,$=e.width,H=e.height,W=e.clockWise,ee=e.labelViewBox;if(ee)return ee;if(_r($)&&_r(H)){if(_r(N)&&_r(L))return{x:N,y:L,width:$,height:H};if(_r(F)&&_r(j))return{x:F,y:j,width:$,height:H}}return _r(N)&&_r(L)?{x:N,y:L,width:0,height:0}:_r(a)&&_r(r)?{cx:a,cy:r,startAngle:l||i||0,endAngle:c||i||0,innerRadius:R||0,outerRadius:x||v||n||0,clockWise:W}:e.viewBox?e.viewBox:{}},Lwe=function(e,a){return e?e===!0?Ot.createElement(cc,{key:"label-implicit",viewBox:a}):qu(e)?Ot.createElement(cc,{key:"label-implicit",viewBox:a,value:e}):ie.isValidElement(e)?e.type===cc?ie.cloneElement(e,{key:"label-implicit",viewBox:a}):Ot.createElement(cc,{key:"label-implicit",content:e,viewBox:a}):Zn(e)?Ot.createElement(cc,{key:"label-implicit",content:e,viewBox:a}):A1(e)?Ot.createElement(cc,gT({viewBox:a},e,{key:"label-implicit"})):null:null},Fwe=function(e,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,l=zQ(e),c=hh(i,cc).map(function(v,R){return ie.cloneElement(v,{viewBox:a||l,key:"label-".concat(R)})});if(!r)return c;var n=Lwe(e.label,a||l);return[n].concat(wwe(c))};cc.parseViewBox=zQ;cc.renderCallByParent=Fwe;var d5,r9;function kwe(){if(r9)return d5;r9=1;function t(e){var a=e==null?0:e.length;return a?e[a-1]:void 0}return d5=t,d5}var Uwe=kwe();const Bwe=ss(Uwe);function yT(t){"@babel/helpers - typeof";return yT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yT(t)}var jwe=["valueAccessor"],Gwe=["data","dataKey","clockWise","id","textBreakAll"];function Zwe(t){return Kwe(t)||$we(t)||Hwe(t)||qwe()}function qwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hwe(t,e){if(t){if(typeof t=="string")return JM(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return JM(t,e)}}function $we(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Kwe(t){if(Array.isArray(t))return JM(t)}function JM(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function kx(){return kx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},kx.apply(this,arguments)}function n9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function i9(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?n9(Object(a),!0).forEach(function(r){Wwe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Wwe(t,e,a){return e=Ywe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Ywe(t){var e=Xwe(t,"string");return yT(e)=="symbol"?e:e+""}function Xwe(t,e){if(yT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(yT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function s9(t,e){if(t==null)return{};var a=Jwe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Jwe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}var Qwe=function(e){return Array.isArray(e.value)?Bwe(e.value):e.value};function ap(t){var e=t.valueAccessor,a=e===void 0?Qwe:e,r=s9(t,jwe),i=r.data,l=r.dataKey,c=r.clockWise,n=r.id,v=r.textBreakAll,R=s9(r,Gwe);return!i||!i.length?null:Ot.createElement(_i,{className:"recharts-label-list"},i.map(function(x,N){var L=qn(l)?a(x,N):Fo(x&&x.payload,l),F=qn(n)?{}:{id:"".concat(n,"-").concat(N)};return Ot.createElement(cc,kx({},gn(x,!0),R,F,{parentViewBox:x.parentViewBox,value:L,textBreakAll:v,viewBox:cc.parseViewBox(qn(c)?x:i9(i9({},x),{},{clockWise:c})),key:"label-".concat(N),index:N}))}))}ap.displayName="LabelList";function eRe(t,e){return t?t===!0?Ot.createElement(ap,{key:"labelList-implicit",data:e}):Ot.isValidElement(t)||Zn(t)?Ot.createElement(ap,{key:"labelList-implicit",data:e,content:t}):A1(t)?Ot.createElement(ap,kx({data:e},t,{key:"labelList-implicit"})):null:null}function tRe(t,e){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var r=t.children,i=hh(r,ap).map(function(c,n){return ie.cloneElement(c,{data:e,key:"labelList-".concat(n)})});if(!a)return i;var l=eRe(t.label,e);return[l].concat(Zwe(i))}ap.renderCallByParent=tRe;function AT(t){"@babel/helpers - typeof";return AT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AT(t)}function QM(){return QM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},QM.apply(this,arguments)}function o9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function l9(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?o9(Object(a),!0).forEach(function(r){aRe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function aRe(t,e,a){return e=rRe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function rRe(t){var e=nRe(t,"string");return AT(e)=="symbol"?e:e+""}function nRe(t,e){if(AT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(AT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var iRe=function(e,a){var r=sh(a-e),i=Math.min(Math.abs(a-e),359.999);return r*i},XS=function(e){var a=e.cx,r=e.cy,i=e.radius,l=e.angle,c=e.sign,n=e.isExternal,v=e.cornerRadius,R=e.cornerIsExternal,x=v*(n?1:-1)+i,N=Math.asin(v/x)/Fx,L=R?l:l+c*N,F=Po(a,r,x,L),j=Po(a,r,i,L),$=R?l-c*N:l,H=Po(a,r,x*Math.cos(N*Fx),$);return{center:F,circleTangency:j,lineTangency:H,theta:N}},DQ=function(e){var a=e.cx,r=e.cy,i=e.innerRadius,l=e.outerRadius,c=e.startAngle,n=e.endAngle,v=iRe(c,n),R=c+v,x=Po(a,r,l,c),N=Po(a,r,l,R),L="M ".concat(x.x,",").concat(x.y,`
    A `).concat(l,",").concat(l,`,0,
    `).concat(+(Math.abs(v)>180),",").concat(+(c>R),`,
    `).concat(N.x,",").concat(N.y,`
  `);if(i>0){var F=Po(a,r,i,c),j=Po(a,r,i,R);L+="L ".concat(j.x,",").concat(j.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(v)>180),",").concat(+(c<=R),`,
            `).concat(F.x,",").concat(F.y," Z")}else L+="L ".concat(a,",").concat(r," Z");return L},sRe=function(e){var a=e.cx,r=e.cy,i=e.innerRadius,l=e.outerRadius,c=e.cornerRadius,n=e.forceCornerRadius,v=e.cornerIsExternal,R=e.startAngle,x=e.endAngle,N=sh(x-R),L=XS({cx:a,cy:r,radius:l,angle:R,sign:N,cornerRadius:c,cornerIsExternal:v}),F=L.circleTangency,j=L.lineTangency,$=L.theta,H=XS({cx:a,cy:r,radius:l,angle:x,sign:-N,cornerRadius:c,cornerIsExternal:v}),W=H.circleTangency,ee=H.lineTangency,se=H.theta,fe=v?Math.abs(R-x):Math.abs(R-x)-$-se;if(fe<0)return n?"M ".concat(j.x,",").concat(j.y,`
        a`).concat(c,",").concat(c,",0,0,1,").concat(c*2,`,0
        a`).concat(c,",").concat(c,",0,0,1,").concat(-c*2,`,0
      `):DQ({cx:a,cy:r,innerRadius:i,outerRadius:l,startAngle:R,endAngle:x});var le="M ".concat(j.x,",").concat(j.y,`
    A`).concat(c,",").concat(c,",0,0,").concat(+(N<0),",").concat(F.x,",").concat(F.y,`
    A`).concat(l,",").concat(l,",0,").concat(+(fe>180),",").concat(+(N<0),",").concat(W.x,",").concat(W.y,`
    A`).concat(c,",").concat(c,",0,0,").concat(+(N<0),",").concat(ee.x,",").concat(ee.y,`
  `);if(i>0){var me=XS({cx:a,cy:r,radius:i,angle:R,sign:N,isExternal:!0,cornerRadius:c,cornerIsExternal:v}),ge=me.circleTangency,Re=me.lineTangency,we=me.theta,Ve=XS({cx:a,cy:r,radius:i,angle:x,sign:-N,isExternal:!0,cornerRadius:c,cornerIsExternal:v}),oe=Ve.circleTangency,_e=Ve.lineTangency,Fe=Ve.theta,Ee=v?Math.abs(R-x):Math.abs(R-x)-we-Fe;if(Ee<0&&c===0)return"".concat(le,"L").concat(a,",").concat(r,"Z");le+="L".concat(_e.x,",").concat(_e.y,`
      A`).concat(c,",").concat(c,",0,0,").concat(+(N<0),",").concat(oe.x,",").concat(oe.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(Ee>180),",").concat(+(N>0),",").concat(ge.x,",").concat(ge.y,`
      A`).concat(c,",").concat(c,",0,0,").concat(+(N<0),",").concat(Re.x,",").concat(Re.y,"Z")}else le+="L".concat(a,",").concat(r,"Z");return le},oRe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},MQ=function(e){var a=l9(l9({},oRe),e),r=a.cx,i=a.cy,l=a.innerRadius,c=a.outerRadius,n=a.cornerRadius,v=a.forceCornerRadius,R=a.cornerIsExternal,x=a.startAngle,N=a.endAngle,L=a.className;if(c<l||x===N)return null;var F=gi("recharts-sector",L),j=c-l,$=oh(n,j,0,!0),H;return $>0&&Math.abs(x-N)<360?H=sRe({cx:r,cy:i,innerRadius:l,outerRadius:c,cornerRadius:Math.min($,j/2),forceCornerRadius:v,cornerIsExternal:R,startAngle:x,endAngle:N}):H=DQ({cx:r,cy:i,innerRadius:l,outerRadius:c,startAngle:x,endAngle:N}),Ot.createElement("path",QM({},gn(a,!0),{className:F,d:H,role:"img"}))};function vT(t){"@babel/helpers - typeof";return vT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vT(t)}function eI(){return eI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},eI.apply(this,arguments)}function u9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function c9(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?u9(Object(a),!0).forEach(function(r){lRe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function lRe(t,e,a){return e=uRe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function uRe(t){var e=cRe(t,"string");return vT(e)=="symbol"?e:e+""}function cRe(t,e){if(vT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(vT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var d9={curveBasisClosed:Nme,curveBasisOpen:Ome,curveBasis:Eme,curveBumpX:mme,curveBumpY:gme,curveLinearClosed:Vme,curveLinear:_P,curveMonotoneX:zme,curveMonotoneY:Dme,curveNatural:Mme,curveStep:Ime,curveStepAfter:Fme,curveStepBefore:Lme},JS=function(e){return e.x===+e.x&&e.y===+e.y},Zw=function(e){return e.x},qw=function(e){return e.y},dRe=function(e,a){if(Zn(e))return e;var r="curve".concat(AP(e));return(r==="curveMonotone"||r==="curveBump")&&a?d9["".concat(r).concat(a==="vertical"?"Y":"X")]:d9[r]||_P},hRe=function(e){var a=e.type,r=a===void 0?"linear":a,i=e.points,l=i===void 0?[]:i,c=e.baseLine,n=e.layout,v=e.connectNulls,R=v===void 0?!1:v,x=dRe(r,n),N=R?l.filter(function($){return JS($)}):l,L;if(Array.isArray(c)){var F=R?c.filter(function($){return JS($)}):c,j=N.map(function($,H){return c9(c9({},$),{},{base:F[H]})});return n==="vertical"?L=GS().y(qw).x1(Zw).x0(function($){return $.base.x}):L=GS().x(Zw).y1(qw).y0(function($){return $.base.y}),L.defined(JS).curve(x),L(j)}return n==="vertical"&&_r(c)?L=GS().y(qw).x1(Zw).x0(c):_r(c)?L=GS().x(Zw).y1(qw).y0(c):L=zX().x(Zw).y(qw),L.defined(JS).curve(x),L(N)},Wy=function(e){var a=e.className,r=e.points,i=e.path,l=e.pathRef;if((!r||!r.length)&&!i)return null;var c=r&&r.length?hRe(e):i;return Ot.createElement("path",eI({},gn(e,!1),fx(e),{className:gi("recharts-curve",a),d:c,ref:l}))},h5={exports:{}},f5,h9;function fRe(){if(h9)return f5;h9=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return f5=t,f5}var p5,f9;function pRe(){if(f9)return p5;f9=1;var t=fRe();function e(){}function a(){}return a.resetWarningCache=e,p5=function(){function r(c,n,v,R,x,N){if(N!==t){var L=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw L.name="Invariant Violation",L}}r.isRequired=r;function i(){return r}var l={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:a,resetWarningCache:e};return l.PropTypes=l,l},p5}var p9;function mRe(){return p9||(p9=1,h5.exports=pRe()()),h5.exports}var gRe=mRe();const Bs=ss(gRe);var yRe=Object.getOwnPropertyNames,ARe=Object.getOwnPropertySymbols,vRe=Object.prototype.hasOwnProperty;function m9(t,e){return function(r,i,l){return t(r,i,l)&&e(r,i,l)}}function QS(t){return function(a,r,i){if(!a||!r||typeof a!="object"||typeof r!="object")return t(a,r,i);var l=i.cache,c=l.get(a),n=l.get(r);if(c&&n)return c===r&&n===a;l.set(a,r),l.set(r,a);var v=t(a,r,i);return l.delete(a),l.delete(r),v}}function g9(t){return yRe(t).concat(ARe(t))}var _Re=Object.hasOwn||function(t,e){return vRe.call(t,e)};function Wv(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var wRe="__v",RRe="__o",TRe="_owner",y9=Object.getOwnPropertyDescriptor,A9=Object.keys;function CRe(t,e,a){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!a.equals(t[r],e[r],r,r,t,e,a))return!1;return!0}function SRe(t,e){return Wv(t.getTime(),e.getTime())}function bRe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function xRe(t,e){return t===e}function v9(t,e,a){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),l=t.entries(),c,n,v=0;(c=l.next())&&!c.done;){for(var R=e.entries(),x=!1,N=0;(n=R.next())&&!n.done;){if(i[N]){N++;continue}var L=c.value,F=n.value;if(a.equals(L[0],F[0],v,N,t,e,a)&&a.equals(L[1],F[1],L[0],F[0],t,e,a)){x=i[N]=!0;break}N++}if(!x)return!1;v++}return!0}var PRe=Wv;function ERe(t,e,a){var r=A9(t),i=r.length;if(A9(e).length!==i)return!1;for(;i-- >0;)if(!IQ(t,e,a,r[i]))return!1;return!0}function Hw(t,e,a){var r=g9(t),i=r.length;if(g9(e).length!==i)return!1;for(var l,c,n;i-- >0;)if(l=r[i],!IQ(t,e,a,l)||(c=y9(t,l),n=y9(e,l),(c||n)&&(!c||!n||c.configurable!==n.configurable||c.enumerable!==n.enumerable||c.writable!==n.writable)))return!1;return!0}function NRe(t,e){return Wv(t.valueOf(),e.valueOf())}function ORe(t,e){return t.source===e.source&&t.flags===e.flags}function _9(t,e,a){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),l=t.values(),c,n;(c=l.next())&&!c.done;){for(var v=e.values(),R=!1,x=0;(n=v.next())&&!n.done;){if(!i[x]&&a.equals(c.value,n.value,c.value,n.value,t,e,a)){R=i[x]=!0;break}x++}if(!R)return!1}return!0}function VRe(t,e){var a=t.length;if(e.length!==a)return!1;for(;a-- >0;)if(t[a]!==e[a])return!1;return!0}function zRe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function IQ(t,e,a,r){return(r===TRe||r===RRe||r===wRe)&&(t.$$typeof||e.$$typeof)?!0:_Re(e,r)&&a.equals(t[r],e[r],r,r,t,e,a)}var DRe="[object Arguments]",MRe="[object Boolean]",IRe="[object Date]",LRe="[object Error]",FRe="[object Map]",kRe="[object Number]",URe="[object Object]",BRe="[object RegExp]",jRe="[object Set]",GRe="[object String]",ZRe="[object URL]",qRe=Array.isArray,w9=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,R9=Object.assign,HRe=Object.prototype.toString.call.bind(Object.prototype.toString);function $Re(t){var e=t.areArraysEqual,a=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,l=t.areMapsEqual,c=t.areNumbersEqual,n=t.areObjectsEqual,v=t.arePrimitiveWrappersEqual,R=t.areRegExpsEqual,x=t.areSetsEqual,N=t.areTypedArraysEqual,L=t.areUrlsEqual;return function(j,$,H){if(j===$)return!0;if(j==null||$==null)return!1;var W=typeof j;if(W!==typeof $)return!1;if(W!=="object")return W==="number"?c(j,$,H):W==="function"?i(j,$,H):!1;var ee=j.constructor;if(ee!==$.constructor)return!1;if(ee===Object)return n(j,$,H);if(qRe(j))return e(j,$,H);if(w9!=null&&w9(j))return N(j,$,H);if(ee===Date)return a(j,$,H);if(ee===RegExp)return R(j,$,H);if(ee===Map)return l(j,$,H);if(ee===Set)return x(j,$,H);var se=HRe(j);return se===IRe?a(j,$,H):se===BRe?R(j,$,H):se===FRe?l(j,$,H):se===jRe?x(j,$,H):se===URe?typeof j.then!="function"&&typeof $.then!="function"&&n(j,$,H):se===ZRe?L(j,$,H):se===LRe?r(j,$,H):se===DRe?n(j,$,H):se===MRe||se===kRe||se===GRe?v(j,$,H):!1}}function KRe(t){var e=t.circular,a=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?Hw:CRe,areDatesEqual:SRe,areErrorsEqual:bRe,areFunctionsEqual:xRe,areMapsEqual:r?m9(v9,Hw):v9,areNumbersEqual:PRe,areObjectsEqual:r?Hw:ERe,arePrimitiveWrappersEqual:NRe,areRegExpsEqual:ORe,areSetsEqual:r?m9(_9,Hw):_9,areTypedArraysEqual:r?Hw:VRe,areUrlsEqual:zRe};if(a&&(i=R9({},i,a(i))),e){var l=QS(i.areArraysEqual),c=QS(i.areMapsEqual),n=QS(i.areObjectsEqual),v=QS(i.areSetsEqual);i=R9({},i,{areArraysEqual:l,areMapsEqual:c,areObjectsEqual:n,areSetsEqual:v})}return i}function WRe(t){return function(e,a,r,i,l,c,n){return t(e,a,n)}}function YRe(t){var e=t.circular,a=t.comparator,r=t.createState,i=t.equals,l=t.strict;if(r)return function(v,R){var x=r(),N=x.cache,L=N===void 0?e?new WeakMap:void 0:N,F=x.meta;return a(v,R,{cache:L,equals:i,meta:F,strict:l})};if(e)return function(v,R){return a(v,R,{cache:new WeakMap,equals:i,meta:void 0,strict:l})};var c={cache:void 0,equals:i,meta:void 0,strict:l};return function(v,R){return a(v,R,c)}}var XRe=fA();fA({strict:!0});fA({circular:!0});fA({circular:!0,strict:!0});fA({createInternalComparator:function(){return Wv}});fA({strict:!0,createInternalComparator:function(){return Wv}});fA({circular:!0,createInternalComparator:function(){return Wv}});fA({circular:!0,createInternalComparator:function(){return Wv},strict:!0});function fA(t){t===void 0&&(t={});var e=t.circular,a=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,l=t.strict,c=l===void 0?!1:l,n=KRe(t),v=$Re(n),R=r?r(v):WRe(v);return YRe({circular:a,comparator:v,createState:i,equals:R,strict:c})}function JRe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function T9(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=-1,r=function i(l){a<0&&(a=l),l-a>e?(t(l),a=-1):JRe(i)};requestAnimationFrame(r)}function tI(t){"@babel/helpers - typeof";return tI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tI(t)}function QRe(t){return rTe(t)||aTe(t)||tTe(t)||eTe()}function eTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tTe(t,e){if(t){if(typeof t=="string")return C9(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return C9(t,e)}}function C9(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function aTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rTe(t){if(Array.isArray(t))return t}function nTe(){var t={},e=function(){return null},a=!1,r=function i(l){if(!a){if(Array.isArray(l)){if(!l.length)return;var c=l,n=QRe(c),v=n[0],R=n.slice(1);if(typeof v=="number"){T9(i.bind(null,R),v);return}i(v),T9(i.bind(null,R));return}tI(l)==="object"&&(t=l,e(t)),typeof l=="function"&&l()}};return{stop:function(){a=!0},start:function(l){a=!1,r(l)},subscribe:function(l){return e=l,function(){e=function(){return null}}}}}function _T(t){"@babel/helpers - typeof";return _T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_T(t)}function S9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function b9(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?S9(Object(a),!0).forEach(function(r){LQ(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):S9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function LQ(t,e,a){return e=iTe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function iTe(t){var e=sTe(t,"string");return _T(e)==="symbol"?e:String(e)}function sTe(t,e){if(_T(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(_T(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oTe=function(e,a){return[Object.keys(e),Object.keys(a)].reduce(function(r,i){return r.filter(function(l){return i.includes(l)})})},lTe=function(e){return e},uTe=function(e){return e.replace(/([A-Z])/g,function(a){return"-".concat(a.toLowerCase())})},CR=function(e,a){return Object.keys(a).reduce(function(r,i){return b9(b9({},r),{},LQ({},i,e(i,a[i])))},{})},x9=function(e,a,r){return e.map(function(i){return"".concat(uTe(i)," ").concat(a,"ms ").concat(r)}).join(",")};function cTe(t,e){return fTe(t)||hTe(t,e)||FQ(t,e)||dTe()}function dTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hTe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function fTe(t){if(Array.isArray(t))return t}function pTe(t){return yTe(t)||gTe(t)||FQ(t)||mTe()}function mTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FQ(t,e){if(t){if(typeof t=="string")return aI(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return aI(t,e)}}function gTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function yTe(t){if(Array.isArray(t))return aI(t)}function aI(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var Ux=1e-4,kQ=function(e,a){return[0,3*e,3*a-6*e,3*e-3*a+1]},UQ=function(e,a){return e.map(function(r,i){return r*Math.pow(a,i)}).reduce(function(r,i){return r+i})},P9=function(e,a){return function(r){var i=kQ(e,a);return UQ(i,r)}},ATe=function(e,a){return function(r){var i=kQ(e,a),l=[].concat(pTe(i.map(function(c,n){return c*n}).slice(1)),[0]);return UQ(l,r)}},E9=function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];var i=a[0],l=a[1],c=a[2],n=a[3];if(a.length===1)switch(a[0]){case"linear":i=0,l=0,c=1,n=1;break;case"ease":i=.25,l=.1,c=.25,n=1;break;case"ease-in":i=.42,l=0,c=1,n=1;break;case"ease-out":i=.42,l=0,c=.58,n=1;break;case"ease-in-out":i=0,l=0,c=.58,n=1;break;default:{var v=a[0].split("(");if(v[0]==="cubic-bezier"&&v[1].split(")")[0].split(",").length===4){var R=v[1].split(")")[0].split(",").map(function(H){return parseFloat(H)}),x=cTe(R,4);i=x[0],l=x[1],c=x[2],n=x[3]}}}var N=P9(i,c),L=P9(l,n),F=ATe(i,c),j=function(W){return W>1?1:W<0?0:W},$=function(W){for(var ee=W>1?1:W,se=ee,fe=0;fe<8;++fe){var le=N(se)-ee,me=F(se);if(Math.abs(le-ee)<Ux||me<Ux)return L(se);se=j(se-le/me)}return L(se)};return $.isStepper=!1,$},vTe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=e.stiff,r=a===void 0?100:a,i=e.damping,l=i===void 0?8:i,c=e.dt,n=c===void 0?17:c,v=function(x,N,L){var F=-(x-N)*r,j=L*l,$=L+(F-j)*n/1e3,H=L*n/1e3+x;return Math.abs(H-N)<Ux&&Math.abs($)<Ux?[N,0]:[H,$]};return v.isStepper=!0,v.dt=n,v},_Te=function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];var i=a[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return E9(i);case"spring":return vTe();default:if(i.split("(")[0]==="cubic-bezier")return E9(i)}return typeof i=="function"?i:null};function wT(t){"@babel/helpers - typeof";return wT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wT(t)}function N9(t){return TTe(t)||RTe(t)||BQ(t)||wTe()}function wTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function TTe(t){if(Array.isArray(t))return nI(t)}function O9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Mc(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?O9(Object(a),!0).forEach(function(r){rI(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):O9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function rI(t,e,a){return e=CTe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function CTe(t){var e=STe(t,"string");return wT(e)==="symbol"?e:String(e)}function STe(t,e){if(wT(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(wT(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bTe(t,e){return ETe(t)||PTe(t,e)||BQ(t,e)||xTe()}function xTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BQ(t,e){if(t){if(typeof t=="string")return nI(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return nI(t,e)}}function nI(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function PTe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function ETe(t){if(Array.isArray(t))return t}var Bx=function(e,a,r){return e+(a-e)*r},iI=function(e){var a=e.from,r=e.to;return a!==r},NTe=function t(e,a,r){var i=CR(function(l,c){if(iI(c)){var n=e(c.from,c.to,c.velocity),v=bTe(n,2),R=v[0],x=v[1];return Mc(Mc({},c),{},{from:R,velocity:x})}return c},a);return r<1?CR(function(l,c){return iI(c)?Mc(Mc({},c),{},{velocity:Bx(c.velocity,i[l].velocity,r),from:Bx(c.from,i[l].from,r)}):c},a):t(e,i,r-1)};const OTe=function(t,e,a,r,i){var l=oTe(t,e),c=l.reduce(function(H,W){return Mc(Mc({},H),{},rI({},W,[t[W],e[W]]))},{}),n=l.reduce(function(H,W){return Mc(Mc({},H),{},rI({},W,{from:t[W],velocity:0,to:e[W]}))},{}),v=-1,R,x,N=function(){return null},L=function(){return CR(function(W,ee){return ee.from},n)},F=function(){return!Object.values(n).filter(iI).length},j=function(W){R||(R=W);var ee=W-R,se=ee/a.dt;n=NTe(a,n,se),i(Mc(Mc(Mc({},t),e),L())),R=W,F()||(v=requestAnimationFrame(N))},$=function(W){x||(x=W);var ee=(W-x)/r,se=CR(function(le,me){return Bx.apply(void 0,N9(me).concat([a(ee)]))},c);if(i(Mc(Mc(Mc({},t),e),se)),ee<1)v=requestAnimationFrame(N);else{var fe=CR(function(le,me){return Bx.apply(void 0,N9(me).concat([a(1)]))},c);i(Mc(Mc(Mc({},t),e),fe))}};return N=a.isStepper?j:$,function(){return requestAnimationFrame(N),function(){cancelAnimationFrame(v)}}};function U_(t){"@babel/helpers - typeof";return U_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U_(t)}var VTe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function zTe(t,e){if(t==null)return{};var a=DTe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function DTe(t,e){if(t==null)return{};var a={},r=Object.keys(t),i,l;for(l=0;l<r.length;l++)i=r[l],!(e.indexOf(i)>=0)&&(a[i]=t[i]);return a}function m5(t){return FTe(t)||LTe(t)||ITe(t)||MTe()}function MTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ITe(t,e){if(t){if(typeof t=="string")return sI(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return sI(t,e)}}function LTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function FTe(t){if(Array.isArray(t))return sI(t)}function sI(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function V9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Dp(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?V9(Object(a),!0).forEach(function(r){pR(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):V9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function pR(t,e,a){return e=jQ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function kTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function UTe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jQ(r.key),r)}}function BTe(t,e,a){return e&&UTe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function jQ(t){var e=jTe(t,"string");return U_(e)==="symbol"?e:String(e)}function jTe(t,e){if(U_(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(U_(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oI(t,e)}function oI(t,e){return oI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},oI(t,e)}function ZTe(t){var e=qTe();return function(){var r=jx(t),i;if(e){var l=jx(this).constructor;i=Reflect.construct(r,arguments,l)}else i=r.apply(this,arguments);return lI(this,i)}}function lI(t,e){if(e&&(U_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uI(t)}function uI(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qTe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function jx(t){return jx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},jx(t)}var np=function(t){GTe(a,t);var e=ZTe(a);function a(r,i){var l;kTe(this,a),l=e.call(this,r,i);var c=l.props,n=c.isActive,v=c.attributeName,R=c.from,x=c.to,N=c.steps,L=c.children,F=c.duration;if(l.handleStyleChange=l.handleStyleChange.bind(uI(l)),l.changeStyle=l.changeStyle.bind(uI(l)),!n||F<=0)return l.state={style:{}},typeof L=="function"&&(l.state={style:x}),lI(l);if(N&&N.length)l.state={style:N[0].style};else if(R){if(typeof L=="function")return l.state={style:R},lI(l);l.state={style:v?pR({},v,R):R}}else l.state={style:{}};return l}return BTe(a,[{key:"componentDidMount",value:function(){var i=this.props,l=i.isActive,c=i.canBegin;this.mounted=!0,!(!l||!c)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var l=this.props,c=l.isActive,n=l.canBegin,v=l.attributeName,R=l.shouldReAnimate,x=l.to,N=l.from,L=this.state.style;if(n){if(!c){var F={style:v?pR({},v,x):x};this.state&&L&&(v&&L[v]!==x||!v&&L!==x)&&this.setState(F);return}if(!(XRe(i.to,x)&&i.canBegin&&i.isActive)){var j=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var $=j||R?N:i.to;if(this.state&&L){var H={style:v?pR({},v,$):$};(v&&L[v]!==$||!v&&L!==$)&&this.setState(H)}this.runAnimation(Dp(Dp({},this.props),{},{from:$,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var l=this,c=i.from,n=i.to,v=i.duration,R=i.easing,x=i.begin,N=i.onAnimationEnd,L=i.onAnimationStart,F=OTe(c,n,_Te(R),v,this.changeStyle),j=function(){l.stopJSAnimation=F()};this.manager.start([L,x,j,v,N])}},{key:"runStepAnimation",value:function(i){var l=this,c=i.steps,n=i.begin,v=i.onAnimationStart,R=c[0],x=R.style,N=R.duration,L=N===void 0?0:N,F=function($,H,W){if(W===0)return $;var ee=H.duration,se=H.easing,fe=se===void 0?"ease":se,le=H.style,me=H.properties,ge=H.onAnimationEnd,Re=W>0?c[W-1]:H,we=me||Object.keys(le);if(typeof fe=="function"||fe==="spring")return[].concat(m5($),[l.runJSAnimation.bind(l,{from:Re.style,to:le,duration:ee,easing:fe}),ee]);var Ve=x9(we,ee,fe),oe=Dp(Dp(Dp({},Re.style),le),{},{transition:Ve});return[].concat(m5($),[oe,ee,ge]).filter(lTe)};return this.manager.start([v].concat(m5(c.reduce(F,[x,Math.max(L,n)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=nTe());var l=i.begin,c=i.duration,n=i.attributeName,v=i.to,R=i.easing,x=i.onAnimationStart,N=i.onAnimationEnd,L=i.steps,F=i.children,j=this.manager;if(this.unSubscribe=j.subscribe(this.handleStyleChange),typeof R=="function"||typeof F=="function"||R==="spring"){this.runJSAnimation(i);return}if(L.length>1){this.runStepAnimation(i);return}var $=n?pR({},n,v):v,H=x9(Object.keys($),c,R);j.start([x,l,Dp(Dp({},$),{},{transition:H}),c,N])}},{key:"render",value:function(){var i=this.props,l=i.children;i.begin;var c=i.duration;i.attributeName,i.easing;var n=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var v=zTe(i,VTe),R=ie.Children.count(l),x=this.state.style;if(typeof l=="function")return l(x);if(!n||R===0||c<=0)return l;var N=function(F){var j=F.props,$=j.style,H=$===void 0?{}:$,W=j.className,ee=ie.cloneElement(F,Dp(Dp({},v),{},{style:Dp(Dp({},H),x),className:W}));return ee};return R===1?N(ie.Children.only(l)):Ot.createElement("div",null,ie.Children.map(l,function(L){return N(L)}))}}]),a}(ie.PureComponent);np.displayName="Animate";np.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};np.propTypes={from:Bs.oneOfType([Bs.object,Bs.string]),to:Bs.oneOfType([Bs.object,Bs.string]),attributeName:Bs.string,duration:Bs.number,begin:Bs.number,easing:Bs.oneOfType([Bs.string,Bs.func]),steps:Bs.arrayOf(Bs.shape({duration:Bs.number.isRequired,style:Bs.object.isRequired,easing:Bs.oneOfType([Bs.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Bs.func]),properties:Bs.arrayOf("string"),onAnimationEnd:Bs.func})),children:Bs.oneOfType([Bs.node,Bs.func]),isActive:Bs.bool,canBegin:Bs.bool,onAnimationEnd:Bs.func,shouldReAnimate:Bs.bool,onAnimationStart:Bs.func,onAnimationReStart:Bs.func};function RT(t){"@babel/helpers - typeof";return RT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RT(t)}function Gx(){return Gx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Gx.apply(this,arguments)}function HTe(t,e){return YTe(t)||WTe(t,e)||KTe(t,e)||$Te()}function $Te(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KTe(t,e){if(t){if(typeof t=="string")return z9(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return z9(t,e)}}function z9(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function WTe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function YTe(t){if(Array.isArray(t))return t}function D9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function M9(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?D9(Object(a),!0).forEach(function(r){XTe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):D9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function XTe(t,e,a){return e=JTe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function JTe(t){var e=QTe(t,"string");return RT(e)=="symbol"?e:e+""}function QTe(t,e){if(RT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(RT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var I9=function(e,a,r,i,l){var c=Math.min(Math.abs(r)/2,Math.abs(i)/2),n=i>=0?1:-1,v=r>=0?1:-1,R=i>=0&&r>=0||i<0&&r<0?1:0,x;if(c>0&&l instanceof Array){for(var N=[0,0,0,0],L=0,F=4;L<F;L++)N[L]=l[L]>c?c:l[L];x="M".concat(e,",").concat(a+n*N[0]),N[0]>0&&(x+="A ".concat(N[0],",").concat(N[0],",0,0,").concat(R,",").concat(e+v*N[0],",").concat(a)),x+="L ".concat(e+r-v*N[1],",").concat(a),N[1]>0&&(x+="A ".concat(N[1],",").concat(N[1],",0,0,").concat(R,`,
        `).concat(e+r,",").concat(a+n*N[1])),x+="L ".concat(e+r,",").concat(a+i-n*N[2]),N[2]>0&&(x+="A ".concat(N[2],",").concat(N[2],",0,0,").concat(R,`,
        `).concat(e+r-v*N[2],",").concat(a+i)),x+="L ".concat(e+v*N[3],",").concat(a+i),N[3]>0&&(x+="A ".concat(N[3],",").concat(N[3],",0,0,").concat(R,`,
        `).concat(e,",").concat(a+i-n*N[3])),x+="Z"}else if(c>0&&l===+l&&l>0){var j=Math.min(c,l);x="M ".concat(e,",").concat(a+n*j,`
            A `).concat(j,",").concat(j,",0,0,").concat(R,",").concat(e+v*j,",").concat(a,`
            L `).concat(e+r-v*j,",").concat(a,`
            A `).concat(j,",").concat(j,",0,0,").concat(R,",").concat(e+r,",").concat(a+n*j,`
            L `).concat(e+r,",").concat(a+i-n*j,`
            A `).concat(j,",").concat(j,",0,0,").concat(R,",").concat(e+r-v*j,",").concat(a+i,`
            L `).concat(e+v*j,",").concat(a+i,`
            A `).concat(j,",").concat(j,",0,0,").concat(R,",").concat(e,",").concat(a+i-n*j," Z")}else x="M ".concat(e,",").concat(a," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return x},eCe=function(e,a){if(!e||!a)return!1;var r=e.x,i=e.y,l=a.x,c=a.y,n=a.width,v=a.height;if(Math.abs(n)>0&&Math.abs(v)>0){var R=Math.min(l,l+n),x=Math.max(l,l+n),N=Math.min(c,c+v),L=Math.max(c,c+v);return r>=R&&r<=x&&i>=N&&i<=L}return!1},tCe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},P4=function(e){var a=M9(M9({},tCe),e),r=ie.useRef(),i=ie.useState(-1),l=HTe(i,2),c=l[0],n=l[1];ie.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var fe=r.current.getTotalLength();fe&&n(fe)}catch{}},[]);var v=a.x,R=a.y,x=a.width,N=a.height,L=a.radius,F=a.className,j=a.animationEasing,$=a.animationDuration,H=a.animationBegin,W=a.isAnimationActive,ee=a.isUpdateAnimationActive;if(v!==+v||R!==+R||x!==+x||N!==+N||x===0||N===0)return null;var se=gi("recharts-rectangle",F);return ee?Ot.createElement(np,{canBegin:c>0,from:{width:x,height:N,x:v,y:R},to:{width:x,height:N,x:v,y:R},duration:$,animationEasing:j,isActive:ee},function(fe){var le=fe.width,me=fe.height,ge=fe.x,Re=fe.y;return Ot.createElement(np,{canBegin:c>0,from:"0px ".concat(c===-1?1:c,"px"),to:"".concat(c,"px 0px"),attributeName:"strokeDasharray",begin:H,duration:$,isActive:W,easing:j},Ot.createElement("path",Gx({},gn(a,!0),{className:se,d:I9(ge,Re,le,me,L),ref:r})))}):Ot.createElement("path",Gx({},gn(a,!0),{className:se,d:I9(v,R,x,N,L)}))},aCe=["points","className","baseLinePoints","connectNulls"];function e_(){return e_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},e_.apply(this,arguments)}function rCe(t,e){if(t==null)return{};var a=nCe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function nCe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function L9(t){return lCe(t)||oCe(t)||sCe(t)||iCe()}function iCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sCe(t,e){if(t){if(typeof t=="string")return cI(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return cI(t,e)}}function oCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function lCe(t){if(Array.isArray(t))return cI(t)}function cI(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var F9=function(e){return e&&e.x===+e.x&&e.y===+e.y},uCe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=[[]];return e.forEach(function(r){F9(r)?a[a.length-1].push(r):a[a.length-1].length>0&&a.push([])}),F9(e[0])&&a[a.length-1].push(e[0]),a[a.length-1].length<=0&&(a=a.slice(0,-1)),a},SR=function(e,a){var r=uCe(e);a&&(r=[r.reduce(function(l,c){return[].concat(L9(l),L9(c))},[])]);var i=r.map(function(l){return l.reduce(function(c,n,v){return"".concat(c).concat(v===0?"M":"L").concat(n.x,",").concat(n.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},cCe=function(e,a,r){var i=SR(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(SR(a.reverse(),r).slice(1))},dCe=function(e){var a=e.points,r=e.className,i=e.baseLinePoints,l=e.connectNulls,c=rCe(e,aCe);if(!a||!a.length)return null;var n=gi("recharts-polygon",r);if(i&&i.length){var v=c.stroke&&c.stroke!=="none",R=cCe(a,i,l);return Ot.createElement("g",{className:n},Ot.createElement("path",e_({},gn(c,!0),{fill:R.slice(-1)==="Z"?c.fill:"none",stroke:"none",d:R})),v?Ot.createElement("path",e_({},gn(c,!0),{fill:"none",d:SR(a,l)})):null,v?Ot.createElement("path",e_({},gn(c,!0),{fill:"none",d:SR(i,l)})):null)}var x=SR(a,l);return Ot.createElement("path",e_({},gn(c,!0),{fill:x.slice(-1)==="Z"?c.fill:"none",className:n,d:x}))};function dI(){return dI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},dI.apply(this,arguments)}var AC=function(e){var a=e.cx,r=e.cy,i=e.r,l=e.className,c=gi("recharts-dot",l);return a===+a&&r===+r&&i===+i?Ot.createElement("circle",dI({},gn(e,!1),fx(e),{className:c,cx:a,cy:r,r:i})):null};function TT(t){"@babel/helpers - typeof";return TT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},TT(t)}var hCe=["x","y","top","left","width","height","className"];function hI(){return hI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},hI.apply(this,arguments)}function k9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function fCe(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?k9(Object(a),!0).forEach(function(r){pCe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):k9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function pCe(t,e,a){return e=mCe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function mCe(t){var e=gCe(t,"string");return TT(e)=="symbol"?e:e+""}function gCe(t,e){if(TT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(TT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yCe(t,e){if(t==null)return{};var a=ACe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function ACe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}var vCe=function(e,a,r,i,l,c){return"M".concat(e,",").concat(l,"v").concat(i,"M").concat(c,",").concat(a,"h").concat(r)},_Ce=function(e){var a=e.x,r=a===void 0?0:a,i=e.y,l=i===void 0?0:i,c=e.top,n=c===void 0?0:c,v=e.left,R=v===void 0?0:v,x=e.width,N=x===void 0?0:x,L=e.height,F=L===void 0?0:L,j=e.className,$=yCe(e,hCe),H=fCe({x:r,y:l,top:n,left:R,width:N,height:F},$);return!_r(r)||!_r(l)||!_r(N)||!_r(F)||!_r(n)||!_r(R)?null:Ot.createElement("path",hI({},gn(H,!0),{className:gi("recharts-cross",j),d:vCe(r,l,N,F,n,R)}))},g5,U9;function wCe(){if(U9)return g5;U9=1;var t=VP(),e=rQ(),a=Xm();function r(i,l){return i&&i.length?t(i,a(l,2),e):void 0}return g5=r,g5}var RCe=wCe();const TCe=ss(RCe);var y5,B9;function CCe(){if(B9)return y5;B9=1;var t=VP(),e=Xm(),a=nQ();function r(i,l){return i&&i.length?t(i,e(l,2),a):void 0}return y5=r,y5}var SCe=CCe();const bCe=ss(SCe);var xCe=["cx","cy","angle","ticks","axisLine"],PCe=["ticks","tick","angle","tickFormatter","stroke"];function B_(t){"@babel/helpers - typeof";return B_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B_(t)}function bR(){return bR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},bR.apply(this,arguments)}function j9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function ev(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?j9(Object(a),!0).forEach(function(r){IP(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):j9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function G9(t,e){if(t==null)return{};var a=ECe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function ECe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function NCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z9(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ZQ(r.key),r)}}function OCe(t,e,a){return e&&Z9(t.prototype,e),a&&Z9(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function VCe(t,e,a){return e=Zx(e),zCe(t,GQ()?Reflect.construct(e,a||[],Zx(t).constructor):e.apply(t,a))}function zCe(t,e){if(e&&(B_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DCe(t)}function DCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function GQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GQ=function(){return!!t})()}function Zx(t){return Zx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Zx(t)}function MCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fI(t,e)}function fI(t,e){return fI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},fI(t,e)}function IP(t,e,a){return e=ZQ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function ZQ(t){var e=ICe(t,"string");return B_(e)=="symbol"?e:e+""}function ICe(t,e){if(B_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(B_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var LP=function(t){function e(){return NCe(this,e),VCe(this,e,arguments)}return MCe(e,t),OCe(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,l=this.props,c=l.angle,n=l.cx,v=l.cy;return Po(n,v,i,c)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,l=r.cy,c=r.angle,n=r.ticks,v=TCe(n,function(x){return x.coordinate||0}),R=bCe(n,function(x){return x.coordinate||0});return{cx:i,cy:l,startAngle:c,endAngle:c,innerRadius:R.coordinate||0,outerRadius:v.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,l=r.cy,c=r.angle,n=r.ticks,v=r.axisLine,R=G9(r,xCe),x=n.reduce(function(j,$){return[Math.min(j[0],$.coordinate),Math.max(j[1],$.coordinate)]},[1/0,-1/0]),N=Po(i,l,x[0],c),L=Po(i,l,x[1],c),F=ev(ev(ev({},gn(R,!1)),{},{fill:"none"},gn(v,!1)),{},{x1:N.x,y1:N.y,x2:L.x,y2:L.y});return Ot.createElement("line",bR({className:"recharts-polar-radius-axis-line"},F))}},{key:"renderTicks",value:function(){var r=this,i=this.props,l=i.ticks,c=i.tick,n=i.angle,v=i.tickFormatter,R=i.stroke,x=G9(i,PCe),N=this.getTickTextAnchor(),L=gn(x,!1),F=gn(c,!1),j=l.map(function($,H){var W=r.getTickValueCoord($),ee=ev(ev(ev(ev({textAnchor:N,transform:"rotate(".concat(90-n,", ").concat(W.x,", ").concat(W.y,")")},L),{},{stroke:"none",fill:R},F),{},{index:H},W),{},{payload:$});return Ot.createElement(_i,bR({className:gi("recharts-polar-radius-axis-tick",VQ(c)),key:"tick-".concat($.coordinate)},Qy(r.props,$,H)),e.renderTickItem(c,ee,v?v($.value,H):$.value))});return Ot.createElement(_i,{className:"recharts-polar-radius-axis-ticks"},j)}},{key:"render",value:function(){var r=this.props,i=r.ticks,l=r.axisLine,c=r.tick;return!i||!i.length?null:Ot.createElement(_i,{className:gi("recharts-polar-radius-axis",this.props.className)},l&&this.renderAxisLine(),c&&this.renderTicks(),cc.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,l){var c;return Ot.isValidElement(r)?c=Ot.cloneElement(r,i):Zn(r)?c=r(i):c=Ot.createElement(Mv,bR({},i,{className:"recharts-polar-radius-axis-tick-value"}),l),c}}])}(ie.PureComponent);IP(LP,"displayName","PolarRadiusAxis");IP(LP,"axisType","radiusAxis");IP(LP,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function j_(t){"@babel/helpers - typeof";return j_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j_(t)}function ov(){return ov=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ov.apply(this,arguments)}function q9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function tv(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?q9(Object(a),!0).forEach(function(r){FP(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):q9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function LCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H9(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,HQ(r.key),r)}}function FCe(t,e,a){return e&&H9(t.prototype,e),a&&H9(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function kCe(t,e,a){return e=qx(e),UCe(t,qQ()?Reflect.construct(e,a||[],qx(t).constructor):e.apply(t,a))}function UCe(t,e){if(e&&(j_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BCe(t)}function BCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qQ=function(){return!!t})()}function qx(t){return qx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},qx(t)}function jCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pI(t,e)}function pI(t,e){return pI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},pI(t,e)}function FP(t,e,a){return e=HQ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function HQ(t){var e=GCe(t,"string");return j_(e)=="symbol"?e:e+""}function GCe(t,e){if(j_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(j_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ZCe=Math.PI/180,qCe=1e-5,kP=function(t){function e(){return LCe(this,e),kCe(this,e,arguments)}return jCe(e,t),FCe(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,l=i.cx,c=i.cy,n=i.radius,v=i.orientation,R=i.tickSize,x=R||8,N=Po(l,c,n,r.coordinate),L=Po(l,c,n+(v==="inner"?-1:1)*x,r.coordinate);return{x1:N.x,y1:N.y,x2:L.x,y2:L.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,l=Math.cos(-r.coordinate*ZCe),c;return l>qCe?c=i==="outer"?"start":"end":l<-1e-5?c=i==="outer"?"end":"start":c="middle",c}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,l=r.cy,c=r.radius,n=r.axisLine,v=r.axisLineType,R=tv(tv({},gn(this.props,!1)),{},{fill:"none"},gn(n,!1));if(v==="circle")return Ot.createElement(AC,ov({className:"recharts-polar-angle-axis-line"},R,{cx:i,cy:l,r:c}));var x=this.props.ticks,N=x.map(function(L){return Po(i,l,c,L.coordinate)});return Ot.createElement(dCe,ov({className:"recharts-polar-angle-axis-line"},R,{points:N}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,l=i.ticks,c=i.tick,n=i.tickLine,v=i.tickFormatter,R=i.stroke,x=gn(this.props,!1),N=gn(c,!1),L=tv(tv({},x),{},{fill:"none"},gn(n,!1)),F=l.map(function(j,$){var H=r.getTickLineCoord(j),W=r.getTickTextAnchor(j),ee=tv(tv(tv({textAnchor:W},x),{},{stroke:"none",fill:R},N),{},{index:$,payload:j,x:H.x2,y:H.y2});return Ot.createElement(_i,ov({className:gi("recharts-polar-angle-axis-tick",VQ(c)),key:"tick-".concat(j.coordinate)},Qy(r.props,j,$)),n&&Ot.createElement("line",ov({className:"recharts-polar-angle-axis-tick-line"},L,H)),c&&e.renderTickItem(c,ee,v?v(j.value,$):j.value))});return Ot.createElement(_i,{className:"recharts-polar-angle-axis-ticks"},F)}},{key:"render",value:function(){var r=this.props,i=r.ticks,l=r.radius,c=r.axisLine;return l<=0||!i||!i.length?null:Ot.createElement(_i,{className:gi("recharts-polar-angle-axis",this.props.className)},c&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,l){var c;return Ot.isValidElement(r)?c=Ot.cloneElement(r,i):Zn(r)?c=r(i):c=Ot.createElement(Mv,ov({},i,{className:"recharts-polar-angle-axis-tick-value"}),l),c}}])}(ie.PureComponent);FP(kP,"displayName","PolarAngleAxis");FP(kP,"axisType","angleAxis");FP(kP,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var A5,$9;function HCe(){if($9)return A5;$9=1;var t=aJ(),e=t(Object.getPrototypeOf,Object);return A5=e,A5}var v5,K9;function $Ce(){if(K9)return v5;K9=1;var t=Bg(),e=HCe(),a=jg(),r="[object Object]",i=Function.prototype,l=Object.prototype,c=i.toString,n=l.hasOwnProperty,v=c.call(Object);function R(x){if(!a(x)||t(x)!=r)return!1;var N=e(x);if(N===null)return!0;var L=n.call(N,"constructor")&&N.constructor;return typeof L=="function"&&L instanceof L&&c.call(L)==v}return v5=R,v5}var KCe=$Ce();const WCe=ss(KCe);var _5,W9;function YCe(){if(W9)return _5;W9=1;var t=Bg(),e=jg(),a="[object Boolean]";function r(i){return i===!0||i===!1||e(i)&&t(i)==a}return _5=r,_5}var XCe=YCe();const JCe=ss(XCe);function CT(t){"@babel/helpers - typeof";return CT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},CT(t)}function Hx(){return Hx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Hx.apply(this,arguments)}function QCe(t,e){return rSe(t)||aSe(t,e)||tSe(t,e)||eSe()}function eSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tSe(t,e){if(t){if(typeof t=="string")return Y9(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Y9(t,e)}}function Y9(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function aSe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function rSe(t){if(Array.isArray(t))return t}function X9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function J9(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?X9(Object(a),!0).forEach(function(r){nSe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):X9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function nSe(t,e,a){return e=iSe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function iSe(t){var e=sSe(t,"string");return CT(e)=="symbol"?e:e+""}function sSe(t,e){if(CT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(CT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Q9=function(e,a,r,i,l){var c=r-i,n;return n="M ".concat(e,",").concat(a),n+="L ".concat(e+r,",").concat(a),n+="L ".concat(e+r-c/2,",").concat(a+l),n+="L ".concat(e+r-c/2-i,",").concat(a+l),n+="L ".concat(e,",").concat(a," Z"),n},oSe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},lSe=function(e){var a=J9(J9({},oSe),e),r=ie.useRef(),i=ie.useState(-1),l=QCe(i,2),c=l[0],n=l[1];ie.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var se=r.current.getTotalLength();se&&n(se)}catch{}},[]);var v=a.x,R=a.y,x=a.upperWidth,N=a.lowerWidth,L=a.height,F=a.className,j=a.animationEasing,$=a.animationDuration,H=a.animationBegin,W=a.isUpdateAnimationActive;if(v!==+v||R!==+R||x!==+x||N!==+N||L!==+L||x===0&&N===0||L===0)return null;var ee=gi("recharts-trapezoid",F);return W?Ot.createElement(np,{canBegin:c>0,from:{upperWidth:0,lowerWidth:0,height:L,x:v,y:R},to:{upperWidth:x,lowerWidth:N,height:L,x:v,y:R},duration:$,animationEasing:j,isActive:W},function(se){var fe=se.upperWidth,le=se.lowerWidth,me=se.height,ge=se.x,Re=se.y;return Ot.createElement(np,{canBegin:c>0,from:"0px ".concat(c===-1?1:c,"px"),to:"".concat(c,"px 0px"),attributeName:"strokeDasharray",begin:H,duration:$,easing:j},Ot.createElement("path",Hx({},gn(a,!0),{className:ee,d:Q9(ge,Re,fe,le,me),ref:r})))}):Ot.createElement("g",null,Ot.createElement("path",Hx({},gn(a,!0),{className:ee,d:Q9(v,R,x,N,L)})))},uSe=["option","shapeType","propTransformer","activeClassName","isActive"];function ST(t){"@babel/helpers - typeof";return ST=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ST(t)}function cSe(t,e){if(t==null)return{};var a=dSe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function dSe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function eZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function $x(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?eZ(Object(a),!0).forEach(function(r){hSe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):eZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function hSe(t,e,a){return e=fSe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function fSe(t){var e=pSe(t,"string");return ST(e)=="symbol"?e:e+""}function pSe(t,e){if(ST(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(ST(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mSe(t,e){return $x($x({},e),t)}function gSe(t,e){return t==="symbols"}function tZ(t){var e=t.shapeType,a=t.elementProps;switch(e){case"rectangle":return Ot.createElement(P4,a);case"trapezoid":return Ot.createElement(lSe,a);case"sector":return Ot.createElement(MQ,a);case"symbols":if(gSe(e))return Ot.createElement(RP,a);break;default:return null}}function ySe(t){return ie.isValidElement(t)?t.props:t}function Kx(t){var e=t.option,a=t.shapeType,r=t.propTransformer,i=r===void 0?mSe:r,l=t.activeClassName,c=l===void 0?"recharts-active-shape":l,n=t.isActive,v=cSe(t,uSe),R;if(ie.isValidElement(e))R=ie.cloneElement(e,$x($x({},v),ySe(e)));else if(Zn(e))R=e(v);else if(WCe(e)&&!JCe(e)){var x=i(e,v);R=Ot.createElement(tZ,{shapeType:a,elementProps:x})}else{var N=v;R=Ot.createElement(tZ,{shapeType:a,elementProps:N})}return n?Ot.createElement(_i,{className:c},R):R}function UP(t,e){return e!=null&&"trapezoids"in t.props}function BP(t,e){return e!=null&&"sectors"in t.props}function bT(t,e){return e!=null&&"points"in t.props}function ASe(t,e){var a,r,i=t.x===(e==null||(a=e.labelViewBox)===null||a===void 0?void 0:a.x)||t.x===e.x,l=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&l}function vSe(t,e){var a=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return a&&r}function _Se(t,e){var a=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return a&&r&&i}function wSe(t,e){var a;return UP(t,e)?a=ASe:BP(t,e)?a=vSe:bT(t,e)&&(a=_Se),a}function RSe(t,e){var a;return UP(t,e)?a="trapezoids":BP(t,e)?a="sectors":bT(t,e)&&(a="points"),a}function TSe(t,e){if(UP(t,e)){var a;return(a=e.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}if(BP(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return bT(t,e)?e.payload:{}}function CSe(t){var e=t.activeTooltipItem,a=t.graphicalItem,r=t.itemData,i=RSe(a,e),l=TSe(a,e),c=r.filter(function(v,R){var x=eA(l,v),N=a.props[i].filter(function(j){var $=wSe(a,e);return $(j,e)}),L=a.props[i].indexOf(N[N.length-1]),F=R===L;return x&&F}),n=r.indexOf(c[c.length-1]);return n}var Sb;function G_(t){"@babel/helpers - typeof";return G_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G_(t)}function t_(){return t_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},t_.apply(this,arguments)}function aZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function bo(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?aZ(Object(a),!0).forEach(function(r){Qf(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):aZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function SSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rZ(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,KQ(r.key),r)}}function bSe(t,e,a){return e&&rZ(t.prototype,e),a&&rZ(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function xSe(t,e,a){return e=Wx(e),PSe(t,$Q()?Reflect.construct(e,a||[],Wx(t).constructor):e.apply(t,a))}function PSe(t,e){if(e&&(G_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ESe(t)}function ESe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $Q(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($Q=function(){return!!t})()}function Wx(t){return Wx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Wx(t)}function NSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mI(t,e)}function mI(t,e){return mI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},mI(t,e)}function Qf(t,e,a){return e=KQ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function KQ(t){var e=OSe(t,"string");return G_(e)=="symbol"?e:e+""}function OSe(t,e){if(G_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(G_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var qg=function(t){function e(a){var r;return SSe(this,e),r=xSe(this,e,[a]),Qf(r,"pieRef",null),Qf(r,"sectorRefs",[]),Qf(r,"id",cA("recharts-pie-")),Qf(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Zn(i)&&i()}),Qf(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Zn(i)&&i()}),r.state={isAnimationFinished:!a.isAnimationActive,prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,sectorToFocus:0},r}return NSe(e,t),bSe(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.label,n=l.labelLine,v=l.dataKey,R=l.valueKey,x=gn(this.props,!1),N=gn(c,!1),L=gn(n,!1),F=c&&c.offsetRadius||20,j=r.map(function($,H){var W=($.startAngle+$.endAngle)/2,ee=Po($.cx,$.cy,$.outerRadius+F,W),se=bo(bo(bo(bo({},x),$),{},{stroke:"none"},N),{},{index:H,textAnchor:e.getTextAnchor(ee.x,$.cx)},ee),fe=bo(bo(bo(bo({},x),$),{},{fill:"none",stroke:$.fill},L),{},{index:H,points:[Po($.cx,$.cy,$.outerRadius,W),ee]}),le=v;return qn(v)&&qn(R)?le="value":qn(v)&&(le=R),Ot.createElement(_i,{key:"label-".concat($.startAngle,"-").concat($.endAngle,"-").concat($.midAngle,"-").concat(H)},n&&e.renderLabelLineItem(n,fe,"line"),e.renderLabelItem(c,se,Fo($,le)))});return Ot.createElement(_i,{className:"recharts-pie-labels"},j)}},{key:"renderSectorsStatically",value:function(r){var i=this,l=this.props,c=l.activeShape,n=l.blendStroke,v=l.inactiveShape;return r.map(function(R,x){if((R==null?void 0:R.startAngle)===0&&(R==null?void 0:R.endAngle)===0&&r.length!==1)return null;var N=i.isActiveIndex(x),L=v&&i.hasActiveIndex()?v:null,F=N?c:L,j=bo(bo({},R),{},{stroke:n?R.fill:R.stroke,tabIndex:-1});return Ot.createElement(_i,t_({ref:function(H){H&&!i.sectorRefs.includes(H)&&i.sectorRefs.push(H)},tabIndex:-1,className:"recharts-pie-sector"},Qy(i.props,R,x),{key:"sector-".concat(R==null?void 0:R.startAngle,"-").concat(R==null?void 0:R.endAngle,"-").concat(R.midAngle,"-").concat(x)}),Ot.createElement(Kx,t_({option:F,isActive:N,shapeType:"sector"},j)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,l=i.sectors,c=i.isAnimationActive,n=i.animationBegin,v=i.animationDuration,R=i.animationEasing,x=i.animationId,N=this.state,L=N.prevSectors,F=N.prevIsAnimationActive;return Ot.createElement(np,{begin:n,duration:v,isActive:c,easing:R,from:{t:0},to:{t:1},key:"pie-".concat(x,"-").concat(F),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(j){var $=j.t,H=[],W=l&&l[0],ee=W.startAngle;return l.forEach(function(se,fe){var le=L&&L[fe],me=fe>0?vf(se,"paddingAngle",0):0;if(le){var ge=ml(le.endAngle-le.startAngle,se.endAngle-se.startAngle),Re=bo(bo({},se),{},{startAngle:ee+me,endAngle:ee+ge($)+me});H.push(Re),ee=Re.endAngle}else{var we=se.endAngle,Ve=se.startAngle,oe=ml(0,we-Ve),_e=oe($),Fe=bo(bo({},se),{},{startAngle:ee+me,endAngle:ee+_e+me});H.push(Fe),ee=Fe.endAngle}}),Ot.createElement(_i,null,r.renderSectorsStatically(H))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(l){if(!l.altKey)switch(l.key){case"ArrowLeft":{var c=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[c].focus(),i.setState({sectorToFocus:c});break}case"ArrowRight":{var n=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[n].focus(),i.setState({sectorToFocus:n});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,l=r.isAnimationActive,c=this.state.prevSectors;return l&&i&&i.length&&(!c||!eA(c,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,l=i.hide,c=i.sectors,n=i.className,v=i.label,R=i.cx,x=i.cy,N=i.innerRadius,L=i.outerRadius,F=i.isAnimationActive,j=this.state.isAnimationFinished;if(l||!c||!c.length||!_r(R)||!_r(x)||!_r(N)||!_r(L))return null;var $=gi("recharts-pie",n);return Ot.createElement(_i,{tabIndex:this.props.rootTabIndex,className:$,ref:function(W){r.pieRef=W}},this.renderSectors(),v&&this.renderLabels(c),cc.renderCallByParent(this.props,null,!1),(!F||j)&&ap.renderCallByParent(this.props,c,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,l){if(Ot.isValidElement(r))return Ot.cloneElement(r,i);if(Zn(r))return r(i);var c=gi("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return Ot.createElement(Wy,t_({},i,{key:l,type:"linear",className:c}))}},{key:"renderLabelItem",value:function(r,i,l){if(Ot.isValidElement(r))return Ot.cloneElement(r,i);var c=l;if(Zn(r)&&(c=r(i),Ot.isValidElement(c)))return c;var n=gi("recharts-pie-label-text",typeof r!="boolean"&&!Zn(r)?r.className:"");return Ot.createElement(Mv,t_({},i,{alignmentBaseline:"middle",className:n}),c)}}])}(ie.PureComponent);Sb=qg;Qf(qg,"displayName","Pie");Qf(qg,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Gg.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Qf(qg,"parseDeltaAngle",function(t,e){var a=sh(e-t),r=Math.min(Math.abs(e-t),360);return a*r});Qf(qg,"getRealPieData",function(t){var e=t.data,a=t.children,r=gn(t,!1),i=hh(a,D_);return e&&e.length?e.map(function(l,c){return bo(bo(bo({payload:l},r),l),i&&i[c]&&i[c].props)}):i&&i.length?i.map(function(l){return bo(bo({},r),l.props)}):[]});Qf(qg,"parseCoordinateOfPie",function(t,e){var a=e.top,r=e.left,i=e.width,l=e.height,c=OQ(i,l),n=r+oh(t.cx,i,i/2),v=a+oh(t.cy,l,l/2),R=oh(t.innerRadius,c,0),x=oh(t.outerRadius,c,c*.8),N=t.maxRadius||Math.sqrt(i*i+l*l)/2;return{cx:n,cy:v,innerRadius:R,outerRadius:x,maxRadius:N}});Qf(qg,"getComposedData",function(t){var e=t.item,a=t.offset,r=e.type.defaultProps!==void 0?bo(bo({},e.type.defaultProps),e.props):e.props,i=Sb.getRealPieData(r);if(!i||!i.length)return null;var l=r.cornerRadius,c=r.startAngle,n=r.endAngle,v=r.paddingAngle,R=r.dataKey,x=r.nameKey,N=r.valueKey,L=r.tooltipType,F=Math.abs(r.minAngle),j=Sb.parseCoordinateOfPie(r,a),$=Sb.parseDeltaAngle(c,n),H=Math.abs($),W=R;qn(R)&&qn(N)?(qp(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),W="value"):qn(R)&&(qp(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),W=N);var ee=i.filter(function(Re){return Fo(Re,W,0)!==0}).length,se=(H>=360?ee:ee-1)*v,fe=H-ee*F-se,le=i.reduce(function(Re,we){var Ve=Fo(we,W,0);return Re+(_r(Ve)?Ve:0)},0),me;if(le>0){var ge;me=i.map(function(Re,we){var Ve=Fo(Re,W,0),oe=Fo(Re,x,we),_e=(_r(Ve)?Ve:0)/le,Fe;we?Fe=ge.endAngle+sh($)*v*(Ve!==0?1:0):Fe=c;var Ee=Fe+sh($)*((Ve!==0?F:0)+_e*fe),ze=(Fe+Ee)/2,Se=(j.innerRadius+j.outerRadius)/2,je=[{name:oe,value:Ve,payload:Re,dataKey:W,type:L}],Ue=Po(j.cx,j.cy,Se,ze);return ge=bo(bo(bo({percent:_e,cornerRadius:l,name:oe,tooltipPayload:je,midAngle:ze,middleRadius:Se,tooltipPosition:Ue},Re),j),{},{value:Fo(Re,W),startAngle:Fe,endAngle:Ee,payload:Re,paddingAngle:sh($)*v}),ge})}return bo(bo({},j),{},{sectors:me,data:i})});var w5,nZ;function VSe(){if(nZ)return w5;nZ=1;var t=Math.ceil,e=Math.max;function a(r,i,l,c){for(var n=-1,v=e(t((i-r)/(l||1)),0),R=Array(v);v--;)R[c?v:++n]=r,r+=l;return R}return w5=a,w5}var R5,iZ;function WQ(){if(iZ)return R5;iZ=1;var t=AJ(),e=1/0,a=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-1/0){var l=i<0?-1:1;return l*a}return i===i?i:0}return R5=r,R5}var T5,sZ;function zSe(){if(sZ)return T5;sZ=1;var t=VSe(),e=SP(),a=WQ();function r(i){return function(l,c,n){return n&&typeof n!="number"&&e(l,c,n)&&(c=n=void 0),l=a(l),c===void 0?(c=l,l=0):c=a(c),n=n===void 0?l<c?1:-1:a(n),t(l,c,n,i)}}return T5=r,T5}var C5,oZ;function DSe(){if(oZ)return C5;oZ=1;var t=zSe(),e=t();return C5=e,C5}var MSe=DSe();const Yx=ss(MSe);function xT(t){"@babel/helpers - typeof";return xT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xT(t)}function lZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function uZ(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?lZ(Object(a),!0).forEach(function(r){YQ(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):lZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function YQ(t,e,a){return e=ISe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function ISe(t){var e=LSe(t,"string");return xT(e)=="symbol"?e:e+""}function LSe(t,e){if(xT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(xT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var FSe=["Webkit","Moz","O","ms"],kSe=function(e,a){var r=e.replace(/(\w)/,function(l){return l.toUpperCase()}),i=FSe.reduce(function(l,c){return uZ(uZ({},l),{},YQ({},c+r,a))},{});return i[e]=a,i};function Z_(t){"@babel/helpers - typeof";return Z_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z_(t)}function Xx(){return Xx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Xx.apply(this,arguments)}function cZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function S5(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?cZ(Object(a),!0).forEach(function(r){cf(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):cZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function USe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dZ(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,JQ(r.key),r)}}function BSe(t,e,a){return e&&dZ(t.prototype,e),a&&dZ(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function jSe(t,e,a){return e=Jx(e),GSe(t,XQ()?Reflect.construct(e,a||[],Jx(t).constructor):e.apply(t,a))}function GSe(t,e){if(e&&(Z_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZSe(t)}function ZSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XQ=function(){return!!t})()}function Jx(t){return Jx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Jx(t)}function qSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gI(t,e)}function gI(t,e){return gI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},gI(t,e)}function cf(t,e,a){return e=JQ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function JQ(t){var e=HSe(t,"string");return Z_(e)=="symbol"?e:e+""}function HSe(t,e){if(Z_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Z_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var $Se=function(e){var a=e.data,r=e.startIndex,i=e.endIndex,l=e.x,c=e.width,n=e.travellerWidth;if(!a||!a.length)return{};var v=a.length,R=RR().domain(Yx(0,v)).range([l,l+c-n]),x=R.domain().map(function(N){return R(N)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:R(r),endX:R(i),scale:R,scaleValues:x}},hZ=function(e){return e.changedTouches&&!!e.changedTouches.length},q_=function(t){function e(a){var r;return USe(this,e),r=jSe(this,e,[a]),cf(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),cf(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),cf(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,l=i.endIndex,c=i.onDragEnd,n=i.startIndex;c==null||c({endIndex:l,startIndex:n})}),r.detachDragEndListener()}),cf(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),cf(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),cf(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),cf(r,"handleSlideDragStart",function(i){var l=hZ(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:l.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return qSe(e,t),BSe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,l=r.endX,c=this.state.scaleValues,n=this.props,v=n.gap,R=n.data,x=R.length-1,N=Math.min(i,l),L=Math.max(i,l),F=e.getIndexInRange(c,N),j=e.getIndexInRange(c,L);return{startIndex:F-F%v,endIndex:j===x?x:j-j%v}}},{key:"getTextOfTick",value:function(r){var i=this.props,l=i.data,c=i.tickFormatter,n=i.dataKey,v=Fo(l[r],n,r);return Zn(c)?c(v,r):v}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,l=i.slideMoveStartX,c=i.startX,n=i.endX,v=this.props,R=v.x,x=v.width,N=v.travellerWidth,L=v.startIndex,F=v.endIndex,j=v.onChange,$=r.pageX-l;$>0?$=Math.min($,R+x-N-n,R+x-N-c):$<0&&($=Math.max($,R-c,R-n));var H=this.getIndex({startX:c+$,endX:n+$});(H.startIndex!==L||H.endIndex!==F)&&j&&j(H),this.setState({startX:c+$,endX:n+$,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var l=hZ(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:l.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,l=i.brushMoveStartX,c=i.movingTravellerId,n=i.endX,v=i.startX,R=this.state[c],x=this.props,N=x.x,L=x.width,F=x.travellerWidth,j=x.onChange,$=x.gap,H=x.data,W={startX:this.state.startX,endX:this.state.endX},ee=r.pageX-l;ee>0?ee=Math.min(ee,N+L-F-R):ee<0&&(ee=Math.max(ee,N-R)),W[c]=R+ee;var se=this.getIndex(W),fe=se.startIndex,le=se.endIndex,me=function(){var Re=H.length-1;return c==="startX"&&(n>v?fe%$===0:le%$===0)||n<v&&le===Re||c==="endX"&&(n>v?le%$===0:fe%$===0)||n>v&&le===Re};this.setState(cf(cf({},c,R+ee),"brushMoveStartX",r.pageX),function(){j&&me()&&j(se)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var l=this,c=this.state,n=c.scaleValues,v=c.startX,R=c.endX,x=this.state[i],N=n.indexOf(x);if(N!==-1){var L=N+r;if(!(L===-1||L>=n.length)){var F=n[L];i==="startX"&&F>=R||i==="endX"&&F<=v||this.setState(cf({},i,F),function(){l.props.onChange(l.getIndex({startX:l.state.startX,endX:l.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,l=r.y,c=r.width,n=r.height,v=r.fill,R=r.stroke;return Ot.createElement("rect",{stroke:R,fill:v,x:i,y:l,width:c,height:n})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,l=r.y,c=r.width,n=r.height,v=r.data,R=r.children,x=r.padding,N=ie.Children.only(R);return N?Ot.cloneElement(N,{x:i,y:l,width:c,height:n,margin:x,compact:!0,data:v}):null}},{key:"renderTravellerLayer",value:function(r,i){var l,c,n=this,v=this.props,R=v.y,x=v.travellerWidth,N=v.height,L=v.traveller,F=v.ariaLabel,j=v.data,$=v.startIndex,H=v.endIndex,W=Math.max(r,this.props.x),ee=S5(S5({},gn(this.props,!1)),{},{x:W,y:R,width:x,height:N}),se=F||"Min value: ".concat((l=j[$])===null||l===void 0?void 0:l.name,", Max value: ").concat((c=j[H])===null||c===void 0?void 0:c.name);return Ot.createElement(_i,{tabIndex:0,role:"slider","aria-label":se,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(le){["ArrowLeft","ArrowRight"].includes(le.key)&&(le.preventDefault(),le.stopPropagation(),n.handleTravellerMoveKeyboard(le.key==="ArrowRight"?1:-1,i))},onFocus:function(){n.setState({isTravellerFocused:!0})},onBlur:function(){n.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(L,ee))}},{key:"renderSlide",value:function(r,i){var l=this.props,c=l.y,n=l.height,v=l.stroke,R=l.travellerWidth,x=Math.min(r,i)+R,N=Math.max(Math.abs(i-r)-R,0);return Ot.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:v,fillOpacity:.2,x,y:c,width:N,height:n})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,l=r.endIndex,c=r.y,n=r.height,v=r.travellerWidth,R=r.stroke,x=this.state,N=x.startX,L=x.endX,F=5,j={pointerEvents:"none",fill:R};return Ot.createElement(_i,{className:"recharts-brush-texts"},Ot.createElement(Mv,Xx({textAnchor:"end",verticalAnchor:"middle",x:Math.min(N,L)-F,y:c+n/2},j),this.getTextOfTick(i)),Ot.createElement(Mv,Xx({textAnchor:"start",verticalAnchor:"middle",x:Math.max(N,L)+v+F,y:c+n/2},j),this.getTextOfTick(l)))}},{key:"render",value:function(){var r=this.props,i=r.data,l=r.className,c=r.children,n=r.x,v=r.y,R=r.width,x=r.height,N=r.alwaysShowText,L=this.state,F=L.startX,j=L.endX,$=L.isTextActive,H=L.isSlideMoving,W=L.isTravellerMoving,ee=L.isTravellerFocused;if(!i||!i.length||!_r(n)||!_r(v)||!_r(R)||!_r(x)||R<=0||x<=0)return null;var se=gi("recharts-brush",l),fe=Ot.Children.count(c)===1,le=kSe("userSelect","none");return Ot.createElement(_i,{className:se,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:le},this.renderBackground(),fe&&this.renderPanorama(),this.renderSlide(F,j),this.renderTravellerLayer(F,"startX"),this.renderTravellerLayer(j,"endX"),($||H||W||ee||N)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,l=r.y,c=r.width,n=r.height,v=r.stroke,R=Math.floor(l+n/2)-1;return Ot.createElement(Ot.Fragment,null,Ot.createElement("rect",{x:i,y:l,width:c,height:n,fill:v,stroke:"none"}),Ot.createElement("line",{x1:i+1,y1:R,x2:i+c-1,y2:R,fill:"none",stroke:"#fff"}),Ot.createElement("line",{x1:i+1,y1:R+2,x2:i+c-1,y2:R+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var l;return Ot.isValidElement(r)?l=Ot.cloneElement(r,i):Zn(r)?l=r(i):l=e.renderDefaultTraveller(i),l}},{key:"getDerivedStateFromProps",value:function(r,i){var l=r.data,c=r.width,n=r.x,v=r.travellerWidth,R=r.updateId,x=r.startIndex,N=r.endIndex;if(l!==i.prevData||R!==i.prevUpdateId)return S5({prevData:l,prevTravellerWidth:v,prevUpdateId:R,prevX:n,prevWidth:c},l&&l.length?$Se({data:l,width:c,x:n,travellerWidth:v,startIndex:x,endIndex:N}):{scale:null,scaleValues:null});if(i.scale&&(c!==i.prevWidth||n!==i.prevX||v!==i.prevTravellerWidth)){i.scale.range([n,n+c-v]);var L=i.scale.domain().map(function(F){return i.scale(F)});return{prevData:l,prevTravellerWidth:v,prevUpdateId:R,prevX:n,prevWidth:c,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:L}}return null}},{key:"getIndexInRange",value:function(r,i){for(var l=r.length,c=0,n=l-1;n-c>1;){var v=Math.floor((c+n)/2);r[v]>i?n=v:c=v}return i>=r[n]?n:c}}])}(ie.PureComponent);cf(q_,"displayName","Brush");cf(q_,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var b5,fZ;function KSe(){if(fZ)return b5;fZ=1;var t=e4();function e(a,r){var i;return t(a,function(l,c,n){return i=r(l,c,n),!i}),!!i}return b5=e,b5}var x5,pZ;function WSe(){if(pZ)return x5;pZ=1;var t=WX(),e=Xm(),a=KSe(),r=kh(),i=SP();function l(c,n,v){var R=r(c)?t:a;return v&&i(c,n,v)&&(n=void 0),R(c,e(n,3))}return x5=l,x5}var YSe=WSe();const XSe=ss(YSe);var jm=function(e,a){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===a},P5,mZ;function JSe(){if(mZ)return P5;mZ=1;var t=fJ();function e(a,r,i){r=="__proto__"&&t?t(a,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):a[r]=i}return P5=e,P5}var E5,gZ;function QSe(){if(gZ)return E5;gZ=1;var t=JSe(),e=dJ(),a=Xm();function r(i,l){var c={};return l=a(l,3),e(i,function(n,v,R){t(c,v,l(n,v,R))}),c}return E5=r,E5}var ebe=QSe();const tbe=ss(ebe);var N5,yZ;function abe(){if(yZ)return N5;yZ=1;function t(e,a){for(var r=-1,i=e==null?0:e.length;++r<i;)if(!a(e[r],r,e))return!1;return!0}return N5=t,N5}var O5,AZ;function rbe(){if(AZ)return O5;AZ=1;var t=e4();function e(a,r){var i=!0;return t(a,function(l,c,n){return i=!!r(l,c,n),i}),i}return O5=e,O5}var V5,vZ;function nbe(){if(vZ)return V5;vZ=1;var t=abe(),e=rbe(),a=Xm(),r=kh(),i=SP();function l(c,n,v){var R=r(c)?t:e;return v&&i(c,n,v)&&(n=void 0),R(c,a(n,3))}return V5=l,V5}var ibe=nbe();const QQ=ss(ibe);var sbe=["x","y"];function PT(t){"@babel/helpers - typeof";return PT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PT(t)}function yI(){return yI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},yI.apply(this,arguments)}function _Z(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function $w(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?_Z(Object(a),!0).forEach(function(r){obe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_Z(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function obe(t,e,a){return e=lbe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function lbe(t){var e=ube(t,"string");return PT(e)=="symbol"?e:e+""}function ube(t,e){if(PT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(PT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cbe(t,e){if(t==null)return{};var a=dbe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function dbe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function hbe(t,e){var a=t.x,r=t.y,i=cbe(t,sbe),l="".concat(a),c=parseInt(l,10),n="".concat(r),v=parseInt(n,10),R="".concat(e.height||i.height),x=parseInt(R,10),N="".concat(e.width||i.width),L=parseInt(N,10);return $w($w($w($w($w({},e),i),c?{x:c}:{}),v?{y:v}:{}),{},{height:x,width:L,name:e.name,radius:e.radius})}function wZ(t){return Ot.createElement(Kx,yI({shapeType:"rectangle",propTransformer:hbe,activeClassName:"recharts-active-bar"},t))}var fbe=function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var l=typeof r=="number";return l?e(r,i):(l||Lv(),a)}},pbe=["value","background"],eee;function H_(t){"@babel/helpers - typeof";return H_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H_(t)}function mbe(t,e){if(t==null)return{};var a=gbe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function gbe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function Qx(){return Qx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Qx.apply(this,arguments)}function RZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function pu(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?RZ(Object(a),!0).forEach(function(r){By(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):RZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function ybe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function TZ(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,aee(r.key),r)}}function Abe(t,e,a){return e&&TZ(t.prototype,e),a&&TZ(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function vbe(t,e,a){return e=e2(e),_be(t,tee()?Reflect.construct(e,a||[],e2(t).constructor):e.apply(t,a))}function _be(t,e){if(e&&(H_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wbe(t)}function wbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tee=function(){return!!t})()}function e2(t){return e2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},e2(t)}function Rbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AI(t,e)}function AI(t,e){return AI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},AI(t,e)}function By(t,e,a){return e=aee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function aee(t){var e=Tbe(t,"string");return H_(e)=="symbol"?e:e+""}function Tbe(t,e){if(H_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(H_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Yp=function(t){function e(){var a;ybe(this,e);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return a=vbe(this,e,[].concat(i)),By(a,"state",{isAnimationFinished:!1}),By(a,"id",cA("recharts-bar-")),By(a,"handleAnimationEnd",function(){var c=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),c&&c()}),By(a,"handleAnimationStart",function(){var c=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),c&&c()}),a}return Rbe(e,t),Abe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,l=this.props,c=l.shape,n=l.dataKey,v=l.activeIndex,R=l.activeBar,x=gn(this.props,!1);return r&&r.map(function(N,L){var F=L===v,j=F?R:c,$=pu(pu(pu({},x),N),{},{isActive:F,option:j,index:L,dataKey:n,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return Ot.createElement(_i,Qx({className:"recharts-bar-rectangle"},Qy(i.props,N,L),{key:"rectangle-".concat(N==null?void 0:N.x,"-").concat(N==null?void 0:N.y,"-").concat(N==null?void 0:N.value)}),Ot.createElement(wZ,$))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,l=i.data,c=i.layout,n=i.isAnimationActive,v=i.animationBegin,R=i.animationDuration,x=i.animationEasing,N=i.animationId,L=this.state.prevData;return Ot.createElement(np,{begin:v,duration:R,isActive:n,easing:x,from:{t:0},to:{t:1},key:"bar-".concat(N),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(F){var j=F.t,$=l.map(function(H,W){var ee=L&&L[W];if(ee){var se=ml(ee.x,H.x),fe=ml(ee.y,H.y),le=ml(ee.width,H.width),me=ml(ee.height,H.height);return pu(pu({},H),{},{x:se(j),y:fe(j),width:le(j),height:me(j)})}if(c==="horizontal"){var ge=ml(0,H.height),Re=ge(j);return pu(pu({},H),{},{y:H.y+H.height-Re,height:Re})}var we=ml(0,H.width),Ve=we(j);return pu(pu({},H),{},{width:Ve})});return Ot.createElement(_i,null,r.renderRectanglesStatically($))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,l=r.isAnimationActive,c=this.state.prevData;return l&&i&&i.length&&(!c||!eA(c,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,l=i.data,c=i.dataKey,n=i.activeIndex,v=gn(this.props.background,!1);return l.map(function(R,x){R.value;var N=R.background,L=mbe(R,pbe);if(!N)return null;var F=pu(pu(pu(pu(pu({},L),{},{fill:"#eee"},N),v),Qy(r.props,R,x)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:c,index:x,className:"recharts-bar-background-rectangle"});return Ot.createElement(wZ,Qx({key:"background-bar-".concat(x),option:r.props.background,isActive:x===n},F))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.data,n=l.xAxis,v=l.yAxis,R=l.layout,x=l.children,N=hh(x,C1);if(!N)return null;var L=R==="vertical"?c[0].height/2:c[0].width/2,F=function(H,W){var ee=Array.isArray(H.value)?H.value[1]:H.value;return{x:H.x,y:H.y,value:ee,errorVal:Fo(H,W)}},j={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Ot.createElement(_i,j,N.map(function($){return Ot.cloneElement($,{key:"error-bar-".concat(i,"-").concat($.props.dataKey),data:c,xAxis:n,yAxis:v,layout:R,offset:L,dataPointFormatter:F})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,l=r.data,c=r.className,n=r.xAxis,v=r.yAxis,R=r.left,x=r.top,N=r.width,L=r.height,F=r.isAnimationActive,j=r.background,$=r.id;if(i||!l||!l.length)return null;var H=this.state.isAnimationFinished,W=gi("recharts-bar",c),ee=n&&n.allowDataOverflow,se=v&&v.allowDataOverflow,fe=ee||se,le=qn($)?this.id:$;return Ot.createElement(_i,{className:W},ee||se?Ot.createElement("defs",null,Ot.createElement("clipPath",{id:"clipPath-".concat(le)},Ot.createElement("rect",{x:ee?R:R-N/2,y:se?x:x-L/2,width:ee?N:N*2,height:se?L:L*2}))):null,Ot.createElement(_i,{className:"recharts-bar-rectangles",clipPath:fe?"url(#clipPath-".concat(le,")"):null},j?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(fe,le),(!F||H)&&ap.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(ie.PureComponent);eee=Yp;By(Yp,"displayName","Bar");By(Yp,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Gg.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});By(Yp,"getComposedData",function(t){var e=t.props,a=t.item,r=t.barPosition,i=t.bandSize,l=t.xAxis,c=t.yAxis,n=t.xAxisTicks,v=t.yAxisTicks,R=t.stackedData,x=t.dataStartIndex,N=t.displayedData,L=t.offset,F=X1e(r,a);if(!F)return null;var j=e.layout,$=a.type.defaultProps,H=$!==void 0?pu(pu({},$),a.props):a.props,W=H.dataKey,ee=H.children,se=H.minPointSize,fe=j==="horizontal"?c:l,le=R?fe.scale.domain():null,me=nwe({numericAxis:fe}),ge=hh(ee,D_),Re=N.map(function(we,Ve){var oe,_e,Fe,Ee,ze,Se;R?oe=J1e(R[x+Ve],le):(oe=Fo(we,W),Array.isArray(oe)||(oe=[me,oe]));var je=fbe(se,eee.defaultProps.minPointSize)(oe[1],Ve);if(j==="horizontal"){var Ue,$e=[c.scale(oe[0]),c.scale(oe[1])],Be=$e[0],qe=$e[1];_e=W7({axis:l,ticks:n,bandSize:i,offset:F.offset,entry:we,index:Ve}),Fe=(Ue=qe??Be)!==null&&Ue!==void 0?Ue:void 0,Ee=F.size;var be=Be-qe;if(ze=Number.isNaN(be)?0:be,Se={x:_e,y:c.y,width:Ee,height:c.height},Math.abs(je)>0&&Math.abs(ze)<Math.abs(je)){var Te=sh(ze||je)*(Math.abs(je)-Math.abs(ze));Fe-=Te,ze+=Te}}else{var ke=[l.scale(oe[0]),l.scale(oe[1])],Ge=ke[0],at=ke[1];if(_e=Ge,Fe=W7({axis:c,ticks:v,bandSize:i,offset:F.offset,entry:we,index:Ve}),Ee=at-Ge,ze=F.size,Se={x:l.x,y:Fe,width:l.width,height:ze},Math.abs(je)>0&&Math.abs(Ee)<Math.abs(je)){var rt=sh(Ee||je)*(Math.abs(je)-Math.abs(Ee));Ee+=rt}}return pu(pu(pu({},we),{},{x:_e,y:Fe,width:Ee,height:ze,value:R?oe:oe[1],payload:we,background:Se},ge&&ge[Ve]&&ge[Ve].props),{},{tooltipPayload:[EQ(a,we)],tooltipPosition:{x:_e+Ee/2,y:Fe+ze/2}})});return pu({data:Re,layout:j},L)});function ET(t){"@babel/helpers - typeof";return ET=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ET(t)}function Cbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CZ(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ree(r.key),r)}}function Sbe(t,e,a){return e&&CZ(t.prototype,e),a&&CZ(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function SZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Bp(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?SZ(Object(a),!0).forEach(function(r){jP(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):SZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function jP(t,e,a){return e=ree(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function ree(t){var e=bbe(t,"string");return ET(e)=="symbol"?e:e+""}function bbe(t,e){if(ET(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(ET(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var GP=function(e,a,r,i,l){var c=e.width,n=e.height,v=e.layout,R=e.children,x=Object.keys(a),N={left:r.left,leftMirror:r.left,right:c-r.right,rightMirror:c-r.right,top:r.top,topMirror:r.top,bottom:n-r.bottom,bottomMirror:n-r.bottom},L=!!df(R,Yp);return x.reduce(function(F,j){var $=a[j],H=$.orientation,W=$.domain,ee=$.padding,se=ee===void 0?{}:ee,fe=$.mirror,le=$.reversed,me="".concat(H).concat(fe?"Mirror":""),ge,Re,we,Ve,oe;if($.type==="number"&&($.padding==="gap"||$.padding==="no-gap")){var _e=W[1]-W[0],Fe=1/0,Ee=$.categoricalDomain.sort();if(Ee.forEach(function(ke,Ge){Ge>0&&(Fe=Math.min((ke||0)-(Ee[Ge-1]||0),Fe))}),Number.isFinite(Fe)){var ze=Fe/_e,Se=$.layout==="vertical"?r.height:r.width;if($.padding==="gap"&&(ge=ze*Se/2),$.padding==="no-gap"){var je=oh(e.barCategoryGap,ze*Se),Ue=ze*Se/2;ge=Ue-je-(Ue-je)/Se*je}}}i==="xAxis"?Re=[r.left+(se.left||0)+(ge||0),r.left+r.width-(se.right||0)-(ge||0)]:i==="yAxis"?Re=v==="horizontal"?[r.top+r.height-(se.bottom||0),r.top+(se.top||0)]:[r.top+(se.top||0)+(ge||0),r.top+r.height-(se.bottom||0)-(ge||0)]:Re=$.range,le&&(Re=[Re[1],Re[0]]);var $e=SQ($,l,L),Be=$e.scale,qe=$e.realScaleType;Be.domain(W).range(Re),bQ(Be);var be=xQ(Be,Bp(Bp({},$),{},{realScaleType:qe}));i==="xAxis"?(oe=H==="top"&&!fe||H==="bottom"&&fe,we=r.left,Ve=N[me]-oe*$.height):i==="yAxis"&&(oe=H==="left"&&!fe||H==="right"&&fe,we=N[me]-oe*$.width,Ve=r.top);var Te=Bp(Bp(Bp({},$),be),{},{realScaleType:qe,x:we,y:Ve,scale:Be,width:i==="xAxis"?r.width:$.width,height:i==="yAxis"?r.height:$.height});return Te.bandSize=Lx(Te,be),!$.hide&&i==="xAxis"?N[me]+=(oe?-1:1)*Te.height:$.hide||(N[me]+=(oe?-1:1)*Te.width),Bp(Bp({},F),{},jP({},j,Te))},{})},nee=function(e,a){var r=e.x,i=e.y,l=a.x,c=a.y;return{x:Math.min(r,l),y:Math.min(i,c),width:Math.abs(l-r),height:Math.abs(c-i)}},xbe=function(e){var a=e.x1,r=e.y1,i=e.x2,l=e.y2;return nee({x:a,y:r},{x:i,y:l})},iee=function(){function t(e){Cbe(this,t),this.scale=e}return Sbe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,l=r.position;if(a!==void 0){if(l)switch(l){case"start":return this.scale(a);case"middle":{var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+c}case"end":{var n=this.bandwidth?this.bandwidth():0;return this.scale(a)+n}default:return this.scale(a)}if(i){var v=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+v}return this.scale(a)}}},{key:"isInRange",value:function(a){var r=this.range(),i=r[0],l=r[r.length-1];return i<=l?a>=i&&a<=l:a>=l&&a<=i}}],[{key:"create",value:function(a){return new t(a)}}])}();jP(iee,"EPS",1e-4);var E4=function(e){var a=Object.keys(e).reduce(function(r,i){return Bp(Bp({},r),{},jP({},i,iee.create(e[i])))},{});return Bp(Bp({},a),{},{apply:function(i){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=l.bandAware,n=l.position;return tbe(i,function(v,R){return a[R].apply(v,{bandAware:c,position:n})})},isInRange:function(i){return QQ(i,function(l,c){return a[c].isInRange(l)})}})};function Pbe(t){return(t%180+180)%180}var Ebe=function(e){var a=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=Pbe(i),c=l*Math.PI/180,n=Math.atan(r/a),v=c>n&&c<Math.PI-n?r/Math.sin(c):a/Math.cos(c);return Math.abs(v)},z5,bZ;function Nbe(){if(bZ)return z5;bZ=1;var t=Xm(),e=fC(),a=TP();function r(i){return function(l,c,n){var v=Object(l);if(!e(l)){var R=t(c,3);l=a(l),c=function(N){return R(v[N],N,v)}}var x=i(l,c,n);return x>-1?v[R?l[x]:x]:void 0}}return z5=r,z5}var D5,xZ;function Obe(){if(xZ)return D5;xZ=1;var t=WQ();function e(a){var r=t(a),i=r%1;return r===r?i?r-i:r:0}return D5=e,D5}var M5,PZ;function Vbe(){if(PZ)return M5;PZ=1;var t=sJ(),e=Xm(),a=Obe(),r=Math.max;function i(l,c,n){var v=l==null?0:l.length;if(!v)return-1;var R=n==null?0:a(n);return R<0&&(R=r(v+R,0)),t(l,e(c,3),R)}return M5=i,M5}var I5,EZ;function zbe(){if(EZ)return I5;EZ=1;var t=Nbe(),e=Vbe(),a=t(e);return I5=a,I5}var Dbe=zbe();const Mbe=ss(Dbe);var Ibe=wX();const Lbe=ss(Ibe);var Fbe=Lbe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),N4=ie.createContext(void 0),O4=ie.createContext(void 0),see=ie.createContext(void 0),oee=ie.createContext({}),lee=ie.createContext(void 0),uee=ie.createContext(0),cee=ie.createContext(0),NZ=function(e){var a=e.state,r=a.xAxisMap,i=a.yAxisMap,l=a.offset,c=e.clipPathId,n=e.children,v=e.width,R=e.height,x=Fbe(l);return Ot.createElement(N4.Provider,{value:r},Ot.createElement(O4.Provider,{value:i},Ot.createElement(oee.Provider,{value:l},Ot.createElement(see.Provider,{value:x},Ot.createElement(lee.Provider,{value:c},Ot.createElement(uee.Provider,{value:R},Ot.createElement(cee.Provider,{value:v},n)))))))},kbe=function(){return ie.useContext(lee)},dee=function(e){var a=ie.useContext(N4);a==null&&Lv();var r=a[e];return r==null&&Lv(),r},Ube=function(){var e=ie.useContext(N4);return Ly(e)},Bbe=function(){var e=ie.useContext(O4),a=Mbe(e,function(r){return QQ(r.domain,Number.isFinite)});return a||Ly(e)},hee=function(e){var a=ie.useContext(O4);a==null&&Lv();var r=a[e];return r==null&&Lv(),r},jbe=function(){var e=ie.useContext(see);return e},Gbe=function(){return ie.useContext(oee)},V4=function(){return ie.useContext(cee)},z4=function(){return ie.useContext(uee)};function $_(t){"@babel/helpers - typeof";return $_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$_(t)}function Zbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qbe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pee(r.key),r)}}function Hbe(t,e,a){return e&&qbe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $be(t,e,a){return e=t2(e),Kbe(t,fee()?Reflect.construct(e,a||[],t2(t).constructor):e.apply(t,a))}function Kbe(t,e){if(e&&($_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wbe(t)}function Wbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fee=function(){return!!t})()}function t2(t){return t2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},t2(t)}function Ybe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vI(t,e)}function vI(t,e){return vI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},vI(t,e)}function OZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function VZ(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?OZ(Object(a),!0).forEach(function(r){D4(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):OZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function D4(t,e,a){return e=pee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function pee(t){var e=Xbe(t,"string");return $_(e)=="symbol"?e:e+""}function Xbe(t,e){if($_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if($_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Jbe(t,e){return axe(t)||txe(t,e)||exe(t,e)||Qbe()}function Qbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function exe(t,e){if(t){if(typeof t=="string")return zZ(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return zZ(t,e)}}function zZ(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function txe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function axe(t){if(Array.isArray(t))return t}function _I(){return _I=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},_I.apply(this,arguments)}var rxe=function(e,a){var r;return Ot.isValidElement(e)?r=Ot.cloneElement(e,a):Zn(e)?r=e(a):r=Ot.createElement("line",_I({},a,{className:"recharts-reference-line-line"})),r},nxe=function(e,a,r,i,l,c,n,v,R){var x=l.x,N=l.y,L=l.width,F=l.height;if(r){var j=R.y,$=e.y.apply(j,{position:c});if(jm(R,"discard")&&!e.y.isInRange($))return null;var H=[{x:x+L,y:$},{x,y:$}];return v==="left"?H.reverse():H}if(a){var W=R.x,ee=e.x.apply(W,{position:c});if(jm(R,"discard")&&!e.x.isInRange(ee))return null;var se=[{x:ee,y:N+F},{x:ee,y:N}];return n==="top"?se.reverse():se}if(i){var fe=R.segment,le=fe.map(function(me){return e.apply(me,{position:c})});return jm(R,"discard")&&XSe(le,function(me){return!e.isInRange(me)})?null:le}return null};function ixe(t){var e=t.x,a=t.y,r=t.segment,i=t.xAxisId,l=t.yAxisId,c=t.shape,n=t.className,v=t.alwaysShow,R=kbe(),x=dee(i),N=hee(l),L=jbe();if(!R||!L)return null;qp(v===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var F=E4({x:x.scale,y:N.scale}),j=qu(e),$=qu(a),H=r&&r.length===2,W=nxe(F,j,$,H,L,t.position,x.orientation,N.orientation,t);if(!W)return null;var ee=Jbe(W,2),se=ee[0],fe=se.x,le=se.y,me=ee[1],ge=me.x,Re=me.y,we=jm(t,"hidden")?"url(#".concat(R,")"):void 0,Ve=VZ(VZ({clipPath:we},gn(t,!0)),{},{x1:fe,y1:le,x2:ge,y2:Re});return Ot.createElement(_i,{className:gi("recharts-reference-line",n)},rxe(c,Ve),cc.renderCallByParent(t,xbe({x1:fe,y1:le,x2:ge,y2:Re})))}var M4=function(t){function e(){return Zbe(this,e),$be(this,e,arguments)}return Ybe(e,t),Hbe(e,[{key:"render",value:function(){return Ot.createElement(ixe,this.props)}}])}(Ot.Component);D4(M4,"displayName","ReferenceLine");D4(M4,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function wI(){return wI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},wI.apply(this,arguments)}function K_(t){"@babel/helpers - typeof";return K_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K_(t)}function DZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function MZ(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?DZ(Object(a),!0).forEach(function(r){ZP(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):DZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function sxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oxe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gee(r.key),r)}}function lxe(t,e,a){return e&&oxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function uxe(t,e,a){return e=a2(e),cxe(t,mee()?Reflect.construct(e,a||[],a2(t).constructor):e.apply(t,a))}function cxe(t,e){if(e&&(K_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dxe(t)}function dxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mee=function(){return!!t})()}function a2(t){return a2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},a2(t)}function hxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RI(t,e)}function RI(t,e){return RI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},RI(t,e)}function ZP(t,e,a){return e=gee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function gee(t){var e=fxe(t,"string");return K_(e)=="symbol"?e:e+""}function fxe(t,e){if(K_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(K_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var pxe=function(e){var a=e.x,r=e.y,i=e.xAxis,l=e.yAxis,c=E4({x:i.scale,y:l.scale}),n=c.apply({x:a,y:r},{bandAware:!0});return jm(e,"discard")&&!c.isInRange(n)?null:n},qP=function(t){function e(){return sxe(this,e),uxe(this,e,arguments)}return hxe(e,t),lxe(e,[{key:"render",value:function(){var r=this.props,i=r.x,l=r.y,c=r.r,n=r.alwaysShow,v=r.clipPathId,R=qu(i),x=qu(l);if(qp(n===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!R||!x)return null;var N=pxe(this.props);if(!N)return null;var L=N.x,F=N.y,j=this.props,$=j.shape,H=j.className,W=jm(this.props,"hidden")?"url(#".concat(v,")"):void 0,ee=MZ(MZ({clipPath:W},gn(this.props,!0)),{},{cx:L,cy:F});return Ot.createElement(_i,{className:gi("recharts-reference-dot",H)},e.renderDot($,ee),cc.renderCallByParent(this.props,{x:L-c,y:F-c,width:2*c,height:2*c}))}}])}(Ot.Component);ZP(qP,"displayName","ReferenceDot");ZP(qP,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});ZP(qP,"renderDot",function(t,e){var a;return Ot.isValidElement(t)?a=Ot.cloneElement(t,e):Zn(t)?a=t(e):a=Ot.createElement(AC,wI({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),a});function TI(){return TI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},TI.apply(this,arguments)}function W_(t){"@babel/helpers - typeof";return W_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W_(t)}function IZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function LZ(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?IZ(Object(a),!0).forEach(function(r){HP(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):IZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function mxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gxe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Aee(r.key),r)}}function yxe(t,e,a){return e&&gxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Axe(t,e,a){return e=r2(e),vxe(t,yee()?Reflect.construct(e,a||[],r2(t).constructor):e.apply(t,a))}function vxe(t,e){if(e&&(W_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _xe(t)}function _xe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yee=function(){return!!t})()}function r2(t){return r2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},r2(t)}function wxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CI(t,e)}function CI(t,e){return CI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},CI(t,e)}function HP(t,e,a){return e=Aee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Aee(t){var e=Rxe(t,"string");return W_(e)=="symbol"?e:e+""}function Rxe(t,e){if(W_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(W_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Txe=function(e,a,r,i,l){var c=l.x1,n=l.x2,v=l.y1,R=l.y2,x=l.xAxis,N=l.yAxis;if(!x||!N)return null;var L=E4({x:x.scale,y:N.scale}),F={x:e?L.x.apply(c,{position:"start"}):L.x.rangeMin,y:r?L.y.apply(v,{position:"start"}):L.y.rangeMin},j={x:a?L.x.apply(n,{position:"end"}):L.x.rangeMax,y:i?L.y.apply(R,{position:"end"}):L.y.rangeMax};return jm(l,"discard")&&(!L.isInRange(F)||!L.isInRange(j))?null:nee(F,j)},$P=function(t){function e(){return mxe(this,e),Axe(this,e,arguments)}return wxe(e,t),yxe(e,[{key:"render",value:function(){var r=this.props,i=r.x1,l=r.x2,c=r.y1,n=r.y2,v=r.className,R=r.alwaysShow,x=r.clipPathId;qp(R===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var N=qu(i),L=qu(l),F=qu(c),j=qu(n),$=this.props.shape;if(!N&&!L&&!F&&!j&&!$)return null;var H=Txe(N,L,F,j,this.props);if(!H&&!$)return null;var W=jm(this.props,"hidden")?"url(#".concat(x,")"):void 0;return Ot.createElement(_i,{className:gi("recharts-reference-area",v)},e.renderRect($,LZ(LZ({clipPath:W},gn(this.props,!0)),H)),cc.renderCallByParent(this.props,H))}}])}(Ot.Component);HP($P,"displayName","ReferenceArea");HP($P,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});HP($P,"renderRect",function(t,e){var a;return Ot.isValidElement(t)?a=Ot.cloneElement(t,e):Zn(t)?a=t(e):a=Ot.createElement(P4,TI({},e,{className:"recharts-reference-area-rect"})),a});function vee(t,e,a){if(e<1)return[];if(e===1&&a===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function Cxe(t,e,a){var r={width:t.width+e.width,height:t.height+e.height};return Ebe(r,a)}function Sxe(t,e,a){var r=a==="width",i=t.x,l=t.y,c=t.width,n=t.height;return e===1?{start:r?i:l,end:r?i+c:l+n}:{start:r?i+c:l+n,end:r?i:l}}function n2(t,e,a,r,i){if(t*e<t*r||t*e>t*i)return!1;var l=a();return t*(e-t*l/2-r)>=0&&t*(e+t*l/2-i)<=0}function bxe(t,e){return vee(t,e+1)}function xxe(t,e,a,r,i){for(var l=(r||[]).slice(),c=e.start,n=e.end,v=0,R=1,x=c,N=function(){var j=r==null?void 0:r[v];if(j===void 0)return{v:vee(r,R)};var $=v,H,W=function(){return H===void 0&&(H=a(j,$)),H},ee=j.coordinate,se=v===0||n2(t,ee,W,x,n);se||(v=0,x=c,R+=1),se&&(x=ee+t*(W()/2+i),v+=R)},L;R<=l.length;)if(L=N(),L)return L.v;return[]}function NT(t){"@babel/helpers - typeof";return NT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NT(t)}function FZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function pd(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?FZ(Object(a),!0).forEach(function(r){Pxe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):FZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Pxe(t,e,a){return e=Exe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Exe(t){var e=Nxe(t,"string");return NT(e)=="symbol"?e:e+""}function Nxe(t,e){if(NT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(NT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Oxe(t,e,a,r,i){for(var l=(r||[]).slice(),c=l.length,n=e.start,v=e.end,R=function(L){var F=l[L],j,$=function(){return j===void 0&&(j=a(F,L)),j};if(L===c-1){var H=t*(F.coordinate+t*$()/2-v);l[L]=F=pd(pd({},F),{},{tickCoord:H>0?F.coordinate-H*t:F.coordinate})}else l[L]=F=pd(pd({},F),{},{tickCoord:F.coordinate});var W=n2(t,F.tickCoord,$,n,v);W&&(v=F.tickCoord-t*($()/2+i),l[L]=pd(pd({},F),{},{isShow:!0}))},x=c-1;x>=0;x--)R(x);return l}function Vxe(t,e,a,r,i,l){var c=(r||[]).slice(),n=c.length,v=e.start,R=e.end;if(l){var x=r[n-1],N=a(x,n-1),L=t*(x.coordinate+t*N/2-R);c[n-1]=x=pd(pd({},x),{},{tickCoord:L>0?x.coordinate-L*t:x.coordinate});var F=n2(t,x.tickCoord,function(){return N},v,R);F&&(R=x.tickCoord-t*(N/2+i),c[n-1]=pd(pd({},x),{},{isShow:!0}))}for(var j=l?n-1:n,$=function(ee){var se=c[ee],fe,le=function(){return fe===void 0&&(fe=a(se,ee)),fe};if(ee===0){var me=t*(se.coordinate-t*le()/2-v);c[ee]=se=pd(pd({},se),{},{tickCoord:me<0?se.coordinate-me*t:se.coordinate})}else c[ee]=se=pd(pd({},se),{},{tickCoord:se.coordinate});var ge=n2(t,se.tickCoord,le,v,R);ge&&(v=se.tickCoord+t*(le()/2+i),c[ee]=pd(pd({},se),{},{isShow:!0}))},H=0;H<j;H++)$(H);return c}function I4(t,e,a){var r=t.tick,i=t.ticks,l=t.viewBox,c=t.minTickGap,n=t.orientation,v=t.interval,R=t.tickFormatter,x=t.unit,N=t.angle;if(!i||!i.length||!r)return[];if(_r(v)||Gg.isSsr)return bxe(i,typeof v=="number"&&_r(v)?v:0);var L=[],F=n==="top"||n==="bottom"?"width":"height",j=x&&F==="width"?wR(x,{fontSize:e,letterSpacing:a}):{width:0,height:0},$=function(se,fe){var le=Zn(R)?R(se.value,fe):se.value;return F==="width"?Cxe(wR(le,{fontSize:e,letterSpacing:a}),j,N):wR(le,{fontSize:e,letterSpacing:a})[F]},H=i.length>=2?sh(i[1].coordinate-i[0].coordinate):1,W=Sxe(l,H,F);return v==="equidistantPreserveStart"?xxe(H,W,$,i,c):(v==="preserveStart"||v==="preserveStartEnd"?L=Vxe(H,W,$,i,c,v==="preserveStartEnd"):L=Oxe(H,W,$,i,c),L.filter(function(ee){return ee.isShow}))}var zxe=["viewBox"],Dxe=["viewBox"],Mxe=["ticks"];function Y_(t){"@babel/helpers - typeof";return Y_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y_(t)}function a_(){return a_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},a_.apply(this,arguments)}function kZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function rh(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?kZ(Object(a),!0).forEach(function(r){L4(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):kZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function L5(t,e){if(t==null)return{};var a=Ixe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Ixe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function Lxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function UZ(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wee(r.key),r)}}function Fxe(t,e,a){return e&&UZ(t.prototype,e),a&&UZ(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function kxe(t,e,a){return e=i2(e),Uxe(t,_ee()?Reflect.construct(e,a||[],i2(t).constructor):e.apply(t,a))}function Uxe(t,e){if(e&&(Y_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bxe(t)}function Bxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _ee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_ee=function(){return!!t})()}function i2(t){return i2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},i2(t)}function jxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SI(t,e)}function SI(t,e){return SI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},SI(t,e)}function L4(t,e,a){return e=wee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function wee(t){var e=Gxe(t,"string");return Y_(e)=="symbol"?e:e+""}function Gxe(t,e){if(Y_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Y_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var S1=function(t){function e(a){var r;return Lxe(this,e),r=kxe(this,e,[a]),r.state={fontSize:"",letterSpacing:""},r}return jxe(e,t),Fxe(e,[{key:"shouldComponentUpdate",value:function(r,i){var l=r.viewBox,c=L5(r,zxe),n=this.props,v=n.viewBox,R=L5(n,Dxe);return!f_(l,v)||!f_(c,R)||!f_(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,l=i.x,c=i.y,n=i.width,v=i.height,R=i.orientation,x=i.tickSize,N=i.mirror,L=i.tickMargin,F,j,$,H,W,ee,se=N?-1:1,fe=r.tickSize||x,le=_r(r.tickCoord)?r.tickCoord:r.coordinate;switch(R){case"top":F=j=r.coordinate,H=c+ +!N*v,$=H-se*fe,ee=$-se*L,W=le;break;case"left":$=H=r.coordinate,j=l+ +!N*n,F=j-se*fe,W=F-se*L,ee=le;break;case"right":$=H=r.coordinate,j=l+ +N*n,F=j+se*fe,W=F+se*L,ee=le;break;default:F=j=r.coordinate,H=c+ +N*v,$=H+se*fe,ee=$+se*L,W=le;break}return{line:{x1:F,y1:$,x2:j,y2:H},tick:{x:W,y:ee}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,l=r.mirror,c;switch(i){case"left":c=l?"start":"end";break;case"right":c=l?"end":"start";break;default:c="middle";break}return c}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,l=r.mirror,c="end";switch(i){case"left":case"right":c="middle";break;case"top":c=l?"start":"end";break;default:c=l?"end":"start";break}return c}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,l=r.y,c=r.width,n=r.height,v=r.orientation,R=r.mirror,x=r.axisLine,N=rh(rh(rh({},gn(this.props,!1)),gn(x,!1)),{},{fill:"none"});if(v==="top"||v==="bottom"){var L=+(v==="top"&&!R||v==="bottom"&&R);N=rh(rh({},N),{},{x1:i,y1:l+L*n,x2:i+c,y2:l+L*n})}else{var F=+(v==="left"&&!R||v==="right"&&R);N=rh(rh({},N),{},{x1:i+F*c,y1:l,x2:i+F*c,y2:l+n})}return Ot.createElement("line",a_({},N,{className:gi("recharts-cartesian-axis-line",vf(x,"className"))}))}},{key:"renderTicks",value:function(r,i,l){var c=this,n=this.props,v=n.tickLine,R=n.stroke,x=n.tick,N=n.tickFormatter,L=n.unit,F=I4(rh(rh({},this.props),{},{ticks:r}),i,l),j=this.getTickTextAnchor(),$=this.getTickVerticalAnchor(),H=gn(this.props,!1),W=gn(x,!1),ee=rh(rh({},H),{},{fill:"none"},gn(v,!1)),se=F.map(function(fe,le){var me=c.getTickLineCoord(fe),ge=me.line,Re=me.tick,we=rh(rh(rh(rh({textAnchor:j,verticalAnchor:$},H),{},{stroke:"none",fill:R},W),Re),{},{index:le,payload:fe,visibleTicksCount:F.length,tickFormatter:N});return Ot.createElement(_i,a_({className:"recharts-cartesian-axis-tick",key:"tick-".concat(fe.value,"-").concat(fe.coordinate,"-").concat(fe.tickCoord)},Qy(c.props,fe,le)),v&&Ot.createElement("line",a_({},ee,ge,{className:gi("recharts-cartesian-axis-tick-line",vf(v,"className"))})),x&&e.renderTickItem(x,we,"".concat(Zn(N)?N(fe.value,le):fe.value).concat(L||"")))});return Ot.createElement("g",{className:"recharts-cartesian-axis-ticks"},se)}},{key:"render",value:function(){var r=this,i=this.props,l=i.axisLine,c=i.width,n=i.height,v=i.ticksGenerator,R=i.className,x=i.hide;if(x)return null;var N=this.props,L=N.ticks,F=L5(N,Mxe),j=L;return Zn(v)&&(j=L&&L.length>0?v(this.props):v(F)),c<=0||n<=0||!j||!j.length?null:Ot.createElement(_i,{className:gi("recharts-cartesian-axis",R),ref:function(H){r.layerReference=H}},l&&this.renderAxisLine(),this.renderTicks(j,this.state.fontSize,this.state.letterSpacing),cc.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,l){var c;return Ot.isValidElement(r)?c=Ot.cloneElement(r,i):Zn(r)?c=r(i):c=Ot.createElement(Mv,a_({},i,{className:"recharts-cartesian-axis-tick-value"}),l),c}}])}(ie.Component);L4(S1,"displayName","CartesianAxis");L4(S1,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Zxe=["x1","y1","x2","y2","key"],qxe=["offset"];function Fv(t){"@babel/helpers - typeof";return Fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fv(t)}function BZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function vd(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?BZ(Object(a),!0).forEach(function(r){Hxe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):BZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Hxe(t,e,a){return e=$xe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function $xe(t){var e=Kxe(t,"string");return Fv(e)=="symbol"?e:e+""}function Kxe(t,e){if(Fv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Fv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gv(){return gv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},gv.apply(this,arguments)}function jZ(t,e){if(t==null)return{};var a=Wxe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Wxe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}var Yxe=function(e){var a=e.fill;if(!a||a==="none")return null;var r=e.fillOpacity,i=e.x,l=e.y,c=e.width,n=e.height,v=e.ry;return Ot.createElement("rect",{x:i,y:l,ry:v,width:c,height:n,stroke:"none",fill:a,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Ree(t,e){var a;if(Ot.isValidElement(t))a=Ot.cloneElement(t,e);else if(Zn(t))a=t(e);else{var r=e.x1,i=e.y1,l=e.x2,c=e.y2,n=e.key,v=jZ(e,Zxe),R=gn(v,!1);R.offset;var x=jZ(R,qxe);a=Ot.createElement("line",gv({},x,{x1:r,y1:i,x2:l,y2:c,fill:"none",key:n}))}return a}function Xxe(t){var e=t.x,a=t.width,r=t.horizontal,i=r===void 0?!0:r,l=t.horizontalPoints;if(!i||!l||!l.length)return null;var c=l.map(function(n,v){var R=vd(vd({},t),{},{x1:e,y1:n,x2:e+a,y2:n,key:"line-".concat(v),index:v});return Ree(i,R)});return Ot.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function Jxe(t){var e=t.y,a=t.height,r=t.vertical,i=r===void 0?!0:r,l=t.verticalPoints;if(!i||!l||!l.length)return null;var c=l.map(function(n,v){var R=vd(vd({},t),{},{x1:n,y1:e,x2:n,y2:e+a,key:"line-".concat(v),index:v});return Ree(i,R)});return Ot.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function Qxe(t){var e=t.horizontalFill,a=t.fillOpacity,r=t.x,i=t.y,l=t.width,c=t.height,n=t.horizontalPoints,v=t.horizontal,R=v===void 0?!0:v;if(!R||!e||!e.length)return null;var x=n.map(function(L){return Math.round(L+i-i)}).sort(function(L,F){return L-F});i!==x[0]&&x.unshift(0);var N=x.map(function(L,F){var j=!x[F+1],$=j?i+c-L:x[F+1]-L;if($<=0)return null;var H=F%e.length;return Ot.createElement("rect",{key:"react-".concat(F),y:L,x:r,height:$,width:l,stroke:"none",fill:e[H],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return Ot.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},N)}function e2e(t){var e=t.vertical,a=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,l=t.x,c=t.y,n=t.width,v=t.height,R=t.verticalPoints;if(!a||!r||!r.length)return null;var x=R.map(function(L){return Math.round(L+l-l)}).sort(function(L,F){return L-F});l!==x[0]&&x.unshift(0);var N=x.map(function(L,F){var j=!x[F+1],$=j?l+n-L:x[F+1]-L;if($<=0)return null;var H=F%r.length;return Ot.createElement("rect",{key:"react-".concat(F),x:L,y:c,width:$,height:v,stroke:"none",fill:r[H],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return Ot.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},N)}var t2e=function(e,a){var r=e.xAxis,i=e.width,l=e.height,c=e.offset;return CQ(I4(vd(vd(vd({},S1.defaultProps),r),{},{ticks:bg(r,!0),viewBox:{x:0,y:0,width:i,height:l}})),c.left,c.left+c.width,a)},a2e=function(e,a){var r=e.yAxis,i=e.width,l=e.height,c=e.offset;return CQ(I4(vd(vd(vd({},S1.defaultProps),r),{},{ticks:bg(r,!0),viewBox:{x:0,y:0,width:i,height:l}})),c.top,c.top+c.height,a)},B0={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function jp(t){var e,a,r,i,l,c,n=V4(),v=z4(),R=Gbe(),x=vd(vd({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:B0.stroke,fill:(a=t.fill)!==null&&a!==void 0?a:B0.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:B0.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:B0.horizontalFill,vertical:(l=t.vertical)!==null&&l!==void 0?l:B0.vertical,verticalFill:(c=t.verticalFill)!==null&&c!==void 0?c:B0.verticalFill,x:_r(t.x)?t.x:R.left,y:_r(t.y)?t.y:R.top,width:_r(t.width)?t.width:R.width,height:_r(t.height)?t.height:R.height}),N=x.x,L=x.y,F=x.width,j=x.height,$=x.syncWithTicks,H=x.horizontalValues,W=x.verticalValues,ee=Ube(),se=Bbe();if(!_r(F)||F<=0||!_r(j)||j<=0||!_r(N)||N!==+N||!_r(L)||L!==+L)return null;var fe=x.verticalCoordinatesGenerator||t2e,le=x.horizontalCoordinatesGenerator||a2e,me=x.horizontalPoints,ge=x.verticalPoints;if((!me||!me.length)&&Zn(le)){var Re=H&&H.length,we=le({yAxis:se?vd(vd({},se),{},{ticks:Re?H:se.ticks}):void 0,width:n,height:v,offset:R},Re?!0:$);qp(Array.isArray(we),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Fv(we),"]")),Array.isArray(we)&&(me=we)}if((!ge||!ge.length)&&Zn(fe)){var Ve=W&&W.length,oe=fe({xAxis:ee?vd(vd({},ee),{},{ticks:Ve?W:ee.ticks}):void 0,width:n,height:v,offset:R},Ve?!0:$);qp(Array.isArray(oe),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Fv(oe),"]")),Array.isArray(oe)&&(ge=oe)}return Ot.createElement("g",{className:"recharts-cartesian-grid"},Ot.createElement(Yxe,{fill:x.fill,fillOpacity:x.fillOpacity,x:x.x,y:x.y,width:x.width,height:x.height,ry:x.ry}),Ot.createElement(Xxe,gv({},x,{offset:R,horizontalPoints:me,xAxis:ee,yAxis:se})),Ot.createElement(Jxe,gv({},x,{offset:R,verticalPoints:ge,xAxis:ee,yAxis:se})),Ot.createElement(Qxe,gv({},x,{horizontalPoints:me})),Ot.createElement(e2e,gv({},x,{verticalPoints:ge})))}jp.displayName="CartesianGrid";var r2e=["type","layout","connectNulls","ref"],n2e=["key"];function X_(t){"@babel/helpers - typeof";return X_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X_(t)}function GZ(t,e){if(t==null)return{};var a=i2e(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function i2e(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function xR(){return xR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},xR.apply(this,arguments)}function ZZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function uf(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?ZZ(Object(a),!0).forEach(function(r){Gp(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ZZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function j0(t){return u2e(t)||l2e(t)||o2e(t)||s2e()}function s2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o2e(t,e){if(t){if(typeof t=="string")return bI(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return bI(t,e)}}function l2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function u2e(t){if(Array.isArray(t))return bI(t)}function bI(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function c2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qZ(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Cee(r.key),r)}}function d2e(t,e,a){return e&&qZ(t.prototype,e),a&&qZ(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function h2e(t,e,a){return e=s2(e),f2e(t,Tee()?Reflect.construct(e,a||[],s2(t).constructor):e.apply(t,a))}function f2e(t,e){if(e&&(X_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p2e(t)}function p2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tee=function(){return!!t})()}function s2(t){return s2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},s2(t)}function m2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xI(t,e)}function xI(t,e){return xI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},xI(t,e)}function Gp(t,e,a){return e=Cee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Cee(t){var e=g2e(t,"string");return X_(e)=="symbol"?e:e+""}function g2e(t,e){if(X_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(X_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Yv=function(t){function e(){var a;c2e(this,e);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return a=h2e(this,e,[].concat(i)),Gp(a,"state",{isAnimationFinished:!0,totalLength:0}),Gp(a,"generateSimpleStrokeDasharray",function(c,n){return"".concat(n,"px ").concat(c-n,"px")}),Gp(a,"getStrokeDasharray",function(c,n,v){var R=v.reduce(function(W,ee){return W+ee});if(!R)return a.generateSimpleStrokeDasharray(n,c);for(var x=Math.floor(c/R),N=c%R,L=n-c,F=[],j=0,$=0;j<v.length;$+=v[j],++j)if($+v[j]>N){F=[].concat(j0(v.slice(0,j)),[N-$]);break}var H=F.length%2===0?[0,L]:[L];return[].concat(j0(e.repeat(v,x)),j0(F),H).map(function(W){return"".concat(W,"px")}).join(", ")}),Gp(a,"id",cA("recharts-line-")),Gp(a,"pathRef",function(c){a.mainCurve=c}),Gp(a,"handleAnimationEnd",function(){a.setState({isAnimationFinished:!0}),a.props.onAnimationEnd&&a.props.onAnimationEnd()}),Gp(a,"handleAnimationStart",function(){a.setState({isAnimationFinished:!1}),a.props.onAnimationStart&&a.props.onAnimationStart()}),a}return m2e(e,t),d2e(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.points,n=l.xAxis,v=l.yAxis,R=l.layout,x=l.children,N=hh(x,C1);if(!N)return null;var L=function($,H){return{x:$.x,y:$.y,value:$.value,errorVal:Fo($.payload,H)}},F={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Ot.createElement(_i,F,N.map(function(j){return Ot.cloneElement(j,{key:"bar-".concat(j.props.dataKey),data:c,xAxis:n,yAxis:v,layout:R,dataPointFormatter:L})}))}},{key:"renderDots",value:function(r,i,l){var c=this.props.isAnimationActive;if(c&&!this.state.isAnimationFinished)return null;var n=this.props,v=n.dot,R=n.points,x=n.dataKey,N=gn(this.props,!1),L=gn(v,!0),F=R.map(function($,H){var W=uf(uf(uf({key:"dot-".concat(H),r:3},N),L),{},{value:$.value,dataKey:x,cx:$.x,cy:$.y,index:H,payload:$.payload});return e.renderDotItem(v,W)}),j={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(l,")"):null};return Ot.createElement(_i,xR({className:"recharts-line-dots",key:"dots"},j),F)}},{key:"renderCurveStatically",value:function(r,i,l,c){var n=this.props,v=n.type,R=n.layout,x=n.connectNulls;n.ref;var N=GZ(n,r2e),L=uf(uf(uf({},gn(N,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(l,")"):null,points:r},c),{},{type:v,layout:R,connectNulls:x});return Ot.createElement(Wy,xR({},L,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var l=this,c=this.props,n=c.points,v=c.strokeDasharray,R=c.isAnimationActive,x=c.animationBegin,N=c.animationDuration,L=c.animationEasing,F=c.animationId,j=c.animateNewValues,$=c.width,H=c.height,W=this.state,ee=W.prevPoints,se=W.totalLength;return Ot.createElement(np,{begin:x,duration:N,isActive:R,easing:L,from:{t:0},to:{t:1},key:"line-".concat(F),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(fe){var le=fe.t;if(ee){var me=ee.length/n.length,ge=n.map(function(_e,Fe){var Ee=Math.floor(Fe*me);if(ee[Ee]){var ze=ee[Ee],Se=ml(ze.x,_e.x),je=ml(ze.y,_e.y);return uf(uf({},_e),{},{x:Se(le),y:je(le)})}if(j){var Ue=ml($*2,_e.x),$e=ml(H/2,_e.y);return uf(uf({},_e),{},{x:Ue(le),y:$e(le)})}return uf(uf({},_e),{},{x:_e.x,y:_e.y})});return l.renderCurveStatically(ge,r,i)}var Re=ml(0,se),we=Re(le),Ve;if(v){var oe="".concat(v).split(/[,\s]+/gim).map(function(_e){return parseFloat(_e)});Ve=l.getStrokeDasharray(we,se,oe)}else Ve=l.generateSimpleStrokeDasharray(se,we);return l.renderCurveStatically(n,r,i,{strokeDasharray:Ve})})}},{key:"renderCurve",value:function(r,i){var l=this.props,c=l.points,n=l.isAnimationActive,v=this.state,R=v.prevPoints,x=v.totalLength;return n&&c&&c.length&&(!R&&x>0||!eA(R,c))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(c,r,i)}},{key:"render",value:function(){var r,i=this.props,l=i.hide,c=i.dot,n=i.points,v=i.className,R=i.xAxis,x=i.yAxis,N=i.top,L=i.left,F=i.width,j=i.height,$=i.isAnimationActive,H=i.id;if(l||!n||!n.length)return null;var W=this.state.isAnimationFinished,ee=n.length===1,se=gi("recharts-line",v),fe=R&&R.allowDataOverflow,le=x&&x.allowDataOverflow,me=fe||le,ge=qn(H)?this.id:H,Re=(r=gn(c,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},we=Re.r,Ve=we===void 0?3:we,oe=Re.strokeWidth,_e=oe===void 0?2:oe,Fe=bX(c)?c:{},Ee=Fe.clipDot,ze=Ee===void 0?!0:Ee,Se=Ve*2+_e;return Ot.createElement(_i,{className:se},fe||le?Ot.createElement("defs",null,Ot.createElement("clipPath",{id:"clipPath-".concat(ge)},Ot.createElement("rect",{x:fe?L:L-F/2,y:le?N:N-j/2,width:fe?F:F*2,height:le?j:j*2})),!ze&&Ot.createElement("clipPath",{id:"clipPath-dots-".concat(ge)},Ot.createElement("rect",{x:L-Se/2,y:N-Se/2,width:F+Se,height:j+Se}))):null,!ee&&this.renderCurve(me,ge),this.renderErrorBar(me,ge),(ee||c)&&this.renderDots(me,ze,ge),(!$||W)&&ap.renderCallByParent(this.props,n))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var l=r.length%2!==0?[].concat(j0(r),[0]):r,c=[],n=0;n<i;++n)c=[].concat(j0(c),j0(l));return c}},{key:"renderDotItem",value:function(r,i){var l;if(Ot.isValidElement(r))l=Ot.cloneElement(r,i);else if(Zn(r))l=r(i);else{var c=i.key,n=GZ(i,n2e),v=gi("recharts-line-dot",typeof r!="boolean"?r.className:"");l=Ot.createElement(AC,xR({key:c},n,{className:v}))}return l}}])}(ie.PureComponent);Gp(Yv,"displayName","Line");Gp(Yv,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Gg.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Gp(Yv,"getComposedData",function(t){var e=t.props,a=t.xAxis,r=t.yAxis,i=t.xAxisTicks,l=t.yAxisTicks,c=t.dataKey,n=t.bandSize,v=t.displayedData,R=t.offset,x=e.layout,N=v.map(function(L,F){var j=Fo(L,c);return x==="horizontal"?{x:k_({axis:a,ticks:i,bandSize:n,entry:L,index:F}),y:qn(j)?null:r.scale(j),value:j,payload:L}:{x:qn(j)?null:a.scale(j),y:k_({axis:r,ticks:l,bandSize:n,entry:L,index:F}),value:j,payload:L}});return uf({points:N,layout:x},R)});var y2e=["layout","type","stroke","connectNulls","isRange","ref"],A2e=["key"],See;function J_(t){"@babel/helpers - typeof";return J_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J_(t)}function bee(t,e){if(t==null)return{};var a=v2e(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function v2e(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function yv(){return yv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},yv.apply(this,arguments)}function HZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Ey(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?HZ(Object(a),!0).forEach(function(r){Dm(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):HZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function _2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $Z(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pee(r.key),r)}}function w2e(t,e,a){return e&&$Z(t.prototype,e),a&&$Z(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function R2e(t,e,a){return e=o2(e),T2e(t,xee()?Reflect.construct(e,a||[],o2(t).constructor):e.apply(t,a))}function T2e(t,e){if(e&&(J_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C2e(t)}function C2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xee=function(){return!!t})()}function o2(t){return o2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},o2(t)}function S2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PI(t,e)}function PI(t,e){return PI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},PI(t,e)}function Dm(t,e,a){return e=Pee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Pee(t){var e=b2e(t,"string");return J_(e)=="symbol"?e:e+""}function b2e(t,e){if(J_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(J_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var mf=function(t){function e(){var a;_2e(this,e);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return a=R2e(this,e,[].concat(i)),Dm(a,"state",{isAnimationFinished:!0}),Dm(a,"id",cA("recharts-area-")),Dm(a,"handleAnimationEnd",function(){var c=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),Zn(c)&&c()}),Dm(a,"handleAnimationStart",function(){var c=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),Zn(c)&&c()}),a}return S2e(e,t),w2e(e,[{key:"renderDots",value:function(r,i,l){var c=this.props.isAnimationActive,n=this.state.isAnimationFinished;if(c&&!n)return null;var v=this.props,R=v.dot,x=v.points,N=v.dataKey,L=gn(this.props,!1),F=gn(R,!0),j=x.map(function(H,W){var ee=Ey(Ey(Ey({key:"dot-".concat(W),r:3},L),F),{},{index:W,cx:H.x,cy:H.y,dataKey:N,value:H.value,payload:H.payload,points:x});return e.renderDotItem(R,ee)}),$={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(l,")"):null};return Ot.createElement(_i,yv({className:"recharts-area-dots"},$),j)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,l=i.baseLine,c=i.points,n=i.strokeWidth,v=c[0].x,R=c[c.length-1].x,x=r*Math.abs(v-R),N=Uy(c.map(function(L){return L.y||0}));return _r(l)&&typeof l=="number"?N=Math.max(l,N):l&&Array.isArray(l)&&l.length&&(N=Math.max(Uy(l.map(function(L){return L.y||0})),N)),_r(N)?Ot.createElement("rect",{x:v<R?v:v-x,y:0,width:x,height:Math.floor(N+(n?parseInt("".concat(n),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,l=i.baseLine,c=i.points,n=i.strokeWidth,v=c[0].y,R=c[c.length-1].y,x=r*Math.abs(v-R),N=Uy(c.map(function(L){return L.x||0}));return _r(l)&&typeof l=="number"?N=Math.max(l,N):l&&Array.isArray(l)&&l.length&&(N=Math.max(Uy(l.map(function(L){return L.x||0})),N)),_r(N)?Ot.createElement("rect",{x:0,y:v<R?v:v-x,width:N+(n?parseInt("".concat(n),10):1),height:Math.floor(x)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,l,c){var n=this.props,v=n.layout,R=n.type,x=n.stroke,N=n.connectNulls,L=n.isRange;n.ref;var F=bee(n,y2e);return Ot.createElement(_i,{clipPath:l?"url(#clipPath-".concat(c,")"):null},Ot.createElement(Wy,yv({},gn(F,!0),{points:r,connectNulls:N,type:R,baseLine:i,layout:v,stroke:"none",className:"recharts-area-area"})),x!=="none"&&Ot.createElement(Wy,yv({},gn(this.props,!1),{className:"recharts-area-curve",layout:v,type:R,connectNulls:N,fill:"none",points:r})),x!=="none"&&L&&Ot.createElement(Wy,yv({},gn(this.props,!1),{className:"recharts-area-curve",layout:v,type:R,connectNulls:N,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var l=this,c=this.props,n=c.points,v=c.baseLine,R=c.isAnimationActive,x=c.animationBegin,N=c.animationDuration,L=c.animationEasing,F=c.animationId,j=this.state,$=j.prevPoints,H=j.prevBaseLine;return Ot.createElement(np,{begin:x,duration:N,isActive:R,easing:L,from:{t:0},to:{t:1},key:"area-".concat(F),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(W){var ee=W.t;if($){var se=$.length/n.length,fe=n.map(function(Re,we){var Ve=Math.floor(we*se);if($[Ve]){var oe=$[Ve],_e=ml(oe.x,Re.x),Fe=ml(oe.y,Re.y);return Ey(Ey({},Re),{},{x:_e(ee),y:Fe(ee)})}return Re}),le;if(_r(v)&&typeof v=="number"){var me=ml(H,v);le=me(ee)}else if(qn(v)||v1(v)){var ge=ml(H,0);le=ge(ee)}else le=v.map(function(Re,we){var Ve=Math.floor(we*se);if(H[Ve]){var oe=H[Ve],_e=ml(oe.x,Re.x),Fe=ml(oe.y,Re.y);return Ey(Ey({},Re),{},{x:_e(ee),y:Fe(ee)})}return Re});return l.renderAreaStatically(fe,le,r,i)}return Ot.createElement(_i,null,Ot.createElement("defs",null,Ot.createElement("clipPath",{id:"animationClipPath-".concat(i)},l.renderClipRect(ee))),Ot.createElement(_i,{clipPath:"url(#animationClipPath-".concat(i,")")},l.renderAreaStatically(n,v,r,i)))})}},{key:"renderArea",value:function(r,i){var l=this.props,c=l.points,n=l.baseLine,v=l.isAnimationActive,R=this.state,x=R.prevPoints,N=R.prevBaseLine,L=R.totalLength;return v&&c&&c.length&&(!x&&L>0||!eA(x,c)||!eA(N,n))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(c,n,r,i)}},{key:"render",value:function(){var r,i=this.props,l=i.hide,c=i.dot,n=i.points,v=i.className,R=i.top,x=i.left,N=i.xAxis,L=i.yAxis,F=i.width,j=i.height,$=i.isAnimationActive,H=i.id;if(l||!n||!n.length)return null;var W=this.state.isAnimationFinished,ee=n.length===1,se=gi("recharts-area",v),fe=N&&N.allowDataOverflow,le=L&&L.allowDataOverflow,me=fe||le,ge=qn(H)?this.id:H,Re=(r=gn(c,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},we=Re.r,Ve=we===void 0?3:we,oe=Re.strokeWidth,_e=oe===void 0?2:oe,Fe=bX(c)?c:{},Ee=Fe.clipDot,ze=Ee===void 0?!0:Ee,Se=Ve*2+_e;return Ot.createElement(_i,{className:se},fe||le?Ot.createElement("defs",null,Ot.createElement("clipPath",{id:"clipPath-".concat(ge)},Ot.createElement("rect",{x:fe?x:x-F/2,y:le?R:R-j/2,width:fe?F:F*2,height:le?j:j*2})),!ze&&Ot.createElement("clipPath",{id:"clipPath-dots-".concat(ge)},Ot.createElement("rect",{x:x-Se/2,y:R-Se/2,width:F+Se,height:j+Se}))):null,ee?null:this.renderArea(me,ge),(c||ee)&&this.renderDots(me,ze,ge),(!$||W)&&ap.renderCallByParent(this.props,n))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(ie.PureComponent);See=mf;Dm(mf,"displayName","Area");Dm(mf,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Gg.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Dm(mf,"getBaseValue",function(t,e,a,r){var i=t.layout,l=t.baseValue,c=e.props.baseValue,n=c??l;if(_r(n)&&typeof n=="number")return n;var v=i==="horizontal"?r:a,R=v.scale.domain();if(v.type==="number"){var x=Math.max(R[0],R[1]),N=Math.min(R[0],R[1]);return n==="dataMin"?N:n==="dataMax"||x<0?x:Math.max(Math.min(R[0],R[1]),0)}return n==="dataMin"?R[0]:n==="dataMax"?R[1]:R[0]});Dm(mf,"getComposedData",function(t){var e=t.props,a=t.item,r=t.xAxis,i=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,n=t.bandSize,v=t.dataKey,R=t.stackedData,x=t.dataStartIndex,N=t.displayedData,L=t.offset,F=e.layout,j=R&&R.length,$=See.getBaseValue(e,a,r,i),H=F==="horizontal",W=!1,ee=N.map(function(fe,le){var me;j?me=R[x+le]:(me=Fo(fe,v),Array.isArray(me)?W=!0:me=[$,me]);var ge=me[1]==null||j&&Fo(fe,v)==null;return H?{x:k_({axis:r,ticks:l,bandSize:n,entry:fe,index:le}),y:ge?null:i.scale(me[1]),value:me,payload:fe}:{x:ge?null:r.scale(me[1]),y:k_({axis:i,ticks:c,bandSize:n,entry:fe,index:le}),value:me,payload:fe}}),se;return j||W?se=ee.map(function(fe){var le=Array.isArray(fe.value)?fe.value[0]:null;return H?{x:fe.x,y:le!=null&&fe.y!=null?i.scale(le):null}:{x:le!=null?r.scale(le):null,y:fe.y}}):se=H?i.scale($):r.scale($),Ey({points:ee,baseLine:se,layout:F,isRange:W},L)});Dm(mf,"renderDotItem",function(t,e){var a;if(Ot.isValidElement(t))a=Ot.cloneElement(t,e);else if(Zn(t))a=t(e);else{var r=gi("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,l=bee(e,A2e);a=Ot.createElement(AC,yv({},l,{key:i,className:r}))}return a});function Q_(t){"@babel/helpers - typeof";return Q_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q_(t)}function x2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P2e(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Oee(r.key),r)}}function E2e(t,e,a){return e&&P2e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function N2e(t,e,a){return e=l2(e),O2e(t,Eee()?Reflect.construct(e,a||[],l2(t).constructor):e.apply(t,a))}function O2e(t,e){if(e&&(Q_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return V2e(t)}function V2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Eee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Eee=function(){return!!t})()}function l2(t){return l2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},l2(t)}function z2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&EI(t,e)}function EI(t,e){return EI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},EI(t,e)}function Nee(t,e,a){return e=Oee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Oee(t){var e=D2e(t,"string");return Q_(e)=="symbol"?e:e+""}function D2e(t,e){if(Q_(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Q_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var KP=function(t){function e(){return x2e(this,e),N2e(this,e,arguments)}return z2e(e,t),E2e(e,[{key:"render",value:function(){return null}}])}(Ot.Component);Nee(KP,"displayName","ZAxis");Nee(KP,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var M2e=["option","isActive"];function PR(){return PR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},PR.apply(this,arguments)}function I2e(t,e){if(t==null)return{};var a=L2e(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function L2e(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function F2e(t){var e=t.option,a=t.isActive,r=I2e(t,M2e);return typeof e=="string"?Ot.createElement(Kx,PR({option:Ot.createElement(RP,PR({type:e},r)),isActive:a,shapeType:"symbols"},r)):Ot.createElement(Kx,PR({option:e,isActive:a,shapeType:"symbols"},r))}function e1(t){"@babel/helpers - typeof";return e1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e1(t)}function ER(){return ER=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ER.apply(this,arguments)}function KZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Yf(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?KZ(Object(a),!0).forEach(function(r){jy(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):KZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function k2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WZ(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zee(r.key),r)}}function U2e(t,e,a){return e&&WZ(t.prototype,e),a&&WZ(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function B2e(t,e,a){return e=u2(e),j2e(t,Vee()?Reflect.construct(e,a||[],u2(t).constructor):e.apply(t,a))}function j2e(t,e){if(e&&(e1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G2e(t)}function G2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Vee=function(){return!!t})()}function u2(t){return u2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},u2(t)}function Z2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NI(t,e)}function NI(t,e){return NI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},NI(t,e)}function jy(t,e,a){return e=zee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function zee(t){var e=q2e(t,"string");return e1(e)=="symbol"?e:e+""}function q2e(t,e){if(e1(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(e1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var WP=function(t){function e(){var a;k2e(this,e);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return a=B2e(this,e,[].concat(i)),jy(a,"state",{isAnimationFinished:!1}),jy(a,"handleAnimationEnd",function(){a.setState({isAnimationFinished:!0})}),jy(a,"handleAnimationStart",function(){a.setState({isAnimationFinished:!1})}),jy(a,"id",cA("recharts-scatter-")),a}return Z2e(e,t),U2e(e,[{key:"renderSymbolsStatically",value:function(r){var i=this,l=this.props,c=l.shape,n=l.activeShape,v=l.activeIndex,R=gn(this.props,!1);return r.map(function(x,N){var L=v===N,F=L?n:c,j=Yf(Yf({},R),x);return Ot.createElement(_i,ER({className:"recharts-scatter-symbol",key:"symbol-".concat(x==null?void 0:x.cx,"-").concat(x==null?void 0:x.cy,"-").concat(x==null?void 0:x.size,"-").concat(N)},Qy(i.props,x,N),{role:"img"}),Ot.createElement(F2e,ER({option:F,isActive:L,key:"symbol-".concat(N)},j)))})}},{key:"renderSymbolsWithAnimation",value:function(){var r=this,i=this.props,l=i.points,c=i.isAnimationActive,n=i.animationBegin,v=i.animationDuration,R=i.animationEasing,x=i.animationId,N=this.state.prevPoints;return Ot.createElement(np,{begin:n,duration:v,isActive:c,easing:R,from:{t:0},to:{t:1},key:"pie-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(L){var F=L.t,j=l.map(function($,H){var W=N&&N[H];if(W){var ee=ml(W.cx,$.cx),se=ml(W.cy,$.cy),fe=ml(W.size,$.size);return Yf(Yf({},$),{},{cx:ee(F),cy:se(F),size:fe(F)})}var le=ml(0,$.size);return Yf(Yf({},$),{},{size:le(F)})});return Ot.createElement(_i,null,r.renderSymbolsStatically(j))})}},{key:"renderSymbols",value:function(){var r=this.props,i=r.points,l=r.isAnimationActive,c=this.state.prevPoints;return l&&i&&i.length&&(!c||!eA(c,i))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(i)}},{key:"renderErrorBar",value:function(){var r=this.props.isAnimationActive;if(r&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.points,c=i.xAxis,n=i.yAxis,v=i.children,R=hh(v,C1);return R?R.map(function(x,N){var L=x.props,F=L.direction,j=L.dataKey;return Ot.cloneElement(x,{key:"".concat(F,"-").concat(j,"-").concat(l[N]),data:l,xAxis:c,yAxis:n,layout:F==="x"?"vertical":"horizontal",dataPointFormatter:function(H,W){return{x:H.cx,y:H.cy,value:F==="x"?+H.node.x:+H.node.y,errorVal:Fo(H,W)}}})}):null}},{key:"renderLine",value:function(){var r=this.props,i=r.points,l=r.line,c=r.lineType,n=r.lineJointType,v=gn(this.props,!1),R=gn(l,!1),x,N;if(c==="joint")x=i.map(function(se){return{x:se.cx,y:se.cy}});else if(c==="fitting"){var L=Upe(i),F=L.xmin,j=L.xmax,$=L.a,H=L.b,W=function(fe){return $*fe+H};x=[{x:F,y:W(F)},{x:j,y:W(j)}]}var ee=Yf(Yf(Yf({},v),{},{fill:"none",stroke:v&&v.fill},R),{},{points:x});return Ot.isValidElement(l)?N=Ot.cloneElement(l,ee):Zn(l)?N=l(ee):N=Ot.createElement(Wy,ER({},ee,{type:n})),Ot.createElement(_i,{className:"recharts-scatter-line",key:"recharts-scatter-line"},N)}},{key:"render",value:function(){var r=this.props,i=r.hide,l=r.points,c=r.line,n=r.className,v=r.xAxis,R=r.yAxis,x=r.left,N=r.top,L=r.width,F=r.height,j=r.id,$=r.isAnimationActive;if(i||!l||!l.length)return null;var H=this.state.isAnimationFinished,W=gi("recharts-scatter",n),ee=v&&v.allowDataOverflow,se=R&&R.allowDataOverflow,fe=ee||se,le=qn(j)?this.id:j;return Ot.createElement(_i,{className:W,clipPath:fe?"url(#clipPath-".concat(le,")"):null},ee||se?Ot.createElement("defs",null,Ot.createElement("clipPath",{id:"clipPath-".concat(le)},Ot.createElement("rect",{x:ee?x:x-L/2,y:se?N:N-F/2,width:ee?L:L*2,height:se?F:F*2}))):null,c&&this.renderLine(),this.renderErrorBar(),Ot.createElement(_i,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!$||H)&&ap.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}}])}(ie.PureComponent);jy(WP,"displayName","Scatter");jy(WP,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Gg.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});jy(WP,"getComposedData",function(t){var e=t.xAxis,a=t.yAxis,r=t.zAxis,i=t.item,l=t.displayedData,c=t.xAxisTicks,n=t.yAxisTicks,v=t.offset,R=i.props.tooltipType,x=hh(i.props.children,D_),N=qn(e.dataKey)?i.props.dataKey:e.dataKey,L=qn(a.dataKey)?i.props.dataKey:a.dataKey,F=r&&r.dataKey,j=r?r.range:KP.defaultProps.range,$=j&&j[0],H=e.scale.bandwidth?e.scale.bandwidth():0,W=a.scale.bandwidth?a.scale.bandwidth():0,ee=l.map(function(se,fe){var le=Fo(se,N),me=Fo(se,L),ge=!qn(F)&&Fo(se,F)||"-",Re=[{name:qn(e.dataKey)?i.props.name:e.name||e.dataKey,unit:e.unit||"",value:le,payload:se,dataKey:N,type:R},{name:qn(a.dataKey)?i.props.name:a.name||a.dataKey,unit:a.unit||"",value:me,payload:se,dataKey:L,type:R}];ge!=="-"&&Re.push({name:r.name||r.dataKey,unit:r.unit||"",value:ge,payload:se,dataKey:F,type:R});var we=k_({axis:e,ticks:c,bandSize:H,entry:se,index:fe,dataKey:N}),Ve=k_({axis:a,ticks:n,bandSize:W,entry:se,index:fe,dataKey:L}),oe=ge!=="-"?r.scale(ge):$,_e=Math.sqrt(Math.max(oe,0)/Math.PI);return Yf(Yf({},se),{},{cx:we,cy:Ve,x:we-_e,y:Ve-_e,xAxis:e,yAxis:a,zAxis:r,width:2*_e,height:2*_e,size:oe,node:{x:le,y:me,z:ge},tooltipPayload:Re,tooltipPosition:{x:we,y:Ve},payload:se},x&&x[fe]&&x[fe].props)});return Yf({points:ee},v)});function t1(t){"@babel/helpers - typeof";return t1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t1(t)}function H2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $2e(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Iee(r.key),r)}}function K2e(t,e,a){return e&&$2e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function W2e(t,e,a){return e=c2(e),Y2e(t,Dee()?Reflect.construct(e,a||[],c2(t).constructor):e.apply(t,a))}function Y2e(t,e){if(e&&(t1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return X2e(t)}function X2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Dee=function(){return!!t})()}function c2(t){return c2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},c2(t)}function J2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OI(t,e)}function OI(t,e){return OI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},OI(t,e)}function Mee(t,e,a){return e=Iee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Iee(t){var e=Q2e(t,"string");return t1(e)=="symbol"?e:e+""}function Q2e(t,e){if(t1(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(t1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function VI(){return VI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},VI.apply(this,arguments)}function ePe(t){var e=t.xAxisId,a=V4(),r=z4(),i=dee(e);return i==null?null:Ot.createElement(S1,VI({},i,{className:gi("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:a,height:r},ticksGenerator:function(c){return bg(c,!0)}}))}var gd=function(t){function e(){return H2e(this,e),W2e(this,e,arguments)}return J2e(e,t),K2e(e,[{key:"render",value:function(){return Ot.createElement(ePe,this.props)}}])}(Ot.Component);Mee(gd,"displayName","XAxis");Mee(gd,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function a1(t){"@babel/helpers - typeof";return a1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a1(t)}function tPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aPe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kee(r.key),r)}}function rPe(t,e,a){return e&&aPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function nPe(t,e,a){return e=d2(e),iPe(t,Lee()?Reflect.construct(e,a||[],d2(t).constructor):e.apply(t,a))}function iPe(t,e){if(e&&(a1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sPe(t)}function sPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Lee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Lee=function(){return!!t})()}function d2(t){return d2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},d2(t)}function oPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zI(t,e)}function zI(t,e){return zI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},zI(t,e)}function Fee(t,e,a){return e=kee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function kee(t){var e=lPe(t,"string");return a1(e)=="symbol"?e:e+""}function lPe(t,e){if(a1(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(a1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function DI(){return DI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},DI.apply(this,arguments)}var uPe=function(e){var a=e.yAxisId,r=V4(),i=z4(),l=hee(a);return l==null?null:Ot.createElement(S1,DI({},l,{className:gi("recharts-".concat(l.axisType," ").concat(l.axisType),l.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(n){return bg(n,!0)}}))},yd=function(t){function e(){return tPe(this,e),nPe(this,e,arguments)}return oPe(e,t),rPe(e,[{key:"render",value:function(){return Ot.createElement(uPe,this.props)}}])}(Ot.Component);Fee(yd,"displayName","YAxis");Fee(yd,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function YZ(t){return fPe(t)||hPe(t)||dPe(t)||cPe()}function cPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dPe(t,e){if(t){if(typeof t=="string")return MI(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return MI(t,e)}}function hPe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function fPe(t){if(Array.isArray(t))return MI(t)}function MI(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var II=function(e,a,r,i,l){var c=hh(e,M4),n=hh(e,qP),v=[].concat(YZ(c),YZ(n)),R=hh(e,$P),x="".concat(i,"Id"),N=i[0],L=a;if(v.length&&(L=v.reduce(function($,H){if(H.props[x]===r&&jm(H.props,"extendDomain")&&_r(H.props[N])){var W=H.props[N];return[Math.min($[0],W),Math.max($[1],W)]}return $},L)),R.length){var F="".concat(N,"1"),j="".concat(N,"2");L=R.reduce(function($,H){if(H.props[x]===r&&jm(H.props,"extendDomain")&&_r(H.props[F])&&_r(H.props[j])){var W=H.props[F],ee=H.props[j];return[Math.min($[0],W,ee),Math.max($[1],W,ee)]}return $},L)}return l&&l.length&&(L=l.reduce(function($,H){return _r(H)?[Math.min($[0],H),Math.max($[1],H)]:$},L)),L},F5={exports:{}},XZ;function pPe(){return XZ||(XZ=1,function(t){var e=Object.prototype.hasOwnProperty,a="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(a=!1));function i(v,R,x){this.fn=v,this.context=R,this.once=x||!1}function l(v,R,x,N,L){if(typeof x!="function")throw new TypeError("The listener must be a function");var F=new i(x,N||v,L),j=a?a+R:R;return v._events[j]?v._events[j].fn?v._events[j]=[v._events[j],F]:v._events[j].push(F):(v._events[j]=F,v._eventsCount++),v}function c(v,R){--v._eventsCount===0?v._events=new r:delete v._events[R]}function n(){this._events=new r,this._eventsCount=0}n.prototype.eventNames=function(){var R=[],x,N;if(this._eventsCount===0)return R;for(N in x=this._events)e.call(x,N)&&R.push(a?N.slice(1):N);return Object.getOwnPropertySymbols?R.concat(Object.getOwnPropertySymbols(x)):R},n.prototype.listeners=function(R){var x=a?a+R:R,N=this._events[x];if(!N)return[];if(N.fn)return[N.fn];for(var L=0,F=N.length,j=new Array(F);L<F;L++)j[L]=N[L].fn;return j},n.prototype.listenerCount=function(R){var x=a?a+R:R,N=this._events[x];return N?N.fn?1:N.length:0},n.prototype.emit=function(R,x,N,L,F,j){var $=a?a+R:R;if(!this._events[$])return!1;var H=this._events[$],W=arguments.length,ee,se;if(H.fn){switch(H.once&&this.removeListener(R,H.fn,void 0,!0),W){case 1:return H.fn.call(H.context),!0;case 2:return H.fn.call(H.context,x),!0;case 3:return H.fn.call(H.context,x,N),!0;case 4:return H.fn.call(H.context,x,N,L),!0;case 5:return H.fn.call(H.context,x,N,L,F),!0;case 6:return H.fn.call(H.context,x,N,L,F,j),!0}for(se=1,ee=new Array(W-1);se<W;se++)ee[se-1]=arguments[se];H.fn.apply(H.context,ee)}else{var fe=H.length,le;for(se=0;se<fe;se++)switch(H[se].once&&this.removeListener(R,H[se].fn,void 0,!0),W){case 1:H[se].fn.call(H[se].context);break;case 2:H[se].fn.call(H[se].context,x);break;case 3:H[se].fn.call(H[se].context,x,N);break;case 4:H[se].fn.call(H[se].context,x,N,L);break;default:if(!ee)for(le=1,ee=new Array(W-1);le<W;le++)ee[le-1]=arguments[le];H[se].fn.apply(H[se].context,ee)}}return!0},n.prototype.on=function(R,x,N){return l(this,R,x,N,!1)},n.prototype.once=function(R,x,N){return l(this,R,x,N,!0)},n.prototype.removeListener=function(R,x,N,L){var F=a?a+R:R;if(!this._events[F])return this;if(!x)return c(this,F),this;var j=this._events[F];if(j.fn)j.fn===x&&(!L||j.once)&&(!N||j.context===N)&&c(this,F);else{for(var $=0,H=[],W=j.length;$<W;$++)(j[$].fn!==x||L&&!j[$].once||N&&j[$].context!==N)&&H.push(j[$]);H.length?this._events[F]=H.length===1?H[0]:H:c(this,F)}return this},n.prototype.removeAllListeners=function(R){var x;return R?(x=a?a+R:R,this._events[x]&&c(this,x)):(this._events=new r,this._eventsCount=0),this},n.prototype.off=n.prototype.removeListener,n.prototype.addListener=n.prototype.on,n.prefixed=a,n.EventEmitter=n,t.exports=n}(F5)),F5.exports}var mPe=pPe();const gPe=ss(mPe);var k5=new gPe,U5="recharts.syncMouseEvents";function OT(t){"@babel/helpers - typeof";return OT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OT(t)}function yPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function APe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Uee(r.key),r)}}function vPe(t,e,a){return e&&APe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function B5(t,e,a){return e=Uee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Uee(t){var e=_Pe(t,"string");return OT(e)=="symbol"?e:e+""}function _Pe(t,e){if(OT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(OT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var wPe=function(){function t(){yPe(this,t),B5(this,"activeIndex",0),B5(this,"coordinateList",[]),B5(this,"layout","horizontal")}return vPe(t,[{key:"setDetails",value:function(a){var r,i=a.coordinateList,l=i===void 0?null:i,c=a.container,n=c===void 0?null:c,v=a.layout,R=v===void 0?null:v,x=a.offset,N=x===void 0?null:x,L=a.mouseHandlerCallback,F=L===void 0?null:L;this.coordinateList=(r=l??this.coordinateList)!==null&&r!==void 0?r:[],this.container=n??this.container,this.layout=R??this.layout,this.offset=N??this.offset,this.mouseHandlerCallback=F??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(a){if(this.coordinateList.length!==0)switch(a.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(a){this.activeIndex=a}},{key:"spoofMouse",value:function(){var a,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),l=i.x,c=i.y,n=i.height,v=this.coordinateList[this.activeIndex].coordinate,R=((a=window)===null||a===void 0?void 0:a.scrollX)||0,x=((r=window)===null||r===void 0?void 0:r.scrollY)||0,N=l+v+R,L=c+this.offset.top+n/2+x;this.mouseHandlerCallback({pageX:N,pageY:L})}}}])}();function RPe(t,e,a){if(a==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&_r(r)&&_r(i))return!0}return!1}function TPe(t,e,a,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:a.left+.5,y:t==="horizontal"?a.top+.5:e.y-i,width:t==="horizontal"?r:a.width-1,height:t==="horizontal"?a.height-1:r}}function Bee(t){var e=t.cx,a=t.cy,r=t.radius,i=t.startAngle,l=t.endAngle,c=Po(e,a,r,i),n=Po(e,a,r,l);return{points:[c,n],cx:e,cy:a,radius:r,startAngle:i,endAngle:l}}function CPe(t,e,a){var r,i,l,c;if(t==="horizontal")r=e.x,l=r,i=a.top,c=a.top+a.height;else if(t==="vertical")i=e.y,c=i,r=a.left,l=a.left+a.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var n=e.cx,v=e.cy,R=e.innerRadius,x=e.outerRadius,N=e.angle,L=Po(n,v,R,N),F=Po(n,v,x,N);r=L.x,i=L.y,l=F.x,c=F.y}else return Bee(e);return[{x:r,y:i},{x:l,y:c}]}function VT(t){"@babel/helpers - typeof";return VT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VT(t)}function JZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function eb(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?JZ(Object(a),!0).forEach(function(r){SPe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):JZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function SPe(t,e,a){return e=bPe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function bPe(t){var e=xPe(t,"string");return VT(e)=="symbol"?e:e+""}function xPe(t,e){if(VT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(VT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function PPe(t){var e,a,r=t.element,i=t.tooltipEventType,l=t.isActive,c=t.activeCoordinate,n=t.activePayload,v=t.offset,R=t.activeTooltipIndex,x=t.tooltipAxisBandSize,N=t.layout,L=t.chartName,F=(e=r.props.cursor)!==null&&e!==void 0?e:(a=r.type.defaultProps)===null||a===void 0?void 0:a.cursor;if(!r||!F||!l||!c||L!=="ScatterChart"&&i!=="axis")return null;var j,$=Wy;if(L==="ScatterChart")j=c,$=_Ce;else if(L==="BarChart")j=TPe(N,c,v,x),$=P4;else if(N==="radial"){var H=Bee(c),W=H.cx,ee=H.cy,se=H.radius,fe=H.startAngle,le=H.endAngle;j={cx:W,cy:ee,startAngle:fe,endAngle:le,innerRadius:se,outerRadius:se},$=MQ}else j={points:CPe(N,c,v)},$=Wy;var me=eb(eb(eb(eb({stroke:"#ccc",pointerEvents:"none"},v),j),gn(F,!1)),{},{payload:n,payloadIndex:R,className:gi("recharts-tooltip-cursor",F.className)});return ie.isValidElement(F)?ie.cloneElement(F,me):ie.createElement($,me)}var EPe=["item"],NPe=["children","className","width","height","style","compact","title","desc"];function r1(t){"@babel/helpers - typeof";return r1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r1(t)}function r_(){return r_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},r_.apply(this,arguments)}function QZ(t,e){return zPe(t)||VPe(t,e)||Gee(t,e)||OPe()}function OPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VPe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,i,l,c,n=[],v=!0,R=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(v=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);v=!0);}catch(x){R=!0,i=x}finally{try{if(!v&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(R)throw i}}return n}}function zPe(t){if(Array.isArray(t))return t}function eq(t,e){if(t==null)return{};var a=DPe(t,e),r,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)r=l[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function DPe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function MPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IPe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Zee(r.key),r)}}function LPe(t,e,a){return e&&IPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function FPe(t,e,a){return e=h2(e),kPe(t,jee()?Reflect.construct(e,a||[],h2(t).constructor):e.apply(t,a))}function kPe(t,e){if(e&&(r1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UPe(t)}function UPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jee=function(){return!!t})()}function h2(t){return h2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},h2(t)}function BPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LI(t,e)}function LI(t,e){return LI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},LI(t,e)}function n1(t){return ZPe(t)||GPe(t)||Gee(t)||jPe()}function jPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gee(t,e){if(t){if(typeof t=="string")return FI(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return FI(t,e)}}function GPe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ZPe(t){if(Array.isArray(t))return FI(t)}function FI(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function tq(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Wa(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?tq(Object(a),!0).forEach(function(r){Kn(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):tq(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Kn(t,e,a){return e=Zee(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Zee(t){var e=qPe(t,"string");return r1(e)=="symbol"?e:e+""}function qPe(t,e){if(r1(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(r1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var HPe={xAxis:["bottom","top"],yAxis:["left","right"]},$Pe={width:"100%",height:"100%"},qee={x:0,y:0};function tb(t){return t}var KPe=function(e,a){return a==="horizontal"?e.x:a==="vertical"?e.y:a==="centric"?e.angle:e.radius},WPe=function(e,a,r,i){var l=a.find(function(x){return x&&x.index===r});if(l){if(e==="horizontal")return{x:l.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:l.coordinate};if(e==="centric"){var c=l.coordinate,n=i.radius;return Wa(Wa(Wa({},i),Po(i.cx,i.cy,n,c)),{},{angle:c,radius:n})}var v=l.coordinate,R=i.angle;return Wa(Wa(Wa({},i),Po(i.cx,i.cy,v,R)),{},{angle:R,radius:v})}return qee},YP=function(e,a){var r=a.graphicalItems,i=a.dataStartIndex,l=a.dataEndIndex,c=(r??[]).reduce(function(n,v){var R=v.props.data;return R&&R.length?[].concat(n1(n),n1(R)):n},[]);return c.length>0?c:e&&e.length&&_r(i)&&_r(l)?e.slice(i,l+1):[]};function Hee(t){return t==="number"?[0,"auto"]:void 0}var kI=function(e,a,r,i){var l=e.graphicalItems,c=e.tooltipAxis,n=YP(a,e);return r<0||!l||!l.length||r>=n.length?null:l.reduce(function(v,R){var x,N=(x=R.props.data)!==null&&x!==void 0?x:a;N&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(N=N.slice(e.dataStartIndex,e.dataEndIndex+1));var L;if(c.dataKey&&!c.allowDuplicatedCategory){var F=N===void 0?n:N;L=hx(F,c.dataKey,i)}else L=N&&N[r]||n[r];return L?[].concat(n1(v),[EQ(R,L)]):v},[])},aq=function(e,a,r,i){var l=i||{x:e.chartX,y:e.chartY},c=KPe(l,r),n=e.orderedTooltipTicks,v=e.tooltipAxis,R=e.tooltipTicks,x=q1e(c,n,R,v);if(x>=0&&R){var N=R[x]&&R[x].value,L=kI(e,a,x,N),F=WPe(r,n,x,l);return{activeTooltipIndex:x,activeLabel:N,activePayload:L,activeCoordinate:F}}return null},YPe=function(e,a){var r=a.axes,i=a.graphicalItems,l=a.axisType,c=a.axisIdKey,n=a.stackGroups,v=a.dataStartIndex,R=a.dataEndIndex,x=e.layout,N=e.children,L=e.stackOffset,F=TQ(x,l);return r.reduce(function(j,$){var H,W=$.type.defaultProps!==void 0?Wa(Wa({},$.type.defaultProps),$.props):$.props,ee=W.type,se=W.dataKey,fe=W.allowDataOverflow,le=W.allowDuplicatedCategory,me=W.scale,ge=W.ticks,Re=W.includeHidden,we=W[c];if(j[we])return j;var Ve=YP(e.data,{graphicalItems:i.filter(function(be){var Te,ke=c in be.props?be.props[c]:(Te=be.type.defaultProps)===null||Te===void 0?void 0:Te[c];return ke===we}),dataStartIndex:v,dataEndIndex:R}),oe=Ve.length,_e,Fe,Ee;RPe(W.domain,fe,ee)&&(_e=YM(W.domain,null,fe),F&&(ee==="number"||me!=="auto")&&(Ee=TR(Ve,se,"category")));var ze=Hee(ee);if(!_e||_e.length===0){var Se,je=(Se=W.domain)!==null&&Se!==void 0?Se:ze;if(se){if(_e=TR(Ve,se,ee),ee==="category"&&F){var Ue=kpe(_e);le&&Ue?(Fe=_e,_e=Yx(0,oe)):le||(_e=J7(je,_e,$).reduce(function(be,Te){return be.indexOf(Te)>=0?be:[].concat(n1(be),[Te])},[]))}else if(ee==="category")le?_e=_e.filter(function(be){return be!==""&&!qn(be)}):_e=J7(je,_e,$).reduce(function(be,Te){return be.indexOf(Te)>=0||Te===""||qn(Te)?be:[].concat(n1(be),[Te])},[]);else if(ee==="number"){var $e=Y1e(Ve,i.filter(function(be){var Te,ke,Ge=c in be.props?be.props[c]:(Te=be.type.defaultProps)===null||Te===void 0?void 0:Te[c],at="hide"in be.props?be.props.hide:(ke=be.type.defaultProps)===null||ke===void 0?void 0:ke.hide;return Ge===we&&(Re||!at)}),se,l,x);$e&&(_e=$e)}F&&(ee==="number"||me!=="auto")&&(Ee=TR(Ve,se,"category"))}else F?_e=Yx(0,oe):n&&n[we]&&n[we].hasStack&&ee==="number"?_e=L==="expand"?[0,1]:PQ(n[we].stackGroups,v,R):_e=RQ(Ve,i.filter(function(be){var Te=c in be.props?be.props[c]:be.type.defaultProps[c],ke="hide"in be.props?be.props.hide:be.type.defaultProps.hide;return Te===we&&(Re||!ke)}),ee,x,!0);if(ee==="number")_e=II(N,_e,we,l,ge),je&&(_e=YM(je,_e,fe));else if(ee==="category"&&je){var Be=je,qe=_e.every(function(be){return Be.indexOf(be)>=0});qe&&(_e=Be)}}return Wa(Wa({},j),{},Kn({},we,Wa(Wa({},W),{},{axisType:l,domain:_e,categoricalDomain:Ee,duplicateDomain:Fe,originalDomain:(H=W.domain)!==null&&H!==void 0?H:ze,isCategorical:F,layout:x})))},{})},XPe=function(e,a){var r=a.graphicalItems,i=a.Axis,l=a.axisType,c=a.axisIdKey,n=a.stackGroups,v=a.dataStartIndex,R=a.dataEndIndex,x=e.layout,N=e.children,L=YP(e.data,{graphicalItems:r,dataStartIndex:v,dataEndIndex:R}),F=L.length,j=TQ(x,l),$=-1;return r.reduce(function(H,W){var ee=W.type.defaultProps!==void 0?Wa(Wa({},W.type.defaultProps),W.props):W.props,se=ee[c],fe=Hee("number");if(!H[se]){$++;var le;return j?le=Yx(0,F):n&&n[se]&&n[se].hasStack?(le=PQ(n[se].stackGroups,v,R),le=II(N,le,se,l)):(le=YM(fe,RQ(L,r.filter(function(me){var ge,Re,we=c in me.props?me.props[c]:(ge=me.type.defaultProps)===null||ge===void 0?void 0:ge[c],Ve="hide"in me.props?me.props.hide:(Re=me.type.defaultProps)===null||Re===void 0?void 0:Re.hide;return we===se&&!Ve}),"number",x),i.defaultProps.allowDataOverflow),le=II(N,le,se,l)),Wa(Wa({},H),{},Kn({},se,Wa(Wa({axisType:l},i.defaultProps),{},{hide:!0,orientation:vf(HPe,"".concat(l,".").concat($%2),null),domain:le,originalDomain:fe,isCategorical:j,layout:x})))}return H},{})},JPe=function(e,a){var r=a.axisType,i=r===void 0?"xAxis":r,l=a.AxisComp,c=a.graphicalItems,n=a.stackGroups,v=a.dataStartIndex,R=a.dataEndIndex,x=e.children,N="".concat(i,"Id"),L=hh(x,l),F={};return L&&L.length?F=YPe(e,{axes:L,graphicalItems:c,axisType:i,axisIdKey:N,stackGroups:n,dataStartIndex:v,dataEndIndex:R}):c&&c.length&&(F=XPe(e,{Axis:l,graphicalItems:c,axisType:i,axisIdKey:N,stackGroups:n,dataStartIndex:v,dataEndIndex:R})),F},QPe=function(e){var a=Ly(e),r=bg(a,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:t4(r,function(i){return i.coordinate}),tooltipAxis:a,tooltipAxisBandSize:Lx(a,r)}},rq=function(e){var a=e.children,r=e.defaultShowTooltip,i=df(a,q_),l=0,c=0;return e.data&&e.data.length!==0&&(c=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(l=i.props.startIndex),i.props.endIndex>=0&&(c=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:l,dataEndIndex:c,activeTooltipIndex:-1,isTooltipActive:!!r}},eEe=function(e){return!e||!e.length?!1:e.some(function(a){var r=Eg(a&&a.type);return r&&r.indexOf("Bar")>=0})},nq=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},tEe=function(e,a){var r=e.props,i=e.graphicalItems,l=e.xAxisMap,c=l===void 0?{}:l,n=e.yAxisMap,v=n===void 0?{}:n,R=r.width,x=r.height,N=r.children,L=r.margin||{},F=df(N,q_),j=df(N,hf),$=Object.keys(v).reduce(function(le,me){var ge=v[me],Re=ge.orientation;return!ge.mirror&&!ge.hide?Wa(Wa({},le),{},Kn({},Re,le[Re]+ge.width)):le},{left:L.left||0,right:L.right||0}),H=Object.keys(c).reduce(function(le,me){var ge=c[me],Re=ge.orientation;return!ge.mirror&&!ge.hide?Wa(Wa({},le),{},Kn({},Re,vf(le,"".concat(Re))+ge.height)):le},{top:L.top||0,bottom:L.bottom||0}),W=Wa(Wa({},H),$),ee=W.bottom;F&&(W.bottom+=F.props.height||q_.defaultProps.height),j&&a&&(W=K1e(W,i,r,a));var se=R-W.left-W.right,fe=x-W.top-W.bottom;return Wa(Wa({brushBottom:ee},W),{},{width:Math.max(se,0),height:Math.max(fe,0)})},aEe=function(e,a){if(a==="xAxis")return e[a].width;if(a==="yAxis")return e[a].height},vC=function(e){var a=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,l=i===void 0?"axis":i,c=e.validateTooltipEventTypes,n=c===void 0?["axis"]:c,v=e.axisComponents,R=e.legendContent,x=e.formatAxisMap,N=e.defaultProps,L=function(W,ee){var se=ee.graphicalItems,fe=ee.stackGroups,le=ee.offset,me=ee.updateId,ge=ee.dataStartIndex,Re=ee.dataEndIndex,we=W.barSize,Ve=W.layout,oe=W.barGap,_e=W.barCategoryGap,Fe=W.maxBarSize,Ee=nq(Ve),ze=Ee.numericAxisName,Se=Ee.cateAxisName,je=eEe(se),Ue=[];return se.forEach(function($e,Be){var qe=YP(W.data,{graphicalItems:[$e],dataStartIndex:ge,dataEndIndex:Re}),be=$e.type.defaultProps!==void 0?Wa(Wa({},$e.type.defaultProps),$e.props):$e.props,Te=be.dataKey,ke=be.maxBarSize,Ge=be["".concat(ze,"Id")],at=be["".concat(Se,"Id")],rt={},lt=v.reduce(function(or,lr){var Tr=ee["".concat(lr.axisType,"Map")],ka=be["".concat(lr.axisType,"Id")];Tr&&Tr[ka]||lr.axisType==="zAxis"||Lv();var kr=Tr[ka];return Wa(Wa({},or),{},Kn(Kn({},lr.axisType,kr),"".concat(lr.axisType,"Ticks"),bg(kr)))},rt),ot=lt[Se],ve=lt["".concat(Se,"Ticks")],Vt=fe&&fe[Ge]&&fe[Ge].hasStack&&iwe($e,fe[Ge].stackGroups),Bt=Eg($e.type).indexOf("Bar")>=0,wa=Lx(ot,ve),It=[],$t=je&&H1e({barSize:we,stackGroups:fe,totalSize:aEe(lt,Se)});if(Bt){var wt,hr,ba=qn(ke)?Fe:ke,Pa=(wt=(hr=Lx(ot,ve,!0))!==null&&hr!==void 0?hr:ba)!==null&&wt!==void 0?wt:0;It=$1e({barGap:oe,barCategoryGap:_e,bandSize:Pa!==wa?Pa:wa,sizeList:$t[at],maxBarSize:ba}),Pa!==wa&&(It=It.map(function(or){return Wa(Wa({},or),{},{position:Wa(Wa({},or.position),{},{offset:or.position.offset-Pa/2})})}))}var Ja=$e&&$e.type&&$e.type.getComposedData;Ja&&Ue.push({props:Wa(Wa({},Ja(Wa(Wa({},lt),{},{displayedData:qe,props:W,dataKey:Te,item:$e,bandSize:wa,barPosition:It,offset:le,stackedData:Vt,layout:Ve,dataStartIndex:ge,dataEndIndex:Re}))),{},Kn(Kn(Kn({key:$e.key||"item-".concat(Be)},ze,lt[ze]),Se,lt[Se]),"animationId",me)),childIndex:Xpe($e,W.children),item:$e})}),Ue},F=function(W,ee){var se=W.props,fe=W.dataStartIndex,le=W.dataEndIndex,me=W.updateId;if(!f8({props:se}))return null;var ge=se.children,Re=se.layout,we=se.stackOffset,Ve=se.data,oe=se.reverseStackOrder,_e=nq(Re),Fe=_e.numericAxisName,Ee=_e.cateAxisName,ze=hh(ge,r),Se=rwe(Ve,ze,"".concat(Fe,"Id"),"".concat(Ee,"Id"),we,oe),je=v.reduce(function(be,Te){var ke="".concat(Te.axisType,"Map");return Wa(Wa({},be),{},Kn({},ke,JPe(se,Wa(Wa({},Te),{},{graphicalItems:ze,stackGroups:Te.axisType===Fe&&Se,dataStartIndex:fe,dataEndIndex:le}))))},{}),Ue=tEe(Wa(Wa({},je),{},{props:se,graphicalItems:ze}),ee==null?void 0:ee.legendBBox);Object.keys(je).forEach(function(be){je[be]=x(se,je[be],Ue,be.replace("Map",""),a)});var $e=je["".concat(Ee,"Map")],Be=QPe($e),qe=L(se,Wa(Wa({},je),{},{dataStartIndex:fe,dataEndIndex:le,updateId:me,graphicalItems:ze,stackGroups:Se,offset:Ue}));return Wa(Wa({formattedGraphicalItems:qe,graphicalItems:ze,offset:Ue,stackGroups:Se},Be),je)},j=function(H){function W(ee){var se,fe,le;return MPe(this,W),le=FPe(this,W,[ee]),Kn(le,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Kn(le,"accessibilityManager",new wPe),Kn(le,"handleLegendBBoxUpdate",function(me){if(me){var ge=le.state,Re=ge.dataStartIndex,we=ge.dataEndIndex,Ve=ge.updateId;le.setState(Wa({legendBBox:me},F({props:le.props,dataStartIndex:Re,dataEndIndex:we,updateId:Ve},Wa(Wa({},le.state),{},{legendBBox:me}))))}}),Kn(le,"handleReceiveSyncEvent",function(me,ge,Re){if(le.props.syncId===me){if(Re===le.eventEmitterSymbol&&typeof le.props.syncMethod!="function")return;le.applySyncEvent(ge)}}),Kn(le,"handleBrushChange",function(me){var ge=me.startIndex,Re=me.endIndex;if(ge!==le.state.dataStartIndex||Re!==le.state.dataEndIndex){var we=le.state.updateId;le.setState(function(){return Wa({dataStartIndex:ge,dataEndIndex:Re},F({props:le.props,dataStartIndex:ge,dataEndIndex:Re,updateId:we},le.state))}),le.triggerSyncEvent({dataStartIndex:ge,dataEndIndex:Re})}}),Kn(le,"handleMouseEnter",function(me){var ge=le.getMouseInfo(me);if(ge){var Re=Wa(Wa({},ge),{},{isTooltipActive:!0});le.setState(Re),le.triggerSyncEvent(Re);var we=le.props.onMouseEnter;Zn(we)&&we(Re,me)}}),Kn(le,"triggeredAfterMouseMove",function(me){var ge=le.getMouseInfo(me),Re=ge?Wa(Wa({},ge),{},{isTooltipActive:!0}):{isTooltipActive:!1};le.setState(Re),le.triggerSyncEvent(Re);var we=le.props.onMouseMove;Zn(we)&&we(Re,me)}),Kn(le,"handleItemMouseEnter",function(me){le.setState(function(){return{isTooltipActive:!0,activeItem:me,activePayload:me.tooltipPayload,activeCoordinate:me.tooltipPosition||{x:me.cx,y:me.cy}}})}),Kn(le,"handleItemMouseLeave",function(){le.setState(function(){return{isTooltipActive:!1}})}),Kn(le,"handleMouseMove",function(me){me.persist(),le.throttleTriggeredAfterMouseMove(me)}),Kn(le,"handleMouseLeave",function(me){le.throttleTriggeredAfterMouseMove.cancel();var ge={isTooltipActive:!1};le.setState(ge),le.triggerSyncEvent(ge);var Re=le.props.onMouseLeave;Zn(Re)&&Re(ge,me)}),Kn(le,"handleOuterEvent",function(me){var ge=Ype(me),Re=vf(le.props,"".concat(ge));if(ge&&Zn(Re)){var we,Ve;/.*touch.*/i.test(ge)?Ve=le.getMouseInfo(me.changedTouches[0]):Ve=le.getMouseInfo(me),Re((we=Ve)!==null&&we!==void 0?we:{},me)}}),Kn(le,"handleClick",function(me){var ge=le.getMouseInfo(me);if(ge){var Re=Wa(Wa({},ge),{},{isTooltipActive:!0});le.setState(Re),le.triggerSyncEvent(Re);var we=le.props.onClick;Zn(we)&&we(Re,me)}}),Kn(le,"handleMouseDown",function(me){var ge=le.props.onMouseDown;if(Zn(ge)){var Re=le.getMouseInfo(me);ge(Re,me)}}),Kn(le,"handleMouseUp",function(me){var ge=le.props.onMouseUp;if(Zn(ge)){var Re=le.getMouseInfo(me);ge(Re,me)}}),Kn(le,"handleTouchMove",function(me){me.changedTouches!=null&&me.changedTouches.length>0&&le.throttleTriggeredAfterMouseMove(me.changedTouches[0])}),Kn(le,"handleTouchStart",function(me){me.changedTouches!=null&&me.changedTouches.length>0&&le.handleMouseDown(me.changedTouches[0])}),Kn(le,"handleTouchEnd",function(me){me.changedTouches!=null&&me.changedTouches.length>0&&le.handleMouseUp(me.changedTouches[0])}),Kn(le,"handleDoubleClick",function(me){var ge=le.props.onDoubleClick;if(Zn(ge)){var Re=le.getMouseInfo(me);ge(Re,me)}}),Kn(le,"handleContextMenu",function(me){var ge=le.props.onContextMenu;if(Zn(ge)){var Re=le.getMouseInfo(me);ge(Re,me)}}),Kn(le,"triggerSyncEvent",function(me){le.props.syncId!==void 0&&k5.emit(U5,le.props.syncId,me,le.eventEmitterSymbol)}),Kn(le,"applySyncEvent",function(me){var ge=le.props,Re=ge.layout,we=ge.syncMethod,Ve=le.state.updateId,oe=me.dataStartIndex,_e=me.dataEndIndex;if(me.dataStartIndex!==void 0||me.dataEndIndex!==void 0)le.setState(Wa({dataStartIndex:oe,dataEndIndex:_e},F({props:le.props,dataStartIndex:oe,dataEndIndex:_e,updateId:Ve},le.state)));else if(me.activeTooltipIndex!==void 0){var Fe=me.chartX,Ee=me.chartY,ze=me.activeTooltipIndex,Se=le.state,je=Se.offset,Ue=Se.tooltipTicks;if(!je)return;if(typeof we=="function")ze=we(Ue,me);else if(we==="value"){ze=-1;for(var $e=0;$e<Ue.length;$e++)if(Ue[$e].value===me.activeLabel){ze=$e;break}}var Be=Wa(Wa({},je),{},{x:je.left,y:je.top}),qe=Math.min(Fe,Be.x+Be.width),be=Math.min(Ee,Be.y+Be.height),Te=Ue[ze]&&Ue[ze].value,ke=kI(le.state,le.props.data,ze),Ge=Ue[ze]?{x:Re==="horizontal"?Ue[ze].coordinate:qe,y:Re==="horizontal"?be:Ue[ze].coordinate}:qee;le.setState(Wa(Wa({},me),{},{activeLabel:Te,activeCoordinate:Ge,activePayload:ke,activeTooltipIndex:ze}))}else le.setState(me)}),Kn(le,"renderCursor",function(me){var ge,Re=le.state,we=Re.isTooltipActive,Ve=Re.activeCoordinate,oe=Re.activePayload,_e=Re.offset,Fe=Re.activeTooltipIndex,Ee=Re.tooltipAxisBandSize,ze=le.getTooltipEventType(),Se=(ge=me.props.active)!==null&&ge!==void 0?ge:we,je=le.props.layout,Ue=me.key||"_recharts-cursor";return Ot.createElement(PPe,{key:Ue,activeCoordinate:Ve,activePayload:oe,activeTooltipIndex:Fe,chartName:a,element:me,isActive:Se,layout:je,offset:_e,tooltipAxisBandSize:Ee,tooltipEventType:ze})}),Kn(le,"renderPolarAxis",function(me,ge,Re){var we=vf(me,"type.axisType"),Ve=vf(le.state,"".concat(we,"Map")),oe=me.type.defaultProps,_e=oe!==void 0?Wa(Wa({},oe),me.props):me.props,Fe=Ve&&Ve[_e["".concat(we,"Id")]];return ie.cloneElement(me,Wa(Wa({},Fe),{},{className:gi(we,Fe.className),key:me.key||"".concat(ge,"-").concat(Re),ticks:bg(Fe,!0)}))}),Kn(le,"renderPolarGrid",function(me){var ge=me.props,Re=ge.radialLines,we=ge.polarAngles,Ve=ge.polarRadius,oe=le.state,_e=oe.radiusAxisMap,Fe=oe.angleAxisMap,Ee=Ly(_e),ze=Ly(Fe),Se=ze.cx,je=ze.cy,Ue=ze.innerRadius,$e=ze.outerRadius;return ie.cloneElement(me,{polarAngles:Array.isArray(we)?we:bg(ze,!0).map(function(Be){return Be.coordinate}),polarRadius:Array.isArray(Ve)?Ve:bg(Ee,!0).map(function(Be){return Be.coordinate}),cx:Se,cy:je,innerRadius:Ue,outerRadius:$e,key:me.key||"polar-grid",radialLines:Re})}),Kn(le,"renderLegend",function(){var me=le.state.formattedGraphicalItems,ge=le.props,Re=ge.children,we=ge.width,Ve=ge.height,oe=le.props.margin||{},_e=we-(oe.left||0)-(oe.right||0),Fe=_Q({children:Re,formattedGraphicalItems:me,legendWidth:_e,legendContent:R});if(!Fe)return null;var Ee=Fe.item,ze=eq(Fe,EPe);return ie.cloneElement(Ee,Wa(Wa({},ze),{},{chartWidth:we,chartHeight:Ve,margin:oe,onBBoxUpdate:le.handleLegendBBoxUpdate}))}),Kn(le,"renderTooltip",function(){var me,ge=le.props,Re=ge.children,we=ge.accessibilityLayer,Ve=df(Re,gu);if(!Ve)return null;var oe=le.state,_e=oe.isTooltipActive,Fe=oe.activeCoordinate,Ee=oe.activePayload,ze=oe.activeLabel,Se=oe.offset,je=(me=Ve.props.active)!==null&&me!==void 0?me:_e;return ie.cloneElement(Ve,{viewBox:Wa(Wa({},Se),{},{x:Se.left,y:Se.top}),active:je,label:ze,payload:je?Ee:[],coordinate:Fe,accessibilityLayer:we})}),Kn(le,"renderBrush",function(me){var ge=le.props,Re=ge.margin,we=ge.data,Ve=le.state,oe=Ve.offset,_e=Ve.dataStartIndex,Fe=Ve.dataEndIndex,Ee=Ve.updateId;return ie.cloneElement(me,{key:me.key||"_recharts-brush",onChange:YS(le.handleBrushChange,me.props.onChange),data:we,x:_r(me.props.x)?me.props.x:oe.left,y:_r(me.props.y)?me.props.y:oe.top+oe.height+oe.brushBottom-(Re.bottom||0),width:_r(me.props.width)?me.props.width:oe.width,startIndex:_e,endIndex:Fe,updateId:"brush-".concat(Ee)})}),Kn(le,"renderReferenceElement",function(me,ge,Re){if(!me)return null;var we=le,Ve=we.clipPathId,oe=le.state,_e=oe.xAxisMap,Fe=oe.yAxisMap,Ee=oe.offset,ze=me.type.defaultProps||{},Se=me.props,je=Se.xAxisId,Ue=je===void 0?ze.xAxisId:je,$e=Se.yAxisId,Be=$e===void 0?ze.yAxisId:$e;return ie.cloneElement(me,{key:me.key||"".concat(ge,"-").concat(Re),xAxis:_e[Ue],yAxis:Fe[Be],viewBox:{x:Ee.left,y:Ee.top,width:Ee.width,height:Ee.height},clipPathId:Ve})}),Kn(le,"renderActivePoints",function(me){var ge=me.item,Re=me.activePoint,we=me.basePoint,Ve=me.childIndex,oe=me.isRange,_e=[],Fe=ge.props.key,Ee=ge.item.type.defaultProps!==void 0?Wa(Wa({},ge.item.type.defaultProps),ge.item.props):ge.item.props,ze=Ee.activeDot,Se=Ee.dataKey,je=Wa(Wa({index:Ve,dataKey:Se,cx:Re.x,cy:Re.y,r:4,fill:x4(ge.item),strokeWidth:2,stroke:"#fff",payload:Re.payload,value:Re.value},gn(ze,!1)),fx(ze));return _e.push(W.renderActiveDot(ze,je,"".concat(Fe,"-activePoint-").concat(Ve))),we?_e.push(W.renderActiveDot(ze,Wa(Wa({},je),{},{cx:we.x,cy:we.y}),"".concat(Fe,"-basePoint-").concat(Ve))):oe&&_e.push(null),_e}),Kn(le,"renderGraphicChild",function(me,ge,Re){var we=le.filterFormatItem(me,ge,Re);if(!we)return null;var Ve=le.getTooltipEventType(),oe=le.state,_e=oe.isTooltipActive,Fe=oe.tooltipAxis,Ee=oe.activeTooltipIndex,ze=oe.activeLabel,Se=le.props.children,je=df(Se,gu),Ue=we.props,$e=Ue.points,Be=Ue.isRange,qe=Ue.baseLine,be=we.item.type.defaultProps!==void 0?Wa(Wa({},we.item.type.defaultProps),we.item.props):we.item.props,Te=be.activeDot,ke=be.hide,Ge=be.activeBar,at=be.activeShape,rt=!!(!ke&&_e&&je&&(Te||Ge||at)),lt={};Ve!=="axis"&&je&&je.props.trigger==="click"?lt={onClick:YS(le.handleItemMouseEnter,me.props.onClick)}:Ve!=="axis"&&(lt={onMouseLeave:YS(le.handleItemMouseLeave,me.props.onMouseLeave),onMouseEnter:YS(le.handleItemMouseEnter,me.props.onMouseEnter)});var ot=ie.cloneElement(me,Wa(Wa({},we.props),lt));function ve(lr){return typeof Fe.dataKey=="function"?Fe.dataKey(lr.payload):null}if(rt)if(Ee>=0){var Vt,Bt;if(Fe.dataKey&&!Fe.allowDuplicatedCategory){var wa=typeof Fe.dataKey=="function"?ve:"payload.".concat(Fe.dataKey.toString());Vt=hx($e,wa,ze),Bt=Be&&qe&&hx(qe,wa,ze)}else Vt=$e==null?void 0:$e[Ee],Bt=Be&&qe&&qe[Ee];if(at||Ge){var It=me.props.activeIndex!==void 0?me.props.activeIndex:Ee;return[ie.cloneElement(me,Wa(Wa(Wa({},we.props),lt),{},{activeIndex:It})),null,null]}if(!qn(Vt))return[ot].concat(n1(le.renderActivePoints({item:we,activePoint:Vt,basePoint:Bt,childIndex:Ee,isRange:Be})))}else{var $t,wt=($t=le.getItemByXY(le.state.activeCoordinate))!==null&&$t!==void 0?$t:{graphicalItem:ot},hr=wt.graphicalItem,ba=hr.item,Pa=ba===void 0?me:ba,Ja=hr.childIndex,or=Wa(Wa(Wa({},we.props),lt),{},{activeIndex:Ja});return[ie.cloneElement(Pa,or),null,null]}return Be?[ot,null,null]:[ot,null]}),Kn(le,"renderCustomized",function(me,ge,Re){return ie.cloneElement(me,Wa(Wa({key:"recharts-customized-".concat(Re)},le.props),le.state))}),Kn(le,"renderMap",{CartesianGrid:{handler:tb,once:!0},ReferenceArea:{handler:le.renderReferenceElement},ReferenceLine:{handler:tb},ReferenceDot:{handler:le.renderReferenceElement},XAxis:{handler:tb},YAxis:{handler:tb},Brush:{handler:le.renderBrush,once:!0},Bar:{handler:le.renderGraphicChild},Line:{handler:le.renderGraphicChild},Area:{handler:le.renderGraphicChild},Radar:{handler:le.renderGraphicChild},RadialBar:{handler:le.renderGraphicChild},Scatter:{handler:le.renderGraphicChild},Pie:{handler:le.renderGraphicChild},Funnel:{handler:le.renderGraphicChild},Tooltip:{handler:le.renderCursor,once:!0},PolarGrid:{handler:le.renderPolarGrid,once:!0},PolarAngleAxis:{handler:le.renderPolarAxis},PolarRadiusAxis:{handler:le.renderPolarAxis},Customized:{handler:le.renderCustomized}}),le.clipPathId="".concat((se=ee.id)!==null&&se!==void 0?se:cA("recharts"),"-clip"),le.throttleTriggeredAfterMouseMove=vJ(le.triggeredAfterMouseMove,(fe=ee.throttleDelay)!==null&&fe!==void 0?fe:1e3/60),le.state={},le}return BPe(W,H),LPe(W,[{key:"componentDidMount",value:function(){var se,fe;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(se=this.props.margin.left)!==null&&se!==void 0?se:0,top:(fe=this.props.margin.top)!==null&&fe!==void 0?fe:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var se=this.props,fe=se.children,le=se.data,me=se.height,ge=se.layout,Re=df(fe,gu);if(Re){var we=Re.props.defaultIndex;if(!(typeof we!="number"||we<0||we>this.state.tooltipTicks.length-1)){var Ve=this.state.tooltipTicks[we]&&this.state.tooltipTicks[we].value,oe=kI(this.state,le,we,Ve),_e=this.state.tooltipTicks[we].coordinate,Fe=(this.state.offset.top+me)/2,Ee=ge==="horizontal",ze=Ee?{x:_e,y:Fe}:{y:_e,x:Fe},Se=this.state.formattedGraphicalItems.find(function(Ue){var $e=Ue.item;return $e.type.name==="Scatter"});Se&&(ze=Wa(Wa({},ze),Se.props.points[we].tooltipPosition),oe=Se.props.points[we].tooltipPayload);var je={activeTooltipIndex:we,isTooltipActive:!0,activeLabel:Ve,activePayload:oe,activeCoordinate:ze};this.setState(je),this.renderCursor(Re),this.accessibilityManager.setIndex(we)}}}},{key:"getSnapshotBeforeUpdate",value:function(se,fe){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==fe.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==se.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==se.margin){var le,me;this.accessibilityManager.setDetails({offset:{left:(le=this.props.margin.left)!==null&&le!==void 0?le:0,top:(me=this.props.margin.top)!==null&&me!==void 0?me:0}})}return null}},{key:"componentDidUpdate",value:function(se){AM([df(se.children,gu)],[df(this.props.children,gu)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var se=df(this.props.children,gu);if(se&&typeof se.props.shared=="boolean"){var fe=se.props.shared?"axis":"item";return n.indexOf(fe)>=0?fe:l}return l}},{key:"getMouseInfo",value:function(se){if(!this.container)return null;var fe=this.container,le=fe.getBoundingClientRect(),me=LAe(le),ge={chartX:Math.round(se.pageX-me.left),chartY:Math.round(se.pageY-me.top)},Re=le.width/fe.offsetWidth||1,we=this.inRange(ge.chartX,ge.chartY,Re);if(!we)return null;var Ve=this.state,oe=Ve.xAxisMap,_e=Ve.yAxisMap,Fe=this.getTooltipEventType();if(Fe!=="axis"&&oe&&_e){var Ee=Ly(oe).scale,ze=Ly(_e).scale,Se=Ee&&Ee.invert?Ee.invert(ge.chartX):null,je=ze&&ze.invert?ze.invert(ge.chartY):null;return Wa(Wa({},ge),{},{xValue:Se,yValue:je})}var Ue=aq(this.state,this.props.data,this.props.layout,we);return Ue?Wa(Wa({},ge),Ue):null}},{key:"inRange",value:function(se,fe){var le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,me=this.props.layout,ge=se/le,Re=fe/le;if(me==="horizontal"||me==="vertical"){var we=this.state.offset,Ve=ge>=we.left&&ge<=we.left+we.width&&Re>=we.top&&Re<=we.top+we.height;return Ve?{x:ge,y:Re}:null}var oe=this.state,_e=oe.angleAxisMap,Fe=oe.radiusAxisMap;if(_e&&Fe){var Ee=Ly(_e);return t9({x:ge,y:Re},Ee)}return null}},{key:"parseEventsOfWrapper",value:function(){var se=this.props.children,fe=this.getTooltipEventType(),le=df(se,gu),me={};le&&fe==="axis"&&(le.props.trigger==="click"?me={onClick:this.handleClick}:me={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var ge=fx(this.props,this.handleOuterEvent);return Wa(Wa({},ge),me)}},{key:"addListener",value:function(){k5.on(U5,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){k5.removeListener(U5,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(se,fe,le){for(var me=this.state.formattedGraphicalItems,ge=0,Re=me.length;ge<Re;ge++){var we=me[ge];if(we.item===se||we.props.key===se.key||fe===Eg(we.item.type)&&le===we.childIndex)return we}return null}},{key:"renderClipPath",value:function(){var se=this.clipPathId,fe=this.state.offset,le=fe.left,me=fe.top,ge=fe.height,Re=fe.width;return Ot.createElement("defs",null,Ot.createElement("clipPath",{id:se},Ot.createElement("rect",{x:le,y:me,height:ge,width:Re})))}},{key:"getXScales",value:function(){var se=this.state.xAxisMap;return se?Object.entries(se).reduce(function(fe,le){var me=QZ(le,2),ge=me[0],Re=me[1];return Wa(Wa({},fe),{},Kn({},ge,Re.scale))},{}):null}},{key:"getYScales",value:function(){var se=this.state.yAxisMap;return se?Object.entries(se).reduce(function(fe,le){var me=QZ(le,2),ge=me[0],Re=me[1];return Wa(Wa({},fe),{},Kn({},ge,Re.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(se){var fe;return(fe=this.state.xAxisMap)===null||fe===void 0||(fe=fe[se])===null||fe===void 0?void 0:fe.scale}},{key:"getYScaleByAxisId",value:function(se){var fe;return(fe=this.state.yAxisMap)===null||fe===void 0||(fe=fe[se])===null||fe===void 0?void 0:fe.scale}},{key:"getItemByXY",value:function(se){var fe=this.state,le=fe.formattedGraphicalItems,me=fe.activeItem;if(le&&le.length)for(var ge=0,Re=le.length;ge<Re;ge++){var we=le[ge],Ve=we.props,oe=we.item,_e=oe.type.defaultProps!==void 0?Wa(Wa({},oe.type.defaultProps),oe.props):oe.props,Fe=Eg(oe.type);if(Fe==="Bar"){var Ee=(Ve.data||[]).find(function(Ue){return eCe(se,Ue)});if(Ee)return{graphicalItem:we,payload:Ee}}else if(Fe==="RadialBar"){var ze=(Ve.data||[]).find(function(Ue){return t9(se,Ue)});if(ze)return{graphicalItem:we,payload:ze}}else if(UP(we,me)||BP(we,me)||bT(we,me)){var Se=CSe({graphicalItem:we,activeTooltipItem:me,itemData:_e.data}),je=_e.activeIndex===void 0?Se:_e.activeIndex;return{graphicalItem:Wa(Wa({},we),{},{childIndex:je}),payload:bT(we,me)?_e.data[Se]:we.props.data[Se]}}}return null}},{key:"render",value:function(){var se=this;if(!f8(this))return null;var fe=this.props,le=fe.children,me=fe.className,ge=fe.width,Re=fe.height,we=fe.style,Ve=fe.compact,oe=fe.title,_e=fe.desc,Fe=eq(fe,NPe),Ee=gn(Fe,!1);if(Ve)return Ot.createElement(NZ,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ot.createElement(_M,r_({},Ee,{width:ge,height:Re,title:oe,desc:_e}),this.renderClipPath(),m8(le,this.renderMap)));if(this.props.accessibilityLayer){var ze,Se;Ee.tabIndex=(ze=this.props.tabIndex)!==null&&ze!==void 0?ze:0,Ee.role=(Se=this.props.role)!==null&&Se!==void 0?Se:"application",Ee.onKeyDown=function(Ue){se.accessibilityManager.keyboardEvent(Ue)},Ee.onFocus=function(){se.accessibilityManager.focus()}}var je=this.parseEventsOfWrapper();return Ot.createElement(NZ,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ot.createElement("div",r_({className:gi("recharts-wrapper",me),style:Wa({position:"relative",cursor:"default",width:ge,height:Re},we)},je,{ref:function($e){se.container=$e}}),Ot.createElement(_M,r_({},Ee,{width:ge,height:Re,title:oe,desc:_e,style:$Pe}),this.renderClipPath(),m8(le,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(ie.Component);Kn(j,"displayName",a),Kn(j,"defaultProps",Wa({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},N)),Kn(j,"getDerivedStateFromProps",function(H,W){var ee=H.dataKey,se=H.data,fe=H.children,le=H.width,me=H.height,ge=H.layout,Re=H.stackOffset,we=H.margin,Ve=W.dataStartIndex,oe=W.dataEndIndex;if(W.updateId===void 0){var _e=rq(H);return Wa(Wa(Wa({},_e),{},{updateId:0},F(Wa(Wa({props:H},_e),{},{updateId:0}),W)),{},{prevDataKey:ee,prevData:se,prevWidth:le,prevHeight:me,prevLayout:ge,prevStackOffset:Re,prevMargin:we,prevChildren:fe})}if(ee!==W.prevDataKey||se!==W.prevData||le!==W.prevWidth||me!==W.prevHeight||ge!==W.prevLayout||Re!==W.prevStackOffset||!f_(we,W.prevMargin)){var Fe=rq(H),Ee={chartX:W.chartX,chartY:W.chartY,isTooltipActive:W.isTooltipActive},ze=Wa(Wa({},aq(W,se,ge)),{},{updateId:W.updateId+1}),Se=Wa(Wa(Wa({},Fe),Ee),ze);return Wa(Wa(Wa({},Se),F(Wa({props:H},Se),W)),{},{prevDataKey:ee,prevData:se,prevWidth:le,prevHeight:me,prevLayout:ge,prevStackOffset:Re,prevMargin:we,prevChildren:fe})}if(!AM(fe,W.prevChildren)){var je,Ue,$e,Be,qe=df(fe,q_),be=qe&&(je=(Ue=qe.props)===null||Ue===void 0?void 0:Ue.startIndex)!==null&&je!==void 0?je:Ve,Te=qe&&($e=(Be=qe.props)===null||Be===void 0?void 0:Be.endIndex)!==null&&$e!==void 0?$e:oe,ke=be!==Ve||Te!==oe,Ge=!qn(se),at=Ge&&!ke?W.updateId:W.updateId+1;return Wa(Wa({updateId:at},F(Wa(Wa({props:H},W),{},{updateId:at,dataStartIndex:be,dataEndIndex:Te}),W)),{},{prevChildren:fe,dataStartIndex:be,dataEndIndex:Te})}return null}),Kn(j,"renderActiveDot",function(H,W,ee){var se;return ie.isValidElement(H)?se=ie.cloneElement(H,W):Zn(H)?se=H(W):se=Ot.createElement(AC,W),Ot.createElement(_i,{className:"recharts-active-dot",key:ee},se)});var $=ie.forwardRef(function(W,ee){return Ot.createElement(j,r_({},W,{ref:ee}))});return $.displayName=j.displayName,$},rEe=vC({chartName:"LineChart",GraphicalChild:Yv,axisComponents:[{axisType:"xAxis",AxisComp:gd},{axisType:"yAxis",AxisComp:yd}],formatAxisMap:GP}),UI=vC({chartName:"BarChart",GraphicalChild:Yp,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:gd},{axisType:"yAxis",AxisComp:yd}],formatAxisMap:GP}),nEe=vC({chartName:"PieChart",GraphicalChild:qg,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:kP},{axisType:"radiusAxis",AxisComp:LP}],formatAxisMap:mwe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),Kw=vC({chartName:"AreaChart",GraphicalChild:mf,axisComponents:[{axisType:"xAxis",AxisComp:gd},{axisType:"yAxis",AxisComp:yd}],formatAxisMap:GP}),iEe=vC({chartName:"ComposedChart",GraphicalChild:[Yv,mf,Yp,WP],axisComponents:[{axisType:"xAxis",AxisComp:gd},{axisType:"yAxis",AxisComp:yd},{axisType:"zAxis",AxisComp:KP}],formatAxisMap:GP}),bb={exports:{}},sEe=bb.exports,iq;function oEe(){return iq||(iq=1,function(t,e){(function(a,r){t.exports=r()})(sEe,function(){var a=1e3,r=6e4,i=36e5,l="millisecond",c="second",n="minute",v="hour",R="day",x="week",N="month",L="quarter",F="year",j="date",$="Invalid Date",H=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,W=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,ee={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Ee){var ze=["th","st","nd","rd"],Se=Ee%100;return"["+Ee+(ze[(Se-20)%10]||ze[Se]||ze[0])+"]"}},se=function(Ee,ze,Se){var je=String(Ee);return!je||je.length>=ze?Ee:""+Array(ze+1-je.length).join(Se)+Ee},fe={s:se,z:function(Ee){var ze=-Ee.utcOffset(),Se=Math.abs(ze),je=Math.floor(Se/60),Ue=Se%60;return(ze<=0?"+":"-")+se(je,2,"0")+":"+se(Ue,2,"0")},m:function Ee(ze,Se){if(ze.date()<Se.date())return-Ee(Se,ze);var je=12*(Se.year()-ze.year())+(Se.month()-ze.month()),Ue=ze.clone().add(je,N),$e=Se-Ue<0,Be=ze.clone().add(je+($e?-1:1),N);return+(-(je+(Se-Ue)/($e?Ue-Be:Be-Ue))||0)},a:function(Ee){return Ee<0?Math.ceil(Ee)||0:Math.floor(Ee)},p:function(Ee){return{M:N,y:F,w:x,d:R,D:j,h:v,m:n,s:c,ms:l,Q:L}[Ee]||String(Ee||"").toLowerCase().replace(/s$/,"")},u:function(Ee){return Ee===void 0}},le="en",me={};me[le]=ee;var ge="$isDayjsObject",Re=function(Ee){return Ee instanceof _e||!(!Ee||!Ee[ge])},we=function Ee(ze,Se,je){var Ue;if(!ze)return le;if(typeof ze=="string"){var $e=ze.toLowerCase();me[$e]&&(Ue=$e),Se&&(me[$e]=Se,Ue=$e);var Be=ze.split("-");if(!Ue&&Be.length>1)return Ee(Be[0])}else{var qe=ze.name;me[qe]=ze,Ue=qe}return!je&&Ue&&(le=Ue),Ue||!je&&le},Ve=function(Ee,ze){if(Re(Ee))return Ee.clone();var Se=typeof ze=="object"?ze:{};return Se.date=Ee,Se.args=arguments,new _e(Se)},oe=fe;oe.l=we,oe.i=Re,oe.w=function(Ee,ze){return Ve(Ee,{locale:ze.$L,utc:ze.$u,x:ze.$x,$offset:ze.$offset})};var _e=function(){function Ee(Se){this.$L=we(Se.locale,null,!0),this.parse(Se),this.$x=this.$x||Se.x||{},this[ge]=!0}var ze=Ee.prototype;return ze.parse=function(Se){this.$d=function(je){var Ue=je.date,$e=je.utc;if(Ue===null)return new Date(NaN);if(oe.u(Ue))return new Date;if(Ue instanceof Date)return new Date(Ue);if(typeof Ue=="string"&&!/Z$/i.test(Ue)){var Be=Ue.match(H);if(Be){var qe=Be[2]-1||0,be=(Be[7]||"0").substring(0,3);return $e?new Date(Date.UTC(Be[1],qe,Be[3]||1,Be[4]||0,Be[5]||0,Be[6]||0,be)):new Date(Be[1],qe,Be[3]||1,Be[4]||0,Be[5]||0,Be[6]||0,be)}}return new Date(Ue)}(Se),this.init()},ze.init=function(){var Se=this.$d;this.$y=Se.getFullYear(),this.$M=Se.getMonth(),this.$D=Se.getDate(),this.$W=Se.getDay(),this.$H=Se.getHours(),this.$m=Se.getMinutes(),this.$s=Se.getSeconds(),this.$ms=Se.getMilliseconds()},ze.$utils=function(){return oe},ze.isValid=function(){return this.$d.toString()!==$},ze.isSame=function(Se,je){var Ue=Ve(Se);return this.startOf(je)<=Ue&&Ue<=this.endOf(je)},ze.isAfter=function(Se,je){return Ve(Se)<this.startOf(je)},ze.isBefore=function(Se,je){return this.endOf(je)<Ve(Se)},ze.$g=function(Se,je,Ue){return oe.u(Se)?this[je]:this.set(Ue,Se)},ze.unix=function(){return Math.floor(this.valueOf()/1e3)},ze.valueOf=function(){return this.$d.getTime()},ze.startOf=function(Se,je){var Ue=this,$e=!!oe.u(je)||je,Be=oe.p(Se),qe=function(ot,ve){var Vt=oe.w(Ue.$u?Date.UTC(Ue.$y,ve,ot):new Date(Ue.$y,ve,ot),Ue);return $e?Vt:Vt.endOf(R)},be=function(ot,ve){return oe.w(Ue.toDate()[ot].apply(Ue.toDate("s"),($e?[0,0,0,0]:[23,59,59,999]).slice(ve)),Ue)},Te=this.$W,ke=this.$M,Ge=this.$D,at="set"+(this.$u?"UTC":"");switch(Be){case F:return $e?qe(1,0):qe(31,11);case N:return $e?qe(1,ke):qe(0,ke+1);case x:var rt=this.$locale().weekStart||0,lt=(Te<rt?Te+7:Te)-rt;return qe($e?Ge-lt:Ge+(6-lt),ke);case R:case j:return be(at+"Hours",0);case v:return be(at+"Minutes",1);case n:return be(at+"Seconds",2);case c:return be(at+"Milliseconds",3);default:return this.clone()}},ze.endOf=function(Se){return this.startOf(Se,!1)},ze.$set=function(Se,je){var Ue,$e=oe.p(Se),Be="set"+(this.$u?"UTC":""),qe=(Ue={},Ue[R]=Be+"Date",Ue[j]=Be+"Date",Ue[N]=Be+"Month",Ue[F]=Be+"FullYear",Ue[v]=Be+"Hours",Ue[n]=Be+"Minutes",Ue[c]=Be+"Seconds",Ue[l]=Be+"Milliseconds",Ue)[$e],be=$e===R?this.$D+(je-this.$W):je;if($e===N||$e===F){var Te=this.clone().set(j,1);Te.$d[qe](be),Te.init(),this.$d=Te.set(j,Math.min(this.$D,Te.daysInMonth())).$d}else qe&&this.$d[qe](be);return this.init(),this},ze.set=function(Se,je){return this.clone().$set(Se,je)},ze.get=function(Se){return this[oe.p(Se)]()},ze.add=function(Se,je){var Ue,$e=this;Se=Number(Se);var Be=oe.p(je),qe=function(ke){var Ge=Ve($e);return oe.w(Ge.date(Ge.date()+Math.round(ke*Se)),$e)};if(Be===N)return this.set(N,this.$M+Se);if(Be===F)return this.set(F,this.$y+Se);if(Be===R)return qe(1);if(Be===x)return qe(7);var be=(Ue={},Ue[n]=r,Ue[v]=i,Ue[c]=a,Ue)[Be]||1,Te=this.$d.getTime()+Se*be;return oe.w(Te,this)},ze.subtract=function(Se,je){return this.add(-1*Se,je)},ze.format=function(Se){var je=this,Ue=this.$locale();if(!this.isValid())return Ue.invalidDate||$;var $e=Se||"YYYY-MM-DDTHH:mm:ssZ",Be=oe.z(this),qe=this.$H,be=this.$m,Te=this.$M,ke=Ue.weekdays,Ge=Ue.months,at=Ue.meridiem,rt=function(ve,Vt,Bt,wa){return ve&&(ve[Vt]||ve(je,$e))||Bt[Vt].slice(0,wa)},lt=function(ve){return oe.s(qe%12||12,ve,"0")},ot=at||function(ve,Vt,Bt){var wa=ve<12?"AM":"PM";return Bt?wa.toLowerCase():wa};return $e.replace(W,function(ve,Vt){return Vt||function(Bt){switch(Bt){case"YY":return String(je.$y).slice(-2);case"YYYY":return oe.s(je.$y,4,"0");case"M":return Te+1;case"MM":return oe.s(Te+1,2,"0");case"MMM":return rt(Ue.monthsShort,Te,Ge,3);case"MMMM":return rt(Ge,Te);case"D":return je.$D;case"DD":return oe.s(je.$D,2,"0");case"d":return String(je.$W);case"dd":return rt(Ue.weekdaysMin,je.$W,ke,2);case"ddd":return rt(Ue.weekdaysShort,je.$W,ke,3);case"dddd":return ke[je.$W];case"H":return String(qe);case"HH":return oe.s(qe,2,"0");case"h":return lt(1);case"hh":return lt(2);case"a":return ot(qe,be,!0);case"A":return ot(qe,be,!1);case"m":return String(be);case"mm":return oe.s(be,2,"0");case"s":return String(je.$s);case"ss":return oe.s(je.$s,2,"0");case"SSS":return oe.s(je.$ms,3,"0");case"Z":return Be}return null}(ve)||Be.replace(":","")})},ze.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},ze.diff=function(Se,je,Ue){var $e,Be=this,qe=oe.p(je),be=Ve(Se),Te=(be.utcOffset()-this.utcOffset())*r,ke=this-be,Ge=function(){return oe.m(Be,be)};switch(qe){case F:$e=Ge()/12;break;case N:$e=Ge();break;case L:$e=Ge()/3;break;case x:$e=(ke-Te)/6048e5;break;case R:$e=(ke-Te)/864e5;break;case v:$e=ke/i;break;case n:$e=ke/r;break;case c:$e=ke/a;break;default:$e=ke}return Ue?$e:oe.a($e)},ze.daysInMonth=function(){return this.endOf(N).$D},ze.$locale=function(){return me[this.$L]},ze.locale=function(Se,je){if(!Se)return this.$L;var Ue=this.clone(),$e=we(Se,je,!0);return $e&&(Ue.$L=$e),Ue},ze.clone=function(){return oe.w(this.$d,this)},ze.toDate=function(){return new Date(this.valueOf())},ze.toJSON=function(){return this.isValid()?this.toISOString():null},ze.toISOString=function(){return this.$d.toISOString()},ze.toString=function(){return this.$d.toUTCString()},Ee}(),Fe=_e.prototype;return Ve.prototype=Fe,[["$ms",l],["$s",c],["$m",n],["$H",v],["$W",R],["$M",N],["$y",F],["$D",j]].forEach(function(Ee){Fe[Ee[1]]=function(ze){return this.$g(ze,Ee[0],Ee[1])}}),Ve.extend=function(Ee,ze){return Ee.$i||(Ee(ze,_e,Ve),Ee.$i=!0),Ve},Ve.locale=we,Ve.isDayjs=Re,Ve.unix=function(Ee){return Ve(1e3*Ee)},Ve.en=me[le],Ve.Ls=me,Ve.p={},Ve})}(bb)),bb.exports}var lEe=oEe();const mi=ss(lEe);var xb={exports:{}},uEe=xb.exports,sq;function cEe(){return sq||(sq=1,function(t,e){(function(a,r){t.exports=r()})(uEe,function(){var a={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d/,l=/\d\d/,c=/\d\d?/,n=/\d*[^-_:/,()\s\d]+/,v={},R=function(H){return(H=+H)+(H>68?1900:2e3)},x=function(H){return function(W){this[H]=+W}},N=[/[+-]\d\d:?(\d\d)?|Z/,function(H){(this.zone||(this.zone={})).offset=function(W){if(!W||W==="Z")return 0;var ee=W.match(/([+-]|\d\d)/g),se=60*ee[1]+(+ee[2]||0);return se===0?0:ee[0]==="+"?-se:se}(H)}],L=function(H){var W=v[H];return W&&(W.indexOf?W:W.s.concat(W.f))},F=function(H,W){var ee,se=v.meridiem;if(se){for(var fe=1;fe<=24;fe+=1)if(H.indexOf(se(fe,0,W))>-1){ee=fe>12;break}}else ee=H===(W?"pm":"PM");return ee},j={A:[n,function(H){this.afternoon=F(H,!1)}],a:[n,function(H){this.afternoon=F(H,!0)}],Q:[i,function(H){this.month=3*(H-1)+1}],S:[i,function(H){this.milliseconds=100*+H}],SS:[l,function(H){this.milliseconds=10*+H}],SSS:[/\d{3}/,function(H){this.milliseconds=+H}],s:[c,x("seconds")],ss:[c,x("seconds")],m:[c,x("minutes")],mm:[c,x("minutes")],H:[c,x("hours")],h:[c,x("hours")],HH:[c,x("hours")],hh:[c,x("hours")],D:[c,x("day")],DD:[l,x("day")],Do:[n,function(H){var W=v.ordinal,ee=H.match(/\d+/);if(this.day=ee[0],W)for(var se=1;se<=31;se+=1)W(se).replace(/\[|\]/g,"")===H&&(this.day=se)}],w:[c,x("week")],ww:[l,x("week")],M:[c,x("month")],MM:[l,x("month")],MMM:[n,function(H){var W=L("months"),ee=(L("monthsShort")||W.map(function(se){return se.slice(0,3)})).indexOf(H)+1;if(ee<1)throw new Error;this.month=ee%12||ee}],MMMM:[n,function(H){var W=L("months").indexOf(H)+1;if(W<1)throw new Error;this.month=W%12||W}],Y:[/[+-]?\d+/,x("year")],YY:[l,function(H){this.year=R(H)}],YYYY:[/\d{4}/,x("year")],Z:N,ZZ:N};function $(H){var W,ee;W=H,ee=v&&v.formats;for(var se=(H=W.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(Ve,oe,_e){var Fe=_e&&_e.toUpperCase();return oe||ee[_e]||a[_e]||ee[Fe].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(Ee,ze,Se){return ze||Se.slice(1)})})).match(r),fe=se.length,le=0;le<fe;le+=1){var me=se[le],ge=j[me],Re=ge&&ge[0],we=ge&&ge[1];se[le]=we?{regex:Re,parser:we}:me.replace(/^\[|\]$/g,"")}return function(Ve){for(var oe={},_e=0,Fe=0;_e<fe;_e+=1){var Ee=se[_e];if(typeof Ee=="string")Fe+=Ee.length;else{var ze=Ee.regex,Se=Ee.parser,je=Ve.slice(Fe),Ue=ze.exec(je)[0];Se.call(oe,Ue),Ve=Ve.replace(Ue,"")}}return function($e){var Be=$e.afternoon;if(Be!==void 0){var qe=$e.hours;Be?qe<12&&($e.hours+=12):qe===12&&($e.hours=0),delete $e.afternoon}}(oe),oe}}return function(H,W,ee){ee.p.customParseFormat=!0,H&&H.parseTwoDigitYear&&(R=H.parseTwoDigitYear);var se=W.prototype,fe=se.parse;se.parse=function(le){var me=le.date,ge=le.utc,Re=le.args;this.$u=ge;var we=Re[1];if(typeof we=="string"){var Ve=Re[2]===!0,oe=Re[3]===!0,_e=Ve||oe,Fe=Re[2];oe&&(Fe=Re[2]),v=this.$locale(),!Ve&&Fe&&(v=ee.Ls[Fe]),this.$d=function(je,Ue,$e,Be){try{if(["x","X"].indexOf(Ue)>-1)return new Date((Ue==="X"?1e3:1)*je);var qe=$(Ue)(je),be=qe.year,Te=qe.month,ke=qe.day,Ge=qe.hours,at=qe.minutes,rt=qe.seconds,lt=qe.milliseconds,ot=qe.zone,ve=qe.week,Vt=new Date,Bt=ke||(be||Te?1:Vt.getDate()),wa=be||Vt.getFullYear(),It=0;be&&!Te||(It=Te>0?Te-1:Vt.getMonth());var $t,wt=Ge||0,hr=at||0,ba=rt||0,Pa=lt||0;return ot?new Date(Date.UTC(wa,It,Bt,wt,hr,ba,Pa+60*ot.offset*1e3)):$e?new Date(Date.UTC(wa,It,Bt,wt,hr,ba,Pa)):($t=new Date(wa,It,Bt,wt,hr,ba,Pa),ve&&($t=Be($t).week(ve).toDate()),$t)}catch{return new Date("")}}(me,we,ge,ee),this.init(),Fe&&Fe!==!0&&(this.$L=this.locale(Fe).$L),_e&&me!=this.format(we)&&(this.$d=new Date("")),v={}}else if(we instanceof Array)for(var Ee=we.length,ze=1;ze<=Ee;ze+=1){Re[1]=we[ze-1];var Se=ee.apply(this,Re);if(Se.isValid()){this.$d=Se.$d,this.$L=Se.$L,this.init();break}ze===Ee&&(this.$d=new Date(""))}else fe.call(this,le)}}})}(xb)),xb.exports}var dEe=cEe();const hEe=ss(dEe);mi.extend(hEe);ep.accessToken="pk.eyJ1IjoiY29jb2xlbW9uMTIiLCJhIjoiY204YTBoMnZpMHplbzJzcTR3dDFmOXc4NiJ9.NqqEHSBe8cn9Gy9knbUqew";const fEe=()=>{const[t,e]=ie.useState(""),[a,r]=ie.useState(0),[i,l]=ie.useState(0),[c,n]=ie.useState(!1),[v,R]=ie.useState(null),[x,N]=ie.useState([]),[L,F]=ie.useState({}),[j,$]=ie.useState(0),[H,W]=ie.useState({totalDistance:0,totalDuration:0,totalCalories:0,totalCarbon:0,totalRevenue:0}),[ee,se]=ie.useState({today:0,weekly:0,monthly:0}),[fe,le]=ie.useState(Array(24).fill(0)),[me,ge]=ie.useState(0),[Re,we]=ie.useState({}),Ve=ie.useRef(null),oe=ie.useRef(null);ie.useRef(null);const _e=ie.useRef({}),Fe=Te=>{let ke=Te.replace("UTC+","+").replace("UTC-","-");return ke=ke.replace(/([+\-]\d{1,2})$/,"$1:00"),mi(ke,"D MMMM YYYY [at] HH:mm:ss Z")},Ee=Te=>typeof Te=="string"?Fe(Te):Te&&typeof Te.toDate=="function"?mi(Te.toDate()):mi(Te),ze=async()=>{try{const Te=await Hi(Dn(wr,"bikes"));r(Te.size)}catch(Te){console.error("Error fetching total bikes:",Te)}},Se=async()=>{try{const Te=mi().startOf("day"),ke=Dn(wr,"ride_history"),Ge=await Hi(ke);let at=0;Ge.forEach(rt=>{const ot=rt.data().rideEndedAt;ot&&Ee(ot).isSame(Te,"day")&&at++}),console.log("Today's total rides:",at),l(at)}catch(Te){console.error("Error fetching total rides today:",Te)}},je=async()=>{try{const Te=mi().startOf("day"),ke=Dn(wr,"ride_history"),Ge=await Hi(ke);let at={totalDistance:0,totalDuration:0,totalCalories:0,totalCarbon:0,totalRevenue:0};Ge.forEach(rt=>{var ot,ve,Vt;const lt=rt.data();lt.rideEndedAt&&Ee(lt.rideEndedAt).isSame(Te,"day")&&(at.totalDistance+=((ot=lt.currentMetrics)==null?void 0:ot.distance)||0,at.totalDuration+=((ve=lt.currentMetrics)==null?void 0:ve.duration)||0,at.totalCalories+=((Vt=lt.currentMetrics)==null?void 0:Vt.calories)||0,at.totalCarbon+=lt.carbonSaved||0,at.totalRevenue+=lt.amountPaid||0)}),W({totalDistance:at.totalDistance||0,totalDuration:at.totalDuration||0,totalCalories:at.totalCalories||0,totalCarbon:at.totalCarbon||0,totalRevenue:at.totalRevenue||0})}catch(Te){console.error("Error fetching today's metrics:",Te)}},Ue=async()=>{try{const Te=await Hi(Dn(wr,"approved_users"));let ke=0,Ge=0,at=0;const rt=mi().startOf("day"),lt=mi().startOf("week"),ot=mi().startOf("month");for(const ve of Te.docs){const Vt=Dn(wr,"approved_users",ve.id,"rideHistory"),Bt=await Hi(Vt);for(const wa of Bt.docs){const It=wa.data(),$t=Ee(It.rideStartedAt),wt=It.amountPaid||0;$t.isSame(rt,"day")&&(ke+=wt),$t.isAfter(lt)&&(Ge+=wt),$t.isAfter(ot)&&(at+=wt)}}se({today:ke,weekly:Ge,monthly:at})}catch(Te){console.error("Error fetching revenue:",Te)}},$e=async()=>{try{const Te=mi().startOf("day"),ke=Dn(wr,"ride_history");return Up(ke,at=>{let rt=Array(24).fill(0);at.forEach(lt=>{const ot=lt.data();if(ot.rideEndedAt&&ot.amountPaid){const ve=Ee(ot.rideEndedAt);if(ve.isSame(Te,"day")){const Vt=ve.hour();rt[Vt]+=Number(ot.amountPaid||0)}}}),console.log("Hourly revenue data:",rt),le(rt)})}catch(Te){console.error("Error fetching hourly revenue:",Te)}},Be=()=>{try{const Te=Dn(wr,"activeRides"),ke=Tg(Te,cR("rideStatus","==","started"));return Up(ke,async at=>{const rt=[];for(const lt of at.docs){const ot=lt.data();console.log("Ride data:",ot);try{const ve=ds(wr,"approved_users",ot.userId),Vt=await Xf(ve),Bt=Vt.exists()?Vt.data():{};console.log("User data:",Bt);const wa=ds(wr,"bikes",ot.bikeId),It=await Xf(wa),$t=It.exists()?It.data():{};console.log("Bike data:",$t);let wt="Unknown Station";if(ot.startStation){console.log("Attempting to fetch station with ID:",ot.startStation);const ba=ds(wr,"stations",ot.startStation),Pa=await Xf(ba);if(console.log("Station doc exists:",Pa.exists()),Pa.exists()){const Ja=Pa.data();console.log("Station data:",Ja),wt=Ja.stationName||Ja.name||"Unknown Station"}}const hr={rideId:lt.id,userName:Bt.name||`${Bt.first_name||""} ${Bt.surname||""}`.trim(),startTime:ot.startTime,bikeName:$t.bikeName||"Unknown Bike",stationName:wt};console.log("Pushing ride info:",hr),rt.push(hr)}catch(ve){console.error("Error fetching related documents:",ve),console.error("Error details:",{rideId:lt.id,userId:ot.userId,bikeId:ot.bikeId,startStation:ot.startStation})}}console.log("Final active rides array:",rt),N(rt)})}catch(Te){return console.error("Error in fetchActiveRides:",Te),()=>{}}},qe=()=>{try{const Te=Dn(wr,"admins");return Up(Te,ke=>{const Ge=ke.docs.reduce((at,rt)=>{const lt=rt.data();return lt.status==="Active"&&lt.stationAssignedTo?at+1:at},0);ge(Ge)})}catch(Te){return console.error("Error fetching active admins:",Te),()=>{}}};ie.useEffect(()=>{ze(),Se(),je(),$e(),Ue();const Te=Dv.onAuthStateChanged(async ke=>{if(ke)try{const Ge=ds(wr,"users",ke.uid),at=await Xf(Ge);if(at.exists()){const rt=at.data(),lt=(rt==null?void 0:rt.name)||"Super Admin";e(lt)}else e("Super Admin")}catch(Ge){console.error("Error fetching user data:",Ge),e("Super Admin")}else e("Unknown User")});return()=>Te()},[]),ie.useEffect(()=>{if(!(oe.current||!Ve.current))try{oe.current=new ep.Map({container:Ve.current,style:"mapbox://styles/mapbox/streets-v11",center:[120.9882053036898,14.693467677226026],zoom:12}),oe.current.addControl(new ep.NavigationControl,"top-right");const Te=Dn(wr,"activeRides"),ke=Up(Tg(Te,cR("rideStatus","==","started")),Ge=>{oe.current});return()=>{ke(),oe.current&&(oe.current.remove(),oe.current=null)}}catch(Te){console.error("Error initializing map:",Te)}},[Ve.current]),ie.useEffect(()=>{if(!oe.current)return;const Te=Dn(wr,"activeRides"),ke=Tg(Te,cR("rideStatus","==","started")),Ge=Up(ke,async at=>{try{at.docChanges().forEach(async rt=>{const lt=rt.doc.data(),ot=rt.doc.id;if((rt.type==="added"||rt.type==="modified")&&lt.locationData){const{latitude:ve,longitude:Vt}=lt.locationData,Bt=ds(wr,"approved_users",lt.userId),wa=await Xf(Bt),It=wa.exists()?wa.data():{},$t=`${It.first_name||""} ${It.surname||""}`.trim(),wt=ds(wr,"bikes",lt.bikeId),hr=await Xf(wt),Pa=(hr.exists()?hr.data():{}).bikeName||"Unknown Bike";if(_e.current[ot])_e.current[ot].setLngLat([Vt,ve]).getPopup().setHTML(`
                  <div class="simple-popup">
                    <p><strong>${$t}</strong></p>
                    <p>Bike: ${Pa}</p>
                  </div>
                `);else{const Ja=document.createElement("div");Ja.className="user-location-marker";const or=new ep.Popup({closeButton:!1,closeOnClick:!1,anchor:"top",offset:[0,-10]}).setHTML(`
                <div class="simple-popup">
                  <p><strong>${$t}</strong></p>
                  <p>Bike: ${Pa}</p>
                </div>
              `);_e.current[ot]=new ep.Marker({element:Ja,anchor:"center"}).setLngLat([Vt,ve]).setPopup(or).addTo(oe.current)}}rt.type==="removed"&&_e.current[ot]&&(_e.current[ot].remove(),delete _e.current[ot])})}catch(rt){console.error("Error updating markers:",rt)}});return()=>{Ge(),Object.values(_e.current).forEach(at=>at.remove()),_e.current={}}},[]),ie.useEffect(()=>{const Te=Dn(wr,"activeRides"),ke=Tg(Te,cR("rideStatus","==","started")),Ge=Up(ke,at=>{$(at.size)});return()=>Ge()},[]),ie.useEffect(()=>{let Te;try{Te=Be()}catch(ke){console.error("Error setting up active rides listener:",ke)}return()=>{typeof Te=="function"&&Te()}},[]),ie.useEffect(()=>{const Te=qe();return()=>{typeof Te=="function"&&Te()}},[]),ie.useEffect(()=>{const Te=mi().startOf("day"),ke=Dn(wr,"ride_history");let Ge=null;try{Ge=Up(ke,at=>{let rt={totalDistance:0,totalDuration:0,totalCalories:0,totalCarbon:0,totalRevenue:0},lt=Array(24).fill(0),ot=0;at.forEach(ve=>{const Vt=ve.data();if(Vt.rideEndedAt){const Bt=Ee(Vt.rideEndedAt);if(Bt.isSame(Te,"day")){rt.totalDistance+=Number(Vt.distance||0),rt.totalDuration+=Number(Vt.duration||0),rt.totalCalories+=Number(Vt.caloriesBurned||0),rt.totalCarbon+=Number(Vt.carbonSaved||0),rt.totalRevenue+=Number(Vt.amountPaid||0);const wa=Bt.hour();lt[wa]+=Number(Vt.amountPaid||0),ot++}}}),W(rt),le(lt),l(ot)})}catch(at){console.error("Error setting up ride history listener:",at)}return()=>{typeof Ge=="function"&&Ge()}},[]);const be=[{name:"Bikes Available",value:a},{name:"Active Users",value:j},{name:"Active Admins",value:me},{name:"Today's Revenue",value:Number((H==null?void 0:H.totalRevenue)||0)},{name:"Rides Today",value:i}];return q.jsxs("div",{className:"content-container",children:[q.jsxs("div",{className:"content-header",children:[q.jsxs("h1",{className:"content-header__title",children:["Hello ",t,"!"]}),q.jsx("p",{className:"content-header__subtitle",children:"Keeping the wheels turning for a greener future."})]}),q.jsx("div",{className:"stats-section",children:be.map((Te,ke)=>q.jsxs("div",{className:"stat-card",children:[q.jsx("h3",{className:"stat-card__title",children:Te.name}),q.jsx("p",{className:"stat-card__value",children:Te.name==="Today's Revenue"?Number(Te.value).toFixed(2):typeof Te.value>"u"?"0":Te.value})]},ke))}),q.jsxs("div",{className:"tracking-section",children:[q.jsxs("div",{className:"active-rides-table",children:[q.jsx("h3",{className:"section-title",children:"Active Rides"}),q.jsxs("table",{children:[q.jsx("thead",{children:q.jsxs("tr",{children:[q.jsx("th",{children:"Rider Name"}),q.jsx("th",{children:"Start Time"}),q.jsx("th",{children:"Bike Name"}),q.jsx("th",{children:"Station"})]})}),q.jsxs("tbody",{children:[x.slice(0,5).map(Te=>q.jsxs("tr",{children:[q.jsx("td",{children:Te.userName}),q.jsx("td",{children:Ee(Te.startTime).format("HH:mm:ss")}),q.jsx("td",{children:Te.bikeName}),q.jsx("td",{children:Te.stationName})]},Te.rideId)),x.length===0&&q.jsx("tr",{children:q.jsx("td",{colSpan:"4",className:"no-rides",children:"No active rides at the moment"})})]})]})]}),q.jsxs("div",{className:"map-container",children:[q.jsxs("div",{className:"map-section-header",children:[q.jsxs("h2",{className:"map-title",children:[q.jsx(Dfe,{})," Live User Activity Map"]}),q.jsx("p",{className:"map-subtitle",children:"Track real-time locations of active riders across the system"})]}),q.jsx("div",{ref:Ve,className:"ride-tracking-map"})]})]}),q.jsxs("div",{className:"charts-grid",children:[q.jsxs("div",{className:"charts-row",children:[q.jsxs("div",{className:"chart-container",children:[q.jsx("h3",{className:"chart-title",children:"Today's Ride Metrics"}),q.jsx(Fp,{width:"100%",height:300,children:q.jsxs(UI,{data:[{name:"Distance",value:parseFloat(H.totalDistance||0),unit:"km"},{name:"Duration",value:parseFloat((H.totalDuration||0)/60),unit:"min"},{name:"Calories",value:parseFloat(H.totalCalories||0),unit:"cal"},{name:"CO2 Saved",value:parseFloat(H.totalCarbon||0),unit:"kg"}],margin:{top:5,right:30,left:20,bottom:60},children:[q.jsx(jp,{strokeDasharray:"3 3"}),q.jsx(gd,{dataKey:"name",angle:-45,textAnchor:"end",height:60,tick:{fontSize:12},interval:0}),q.jsx(yd,{tickFormatter:Te=>Te.toFixed(2),tick:{fontSize:12}}),q.jsx(gu,{formatter:(Te,ke,Ge)=>Ge&&Ge.payload?[`${Te.toFixed(2)} ${Ge.payload.unit}`,ke]:[Te,ke],contentStyle:{fontSize:12}}),q.jsx(Yp,{dataKey:"value",fill:"#009C8C",children:q.jsx(ap,{dataKey:"value",position:"top",formatter:(Te,ke)=>ke&&ke.payload?`${Te.toFixed(2)} ${ke.payload.unit}`:Te.toFixed(2),style:{fontSize:"11px"}})})]})})]}),q.jsxs("div",{className:"chart-container",children:[q.jsx("h3",{className:"chart-title",children:"System Overview"}),q.jsx(Fp,{width:"100%",height:300,children:q.jsxs(UI,{data:be,margin:{top:5,right:30,left:20,bottom:60},children:[q.jsx(jp,{strokeDasharray:"3 3"}),q.jsx(gd,{dataKey:"name",angle:-45,textAnchor:"end",height:60,tick:{fontSize:12},interval:0}),q.jsx(yd,{tick:{fontSize:12}}),q.jsx(gu,{contentStyle:{fontSize:12}}),q.jsx(Yp,{dataKey:"value",fill:"#009C8C"})]})})]})]}),q.jsxs("div",{className:"revenue-section",children:[q.jsx("h3",{className:"chart-title",children:"Today's Hourly Revenue"}),q.jsx(Fp,{width:"100%",height:300,children:q.jsxs(rEe,{data:fe.map((Te,ke)=>({hour:`${String(ke).padStart(2,"0")}:00`,value:Te})),margin:{top:5,right:30,left:20,bottom:5},children:[q.jsx(jp,{strokeDasharray:"3 3"}),q.jsx(gd,{dataKey:"hour",tick:{fontSize:12},interval:2}),q.jsx(yd,{tick:{fontSize:12},tickFormatter:Te=>`₱${Te.toFixed(2)}`}),q.jsx(gu,{formatter:Te=>[`₱${Number(Te).toFixed(2)}`,"Revenue"],contentStyle:{fontSize:12}}),q.jsx(Yv,{type:"monotone",dataKey:"value",stroke:"#4CAF50",strokeWidth:2,dot:{fill:"#4CAF50"}})]})})]})]})]})},j5=()=>q.jsxs("div",{className:"dashboard",children:[q.jsx(ML,{})," ",q.jsxs("div",{className:"dashboard-content",children:[q.jsx(lA,{})," ",q.jsx(fEe,{})," "]})]}),Mp=()=>{const t=f3(),[e,a]=ie.useState(""),[r,i]=ie.useState(""),[l,c]=ie.useState(""),n=R=>`/ecpcaps/assets/${R}`,v=async R=>{R.preventDefault();try{await lle(Dv,e,r),t("/dashboard")}catch(x){c(x.message)}};return q.jsxs("div",{className:"login-container",children:[q.jsx("div",{className:"login-logo-container",children:q.jsx("img",{src:n("ecoridelogo2.png"),alt:"Eco Ride Logo",className:"login-logo"})}),q.jsx("p",{className:"login-subtitle",children:"Drive Green, Ride Clean!"}),q.jsx("h2",{className:"login-title",children:"Super Admin Login"}),q.jsxs("form",{className:"login-form",onSubmit:v,children:[l&&q.jsx("p",{className:"error",children:l}),q.jsxs("div",{className:"form-group",children:[q.jsx("label",{children:"Email"}),q.jsx("input",{type:"email",value:e,onChange:R=>a(R.target.value),required:!0})]}),q.jsxs("div",{className:"form-group",children:[q.jsx("label",{children:"Password"}),q.jsx("input",{type:"password",required:!0,autoComplete:"current-password",value:r,onChange:R=>i(R.target.value)})]}),q.jsx("button",{type:"submit",className:"login-button",children:"LOG IN"})]})]})},pEe=JSON.parse('[{"Raw Address":"168 SALAZAR ST. BO.PARADA Valenzuela City"},{"Raw Address":"235 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"118-CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"330 T. MANANG ST Parada Valenzuela City"},{"Raw Address":"21 EARTH STREET Parada Valenzuela City"},{"Raw Address":"70 PARADA ST.RD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"188 M DE GULA ST.PARADA Valenzuela City"},{"Raw Address":"104 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"9 E&E COMP. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"395 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"155 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"332 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"BLK1 LOT 12 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"237 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"338 T.MANAG ST. PARADA Valenzuela City"},{"Raw Address":"362 B. TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"109 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"9R CABRAL STREET Parada Valenzuela City"},{"Raw Address":"126 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"110 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"170 Parada Valenzuela City"},{"Raw Address":"198 CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"195 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"CANDIDO APT. SAN ANDRES Parada Valenzuela City"},{"Raw Address":"250 S. DE GUZMAN ST BO Parada Valenzuela City"},{"Raw Address":"274 PILAR ST FV4 Village Parada Valenzuela City"},{"Raw Address":"371 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"98 7TH ST. FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"341 20TH ST. Parada Valenzuela City"},{"Raw Address":"233 Fortune Village 5 19TH ST. Parada Valenzuela City"},{"Raw Address":"TATA ERRO ST. Parada Valenzuela City"},{"Raw Address":"0002 Parada Valenzuela City"},{"Raw Address":"T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"249 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"192 RAMON FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"440 SERVICE ROAD Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"91 DAET COMPD. Parada Valenzuela City"},{"Raw Address":"095 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"012 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"244 7TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"257 M DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"308 JIMENEZ ST. PARADA Valenzuela City"},{"Raw Address":"99 VENUS ST F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"12 D PARADA ROAD Parada Valenzuela City"},{"Raw Address":"187 UNIT14 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"230 18ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"181 FELIZA T. Parada Valenzuela City"},{"Raw Address":"7 ALFONSO APARTMENT 101 CAPT CRUZ ST COR Parada Valenzuela City"},{"Raw Address":"087 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"140 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"441 P GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"234 Fortune Village 5 19T Parada Valenzuela City"},{"Raw Address":"412 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"#90 ADOR STREET Parada Valenzuela City"},{"Raw Address":"BLK 12 LOT1 Parada Valenzuela City"},{"Raw Address":"36-A PARADA RD. Parada Valenzuela City"},{"Raw Address":"93 A. CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"139 LAGMDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"185 B. FELIZA ST Parada Valenzuela City"},{"Raw Address":"74 PARADA ST. Parada Valenzuela City"},{"Raw Address":"192 RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"244 ESTRELLA APRT. 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"178 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"170 DOON COMP. SALAZAR ST Parada Valenzuela City"},{"Raw Address":"039 D SANTIAGO COMPD. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"1992 1ST. BENMARIE COMP FV5 Parada Valenzuela City"},{"Raw Address":"390 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"166 SALAZAR Parada Valenzuela City"},{"Raw Address":"192 M DE GULA ST. PARADA Valenzuela City"},{"Raw Address":"93 E. CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"21ST PARADA ROAD Parada Valenzuela City"},{"Raw Address":"339 BO. Parada Valenzuela City"},{"Raw Address":"295 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"276B S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"04 Parada Valenzuela City"},{"Raw Address":"436 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"5 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"388 IMPONG JUANA S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"99 SATURN ST F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"191 24TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B6 L7 F. FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"064 PARADA RD. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"DE GUZMAN CPD. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"307 PEARL ST. HIYAS HOMES. PARADA Valenzuela City"},{"Raw Address":"39C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"199 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ ST. PARADA Valenzuela City"},{"Raw Address":"LOT 23 BLK 14 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"259 25TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"87 PARADA ST. Parada Valenzuela City"},{"Raw Address":"99 SATURN ST. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"465 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"199 21ST ST. FORTUNE VillageAG 5 Parada Valenzuela City"},{"Raw Address":"234 ALOHA COMP. S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"234 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"L13 B19 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"091 FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"07 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"372 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"43 B. SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"199 21ST. BENMARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"330 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"141 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"250 B S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"234 19TH Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"121 CONZUELO ST. Parada Valenzuela City"},{"Raw Address":"177 CAPITAN CRUZ ST Parada Valenzuela City"},{"Raw Address":"19921 ST.FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"260 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"143 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"468 KAINGIN ST. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"233 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"172-B MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"106 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"BLK6 LOT7 GINTONG SILANGAN ST. F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"400 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"15 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"438 E FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"440 RUMARAO COMPOUND Parada Valenzuela City"},{"Raw Address":"232 SAN MIGUEL COMP. Parada Valenzuela City"},{"Raw Address":"430 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"75 PARADA RD. EXT. Parada Valenzuela City"},{"Raw Address":"248 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"101 LAGADAMEO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"321 S. DEG GUZMAN Parada Valenzuela City"},{"Raw Address":"269 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"195 6TH ST. FORTUNE   Parada Valenzuela City"},{"Raw Address":"77 PARADA RD. EXT. FORTUNE7 Parada Valenzuela City"},{"Raw Address":"264 25TH ST. FORTUNE VIL 5 Parada Valenzuela City"},{"Raw Address":"0090 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"412 Fortune Village 7 ZAMORA ST. PARADA Valenzuela City"},{"Raw Address":"#207 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"UNIT 3 LOT 16 BLK 8 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"278 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"287 SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"306-A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"114-E LAGDAMEO Parada Valenzuela City"},{"Raw Address":"247 PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"58 PARADA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"466 KA BERONG Parada Valenzuela City"},{"Raw Address":"321 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"202 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"190 B MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"9 5TH STEET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"134 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"386 IMPONG JUANA STREET Parada Valenzuela City"},{"Raw Address":"0419 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"B5 L7GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"207 ANTHONY ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"099 CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"260 S. DE GUSMAN ST. Parada Valenzuela City"},{"Raw Address":"98 CAPT. CRUZ ST. BO.PARADA Valenzuela City"},{"Raw Address":"388 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"71 FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"#93-C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"20 ZAMORA ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 12 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"032 Parada Valenzuela City"},{"Raw Address":"276 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"BK3 LT12 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"58 Fortune Village 6 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"39 D. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"302-B CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"125 DAET COMPOUND Parada Valenzuela City"},{"Raw Address":"320 J S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"182 MOLAVE Parada Valenzuela City"},{"Raw Address":"0011 UNIT C MOLAVE ST Parada Valenzuela City"},{"Raw Address":"201 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"#146 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"84 PARADA ROAD Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"# 365 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"96 FELIZA ST Parada Valenzuela City"},{"Raw Address":"039 RAMON ST. Parada Valenzuela City"},{"Raw Address":"236 7ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"055 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE FV 5 Parada Valenzuela City"},{"Raw Address":"AGLIHAM COMPD. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 9 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"91-A CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"7 CONSUELO ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"414 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"184 RAMON ST FV4 Parada Valenzuela City"},{"Raw Address":"26 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"19-B ZAMORA Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"18 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"# 43 PARADA RD. Parada Valenzuela City"},{"Raw Address":"083 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"391 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"90 G. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"86 SALVADOR ST Parada Valenzuela City"},{"Raw Address":"322 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"448 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"297-D T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"87 PARADA RD. Parada Valenzuela City"},{"Raw Address":"SISCAR APARTMENT ADOR STREET Parada Valenzuela City"},{"Raw Address":"114 YAKAL ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"452 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"223 ABELARDO Parada Valenzuela City"},{"Raw Address":"22 T. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"199 6TH ST. FORTUNE Village 6. PARADA Valenzuela City"},{"Raw Address":"276A S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"120 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"245 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"0094 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"101 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"301 T.MANANG Parada Valenzuela City"},{"Raw Address":"004 Parada Valenzuela City"},{"Raw Address":"246 7TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"#93 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"105 KAMAGONG Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"B5L3 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"BLOCK 5 LOT 11 FRANCISCO ST GINTONG Parada Valenzuela City"},{"Raw Address":"87 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"317 TADANG MANANG Parada Valenzuela City"},{"Raw Address":"8-FIFTH ST. Parada Valenzuela City"},{"Raw Address":"157 ELAGDAMEO ST. FV4 Parada Valenzuela City"},{"Raw Address":"122 CALLE ONSE ST. PARADA Valenzuela City"},{"Raw Address":"#12 PARADA RD. Parada Valenzuela City"},{"Raw Address":"254 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"89 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"468-G KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"LOT 41 BLK 10 NARA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"6 Parada Valenzuela City"},{"Raw Address":"333 A TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"LOT 19 BLK 8 FORTUNE DR. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"170 RAMON FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"122 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"242 19TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"199 6TH ST. COR. Parada Valenzuela City"},{"Raw Address":"043 PARADA Valenzuela City"},{"Raw Address":"108 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"339 21ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"031 PARADA RD Parada Valenzuela City"},{"Raw Address":"FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"35 Parada Valenzuela City"},{"Raw Address":"184 Fortune Village 6 MOLAVE ST. PARADA Valenzuela City"},{"Raw Address":"302 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"SALAZAR Parada Valenzuela City"},{"Raw Address":"20 EUGENIO Parada Valenzuela City"},{"Raw Address":"01 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"B13L27 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"253 Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. FORUNE Village4 Parada Valenzuela City"},{"Raw Address":"B1 L9 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"00002 B CALLE ONSE Parada Valenzuela City"},{"Raw Address":"187 UNIT 11 3RD FLOOR FELIZA ST. Parada Valenzuela City"},{"Raw Address":"87 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"181 FELIZA Parada Valenzuela City"},{"Raw Address":"136 E. LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"200 B CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"97 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"214-S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"# 86 C. CAPITAN CRUZ Parada Valenzuela City"},{"Raw Address":"# 95 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"231 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"139 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"154 ALICIA STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 2 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"BLK3 LOT20 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"347 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"241 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"427 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"207 FELISA ST. Parada Valenzuela City"},{"Raw Address":"248 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"268 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"88 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"404 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"5 PARADA Valenzuela City"},{"Raw Address":"04 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"369 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"405-B P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"145 C NARRA ST. Parada Valenzuela City"},{"Raw Address":"274 PILAR ST. Parada Valenzuela City"},{"Raw Address":"367 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE Parada Valenzuela City"},{"Raw Address":"339 T. MANANG Parada Valenzuela City"},{"Raw Address":"39 C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"315 MENES COMP. Parada Valenzuela City"},{"Raw Address":"255 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"091 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"357 FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"188 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"324 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"156 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"412-B P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"204B F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"162 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"31 EARTH ST. Parada Valenzuela City"},{"Raw Address":"028 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"464 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"LOT 10 BLK. 2 PARADA ROAD EXT. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"L 9 B 9 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"172 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"185 B. FELIZA ST. Parada Valenzuela City"},{"Raw Address":"419 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"127 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"PARADA ROAD PARADA Valenzuela City"},{"Raw Address":"332 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"231 18TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"FRANCISCO Parada Valenzuela City"},{"Raw Address":"172 MOLAVE ST. Fortune Village 5&6 Parada Valenzuela City"},{"Raw Address":"21ST PARADA RD Parada Valenzuela City"},{"Raw Address":"290 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"177 GONZALES COMP. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. BENMARIE COMP. Parada Valenzuela City"},{"Raw Address":"#39D. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"3A LOT 13 BLK 13 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"9001 LOT 4 A CALLE ONCE Parada Valenzuela City"},{"Raw Address":"450 Parada Valenzuela City"},{"Raw Address":"283 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"143 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"043 6TH ST. CORNER NARRRA ST. Parada Valenzuela City"},{"Raw Address":"413-J P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"L26 NARRA ST Parada Valenzuela City"},{"Raw Address":"065 BO.PARADA Valenzuela City"},{"Raw Address":"27 DIAMOND ST HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"404 P.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"140 DALAWAN ST.PARADA Valenzuela City"},{"Raw Address":"412 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"273 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"84 A. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"123 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"91-A CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"222 20TH STREET FORTUNE5 Parada Valenzuela City"},{"Raw Address":"#12 PARADA ST. Parada Valenzuela City"},{"Raw Address":"276-B S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"410 P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"420 ZAMORA FV7 Parada Valenzuela City"},{"Raw Address":"18 A F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"73 GOMEZ ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"199 6TH ST. MANALANG APT. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"UNIT1 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"413 ZAMORA ST. PARADA Valenzuela City"},{"Raw Address":"315 JIMENEZ ST. PARADA Valenzuela City"},{"Raw Address":"20 EUGENIO ST. CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"63 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"78 PARADA RD. EXT. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"39 D RAMON ST. SANTIAGO COMPOUND F4 Parada Valenzuela City"},{"Raw Address":"26 MARS ST. Parada Valenzuela City"},{"Raw Address":"224 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"SERVE 1 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"220D 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"046 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"11 5TH FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"26 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"176 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"141 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"178 KAMAGONG FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"420 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"144 E FRANCISCO Parada Valenzuela City"},{"Raw Address":"259 2ST ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 7 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"411 C P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"286 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"410-A P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"99 VENUS ST. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"36-G TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"413 FV7 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ ST Parada Valenzuela City"},{"Raw Address":"100 CAPTAIN CRUZ ST. COR. M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"248 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"0006 BLOCK 3 LOT 4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"269 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"122 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"168 ACACIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"440 WEST SERVICE RUMARAO COMPD Parada Valenzuela City"},{"Raw Address":"171 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 8 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"134 E.LAGDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"151 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"125 CONSUELO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"COR. PEARL & CORAL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"409 P.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"192 RAMON FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPUND Parada Valenzuela City"},{"Raw Address":"29 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"414 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"437 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"227 ABLERADO ST. Parada Valenzuela City"},{"Raw Address":"196 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"1F DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"119A KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST.FV 4 Parada Valenzuela City"},{"Raw Address":"22 Parada Valenzuela City"},{"Raw Address":"10 5TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"ABELARDO Parada Valenzuela City"},{"Raw Address":"199 6TH Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"65 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"109 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"283 MARTA ST. Parada Valenzuela City"},{"Raw Address":"371 -A TATA ANDRES Parada Valenzuela City"},{"Raw Address":"274 PILAR ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"UNIT A 276 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"274 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B2 L22 JADE ST Parada Valenzuela City"},{"Raw Address":"2 CALLE ONSE FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"067 PARADA RD Parada Valenzuela City"},{"Raw Address":"165 G ACACIA ST Parada Valenzuela City"},{"Raw Address":"441 GOMEZ Parada Valenzuela City"},{"Raw Address":"18 GP WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"9 VENUS ST. Parada Valenzuela City"},{"Raw Address":"028 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"BLK1 LOT5 TMHOA T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"181 23RD STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"135 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"360 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"207 FELA BUKID Parada Valenzuela City"},{"Raw Address":"173 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"269 S. GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"250 ABELARDO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"42 PARADA RD. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"466 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"RAMON ST. Parada Valenzuela City"},{"Raw Address":"93 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"91B S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"101 A CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"UNIT 4 CALYE 7 Parada Valenzuela City"},{"Raw Address":"123 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"080 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"322 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"199 6TH ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"122 CALE ONCE ST. Parada Valenzuela City"},{"Raw Address":"193-C M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"62 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"222 ANTHONY STREET Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"201 6ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"165 Parada Valenzuela City"},{"Raw Address":"217 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"#80 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"97 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"# 26 MARS ST. Parada Valenzuela City"},{"Raw Address":"358 J.FRANCISCO Parada Valenzuela City"},{"Raw Address":"4389 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"LOT 10 NEPTUNE STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"246 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"165 YAKAL ST. Parada Valenzuela City"},{"Raw Address":"194 FORTUNE Village 5 CORNER 6 ST. Parada Valenzuela City"},{"Raw Address":"94A FELIZA ST. Parada Valenzuela City"},{"Raw Address":"159 6TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"342 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"0118A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"372 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"139 Fortune Village 5 DRIVE Village Parada Valenzuela City"},{"Raw Address":"ADOR ST. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"128 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"30B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"361 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"88 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"251 ABELARDO ST.PARADA Valenzuela City"},{"Raw Address":"109 KAMAGONG Parada Valenzuela City"},{"Raw Address":"LOT 10 NEPTUNE F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"122 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"39 D. SANTIAGO COMPD. FV4 Parada Valenzuela City"},{"Raw Address":"439 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"307 JIMENEZ ST.PARADA Valenzuela City"},{"Raw Address":"ACACIA ST. Parada Valenzuela City"},{"Raw Address":"358 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"6TH ST. CORNER NARRA Parada Valenzuela City"},{"Raw Address":"192 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"400 SAN ANDRES ST Parada Valenzuela City"},{"Raw Address":"123 C. CRUZ Parada Valenzuela City"},{"Raw Address":"414 PARADA ST. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"CANDIDO APT. Parada Valenzuela City"},{"Raw Address":"RUMARAO COMPOUND WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"260 TATA ROMAN ST Parada Valenzuela City"},{"Raw Address":"B4 L11 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"1243 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"416 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"169 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"140 E FRANCISCO Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST. FORUNE Village 4 Parada Valenzuela City"},{"Raw Address":"349-F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"039 RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"435 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"CALL ONSE Parada Valenzuela City"},{"Raw Address":"097 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 22 JADE ST. Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"104 A CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"#330 TADANG MANANG Parada Valenzuela City"},{"Raw Address":"B2L20 349 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"449 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"146 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"177 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"228 ABELARDO FV 4 Parada Valenzuela City"},{"Raw Address":"279-B S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"35 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"#42 PARADA RD. Parada Valenzuela City"},{"Raw Address":"117 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"BLK 4 LOT 18 PEARL ST. HIYAS Parada Valenzuela City"},{"Raw Address":"28 PARADA RD Parada Valenzuela City"},{"Raw Address":"95 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"462 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"203 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"055 KAMAGONG STREET Parada Valenzuela City"},{"Raw Address":"# 12 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"103 KAMAGONG STREET. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"235 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"365 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"BLK9 LOT29-A KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"169 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID CALLE ONCE Parada Valenzuela City"},{"Raw Address":"464 KAINGIN Parada Valenzuela City"},{"Raw Address":"182 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"442 ROSILOS Parada Valenzuela City"},{"Raw Address":"470 CARACTA VillageE KAINGIN ST Parada Valenzuela City"},{"Raw Address":"457 F KAINGIN ST Parada Valenzuela City"},{"Raw Address":"0147E LOT 0147 DOON COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"105 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"289-D S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"283 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"348 CAPT.CRUZ ST. BO. PARADA Valenzuela City"},{"Raw Address":"377 TATA ANDREZ ST. Parada Valenzuela City"},{"Raw Address":"26 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"8 M. LAUREL DRIVE Fortune Village 4. Parada Valenzuela City"},{"Raw Address":"CALLE ONSE BUKID Parada Valenzuela City"},{"Raw Address":"230 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"286 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"95 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"219 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"JORGE EMBUSCADO Parada Valenzuela City"},{"Raw Address":"#153 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"3 5TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"442 P. GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"17 F.SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"171 RAMON ST. Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"279 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"0320 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"332 T MANANG ST Parada Valenzuela City"},{"Raw Address":"514 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"412 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"160 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"224 2OTH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"225 BELARDO ST. FV 4 Village Parada Valenzuela City"},{"Raw Address":"25 GUENIO Parada Valenzuela City"},{"Raw Address":"407 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"405 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"146 ALICIA ST.FV 4 Parada Valenzuela City"},{"Raw Address":"136 LAGDAMEO Parada Valenzuela City"},{"Raw Address":"199 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"134 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 14 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"103 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"307 JIMENES ST. Parada Valenzuela City"},{"Raw Address":"315 JEMENES COMPOUND Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 6 TANDANG MANANG HOWA Parada Valenzuela City"},{"Raw Address":"3 CORAL ST. Parada Valenzuela City"},{"Raw Address":"100 E. DE GULA COMP. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"#6 Fortune Village 5 5TH STREET Parada Valenzuela City"},{"Raw Address":"198 RAMON ST. FV4 Parada Valenzuela City"},{"Raw Address":"168 SALAZAR DOON COMPD. Parada Valenzuela City"},{"Raw Address":"301 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 9 PEARL CORNER JADE HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"172 23 ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"257 RIZALINA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"320 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"190 6TH ST. Fortune Village 5 MOLAVE EXT. Parada Valenzuela City"},{"Raw Address":"111 Fortune Village 6 Village YAKAL ST. Parada Valenzuela City"},{"Raw Address":"349 GINTONG SILANGAN BLK. 5 LOT 15 Parada Valenzuela City"},{"Raw Address":"458 KAINGIN Parada Valenzuela City"},{"Raw Address":"2 YAKAL ST. CORNER ACACIA Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"471-A KA BERONG ST. Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 1 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"205 FELISA ST. Parada Valenzuela City"},{"Raw Address":"406 BANDINO Parada Valenzuela City"},{"Raw Address":"L8 MERCURY F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"267 CORNER 24TH & 19TH Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"207 FILIZA BUKID Parada Valenzuela City"},{"Raw Address":"L10 B 2 PARADA EXT. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"413H SANTOS TWNH P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"L6 BF SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"#70 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"98 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"0281 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"#91 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"L-10 B-4 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"363 APT E. TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"222C ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"201 CALLE ONCE PARADA Valenzuela City"},{"Raw Address":"161 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"9 DR.LAUREL ST. Parada Valenzuela City"},{"Raw Address":"456-C KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"333 APTC. KAMAGONG ST FV6 Parada Valenzuela City"},{"Raw Address":"358 FRANCISCO Parada Valenzuela City"},{"Raw Address":"116 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"190 6TH ST Parada Valenzuela City"},{"Raw Address":"BL 3 LT 5 GINTONG SILANGAN 349 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"118 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"201 A. FELIZA Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"234 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"HIYAS HOME PARADA RD. Parada Valenzuela City"},{"Raw Address":"233 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"226 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"BLOCK 6 LOT 11 F FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"177 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"271 CONSUELO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"470 PARADA ST. Parada Valenzuela City"},{"Raw Address":"329 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"457 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"112 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"MACABALO APARTMENT PILAR ST. Parada Valenzuela City"},{"Raw Address":"118 E CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"442 P GOMEZ ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"21ST F5 MARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"4541 MOLAVE ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"15 F AANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"046 Fortune Village 5 PARADA RD. Parada Valenzuela City"},{"Raw Address":"LOT 5 BLK 10A NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"95P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"204 VENUS ST. E AND E COMPD. Parada Valenzuela City"},{"Raw Address":"406 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"185 A FELIZA ST Parada Valenzuela City"},{"Raw Address":"0222 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"467-A KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"410 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"BLK 2 LOT 1 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"472 KA BERONG ST. Parada Valenzuela City"},{"Raw Address":"0394L SAN ADNRES ST. Parada Valenzuela City"},{"Raw Address":"360 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"SAPHIRE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"132 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"123 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"256 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"352 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"121 E LAGDAME ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"232 S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"171 MOLAVE STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"130 5THV ST. FV 5 Parada Valenzuela City"},{"Raw Address":"468 KAINGI ST. Parada Valenzuela City"},{"Raw Address":"LOT 1 BLK. 11 FORTUNE DRIVE Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"LOT 10 NIPTUNE ST. Parada Valenzuela City"},{"Raw Address":"25 ST. FORTUNE Village Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"DIZON COMP. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"298 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"28 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"246 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"4541 MOLAVE ST. FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. F4 Parada Valenzuela City"},{"Raw Address":"246 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"168 TATA ERO ST Parada Valenzuela City"},{"Raw Address":"41 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"363 D. TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"91-B CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"343 F. FRANCISCOST Parada Valenzuela City"},{"Raw Address":"217 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"BLK.1 LOT 7 GOMEZ ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"171 A.SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 5TH ST. Parada Valenzuela City"},{"Raw Address":"224 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"150 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"254 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"19 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"272 DOOR 3 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"0339 ST. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"B1 L2 24TH ST. BEN MARIE COMP. Parada Valenzuela City"},{"Raw Address":"444 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"121 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"02 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"269 24TH STREET Parada Valenzuela City"},{"Raw Address":"37 PARADA RD. Parada Valenzuela City"},{"Raw Address":"4365 TATA ANDRES ST.PARADA Valenzuela City"},{"Raw Address":"327 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"403 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"184 RAMON FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"273 PILAR ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"407 Parada Valenzuela City"},{"Raw Address":"188 CAPT. CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"3201 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"039 RAMON ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"193 M. DE GULA ST Parada Valenzuela City"},{"Raw Address":"234 19TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"1548 F PEARL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"258 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST DOON COMPD Parada Valenzuela City"},{"Raw Address":"257 RIZALINA STREET Parada Valenzuela City"},{"Raw Address":"101 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"098 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"412 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"258 25TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"091 FORTUNE DR. PARADA Valenzuela City"},{"Raw Address":"166 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"108 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"278 PILAR ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"342 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"151 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"193 RAMON ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"140 E.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"PEARL CORNER SAPPHIRE ST. B.Parada Valenzuela City"},{"Raw Address":"401 SAN ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"121 CONSUELO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"013 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 7 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"# 10 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"155 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"257 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"312 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"140 NARRA ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. FV4 Parada Valenzuela City"},{"Raw Address":"168 TATA ERO Parada Valenzuela City"},{"Raw Address":"2970 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"312 INT.JIMENEZ COMPD. ST. Parada Valenzuela City"},{"Raw Address":"250 25TH ST. FORTUNE DRIVE Village 5 Parada Valenzuela City"},{"Raw Address":"13 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"266 24TH ST. FORTUNE 5 Parada Valenzuela City"},{"Raw Address":"207 A FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"169 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 STREET 21 Parada Valenzuela City"},{"Raw Address":"257 M DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"187 Parada Valenzuela City"},{"Raw Address":"414 A. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"171 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"466 KABERONG KAINGIN Parada Valenzuela City"},{"Raw Address":"BLK 2 GINTONG SILANGAN SAN FRANCISCO Parada Valenzuela City"},{"Raw Address":"99 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"185 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"392-B P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"PARADA ST. SALAZAR Parada Valenzuela City"},{"Raw Address":"290 M. ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"130 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"#230 18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"407 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"443 GOMEZ ST. PARADA Valenzuela City"},{"Raw Address":"230 1-F EMBUSCADO APT. S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"161 YAKAL ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"161 FELISA SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"028 CAPT. CRUZ. PARADA Valenzuela City"},{"Raw Address":"232 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"186 FELIZA Parada Valenzuela City"},{"Raw Address":"22 T.EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"121 CAPITAN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"#185 FILIZA Parada Valenzuela City"},{"Raw Address":"362 B. TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"BLK. 10 LOT 5 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"BLK Parada Valenzuela City"},{"Raw Address":"108 RAMON ST. Parada Valenzuela City"},{"Raw Address":"4542 ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"455 KAINGIN Parada Valenzuela City"},{"Raw Address":"123 LAGDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"22 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"88 A. CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"UNIT3A B9L30 NARRA ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"165 ACACIA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"174 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"140 E. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 14 349 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"1252 CONSUELO ST. Parada Valenzuela City"},{"Raw Address":"319 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"279 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"131 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"50 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"165 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"101 KAMAGONG ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"278 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"333 TANDANG MANANG. PARADA Valenzuela City"},{"Raw Address":"LOT 29 A BLK. 9 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"156 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"111-B KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"201 6THST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"70 PARADA RD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"199 21 STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"186 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"12 B. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"39C PARADA RD Parada Valenzuela City"},{"Raw Address":"23RD ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"122 B CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"91A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"42 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"70 PARADA Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"15 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"150 ALICIA FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"233 19 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"433 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"124 -B CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"9 M. LAUREL STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"88 I. SANTIAGO Parada Valenzuela City"},{"Raw Address":"31 U4&5 KAMAGONG Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"L8 B2 TINDALO ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"240 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"460 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"B2 L8 349 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"139 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#136 NARRA ST. Parada Valenzuela City"},{"Raw Address":"206 F.SANTIAGO ST.PARADA Valenzuela City"},{"Raw Address":"409 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"199 BENMARI CPD. Parada Valenzuela City"},{"Raw Address":"340 20TH ST. FV5 Parada Valenzuela City"},{"Raw Address":"133 KAMAGONG ST. FORTUNE VillageE Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMP Parada Valenzuela City"},{"Raw Address":"450 SERVICE ROAD WEST Parada Valenzuela City"},{"Raw Address":"457 F. KAINGIN ST Parada Valenzuela City"},{"Raw Address":"DAET CMPD.PARADA Valenzuela City"},{"Raw Address":"417 TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"128 YAKAL ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"177 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"95 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"166 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"9 PARADA RD. Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"150 AVELIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"111 BLK. B KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"Q02 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"296 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"244 7TH ST.FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"338 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"40 PARADA RD Parada Valenzuela City"},{"Raw Address":"287 SANTOLAN RD. PARADA Valenzuela City"},{"Raw Address":"24TH STREET BEN MARIE COMPD. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"094 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"79 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"417 TATA ERRO ST. Parada Valenzuela City"},{"Raw Address":"409 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"416 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"45-A F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"187 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"466 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"333 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"60 Fortune Village 6 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"409 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"466 KAINGIN ST . PARADA Valenzuela City"},{"Raw Address":"357 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"024 T.EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"LOT 31 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"333-A KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"332 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"199 21ST. BENMARE COMP. Parada Valenzuela City"},{"Raw Address":"139 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"65 PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"39 D SANTIAGO CPMD. FV4 Parada Valenzuela City"},{"Raw Address":"273 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"170 SLAZAR ST. Parada Valenzuela City"},{"Raw Address":"141 DALAWAN ST.PARADA Valenzuela City"},{"Raw Address":"279 B S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"B 2 L19 SAPPHIRE ST.HIYAS HOME Parada Valenzuela City"},{"Raw Address":"409 P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"138-E LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"347 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"1114 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"14 E. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"123 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"220 21ST ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"DOOR 4 ALFONSO APARTMENT M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"4-D S.DE GUZMAN ST. EMBUSCADO APT. Parada Valenzuela City"},{"Raw Address":"328 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"59 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"360-J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"138 NARRA ST. Parada Valenzuela City"},{"Raw Address":"358 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"INT. CAPT.CRUZ. ST. PARADA Valenzuela City"},{"Raw Address":"202 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"347 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ STREET Parada Valenzuela City"},{"Raw Address":"246 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"200 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"444 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"198 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"248 PARADA RD. Parada Valenzuela City"},{"Raw Address":"204-B F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"271 S. DEGUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"225 A BELARDO ST. FV4 Parada Valenzuela City"},{"Raw Address":"267 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"94 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"222 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"410P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"353 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"33 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"34 PARADA RD Parada Valenzuela City"},{"Raw Address":"365 B TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"351-C CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"DOOR B. MACABALO FORTUNE IV Village Parada Valenzuela City"},{"Raw Address":"090 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"78-B PARADA EXTN. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"E. QUENIO ST. Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMP 21 ST FORTUNE Parada Valenzuela City"},{"Raw Address":"203 18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"170 UNIT 1 SALAZAR Parada Valenzuela City"},{"Raw Address":"91 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"067 E PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"199 21 STREET Parada Valenzuela City"},{"Raw Address":"CABRAL ST. Parada Valenzuela City"},{"Raw Address":"207 FELISA ST Parada Valenzuela City"},{"Raw Address":"448 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"310 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"437 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"26 MARS ST. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"FELISA ST Parada Valenzuela City"},{"Raw Address":"117 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"167 6TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"435 B. ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"225 ABELARDO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"26 MARS ST. F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"67 FORTUNE VIILAGE 6 PARADA RD. Parada Valenzuela City"},{"Raw Address":"19921 ST. Parada Valenzuela City"},{"Raw Address":"410 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"454 SERVICE RD Parada Valenzuela City"},{"Raw Address":"B5 L6 F FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"15 F. Parada Valenzuela City"},{"Raw Address":"MENEZ COMPD. PARADA Valenzuela City"},{"Raw Address":"236 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"LOT10 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"332 TANDANG MANANG ST.PARADA Valenzuela City"},{"Raw Address":"B4L7 MHOAI TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"66 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"B3L24 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"202 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"162 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"229 ABELARDO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"133 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"29 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"170 RAMON ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B1 L7 LUPANG SINILANGAN Parada Valenzuela City"},{"Raw Address":"239 PARADA Valenzuela City"},{"Raw Address":"155 ALICIA ST FV4 Parada Valenzuela City"},{"Raw Address":"055 Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"141 FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"339TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"204 VENUS ST. F.SANTIAGO COMPD. Parada Valenzuela City"},{"Raw Address":"16 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"3 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"24 T. EUGENIO ST Parada Valenzuela City"},{"Raw Address":"358 J. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"BLK.14 L3 M. DELOS REYES ST. Parada Valenzuela City"},{"Raw Address":"392-B P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN EXT. Parada Valenzuela City"},{"Raw Address":"247 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"193 DE GULA ST. Parada Valenzuela City"},{"Raw Address":"233 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"25TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"170 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"349 F. FANCISCO ST. Parada Valenzuela City"},{"Raw Address":"424 BURGOS STREET Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"232 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"FORTUNE5 5 Parada Valenzuela City"},{"Raw Address":"204 VENUS STREET Parada Valenzuela City"},{"Raw Address":"326 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"BLK. 8 LOT 3 F.FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"465B KAINGIN ST Parada Valenzuela City"},{"Raw Address":"CRUZ ST. Parada Valenzuela City"},{"Raw Address":"91 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"257 M. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"185 A. FELIZA ST. Parada Valenzuela City"},{"Raw Address":". Parada Valenzuela City"},{"Raw Address":"WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"245 B DOON SALAZAR ST. COMPD. Parada Valenzuela City"},{"Raw Address":"230-S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"L 16 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"206 TATA ROMAN Parada Valenzuela City"},{"Raw Address":"0250 CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"199 21ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"273 S. DEGUZMAN Parada Valenzuela City"},{"Raw Address":"157 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 10 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"154 ALICICA ST. Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE FORTUNE Village. 5 Parada Valenzuela City"},{"Raw Address":"296 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"LOT 10 NEPTUNE F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"COR. 6TH ST. Parada Valenzuela City"},{"Raw Address":"100 CAPT. CRUS ST. Parada Valenzuela City"},{"Raw Address":"215 DAET COMPOUND Parada Valenzuela City"},{"Raw Address":"406 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"164 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"416 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"365-A TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"347 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"351 D. CAPT. F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"243 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"233 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"326 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"220 21ST STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"TOMASA Parada Valenzuela City"},{"Raw Address":"276 J S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"0334 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"BLOCK 7 LOT 9 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"91-E CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"BLK 1 LOT 13 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"316 MENES CMPD. PARADA Valenzuela City"},{"Raw Address":"110 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"FELIZA ABUKID Parada Valenzuela City"},{"Raw Address":"315 JIMENES COMP. PARADA Valenzuela City"},{"Raw Address":"0177 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 8 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 AGLIHAN COMPD. Parada Valenzuela City"},{"Raw Address":"PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"170 MOLAVE STR Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"172 RAMON ST. Parada Valenzuela City"},{"Raw Address":"202-A FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"9-E PARADA ROAD Parada Valenzuela City"},{"Raw Address":"206 D 22ND ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"05 118 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"267 INANG PETRA ST Parada Valenzuela City"},{"Raw Address":"324 TANGDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"BLK.8 LOT31 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"327 T. MANANG Parada Valenzuela City"},{"Raw Address":"297 B. TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"132 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"26 MARS STREET Parada Valenzuela City"},{"Raw Address":"215 DAET COMP Parada Valenzuela City"},{"Raw Address":"L14 B 5 GINTONG SILANGAN ST. Parada Valenzuela City"},{"Raw Address":"172 Parada Valenzuela City"},{"Raw Address":"207 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"115 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"85 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"283 MARTHA ST Parada Valenzuela City"},{"Raw Address":"195 19TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"199 CALLE ONSE ST. PARADA Valenzuela City"},{"Raw Address":"LOT 17 BLK 2 SAPPHIRE ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"28 PARADA Valenzuela City"},{"Raw Address":"LOT 4 BLK 21 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"F. FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"33 EARTH ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"406 BANDINO ST Parada Valenzuela City"},{"Raw Address":"349 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"249 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"168-B SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"052 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"363-D TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"LOT 6-B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"236 7TH ST. PARADA Valenzuela City"},{"Raw Address":"5 Parada Valenzuela City"},{"Raw Address":"5 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"18 BEN MARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"320 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"40 PEARL ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"200 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"214 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"255 TOMAS ST. Parada Valenzuela City"},{"Raw Address":"424 BURGOS STREET Parada Valenzuela City"},{"Raw Address":"119 PEARL ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"279 PILAR ST Parada Valenzuela City"},{"Raw Address":"440 SERVICE RD Parada Valenzuela City"},{"Raw Address":"0349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"242 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"271 MARTHA ST. Parada Valenzuela City"},{"Raw Address":"24TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"11 PARADA ROAD ST. Parada Valenzuela City"},{"Raw Address":"L6 B2 TINDALO ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"01 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"FELIZA Parada Valenzuela City"},{"Raw Address":"146 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"09 BO. PARADA RD. Parada Valenzuela City"},{"Raw Address":"405 B P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"181 FELIZA ST Parada Valenzuela City"},{"Raw Address":"342 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"333 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"123 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"192 M DEGULA Parada Valenzuela City"},{"Raw Address":"173 SALAZAR ST. BO. PARADA Valenzuela City"},{"Raw Address":"416 TATA ERO Parada Valenzuela City"},{"Raw Address":"124 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"422 GOMEZ ST. FORUNE Village 7 Parada Valenzuela City"},{"Raw Address":"90 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"380 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"410 A- P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"506 TINDALO ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"86 SALVADOR Parada Valenzuela City"},{"Raw Address":"31 EARTH ST. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"DOOR 12 118 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"199 AGLIHAM COMPD. Parada Valenzuela City"},{"Raw Address":"272 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"377 TATA ANDRESS ST. Parada Valenzuela City"},{"Raw Address":"384 SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"233 ABELARDO FAVillageA Parada Valenzuela City"},{"Raw Address":"5JUPITER ST. Parada Valenzuela City"},{"Raw Address":"333-F KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"204 F SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"355 J. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"111 YAKAL STREET Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"L8 MERCURY F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"352 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"201 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"235 ABELARDO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"0260 1 TATA ROMAN S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"84 A CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"131-C CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"252 ABELARDO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMPD. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"455 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"PARADA ROAD 28 Parada Valenzuela City"},{"Raw Address":"14 B PARADA RD. Parada Valenzuela City"},{"Raw Address":"26 F. SNTIAGO ST. Parada Valenzuela City"},{"Raw Address":"16 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"147 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"258 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"314 MENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"184 RAMON ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"25 STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"242 DE GUZMAN Parada Valenzuela City"},{"Raw Address":"410 T. MANANG Parada Valenzuela City"},{"Raw Address":"313 MENEZ CMPD. Parada Valenzuela City"},{"Raw Address":"330 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"277 PILAR ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN SANTOS TOWAN HOUSE Parada Valenzuela City"},{"Raw Address":"202 FELIZA Parada Valenzuela City"},{"Raw Address":"278 PILAR STREET Parada Valenzuela City"},{"Raw Address":"14 DIAMOND ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"131-CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"325 Parada Valenzuela City"},{"Raw Address":"055 PARADA RD. COR. IPIL ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"311 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG LOT 3 BLOCK 14 Parada Valenzuela City"},{"Raw Address":"286 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"203 6TH STREET FORTUNE Village 5-6 Parada Valenzuela City"},{"Raw Address":"DELA CRUZ COMP. CALLE ONSE DULO Parada Valenzuela City"},{"Raw Address":"026 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"411 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"325 T.MANANAG ST Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"51 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 9 GINTONG SILANGAN A . FRANCISCO Parada Valenzuela City"},{"Raw Address":"046 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"414 ZAMORA ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"002 YAKAL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"11-B S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"146 NARRA ST. Parada Valenzuela City"},{"Raw Address":"123 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"407-B P. DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"200 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"061 PARADA RD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"D: Parada Valenzuela City"},{"Raw Address":"330 TIA. MANANG ST. Parada Valenzuela City"},{"Raw Address":"93 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"407 BANDINO ST. Parada Valenzuela City"},{"Raw Address":"#267 INANG PETRA ST. Parada Valenzuela City"},{"Raw Address":"007 PARADA RD Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"133 ST.PARADA Valenzuela City"},{"Raw Address":"5TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"150 NARRA STREET Parada Valenzuela City"},{"Raw Address":"1288 KAMAGONG STREET Parada Valenzuela City"},{"Raw Address":"146 DALAWAN Parada Valenzuela City"},{"Raw Address":"267 INANG PETRA ST. Parada Valenzuela City"},{"Raw Address":"384 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"200 FORTUNE V FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"119 Fortune Village 5 6 ST. Parada Valenzuela City"},{"Raw Address":"161 B SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"L2 DIAMOND ST HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"192-3 6TH ST. Parada Valenzuela City"},{"Raw Address":"177 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 22 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"347 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"0320 D S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"262 25TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"416 TATAERO ST. Parada Valenzuela City"},{"Raw Address":"407 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"25TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"9 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 6 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"403 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"457 KAINGIN ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"204 VENUS ST CMPD SALAZAR Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 19 HIYAS HOMES SAPHIRE ST. Parada Valenzuela City"},{"Raw Address":"379 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"407 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"376 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"419 ZAMORA ST. FV7 Parada Valenzuela City"},{"Raw Address":"F.FRNCISCO ST. Parada Valenzuela City"},{"Raw Address":"406 BANDINO ST. P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"30 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"360 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"351 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"124B CUPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"FELIZA BUKID ST Parada Valenzuela City"},{"Raw Address":"37 PARADA RD Parada Valenzuela City"},{"Raw Address":"200 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"168 INT. SALAZAR ST. BO.PARADA Valenzuela City"},{"Raw Address":"94- B FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"409 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"169 DOON COMPOUND Parada Valenzuela City"},{"Raw Address":"199 6TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"007 F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"419 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"222 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"200 FORTUNE Village 5 Valenzuela City Parada Valenzuela City"},{"Raw Address":"0394 (G.) SAN ANDRES STREET Parada Valenzuela City"},{"Raw Address":"8 VENANIO RD. P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"234 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"116 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"31 F. SANT IAGOS T. Parada Valenzuela City"},{"Raw Address":"200C CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"310 MENEZ CMPD. PARADA Valenzuela City"},{"Raw Address":"351 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"#255 TOMASA ST. Parada Valenzuela City"},{"Raw Address":"0306 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"168N SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"LT 6B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"228-A S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"BLK4 LOT7 TANDANG MANANG TMHOA Parada Valenzuela City"},{"Raw Address":"287 BO. PARADA SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"457-F KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"400 SAN ANDRES Parada Valenzuela City"},{"Raw Address":"366 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"320 A SANTIAGO DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"442 P GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"BLK.1 LOT12 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"170 DOON COMP. SALAZAR Parada Valenzuela City"},{"Raw Address":"77 PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"307 FELISA STREET Parada Valenzuela City"},{"Raw Address":"KALYE ONSE BUKID Parada Valenzuela City"},{"Raw Address":"268 25TH Fortune Village 5. Parada Valenzuela City"},{"Raw Address":"257 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"KA BERONG ST. PARADA Valenzuela City"},{"Raw Address":"UNIT 1 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"SALASAR ST. Parada Valenzuela City"},{"Raw Address":"2860 140 E FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"357 FRANCISCO Parada Valenzuela City"},{"Raw Address":"276 SANTOLAN PARADA Valenzuela City"},{"Raw Address":"FILEZA BUKID Parada Valenzuela City"},{"Raw Address":"150 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"B3L3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"266B 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"264 B 4TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"207 FILISA BUKID Parada Valenzuela City"},{"Raw Address":"095 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"131 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"122 B KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"39-K RAMON ST. Parada Valenzuela City"},{"Raw Address":"246 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"LOT 6 B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"245 19TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"141 FORTUNE DRIVE PARADA RD. Parada Valenzuela City"},{"Raw Address":"33 F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"132 LAGDAMEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"200 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"284 P. DEGUZMAN Parada Valenzuela City"},{"Raw Address":"456 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"149 A 6TH ST. KAMAGONG ROAD Parada Valenzuela City"},{"Raw Address":"168 DOON COMPOUND SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"207 STREET FILISA BUKID Parada Valenzuela City"},{"Raw Address":"01 CALLE ONSE DULO Parada Valenzuela City"},{"Raw Address":"201 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"233 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"022 EUGENIO Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES ST.PARADA Valenzuela City"},{"Raw Address":"92 FORTUNE DR. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"366 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"55 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"155 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"L12 BURGOS ST Parada Valenzuela City"},{"Raw Address":"110 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"237 19TH ST. Parada Valenzuela City"},{"Raw Address":"B4 L11 GINTONG SILANGAN COMP. F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"297 D TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"B4 L11 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"60 PARADA RD. Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"50 PARADA ST. PARADA Valenzuela City"},{"Raw Address":"1288 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"247 S.DEGUZMAN Parada Valenzuela City"},{"Raw Address":"290 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"2532 140 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"429 BURGOS ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"274 Parada Valenzuela City"},{"Raw Address":"250 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"207 22ND STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"243 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"B2 L1 S. DE GUZMAN ST. VillageA Parada Valenzuela City"},{"Raw Address":"CALLE ONCE ST. PARADA Valenzuela City"},{"Raw Address":"150 ALICIA ST Parada Valenzuela City"},{"Raw Address":"121 Parada Valenzuela City"},{"Raw Address":"169 DON COMPOUND SALAZAR ST Parada Valenzuela City"},{"Raw Address":"158 NARRA ST. Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ Parada Valenzuela City"},{"Raw Address":"168 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"254 25TH. Parada Valenzuela City"},{"Raw Address":"424 BURGOS Parada Valenzuela City"},{"Raw Address":"125 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"33 Parada Valenzuela City"},{"Raw Address":"466C KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"158 ALICIA ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"274 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"1288 KAMAGONG STREET CORNER 6TH STREET Parada Valenzuela City"},{"Raw Address":"138 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"440 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"415 Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"93 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"100 E CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"237 19TH Parada Valenzuela City"},{"Raw Address":"214 IPIL ST. Parada Valenzuela City"},{"Raw Address":"252 DEGUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"107 E.LAGDAMEO ST. FVF. 4 PARADA Valenzuela City"},{"Raw Address":"258 INT. S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"210 21TH STREET COR. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CORNER 23 RD. ST. FOERTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39 PARADA RD. STREET Parada Valenzuela City"},{"Raw Address":"412-B P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"184 Parada Valenzuela City"},{"Raw Address":"140 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"15 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"SISCAR APARTMENT ADOR ST Parada Valenzuela City"},{"Raw Address":"369 T.ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"028 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"116 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"67 B PARADA ROAD EXIT FORTUNE6 Parada Valenzuela City"},{"Raw Address":"407-B P.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"122 CALLE II PARADA Valenzuela City"},{"Raw Address":"249 Parada Valenzuela City"},{"Raw Address":"161 YAKAL ST. COR. MOLAVE Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"215 21ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"168 SALAZAR Parada Valenzuela City"},{"Raw Address":"FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"116 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"170SALAZAR ST Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"415 TATA ERO ST Parada Valenzuela City"},{"Raw Address":"175-B RAMON STREET Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"215 PARADA Valenzuela City"},{"Raw Address":"39-B RAMON ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"101 M. DE GULA STREET Parada Valenzuela City"},{"Raw Address":"128 PARADA ROAD FVG Parada Valenzuela City"},{"Raw Address":"201 22ND ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"BENMARIE 21ST ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"231 A BELARDO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"466-C KA BERONG ST.KAINGIN Parada Valenzuela City"},{"Raw Address":"34 PARADA ST. Parada Valenzuela City"},{"Raw Address":"406 Parada Valenzuela City"},{"Raw Address":"395 SAN ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"#92 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"234 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"339 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"192 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"139 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"021 EUGENIO BARIO Parada Valenzuela City"},{"Raw Address":"175 FELISA ST. Parada Valenzuela City"},{"Raw Address":"F. Village 5 Parada Valenzuela City"},{"Raw Address":"422 BURGOZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"132 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"201 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"267 PETRA Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST Parada Valenzuela City"},{"Raw Address":"410 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"250 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"LT 6 B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"469-B KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"487 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"# 95 A. F. SNTIAGO Parada Valenzuela City"},{"Raw Address":"99 SATURN ST F SANTIAGO Parada Valenzuela City"},{"Raw Address":"227 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"236 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"441 Parada Valenzuela City"},{"Raw Address":"41 B. TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"0506 UNIT 2 TINDALO ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"465 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"95 M DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"308 JIMENES COMP. Parada Valenzuela City"},{"Raw Address":"293 ILOCTO ST. PARADA Valenzuela City"},{"Raw Address":"#26 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"206 D 22ND ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"500 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"14 DIAMOND STREET Parada Valenzuela City"},{"Raw Address":"83 CAPT. CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"207 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"86 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"4541 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"204 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"25 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"264 19TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"333 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"299 BO. PARADA Valenzuela City"},{"Raw Address":"387 S.DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"53 SALAZAR RD. BOPARADA Valenzuela City"},{"Raw Address":"137 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"BENMARIE COMPD. 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"230 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"LOT 2 DIAMOND ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"012 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"136 KAMAGONG ST Parada Valenzuela City"},{"Raw Address":"090 CAPT. CRUZ ADOR ST. Parada Valenzuela City"},{"Raw Address":"273 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"204 ANTHONY STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ ST Parada Valenzuela City"},{"Raw Address":"B1 L3 SAPPHIRE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"186 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"180 23RD ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"207 FELIZA ST Parada Valenzuela City"},{"Raw Address":"224 20TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"207 22ND ST. Parada Valenzuela City"},{"Raw Address":"161 A SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"146 Fortune Village 6 NARRA ST. Parada Valenzuela City"},{"Raw Address":"378 A. TATA ANDRES Parada Valenzuela City"},{"Raw Address":"169 D 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"249 ABELLARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"2531 M.DELOS REYES ST. PARADA Valenzuela City"},{"Raw Address":"456 KAINGIN Parada Valenzuela City"},{"Raw Address":"MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"64 PARADA RD. FORTUNE Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"B-7 L-7 BURGOS ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"310 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"458 P. ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"308 A. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"009 CABRAL ST. Parada Valenzuela City"},{"Raw Address":"WEST CVR Parada Valenzuela City"},{"Raw Address":"9E PARADA RD. PARADA Valenzuela City"},{"Raw Address":"# 347 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST.GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 7 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"07 HIYAS HOMES CORAL ST. Parada Valenzuela City"},{"Raw Address":"199 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"389 IMPONG JUANA ST. Parada Valenzuela City"},{"Raw Address":"325 T MANANG ST Parada Valenzuela City"},{"Raw Address":"188 DE GULA ST. Parada Valenzuela City"},{"Raw Address":"0002 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"415 B TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"223 A BELARDO ST. Parada Valenzuela City"},{"Raw Address":"456 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"#15 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"51 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"198 RAMON FORUNTE Village 4 Parada Valenzuela City"},{"Raw Address":"85 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"39 A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"98 KAMAGONG Parada Valenzuela City"},{"Raw Address":"LOT 2 BLK. 2 SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"178 RAMON Parada Valenzuela City"},{"Raw Address":"448 ROMARAO SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"423 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"331 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"235 S DU GUZMAN ST Parada Valenzuela City"},{"Raw Address":"254 25ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"B1L5 TMHOA TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"98 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"PEARL ST. HIYAS HOMES SUBD. BO. Parada Valenzuela City"},{"Raw Address":"357 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. DOON CPND. Parada Valenzuela City"},{"Raw Address":"BLOCK 1 LOT 12 BURGOS ST. FV7 Parada Valenzuela City"},{"Raw Address":"199 21 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"17 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"225 ABELARDO STREET Parada Valenzuela City"},{"Raw Address":"272 IMPONG JUANA ST. S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"101 E. LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"25 PARADA RD. Parada Valenzuela City"},{"Raw Address":"169 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"25 ST. FV5 Parada Valenzuela City"},{"Raw Address":"268 25TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"406 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"ure Name and Signature Parada Valenzuela City"},{"Raw Address":"BLOCK 7 LOT 17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"357 J. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"297 TADANG MANANG Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"131 CAPT. CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"366 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"01 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"472 KABERONG ST. Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG STREET Parada Valenzuela City"},{"Raw Address":"87 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"183 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"055 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"260 TATA ROMAN STREET Parada Valenzuela City"},{"Raw Address":"185 D FELIZA ST. Parada Valenzuela City"},{"Raw Address":"9 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"4-3 GINTONG SILANGAN F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPOUND 21ST STREET Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ CMPD. PARADA Valenzuela City"},{"Raw Address":"26 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"112 Parada Valenzuela City"},{"Raw Address":"019 PARADA Valenzuela City"},{"Raw Address":"33 EARTH F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"260 RIZALIN ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"mplete. Parada Valenzuela City"},{"Raw Address":"80 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"156 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"407 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"442 ST. PARADA Valenzuela City"},{"Raw Address":"377 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"412B P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"2345 DE GUZMAN Parada Valenzuela City"},{"Raw Address":"232 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"272 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"469 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"98L KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"83 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"349 CAINGIN Parada Valenzuela City"},{"Raw Address":"244 7 ST. FV 5 Parada Valenzuela City"},{"Raw Address":"130 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"153 PARADA Valenzuela City"},{"Raw Address":"86 SALVADOR ST. BRGY. PARADA Valenzuela City"},{"Raw Address":"244 FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"311 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"39B RAMON ST. Parada Valenzuela City"},{"Raw Address":"199 BM COMP. 21 ST FV5 Parada Valenzuela City"},{"Raw Address":"ILOCTO ST. PARADA RD. Valenzuela City Parada Valenzuela City"},{"Raw Address":"B19 EARTH ST Parada Valenzuela City"},{"Raw Address":"261 25ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"429 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"220 SALVADOR ST. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"166 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"229 ABELARDO ST.FV 4 Parada Valenzuela City"},{"Raw Address":"BLK. 6 LOT 7 Parada Valenzuela City"},{"Raw Address":"99 VENUS Parada Valenzuela City"},{"Raw Address":"94 B. FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"BLK. 3 LOT 12 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"2OO C. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"56 P. DE GUZMAN TATA ERRO ST Parada Valenzuela City"},{"Raw Address":"443 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"LOT 31 EARTH ST. SANTIAGO Parada Valenzuela City"},{"Raw Address":"201 A. FELIZA ST Parada Valenzuela City"},{"Raw Address":"B3L16 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"255 TOMASA ST. Parada Valenzuela City"},{"Raw Address":"192 A M . DEGULA ST. Parada Valenzuela City"},{"Raw Address":"B2L23 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"Village 5&6 Parada Valenzuela City"},{"Raw Address":"230 - 1 D. S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"SAPPHIRE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"368 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"091 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"77 CCAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"192 RAMON ST FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"Q4289 KAMAGONG ST Parada Valenzuela City"},{"Raw Address":"LOT 1 BLK 1 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"131 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"466 C. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"2 TINDALO ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"039 D. SANTIAGO COMPOUND Parada Valenzuela City"},{"Raw Address":"73 GOMEZ ST Parada Valenzuela City"},{"Raw Address":"B4 L 18 PEARL ST. HIYAS Parada Valenzuela City"},{"Raw Address":"BLK. 7 37 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"1ST ST. BEN MARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"50 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"94B FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"440 RUMARAO ST. Parada Valenzuela City"},{"Raw Address":"12 VENUS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"0394 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"257 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"319 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 20 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"440 RUMARAO CMPD. Parada Valenzuela City"},{"Raw Address":"DOOR2 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"B2L3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"184 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"415 TIA MANANG ST. PARADA Valenzuela City"},{"Raw Address":"349 F FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"18 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"233 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"290 M. ILOCTO STREET Parada Valenzuela City"},{"Raw Address":"B6 L9 PEARL CORNER JADE HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"302 B CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"W77 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"12 VENUS ST. E&E COMPD. Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"BLK4 LOT3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"314 D JIMENEZ COMPOUND ST. Parada Valenzuela City"},{"Raw Address":"252 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"497 Parada Valenzuela City"},{"Raw Address":"181 23RD STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 10 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"297 PARADA Valenzuela City"},{"Raw Address":"403-B TANDANG MANANG ST.PARADA Valenzuela City"},{"Raw Address":"40 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"UNIT 2 #14 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"68 B PARADA RD Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"193-A M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"349 F. FARNCISCO ST. Parada Valenzuela City"},{"Raw Address":"199 6STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"138 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"028 EUGENIO Parada Valenzuela City"},{"Raw Address":"DOOR B PILAR ST. FORTUNE IV Parada Valenzuela City"},{"Raw Address":"411 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"264 Parada Valenzuela City"},{"Raw Address":"456 KAINGIN ST. BO. PARADA Valenzuela City"},{"Raw Address":"99 VENUS ST. Parada Valenzuela City"},{"Raw Address":"175 MOLAVE ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"409 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"80 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"206 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"272- A S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"122 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"32B 258 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"315 MENES CMPD. PARADA Valenzuela City"},{"Raw Address":"19 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"37 D. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"28 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"415 ZAMORA STREET FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"216 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"349 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"391 SANTALON RD. Parada Valenzuela City"},{"Raw Address":"BET 6 AND 7 ST. FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"275 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"416 TATA ERRO ST. Parada Valenzuela City"},{"Raw Address":"12 - I CONSUELO ST. Parada Valenzuela City"},{"Raw Address":"460 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"320 2nd Floor E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"440 ROMARAO COMPD. WESTSERVICE ROAD Parada Valenzuela City"},{"Raw Address":"96 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"JVC PARADA Valenzuela City"},{"Raw Address":"BEN MARIE CMPD. 21ST ST. Parada Valenzuela City"},{"Raw Address":"188 MOLAVE COR 6TH ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"194 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"269 INANG PETRA Parada Valenzuela City"},{"Raw Address":"130 5TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"#77 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"097 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"363 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"CORNER HIYAS STREET Parada Valenzuela City"},{"Raw Address":"16 VENUS ST. E&E COMPD. Parada Valenzuela City"},{"Raw Address":"VAL. M.M. Parada Valenzuela City"},{"Raw Address":"283 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"7 PARADA RD. Parada Valenzuela City"},{"Raw Address":"17 D. F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"6 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"283 S . MARTHA ST. Parada Valenzuela City"},{"Raw Address":"276 PILAR ST. Parada Valenzuela City"},{"Raw Address":"138 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 11 SAPPHIRE ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"468 CAINGIN ST. Parada Valenzuela City"},{"Raw Address":"309 MENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"45 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"083 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"888 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"222 20TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B5 L 2 F FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"B2 L17 F. FRANCISCO ST. SILANGAN Parada Valenzuela City"},{"Raw Address":"117A CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"064 FORTUNE RD. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"#170 SALAZAR ST. DOON COMPOUND Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPD. FV5 Parada Valenzuela City"},{"Raw Address":"443-3 SERVICE RD Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 8 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"169 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"257 FORTUNE DR. PARADA Valenzuela City"},{"Raw Address":"289 SANTOLAN RD Parada Valenzuela City"},{"Raw Address":"97A CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"COR. OLIVA ST. & RAMON ST. FV4 Parada Valenzuela City"},{"Raw Address":"341 20TH ST.FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"216 ANTHONY ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"200 C. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"130 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"9 PLUTO F .SANTIAGO Parada Valenzuela City"},{"Raw Address":"32 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"DE GULA APT. Parada Valenzuela City"},{"Raw Address":"344 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"116 CALLE ONSE BUKID Parada Valenzuela City"},{"Raw Address":"174 FELIZA ST Parada Valenzuela City"},{"Raw Address":"358 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"525 T. EUGENIO ST Parada Valenzuela City"},{"Raw Address":"361 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"357 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"170 DOON COMP. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"355 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"2735 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"232 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"0909 ADOR STREET Parada Valenzuela City"},{"Raw Address":"022 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"233 FRANCISCO ST.PARADA Valenzuela City"},{"Raw Address":"203 B. VENUS STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"438 WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"198 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"250 UNIT 9 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"267 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"276 E S. DEGUZMAN Parada Valenzuela City"},{"Raw Address":"064 PARADA ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"0250 DR2 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"26 MARS ST. F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"181 RAMON ST. Parada Valenzuela City"},{"Raw Address":"75 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST FV4 Parada Valenzuela City"},{"Raw Address":"442 18TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"LT 6-B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ Parada Valenzuela City"},{"Raw Address":"248 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"015 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"165 UNIT 3 ACACIA FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"149 NARRA ST. Parada Valenzuela City"},{"Raw Address":"419 ZAMORA ST. FORTUNE Village 7 BO. Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"25TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"113 Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 8 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"88 F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"99 VENUS ST F SANTIAGO Parada Valenzuela City"},{"Raw Address":"416 TATAERO Parada Valenzuela City"},{"Raw Address":"161 SALAZAR Parada Valenzuela City"},{"Raw Address":"306 CAPT.DAET COMP. Parada Valenzuela City"},{"Raw Address":"95 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"131 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"194 RAMON STREET Parada Valenzuela City"},{"Raw Address":"270 A.S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"ALICIA ST.Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"336 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"BLK 16 LOT 12 M DELOS REYES ST. Parada Valenzuela City"},{"Raw Address":"142 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"77 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"B1 L 3 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"1827 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"68 B PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"L1 B2 A. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"B1 L1 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"111E LAGDAMEO STREET Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"SANTOAGO ST. Parada Valenzuela City"},{"Raw Address":"166 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"207 ANTHONY Parada Valenzuela City"},{"Raw Address":"107 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"451 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"245 7 TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"196 MOLAVE ST FORTUNE6 Parada Valenzuela City"},{"Raw Address":"193 FORTUNE DR. ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"299 B TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"441 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"278 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"321-1 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"431 B. GOMEZ ST Parada Valenzuela City"},{"Raw Address":"LOT 10 NEPTUNE F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 8 F.FRANCISCO ST. GINTOMG Parada Valenzuela City"},{"Raw Address":"124 LAGDAMEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"446 GOMEZ ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"277 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"362A TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"182 K MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"341 21ST ST. BENMARIE COMP. Parada Valenzuela City"},{"Raw Address":"#230 18TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"055 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"414 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"0098 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"45 PARADA RD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"281 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"388 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"145 UNIT B NARRA FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"257 M. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"172 MOLAVE ST. CORNER IPIL FV6 Parada Valenzuela City"},{"Raw Address":"1-DEMBUSCADO APT. 230 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"290 SANTOLAN RD. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"224 21ST ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLACK 6 LOT 11 F FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"435 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"287 SANTOLAN Parada Valenzuela City"},{"Raw Address":"# 61 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"199 BENMARIE GARDEN 21 ST. Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. E&E SUBD. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"39 RAMON ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"E.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"169 F. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"348 CAPT. F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"0385 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"287 SANTOLAN ST. PARADA Valenzuela City"},{"Raw Address":"328 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"173 23RD ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"007 Parada Valenzuela City"},{"Raw Address":"14 B PEARL ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"MOLAVE ST. COR. IPIL Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"011 PARADA ST. Parada Valenzuela City"},{"Raw Address":"166 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"186-D 6TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"310 MENEZ STREET Parada Valenzuela City"},{"Raw Address":"28 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"354 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"LOT 6B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"453 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"194 19TH STREET Parada Valenzuela City"},{"Raw Address":"232 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"BLK 4 LOT1 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"333 T. MANANG ST. PARADA Valenzuela City"},{"Raw Address":"207 ANTHONY ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B5 L17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"116 Parada Valenzuela City"},{"Raw Address":"24 ST F SANTIAGO Parada Valenzuela City"},{"Raw Address":"123 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"115 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"236 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"377 18ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39-B RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"141 Parada Valenzuela City"},{"Raw Address":"441 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"274 PILAR ST FORTUNE FOUR Parada Valenzuela City"},{"Raw Address":"190 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"064 PARADA ROAD FORTUNE Village.. Parada Valenzuela City"},{"Raw Address":"362-B TATA ANDRES Parada Valenzuela City"},{"Raw Address":"243 SOUTH DE GUZMAN Parada Valenzuela City"},{"Raw Address":"104 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"LOT 12 BLOCK 5 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"317 F Parada Valenzuela City"},{"Raw Address":"5TH ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"247 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"257 A. M. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"29 PARADA RD Parada Valenzuela City"},{"Raw Address":"157-B PARADA Valenzuela City"},{"Raw Address":"61 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"192 RAMOS ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"135 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"147 ALICIA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"349 A FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"0035 KAINGIN Parada Valenzuela City"},{"Raw Address":"04 MARS ST. F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"073 PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"182 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"173 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"270 CONSUELO ST. Parada Valenzuela City"},{"Raw Address":"290 ILOCTO COMPOUND P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"249 ABELARDO Parada Valenzuela City"},{"Raw Address":"45 PARADA RD. FORTUNE Village 5 Valenzuela City Parada Valenzuela City"},{"Raw Address":"15 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"95 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"215 DAET COMPD. Parada Valenzuela City"},{"Raw Address":"234 S.DE GUZMAN ST. PARADA RD. Parada Valenzuela City"},{"Raw Address":"HIYAS HOMES SUBD. SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"258-S.DE GUZMANST. PARADA Valenzuela City"},{"Raw Address":"22A EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"#131 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"355 J.FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID STREET Parada Valenzuela City"},{"Raw Address":"109 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"347 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"19 BLK. 4 FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"BLK. 6 LOT 4 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE VIILL. 5 Parada Valenzuela City"},{"Raw Address":"ALICIA ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. Parada Valenzuela City"},{"Raw Address":"098 7TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"272 PILAR Parada Valenzuela City"},{"Raw Address":"349 CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"#28 NARRA ST. Parada Valenzuela City"},{"Raw Address":"172 23RD ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"256 RIZALINA ST. FORTUNE FOUR Parada Valenzuela City"},{"Raw Address":"100 LAGMADEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"21ST. FORTUNE DRIVE COFR. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"470 KAINGIN RD. Parada Valenzuela City"},{"Raw Address":"111 YAKAL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"136 E. LAGDAMEO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"259 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"465 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"132 C KAMAGONG FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"317 A.TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"96 PARADA Valenzuela City"},{"Raw Address":"193 6TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"252 ABELARDO Parada Valenzuela City"},{"Raw Address":"285 25TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"80 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"334 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"015 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"203-18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"Q5151 CASTRO COMPD. Parada Valenzuela City"},{"Raw Address":"411 TATAERO ST. Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ. PARADA Valenzuela City"},{"Raw Address":"199 ANTHONY ST. PARADA Valenzuela City"},{"Raw Address":"177 FELISA ST. Parada Valenzuela City"},{"Raw Address":"78 PARADA ROAD EXTN. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"310 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"184 FELIZA Parada Valenzuela City"},{"Raw Address":"68 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"135 A CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"KALYE ONSE Parada Valenzuela City"},{"Raw Address":"PARADA ST. Parada Valenzuela City"},{"Raw Address":"250-B S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"Q 551 CASTRO COMPD. Parada Valenzuela City"},{"Raw Address":"130 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"2-B F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"181 RAMON ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"2695 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"088 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"ADOR STREET Parada Valenzuela City"},{"Raw Address":"67 PARADA RD. Parada Valenzuela City"},{"Raw Address":"297-D TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"21 FORTUNE STREET Parada Valenzuela City"},{"Raw Address":"440 RUMARAO COMPD. SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"39 RAMON ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"94 A. FELIZA ST. Parada Valenzuela City"},{"Raw Address":"181 A. MOLAVE ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"424 A. BURGOS ST Parada Valenzuela City"},{"Raw Address":"440 SERVICE RD. ROMARAO COMP. Parada Valenzuela City"},{"Raw Address":"93 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"310 JIMENES COMP. Parada Valenzuela City"},{"Raw Address":"1010 A. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"388 IMPONG JUANA S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"44 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"279 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"11 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"230-1-D S. D GUZMAN ST EMBUSCADO APT. Parada Valenzuela City"},{"Raw Address":"14 DIAMOND ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"207 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"320 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"218 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"175 23 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"286 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"85 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"ADOR ST SISCAR APT. Parada Valenzuela City"},{"Raw Address":"19 BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"8 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"LOT 12 BLK 1 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"126 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"#3 A. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"152 ALICIA STREET Parada Valenzuela City"},{"Raw Address":"36 PARADA RD. Parada Valenzuela City"},{"Raw Address":"326 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"358 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"247 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"278 TATA ENTONG ST. S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"199 FORTUNE Village 5 21ST STREET Parada Valenzuela City"},{"Raw Address":"282 SANTALON RD. PARADA Valenzuela City"},{"Raw Address":"257 ADOR ST Parada Valenzuela City"},{"Raw Address":"098 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"330 T.AMANANG ST. PARADA Valenzuela City"},{"Raw Address":"BLK. 4 LOT 5 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"BENMARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"1223 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"7 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"200 A. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"140 E. FRANCISCO Parada Valenzuela City"},{"Raw Address":"091-B CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"325 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"411 P. DE GUZMAN ST. TATAERO Parada Valenzuela City"},{"Raw Address":"140 NARRA ST FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"F. FRANCISCO BAGONG SILANG Parada Valenzuela City"},{"Raw Address":"32- F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. FV4 Parada Valenzuela City"},{"Raw Address":"TATA ANDRES ST. RIVERA CMPD. Parada Valenzuela City"},{"Raw Address":"165 ACACIA Parada Valenzuela City"},{"Raw Address":"FORTUNE DRIVE 501 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"2 JUPITER ST. Parada Valenzuela City"},{"Raw Address":"470 KAINGIN ST. SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"297 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"35 5TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 9 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"02 TINDALO ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"39 A PARADA RD. Parada Valenzuela City"},{"Raw Address":"114 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 207 22ND ST. Parada Valenzuela City"},{"Raw Address":"97 KAPT. CRUZ PARADA Valenzuela City"},{"Raw Address":"12B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"257 20ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"UNIT 1 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"204 6 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"CALLE ONSE DULO Parada Valenzuela City"},{"Raw Address":"257 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"378 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"003 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"242 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"306 - A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"14 PARADA RD. Parada Valenzuela City"},{"Raw Address":"287 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"272 A S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"435-C ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"204 ANTHONY Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"358 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"116 CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"15 DIAMOND STREET Parada Valenzuela City"},{"Raw Address":"412 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"452 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"0024 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"24 JENUS Parada Valenzuela City"},{"Raw Address":"BLOCK 4 LOT 17 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"172 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"206 22ND ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"504 FORTUNE DR. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"277 PILLAR ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"425-T.MANANG ST. BO.PARADA Valenzuela City"},{"Raw Address":"Fortune Village 5 21ST. STREET Parada Valenzuela City"},{"Raw Address":"122 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"168 DOON COMP. Parada Valenzuela City"},{"Raw Address":"18 ROAD Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE 21ST. Parada Valenzuela City"},{"Raw Address":"11 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"FORTUNE IV Parada Valenzuela City"},{"Raw Address":"0378 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"243F S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"#73 B. PARADA RD. EXT. FV7 Parada Valenzuela City"},{"Raw Address":"185 RAMON ST. Parada Valenzuela City"},{"Raw Address":"469 C. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"441 PARADA Valenzuela City"},{"Raw Address":"470 KAINGEN ST. Parada Valenzuela City"},{"Raw Address":"120 FORTUNE Village PARADA Valenzuela City"},{"Raw Address":"35 PARADA RD. Parada Valenzuela City"},{"Raw Address":"175 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"273 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"#45 A. F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"247 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"365 TATA ANDES ST. Parada Valenzuela City"},{"Raw Address":"198 RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"297 - D TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"192 RAMON ST. Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"#203 18TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"182-D MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"385 Parada Valenzuela City"},{"Raw Address":"M.DEGULA Parada Valenzuela City"},{"Raw Address":"155 ALICIA Parada Valenzuela City"},{"Raw Address":"360 DE GUZMAN ST. J- FRANCISCO Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"202 F.SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"9 PLUTO ST. Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"0013 7TH UNIT C FV 5 Parada Valenzuela City"},{"Raw Address":"101 DE GULA PARADA Valenzuela City"},{"Raw Address":"185-D FELIZA ST. Parada Valenzuela City"},{"Raw Address":"291 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"15-F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"204 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"022 EUGENIO STREET Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"283 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"231 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"412 P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"257 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"160 MOLAVE ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"243 19TH ST. Parada Valenzuela City"},{"Raw Address":"349 CAPTAIN FRANCISCO Parada Valenzuela City"},{"Raw Address":"135 CONSUELO ST.FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"357 Parada Valenzuela City"},{"Raw Address":"242 19TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#144 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"09 PARADA RD. Parada Valenzuela City"},{"Raw Address":"377 APT. 4 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"189 24TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"223 ABELARDO FORTUNE FOUR Village Parada Valenzuela City"},{"Raw Address":"29 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"100 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"468 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"462 P. GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"252 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"B1 L12 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"011 PARADA Valenzuela City"},{"Raw Address":"442 P. GOMEZ ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"351 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"58 Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"230-S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"116 CAPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"115 JADE ST HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"160 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"0334 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"207 Parada Valenzuela City"},{"Raw Address":"274 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"199 6TH ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"197 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"313 MENEZ COMP. Parada Valenzuela City"},{"Raw Address":"009 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"LOT 19 BLK 3 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"340 20TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"9 F SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"332 TANDANG MANANG PARADA Valenzuela City"},{"Raw Address":"197 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"116 CAPT. CRUZ CALLE ONSE Parada Valenzuela City"},{"Raw Address":"#93 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"44B PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"277 PILAR STREET Parada Valenzuela City"},{"Raw Address":"258 S. D EGUZMAN STREET Parada Valenzuela City"},{"Raw Address":"15 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"325 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"219 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"343 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"93 B SALAZAR ST Parada Valenzuela City"},{"Raw Address":"397 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"225 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"31 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"257 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"405 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"111 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"406 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"256 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"40 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"207 FELIZA ST. BUKID Parada Valenzuela City"},{"Raw Address":"05 FORTUNE Village 6TH ST. Parada Valenzuela City"},{"Raw Address":"111 A KAMAGONG FORTUNE Village Parada Valenzuela City"},{"Raw Address":"193 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"186 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"062 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"190 6ST MOLAVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"#39 RAMON ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"415 ZAMORA ST. FORTUNE Village 7 PARADA Valenzuela City"},{"Raw Address":"252 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"416 TATA ERRO Parada Valenzuela City"},{"Raw Address":"25 TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"187 CAPT. CRUZ PARADA Valenzuela City"},{"Raw Address":"#39C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"315 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"174 MOLAVE Parada Valenzuela City"},{"Raw Address":"448 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"255 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"325 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"362 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"1819 PEARLS ST. Parada Valenzuela City"},{"Raw Address":"422 BURGOS ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"451 ZAMORA ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"170 MOLAVE ST Parada Valenzuela City"},{"Raw Address":"446 F. GOMEZ Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 12 BURGOS STREET Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE ST. Parada Valenzuela City"},{"Raw Address":"56 P. DE GUZMAN TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"142 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"315 JIMENEZ CMPD. Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"150 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"28 CAPT. CRUS ST. Parada Valenzuela City"},{"Raw Address":"1 MO DIZON COMP. TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"310 JIMENEZ Parada Valenzuela City"},{"Raw Address":"031 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"407 P.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"168 A CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE ST. HIYAS Parada Valenzuela City"},{"Raw Address":"440 RUMARAO COMP. Parada Valenzuela City"},{"Raw Address":"154 NARRA ST Parada Valenzuela City"},{"Raw Address":"244 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"297-D TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"96 PARADA ST. PARADA Valenzuela City"},{"Raw Address":"172 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"310 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"118 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"470-A KAINGIN Parada Valenzuela City"},{"Raw Address":"135 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"FORTUNE Village 4 RAMON ST. PARADA Valenzuela City"},{"Raw Address":"FATIMA COMP. PARADA RD. Parada Valenzuela City"},{"Raw Address":"407 P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"173 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"247 DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"24TH STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"443 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"BLOCK 5 LOT 20 GINTONG SILANGAN F. Parada Valenzuela City"},{"Raw Address":"215 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"207 CALLE ONSE DULO Parada Valenzuela City"},{"Raw Address":"27 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"409 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"41 B TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"130 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"2 TINDALO ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"207 FELEZA ST. Parada Valenzuela City"},{"Raw Address":"24TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"546 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"246 C S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"LOT 5 BLK 10 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"012 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"141 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"243 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"340 Fortune Village 5 21ST STREET Parada Valenzuela City"},{"Raw Address":"MERCURY STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"357 J. FRANCISO ST. Parada Valenzuela City"},{"Raw Address":"351 P. FRNACISCO S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"199 BENMARIE 21ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"425 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"121 C CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"175 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"#9E PARADA ROAD Parada Valenzuela City"},{"Raw Address":"110 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"245 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"158 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"178 KAMAGONG Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B3 L 3 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"BLK. 5 LOT 14 GINTONG SILANGAN F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"289 D SANTOLAN ROAD Parada Valenzuela City"},{"Raw Address":"406 BANDINO ST P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"42 PARADA RD. Parada Valenzuela City"},{"Raw Address":"32 B 258 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"327 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"112 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"42 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"195 19TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"199 21ST ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B1 L13 349 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"168- SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"071 FORTUNE Village 6 PARADA Valenzuela City"},{"Raw Address":"207 FILEZA BUKID Parada Valenzuela City"},{"Raw Address":"204 B ANTHONY STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"A CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"291 PARADA RD. Parada Valenzuela City"},{"Raw Address":"DR. 1 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"37 A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"268 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"324 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"155 ALICIA FV 4 Parada Valenzuela City"},{"Raw Address":"43 PARADA RD. Parada Valenzuela City"},{"Raw Address":"236 7TH STREET Parada Valenzuela City"},{"Raw Address":"471 KABERONG STREET Parada Valenzuela City"},{"Raw Address":"0104 AS8 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"#94 A. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"002 YAKAL ST COR ACACIA Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"351 PINAGPALA F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"405 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"11 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"176 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"154 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"L22 EARTH F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"271 CONSUELO ST. FORTRUNE 4 Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"032 PARADA Valenzuela City"},{"Raw Address":"190 6TH ST. COR. MOLAVE PARADA Valenzuela City"},{"Raw Address":"181 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"234 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"349 CAPT.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"270 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B5 L11 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"329 T.MANANG Parada Valenzuela City"},{"Raw Address":"5TH ST. Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"359 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"114 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"T.EUGENIO RD. PARADA Valenzuela City"},{"Raw Address":"410 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"2645 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"10E FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"177 23RD STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"272 PILAR ST. Parada Valenzuela City"},{"Raw Address":"99 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"412 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"25 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"104 LAGDAMEO ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"18 PARAD ROAD Parada Valenzuela City"},{"Raw Address":"405 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"097 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"L19 B3 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"L-5 BLK-06 NARRA ST. Parada Valenzuela City"},{"Raw Address":"466-C KAINGIN KABERONG Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO 31 EARTH ST. Parada Valenzuela City"},{"Raw Address":"195 CALLE ONSE BO.PARADA Valenzuela City"},{"Raw Address":"19 CARACTA VillageE KAINGIN Parada Valenzuela City"},{"Raw Address":"77 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"182 D MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"141 NARRA STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"203 Parada Valenzuela City"},{"Raw Address":"347 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"266 F 24TH STREET Parada Valenzuela City"},{"Raw Address":"45A EARTH ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"365 F TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"206-4 22ND ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"441 RUMARAO CPD. SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"341 21ST FOTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"225 ABELARDO Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"72 FORTUNE Village 6 PARADA RD. Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"171 SALAZAL Parada Valenzuela City"},{"Raw Address":"084 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"039 D. SANTIAGO RAMON ST. FV4 Parada Valenzuela City"},{"Raw Address":"120 CORNER ST. 25TH ST. Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"224H 7TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"199 - 21 ST. FV5 Parada Valenzuela City"},{"Raw Address":"258 25TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"133 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"212 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"242 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"096 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BL 3 LT 24 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"0351 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"358 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"127 YAKAL ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE GARDEN 21ST FORTUNE Parada Valenzuela City"},{"Raw Address":"371 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"391F P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"37 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"DULO Parada Valenzuela City"},{"Raw Address":"438-SERVILE ROAD Parada Valenzuela City"},{"Raw Address":"UNIT 5 ALFONSO APARTMENT M. DE GULA Parada Valenzuela City"},{"Raw Address":"219 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"456 SERVICE ROAD. Parada Valenzuela City"},{"Raw Address":"009 R.CABRAL ST. Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"162 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 22 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"20 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"313 MENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"JADE CORNER SAPPHIRE Parada Valenzuela City"},{"Raw Address":"413 H P.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"# 9 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"277 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"411-B P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"341 21ST BENMARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"257 S. DE GUZMA ST.N Parada Valenzuela City"},{"Raw Address":"452 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"230 YAKAL COR. NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"ILOCTO C5 Parada Valenzuela City"},{"Raw Address":"25TH STREET FORTUNE V Parada Valenzuela City"},{"Raw Address":"8 IPIL ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"197 19TH ST. COR. 21ST. Fortune Village 5 BO. Parada Valenzuela City"},{"Raw Address":"214 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"222 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"98 KAMAGONG ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"194 6TH STREET Parada Valenzuela City"},{"Raw Address":"# 94 A. FELEZA ST. Parada Valenzuela City"},{"Raw Address":"338 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"109 25TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"# 26 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"220 C 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"207 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"151 ALICIA Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"230 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"274 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"#18 GP WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"4180 NARRA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"199 6TH ST. FV5 Parada Valenzuela City"},{"Raw Address":"132 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"161 SALAZAR ST. BO. PARADA Valenzuela City"},{"Raw Address":"237 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"412 TATAERO 6 Parada Valenzuela City"},{"Raw Address":"257 M DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"BLOCK 5 LOT10 JADE ST HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"199 21ST. BENMARIE COMP. FORTUNE Parada Valenzuela City"},{"Raw Address":"267 S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"430 GOME ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"123 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"L-31 B-8 PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"359 J. FRNACISCO ST. Parada Valenzuela City"},{"Raw Address":"Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"50 PARADA RD. Parada Valenzuela City"},{"Raw Address":"187 FELIZA Parada Valenzuela City"},{"Raw Address":"90 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"DR 1 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"122 CONSUELO ST. FORTUNE 04 Parada Valenzuela City"},{"Raw Address":"290 CAINGIN ST. Parada Valenzuela City"},{"Raw Address":"442 P. GOMEZ Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"44 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"377 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"273 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"114 YAKAL ST. Parada Valenzuela City"},{"Raw Address":"B2L14 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"318 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"173 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"153 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"26. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"95 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 7 FORTUNE Village Parada Valenzuela City"},{"Raw Address":"393 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"79 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"136 KAMAGONG STREET Parada Valenzuela City"},{"Raw Address":"91-B S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"10 E.FRANCISCO Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"325 TANDANG ST. Parada Valenzuela City"},{"Raw Address":"185 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"NARRA ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"330 T. MANANG STREET Parada Valenzuela City"},{"Raw Address":"240 T. MANANG ST Parada Valenzuela City"},{"Raw Address":"099 PARADA Valenzuela City"},{"Raw Address":"507 23ST FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"24 A CAPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"251 25TH ST. Parada Valenzuela City"},{"Raw Address":"169 ACACIA STREET Parada Valenzuela City"},{"Raw Address":"F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"36 B. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"204 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"144 DALAWAN ST.PARADA Valenzuela City"},{"Raw Address":"113 LAGDAMEO ST. FV. 4 PARADA Valenzuela City"},{"Raw Address":"199 21 ST. Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"#27 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"189-24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#39 PARADA RD. Parada Valenzuela City"},{"Raw Address":"50 PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"139 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"109 E. LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"LOT 15 A207 FELISA BUKID Parada Valenzuela City"},{"Raw Address":"0274 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"207 LOT15 AREA-A FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"168 MOLAVE Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"37 C PARADA RD. PARADA Valenzuela City"},{"Raw Address":"203B VENUS ST. Parada Valenzuela City"},{"Raw Address":"#41 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"150 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"107 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"184 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"30 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"421 ZAMORA ST Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"190-C 6TH ST. COR KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"272 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"234 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"279 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"124 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE 05 Village Parada Valenzuela City"},{"Raw Address":"316 JIMINEZ CMPD. Parada Valenzuela City"},{"Raw Address":"207 FELIZA ST. PARADA BUKID Parada Valenzuela City"},{"Raw Address":"0192 E 6TH ST. FORTUNE Village PH 6 Parada Valenzuela City"},{"Raw Address":"229 18TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST. FV4 Parada Valenzuela City"},{"Raw Address":"100 A CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"121 LAGDAMEO ST.Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"404 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"160 NARRA ST. COR. 6TH ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"334 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"377 18ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"71 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"# 26 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"325 TADANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"230 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"B2 L20 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"4541 MOLAVE ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"23 EUGENIO Parada Valenzuela City"},{"Raw Address":"MM. Parada Valenzuela City"},{"Raw Address":"068 PARADA RD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"486 KAINGEN ST. Parada Valenzuela City"},{"Raw Address":"16 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"454 SERVICE RD. HIYAS SUBD. PARADA Valenzuela City"},{"Raw Address":"155 ALICIA ST. FV4 Parada Valenzuela City"},{"Raw Address":"351 Parada Valenzuela City"},{"Raw Address":"148 DALAWAN Parada Valenzuela City"},{"Raw Address":"0279 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"100 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"34 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"464 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"502 FORTUNE DRIVE COR. 23RD ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"381 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"160 MOLAVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"197 ANTHONY Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"ACASIA ST. KAINGIN RD. PARADA Valenzuela City"},{"Raw Address":"375 TATA ANDRES ST.PARADA Valenzuela City"},{"Raw Address":"290 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"207 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"34 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"DOOR2 M. DE GULA ST Parada Valenzuela City"},{"Raw Address":"20 A F SANTIAGO Parada Valenzuela City"},{"Raw Address":"203 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"242 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"130 KAMAGONG Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"396 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"B5 L8 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"278 PILAR ST Parada Valenzuela City"},{"Raw Address":"7 TATA-ERO ST. Parada Valenzuela City"},{"Raw Address":"341 BO.PARADA Valenzuela City"},{"Raw Address":"242 19TH ST. Parada Valenzuela City"},{"Raw Address":"824 BURGOS ST Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"BLK 03 LOT 12 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"103 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"233 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"442 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"117 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"343 CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"BLK5 LOT10 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"107 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"313 JIMENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"273 PILAR ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"242 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"0258 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"139 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"190 24TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"3 200 CALLE ONCE PARADA Valenzuela City"},{"Raw Address":"243 7 STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"87 BO Parada Valenzuela City"},{"Raw Address":"351 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"81 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"326 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"266 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"467 Parada Valenzuela City"},{"Raw Address":"173 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGO EARTH ST. Parada Valenzuela City"},{"Raw Address":"182 D MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"250B CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"409A P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"171 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"450 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"283 S DE GUZMAN SR. Parada Valenzuela City"},{"Raw Address":"308 MENES Parada Valenzuela City"},{"Raw Address":"146 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"B1L17 PARADA RD EXT. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"19 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"207 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"65 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"205 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"BLK. 5 LOT 17 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"B 4 L 10 F. FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"18 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"85 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"162 MOLABE ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"MOLAVE ST. COR. YAKAL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST Parada Valenzuela City"},{"Raw Address":"165 YAKAL STREET FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"225 Fortune Village 4 ABILARDO ST. Parada Valenzuela City"},{"Raw Address":"F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"283 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"2 PASO DE BLAS Parada Valenzuela City"},{"Raw Address":"418 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"249 7TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"200 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"144 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"146 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"L10 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"403 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"85 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"315 MENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 1 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"440 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"471 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"154 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"132 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"339 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPOUND FORTUNE Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 4 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"400 SAN ANDRES STREET Parada Valenzuela City"},{"Raw Address":"297 D T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"LOT 6 BF SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"385 MERCURY ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"052 PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"098 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"269 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"075 GOMEZ ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 6ST. Parada Valenzuela City"},{"Raw Address":"137 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"269 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"39B RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"18223 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"165 FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"301 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"456 -H KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"COR. 23 STREET FV 5 Parada Valenzuela City"},{"Raw Address":"LAGDAMO ST. Parada Valenzuela City"},{"Raw Address":"374 Parada Valenzuela City"},{"Raw Address":"108 RAMON STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B1 L7 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"204 FELISA ST. Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"79 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"45 A F SANTIAGO Parada Valenzuela City"},{"Raw Address":"204 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"68 B PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"BLK 10 LOT 12 7TH STREET Parada Valenzuela City"},{"Raw Address":"248 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"178 RAMON ST. FOERTUNE 4 Village Parada Valenzuela City"},{"Raw Address":"320 D S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"27 DIAMOND ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"325 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"LOT 6 BLK 2 TINADALOST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"241 S. DE GUSMAN ST. Parada Valenzuela City"},{"Raw Address":"340 20TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"260 TATA ROMAN S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"141 FORTUNE DRIVE FORTUNE V Parada Valenzuela City"},{"Raw Address":"123 TATA ANDREZ ST. Parada Valenzuela City"},{"Raw Address":"446 GOMEZ ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"030 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"252 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO ST. MANUKAN Parada Valenzuela City"},{"Raw Address":"444 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"39 D. SANTIAGO COMPOUND Parada Valenzuela City"},{"Raw Address":"163 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"57 PARADA ROAD Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"293 A.ILOCTO ST. PARADA Valenzuela City"},{"Raw Address":"#002 YAKAL ST. Parada Valenzuela City"},{"Raw Address":"171 RAMON ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"220 D 21ST ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"225 TOMASA ST. PARADA Valenzuela City"},{"Raw Address":"202 FELIZA ST Parada Valenzuela City"},{"Raw Address":"297-C TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"0118 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"2675 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"315 MENES COMP. PARADA Valenzuela City"},{"Raw Address":"442 ROSILLAS ST. Parada Valenzuela City"},{"Raw Address":"276 SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"179 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"7 ALFONSO APARTMENT Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"LOT 1 BLCK 7 PARADA RD. Parada Valenzuela City"},{"Raw Address":"B1 L12 BUGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"199 Fortune Village 5 21ST Parada Valenzuela City"},{"Raw Address":"438 SERVICE ROAD. Parada Valenzuela City"},{"Raw Address":"1956 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"168 Parada Valenzuela City"},{"Raw Address":"210 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"096 FORTUNE Village Parada Valenzuela City"},{"Raw Address":"68 PARADA RD. Parada Valenzuela City"},{"Raw Address":"CA[T.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"#2 TINDALO ST. Parada Valenzuela City"},{"Raw Address":"321-1 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"8 SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"175 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"117 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"075 GOMEZ ST. FORTUNE Village 07 Parada Valenzuela City"},{"Raw Address":"247 DE GUZM Parada Valenzuela City"},{"Raw Address":"UNIT 3 SALAZAR Parada Valenzuela City"},{"Raw Address":"122 CALLE ONCE ST. Parada Valenzuela City"},{"Raw Address":"234 19 Fortune Village 5 ST Parada Valenzuela City"},{"Raw Address":"091 FORTUNE DRIVE ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"207 CALLE ONSE FELISA BUKID Parada Valenzuela City"},{"Raw Address":"1 F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"279 Parada Valenzuela City"},{"Raw Address":"59 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"162E SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"103 DE GULA ST. Parada Valenzuela City"},{"Raw Address":"164 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"006 PARADA Valenzuela City"},{"Raw Address":"BLK 1 LOT 3 SAPPHIRE ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"151DALAWAN ST Parada Valenzuela City"},{"Raw Address":"137 KAINGIN Parada Valenzuela City"},{"Raw Address":"301 7TH ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"# 95 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"525 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"123 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"F. FRANCISO ST. Parada Valenzuela City"},{"Raw Address":"9 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"56 PARADA ROAD CORNER IPIL ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 4 TANDANG MANANG HOA Parada Valenzuela City"},{"Raw Address":"S-8104 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"290 ILOCTO COMPOUND Parada Valenzuela City"},{"Raw Address":"447 GOMEZ Parada Valenzuela City"},{"Raw Address":"143 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"70 PARADA RD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"BLK.1 LOT 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"411 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"117 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"23 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"002 Parada Valenzuela City"},{"Raw Address":"139 DALAWAN Parada Valenzuela City"},{"Raw Address":"39 K RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"039 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 7 LOT 11 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"170 B SALAZAR ST Parada Valenzuela City"},{"Raw Address":"1314A TATA ANDRES Parada Valenzuela City"},{"Raw Address":"349 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"248 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"237-S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"087 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"26 MARS F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"247 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"FATIMA COMPOUND Parada Valenzuela City"},{"Raw Address":"L1 B2 S. DE GUZMAN ST. VillageA Parada Valenzuela City"},{"Raw Address":"415 TATA ERO ST.3 Parada Valenzuela City"},{"Raw Address":"BL 1 LT 12 GINTONG SILANGAN 349 FRANCISCO Parada Valenzuela City"},{"Raw Address":"39 D PARADA ROAD Parada Valenzuela City"},{"Raw Address":"297 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"14 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"351 CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"286 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"161 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"192 M.DE GULA ST. PARADA Valenzuela City"},{"Raw Address":"402 SAN ANDRES STREET Parada Valenzuela City"},{"Raw Address":"256 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"185 RAMON ST. FV4 Parada Valenzuela City"},{"Raw Address":"91 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"108-B RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"56 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 21ST ST. Parada Valenzuela City"},{"Raw Address":"457 INT. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"09 BO PARADA RD Parada Valenzuela City"},{"Raw Address":"281-A S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"164 Parada Valenzuela City"},{"Raw Address":"93 C CAP. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"299 PARADA JIMENEZ ST. Parada Valenzuela City"},{"Raw Address":"268 25TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. Parada Valenzuela City"},{"Raw Address":"131 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"31 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"141 Fortune Village 5&6 Village Parada Valenzuela City"},{"Raw Address":"FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"202 MOLAVE ST Parada Valenzuela City"},{"Raw Address":"LOT 8 MERCURY ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"0260 I TATA ROMAN S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"114 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"188 MOLAVE COR. 6TH ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"201 SELIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"9 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"269 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMP. Parada Valenzuela City"},{"Raw Address":"290 M. ILOCTO COMPOUND Parada Valenzuela City"},{"Raw Address":"INT. ZAMORA ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"Village 5 Parada Valenzuela City"},{"Raw Address":"267 PETRA ST S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"136 E. LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"125 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"246 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"307 PEARL ST. HIYAS SUBD. PARADA Valenzuela City"},{"Raw Address":"08 CALLE ONCE ST. Parada Valenzuela City"},{"Raw Address":"357 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"204 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"B1 L7 PARADA ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"122 B. CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"96 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"402 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"001 PARADA RD. Parada Valenzuela City"},{"Raw Address":"341 20TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"SUBDIVISION Parada Valenzuela City"},{"Raw Address":"LOT 11 BLK 5 JADE ST. Parada Valenzuela City"},{"Raw Address":"118 DOOR 4 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"361 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"LOT 10 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"0094B C CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"096 FORTUNE Village 5 ST. PARADA Valenzuela City"},{"Raw Address":"456 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"198 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"320 T.MANANG PARADA Valenzuela City"},{"Raw Address":"B4L12 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"125 CONSUELO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"203 ALICIA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"95 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"137 FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"455 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"82 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"123A KAMAGONG ST. FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"353 J.FRANCISCO Parada Valenzuela City"},{"Raw Address":"389 S.DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"94-C FELIZA ST. Parada Valenzuela City"},{"Raw Address":"175 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"0250 DR2 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"DE GUZMAN CMPD ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"39 RAMON Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"170SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"257 RIZALINA ST. Parada Valenzuela City"},{"Raw Address":"184 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#99 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"198 Parada Valenzuela City"},{"Raw Address":"310 D JIMENEZ COMPOUND ST. Parada Valenzuela City"},{"Raw Address":"153 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"411 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"8 C F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. DOON COMPD. Parada Valenzuela City"},{"Raw Address":"FORTUNE7 Parada Valenzuela City"},{"Raw Address":"23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"135 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"177 ST. CAPT. CRUZ PARADA Valenzuela City"},{"Raw Address":"195 FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"824 BURGOS ST. F.V 7 Parada Valenzuela City"},{"Raw Address":"028 PARADA Valenzuela City"},{"Raw Address":"442 GOMEZ ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"161 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"237 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"467 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"12 5TH ST. FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"99 VINUS ST. Parada Valenzuela City"},{"Raw Address":"341 21ST BENMARIE AGLEHAM COMPOUND Parada Valenzuela City"},{"Raw Address":"110 LAGDAMEO FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"404 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"85 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"387 IMPONG JUANA ST. Parada Valenzuela City"},{"Raw Address":"404 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"299 BO. Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 3 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"192E 6ST. FORTUNR Village 5 Parada Valenzuela City"},{"Raw Address":"100 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"467 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"154 ALICIA STREET Parada Valenzuela City"},{"Raw Address":"213 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"175 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"199 6TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"262 Parada Valenzuela City"},{"Raw Address":"289-D S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"171 MOLAVE ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"0345 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. F.SANTIAGO COMPD. Parada Valenzuela City"},{"Raw Address":"187 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"266 24TH STREET Parada Valenzuela City"},{"Raw Address":"3 B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"244 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B5 L7 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"308 JIMENEZ ST. Parada Valenzuela City"},{"Raw Address":"119 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"391 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"91 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 1 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"443 B SERVICE RD. Parada Valenzuela City"},{"Raw Address":"26 SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"269 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39-D SANTIAGO COMPD. FV4 Parada Valenzuela City"},{"Raw Address":"97 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"417 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. PARADA Valenzuela City"},{"Raw Address":"194 6 STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"187-A FELISA ST. PARADA Valenzuela City"},{"Raw Address":"31F SANTIANGO VENUS ST Parada Valenzuela City"},{"Raw Address":"173 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"0014 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"237 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 7 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"178 MOLAVE ST Parada Valenzuela City"},{"Raw Address":"145 C NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"196 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"S. DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"86 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"260 TATA ROMAN Parada Valenzuela City"},{"Raw Address":"260 RIZALINA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"027 PARADA RD. Parada Valenzuela City"},{"Raw Address":"411 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"260 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"132 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"139 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"INT. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"88 CPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"111 UNIT B KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"194 COR. 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"167 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"389 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"93-A CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"119B PEARL ST. Parada Valenzuela City"},{"Raw Address":"223 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"192 RAMON ST.FV 4 Parada Valenzuela City"},{"Raw Address":"93-A CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"393 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"407 TANDANG Parada Valenzuela City"},{"Raw Address":"411 C P.DE GUZMAN ST. TATA ERO Parada Valenzuela City"},{"Raw Address":"140-B E FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"440 P. GOMEZ ST. FORTUEN 7 Parada Valenzuela City"},{"Raw Address":"E EUGENIO ST Parada Valenzuela City"},{"Raw Address":"148 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"287 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"386 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"101A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"ST Parada Valenzuela City"},{"Raw Address":"367 FELISA Parada Valenzuela City"},{"Raw Address":"14 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"FORT Village Parada Valenzuela City"},{"Raw Address":"169D 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"460 GOMEZ STREET Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"86 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"13 Parada Valenzuela City"},{"Raw Address":"407 P.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"297B TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"440 RUMARAO COMPOUND SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"B1 Parada Valenzuela City"},{"Raw Address":"259 M DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"399 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"238 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"356 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"245 ABELARDO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"174 FELISA Parada Valenzuela City"},{"Raw Address":"351 PINAGPALA F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"9 PLOTO ST. F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"315 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"030 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"12 B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"444 SERVICE RR. Parada Valenzuela City"},{"Raw Address":"123-2 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"88 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"90 ADOR STREET Parada Valenzuela City"},{"Raw Address":"327 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"357 J. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"186 UNIT 3 FELIZA ST Parada Valenzuela City"},{"Raw Address":"369 TATA ANDRESS STREET Parada Valenzuela City"},{"Raw Address":"200 FORTUNE DR. ST. Parada Valenzuela City"},{"Raw Address":"154 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"179 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"233 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"406 T. MANANG Parada Valenzuela City"},{"Raw Address":"184 FELISA ST. Parada Valenzuela City"},{"Raw Address":"271 Parada Valenzuela City"},{"Raw Address":"185 FELISA Parada Valenzuela City"},{"Raw Address":"384 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"268 FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"243 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"241 19TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"BLK 6 LOT 4 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"18 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"111 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"369 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"ADOR ST. Parada Valenzuela City"},{"Raw Address":"172 MOLAVE ST Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"310 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"AURORA COMP. S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"14 B. PARADA RD. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE GARDEN 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 8 TMHOA Parada Valenzuela City"},{"Raw Address":"15 DIAMOND ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"69 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"199 21ST AGLEHAM COMPD. Parada Valenzuela City"},{"Raw Address":"3498 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"476 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. FV 4 Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"094 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"309 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"180 23RD ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"141 NARRA ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"23 T EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"9001 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"240 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"4792 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"227 A BELARDO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"275 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"38 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"204 BF SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"468 KINGIN ST. Parada Valenzuela City"},{"Raw Address":"347-F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"341 20TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CALLE ONSE ST. PARADA Valenzuela City"},{"Raw Address":"220 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"311 MENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"124 E. LAGDAMEO STREET Parada Valenzuela City"},{"Raw Address":"225 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"469 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"199 21ST FV5 Parada Valenzuela City"},{"Raw Address":"243 PACING Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 5 TMHOA Parada Valenzuela City"},{"Raw Address":"0250 UNIT 11 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"333 T.MANANG ST. BO.PARADA Valenzuela City"},{"Raw Address":"ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"352 J.FRANCISCO Parada Valenzuela City"},{"Raw Address":"#283 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"95 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"188 MOLAVE ST. CORNER 6TH ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"275 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"138 E. LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"143 DALAWAN STREET Parada Valenzuela City"},{"Raw Address":"DE GULA APT. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"144 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"377 18 STREET Village Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"199 21 ST. BENMARIE COMP. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"020 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"BLK 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"264 19TH ST.FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"20 F. SANTIAGO EARTH ST. Parada Valenzuela City"},{"Raw Address":"195 KALYE ONSE Parada Valenzuela City"},{"Raw Address":"26 NARRA ST. FV 5&6 Parada Valenzuela City"},{"Raw Address":"402 7TH ST. Parada Valenzuela City"},{"Raw Address":"247 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"269 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"75 GOMEZ STREET FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"279 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"203 VENUS ST. E-E COMP. Parada Valenzuela City"},{"Raw Address":"504 FORTNE DRIVE Parada Valenzuela City"},{"Raw Address":"168 DOON COMP. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"286 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"317 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"349F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"004 BO. Parada Valenzuela City"},{"Raw Address":"27 A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"384 S. DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"394 SAN ANDRES Parada Valenzuela City"},{"Raw Address":"194 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"#97 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"260 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"101 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"247 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"456 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"346 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"1106 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"FORT Village 4 Parada Valenzuela City"},{"Raw Address":"135 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"88 SAPPHIRE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"115 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"132 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"162-D SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"203 VENUS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"246 PARADA RD. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"CALLE 11 BUKID ST. Parada Valenzuela City"},{"Raw Address":"130 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"244 7TH ST. FV5 Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"243 7TH ST. Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"412 PARADA Valenzuela City"},{"Raw Address":"214 IPIL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"098 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"63 PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"247-C S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"141DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"190D 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"258 GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"306 CAPT. DAET CPD. PARADA Valenzuela City"},{"Raw Address":"234 DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"291 Parada Valenzuela City"},{"Raw Address":"178 RAMON STREET Parada Valenzuela City"},{"Raw Address":"113 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"8 FIFTH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"100 A CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"B1 L10 E. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"050 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"272 S DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"141 UNIT 4 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"GINTONG SILANGAN F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"260 TATA ROMAN ST. Parada Valenzuela City"},{"Raw Address":"203 6TH STREET FORTUNE VillageE 5-6 Parada Valenzuela City"},{"Raw Address":"083 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"411 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"PEARL ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"225 DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"70 PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"274 S.DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"274 BO.PARADA Valenzuela City"},{"Raw Address":"10 PARADA RD. Parada Valenzuela City"},{"Raw Address":"407 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"B1L8 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"10 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"390 Parada Valenzuela City"},{"Raw Address":"403 FORTUNE Village PARADA Valenzuela City"},{"Raw Address":"165 SALAZAR ST. BO. PARADA Valenzuela City"},{"Raw Address":"412 A P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"111-A E.LAGDAMEO ST. PARADA Valenzuela City"},{"Raw Address":"TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"94 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"324 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"73-B PARADA RD. EXT FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"187 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"415 TATA ERO Parada Valenzuela City"},{"Raw Address":"116 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"359 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"0250 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"59 C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"199 AGLEHAM COMPD. 21ST ST. Parada Valenzuela City"},{"Raw Address":"227 ABELARDO FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"4 Parada Valenzuela City"},{"Raw Address":"257 M. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"410 A-P. DE GUZMAN ST. VAL. M.M. Parada Valenzuela City"},{"Raw Address":"103 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"33 E. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"0346 FELISA ST. Parada Valenzuela City"},{"Raw Address":"24 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"19 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"275 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"172 MOLAVE ST Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"018 EUGENIO Parada Valenzuela City"},{"Raw Address":"319 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"863 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"316 MENES COMPOUND Parada Valenzuela City"},{"Raw Address":"31 UNIT 4&5 KAMAGONG ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"271 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"8F CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"23RD ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"255 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"80 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"196 MALAVE ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"355 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"124 B CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"24TH BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"425 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"24 B F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"271 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"438 SERVICE RD.PARADA Valenzuela City"},{"Raw Address":"36 C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"40- P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"RASILIA 438 PARADA Valenzuela City"},{"Raw Address":"39-C RD. Parada Valenzuela City"},{"Raw Address":"155 ALICIA STREET Parada Valenzuela City"},{"Raw Address":"315 JIMENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"211 21TH ST. FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"95 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"393 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"212 21ST. ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"E & E COMP. Parada Valenzuela City"},{"Raw Address":"390 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"223 ABELARDO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"455 ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"056 PARADA RD. FV6 Parada Valenzuela City"},{"Raw Address":"352 G. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"183 23RD. ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. DOON COMP. Parada Valenzuela City"},{"Raw Address":"202 6TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"176 23RD ST. Parada Valenzuela City"},{"Raw Address":"190 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"89 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"199 21 ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"301 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"254 25TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"245 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"90 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"36 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"B5 L11 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"104 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"441 SERVICE ROAD RUMARAO COMP. Parada Valenzuela City"},{"Raw Address":"86 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"94 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"NO 172 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"252-A BLOCK 2 LOT 2 S. DE GUZMANS ST. Parada Valenzuela City"},{"Raw Address":"14-B PEARL ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"196 22ND ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"150 ALICIA ST. PARADA Valenzuela City"},{"Raw Address":"188 RAMON ST Parada Valenzuela City"},{"Raw Address":"215 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"248 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"17 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"199 B CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"17 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 23 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"440 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"117 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"007 F.SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"168 DOON COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"320 Parada Valenzuela City"},{"Raw Address":"8 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"460 P GOMEZ ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"148 NARRA ST. Parada Valenzuela City"},{"Raw Address":"E. SANTIAGO Parada Valenzuela City"},{"Raw Address":"30 B. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"140 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"90 CAPT.CRUZ Parada Valenzuela City"},{"Raw Address":"#170 SALAZAR T. DOON CMPD Parada Valenzuela City"},{"Raw Address":"009 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"185C FELIZA ST. Parada Valenzuela City"},{"Raw Address":"T.EUGENIO Parada Valenzuela City"},{"Raw Address":"121 CONSUELA ST.FV4 Village Parada Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B-4 L-28 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"240 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"185 B FELIZA ST Parada Valenzuela City"},{"Raw Address":"139 FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"121 CONSUELO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"349 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"365B TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. FORTUNE VillageE Parada Valenzuela City"},{"Raw Address":"20 SALAZAR Parada Valenzuela City"},{"Raw Address":"T. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"185 FELIZA ST Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ CMPD. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"21 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"25 EUGENIO STREET Parada Valenzuela City"},{"Raw Address":"314 BO.PARADA Valenzuela City"},{"Raw Address":"FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"105 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"464-A KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"279 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"218 FORTUNE Village Parada Valenzuela City"},{"Raw Address":"142 DALAWAN Parada Valenzuela City"},{"Raw Address":"310 MENES ST. Parada Valenzuela City"},{"Raw Address":"RUMARAO COMP. Parada Valenzuela City"},{"Raw Address":"127 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"118 C CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"#80 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"153 PINAGPALA PHASE 2 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"399 SAN ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"96 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"280 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"170 DOON COMPOUND SALAZAR ST Parada Valenzuela City"},{"Raw Address":"075 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"276 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"256 RIZALINA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"251 25TH ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"182 23RD ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"440 RUMARAO COMP. SERVICE RD Parada Valenzuela City"},{"Raw Address":"091 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES B.O Parada Valenzuela City"},{"Raw Address":"291 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"130 NARRA ST. Parada Valenzuela City"},{"Raw Address":"23RD ST. FORTUNE Village 5 B PARADA Valenzuela City"},{"Raw Address":"19TH ST. Parada Valenzuela City"},{"Raw Address":"271 A. MARIA ST. Parada Valenzuela City"},{"Raw Address":"307 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"225 AVELARDO ST. Parada Valenzuela City"},{"Raw Address":"230 EMBUSCADO COMP. Parada Valenzuela City"},{"Raw Address":"54 KAMAGONG STREET Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"330 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"413 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"L16 B5 349 F.FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"116 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"75 PARADA ROAD FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"NO. 199 21 ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"181 RAMON ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"6 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"60 PARADA RD. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"#113 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"157 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"14 DIAMOND ST HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"325 PARADA Valenzuela City"},{"Raw Address":"158 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"207 22ND ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 18 PEARL HIYAS Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"415 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"237 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"26TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"067 PARADA ST. Parada Valenzuela City"},{"Raw Address":"126 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"110 KAMAGONG Parada Valenzuela City"},{"Raw Address":"207 22ND ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"18 GP ST. WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"315 JIMENEZ Parada Valenzuela City"},{"Raw Address":"341 PARADA 2OTH ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"LOT 8 BLK.3 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"116 E.LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"888 MOLAVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"414 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"186 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"412 ZAMORA STREET Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"402 7TH ST. FV. 5 PARADA RD. Parada Valenzuela City"},{"Raw Address":"397 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"423 ZAMORA ST FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"224 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"111-A E.LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"88 D CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"BF SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"182 23RD ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"248 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"463 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"351 PHASE 2 PINAGPALA F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"140 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"320S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"207 PILISA BUKID Parada Valenzuela City"},{"Raw Address":"LE 116 CAPT. CRUZ ST. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"B1L10 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"123 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"6 NARRA ST. Parada Valenzuela City"},{"Raw Address":"12-B KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"143 CAPT. CRYZ ST. Parada Valenzuela City"},{"Raw Address":"207 ST. FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"103 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"227 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"165 UNIT 4 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"115 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"324 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"260 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"Village 6 Parada Valenzuela City"},{"Raw Address":"217 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 11 SAPPHIRE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"103 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"87 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"234 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"87 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"112 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"GINTONG SILANG F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"24TH ST. FORTUNE5 Parada Valenzuela City"},{"Raw Address":"273 PILAR Parada Valenzuela City"},{"Raw Address":"171 RAMON ST. FORTUNE Village IV Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGOP ST. Parada Valenzuela City"},{"Raw Address":"#88 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"235 S Parada Valenzuela City"},{"Raw Address":"466-C KABERONG KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"439 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"01 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"244 7TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"242 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"Valenzuela City. Parada Valenzuela City"},{"Raw Address":"282 PILAR ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"364 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"018 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"9 5TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"8 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"407 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"02 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"280 PILAR ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"332 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"199 6TH ST. FORTUNE Village 6 PARADA Valenzuela City"},{"Raw Address":"188 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"333 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"450 NORTH DIVERSION PARADA Valenzuela City"},{"Raw Address":"258 S.DEGUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"341 20TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"22 ST. FORTUNE Village 5 PARADA RD. Parada Valenzuela City"},{"Raw Address":"204 VENUS ST. Parada Valenzuela City"},{"Raw Address":"98 PARADA ROAD Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"184 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"111 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"#39 A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"347 FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"36A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"130 KAMAGONG ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"0099 B. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"320-E S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"0345 KALYE 11 Parada Valenzuela City"},{"Raw Address":"59 BANDINO CORP. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"456 KAKAWATE ST. Parada Valenzuela City"},{"Raw Address":"290 KAINGIN Parada Valenzuela City"},{"Raw Address":"204 C.F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"442 P. GOMEZ ST Parada Valenzuela City"},{"Raw Address":"345 CAPT. FRANCISCO Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANAG ST. Parada Valenzuela City"},{"Raw Address":"#468 M KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"173 SALAZAR ST. PUROK 1 Parada Valenzuela City"},{"Raw Address":"1F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"407 M DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"504 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"136 E LAGDAMEO ST. Fortune Village 4 VIL Parada Valenzuela City"},{"Raw Address":"308 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"45 A FSANTIAGO Parada Valenzuela City"},{"Raw Address":"001 Parada Valenzuela City"},{"Raw Address":"194 FORTUNE Village 5 CORNER 6 TH ST. Parada Valenzuela City"},{"Raw Address":"068A PARADA RAOD Parada Valenzuela City"},{"Raw Address":"0317 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"86 SALVADOR STREET Parada Valenzuela City"},{"Raw Address":"8 FIFTH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"501 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 43 LOT 23 FORTUNES 5 Parada Valenzuela City"},{"Raw Address":"291 PARADA Valenzuela City"},{"Raw Address":"270 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"94 PARADA RD. Parada Valenzuela City"},{"Raw Address":"199 Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"315 MENEZ COMP. Parada Valenzuela City"},{"Raw Address":"199 21 STREET BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"BLK. 6 LOT 5 GINTONG SILANGAN F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"122 B KAMAGONG Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"# 31 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"187 24TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B 1 L10 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"410 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"13 5TH. ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"307 A PEARL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"15 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"S. DE GUZMAN ST. 215 DAET COMPOUND Parada Valenzuela City"},{"Raw Address":"442 P.GOMEZ ST. FORTUNE Village 7 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"L1 PHASE 2 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"255 TOMASA ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"LOT 9 BLK 1 SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"10 5TH FORTUNE Parada Valenzuela City"},{"Raw Address":"18 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"199 6TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"266 24TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"224 ABELARDO ST.FV 4 Parada Valenzuela City"},{"Raw Address":"PILAR ST. FORTUNE Village4 MALINTA Valenzuela City Parada Valenzuela City"},{"Raw Address":"204 ANTHONY STREET Parada Valenzuela City"},{"Raw Address":"FELIZA ST Parada Valenzuela City"},{"Raw Address":"228 18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"409 P. DEGUZMAN ST Parada Valenzuela City"},{"Raw Address":"290 PARADA Valenzuela City"},{"Raw Address":"130 CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"315 MENES COMPOUND Parada Valenzuela City"},{"Raw Address":"294 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"132 KAMAGONG ST. FORTUNE Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"57 PARADA RD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"165 SALZAR ST Parada Valenzuela City"},{"Raw Address":"78 PARADA RD. EXT. FORTUNE Village 7 Valenzuela City Parada Valenzuela City"},{"Raw Address":"355 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"B3 L2 GINTONG SILANGAN 349 FRANCISCO Parada Valenzuela City"},{"Raw Address":"FORTUNE Village 4. PARADA Valenzuela City"},{"Raw Address":"054 PARADA ROAD CORNER FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"275 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"457 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"188 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"22 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"199 BENMARIE AGLEHAM COMPOUND Parada Valenzuela City"},{"Raw Address":"272 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"274 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"132 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"091 DOOR 3 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"COR. KAMAGONG Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"322 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"290 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 7 349 F. FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"34A F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"170 SALAZAR Parada Valenzuela City"},{"Raw Address":"LOT 20 A F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"259 25 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"246 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"488 ZAMORA STREET Parada Valenzuela City"},{"Raw Address":"78B PARADA Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"035 SALVADOR ST. PARADA Valenzuela City"},{"Raw Address":"039 D.SANTIAGO COMP. RAMON ST. F.V.PH4 Parada Valenzuela City"},{"Raw Address":"88 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"FORTUNE5 Parada Valenzuela City"},{"Raw Address":"258 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"278 SANTOLAN RD Parada Valenzuela City"},{"Raw Address":"KAINGIN RD. PARADA Valenzuela City"},{"Raw Address":"230 S. DE GUMAN ST. Parada Valenzuela City"},{"Raw Address":"412 TATA ERO ST Parada Valenzuela City"},{"Raw Address":"410 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"COR. CORAL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"59 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"90 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"147 DALAWA ST. Parada Valenzuela City"},{"Raw Address":"117 E. LAGDAMEO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"183 23RD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"406 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"378 A TATA ANDRES Parada Valenzuela City"},{"Raw Address":"386 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"329 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"320 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"90 D. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"426 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"257 25TH ST. Parada Valenzuela City"},{"Raw Address":"153 SALAZAR Parada Valenzuela City"},{"Raw Address":"199F 6TH FORTUNE Village Parada Valenzuela City"},{"Raw Address":"145 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. DOON COMP. Parada Valenzuela City"},{"Raw Address":"456-H KAINGIN Parada Valenzuela City"},{"Raw Address":"FELISA STREET Parada Valenzuela City"},{"Raw Address":"100 CAPT CRUZ DE GULA COMP Parada Valenzuela City"},{"Raw Address":"93C CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"141 DALAWAN STREET Parada Valenzuela City"},{"Raw Address":"271 CONSUELO ST. Parada Valenzuela City"},{"Raw Address":"379 TATA ANDRES ST. BO. Parada Valenzuela City"},{"Raw Address":"255 TOMASA Parada Valenzuela City"},{"Raw Address":"125 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"297 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"272-A S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"199 6TH ST. Parada Valenzuela City"},{"Raw Address":"111-C KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"44 B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"CORNER 120 25TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"91 CAPT. CRUZ PARADA Valenzuela City"},{"Raw Address":"08 MARS ST. Parada Valenzuela City"},{"Raw Address":"299 D JIMENEZ COMPOUND ST. Parada Valenzuela City"},{"Raw Address":"401 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"407B P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"365-G TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"80 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"5 PARADA RD Parada Valenzuela City"},{"Raw Address":"39-C PARADA RD. Parada Valenzuela City"},{"Raw Address":"138 E. LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"0036 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"63 PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"121 CONSUELO FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"141FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST.PARADA Valenzuela City"},{"Raw Address":"145 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"260 TATA ROMAN ST. PARADA Valenzuela City"},{"Raw Address":"390 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"330 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"351 E. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"88 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"39 RAMON Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"352 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FV7 Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"A PEARL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"302 ABELLARDO Parada Valenzuela City"},{"Raw Address":"272 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"13 UNIT 4 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"92 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"LACAY APT.KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"378 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"207 FILIPA BUKID Parada Valenzuela City"},{"Raw Address":"22 AT EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"94 A. FELISA STREEET Parada Valenzuela City"},{"Raw Address":"FORTUNEVillage6 Parada Valenzuela City"},{"Raw Address":"125 CONSUELO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"#33 EARTH ST. E. SANTIAGO Parada Valenzuela City"},{"Raw Address":"94 CAPTAIN ST. Parada Valenzuela City"},{"Raw Address":"1740 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"442 GOMES ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"349 KAINGEN Parada Valenzuela City"},{"Raw Address":"2745 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"177 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"7 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"834 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"131 K. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"153 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"246-C S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"411 A.P. DE GUZMAN TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"267 PETRA ST Parada Valenzuela City"},{"Raw Address":"21 BENMARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"170 UNIT 3 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"66 PARADA ROAD FORTUNE Parada Valenzuela City"},{"Raw Address":"242 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"B3 L6 TINDALO ST FV5 Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 AGLEHAM 2IST ST. Parada Valenzuela City"},{"Raw Address":"465 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"104 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"257 25TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"26 F SANTIAGO MARS ST. Parada Valenzuela City"},{"Raw Address":"88 H CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"252 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"6TH STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"279 PILAR ST.FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"390 TATA ANDRES ST . Parada Valenzuela City"},{"Raw Address":"177 CAPTIAN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"61 PARADA ROAD CORNER FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"255 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"230 1/E DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"240 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"416 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"039 PARADA Valenzuela City"},{"Raw Address":"TATA ERRO Parada Valenzuela City"},{"Raw Address":"319 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"30 PARADA RD. Parada Valenzuela City"},{"Raw Address":"FELISA ST.PARADA Valenzuela City"},{"Raw Address":"79 CAPT.CRUZST. PARADA Valenzuela City"},{"Raw Address":"39 B UNIT 5 RAMON ST. Parada Valenzuela City"},{"Raw Address":"437 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"252 ABELARDO STREET Parada Valenzuela City"},{"Raw Address":"#201 FORTUNE Village 5 6TH ST. Parada Valenzuela City"},{"Raw Address":"97 B CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"2 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"067 C PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"239 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"032 PARADA ST. Parada Valenzuela City"},{"Raw Address":"115 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. PESAHAV Village Parada Valenzuela City"},{"Raw Address":"457 KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"181 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"232 ABELARDO STREET FORTUNE Village NO.4 Parada Valenzuela City"},{"Raw Address":"152 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"12 VENUS ST Parada Valenzuela City"},{"Raw Address":"228 18TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"128 Parada Valenzuela City"},{"Raw Address":"220 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"513 ABCO COMPD. TINDALO ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"L-469 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"455 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"167 6TH ST. Village 5 Parada Valenzuela City"},{"Raw Address":"LOT 9 BLK. 30 UNIT 1 NARRA ST. Parada Valenzuela City"},{"Raw Address":"96 FORTUNE Village 5 ST. PARADA Valenzuela City"},{"Raw Address":"472 PETRA Parada Valenzuela City"},{"Raw Address":"168 ALICIA Parada Valenzuela City"},{"Raw Address":"320 B S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"140 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"470 KAINGIN Parada Valenzuela City"},{"Raw Address":"116 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"100 LAGDAMEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"I207 Parada Valenzuela City"},{"Raw Address":"411 A P. DE GUZMAN TATA ERO Parada Valenzuela City"},{"Raw Address":"320 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"Q-4 289 KAMAGONG ST.PARADA Valenzuela City"},{"Raw Address":"100 CAPT. CRUZ ST. DE GULA CPD. Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG ST.FV 6 PARADA Valenzuela City"},{"Raw Address":"067 Fortune Village 6 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"26 MARS ST F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"094 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"94-D FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"B13 Parada Valenzuela City"},{"Raw Address":"26 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"331 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"127 LAGDAMEO STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"307 PEARL ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"157 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"038 PARADA RD. Parada Valenzuela City"},{"Raw Address":"315 MENES COMP. PARADA VALENZUELA Parada Valenzuela City"},{"Raw Address":"123 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"392 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"L10 &12 UNITE 7ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"365-J TATA ANDRES Parada Valenzuela City"},{"Raw Address":"199 21ST ST. BENMARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"308 A. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"170 DOON COMP SALAZAR ST Parada Valenzuela City"},{"Raw Address":"416 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"1262 KAMAGONG ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"24 T EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"411 C TATA ERRO STREET Parada Valenzuela City"},{"Raw Address":"173 23RD ST. Parada Valenzuela City"},{"Raw Address":"104 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"Valenzuela City Parada Valenzuela City"},{"Raw Address":"334 A. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"342 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"151 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"274 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"197 ANTHONY Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"UNIT 3-A BLOCK 9 LOT 30 NARRA ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"JADE COR. SAPHIRE ST. HIYAS HOME Parada Valenzuela City"},{"Raw Address":"314 MENES CMPD. Parada Valenzuela City"},{"Raw Address":"160 FELIZA ST Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 13 FRANCISCO G. SILANGAN Parada Valenzuela City"},{"Raw Address":"288 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"20 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"468-I KAINGIN ST Parada Valenzuela City"},{"Raw Address":"434 ZAMORA ST. FORTUNE Village 7 BO. Parada Valenzuela City"},{"Raw Address":"51 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. 21 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"230 11-F S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"80 Parada Valenzuela City"},{"Raw Address":"45 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"316 MENES COMP Parada Valenzuela City"},{"Raw Address":"197 ANTHONY ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 20 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"V.P.S. COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"437 ZAMORA STREET Parada Valenzuela City"},{"Raw Address":"BLK2 LOT19 HIYAS SUBD Parada Valenzuela City"},{"Raw Address":"166 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"121 CONSEULO ST. Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST.FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"339 BO. PARADA Valenzuela City"},{"Raw Address":"068 A PARADA ROAD Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"LOT 2 BLK 4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"152 ACACIA ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"415 ZAMORA ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"207 CALLE ONSE BUKID DULO Parada Valenzuela City"},{"Raw Address":"351 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"119 B PEARL ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"351 F.FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"333-C KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"8 SAPPHIRE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"#14 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"172 SALAZAR Parada Valenzuela City"},{"Raw Address":"206 22ND STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"116 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"176 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"122C KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"438 SERVICE RD Parada Valenzuela City"},{"Raw Address":"317 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"0004 BLOCK 4 LOT 3 JADE ST. Parada Valenzuela City"},{"Raw Address":"160 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"115 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"248 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"282 SANTOLAN RD. PARADA Valenzuela City"},{"Raw Address":"8 M LAUREL DRIVE Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"118 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"410 P DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"232 G. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"358 S. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"173 SALAZAR Parada Valenzuela City"},{"Raw Address":"73 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"5 JUPITER ST. Parada Valenzuela City"},{"Raw Address":"LOT5 BLK 5 JADE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"204 22ND ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"237 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"IMPONG JUANA ST. Parada Valenzuela City"},{"Raw Address":"330 T. MANANG Parada Valenzuela City"},{"Raw Address":"0331 D TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"412 ZAMORA ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"280 PILAR ST. Parada Valenzuela City"},{"Raw Address":"297 B. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"127 E.LAGDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"287 SANTOLON RD Parada Valenzuela City"},{"Raw Address":"122 B CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"262 25TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"245 RAMON ST. Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN ST. EXTENSION Parada Valenzuela City"},{"Raw Address":"468 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"257 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"B5 L2 F FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"109 KAMAGONG STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"234 FORTUNE 19 ST. Parada Valenzuela City"},{"Raw Address":"467 A. KAINGIN Parada Valenzuela City"},{"Raw Address":"250 B CALLE ONSE Parada Valenzuela City"},{"Raw Address":"BLK. 4 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"414 TANDANG MANANG ST.PARADA Valenzuela City"},{"Raw Address":"207 FELISA STREET Parada Valenzuela City"},{"Raw Address":"109 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"363 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"3204 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"185-A MOLAVE STREET Parada Valenzuela City"},{"Raw Address":"249 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"232 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"259 ADOR Parada Valenzuela City"},{"Raw Address":"315 JIMENEZ COMPD. ST. Parada Valenzuela City"},{"Raw Address":"70 PARADA ROAD FORTUNE Village Parada Valenzuela City"},{"Raw Address":"BLK. 3 LOT 2 TMHOA Parada Valenzuela City"},{"Raw Address":"357 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"5 5TH ST. Parada Valenzuela City"},{"Raw Address":"12D PARADA ROAD Parada Valenzuela City"},{"Raw Address":"155 C. ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"114 E. LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"150 ALICI ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"67B PARADA RD FORTUNE Village Parada Valenzuela City"},{"Raw Address":"374 TATA ANDREZ STREET Parada Valenzuela City"},{"Raw Address":"254 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"279 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"142 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"116 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"415 TAERO ST. Parada Valenzuela City"},{"Raw Address":"229 18TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"L2 B6 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"199 BAN MARIE ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"308 JIMENEZ COMPOUND ST. PARADA Valenzuela City"},{"Raw Address":"202 ANTHONY ST Parada Valenzuela City"},{"Raw Address":"262 25TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"227 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"442 GOMES STREET Parada Valenzuela City"},{"Raw Address":"257 S.DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"K 39 RAMON STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"501 NARRA ST. FORYUNE 6 Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"KAINGIN RD. Parada Valenzuela City"},{"Raw Address":"390 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"BLK. 3 LOT 13 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"100-E DE GULA COMPOUND Parada Valenzuela City"},{"Raw Address":"444 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE GARDEN 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"202 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"244 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"402 7TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"084 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"91 Parada Valenzuela City"},{"Raw Address":"384 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"216 ANTHONY ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"392 ILOCTO COMP. KAINGIN RD. Parada Valenzuela City"},{"Raw Address":"228 18TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"36 PARADA RD Parada Valenzuela City"},{"Raw Address":"062 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"KABERONG ST. Parada Valenzuela City"},{"Raw Address":"176 23RD FORTUNE Village Parada Valenzuela City"},{"Raw Address":"04 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"266 24TH Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"90 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"371 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"454 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"157 SALAZAR Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 7 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"242 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"190 B. MOLAVE ST. FORTUNE VillageE 6 Parada Valenzuela City"},{"Raw Address":"402 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. BLK 6 LOT 5 GINTONG Parada Valenzuela City"},{"Raw Address":"97B CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"442 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"100 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"ALFONSO APARTMENT Parada Valenzuela City"},{"Raw Address":"248 PARADA RD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"401 SAN ANDRES Parada Valenzuela City"},{"Raw Address":"258 INT. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"186 FELIZA ST Parada Valenzuela City"},{"Raw Address":"409 BIASON COMPD. P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"88 D CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"442 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"152 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"ALFONSO APARTMENT"},{"Raw Address":"148 ZAMORA ST. PARADA Valenzuela City"},{"Raw Address":"BL10 L5 D NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"0343-C FELISA ST. Parada Valenzuela City"},{"Raw Address":"260 RIZALINA ST FORTUNE IV Parada Valenzuela City"},{"Raw Address":"360 J. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"254 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"1 D S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"CALLE ONCE PARADA Valenzuela City"},{"Raw Address":"90 CAPT. CRUZ ST. BO. Parada Valenzuela City"},{"Raw Address":"228 18TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"37 PARADA Valenzuela City"},{"Raw Address":"P DE GUMAN Parada Valenzuela City"},{"Raw Address":"110 CAPATAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"23RD ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"152 ACACIA STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"YAKAL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"027 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE COMPD. 21 ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"269 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"278 7TH FORTUNE VillageE 5 Parada Valenzuela City"},{"Raw Address":"199 21 ST. FV 5 Parada Valenzuela City"},{"Raw Address":"289 SANTOLAN ROAD Parada Valenzuela City"},{"Raw Address":"202 ANTHONY Parada Valenzuela City"},{"Raw Address":"123 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"232 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"164 SALAZAR Parada Valenzuela City"},{"Raw Address":"240 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"0320 B S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"071 PARADA RD. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"199 BEN MARIE COMPOUND 21ST Parada Valenzuela City"},{"Raw Address":"117 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"167 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"234 7TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"42 MARS ST. Parada Valenzuela City"},{"Raw Address":"248 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"BLK 1 LOT 7 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"113 LAGDAMEO Parada Valenzuela City"},{"Raw Address":"137-A NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"116 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"201 CALLE ONSE ST. PARADA Valenzuela City"},{"Raw Address":"121 LAGDAMEO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"360 Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 1 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"YAKAL ST. COR. ACACIA Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"255 TOMASA ST. PARADA Valenzuela City"},{"Raw Address":"22 EUGENIO STREET Parada Valenzuela City"},{"Raw Address":"166 ACACIA ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"WEST SERVICE ROAD CORNER HIYAS Parada Valenzuela City"},{"Raw Address":"179 MOLAVE STREET Parada Valenzuela City"},{"Raw Address":"443 B. WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"62 PARADA RD. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"24 T. EUGENIO Parada Valenzuela City"},{"Raw Address":"376 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"313 JEMENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"244 7TH ST. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. 21ST. Parada Valenzuela City"},{"Raw Address":"046 FORTUNE RD. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"22 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"274 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"513 JIMENES COMP. Parada Valenzuela City"},{"Raw Address":"156 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"283 MARTHA Parada Valenzuela City"},{"Raw Address":"203 B. VENUS STREET Parada Valenzuela City"},{"Raw Address":"# 94 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"88 CAPTAIN CRUZ STREET SAN MIGUEL COMP Parada Valenzuela City"},{"Raw Address":"351 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"440 B. GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"237 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"327 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"149B 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"119 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"#39 D. SANTIAGO COMPD. F4 Parada Valenzuela City"},{"Raw Address":"117 E LAGDAMEO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"31 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"Q4 289 KAMAGONG ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"427 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"135 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"445 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"310 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"359 J.FRANCISCO Parada Valenzuela City"},{"Raw Address":"377 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"33 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"287 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"30 C TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"12 VENUS ST. COMP. Parada Valenzuela City"},{"Raw Address":"43 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"242 19 TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"289 SANTOLAN RD. PARADA Valenzuela City"},{"Raw Address":"362 TATA ANDRESS ST. Parada Valenzuela City"},{"Raw Address":"108 CORNER YAKAL KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"2585 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"144 NARRA ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"244 7TH STRET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"141 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"355 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"63 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"416 TATA-ERO ST. Parada Valenzuela City"},{"Raw Address":"98 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"#40 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"UNIT 1 F. SANTIAGO MERCURY ST. Parada Valenzuela City"},{"Raw Address":"412 TATAERO ST Parada Valenzuela City"},{"Raw Address":"431 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"L5 B10 A NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"138 LAGDAMEO STREET Parada Valenzuela City"},{"Raw Address":"274 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"369 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"199 BEN MARI COMPOUND 22 STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"128 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"27 PARADA RD. Parada Valenzuela City"},{"Raw Address":"165 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"258 INTERIOR M. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"126 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"0011 ADOR ST. Parada Valenzuela City"},{"Raw Address":"106 KAMAGONG ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"162-C SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"111 E LAGDAMEO STREET Parada Valenzuela City"},{"Raw Address":"315 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"322 PEÑA COMP. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"203 6TH ST. FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"228 - B S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"72 FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"247 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"123 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"018 BARRIO Parada Valenzuela City"},{"Raw Address":"BLOCK 3 LOT 16 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"170 C. SALAZAR ST. DOON COMP. Parada Valenzuela City"},{"Raw Address":"297 T.MANANG ST. PARADA Valenzuela City. Parada Valenzuela City"},{"Raw Address":"182 23RD ST. FORTUNE VIILAGE 5 Parada Valenzuela City"},{"Raw Address":"Q487 IPIL STREET Parada Valenzuela City"},{"Raw Address":"187 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"10 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"170 DOON COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"0359 J.F. FRANCISCO ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"254 25TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"276 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"326 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"B-7 L-25 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"20 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"118 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"F.FRANCISCO S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"365 TATA ANDRE ST. Parada Valenzuela City"},{"Raw Address":"PARADA Valenzuela City"},{"Raw Address":"B4L5 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"285 25TH ST. FORTUNE Village PH5 Parada Valenzuela City"},{"Raw Address":"469 PARADA KAINGIN Parada Valenzuela City"},{"Raw Address":"287 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"405 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"317 A T.MANANG ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"267 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"101 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"B 5 L 9 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"198 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"1336 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"CALLE ONCE MARCELO COMPD. Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 10 E FRANCISCO ST. GINTONG Parada Valenzuela City"},{"Raw Address":"122B CALLE ONSE Parada Valenzuela City"},{"Raw Address":"235 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"140 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"238 19TH ST. FORTUNE Village PARADA Valenzuela City"},{"Raw Address":"245 ABELARDO ST. FORTUNE IV Parada Valenzuela City"},{"Raw Address":"277 PILAR ST. PARADA Valenzuela City"},{"Raw Address":"161 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"269 -G S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"239 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"116 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"276 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"187 24TH ST Parada Valenzuela City"},{"Raw Address":"428 SEVICE RD. Parada Valenzuela City"},{"Raw Address":"PARADA ROAD Parada Valenzuela City"},{"Raw Address":"39 B RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"A 94 FELISA ST. Parada Valenzuela City"},{"Raw Address":"117 E LAGDAMEO ST.FV 4 Parada Valenzuela City"},{"Raw Address":"371 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"257 M. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"203 B VENUS ST Parada Valenzuela City"},{"Raw Address":"260 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"119 21 ST. BENMARIE COMP. FORTUNE V Parada Valenzuela City"},{"Raw Address":"24 VENUZ E2E COMP. F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"25TH ST. FORTUNE Village 5. Parada Valenzuela City"},{"Raw Address":"#109 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"31 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"456-G KAKAWATE ST. KAINGIN Parada Valenzuela City"},{"Raw Address":"98 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"458 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"307 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"315 JIMENEZ CMPD Parada Valenzuela City"},{"Raw Address":"241 7TH Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"234 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"274 C S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"243 S. DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"26 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"FELIZA ST.PARADA Valenzuela City"},{"Raw Address":"LOT 10 E&E COMPOUND Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"33A. FATIMA COMP. Parada Valenzuela City"},{"Raw Address":"248 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"J FRANCISCO Parada Valenzuela City"},{"Raw Address":"415 T MANANG ST. Parada Valenzuela City"},{"Raw Address":"274 S Parada Valenzuela City"},{"Raw Address":"37-D PARADA RD. Parada Valenzuela City"},{"Raw Address":"391 P.DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"125 CONSUELO ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"APB MOLAVE ST. 6TH Parada Valenzuela City"},{"Raw Address":"83 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"15 DIAMOND ST HIYAS HOMES SUBD Parada Valenzuela City"},{"Raw Address":"B1L4 FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"257 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"97 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"#1 24 ST. FORTUINE 5 Parada Valenzuela City"},{"Raw Address":"165 SALASZAR ST. Parada Valenzuela City"},{"Raw Address":"320 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"90 ADOR ST. Parada Valenzuela City"},{"Raw Address":"188 24 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"0042 DOON COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"LOT 19 BLK 3 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"430 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"438 BO. PARADA ST. Parada Valenzuela City"},{"Raw Address":"ALICIA ST.FV 4 Parada Valenzuela City"},{"Raw Address":"118 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"206 UNIT 1 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 10 LOT 3 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"B1L2 TMOA Parada Valenzuela City"},{"Raw Address":"438 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"233 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST Parada Valenzuela City"},{"Raw Address":"135 E. LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"#45 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"192 RAMON Parada Valenzuela City"},{"Raw Address":"10 10 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"339 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"204 6TH ST. Parada Valenzuela City"},{"Raw Address":"CALLE ONCE CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"357 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"392-B S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"406 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"154 ALICIA ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"201 A. FELIZA ST. Parada Valenzuela City"},{"Raw Address":"140 CAPT. CRUZ COR E. Parada Valenzuela City"},{"Raw Address":"154 C SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"122 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"106 LAG DAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"232 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"172 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"377 18 ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"150 NARRA ST. PARADA Valenzuela City. Parada Valenzuela City"},{"Raw Address":"274 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"4684 HIYAS HOME SUBD. PEARL ST. Parada Valenzuela City"},{"Raw Address":"BLK 9 LOT 20 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"B 2 L 13 349 FRACISCO ST. Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"168 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"450 CARREON CPD. WEST SERVICE RD Parada Valenzuela City"},{"Raw Address":"246 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"312 INT. MENES CMPD. PARADA Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"199 Parada Valenzuela City"},{"Raw Address":"320 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"138 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"179 23RD STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"204 BF SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"260 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO Parada Valenzuela City"},{"Raw Address":"B2 L14 F. FRANCISCO GUINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"44 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"32 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"170 UNIT 3 DOON COMP. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"362 B TATA ANDRES Parada Valenzuela City"},{"Raw Address":"179 RAMON ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"253 ABVELARDO ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"444 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"149 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST.FV 4 Parada Valenzuela City"},{"Raw Address":"12 VENUS ST. E & E COMP. Parada Valenzuela City"},{"Raw Address":"B4 L9 349 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"273 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"145 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"287 SANTOLAN ROAD Parada Valenzuela City"},{"Raw Address":"29207 FILIZA BUKID Parada Valenzuela City"},{"Raw Address":"BLK5 LOT18 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"4480 25TH ST. Parada Valenzuela City"},{"Raw Address":"254 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"#244 7TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"279 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"154 NARRA ST. Parada Valenzuela City"},{"Raw Address":"#122 B. CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"281 PILAR ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"235 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"L9 T. MANANG Parada Valenzuela City"},{"Raw Address":"5880 CORAL ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"257 RIZALINA ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"89 Parada Valenzuela City"},{"Raw Address":"279-3 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 13 LOT 27 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"281 PILAR ST. Parada Valenzuela City"},{"Raw Address":"249 ABELARDO STREET Parada Valenzuela City"},{"Raw Address":"BLOCK 1 LOT 7 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"88 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"269 INANG PETRA ST. PARADA Valenzuela City"},{"Raw Address":"384 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"235 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"270 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"29 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"239 TANDANG MANANG PARADA Valenzuela City"},{"Raw Address":"365 TATA ANDRESS Parada Valenzuela City"},{"Raw Address":"372 TATA ANDREZ Parada Valenzuela City"},{"Raw Address":"124 LAGDAMEO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"402 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"L-31 B-8 PARADA ROAD FORTUNE VILLAGE Parada Valenzuela City"},{"Raw Address":"407 P DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"118 C. CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"012 PARADA RD. Parada Valenzuela City"},{"Raw Address":"228 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"21ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"BLK 1 LOT 3 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"462 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"416 ZAMORA ST. FV7 Parada Valenzuela City"},{"Raw Address":"165 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"285 S.DEGUZMAN PARADA Valenzuela City"},{"Raw Address":"FILIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"456 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"412 TATA IRRO ST. Parada Valenzuela City"},{"Raw Address":"260 RIZALINA ST. Parada Valenzuela City"},{"Raw Address":"#207 FELIZA BUKID VENUS ST. Parada Valenzuela City"},{"Raw Address":"47 B. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"333 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"56 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"0325 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"186 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"145B NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"#1 24 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"351 CAPT. FRANCISCO EXT. Parada Valenzuela City"},{"Raw Address":"22 IMPONG JUANA ST. S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"#1752 3RD STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"412 TATA ERRO ST Parada Valenzuela City"},{"Raw Address":"347 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"226 18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"412 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"424 BUROGOS Parada Valenzuela City"},{"Raw Address":"358 J. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"431 GOMEZ ST. FORTUNE Village 7 BO. Parada Valenzuela City"},{"Raw Address":"091 FORTUNE DR. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 5 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"424 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"170 RAMON ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"102 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"99 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"94 FELIZA ST Parada Valenzuela City"},{"Raw Address":"440B GOMEZ ST. FORTUNE Village7 MALINTA Parada Valenzuela City"},{"Raw Address":"174 FELIZA Parada Valenzuela City"},{"Raw Address":"152 ALICIA Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"86 SALVADOR ST. PARADA Valenzuela City"},{"Raw Address":"L7 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"B1 L9 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"FELIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"255 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"31F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"234 19TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"307 PARADA PEARL Parada Valenzuela City"},{"Raw Address":"L10 NEPTUNE ST. Parada Valenzuela City"},{"Raw Address":"275 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"25TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CONSUELO ST Parada Valenzuela City"},{"Raw Address":"255 TOMASA PARADA Valenzuela City"},{"Raw Address":"302 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"259 25TH ST. Parada Valenzuela City"},{"Raw Address":"411 TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"145-C NARRA STREET Parada Valenzuela City"},{"Raw Address":"256 25TH STREET Parada Valenzuela City"},{"Raw Address":"66 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"40 PEARL STREET HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"123 KAMAGONG ST Parada Valenzuela City"},{"Raw Address":"140 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"341 20TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"89 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"70 PARADA RD. Parada Valenzuela City"},{"Raw Address":"39 D. SANTIAGO CMPD. FV4 Parada Valenzuela City"},{"Raw Address":"407 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"23 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"L8 B6 GINTONG SILANGANAN F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"412 ZAMORA ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"99 VENUZ ST. F.SNTIAGO Parada Valenzuela City"},{"Raw Address":"270 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"389 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"118 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"283 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"316 MENEZ ST. PARADA Valenzuela City"},{"Raw Address":"125 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"456 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"351-C F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"87 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"243 Fortune Village 5 7TH ST. Parada Valenzuela City"},{"Raw Address":"232 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"403 FORTUNE Village 5 ST. PARADA Valenzuela City"},{"Raw Address":"BLK4 LOT1 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"045 PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"203 B VENUS ST. BO Parada Valenzuela City"},{"Raw Address":"170 DOON COMPOUND SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"468-O KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"BLK 10 LOT41 NARRA ST Parada Valenzuela City"},{"Raw Address":"27A NEW BLOCK 10 NARRA ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"CASTILLO COMPD. FELIZA ST. Parada Valenzuela City"},{"Raw Address":"154 ALICIA FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"313 MENES COMPD. BO. PARADA Valenzuela City"},{"Raw Address":"7 5TH FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"168 ALICIA Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"315 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"384 S.DEGUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"0274 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPD. 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"194 6ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"228 S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"135 LAGDAMEO ST. Fortune Village 4 VillageE Parada Valenzuela City"},{"Raw Address":"451 ZAMORA Parada Valenzuela City"},{"Raw Address":"168 DOON CMP SALAZAR ST Parada Valenzuela City"},{"Raw Address":"246 C S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"258 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE FORTUNE VillageE Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"94 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"456-D KAKAWATE ST. Parada Valenzuela City"},{"Raw Address":"039 RAMON ST. FV4 Parada Valenzuela City"},{"Raw Address":"218 ST. Parada Valenzuela City"},{"Raw Address":"470 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"125 Parada Valenzuela City"},{"Raw Address":"224 21ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 10 JADE ST. SUBD. Parada Valenzuela City"},{"Raw Address":"115 KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"LOT 6B F-SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"474 KA BERONG Parada Valenzuela City"},{"Raw Address":"40 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"BLK 5 LOT 2 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"31 F-SANTIAGO Parada Valenzuela City"},{"Raw Address":"258 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"GOMES ST. Parada Valenzuela City"},{"Raw Address":"CITY MM. Parada Valenzuela City"},{"Raw Address":"63 PARADA ROAD ST Parada Valenzuela City"},{"Raw Address":"5 JUPITER ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"C. PARADA RD. Parada Valenzuela City"},{"Raw Address":"96 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"236 19TH ST. Parada Valenzuela City"},{"Raw Address":"243 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"256 DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"146 Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMPD. PARADA Valenzuela City"},{"Raw Address":"19B ZAMORA ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO ST. LOT 8 Parada Valenzuela City"},{"Raw Address":"242 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"250 ABELARDO ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"1548-A PEARL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"200 A 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"255 TOMASA ST Parada Valenzuela City"},{"Raw Address":"200 CALLE ONCE PARADA Valenzuela City"},{"Raw Address":"114 LAGDAMEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"184 23RD ST. Parada Valenzuela City"},{"Raw Address":"362 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"031 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO MANUKAN Parada Valenzuela City"},{"Raw Address":"18A F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"169 7TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"168 ALICIA ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"246 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"064 PARADA ROAD FORTUNE Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"204 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"T. MORONG ST. Parada Valenzuela City"},{"Raw Address":"104 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"023 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"202 ANTHONY Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"267 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGOMARS ST. Parada Valenzuela City"},{"Raw Address":"171-A SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"098 Fortune Village 5 FORTUNE DR. Parada Valenzuela City"},{"Raw Address":"435 ZAMORA STREET Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"179 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"207 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"215 ANTHONY STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"272 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"230 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"201 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"276 B S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"354 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"199 21ST VF5 Parada Valenzuela City"},{"Raw Address":"134 5TH ST. Fortune Village 5&6 Parada Valenzuela City"},{"Raw Address":"240 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"1028 B. KAMAGONG ST. FV6&5 Parada Valenzuela City"},{"Raw Address":"0468 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"121 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"101 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"193 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"135 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"199 21ST ST. BENMARIE COMP. Parada Valenzuela City"},{"Raw Address":"256 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"423 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"131 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"1430 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"229 18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"256 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"200 CAPT. CRUZ CALLE ONSE Parada Valenzuela City"},{"Raw Address":"Q4289 KAMAGONG ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"338 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"343 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"427 BURGOS ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"132 KAMAGONG ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPD. 21ST FV5 Parada Valenzuela City"},{"Raw Address":"53 3RD FORTUNE V Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"B1 L12 BURGOS Parada Valenzuela City"},{"Raw Address":"161 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"325 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"1213 LAGDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"3B P.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"91 A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"239 ABELARDO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"055 PARADA FORTUNE5 Parada Valenzuela City"},{"Raw Address":"179 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"15 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"27 A. PARADA RD. Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ PARADA Valenzuela City"},{"Raw Address":"004 PARADA Valenzuela City"},{"Raw Address":"117 LAGDAMEO FV 4 Parada Valenzuela City"},{"Raw Address":"462 P GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"468 KAINGIN Parada Valenzuela City"},{"Raw Address":"147 ALICIA STREET Parada Valenzuela City"},{"Raw Address":"134 E LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"220-C 21 ST. Fortune Village 5 SUBD. Parada Valenzuela City"},{"Raw Address":"1 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"192 M. DE GULA Parada Valenzuela City"},{"Raw Address":"6 PARADA RD. Parada Valenzuela City"},{"Raw Address":"274 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"18 A F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"3 CORAL ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"391 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"376 Parada Valenzuela City"},{"Raw Address":"153 6TH ST. FORTUNE FIVE Parada Valenzuela City"},{"Raw Address":"437-M GOMEZ ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"16B SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"243 7TH ST. Parada Valenzuela City"},{"Raw Address":"269 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"187 FELIZA ST Parada Valenzuela City"},{"Raw Address":"202 22ND ST. Parada Valenzuela City"},{"Raw Address":"# 31 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"467 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"39 PARADA RD Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"4560 Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"36D PARADA RD. Parada Valenzuela City"},{"Raw Address":"190 6TH ST FORTUNE Village 5 &6 Parada Valenzuela City"},{"Raw Address":"266 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"201 22ND ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"219 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"307 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"419 ZAMORA ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"70 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"199 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"390 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"154 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"232 DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"FV7 Parada Valenzuela City"},{"Raw Address":"264 B 19TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"190 DE GULA STREET Parada Valenzuela City"},{"Raw Address":"128 PARADA ROAD Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"34 F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"246 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"201 CALLE ONCE ST. Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 20 349 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"377 18TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"247 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"#26 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"114 LAGDAMEO STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"# 66 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"KAINGIN ST. SANTOLAN RD. PARADA Valenzuela City"},{"Raw Address":"196 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"0005 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"351 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"100 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"122 A. KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"454 7TH ST. Parada Valenzuela City"},{"Raw Address":"117 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"190 6ST MOLAVE Fortune Village 5-6 Parada Valenzuela City"},{"Raw Address":"279 PILAR Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"351 F. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"196 MOLALE ST. Parada Valenzuela City"},{"Raw Address":"170 DOON COMPD. SALAZAR Parada Valenzuela City"},{"Raw Address":"160 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"4387 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"349 F FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"192 M. DE GULA STREET Parada Valenzuela City"},{"Raw Address":"199 21 ST. BENMARIE COMP. Parada Valenzuela City"},{"Raw Address":"275 PILAR ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"119 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"339 Fortune Village 5 21ST STREET Parada Valenzuela City"},{"Raw Address":"340 2OTH STREET Parada Valenzuela City"},{"Raw Address":"114 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"260 TATAROMAN ST Parada Valenzuela City"},{"Raw Address":"TATA ERO ST. PARADA Valenzuela City"},{"Raw Address":"S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"98 CAPT. ST. Parada Valenzuela City"},{"Raw Address":"168 DOON COMP Parada Valenzuela City"},{"Raw Address":"273 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMPD Parada Valenzuela City"},{"Raw Address":"272 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"72 JADE ST. Parada Valenzuela City"},{"Raw Address":"332M T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"245 ABELARDO ST FV4 Parada Valenzuela City"},{"Raw Address":"122 CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"216 D DE GUZMAN Parada Valenzuela City"},{"Raw Address":"192 C 6TH ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"BLK 12 LOT 5 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"313 MENES CMPD. PARADA Valenzuela City"},{"Raw Address":"207 F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"212 21ST STREET FORTUNE V Parada Valenzuela City"},{"Raw Address":"137 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"120 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"LOT 20 A F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"95 P. DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"176 MOLAVE ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"BLK. 6 LOT 9 JADE ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"91 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"139 NARRA STREET Parada Valenzuela City"},{"Raw Address":"441 P. GOMEZ Parada Valenzuela City"},{"Raw Address":"500 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"FORTUNE IV RAMON ST. Parada Valenzuela City"},{"Raw Address":"198 DE GULA ST. Parada Valenzuela City"},{"Raw Address":"117 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"88 Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"175 MOLAVE Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"LE 116 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"201 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"254 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"311 Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"185 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"414 NO.4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"003 PARADA Valenzuela City"},{"Raw Address":"94-B FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"202 MOLAVE Parada Valenzuela City"},{"Raw Address":"227 18TH STREET Parada Valenzuela City"},{"Raw Address":"488 ZAMORA ST Parada Valenzuela City"},{"Raw Address":"068 PARADA FORTUNE Village6 Valenzuela City Parada Valenzuela City"},{"Raw Address":"181 RAMON STREET Parada Valenzuela City"},{"Raw Address":"119 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"377 18 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"199 21ST ST.FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"197 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"31 F Parada Valenzuela City"},{"Raw Address":"172-B MOLAVE ST FORTUNE6 Parada Valenzuela City"},{"Raw Address":"#45 A F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"273 S.DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"256 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"91 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"349 BLK 9 F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"152 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. FV 4 Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG HOUSING PROJECT Parada Valenzuela City"},{"Raw Address":"FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"377 18TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"176 CAPTAIN CRUZ ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"28 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"321 B. S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"290 ILOCTO COMP. Parada Valenzuela City"},{"Raw Address":"27A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"306 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"L10 NEPTUNE ST Parada Valenzuela City"},{"Raw Address":"39 PARADA RD. Parada Valenzuela City"},{"Raw Address":"228 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"349 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"140 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"165 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"270 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"354 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"199 BENMARIE CMPD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"19921 ST FORTUNE` Parada Valenzuela City"},{"Raw Address":"116 CALLE ONCE STREET Parada Valenzuela City"},{"Raw Address":"095 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"2150 DAET COMPD. Parada Valenzuela City"},{"Raw Address":"386 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"LOT 5 BLK. 10 A NARRA STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"104 E. LAGDAMEO STREET Parada Valenzuela City"},{"Raw Address":"231 18ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"5F SANTIAGO STREET. Parada Valenzuela City"},{"Raw Address":"F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"2507 - FILIZA BUKID Parada Valenzuela City"},{"Raw Address":"22 EUGENIO Parada Valenzuela City"},{"Raw Address":"279 PILAR ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID VENUS ST. Parada Valenzuela City"},{"Raw Address":"181 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"348 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"371 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"282 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"BLK 9 LOT 30 UNIT 1 NARRA ST. Parada Valenzuela City"},{"Raw Address":"465 KAINGIN RD. Parada Valenzuela City"},{"Raw Address":"241 7TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"234 19TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"362 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"512 ABCO COMP FORTUNE VillageE 6 Parada Valenzuela City"},{"Raw Address":"282 PILAR ST. Parada Valenzuela City"},{"Raw Address":"407 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"244 7TH STREET FORTUNE VILALGE 5 Parada Valenzuela City"},{"Raw Address":"207 A FELIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"166 6TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"015 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"359 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"172 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"162 E.SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"329 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"BLK 4 LOT 4 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"GOMEZ STREET Parada Valenzuela City"},{"Raw Address":"467 CAINGIN ST. Parada Valenzuela City"},{"Raw Address":"#199 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"134 5TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"064 PARADA ROAD FORTUNE Village Parada Valenzuela City"},{"Raw Address":"63 PARADA RD EXT. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"FELIZA BUKID CALLE ONSE Parada Valenzuela City"},{"Raw Address":"14 C PEARL ST. HIYAS HOME Parada Valenzuela City"},{"Raw Address":"199 6TH STREET Parada Valenzuela City"},{"Raw Address":"94B FORTUNE DRIVE. FORTUNE Village 5 6TH ST. Parada Valenzuela City"},{"Raw Address":"5TH ST. FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"111 C KAMAGONG ST. FORTUNE VI Parada Valenzuela City"},{"Raw Address":"199 21 ST Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"116 CALLE ONCE ST. Parada Valenzuela City"},{"Raw Address":"266 24TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"399 SAN ANDRES Parada Valenzuela City"},{"Raw Address":"93 C/ CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"440 SERVICE ROAD ROMARAO COMPOUND Parada Valenzuela City"},{"Raw Address":"106 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"349 CAPT.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"266 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"L17-B2 SAPPHIRE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"318 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"31 F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"10 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"464 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"#5 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"028 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"109 E. LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"118 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"271 CONSUELO FV 4 Parada Valenzuela City"},{"Raw Address":"126 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BEN MARIE COMP. Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"379 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"258 25TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"118 DOOR 12 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 3 DAHOA PARAFORT Parada Valenzuela City"},{"Raw Address":"369 TATAANDRES ST Parada Valenzuela City"},{"Raw Address":"402 SAN ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"36 B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"#319 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"137 FORTUNE DR. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#97 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"411 C. TATA ERRO Parada Valenzuela City"},{"Raw Address":"12 Parada Valenzuela City"},{"Raw Address":"404 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"365 PARADA TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"LOT 15A 207 FELISA BUKID Parada Valenzuela City"},{"Raw Address":"19 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"404 P.DE GUZMAN PARADA RD. Parada Valenzuela City"},{"Raw Address":"362 TATA ANDRES ST.BO.Parada Valenzuela City"},{"Raw Address":"ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B5 LOT 2 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"177 GONZALES COMP. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"200 FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"413 P/ DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"45 A. EARTH ST. SANTIAGO Parada Valenzuela City"},{"Raw Address":"NEPTUNE ST. Parada Valenzuela City"},{"Raw Address":"FATIMA ANEX CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"228 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"472 KA BERONG ST. PARADA Valenzuela City"},{"Raw Address":"330 Parada Valenzuela City"},{"Raw Address":"168 KAMAGONG ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"315 JIMENES COMP Parada Valenzuela City"},{"Raw Address":"199 21ST ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"392-C P.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"A334 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"203 ANTHONY ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"Q4 289 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"31 F BO. Parada Valenzuela City"},{"Raw Address":"064 PARADA RD. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"84 A CAPT. CRUZ DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"177 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMPD. Parada Valenzuela City"},{"Raw Address":"TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"274 TATA ENRONG STREET S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"20 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"0250 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"SAN MIGUEL COMP. ST. Parada Valenzuela City"},{"Raw Address":"99 VENUS ST Parada Valenzuela City"},{"Raw Address":"0343-C FELIZA ST. Parada Valenzuela City"},{"Raw Address":"181 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"349 F-FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"435 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"330 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"314 SANTIAGO Parada Valenzuela City"},{"Raw Address":"261 25TH STREET Parada Valenzuela City"},{"Raw Address":"259 ADOR ST Parada Valenzuela City"},{"Raw Address":"185 CASTILLO COMPOUND FELIZA ST. Parada Valenzuela City"},{"Raw Address":"PARADA RD. PARADA Valenzuela City"},{"Raw Address":"372 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"314 PARADA Valenzuela City"},{"Raw Address":"294 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"B1L9 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"22 EUGENIO F.A APT. Parada Valenzuela City"},{"Raw Address":"506 TINDALO ST. Parada Valenzuela City"},{"Raw Address":"19 B ZAMORA ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"278 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"177 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"153 ACACIA ST. FV 6 Parada Valenzuela City"},{"Raw Address":"068A PARADA RD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"242 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"244 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"116-D. CALLE ONSE CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"# 207 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"390S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"90 CAPT. ST. Parada Valenzuela City"},{"Raw Address":"175 A MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"200 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO STREET BLK4 LOT5 Parada Valenzuela City"},{"Raw Address":"31 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"267 PETRA ST. Parada Valenzuela City"},{"Raw Address":"211 21ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"036 C PARADA RD. Parada Valenzuela City"},{"Raw Address":"150 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"394 F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"219 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"377 18 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"94 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"15 PARADA ST Parada Valenzuela City"},{"Raw Address":"294 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"0013 TEMPO P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"437 FV7 Parada Valenzuela City"},{"Raw Address":"5TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"114 LAGDAMEO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"144 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. BLK 2 LOT 19 GINTONG Parada Valenzuela City"},{"Raw Address":"39 PARADA Valenzuela City"},{"Raw Address":"177 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"68 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"B3 Parada Valenzuela City"},{"Raw Address":"282 S. DEGUZMAN Parada Valenzuela City"},{"Raw Address":"320B S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"KM 19 BO. PARADA ST. Parada Valenzuela City"},{"Raw Address":"6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"1727 B TATA ERO Parada Valenzuela City"},{"Raw Address":"245 B SALAZAR ST. DOON COMPD. Parada Valenzuela City"},{"Raw Address":"349 FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"439 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"204 F.SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"187 B FELIZA STREET Parada Valenzuela City"},{"Raw Address":"144 E. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"172 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"345 CAPT FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"144 DALAWAN STREET Parada Valenzuela City"},{"Raw Address":"7 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"257 S DEGUZMAN STREET Parada Valenzuela City"},{"Raw Address":"PARADA RD. Parada Valenzuela City"},{"Raw Address":"185-D FELIZA STREET Parada Valenzuela City"},{"Raw Address":"7 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"243 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"4781 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"94B FORTUNE DRIVE ST. Parada Valenzuela City"},{"Raw Address":"200 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"199 FORTUNE Village 5 STREET Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"94 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"204 VENUS STREET E.N.E COMPOUND Parada Valenzuela City"},{"Raw Address":"86 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"444 RUMARAO CPD. Parada Valenzuela City"},{"Raw Address":"413 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"449 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"CORNER SAPPHIRE ST. HIYAS SUBD. PEARL ST. Parada Valenzuela City"},{"Raw Address":"431 GOMEZ ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"442 P.GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"290 SANTOLAN ST. Parada Valenzuela City"},{"Raw Address":"222 SALVADOR Parada Valenzuela City"},{"Raw Address":"7 5TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"307 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"216 21ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"FELISA ST. Parada Valenzuela City"},{"Raw Address":"57 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"367 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"SISCARA APT ADOR ST Parada Valenzuela City"},{"Raw Address":"BLK6 LOT7 GINTONG SILANGAN F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"B5 L1 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"168 21 STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"187 A FELIZA ST Parada Valenzuela City"},{"Raw Address":"067 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"336 T.MANANG BO. PARADA Valenzuela City"},{"Raw Address":"227 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"182 Parada Valenzuela City"},{"Raw Address":"108 RAMON ST. FV 4 Parada Valenzuela City"},{"Raw Address":"HIYAS HOME SUBD. SAPHIRE Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 9 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"BLK. 8 LOT 10 CARACTA VillageE Parada Valenzuela City"},{"Raw Address":"403 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"320 S Parada Valenzuela City"},{"Raw Address":"147 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"269 INT S DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"244 7TH STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"468 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"255 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"46 P. DE GUZMAN BANDINO STREET Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. SANTIAGO Parada Valenzuela City"},{"Raw Address":"40 PARADA ST. Parada Valenzuela City"},{"Raw Address":"0147-E DOON ST. Parada Valenzuela City"},{"Raw Address":"468 - O KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"260 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"31 MARS ST. E&E COMPD. Parada Valenzuela City"},{"Raw Address":"LOT 5 BLK 7 199 BENMARIE COMP. 21 ST. Parada Valenzuela City"},{"Raw Address":"180 FELISA ST. Parada Valenzuela City"},{"Raw Address":"301 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"206 22ND ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"212 ANTHONY Parada Valenzuela City"},{"Raw Address":"Q4289 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"424 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"#118 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. 21ST. FV5 Parada Valenzuela City"},{"Raw Address":"KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"315 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"139 FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"468 Q KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"204 BF. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"349 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. DOON COMPOUND Parada Valenzuela City"},{"Raw Address":"1882 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"WEST SERVICE ROAD CARREON COMPD. Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST Parada Valenzuela City"},{"Raw Address":"161 ALICIA Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"240 7 STREET Parada Valenzuela City"},{"Raw Address":"202A 22 STREET Parada Valenzuela City"},{"Raw Address":"5TH ST. FV 5 PARADA RD. Parada Valenzuela City"},{"Raw Address":"141 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"252-A LOT 2 BLOCK 2 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"2157 BORNALES CPD.KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"90 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"#94 Parada Valenzuela City"},{"Raw Address":"036 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"327 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"283 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"313 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"318 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"167 6TH ST. Parada Valenzuela City"},{"Raw Address":"P DE GUZMAN COR TATA ERO Parada Valenzuela City"},{"Raw Address":"161 FELIZA Parada Valenzuela City"},{"Raw Address":"443 ROSELLA ST. Parada Valenzuela City"},{"Raw Address":"130 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"446 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"0290 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"B1 L6 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"024 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"1 PARADA ST Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"242 S. DE GUZMAN COR. MARY ANN THIS WAY ST. Parada Valenzuela City"},{"Raw Address":"470 KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"270 S. DE GUZMAN BARRIO Parada Valenzuela City"},{"Raw Address":"199 6TH ST.MANALANG CMPD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"270 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"67 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"032 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"283-D DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"33 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. ST. FORTUNE Village Valenzuela City Parada Valenzuela City"},{"Raw Address":"256 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"242 Parada Valenzuela City"},{"Raw Address":"101 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"ROAD Parada Valenzuela City"},{"Raw Address":"012 PARADA Valenzuela City"},{"Raw Address":"BL3LT9 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"244 7TH ST.FORTUNE Village Parada Valenzuela City"},{"Raw Address":"185B FELIZA ST. Parada Valenzuela City"},{"Raw Address":"235 19TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"336 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"468-E KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"151 ST. FORTUNE IV Parada Valenzuela City"},{"Raw Address":"177 23RD STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"111 UNIT KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"115 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"260 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B2 L5 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"200 FORTUNE Village Parada Valenzuela City"},{"Raw Address":"146 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"123 CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"199 BEN MARIE 21ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"240 ABELARDO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"266 24 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"210 21ST COR. FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"188 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"151 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"243 S. D GUZMAN ST Parada Valenzuela City"},{"Raw Address":"315 MENEZ COMP. PARADA Valenzuela City"},{"Raw Address":"30 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"A22 T. EUGENIO STREET Parada Valenzuela City"},{"Raw Address":"309 JEMENES COMP. Parada Valenzuela City"},{"Raw Address":"45A F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"80 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"3A 144 E. FRANCISCO Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPOUND Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"199 21ST ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"181 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"DOOR 1 151 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"032 PARADA RD. Parada Valenzuela City"},{"Raw Address":"431-B GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"252 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"183 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"331 D TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"340 20TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"039 D. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"091FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"199 21ST BEN MARIE COMP. FV6 Parada Valenzuela City"},{"Raw Address":"133 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"122 B CALLE ONSE Parada Valenzuela City"},{"Raw Address":"101 M. DE Parada Valenzuela City"},{"Raw Address":"28 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"273 Parada Valenzuela City"},{"Raw Address":"VALENZUELA CITY Parada Valenzuela City"},{"Raw Address":"470KAINGIN ST Parada Valenzuela City"},{"Raw Address":"4480 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"99 VENUST ST. Parada Valenzuela City"},{"Raw Address":"188 MOLAVE ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"334 T. MANANG ST Parada Valenzuela City"},{"Raw Address":"098D FORTUNE Village 7TH ST. Parada Valenzuela City"},{"Raw Address":"336 UNIT 2 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"310 JIMENEZ ST. Parada Valenzuela City"},{"Raw Address":"4680 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"031 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"167 RAMON ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"72 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"123 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"251 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"114E LAGDAMEO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"0012 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 3 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"4078 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"131 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"28 Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"07 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"222 KAMAGONG ST Parada Valenzuela City"},{"Raw Address":"291 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"256 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLOCK5 LOT2 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"200-C CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"217 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"235 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"320 C DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"199 BEN MARIE COMP. 21ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"15 DIAMOND ST. Parada Valenzuela City"},{"Raw Address":"B5 L2 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"391 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"077 PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"42 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"345 CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"297-C T. MANANG ST. PARADA Valenzuela City"},{"Raw Address":"824 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"009 Parada Valenzuela City"},{"Raw Address":"308 MENES CMPD. Parada Valenzuela City"},{"Raw Address":"118 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"267 INANG PETRA ST. S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"1253 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"405 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"PETRA ST. PARADA Valenzuela City"},{"Raw Address":"412 P DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"92 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"139 Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"276 E.S DEGUZMAN Parada Valenzuela City"},{"Raw Address":"173 SALAZAR ST. PARADA Valenzuela City.A Parada Valenzuela City"},{"Raw Address":"83 D CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BEN MARIE GARDENS Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"167 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"#79 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"362 TATAANDRES ST. Parada Valenzuela City"},{"Raw Address":"100 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"199 21 ST FORTUNE V Parada Valenzuela City"},{"Raw Address":"LOT 14 BLK 5 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"444 WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"Fortune Village 6 6TH ST. Parada Valenzuela City"},{"Raw Address":"84 PARADA ROAD EXT. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"Fortune Village 6 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"122 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"200 F. SANTIAGO MERCURY ST. Parada Valenzuela City"},{"Raw Address":"98 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"31 F. SANTIAGO ST. E&E COMPD. Parada Valenzuela City"},{"Raw Address":"269 DE GUZMAN Parada Valenzuela City"},{"Raw Address":"012 Parada Valenzuela City"},{"Raw Address":"BLOCK 4 LOT 17 F.FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"090 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"8 E AND E COMPD. F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST. Fortune Village 4. Parada Valenzuela City"},{"Raw Address":"067 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"UNIT 2 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"281 PILAR STREET Parada Valenzuela City"},{"Raw Address":"209 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"269 INT. S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"071 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"200 6TH ST. Parada Valenzuela City"},{"Raw Address":"187 DE GULA COMP CAPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"122 CALLEONSE Parada Valenzuela City"},{"Raw Address":"207 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"228 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"190 6TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"328 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"466-C KA BERONG Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. FORTUNE VillageE 4 Parada Valenzuela City"},{"Raw Address":"B2 LOT10 F FRANCISCO ST. G SILANGAN Parada Valenzuela City"},{"Raw Address":"132 LAGDAMEO ST. FOTRUNE 4 Parada Valenzuela City"},{"Raw Address":"BLK. 4 LOT 13 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"Q487 IPIL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"279 PILAR ST. Parada Valenzuela City"},{"Raw Address":"334 #1 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"35C 5TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"202 FELISA ST. Parada Valenzuela City"},{"Raw Address":"144 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"04 KAINGIN Parada Valenzuela City"},{"Raw Address":"28 CAPT CRUZ ST.Parada Valenzuela City"},{"Raw Address":"02 157 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"184 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"414 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"1548 Parada Valenzuela City"},{"Raw Address":"361 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"500 FORTUNE DRIVE FORTUNE V Parada Valenzuela City"},{"Raw Address":"50 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"83 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"GULA ST. Parada Valenzuela City"},{"Raw Address":"267 Parada Valenzuela City"},{"Raw Address":"B1 L1 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"193 AM DE GULA ST. Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO STREET Parada Valenzuela City"},{"Raw Address":"183 FELIZA Parada Valenzuela City"},{"Raw Address":"243 7TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"25 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"315 MENES CMPD. Parada Valenzuela City"},{"Raw Address":"286 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"270 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"69 Parada Valenzuela City"},{"Raw Address":"247 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"290 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"154 FORTUNE Village4 PARADA Valenzuela City"},{"Raw Address":"384 BO. PARADA Valenzuela City"},{"Raw Address":"237 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B7L1 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"109 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"442 GOMEZ Parada Valenzuela City"},{"Raw Address":"291KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"0009 BLK 3 LOT 9 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"100 DOOR 3 CAPT CRUZ ST.Parada Valenzuela City"},{"Raw Address":"88-D CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"31 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"308 MENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"157-A SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"158 21ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"LOT 2 BLK 2 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"099 CAPT.CRUZ Parada Valenzuela City"},{"Raw Address":"270 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"415 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"274 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"188 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"122 CALLEONSE STREET Parada Valenzuela City"},{"Raw Address":"113 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"139 DALAWAN STREET Parada Valenzuela City"},{"Raw Address":"146 FORTUNE DRV. Parada Valenzuela City"},{"Raw Address":"230 1F EMBUSCADO COMP. S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"LOT 10 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"347 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"18 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"228 B S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"23 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"220 C 21 STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"168 SALAZASR Parada Valenzuela City"},{"Raw Address":"B2 L4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"343 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"258 INTERIOR S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"020 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"412 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"255 SALVADOR Parada Valenzuela City"},{"Raw Address":"39 B RAMON ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"338 T. MANANG Parada Valenzuela City"},{"Raw Address":"451 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"97B CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"207 PELESA BOKED Parada Valenzuela City"},{"Raw Address":"4180 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"104 LAGDAMEO FV4 Parada Valenzuela City"},{"Raw Address":"239 ABELARDO Parada Valenzuela City"},{"Raw Address":"405 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"269 INANG PETRA STREET Parada Valenzuela City"},{"Raw Address":"260B RIZALINA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"152 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"100 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"152 NARRA ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"4389 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"260 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"FORTUNE DRIVE COR. 22 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"421 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"254 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"470 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"FELIZA STREET Parada Valenzuela City"},{"Raw Address":"TATAERO ST. Parada Valenzuela City"},{"Raw Address":"172 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"172 INTERIOR SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"1827 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"230 18TH ST Parada Valenzuela City"},{"Raw Address":"421 ZAMORA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"262 OLIVA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"3B F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"125 LAGDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST.Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"9 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"255 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"130 B 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"473 KA BERONG ST Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMP. PARADA Valenzuela City"},{"Raw Address":"M DE GULA ST Parada Valenzuela City"},{"Raw Address":"GINTONG SILANGAN F FRANCISCO Parada Valenzuela City"},{"Raw Address":"296 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"98 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"26 F.SANTIAGO MARS STREET Parada Valenzuela City"},{"Raw Address":"CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"271 MARTA ST Parada Valenzuela City"},{"Raw Address":"256 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"177 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"446 GOMEZ ST. FORTUNE Village P. 7 Parada Valenzuela City"},{"Raw Address":"50 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"#95 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST.` Parada Valenzuela City"},{"Raw Address":"137-A NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"30 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"202 A FELIZA Parada Valenzuela City"},{"Raw Address":"168 DOON COMPOUND SALAZAR Parada Valenzuela City"},{"Raw Address":"119 KAMAGONG ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"63 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"067 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"235 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"170 UNIT SALAZAR ST Parada Valenzuela City"},{"Raw Address":"276 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"22 PARADA ST. Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 2 F. FRANCISCO ST. GINTONG Parada Valenzuela City"},{"Raw Address":"2626 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE 21ST ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"185 - A FELIZA ST. Parada Valenzuela City"},{"Raw Address":"94 C CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"360 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"B3 L19 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"160 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"445 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"418-A ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"267 CORNER 19TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"186 FILISA ST Parada Valenzuela City"},{"Raw Address":"036 C. PARADA RD. Parada Valenzuela City"},{"Raw Address":"J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"12 B- KAMAGONG ST. F. Village 6 Parada Valenzuela City"},{"Raw Address":"006 F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"230 18ST Parada Valenzuela City"},{"Raw Address":"CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"331 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"256 TOMASA STREET Parada Valenzuela City"},{"Raw Address":"31 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"NO.14 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"SINILANGAN Parada Valenzuela City"},{"Raw Address":"351 F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"32 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"334 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"357 J-FRANCISCO Parada Valenzuela City"},{"Raw Address":"KABERONG ST. PARADA Valenzuela City"},{"Raw Address":"1 F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"438 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"320 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"349 F Parada Valenzuela City"},{"Raw Address":"21 BENMARIE ST. Parada Valenzuela City"},{"Raw Address":"BLK. 5 LOT 20 349 FRANCISCO ST. GINTONG Parada Valenzuela City"},{"Raw Address":"130 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"224 21ST ST Parada Valenzuela City"},{"Raw Address":"283 A S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"374 TATA ANDRES ST.PARADA Valenzuela City"},{"Raw Address":"123 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"188 MOLAVE COR 6TH ST. Parada Valenzuela City"},{"Raw Address":"10 FIFTH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"165-G5 ACASIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST.FV 4 Parada Valenzuela City"},{"Raw Address":"140 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"139 NARRA ST.FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"245 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"151 ACACIA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"460 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"207 FELISA BUKID CALLE ONSE Parada Valenzuela City"},{"Raw Address":"237 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"154 SALAZAR Parada Valenzuela City"},{"Raw Address":"ST. 4 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"168 FELISA ST Parada Valenzuela City"},{"Raw Address":"403 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"25TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"88 CAPT. CRUZ SAN MIGUEL COMP. Parada Valenzuela City"},{"Raw Address":"T. Parada Valenzuela City"},{"Raw Address":"121 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"420 ZAMORA ST. PARADA Valenzuela City"},{"Raw Address":"91B CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"26 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"90 F. CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"222 KAMAGONG FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"138 E FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"151 ALICIA STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"204 VENUS ST. E&E COMP Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 12 BURGOS Parada Valenzuela City"},{"Raw Address":"203 ANTHONY ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"19 B.F SANTIAGO E&E COMP. Parada Valenzuela City"},{"Raw Address":"258 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"393 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"468-K KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"121 CONSUELO STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"144 ALICIA ST. PARADA Valenzuela City"},{"Raw Address":"138 NARRA ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"203 VENUS STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"341 20TH ST Parada Valenzuela City"},{"Raw Address":"#80 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"192 RAMOS ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"258 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"LOT 10 NEPTUNE Parada Valenzuela City"},{"Raw Address":"9 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"02 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"BLOCK 5 LOT 15 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"305 DAET COMPD. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"152 ALICIA STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"315 JEMINEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"BLK10 LOT7 F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"276 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"0099 B. CAPT. CRUS ST. Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKDI ST. Parada Valenzuela City"},{"Raw Address":"68 FORTUNE Village 6 PARADA Valenzuela City"},{"Raw Address":"# 343 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"BLK 10/12 LOT 12 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"457B KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"188DE GULA CMPD. PARADA Valenzuela City"},{"Raw Address":"094 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"438 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 8 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"B1L6 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"64 PARADA RD. FORTUNE Village 5 4 6 Valenzuela City Parada Valenzuela City"},{"Raw Address":"417 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"187 M DE GULA COMPOUD CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"456 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"203 FELIZA ST Parada Valenzuela City"},{"Raw Address":"233 19TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"055 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"170 UNIT 3 DOON CMPD. SALAZAR Parada Valenzuela City"},{"Raw Address":"351 FRANCISCO Parada Valenzuela City"},{"Raw Address":"198 RAMON ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"89 F. SANTIAGO MARS STREET Parada Valenzuela City"},{"Raw Address":"469 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"B4 L21 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"254 25TH Parada Valenzuela City"},{"Raw Address":"206C 22ND STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"385 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"133 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"140 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"431 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"LOT 41 BLK 10 NARA ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FV 7 Parada Valenzuela City"},{"Raw Address":"281 PILAR FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"55 KAMAGONG ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"357 J FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"BLOCK 5 LOT 11 F. FRANCISCO ST GINTONG Parada Valenzuela City"},{"Raw Address":"233 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"37 B PARADA RD. PARADA Valenzuela City"},{"Raw Address":"305 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"077 PARADA RD. EXT. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"253 ABELARDO ST Parada Valenzuela City"},{"Raw Address":"165 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"299 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN SANTOS TOWNHOUSE Parada Valenzuela City"},{"Raw Address":"106 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"09 R CABRAL Parada Valenzuela City"},{"Raw Address":"135 E FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"10 CALLE ONSE BUKID Parada Valenzuela City"},{"Raw Address":"297 D. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"129 NARRA ST FV 6 Parada Valenzuela City"},{"Raw Address":"167 RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"# 70 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"232 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"121 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"3651 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"170 Fortune Village 5 MOLAVE ST Parada Valenzuela City"},{"Raw Address":"118 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"242 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"009 PARADA Valenzuela City"},{"Raw Address":"151 ALICIA Parada Valenzuela City"},{"Raw Address":"117 LAGDAMEO ST Parada Valenzuela City"},{"Raw Address":"471 KA BERONG Parada Valenzuela City"},{"Raw Address":"55 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"127 E.LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"194 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"176 23RD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"203 6TH STREET Parada Valenzuela City"},{"Raw Address":"377 APT.5 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"208 ANTHONY ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"50 RD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"233 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"354 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"269 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMPPOUND Parada Valenzuela City"},{"Raw Address":"175 A. MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"9 E & E COMP. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"4560 SAPHIRE ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"29 PARADA ST. Parada Valenzuela City"},{"Raw Address":"275-A S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"176 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"207 FELIA ST. Parada Valenzuela City"},{"Raw Address":"#177 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"160 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"193 M DE GULA ST. Parada Valenzuela City"},{"Raw Address":"130 D 5TH STREET Parada Valenzuela City"},{"Raw Address":"190 MOLAVE STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#18 PARADA RD. Parada Valenzuela City"},{"Raw Address":"332 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 3 199 BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"395 E.SAN ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"257 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"330 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"256 RIZALINA Fortune Village 4 ST. Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"359 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"203 18TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"349 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"11 PARADA RD. Parada Valenzuela City"},{"Raw Address":"226 18TH ST. Parada Valenzuela City"},{"Raw Address":"039 RAMON ST.FV 4 Parada Valenzuela City"},{"Raw Address":"469 KAINGIN Parada Valenzuela City"},{"Raw Address":"14E FRANCISCO ST NLEX CORNER Parada Valenzuela City"},{"Raw Address":"225 ABELARDO Parada Valenzuela City"},{"Raw Address":"252 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"4 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"160 NARRA ST Parada Valenzuela City"},{"Raw Address":"101 M. DEGULA ST. ALFONSO APARTMENT"},{"Raw Address":"249 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"159 6TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"195 CAPT.CRUZ ST. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"193 B.M DE GULA ST. Parada Valenzuela City"},{"Raw Address":"442 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"087 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"94 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"237 19TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLOCK 4 LOT 14 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"425 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMPD. PARADA Valenzuela City"},{"Raw Address":"94 SALAZAR Parada Valenzuela City"},{"Raw Address":"31-F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"177 24TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"354 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"LOT 20 EARTH ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"LOT 5 BLK 10A NARRA ST. Parada Valenzuela City"},{"Raw Address":"491 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"377 18TH ST.Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"456 E KAINGIN Parada Valenzuela City"},{"Raw Address":"184 RAMON ST. FORTUNE Village 4 BO. Parada Valenzuela City"},{"Raw Address":"190 6TH ST. CORNER KAMAGONG FORTUNE Village Parada Valenzuela City"},{"Raw Address":"168 DOON CMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"4698 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"239 7TH ST. FORTUNE Village 5. PARADA Valenzuela City"},{"Raw Address":"448 WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. PARADA VALENZUELA Parada Valenzuela City"},{"Raw Address":"#349 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"440 Parada Valenzuela City"},{"Raw Address":"044 PARADA RD. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"387 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"440 WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGOS T. Parada Valenzuela City"},{"Raw Address":"402 SAN ANDRES PARADA Valenzuela City"},{"Raw Address":"420 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"37-A PARADA RD.PARADA Valenzuela City"},{"Raw Address":"150 ST. Parada Valenzuela City"},{"Raw Address":"170 RAMON ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"165 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"273 PILAR ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"111E LAGDAMEO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"#39 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"70 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"04 SALAZAR ST.PARADA Valenzuela City"},{"Raw Address":"320 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"GP.STREET WES SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"460 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"316 MENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"HIYAS HOMES SUBD. CORNER DIAMOND Parada Valenzuela City"},{"Raw Address":"384 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"117 LAGDAMEO FORTUNE Village Parada Valenzuela City"},{"Raw Address":"412 TATA ERRO STREET Parada Valenzuela City"},{"Raw Address":"471 KABERONG ST Parada Valenzuela City"},{"Raw Address":"167 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"190 M. DEGULA STREET Parada Valenzuela City"},{"Raw Address":"132 CAPTAIN CROSS Parada Valenzuela City"},{"Raw Address":"9-F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"166 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"151 DALAWAN Parada Valenzuela City"},{"Raw Address":"038 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"FELIZA BUKIT ST. Parada Valenzuela City"},{"Raw Address":"438 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"444 ZAMORA ST Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"131 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"168 ALICIA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"372 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"259 ADOR STREET Parada Valenzuela City"},{"Raw Address":"ADOR Parada Valenzuela City"},{"Raw Address":"111-E LAGDAMEO ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"140 E FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"168 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"73 GOMEZ ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST.Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"JEMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"039 RAMON SANTIAGO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"193 A.M DE GULA Parada Valenzuela City"},{"Raw Address":"349 FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"L10 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"648 CAINGIN ST. Parada Valenzuela City"},{"Raw Address":"101 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"286 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"449 PARADA Valenzuela City"},{"Raw Address":"B3 L5 GINTONG SILANGAN 3497 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"145 NARRA STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"130 WEST SERVICE RD Parada Valenzuela City"},{"Raw Address":"186-D FELIZA ST. Parada Valenzuela City"},{"Raw Address":"21ST FORTUNE5 Parada Valenzuela City"},{"Raw Address":"#13TH 5TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"305 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"1-G EMBUSCADO APT. 230 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"291 SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"098 FORTUNE DRIVE COR. OF 7TH ST. FV5 Parada Valenzuela City"},{"Raw Address":"143 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"87 PARADA RD Parada Valenzuela City"},{"Raw Address":"391 Parada Valenzuela City"},{"Raw Address":"B4L11 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"93-C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"469KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"4181 NARRA ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ CVOMPD.ST. PARADA Valenzuela City"},{"Raw Address":"258 E GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"230-B S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"056 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"341 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"94 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"114 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"234 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"393 FELISA ST. Parada Valenzuela City"},{"Raw Address":"22 EUGENIO COMPD. Parada Valenzuela City"},{"Raw Address":"234 7TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"0406 MARTHA ST Parada Valenzuela City"},{"Raw Address":"314 MENES COMP. Parada Valenzuela City"},{"Raw Address":"B2 L11 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"12 PARADA RD. Parada Valenzuela City"},{"Raw Address":"412 B P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"271 CONSUELO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"144 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"91 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"15 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"297 TANDAND MANANG Parada Valenzuela City"},{"Raw Address":"DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"42 PARADA ST. PARADA Valenzuela City"},{"Raw Address":"134 E. LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"67 PARADA RD.VAL.CITY Parada Valenzuela City"},{"Raw Address":"442 P. GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"135 C CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"413 P DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"471 C KABERONG ST. Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"244 7TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"185 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"87 PARADA Valenzuela City"},{"Raw Address":"108 RAMON ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"FELISA ST. PARADA Valenzuela City"},{"Raw Address":"BLK 5 LOT 9 349 F. FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"24 E EUGENIO ST Parada Valenzuela City"},{"Raw Address":"314 JIMENES COMPOUND Parada Valenzuela City"},{"Raw Address":"385 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"130 D. 5TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"FRANSISCO ST. Parada Valenzuela City"},{"Raw Address":"148 NARRA ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"293 ILOCTO COMP. Parada Valenzuela City"},{"Raw Address":"174 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"349 F FRANCSISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"146 NARRA STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"357 J.FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"268 25TH ST. Parada Valenzuela City"},{"Raw Address":"26F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"CALLE ONSE DE GULA APARTMENT Parada Valenzuela City"},{"Raw Address":"455 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"238 19TH FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"349 E FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"190- B. MOLAVE ST FORTUNE6 Parada Valenzuela City"},{"Raw Address":"237 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"CALYE II ST. Parada Valenzuela City"},{"Raw Address":"182 UNIT G. MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"385 MERCURY ST. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"384 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"ALICIA ST. FORTUNE Village4 PARADA Valenzuela City"},{"Raw Address":"230 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"190 6TH ST. Parada Valenzuela City"},{"Raw Address":"298 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"272 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"395-DOOK1 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"28 EUGENIO Parada Valenzuela City"},{"Raw Address":"740 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"141 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"NO. 51 FORTUNE FIVE THIRD ST. Parada Valenzuela City"},{"Raw Address":"228-A S. DE GUSMAN ST. Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. DOON CMP Parada Valenzuela City"},{"Raw Address":"A ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"72 PARADA RD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"#223 21 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"506 TINDALO ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"175 23RD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLOCK 02 LOT 14 F. FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"3 CORAL ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"LOT 41 BLOCK 10 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"158 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"172 MOLAVE Parada Valenzuela City"},{"Raw Address":"BLK13 LOT 27 FORTUNE DRIVE FORTUNE VIILL. 5 Parada Valenzuela City"},{"Raw Address":"2225 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"220D 21STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMP. Parada Valenzuela City"},{"Raw Address":"465 KAINGIN Parada Valenzuela City"},{"Raw Address":"62 PARADA RD. Parada Valenzuela City"},{"Raw Address":"279 PILAR ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"137 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"315 JEMENES COMPD Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"227 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"17 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"132 LAGDAMEO ST.Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"216 ANTHONY Parada Valenzuela City"},{"Raw Address":"YAKAL Parada Valenzuela City"},{"Raw Address":"357 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"055 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ CMPD. Parada Valenzuela City"},{"Raw Address":"187- A FELISA ST. Parada Valenzuela City"},{"Raw Address":"39 C PARADA RD. Parada Valenzuela City"},{"Raw Address":"317 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"412 Parada Valenzuela City"},{"Raw Address":"244 7ST. ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"109 E. LAGDAMEO ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"443 ROSELLA PARADA Valenzuela City"},{"Raw Address":"028 CAPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"313 JIMENEZ CMPD. Parada Valenzuela City"},{"Raw Address":"244 ABELARDO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"250 B CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"102 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"258 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"828 PILAR ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"460P. GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"199 21ST STREET BEN MARIE COMPD. FORTUNE Parada Valenzuela City"},{"Raw Address":"5TH ST. FORTUNE Village 5 RD. Parada Valenzuela City"},{"Raw Address":"361 J-FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"188 MOLAVE ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"156 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"039 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"471 KABERONG ST. Parada Valenzuela City"},{"Raw Address":"279 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"168 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"206 22ND ST Parada Valenzuela City"},{"Raw Address":"301 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"435 C. ZAMORA ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"412 C.P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"457 F. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"360 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"442 GOMEZ Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"16 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"40 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"44 B PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"214 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"94 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"438 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"272 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"039 RAMON Parada Valenzuela City"},{"Raw Address":"379 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"#85 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"239 ABELARDO ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"FATIMA CMPD. PARADA Valenzuela City"},{"Raw Address":"437 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"440 RUMARAO COMP. SERVICE RD. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 6 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"54 KAMAGONG Parada Valenzuela City"},{"Raw Address":"136 KAMAGONG STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"331-A TANDANG MANANG PARADA Valenzuela City"},{"Raw Address":"88 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"310 MENEZ COMP Parada Valenzuela City"},{"Raw Address":"181 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"339 21ST Parada Valenzuela City"},{"Raw Address":"01-31 MERCURY F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"140 E Parada Valenzuela City"},{"Raw Address":"88 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"456 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"70 PARADA ROAD FORTUNE SIX Parada Valenzuela City"},{"Raw Address":"26 NARRA ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"LOT 14 BLK. 4 349 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"167 RAMON ST. PARADA Valenzuela City"},{"Raw Address":"087 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"5 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"36 G. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"150 ALICIA S. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"91-A CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"170 RAMON STREET Parada Valenzuela City"},{"Raw Address":"145 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"188 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"FELIZA ST. Parada Valenzuela City"},{"Raw Address":"290 BO. PARADA ST. SANTOLAN ROAD Parada Valenzuela City"},{"Raw Address":"138 CAPT. CRUZ ST. BO. Parada Valenzuela City"},{"Raw Address":"31 F SANTIAGO ST. E & E COMP. Parada Valenzuela City"},{"Raw Address":"BLK 1 GINTONG SILANGAN COMP. Parada Valenzuela City"},{"Raw Address":"468- KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"258 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"99 SATURN ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"240 7TH ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"144 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"195 6TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"93 PARADA RD. Parada Valenzuela City"},{"Raw Address":"067 PARADA RD. Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGO MARS Parada Valenzuela City"},{"Raw Address":"79 A. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"302 Parada Valenzuela City"},{"Raw Address":"32 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"260 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"26 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"285 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"296-B T.MANANAG ST Parada Valenzuela City"},{"Raw Address":"296-B T. MANANG Parada Valenzuela City"},{"Raw Address":"009 PARADA RD Parada Valenzuela City"},{"Raw Address":"237 DE GUZMAN Parada Valenzuela City"},{"Raw Address":"37E PARADA ROAD Parada Valenzuela City"},{"Raw Address":"067 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"349 CAPTAIN FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"153 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"438 PARADA Valenzuela City"},{"Raw Address":"# 488 ZAMORA STREET Parada Valenzuela City"},{"Raw Address":"001 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"888 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"230 EMBUSCADO APT. S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"466B KAINGIN Parada Valenzuela City"},{"Raw Address":"320E S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"168 C CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"111 E LAGDAMEO Parada Valenzuela City"},{"Raw Address":"UNIT B 276 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"202 - AFELIZA ST. Parada Valenzuela City"},{"Raw Address":"287 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"165-4 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"360 J.FRANCISCO PARADA Valenzuela City"},{"Raw Address":"0006 LOT 3 BLK 4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"349 ST. FRANCIS Parada Valenzuela City"},{"Raw Address":"411C P. DE GUZMAN ST. TATAERO Parada Valenzuela City"},{"Raw Address":"351 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"LOT 29 A. BLK 9 KAMANGONG ST. FV.6 Parada Valenzuela City"},{"Raw Address":"179 MOLAVE ST Parada Valenzuela City"},{"Raw Address":"057 Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"09 Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 10 GINTONG SILANGAN F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"228 A S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"128 A PARADA RD. Parada Valenzuela City"},{"Raw Address":"243 S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"31 P. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"136 E.LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"274 PILAR STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"358 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"14 DIAMOND ST HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"107 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"#45 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"147 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"0118 DOOR 12 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"118 ST. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BLK5 L17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"470 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"175 MOLAVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. SKYLINE SUBD. Parada Valenzuela City"},{"Raw Address":"360 J FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"149 DALAWAN ST. PARADA ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID ST Parada Valenzuela City"},{"Raw Address":"169 ACACIA ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"BO. Parada Valenzuela City"},{"Raw Address":"297 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"154 ALICIA ST. FORTUNE Village 4 PARADA Valenzuela City"},{"Raw Address":"316 JIMENEZ CMPD. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"349 FRANCISCO Parada Valenzuela City"},{"Raw Address":"22T. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"B1 L5 F. FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"412 M INT. ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"468 Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 8 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"302 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"223 ABELARDO STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"248 PARADA RD Parada Valenzuela City"},{"Raw Address":"412 TATA ERRO ST. Parada Valenzuela City"},{"Raw Address":"470 KAINIGIN ST Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRESS ST. Parada Valenzuela City"},{"Raw Address":"182-23RD ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"21ST ST. AGLEHAM COMP. Parada Valenzuela City"},{"Raw Address":"#244 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"116-B CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"31 EARTH ST F SANTIAGO Parada Valenzuela City"},{"Raw Address":"L12 BURGOS ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"KALYE 11 BUKID Parada Valenzuela City"},{"Raw Address":"277 PILAR Parada Valenzuela City"},{"Raw Address":"279-D TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"222 20TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"259 25TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"160 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"171 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"291 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"143 NARRA FORTUNE VIL 6 Parada Valenzuela City"},{"Raw Address":"#257 M. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B3L5 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"306 PARADA Valenzuela City"},{"Raw Address":"412 TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"211 21ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE CMPD. AGLIHAM Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"440 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"456 B KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"195 6ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"119 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG PARADA Valenzuela City"},{"Raw Address":"196 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"286 P. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"45 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B4 L17 F FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"17 PARADA Valenzuela City"},{"Raw Address":"BLK. 7 LOT 11 GINTONG SILANGAN F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"365 TATA ANDREZ Parada Valenzuela City"},{"Raw Address":"006 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"281 PILAR ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"107 MOLAVE ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"309 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"125 KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"106 E. LAGDAMEO Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"243 PASING ST. Parada Valenzuela City"},{"Raw Address":"402 7TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"457 INT SMC DUPLEX -D KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"170B SALAZAR Parada Valenzuela City"},{"Raw Address":"135 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST Parada Valenzuela City"},{"Raw Address":"228 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"0118 A. U2 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"360 FRANCISCO Parada Valenzuela City"},{"Raw Address":"91 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"525 T. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"360 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"SAN ANDRES Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 23 A.FRANCISCO Parada Valenzuela City"},{"Raw Address":"349 F. FERNANDO ST. Parada Valenzuela City"},{"Raw Address":"378A TATA ANDRES Parada Valenzuela City"},{"Raw Address":"415 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"223 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"258 RIZALINA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"125 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"247 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"149 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"095 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"312 MENES COMPD. Parada Valenzuela City"},{"Raw Address":"114 YAKAL STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"84 A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"270 IMPONG JUANA Parada Valenzuela City"},{"Raw Address":"93-C CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"91 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"308 APT 1 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"34 SALVADOR Parada Valenzuela City"},{"Raw Address":"306 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"33 EARTH ST. Parada Valenzuela City"},{"Raw Address":"320 DIMAUNAHAN CMPD.PARADA Valenzuela City"},{"Raw Address":"264 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"26 Parada Valenzuela City"},{"Raw Address":"147 ALICIA ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"279 B S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"157-B SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"234 ABELARDO STREET Parada Valenzuela City"},{"Raw Address":"SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"174 MOLAVE ST.FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"1 FIFTH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"341 PARADA Valenzuela City"},{"Raw Address":"39D PARADA ROAD Parada Valenzuela City"},{"Raw Address":"BLK 4 LT 12 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"466 C. KABERONG ST. Parada Valenzuela City"},{"Raw Address":"146 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"9 Parada Valenzuela City"},{"Raw Address":"274 PILAR ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"022 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"297 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"TATA ERO Parada Valenzuela City"},{"Raw Address":"332 T.MANANG ST. BO. PARADA Valenzuela City"},{"Raw Address":"104 KAMAGONG ST. FV 6 Parada Valenzuela City"},{"Raw Address":"114 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"395-B P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"214 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"169 DOON COMPOUND SALAZAR ST Parada Valenzuela City"},{"Raw Address":"109 RAMON ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"157 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"269 INANG PETRA ST. Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"201 A FELIZA ST Parada Valenzuela City"},{"Raw Address":"386 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"171 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"162 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"320 B BS DE GUZMAN Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMPD. ST. Parada Valenzuela City"},{"Raw Address":"255 ROMASA ST. Parada Valenzuela City"},{"Raw Address":"178 Parada Valenzuela City"},{"Raw Address":"UNIT A L17 B9 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"93A CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"415B TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"111-A LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"31 F. SAN TIAGO Parada Valenzuela City"},{"Raw Address":"349 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"B2 L6 BENMARIE 21ST Parada Valenzuela City"},{"Raw Address":"313 MENES COMP. Parada Valenzuela City"},{"Raw Address":"001 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"467 KAINGIN Parada Valenzuela City"},{"Raw Address":"140 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"198 RAMON FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"14 DIAMOND STREET HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"096 CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"234 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"181 MOLAVE FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"25TH ST DULO. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"#183 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"46 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"94 A FELIZA ST. Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"320 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"413 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"313 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"101 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"406 P DE GUZMAN BANDINO ST Parada Valenzuela City"},{"Raw Address":"227 18TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"412 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"93 B PARADA STREET Parada Valenzuela City"},{"Raw Address":"7TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"204 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"99 VENUS STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"453 B WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"268 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"122 CALYE ONSE Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"286 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"002 FORTUNE Village PARADA Valenzuela City"},{"Raw Address":"417 TATA ERRO STREET Parada Valenzuela City"},{"Raw Address":"240 S DEGUZMAN ST Parada Valenzuela City"},{"Raw Address":"455 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"97 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"168 FELISA ST. Parada Valenzuela City"},{"Raw Address":"18 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"312 MENES COMP. Parada Valenzuela City"},{"Raw Address":"214 IPIL ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 21 ST FORTUNE VillageE 5 Parada Valenzuela City"},{"Raw Address":"256 RIZALINA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"LOT 19 BLK 13 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"357 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"232 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"435 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"142 FORTUNE DRIVE FORTUNE5 Parada Valenzuela City"},{"Raw Address":"269 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"B4 L28 PARADA RD. Parada Valenzuela City"},{"Raw Address":"248 PARADA ROAD. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CONSUELO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"329 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"199 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"145 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"468 N KAINGIN ST Parada Valenzuela City"},{"Raw Address":"134 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"234 7TH STREET Parada Valenzuela City"},{"Raw Address":"260 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"FORTUNE Village 7.PARADA Valenzuela City"},{"Raw Address":"235 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"365 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"206 22ND ST. Parada Valenzuela City"},{"Raw Address":"31F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"202 22ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"361 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"177 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"290 ILOCT CMPD. PARADA Valenzuela City"},{"Raw Address":"S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"0257 ES DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ CMPD Parada Valenzuela City"},{"Raw Address":"310 MENES T. Parada Valenzuela City"},{"Raw Address":"132 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"184 FELIZA ST Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 14 TMHAI TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"Village 7 Parada Valenzuela City"},{"Raw Address":"250 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"94 Parada Valenzuela City"},{"Raw Address":"roup Parada Valenzuela City"},{"Raw Address":"138 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"336 TIA MANANG ST. PARADA Valenzuela City"},{"Raw Address":"B2 L6 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"159 NARRA Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"60 PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"B2L3 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"197 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"126 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"8 DR. M LAUREL DRIVE Parada Valenzuela City"},{"Raw Address":"265 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"101 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"237 19TH FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"MARS ST. #26 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"123 KAMAGONG ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"224 ABELARDO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"0117 A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"242 S . DE GUZMAN Parada Valenzuela City"},{"Raw Address":"462 P.GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"252A VillageA PARADA S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"406 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"omplete for the precinct. Parada Valenzuela City"},{"Raw Address":"161 Fortune Village 6 YAKAL ST.PARADA Valenzuela City"},{"Raw Address":"297-C T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"87C SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"333 A KAMAGONG Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST. FORTUNE IV Parada Valenzuela City"},{"Raw Address":"442 P.GOMEZ ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"360 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"407 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"168 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"72 JADE ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"110 FELISA ST. Parada Valenzuela City"},{"Raw Address":"1112 CAPATAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"358 J FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"8 5TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"123 CAPT. CRUS ST. Parada Valenzuela City"},{"Raw Address":"466 C KA BERONG ST. KAINGIN Parada Valenzuela City"},{"Raw Address":"422 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"161 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"Parada Valenzuela City"},{"Raw Address":"273 PILAR ST. Parada Valenzuela City"},{"Raw Address":"341 21 ST. BENMARIE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"413 TATA ERO Parada Valenzuela City"},{"Raw Address":"466 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"119 A KAMAGONG FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"384 S. DEGUZMAN ST Parada Valenzuela City"},{"Raw Address":"028 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"235 19TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"146 FORTUNE DRIVE 5 Parada Valenzuela City"},{"Raw Address":"280 PILAR ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"22 ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"297 C-T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"87 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"260 PARADA ST. PARADA Valenzuela City"},{"Raw Address":"18-A F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"440 BO. Parada Valenzuela City"},{"Raw Address":"#68 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"196 MOLAVE STREET Parada Valenzuela City"},{"Raw Address":"555 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"338 TIA MANANG ST. PARADA Valenzuela City"},{"Raw Address":"225 20 STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"370 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"190-B MOLAVE ST FORTUNE VIL6 Parada Valenzuela City"},{"Raw Address":"289-C P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"283 S.DE GHUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"412 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"266 Parada Valenzuela City"},{"Raw Address":"J.M.T.C. LAGDAMEO ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"406 BANDINO ST. Parada Valenzuela City"},{"Raw Address":"259 RIZALINA ST. Fortune Village 4 RD. Parada Valenzuela City"},{"Raw Address":"17-C F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"197 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"317 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"317 A.T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"339 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"9 31F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"395 SAN ANDRES Parada Valenzuela City"},{"Raw Address":"410 DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"BLK. 4 LOT 19 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"449 P. GOMES ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"392 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"17 SALAZAR ST. DOON COMPD. Parada Valenzuela City"},{"Raw Address":"061 PARADA RD. Parada Valenzuela City"},{"Raw Address":"277 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"260 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"01 NEPTUNE ST. Parada Valenzuela City"},{"Raw Address":"25TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"234 S DEGUZMAN Parada Valenzuela City"},{"Raw Address":"186 6 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"04 5TH ST. Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"167 RAMON ST. Parada Valenzuela City"},{"Raw Address":"279 PILAR ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"207 FELIZA Parada Valenzuela City"},{"Raw Address":"437 GOMEZ ST. FORTUNE Village PH.7 Parada Valenzuela City"},{"Raw Address":"234 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"CORNER CORAL Parada Valenzuela City"},{"Raw Address":"99 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"96 FELISA ST. Parada Valenzuela City"},{"Raw Address":"62 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"161 Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID VENUS STREET Parada Valenzuela City"},{"Raw Address":"314 JIMENEZ COMP Parada Valenzuela City"},{"Raw Address":"339 TANDANG MANANG PARADA Valenzuela City"},{"Raw Address":"86 SALVADOR ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"438 RUMARAO COMPOUND Parada Valenzuela City"},{"Raw Address":"MOLAVE ST. Fortune Village 6 182 D. Parada Valenzuela City"},{"Raw Address":"05 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"240 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"513 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"150 ALICIA Parada Valenzuela City"},{"Raw Address":"351 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"132 KAMAGONG Parada Valenzuela City"},{"Raw Address":"L5-207 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"13 5TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"146 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"LOT 19 BLK. 13 KAMAGONG STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"FV 4 Parada Valenzuela City"},{"Raw Address":"347 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"85 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"FORTUNE5 Village Parada Valenzuela City"},{"Raw Address":"447 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 17 GINTONG SILANGANG Parada Valenzuela City"},{"Raw Address":"#257 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"230 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"10 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"100 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"SILANGAN Parada Valenzuela City"},{"Raw Address":"BLK5 LOT10 JADE ST. HIYAS HOME Parada Valenzuela City"},{"Raw Address":"141 E. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"451 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"F SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"281 PILAR ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"185 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"454 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"294 TADANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"513 JIMENES CMPD. Parada Valenzuela City"},{"Raw Address":"77 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"448 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"2510 25 STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"297 D. T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"244 1ST. FV 5 Parada Valenzuela City"},{"Raw Address":"248 S. DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"135 YAKAL COR. NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"290 ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"329 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"067 PARADA RD. FORT. 6 Parada Valenzuela City"},{"Raw Address":"172 SALAZAR ST.  Parada Valenzuela City"},{"Raw Address":"320 E. MIURA APT. S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"#336 TIA MANANG Parada Valenzuela City"},{"Raw Address":"233 19TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"132 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"38 PARADA STREET Parada Valenzuela City"},{"Raw Address":"227 ABELARDO ST. FV4 Parada Valenzuela City"},{"Raw Address":"FORTUNE Village NO. 4 Parada Valenzuela City"},{"Raw Address":"407-A P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"0101 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"320 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"135 E. LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"009 PARADA STREET Parada Valenzuela City"},{"Raw Address":"153 ALICIA ST. FV4 Parada Valenzuela City"},{"Raw Address":"B6 Parada Valenzuela City"},{"Raw Address":"100 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"CITY MM Parada Valenzuela City"},{"Raw Address":"371-A TATA ANDRES Parada Valenzuela City"},{"Raw Address":"300 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"179 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"230S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"207 FELIZA CALLE ONSE Parada Valenzuela City"},{"Raw Address":"211 CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"230 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"#16B DOON COMP. Parada Valenzuela City"},{"Raw Address":"209 ANTHONY ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"232 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"88 SAN MIGUEL COMP. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"26 MARS STREET F SANTIAGO Parada Valenzuela City"},{"Raw Address":"318 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"254 A S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"184 FELISA Parada Valenzuela City"},{"Raw Address":"258 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"258-1 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG BLK 3 LOT 19 HOE Parada Valenzuela City"},{"Raw Address":"101 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"234 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGO EARTH ST Parada Valenzuela City"},{"Raw Address":"258 RIZALINA ST. FORTUNE Village4 ST. Parada Valenzuela City"},{"Raw Address":"F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"339 Fortune Village 5 20ST Parada Valenzuela City"},{"Raw Address":"169 DOON COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"281 PILAR ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"165 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"378 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"43 CAINGIN Parada Valenzuela City"},{"Raw Address":"25 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"2151 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"C-378 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"197 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"471C KABERONG ST Parada Valenzuela City"},{"Raw Address":"6TH ST. MOLAVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"2745 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"LOT 5 LOT 8 JADE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"449 GOMEZ STREET Parada Valenzuela City"},{"Raw Address":"200 FORTUNE DR. ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"39K RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"297 Parada Valenzuela City"},{"Raw Address":"291 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"474 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"12 5TH STREET FORTUNE FIVE Village Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"140 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"80 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"DOOR 1 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"294 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"101 M DEGULA ST. Parada Valenzuela City"},{"Raw Address":"4541 MOLAVE ST. FORTUNE5/6 Village Parada Valenzuela City"},{"Raw Address":"7TH ST. Fortune Village 5 FORTUNE Village Parada Valenzuela City"},{"Raw Address":"115 CPT CRUZ Parada Valenzuela City"},{"Raw Address":"392 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"89 D. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"035 PARADA Valenzuela City"},{"Raw Address":"EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"204 22ND ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"145 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. 21ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"177 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"094 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"228-B S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"99 SATURN STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"834 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"14 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"247 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"240 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"256 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"1EE MARS F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"414 PARADA Valenzuela City"},{"Raw Address":"245 ABELARDO Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"CALLE ONSE DULO BUKID Parada Valenzuela City"},{"Raw Address":"57 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"79 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"409 P. DE GUZMAN ST. BIAZON COMPOUND Parada Valenzuela City"},{"Raw Address":"863B KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"130 KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"21ST BENMARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"161 FELIZA ST. SALAZAR RD. Parada Valenzuela City"},{"Raw Address":"70 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"CALLE 11 BUKID Parada Valenzuela City"},{"Raw Address":"116 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"0260 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"154 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"39-A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"35 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"1 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"199 BENMARIE GARDEN FORTUNE Village Parada Valenzuela City"},{"Raw Address":"2932 ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"207 CALLE ONSE FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"358 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"BLK. 4 LOT 12 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"160 ALICIA ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"21 STREET BEN MARIE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"228 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"SINILNGAN Parada Valenzuela City"},{"Raw Address":"258 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"267 CORNER 19TH & 24TH ST Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANAG ST Parada Valenzuela City"},{"Raw Address":"201 CALLE ONCE ST. PARADA Valenzuela City"},{"Raw Address":"86 PARADA Valenzuela City"},{"Raw Address":"123 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"295 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"67 PARADA Valenzuela City"},{"Raw Address":"177 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"374 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"407 BANDIDO ST. Parada Valenzuela City"},{"Raw Address":"247 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"419 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"358-D J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"LOT9 BLK1 SAPHIRE ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"L9 GINTONG SILANG Parada Valenzuela City"},{"Raw Address":"255 E TOMASA STREET Parada Valenzuela City"},{"Raw Address":"134 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"345 F. FRANCISCO ST BO. Parada Valenzuela City"},{"Raw Address":"137 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"199 6TH ST.MANALANG CMPD Parada Valenzuela City"},{"Raw Address":"267 CORNER 24TH & 19TH STREET Parada Valenzuela City"},{"Raw Address":"15 SANTIAGO Parada Valenzuela City"},{"Raw Address":"36 C. PARADA RD. Parada Valenzuela City"},{"Raw Address":"LOT 5 BLK. 10 A NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"168 ACACIA Parada Valenzuela City"},{"Raw Address":"233 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"15 DIAMOND HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"513 ABCO COMP. TINDALO ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"26 F. SANTAIGO Parada Valenzuela City"},{"Raw Address":"302 - B TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"123-C CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"416 TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"14 PARADA Valenzuela City"},{"Raw Address":"120 25TH ST. FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"2 TINDALO ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"5 KAMAGONG Parada Valenzuela City"},{"Raw Address":"B2 L17 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"149 DALAWAN ST. BO.PARADA Valenzuela City"},{"Raw Address":"273 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"0067 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"11 5TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"473 ABERONG ST Parada Valenzuela City"},{"Raw Address":"182 FELIZA Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FORTUNE7 Parada Valenzuela City"},{"Raw Address":"39 AJERO COMP. RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"03 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"425 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"215 DAET COMP. Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"87 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"322 PEÑA COMP. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"182 FELISA Parada Valenzuela City"},{"Raw Address":"169 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 SANTIAGO Parada Valenzuela City"},{"Raw Address":"152 23RD ST.Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"609 7TH ST Parada Valenzuela City"},{"Raw Address":"36 G. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"434 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"457 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"208 22ND STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"339 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"58 A. Fortune Village 6 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"138 ELAGDAMEO ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"322 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"366 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"151 ACACIA Parada Valenzuela City"},{"Raw Address":"11-A F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"067 Fortune Village 6 PARADA RD. Parada Valenzuela City"},{"Raw Address":"136 D NARA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"#1 JADE ST.CORNER SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"253 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"178 RAMON ST. Parada Valenzuela City"},{"Raw Address":"44 PARADA FORTUNE V5 Parada Valenzuela City"},{"Raw Address":"525 EUGENIO Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. PARADA Valenzuela City"},{"Raw Address":"151 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"009 R.CABRAL Parada Valenzuela City"},{"Raw Address":"322 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"91 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"258 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"10 E CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"312 MENES COMP. PARADA Valenzuela City"},{"Raw Address":"267 CORNER 19TH AND 24TH ST FORTUNE Parada Valenzuela City"},{"Raw Address":"4684 PEARL ST. HIYAS HOMES. Parada Valenzuela City"},{"Raw Address":"128 YAKAL ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"404 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"410-A PARADA Valenzuela City"},{"Raw Address":"21ST BELMARIE CMPD. AGLEHAM Parada Valenzuela City"},{"Raw Address":"291 KAINGIN Parada Valenzuela City"},{"Raw Address":"90 ADOR ST Parada Valenzuela City"},{"Raw Address":"269B S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"252 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"LOT 41 BLK 10 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"207 FILIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"435 ZAMORA FORTUNE Village Parada Valenzuela City"},{"Raw Address":"KAINGIN Parada Valenzuela City"},{"Raw Address":"FELIZAS ST. BUKID 207 Parada Valenzuela City"},{"Raw Address":"190 6TH ST. MOLAVE FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"223 ABELARDO ST. FORTUNE Village IV Parada Valenzuela City"},{"Raw Address":"35 A PARADA RD. Parada Valenzuela City"},{"Raw Address":"L2 B11 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"BLK 7 LOT 4 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"328 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"004 PARADA ST. Parada Valenzuela City"},{"Raw Address":"0250 UNIT 6 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"184 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"178 23RD ST. Parada Valenzuela City"},{"Raw Address":"431 FORTUNE Village 7 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"394 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"317 T.MANANANG ST. PARADA Valenzuela City"},{"Raw Address":"330 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"22 EUQUINIO ST Parada Valenzuela City"},{"Raw Address":"367 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"242 19TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"170 DOON COMP. Parada Valenzuela City"},{"Raw Address":"068 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"440 P. GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 PARADA F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"3661 KAMAGONG ST. COR. YAKAL ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"246 S Parada Valenzuela City"},{"Raw Address":"476 SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"117 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"187 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"215 21ST ST. FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"414 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"169D 7ST FORTUNE5 Parada Valenzuela City"},{"Raw Address":"A 334 T. MANANG Parada Valenzuela City"},{"Raw Address":"023 T.EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"021 EUGENIO Parada Valenzuela City"},{"Raw Address":"LOT 6 B.F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"243 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK. 5 LOT 8 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"# 95 P DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"400 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"289 - D SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"409P. DE GUZMAN ST. VAL. M.M. Parada Valenzuela City"},{"Raw Address":"351 CAPTAIN FRANCISCO Parada Valenzuela City"},{"Raw Address":"469 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"243 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"359 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"448 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"403 P.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"207 FELEZA BUKID Parada Valenzuela City"},{"Raw Address":"349 Parada Valenzuela City"},{"Raw Address":"150 ALICIA STREET Parada Valenzuela City"},{"Raw Address":"257 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"B-5 L-8 JADE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"14 DIAMOND ST. HIYAS HOMES SUBDIVISION Parada Valenzuela City"},{"Raw Address":"249 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST FORTUNE VELLAGE4 Parada Valenzuela City"},{"Raw Address":"235 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"38 D TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"117 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"40 PEARL Parada Valenzuela City"},{"Raw Address":"021 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"073 FORTUNE Village 7 PARADA RD. EXT. Parada Valenzuela City"},{"Raw Address":"122 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"215 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"431 P. BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"276 AP DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 8 349 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"468 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"24-B EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"314 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"JADE ST. Parada Valenzuela City"},{"Raw Address":"351 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"200A 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"265 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"25TH ST. Fortune Village 5. PARADA Valenzuela City"},{"Raw Address":"352 Parada Valenzuela City"},{"Raw Address":"266 24TH STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"SMC- DUPLEX D Parada Valenzuela City"},{"Raw Address":"BLOCK 5 LOT 9 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"22 LOT F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"199 6TH ST. FORTUNE Village 5-6 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"274 PILAR ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"194 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"93 D CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"B1L4 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"223 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"247 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"190 MOLAVE STREET Parada Valenzuela City"},{"Raw Address":"109 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"165-G ACACIA STREET Parada Valenzuela City"},{"Raw Address":"P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"202 Parada Valenzuela City"},{"Raw Address":"299 T. MANANG ST. PARADA Valenzuela City"},{"Raw Address":"123 E.LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"431 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"118 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"241 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"320B S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"324 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"UNIT2 LOT17 BLK9 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"4815 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"360 J . FRANCISCO Parada Valenzuela City"},{"Raw Address":"L7A BLK8 PARADA RD. FV6 Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. B4L10 GS Parada Valenzuela City"},{"Raw Address":"225 ABELARDO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"67 PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"105 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"116 B. CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"33 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"CALYE 11 ST. Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG ST. BO.Parada Valenzuela City"},{"Raw Address":"098 Fortune Village 5 DRIVE Parada Valenzuela City"},{"Raw Address":"362 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"E LAGDAMEO FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"244 7 Fortune Village 5 STREET Parada Valenzuela City"},{"Raw Address":"438 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"26 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"465 KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"B4 L3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"347 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"59 BANDINO ST Parada Valenzuela City"},{"Raw Address":"101 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"320 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"457 INT. SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"94 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"148 Fortune Village 6 NARRA ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"122A KAMAGONG ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"441 SERVICE ROAD RUMARAO COMPD. Parada Valenzuela City"},{"Raw Address":"253 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"09 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"312 INT. MENES CMPD.PARADA Valenzuela City"},{"Raw Address":"13 PARADA RD. Valenzuela City Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE STREET Parada Valenzuela City"},{"Raw Address":"B3L2 TMHOA Parada Valenzuela City"},{"Raw Address":"14 B NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST FORTUNE Parada Valenzuela City"},{"Raw Address":"022 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"199 6TH ST. FORTUNE Village6 PARADA Valenzuela City"},{"Raw Address":"322 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. AGLEHAM STREET Parada Valenzuela City"},{"Raw Address":"16-F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMPOUND 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"247 7TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"133 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"225 Parada Valenzuela City"},{"Raw Address":"242 ABELARDO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"167 RAMON STREET Parada Valenzuela City"},{"Raw Address":"405 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"450 SERVICE RD Parada Valenzuela City"},{"Raw Address":"441 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"28 BARRIO Parada Valenzuela City"},{"Raw Address":"39 RAMON STREET Parada Valenzuela City"},{"Raw Address":"207 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"063 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"36 D. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"B7 L26 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"354 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"36C PARADA ST. Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"0232 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"45 A. F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"193 M.DE GULA ST.PARADA Valenzuela City"},{"Raw Address":"235 T. MANANG Parada Valenzuela City"},{"Raw Address":"203 B VENUS ST. Parada Valenzuela City"},{"Raw Address":"328 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"440 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"250 ABELARDO ST. Fortune Village 4 MALINTA Parada Valenzuela City"},{"Raw Address":"283 MARTHA ST. Parada Valenzuela City"},{"Raw Address":"126 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"11 D EMBUSCADO COMP. Parada Valenzuela City"},{"Raw Address":"423 L3-B3 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"130 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"247-C S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"443 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"223 ABELARDO ST. FV4 Parada Valenzuela City"},{"Raw Address":"107 E. LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"369 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"456-H KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"210 SALVADOR Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG ST Parada Valenzuela City"},{"Raw Address":"12 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"137 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"391 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"218 ANTHONY FV 4 Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST Parada Valenzuela City"},{"Raw Address":"379 TATA ANDREZ ST. Parada Valenzuela City"},{"Raw Address":"61 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"035 PARADA RD. Parada Valenzuela City"},{"Raw Address":"JIMENEZ ST. Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"BUKID Parada Valenzuela City"},{"Raw Address":"358 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"274 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"41 NARRA ST Parada Valenzuela City"},{"Raw Address":"310 MENEZ SMPD Parada Valenzuela City"},{"Raw Address":"264 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"349 F. FRANCIS OST. Parada Valenzuela City"},{"Raw Address":"157 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"199 21ST STREET BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"340 20 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"SALAZAR ST Parada Valenzuela City"},{"Raw Address":"ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"027 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"19 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"5 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"232 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK. 3 LOT 20 349 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"244 ABELARDO Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 8 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"438 Parada Valenzuela City"},{"Raw Address":"431 F. FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"114 KAMAGON ST. PARADA Valenzuela City"},{"Raw Address":"217 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"178 RAMON ST.FV 4 Parada Valenzuela City"},{"Raw Address":"31F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"103 KAMAGONG ST. FORT Village 6 Parada Valenzuela City"},{"Raw Address":"422 BURGOS STREET FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 12 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"216 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"8 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"214 DE GUZMAN Parada Valenzuela City"},{"Raw Address":"95 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMP. 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"206F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"B4 L13 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"235 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"308 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. FV4 Parada Valenzuela City"},{"Raw Address":"128 PARADA RD. FV6 Parada Valenzuela City"},{"Raw Address":"389 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"312 MENES CMPD. Parada Valenzuela City"},{"Raw Address":"294 KAINGIN Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. COMPOUND Parada Valenzuela City"},{"Raw Address":"BLK. 3 LOT 17 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"327 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"200-B CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"320 UNIT 2 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"6ST. COR. KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"BLK. 7 LOT 26 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"199 22ND ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"204 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"153 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"71 B. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"138 A NARRA ST. Parada Valenzuela City"},{"Raw Address":"259 ADOR ST. Parada Valenzuela City"},{"Raw Address":"B5 GOMEZ ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"134 CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"131 KAMAGONG Parada Valenzuela City"},{"Raw Address":"#362 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"140 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"400-A ILOCTO ST. SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"153 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"324 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"181 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"107 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"150 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"#281 PILAR ST. FV 4 Parada Valenzuela City"},{"Raw Address":"167 RAMON ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"339 T. MANANG ST Parada Valenzuela City"},{"Raw Address":"244 ESTRELLA APT. 7TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"KM.14 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"91 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"442 P. GOMEZ ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"098 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"028 PARADA RD. Parada Valenzuela City"},{"Raw Address":"1 DR.MARIANO LAUREL DRIVE Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"1F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"088 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"329 T. MANANG Parada Valenzuela City"},{"Raw Address":"151 ACACIA ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"185 FELISA ST. Parada Valenzuela City"},{"Raw Address":"169 DOON COMP. Parada Valenzuela City"},{"Raw Address":"ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"127 E. LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"183 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"095 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"207 FELISA Parada Valenzuela City"},{"Raw Address":"61 PARADA RD. Parada Valenzuela City"},{"Raw Address":"150 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"144 ALICIA FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"FATIMA COMPD. BARRIO Parada Valenzuela City"},{"Raw Address":"028 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"10TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"Fortune Village 7 GOMEZ ST. PARADA Valenzuela City"},{"Raw Address":"328 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 8 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"37 Parada Valenzuela City"},{"Raw Address":"360 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"177 MOLAVE ST. 6TH ST. FORTUN 5 Parada Valenzuela City"},{"Raw Address":"TATAERRO ST. Parada Valenzuela City"},{"Raw Address":"92 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"417 TATA ANDRESS ST Parada Valenzuela City"},{"Raw Address":"111 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"154 ALICIA STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"424 BURGOS ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"72 PARADA RD. Parada Valenzuela City"},{"Raw Address":"470 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"164 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"157 ALICIA ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"39-B RAMON ST. Parada Valenzuela City"},{"Raw Address":"031 PARADA Valenzuela City"},{"Raw Address":"289-D S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"448 SERVICE RD. HIYAS SUBD. PARADA Valenzuela City"},{"Raw Address":"57 PARADA RD. Fortune Village 6 VillageParada Valenzuela City"},{"Raw Address":"438 SILENCE RD. Parada Valenzuela City"},{"Raw Address":"117 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"BO.PARADA Valenzuela City"},{"Raw Address":"409 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"182 23RD STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"FATIMA COMP Parada Valenzuela City"},{"Raw Address":"404 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"438 PARADA FORTUNE Village7 Valenzuela City Parada Valenzuela City"},{"Raw Address":"04 P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"276 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO VENUS ST. Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"237 19TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"ROMAN ST. FORTUNE Village 4. Parada Valenzuela City"},{"Raw Address":"LOT 2 DIAMOND STREET HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"198 COR. & 21ST. 19TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"99 VENUS ST.F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"BLK. 5 LOT 1 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"LOT 3 BLK 7 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"333 KAMAGONG ST FV 5 & 6 Parada Valenzuela City"},{"Raw Address":"#287 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"UNIT 1 NARRA ST. Parada Valenzuela City"},{"Raw Address":"317 MENEZ CMPD Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 10 LUPANG SINILANGAN Parada Valenzuela City"},{"Raw Address":"LOT 10 FORTUNE F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"1548 E PEARL ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"127 YAKAL ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"198 RAMON STREE FV4 Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"039 D. SANTIAGO COMP. FV4 Parada Valenzuela City"},{"Raw Address":"412 TATAERO ST. Parada Valenzuela City"},{"Raw Address":"242 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"377 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"202 FILISA ST. Parada Valenzuela City"},{"Raw Address":"416 ZAMORA ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"374 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"348 Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DR. Parada Valenzuela City"},{"Raw Address":"468 KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"308 JIMENEZ Parada Valenzuela City"},{"Raw Address":"96 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"204B F.SANTIAGO STR. Parada Valenzuela City"},{"Raw Address":"31 B.O Parada Valenzuela City"},{"Raw Address":"116 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"134 5TH ST. Parada Valenzuela City"},{"Raw Address":"6TH STREET FORTUNE Village 5 NARRA ST. Parada Valenzuela City"},{"Raw Address":"95 P. DE GUZMAN TS. Parada Valenzuela City"},{"Raw Address":"121 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"P. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"96 Parada Valenzuela City"},{"Raw Address":"2039 SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"134 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"1164 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"39 C. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"#232 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"416 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. FORTUNE VillageE 4 Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 9 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"2311 8TH ST.FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPOUND Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"132 KANMAGONG ST. FV5 Parada Valenzuela City"},{"Raw Address":"FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"185 FELIZA Parada Valenzuela City"},{"Raw Address":"215 DAET COMPD.PARADA Valenzuela City"},{"Raw Address":"256 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"202 FELISA Parada Valenzuela City"},{"Raw Address":"CALE ONSE Parada Valenzuela City"},{"Raw Address":"425 ZAMORA ST. PARADA Valenzuela City"},{"Raw Address":"69 PARADA RD. Parada Valenzuela City"},{"Raw Address":"349 F FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"154 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"175-A MOLAVE ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"JADE ST. JADE HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"#5 IPIL ST. Parada Valenzuela City"},{"Raw Address":"032 PARADA ST. PARADA Valenzuela City"},{"Raw Address":"448 GOMEZ ST Parada Valenzuela City"},{"Raw Address":"116 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"181- RAMON ST. Parada Valenzuela City"},{"Raw Address":"353 J. FRANCIS ST. Parada Valenzuela City"},{"Raw Address":"206 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39 Parada Valenzuela City"},{"Raw Address":"DE GUZMAN Parada Valenzuela City"},{"Raw Address":"255 TOMASA STREET Parada Valenzuela City"},{"Raw Address":"310 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"181 FELISA ST. Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"257-B M DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"18-A F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"Q4-176 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"116 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"158 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"86 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"316 MENES COMP. Parada Valenzuela City"},{"Raw Address":"108 COR. YAKAL AND KAMAGONG ST FORTUNE Parada Valenzuela City"},{"Raw Address":"469 B KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"223 ABELARDO FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"234 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"(Member) Parada Valenzuela City"},{"Raw Address":"206 F.SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"039 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"303 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"41 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"190-B MOLAVE ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"237 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"211 21ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"407 P.DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"TATA ERO P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"69 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"399 SAN ANDRES ST Parada Valenzuela City"},{"Raw Address":"194 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"B2 LOT 14 F. FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"BLK. 3 LOT 1 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"271 CONSUELO ST Parada Valenzuela City"},{"Raw Address":"244 ESTRELLIA APARTMENT Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"244 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"19 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"162 E SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"244 19TH STREET FORTUNE V Village Parada Valenzuela City"},{"Raw Address":"F SANTIAGO Parada Valenzuela City"},{"Raw Address":"TATA ANDRES Parada Valenzuela City"},{"Raw Address":"141 NARRA ST. Parada Valenzuela City"},{"Raw Address":"F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"316 JEMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"104 KAMAGONG ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"108 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"455 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"315 JIMENEZ COMP Parada Valenzuela City"},{"Raw Address":"419 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"93 A. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"313 PARADA Valenzuela City"},{"Raw Address":"001 INTER ISLAND FEEDS PARADA Valenzuela City"},{"Raw Address":"154 NARRA ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 5TM HOA TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"88 KAMAGONG ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID CALLE ONSE Parada Valenzuela City"},{"Raw Address":"203 B VENUS ST. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"L4 B10 25TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"402 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"160 ACACIA CORNER MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"0004 JADE ST HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"101 DE GULA CMPD. CAPT CRUZ. ST. Parada Valenzuela City"},{"Raw Address":"CALLE ONSE ST. DULO Parada Valenzuela City"},{"Raw Address":"222 ANTHONY STREET FORTUNE Village IV Parada Valenzuela City"},{"Raw Address":"#384 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"168 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"001 BO Parada Valenzuela City"},{"Raw Address":"B2 L 1O GINTONG SILANGAN FRANCISCO Parada Valenzuela City"},{"Raw Address":"137 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"204 VENUS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"422 BURGOS ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"75 GOMEZ ST FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"366 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"032 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"270 CONSUELO ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"32 PARADA RD. Parada Valenzuela City"},{"Raw Address":"339 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"442 FORTUNE Village 7. Parada Valenzuela City"},{"Raw Address":"355 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"13 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"22 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"087 PARADA Valenzuela City"},{"Raw Address":"25 ST. FORTUNE VLL. 5 PARADA Valenzuela City"},{"Raw Address":"243 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"BLK. 2 LOT 9 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"297 D. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"332 T. MANANG ST Parada Valenzuela City"},{"Raw Address":"33 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"391 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"277 PILAR ST. Parada Valenzuela City"},{"Raw Address":"9 DR.LAUREL ST. FORTUNE Village4 Valenzuela City Parada Valenzuela City"},{"Raw Address":"Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"ILOCTO CMPD. PARADA Valenzuela City"},{"Raw Address":"72 JADE ST. HIYAS SUBD. PARADA Valenzuela City"},{"Raw Address":"130 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"147 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"283 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B2 L2 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"021 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"367 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"421 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"40 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"264 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"42 PARADA RD Parada Valenzuela City"},{"Raw Address":"201 - A FELIZA ST. Parada Valenzuela City"},{"Raw Address":"449 P. GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"117 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"187 FELIZA ST. UNIT 12 Parada Valenzuela City"},{"Raw Address":"101 DE GULA CMPD. PARADA Valenzuela City"},{"Raw Address":"169 ACACIA FORTUNE Village Parada Valenzuela City"},{"Raw Address":"CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"LOT 2 BLOCK 10 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"269 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"L4 B10 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"125 CONSUELO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"94 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"112 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"349F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"26 F Parada Valenzuela City"},{"Raw Address":"89 D CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"232 Parada Valenzuela City"},{"Raw Address":"349 A. FRANCISCO Parada Valenzuela City"},{"Raw Address":"L-11 BLK-2 SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"104 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"2427 7TH ST. Parada Valenzuela City"},{"Raw Address":"377 I8ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLK3 LOT2 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"2646 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"129 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"235 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"130 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"141 DALAWAN Parada Valenzuela City"},{"Raw Address":"229 ABELARDO ST. PARADA Valenzuela City"},{"Raw Address":"247 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"11-C 230 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"409 P.DE GUZMAN ST PARADA Valenzuela City"},{"Raw Address":"343 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"199 BEN MARIE AGLIHAM COMPOUND 21ST Parada Valenzuela City"},{"Raw Address":"410 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"39 RAMON ST . PARADA Valenzuela City"},{"Raw Address":"199 6ST Parada Valenzuela City"},{"Raw Address":"871 FELIZA ST Parada Valenzuela City"},{"Raw Address":"187 MOLAVE ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"424 A.BURGOS ST. Parada Valenzuela City"},{"Raw Address":"OLIVA COR. RAMON ST. Parada Valenzuela City"},{"Raw Address":"108 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"203 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"185 Parada Valenzuela City"},{"Raw Address":"141 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"94 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"36C PARADA RD Parada Valenzuela City"},{"Raw Address":"#8 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"0411 AP DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"138 LAGDAMEO RD. Parada Valenzuela City"},{"Raw Address":"406 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. F. SANTIAGO COMPD. Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"116 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"198 CALLE ONSE PARADA Valenzuela City"},{"Raw Address":"88 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"95 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"232 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"562 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"8 VENANCIO INT. RD. P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"406 P.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"272 PILLAR STREET Parada Valenzuela City"},{"Raw Address":"118 1ST ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"140 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"239 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"LOT 10 BLK 2 PARADA ROAD EXT. FORTUNE Parada Valenzuela City"},{"Raw Address":"94B FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"100 F. CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"236 S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"CONSUELO ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"171 SALAZAR Parada Valenzuela City"},{"Raw Address":"99 UNI STAR F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"246-C S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"250 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"36 Parada Valenzuela City"},{"Raw Address":"333 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"395 E. SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"83 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO ST. BO. Parada Valenzuela City"},{"Raw Address":"142 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"42 PARADA RD/ Parada Valenzuela City"},{"Raw Address":"04 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"153 SALAZAR ST.. PARADA Valenzuela City"},{"Raw Address":"224 CONSUELO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"57 PARADA RD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"139 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"BLK. 4 LOT 6 GINTONG SILANGAN F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"364 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"456-K KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"14 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"314 JIMENEZ CMPD. Parada Valenzuela City"},{"Raw Address":"130 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"12 D. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"22ND ST. 207 FORTUEN 5 Village Parada Valenzuela City"},{"Raw Address":"12 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"86 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"4488 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"273 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"404 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"29 Parada Valenzuela City"},{"Raw Address":"168 ALICIA ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"121 CONSUELO Parada Valenzuela City"},{"Raw Address":"Village Parada Valenzuela City"},{"Raw Address":"1 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"441 P. GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"400 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"168 DOON COMPOUND Parada Valenzuela City"},{"Raw Address":"299 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"087 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 7 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"L9 B1 HIYAS Parada Valenzuela City"},{"Raw Address":"LOT 41 BLK. 10 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"393 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"122 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"458 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"209 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"B22 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"207 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"11 RD. PARADA ST. Parada Valenzuela City"},{"Raw Address":"86 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"202 FELISA ST. PARADA Valenzuela City.A Parada Valenzuela City"},{"Raw Address":"186 D. FELIZA ST. Parada Valenzuela City"},{"Raw Address":"187-A FELIZA ST. Parada Valenzuela City"},{"Raw Address":"DOOR 1 M. DE GULA Parada Valenzuela City"},{"Raw Address":"339 20TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"456-D KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"308 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"256 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"224 20TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"320 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"243 7ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"299 JIMENES Parada Valenzuela City"},{"Raw Address":"26 MARS F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"326 T. MANANG STREET Parada Valenzuela City"},{"Raw Address":"220-A 21ST STREET Parada Valenzuela City"},{"Raw Address":"308 T MANANG Parada Valenzuela City"},{"Raw Address":"11C 230 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"417 TATA ERO Parada Valenzuela City"},{"Raw Address":"145 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"154 C. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"360 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"27 Parada Valenzuela City"},{"Raw Address":"028 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"109 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"457 E KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"B5L8 JADE ST HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"405 P. DE GUZMAN ST/ Parada Valenzuela City"},{"Raw Address":"088 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"178 KAMAGONG ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"162 SALAZAR Parada Valenzuela City"},{"Raw Address":"031 PARADA RD. Parada Valenzuela City"},{"Raw Address":"290 A.SANTOLAN RD. PARADA Valenzuela City"},{"Raw Address":"87 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"449 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"124-B CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"14 DIAMOND ST. Parada Valenzuela City"},{"Raw Address":"102 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 7 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"31 EARTH ST. P.SANTIAGO Parada Valenzuela City"},{"Raw Address":"297 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"# 39 RAMON ST. Parada Valenzuela City"},{"Raw Address":"340 20TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"DOOR F SANTOS TOWNHOUSE P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"185 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. AGLIHAM Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"261 A 25TH STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"412 TATA ERO Parada Valenzuela City"},{"Raw Address":"61 MARS ST. Parada Valenzuela City"},{"Raw Address":"130 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"248 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"A. TATAERO P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"182 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"168 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"455 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"185- C FELIZA ST. Parada Valenzuela City"},{"Raw Address":"P.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"94 PARADA Valenzuela City"},{"Raw Address":"002 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"3200 DIMAUNAHAN CMPD PARADA Valenzuela City"},{"Raw Address":"269 SDEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"225 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"147 DALAWAN STREET Parada Valenzuela City"},{"Raw Address":"390 IMPONG JUANA Parada Valenzuela City"},{"Raw Address":"199 21ST. FORTUNE Village V Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"140 CAPT. CRUZ COR E FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. F.SANTIAGO COMPOUND Parada Valenzuela City"},{"Raw Address":"234 ABELARDO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"278 PILAR ST FORTUNE VLL.4 Parada Valenzuela City"},{"Raw Address":"345 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"240 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"322 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"143 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"36 T. ANDRES ST. VAL. MM Parada Valenzuela City"},{"Raw Address":"#002 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"18 Parada Valenzuela City"},{"Raw Address":"190 6TH ST. FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"252 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"365 Parada Valenzuela City"},{"Raw Address":"117-B CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"8 YAKAL ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"468 N. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"406 BANDINO ST. P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"194 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"135 YAKAL CORNER NARRA STREET Parada Valenzuela City"},{"Raw Address":"374 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"420 ZAMORA STREET FV7 Parada Valenzuela City"},{"Raw Address":"101 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"165-G5 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"182 23RD ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"067 FURTUNE 6 Parada Valenzuela City"},{"Raw Address":"407 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"215 S. DE GUZMAN DAET COMPOUND Parada Valenzuela City"},{"Raw Address":"170 MOLAVE STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"44B SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"1727B-TATAERO Parada Valenzuela City"},{"Raw Address":"244 7TH ST. PARADA Valenzuela City"},{"Raw Address":"187 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"30 PARADA RD Parada Valenzuela City"},{"Raw Address":"ALICIA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"224 ABELARDO ST. FV 4 Parada Valenzuela City"},{"Raw Address":"#223 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"342 TIA MANANG ST. PARADA Valenzuela City"},{"Raw Address":"2345 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"415 TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"VENUS STREET 207 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"B2L23 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"B1L9 T. MANANG Parada Valenzuela City"},{"Raw Address":"039 PARADA RD. Parada Valenzuela City"},{"Raw Address":"67B. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"314 MENES COMPOUND Parada Valenzuela City"},{"Raw Address":"BLK. 4 LOT 3 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"196 MOLAVE ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"246 Parada Valenzuela City"},{"Raw Address":"440 SERVICE ROAD RUMARAO CMPD. Parada Valenzuela City"},{"Raw Address":"25TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"216 ANTHONY STREET Parada Valenzuela City"},{"Raw Address":"349 S. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"187-B FELIZA ST. Parada Valenzuela City"},{"Raw Address":"264 25 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"ROOM G 260 TATA ROMAN STREET Parada Valenzuela City"},{"Raw Address":"250 25 ST. FORTUNE DRIVE Village. 5&6 Parada Valenzuela City"},{"Raw Address":"45 AF SANTIAGO Parada Valenzuela City"},{"Raw Address":"B3 L22 TANDANG MANANG HOA Parada Valenzuela City"},{"Raw Address":"119 B PEARL ST. HIYAS SUBDIVISION Parada Valenzuela City"},{"Raw Address":"TELIZA BUKID Parada Valenzuela City"},{"Raw Address":"113 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"75 PARADA RD. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"7 F.SANTIAGO PARADA Valenzuela City"},{"Raw Address":"395 E. SAN ANDRES Parada Valenzuela City"},{"Raw Address":"T.EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"BLK 4 LOT 15 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"L6 Parada Valenzuela City"},{"Raw Address":"BLK 11 LOT 24 MOLAVE ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"243 PASING Parada Valenzuela City"},{"Raw Address":"# 80 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"105 KAMAGONG ST. FORTUNE VillageE 6 Parada Valenzuela City"},{"Raw Address":"192 M DE GULA ST Parada Valenzuela City"},{"Raw Address":"127 YAKAL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"91 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"412 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"185B MOLAVE ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"20 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"423 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"105 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"240 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"206 F SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"286 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"311 PARADA Valenzuela City"},{"Raw Address":"372 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"23 T. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"347 FRANCISCO Parada Valenzuela City"},{"Raw Address":"165 SALAZAR Parada Valenzuela City"},{"Raw Address":"341 20TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"13 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"230 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"196 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"204 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"245 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"174 FELISA ST. Parada Valenzuela City"},{"Raw Address":"308 JIMENIZ COMPOUND Parada Valenzuela City"},{"Raw Address":"123 CAPT. Parada Valenzuela City"},{"Raw Address":"222 ANTHONY Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"31 F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"338 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"3-B F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"314 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"26 F SANTIAGO PARADA V.C Parada Valenzuela City"},{"Raw Address":"456 B. KAINGIN ST Parada Valenzuela City"},{"Raw Address":"204 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"385 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"427 A BURGOS Parada Valenzuela City"},{"Raw Address":"17 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"Q5-151 SAPPHIRE ST. HIYAS SUBD. WEST Parada Valenzuela City"},{"Raw Address":"190 6TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"392 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"237 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"158 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"40 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"39 RAMOS ST. Parada Valenzuela City"},{"Raw Address":"316 BO JIMENEZ Parada Valenzuela City"},{"Raw Address":"256 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"384 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"272 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"124 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"21 ST AGLEHAM COMP. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"073 PARADA RD EXT. FORTUNE VillageE Parada Valenzuela City"},{"Raw Address":"90 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"138 E. LAGDAMEO STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"204 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"LOT 6 B. F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"F FRANCISCO Parada Valenzuela City"},{"Raw Address":"45 A F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"234 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"5-5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"237-19 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"183 MOLAVE Parada Valenzuela City"},{"Raw Address":"241 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"411 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"347 BO. PARADA Valenzuela City"},{"Raw Address":"470 A KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"CAPT.CRUZ ST PARADA Valenzuela City"},{"Raw Address":"BLK4 LOT 18 PEARL ST. HIYAS Parada Valenzuela City"},{"Raw Address":"199 BENMARY 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"57 PARADA ROAD FV6 Parada Valenzuela City"},{"Raw Address":"198 COR 19TH & 21TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"297 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"139 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"426 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"276 UNIT A Parada Valenzuela City"},{"Raw Address":"24TH ST. 266 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"36 A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"96 FELIZA Parada Valenzuela City"},{"Raw Address":"52 PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"273 S- DE GUZMAN Parada Valenzuela City"},{"Raw Address":"BLK5 LOT11 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"093 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"187 24TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"316 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"119 B PEARL ST HIYAS SUBD Parada Valenzuela City"},{"Raw Address":"192 M. DEGULA Parada Valenzuela City"},{"Raw Address":"DOON COMPD. 168 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"377 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"435 ZAMORA SR. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"055 KAMAGONG Parada Valenzuela City"},{"Raw Address":"185 23RD ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"266 24 ST. FORTUNE V-5 Parada Valenzuela City"},{"Raw Address":"113 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"316 MENEZ COMP. Parada Valenzuela City"},{"Raw Address":"COR. 23 RD ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"1 PARADA RD. Parada Valenzuela City"},{"Raw Address":"012 PARADA RD Parada Valenzuela City"},{"Raw Address":"419 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"316 MENES COMPD. Parada Valenzuela City"},{"Raw Address":"412 C. P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"281 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"271 MARTHA Parada Valenzuela City"},{"Raw Address":"241 7 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"194 FORTUNE Village 5 6TH ST. Parada Valenzuela City"},{"Raw Address":"332 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"15 F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"13 5TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B4 L9 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"5TH ST Parada Valenzuela City"},{"Raw Address":"UNIT 5 ALFONSO APARTMENT M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 11 SAPPHIRE ST. HIYAS Parada Valenzuela City"},{"Raw Address":"360 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"LOT 10 P. SANTIAGO Parada Valenzuela City"},{"Raw Address":"165 ACACIA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"175 MOLAVE Parada Valenzuela City"},{"Raw Address":"225 A. BELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"78 B PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"120 LAGDAMEO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"322 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"136 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"28 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"170 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"187 PARADA STREET Parada Valenzuela City"},{"Raw Address":"448 SERVICE ROAD DULO Parada Valenzuela City"},{"Raw Address":"FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"2 ACACIA COR. YAKAL ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"102 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"L49 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"0457 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"204 VENUS Parada Valenzuela City"},{"Raw Address":"356 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"258 M DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"224 ABELARDO Parada Valenzuela City"},{"Raw Address":"503 TINDALO ST. ABCO COMPD. Parada Valenzuela City"},{"Raw Address":"230 EMBUSADO S. DE GUZMAN ST.Parada Valenzuela City"},{"Raw Address":"230 1-F EMBUSCADO S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"184 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"0320 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"90 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"199 2 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"349 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"290 M. ILOCTO Parada Valenzuela City"},{"Raw Address":"170 DOON COMPOUND SSALAZAR ST. Parada Valenzuela City"},{"Raw Address":"318 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"202 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"106 LAGDAMEO ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"29A KAMAGONG Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"27A PARADA RD Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"258 M. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"202 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"31 EARTH F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"SISCAR APT. Parada Valenzuela City"},{"Raw Address":"260 A. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"25 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. PARADA Valenzuela City"},{"Raw Address":"214 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"#1 E&E MARS ST F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"99 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"133 KAMAGONG ST. FORTUNE VillageE 6 Parada Valenzuela City"},{"Raw Address":"31 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"188 PARADA Valenzuela City"},{"Raw Address":"1618 PARAFORT M. DELOS REYES Parada Valenzuela City"},{"Raw Address":"469 KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"147 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"153 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"94 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"071 Parada Valenzuela City"},{"Raw Address":"364 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"228 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"266 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"448 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"2 TINDALO STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"199 BENMARIE GARDEN 21ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"315 JIMENES COMP. Parada Valenzuela City"},{"Raw Address":"214 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"39 C PARADA RD VALENZUELA CITY Parada Valenzuela City"},{"Raw Address":"446 RUMARAO COPMD. PARADA Valenzuela City"},{"Raw Address":"157 A. LITICIA ST. FV 4 Parada Valenzuela City"},{"Raw Address":"175 RAMON STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"LOT 19 BLK 8 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"76 PARADA RD. EXT. FORTUNE Village 7 Valenzuela City Parada Valenzuela City"},{"Raw Address":"415 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"440 ROMARAW COMPOUND Parada Valenzuela City"},{"Raw Address":"204 B F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"271 MARTA STREET Parada Valenzuela City"},{"Raw Address":"039 Parada Valenzuela City"},{"Raw Address":"14 DIAMOND ST. HIYAS SUBDIVISION Parada Valenzuela City"},{"Raw Address":"08 5TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"160 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"215 21ST. FORTUNE VillageS 5 Parada Valenzuela City"},{"Raw Address":"63 PARADA Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"254 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"203 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"313 MENEZ ST. PARADA Valenzuela City"},{"Raw Address":"24E EUGENIO ST Parada Valenzuela City"},{"Raw Address":"126 LAGDAMEO FORTUNE IV Village Parada Valenzuela City"},{"Raw Address":"PARADA RD. ST. Parada Valenzuela City"},{"Raw Address":"390 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"241 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"241 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"173 23RD ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"133 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"278 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"26 F. MARS ST. Parada Valenzuela City"},{"Raw Address":"405 P.DEGUZMAN PARADA Valenzuela City"},{"Raw Address":"BLK. 1 LOT 7 Fortune Village 5 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"118 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"450 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"24 EUGENIO COMP. Parada Valenzuela City"},{"Raw Address":"45 ST. F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"437 ZAMORA Parada Valenzuela City"},{"Raw Address":"210 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"#26 MARS ST. Parada Valenzuela City"},{"Raw Address":"312 D JIMENEZ COMPOUND ST. Parada Valenzuela City"},{"Raw Address":"2411 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"028 Parada Valenzuela City"},{"Raw Address":"31 EARTH ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"036-C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"283 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"257 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"290 ILOCTO COMPD. Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"24 VENUS ST. Parada Valenzuela City"},{"Raw Address":"203 18TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE AGLEHAM COMP. 21ST ST. FV5 Parada Valenzuela City"},{"Raw Address":"388 IMPONG JUANA ST. Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"BLOCK 4 LOT 19 F. FRANCISCO ST. GINTONG Parada Valenzuela City"},{"Raw Address":"207 FELISA BUKID ST. Parada Valenzuela City"},{"Raw Address":"222 SALVADOR ST Parada Valenzuela City"},{"Raw Address":"064 PARADA RD Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"083 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"FORTUNE Village Parada Valenzuela City"},{"Raw Address":"269 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"234 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"36 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"APT.14 RIVERA CMPD. TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"0320 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"161 SALAZAR ST.PARADA Valenzuela City"},{"Raw Address":"F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"93 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"215 DAET COMPOND Parada Valenzuela City"},{"Raw Address":"15 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"#146 ALICIA ST. F4 Parada Valenzuela City"},{"Raw Address":"22 A. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. BENMARIE COMPD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"471 KABERONG ST. PARADA Valenzuela City"},{"Raw Address":"167 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"21 FORTUNE Village 5 STREET Parada Valenzuela City"},{"Raw Address":"267 PETER ST. Parada Valenzuela City"},{"Raw Address":"184 MOLAVE ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"136 E.LAGDAMEO ST.PARADA Valenzuela City.A Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 13 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"0147 DOON COMP. SALAZAR Parada Valenzuela City"},{"Raw Address":"199 21ST. FORTUNE Village PARADA Valenzuela City"},{"Raw Address":"68 PARADA RD. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"513 TINDALO Parada Valenzuela City"},{"Raw Address":"413 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"B3 L11 TMHOA TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"123 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"21 ST. BEN MARIE COMP. Parada Valenzuela City"},{"Raw Address":"25 PARADA RD Parada Valenzuela City"},{"Raw Address":"198 CORNER 19TH &21ST STS. Parada Valenzuela City"},{"Raw Address":"#39 K. RAMON ST. Parada Valenzuela City"},{"Raw Address":"202 FELIZA ST.PARADA Valenzuela City"},{"Raw Address":"#22 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"44 PARADA RD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"188 DE GULA COPD Parada Valenzuela City"},{"Raw Address":"39 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"39 PARADA ST. Parada Valenzuela City"},{"Raw Address":"9 5TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"995 SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"266 B 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"260 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"039 D SANTIAGO COMP. Parada Valenzuela City"},{"Raw Address":"243 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"91 ADOR ST. Parada Valenzuela City"},{"Raw Address":"PUROK 6 207 FELIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"126 B CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"207 FELISA BUKID Parada Valenzuela City"},{"Raw Address":"472 KABERONG ST. PARADA Valenzuela City"},{"Raw Address":"99 VENUS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"668 P. GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"451 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"055 BURGOS ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"BLOCK 13 C LOT 8 7TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"274 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"140 NARRA ST. Parada Valenzuela City"},{"Raw Address":"418 ZAMORA ST FV7 Parada Valenzuela City"},{"Raw Address":"3 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"M.M. Parada Valenzuela City"},{"Raw Address":"416 KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"100 CAPT.CRUZ ST.DE GULA CMPD. Parada Valenzuela City"},{"Raw Address":"BLK3 LOT 2 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"0320 UNIT 8 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"6 6TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"96 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"237 19TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"2 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"C. CALLE ONSE BUKID Parada Valenzuela City"},{"Raw Address":"406 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"369 A TATA ANDRESS ST Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 7 PARADA RD. FORTUNE VillageS Parada Valenzuela City"},{"Raw Address":"121 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"73 SAINT MARYS DULO Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"357 J/ FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"384 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"116 CALLEONCE Parada Valenzuela City"},{"Raw Address":"405 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"B4 L5 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"469 PARADA ST KAINGIN Parada Valenzuela City"},{"Raw Address":"87 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"245 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"273 PILAR STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"108 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"257 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"471 KA BERONG ST. Parada Valenzuela City"},{"Raw Address":"153 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"28 NARRA ST. Parada Valenzuela City"},{"Raw Address":"186 6TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"BLK1 LOT 7 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"118 DOOR 3 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"RUMARAO COMP. SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"130 Parada Valenzuela City"},{"Raw Address":"BLOCK 2 LOT 2 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"72 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"133 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"B2L7 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"229 18TH STREET Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"2451 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"E FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"460 GOMEZ ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"171 SALAZAR. ST. Parada Valenzuela City"},{"Raw Address":"235 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"442 GOMEZ FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"249 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"26 F SANTIAGO MARS STREET Parada Valenzuela City"},{"Raw Address":"332 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"328 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"82 RAMON ST. SANTIAGO COMP. Parada Valenzuela City"},{"Raw Address":"145 NARRA ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGO MARS ST. Parada Valenzuela City"},{"Raw Address":"316 JIMENES COMPOUND Parada Valenzuela City"},{"Raw Address":"348 CAPT. F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"CALLE ONSE Parada Valenzuela City"},{"Raw Address":"091 DAET COMPOUND Parada Valenzuela City"},{"Raw Address":"330 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"166 6ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"139 NARRA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"336 ST. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"24 VENUS E&E COMPD.1 SANTIAGO Parada Valenzuela City"},{"Raw Address":"317 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"7 GSR SATIAGO ST. Parada Valenzuela City"},{"Raw Address":"190 DE GULA ST. Parada Valenzuela City"},{"Raw Address":"350 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"0089 B CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"L41 B10 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"888 NARRA ST. Parada Valenzuela City"},{"Raw Address":"444 RUMARAO CMPD. PARADA Valenzuela City"},{"Raw Address":"141 DALAWIN ST. PARADA Valenzuela City"},{"Raw Address":"11 5TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"382 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"447 FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"31 Parada Valenzuela City"},{"Raw Address":"B3 L6 TINDALO ST. FV5 Parada Valenzuela City"},{"Raw Address":"90 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"BLK 4 LOT 13 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"56 FORTUNE VillageE Parada Valenzuela City"},{"Raw Address":"251 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"26 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"442 P. GOMEZ Parada Valenzuela City"},{"Raw Address":"254 A S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"297D TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"174 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"146 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"23RD ST. Parada Valenzuela City"},{"Raw Address":"440 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"#17 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ ADOR ST Parada Valenzuela City"}]'),Xv=({children:t})=>q.jsxs("div",{className:"layout",children:[q.jsx(ML,{}),q.jsx("div",{className:"content",children:t})]}),mEe=t=>pEe.some(e=>e["Raw Address"].toLowerCase().includes(t.toLowerCase())),gEe=()=>{const[t,e]=ie.useState([]),[a,r]=ie.useState(""),[i,l]=ie.useState(1),[c,n]=ie.useState([]),[v,R]=ie.useState(""),[x,N]=ie.useState(1),[L,F]=ie.useState({registered:0,pending:0,rejected:0,total:0}),[j,$]=ie.useState(null),[H,W]=ie.useState([]),[ee,se]=ie.useState(""),[fe,le]=ie.useState(null),me=5;ie.useEffect(()=>{ge(),Re(),we()},[]);const ge=async()=>{try{const be=(await Hi(Dn(wr,"approved_users"))).docs.map(Te=>({uid:Te.id,...Te.data()}));e(be)}catch(qe){console.error("Error fetching registered users:",qe)}},Re=async()=>{try{const[qe,be]=await Promise.all([Hi(Dn(wr,"pending_users")),Hi(Tg(Dn(wr,"approved_users"),cR("isPending","==",!0)))]),Te=qe.docs.map(Ge=>({uid:Ge.id,...Ge.data()})),ke=be.docs.map(Ge=>({uid:Ge.id,...Ge.data()}));n([...Te,...ke])}catch(qe){console.error("Error fetching pending users:",qe)}},we=async()=>{try{const qe=await Hi(Dn(wr,"admins")),be=new Map;qe.docs.forEach(rt=>{var ot;const lt=rt.data();be.set(lt.uid,{name:lt.name,role:((ot=lt.roles)==null?void 0:ot[0])||"Admin"})});const ke=(await Hi(Dn(wr,"user_reports"))).docs.map(rt=>{var ve,Vt;const lt=rt.data(),ot=be.get(lt.reportedBy);return{id:rt.id,...lt,reportedByName:ot?`${ot.name} (${ot.role})`:"Unknown Admin",timestamp:(ve=lt.createdAt)!=null&&ve.toDate?lt.createdAt.toDate():new Date(((Vt=lt.createdAt)==null?void 0:Vt.seconds)*1e3),violationType:lt.violationType||"Not Specified",details:lt.details||"No details provided"}}),Ge=[...new Set(ke.map(rt=>rt.userId))],at=await Promise.all(Ge.map(async rt=>{const ot=(await Xf(ds(wr,"approved_users",rt))).data(),ve=ke.filter(Vt=>Vt.userId===rt);return{uid:rt,...ot,reports:ve.map(Vt=>({...Vt,reportedBy:Vt.reportedByName,timestamp:Vt.timestamp,violationType:Vt.violationType,details:Vt.details})),isBanned:(ot==null?void 0:ot.isBanned)||!1}}));W(at)}catch(qe){console.error("Error fetching flagged users:",qe)}},Ve=async(qe,be)=>{try{const Te=ds(wr,"pending_users",qe),Ge=(await Xf(Te)).data();if(be==="approve"){const at=mEe(Ge.address);if(!at&&!window.confirm("This address is not in the validated list. Are you sure you want to approve this user?"))return;await zv(Dn(wr,"approved_users"),{...Ge,status:"approved",approvedAt:new Date,addressValidated:at}),await hX(Te)}else be==="reject"&&await yu(Te,{status:"rejected",rejectedAt:new Date});ge(),Re()}catch(Te){console.error("Error processing user action:",Te)}},oe=async(qe,be)=>{try{const Te=ds(wr,"approved_users",qe);await yu(Te,{isBanned:be,bannedAt:be?new Date:null}),await zv(Dn(wr,"user_notifications"),{userId:qe,type:be?"account_banned":"account_unbanned",title:be?"Account Banned":"Account Reinstated",message:be?"Your account has been banned due to violations.":"Your account has been reinstated.",createdAt:new Date,isRead:!1}),we(),ge()}catch(Te){console.error("Error updating user ban status:",Te)}},_e=qe=>{le({userName:`${qe.first_name} ${qe.middle_name} ${qe.surname}`,reports:qe.reports.map(be=>{var ke,Ge;const Te=be.timestamp instanceof Date?be.timestamp:(ke=be.timestamp)!=null&&ke.toDate?be.timestamp.toDate():new Date(((Ge=be.timestamp)==null?void 0:Ge.seconds)*1e3);return{...be,timestamp:Te}})})},Fe=()=>{le(null)},Ee=ie.useMemo(()=>t.filter(qe=>`${qe.first_name} ${qe.middle_name} ${qe.surname} ${qe.email}`.toLowerCase().includes(a.toLowerCase())),[t,a]),ze=Math.ceil(Ee.length/me),Se=ie.useMemo(()=>{const qe=(i-1)*me;return Ee.slice(qe,qe+me)},[Ee,i]),je=ie.useMemo(()=>c.filter(qe=>`${qe.first_name} ${qe.middle_name} ${qe.surname} ${qe.email}`.toLowerCase().includes(v.toLowerCase())),[c,v]);ie.useEffect(()=>{(()=>{F({registered:t.length,pending:c.length,rejected:c.filter(be=>be.status==="rejected").length,total:t.length+c.length})})()},[t,c]);const Ue=({status:qe,addressValidated:be,isPending:Te})=>qe==="approved"?q.jsxs("div",{className:"status-container",children:[q.jsx(aB,{className:"status-icon approved",title:"Approved"}),Te&&!be&&q.jsx("span",{className:"warning-text",title:"Address not in validated list",children:"⚠️"})]}):qe==="pending"?q.jsx(Vfe,{className:"status-icon pending",title:"Pending"}):null,$e=qe=>{$(qe)},Be=()=>{$(null)};return q.jsxs(Xv,{children:[q.jsx(lA,{title:"User Management"}),j&&q.jsx("div",{className:"image-modal",onClick:Be,children:q.jsx("img",{src:j,alt:"Profile",className:"modal-image",onClick:qe=>qe.stopPropagation()})}),fe&&q.jsx("div",{className:"modal-overlay",onClick:Fe,children:q.jsxs("div",{className:"modal-content reports-modal",onClick:qe=>qe.stopPropagation(),children:[q.jsxs("h3",{children:["Reports for ",fe.userName]}),q.jsx("div",{className:"reports-list",children:fe.reports.map((qe,be)=>q.jsxs("div",{className:"report-item",children:[q.jsx("p",{className:"report-date",children:mi(qe.timestamp).isValid()?mi(qe.timestamp).format("MMM D, YYYY HH:mm"):"Date not available"}),q.jsxs("p",{className:"report-violation",children:[q.jsx("strong",{children:"Violation Type:"})," ",qe.violationType]}),q.jsxs("p",{className:"report-details",children:[q.jsx("strong",{children:"Details:"})," ",qe.details]}),q.jsxs("p",{className:"report-status",children:[q.jsx("strong",{children:"Status:"})," ",qe.status]}),q.jsxs("p",{className:"report-reporter",children:[q.jsx("strong",{children:"Reported by:"})," ",qe.reportedBy]})]},be))}),q.jsx("button",{className:"close-btn",onClick:Fe,children:"Close"})]})}),q.jsxs("div",{className:"user-management",children:[q.jsxs("div",{className:"stats-container",children:[q.jsxs("div",{className:"stat-card",children:[q.jsx("h3",{children:"Registered Users"}),q.jsx("p",{children:L.registered})]}),q.jsxs("div",{className:"stat-card",children:[q.jsx("h3",{children:"Pending Users"}),q.jsx("p",{children:L.pending})]}),q.jsxs("div",{className:"stat-card",children:[q.jsx("h3",{children:"Rejected Users"}),q.jsx("p",{children:L.rejected})]}),q.jsxs("div",{className:"stat-card total",children:[q.jsx("h3",{children:"Total Users"}),q.jsx("p",{children:L.total})]})]}),q.jsxs("div",{className:"section",children:[q.jsx("h2",{children:"Pending Users"}),q.jsx("input",{type:"text",placeholder:"🔍 Search pending users...",value:v,onChange:qe=>R(qe.target.value),className:"search-box"}),je.length===0?q.jsx("p",{children:"No pending users found."}):q.jsx("div",{className:"user-list",children:q.jsxs("table",{children:[q.jsx("thead",{children:q.jsxs("tr",{children:[q.jsx("th",{children:"Status"}),q.jsx("th",{children:"Profile Photo"}),q.jsx("th",{children:"ID Photos"}),q.jsx("th",{children:"Name"}),q.jsx("th",{children:"Contact Info"}),q.jsx("th",{children:"Address"}),q.jsx("th",{children:"Actions"})]})}),q.jsx("tbody",{children:je.map(qe=>q.jsxs("tr",{children:[q.jsx("td",{children:q.jsx(Ue,{status:qe.status,addressValidated:qe.addressValidated})}),q.jsx("td",{className:"profile-column",children:qe.profile_photo_url?q.jsx("img",{src:qe.profile_photo_url,alt:"Profile",className:"profile-thumbnail",onClick:()=>$e(qe.profile_photo_url)}):q.jsx("div",{className:"no-photo",children:"No Photo"})}),q.jsx("td",{className:"id-photos-column",children:q.jsxs("div",{className:"id-photos",children:[qe.frontIdUrl&&q.jsx("img",{src:qe.frontIdUrl,alt:"ID Front",className:"id-thumbnail",onClick:()=>$e(qe.frontIdUrl)}),qe.backIdUrl&&q.jsx("img",{src:qe.backIdUrl,alt:"ID Back",className:"id-thumbnail",onClick:()=>$e(qe.backIdUrl)})]})}),q.jsx("td",{children:`${qe.first_name} ${qe.middle_name} ${qe.surname}`}),q.jsx("td",{children:q.jsxs("div",{className:"contact-info",children:[q.jsxs("p",{children:[q.jsx("strong",{children:"Phone:"})," ",qe.phone_number]}),q.jsxs("p",{children:[q.jsx("strong",{children:"Email:"})," ",qe.email]}),q.jsxs("p",{children:[q.jsx("strong",{children:"ID Number:"})," ",qe.id_number]})]})}),q.jsx("td",{children:q.jsxs("div",{className:"address-info",children:[q.jsx("p",{children:qe.address}),!qe.addressValidated&&q.jsx("span",{className:"unvalidated-address",children:"⚠️ Address not in validated list"})]})}),q.jsxs("td",{className:"action-buttons",children:[q.jsxs("button",{onClick:()=>Ve(qe.uid,"approve"),className:"approve-btn",children:[q.jsx(aB,{})," Approve"]}),q.jsxs("button",{onClick:()=>Ve(qe.uid,"reject"),className:"reject-btn",children:[q.jsx(DL,{})," Reject"]})]})]},qe.uid))})]})})]}),q.jsxs("div",{className:"section",children:[q.jsx("h2",{children:"Flagged Users"}),q.jsx("input",{type:"text",placeholder:"🔍 Search flagged users...",value:ee,onChange:qe=>se(qe.target.value),className:"search-box"}),H.length===0?q.jsx("p",{children:"No flagged users found."}):q.jsx("div",{className:"user-list",children:q.jsxs("table",{children:[q.jsx("thead",{children:q.jsxs("tr",{children:[q.jsx("th",{children:"Status"}),q.jsx("th",{className:"profile-column",children:"Profile Photo"}),q.jsx("th",{children:"Name"}),q.jsx("th",{children:"Email"}),q.jsx("th",{children:"Reports"}),q.jsx("th",{children:"Actions"})]})}),q.jsx("tbody",{children:H.filter(qe=>`${qe.first_name} ${qe.middle_name} ${qe.surname} ${qe.email}`.toLowerCase().includes(ee.toLowerCase())).map(qe=>q.jsxs("tr",{children:[q.jsx("td",{children:qe.isBanned?q.jsx("span",{className:"banned-badge",children:"Banned"}):q.jsx("span",{className:"flagged-badge",children:"Flagged"})}),q.jsx("td",{className:"profile-column",children:qe.profile_photo_url?q.jsx("img",{src:qe.profile_photo_url,alt:"Profile",className:"profile-thumbnail",onClick:()=>$e(qe.profile_photo_url)}):q.jsx("div",{className:"no-photo",children:"No Photo"})}),q.jsx("td",{children:`${qe.first_name} ${qe.middle_name} ${qe.surname}`}),q.jsx("td",{children:qe.email}),q.jsx("td",{children:q.jsxs("button",{className:"view-reports-btn",onClick:()=>_e(qe),children:["View Reports (",qe.reports.length,")"]})}),q.jsx("td",{children:q.jsx("button",{className:qe.isBanned?"unban-btn":"ban-btn",onClick:()=>oe(qe.uid,!qe.isBanned),children:qe.isBanned?"Unban User":"Ban User"})})]},qe.uid))})]})})]}),q.jsxs("div",{className:"section",children:[q.jsx("h2",{children:"Registered Users"}),q.jsx("input",{type:"text",placeholder:"🔍 Search registered users...",value:a,onChange:qe=>r(qe.target.value),className:"search-box"}),Ee.length===0?q.jsx("p",{children:"No registered users found."}):q.jsxs("div",{className:"user-list",children:[q.jsxs("table",{children:[q.jsx("thead",{children:q.jsxs("tr",{children:[q.jsx("th",{children:"Status"}),q.jsx("th",{children:"Profile Photo"}),q.jsx("th",{children:"ID Photos"}),q.jsx("th",{children:"Name"}),q.jsx("th",{children:"Contact Info"}),q.jsx("th",{children:"Address"})]})}),q.jsx("tbody",{children:Se.map(qe=>q.jsxs("tr",{children:[q.jsx("td",{children:q.jsx(Ue,{status:qe.status,addressValidated:qe.addressValidated,isPending:qe.isPending||!1})}),q.jsx("td",{className:"profile-column",children:qe.profile_photo_url?q.jsx("img",{src:qe.profile_photo_url,alt:"Profile",className:"profile-thumbnail",onClick:()=>$e(qe.profile_photo_url)}):q.jsx("div",{className:"no-photo",children:"No Photo"})}),q.jsx("td",{className:"id-photos-column",children:q.jsxs("div",{className:"id-photos",children:[qe.frontIdUrl&&q.jsx("img",{src:qe.frontIdUrl,alt:"ID Front",className:"id-thumbnail",onClick:()=>$e(qe.frontIdUrl)}),qe.backIdUrl&&q.jsx("img",{src:qe.backIdUrl,alt:"ID Back",className:"id-thumbnail",onClick:()=>$e(qe.backIdUrl)})]})}),q.jsx("td",{children:`${qe.first_name} ${qe.middle_name} ${qe.surname}`}),q.jsx("td",{children:q.jsxs("div",{className:"contact-info",children:[q.jsxs("p",{children:[q.jsx("strong",{children:"Phone:"})," ",qe.phone_number]}),q.jsxs("p",{children:[q.jsx("strong",{children:"Email:"})," ",qe.email]}),q.jsxs("p",{children:[q.jsx("strong",{children:"ID Number:"})," ",qe.id_number]})]})}),q.jsx("td",{children:q.jsx("div",{className:"address-info",children:q.jsx("p",{children:qe.address})})})]},qe.uid))})]}),q.jsxs("div",{className:"pagination",children:[q.jsx("button",{disabled:i===1,onClick:()=>l(i-1),children:"Previous"}),Array.from({length:ze},(qe,be)=>q.jsx("button",{className:i===be+1?"active":"",onClick:()=>l(be+1),children:be+1},be)),q.jsx("button",{disabled:i===ze,onClick:()=>l(i+1),children:"Next"})]})]})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $ee="firebasestorage.googleapis.com",Kee="storageBucket",yEe=2*60*1e3,AEe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl extends Wm{constructor(e,a,r=0){super(G5(e),`Firebase Storage: ${a} (${G5(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Vl.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return G5(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ol;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ol||(Ol={}));function G5(t){return"storage/"+t}function F4(){const t="An unknown error occurred, please check the error payload for server response.";return new Vl(Ol.UNKNOWN,t)}function vEe(t){return new Vl(Ol.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function _Ee(t){return new Vl(Ol.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function wEe(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Vl(Ol.UNAUTHENTICATED,t)}function REe(){return new Vl(Ol.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function TEe(t){return new Vl(Ol.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function CEe(){return new Vl(Ol.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function SEe(){return new Vl(Ol.CANCELED,"User canceled the upload/download.")}function bEe(t){return new Vl(Ol.INVALID_URL,"Invalid URL '"+t+"'.")}function xEe(t){return new Vl(Ol.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function PEe(){return new Vl(Ol.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Kee+"' property when initializing the app?")}function EEe(){return new Vl(Ol.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function NEe(){return new Vl(Ol.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function OEe(t){return new Vl(Ol.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function BI(t){return new Vl(Ol.INVALID_ARGUMENT,t)}function Wee(){return new Vl(Ol.APP_DELETED,"The Firebase app was deleted.")}function VEe(t){return new Vl(Ol.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function NR(t,e){return new Vl(Ol.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ww(t){throw new Vl(Ol.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,a){this.bucket=e,this.path_=a}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,a){let r;try{r=yf.makeFromUrl(e,a)}catch{return new yf(e,"")}if(r.path==="")return r;throw xEe(e)}static makeFromUrl(e,a){let r=null;const i="([A-Za-z0-9.\\-_]+)";function l(fe){fe.path.charAt(fe.path.length-1)==="/"&&(fe.path_=fe.path_.slice(0,-1))}const c="(/(.*))?$",n=new RegExp("^gs://"+i+c,"i"),v={bucket:1,path:3};function R(fe){fe.path_=decodeURIComponent(fe.path)}const x="v[A-Za-z0-9_]+",N=a.replace(/[.]/g,"\\."),L="(/([^?#]*).*)?$",F=new RegExp(`^https?://${N}/${x}/b/${i}/o${L}`,"i"),j={bucket:1,path:3},$=a===$ee?"(?:storage.googleapis.com|storage.cloud.google.com)":a,H="([^?#]*)",W=new RegExp(`^https?://${$}/${i}/${H}`,"i"),se=[{regex:n,indices:v,postModify:l},{regex:F,indices:j,postModify:R},{regex:W,indices:{bucket:1,path:2},postModify:R}];for(let fe=0;fe<se.length;fe++){const le=se[fe],me=le.regex.exec(e);if(me){const ge=me[le.indices.bucket];let Re=me[le.indices.path];Re||(Re=""),r=new yf(ge,Re),le.postModify(r);break}}if(r==null)throw bEe(e);return r}}class zEe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DEe(t,e,a){let r=1,i=null,l=null,c=!1,n=0;function v(){return n===2}let R=!1;function x(...H){R||(R=!0,e.apply(null,H))}function N(H){i=setTimeout(()=>{i=null,t(F,v())},H)}function L(){l&&clearTimeout(l)}function F(H,...W){if(R){L();return}if(H){L(),x.call(null,H,...W);return}if(v()||c){L(),x.call(null,H,...W);return}r<64&&(r*=2);let se;n===1?(n=2,se=0):se=(r+Math.random())*1e3,N(se)}let j=!1;function $(H){j||(j=!0,L(),!R&&(i!==null?(H||(n=2),clearTimeout(i),N(0)):H||(n=1)))}return N(0),l=setTimeout(()=>{c=!0,$(!0)},a),$}function MEe(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IEe(t){return t!==void 0}function LEe(t){return typeof t=="object"&&!Array.isArray(t)}function k4(t){return typeof t=="string"||t instanceof String}function oq(t){return U4()&&t instanceof Blob}function U4(){return typeof Blob<"u"&&!Jie()}function lq(t,e,a,r){if(r<e)throw BI(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>a)throw BI(`Invalid value for '${t}'. Expected ${a} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4(t,e,a){let r=e;return a==null&&(r=`https://${e}`),`${a}://${r}/v0${t}`}function Yee(t){const e=encodeURIComponent;let a="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);a=a+i+"&"}return a=a.slice(0,-1),a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tv;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Tv||(Tv={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FEe(t,e){const a=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,l=e.indexOf(t)!==-1;return a||i||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kEe{constructor(e,a,r,i,l,c,n,v,R,x,N,L=!0){this.url_=e,this.method_=a,this.headers_=r,this.body_=i,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=n,this.errorCallback_=v,this.timeout_=R,this.progressCallback_=x,this.connectionFactory_=N,this.retry=L,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((F,j)=>{this.resolve_=F,this.reject_=j,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new ab(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=n=>{const v=n.loaded,R=n.lengthComputable?n.total:-1;this.progressCallback_!==null&&this.progressCallback_(v,R)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const n=l.getErrorCode()===Tv.NO_ERROR,v=l.getStatus();if(!n||FEe(v,this.additionalRetryCodes_)&&this.retry){const x=l.getErrorCode()===Tv.ABORT;r(!1,new ab(!1,null,x));return}const R=this.successCodes_.indexOf(v)!==-1;r(!0,new ab(R,l))})},a=(r,i)=>{const l=this.resolve_,c=this.reject_,n=i.connection;if(i.wasSuccessCode)try{const v=this.callback_(n,n.getResponse());IEe(v)?l(v):l()}catch(v){c(v)}else if(n!==null){const v=F4();v.serverResponse=n.getErrorText(),this.errorCallback_?c(this.errorCallback_(n,v)):c(v)}else if(i.canceled){const v=this.appDelete_?Wee():SEe();c(v)}else{const v=CEe();c(v)}};this.canceled_?a(!1,new ab(!1,null,!0)):this.backoffId_=DEe(e,a,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&MEe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ab{constructor(e,a,r){this.wasSuccessCode=e,this.connection=a,this.canceled=!!r}}function UEe(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function BEe(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function jEe(t,e){e&&(t["X-Firebase-GMPID"]=e)}function GEe(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function ZEe(t,e,a,r,i,l,c=!0){const n=Yee(t.urlParams),v=t.url+n,R=Object.assign({},t.headers);return jEe(R,e),UEe(R,a),BEe(R,l),GEe(R,r),new kEe(v,t.method,R,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qEe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function HEe(...t){const e=qEe();if(e!==void 0){const a=new e;for(let r=0;r<t.length;r++)a.append(t[r]);return a.getBlob()}else{if(U4())return new Blob(t);throw new Vl(Ol.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function $Ee(t,e,a){return t.webkitSlice?t.webkitSlice(e,a):t.mozSlice?t.mozSlice(e,a):t.slice?t.slice(e,a):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KEe(t){if(typeof atob>"u")throw OEe("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Z5{constructor(e,a){this.data=e,this.contentType=a||null}}function WEe(t,e){switch(t){case Mm.RAW:return new Z5(Xee(e));case Mm.BASE64:case Mm.BASE64URL:return new Z5(Jee(t,e));case Mm.DATA_URL:return new Z5(XEe(e),JEe(e))}throw F4()}function Xee(t){const e=[];for(let a=0;a<t.length;a++){let r=t.charCodeAt(a);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(a<t.length-1&&(t.charCodeAt(a+1)&64512)===56320))e.push(239,191,189);else{const l=r,c=t.charCodeAt(++a);r=65536|(l&1023)<<10|c&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function YEe(t){let e;try{e=decodeURIComponent(t)}catch{throw NR(Mm.DATA_URL,"Malformed data URL.")}return Xee(e)}function Jee(t,e){switch(t){case Mm.BASE64:{const i=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(i||l)throw NR(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Mm.BASE64URL:{const i=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(i||l)throw NR(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let a;try{a=KEe(e)}catch(i){throw i.message.includes("polyfill")?i:NR(t,"Invalid character found")}const r=new Uint8Array(a.length);for(let i=0;i<a.length;i++)r[i]=a.charCodeAt(i);return r}class Qee{constructor(e){this.base64=!1,this.contentType=null;const a=e.match(/^data:([^,]+)?,/);if(a===null)throw NR(Mm.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=a[1]||null;r!=null&&(this.base64=QEe(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function XEe(t){const e=new Qee(t);return e.base64?Jee(Mm.BASE64,e.rest):YEe(e.rest)}function JEe(t){return new Qee(t).contentType}function QEe(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,a){let r=0,i="";oq(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(a?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(a?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,a){if(oq(this.data_)){const r=this.data_,i=$Ee(r,e,a);return i===null?null:new Fy(i)}else{const r=new Uint8Array(this.data_.buffer,e,a-e);return new Fy(r,!0)}}static getBlob(...e){if(U4()){const a=e.map(r=>r instanceof Fy?r.data_:r);return new Fy(HEe.apply(null,a))}else{const a=e.map(c=>k4(c)?WEe(Mm.RAW,c).data:c.data_);let r=0;a.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let l=0;return a.forEach(c=>{for(let n=0;n<c.length;n++)i[l++]=c[n]}),new Fy(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ete(t){let e;try{e=JSON.parse(t)}catch{return null}return LEe(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eNe(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function tNe(t,e){const a=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?a:t+"/"+a}function tte(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aNe(t,e){return e}class nh{constructor(e,a,r,i){this.server=e,this.local=a||e,this.writable=!!r,this.xform=i||aNe}}let rb=null;function rNe(t){return!k4(t)||t.length<2?t:tte(t)}function ate(){if(rb)return rb;const t=[];t.push(new nh("bucket")),t.push(new nh("generation")),t.push(new nh("metageneration")),t.push(new nh("name","fullPath",!0));function e(l,c){return rNe(c)}const a=new nh("name");a.xform=e,t.push(a);function r(l,c){return c!==void 0?Number(c):c}const i=new nh("size");return i.xform=r,t.push(i),t.push(new nh("timeCreated")),t.push(new nh("updated")),t.push(new nh("md5Hash",null,!0)),t.push(new nh("cacheControl",null,!0)),t.push(new nh("contentDisposition",null,!0)),t.push(new nh("contentEncoding",null,!0)),t.push(new nh("contentLanguage",null,!0)),t.push(new nh("contentType",null,!0)),t.push(new nh("metadata","customMetadata",!0)),rb=t,rb}function nNe(t,e){function a(){const r=t.bucket,i=t.fullPath,l=new yf(r,i);return e._makeStorageReference(l)}Object.defineProperty(t,"ref",{get:a})}function iNe(t,e,a){const r={};r.type="file";const i=a.length;for(let l=0;l<i;l++){const c=a[l];r[c.local]=c.xform(r,e[c.server])}return nNe(r,t),r}function rte(t,e,a){const r=ete(e);return r===null?null:iNe(t,r,a)}function sNe(t,e,a,r){const i=ete(e);if(i===null||!k4(i.downloadTokens))return null;const l=i.downloadTokens;if(l.length===0)return null;const c=encodeURIComponent;return l.split(",").map(R=>{const x=t.bucket,N=t.fullPath,L="/b/"+c(x)+"/o/"+c(N),F=B4(L,a,r),j=Yee({alt:"media",token:R});return F+j})[0]}function oNe(t,e){const a={},r=e.length;for(let i=0;i<r;i++){const l=e[i];l.writable&&(a[l.server]=t[l.local])}return JSON.stringify(a)}class nte{constructor(e,a,r,i){this.url=e,this.method=a,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ite(t){if(!t)throw F4()}function lNe(t,e){function a(r,i){const l=rte(t,i,e);return ite(l!==null),l}return a}function uNe(t,e){function a(r,i){const l=rte(t,i,e);return ite(l!==null),sNe(l,i,t.host,t._protocol)}return a}function ste(t){function e(a,r){let i;return a.getStatus()===401?a.getErrorText().includes("Firebase App Check token is invalid")?i=REe():i=wEe():a.getStatus()===402?i=_Ee(t.bucket):a.getStatus()===403?i=TEe(t.path):i=r,i.status=a.getStatus(),i.serverResponse=r.serverResponse,i}return e}function cNe(t){const e=ste(t);function a(r,i){let l=e(r,i);return r.getStatus()===404&&(l=vEe(t.path)),l.serverResponse=i.serverResponse,l}return a}function dNe(t,e,a){const r=e.fullServerUrl(),i=B4(r,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,n=new nte(i,l,uNe(t,a),c);return n.errorHandler=cNe(e),n}function hNe(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function fNe(t,e,a){const r=Object.assign({},a);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=hNe(null,e)),r}function pNe(t,e,a,r,i){const l=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function n(){let se="";for(let fe=0;fe<2;fe++)se=se+Math.random().toString().slice(2);return se}const v=n();c["Content-Type"]="multipart/related; boundary="+v;const R=fNe(e,r,i),x=oNe(R,a),N="--"+v+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+x+`\r
--`+v+`\r
Content-Type: `+R.contentType+`\r
\r
`,L=`\r
--`+v+"--",F=Fy.getBlob(N,r,L);if(F===null)throw EEe();const j={name:R.fullPath},$=B4(l,t.host,t._protocol),H="POST",W=t.maxUploadRetryTime,ee=new nte($,H,lNe(t,a),W);return ee.urlParams=j,ee.headers=c,ee.body=F.uploadData(),ee.errorHandler=ste(e),ee}class mNe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Tv.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Tv.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Tv.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,a,r,i){if(this.sent_)throw Ww("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(a,e,!0),i!==void 0)for(const l in i)i.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,i[l].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ww("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ww("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ww("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ww("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class gNe extends mNe{initXhr(){this.xhr_.responseType="text"}}function ote(){return new gNe}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,a){this._service=e,a instanceof yf?this._location=a:this._location=yf.makeFromUrl(a,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,a){return new kv(e,a)}get root(){const e=new yf(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return tte(this._location.path)}get storage(){return this._service}get parent(){const e=eNe(this._location.path);if(e===null)return null;const a=new yf(this._location.bucket,e);return new kv(this._service,a)}_throwIfRoot(e){if(this._location.path==="")throw VEe(e)}}function yNe(t,e,a){t._throwIfRoot("uploadBytes");const r=pNe(t.storage,t._location,ate(),new Fy(e,!0),a);return t.storage.makeRequestWithTokens(r,ote).then(i=>({metadata:i,ref:t}))}function ANe(t){t._throwIfRoot("getDownloadURL");const e=dNe(t.storage,t._location,ate());return t.storage.makeRequestWithTokens(e,ote).then(a=>{if(a===null)throw NEe();return a})}function vNe(t,e){const a=tNe(t._location.path,e),r=new yf(t._location.bucket,a);return new kv(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Ne(t){return/^[A-Za-z]+:\/\//.test(t)}function wNe(t,e){return new kv(t,e)}function lte(t,e){if(t instanceof j4){const a=t;if(a._bucket==null)throw PEe();const r=new kv(a,a._bucket);return e!=null?lte(r,e):r}else return e!==void 0?vNe(t,e):t}function RNe(t,e){if(e&&_Ne(e)){if(t instanceof j4)return wNe(t,e);throw BI("To use ref(service, url), the first argument must be a Storage instance.")}else return lte(t,e)}function uq(t,e){const a=e==null?void 0:e[Kee];return a==null?null:yf.makeFromBucketSpec(a,t)}function TNe(t,e,a,r={}){t.host=`${e}:${a}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:uK(i,t.app.options.projectId))}class j4{constructor(e,a,r,i,l){this.app=e,this._authProvider=a,this._appCheckProvider=r,this._url=i,this._firebaseVersion=l,this._bucket=null,this._host=$ee,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=yEe,this._maxUploadRetryTime=AEe,this._requests=new Set,i!=null?this._bucket=yf.makeFromBucketSpec(i,this._host):this._bucket=uq(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=yf.makeFromBucketSpec(this._url,e):this._bucket=uq(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){lq("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){lq("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const a=await e.getToken();if(a!==null)return a.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new kv(this,e)}_makeRequest(e,a,r,i,l=!0){if(this._deleted)return new zEe(Wee());{const c=ZEe(e,this._appId,r,i,a,this._firebaseVersion,l);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,a){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,a,r,i).getPromise()}}const cq="@firebase/storage",dq="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ute="storage";function jI(t,e,a){return t=yl(t),yNe(t,e,a)}function GI(t){return t=yl(t),ANe(t)}function ZI(t,e){return t=yl(t),RNe(t,e)}function qI(t=_3(),e){t=yl(t);const r=E2(t,ute).getImmediate({identifier:e}),i=sK("storage");return i&&CNe(r,...i),r}function CNe(t,e,a,r={}){TNe(t,e,a,r)}function SNe(t,{instanceIdentifier:e}){const a=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new j4(a,r,i,e,jv)}function bNe(){xv(new Yy(ute,SNe,"PUBLIC").setMultipleInstances(!0)),Lm(cq,dq,""),Lm(cq,dq,"esm2017")}bNe();var G0={},q5,hq;function xNe(){return hq||(hq=1,q5=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),q5}var H5={},Sy={},fq;function Jv(){if(fq)return Sy;fq=1;let t;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Sy.getSymbolSize=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return r*4+17},Sy.getSymbolTotalCodewords=function(r){return e[r]},Sy.getBCHDigit=function(a){let r=0;for(;a!==0;)r++,a>>>=1;return r},Sy.setToSJISFunction=function(r){if(typeof r!="function")throw new Error('"toSJISFunc" is not a valid function.');t=r},Sy.isKanjiModeEnabled=function(){return typeof t<"u"},Sy.toSJIS=function(r){return t(r)},Sy}var $5={},pq;function G4(){return pq||(pq=1,function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+a)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,i){if(t.isValid(r))return r;try{return e(r)}catch{return i}}}($5)),$5}var K5,mq;function PNe(){if(mq)return K5;mq=1;function t(){this.buffer=[],this.length=0}return t.prototype={get:function(e){const a=Math.floor(e/8);return(this.buffer[a]>>>7-e%8&1)===1},put:function(e,a){for(let r=0;r<a;r++)this.putBit((e>>>a-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const a=Math.floor(this.length/8);this.buffer.length<=a&&this.buffer.push(0),e&&(this.buffer[a]|=128>>>this.length%8),this.length++}},K5=t,K5}var W5,gq;function ENe(){if(gq)return W5;gq=1;function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return t.prototype.set=function(e,a,r,i){const l=e*this.size+a;this.data[l]=r,i&&(this.reservedBit[l]=!0)},t.prototype.get=function(e,a){return this.data[e*this.size+a]},t.prototype.xor=function(e,a,r){this.data[e*this.size+a]^=r},t.prototype.isReserved=function(e,a){return this.reservedBit[e*this.size+a]},W5=t,W5}var Y5={},yq;function NNe(){return yq||(yq=1,function(t){const e=Jv().getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const i=Math.floor(r/7)+2,l=e(r),c=l===145?26:Math.ceil((l-13)/(2*i-2))*2,n=[l-7];for(let v=1;v<i-1;v++)n[v]=n[v-1]-c;return n.push(6),n.reverse()},t.getPositions=function(r){const i=[],l=t.getRowColCoords(r),c=l.length;for(let n=0;n<c;n++)for(let v=0;v<c;v++)n===0&&v===0||n===0&&v===c-1||n===c-1&&v===0||i.push([l[n],l[v]]);return i}}(Y5)),Y5}var X5={},Aq;function ONe(){if(Aq)return X5;Aq=1;const t=Jv().getSymbolSize,e=7;return X5.getPositions=function(r){const i=t(r);return[[0,0],[i-e,0],[0,i-e]]},X5}var J5={},vq;function VNe(){return vq||(vq=1,function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const l=i.size;let c=0,n=0,v=0,R=null,x=null;for(let N=0;N<l;N++){n=v=0,R=x=null;for(let L=0;L<l;L++){let F=i.get(N,L);F===R?n++:(n>=5&&(c+=e.N1+(n-5)),R=F,n=1),F=i.get(L,N),F===x?v++:(v>=5&&(c+=e.N1+(v-5)),x=F,v=1)}n>=5&&(c+=e.N1+(n-5)),v>=5&&(c+=e.N1+(v-5))}return c},t.getPenaltyN2=function(i){const l=i.size;let c=0;for(let n=0;n<l-1;n++)for(let v=0;v<l-1;v++){const R=i.get(n,v)+i.get(n,v+1)+i.get(n+1,v)+i.get(n+1,v+1);(R===4||R===0)&&c++}return c*e.N2},t.getPenaltyN3=function(i){const l=i.size;let c=0,n=0,v=0;for(let R=0;R<l;R++){n=v=0;for(let x=0;x<l;x++)n=n<<1&2047|i.get(R,x),x>=10&&(n===1488||n===93)&&c++,v=v<<1&2047|i.get(x,R),x>=10&&(v===1488||v===93)&&c++}return c*e.N3},t.getPenaltyN4=function(i){let l=0;const c=i.data.length;for(let v=0;v<c;v++)l+=i.data[v];return Math.abs(Math.ceil(l*100/c/5)-10)*e.N4};function a(r,i,l){switch(r){case t.Patterns.PATTERN000:return(i+l)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return l%3===0;case t.Patterns.PATTERN011:return(i+l)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(l/3))%2===0;case t.Patterns.PATTERN101:return i*l%2+i*l%3===0;case t.Patterns.PATTERN110:return(i*l%2+i*l%3)%2===0;case t.Patterns.PATTERN111:return(i*l%3+(i+l)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(i,l){const c=l.size;for(let n=0;n<c;n++)for(let v=0;v<c;v++)l.isReserved(v,n)||l.xor(v,n,a(i,v,n))},t.getBestMask=function(i,l){const c=Object.keys(t.Patterns).length;let n=0,v=1/0;for(let R=0;R<c;R++){l(R),t.applyMask(R,i);const x=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(R,i),x<v&&(v=x,n=R)}return n}}(J5)),J5}var nb={},_q;function cte(){if(_q)return nb;_q=1;const t=G4(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],a=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return nb.getBlocksCount=function(i,l){switch(l){case t.L:return e[(i-1)*4+0];case t.M:return e[(i-1)*4+1];case t.Q:return e[(i-1)*4+2];case t.H:return e[(i-1)*4+3];default:return}},nb.getTotalCodewordsCount=function(i,l){switch(l){case t.L:return a[(i-1)*4+0];case t.M:return a[(i-1)*4+1];case t.Q:return a[(i-1)*4+2];case t.H:return a[(i-1)*4+3];default:return}},nb}var Q5={},Yw={},wq;function zNe(){if(wq)return Yw;wq=1;const t=new Uint8Array(512),e=new Uint8Array(256);return function(){let r=1;for(let i=0;i<255;i++)t[i]=r,e[r]=i,r<<=1,r&256&&(r^=285);for(let i=255;i<512;i++)t[i]=t[i-255]}(),Yw.log=function(r){if(r<1)throw new Error("log("+r+")");return e[r]},Yw.exp=function(r){return t[r]},Yw.mul=function(r,i){return r===0||i===0?0:t[e[r]+e[i]]},Yw}var Rq;function DNe(){return Rq||(Rq=1,function(t){const e=zNe();t.mul=function(r,i){const l=new Uint8Array(r.length+i.length-1);for(let c=0;c<r.length;c++)for(let n=0;n<i.length;n++)l[c+n]^=e.mul(r[c],i[n]);return l},t.mod=function(r,i){let l=new Uint8Array(r);for(;l.length-i.length>=0;){const c=l[0];for(let v=0;v<i.length;v++)l[v]^=e.mul(i[v],c);let n=0;for(;n<l.length&&l[n]===0;)n++;l=l.slice(n)}return l},t.generateECPolynomial=function(r){let i=new Uint8Array([1]);for(let l=0;l<r;l++)i=t.mul(i,new Uint8Array([1,e.exp(l)]));return i}}(Q5)),Q5}var eD,Tq;function MNe(){if(Tq)return eD;Tq=1;const t=DNe();function e(a){this.genPoly=void 0,this.degree=a,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(r){this.degree=r,this.genPoly=t.generateECPolynomial(this.degree)},e.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(r.length+this.degree);i.set(r);const l=t.mod(i,this.genPoly),c=this.degree-l.length;if(c>0){const n=new Uint8Array(this.degree);return n.set(l,c),n}return l},eD=e,eD}var tD={},aD={},rD={},Cq;function dte(){return Cq||(Cq=1,rD.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),rD}var xm={},Sq;function hte(){if(Sq)return xm;Sq=1;const t="[0-9]+",e="[A-Z $%*+\\-./:]+";let a="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";a=a.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+a+`)(?:.|[\r
]))+`;xm.KANJI=new RegExp(a,"g"),xm.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),xm.BYTE=new RegExp(r,"g"),xm.NUMERIC=new RegExp(t,"g"),xm.ALPHANUMERIC=new RegExp(e,"g");const i=new RegExp("^"+a+"$"),l=new RegExp("^"+t+"$"),c=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return xm.testKanji=function(v){return i.test(v)},xm.testNumeric=function(v){return l.test(v)},xm.testAlphanumeric=function(v){return c.test(v)},xm}var bq;function Qv(){return bq||(bq=1,function(t){const e=dte(),a=hte();t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(l,c){if(!l.ccBits)throw new Error("Invalid mode: "+l);if(!e.isValid(c))throw new Error("Invalid version: "+c);return c>=1&&c<10?l.ccBits[0]:c<27?l.ccBits[1]:l.ccBits[2]},t.getBestModeForData=function(l){return a.testNumeric(l)?t.NUMERIC:a.testAlphanumeric(l)?t.ALPHANUMERIC:a.testKanji(l)?t.KANJI:t.BYTE},t.toString=function(l){if(l&&l.id)return l.id;throw new Error("Invalid mode")},t.isValid=function(l){return l&&l.bit&&l.ccBits};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(l,c){if(t.isValid(l))return l;try{return r(l)}catch{return c}}}(aD)),aD}var xq;function INe(){return xq||(xq=1,function(t){const e=Jv(),a=cte(),r=G4(),i=Qv(),l=dte(),c=7973,n=e.getBCHDigit(c);function v(L,F,j){for(let $=1;$<=40;$++)if(F<=t.getCapacity($,j,L))return $}function R(L,F){return i.getCharCountIndicator(L,F)+4}function x(L,F){let j=0;return L.forEach(function($){const H=R($.mode,F);j+=H+$.getBitsLength()}),j}function N(L,F){for(let j=1;j<=40;j++)if(x(L,j)<=t.getCapacity(j,F,i.MIXED))return j}t.from=function(F,j){return l.isValid(F)?parseInt(F,10):j},t.getCapacity=function(F,j,$){if(!l.isValid(F))throw new Error("Invalid QR Code version");typeof $>"u"&&($=i.BYTE);const H=e.getSymbolTotalCodewords(F),W=a.getTotalCodewordsCount(F,j),ee=(H-W)*8;if($===i.MIXED)return ee;const se=ee-R($,F);switch($){case i.NUMERIC:return Math.floor(se/10*3);case i.ALPHANUMERIC:return Math.floor(se/11*2);case i.KANJI:return Math.floor(se/13);case i.BYTE:default:return Math.floor(se/8)}},t.getBestVersionForData=function(F,j){let $;const H=r.from(j,r.M);if(Array.isArray(F)){if(F.length>1)return N(F,H);if(F.length===0)return 1;$=F[0]}else $=F;return v($.mode,$.getLength(),H)},t.getEncodedBits=function(F){if(!l.isValid(F)||F<7)throw new Error("Invalid QR Code version");let j=F<<12;for(;e.getBCHDigit(j)-n>=0;)j^=c<<e.getBCHDigit(j)-n;return F<<12|j}}(tD)),tD}var nD={},Pq;function LNe(){if(Pq)return nD;Pq=1;const t=Jv(),e=1335,a=21522,r=t.getBCHDigit(e);return nD.getEncodedBits=function(l,c){const n=l.bit<<3|c;let v=n<<10;for(;t.getBCHDigit(v)-r>=0;)v^=e<<t.getBCHDigit(v)-r;return(n<<10|v)^a},nD}var iD={},sD,Eq;function FNe(){if(Eq)return sD;Eq=1;const t=Qv();function e(a){this.mode=t.NUMERIC,this.data=a.toString()}return e.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){let i,l,c;for(i=0;i+3<=this.data.length;i+=3)l=this.data.substr(i,3),c=parseInt(l,10),r.put(c,10);const n=this.data.length-i;n>0&&(l=this.data.substr(i),c=parseInt(l,10),r.put(c,n*3+1))},sD=e,sD}var oD,Nq;function kNe(){if(Nq)return oD;Nq=1;const t=Qv(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function a(r){this.mode=t.ALPHANUMERIC,this.data=r}return a.getBitsLength=function(i){return 11*Math.floor(i/2)+6*(i%2)},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(i){let l;for(l=0;l+2<=this.data.length;l+=2){let c=e.indexOf(this.data[l])*45;c+=e.indexOf(this.data[l+1]),i.put(c,11)}this.data.length%2&&i.put(e.indexOf(this.data[l]),6)},oD=a,oD}var lD,Oq;function UNe(){if(Oq)return lD;Oq=1;const t=Qv();function e(a){this.mode=t.BYTE,typeof a=="string"?this.data=new TextEncoder().encode(a):this.data=new Uint8Array(a)}return e.getBitsLength=function(r){return r*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(a){for(let r=0,i=this.data.length;r<i;r++)a.put(this.data[r],8)},lD=e,lD}var uD,Vq;function BNe(){if(Vq)return uD;Vq=1;const t=Qv(),e=Jv();function a(r){this.mode=t.KANJI,this.data=r}return a.getBitsLength=function(i){return i*13},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(r){let i;for(i=0;i<this.data.length;i++){let l=e.toSJIS(this.data[i]);if(l>=33088&&l<=40956)l-=33088;else if(l>=57408&&l<=60351)l-=49472;else throw new Error("Invalid SJIS character: "+this.data[i]+`
Make sure your charset is UTF-8`);l=(l>>>8&255)*192+(l&255),r.put(l,13)}},uD=a,uD}var cD={exports:{}},zq;function jNe(){return zq||(zq=1,function(t){var e={single_source_shortest_paths:function(a,r,i){var l={},c={};c[r]=0;var n=e.PriorityQueue.make();n.push(r,0);for(var v,R,x,N,L,F,j,$,H;!n.empty();){v=n.pop(),R=v.value,N=v.cost,L=a[R]||{};for(x in L)L.hasOwnProperty(x)&&(F=L[x],j=N+F,$=c[x],H=typeof c[x]>"u",(H||$>j)&&(c[x]=j,n.push(x,j),l[x]=R))}if(typeof i<"u"&&typeof c[i]>"u"){var W=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(W)}return l},extract_shortest_path_from_predecessor_list:function(a,r){for(var i=[],l=r;l;)i.push(l),a[l],l=a[l];return i.reverse(),i},find_path:function(a,r,i){var l=e.single_source_shortest_paths(a,r,i);return e.extract_shortest_path_from_predecessor_list(l,i)},PriorityQueue:{make:function(a){var r=e.PriorityQueue,i={},l;a=a||{};for(l in r)r.hasOwnProperty(l)&&(i[l]=r[l]);return i.queue=[],i.sorter=a.sorter||r.default_sorter,i},default_sorter:function(a,r){return a.cost-r.cost},push:function(a,r){var i={value:a,cost:r};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e}(cD)),cD.exports}var Dq;function GNe(){return Dq||(Dq=1,function(t){const e=Qv(),a=FNe(),r=kNe(),i=UNe(),l=BNe(),c=hte(),n=Jv(),v=jNe();function R(W){return unescape(encodeURIComponent(W)).length}function x(W,ee,se){const fe=[];let le;for(;(le=W.exec(se))!==null;)fe.push({data:le[0],index:le.index,mode:ee,length:le[0].length});return fe}function N(W){const ee=x(c.NUMERIC,e.NUMERIC,W),se=x(c.ALPHANUMERIC,e.ALPHANUMERIC,W);let fe,le;return n.isKanjiModeEnabled()?(fe=x(c.BYTE,e.BYTE,W),le=x(c.KANJI,e.KANJI,W)):(fe=x(c.BYTE_KANJI,e.BYTE,W),le=[]),ee.concat(se,fe,le).sort(function(ge,Re){return ge.index-Re.index}).map(function(ge){return{data:ge.data,mode:ge.mode,length:ge.length}})}function L(W,ee){switch(ee){case e.NUMERIC:return a.getBitsLength(W);case e.ALPHANUMERIC:return r.getBitsLength(W);case e.KANJI:return l.getBitsLength(W);case e.BYTE:return i.getBitsLength(W)}}function F(W){return W.reduce(function(ee,se){const fe=ee.length-1>=0?ee[ee.length-1]:null;return fe&&fe.mode===se.mode?(ee[ee.length-1].data+=se.data,ee):(ee.push(se),ee)},[])}function j(W){const ee=[];for(let se=0;se<W.length;se++){const fe=W[se];switch(fe.mode){case e.NUMERIC:ee.push([fe,{data:fe.data,mode:e.ALPHANUMERIC,length:fe.length},{data:fe.data,mode:e.BYTE,length:fe.length}]);break;case e.ALPHANUMERIC:ee.push([fe,{data:fe.data,mode:e.BYTE,length:fe.length}]);break;case e.KANJI:ee.push([fe,{data:fe.data,mode:e.BYTE,length:R(fe.data)}]);break;case e.BYTE:ee.push([{data:fe.data,mode:e.BYTE,length:R(fe.data)}])}}return ee}function $(W,ee){const se={},fe={start:{}};let le=["start"];for(let me=0;me<W.length;me++){const ge=W[me],Re=[];for(let we=0;we<ge.length;we++){const Ve=ge[we],oe=""+me+we;Re.push(oe),se[oe]={node:Ve,lastCount:0},fe[oe]={};for(let _e=0;_e<le.length;_e++){const Fe=le[_e];se[Fe]&&se[Fe].node.mode===Ve.mode?(fe[Fe][oe]=L(se[Fe].lastCount+Ve.length,Ve.mode)-L(se[Fe].lastCount,Ve.mode),se[Fe].lastCount+=Ve.length):(se[Fe]&&(se[Fe].lastCount=Ve.length),fe[Fe][oe]=L(Ve.length,Ve.mode)+4+e.getCharCountIndicator(Ve.mode,ee))}}le=Re}for(let me=0;me<le.length;me++)fe[le[me]].end=0;return{map:fe,table:se}}function H(W,ee){let se;const fe=e.getBestModeForData(W);if(se=e.from(ee,fe),se!==e.BYTE&&se.bit<fe.bit)throw new Error('"'+W+'" cannot be encoded with mode '+e.toString(se)+`.
 Suggested mode is: `+e.toString(fe));switch(se===e.KANJI&&!n.isKanjiModeEnabled()&&(se=e.BYTE),se){case e.NUMERIC:return new a(W);case e.ALPHANUMERIC:return new r(W);case e.KANJI:return new l(W);case e.BYTE:return new i(W)}}t.fromArray=function(ee){return ee.reduce(function(se,fe){return typeof fe=="string"?se.push(H(fe,null)):fe.data&&se.push(H(fe.data,fe.mode)),se},[])},t.fromString=function(ee,se){const fe=N(ee,n.isKanjiModeEnabled()),le=j(fe),me=$(le,se),ge=v.find_path(me.map,"start","end"),Re=[];for(let we=1;we<ge.length-1;we++)Re.push(me.table[ge[we]].node);return t.fromArray(F(Re))},t.rawSplit=function(ee){return t.fromArray(N(ee,n.isKanjiModeEnabled()))}}(iD)),iD}var Mq;function ZNe(){if(Mq)return H5;Mq=1;const t=Jv(),e=G4(),a=PNe(),r=ENe(),i=NNe(),l=ONe(),c=VNe(),n=cte(),v=MNe(),R=INe(),x=LNe(),N=Qv(),L=GNe();function F(me,ge){const Re=me.size,we=l.getPositions(ge);for(let Ve=0;Ve<we.length;Ve++){const oe=we[Ve][0],_e=we[Ve][1];for(let Fe=-1;Fe<=7;Fe++)if(!(oe+Fe<=-1||Re<=oe+Fe))for(let Ee=-1;Ee<=7;Ee++)_e+Ee<=-1||Re<=_e+Ee||(Fe>=0&&Fe<=6&&(Ee===0||Ee===6)||Ee>=0&&Ee<=6&&(Fe===0||Fe===6)||Fe>=2&&Fe<=4&&Ee>=2&&Ee<=4?me.set(oe+Fe,_e+Ee,!0,!0):me.set(oe+Fe,_e+Ee,!1,!0))}}function j(me){const ge=me.size;for(let Re=8;Re<ge-8;Re++){const we=Re%2===0;me.set(Re,6,we,!0),me.set(6,Re,we,!0)}}function $(me,ge){const Re=i.getPositions(ge);for(let we=0;we<Re.length;we++){const Ve=Re[we][0],oe=Re[we][1];for(let _e=-2;_e<=2;_e++)for(let Fe=-2;Fe<=2;Fe++)_e===-2||_e===2||Fe===-2||Fe===2||_e===0&&Fe===0?me.set(Ve+_e,oe+Fe,!0,!0):me.set(Ve+_e,oe+Fe,!1,!0)}}function H(me,ge){const Re=me.size,we=R.getEncodedBits(ge);let Ve,oe,_e;for(let Fe=0;Fe<18;Fe++)Ve=Math.floor(Fe/3),oe=Fe%3+Re-8-3,_e=(we>>Fe&1)===1,me.set(Ve,oe,_e,!0),me.set(oe,Ve,_e,!0)}function W(me,ge,Re){const we=me.size,Ve=x.getEncodedBits(ge,Re);let oe,_e;for(oe=0;oe<15;oe++)_e=(Ve>>oe&1)===1,oe<6?me.set(oe,8,_e,!0):oe<8?me.set(oe+1,8,_e,!0):me.set(we-15+oe,8,_e,!0),oe<8?me.set(8,we-oe-1,_e,!0):oe<9?me.set(8,15-oe-1+1,_e,!0):me.set(8,15-oe-1,_e,!0);me.set(we-8,8,1,!0)}function ee(me,ge){const Re=me.size;let we=-1,Ve=Re-1,oe=7,_e=0;for(let Fe=Re-1;Fe>0;Fe-=2)for(Fe===6&&Fe--;;){for(let Ee=0;Ee<2;Ee++)if(!me.isReserved(Ve,Fe-Ee)){let ze=!1;_e<ge.length&&(ze=(ge[_e]>>>oe&1)===1),me.set(Ve,Fe-Ee,ze),oe--,oe===-1&&(_e++,oe=7)}if(Ve+=we,Ve<0||Re<=Ve){Ve-=we,we=-we;break}}}function se(me,ge,Re){const we=new a;Re.forEach(function(Ee){we.put(Ee.mode.bit,4),we.put(Ee.getLength(),N.getCharCountIndicator(Ee.mode,me)),Ee.write(we)});const Ve=t.getSymbolTotalCodewords(me),oe=n.getTotalCodewordsCount(me,ge),_e=(Ve-oe)*8;for(we.getLengthInBits()+4<=_e&&we.put(0,4);we.getLengthInBits()%8!==0;)we.putBit(0);const Fe=(_e-we.getLengthInBits())/8;for(let Ee=0;Ee<Fe;Ee++)we.put(Ee%2?17:236,8);return fe(we,me,ge)}function fe(me,ge,Re){const we=t.getSymbolTotalCodewords(ge),Ve=n.getTotalCodewordsCount(ge,Re),oe=we-Ve,_e=n.getBlocksCount(ge,Re),Fe=we%_e,Ee=_e-Fe,ze=Math.floor(we/_e),Se=Math.floor(oe/_e),je=Se+1,Ue=ze-Se,$e=new v(Ue);let Be=0;const qe=new Array(_e),be=new Array(_e);let Te=0;const ke=new Uint8Array(me.buffer);for(let ot=0;ot<_e;ot++){const ve=ot<Ee?Se:je;qe[ot]=ke.slice(Be,Be+ve),be[ot]=$e.encode(qe[ot]),Be+=ve,Te=Math.max(Te,ve)}const Ge=new Uint8Array(we);let at=0,rt,lt;for(rt=0;rt<Te;rt++)for(lt=0;lt<_e;lt++)rt<qe[lt].length&&(Ge[at++]=qe[lt][rt]);for(rt=0;rt<Ue;rt++)for(lt=0;lt<_e;lt++)Ge[at++]=be[lt][rt];return Ge}function le(me,ge,Re,we){let Ve;if(Array.isArray(me))Ve=L.fromArray(me);else if(typeof me=="string"){let ze=ge;if(!ze){const Se=L.rawSplit(me);ze=R.getBestVersionForData(Se,Re)}Ve=L.fromString(me,ze||40)}else throw new Error("Invalid data");const oe=R.getBestVersionForData(Ve,Re);if(!oe)throw new Error("The amount of data is too big to be stored in a QR Code");if(!ge)ge=oe;else if(ge<oe)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+oe+`.
`);const _e=se(ge,Re,Ve),Fe=t.getSymbolSize(ge),Ee=new r(Fe);return F(Ee,ge),j(Ee),$(Ee,ge),W(Ee,Re,0),ge>=7&&H(Ee,ge),ee(Ee,_e),isNaN(we)&&(we=c.getBestMask(Ee,W.bind(null,Ee,Re))),c.applyMask(we,Ee),W(Ee,Re,we),{modules:Ee,version:ge,errorCorrectionLevel:Re,maskPattern:we,segments:Ve}}return H5.create=function(ge,Re){if(typeof ge>"u"||ge==="")throw new Error("No input text");let we=e.M,Ve,oe;return typeof Re<"u"&&(we=e.from(Re.errorCorrectionLevel,e.M),Ve=R.from(Re.version),oe=c.from(Re.maskPattern),Re.toSJISFunc&&t.setToSJISFunction(Re.toSJISFunc)),le(ge,Ve,we,oe)},H5}var dD={},hD={},Iq;function fte(){return Iq||(Iq=1,function(t){function e(a){if(typeof a=="number"&&(a=a.toString()),typeof a!="string")throw new Error("Color should be defined as hex string");let r=a.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+a);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(l){return[l,l]}))),r.length===6&&r.push("F","F");const i=parseInt(r.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const i=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,l=r.width&&r.width>=21?r.width:void 0,c=r.scale||4;return{width:l,scale:l?4:c,margin:i,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,i){return i.width&&i.width>=r+i.margin*2?i.width/(r+i.margin*2):i.scale},t.getImageWidth=function(r,i){const l=t.getScale(r,i);return Math.floor((r+i.margin*2)*l)},t.qrToImageData=function(r,i,l){const c=i.modules.size,n=i.modules.data,v=t.getScale(c,l),R=Math.floor((c+l.margin*2)*v),x=l.margin*v,N=[l.color.light,l.color.dark];for(let L=0;L<R;L++)for(let F=0;F<R;F++){let j=(L*R+F)*4,$=l.color.light;if(L>=x&&F>=x&&L<R-x&&F<R-x){const H=Math.floor((L-x)/v),W=Math.floor((F-x)/v);$=N[n[H*c+W]?1:0]}r[j++]=$.r,r[j++]=$.g,r[j++]=$.b,r[j]=$.a}}}(hD)),hD}var Lq;function qNe(){return Lq||(Lq=1,function(t){const e=fte();function a(i,l,c){i.clearRect(0,0,l.width,l.height),l.style||(l.style={}),l.height=c,l.width=c,l.style.height=c+"px",l.style.width=c+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(l,c,n){let v=n,R=c;typeof v>"u"&&(!c||!c.getContext)&&(v=c,c=void 0),c||(R=r()),v=e.getOptions(v);const x=e.getImageWidth(l.modules.size,v),N=R.getContext("2d"),L=N.createImageData(x,x);return e.qrToImageData(L.data,l,v),a(N,R,x),N.putImageData(L,0,0),R},t.renderToDataURL=function(l,c,n){let v=n;typeof v>"u"&&(!c||!c.getContext)&&(v=c,c=void 0),v||(v={});const R=t.render(l,c,v),x=v.type||"image/png",N=v.rendererOpts||{};return R.toDataURL(x,N.quality)}}(dD)),dD}var fD={},Fq;function HNe(){if(Fq)return fD;Fq=1;const t=fte();function e(i,l){const c=i.a/255,n=l+'="'+i.hex+'"';return c<1?n+" "+l+'-opacity="'+c.toFixed(2).slice(1)+'"':n}function a(i,l,c){let n=i+l;return typeof c<"u"&&(n+=" "+c),n}function r(i,l,c){let n="",v=0,R=!1,x=0;for(let N=0;N<i.length;N++){const L=Math.floor(N%l),F=Math.floor(N/l);!L&&!R&&(R=!0),i[N]?(x++,N>0&&L>0&&i[N-1]||(n+=R?a("M",L+c,.5+F+c):a("m",v,0),v=0,R=!1),L+1<l&&i[N+1]||(n+=a("h",x),x=0)):v++}return n}return fD.render=function(l,c,n){const v=t.getOptions(c),R=l.modules.size,x=l.modules.data,N=R+v.margin*2,L=v.color.light.a?"<path "+e(v.color.light,"fill")+' d="M0 0h'+N+"v"+N+'H0z"/>':"",F="<path "+e(v.color.dark,"stroke")+' d="'+r(x,R,v.margin)+'"/>',j='viewBox="0 0 '+N+" "+N+'"',H='<svg xmlns="http://www.w3.org/2000/svg" '+(v.width?'width="'+v.width+'" height="'+v.width+'" ':"")+j+' shape-rendering="crispEdges">'+L+F+`</svg>
`;return typeof n=="function"&&n(null,H),H},fD}var kq;function $Ne(){if(kq)return G0;kq=1;const t=xNe(),e=ZNe(),a=qNe(),r=HNe();function i(l,c,n,v,R){const x=[].slice.call(arguments,1),N=x.length,L=typeof x[N-1]=="function";if(!L&&!t())throw new Error("Callback required as last argument");if(L){if(N<2)throw new Error("Too few arguments provided");N===2?(R=n,n=c,c=v=void 0):N===3&&(c.getContext&&typeof R>"u"?(R=v,v=void 0):(R=v,v=n,n=c,c=void 0))}else{if(N<1)throw new Error("Too few arguments provided");return N===1?(n=c,c=v=void 0):N===2&&!c.getContext&&(v=n,n=c,c=void 0),new Promise(function(F,j){try{const $=e.create(n,v);F(l($,c,v))}catch($){j($)}})}try{const F=e.create(n,v);R(null,l(F,c,v))}catch(F){R(F)}}return G0.create=e.create,G0.toCanvas=i.bind(null,a.render),G0.toDataURL=i.bind(null,a.renderToDataURL),G0.toString=i.bind(null,function(l,c,n){return r.render(l,n)}),G0}var KNe=$Ne();const WNe=ss(KNe),YNe="modulepreload",XNe=function(t){return"/ecpcaps/"+t},Uq={},zT=function(e,a,r){let i=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),n=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));i=Promise.allSettled(a.map(v=>{if(v=XNe(v),v in Uq)return;Uq[v]=!0;const R=v.endsWith(".css"),x=R?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${x}`))return;const N=document.createElement("link");if(N.rel=R?"stylesheet":YNe,R||(N.as="script"),N.crossOrigin="",N.href=v,n&&N.setAttribute("nonce",n),document.head.appendChild(N),R)return new Promise((L,F)=>{N.addEventListener("load",L),N.addEventListener("error",()=>F(new Error(`Unable to preload CSS for ${v}`)))})}))}function l(c){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=c,window.dispatchEvent(n),!n.defaultPrevented)throw c}return i.then(c=>{for(const n of c||[])n.status==="rejected"&&l(n.reason);return e().catch(l)})};function qs(t){"@babel/helpers - typeof";return qs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qs(t)}var _d=Uint8Array,Af=Uint16Array,Z4=Int32Array,XP=new _d([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),JP=new _d([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),HI=new _d([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),pte=function(t,e){for(var a=new Af(31),r=0;r<31;++r)a[r]=e+=1<<t[r-1];for(var i=new Z4(a[30]),r=1;r<30;++r)for(var l=a[r];l<a[r+1];++l)i[l]=l-a[r]<<5|r;return{b:a,r:i}},mte=pte(XP,2),gte=mte.b,$I=mte.r;gte[28]=258,$I[258]=28;var yte=pte(JP,0),JNe=yte.b,Bq=yte.r,KI=new Af(32768);for(var ko=0;ko<32768;++ko){var by=(ko&43690)>>1|(ko&21845)<<1;by=(by&52428)>>2|(by&13107)<<2,by=(by&61680)>>4|(by&3855)<<4,KI[ko]=((by&65280)>>8|(by&255)<<8)>>1}var Gm=function(t,e,a){for(var r=t.length,i=0,l=new Af(e);i<r;++i)t[i]&&++l[t[i]-1];var c=new Af(e);for(i=1;i<e;++i)c[i]=c[i-1]+l[i-1]<<1;var n;if(a){n=new Af(1<<e);var v=15-e;for(i=0;i<r;++i)if(t[i])for(var R=i<<4|t[i],x=e-t[i],N=c[t[i]-1]++<<x,L=N|(1<<x)-1;N<=L;++N)n[KI[N]>>v]=R}else for(n=new Af(r),i=0;i<r;++i)t[i]&&(n[i]=KI[c[t[i]-1]++]>>15-t[i]);return n},tA=new _d(288);for(var ko=0;ko<144;++ko)tA[ko]=8;for(var ko=144;ko<256;++ko)tA[ko]=9;for(var ko=256;ko<280;++ko)tA[ko]=7;for(var ko=280;ko<288;++ko)tA[ko]=8;var DT=new _d(32);for(var ko=0;ko<32;++ko)DT[ko]=5;var QNe=Gm(tA,9,0),eOe=Gm(tA,9,1),tOe=Gm(DT,5,0),aOe=Gm(DT,5,1),pD=function(t){for(var e=t[0],a=1;a<t.length;++a)t[a]>e&&(e=t[a]);return e},Ip=function(t,e,a){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&a},mD=function(t,e){var a=e/8|0;return(t[a]|t[a+1]<<8|t[a+2]<<16)>>(e&7)},q4=function(t){return(t+7)/8|0},Ate=function(t,e,a){return(a==null||a>t.length)&&(a=t.length),new _d(t.subarray(e,a))},rOe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],kp=function(t,e,a){var r=new Error(e||rOe[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,kp),!a)throw r;return r},nOe=function(t,e,a,r){var i=t.length,l=0;if(!i||e.f&&!e.l)return a||new _d(0);var c=!a,n=c||e.i!=2,v=e.i;c&&(a=new _d(i*3));var R=function(Vt){var Bt=a.length;if(Vt>Bt){var wa=new _d(Math.max(Bt*2,Vt));wa.set(a),a=wa}},x=e.f||0,N=e.p||0,L=e.b||0,F=e.l,j=e.d,$=e.m,H=e.n,W=i*8;do{if(!F){x=Ip(t,N,1);var ee=Ip(t,N+1,3);if(N+=3,ee)if(ee==1)F=eOe,j=aOe,$=9,H=5;else if(ee==2){var me=Ip(t,N,31)+257,ge=Ip(t,N+10,15)+4,Re=me+Ip(t,N+5,31)+1;N+=14;for(var we=new _d(Re),Ve=new _d(19),oe=0;oe<ge;++oe)Ve[HI[oe]]=Ip(t,N+oe*3,7);N+=ge*3;for(var _e=pD(Ve),Fe=(1<<_e)-1,Ee=Gm(Ve,_e,1),oe=0;oe<Re;){var ze=Ee[Ip(t,N,Fe)];N+=ze&15;var se=ze>>4;if(se<16)we[oe++]=se;else{var Se=0,je=0;for(se==16?(je=3+Ip(t,N,3),N+=2,Se=we[oe-1]):se==17?(je=3+Ip(t,N,7),N+=3):se==18&&(je=11+Ip(t,N,127),N+=7);je--;)we[oe++]=Se}}var Ue=we.subarray(0,me),$e=we.subarray(me);$=pD(Ue),H=pD($e),F=Gm(Ue,$,1),j=Gm($e,H,1)}else kp(1);else{var se=q4(N)+4,fe=t[se-4]|t[se-3]<<8,le=se+fe;if(le>i){v&&kp(0);break}n&&R(L+fe),a.set(t.subarray(se,le),L),e.b=L+=fe,e.p=N=le*8,e.f=x;continue}if(N>W){v&&kp(0);break}}n&&R(L+131072);for(var Be=(1<<$)-1,qe=(1<<H)-1,be=N;;be=N){var Se=F[mD(t,N)&Be],Te=Se>>4;if(N+=Se&15,N>W){v&&kp(0);break}if(Se||kp(2),Te<256)a[L++]=Te;else if(Te==256){be=N,F=null;break}else{var ke=Te-254;if(Te>264){var oe=Te-257,Ge=XP[oe];ke=Ip(t,N,(1<<Ge)-1)+gte[oe],N+=Ge}var at=j[mD(t,N)&qe],rt=at>>4;at||kp(3),N+=at&15;var $e=JNe[rt];if(rt>3){var Ge=JP[rt];$e+=mD(t,N)&(1<<Ge)-1,N+=Ge}if(N>W){v&&kp(0);break}n&&R(L+131072);var lt=L+ke;if(L<$e){var ot=l-$e,ve=Math.min($e,lt);for(ot+L<0&&kp(3);L<ve;++L)a[L]=r[ot+L]}for(;L<lt;++L)a[L]=a[L-$e]}}e.l=F,e.p=be,e.b=L,e.f=x,F&&(x=1,e.m=$,e.d=j,e.n=H)}while(!x);return L!=a.length&&c?Ate(a,0,L):a.subarray(0,L)},Ag=function(t,e,a){a<<=e&7;var r=e/8|0;t[r]|=a,t[r+1]|=a>>8},Xw=function(t,e,a){a<<=e&7;var r=e/8|0;t[r]|=a,t[r+1]|=a>>8,t[r+2]|=a>>16},gD=function(t,e){for(var a=[],r=0;r<t.length;++r)t[r]&&a.push({s:r,f:t[r]});var i=a.length,l=a.slice();if(!i)return{t:_te,l:0};if(i==1){var c=new _d(a[0].s+1);return c[a[0].s]=1,{t:c,l:1}}a.sort(function(le,me){return le.f-me.f}),a.push({s:-1,f:25001});var n=a[0],v=a[1],R=0,x=1,N=2;for(a[0]={s:-1,f:n.f+v.f,l:n,r:v};x!=i-1;)n=a[a[R].f<a[N].f?R++:N++],v=a[R!=x&&a[R].f<a[N].f?R++:N++],a[x++]={s:-1,f:n.f+v.f,l:n,r:v};for(var L=l[0].s,r=1;r<i;++r)l[r].s>L&&(L=l[r].s);var F=new Af(L+1),j=WI(a[x-1],F,0);if(j>e){var r=0,$=0,H=j-e,W=1<<H;for(l.sort(function(me,ge){return F[ge.s]-F[me.s]||me.f-ge.f});r<i;++r){var ee=l[r].s;if(F[ee]>e)$+=W-(1<<j-F[ee]),F[ee]=e;else break}for($>>=H;$>0;){var se=l[r].s;F[se]<e?$-=1<<e-F[se]++-1:++r}for(;r>=0&&$;--r){var fe=l[r].s;F[fe]==e&&(--F[fe],++$)}j=e}return{t:new _d(F),l:j}},WI=function(t,e,a){return t.s==-1?Math.max(WI(t.l,e,a+1),WI(t.r,e,a+1)):e[t.s]=a},jq=function(t){for(var e=t.length;e&&!t[--e];);for(var a=new Af(++e),r=0,i=t[0],l=1,c=function(v){a[r++]=v},n=1;n<=e;++n)if(t[n]==i&&n!=e)++l;else{if(!i&&l>2){for(;l>138;l-=138)c(32754);l>2&&(c(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(c(i),--l;l>6;l-=6)c(8304);l>2&&(c(l-3<<5|8208),l=0)}for(;l--;)c(i);l=1,i=t[n]}return{c:a.subarray(0,r),n:e}},Jw=function(t,e){for(var a=0,r=0;r<e.length;++r)a+=t[r]*e[r];return a},vte=function(t,e,a){var r=a.length,i=q4(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var l=0;l<r;++l)t[i+l+4]=a[l];return(i+4+r)*8},Gq=function(t,e,a,r,i,l,c,n,v,R,x){Ag(e,x++,a),++i[256];for(var N=gD(i,15),L=N.t,F=N.l,j=gD(l,15),$=j.t,H=j.l,W=jq(L),ee=W.c,se=W.n,fe=jq($),le=fe.c,me=fe.n,ge=new Af(19),Re=0;Re<ee.length;++Re)++ge[ee[Re]&31];for(var Re=0;Re<le.length;++Re)++ge[le[Re]&31];for(var we=gD(ge,7),Ve=we.t,oe=we.l,_e=19;_e>4&&!Ve[HI[_e-1]];--_e);var Fe=R+5<<3,Ee=Jw(i,tA)+Jw(l,DT)+c,ze=Jw(i,L)+Jw(l,$)+c+14+3*_e+Jw(ge,Ve)+2*ge[16]+3*ge[17]+7*ge[18];if(v>=0&&Fe<=Ee&&Fe<=ze)return vte(e,x,t.subarray(v,v+R));var Se,je,Ue,$e;if(Ag(e,x,1+(ze<Ee)),x+=2,ze<Ee){Se=Gm(L,F,0),je=L,Ue=Gm($,H,0),$e=$;var Be=Gm(Ve,oe,0);Ag(e,x,se-257),Ag(e,x+5,me-1),Ag(e,x+10,_e-4),x+=14;for(var Re=0;Re<_e;++Re)Ag(e,x+3*Re,Ve[HI[Re]]);x+=3*_e;for(var qe=[ee,le],be=0;be<2;++be)for(var Te=qe[be],Re=0;Re<Te.length;++Re){var ke=Te[Re]&31;Ag(e,x,Be[ke]),x+=Ve[ke],ke>15&&(Ag(e,x,Te[Re]>>5&127),x+=Te[Re]>>12)}}else Se=QNe,je=tA,Ue=tOe,$e=DT;for(var Re=0;Re<n;++Re){var Ge=r[Re];if(Ge>255){var ke=Ge>>18&31;Xw(e,x,Se[ke+257]),x+=je[ke+257],ke>7&&(Ag(e,x,Ge>>23&31),x+=XP[ke]);var at=Ge&31;Xw(e,x,Ue[at]),x+=$e[at],at>3&&(Xw(e,x,Ge>>5&8191),x+=JP[at])}else Xw(e,x,Se[Ge]),x+=je[Ge]}return Xw(e,x,Se[256]),x+je[256]},iOe=new Z4([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),_te=new _d(0),sOe=function(t,e,a,r,i,l){var c=l.z||t.length,n=new _d(r+c+5*(1+Math.ceil(c/7e3))+i),v=n.subarray(r,n.length-i),R=l.l,x=(l.r||0)&7;if(e){x&&(v[0]=l.r>>3);for(var N=iOe[e-1],L=N>>13,F=N&8191,j=(1<<a)-1,$=l.p||new Af(32768),H=l.h||new Af(j+1),W=Math.ceil(a/3),ee=2*W,se=function(It){return(t[It]^t[It+1]<<W^t[It+2]<<ee)&j},fe=new Z4(25e3),le=new Af(288),me=new Af(32),ge=0,Re=0,we=l.i||0,Ve=0,oe=l.w||0,_e=0;we+2<c;++we){var Fe=se(we),Ee=we&32767,ze=H[Fe];if($[Ee]=ze,H[Fe]=Ee,oe<=we){var Se=c-we;if((ge>7e3||Ve>24576)&&(Se>423||!R)){x=Gq(t,v,0,fe,le,me,Re,Ve,_e,we-_e,x),Ve=ge=Re=0,_e=we;for(var je=0;je<286;++je)le[je]=0;for(var je=0;je<30;++je)me[je]=0}var Ue=2,$e=0,Be=F,qe=Ee-ze&32767;if(Se>2&&Fe==se(we-qe))for(var be=Math.min(L,Se)-1,Te=Math.min(32767,we),ke=Math.min(258,Se);qe<=Te&&--Be&&Ee!=ze;){if(t[we+Ue]==t[we+Ue-qe]){for(var Ge=0;Ge<ke&&t[we+Ge]==t[we+Ge-qe];++Ge);if(Ge>Ue){if(Ue=Ge,$e=qe,Ge>be)break;for(var at=Math.min(qe,Ge-2),rt=0,je=0;je<at;++je){var lt=we-qe+je&32767,ot=$[lt],ve=lt-ot&32767;ve>rt&&(rt=ve,ze=lt)}}}Ee=ze,ze=$[Ee],qe+=Ee-ze&32767}if($e){fe[Ve++]=268435456|$I[Ue]<<18|Bq[$e];var Vt=$I[Ue]&31,Bt=Bq[$e]&31;Re+=XP[Vt]+JP[Bt],++le[257+Vt],++me[Bt],oe=we+Ue,++ge}else fe[Ve++]=t[we],++le[t[we]]}}for(we=Math.max(we,oe);we<c;++we)fe[Ve++]=t[we],++le[t[we]];x=Gq(t,v,R,fe,le,me,Re,Ve,_e,we-_e,x),R||(l.r=x&7|v[x/8|0]<<3,x-=7,l.h=H,l.p=$,l.i=we,l.w=oe)}else{for(var we=l.w||0;we<c+R;we+=65535){var wa=we+65535;wa>=c&&(v[x/8|0]=R,wa=c),x=vte(v,x+1,t.subarray(we,wa))}l.i=c}return Ate(n,0,r+q4(x)+i)},wte=function(){var t=1,e=0;return{p:function(a){for(var r=t,i=e,l=a.length|0,c=0;c!=l;){for(var n=Math.min(c+2655,l);c<n;++c)i+=r+=a[c];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},oOe=function(t,e,a,r,i){if(!i&&(i={l:1},e.dictionary)){var l=e.dictionary.subarray(-32768),c=new _d(l.length+t.length);c.set(l),c.set(t,l.length),t=c,i.w=l.length}return sOe(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,a,r,i)},Rte=function(t,e,a){for(;a;++e)t[e]=a,a>>>=8},lOe=function(t,e){var a=e.level,r=a==0?0:a<6?1:a==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=wte();i.p(e.dictionary),Rte(t,2,i.d())}},uOe=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&kp(6,"invalid zlib data"),(t[1]>>5&1)==1&&kp(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function YI(t,e){e||(e={});var a=wte();a.p(t);var r=oOe(t,e,e.dictionary?6:2,4);return lOe(r,e),Rte(r,r.length-4,a.d()),r}function cOe(t,e){return nOe(t.subarray(uOe(t),-4),{i:2},e,e)}var dOe=typeof TextDecoder<"u"&&new TextDecoder,hOe=0;try{dOe.decode(_te,{stream:!0}),hOe=1}catch{}var Qn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function yD(){Qn.console&&typeof Qn.console.log=="function"&&Qn.console.log.apply(Qn.console,arguments)}var fo={log:yD,warn:function(t){Qn.console&&(typeof Qn.console.warn=="function"?Qn.console.warn.apply(Qn.console,arguments):yD.call(null,arguments))},error:function(t){Qn.console&&(typeof Qn.console.error=="function"?Qn.console.error.apply(Qn.console,arguments):yD(t))}};function AD(t,e,a){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){sv(r.response,e,a)},r.onerror=function(){fo.error("could not download file")},r.send()}function Zq(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function ib(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var OR,XI,sv=Qn.saveAs||((typeof window>"u"?"undefined":qs(window))!=="object"||window!==Qn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,a){var r=Qn.URL||Qn.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?Zq(i.href)?AD(t,e,a):ib(i,i.target="_blank"):ib(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){ib(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,a){if(e=e||t.name||"download",typeof t=="string")if(Zq(t))AD(t,e,a);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){ib(r)})}else navigator.msSaveOrOpenBlob(function(i,l){return l===void 0?l={autoBom:!1}:qs(l)!=="object"&&(fo.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,a),e)}:function(t,e,a,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return AD(t,e,a);var i=t.type==="application/octet-stream",l=/constructor/i.test(Qn.HTMLElement)||Qn.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||i&&l)&&(typeof FileReader>"u"?"undefined":qs(FileReader))==="object"){var n=new FileReader;n.onloadend=function(){var x=n.result;x=c?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=x:location=x,r=null},n.readAsDataURL(t)}else{var v=Qn.URL||Qn.webkitURL,R=v.createObjectURL(t);r?r.location=R:location.href=R,r=null,setTimeout(function(){v.revokeObjectURL(R)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Tte(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var a=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(n){return[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(n){return[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(n){return[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]}}],r=0;r<a.length;r++){var i=a[r].re,l=a[r].process,c=i.exec(t);c&&(e=l(c),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var n=this.r.toString(16),v=this.g.toString(16),R=this.b.toString(16);return n.length==1&&(n="0"+n),v.length==1&&(v="0"+v),R.length==1&&(R="0"+R),"#"+n+v+R}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function vD(t,e){var a=t[0],r=t[1],i=t[2],l=t[3];a=cd(a,r,i,l,e[0],7,-680876936),l=cd(l,a,r,i,e[1],12,-389564586),i=cd(i,l,a,r,e[2],17,606105819),r=cd(r,i,l,a,e[3],22,-1044525330),a=cd(a,r,i,l,e[4],7,-176418897),l=cd(l,a,r,i,e[5],12,1200080426),i=cd(i,l,a,r,e[6],17,-1473231341),r=cd(r,i,l,a,e[7],22,-45705983),a=cd(a,r,i,l,e[8],7,1770035416),l=cd(l,a,r,i,e[9],12,-1958414417),i=cd(i,l,a,r,e[10],17,-42063),r=cd(r,i,l,a,e[11],22,-1990404162),a=cd(a,r,i,l,e[12],7,1804603682),l=cd(l,a,r,i,e[13],12,-40341101),i=cd(i,l,a,r,e[14],17,-1502002290),a=dd(a,r=cd(r,i,l,a,e[15],22,1236535329),i,l,e[1],5,-165796510),l=dd(l,a,r,i,e[6],9,-1069501632),i=dd(i,l,a,r,e[11],14,643717713),r=dd(r,i,l,a,e[0],20,-373897302),a=dd(a,r,i,l,e[5],5,-701558691),l=dd(l,a,r,i,e[10],9,38016083),i=dd(i,l,a,r,e[15],14,-660478335),r=dd(r,i,l,a,e[4],20,-405537848),a=dd(a,r,i,l,e[9],5,568446438),l=dd(l,a,r,i,e[14],9,-1019803690),i=dd(i,l,a,r,e[3],14,-187363961),r=dd(r,i,l,a,e[8],20,1163531501),a=dd(a,r,i,l,e[13],5,-1444681467),l=dd(l,a,r,i,e[2],9,-51403784),i=dd(i,l,a,r,e[7],14,1735328473),a=hd(a,r=dd(r,i,l,a,e[12],20,-1926607734),i,l,e[5],4,-378558),l=hd(l,a,r,i,e[8],11,-2022574463),i=hd(i,l,a,r,e[11],16,1839030562),r=hd(r,i,l,a,e[14],23,-35309556),a=hd(a,r,i,l,e[1],4,-1530992060),l=hd(l,a,r,i,e[4],11,1272893353),i=hd(i,l,a,r,e[7],16,-155497632),r=hd(r,i,l,a,e[10],23,-1094730640),a=hd(a,r,i,l,e[13],4,681279174),l=hd(l,a,r,i,e[0],11,-358537222),i=hd(i,l,a,r,e[3],16,-722521979),r=hd(r,i,l,a,e[6],23,76029189),a=hd(a,r,i,l,e[9],4,-640364487),l=hd(l,a,r,i,e[12],11,-421815835),i=hd(i,l,a,r,e[15],16,530742520),a=fd(a,r=hd(r,i,l,a,e[2],23,-995338651),i,l,e[0],6,-198630844),l=fd(l,a,r,i,e[7],10,1126891415),i=fd(i,l,a,r,e[14],15,-1416354905),r=fd(r,i,l,a,e[5],21,-57434055),a=fd(a,r,i,l,e[12],6,1700485571),l=fd(l,a,r,i,e[3],10,-1894986606),i=fd(i,l,a,r,e[10],15,-1051523),r=fd(r,i,l,a,e[1],21,-2054922799),a=fd(a,r,i,l,e[8],6,1873313359),l=fd(l,a,r,i,e[15],10,-30611744),i=fd(i,l,a,r,e[6],15,-1560198380),r=fd(r,i,l,a,e[13],21,1309151649),a=fd(a,r,i,l,e[4],6,-145523070),l=fd(l,a,r,i,e[11],10,-1120210379),i=fd(i,l,a,r,e[2],15,718787259),r=fd(r,i,l,a,e[9],21,-343485551),t[0]=Gy(a,t[0]),t[1]=Gy(r,t[1]),t[2]=Gy(i,t[2]),t[3]=Gy(l,t[3])}function QP(t,e,a,r,i,l){return e=Gy(Gy(e,t),Gy(r,l)),Gy(e<<i|e>>>32-i,a)}function cd(t,e,a,r,i,l,c){return QP(e&a|~e&r,t,e,i,l,c)}function dd(t,e,a,r,i,l,c){return QP(e&r|a&~r,t,e,i,l,c)}function hd(t,e,a,r,i,l,c){return QP(e^a^r,t,e,i,l,c)}function fd(t,e,a,r,i,l,c){return QP(a^(e|~r),t,e,i,l,c)}function Cte(t){var e,a=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)vD(r,fOe(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(vD(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*a,vD(r,i),r}function fOe(t){var e,a=[];for(e=0;e<64;e+=4)a[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return a}OR=Qn.atob.bind(Qn),XI=Qn.btoa.bind(Qn);var qq="0123456789abcdef".split("");function pOe(t){for(var e="",a=0;a<4;a++)e+=qq[t>>8*a+4&15]+qq[t>>8*a&15];return e}function mOe(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function JI(t){return Cte(t).map(mOe).join("")}var gOe=function(t){for(var e=0;e<t.length;e++)t[e]=pOe(t[e]);return t.join("")}(Cte("hello"))!="5d41402abc4b2a76b9719d911017c592";function Gy(t,e){if(gOe){var a=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(a>>16)<<16|65535&a}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function QI(t,e){var a,r,i,l;if(t!==a){for(var c=(i=t,l=1+(256/t.length>>0),new Array(l+1).join(i)),n=[],v=0;v<256;v++)n[v]=v;var R=0;for(v=0;v<256;v++){var x=n[v];R=(R+x+c.charCodeAt(v))%256,n[v]=n[R],n[R]=x}a=t,r=n}else n=r;var N=e.length,L=0,F=0,j="";for(v=0;v<N;v++)F=(F+(x=n[L=(L+1)%256]))%256,n[L]=n[F],n[F]=x,c=n[(n[L]+n[F])%256],j+=String.fromCharCode(e.charCodeAt(v)^c);return j}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Hq={print:4,modify:8,copy:16,"annot-forms":32};function W0(t,e,a,r){this.v=1,this.r=2;var i=192;t.forEach(function(n){if(Hq.perm!==void 0)throw new Error("Invalid permission: "+n);i+=Hq[n]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var l=(e+this.padding).substr(0,32),c=(a+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,c),this.P=-(1+(255^i)),this.encryptionKey=JI(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=QI(this.encryptionKey,this.padding)}function Y0(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",a=t.length,r=0;r<a;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function $q(t){if(qs(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(a,r,i){if(i=i||!1,typeof a!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(a)||(e[a]={});var l=Math.random().toString(35);return e[a][l]=[r,!!i],l},this.unsubscribe=function(a){for(var r in e)if(e[r][a])return delete e[r][a],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(a){if(e.hasOwnProperty(a)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var l in e[a]){var c=e[a][l];try{c[0].apply(t,r)}catch(n){Qn.console&&fo.error("jsPDF PubSub Error",n.message,n)}c[1]&&i.push(l)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function f2(t){if(!(this instanceof f2))return new f2(t);var e="opacity,stroke-opacity".split(",");for(var a in t)t.hasOwnProperty(a)&&e.indexOf(a)>=0&&(this[a]=t[a]);this.id="",this.objectNumber=-1}function Ste(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function lv(t,e,a,r,i){if(!(this instanceof lv))return new lv(t,e,a,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=a,Ste.call(this,r,i)}function n_(t,e,a,r,i){if(!(this instanceof n_))return new n_(t,e,a,r,i);this.boundingBox=t,this.xStep=e,this.yStep=a,this.stream="",this.cloneIndex=0,Ste.call(this,r,i)}function Wn(t){var e,a=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],l=arguments[3],c=[],n=1,v=16,R="S",x=null;qs(t=t||{})==="object"&&(a=t.orientation,r=t.unit||r,i=t.format||i,l=t.compress||t.compressPdf||l,(x=t.encryption||null)!==null&&(x.userPassword=x.userPassword||"",x.ownerPassword=x.ownerPassword||"",x.userPermissions=x.userPermissions||[]),n=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(v=t.floatPrecision),R=t.defaultPathOperation||"S"),c=t.filters||(l===!0?["FlateEncode"]:c),r=r||"mm",a=(""+(a||"P")).toLowerCase();var N=t.putOnlyUsedFonts||!1,L={},F={internal:{},__private__:{}};F.__private__.PubSub=$q;var j="1.3",$=F.__private__.getPdfVersion=function(){return j};F.__private__.setPdfVersion=function(ce){j=ce};var H={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};F.__private__.getPageFormats=function(){return H};var W=F.__private__.getPageFormat=function(ce){return H[ce]};i=i||"a4";var ee={COMPAT:"compat",ADVANCED:"advanced"},se=ee.COMPAT;function fe(){this.saveGraphicsState(),wt(new Ie(la,0,0,-la,0,au()*la).toString()+" cm"),this.setFontSize(this.getFontSize()/la),R="n",se=ee.ADVANCED}function le(){this.restoreGraphicsState(),R="S",se=ee.COMPAT}var me=F.__private__.combineFontStyleAndFontWeight=function(ce,Je){if(ce=="bold"&&Je=="normal"||ce=="bold"&&Je==400||ce=="normal"&&Je=="italic"||ce=="bold"&&Je=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Je&&(ce=Je==400||Je==="normal"?ce==="italic"?"italic":"normal":Je!=700&&Je!=="bold"||ce!=="normal"?(Je==700?"bold":Je)+""+ce:"bold"),ce};F.advancedAPI=function(ce){var Je=se===ee.COMPAT;return Je&&fe.call(this),typeof ce!="function"||(ce(this),Je&&le.call(this)),this},F.compatAPI=function(ce){var Je=se===ee.ADVANCED;return Je&&le.call(this),typeof ce!="function"||(ce(this),Je&&fe.call(this)),this},F.isAdvancedAPI=function(){return se===ee.ADVANCED};var ge,Re=function(ce){if(se!==ee.ADVANCED)throw new Error(ce+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},we=F.roundToPrecision=F.__private__.roundToPrecision=function(ce,Je){var Mt=e||Je;if(isNaN(ce)||isNaN(Mt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return ce.toFixed(Mt).replace(/0+$/,"")};ge=F.hpf=F.__private__.hpf=typeof v=="number"?function(ce){if(isNaN(ce))throw new Error("Invalid argument passed to jsPDF.hpf");return we(ce,v)}:v==="smart"?function(ce){if(isNaN(ce))throw new Error("Invalid argument passed to jsPDF.hpf");return we(ce,ce>-1&&ce<1?16:5)}:function(ce){if(isNaN(ce))throw new Error("Invalid argument passed to jsPDF.hpf");return we(ce,16)};var Ve=F.f2=F.__private__.f2=function(ce){if(isNaN(ce))throw new Error("Invalid argument passed to jsPDF.f2");return we(ce,2)},oe=F.__private__.f3=function(ce){if(isNaN(ce))throw new Error("Invalid argument passed to jsPDF.f3");return we(ce,3)},_e=F.scale=F.__private__.scale=function(ce){if(isNaN(ce))throw new Error("Invalid argument passed to jsPDF.scale");return se===ee.COMPAT?ce*la:se===ee.ADVANCED?ce:void 0},Fe=function(ce){return se===ee.COMPAT?au()-ce:se===ee.ADVANCED?ce:void 0},Ee=function(ce){return _e(Fe(ce))};F.__private__.setPrecision=F.setPrecision=function(ce){typeof parseInt(ce,10)=="number"&&(e=parseInt(ce,10))};var ze,Se="00000000000000000000000000000000",je=F.__private__.getFileId=function(){return Se},Ue=F.__private__.setFileId=function(ce){return Se=ce!==void 0&&/^[a-fA-F0-9]{32}$/.test(ce)?ce.toUpperCase():Se.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),x!==null&&(go=new W0(x.userPermissions,x.userPassword,x.ownerPassword,Se)),Se};F.setFileId=function(ce){return Ue(ce),this},F.getFileId=function(){return je()};var $e=F.__private__.convertDateToPDFDate=function(ce){var Je=ce.getTimezoneOffset(),Mt=Je<0?"+":"-",Jt=Math.floor(Math.abs(Je/60)),ha=Math.abs(Je%60),Ma=[Mt,ke(Jt),"'",ke(ha),"'"].join("");return["D:",ce.getFullYear(),ke(ce.getMonth()+1),ke(ce.getDate()),ke(ce.getHours()),ke(ce.getMinutes()),ke(ce.getSeconds()),Ma].join("")},Be=F.__private__.convertPDFDateToDate=function(ce){var Je=parseInt(ce.substr(2,4),10),Mt=parseInt(ce.substr(6,2),10)-1,Jt=parseInt(ce.substr(8,2),10),ha=parseInt(ce.substr(10,2),10),Ma=parseInt(ce.substr(12,2),10),ir=parseInt(ce.substr(14,2),10);return new Date(Je,Mt,Jt,ha,Ma,ir,0)},qe=F.__private__.setCreationDate=function(ce){var Je;if(ce===void 0&&(ce=new Date),ce instanceof Date)Je=$e(ce);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(ce))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Je=ce}return ze=Je},be=F.__private__.getCreationDate=function(ce){var Je=ze;return ce==="jsDate"&&(Je=Be(ze)),Je};F.setCreationDate=function(ce){return qe(ce),this},F.getCreationDate=function(ce){return be(ce)};var Te,ke=F.__private__.padd2=function(ce){return("0"+parseInt(ce)).slice(-2)},Ge=F.__private__.padd2Hex=function(ce){return("00"+(ce=ce.toString())).substr(ce.length)},at=0,rt=[],lt=[],ot=0,ve=[],Vt=[],Bt=!1,wa=lt,It=function(){at=0,ot=0,lt=[],rt=[],ve=[],Yt=Gt(),Kt=Gt()};F.__private__.setCustomOutputDestination=function(ce){Bt=!0,wa=ce};var $t=function(ce){Bt||(wa=ce)};F.__private__.resetCustomOutputDestination=function(){Bt=!1,wa=lt};var wt=F.__private__.out=function(ce){return ce=ce.toString(),ot+=ce.length+1,wa.push(ce),wa},hr=F.__private__.write=function(ce){return wt(arguments.length===1?ce.toString():Array.prototype.join.call(arguments," "))},ba=F.__private__.getArrayBuffer=function(ce){for(var Je=ce.length,Mt=new ArrayBuffer(Je),Jt=new Uint8Array(Mt);Je--;)Jt[Je]=ce.charCodeAt(Je);return Mt},Pa=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];F.__private__.getStandardFonts=function(){return Pa};var Ja=t.fontSize||16;F.__private__.setFontSize=F.setFontSize=function(ce){return Ja=se===ee.ADVANCED?ce/la:ce,this};var or,lr=F.__private__.getFontSize=F.getFontSize=function(){return se===ee.COMPAT?Ja:Ja*la},Tr=t.R2L||!1;F.__private__.setR2L=F.setR2L=function(ce){return Tr=ce,this},F.__private__.getR2L=F.getR2L=function(){return Tr};var ka,kr=F.__private__.setZoomMode=function(ce){var Je=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(ce))or=ce;else if(isNaN(ce)){if(Je.indexOf(ce)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+ce+'" is not recognized.');or=ce}else or=parseInt(ce,10)};F.__private__.getZoomMode=function(){return or};var nn,wn=F.__private__.setPageMode=function(ce){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(ce)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+ce+'" is not recognized.');ka=ce};F.__private__.getPageMode=function(){return ka};var un=F.__private__.setLayoutMode=function(ce){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(ce)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+ce+'" is not recognized.');nn=ce};F.__private__.getLayoutMode=function(){return nn},F.__private__.setDisplayMode=F.setDisplayMode=function(ce,Je,Mt){return kr(ce),un(Je),wn(Mt),this};var va={title:"",subject:"",author:"",keywords:"",creator:""};F.__private__.getDocumentProperty=function(ce){if(Object.keys(va).indexOf(ce)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return va[ce]},F.__private__.getDocumentProperties=function(){return va},F.__private__.setDocumentProperties=F.setProperties=F.setDocumentProperties=function(ce){for(var Je in va)va.hasOwnProperty(Je)&&ce[Je]&&(va[Je]=ce[Je]);return this},F.__private__.setDocumentProperty=function(ce,Je){if(Object.keys(va).indexOf(ce)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return va[ce]=Je};var $a,la,Ya,yr,Tn,Qr={},cn={},$r=[],br={},Fi={},yi={},oi={},Cs=null,ga=0,pr=[],Kr=new $q(F),ti=t.hotfixes||[],Rn={},Zt={},Ne=[],Ie=function ce(Je,Mt,Jt,ha,Ma,ir){if(!(this instanceof ce))return new ce(Je,Mt,Jt,ha,Ma,ir);isNaN(Je)&&(Je=1),isNaN(Mt)&&(Mt=0),isNaN(Jt)&&(Jt=0),isNaN(ha)&&(ha=1),isNaN(Ma)&&(Ma=0),isNaN(ir)&&(ir=0),this._matrix=[Je,Mt,Jt,ha,Ma,ir]};Object.defineProperty(Ie.prototype,"sx",{get:function(){return this._matrix[0]},set:function(ce){this._matrix[0]=ce}}),Object.defineProperty(Ie.prototype,"shy",{get:function(){return this._matrix[1]},set:function(ce){this._matrix[1]=ce}}),Object.defineProperty(Ie.prototype,"shx",{get:function(){return this._matrix[2]},set:function(ce){this._matrix[2]=ce}}),Object.defineProperty(Ie.prototype,"sy",{get:function(){return this._matrix[3]},set:function(ce){this._matrix[3]=ce}}),Object.defineProperty(Ie.prototype,"tx",{get:function(){return this._matrix[4]},set:function(ce){this._matrix[4]=ce}}),Object.defineProperty(Ie.prototype,"ty",{get:function(){return this._matrix[5]},set:function(ce){this._matrix[5]=ce}}),Object.defineProperty(Ie.prototype,"a",{get:function(){return this._matrix[0]},set:function(ce){this._matrix[0]=ce}}),Object.defineProperty(Ie.prototype,"b",{get:function(){return this._matrix[1]},set:function(ce){this._matrix[1]=ce}}),Object.defineProperty(Ie.prototype,"c",{get:function(){return this._matrix[2]},set:function(ce){this._matrix[2]=ce}}),Object.defineProperty(Ie.prototype,"d",{get:function(){return this._matrix[3]},set:function(ce){this._matrix[3]=ce}}),Object.defineProperty(Ie.prototype,"e",{get:function(){return this._matrix[4]},set:function(ce){this._matrix[4]=ce}}),Object.defineProperty(Ie.prototype,"f",{get:function(){return this._matrix[5]},set:function(ce){this._matrix[5]=ce}}),Object.defineProperty(Ie.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ie.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ie.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ie.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ie.prototype.join=function(ce){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ge).join(ce)},Ie.prototype.multiply=function(ce){var Je=ce.sx*this.sx+ce.shy*this.shx,Mt=ce.sx*this.shy+ce.shy*this.sy,Jt=ce.shx*this.sx+ce.sy*this.shx,ha=ce.shx*this.shy+ce.sy*this.sy,Ma=ce.tx*this.sx+ce.ty*this.shx+this.tx,ir=ce.tx*this.shy+ce.ty*this.sy+this.ty;return new Ie(Je,Mt,Jt,ha,Ma,ir)},Ie.prototype.decompose=function(){var ce=this.sx,Je=this.shy,Mt=this.shx,Jt=this.sy,ha=this.tx,Ma=this.ty,ir=Math.sqrt(ce*ce+Je*Je),xr=(ce/=ir)*Mt+(Je/=ir)*Jt;Mt-=ce*xr,Jt-=Je*xr;var Jr=Math.sqrt(Mt*Mt+Jt*Jt);return xr/=Jr,ce*(Jt/=Jr)<Je*(Mt/=Jr)&&(ce=-ce,Je=-Je,xr=-xr,ir=-ir),{scale:new Ie(ir,0,0,Jr,0,0),translate:new Ie(1,0,0,1,ha,Ma),rotate:new Ie(ce,Je,-Je,ce,0,0),skew:new Ie(1,0,xr,1,0,0)}},Ie.prototype.toString=function(ce){return this.join(" ")},Ie.prototype.inversed=function(){var ce=this.sx,Je=this.shy,Mt=this.shx,Jt=this.sy,ha=this.tx,Ma=this.ty,ir=1/(ce*Jt-Je*Mt),xr=Jt*ir,Jr=-Je*ir,On=-Mt*ir,Fn=ce*ir;return new Ie(xr,Jr,On,Fn,-xr*ha-On*Ma,-Jr*ha-Fn*Ma)},Ie.prototype.applyToPoint=function(ce){var Je=ce.x*this.sx+ce.y*this.shx+this.tx,Mt=ce.x*this.shy+ce.y*this.sy+this.ty;return new Cu(Je,Mt)},Ie.prototype.applyToRectangle=function(ce){var Je=this.applyToPoint(ce),Mt=this.applyToPoint(new Cu(ce.x+ce.w,ce.y+ce.h));return new Su(Je.x,Je.y,Mt.x-Je.x,Mt.y-Je.y)},Ie.prototype.clone=function(){var ce=this.sx,Je=this.shy,Mt=this.shx,Jt=this.sy,ha=this.tx,Ma=this.ty;return new Ie(ce,Je,Mt,Jt,ha,Ma)},F.Matrix=Ie;var He=F.matrixMult=function(ce,Je){return Je.multiply(ce)},yt=new Ie(1,0,0,1,0,0);F.unitMatrix=F.identityMatrix=yt;var At=function(ce,Je){if(!Fi[ce]){var Mt=(Je instanceof lv?"Sh":"P")+(Object.keys(br).length+1).toString(10);Je.id=Mt,Fi[ce]=Mt,br[Mt]=Je,Kr.publish("addPattern",Je)}};F.ShadingPattern=lv,F.TilingPattern=n_,F.addShadingPattern=function(ce,Je){return Re("addShadingPattern()"),At(ce,Je),this},F.beginTilingPattern=function(ce){Re("beginTilingPattern()"),tu(ce.boundingBox[0],ce.boundingBox[1],ce.boundingBox[2]-ce.boundingBox[0],ce.boundingBox[3]-ce.boundingBox[1],ce.matrix)},F.endTilingPattern=function(ce,Je){Re("endTilingPattern()"),Je.stream=Vt[Te].join(`
`),At(ce,Je),Kr.publish("endTilingPattern",Je),Ne.pop().restore()};var bt=F.__private__.newObject=function(){var ce=Gt();return Et(ce,!0),ce},Gt=F.__private__.newObjectDeferred=function(){return at++,rt[at]=function(){return ot},at},Et=function(ce,Je){return Je=typeof Je=="boolean"&&Je,rt[ce]=ot,Je&&wt(ce+" 0 obj"),ce},Wt=F.__private__.newAdditionalObject=function(){var ce={objId:Gt(),content:""};return ve.push(ce),ce},Yt=Gt(),Kt=Gt(),Ca=F.__private__.decodeColorString=function(ce){var Je=ce.split(" ");if(Je.length!==2||Je[1]!=="g"&&Je[1]!=="G")Je.length===5&&(Je[4]==="k"||Je[4]==="K")&&(Je=[(1-Je[0])*(1-Je[3]),(1-Je[1])*(1-Je[3]),(1-Je[2])*(1-Je[3]),"r"]);else{var Mt=parseFloat(Je[0]);Je=[Mt,Mt,Mt,"r"]}for(var Jt="#",ha=0;ha<3;ha++)Jt+=("0"+Math.floor(255*parseFloat(Je[ha])).toString(16)).slice(-2);return Jt},Ia=F.__private__.encodeColorString=function(ce){var Je;typeof ce=="string"&&(ce={ch1:ce});var Mt=ce.ch1,Jt=ce.ch2,ha=ce.ch3,Ma=ce.ch4,ir=ce.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Mt=="string"&&Mt.charAt(0)!=="#"){var xr=new Tte(Mt);if(xr.ok)Mt=xr.toHex();else if(!/^\d*\.?\d*$/.test(Mt))throw new Error('Invalid color "'+Mt+'" passed to jsPDF.encodeColorString.')}if(typeof Mt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Mt)&&(Mt="#"+Mt[1]+Mt[1]+Mt[2]+Mt[2]+Mt[3]+Mt[3]),typeof Mt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Mt)){var Jr=parseInt(Mt.substr(1),16);Mt=Jr>>16&255,Jt=Jr>>8&255,ha=255&Jr}if(Jt===void 0||Ma===void 0&&Mt===Jt&&Jt===ha)if(typeof Mt=="string")Je=Mt+" "+ir[0];else switch(ce.precision){case 2:Je=Ve(Mt/255)+" "+ir[0];break;case 3:default:Je=oe(Mt/255)+" "+ir[0]}else if(Ma===void 0||qs(Ma)==="object"){if(Ma&&!isNaN(Ma.a)&&Ma.a===0)return Je=["1.","1.","1.",ir[1]].join(" ");if(typeof Mt=="string")Je=[Mt,Jt,ha,ir[1]].join(" ");else switch(ce.precision){case 2:Je=[Ve(Mt/255),Ve(Jt/255),Ve(ha/255),ir[1]].join(" ");break;default:case 3:Je=[oe(Mt/255),oe(Jt/255),oe(ha/255),ir[1]].join(" ")}}else if(typeof Mt=="string")Je=[Mt,Jt,ha,Ma,ir[2]].join(" ");else switch(ce.precision){case 2:Je=[Ve(Mt),Ve(Jt),Ve(ha),Ve(Ma),ir[2]].join(" ");break;case 3:default:Je=[oe(Mt),oe(Jt),oe(ha),oe(Ma),ir[2]].join(" ")}return Je},Ga=F.__private__.getFilters=function(){return c},Cr=F.__private__.putStream=function(ce){var Je=(ce=ce||{}).data||"",Mt=ce.filters||Ga(),Jt=ce.alreadyAppliedFilters||[],ha=ce.addLength1||!1,Ma=Je.length,ir=ce.objectId,xr=function(os){return os};if(x!==null&&ir===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");x!==null&&(xr=go.encryptor(ir,0));var Jr={};Mt===!0&&(Mt=["FlateEncode"]);var On=ce.additionalKeyValues||[],Fn=(Jr=Wn.API.processDataByFilters!==void 0?Wn.API.processDataByFilters(Je,Mt):{data:Je,reverseChain:[]}).reverseChain+(Array.isArray(Jt)?Jt.join(" "):Jt.toString());if(Jr.data.length!==0&&(On.push({key:"Length",value:Jr.data.length}),ha===!0&&On.push({key:"Length1",value:Ma})),Fn.length!=0)if(Fn.split("/").length-1==1)On.push({key:"Filter",value:Fn});else{On.push({key:"Filter",value:"["+Fn+"]"});for(var Ri=0;Ri<On.length;Ri+=1)if(On[Ri].key==="DecodeParms"){for(var zs=[],Ds=0;Ds<Jr.reverseChain.split("/").length-1;Ds+=1)zs.push("null");zs.push(On[Ri].value),On[Ri].value="["+zs.join(" ")+"]"}}wt("<<");for(var io=0;io<On.length;io++)wt("/"+On[io].key+" "+On[io].value);wt(">>"),Jr.data.length!==0&&(wt("stream"),wt(xr(Jr.data)),wt("endstream"))},Dr=F.__private__.putPage=function(ce){var Je=ce.number,Mt=ce.data,Jt=ce.objId,ha=ce.contentsObjId;Et(Jt,!0),wt("<</Type /Page"),wt("/Parent "+ce.rootDictionaryObjId+" 0 R"),wt("/Resources "+ce.resourceDictionaryObjId+" 0 R"),wt("/MediaBox ["+parseFloat(ge(ce.mediaBox.bottomLeftX))+" "+parseFloat(ge(ce.mediaBox.bottomLeftY))+" "+ge(ce.mediaBox.topRightX)+" "+ge(ce.mediaBox.topRightY)+"]"),ce.cropBox!==null&&wt("/CropBox ["+ge(ce.cropBox.bottomLeftX)+" "+ge(ce.cropBox.bottomLeftY)+" "+ge(ce.cropBox.topRightX)+" "+ge(ce.cropBox.topRightY)+"]"),ce.bleedBox!==null&&wt("/BleedBox ["+ge(ce.bleedBox.bottomLeftX)+" "+ge(ce.bleedBox.bottomLeftY)+" "+ge(ce.bleedBox.topRightX)+" "+ge(ce.bleedBox.topRightY)+"]"),ce.trimBox!==null&&wt("/TrimBox ["+ge(ce.trimBox.bottomLeftX)+" "+ge(ce.trimBox.bottomLeftY)+" "+ge(ce.trimBox.topRightX)+" "+ge(ce.trimBox.topRightY)+"]"),ce.artBox!==null&&wt("/ArtBox ["+ge(ce.artBox.bottomLeftX)+" "+ge(ce.artBox.bottomLeftY)+" "+ge(ce.artBox.topRightX)+" "+ge(ce.artBox.topRightY)+"]"),typeof ce.userUnit=="number"&&ce.userUnit!==1&&wt("/UserUnit "+ce.userUnit),Kr.publish("putPage",{objId:Jt,pageContext:pr[Je],pageNumber:Je,page:Mt}),wt("/Contents "+ha+" 0 R"),wt(">>"),wt("endobj");var Ma=Mt.join(`
`);return se===ee.ADVANCED&&(Ma+=`
Q`),Et(ha,!0),Cr({data:Ma,filters:Ga(),objectId:ha}),wt("endobj"),Jt},Mr=F.__private__.putPages=function(){var ce,Je,Mt=[];for(ce=1;ce<=ga;ce++)pr[ce].objId=Gt(),pr[ce].contentsObjId=Gt();for(ce=1;ce<=ga;ce++)Mt.push(Dr({number:ce,data:Vt[ce],objId:pr[ce].objId,contentsObjId:pr[ce].contentsObjId,mediaBox:pr[ce].mediaBox,cropBox:pr[ce].cropBox,bleedBox:pr[ce].bleedBox,trimBox:pr[ce].trimBox,artBox:pr[ce].artBox,userUnit:pr[ce].userUnit,rootDictionaryObjId:Yt,resourceDictionaryObjId:Kt}));Et(Yt,!0),wt("<</Type /Pages");var Jt="/Kids [";for(Je=0;Je<ga;Je++)Jt+=Mt[Je]+" 0 R ";wt(Jt+"]"),wt("/Count "+ga),wt(">>"),wt("endobj"),Kr.publish("postPutPages")},Hr=function(ce){Kr.publish("putFont",{font:ce,out:wt,newObject:bt,putStream:Cr}),ce.isAlreadyPutted!==!0&&(ce.objectNumber=bt(),wt("<<"),wt("/Type /Font"),wt("/BaseFont /"+Y0(ce.postScriptName)),wt("/Subtype /Type1"),typeof ce.encoding=="string"&&wt("/Encoding /"+ce.encoding),wt("/FirstChar 32"),wt("/LastChar 255"),wt(">>"),wt("endobj"))},Un=function(){for(var ce in Qr)Qr.hasOwnProperty(ce)&&(N===!1||N===!0&&L.hasOwnProperty(ce))&&Hr(Qr[ce])},ri=function(ce){ce.objectNumber=bt();var Je=[];Je.push({key:"Type",value:"/XObject"}),Je.push({key:"Subtype",value:"/Form"}),Je.push({key:"BBox",value:"["+[ge(ce.x),ge(ce.y),ge(ce.x+ce.width),ge(ce.y+ce.height)].join(" ")+"]"}),Je.push({key:"Matrix",value:"["+ce.matrix.toString()+"]"});var Mt=ce.pages[1].join(`
`);Cr({data:Mt,additionalKeyValues:Je,objectId:ce.objectNumber}),wt("endobj")},Yr=function(){for(var ce in Rn)Rn.hasOwnProperty(ce)&&ri(Rn[ce])},Cn=function(ce,Je){var Mt,Jt=[],ha=1/(Je-1);for(Mt=0;Mt<1;Mt+=ha)Jt.push(Mt);if(Jt.push(1),ce[0].offset!=0){var Ma={offset:0,color:ce[0].color};ce.unshift(Ma)}if(ce[ce.length-1].offset!=1){var ir={offset:1,color:ce[ce.length-1].color};ce.push(ir)}for(var xr="",Jr=0,On=0;On<Jt.length;On++){for(Mt=Jt[On];Mt>ce[Jr+1].offset;)Jr++;var Fn=ce[Jr].offset,Ri=(Mt-Fn)/(ce[Jr+1].offset-Fn),zs=ce[Jr].color,Ds=ce[Jr+1].color;xr+=Ge(Math.round((1-Ri)*zs[0]+Ri*Ds[0]).toString(16))+Ge(Math.round((1-Ri)*zs[1]+Ri*Ds[1]).toString(16))+Ge(Math.round((1-Ri)*zs[2]+Ri*Ds[2]).toString(16))}return xr.trim()},Xr=function(ce,Je){Je||(Je=21);var Mt=bt(),Jt=Cn(ce.colors,Je),ha=[];ha.push({key:"FunctionType",value:"0"}),ha.push({key:"Domain",value:"[0.0 1.0]"}),ha.push({key:"Size",value:"["+Je+"]"}),ha.push({key:"BitsPerSample",value:"8"}),ha.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ha.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Cr({data:Jt,additionalKeyValues:ha,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Mt}),wt("endobj"),ce.objectNumber=bt(),wt("<< /ShadingType "+ce.type),wt("/ColorSpace /DeviceRGB");var Ma="/Coords ["+ge(parseFloat(ce.coords[0]))+" "+ge(parseFloat(ce.coords[1]))+" ";ce.type===2?Ma+=ge(parseFloat(ce.coords[2]))+" "+ge(parseFloat(ce.coords[3])):Ma+=ge(parseFloat(ce.coords[2]))+" "+ge(parseFloat(ce.coords[3]))+" "+ge(parseFloat(ce.coords[4]))+" "+ge(parseFloat(ce.coords[5])),wt(Ma+="]"),ce.matrix&&wt("/Matrix ["+ce.matrix.toString()+"]"),wt("/Function "+Mt+" 0 R"),wt("/Extend [true true]"),wt(">>"),wt("endobj")},jn=function(ce,Je){var Mt=Gt(),Jt=bt();Je.push({resourcesOid:Mt,objectOid:Jt}),ce.objectNumber=Jt;var ha=[];ha.push({key:"Type",value:"/Pattern"}),ha.push({key:"PatternType",value:"1"}),ha.push({key:"PaintType",value:"1"}),ha.push({key:"TilingType",value:"1"}),ha.push({key:"BBox",value:"["+ce.boundingBox.map(ge).join(" ")+"]"}),ha.push({key:"XStep",value:ge(ce.xStep)}),ha.push({key:"YStep",value:ge(ce.yStep)}),ha.push({key:"Resources",value:Mt+" 0 R"}),ce.matrix&&ha.push({key:"Matrix",value:"["+ce.matrix.toString()+"]"}),Cr({data:ce.stream,additionalKeyValues:ha,objectId:ce.objectNumber}),wt("endobj")},ki=function(ce){var Je;for(Je in br)br.hasOwnProperty(Je)&&(br[Je]instanceof lv?Xr(br[Je]):br[Je]instanceof n_&&jn(br[Je],ce))},Xi=function(ce){for(var Je in ce.objectNumber=bt(),wt("<<"),ce)switch(Je){case"opacity":wt("/ca "+Ve(ce[Je]));break;case"stroke-opacity":wt("/CA "+Ve(ce[Je]))}wt(">>"),wt("endobj")},Ps=function(){var ce;for(ce in yi)yi.hasOwnProperty(ce)&&Xi(yi[ce])},Es=function(){for(var ce in wt("/XObject <<"),Rn)Rn.hasOwnProperty(ce)&&Rn[ce].objectNumber>=0&&wt("/"+ce+" "+Rn[ce].objectNumber+" 0 R");Kr.publish("putXobjectDict"),wt(">>")},Bo=function(){go.oid=bt(),wt("<<"),wt("/Filter /Standard"),wt("/V "+go.v),wt("/R "+go.r),wt("/U <"+go.toHexString(go.U)+">"),wt("/O <"+go.toHexString(go.O)+">"),wt("/P "+go.P),wt(">>"),wt("endobj")},Ns=function(){for(var ce in wt("/Font <<"),Qr)Qr.hasOwnProperty(ce)&&(N===!1||N===!0&&L.hasOwnProperty(ce))&&wt("/"+ce+" "+Qr[ce].objectNumber+" 0 R");wt(">>")},$s=function(){if(Object.keys(br).length>0){for(var ce in wt("/Shading <<"),br)br.hasOwnProperty(ce)&&br[ce]instanceof lv&&br[ce].objectNumber>=0&&wt("/"+ce+" "+br[ce].objectNumber+" 0 R");Kr.publish("putShadingPatternDict"),wt(">>")}},pc=function(ce){if(Object.keys(br).length>0){for(var Je in wt("/Pattern <<"),br)br.hasOwnProperty(Je)&&br[Je]instanceof F.TilingPattern&&br[Je].objectNumber>=0&&br[Je].objectNumber<ce&&wt("/"+Je+" "+br[Je].objectNumber+" 0 R");Kr.publish("putTilingPatternDict"),wt(">>")}},tl=function(){if(Object.keys(yi).length>0){var ce;for(ce in wt("/ExtGState <<"),yi)yi.hasOwnProperty(ce)&&yi[ce].objectNumber>=0&&wt("/"+ce+" "+yi[ce].objectNumber+" 0 R");Kr.publish("putGStateDict"),wt(">>")}},Ui=function(ce){Et(ce.resourcesOid,!0),wt("<<"),wt("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ns(),$s(),pc(ce.objectOid),tl(),Es(),wt(">>"),wt("endobj")},Xl=function(){var ce=[];Un(),Ps(),Yr(),ki(ce),Kr.publish("putResources"),ce.forEach(Ui),Ui({resourcesOid:Kt,objectOid:Number.MAX_SAFE_INTEGER}),Kr.publish("postPutResources")},jo=function(){Kr.publish("putAdditionalObjects");for(var ce=0;ce<ve.length;ce++){var Je=ve[ce];Et(Je.objId,!0),wt(Je.content),wt("endobj")}Kr.publish("postPutAdditionalObjects")},Pd=function(ce){cn[ce.fontName]=cn[ce.fontName]||{},cn[ce.fontName][ce.fontStyle]=ce.id},kc=function(ce,Je,Mt,Jt,ha){var Ma={id:"F"+(Object.keys(Qr).length+1).toString(10),postScriptName:ce,fontName:Je,fontStyle:Mt,encoding:Jt,isStandardFont:ha||!1,metadata:{}};return Kr.publish("addFont",{font:Ma,instance:this}),Qr[Ma.id]=Ma,Pd(Ma),Ma.id},fh=function(ce){for(var Je=0,Mt=Pa.length;Je<Mt;Je++){var Jt=kc.call(this,ce[Je][0],ce[Je][1],ce[Je][2],Pa[Je][3],!0);N===!1&&(L[Jt]=!0);var ha=ce[Je][0].split("-");Pd({id:Jt,fontName:ha[0],fontStyle:ha[1]||""})}Kr.publish("addFonts",{fonts:Qr,dictionary:cn})},wu=function(ce){return ce.foo=function(){try{return ce.apply(this,arguments)}catch(Jt){var Je=Jt.stack||"";~Je.indexOf(" at ")&&(Je=Je.split(" at ")[1]);var Mt="Error in function "+Je.split(`
`)[0].split("<")[0]+": "+Jt.message;if(!Qn.console)throw new Error(Mt);Qn.console.error(Mt,Jt),Qn.alert&&alert(Mt)}},ce.foo.bar=ce,ce.foo},Uc=function(ce,Je){var Mt,Jt,ha,Ma,ir,xr,Jr,On,Fn;if(ha=(Je=Je||{}).sourceEncoding||"Unicode",ir=Je.outputEncoding,(Je.autoencode||ir)&&Qr[$a].metadata&&Qr[$a].metadata[ha]&&Qr[$a].metadata[ha].encoding&&(Ma=Qr[$a].metadata[ha].encoding,!ir&&Qr[$a].encoding&&(ir=Qr[$a].encoding),!ir&&Ma.codePages&&(ir=Ma.codePages[0]),typeof ir=="string"&&(ir=Ma[ir]),ir)){for(Jr=!1,xr=[],Mt=0,Jt=ce.length;Mt<Jt;Mt++)(On=ir[ce.charCodeAt(Mt)])?xr.push(String.fromCharCode(On)):xr.push(ce[Mt]),xr[Mt].charCodeAt(0)>>8&&(Jr=!0);ce=xr.join("")}for(Mt=ce.length;Jr===void 0&&Mt!==0;)ce.charCodeAt(Mt-1)>>8&&(Jr=!0),Mt--;if(!Jr)return ce;for(xr=Je.noBOM?[]:[254,255],Mt=0,Jt=ce.length;Mt<Jt;Mt++){if((Fn=(On=ce.charCodeAt(Mt))>>8)>>8)throw new Error("Character at position "+Mt+" of string '"+ce+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");xr.push(Fn),xr.push(On-(Fn<<8))}return String.fromCharCode.apply(void 0,xr)},Al=F.__private__.pdfEscape=F.pdfEscape=function(ce,Je){return Uc(ce,Je).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},no=F.__private__.beginPage=function(ce){Vt[++ga]=[],pr[ga]={objId:0,contentsObjId:0,userUnit:Number(n),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(ce[0]),topRightY:Number(ce[1])}},Ru(ga),$t(Vt[Te])},Go=function(ce,Je){var Mt,Jt,ha;switch(a=Je||a,typeof ce=="string"&&(Mt=W(ce.toLowerCase()),Array.isArray(Mt)&&(Jt=Mt[0],ha=Mt[1])),Array.isArray(ce)&&(Jt=ce[0]*la,ha=ce[1]*la),isNaN(Jt)&&(Jt=i[0],ha=i[1]),(Jt>14400||ha>14400)&&(fo.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Jt=Math.min(14400,Jt),ha=Math.min(14400,ha)),i=[Jt,ha],a.substr(0,1)){case"l":ha>Jt&&(i=[ha,Jt]);break;case"p":Jt>ha&&(i=[ha,Jt])}no(i),Od(Di),wt(zl),Bh!==0&&wt(Bh+" J"),$o!==0&&wt($o+" j"),Kr.publish("addPage",{pageNumber:ga})},Jl=function(ce){ce>0&&ce<=ga&&(Vt.splice(ce,1),pr.splice(ce,1),ga--,Te>ga&&(Te=ga),this.setPage(Te))},Ru=function(ce){ce>0&&ce<=ga&&(Te=ce)},mo=F.__private__.getNumberOfPages=F.getNumberOfPages=function(){return Vt.length-1},Zo=function(ce,Je,Mt){var Jt,ha=void 0;return Mt=Mt||{},ce=ce!==void 0?ce:Qr[$a].fontName,Je=Je!==void 0?Je:Qr[$a].fontStyle,Jt=ce.toLowerCase(),cn[Jt]!==void 0&&cn[Jt][Je]!==void 0?ha=cn[Jt][Je]:cn[ce]!==void 0&&cn[ce][Je]!==void 0?ha=cn[ce][Je]:Mt.disableWarning===!1&&fo.warn("Unable to look up font label for font '"+ce+"', '"+Je+"'. Refer to getFontList() for available fonts."),ha||Mt.noFallback||(ha=cn.times[Je])==null&&(ha=cn.times.normal),ha},Ed=F.__private__.putInfo=function(){var ce=bt(),Je=function(Jt){return Jt};for(var Mt in x!==null&&(Je=go.encryptor(ce,0)),wt("<<"),wt("/Producer ("+Al(Je("jsPDF "+Wn.version))+")"),va)va.hasOwnProperty(Mt)&&va[Mt]&&wt("/"+Mt.substr(0,1).toUpperCase()+Mt.substr(1)+" ("+Al(Je(va[Mt]))+")");wt("/CreationDate ("+Al(Je(ze))+")"),wt(">>"),wt("endobj")},Ku=F.__private__.putCatalog=function(ce){var Je=(ce=ce||{}).rootDictionaryObjId||Yt;switch(bt(),wt("<<"),wt("/Type /Catalog"),wt("/Pages "+Je+" 0 R"),or||(or="fullwidth"),or){case"fullwidth":wt("/OpenAction [3 0 R /FitH null]");break;case"fullheight":wt("/OpenAction [3 0 R /FitV null]");break;case"fullpage":wt("/OpenAction [3 0 R /Fit]");break;case"original":wt("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Mt=""+or;Mt.substr(Mt.length-1)==="%"&&(or=parseInt(or)/100),typeof or=="number"&&wt("/OpenAction [3 0 R /XYZ null null "+Ve(or)+"]")}switch(nn||(nn="continuous"),nn){case"continuous":wt("/PageLayout /OneColumn");break;case"single":wt("/PageLayout /SinglePage");break;case"two":case"twoleft":wt("/PageLayout /TwoColumnLeft");break;case"tworight":wt("/PageLayout /TwoColumnRight")}ka&&wt("/PageMode /"+ka),Kr.publish("putCatalog"),wt(">>"),wt("endobj")},Rf=F.__private__.putTrailer=function(){wt("trailer"),wt("<<"),wt("/Size "+(at+1)),wt("/Root "+at+" 0 R"),wt("/Info "+(at-1)+" 0 R"),x!==null&&wt("/Encrypt "+go.oid+" 0 R"),wt("/ID [ <"+Se+"> <"+Se+"> ]"),wt(">>")},Ql=F.__private__.putHeader=function(){wt("%PDF-"+j),wt("%ºß¬à")},qo=F.__private__.putXRef=function(){var ce="0000000000";wt("xref"),wt("0 "+(at+1)),wt("0000000000 65535 f ");for(var Je=1;Je<=at;Je++)typeof rt[Je]=="function"?wt((ce+rt[Je]()).slice(-10)+" 00000 n "):rt[Je]!==void 0?wt((ce+rt[Je]).slice(-10)+" 00000 n "):wt("0000000000 00000 n ")},Wu=F.__private__.buildDocument=function(){It(),$t(lt),Kr.publish("buildDocument"),Ql(),Mr(),jo(),Xl(),x!==null&&Bo(),Ed(),Ku();var ce=ot;return qo(),Rf(),wt("startxref"),wt(""+ce),wt("%%EOF"),$t(Vt[Te]),lt.join(`
`)},ph=F.__private__.getBlob=function(ce){return new Blob([ba(ce)],{type:"application/pdf"})},al=F.output=F.__private__.output=wu(function(ce,Je){switch(typeof(Je=Je||{})=="string"?Je={filename:Je}:Je.filename=Je.filename||"generated.pdf",ce){case void 0:return Wu();case"save":F.save(Je.filename);break;case"arraybuffer":return ba(Wu());case"blob":return ph(Wu());case"bloburi":case"bloburl":if(Qn.URL!==void 0&&typeof Qn.URL.createObjectURL=="function")return Qn.URL&&Qn.URL.createObjectURL(ph(Wu()))||void 0;fo.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Mt="",Jt=Wu();try{Mt=XI(Jt)}catch{Mt=XI(unescape(encodeURIComponent(Jt)))}return"data:application/pdf;filename="+Je.filename+";base64,"+Mt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Qn)==="[object Window]"){var ha="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ma=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Je.pdfObjectUrl&&(ha=Je.pdfObjectUrl,Ma="");var ir='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ha+'"'+Ma+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Je)+");<\/script></body></html>",xr=Qn.open();return xr!==null&&xr.document.write(ir),xr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Qn)==="[object Window]"){var Jr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Je.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Je.filename+'" width="500px" height="400px" /></body></html>',On=Qn.open();if(On!==null){On.document.write(Jr);var Fn=this;On.document.documentElement.querySelector("#pdfViewer").onload=function(){On.document.title=Je.filename,On.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Fn.output("bloburl"))}}return On}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Qn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ri='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Je)+'"></iframe></body></html>',zs=Qn.open();if(zs!==null&&(zs.document.write(Ri),zs.document.title=Je.filename),zs||typeof safari>"u")return zs;break;case"datauri":case"dataurl":return Qn.document.location.href=this.output("datauristring",Je);default:return null}}),zn=function(ce){return Array.isArray(ti)===!0&&ti.indexOf(ce)>-1};switch(r){case"pt":la=1;break;case"mm":la=72/25.4;break;case"cm":la=72/2.54;break;case"in":la=72;break;case"px":la=zn("px_scaling")==1?.75:96/72;break;case"pc":case"em":la=12;break;case"ex":la=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);la=r}var go=null;qe(),Ue();var gr=function(ce){return x!==null?go.encryptor(ce,0):function(Je){return Je}},Bc=F.__private__.getPageInfo=F.getPageInfo=function(ce){if(isNaN(ce)||ce%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:pr[ce].objId,pageNumber:ce,pageContext:pr[ce]}},Sn=F.__private__.getPageInfoByObjId=function(ce){if(isNaN(ce)||ce%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Je in pr)if(pr[Je].objId===ce)break;return Bc(Je)},mh=F.__private__.getCurrentPageInfo=F.getCurrentPageInfo=function(){return{objId:pr[Te].objId,pageNumber:Te,pageContext:pr[Te]}};F.addPage=function(){return Go.apply(this,arguments),this},F.setPage=function(){return Ru.apply(this,arguments),$t.call(this,Vt[Te]),this},F.insertPage=function(ce){return this.addPage(),this.movePage(Te,ce),this},F.movePage=function(ce,Je){var Mt,Jt;if(ce>Je){Mt=Vt[ce],Jt=pr[ce];for(var ha=ce;ha>Je;ha--)Vt[ha]=Vt[ha-1],pr[ha]=pr[ha-1];Vt[Je]=Mt,pr[Je]=Jt,this.setPage(Je)}else if(ce<Je){Mt=Vt[ce],Jt=pr[ce];for(var Ma=ce;Ma<Je;Ma++)Vt[Ma]=Vt[Ma+1],pr[Ma]=pr[Ma+1];Vt[Je]=Mt,pr[Je]=Jt,this.setPage(Je)}return this},F.deletePage=function(){return Jl.apply(this,arguments),this},F.__private__.text=F.text=function(ce,Je,Mt,Jt,ha){var Ma,ir,xr,Jr,On,Fn,Ri,zs,Ds,io=(Jt=Jt||{}).scope||this;if(typeof ce=="number"&&typeof Je=="number"&&(typeof Mt=="string"||Array.isArray(Mt))){var os=Mt;Mt=Je,Je=ce,ce=os}if(arguments[3]instanceof Ie?(Re("The transform parameter of text() with a Matrix value"),Ds=ha):(xr=arguments[4],Jr=arguments[5],qs(Ri=arguments[3])==="object"&&Ri!==null||(typeof xr=="string"&&(Jr=xr,xr=null),typeof Ri=="string"&&(Jr=Ri,Ri=null),typeof Ri=="number"&&(xr=Ri,Ri=null),Jt={flags:Ri,angle:xr,align:Jr})),isNaN(Je)||isNaN(Mt)||ce==null)throw new Error("Invalid arguments passed to jsPDF.text");if(ce.length===0)return io;var Vr="",ur=!1,vl=typeof Jt.lineHeightFactor=="number"?Jt.lineHeightFactor:Ki,Pr=io.internal.scaleFactor;function bu(ai){return ai=ai.split("	").join(Array(Jt.TabLen||9).join(" ")),Al(ai,Ri)}function ru(ai){for(var li,es=ai.concat(),fs=[],su=es.length;su--;)typeof(li=es.shift())=="string"?fs.push(li):Array.isArray(ai)&&(li.length===1||li[1]===void 0&&li[2]===void 0)?fs.push(li[0]):fs.push([li[0],li[1],li[2]]);return fs}function Sr(ai,li){var es;if(typeof ai=="string")es=li(ai)[0];else if(Array.isArray(ai)){for(var fs,su,$c=ai.concat(),il=[],ou=$c.length;ou--;)typeof(fs=$c.shift())=="string"?il.push(li(fs)[0]):Array.isArray(fs)&&typeof fs[0]=="string"&&(su=li(fs[0],fs[1],fs[2]),il.push([su[0],su[1],su[2]]));es=il}return es}var yh=!1,nu=!0;if(typeof ce=="string")yh=!0;else if(Array.isArray(ce)){var vc=ce.concat();ir=[];for(var Dd,Ms=vc.length;Ms--;)(typeof(Dd=vc.shift())!="string"||Array.isArray(Dd)&&typeof Dd[0]!="string")&&(nu=!1);yh=nu}if(yh===!1)throw new Error('Type of text must be string or Array. "'+ce+'" is not recognized.');typeof ce=="string"&&(ce=ce.match(/[\r?\n]/)?ce.split(/\r\n|\r|\n/g):[ce]);var bi=Ja/io.internal.scaleFactor,_c=bi*(vl-1);switch(Jt.baseline){case"bottom":Mt-=_c;break;case"top":Mt+=bi-_c;break;case"hanging":Mt+=bi-2*_c;break;case"middle":Mt+=bi/2-_c}if((Fn=Jt.maxWidth||0)>0&&(typeof ce=="string"?ce=io.splitTextToSize(ce,Fn):Object.prototype.toString.call(ce)==="[object Array]"&&(ce=ce.reduce(function(ai,li){return ai.concat(io.splitTextToSize(li,Fn))},[]))),Ma={text:ce,x:Je,y:Mt,options:Jt,mutex:{pdfEscape:Al,activeFontKey:$a,fonts:Qr,activeFontSize:Ja}},Kr.publish("preProcessText",Ma),ce=Ma.text,xr=(Jt=Ma.options).angle,!(Ds instanceof Ie)&&xr&&typeof xr=="number"){xr*=Math.PI/180,Jt.rotationDirection===0&&(xr=-xr),se===ee.ADVANCED&&(xr=-xr);var za=Math.cos(xr),Md=Math.sin(xr);Ds=new Ie(za,Md,-Md,za,0,0)}else xr&&xr instanceof Ie&&(Ds=xr);se!==ee.ADVANCED||Ds||(Ds=yt),(On=Jt.charSpace||eu)!==void 0&&(Vr+=ge(_e(On))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(zs=Jt.horizontalScale)!==void 0&&(Vr+=ge(100*zs)+` Tz
`),Jt.lang;var Js=-1,Ao=Jt.renderingMode!==void 0?Jt.renderingMode:Jt.stroke,Sf=io.internal.getCurrentPageInfo().pageContext;switch(Ao){case 0:case!1:case"fill":Js=0;break;case 1:case!0:case"stroke":Js=1;break;case 2:case"fillThenStroke":Js=2;break;case 3:case"invisible":Js=3;break;case 4:case"fillAndAddForClipping":Js=4;break;case 5:case"strokeAndAddPathForClipping":Js=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Js=6;break;case 7:case"addToPathForClipping":Js=7}var jh=Sf.usedRenderingMode!==void 0?Sf.usedRenderingMode:-1;Js!==-1?Vr+=Js+` Tr
`:jh!==-1&&(Vr+=`0 Tr
`),Js!==-1&&(Sf.usedRenderingMode=Js),Jr=Jt.align||"left";var vo,js=Ja*vl,Dl=io.internal.pageSize.getWidth(),jc=Qr[$a];On=Jt.charSpace||eu,Fn=Jt.maxWidth||0,Ri=Object.assign({autoencode:!0,noBOM:!0},Jt.flags);var iu=[],Ah=function(ai){return io.getStringUnitWidth(ai,{font:jc,charSpace:On,fontSize:Ja,doKerning:!1})*Ja/Pr};if(Object.prototype.toString.call(ce)==="[object Array]"){var Ml;ir=ru(ce),Jr!=="left"&&(vo=ir.map(Ah));var No,Id=0;if(Jr==="right"){Je-=vo[0],ce=[],Ms=ir.length;for(var Gc=0;Gc<Ms;Gc++)Gc===0?(No=rl(Je),Ml=ys(Mt)):(No=_e(Id-vo[Gc]),Ml=-js),ce.push([ir[Gc],No,Ml]),Id=vo[Gc]}else if(Jr==="center"){Je-=vo[0]/2,ce=[],Ms=ir.length;for(var Il=0;Il<Ms;Il++)Il===0?(No=rl(Je),Ml=ys(Mt)):(No=_e((Id-vo[Il])/2),Ml=-js),ce.push([ir[Il],No,Ml]),Id=vo[Il]}else if(Jr==="left"){ce=[],Ms=ir.length;for(var wc=0;wc<Ms;wc++)ce.push(ir[wc])}else if(Jr==="justify"&&jc.encoding==="Identity-H"){ce=[],Ms=ir.length,Fn=Fn!==0?Fn:Dl;for(var xu=0,Qi=0;Qi<Ms;Qi++)if(Ml=Qi===0?ys(Mt):-js,No=Qi===0?rl(Je):xu,Qi<Ms-1){var bf=_e((Fn-vo[Qi])/(ir[Qi].split(" ").length-1)),so=ir[Qi].split(" ");ce.push([so[0]+" ",No,Ml]),xu=0;for(var _o=1;_o<so.length;_o++){var Ld=(Ah(so[_o-1]+" "+so[_o])-Ah(so[_o]))*Pr+bf;_o==so.length-1?ce.push([so[_o],Ld,0]):ce.push([so[_o]+" ",Ld,0]),xu-=Ld}}else ce.push([ir[Qi],No,Ml]);ce.push(["",xu,0])}else{if(Jr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(ce=[],Ms=ir.length,Fn=Fn!==0?Fn:Dl,Qi=0;Qi<Ms;Qi++)Ml=Qi===0?ys(Mt):-js,No=Qi===0?rl(Je):0,Qi<Ms-1?iu.push(ge(_e((Fn-vo[Qi])/(ir[Qi].split(" ").length-1)))):iu.push(0),ce.push([ir[Qi],No,Ml])}}var Fd=typeof Jt.R2L=="boolean"?Jt.R2L:Tr;Fd===!0&&(ce=Sr(ce,function(ai,li,es){return[ai.split("").reverse().join(""),li,es]})),Ma={text:ce,x:Je,y:Mt,options:Jt,mutex:{pdfEscape:Al,activeFontKey:$a,fonts:Qr,activeFontSize:Ja}},Kr.publish("postProcessText",Ma),ce=Ma.text,ur=Ma.mutex.isHex||!1;var oo=Qr[$a].encoding;oo!=="WinAnsiEncoding"&&oo!=="StandardEncoding"||(ce=Sr(ce,function(ai,li,es){return[bu(ai),li,es]})),ir=ru(ce),ce=[];for(var Zc,Rc,Pu,qc=0,Eu=1,Hc=Array.isArray(ir[0])?Eu:qc,Tc="",Xu=function(ai,li,es){var fs="";return es instanceof Ie?(es=typeof Jt.angle=="number"?He(es,new Ie(1,0,0,1,ai,li)):He(new Ie(1,0,0,1,ai,li),es),se===ee.ADVANCED&&(es=He(new Ie(1,0,0,-1,0,0),es)),fs=es.join(" ")+` Tm
`):fs=ge(ai)+" "+ge(li)+` Td
`,fs},Ko=0;Ko<ir.length;Ko++){switch(Tc="",Hc){case Eu:Pu=(ur?"<":"(")+ir[Ko][0]+(ur?">":")"),Zc=parseFloat(ir[Ko][1]),Rc=parseFloat(ir[Ko][2]);break;case qc:Pu=(ur?"<":"(")+ir[Ko]+(ur?">":")"),Zc=rl(Je),Rc=ys(Mt)}iu!==void 0&&iu[Ko]!==void 0&&(Tc=iu[Ko]+` Tw
`),Ko===0?ce.push(Tc+Xu(Zc,Rc,Ds)+Pu):Hc===qc?ce.push(Tc+Pu):Hc===Eu&&ce.push(Tc+Xu(Zc,Rc,Ds)+Pu)}ce=Hc===qc?ce.join(` Tj
T* `):ce.join(` Tj
`),ce+=` Tj
`;var As=`BT
/`;return As+=$a+" "+Ja+` Tf
`,As+=ge(Ja*vl)+` TL
`,As+=Ji+`
`,As+=Vr,As+=ce,wt(As+="ET"),L[$a]=!0,io};var Nn=F.__private__.clip=F.clip=function(ce){return wt(ce==="evenodd"?"W*":"W"),this};F.clipEvenOdd=function(){return Nn("evenodd")},F.__private__.discardPath=F.discardPath=function(){return wt("n"),this};var Ks=F.__private__.isValidStyle=function(ce){var Je=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(ce)!==-1&&(Je=!0),Je};F.__private__.setDefaultPathOperation=F.setDefaultPathOperation=function(ce){return Ks(ce)&&(R=ce),this};var mc=F.__private__.getStyle=F.getStyle=function(ce){var Je=R;switch(ce){case"D":case"S":Je="S";break;case"F":Je="f";break;case"FD":case"DF":Je="B";break;case"f":case"f*":case"B":case"B*":Je=ce}return Je},gc=F.close=function(){return wt("h"),this};F.stroke=function(){return wt("S"),this},F.fill=function(ce){return tr("f",ce),this},F.fillEvenOdd=function(ce){return tr("f*",ce),this},F.fillStroke=function(ce){return tr("B",ce),this},F.fillStrokeEvenOdd=function(ce){return tr("B*",ce),this};var tr=function(ce,Je){qs(Je)==="object"?Ws(Je,ce):wt(ce)},dn=function(ce){ce===null||se===ee.ADVANCED&&ce===void 0||(ce=mc(ce),wt(ce))};function bn(ce,Je,Mt,Jt,ha){var Ma=new n_(Je||this.boundingBox,Mt||this.xStep,Jt||this.yStep,this.gState,ha||this.matrix);Ma.stream=this.stream;var ir=ce+"$$"+this.cloneIndex+++"$$";return At(ir,Ma),Ma}var Ws=function(ce,Je){var Mt=Fi[ce.key],Jt=br[Mt];if(Jt instanceof lv)wt("q"),wt(Nd(Je)),Jt.gState&&F.setGState(Jt.gState),wt(ce.matrix.toString()+" cm"),wt("/"+Mt+" sh"),wt("Q");else if(Jt instanceof n_){var ha=new Ie(1,0,0,-1,0,au());ce.matrix&&(ha=ha.multiply(ce.matrix||yt),Mt=bn.call(Jt,ce.key,ce.boundingBox,ce.xStep,ce.yStep,ha).id),wt("q"),wt("/Pattern cs"),wt("/"+Mt+" scn"),Jt.gState&&F.setGState(Jt.gState),wt(Je),wt("Q")}},Nd=function(ce){switch(ce){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},yn=F.moveTo=function(ce,Je){return wt(ge(_e(ce))+" "+ge(Ee(Je))+" m"),this},Ho=F.lineTo=function(ce,Je){return wt(ge(_e(ce))+" "+ge(Ee(Je))+" l"),this},Tu=F.curveTo=function(ce,Je,Mt,Jt,ha,Ma){return wt([ge(_e(ce)),ge(Ee(Je)),ge(_e(Mt)),ge(Ee(Jt)),ge(_e(ha)),ge(Ee(Ma)),"c"].join(" ")),this};F.__private__.line=F.line=function(ce,Je,Mt,Jt,ha){if(isNaN(ce)||isNaN(Je)||isNaN(Mt)||isNaN(Jt)||!Ks(ha))throw new Error("Invalid arguments passed to jsPDF.line");return se===ee.COMPAT?this.lines([[Mt-ce,Jt-Je]],ce,Je,[1,1],ha||"S"):this.lines([[Mt-ce,Jt-Je]],ce,Je,[1,1]).stroke()},F.__private__.lines=F.lines=function(ce,Je,Mt,Jt,ha,Ma){var ir,xr,Jr,On,Fn,Ri,zs,Ds,io,os,Vr,ur;if(typeof ce=="number"&&(ur=Mt,Mt=Je,Je=ce,ce=ur),Jt=Jt||[1,1],Ma=Ma||!1,isNaN(Je)||isNaN(Mt)||!Array.isArray(ce)||!Array.isArray(Jt)||!Ks(ha)||typeof Ma!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(yn(Je,Mt),ir=Jt[0],xr=Jt[1],On=ce.length,os=Je,Vr=Mt,Jr=0;Jr<On;Jr++)(Fn=ce[Jr]).length===2?(os=Fn[0]*ir+os,Vr=Fn[1]*xr+Vr,Ho(os,Vr)):(Ri=Fn[0]*ir+os,zs=Fn[1]*xr+Vr,Ds=Fn[2]*ir+os,io=Fn[3]*xr+Vr,os=Fn[4]*ir+os,Vr=Fn[5]*xr+Vr,Tu(Ri,zs,Ds,io,os,Vr));return Ma&&gc(),dn(ha),this},F.path=function(ce){for(var Je=0;Je<ce.length;Je++){var Mt=ce[Je],Jt=Mt.c;switch(Mt.op){case"m":yn(Jt[0],Jt[1]);break;case"l":Ho(Jt[0],Jt[1]);break;case"c":Tu.apply(this,Jt);break;case"h":gc()}}return this},F.__private__.rect=F.rect=function(ce,Je,Mt,Jt,ha){if(isNaN(ce)||isNaN(Je)||isNaN(Mt)||isNaN(Jt)||!Ks(ha))throw new Error("Invalid arguments passed to jsPDF.rect");return se===ee.COMPAT&&(Jt=-Jt),wt([ge(_e(ce)),ge(Ee(Je)),ge(_e(Mt)),ge(_e(Jt)),"re"].join(" ")),dn(ha),this},F.__private__.triangle=F.triangle=function(ce,Je,Mt,Jt,ha,Ma,ir){if(isNaN(ce)||isNaN(Je)||isNaN(Mt)||isNaN(Jt)||isNaN(ha)||isNaN(Ma)||!Ks(ir))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Mt-ce,Jt-Je],[ha-Mt,Ma-Jt],[ce-ha,Je-Ma]],ce,Je,[1,1],ir,!0),this},F.__private__.roundedRect=F.roundedRect=function(ce,Je,Mt,Jt,ha,Ma,ir){if(isNaN(ce)||isNaN(Je)||isNaN(Mt)||isNaN(Jt)||isNaN(ha)||isNaN(Ma)||!Ks(ir))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var xr=4/3*(Math.SQRT2-1);return ha=Math.min(ha,.5*Mt),Ma=Math.min(Ma,.5*Jt),this.lines([[Mt-2*ha,0],[ha*xr,0,ha,Ma-Ma*xr,ha,Ma],[0,Jt-2*Ma],[0,Ma*xr,-ha*xr,Ma,-ha,Ma],[2*ha-Mt,0],[-ha*xr,0,-ha,-Ma*xr,-ha,-Ma],[0,2*Ma-Jt],[0,-Ma*xr,ha*xr,-Ma,ha,-Ma]],ce+ha,Je,[1,1],ir,!0),this},F.__private__.ellipse=F.ellipse=function(ce,Je,Mt,Jt,ha){if(isNaN(ce)||isNaN(Je)||isNaN(Mt)||isNaN(Jt)||!Ks(ha))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ma=4/3*(Math.SQRT2-1)*Mt,ir=4/3*(Math.SQRT2-1)*Jt;return yn(ce+Mt,Je),Tu(ce+Mt,Je-ir,ce+Ma,Je-Jt,ce,Je-Jt),Tu(ce-Ma,Je-Jt,ce-Mt,Je-ir,ce-Mt,Je),Tu(ce-Mt,Je+ir,ce-Ma,Je+Jt,ce,Je+Jt),Tu(ce+Ma,Je+Jt,ce+Mt,Je+ir,ce+Mt,Je),dn(ha),this},F.__private__.circle=F.circle=function(ce,Je,Mt,Jt){if(isNaN(ce)||isNaN(Je)||isNaN(Mt)||!Ks(Jt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(ce,Je,Mt,Mt,Jt)},F.setFont=function(ce,Je,Mt){return Mt&&(Je=me(Je,Mt)),$a=Zo(ce,Je,{disableWarning:!1}),this};var Os=F.__private__.getFont=F.getFont=function(){return Qr[Zo.apply(F,arguments)]};F.__private__.getFontList=F.getFontList=function(){var ce,Je,Mt={};for(ce in cn)if(cn.hasOwnProperty(ce))for(Je in Mt[ce]=[],cn[ce])cn[ce].hasOwnProperty(Je)&&Mt[ce].push(Je);return Mt},F.addFont=function(ce,Je,Mt,Jt,ha){var Ma=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ma.indexOf(arguments[3])!==-1?ha=arguments[3]:arguments[3]&&Ma.indexOf(arguments[3])==-1&&(Mt=me(Mt,Jt)),ha=ha||"Identity-H",kc.call(this,ce,Je,Mt,ha)};var Ki,Di=t.lineWidth||.200025,yo=F.__private__.getLineWidth=F.getLineWidth=function(){return Di},Od=F.__private__.setLineWidth=F.setLineWidth=function(ce){return Di=ce,wt(ge(_e(ce))+" w"),this};F.__private__.setLineDash=Wn.API.setLineDash=Wn.API.setLineDashPattern=function(ce,Je){if(ce=ce||[],Je=Je||0,isNaN(Je)||!Array.isArray(ce))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return ce=ce.map(function(Mt){return ge(_e(Mt))}).join(" "),Je=ge(_e(Je)),wt("["+ce+"] "+Je+" d"),this};var gh=F.__private__.getLineHeight=F.getLineHeight=function(){return Ja*Ki};F.__private__.getLineHeight=F.getLineHeight=function(){return Ja*Ki};var yc=F.__private__.setLineHeightFactor=F.setLineHeightFactor=function(ce){return typeof(ce=ce||1.15)=="number"&&(Ki=ce),this},Ac=F.__private__.getLineHeightFactor=F.getLineHeightFactor=function(){return Ki};yc(t.lineHeight);var rl=F.__private__.getHorizontalCoordinate=function(ce){return _e(ce)},ys=F.__private__.getVerticalCoordinate=function(ce){return se===ee.ADVANCED?ce:pr[Te].mediaBox.topRightY-pr[Te].mediaBox.bottomLeftY-_e(ce)},Yu=F.__private__.getHorizontalCoordinateString=F.getHorizontalCoordinateString=function(ce){return ge(rl(ce))},Vs=F.__private__.getVerticalCoordinateString=F.getVerticalCoordinateString=function(ce){return ge(ys(ce))},zl=t.strokeColor||"0 G";F.__private__.getStrokeColor=F.getDrawColor=function(){return Ca(zl)},F.__private__.setStrokeColor=F.setDrawColor=function(ce,Je,Mt,Jt){return zl=Ia({ch1:ce,ch2:Je,ch3:Mt,ch4:Jt,pdfColorType:"draw",precision:2}),wt(zl),this};var nl=t.fillColor||"0 g";F.__private__.getFillColor=F.getFillColor=function(){return Ca(nl)},F.__private__.setFillColor=F.setFillColor=function(ce,Je,Mt,Jt){return nl=Ia({ch1:ce,ch2:Je,ch3:Mt,ch4:Jt,pdfColorType:"fill",precision:2}),wt(nl),this};var Ji=t.textColor||"0 g",Ys=F.__private__.getTextColor=F.getTextColor=function(){return Ca(Ji)};F.__private__.setTextColor=F.setTextColor=function(ce,Je,Mt,Jt){return Ji=Ia({ch1:ce,ch2:Je,ch3:Mt,ch4:Jt,pdfColorType:"text",precision:3}),this};var eu=t.charSpace,hs=F.__private__.getCharSpace=F.getCharSpace=function(){return parseFloat(eu||0)};F.__private__.setCharSpace=F.setCharSpace=function(ce){if(isNaN(ce))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return eu=ce,this};var Bh=0;F.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},F.__private__.setLineCap=F.setLineCap=function(ce){var Je=F.CapJoinStyles[ce];if(Je===void 0)throw new Error("Line cap style of '"+ce+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Bh=Je,wt(Je+" J"),this};var $o=0;F.__private__.setLineJoin=F.setLineJoin=function(ce){var Je=F.CapJoinStyles[ce];if(Je===void 0)throw new Error("Line join style of '"+ce+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $o=Je,wt(Je+" j"),this},F.__private__.setLineMiterLimit=F.__private__.setMiterLimit=F.setLineMiterLimit=F.setMiterLimit=function(ce){if(ce=ce||0,isNaN(ce))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return wt(ge(_e(ce))+" M"),this},F.GState=f2,F.setGState=function(ce){(ce=typeof ce=="string"?yi[oi[ce]]:Vd(null,ce)).equals(Cs)||(wt("/"+ce.id+" gs"),Cs=ce)};var Vd=function(ce,Je){if(!ce||!oi[ce]){var Mt=!1;for(var Jt in yi)if(yi.hasOwnProperty(Jt)&&yi[Jt].equals(Je)){Mt=!0;break}if(Mt)Je=yi[Jt];else{var ha="GS"+(Object.keys(yi).length+1).toString(10);yi[ha]=Je,Je.id=ha}return ce&&(oi[ce]=Je.id),Kr.publish("addGState",Je),Je}};F.addGState=function(ce,Je){return Vd(ce,Je),this},F.saveGraphicsState=function(){return wt("q"),$r.push({key:$a,size:Ja,color:Ji}),this},F.restoreGraphicsState=function(){wt("Q");var ce=$r.pop();return $a=ce.key,Ja=ce.size,Ji=ce.color,Cs=null,this},F.setCurrentTransformationMatrix=function(ce){return wt(ce.toString()+" cm"),this},F.comment=function(ce){return wt("#"+ce),this};var Cu=function(ce,Je){var Mt=ce||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Mt},set:function(Ma){isNaN(Ma)||(Mt=parseFloat(Ma))}});var Jt=Je||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Jt},set:function(Ma){isNaN(Ma)||(Jt=parseFloat(Ma))}});var ha="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ha},set:function(Ma){ha=Ma.toString()}}),this},Su=function(ce,Je,Mt,Jt){Cu.call(this,ce,Je),this.type="rect";var ha=Mt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ha},set:function(ir){isNaN(ir)||(ha=parseFloat(ir))}});var Ma=Jt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ma},set:function(ir){isNaN(ir)||(Ma=parseFloat(ir))}}),this},sp=function(){this.page=ga,this.currentPage=Te,this.pages=Vt.slice(0),this.pagesContext=pr.slice(0),this.x=Ya,this.y=yr,this.matrix=Tn,this.width=Xs(Te),this.height=au(Te),this.outputDestination=wa,this.id="",this.objectNumber=-1};sp.prototype.restore=function(){ga=this.page,Te=this.currentPage,pr=this.pagesContext,Vt=this.pages,Ya=this.x,yr=this.y,Tn=this.matrix,Tf(Te,this.width),Cf(Te,this.height),wa=this.outputDestination};var tu=function(ce,Je,Mt,Jt,ha){Ne.push(new sp),ga=Te=0,Vt=[],Ya=ce,yr=Je,Tn=ha,no([Mt,Jt])},Qm=function(ce){if(Zt[ce])Ne.pop().restore();else{var Je=new sp,Mt="Xo"+(Object.keys(Rn).length+1).toString(10);Je.id=Mt,Zt[ce]=Mt,Rn[Mt]=Je,Kr.publish("addFormObject",Je),Ne.pop().restore()}};for(var zd in F.beginFormObject=function(ce,Je,Mt,Jt,ha){return tu(ce,Je,Mt,Jt,ha),this},F.endFormObject=function(ce){return Qm(ce),this},F.doFormObject=function(ce,Je){var Mt=Rn[Zt[ce]];return wt("q"),wt(Je.toString()+" cm"),wt("/"+Mt.id+" Do"),wt("Q"),this},F.getFormObject=function(ce){var Je=Rn[Zt[ce]];return{x:Je.x,y:Je.y,width:Je.width,height:Je.height,matrix:Je.matrix}},F.save=function(ce,Je){return ce=ce||"generated.pdf",(Je=Je||{}).returnPromise=Je.returnPromise||!1,Je.returnPromise===!1?(sv(ph(Wu()),ce),typeof sv.unload=="function"&&Qn.setTimeout&&setTimeout(sv.unload,911),this):new Promise(function(Mt,Jt){try{var ha=sv(ph(Wu()),ce);typeof sv.unload=="function"&&Qn.setTimeout&&setTimeout(sv.unload,911),Mt(ha)}catch(Ma){Jt(Ma.message)}})},Wn.API)Wn.API.hasOwnProperty(zd)&&(zd==="events"&&Wn.API.events.length?function(ce,Je){var Mt,Jt,ha;for(ha=Je.length-1;ha!==-1;ha--)Mt=Je[ha][0],Jt=Je[ha][1],ce.subscribe.apply(ce,[Mt].concat(typeof Jt=="function"?[Jt]:Jt))}(Kr,Wn.API.events):F[zd]=Wn.API[zd]);var Xs=F.getPageWidth=function(ce){return(pr[ce=ce||Te].mediaBox.topRightX-pr[ce].mediaBox.bottomLeftX)/la},Tf=F.setPageWidth=function(ce,Je){pr[ce].mediaBox.topRightX=Je*la+pr[ce].mediaBox.bottomLeftX},au=F.getPageHeight=function(ce){return(pr[ce=ce||Te].mediaBox.topRightY-pr[ce].mediaBox.bottomLeftY)/la},Cf=F.setPageHeight=function(ce,Je){pr[ce].mediaBox.topRightY=Je*la+pr[ce].mediaBox.bottomLeftY};return F.internal={pdfEscape:Al,getStyle:mc,getFont:Os,getFontSize:lr,getCharSpace:hs,getTextColor:Ys,getLineHeight:gh,getLineHeightFactor:Ac,getLineWidth:yo,write:hr,getHorizontalCoordinate:rl,getVerticalCoordinate:ys,getCoordinateString:Yu,getVerticalCoordinateString:Vs,collections:{},newObject:bt,newAdditionalObject:Wt,newObjectDeferred:Gt,newObjectDeferredBegin:Et,getFilters:Ga,putStream:Cr,events:Kr,scaleFactor:la,pageSize:{getWidth:function(){return Xs(Te)},setWidth:function(ce){Tf(Te,ce)},getHeight:function(){return au(Te)},setHeight:function(ce){Cf(Te,ce)}},encryptionOptions:x,encryption:go,getEncryptor:gr,output:al,getNumberOfPages:mo,pages:Vt,out:wt,f2:Ve,f3:oe,getPageInfo:Bc,getPageInfoByObjId:Sn,getCurrentPageInfo:mh,getPDFVersion:$,Point:Cu,Rectangle:Su,Matrix:Ie,hasHotfix:zn},Object.defineProperty(F.internal.pageSize,"width",{get:function(){return Xs(Te)},set:function(ce){Tf(Te,ce)},enumerable:!0,configurable:!0}),Object.defineProperty(F.internal.pageSize,"height",{get:function(){return au(Te)},set:function(ce){Cf(Te,ce)},enumerable:!0,configurable:!0}),fh.call(F,Pa),$a="F1",Go(i,a),Kr.publish("initialized"),F}W0.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},W0.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},W0.prototype.hexToBytes=function(t){for(var e=[],a=0;a<t.length;a+=2)e.push(String.fromCharCode(parseInt(t.substr(a,2),16)));return e.join("")},W0.prototype.processOwnerPassword=function(t,e){return QI(JI(e).substr(0,5),t)},W0.prototype.encryptor=function(t,e){var a=JI(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return QI(a,r)}},f2.prototype.equals=function(t){var e,a="id,objectNumber,equals";if(!t||qs(t)!==qs(this))return!1;var r=0;for(e in this)if(!(a.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&a.indexOf(e)<0&&r--;return r===0},Wn.API={events:[]},Wn.version="3.0.1";var Pl=Wn.API,H4=1,e0=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Z0=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},pi=function(t){return t.toFixed(2)},xy=function(t){return t.toFixed(5)};Pl.__acroform__={};var Uh=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},Kq=function(t){return t*H4},Em=function(t){var e=new xte,a=on.internal.getHeight(t)||0,r=on.internal.getWidth(t)||0;return e.BBox=[0,0,Number(pi(r)),Number(pi(a))],e},yOe=Pl.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},AOe=Pl.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},vOe=Pl.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},$l=Pl.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return vOe(t,e-1)},Kl=Pl.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return yOe(t,e-1)},Wl=Pl.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return AOe(t,e-1)},_Oe=Pl.__acroform__.calculateCoordinates=function(t,e){var a=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],l=t[1],c=t[2],n=t[3],v={};return v.lowerLeft_X=a(i)||0,v.lowerLeft_Y=r(l+n)||0,v.upperRight_X=a(i+c)||0,v.upperRight_Y=r(l)||0,[Number(pi(v.lowerLeft_X)),Number(pi(v.lowerLeft_Y)),Number(pi(v.upperRight_X)),Number(pi(v.upperRight_Y))]},wOe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],a=t._V||t.DV,r=e3(t,a),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+pi(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var l=Em(t);return l.scope=t.scope,l.stream=e.join(`
`),l}},e3=function(t,e){var a=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(oe){return oe.split(`
`)}):i.map(function(oe){return[oe]});var l=a,c=on.internal.getHeight(t)||0;c=c<0?-c:c;var n=on.internal.getWidth(t)||0;n=n<0?-n:n;var v=function(oe,_e,Fe){if(oe+1<i.length){var Ee=_e+" "+i[oe+1][0];return sb(Ee,t,Fe).width<=n-4}return!1};l++;e:for(;l>0;){e="",l--;var R,x,N=sb("3",t,l).height,L=t.multiline?c-l:(c-N)/2,F=L+=2,j=0,$=0,H=0;if(l<=0){e=`(...) Tj
`,e+="% Width of Text: "+sb(e,t,l=12).width+", FieldWidth:"+n+`
`;break}for(var W="",ee=0,se=0;se<i.length;se++)if(i.hasOwnProperty(se)){var fe=!1;if(i[se].length!==1&&H!==i[se].length-1){if((N+2)*(ee+2)+2>c)continue e;W+=i[se][H],fe=!0,$=se,se--}else{W=(W+=i[se][H]+" ").substr(W.length-1)==" "?W.substr(0,W.length-1):W;var le=parseInt(se),me=v(le,W,l),ge=se>=i.length-1;if(me&&!ge){W+=" ",H=0;continue}if(me||ge){if(ge)$=le;else if(t.multiline&&(N+2)*(ee+2)+2>c)continue e}else{if(!t.multiline||(N+2)*(ee+2)+2>c)continue e;$=le}}for(var Re="",we=j;we<=$;we++){var Ve=i[we];if(t.multiline){if(we===$){Re+=Ve[H]+" ",H=(H+1)%Ve.length;continue}if(we===j){Re+=Ve[Ve.length-1]+" ";continue}}Re+=Ve[0]+" "}switch(Re=Re.substr(Re.length-1)==" "?Re.substr(0,Re.length-1):Re,x=sb(Re,t,l).width,t.textAlign){case"right":R=n-x-2;break;case"center":R=(n-x)/2;break;case"left":default:R=2}e+=pi(R)+" "+pi(F)+` Td
`,e+="("+e0(Re)+`) Tj
`,e+=-pi(R)+` 0 Td
`,F=-(l+2),x=0,j=fe?$:$+1,ee++,W=""}break}return r.text=e,r.fontSize=l,r},sb=function(t,e,a){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(a),charSpace:0})*parseFloat(a);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(a),charSpace:0})*parseFloat(a)*1.5,width:i}},ROe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},TOe=function(t,e){var a={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===a.type&&r.object===a.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(a)},COe=function(t,e){for(var a in t)if(t.hasOwnProperty(a)){var r=a,i=t[a];e.internal.newObjectDeferredBegin(i.objId,!0),qs(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},SOe=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Jp.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(ROe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");H4=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Pte,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(a){a.internal.events.unsubscribe(a.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete a.internal.acroformPlugin.acroFormDictionaryRoot._eventID,a.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(a){a.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=a.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var l=r[i];l.objId=void 0,l.hasAnnotation&&TOe(l,a)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(a){if(a.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");a.internal.write("/AcroForm "+a.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(a){(function(r,i){var l=!r;for(var c in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(c)){var n=r[c],v=[],R=n.Rect;if(n.Rect&&(n.Rect=_Oe(n.Rect,i)),i.internal.newObjectDeferredBegin(n.objId,!0),n.DA=on.createDefaultAppearanceStream(n),qs(n)==="object"&&typeof n.getKeyValueListForStream=="function"&&(v=n.getKeyValueListForStream()),n.Rect=R,n.hasAppearanceStream&&!n.appearanceStreamContent){var x=wOe(n);v.push({key:"AP",value:"<</N "+x+">>"}),i.internal.acroformPlugin.xForms.push(x)}if(n.appearanceStreamContent){var N="";for(var L in n.appearanceStreamContent)if(n.appearanceStreamContent.hasOwnProperty(L)){var F=n.appearanceStreamContent[L];if(N+="/"+L+" ",N+="<<",Object.keys(F).length>=1||Array.isArray(F)){for(var c in F)if(F.hasOwnProperty(c)){var j=F[c];typeof j=="function"&&(j=j.call(i,n)),N+="/"+c+" "+j+" ",i.internal.acroformPlugin.xForms.indexOf(j)>=0||i.internal.acroformPlugin.xForms.push(j)}}else typeof(j=F)=="function"&&(j=j.call(i,n)),N+="/"+c+" "+j,i.internal.acroformPlugin.xForms.indexOf(j)>=0||i.internal.acroformPlugin.xForms.push(j);N+=">>"}v.push({key:"AP",value:`<<
`+N+">>"})}i.internal.putStream({additionalKeyValues:v,objectId:n.objId}),i.internal.out("endobj")}l&&COe(i.internal.acroformPlugin.xForms,i)})(a,t)}),t.internal.acroformPlugin.isInitialized=!0}},bte=Pl.__acroform__.arrayToPdfArray=function(t,e,a){var r=function(c){return c};if(Array.isArray(t)){for(var i="[",l=0;l<t.length;l++)switch(l!==0&&(i+=" "),qs(t[l])){case"boolean":case"number":case"object":i+=t[l].toString();break;case"string":t[l].substr(0,1)!=="/"?(e!==void 0&&a&&(r=a.internal.getEncryptor(e)),i+="("+e0(r(t[l].toString()))+")"):i+=t[l].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},_D=function(t,e,a){var r=function(i){return i};return e!==void 0&&a&&(r=a.internal.getEncryptor(e)),(t=t||"").toString(),t="("+e0(r(t))+")"},Im=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Im.prototype.toString=function(){return this.objId+" 0 R"},Im.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Im.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(l){return l!="content"&&l!="appearanceStreamContent"&&l!="scope"&&l!="objId"&&l.substring(0,1)!="_"});for(var a in e)if(Object.getOwnPropertyDescriptor(this,e[a]).configurable===!1){var r=e[a],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:bte(i,this.objId,this.scope)}):i instanceof Im?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var xte=function(){Im.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(a){t=a.trim()},get:function(){return t||null}})};Uh(xte,Im);var Pte=function(){Im.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var a=function(r){return r};return this.scope&&(a=this.scope.internal.getEncryptor(this.objId)),"("+e0(a(t))+")"}},set:function(a){t=a}})};Uh(Pte,Im);var Jp=function t(){Im.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(W){if(isNaN(W))throw new Error('Invalid value "'+W+'" for attribute F supplied.');e=W}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!$l(e,3)},set:function(W){W?this.F=Kl(e,3):this.F=Wl(e,3)}});var a=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return a},set:function(W){if(isNaN(W))throw new Error('Invalid value "'+W+'" for attribute Ff supplied.');a=W}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(W){r=W!==void 0?W:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(W){r[0]=W}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(W){r[1]=W}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(W){r[2]=W}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(W){r[3]=W}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(W){switch(W){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=W;break;default:throw new Error('Invalid value "'+W+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof p2)return;l="FieldObject"+t.FieldNum++}var W=function(ee){return ee};return this.scope&&(W=this.scope.internal.getEncryptor(this.objId)),"("+e0(W(l))+")"},set:function(W){l=W.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function(W){l=W}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(W){c=W}});var n="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return n},set:function(W){n=W}});var v=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return v},set:function(W){v=W}});var R=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return R===void 0?50/H4:R},set:function(W){R=W}});var x="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return x},set:function(W){x=W}});var N="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!N||this instanceof p2||this instanceof Cv))return _D(N,this.objId,this.scope)},set:function(W){W=W.toString(),N=W}});var L=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(L)return this instanceof uc?L:_D(L,this.objId,this.scope)},set:function(W){W=W.toString(),L=this instanceof uc?W:W.substr(0,1)==="("?Z0(W.substr(1,W.length-2)):Z0(W)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof uc?Z0(L.substr(1,L.length-1)):L},set:function(W){W=W.toString(),L=this instanceof uc?"/"+W:W}});var F=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(F)return F},set:function(W){this.V=W}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(F)return this instanceof uc?F:_D(F,this.objId,this.scope)},set:function(W){W=W.toString(),F=this instanceof uc?W:W.substr(0,1)==="("?Z0(W.substr(1,W.length-2)):Z0(W)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof uc?Z0(F.substr(1,F.length-1)):F},set:function(W){W=W.toString(),F=this instanceof uc?"/"+W:W}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var j,$=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return $},set:function(W){W=!!W,$=W}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(j)return j},set:function(W){j=W}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!$l(this.Ff,1)},set:function(W){W?this.Ff=Kl(this.Ff,1):this.Ff=Wl(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!$l(this.Ff,2)},set:function(W){W?this.Ff=Kl(this.Ff,2):this.Ff=Wl(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!$l(this.Ff,3)},set:function(W){W?this.Ff=Kl(this.Ff,3):this.Ff=Wl(this.Ff,3)}});var H=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(H!==null)return H},set:function(W){if([0,1,2].indexOf(W)===-1)throw new Error('Invalid value "'+W+'" for attribute Q supplied.');H=W}}),Object.defineProperty(this,"textAlign",{get:function(){var W;switch(H){case 0:default:W="left";break;case 1:W="center";break;case 2:W="right"}return W},configurable:!0,enumerable:!0,set:function(W){switch(W){case"right":case 2:H=2;break;case"center":case 1:H=1;break;case"left":case 0:default:H=0}}})};Uh(Jp,Im);var g_=function(){Jp.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(a){t=a}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return bte(e,this.objId,this.scope)},set:function(a){var r,i;i=[],typeof(r=a)=="string"&&(i=function(l,c,n){n||(n=1);for(var v,R=[];v=c.exec(l);)R.push(v[n]);return R}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(a){e=a,this.sort&&e.sort()},this.addOption=function(a){a=(a=a||"").toString(),e.push(a),this.sort&&e.sort()},this.removeOption=function(a,r){for(r=r||!1,a=(a=a||"").toString();e.indexOf(a)!==-1&&(e.splice(e.indexOf(a),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!$l(this.Ff,18)},set:function(a){a?this.Ff=Kl(this.Ff,18):this.Ff=Wl(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!$l(this.Ff,19)},set:function(a){this.combo===!0&&(a?this.Ff=Kl(this.Ff,19):this.Ff=Wl(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!$l(this.Ff,20)},set:function(a){a?(this.Ff=Kl(this.Ff,20),e.sort()):this.Ff=Wl(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!$l(this.Ff,22)},set:function(a){a?this.Ff=Kl(this.Ff,22):this.Ff=Wl(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!$l(this.Ff,23)},set:function(a){a?this.Ff=Kl(this.Ff,23):this.Ff=Wl(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!$l(this.Ff,27)},set:function(a){a?this.Ff=Kl(this.Ff,27):this.Ff=Wl(this.Ff,27)}}),this.hasAppearanceStream=!1};Uh(g_,Jp);var y_=function(){g_.call(this),this.fontName="helvetica",this.combo=!1};Uh(y_,g_);var A_=function(){y_.call(this),this.combo=!0};Uh(A_,y_);var Pb=function(){A_.call(this),this.edit=!0};Uh(Pb,A_);var uc=function(){Jp.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!$l(this.Ff,15)},set:function(a){a?this.Ff=Kl(this.Ff,15):this.Ff=Wl(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!$l(this.Ff,16)},set:function(a){a?this.Ff=Kl(this.Ff,16):this.Ff=Wl(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!$l(this.Ff,17)},set:function(a){a?this.Ff=Kl(this.Ff,17):this.Ff=Wl(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!$l(this.Ff,26)},set:function(a){a?this.Ff=Kl(this.Ff,26):this.Ff=Wl(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};if(this.scope&&(a=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+e0(a(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(a){qs(a)==="object"&&(e=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(a){typeof a=="string"&&(e.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(a){t="/"+a}})};Uh(uc,Jp);var Eb=function(){uc.call(this),this.pushButton=!0};Uh(Eb,uc);var v_=function(){uc.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Uh(v_,uc);var p2=function(){var t,e;Jp.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var a,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(n){return n};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var l,c=[];for(l in c.push("<<"),r)c.push("/"+l+" ("+e0(i(r[l]))+")");return c.push(">>"),c.join(`
`)},set:function(i){qs(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return a},set:function(i){a=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return a.substr(1,a.length-1)},set:function(i){a="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=on.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Uh(p2,Jp),v_.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var a=this.Kids[e];a.appearanceStreamContent=t.createAppearanceStream(a.optionName),a.caption=t.getCA()}},v_.prototype.createOption=function(t){var e=new p2;return e.Parent=this,e.optionName=t,this.Kids.push(e),bOe.call(this.scope,e),e};var Nb=function(){uc.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=on.CheckBox.createAppearanceStream()};Uh(Nb,uc);var Cv=function(){Jp.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!$l(this.Ff,13)},set:function(e){e?this.Ff=Kl(this.Ff,13):this.Ff=Wl(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!$l(this.Ff,21)},set:function(e){e?this.Ff=Kl(this.Ff,21):this.Ff=Wl(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!$l(this.Ff,23)},set:function(e){e?this.Ff=Kl(this.Ff,23):this.Ff=Wl(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!$l(this.Ff,24)},set:function(e){e?this.Ff=Kl(this.Ff,24):this.Ff=Wl(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!$l(this.Ff,25)},set:function(e){e?this.Ff=Kl(this.Ff,25):this.Ff=Wl(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!$l(this.Ff,26)},set:function(e){e?this.Ff=Kl(this.Ff,26):this.Ff=Wl(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Uh(Cv,Jp);var Ob=function(){Cv.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!$l(this.Ff,14)},set:function(t){t?this.Ff=Kl(this.Ff,14):this.Ff=Wl(this.Ff,14)}}),this.password=!0};Uh(Ob,Cv);var on={CheckBox:{createAppearanceStream:function(){return{N:{On:on.CheckBox.YesNormal},D:{On:on.CheckBox.YesPushDown,Off:on.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Em(t);e.scope=t.scope;var a=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),l=e3(t,t.caption);return a.push("0.749023 g"),a.push("0 0 "+pi(on.internal.getWidth(t))+" "+pi(on.internal.getHeight(t))+" re"),a.push("f"),a.push("BMC"),a.push("q"),a.push("0 0 1 rg"),a.push("/"+r+" "+pi(l.fontSize)+" Tf "+i),a.push("BT"),a.push(l.text),a.push("ET"),a.push("Q"),a.push("EMC"),e.stream=a.join(`
`),e},YesNormal:function(t){var e=Em(t);e.scope=t.scope;var a=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],l=on.internal.getHeight(t),c=on.internal.getWidth(t),n=e3(t,t.caption);return i.push("1 g"),i.push("0 0 "+pi(c)+" "+pi(l)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+pi(c-1)+" "+pi(l-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+a+" "+pi(n.fontSize)+" Tf "+r),i.push(n.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Em(t);e.scope=t.scope;var a=[];return a.push("0.749023 g"),a.push("0 0 "+pi(on.internal.getWidth(t))+" "+pi(on.internal.getHeight(t))+" re"),a.push("f"),e.stream=a.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:on.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=on.RadioButton.Circle.YesNormal,e.D[t]=on.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Em(t);e.scope=t.scope;var a=[],r=on.internal.getWidth(t)<=on.internal.getHeight(t)?on.internal.getWidth(t)/4:on.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=on.internal.Bezier_C,l=Number((r*i).toFixed(5));return a.push("q"),a.push("1 0 0 1 "+xy(on.internal.getWidth(t)/2)+" "+xy(on.internal.getHeight(t)/2)+" cm"),a.push(r+" 0 m"),a.push(r+" "+l+" "+l+" "+r+" 0 "+r+" c"),a.push("-"+l+" "+r+" -"+r+" "+l+" -"+r+" 0 c"),a.push("-"+r+" -"+l+" -"+l+" -"+r+" 0 -"+r+" c"),a.push(l+" -"+r+" "+r+" -"+l+" "+r+" 0 c"),a.push("f"),a.push("Q"),e.stream=a.join(`
`),e},YesPushDown:function(t){var e=Em(t);e.scope=t.scope;var a=[],r=on.internal.getWidth(t)<=on.internal.getHeight(t)?on.internal.getWidth(t)/4:on.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),l=Number((i*on.internal.Bezier_C).toFixed(5)),c=Number((r*on.internal.Bezier_C).toFixed(5));return a.push("0.749023 g"),a.push("q"),a.push("1 0 0 1 "+xy(on.internal.getWidth(t)/2)+" "+xy(on.internal.getHeight(t)/2)+" cm"),a.push(i+" 0 m"),a.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),a.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),a.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),a.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),a.push("f"),a.push("Q"),a.push("0 g"),a.push("q"),a.push("1 0 0 1 "+xy(on.internal.getWidth(t)/2)+" "+xy(on.internal.getHeight(t)/2)+" cm"),a.push(r+" 0 m"),a.push(r+" "+c+" "+c+" "+r+" 0 "+r+" c"),a.push("-"+c+" "+r+" -"+r+" "+c+" -"+r+" 0 c"),a.push("-"+r+" -"+c+" -"+c+" -"+r+" 0 -"+r+" c"),a.push(c+" -"+r+" "+r+" -"+c+" "+r+" 0 c"),a.push("f"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=Em(t);e.scope=t.scope;var a=[],r=on.internal.getWidth(t)<=on.internal.getHeight(t)?on.internal.getWidth(t)/4:on.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),l=Number((i*on.internal.Bezier_C).toFixed(5));return a.push("0.749023 g"),a.push("q"),a.push("1 0 0 1 "+xy(on.internal.getWidth(t)/2)+" "+xy(on.internal.getHeight(t)/2)+" cm"),a.push(i+" 0 m"),a.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),a.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),a.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),a.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),a.push("f"),a.push("Q"),e.stream=a.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:on.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=on.RadioButton.Cross.YesNormal,e.D[t]=on.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Em(t);e.scope=t.scope;var a=[],r=on.internal.calculateCross(t);return a.push("q"),a.push("1 1 "+pi(on.internal.getWidth(t)-2)+" "+pi(on.internal.getHeight(t)-2)+" re"),a.push("W"),a.push("n"),a.push(pi(r.x1.x)+" "+pi(r.x1.y)+" m"),a.push(pi(r.x2.x)+" "+pi(r.x2.y)+" l"),a.push(pi(r.x4.x)+" "+pi(r.x4.y)+" m"),a.push(pi(r.x3.x)+" "+pi(r.x3.y)+" l"),a.push("s"),a.push("Q"),e.stream=a.join(`
`),e},YesPushDown:function(t){var e=Em(t);e.scope=t.scope;var a=on.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+pi(on.internal.getWidth(t))+" "+pi(on.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+pi(on.internal.getWidth(t)-2)+" "+pi(on.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(pi(a.x1.x)+" "+pi(a.x1.y)+" m"),r.push(pi(a.x2.x)+" "+pi(a.x2.y)+" l"),r.push(pi(a.x4.x)+" "+pi(a.x4.y)+" m"),r.push(pi(a.x3.x)+" "+pi(a.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Em(t);e.scope=t.scope;var a=[];return a.push("0.749023 g"),a.push("0 0 "+pi(on.internal.getWidth(t))+" "+pi(on.internal.getHeight(t))+" re"),a.push("f"),e.stream=a.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+a}};on.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=on.internal.getWidth(t),a=on.internal.getHeight(t),r=Math.min(e,a);return{x1:{x:(e-r)/2,y:(a-r)/2+r},x2:{x:(e-r)/2+r,y:(a-r)/2},x3:{x:(e-r)/2,y:(a-r)/2},x4:{x:(e-r)/2+r,y:(a-r)/2+r}}}},on.internal.getWidth=function(t){var e=0;return qs(t)==="object"&&(e=Kq(t.Rect[2])),e},on.internal.getHeight=function(t){var e=0;return qs(t)==="object"&&(e=Kq(t.Rect[3])),e};var bOe=Pl.addField=function(t){if(SOe(this,t),!(t instanceof Jp))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Pl.AcroFormChoiceField=g_,Pl.AcroFormListBox=y_,Pl.AcroFormComboBox=A_,Pl.AcroFormEditBox=Pb,Pl.AcroFormButton=uc,Pl.AcroFormPushButton=Eb,Pl.AcroFormRadioButton=v_,Pl.AcroFormCheckBox=Nb,Pl.AcroFormTextField=Cv,Pl.AcroFormPasswordField=Ob,Pl.AcroFormAppearance=on,Pl.AcroForm={ChoiceField:g_,ListBox:y_,ComboBox:A_,EditBox:Pb,Button:uc,PushButton:Eb,RadioButton:v_,CheckBox:Nb,TextField:Cv,PasswordField:Ob,Appearance:on},Wn.AcroForm={ChoiceField:g_,ListBox:y_,ComboBox:A_,EditBox:Pb,Button:uc,PushButton:Eb,RadioButton:v_,CheckBox:Nb,TextField:Cv,PasswordField:Ob,Appearance:on};Wn.AcroForm;function Ete(t){return t.reduce(function(e,a,r){return e[a]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",a={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(oe,_e){var Fe,Ee,ze,Se,je,Ue=e;if((_e=_e||e)==="RGBA"||oe.data!==void 0&&oe.data instanceof Uint8ClampedArray&&"height"in oe&&"width"in oe)return"RGBA";if(me(oe))for(je in a)for(ze=a[je],Fe=0;Fe<ze.length;Fe+=1){for(Se=!0,Ee=0;Ee<ze[Fe].length;Ee+=1)if(ze[Fe][Ee]!==void 0&&ze[Fe][Ee]!==oe[Ee]){Se=!1;break}if(Se===!0){Ue=je;break}}else for(je in a)for(ze=a[je],Fe=0;Fe<ze.length;Fe+=1){for(Se=!0,Ee=0;Ee<ze[Fe].length;Ee+=1)if(ze[Fe][Ee]!==void 0&&ze[Fe][Ee]!==oe.charCodeAt(Ee)){Se=!1;break}if(Se===!0){Ue=je;break}}return Ue===e&&_e!==e&&(Ue=_e),Ue},i=function oe(_e){for(var Fe=this.internal.write,Ee=this.internal.putStream,ze=(0,this.internal.getFilters)();ze.indexOf("FlateEncode")!==-1;)ze.splice(ze.indexOf("FlateEncode"),1);_e.objectId=this.internal.newObject();var Se=[];if(Se.push({key:"Type",value:"/XObject"}),Se.push({key:"Subtype",value:"/Image"}),Se.push({key:"Width",value:_e.width}),Se.push({key:"Height",value:_e.height}),_e.colorSpace===H.INDEXED?Se.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(_e.palette.length/3-1)+" "+("sMask"in _e&&_e.sMask!==void 0?_e.objectId+2:_e.objectId+1)+" 0 R]"}):(Se.push({key:"ColorSpace",value:"/"+_e.colorSpace}),_e.colorSpace===H.DEVICE_CMYK&&Se.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Se.push({key:"BitsPerComponent",value:_e.bitsPerComponent}),"decodeParameters"in _e&&_e.decodeParameters!==void 0&&Se.push({key:"DecodeParms",value:"<<"+_e.decodeParameters+">>"}),"transparency"in _e&&Array.isArray(_e.transparency)){for(var je="",Ue=0,$e=_e.transparency.length;Ue<$e;Ue++)je+=_e.transparency[Ue]+" "+_e.transparency[Ue]+" ";Se.push({key:"Mask",value:"["+je+"]"})}_e.sMask!==void 0&&Se.push({key:"SMask",value:_e.objectId+1+" 0 R"});var Be=_e.filter!==void 0?["/"+_e.filter]:void 0;if(Ee({data:_e.data,additionalKeyValues:Se,alreadyAppliedFilters:Be,objectId:_e.objectId}),Fe("endobj"),"sMask"in _e&&_e.sMask!==void 0){var qe="/Predictor "+_e.predictor+" /Colors 1 /BitsPerComponent "+_e.bitsPerComponent+" /Columns "+_e.width,be={width:_e.width,height:_e.height,colorSpace:"DeviceGray",bitsPerComponent:_e.bitsPerComponent,decodeParameters:qe,data:_e.sMask};"filter"in _e&&(be.filter=_e.filter),oe.call(this,be)}if(_e.colorSpace===H.INDEXED){var Te=this.internal.newObject();Ee({data:Re(new Uint8Array(_e.palette)),objectId:Te}),Fe("endobj")}},l=function(){var oe=this.internal.collections.addImage_images;for(var _e in oe)i.call(this,oe[_e])},c=function(){var oe,_e=this.internal.collections.addImage_images,Fe=this.internal.write;for(var Ee in _e)Fe("/I"+(oe=_e[Ee]).index,oe.objectId,"0","R")},n=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",c))},v=function(){var oe=this.internal.collections.addImage_images;return n.call(this),oe},R=function(){return Object.keys(this.internal.collections.addImage_images).length},x=function(oe){return typeof t["process"+oe.toUpperCase()]=="function"},N=function(oe){return qs(oe)==="object"&&oe.nodeType===1},L=function(oe,_e){if(oe.nodeName==="IMG"&&oe.hasAttribute("src")){var Fe=""+oe.getAttribute("src");if(Fe.indexOf("data:image/")===0)return OR(unescape(Fe).split("base64,").pop());var Ee=t.loadFile(Fe,!0);if(Ee!==void 0)return Ee}if(oe.nodeName==="CANVAS"){if(oe.width===0||oe.height===0)throw new Error("Given canvas must have data. Canvas width: "+oe.width+", height: "+oe.height);var ze;switch(_e){case"PNG":ze="image/png";break;case"WEBP":ze="image/webp";break;case"JPEG":case"JPG":default:ze="image/jpeg"}return OR(oe.toDataURL(ze,1).split("base64,").pop())}},F=function(oe){var _e=this.internal.collections.addImage_images;if(_e){for(var Fe in _e)if(oe===_e[Fe].alias)return _e[Fe]}},j=function(oe,_e,Fe){return oe||_e||(oe=-96,_e=-96),oe<0&&(oe=-1*Fe.width*72/oe/this.internal.scaleFactor),_e<0&&(_e=-1*Fe.height*72/_e/this.internal.scaleFactor),oe===0&&(oe=_e*Fe.width/Fe.height),_e===0&&(_e=oe*Fe.height/Fe.width),[oe,_e]},$=function(oe,_e,Fe,Ee,ze,Se){var je=j.call(this,Fe,Ee,ze),Ue=this.internal.getCoordinateString,$e=this.internal.getVerticalCoordinateString,Be=v.call(this);if(Fe=je[0],Ee=je[1],Be[ze.index]=ze,Se){Se*=Math.PI/180;var qe=Math.cos(Se),be=Math.sin(Se),Te=function(Ge){return Ge.toFixed(4)},ke=[Te(qe),Te(be),Te(-1*be),Te(qe),0,0,"cm"]}this.internal.write("q"),Se?(this.internal.write([1,"0","0",1,Ue(oe),$e(_e+Ee),"cm"].join(" ")),this.internal.write(ke.join(" ")),this.internal.write([Ue(Fe),"0","0",Ue(Ee),"0","0","cm"].join(" "))):this.internal.write([Ue(Fe),"0","0",Ue(Ee),Ue(oe),$e(_e+Ee),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ze.index+" Do"),this.internal.write("Q")},H=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var W=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},ee=t.__addimage__.sHashCode=function(oe){var _e,Fe,Ee=0;if(typeof oe=="string")for(Fe=oe.length,_e=0;_e<Fe;_e++)Ee=(Ee<<5)-Ee+oe.charCodeAt(_e),Ee|=0;else if(me(oe))for(Fe=oe.byteLength/2,_e=0;_e<Fe;_e++)Ee=(Ee<<5)-Ee+oe[_e],Ee|=0;return Ee},se=t.__addimage__.validateStringAsBase64=function(oe){(oe=oe||"").toString().trim();var _e=!0;return oe.length===0&&(_e=!1),oe.length%4!=0&&(_e=!1),/^[A-Za-z0-9+/]+$/.test(oe.substr(0,oe.length-2))===!1&&(_e=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(oe.substr(-2))===!1&&(_e=!1),_e},fe=t.__addimage__.extractImageFromDataUrl=function(oe){if(oe==null||!(oe=oe.trim()).startsWith("data:"))return null;var _e=oe.indexOf(",");return _e<0?null:oe.substring(0,_e).trim().endsWith("base64")?oe.substring(_e+1):null},le=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(oe){return le()&&oe instanceof ArrayBuffer};var me=t.__addimage__.isArrayBufferView=function(oe){return le()&&typeof Uint32Array<"u"&&(oe instanceof Int8Array||oe instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&oe instanceof Uint8ClampedArray||oe instanceof Int16Array||oe instanceof Uint16Array||oe instanceof Int32Array||oe instanceof Uint32Array||oe instanceof Float32Array||oe instanceof Float64Array)},ge=t.__addimage__.binaryStringToUint8Array=function(oe){for(var _e=oe.length,Fe=new Uint8Array(_e),Ee=0;Ee<_e;Ee++)Fe[Ee]=oe.charCodeAt(Ee);return Fe},Re=t.__addimage__.arrayBufferToBinaryString=function(oe){for(var _e="",Fe=me(oe)?oe:new Uint8Array(oe),Ee=0;Ee<Fe.length;Ee+=8192)_e+=String.fromCharCode.apply(null,Fe.subarray(Ee,Ee+8192));return _e};t.addImage=function(){var oe,_e,Fe,Ee,ze,Se,je,Ue,$e;if(typeof arguments[1]=="number"?(_e=e,Fe=arguments[1],Ee=arguments[2],ze=arguments[3],Se=arguments[4],je=arguments[5],Ue=arguments[6],$e=arguments[7]):(_e=arguments[1],Fe=arguments[2],Ee=arguments[3],ze=arguments[4],Se=arguments[5],je=arguments[6],Ue=arguments[7],$e=arguments[8]),qs(oe=arguments[0])==="object"&&!N(oe)&&"imageData"in oe){var Be=oe;oe=Be.imageData,_e=Be.format||_e||e,Fe=Be.x||Fe||0,Ee=Be.y||Ee||0,ze=Be.w||Be.width||ze,Se=Be.h||Be.height||Se,je=Be.alias||je,Ue=Be.compression||Ue,$e=Be.rotation||Be.angle||$e}var qe=this.internal.getFilters();if(Ue===void 0&&qe.indexOf("FlateEncode")!==-1&&(Ue="SLOW"),isNaN(Fe)||isNaN(Ee))throw new Error("Invalid coordinates passed to jsPDF.addImage");n.call(this);var be=we.call(this,oe,_e,je,Ue);return $.call(this,Fe,Ee,ze,Se,be,$e),this};var we=function(oe,_e,Fe,Ee){var ze,Se,je;if(typeof oe=="string"&&r(oe)===e){oe=unescape(oe);var Ue=Ve(oe,!1);(Ue!==""||(Ue=t.loadFile(oe,!0))!==void 0)&&(oe=Ue)}if(N(oe)&&(oe=L(oe,_e)),_e=r(oe,_e),!x(_e))throw new Error("addImage does not support files of type '"+_e+"', please ensure that a plugin for '"+_e+"' support is added.");if(((je=Fe)==null||je.length===0)&&(Fe=function($e){return typeof $e=="string"||me($e)?ee($e):me($e.data)?ee($e.data):null}(oe)),(ze=F.call(this,Fe))||(le()&&(oe instanceof Uint8Array||_e==="RGBA"||(Se=oe,oe=ge(oe))),ze=this["process"+_e.toUpperCase()](oe,R.call(this),Fe,function($e){return $e&&typeof $e=="string"&&($e=$e.toUpperCase()),$e in t.image_compression?$e:W.NONE}(Ee),Se)),!ze)throw new Error("An unknown error occurred whilst processing the image.");return ze},Ve=t.__addimage__.convertBase64ToBinaryString=function(oe,_e){_e=typeof _e!="boolean"||_e;var Fe,Ee="";if(typeof oe=="string"){var ze;Fe=(ze=fe(oe))!==null&&ze!==void 0?ze:oe;try{Ee=OR(Fe)}catch(Se){if(_e)throw se(Fe)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Se.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Ee};t.getImageProperties=function(oe){var _e,Fe,Ee="";if(N(oe)&&(oe=L(oe)),typeof oe=="string"&&r(oe)===e&&((Ee=Ve(oe,!1))===""&&(Ee=t.loadFile(oe)||""),oe=Ee),Fe=r(oe),!x(Fe))throw new Error("addImage does not support files of type '"+Fe+"', please ensure that a plugin for '"+Fe+"' support is added.");if(!le()||oe instanceof Uint8Array||(oe=ge(oe)),!(_e=this["process"+Fe.toUpperCase()](oe)))throw new Error("An unknown error occurred whilst processing the image");return _e.fileType=Fe,_e}})(Wn.API),function(t){var e=function(a){if(a!==void 0&&a!="")return!0};Wn.API.events.push(["addPage",function(a){this.internal.getPageInfo(a.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(a){for(var r,i,l,c=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,v=this.internal.getPageInfoByObjId(a.objId),R=a.pageContext.annotations,x=!1,N=0;N<R.length&&!x;N++)switch((r=R[N]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(x=!0);break;case"reference":case"text":case"freetext":x=!0}if(x!=0){this.internal.write("/Annots [");for(var L=0;L<R.length;L++){r=R[L];var F=this.internal.pdfEscape,j=this.internal.getEncryptor(a.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var $=this.internal.newAdditionalObject(),H=this.internal.newAdditionalObject(),W=this.internal.getEncryptor($.objId),ee=r.title||"Note";l="<</Type /Annot /Subtype /Text "+(i="/Rect ["+c(r.bounds.x)+" "+n(r.bounds.y+r.bounds.h)+" "+c(r.bounds.x+r.bounds.w)+" "+n(r.bounds.y)+"] ")+"/Contents ("+F(W(r.contents))+")",l+=" /Popup "+H.objId+" 0 R",l+=" /P "+v.objId+" 0 R",l+=" /T ("+F(W(ee))+") >>",$.content=l;var se=$.objId+" 0 R";l="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+c(r.bounds.x+30)+" "+n(r.bounds.y+r.bounds.h)+" "+c(r.bounds.x+r.bounds.w+30)+" "+n(r.bounds.y)+"] ")+" /Parent "+se,r.open&&(l+=" /Open true"),l+=" >>",H.content=l,this.internal.write($.objId,"0 R",H.objId,"0 R");break;case"freetext":i="/Rect ["+c(r.bounds.x)+" "+n(r.bounds.y)+" "+c(r.bounds.x+r.bounds.w)+" "+n(r.bounds.y+r.bounds.h)+"] ";var fe=r.color||"#000000";l="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+F(j(r.contents))+")",l+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+fe+")",l+=" /Border [0 0 0]",l+=" >>",this.internal.write(l);break;case"link":if(r.options.name){var le=this.annotations._nameMap[r.options.name];r.options.pageNumber=le.page,r.options.top=le.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",l="",r.options.url)l="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+F(j(r.options.url))+") >>";else if(r.options.pageNumber)switch(l="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":l+=" /Fit]";break;case"FitH":l+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,l+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var me=n(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),l+=" /XYZ "+r.options.left+" "+me+" "+r.options.zoom+"]"}l!=""&&(l+=" >>",this.internal.write(l))}}this.internal.write("]")}}]),t.createAnnotation=function(a){var r=this.internal.getCurrentPageInfo();switch(a.type){case"link":this.link(a.bounds.x,a.bounds.y,a.bounds.w,a.bounds.h,a);break;case"text":case"freetext":r.pageContext.annotations.push(a)}},t.link=function(a,r,i,l,c){var n=this.internal.getCurrentPageInfo(),v=this.internal.getCoordinateString,R=this.internal.getVerticalCoordinateString;n.pageContext.annotations.push({finalBounds:{x:v(a),y:R(r),w:v(a+i),h:R(r+l)},options:c,type:"link"})},t.textWithLink=function(a,r,i,l){var c,n,v=this.getTextWidth(a),R=this.internal.getLineHeight()/this.internal.scaleFactor;if(l.maxWidth!==void 0){n=l.maxWidth;var x=this.splitTextToSize(a,n).length;c=Math.ceil(R*x)}else n=v,c=R;return this.text(a,r,i,l),i+=.2*R,l.align==="center"&&(r-=v/2),l.align==="right"&&(r-=v),this.link(r,i-R,n,c,l),v},t.getTextWidth=function(a){var r=this.internal.getFontSize();return this.getStringUnitWidth(a)*r/this.internal.scaleFactor}}(Wn.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},a={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var l=t.__arabicParser__.isInArabicSubstitutionA=function($){return e[$.charCodeAt(0)]!==void 0},c=t.__arabicParser__.isArabicLetter=function($){return typeof $=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test($)},n=t.__arabicParser__.isArabicEndLetter=function($){return c($)&&l($)&&e[$.charCodeAt(0)].length<=2},v=t.__arabicParser__.isArabicAlfLetter=function($){return c($)&&i.indexOf($.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function($){return c($)&&l($)&&e[$.charCodeAt(0)].length>=1};var R=t.__arabicParser__.arabicLetterHasFinalForm=function($){return c($)&&l($)&&e[$.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function($){return c($)&&l($)&&e[$.charCodeAt(0)].length>=3};var x=t.__arabicParser__.arabicLetterHasMedialForm=function($){return c($)&&l($)&&e[$.charCodeAt(0)].length==4},N=t.__arabicParser__.resolveLigatures=function($){var H=0,W=a,ee="",se=0;for(H=0;H<$.length;H+=1)W[$.charCodeAt(H)]!==void 0?(se++,typeof(W=W[$.charCodeAt(H)])=="number"&&(ee+=String.fromCharCode(W),W=a,se=0),H===$.length-1&&(W=a,ee+=$.charAt(H-(se-1)),H-=se-1,se=0)):(W=a,ee+=$.charAt(H-se),H-=se,se=0);return ee};t.__arabicParser__.isArabicDiacritic=function($){return $!==void 0&&r[$.charCodeAt(0)]!==void 0};var L=t.__arabicParser__.getCorrectForm=function($,H,W){return c($)?l($)===!1?-1:!R($)||!c(H)&&!c(W)||!c(W)&&n(H)||n($)&&!c(H)||n($)&&v(H)||n($)&&n(H)?0:x($)&&c(H)&&!n(H)&&c(W)&&R(W)?3:n($)||!c(W)?1:2:-1},F=function($){var H=0,W=0,ee=0,se="",fe="",le="",me=($=$||"").split("\\s+"),ge=[];for(H=0;H<me.length;H+=1){for(ge.push(""),W=0;W<me[H].length;W+=1)se=me[H][W],fe=me[H][W-1],le=me[H][W+1],c(se)?(ee=L(se,fe,le),ge[H]+=ee!==-1?String.fromCharCode(e[se.charCodeAt(0)][ee]):se):ge[H]+=se;ge[H]=N(ge[H])}return ge.join(" ")},j=t.__arabicParser__.processArabic=t.processArabic=function(){var $,H=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,W=[];if(Array.isArray(H)){var ee=0;for(W=[],ee=0;ee<H.length;ee+=1)Array.isArray(H[ee])?W.push([F(H[ee][0]),H[ee][1],H[ee][2]]):W.push([F(H[ee])]);$=W}else $=F(H);return typeof arguments[0]=="string"?$:(arguments[0].text=$,arguments[0])};t.events.push(["preProcessText",j])}(Wn.API),Wn.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var a=void 0;Object.defineProperty(this,"pdf",{get:function(){return a},set:function(n){a=n}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(n){r=isNaN(n)||Number.isInteger(n)===!1||n<0?150:n,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(n){i=isNaN(n)||Number.isInteger(n)===!1||n<0?300:n,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var l=[];Object.defineProperty(this,"childNodes",{get:function(){return l},set:function(n){l=n}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(n){c=n}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(a,r){var i;if((a=a||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Wn.API),function(t){var e={left:0,top:0,bottom:0,right:0},a=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var v=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return v},set:function($){v=$}});var R=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return R},set:function($){R=$}});var x=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return x},set:function($){x=$}});var N=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return N},set:function($){N=$}});var L=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return L},set:function($){L=$}});var F=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return F},set:function($){F=$}});var j=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return j},set:function($){j=$}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(v){return r.call(this),this.internal.__cell__.headerFunction=typeof v=="function"?v:void 0,this},t.getTextDimensions=function(v,R){r.call(this);var x=(R=R||{}).fontSize||this.getFontSize(),N=R.font||this.getFont(),L=R.scaleFactor||this.internal.scaleFactor,F=0,j=0,$=0,H=this;if(!Array.isArray(v)&&typeof v!="string"){if(typeof v!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");v=String(v)}var W=R.maxWidth;W>0?typeof v=="string"?v=this.splitTextToSize(v,W):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(se,fe){return se.concat(H.splitTextToSize(fe,W))},[])):v=Array.isArray(v)?v:[v];for(var ee=0;ee<v.length;ee++)F<($=this.getStringUnitWidth(v[ee],{font:N})*x)&&(F=$);return F!==0&&(j=v.length),{w:F/=L,h:Math.max((j*x*this.getLineHeightFactor()-x*(this.getLineHeightFactor()-1))/L,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var v=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new l(v.left,v.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=t.cell=function(){var v;v=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var R=this.internal.__cell__.lastCell,x=this.internal.__cell__.padding,N=this.internal.__cell__.margins||e,L=this.internal.__cell__.tableHeaderRow,F=this.internal.__cell__.printHeaders;return R.lineNumber!==void 0&&(R.lineNumber===v.lineNumber?(v.x=(R.x||0)+(R.width||0),v.y=R.y||0):R.y+R.height+v.height+N.bottom>this.getPageHeight()?(this.cellAddPage(),v.y=N.top,F&&L&&(this.printHeaderRow(v.lineNumber,!0),v.y+=L[0].height)):v.y=R.y+R.height||v.y),v.text[0]!==void 0&&(this.rect(v.x,v.y,v.width,v.height,a===!0?"FD":void 0),v.align==="right"?this.text(v.text,v.x+v.width-x,v.y+x,{align:"right",baseline:"top"}):v.align==="center"?this.text(v.text,v.x+v.width/2,v.y+x,{align:"center",baseline:"top",maxWidth:v.width-x-x}):this.text(v.text,v.x+x,v.y+x,{align:"left",baseline:"top",maxWidth:v.width-x-x})),this.internal.__cell__.lastCell=v,this};t.table=function(v,R,x,N,L){if(r.call(this),!x)throw new Error("No data for PDF table.");var F,j,$,H,W=[],ee=[],se=[],fe={},le={},me=[],ge=[],Re=(L=L||{}).autoSize||!1,we=L.printHeaders!==!1,Ve=L.css&&L.css["font-size"]!==void 0?16*L.css["font-size"]:L.fontSize||12,oe=L.margins||Object.assign({width:this.getPageWidth()},e),_e=typeof L.padding=="number"?L.padding:3,Fe=L.headerBackgroundColor||"#c8c8c8",Ee=L.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=we,this.internal.__cell__.margins=oe,this.internal.__cell__.table_font_size=Ve,this.internal.__cell__.padding=_e,this.internal.__cell__.headerBackgroundColor=Fe,this.internal.__cell__.headerTextColor=Ee,this.setFontSize(Ve),N==null)ee=W=Object.keys(x[0]),se=W.map(function(){return"left"});else if(Array.isArray(N)&&qs(N[0])==="object")for(W=N.map(function(Be){return Be.name}),ee=N.map(function(Be){return Be.prompt||Be.name||""}),se=N.map(function(Be){return Be.align||"left"}),F=0;F<N.length;F+=1)le[N[F].name]=N[F].width*(19.049976/25.4);else Array.isArray(N)&&typeof N[0]=="string"&&(ee=W=N,se=W.map(function(){return"left"}));if(Re||Array.isArray(N)&&typeof N[0]=="string")for(F=0;F<W.length;F+=1){for(fe[H=W[F]]=x.map(function(Be){return Be[H]}),this.setFont(void 0,"bold"),me.push(this.getTextDimensions(ee[F],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),j=fe[H],this.setFont(void 0,"normal"),$=0;$<j.length;$+=1)me.push(this.getTextDimensions(j[$],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);le[H]=Math.max.apply(null,me)+_e+_e,me=[]}if(we){var ze={};for(F=0;F<W.length;F+=1)ze[W[F]]={},ze[W[F]].text=ee[F],ze[W[F]].align=se[F];var Se=n.call(this,ze,le);ge=W.map(function(Be){return new l(v,R,le[Be],Se,ze[Be].text,void 0,ze[Be].align)}),this.setTableHeaderRow(ge),this.printHeaderRow(1,!1)}var je=N.reduce(function(Be,qe){return Be[qe.name]=qe.align,Be},{});for(F=0;F<x.length;F+=1){"rowStart"in L&&L.rowStart instanceof Function&&L.rowStart({row:F,data:x[F]},this);var Ue=n.call(this,x[F],le);for($=0;$<W.length;$+=1){var $e=x[F][W[$]];"cellStart"in L&&L.cellStart instanceof Function&&L.cellStart({row:F,col:$,data:$e},this),c.call(this,new l(v,R,le[W[$]],Ue,$e,F+2,je[W[$]]))}}return this.internal.__cell__.table_x=v,this.internal.__cell__.table_y=R,this};var n=function(v,R){var x=this.internal.__cell__.padding,N=this.internal.__cell__.table_font_size,L=this.internal.scaleFactor;return Object.keys(v).map(function(F){var j=v[F];return this.splitTextToSize(j.hasOwnProperty("text")?j.text:j,R[F]-x-x)},this).map(function(F){return this.getLineHeightFactor()*F.length*N/L+x+x},this).reduce(function(F,j){return Math.max(F,j)},0)};t.setTableHeaderRow=function(v){r.call(this),this.internal.__cell__.tableHeaderRow=v},t.printHeaderRow=function(v,R){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var x;if(a=!0,typeof this.internal.__cell__.headerFunction=="function"){var N=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(N[0],N[1],N[2],N[3],void 0,-1)}this.setFont(void 0,"bold");for(var L=[],F=0;F<this.internal.__cell__.tableHeaderRow.length;F+=1){x=this.internal.__cell__.tableHeaderRow[F].clone(),R&&(x.y=this.internal.__cell__.margins.top||0,L.push(x)),x.lineNumber=v;var j=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,x),this.setTextColor(j)}L.length>0&&this.setTableHeaderRow(L),this.setFont(void 0,"normal"),a=!1}}(Wn.API);var Nte={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Ote=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],t3=Ete(Ote),Vte=[100,200,300,400,500,600,700,800,900],xOe=Ete(Vte);function a3(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),a=function(l){return Nte[l=l||"normal"]?l:"normal"}(t.style),r=function(l){if(!l)return 400;if(typeof l=="number")return l>=100&&l<=900&&l%100==0?l:400;if(/^\d00$/.test(l))return parseInt(l);switch(l){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(l){return typeof t3[l=l||"normal"]=="number"?l:"normal"}(t.stretch);return{family:e,style:a,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,a,r].join(" ")}}}function Wq(t,e,a,r){var i;for(i=a;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=a;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var POe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Yq={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Xq(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function EOe(t,e,a){for(var r=(a=a||{}).defaultFontFamily||"times",i=Object.assign({},POe,a.genericFontFamilies||{}),l=null,c=null,n=0;n<e.length;++n)if(i[(l=a3(e[n])).family]&&(l.family=i[l.family]),t.hasOwnProperty(l.family)){c=t[l.family];break}if(!(c=c||t[r]))throw new Error("Could not find a font-family for the rule '"+Xq(l)+"' and default family '"+r+"'.");if(c=function(v,R){if(R[v])return R[v];var x=t3[v],N=x<=t3.normal?-1:1,L=Wq(R,Ote,x,N);if(!L)throw new Error("Could not find a matching font-stretch value for "+v);return L}(l.stretch,c),c=function(v,R){if(R[v])return R[v];for(var x=Nte[v],N=0;N<x.length;++N)if(R[x[N]])return R[x[N]];throw new Error("Could not find a matching font-style for "+v)}(l.style,c),!(c=function(v,R){if(R[v])return R[v];if(v===400&&R[500])return R[500];if(v===500&&R[400])return R[400];var x=xOe[v],N=Wq(R,Vte,x,v<400?-1:1);if(!N)throw new Error("Could not find a matching font-weight for value "+v);return N}(l.weight,c)))throw new Error("Failed to resolve a font for the rule '"+Xq(l)+"'.");return c}function Jq(t){return t.trimLeft()}function NOe(t,e){for(var a=0;a<t.length;){if(t.charAt(a)===e)return[t.substring(0,a),t.substring(a+1)];a+=1}return null}function OOe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var ob,Qq,eH,wD=["times"];(function(t){var e,a,r,i,l,c,n,v,R,x=function(be){return be=be||{},this.isStrokeTransparent=be.isStrokeTransparent||!1,this.strokeOpacity=be.strokeOpacity||1,this.strokeStyle=be.strokeStyle||"#000000",this.fillStyle=be.fillStyle||"#000000",this.isFillTransparent=be.isFillTransparent||!1,this.fillOpacity=be.fillOpacity||1,this.font=be.font||"10px sans-serif",this.textBaseline=be.textBaseline||"alphabetic",this.textAlign=be.textAlign||"left",this.lineWidth=be.lineWidth||1,this.lineJoin=be.lineJoin||"miter",this.lineCap=be.lineCap||"butt",this.path=be.path||[],this.transform=be.transform!==void 0?be.transform.clone():new v,this.globalCompositeOperation=be.globalCompositeOperation||"normal",this.globalAlpha=be.globalAlpha||1,this.clip_path=be.clip_path||[],this.currentPoint=be.currentPoint||new c,this.miterLimit=be.miterLimit||10,this.lastPoint=be.lastPoint||new c,this.lineDashOffset=be.lineDashOffset||0,this.lineDash=be.lineDash||[],this.margin=be.margin||[0,0,0,0],this.prevPageLastElemOffset=be.prevPageLastElemOffset||0,this.ignoreClearRect=typeof be.ignoreClearRect!="boolean"||be.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new N(this),e=this.internal.f2,a=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,c=this.internal.Point,n=this.internal.Rectangle,v=this.internal.Matrix,R=new x}]);var N=function(be){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Te=be;Object.defineProperty(this,"pdf",{get:function(){return Te}});var ke=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ke},set:function($t){ke=!!$t}});var Ge=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Ge},set:function($t){Ge=!!$t}});var at=0;Object.defineProperty(this,"posX",{get:function(){return at},set:function($t){isNaN($t)||(at=$t)}});var rt=0;Object.defineProperty(this,"posY",{get:function(){return rt},set:function($t){isNaN($t)||(rt=$t)}}),Object.defineProperty(this,"margin",{get:function(){return R.margin},set:function($t){var wt;typeof $t=="number"?wt=[$t,$t,$t,$t]:((wt=new Array(4))[0]=$t[0],wt[1]=$t.length>=2?$t[1]:wt[0],wt[2]=$t.length>=3?$t[2]:wt[0],wt[3]=$t.length>=4?$t[3]:wt[1]),R.margin=wt}});var lt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return lt},set:function($t){lt=$t}});var ot=0;Object.defineProperty(this,"lastBreak",{get:function(){return ot},set:function($t){ot=$t}});var ve=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ve},set:function($t){ve=$t}}),Object.defineProperty(this,"ctx",{get:function(){return R},set:function($t){$t instanceof x&&(R=$t)}}),Object.defineProperty(this,"path",{get:function(){return R.path},set:function($t){R.path=$t}});var Vt=[];Object.defineProperty(this,"ctxStack",{get:function(){return Vt},set:function($t){Vt=$t}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function($t){var wt;wt=L($t),this.ctx.fillStyle=wt.style,this.ctx.isFillTransparent=wt.a===0,this.ctx.fillOpacity=wt.a,this.pdf.setFillColor(wt.r,wt.g,wt.b,{a:wt.a}),this.pdf.setTextColor(wt.r,wt.g,wt.b,{a:wt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function($t){var wt=L($t);this.ctx.strokeStyle=wt.style,this.ctx.isStrokeTransparent=wt.a===0,this.ctx.strokeOpacity=wt.a,wt.a===0?this.pdf.setDrawColor(255,255,255):(wt.a,this.pdf.setDrawColor(wt.r,wt.g,wt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function($t){["butt","round","square"].indexOf($t)!==-1&&(this.ctx.lineCap=$t,this.pdf.setLineCap($t))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function($t){isNaN($t)||(this.ctx.lineWidth=$t,this.pdf.setLineWidth($t))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function($t){["bevel","round","miter"].indexOf($t)!==-1&&(this.ctx.lineJoin=$t,this.pdf.setLineJoin($t))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function($t){isNaN($t)||(this.ctx.miterLimit=$t,this.pdf.setMiterLimit($t))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function($t){this.ctx.textBaseline=$t}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function($t){["right","end","center","left","start"].indexOf($t)!==-1&&(this.ctx.textAlign=$t)}});var Bt=null;function wa($t,wt){if(Bt===null){var hr=function(ba){var Pa=[];return Object.keys(ba).forEach(function(Ja){ba[Ja].forEach(function(or){var lr=null;switch(or){case"bold":lr={family:Ja,weight:"bold"};break;case"italic":lr={family:Ja,style:"italic"};break;case"bolditalic":lr={family:Ja,weight:"bold",style:"italic"};break;case"":case"normal":lr={family:Ja}}lr!==null&&(lr.ref={name:Ja,style:or},Pa.push(lr))})}),Pa}($t.getFontList());Bt=function(ba){for(var Pa={},Ja=0;Ja<ba.length;++Ja){var or=a3(ba[Ja]),lr=or.family,Tr=or.stretch,ka=or.style,kr=or.weight;Pa[lr]=Pa[lr]||{},Pa[lr][Tr]=Pa[lr][Tr]||{},Pa[lr][Tr][ka]=Pa[lr][Tr][ka]||{},Pa[lr][Tr][ka][kr]=or}return Pa}(hr.concat(wt))}return Bt}var It=null;Object.defineProperty(this,"fontFaces",{get:function(){return It},set:function($t){Bt=null,It=$t}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function($t){var wt;if(this.ctx.font=$t,(wt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec($t))!==null){var hr=wt[1];wt[2];var ba=wt[3],Pa=wt[4];wt[5];var Ja=wt[6],or=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Pa)[2];Pa=Math.floor(or==="px"?parseFloat(Pa)*this.pdf.internal.scaleFactor:or==="em"?parseFloat(Pa)*this.pdf.getFontSize():parseFloat(Pa)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Pa);var lr=function(va){var $a,la,Ya=[],yr=va.trim();if(yr==="")return wD;if(yr in Yq)return[Yq[yr]];for(;yr!=="";){switch(la=null,$a=(yr=Jq(yr)).charAt(0)){case'"':case"'":la=NOe(yr.substring(1),$a);break;default:la=OOe(yr)}if(la===null||(Ya.push(la[0]),(yr=Jq(la[1]))!==""&&yr.charAt(0)!==","))return wD;yr=yr.replace(/^,/,"")}return Ya}(Ja);if(this.fontFaces){var Tr=EOe(wa(this.pdf,this.fontFaces),lr.map(function(va){return{family:va,stretch:"normal",weight:ba,style:hr}}));this.pdf.setFont(Tr.ref.name,Tr.ref.style)}else{var ka="";(ba==="bold"||parseInt(ba,10)>=700||hr==="bold")&&(ka="bold"),hr==="italic"&&(ka+="italic"),ka.length===0&&(ka="normal");for(var kr="",nn={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},wn=0;wn<lr.length;wn++){if(this.pdf.internal.getFont(lr[wn],ka,{noFallback:!0,disableWarning:!0})!==void 0){kr=lr[wn];break}if(ka==="bolditalic"&&this.pdf.internal.getFont(lr[wn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)kr=lr[wn],ka="bold";else if(this.pdf.internal.getFont(lr[wn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){kr=lr[wn],ka="normal";break}}if(kr===""){for(var un=0;un<lr.length;un++)if(nn[lr[un]]){kr=nn[lr[un]];break}}kr=kr===""?"Times":kr,this.pdf.setFont(kr,ka)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function($t){this.ctx.globalCompositeOperation=$t}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function($t){this.ctx.globalAlpha=$t}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function($t){this.ctx.lineDashOffset=$t,qe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function($t){this.ctx.lineDash=$t,qe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function($t){this.ctx.ignoreClearRect=!!$t}})};N.prototype.setLineDash=function(be){this.lineDash=be},N.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},N.prototype.fill=function(){fe.call(this,"fill",!1)},N.prototype.stroke=function(){fe.call(this,"stroke",!1)},N.prototype.beginPath=function(){this.path=[{type:"begin"}]},N.prototype.moveTo=function(be,Te){if(isNaN(be)||isNaN(Te))throw fo.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ke=this.ctx.transform.applyToPoint(new c(be,Te));this.path.push({type:"mt",x:ke.x,y:ke.y}),this.ctx.lastPoint=new c(be,Te)},N.prototype.closePath=function(){var be=new c(0,0),Te=0;for(Te=this.path.length-1;Te!==-1;Te--)if(this.path[Te].type==="begin"&&qs(this.path[Te+1])==="object"&&typeof this.path[Te+1].x=="number"){be=new c(this.path[Te+1].x,this.path[Te+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(be.x,be.y)},N.prototype.lineTo=function(be,Te){if(isNaN(be)||isNaN(Te))throw fo.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ke=this.ctx.transform.applyToPoint(new c(be,Te));this.path.push({type:"lt",x:ke.x,y:ke.y}),this.ctx.lastPoint=new c(ke.x,ke.y)},N.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),fe.call(this,null,!0)},N.prototype.quadraticCurveTo=function(be,Te,ke,Ge){if(isNaN(ke)||isNaN(Ge)||isNaN(be)||isNaN(Te))throw fo.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var at=this.ctx.transform.applyToPoint(new c(ke,Ge)),rt=this.ctx.transform.applyToPoint(new c(be,Te));this.path.push({type:"qct",x1:rt.x,y1:rt.y,x:at.x,y:at.y}),this.ctx.lastPoint=new c(at.x,at.y)},N.prototype.bezierCurveTo=function(be,Te,ke,Ge,at,rt){if(isNaN(at)||isNaN(rt)||isNaN(be)||isNaN(Te)||isNaN(ke)||isNaN(Ge))throw fo.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var lt=this.ctx.transform.applyToPoint(new c(at,rt)),ot=this.ctx.transform.applyToPoint(new c(be,Te)),ve=this.ctx.transform.applyToPoint(new c(ke,Ge));this.path.push({type:"bct",x1:ot.x,y1:ot.y,x2:ve.x,y2:ve.y,x:lt.x,y:lt.y}),this.ctx.lastPoint=new c(lt.x,lt.y)},N.prototype.arc=function(be,Te,ke,Ge,at,rt){if(isNaN(be)||isNaN(Te)||isNaN(ke)||isNaN(Ge)||isNaN(at))throw fo.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(rt=!!rt,!this.ctx.transform.isIdentity){var lt=this.ctx.transform.applyToPoint(new c(be,Te));be=lt.x,Te=lt.y;var ot=this.ctx.transform.applyToPoint(new c(0,ke)),ve=this.ctx.transform.applyToPoint(new c(0,0));ke=Math.sqrt(Math.pow(ot.x-ve.x,2)+Math.pow(ot.y-ve.y,2))}Math.abs(at-Ge)>=2*Math.PI&&(Ge=0,at=2*Math.PI),this.path.push({type:"arc",x:be,y:Te,radius:ke,startAngle:Ge,endAngle:at,counterclockwise:rt})},N.prototype.arcTo=function(be,Te,ke,Ge,at){throw new Error("arcTo not implemented.")},N.prototype.rect=function(be,Te,ke,Ge){if(isNaN(be)||isNaN(Te)||isNaN(ke)||isNaN(Ge))throw fo.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(be,Te),this.lineTo(be+ke,Te),this.lineTo(be+ke,Te+Ge),this.lineTo(be,Te+Ge),this.lineTo(be,Te),this.lineTo(be+ke,Te),this.lineTo(be,Te)},N.prototype.fillRect=function(be,Te,ke,Ge){if(isNaN(be)||isNaN(Te)||isNaN(ke)||isNaN(Ge))throw fo.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!F.call(this)){var at={};this.lineCap!=="butt"&&(at.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(at.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(be,Te,ke,Ge),this.fill(),at.hasOwnProperty("lineCap")&&(this.lineCap=at.lineCap),at.hasOwnProperty("lineJoin")&&(this.lineJoin=at.lineJoin)}},N.prototype.strokeRect=function(be,Te,ke,Ge){if(isNaN(be)||isNaN(Te)||isNaN(ke)||isNaN(Ge))throw fo.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");j.call(this)||(this.beginPath(),this.rect(be,Te,ke,Ge),this.stroke())},N.prototype.clearRect=function(be,Te,ke,Ge){if(isNaN(be)||isNaN(Te)||isNaN(ke)||isNaN(Ge))throw fo.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(be,Te,ke,Ge))},N.prototype.save=function(be){be=typeof be!="boolean"||be;for(var Te=this.pdf.internal.getCurrentPageInfo().pageNumber,ke=0;ke<this.pdf.internal.getNumberOfPages();ke++)this.pdf.setPage(ke+1),this.pdf.internal.out("q");if(this.pdf.setPage(Te),be){this.ctx.fontSize=this.pdf.internal.getFontSize();var Ge=new x(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Ge}},N.prototype.restore=function(be){be=typeof be!="boolean"||be;for(var Te=this.pdf.internal.getCurrentPageInfo().pageNumber,ke=0;ke<this.pdf.internal.getNumberOfPages();ke++)this.pdf.setPage(ke+1),this.pdf.internal.out("Q");this.pdf.setPage(Te),be&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},N.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var L=function(be){var Te,ke,Ge,at;if(be.isCanvasGradient===!0&&(be=be.getColor()),!be)return{r:0,g:0,b:0,a:0,style:be};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(be))Te=0,ke=0,Ge=0,at=0;else{var rt=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(be);if(rt!==null)Te=parseInt(rt[1]),ke=parseInt(rt[2]),Ge=parseInt(rt[3]),at=1;else if((rt=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(be))!==null)Te=parseInt(rt[1]),ke=parseInt(rt[2]),Ge=parseInt(rt[3]),at=parseFloat(rt[4]);else{if(at=1,typeof be=="string"&&be.charAt(0)!=="#"){var lt=new Tte(be);be=lt.ok?lt.toHex():"#000000"}be.length===4?(Te=be.substring(1,2),Te+=Te,ke=be.substring(2,3),ke+=ke,Ge=be.substring(3,4),Ge+=Ge):(Te=be.substring(1,3),ke=be.substring(3,5),Ge=be.substring(5,7)),Te=parseInt(Te,16),ke=parseInt(ke,16),Ge=parseInt(Ge,16)}}return{r:Te,g:ke,b:Ge,a:at,style:be}},F=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},j=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};N.prototype.fillText=function(be,Te,ke,Ge){if(isNaN(Te)||isNaN(ke)||typeof be!="string")throw fo.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Ge=isNaN(Ge)?void 0:Ge,!F.call(this)){var at=Ue(this.ctx.transform.rotation),rt=this.ctx.transform.scaleX;_e.call(this,{text:be,x:Te,y:ke,scale:rt,angle:at,align:this.textAlign,maxWidth:Ge})}},N.prototype.strokeText=function(be,Te,ke,Ge){if(isNaN(Te)||isNaN(ke)||typeof be!="string")throw fo.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!j.call(this)){Ge=isNaN(Ge)?void 0:Ge;var at=Ue(this.ctx.transform.rotation),rt=this.ctx.transform.scaleX;_e.call(this,{text:be,x:Te,y:ke,scale:rt,renderingMode:"stroke",angle:at,align:this.textAlign,maxWidth:Ge})}},N.prototype.measureText=function(be){if(typeof be!="string")throw fo.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Te=this.pdf,ke=this.pdf.internal.scaleFactor,Ge=Te.internal.getFontSize(),at=Te.getStringUnitWidth(be)*Ge/Te.internal.scaleFactor,rt=function(lt){var ot=(lt=lt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ot}}),this};return new rt({width:at*=Math.round(96*ke/72*1e4)/1e4})},N.prototype.scale=function(be,Te){if(isNaN(be)||isNaN(Te))throw fo.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ke=new v(be,0,0,Te,0,0);this.ctx.transform=this.ctx.transform.multiply(ke)},N.prototype.rotate=function(be){if(isNaN(be))throw fo.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Te=new v(Math.cos(be),Math.sin(be),-Math.sin(be),Math.cos(be),0,0);this.ctx.transform=this.ctx.transform.multiply(Te)},N.prototype.translate=function(be,Te){if(isNaN(be)||isNaN(Te))throw fo.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ke=new v(1,0,0,1,be,Te);this.ctx.transform=this.ctx.transform.multiply(ke)},N.prototype.transform=function(be,Te,ke,Ge,at,rt){if(isNaN(be)||isNaN(Te)||isNaN(ke)||isNaN(Ge)||isNaN(at)||isNaN(rt))throw fo.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var lt=new v(be,Te,ke,Ge,at,rt);this.ctx.transform=this.ctx.transform.multiply(lt)},N.prototype.setTransform=function(be,Te,ke,Ge,at,rt){be=isNaN(be)?1:be,Te=isNaN(Te)?0:Te,ke=isNaN(ke)?0:ke,Ge=isNaN(Ge)?1:Ge,at=isNaN(at)?0:at,rt=isNaN(rt)?0:rt,this.ctx.transform=new v(be,Te,ke,Ge,at,rt)};var $=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};N.prototype.drawImage=function(be,Te,ke,Ge,at,rt,lt,ot,ve){var Vt=this.pdf.getImageProperties(be),Bt=1,wa=1,It=1,$t=1;Ge!==void 0&&ot!==void 0&&(It=ot/Ge,$t=ve/at,Bt=Vt.width/Ge*ot/Ge,wa=Vt.height/at*ve/at),rt===void 0&&(rt=Te,lt=ke,Te=0,ke=0),Ge!==void 0&&ot===void 0&&(ot=Ge,ve=at),Ge===void 0&&ot===void 0&&(ot=Vt.width,ve=Vt.height);for(var wt,hr=this.ctx.transform.decompose(),ba=Ue(hr.rotate.shx),Pa=new v,Ja=(Pa=(Pa=(Pa=Pa.multiply(hr.translate)).multiply(hr.skew)).multiply(hr.scale)).applyToRectangle(new n(rt-Te*It,lt-ke*$t,Ge*Bt,at*wa)),or=H.call(this,Ja),lr=[],Tr=0;Tr<or.length;Tr+=1)lr.indexOf(or[Tr])===-1&&lr.push(or[Tr]);if(se(lr),this.autoPaging)for(var ka=lr[0],kr=lr[lr.length-1],nn=ka;nn<kr+1;nn++){this.pdf.setPage(nn);var wn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],un=nn===1?this.posY+this.margin[0]:this.margin[0],va=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$a=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],la=nn===1?0:va+(nn-2)*$a;if(this.ctx.clip_path.length!==0){var Ya=this.path;wt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ee(wt,this.posX+this.margin[3],-la+un+this.ctx.prevPageLastElemOffset),le.call(this,"fill",!0),this.path=Ya}var yr=JSON.parse(JSON.stringify(Ja));yr=ee([yr],this.posX+this.margin[3],-la+un+this.ctx.prevPageLastElemOffset)[0];var Tn=(nn>ka||nn<kr)&&$.call(this);Tn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],wn,$a,null).clip().discardPath()),this.pdf.addImage(be,"JPEG",yr.x,yr.y,yr.w,yr.h,null,null,ba),Tn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(be,"JPEG",Ja.x,Ja.y,Ja.w,Ja.h,null,null,ba)};var H=function(be,Te,ke){var Ge=[];Te=Te||this.pdf.internal.pageSize.width,ke=ke||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var at=this.posY+this.ctx.prevPageLastElemOffset;switch(be.type){default:case"mt":case"lt":Ge.push(Math.floor((be.y+at)/ke)+1);break;case"arc":Ge.push(Math.floor((be.y+at-be.radius)/ke)+1),Ge.push(Math.floor((be.y+at+be.radius)/ke)+1);break;case"qct":var rt=$e(this.ctx.lastPoint.x,this.ctx.lastPoint.y,be.x1,be.y1,be.x,be.y);Ge.push(Math.floor((rt.y+at)/ke)+1),Ge.push(Math.floor((rt.y+rt.h+at)/ke)+1);break;case"bct":var lt=Be(this.ctx.lastPoint.x,this.ctx.lastPoint.y,be.x1,be.y1,be.x2,be.y2,be.x,be.y);Ge.push(Math.floor((lt.y+at)/ke)+1),Ge.push(Math.floor((lt.y+lt.h+at)/ke)+1);break;case"rect":Ge.push(Math.floor((be.y+at)/ke)+1),Ge.push(Math.floor((be.y+be.h+at)/ke)+1)}for(var ot=0;ot<Ge.length;ot+=1)for(;this.pdf.internal.getNumberOfPages()<Ge[ot];)W.call(this);return Ge},W=function(){var be=this.fillStyle,Te=this.strokeStyle,ke=this.font,Ge=this.lineCap,at=this.lineWidth,rt=this.lineJoin;this.pdf.addPage(),this.fillStyle=be,this.strokeStyle=Te,this.font=ke,this.lineCap=Ge,this.lineWidth=at,this.lineJoin=rt},ee=function(be,Te,ke){for(var Ge=0;Ge<be.length;Ge++)switch(be[Ge].type){case"bct":be[Ge].x2+=Te,be[Ge].y2+=ke;case"qct":be[Ge].x1+=Te,be[Ge].y1+=ke;case"mt":case"lt":case"arc":default:be[Ge].x+=Te,be[Ge].y+=ke}return be},se=function(be){return be.sort(function(Te,ke){return Te-ke})},fe=function(be,Te){for(var ke,Ge,at=this.fillStyle,rt=this.strokeStyle,lt=this.lineCap,ot=this.lineWidth,ve=Math.abs(ot*this.ctx.transform.scaleX),Vt=this.lineJoin,Bt=JSON.parse(JSON.stringify(this.path)),wa=JSON.parse(JSON.stringify(this.path)),It=[],$t=0;$t<wa.length;$t++)if(wa[$t].x!==void 0)for(var wt=H.call(this,wa[$t]),hr=0;hr<wt.length;hr+=1)It.indexOf(wt[hr])===-1&&It.push(wt[hr]);for(var ba=0;ba<It.length;ba++)for(;this.pdf.internal.getNumberOfPages()<It[ba];)W.call(this);if(se(It),this.autoPaging)for(var Pa=It[0],Ja=It[It.length-1],or=Pa;or<Ja+1;or++){this.pdf.setPage(or),this.fillStyle=at,this.strokeStyle=rt,this.lineCap=lt,this.lineWidth=ve,this.lineJoin=Vt;var lr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Tr=or===1?this.posY+this.margin[0]:this.margin[0],ka=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],kr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],nn=or===1?0:ka+(or-2)*kr;if(this.ctx.clip_path.length!==0){var wn=this.path;ke=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ee(ke,this.posX+this.margin[3],-nn+Tr+this.ctx.prevPageLastElemOffset),le.call(this,be,!0),this.path=wn}if(Ge=JSON.parse(JSON.stringify(Bt)),this.path=ee(Ge,this.posX+this.margin[3],-nn+Tr+this.ctx.prevPageLastElemOffset),Te===!1||or===0){var un=(or>Pa||or<Ja)&&$.call(this);un&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],lr,kr,null).clip().discardPath()),le.call(this,be,Te),un&&this.pdf.restoreGraphicsState()}this.lineWidth=ot}else this.lineWidth=ve,le.call(this,be,Te),this.lineWidth=ot;this.path=Bt},le=function(be,Te){if((be!=="stroke"||Te||!j.call(this))&&(be==="stroke"||Te||!F.call(this))){for(var ke,Ge,at=[],rt=this.path,lt=0;lt<rt.length;lt++){var ot=rt[lt];switch(ot.type){case"begin":at.push({begin:!0});break;case"close":at.push({close:!0});break;case"mt":at.push({start:ot,deltas:[],abs:[]});break;case"lt":var ve=at.length;if(rt[lt-1]&&!isNaN(rt[lt-1].x)&&(ke=[ot.x-rt[lt-1].x,ot.y-rt[lt-1].y],ve>0)){for(;ve>=0;ve--)if(at[ve-1].close!==!0&&at[ve-1].begin!==!0){at[ve-1].deltas.push(ke),at[ve-1].abs.push(ot);break}}break;case"bct":ke=[ot.x1-rt[lt-1].x,ot.y1-rt[lt-1].y,ot.x2-rt[lt-1].x,ot.y2-rt[lt-1].y,ot.x-rt[lt-1].x,ot.y-rt[lt-1].y],at[at.length-1].deltas.push(ke);break;case"qct":var Vt=rt[lt-1].x+2/3*(ot.x1-rt[lt-1].x),Bt=rt[lt-1].y+2/3*(ot.y1-rt[lt-1].y),wa=ot.x+2/3*(ot.x1-ot.x),It=ot.y+2/3*(ot.y1-ot.y),$t=ot.x,wt=ot.y;ke=[Vt-rt[lt-1].x,Bt-rt[lt-1].y,wa-rt[lt-1].x,It-rt[lt-1].y,$t-rt[lt-1].x,wt-rt[lt-1].y],at[at.length-1].deltas.push(ke);break;case"arc":at.push({deltas:[],abs:[],arc:!0}),Array.isArray(at[at.length-1].abs)&&at[at.length-1].abs.push(ot)}}Ge=Te?null:be==="stroke"?"stroke":"fill";for(var hr=!1,ba=0;ba<at.length;ba++)if(at[ba].arc)for(var Pa=at[ba].abs,Ja=0;Ja<Pa.length;Ja++){var or=Pa[Ja];or.type==="arc"?Re.call(this,or.x,or.y,or.radius,or.startAngle,or.endAngle,or.counterclockwise,void 0,Te,!hr):Fe.call(this,or.x,or.y),hr=!0}else if(at[ba].close===!0)this.pdf.internal.out("h"),hr=!1;else if(at[ba].begin!==!0){var lr=at[ba].start.x,Tr=at[ba].start.y;Ee.call(this,at[ba].deltas,lr,Tr),hr=!0}Ge&&we.call(this,Ge),Te&&Ve.call(this)}},me=function(be){var Te=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ke=Te*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return be-ke;case"top":return be+Te-ke;case"hanging":return be+Te-2*ke;case"middle":return be+Te/2-ke;case"ideographic":return be;case"alphabetic":default:return be}},ge=function(be){return be+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};N.prototype.createLinearGradient=function(){var be=function(){};return be.colorStops=[],be.addColorStop=function(Te,ke){this.colorStops.push([Te,ke])},be.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},be.isCanvasGradient=!0,be},N.prototype.createPattern=function(){return this.createLinearGradient()},N.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Re=function(be,Te,ke,Ge,at,rt,lt,ot,ve){for(var Vt=Se.call(this,ke,Ge,at,rt),Bt=0;Bt<Vt.length;Bt++){var wa=Vt[Bt];Bt===0&&(ve?oe.call(this,wa.x1+be,wa.y1+Te):Fe.call(this,wa.x1+be,wa.y1+Te)),ze.call(this,be,Te,wa.x2,wa.y2,wa.x3,wa.y3,wa.x4,wa.y4)}ot?Ve.call(this):we.call(this,lt)},we=function(be){switch(be){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Ve=function(){this.pdf.clip(),this.pdf.discardPath()},oe=function(be,Te){this.pdf.internal.out(a(be)+" "+r(Te)+" m")},_e=function(be){var Te;switch(be.align){case"right":case"end":Te="right";break;case"center":Te="center";break;case"left":case"start":default:Te="left"}var ke=this.pdf.getTextDimensions(be.text),Ge=me.call(this,be.y),at=ge.call(this,Ge)-ke.h,rt=this.ctx.transform.applyToPoint(new c(be.x,Ge)),lt=this.ctx.transform.decompose(),ot=new v;ot=(ot=(ot=ot.multiply(lt.translate)).multiply(lt.skew)).multiply(lt.scale);for(var ve,Vt,Bt,wa=this.ctx.transform.applyToRectangle(new n(be.x,Ge,ke.w,ke.h)),It=ot.applyToRectangle(new n(be.x,at,ke.w,ke.h)),$t=H.call(this,It),wt=[],hr=0;hr<$t.length;hr+=1)wt.indexOf($t[hr])===-1&&wt.push($t[hr]);if(se(wt),this.autoPaging)for(var ba=wt[0],Pa=wt[wt.length-1],Ja=ba;Ja<Pa+1;Ja++){this.pdf.setPage(Ja);var or=Ja===1?this.posY+this.margin[0]:this.margin[0],lr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Tr=this.pdf.internal.pageSize.height-this.margin[2],ka=Tr-this.margin[0],kr=this.pdf.internal.pageSize.width-this.margin[1],nn=kr-this.margin[3],wn=Ja===1?0:lr+(Ja-2)*ka;if(this.ctx.clip_path.length!==0){var un=this.path;ve=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ee(ve,this.posX+this.margin[3],-1*wn+or),le.call(this,"fill",!0),this.path=un}var va=ee([JSON.parse(JSON.stringify(It))],this.posX+this.margin[3],-wn+or+this.ctx.prevPageLastElemOffset)[0];be.scale>=.01&&(Vt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Vt*be.scale),Bt=this.lineWidth,this.lineWidth=Bt*be.scale);var $a=this.autoPaging!=="text";if($a||va.y+va.h<=Tr){if($a||va.y>=or&&va.x<=kr){var la=$a?be.text:this.pdf.splitTextToSize(be.text,be.maxWidth||kr-va.x)[0],Ya=ee([JSON.parse(JSON.stringify(wa))],this.posX+this.margin[3],-wn+or+this.ctx.prevPageLastElemOffset)[0],yr=$a&&(Ja>ba||Ja<Pa)&&$.call(this);yr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],nn,ka,null).clip().discardPath()),this.pdf.text(la,Ya.x,Ya.y,{angle:be.angle,align:Te,renderingMode:be.renderingMode}),yr&&this.pdf.restoreGraphicsState()}}else va.y<Tr&&(this.ctx.prevPageLastElemOffset+=Tr-va.y);be.scale>=.01&&(this.pdf.setFontSize(Vt),this.lineWidth=Bt)}else be.scale>=.01&&(Vt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Vt*be.scale),Bt=this.lineWidth,this.lineWidth=Bt*be.scale),this.pdf.text(be.text,rt.x+this.posX,rt.y+this.posY,{angle:be.angle,align:Te,renderingMode:be.renderingMode,maxWidth:be.maxWidth}),be.scale>=.01&&(this.pdf.setFontSize(Vt),this.lineWidth=Bt)},Fe=function(be,Te,ke,Ge){ke=ke||0,Ge=Ge||0,this.pdf.internal.out(a(be+ke)+" "+r(Te+Ge)+" l")},Ee=function(be,Te,ke){return this.pdf.lines(be,Te,ke,null,null)},ze=function(be,Te,ke,Ge,at,rt,lt,ot){this.pdf.internal.out([e(i(ke+be)),e(l(Ge+Te)),e(i(at+be)),e(l(rt+Te)),e(i(lt+be)),e(l(ot+Te)),"c"].join(" "))},Se=function(be,Te,ke,Ge){for(var at=2*Math.PI,rt=Math.PI/2;Te>ke;)Te-=at;var lt=Math.abs(ke-Te);lt<at&&Ge&&(lt=at-lt);for(var ot=[],ve=Ge?-1:1,Vt=Te;lt>1e-5;){var Bt=Vt+ve*Math.min(lt,rt);ot.push(je.call(this,be,Vt,Bt)),lt-=Math.abs(Bt-Vt),Vt=Bt}return ot},je=function(be,Te,ke){var Ge=(ke-Te)/2,at=be*Math.cos(Ge),rt=be*Math.sin(Ge),lt=at,ot=-rt,ve=lt*lt+ot*ot,Vt=ve+lt*at+ot*rt,Bt=4/3*(Math.sqrt(2*ve*Vt)-Vt)/(lt*rt-ot*at),wa=lt-Bt*ot,It=ot+Bt*lt,$t=wa,wt=-It,hr=Ge+Te,ba=Math.cos(hr),Pa=Math.sin(hr);return{x1:be*Math.cos(Te),y1:be*Math.sin(Te),x2:wa*ba-It*Pa,y2:wa*Pa+It*ba,x3:$t*ba-wt*Pa,y3:$t*Pa+wt*ba,x4:be*Math.cos(ke),y4:be*Math.sin(ke)}},Ue=function(be){return 180*be/Math.PI},$e=function(be,Te,ke,Ge,at,rt){var lt=be+.5*(ke-be),ot=Te+.5*(Ge-Te),ve=at+.5*(ke-at),Vt=rt+.5*(Ge-rt),Bt=Math.min(be,at,lt,ve),wa=Math.max(be,at,lt,ve),It=Math.min(Te,rt,ot,Vt),$t=Math.max(Te,rt,ot,Vt);return new n(Bt,It,wa-Bt,$t-It)},Be=function(be,Te,ke,Ge,at,rt,lt,ot){var ve,Vt,Bt,wa,It,$t,wt,hr,ba,Pa,Ja,or,lr,Tr,ka=ke-be,kr=Ge-Te,nn=at-ke,wn=rt-Ge,un=lt-at,va=ot-rt;for(Vt=0;Vt<41;Vt++)ba=(wt=(Bt=be+(ve=Vt/40)*ka)+ve*((It=ke+ve*nn)-Bt))+ve*(It+ve*(at+ve*un-It)-wt),Pa=(hr=(wa=Te+ve*kr)+ve*(($t=Ge+ve*wn)-wa))+ve*($t+ve*(rt+ve*va-$t)-hr),Vt==0?(Ja=ba,or=Pa,lr=ba,Tr=Pa):(Ja=Math.min(Ja,ba),or=Math.min(or,Pa),lr=Math.max(lr,ba),Tr=Math.max(Tr,Pa));return new n(Math.round(Ja),Math.round(or),Math.round(lr-Ja),Math.round(Tr-or))},qe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var be,Te,ke=(be=this.ctx.lineDash,Te=this.ctx.lineDashOffset,JSON.stringify({lineDash:be,lineDashOffset:Te}));this.prevLineDash!==ke&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ke)}}})(Wn.API),function(t){var e=function(l){var c,n,v,R,x,N,L,F,j,$;for(n=[],v=0,R=(l+=c="\0\0\0\0".slice(l.length%4||4)).length;R>v;v+=4)(x=(l.charCodeAt(v)<<24)+(l.charCodeAt(v+1)<<16)+(l.charCodeAt(v+2)<<8)+l.charCodeAt(v+3))!==0?(N=(x=((x=((x=((x=(x-($=x%85))/85)-(j=x%85))/85)-(F=x%85))/85)-(L=x%85))/85)%85,n.push(N+33,L+33,F+33,j+33,$+33)):n.push(122);return function(H,W){for(var ee=W;ee>0;ee--)H.pop()}(n,c.length),String.fromCharCode.apply(String,n)+"~>"},a=function(l){var c,n,v,R,x,N=String,L="length",F=255,j="charCodeAt",$="slice",H="replace";for(l[$](-2),l=l[$](0,-2)[H](/\s/g,"")[H]("z","!!!!!"),v=[],R=0,x=(l+=c="uuuuu"[$](l[L]%5||5))[L];x>R;R+=5)n=52200625*(l[j](R)-33)+614125*(l[j](R+1)-33)+7225*(l[j](R+2)-33)+85*(l[j](R+3)-33)+(l[j](R+4)-33),v.push(F&n>>24,F&n>>16,F&n>>8,F&n);return function(W,ee){for(var se=ee;se>0;se--)W.pop()}(v,c[L]),N.fromCharCode.apply(N,v)},r=function(l){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),c.test(l)===!1)return"";for(var n="",v=0;v<l.length;v+=2)n+=String.fromCharCode("0x"+(l[v]+l[v+1]));return n},i=function(l){for(var c=new Uint8Array(l.length),n=l.length;n--;)c[n]=l.charCodeAt(n);return l=(c=YI(c)).reduce(function(v,R){return v+String.fromCharCode(R)},"")};t.processDataByFilters=function(l,c){var n=0,v=l||"",R=[];for(typeof(c=c||[])=="string"&&(c=[c]),n=0;n<c.length;n+=1)switch(c[n]){case"ASCII85Decode":case"/ASCII85Decode":v=a(v),R.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":v=e(v),R.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":v=r(v),R.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":v=v.split("").map(function(x){return("0"+x.charCodeAt().toString(16)).slice(-2)}).join("")+">",R.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":v=i(v),R.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[n]+'" is not implemented')}return{data:v,reverseChain:R.reverse().join(" ")}}}(Wn.API),function(t){t.loadFile=function(e,a,r){return function(i,l,c){l=l!==!1,c=typeof c=="function"?c:function(){};var n=void 0;try{n=function(v,R,x){var N=new XMLHttpRequest,L=0,F=function(j){var $=j.length,H=[],W=String.fromCharCode;for(L=0;L<$;L+=1)H.push(W(255&j.charCodeAt(L)));return H.join("")};if(N.open("GET",v,!R),N.overrideMimeType("text/plain; charset=x-user-defined"),R===!1&&(N.onload=function(){N.status===200?x(F(this.responseText)):x(void 0)}),N.send(null),R&&N.status===200)return F(N.responseText)}(i,l,c)}catch{}return n}(e,a,r)},t.loadImageFile=t.loadFile}(Wn.API),function(t){function e(){return(Qn.html2canvas?Promise.resolve(Qn.html2canvas):zT(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function a(){return(Qn.DOMPurify?Promise.resolve(Qn.DOMPurify):zT(()=>import("./purify.es-Ci5xwkH_.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var r=function(c){var n=qs(c);return n==="undefined"?"undefined":n==="string"||c instanceof String?"string":n==="number"||c instanceof Number?"number":n==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":n==="object"?"object":"unknown"},i=function(c,n){var v=document.createElement(c);for(var R in n.className&&(v.className=n.className),n.innerHTML&&n.dompurify&&(v.innerHTML=n.dompurify.sanitize(n.innerHTML)),n.style)v.style[R]=n.style[R];return v},l=function c(n){var v=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),R=c.convert(Promise.resolve(),v);return R=(R=R.setProgress(1,c,1,[c])).set(n)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(c,n){return c.__proto__=n||l.prototype,c},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(c,n){return this.then(function(){switch(n=n||function(v){switch(r(v)){case"string":return"string";case"element":return v.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(c)){case"string":return this.then(a).then(function(v){return this.set({src:i("div",{innerHTML:c,dompurify:v})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},l.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},n=function v(R,x){for(var N=R.nodeType===3?document.createTextNode(R.nodeValue):R.cloneNode(!1),L=R.firstChild;L;L=L.nextSibling)x!==!0&&L.nodeType===1&&L.nodeName==="SCRIPT"||N.appendChild(v(L,x));return R.nodeType===1&&(R.nodeName==="CANVAS"?(N.width=R.width,N.height=R.height,N.getContext("2d").drawImage(R,0,0)):R.nodeName!=="TEXTAREA"&&R.nodeName!=="SELECT"||(N.value=R.value),N.addEventListener("load",function(){N.scrollTop=R.scrollTop,N.scrollLeft=R.scrollLeft},!0)),N}(this.prop.src,this.opt.html2canvas.javascriptEnabled);n.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(n),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(n){var v=Object.assign({},this.opt.html2canvas);return delete v.onrendered,n(this.prop.container,v)}).then(function(n){(this.opt.html2canvas.onrendered||function(){})(n),this.prop.canvas=n,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(n){var v=this.opt.jsPDF,R=this.opt.fontFaces,x=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,N=Object.assign({async:!0,allowTaint:!0,scale:x,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete N.onrendered,v.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,v.context2d.posX=this.opt.x,v.context2d.posY=this.opt.y,v.context2d.margin=this.opt.margin,v.context2d.fontFaces=R,R)for(var L=0;L<R.length;++L){var F=R[L],j=F.src.find(function($){return $.format==="truetype"});j&&v.addFont(j.url,F.ref.name,F.ref.style)}return N.windowHeight=N.windowHeight||0,N.windowHeight=N.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):N.windowHeight,v.context2d.save(!0),n(this.prop.container,N)}).then(function(n){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(n),this.prop.canvas=n,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(c,n,v){return(v=v||"pdf").toLowerCase()==="img"||v.toLowerCase()==="image"?this.outputImg(c,n):this.outputPdf(c,n)},l.prototype.outputPdf=function(c,n){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,n)})},l.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},l.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(c){if(r(c)!=="object")return this;var n=Object.keys(c||{}).map(function(v){if(v in l.template.prop)return function(){this.prop[v]=c[v]};switch(v){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[v]=c[v]}}},this);return this.then(function(){return this.thenList(n)})},l.prototype.get=function(c,n){return this.then(function(){var v=c in l.template.prop?this.prop[c]:this.opt[c];return n?n(v):v})},l.prototype.setMargin=function(c){return this.then(function(){switch(r(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},l.prototype.setPageSize=function(c){function n(v,R){return Math.floor(v*R/72*96)}return this.then(function(){(c=c||Wn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:n(c.inner.width,c.k),height:n(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},l.prototype.setProgress=function(c,n,v,R){return c!=null&&(this.progress.val=c),n!=null&&(this.progress.state=n),v!=null&&(this.progress.n=v),R!=null&&(this.progress.stack=R),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(c,n,v,R){return this.setProgress(c?this.progress.val+c:null,n||null,v?this.progress.n+v:null,R?this.progress.stack.concat(R):null)},l.prototype.then=function(c,n){var v=this;return this.thenCore(c,n,function(R,x){return v.updateProgress(null,null,1,[R]),Promise.prototype.then.call(this,function(N){return v.updateProgress(null,R),N}).then(R,x).then(function(N){return v.updateProgress(1),N})})},l.prototype.thenCore=function(c,n,v){v=v||Promise.prototype.then,c&&(c=c.bind(this)),n&&(n=n.bind(this));var R=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:l.convert(Object.assign({},this),Promise.prototype),x=v.call(R,c,n);return l.convert(x,this.__proto__)},l.prototype.thenExternal=function(c,n){return Promise.prototype.then.call(this,c,n)},l.prototype.thenList=function(c){var n=this;return c.forEach(function(v){n=n.thenCore(v)}),n},l.prototype.catch=function(c){c&&(c=c.bind(this));var n=Promise.prototype.catch.call(this,c);return l.convert(n,this)},l.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},l.prototype.error=function(c){return this.then(function(){throw new Error(c)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,Wn.getPageSize=function(c,n,v){if(qs(c)==="object"){var R=c;c=R.orientation,n=R.unit||n,v=R.format||v}n=n||"mm",v=v||"a4",c=(""+(c||"P")).toLowerCase();var x,N=(""+v).toLowerCase(),L={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(n){case"pt":x=1;break;case"mm":x=72/25.4;break;case"cm":x=72/2.54;break;case"in":x=72;break;case"px":x=.75;break;case"pc":case"em":x=12;break;case"ex":x=6;break;default:throw"Invalid unit: "+n}var F,j=0,$=0;if(L.hasOwnProperty(N))j=L[N][1]/x,$=L[N][0]/x;else try{j=v[1],$=v[0]}catch{throw new Error("Invalid format: "+v)}if(c==="p"||c==="portrait")c="p",$>j&&(F=$,$=j,j=F);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",j>$&&(F=$,$=j,j=F)}return{width:$,height:j,unit:n,k:x,orientation:c}},t.html=function(c,n){(n=n||{}).callback=n.callback||function(){},n.html2canvas=n.html2canvas||{},n.html2canvas.canvas=n.html2canvas.canvas||this.canvas,n.jsPDF=n.jsPDF||this,n.fontFaces=n.fontFaces?n.fontFaces.map(a3):null;var v=new l(n);return n.worker?v:v.from(c).doCallback()}}(Wn.API),Wn.API.addJS=function(t){return eH=t,this.internal.events.subscribe("postPutResources",function(){ob=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(ob+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Qq=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+eH+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){ob!==void 0&&Qq!==void 0&&this.internal.out("/Names <</JavaScript "+ob+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var a=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=a.outline.render().split(/\r\n/),l=0;l<i.length;l++){var c=i[l],n=r.exec(c);if(n!=null){var v=n[1];a.internal.newObjectDeferredBegin(v,!1)}a.internal.write(c)}if(this.outline.createNamedDestinations){var R=this.internal.pages.length,x=[];for(l=0;l<R;l++){var N=a.internal.newObject();x.push(N);var L=a.internal.getPageInfo(l+1);a.internal.write("<< /D["+L.objId+" 0 R /XYZ null null null]>> endobj")}var F=a.internal.newObject();for(a.internal.write("<< /Names [ "),l=0;l<x.length;l++)a.internal.write("(page_"+(l+1)+")"+x[l]+" 0 R");a.internal.write(" ] >>","endobj"),e=a.internal.newObject(),a.internal.write("<< /Dests "+F+" 0 R"),a.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var a=this;a.outline={createNamedDestinations:!1,root:{children:[]}},a.outline.add=function(r,i,l){var c={title:i,options:l,children:[]};return r==null&&(r=this.root),r.children.push(c),c},a.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=a,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},a.outline.genIds_r=function(r){r.id=a.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},a.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},a.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,l=0;l<r.children.length;l++){var c=r.children[l];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(r)),l>0&&this.line("/Prev "+this.makeRef(r.children[l-1])),l<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[l+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var n=this.count=this.count_r({count:0},c);if(n>0&&this.line("/Count "+n),c.options&&c.options.pageNumber){var v=a.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+v.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var R=0;R<r.children.length;R++)this.renderItems(r.children[R])},a.outline.line=function(r){this.ctx.val+=r+`\r
`},a.outline.makeRef=function(r){return r.id+" 0 R"},a.outline.makeString=function(r){return"("+a.internal.pdfEscape(r)+")"},a.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},a.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},a.outline.count_r=function(r,i){for(var l=0;l<i.children.length;l++)r.count++,this.count_r(r,i.children[l]);return r.count}}])}(Wn.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(a,r,i,l,c,n){var v,R=this.decode.DCT_DECODE,x=null;if(typeof a=="string"||this.__addimage__.isArrayBuffer(a)||this.__addimage__.isArrayBufferView(a)){switch(a=c||a,a=this.__addimage__.isArrayBuffer(a)?new Uint8Array(a):a,(v=function(N){for(var L,F=256*N.charCodeAt(4)+N.charCodeAt(5),j=N.length,$={width:0,height:0,numcomponents:1},H=4;H<j;H+=2){if(H+=F,e.indexOf(N.charCodeAt(H+1))!==-1){L=256*N.charCodeAt(H+5)+N.charCodeAt(H+6),$={width:256*N.charCodeAt(H+7)+N.charCodeAt(H+8),height:L,numcomponents:N.charCodeAt(H+9)};break}F=256*N.charCodeAt(H+2)+N.charCodeAt(H+3)}return $}(a=this.__addimage__.isArrayBufferView(a)?this.__addimage__.arrayBufferToBinaryString(a):a)).numcomponents){case 1:n=this.color_spaces.DEVICE_GRAY;break;case 4:n=this.color_spaces.DEVICE_CMYK;break;case 3:n=this.color_spaces.DEVICE_RGB}x={data:a,width:v.width,height:v.height,colorSpace:n,bitsPerComponent:8,filter:R,index:r,alias:i}}return x}}(Wn.API);var q0,lb,tH,aH,rH,VOe=function(){var t,e,a;function r(l){var c,n,v,R,x,N,L,F,j,$,H,W,ee,se;for(this.data=l,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},N=null;;){switch(c=this.readUInt32(),j=(function(){var fe,le;for(le=[],fe=0;fe<4;++fe)le.push(String.fromCharCode(this.data[this.pos++]));return le}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(c);break;case"fcTL":N&&this.animation.frames.push(N),this.pos+=4,N={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},x=this.readUInt16(),R=this.readUInt16()||100,N.delay=1e3*x/R,N.disposeOp=this.data[this.pos++],N.blendOp=this.data[this.pos++],N.data=[];break;case"IDAT":case"fdAT":for(j==="fdAT"&&(this.pos+=4,c-=4),l=(N!=null?N.data:void 0)||this.imgData,W=0;0<=c?W<c:W>c;0<=c?++W:--W)l.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(v=this.palette.length/3,this.transparency.indexed=this.read(c),this.transparency.indexed.length>v)throw new Error("More transparent colors than palette size");if(($=v-this.transparency.indexed.length)>0)for(ee=0;0<=$?ee<$:ee>$;0<=$?++ee:--ee)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(c)[0];break;case 2:this.transparency.rgb=this.read(c)}break;case"tEXt":L=(H=this.read(c)).indexOf(0),F=String.fromCharCode.apply(String,H.slice(0,L)),this.text[F]=String.fromCharCode.apply(String,H.slice(L+1));break;case"IEND":return N&&this.animation.frames.push(N),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(se=this.colorType)===4||se===6,n=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*n,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=c}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(l){var c,n;for(n=[],c=0;0<=l?c<l:c>l;0<=l?++c:--c)n.push(this.data[this.pos++]);return n},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(l){var c=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*c),v=0,R=this;if(l==null&&(l=this.imgData),l.length===0)return new Uint8Array(0);function x(N,L,F,j){var $,H,W,ee,se,fe,le,me,ge,Re,we,Ve,oe,_e,Fe,Ee,ze,Se,je,Ue,$e,Be=Math.ceil((R.width-N)/F),qe=Math.ceil((R.height-L)/j),be=R.width==Be&&R.height==qe;for(_e=c*Be,Ve=be?n:new Uint8Array(_e*qe),fe=l.length,oe=0,H=0;oe<qe&&v<fe;){switch(l[v++]){case 0:for(ee=ze=0;ze<_e;ee=ze+=1)Ve[H++]=l[v++];break;case 1:for(ee=Se=0;Se<_e;ee=Se+=1)$=l[v++],se=ee<c?0:Ve[H-c],Ve[H++]=($+se)%256;break;case 2:for(ee=je=0;je<_e;ee=je+=1)$=l[v++],W=(ee-ee%c)/c,Fe=oe&&Ve[(oe-1)*_e+W*c+ee%c],Ve[H++]=(Fe+$)%256;break;case 3:for(ee=Ue=0;Ue<_e;ee=Ue+=1)$=l[v++],W=(ee-ee%c)/c,se=ee<c?0:Ve[H-c],Fe=oe&&Ve[(oe-1)*_e+W*c+ee%c],Ve[H++]=($+Math.floor((se+Fe)/2))%256;break;case 4:for(ee=$e=0;$e<_e;ee=$e+=1)$=l[v++],W=(ee-ee%c)/c,se=ee<c?0:Ve[H-c],oe===0?Fe=Ee=0:(Fe=Ve[(oe-1)*_e+W*c+ee%c],Ee=W&&Ve[(oe-1)*_e+(W-1)*c+ee%c]),le=se+Fe-Ee,me=Math.abs(le-se),Re=Math.abs(le-Fe),we=Math.abs(le-Ee),ge=me<=Re&&me<=we?se:Re<=we?Fe:Ee,Ve[H++]=($+ge)%256;break;default:throw new Error("Invalid filter algorithm: "+l[v-1])}if(!be){var Te=((L+oe*j)*R.width+N)*c,ke=oe*_e;for(ee=0;ee<Be;ee+=1){for(var Ge=0;Ge<c;Ge+=1)n[Te++]=Ve[ke++];Te+=(F-1)*c}}oe++}}return l=cOe(l),R.interlaceMethod==1?(x(0,0,8,8),x(4,0,8,8),x(0,4,4,8),x(2,0,4,4),x(0,2,2,4),x(1,0,2,2),x(0,1,1,2)):x(0,0,1,1),n},r.prototype.decodePalette=function(){var l,c,n,v,R,x,N,L,F;for(n=this.palette,x=this.transparency.indexed||[],R=new Uint8Array((x.length||0)+n.length),v=0,l=0,c=N=0,L=n.length;N<L;c=N+=3)R[v++]=n[c],R[v++]=n[c+1],R[v++]=n[c+2],R[v++]=(F=x[l++])!=null?F:255;return R},r.prototype.copyToImageData=function(l,c){var n,v,R,x,N,L,F,j,$,H,W;if(v=this.colors,$=null,n=this.hasAlphaChannel,this.palette.length&&($=(W=this._decodedPalette)!=null?W:this._decodedPalette=this.decodePalette(),v=4,n=!0),j=(R=l.data||l).length,N=$||c,x=L=0,v===1)for(;x<j;)F=$?4*c[x/4]:L,H=N[F++],R[x++]=H,R[x++]=H,R[x++]=H,R[x++]=n?N[F++]:255,L=F;else for(;x<j;)F=$?4*c[x/4]:L,R[x++]=N[F++],R[x++]=N[F++],R[x++]=N[F++],R[x++]=n?N[F++]:255,L=F},r.prototype.decode=function(){var l;return l=new Uint8Array(this.width*this.height*4),this.copyToImageData(l,this.decodePixels()),l};var i=function(){if(Object.prototype.toString.call(Qn)==="[object Window]"){try{e=Qn.document.createElement("canvas"),a=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(l){var c;if(i()===!0)return a.width=l.width,a.height=l.height,a.clearRect(0,0,l.width,l.height),a.putImageData(l,0,0),(c=new Image).src=e.toDataURL(),c;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(l){var c,n,v,R,x,N,L,F;if(this.animation){for(F=[],n=x=0,N=(L=this.animation.frames).length;x<N;n=++x)c=L[n],v=l.createImageData(c.width,c.height),R=this.decodePixels(new Uint8Array(c.data)),this.copyToImageData(v,R),c.imageData=v,F.push(c.image=t(v));return F}},r.prototype.renderFrame=function(l,c){var n,v,R;return n=(v=this.animation.frames)[c],R=v[c-1],c===0&&l.clearRect(0,0,this.width,this.height),(R!=null?R.disposeOp:void 0)===1?l.clearRect(R.xOffset,R.yOffset,R.width,R.height):(R!=null?R.disposeOp:void 0)===2&&l.putImageData(R.imageData,R.xOffset,R.yOffset),n.blendOp===0&&l.clearRect(n.xOffset,n.yOffset,n.width,n.height),l.drawImage(n.image,n.xOffset,n.yOffset)},r.prototype.animate=function(l){var c,n,v,R,x,N,L=this;return n=0,N=this.animation,R=N.numFrames,v=N.frames,x=N.numPlays,(c=function(){var F,j;if(F=n++%R,j=v[F],L.renderFrame(l,F),R>1&&n/R<x)return L.animation._timeout=setTimeout(c,j.delay)})()},r.prototype.stopAnimation=function(){var l;return clearTimeout((l=this.animation)!=null?l._timeout:void 0)},r.prototype.render=function(l){var c,n;return l._png&&l._png.stopAnimation(),l._png=this,l.width=this.width,l.height=this.height,c=l.getContext("2d"),this.animation?(this.decodeFrames(c),this.animate(c)):(n=c.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),c.putImageData(n,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function zOe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var a=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],l=i>>7,c=1<<(7&i)+1;t[e++],t[e++];var n=null,v=null;l&&(n=e,v=c,e+=3*c);var R=!0,x=[],N=0,L=null,F=0,j=null;for(this.width=a,this.height=r;R&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,j=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((oe=t[e++])>=0))throw Error("Invalid block size");if(oe===0)break;e+=oe}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var $=t[e++];N=t[e++]|t[e++]<<8,L=t[e++],(1&$)==0&&(L=null),F=$>>2&7,e++;break;case 254:for(;;){if(!((oe=t[e++])>=0))throw Error("Invalid block size");if(oe===0)break;e+=oe}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var H=t[e++]|t[e++]<<8,W=t[e++]|t[e++]<<8,ee=t[e++]|t[e++]<<8,se=t[e++]|t[e++]<<8,fe=t[e++],le=fe>>6&1,me=1<<(7&fe)+1,ge=n,Re=v,we=!1;fe>>7&&(we=!0,ge=e,Re=me,e+=3*me);var Ve=e;for(e++;;){var oe;if(!((oe=t[e++])>=0))throw Error("Invalid block size");if(oe===0)break;e+=oe}x.push({x:H,y:W,width:ee,height:se,has_local_palette:we,palette_offset:ge,palette_size:Re,data_offset:Ve,data_length:e-Ve,transparent_index:L,interlaced:!!le,delay:N,disposal:F});break;case 59:R=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return x.length},this.loopCount=function(){return j},this.frameInfo=function(_e){if(_e<0||_e>=x.length)throw new Error("Frame index out of range.");return x[_e]},this.decodeAndBlitFrameBGRA=function(_e,Fe){var Ee=this.frameInfo(_e),ze=Ee.width*Ee.height,Se=new Uint8Array(ze);nH(t,Ee.data_offset,Se,ze);var je=Ee.palette_offset,Ue=Ee.transparent_index;Ue===null&&(Ue=256);var $e=Ee.width,Be=a-$e,qe=$e,be=4*(Ee.y*a+Ee.x),Te=4*((Ee.y+Ee.height)*a+Ee.x),ke=be,Ge=4*Be;Ee.interlaced===!0&&(Ge+=4*a*7);for(var at=8,rt=0,lt=Se.length;rt<lt;++rt){var ot=Se[rt];if(qe===0&&(qe=$e,(ke+=Ge)>=Te&&(Ge=4*Be+4*a*(at-1),ke=be+($e+Be)*(at<<1),at>>=1)),ot===Ue)ke+=4;else{var ve=t[je+3*ot],Vt=t[je+3*ot+1],Bt=t[je+3*ot+2];Fe[ke++]=Bt,Fe[ke++]=Vt,Fe[ke++]=ve,Fe[ke++]=255}--qe}},this.decodeAndBlitFrameRGBA=function(_e,Fe){var Ee=this.frameInfo(_e),ze=Ee.width*Ee.height,Se=new Uint8Array(ze);nH(t,Ee.data_offset,Se,ze);var je=Ee.palette_offset,Ue=Ee.transparent_index;Ue===null&&(Ue=256);var $e=Ee.width,Be=a-$e,qe=$e,be=4*(Ee.y*a+Ee.x),Te=4*((Ee.y+Ee.height)*a+Ee.x),ke=be,Ge=4*Be;Ee.interlaced===!0&&(Ge+=4*a*7);for(var at=8,rt=0,lt=Se.length;rt<lt;++rt){var ot=Se[rt];if(qe===0&&(qe=$e,(ke+=Ge)>=Te&&(Ge=4*Be+4*a*(at-1),ke=be+($e+Be)*(at<<1),at>>=1)),ot===Ue)ke+=4;else{var ve=t[je+3*ot],Vt=t[je+3*ot+1],Bt=t[je+3*ot+2];Fe[ke++]=ve,Fe[ke++]=Vt,Fe[ke++]=Bt,Fe[ke++]=255}--qe}}}function nH(t,e,a,r){for(var i=t[e++],l=1<<i,c=l+1,n=c+1,v=i+1,R=(1<<v)-1,x=0,N=0,L=0,F=t[e++],j=new Int32Array(4096),$=null;;){for(;x<16&&F!==0;)N|=t[e++]<<x,x+=8,F===1?F=t[e++]:--F;if(x<v)break;var H=N&R;if(N>>=v,x-=v,H!==l){if(H===c)break;for(var W=H<n?H:$,ee=0,se=W;se>l;)se=j[se]>>8,++ee;var fe=se;if(L+ee+(W!==H?1:0)>r)return void fo.log("Warning, gif stream longer than expected.");a[L++]=fe;var le=L+=ee;for(W!==H&&(a[L++]=fe),se=W;ee--;)se=j[se],a[--le]=255&se,se>>=8;$!==null&&n<4096&&(j[n++]=$<<8|fe,n>=R+1&&v<12&&(++v,R=R<<1|1)),$=H}else n=c+1,R=(1<<(v=i+1))-1,$=null}return L!==r&&fo.log("Warning, gif stream shorter than expected."),a}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function RD(t){var e,a,r,i,l,c=Math.floor,n=new Array(64),v=new Array(64),R=new Array(64),x=new Array(64),N=new Array(65535),L=new Array(65535),F=new Array(64),j=new Array(64),$=[],H=0,W=7,ee=new Array(64),se=new Array(64),fe=new Array(64),le=new Array(256),me=new Array(2048),ge=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Re=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],we=[0,1,2,3,4,5,6,7,8,9,10,11],Ve=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],oe=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],_e=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Fe=[0,1,2,3,4,5,6,7,8,9,10,11],Ee=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ze=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Se(be,Te){for(var ke=0,Ge=0,at=new Array,rt=1;rt<=16;rt++){for(var lt=1;lt<=be[rt];lt++)at[Te[Ge]]=[],at[Te[Ge]][0]=ke,at[Te[Ge]][1]=rt,Ge++,ke++;ke*=2}return at}function je(be){for(var Te=be[0],ke=be[1]-1;ke>=0;)Te&1<<ke&&(H|=1<<W),ke--,--W<0&&(H==255?(Ue(255),Ue(0)):Ue(H),W=7,H=0)}function Ue(be){$.push(be)}function $e(be){Ue(be>>8&255),Ue(255&be)}function Be(be,Te,ke,Ge,at){for(var rt,lt=at[0],ot=at[240],ve=function(Pa,Ja){var or,lr,Tr,ka,kr,nn,wn,un,va,$a,la=0;for(va=0;va<8;++va){or=Pa[la],lr=Pa[la+1],Tr=Pa[la+2],ka=Pa[la+3],kr=Pa[la+4],nn=Pa[la+5],wn=Pa[la+6];var Ya=or+(un=Pa[la+7]),yr=or-un,Tn=lr+wn,Qr=lr-wn,cn=Tr+nn,$r=Tr-nn,br=ka+kr,Fi=ka-kr,yi=Ya+br,oi=Ya-br,Cs=Tn+cn,ga=Tn-cn;Pa[la]=yi+Cs,Pa[la+4]=yi-Cs;var pr=.707106781*(ga+oi);Pa[la+2]=oi+pr,Pa[la+6]=oi-pr;var Kr=.382683433*((yi=Fi+$r)-(ga=Qr+yr)),ti=.5411961*yi+Kr,Rn=1.306562965*ga+Kr,Zt=.707106781*(Cs=$r+Qr),Ne=yr+Zt,Ie=yr-Zt;Pa[la+5]=Ie+ti,Pa[la+3]=Ie-ti,Pa[la+1]=Ne+Rn,Pa[la+7]=Ne-Rn,la+=8}for(la=0,va=0;va<8;++va){or=Pa[la],lr=Pa[la+8],Tr=Pa[la+16],ka=Pa[la+24],kr=Pa[la+32],nn=Pa[la+40],wn=Pa[la+48];var He=or+(un=Pa[la+56]),yt=or-un,At=lr+wn,bt=lr-wn,Gt=Tr+nn,Et=Tr-nn,Wt=ka+kr,Yt=ka-kr,Kt=He+Wt,Ca=He-Wt,Ia=At+Gt,Ga=At-Gt;Pa[la]=Kt+Ia,Pa[la+32]=Kt-Ia;var Cr=.707106781*(Ga+Ca);Pa[la+16]=Ca+Cr,Pa[la+48]=Ca-Cr;var Dr=.382683433*((Kt=Yt+Et)-(Ga=bt+yt)),Mr=.5411961*Kt+Dr,Hr=1.306562965*Ga+Dr,Un=.707106781*(Ia=Et+bt),ri=yt+Un,Yr=yt-Un;Pa[la+40]=Yr+Mr,Pa[la+24]=Yr-Mr,Pa[la+8]=ri+Hr,Pa[la+56]=ri-Hr,la++}for(va=0;va<64;++va)$a=Pa[va]*Ja[va],F[va]=$a>0?$a+.5|0:$a-.5|0;return F}(be,Te),Vt=0;Vt<64;++Vt)j[ge[Vt]]=ve[Vt];var Bt=j[0]-ke;ke=j[0],Bt==0?je(Ge[0]):(je(Ge[L[rt=32767+Bt]]),je(N[rt]));for(var wa=63;wa>0&&j[wa]==0;)wa--;if(wa==0)return je(lt),ke;for(var It,$t=1;$t<=wa;){for(var wt=$t;j[$t]==0&&$t<=wa;)++$t;var hr=$t-wt;if(hr>=16){It=hr>>4;for(var ba=1;ba<=It;++ba)je(ot);hr&=15}rt=32767+j[$t],je(at[(hr<<4)+L[rt]]),je(N[rt]),$t++}return wa!=63&&je(lt),ke}function qe(be){be=Math.min(Math.max(be,1),100),l!=be&&(function(Te){for(var ke=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Ge=0;Ge<64;Ge++){var at=c((ke[Ge]*Te+50)/100);at=Math.min(Math.max(at,1),255),n[ge[Ge]]=at}for(var rt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],lt=0;lt<64;lt++){var ot=c((rt[lt]*Te+50)/100);ot=Math.min(Math.max(ot,1),255),v[ge[lt]]=ot}for(var ve=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Vt=0,Bt=0;Bt<8;Bt++)for(var wa=0;wa<8;wa++)R[Vt]=1/(n[ge[Vt]]*ve[Bt]*ve[wa]*8),x[Vt]=1/(v[ge[Vt]]*ve[Bt]*ve[wa]*8),Vt++}(be<50?Math.floor(5e3/be):Math.floor(200-2*be)),l=be)}this.encode=function(be,Te){Te&&qe(Te),$=new Array,H=0,W=7,$e(65496),$e(65504),$e(16),Ue(74),Ue(70),Ue(73),Ue(70),Ue(0),Ue(1),Ue(1),Ue(0),$e(1),$e(1),Ue(0),Ue(0),function(){$e(65499),$e(132),Ue(0);for(var lr=0;lr<64;lr++)Ue(n[lr]);Ue(1);for(var Tr=0;Tr<64;Tr++)Ue(v[Tr])}(),function(lr,Tr){$e(65472),$e(17),Ue(8),$e(Tr),$e(lr),Ue(3),Ue(1),Ue(17),Ue(0),Ue(2),Ue(17),Ue(1),Ue(3),Ue(17),Ue(1)}(be.width,be.height),function(){$e(65476),$e(418),Ue(0);for(var lr=0;lr<16;lr++)Ue(Re[lr+1]);for(var Tr=0;Tr<=11;Tr++)Ue(we[Tr]);Ue(16);for(var ka=0;ka<16;ka++)Ue(Ve[ka+1]);for(var kr=0;kr<=161;kr++)Ue(oe[kr]);Ue(1);for(var nn=0;nn<16;nn++)Ue(_e[nn+1]);for(var wn=0;wn<=11;wn++)Ue(Fe[wn]);Ue(17);for(var un=0;un<16;un++)Ue(Ee[un+1]);for(var va=0;va<=161;va++)Ue(ze[va])}(),$e(65498),$e(12),Ue(3),Ue(1),Ue(0),Ue(2),Ue(17),Ue(3),Ue(17),Ue(0),Ue(63),Ue(0);var ke=0,Ge=0,at=0;H=0,W=7,this.encode.displayName="_encode_";for(var rt,lt,ot,ve,Vt,Bt,wa,It,$t,wt=be.data,hr=be.width,ba=be.height,Pa=4*hr,Ja=0;Ja<ba;){for(rt=0;rt<Pa;){for(Vt=Pa*Ja+rt,wa=-1,It=0,$t=0;$t<64;$t++)Bt=Vt+(It=$t>>3)*Pa+(wa=4*(7&$t)),Ja+It>=ba&&(Bt-=Pa*(Ja+1+It-ba)),rt+wa>=Pa&&(Bt-=rt+wa-Pa+4),lt=wt[Bt++],ot=wt[Bt++],ve=wt[Bt++],ee[$t]=(me[lt]+me[ot+256>>0]+me[ve+512>>0]>>16)-128,se[$t]=(me[lt+768>>0]+me[ot+1024>>0]+me[ve+1280>>0]>>16)-128,fe[$t]=(me[lt+1280>>0]+me[ot+1536>>0]+me[ve+1792>>0]>>16)-128;ke=Be(ee,R,ke,e,r),Ge=Be(se,x,Ge,a,i),at=Be(fe,x,at,a,i),rt+=32}Ja+=8}if(W>=0){var or=[];or[1]=W+1,or[0]=(1<<W+1)-1,je(or)}return $e(65497),new Uint8Array($)},t=t||50,function(){for(var be=String.fromCharCode,Te=0;Te<256;Te++)le[Te]=be(Te)}(),e=Se(Re,we),a=Se(_e,Fe),r=Se(Ve,oe),i=Se(Ee,ze),function(){for(var be=1,Te=2,ke=1;ke<=15;ke++){for(var Ge=be;Ge<Te;Ge++)L[32767+Ge]=ke,N[32767+Ge]=[],N[32767+Ge][1]=ke,N[32767+Ge][0]=Ge;for(var at=-(Te-1);at<=-be;at++)L[32767+at]=ke,N[32767+at]=[],N[32767+at][1]=ke,N[32767+at][0]=Te-1+at;be<<=1,Te<<=1}}(),function(){for(var be=0;be<256;be++)me[be]=19595*be,me[be+256>>0]=38470*be,me[be+512>>0]=7471*be+32768,me[be+768>>0]=-11059*be,me[be+1024>>0]=-21709*be,me[be+1280>>0]=32768*be+8421375,me[be+1536>>0]=-27439*be,me[be+1792>>0]=-5329*be}(),qe(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Lp(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function iH(t){function e(Re){if(!Re)throw Error("assert :P")}function a(Re,we,Ve){for(var oe=0;4>oe;oe++)if(Re[we+oe]!=Ve.charCodeAt(oe))return!0;return!1}function r(Re,we,Ve,oe,_e){for(var Fe=0;Fe<_e;Fe++)Re[we+Fe]=Ve[oe+Fe]}function i(Re,we,Ve,oe){for(var _e=0;_e<oe;_e++)Re[we+_e]=Ve}function l(Re){return new Int32Array(Re)}function c(Re,we){for(var Ve=[],oe=0;oe<Re;oe++)Ve.push(new we);return Ve}function n(Re,we){var Ve=[];return function oe(_e,Fe,Ee){for(var ze=Ee[Fe],Se=0;Se<ze&&(_e.push(Ee.length>Fe+1?[]:new we),!(Ee.length<Fe+1));Se++)oe(_e[Se],Fe+1,Ee)}(Ve,0,Re),Ve}var v=function(){var Re=this;function we(G,Q){for(var ye=1<<Q-1>>>0;G&ye;)ye>>>=1;return ye?(G&ye-1)+ye:G}function Ve(G,Q,ye,Me,We){e(!(Me%ye));do G[Q+(Me-=ye)]=We;while(0<Me)}function oe(G,Q,ye,Me,We){if(e(2328>=We),512>=We)var nt=l(512);else if((nt=l(We))==null)return 0;return function(st,ht,mt,St,ea,Pt){var _a,na,Ta=ht,fa=1<<mt,Rt=l(16),aa=l(16);for(e(ea!=0),e(St!=null),e(st!=null),e(0<mt),na=0;na<ea;++na){if(15<St[na])return 0;++Rt[St[na]]}if(Rt[0]==ea)return 0;for(aa[1]=0,_a=1;15>_a;++_a){if(Rt[_a]>1<<_a)return 0;aa[_a+1]=aa[_a]+Rt[_a]}for(na=0;na<ea;++na)_a=St[na],0<St[na]&&(Pt[aa[_a]++]=na);if(aa[15]==1)return(St=new _e).g=0,St.value=Pt[0],Ve(st,Ta,1,fa,St),fa;var Za,Qa=-1,Ka=fa-1,Nr=0,Ar=1,hn=1,fr=1<<mt;for(na=0,_a=1,ea=2;_a<=mt;++_a,ea<<=1){if(Ar+=hn<<=1,0>(hn-=Rt[_a]))return 0;for(;0<Rt[_a];--Rt[_a])(St=new _e).g=_a,St.value=Pt[na++],Ve(st,Ta+Nr,ea,fr,St),Nr=we(Nr,_a)}for(_a=mt+1,ea=2;15>=_a;++_a,ea<<=1){if(Ar+=hn<<=1,0>(hn-=Rt[_a]))return 0;for(;0<Rt[_a];--Rt[_a]){if(St=new _e,(Nr&Ka)!=Qa){for(Ta+=fr,Za=1<<(Qa=_a)-mt;15>Qa&&!(0>=(Za-=Rt[Qa]));)++Qa,Za<<=1;fa+=fr=1<<(Za=Qa-mt),st[ht+(Qa=Nr&Ka)].g=Za+mt,st[ht+Qa].value=Ta-ht-Qa}St.g=_a-mt,St.value=Pt[na++],Ve(st,Ta+(Nr>>mt),ea,fr,St),Nr=we(Nr,_a)}}return Ar!=2*aa[15]-1?0:fa}(G,Q,ye,Me,We,nt)}function _e(){this.value=this.g=0}function Fe(){this.value=this.g=0}function Ee(){this.G=c(5,_e),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(Ms,Fe)}function ze(G,Q,ye,Me){e(G!=null),e(Q!=null),e(2147483648>Me),G.Ca=254,G.I=0,G.b=-8,G.Ka=0,G.oa=Q,G.pa=ye,G.Jd=Q,G.Yc=ye+Me,G.Zc=4<=Me?ye+Me-4+1:ye,rt(G)}function Se(G,Q){for(var ye=0;0<Q--;)ye|=ot(G,128)<<Q;return ye}function je(G,Q){var ye=Se(G,Q);return lt(G)?-ye:ye}function Ue(G,Q,ye,Me){var We,nt=0;for(e(G!=null),e(Q!=null),e(4294967288>Me),G.Sb=Me,G.Ra=0,G.u=0,G.h=0,4<Me&&(Me=4),We=0;We<Me;++We)nt+=Q[ye+We]<<8*We;G.Ra=nt,G.bb=Me,G.oa=Q,G.pa=ye}function $e(G){for(;8<=G.u&&G.bb<G.Sb;)G.Ra>>>=8,G.Ra+=G.oa[G.pa+G.bb]<<za-8>>>0,++G.bb,G.u-=8;ke(G)&&(G.h=1,G.u=0)}function Be(G,Q){if(e(0<=Q),!G.h&&Q<=_c){var ye=Te(G)&bi[Q];return G.u+=Q,$e(G),ye}return G.h=1,G.u=0}function qe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function be(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Te(G){return G.Ra>>>(G.u&za-1)>>>0}function ke(G){return e(G.bb<=G.Sb),G.h||G.bb==G.Sb&&G.u>za}function Ge(G,Q){G.u=Q,G.h=ke(G)}function at(G){G.u>=Md&&(e(G.u>=Md),$e(G))}function rt(G){e(G!=null&&G.oa!=null),G.pa<G.Zc?(G.I=(G.oa[G.pa++]|G.I<<8)>>>0,G.b+=8):(e(G!=null&&G.oa!=null),G.pa<G.Yc?(G.b+=8,G.I=G.oa[G.pa++]|G.I<<8):G.Ka?G.b=0:(G.I<<=8,G.b+=8,G.Ka=1))}function lt(G){return Se(G,1)}function ot(G,Q){var ye=G.Ca;0>G.b&&rt(G);var Me=G.b,We=ye*Q>>>8,nt=(G.I>>>Me>We)+0;for(nt?(ye-=We,G.I-=We+1<<Me>>>0):ye=We+1,Me=ye,We=0;256<=Me;)We+=8,Me>>=8;return Me=7^We+Js[Me],G.b-=Me,G.Ca=(ye<<Me)-1,nt}function ve(G,Q,ye){G[Q+0]=ye>>24&255,G[Q+1]=ye>>16&255,G[Q+2]=ye>>8&255,G[Q+3]=ye>>0&255}function Vt(G,Q){return G[Q+0]<<0|G[Q+1]<<8}function Bt(G,Q){return Vt(G,Q)|G[Q+2]<<16}function wa(G,Q){return Vt(G,Q)|Vt(G,Q+2)<<16}function It(G,Q){var ye=1<<Q;return e(G!=null),e(0<Q),G.X=l(ye),G.X==null?0:(G.Mb=32-Q,G.Xa=Q,1)}function $t(G,Q){e(G!=null),e(Q!=null),e(G.Xa==Q.Xa),r(Q.X,0,G.X,0,1<<Q.Xa)}function wt(){this.X=[],this.Xa=this.Mb=0}function hr(G,Q,ye,Me){e(ye!=null),e(Me!=null);var We=ye[0],nt=Me[0];return We==0&&(We=(G*nt+Q/2)/Q),nt==0&&(nt=(Q*We+G/2)/G),0>=We||0>=nt?0:(ye[0]=We,Me[0]=nt,1)}function ba(G,Q){return G+(1<<Q)-1>>>Q}function Pa(G,Q){return((4278255360&G)+(4278255360&Q)>>>0&4278255360)+((16711935&G)+(16711935&Q)>>>0&16711935)>>>0}function Ja(G,Q){Re[Q]=function(ye,Me,We,nt,st,ht,mt){var St;for(St=0;St<st;++St){var ea=Re[G](ht[mt+St-1],We,nt+St);ht[mt+St]=Pa(ye[Me+St],ea)}}}function or(){this.ud=this.hd=this.jd=0}function lr(G,Q){return((4278124286&(G^Q))>>>1)+(G&Q)>>>0}function Tr(G){return 0<=G&&256>G?G:0>G?0:255<G?255:void 0}function ka(G,Q){return Tr(G+(G-Q+.5>>1))}function kr(G,Q,ye){return Math.abs(Q-ye)-Math.abs(G-ye)}function nn(G,Q,ye,Me,We,nt,st){for(Me=nt[st-1],ye=0;ye<We;++ye)nt[st+ye]=Me=Pa(G[Q+ye],Me)}function wn(G,Q,ye,Me,We){var nt;for(nt=0;nt<ye;++nt){var st=G[Q+nt],ht=st>>8&255,mt=16711935&(mt=(mt=16711935&st)+((ht<<16)+ht));Me[We+nt]=(4278255360&st)+mt>>>0}}function un(G,Q){Q.jd=G>>0&255,Q.hd=G>>8&255,Q.ud=G>>16&255}function va(G,Q,ye,Me,We,nt){var st;for(st=0;st<Me;++st){var ht=Q[ye+st],mt=ht>>>8,St=ht,ea=255&(ea=(ea=ht>>>16)+((G.jd<<24>>24)*(mt<<24>>24)>>>5));St=255&(St=(St=St+((G.hd<<24>>24)*(mt<<24>>24)>>>5))+((G.ud<<24>>24)*(ea<<24>>24)>>>5)),We[nt+st]=(4278255360&ht)+(ea<<16)+St}}function $a(G,Q,ye,Me,We){Re[Q]=function(nt,st,ht,mt,St,ea,Pt,_a,na){for(mt=Pt;mt<_a;++mt)for(Pt=0;Pt<na;++Pt)St[ea++]=We(ht[Me(nt[st++])])},Re[G]=function(nt,st,ht,mt,St,ea,Pt){var _a=8>>nt.b,na=nt.Ea,Ta=nt.K[0],fa=nt.w;if(8>_a)for(nt=(1<<nt.b)-1,fa=(1<<_a)-1;st<ht;++st){var Rt,aa=0;for(Rt=0;Rt<na;++Rt)Rt&nt||(aa=Me(mt[St++])),ea[Pt++]=We(Ta[aa&fa]),aa>>=_a}else Re["VP8LMapColor"+ye](mt,St,Ta,fa,ea,Pt,st,ht,na)}}function la(G,Q,ye,Me,We){for(ye=Q+ye;Q<ye;){var nt=G[Q++];Me[We++]=nt>>16&255,Me[We++]=nt>>8&255,Me[We++]=nt>>0&255}}function Ya(G,Q,ye,Me,We){for(ye=Q+ye;Q<ye;){var nt=G[Q++];Me[We++]=nt>>16&255,Me[We++]=nt>>8&255,Me[We++]=nt>>0&255,Me[We++]=nt>>24&255}}function yr(G,Q,ye,Me,We){for(ye=Q+ye;Q<ye;){var nt=(st=G[Q++])>>16&240|st>>12&15,st=st>>0&240|st>>28&15;Me[We++]=nt,Me[We++]=st}}function Tn(G,Q,ye,Me,We){for(ye=Q+ye;Q<ye;){var nt=(st=G[Q++])>>16&248|st>>13&7,st=st>>5&224|st>>3&31;Me[We++]=nt,Me[We++]=st}}function Qr(G,Q,ye,Me,We){for(ye=Q+ye;Q<ye;){var nt=G[Q++];Me[We++]=nt>>0&255,Me[We++]=nt>>8&255,Me[We++]=nt>>16&255}}function cn(G,Q,ye,Me,We,nt){if(nt==0)for(ye=Q+ye;Q<ye;)ve(Me,((nt=G[Q++])[0]>>24|nt[1]>>8&65280|nt[2]<<8&16711680|nt[3]<<24)>>>0),We+=32;else r(Me,We,G,Q,ye)}function $r(G,Q){Re[Q][0]=Re[G+"0"],Re[Q][1]=Re[G+"1"],Re[Q][2]=Re[G+"2"],Re[Q][3]=Re[G+"3"],Re[Q][4]=Re[G+"4"],Re[Q][5]=Re[G+"5"],Re[Q][6]=Re[G+"6"],Re[Q][7]=Re[G+"7"],Re[Q][8]=Re[G+"8"],Re[Q][9]=Re[G+"9"],Re[Q][10]=Re[G+"10"],Re[Q][11]=Re[G+"11"],Re[Q][12]=Re[G+"12"],Re[Q][13]=Re[G+"13"],Re[Q][14]=Re[G+"0"],Re[Q][15]=Re[G+"0"]}function br(G){return G==Nu||G==Ju||G==Sc||G==tm}function Fi(){this.eb=[],this.size=this.A=this.fb=0}function yi(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function oi(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Fi,this.f.kb=new yi,this.sd=null}function Cs(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ga(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function pr(G){return alert("todo:WebPSamplerProcessPlane"),G.T}function Kr(G,Q){var ye=G.T,Me=Q.ba.f.RGBA,We=Me.eb,nt=Me.fb+G.ka*Me.A,st=ll[Q.ba.S],ht=G.y,mt=G.O,St=G.f,ea=G.N,Pt=G.ea,_a=G.W,na=Q.cc,Ta=Q.dc,fa=Q.Mc,Rt=Q.Nc,aa=G.ka,Za=G.ka+G.T,Qa=G.U,Ka=Qa+1>>1;for(aa==0?st(ht,mt,null,null,St,ea,Pt,_a,St,ea,Pt,_a,We,nt,null,null,Qa):(st(Q.ec,Q.fc,ht,mt,na,Ta,fa,Rt,St,ea,Pt,_a,We,nt-Me.A,We,nt,Qa),++ye);aa+2<Za;aa+=2)na=St,Ta=ea,fa=Pt,Rt=_a,ea+=G.Rc,_a+=G.Rc,nt+=2*Me.A,st(ht,(mt+=2*G.fa)-G.fa,ht,mt,na,Ta,fa,Rt,St,ea,Pt,_a,We,nt-Me.A,We,nt,Qa);return mt+=G.fa,G.j+Za<G.o?(r(Q.ec,Q.fc,ht,mt,Qa),r(Q.cc,Q.dc,St,ea,Ka),r(Q.Mc,Q.Nc,Pt,_a,Ka),ye--):1&Za||st(ht,mt,null,null,St,ea,Pt,_a,St,ea,Pt,_a,We,nt+Me.A,null,null,Qa),ye}function ti(G,Q,ye){var Me=G.F,We=[G.J];if(Me!=null){var nt=G.U,st=Q.ba.S,ht=st==sl||st==Sc;Q=Q.ba.f.RGBA;var mt=[0],St=G.ka;mt[0]=G.T,G.Kb&&(St==0?--mt[0]:(--St,We[0]-=G.width),G.j+G.ka+G.T==G.o&&(mt[0]=G.o-G.j-St));var ea=Q.eb;St=Q.fb+St*Q.A,G=li(Me,We[0],G.width,nt,mt,ea,St+(ht?0:3),Q.A),e(ye==mt),G&&br(st)&&As(ea,St,ht,nt,mt,Q.A)}return 0}function Rn(G){var Q=G.ma,ye=Q.ba.S,Me=11>ye,We=ye==kd||ye==Gh||ye==sl||ye==_l||ye==12||br(ye);if(Q.memory=null,Q.Ib=null,Q.Jb=null,Q.Nd=null,!nu(Q.Oa,G,We?11:12))return 0;if(We&&br(ye)&&ir(),G.da)alert("todo:use_scaling");else{if(Me){if(Q.Ib=pr,G.Kb){if(ye=G.U+1>>1,Q.memory=l(G.U+2*ye),Q.memory==null)return 0;Q.ec=Q.memory,Q.fc=0,Q.cc=Q.ec,Q.dc=Q.fc+G.U,Q.Mc=Q.cc,Q.Nc=Q.dc+ye,Q.Ib=Kr,ir()}}else alert("todo:EmitYUV");We&&(Q.Jb=ti,Me&&ha())}if(Me&&!ec){for(G=0;256>G;++G)Jc[G]=89858*(G-128)+zu>>Gd,Qc[G]=-22014*(G-128)+zu,qd[G]=-45773*(G-128),lp[G]=113618*(G-128)+zu>>Gd;for(G=Zd;G<Xc;++G)Q=76283*(G-16)+zu>>Gd,Gs[G-Zd]=vl(Q,255),nm[G-Zd]=vl(Q+8>>4,15);ec=1}return 1}function Zt(G){var Q=G.ma,ye=G.U,Me=G.T;return e(!(1&G.ka)),0>=ye||0>=Me?0:(ye=Q.Ib(G,Q),Q.Jb!=null&&Q.Jb(G,Q,ye),Q.Dc+=ye,1)}function Ne(G){G.ma.memory=null}function Ie(G,Q,ye,Me){return Be(G,8)!=47?0:(Q[0]=Be(G,14)+1,ye[0]=Be(G,14)+1,Me[0]=Be(G,1),Be(G,3)!=0?0:!G.h)}function He(G,Q){if(4>G)return G+1;var ye=G-2>>1;return(2+(1&G)<<ye)+Be(Q,ye)+1}function yt(G,Q){return 120<Q?Q-120:1<=(ye=((ye=lu[Q-1])>>4)*G+(8-(15&ye)))?ye:1;var ye}function At(G,Q,ye){var Me=Te(ye),We=G[Q+=255&Me].g-8;return 0<We&&(Ge(ye,ye.u+8),Me=Te(ye),Q+=G[Q].value,Q+=Me&(1<<We)-1),Ge(ye,ye.u+G[Q].g),G[Q].value}function bt(G,Q,ye){return ye.g+=G.g,ye.value+=G.value<<Q>>>0,e(8>=ye.g),G.g}function Gt(G,Q,ye){var Me=G.xc;return e((Q=Me==0?0:G.vc[G.md*(ye>>Me)+(Q>>Me)])<G.Wb),G.Ya[Q]}function Et(G,Q,ye,Me){var We=G.ab,nt=G.c*Q,st=G.C;Q=st+Q;var ht=ye,mt=Me;for(Me=G.Ta,ye=G.Ua;0<We--;){var St=G.gc[We],ea=st,Pt=Q,_a=ht,na=mt,Ta=(mt=Me,ht=ye,St.Ea);switch(e(ea<Pt),e(Pt<=St.nc),St.hc){case 2:jh(_a,na,(Pt-ea)*Ta,mt,ht);break;case 0:var fa=ea,Rt=Pt,aa=mt,Za=ht,Qa=(fr=St).Ea;fa==0&&(Ao(_a,na,null,null,1,aa,Za),nn(_a,na+1,0,0,Qa-1,aa,Za+1),na+=Qa,Za+=Qa,++fa);for(var Ka=1<<fr.b,Nr=Ka-1,Ar=ba(Qa,fr.b),hn=fr.K,fr=fr.w+(fa>>fr.b)*Ar;fa<Rt;){var Pi=hn,Mi=fr,Yn=1;for(Sf(_a,na,aa,Za-Qa,1,aa,Za);Yn<Qa;){var ui=(Yn&~Nr)+Ka;ui>Qa&&(ui=Qa),(0,iu[Pi[Mi++]>>8&15])(_a,na+ +Yn,aa,Za+Yn-Qa,ui-Yn,aa,Za+Yn),Yn=ui}na+=Qa,Za+=Qa,++fa&Nr||(fr+=Ar)}Pt!=St.nc&&r(mt,ht-Ta,mt,ht+(Pt-ea-1)*Ta,Ta);break;case 1:for(Ta=_a,Rt=na,Qa=(_a=St.Ea)-(Za=_a&~(aa=(na=1<<St.b)-1)),fa=ba(_a,St.b),Ka=St.K,St=St.w+(ea>>St.b)*fa;ea<Pt;){for(Nr=Ka,Ar=St,hn=new or,fr=Rt+Za,Pi=Rt+_a;Rt<fr;)un(Nr[Ar++],hn),Ah(hn,Ta,Rt,na,mt,ht),Rt+=na,ht+=na;Rt<Pi&&(un(Nr[Ar++],hn),Ah(hn,Ta,Rt,Qa,mt,ht),Rt+=Qa,ht+=Qa),++ea&aa||(St+=fa)}break;case 3:if(_a==mt&&na==ht&&0<St.b){for(Rt=mt,_a=Ta=ht+(Pt-ea)*Ta-(Za=(Pt-ea)*ba(St.Ea,St.b)),na=mt,aa=ht,fa=[],Za=(Qa=Za)-1;0<=Za;--Za)fa[Za]=na[aa+Za];for(Za=Qa-1;0<=Za;--Za)Rt[_a+Za]=fa[Za];vo(St,ea,Pt,mt,Ta,mt,ht)}else vo(St,ea,Pt,_a,na,mt,ht)}ht=Me,mt=ye}mt!=ye&&r(Me,ye,ht,mt,nt)}function Wt(G,Q){var ye=G.V,Me=G.Ba+G.c*G.C,We=Q-G.C;if(e(Q<=G.l.o),e(16>=We),0<We){var nt=G.l,st=G.Ta,ht=G.Ua,mt=nt.width;if(Et(G,We,ye,Me),We=ht=[ht],e((ye=G.C)<(Me=Q)),e(nt.v<nt.va),Me>nt.o&&(Me=nt.o),ye<nt.j){var St=nt.j-ye;ye=nt.j,We[0]+=St*mt}if(ye>=Me?ye=0:(We[0]+=4*nt.v,nt.ka=ye-nt.j,nt.U=nt.va-nt.v,nt.T=Me-ye,ye=1),ye){if(ht=ht[0],11>(ye=G.ca).S){var ea=ye.f.RGBA,Pt=(Me=ye.S,We=nt.U,nt=nt.T,St=ea.eb,ea.A),_a=nt;for(ea=ea.fb+G.Ma*ea.A;0<_a--;){var na=st,Ta=ht,fa=We,Rt=St,aa=ea;switch(Me){case Cc:Ml(na,Ta,fa,Rt,aa);break;case kd:No(na,Ta,fa,Rt,aa);break;case Nu:No(na,Ta,fa,Rt,aa),As(Rt,aa,0,fa,1,0);break;case Ai:Il(na,Ta,fa,Rt,aa);break;case Gh:cn(na,Ta,fa,Rt,aa,1);break;case Ju:cn(na,Ta,fa,Rt,aa,1),As(Rt,aa,0,fa,1,0);break;case sl:cn(na,Ta,fa,Rt,aa,0);break;case Sc:cn(na,Ta,fa,Rt,aa,0),As(Rt,aa,1,fa,1,0);break;case _l:Id(na,Ta,fa,Rt,aa);break;case tm:Id(na,Ta,fa,Rt,aa),ai(Rt,aa,fa,1,0);break;case Wc:Gc(na,Ta,fa,Rt,aa);break;default:e(0)}ht+=mt,ea+=Pt}G.Ma+=nt}else alert("todo:EmitRescaledRowsYUVA");e(G.Ma<=ye.height)}}G.C=Q,e(G.C<=G.i)}function Yt(G){var Q;if(0<G.ua)return 0;for(Q=0;Q<G.Wb;++Q){var ye=G.Ya[Q].G,Me=G.Ya[Q].H;if(0<ye[1][Me[1]+0].g||0<ye[2][Me[2]+0].g||0<ye[3][Me[3]+0].g)return 0}return 1}function Kt(G,Q,ye,Me,We,nt){if(G.Z!=0){var st=G.qd,ht=G.rd;for(e(wl[G.Z]!=null);Q<ye;++Q)wl[G.Z](st,ht,Me,We,Me,We,nt),st=Me,ht=We,We+=nt;G.qd=st,G.rd=ht}}function Ca(G,Q){var ye=G.l.ma,Me=ye.Z==0||ye.Z==1?G.l.j:G.C;if(Me=G.C<Me?Me:G.C,e(Q<=G.l.o),Q>Me){var We=G.l.width,nt=ye.ca,st=ye.tb+We*Me,ht=G.V,mt=G.Ba+G.c*Me,St=G.gc;e(G.ab==1),e(St[0].hc==3),Dl(St[0],Me,Q,ht,mt,nt,st),Kt(ye,Me,Q,nt,st,We)}G.C=G.Ma=Q}function Ia(G,Q,ye,Me,We,nt,st){var ht=G.$/Me,mt=G.$%Me,St=G.m,ea=G.s,Pt=ye+G.$,_a=Pt;We=ye+Me*We;var na=ye+Me*nt,Ta=280+ea.ua,fa=G.Pb?ht:16777216,Rt=0<ea.ua?ea.Wa:null,aa=ea.wc,Za=Pt<na?Gt(ea,mt,ht):null;e(G.C<nt),e(na<=We);var Qa=!1;e:for(;;){for(;Qa||Pt<na;){var Ka=0;if(ht>=fa){var Nr=Pt-ye;e((fa=G).Pb),fa.wd=fa.m,fa.xd=Nr,0<fa.s.ua&&$t(fa.s.Wa,fa.s.vb),fa=ht+op}if(mt&aa||(Za=Gt(ea,mt,ht)),e(Za!=null),Za.Qb&&(Q[Pt]=Za.qb,Qa=!0),!Qa)if(at(St),Za.jc){Ka=St,Nr=Q;var Ar=Pt,hn=Za.pd[Te(Ka)&Ms-1];e(Za.jc),256>hn.g?(Ge(Ka,Ka.u+hn.g),Nr[Ar]=hn.value,Ka=0):(Ge(Ka,Ka.u+hn.g-256),e(256<=hn.value),Ka=hn.value),Ka==0&&(Qa=!0)}else Ka=At(Za.G[0],Za.H[0],St);if(St.h)break;if(Qa||256>Ka){if(!Qa)if(Za.nd)Q[Pt]=(Za.qb|Ka<<8)>>>0;else{if(at(St),Qa=At(Za.G[1],Za.H[1],St),at(St),Nr=At(Za.G[2],Za.H[2],St),Ar=At(Za.G[3],Za.H[3],St),St.h)break;Q[Pt]=(Ar<<24|Qa<<16|Ka<<8|Nr)>>>0}if(Qa=!1,++Pt,++mt>=Me&&(mt=0,++ht,st!=null&&ht<=nt&&!(ht%16)&&st(G,ht),Rt!=null))for(;_a<Pt;)Ka=Q[_a++],Rt.X[(506832829*Ka&4294967295)>>>Rt.Mb]=Ka}else if(280>Ka){if(Ka=He(Ka-256,St),Nr=At(Za.G[4],Za.H[4],St),at(St),Nr=yt(Me,Nr=He(Nr,St)),St.h)break;if(Pt-ye<Nr||We-Pt<Ka)break e;for(Ar=0;Ar<Ka;++Ar)Q[Pt+Ar]=Q[Pt+Ar-Nr];for(Pt+=Ka,mt+=Ka;mt>=Me;)mt-=Me,++ht,st!=null&&ht<=nt&&!(ht%16)&&st(G,ht);if(e(Pt<=We),mt&aa&&(Za=Gt(ea,mt,ht)),Rt!=null)for(;_a<Pt;)Ka=Q[_a++],Rt.X[(506832829*Ka&4294967295)>>>Rt.Mb]=Ka}else{if(!(Ka<Ta))break e;for(Qa=Ka-280,e(Rt!=null);_a<Pt;)Ka=Q[_a++],Rt.X[(506832829*Ka&4294967295)>>>Rt.Mb]=Ka;Ka=Pt,e(!(Qa>>>(Nr=Rt).Xa)),Q[Ka]=Nr.X[Qa],Qa=!0}Qa||e(St.h==ke(St))}if(G.Pb&&St.h&&Pt<We)e(G.m.h),G.a=5,G.m=G.wd,G.$=G.xd,0<G.s.ua&&$t(G.s.vb,G.s.Wa);else{if(St.h)break e;st!=null&&st(G,ht>nt?nt:ht),G.a=0,G.$=Pt-ye}return 1}return G.a=3,0}function Ga(G){e(G!=null),G.vc=null,G.yc=null,G.Ya=null;var Q=G.Wa;Q!=null&&(Q.X=null),G.vb=null,e(G!=null)}function Cr(){var G=new Qm;return G==null?null:(G.a=0,G.xb=Kh,$r("Predictor","VP8LPredictors"),$r("Predictor","VP8LPredictors_C"),$r("PredictorAdd","VP8LPredictorsAdd"),$r("PredictorAdd","VP8LPredictorsAdd_C"),jh=wn,Ah=va,Ml=la,No=Ya,Id=yr,Gc=Tn,Il=Qr,Re.VP8LMapColor32b=js,Re.VP8LMapColor8b=jc,G)}function Dr(G,Q,ye,Me,We){var nt=1,st=[G],ht=[Q],mt=Me.m,St=Me.s,ea=null,Pt=0;e:for(;;){if(ye)for(;nt&&Be(mt,1);){var _a=st,na=ht,Ta=Me,fa=1,Rt=Ta.m,aa=Ta.gc[Ta.ab],Za=Be(Rt,2);if(Ta.Oc&1<<Za)nt=0;else{switch(Ta.Oc|=1<<Za,aa.hc=Za,aa.Ea=_a[0],aa.nc=na[0],aa.K=[null],++Ta.ab,e(4>=Ta.ab),Za){case 0:case 1:aa.b=Be(Rt,3)+2,fa=Dr(ba(aa.Ea,aa.b),ba(aa.nc,aa.b),0,Ta,aa.K),aa.K=aa.K[0];break;case 3:var Qa,Ka=Be(Rt,8)+1,Nr=16<Ka?0:4<Ka?1:2<Ka?2:3;if(_a[0]=ba(aa.Ea,Nr),aa.b=Nr,Qa=fa=Dr(Ka,1,0,Ta,aa.K)){var Ar,hn=Ka,fr=aa,Pi=1<<(8>>fr.b),Mi=l(Pi);if(Mi==null)Qa=0;else{var Yn=fr.K[0],ui=fr.w;for(Mi[0]=fr.K[0][0],Ar=1;Ar<1*hn;++Ar)Mi[Ar]=Pa(Yn[ui+Ar],Mi[Ar-1]);for(;Ar<4*Pi;++Ar)Mi[Ar]=0;fr.K[0]=null,fr.K[0]=Mi,Qa=1}}fa=Qa;break;case 2:break;default:e(0)}nt=fa}}if(st=st[0],ht=ht[0],nt&&Be(mt,1)&&!(nt=1<=(Pt=Be(mt,4))&&11>=Pt)){Me.a=3;break e}var as;if(as=nt)t:{var Hn,xn,vs,Wi=Me,$n=st,wo=ht,Ei=Pt,ps=ye,Pn=Wi.m,qi=Wi.s,Qs=[null],Oo=1,cl=0,kl=Ou[Ei];a:for(;;){if(ps&&Be(Pn,1)){var Is=Be(Pn,3)+2,Ul=ba($n,Is),Du=ba(wo,Is),Ea=Ul*Du;if(!Dr(Ul,Du,0,Wi,Qs))break a;for(Qs=Qs[0],qi.xc=Is,Hn=0;Hn<Ea;++Hn){var Ba=Qs[Hn]>>8&65535;Qs[Hn]=Ba,Ba>=Oo&&(Oo=Ba+1)}}if(Pn.h)break a;for(xn=0;5>xn;++xn){var rs=ol[xn];!xn&&0<Ei&&(rs+=1<<Ei),cl<rs&&(cl=rs)}var Bi=c(Oo*kl,_e),qt=Oo,sm=c(qt,Ee);if(sm==null)var _h=null;else e(65536>=qt),_h=sm;var wh=l(cl);if(_h==null||wh==null||Bi==null){Wi.a=1;break a}var Rh=Bi;for(Hn=vs=0;Hn<Oo;++Hn){var Mu=_h[Hn],Th=Mu.G,tc=Mu.H,ag=0,up=1,rg=0;for(xn=0;5>xn;++xn){rs=ol[xn],Th[xn]=Rh,tc[xn]=vs,!xn&&0<Ei&&(rs+=1<<Ei);n:{var Ch,Bl=rs,Xh=Wi,ed=wh,td=Rh,cp=vs,ad=0,dl=Xh.m,ng=Be(dl,1);if(i(ed,0,0,Bl),ng){var uo=Be(dl,1)+1,Kg=Be(dl,1),Sh=Be(dl,Kg==0?1:8);ed[Sh]=1,uo==2&&(ed[Sh=Be(dl,8)]=1);var ci=1}else{var Mn=l(19),dp=Be(dl,4)+4;if(19<dp){Xh.a=3;var Iu=0;break n}for(Ch=0;Ch<dp;++Ch)Mn[xi[Ch]]=Be(dl,3);var Hd=void 0,Lu=void 0,rd=Xh,Of=Mn,Jh=Bl,jl=ed,Vf=0,Vo=rd.m,$d=8,hp=c(128,_e);r:for(;oe(hp,0,7,Of,19);){if(Be(Vo,1)){var fp=2+2*Be(Vo,3);if((Hd=2+Be(Vo,fp))>Jh)break r}else Hd=Jh;for(Lu=0;Lu<Jh&&Hd--;){at(Vo);var bh=hp[0+(127&Te(Vo))];Ge(Vo,Vo.u+bh.g);var nd=bh.value;if(16>nd)jl[Lu++]=nd,nd!=0&&($d=nd);else{var id=nd==16,pp=nd-16,Kd=qh[pp],Fu=Be(Vo,Zh[pp])+Kd;if(Lu+Fu>Jh)break r;for(var Pc=id?$d:0;0<Fu--;)jl[Lu++]=Pc}}Vf=1;break r}Vf||(rd.a=3),ci=Vf}(ci=ci&&!dl.h)&&(ad=oe(td,cp,8,ed,Bl)),ci&&ad!=0?Iu=ad:(Xh.a=3,Iu=0)}if(Iu==0)break a;if(up&&ts[xn]==1&&(up=Rh[vs].g==0),ag+=Rh[vs].g,vs+=Iu,3>=xn){var uu,Ec=wh[0];for(uu=1;uu<rs;++uu)wh[uu]>Ec&&(Ec=wh[uu]);rg+=Ec}}if(Mu.nd=up,Mu.Qb=0,up&&(Mu.qb=(Th[3][tc[3]+0].value<<24|Th[1][tc[1]+0].value<<16|Th[2][tc[2]+0].value)>>>0,ag==0&&256>Th[0][tc[0]+0].value&&(Mu.Qb=1,Mu.qb+=Th[0][tc[0]+0].value<<8)),Mu.jc=!Mu.Qb&&6>rg,Mu.jc){var Ls,cu=Mu;for(Ls=0;Ls<Ms;++Ls){var ac=Ls,eo=cu.pd[ac],ku=cu.G[0][cu.H[0]+ac];256<=ku.value?(eo.g=ku.g+256,eo.value=ku.value):(eo.g=0,eo.value=0,ac>>=bt(ku,8,eo),ac>>=bt(cu.G[1][cu.H[1]+ac],16,eo),ac>>=bt(cu.G[2][cu.H[2]+ac],0,eo),bt(cu.G[3][cu.H[3]+ac],24,eo))}}}qi.vc=Qs,qi.Wb=Oo,qi.Ya=_h,qi.yc=Bi,as=1;break t}as=0}if(!(nt=as)){Me.a=3;break e}if(0<Pt){if(St.ua=1<<Pt,!It(St.Wa,Pt)){Me.a=1,nt=0;break e}}else St.ua=0;var xh=Me,mp=st,Qh=ht,Ph=xh.s,Wd=Ph.xc;if(xh.c=mp,xh.i=Qh,Ph.md=ba(mp,Wd),Ph.wc=Wd==0?-1:(1<<Wd)-1,ye){Me.xb=$g;break e}if((ea=l(st*ht))==null){Me.a=1,nt=0;break e}nt=(nt=Ia(Me,ea,0,st,ht,ht,null))&&!mt.h;break e}return nt?(We!=null?We[0]=ea:(e(ea==null),e(ye)),Me.$=0,ye||Ga(St)):Ga(St),nt}function Mr(G,Q){var ye=G.c*G.i,Me=ye+Q+16*Q;return e(G.c<=Q),G.V=l(Me),G.V==null?(G.Ta=null,G.Ua=0,G.a=1,0):(G.Ta=G.V,G.Ua=G.Ba+ye+Q,1)}function Hr(G,Q){var ye=G.C,Me=Q-ye,We=G.V,nt=G.Ba+G.c*ye;for(e(Q<=G.l.o);0<Me;){var st=16<Me?16:Me,ht=G.l.ma,mt=G.l.width,St=mt*st,ea=ht.ca,Pt=ht.tb+mt*ye,_a=G.Ta,na=G.Ua;Et(G,st,We,nt),es(_a,na,ea,Pt,St),Kt(ht,ye,ye+st,ea,Pt,mt),Me-=st,We+=st*G.c,ye+=st}e(ye==Q),G.C=G.Ma=Q}function Un(){this.ub=this.yd=this.td=this.Rb=0}function ri(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Yr(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function Cn(){this.Yb=function(){var G=[];return function Q(ye,Me,We){for(var nt=We[Me],st=0;st<nt&&(ye.push(We.length>Me+1?[]:0),!(We.length<Me+1));st++)Q(ye[st],Me+1,We)}(G,0,[3,11]),G}()}function Xr(){this.jb=l(3),this.Wc=n([4,8],Cn),this.Xc=n([4,17],Cn)}function jn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function ki(){this.ld=this.La=this.dd=this.tc=0}function Xi(){this.Na=this.la=0}function Ps(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Es(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Bo(){this.uc=this.M=this.Nb=0,this.wa=Array(new ki),this.Y=0,this.ya=Array(new Es),this.aa=0,this.l=new pc}function Ns(){this.y=l(16),this.f=l(8),this.ea=l(8)}function $s(){this.cb=this.a=0,this.sc="",this.m=new qe,this.Od=new Un,this.Kc=new ri,this.ed=new jn,this.Qa=new Yr,this.Ic=this.$c=this.Aa=0,this.D=new Bo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,qe),this.ia=0,this.pb=c(4,Ps),this.Pa=new Xr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ns),this.Hd=0,this.rb=Array(new Xi),this.sb=0,this.wa=Array(new ki),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Es),this.L=this.aa=0,this.gd=n([4,2],ki),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function pc(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function tl(){var G=new $s;return G!=null&&(G.a=0,G.sc="OK",G.cb=0,G.Xb=0,Ud||(Ud=Pd)),G}function Ui(G,Q,ye){return G.a==0&&(G.a=Q,G.sc=ye,G.cb=0),0}function Xl(G,Q,ye){return 3<=ye&&G[Q+0]==157&&G[Q+1]==1&&G[Q+2]==42}function jo(G,Q){if(G==null)return 0;if(G.a=0,G.sc="OK",Q==null)return Ui(G,2,"null VP8Io passed to VP8GetHeaders()");var ye=Q.data,Me=Q.w,We=Q.ha;if(4>We)return Ui(G,7,"Truncated header.");var nt=ye[Me+0]|ye[Me+1]<<8|ye[Me+2]<<16,st=G.Od;if(st.Rb=!(1&nt),st.td=nt>>1&7,st.yd=nt>>4&1,st.ub=nt>>5,3<st.td)return Ui(G,3,"Incorrect keyframe parameters.");if(!st.yd)return Ui(G,4,"Frame not displayable.");Me+=3,We-=3;var ht=G.Kc;if(st.Rb){if(7>We)return Ui(G,7,"cannot parse picture header");if(!Xl(ye,Me,We))return Ui(G,3,"Bad code word");ht.c=16383&(ye[Me+4]<<8|ye[Me+3]),ht.Td=ye[Me+4]>>6,ht.i=16383&(ye[Me+6]<<8|ye[Me+5]),ht.Ud=ye[Me+6]>>6,Me+=7,We-=7,G.za=ht.c+15>>4,G.Ub=ht.i+15>>4,Q.width=ht.c,Q.height=ht.i,Q.Da=0,Q.j=0,Q.v=0,Q.va=Q.width,Q.o=Q.height,Q.da=0,Q.ib=Q.width,Q.hb=Q.height,Q.U=Q.width,Q.T=Q.height,i((nt=G.Pa).jb,0,255,nt.jb.length),e((nt=G.Qa)!=null),nt.Cb=0,nt.Bb=0,nt.Fb=1,i(nt.Zb,0,0,nt.Zb.length),i(nt.Lb,0,0,nt.Lb)}if(st.ub>We)return Ui(G,7,"bad partition length");ze(nt=G.m,ye,Me,st.ub),Me+=st.ub,We-=st.ub,st.Rb&&(ht.Ld=lt(nt),ht.Kd=lt(nt)),ht=G.Qa;var mt,St=G.Pa;if(e(nt!=null),e(ht!=null),ht.Cb=lt(nt),ht.Cb){if(ht.Bb=lt(nt),lt(nt)){for(ht.Fb=lt(nt),mt=0;4>mt;++mt)ht.Zb[mt]=lt(nt)?je(nt,7):0;for(mt=0;4>mt;++mt)ht.Lb[mt]=lt(nt)?je(nt,6):0}if(ht.Bb)for(mt=0;3>mt;++mt)St.jb[mt]=lt(nt)?Se(nt,8):255}else ht.Bb=0;if(nt.Ka)return Ui(G,3,"cannot parse segment header");if((ht=G.ed).zd=lt(nt),ht.Tb=Se(nt,6),ht.wb=Se(nt,3),ht.Pc=lt(nt),ht.Pc&&lt(nt)){for(St=0;4>St;++St)lt(nt)&&(ht.vd[St]=je(nt,6));for(St=0;4>St;++St)lt(nt)&&(ht.od[St]=je(nt,6))}if(G.L=ht.Tb==0?0:ht.zd?1:2,nt.Ka)return Ui(G,3,"cannot parse filter header");var ea=We;if(We=mt=Me,Me=mt+ea,ht=ea,G.Xb=(1<<Se(G.m,2))-1,ea<3*(St=G.Xb))ye=7;else{for(mt+=3*St,ht-=3*St,ea=0;ea<St;++ea){var Pt=ye[We+0]|ye[We+1]<<8|ye[We+2]<<16;Pt>ht&&(Pt=ht),ze(G.Jc[+ea],ye,mt,Pt),mt+=Pt,ht-=Pt,We+=3}ze(G.Jc[+St],ye,mt,ht),ye=mt<Me?0:5}if(ye!=0)return Ui(G,ye,"cannot parse partitions");for(ye=Se(mt=G.m,7),We=lt(mt)?je(mt,4):0,Me=lt(mt)?je(mt,4):0,ht=lt(mt)?je(mt,4):0,St=lt(mt)?je(mt,4):0,mt=lt(mt)?je(mt,4):0,ea=G.Qa,Pt=0;4>Pt;++Pt){if(ea.Cb){var _a=ea.Zb[Pt];ea.Fb||(_a+=ye)}else{if(0<Pt){G.pb[Pt]=G.pb[0];continue}_a=ye}var na=G.pb[Pt];na.Sc[0]=bc[vl(_a+We,127)],na.Sc[1]=xf[vl(_a+0,127)],na.Eb[0]=2*bc[vl(_a+Me,127)],na.Eb[1]=101581*xf[vl(_a+ht,127)]>>16,8>na.Eb[1]&&(na.Eb[1]=8),na.Qc[0]=bc[vl(_a+St,117)],na.Qc[1]=xf[vl(_a+mt,127)],na.lc=_a+mt}if(!st.Rb)return Ui(G,4,"Not a key frame.");for(lt(nt),st=G.Pa,ye=0;4>ye;++ye){for(We=0;8>We;++We)for(Me=0;3>Me;++Me)for(ht=0;11>ht;++ht)St=ot(nt,vh[ye][We][Me][ht])?Se(nt,8):Pf[ye][We][Me][ht],st.Wc[ye][We].Yb[Me][ht]=St;for(We=0;17>We;++We)st.Xc[ye][We]=st.Wc[ye][Hg[We]]}return G.kc=lt(nt),G.kc&&(G.Bd=Se(nt,8)),G.cb=1}function Pd(G,Q,ye,Me,We,nt,st){var ht=Q[We].Yb[ye];for(ye=0;16>We;++We){if(!ot(G,ht[ye+0]))return We;for(;!ot(G,ht[ye+1]);)if(ht=Q[++We].Yb[0],ye=0,We==16)return 16;var mt=Q[We+1].Yb;if(ot(G,ht[ye+2])){var St=G,ea=0;if(ot(St,(_a=ht)[(Pt=ye)+3]))if(ot(St,_a[Pt+6])){for(ht=0,Pt=2*(ea=ot(St,_a[Pt+8]))+(_a=ot(St,_a[Pt+9+ea])),ea=0,_a=Hh[Pt];_a[ht];++ht)ea+=ea+ot(St,_a[ht]);ea+=3+(8<<Pt)}else ot(St,_a[Pt+7])?(ea=7+2*ot(St,165),ea+=ot(St,145)):ea=5+ot(St,159);else ea=ot(St,_a[Pt+4])?3+ot(St,_a[Pt+5]):2;ht=mt[2]}else ea=1,ht=mt[1];mt=st+$h[We],0>(St=G).b&&rt(St);var Pt,_a=St.b,na=(Pt=St.Ca>>1)-(St.I>>_a)>>31;--St.b,St.Ca+=na,St.Ca|=1,St.I-=(Pt+1&na)<<_a,nt[mt]=((ea^na)-na)*Me[(0<We)+0]}return 16}function kc(G){var Q=G.rb[G.sb-1];Q.la=0,Q.Na=0,i(G.zc,0,0,G.zc.length),G.ja=0}function fh(G,Q){if(G==null)return 0;if(Q==null)return Ui(G,2,"NULL VP8Io parameter in VP8Decode().");if(!G.cb&&!jo(G,Q))return 0;if(e(G.cb),Q.ac==null||Q.ac(Q)){Q.ob&&(G.L=0);var ye=Nf[G.L];if(G.L==2?(G.yb=0,G.zb=0):(G.yb=Q.v-ye>>4,G.zb=Q.j-ye>>4,0>G.yb&&(G.yb=0),0>G.zb&&(G.zb=0)),G.Va=Q.o+15+ye>>4,G.Hb=Q.va+15+ye>>4,G.Hb>G.za&&(G.Hb=G.za),G.Va>G.Ub&&(G.Va=G.Ub),0<G.L){var Me=G.ed;for(ye=0;4>ye;++ye){var We;if(G.Qa.Cb){var nt=G.Qa.Lb[ye];G.Qa.Fb||(nt+=Me.Tb)}else nt=Me.Tb;for(We=0;1>=We;++We){var st=G.gd[ye][We],ht=nt;if(Me.Pc&&(ht+=Me.vd[0],We&&(ht+=Me.od[0])),0<(ht=0>ht?0:63<ht?63:ht)){var mt=ht;0<Me.wb&&(mt=4<Me.wb?mt>>2:mt>>1)>9-Me.wb&&(mt=9-Me.wb),1>mt&&(mt=1),st.dd=mt,st.tc=2*ht+mt,st.ld=40<=ht?2:15<=ht?1:0}else st.tc=0;st.La=We}}}ye=0}else Ui(G,6,"Frame setup failed"),ye=G.a;if(ye=ye==0){if(ye){G.$c=0,0<G.Aa||(G.Ic=lo);e:{ye=G.Ic,Me=4*(mt=G.za);var St=32*mt,ea=mt+1,Pt=0<G.L?mt*(0<G.Aa?2:1):0,_a=(G.Aa==2?2:1)*mt;if((st=Me+832+(We=3*(16*ye+Nf[G.L])/2*St)+(nt=G.Fa!=null&&0<G.Fa.length?G.Kc.c*G.Kc.i:0))!=st)ye=0;else{if(st>G.Vb){if(G.Vb=0,G.Ec=l(st),G.Fc=0,G.Ec==null){ye=Ui(G,1,"no memory during frame initialization.");break e}G.Vb=st}st=G.Ec,ht=G.Fc,G.Ac=st,G.Bc=ht,ht+=Me,G.Gd=c(St,Ns),G.Hd=0,G.rb=c(ea+1,Xi),G.sb=1,G.wa=Pt?c(Pt,ki):null,G.Y=0,G.D.Nb=0,G.D.wa=G.wa,G.D.Y=G.Y,0<G.Aa&&(G.D.Y+=mt),e(!0),G.oc=st,G.pc=ht,ht+=832,G.ya=c(_a,Es),G.aa=0,G.D.ya=G.ya,G.D.aa=G.aa,G.Aa==2&&(G.D.aa+=mt),G.R=16*mt,G.B=8*mt,mt=(St=Nf[G.L])*G.R,St=St/2*G.B,G.sa=st,G.ta=ht+mt,G.qa=G.sa,G.ra=G.ta+16*ye*G.R+St,G.Ha=G.qa,G.Ia=G.ra+8*ye*G.B+St,G.$c=0,ht+=We,G.mb=nt?st:null,G.nb=nt?ht:null,e(ht+nt<=G.Fc+G.Vb),kc(G),i(G.Ac,G.Bc,0,Me),ye=1}}if(ye){if(Q.ka=0,Q.y=G.sa,Q.O=G.ta,Q.f=G.qa,Q.N=G.ra,Q.ea=G.Ha,Q.Vd=G.Ia,Q.fa=G.R,Q.Rc=G.B,Q.F=null,Q.J=0,!ou){for(ye=-255;255>=ye;++ye)fs[255+ye]=0>ye?-ye:ye;for(ye=-1020;1020>=ye;++ye)su[1020+ye]=-128>ye?-128:127<ye?127:ye;for(ye=-112;112>=ye;++ye)$c[112+ye]=-16>ye?-16:15<ye?15:ye;for(ye=-255;510>=ye;++ye)il[255+ye]=0>ye?0:255<ye?255:ye;ou=1}wc=Ed,xu=Jl,bf=Ru,so=mo,_o=Zo,Qi=Go,Ld=nl,Fd=Ji,oo=hs,Zc=Bh,Rc=Ys,Pu=eu,qc=$o,Eu=Vd,Hc=Ac,Tc=rl,Xu=ys,Ko=Yu,Qu[0]=Ks,Qu[1]=Rf,Qu[2]=mh,Qu[3]=Nn,Qu[4]=mc,Qu[5]=tr,Qu[6]=gc,Qu[7]=dn,Qu[8]=Ws,Qu[9]=bn,xc[0]=zn,xc[1]=qo,xc[2]=Wu,xc[3]=ph,xc[4]=go,xc[5]=gr,xc[6]=Bc,Vu[0]=Tu,Vu[1]=Ql,Vu[2]=Nd,Vu[3]=yn,Vu[4]=Ki,Vu[5]=Os,Vu[6]=Di,ye=1}else ye=0}ye&&(ye=function(na,Ta){for(na.M=0;na.M<na.Va;++na.M){var fa,Rt=na.Jc[na.M&na.Xb],aa=na.m,Za=na;for(fa=0;fa<Za.za;++fa){var Qa=aa,Ka=Za,Nr=Ka.Ac,Ar=Ka.Bc+4*fa,hn=Ka.zc,fr=Ka.ya[Ka.aa+fa];if(Ka.Qa.Bb?fr.$b=ot(Qa,Ka.Pa.jb[0])?2+ot(Qa,Ka.Pa.jb[2]):ot(Qa,Ka.Pa.jb[1]):fr.$b=0,Ka.kc&&(fr.Ad=ot(Qa,Ka.Bd)),fr.Za=!ot(Qa,145)+0,fr.Za){var Pi=fr.Ob,Mi=0;for(Ka=0;4>Ka;++Ka){var Yn,ui=hn[0+Ka];for(Yn=0;4>Yn;++Yn){ui=eg[Nr[Ar+Yn]][ui];for(var as=Bd[ot(Qa,ui[0])];0<as;)as=Bd[2*as+ot(Qa,ui[as])];ui=-as,Nr[Ar+Yn]=ui}r(Pi,Mi,Nr,Ar,4),Mi+=4,hn[0+Ka]=ui}}else ui=ot(Qa,156)?ot(Qa,128)?1:3:ot(Qa,163)?2:0,fr.Ob[0]=ui,i(Nr,Ar,ui,4),i(hn,0,ui,4);fr.Dd=ot(Qa,142)?ot(Qa,114)?ot(Qa,183)?1:3:2:0}if(Za.m.Ka)return Ui(na,7,"Premature end-of-partition0 encountered.");for(;na.ja<na.za;++na.ja){if(Za=Rt,Qa=(aa=na).rb[aa.sb-1],Nr=aa.rb[aa.sb+aa.ja],fa=aa.ya[aa.aa+aa.ja],Ar=aa.kc?fa.Ad:0)Qa.la=Nr.la=0,fa.Za||(Qa.Na=Nr.Na=0),fa.Hc=0,fa.Gc=0,fa.ia=0;else{var Hn,xn;if(Qa=Nr,Nr=Za,Ar=aa.Pa.Xc,hn=aa.ya[aa.aa+aa.ja],fr=aa.pb[hn.$b],Ka=hn.ad,Pi=0,Mi=aa.rb[aa.sb-1],ui=Yn=0,i(Ka,Pi,0,384),hn.Za)var vs=0,Wi=Ar[3];else{as=l(16);var $n=Qa.Na+Mi.Na;if($n=Ud(Nr,Ar[1],$n,fr.Eb,0,as,0),Qa.Na=Mi.Na=(0<$n)+0,1<$n)wc(as,0,Ka,Pi);else{var wo=as[0]+3>>3;for(as=0;256>as;as+=16)Ka[Pi+as]=wo}vs=1,Wi=Ar[0]}var Ei=15&Qa.la,ps=15&Mi.la;for(as=0;4>as;++as){var Pn=1&ps;for(wo=xn=0;4>wo;++wo)Ei=Ei>>1|(Pn=($n=Ud(Nr,Wi,$n=Pn+(1&Ei),fr.Sc,vs,Ka,Pi))>vs)<<7,xn=xn<<2|(3<$n?3:1<$n?2:Ka[Pi+0]!=0),Pi+=16;Ei>>=4,ps=ps>>1|Pn<<7,Yn=(Yn<<8|xn)>>>0}for(Wi=Ei,vs=ps>>4,Hn=0;4>Hn;Hn+=2){for(xn=0,Ei=Qa.la>>4+Hn,ps=Mi.la>>4+Hn,as=0;2>as;++as){for(Pn=1&ps,wo=0;2>wo;++wo)$n=Pn+(1&Ei),Ei=Ei>>1|(Pn=0<($n=Ud(Nr,Ar[2],$n,fr.Qc,0,Ka,Pi)))<<3,xn=xn<<2|(3<$n?3:1<$n?2:Ka[Pi+0]!=0),Pi+=16;Ei>>=2,ps=ps>>1|Pn<<5}ui|=xn<<4*Hn,Wi|=Ei<<4<<Hn,vs|=(240&ps)<<Hn}Qa.la=Wi,Mi.la=vs,hn.Hc=Yn,hn.Gc=ui,hn.ia=43690&ui?0:fr.ia,Ar=!(Yn|ui)}if(0<aa.L&&(aa.wa[aa.Y+aa.ja]=aa.gd[fa.$b][fa.Za],aa.wa[aa.Y+aa.ja].La|=!Ar),Za.Ka)return Ui(na,7,"Premature end-of-file encountered.")}if(kc(na),aa=Ta,Za=1,fa=(Rt=na).D,Qa=0<Rt.L&&Rt.M>=Rt.zb&&Rt.M<=Rt.Va,Rt.Aa==0)e:{if(fa.M=Rt.M,fa.uc=Qa,Sr(Rt,fa),Za=1,fa=(xn=Rt.D).Nb,Qa=(ui=Nf[Rt.L])*Rt.R,Nr=ui/2*Rt.B,as=16*fa*Rt.R,wo=8*fa*Rt.B,Ar=Rt.sa,hn=Rt.ta-Qa+as,fr=Rt.qa,Ka=Rt.ra-Nr+wo,Pi=Rt.Ha,Mi=Rt.Ia-Nr+wo,ps=(Ei=xn.M)==0,Yn=Ei>=Rt.Va-1,Rt.Aa==2&&Sr(Rt,xn),xn.uc)for(Pn=($n=Rt).D.M,e($n.D.uc),xn=$n.yb;xn<$n.Hb;++xn){vs=xn,Wi=Pn;var qi=(Qs=(rs=$n).D).Nb;Hn=rs.R;var Qs=Qs.wa[Qs.Y+vs],Oo=rs.sa,cl=rs.ta+16*qi*Hn+16*vs,kl=Qs.dd,Is=Qs.tc;if(Is!=0)if(e(3<=Is),rs.L==1)0<vs&&Tc(Oo,cl,Hn,Is+4),Qs.La&&Ko(Oo,cl,Hn,Is),0<Wi&&Hc(Oo,cl,Hn,Is+4),Qs.La&&Xu(Oo,cl,Hn,Is);else{var Ul=rs.B,Du=rs.qa,Ea=rs.ra+8*qi*Ul+8*vs,Ba=rs.Ha,rs=rs.Ia+8*qi*Ul+8*vs;qi=Qs.ld,0<vs&&(Fd(Oo,cl,Hn,Is+4,kl,qi),Zc(Du,Ea,Ba,rs,Ul,Is+4,kl,qi)),Qs.La&&(Pu(Oo,cl,Hn,Is,kl,qi),Eu(Du,Ea,Ba,rs,Ul,Is,kl,qi)),0<Wi&&(Ld(Oo,cl,Hn,Is+4,kl,qi),oo(Du,Ea,Ba,rs,Ul,Is+4,kl,qi)),Qs.La&&(Rc(Oo,cl,Hn,Is,kl,qi),qc(Du,Ea,Ba,rs,Ul,Is,kl,qi))}}if(Rt.ia&&alert("todo:DitherRow"),aa.put!=null){if(xn=16*Ei,Ei=16*(Ei+1),ps?(aa.y=Rt.sa,aa.O=Rt.ta+as,aa.f=Rt.qa,aa.N=Rt.ra+wo,aa.ea=Rt.Ha,aa.W=Rt.Ia+wo):(xn-=ui,aa.y=Ar,aa.O=hn,aa.f=fr,aa.N=Ka,aa.ea=Pi,aa.W=Mi),Yn||(Ei-=ui),Ei>aa.o&&(Ei=aa.o),aa.F=null,aa.J=null,Rt.Fa!=null&&0<Rt.Fa.length&&xn<Ei&&(aa.J=Cf(Rt,aa,xn,Ei-xn),aa.F=Rt.mb,aa.F==null&&aa.F.length==0)){Za=Ui(Rt,3,"Could not decode alpha data.");break e}xn<aa.j&&(ui=aa.j-xn,xn=aa.j,e(!(1&ui)),aa.O+=Rt.R*ui,aa.N+=Rt.B*(ui>>1),aa.W+=Rt.B*(ui>>1),aa.F!=null&&(aa.J+=aa.width*ui)),xn<Ei&&(aa.O+=aa.v,aa.N+=aa.v>>1,aa.W+=aa.v>>1,aa.F!=null&&(aa.J+=aa.v),aa.ka=xn-aa.j,aa.U=aa.va-aa.v,aa.T=Ei-xn,Za=aa.put(aa))}fa+1!=Rt.Ic||Yn||(r(Rt.sa,Rt.ta-Qa,Ar,hn+16*Rt.R,Qa),r(Rt.qa,Rt.ra-Nr,fr,Ka+8*Rt.B,Nr),r(Rt.Ha,Rt.Ia-Nr,Pi,Mi+8*Rt.B,Nr))}if(!Za)return Ui(na,6,"Output aborted.")}return 1}(G,Q)),Q.bc!=null&&Q.bc(Q),ye&=1}return ye?(G.cb=0,ye):0}function wu(G,Q,ye,Me,We){We=G[Q+ye+32*Me]+(We>>3),G[Q+ye+32*Me]=-256&We?0>We?0:255:We}function Uc(G,Q,ye,Me,We,nt){wu(G,Q,0,ye,Me+We),wu(G,Q,1,ye,Me+nt),wu(G,Q,2,ye,Me-nt),wu(G,Q,3,ye,Me-We)}function Al(G){return(20091*G>>16)+G}function no(G,Q,ye,Me){var We,nt=0,st=l(16);for(We=0;4>We;++We){var ht=G[Q+0]+G[Q+8],mt=G[Q+0]-G[Q+8],St=(35468*G[Q+4]>>16)-Al(G[Q+12]),ea=Al(G[Q+4])+(35468*G[Q+12]>>16);st[nt+0]=ht+ea,st[nt+1]=mt+St,st[nt+2]=mt-St,st[nt+3]=ht-ea,nt+=4,Q++}for(We=nt=0;4>We;++We)ht=(G=st[nt+0]+4)+st[nt+8],mt=G-st[nt+8],St=(35468*st[nt+4]>>16)-Al(st[nt+12]),wu(ye,Me,0,0,ht+(ea=Al(st[nt+4])+(35468*st[nt+12]>>16))),wu(ye,Me,1,0,mt+St),wu(ye,Me,2,0,mt-St),wu(ye,Me,3,0,ht-ea),nt++,Me+=32}function Go(G,Q,ye,Me){var We=G[Q+0]+4,nt=35468*G[Q+4]>>16,st=Al(G[Q+4]),ht=35468*G[Q+1]>>16;Uc(ye,Me,0,We+st,G=Al(G[Q+1]),ht),Uc(ye,Me,1,We+nt,G,ht),Uc(ye,Me,2,We-nt,G,ht),Uc(ye,Me,3,We-st,G,ht)}function Jl(G,Q,ye,Me,We){no(G,Q,ye,Me),We&&no(G,Q+16,ye,Me+4)}function Ru(G,Q,ye,Me){xu(G,Q+0,ye,Me,1),xu(G,Q+32,ye,Me+128,1)}function mo(G,Q,ye,Me){var We;for(G=G[Q+0]+4,We=0;4>We;++We)for(Q=0;4>Q;++Q)wu(ye,Me,Q,We,G)}function Zo(G,Q,ye,Me){G[Q+0]&&so(G,Q+0,ye,Me),G[Q+16]&&so(G,Q+16,ye,Me+4),G[Q+32]&&so(G,Q+32,ye,Me+128),G[Q+48]&&so(G,Q+48,ye,Me+128+4)}function Ed(G,Q,ye,Me){var We,nt=l(16);for(We=0;4>We;++We){var st=G[Q+0+We]+G[Q+12+We],ht=G[Q+4+We]+G[Q+8+We],mt=G[Q+4+We]-G[Q+8+We],St=G[Q+0+We]-G[Q+12+We];nt[0+We]=st+ht,nt[8+We]=st-ht,nt[4+We]=St+mt,nt[12+We]=St-mt}for(We=0;4>We;++We)st=(G=nt[0+4*We]+3)+nt[3+4*We],ht=nt[1+4*We]+nt[2+4*We],mt=nt[1+4*We]-nt[2+4*We],St=G-nt[3+4*We],ye[Me+0]=st+ht>>3,ye[Me+16]=St+mt>>3,ye[Me+32]=st-ht>>3,ye[Me+48]=St-mt>>3,Me+=64}function Ku(G,Q,ye){var Me,We=Q-32,nt=Ll,st=255-G[We-1];for(Me=0;Me<ye;++Me){var ht,mt=nt,St=st+G[Q-1];for(ht=0;ht<ye;++ht)G[Q+ht]=mt[St+G[We+ht]];Q+=32}}function Rf(G,Q){Ku(G,Q,4)}function Ql(G,Q){Ku(G,Q,8)}function qo(G,Q){Ku(G,Q,16)}function Wu(G,Q){var ye;for(ye=0;16>ye;++ye)r(G,Q+32*ye,G,Q-32,16)}function ph(G,Q){var ye;for(ye=16;0<ye;--ye)i(G,Q,G[Q-1],16),Q+=32}function al(G,Q,ye){var Me;for(Me=0;16>Me;++Me)i(Q,ye+32*Me,G,16)}function zn(G,Q){var ye,Me=16;for(ye=0;16>ye;++ye)Me+=G[Q-1+32*ye]+G[Q+ye-32];al(Me>>5,G,Q)}function go(G,Q){var ye,Me=8;for(ye=0;16>ye;++ye)Me+=G[Q-1+32*ye];al(Me>>4,G,Q)}function gr(G,Q){var ye,Me=8;for(ye=0;16>ye;++ye)Me+=G[Q+ye-32];al(Me>>4,G,Q)}function Bc(G,Q){al(128,G,Q)}function Sn(G,Q,ye){return G+2*Q+ye+2>>2}function mh(G,Q){var ye,Me=Q-32;for(Me=new Uint8Array([Sn(G[Me-1],G[Me+0],G[Me+1]),Sn(G[Me+0],G[Me+1],G[Me+2]),Sn(G[Me+1],G[Me+2],G[Me+3]),Sn(G[Me+2],G[Me+3],G[Me+4])]),ye=0;4>ye;++ye)r(G,Q+32*ye,Me,0,Me.length)}function Nn(G,Q){var ye=G[Q-1],Me=G[Q-1+32],We=G[Q-1+64],nt=G[Q-1+96];ve(G,Q+0,16843009*Sn(G[Q-1-32],ye,Me)),ve(G,Q+32,16843009*Sn(ye,Me,We)),ve(G,Q+64,16843009*Sn(Me,We,nt)),ve(G,Q+96,16843009*Sn(We,nt,nt))}function Ks(G,Q){var ye,Me=4;for(ye=0;4>ye;++ye)Me+=G[Q+ye-32]+G[Q-1+32*ye];for(Me>>=3,ye=0;4>ye;++ye)i(G,Q+32*ye,Me,4)}function mc(G,Q){var ye=G[Q-1+0],Me=G[Q-1+32],We=G[Q-1+64],nt=G[Q-1-32],st=G[Q+0-32],ht=G[Q+1-32],mt=G[Q+2-32],St=G[Q+3-32];G[Q+0+96]=Sn(Me,We,G[Q-1+96]),G[Q+1+96]=G[Q+0+64]=Sn(ye,Me,We),G[Q+2+96]=G[Q+1+64]=G[Q+0+32]=Sn(nt,ye,Me),G[Q+3+96]=G[Q+2+64]=G[Q+1+32]=G[Q+0+0]=Sn(st,nt,ye),G[Q+3+64]=G[Q+2+32]=G[Q+1+0]=Sn(ht,st,nt),G[Q+3+32]=G[Q+2+0]=Sn(mt,ht,st),G[Q+3+0]=Sn(St,mt,ht)}function gc(G,Q){var ye=G[Q+1-32],Me=G[Q+2-32],We=G[Q+3-32],nt=G[Q+4-32],st=G[Q+5-32],ht=G[Q+6-32],mt=G[Q+7-32];G[Q+0+0]=Sn(G[Q+0-32],ye,Me),G[Q+1+0]=G[Q+0+32]=Sn(ye,Me,We),G[Q+2+0]=G[Q+1+32]=G[Q+0+64]=Sn(Me,We,nt),G[Q+3+0]=G[Q+2+32]=G[Q+1+64]=G[Q+0+96]=Sn(We,nt,st),G[Q+3+32]=G[Q+2+64]=G[Q+1+96]=Sn(nt,st,ht),G[Q+3+64]=G[Q+2+96]=Sn(st,ht,mt),G[Q+3+96]=Sn(ht,mt,mt)}function tr(G,Q){var ye=G[Q-1+0],Me=G[Q-1+32],We=G[Q-1+64],nt=G[Q-1-32],st=G[Q+0-32],ht=G[Q+1-32],mt=G[Q+2-32],St=G[Q+3-32];G[Q+0+0]=G[Q+1+64]=nt+st+1>>1,G[Q+1+0]=G[Q+2+64]=st+ht+1>>1,G[Q+2+0]=G[Q+3+64]=ht+mt+1>>1,G[Q+3+0]=mt+St+1>>1,G[Q+0+96]=Sn(We,Me,ye),G[Q+0+64]=Sn(Me,ye,nt),G[Q+0+32]=G[Q+1+96]=Sn(ye,nt,st),G[Q+1+32]=G[Q+2+96]=Sn(nt,st,ht),G[Q+2+32]=G[Q+3+96]=Sn(st,ht,mt),G[Q+3+32]=Sn(ht,mt,St)}function dn(G,Q){var ye=G[Q+0-32],Me=G[Q+1-32],We=G[Q+2-32],nt=G[Q+3-32],st=G[Q+4-32],ht=G[Q+5-32],mt=G[Q+6-32],St=G[Q+7-32];G[Q+0+0]=ye+Me+1>>1,G[Q+1+0]=G[Q+0+64]=Me+We+1>>1,G[Q+2+0]=G[Q+1+64]=We+nt+1>>1,G[Q+3+0]=G[Q+2+64]=nt+st+1>>1,G[Q+0+32]=Sn(ye,Me,We),G[Q+1+32]=G[Q+0+96]=Sn(Me,We,nt),G[Q+2+32]=G[Q+1+96]=Sn(We,nt,st),G[Q+3+32]=G[Q+2+96]=Sn(nt,st,ht),G[Q+3+64]=Sn(st,ht,mt),G[Q+3+96]=Sn(ht,mt,St)}function bn(G,Q){var ye=G[Q-1+0],Me=G[Q-1+32],We=G[Q-1+64],nt=G[Q-1+96];G[Q+0+0]=ye+Me+1>>1,G[Q+2+0]=G[Q+0+32]=Me+We+1>>1,G[Q+2+32]=G[Q+0+64]=We+nt+1>>1,G[Q+1+0]=Sn(ye,Me,We),G[Q+3+0]=G[Q+1+32]=Sn(Me,We,nt),G[Q+3+32]=G[Q+1+64]=Sn(We,nt,nt),G[Q+3+64]=G[Q+2+64]=G[Q+0+96]=G[Q+1+96]=G[Q+2+96]=G[Q+3+96]=nt}function Ws(G,Q){var ye=G[Q-1+0],Me=G[Q-1+32],We=G[Q-1+64],nt=G[Q-1+96],st=G[Q-1-32],ht=G[Q+0-32],mt=G[Q+1-32],St=G[Q+2-32];G[Q+0+0]=G[Q+2+32]=ye+st+1>>1,G[Q+0+32]=G[Q+2+64]=Me+ye+1>>1,G[Q+0+64]=G[Q+2+96]=We+Me+1>>1,G[Q+0+96]=nt+We+1>>1,G[Q+3+0]=Sn(ht,mt,St),G[Q+2+0]=Sn(st,ht,mt),G[Q+1+0]=G[Q+3+32]=Sn(ye,st,ht),G[Q+1+32]=G[Q+3+64]=Sn(Me,ye,st),G[Q+1+64]=G[Q+3+96]=Sn(We,Me,ye),G[Q+1+96]=Sn(nt,We,Me)}function Nd(G,Q){var ye;for(ye=0;8>ye;++ye)r(G,Q+32*ye,G,Q-32,8)}function yn(G,Q){var ye;for(ye=0;8>ye;++ye)i(G,Q,G[Q-1],8),Q+=32}function Ho(G,Q,ye){var Me;for(Me=0;8>Me;++Me)i(Q,ye+32*Me,G,8)}function Tu(G,Q){var ye,Me=8;for(ye=0;8>ye;++ye)Me+=G[Q+ye-32]+G[Q-1+32*ye];Ho(Me>>4,G,Q)}function Os(G,Q){var ye,Me=4;for(ye=0;8>ye;++ye)Me+=G[Q+ye-32];Ho(Me>>3,G,Q)}function Ki(G,Q){var ye,Me=4;for(ye=0;8>ye;++ye)Me+=G[Q-1+32*ye];Ho(Me>>3,G,Q)}function Di(G,Q){Ho(128,G,Q)}function yo(G,Q,ye){var Me=G[Q-ye],We=G[Q+0],nt=3*(We-Me)+ln[1020+G[Q-2*ye]-G[Q+ye]],st=Kc[112+(nt+4>>3)];G[Q-ye]=Ll[255+Me+Kc[112+(nt+3>>3)]],G[Q+0]=Ll[255+We-st]}function Od(G,Q,ye,Me){var We=G[Q+0],nt=G[Q+ye];return ls[255+G[Q-2*ye]-G[Q-ye]]>Me||ls[255+nt-We]>Me}function gh(G,Q,ye,Me){return 4*ls[255+G[Q-ye]-G[Q+0]]+ls[255+G[Q-2*ye]-G[Q+ye]]<=Me}function yc(G,Q,ye,Me,We){var nt=G[Q-3*ye],st=G[Q-2*ye],ht=G[Q-ye],mt=G[Q+0],St=G[Q+ye],ea=G[Q+2*ye],Pt=G[Q+3*ye];return 4*ls[255+ht-mt]+ls[255+st-St]>Me?0:ls[255+G[Q-4*ye]-nt]<=We&&ls[255+nt-st]<=We&&ls[255+st-ht]<=We&&ls[255+Pt-ea]<=We&&ls[255+ea-St]<=We&&ls[255+St-mt]<=We}function Ac(G,Q,ye,Me){var We=2*Me+1;for(Me=0;16>Me;++Me)gh(G,Q+Me,ye,We)&&yo(G,Q+Me,ye)}function rl(G,Q,ye,Me){var We=2*Me+1;for(Me=0;16>Me;++Me)gh(G,Q+Me*ye,1,We)&&yo(G,Q+Me*ye,1)}function ys(G,Q,ye,Me){var We;for(We=3;0<We;--We)Ac(G,Q+=4*ye,ye,Me)}function Yu(G,Q,ye,Me){var We;for(We=3;0<We;--We)rl(G,Q+=4,ye,Me)}function Vs(G,Q,ye,Me,We,nt,st,ht){for(nt=2*nt+1;0<We--;){if(yc(G,Q,ye,nt,st))if(Od(G,Q,ye,ht))yo(G,Q,ye);else{var mt=G,St=Q,ea=ye,Pt=mt[St-2*ea],_a=mt[St-ea],na=mt[St+0],Ta=mt[St+ea],fa=mt[St+2*ea],Rt=27*(Za=ln[1020+3*(na-_a)+ln[1020+Pt-Ta]])+63>>7,aa=18*Za+63>>7,Za=9*Za+63>>7;mt[St-3*ea]=Ll[255+mt[St-3*ea]+Za],mt[St-2*ea]=Ll[255+Pt+aa],mt[St-ea]=Ll[255+_a+Rt],mt[St+0]=Ll[255+na-Rt],mt[St+ea]=Ll[255+Ta-aa],mt[St+2*ea]=Ll[255+fa-Za]}Q+=Me}}function zl(G,Q,ye,Me,We,nt,st,ht){for(nt=2*nt+1;0<We--;){if(yc(G,Q,ye,nt,st))if(Od(G,Q,ye,ht))yo(G,Q,ye);else{var mt=G,St=Q,ea=ye,Pt=mt[St-ea],_a=mt[St+0],na=mt[St+ea],Ta=Kc[112+((fa=3*(_a-Pt))+4>>3)],fa=Kc[112+(fa+3>>3)],Rt=Ta+1>>1;mt[St-2*ea]=Ll[255+mt[St-2*ea]+Rt],mt[St-ea]=Ll[255+Pt+fa],mt[St+0]=Ll[255+_a-Ta],mt[St+ea]=Ll[255+na-Rt]}Q+=Me}}function nl(G,Q,ye,Me,We,nt){Vs(G,Q,ye,1,16,Me,We,nt)}function Ji(G,Q,ye,Me,We,nt){Vs(G,Q,1,ye,16,Me,We,nt)}function Ys(G,Q,ye,Me,We,nt){var st;for(st=3;0<st;--st)zl(G,Q+=4*ye,ye,1,16,Me,We,nt)}function eu(G,Q,ye,Me,We,nt){var st;for(st=3;0<st;--st)zl(G,Q+=4,1,ye,16,Me,We,nt)}function hs(G,Q,ye,Me,We,nt,st,ht){Vs(G,Q,We,1,8,nt,st,ht),Vs(ye,Me,We,1,8,nt,st,ht)}function Bh(G,Q,ye,Me,We,nt,st,ht){Vs(G,Q,1,We,8,nt,st,ht),Vs(ye,Me,1,We,8,nt,st,ht)}function $o(G,Q,ye,Me,We,nt,st,ht){zl(G,Q+4*We,We,1,8,nt,st,ht),zl(ye,Me+4*We,We,1,8,nt,st,ht)}function Vd(G,Q,ye,Me,We,nt,st,ht){zl(G,Q+4,1,We,8,nt,st,ht),zl(ye,Me+4,1,We,8,nt,st,ht)}function Cu(){this.ba=new oi,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ga,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Su(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function sp(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function tu(){this.ua=0,this.Wa=new wt,this.vb=new wt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Ee,this.yc=new _e}function Qm(){this.xb=this.a=0,this.l=new pc,this.ca=new oi,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new be,this.Pb=0,this.wd=new be,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new tu,this.ab=0,this.gc=c(4,sp),this.Oc=0}function zd(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new pc,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Xs(G,Q,ye,Me,We,nt,st){for(G=G==null?0:G[Q+0],Q=0;Q<st;++Q)We[nt+Q]=G+ye[Me+Q]&255,G=We[nt+Q]}function Tf(G,Q,ye,Me,We,nt,st){var ht;if(G==null)Xs(null,null,ye,Me,We,nt,st);else for(ht=0;ht<st;++ht)We[nt+ht]=G[Q+ht]+ye[Me+ht]&255}function au(G,Q,ye,Me,We,nt,st){if(G==null)Xs(null,null,ye,Me,We,nt,st);else{var ht,mt=G[Q+0],St=mt,ea=mt;for(ht=0;ht<st;++ht)St=ea+(mt=G[Q+ht])-St,ea=ye[Me+ht]+(-256&St?0>St?0:255:St)&255,St=mt,We[nt+ht]=ea}}function Cf(G,Q,ye,Me){var We=Q.width,nt=Q.o;if(e(G!=null&&Q!=null),0>ye||0>=Me||ye+Me>nt)return null;if(!G.Cc){if(G.ga==null){var st;if(G.ga=new zd,(st=G.ga==null)||(st=Q.width*Q.o,e(G.Gb.length==0),G.Gb=l(st),G.Uc=0,G.Gb==null?st=0:(G.mb=G.Gb,G.nb=G.Uc,G.rc=null,st=1),st=!st),!st){st=G.ga;var ht=G.Fa,mt=G.P,St=G.qc,ea=G.mb,Pt=G.nb,_a=mt+1,na=St-1,Ta=st.l;if(e(ht!=null&&ea!=null&&Q!=null),wl[0]=null,wl[1]=Xs,wl[2]=Tf,wl[3]=au,st.ca=ea,st.tb=Pt,st.c=Q.width,st.i=Q.height,e(0<st.c&&0<st.i),1>=St)Q=0;else if(st.$a=ht[mt+0]>>0&3,st.Z=ht[mt+0]>>2&3,st.Lc=ht[mt+0]>>4&3,mt=ht[mt+0]>>6&3,0>st.$a||1<st.$a||4<=st.Z||1<st.Lc||mt)Q=0;else if(Ta.put=Zt,Ta.ac=Rn,Ta.bc=Ne,Ta.ma=st,Ta.width=Q.width,Ta.height=Q.height,Ta.Da=Q.Da,Ta.v=Q.v,Ta.va=Q.va,Ta.j=Q.j,Ta.o=Q.o,st.$a)e:{e(st.$a==1),Q=Cr();t:for(;;){if(Q==null){Q=0;break e}if(e(st!=null),st.mc=Q,Q.c=st.c,Q.i=st.i,Q.l=st.l,Q.l.ma=st,Q.l.width=st.c,Q.l.height=st.i,Q.a=0,Ue(Q.m,ht,_a,na),!Dr(st.c,st.i,1,Q,null)||(Q.ab==1&&Q.gc[0].hc==3&&Yt(Q.s)?(st.ic=1,ht=Q.c*Q.i,Q.Ta=null,Q.Ua=0,Q.V=l(ht),Q.Ba=0,Q.V==null?(Q.a=1,Q=0):Q=1):(st.ic=0,Q=Mr(Q,st.c)),!Q))break t;Q=1;break e}st.mc=null,Q=0}else Q=na>=st.c*st.i;st=!Q}if(st)return null;G.ga.Lc!=1?G.Ga=0:Me=nt-ye}e(G.ga!=null),e(ye+Me<=nt);e:{if(Q=(ht=G.ga).c,nt=ht.l.o,ht.$a==0){if(_a=G.rc,na=G.Vc,Ta=G.Fa,mt=G.P+1+ye*Q,St=G.mb,ea=G.nb+ye*Q,e(mt<=G.P+G.qc),ht.Z!=0)for(e(wl[ht.Z]!=null),st=0;st<Me;++st)wl[ht.Z](_a,na,Ta,mt,St,ea,Q),_a=St,na=ea,ea+=Q,mt+=Q;else for(st=0;st<Me;++st)r(St,ea,Ta,mt,Q),_a=St,na=ea,ea+=Q,mt+=Q;G.rc=_a,G.Vc=na}else{if(e(ht.mc!=null),Q=ye+Me,e((st=ht.mc)!=null),e(Q<=st.i),st.C>=Q)Q=1;else if(ht.ic||ha(),ht.ic){ht=st.V,_a=st.Ba,na=st.c;var fa=st.i,Rt=(Ta=1,mt=st.$/na,St=st.$%na,ea=st.m,Pt=st.s,st.$),aa=na*fa,Za=na*Q,Qa=Pt.wc,Ka=Rt<Za?Gt(Pt,St,mt):null;e(Rt<=aa),e(Q<=fa),e(Yt(Pt));t:for(;;){for(;!ea.h&&Rt<Za;){if(St&Qa||(Ka=Gt(Pt,St,mt)),e(Ka!=null),at(ea),256>(fa=At(Ka.G[0],Ka.H[0],ea)))ht[_a+Rt]=fa,++Rt,++St>=na&&(St=0,++mt<=Q&&!(mt%16)&&Ca(st,mt));else{if(!(280>fa)){Ta=0;break t}fa=He(fa-256,ea);var Nr,Ar=At(Ka.G[4],Ka.H[4],ea);if(at(ea),!(Rt>=(Ar=yt(na,Ar=He(Ar,ea)))&&aa-Rt>=fa)){Ta=0;break t}for(Nr=0;Nr<fa;++Nr)ht[_a+Rt+Nr]=ht[_a+Rt+Nr-Ar];for(Rt+=fa,St+=fa;St>=na;)St-=na,++mt<=Q&&!(mt%16)&&Ca(st,mt);Rt<Za&&St&Qa&&(Ka=Gt(Pt,St,mt))}e(ea.h==ke(ea))}Ca(st,mt>Q?Q:mt);break t}!Ta||ea.h&&Rt<aa?(Ta=0,st.a=ea.h?5:3):st.$=Rt,Q=Ta}else Q=Ia(st,st.V,st.Ba,st.c,st.i,Q,Hr);if(!Q){Me=0;break e}}ye+Me>=nt&&(G.Cc=1),Me=1}if(!Me)return null;if(G.Cc&&((Me=G.ga)!=null&&(Me.mc=null),G.ga=null,0<G.Ga))return alert("todo:WebPDequantizeLevels"),null}return G.nb+ye*We}function ce(G,Q,ye,Me,We,nt){for(;0<We--;){var st,ht=G,mt=Q+(ye?1:0),St=G,ea=Q+(ye?0:3);for(st=0;st<Me;++st){var Pt=St[ea+4*st];Pt!=255&&(Pt*=32897,ht[mt+4*st+0]=ht[mt+4*st+0]*Pt>>23,ht[mt+4*st+1]=ht[mt+4*st+1]*Pt>>23,ht[mt+4*st+2]=ht[mt+4*st+2]*Pt>>23)}Q+=nt}}function Je(G,Q,ye,Me,We){for(;0<Me--;){var nt;for(nt=0;nt<ye;++nt){var st=G[Q+2*nt+0],ht=15&(St=G[Q+2*nt+1]),mt=4369*ht,St=(240&St|St>>4)*mt>>16;G[Q+2*nt+0]=(240&st|st>>4)*mt>>16&240|(15&st|st<<4)*mt>>16>>4&15,G[Q+2*nt+1]=240&St|ht}Q+=We}}function Mt(G,Q,ye,Me,We,nt,st,ht){var mt,St,ea=255;for(St=0;St<We;++St){for(mt=0;mt<Me;++mt){var Pt=G[Q+mt];nt[st+4*mt]=Pt,ea&=Pt}Q+=ye,st+=ht}return ea!=255}function Jt(G,Q,ye,Me,We){var nt;for(nt=0;nt<We;++nt)ye[Me+nt]=G[Q+nt]>>8}function ha(){As=ce,ai=Je,li=Mt,es=Jt}function Ma(G,Q,ye){Re[G]=function(Me,We,nt,st,ht,mt,St,ea,Pt,_a,na,Ta,fa,Rt,aa,Za,Qa){var Ka,Nr=Qa-1>>1,Ar=ht[mt+0]|St[ea+0]<<16,hn=Pt[_a+0]|na[Ta+0]<<16;e(Me!=null);var fr=3*Ar+hn+131074>>2;for(Q(Me[We+0],255&fr,fr>>16,fa,Rt),nt!=null&&(fr=3*hn+Ar+131074>>2,Q(nt[st+0],255&fr,fr>>16,aa,Za)),Ka=1;Ka<=Nr;++Ka){var Pi=ht[mt+Ka]|St[ea+Ka]<<16,Mi=Pt[_a+Ka]|na[Ta+Ka]<<16,Yn=Ar+Pi+hn+Mi+524296,ui=Yn+2*(Pi+hn)>>3;fr=ui+Ar>>1,Ar=(Yn=Yn+2*(Ar+Mi)>>3)+Pi>>1,Q(Me[We+2*Ka-1],255&fr,fr>>16,fa,Rt+(2*Ka-1)*ye),Q(Me[We+2*Ka-0],255&Ar,Ar>>16,fa,Rt+(2*Ka-0)*ye),nt!=null&&(fr=Yn+hn>>1,Ar=ui+Mi>>1,Q(nt[st+2*Ka-1],255&fr,fr>>16,aa,Za+(2*Ka-1)*ye),Q(nt[st+2*Ka+0],255&Ar,Ar>>16,aa,Za+(2*Ka+0)*ye)),Ar=Pi,hn=Mi}1&Qa||(fr=3*Ar+hn+131074>>2,Q(Me[We+Qa-1],255&fr,fr>>16,fa,Rt+(Qa-1)*ye),nt!=null&&(fr=3*hn+Ar+131074>>2,Q(nt[st+Qa-1],255&fr,fr>>16,aa,Za+(Qa-1)*ye)))}}function ir(){ll[Cc]=Wh,ll[kd]=am,ll[Ai]=jd,ll[Gh]=rm,ll[sl]=Yc,ll[_l]=Ef,ll[Wc]=ul,ll[Nu]=am,ll[Ju]=rm,ll[Sc]=Yc,ll[tm]=Ef}function xr(G){return G&-16384?0>G?0:255:G>>Fl}function Jr(G,Q){return xr((19077*G>>8)+(26149*Q>>8)-14234)}function On(G,Q,ye){return xr((19077*G>>8)-(6419*Q>>8)-(13320*ye>>8)+8708)}function Fn(G,Q){return xr((19077*G>>8)+(33050*Q>>8)-17685)}function Ri(G,Q,ye,Me,We){Me[We+0]=Jr(G,ye),Me[We+1]=On(G,Q,ye),Me[We+2]=Fn(G,Q)}function zs(G,Q,ye,Me,We){Me[We+0]=Fn(G,Q),Me[We+1]=On(G,Q,ye),Me[We+2]=Jr(G,ye)}function Ds(G,Q,ye,Me,We){var nt=On(G,Q,ye);Q=nt<<3&224|Fn(G,Q)>>3,Me[We+0]=248&Jr(G,ye)|nt>>5,Me[We+1]=Q}function io(G,Q,ye,Me,We){var nt=240&Fn(G,Q)|15;Me[We+0]=240&Jr(G,ye)|On(G,Q,ye)>>4,Me[We+1]=nt}function os(G,Q,ye,Me,We){Me[We+0]=255,Ri(G,Q,ye,Me,We+1)}function Vr(G,Q,ye,Me,We){zs(G,Q,ye,Me,We),Me[We+3]=255}function ur(G,Q,ye,Me,We){Ri(G,Q,ye,Me,We),Me[We+3]=255}function vl(G,Q){return 0>G?0:G>Q?Q:G}function Pr(G,Q,ye){Re[G]=function(Me,We,nt,st,ht,mt,St,ea,Pt){for(var _a=ea+(-2&Pt)*ye;ea!=_a;)Q(Me[We+0],nt[st+0],ht[mt+0],St,ea),Q(Me[We+1],nt[st+0],ht[mt+0],St,ea+ye),We+=2,++st,++mt,ea+=2*ye;1&Pt&&Q(Me[We+0],nt[st+0],ht[mt+0],St,ea)}}function bu(G,Q,ye){return ye==0?G==0?Q==0?6:5:Q==0?4:0:ye}function ru(G,Q,ye,Me,We){switch(G>>>30){case 3:xu(Q,ye,Me,We,0);break;case 2:Qi(Q,ye,Me,We);break;case 1:so(Q,ye,Me,We)}}function Sr(G,Q){var ye,Me,We=Q.M,nt=Q.Nb,st=G.oc,ht=G.pc+40,mt=G.oc,St=G.pc+584,ea=G.oc,Pt=G.pc+600;for(ye=0;16>ye;++ye)st[ht+32*ye-1]=129;for(ye=0;8>ye;++ye)mt[St+32*ye-1]=129,ea[Pt+32*ye-1]=129;for(0<We?st[ht-1-32]=mt[St-1-32]=ea[Pt-1-32]=129:(i(st,ht-32-1,127,21),i(mt,St-32-1,127,9),i(ea,Pt-32-1,127,9)),Me=0;Me<G.za;++Me){var _a=Q.ya[Q.aa+Me];if(0<Me){for(ye=-1;16>ye;++ye)r(st,ht+32*ye-4,st,ht+32*ye+12,4);for(ye=-1;8>ye;++ye)r(mt,St+32*ye-4,mt,St+32*ye+4,4),r(ea,Pt+32*ye-4,ea,Pt+32*ye+4,4)}var na=G.Gd,Ta=G.Hd+Me,fa=_a.ad,Rt=_a.Hc;if(0<We&&(r(st,ht-32,na[Ta].y,0,16),r(mt,St-32,na[Ta].f,0,8),r(ea,Pt-32,na[Ta].ea,0,8)),_a.Za){var aa=st,Za=ht-32+16;for(0<We&&(Me>=G.za-1?i(aa,Za,na[Ta].y[15],4):r(aa,Za,na[Ta+1].y,0,4)),ye=0;4>ye;ye++)aa[Za+128+ye]=aa[Za+256+ye]=aa[Za+384+ye]=aa[Za+0+ye];for(ye=0;16>ye;++ye,Rt<<=2)aa=st,Za=ht+tg[ye],Qu[_a.Ob[ye]](aa,Za),ru(Rt,fa,16*+ye,aa,Za)}else if(aa=bu(Me,We,_a.Ob[0]),xc[aa](st,ht),Rt!=0)for(ye=0;16>ye;++ye,Rt<<=2)ru(Rt,fa,16*+ye,st,ht+tg[ye]);for(ye=_a.Gc,aa=bu(Me,We,_a.Dd),Vu[aa](mt,St),Vu[aa](ea,Pt),Rt=fa,aa=mt,Za=St,255&(_a=ye>>0)&&(170&_a?bf(Rt,256,aa,Za):_o(Rt,256,aa,Za)),_a=ea,Rt=Pt,255&(ye>>=8)&&(170&ye?bf(fa,320,_a,Rt):_o(fa,320,_a,Rt)),We<G.Ub-1&&(r(na[Ta].y,0,st,ht+480,16),r(na[Ta].f,0,mt,St+224,8),r(na[Ta].ea,0,ea,Pt+224,8)),ye=8*nt*G.B,na=G.sa,Ta=G.ta+16*Me+16*nt*G.R,fa=G.qa,_a=G.ra+8*Me+ye,Rt=G.Ha,aa=G.Ia+8*Me+ye,ye=0;16>ye;++ye)r(na,Ta+ye*G.R,st,ht+32*ye,16);for(ye=0;8>ye;++ye)r(fa,_a+ye*G.B,mt,St+32*ye,8),r(Rt,aa+ye*G.B,ea,Pt+32*ye,8)}}function yh(G,Q,ye,Me,We,nt,st,ht,mt){var St=[0],ea=[0],Pt=0,_a=mt!=null?mt.kd:0,na=mt??new Su;if(G==null||12>ye)return 7;na.data=G,na.w=Q,na.ha=ye,Q=[Q],ye=[ye],na.gb=[na.gb];e:{var Ta=Q,fa=ye,Rt=na.gb;if(e(G!=null),e(fa!=null),e(Rt!=null),Rt[0]=0,12<=fa[0]&&!a(G,Ta[0],"RIFF")){if(a(G,Ta[0]+8,"WEBP")){Rt=3;break e}var aa=wa(G,Ta[0]+4);if(12>aa||4294967286<aa){Rt=3;break e}if(_a&&aa>fa[0]-8){Rt=7;break e}Rt[0]=aa,Ta[0]+=12,fa[0]-=12}Rt=0}if(Rt!=0)return Rt;for(aa=0<na.gb[0],ye=ye[0];;){e:{var Za=G;fa=Q,Rt=ye;var Qa=St,Ka=ea,Nr=Ta=[0];if((fr=Pt=[Pt])[0]=0,8>Rt[0])Rt=7;else{if(!a(Za,fa[0],"VP8X")){if(wa(Za,fa[0]+4)!=10){Rt=3;break e}if(18>Rt[0]){Rt=7;break e}var Ar=wa(Za,fa[0]+8),hn=1+Bt(Za,fa[0]+12);if(2147483648<=hn*(Za=1+Bt(Za,fa[0]+15))){Rt=3;break e}Nr!=null&&(Nr[0]=Ar),Qa!=null&&(Qa[0]=hn),Ka!=null&&(Ka[0]=Za),fa[0]+=18,Rt[0]-=18,fr[0]=1}Rt=0}}if(Pt=Pt[0],Ta=Ta[0],Rt!=0)return Rt;if(fa=!!(2&Ta),!aa&&Pt)return 3;if(nt!=null&&(nt[0]=!!(16&Ta)),st!=null&&(st[0]=fa),ht!=null&&(ht[0]=0),st=St[0],Ta=ea[0],Pt&&fa&&mt==null){Rt=0;break}if(4>ye){Rt=7;break}if(aa&&Pt||!aa&&!Pt&&!a(G,Q[0],"ALPH")){ye=[ye],na.na=[na.na],na.P=[na.P],na.Sa=[na.Sa];e:{Ar=G,Rt=Q,aa=ye;var fr=na.gb;Qa=na.na,Ka=na.P,Nr=na.Sa,hn=22,e(Ar!=null),e(aa!=null),Za=Rt[0];var Pi=aa[0];for(e(Qa!=null),e(Nr!=null),Qa[0]=null,Ka[0]=null,Nr[0]=0;;){if(Rt[0]=Za,aa[0]=Pi,8>Pi){Rt=7;break e}var Mi=wa(Ar,Za+4);if(4294967286<Mi){Rt=3;break e}var Yn=8+Mi+1&-2;if(hn+=Yn,0<fr&&hn>fr){Rt=3;break e}if(!a(Ar,Za,"VP8 ")||!a(Ar,Za,"VP8L")){Rt=0;break e}if(Pi[0]<Yn){Rt=7;break e}a(Ar,Za,"ALPH")||(Qa[0]=Ar,Ka[0]=Za+8,Nr[0]=Mi),Za+=Yn,Pi-=Yn}}if(ye=ye[0],na.na=na.na[0],na.P=na.P[0],na.Sa=na.Sa[0],Rt!=0)break}ye=[ye],na.Ja=[na.Ja],na.xa=[na.xa];e:if(fr=G,Rt=Q,aa=ye,Qa=na.gb[0],Ka=na.Ja,Nr=na.xa,Ar=Rt[0],Za=!a(fr,Ar,"VP8 "),hn=!a(fr,Ar,"VP8L"),e(fr!=null),e(aa!=null),e(Ka!=null),e(Nr!=null),8>aa[0])Rt=7;else{if(Za||hn){if(fr=wa(fr,Ar+4),12<=Qa&&fr>Qa-12){Rt=3;break e}if(_a&&fr>aa[0]-8){Rt=7;break e}Ka[0]=fr,Rt[0]+=8,aa[0]-=8,Nr[0]=hn}else Nr[0]=5<=aa[0]&&fr[Ar+0]==47&&!(fr[Ar+4]>>5),Ka[0]=aa[0];Rt=0}if(ye=ye[0],na.Ja=na.Ja[0],na.xa=na.xa[0],Q=Q[0],Rt!=0)break;if(4294967286<na.Ja)return 3;if(ht==null||fa||(ht[0]=na.xa?2:1),st=[st],Ta=[Ta],na.xa){if(5>ye){Rt=7;break}ht=st,_a=Ta,fa=nt,G==null||5>ye?G=0:5<=ye&&G[Q+0]==47&&!(G[Q+4]>>5)?(aa=[0],fr=[0],Qa=[0],Ue(Ka=new be,G,Q,ye),Ie(Ka,aa,fr,Qa)?(ht!=null&&(ht[0]=aa[0]),_a!=null&&(_a[0]=fr[0]),fa!=null&&(fa[0]=Qa[0]),G=1):G=0):G=0}else{if(10>ye){Rt=7;break}ht=Ta,G==null||10>ye||!Xl(G,Q+3,ye-3)?G=0:(_a=G[Q+0]|G[Q+1]<<8|G[Q+2]<<16,fa=16383&(G[Q+7]<<8|G[Q+6]),G=16383&(G[Q+9]<<8|G[Q+8]),1&_a||3<(_a>>1&7)||!(_a>>4&1)||_a>>5>=na.Ja||!fa||!G?G=0:(st&&(st[0]=fa),ht&&(ht[0]=G),G=1))}if(!G||(st=st[0],Ta=Ta[0],Pt&&(St[0]!=st||ea[0]!=Ta)))return 3;mt!=null&&(mt[0]=na,mt.offset=Q-mt.w,e(4294967286>Q-mt.w),e(mt.offset==mt.ha-ye));break}return Rt==0||Rt==7&&Pt&&mt==null?(nt!=null&&(nt[0]|=na.na!=null&&0<na.na.length),Me!=null&&(Me[0]=st),We!=null&&(We[0]=Ta),0):Rt}function nu(G,Q,ye){var Me=Q.width,We=Q.height,nt=0,st=0,ht=Me,mt=We;if(Q.Da=G!=null&&0<G.Da,Q.Da&&(ht=G.cd,mt=G.bd,nt=G.v,st=G.j,11>ye||(nt&=-2,st&=-2),0>nt||0>st||0>=ht||0>=mt||nt+ht>Me||st+mt>We))return 0;if(Q.v=nt,Q.j=st,Q.va=nt+ht,Q.o=st+mt,Q.U=ht,Q.T=mt,Q.da=G!=null&&0<G.da,Q.da){if(!hr(ht,mt,ye=[G.ib],nt=[G.hb]))return 0;Q.ib=ye[0],Q.hb=nt[0]}return Q.ob=G!=null&&G.ob,Q.Kb=G==null||!G.Sd,Q.da&&(Q.ob=Q.ib<3*Me/4&&Q.hb<3*We/4,Q.Kb=0),1}function vc(G){if(G==null)return 2;if(11>G.S){var Q=G.f.RGBA;Q.fb+=(G.height-1)*Q.A,Q.A=-Q.A}else Q=G.f.kb,G=G.height,Q.O+=(G-1)*Q.fa,Q.fa=-Q.fa,Q.N+=(G-1>>1)*Q.Ab,Q.Ab=-Q.Ab,Q.W+=(G-1>>1)*Q.Db,Q.Db=-Q.Db,Q.F!=null&&(Q.J+=(G-1)*Q.lb,Q.lb=-Q.lb);return 0}function Dd(G,Q,ye,Me){if(Me==null||0>=G||0>=Q)return 2;if(ye!=null){if(ye.Da){var We=ye.cd,nt=ye.bd,st=-2&ye.v,ht=-2&ye.j;if(0>st||0>ht||0>=We||0>=nt||st+We>G||ht+nt>Q)return 2;G=We,Q=nt}if(ye.da){if(!hr(G,Q,We=[ye.ib],nt=[ye.hb]))return 2;G=We[0],Q=nt[0]}}Me.width=G,Me.height=Q;e:{var mt=Me.width,St=Me.height;if(G=Me.S,0>=mt||0>=St||!(G>=Cc&&13>G))G=2;else{if(0>=Me.Rd&&Me.sd==null){st=nt=We=Q=0;var ea=(ht=mt*Yh[G])*St;if(11>G||(nt=(St+1)/2*(Q=(mt+1)/2),G==12&&(st=(We=mt)*St)),(St=l(ea+2*nt+st))==null){G=1;break e}Me.sd=St,11>G?((mt=Me.f.RGBA).eb=St,mt.fb=0,mt.A=ht,mt.size=ea):((mt=Me.f.kb).y=St,mt.O=0,mt.fa=ht,mt.Fd=ea,mt.f=St,mt.N=0+ea,mt.Ab=Q,mt.Cd=nt,mt.ea=St,mt.W=0+ea+nt,mt.Db=Q,mt.Ed=nt,G==12&&(mt.F=St,mt.J=0+ea+2*nt),mt.Tc=st,mt.lb=We)}if(Q=1,We=Me.S,nt=Me.width,st=Me.height,We>=Cc&&13>We)if(11>We)G=Me.f.RGBA,Q&=(ht=Math.abs(G.A))*(st-1)+nt<=G.size,Q&=ht>=nt*Yh[We],Q&=G.eb!=null;else{G=Me.f.kb,ht=(nt+1)/2,ea=(st+1)/2,mt=Math.abs(G.fa),St=Math.abs(G.Ab);var Pt=Math.abs(G.Db),_a=Math.abs(G.lb),na=_a*(st-1)+nt;Q&=mt*(st-1)+nt<=G.Fd,Q&=St*(ea-1)+ht<=G.Cd,Q=(Q&=Pt*(ea-1)+ht<=G.Ed)&mt>=nt&St>=ht&Pt>=ht,Q&=G.y!=null,Q&=G.f!=null,Q&=G.ea!=null,We==12&&(Q&=_a>=nt,Q&=na<=G.Tc,Q&=G.F!=null)}else Q=0;G=Q?0:2}}return G!=0||ye!=null&&ye.fd&&(G=vc(Me)),G}var Ms=64,bi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],_c=24,za=32,Md=8,Js=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ja("Predictor0","PredictorAdd0"),Re.Predictor0=function(){return 4278190080},Re.Predictor1=function(G){return G},Re.Predictor2=function(G,Q,ye){return Q[ye+0]},Re.Predictor3=function(G,Q,ye){return Q[ye+1]},Re.Predictor4=function(G,Q,ye){return Q[ye-1]},Re.Predictor5=function(G,Q,ye){return lr(lr(G,Q[ye+1]),Q[ye+0])},Re.Predictor6=function(G,Q,ye){return lr(G,Q[ye-1])},Re.Predictor7=function(G,Q,ye){return lr(G,Q[ye+0])},Re.Predictor8=function(G,Q,ye){return lr(Q[ye-1],Q[ye+0])},Re.Predictor9=function(G,Q,ye){return lr(Q[ye+0],Q[ye+1])},Re.Predictor10=function(G,Q,ye){return lr(lr(G,Q[ye-1]),lr(Q[ye+0],Q[ye+1]))},Re.Predictor11=function(G,Q,ye){var Me=Q[ye+0];return 0>=kr(Me>>24&255,G>>24&255,(Q=Q[ye-1])>>24&255)+kr(Me>>16&255,G>>16&255,Q>>16&255)+kr(Me>>8&255,G>>8&255,Q>>8&255)+kr(255&Me,255&G,255&Q)?Me:G},Re.Predictor12=function(G,Q,ye){var Me=Q[ye+0];return(Tr((G>>24&255)+(Me>>24&255)-((Q=Q[ye-1])>>24&255))<<24|Tr((G>>16&255)+(Me>>16&255)-(Q>>16&255))<<16|Tr((G>>8&255)+(Me>>8&255)-(Q>>8&255))<<8|Tr((255&G)+(255&Me)-(255&Q)))>>>0},Re.Predictor13=function(G,Q,ye){var Me=Q[ye-1];return(ka((G=lr(G,Q[ye+0]))>>24&255,Me>>24&255)<<24|ka(G>>16&255,Me>>16&255)<<16|ka(G>>8&255,Me>>8&255)<<8|ka(G>>0&255,Me>>0&255))>>>0};var Ao=Re.PredictorAdd0;Re.PredictorAdd1=nn,Ja("Predictor2","PredictorAdd2"),Ja("Predictor3","PredictorAdd3"),Ja("Predictor4","PredictorAdd4"),Ja("Predictor5","PredictorAdd5"),Ja("Predictor6","PredictorAdd6"),Ja("Predictor7","PredictorAdd7"),Ja("Predictor8","PredictorAdd8"),Ja("Predictor9","PredictorAdd9"),Ja("Predictor10","PredictorAdd10"),Ja("Predictor11","PredictorAdd11"),Ja("Predictor12","PredictorAdd12"),Ja("Predictor13","PredictorAdd13");var Sf=Re.PredictorAdd2;$a("ColorIndexInverseTransform","MapARGB","32b",function(G){return G>>8&255},function(G){return G}),$a("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(G){return G},function(G){return G>>8&255});var jh,vo=Re.ColorIndexInverseTransform,js=Re.MapARGB,Dl=Re.VP8LColorIndexInverseTransformAlpha,jc=Re.MapAlpha,iu=Re.VP8LPredictorsAdd=[];iu.length=16,(Re.VP8LPredictors=[]).length=16,(Re.VP8LPredictorsAdd_C=[]).length=16,(Re.VP8LPredictors_C=[]).length=16;var Ah,Ml,No,Id,Gc,Il,wc,xu,Qi,bf,so,_o,Ld,Fd,oo,Zc,Rc,Pu,qc,Eu,Hc,Tc,Xu,Ko,As,ai,li,es,fs=l(511),su=l(2041),$c=l(225),il=l(767),ou=0,ln=su,Kc=$c,Ll=il,ls=fs,Cc=0,kd=1,Ai=2,Gh=3,sl=4,_l=5,Wc=6,Nu=7,Ju=8,Sc=9,tm=10,Zh=[2,3,7],qh=[3,3,11],ol=[280,256,256,256,40],ts=[0,1,1,1,0],xi=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],lu=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ou=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],op=8,bc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],xf=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ud=null,Hh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],$h=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Bd=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Pf=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],eg=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],vh=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Hg=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],xc=[],Qu=[],Vu=[],$g=1,Kh=2,wl=[],ll=[];Ma("UpsampleRgbLinePair",Ri,3),Ma("UpsampleBgrLinePair",zs,3),Ma("UpsampleRgbaLinePair",ur,4),Ma("UpsampleBgraLinePair",Vr,4),Ma("UpsampleArgbLinePair",os,4),Ma("UpsampleRgba4444LinePair",io,2),Ma("UpsampleRgb565LinePair",Ds,2);var Wh=Re.UpsampleRgbLinePair,jd=Re.UpsampleBgrLinePair,am=Re.UpsampleRgbaLinePair,rm=Re.UpsampleBgraLinePair,Yc=Re.UpsampleArgbLinePair,Ef=Re.UpsampleRgba4444LinePair,ul=Re.UpsampleRgb565LinePair,Gd=16,zu=1<<Gd-1,Zd=-227,Xc=482,Fl=6,ec=0,Jc=l(256),lp=l(256),qd=l(256),Qc=l(256),Gs=l(Xc-Zd),nm=l(Xc-Zd);Pr("YuvToRgbRow",Ri,3),Pr("YuvToBgrRow",zs,3),Pr("YuvToRgbaRow",ur,4),Pr("YuvToBgraRow",Vr,4),Pr("YuvToArgbRow",os,4),Pr("YuvToRgba4444Row",io,2),Pr("YuvToRgb565Row",Ds,2);var tg=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Nf=[0,2,8],im=[8,7,6,4,4,2,2,2,1,1,1,1],lo=1;this.WebPDecodeRGBA=function(G,Q,ye,Me,We){var nt=kd,st=new Cu,ht=new oi;st.ba=ht,ht.S=nt,ht.width=[ht.width],ht.height=[ht.height];var mt=ht.width,St=ht.height,ea=new Cs;if(ea==null||G==null)var Pt=2;else e(ea!=null),Pt=yh(G,Q,ye,ea.width,ea.height,ea.Pd,ea.Qd,ea.format,null);if(Pt!=0?mt=0:(mt!=null&&(mt[0]=ea.width[0]),St!=null&&(St[0]=ea.height[0]),mt=1),mt){ht.width=ht.width[0],ht.height=ht.height[0],Me!=null&&(Me[0]=ht.width),We!=null&&(We[0]=ht.height);e:{if(Me=new pc,(We=new Su).data=G,We.w=Q,We.ha=ye,We.kd=1,Q=[0],e(We!=null),((G=yh(We.data,We.w,We.ha,null,null,null,Q,null,We))==0||G==7)&&Q[0]&&(G=4),(Q=G)==0){if(e(st!=null),Me.data=We.data,Me.w=We.w+We.offset,Me.ha=We.ha-We.offset,Me.put=Zt,Me.ac=Rn,Me.bc=Ne,Me.ma=st,We.xa){if((G=Cr())==null){st=1;break e}if(function(_a,na){var Ta=[0],fa=[0],Rt=[0];t:for(;;){if(_a==null)return 0;if(na==null)return _a.a=2,0;if(_a.l=na,_a.a=0,Ue(_a.m,na.data,na.w,na.ha),!Ie(_a.m,Ta,fa,Rt)){_a.a=3;break t}if(_a.xb=Kh,na.width=Ta[0],na.height=fa[0],!Dr(Ta[0],fa[0],1,_a,null))break t;return 1}return e(_a.a!=0),0}(G,Me)){if(Me=(Q=Dd(Me.width,Me.height,st.Oa,st.ba))==0){t:{Me=G;a:for(;;){if(Me==null){Me=0;break t}if(e(Me.s.yc!=null),e(Me.s.Ya!=null),e(0<Me.s.Wb),e((ye=Me.l)!=null),e((We=ye.ma)!=null),Me.xb!=0){if(Me.ca=We.ba,Me.tb=We.tb,e(Me.ca!=null),!nu(We.Oa,ye,Gh)){Me.a=2;break a}if(!Mr(Me,ye.width)||ye.da)break a;if((ye.da||br(Me.ca.S))&&ha(),11>Me.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Me.ca.f.kb.F!=null&&ha()),Me.Pb&&0<Me.s.ua&&Me.s.vb.X==null&&!It(Me.s.vb,Me.s.Wa.Xa)){Me.a=1;break a}Me.xb=0}if(!Ia(Me,Me.V,Me.Ba,Me.c,Me.i,ye.o,Wt))break a;We.Dc=Me.Ma,Me=1;break t}e(Me.a!=0),Me=0}Me=!Me}Me&&(Q=G.a)}else Q=G.a}else{if((G=new tl)==null){st=1;break e}if(G.Fa=We.na,G.P=We.P,G.qc=We.Sa,jo(G,Me)){if((Q=Dd(Me.width,Me.height,st.Oa,st.ba))==0){if(G.Aa=0,ye=st.Oa,e((We=G)!=null),ye!=null){if(0<(mt=0>(mt=ye.Md)?0:100<mt?255:255*mt/100)){for(St=ea=0;4>St;++St)12>(Pt=We.pb[St]).lc&&(Pt.ia=mt*im[0>Pt.lc?0:Pt.lc]>>3),ea|=Pt.ia;ea&&(alert("todo:VP8InitRandom"),We.ia=1)}We.Ga=ye.Id,100<We.Ga?We.Ga=100:0>We.Ga&&(We.Ga=0)}fh(G,Me)||(Q=G.a)}}else Q=G.a}Q==0&&st.Oa!=null&&st.Oa.fd&&(Q=vc(st.ba))}st=Q}nt=st!=0?null:11>nt?ht.f.RGBA.eb:ht.f.kb.y}else nt=null;return nt};var Yh=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function R(Re,we){for(var Ve="",oe=0;oe<4;oe++)Ve+=String.fromCharCode(Re[we++]);return Ve}function x(Re,we){return(Re[we+0]<<0|Re[we+1]<<8|Re[we+2]<<16)>>>0}function N(Re,we){return(Re[we+0]<<0|Re[we+1]<<8|Re[we+2]<<16|Re[we+3]<<24)>>>0}new v;var L=[0],F=[0],j=[],$=new v,H=t,W=function(Re,we){var Ve={},oe=0,_e=!1,Fe=0,Ee=0;if(Ve.frames=[],!function(Te,ke,Ge,at){for(var rt=0;rt<at;rt++)if(Te[ke+rt]!=Ge.charCodeAt(rt))return!0;return!1}(Re,we,"RIFF",4)){for(N(Re,we+=4),we+=8;we<Re.length;){var ze=R(Re,we),Se=N(Re,we+=4);we+=4;var je=Se+(1&Se);switch(ze){case"VP8 ":case"VP8L":Ve.frames[oe]===void 0&&(Ve.frames[oe]={}),(Be=Ve.frames[oe]).src_off=_e?Ee:we-8,Be.src_size=Fe+Se+8,oe++,_e&&(_e=!1,Fe=0,Ee=0);break;case"VP8X":(Be=Ve.header={}).feature_flags=Re[we];var Ue=we+4;Be.canvas_width=1+x(Re,Ue),Ue+=3,Be.canvas_height=1+x(Re,Ue),Ue+=3;break;case"ALPH":_e=!0,Fe=je+8,Ee=we-8;break;case"ANIM":(Be=Ve.header).bgcolor=N(Re,we),Ue=we+4,Be.loop_count=(qe=Re)[(be=Ue)+0]<<0|qe[be+1]<<8,Ue+=2;break;case"ANMF":var $e,Be;(Be=Ve.frames[oe]={}).offset_x=2*x(Re,we),we+=3,Be.offset_y=2*x(Re,we),we+=3,Be.width=1+x(Re,we),we+=3,Be.height=1+x(Re,we),we+=3,Be.duration=x(Re,we),we+=3,$e=Re[we++],Be.dispose=1&$e,Be.blend=$e>>1&1}ze!="ANMF"&&(we+=je)}var qe,be;return Ve}}(H,0);W.response=H,W.rgbaoutput=!0,W.dataurl=!1;var ee=W.header?W.header:null,se=W.frames?W.frames:null;if(ee){ee.loop_counter=ee.loop_count,L=[ee.canvas_height],F=[ee.canvas_width];for(var fe=0;fe<se.length&&se[fe].blend!=0;fe++);}var le=se[0],me=$.WebPDecodeRGBA(H,le.src_off,le.src_size,F,L);le.rgba=me,le.imgwidth=F[0],le.imgheight=L[0];for(var ge=0;ge<F[0]*L[0]*4;ge++)j[ge]=me[ge];return this.width=F,this.height=L,this.data=j,this}(function(t){var e=function(){return typeof YI=="function"},a=function(L,F,j,$){var H=4,W=c;switch($){case t.image_compression.FAST:H=1,W=l;break;case t.image_compression.MEDIUM:H=6,W=n;break;case t.image_compression.SLOW:H=9,W=v}L=r(L,F,j,W);var ee=YI(L,{level:H});return t.__addimage__.arrayBufferToBinaryString(ee)},r=function(L,F,j,$){for(var H,W,ee,se=L.length/F,fe=new Uint8Array(L.length+se),le=x(),me=0;me<se;me+=1){if(ee=me*F,H=L.subarray(ee,ee+F),$)fe.set($(H,j,W),ee+me);else{for(var ge,Re=le.length,we=[];ge<Re;ge+=1)we[ge]=le[ge](H,j,W);var Ve=N(we.concat());fe.set(we[Ve],ee+me)}W=H}return fe},i=function(L){var F=Array.apply([],L);return F.unshift(0),F},l=function(L,F){var j,$=[],H=L.length;$[0]=1;for(var W=0;W<H;W+=1)j=L[W-F]||0,$[W+1]=L[W]-j+256&255;return $},c=function(L,F,j){var $,H=[],W=L.length;H[0]=2;for(var ee=0;ee<W;ee+=1)$=j&&j[ee]||0,H[ee+1]=L[ee]-$+256&255;return H},n=function(L,F,j){var $,H,W=[],ee=L.length;W[0]=3;for(var se=0;se<ee;se+=1)$=L[se-F]||0,H=j&&j[se]||0,W[se+1]=L[se]+256-($+H>>>1)&255;return W},v=function(L,F,j){var $,H,W,ee,se=[],fe=L.length;se[0]=4;for(var le=0;le<fe;le+=1)$=L[le-F]||0,H=j&&j[le]||0,W=j&&j[le-F]||0,ee=R($,H,W),se[le+1]=L[le]-ee+256&255;return se},R=function(L,F,j){if(L===F&&F===j)return L;var $=Math.abs(F-j),H=Math.abs(L-j),W=Math.abs(L+F-j-j);return $<=H&&$<=W?L:H<=W?F:j},x=function(){return[i,l,c,n,v]},N=function(L){var F=L.map(function(j){return j.reduce(function($,H){return $+Math.abs(H)},0)});return F.indexOf(Math.min.apply(null,F))};t.processPNG=function(L,F,j,$){var H,W,ee,se,fe,le,me,ge,Re,we,Ve,oe,_e,Fe,Ee,ze=this.decode.FLATE_DECODE,Se="";if(this.__addimage__.isArrayBuffer(L)&&(L=new Uint8Array(L)),this.__addimage__.isArrayBufferView(L)){if(L=(ee=new VOe(L)).imgData,W=ee.bits,H=ee.colorSpace,fe=ee.colors,[4,6].indexOf(ee.colorType)!==-1){if(ee.bits===8){Re=(ge=ee.pixelBitlength==32?new Uint32Array(ee.decodePixels().buffer):ee.pixelBitlength==16?new Uint16Array(ee.decodePixels().buffer):new Uint8Array(ee.decodePixels().buffer)).length,Ve=new Uint8Array(Re*ee.colors),we=new Uint8Array(Re);var je,Ue=ee.pixelBitlength-ee.bits;for(Fe=0,Ee=0;Fe<Re;Fe++){for(_e=ge[Fe],je=0;je<Ue;)Ve[Ee++]=_e>>>je&255,je+=ee.bits;we[Fe]=_e>>>je&255}}if(ee.bits===16){Re=(ge=new Uint32Array(ee.decodePixels().buffer)).length,Ve=new Uint8Array(Re*(32/ee.pixelBitlength)*ee.colors),we=new Uint8Array(Re*(32/ee.pixelBitlength)),oe=ee.colors>1,Fe=0,Ee=0;for(var $e=0;Fe<Re;)_e=ge[Fe++],Ve[Ee++]=_e>>>0&255,oe&&(Ve[Ee++]=_e>>>16&255,_e=ge[Fe++],Ve[Ee++]=_e>>>0&255),we[$e++]=_e>>>16&255;W=8}$!==t.image_compression.NONE&&e()?(L=a(Ve,ee.width*ee.colors,ee.colors,$),me=a(we,ee.width,1,$)):(L=Ve,me=we,ze=void 0)}if(ee.colorType===3&&(H=this.color_spaces.INDEXED,le=ee.palette,ee.transparency.indexed)){var Be=ee.transparency.indexed,qe=0;for(Fe=0,Re=Be.length;Fe<Re;++Fe)qe+=Be[Fe];if((qe/=255)===Re-1&&Be.indexOf(0)!==-1)se=[Be.indexOf(0)];else if(qe!==Re){for(ge=ee.decodePixels(),we=new Uint8Array(ge.length),Fe=0,Re=ge.length;Fe<Re;Fe++)we[Fe]=Be[ge[Fe]];me=a(we,ee.width,1)}}var be=function(Te){var ke;switch(Te){case t.image_compression.FAST:ke=11;break;case t.image_compression.MEDIUM:ke=13;break;case t.image_compression.SLOW:ke=14;break;default:ke=12}return ke}($);return ze===this.decode.FLATE_DECODE&&(Se="/Predictor "+be+" "),Se+="/Colors "+fe+" /BitsPerComponent "+W+" /Columns "+ee.width,(this.__addimage__.isArrayBuffer(L)||this.__addimage__.isArrayBufferView(L))&&(L=this.__addimage__.arrayBufferToBinaryString(L)),(me&&this.__addimage__.isArrayBuffer(me)||this.__addimage__.isArrayBufferView(me))&&(me=this.__addimage__.arrayBufferToBinaryString(me)),{alias:j,data:L,index:F,filter:ze,decodeParameters:Se,transparency:se,palette:le,sMask:me,predictor:be,width:ee.width,height:ee.height,bitsPerComponent:W,colorSpace:H}}}})(Wn.API),function(t){t.processGIF89A=function(e,a,r,i){var l=new zOe(e),c=l.width,n=l.height,v=[];l.decodeAndBlitFrameRGBA(0,v);var R={data:v,width:c,height:n},x=new RD(100).encode(R,100);return t.processJPEG.call(this,x,a,r,i)},t.processGIF87A=t.processGIF89A}(Wn.API),Lp.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var a=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:a,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Lp.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(a){fo.log("bit decode error:"+a)}},Lp.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),a=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var l=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+8*i*4,n=0;n<8&&8*i+n<this.width;n++){var v=this.palette[l>>7-n&1];this.data[c+4*n]=v.blue,this.data[c+4*n+1]=v.green,this.data[c+4*n+2]=v.red,this.data[c+4*n+3]=255}a!==0&&(this.pos+=4-a)}},Lp.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,a=this.height-1;a>=0;a--){for(var r=this.bottom_up?a:this.height-1-a,i=0;i<t;i++){var l=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+2*i*4,n=l>>4,v=15&l,R=this.palette[n];if(this.data[c]=R.blue,this.data[c+1]=R.green,this.data[c+2]=R.red,this.data[c+3]=255,2*i+1>=this.width)break;R=this.palette[v],this.data[c+4]=R.blue,this.data[c+4+1]=R.green,this.data[c+4+2]=R.red,this.data[c+4+3]=255}e!==0&&(this.pos+=4-e)}},Lp.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var a=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),l=a*this.width*4+4*r;if(i<this.palette.length){var c=this.palette[i];this.data[l]=c.red,this.data[l+1]=c.green,this.data[l+2]=c.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}t!==0&&(this.pos+=4-t)}},Lp.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),a=this.height-1;a>=0;a--){for(var r=this.bottom_up?a:this.height-1-a,i=0;i<this.width;i++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(l&e)/e*255|0,n=(l>>5&e)/e*255|0,v=(l>>10&e)/e*255|0,R=l>>15?255:0,x=r*this.width*4+4*i;this.data[x]=v,this.data[x+1]=n,this.data[x+2]=c,this.data[x+3]=R}this.pos+=t}},Lp.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),a=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,l=0;l<this.width;l++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var n=(c&e)/e*255|0,v=(c>>5&a)/a*255|0,R=(c>>11)/e*255|0,x=i*this.width*4+4*l;this.data[x]=R,this.data[x+1]=v,this.data[x+2]=n,this.data[x+3]=255}this.pos+=t}},Lp.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*a;this.data[c]=l,this.data[c+1]=i,this.data[c+2]=r,this.data[c+3]=255}this.pos+=this.width%4}},Lp.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),n=e*this.width*4+4*a;this.data[n]=l,this.data[n+1]=i,this.data[n+2]=r,this.data[n+3]=c}},Lp.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,a,r,i){var l=new Lp(e,!1),c=l.width,n=l.height,v={data:l.getData(),width:c,height:n},R=new RD(100).encode(v,100);return t.processJPEG.call(this,R,a,r,i)}}(Wn.API),iH.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,a,r,i){var l=new iH(e),c=l.width,n=l.height,v={data:l.getData(),width:c,height:n},R=new RD(100).encode(v,100);return t.processJPEG.call(this,R,a,r,i)}}(Wn.API),Wn.API.processRGBA=function(t,e,a){for(var r=t.data,i=r.length,l=new Uint8Array(i/4*3),c=new Uint8Array(i/4),n=0,v=0,R=0;R<i;R+=4){var x=r[R],N=r[R+1],L=r[R+2],F=r[R+3];l[n++]=x,l[n++]=N,l[n++]=L,c[v++]=F}var j=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:j,index:e,alias:a,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Wn.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},q0=Wn.API,lb=q0.getCharWidthsArray=function(t,e){var a,r,i=(e=e||{}).font||this.internal.getFont(),l=e.fontSize||this.internal.getFontSize(),c=e.charSpace||this.internal.getCharSpace(),n=e.widths?e.widths:i.metadata.Unicode.widths,v=n.fof?n.fof:1,R=e.kerning?e.kerning:i.metadata.Unicode.kerning,x=R.fof?R.fof:1,N=e.doKerning!==!1,L=0,F=t.length,j=0,$=n[0]||v,H=[];for(a=0;a<F;a++)r=t.charCodeAt(a),typeof i.metadata.widthOfString=="function"?H.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+c*(1e3/l)||0)/1e3):(L=N&&qs(R[r])==="object"&&!isNaN(parseInt(R[r][j],10))?R[r][j]/x:0,H.push((n[r]||$)/v+L)),j=r;return H},tH=q0.getStringUnitWidth=function(t,e){var a=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return q0.processArabic&&(t=q0.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,a,i)/a:lb.apply(this,arguments).reduce(function(l,c){return l+c},0)},aH=function(t,e,a,r){for(var i=[],l=0,c=t.length,n=0;l!==c&&n+e[l]<a;)n+=e[l],l++;i.push(t.slice(0,l));var v=l;for(n=0;l!==c;)n+e[l]>r&&(i.push(t.slice(v,l)),n=0,v=l),n+=e[l],l++;return v!==l&&i.push(t.slice(v,l)),i},rH=function(t,e,a){a||(a={});var r,i,l,c,n,v,R,x=[],N=[x],L=a.textIndent||0,F=0,j=0,$=t.split(" "),H=lb.apply(this,[" ",a])[0];if(v=a.lineIndent===-1?$[0].length+2:a.lineIndent||0){var W=Array(v).join(" "),ee=[];$.map(function(fe){(fe=fe.split(/\s*\n/)).length>1?ee=ee.concat(fe.map(function(le,me){return(me&&le.length?`
`:"")+le})):ee.push(fe[0])}),$=ee,v=tH.apply(this,[W,a])}for(l=0,c=$.length;l<c;l++){var se=0;if(r=$[l],v&&r[0]==`
`&&(r=r.substr(1),se=1),L+F+(j=(i=lb.apply(this,[r,a])).reduce(function(fe,le){return fe+le},0))>e||se){if(j>e){for(n=aH.apply(this,[r,i,e-(L+F),e]),x.push(n.shift()),x=[n.pop()];n.length;)N.push([n.shift()]);j=i.slice(r.length-(x[0]?x[0].length:0)).reduce(function(fe,le){return fe+le},0)}else x=[r];N.push(x),L=j+v,F=H}else x.push(r),L+=F+j,F=H}return R=v?function(fe,le){return(le?W:"")+fe.join(" ")}:function(fe){return fe.join(" ")},N.map(R)},q0.splitTextToSize=function(t,e,a){var r,i=(a=a||{}).fontSize||this.internal.getFontSize(),l=(function(x){if(x.widths&&x.kerning)return{widths:x.widths,kerning:x.kerning};var N=this.internal.getFont(x.fontName,x.fontStyle);return N.metadata.Unicode?{widths:N.metadata.Unicode.widths||{0:1},kerning:N.metadata.Unicode.kerning||{}}:{font:N.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,a);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var c=1*this.internal.scaleFactor*e/i;l.textIndent=a.textIndent?1*a.textIndent*this.internal.scaleFactor/i:0,l.lineIndent=a.lineIndent;var n,v,R=[];for(n=0,v=r.length;n<v;n++)R=R.concat(rH.apply(this,[r[n],c,l]));return R},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",a={},r={},i=0;i<e.length;i++)a[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var l=function(N){return"0x"+parseInt(N,10).toString(16)},c=t.__fontmetrics__.compress=function(N){var L,F,j,$,H=["{"];for(var W in N){if(L=N[W],isNaN(parseInt(W,10))?F="'"+W+"'":(W=parseInt(W,10),F=(F=l(W).slice(2)).slice(0,-1)+r[F.slice(-1)]),typeof L=="number")L<0?(j=l(L).slice(3),$="-"):(j=l(L).slice(2),$=""),j=$+j.slice(0,-1)+r[j.slice(-1)];else{if(qs(L)!=="object")throw new Error("Don't know what to do with value type "+qs(L)+".");j=c(L)}H.push(F+j)}return H.push("}"),H.join("")},n=t.__fontmetrics__.uncompress=function(N){if(typeof N!="string")throw new Error("Invalid argument passed to uncompress.");for(var L,F,j,$,H={},W=1,ee=H,se=[],fe="",le="",me=N.length-1,ge=1;ge<me;ge+=1)($=N[ge])=="'"?L?(j=L.join(""),L=void 0):L=[]:L?L.push($):$=="{"?(se.push([ee,j]),ee={},j=void 0):$=="}"?((F=se.pop())[0][F[1]]=ee,j=void 0,ee=F[0]):$=="-"?W=-1:j===void 0?a.hasOwnProperty($)?(fe+=a[$],j=parseInt(fe,16)*W,W=1,fe=""):fe+=$:a.hasOwnProperty($)?(le+=a[$],ee[j]=parseInt(le,16)*W,W=1,j=void 0,le=""):le+=$;return H},v={codePages:["WinAnsiEncoding"],WinAnsiEncoding:n("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},R={Unicode:{Courier:v,"Courier-Bold":v,"Courier-BoldOblique":v,"Courier-Oblique":v,Helvetica:v,"Helvetica-Bold":v,"Helvetica-BoldOblique":v,"Helvetica-Oblique":v,"Times-Roman":v,"Times-Bold":v,"Times-BoldItalic":v,"Times-Italic":v}},x={Unicode:{"Courier-Oblique":n("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":n("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":n("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:n("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":n("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":n("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:n("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:n("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":n("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:n("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":n("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":n("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":n("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":n("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(N){var L=N.font,F=x.Unicode[L.postScriptName];F&&(L.metadata.Unicode={},L.metadata.Unicode.widths=F.widths,L.metadata.Unicode.kerning=F.kerning);var j=R.Unicode[L.postScriptName];j&&(L.metadata.Unicode.encoding=j,L.encoding=j.codePages[0])}])}(Wn.API),function(t){var e=function(a){for(var r=a.length,i=new Uint8Array(r),l=0;l<r;l++)i[l]=a.charCodeAt(l);return i};t.API.events.push(["addFont",function(a){var r=void 0,i=a.font,l=a.instance;if(!i.isStandardFont){if(l===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=l.existsFileInVFS(i.postScriptName)===!1?l.loadFile(i.postScriptName):l.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(c,n){n=/^\x00\x01\x00\x00/.test(n)?e(n):e(OR(n)),c.metadata=t.API.TTFFont.open(n),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(i,r)}}])}(Wn),function(t){function e(){return(Qn.canvg?Promise.resolve(Qn.canvg):zT(()=>import("./index.es-yJOlA75U.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load canvg: "+a))}).then(function(a){return a.default?a.default:a})}Wn.API.addSvgAsImage=function(a,r,i,l,c,n,v,R){if(isNaN(r)||isNaN(i))throw fo.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(l)||isNaN(c))throw fo.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var x=document.createElement("canvas");x.width=l,x.height=c;var N=x.getContext("2d");N.fillStyle="#fff",N.fillRect(0,0,x.width,x.height);var L={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},F=this;return e().then(function(j){return j.fromString(N,a,L)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(j){return j.render(L)}).then(function(){F.addImage(x.toDataURL("image/jpeg",1),r,i,l,c,v,R)})}}(),Wn.API.putTotalPages=function(t){var e,a=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),a=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),a=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,a);return this},Wn.API.viewerPreferences=function(t,e){var a;t=t||{},e=e||!1;var r,i,l,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},n=Object.keys(c),v=[],R=0,x=0,N=0;function L(j,$){var H,W=!1;for(H=0;H<j.length;H+=1)j[H]===$&&(W=!0);return W}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),a=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var F=n.length;for(N=0;N<F;N+=1)a[n[N]].value=a[n[N]].defaultValue,a[n[N]].explicitSet=!1}if(qs(t)==="object"){for(i in t)if(l=t[i],L(n,i)&&l!==void 0){if(a[i].type==="boolean"&&typeof l=="boolean")a[i].value=l;else if(a[i].type==="name"&&L(a[i].valueSet,l))a[i].value=l;else if(a[i].type==="integer"&&Number.isInteger(l))a[i].value=l;else if(a[i].type==="array"){for(R=0;R<l.length;R+=1)if(r=!0,l[R].length===1&&typeof l[R][0]=="number")v.push(String(l[R]-1));else if(l[R].length>1){for(x=0;x<l[R].length;x+=1)typeof l[R][x]!="number"&&(r=!1);r===!0&&v.push([l[R][0]-1,l[R][1]-1].join(" "))}a[i].value="["+v.join(" ")+"]"}else a[i].value=a[i].defaultValue;a[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var j,$=[];for(j in a)a[j].explicitSet===!0&&(a[j].type==="name"?$.push("/"+j+" /"+a[j].value):$.push("/"+j+" "+a[j].value));$.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+$.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=a,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),l=unescape(encodeURIComponent(r)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),n=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),v=unescape(encodeURIComponent("</x:xmpmeta>")),R=l.length+c.length+n.length+i.length+v.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+R+" >>"),this.internal.write("stream"),this.internal.write(i+l+c+n+v),this.internal.write("endstream"),this.internal.write("endobj")},a=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",a),this.internal.events.subscribe("postPutResources",e)),this}}(Wn.API),function(t){var e=t.API,a=e.pdfEscape16=function(l,c){for(var n,v=c.metadata.Unicode.widths,R=["","0","00","000","0000"],x=[""],N=0,L=l.length;N<L;++N){if(n=c.metadata.characterToGlyph(l.charCodeAt(N)),c.metadata.glyIdsUsed.push(n),c.metadata.toUnicode[n]=l.charCodeAt(N),v.indexOf(n)==-1&&(v.push(n),v.push([parseInt(c.metadata.widthOfGlyph(n),10)])),n=="0")return x.join("");n=n.toString(16),x.push(R[4-n.length],n)}return x.join("")},r=function(l){var c,n,v,R,x,N,L;for(x=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,v=[],N=0,L=(n=Object.keys(l).sort(function(F,j){return F-j})).length;N<L;N++)c=n[N],v.length>=100&&(x+=`
`+v.length+` beginbfchar
`+v.join(`
`)+`
endbfchar`,v=[]),l[c]!==void 0&&l[c]!==null&&typeof l[c].toString=="function"&&(R=("0000"+l[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),v.push("<"+c+"><"+R+">"));return v.length&&(x+=`
`+v.length+` beginbfchar
`+v.join(`
`)+`
endbfchar
`),x+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(l){(function(c){var n=c.font,v=c.out,R=c.newObject,x=c.putStream;if(n.metadata instanceof t.API.TTFFont&&n.encoding==="Identity-H"){for(var N=n.metadata.Unicode.widths,L=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),F="",j=0;j<L.length;j++)F+=String.fromCharCode(L[j]);var $=R();x({data:F,addLength1:!0,objectId:$}),v("endobj");var H=R();x({data:r(n.metadata.toUnicode),addLength1:!0,objectId:H}),v("endobj");var W=R();v("<<"),v("/Type /FontDescriptor"),v("/FontName /"+Y0(n.fontName)),v("/FontFile2 "+$+" 0 R"),v("/FontBBox "+t.API.PDFObject.convert(n.metadata.bbox)),v("/Flags "+n.metadata.flags),v("/StemV "+n.metadata.stemV),v("/ItalicAngle "+n.metadata.italicAngle),v("/Ascent "+n.metadata.ascender),v("/Descent "+n.metadata.decender),v("/CapHeight "+n.metadata.capHeight),v(">>"),v("endobj");var ee=R();v("<<"),v("/Type /Font"),v("/BaseFont /"+Y0(n.fontName)),v("/FontDescriptor "+W+" 0 R"),v("/W "+t.API.PDFObject.convert(N)),v("/CIDToGIDMap /Identity"),v("/DW 1000"),v("/Subtype /CIDFontType2"),v("/CIDSystemInfo"),v("<<"),v("/Supplement 0"),v("/Registry (Adobe)"),v("/Ordering ("+n.encoding+")"),v(">>"),v(">>"),v("endobj"),n.objectNumber=R(),v("<<"),v("/Type /Font"),v("/Subtype /Type0"),v("/ToUnicode "+H+" 0 R"),v("/BaseFont /"+Y0(n.fontName)),v("/Encoding /"+n.encoding),v("/DescendantFonts ["+ee+" 0 R]"),v(">>"),v("endobj"),n.isAlreadyPutted=!0}})(l)}]),e.events.push(["putFont",function(l){(function(c){var n=c.font,v=c.out,R=c.newObject,x=c.putStream;if(n.metadata instanceof t.API.TTFFont&&n.encoding==="WinAnsiEncoding"){for(var N=n.metadata.rawData,L="",F=0;F<N.length;F++)L+=String.fromCharCode(N[F]);var j=R();x({data:L,addLength1:!0,objectId:j}),v("endobj");var $=R();x({data:r(n.metadata.toUnicode),addLength1:!0,objectId:$}),v("endobj");var H=R();v("<<"),v("/Descent "+n.metadata.decender),v("/CapHeight "+n.metadata.capHeight),v("/StemV "+n.metadata.stemV),v("/Type /FontDescriptor"),v("/FontFile2 "+j+" 0 R"),v("/Flags 96"),v("/FontBBox "+t.API.PDFObject.convert(n.metadata.bbox)),v("/FontName /"+Y0(n.fontName)),v("/ItalicAngle "+n.metadata.italicAngle),v("/Ascent "+n.metadata.ascender),v(">>"),v("endobj"),n.objectNumber=R();for(var W=0;W<n.metadata.hmtx.widths.length;W++)n.metadata.hmtx.widths[W]=parseInt(n.metadata.hmtx.widths[W]*(1e3/n.metadata.head.unitsPerEm));v("<</Subtype/TrueType/Type/Font/ToUnicode "+$+" 0 R/BaseFont/"+Y0(n.fontName)+"/FontDescriptor "+H+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),v("endobj"),n.isAlreadyPutted=!0}})(l)}]);var i=function(l){var c,n=l.text||"",v=l.x,R=l.y,x=l.options||{},N=l.mutex||{},L=N.pdfEscape,F=N.activeFontKey,j=N.fonts,$=F,H="",W=0,ee="",se=j[$].encoding;if(j[$].encoding!=="Identity-H")return{text:n,x:v,y:R,options:x,mutex:N};for(ee=n,$=F,Array.isArray(n)&&(ee=n[0]),W=0;W<ee.length;W+=1)j[$].metadata.hasOwnProperty("cmap")&&(c=j[$].metadata.cmap.unicode.codeMap[ee[W].charCodeAt(0)]),c||ee[W].charCodeAt(0)<256&&j[$].metadata.hasOwnProperty("Unicode")?H+=ee[W]:H+="";var fe="";return parseInt($.slice(1))<14||se==="WinAnsiEncoding"?fe=L(H,$).split("").map(function(le){return le.charCodeAt(0).toString(16)}).join(""):se==="Identity-H"&&(fe=a(H,j[$])),N.isHex=!0,{text:fe,x:v,y:R,options:x,mutex:N}};e.events.push(["postProcessText",function(l){var c=l.text||"",n=[],v={text:c,x:l.x,y:l.y,options:l.options,mutex:l.mutex};if(Array.isArray(c)){var R=0;for(R=0;R<c.length;R+=1)Array.isArray(c[R])&&c[R].length===3?n.push([i(Object.assign({},v,{text:c[R][0]})).text,c[R][1],c[R][2]]):n.push(i(Object.assign({},v,{text:c[R]})).text);l.text=n}else l.text=i(Object.assign({},v,{text:c})).text}])}(Wn),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(a){return e.call(this),this.internal.vFS[a]!==void 0},t.addFileToVFS=function(a,r){return e.call(this),this.internal.vFS[a]=r,this},t.getFileFromVFS=function(a){return e.call(this),this.internal.vFS[a]!==void 0?this.internal.vFS[a]:null}}(Wn.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,l,c,n,v,R,x,N=e,L=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],F=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],j={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},$={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},H=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],W=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),ee=!1,se=0;this.__bidiEngine__={};var fe=function(oe){var _e=oe.charCodeAt(),Fe=_e>>8,Ee=$[Fe];return Ee!==void 0?N[256*Ee+(255&_e)]:Fe===252||Fe===253?"AL":W.test(Fe)?"L":Fe===8?"R":"N"},le=function(oe){for(var _e,Fe=0;Fe<oe.length;Fe++){if((_e=fe(oe.charAt(Fe)))==="L")return!1;if(_e==="R")return!0}return!1},me=function(oe,_e,Fe,Ee){var ze,Se,je,Ue,$e=_e[Ee];switch($e){case"L":case"R":ee=!1;break;case"N":case"AN":break;case"EN":ee&&($e="AN");break;case"AL":ee=!0,$e="R";break;case"WS":$e="N";break;case"CS":Ee<1||Ee+1>=_e.length||(ze=Fe[Ee-1])!=="EN"&&ze!=="AN"||(Se=_e[Ee+1])!=="EN"&&Se!=="AN"?$e="N":ee&&(Se="AN"),$e=Se===ze?Se:"N";break;case"ES":$e=(ze=Ee>0?Fe[Ee-1]:"B")==="EN"&&Ee+1<_e.length&&_e[Ee+1]==="EN"?"EN":"N";break;case"ET":if(Ee>0&&Fe[Ee-1]==="EN"){$e="EN";break}if(ee){$e="N";break}for(je=Ee+1,Ue=_e.length;je<Ue&&_e[je]==="ET";)je++;$e=je<Ue&&_e[je]==="EN"?"EN":"N";break;case"NSM":if(c&&!n){for(Ue=_e.length,je=Ee+1;je<Ue&&_e[je]==="NSM";)je++;if(je<Ue){var Be=oe[Ee],qe=Be>=1425&&Be<=2303||Be===64286;if(ze=_e[je],qe&&(ze==="R"||ze==="AL")){$e="R";break}}}$e=Ee<1||(ze=_e[Ee-1])==="B"?"N":Fe[Ee-1];break;case"B":ee=!1,i=!0,$e=se;break;case"S":l=!0,$e="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":ee=!1;break;case"BN":$e="N"}return $e},ge=function(oe,_e,Fe){var Ee=oe.split("");return Fe&&Re(Ee,Fe,{hiLevel:se}),Ee.reverse(),_e&&_e.reverse(),Ee.join("")},Re=function(oe,_e,Fe){var Ee,ze,Se,je,Ue,$e=-1,Be=oe.length,qe=0,be=[],Te=se?F:L,ke=[];for(ee=!1,i=!1,l=!1,ze=0;ze<Be;ze++)ke[ze]=fe(oe[ze]);for(Se=0;Se<Be;Se++){if(Ue=qe,be[Se]=me(oe,ke,be,Se),Ee=240&(qe=Te[Ue][j[be[Se]]]),qe&=15,_e[Se]=je=Te[qe][5],Ee>0)if(Ee===16){for(ze=$e;ze<Se;ze++)_e[ze]=1;$e=-1}else $e=-1;if(Te[qe][6])$e===-1&&($e=Se);else if($e>-1){for(ze=$e;ze<Se;ze++)_e[ze]=je;$e=-1}ke[Se]==="B"&&(_e[Se]=0),Fe.hiLevel|=je}l&&function(Ge,at,rt){for(var lt=0;lt<rt;lt++)if(Ge[lt]==="S"){at[lt]=se;for(var ot=lt-1;ot>=0&&Ge[ot]==="WS";ot--)at[ot]=se}}(ke,_e,Be)},we=function(oe,_e,Fe,Ee,ze){if(!(ze.hiLevel<oe)){if(oe===1&&se===1&&!i)return _e.reverse(),void(Fe&&Fe.reverse());for(var Se,je,Ue,$e,Be=_e.length,qe=0;qe<Be;){if(Ee[qe]>=oe){for(Ue=qe+1;Ue<Be&&Ee[Ue]>=oe;)Ue++;for($e=qe,je=Ue-1;$e<je;$e++,je--)Se=_e[$e],_e[$e]=_e[je],_e[je]=Se,Fe&&(Se=Fe[$e],Fe[$e]=Fe[je],Fe[je]=Se);qe=Ue}qe++}}},Ve=function(oe,_e,Fe){var Ee=oe.split(""),ze={hiLevel:se};return Fe||(Fe=[]),Re(Ee,Fe,ze),function(Se,je,Ue){if(Ue.hiLevel!==0&&x)for(var $e,Be=0;Be<Se.length;Be++)je[Be]===1&&($e=H.indexOf(Se[Be]))>=0&&(Se[Be]=H[$e+1])}(Ee,Fe,ze),we(2,Ee,_e,Fe,ze),we(1,Ee,_e,Fe,ze),Ee.join("")};return this.__bidiEngine__.doBidiReorder=function(oe,_e,Fe){if(function(ze,Se){if(Se)for(var je=0;je<ze.length;je++)Se[je]=je;n===void 0&&(n=le(ze)),R===void 0&&(R=le(ze))}(oe,_e),c||!v||R)if(c&&v&&n^R)se=n?1:0,oe=ge(oe,_e,Fe);else if(!c&&v&&R)se=n?1:0,oe=Ve(oe,_e,Fe),oe=ge(oe,_e);else if(!c||n||v||R){if(c&&!v&&n^R)oe=ge(oe,_e),n?(se=0,oe=Ve(oe,_e,Fe)):(se=1,oe=Ve(oe,_e,Fe),oe=ge(oe,_e));else if(c&&n&&!v&&R)se=1,oe=Ve(oe,_e,Fe),oe=ge(oe,_e);else if(!c&&!v&&n^R){var Ee=x;n?(se=1,oe=Ve(oe,_e,Fe),se=0,x=!1,oe=Ve(oe,_e,Fe),x=Ee):(se=0,oe=Ve(oe,_e,Fe),oe=ge(oe,_e),se=1,x=!1,oe=Ve(oe,_e,Fe),x=Ee,oe=ge(oe,_e))}}else se=0,oe=Ve(oe,_e,Fe);else se=n?1:0,oe=Ve(oe,_e,Fe);return oe},this.__bidiEngine__.setOptions=function(oe){oe&&(c=oe.isInputVisual,v=oe.isOutputVisual,n=oe.isInputRtl,R=oe.isOutputRtl,x=oe.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],a=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var l=r.options||{};r.mutex,l.lang;var c=[];if(l.isInputVisual=typeof l.isInputVisual!="boolean"||l.isInputVisual,a.setOptions(l),Object.prototype.toString.call(i)==="[object Array]"){var n=0;for(c=[],n=0;n<i.length;n+=1)Object.prototype.toString.call(i[n])==="[object Array]"?c.push([a.doBidiReorder(i[n][0]),i[n][1],i[n][2]]):c.push([a.doBidiReorder(i[n])]);r.text=c}else r.text=a.doBidiReorder(i);a.setOptions({isInputVisual:!0})}])}(Wn),Wn.API.TTFFont=function(){function t(e){var a;if(this.rawData=e,a=this.contents=new aA(e),this.contents.pos=4,a.readString(4)==="ttcf")throw new Error("TTCF not supported.");a.pos=0,this.parse(),this.subset=new KOe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new DOe(this.contents),this.head=new IOe(this),this.name=new BOe(this),this.cmap=new zte(this),this.toUnicode={},this.hhea=new LOe(this),this.maxp=new jOe(this),this.hmtx=new GOe(this),this.post=new kOe(this),this.os2=new FOe(this),this.loca=new $Oe(this),this.glyf=new ZOe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,a,r,i,l;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,n,v,R;for(R=[],c=0,n=(v=this.bbox).length;c<n;c++)e=v[c],R.push(Math.round(e*this.scaleFactor));return R}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),(32768&(a=i>>16))!=0&&(a=-(1+(65535^a))),this.italicAngle=+(a+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(l=this.familyClass)===1||l===2||l===3||l===4||l===5||l===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var a;return((a=this.cmap.unicode)!=null?a.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var a;return a=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*a},t.prototype.widthOfString=function(e,a,r){var i,l,c,n;for(c=0,l=0,n=(e=""+e).length;0<=n?l<n:l>n;l=0<=n?++l:--l)i=e.charCodeAt(l),c+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/a)||0;return c*(a/1e3)},t.prototype.lineHeight=function(e,a){var r;return a==null&&(a=!1),r=a?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Qp,aA=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var a,r;for(r=[],a=0;0<=e?a<e:a>e;a=0<=e?++a:--a)r[a]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var a,r,i;for(i=[],a=0,r=e.length;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push(this.writeByte(e.charCodeAt(a)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,a,r,i,l,c,n,v;return e=this.readByte(),a=this.readByte(),r=this.readByte(),i=this.readByte(),l=this.readByte(),c=this.readByte(),n=this.readByte(),v=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^a)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^l)+65536*(255^c)+256*(255^n)+(255^v)+1):72057594037927940*e+281474976710656*a+1099511627776*r+4294967296*i+16777216*l+65536*c+256*n+v},t.prototype.writeLongLong=function(e){var a,r;return a=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var a,r;for(a=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)a.push(this.readByte());return a},t.prototype.write=function(e){var a,r,i,l;for(l=[],r=0,i=e.length;r<i;r++)a=e[r],l.push(this.writeByte(a));return l},t}(),DOe=function(){var t;function e(a){var r,i,l;for(this.scalarType=a.readInt(),this.tableCount=a.readShort(),this.searchRange=a.readShort(),this.entrySelector=a.readShort(),this.rangeShift=a.readShort(),this.tables={},i=0,l=this.tableCount;0<=l?i<l:i>l;i=0<=l?++i:--i)r={tag:a.readString(4),checksum:a.readInt(),offset:a.readInt(),length:a.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(a){var r,i,l,c,n,v,R,x,N,L,F,j,$;for($ in F=Object.keys(a).length,v=Math.log(2),N=16*Math.floor(Math.log(F)/v),c=Math.floor(N/v),x=16*F-N,(i=new aA).writeInt(this.scalarType),i.writeShort(F),i.writeShort(N),i.writeShort(c),i.writeShort(x),l=16*F,R=i.pos+l,n=null,j=[],a)for(L=a[$],i.writeString($),i.writeInt(t(L)),i.writeInt(R),i.writeInt(L.length),j=j.concat(L),$==="head"&&(n=R),R+=L.length;R%4;)j.push(0),R++;return i.write(j),r=2981146554-t(i.data),i.pos=n+8,i.writeUInt32(r),i.data},t=function(a){var r,i,l,c;for(a=Dte.call(a);a.length%4;)a.push(0);for(l=new aA(a),i=0,r=0,c=a.length;r<c;r=r+=4)i+=l.readUInt32();return 4294967295&i},e}(),MOe={}.hasOwnProperty,Jm=function(t,e){for(var a in e)MOe.call(e,a)&&(t[a]=e[a]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Qp=function(){function t(e){var a;this.file=e,a=this.file.directory.tables[this.tag],this.exists=!!a,a&&(this.offset=a.offset,this.length=a.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var IOe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Jm(e,Qp),e.prototype.tag="head",e.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.revision=a.readInt(),this.checkSumAdjustment=a.readInt(),this.magicNumber=a.readInt(),this.flags=a.readShort(),this.unitsPerEm=a.readShort(),this.created=a.readLongLong(),this.modified=a.readLongLong(),this.xMin=a.readShort(),this.yMin=a.readShort(),this.xMax=a.readShort(),this.yMax=a.readShort(),this.macStyle=a.readShort(),this.lowestRecPPEM=a.readShort(),this.fontDirectionHint=a.readShort(),this.indexToLocFormat=a.readShort(),this.glyphDataFormat=a.readShort()},e.prototype.encode=function(a){var r;return(r=new aA).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(a),r.writeShort(this.glyphDataFormat),r.data},e}(),sH=function(){function t(e,a){var r,i,l,c,n,v,R,x,N,L,F,j,$,H,W,ee,se;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=a+e.readInt(),N=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(v=0;v<256;++v)this.codeMap[v]=e.readByte();break;case 4:for(F=e.readUInt16(),L=F/2,e.pos+=6,l=function(){var fe,le;for(le=[],v=fe=0;0<=L?fe<L:fe>L;v=0<=L?++fe:--fe)le.push(e.readUInt16());return le}(),e.pos+=2,$=function(){var fe,le;for(le=[],v=fe=0;0<=L?fe<L:fe>L;v=0<=L?++fe:--fe)le.push(e.readUInt16());return le}(),R=function(){var fe,le;for(le=[],v=fe=0;0<=L?fe<L:fe>L;v=0<=L?++fe:--fe)le.push(e.readUInt16());return le}(),x=function(){var fe,le;for(le=[],v=fe=0;0<=L?fe<L:fe>L;v=0<=L?++fe:--fe)le.push(e.readUInt16());return le}(),i=(this.length-e.pos+this.offset)/2,n=function(){var fe,le;for(le=[],v=fe=0;0<=i?fe<i:fe>i;v=0<=i?++fe:--fe)le.push(e.readUInt16());return le}(),v=W=0,se=l.length;W<se;v=++W)for(H=l[v],r=ee=j=$[v];j<=H?ee<=H:ee>=H;r=j<=H?++ee:--ee)x[v]===0?c=r+R[v]:(c=n[x[v]/2+(r-j)-(L-v)]||0)!==0&&(c+=R[v]),this.codeMap[r]=65535&c}e.pos=N}return t.encode=function(e,a){var r,i,l,c,n,v,R,x,N,L,F,j,$,H,W,ee,se,fe,le,me,ge,Re,we,Ve,oe,_e,Fe,Ee,ze,Se,je,Ue,$e,Be,qe,be,Te,ke,Ge,at,rt,lt,ot,ve,Vt,Bt;switch(Ee=new aA,c=Object.keys(e).sort(function(wa,It){return wa-It}),a){case"macroman":for($=0,H=function(){var wa=[];for(j=0;j<256;++j)wa.push(0);return wa}(),ee={0:0},l={},ze=0,$e=c.length;ze<$e;ze++)ee[ot=e[i=c[ze]]]==null&&(ee[ot]=++$),l[i]={old:e[i],new:ee[e[i]]},H[i]=ee[e[i]];return Ee.writeUInt16(1),Ee.writeUInt16(0),Ee.writeUInt32(12),Ee.writeUInt16(0),Ee.writeUInt16(262),Ee.writeUInt16(0),Ee.write(H),{charMap:l,subtable:Ee.data,maxGlyphID:$+1};case"unicode":for(_e=[],N=[],se=0,ee={},r={},W=R=null,Se=0,Be=c.length;Se<Be;Se++)ee[le=e[i=c[Se]]]==null&&(ee[le]=++se),r[i]={old:le,new:ee[le]},n=ee[le]-i,W!=null&&n===R||(W&&N.push(W),_e.push(i),R=n),W=i;for(W&&N.push(W),N.push(65535),_e.push(65535),Ve=2*(we=_e.length),Re=2*Math.pow(Math.log(we)/Math.LN2,2),L=Math.log(Re/2)/Math.LN2,ge=2*we-Re,v=[],me=[],F=[],j=je=0,qe=_e.length;je<qe;j=++je){if(oe=_e[j],x=N[j],oe===65535){v.push(0),me.push(0);break}if(oe-(Fe=r[oe].new)>=32768)for(v.push(0),me.push(2*(F.length+we-j)),i=Ue=oe;oe<=x?Ue<=x:Ue>=x;i=oe<=x?++Ue:--Ue)F.push(r[i].new);else v.push(Fe-oe),me.push(0)}for(Ee.writeUInt16(3),Ee.writeUInt16(1),Ee.writeUInt32(12),Ee.writeUInt16(4),Ee.writeUInt16(16+8*we+2*F.length),Ee.writeUInt16(0),Ee.writeUInt16(Ve),Ee.writeUInt16(Re),Ee.writeUInt16(L),Ee.writeUInt16(ge),rt=0,be=N.length;rt<be;rt++)i=N[rt],Ee.writeUInt16(i);for(Ee.writeUInt16(0),lt=0,Te=_e.length;lt<Te;lt++)i=_e[lt],Ee.writeUInt16(i);for(ve=0,ke=v.length;ve<ke;ve++)n=v[ve],Ee.writeUInt16(n);for(Vt=0,Ge=me.length;Vt<Ge;Vt++)fe=me[Vt],Ee.writeUInt16(fe);for(Bt=0,at=F.length;Bt<at;Bt++)$=F[Bt],Ee.writeUInt16($);return{charMap:r,subtable:Ee.data,maxGlyphID:se+1}}},t}(),zte=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Jm(e,Qp),e.prototype.tag="cmap",e.prototype.parse=function(a){var r,i,l;for(a.pos=this.offset,this.version=a.readUInt16(),l=a.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=l?i<l:i>l;i=0<=l?++i:--i)r=new sH(a,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(a,r){var i,l;return r==null&&(r="macroman"),i=sH.encode(a,r),(l=new aA).writeUInt16(0),l.writeUInt16(1),i.table=l.data.concat(i.subtable),i},e}(),LOe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Jm(e,Qp),e.prototype.tag="hhea",e.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.ascender=a.readShort(),this.decender=a.readShort(),this.lineGap=a.readShort(),this.advanceWidthMax=a.readShort(),this.minLeftSideBearing=a.readShort(),this.minRightSideBearing=a.readShort(),this.xMaxExtent=a.readShort(),this.caretSlopeRise=a.readShort(),this.caretSlopeRun=a.readShort(),this.caretOffset=a.readShort(),a.pos+=8,this.metricDataFormat=a.readShort(),this.numberOfMetrics=a.readUInt16()},e}(),FOe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Jm(e,Qp),e.prototype.tag="OS/2",e.prototype.parse=function(a){if(a.pos=this.offset,this.version=a.readUInt16(),this.averageCharWidth=a.readShort(),this.weightClass=a.readUInt16(),this.widthClass=a.readUInt16(),this.type=a.readShort(),this.ySubscriptXSize=a.readShort(),this.ySubscriptYSize=a.readShort(),this.ySubscriptXOffset=a.readShort(),this.ySubscriptYOffset=a.readShort(),this.ySuperscriptXSize=a.readShort(),this.ySuperscriptYSize=a.readShort(),this.ySuperscriptXOffset=a.readShort(),this.ySuperscriptYOffset=a.readShort(),this.yStrikeoutSize=a.readShort(),this.yStrikeoutPosition=a.readShort(),this.familyClass=a.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(a.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(a.readInt());return i}(),this.vendorID=a.readString(4),this.selection=a.readShort(),this.firstCharIndex=a.readShort(),this.lastCharIndex=a.readShort(),this.version>0&&(this.ascent=a.readShort(),this.descent=a.readShort(),this.lineGap=a.readShort(),this.winAscent=a.readShort(),this.winDescent=a.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(a.readInt());return i}(),this.version>1))return this.xHeight=a.readShort(),this.capHeight=a.readShort(),this.defaultChar=a.readShort(),this.breakChar=a.readShort(),this.maxContext=a.readShort()},e}(),kOe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Jm(e,Qp),e.prototype.tag="post",e.prototype.parse=function(a){var r,i,l;switch(a.pos=this.offset,this.format=a.readInt(),this.italicAngle=a.readInt(),this.underlinePosition=a.readShort(),this.underlineThickness=a.readShort(),this.isFixedPitch=a.readInt(),this.minMemType42=a.readInt(),this.maxMemType42=a.readInt(),this.minMemType1=a.readInt(),this.maxMemType1=a.readInt(),this.format){case 65536:break;case 131072:var c;for(i=a.readUInt16(),this.glyphNameIndex=[],c=0;0<=i?c<i:c>i;c=0<=i?++c:--c)this.glyphNameIndex.push(a.readUInt16());for(this.names=[],l=[];a.pos<this.offset+this.length;)r=a.readByte(),l.push(this.names.push(a.readString(r)));return l;case 151552:return i=a.readUInt16(),this.offsets=a.read(i);case 196608:break;case 262144:return this.map=(function(){var n,v,R;for(R=[],c=n=0,v=this.file.maxp.numGlyphs;0<=v?n<v:n>v;c=0<=v?++n:--n)R.push(a.readUInt32());return R}).call(this)}},e}(),UOe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},BOe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Jm(e,Qp),e.prototype.tag="name",e.prototype.parse=function(a){var r,i,l,c,n,v,R,x,N,L,F;for(a.pos=this.offset,a.readShort(),r=a.readShort(),v=a.readShort(),i=[],c=0;0<=r?c<r:c>r;c=0<=r?++c:--c)i.push({platformID:a.readShort(),encodingID:a.readShort(),languageID:a.readShort(),nameID:a.readShort(),length:a.readShort(),offset:this.offset+v+a.readShort()});for(R={},c=N=0,L=i.length;N<L;c=++N)l=i[c],a.pos=l.offset,x=a.readString(l.length),n=new UOe(x,l),R[F=l.nameID]==null&&(R[F]=[]),R[l.nameID].push(n);this.strings=R,this.copyright=R[0],this.fontFamily=R[1],this.fontSubfamily=R[2],this.uniqueSubfamily=R[3],this.fontName=R[4],this.version=R[5];try{this.postscriptName=R[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=R[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=R[7],this.manufacturer=R[8],this.designer=R[9],this.description=R[10],this.vendorUrl=R[11],this.designerUrl=R[12],this.license=R[13],this.licenseUrl=R[14],this.preferredFamily=R[15],this.preferredSubfamily=R[17],this.compatibleFull=R[18],this.sampleText=R[19]},e}(),jOe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Jm(e,Qp),e.prototype.tag="maxp",e.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.numGlyphs=a.readUInt16(),this.maxPoints=a.readUInt16(),this.maxContours=a.readUInt16(),this.maxCompositePoints=a.readUInt16(),this.maxComponentContours=a.readUInt16(),this.maxZones=a.readUInt16(),this.maxTwilightPoints=a.readUInt16(),this.maxStorage=a.readUInt16(),this.maxFunctionDefs=a.readUInt16(),this.maxInstructionDefs=a.readUInt16(),this.maxStackElements=a.readUInt16(),this.maxSizeOfInstructions=a.readUInt16(),this.maxComponentElements=a.readUInt16(),this.maxComponentDepth=a.readUInt16()},e}(),GOe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Jm(e,Qp),e.prototype.tag="hmtx",e.prototype.parse=function(a){var r,i,l,c,n,v,R;for(a.pos=this.offset,this.metrics=[],r=0,v=this.file.hhea.numberOfMetrics;0<=v?r<v:r>v;r=0<=v?++r:--r)this.metrics.push({advance:a.readUInt16(),lsb:a.readInt16()});for(l=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var x,N;for(N=[],r=x=0;0<=l?x<l:x>l;r=0<=l?++x:--x)N.push(a.readInt16());return N}(),this.widths=(function(){var x,N,L,F;for(F=[],x=0,N=(L=this.metrics).length;x<N;x++)c=L[x],F.push(c.advance);return F}).call(this),i=this.widths[this.widths.length-1],R=[],r=n=0;0<=l?n<l:n>l;r=0<=l?++n:--n)R.push(this.widths.push(i));return R},e.prototype.forGlyph=function(a){return a in this.metrics?this.metrics[a]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[a-this.metrics.length]}},e}(),Dte=[].slice,ZOe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Jm(e,Qp),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(a){var r,i,l,c,n,v,R,x,N,L;return a in this.cache?this.cache[a]:(c=this.file.loca,r=this.file.contents,i=c.indexOf(a),(l=c.lengthOf(a))===0?this.cache[a]=null:(r.pos=this.offset+i,n=(v=new aA(r.read(l))).readShort(),x=v.readShort(),L=v.readShort(),R=v.readShort(),N=v.readShort(),this.cache[a]=n===-1?new HOe(v,x,L,R,N):new qOe(v,n,x,L,R,N),this.cache[a]))},e.prototype.encode=function(a,r,i){var l,c,n,v,R;for(n=[],c=[],v=0,R=r.length;v<R;v++)l=a[r[v]],c.push(n.length),l&&(n=n.concat(l.encode(i)));return c.push(n.length),{table:n,offsets:c}},e}(),qOe=function(){function t(e,a,r,i,l,c){this.raw=e,this.numberOfContours=a,this.xMin=r,this.yMin=i,this.xMax=l,this.yMax=c,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),HOe=function(){function t(e,a,r,i,l){var c,n;for(this.raw=e,this.xMin=a,this.yMin=r,this.xMax=i,this.yMax=l,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;n=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&n;)c.pos+=1&n?4:2,128&n?c.pos+=8:64&n?c.pos+=4:8&n&&(c.pos+=2)}return t.prototype.encode=function(){var e,a,r;for(a=new aA(Dte.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)a.pos=this.glyphOffsets[e];return a.data},t}(),$Oe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Jm(e,Qp),e.prototype.tag="loca",e.prototype.parse=function(a){var r,i;return a.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var l,c;for(c=[],i=0,l=this.length;i<l;i+=2)c.push(2*a.readUInt16());return c}).call(this):(function(){var l,c;for(c=[],i=0,l=this.length;i<l;i+=4)c.push(a.readUInt32());return c}).call(this)},e.prototype.indexOf=function(a){return this.offsets[a]},e.prototype.lengthOf=function(a){return this.offsets[a+1]-this.offsets[a]},e.prototype.encode=function(a,r){for(var i=new Uint32Array(this.offsets.length),l=0,c=0,n=0;n<i.length;++n)if(i[n]=l,c<r.length&&r[c]==n){++c,i[n]=l;var v=this.offsets[n],R=this.offsets[n+1]-v;R>0&&(l+=R)}for(var x=new Array(4*i.length),N=0;N<i.length;++N)x[4*N+3]=255&i[N],x[4*N+2]=(65280&i[N])>>8,x[4*N+1]=(16711680&i[N])>>16,x[4*N]=(4278190080&i[N])>>24;return x},e}(),KOe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,a,r,i,l;for(a in i=this.font.cmap.tables[0].codeMap,e={},l=this.subset)r=l[a],e[a]=i[r];return e},t.prototype.glyphsFor=function(e){var a,r,i,l,c,n,v;for(i={},c=0,n=e.length;c<n;c++)i[l=e[c]]=this.font.glyf.glyphFor(l);for(l in a=[],i)(r=i[l])!=null&&r.compound&&a.push.apply(a,r.glyphIDs);if(a.length>0)for(l in v=this.glyphsFor(a))r=v[l],i[l]=r;return i},t.prototype.encode=function(e,a){var r,i,l,c,n,v,R,x,N,L,F,j,$,H,W;for(i in r=zte.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(e),F={0:0},W=r.charMap)F[(v=W[i]).old]=v.new;for(j in L=r.maxGlyphID,c)j in F||(F[j]=L++);return x=function(ee){var se,fe;for(se in fe={},ee)fe[ee[se]]=se;return fe}(F),N=Object.keys(x).sort(function(ee,se){return ee-se}),$=function(){var ee,se,fe;for(fe=[],ee=0,se=N.length;ee<se;ee++)n=N[ee],fe.push(x[n]);return fe}(),l=this.font.glyf.encode(c,$,F),R=this.font.loca.encode(l.offsets,$),H={cmap:this.font.cmap.raw(),glyf:l.table,loca:R,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(a)},this.font.os2.exists&&(H["OS/2"]=this.font.os2.raw()),this.font.directory.encode(H)},t}();Wn.API.PDFObject=function(){var t;function e(){}return t=function(a,r){return(Array(r+1).join("0")+a).slice(-r)},e.convert=function(a){var r,i,l,c;if(Array.isArray(a))return"["+function(){var n,v,R;for(R=[],n=0,v=a.length;n<v;n++)r=a[n],R.push(e.convert(r));return R}().join(" ")+"]";if(typeof a=="string")return"/"+a;if(a!=null&&a.isString)return"("+a+")";if(a instanceof Date)return"(D:"+t(a.getUTCFullYear(),4)+t(a.getUTCMonth(),2)+t(a.getUTCDate(),2)+t(a.getUTCHours(),2)+t(a.getUTCMinutes(),2)+t(a.getUTCSeconds(),2)+"Z)";if({}.toString.call(a)==="[object Object]"){for(i in l=["<<"],a)c=a[i],l.push("/"+i+" "+e.convert(c));return l.push(">>"),l.join(`
`)}return""+a},e}();const WOe=()=>{const[t,e]=ie.useState("available"),[a,r]=ie.useState("bike"),[i,l]=ie.useState(null),[c,n]=ie.useState([]),[v,R]=ie.useState(null),[x,N]=ie.useState(""),[L,F]=ie.useState(!1),[j,$]=ie.useState(!1),[H,W]=ie.useState(null),[ee,se]=ie.useState(!1),[fe,le]=ie.useState(""),[me,ge]=ie.useState(""),[Re,we]=ie.useState("all"),[Ve,oe]=ie.useState(1),[_e]=ie.useState(10),[Fe,Ee]=ie.useState([]),[ze,Se]=ie.useState([]),[je,Ue]=ie.useState([]),[$e,Be]=ie.useState(""),[qe,be]=ie.useState(!1),[Te,ke]=ie.useState("all"),[Ge,at]=ie.useState(!1),[rt,lt]=ie.useState(1),[ot,ve]=ie.useState(""),[Vt,Bt]=ie.useState(""),[wa,It]=ie.useState(""),[$t,wt]=ie.useState([]),[hr,ba]=ie.useState({});ie.useEffect(()=>{const ga=Dn(wr,"bikes"),pr=Tg(ga,lx("bikeId")),Kr=Up(pr,Zt=>{const Ne=Zt.docs.map(He=>({id:He.id,...He.data()}));n(Ne);const Ie=Ne.filter(He=>!He.stationAssigned&&He.bikeStatus==="Available");Ee(Ie)}),Rn=(async()=>{const Zt=Dn(wr,"stations");return Up(Zt,Ie=>{const He=Ie.docs.map(yt=>({id:yt.id,...yt.data()}));Ue(He)})})();return()=>{Kr(),Rn.then(Zt=>Zt())}},[]);const Pa=ga=>{l(ga.target.files[0])},Ja=()=>{const ga=c.filter(Rn=>Rn.bikeCategory==="Regular Bicycle").length+1,pr=c.filter(Rn=>Rn.bikeCategory==="Electric Bicycle").length+1;return`${me==="Regular Bicycle"?"BK":"EBK"}-${String(me==="Regular Bicycle"?ga:pr).padStart(3,"0")}`},or=ga=>new Promise(pr=>{const Kr=new FileReader;Kr.readAsDataURL(ga),Kr.onload=ti=>{const Rn=new Image;Rn.src=ti.target.result,Rn.onload=()=>{const Zt=document.createElement("canvas"),Ne=Zt.getContext("2d");let Ie=Rn.width,He=Rn.height;const yt=800;Ie>He&&Ie>yt?(He=He*yt/Ie,Ie=yt):He>yt&&(Ie=Ie*yt/He,He=yt),Zt.width=Ie,Zt.height=He,Ne.drawImage(Rn,0,0,Ie,He),Zt.toBlob(At=>{pr(At)},"image/jpeg",.6)}}}),lr=async()=>{if(!i)return null;try{const ga=await or(i),pr=`bikes/${Date.now()}_${i.name}`,Kr=qI(),ti=ZI(Kr,pr);return await jI(ti,ga),await GI(ti)}catch(ga){return console.error("Error uploading image:",ga),null}},Tr=async ga=>{ga.preventDefault();const pr=await lr();if(!pr){alert("Image upload failed. Try again.");return}const ti={bikeId:Ja(),bikeName:fe,bikeCategory:me,bikeType:a,imageUrl:pr,bikeStatus:"Available",isAvailable:!0,createdAt:new Date};try{await zv(Dn(wr,"bikes"),ti),alert("Bike added successfully!"),F(!1),nn()}catch(Rn){console.error("Error adding bike:",Rn)}},ka=async ga=>{ga.preventDefault();const pr=await lr(),Kr={bikeName:fe,bikeCategory:me,bikeType:a,bikeStatus:t,imageUrl:pr||v.imageUrl};try{await yu(ds(wr,"bikes",v.id),Kr),alert("Bike updated successfully!"),R(null),$(!1),fetchBikes(),nn()}catch(ti){console.error("Error updating bike:",ti)}},kr=(ga,pr)=>{pr.stopPropagation(),R(ga),le(ga.bikeName),ge(ga.bikeCategory),r(ga.bikeType),e(ga.bikeStatus),$(!0)},nn=()=>{le(""),ge(""),r(""),l(null),e("Available"),R(null)},wn=async()=>{const ga=new Wn,pr=40,Kr=5,ti=3;let Rn=10,Zt=10;for(let Ne=0;Ne<c.length;Ne++){const Ie=c[Ne];try{const He=await WNe.toDataURL(Ie.id,{type:"image/jpeg"});He?(ga.text(`Bike ID: ${Ie.bikeId}`,Rn,Zt+pr+5),ga.addImage(He,"JPEG",Rn,Zt,pr,pr),Rn+=pr+Kr,(Ne+1)%ti===0&&(Rn=10,Zt+=pr+20),Zt+pr+20>ga.internal.pageSize.height&&(ga.addPage(),Rn=10,Zt=10)):console.error("QR code generation failed for bike:",Ie.bikeId)}catch(He){console.error("Error generating QR code: ",He)}}ga.save("bike_qr_codes.pdf")},un=ga=>{N(ga.target.value.toUpperCase()),oe(1)},va=ga=>{we(ga.target.value),oe(1)},$a=c.filter(ga=>ga.bikeId.toUpperCase().includes(x)&&(Re==="all"||Re==="Regular Bicycle"&&ga.bikeCategory==="Regular Bicycle"||Re==="Electric Bicycle"&&ga.bikeCategory==="Electric Bicycle"||ga.bikeStatus===Re)),la=Math.ceil($a.length/_e),Ya=Ve*_e,yr=Ya-_e,Tn=$a.slice(yr,Ya),Qr=()=>({regularBikes:c.filter(ga=>ga.bikeCategory==="Regular Bicycle").length,electricBikes:c.filter(ga=>ga.bikeCategory==="Electric Bicycle").length,available:c.filter(ga=>ga.bikeStatus==="Available").length,inUse:c.filter(ga=>ga.bikeStatus==="In Use").length,toRepair:c.filter(ga=>ga.bikeStatus==="To Repair").length,toReplace:c.filter(ga=>ga.bikeStatus==="To Replace").length,retired:c.filter(ga=>ga.bikeStatus==="Retired").length}),cn=ga=>{Se(pr=>pr.includes(ga)?pr.filter(Kr=>Kr!==ga):[...pr,ga])},$r=async()=>{if(!$e||ze.length===0){alert("Please select a station and at least one bike");return}try{const ga=ze.map(pr=>yu(ds(wr,"bikes",pr),{stationAssigned:$e}));await Promise.all(ga),Se([]),Be(""),be(!1)}catch(ga){console.error("Error assigning bikes:",ga),alert("Failed to assign bikes to station")}},br=()=>Fe.filter(ga=>Te==="all"?!0:ga.bikeCategory===Te),Fi=async(ga,pr)=>{try{const Kr=await or(pr),ti=`bikes/${Date.now()}_${pr.name}`,Rn=qI(),Zt=ZI(Rn,ti);await jI(Zt,Kr);const Ne=await GI(Zt);ba(Ie=>({...Ie,[ga]:Ne}))}catch(Kr){console.error("Error uploading photo:",Kr),alert("Failed to upload photo")}},yi=async ga=>{ga.preventDefault();try{const Kr=$t.map(ti=>({...ti,imageUrl:hr[ti.bikeId]||null})).map(ti=>zv(Dn(wr,"bikes"),ti));await Promise.all(Kr),alert(`${rt} bikes added successfully!`),at(!1),Cs()}catch(pr){console.error("Error adding bikes in bulk:",pr),alert("Failed to add bikes in bulk")}},oi=()=>{const ga=c.filter(ti=>ti.bikeCategory==="Regular Bicycle").length,pr=c.filter(ti=>ti.bikeCategory==="Electric Bicycle").length,Kr=[];for(let ti=0;ti<rt;ti++){const Rn=Vt==="Regular Bicycle"?"BK":"EBK",Zt=Vt==="Regular Bicycle"?ga+ti+1:pr+ti+1,Ne=`${Rn}-${String(Zt).padStart(3,"0")}`;Kr.push({bikeId:Ne,bikeName:`${wa} ${String(Zt).padStart(3,"0")}`,bikeCategory:Vt,bikeType:ot,bikeStatus:"Available",isAvailable:!0,createdAt:new Date})}wt(Kr)};ie.useEffect(()=>{rt>0&&Vt&&ot&&wa&&oi()},[rt,Vt,ot,wa]);const Cs=()=>{lt(1),ve(""),Bt(""),It(""),wt([]),ba({})};return q.jsxs(Xv,{children:[q.jsx(lA,{title:"Bike Management"}),q.jsxs("div",{className:"bike-management-container",children:[q.jsx("div",{className:"bike-management-header",children:q.jsx("h2",{children:"Bike Management"})}),q.jsxs("div",{className:"search-container",children:[q.jsx("input",{type:"text",placeholder:"🔍 Search by Bike ID (e.g., BK-001)...",className:"search-box",value:x,onChange:un}),q.jsx("div",{className:"button-group",children:q.jsxs("button",{className:"bulk-add-btn",onClick:()=>at(!0),children:[q.jsx(dx,{})," Add Bikes"]})}),q.jsx("button",{className:"generate-pdf-btn",onClick:wn,children:"Generate QR (PDF)"}),q.jsxs("div",{className:"sort-container",children:[q.jsx("label",{className:"sort-label",children:"Sort By:"}),q.jsxs("select",{value:Re,onChange:va,className:"sort-dropdown",children:[q.jsx("option",{value:"all",children:"All Bikes"}),q.jsx("option",{value:"Regular Bicycle",children:"Regular Bikes"}),q.jsx("option",{value:"Electric Bicycle",children:"Electric Bikes"}),q.jsxs("optgroup",{label:"Status",children:[q.jsx("option",{value:"Available",children:"Available"}),q.jsx("option",{value:"In Use",children:"In Use"}),q.jsx("option",{value:"To Repair",children:"To Repair"}),q.jsx("option",{value:"To Replace",children:"To Replace"}),q.jsx("option",{value:"Retired",children:"Retired"})]})]})]})]}),L&&q.jsx("div",{className:"modal-overlay",children:q.jsxs("div",{className:"modal-content",children:[q.jsx("h2",{children:"Adding New Bike"}),q.jsxs("form",{className:"bike-form",onSubmit:Tr,children:[q.jsx("div",{className:"upload-box",children:q.jsxs("label",{className:"upload-label",children:[q.jsx(rB,{})," Upload Bike Image",q.jsx("input",{type:"file",accept:"image/*",onChange:Pa,required:!0})]})}),q.jsx("label",{children:"Bike Name:"}),q.jsx("input",{type:"text",value:fe,onChange:ga=>le(ga.target.value),required:!0}),q.jsx("label",{children:"Category of Bike:"}),q.jsxs("select",{value:me,onChange:ga=>ge(ga.target.value),required:!0,children:[q.jsx("option",{value:"",children:"Select Category"}),q.jsx("option",{value:"Regular Bicycle",children:"Regular Bicycle"}),q.jsx("option",{value:"Electric Bicycle",children:"Electric Bicycle"})]}),q.jsx("label",{children:"Bike Type:"}),q.jsxs("select",{value:a,onChange:ga=>r(ga.target.value),required:!0,children:[q.jsx("option",{value:"",children:"Select Bike Type"}),q.jsx("option",{value:"Road Bike",children:"Road Bike"}),q.jsx("option",{value:"Mountain Bike",children:"Mountain Bike"}),q.jsx("option",{value:"City Bike",children:"City Bike"}),q.jsx("option",{value:"Fat Bike",children:"Fat Bike"}),q.jsx("option",{value:"BMX",children:"BMX"}),q.jsx("option",{value:"Electric Bike",children:"Electric Bike"})]}),q.jsxs("div",{className:"modal-buttons",children:[q.jsx("button",{type:"submit",className:"save-btn",children:"Save"}),q.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>F(!1),children:"Cancel"})]})]})]})}),q.jsxs("div",{className:"bike-stats-overlay",children:[q.jsxs("div",{className:"stats-row",children:[q.jsxs("div",{className:"stat-card regular",children:[q.jsx("h3",{children:"Regular Bikes"}),q.jsx("p",{children:Qr().regularBikes})]}),q.jsxs("div",{className:"stat-card electric",children:[q.jsx("h3",{children:"Electric Bikes"}),q.jsx("p",{children:Qr().electricBikes})]}),q.jsxs("div",{className:"stat-card available",children:[q.jsx("h3",{children:"Available"}),q.jsx("p",{children:Qr().available})]}),q.jsxs("div",{className:"stat-card in-use",children:[q.jsx("h3",{children:"In Use"}),q.jsx("p",{children:Qr().inUse})]})]}),q.jsxs("div",{className:"stats-row",children:[q.jsxs("div",{className:"stat-card repair",children:[q.jsx("h3",{children:"To Repair"}),q.jsx("p",{children:Qr().toRepair})]}),q.jsxs("div",{className:"stat-card replace",children:[q.jsx("h3",{children:"To Replace"}),q.jsx("p",{children:Qr().toReplace})]}),q.jsxs("div",{className:"stat-card retired",children:[q.jsx("h3",{children:"Retired"}),q.jsx("p",{children:Qr().retired})]}),q.jsxs("div",{className:"stat-card total",children:[q.jsx("h3",{children:"Total Bikes"}),q.jsx("p",{children:c.length})]})]})]}),q.jsxs("div",{className:"bike-list",children:[q.jsxs("table",{children:[q.jsx("thead",{children:q.jsxs("tr",{children:[q.jsx("th",{children:"Bike Name"}),q.jsx("th",{children:"Bike ID"}),q.jsx("th",{children:"Category"}),q.jsx("th",{children:"Type"}),q.jsx("th",{children:"Image"}),q.jsx("th",{children:"Status"}),q.jsx("th",{children:"Action"})]})}),q.jsx("tbody",{children:$a.length===0?q.jsx("tr",{children:q.jsx("td",{colSpan:"7",className:"no-results",children:"No bikes found matching your criteria"})}):Tn.map(ga=>q.jsxs("tr",{onClick:()=>{W(ga),se(!0)},className:"clickable-row",children:[q.jsx("td",{children:ga.bikeName||"No Name"}),q.jsx("td",{children:q.jsx("strong",{children:ga.bikeId})}),q.jsx("td",{children:ga.bikeCategory}),q.jsx("td",{children:ga.bikeType}),q.jsx("td",{children:q.jsx("img",{src:ga.imageUrl,alt:ga.bikeName,className:"table-bike-image",onClick:pr=>{pr.stopPropagation(),W(ga),se(!0)}})}),q.jsx("td",{children:q.jsx("div",{className:`status-container status-${ga.bikeStatus.replace(/\s+/g,"-")}`,children:ga.bikeStatus})}),q.jsx("td",{children:q.jsx("button",{className:"edit-btn",onClick:pr=>kr(ga,pr),children:q.jsx(_R,{})})})]},ga.id))})]}),$a.length>0&&q.jsxs("div",{className:"pagination-controls",children:[q.jsx("button",{className:"pagination-button",onClick:()=>oe(Ve-1),disabled:Ve===1,children:"Previous"}),q.jsxs("span",{className:"pagination-info",children:["Page ",Ve," of ",la]}),q.jsx("button",{className:"pagination-button",onClick:()=>oe(Ve+1),disabled:Ve===la,children:"Next"})]})]}),ee&&H&&q.jsx("div",{className:"modal-overlay",children:q.jsxs("div",{className:"modal-content",children:[q.jsx("h2",{children:"Bike Details"}),q.jsx("div",{className:"bike-image-container",children:q.jsx("img",{src:H.imageUrl,alt:"Bike",className:"bike-preview"})}),q.jsxs("p",{children:[q.jsx("strong",{children:"Bike Name:"})," ",H.bikeName]}),q.jsxs("p",{children:[q.jsx("strong",{children:"Bike ID:"})," ",H.bikeId]}),q.jsxs("p",{children:[q.jsx("strong",{children:"Category:"})," ",H.bikeCategory]}),q.jsxs("p",{children:[q.jsx("strong",{children:"Bike Type:"})," ",H.bikeType]}),q.jsxs("p",{children:[q.jsx("strong",{children:"Status:"})," ",H.bikeStatus]}),q.jsx("div",{className:"modal-buttons",children:q.jsx("button",{className:"cancel-btn",onClick:()=>se(!1),children:"Close"})})]})}),j&&v&&q.jsx("div",{className:"modal-overlay",children:q.jsxs("div",{className:"modal-content",children:[q.jsx("h2",{children:"Edit Bike"}),q.jsxs("form",{className:"bike-form",onSubmit:ka,children:[q.jsxs("div",{className:"upload-box",children:[q.jsxs("label",{className:"upload-label",children:[q.jsx(rB,{})," Upload New Image",q.jsx("input",{type:"file",accept:"image/*",onChange:Pa})]}),v.imageUrl&&q.jsx("img",{src:v.imageUrl,alt:"Current Bike",className:"bike-preview"})]}),q.jsx("label",{children:"Bike Name:"}),q.jsx("input",{type:"text",value:fe,onChange:ga=>le(ga.target.value),required:!0}),q.jsx("label",{children:"Category of Bike:"}),q.jsxs("select",{value:me,onChange:ga=>ge(ga.target.value),required:!0,children:[q.jsx("option",{value:"",children:"Select Category"}),q.jsx("option",{value:"Regular Bicycle",children:"Regular Bicycle"}),q.jsx("option",{value:"Electric Bicycle",children:"Electric Bicycle"})]}),q.jsx("label",{children:"Bike Type:"}),q.jsxs("select",{value:a,onChange:ga=>r(ga.target.value),required:!0,children:[q.jsx("option",{value:"",children:"Select Bike Type"}),q.jsx("option",{value:"Road Bike",children:"Road Bike"}),q.jsx("option",{value:"Mountain Bike",children:"Mountain Bike"}),q.jsx("option",{value:"City Bike",children:"City Bike"}),q.jsx("option",{value:"Fat Bike",children:"Fat Bike"}),q.jsx("option",{value:"BMX",children:"BMX"}),q.jsx("option",{value:"Electric Bike",children:"Electric Bike"})]}),q.jsx("label",{children:"Status:"}),q.jsxs("select",{value:t,onChange:ga=>e(ga.target.value),required:!0,children:[q.jsx("option",{value:"Available",children:"Available"}),q.jsx("option",{value:"To Repair",children:"To Repair"}),q.jsx("option",{value:"To Replace",children:"To Replace"}),q.jsx("option",{value:"Retired",children:"Retired"})]}),q.jsxs("div",{className:"modal-buttons",children:[q.jsx("button",{type:"submit",className:"save-btn",children:"Update"}),q.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>{$(!1),nn()},children:"Cancel"})]})]})]})}),q.jsx("div",{className:"unassigned-inventory-card",children:q.jsxs("div",{className:"inventory-stats",children:[q.jsxs("div",{className:"inventory-total",children:[q.jsx("h3",{children:"Unassigned Bikes Inventory"}),q.jsx("div",{className:"total-count",children:Fe.length})]}),q.jsxs("div",{className:"inventory-breakdown",children:[q.jsxs("div",{className:"inventory-item",children:[q.jsx("span",{children:"Regular Bikes:"}),q.jsx("span",{children:Fe.filter(ga=>ga.bikeCategory==="Regular Bicycle").length})]}),q.jsxs("div",{className:"inventory-item",children:[q.jsx("span",{children:"Electric Bikes:"}),q.jsx("span",{children:Fe.filter(ga=>ga.bikeCategory==="Electric Bicycle").length})]})]})]})}),q.jsxs("div",{className:"unassigned-bikes-section",children:[q.jsxs("div",{className:"unassigned-header",children:[q.jsx("h2",{children:"Unassigned Bikes"}),q.jsxs("div",{className:"unassigned-filters",children:[q.jsxs("select",{value:Te,onChange:ga=>ke(ga.target.value),className:"filter-dropdown",children:[q.jsx("option",{value:"all",children:"All Categories"}),q.jsx("option",{value:"Regular Bicycle",children:"Regular Bikes"}),q.jsx("option",{value:"Electric Bicycle",children:"Electric Bikes"})]}),q.jsxs("button",{className:"assign-button",disabled:ze.length===0,onClick:()=>be(!0),children:["Assign Selected Bikes (",ze.length,")"]})]})]}),q.jsx("div",{className:"unassigned-bikes-grid",children:br().map(ga=>q.jsxs("div",{className:`bike-card ${ze.includes(ga.id)?"selected":""}`,onClick:()=>cn(ga.id),children:[q.jsx("img",{src:ga.imageUrl,alt:ga.bikeName}),q.jsxs("div",{className:"bike-info",children:[q.jsx("h3",{children:ga.bikeName}),q.jsxs("p",{children:["ID: ",ga.bikeId]}),q.jsxs("p",{children:["Category: ",ga.bikeCategory]}),q.jsxs("p",{children:["Type: ",ga.bikeType]})]})]},ga.id))})]}),qe&&q.jsx("div",{className:"modal-overlay",children:q.jsxs("div",{className:"modal-content",children:[q.jsx("h2",{children:"Assign Bikes to Station"}),q.jsxs("p",{children:["Selected Bikes: ",ze.length]}),q.jsxs("select",{value:$e,onChange:ga=>Be(ga.target.value),required:!0,children:[q.jsx("option",{value:"",children:"Select Station"}),je.map(ga=>q.jsx("option",{value:ga.id,children:ga.stationName},ga.id))]}),q.jsxs("div",{className:"modal-buttons",children:[q.jsx("button",{className:"save-btn",onClick:$r,children:"Assign"}),q.jsx("button",{className:"cancel-btn",onClick:()=>be(!1),children:"Cancel"})]})]})}),Ge&&q.jsx("div",{className:"modal-overlay",children:q.jsxs("div",{className:"modal-content bulk-add-modal",children:[q.jsxs("div",{className:"modal-header",children:[q.jsx("h2",{children:"Add Bikes"}),q.jsx("button",{className:"close-modal-btn",onClick:()=>{at(!1),Cs()},children:q.jsx(DL,{})})]}),q.jsxs("form",{className:"bike-form",onSubmit:yi,children:[q.jsxs("div",{className:"bulk-form-fields",children:[q.jsx("label",{children:"Base Bike Name:"}),q.jsx("input",{type:"text",value:wa,onChange:ga=>It(ga.target.value),placeholder:"e.g., EcoRide Bike",required:!0}),q.jsx("label",{children:"Category of Bike:"}),q.jsxs("select",{value:Vt,onChange:ga=>Bt(ga.target.value),required:!0,children:[q.jsx("option",{value:"",children:"Select Category"}),q.jsx("option",{value:"Regular Bicycle",children:"Regular Bicycle"}),q.jsx("option",{value:"Electric Bicycle",children:"Electric Bicycle"})]}),q.jsx("label",{children:"Bike Type:"}),q.jsxs("select",{value:ot,onChange:ga=>ve(ga.target.value),required:!0,children:[q.jsx("option",{value:"",children:"Select Bike Type"}),q.jsx("option",{value:"Road Bike",children:"Road Bike"}),q.jsx("option",{value:"Mountain Bike",children:"Mountain Bike"}),q.jsx("option",{value:"City Bike",children:"City Bike"}),q.jsx("option",{value:"Fat Bike",children:"Fat Bike"}),q.jsx("option",{value:"BMX",children:"BMX"}),q.jsx("option",{value:"Electric Bike",children:"Electric Bike"})]}),q.jsx("label",{children:"Quantity:"}),q.jsx("input",{type:"number",min:"1",max:"100",value:rt,onChange:ga=>lt(parseInt(ga.target.value)),required:!0})]}),q.jsx("div",{className:"bulk-preview-grid",children:$t.map(ga=>q.jsxs("div",{className:"bulk-preview-item",children:[q.jsx("div",{className:"preview-image-container",children:hr[ga.bikeId]?q.jsx("img",{src:hr[ga.bikeId],alt:ga.bikeName}):q.jsx("div",{className:"upload-placeholder",children:q.jsxs("label",{className:"upload-label",children:[q.jsx(dx,{}),q.jsx("input",{type:"file",accept:"image/*",onChange:pr=>Fi(ga.bikeId,pr.target.files[0])})]})})}),q.jsxs("div",{className:"preview-info",children:[q.jsx("h4",{children:ga.bikeName}),q.jsx("p",{children:ga.bikeId}),q.jsx("p",{children:ga.bikeCategory}),q.jsx("p",{children:ga.bikeType})]})]},ga.bikeId))}),q.jsxs("div",{className:"modal-buttons",children:[q.jsxs("button",{type:"submit",className:"save-btn",children:["Create ",rt," Bikes"]}),q.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>{at(!1),Cs()},children:"Cancel"})]})]})]})})]})]})};function Mte(t,e){return function(){return t.apply(e,arguments)}}const{toString:YOe}=Object.prototype,{getPrototypeOf:$4}=Object,eE=(t=>e=>{const a=YOe.call(e);return t[a]||(t[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),em=t=>(t=t.toLowerCase(),e=>eE(e)===t),tE=t=>e=>typeof e===t,{isArray:b1}=Array,MT=tE("undefined");function XOe(t){return t!==null&&!MT(t)&&t.constructor!==null&&!MT(t.constructor)&&_f(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Ite=em("ArrayBuffer");function JOe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Ite(t.buffer),e}const QOe=tE("string"),_f=tE("function"),Lte=tE("number"),aE=t=>t!==null&&typeof t=="object",eVe=t=>t===!0||t===!1,Vb=t=>{if(eE(t)!=="object")return!1;const e=$4(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},tVe=em("Date"),aVe=em("File"),rVe=em("Blob"),nVe=em("FileList"),iVe=t=>aE(t)&&_f(t.pipe),sVe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||_f(t.append)&&((e=eE(t))==="formdata"||e==="object"&&_f(t.toString)&&t.toString()==="[object FormData]"))},oVe=em("URLSearchParams"),[lVe,uVe,cVe,dVe]=["ReadableStream","Request","Response","Headers"].map(em),hVe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function _C(t,e,{allOwnKeys:a=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),b1(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const l=a?Object.getOwnPropertyNames(t):Object.keys(t),c=l.length;let n;for(r=0;r<c;r++)n=l[r],e.call(null,t[n],n,t)}}function Fte(t,e){e=e.toLowerCase();const a=Object.keys(t);let r=a.length,i;for(;r-- >0;)if(i=a[r],e===i.toLowerCase())return i;return null}const Av=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,kte=t=>!MT(t)&&t!==Av;function r3(){const{caseless:t}=kte(this)&&this||{},e={},a=(r,i)=>{const l=t&&Fte(e,i)||i;Vb(e[l])&&Vb(r)?e[l]=r3(e[l],r):Vb(r)?e[l]=r3({},r):b1(r)?e[l]=r.slice():e[l]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&_C(arguments[r],a);return e}const fVe=(t,e,a,{allOwnKeys:r}={})=>(_C(e,(i,l)=>{a&&_f(i)?t[l]=Mte(i,a):t[l]=i},{allOwnKeys:r}),t),pVe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),mVe=(t,e,a,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),a&&Object.assign(t.prototype,a)},gVe=(t,e,a,r)=>{let i,l,c;const n={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),l=i.length;l-- >0;)c=i[l],(!r||r(c,t,e))&&!n[c]&&(e[c]=t[c],n[c]=!0);t=a!==!1&&$4(t)}while(t&&(!a||a(t,e))&&t!==Object.prototype);return e},yVe=(t,e,a)=>{t=String(t),(a===void 0||a>t.length)&&(a=t.length),a-=e.length;const r=t.indexOf(e,a);return r!==-1&&r===a},AVe=t=>{if(!t)return null;if(b1(t))return t;let e=t.length;if(!Lte(e))return null;const a=new Array(e);for(;e-- >0;)a[e]=t[e];return a},vVe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&$4(Uint8Array)),_Ve=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const l=i.value;e.call(t,l[0],l[1])}},wVe=(t,e)=>{let a;const r=[];for(;(a=t.exec(e))!==null;)r.push(a);return r},RVe=em("HTMLFormElement"),TVe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,r,i){return r.toUpperCase()+i}),oH=(({hasOwnProperty:t})=>(e,a)=>t.call(e,a))(Object.prototype),CVe=em("RegExp"),Ute=(t,e)=>{const a=Object.getOwnPropertyDescriptors(t),r={};_C(a,(i,l)=>{let c;(c=e(i,l,t))!==!1&&(r[l]=c||i)}),Object.defineProperties(t,r)},SVe=t=>{Ute(t,(e,a)=>{if(_f(t)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const r=t[a];if(_f(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},bVe=(t,e)=>{const a={},r=i=>{i.forEach(l=>{a[l]=!0})};return b1(t)?r(t):r(String(t).split(e)),a},xVe=()=>{},PVe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function EVe(t){return!!(t&&_f(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const NVe=t=>{const e=new Array(10),a=(r,i)=>{if(aE(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const l=b1(r)?[]:{};return _C(r,(c,n)=>{const v=a(c,i+1);!MT(v)&&(l[n]=v)}),e[i]=void 0,l}}return r};return a(t,0)},OVe=em("AsyncFunction"),VVe=t=>t&&(aE(t)||_f(t))&&_f(t.then)&&_f(t.catch),Bte=((t,e)=>t?setImmediate:e?((a,r)=>(Av.addEventListener("message",({source:i,data:l})=>{i===Av&&l===a&&r.length&&r.shift()()},!1),i=>{r.push(i),Av.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",_f(Av.postMessage)),zVe=typeof queueMicrotask<"u"?queueMicrotask.bind(Av):typeof process<"u"&&process.nextTick||Bte,Ua={isArray:b1,isArrayBuffer:Ite,isBuffer:XOe,isFormData:sVe,isArrayBufferView:JOe,isString:QOe,isNumber:Lte,isBoolean:eVe,isObject:aE,isPlainObject:Vb,isReadableStream:lVe,isRequest:uVe,isResponse:cVe,isHeaders:dVe,isUndefined:MT,isDate:tVe,isFile:aVe,isBlob:rVe,isRegExp:CVe,isFunction:_f,isStream:iVe,isURLSearchParams:oVe,isTypedArray:vVe,isFileList:nVe,forEach:_C,merge:r3,extend:fVe,trim:hVe,stripBOM:pVe,inherits:mVe,toFlatObject:gVe,kindOf:eE,kindOfTest:em,endsWith:yVe,toArray:AVe,forEachEntry:_Ve,matchAll:wVe,isHTMLForm:RVe,hasOwnProperty:oH,hasOwnProp:oH,reduceDescriptors:Ute,freezeMethods:SVe,toObjectSet:bVe,toCamelCase:TVe,noop:xVe,toFiniteNumber:PVe,findKey:Fte,global:Av,isContextDefined:kte,isSpecCompliantForm:EVe,toJSONObject:NVe,isAsyncFn:OVe,isThenable:VVe,setImmediate:Bte,asap:zVe};function vi(t,e,a,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),a&&(this.config=a),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Ua.inherits(vi,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ua.toJSONObject(this.config),code:this.code,status:this.status}}});const jte=vi.prototype,Gte={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Gte[t]={value:t}});Object.defineProperties(vi,Gte);Object.defineProperty(jte,"isAxiosError",{value:!0});vi.from=(t,e,a,r,i,l)=>{const c=Object.create(jte);return Ua.toFlatObject(t,c,function(v){return v!==Error.prototype},n=>n!=="isAxiosError"),vi.call(c,t.message,e,a,r,i),c.cause=t,c.name=t.name,l&&Object.assign(c,l),c};const DVe=null;function n3(t){return Ua.isPlainObject(t)||Ua.isArray(t)}function Zte(t){return Ua.endsWith(t,"[]")?t.slice(0,-2):t}function lH(t,e,a){return t?t.concat(e).map(function(i,l){return i=Zte(i),!a&&l?"["+i+"]":i}).join(a?".":""):e}function MVe(t){return Ua.isArray(t)&&!t.some(n3)}const IVe=Ua.toFlatObject(Ua,{},null,function(e){return/^is[A-Z]/.test(e)});function rE(t,e,a){if(!Ua.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,a=Ua.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function($,H){return!Ua.isUndefined(H[$])});const r=a.metaTokens,i=a.visitor||x,l=a.dots,c=a.indexes,v=(a.Blob||typeof Blob<"u"&&Blob)&&Ua.isSpecCompliantForm(e);if(!Ua.isFunction(i))throw new TypeError("visitor must be a function");function R(j){if(j===null)return"";if(Ua.isDate(j))return j.toISOString();if(!v&&Ua.isBlob(j))throw new vi("Blob is not supported. Use a Buffer instead.");return Ua.isArrayBuffer(j)||Ua.isTypedArray(j)?v&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function x(j,$,H){let W=j;if(j&&!H&&typeof j=="object"){if(Ua.endsWith($,"{}"))$=r?$:$.slice(0,-2),j=JSON.stringify(j);else if(Ua.isArray(j)&&MVe(j)||(Ua.isFileList(j)||Ua.endsWith($,"[]"))&&(W=Ua.toArray(j)))return $=Zte($),W.forEach(function(se,fe){!(Ua.isUndefined(se)||se===null)&&e.append(c===!0?lH([$],fe,l):c===null?$:$+"[]",R(se))}),!1}return n3(j)?!0:(e.append(lH(H,$,l),R(j)),!1)}const N=[],L=Object.assign(IVe,{defaultVisitor:x,convertValue:R,isVisitable:n3});function F(j,$){if(!Ua.isUndefined(j)){if(N.indexOf(j)!==-1)throw Error("Circular reference detected in "+$.join("."));N.push(j),Ua.forEach(j,function(W,ee){(!(Ua.isUndefined(W)||W===null)&&i.call(e,W,Ua.isString(ee)?ee.trim():ee,$,L))===!0&&F(W,$?$.concat(ee):[ee])}),N.pop()}}if(!Ua.isObject(t))throw new TypeError("data must be an object");return F(t),e}function uH(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function K4(t,e){this._pairs=[],t&&rE(t,this,e)}const qte=K4.prototype;qte.append=function(e,a){this._pairs.push([e,a])};qte.toString=function(e){const a=e?function(r){return e.call(this,r,uH)}:uH;return this._pairs.map(function(i){return a(i[0])+"="+a(i[1])},"").join("&")};function LVe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Hte(t,e,a){if(!e)return t;const r=a&&a.encode||LVe;Ua.isFunction(a)&&(a={serialize:a});const i=a&&a.serialize;let l;if(i?l=i(e,a):l=Ua.isURLSearchParams(e)?e.toString():new K4(e,a).toString(r),l){const c=t.indexOf("#");c!==-1&&(t=t.slice(0,c)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class cH{constructor(){this.handlers=[]}use(e,a,r){return this.handlers.push({fulfilled:e,rejected:a,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ua.forEach(this.handlers,function(r){r!==null&&e(r)})}}const $te={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},FVe=typeof URLSearchParams<"u"?URLSearchParams:K4,kVe=typeof FormData<"u"?FormData:null,UVe=typeof Blob<"u"?Blob:null,BVe={isBrowser:!0,classes:{URLSearchParams:FVe,FormData:kVe,Blob:UVe},protocols:["http","https","file","blob","url","data"]},W4=typeof window<"u"&&typeof document<"u",i3=typeof navigator=="object"&&navigator||void 0,jVe=W4&&(!i3||["ReactNative","NativeScript","NS"].indexOf(i3.product)<0),GVe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ZVe=W4&&window.location.href||"http://localhost",qVe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:W4,hasStandardBrowserEnv:jVe,hasStandardBrowserWebWorkerEnv:GVe,navigator:i3,origin:ZVe},Symbol.toStringTag,{value:"Module"})),wd={...qVe,...BVe};function HVe(t,e){return rE(t,new wd.classes.URLSearchParams,Object.assign({visitor:function(a,r,i,l){return wd.isNode&&Ua.isBuffer(a)?(this.append(r,a.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},e))}function $Ve(t){return Ua.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function KVe(t){const e={},a=Object.keys(t);let r;const i=a.length;let l;for(r=0;r<i;r++)l=a[r],e[l]=t[l];return e}function Kte(t){function e(a,r,i,l){let c=a[l++];if(c==="__proto__")return!0;const n=Number.isFinite(+c),v=l>=a.length;return c=!c&&Ua.isArray(i)?i.length:c,v?(Ua.hasOwnProp(i,c)?i[c]=[i[c],r]:i[c]=r,!n):((!i[c]||!Ua.isObject(i[c]))&&(i[c]=[]),e(a,r,i[c],l)&&Ua.isArray(i[c])&&(i[c]=KVe(i[c])),!n)}if(Ua.isFormData(t)&&Ua.isFunction(t.entries)){const a={};return Ua.forEachEntry(t,(r,i)=>{e($Ve(r),i,a,0)}),a}return null}function WVe(t,e,a){if(Ua.isString(t))try{return(e||JSON.parse)(t),Ua.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(a||JSON.stringify)(t)}const wC={transitional:$te,adapter:["xhr","http","fetch"],transformRequest:[function(e,a){const r=a.getContentType()||"",i=r.indexOf("application/json")>-1,l=Ua.isObject(e);if(l&&Ua.isHTMLForm(e)&&(e=new FormData(e)),Ua.isFormData(e))return i?JSON.stringify(Kte(e)):e;if(Ua.isArrayBuffer(e)||Ua.isBuffer(e)||Ua.isStream(e)||Ua.isFile(e)||Ua.isBlob(e)||Ua.isReadableStream(e))return e;if(Ua.isArrayBufferView(e))return e.buffer;if(Ua.isURLSearchParams(e))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let n;if(l){if(r.indexOf("application/x-www-form-urlencoded")>-1)return HVe(e,this.formSerializer).toString();if((n=Ua.isFileList(e))||r.indexOf("multipart/form-data")>-1){const v=this.env&&this.env.FormData;return rE(n?{"files[]":e}:e,v&&new v,this.formSerializer)}}return l||i?(a.setContentType("application/json",!1),WVe(e)):e}],transformResponse:[function(e){const a=this.transitional||wC.transitional,r=a&&a.forcedJSONParsing,i=this.responseType==="json";if(Ua.isResponse(e)||Ua.isReadableStream(e))return e;if(e&&Ua.isString(e)&&(r&&!this.responseType||i)){const c=!(a&&a.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(n){if(c)throw n.name==="SyntaxError"?vi.from(n,vi.ERR_BAD_RESPONSE,this,null,this.response):n}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:wd.classes.FormData,Blob:wd.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ua.forEach(["delete","get","head","post","put","patch"],t=>{wC.headers[t]={}});const YVe=Ua.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),XVe=t=>{const e={};let a,r,i;return t&&t.split(`
`).forEach(function(c){i=c.indexOf(":"),a=c.substring(0,i).trim().toLowerCase(),r=c.substring(i+1).trim(),!(!a||e[a]&&YVe[a])&&(a==="set-cookie"?e[a]?e[a].push(r):e[a]=[r]:e[a]=e[a]?e[a]+", "+r:r)}),e},dH=Symbol("internals");function Qw(t){return t&&String(t).trim().toLowerCase()}function zb(t){return t===!1||t==null?t:Ua.isArray(t)?t.map(zb):String(t)}function JVe(t){const e=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=a.exec(t);)e[r[1]]=r[2];return e}const QVe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function TD(t,e,a,r,i){if(Ua.isFunction(r))return r.call(this,e,a);if(i&&(e=a),!!Ua.isString(e)){if(Ua.isString(r))return e.indexOf(r)!==-1;if(Ua.isRegExp(r))return r.test(e)}}function eze(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,a,r)=>a.toUpperCase()+r)}function tze(t,e){const a=Ua.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+a,{value:function(i,l,c){return this[r].call(this,e,i,l,c)},configurable:!0})})}let Fh=class{constructor(e){e&&this.set(e)}set(e,a,r){const i=this;function l(n,v,R){const x=Qw(v);if(!x)throw new Error("header name must be a non-empty string");const N=Ua.findKey(i,x);(!N||i[N]===void 0||R===!0||R===void 0&&i[N]!==!1)&&(i[N||v]=zb(n))}const c=(n,v)=>Ua.forEach(n,(R,x)=>l(R,x,v));if(Ua.isPlainObject(e)||e instanceof this.constructor)c(e,a);else if(Ua.isString(e)&&(e=e.trim())&&!QVe(e))c(XVe(e),a);else if(Ua.isHeaders(e))for(const[n,v]of e.entries())l(v,n,r);else e!=null&&l(a,e,r);return this}get(e,a){if(e=Qw(e),e){const r=Ua.findKey(this,e);if(r){const i=this[r];if(!a)return i;if(a===!0)return JVe(i);if(Ua.isFunction(a))return a.call(this,i,r);if(Ua.isRegExp(a))return a.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,a){if(e=Qw(e),e){const r=Ua.findKey(this,e);return!!(r&&this[r]!==void 0&&(!a||TD(this,this[r],r,a)))}return!1}delete(e,a){const r=this;let i=!1;function l(c){if(c=Qw(c),c){const n=Ua.findKey(r,c);n&&(!a||TD(r,r[n],n,a))&&(delete r[n],i=!0)}}return Ua.isArray(e)?e.forEach(l):l(e),i}clear(e){const a=Object.keys(this);let r=a.length,i=!1;for(;r--;){const l=a[r];(!e||TD(this,this[l],l,e,!0))&&(delete this[l],i=!0)}return i}normalize(e){const a=this,r={};return Ua.forEach(this,(i,l)=>{const c=Ua.findKey(r,l);if(c){a[c]=zb(i),delete a[l];return}const n=e?eze(l):String(l).trim();n!==l&&delete a[l],a[n]=zb(i),r[n]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const a=Object.create(null);return Ua.forEach(this,(r,i)=>{r!=null&&r!==!1&&(a[i]=e&&Ua.isArray(r)?r.join(", "):r)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,a])=>e+": "+a).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...a){const r=new this(e);return a.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[dH]=this[dH]={accessors:{}}).accessors,i=this.prototype;function l(c){const n=Qw(c);r[n]||(tze(i,c),r[n]=!0)}return Ua.isArray(e)?e.forEach(l):l(e),this}};Fh.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ua.reduceDescriptors(Fh.prototype,({value:t},e)=>{let a=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[a]=r}}});Ua.freezeMethods(Fh);function CD(t,e){const a=this||wC,r=e||a,i=Fh.from(r.headers);let l=r.data;return Ua.forEach(t,function(n){l=n.call(a,l,i.normalize(),e?e.status:void 0)}),i.normalize(),l}function Wte(t){return!!(t&&t.__CANCEL__)}function x1(t,e,a){vi.call(this,t??"canceled",vi.ERR_CANCELED,e,a),this.name="CanceledError"}Ua.inherits(x1,vi,{__CANCEL__:!0});function Yte(t,e,a){const r=a.config.validateStatus;!a.status||!r||r(a.status)?t(a):e(new vi("Request failed with status code "+a.status,[vi.ERR_BAD_REQUEST,vi.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function aze(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function rze(t,e){t=t||10;const a=new Array(t),r=new Array(t);let i=0,l=0,c;return e=e!==void 0?e:1e3,function(v){const R=Date.now(),x=r[l];c||(c=R),a[i]=v,r[i]=R;let N=l,L=0;for(;N!==i;)L+=a[N++],N=N%t;if(i=(i+1)%t,i===l&&(l=(l+1)%t),R-c<e)return;const F=x&&R-x;return F?Math.round(L*1e3/F):void 0}}function nze(t,e){let a=0,r=1e3/e,i,l;const c=(R,x=Date.now())=>{a=x,i=null,l&&(clearTimeout(l),l=null),t.apply(null,R)};return[(...R)=>{const x=Date.now(),N=x-a;N>=r?c(R,x):(i=R,l||(l=setTimeout(()=>{l=null,c(i)},r-N)))},()=>i&&c(i)]}const m2=(t,e,a=3)=>{let r=0;const i=rze(50,250);return nze(l=>{const c=l.loaded,n=l.lengthComputable?l.total:void 0,v=c-r,R=i(v),x=c<=n;r=c;const N={loaded:c,total:n,progress:n?c/n:void 0,bytes:v,rate:R||void 0,estimated:R&&n&&x?(n-c)/R:void 0,event:l,lengthComputable:n!=null,[e?"download":"upload"]:!0};t(N)},a)},hH=(t,e)=>{const a=t!=null;return[r=>e[0]({lengthComputable:a,total:t,loaded:r}),e[1]]},fH=t=>(...e)=>Ua.asap(()=>t(...e)),ize=wd.hasStandardBrowserEnv?((t,e)=>a=>(a=new URL(a,wd.origin),t.protocol===a.protocol&&t.host===a.host&&(e||t.port===a.port)))(new URL(wd.origin),wd.navigator&&/(msie|trident)/i.test(wd.navigator.userAgent)):()=>!0,sze=wd.hasStandardBrowserEnv?{write(t,e,a,r,i,l){const c=[t+"="+encodeURIComponent(e)];Ua.isNumber(a)&&c.push("expires="+new Date(a).toGMTString()),Ua.isString(r)&&c.push("path="+r),Ua.isString(i)&&c.push("domain="+i),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function oze(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function lze(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Xte(t,e,a){let r=!oze(e);return t&&(r||a==!1)?lze(t,e):e}const pH=t=>t instanceof Fh?{...t}:t;function Uv(t,e){e=e||{};const a={};function r(R,x,N,L){return Ua.isPlainObject(R)&&Ua.isPlainObject(x)?Ua.merge.call({caseless:L},R,x):Ua.isPlainObject(x)?Ua.merge({},x):Ua.isArray(x)?x.slice():x}function i(R,x,N,L){if(Ua.isUndefined(x)){if(!Ua.isUndefined(R))return r(void 0,R,N,L)}else return r(R,x,N,L)}function l(R,x){if(!Ua.isUndefined(x))return r(void 0,x)}function c(R,x){if(Ua.isUndefined(x)){if(!Ua.isUndefined(R))return r(void 0,R)}else return r(void 0,x)}function n(R,x,N){if(N in e)return r(R,x);if(N in t)return r(void 0,R)}const v={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:n,headers:(R,x,N)=>i(pH(R),pH(x),N,!0)};return Ua.forEach(Object.keys(Object.assign({},t,e)),function(x){const N=v[x]||i,L=N(t[x],e[x],x);Ua.isUndefined(L)&&N!==n||(a[x]=L)}),a}const Jte=t=>{const e=Uv({},t);let{data:a,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:l,headers:c,auth:n}=e;e.headers=c=Fh.from(c),e.url=Hte(Xte(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),n&&c.set("Authorization","Basic "+btoa((n.username||"")+":"+(n.password?unescape(encodeURIComponent(n.password)):"")));let v;if(Ua.isFormData(a)){if(wd.hasStandardBrowserEnv||wd.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((v=c.getContentType())!==!1){const[R,...x]=v?v.split(";").map(N=>N.trim()).filter(Boolean):[];c.setContentType([R||"multipart/form-data",...x].join("; "))}}if(wd.hasStandardBrowserEnv&&(r&&Ua.isFunction(r)&&(r=r(e)),r||r!==!1&&ize(e.url))){const R=i&&l&&sze.read(l);R&&c.set(i,R)}return e},uze=typeof XMLHttpRequest<"u",cze=uze&&function(t){return new Promise(function(a,r){const i=Jte(t);let l=i.data;const c=Fh.from(i.headers).normalize();let{responseType:n,onUploadProgress:v,onDownloadProgress:R}=i,x,N,L,F,j;function $(){F&&F(),j&&j(),i.cancelToken&&i.cancelToken.unsubscribe(x),i.signal&&i.signal.removeEventListener("abort",x)}let H=new XMLHttpRequest;H.open(i.method.toUpperCase(),i.url,!0),H.timeout=i.timeout;function W(){if(!H)return;const se=Fh.from("getAllResponseHeaders"in H&&H.getAllResponseHeaders()),le={data:!n||n==="text"||n==="json"?H.responseText:H.response,status:H.status,statusText:H.statusText,headers:se,config:t,request:H};Yte(function(ge){a(ge),$()},function(ge){r(ge),$()},le),H=null}"onloadend"in H?H.onloadend=W:H.onreadystatechange=function(){!H||H.readyState!==4||H.status===0&&!(H.responseURL&&H.responseURL.indexOf("file:")===0)||setTimeout(W)},H.onabort=function(){H&&(r(new vi("Request aborted",vi.ECONNABORTED,t,H)),H=null)},H.onerror=function(){r(new vi("Network Error",vi.ERR_NETWORK,t,H)),H=null},H.ontimeout=function(){let fe=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const le=i.transitional||$te;i.timeoutErrorMessage&&(fe=i.timeoutErrorMessage),r(new vi(fe,le.clarifyTimeoutError?vi.ETIMEDOUT:vi.ECONNABORTED,t,H)),H=null},l===void 0&&c.setContentType(null),"setRequestHeader"in H&&Ua.forEach(c.toJSON(),function(fe,le){H.setRequestHeader(le,fe)}),Ua.isUndefined(i.withCredentials)||(H.withCredentials=!!i.withCredentials),n&&n!=="json"&&(H.responseType=i.responseType),R&&([L,j]=m2(R,!0),H.addEventListener("progress",L)),v&&H.upload&&([N,F]=m2(v),H.upload.addEventListener("progress",N),H.upload.addEventListener("loadend",F)),(i.cancelToken||i.signal)&&(x=se=>{H&&(r(!se||se.type?new x1(null,t,H):se),H.abort(),H=null)},i.cancelToken&&i.cancelToken.subscribe(x),i.signal&&(i.signal.aborted?x():i.signal.addEventListener("abort",x)));const ee=aze(i.url);if(ee&&wd.protocols.indexOf(ee)===-1){r(new vi("Unsupported protocol "+ee+":",vi.ERR_BAD_REQUEST,t));return}H.send(l||null)})},dze=(t,e)=>{const{length:a}=t=t?t.filter(Boolean):[];if(e||a){let r=new AbortController,i;const l=function(R){if(!i){i=!0,n();const x=R instanceof Error?R:this.reason;r.abort(x instanceof vi?x:new x1(x instanceof Error?x.message:x))}};let c=e&&setTimeout(()=>{c=null,l(new vi(`timeout ${e} of ms exceeded`,vi.ETIMEDOUT))},e);const n=()=>{t&&(c&&clearTimeout(c),c=null,t.forEach(R=>{R.unsubscribe?R.unsubscribe(l):R.removeEventListener("abort",l)}),t=null)};t.forEach(R=>R.addEventListener("abort",l));const{signal:v}=r;return v.unsubscribe=()=>Ua.asap(n),v}},hze=function*(t,e){let a=t.byteLength;if(a<e){yield t;return}let r=0,i;for(;r<a;)i=r+e,yield t.slice(r,i),r=i},fze=async function*(t,e){for await(const a of pze(t))yield*hze(a,e)},pze=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:a,value:r}=await e.read();if(a)break;yield r}}finally{await e.cancel()}},mH=(t,e,a,r)=>{const i=fze(t,e);let l=0,c,n=v=>{c||(c=!0,r&&r(v))};return new ReadableStream({async pull(v){try{const{done:R,value:x}=await i.next();if(R){n(),v.close();return}let N=x.byteLength;if(a){let L=l+=N;a(L)}v.enqueue(new Uint8Array(x))}catch(R){throw n(R),R}},cancel(v){return n(v),i.return()}},{highWaterMark:2})},nE=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Qte=nE&&typeof ReadableStream=="function",mze=nE&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),eae=(t,...e)=>{try{return!!t(...e)}catch{return!1}},gze=Qte&&eae(()=>{let t=!1;const e=new Request(wd.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),gH=64*1024,s3=Qte&&eae(()=>Ua.isReadableStream(new Response("").body)),g2={stream:s3&&(t=>t.body)};nE&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!g2[e]&&(g2[e]=Ua.isFunction(t[e])?a=>a[e]():(a,r)=>{throw new vi(`Response type '${e}' is not supported`,vi.ERR_NOT_SUPPORT,r)})})})(new Response);const yze=async t=>{if(t==null)return 0;if(Ua.isBlob(t))return t.size;if(Ua.isSpecCompliantForm(t))return(await new Request(wd.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Ua.isArrayBufferView(t)||Ua.isArrayBuffer(t))return t.byteLength;if(Ua.isURLSearchParams(t)&&(t=t+""),Ua.isString(t))return(await mze(t)).byteLength},Aze=async(t,e)=>{const a=Ua.toFiniteNumber(t.getContentLength());return a??yze(e)},vze=nE&&(async t=>{let{url:e,method:a,data:r,signal:i,cancelToken:l,timeout:c,onDownloadProgress:n,onUploadProgress:v,responseType:R,headers:x,withCredentials:N="same-origin",fetchOptions:L}=Jte(t);R=R?(R+"").toLowerCase():"text";let F=dze([i,l&&l.toAbortSignal()],c),j;const $=F&&F.unsubscribe&&(()=>{F.unsubscribe()});let H;try{if(v&&gze&&a!=="get"&&a!=="head"&&(H=await Aze(x,r))!==0){let le=new Request(e,{method:"POST",body:r,duplex:"half"}),me;if(Ua.isFormData(r)&&(me=le.headers.get("content-type"))&&x.setContentType(me),le.body){const[ge,Re]=hH(H,m2(fH(v)));r=mH(le.body,gH,ge,Re)}}Ua.isString(N)||(N=N?"include":"omit");const W="credentials"in Request.prototype;j=new Request(e,{...L,signal:F,method:a.toUpperCase(),headers:x.normalize().toJSON(),body:r,duplex:"half",credentials:W?N:void 0});let ee=await fetch(j);const se=s3&&(R==="stream"||R==="response");if(s3&&(n||se&&$)){const le={};["status","statusText","headers"].forEach(we=>{le[we]=ee[we]});const me=Ua.toFiniteNumber(ee.headers.get("content-length")),[ge,Re]=n&&hH(me,m2(fH(n),!0))||[];ee=new Response(mH(ee.body,gH,ge,()=>{Re&&Re(),$&&$()}),le)}R=R||"text";let fe=await g2[Ua.findKey(g2,R)||"text"](ee,t);return!se&&$&&$(),await new Promise((le,me)=>{Yte(le,me,{data:fe,headers:Fh.from(ee.headers),status:ee.status,statusText:ee.statusText,config:t,request:j})})}catch(W){throw $&&$(),W&&W.name==="TypeError"&&/fetch/i.test(W.message)?Object.assign(new vi("Network Error",vi.ERR_NETWORK,t,j),{cause:W.cause||W}):vi.from(W,W&&W.code,t,j)}}),o3={http:DVe,xhr:cze,fetch:vze};Ua.forEach(o3,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const yH=t=>`- ${t}`,_ze=t=>Ua.isFunction(t)||t===null||t===!1,tae={getAdapter:t=>{t=Ua.isArray(t)?t:[t];const{length:e}=t;let a,r;const i={};for(let l=0;l<e;l++){a=t[l];let c;if(r=a,!_ze(a)&&(r=o3[(c=String(a)).toLowerCase()],r===void 0))throw new vi(`Unknown adapter '${c}'`);if(r)break;i[c||"#"+l]=r}if(!r){const l=Object.entries(i).map(([n,v])=>`adapter ${n} `+(v===!1?"is not supported by the environment":"is not available in the build"));let c=e?l.length>1?`since :
`+l.map(yH).join(`
`):" "+yH(l[0]):"as no adapter specified";throw new vi("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return r},adapters:o3};function SD(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new x1(null,t)}function AH(t){return SD(t),t.headers=Fh.from(t.headers),t.data=CD.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),tae.getAdapter(t.adapter||wC.adapter)(t).then(function(r){return SD(t),r.data=CD.call(t,t.transformResponse,r),r.headers=Fh.from(r.headers),r},function(r){return Wte(r)||(SD(t),r&&r.response&&(r.response.data=CD.call(t,t.transformResponse,r.response),r.response.headers=Fh.from(r.response.headers))),Promise.reject(r)})}const aae="1.8.4",iE={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{iE[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const vH={};iE.transitional=function(e,a,r){function i(l,c){return"[Axios v"+aae+"] Transitional option '"+l+"'"+c+(r?". "+r:"")}return(l,c,n)=>{if(e===!1)throw new vi(i(c," has been removed"+(a?" in "+a:"")),vi.ERR_DEPRECATED);return a&&!vH[c]&&(vH[c]=!0,console.warn(i(c," has been deprecated since v"+a+" and will be removed in the near future"))),e?e(l,c,n):!0}};iE.spelling=function(e){return(a,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function wze(t,e,a){if(typeof t!="object")throw new vi("options must be an object",vi.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const l=r[i],c=e[l];if(c){const n=t[l],v=n===void 0||c(n,l,t);if(v!==!0)throw new vi("option "+l+" must be "+v,vi.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new vi("Unknown option "+l,vi.ERR_BAD_OPTION)}}const Db={assertOptions:wze,validators:iE},Pm=Db.validators;let Sv=class{constructor(e){this.defaults=e,this.interceptors={request:new cH,response:new cH}}async request(e,a){try{return await this._request(e,a)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const l=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?l&&!String(r.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+l):r.stack=l}catch{}}throw r}}_request(e,a){typeof e=="string"?(a=a||{},a.url=e):a=e||{},a=Uv(this.defaults,a);const{transitional:r,paramsSerializer:i,headers:l}=a;r!==void 0&&Db.assertOptions(r,{silentJSONParsing:Pm.transitional(Pm.boolean),forcedJSONParsing:Pm.transitional(Pm.boolean),clarifyTimeoutError:Pm.transitional(Pm.boolean)},!1),i!=null&&(Ua.isFunction(i)?a.paramsSerializer={serialize:i}:Db.assertOptions(i,{encode:Pm.function,serialize:Pm.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),Db.assertOptions(a,{baseUrl:Pm.spelling("baseURL"),withXsrfToken:Pm.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let c=l&&Ua.merge(l.common,l[a.method]);l&&Ua.forEach(["delete","get","head","post","put","patch","common"],j=>{delete l[j]}),a.headers=Fh.concat(c,l);const n=[];let v=!0;this.interceptors.request.forEach(function($){typeof $.runWhen=="function"&&$.runWhen(a)===!1||(v=v&&$.synchronous,n.unshift($.fulfilled,$.rejected))});const R=[];this.interceptors.response.forEach(function($){R.push($.fulfilled,$.rejected)});let x,N=0,L;if(!v){const j=[AH.bind(this),void 0];for(j.unshift.apply(j,n),j.push.apply(j,R),L=j.length,x=Promise.resolve(a);N<L;)x=x.then(j[N++],j[N++]);return x}L=n.length;let F=a;for(N=0;N<L;){const j=n[N++],$=n[N++];try{F=j(F)}catch(H){$.call(this,H);break}}try{x=AH.call(this,F)}catch(j){return Promise.reject(j)}for(N=0,L=R.length;N<L;)x=x.then(R[N++],R[N++]);return x}getUri(e){e=Uv(this.defaults,e);const a=Xte(e.baseURL,e.url,e.allowAbsoluteUrls);return Hte(a,e.params,e.paramsSerializer)}};Ua.forEach(["delete","get","head","options"],function(e){Sv.prototype[e]=function(a,r){return this.request(Uv(r||{},{method:e,url:a,data:(r||{}).data}))}});Ua.forEach(["post","put","patch"],function(e){function a(r){return function(l,c,n){return this.request(Uv(n||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}Sv.prototype[e]=a(),Sv.prototype[e+"Form"]=a(!0)});let Rze=class rae{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(l){a=l});const r=this;this.promise.then(i=>{if(!r._listeners)return;let l=r._listeners.length;for(;l-- >0;)r._listeners[l](i);r._listeners=null}),this.promise.then=i=>{let l;const c=new Promise(n=>{r.subscribe(n),l=n}).then(i);return c.cancel=function(){r.unsubscribe(l)},c},e(function(l,c,n){r.reason||(r.reason=new x1(l,c,n),a(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const a=this._listeners.indexOf(e);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const e=new AbortController,a=r=>{e.abort(r)};return this.subscribe(a),e.signal.unsubscribe=()=>this.unsubscribe(a),e.signal}static source(){let e;return{token:new rae(function(i){e=i}),cancel:e}}};function Tze(t){return function(a){return t.apply(null,a)}}function Cze(t){return Ua.isObject(t)&&t.isAxiosError===!0}const l3={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(l3).forEach(([t,e])=>{l3[e]=t});function nae(t){const e=new Sv(t),a=Mte(Sv.prototype.request,e);return Ua.extend(a,Sv.prototype,e,{allOwnKeys:!0}),Ua.extend(a,e,null,{allOwnKeys:!0}),a.create=function(i){return nae(Uv(t,i))},a}const Yl=nae(wC);Yl.Axios=Sv;Yl.CanceledError=x1;Yl.CancelToken=Rze;Yl.isCancel=Wte;Yl.VERSION=aae;Yl.toFormData=rE;Yl.AxiosError=vi;Yl.Cancel=Yl.CanceledError;Yl.all=function(e){return Promise.all(e)};Yl.spread=Tze;Yl.isAxiosError=Cze;Yl.mergeConfig=Uv;Yl.AxiosHeaders=Fh;Yl.formToJSON=t=>Kte(Ua.isHTMLForm(t)?new FormData(t):t);Yl.getAdapter=tae.getAdapter;Yl.HttpStatusCode=l3;Yl.default=Yl;const{Axios:rMe,AxiosError:nMe,CanceledError:iMe,isCancel:sMe,CancelToken:oMe,VERSION:lMe,all:uMe,Cancel:cMe,isAxiosError:dMe,spread:hMe,toFormData:fMe,AxiosHeaders:pMe,HttpStatusCode:mMe,formToJSON:gMe,getAdapter:yMe,mergeConfig:AMe}=Yl,Sze="/ecpcaps/assets/bike_icon-CFICwI6a.png";ep.accessToken="pk.eyJ1IjoiY29jb2xlbW9uMTIiLCJhIjoiY204YTBoMnZpMHplbzJzcTR3dDFmOXc4NiJ9.NqqEHSBe8cn9Gy9knbUqew";const bze=({onEditStation:t})=>{const[e,a]=ie.useState(null),[r,i]=ie.useState([]),[l,c]=ie.useState(null),[n,v]=ie.useState(!1),[R,x]=ie.useState([]),[N,L]=ie.useState(!0),[F,j]=ie.useState([]),[$,H]=ie.useState(""),[W,ee]=ie.useState("all"),[se,fe]=ie.useState([]);ie.useEffect(()=>{if(!e){const ge=new ep.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[120.9882053036898,14.693467677226026],zoom:12});ge.on("load",()=>{a(ge)})}},[e]),ie.useEffect(()=>e?(r.forEach(Re=>Re.remove()),(async()=>{try{const Re=await Hi(Dn(wr,"stations")),we=await Hi(Dn(wr,"admins")),Ve={};we.docs.forEach(_e=>{const Fe=_e.data();Ve[_e.id]={name:Fe.name,profilePhoto:Fe.profilePhoto}});const oe=[];if(Re.docs.forEach(_e=>{const Fe=_e.data(),Ee=Fe.tanodAssigned||[],ze=Array.isArray(Ee)?Ee:[Ee],Se={id:_e.id,...Fe,tanodAssigned:ze,tanodAssignedName:ze.map(je=>{var Ue;return((Ue=Ve[je])==null?void 0:Ue.name)||"Unknown"}).join(", "),tanodAssignedAvatar:ze.map(je=>{var Ue;return(Ue=Ve[je])==null?void 0:Ue.profilePhoto}).filter(je=>je)};if(Se.coordinates&&Array.isArray(Se.coordinates)&&Se.coordinates.length===2){const je=document.createElement("div");je.className="custom-marker";const Ue=document.createElement("div");Ue.className="station-name",Ue.textContent=Se.stationName,je.appendChild(Ue);const $e=document.createElement("img");$e.src=Sze,$e.className="marker-icon",je.appendChild($e),je.addEventListener("click",()=>{c(Se),v(!0)});const Be=new ep.Marker(je).setLngLat([Se.coordinates[1],Se.coordinates[0]]).addTo(e);oe.push(Be)}}),i(oe),oe.length>0){const _e=new ep.LngLatBounds;Re.docs.forEach(Fe=>{const Ee=Fe.data();Ee.coordinates&&Array.isArray(Ee.coordinates)&&Ee.coordinates.length===2&&_e.extend([Ee.coordinates[1],Ee.coordinates[0]])}),e.fitBounds(_e,{padding:50})}}catch(Re){console.error("Error fetching stations:",Re)}})(),()=>{r.forEach(Re=>Re.remove())}):void 0,[e]);const le=async()=>{try{const Re=(await Hi(Dn(wr,"admins"))).docs.map(we=>({id:we.id,...we.data()}));fe(Re)}catch(ge){console.error("Error fetching admins:",ge)}};ie.useEffect(()=>{le()},[]);const me=({station:ge,onClose:Re})=>{const[we,Ve]=ie.useState(!1),[oe,_e]=ie.useState(!1),[Fe,Ee]=ie.useState(!1),[ze,Se]=ie.useState([]),[je,Ue]=ie.useState([]),[$e,Be]=ie.useState([]),[qe,be]=ie.useState([]),[Te,ke]=ie.useState(0),[Ge,at]=ie.useState(!1),[rt,lt]=ie.useState(!1),[ot,ve]=ie.useState(!1),[Vt,Bt]=ie.useState(null),[wa,It]=ie.useState(!1),[$t,wt]=ie.useState([]),[hr,ba]=ie.useState(!1),[Pa,Ja]=ie.useState(!1),[or,lr]=ie.useState(null),[Tr,ka]=ie.useState([]);ie.useEffect(()=>{kr(),nn(),wn()},[ge.id]);const kr=async()=>{try{const Ya=(await Hi(Dn(wr,"bikes"))).docs.map(yr=>({id:yr.id,...yr.data()})).filter(yr=>yr.stationAssigned===ge.id);Be(Ya)}catch(la){console.error("Error fetching station bikes:",la)}},nn=async()=>{try{const Ya=(await Hi(Dn(wr,"bikes"))).docs.map(yr=>({id:yr.id,...yr.data()})).filter(yr=>!yr.stationAssigned);be(Ya)}catch(la){console.error("Error fetching unassigned bikes:",la)}},wn=async()=>{try{const Ya=(await Hi(Dn(wr,"admins"))).docs.map(yr=>({id:yr.id,...yr.data()})).filter(yr=>{var Tn;return!((Tn=ge.tanodAssigned)!=null&&Tn.includes(yr.id))&&!yr.stationAssignedTo});wt(Ya)}catch(la){console.error("Error fetching unassigned admins:",la)}},un=async()=>{try{Ve(!0);const la=ze.map(Ya=>yu(ds(wr,"bikes",Ya),{stationAssigned:null}));await Promise.all(la),_e(!1),Se([]),kr()}catch(la){console.error("Error removing bikes:",la),alert("Failed to remove bikes")}finally{Ve(!1)}},va=async()=>{try{Ve(!0);const la=je.map(Ya=>yu(ds(wr,"bikes",Ya),{stationAssigned:ge.id}));await Promise.all(la),Ee(!1),Ue([]),kr()}catch(la){console.error("Error adding bikes:",la),alert("Failed to add bikes")}finally{Ve(!1)}},$a=async la=>{try{Ve(!0);const Ya=ge.tanodAssigned||[];await yu(ds(wr,"stations",ge.id),{tanodAssigned:[...Ya,...la]});const yr=la.map(Tn=>yu(ds(wr,"admins",Tn),{stationAssignedTo:ge.id}));await Promise.all(yr),It(!1),window.location.reload()}catch(Ya){console.error("Error assigning admins:",Ya),alert("Failed to assign admins")}finally{Ve(!1)}};return q.jsx("div",{className:"map-modal-overlay",children:q.jsxs("div",{className:"map-modal-content large",children:[q.jsxs("div",{className:"modal-header",children:[q.jsxs("div",{className:"station-header",children:[q.jsx("h2",{children:ge.stationName}),q.jsx("p",{className:"station-address",children:ge.stationAddress})]}),q.jsx("button",{className:"close-button",onClick:Re,children:"×"})]}),q.jsxs("div",{className:"modal-body",children:[q.jsxs("div",{className:"admin-section",children:[q.jsxs("div",{className:"count-card",children:[q.jsxs("div",{className:"count-header",children:[q.jsx("h3",{children:"Station Admin"}),q.jsx("button",{className:"edit-btn",onClick:()=>It(!wa),children:q.jsx(_R,{})})]}),wa&&q.jsx("div",{className:"action-dropdown",children:q.jsx("button",{onClick:()=>{ba(!0),Ja(!1),It(!1),wn()},children:"Add Admin"})})]}),q.jsx("div",{className:"admin-content",children:hr?q.jsxs("div",{className:"admin-list",children:[q.jsx("h4",{children:"Select Admin to Assign"}),q.jsx("div",{className:"admin-grid",children:$t.map(la=>q.jsxs("div",{className:"admin-card",children:[q.jsx("input",{type:"checkbox",className:"admin-checkbox",checked:Tr.includes(la.id),onChange:Ya=>{Ya.target.checked?ka([...Tr,la.id]):ka(Tr.filter(yr=>yr!==la.id))}}),q.jsx("img",{src:la.profilePhoto||"/default-avatar.png",alt:la.name,className:"admin-photo"}),q.jsx("span",{className:"admin-name",children:la.name})]},la.id))}),q.jsxs("div",{className:"action-buttons",children:[q.jsx("button",{className:"save-btn",onClick:()=>{Tr.length>0&&$a(Tr)},disabled:Tr.length===0||we,children:we?"Saving...":"Save Changes"}),q.jsx("button",{className:"discard-btn",onClick:()=>{ba(!1),ka([])},children:"Discard Changes"})]})]}):q.jsx("div",{className:"admin-profile",children:Array.isArray(ge.tanodAssigned)&&ge.tanodAssigned.length>0?ge.tanodAssigned.map(la=>{const Ya=se.find(yr=>yr.id===la);return q.jsxs("div",{className:"admin-avatar",children:[q.jsx("img",{src:(Ya==null?void 0:Ya.profilePhoto)||"/default-avatar.png",alt:Ya==null?void 0:Ya.name}),q.jsx("span",{children:(Ya==null?void 0:Ya.name)||"Unknown Admin"})]},la)}):q.jsx("div",{className:"no-admin",children:q.jsx("span",{children:"No Admin Assigned"})})})})]}),q.jsxs("div",{className:"bikes-section",children:[q.jsxs("div",{className:"bikes-header-section",children:[q.jsx("h3",{children:"Station Bikes"}),q.jsx("div",{className:"counts-section",children:q.jsxs("div",{className:"count-cards",children:[q.jsxs("div",{className:"count-card",children:[q.jsxs("div",{className:"count-header",children:[q.jsxs("span",{children:["Regular Bikes:"," ",$e.filter(la=>la.bikeCategory==="Regular Bicycle").length]}),q.jsx("button",{className:"edit-btn",onClick:()=>lt(!rt),children:q.jsx(_R,{})})]}),rt&&q.jsxs("div",{className:"action-dropdown",children:[q.jsx("button",{onClick:()=>{Ee(!0),_e(!1),Bt("Regular"),lt(!1)},children:"Add Bikes"}),q.jsx("button",{onClick:()=>{_e(!0),Ee(!1),Bt("Regular"),lt(!1)},children:"Remove Bikes"})]})]}),q.jsxs("div",{className:"count-card",children:[q.jsxs("div",{className:"count-header",children:[q.jsxs("span",{children:["E-Bikes:"," ",$e.filter(la=>la.bikeCategory==="Electric Bicycle").length]}),q.jsx("button",{className:"edit-btn",onClick:()=>ve(!ot),children:q.jsx(_R,{})})]}),ot&&q.jsxs("div",{className:"action-dropdown",children:[q.jsx("button",{onClick:()=>{Ee(!0),_e(!1),Bt("Electric"),ve(!1)},children:"Add E-Bikes"}),q.jsx("button",{onClick:()=>{_e(!0),Ee(!1),Bt("Electric"),ve(!1)},children:"Remove E-Bikes"})]})]})]})})]}),q.jsx("div",{className:"bikes-content",children:q.jsx("div",{className:"bikes-grid",children:(oe||Fe?oe?$e.filter(la=>Vt==="Regular"?la.bikeCategory==="Regular Bicycle":la.bikeCategory==="Electric Bicycle"):qe.filter(la=>Vt==="Regular"?la.bikeCategory==="Regular Bicycle":la.bikeCategory==="Electric Bicycle"):$e).slice(Te*6,(Te+1)*6).map(la=>q.jsxs("div",{className:"bike-card",children:[(oe||Fe)&&q.jsx("input",{type:"checkbox",className:"bike-checkbox",checked:oe?ze.includes(la.id):je.includes(la.id),onChange:Ya=>{const yr=oe?Se:Ue,Tn=oe?ze:je;Ya.target.checked?yr([...Tn,la.id]):yr(Tn.filter(Qr=>Qr!==la.id))}}),q.jsx("img",{src:la.imageUrl||"/default-bike.png",alt:la.bikeName}),q.jsxs("div",{className:"bike-info",children:[q.jsx("span",{className:"bike-id",children:la.bikeId}),q.jsx("span",{className:"bike-name",children:la.bikeName})]})]},la.id))})}),q.jsxs("div",{className:"bikes-footer",children:[q.jsxs("div",{className:"pagination",children:[q.jsx("button",{onClick:()=>ke(la=>la-1),disabled:Te===0,className:"page-btn",children:q.jsx(Nfe,{})}),q.jsxs("span",{children:["Page ",Te+1]}),q.jsx("button",{onClick:()=>ke(la=>la+1),disabled:(Te+1)*6>=(oe?$e.length:Fe?qe.length:$e.length),className:"page-btn",children:q.jsx(Ofe,{})})]}),(oe||Fe)&&q.jsxs("div",{className:"action-buttons",children:[q.jsx("button",{className:"save-btn",onClick:oe?un:va,disabled:we||(oe?ze.length===0:je.length===0),children:we?"Saving...":"Save Changes"}),q.jsx("button",{className:"discard-btn",onClick:()=>{_e(!1),Ee(!1),Se([]),Ue([]),Bt(null)},children:"Discard Changes"})]})]})]})]})]})})};return q.jsxs("div",{className:"map-container",children:[q.jsx("div",{id:"map",className:"map-element"}),n&&q.jsx(me,{station:l,onClose:()=>v(!1)})]})};ep.accessToken="pk.eyJ1IjoiY29jb2xlbW9uMTIiLCJhIjoiY204YTBoMnZpMHplbzJzcTR3dDFmOXc4NiJ9.NqqEHSBe8cn9Gy9knbUqew";const xze=({onSelectLocation:t,isSelectingLocation:e})=>{const a=ie.useRef(null),r=ie.useRef(null),i=ie.useRef(null);return ie.useEffect(()=>{if(!r.current)return r.current=new ep.Map({container:a.current,style:"mapbox://styles/mapbox/streets-v11",center:[120.9882053036898,14.693467677226026],zoom:12}),()=>{r.current&&(r.current.remove(),r.current=null)}},[]),ie.useEffect(()=>{if(!r.current)return;const l=c=>{e&&(i.current&&i.current.remove(),i.current=new ep.Marker({draggable:!0,color:"#FF0000",scale:.8}).setLngLat([c.lngLat.lng,c.lngLat.lat]).addTo(r.current),i.current.on("dragend",()=>{const n=i.current.getLngLat();t([n.lat,n.lng])}),t([c.lngLat.lat,c.lngLat.lng]))};return e?(r.current.getCanvas().style.cursor="crosshair",r.current.on("click",l)):(r.current.getCanvas().style.cursor="",r.current.off("click",l)),()=>{r.current&&(r.current.off("click",l),r.current.getCanvas().style.cursor=""),i.current&&(i.current.remove(),i.current=null)}},[e,t]),q.jsx("div",{ref:a,className:"add-station-map"})},Pze=()=>{const[t,e]=ie.useState([]),[a,r]=ie.useState([]),[i,l]=ie.useState(!1),[c,n]=ie.useState(!1),[v,R]=ie.useState(null),[x,N]=ie.useState(!1),[L,F]=ie.useState(null),[j,$]=ie.useState(""),[H,W]=ie.useState(""),[ee,se]=ie.useState(""),[fe,le]=ie.useState(""),[me,ge]=ie.useState([]),[Re,we]=ie.useState([]),[Ve,oe]=ie.useState([]),[_e,Fe]=ie.useState([]),[Ee,ze]=ie.useState(!1),[Se,je]=ie.useState(!1),[Ue,$e]=ie.useState(!1),[Be,qe]=ie.useState(!1),[be,Te]=ie.useState([]),[ke,Ge]=ie.useState([]),[at,rt]=ie.useState(!1),[lt,ot]=ie.useState(!1),[ve,Vt]=ie.useState("");ie.useEffect(()=>{Bt(),wa(),It(),$t()},[]);const Bt=async()=>{try{const $a=(await Hi(Dn(wr,"admins"))).docs.map(la=>({id:la.id,...la.data()}));Ge($a)}catch(va){console.error("Error fetching all admins:",va)}},wa=async()=>{try{const la=(await Hi(Dn(wr,"admins"))).docs.map(Ya=>({id:Ya.id,...Ya.data()})).filter(Ya=>!Ya.stationAssignedTo);Te(la)}catch(va){console.error("Error fetching unassigned admins:",va)}},It=async()=>{try{const va=await Hi(Dn(wr,"admins")),$a={};va.docs.forEach(cn=>{const $r=cn.data();$a[cn.id]=$r.name});const Ya=(await Hi(Dn(wr,"stations"))).docs.map(cn=>{const $r=cn.data(),br=$r.tanodAssigned||[],Fi=Array.isArray(br)?br:[br];return{id:cn.id,...$r,tanodAssignedID:Fi,tanodAssignedName:Fi.map(yi=>$a[yi]||"Unknown").join(", ")||"Not Assigned"}}),Tn=(await Hi(Dn(wr,"bikes"))).docs.map(cn=>({id:cn.id,...cn.data()})),Qr=Ya.map(cn=>{const $r=Tn.filter(Fi=>Fi.stationAssigned===cn.id&&Fi.bikeCategory==="Regular Bicycle"&&Fi.bikeStatus==="Available"&&Fi.isAvailable===!0).length,br=Tn.filter(Fi=>Fi.stationAssigned===cn.id&&Fi.bikeCategory==="Electric Bicycle"&&Fi.bikeStatus==="Available"&&Fi.isAvailable===!0).length;return{...cn,totalRegularBikes:$r,totalElectricBikes:br}});e(Qr)}catch(va){console.error("Error fetching stations:",va)}},$t=async()=>{const $a=(await Hi(Dn(wr,"bikes"))).docs.map(Ya=>({id:Ya.id,...Ya.data()})),la=$a.filter(Ya=>!Ya.stationAssigned&&Ya.bikeStatus==="Available"&&Ya.isAvailable===!0);r($a),oe(la.filter(Ya=>Ya.bikeCategory==="Regular Bicycle")),Fe(la.filter(Ya=>Ya.bikeCategory==="Electric Bicycle"))},wt=async va=>{const $a=t.find(Ya=>Ya.id===va);if(window.confirm(`Are you sure you want to delete this station?

Station Name: ${$a.stationName}
Address: ${$a.stationAddress}
Regular Bikes: ${$a.totalRegularBikes||0}
Electric Bikes: ${$a.totalElectricBikes||0}
Tanod Assigned: ${$a.tanodAssignedName||"None"}

This action cannot be undone!`))try{const Ya=ds(wr,"stations",va),Tn=(await Xf(Ya)).data(),Qr=(Tn==null?void 0:Tn.tanodAssigned)||[],$r=(Array.isArray(Qr)?Qr:[Qr]).map(oi=>yu(ds(wr,"admins",oi),{stationAssignedTo:null}));await Promise.all($r);const yi=(await Hi(Dn(wr,"bikes"))).docs.filter(oi=>oi.data().stationAssigned===va).map(oi=>yu(ds(wr,"bikes",oi.id),{stationAssigned:null,bikeStatus:"Available",isAvailable:!0}));await Promise.all(yi),await hX(Ya),Vt("Station deleted successfully!"),ot(!0),setTimeout(()=>ot(!1),2e3),wa(),It(),$t()}catch(Ya){console.error("Error deleting station:",Ya),alert("Error deleting station. Please try again.")}},hr=async va=>{R(va),$(va.stationName||""),W(va.stationAddress||""),le(va.coordinates||""),se(va.tanodAssignedID||""),n(!0);const la=(await Hi(Dn(wr,"bikes"))).docs.map(Ya=>({id:Ya.id,...Ya.data()}));ge(la.filter(Ya=>Ya.bikeCategory==="Regular Bicycle"&&Ya.stationAssigned===va.id).map(Ya=>Ya.id)),we(la.filter(Ya=>Ya.bikeCategory==="Electric Bicycle"&&Ya.stationAssigned===va.id).map(Ya=>Ya.id)),$t()},ba=()=>{R(null),$(""),W(""),le(""),se(""),ge([]),we([]),rt(!1),l(!0)},Pa=async(va,$a)=>{try{const la=await Yl.get(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${va}&lon=${$a}`);W(la.data.display_name||"Unknown Address")}catch(la){console.error("Error fetching address:",la)}},Ja=va=>{const $a=va.target.value;le($a);const[la,Ya]=$a.split(",");la&&Ya&&Pa(la.trim(),Ya.trim())},or=va=>{le(va.join(",")),Pa(va[0],va[1])},lr=async va=>{if(va.preventDefault(),!ee){alert("Please select an admin (or allow none).");return}try{const $a=typeof fe=="string"?fe.split(",").map(yr=>parseFloat(yr.trim())):[],la=Array.isArray(ee)?ee:[ee];let Ya;if(v)Ya=ds(wr,"stations",v.id),await yu(Ya,{stationName:j,stationAddress:H,coordinates:$a,tanodAssigned:la}),Vt("Station updated successfully!"),n(!1);else{const yr={stationName:j,stationAddress:H,coordinates:$a,tanodAssigned:la};Ya=await zv(Dn(wr,"stations"),yr),Vt("Station added successfully!"),l(!1)}if(Ya&&Ya.id){const yr=la.map(Tn=>yu(ds(wr,"admins",Tn),{stationAssignedTo:Ya.id}));await Promise.all(yr),await Tr(Ya.id),wa(),It(),ot(!0),setTimeout(()=>{ot(!1)},2e3)}}catch($a){console.error("Error saving station:",$a)}},Tr=async va=>{try{for(const $a of me){const la=ds(wr,"bikes",$a);await yu(la,{stationAssigned:va})}for(const $a of Re){const la=ds(wr,"bikes",$a);await yu(la,{stationAssigned:va})}console.log("Bikes assigned successfully:",va)}catch($a){console.error("Error assigning bikes:",$a)}},ka=va=>{va==="Regular Bicycle"?je(!0):ze(!0)},kr=va=>{va==="Regular Bicycle"?($e(!0),qe(!1)):(qe(!0),$e(!1))},nn=async(va,$a)=>{try{const la=ds(wr,"bikes",va);await yu(la,{stationAssigned:null}),$a==="Regular Bicycle"?ge(Ya=>Ya.filter(yr=>yr!==va)):we(Ya=>Ya.filter(yr=>yr!==va)),$t(),console.log(`Bike ${va} unassigned successfully.`)}catch(la){console.error("Error unassigning bike:",la)}},wn=({station:va,onClose:$a})=>q.jsx("div",{className:"modal-overlay",onClick:$a,children:q.jsxs("div",{className:"modal-content",onClick:la=>la.stopPropagation(),children:[q.jsx("h2",{children:va.stationName}),q.jsxs("p",{children:[q.jsx("strong",{children:"Address:"})," ",va.stationAddress]}),q.jsxs("p",{children:[q.jsx("strong",{children:"Coordinates:"})," ",va.coordinates]}),q.jsxs("p",{children:[q.jsx("strong",{children:"Tanod Assigned:"})," ",va.tanodAssignedName||"Not Assigned"]}),q.jsxs("p",{children:[q.jsx("strong",{children:"Total Bikes:"})," ",va.totalRegularBikes||0," ","(Regular), ",va.totalElectricBikes||0," (Electric)"]}),q.jsx("button",{className:"cancel-btn",onClick:$a,children:"Close"})]})}),un=({message:va})=>q.jsx("div",{className:"success-overlay",children:q.jsxs("div",{className:"success-content",children:[q.jsx("div",{className:"success-icon",children:"✓"}),q.jsx("p",{children:va})]})});return q.jsxs(Xv,{children:[q.jsx(lA,{title:"Station Management"}),q.jsxs("div",{className:"station-management-container",children:[q.jsxs("div",{className:"station-management-header",children:[q.jsx("h2",{children:"Station Overview"}),q.jsxs("button",{className:"add-station-btn",onClick:ba,children:[q.jsx(dx,{})," Add New Station"]})]}),q.jsxs("div",{className:"station-map-section",children:[q.jsx("h2",{children:"Station Locations"}),q.jsx("div",{className:"map-container",children:q.jsx(bze,{onEditStation:va=>{hr(va)}})})]}),q.jsx("div",{className:"station-list",children:q.jsxs("table",{children:[q.jsx("thead",{children:q.jsxs("tr",{children:[q.jsx("th",{children:"Station Name"}),q.jsx("th",{children:"Station Address"}),q.jsx("th",{children:"Total Bikes"}),q.jsx("th",{children:"Total E-Bikes"}),q.jsx("th",{children:"Tanod Assigned"}),q.jsx("th",{children:"Action"})]})}),q.jsx("tbody",{children:t.length>0?t.map(va=>q.jsxs("tr",{children:[q.jsx("td",{children:q.jsx("strong",{children:va.stationName})}),q.jsx("td",{children:q.jsx("span",{onClick:()=>{F(va),N(!0)},style:{cursor:"pointer",color:"#00796b"},children:va.stationAddress})}),q.jsx("td",{children:va.totalRegularBikes||0}),q.jsx("td",{children:va.totalElectricBikes||0}),q.jsx("td",{children:q.jsx("strong",{children:va.tanodAssignedName||"Not Assigned"})}),q.jsx("td",{children:q.jsx("button",{className:"delete-btn",onClick:()=>wt(va.id),children:q.jsx(Ife,{})})})]},va.id)):q.jsx("tr",{children:q.jsx("td",{colSpan:"6",style:{textAlign:"center",padding:"10px"},children:"No stations available"})})})]})}),x&&L&&q.jsx(wn,{station:L,onClose:()=>N(!1)}),i&&q.jsx("div",{className:"modal-overlay",children:q.jsxs("div",{className:"modal-content large",children:[q.jsxs("div",{className:"modal-header",children:[q.jsx("h2",{children:"Add Station"}),q.jsx("button",{className:"close-modal-btn",onClick:()=>{rt(!1),l(!1)},children:q.jsx(DL,{})})]}),q.jsxs("form",{onSubmit:lr,children:[q.jsx("label",{children:"Station Name:"}),q.jsx("input",{type:"text",value:j,onChange:va=>$(va.target.value),required:!0}),q.jsx("label",{children:"Location:"}),q.jsxs("div",{className:"location-selection",children:[q.jsxs("div",{className:"coordinates-input",children:[q.jsx("input",{type:"text",value:fe,onChange:Ja,placeholder:"Click on map or enter lat,long",readOnly:!0}),q.jsx("button",{type:"button",className:`select-location-btn ${at?"active":""}`,onClick:()=>rt(!at),children:at?"Done Selecting":"Select on Map"})]}),q.jsx("div",{className:"map-container",children:q.jsx(xze,{onSelectLocation:or,isSelectingLocation:at})})]}),q.jsx("label",{children:"Address:"}),q.jsx("textarea",{value:H,readOnly:!0}),q.jsx("label",{children:"Tanod Assigned:"}),q.jsxs("select",{value:ee,onChange:va=>se(va.target.value),required:!0,children:[q.jsx("option",{value:"",children:"Select Tanod"}),be.map(va=>q.jsxs("option",{value:va.id,children:[va.name," (",va.email,")"]},va.id))]}),q.jsx("label",{children:"Add Bikes:"}),q.jsxs("div",{className:"bike-selection",children:[q.jsx("button",{type:"button",onClick:()=>ka("Regular Bicycle"),children:"➕"}),q.jsx("input",{type:"text",value:`${me.length} Selected`,readOnly:!0})]}),q.jsx("label",{children:"Add E-Bikes:"}),q.jsxs("div",{className:"bike-selection",children:[q.jsx("button",{type:"button",onClick:()=>ka("Electric Bicycle"),children:"➕"}),q.jsx("input",{type:"text",value:`${Re.length} Selected`,readOnly:!0})]}),q.jsxs("div",{className:"modal-buttons",children:[q.jsx("button",{type:"submit",className:"save-btn",children:"Save"}),q.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>l(!1),children:"Cancel"})]})]})]})}),Se&&q.jsx("div",{className:"add-bike-modal-overlay",children:q.jsxs("div",{className:"add-bike-modal",children:[q.jsx("h2",{children:"Select Regular Bikes"}),q.jsx("div",{className:"bike-list-container",children:Ve.length>0?Ve.map(va=>q.jsxs("div",{className:"bike-item",children:[q.jsxs("label",{children:[va.bikeName," (",va.bikeId,")"]}),q.jsx("input",{type:"checkbox",checked:me.includes(va.id),onChange:()=>{ge($a=>$a.includes(va.id)?$a.filter(la=>la!==va.id):[...$a,va.id])}})]},va.id)):q.jsx("p",{children:"No unassigned bikes available"})}),q.jsx("button",{className:"save-btn",onClick:()=>je(!1),children:"Done"})]})}),Ee&&q.jsx("div",{className:"add-bike-modal-overlay",children:q.jsxs("div",{className:"add-bike-modal",children:[q.jsx("h2",{children:"Select Electric Bikes"}),q.jsx("div",{className:"bike-list-container",children:_e.length>0?_e.map(va=>q.jsxs("div",{className:"bike-item",children:[q.jsxs("label",{children:[va.bikeName," (",va.bikeId,")"]}),q.jsx("input",{type:"checkbox",checked:Re.includes(va.id),onChange:()=>{we($a=>$a.includes(va.id)?$a.filter(la=>la!==va.id):[...$a,va.id])}})]},va.id)):q.jsx("p",{children:"No unassigned e-bikes available"})}),q.jsx("button",{className:"save-btn",onClick:()=>ze(!1),children:"Done"})]})}),Ue&&q.jsx("div",{className:"assigned-bike-overlay",children:q.jsxs("div",{className:"assigned-bike-modal",children:[q.jsx("h2",{children:"Remove Assigned Regular Bikes"}),q.jsx("div",{className:"bike-list-container",children:me.length>0?me.map(va=>{const $a=a.find(la=>la.id===va);return q.jsxs("div",{className:"bike-item",children:[q.jsxs("label",{children:[$a==null?void 0:$a.bikeName," (",$a==null?void 0:$a.bikeId,")"]}),q.jsx("button",{className:"remove-btn",onClick:()=>nn(va,"Regular Bicycle"),children:"❌ Remove"})]},va)}):q.jsx("p",{children:"No assigned bikes."})}),q.jsx("button",{className:"save-btn",onClick:()=>$e(!1),children:"Done"})]})}),Be&&q.jsx("div",{className:"assigned-bike-overlay",children:q.jsxs("div",{className:"assigned-bike-modal",children:[q.jsx("h2",{children:"Remove Assigned Electric Bikes"}),q.jsx("div",{className:"bike-list-container",children:Re.length>0?Re.map(va=>{const $a=a.find(la=>la.id===va);return q.jsxs("div",{className:"bike-item",children:[q.jsxs("label",{children:[$a==null?void 0:$a.bikeName," (",$a==null?void 0:$a.bikeId,")"]}),q.jsx("button",{className:"remove-btn",onClick:()=>nn(va,"Electric Bicycle"),children:"❌ Remove"})]},va)}):q.jsx("p",{children:"No assigned e-bikes."})}),q.jsx("button",{className:"save-btn",onClick:()=>qe(!1),children:"Done"})]})}),c&&v&&q.jsx("div",{className:"modal-overlay",children:q.jsxs("div",{className:"modal-content",children:[q.jsx("h2",{children:"Edit Station"}),q.jsxs("form",{onSubmit:lr,children:[q.jsx("label",{children:"Station Name:"}),q.jsx("input",{type:"text",value:j,onChange:va=>$(va.target.value),required:!0}),q.jsx("label",{children:"Coordinates:"}),q.jsx("input",{type:"text",value:fe,onChange:Ja,placeholder:"Enter lat,long"}),q.jsx("label",{children:"Address:"}),q.jsx("textarea",{value:H,readOnly:!0}),q.jsx("label",{children:"Tanod Assigned:"}),(()=>{const va=v.tanodAssignedID,$a=ke.find(Ya=>Ya.id===va);let la=[...be];return $a&&!la.some(Ya=>Ya.id===$a.id)&&la.unshift($a),q.jsxs("select",{value:ee,onChange:Ya=>se(Ya.target.value),required:!0,children:[q.jsx("option",{value:"",children:"Select Tanod"}),la.map(Ya=>q.jsxs("option",{value:Ya.id,children:[Ya.name," (",Ya.email,")"]},Ya.id))]})})(),q.jsx("label",{children:"Assigned Bikes:"}),q.jsxs("div",{className:"bike-selection",children:[q.jsx("button",{type:"button",onClick:()=>kr("Regular Bicycle"),children:"➖"}),q.jsx("input",{type:"text",value:`${me.length} Assigned`,readOnly:!0}),q.jsx("button",{type:"button",onClick:()=>ka("Regular Bicycle"),children:"➕"})]}),q.jsx("label",{children:"Assigned E-Bikes:"}),q.jsxs("div",{className:"bike-selection",children:[q.jsx("button",{type:"button",onClick:()=>kr("Electric Bicycle"),children:"➖"}),q.jsx("input",{type:"text",value:`${Re.length} Assigned`,readOnly:!0}),q.jsx("button",{type:"button",onClick:()=>ka("Electric Bicycle"),children:"➕"})]}),q.jsxs("div",{className:"modal-buttons",children:[q.jsx("button",{type:"submit",className:"save-btn",children:"Save"}),q.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>n(!1),children:"Cancel"})]})]})]})}),lt&&q.jsx(un,{message:ve})]})]})},Eze=()=>{const[t,e]=ie.useState([]),[a,r]=ie.useState(""),[i,l]=ie.useState(""),[c,n]=ie.useState(""),[v,R]=ie.useState(null),[x,N]=ie.useState(""),[L,F]=ie.useState(!1),[j,$]=ie.useState("station_manager"),[H,W]=ie.useState(!1),[ee,se]=ie.useState(null),[fe,le]=ie.useState(null),[me,ge]=ie.useState({adminId:null,role:""}),[Re,we]=ie.useState([]),[Ve,oe]=ie.useState({total:0,active:0,inactive:0,onBreak:0}),[_e,Fe]=ie.useState(null),Ee={ACTIVE:"Active",INACTIVE:"Inactive",ON_BREAK:"On Break"},ze={Active:"#4CAF50",Inactive:"#F44336","On Break":"#FFC107"},Se=rt=>{const lt={total:rt.length,active:0,inactive:0,onBreak:0};return rt.forEach(ot=>{switch(ot.status){case Ee.ACTIVE:lt.active++;break;case Ee.INACTIVE:lt.inactive++;break;case Ee.ON_BREAK:lt.onBreak++;break;default:lt.inactive++;break}}),lt};ie.useEffect(()=>{const rt=async()=>{const ot=await Hi(Dn(wr,"stations")),ve={};return ot.docs.forEach(Vt=>{ve[Vt.id]={stationName:Vt.data().stationName,stationAddress:Vt.data().stationAddress}}),we(ve),ve},lt=ot=>{const ve=Dn(wr,"admins");return Up(ve,Vt=>{const Bt=Vt.docs.map(wa=>({id:wa.id,...wa.data(),stationDetails:wa.data().stationAssignedTo?ot[wa.data().stationAssignedTo]:null}));e(Bt),oe(Se(Bt))})};rt().then(ot=>{const ve=lt(ot);return()=>ve()})},[]);const je=async(rt,lt)=>{try{const ot=ds(wr,"admins",rt);await yu(ot,{roles:[lt],updatedAt:new Date}),alert("Role updated successfully!")}catch(ot){console.error("Error updating role:",ot),alert("Failed to update admin role. Please try again.")}},Ue=(rt,lt)=>{ge({adminId:rt,role:lt||"Station Manager"})},$e=async()=>{if(!me.adminId||!me.role){alert("Please select a role");return}try{await je(me.adminId,me.role),ge({adminId:null,role:""})}catch(rt){console.error("Error saving role:",rt),alert("Failed to save role changes")}},Be=rt=>new Promise(lt=>{const ot=new FileReader;ot.readAsDataURL(rt),ot.onload=ve=>{const Vt=new Image;Vt.src=ve.target.result,Vt.onload=()=>{const Bt=document.createElement("canvas"),wa=Bt.getContext("2d");let It=Vt.width,$t=Vt.height;const wt=800;It>$t&&It>wt?($t=$t*wt/It,It=wt):$t>wt&&(It=It*wt/$t,$t=wt),Bt.width=It,Bt.height=$t,wa.drawImage(Vt,0,0,It,$t),Bt.toBlob(hr=>{lt(hr)},"image/jpeg",.6)}}}),qe=async rt=>{if(!rt)return null;try{const lt=await Be(rt),ot=`admin_profiles/${Date.now()}_${rt.name}`,ve=qI(),Vt=ZI(ve,ot);return await jI(Vt,lt),await GI(Vt)}catch(lt){return console.error("Error uploading image:",lt),null}},be=async rt=>{if(rt.preventDefault(),!a||!i||!c){alert("Please fill in all fields.");return}try{const lt=KK(),ve=(await ole(lt,i,c)).user;let Vt="";if(v&&(Vt=await qe(v),!Vt)){alert("Failed to upload profile image.");return}const Bt={uid:ve.uid,name:a,email:i,roles:[j],profilePhoto:Vt||"",status:"Active",stationAssignedTo:null,createdAt:new Date,updatedAt:new Date};await zv(Dn(wr,"admins"),Bt),alert("Admin added successfully!"),r(""),l(""),n(""),R(null),N(""),F(!1)}catch(lt){console.error("Error creating admin:",lt),alert(lt.message||"There was an error creating the admin. Please try again.")}},Te=async rt=>{if(window.confirm("Are you sure you want to deactivate this admin?"))try{const lt=ds(wr,"admins",rt);await yu(lt,{isDeactivated:!0,status:"Inactive",deactivatedAt:new Date,updatedAt:new Date}),alert("Admin account has been deactivated")}catch(lt){console.error("Error deactivating admin:",lt),alert("Failed to deactivate admin account")}},ke=rt=>{se(rt),W(!0),le(null),$(rt.roles[0])},Ge=async rt=>{if(rt.preventDefault(),!fe){alert("Please select a new profile image.");return}const lt=await qe(fe);if(!lt){alert("Failed to upload new profile image.");return}try{const ot=ds(wr,"admins",ee.id);await yu(ot,{profilePhoto:lt}),alert("Profile photo updated successfully!"),W(!1),se(null),le(null)}catch(ot){console.error("Error updating admin profile photo:",ot),alert("Failed to update admin profile photo. Please try again.")}},at=()=>{W(!1),se(null),le(null)};return q.jsxs(Xv,{children:[q.jsx(lA,{title:"Admin Management"}),q.jsxs("div",{className:"admin-management-container",children:[q.jsxs("div",{className:"stats-container",children:[q.jsxs("div",{className:"stat-card",children:[q.jsx("h3",{children:"Total Admins"}),q.jsx("p",{children:Ve.total})]}),q.jsxs("div",{className:"stat-card active",children:[q.jsx("h3",{children:"Active"}),q.jsx("p",{children:Ve.active})]}),q.jsxs("div",{className:"stat-card break",children:[q.jsx("h3",{children:"On Break"}),q.jsx("p",{children:Ve.onBreak})]}),q.jsxs("div",{className:"stat-card inactive",children:[q.jsx("h3",{children:"Inactive"}),q.jsx("p",{children:Ve.inactive})]})]}),q.jsxs("div",{className:"admin-management-header",children:[q.jsx("h2",{children:"Admin Creation"}),q.jsxs("button",{className:"btn-create-admin",onClick:()=>F(!0),children:[q.jsx(dx,{})," Create New Admin Account"]})]}),q.jsx("div",{className:"admin-gallery",children:t.length>0?t.map(rt=>{var lt,ot;return q.jsxs("div",{className:"admin-card",children:[q.jsxs("div",{className:"edit-container",children:[q.jsx("button",{className:"edit-toggle",onClick:()=>Fe(_e===rt.id?null:rt.id),children:q.jsx(Mfe,{})}),_e===rt.id&&q.jsxs("div",{className:"edit-options",children:[q.jsxs("button",{onClick:()=>{ke(rt),Fe(null)},children:[q.jsx(Efe,{})," Change Photo"]}),q.jsxs("button",{onClick:()=>{var ve;Ue(rt.id,(ve=rt.roles)==null?void 0:ve[0]),Fe(null)},children:[q.jsx(Lfe,{})," Change Role"]}),q.jsxs("button",{onClick:()=>{Te(rt.id),Fe(null)},className:"deactivate-btn",children:[q.jsx(Ffe,{})," Deactivate Admin"]})]})]}),q.jsxs("div",{className:"admin-photo",children:[q.jsxs("div",{className:"status-dot-container",children:[q.jsx("span",{className:`status-dot ${(lt=rt.status)==null?void 0:lt.toLowerCase()}`,style:{backgroundColor:ze[rt.status]||ze.Inactive}}),q.jsxs("div",{className:"status-tooltip",children:[rt.status||"Inactive"," • Last updated:"," ",rt.statusUpdatedAt?mi(rt.statusUpdatedAt.toDate()).format("MMM D, HH:mm"):"Not available"]})]}),rt.profilePhoto?q.jsx("img",{src:rt.profilePhoto,alt:"Admin"}):q.jsx("div",{className:"placeholder",children:"No Image"})]}),q.jsxs("div",{className:"admin-info",children:[q.jsx("h4",{children:rt.name}),q.jsx("p",{children:rt.email}),q.jsx("div",{className:"role-badge",children:((ot=rt.roles)==null?void 0:ot[0])||"No Role"}),q.jsx("div",{className:"station-info",children:rt.stationDetails?q.jsxs("span",{className:"station-name",children:["📍 ",rt.stationDetails.stationName]}):q.jsx("span",{className:"no-station",children:"No Station Assigned"})})]})]},rt.id)}):q.jsx("p",{children:"No admins found"})}),L&&q.jsx("div",{className:"modal-overlay",children:q.jsxs("div",{className:"modal-content",children:[q.jsx("h3",{children:"Create Admin Account"}),q.jsxs("form",{onSubmit:be,children:[q.jsxs("div",{className:"form-group",children:[q.jsx("label",{children:"Name:"}),q.jsx("input",{type:"text",value:a,onChange:rt=>r(rt.target.value),required:!0})]}),q.jsxs("div",{className:"form-group",children:[q.jsx("label",{children:"Role:"}),q.jsxs("select",{value:j,onChange:rt=>$(rt.target.value),children:[q.jsx("option",{value:"Station Manager",children:"Station Manager"}),q.jsx("option",{value:"User Support",children:"User Support"})]})]}),q.jsxs("div",{className:"form-group",children:[q.jsx("label",{children:"Email:"}),q.jsx("input",{type:"email",value:i,onChange:rt=>l(rt.target.value),required:!0})]}),q.jsxs("div",{className:"form-group",children:[q.jsx("label",{children:"Password:"}),q.jsx("input",{type:"password",value:c,onChange:rt=>n(rt.target.value),required:!0})]}),q.jsxs("div",{className:"form-group",children:[q.jsx("label",{children:"Profile Picture:"}),q.jsx("input",{type:"file",accept:"image/*",onChange:rt=>R(rt.target.files[0])})]}),v&&q.jsx("div",{className:"preview-image",children:q.jsx("img",{src:URL.createObjectURL(v),alt:"Preview"})}),q.jsx("button",{type:"submit",className:"btn-create",children:"Create"}),q.jsx("button",{type:"button",className:"btn-cancel",onClick:()=>F(!1),children:"Cancel"})]})]})}),H&&ee&&q.jsx("div",{className:"modal-overlay",children:q.jsxs("div",{className:"modal-content",children:[q.jsxs("h3",{children:["Edit Profile Photo for ",ee.name]}),q.jsxs("form",{onSubmit:Ge,children:[q.jsxs("div",{className:"form-group",children:[q.jsx("label",{children:"New Profile Picture:"}),q.jsx("input",{type:"file",accept:"image/*",onChange:rt=>le(rt.target.files[0])})]}),fe&&q.jsx("div",{className:"preview-image",children:q.jsx("img",{src:URL.createObjectURL(fe),alt:"Preview"})}),q.jsx("button",{type:"submit",className:"btn-update",children:"Update Photo"}),q.jsx("button",{type:"button",className:"btn-cancel",onClick:at,children:"Cancel"})]})]})}),me.adminId&&q.jsx("div",{className:"modal-overlay",children:q.jsxs("div",{className:"modal-content",children:[q.jsx("h3",{children:"Change Admin Role"}),q.jsxs("form",{onSubmit:rt=>{rt.preventDefault(),$e()},children:[q.jsxs("div",{className:"form-group",children:[q.jsx("label",{children:"Select Role:"}),q.jsxs("select",{value:me.role,onChange:rt=>ge({...me,role:rt.target.value}),children:[q.jsx("option",{value:"Station Manager",children:"Station Manager"}),q.jsx("option",{value:"User Support",children:"User Support"})]})]}),q.jsxs("div",{className:"button-group",children:[q.jsx("button",{type:"submit",className:"btn-update",children:"Save Role"}),q.jsx("button",{type:"button",className:"btn-cancel",onClick:()=>ge({adminId:null,role:""}),children:"Cancel"})]})]})]})})]})]})},bD={RegularBicycle:"Regular Bicycle",ElectricBicycle:"Electric Bicycle"},Nze=()=>{const[t,e]=ie.useState([]),[a,r]=ie.useState(!0),[i,l]=ie.useState(null),[c,n]=ie.useState(""),[v,R]=ie.useState([]),[x,N]=ie.useState([]),[L,F]=ie.useState(!1),[j,$]=ie.useState("daily"),[H,W]=ie.useState({daily:{revenue:0,rides:0},weekly:{revenue:0,rides:0},monthly:{revenue:0,rides:0},total:{revenue:0,rides:0},all:{revenue:0,rides:0}}),[ee,se]=ie.useState({key:"revenue",direction:"desc"}),[fe,le]=ie.useState([]),[me,ge]=ie.useState(!1),[Re,we]=ie.useState(!1),Ve=async()=>{try{const ke=Dn(wr,"remittances"),Ge=Tg(ke,lx("dateSubmitted","desc")),rt=(await Hi(Ge)).docs.map(lt=>({id:lt.id,...lt.data()}));le(rt)}catch(ke){console.error("Error fetching remittances:",ke)}},[oe,_e]=ie.useState([]),[Fe,Ee]=ie.useState(!1),ze=ke=>{se({key:ke,direction:ee.key===ke&&ee.direction==="asc"?"desc":"asc"})};ie.useEffect(()=>{Se(),je(),$e(),Ve()},[]),ie.useEffect(()=>{$e()},[j]);const Se=async()=>{try{const Ge=(await Hi(Dn(wr,"rentalRates"))).docs.map(at=>({id:at.id,...at.data()}));e(Ge)}catch(ke){console.error("Error fetching rental rates:",ke)}finally{r(!1)}},je=async()=>{try{const ke=Dn(wr,"rateHistory"),Ge=Tg(ke,lx("timestamp","desc")),rt=(await Hi(Ge)).docs.map(lt=>({id:lt.id,...lt.data()}));R(rt)}catch(ke){console.error("Error fetching rate history:",ke)}},Ue=(ke,Ge)=>{const at=mi();switch(Ge){case"daily":return mi(ke).isSame(at,"day");case"weekly":return mi(ke).isAfter(at.subtract(1,"week"));case"monthly":return mi(ke).isAfter(at.subtract(1,"month"));case"all":return!0;default:return!0}},$e=async()=>{try{const ke=Dn(wr,"ride_history"),Ge=await Hi(ke);let at={},rt={},lt={daily:{revenue:0,rides:0},weekly:{revenue:0,rides:0},monthly:{revenue:0,rides:0},all:{revenue:0,rides:0}};const ot=Dn(wr,"stations"),ve=await Hi(ot),Vt=new Map(ve.docs.map(It=>[It.id,It.data().stationName]));Ge.docs.forEach(It=>{const $t=It.data(),wt=$t.rideEndedAt.toDate(),hr=Number($t.amountPaid||0),ba=$t.startStation,Pa=$t.startStationName||"Unknown Station";Ue(wt,j)&&(lt[j].revenue+=hr,lt[j].rides+=1,ba&&(Vt.has(ba)?(at[ba]||(at[ba]={id:ba,stationName:Vt.get(ba),revenue:0,rides:0}),at[ba].revenue+=hr,at[ba].rides+=1):(rt[ba]||(rt[ba]={id:ba,stationName:Pa,revenue:0,rides:0,isDeleted:!0}),rt[ba].revenue+=hr,rt[ba].rides+=1)))});const Bt=Object.values(at),wa=Object.values(rt);N(Bt),_e(wa),W(It=>({...It,[j]:lt[j]}))}catch(ke){console.error("Error fetching station revenue:",ke)}},Be=ke=>{var Ge;l(ke),n(((Ge=ke.pricePerMinute)==null?void 0:Ge.toString())||"")},qe=()=>{l(null),n("")},be=async()=>{if(!i)return;const ke=parseFloat(c);if(isNaN(ke)||ke<=0){alert("Please enter a valid number greater than 0 for the price.");return}try{const Ge=Dv.currentUser;if(!Ge)throw new Error("No user is signed in");const at=ds(wr,"users",Ge.uid),rt=await Xf(at),lt=rt.exists()?rt.data().name:"Unknown User",ot=ds(wr,"rentalRates",i.id);await yu(ot,{pricePerMinute:ke}),await zv(Dn(wr,"rateHistory"),{bikeType:i.id,oldPrice:i.pricePerMinute,newPrice:ke,timestamp:new Date,updatedBy:lt});const ve=t.map(Vt=>Vt.id===i.id?{...Vt,pricePerMinute:ke}:Vt);e(ve),await je(),qe()}catch(Ge){console.error("Error updating rate:",Ge),alert("Failed to update the rate. See console for details.")}},Te=async(ke,Ge)=>{if(window.confirm(`Are you sure you want to ${Ge} this remittance?`)){we(!0);try{const at=ds(wr,"remittances",ke);await yu(at,{status:Ge,processedAt:new Date,processedBy:Dv.currentUser.uid}),Ve(),alert(`Remittance ${Ge} successfully`)}catch(at){console.error("Error processing remittance:",at),alert("Failed to process remittance")}finally{we(!1)}}};return q.jsxs(Xv,{children:[q.jsx(lA,{title:"Bike Management"}),q.jsxs("div",{className:"rate-management-container",children:[q.jsx("h2",{children:"Rental Rate Management"}),a?q.jsx("p",{children:"Loading..."}):q.jsx(q.Fragment,{children:q.jsx("div",{className:"table-container",children:q.jsxs("table",{className:"rate-table",children:[q.jsx("thead",{children:q.jsxs("tr",{children:[q.jsx("th",{children:"Bike Type"}),q.jsx("th",{children:"Price Per Minute (₱)"}),q.jsx("th",{children:"Actions"})]})}),q.jsx("tbody",{children:t.length>0?t.map(ke=>{var at;const Ge=bD[ke.id]||ke.id;return q.jsxs("tr",{children:[q.jsx("td",{children:Ge}),q.jsx("td",{children:(at=ke.pricePerMinute)==null?void 0:at.toFixed(2)}),q.jsx("td",{children:q.jsxs("button",{className:"edit-btn",onClick:()=>Be(ke),children:[q.jsx(_R,{})," Edit"]})})]},ke.id)}):q.jsx("tr",{children:q.jsx("td",{colSpan:"3",style:{textAlign:"center"},children:"No rental rates available."})})})]})})}),q.jsxs("div",{className:"revenue-section",children:[q.jsx("h3",{children:"Station Revenue"}),q.jsx("div",{className:"controls",children:q.jsxs("div",{className:"time-filter",children:[q.jsx("button",{className:`filter-btn ${j==="all"?"active":""}`,onClick:()=>$("all"),children:"All Time"}),q.jsx("button",{className:`filter-btn ${j==="daily"?"active":""}`,onClick:()=>$("daily"),children:"Today"}),q.jsx("button",{className:`filter-btn ${j==="weekly"?"active":""}`,onClick:()=>$("weekly"),children:"This Week"}),q.jsx("button",{className:`filter-btn ${j==="monthly"?"active":""}`,onClick:()=>$("monthly"),children:"This Month"}),q.jsx("button",{className:`filter-btn ${Fe?"active":""}`,onClick:()=>Ee(!Fe),children:Fe?"Hide Deleted Stations":"Show Deleted Stations"})]})}),q.jsx("div",{className:"table-container",children:q.jsxs("table",{className:"revenue-table",children:[q.jsx("thead",{children:q.jsxs("tr",{children:[q.jsxs("th",{onClick:()=>ze("stationName"),children:["Station Name"," ",ee.key==="stationName"&&(ee.direction==="asc"?"↑":"↓")]}),q.jsxs("th",{onClick:()=>ze("revenue"),children:["Total Revenue (₱)"," ",ee.key==="revenue"&&(ee.direction==="asc"?"↑":"↓")]}),q.jsxs("th",{onClick:()=>ze("rides"),children:["Total Rides"," ",ee.key==="rides"&&(ee.direction==="asc"?"↑":"↓")]})]})}),q.jsxs("tbody",{children:[x.sort((ke,Ge)=>ee.key==="stationName"?ee.direction==="asc"?ke.stationName.localeCompare(Ge.stationName):Ge.stationName.localeCompare(ke.stationName):ee.direction==="asc"?ke[ee.key]-Ge[ee.key]:Ge[ee.key]-ke[ee.key]).map(ke=>q.jsxs("tr",{children:[q.jsx("td",{children:ke.stationName}),q.jsx("td",{children:ke.revenue.toFixed(2)}),q.jsx("td",{children:ke.rides})]},ke.id)),Fe&&oe.sort((ke,Ge)=>ee.key==="stationName"?ee.direction==="asc"?ke.stationName.localeCompare(Ge.stationName):Ge.stationName.localeCompare(ke.stationName):ee.direction==="asc"?ke[ee.key]-Ge[ee.key]:Ge[ee.key]-ke[ee.key]).map(ke=>q.jsxs("tr",{className:"deleted-station",children:[q.jsxs("td",{children:[ke.stationName," (Deleted)"]}),q.jsx("td",{children:ke.revenue.toFixed(2)}),q.jsx("td",{children:ke.rides})]},ke.id)),q.jsxs("tr",{className:"total-row",children:[q.jsx("td",{children:q.jsx("strong",{children:"Total"})}),q.jsx("td",{children:q.jsxs("strong",{children:["₱",H[j].revenue.toFixed(2)]})}),q.jsx("td",{children:q.jsx("strong",{children:H[j].rides})})]})]})]})})]}),q.jsxs("div",{className:"history-section",children:[q.jsxs("div",{className:"history-header",children:[q.jsx("h3",{children:"Rate History"}),q.jsxs("button",{className:"history-toggle-btn",onClick:()=>F(!L),children:[q.jsx(zfe,{})," ",L?"Hide History":"Show History"]})]}),L&&q.jsx("div",{className:"table-container",children:q.jsxs("table",{className:"history-table",children:[q.jsx("thead",{children:q.jsxs("tr",{children:[q.jsx("th",{children:"Date"}),q.jsx("th",{children:"Bike Type"}),q.jsx("th",{children:"Old Price (₱)"}),q.jsx("th",{children:"New Price (₱)"}),q.jsx("th",{children:"Updated By"})]})}),q.jsx("tbody",{children:v.map(ke=>{var Ge;return q.jsxs("tr",{children:[q.jsx("td",{children:mi(ke.timestamp.toDate()).format("MMM D, YYYY HH:mm")}),q.jsx("td",{children:bD[ke.bikeType]||ke.bikeType}),q.jsx("td",{children:(Ge=ke.oldPrice)==null?void 0:Ge.toFixed(2)}),q.jsx("td",{children:ke.newPrice.toFixed(2)}),q.jsx("td",{children:ke.updatedBy})]},ke.id)})})]})})]}),i&&q.jsx("div",{className:"modal-overlay",onClick:qe,children:q.jsxs("div",{className:"modal-content",onClick:ke=>ke.stopPropagation(),children:[q.jsx("h3",{children:"Edit Rental Rate"}),q.jsxs("p",{children:["Bike Type:"," ",q.jsx("strong",{children:bD[i.id]||i.id})]}),q.jsx("label",{children:"Price Per Minute (₱):"}),q.jsx("input",{type:"number",step:"0.01",value:c,onChange:ke=>n(ke.target.value)}),q.jsxs("div",{className:"modal-buttons",children:[q.jsx("button",{className:"save-btn",onClick:be,children:"Save"}),q.jsx("button",{className:"cancel-btn",onClick:qe,children:"Cancel"})]})]})}),q.jsxs("div",{className:"remittance-section",children:[q.jsxs("div",{className:"section-header",children:[q.jsx("h3",{children:"Station Remittances"}),q.jsx("button",{className:"history-toggle-btn",onClick:()=>ge(!me),children:me?"Hide Remittances":"Show Remittances"})]}),me&&q.jsx("div",{className:"table-container",children:q.jsxs("table",{className:"remittance-table",children:[q.jsx("thead",{children:q.jsxs("tr",{children:[q.jsx("th",{children:"Date"}),q.jsx("th",{children:"Station"}),q.jsx("th",{children:"Period"}),q.jsx("th",{children:"Amount (₱)"}),q.jsx("th",{children:"Status"}),q.jsx("th",{children:"Proof"}),q.jsx("th",{children:"Actions"})]})}),q.jsxs("tbody",{children:[fe.map(ke=>{var Ge,at,rt;return q.jsxs("tr",{className:`status-${ke.status}`,children:[q.jsx("td",{children:mi((Ge=ke.dateSubmitted)==null?void 0:Ge.toDate()).format("MMM D, YYYY HH:mm")}),q.jsx("td",{children:ke.stationName}),q.jsxs("td",{children:[mi((at=ke.collectedFrom)==null?void 0:at.toDate()).format("MMM D")," -"," ",mi((rt=ke.collectedTo)==null?void 0:rt.toDate()).format("MMM D, YYYY")]}),q.jsxs("td",{children:["₱",ke.amount.toFixed(2)]}),q.jsx("td",{children:q.jsx("span",{className:`status-badge ${ke.status}`,children:ke.status})}),q.jsx("td",{children:ke.proofOfPayment&&q.jsx("button",{className:"view-proof-btn",onClick:()=>window.open(ke.proofOfPayment,"_blank"),children:"View Proof"})}),q.jsx("td",{children:ke.status==="pending"&&q.jsxs("div",{className:"action-buttons",children:[q.jsx("button",{className:"confirm-btn",onClick:()=>Te(ke.id,"confirmed"),disabled:Re,children:"Confirm"}),q.jsx("button",{className:"reject-btn",onClick:()=>Te(ke.id,"rejected"),disabled:Re,children:"Reject"})]})})]},ke.id)}),fe.length===0&&q.jsx("tr",{children:q.jsx("td",{colSpan:"7",className:"no-data",children:"No remittances found"})})]})]})})]})]})]})};var Mb={exports:{}},Oze=Mb.exports,_H;function Vze(){return _H||(_H=1,function(t,e){(function(a,r){t.exports=r()})(Oze,function(){var a="week",r="year";return function(i,l,c){var n=l.prototype;n.week=function(v){if(v===void 0&&(v=null),v!==null)return this.add(7*(v-this.week()),"day");var R=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var x=c(this).startOf(r).add(1,r).date(R),N=c(this).endOf(a);if(x.isBefore(N))return 1}var L=c(this).startOf(r).date(R).startOf(a).subtract(1,"millisecond"),F=this.diff(L,a,!0);return F<0?c(this).startOf("week").week():Math.ceil(F)},n.weeks=function(v){return v===void 0&&(v=null),this.week(v)}}})}(Mb)),Mb.exports}var zze=Vze();const Dze=ss(zze);var Ib={exports:{}},Mze=Ib.exports,wH;function Ize(){return wH||(wH=1,function(t,e){(function(a,r){t.exports=r()})(Mze,function(){return function(a,r,i){r.prototype.isBetween=function(l,c,n,v){var R=i(l),x=i(c),N=(v=v||"()")[0]==="(",L=v[1]===")";return(N?this.isAfter(R,n):!this.isBefore(R,n))&&(L?this.isBefore(x,n):!this.isAfter(x,n))||(N?this.isBefore(R,n):!this.isAfter(R,n))&&(L?this.isAfter(x,n):!this.isBefore(x,n))}}})}(Ib)),Ib.exports}var Lze=Ize();const Fze=ss(Lze);mi.extend(Dze);mi.extend(Fze);const kze=({text:t})=>{const e=new RegExp("(?<![A-Za-z])(?<!-)(?<!\\/)\\b(\\d+\\.?\\d*)\\b(?![A-Za-z])","g"),a=t.split(e);return q.jsx("span",{children:a.map((r,i)=>e.test(r)?q.jsx("span",{className:"highlighted-number",children:r},i):q.jsx("span",{children:r},i))})},Py=({title:t,analysis:e})=>q.jsxs("div",{className:"analysis-card",children:[q.jsx("h3",{children:t}),q.jsx("p",{children:q.jsx(kze,{text:e})})]}),Uze=()=>{var ge,Re,we,Ve;const[t,e]=ie.useState([]),[a,r]=ie.useState({calories:[],distance:[],duration:[],carbonSaved:[]}),[i,l]=ie.useState([]),[c,n]=ie.useState([]),[v,R]=ie.useState("monthly"),[x,N]=ie.useState([]),[L,F]=ie.useState([]),j=[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"}],$=["#009C8C","#4CAF50","#2196F3","#FFA726","#FF5722","#9C27B0","#673AB7","#3F51B5","#00BCD4","#795548"],H=(oe,_e,Fe)=>{const Ee=mi(),ze=new Map;return _e.filter(je=>{const Ue=mi(je.rideEndedAt);switch(Fe){case"daily":return Ue.isSame(Ee,"day");case"weekly":return Ue.isAfter(Ee.subtract(1,"week"));case"monthly":return Ue.isAfter(Ee.subtract(1,"month"));default:return!0}}).forEach(je=>{je.startStation&&ze.set(je.startStation,(ze.get(je.startStation)||0)+1)}),oe.map(je=>({id:je.id,stationName:je.stationName,rides:ze.get(je.id)||0})).sort((je,Ue)=>Ue.rides-je.rides)},W=(oe,_e)=>{const Fe=new Map,Ee=mi();let ze,Se;switch(_e){case"daily":ze=Ee.subtract(6,"day").startOf("day"),Se=Ee.endOf("day");break;case"weekly":ze=Ee.subtract(11,"week").startOf("week"),Se=Ee.endOf("week");break;case"monthly":ze=Ee.subtract(11,"month").startOf("month"),Se=Ee.endOf("month");break;default:const Ue=oe.map($e=>mi($e.rideEndedAt));ze=mi.min(Ue),Se=Ee}let je=ze;for(;je.isBefore(Se);){let Ue;switch(_e){case"daily":Ue=je.format("MMM DD"),je=je.add(1,"day");break;case"weekly":Ue=`Week ${je.week()} - ${je.format("MMM")}`,je=je.add(1,"week");break;case"monthly":Ue=je.format("MMM YYYY"),je=je.add(1,"month");break}Fe.set(Ue,{period:Ue,revenue:0,calories:0,distance:0,duration:0,carbonSaved:0,rides:0})}return oe.forEach(Ue=>{const $e=mi(Ue.rideEndedAt);if($e.isBetween(ze,Se,null,"[]")){let Be;switch(_e){case"daily":Be=$e.format("MMM DD");break;case"weekly":Be=`Week ${$e.week()} - ${$e.format("MMM")}`;break;case"monthly":Be=$e.format("MMM YYYY");break}if(Fe.has(Be)){const qe=Fe.get(Be);qe.revenue+=Number(Ue.amountPaid||0),qe.calories+=Number(Ue.caloriesBurned||0),qe.distance+=Number(Ue.distance||0),qe.duration+=Number(Ue.duration||0)/60,qe.carbonSaved+=Number(Ue.carbonSaved||0),qe.rides+=1}}}),Array.from(Fe.values()).map(Ue=>({...Ue,avgCalories:Ue.rides>0?Ue.calories/Ue.rides:0,avgDistance:Ue.rides>0?Ue.distance/Ue.rides:0,avgDuration:Ue.rides>0?Ue.duration/Ue.rides:0,avgCarbonSaved:Ue.rides>0?Ue.carbonSaved/Ue.rides:0}))},ee=(oe,_e)=>{const Fe=mi();switch(_e){case"daily":return oe.filter(Ee=>mi(Ee.rideEndedAt).isSame(Fe,"day"));case"weekly":return oe.filter(Ee=>mi(Ee.rideEndedAt).isAfter(Fe.subtract(1,"week")));case"monthly":return oe.filter(Ee=>mi(Ee.rideEndedAt).isAfter(Fe.subtract(1,"month")));default:return oe}},se=(oe,_e)=>{if(!oe||oe.length===0)return"No data available";const Fe=ee(x,v),Ee=Fe.reduce((je,Ue)=>{switch(_e){case"revenue":return je+(Ue.amountPaid||0);case"calories":return je+(Ue.caloriesBurned||0);case"distance":return je+(Ue.distance||0);case"duration":return je+(Ue.duration||0)/60;case"carbonSaved":return je+(Ue.carbonSaved||0);default:return je}},0),ze=Fe.length,Se=v==="daily"?"today":v==="weekly"?"this week":"this month";switch(_e){case"revenue":const je=ze>0?Ee/ze:0;return`The EcoRide Parada system generated ₱${Ee.toFixed(2)} in revenue ${Se}. 
                With ${ze} rides completed, residents spent an average of ₱${je.toFixed(2)} per trip. 
                These funds support system maintenance and expansion, creating sustainable transportation
                infrastructure for Barangay Parada while providing an affordable alternative to motor vehicles.`;case"calories":const Ue=Ee*.26;return`Barangay Parada residents burned ${Ee.toFixed(0)} calories through cycling ${Se}, 
                equivalent to approximately ${Math.round(Ee/100)} healthy meals worth of energy. 
                This active transportation promotes community health and wellness, generating estimated healthcare 
                cost savings of ₱${Ue.toFixed(2)} through preventative exercise. Regular cyclists in Parada 
                report improved cardiovascular health and reduced stress levels, creating a healthier community.`;case"distance":const Be=Ee*.25;return`EcoRide users covered ${Ee.toFixed(2)} km by bike ${Se}. 
                Based on Metro Manila traffic research, each bike takes up only 0.25 car units 
                of road space, representing approximately ${Math.round(Be)} car-equivalent 
                trips removed from local roads. This efficient use of road space helps reduce 
                traffic congestion in Barangay Parada's busiest areas.`;case"duration":const qe=Math.floor(Ee/60),be=Math.floor(Ee%60),Te=ze*5,ke=Ee*.3;return`Barangay Parada cyclists spent ${qe} hours and ${be} minutes riding ${Se}. 
                By choosing EcoRide over cars, residents collectively saved approximately ${Math.round(Te/60+ke)} hours 
                on parking and traffic delays. This represents significant quality-of-life improvement for
                community members while reducing road congestion by an estimated ${Math.round(ze*.8)} vehicles during 
                peak hours, improving mobility for all Parada residents.`;case"carbonSaved":const Ge=(Ee/21).toFixed(1),at=(Ee/.251).toFixed(1),rt=(Ee*.05).toFixed(1);return`The EcoRide system prevented ${Ee.toFixed(2)} kg of CO2 emissions in Barangay Parada ${Se}, 
                equivalent to the yearly CO2 absorption of ${Ge} trees. This translates to approximately 
                ${at} km of car travel removed from local roads and an estimated ${rt}% 
                improvement in local air quality. Every ride contributes to Parada's sustainability goals, helping 
                transform the barangay into a model for eco-friendly transportation in Metro Manila.`;default:return"No analysis available"}},fe=(oe,_e)=>{const Fe=new Map;return mi(),oe.forEach(Ee=>{const ze=mi(Ee.timestamp);let Se;switch(_e){case"daily":Se=ze.format("MMM DD");break;case"weekly":Se=`Week ${ze.week()} - ${ze.format("MMM")}`;break;case"monthly":Se=ze.format("MMM YYYY");break}if(!Fe.has(Se))Fe.set(Se,{period:Se,averageRating:Ee.rating,totalRatings:1});else{const je=Fe.get(Se);je.averageRating=(je.averageRating*je.totalRatings+Ee.rating)/(je.totalRatings+1),je.totalRatings+=1}}),Array.from(Fe.values())},le=async()=>{try{const oe=Dn(wr,"ride_history"),Fe=(await Hi(oe)).docs.map(at=>{var rt;return{id:at.id,...at.data(),rideEndedAt:(rt=at.data().rideEndedAt)!=null&&rt.toDate?at.data().rideEndedAt.toDate():new Date(at.data().rideEndedAt.seconds*1e3)}});N(Fe);const Ee=Dn(wr,"stations"),Se=(await Hi(Ee)).docs.map(at=>({id:at.id,stationName:at.data().stationName})),je=H(Se,Fe,v);n(je);const Ue=W(Fe,"monthly"),$e=W(Fe,"weekly"),Be=W(Fe,"daily");l({monthly:Ue,weekly:$e,daily:Be});const qe=new Map;Se.forEach(at=>{qe.set(at.id,{stationName:at.stationName,revenue:0,rides:0})}),Fe.forEach(at=>{if(at.startStation){const rt=qe.get(at.startStation);rt&&(rt.revenue+=Number(at.amountPaid),rt.rides+=1)}});const be=Array.from(qe.values()).sort((at,rt)=>rt.revenue-at.revenue);e(be);const Te=Dn(wr,"ride_ratings"),Ge=(await Hi(Te)).docs.map(at=>{var rt;return{id:at.id,...at.data(),timestamp:(rt=at.data().timestamp)!=null&&rt.toDate?at.data().timestamp.toDate():new Date(at.data().timestamp.seconds*1e3)}});F(Ge)}catch(oe){console.error("Error fetching analytics:",oe)}};ie.useEffect(()=>{le()},[v]);const me=(oe,_e)=>oe[_e]||[];return q.jsxs(Xv,{children:[q.jsx(lA,{})," ",q.jsxs("div",{className:"analytics-container",children:[q.jsxs("div",{className:"analytics-header",children:[q.jsx("h1",{children:"System Analytics"}),q.jsx("div",{className:"time-filter",children:j.map(oe=>q.jsx("button",{className:`filter-btn ${v===oe.value?"active":""}`,onClick:()=>R(oe.value),children:oe.label},oe.value))})]}),q.jsxs("div",{className:"charts-grid",children:[q.jsxs("div",{className:"chart-section full-width",children:[q.jsx("h2",{children:"Revenue Trend"}),q.jsxs("div",{className:"chart-with-analysis",children:[q.jsx(Fp,{width:"100%",height:500,children:q.jsxs(Kw,{data:me(i,v),margin:{top:20,right:30,left:20,bottom:90},children:[q.jsx("defs",{children:q.jsxs("linearGradient",{id:"revenueGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[q.jsx("stop",{offset:"5%",stopColor:"#009C8C",stopOpacity:.8}),q.jsx("stop",{offset:"95%",stopColor:"#009C8C",stopOpacity:.1})]})}),q.jsx(jp,{strokeDasharray:"3 3"}),q.jsx(gd,{dataKey:"period",angle:-45,textAnchor:"end",height:80,interval:0}),q.jsx(yd,{tickFormatter:oe=>`₱${oe.toFixed(0)}`,label:{value:"Revenue (₱)",angle:-90,position:"insideLeft",offset:10,dy:50}}),q.jsx(gu,{formatter:oe=>[`₱${oe.toFixed(2)}`,"Revenue"]}),q.jsx(hf,{verticalAlign:"bottom",height:36,wrapperStyle:{paddingTop:"20px",marginBottom:"10px"}}),q.jsx(mf,{type:"monotone",dataKey:"revenue",stroke:"#009C8C",fill:"url(#revenueGradient)",name:"Revenue",dot:{r:4}})]})}),q.jsx(Py,{title:"Revenue Analysis",analysis:se(me(i,v),"revenue")})]})]}),q.jsxs("div",{className:"chart-section full-width",children:[q.jsx("h2",{children:"Revenue by Station"}),q.jsxs("div",{className:"chart-with-analysis",children:[q.jsx(Fp,{width:"100%",height:500,children:q.jsxs(UI,{data:t.filter(oe=>oe.revenue>0),margin:{top:20,right:30,left:20,bottom:120},children:[q.jsx(jp,{strokeDasharray:"3 3"}),q.jsx(gd,{dataKey:"stationName",angle:-45,textAnchor:"end",height:100,interval:0,tick:{fontSize:12}}),q.jsx(yd,{tickFormatter:oe=>`₱${oe.toFixed(2)}`}),q.jsx(gu,{formatter:oe=>`₱${oe.toFixed(2)}`}),q.jsx(Yp,{dataKey:"revenue",children:t.filter(oe=>oe.revenue>0).map((oe,_e)=>q.jsx(D_,{fill:$[_e%$.length]},`cell-${_e}`))})]})}),q.jsx(Py,{title:"Station Revenue Analysis",analysis:`The top earning station is ${((ge=t[0])==null?void 0:ge.stationName)||"N/A"} with ₱${(Re=t[0])==null?void 0:Re.revenue.toFixed(2)} in revenue. There are ${t.filter(oe=>oe.revenue>0).length} stations generating revenue, with a total system revenue of ₱${t.reduce((oe,_e)=>oe+_e.revenue,0).toFixed(2)}.`})]})]}),q.jsxs("div",{className:"chart-section full-width",children:[q.jsx("h2",{children:"Average Calories Burned"}),q.jsxs("div",{className:"chart-with-analysis",children:[q.jsx(Fp,{width:"100%",height:500,children:q.jsxs(Kw,{data:me(i,v),margin:{top:20,right:30,left:20,bottom:70},children:[q.jsx("defs",{children:q.jsxs("linearGradient",{id:"caloriesGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[q.jsx("stop",{offset:"5%",stopColor:"#FF5722",stopOpacity:.8}),q.jsx("stop",{offset:"95%",stopColor:"#FF5722",stopOpacity:.1})]})}),q.jsx(jp,{strokeDasharray:"3 3"}),q.jsx(gd,{dataKey:"period"}),q.jsx(yd,{}),q.jsx(gu,{}),q.jsx(hf,{}),q.jsx(mf,{type:"monotone",dataKey:"calories",stroke:"#FF5722",fill:"url(#caloriesGradient)",name:"Calories Burned",dot:{fill:"#FF5722"}})]})}),q.jsx(Py,{title:"Health Impact Analysis",analysis:se(me(i,v),"calories")})]})]}),q.jsxs("div",{className:"chart-section full-width",children:[q.jsx("h2",{children:"Average Distance Covered"}),q.jsxs("div",{className:"chart-with-analysis",children:[q.jsx(Fp,{width:"100%",height:500,children:q.jsxs(Kw,{data:me(i,v),margin:{top:20,right:30,left:20,bottom:70},children:[q.jsx("defs",{children:q.jsxs("linearGradient",{id:"distanceGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[q.jsx("stop",{offset:"5%",stopColor:"#2196F3",stopOpacity:.8}),q.jsx("stop",{offset:"95%",stopColor:"#2196F3",stopOpacity:.1})]})}),q.jsx(jp,{strokeDasharray:"3 3"}),q.jsx(gd,{dataKey:"period"}),q.jsx(yd,{}),q.jsx(gu,{}),q.jsx(hf,{}),q.jsx(mf,{type:"monotone",dataKey:"distance",stroke:"#2196F3",fill:"url(#distanceGradient)",name:"Distance (km)",dot:{fill:"#2196F3"}})]})}),q.jsx(Py,{title:"Distance Analysis",analysis:se(me(i,v),"distance")})]})]}),q.jsxs("div",{className:"chart-section full-width",children:[q.jsx("h2",{children:"Average Ride Duration"}),q.jsxs("div",{className:"chart-with-analysis",children:[q.jsx(Fp,{width:"100%",height:500,children:q.jsxs(Kw,{data:me(i,v),margin:{top:20,right:30,left:20,bottom:70},children:[q.jsx("defs",{children:q.jsxs("linearGradient",{id:"durationGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[q.jsx("stop",{offset:"5%",stopColor:"#9C27B0",stopOpacity:.8}),q.jsx("stop",{offset:"95%",stopColor:"#9C27B0",stopOpacity:.1})]})}),q.jsx(jp,{strokeDasharray:"3 3"}),q.jsx(gd,{dataKey:"period"}),q.jsx(yd,{}),q.jsx(gu,{formatter:(oe,_e)=>[`${oe.toFixed(0)} minutes`,"Duration"]}),q.jsx(hf,{}),q.jsx(mf,{type:"monotone",dataKey:"duration",stroke:"#9C27B0",fill:"url(#durationGradient)",name:"Duration (minutes)",dot:{fill:"#9C27B0"}})]})}),q.jsx(Py,{title:"Duration Analysis",analysis:se(me(i,v),"duration")})]})]}),q.jsxs("div",{className:"chart-section full-width",children:[q.jsx("h2",{children:"Average CO2 Saved"}),q.jsxs("div",{className:"chart-with-analysis",children:[q.jsx(Fp,{width:"100%",height:500,children:q.jsxs(Kw,{data:me(i,v),margin:{top:20,right:30,left:20,bottom:70},children:[q.jsx("defs",{children:q.jsxs("linearGradient",{id:"co2Gradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[q.jsx("stop",{offset:"5%",stopColor:"#4CAF50",stopOpacity:.8}),q.jsx("stop",{offset:"95%",stopColor:"#4CAF50",stopOpacity:.1})]})}),q.jsx(jp,{strokeDasharray:"3 3"}),q.jsx(gd,{dataKey:"period"}),q.jsx(yd,{}),q.jsx(gu,{}),q.jsx(hf,{}),q.jsx(mf,{type:"monotone",dataKey:"carbonSaved",stroke:"#4CAF50",fill:"url(#co2Gradient)",name:"CO2 Saved (kg)",dot:{fill:"#4CAF50"}})]})}),q.jsx(Py,{title:"Environmental Impact Analysis",analysis:se(me(i,v),"carbonSaved")})]})]}),q.jsxs("div",{className:"chart-section full-width",children:[q.jsx("h2",{children:"User Ride Ratings"}),q.jsxs("div",{className:"chart-with-analysis",children:[q.jsx(Fp,{width:"100%",height:500,children:q.jsxs(iEe,{data:fe(L,v),margin:{top:20,right:30,left:20,bottom:70},children:[q.jsx(jp,{strokeDasharray:"3 3"}),q.jsx(gd,{dataKey:"period",angle:-45,textAnchor:"end",height:80,interval:0}),q.jsx(yd,{domain:[0,5],ticks:[0,1,2,3,4,5],label:{value:"Average Rating",angle:-90,position:"insideLeft",offset:10}}),q.jsx(gu,{formatter:(oe,_e)=>[_e==="averageRating"?`${oe.toFixed(2)} stars`:oe,_e==="averageRating"?"Average Rating":"Total Ratings"]}),q.jsx(hf,{}),q.jsx(Yp,{dataKey:"totalRatings",fill:"#82ca9d",name:"Total Ratings",opacity:.3}),q.jsx(Yv,{type:"monotone",dataKey:"averageRating",stroke:"#ff7300",name:"Average Rating",strokeWidth:2,dot:{fill:"#ff7300"}})]})}),q.jsx(Py,{title:"User Satisfaction Analysis",analysis:(()=>{const oe=fe(L,v);if(oe.length===0)return"No ratings data available for this period.";const _e=oe.reduce((ze,Se)=>ze+Se.totalRatings,0),Fe=oe.reduce((ze,Se)=>ze+Se.averageRating*Se.totalRatings,0)/_e;return`Users submitted ${_e} ride ratings ${v==="daily"?"today":v==="weekly"?"this week":"this month"}, with an average satisfaction score of ${Fe.toFixed(2)} out of 5 stars. ${Fe>=4.5?"Users are highly satisfied with the service.":Fe>=4?"Users are generally satisfied with the service.":Fe>=3.5?"Users find the service acceptable but there's room for improvement.":"User satisfaction needs attention and improvement measures should be considered."}`})()})]})]}),q.jsxs("div",{className:"chart-section full-width",children:[q.jsxs("h2",{children:["Most Popular Stations (",v,")"]}),q.jsxs("div",{className:"chart-with-analysis",children:[q.jsx(Fp,{width:"100%",height:600,children:q.jsxs(nEe,{children:[q.jsx(qg,{data:H(c,x,v).filter(oe=>oe.rides>0).slice(0,5),dataKey:"rides",nameKey:"stationName",cx:"50%",cy:"50%",outerRadius:180,label:({name:oe,percent:_e})=>`${oe} ${(_e*100).toFixed(0)}%`,children:H(c,x,v).filter(oe=>oe.rides>0).slice(0,5).map((oe,_e)=>q.jsx(D_,{fill:$[_e%$.length]},`cell-${_e}`))}),q.jsx(gu,{formatter:(oe,_e)=>[`${oe} rides`,_e]}),q.jsx(hf,{verticalAlign:"bottom",height:36})]})}),q.jsx(Py,{title:`Station Usage Analysis (${v})`,analysis:`For this ${v} period, the top stations account for ${H(c,x,v).filter(oe=>oe.rides>0).slice(0,5).reduce((oe,_e)=>oe+_e.rides,0)} rides out of ${x.length} total system rides. ${((we=H(c,x,v)[0])==null?void 0:we.stationName)||"N/A"} is currently the most active station with ${((Ve=H(c,x,v)[0])==null?void 0:Ve.rides)||0} rides in this period.`})]})]})]})]})]})},Bze=()=>{const[t,e]=ie.useState([]),[a,r]=ie.useState({}),[i,l]=ie.useState({}),[c,n]=ie.useState({}),[v,R]=ie.useState(!0),[x,N]=ie.useState("all"),[L,F]=ie.useState({key:"rideEndedAt",direction:"desc"}),[j,$]=ie.useState(1),H=10,[W,ee]=ie.useState({totalRides:0,totalRevenue:0,totalDistance:0,totalDuration:0,totalCalories:0,totalCarbonSaved:0}),[se,fe]=ie.useState("all");ie.useEffect(()=>{le()},[]);const le=async()=>{try{const Se=Dn(wr,"bikes"),je=await Hi(Se),Ue={};je.docs.forEach(lt=>{Ue[lt.id]=lt.data()}),r(Ue);const $e=Dn(wr,"approved_users"),Be=await Hi($e),qe={};Be.docs.forEach(lt=>{const ot=lt.data();qe[lt.id]=`${ot.first_name} ${ot.surname}`}),l(qe);const be=Dn(wr,"stations"),Te=await Hi(be),ke={};Te.docs.forEach(lt=>{ke[lt.id]=lt.data().stationName}),n(ke);const Ge=Dn(wr,"ride_history"),rt=(await Hi(Ge)).docs.map(lt=>{var ot;return{id:lt.id,...lt.data(),rideEndedAt:((ot=lt.data().rideEndedAt)==null?void 0:ot.toDate())||new Date(lt.data().rideEndedAt.seconds*1e3)}});e(rt),R(!1)}catch(Se){console.error("Error fetching data:",Se),R(!1)}},me=Se=>{const je=mi();switch(x){case"today":return Se.filter(Ue=>mi(Ue.rideEndedAt).isSame(je,"day"));case"week":return Se.filter(Ue=>mi(Ue.rideEndedAt).isAfter(je.subtract(1,"week")));case"month":return Se.filter(Ue=>mi(Ue.rideEndedAt).isAfter(je.subtract(1,"month")));default:return Se}},ge=Se=>se==="all"?Se:Se.filter(je=>je.endStation===se);ie.useEffect(()=>{const je=me(t).reduce((Ue,$e)=>({totalRides:Ue.totalRides+1,totalRevenue:Ue.totalRevenue+($e.amountPaid||0),totalDistance:Ue.totalDistance+($e.distance||0),totalDuration:Ue.totalDuration+($e.duration||0),totalCalories:Ue.totalCalories+($e.caloriesBurned||0),totalCarbonSaved:Ue.totalCarbonSaved+($e.carbonSaved||0)}),{totalRides:0,totalRevenue:0,totalDistance:0,totalDuration:0,totalCalories:0,totalCarbonSaved:0});ee(je)},[t,x]);const Re=Se=>{F({key:Se,direction:L.key===Se&&L.direction==="asc"?"desc":"asc"})},we=Ot.useMemo(()=>{const Se=me(t);return[...ge(Se)].sort((Ue,$e)=>L.key==="rideEndedAt"?L.direction==="asc"?Ue[L.key]-$e[L.key]:$e[L.key]-Ue[L.key]:L.direction==="asc"?String(Ue[L.key]).localeCompare(String($e[L.key])):String($e[L.key]).localeCompare(String(Ue[L.key])))},[t,x,se,L]),Ve=we.slice((j-1)*H,j*H),oe=Math.ceil(we.length/H),_e=we.reduce((Se,je)=>({totalRides:Se.totalRides+1,totalRevenue:Se.totalRevenue+(je.amountPaid||0),totalDistance:Se.totalDistance+(je.distance||0),totalDuration:Se.totalDuration+(je.duration||0),totalCalories:Se.totalCalories+(je.caloriesBurned||0),totalCarbonSaved:Se.totalCarbonSaved+(je.carbonSaved||0)}),{totalRides:0,totalRevenue:0,totalDistance:0,totalDuration:0,totalCalories:0,totalCarbonSaved:0}),Fe=se==="all"?{text:"All Stations",bold:!0,margin:[0,0,0,8]}:{text:`Station: ${c[se]||"Unknown"}`,bold:!0,margin:[0,0,0,8]},Ee=()=>new Promise(Se=>{const je=new window.Image;je.crossOrigin="Anonymous",je.onload=function(){const Ue=document.createElement("canvas");Ue.width=je.width,Ue.height=je.height,Ue.getContext("2d").drawImage(je,0,0),Se(Ue.toDataURL("image/png"))},je.src="/assets/ecoridelogo.png"}),ze=async()=>{const Se=await Ee(),je=(await zT(async()=>{const{default:qe}=await import("./pdfmake-BcaF2lo9.js").then(be=>be.p);return{default:qe}},[])).default,Ue=(await zT(async()=>{const{default:qe}=await import("./vfs_fonts-DfJL2KFt.js").then(be=>be.v);return{default:qe}},[])).default;je.vfs=Ue.vfs;const Be={pageMargins:[40,40,40,40],content:[{columns:[[{text:"EcoRide Parada",style:"header"},{text:"Ride Activity and Revenue Report",style:"subheader"},Fe],[{image:Se,width:80,alignment:"right",margin:[0,0,0,0]}]]},{text:[`This report summarizes ride activity and revenue for ${x==="all"?"All Time":x==="today"?"Today":x==="week"?"This Week":"This Month"} at EcoRide Parada.
`,"Total rides: ",{text:_e.totalRides.toString(),bold:!0},`
`,"Total revenue: ₱",{text:_e.totalRevenue.toFixed(2),bold:!0},`
`,"Total distance: ",{text:_e.totalDistance.toFixed(2),bold:!0},` km
`,"Total duration: ",{text:Math.round(_e.totalDuration/60).toString(),bold:!0},` min
`,"Calories burned: ",{text:Math.round(_e.totalCalories).toString(),bold:!0},`
`,"CO₂ saved: ",{text:_e.totalCarbonSaved.toFixed(2),bold:!0},` kg
`],style:"summary"},{text:"Rides",style:"tableHeader",margin:[0,10,0,4]},{table:{headerRows:1,widths:["auto","*","*","auto","auto","auto","auto","auto","*","*"],body:[[{text:"Date",bold:!0},{text:"User",bold:!0},{text:"Bike",bold:!0},{text:"Revenue",bold:!0},{text:"Duration (min)",bold:!0},{text:"Distance (km)",bold:!0},{text:"Calories",bold:!0},{text:"CO₂ Saved (kg)",bold:!0},{text:"Start Station",bold:!0},{text:"End Station",bold:!0}],...we.map(qe=>{var be,Te,ke,Ge;return[mi(qe.rideEndedAt).format("YYYY-MM-DD HH:mm"),i[qe.userId]||"Unknown",((be=a[qe.bikeId])==null?void 0:be.bikeName)||"Unknown",((Te=qe.amountPaid)==null?void 0:Te.toFixed(2))||0,Math.round(qe.duration/60)||0,((ke=qe.distance)==null?void 0:ke.toFixed(2))||0,Math.round(qe.caloriesBurned)||0,((Ge=qe.carbonSaved)==null?void 0:Ge.toFixed(2))||0,c[qe.startStation]||"Unknown",c[qe.endStation]||"Unknown"]})]},fontSize:9,layout:"lightHorizontalLines"},{text:`Report generated on: ${mi().format("YYYY-MM-DD HH:mm")}`,style:"footer",margin:[0,20,0,0]}],styles:{header:{fontSize:18,bold:!0,alignment:"left"},subheader:{fontSize:13,bold:!0,margin:[0,4,0,8]},summary:{fontSize:10,margin:[0,0,0,8]},tableHeader:{fontSize:11,bold:!0},footer:{fontSize:8,color:"gray"}}};je.createPdf(Be).download("ecoride_parada_ride_report.pdf")};return q.jsxs(Xv,{children:[q.jsx(lA,{})," ",q.jsxs("div",{className:"ride-details-container",children:[q.jsx("h1",{children:"Ride Details"}),q.jsxs("div",{className:"controls",children:[q.jsxs("div",{className:"time-filter",children:[q.jsx("button",{className:`filter-btn ${x==="all"?"active":""}`,onClick:()=>N("all"),children:"All Time"}),q.jsx("button",{className:`filter-btn ${x==="today"?"active":""}`,onClick:()=>N("today"),children:"Today"}),q.jsx("button",{className:`filter-btn ${x==="week"?"active":""}`,onClick:()=>N("week"),children:"This Week"}),q.jsx("button",{className:`filter-btn ${x==="month"?"active":""}`,onClick:()=>N("month"),children:"This Month"})]}),q.jsxs("div",{className:"controls-right",children:[q.jsx("div",{className:"station-filter",children:q.jsxs("select",{value:se,onChange:Se=>fe(Se.target.value),className:"filter-select",children:[q.jsx("option",{value:"all",children:"All End Stations"}),Object.entries(c).map(([Se,je])=>q.jsx("option",{value:Se,children:je},Se))]})}),q.jsx("button",{className:"generate-report-btn",onClick:ze,children:"Generate PDF"})]})]}),q.jsxs("div",{className:"stats-grid",children:[q.jsxs("div",{className:"stat-card",children:[q.jsx("h3",{children:"Total Rides"}),q.jsx("p",{children:W.totalRides})]}),q.jsxs("div",{className:"stat-card",children:[q.jsx("h3",{children:"Total Revenue"}),q.jsxs("p",{children:["₱",W.totalRevenue.toFixed(2)]})]}),q.jsxs("div",{className:"stat-card",children:[q.jsx("h3",{children:"Total Distance"}),q.jsxs("p",{children:[W.totalDistance.toFixed(2)," km"]})]}),q.jsxs("div",{className:"stat-card",children:[q.jsx("h3",{children:"Total Duration"}),q.jsxs("p",{children:[Math.round(W.totalDuration/60)," min"]})]}),q.jsxs("div",{className:"stat-card",children:[q.jsx("h3",{children:"Calories Burned"}),q.jsxs("p",{children:[Math.round(W.totalCalories)," cal"]})]}),q.jsxs("div",{className:"stat-card",children:[q.jsx("h3",{children:"CO2 Saved"}),q.jsxs("p",{children:[W.totalCarbonSaved.toFixed(2)," kg"]})]})]}),v?q.jsx("div",{className:"loading",children:"Loading..."}):q.jsxs(q.Fragment,{children:[q.jsx("div",{className:"station-totals",children:se!=="all"&&q.jsxs("div",{className:"selected-station-stats",children:[q.jsxs("h3",{children:["Statistics for ",c[se]]}),q.jsxs("div",{className:"stats-row",children:[q.jsxs("span",{children:["Total Rides: ",we.length]}),q.jsxs("span",{children:["Total Revenue: ₱",we.reduce((Se,je)=>Se+(je.amountPaid||0),0).toFixed(2)]}),q.jsxs("span",{children:["Total Distance:"," ",we.reduce((Se,je)=>Se+(je.distance||0),0).toFixed(2)," ","km"]})]})]})}),q.jsx("div",{className:"table-container",children:q.jsxs("table",{children:[q.jsx("thead",{children:q.jsxs("tr",{children:[q.jsxs("th",{onClick:()=>Re("rideEndedAt"),children:["Date"," ",L.key==="rideEndedAt"&&(L.direction==="asc"?"↑":"↓")]}),q.jsxs("th",{onClick:()=>Re("userId"),children:["User"," ",L.key==="userId"&&(L.direction==="asc"?"↑":"↓")]}),q.jsxs("th",{onClick:()=>Re("bikeId"),children:["Bike"," ",L.key==="bikeId"&&(L.direction==="asc"?"↑":"↓")]}),q.jsxs("th",{onClick:()=>Re("duration"),children:["Duration"," ",L.key==="duration"&&(L.direction==="asc"?"↑":"↓")]}),q.jsxs("th",{onClick:()=>Re("distance"),children:["Distance"," ",L.key==="distance"&&(L.direction==="asc"?"↑":"↓")]}),q.jsxs("th",{onClick:()=>Re("caloriesBurned"),children:["Calories"," ",L.key==="caloriesBurned"&&(L.direction==="asc"?"↑":"↓")]}),q.jsxs("th",{onClick:()=>Re("carbonSaved"),children:["CO2 Saved"," ",L.key==="carbonSaved"&&(L.direction==="asc"?"↑":"↓")]}),q.jsxs("th",{onClick:()=>Re("amountPaid"),children:["Amount"," ",L.key==="amountPaid"&&(L.direction==="asc"?"↑":"↓")]}),q.jsx("th",{children:"Start Station"}),q.jsx("th",{children:"End Station"})]})}),q.jsx("tbody",{children:Ve.map(Se=>{var je,Ue,$e,Be;return q.jsxs("tr",{children:[q.jsx("td",{children:mi(Se.rideEndedAt).format("MMM D, YYYY HH:mm")}),q.jsx("td",{children:i[Se.userId]||"Unknown User"}),q.jsx("td",{children:((je=a[Se.bikeId])==null?void 0:je.bikeName)||"Unknown Bike"}),q.jsxs("td",{children:[Math.round(Se.duration/60)," min"]}),q.jsxs("td",{children:[((Ue=Se.distance)==null?void 0:Ue.toFixed(2))||0," km"]}),q.jsxs("td",{children:[Math.round(Se.caloriesBurned)||0," cal"]}),q.jsxs("td",{children:[(($e=Se.carbonSaved)==null?void 0:$e.toFixed(2))||0," kg"]}),q.jsxs("td",{children:["₱",((Be=Se.amountPaid)==null?void 0:Be.toFixed(2))||0]}),q.jsx("td",{children:c[Se.startStation]||"Unknown Station"}),q.jsx("td",{children:c[Se.endStation]||"Unknown Station"})]},Se.id)})})]})}),q.jsxs("div",{className:"pagination-controls",children:[q.jsx("button",{className:"pagination-button",onClick:()=>$(Se=>Math.max(1,Se-1)),disabled:j===1,children:"Previous"}),q.jsxs("span",{className:"pagination-info",children:["Page ",j," of ",oe]}),q.jsx("button",{className:"pagination-button",onClick:()=>$(Se=>Math.min(oe,Se+1)),disabled:j===oe,children:"Next"})]})]})]})]})};function IT(t){"@babel/helpers - typeof";return IT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},IT(t)}function jze(t,e){if(IT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(IT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gze(t){var e=jze(t,"string");return IT(e)=="symbol"?e:e+""}function ja(t,e,a){return(e=Gze(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function iae(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xD,RH;function Zze(){if(RH)return xD;RH=1;var t=function(a,r,i,l,c,n,v,R){if(!a){var x;if(r===void 0)x=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var N=[i,l,c,n,v,R],L=0;x=new Error(r.replace(/%s/g,function(){return N[L++]})),x.name="Invariant Violation"}throw x.framesToPop=1,x}};return xD=t,xD}var qze=Zze(),Hu=iae(qze),Si=ie.createContext(null);function Hze(){Hu(!!ie.useContext,"useGoogleMap is React hook and requires React version 16.8+");var t=ie.useContext(Si);return Hu(!!t,"useGoogleMap needs a GoogleMap available up in the tree"),t}function $ze(t,e,a){return Object.keys(t).reduce(function(i,l){return e(i,t[l],l)},a)}function Kze(t,e){Object.keys(t).forEach(a=>e(t[a],a))}function Wze(t,e,a,r){var i={},l=(c,n)=>{var v=a[n];v!==e[n]&&(i[n]=v,c(r,v))};return Kze(t,l),i}function Yze(t,e,a){var r=$ze(a,function(l,c,n){return typeof t[n]=="function"&&l.push(google.maps.event.addListener(e,c,t[n])),l},[]);return r}function Xze(t){google.maps.event.removeListener(t)}function $i(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];t.forEach(Xze)}function Zi(t){var{updaterMap:e,eventMap:a,prevProps:r,nextProps:i,instance:l}=t,c=Yze(i,l,a);return Wze(e,r,i,l),c}var TH={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},CH={extraMapTypes(t,e){e.forEach(function(r,i){t.mapTypes.set(String(i),r)})},center(t,e){t.setCenter(e)},clickableIcons(t,e){t.setClickableIcons(e)},heading(t,e){t.setHeading(e)},mapTypeId(t,e){t.setMapTypeId(e)},options(t,e){t.setOptions(e)},streetView(t,e){t.setStreetView(e)},tilt(t,e){t.setTilt(e)},zoom(t,e){t.setZoom(e)}};function Jze(t){var{children:e,options:a,id:r,mapContainerStyle:i,mapContainerClassName:l,center:c,onClick:n,onDblClick:v,onDrag:R,onDragEnd:x,onDragStart:N,onMouseMove:L,onMouseOut:F,onMouseOver:j,onMouseDown:$,onMouseUp:H,onRightClick:W,onCenterChanged:ee,onLoad:se,onUnmount:fe}=t,[le,me]=ie.useState(null),ge=ie.useRef(null),[Re,we]=ie.useState(null),[Ve,oe]=ie.useState(null),[_e,Fe]=ie.useState(null),[Ee,ze]=ie.useState(null),[Se,je]=ie.useState(null),[Ue,$e]=ie.useState(null),[Be,qe]=ie.useState(null),[be,Te]=ie.useState(null),[ke,Ge]=ie.useState(null),[at,rt]=ie.useState(null),[lt,ot]=ie.useState(null),[ve,Vt]=ie.useState(null);return ie.useEffect(()=>{a&&le!==null&&le.setOptions(a)},[le,a]),ie.useEffect(()=>{le!==null&&typeof c<"u"&&le.setCenter(c)},[le,c]),ie.useEffect(()=>{le&&v&&(Ve!==null&&google.maps.event.removeListener(Ve),oe(google.maps.event.addListener(le,"dblclick",v)))},[v]),ie.useEffect(()=>{le&&x&&(_e!==null&&google.maps.event.removeListener(_e),Fe(google.maps.event.addListener(le,"dragend",x)))},[x]),ie.useEffect(()=>{le&&N&&(Ee!==null&&google.maps.event.removeListener(Ee),ze(google.maps.event.addListener(le,"dragstart",N)))},[N]),ie.useEffect(()=>{le&&$&&(Se!==null&&google.maps.event.removeListener(Se),je(google.maps.event.addListener(le,"mousedown",$)))},[$]),ie.useEffect(()=>{le&&L&&(Ue!==null&&google.maps.event.removeListener(Ue),$e(google.maps.event.addListener(le,"mousemove",L)))},[L]),ie.useEffect(()=>{le&&F&&(Be!==null&&google.maps.event.removeListener(Be),qe(google.maps.event.addListener(le,"mouseout",F)))},[F]),ie.useEffect(()=>{le&&j&&(be!==null&&google.maps.event.removeListener(be),Te(google.maps.event.addListener(le,"mouseover",j)))},[j]),ie.useEffect(()=>{le&&H&&(ke!==null&&google.maps.event.removeListener(ke),Ge(google.maps.event.addListener(le,"mouseup",H)))},[H]),ie.useEffect(()=>{le&&W&&(at!==null&&google.maps.event.removeListener(at),rt(google.maps.event.addListener(le,"rightclick",W)))},[W]),ie.useEffect(()=>{le&&n&&(lt!==null&&google.maps.event.removeListener(lt),ot(google.maps.event.addListener(le,"click",n)))},[n]),ie.useEffect(()=>{le&&R&&(ve!==null&&google.maps.event.removeListener(ve),Vt(google.maps.event.addListener(le,"drag",R)))},[R]),ie.useEffect(()=>{le&&ee&&(Re!==null&&google.maps.event.removeListener(Re),we(google.maps.event.addListener(le,"center_changed",ee)))},[n]),ie.useEffect(()=>{var Bt=ge.current===null?null:new google.maps.Map(ge.current,a);return me(Bt),Bt!==null&&se&&se(Bt),()=>{Bt!==null&&fe&&fe(Bt)}},[]),q.jsx("div",{id:r,ref:ge,style:i,className:l,children:q.jsx(Si.Provider,{value:le,children:le!==null?e:null})})}ie.memo(Jze);class Qze extends ie.PureComponent{constructor(){super(...arguments),ja(this,"state",{map:null}),ja(this,"registeredEvents",[]),ja(this,"mapRef",null),ja(this,"getInstance",()=>this.mapRef===null?null:new google.maps.Map(this.mapRef,this.props.options)),ja(this,"panTo",e=>{var a=this.getInstance();a&&a.panTo(e)}),ja(this,"setMapCallback",()=>{this.state.map!==null&&this.props.onLoad&&this.props.onLoad(this.state.map)}),ja(this,"getRef",e=>{this.mapRef=e})}componentDidMount(){var e=this.getInstance();this.registeredEvents=Zi({updaterMap:CH,eventMap:TH,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{map:e}},this.setMapCallback)}componentDidUpdate(e){this.state.map!==null&&($i(this.registeredEvents),this.registeredEvents=Zi({updaterMap:CH,eventMap:TH,prevProps:e,nextProps:this.props,instance:this.state.map}))}componentWillUnmount(){this.state.map!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),$i(this.registeredEvents))}render(){return q.jsx("div",{id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName,children:q.jsx(Si.Provider,{value:this.state.map,children:this.state.map!==null?this.props.children:null})})}}function SH(t,e,a,r,i,l,c){try{var n=t[l](c),v=n.value}catch(R){return void a(R)}n.done?e(v):Promise.resolve(v).then(r,i)}function sae(t){return function(){var e=this,a=arguments;return new Promise(function(r,i){var l=t.apply(e,a);function c(v){SH(l,r,i,c,n,"next",v)}function n(v){SH(l,r,i,c,n,"throw",v)}c(void 0)})}}function oae(t){var{googleMapsApiKey:e,googleMapsClientId:a,version:r="weekly",language:i,region:l,libraries:c,channel:n,mapIds:v,authReferrerPolicy:R}=t,x=[];return Hu(e&&a||!(e&&a),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),e?x.push("key=".concat(e)):a&&x.push("client=".concat(a)),r&&x.push("v=".concat(r)),i&&x.push("language=".concat(i)),l&&x.push("region=".concat(l)),c&&c.length&&x.push("libraries=".concat(c.sort().join(","))),n&&x.push("channel=".concat(n)),v&&v.length&&x.push("map_ids=".concat(v.join(","))),R&&x.push("auth_referrer_policy=".concat(R)),x.push("loading=async"),x.push("callback=initMap"),"https://maps.googleapis.com/maps/api/js?".concat(x.join("&"))}var Zy=typeof document<"u";function lae(t){var{url:e,id:a,nonce:r}=t;return Zy?new Promise(function(l,c){var n=document.getElementById(a),v=window;if(n){var R=n.getAttribute("data-state");if(n.src===e&&R!=="error"){if(R==="ready")return l(a);var x=v.initMap,N=n.onerror;v.initMap=function(){x&&x(),l(a)},n.onerror=function(F){N&&N(F),c(F)};return}else n.remove()}var L=document.createElement("script");L.type="text/javascript",L.src=e,L.id=a,L.async=!0,L.nonce=r||"",L.onerror=function(j){L.setAttribute("data-state","error"),c(j)},v.initMap=function(){L.setAttribute("data-state","ready"),l(a)},document.head.appendChild(L)}).catch(i=>{throw console.error("injectScript error: ",i),i}):Promise.reject(new Error("document is undefined"))}function bH(t){var e=t.href;return e&&(e.indexOf("https://fonts.googleapis.com/css?family=Roboto")===0||e.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text")===0)?!0:t.tagName.toLowerCase()==="style"&&t.styleSheet&&t.styleSheet.cssText&&t.styleSheet.cssText.replace(`\r
`,"").indexOf(".gm-style")===0?(t.styleSheet.cssText="",!0):t.tagName.toLowerCase()==="style"&&t.innerHTML&&t.innerHTML.replace(`\r
`,"").indexOf(".gm-style")===0?(t.innerHTML="",!0):t.tagName.toLowerCase()==="style"&&!t.styleSheet&&!t.innerHTML}function Y4(){var t=document.getElementsByTagName("head")[0];if(t){var e=t.insertBefore.bind(t);t.insertBefore=function(i,l){return bH(i)||Reflect.apply(e,t,[i,l]),i};var a=t.appendChild.bind(t);t.appendChild=function(i){return bH(i)||Reflect.apply(a,t,[i]),i}}}var eR=!1;function uae(){return q.jsx("div",{children:"Loading..."})}var LT={id:"script-loader",version:"weekly"};class e5e extends ie.PureComponent{constructor(){super(...arguments),ja(this,"check",null),ja(this,"state",{loaded:!1}),ja(this,"cleanupCallback",()=>{delete window.google.maps,this.injectScript()}),ja(this,"isCleaningUp",sae(function*(){function e(a){if(!eR)a();else if(Zy)var r=window.setInterval(function(){eR||(window.clearInterval(r),a())},1)}return new Promise(e)})),ja(this,"cleanup",()=>{eR=!0;var e=document.getElementById(this.props.id);e&&e.parentNode&&e.parentNode.removeChild(e),Array.prototype.slice.call(document.getElementsByTagName("script")).filter(function(r){return typeof r.src=="string"&&r.src.includes("maps.googleapis")}).forEach(function(r){r.parentNode&&r.parentNode.removeChild(r)}),Array.prototype.slice.call(document.getElementsByTagName("link")).filter(function(r){return r.href==="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"}).forEach(function(r){r.parentNode&&r.parentNode.removeChild(r)}),Array.prototype.slice.call(document.getElementsByTagName("style")).filter(function(r){return r.innerText!==void 0&&r.innerText.length>0&&r.innerText.includes(".gm-")}).forEach(function(r){r.parentNode&&r.parentNode.removeChild(r)})}),ja(this,"injectScript",()=>{this.props.preventGoogleFontsLoading&&Y4(),Hu(!!this.props.id,'LoadScript requires "id" prop to be a string: %s',this.props.id);var e={id:this.props.id,nonce:this.props.nonce,url:oae(this.props)};lae(e).then(()=>{this.props.onLoad&&this.props.onLoad(),this.setState(function(){return{loaded:!0}})}).catch(a=>{this.props.onError&&this.props.onError(a),console.error(`
          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(this.props.googleMapsApiKey||"-",") or Client ID (").concat(this.props.googleMapsClientId||"-",`) to <LoadScript />
          Otherwise it is a Network issue.
        `))})}),ja(this,"getRef",e=>{this.check=e})}componentDidMount(){if(Zy){if(window.google&&window.google.maps&&!eR){console.error("google api is already presented");return}this.isCleaningUp().then(this.injectScript).catch(function(a){console.error("Error at injecting script after cleaning up: ",a)})}}componentDidUpdate(e){this.props.libraries!==e.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),Zy&&e.language!==this.props.language&&(this.cleanup(),this.setState(function(){return{loaded:!1}},this.cleanupCallback))}componentWillUnmount(){if(Zy){this.cleanup();var e=()=>{this.check||(delete window.google,eR=!1)};window.setTimeout(e,1),this.props.onUnmount&&this.props.onUnmount()}}render(){return q.jsxs(q.Fragment,{children:[q.jsx("div",{ref:this.getRef}),this.state.loaded?this.props.children:this.props.loadingElement||q.jsx(uae,{})]})}}ja(e5e,"defaultProps",LT);function t5e(t,e){if(t==null)return{};var a={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;a[r]=t[r]}return a}function X4(t,e){if(t==null)return{};var a,r,i=t5e(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(r=0;r<l.length;r++)a=l[r],e.includes(a)||{}.propertyIsEnumerable.call(t,a)&&(i[a]=t[a])}return i}var xH;function a5e(t){var{id:e=LT.id,version:a=LT.version,nonce:r,googleMapsApiKey:i,googleMapsClientId:l,language:c,region:n,libraries:v,preventGoogleFontsLoading:R,channel:x,mapIds:N,authReferrerPolicy:L}=t,F=ie.useRef(!1),[j,$]=ie.useState(!1),[H,W]=ie.useState(void 0);ie.useEffect(function(){return F.current=!0,()=>{F.current=!1}},[]),ie.useEffect(function(){Zy&&R&&Y4()},[R]),ie.useEffect(function(){j&&Hu(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")},[j]);var ee=oae({version:a,googleMapsApiKey:i,googleMapsClientId:l,language:c,region:n,libraries:v,channel:x,mapIds:N,authReferrerPolicy:L});ie.useEffect(function(){if(!Zy)return;function le(){F.current&&($(!0),xH=ee)}if(window.google&&window.google.maps&&xH===ee){le();return}lae({id:e,url:ee,nonce:r}).then(le).catch(function(ge){F.current&&W(ge),console.warn(`
        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(i||"-",") or Client ID (").concat(l||"-",`)
        Otherwise it is a Network issue.
      `)),console.error(ge)})},[e,ee,r]);var se=ie.useRef(void 0);return ie.useEffect(function(){se.current&&v!==se.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),se.current=v},[v]),{isLoaded:j,loadError:H,url:ee}}var r5e=["loadingElement","onLoad","onError","onUnmount","children"],n5e=q.jsx(uae,{});function i5e(t){var{loadingElement:e,onLoad:a,onError:r,onUnmount:i,children:l}=t,c=X4(t,r5e),{isLoaded:n,loadError:v}=a5e(c);return ie.useEffect(function(){n&&typeof a=="function"&&a()},[n,a]),ie.useEffect(function(){v&&typeof r=="function"&&r(v)},[v,r]),ie.useEffect(function(){return()=>{i&&i()}},[i]),n?l:e||n5e}ie.memo(i5e);function s5e(t,e,a,r){function i(l){return l instanceof a?l:new a(function(c){c(l)})}return new(a||(a=Promise))(function(l,c){function n(x){try{R(r.next(x))}catch(N){c(N)}}function v(x){try{R(r.throw(x))}catch(N){c(N)}}function R(x){x.done?l(x.value):i(x.value).then(n,v)}R((r=r.apply(t,[])).next())})}function o5e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var l5e=function t(e,a){if(e===a)return!0;if(e&&a&&typeof e=="object"&&typeof a=="object"){if(e.constructor!==a.constructor)return!1;var r,i,l;if(Array.isArray(e)){if(r=e.length,r!=a.length)return!1;for(i=r;i--!==0;)if(!t(e[i],a[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===a.source&&e.flags===a.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===a.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===a.toString();if(l=Object.keys(e),r=l.length,r!==Object.keys(a).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(a,l[i]))return!1;for(i=r;i--!==0;){var c=l[i];if(!t(e[c],a[c]))return!1}return!0}return e!==e&&a!==a},u5e=o5e(l5e),PH="__googleMapsScriptId",i_;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(i_||(i_={}));class uv{constructor(e){var{apiKey:a,authReferrerPolicy:r,channel:i,client:l,id:c=PH,language:n,libraries:v=[],mapIds:R,nonce:x,region:N,retries:L=3,url:F="https://maps.googleapis.com/maps/api/js",version:j}=e;if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=a,this.authReferrerPolicy=r,this.channel=i,this.client=l,this.id=c||PH,this.language=n,this.libraries=v,this.mapIds=R,this.nonce=x,this.region=N,this.retries=L,this.url=F,this.version=j,uv.instance){if(!u5e(this.options,uv.instance.options))throw new Error("Loader must not be called again with different options. ".concat(JSON.stringify(this.options)," !== ").concat(JSON.stringify(uv.instance.options)));return uv.instance}uv.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?i_.FAILURE:this.done?i_.SUCCESS:this.loading?i_.LOADING:i_.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){var e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+="&key=".concat(this.apiKey)),this.channel&&(e+="&channel=".concat(this.channel)),this.client&&(e+="&client=".concat(this.client)),this.libraries.length>0&&(e+="&libraries=".concat(this.libraries.join(","))),this.language&&(e+="&language=".concat(this.language)),this.region&&(e+="&region=".concat(this.region)),this.version&&(e+="&v=".concat(this.version)),this.mapIds&&(e+="&map_ids=".concat(this.mapIds.join(","))),this.authReferrerPolicy&&(e+="&auth_referrer_policy=".concat(this.authReferrerPolicy)),e}deleteScript(){var e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,a)=>{this.loadCallback(r=>{r?a(r.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,a;if(document.getElementById(this.id)){this.callback();return}var r={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(r).forEach(l=>!r[l]&&delete r[l]),!((a=(e=window==null?void 0:window.google)===null||e===void 0?void 0:e.maps)===null||a===void 0)&&a.importLibrary||(l=>{var c,n,v,R="The Google Maps JavaScript API",x="google",N="importLibrary",L="__ib__",F=document,j=window;j=j[x]||(j[x]={});var $=j.maps||(j.maps={}),H=new Set,W=new URLSearchParams,ee=()=>c||(c=new Promise((se,fe)=>s5e(this,void 0,void 0,function*(){var le;yield n=F.createElement("script"),n.id=this.id,W.set("libraries",[...H]+"");for(v in l)W.set(v.replace(/[A-Z]/g,me=>"_"+me[0].toLowerCase()),l[v]);W.set("callback",x+".maps."+L),n.src=this.url+"?"+W,$[L]=se,n.onerror=()=>c=fe(Error(R+" could not load.")),n.nonce=this.nonce||((le=F.querySelector("script[nonce]"))===null||le===void 0?void 0:le.nonce)||"",F.head.append(n)})));$[N]?console.warn(R+" only loads once. Ignoring:",l):$[N]=function(se){for(var fe=arguments.length,le=new Array(fe>1?fe-1:0),me=1;me<fe;me++)le[me-1]=arguments[me];return H.add(se)&&ee().then(()=>$[N](se,...le))}})(r);var i=this.libraries.map(l=>this.importLibrary(l));i.length||i.push(this.importLibrary("core")),Promise.all(i).then(()=>this.callback(),l=>{var c=new ErrorEvent("error",{error:l});this.loadErrorCallback(c)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){var a=this.errors.length*Math.pow(2,this.errors.length);console.error("Failed to load Google Maps script, retrying in ".concat(a," ms.")),setTimeout(()=>{this.deleteScript(),this.setScript()},a)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}var c5e=["maps"];function d5e(t){var{id:e=LT.id,version:a=LT.version,nonce:r,googleMapsApiKey:i,language:l,region:c,libraries:n=c5e,preventGoogleFontsLoading:v,mapIds:R,authReferrerPolicy:x}=t,N=ie.useRef(!1),[L,F]=ie.useState(!1),[j,$]=ie.useState(void 0);ie.useEffect(function(){return N.current=!0,()=>{N.current=!1}},[]);var H=ie.useMemo(()=>new uv({id:e,apiKey:i,version:a,libraries:n,language:l||"en",region:c||"US",mapIds:R||[],nonce:r||"",authReferrerPolicy:x||"origin"}),[e,i,a,n,l,c,R,r,x]);ie.useEffect(function(){L||H.load().then(()=>{N.current&&F(!0)}).catch(se=>{$(se)})},[]),ie.useEffect(()=>{Zy&&v&&Y4()},[v]);var W=ie.useRef();return ie.useEffect(()=>{W.current&&n!==W.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),W.current=n},[n]),{isLoaded:L,loadError:j}}function EH(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function y2(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?EH(Object(a),!0).forEach(function(r){ja(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):EH(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var NH={},OH={options(t,e){t.setOptions(e)}};function h5e(t){var{options:e,onLoad:a,onUnmount:r}=t,i=ie.useContext(Si),[l,c]=ie.useState(null);return ie.useEffect(()=>{l!==null&&l.setMap(i)},[i]),ie.useEffect(()=>{e&&l!==null&&l.setOptions(e)},[l,e]),ie.useEffect(()=>{var n=new google.maps.TrafficLayer(y2(y2({},e),{},{map:i}));return c(n),a&&a(n),()=>{l!==null&&(r&&r(l),l.setMap(null))}},[]),null}ie.memo(h5e);class f5e extends ie.PureComponent{constructor(){super(...arguments),ja(this,"state",{trafficLayer:null}),ja(this,"setTrafficLayerCallback",()=>{this.state.trafficLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.trafficLayer)}),ja(this,"registeredEvents",[])}componentDidMount(){var e=new google.maps.TrafficLayer(y2(y2({},this.props.options),{},{map:this.context}));this.registeredEvents=Zi({updaterMap:OH,eventMap:NH,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{trafficLayer:e}},this.setTrafficLayerCallback)}componentDidUpdate(e){this.state.trafficLayer!==null&&($i(this.registeredEvents),this.registeredEvents=Zi({updaterMap:OH,eventMap:NH,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))}componentWillUnmount(){this.state.trafficLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),$i(this.registeredEvents),this.state.trafficLayer.setMap(null))}render(){return null}}ja(f5e,"contextType",Si);function p5e(t){var{onLoad:e,onUnmount:a}=t,r=ie.useContext(Si),[i,l]=ie.useState(null);return ie.useEffect(()=>{i!==null&&i.setMap(r)},[r]),ie.useEffect(()=>{var c=new google.maps.BicyclingLayer;return l(c),c.setMap(r),e&&e(c),()=>{c!==null&&(a&&a(c),c.setMap(null))}},[]),null}ie.memo(p5e);class m5e extends ie.PureComponent{constructor(){super(...arguments),ja(this,"state",{bicyclingLayer:null}),ja(this,"setBicyclingLayerCallback",()=>{this.state.bicyclingLayer!==null&&(this.state.bicyclingLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.bicyclingLayer))})}componentDidMount(){var e=new google.maps.BicyclingLayer;this.setState(()=>({bicyclingLayer:e}),this.setBicyclingLayerCallback)}componentWillUnmount(){this.state.bicyclingLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}render(){return null}}ja(m5e,"contextType",Si);function g5e(t){var{onLoad:e,onUnmount:a}=t,r=ie.useContext(Si),[i,l]=ie.useState(null);return ie.useEffect(()=>{i!==null&&i.setMap(r)},[r]),ie.useEffect(()=>{var c=new google.maps.TransitLayer;return l(c),c.setMap(r),e&&e(c),()=>{i!==null&&(a&&a(i),i.setMap(null))}},[]),null}ie.memo(g5e);class y5e extends ie.PureComponent{constructor(){super(...arguments),ja(this,"state",{transitLayer:null}),ja(this,"setTransitLayerCallback",()=>{this.state.transitLayer!==null&&(this.state.transitLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.transitLayer))})}componentDidMount(){var e=new google.maps.TransitLayer;this.setState(function(){return{transitLayer:e}},this.setTransitLayerCallback)}componentWillUnmount(){this.state.transitLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}render(){return null}}ja(y5e,"contextType",Si);function VH(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function A2(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?VH(Object(a),!0).forEach(function(r){ja(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):VH(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var zH={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},DH={drawingMode(t,e){t.setDrawingMode(e)},options(t,e){t.setOptions(e)}};function A5e(t){var{options:e,drawingMode:a,onCircleComplete:r,onMarkerComplete:i,onOverlayComplete:l,onPolygonComplete:c,onPolylineComplete:n,onRectangleComplete:v,onLoad:R,onUnmount:x}=t,N=ie.useContext(Si),[L,F]=ie.useState(null),[j,$]=ie.useState(null),[H,W]=ie.useState(null),[ee,se]=ie.useState(null),[fe,le]=ie.useState(null),[me,ge]=ie.useState(null),[Re,we]=ie.useState(null);return ie.useEffect(()=>{L!==null&&L.setMap(N)},[N]),ie.useEffect(()=>{e&&L!==null&&L.setOptions(e)},[L,e]),ie.useEffect(()=>{L!==null&&L.setDrawingMode(a??null)},[L,a]),ie.useEffect(()=>{L&&r&&(j!==null&&google.maps.event.removeListener(j),$(google.maps.event.addListener(L,"circlecomplete",r)))},[L,r]),ie.useEffect(()=>{L&&i&&(H!==null&&google.maps.event.removeListener(H),W(google.maps.event.addListener(L,"markercomplete",i)))},[L,i]),ie.useEffect(()=>{L&&l&&(ee!==null&&google.maps.event.removeListener(ee),se(google.maps.event.addListener(L,"overlaycomplete",l)))},[L,l]),ie.useEffect(()=>{L&&c&&(fe!==null&&google.maps.event.removeListener(fe),le(google.maps.event.addListener(L,"polygoncomplete",c)))},[L,c]),ie.useEffect(()=>{L&&n&&(me!==null&&google.maps.event.removeListener(me),ge(google.maps.event.addListener(L,"polylinecomplete",n)))},[L,n]),ie.useEffect(()=>{L&&v&&(Re!==null&&google.maps.event.removeListener(Re),we(google.maps.event.addListener(L,"rectanglecomplete",v)))},[L,v]),ie.useEffect(()=>{Hu(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var Ve=new google.maps.drawing.DrawingManager(A2(A2({},e),{},{map:N}));return a&&Ve.setDrawingMode(a),r&&$(google.maps.event.addListener(Ve,"circlecomplete",r)),i&&W(google.maps.event.addListener(Ve,"markercomplete",i)),l&&se(google.maps.event.addListener(Ve,"overlaycomplete",l)),c&&le(google.maps.event.addListener(Ve,"polygoncomplete",c)),n&&ge(google.maps.event.addListener(Ve,"polylinecomplete",n)),v&&we(google.maps.event.addListener(Ve,"rectanglecomplete",v)),F(Ve),R&&R(Ve),()=>{L!==null&&(j&&google.maps.event.removeListener(j),H&&google.maps.event.removeListener(H),ee&&google.maps.event.removeListener(ee),fe&&google.maps.event.removeListener(fe),me&&google.maps.event.removeListener(me),Re&&google.maps.event.removeListener(Re),x&&x(L),L.setMap(null))}},[]),null}ie.memo(A5e);class cae extends ie.PureComponent{constructor(e){super(e),ja(this,"registeredEvents",[]),ja(this,"state",{drawingManager:null}),ja(this,"setDrawingManagerCallback",()=>{this.state.drawingManager!==null&&this.props.onLoad&&this.props.onLoad(this.state.drawingManager)}),Hu(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing)}componentDidMount(){var e=new google.maps.drawing.DrawingManager(A2(A2({},this.props.options),{},{map:this.context}));this.registeredEvents=Zi({updaterMap:DH,eventMap:zH,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{drawingManager:e}},this.setDrawingManagerCallback)}componentDidUpdate(e){this.state.drawingManager!==null&&($i(this.registeredEvents),this.registeredEvents=Zi({updaterMap:DH,eventMap:zH,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))}componentWillUnmount(){this.state.drawingManager!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),$i(this.registeredEvents),this.state.drawingManager.setMap(null))}render(){return null}}ja(cae,"contextType",Si);function MH(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function __(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?MH(Object(a),!0).forEach(function(r){ja(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):MH(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var IH={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},LH={animation(t,e){t.setAnimation(e)},clickable(t,e){t.setClickable(e)},cursor(t,e){t.setCursor(e)},draggable(t,e){t.setDraggable(e)},icon(t,e){t.setIcon(e)},label(t,e){t.setLabel(e)},map(t,e){t.setMap(e)},opacity(t,e){t.setOpacity(e)},options(t,e){t.setOptions(e)},position(t,e){t.setPosition(e)},shape(t,e){t.setShape(e)},title(t,e){t.setTitle(e)},visible(t,e){t.setVisible(e)},zIndex(t,e){t.setZIndex(e)}},v2={};function v5e(t){var{position:e,options:a,clusterer:r,noClustererRedraw:i,children:l,draggable:c,visible:n,animation:v,clickable:R,cursor:x,icon:N,label:L,opacity:F,shape:j,title:$,zIndex:H,onClick:W,onDblClick:ee,onDrag:se,onDragEnd:fe,onDragStart:le,onMouseOut:me,onMouseOver:ge,onMouseUp:Re,onMouseDown:we,onRightClick:Ve,onClickableChanged:oe,onCursorChanged:_e,onAnimationChanged:Fe,onDraggableChanged:Ee,onFlatChanged:ze,onIconChanged:Se,onPositionChanged:je,onShapeChanged:Ue,onTitleChanged:$e,onVisibleChanged:Be,onZindexChanged:qe,onLoad:be,onUnmount:Te}=t,ke=ie.useContext(Si),[Ge,at]=ie.useState(null),[rt,lt]=ie.useState(null),[ot,ve]=ie.useState(null),[Vt,Bt]=ie.useState(null),[wa,It]=ie.useState(null),[$t,wt]=ie.useState(null),[hr,ba]=ie.useState(null),[Pa,Ja]=ie.useState(null),[or,lr]=ie.useState(null),[Tr,ka]=ie.useState(null),[kr,nn]=ie.useState(null),[wn,un]=ie.useState(null),[va,$a]=ie.useState(null),[la,Ya]=ie.useState(null),[yr,Tn]=ie.useState(null),[Qr,cn]=ie.useState(null),[$r,br]=ie.useState(null),[Fi,yi]=ie.useState(null),[oi,Cs]=ie.useState(null),[ga,pr]=ie.useState(null),[Kr,ti]=ie.useState(null),[Rn,Zt]=ie.useState(null);ie.useEffect(()=>{Ge!==null&&Ge.setMap(ke)},[ke]),ie.useEffect(()=>{typeof a<"u"&&Ge!==null&&Ge.setOptions(a)},[Ge,a]),ie.useEffect(()=>{typeof c<"u"&&Ge!==null&&Ge.setDraggable(c)},[Ge,c]),ie.useEffect(()=>{e&&Ge!==null&&Ge.setPosition(e)},[Ge,e]),ie.useEffect(()=>{typeof n<"u"&&Ge!==null&&Ge.setVisible(n)},[Ge,n]),ie.useEffect(()=>{Ge==null||Ge.setAnimation(v)},[Ge,v]),ie.useEffect(()=>{Ge&&R!==void 0&&Ge.setClickable(R)},[Ge,R]),ie.useEffect(()=>{Ge&&x!==void 0&&Ge.setCursor(x)},[Ge,x]),ie.useEffect(()=>{Ge&&N!==void 0&&Ge.setIcon(N)},[Ge,N]),ie.useEffect(()=>{Ge&&L!==void 0&&Ge.setLabel(L)},[Ge,L]),ie.useEffect(()=>{Ge&&F!==void 0&&Ge.setOpacity(F)},[Ge,F]),ie.useEffect(()=>{Ge&&j!==void 0&&Ge.setShape(j)},[Ge,j]),ie.useEffect(()=>{Ge&&$!==void 0&&Ge.setTitle($)},[Ge,$]),ie.useEffect(()=>{Ge&&H!==void 0&&Ge.setZIndex(H)},[Ge,H]),ie.useEffect(()=>{Ge&&ee&&(rt!==null&&google.maps.event.removeListener(rt),lt(google.maps.event.addListener(Ge,"dblclick",ee)))},[ee]),ie.useEffect(()=>{Ge&&fe&&(ot!==null&&google.maps.event.removeListener(ot),ve(google.maps.event.addListener(Ge,"dragend",fe)))},[fe]),ie.useEffect(()=>{Ge&&le&&(Vt!==null&&google.maps.event.removeListener(Vt),Bt(google.maps.event.addListener(Ge,"dragstart",le)))},[le]),ie.useEffect(()=>{Ge&&we&&(wa!==null&&google.maps.event.removeListener(wa),It(google.maps.event.addListener(Ge,"mousedown",we)))},[we]),ie.useEffect(()=>{Ge&&me&&($t!==null&&google.maps.event.removeListener($t),wt(google.maps.event.addListener(Ge,"mouseout",me)))},[me]),ie.useEffect(()=>{Ge&&ge&&(hr!==null&&google.maps.event.removeListener(hr),ba(google.maps.event.addListener(Ge,"mouseover",ge)))},[ge]),ie.useEffect(()=>{Ge&&Re&&(Pa!==null&&google.maps.event.removeListener(Pa),Ja(google.maps.event.addListener(Ge,"mouseup",Re)))},[Re]),ie.useEffect(()=>{Ge&&Ve&&(or!==null&&google.maps.event.removeListener(or),lr(google.maps.event.addListener(Ge,"rightclick",Ve)))},[Ve]),ie.useEffect(()=>{Ge&&W&&(Tr!==null&&google.maps.event.removeListener(Tr),ka(google.maps.event.addListener(Ge,"click",W)))},[W]),ie.useEffect(()=>{Ge&&se&&(kr!==null&&google.maps.event.removeListener(kr),nn(google.maps.event.addListener(Ge,"drag",se)))},[se]),ie.useEffect(()=>{Ge&&oe&&(wn!==null&&google.maps.event.removeListener(wn),un(google.maps.event.addListener(Ge,"clickable_changed",oe)))},[oe]),ie.useEffect(()=>{Ge&&_e&&(va!==null&&google.maps.event.removeListener(va),$a(google.maps.event.addListener(Ge,"cursor_changed",_e)))},[_e]),ie.useEffect(()=>{Ge&&Fe&&(la!==null&&google.maps.event.removeListener(la),Ya(google.maps.event.addListener(Ge,"animation_changed",Fe)))},[Fe]),ie.useEffect(()=>{Ge&&Ee&&(yr!==null&&google.maps.event.removeListener(yr),Tn(google.maps.event.addListener(Ge,"draggable_changed",Ee)))},[Ee]),ie.useEffect(()=>{Ge&&ze&&(Qr!==null&&google.maps.event.removeListener(Qr),cn(google.maps.event.addListener(Ge,"flat_changed",ze)))},[ze]),ie.useEffect(()=>{Ge&&Se&&($r!==null&&google.maps.event.removeListener($r),br(google.maps.event.addListener(Ge,"icon_changed",Se)))},[Se]),ie.useEffect(()=>{Ge&&je&&(Fi!==null&&google.maps.event.removeListener(Fi),yi(google.maps.event.addListener(Ge,"position_changed",je)))},[je]),ie.useEffect(()=>{Ge&&Ue&&(oi!==null&&google.maps.event.removeListener(oi),Cs(google.maps.event.addListener(Ge,"shape_changed",Ue)))},[Ue]),ie.useEffect(()=>{Ge&&$e&&(ga!==null&&google.maps.event.removeListener(ga),pr(google.maps.event.addListener(Ge,"title_changed",$e)))},[$e]),ie.useEffect(()=>{Ge&&Be&&(Kr!==null&&google.maps.event.removeListener(Kr),ti(google.maps.event.addListener(Ge,"visible_changed",Be)))},[Be]),ie.useEffect(()=>{Ge&&qe&&(Rn!==null&&google.maps.event.removeListener(Rn),Zt(google.maps.event.addListener(Ge,"zindex_changed",qe)))},[qe]),ie.useEffect(()=>{var Ie=__(__(__({},a||v2),r?v2:{map:ke}),{},{position:e}),He=new google.maps.Marker(Ie);return r?r.addMarker(He,!!i):He.setMap(ke),e&&He.setPosition(e),typeof n<"u"&&He.setVisible(n),typeof c<"u"&&He.setDraggable(c),typeof R<"u"&&He.setClickable(R),typeof x=="string"&&He.setCursor(x),N&&He.setIcon(N),typeof L<"u"&&He.setLabel(L),typeof F<"u"&&He.setOpacity(F),j&&He.setShape(j),typeof $=="string"&&He.setTitle($),typeof H=="number"&&He.setZIndex(H),ee&&lt(google.maps.event.addListener(He,"dblclick",ee)),fe&&ve(google.maps.event.addListener(He,"dragend",fe)),le&&Bt(google.maps.event.addListener(He,"dragstart",le)),we&&It(google.maps.event.addListener(He,"mousedown",we)),me&&wt(google.maps.event.addListener(He,"mouseout",me)),ge&&ba(google.maps.event.addListener(He,"mouseover",ge)),Re&&Ja(google.maps.event.addListener(He,"mouseup",Re)),Ve&&lr(google.maps.event.addListener(He,"rightclick",Ve)),W&&ka(google.maps.event.addListener(He,"click",W)),se&&nn(google.maps.event.addListener(He,"drag",se)),oe&&un(google.maps.event.addListener(He,"clickable_changed",oe)),_e&&$a(google.maps.event.addListener(He,"cursor_changed",_e)),Fe&&Ya(google.maps.event.addListener(He,"animation_changed",Fe)),Ee&&Tn(google.maps.event.addListener(He,"draggable_changed",Ee)),ze&&cn(google.maps.event.addListener(He,"flat_changed",ze)),Se&&br(google.maps.event.addListener(He,"icon_changed",Se)),je&&yi(google.maps.event.addListener(He,"position_changed",je)),Ue&&Cs(google.maps.event.addListener(He,"shape_changed",Ue)),$e&&pr(google.maps.event.addListener(He,"title_changed",$e)),Be&&ti(google.maps.event.addListener(He,"visible_changed",Be)),qe&&Zt(google.maps.event.addListener(He,"zindex_changed",qe)),at(He),be&&be(He),()=>{rt!==null&&google.maps.event.removeListener(rt),ot!==null&&google.maps.event.removeListener(ot),Vt!==null&&google.maps.event.removeListener(Vt),wa!==null&&google.maps.event.removeListener(wa),$t!==null&&google.maps.event.removeListener($t),hr!==null&&google.maps.event.removeListener(hr),Pa!==null&&google.maps.event.removeListener(Pa),or!==null&&google.maps.event.removeListener(or),Tr!==null&&google.maps.event.removeListener(Tr),wn!==null&&google.maps.event.removeListener(wn),va!==null&&google.maps.event.removeListener(va),la!==null&&google.maps.event.removeListener(la),yr!==null&&google.maps.event.removeListener(yr),Qr!==null&&google.maps.event.removeListener(Qr),$r!==null&&google.maps.event.removeListener($r),Fi!==null&&google.maps.event.removeListener(Fi),ga!==null&&google.maps.event.removeListener(ga),Kr!==null&&google.maps.event.removeListener(Kr),Rn!==null&&google.maps.event.removeListener(Rn),Te&&Te(He),r?r.removeMarker(He,!!i):He&&He.setMap(null)}},[]);var Ne=ie.useMemo(()=>l?ie.Children.map(l,Ie=>{if(!ie.isValidElement(Ie))return Ie;var He=Ie;return ie.cloneElement(He,{anchor:Ge})}):null,[l,Ge]);return q.jsx(q.Fragment,{children:Ne})||null}ie.memo(v5e);class _5e extends ie.PureComponent{constructor(){super(...arguments),ja(this,"registeredEvents",[])}componentDidMount(){var e=this;return sae(function*(){var a=__(__(__({},e.props.options||v2),e.props.clusterer?v2:{map:e.context}),{},{position:e.props.position});e.marker=new google.maps.Marker(a),e.props.clusterer?e.props.clusterer.addMarker(e.marker,!!e.props.noClustererRedraw):e.marker.setMap(e.context),e.registeredEvents=Zi({updaterMap:LH,eventMap:IH,prevProps:{},nextProps:e.props,instance:e.marker}),e.props.onLoad&&e.props.onLoad(e.marker)})()}componentDidUpdate(e){this.marker&&($i(this.registeredEvents),this.registeredEvents=Zi({updaterMap:LH,eventMap:IH,prevProps:e,nextProps:this.props,instance:this.marker}))}componentWillUnmount(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),$i(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}render(){var e=this.props.children?ie.Children.map(this.props.children,a=>{if(!ie.isValidElement(a))return a;var r=a;return ie.cloneElement(r,{anchor:this.marker})}):null;return e||null}}ja(_5e,"contextType",Si);var w5e=function(){function t(e,a){e.getClusterer().extend(t,google.maps.OverlayView),this.cluster=e,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=a,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(e.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return t.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},t.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},t.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var a=this.cluster.getClusterer();if(google.maps.event.trigger(a,"click",this.cluster),google.maps.event.trigger(a,"clusterclick",this.cluster),a.getZoomOnClick()){var r=a.getMaxZoom(),i=this.cluster.getBounds(),l=a.getMap();l!==null&&"fitBounds"in l&&l.fitBounds(i),this.timeOut=window.setTimeout(function(){var c=a.getMap();if(c!==null){"fitBounds"in c&&c.fitBounds(i);var n=c.getZoom()||0;r!==null&&n>r&&c.setZoom(r+1)}},100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},t.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},t.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},t.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),(e=this.getPanes())===null||e===void 0||e.overlayMouseTarget.appendChild(this.div);var a=this.getMap();a!==null&&(this.boundsChangedListener=google.maps.event.addListener(a,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),this.boundsChangedListener!==null&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),this.timeOut!==null&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},t.prototype.draw=function(){if(this.visible&&this.div!==null&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=e!==null?"".concat(e.y,"px"):"0",this.div.style.left=e!==null?"".concat(e.x,"px"):"0"}},t.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},t.prototype.show=function(){var e,a,r,i,l,c;if(this.div&&this.center){var n=this.sums===null||typeof this.sums.title>"u"||this.sums.title===""?this.cluster.getClusterer().getTitle():this.sums.title,v=this.backgroundPosition.split(" "),R=parseInt(((e=v[0])===null||e===void 0?void 0:e.replace(/^\s+|\s+$/g,""))||"0",10),x=parseInt(((a=v[1])===null||a===void 0?void 0:a.replace(/^\s+|\s+$/g,""))||"0",10),N=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(N!==null?"".concat(N.y,"px"):"0","; left: ").concat(N!==null?"".concat(N.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var L=document.createElement("img");L.alt=n,L.src=this.url,L.width=this.width,L.height=this.height,L.setAttribute("style","position: absolute; top: ".concat(x,"px; left: ").concat(R,"px")),this.cluster.getClusterer().enableRetinaIcons||(L.style.clip="rect(-".concat(x,"px, -").concat(R+this.width,"px, -").concat(x+this.height,", -").concat(R,")"));var F=document.createElement("div");F.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),!((r=this.sums)===null||r===void 0)&&r.text&&(F.innerText="".concat((i=this.sums)===null||i===void 0?void 0:i.text)),!((l=this.sums)===null||l===void 0)&&l.html&&(F.innerHTML="".concat((c=this.sums)===null||c===void 0?void 0:c.html)),this.div.innerHTML="",this.div.appendChild(L),this.div.appendChild(F),this.div.title=n,this.div.style.display=""}this.visible=!0},t.prototype.useStyle=function(e){this.sums=e;var a=this.cluster.getClusterer().getStyles(),r=a[Math.min(a.length-1,Math.max(0,e.index-1))];r&&(this.url=r.url,this.height=r.height,this.width=r.width,r.className&&(this.className="".concat(this.clusterClassName," ").concat(r.className)),this.anchorText=r.anchorText||[0,0],this.anchorIcon=r.anchorIcon||[this.height/2,this.width/2],this.textColor=r.textColor||"black",this.textSize=r.textSize||11,this.textDecoration=r.textDecoration||"none",this.fontWeight=r.fontWeight||"bold",this.fontStyle=r.fontStyle||"normal",this.fontFamily=r.fontFamily||"Arial,sans-serif",this.backgroundPosition=r.backgroundPosition||"0 0")},t.prototype.setCenter=function(e){this.center=e},t.prototype.getPosFromLatLng=function(e){var a=this.getProjection().fromLatLngToDivPixel(e);return a!==null&&(a.x-=this.anchorIcon[1],a.y-=this.anchorIcon[0]),a},t}(),R5e=function(){function t(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new w5e(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return t.prototype.getSize=function(){return this.markers.length},t.prototype.getMarkers=function(){return this.markers},t.prototype.getCenter=function(){return this.center},t.prototype.getMap=function(){return this.map},t.prototype.getClusterer=function(){return this.markerClusterer},t.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),a=this.getMarkers(),r=0,i=a;r<i.length;r++){var l=i[r],c=l.getPosition();c&&e.extend(c)}return e},t.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},t.prototype.addMarker=function(e){var a;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter){var r=e.getPosition();if(r){var i=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(i-1)+r.lat())/i,(this.center.lng()*(i-1)+r.lng())/i),this.calculateBounds()}}}else{var r=e.getPosition();r&&(this.center=r,this.calculateBounds())}e.isAdded=!0,this.markers.push(e);var l=this.markers.length,c=this.markerClusterer.getMaxZoom(),n=(a=this.map)===null||a===void 0?void 0:a.getZoom();if(c!==null&&typeof n<"u"&&n>c)e.getMap()!==this.map&&e.setMap(this.map);else if(l<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(l===this.minClusterSize)for(var v=0,R=this.markers;v<R.length;v++){var x=R[v];x.setMap(null)}else e.setMap(null);return!0},t.prototype.isMarkerInClusterBounds=function(e){if(this.bounds!==null){var a=e.getPosition();if(a)return this.bounds.contains(a)}return!1},t.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},t.prototype.updateIcon=function(){var e,a=this.markers.length,r=this.markerClusterer.getMaxZoom(),i=(e=this.map)===null||e===void 0?void 0:e.getZoom();if(r!==null&&typeof i<"u"&&i>r){this.clusterIcon.hide();return}if(a<this.minClusterSize){this.clusterIcon.hide();return}this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show()},t.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var a=0;a<this.markers.length;a++)if(e===this.markers[a])return!0;return!1},t}();function T5e(t,e){var a=t.length,r=a.toString().length,i=Math.min(r,e);return{text:a.toString(),index:i,title:""}}var C5e=2e3,S5e=500,b5e="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",x5e="png",P5e=[53,56,66,78,90],E5e="cluster",dae=function(){function t(e,a,r){a===void 0&&(a=[]),r===void 0&&(r={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(t,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=r.gridSize||60,this.minClusterSize=r.minimumClusterSize||2,this.maxZoom=r.maxZoom||null,this.styles=r.styles||[],this.title=r.title||"",this.zoomOnClick=!0,r.zoomOnClick!==void 0&&(this.zoomOnClick=r.zoomOnClick),this.averageCenter=!1,r.averageCenter!==void 0&&(this.averageCenter=r.averageCenter),this.ignoreHidden=!1,r.ignoreHidden!==void 0&&(this.ignoreHidden=r.ignoreHidden),this.enableRetinaIcons=!1,r.enableRetinaIcons!==void 0&&(this.enableRetinaIcons=r.enableRetinaIcons),this.imagePath=r.imagePath||b5e,this.imageExtension=r.imageExtension||x5e,this.imageSizes=r.imageSizes||P5e,this.calculator=r.calculator||T5e,this.batchSize=r.batchSize||C5e,this.batchSizeIE=r.batchSizeIE||S5e,this.clusterClass=r.clusterClass||E5e,navigator.userAgent.toLowerCase().indexOf("msie")!==-1&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(a,!0),this.setMap(e)}return t.prototype.onZoomChanged=function(){var e,a;this.resetViewport(!1),(((e=this.getMap())===null||e===void 0?void 0:e.getZoom())===(this.get("minZoom")||0)||((a=this.getMap())===null||a===void 0?void 0:a.getZoom())===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")},t.prototype.onIdle=function(){this.redraw()},t.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),e!==null&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},t.prototype.onRemove=function(){for(var e=0,a=this.markers;e<a.length;e++){var r=a[e];r.getMap()!==this.activeMap&&r.setMap(this.activeMap)}for(var i=0,l=this.clusters;i<l.length;i++){var c=l[i];c.remove()}this.clusters=[];for(var n=0,v=this.listeners;n<v.length;n++){var R=v[n];google.maps.event.removeListener(R)}this.listeners=[],this.activeMap=null,this.ready=!1},t.prototype.draw=function(){},t.prototype.getMap=function(){return null},t.prototype.getPanes=function(){return null},t.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},t.prototype.setMap=function(){},t.prototype.addListener=function(){return{remove:function(){}}},t.prototype.bindTo=function(){},t.prototype.get=function(){},t.prototype.notify=function(){},t.prototype.set=function(){},t.prototype.setValues=function(){},t.prototype.unbind=function(){},t.prototype.unbindAll=function(){},t.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e]||0,width:this.imageSizes[e]||0})},t.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),a=new google.maps.LatLngBounds,r=0,i=e;r<i.length;r++){var l=i[r],c=l.getPosition();c&&a.extend(c)}var n=this.getMap();n!==null&&"fitBounds"in n&&n.fitBounds(a)},t.prototype.getGridSize=function(){return this.gridSize},t.prototype.setGridSize=function(e){this.gridSize=e},t.prototype.getMinimumClusterSize=function(){return this.minClusterSize},t.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.setMaxZoom=function(e){this.maxZoom=e},t.prototype.getStyles=function(){return this.styles},t.prototype.setStyles=function(e){this.styles=e},t.prototype.getTitle=function(){return this.title},t.prototype.setTitle=function(e){this.title=e},t.prototype.getZoomOnClick=function(){return this.zoomOnClick},t.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},t.prototype.getAverageCenter=function(){return this.averageCenter},t.prototype.setAverageCenter=function(e){this.averageCenter=e},t.prototype.getIgnoreHidden=function(){return this.ignoreHidden},t.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},t.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},t.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},t.prototype.getImageExtension=function(){return this.imageExtension},t.prototype.setImageExtension=function(e){this.imageExtension=e},t.prototype.getImagePath=function(){return this.imagePath},t.prototype.setImagePath=function(e){this.imagePath=e},t.prototype.getImageSizes=function(){return this.imageSizes},t.prototype.setImageSizes=function(e){this.imageSizes=e},t.prototype.getCalculator=function(){return this.calculator},t.prototype.setCalculator=function(e){this.calculator=e},t.prototype.getBatchSizeIE=function(){return this.batchSizeIE},t.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},t.prototype.getClusterClass=function(){return this.clusterClass},t.prototype.setClusterClass=function(e){this.clusterClass=e},t.prototype.getMarkers=function(){return this.markers},t.prototype.getTotalMarkers=function(){return this.markers.length},t.prototype.getClusters=function(){return this.clusters},t.prototype.getTotalClusters=function(){return this.clusters.length},t.prototype.addMarker=function(e,a){this.pushMarkerTo(e),a||this.redraw()},t.prototype.addMarkers=function(e,a){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=e[r];i&&this.pushMarkerTo(i)}a||this.redraw()},t.prototype.pushMarkerTo=function(e){var a=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",function(){a.ready&&(e.isAdded=!1,a.repaint())}),e.isAdded=!1,this.markers.push(e)},t.prototype.removeMarker_=function(e){var a=-1;if(this.markers.indexOf)a=this.markers.indexOf(e);else for(var r=0;r<this.markers.length;r++)if(e===this.markers[r]){a=r;break}return a===-1?!1:(e.setMap(null),this.markers.splice(a,1),!0)},t.prototype.removeMarker=function(e,a){var r=this.removeMarker_(e);return!a&&r&&this.repaint(),r},t.prototype.removeMarkers=function(e,a){for(var r=!1,i=0,l=e;i<l.length;i++){var c=l[i];r=r||this.removeMarker_(c)}return!a&&r&&this.repaint(),r},t.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},t.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout(function(){for(var r=0,i=e;r<i.length;r++){var l=i[r];l.remove()}},0)},t.prototype.getExtendedBounds=function(e){var a=this.getProjection(),r=a.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));r!==null&&(r.x+=this.gridSize,r.y-=this.gridSize);var i=a.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(i!==null&&(i.x-=this.gridSize,i.y+=this.gridSize),r!==null){var l=a.fromDivPixelToLatLng(r);l!==null&&e.extend(l)}if(i!==null){var c=a.fromDivPixelToLatLng(i);c!==null&&e.extend(c)}return e},t.prototype.redraw=function(){this.createClusters(0)},t.prototype.resetViewport=function(e){for(var a=0,r=this.clusters;a<r.length;a++){var i=r[a];i.remove()}this.clusters=[];for(var l=0,c=this.markers;l<c.length;l++){var n=c[l];n.isAdded=!1,e&&n.setMap(null)}},t.prototype.distanceBetweenPoints=function(e,a){var r=6371,i=(a.lat()-e.lat())*Math.PI/180,l=(a.lng()-e.lng())*Math.PI/180,c=Math.sin(i/2)*Math.sin(i/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(a.lat()*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return r*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))},t.prototype.isMarkerInBounds=function(e,a){var r=e.getPosition();return r?a.contains(r):!1},t.prototype.addToClosestCluster=function(e){for(var a,r=4e4,i=null,l=0,c=this.clusters;l<c.length;l++){var n=c[l];a=n;var v=a.getCenter(),R=e.getPosition();if(v&&R){var x=this.distanceBetweenPoints(v,R);x<r&&(r=x,i=a)}}i&&i.isMarkerInClusterBounds(e)?i.addMarker(e):(a=new R5e(this),a.addMarker(e),this.clusters.push(a))},t.prototype.createClusters=function(e){var a=this;if(this.ready){e===0&&(google.maps.event.trigger(this,"clusteringbegin",this),this.timerRefStatic!==null&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var r=this.getMap(),i=r!==null&&("getBounds"in r)?r.getBounds():null,l=(r==null?void 0:r.getZoom())||0,c=l>3?new google.maps.LatLngBounds(i==null?void 0:i.getSouthWest(),i==null?void 0:i.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),n=this.getExtendedBounds(c),v=Math.min(e+this.batchSize,this.markers.length),R=e;R<v;R++){var x=this.markers[R];x&&!x.isAdded&&this.isMarkerInBounds(x,n)&&(!this.ignoreHidden||this.ignoreHidden&&x.getVisible())&&this.addToClosestCluster(x)}if(v<this.markers.length)this.timerRefStatic=window.setTimeout(function(){a.createClusters(v)},0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var N=0,L=this.clusters;N<L.length;N++){var F=L[N];F.updateIcon()}}}},t.prototype.extend=function(e,a){return(function(i){for(var l in i.prototype){var c=l;this.prototype[c]=i.prototype[c]}return this}).apply(e,[a])},t}();function FH(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function N5e(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?FH(Object(a),!0).forEach(function(r){ja(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):FH(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var Wf={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},ws={averageCenter(t,e){t.setAverageCenter(e)},batchSizeIE(t,e){t.setBatchSizeIE(e)},calculator(t,e){t.setCalculator(e)},clusterClass(t,e){t.setClusterClass(e)},enableRetinaIcons(t,e){t.setEnableRetinaIcons(e)},gridSize(t,e){t.setGridSize(e)},ignoreHidden(t,e){t.setIgnoreHidden(e)},imageExtension(t,e){t.setImageExtension(e)},imagePath(t,e){t.setImagePath(e)},imageSizes(t,e){t.setImageSizes(e)},maxZoom(t,e){t.setMaxZoom(e)},minimumClusterSize(t,e){t.setMinimumClusterSize(e)},styles(t,e){t.setStyles(e)},title(t,e){t.setTitle(e)},zoomOnClick(t,e){t.setZoomOnClick(e)}},O5e={};function V5e(t){var{children:e,options:a,averageCenter:r,batchSizeIE:i,calculator:l,clusterClass:c,enableRetinaIcons:n,gridSize:v,ignoreHidden:R,imageExtension:x,imagePath:N,imageSizes:L,maxZoom:F,minimumClusterSize:j,styles:$,title:H,zoomOnClick:W,onClick:ee,onClusteringBegin:se,onClusteringEnd:fe,onMouseOver:le,onMouseOut:me,onLoad:ge,onUnmount:Re}=t,[we,Ve]=ie.useState(null),oe=ie.useContext(Si),[_e,Fe]=ie.useState(null),[Ee,ze]=ie.useState(null),[Se,je]=ie.useState(null),[Ue,$e]=ie.useState(null),[Be,qe]=ie.useState(null);return ie.useEffect(()=>{we&&me&&(Ue!==null&&google.maps.event.removeListener(Ue),$e(google.maps.event.addListener(we,Wf.onMouseOut,me)))},[me]),ie.useEffect(()=>{we&&le&&(Be!==null&&google.maps.event.removeListener(Be),qe(google.maps.event.addListener(we,Wf.onMouseOver,le)))},[le]),ie.useEffect(()=>{we&&ee&&(_e!==null&&google.maps.event.removeListener(_e),Fe(google.maps.event.addListener(we,Wf.onClick,ee)))},[ee]),ie.useEffect(()=>{we&&se&&(Ee!==null&&google.maps.event.removeListener(Ee),ze(google.maps.event.addListener(we,Wf.onClusteringBegin,se)))},[se]),ie.useEffect(()=>{we&&fe&&(Se!==null&&google.maps.event.removeListener(Se),ze(google.maps.event.addListener(we,Wf.onClusteringEnd,fe)))},[fe]),ie.useEffect(()=>{typeof r<"u"&&we!==null&&ws.averageCenter(we,r)},[we,r]),ie.useEffect(()=>{typeof i<"u"&&we!==null&&ws.batchSizeIE(we,i)},[we,i]),ie.useEffect(()=>{typeof l<"u"&&we!==null&&ws.calculator(we,l)},[we,l]),ie.useEffect(()=>{typeof c<"u"&&we!==null&&ws.clusterClass(we,c)},[we,c]),ie.useEffect(()=>{typeof n<"u"&&we!==null&&ws.enableRetinaIcons(we,n)},[we,n]),ie.useEffect(()=>{typeof v<"u"&&we!==null&&ws.gridSize(we,v)},[we,v]),ie.useEffect(()=>{typeof R<"u"&&we!==null&&ws.ignoreHidden(we,R)},[we,R]),ie.useEffect(()=>{typeof x<"u"&&we!==null&&ws.imageExtension(we,x)},[we,x]),ie.useEffect(()=>{typeof N<"u"&&we!==null&&ws.imagePath(we,N)},[we,N]),ie.useEffect(()=>{typeof L<"u"&&we!==null&&ws.imageSizes(we,L)},[we,L]),ie.useEffect(()=>{typeof F<"u"&&we!==null&&ws.maxZoom(we,F)},[we,F]),ie.useEffect(()=>{typeof j<"u"&&we!==null&&ws.minimumClusterSize(we,j)},[we,j]),ie.useEffect(()=>{typeof $<"u"&&we!==null&&ws.styles(we,$)},[we,$]),ie.useEffect(()=>{typeof H<"u"&&we!==null&&ws.title(we,H)},[we,H]),ie.useEffect(()=>{typeof W<"u"&&we!==null&&ws.zoomOnClick(we,W)},[we,W]),ie.useEffect(()=>{if(oe){var be=N5e({},a||O5e),Te=new dae(oe,[],be);return r&&ws.averageCenter(Te,r),i&&ws.batchSizeIE(Te,i),l&&ws.calculator(Te,l),c&&ws.clusterClass(Te,c),n&&ws.enableRetinaIcons(Te,n),v&&ws.gridSize(Te,v),R&&ws.ignoreHidden(Te,R),x&&ws.imageExtension(Te,x),N&&ws.imagePath(Te,N),L&&ws.imageSizes(Te,L),F&&ws.maxZoom(Te,F),j&&ws.minimumClusterSize(Te,j),$&&ws.styles(Te,$),H&&ws.title(Te,H),W&&ws.zoomOnClick(Te,W),me&&$e(google.maps.event.addListener(Te,Wf.onMouseOut,me)),le&&qe(google.maps.event.addListener(Te,Wf.onMouseOver,le)),ee&&Fe(google.maps.event.addListener(Te,Wf.onClick,ee)),se&&ze(google.maps.event.addListener(Te,Wf.onClusteringBegin,se)),fe&&je(google.maps.event.addListener(Te,Wf.onClusteringEnd,fe)),Ve(Te),ge&&ge(Te),()=>{Ue!==null&&google.maps.event.removeListener(Ue),Be!==null&&google.maps.event.removeListener(Be),_e!==null&&google.maps.event.removeListener(_e),Ee!==null&&google.maps.event.removeListener(Ee),Se!==null&&google.maps.event.removeListener(Se),Re&&Re(Te)}}},[]),we!==null&&e(we)||null}ie.memo(V5e);class z5e extends ie.PureComponent{constructor(){super(...arguments),ja(this,"registeredEvents",[]),ja(this,"state",{markerClusterer:null}),ja(this,"setClustererCallback",()=>{this.state.markerClusterer!==null&&this.props.onLoad&&this.props.onLoad(this.state.markerClusterer)})}componentDidMount(){if(this.context){var e=new dae(this.context,[],this.props.options);this.registeredEvents=Zi({updaterMap:ws,eventMap:Wf,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({markerClusterer:e}),this.setClustererCallback)}}componentDidUpdate(e){this.state.markerClusterer&&($i(this.registeredEvents),this.registeredEvents=Zi({updaterMap:ws,eventMap:Wf,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))}componentWillUnmount(){this.state.markerClusterer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),$i(this.registeredEvents),this.state.markerClusterer.setMap(null))}render(){return this.state.markerClusterer!==null?this.props.children(this.state.markerClusterer):null}}ja(z5e,"contextType",Si);function kH(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()}var hae=function(){function t(e){e===void 0&&(e={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(t,google.maps.OverlayView),this.content=e.content||"",this.disableAutoPan=e.disableAutoPan||!1,this.maxWidth=e.maxWidth||0,this.pixelOffset=e.pixelOffset||new google.maps.Size(0,0),this.position=e.position||new google.maps.LatLng(0,0),this.zIndex=e.zIndex||null,this.boxClass=e.boxClass||"infoBox",this.boxStyle=e.boxStyle||{},this.closeBoxMargin=e.closeBoxMargin||"2px",this.closeBoxURL=e.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",e.closeBoxURL===""&&(this.closeBoxURL=""),this.infoBoxClearance=e.infoBoxClearance||new google.maps.Size(1,1),typeof e.visible>"u"&&(typeof e.isHidden>"u"?e.visible=!0:e.visible=!e.isHidden),this.isHidden=!e.visible,this.alignBottom=e.alignBottom||!1,this.pane=e.pane||"floatPane",this.enableEventPropagation=e.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return t.prototype.createInfoBoxDiv=function(){var e=this,a=function(x){x.returnValue=!1,x.preventDefault&&x.preventDefault(),e.enableEventPropagation||kH(x)};if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),typeof this.content=="string"?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var r=this.getPanes();if(r!==null&&r[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(this.maxWidth!==0&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var i=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-i.left-i.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var l=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],c=0,n=l;c<n.length;c++){var v=n[c];this.eventListeners.push(google.maps.event.addListener(this.div,v,kH))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",function(){e.div&&(e.div.style.cursor="default")}))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",a),google.maps.event.trigger(this,"domready")}},t.prototype.getCloseBoxImg=function(){var e="";return this.closeBoxURL!==""&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},t.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&this.closeBoxURL!==""?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},t.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},t.prototype.getCloseClickHandler=function(){return this.closeClickHandler},t.prototype.panBox=function(e){if(this.div&&!e){var a=this.getMap();if(a instanceof google.maps.Map){var r=0,i=0,l=a.getBounds();l&&!l.contains(this.position)&&a.setCenter(this.position);var c=a.getDiv(),n=c.offsetWidth,v=c.offsetHeight,R=this.pixelOffset.width,x=this.pixelOffset.height,N=this.div.offsetWidth,L=this.div.offsetHeight,F=this.infoBoxClearance.width,j=this.infoBoxClearance.height,$=this.getProjection(),H=$.fromLatLngToContainerPixel(this.position);H!==null&&(H.x<-R+F?r=H.x+R-F:H.x+N+R+F>n&&(r=H.x+N+R+F-n),this.alignBottom?H.y<-x+j+L?i=H.y+x-j-L:H.y+x+j>v&&(i=H.y+x+j-v):H.y<-x+j?i=H.y+x-j:H.y+L+x+j>v&&(i=H.y+L+x+j-v)),r===0&&i===0||a.panBy(r,i)}}},t.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(this.div.style[a]=e[a]);if(this.div.style.webkitTransform="translateZ(0)",typeof this.div.style.opacity<"u"&&this.div.style.opacity!==""){var r=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+r*100+')"',this.div.style.filter="alpha(opacity="+r*100+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",this.zIndex!==null&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},t.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var a=this.div.ownerDocument,r=a&&a.defaultView?a.defaultView.getComputedStyle(this.div,""):null;r&&(e.top=parseInt(r.borderTopWidth||"",10)||0,e.bottom=parseInt(r.borderBottomWidth||"",10)||0,e.left=parseInt(r.borderLeftWidth||"",10)||0,e.right=parseInt(r.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var i=this.div.currentStyle;i&&(e.top=parseInt(i.borderTopWidth||"",10)||0,e.bottom=parseInt(i.borderBottomWidth||"",10)||0,e.left=parseInt(i.borderLeftWidth||"",10)||0,e.right=parseInt(i.borderRightWidth||"",10)||0)}return e},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},t.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection(),a=e.fromLatLngToDivPixel(this.position);a!==null&&(this.div.style.left=a.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(a.y+this.pixelOffset.height)+"px":this.div.style.top=a.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},t.prototype.setOptions=function(e){e===void 0&&(e={}),typeof e.boxClass<"u"&&(this.boxClass=e.boxClass,this.setBoxStyle()),typeof e.boxStyle<"u"&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),typeof e.content<"u"&&this.setContent(e.content),typeof e.disableAutoPan<"u"&&(this.disableAutoPan=e.disableAutoPan),typeof e.maxWidth<"u"&&(this.maxWidth=e.maxWidth),typeof e.pixelOffset<"u"&&(this.pixelOffset=e.pixelOffset),typeof e.alignBottom<"u"&&(this.alignBottom=e.alignBottom),typeof e.position<"u"&&this.setPosition(e.position),typeof e.zIndex<"u"&&this.setZIndex(e.zIndex),typeof e.closeBoxMargin<"u"&&(this.closeBoxMargin=e.closeBoxMargin),typeof e.closeBoxURL<"u"&&(this.closeBoxURL=e.closeBoxURL),typeof e.infoBoxClearance<"u"&&(this.infoBoxClearance=e.infoBoxClearance),typeof e.isHidden<"u"&&(this.isHidden=e.isHidden),typeof e.visible<"u"&&(this.isHidden=!e.visible),typeof e.enableEventPropagation<"u"&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},t.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px",typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},t.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},t.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},t.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},t.prototype.getContent=function(){return this.content},t.prototype.getPosition=function(){return this.position},t.prototype.getZIndex=function(){return this.zIndex},t.prototype.getVisible=function(){var e=this.getMap();return typeof e>"u"||e===null?!1:!this.isHidden},t.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},t.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},t.prototype.open=function(e,a){var r=this;a&&(this.position=a.getPosition(),this.moveListener=google.maps.event.addListener(a,"position_changed",function(){var i=a.getPosition();r.setPosition(i)}),this.mapListener=google.maps.event.addListener(a,"map_changed",function(){r.setMap(a.map)})),this.setMap(e),this.div&&this.panBox()},t.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0,a=this.eventListeners;e<a.length;e++){var r=a[e];google.maps.event.removeListener(r)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},t.prototype.extend=function(e,a){return(function(i){for(var l in i.prototype)Object.prototype.hasOwnProperty.call(this,l)||(this.prototype[l]=i.prototype[l]);return this}).apply(e,[a])},t}(),D5e=["position"],M5e=["position"];function UH(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function _2(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?UH(Object(a),!0).forEach(function(r){ja(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):UH(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var BH={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},jH={options(t,e){t.setOptions(e)},position(t,e){e instanceof google.maps.LatLng?t.setPosition(e):t.setPosition(new google.maps.LatLng(e.lat,e.lng))},visible(t,e){t.setVisible(e)},zIndex(t,e){t.setZIndex(e)}},I5e={};function L5e(t){var{children:e,anchor:a,options:r,position:i,zIndex:l,onCloseClick:c,onDomReady:n,onContentChanged:v,onPositionChanged:R,onZindexChanged:x,onLoad:N,onUnmount:L}=t,F=ie.useContext(Si),[j,$]=ie.useState(null),[H,W]=ie.useState(null),[ee,se]=ie.useState(null),[fe,le]=ie.useState(null),[me,ge]=ie.useState(null),[Re,we]=ie.useState(null),Ve=ie.useRef(null);return ie.useEffect(()=>{F&&j!==null&&(j.close(),a?j.open(F,a):j.getPosition()&&j.open(F))},[F,j,a]),ie.useEffect(()=>{r&&j!==null&&j.setOptions(r)},[j,r]),ie.useEffect(()=>{if(i&&j!==null){var oe=i instanceof google.maps.LatLng?i:new google.maps.LatLng(i.lat,i.lng);j.setPosition(oe)}},[i]),ie.useEffect(()=>{typeof l=="number"&&j!==null&&j.setZIndex(l)},[l]),ie.useEffect(()=>{j&&c&&(H!==null&&google.maps.event.removeListener(H),W(google.maps.event.addListener(j,"closeclick",c)))},[c]),ie.useEffect(()=>{j&&n&&(ee!==null&&google.maps.event.removeListener(ee),se(google.maps.event.addListener(j,"domready",n)))},[n]),ie.useEffect(()=>{j&&v&&(fe!==null&&google.maps.event.removeListener(fe),le(google.maps.event.addListener(j,"content_changed",v)))},[v]),ie.useEffect(()=>{j&&R&&(me!==null&&google.maps.event.removeListener(me),ge(google.maps.event.addListener(j,"position_changed",R)))},[R]),ie.useEffect(()=>{j&&x&&(Re!==null&&google.maps.event.removeListener(Re),we(google.maps.event.addListener(j,"zindex_changed",x)))},[x]),ie.useEffect(()=>{if(F){var oe=r||I5e,{position:_e}=oe,Fe=X4(oe,D5e),Ee;_e&&!(_e instanceof google.maps.LatLng)&&(Ee=new google.maps.LatLng(_e.lat,_e.lng));var ze=new hae(_2(_2({},Fe),Ee?{position:Ee}:{}));Ve.current=document.createElement("div"),$(ze),c&&W(google.maps.event.addListener(ze,"closeclick",c)),n&&se(google.maps.event.addListener(ze,"domready",n)),v&&le(google.maps.event.addListener(ze,"content_changed",v)),R&&ge(google.maps.event.addListener(ze,"position_changed",R)),x&&we(google.maps.event.addListener(ze,"zindex_changed",x)),ze.setContent(Ve.current),a?ze.open(F,a):ze.getPosition()?ze.open(F):Hu(!1,"You must provide either an anchor or a position prop for <InfoBox>."),N&&N(ze)}return()=>{j!==null&&(H&&google.maps.event.removeListener(H),fe&&google.maps.event.removeListener(fe),ee&&google.maps.event.removeListener(ee),me&&google.maps.event.removeListener(me),Re&&google.maps.event.removeListener(Re),L&&L(j),j.close())}},[]),Ve.current?s1.createPortal(ie.Children.only(e),Ve.current):null}ie.memo(L5e);class F5e extends ie.PureComponent{constructor(){super(...arguments),ja(this,"registeredEvents",[]),ja(this,"containerElement",null),ja(this,"state",{infoBox:null}),ja(this,"open",(e,a)=>{a?this.context!==null&&e.open(this.context,a):e.getPosition()?this.context!==null&&e.open(this.context):Hu(!1,"You must provide either an anchor or a position prop for <InfoBox>.")}),ja(this,"setInfoBoxCallback",()=>{this.state.infoBox!==null&&this.containerElement!==null&&(this.state.infoBox.setContent(this.containerElement),this.open(this.state.infoBox,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoBox))})}componentDidMount(){var e=this.props.options||{},{position:a}=e,r=X4(e,M5e),i;a&&!(a instanceof google.maps.LatLng)&&(i=new google.maps.LatLng(a.lat,a.lng));var l=new hae(_2(_2({},r),i?{position:i}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=Zi({updaterMap:jH,eventMap:BH,prevProps:{},nextProps:this.props,instance:l}),this.setState({infoBox:l},this.setInfoBoxCallback)}componentDidUpdate(e){var{infoBox:a}=this.state;a!==null&&($i(this.registeredEvents),this.registeredEvents=Zi({updaterMap:jH,eventMap:BH,prevProps:e,nextProps:this.props,instance:a}))}componentWillUnmount(){var{onUnmount:e}=this.props,{infoBox:a}=this.state;a!==null&&(e&&e(a),$i(this.registeredEvents),a.close())}render(){return this.containerElement?s1.createPortal(ie.Children.only(this.props.children),this.containerElement):null}}ja(F5e,"contextType",Si);var PD,GH;function k5e(){return GH||(GH=1,PD=function t(e,a){if(e===a)return!0;if(e&&a&&typeof e=="object"&&typeof a=="object"){if(e.constructor!==a.constructor)return!1;var r,i,l;if(Array.isArray(e)){if(r=e.length,r!=a.length)return!1;for(i=r;i--!==0;)if(!t(e[i],a[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===a.source&&e.flags===a.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===a.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===a.toString();if(l=Object.keys(e),r=l.length,r!==Object.keys(a).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(a,l[i]))return!1;for(i=r;i--!==0;){var c=l[i];if(!t(e[c],a[c]))return!1}return!0}return e!==e&&a!==a}),PD}var U5e=k5e(),ZH=iae(U5e),qH=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],ED=1,tR=8;class J4{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var[a,r]=new Uint8Array(e,0,2);if(a!==219)throw new Error("Data does not appear to be in a KDBush format.");var i=r>>4;if(i!==ED)throw new Error("Got v".concat(i," data when expected v").concat(ED,"."));var l=qH[r&15];if(!l)throw new Error("Unrecognized array type.");var[c]=new Uint16Array(e,2,1),[n]=new Uint32Array(e,4,1);return new J4(n,c,l,e)}constructor(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:64,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float64Array,i=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+a,2),65535),this.ArrayType=r,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var l=qH.indexOf(this.ArrayType),c=e*2*this.ArrayType.BYTES_PER_ELEMENT,n=e*this.IndexArrayType.BYTES_PER_ELEMENT,v=(8-n%8)%8;if(l<0)throw new Error("Unexpected typed array class: ".concat(r,"."));i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,tR,e),this.coords=new this.ArrayType(this.data,tR+n+v,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(tR+c+n+v),this.ids=new this.IndexArrayType(this.data,tR,e),this.coords=new this.ArrayType(this.data,tR+n+v,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(ED<<4)+l]),new Uint16Array(this.data,2,1)[0]=a,new Uint32Array(this.data,4,1)[0]=e)}add(e,a){var r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=e,this.coords[this._pos++]=a,r}finish(){var e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return u3(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,a,r,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:l,coords:c,nodeSize:n}=this,v=[0,l.length-1,0],R=[];v.length;){var x=v.pop()||0,N=v.pop()||0,L=v.pop()||0;if(N-L<=n){for(var F=L;F<=N;F++){var j=c[2*F],$=c[2*F+1];j>=e&&j<=r&&$>=a&&$<=i&&R.push(l[F])}continue}var H=L+N>>1,W=c[2*H],ee=c[2*H+1];W>=e&&W<=r&&ee>=a&&ee<=i&&R.push(l[H]),(x===0?e<=W:a<=ee)&&(v.push(L),v.push(H-1),v.push(1-x)),(x===0?r>=W:i>=ee)&&(v.push(H+1),v.push(N),v.push(1-x))}return R}within(e,a,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:i,coords:l,nodeSize:c}=this,n=[0,i.length-1,0],v=[],R=r*r;n.length;){var x=n.pop()||0,N=n.pop()||0,L=n.pop()||0;if(N-L<=c){for(var F=L;F<=N;F++)HH(l[2*F],l[2*F+1],e,a)<=R&&v.push(i[F]);continue}var j=L+N>>1,$=l[2*j],H=l[2*j+1];HH($,H,e,a)<=R&&v.push(i[j]),(x===0?e-r<=$:a-r<=H)&&(n.push(L),n.push(j-1),n.push(1-x)),(x===0?e+r>=$:a+r>=H)&&(n.push(j+1),n.push(N),n.push(1-x))}return v}}function u3(t,e,a,r,i,l){if(!(i-r<=a)){var c=r+i>>1;fae(t,e,c,r,i,l),u3(t,e,a,r,c-1,1-l),u3(t,e,a,c+1,i,1-l)}}function fae(t,e,a,r,i,l){for(;i>r;){if(i-r>600){var c=i-r+1,n=a-r+1,v=Math.log(c),R=.5*Math.exp(2*v/3),x=.5*Math.sqrt(v*R*(c-R)/c)*(n-c/2<0?-1:1),N=Math.max(r,Math.floor(a-n*R/c+x)),L=Math.min(i,Math.floor(a+(c-n)*R/c+x));fae(t,e,a,N,L,l)}var F=e[2*a+l],j=r,$=i;for(aR(t,e,r,a),e[2*i+l]>F&&aR(t,e,r,i);j<$;){for(aR(t,e,j,$),j++,$--;e[2*j+l]<F;)j++;for(;e[2*$+l]>F;)$--}e[2*r+l]===F?aR(t,e,r,$):($++,aR(t,e,$,i)),$<=a&&(r=$+1),a<=$&&(i=$-1)}}function aR(t,e,a,r){ND(t,a,r),ND(e,2*a,2*r),ND(e,2*a+1,2*r+1)}function ND(t,e,a){var r=t[e];t[e]=t[a],t[a]=r}function HH(t,e,a,r){var i=t-a,l=e-r;return i*i+l*l}var B5e={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},$H=Math.fround||(t=>e=>(t[0]=+e,t[0]))(new Float32Array(1)),av=2,Vy=3,OD=4,Ny=5,pae=6;class j5e{constructor(e){this.options=Object.assign(Object.create(B5e),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){var{log:a,minZoom:r,maxZoom:i}=this.options;a&&console.time("total time");var l="prepare ".concat(e.length," points");a&&console.time(l),this.points=e;for(var c=[],n=0;n<e.length;n++){var v=e[n];if(v.geometry){var[R,x]=v.geometry.coordinates,N=$H(ub(R)),L=$H(cb(x));c.push(N,L,1/0,n,-1,1),this.options.reduce&&c.push(0)}}var F=this.trees[i+1]=this._createTree(c);a&&console.timeEnd(l);for(var j=i;j>=r;j--){var $=+Date.now();F=this.trees[j]=this._createTree(this._cluster(F,j)),a&&console.log("z%d: %d clusters in %dms",j,F.numItems,+Date.now()-$)}return a&&console.timeEnd("total time"),this}getClusters(e,a){var r=((e[0]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,e[1])),l=e[2]===180?180:((e[2]+180)%360+360)%360-180,c=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,l=180;else if(r>l){var n=this.getClusters([r,i,180,c],a),v=this.getClusters([-180,i,l,c],a);return n.concat(v)}var R=this.trees[this._limitZoom(a)],x=R.range(ub(r),cb(c),ub(l),cb(i)),N=R.data,L=[];for(var F of x){var j=this.stride*F;L.push(N[j+Ny]>1?KH(N,j,this.clusterProps):this.points[N[j+Vy]])}return L}getChildren(e){var a=this._getOriginId(e),r=this._getOriginZoom(e),i="No cluster with the specified id.",l=this.trees[r];if(!l)throw new Error(i);var c=l.data;if(a*this.stride>=c.length)throw new Error(i);var n=this.options.radius/(this.options.extent*Math.pow(2,r-1)),v=c[a*this.stride],R=c[a*this.stride+1],x=l.within(v,R,n),N=[];for(var L of x){var F=L*this.stride;c[F+OD]===e&&N.push(c[F+Ny]>1?KH(c,F,this.clusterProps):this.points[c[F+Vy]])}if(N.length===0)throw new Error(i);return N}getLeaves(e,a,r){a=a||10,r=r||0;var i=[];return this._appendLeaves(i,e,a,r,0),i}getTile(e,a,r){var i=this.trees[this._limitZoom(e)],l=Math.pow(2,e),{extent:c,radius:n}=this.options,v=n/c,R=(r-v)/l,x=(r+1+v)/l,N={features:[]};return this._addTileFeatures(i.range((a-v)/l,R,(a+1+v)/l,x),i.data,a,r,l,N),a===0&&this._addTileFeatures(i.range(1-v/l,R,1,x),i.data,l,r,l,N),a===l-1&&this._addTileFeatures(i.range(0,R,v/l,x),i.data,-1,r,l,N),N.features.length?N:null}getClusterExpansionZoom(e){for(var a=this._getOriginZoom(e)-1;a<=this.options.maxZoom;){var r=this.getChildren(e);if(a++,r.length!==1)break;e=r[0].properties.cluster_id}return a}_appendLeaves(e,a,r,i,l){var c=this.getChildren(a);for(var n of c){var v=n.properties;if(v&&v.cluster?l+v.point_count<=i?l+=v.point_count:l=this._appendLeaves(e,v.cluster_id,r,i,l):l<i?l++:e.push(n),e.length===r)break}return l}_createTree(e){for(var a=new J4(e.length/this.stride|0,this.options.nodeSize,Float32Array),r=0;r<e.length;r+=this.stride)a.add(e[r],e[r+1]);return a.finish(),a.data=e,a}_addTileFeatures(e,a,r,i,l,c){for(var n of e){var v=n*this.stride,R=a[v+Ny]>1,x=void 0,N=void 0,L=void 0;if(R)x=mae(a,v,this.clusterProps),N=a[v],L=a[v+1];else{var F=this.points[a[v+Vy]];x=F.properties;var[j,$]=F.geometry.coordinates;N=ub(j),L=cb($)}var H={type:1,geometry:[[Math.round(this.options.extent*(N*l-r)),Math.round(this.options.extent*(L*l-i))]],tags:x},W=void 0;R||this.options.generateId?W=a[v+Vy]:W=this.points[a[v+Vy]].id,W!==void 0&&(H.id=W),c.features.push(H)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,a){for(var{radius:r,extent:i,reduce:l,minPoints:c}=this.options,n=r/(i*Math.pow(2,a)),v=e.data,R=[],x=this.stride,N=0;N<v.length;N+=x)if(!(v[N+av]<=a)){v[N+av]=a;var L=v[N],F=v[N+1],j=e.within(v[N],v[N+1],n),$=v[N+Ny],H=$;for(var W of j){var ee=W*x;v[ee+av]>a&&(H+=v[ee+Ny])}if(H>$&&H>=c){var se=L*$,fe=F*$,le=void 0,me=-1,ge=((N/x|0)<<5)+(a+1)+this.points.length;for(var Re of j){var we=Re*x;if(!(v[we+av]<=a)){v[we+av]=a;var Ve=v[we+Ny];se+=v[we]*Ve,fe+=v[we+1]*Ve,v[we+OD]=ge,l&&(le||(le=this._map(v,N,!0),me=this.clusterProps.length,this.clusterProps.push(le)),l(le,this._map(v,we)))}}v[N+OD]=ge,R.push(se/H,fe/H,1/0,ge,-1,H),l&&R.push(me)}else{for(var oe=0;oe<x;oe++)R.push(v[N+oe]);if(H>1)for(var _e of j){var Fe=_e*x;if(!(v[Fe+av]<=a)){v[Fe+av]=a;for(var Ee=0;Ee<x;Ee++)R.push(v[Fe+Ee])}}}}return R}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,a,r){if(e[a+Ny]>1){var i=this.clusterProps[e[a+pae]];return r?Object.assign({},i):i}var l=this.points[e[a+Vy]].properties,c=this.options.map(l);return r&&c===l?Object.assign({},c):c}}function KH(t,e,a){return{type:"Feature",id:t[e+Vy],properties:mae(t,e,a),geometry:{type:"Point",coordinates:[G5e(t[e]),Z5e(t[e+1])]}}}function mae(t,e,a){var r=t[e+Ny],i=r>=1e4?"".concat(Math.round(r/1e3),"k"):r>=1e3?"".concat(Math.round(r/100)/10,"k"):r,l=t[e+pae],c=l===-1?{}:Object.assign({},a[l]);return Object.assign(c,{cluster:!0,cluster_id:t[e+Vy],point_count:r,point_count_abbreviated:i})}function ub(t){return t/360+.5}function cb(t){var e=Math.sin(t*Math.PI/180),a=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return a<0?0:a>1?1:a}function G5e(t){return(t-.5)*360}function Z5e(t){var e=(180-t*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function q5e(t,e){var a={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(a[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(a[r[i]]=t[r[i]]);return a}class ff{static isAdvancedMarkerAvailable(e){return google.maps.marker&&e.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,a){this.isAdvancedMarker(e)?e.map=a:e.setMap(a)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return this.isAdvancedMarker(e)?!0:e.getVisible()}}class c3{constructor(e){var{markers:a,position:r}=e;this.markers=a,r&&(r instanceof google.maps.LatLng?this._position=r:this._position=new google.maps.LatLng(r))}get bounds(){if(!(this.markers.length===0&&!this._position)){var e=new google.maps.LatLngBounds(this._position,this._position);for(var a of this.markers)e.extend(ff.getPosition(a));return e}}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>ff.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&(ff.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class H5e{constructor(e){var{maxZoom:a=16}=e;this.maxZoom=a}noop(e){var{markers:a}=e;return $5e(a)}}var $5e=t=>{var e=t.map(a=>new c3({position:ff.getPosition(a),markers:[a]}));return e};class K5e extends H5e{constructor(e){var{maxZoom:a,radius:r=60}=e,i=q5e(e,["maxZoom","radius"]);super({maxZoom:a}),this.state={zoom:-1},this.superCluster=new j5e(Object.assign({maxZoom:this.maxZoom,radius:r},i))}calculate(e){var a=!1,r={zoom:e.map.getZoom()};if(!ZH(e.markers,this.markers)){a=!0,this.markers=[...e.markers];var i=this.markers.map(l=>{var c=ff.getPosition(l),n=[c.lng(),c.lat()];return{type:"Feature",geometry:{type:"Point",coordinates:n},properties:{marker:l}}});this.superCluster.load(i)}return a||(this.state.zoom<=this.maxZoom||r.zoom<=this.maxZoom)&&(a=!ZH(this.state,r)),this.state=r,a&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:a}}cluster(e){var{map:a}=e;return this.superCluster.getClusters([-180,-90,180,90],Math.round(a.getZoom())).map(r=>this.transformCluster(r))}transformCluster(e){var{geometry:{coordinates:[a,r]},properties:i}=e;if(i.cluster)return new c3({markers:this.superCluster.getLeaves(i.cluster_id,1/0).map(c=>c.properties.marker),position:{lat:r,lng:a}});var l=i.marker;return new c3({markers:[l],position:ff.getPosition(l)})}}class W5e{constructor(e,a){this.markers={sum:e.length};var r=a.map(l=>l.count),i=r.reduce((l,c)=>l+c,0);this.clusters={count:a.length,markers:{mean:i/a.length,sum:i,min:Math.min(...r),max:Math.max(...r)}}}}class Y5e{render(e,a,r){var{count:i,position:l}=e,c=i>Math.max(10,a.clusters.markers.mean)?"#ff0000":"#0000ff",n='<svg fill="'.concat(c,`" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">`).concat(i,`</text>
</svg>`),v="Cluster of ".concat(i," markers"),R=Number(google.maps.Marker.MAX_ZINDEX)+i;if(ff.isAdvancedMarkerAvailable(r)){var x=new DOMParser,N=x.parseFromString(n,"image/svg+xml").documentElement;N.setAttribute("transform","translate(0 25)");var L={map:r,position:l,zIndex:R,title:v,content:N};return new google.maps.marker.AdvancedMarkerElement(L)}var F={position:l,zIndex:R,title:v,icon:{url:"data:image/svg+xml;base64,".concat(btoa(n)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(F)}}function X5e(t,e){for(var a in e.prototype)t.prototype[a]=e.prototype[a]}class Q4{constructor(){X5e(Q4,google.maps.OverlayView)}}var VR;(function(t){t.CLUSTERING_BEGIN="clusteringbegin",t.CLUSTERING_END="clusteringend",t.CLUSTER_CLICK="click"})(VR||(VR={}));var J5e=(t,e,a)=>{a.fitBounds(e.bounds)};class Q5e extends Q4{constructor(e){var{map:a,markers:r=[],algorithmOptions:i={},algorithm:l=new K5e(i),renderer:c=new Y5e,onClusterClick:n=J5e}=e;super(),this.markers=[...r],this.clusters=[],this.algorithm=l,this.renderer=c,this.onClusterClick=n,a&&this.setMap(a)}addMarker(e,a){this.markers.includes(e)||(this.markers.push(e),a||this.render())}addMarkers(e,a){e.forEach(r=>{this.addMarker(r,!0)}),a||this.render()}removeMarker(e,a){var r=this.markers.indexOf(e);return r===-1?!1:(ff.setMap(e,null),this.markers.splice(r,1),a||this.render(),!0)}removeMarkers(e,a){var r=!1;return e.forEach(i=>{r=this.removeMarker(i,!0)||r}),r&&!a&&this.render(),r}clearMarkers(e){this.markers.length=0,e||this.render()}render(){var e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,VR.CLUSTERING_BEGIN,this);var{clusters:a,changed:r}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(r||r==null){var i=new Set;for(var l of a)l.markers.length==1&&i.add(l.markers[0]);var c=[];for(var n of this.clusters)n.marker!=null&&(n.markers.length==1?i.has(n.marker)||ff.setMap(n.marker,null):c.push(n.marker));this.clusters=a,this.renderClusters(),requestAnimationFrame(()=>c.forEach(v=>ff.setMap(v,null)))}google.maps.event.trigger(this,VR.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>ff.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){var e=new W5e(this.markers,this.clusters),a=this.getMap();this.clusters.forEach(r=>{r.markers.length===1?r.marker=r.markers[0]:(r.marker=this.renderer.render(r,e,a),r.markers.forEach(i=>ff.setMap(i,null)),this.onClusterClick&&r.marker.addListener("click",i=>{google.maps.event.trigger(this,VR.CLUSTER_CLICK,r),this.onClusterClick(i,r,a)})),ff.setMap(r.marker,a)})}}function WH(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function YH(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?WH(Object(a),!0).forEach(function(r){ja(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):WH(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function eDe(t){var e=Hze(),[a,r]=ie.useState(null);return ie.useEffect(()=>{if(e&&a===null){var i=new Q5e(YH(YH({},t),{},{map:e}));r(i)}},[e]),a}function tDe(t){var{children:e,options:a}=t,r=eDe(a);return r!==null?e(r):null}ie.memo(tDe);var XH={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},JH={options(t,e){t.setOptions(e)},position(t,e){t.setPosition(e)},zIndex(t,e){t.setZIndex(e)}};function aDe(t){var{children:e,anchor:a,options:r,position:i,zIndex:l,onCloseClick:c,onDomReady:n,onContentChanged:v,onPositionChanged:R,onZindexChanged:x,onLoad:N,onUnmount:L}=t,F=ie.useContext(Si),[j,$]=ie.useState(null),[H,W]=ie.useState(null),[ee,se]=ie.useState(null),[fe,le]=ie.useState(null),[me,ge]=ie.useState(null),[Re,we]=ie.useState(null),Ve=ie.useRef(null);return ie.useEffect(()=>{j!==null&&(j.close(),a?j.open(F,a):j.getPosition()&&j.open(F))},[F,j,a]),ie.useEffect(()=>{r&&j!==null&&j.setOptions(r)},[j,r]),ie.useEffect(()=>{i&&j!==null&&j.setPosition(i)},[i]),ie.useEffect(()=>{typeof l=="number"&&j!==null&&j.setZIndex(l)},[l]),ie.useEffect(()=>{j&&c&&(H!==null&&google.maps.event.removeListener(H),W(google.maps.event.addListener(j,"closeclick",c)))},[c]),ie.useEffect(()=>{j&&n&&(ee!==null&&google.maps.event.removeListener(ee),se(google.maps.event.addListener(j,"domready",n)))},[n]),ie.useEffect(()=>{j&&v&&(fe!==null&&google.maps.event.removeListener(fe),le(google.maps.event.addListener(j,"content_changed",v)))},[v]),ie.useEffect(()=>{j&&R&&(me!==null&&google.maps.event.removeListener(me),ge(google.maps.event.addListener(j,"position_changed",R)))},[R]),ie.useEffect(()=>{j&&x&&(Re!==null&&google.maps.event.removeListener(Re),we(google.maps.event.addListener(j,"zindex_changed",x)))},[x]),ie.useEffect(()=>{var oe=new google.maps.InfoWindow(r);return $(oe),Ve.current=document.createElement("div"),c&&W(google.maps.event.addListener(oe,"closeclick",c)),n&&se(google.maps.event.addListener(oe,"domready",n)),v&&le(google.maps.event.addListener(oe,"content_changed",v)),R&&ge(google.maps.event.addListener(oe,"position_changed",R)),x&&we(google.maps.event.addListener(oe,"zindex_changed",x)),oe.setContent(Ve.current),i&&oe.setPosition(i),l&&oe.setZIndex(l),a?oe.open(F,a):oe.getPosition()?oe.open(F):Hu(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),N&&N(oe),()=>{H&&google.maps.event.removeListener(H),fe&&google.maps.event.removeListener(fe),ee&&google.maps.event.removeListener(ee),me&&google.maps.event.removeListener(me),Re&&google.maps.event.removeListener(Re),L&&L(oe),oe.close()}},[]),Ve.current?s1.createPortal(ie.Children.only(e),Ve.current):null}ie.memo(aDe);class rDe extends ie.PureComponent{constructor(){super(...arguments),ja(this,"registeredEvents",[]),ja(this,"containerElement",null),ja(this,"state",{infoWindow:null}),ja(this,"open",(e,a)=>{a?e.open(this.context,a):e.getPosition()?e.open(this.context):Hu(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")}),ja(this,"setInfoWindowCallback",()=>{this.state.infoWindow!==null&&this.containerElement!==null&&(this.state.infoWindow.setContent(this.containerElement),this.open(this.state.infoWindow,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoWindow))})}componentDidMount(){var e=new google.maps.InfoWindow(this.props.options);this.containerElement=document.createElement("div"),this.registeredEvents=Zi({updaterMap:JH,eventMap:XH,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({infoWindow:e}),this.setInfoWindowCallback)}componentDidUpdate(e){this.state.infoWindow!==null&&($i(this.registeredEvents),this.registeredEvents=Zi({updaterMap:JH,eventMap:XH,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))}componentWillUnmount(){this.state.infoWindow!==null&&($i(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}render(){return this.containerElement?s1.createPortal(ie.Children.only(this.props.children),this.containerElement):null}}ja(rDe,"contextType",Si);function QH(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function w2(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?QH(Object(a),!0).forEach(function(r){ja(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):QH(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var e$={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},t$={draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},path(t,e){t.setPath(e)},visible(t,e){t.setVisible(e)}},nDe={};function iDe(t){var{options:e,draggable:a,editable:r,visible:i,path:l,onDblClick:c,onDragEnd:n,onDragStart:v,onMouseDown:R,onMouseMove:x,onMouseOut:N,onMouseOver:L,onMouseUp:F,onRightClick:j,onClick:$,onDrag:H,onLoad:W,onUnmount:ee}=t,se=ie.useContext(Si),[fe,le]=ie.useState(null),[me,ge]=ie.useState(null),[Re,we]=ie.useState(null),[Ve,oe]=ie.useState(null),[_e,Fe]=ie.useState(null),[Ee,ze]=ie.useState(null),[Se,je]=ie.useState(null),[Ue,$e]=ie.useState(null),[Be,qe]=ie.useState(null),[be,Te]=ie.useState(null),[ke,Ge]=ie.useState(null),[at,rt]=ie.useState(null);return ie.useEffect(()=>{fe!==null&&fe.setMap(se)},[se]),ie.useEffect(()=>{typeof e<"u"&&fe!==null&&fe.setOptions(e)},[fe,e]),ie.useEffect(()=>{typeof a<"u"&&fe!==null&&fe.setDraggable(a)},[fe,a]),ie.useEffect(()=>{typeof r<"u"&&fe!==null&&fe.setEditable(r)},[fe,r]),ie.useEffect(()=>{typeof i<"u"&&fe!==null&&fe.setVisible(i)},[fe,i]),ie.useEffect(()=>{typeof l<"u"&&fe!==null&&fe.setPath(l)},[fe,l]),ie.useEffect(()=>{fe&&c&&(me!==null&&google.maps.event.removeListener(me),ge(google.maps.event.addListener(fe,"dblclick",c)))},[c]),ie.useEffect(()=>{fe&&n&&(Re!==null&&google.maps.event.removeListener(Re),we(google.maps.event.addListener(fe,"dragend",n)))},[n]),ie.useEffect(()=>{fe&&v&&(Ve!==null&&google.maps.event.removeListener(Ve),oe(google.maps.event.addListener(fe,"dragstart",v)))},[v]),ie.useEffect(()=>{fe&&R&&(_e!==null&&google.maps.event.removeListener(_e),Fe(google.maps.event.addListener(fe,"mousedown",R)))},[R]),ie.useEffect(()=>{fe&&x&&(Ee!==null&&google.maps.event.removeListener(Ee),ze(google.maps.event.addListener(fe,"mousemove",x)))},[x]),ie.useEffect(()=>{fe&&N&&(Se!==null&&google.maps.event.removeListener(Se),je(google.maps.event.addListener(fe,"mouseout",N)))},[N]),ie.useEffect(()=>{fe&&L&&(Ue!==null&&google.maps.event.removeListener(Ue),$e(google.maps.event.addListener(fe,"mouseover",L)))},[L]),ie.useEffect(()=>{fe&&F&&(Be!==null&&google.maps.event.removeListener(Be),qe(google.maps.event.addListener(fe,"mouseup",F)))},[F]),ie.useEffect(()=>{fe&&j&&(be!==null&&google.maps.event.removeListener(be),Te(google.maps.event.addListener(fe,"rightclick",j)))},[j]),ie.useEffect(()=>{fe&&$&&(ke!==null&&google.maps.event.removeListener(ke),Ge(google.maps.event.addListener(fe,"click",$)))},[$]),ie.useEffect(()=>{fe&&H&&(at!==null&&google.maps.event.removeListener(at),rt(google.maps.event.addListener(fe,"drag",H)))},[H]),ie.useEffect(()=>{var lt=new google.maps.Polyline(w2(w2({},e||nDe),{},{map:se}));return l&&lt.setPath(l),typeof i<"u"&&lt.setVisible(i),typeof r<"u"&&lt.setEditable(r),typeof a<"u"&&lt.setDraggable(a),c&&ge(google.maps.event.addListener(lt,"dblclick",c)),n&&we(google.maps.event.addListener(lt,"dragend",n)),v&&oe(google.maps.event.addListener(lt,"dragstart",v)),R&&Fe(google.maps.event.addListener(lt,"mousedown",R)),x&&ze(google.maps.event.addListener(lt,"mousemove",x)),N&&je(google.maps.event.addListener(lt,"mouseout",N)),L&&$e(google.maps.event.addListener(lt,"mouseover",L)),F&&qe(google.maps.event.addListener(lt,"mouseup",F)),j&&Te(google.maps.event.addListener(lt,"rightclick",j)),$&&Ge(google.maps.event.addListener(lt,"click",$)),H&&rt(google.maps.event.addListener(lt,"drag",H)),le(lt),W&&W(lt),()=>{me!==null&&google.maps.event.removeListener(me),Re!==null&&google.maps.event.removeListener(Re),Ve!==null&&google.maps.event.removeListener(Ve),_e!==null&&google.maps.event.removeListener(_e),Ee!==null&&google.maps.event.removeListener(Ee),Se!==null&&google.maps.event.removeListener(Se),Ue!==null&&google.maps.event.removeListener(Ue),Be!==null&&google.maps.event.removeListener(Be),be!==null&&google.maps.event.removeListener(be),ke!==null&&google.maps.event.removeListener(ke),ee&&ee(lt),lt.setMap(null)}},[]),null}ie.memo(iDe);class sDe extends ie.PureComponent{constructor(){super(...arguments),ja(this,"registeredEvents",[]),ja(this,"state",{polyline:null}),ja(this,"setPolylineCallback",()=>{this.state.polyline!==null&&this.props.onLoad&&this.props.onLoad(this.state.polyline)})}componentDidMount(){var e=new google.maps.Polyline(w2(w2({},this.props.options),{},{map:this.context}));this.registeredEvents=Zi({updaterMap:t$,eventMap:e$,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{polyline:e}},this.setPolylineCallback)}componentDidUpdate(e){this.state.polyline!==null&&($i(this.registeredEvents),this.registeredEvents=Zi({updaterMap:t$,eventMap:e$,prevProps:e,nextProps:this.props,instance:this.state.polyline}))}componentWillUnmount(){this.state.polyline!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),$i(this.registeredEvents),this.state.polyline.setMap(null))}render(){return null}}ja(sDe,"contextType",Si);function a$(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function r$(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?a$(Object(a),!0).forEach(function(r){ja(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):a$(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var n$={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},i$={draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},path(t,e){t.setPath(e)},paths(t,e){t.setPaths(e)},visible(t,e){t.setVisible(e)}};function oDe(t){var{options:e,draggable:a,editable:r,visible:i,path:l,paths:c,onDblClick:n,onDragEnd:v,onDragStart:R,onMouseDown:x,onMouseMove:N,onMouseOut:L,onMouseOver:F,onMouseUp:j,onRightClick:$,onClick:H,onDrag:W,onLoad:ee,onUnmount:se,onEdit:fe}=t,le=ie.useContext(Si),[me,ge]=ie.useState(null),[Re,we]=ie.useState(null),[Ve,oe]=ie.useState(null),[_e,Fe]=ie.useState(null),[Ee,ze]=ie.useState(null),[Se,je]=ie.useState(null),[Ue,$e]=ie.useState(null),[Be,qe]=ie.useState(null),[be,Te]=ie.useState(null),[ke,Ge]=ie.useState(null),[at,rt]=ie.useState(null),[lt,ot]=ie.useState(null);return ie.useEffect(()=>{me!==null&&me.setMap(le)},[le]),ie.useEffect(()=>{typeof e<"u"&&me!==null&&me.setOptions(e)},[me,e]),ie.useEffect(()=>{typeof a<"u"&&me!==null&&me.setDraggable(a)},[me,a]),ie.useEffect(()=>{typeof r<"u"&&me!==null&&me.setEditable(r)},[me,r]),ie.useEffect(()=>{typeof i<"u"&&me!==null&&me.setVisible(i)},[me,i]),ie.useEffect(()=>{typeof l<"u"&&me!==null&&me.setPath(l)},[me,l]),ie.useEffect(()=>{typeof c<"u"&&me!==null&&me.setPaths(c)},[me,c]),ie.useEffect(()=>{me&&typeof n=="function"&&(Re!==null&&google.maps.event.removeListener(Re),we(google.maps.event.addListener(me,"dblclick",n)))},[n]),ie.useEffect(()=>{me&&(google.maps.event.addListener(me.getPath(),"insert_at",()=>{fe==null||fe(me)}),google.maps.event.addListener(me.getPath(),"set_at",()=>{fe==null||fe(me)}),google.maps.event.addListener(me.getPath(),"remove_at",()=>{fe==null||fe(me)}))},[me,fe]),ie.useEffect(()=>{me&&typeof v=="function"&&(Ve!==null&&google.maps.event.removeListener(Ve),oe(google.maps.event.addListener(me,"dragend",v)))},[v]),ie.useEffect(()=>{me&&typeof R=="function"&&(_e!==null&&google.maps.event.removeListener(_e),Fe(google.maps.event.addListener(me,"dragstart",R)))},[R]),ie.useEffect(()=>{me&&typeof x=="function"&&(Ee!==null&&google.maps.event.removeListener(Ee),ze(google.maps.event.addListener(me,"mousedown",x)))},[x]),ie.useEffect(()=>{me&&typeof N=="function"&&(Se!==null&&google.maps.event.removeListener(Se),je(google.maps.event.addListener(me,"mousemove",N)))},[N]),ie.useEffect(()=>{me&&typeof L=="function"&&(Ue!==null&&google.maps.event.removeListener(Ue),$e(google.maps.event.addListener(me,"mouseout",L)))},[L]),ie.useEffect(()=>{me&&typeof F=="function"&&(Be!==null&&google.maps.event.removeListener(Be),qe(google.maps.event.addListener(me,"mouseover",F)))},[F]),ie.useEffect(()=>{me&&typeof j=="function"&&(be!==null&&google.maps.event.removeListener(be),Te(google.maps.event.addListener(me,"mouseup",j)))},[j]),ie.useEffect(()=>{me&&typeof $=="function"&&(ke!==null&&google.maps.event.removeListener(ke),Ge(google.maps.event.addListener(me,"rightclick",$)))},[$]),ie.useEffect(()=>{me&&typeof H=="function"&&(at!==null&&google.maps.event.removeListener(at),rt(google.maps.event.addListener(me,"click",H)))},[H]),ie.useEffect(()=>{me&&typeof W=="function"&&(lt!==null&&google.maps.event.removeListener(lt),ot(google.maps.event.addListener(me,"drag",W)))},[W]),ie.useEffect(()=>{var ve=new google.maps.Polygon(r$(r$({},e),{},{map:le}));return l&&ve.setPath(l),c&&ve.setPaths(c),typeof i<"u"&&ve.setVisible(i),typeof r<"u"&&ve.setEditable(r),typeof a<"u"&&ve.setDraggable(a),n&&we(google.maps.event.addListener(ve,"dblclick",n)),v&&oe(google.maps.event.addListener(ve,"dragend",v)),R&&Fe(google.maps.event.addListener(ve,"dragstart",R)),x&&ze(google.maps.event.addListener(ve,"mousedown",x)),N&&je(google.maps.event.addListener(ve,"mousemove",N)),L&&$e(google.maps.event.addListener(ve,"mouseout",L)),F&&qe(google.maps.event.addListener(ve,"mouseover",F)),j&&Te(google.maps.event.addListener(ve,"mouseup",j)),$&&Ge(google.maps.event.addListener(ve,"rightclick",$)),H&&rt(google.maps.event.addListener(ve,"click",H)),W&&ot(google.maps.event.addListener(ve,"drag",W)),ge(ve),ee&&ee(ve),()=>{Re!==null&&google.maps.event.removeListener(Re),Ve!==null&&google.maps.event.removeListener(Ve),_e!==null&&google.maps.event.removeListener(_e),Ee!==null&&google.maps.event.removeListener(Ee),Se!==null&&google.maps.event.removeListener(Se),Ue!==null&&google.maps.event.removeListener(Ue),Be!==null&&google.maps.event.removeListener(Be),be!==null&&google.maps.event.removeListener(be),ke!==null&&google.maps.event.removeListener(ke),at!==null&&google.maps.event.removeListener(at),se&&se(ve),ve.setMap(null)}},[]),null}ie.memo(oDe);class gae extends ie.PureComponent{constructor(){super(...arguments),ja(this,"registeredEvents",[])}componentDidMount(){var e=this.props.options||{};this.polygon=new google.maps.Polygon(e),this.polygon.setMap(this.context),this.registeredEvents=Zi({updaterMap:i$,eventMap:n$,prevProps:{},nextProps:this.props,instance:this.polygon}),this.props.onLoad&&this.props.onLoad(this.polygon)}componentDidUpdate(e){this.polygon&&($i(this.registeredEvents),this.registeredEvents=Zi({updaterMap:i$,eventMap:n$,prevProps:e,nextProps:this.props,instance:this.polygon}))}componentWillUnmount(){this.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.polygon),$i(this.registeredEvents),this.polygon&&this.polygon.setMap(null))}render(){return null}}ja(gae,"contextType",Si);function s$(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function R2(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?s$(Object(a),!0).forEach(function(r){ja(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s$(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var o$={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},l$={bounds(t,e){t.setBounds(e)},draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},visible(t,e){t.setVisible(e)}};function lDe(t){var{options:e,bounds:a,draggable:r,editable:i,visible:l,onDblClick:c,onDragEnd:n,onDragStart:v,onMouseDown:R,onMouseMove:x,onMouseOut:N,onMouseOver:L,onMouseUp:F,onRightClick:j,onClick:$,onDrag:H,onBoundsChanged:W,onLoad:ee,onUnmount:se}=t,fe=ie.useContext(Si),[le,me]=ie.useState(null),[ge,Re]=ie.useState(null),[we,Ve]=ie.useState(null),[oe,_e]=ie.useState(null),[Fe,Ee]=ie.useState(null),[ze,Se]=ie.useState(null),[je,Ue]=ie.useState(null),[$e,Be]=ie.useState(null),[qe,be]=ie.useState(null),[Te,ke]=ie.useState(null),[Ge,at]=ie.useState(null),[rt,lt]=ie.useState(null),[ot,ve]=ie.useState(null);return ie.useEffect(()=>{le!==null&&le.setMap(fe)},[fe]),ie.useEffect(()=>{typeof e<"u"&&le!==null&&le.setOptions(e)},[le,e]),ie.useEffect(()=>{typeof r<"u"&&le!==null&&le.setDraggable(r)},[le,r]),ie.useEffect(()=>{typeof i<"u"&&le!==null&&le.setEditable(i)},[le,i]),ie.useEffect(()=>{typeof l<"u"&&le!==null&&le.setVisible(l)},[le,l]),ie.useEffect(()=>{typeof a<"u"&&le!==null&&le.setBounds(a)},[le,a]),ie.useEffect(()=>{le&&c&&(ge!==null&&google.maps.event.removeListener(ge),Re(google.maps.event.addListener(le,"dblclick",c)))},[c]),ie.useEffect(()=>{le&&n&&(we!==null&&google.maps.event.removeListener(we),Ve(google.maps.event.addListener(le,"dragend",n)))},[n]),ie.useEffect(()=>{le&&v&&(oe!==null&&google.maps.event.removeListener(oe),_e(google.maps.event.addListener(le,"dragstart",v)))},[v]),ie.useEffect(()=>{le&&R&&(Fe!==null&&google.maps.event.removeListener(Fe),Ee(google.maps.event.addListener(le,"mousedown",R)))},[R]),ie.useEffect(()=>{le&&x&&(ze!==null&&google.maps.event.removeListener(ze),Se(google.maps.event.addListener(le,"mousemove",x)))},[x]),ie.useEffect(()=>{le&&N&&(je!==null&&google.maps.event.removeListener(je),Ue(google.maps.event.addListener(le,"mouseout",N)))},[N]),ie.useEffect(()=>{le&&L&&($e!==null&&google.maps.event.removeListener($e),Be(google.maps.event.addListener(le,"mouseover",L)))},[L]),ie.useEffect(()=>{le&&F&&(qe!==null&&google.maps.event.removeListener(qe),be(google.maps.event.addListener(le,"mouseup",F)))},[F]),ie.useEffect(()=>{le&&j&&(Te!==null&&google.maps.event.removeListener(Te),ke(google.maps.event.addListener(le,"rightclick",j)))},[j]),ie.useEffect(()=>{le&&$&&(Ge!==null&&google.maps.event.removeListener(Ge),at(google.maps.event.addListener(le,"click",$)))},[$]),ie.useEffect(()=>{le&&H&&(rt!==null&&google.maps.event.removeListener(rt),lt(google.maps.event.addListener(le,"drag",H)))},[H]),ie.useEffect(()=>{le&&W&&(ot!==null&&google.maps.event.removeListener(ot),ve(google.maps.event.addListener(le,"bounds_changed",W)))},[W]),ie.useEffect(()=>{var Vt=new google.maps.Rectangle(R2(R2({},e),{},{map:fe}));return typeof l<"u"&&Vt.setVisible(l),typeof i<"u"&&Vt.setEditable(i),typeof r<"u"&&Vt.setDraggable(r),typeof a<"u"&&Vt.setBounds(a),c&&Re(google.maps.event.addListener(Vt,"dblclick",c)),n&&Ve(google.maps.event.addListener(Vt,"dragend",n)),v&&_e(google.maps.event.addListener(Vt,"dragstart",v)),R&&Ee(google.maps.event.addListener(Vt,"mousedown",R)),x&&Se(google.maps.event.addListener(Vt,"mousemove",x)),N&&Ue(google.maps.event.addListener(Vt,"mouseout",N)),L&&Be(google.maps.event.addListener(Vt,"mouseover",L)),F&&be(google.maps.event.addListener(Vt,"mouseup",F)),j&&ke(google.maps.event.addListener(Vt,"rightclick",j)),$&&at(google.maps.event.addListener(Vt,"click",$)),H&&lt(google.maps.event.addListener(Vt,"drag",H)),W&&ve(google.maps.event.addListener(Vt,"bounds_changed",W)),me(Vt),ee&&ee(Vt),()=>{ge!==null&&google.maps.event.removeListener(ge),we!==null&&google.maps.event.removeListener(we),oe!==null&&google.maps.event.removeListener(oe),Fe!==null&&google.maps.event.removeListener(Fe),ze!==null&&google.maps.event.removeListener(ze),je!==null&&google.maps.event.removeListener(je),$e!==null&&google.maps.event.removeListener($e),qe!==null&&google.maps.event.removeListener(qe),Te!==null&&google.maps.event.removeListener(Te),Ge!==null&&google.maps.event.removeListener(Ge),rt!==null&&google.maps.event.removeListener(rt),ot!==null&&google.maps.event.removeListener(ot),se&&se(Vt),Vt.setMap(null)}},[]),null}ie.memo(lDe);class uDe extends ie.PureComponent{constructor(){super(...arguments),ja(this,"registeredEvents",[]),ja(this,"state",{rectangle:null}),ja(this,"setRectangleCallback",()=>{this.state.rectangle!==null&&this.props.onLoad&&this.props.onLoad(this.state.rectangle)})}componentDidMount(){var e=new google.maps.Rectangle(R2(R2({},this.props.options),{},{map:this.context}));this.registeredEvents=Zi({updaterMap:l$,eventMap:o$,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{rectangle:e}},this.setRectangleCallback)}componentDidUpdate(e){this.state.rectangle!==null&&($i(this.registeredEvents),this.registeredEvents=Zi({updaterMap:l$,eventMap:o$,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))}componentWillUnmount(){this.state.rectangle!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),$i(this.registeredEvents),this.state.rectangle.setMap(null))}render(){return null}}ja(uDe,"contextType",Si);function u$(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function T2(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?u$(Object(a),!0).forEach(function(r){ja(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u$(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var c$={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},d$={center(t,e){t.setCenter(e)},draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},radius(t,e){t.setRadius(e)},visible(t,e){t.setVisible(e)}},cDe={};function dDe(t){var{options:e,center:a,radius:r,draggable:i,editable:l,visible:c,onDblClick:n,onDragEnd:v,onDragStart:R,onMouseDown:x,onMouseMove:N,onMouseOut:L,onMouseOver:F,onMouseUp:j,onRightClick:$,onClick:H,onDrag:W,onCenterChanged:ee,onRadiusChanged:se,onLoad:fe,onUnmount:le}=t,me=ie.useContext(Si),[ge,Re]=ie.useState(null),[we,Ve]=ie.useState(null),[oe,_e]=ie.useState(null),[Fe,Ee]=ie.useState(null),[ze,Se]=ie.useState(null),[je,Ue]=ie.useState(null),[$e,Be]=ie.useState(null),[qe,be]=ie.useState(null),[Te,ke]=ie.useState(null),[Ge,at]=ie.useState(null),[rt,lt]=ie.useState(null),[ot,ve]=ie.useState(null),[Vt,Bt]=ie.useState(null),[wa,It]=ie.useState(null);return ie.useEffect(()=>{ge!==null&&ge.setMap(me)},[me]),ie.useEffect(()=>{typeof e<"u"&&ge!==null&&ge.setOptions(e)},[ge,e]),ie.useEffect(()=>{typeof i<"u"&&ge!==null&&ge.setDraggable(i)},[ge,i]),ie.useEffect(()=>{typeof l<"u"&&ge!==null&&ge.setEditable(l)},[ge,l]),ie.useEffect(()=>{typeof c<"u"&&ge!==null&&ge.setVisible(c)},[ge,c]),ie.useEffect(()=>{typeof r=="number"&&ge!==null&&ge.setRadius(r)},[ge,r]),ie.useEffect(()=>{typeof a<"u"&&ge!==null&&ge.setCenter(a)},[ge,a]),ie.useEffect(()=>{ge&&n&&(we!==null&&google.maps.event.removeListener(we),Ve(google.maps.event.addListener(ge,"dblclick",n)))},[n]),ie.useEffect(()=>{ge&&v&&(oe!==null&&google.maps.event.removeListener(oe),_e(google.maps.event.addListener(ge,"dragend",v)))},[v]),ie.useEffect(()=>{ge&&R&&(Fe!==null&&google.maps.event.removeListener(Fe),Ee(google.maps.event.addListener(ge,"dragstart",R)))},[R]),ie.useEffect(()=>{ge&&x&&(ze!==null&&google.maps.event.removeListener(ze),Se(google.maps.event.addListener(ge,"mousedown",x)))},[x]),ie.useEffect(()=>{ge&&N&&(je!==null&&google.maps.event.removeListener(je),Ue(google.maps.event.addListener(ge,"mousemove",N)))},[N]),ie.useEffect(()=>{ge&&L&&($e!==null&&google.maps.event.removeListener($e),Be(google.maps.event.addListener(ge,"mouseout",L)))},[L]),ie.useEffect(()=>{ge&&F&&(qe!==null&&google.maps.event.removeListener(qe),be(google.maps.event.addListener(ge,"mouseover",F)))},[F]),ie.useEffect(()=>{ge&&j&&(Te!==null&&google.maps.event.removeListener(Te),ke(google.maps.event.addListener(ge,"mouseup",j)))},[j]),ie.useEffect(()=>{ge&&$&&(Ge!==null&&google.maps.event.removeListener(Ge),at(google.maps.event.addListener(ge,"rightclick",$)))},[$]),ie.useEffect(()=>{ge&&H&&(rt!==null&&google.maps.event.removeListener(rt),lt(google.maps.event.addListener(ge,"click",H)))},[H]),ie.useEffect(()=>{ge&&W&&(ot!==null&&google.maps.event.removeListener(ot),ve(google.maps.event.addListener(ge,"drag",W)))},[W]),ie.useEffect(()=>{ge&&ee&&(Vt!==null&&google.maps.event.removeListener(Vt),Bt(google.maps.event.addListener(ge,"center_changed",ee)))},[H]),ie.useEffect(()=>{ge&&se&&(wa!==null&&google.maps.event.removeListener(wa),It(google.maps.event.addListener(ge,"radius_changed",se)))},[se]),ie.useEffect(()=>{var $t=new google.maps.Circle(T2(T2({},e||cDe),{},{map:me}));return typeof r=="number"&&$t.setRadius(r),typeof a<"u"&&$t.setCenter(a),typeof r=="number"&&$t.setRadius(r),typeof c<"u"&&$t.setVisible(c),typeof l<"u"&&$t.setEditable(l),typeof i<"u"&&$t.setDraggable(i),n&&Ve(google.maps.event.addListener($t,"dblclick",n)),v&&_e(google.maps.event.addListener($t,"dragend",v)),R&&Ee(google.maps.event.addListener($t,"dragstart",R)),x&&Se(google.maps.event.addListener($t,"mousedown",x)),N&&Ue(google.maps.event.addListener($t,"mousemove",N)),L&&Be(google.maps.event.addListener($t,"mouseout",L)),F&&be(google.maps.event.addListener($t,"mouseover",F)),j&&ke(google.maps.event.addListener($t,"mouseup",j)),$&&at(google.maps.event.addListener($t,"rightclick",$)),H&&lt(google.maps.event.addListener($t,"click",H)),W&&ve(google.maps.event.addListener($t,"drag",W)),ee&&Bt(google.maps.event.addListener($t,"center_changed",ee)),se&&It(google.maps.event.addListener($t,"radius_changed",se)),Re($t),fe&&fe($t),()=>{we!==null&&google.maps.event.removeListener(we),oe!==null&&google.maps.event.removeListener(oe),Fe!==null&&google.maps.event.removeListener(Fe),ze!==null&&google.maps.event.removeListener(ze),je!==null&&google.maps.event.removeListener(je),$e!==null&&google.maps.event.removeListener($e),qe!==null&&google.maps.event.removeListener(qe),Te!==null&&google.maps.event.removeListener(Te),Ge!==null&&google.maps.event.removeListener(Ge),rt!==null&&google.maps.event.removeListener(rt),Vt!==null&&google.maps.event.removeListener(Vt),wa!==null&&google.maps.event.removeListener(wa),le&&le($t),$t.setMap(null)}},[]),null}ie.memo(dDe);class yae extends ie.PureComponent{constructor(){super(...arguments),ja(this,"registeredEvents",[]),ja(this,"state",{circle:null}),ja(this,"setCircleCallback",()=>{this.state.circle!==null&&this.props.onLoad&&this.props.onLoad(this.state.circle)})}componentDidMount(){var e=new google.maps.Circle(T2(T2({},this.props.options),{},{map:this.context}));this.registeredEvents=Zi({updaterMap:d$,eventMap:c$,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{circle:e}},this.setCircleCallback)}componentDidUpdate(e){this.state.circle!==null&&($i(this.registeredEvents),this.registeredEvents=Zi({updaterMap:d$,eventMap:c$,prevProps:e,nextProps:this.props,instance:this.state.circle}))}componentWillUnmount(){if(this.state.circle!==null){var e;this.props.onUnmount&&this.props.onUnmount(this.state.circle),$i(this.registeredEvents),(e=this.state.circle)===null||e===void 0||e.setMap(null)}}render(){return null}}ja(yae,"contextType",Si);function h$(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function C2(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?h$(Object(a),!0).forEach(function(r){ja(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):h$(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var f$={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},p$={add(t,e){t.add(e)},addgeojson(t,e,a){t.addGeoJson(e,a)},contains(t,e){t.contains(e)},foreach(t,e){t.forEach(e)},loadgeojson(t,e,a,r){t.loadGeoJson(e,a,r)},overridestyle(t,e,a){t.overrideStyle(e,a)},remove(t,e){t.remove(e)},revertstyle(t,e){t.revertStyle(e)},controlposition(t,e){t.setControlPosition(e)},controls(t,e){t.setControls(e)},drawingmode(t,e){t.setDrawingMode(e)},map(t,e){t.setMap(e)},style(t,e){t.setStyle(e)},togeojson(t,e){t.toGeoJson(e)}};function hDe(t){var{options:e,onClick:a,onDblClick:r,onMouseDown:i,onMouseMove:l,onMouseOut:c,onMouseOver:n,onMouseUp:v,onRightClick:R,onAddFeature:x,onRemoveFeature:N,onRemoveProperty:L,onSetGeometry:F,onSetProperty:j,onLoad:$,onUnmount:H}=t,W=ie.useContext(Si),[ee,se]=ie.useState(null),[fe,le]=ie.useState(null),[me,ge]=ie.useState(null),[Re,we]=ie.useState(null),[Ve,oe]=ie.useState(null),[_e,Fe]=ie.useState(null),[Ee,ze]=ie.useState(null),[Se,je]=ie.useState(null),[Ue,$e]=ie.useState(null),[Be,qe]=ie.useState(null),[be,Te]=ie.useState(null),[ke,Ge]=ie.useState(null),[at,rt]=ie.useState(null),[lt,ot]=ie.useState(null);return ie.useEffect(()=>{ee!==null&&ee.setMap(W)},[W]),ie.useEffect(()=>{ee&&r&&(fe!==null&&google.maps.event.removeListener(fe),le(google.maps.event.addListener(ee,"dblclick",r)))},[r]),ie.useEffect(()=>{ee&&i&&(me!==null&&google.maps.event.removeListener(me),ge(google.maps.event.addListener(ee,"mousedown",i)))},[i]),ie.useEffect(()=>{ee&&l&&(Re!==null&&google.maps.event.removeListener(Re),we(google.maps.event.addListener(ee,"mousemove",l)))},[l]),ie.useEffect(()=>{ee&&c&&(Ve!==null&&google.maps.event.removeListener(Ve),oe(google.maps.event.addListener(ee,"mouseout",c)))},[c]),ie.useEffect(()=>{ee&&n&&(_e!==null&&google.maps.event.removeListener(_e),Fe(google.maps.event.addListener(ee,"mouseover",n)))},[n]),ie.useEffect(()=>{ee&&v&&(Ee!==null&&google.maps.event.removeListener(Ee),ze(google.maps.event.addListener(ee,"mouseup",v)))},[v]),ie.useEffect(()=>{ee&&R&&(Se!==null&&google.maps.event.removeListener(Se),je(google.maps.event.addListener(ee,"rightclick",R)))},[R]),ie.useEffect(()=>{ee&&a&&(Ue!==null&&google.maps.event.removeListener(Ue),$e(google.maps.event.addListener(ee,"click",a)))},[a]),ie.useEffect(()=>{ee&&x&&(Be!==null&&google.maps.event.removeListener(Be),qe(google.maps.event.addListener(ee,"addfeature",x)))},[x]),ie.useEffect(()=>{ee&&N&&(be!==null&&google.maps.event.removeListener(be),Te(google.maps.event.addListener(ee,"removefeature",N)))},[N]),ie.useEffect(()=>{ee&&L&&(ke!==null&&google.maps.event.removeListener(ke),Ge(google.maps.event.addListener(ee,"removeproperty",L)))},[L]),ie.useEffect(()=>{ee&&F&&(at!==null&&google.maps.event.removeListener(at),rt(google.maps.event.addListener(ee,"setgeometry",F)))},[F]),ie.useEffect(()=>{ee&&j&&(lt!==null&&google.maps.event.removeListener(lt),ot(google.maps.event.addListener(ee,"setproperty",j)))},[j]),ie.useEffect(()=>{if(W!==null){var ve=new google.maps.Data(C2(C2({},e),{},{map:W}));r&&le(google.maps.event.addListener(ve,"dblclick",r)),i&&ge(google.maps.event.addListener(ve,"mousedown",i)),l&&we(google.maps.event.addListener(ve,"mousemove",l)),c&&oe(google.maps.event.addListener(ve,"mouseout",c)),n&&Fe(google.maps.event.addListener(ve,"mouseover",n)),v&&ze(google.maps.event.addListener(ve,"mouseup",v)),R&&je(google.maps.event.addListener(ve,"rightclick",R)),a&&$e(google.maps.event.addListener(ve,"click",a)),x&&qe(google.maps.event.addListener(ve,"addfeature",x)),N&&Te(google.maps.event.addListener(ve,"removefeature",N)),L&&Ge(google.maps.event.addListener(ve,"removeproperty",L)),F&&rt(google.maps.event.addListener(ve,"setgeometry",F)),j&&ot(google.maps.event.addListener(ve,"setproperty",j)),se(ve),$&&$(ve)}return()=>{ee&&(fe!==null&&google.maps.event.removeListener(fe),me!==null&&google.maps.event.removeListener(me),Re!==null&&google.maps.event.removeListener(Re),Ve!==null&&google.maps.event.removeListener(Ve),_e!==null&&google.maps.event.removeListener(_e),Ee!==null&&google.maps.event.removeListener(Ee),Se!==null&&google.maps.event.removeListener(Se),Ue!==null&&google.maps.event.removeListener(Ue),Be!==null&&google.maps.event.removeListener(Be),be!==null&&google.maps.event.removeListener(be),ke!==null&&google.maps.event.removeListener(ke),at!==null&&google.maps.event.removeListener(at),lt!==null&&google.maps.event.removeListener(lt),H&&H(ee),ee.setMap(null))}},[]),null}ie.memo(hDe);class fDe extends ie.PureComponent{constructor(){super(...arguments),ja(this,"registeredEvents",[]),ja(this,"state",{data:null}),ja(this,"setDataCallback",()=>{this.state.data!==null&&this.props.onLoad&&this.props.onLoad(this.state.data)})}componentDidMount(){if(this.context!==null){var e=new google.maps.Data(C2(C2({},this.props.options),{},{map:this.context}));this.registeredEvents=Zi({updaterMap:p$,eventMap:f$,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({data:e}),this.setDataCallback)}}componentDidUpdate(e){this.state.data!==null&&($i(this.registeredEvents),this.registeredEvents=Zi({updaterMap:p$,eventMap:f$,prevProps:e,nextProps:this.props,instance:this.state.data}))}componentWillUnmount(){this.state.data!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),$i(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}render(){return null}}ja(fDe,"contextType",Si);function m$(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function g$(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?m$(Object(a),!0).forEach(function(r){ja(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):m$(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var y$={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},A$={options(t,e){t.setOptions(e)},url(t,e){t.setUrl(e)},zIndex(t,e){t.setZIndex(e)}};class pDe extends ie.PureComponent{constructor(){super(...arguments),ja(this,"registeredEvents",[]),ja(this,"state",{kmlLayer:null}),ja(this,"setKmlLayerCallback",()=>{this.state.kmlLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.kmlLayer)})}componentDidMount(){var e=new google.maps.KmlLayer(g$(g$({},this.props.options),{},{map:this.context}));this.registeredEvents=Zi({updaterMap:A$,eventMap:y$,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{kmlLayer:e}},this.setKmlLayerCallback)}componentDidUpdate(e){this.state.kmlLayer!==null&&($i(this.registeredEvents),this.registeredEvents=Zi({updaterMap:A$,eventMap:y$,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))}componentWillUnmount(){this.state.kmlLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),$i(this.registeredEvents),this.state.kmlLayer.setMap(null))}render(){return null}}ja(pDe,"contextType",Si);function Aae(t,e){return typeof e=="function"?e(t.offsetWidth,t.offsetHeight):{x:0,y:0}}function mDe(t,e){return new e(t.lat,t.lng)}function gDe(t,e){return new e(new google.maps.LatLng(t.ne.lat,t.ne.lng),new google.maps.LatLng(t.sw.lat,t.sw.lng))}function yDe(t,e,a){return t instanceof e?t:a(t,e)}function ADe(t,e,a){return t instanceof e?t:a(t,e)}function vDe(t,e,a){var r=t&&t.fromLatLngToDivPixel(a.getNorthEast()),i=t&&t.fromLatLngToDivPixel(a.getSouthWest());return r&&i?{left:"".concat(i.x+e.x,"px"),top:"".concat(r.y+e.y,"px"),width:"".concat(r.x-i.x-e.x,"px"),height:"".concat(i.y-r.y-e.y,"px")}:{left:"-9999px",top:"-9999px"}}function _De(t,e,a){var r=t&&t.fromLatLngToDivPixel(a);if(r){var{x:i,y:l}=r;return{left:"".concat(i+e.x,"px"),top:"".concat(l+e.y,"px")}}return{left:"-9999px",top:"-9999px"}}function vae(t,e,a,r){return a!==void 0?vDe(t,e,ADe(a,google.maps.LatLngBounds,gDe)):_De(t,e,yDe(r,google.maps.LatLng,mDe))}function wDe(t,e){return t.left===e.left&&t.top===e.top&&t.width===e.height&&t.height===e.height}function v$(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function RDe(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?v$(Object(a),!0).forEach(function(r){ja(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v$(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function TDe(t,e,a,r,i){class l extends google.maps.OverlayView{constructor(n,v,R,x){super(),this.container=n,this.pane=v,this.position=R,this.bounds=x}onAdd(){var n,v=(n=this.getPanes())===null||n===void 0?void 0:n[this.pane];v==null||v.appendChild(this.container)}draw(){var n=this.getProjection(),v=RDe({},this.container?Aae(this.container,i):{x:0,y:0}),R=vae(n,v,this.bounds,this.position);for(var[x,N]of Object.entries(R))this.container.style[x]=N}onRemove(){this.container.parentNode!==null&&this.container.parentNode.removeChild(this.container)}}return new l(t,e,a,r)}function _$(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function CDe(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?_$(Object(a),!0).forEach(function(r){ja(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_$(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function w$(t){if(!t)return"";var e=t instanceof google.maps.LatLng?t:new google.maps.LatLng(t.lat,t.lng);return e+""}function R$(t){if(!t)return"";var e=t instanceof google.maps.LatLngBounds?t:new google.maps.LatLngBounds(new google.maps.LatLng(t.south,t.east),new google.maps.LatLng(t.north,t.west));return e+""}function SDe(t){var{position:e,bounds:a,mapPaneName:r,zIndex:i,onLoad:l,onUnmount:c,getPixelPositionOffset:n,children:v}=t,R=ie.useContext(Si),x=ie.useMemo(()=>{var L=document.createElement("div");return L.style.position="absolute",L},[]),N=ie.useMemo(()=>TDe(x,r,e,a,n),[x,r,e,a]);return ie.useEffect(()=>(l==null||l(N),N==null||N.setMap(R),()=>{c==null||c(N),N==null||N.setMap(null)}),[R,N]),ie.useEffect(()=>{x.style.zIndex="".concat(i)},[i,x]),s1.createPortal(v,x)}ie.memo(SDe);class P1 extends ie.PureComponent{constructor(e){super(e),ja(this,"state",{paneEl:null,containerStyle:{position:"absolute"}}),ja(this,"updatePane",()=>{var r=this.props.mapPaneName,i=this.overlayView.getPanes();Hu(!!r,"OverlayView requires props.mapPaneName but got %s",r),i?this.setState({paneEl:i[r]}):this.setState({paneEl:null})}),ja(this,"onAdd",()=>{var r,i;this.updatePane(),(r=(i=this.props).onLoad)===null||r===void 0||r.call(i,this.overlayView)}),ja(this,"onPositionElement",()=>{var r=this.overlayView.getProjection(),i=CDe({x:0,y:0},this.containerRef.current?Aae(this.containerRef.current,this.props.getPixelPositionOffset):{}),l=vae(r,i,this.props.bounds,this.props.position);if(!wDe(l,{left:this.state.containerStyle.left,top:this.state.containerStyle.top,width:this.state.containerStyle.width,height:this.state.containerStyle.height})){var c,n,v,R;this.setState({containerStyle:{top:(c=l.top)!==null&&c!==void 0?c:0,left:(n=l.left)!==null&&n!==void 0?n:0,width:(v=l.width)!==null&&v!==void 0?v:0,height:(R=l.height)!==null&&R!==void 0?R:0,position:"absolute"}})}}),ja(this,"draw",()=>{this.onPositionElement()}),ja(this,"onRemove",()=>{var r,i;this.setState(()=>({paneEl:null})),(r=(i=this.props).onUnmount)===null||r===void 0||r.call(i,this.overlayView)}),this.containerRef=ie.createRef();var a=new google.maps.OverlayView;a.onAdd=this.onAdd,a.draw=this.draw,a.onRemove=this.onRemove,this.overlayView=a}componentDidMount(){this.overlayView.setMap(this.context)}componentDidUpdate(e){var a=w$(e.position),r=w$(this.props.position),i=R$(e.bounds),l=R$(this.props.bounds);(a!==r||i!==l)&&this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()}componentWillUnmount(){this.overlayView.setMap(null)}render(){var e=this.state.paneEl;return e?s1.createPortal(q.jsx("div",{ref:this.containerRef,style:this.state.containerStyle,children:ie.Children.only(this.props.children)}),e):null}}ja(P1,"FLOAT_PANE","floatPane");ja(P1,"MAP_PANE","mapPane");ja(P1,"MARKER_LAYER","markerLayer");ja(P1,"OVERLAY_LAYER","overlayLayer");ja(P1,"OVERLAY_MOUSE_TARGET","overlayMouseTarget");ja(P1,"contextType",Si);function bDe(){}function T$(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function C$(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?T$(Object(a),!0).forEach(function(r){ja(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):T$(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var S$={onDblClick:"dblclick",onClick:"click"},b$={opacity(t,e){t.setOpacity(e)}};function xDe(t){var{url:e,bounds:a,options:r,visible:i}=t,l=ie.useContext(Si),c=new google.maps.LatLngBounds(new google.maps.LatLng(a.south,a.west),new google.maps.LatLng(a.north,a.east)),n=ie.useMemo(()=>new google.maps.GroundOverlay(e,c,r),[]);return ie.useEffect(()=>{n!==null&&n.setMap(l)},[l]),ie.useEffect(()=>{typeof e<"u"&&n!==null&&(n.set("url",e),n.setMap(l))},[n,e]),ie.useEffect(()=>{typeof i<"u"&&n!==null&&n.setOpacity(i?1:0)},[n,i]),ie.useEffect(()=>{var v=new google.maps.LatLngBounds(new google.maps.LatLng(a.south,a.west),new google.maps.LatLng(a.north,a.east));typeof a<"u"&&n!==null&&(n.set("bounds",v),n.setMap(l))},[n,a]),null}ie.memo(xDe);class _ae extends ie.PureComponent{constructor(){super(...arguments),ja(this,"registeredEvents",[]),ja(this,"state",{groundOverlay:null}),ja(this,"setGroundOverlayCallback",()=>{this.state.groundOverlay!==null&&this.props.onLoad&&this.props.onLoad(this.state.groundOverlay)})}componentDidMount(){Hu(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,C$(C$({},this.props.options),{},{map:this.context}));this.registeredEvents=Zi({updaterMap:b$,eventMap:S$,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{groundOverlay:e}},this.setGroundOverlayCallback)}componentDidUpdate(e){this.state.groundOverlay!==null&&($i(this.registeredEvents),this.registeredEvents=Zi({updaterMap:b$,eventMap:S$,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))}componentWillUnmount(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}render(){return null}}ja(_ae,"defaultProps",{onLoad:bDe});ja(_ae,"contextType",Si);function x$(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function S2(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?x$(Object(a),!0).forEach(function(r){ja(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):x$(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var P$={},E$={data(t,e){t.setData(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)}};function PDe(t){var{data:e,onLoad:a,onUnmount:r,options:i}=t,l=ie.useContext(Si),[c,n]=ie.useState(null);return ie.useEffect(()=>{google.maps.visualization||Hu(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)},[]),ie.useEffect(()=>{Hu(!!e,"data property is required in HeatmapLayer %s",e)},[e]),ie.useEffect(()=>{c!==null&&c.setMap(l)},[l]),ie.useEffect(()=>{i&&c!==null&&c.setOptions(i)},[c,i]),ie.useEffect(()=>{var v=new google.maps.visualization.HeatmapLayer(S2(S2({},i),{},{data:e,map:l}));return n(v),a&&a(v),()=>{c!==null&&(r&&r(c),c.setMap(null))}},[]),null}ie.memo(PDe);class EDe extends ie.PureComponent{constructor(){super(...arguments),ja(this,"registeredEvents",[]),ja(this,"state",{heatmapLayer:null}),ja(this,"setHeatmapLayerCallback",()=>{this.state.heatmapLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.heatmapLayer)})}componentDidMount(){Hu(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),Hu(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var e=new google.maps.visualization.HeatmapLayer(S2(S2({},this.props.options),{},{data:this.props.data,map:this.context}));this.registeredEvents=Zi({updaterMap:E$,eventMap:P$,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{heatmapLayer:e}},this.setHeatmapLayerCallback)}componentDidUpdate(e){$i(this.registeredEvents),this.registeredEvents=Zi({updaterMap:E$,eventMap:P$,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})}componentWillUnmount(){this.state.heatmapLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),$i(this.registeredEvents),this.state.heatmapLayer.setMap(null))}render(){return null}}ja(EDe,"contextType",Si);var N$={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},O$={register(t,e,a){t.registerPanoProvider(e,a)},links(t,e){t.setLinks(e)},motionTracking(t,e){t.setMotionTracking(e)},options(t,e){t.setOptions(e)},pano(t,e){t.setPano(e)},position(t,e){t.setPosition(e)},pov(t,e){t.setPov(e)},visible(t,e){t.setVisible(e)},zoom(t,e){t.setZoom(e)}};class NDe extends ie.PureComponent{constructor(){super(...arguments),ja(this,"registeredEvents",[]),ja(this,"state",{streetViewPanorama:null}),ja(this,"setStreetViewPanoramaCallback",()=>{this.state.streetViewPanorama!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewPanorama)})}componentDidMount(){var e,a,r=(e=(a=this.context)===null||a===void 0?void 0:a.getStreetView())!==null&&e!==void 0?e:null;this.registeredEvents=Zi({updaterMap:O$,eventMap:N$,prevProps:{},nextProps:this.props,instance:r}),this.setState(()=>({streetViewPanorama:r}),this.setStreetViewPanoramaCallback)}componentDidUpdate(e){this.state.streetViewPanorama!==null&&($i(this.registeredEvents),this.registeredEvents=Zi({updaterMap:O$,eventMap:N$,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))}componentWillUnmount(){this.state.streetViewPanorama!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),$i(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}render(){return null}}ja(NDe,"contextType",Si);class ODe extends ie.PureComponent{constructor(){super(...arguments),ja(this,"state",{streetViewService:null}),ja(this,"setStreetViewServiceCallback",()=>{this.state.streetViewService!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewService)})}componentDidMount(){var e=new google.maps.StreetViewService;this.setState(function(){return{streetViewService:e}},this.setStreetViewServiceCallback)}componentWillUnmount(){this.state.streetViewService!==null&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}render(){return null}}ja(ODe,"contextType",Si);var V$={onDirectionsChanged:"directions_changed"},z$={directions(t,e){t.setDirections(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},panel(t,e){t.setPanel(e)},routeIndex(t,e){t.setRouteIndex(e)}};class VDe extends ie.PureComponent{constructor(){super(...arguments),ja(this,"registeredEvents",[]),ja(this,"state",{directionsRenderer:null}),ja(this,"setDirectionsRendererCallback",()=>{this.state.directionsRenderer!==null&&(this.state.directionsRenderer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.directionsRenderer))})}componentDidMount(){var e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=Zi({updaterMap:z$,eventMap:V$,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{directionsRenderer:e}},this.setDirectionsRendererCallback)}componentDidUpdate(e){this.state.directionsRenderer!==null&&($i(this.registeredEvents),this.registeredEvents=Zi({updaterMap:z$,eventMap:V$,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))}componentWillUnmount(){this.state.directionsRenderer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),$i(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}render(){return null}}ja(VDe,"contextType",Si);var D$={onPlacesChanged:"places_changed"},M$={bounds(t,e){t.setBounds(e)}};class zDe extends ie.PureComponent{constructor(){super(...arguments),ja(this,"registeredEvents",[]),ja(this,"containerElement",ie.createRef()),ja(this,"state",{searchBox:null}),ja(this,"setSearchBoxCallback",()=>{this.state.searchBox!==null&&this.props.onLoad&&this.props.onLoad(this.state.searchBox)})}componentDidMount(){if(Hu(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),this.containerElement!==null&&this.containerElement.current!==null){var e=this.containerElement.current.querySelector("input");if(e!==null){var a=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=Zi({updaterMap:M$,eventMap:D$,prevProps:{},nextProps:this.props,instance:a}),this.setState(function(){return{searchBox:a}},this.setSearchBoxCallback)}}}componentDidUpdate(e){this.state.searchBox!==null&&($i(this.registeredEvents),this.registeredEvents=Zi({updaterMap:M$,eventMap:D$,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))}componentWillUnmount(){this.state.searchBox!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),$i(this.registeredEvents))}render(){return q.jsx("div",{ref:this.containerElement,children:ie.Children.only(this.props.children)})}}ja(zDe,"contextType",Si);var I$={onPlaceChanged:"place_changed"},L$={bounds(t,e){t.setBounds(e)},restrictions(t,e){t.setComponentRestrictions(e)},fields(t,e){t.setFields(e)},options(t,e){t.setOptions(e)},types(t,e){t.setTypes(e)}};class wae extends ie.PureComponent{constructor(){super(...arguments),ja(this,"registeredEvents",[]),ja(this,"containerElement",ie.createRef()),ja(this,"state",{autocomplete:null}),ja(this,"setAutocompleteCallback",()=>{this.state.autocomplete!==null&&this.props.onLoad&&this.props.onLoad(this.state.autocomplete)})}componentDidMount(){var e;Hu(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var a=(e=this.containerElement.current)===null||e===void 0?void 0:e.querySelector("input");if(a){var r=new google.maps.places.Autocomplete(a,this.props.options);this.registeredEvents=Zi({updaterMap:L$,eventMap:I$,prevProps:{},nextProps:this.props,instance:r}),this.setState(()=>({autocomplete:r}),this.setAutocompleteCallback)}}componentDidUpdate(e){$i(this.registeredEvents),this.registeredEvents=Zi({updaterMap:L$,eventMap:I$,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})}componentWillUnmount(){this.state.autocomplete!==null&&$i(this.registeredEvents)}render(){return q.jsx("div",{ref:this.containerElement,className:this.props.className,children:ie.Children.only(this.props.children)})}}ja(wae,"defaultProps",{className:""});ja(wae,"contextType",Si);const DDe={width:"100%",height:"500px"},MDe={lat:14.69583930582976,lng:120.98925961701622},IDe=["drawing"],LDe=()=>{const[t,e]=ie.useState(!0),[a,r]=ie.useState(null),[i,l]=ie.useState("circle"),[c,n]=ie.useState([]),[v,R]=ie.useState(null),[x,N]=ie.useState(!1),[L,F]=ie.useState([]),[j,$]=ie.useState(-1),[H,W]=ie.useState(null),ee=ie.useRef([]),{isLoaded:se}=d5e({id:"google-map-script",googleMapsApiKey:"AIzaSyCIaoxdmh-5kDnUuVyyCyimR_HwVgQWJYk",libraries:IDe});ie.useEffect(()=>{(async()=>{try{const Se=await Xf(ds(wr,"system_settings","coverage_area"));if(Se.exists()){const je=Se.data();je.geometries&&(n(je.geometries),F([je.geometries]),$(0))}}catch(Se){console.error("Error loading coverage areas:",Se),r("Failed to load coverage areas. Please try again.")}})()},[]);const fe=ie.useCallback(ze=>{R(ze),e(!1)},[]),le=ie.useCallback(()=>{R(null)},[]),me=()=>{ee.current.forEach(ze=>{ze&&typeof ze.setMap=="function"&&ze.setMap(null)}),ee.current=[]},ge=ze=>{let Se;if(ee.current.push(ze),i==="circle"){const je=ze;if(!je||typeof je.getCenter!="function"){console.error("Invalid circle object:",ze);return}const Ue=je.getCenter();Se={type:"circle",center:{lat:Ue.lat(),lng:Ue.lng()},radius:je.getRadius()}}else{const je=ze;if(!je||typeof je.getPath!="function"){console.error("Invalid polygon object:",ze);return}Se={type:"polygon",coordinates:je.getPath().getArray().map($e=>({lat:$e.lat(),lng:$e.lng()}))}}if(Se){const je=[...c,Se];n(je);const Ue=L.slice(0,j+1);Ue.push(je),F(Ue),$(Ue.length-1)}},Re=ze=>{W(ze)},we=(ze,Se,je)=>{let Ue;if(ze==="circle"){const Be=Se.getCenter();Ue={type:"circle",center:{lat:Be.lat(),lng:Be.lng()},radius:Se.getRadius()}}else Ue={type:"polygon",coordinates:Se.getPath().getArray().map(qe=>({lat:qe.lat(),lng:qe.lng()}))};const $e=c.map((Be,qe)=>qe===je?Ue:Be);n($e),W(null)},Ve=()=>{if(j>0){const ze=j-1;$(ze),n(L[ze]),W(null),me()}},oe=()=>{if(j<L.length-1){const ze=j+1;$(ze),n(L[ze]),W(null),me()}},_e=()=>{n([]),me(),W(null);const ze=L.slice(0,j+1);ze.push([]),F(ze),$(ze.length-1)},Fe=async()=>{try{N(!0),await yfe(ds(wr,"system_settings","coverage_area"),{geometries:c,updatedAt:new Date().toISOString()}),r(null)}catch(ze){console.error("Error saving coverage areas:",ze),r("Failed to save coverage areas. Please try again.")}finally{N(!1)}},Ee=()=>{l(i==="circle"?"polygon":"circle"),W(null)};return se?q.jsxs(q.Fragment,{children:[q.jsx(ML,{}),q.jsx("div",{className:"coverage-area-content",children:q.jsxs("div",{className:"coverage-area-container",children:[q.jsxs("div",{className:"coverage-area-header",children:[q.jsx("h1",{children:"Coverage Area Management"}),q.jsx("p",{children:"Define the allowed registration areas for your system"})]}),q.jsxs("div",{className:"map-controls",children:[q.jsx("button",{className:`draw-mode-btn ${i==="circle"?"active":""}`,onClick:Ee,children:i==="circle"?"Switch to Polygon":"Switch to Circle"}),q.jsx("button",{className:"action-btn",onClick:Ve,disabled:j<=0,children:"Undo"}),q.jsx("button",{className:"action-btn",onClick:oe,disabled:j>=L.length-1,children:"Redo"}),q.jsx("button",{className:"action-btn",onClick:_e,disabled:c.length===0,children:"Clear"}),q.jsx("button",{className:"action-btn save",onClick:Fe,disabled:x||c.length===0,children:x?"Saving...":"Save"})]}),a&&q.jsx("div",{className:"error-message",children:a}),q.jsx("div",{className:"map-container",children:q.jsxs(Qze,{mapContainerStyle:DDe,center:MDe,zoom:15,onLoad:fe,onUnmount:le,children:[q.jsx(cae,{drawingMode:i==="circle"?"circle":"polygon",options:{drawingControl:!1,circleOptions:{fillColor:"#009C8C",fillOpacity:.3,strokeColor:"#009C8C",strokeWeight:2,clickable:!0,editable:!1,zIndex:1},polygonOptions:{fillColor:"#009C8C",fillOpacity:.3,strokeColor:"#009C8C",strokeWeight:2,clickable:!0,editable:!1,zIndex:1}},onCircleComplete:ge,onPolygonComplete:ge}),c.map((ze,Se)=>ze.type==="circle"?q.jsx(yae,{center:ze.center,radius:ze.radius,options:{fillColor:"#009C8C",fillOpacity:.3,strokeColor:"#009C8C",strokeWeight:2,editable:H===Se,clickable:!0},onClick:()=>Re(Se),onDragEnd:je=>{H===Se&&we("circle",je.overlay,Se)}},`circle-${Se}`):q.jsx(gae,{paths:ze.coordinates,options:{fillColor:"#009C8C",fillOpacity:.3,strokeColor:"#009C8C",strokeWeight:2,editable:H===Se,clickable:!0},onClick:()=>Re(Se),onMouseUp:je=>{H===Se&&we("polygon",je.overlay,Se)}},`polygon-${Se}`))]})}),q.jsxs("div",{className:"instructions",children:[q.jsx("h3",{children:"How to use:"}),q.jsxs("ol",{children:[q.jsx("li",{children:"Click the button above to switch between Circle and Polygon drawing modes"}),q.jsx("li",{children:"Draw your coverage areas on the map (you can draw multiple areas)"}),q.jsx("li",{children:`Click "Save Areas" when you're done`}),q.jsx("li",{children:'Use "Clear All" to remove all areas and start over'}),q.jsx("li",{children:"Click a shape to select and edit it, then save your changes"})]})]})]})})]}):q.jsx("div",{className:"loading",children:"Loading map..."})};class FDe extends Ot.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,a){console.error("Error caught by boundary:",e,a)}render(){return this.state.hasError?q.jsxs("div",{className:"error-container",children:[q.jsx("h2",{children:"Something went wrong."}),q.jsx("p",{children:"Please refresh the page or try again later."})]}):this.props.children}}const kDe=()=>{const[t,e]=ie.useState(null);return ie.useEffect(()=>{Dv.onAuthStateChanged(a=>{e(a)})},[]),q.jsx(FDe,{children:q.jsx(zie,{children:q.jsxs(cie,{children:[q.jsx(Kf,{path:"/login",element:t?q.jsx(j5,{}):q.jsx(Mp,{})}),q.jsx(Kf,{path:"/dashboard",element:t?q.jsx(j5,{}):q.jsx(Mp,{})}),q.jsx(Kf,{path:"/user-management",element:t?q.jsx(gEe,{}):q.jsx(Mp,{})}),q.jsx(Kf,{path:"/bike-management",element:t?q.jsx(WOe,{}):q.jsx(Mp,{})}),q.jsx(Kf,{path:"/stations",element:t?q.jsx(Pze,{}):q.jsx(Mp,{})}),q.jsx(Kf,{path:"/admin-management",element:t?q.jsx(Eze,{}):q.jsx(Mp,{})}),q.jsx(Kf,{path:"/rate-management",element:t?q.jsx(Nze,{}):q.jsx(Mp,{})}),q.jsx(Kf,{path:"/system-analytics",element:t?q.jsx(Uze,{}):q.jsx(Mp,{})}),q.jsx(Kf,{path:"/ride-details",element:t?q.jsx(Bze,{}):q.jsx(Mp,{})}),q.jsx(Kf,{path:"/coverage-area",element:t?q.jsx(LDe,{}):q.jsx(Mp,{})}),q.jsx(Kf,{path:"/",element:t?q.jsx(j5,{}):q.jsx(Mp,{})})]})})})};_ne.createRoot(document.getElementById("root")).render(q.jsx(ie.StrictMode,{children:q.jsx(kDe,{})}));export{qs as _,OS as c,ss as g};
