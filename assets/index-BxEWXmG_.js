(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function a(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=a(s);fetch(s.href,l)}})();var $S=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ji(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pE={exports:{}},iw={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HF;function Hee(){if(HF)return iw;HF=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function a(r,s,l){var h=null;if(l!==void 0&&(h=""+l),s.key!==void 0&&(h=""+s.key),"key"in s){l={};for(var n in s)n!=="key"&&(l[n]=s[n])}else l=s;return s=l.ref,{$$typeof:t,type:r,key:h,ref:s!==void 0?s:null,props:l}}return iw.Fragment=e,iw.jsx=a,iw.jsxs=a,iw}var $F;function $ee(){return $F||($F=1,pE.exports=Hee()),pE.exports}var K=$ee(),mE={exports:{}},gi={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KF;function Kee(){if(KF)return gi;KF=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),h=Symbol.for("react.context"),n=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),T=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),z=Symbol.iterator;function k(Ue){return Ue===null||typeof Ue!="object"?null:(Ue=z&&Ue[z]||Ue["@@iterator"],typeof Ue=="function"?Ue:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,q={};function $(Ue,He,Ce){this.props=Ue,this.context=He,this.refs=q,this.updater=Ce||U}$.prototype.isReactComponent={},$.prototype.setState=function(Ue,He){if(typeof Ue!="object"&&typeof Ue!="function"&&Ue!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ue,He,"setState")},$.prototype.forceUpdate=function(Ue){this.updater.enqueueForceUpdate(this,Ue,"forceUpdate")};function J(){}J.prototype=$.prototype;function ie(Ue,He,Ce){this.props=Ue,this.context=He,this.refs=q,this.updater=Ce||U}var de=ie.prototype=new J;de.constructor=ie,Z(de,$.prototype),de.isPureReactComponent=!0;var ge=Array.isArray,he={H:null,A:null,T:null,S:null},Ae=Object.prototype.hasOwnProperty;function me(Ue,He,Ce,Se,$e,ft){return Ce=ft.ref,{$$typeof:t,type:Ue,key:He,ref:Ce!==void 0?Ce:null,props:ft}}function Re(Ue,He){return me(Ue.type,He,void 0,void 0,void 0,Ue.props)}function be(Ue){return typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===t}function De(Ue){var He={"=":"=0",":":"=2"};return"$"+Ue.replace(/[=:]/g,function(Ce){return He[Ce]})}var ne=/\/+/g;function ye(Ue,He){return typeof Ue=="object"&&Ue!==null&&Ue.key!=null?De(""+Ue.key):He.toString(36)}function Me(){}function ze(Ue){switch(Ue.status){case"fulfilled":return Ue.value;case"rejected":throw Ue.reason;default:switch(typeof Ue.status=="string"?Ue.then(Me,Me):(Ue.status="pending",Ue.then(function(He){Ue.status==="pending"&&(Ue.status="fulfilled",Ue.value=He)},function(He){Ue.status==="pending"&&(Ue.status="rejected",Ue.reason=He)})),Ue.status){case"fulfilled":return Ue.value;case"rejected":throw Ue.reason}}throw Ue}function Le(Ue,He,Ce,Se,$e){var ft=typeof Ue;(ft==="undefined"||ft==="boolean")&&(Ue=null);var Je=!1;if(Ue===null)Je=!0;else switch(ft){case"bigint":case"string":case"number":Je=!0;break;case"object":switch(Ue.$$typeof){case t:case e:Je=!0;break;case E:return Je=Ue._init,Le(Je(Ue._payload),He,Ce,Se,$e)}}if(Je)return $e=$e(Ue),Je=Se===""?"."+ye(Ue,0):Se,ge($e)?(Ce="",Je!=null&&(Ce=Je.replace(ne,"$&/")+"/"),Le($e,He,Ce,"",function(ct){return ct})):$e!=null&&(be($e)&&($e=Re($e,Ce+($e.key==null||Ue&&Ue.key===$e.key?"":(""+$e.key).replace(ne,"$&/")+"/")+Je)),He.push($e)),1;Je=0;var wt=Se===""?".":Se+":";if(ge(Ue))for(var it=0;it<Ue.length;it++)Se=Ue[it],ft=wt+ye(Se,it),Je+=Le(Se,He,Ce,ft,$e);else if(it=k(Ue),typeof it=="function")for(Ue=it.call(Ue),it=0;!(Se=Ue.next()).done;)Se=Se.value,ft=wt+ye(Se,it++),Je+=Le(Se,He,Ce,ft,$e);else if(ft==="object"){if(typeof Ue.then=="function")return Le(ze(Ue),He,Ce,Se,$e);throw He=String(Ue),Error("Objects are not valid as a React child (found: "+(He==="[object Object]"?"object with keys {"+Object.keys(Ue).join(", ")+"}":He)+"). If you meant to render a collection of children, use an array instead.")}return Je}function Ie(Ue,He,Ce){if(Ue==null)return Ue;var Se=[],$e=0;return Le(Ue,Se,"","",function(ft){return He.call(Ce,ft,$e++)}),Se}function qe(Ue){if(Ue._status===-1){var He=Ue._result;He=He(),He.then(function(Ce){(Ue._status===0||Ue._status===-1)&&(Ue._status=1,Ue._result=Ce)},function(Ce){(Ue._status===0||Ue._status===-1)&&(Ue._status=2,Ue._result=Ce)}),Ue._status===-1&&(Ue._status=0,Ue._result=He)}if(Ue._status===1)return Ue._result.default;throw Ue._result}var ke=typeof reportError=="function"?reportError:function(Ue){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var He=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Ue=="object"&&Ue!==null&&typeof Ue.message=="string"?String(Ue.message):String(Ue),error:Ue});if(!window.dispatchEvent(He))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Ue);return}console.error(Ue)};function tt(){}return gi.Children={map:Ie,forEach:function(Ue,He,Ce){Ie(Ue,function(){He.apply(this,arguments)},Ce)},count:function(Ue){var He=0;return Ie(Ue,function(){He++}),He},toArray:function(Ue){return Ie(Ue,function(He){return He})||[]},only:function(Ue){if(!be(Ue))throw Error("React.Children.only expected to receive a single React element child.");return Ue}},gi.Component=$,gi.Fragment=a,gi.Profiler=s,gi.PureComponent=ie,gi.StrictMode=r,gi.Suspense=w,gi.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=he,gi.act=function(){throw Error("act(...) is not supported in production builds of React.")},gi.cache=function(Ue){return function(){return Ue.apply(null,arguments)}},gi.cloneElement=function(Ue,He,Ce){if(Ue==null)throw Error("The argument must be a React element, but you passed "+Ue+".");var Se=Z({},Ue.props),$e=Ue.key,ft=void 0;if(He!=null)for(Je in He.ref!==void 0&&(ft=void 0),He.key!==void 0&&($e=""+He.key),He)!Ae.call(He,Je)||Je==="key"||Je==="__self"||Je==="__source"||Je==="ref"&&He.ref===void 0||(Se[Je]=He[Je]);var Je=arguments.length-2;if(Je===1)Se.children=Ce;else if(1<Je){for(var wt=Array(Je),it=0;it<Je;it++)wt[it]=arguments[it+2];Se.children=wt}return me(Ue.type,$e,void 0,void 0,ft,Se)},gi.createContext=function(Ue){return Ue={$$typeof:h,_currentValue:Ue,_currentValue2:Ue,_threadCount:0,Provider:null,Consumer:null},Ue.Provider=Ue,Ue.Consumer={$$typeof:l,_context:Ue},Ue},gi.createElement=function(Ue,He,Ce){var Se,$e={},ft=null;if(He!=null)for(Se in He.key!==void 0&&(ft=""+He.key),He)Ae.call(He,Se)&&Se!=="key"&&Se!=="__self"&&Se!=="__source"&&($e[Se]=He[Se]);var Je=arguments.length-2;if(Je===1)$e.children=Ce;else if(1<Je){for(var wt=Array(Je),it=0;it<Je;it++)wt[it]=arguments[it+2];$e.children=wt}if(Ue&&Ue.defaultProps)for(Se in Je=Ue.defaultProps,Je)$e[Se]===void 0&&($e[Se]=Je[Se]);return me(Ue,ft,void 0,void 0,null,$e)},gi.createRef=function(){return{current:null}},gi.forwardRef=function(Ue){return{$$typeof:n,render:Ue}},gi.isValidElement=be,gi.lazy=function(Ue){return{$$typeof:E,_payload:{_status:-1,_result:Ue},_init:qe}},gi.memo=function(Ue,He){return{$$typeof:T,type:Ue,compare:He===void 0?null:He}},gi.startTransition=function(Ue){var He=he.T,Ce={};he.T=Ce;try{var Se=Ue(),$e=he.S;$e!==null&&$e(Ce,Se),typeof Se=="object"&&Se!==null&&typeof Se.then=="function"&&Se.then(tt,ke)}catch(ft){ke(ft)}finally{he.T=He}},gi.unstable_useCacheRefresh=function(){return he.H.useCacheRefresh()},gi.use=function(Ue){return he.H.use(Ue)},gi.useActionState=function(Ue,He,Ce){return he.H.useActionState(Ue,He,Ce)},gi.useCallback=function(Ue,He){return he.H.useCallback(Ue,He)},gi.useContext=function(Ue){return he.H.useContext(Ue)},gi.useDebugValue=function(){},gi.useDeferredValue=function(Ue,He){return he.H.useDeferredValue(Ue,He)},gi.useEffect=function(Ue,He){return he.H.useEffect(Ue,He)},gi.useId=function(){return he.H.useId()},gi.useImperativeHandle=function(Ue,He,Ce){return he.H.useImperativeHandle(Ue,He,Ce)},gi.useInsertionEffect=function(Ue,He){return he.H.useInsertionEffect(Ue,He)},gi.useLayoutEffect=function(Ue,He){return he.H.useLayoutEffect(Ue,He)},gi.useMemo=function(Ue,He){return he.H.useMemo(Ue,He)},gi.useOptimistic=function(Ue,He){return he.H.useOptimistic(Ue,He)},gi.useReducer=function(Ue,He,Ce){return he.H.useReducer(Ue,He,Ce)},gi.useRef=function(Ue){return he.H.useRef(Ue)},gi.useState=function(Ue){return he.H.useState(Ue)},gi.useSyncExternalStore=function(Ue,He,Ce){return he.H.useSyncExternalStore(Ue,He,Ce)},gi.useTransition=function(){return he.H.useTransition()},gi.version="19.0.0",gi}var WF;function QM(){return WF||(WF=1,mE.exports=Kee()),mE.exports}var nt=QM();const Vt=Ji(nt);var yE={exports:{}},sw={},gE={exports:{}},AE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YF;function Wee(){return YF||(YF=1,function(t){function e(Ie,qe){var ke=Ie.length;Ie.push(qe);e:for(;0<ke;){var tt=ke-1>>>1,Ue=Ie[tt];if(0<s(Ue,qe))Ie[tt]=qe,Ie[ke]=Ue,ke=tt;else break e}}function a(Ie){return Ie.length===0?null:Ie[0]}function r(Ie){if(Ie.length===0)return null;var qe=Ie[0],ke=Ie.pop();if(ke!==qe){Ie[0]=ke;e:for(var tt=0,Ue=Ie.length,He=Ue>>>1;tt<He;){var Ce=2*(tt+1)-1,Se=Ie[Ce],$e=Ce+1,ft=Ie[$e];if(0>s(Se,ke))$e<Ue&&0>s(ft,Se)?(Ie[tt]=ft,Ie[$e]=ke,tt=$e):(Ie[tt]=Se,Ie[Ce]=ke,tt=Ce);else if($e<Ue&&0>s(ft,ke))Ie[tt]=ft,Ie[$e]=ke,tt=$e;else break e}}return qe}function s(Ie,qe){var ke=Ie.sortIndex-qe.sortIndex;return ke!==0?ke:Ie.id-qe.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var h=Date,n=h.now();t.unstable_now=function(){return h.now()-n}}var w=[],T=[],E=1,z=null,k=3,U=!1,Z=!1,q=!1,$=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;function de(Ie){for(var qe=a(T);qe!==null;){if(qe.callback===null)r(T);else if(qe.startTime<=Ie)r(T),qe.sortIndex=qe.expirationTime,e(w,qe);else break;qe=a(T)}}function ge(Ie){if(q=!1,de(Ie),!Z)if(a(w)!==null)Z=!0,ze();else{var qe=a(T);qe!==null&&Le(ge,qe.startTime-Ie)}}var he=!1,Ae=-1,me=5,Re=-1;function be(){return!(t.unstable_now()-Re<me)}function De(){if(he){var Ie=t.unstable_now();Re=Ie;var qe=!0;try{e:{Z=!1,q&&(q=!1,J(Ae),Ae=-1),U=!0;var ke=k;try{t:{for(de(Ie),z=a(w);z!==null&&!(z.expirationTime>Ie&&be());){var tt=z.callback;if(typeof tt=="function"){z.callback=null,k=z.priorityLevel;var Ue=tt(z.expirationTime<=Ie);if(Ie=t.unstable_now(),typeof Ue=="function"){z.callback=Ue,de(Ie),qe=!0;break t}z===a(w)&&r(w),de(Ie)}else r(w);z=a(w)}if(z!==null)qe=!0;else{var He=a(T);He!==null&&Le(ge,He.startTime-Ie),qe=!1}}break e}finally{z=null,k=ke,U=!1}qe=void 0}}finally{qe?ne():he=!1}}}var ne;if(typeof ie=="function")ne=function(){ie(De)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,Me=ye.port2;ye.port1.onmessage=De,ne=function(){Me.postMessage(null)}}else ne=function(){$(De,0)};function ze(){he||(he=!0,ne())}function Le(Ie,qe){Ae=$(function(){Ie(t.unstable_now())},qe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Ie){Ie.callback=null},t.unstable_continueExecution=function(){Z||U||(Z=!0,ze())},t.unstable_forceFrameRate=function(Ie){0>Ie||125<Ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):me=0<Ie?Math.floor(1e3/Ie):5},t.unstable_getCurrentPriorityLevel=function(){return k},t.unstable_getFirstCallbackNode=function(){return a(w)},t.unstable_next=function(Ie){switch(k){case 1:case 2:case 3:var qe=3;break;default:qe=k}var ke=k;k=qe;try{return Ie()}finally{k=ke}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Ie,qe){switch(Ie){case 1:case 2:case 3:case 4:case 5:break;default:Ie=3}var ke=k;k=Ie;try{return qe()}finally{k=ke}},t.unstable_scheduleCallback=function(Ie,qe,ke){var tt=t.unstable_now();switch(typeof ke=="object"&&ke!==null?(ke=ke.delay,ke=typeof ke=="number"&&0<ke?tt+ke:tt):ke=tt,Ie){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=ke+Ue,Ie={id:E++,callback:qe,priorityLevel:Ie,startTime:ke,expirationTime:Ue,sortIndex:-1},ke>tt?(Ie.sortIndex=ke,e(T,Ie),a(w)===null&&Ie===a(T)&&(q?(J(Ae),Ae=-1):q=!0,Le(ge,ke-tt))):(Ie.sortIndex=Ue,e(w,Ie),Z||U||(Z=!0,ze())),Ie},t.unstable_shouldYield=be,t.unstable_wrapCallback=function(Ie){var qe=k;return function(){var ke=k;k=qe;try{return Ie.apply(this,arguments)}finally{k=ke}}}}(AE)),AE}var XF;function Yee(){return XF||(XF=1,gE.exports=Wee()),gE.exports}var _E={exports:{}},Qc={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JF;function Xee(){if(JF)return Qc;JF=1;var t=QM();function e(w){var T="https://react.dev/errors/"+w;if(1<arguments.length){T+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)T+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+w+"; visit "+T+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var r={d:{f:a,r:function(){throw Error(e(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(w,T,E){var z=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:z==null?null:""+z,children:w,containerInfo:T,implementation:E}}var h=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function n(w,T){if(w==="font")return"";if(typeof T=="string")return T==="use-credentials"?T:""}return Qc.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Qc.createPortal=function(w,T){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!T||T.nodeType!==1&&T.nodeType!==9&&T.nodeType!==11)throw Error(e(299));return l(w,T,null,E)},Qc.flushSync=function(w){var T=h.T,E=r.p;try{if(h.T=null,r.p=2,w)return w()}finally{h.T=T,r.p=E,r.d.f()}},Qc.preconnect=function(w,T){typeof w=="string"&&(T?(T=T.crossOrigin,T=typeof T=="string"?T==="use-credentials"?T:"":void 0):T=null,r.d.C(w,T))},Qc.prefetchDNS=function(w){typeof w=="string"&&r.d.D(w)},Qc.preinit=function(w,T){if(typeof w=="string"&&T&&typeof T.as=="string"){var E=T.as,z=n(E,T.crossOrigin),k=typeof T.integrity=="string"?T.integrity:void 0,U=typeof T.fetchPriority=="string"?T.fetchPriority:void 0;E==="style"?r.d.S(w,typeof T.precedence=="string"?T.precedence:void 0,{crossOrigin:z,integrity:k,fetchPriority:U}):E==="script"&&r.d.X(w,{crossOrigin:z,integrity:k,fetchPriority:U,nonce:typeof T.nonce=="string"?T.nonce:void 0})}},Qc.preinitModule=function(w,T){if(typeof w=="string")if(typeof T=="object"&&T!==null){if(T.as==null||T.as==="script"){var E=n(T.as,T.crossOrigin);r.d.M(w,{crossOrigin:E,integrity:typeof T.integrity=="string"?T.integrity:void 0,nonce:typeof T.nonce=="string"?T.nonce:void 0})}}else T==null&&r.d.M(w)},Qc.preload=function(w,T){if(typeof w=="string"&&typeof T=="object"&&T!==null&&typeof T.as=="string"){var E=T.as,z=n(E,T.crossOrigin);r.d.L(w,E,{crossOrigin:z,integrity:typeof T.integrity=="string"?T.integrity:void 0,nonce:typeof T.nonce=="string"?T.nonce:void 0,type:typeof T.type=="string"?T.type:void 0,fetchPriority:typeof T.fetchPriority=="string"?T.fetchPriority:void 0,referrerPolicy:typeof T.referrerPolicy=="string"?T.referrerPolicy:void 0,imageSrcSet:typeof T.imageSrcSet=="string"?T.imageSrcSet:void 0,imageSizes:typeof T.imageSizes=="string"?T.imageSizes:void 0,media:typeof T.media=="string"?T.media:void 0})}},Qc.preloadModule=function(w,T){if(typeof w=="string")if(T){var E=n(T.as,T.crossOrigin);r.d.m(w,{as:typeof T.as=="string"&&T.as!=="script"?T.as:void 0,crossOrigin:E,integrity:typeof T.integrity=="string"?T.integrity:void 0})}else r.d.m(w)},Qc.requestFormReset=function(w){r.d.r(w)},Qc.unstable_batchedUpdates=function(w,T){return w(T)},Qc.useFormState=function(w,T,E){return h.H.useFormState(w,T,E)},Qc.useFormStatus=function(){return h.H.useHostTransitionStatus()},Qc.version="19.0.0",Qc}var QF;function Jee(){if(QF)return _E.exports;QF=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),_E.exports=Xee(),_E.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e6;function Qee(){if(e6)return sw;e6=1;var t=Yee(),e=QM(),a=Jee();function r(p){var v="https://react.dev/errors/"+p;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)v+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+p+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}var l=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),U=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),de=Symbol.for("react.offscreen"),ge=Symbol.for("react.memo_cache_sentinel"),he=Symbol.iterator;function Ae(p){return p===null||typeof p!="object"?null:(p=he&&p[he]||p["@@iterator"],typeof p=="function"?p:null)}var me=Symbol.for("react.client.reference");function Re(p){if(p==null)return null;if(typeof p=="function")return p.$$typeof===me?null:p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case w:return"Fragment";case n:return"Portal";case E:return"Profiler";case T:return"StrictMode";case q:return"Suspense";case $:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case U:return(p.displayName||"Context")+".Provider";case k:return(p._context.displayName||"Context")+".Consumer";case Z:var v=p.render;return p=p.displayName,p||(p=v.displayName||v.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case J:return v=p.displayName||null,v!==null?v:Re(p.type)||"Memo";case ie:v=p._payload,p=p._init;try{return Re(p(v))}catch{}}return null}var be=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,De=Object.assign,ne,ye;function Me(p){if(ne===void 0)try{throw Error()}catch(x){var v=x.stack.trim().match(/\n( *(at )?)/);ne=v&&v[1]||"",ye=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ne+p+ye}var ze=!1;function Le(p,v){if(!p||ze)return"";ze=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var F={DetermineComponentFrameRoot:function(){try{if(v){var nr=function(){throw Error()};if(Object.defineProperty(nr.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(nr,[])}catch(Za){var ba=Za}Reflect.construct(p,[],nr)}else{try{nr.call()}catch(Za){ba=Za}p.call(nr.prototype)}}else{try{throw Error()}catch(Za){ba=Za}(nr=p())&&typeof nr.catch=="function"&&nr.catch(function(){})}}catch(Za){if(Za&&ba&&typeof Za.stack=="string")return[Za.stack,ba.stack]}return[null,null]}};F.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var Y=Object.getOwnPropertyDescriptor(F.DetermineComponentFrameRoot,"name");Y&&Y.configurable&&Object.defineProperty(F.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var se=F.DetermineComponentFrameRoot(),Fe=se[0],dt=se[1];if(Fe&&dt){var Ft=Fe.split(`
`),oa=dt.split(`
`);for(Y=F=0;F<Ft.length&&!Ft[F].includes("DetermineComponentFrameRoot");)F++;for(;Y<oa.length&&!oa[Y].includes("DetermineComponentFrameRoot");)Y++;if(F===Ft.length||Y===oa.length)for(F=Ft.length-1,Y=oa.length-1;1<=F&&0<=Y&&Ft[F]!==oa[Y];)Y--;for(;1<=F&&0<=Y;F--,Y--)if(Ft[F]!==oa[Y]){if(F!==1||Y!==1)do if(F--,Y--,0>Y||Ft[F]!==oa[Y]){var ja=`
`+Ft[F].replace(" at new "," at ");return p.displayName&&ja.includes("<anonymous>")&&(ja=ja.replace("<anonymous>",p.displayName)),ja}while(1<=F&&0<=Y);break}}}finally{ze=!1,Error.prepareStackTrace=x}return(x=p?p.displayName||p.name:"")?Me(x):""}function Ie(p){switch(p.tag){case 26:case 27:case 5:return Me(p.type);case 16:return Me("Lazy");case 13:return Me("Suspense");case 19:return Me("SuspenseList");case 0:case 15:return p=Le(p.type,!1),p;case 11:return p=Le(p.type.render,!1),p;case 1:return p=Le(p.type,!0),p;default:return""}}function qe(p){try{var v="";do v+=Ie(p),p=p.return;while(p);return v}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}function ke(p){var v=p,x=p;if(p.alternate)for(;v.return;)v=v.return;else{p=v;do v=p,(v.flags&4098)!==0&&(x=v.return),p=v.return;while(p)}return v.tag===3?x:null}function tt(p){if(p.tag===13){var v=p.memoizedState;if(v===null&&(p=p.alternate,p!==null&&(v=p.memoizedState)),v!==null)return v.dehydrated}return null}function Ue(p){if(ke(p)!==p)throw Error(r(188))}function He(p){var v=p.alternate;if(!v){if(v=ke(p),v===null)throw Error(r(188));return v!==p?null:p}for(var x=p,F=v;;){var Y=x.return;if(Y===null)break;var se=Y.alternate;if(se===null){if(F=Y.return,F!==null){x=F;continue}break}if(Y.child===se.child){for(se=Y.child;se;){if(se===x)return Ue(Y),p;if(se===F)return Ue(Y),v;se=se.sibling}throw Error(r(188))}if(x.return!==F.return)x=Y,F=se;else{for(var Fe=!1,dt=Y.child;dt;){if(dt===x){Fe=!0,x=Y,F=se;break}if(dt===F){Fe=!0,F=Y,x=se;break}dt=dt.sibling}if(!Fe){for(dt=se.child;dt;){if(dt===x){Fe=!0,x=se,F=Y;break}if(dt===F){Fe=!0,F=se,x=Y;break}dt=dt.sibling}if(!Fe)throw Error(r(189))}}if(x.alternate!==F)throw Error(r(190))}if(x.tag!==3)throw Error(r(188));return x.stateNode.current===x?p:v}function Ce(p){var v=p.tag;if(v===5||v===26||v===27||v===6)return p;for(p=p.child;p!==null;){if(v=Ce(p),v!==null)return v;p=p.sibling}return null}var Se=Array.isArray,$e=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ft={pending:!1,data:null,method:null,action:null},Je=[],wt=-1;function it(p){return{current:p}}function ct(p){0>wt||(p.current=Je[wt],Je[wt]=null,wt--)}function _e(p,v){wt++,Je[wt]=p.current,p.current=v}var Jt=it(null),Zt=it(null),Pa=it(null),Bt=it(null);function la(p,v){switch(_e(Pa,v),_e(Zt,p),_e(Jt,null),p=v.nodeType,p){case 9:case 11:v=(v=v.documentElement)&&(v=v.namespaceURI)?h1(v):0;break;default:if(p=p===8?v.parentNode:v,v=p.tagName,p=p.namespaceURI)p=h1(p),v=f1(p,v);else switch(v){case"svg":v=1;break;case"math":v=2;break;default:v=0}}ct(Jt),_e(Jt,v)}function Rt(){ct(Jt),ct(Zt),ct(Pa)}function yr(p){p.memoizedState!==null&&_e(Bt,p);var v=Jt.current,x=f1(v,p.type);v!==x&&(_e(Zt,p),_e(Jt,x))}function za(p){Zt.current===p&&(ct(Jt),ct(Zt)),Bt.current===p&&(ct(Bt),Jy._currentValue=ft)}var Va=Object.prototype.hasOwnProperty,er=t.unstable_scheduleCallback,cr=t.unstable_cancelCallback,ur=t.unstable_shouldYield,Pr=t.unstable_requestPaint,ka=t.unstable_now,jr=t.unstable_getCurrentPriorityLevel,pn=t.unstable_ImmediatePriority,Dn=t.unstable_UserBlockingPriority,Rn=t.unstable_NormalPriority,va=t.unstable_LowPriority,Wa=t.unstable_IdlePriority,ca=t.log,Qa=t.unstable_setDisableYieldValue,gr=null,Zn=null;function Mn(p){if(Zn&&typeof Zn.onCommitFiberRoot=="function")try{Zn.onCommitFiberRoot(gr,p,void 0,(p.current.flags&128)===128)}catch{}}function mn(p){if(typeof ca=="function"&&Qa(p),Zn&&typeof Zn.setStrictMode=="function")try{Zn.setStrictMode(gr,p)}catch{}}var en=Math.clz32?Math.clz32:Bi,Er=Math.log,As=Math.LN2;function Bi(p){return p>>>=0,p===0?32:31-(Er(p)/As|0)|0}var Qi=128,Oo=4194304;function Ni(p){var v=p&42;if(v!==0)return v;switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return p&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return p}}function fn(p,v){var x=p.pendingLanes;if(x===0)return 0;var F=0,Y=p.suspendedLanes,se=p.pingedLanes,Fe=p.warmLanes;p=p.finishedLanes!==0;var dt=x&134217727;return dt!==0?(x=dt&~Y,x!==0?F=Ni(x):(se&=dt,se!==0?F=Ni(se):p||(Fe=dt&~Fe,Fe!==0&&(F=Ni(Fe))))):(dt=x&~Y,dt!==0?F=Ni(dt):se!==0?F=Ni(se):p||(Fe=x&~Fe,Fe!==0&&(F=Ni(Fe)))),F===0?0:v!==0&&v!==F&&(v&Y)===0&&(Y=F&-F,Fe=v&-v,Y>=Fe||Y===32&&(Fe&4194176)!==0)?v:F}function ui(p,v){return(p.pendingLanes&~(p.suspendedLanes&~p.pingedLanes)&v)===0}function Ec(p,v){switch(p){case 1:case 2:case 4:case 8:return v+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Us(){var p=Qi;return Qi<<=1,(Qi&4194176)===0&&(Qi=128),p}function Xt(){var p=Oo;return Oo<<=1,(Oo&62914560)===0&&(Oo=4194304),p}function xe(p){for(var v=[],x=0;31>x;x++)v.push(p);return v}function Oe(p,v){p.pendingLanes|=v,v!==268435456&&(p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0)}function rt(p,v,x,F,Y,se){var Fe=p.pendingLanes;p.pendingLanes=x,p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0,p.expiredLanes&=x,p.entangledLanes&=x,p.errorRecoveryDisabledLanes&=x,p.shellSuspendCounter=0;var dt=p.entanglements,Ft=p.expirationTimes,oa=p.hiddenUpdates;for(x=Fe&~x;0<x;){var ja=31-en(x),nr=1<<ja;dt[ja]=0,Ft[ja]=-1;var ba=oa[ja];if(ba!==null)for(oa[ja]=null,ja=0;ja<ba.length;ja++){var Za=ba[ja];Za!==null&&(Za.lane&=-536870913)}x&=~nr}F!==0&&_t(p,F,0),se!==0&&Y===0&&p.tag!==0&&(p.suspendedLanes|=se&~(Fe&~v))}function _t(p,v,x){p.pendingLanes|=v,p.suspendedLanes&=~v;var F=31-en(v);p.entangledLanes|=v,p.entanglements[F]=p.entanglements[F]|1073741824|x&4194218}function yt(p,v){var x=p.entangledLanes|=v;for(p=p.entanglements;x;){var F=31-en(x),Y=1<<F;Y&v|p[F]&v&&(p[F]|=v),x&=~Y}}function bt(p){return p&=-p,2<p?8<p?(p&134217727)!==0?32:268435456:8:2}function kt(){var p=$e.p;return p!==0?p:(p=window.event,p===void 0?32:cS(p.type))}function Et(p,v){var x=$e.p;try{return $e.p=p,v()}finally{$e.p=x}}var Ht=Math.random().toString(36).slice(2),$t="__reactFiber$"+Ht,qt="__reactProps$"+Ht,Ra="__reactContainer$"+Ht,Ma="__reactEvents$"+Ht,Ba="__reactListeners$"+Ht,_r="__reactHandles$"+Ht,Nr="__reactResources$"+Ht,Vr="__reactMarker$"+Ht;function Gr(p){delete p[$t],delete p[qt],delete p[Ma],delete p[Ba],delete p[_r]}function zn(p){var v=p[$t];if(v)return v;for(var x=p.parentNode;x;){if(v=x[Ra]||x[$t]){if(x=v.alternate,v.child!==null||x!==null&&x.child!==null)for(p=g1(p);p!==null;){if(x=p[$t])return x;p=g1(p)}return v}p=x,x=p.parentNode}return null}function Jn(p){if(p=p[$t]||p[Ra]){var v=p.tag;if(v===5||v===6||v===13||v===26||v===27||v===3)return p}return null}function qr(p){var v=p.tag;if(v===5||v===26||v===27||v===6)return p.stateNode;throw Error(r(33))}function yn(p){var v=p[Nr];return v||(v=p[Nr]={hoistableStyles:new Map,hoistableScripts:new Map}),v}function Hr(p){p[Vr]=!0}var In=new Set,Vi={};function Gi(p,v){_s(p,v),_s(p+"Capture",v)}function _s(p,v){for(Vi[p]=v,p=0;p<v.length;p++)In.add(v[p])}var vs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Do=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ws={},ks={};function nc(p){return Va.call(ks,p)?!0:Va.call(ws,p)?!1:Do.test(p)?ks[p]=!0:(ws[p]=!0,!1)}function Yo(p,v,x){if(nc(v))if(x===null)p.removeAttribute(v);else{switch(typeof x){case"undefined":case"function":case"symbol":p.removeAttribute(v);return;case"boolean":var F=v.toLowerCase().slice(0,5);if(F!=="data-"&&F!=="aria-"){p.removeAttribute(v);return}}p.setAttribute(v,""+x)}}function zi(p,v,x){if(x===null)p.removeAttribute(v);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":p.removeAttribute(v);return}p.setAttribute(v,""+x)}}function Gl(p,v,x,F){if(F===null)p.removeAttribute(x);else{switch(typeof F){case"undefined":case"function":case"symbol":case"boolean":p.removeAttribute(x);return}p.setAttributeNS(v,x,""+F)}}function Mo(p){switch(typeof p){case"bigint":case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function _d(p){var v=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(v==="checkbox"||v==="radio")}function Nc(p){var v=_d(p)?"checked":"value",x=Object.getOwnPropertyDescriptor(p.constructor.prototype,v),F=""+p[v];if(!p.hasOwnProperty(v)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var Y=x.get,se=x.set;return Object.defineProperty(p,v,{configurable:!0,get:function(){return Y.call(this)},set:function(Fe){F=""+Fe,se.call(this,Fe)}}),Object.defineProperty(p,v,{enumerable:x.enumerable}),{getValue:function(){return F},setValue:function(Fe){F=""+Fe},stopTracking:function(){p._valueTracker=null,delete p[v]}}}}function ah(p){p._valueTracker||(p._valueTracker=Nc(p))}function du(p){if(!p)return!1;var v=p._valueTracker;if(!v)return!0;var x=v.getValue(),F="";return p&&(F=_d(p)?p.checked?"true":"false":p.value),p=F,p!==x?(v.setValue(p),!0):!1}function Vc(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}var hl=/[\n"\\]/g;function Xs(p){return p.replace(hl,function(v){return"\\"+v.charCodeAt(0).toString(16)+" "})}function Io(p,v,x,F,Y,se,Fe,dt){p.name="",Fe!=null&&typeof Fe!="function"&&typeof Fe!="symbol"&&typeof Fe!="boolean"?p.type=Fe:p.removeAttribute("type"),v!=null?Fe==="number"?(v===0&&p.value===""||p.value!=v)&&(p.value=""+Mo(v)):p.value!==""+Mo(v)&&(p.value=""+Mo(v)):Fe!=="submit"&&Fe!=="reset"||p.removeAttribute("value"),v!=null?hu(p,Fe,Mo(v)):x!=null?hu(p,Fe,Mo(x)):F!=null&&p.removeAttribute("value"),Y==null&&se!=null&&(p.defaultChecked=!!se),Y!=null&&(p.checked=Y&&typeof Y!="function"&&typeof Y!="symbol"),dt!=null&&typeof dt!="function"&&typeof dt!="symbol"&&typeof dt!="boolean"?p.name=""+Mo(dt):p.removeAttribute("name")}function jl(p,v,x,F,Y,se,Fe,dt){if(se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"&&(p.type=se),v!=null||x!=null){if(!(se!=="submit"&&se!=="reset"||v!=null))return;x=x!=null?""+Mo(x):"",v=v!=null?""+Mo(v):x,dt||v===p.value||(p.value=v),p.defaultValue=v}F=F??Y,F=typeof F!="function"&&typeof F!="symbol"&&!!F,p.checked=dt?p.checked:!!F,p.defaultChecked=!!F,Fe!=null&&typeof Fe!="function"&&typeof Fe!="symbol"&&typeof Fe!="boolean"&&(p.name=Fe)}function hu(p,v,x){v==="number"&&Vc(p.ownerDocument)===p||p.defaultValue===""+x||(p.defaultValue=""+x)}function oo(p,v,x,F){if(p=p.options,v){v={};for(var Y=0;Y<x.length;Y++)v["$"+x[Y]]=!0;for(x=0;x<p.length;x++)Y=v.hasOwnProperty("$"+p[x].value),p[x].selected!==Y&&(p[x].selected=Y),Y&&F&&(p[x].defaultSelected=!0)}else{for(x=""+Mo(x),v=null,Y=0;Y<p.length;Y++){if(p[Y].value===x){p[Y].selected=!0,F&&(p[Y].defaultSelected=!0);return}v!==null||p[Y].disabled||(v=p[Y])}v!==null&&(v.selected=!0)}}function Lo(p,v,x){if(v!=null&&(v=""+Mo(v),v!==p.value&&(p.value=v),x==null)){p.defaultValue!==v&&(p.defaultValue=v);return}p.defaultValue=x!=null?""+Mo(x):""}function vd(p,v,x,F){if(v==null){if(F!=null){if(x!=null)throw Error(r(92));if(Se(F)){if(1<F.length)throw Error(r(93));F=F[0]}x=F}x==null&&(x=""),v=x}x=Mo(v),p.defaultValue=x,F=p.textContent,F===x&&F!==""&&F!==null&&(p.value=F)}function Fu(p,v){if(v){var x=p.firstChild;if(x&&x===p.lastChild&&x.nodeType===3){x.nodeValue=v;return}}p.textContent=v}var df=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zl(p,v,x){var F=v.indexOf("--")===0;x==null||typeof x=="boolean"||x===""?F?p.setProperty(v,""):v==="float"?p.cssFloat="":p[v]="":F?p.setProperty(v,x):typeof x!="number"||x===0||df.has(v)?v==="float"?p.cssFloat=x:p[v]=(""+x).trim():p[v]=x+"px"}function Fo(p,v,x){if(v!=null&&typeof v!="object")throw Error(r(62));if(p=p.style,x!=null){for(var F in x)!x.hasOwnProperty(F)||v!=null&&v.hasOwnProperty(F)||(F.indexOf("--")===0?p.setProperty(F,""):F==="float"?p.cssFloat="":p[F]="");for(var Y in v)F=v[Y],v.hasOwnProperty(Y)&&x[Y]!==F&&Zl(p,Y,F)}else for(var se in v)v.hasOwnProperty(se)&&Zl(p,se,v[se])}function Uu(p){if(p.indexOf("-")===-1)return!1;switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Xo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bn(p){return Xo.test(""+p)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":p}var lo=null;function hr(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var zc=null,gn=null;function nh(p){var v=Jn(p);if(v&&(p=v.stateNode)){var x=p[qt]||null;e:switch(p=v.stateNode,v.type){case"input":if(Io(p,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name),v=x.name,x.type==="radio"&&v!=null){for(x=p;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll('input[name="'+Xs(""+v)+'"][type="radio"]'),v=0;v<x.length;v++){var F=x[v];if(F!==p&&F.form===p.form){var Y=F[qt]||null;if(!Y)throw Error(r(90));Io(F,Y.value,Y.defaultValue,Y.defaultValue,Y.checked,Y.defaultChecked,Y.type,Y.name)}}for(v=0;v<x.length;v++)F=x[v],F.form===p.form&&du(F)}break e;case"textarea":Lo(p,x.value,x.defaultValue);break e;case"select":v=x.value,v!=null&&oo(p,!!x.multiple,v,!1)}}}var Tn=!1;function Bs(p,v,x){if(Tn)return p(v,x);Tn=!0;try{var F=p(v);return F}finally{if(Tn=!1,(zc!==null||gn!==null)&&(E0(),zc&&(v=zc,p=gn,gn=zc=null,nh(v),p)))for(v=0;v<p.length;v++)nh(p[v])}}function ic(p,v){var x=p.stateNode;if(x===null)return null;var F=x[qt]||null;if(F===null)return null;x=F[v];e:switch(v){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(F=!F.disabled)||(p=p.type,F=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!F;break e;default:p=!1}if(p)return null;if(x&&typeof x!="function")throw Error(r(231,v,typeof x));return x}var sc=!1;if(vs)try{var Xa={};Object.defineProperty(Xa,"passive",{get:function(){sc=!0}}),window.addEventListener("test",Xa,Xa),window.removeEventListener("test",Xa,Xa)}catch{sc=!1}var an=null,An=null,Gs=null;function wd(){if(Gs)return Gs;var p,v=An,x=v.length,F,Y="value"in an?an.value:an.textContent,se=Y.length;for(p=0;p<x&&v[p]===Y[p];p++);var Fe=x-p;for(F=1;F<=Fe&&v[x-F]===Y[se-F];F++);return Gs=Y.slice(p,1<F?1-F:void 0)}function un(p){var v=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&v===13&&(p=13)):p=v,p===10&&(p=13),32<=p||p===13?p:0}function Uo(){return!0}function fu(){return!1}function Rs(p){function v(x,F,Y,se,Fe){this._reactName=x,this._targetInst=Y,this.type=F,this.nativeEvent=se,this.target=Fe,this.currentTarget=null;for(var dt in p)p.hasOwnProperty(dt)&&(x=p[dt],this[dt]=x?x(se):se[dt]);return this.isDefaultPrevented=(se.defaultPrevented!=null?se.defaultPrevented:se.returnValue===!1)?Uo:fu,this.isPropagationStopped=fu,this}return De(v.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=Uo)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=Uo)},persist:function(){},isPersistent:Uo}),v}var Li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bi=Rs(Li),uo=De({},Li,{view:0,detail:0}),Rd=Rs(uo),ih,oc,lc,Jo=De({},uo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hl,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==lc&&(lc&&p.type==="mousemove"?(ih=p.screenX-lc.screenX,oc=p.screenY-lc.screenY):oc=ih=0,lc=p),ih)},movementY:function(p){return"movementY"in p?p.movementY:oc}}),us=Rs(Jo),ku=De({},Jo,{dataTransfer:0}),Ts=Rs(ku),Cl=De({},uo,{relatedTarget:0}),Qo=Rs(Cl),ji=De({},Li,{animationName:0,elapsedTime:0,pseudoElement:0}),js=Rs(ji),ql=De({},Li,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),ns=Rs(ql),Vh=De({},Li,{data:0}),ko=Rs(Vh),Td={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hf(p){var v=this.nativeEvent;return v.getModifierState?v.getModifierState(p):(p=mu[p])?!!v[p]:!1}function Hl(){return Hf}var Im=De({},uo,{key:function(p){if(p.key){var v=Td[p.key]||p.key;if(v!=="Unidentified")return v}return p.type==="keypress"?(p=un(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?pu[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hl,charCode:function(p){return p.type==="keypress"?un(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?un(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),Sd=Rs(Im),Zs=De({},Jo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hf=Rs(Zs),$l=De({},uo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hl}),ff=Rs($l),oe=De({},Li,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ke=Rs(oe),Dt=De({},Jo,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),Wt=Rs(Dt),ha=De({},Li,{newState:0,oldState:0}),Da=Rs(ha),rr=[9,13,27,32],wr=vs&&"CompositionEvent"in window,$r=null;vs&&"documentMode"in document&&($r=document.documentMode);var Sn=vs&&"TextEvent"in window&&!$r,Nn=vs&&(!wr||$r&&8<$r&&11>=$r),mi=" ",Ss=!1;function Cs(p,v){switch(p){case"keyup":return rr.indexOf(v.keyCode)!==-1;case"keydown":return v.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Js(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var es=!1;function br(p,v){switch(p){case"compositionend":return Js(v);case"keypress":return v.which!==32?null:(Ss=!0,mi);case"textInput":return p=v.data,p===mi&&Ss?null:p;default:return null}}function ir(p,v){if(es)return p==="compositionend"||!wr&&Cs(p,v)?(p=wd(),Gs=An=an=null,es=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(v.ctrlKey||v.altKey||v.metaKey)||v.ctrlKey&&v.altKey){if(v.char&&1<v.char.length)return v.char;if(v.which)return String.fromCharCode(v.which)}return null;case"compositionend":return Nn&&v.locale!=="ko"?null:v.data;default:return null}}var fl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rr(p){var v=p&&p.nodeName&&p.nodeName.toLowerCase();return v==="input"?!!fl[p.type]:v==="textarea"}function yu(p,v,x,F){zc?gn?gn.push(F):gn=[F]:zc=F,v=Ef(v,"onChange"),0<v.length&&(x=new bi("onChange","change",null,x,F),p.push({event:x,listeners:v}))}var Kl=null,vr=null;function sh(p){I0(p,0)}function Wl(p){var v=qr(p);if(du(v))return p}function uc(p,v){if(p==="change")return v}var Cd=!1;if(vs){var bs;if(vs){var Ai="oninput"in document;if(!Ai){var cc=document.createElement("div");cc.setAttribute("oninput","return;"),Ai=typeof cc.oninput=="function"}bs=Ai}else bs=!1;Cd=bs&&(!document.documentMode||9<document.documentMode)}function Na(){Kl&&(Kl.detachEvent("onpropertychange",bd),vr=Kl=null)}function bd(p){if(p.propertyName==="value"&&Wl(vr)){var v=[];yu(v,vr,p,hr(p)),Bs(sh,v)}}function qs(p,v,x){p==="focusin"?(Na(),Kl=v,vr=x,Kl.attachEvent("onpropertychange",bd)):p==="focusout"&&Na()}function co(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return Wl(vr)}function pf(p,v){if(p==="click")return Wl(v)}function zh(p,v){if(p==="input"||p==="change")return Wl(v)}function ho(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}var Os=typeof Object.is=="function"?Object.is:ho;function bl(p,v){if(Os(p,v))return!0;if(typeof p!="object"||p===null||typeof v!="object"||v===null)return!1;var x=Object.keys(p),F=Object.keys(v);if(x.length!==F.length)return!1;for(F=0;F<x.length;F++){var Y=x[F];if(!Va.call(v,Y)||!Os(p[Y],v[Y]))return!1}return!0}function Oc(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function Yl(p,v){var x=Oc(p);p=0;for(var F;x;){if(x.nodeType===3){if(F=p+x.textContent.length,p<=v&&F>=v)return{node:x,offset:v-p};p=F}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=Oc(x)}}function oh(p,v){return p&&v?p===v?!0:p&&p.nodeType===3?!1:v&&v.nodeType===3?oh(p,v.parentNode):"contains"in p?p.contains(v):p.compareDocumentPosition?!!(p.compareDocumentPosition(v)&16):!1:!1}function xl(p){p=p!=null&&p.ownerDocument!=null&&p.ownerDocument.defaultView!=null?p.ownerDocument.defaultView:window;for(var v=Vc(p.document);v instanceof p.HTMLIFrameElement;){try{var x=typeof v.contentWindow.location.href=="string"}catch{x=!1}if(x)p=v.contentWindow;else break;v=Vc(p.document)}return v}function Ro(p){var v=p&&p.nodeName&&p.nodeName.toLowerCase();return v&&(v==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||v==="textarea"||p.contentEditable==="true")}function xd(p,v){var x=xl(v);v=p.focusedElem;var F=p.selectionRange;if(x!==v&&v&&v.ownerDocument&&oh(v.ownerDocument.documentElement,v)){if(F!==null&&Ro(v)){if(p=F.start,x=F.end,x===void 0&&(x=p),"selectionStart"in v)v.selectionStart=p,v.selectionEnd=Math.min(x,v.value.length);else if(x=(p=v.ownerDocument||document)&&p.defaultView||window,x.getSelection){x=x.getSelection();var Y=v.textContent.length,se=Math.min(F.start,Y);F=F.end===void 0?se:Math.min(F.end,Y),!x.extend&&se>F&&(Y=F,F=se,se=Y),Y=Yl(v,se);var Fe=Yl(v,F);Y&&Fe&&(x.rangeCount!==1||x.anchorNode!==Y.node||x.anchorOffset!==Y.offset||x.focusNode!==Fe.node||x.focusOffset!==Fe.offset)&&(p=p.createRange(),p.setStart(Y.node,Y.offset),x.removeAllRanges(),se>F?(x.addRange(p),x.extend(Fe.node,Fe.offset)):(p.setEnd(Fe.node,Fe.offset),x.addRange(p)))}}for(p=[],x=v;x=x.parentNode;)x.nodeType===1&&p.push({element:x,left:x.scrollLeft,top:x.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<p.length;v++)x=p[v],x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}var Dc=vs&&"documentMode"in document&&11>=document.documentMode,Pl=null,dc=null,gu=null,Zi=!1;function mf(p,v,x){var F=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;Zi||Pl==null||Pl!==Vc(F)||(F=Pl,"selectionStart"in F&&Ro(F)?F={start:F.selectionStart,end:F.selectionEnd}:(F=(F.ownerDocument&&F.ownerDocument.defaultView||window).getSelection(),F={anchorNode:F.anchorNode,anchorOffset:F.anchorOffset,focusNode:F.focusNode,focusOffset:F.focusOffset}),gu&&bl(gu,F)||(gu=F,F=Ef(dc,"onSelect"),0<F.length&&(v=new bi("onSelect","select",null,v,x),p.push({event:v,listeners:F}),v.target=Pl)))}function Qs(p,v){var x={};return x[p.toLowerCase()]=v.toLowerCase(),x["Webkit"+p]="webkit"+v,x["Moz"+p]="moz"+v,x}var fo={animationend:Qs("Animation","AnimationEnd"),animationiteration:Qs("Animation","AnimationIteration"),animationstart:Qs("Animation","AnimationStart"),transitionrun:Qs("Transition","TransitionRun"),transitionstart:Qs("Transition","TransitionStart"),transitioncancel:Qs("Transition","TransitionCancel"),transitionend:Qs("Transition","TransitionEnd")},Pd={},Ed={};vs&&(Ed=document.createElement("div").style,"AnimationEvent"in window||(delete fo.animationend.animation,delete fo.animationiteration.animation,delete fo.animationstart.animation),"TransitionEvent"in window||delete fo.transitionend.transition);function eo(p){if(Pd[p])return Pd[p];if(!fo[p])return p;var v=fo[p],x;for(x in v)if(v.hasOwnProperty(x)&&x in Ed)return Pd[p]=v[x];return p}var Mc=eo("animationend"),hc=eo("animationiteration"),Au=eo("animationstart"),Ic=eo("transitionrun"),_u=eo("transitionstart"),Lc=eo("transitioncancel"),fc=eo("transitionend"),Bu=new Map,Bo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function cs(p,v){Bu.set(p,v),Gi(v,[p])}var Xn=[],ai=0,qi=0;function is(){for(var p=ai,v=qi=ai=0;v<p;){var x=Xn[v];Xn[v++]=null;var F=Xn[v];Xn[v++]=null;var Y=Xn[v];Xn[v++]=null;var se=Xn[v];if(Xn[v++]=null,F!==null&&Y!==null){var Fe=F.pending;Fe===null?Y.next=Y:(Y.next=Fe.next,Fe.next=Y),F.pending=Y}se!==0&&Jl(x,Y,se)}}function Xl(p,v,x,F){Xn[ai++]=p,Xn[ai++]=v,Xn[ai++]=x,Xn[ai++]=F,qi|=F,p.lanes|=F,p=p.alternate,p!==null&&(p.lanes|=F)}function Fc(p,v,x,F){return Xl(p,v,x,F),tn(p)}function el(p,v){return Xl(p,null,null,v),tn(p)}function Jl(p,v,x){p.lanes|=x;var F=p.alternate;F!==null&&(F.lanes|=x);for(var Y=!1,se=p.return;se!==null;)se.childLanes|=x,F=se.alternate,F!==null&&(F.childLanes|=x),se.tag===22&&(p=se.stateNode,p===null||p._visibility&1||(Y=!0)),p=se,se=se.return;Y&&v!==null&&p.tag===3&&(se=p.stateNode,Y=31-en(x),se=se.hiddenUpdates,p=se[Y],p===null?se[Y]=[v]:p.push(v),v.lane=x|536870912)}function tn(p){if(50<vl)throw vl=0,jd=null,Error(r(185));for(var v=p.return;v!==null;)p=v,v=p.return;return p.tag===3?p.stateNode:null}var Uc={},El=new WeakMap;function ts(p,v){if(typeof p=="object"&&p!==null){var x=El.get(p);return x!==void 0?x:(v={value:p,source:v,stack:qe(v)},El.set(p,v),v)}return{value:p,source:v,stack:qe(v)}}var pc=[],Nd=0,di=null,Oh=0,tl=[],pl=0,kc=null,vu=1,Gu="";function mc(p,v){pc[Nd++]=Oh,pc[Nd++]=di,di=p,Oh=v}function Bp(p,v,x){tl[pl++]=vu,tl[pl++]=Gu,tl[pl++]=kc,kc=p;var F=vu;p=Gu;var Y=32-en(F)-1;F&=~(1<<Y),x+=1;var se=32-en(v)+Y;if(30<se){var Fe=Y-Y%5;se=(F&(1<<Fe)-1).toString(32),F>>=Fe,Y-=Fe,vu=1<<32-en(v)+Y|x<<Y|F,Gu=se+p}else vu=1<<se|x<<Y|F,Gu=p}function Dh(p){p.return!==null&&(mc(p,1),Bp(p,1,0))}function Mh(p){for(;p===di;)di=pc[--Nd],pc[Nd]=null,Oh=pc[--Nd],pc[Nd]=null;for(;p===kc;)kc=tl[--pl],tl[pl]=null,Gu=tl[--pl],tl[pl]=null,vu=tl[--pl],tl[pl]=null}var al=null,Hi=null,_i=!1,Ql=null,wu=!1,$f=Error(r(519));function yc(p){var v=Error(r(418,""));throw zd(ts(v,p)),$f}function yf(p){var v=p.stateNode,x=p.type,F=p.memoizedProps;switch(v[$t]=p,v[qt]=F,x){case"dialog":Mi("cancel",v),Mi("close",v);break;case"iframe":case"object":case"embed":Mi("load",v);break;case"video":case"audio":for(x=0;x<$m.length;x++)Mi($m[x],v);break;case"source":Mi("error",v);break;case"img":case"image":case"link":Mi("error",v),Mi("load",v);break;case"details":Mi("toggle",v);break;case"input":Mi("invalid",v),jl(v,F.value,F.defaultValue,F.checked,F.defaultChecked,F.type,F.name,!0),ah(v);break;case"select":Mi("invalid",v);break;case"textarea":Mi("invalid",v),vd(v,F.value,F.defaultValue,F.children),ah(v)}x=F.children,typeof x!="string"&&typeof x!="number"&&typeof x!="bigint"||v.textContent===""+x||F.suppressHydrationWarning===!0||Nf(v.textContent,x)?(F.popover!=null&&(Mi("beforetoggle",v),Mi("toggle",v)),F.onScroll!=null&&Mi("scroll",v),F.onScrollEnd!=null&&Mi("scrollend",v),F.onClick!=null&&(v.onclick=$y),v=!0):v=!1,v||yc(p)}function Vd(p){for(al=p.return;al;)switch(al.tag){case 3:case 27:wu=!0;return;case 5:case 13:wu=!1;return;default:al=al.return}}function Ih(p){if(p!==al)return!1;if(!_i)return Vd(p),_i=!0,!1;var v=!1,x;if((x=p.tag!==3&&p.tag!==27)&&((x=p.tag===5)&&(x=p.type,x=!(x!=="form"&&x!=="button")||B0(p.type,p.memoizedProps)),x=!x),x&&(v=!0),v&&Hi&&yc(p),Vd(p),p.tag===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));e:{for(p=p.nextSibling,v=0;p;){if(p.nodeType===8)if(x=p.data,x==="/$"){if(v===0){Hi=zu(p.nextSibling);break e}v--}else x!=="$"&&x!=="$!"&&x!=="$?"||v++;p=p.nextSibling}Hi=null}}else Hi=al?zu(p.stateNode.nextSibling):null;return!0}function Lh(){Hi=al=null,_i=!1}function zd(p){Ql===null?Ql=[p]:Ql.push(p)}var gf=Error(r(460)),Lm=Error(r(474)),lh={then:function(){}};function Vy(p){return p=p.status,p==="fulfilled"||p==="rejected"}function gc(){}function ju(p,v,x){switch(x=p[x],x===void 0?p.push(v):x!==v&&(v.then(gc,gc),v=x),v.status){case"fulfilled":return v.value;case"rejected":throw p=v.reason,p===gf?Error(r(483)):p;default:if(typeof v.status=="string")v.then(gc,gc);else{if(p=Ur,p!==null&&100<p.shellSuspendCounter)throw Error(r(482));p=v,p.status="pending",p.then(function(F){if(v.status==="pending"){var Y=v;Y.status="fulfilled",Y.value=F}},function(F){if(v.status==="pending"){var Y=v;Y.status="rejected",Y.reason=F}})}switch(v.status){case"fulfilled":return v.value;case"rejected":throw p=v.reason,p===gf?Error(r(483)):p}throw Ru=v,gf}}var Ru=null;function zy(){if(Ru===null)throw Error(r(459));var p=Ru;return Ru=null,p}var Fh=null,ml=0;function rl(p){var v=ml;return ml+=1,Fh===null&&(Fh=[]),ju(Fh,p,v)}function Uh(p,v){v=v.props.ref,p.ref=v!==void 0?v:null}function Od(p,v){throw v.$$typeof===l?Error(r(525)):(p=Object.prototype.toString.call(v),Error(r(31,p==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":p)))}function Gp(p){var v=p._init;return v(p._payload)}function jp(p){function v(ya,na){if(p){var Ta=ya.deletions;Ta===null?(ya.deletions=[na],ya.flags|=16):Ta.push(na)}}function x(ya,na){if(!p)return null;for(;na!==null;)v(ya,na),na=na.sibling;return null}function F(ya){for(var na=new Map;ya!==null;)ya.key!==null?na.set(ya.key,ya):na.set(ya.index,ya),ya=ya.sibling;return na}function Y(ya,na){return ya=Sa(ya,na),ya.index=0,ya.sibling=null,ya}function se(ya,na,Ta){return ya.index=Ta,p?(Ta=ya.alternate,Ta!==null?(Ta=Ta.index,Ta<na?(ya.flags|=33554434,na):Ta):(ya.flags|=33554434,na)):(ya.flags|=1048576,na)}function Fe(ya){return p&&ya.alternate===null&&(ya.flags|=33554434),ya}function dt(ya,na,Ta,Ja){return na===null||na.tag!==6?(na=ea(Ta,ya.mode,Ja),na.return=ya,na):(na=Y(na,Ta),na.return=ya,na)}function Ft(ya,na,Ta,Ja){var Kr=Ta.type;return Kr===w?ja(ya,na,Ta.props.children,Ja,Ta.key):na!==null&&(na.elementType===Kr||typeof Kr=="object"&&Kr!==null&&Kr.$$typeof===ie&&Gp(Kr)===na.type)?(na=Y(na,Ta.props),Uh(na,Ta),na.return=ya,na):(na=ia(Ta.type,Ta.key,Ta.props,null,ya.mode,Ja),Uh(na,Ta),na.return=ya,na)}function oa(ya,na,Ta,Ja){return na===null||na.tag!==4||na.stateNode.containerInfo!==Ta.containerInfo||na.stateNode.implementation!==Ta.implementation?(na=da(Ta,ya.mode,Ja),na.return=ya,na):(na=Y(na,Ta.children||[]),na.return=ya,na)}function ja(ya,na,Ta,Ja,Kr){return na===null||na.tag!==7?(na=zt(Ta,ya.mode,Ja,Kr),na.return=ya,na):(na=Y(na,Ta),na.return=ya,na)}function nr(ya,na,Ta){if(typeof na=="string"&&na!==""||typeof na=="number"||typeof na=="bigint")return na=ea(""+na,ya.mode,Ta),na.return=ya,na;if(typeof na=="object"&&na!==null){switch(na.$$typeof){case h:return Ta=ia(na.type,na.key,na.props,null,ya.mode,Ta),Uh(Ta,na),Ta.return=ya,Ta;case n:return na=da(na,ya.mode,Ta),na.return=ya,na;case ie:var Ja=na._init;return na=Ja(na._payload),nr(ya,na,Ta)}if(Se(na)||Ae(na))return na=zt(na,ya.mode,Ta,null),na.return=ya,na;if(typeof na.then=="function")return nr(ya,rl(na),Ta);if(na.$$typeof===U)return nr(ya,$u(ya,na),Ta);Od(ya,na)}return null}function ba(ya,na,Ta,Ja){var Kr=na!==null?na.key:null;if(typeof Ta=="string"&&Ta!==""||typeof Ta=="number"||typeof Ta=="bigint")return Kr!==null?null:dt(ya,na,""+Ta,Ja);if(typeof Ta=="object"&&Ta!==null){switch(Ta.$$typeof){case h:return Ta.key===Kr?Ft(ya,na,Ta,Ja):null;case n:return Ta.key===Kr?oa(ya,na,Ta,Ja):null;case ie:return Kr=Ta._init,Ta=Kr(Ta._payload),ba(ya,na,Ta,Ja)}if(Se(Ta)||Ae(Ta))return Kr!==null?null:ja(ya,na,Ta,Ja,null);if(typeof Ta.then=="function")return ba(ya,na,rl(Ta),Ja);if(Ta.$$typeof===U)return ba(ya,na,$u(ya,Ta),Ja);Od(ya,Ta)}return null}function Za(ya,na,Ta,Ja,Kr){if(typeof Ja=="string"&&Ja!==""||typeof Ja=="number"||typeof Ja=="bigint")return ya=ya.get(Ta)||null,dt(na,ya,""+Ja,Kr);if(typeof Ja=="object"&&Ja!==null){switch(Ja.$$typeof){case h:return ya=ya.get(Ja.key===null?Ta:Ja.key)||null,Ft(na,ya,Ja,Kr);case n:return ya=ya.get(Ja.key===null?Ta:Ja.key)||null,oa(na,ya,Ja,Kr);case ie:var yi=Ja._init;return Ja=yi(Ja._payload),Za(ya,na,Ta,Ja,Kr)}if(Se(Ja)||Ae(Ja))return ya=ya.get(Ta)||null,ja(na,ya,Ja,Kr,null);if(typeof Ja.then=="function")return Za(ya,na,Ta,rl(Ja),Kr);if(Ja.$$typeof===U)return Za(ya,na,Ta,$u(na,Ja),Kr);Od(na,Ja)}return null}function Yr(ya,na,Ta,Ja){for(var Kr=null,yi=null,on=na,Pn=na=0,ru=null;on!==null&&Pn<Ta.length;Pn++){on.index>Pn?(ru=on,on=null):ru=on.sibling;var as=ba(ya,on,Ta[Pn],Ja);if(as===null){on===null&&(on=ru);break}p&&on&&as.alternate===null&&v(ya,on),na=se(as,na,Pn),yi===null?Kr=as:yi.sibling=as,yi=as,on=ru}if(Pn===Ta.length)return x(ya,on),_i&&mc(ya,Pn),Kr;if(on===null){for(;Pn<Ta.length;Pn++)on=nr(ya,Ta[Pn],Ja),on!==null&&(na=se(on,na,Pn),yi===null?Kr=on:yi.sibling=on,yi=on);return _i&&mc(ya,Pn),Kr}for(on=F(on);Pn<Ta.length;Pn++)ru=Za(on,ya,Pn,Ta[Pn],Ja),ru!==null&&(p&&ru.alternate!==null&&on.delete(ru.key===null?Pn:ru.key),na=se(ru,na,Pn),yi===null?Kr=ru:yi.sibling=ru,yi=ru);return p&&on.forEach(function(dm){return v(ya,dm)}),_i&&mc(ya,Pn),Kr}function Qn(ya,na,Ta,Ja){if(Ta==null)throw Error(r(151));for(var Kr=null,yi=null,on=na,Pn=na=0,ru=null,as=Ta.next();on!==null&&!as.done;Pn++,as=Ta.next()){on.index>Pn?(ru=on,on=null):ru=on.sibling;var dm=ba(ya,on,as.value,Ja);if(dm===null){on===null&&(on=ru);break}p&&on&&dm.alternate===null&&v(ya,on),na=se(dm,na,Pn),yi===null?Kr=dm:yi.sibling=dm,yi=dm,on=ru}if(as.done)return x(ya,on),_i&&mc(ya,Pn),Kr;if(on===null){for(;!as.done;Pn++,as=Ta.next())as=nr(ya,as.value,Ja),as!==null&&(na=se(as,na,Pn),yi===null?Kr=as:yi.sibling=as,yi=as);return _i&&mc(ya,Pn),Kr}for(on=F(on);!as.done;Pn++,as=Ta.next())as=Za(on,ya,Pn,as.value,Ja),as!==null&&(p&&as.alternate!==null&&on.delete(as.key===null?Pn:as.key),na=se(as,na,Pn),yi===null?Kr=as:yi.sibling=as,yi=as);return p&&on.forEach(function(RP){return v(ya,RP)}),_i&&mc(ya,Pn),Kr}function Ho(ya,na,Ta,Ja){if(typeof Ta=="object"&&Ta!==null&&Ta.type===w&&Ta.key===null&&(Ta=Ta.props.children),typeof Ta=="object"&&Ta!==null){switch(Ta.$$typeof){case h:e:{for(var Kr=Ta.key;na!==null;){if(na.key===Kr){if(Kr=Ta.type,Kr===w){if(na.tag===7){x(ya,na.sibling),Ja=Y(na,Ta.props.children),Ja.return=ya,ya=Ja;break e}}else if(na.elementType===Kr||typeof Kr=="object"&&Kr!==null&&Kr.$$typeof===ie&&Gp(Kr)===na.type){x(ya,na.sibling),Ja=Y(na,Ta.props),Uh(Ja,Ta),Ja.return=ya,ya=Ja;break e}x(ya,na);break}else v(ya,na);na=na.sibling}Ta.type===w?(Ja=zt(Ta.props.children,ya.mode,Ja,Ta.key),Ja.return=ya,ya=Ja):(Ja=ia(Ta.type,Ta.key,Ta.props,null,ya.mode,Ja),Uh(Ja,Ta),Ja.return=ya,ya=Ja)}return Fe(ya);case n:e:{for(Kr=Ta.key;na!==null;){if(na.key===Kr)if(na.tag===4&&na.stateNode.containerInfo===Ta.containerInfo&&na.stateNode.implementation===Ta.implementation){x(ya,na.sibling),Ja=Y(na,Ta.children||[]),Ja.return=ya,ya=Ja;break e}else{x(ya,na);break}else v(ya,na);na=na.sibling}Ja=da(Ta,ya.mode,Ja),Ja.return=ya,ya=Ja}return Fe(ya);case ie:return Kr=Ta._init,Ta=Kr(Ta._payload),Ho(ya,na,Ta,Ja)}if(Se(Ta))return Yr(ya,na,Ta,Ja);if(Ae(Ta)){if(Kr=Ae(Ta),typeof Kr!="function")throw Error(r(150));return Ta=Kr.call(Ta),Qn(ya,na,Ta,Ja)}if(typeof Ta.then=="function")return Ho(ya,na,rl(Ta),Ja);if(Ta.$$typeof===U)return Ho(ya,na,$u(ya,Ta),Ja);Od(ya,Ta)}return typeof Ta=="string"&&Ta!==""||typeof Ta=="number"||typeof Ta=="bigint"?(Ta=""+Ta,na!==null&&na.tag===6?(x(ya,na.sibling),Ja=Y(na,Ta),Ja.return=ya,ya=Ja):(x(ya,na),Ja=ea(Ta,ya.mode,Ja),Ja.return=ya,ya=Ja),Fe(ya)):x(ya,na)}return function(ya,na,Ta,Ja){try{ml=0;var Kr=Ho(ya,na,Ta,Ja);return Fh=null,Kr}catch(on){if(on===gf)throw on;var yi=aa(29,on,null,ya.mode);return yi.lanes=Ja,yi.return=ya,yi}finally{}}}var Bc=jp(!0),Af=jp(!1),nl=it(null),Dd=it(0);function Tu(p,v){p=cn,_e(Dd,p),_e(nl,v),cn=p|v.baseLanes}function Md(){_e(Dd,cn),_e(nl,nl.current)}function Gc(){cn=Dd.current,ct(nl),ct(Dd)}var Nl=it(null),Zu=null;function jc(p){var v=p.alternate;_e(Ds,Ds.current&1),_e(Nl,p),Zu===null&&(v===null||nl.current!==null||v.memoizedState!==null)&&(Zu=p)}function Kf(p){if(p.tag===22){if(_e(Ds,Ds.current),_e(Nl,p),Zu===null){var v=p.alternate;v!==null&&v.memoizedState!==null&&(Zu=p)}}else Id()}function Id(){_e(Ds,Ds.current),_e(Nl,Nl.current)}function Zc(p){ct(Nl),Zu===p&&(Zu=null),ct(Ds)}var Ds=it(0);function Zp(p){for(var v=p;v!==null;){if(v.tag===13){var x=v.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||x.data==="$!"))return v}else if(v.tag===19&&v.memoizedProps.revealOrder!==void 0){if((v.flags&128)!==0)return v}else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===p)break;for(;v.sibling===null;){if(v.return===null||v.return===p)return null;v=v.return}v.sibling.return=v.return,v=v.sibling}return null}var Fm=typeof AbortController<"u"?AbortController:function(){var p=[],v=this.signal={aborted:!1,addEventListener:function(x,F){p.push(F)}};this.abort=function(){v.aborted=!0,p.forEach(function(x){return x()})}},_f=t.unstable_scheduleCallback,qp=t.unstable_NormalPriority,to={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kh(){return{controller:new Fm,data:new Map,refCount:0}}function G(p){p.refCount--,p.refCount===0&&_f(qp,function(){p.controller.abort()})}var Q=null,fe=0,Ne=0,Ge=null;function Qe(p,v){if(Q===null){var x=Q=[];fe=0,Ne=dA(),Ge={status:"pending",value:void 0,then:function(F){x.push(F)}}}return fe++,v.then(at,at),v}function at(){if(--fe===0&&Q!==null){Ge!==null&&(Ge.status="fulfilled");var p=Q;Q=null,Ne=0,Ge=null;for(var v=0;v<p.length;v++)(0,p[v])()}}function ut(p,v){var x=[],F={status:"pending",value:null,reason:null,then:function(Y){x.push(Y)}};return p.then(function(){F.status="fulfilled",F.value=v;for(var Y=0;Y<x.length;Y++)(0,x[Y])(v)},function(Y){for(F.status="rejected",F.reason=Y,Y=0;Y<x.length;Y++)(0,x[Y])(void 0)}),F}var pt=be.S;be.S=function(p,v){typeof v=="object"&&v!==null&&typeof v.then=="function"&&Qe(p,v),pt!==null&&pt(p,v)};var Ct=it(null);function Qt(){var p=Ct.current;return p!==null?p:Ur.pooledCache}function Pt(p,v){v===null?_e(Ct,Ct.current):_e(Ct,v.pool)}function Aa(){var p=Qt();return p===null?null:{parent:to._currentValue,pool:p}}var ra=0,wa=null,fa=null,vt=null,ta=!1,Ga=!1,Ka=!1,qa=0,Sr=0,fr=null,rn=0;function lr(){throw Error(r(321))}function vi(p,v){if(v===null)return!1;for(var x=0;x<v.length&&x<p.length;x++)if(!Os(p[x],v[x]))return!1;return!0}function xi(p,v,x,F,Y,se){return ra=se,wa=v,v.memoizedState=null,v.updateQueue=null,v.lanes=0,be.H=p===null||p.memoizedState===null?Ac:eu,Ka=!1,se=x(F,Y),Ka=!1,Ga&&(se=ri(v,x,F,Y)),qn(p),se}function qn(p){be.H=Pu;var v=fa!==null&&fa.next!==null;if(ra=0,vt=fa=wa=null,ta=!1,Sr=0,fr=null,v)throw Error(r(300));p===null||ol||(p=p.dependencies,p!==null&&Tf(p)&&(ol=!0))}function ri(p,v,x,F){wa=p;var Y=0;do{if(Ga&&(fr=null),Sr=0,Ga=!1,25<=Y)throw Error(r(301));if(Y+=1,vt=fa=null,p.updateQueue!=null){var se=p.updateQueue;se.lastEffect=null,se.events=null,se.stores=null,se.memoCache!=null&&(se.memoCache.index=0)}be.H=_c,se=v(x,F)}while(Ga);return se}function $i(){var p=be.H,v=p.useState()[0];return v=typeof v.then=="function"?wi(v):v,p=p.useState()[0],(fa!==null?fa.memoizedState:null)!==p&&(wa.flags|=1024),v}function kn(){var p=qa!==0;return qa=0,p}function _n(p,v,x){v.updateQueue=p.updateQueue,v.flags&=-2053,p.lanes&=~x}function ds(p){if(ta){for(p=p.memoizedState;p!==null;){var v=p.queue;v!==null&&(v.pending=null),p=p.next}ta=!1}ra=0,vt=fa=wa=null,Ga=!1,Sr=qa=0,fr=null}function Fi(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?wa.memoizedState=vt=p:vt=vt.next=p,vt}function Bn(){if(fa===null){var p=wa.alternate;p=p!==null?p.memoizedState:null}else p=fa.next;var v=vt===null?wa.memoizedState:vt.next;if(v!==null)vt=v,fa=p;else{if(p===null)throw wa.alternate===null?Error(r(467)):Error(r(310));fa=p,p={memoizedState:fa.memoizedState,baseState:fa.baseState,baseQueue:fa.baseQueue,queue:fa.queue,next:null},vt===null?wa.memoizedState=vt=p:vt=vt.next=p}return vt}var po;po=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function wi(p){var v=Sr;return Sr+=1,fr===null&&(fr=[]),p=ju(fr,p,v),v=wa,(vt===null?v.memoizedState:vt.next)===null&&(v=v.alternate,be.H=v===null||v.memoizedState===null?Ac:eu),p}function ss(p){if(p!==null&&typeof p=="object"){if(typeof p.then=="function")return wi(p);if(p.$$typeof===U)return Ks(p)}throw Error(r(438,String(p)))}function vn(p){var v=null,x=wa.updateQueue;if(x!==null&&(v=x.memoCache),v==null){var F=wa.alternate;F!==null&&(F=F.updateQueue,F!==null&&(F=F.memoCache,F!=null&&(v={data:F.data.map(function(Y){return Y.slice()}),index:0})))}if(v==null&&(v={data:[],index:0}),x===null&&(x=po(),wa.updateQueue=x),x.memoCache=v,x=v.data[v.index],x===void 0)for(x=v.data[v.index]=Array(p),F=0;F<p;F++)x[F]=ge;return v.index++,x}function Ii(p,v){return typeof v=="function"?v(p):v}function Hs(p){var v=Bn();return To(v,fa,p)}function To(p,v,x){var F=p.queue;if(F===null)throw Error(r(311));F.lastRenderedReducer=x;var Y=p.baseQueue,se=F.pending;if(se!==null){if(Y!==null){var Fe=Y.next;Y.next=se.next,se.next=Fe}v.baseQueue=Y=se,F.pending=null}if(se=p.baseState,Y===null)p.memoizedState=se;else{v=Y.next;var dt=Fe=null,Ft=null,oa=v,ja=!1;do{var nr=oa.lane&-536870913;if(nr!==oa.lane?(dr&nr)===nr:(ra&nr)===nr){var ba=oa.revertLane;if(ba===0)Ft!==null&&(Ft=Ft.next={lane:0,revertLane:0,action:oa.action,hasEagerState:oa.hasEagerState,eagerState:oa.eagerState,next:null}),nr===Ne&&(ja=!0);else if((ra&ba)===ba){oa=oa.next,ba===Ne&&(ja=!0);continue}else nr={lane:0,revertLane:oa.revertLane,action:oa.action,hasEagerState:oa.hasEagerState,eagerState:oa.eagerState,next:null},Ft===null?(dt=Ft=nr,Fe=se):Ft=Ft.next=nr,wa.lanes|=ba,Wi|=ba;nr=oa.action,Ka&&x(se,nr),se=oa.hasEagerState?oa.eagerState:x(se,nr)}else ba={lane:nr,revertLane:oa.revertLane,action:oa.action,hasEagerState:oa.hasEagerState,eagerState:oa.eagerState,next:null},Ft===null?(dt=Ft=ba,Fe=se):Ft=Ft.next=ba,wa.lanes|=nr,Wi|=nr;oa=oa.next}while(oa!==null&&oa!==v);if(Ft===null?Fe=se:Ft.next=dt,!Os(se,p.memoizedState)&&(ol=!0,ja&&(x=Ge,x!==null)))throw x;p.memoizedState=se,p.baseState=Fe,p.baseQueue=Ft,F.lastRenderedState=se}return Y===null&&(F.lanes=0),[p.memoizedState,F.dispatch]}function il(p){var v=Bn(),x=v.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=p;var F=x.dispatch,Y=x.pending,se=v.memoizedState;if(Y!==null){x.pending=null;var Fe=Y=Y.next;do se=p(se,Fe.action),Fe=Fe.next;while(Fe!==Y);Os(se,v.memoizedState)||(ol=!0),v.memoizedState=se,v.baseQueue===null&&(v.baseState=se),x.lastRenderedState=se}return[se,F]}function Vl(p,v,x){var F=wa,Y=Bn(),se=_i;if(se){if(x===void 0)throw Error(r(407));x=x()}else x=v();var Fe=!Os((fa||Y).memoizedState,x);if(Fe&&(Y.memoizedState=x,ol=!0),Y=Y.queue,$c(Su.bind(null,F,Y,p),[p]),Y.getSnapshot!==v||Fe||vt!==null&&vt.memoizedState.tag&1){if(F.flags|=2048,Ol(9,zl.bind(null,F,Y,x,v),{destroy:void 0},null),Ur===null)throw Error(r(349));se||(ra&60)!==0||xs(F,v,x)}return x}function xs(p,v,x){p.flags|=16384,p={getSnapshot:v,value:x},v=wa.updateQueue,v===null?(v=po(),wa.updateQueue=v,v.stores=[p]):(x=v.stores,x===null?v.stores=[p]:x.push(p))}function zl(p,v,x,F){v.value=x,v.getSnapshot=F,Ca(v)&&Ua(p)}function Su(p,v,x){return x(function(){Ca(v)&&Ua(p)})}function Ca(p){var v=p.getSnapshot;p=p.value;try{var x=v();return!Os(p,x)}catch{return!0}}function Ua(p){var v=el(p,2);v!==null&&Il(v,p,2)}function Ki(p){var v=Fi();if(typeof p=="function"){var x=p;if(p=x(),Ka){mn(!0);try{x()}finally{mn(!1)}}}return v.memoizedState=v.baseState=p,v.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:p},v}function Oi(p,v,x,F){return p.baseState=x,To(p,fa,typeof F=="function"?F:Ii)}function Gt(p,v,x,F,Y){if(Yc(p))throw Error(r(485));if(p=v.action,p!==null){var se={payload:Y,action:p,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Fe){se.listeners.push(Fe)}};be.T!==null?x(!0):se.isTransition=!1,F(se),x=v.pending,x===null?(se.next=v.pending=se,Hp(v,se)):(se.next=x.next,v.pending=x.next=se)}}function Hp(p,v){var x=v.action,F=v.payload,Y=p.state;if(v.isTransition){var se=be.T,Fe={};be.T=Fe;try{var dt=x(Y,F),Ft=be.S;Ft!==null&&Ft(Fe,dt),uh(p,v,dt)}catch(oa){dh(p,v,oa)}finally{be.T=se}}else try{se=x(Y,F),uh(p,v,se)}catch(oa){dh(p,v,oa)}}function uh(p,v,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(F){ch(p,v,F)},function(F){return dh(p,v,F)}):ch(p,v,x)}function ch(p,v,x){v.status="fulfilled",v.value=x,Cu(v),p.state=x,v=p.pending,v!==null&&(x=v.next,x===v?p.pending=null:(x=x.next,v.next=x,Hp(p,x)))}function dh(p,v,x){var F=p.pending;if(p.pending=null,F!==null){F=F.next;do v.status="rejected",v.reason=x,Cu(v),v=v.next;while(v!==F)}p.action=null}function Cu(p){p=p.listeners;for(var v=0;v<p.length;v++)(0,p[v])()}function hh(p,v){return v}function qu(p,v){if(_i){var x=Ur.formState;if(x!==null){e:{var F=wa;if(_i){if(Hi){t:{for(var Y=Hi,se=wu;Y.nodeType!==8;){if(!se){Y=null;break t}if(Y=zu(Y.nextSibling),Y===null){Y=null;break t}}se=Y.data,Y=se==="F!"||se==="F"?Y:null}if(Y){Hi=zu(Y.nextSibling),F=Y.data==="F!";break e}}yc(F)}F=!1}F&&(v=x[0])}}return x=Fi(),x.memoizedState=x.baseState=v,F={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hh,lastRenderedState:v},x.queue=F,x=Qf.bind(null,wa,F),F.dispatch=x,F=Ki(!1),se=Wc.bind(null,wa,!1,F.queue),F=Fi(),Y={state:v,dispatch:null,action:p,pending:null},F.queue=Y,x=Gt.bind(null,wa,Y,se,x),Y.dispatch=x,F.memoizedState=p,[v,x,!1]}function Um(p){var v=Bn();return Wf(v,fa,p)}function Wf(p,v,x){v=To(p,v,hh)[0],p=Hs(Ii)[0],v=typeof v=="object"&&v!==null&&typeof v.then=="function"?wi(v):v;var F=Bn(),Y=F.queue,se=Y.dispatch;return x!==F.memoizedState&&(wa.flags|=2048,Ol(9,km.bind(null,Y,x),{destroy:void 0},null)),[v,se,p]}function km(p,v){p.action=v}function fh(p){var v=Bn(),x=fa;if(x!==null)return Wf(v,x,p);Bn(),v=v.memoizedState,x=Bn();var F=x.queue.dispatch;return x.memoizedState=p,[v,F,!1]}function Ol(p,v,x,F){return p={tag:p,create:v,inst:x,deps:F,next:null},v=wa.updateQueue,v===null&&(v=po(),wa.updateQueue=v),x=v.lastEffect,x===null?v.lastEffect=p.next=p:(F=x.next,x.next=p,p.next=F,v.lastEffect=p),p}function Bh(){return Bn().memoizedState}function qc(p,v,x,F){var Y=Fi();wa.flags|=p,Y.memoizedState=Ol(1|v,x,{destroy:void 0},F===void 0?null:F)}function Hc(p,v,x,F){var Y=Bn();F=F===void 0?null:F;var se=Y.memoizedState.inst;fa!==null&&F!==null&&vi(F,fa.memoizedState.deps)?Y.memoizedState=Ol(v,x,se,F):(wa.flags|=p,Y.memoizedState=Ol(1|v,x,se,F))}function Yf(p,v){qc(8390656,8,p,v)}function $c(p,v){Hc(2048,8,p,v)}function sl(p,v){return Hc(4,2,p,v)}function Bm(p,v){return Hc(4,4,p,v)}function ao(p,v){if(typeof v=="function"){p=p();var x=v(p);return function(){typeof x=="function"?x():v(null)}}if(v!=null)return p=p(),v.current=p,function(){v.current=null}}function Oy(p,v,x){x=x!=null?x.concat([p]):null,Hc(4,4,ao.bind(null,v,p),x)}function ph(){}function ni(p,v){var x=Bn();v=v===void 0?null:v;var F=x.memoizedState;return v!==null&&vi(v,F[1])?F[0]:(x.memoizedState=[p,v],p)}function xn(p,v){var x=Bn();v=v===void 0?null:v;var F=x.memoizedState;if(v!==null&&vi(v,F[1]))return F[0];if(F=p(),Ka){mn(!0);try{p()}finally{mn(!1)}}return x.memoizedState=[F,v],F}function Xf(p,v,x){return x===void 0||(ra&1073741824)!==0?p.memoizedState=v:(p.memoizedState=x,p=wh(),wa.lanes|=p,Wi|=p,x)}function bu(p,v,x,F){return Os(x,v)?x:nl.current!==null?(p=Xf(p,x,F),Os(p,v)||(ol=!0),p):(ra&42)===0?(ol=!0,p.memoizedState=x):(p=wh(),wa.lanes|=p,Wi|=p,v)}function Ld(p,v,x,F,Y){var se=$e.p;$e.p=se!==0&&8>se?se:8;var Fe=be.T,dt={};be.T=dt,Wc(p,!1,v,x);try{var Ft=Y(),oa=be.S;if(oa!==null&&oa(dt,Ft),Ft!==null&&typeof Ft=="object"&&typeof Ft.then=="function"){var ja=ut(Ft,F);mh(p,v,ja,go(p))}else mh(p,v,F,go(p))}catch(nr){mh(p,v,{then:function(){},status:"rejected",reason:nr},go())}finally{$e.p=se,be.T=Fe}}function xu(){}function Kc(p,v,x,F){if(p.tag!==5)throw Error(r(476));var Y=vf(p).queue;Ld(p,Y,v,ft,x===null?xu:function(){return Gh(p),x(F)})}function vf(p){var v=p.memoizedState;if(v!==null)return v;v={memoizedState:ft,baseState:ft,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:ft},next:null};var x={};return v.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:x},next:null},p.memoizedState=v,p=p.alternate,p!==null&&(p.memoizedState=v),v}function Gh(p){var v=vf(p).next.queue;mh(p,v,{},go())}function Dl(){return Ks(Jy)}function wf(){return Bn().memoizedState}function So(){return Bn().memoizedState}function Fd(p){for(var v=p.return;v!==null;){switch(v.tag){case 24:case 3:var x=go();p=Sf(x);var F=Cf(v,p,x);F!==null&&(Il(F,v,x),bf(F,v,x)),v={cache:kh()},p.payload=v;return}v=v.return}}function Jf(p,v,x){var F=go();x={lane:F,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null},Yc(p)?ep(v,x):(x=Fc(p,v,x,F),x!==null&&(Il(x,p,F),Ud(x,v,F)))}function Qf(p,v,x){var F=go();mh(p,v,x,F)}function mh(p,v,x,F){var Y={lane:F,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null};if(Yc(p))ep(v,Y);else{var se=p.alternate;if(p.lanes===0&&(se===null||se.lanes===0)&&(se=v.lastRenderedReducer,se!==null))try{var Fe=v.lastRenderedState,dt=se(Fe,x);if(Y.hasEagerState=!0,Y.eagerState=dt,Os(dt,Fe))return Xl(p,v,Y,0),Ur===null&&is(),!1}catch{}finally{}if(x=Fc(p,v,Y,F),x!==null)return Il(x,p,F),Ud(x,v,F),!0}return!1}function Wc(p,v,x,F){if(F={lane:2,revertLane:dA(),action:F,hasEagerState:!1,eagerState:null,next:null},Yc(p)){if(v)throw Error(r(479))}else v=Fc(p,x,F,2),v!==null&&Il(v,p,2)}function Yc(p){var v=p.alternate;return p===wa||v!==null&&v===wa}function ep(p,v){Ga=ta=!0;var x=p.pending;x===null?v.next=v:(v.next=x.next,x.next=v),p.pending=v}function Ud(p,v,x){if((x&4194176)!==0){var F=v.lanes;F&=p.pendingLanes,x|=F,v.lanes=x,yt(p,x)}}var Pu={readContext:Ks,use:ss,useCallback:lr,useContext:lr,useEffect:lr,useImperativeHandle:lr,useLayoutEffect:lr,useInsertionEffect:lr,useMemo:lr,useReducer:lr,useRef:lr,useState:lr,useDebugValue:lr,useDeferredValue:lr,useTransition:lr,useSyncExternalStore:lr,useId:lr};Pu.useCacheRefresh=lr,Pu.useMemoCache=lr,Pu.useHostTransitionStatus=lr,Pu.useFormState=lr,Pu.useActionState=lr,Pu.useOptimistic=lr;var Ac={readContext:Ks,use:ss,useCallback:function(p,v){return Fi().memoizedState=[p,v===void 0?null:v],p},useContext:Ks,useEffect:Yf,useImperativeHandle:function(p,v,x){x=x!=null?x.concat([p]):null,qc(4194308,4,ao.bind(null,v,p),x)},useLayoutEffect:function(p,v){return qc(4194308,4,p,v)},useInsertionEffect:function(p,v){qc(4,2,p,v)},useMemo:function(p,v){var x=Fi();v=v===void 0?null:v;var F=p();if(Ka){mn(!0);try{p()}finally{mn(!1)}}return x.memoizedState=[F,v],F},useReducer:function(p,v,x){var F=Fi();if(x!==void 0){var Y=x(v);if(Ka){mn(!0);try{x(v)}finally{mn(!1)}}}else Y=v;return F.memoizedState=F.baseState=Y,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:Y},F.queue=p,p=p.dispatch=Jf.bind(null,wa,p),[F.memoizedState,p]},useRef:function(p){var v=Fi();return p={current:p},v.memoizedState=p},useState:function(p){p=Ki(p);var v=p.queue,x=Qf.bind(null,wa,v);return v.dispatch=x,[p.memoizedState,x]},useDebugValue:ph,useDeferredValue:function(p,v){var x=Fi();return Xf(x,p,v)},useTransition:function(){var p=Ki(!1);return p=Ld.bind(null,wa,p.queue,!0,!1),Fi().memoizedState=p,[!1,p]},useSyncExternalStore:function(p,v,x){var F=wa,Y=Fi();if(_i){if(x===void 0)throw Error(r(407));x=x()}else{if(x=v(),Ur===null)throw Error(r(349));(dr&60)!==0||xs(F,v,x)}Y.memoizedState=x;var se={value:x,getSnapshot:v};return Y.queue=se,Yf(Su.bind(null,F,se,p),[p]),F.flags|=2048,Ol(9,zl.bind(null,F,se,x,v),{destroy:void 0},null),x},useId:function(){var p=Fi(),v=Ur.identifierPrefix;if(_i){var x=Gu,F=vu;x=(F&~(1<<32-en(F)-1)).toString(32)+x,v=":"+v+"R"+x,x=qa++,0<x&&(v+="H"+x.toString(32)),v+=":"}else x=rn++,v=":"+v+"r"+x.toString(32)+":";return p.memoizedState=v},useCacheRefresh:function(){return Fi().memoizedState=Fd.bind(null,wa)}};Ac.useMemoCache=vn,Ac.useHostTransitionStatus=Dl,Ac.useFormState=qu,Ac.useActionState=qu,Ac.useOptimistic=function(p){var v=Fi();v.memoizedState=v.baseState=p;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return v.queue=x,v=Wc.bind(null,wa,!0,x),x.dispatch=v,[p,v]};var eu={readContext:Ks,use:ss,useCallback:ni,useContext:Ks,useEffect:$c,useImperativeHandle:Oy,useInsertionEffect:sl,useLayoutEffect:Bm,useMemo:xn,useReducer:Hs,useRef:Bh,useState:function(){return Hs(Ii)},useDebugValue:ph,useDeferredValue:function(p,v){var x=Bn();return bu(x,fa.memoizedState,p,v)},useTransition:function(){var p=Hs(Ii)[0],v=Bn().memoizedState;return[typeof p=="boolean"?p:wi(p),v]},useSyncExternalStore:Vl,useId:wf};eu.useCacheRefresh=So,eu.useMemoCache=vn,eu.useHostTransitionStatus=Dl,eu.useFormState=Um,eu.useActionState=Um,eu.useOptimistic=function(p,v){var x=Bn();return Oi(x,fa,p,v)};var _c={readContext:Ks,use:ss,useCallback:ni,useContext:Ks,useEffect:$c,useImperativeHandle:Oy,useInsertionEffect:sl,useLayoutEffect:Bm,useMemo:xn,useReducer:il,useRef:Bh,useState:function(){return il(Ii)},useDebugValue:ph,useDeferredValue:function(p,v){var x=Bn();return fa===null?Xf(x,p,v):bu(x,fa.memoizedState,p,v)},useTransition:function(){var p=il(Ii)[0],v=Bn().memoizedState;return[typeof p=="boolean"?p:wi(p),v]},useSyncExternalStore:Vl,useId:wf};_c.useCacheRefresh=So,_c.useMemoCache=vn,_c.useHostTransitionStatus=Dl,_c.useFormState=fh,_c.useActionState=fh,_c.useOptimistic=function(p,v){var x=Bn();return fa!==null?Oi(x,fa,p,v):(x.baseState=p,[p,x.queue.dispatch])};function Ps(p,v,x,F){v=p.memoizedState,x=x(F,v),x=x==null?v:De({},v,x),p.memoizedState=x,p.lanes===0&&(p.updateQueue.baseState=x)}var tu={isMounted:function(p){return(p=p._reactInternals)?ke(p)===p:!1},enqueueSetState:function(p,v,x){p=p._reactInternals;var F=go(),Y=Sf(F);Y.payload=v,x!=null&&(Y.callback=x),v=Cf(p,Y,F),v!==null&&(Il(v,p,F),bf(v,p,F))},enqueueReplaceState:function(p,v,x){p=p._reactInternals;var F=go(),Y=Sf(F);Y.tag=1,Y.payload=v,x!=null&&(Y.callback=x),v=Cf(p,Y,F),v!==null&&(Il(v,p,F),bf(v,p,F))},enqueueForceUpdate:function(p,v){p=p._reactInternals;var x=go(),F=Sf(x);F.tag=2,v!=null&&(F.callback=v),v=Cf(p,F,x),v!==null&&(Il(v,p,x),bf(v,p,x))}};function Hu(p,v,x,F,Y,se,Fe){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(F,se,Fe):v.prototype&&v.prototype.isPureReactComponent?!bl(x,F)||!bl(Y,se):!0}function $s(p,v,x,F){p=v.state,typeof v.componentWillReceiveProps=="function"&&v.componentWillReceiveProps(x,F),typeof v.UNSAFE_componentWillReceiveProps=="function"&&v.UNSAFE_componentWillReceiveProps(x,F),v.state!==p&&tu.enqueueReplaceState(v,v.state,null)}function Eu(p,v){var x=v;if("ref"in v){x={};for(var F in v)F!=="ref"&&(x[F]=v[F])}if(p=p.defaultProps){x===v&&(x=De({},x));for(var Y in p)x[Y]===void 0&&(x[Y]=p[Y])}return x}var yh=typeof reportError=="function"?reportError:function(p){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var v=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof p=="object"&&p!==null&&typeof p.message=="string"?String(p.message):String(p),error:p});if(!window.dispatchEvent(v))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",p);return}console.error(p)};function tp(p){yh(p)}function jh(p){console.error(p)}function gh(p){yh(p)}function kd(p,v){try{var x=p.onUncaughtError;x(v.value,{componentStack:v.stack})}catch(F){setTimeout(function(){throw F})}}function Gm(p,v,x){try{var F=p.onCaughtError;F(x.value,{componentStack:x.stack,errorBoundary:v.tag===1?v.stateNode:null})}catch(Y){setTimeout(function(){throw Y})}}function $p(p,v,x){return x=Sf(x),x.tag=3,x.payload={element:null},x.callback=function(){kd(p,v)},x}function jm(p){return p=Sf(p),p.tag=3,p}function Dy(p,v,x,F){var Y=x.type.getDerivedStateFromError;if(typeof Y=="function"){var se=F.value;p.payload=function(){return Y(se)},p.callback=function(){Gm(v,x,F)}}var Fe=x.stateNode;Fe!==null&&typeof Fe.componentDidCatch=="function"&&(p.callback=function(){Gm(v,x,F),typeof Y!="function"&&(os===null?os=new Set([this]):os.add(this));var dt=F.stack;this.componentDidCatch(F.value,{componentStack:dt!==null?dt:""})})}function Wg(p,v,x,F,Y){if(x.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){if(v=x.alternate,v!==null&&sp(v,x,Y,!0),x=Nl.current,x!==null){switch(x.tag){case 13:return Zu===null?V0():x.alternate===null&&Vn===0&&(Vn=3),x.flags&=-257,x.flags|=65536,x.lanes=Y,F===lh?x.flags|=16384:(v=x.updateQueue,v===null?x.updateQueue=new Set([F]):v.add(F),o1(p,F,Y)),!1;case 22:return x.flags|=65536,F===lh?x.flags|=16384:(v=x.updateQueue,v===null?(v={transitions:null,markerInstances:null,retryQueue:new Set([F])},x.updateQueue=v):(x=v.retryQueue,x===null?v.retryQueue=new Set([F]):x.add(F)),o1(p,F,Y)),!1}throw Error(r(435,x.tag))}return o1(p,F,Y),V0(),!1}if(_i)return v=Nl.current,v!==null?((v.flags&65536)===0&&(v.flags|=256),v.flags|=65536,v.lanes=Y,F!==$f&&(p=Error(r(422),{cause:F}),zd(ts(p,x)))):(F!==$f&&(v=Error(r(423),{cause:F}),zd(ts(v,x))),p=p.current.alternate,p.flags|=65536,Y&=-Y,p.lanes|=Y,F=ts(F,x),Y=$p(p.stateNode,F,Y),Ly(p,Y),Vn!==4&&(Vn=2)),!1;var se=Error(r(520),{cause:F});if(se=ts(se,x),Cn===null?Cn=[se]:Cn.push(se),Vn!==4&&(Vn=2),v===null)return!0;F=ts(F,x),x=v;do{switch(x.tag){case 3:return x.flags|=65536,p=Y&-Y,x.lanes|=p,p=$p(x.stateNode,F,p),Ly(x,p),!1;case 1:if(v=x.type,se=x.stateNode,(x.flags&128)===0&&(typeof v.getDerivedStateFromError=="function"||se!==null&&typeof se.componentDidCatch=="function"&&(os===null||!os.has(se))))return x.flags|=65536,Y&=-Y,x.lanes|=Y,Y=jm(Y),Dy(Y,p,x,F),Ly(x,Y),!1}x=x.return}while(x!==null);return!1}var Kp=Error(r(461)),ol=!1;function yl(p,v,x,F){v.child=p===null?Af(v,null,x,F):Bc(v,p.child,x,F)}function Yg(p,v,x,F,Y){x=x.render;var se=v.ref;if("ref"in F){var Fe={};for(var dt in F)dt!=="ref"&&(Fe[dt]=F[dt])}else Fe=F;return wc(v),F=xi(p,v,x,Fe,se,Y),dt=kn(),p!==null&&!ol?(_n(p,v,Y),vc(p,v,Y)):(_i&&dt&&Dh(v),v.flags|=1,yl(p,v,F,Y),v.child)}function Xg(p,v,x,F,Y){if(p===null){var se=x.type;return typeof se=="function"&&!ua(se)&&se.defaultProps===void 0&&x.compare===null?(v.tag=15,v.type=se,Jg(p,v,se,F,Y)):(p=ia(x.type,null,F,v,v.mode,Y),p.ref=v.ref,p.return=v,v.child=p)}if(se=p.child,!ms(p,Y)){var Fe=se.memoizedProps;if(x=x.compare,x=x!==null?x:bl,x(Fe,F)&&p.ref===v.ref)return vc(p,v,Y)}return v.flags|=1,p=Sa(se,F),p.ref=v.ref,p.return=v,v.child=p}function Jg(p,v,x,F,Y){if(p!==null){var se=p.memoizedProps;if(bl(se,F)&&p.ref===v.ref)if(ol=!1,v.pendingProps=F=se,ms(p,Y))(p.flags&131072)!==0&&(ol=!0);else return v.lanes=p.lanes,vc(p,v,Y)}return ap(p,v,x,F,Y)}function Wp(p,v,x){var F=v.pendingProps,Y=F.children,se=(v.stateNode._pendingVisibility&2)!==0,Fe=p!==null?p.memoizedState:null;if(gl(p,v),F.mode==="hidden"||se){if((v.flags&128)!==0){if(F=Fe!==null?Fe.baseLanes|x:x,p!==null){for(Y=v.child=p.child,se=0;Y!==null;)se=se|Y.lanes|Y.childLanes,Y=Y.sibling;v.childLanes=se&~F}else v.childLanes=0,v.child=null;return Yp(p,v,F,x)}if((x&536870912)!==0)v.memoizedState={baseLanes:0,cachePool:null},p!==null&&Pt(v,Fe!==null?Fe.cachePool:null),Fe!==null?Tu(v,Fe):Md(),Kf(v);else return v.lanes=v.childLanes=536870912,Yp(p,v,Fe!==null?Fe.baseLanes|x:x,x)}else Fe!==null?(Pt(v,Fe.cachePool),Tu(v,Fe),Id(),v.memoizedState=null):(p!==null&&Pt(v,null),Md(),Id());return yl(p,v,Y,x),v.child}function Yp(p,v,x,F){var Y=Qt();return Y=Y===null?null:{parent:to._currentValue,pool:Y},v.memoizedState={baseLanes:x,cachePool:Y},p!==null&&Pt(v,null),Md(),Kf(v),p!==null&&sp(p,v,F,!0),null}function gl(p,v){var x=v.ref;if(x===null)p!==null&&p.ref!==null&&(v.flags|=2097664);else{if(typeof x!="function"&&typeof x!="object")throw Error(r(284));(p===null||p.ref!==x)&&(v.flags|=2097664)}}function ap(p,v,x,F,Y){return wc(v),x=xi(p,v,x,F,void 0,Y),F=kn(),p!==null&&!ol?(_n(p,v,Y),vc(p,v,Y)):(_i&&F&&Dh(v),v.flags|=1,yl(p,v,x,Y),v.child)}function Qg(p,v,x,F,Y,se){return wc(v),v.updateQueue=null,x=ri(v,F,x,Y),qn(p),F=kn(),p!==null&&!ol?(_n(p,v,se),vc(p,v,se)):(_i&&F&&Dh(v),v.flags|=1,yl(p,v,x,se),v.child)}function eA(p,v,x,F,Y){if(wc(v),v.stateNode===null){var se=Uc,Fe=x.contextType;typeof Fe=="object"&&Fe!==null&&(se=Ks(Fe)),se=new x(F,se),v.memoizedState=se.state!==null&&se.state!==void 0?se.state:null,se.updater=tu,v.stateNode=se,se._reactInternals=v,se=v.stateNode,se.props=F,se.state=v.memoizedState,se.refs={},_h(v),Fe=x.contextType,se.context=typeof Fe=="object"&&Fe!==null?Ks(Fe):Uc,se.state=v.memoizedState,Fe=x.getDerivedStateFromProps,typeof Fe=="function"&&(Ps(v,x,Fe,F),se.state=v.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof se.getSnapshotBeforeUpdate=="function"||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(Fe=se.state,typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount(),Fe!==se.state&&tu.enqueueReplaceState(se,se.state,null),Qp(v,F,se,Y),vh(),se.state=v.memoizedState),typeof se.componentDidMount=="function"&&(v.flags|=4194308),F=!0}else if(p===null){se=v.stateNode;var dt=v.memoizedProps,Ft=Eu(x,dt);se.props=Ft;var oa=se.context,ja=x.contextType;Fe=Uc,typeof ja=="object"&&ja!==null&&(Fe=Ks(ja));var nr=x.getDerivedStateFromProps;ja=typeof nr=="function"||typeof se.getSnapshotBeforeUpdate=="function",dt=v.pendingProps!==dt,ja||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(dt||oa!==Fe)&&$s(v,se,F,Fe),Ku=!1;var ba=v.memoizedState;se.state=ba,Qp(v,F,se,Y),vh(),oa=v.memoizedState,dt||ba!==oa||Ku?(typeof nr=="function"&&(Ps(v,x,nr,F),oa=v.memoizedState),(Ft=Ku||Hu(v,x,Ft,F,ba,oa,Fe))?(ja||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount()),typeof se.componentDidMount=="function"&&(v.flags|=4194308)):(typeof se.componentDidMount=="function"&&(v.flags|=4194308),v.memoizedProps=F,v.memoizedState=oa),se.props=F,se.state=oa,se.context=Fe,F=Ft):(typeof se.componentDidMount=="function"&&(v.flags|=4194308),F=!1)}else{se=v.stateNode,nA(p,v),Fe=v.memoizedProps,ja=Eu(x,Fe),se.props=ja,nr=v.pendingProps,ba=se.context,oa=x.contextType,Ft=Uc,typeof oa=="object"&&oa!==null&&(Ft=Ks(oa)),dt=x.getDerivedStateFromProps,(oa=typeof dt=="function"||typeof se.getSnapshotBeforeUpdate=="function")||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(Fe!==nr||ba!==Ft)&&$s(v,se,F,Ft),Ku=!1,ba=v.memoizedState,se.state=ba,Qp(v,F,se,Y),vh();var Za=v.memoizedState;Fe!==nr||ba!==Za||Ku||p!==null&&p.dependencies!==null&&Tf(p.dependencies)?(typeof dt=="function"&&(Ps(v,x,dt,F),Za=v.memoizedState),(ja=Ku||Hu(v,x,ja,F,ba,Za,Ft)||p!==null&&p.dependencies!==null&&Tf(p.dependencies))?(oa||typeof se.UNSAFE_componentWillUpdate!="function"&&typeof se.componentWillUpdate!="function"||(typeof se.componentWillUpdate=="function"&&se.componentWillUpdate(F,Za,Ft),typeof se.UNSAFE_componentWillUpdate=="function"&&se.UNSAFE_componentWillUpdate(F,Za,Ft)),typeof se.componentDidUpdate=="function"&&(v.flags|=4),typeof se.getSnapshotBeforeUpdate=="function"&&(v.flags|=1024)):(typeof se.componentDidUpdate!="function"||Fe===p.memoizedProps&&ba===p.memoizedState||(v.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||Fe===p.memoizedProps&&ba===p.memoizedState||(v.flags|=1024),v.memoizedProps=F,v.memoizedState=Za),se.props=F,se.state=Za,se.context=Ft,F=ja):(typeof se.componentDidUpdate!="function"||Fe===p.memoizedProps&&ba===p.memoizedState||(v.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||Fe===p.memoizedProps&&ba===p.memoizedState||(v.flags|=1024),F=!1)}return se=F,gl(p,v),F=(v.flags&128)!==0,se||F?(se=v.stateNode,x=F&&typeof x.getDerivedStateFromError!="function"?null:se.render(),v.flags|=1,p!==null&&F?(v.child=Bc(v,p.child,null,Y),v.child=Bc(v,null,x,Y)):yl(p,v,x,Y),v.memoizedState=se.state,p=v.child):p=vc(p,v,Y),p}function P0(p,v,x,F){return Lh(),v.flags|=256,yl(p,v,x,F),v.child}var tA={dehydrated:null,treeContext:null,retryLane:0};function Di(p){return{baseLanes:p,cachePool:Aa()}}function My(p,v,x){return p=p!==null?p.childLanes&~x:0,v&&(p|=Ws),p}function Iy(p,v,x){var F=v.pendingProps,Y=!1,se=(v.flags&128)!==0,Fe;if((Fe=se)||(Fe=p!==null&&p.memoizedState===null?!1:(Ds.current&2)!==0),Fe&&(Y=!0,v.flags&=-129),Fe=(v.flags&32)!==0,v.flags&=-33,p===null){if(_i){if(Y?jc(v):Id(),_i){var dt=Hi,Ft;if(Ft=dt){e:{for(Ft=dt,dt=wu;Ft.nodeType!==8;){if(!dt){dt=null;break e}if(Ft=zu(Ft.nextSibling),Ft===null){dt=null;break e}}dt=Ft}dt!==null?(v.memoizedState={dehydrated:dt,treeContext:kc!==null?{id:vu,overflow:Gu}:null,retryLane:536870912},Ft=aa(18,null,null,0),Ft.stateNode=dt,Ft.return=v,v.child=Ft,al=v,Hi=null,Ft=!0):Ft=!1}Ft||yc(v)}if(dt=v.memoizedState,dt!==null&&(dt=dt.dehydrated,dt!==null))return dt.data==="$!"?v.lanes=16:v.lanes=536870912,null;Zc(v)}return dt=F.children,F=F.fallback,Y?(Id(),Y=v.mode,dt=rp({mode:"hidden",children:dt},Y),F=zt(F,Y,x,null),dt.return=v,F.return=v,dt.sibling=F,v.child=dt,Y=v.child,Y.memoizedState=Di(x),Y.childLanes=My(p,Fe,x),v.memoizedState=tA,F):(jc(v),aA(v,dt))}if(Ft=p.memoizedState,Ft!==null&&(dt=Ft.dehydrated,dt!==null)){if(se)v.flags&256?(jc(v),v.flags&=-257,v=Zm(p,v,x)):v.memoizedState!==null?(Id(),v.child=p.child,v.flags|=128,v=null):(Id(),Y=F.fallback,dt=v.mode,F=rp({mode:"visible",children:F.children},dt),Y=zt(Y,dt,x,null),Y.flags|=2,F.return=v,Y.return=v,F.sibling=Y,v.child=F,Bc(v,p.child,null,x),F=v.child,F.memoizedState=Di(x),F.childLanes=My(p,Fe,x),v.memoizedState=tA,v=Y);else if(jc(v),dt.data==="$!"){if(Fe=dt.nextSibling&&dt.nextSibling.dataset,Fe)var oa=Fe.dgst;Fe=oa,F=Error(r(419)),F.stack="",F.digest=Fe,zd({value:F,source:null,stack:null}),v=Zm(p,v,x)}else if(ol||sp(p,v,x,!1),Fe=(x&p.childLanes)!==0,ol||Fe){if(Fe=Ur,Fe!==null){if(F=x&-x,(F&42)!==0)F=1;else switch(F){case 2:F=1;break;case 8:F=4;break;case 32:F=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:F=64;break;case 268435456:F=134217728;break;default:F=0}if(F=(F&(Fe.suspendedLanes|x))!==0?0:F,F!==0&&F!==Ft.retryLane)throw Ft.retryLane=F,el(p,F),Il(Fe,p,F),Kp}dt.data==="$?"||V0(),v=Zm(p,v,x)}else dt.data==="$?"?(v.flags|=128,v.child=p.child,v=uP.bind(null,p),dt._reactRetry=v,v=null):(p=Ft.treeContext,Hi=zu(dt.nextSibling),al=v,_i=!0,Ql=null,wu=!1,p!==null&&(tl[pl++]=vu,tl[pl++]=Gu,tl[pl++]=kc,vu=p.id,Gu=p.overflow,kc=v),v=aA(v,F.children),v.flags|=4096);return v}return Y?(Id(),Y=F.fallback,dt=v.mode,Ft=p.child,oa=Ft.sibling,F=Sa(Ft,{mode:"hidden",children:F.children}),F.subtreeFlags=Ft.subtreeFlags&31457280,oa!==null?Y=Sa(oa,Y):(Y=zt(Y,dt,x,null),Y.flags|=2),Y.return=v,F.return=v,F.sibling=Y,v.child=F,F=Y,Y=v.child,dt=p.child.memoizedState,dt===null?dt=Di(x):(Ft=dt.cachePool,Ft!==null?(oa=to._currentValue,Ft=Ft.parent!==oa?{parent:oa,pool:oa}:Ft):Ft=Aa(),dt={baseLanes:dt.baseLanes|x,cachePool:Ft}),Y.memoizedState=dt,Y.childLanes=My(p,Fe,x),v.memoizedState=tA,F):(jc(v),x=p.child,p=x.sibling,x=Sa(x,{mode:"visible",children:F.children}),x.return=v,x.sibling=null,p!==null&&(Fe=v.deletions,Fe===null?(v.deletions=[p],v.flags|=16):Fe.push(p)),v.child=x,v.memoizedState=null,x)}function aA(p,v){return v=rp({mode:"visible",children:v},p.mode),v.return=p,p.child=v}function rp(p,v){return sa(p,v,0,null)}function Zm(p,v,x){return Bc(v,p.child,null,x),p=aA(v,v.pendingProps.children),p.flags|=2,v.memoizedState=null,p}function Xp(p,v,x){p.lanes|=v;var F=p.alternate;F!==null&&(F.lanes|=v),rA(p.return,v,x)}function Jp(p,v,x,F,Y){var se=p.memoizedState;se===null?p.memoizedState={isBackwards:v,rendering:null,renderingStartTime:0,last:F,tail:x,tailMode:Y}:(se.isBackwards=v,se.rendering=null,se.renderingStartTime=0,se.last=F,se.tail=x,se.tailMode=Y)}function Bd(p,v,x){var F=v.pendingProps,Y=F.revealOrder,se=F.tail;if(yl(p,v,F.children,x),F=Ds.current,(F&2)!==0)F=F&1|2,v.flags|=128;else{if(p!==null&&(p.flags&128)!==0)e:for(p=v.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&Xp(p,x,v);else if(p.tag===19)Xp(p,x,v);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===v)break e;for(;p.sibling===null;){if(p.return===null||p.return===v)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}F&=1}switch(_e(Ds,F),Y){case"forwards":for(x=v.child,Y=null;x!==null;)p=x.alternate,p!==null&&Zp(p)===null&&(Y=x),x=x.sibling;x=Y,x===null?(Y=v.child,v.child=null):(Y=x.sibling,x.sibling=null),Jp(v,!1,Y,x,se);break;case"backwards":for(x=null,Y=v.child,v.child=null;Y!==null;){if(p=Y.alternate,p!==null&&Zp(p)===null){v.child=Y;break}p=Y.sibling,Y.sibling=x,x=Y,Y=p}Jp(v,!0,x,null,se);break;case"together":Jp(v,!1,null,null,void 0);break;default:v.memoizedState=null}return v.child}function vc(p,v,x){if(p!==null&&(v.dependencies=p.dependencies),Wi|=v.lanes,(x&v.childLanes)===0)if(p!==null){if(sp(p,v,x,!1),(x&v.childLanes)===0)return null}else return null;if(p!==null&&v.child!==p.child)throw Error(r(153));if(v.child!==null){for(p=v.child,x=Sa(p,p.pendingProps),v.child=x,x.return=v;p.sibling!==null;)p=p.sibling,x=x.sibling=Sa(p,p.pendingProps),x.return=v;x.sibling=null}return v.child}function ms(p,v){return(p.lanes&v)!==0?!0:(p=p.dependencies,!!(p!==null&&Tf(p)))}function Xc(p,v,x){switch(v.tag){case 3:la(v,v.stateNode.containerInfo),Jc(v,to,p.memoizedState.cache),Lh();break;case 27:case 5:yr(v);break;case 4:la(v,v.stateNode.containerInfo);break;case 10:Jc(v,v.type,v.memoizedProps.value);break;case 13:var F=v.memoizedState;if(F!==null)return F.dehydrated!==null?(jc(v),v.flags|=128,null):(x&v.child.childLanes)!==0?Iy(p,v,x):(jc(v),p=vc(p,v,x),p!==null?p.sibling:null);jc(v);break;case 19:var Y=(p.flags&128)!==0;if(F=(x&v.childLanes)!==0,F||(sp(p,v,x,!1),F=(x&v.childLanes)!==0),Y){if(F)return Bd(p,v,x);v.flags|=128}if(Y=v.memoizedState,Y!==null&&(Y.rendering=null,Y.tail=null,Y.lastEffect=null),_e(Ds,Ds.current),F)break;return null;case 22:case 23:return v.lanes=0,Wp(p,v,x);case 24:Jc(v,to,p.memoizedState.cache)}return vc(p,v,x)}function np(p,v,x){if(p!==null)if(p.memoizedProps!==v.pendingProps)ol=!0;else{if(!ms(p,x)&&(v.flags&128)===0)return ol=!1,Xc(p,v,x);ol=(p.flags&131072)!==0}else ol=!1,_i&&(v.flags&1048576)!==0&&Bp(v,Oh,v.index);switch(v.lanes=0,v.tag){case 16:e:{p=v.pendingProps;var F=v.elementType,Y=F._init;if(F=Y(F._payload),v.type=F,typeof F=="function")ua(F)?(p=Eu(F,p),v.tag=1,v=eA(null,v,F,p,x)):(v.tag=0,v=ap(null,v,F,p,x));else{if(F!=null){if(Y=F.$$typeof,Y===Z){v.tag=11,v=Yg(null,v,F,p,x);break e}else if(Y===J){v.tag=14,v=Xg(null,v,F,p,x);break e}}throw v=Re(F)||F,Error(r(306,v,""))}}return v;case 0:return ap(p,v,v.type,v.pendingProps,x);case 1:return F=v.type,Y=Eu(F,v.pendingProps),eA(p,v,F,Y,x);case 3:e:{if(la(v,v.stateNode.containerInfo),p===null)throw Error(r(387));var se=v.pendingProps;Y=v.memoizedState,F=Y.element,nA(p,v),Qp(v,se,null,x);var Fe=v.memoizedState;if(se=Fe.cache,Jc(v,to,se),se!==Y.cache&&qm(v,[to],x,!0),vh(),se=Fe.element,Y.isDehydrated)if(Y={element:se,isDehydrated:!1,cache:Fe.cache},v.updateQueue.baseState=Y,v.memoizedState=Y,v.flags&256){v=P0(p,v,se,x);break e}else if(se!==F){F=ts(Error(r(424)),v),zd(F),v=P0(p,v,se,x);break e}else for(Hi=zu(v.stateNode.containerInfo.firstChild),al=v,_i=!0,Ql=null,wu=!0,x=Af(v,null,se,x),v.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(Lh(),se===F){v=vc(p,v,x);break e}yl(p,v,se,x)}v=v.child}return v;case 26:return gl(p,v),p===null?(x=v1(v.type,null,v.pendingProps,null))?v.memoizedState=x:_i||(x=v.type,p=v.pendingProps,F=Ky(Pa.current).createElement(x),F[$t]=v,F[qt]=p,Co(F,x,p),Hr(F),v.stateNode=F):v.memoizedState=v1(v.type,p.memoizedProps,v.pendingProps,p.memoizedState),null;case 27:return yr(v),p===null&&_i&&(F=v.stateNode=yA(v.type,v.pendingProps,Pa.current),al=v,wu=!0,Hi=zu(F.firstChild)),F=v.pendingProps.children,p!==null||_i?yl(p,v,F,x):v.child=Bc(v,null,F,x),gl(p,v),v.child;case 5:return p===null&&_i&&((Y=F=Hi)&&(F=yP(F,v.type,v.pendingProps,wu),F!==null?(v.stateNode=F,al=v,Hi=zu(F.firstChild),wu=!1,Y=!0):Y=!1),Y||yc(v)),yr(v),Y=v.type,se=v.pendingProps,Fe=p!==null?p.memoizedProps:null,F=se.children,B0(Y,se)?F=null:Fe!==null&&B0(Y,Fe)&&(v.flags|=32),v.memoizedState!==null&&(Y=xi(p,v,$i,null,null,x),Jy._currentValue=Y),gl(p,v),yl(p,v,F,x),v.child;case 6:return p===null&&_i&&((p=x=Hi)&&(x=gP(x,v.pendingProps,wu),x!==null?(v.stateNode=x,al=v,Hi=null,p=!0):p=!1),p||yc(v)),null;case 13:return Iy(p,v,x);case 4:return la(v,v.stateNode.containerInfo),F=v.pendingProps,p===null?v.child=Bc(v,null,F,x):yl(p,v,F,x),v.child;case 11:return Yg(p,v,v.type,v.pendingProps,x);case 7:return yl(p,v,v.pendingProps,x),v.child;case 8:return yl(p,v,v.pendingProps.children,x),v.child;case 12:return yl(p,v,v.pendingProps.children,x),v.child;case 10:return F=v.pendingProps,Jc(v,v.type,F.value),yl(p,v,F.children,x),v.child;case 9:return Y=v.type._context,F=v.pendingProps.children,wc(v),Y=Ks(Y),F=F(Y),v.flags|=1,yl(p,v,F,x),v.child;case 14:return Xg(p,v,v.type,v.pendingProps,x);case 15:return Jg(p,v,v.type,v.pendingProps,x);case 19:return Bd(p,v,x);case 22:return Wp(p,v,x);case 24:return wc(v),F=Ks(to),p===null?(Y=Qt(),Y===null&&(Y=Ur,se=kh(),Y.pooledCache=se,se.refCount++,se!==null&&(Y.pooledCacheLanes|=x),Y=se),v.memoizedState={parent:F,cache:Y},_h(v),Jc(v,to,Y)):((p.lanes&x)!==0&&(nA(p,v),Qp(v,null,null,x),vh()),Y=p.memoizedState,se=v.memoizedState,Y.parent!==F?(Y={parent:F,cache:F},v.memoizedState=Y,v.lanes===0&&(v.memoizedState=v.updateQueue.baseState=Y),Jc(v,to,F)):(F=se.cache,Jc(v,to,F),F!==Y.cache&&qm(v,[to],x,!0))),yl(p,v,v.pendingProps.children,x),v.child;case 29:throw v.pendingProps}throw Error(r(156,v.tag))}var ip=it(null),Rf=null,Ah=null;function Jc(p,v,x){_e(ip,v._currentValue),v._currentValue=x}function Gd(p){p._currentValue=ip.current,ct(ip)}function rA(p,v,x){for(;p!==null;){var F=p.alternate;if((p.childLanes&v)!==v?(p.childLanes|=v,F!==null&&(F.childLanes|=v)):F!==null&&(F.childLanes&v)!==v&&(F.childLanes|=v),p===x)break;p=p.return}}function qm(p,v,x,F){var Y=p.child;for(Y!==null&&(Y.return=p);Y!==null;){var se=Y.dependencies;if(se!==null){var Fe=Y.child;se=se.firstContext;e:for(;se!==null;){var dt=se;se=Y;for(var Ft=0;Ft<v.length;Ft++)if(dt.context===v[Ft]){se.lanes|=x,dt=se.alternate,dt!==null&&(dt.lanes|=x),rA(se.return,x,p),F||(Fe=null);break e}se=dt.next}}else if(Y.tag===18){if(Fe=Y.return,Fe===null)throw Error(r(341));Fe.lanes|=x,se=Fe.alternate,se!==null&&(se.lanes|=x),rA(Fe,x,p),Fe=null}else Fe=Y.child;if(Fe!==null)Fe.return=Y;else for(Fe=Y;Fe!==null;){if(Fe===p){Fe=null;break}if(Y=Fe.sibling,Y!==null){Y.return=Fe.return,Fe=Y;break}Fe=Fe.return}Y=Fe}}function sp(p,v,x,F){p=null;for(var Y=v,se=!1;Y!==null;){if(!se){if((Y.flags&524288)!==0)se=!0;else if((Y.flags&262144)!==0)break}if(Y.tag===10){var Fe=Y.alternate;if(Fe===null)throw Error(r(387));if(Fe=Fe.memoizedProps,Fe!==null){var dt=Y.type;Os(Y.pendingProps.value,Fe.value)||(p!==null?p.push(dt):p=[dt])}}else if(Y===Bt.current){if(Fe=Y.alternate,Fe===null)throw Error(r(387));Fe.memoizedState.memoizedState!==Y.memoizedState.memoizedState&&(p!==null?p.push(Jy):p=[Jy])}Y=Y.return}p!==null&&qm(v,p,x,F),v.flags|=262144}function Tf(p){for(p=p.firstContext;p!==null;){if(!Os(p.context._currentValue,p.memoizedValue))return!0;p=p.next}return!1}function wc(p){Rf=p,Ah=null,p=p.dependencies,p!==null&&(p.firstContext=null)}function Ks(p){return Zh(Rf,p)}function $u(p,v){return Rf===null&&wc(p),Zh(p,v)}function Zh(p,v){var x=v._currentValue;if(v={context:v,memoizedValue:x,next:null},Ah===null){if(p===null)throw Error(r(308));Ah=v,p.dependencies={lanes:0,firstContext:v},p.flags|=524288}else Ah=Ah.next=v;return x}var Ku=!1;function _h(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nA(p,v){p=p.updateQueue,v.updateQueue===p&&(v.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,callbacks:null})}function Sf(p){return{lane:p,tag:0,payload:null,callback:null,next:null}}function Cf(p,v,x){var F=p.updateQueue;if(F===null)return null;if(F=F.shared,(xr&2)!==0){var Y=F.pending;return Y===null?v.next=v:(v.next=Y.next,Y.next=v),F.pending=v,v=tn(p),Jl(p,null,x),v}return Xl(p,F,v,x),tn(p)}function bf(p,v,x){if(v=v.updateQueue,v!==null&&(v=v.shared,(x&4194176)!==0)){var F=v.lanes;F&=p.pendingLanes,x|=F,v.lanes=x,yt(p,x)}}function Ly(p,v){var x=p.updateQueue,F=p.alternate;if(F!==null&&(F=F.updateQueue,x===F)){var Y=null,se=null;if(x=x.firstBaseUpdate,x!==null){do{var Fe={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};se===null?Y=se=Fe:se=se.next=Fe,x=x.next}while(x!==null);se===null?Y=se=v:se=se.next=v}else Y=se=v;x={baseState:F.baseState,firstBaseUpdate:Y,lastBaseUpdate:se,shared:F.shared,callbacks:F.callbacks},p.updateQueue=x;return}p=x.lastBaseUpdate,p===null?x.firstBaseUpdate=v:p.next=v,x.lastBaseUpdate=v}var Al=!1;function vh(){if(Al){var p=Ge;if(p!==null)throw p}}function Qp(p,v,x,F){Al=!1;var Y=p.updateQueue;Ku=!1;var se=Y.firstBaseUpdate,Fe=Y.lastBaseUpdate,dt=Y.shared.pending;if(dt!==null){Y.shared.pending=null;var Ft=dt,oa=Ft.next;Ft.next=null,Fe===null?se=oa:Fe.next=oa,Fe=Ft;var ja=p.alternate;ja!==null&&(ja=ja.updateQueue,dt=ja.lastBaseUpdate,dt!==Fe&&(dt===null?ja.firstBaseUpdate=oa:dt.next=oa,ja.lastBaseUpdate=Ft))}if(se!==null){var nr=Y.baseState;Fe=0,ja=oa=Ft=null,dt=se;do{var ba=dt.lane&-536870913,Za=ba!==dt.lane;if(Za?(dr&ba)===ba:(F&ba)===ba){ba!==0&&ba===Ne&&(Al=!0),ja!==null&&(ja=ja.next={lane:0,tag:dt.tag,payload:dt.payload,callback:null,next:null});e:{var Yr=p,Qn=dt;ba=v;var Ho=x;switch(Qn.tag){case 1:if(Yr=Qn.payload,typeof Yr=="function"){nr=Yr.call(Ho,nr,ba);break e}nr=Yr;break e;case 3:Yr.flags=Yr.flags&-65537|128;case 0:if(Yr=Qn.payload,ba=typeof Yr=="function"?Yr.call(Ho,nr,ba):Yr,ba==null)break e;nr=De({},nr,ba);break e;case 2:Ku=!0}}ba=dt.callback,ba!==null&&(p.flags|=64,Za&&(p.flags|=8192),Za=Y.callbacks,Za===null?Y.callbacks=[ba]:Za.push(ba))}else Za={lane:ba,tag:dt.tag,payload:dt.payload,callback:dt.callback,next:null},ja===null?(oa=ja=Za,Ft=nr):ja=ja.next=Za,Fe|=ba;if(dt=dt.next,dt===null){if(dt=Y.shared.pending,dt===null)break;Za=dt,dt=Za.next,Za.next=null,Y.lastBaseUpdate=Za,Y.shared.pending=null}}while(!0);ja===null&&(Ft=nr),Y.baseState=Ft,Y.firstBaseUpdate=oa,Y.lastBaseUpdate=ja,se===null&&(Y.shared.lanes=0),Wi|=Fe,p.lanes=Fe,p.memoizedState=nr}}function iA(p,v){if(typeof p!="function")throw Error(r(191,p));p.call(v)}function op(p,v){var x=p.callbacks;if(x!==null)for(p.callbacks=null,p=0;p<x.length;p++)iA(x[p],v)}function xf(p,v){try{var x=v.updateQueue,F=x!==null?x.lastEffect:null;if(F!==null){var Y=F.next;x=Y;do{if((x.tag&p)===p){F=void 0;var se=x.create,Fe=x.inst;F=se(),Fe.destroy=F}x=x.next}while(x!==Y)}}catch(dt){Ms(v,v.return,dt)}}function Go(p,v,x){try{var F=v.updateQueue,Y=F!==null?F.lastEffect:null;if(Y!==null){var se=Y.next;F=se;do{if((F.tag&p)===p){var Fe=F.inst,dt=Fe.destroy;if(dt!==void 0){Fe.destroy=void 0,Y=v;var Ft=x;try{dt()}catch(oa){Ms(Y,Ft,oa)}}}F=F.next}while(F!==se)}}catch(oa){Ms(v,v.return,oa)}}function Wu(p){var v=p.updateQueue;if(v!==null){var x=p.stateNode;try{op(v,x)}catch(F){Ms(p,p.return,F)}}}function lp(p,v,x){x.props=Eu(p.type,p.memoizedProps),x.state=p.memoizedState;try{x.componentWillUnmount()}catch(F){Ms(p,v,F)}}function Rc(p,v){try{var x=p.ref;if(x!==null){var F=p.stateNode;switch(p.tag){case 26:case 27:case 5:var Y=F;break;default:Y=F}typeof x=="function"?p.refCleanup=x(Y):x.current=Y}}catch(se){Ms(p,v,se)}}function ll(p,v){var x=p.ref,F=p.refCleanup;if(x!==null)if(typeof F=="function")try{F()}catch(Y){Ms(p,v,Y)}finally{p.refCleanup=null,p=p.alternate,p!=null&&(p.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(Y){Ms(p,v,Y)}else x.current=null}function Fy(p){var v=p.type,x=p.memoizedProps,F=p.stateNode;try{e:switch(v){case"button":case"input":case"select":case"textarea":x.autoFocus&&F.focus();break e;case"img":x.src?F.src=x.src:x.srcSet&&(F.srcset=x.srcSet)}}catch(Y){Ms(p,p.return,Y)}}function Ln(p,v,x){try{var F=p.stateNode;fP(F,p.type,x,v),F[qt]=v}catch(Y){Ms(p,p.return,Y)}}function qh(p){return p.tag===5||p.tag===3||p.tag===26||p.tag===27||p.tag===4}function sA(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||qh(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==27&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function oA(p,v,x){var F=p.tag;if(F===5||F===6)p=p.stateNode,v?x.nodeType===8?x.parentNode.insertBefore(p,v):x.insertBefore(p,v):(x.nodeType===8?(v=x.parentNode,v.insertBefore(p,x)):(v=x,v.appendChild(p)),x=x._reactRootContainer,x!=null||v.onclick!==null||(v.onclick=$y));else if(F!==4&&F!==27&&(p=p.child,p!==null))for(oA(p,v,x),p=p.sibling;p!==null;)oA(p,v,x),p=p.sibling}function up(p,v,x){var F=p.tag;if(F===5||F===6)p=p.stateNode,v?x.insertBefore(p,v):x.appendChild(p);else if(F!==4&&F!==27&&(p=p.child,p!==null))for(up(p,v,x),p=p.sibling;p!==null;)up(p,v,x),p=p.sibling}var _l=!1,Pi=!1,jo=!1,Nu=typeof WeakSet=="function"?WeakSet:Set,Ri=null,Uy=!1;function Vu(p,v){if(p=p.containerInfo,Zd=lm,p=xl(p),Ro(p)){if("selectionStart"in p)var x={start:p.selectionStart,end:p.selectionEnd};else e:{x=(x=p.ownerDocument)&&x.defaultView||window;var F=x.getSelection&&x.getSelection();if(F&&F.rangeCount!==0){x=F.anchorNode;var Y=F.anchorOffset,se=F.focusNode;F=F.focusOffset;try{x.nodeType,se.nodeType}catch{x=null;break e}var Fe=0,dt=-1,Ft=-1,oa=0,ja=0,nr=p,ba=null;t:for(;;){for(var Za;nr!==x||Y!==0&&nr.nodeType!==3||(dt=Fe+Y),nr!==se||F!==0&&nr.nodeType!==3||(Ft=Fe+F),nr.nodeType===3&&(Fe+=nr.nodeValue.length),(Za=nr.firstChild)!==null;)ba=nr,nr=Za;for(;;){if(nr===p)break t;if(ba===x&&++oa===Y&&(dt=Fe),ba===se&&++ja===F&&(Ft=Fe),(Za=nr.nextSibling)!==null)break;nr=ba,ba=nr.parentNode}nr=Za}x=dt===-1||Ft===-1?null:{start:dt,end:Ft}}else x=null}x=x||{start:0,end:0}}else x=null;for(mA={focusedElem:p,selectionRange:x},lm=!1,Ri=v;Ri!==null;)if(v=Ri,p=v.child,(v.subtreeFlags&1028)!==0&&p!==null)p.return=v,Ri=p;else for(;Ri!==null;){switch(v=Ri,se=v.alternate,p=v.flags,v.tag){case 0:break;case 11:case 15:break;case 1:if((p&1024)!==0&&se!==null){p=void 0,x=v,Y=se.memoizedProps,se=se.memoizedState,F=x.stateNode;try{var Yr=Eu(x.type,Y,x.elementType===x.type);p=F.getSnapshotBeforeUpdate(Yr,se),F.__reactInternalSnapshotBeforeUpdate=p}catch(Qn){Ms(x,x.return,Qn)}}break;case 3:if((p&1024)!==0){if(p=v.stateNode.containerInfo,x=p.nodeType,x===9)y1(p);else if(x===1)switch(p.nodeName){case"HEAD":case"HTML":case"BODY":y1(p);break;default:p.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((p&1024)!==0)throw Error(r(163))}if(p=v.sibling,p!==null){p.return=v.return,Ri=p;break}Ri=v.return}return Yr=Uy,Uy=!1,Yr}function lA(p,v,x){var F=x.flags;switch(x.tag){case 0:case 11:case 15:te(p,x),F&4&&xf(5,x);break;case 1:if(te(p,x),F&4)if(p=x.stateNode,v===null)try{p.componentDidMount()}catch(dt){Ms(x,x.return,dt)}else{var Y=Eu(x.type,v.memoizedProps);v=v.memoizedState;try{p.componentDidUpdate(Y,v,p.__reactInternalSnapshotBeforeUpdate)}catch(dt){Ms(x,x.return,dt)}}F&64&&Wu(x),F&512&&Rc(x,x.return);break;case 3:if(te(p,x),F&64&&(F=x.updateQueue,F!==null)){if(p=null,x.child!==null)switch(x.child.tag){case 27:case 5:p=x.child.stateNode;break;case 1:p=x.child.stateNode}try{op(F,p)}catch(dt){Ms(x,x.return,dt)}}break;case 26:te(p,x),F&512&&Rc(x,x.return);break;case 27:case 5:te(p,x),v===null&&F&4&&Fy(x),F&512&&Rc(x,x.return);break;case 12:te(p,x);break;case 13:te(p,x),F&4&&A(p,x);break;case 22:if(Y=x.memoizedState!==null||_l,!Y){v=v!==null&&v.memoizedState!==null||Pi;var se=_l,Fe=Pi;_l=Y,(Pi=v)&&!Fe?ce(p,x,(x.subtreeFlags&8772)!==0):te(p,x),_l=se,Pi=Fe}F&512&&(x.memoizedProps.mode==="manual"?Rc(x,x.return):ll(x,x.return));break;default:te(p,x)}}function Hh(p){var v=p.alternate;v!==null&&(p.alternate=null,Hh(v)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(v=p.stateNode,v!==null&&Gr(v)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}var Zo=null,g=!1;function o(p,v,x){for(x=x.child;x!==null;)c(p,v,x),x=x.sibling}function c(p,v,x){if(Zn&&typeof Zn.onCommitFiberUnmount=="function")try{Zn.onCommitFiberUnmount(gr,x)}catch{}switch(x.tag){case 26:Pi||ll(x,v),o(p,v,x),x.memoizedState?x.memoizedState.count--:x.stateNode&&(x=x.stateNode,x.parentNode.removeChild(x));break;case 27:Pi||ll(x,v);var F=Zo,Y=g;for(Zo=x.stateNode,o(p,v,x),x=x.stateNode,v=x.attributes;v.length;)x.removeAttributeNode(v[0]);Gr(x),Zo=F,g=Y;break;case 5:Pi||ll(x,v);case 6:Y=Zo;var se=g;if(Zo=null,o(p,v,x),Zo=Y,g=se,Zo!==null)if(g)try{p=Zo,F=x.stateNode,p.nodeType===8?p.parentNode.removeChild(F):p.removeChild(F)}catch(Fe){Ms(x,v,Fe)}else try{Zo.removeChild(x.stateNode)}catch(Fe){Ms(x,v,Fe)}break;case 18:Zo!==null&&(g?(v=Zo,x=x.stateNode,v.nodeType===8?m1(v.parentNode,x):v.nodeType===1&&m1(v,x),SA(v)):m1(Zo,x.stateNode));break;case 4:F=Zo,Y=g,Zo=x.stateNode.containerInfo,g=!0,o(p,v,x),Zo=F,g=Y;break;case 0:case 11:case 14:case 15:Pi||Go(2,x,v),Pi||Go(4,x,v),o(p,v,x);break;case 1:Pi||(ll(x,v),F=x.stateNode,typeof F.componentWillUnmount=="function"&&lp(x,v,F)),o(p,v,x);break;case 21:o(p,v,x);break;case 22:Pi||ll(x,v),Pi=(F=Pi)||x.memoizedState!==null,o(p,v,x),Pi=F;break;default:o(p,v,x)}}function A(p,v){if(v.memoizedState===null&&(p=v.alternate,p!==null&&(p=p.memoizedState,p!==null&&(p=p.dehydrated,p!==null))))try{SA(p)}catch(x){Ms(v,v.return,x)}}function R(p){switch(p.tag){case 13:case 19:var v=p.stateNode;return v===null&&(v=p.stateNode=new Nu),v;case 22:return p=p.stateNode,v=p._retryCache,v===null&&(v=p._retryCache=new Nu),v;default:throw Error(r(435,p.tag))}}function C(p,v){var x=R(p);v.forEach(function(F){var Y=cP.bind(null,p,F);x.has(F)||(x.add(F),F.then(Y,Y))})}function P(p,v){var x=v.deletions;if(x!==null)for(var F=0;F<x.length;F++){var Y=x[F],se=p,Fe=v,dt=Fe;e:for(;dt!==null;){switch(dt.tag){case 27:case 5:Zo=dt.stateNode,g=!1;break e;case 3:Zo=dt.stateNode.containerInfo,g=!0;break e;case 4:Zo=dt.stateNode.containerInfo,g=!0;break e}dt=dt.return}if(Zo===null)throw Error(r(160));c(se,Fe,Y),Zo=null,g=!1,se=Y.alternate,se!==null&&(se.return=null),Y.return=null}if(v.subtreeFlags&13878)for(v=v.child;v!==null;)j(v,p),v=v.sibling}var L=null;function j(p,v){var x=p.alternate,F=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:P(v,p),H(p),F&4&&(Go(3,p,p.return),xf(3,p),Go(5,p,p.return));break;case 1:P(v,p),H(p),F&512&&(Pi||x===null||ll(x,x.return)),F&64&&_l&&(p=p.updateQueue,p!==null&&(F=p.callbacks,F!==null&&(x=p.shared.hiddenCallbacks,p.shared.hiddenCallbacks=x===null?F:x.concat(F))));break;case 26:var Y=L;if(P(v,p),H(p),F&512&&(Pi||x===null||ll(x,x.return)),F&4){var se=x!==null?x.memoizedState:null;if(F=p.memoizedState,x===null)if(F===null)if(p.stateNode===null){e:{F=p.type,x=p.memoizedProps,Y=Y.ownerDocument||Y;t:switch(F){case"title":se=Y.getElementsByTagName("title")[0],(!se||se[Vr]||se[$t]||se.namespaceURI==="http://www.w3.org/2000/svg"||se.hasAttribute("itemprop"))&&(se=Y.createElement(F),Y.head.insertBefore(se,Y.querySelector("head > title"))),Co(se,F,x),se[$t]=p,Hr(se),F=se;break e;case"link":var Fe=w1("link","href",Y).get(F+(x.href||""));if(Fe){for(var dt=0;dt<Fe.length;dt++)if(se=Fe[dt],se.getAttribute("href")===(x.href==null?null:x.href)&&se.getAttribute("rel")===(x.rel==null?null:x.rel)&&se.getAttribute("title")===(x.title==null?null:x.title)&&se.getAttribute("crossorigin")===(x.crossOrigin==null?null:x.crossOrigin)){Fe.splice(dt,1);break t}}se=Y.createElement(F),Co(se,F,x),Y.head.appendChild(se);break;case"meta":if(Fe=w1("meta","content",Y).get(F+(x.content||""))){for(dt=0;dt<Fe.length;dt++)if(se=Fe[dt],se.getAttribute("content")===(x.content==null?null:""+x.content)&&se.getAttribute("name")===(x.name==null?null:x.name)&&se.getAttribute("property")===(x.property==null?null:x.property)&&se.getAttribute("http-equiv")===(x.httpEquiv==null?null:x.httpEquiv)&&se.getAttribute("charset")===(x.charSet==null?null:x.charSet)){Fe.splice(dt,1);break t}}se=Y.createElement(F),Co(se,F,x),Y.head.appendChild(se);break;default:throw Error(r(468,F))}se[$t]=p,Hr(se),F=se}p.stateNode=F}else R1(Y,p.type,p.stateNode);else p.stateNode=hp(Y,F,p.memoizedProps);else se!==F?(se===null?x.stateNode!==null&&(x=x.stateNode,x.parentNode.removeChild(x)):se.count--,F===null?R1(Y,p.type,p.stateNode):hp(Y,F,p.memoizedProps)):F===null&&p.stateNode!==null&&Ln(p,p.memoizedProps,x.memoizedProps)}break;case 27:if(F&4&&p.alternate===null){Y=p.stateNode,se=p.memoizedProps;try{for(var Ft=Y.firstChild;Ft;){var oa=Ft.nextSibling,ja=Ft.nodeName;Ft[Vr]||ja==="HEAD"||ja==="BODY"||ja==="SCRIPT"||ja==="STYLE"||ja==="LINK"&&Ft.rel.toLowerCase()==="stylesheet"||Y.removeChild(Ft),Ft=oa}for(var nr=p.type,ba=Y.attributes;ba.length;)Y.removeAttributeNode(ba[0]);Co(Y,nr,se),Y[$t]=p,Y[qt]=se}catch(Yr){Ms(p,p.return,Yr)}}case 5:if(P(v,p),H(p),F&512&&(Pi||x===null||ll(x,x.return)),p.flags&32){Y=p.stateNode;try{Fu(Y,"")}catch(Yr){Ms(p,p.return,Yr)}}F&4&&p.stateNode!=null&&(Y=p.memoizedProps,Ln(p,Y,x!==null?x.memoizedProps:Y)),F&1024&&(jo=!0);break;case 6:if(P(v,p),H(p),F&4){if(p.stateNode===null)throw Error(r(162));F=p.memoizedProps,x=p.stateNode;try{x.nodeValue=F}catch(Yr){Ms(p,p.return,Yr)}}break;case 3:if(om=null,Y=L,L=Ym(v.containerInfo),P(v,p),L=Y,H(p),F&4&&x!==null&&x.memoizedState.isDehydrated)try{SA(v.containerInfo)}catch(Yr){Ms(p,p.return,Yr)}jo&&(jo=!1,W(p));break;case 4:F=L,L=Ym(p.stateNode.containerInfo),P(v,p),H(p),L=F;break;case 12:P(v,p),H(p);break;case 13:P(v,p),H(p),p.child.flags&8192&&p.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(oi=ka()),F&4&&(F=p.updateQueue,F!==null&&(p.updateQueue=null,C(p,F)));break;case 22:if(F&512&&(Pi||x===null||ll(x,x.return)),Ft=p.memoizedState!==null,oa=x!==null&&x.memoizedState!==null,ja=_l,nr=Pi,_l=ja||Ft,Pi=nr||oa,P(v,p),Pi=nr,_l=ja,H(p),v=p.stateNode,v._current=p,v._visibility&=-3,v._visibility|=v._pendingVisibility&2,F&8192&&(v._visibility=Ft?v._visibility&-2:v._visibility|1,Ft&&(v=_l||Pi,x===null||oa||v||ae(p)),p.memoizedProps===null||p.memoizedProps.mode!=="manual"))e:for(x=null,v=p;;){if(v.tag===5||v.tag===26||v.tag===27){if(x===null){oa=x=v;try{if(Y=oa.stateNode,Ft)se=Y.style,typeof se.setProperty=="function"?se.setProperty("display","none","important"):se.display="none";else{Fe=oa.stateNode,dt=oa.memoizedProps.style;var Za=dt!=null&&dt.hasOwnProperty("display")?dt.display:null;Fe.style.display=Za==null||typeof Za=="boolean"?"":(""+Za).trim()}}catch(Yr){Ms(oa,oa.return,Yr)}}}else if(v.tag===6){if(x===null){oa=v;try{oa.stateNode.nodeValue=Ft?"":oa.memoizedProps}catch(Yr){Ms(oa,oa.return,Yr)}}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===p)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===p)break e;for(;v.sibling===null;){if(v.return===null||v.return===p)break e;x===v&&(x=null),v=v.return}x===v&&(x=null),v.sibling.return=v.return,v=v.sibling}F&4&&(F=p.updateQueue,F!==null&&(x=F.retryQueue,x!==null&&(F.retryQueue=null,C(p,x))));break;case 19:P(v,p),H(p),F&4&&(F=p.updateQueue,F!==null&&(p.updateQueue=null,C(p,F)));break;case 21:break;default:P(v,p),H(p)}}function H(p){var v=p.flags;if(v&2){try{if(p.tag!==27){e:{for(var x=p.return;x!==null;){if(qh(x)){var F=x;break e}x=x.return}throw Error(r(160))}switch(F.tag){case 27:var Y=F.stateNode,se=sA(p);up(p,se,Y);break;case 5:var Fe=F.stateNode;F.flags&32&&(Fu(Fe,""),F.flags&=-33);var dt=sA(p);up(p,dt,Fe);break;case 3:case 4:var Ft=F.stateNode.containerInfo,oa=sA(p);oA(p,oa,Ft);break;default:throw Error(r(161))}}}catch(ja){Ms(p,p.return,ja)}p.flags&=-3}v&4096&&(p.flags&=-4097)}function W(p){if(p.subtreeFlags&1024)for(p=p.child;p!==null;){var v=p;W(v),v.tag===5&&v.flags&1024&&v.stateNode.reset(),p=p.sibling}}function te(p,v){if(v.subtreeFlags&8772)for(v=v.child;v!==null;)lA(p,v.alternate,v),v=v.sibling}function ae(p){for(p=p.child;p!==null;){var v=p;switch(v.tag){case 0:case 11:case 14:case 15:Go(4,v,v.return),ae(v);break;case 1:ll(v,v.return);var x=v.stateNode;typeof x.componentWillUnmount=="function"&&lp(v,v.return,x),ae(v);break;case 26:case 27:case 5:ll(v,v.return),ae(v);break;case 22:ll(v,v.return),v.memoizedState===null&&ae(v);break;default:ae(v)}p=p.sibling}}function ce(p,v,x){for(x=x&&(v.subtreeFlags&8772)!==0,v=v.child;v!==null;){var F=v.alternate,Y=p,se=v,Fe=se.flags;switch(se.tag){case 0:case 11:case 15:ce(Y,se,x),xf(4,se);break;case 1:if(ce(Y,se,x),F=se,Y=F.stateNode,typeof Y.componentDidMount=="function")try{Y.componentDidMount()}catch(oa){Ms(F,F.return,oa)}if(F=se,Y=F.updateQueue,Y!==null){var dt=F.stateNode;try{var Ft=Y.shared.hiddenCallbacks;if(Ft!==null)for(Y.shared.hiddenCallbacks=null,Y=0;Y<Ft.length;Y++)iA(Ft[Y],dt)}catch(oa){Ms(F,F.return,oa)}}x&&Fe&64&&Wu(se),Rc(se,se.return);break;case 26:case 27:case 5:ce(Y,se,x),x&&F===null&&Fe&4&&Fy(se),Rc(se,se.return);break;case 12:ce(Y,se,x);break;case 13:ce(Y,se,x),x&&Fe&4&&A(Y,se);break;case 22:se.memoizedState===null&&ce(Y,se,x),Rc(se,se.return);break;default:ce(Y,se,x)}v=v.sibling}}function Te(p,v){var x=null;p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(x=p.memoizedState.cachePool.pool),p=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(p=v.memoizedState.cachePool.pool),p!==x&&(p!=null&&p.refCount++,x!=null&&G(x))}function ve(p,v){p=null,v.alternate!==null&&(p=v.alternate.memoizedState.cache),v=v.memoizedState.cache,v!==p&&(v.refCount++,p!=null&&G(p))}function Ee(p,v,x,F){if(v.subtreeFlags&10256)for(v=v.child;v!==null;)Ve(p,v,x,F),v=v.sibling}function Ve(p,v,x,F){var Y=v.flags;switch(v.tag){case 0:case 11:case 15:Ee(p,v,x,F),Y&2048&&xf(9,v);break;case 3:Ee(p,v,x,F),Y&2048&&(p=null,v.alternate!==null&&(p=v.alternate.memoizedState.cache),v=v.memoizedState.cache,v!==p&&(v.refCount++,p!=null&&G(p)));break;case 12:if(Y&2048){Ee(p,v,x,F),p=v.stateNode;try{var se=v.memoizedProps,Fe=se.id,dt=se.onPostCommit;typeof dt=="function"&&dt(Fe,v.alternate===null?"mount":"update",p.passiveEffectDuration,-0)}catch(Ft){Ms(v,v.return,Ft)}}else Ee(p,v,x,F);break;case 23:break;case 22:se=v.stateNode,v.memoizedState!==null?se._visibility&4?Ee(p,v,x,F):et(p,v):se._visibility&4?Ee(p,v,x,F):(se._visibility|=4,Be(p,v,x,F,(v.subtreeFlags&10256)!==0)),Y&2048&&Te(v.alternate,v);break;case 24:Ee(p,v,x,F),Y&2048&&ve(v.alternate,v);break;default:Ee(p,v,x,F)}}function Be(p,v,x,F,Y){for(Y=Y&&(v.subtreeFlags&10256)!==0,v=v.child;v!==null;){var se=p,Fe=v,dt=x,Ft=F,oa=Fe.flags;switch(Fe.tag){case 0:case 11:case 15:Be(se,Fe,dt,Ft,Y),xf(8,Fe);break;case 23:break;case 22:var ja=Fe.stateNode;Fe.memoizedState!==null?ja._visibility&4?Be(se,Fe,dt,Ft,Y):et(se,Fe):(ja._visibility|=4,Be(se,Fe,dt,Ft,Y)),Y&&oa&2048&&Te(Fe.alternate,Fe);break;case 24:Be(se,Fe,dt,Ft,Y),Y&&oa&2048&&ve(Fe.alternate,Fe);break;default:Be(se,Fe,dt,Ft,Y)}v=v.sibling}}function et(p,v){if(v.subtreeFlags&10256)for(v=v.child;v!==null;){var x=p,F=v,Y=F.flags;switch(F.tag){case 22:et(x,F),Y&2048&&Te(F.alternate,F);break;case 24:et(x,F),Y&2048&&ve(F.alternate,F);break;default:et(x,F)}v=v.sibling}}var Xe=8192;function ht(p){if(p.subtreeFlags&Xe)for(p=p.child;p!==null;)st(p),p=p.sibling}function st(p){switch(p.tag){case 26:ht(p),p.flags&Xe&&p.memoizedState!==null&&iS(L,p.memoizedState,p.memoizedProps);break;case 5:ht(p);break;case 3:case 4:var v=L;L=Ym(p.stateNode.containerInfo),ht(p),L=v;break;case 22:p.memoizedState===null&&(v=p.alternate,v!==null&&v.memoizedState!==null?(v=Xe,Xe=16777216,ht(p),Xe=v):ht(p));break;default:ht(p)}}function ot(p){var v=p.alternate;if(v!==null&&(p=v.child,p!==null)){v.child=null;do v=p.sibling,p.sibling=null,p=v;while(p!==null)}}function lt(p){var v=p.deletions;if((p.flags&16)!==0){if(v!==null)for(var x=0;x<v.length;x++){var F=v[x];Ri=F,Yt(F,p)}ot(p)}if(p.subtreeFlags&10256)for(p=p.child;p!==null;)gt(p),p=p.sibling}function gt(p){switch(p.tag){case 0:case 11:case 15:lt(p),p.flags&2048&&Go(9,p,p.return);break;case 3:lt(p);break;case 12:lt(p);break;case 22:var v=p.stateNode;p.memoizedState!==null&&v._visibility&4&&(p.return===null||p.return.tag!==13)?(v._visibility&=-5,Tt(p)):lt(p);break;default:lt(p)}}function Tt(p){var v=p.deletions;if((p.flags&16)!==0){if(v!==null)for(var x=0;x<v.length;x++){var F=v[x];Ri=F,Yt(F,p)}ot(p)}for(p=p.child;p!==null;){switch(v=p,v.tag){case 0:case 11:case 15:Go(8,v,v.return),Tt(v);break;case 22:x=v.stateNode,x._visibility&4&&(x._visibility&=-5,Tt(v));break;default:Tt(v)}p=p.sibling}}function Yt(p,v){for(;Ri!==null;){var x=Ri;switch(x.tag){case 0:case 11:case 15:Go(8,x,v);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var F=x.memoizedState.cachePool.pool;F!=null&&F.refCount++}break;case 24:G(x.memoizedState.cache)}if(F=x.child,F!==null)F.return=x,Ri=F;else e:for(x=p;Ri!==null;){F=Ri;var Y=F.sibling,se=F.return;if(Hh(F),F===x){Ri=null;break e}if(Y!==null){Y.return=se,Ri=Y;break e}Ri=se}}}function Lt(p,v,x,F){this.tag=p,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=v,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=F,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function aa(p,v,x,F){return new Lt(p,v,x,F)}function ua(p){return p=p.prototype,!(!p||!p.isReactComponent)}function Sa(p,v){var x=p.alternate;return x===null?(x=aa(p.tag,v,p.key,p.mode),x.elementType=p.elementType,x.type=p.type,x.stateNode=p.stateNode,x.alternate=p,p.alternate=x):(x.pendingProps=v,x.type=p.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=p.flags&31457280,x.childLanes=p.childLanes,x.lanes=p.lanes,x.child=p.child,x.memoizedProps=p.memoizedProps,x.memoizedState=p.memoizedState,x.updateQueue=p.updateQueue,v=p.dependencies,x.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext},x.sibling=p.sibling,x.index=p.index,x.ref=p.ref,x.refCleanup=p.refCleanup,x}function It(p,v){p.flags&=31457282;var x=p.alternate;return x===null?(p.childLanes=0,p.lanes=v,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=x.childLanes,p.lanes=x.lanes,p.child=x.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=x.memoizedProps,p.memoizedState=x.memoizedState,p.updateQueue=x.updateQueue,p.type=x.type,v=x.dependencies,p.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext}),p}function ia(p,v,x,F,Y,se){var Fe=0;if(F=p,typeof p=="function")ua(p)&&(Fe=1);else if(typeof p=="string")Fe=nS(p,x,Jt.current)?26:p==="html"||p==="head"||p==="body"?27:5;else e:switch(p){case w:return zt(x.children,Y,se,v);case T:Fe=8,Y|=24;break;case E:return p=aa(12,x,v,Y|2),p.elementType=E,p.lanes=se,p;case q:return p=aa(13,x,v,Y),p.elementType=q,p.lanes=se,p;case $:return p=aa(19,x,v,Y),p.elementType=$,p.lanes=se,p;case de:return sa(x,Y,se,v);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case z:case U:Fe=10;break e;case k:Fe=9;break e;case Z:Fe=11;break e;case J:Fe=14;break e;case ie:Fe=16,F=null;break e}Fe=29,x=Error(r(130,p===null?"null":typeof p,"")),F=null}return v=aa(Fe,x,v,Y),v.elementType=p,v.type=F,v.lanes=se,v}function zt(p,v,x,F){return p=aa(7,p,F,v),p.lanes=x,p}function sa(p,v,x,F){p=aa(22,p,F,v),p.elementType=de,p.lanes=x;var Y={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var se=Y._current;if(se===null)throw Error(r(456));if((Y._pendingVisibility&2)===0){var Fe=el(se,2);Fe!==null&&(Y._pendingVisibility|=2,Il(Fe,se,2))}},attach:function(){var se=Y._current;if(se===null)throw Error(r(456));if((Y._pendingVisibility&2)!==0){var Fe=el(se,2);Fe!==null&&(Y._pendingVisibility&=-3,Il(Fe,se,2))}}};return p.stateNode=Y,p}function ea(p,v,x){return p=aa(6,p,null,v),p.lanes=x,p}function da(p,v,x){return v=aa(4,p.children!==null?p.children:[],p.key,v),v.lanes=x,v.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},v}function Kt(p){p.flags|=4}function pa(p,v){if(v.type!=="stylesheet"||(v.state.loading&4)!==0)p.flags&=-16777217;else if(p.flags|=16777216,!T1(v)){if(v=Nl.current,v!==null&&((dr&4194176)===dr?Zu!==null:(dr&62914560)!==dr&&(dr&536870912)===0||v!==Zu))throw Ru=lh,Lm;p.flags|=8192}}function Ia(p,v){v!==null&&(p.flags|=4),p.flags&16384&&(v=p.tag!==22?Xt():536870912,p.lanes|=v,mo|=v)}function La(p,v){if(!_i)switch(p.tailMode){case"hidden":v=p.tail;for(var x=null;v!==null;)v.alternate!==null&&(x=v),v=v.sibling;x===null?p.tail=null:x.sibling=null;break;case"collapsed":x=p.tail;for(var F=null;x!==null;)x.alternate!==null&&(F=x),x=x.sibling;F===null?v||p.tail===null?p.tail=null:p.tail.sibling=null:F.sibling=null}}function Ea(p){var v=p.alternate!==null&&p.alternate.child===p.child,x=0,F=0;if(v)for(var Y=p.child;Y!==null;)x|=Y.lanes|Y.childLanes,F|=Y.subtreeFlags&31457280,F|=Y.flags&31457280,Y.return=p,Y=Y.sibling;else for(Y=p.child;Y!==null;)x|=Y.lanes|Y.childLanes,F|=Y.subtreeFlags,F|=Y.flags,Y.return=p,Y=Y.sibling;return p.subtreeFlags|=F,p.childLanes=x,v}function sr(p,v,x){var F=v.pendingProps;switch(Mh(v),v.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ea(v),null;case 1:return Ea(v),null;case 3:return x=v.stateNode,F=null,p!==null&&(F=p.memoizedState.cache),v.memoizedState.cache!==F&&(v.flags|=2048),Gd(to),Rt(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(p===null||p.child===null)&&(Ih(v)?Kt(v):p===null||p.memoizedState.isDehydrated&&(v.flags&256)===0||(v.flags|=1024,Ql!==null&&(em(Ql),Ql=null))),Ea(v),null;case 26:return x=v.memoizedState,p===null?(Kt(v),x!==null?(Ea(v),pa(v,x)):(Ea(v),v.flags&=-16777217)):x?x!==p.memoizedState?(Kt(v),Ea(v),pa(v,x)):(Ea(v),v.flags&=-16777217):(p.memoizedProps!==F&&Kt(v),Ea(v),v.flags&=-16777217),null;case 27:za(v),x=Pa.current;var Y=v.type;if(p!==null&&v.stateNode!=null)p.memoizedProps!==F&&Kt(v);else{if(!F){if(v.stateNode===null)throw Error(r(166));return Ea(v),null}p=Jt.current,Ih(v)?yf(v):(p=yA(Y,F,x),v.stateNode=p,Kt(v))}return Ea(v),null;case 5:if(za(v),x=v.type,p!==null&&v.stateNode!=null)p.memoizedProps!==F&&Kt(v);else{if(!F){if(v.stateNode===null)throw Error(r(166));return Ea(v),null}if(p=Jt.current,Ih(v))yf(v);else{switch(Y=Ky(Pa.current),p){case 1:p=Y.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:p=Y.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":p=Y.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":p=Y.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":p=Y.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof F.is=="string"?Y.createElement("select",{is:F.is}):Y.createElement("select"),F.multiple?p.multiple=!0:F.size&&(p.size=F.size);break;default:p=typeof F.is=="string"?Y.createElement(x,{is:F.is}):Y.createElement(x)}}p[$t]=v,p[qt]=F;e:for(Y=v.child;Y!==null;){if(Y.tag===5||Y.tag===6)p.appendChild(Y.stateNode);else if(Y.tag!==4&&Y.tag!==27&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===v)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===v)break e;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}v.stateNode=p;e:switch(Co(p,x,F),x){case"button":case"input":case"select":case"textarea":p=!!F.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&Kt(v)}}return Ea(v),v.flags&=-16777217,null;case 6:if(p&&v.stateNode!=null)p.memoizedProps!==F&&Kt(v);else{if(typeof F!="string"&&v.stateNode===null)throw Error(r(166));if(p=Pa.current,Ih(v)){if(p=v.stateNode,x=v.memoizedProps,F=null,Y=al,Y!==null)switch(Y.tag){case 27:case 5:F=Y.memoizedProps}p[$t]=v,p=!!(p.nodeValue===x||F!==null&&F.suppressHydrationWarning===!0||Nf(p.nodeValue,x)),p||yc(v)}else p=Ky(p).createTextNode(F),p[$t]=v,v.stateNode=p}return Ea(v),null;case 13:if(F=v.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(Y=Ih(v),F!==null&&F.dehydrated!==null){if(p===null){if(!Y)throw Error(r(318));if(Y=v.memoizedState,Y=Y!==null?Y.dehydrated:null,!Y)throw Error(r(317));Y[$t]=v}else Lh(),(v.flags&128)===0&&(v.memoizedState=null),v.flags|=4;Ea(v),Y=!1}else Ql!==null&&(em(Ql),Ql=null),Y=!0;if(!Y)return v.flags&256?(Zc(v),v):(Zc(v),null)}if(Zc(v),(v.flags&128)!==0)return v.lanes=x,v;if(x=F!==null,p=p!==null&&p.memoizedState!==null,x){F=v.child,Y=null,F.alternate!==null&&F.alternate.memoizedState!==null&&F.alternate.memoizedState.cachePool!==null&&(Y=F.alternate.memoizedState.cachePool.pool);var se=null;F.memoizedState!==null&&F.memoizedState.cachePool!==null&&(se=F.memoizedState.cachePool.pool),se!==Y&&(F.flags|=2048)}return x!==p&&x&&(v.child.flags|=8192),Ia(v,v.updateQueue),Ea(v),null;case 4:return Rt(),p===null&&F0(v.stateNode.containerInfo),Ea(v),null;case 10:return Gd(v.type),Ea(v),null;case 19:if(ct(Ds),Y=v.memoizedState,Y===null)return Ea(v),null;if(F=(v.flags&128)!==0,se=Y.rendering,se===null)if(F)La(Y,!1);else{if(Vn!==0||p!==null&&(p.flags&128)!==0)for(p=v.child;p!==null;){if(se=Zp(p),se!==null){for(v.flags|=128,La(Y,!1),p=se.updateQueue,v.updateQueue=p,Ia(v,p),v.subtreeFlags=0,p=x,x=v.child;x!==null;)It(x,p),x=x.sibling;return _e(Ds,Ds.current&1|2),v.child}p=p.sibling}Y.tail!==null&&ka()>yo&&(v.flags|=128,F=!0,La(Y,!1),v.lanes=4194304)}else{if(!F)if(p=Zp(se),p!==null){if(v.flags|=128,F=!0,p=p.updateQueue,v.updateQueue=p,Ia(v,p),La(Y,!0),Y.tail===null&&Y.tailMode==="hidden"&&!se.alternate&&!_i)return Ea(v),null}else 2*ka()-Y.renderingStartTime>yo&&x!==536870912&&(v.flags|=128,F=!0,La(Y,!1),v.lanes=4194304);Y.isBackwards?(se.sibling=v.child,v.child=se):(p=Y.last,p!==null?p.sibling=se:v.child=se,Y.last=se)}return Y.tail!==null?(v=Y.tail,Y.rendering=v,Y.tail=v.sibling,Y.renderingStartTime=ka(),v.sibling=null,p=Ds.current,_e(Ds,F?p&1|2:p&1),v):(Ea(v),null);case 22:case 23:return Zc(v),Gc(),F=v.memoizedState!==null,p!==null?p.memoizedState!==null!==F&&(v.flags|=8192):F&&(v.flags|=8192),F?(x&536870912)!==0&&(v.flags&128)===0&&(Ea(v),v.subtreeFlags&6&&(v.flags|=8192)):Ea(v),x=v.updateQueue,x!==null&&Ia(v,x.retryQueue),x=null,p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(x=p.memoizedState.cachePool.pool),F=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(F=v.memoizedState.cachePool.pool),F!==x&&(v.flags|=2048),p!==null&&ct(Ct),null;case 24:return x=null,p!==null&&(x=p.memoizedState.cache),v.memoizedState.cache!==x&&(v.flags|=2048),Gd(to),Ea(v),null;case 25:return null}throw Error(r(156,v.tag))}function Fr(p,v){switch(Mh(v),v.tag){case 1:return p=v.flags,p&65536?(v.flags=p&-65537|128,v):null;case 3:return Gd(to),Rt(),p=v.flags,(p&65536)!==0&&(p&128)===0?(v.flags=p&-65537|128,v):null;case 26:case 27:case 5:return za(v),null;case 13:if(Zc(v),p=v.memoizedState,p!==null&&p.dehydrated!==null){if(v.alternate===null)throw Error(r(340));Lh()}return p=v.flags,p&65536?(v.flags=p&-65537|128,v):null;case 19:return ct(Ds),null;case 4:return Rt(),null;case 10:return Gd(v.type),null;case 22:case 23:return Zc(v),Gc(),p!==null&&ct(Ct),p=v.flags,p&65536?(v.flags=p&-65537|128,v):null;case 24:return Gd(to),null;case 25:return null;default:return null}}function pr(p,v){switch(Mh(v),v.tag){case 3:Gd(to),Rt();break;case 26:case 27:case 5:za(v);break;case 4:Rt();break;case 13:Zc(v);break;case 19:ct(Ds);break;case 10:Gd(v.type);break;case 22:case 23:Zc(v),Gc(),p!==null&&ct(Ct);break;case 24:Gd(to)}}var Or={getCacheForType:function(p){var v=Ks(to),x=v.data.get(p);return x===void 0&&(x=p(),v.data.set(p,x)),x}},Cr=typeof WeakMap=="function"?WeakMap:Map,xr=0,Ur=null,Ir=null,dr=0,nn=0,Tr=null,tr=!1,sn=!1,Hn=!1,cn=0,Vn=0,Wi=0,hs=0,ro=0,Ws=0,mo=0,Cn=null,ii=null,On=!1,oi=0,yo=1/0,Ti=null,os=null,Tc=!1,qo=null,au=0,Ml=0,Yu=null,vl=0,jd=null;function go(){if((xr&2)!==0&&dr!==0)return dr&-dr;if(be.T!==null){var p=Ne;return p!==0?p:dA()}return kt()}function wh(){Ws===0&&(Ws=(dr&536870912)===0||_i?Us():536870912);var p=Nl.current;return p!==null&&(p.flags|=32),Ws}function Il(p,v,x){(p===Ur&&nn===2||p.cancelPendingCommit!==null)&&(Hm(p,0),dp(p,dr,Ws,!1)),Oe(p,x),((xr&2)===0||p!==Ur)&&(p===Ur&&((xr&2)===0&&(hs|=x),Vn===4&&dp(p,dr,Ws,!1)),$h(p))}function cp(p,v,x){if((xr&6)!==0)throw Error(r(327));var F=!x&&(v&60)===0&&(v&p.expiredLanes)===0||ui(p,v),Y=F?tm(p,v):z0(p,v,!0),se=F;do{if(Y===0){sn&&!F&&dp(p,v,0,!1);break}else if(Y===6)dp(p,v,0,!tr);else{if(x=p.current.alternate,se&&!FT(x)){Y=z0(p,v,!1),se=!1;continue}if(Y===2){if(se=v,p.errorRecoveryDisabledLanes&se)var Fe=0;else Fe=p.pendingLanes&-536870913,Fe=Fe!==0?Fe:Fe&536870912?536870912:0;if(Fe!==0){v=Fe;e:{var dt=p;Y=Cn;var Ft=dt.current.memoizedState.isDehydrated;if(Ft&&(Hm(dt,Fe).flags|=256),Fe=z0(dt,Fe,!1),Fe!==2){if(Hn&&!Ft){dt.errorRecoveryDisabledLanes|=se,hs|=se,Y=4;break e}se=ii,ii=Y,se!==null&&em(se)}Y=Fe}if(se=!1,Y!==2)continue}}if(Y===1){Hm(p,0),dp(p,v,0,!0);break}e:{switch(F=p,Y){case 0:case 1:throw Error(r(345));case 4:if((v&4194176)===v){dp(F,v,Ws,!tr);break e}break;case 2:ii=null;break;case 3:case 5:break;default:throw Error(r(329))}if(F.finishedWork=x,F.finishedLanes=v,(v&62914560)===v&&(se=oi+300-ka(),10<se)){if(dp(F,v,Ws,!tr),fn(F,0)!==0)break e;F.timeoutHandle=Kh(ky.bind(null,F,x,ii,Ti,On,v,Ws,hs,mo,tr,2,-0,0),se);break e}ky(F,x,ii,Ti,On,v,Ws,hs,mo,tr,0,-0,0)}}break}while(!0);$h(p)}function em(p){ii===null?ii=p:ii.push.apply(ii,p)}function ky(p,v,x,F,Y,se,Fe,dt,Ft,oa,ja,nr,ba){var Za=v.subtreeFlags;if((Za&8192||(Za&16785408)===16785408)&&(AA={stylesheets:null,count:0,unsuspend:vP},st(v),v=q0(),v!==null)){p.cancelPendingCommit=v(kT.bind(null,p,x,F,Y,Fe,dt,Ft,1,nr,ba)),dp(p,se,Fe,!oa);return}kT(p,x,F,Y,Fe,dt,Ft,ja,nr,ba)}function FT(p){for(var v=p;;){var x=v.tag;if((x===0||x===11||x===15)&&v.flags&16384&&(x=v.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var F=0;F<x.length;F++){var Y=x[F],se=Y.getSnapshot;Y=Y.value;try{if(!Os(se(),Y))return!1}catch{return!1}}if(x=v.child,v.subtreeFlags&16384&&x!==null)x.return=v,v=x;else{if(v===p)break;for(;v.sibling===null;){if(v.return===null||v.return===p)return!0;v=v.return}v.sibling.return=v.return,v=v.sibling}}return!0}function dp(p,v,x,F){v&=~ro,v&=~hs,p.suspendedLanes|=v,p.pingedLanes&=~v,F&&(p.warmLanes|=v),F=p.expirationTimes;for(var Y=v;0<Y;){var se=31-en(Y),Fe=1<<se;F[se]=-1,Y&=~Fe}x!==0&&_t(p,x,v)}function E0(){return(xr&6)===0?(rm(0),!1):!0}function N0(){if(Ir!==null){if(nn===0)var p=Ir.return;else p=Ir,Ah=Rf=null,ds(p),Fh=null,ml=0,p=Ir;for(;p!==null;)pr(p.alternate,p),p=p.return;Ir=null}}function Hm(p,v){p.finishedWork=null,p.finishedLanes=0;var x=p.timeoutHandle;x!==-1&&(p.timeoutHandle=-1,WT(x)),x=p.cancelPendingCommit,x!==null&&(p.cancelPendingCommit=null,x()),N0(),Ur=p,Ir=x=Sa(p.current,null),dr=v,nn=0,Tr=null,tr=!1,sn=ui(p,v),Hn=!1,mo=Ws=ro=hs=Wi=Vn=0,ii=Cn=null,On=!1,(v&8)!==0&&(v|=v&32);var F=p.entangledLanes;if(F!==0)for(p=p.entanglements,F&=v;0<F;){var Y=31-en(F),se=1<<Y;v|=p[Y],F&=~se}return cn=v,is(),x}function t1(p,v){wa=null,be.H=Pu,v===gf?(v=zy(),nn=3):v===Lm?(v=zy(),nn=4):nn=v===Kp?8:v!==null&&typeof v=="object"&&typeof v.then=="function"?6:1,Tr=v,Ir===null&&(Vn=1,kd(p,ts(v,p.current)))}function a1(){var p=be.H;return be.H=Pu,p===null?Pu:p}function r1(){var p=be.A;return be.A=Or,p}function V0(){Vn=4,tr||(dr&4194176)!==dr&&Nl.current!==null||(sn=!0),(Wi&134217727)===0&&(hs&134217727)===0||Ur===null||dp(Ur,dr,Ws,!1)}function z0(p,v,x){var F=xr;xr|=2;var Y=a1(),se=r1();(Ur!==p||dr!==v)&&(Ti=null,Hm(p,v)),v=!1;var Fe=Vn;e:do try{if(nn!==0&&Ir!==null){var dt=Ir,Ft=Tr;switch(nn){case 8:N0(),Fe=6;break e;case 3:case 2:case 6:Nl.current===null&&(v=!0);var oa=nn;if(nn=0,Tr=null,Gy(p,dt,Ft,oa),x&&sn){Fe=0;break e}break;default:oa=nn,nn=0,Tr=null,Gy(p,dt,Ft,oa)}}n1(),Fe=Vn;break}catch(ja){t1(p,ja)}while(!0);return v&&p.shellSuspendCounter++,Ah=Rf=null,xr=F,be.H=Y,be.A=se,Ir===null&&(Ur=null,dr=0,is()),Fe}function n1(){for(;Ir!==null;)i1(Ir)}function tm(p,v){var x=xr;xr|=2;var F=a1(),Y=r1();Ur!==p||dr!==v?(Ti=null,yo=ka()+500,Hm(p,v)):sn=ui(p,v);e:do try{if(nn!==0&&Ir!==null){v=Ir;var se=Tr;t:switch(nn){case 1:nn=0,Tr=null,Gy(p,v,se,1);break;case 2:if(Vy(se)){nn=0,Tr=null,By(v);break}v=function(){nn===2&&Ur===p&&(nn=7),$h(p)},se.then(v,v);break e;case 3:nn=7;break e;case 4:nn=5;break e;case 7:Vy(se)?(nn=0,Tr=null,By(v)):(nn=0,Tr=null,Gy(p,v,se,7));break;case 5:var Fe=null;switch(Ir.tag){case 26:Fe=Ir.memoizedState;case 5:case 27:var dt=Ir;if(!Fe||T1(Fe)){nn=0,Tr=null;var Ft=dt.sibling;if(Ft!==null)Ir=Ft;else{var oa=dt.return;oa!==null?(Ir=oa,O0(oa)):Ir=null}break t}}nn=0,Tr=null,Gy(p,v,se,5);break;case 6:nn=0,Tr=null,Gy(p,v,se,6);break;case 8:N0(),Vn=6;break e;default:throw Error(r(462))}}wl();break}catch(ja){t1(p,ja)}while(!0);return Ah=Rf=null,be.H=F,be.A=Y,xr=x,Ir!==null?0:(Ur=null,dr=0,is(),Vn)}function wl(){for(;Ir!==null&&!ur();)i1(Ir)}function i1(p){var v=np(p.alternate,p,cn);p.memoizedProps=p.pendingProps,v===null?O0(p):Ir=v}function By(p){var v=p,x=v.alternate;switch(v.tag){case 15:case 0:v=Qg(x,v,v.pendingProps,v.type,void 0,dr);break;case 11:v=Qg(x,v,v.pendingProps,v.type.render,v.ref,dr);break;case 5:ds(v);default:pr(x,v),v=Ir=It(v,cn),v=np(x,v,cn)}p.memoizedProps=p.pendingProps,v===null?O0(p):Ir=v}function Gy(p,v,x,F){Ah=Rf=null,ds(v),Fh=null,ml=0;var Y=v.return;try{if(Wg(p,Y,v,x,dr)){Vn=1,kd(p,ts(x,p.current)),Ir=null;return}}catch(se){if(Y!==null)throw Ir=Y,se;Vn=1,kd(p,ts(x,p.current)),Ir=null;return}v.flags&32768?(_i||F===1?p=!0:sn||(dr&536870912)!==0?p=!1:(tr=p=!0,(F===2||F===3||F===6)&&(F=Nl.current,F!==null&&F.tag===13&&(F.flags|=16384))),UT(v,p)):O0(v)}function O0(p){var v=p;do{if((v.flags&32768)!==0){UT(v,tr);return}p=v.return;var x=sr(v.alternate,v,cn);if(x!==null){Ir=x;return}if(v=v.sibling,v!==null){Ir=v;return}Ir=v=p}while(v!==null);Vn===0&&(Vn=5)}function UT(p,v){do{var x=Fr(p.alternate,p);if(x!==null){x.flags&=32767,Ir=x;return}if(x=p.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!v&&(p=p.sibling,p!==null)){Ir=p;return}Ir=p=x}while(p!==null);Vn=6,Ir=null}function kT(p,v,x,F,Y,se,Fe,dt,Ft,oa){var ja=be.T,nr=$e.p;try{$e.p=2,be.T=null,uA(p,v,x,F,nr,Y,se,Fe,dt,Ft,oa)}finally{be.T=ja,$e.p=nr}}function uA(p,v,x,F,Y,se,Fe,dt){do Rh();while(qo!==null);if((xr&6)!==0)throw Error(r(327));var Ft=p.finishedWork;if(F=p.finishedLanes,Ft===null)return null;if(p.finishedWork=null,p.finishedLanes=0,Ft===p.current)throw Error(r(177));p.callbackNode=null,p.callbackPriority=0,p.cancelPendingCommit=null;var oa=Ft.lanes|Ft.childLanes;if(oa|=qi,rt(p,F,oa,se,Fe,dt),p===Ur&&(Ir=Ur=null,dr=0),(Ft.subtreeFlags&10256)===0&&(Ft.flags&10256)===0||Tc||(Tc=!0,Ml=oa,Yu=x,dP(Rn,function(){return Rh(),null})),x=(Ft.flags&15990)!==0,(Ft.subtreeFlags&15990)!==0||x?(x=be.T,be.T=null,se=$e.p,$e.p=2,Fe=xr,xr|=4,Vu(p,Ft),j(Ft,p),xd(mA,p.containerInfo),lm=!!Zd,mA=Zd=null,p.current=Ft,lA(p,Ft.alternate,Ft),Pr(),xr=Fe,$e.p=se,be.T=x):p.current=Ft,Tc?(Tc=!1,qo=p,au=F):s1(p,oa),oa=p.pendingLanes,oa===0&&(os=null),Mn(Ft.stateNode),$h(p),v!==null)for(Y=p.onRecoverableError,Ft=0;Ft<v.length;Ft++)oa=v[Ft],Y(oa.value,{componentStack:oa.stack});return(au&3)!==0&&Rh(),oa=p.pendingLanes,(F&4194218)!==0&&(oa&42)!==0?p===jd?vl++:(vl=0,jd=p):vl=0,rm(0),null}function s1(p,v){(p.pooledCacheLanes&=v)===0&&(v=p.pooledCache,v!=null&&(p.pooledCache=null,G(v)))}function Rh(){if(qo!==null){var p=qo,v=Ml;Ml=0;var x=bt(au),F=be.T,Y=$e.p;try{if($e.p=32>x?32:x,be.T=null,qo===null)var se=!1;else{x=Yu,Yu=null;var Fe=qo,dt=au;if(qo=null,au=0,(xr&6)!==0)throw Error(r(331));var Ft=xr;if(xr|=4,gt(Fe.current),Ve(Fe,Fe.current,dt,x),xr=Ft,rm(0,!1),Zn&&typeof Zn.onPostCommitFiberRoot=="function")try{Zn.onPostCommitFiberRoot(gr,Fe)}catch{}se=!0}return se}finally{$e.p=Y,be.T=F,s1(p,v)}}return!1}function jy(p,v,x){v=ts(x,v),v=$p(p.stateNode,v,2),p=Cf(p,v,2),p!==null&&(Oe(p,2),$h(p))}function Ms(p,v,x){if(p.tag===3)jy(p,p,x);else for(;v!==null;){if(v.tag===3){jy(v,p,x);break}else if(v.tag===1){var F=v.stateNode;if(typeof v.type.getDerivedStateFromError=="function"||typeof F.componentDidCatch=="function"&&(os===null||!os.has(F))){p=ts(x,p),x=jm(2),F=Cf(v,x,2),F!==null&&(Dy(x,F,v,p),Oe(F,2),$h(F));break}}v=v.return}}function o1(p,v,x){var F=p.pingCache;if(F===null){F=p.pingCache=new Cr;var Y=new Set;F.set(v,Y)}else Y=F.get(v),Y===void 0&&(Y=new Set,F.set(v,Y));Y.has(x)||(Hn=!0,Y.add(x),p=lP.bind(null,p,v,x),v.then(p,p))}function lP(p,v,x){var F=p.pingCache;F!==null&&F.delete(v),p.pingedLanes|=p.suspendedLanes&x,p.warmLanes&=~x,Ur===p&&(dr&x)===x&&(Vn===4||Vn===3&&(dr&62914560)===dr&&300>ka()-oi?(xr&2)===0&&Hm(p,0):ro|=x,mo===dr&&(mo=0)),$h(p)}function BT(p,v){v===0&&(v=Xt()),p=el(p,v),p!==null&&(Oe(p,v),$h(p))}function uP(p){var v=p.memoizedState,x=0;v!==null&&(x=v.retryLane),BT(p,x)}function cP(p,v){var x=0;switch(p.tag){case 13:var F=p.stateNode,Y=p.memoizedState;Y!==null&&(x=Y.retryLane);break;case 19:F=p.stateNode;break;case 22:F=p.stateNode._retryCache;break;default:throw Error(r(314))}F!==null&&F.delete(v),BT(p,x)}function dP(p,v){return er(p,v)}var Zy=null,qy=null,am=!1,D0=!1,no=!1,Pf=0;function $h(p){p!==qy&&p.next===null&&(qy===null?Zy=qy=p:qy=qy.next=p),D0=!0,am||(am=!0,cA(M0))}function rm(p,v){if(!no&&D0){no=!0;do for(var x=!1,F=Zy;F!==null;){if(p!==0){var Y=F.pendingLanes;if(Y===0)var se=0;else{var Fe=F.suspendedLanes,dt=F.pingedLanes;se=(1<<31-en(42|p)+1)-1,se&=Y&~(Fe&~dt),se=se&201326677?se&201326677|1:se?se|2:0}se!==0&&(x=!0,u1(F,se))}else se=dr,se=fn(F,F===Ur?se:0),(se&3)===0||ui(F,se)||(x=!0,u1(F,se));F=F.next}while(x);no=!1}}function M0(){D0=am=!1;var p=0;Pf!==0&&(p1()&&(p=Pf),Pf=0);for(var v=ka(),x=null,F=Zy;F!==null;){var Y=F.next,se=Hy(F,v);se===0?(F.next=null,x===null?Zy=Y:x.next=Y,Y===null&&(qy=x)):(x=F,(p!==0||(se&3)!==0)&&(D0=!0)),F=Y}rm(p)}function Hy(p,v){for(var x=p.suspendedLanes,F=p.pingedLanes,Y=p.expirationTimes,se=p.pendingLanes&-62914561;0<se;){var Fe=31-en(se),dt=1<<Fe,Ft=Y[Fe];Ft===-1?((dt&x)===0||(dt&F)!==0)&&(Y[Fe]=Ec(dt,v)):Ft<=v&&(p.expiredLanes|=dt),se&=~dt}if(v=Ur,x=dr,x=fn(p,p===v?x:0),F=p.callbackNode,x===0||p===v&&nn===2||p.cancelPendingCommit!==null)return F!==null&&F!==null&&cr(F),p.callbackNode=null,p.callbackPriority=0;if((x&3)===0||ui(p,x)){if(v=x&-x,v===p.callbackPriority)return v;switch(F!==null&&cr(F),bt(x)){case 2:case 8:x=Dn;break;case 32:x=Rn;break;case 268435456:x=Wa;break;default:x=Rn}return F=l1.bind(null,p),x=er(x,F),p.callbackPriority=v,p.callbackNode=x,v}return F!==null&&F!==null&&cr(F),p.callbackPriority=2,p.callbackNode=null,2}function l1(p,v){var x=p.callbackNode;if(Rh()&&p.callbackNode!==x)return null;var F=dr;return F=fn(p,p===Ur?F:0),F===0?null:(cp(p,F,v),Hy(p,ka()),p.callbackNode!=null&&p.callbackNode===x?l1.bind(null,p):null)}function u1(p,v){if(Rh())return null;cp(p,v,!0)}function cA(p){pP(function(){(xr&6)!==0?er(pn,p):p()})}function dA(){return Pf===0&&(Pf=Us()),Pf}function hA(p){return p==null||typeof p=="symbol"||typeof p=="boolean"?null:typeof p=="function"?p:bn(""+p)}function GT(p,v){var x=v.ownerDocument.createElement("input");return x.name=v.name,x.value=v.value,p.id&&x.setAttribute("form",p.id),v.parentNode.insertBefore(x,v),p=new FormData(p),x.parentNode.removeChild(x),p}function jT(p,v,x,F,Y){if(v==="submit"&&x&&x.stateNode===Y){var se=hA((Y[qt]||null).action),Fe=F.submitter;Fe&&(v=(v=Fe[qt]||null)?hA(v.formAction):Fe.getAttribute("formAction"),v!==null&&(se=v,Fe=null));var dt=new bi("action","action",null,F,Y);p.push({event:dt,listeners:[{instance:null,listener:function(){if(F.defaultPrevented){if(Pf!==0){var Ft=Fe?GT(Y,Fe):new FormData(Y);Kc(x,{pending:!0,data:Ft,method:Y.method,action:se},null,Ft)}}else typeof se=="function"&&(dt.preventDefault(),Ft=Fe?GT(Y,Fe):new FormData(Y),Kc(x,{pending:!0,data:Ft,method:Y.method,action:se},se,Ft))},currentTarget:Y}]})}}for(var fA=0;fA<Bo.length;fA++){var pA=Bo[fA],c1=pA.toLowerCase(),ZT=pA[0].toUpperCase()+pA.slice(1);cs(c1,"on"+ZT)}cs(Mc,"onAnimationEnd"),cs(hc,"onAnimationIteration"),cs(Au,"onAnimationStart"),cs("dblclick","onDoubleClick"),cs("focusin","onFocus"),cs("focusout","onBlur"),cs(Ic,"onTransitionRun"),cs(_u,"onTransitionStart"),cs(Lc,"onTransitionCancel"),cs(fc,"onTransitionEnd"),_s("onMouseEnter",["mouseout","mouseover"]),_s("onMouseLeave",["mouseout","mouseover"]),_s("onPointerEnter",["pointerout","pointerover"]),_s("onPointerLeave",["pointerout","pointerover"]),Gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $m="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($m));function I0(p,v){v=(v&4)!==0;for(var x=0;x<p.length;x++){var F=p[x],Y=F.event;F=F.listeners;e:{var se=void 0;if(v)for(var Fe=F.length-1;0<=Fe;Fe--){var dt=F[Fe],Ft=dt.instance,oa=dt.currentTarget;if(dt=dt.listener,Ft!==se&&Y.isPropagationStopped())break e;se=dt,Y.currentTarget=oa;try{se(Y)}catch(ja){yh(ja)}Y.currentTarget=null,se=Ft}else for(Fe=0;Fe<F.length;Fe++){if(dt=F[Fe],Ft=dt.instance,oa=dt.currentTarget,dt=dt.listener,Ft!==se&&Y.isPropagationStopped())break e;se=dt,Y.currentTarget=oa;try{se(Y)}catch(ja){yh(ja)}Y.currentTarget=null,se=Ft}}}}function Mi(p,v){var x=v[Ma];x===void 0&&(x=v[Ma]=new Set);var F=p+"__bubble";x.has(F)||(d1(v,p,2,!1),x.add(F))}function L0(p,v,x){var F=0;v&&(F|=4),d1(x,p,F,v)}var Km="_reactListening"+Math.random().toString(36).slice(2);function F0(p){if(!p[Km]){p[Km]=!0,In.forEach(function(x){x!=="selectionchange"&&(qT.has(x)||L0(x,!1,p),L0(x,!0,p))});var v=p.nodeType===9?p:p.ownerDocument;v===null||v[Km]||(v[Km]=!0,L0("selectionchange",!1,v))}}function d1(p,v,x,F){switch(cS(v)){case 2:var Y=lS;break;case 8:Y=uS;break;default:Y=E1}x=Y.bind(null,v,x,p),Y=void 0,!sc||v!=="touchstart"&&v!=="touchmove"&&v!=="wheel"||(Y=!0),F?Y!==void 0?p.addEventListener(v,x,{capture:!0,passive:Y}):p.addEventListener(v,x,!0):Y!==void 0?p.addEventListener(v,x,{passive:Y}):p.addEventListener(v,x,!1)}function U0(p,v,x,F,Y){var se=F;if((v&1)===0&&(v&2)===0&&F!==null)e:for(;;){if(F===null)return;var Fe=F.tag;if(Fe===3||Fe===4){var dt=F.stateNode.containerInfo;if(dt===Y||dt.nodeType===8&&dt.parentNode===Y)break;if(Fe===4)for(Fe=F.return;Fe!==null;){var Ft=Fe.tag;if((Ft===3||Ft===4)&&(Ft=Fe.stateNode.containerInfo,Ft===Y||Ft.nodeType===8&&Ft.parentNode===Y))return;Fe=Fe.return}for(;dt!==null;){if(Fe=zn(dt),Fe===null)return;if(Ft=Fe.tag,Ft===5||Ft===6||Ft===26||Ft===27){F=se=Fe;continue e}dt=dt.parentNode}}F=F.return}Bs(function(){var oa=se,ja=hr(x),nr=[];e:{var ba=Bu.get(p);if(ba!==void 0){var Za=bi,Yr=p;switch(p){case"keypress":if(un(x)===0)break e;case"keydown":case"keyup":Za=Sd;break;case"focusin":Yr="focus",Za=Qo;break;case"focusout":Yr="blur",Za=Qo;break;case"beforeblur":case"afterblur":Za=Qo;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Za=us;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Za=Ts;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Za=ff;break;case Mc:case hc:case Au:Za=js;break;case fc:Za=Ke;break;case"scroll":case"scrollend":Za=Rd;break;case"wheel":Za=Wt;break;case"copy":case"cut":case"paste":Za=ns;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Za=hf;break;case"toggle":case"beforetoggle":Za=Da}var Qn=(v&4)!==0,Ho=!Qn&&(p==="scroll"||p==="scrollend"),ya=Qn?ba!==null?ba+"Capture":null:ba;Qn=[];for(var na=oa,Ta;na!==null;){var Ja=na;if(Ta=Ja.stateNode,Ja=Ja.tag,Ja!==5&&Ja!==26&&Ja!==27||Ta===null||ya===null||(Ja=ic(na,ya),Ja!=null&&Qn.push(Th(na,Ja,Ta))),Ho)break;na=na.return}0<Qn.length&&(ba=new Za(ba,Yr,null,x,ja),nr.push({event:ba,listeners:Qn}))}}if((v&7)===0){e:{if(ba=p==="mouseover"||p==="pointerover",Za=p==="mouseout"||p==="pointerout",ba&&x!==lo&&(Yr=x.relatedTarget||x.fromElement)&&(zn(Yr)||Yr[Ra]))break e;if((Za||ba)&&(ba=ja.window===ja?ja:(ba=ja.ownerDocument)?ba.defaultView||ba.parentWindow:window,Za?(Yr=x.relatedTarget||x.toElement,Za=oa,Yr=Yr?zn(Yr):null,Yr!==null&&(Ho=ke(Yr),Qn=Yr.tag,Yr!==Ho||Qn!==5&&Qn!==27&&Qn!==6)&&(Yr=null)):(Za=null,Yr=oa),Za!==Yr)){if(Qn=us,Ja="onMouseLeave",ya="onMouseEnter",na="mouse",(p==="pointerout"||p==="pointerover")&&(Qn=hf,Ja="onPointerLeave",ya="onPointerEnter",na="pointer"),Ho=Za==null?ba:qr(Za),Ta=Yr==null?ba:qr(Yr),ba=new Qn(Ja,na+"leave",Za,x,ja),ba.target=Ho,ba.relatedTarget=Ta,Ja=null,zn(ja)===oa&&(Qn=new Qn(ya,na+"enter",Yr,x,ja),Qn.target=Ta,Qn.relatedTarget=Ho,Ja=Qn),Ho=Ja,Za&&Yr)t:{for(Qn=Za,ya=Yr,na=0,Ta=Qn;Ta;Ta=Wm(Ta))na++;for(Ta=0,Ja=ya;Ja;Ja=Wm(Ja))Ta++;for(;0<na-Ta;)Qn=Wm(Qn),na--;for(;0<Ta-na;)ya=Wm(ya),Ta--;for(;na--;){if(Qn===ya||ya!==null&&Qn===ya.alternate)break t;Qn=Wm(Qn),ya=Wm(ya)}Qn=null}else Qn=null;Za!==null&&HT(nr,ba,Za,Qn,!1),Yr!==null&&Ho!==null&&HT(nr,Ho,Yr,Qn,!0)}}e:{if(ba=oa?qr(oa):window,Za=ba.nodeName&&ba.nodeName.toLowerCase(),Za==="select"||Za==="input"&&ba.type==="file")var Kr=uc;else if(Rr(ba))if(Cd)Kr=zh;else{Kr=co;var yi=qs}else Za=ba.nodeName,!Za||Za.toLowerCase()!=="input"||ba.type!=="checkbox"&&ba.type!=="radio"?oa&&Uu(oa.elementType)&&(Kr=uc):Kr=pf;if(Kr&&(Kr=Kr(p,oa))){yu(nr,Kr,x,ja);break e}yi&&yi(p,ba,oa),p==="focusout"&&oa&&ba.type==="number"&&oa.memoizedProps.value!=null&&hu(ba,"number",ba.value)}switch(yi=oa?qr(oa):window,p){case"focusin":(Rr(yi)||yi.contentEditable==="true")&&(Pl=yi,dc=oa,gu=null);break;case"focusout":gu=dc=Pl=null;break;case"mousedown":Zi=!0;break;case"contextmenu":case"mouseup":case"dragend":Zi=!1,mf(nr,x,ja);break;case"selectionchange":if(Dc)break;case"keydown":case"keyup":mf(nr,x,ja)}var on;if(wr)e:{switch(p){case"compositionstart":var Pn="onCompositionStart";break e;case"compositionend":Pn="onCompositionEnd";break e;case"compositionupdate":Pn="onCompositionUpdate";break e}Pn=void 0}else es?Cs(p,x)&&(Pn="onCompositionEnd"):p==="keydown"&&x.keyCode===229&&(Pn="onCompositionStart");Pn&&(Nn&&x.locale!=="ko"&&(es||Pn!=="onCompositionStart"?Pn==="onCompositionEnd"&&es&&(on=wd()):(an=ja,An="value"in an?an.value:an.textContent,es=!0)),yi=Ef(oa,Pn),0<yi.length&&(Pn=new ko(Pn,p,null,x,ja),nr.push({event:Pn,listeners:yi}),on?Pn.data=on:(on=Js(x),on!==null&&(Pn.data=on)))),(on=Sn?br(p,x):ir(p,x))&&(Pn=Ef(oa,"onBeforeInput"),0<Pn.length&&(yi=new ko("onBeforeInput","beforeinput",null,x,ja),nr.push({event:yi,listeners:Pn}),yi.data=on)),jT(nr,p,oa,x,ja)}I0(nr,v)})}function Th(p,v,x){return{instance:p,listener:v,currentTarget:x}}function Ef(p,v){for(var x=v+"Capture",F=[];p!==null;){var Y=p,se=Y.stateNode;Y=Y.tag,Y!==5&&Y!==26&&Y!==27||se===null||(Y=ic(p,x),Y!=null&&F.unshift(Th(p,Y,se)),Y=ic(p,v),Y!=null&&F.push(Th(p,Y,se))),p=p.return}return F}function Wm(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5&&p.tag!==27);return p||null}function HT(p,v,x,F,Y){for(var se=v._reactName,Fe=[];x!==null&&x!==F;){var dt=x,Ft=dt.alternate,oa=dt.stateNode;if(dt=dt.tag,Ft!==null&&Ft===F)break;dt!==5&&dt!==26&&dt!==27||oa===null||(Ft=oa,Y?(oa=ic(x,se),oa!=null&&Fe.unshift(Th(x,oa,Ft))):Y||(oa=ic(x,se),oa!=null&&Fe.push(Th(x,oa,Ft)))),x=x.return}Fe.length!==0&&p.push({event:v,listeners:Fe})}var $T=/\r\n?/g,hP=/\u0000|\uFFFD/g;function KT(p){return(typeof p=="string"?p:""+p).replace($T,`
`).replace(hP,"")}function Nf(p,v){return v=KT(v),KT(p)===v}function $y(){}function Es(p,v,x,F,Y,se){switch(x){case"children":typeof F=="string"?v==="body"||v==="textarea"&&F===""||Fu(p,F):(typeof F=="number"||typeof F=="bigint")&&v!=="body"&&Fu(p,""+F);break;case"className":zi(p,"class",F);break;case"tabIndex":zi(p,"tabindex",F);break;case"dir":case"role":case"viewBox":case"width":case"height":zi(p,x,F);break;case"style":Fo(p,F,se);break;case"data":if(v!=="object"){zi(p,"data",F);break}case"src":case"href":if(F===""&&(v!=="a"||x!=="href")){p.removeAttribute(x);break}if(F==null||typeof F=="function"||typeof F=="symbol"||typeof F=="boolean"){p.removeAttribute(x);break}F=bn(""+F),p.setAttribute(x,F);break;case"action":case"formAction":if(typeof F=="function"){p.setAttribute(x,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof se=="function"&&(x==="formAction"?(v!=="input"&&Es(p,v,"name",Y.name,Y,null),Es(p,v,"formEncType",Y.formEncType,Y,null),Es(p,v,"formMethod",Y.formMethod,Y,null),Es(p,v,"formTarget",Y.formTarget,Y,null)):(Es(p,v,"encType",Y.encType,Y,null),Es(p,v,"method",Y.method,Y,null),Es(p,v,"target",Y.target,Y,null)));if(F==null||typeof F=="symbol"||typeof F=="boolean"){p.removeAttribute(x);break}F=bn(""+F),p.setAttribute(x,F);break;case"onClick":F!=null&&(p.onclick=$y);break;case"onScroll":F!=null&&Mi("scroll",p);break;case"onScrollEnd":F!=null&&Mi("scrollend",p);break;case"dangerouslySetInnerHTML":if(F!=null){if(typeof F!="object"||!("__html"in F))throw Error(r(61));if(x=F.__html,x!=null){if(Y.children!=null)throw Error(r(60));p.innerHTML=x}}break;case"multiple":p.multiple=F&&typeof F!="function"&&typeof F!="symbol";break;case"muted":p.muted=F&&typeof F!="function"&&typeof F!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(F==null||typeof F=="function"||typeof F=="boolean"||typeof F=="symbol"){p.removeAttribute("xlink:href");break}x=bn(""+F),p.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",x);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":F!=null&&typeof F!="function"&&typeof F!="symbol"?p.setAttribute(x,""+F):p.removeAttribute(x);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":F&&typeof F!="function"&&typeof F!="symbol"?p.setAttribute(x,""):p.removeAttribute(x);break;case"capture":case"download":F===!0?p.setAttribute(x,""):F!==!1&&F!=null&&typeof F!="function"&&typeof F!="symbol"?p.setAttribute(x,F):p.removeAttribute(x);break;case"cols":case"rows":case"size":case"span":F!=null&&typeof F!="function"&&typeof F!="symbol"&&!isNaN(F)&&1<=F?p.setAttribute(x,F):p.removeAttribute(x);break;case"rowSpan":case"start":F==null||typeof F=="function"||typeof F=="symbol"||isNaN(F)?p.removeAttribute(x):p.setAttribute(x,F);break;case"popover":Mi("beforetoggle",p),Mi("toggle",p),Yo(p,"popover",F);break;case"xlinkActuate":Gl(p,"http://www.w3.org/1999/xlink","xlink:actuate",F);break;case"xlinkArcrole":Gl(p,"http://www.w3.org/1999/xlink","xlink:arcrole",F);break;case"xlinkRole":Gl(p,"http://www.w3.org/1999/xlink","xlink:role",F);break;case"xlinkShow":Gl(p,"http://www.w3.org/1999/xlink","xlink:show",F);break;case"xlinkTitle":Gl(p,"http://www.w3.org/1999/xlink","xlink:title",F);break;case"xlinkType":Gl(p,"http://www.w3.org/1999/xlink","xlink:type",F);break;case"xmlBase":Gl(p,"http://www.w3.org/XML/1998/namespace","xml:base",F);break;case"xmlLang":Gl(p,"http://www.w3.org/XML/1998/namespace","xml:lang",F);break;case"xmlSpace":Gl(p,"http://www.w3.org/XML/1998/namespace","xml:space",F);break;case"is":Yo(p,"is",F);break;case"innerText":case"textContent":break;default:(!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(x=rh.get(x)||x,Yo(p,x,F))}}function k0(p,v,x,F,Y,se){switch(x){case"style":Fo(p,F,se);break;case"dangerouslySetInnerHTML":if(F!=null){if(typeof F!="object"||!("__html"in F))throw Error(r(61));if(x=F.__html,x!=null){if(Y.children!=null)throw Error(r(60));p.innerHTML=x}}break;case"children":typeof F=="string"?Fu(p,F):(typeof F=="number"||typeof F=="bigint")&&Fu(p,""+F);break;case"onScroll":F!=null&&Mi("scroll",p);break;case"onScrollEnd":F!=null&&Mi("scrollend",p);break;case"onClick":F!=null&&(p.onclick=$y);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vi.hasOwnProperty(x))e:{if(x[0]==="o"&&x[1]==="n"&&(Y=x.endsWith("Capture"),v=x.slice(2,Y?x.length-7:void 0),se=p[qt]||null,se=se!=null?se[x]:null,typeof se=="function"&&p.removeEventListener(v,se,Y),typeof F=="function")){typeof se!="function"&&se!==null&&(x in p?p[x]=null:p.hasAttribute(x)&&p.removeAttribute(x)),p.addEventListener(v,F,Y);break e}x in p?p[x]=F:F===!0?p.setAttribute(x,""):Yo(p,x,F)}}}function Co(p,v,x){switch(v){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mi("error",p),Mi("load",p);var F=!1,Y=!1,se;for(se in x)if(x.hasOwnProperty(se)){var Fe=x[se];if(Fe!=null)switch(se){case"src":F=!0;break;case"srcSet":Y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,v));default:Es(p,v,se,Fe,x,null)}}Y&&Es(p,v,"srcSet",x.srcSet,x,null),F&&Es(p,v,"src",x.src,x,null);return;case"input":Mi("invalid",p);var dt=se=Fe=Y=null,Ft=null,oa=null;for(F in x)if(x.hasOwnProperty(F)){var ja=x[F];if(ja!=null)switch(F){case"name":Y=ja;break;case"type":Fe=ja;break;case"checked":Ft=ja;break;case"defaultChecked":oa=ja;break;case"value":se=ja;break;case"defaultValue":dt=ja;break;case"children":case"dangerouslySetInnerHTML":if(ja!=null)throw Error(r(137,v));break;default:Es(p,v,F,ja,x,null)}}jl(p,se,dt,Ft,oa,Fe,Y,!1),ah(p);return;case"select":Mi("invalid",p),F=Fe=se=null;for(Y in x)if(x.hasOwnProperty(Y)&&(dt=x[Y],dt!=null))switch(Y){case"value":se=dt;break;case"defaultValue":Fe=dt;break;case"multiple":F=dt;default:Es(p,v,Y,dt,x,null)}v=se,x=Fe,p.multiple=!!F,v!=null?oo(p,!!F,v,!1):x!=null&&oo(p,!!F,x,!0);return;case"textarea":Mi("invalid",p),se=Y=F=null;for(Fe in x)if(x.hasOwnProperty(Fe)&&(dt=x[Fe],dt!=null))switch(Fe){case"value":F=dt;break;case"defaultValue":Y=dt;break;case"children":se=dt;break;case"dangerouslySetInnerHTML":if(dt!=null)throw Error(r(91));break;default:Es(p,v,Fe,dt,x,null)}vd(p,F,Y,se),ah(p);return;case"option":for(Ft in x)if(x.hasOwnProperty(Ft)&&(F=x[Ft],F!=null))switch(Ft){case"selected":p.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:Es(p,v,Ft,F,x,null)}return;case"dialog":Mi("cancel",p),Mi("close",p);break;case"iframe":case"object":Mi("load",p);break;case"video":case"audio":for(F=0;F<$m.length;F++)Mi($m[F],p);break;case"image":Mi("error",p),Mi("load",p);break;case"details":Mi("toggle",p);break;case"embed":case"source":case"link":Mi("error",p),Mi("load",p);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oa in x)if(x.hasOwnProperty(oa)&&(F=x[oa],F!=null))switch(oa){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,v));default:Es(p,v,oa,F,x,null)}return;default:if(Uu(v)){for(ja in x)x.hasOwnProperty(ja)&&(F=x[ja],F!==void 0&&k0(p,v,ja,F,x,void 0));return}}for(dt in x)x.hasOwnProperty(dt)&&(F=x[dt],F!=null&&Es(p,v,dt,F,x,null))}function fP(p,v,x,F){switch(v){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var Y=null,se=null,Fe=null,dt=null,Ft=null,oa=null,ja=null;for(Za in x){var nr=x[Za];if(x.hasOwnProperty(Za)&&nr!=null)switch(Za){case"checked":break;case"value":break;case"defaultValue":Ft=nr;default:F.hasOwnProperty(Za)||Es(p,v,Za,null,F,nr)}}for(var ba in F){var Za=F[ba];if(nr=x[ba],F.hasOwnProperty(ba)&&(Za!=null||nr!=null))switch(ba){case"type":se=Za;break;case"name":Y=Za;break;case"checked":oa=Za;break;case"defaultChecked":ja=Za;break;case"value":Fe=Za;break;case"defaultValue":dt=Za;break;case"children":case"dangerouslySetInnerHTML":if(Za!=null)throw Error(r(137,v));break;default:Za!==nr&&Es(p,v,ba,Za,F,nr)}}Io(p,Fe,dt,Ft,oa,ja,se,Y);return;case"select":Za=Fe=dt=ba=null;for(se in x)if(Ft=x[se],x.hasOwnProperty(se)&&Ft!=null)switch(se){case"value":break;case"multiple":Za=Ft;default:F.hasOwnProperty(se)||Es(p,v,se,null,F,Ft)}for(Y in F)if(se=F[Y],Ft=x[Y],F.hasOwnProperty(Y)&&(se!=null||Ft!=null))switch(Y){case"value":ba=se;break;case"defaultValue":dt=se;break;case"multiple":Fe=se;default:se!==Ft&&Es(p,v,Y,se,F,Ft)}v=dt,x=Fe,F=Za,ba!=null?oo(p,!!x,ba,!1):!!F!=!!x&&(v!=null?oo(p,!!x,v,!0):oo(p,!!x,x?[]:"",!1));return;case"textarea":Za=ba=null;for(dt in x)if(Y=x[dt],x.hasOwnProperty(dt)&&Y!=null&&!F.hasOwnProperty(dt))switch(dt){case"value":break;case"children":break;default:Es(p,v,dt,null,F,Y)}for(Fe in F)if(Y=F[Fe],se=x[Fe],F.hasOwnProperty(Fe)&&(Y!=null||se!=null))switch(Fe){case"value":ba=Y;break;case"defaultValue":Za=Y;break;case"children":break;case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(91));break;default:Y!==se&&Es(p,v,Fe,Y,F,se)}Lo(p,ba,Za);return;case"option":for(var Yr in x)if(ba=x[Yr],x.hasOwnProperty(Yr)&&ba!=null&&!F.hasOwnProperty(Yr))switch(Yr){case"selected":p.selected=!1;break;default:Es(p,v,Yr,null,F,ba)}for(Ft in F)if(ba=F[Ft],Za=x[Ft],F.hasOwnProperty(Ft)&&ba!==Za&&(ba!=null||Za!=null))switch(Ft){case"selected":p.selected=ba&&typeof ba!="function"&&typeof ba!="symbol";break;default:Es(p,v,Ft,ba,F,Za)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Qn in x)ba=x[Qn],x.hasOwnProperty(Qn)&&ba!=null&&!F.hasOwnProperty(Qn)&&Es(p,v,Qn,null,F,ba);for(oa in F)if(ba=F[oa],Za=x[oa],F.hasOwnProperty(oa)&&ba!==Za&&(ba!=null||Za!=null))switch(oa){case"children":case"dangerouslySetInnerHTML":if(ba!=null)throw Error(r(137,v));break;default:Es(p,v,oa,ba,F,Za)}return;default:if(Uu(v)){for(var Ho in x)ba=x[Ho],x.hasOwnProperty(Ho)&&ba!==void 0&&!F.hasOwnProperty(Ho)&&k0(p,v,Ho,void 0,F,ba);for(ja in F)ba=F[ja],Za=x[ja],!F.hasOwnProperty(ja)||ba===Za||ba===void 0&&Za===void 0||k0(p,v,ja,ba,F,Za);return}}for(var ya in x)ba=x[ya],x.hasOwnProperty(ya)&&ba!=null&&!F.hasOwnProperty(ya)&&Es(p,v,ya,null,F,ba);for(nr in F)ba=F[nr],Za=x[nr],!F.hasOwnProperty(nr)||ba===Za||ba==null&&Za==null||Es(p,v,nr,ba,F,Za)}var Zd=null,mA=null;function Ky(p){return p.nodeType===9?p:p.ownerDocument}function h1(p){switch(p){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function f1(p,v){if(p===0)switch(v){case"svg":return 1;case"math":return 2;default:return 0}return p===1&&v==="foreignObject"?0:p}function B0(p,v){return p==="textarea"||p==="noscript"||typeof v.children=="string"||typeof v.children=="number"||typeof v.children=="bigint"||typeof v.dangerouslySetInnerHTML=="object"&&v.dangerouslySetInnerHTML!==null&&v.dangerouslySetInnerHTML.__html!=null}var G0=null;function p1(){var p=window.event;return p&&p.type==="popstate"?p===G0?!1:(G0=p,!0):(G0=null,!1)}var Kh=typeof setTimeout=="function"?setTimeout:void 0,WT=typeof clearTimeout=="function"?clearTimeout:void 0,YT=typeof Promise=="function"?Promise:void 0,pP=typeof queueMicrotask=="function"?queueMicrotask:typeof YT<"u"?function(p){return YT.resolve(null).then(p).catch(mP)}:Kh;function mP(p){setTimeout(function(){throw p})}function m1(p,v){var x=v,F=0;do{var Y=x.nextSibling;if(p.removeChild(x),Y&&Y.nodeType===8)if(x=Y.data,x==="/$"){if(F===0){p.removeChild(Y),SA(v);return}F--}else x!=="$"&&x!=="$?"&&x!=="$!"||F++;x=Y}while(x);SA(v)}function y1(p){var v=p.firstChild;for(v&&v.nodeType===10&&(v=v.nextSibling);v;){var x=v;switch(v=v.nextSibling,x.nodeName){case"HTML":case"HEAD":case"BODY":y1(x),Gr(x);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(x.rel.toLowerCase()==="stylesheet")continue}p.removeChild(x)}}function yP(p,v,x,F){for(;p.nodeType===1;){var Y=x;if(p.nodeName.toLowerCase()!==v.toLowerCase()){if(!F&&(p.nodeName!=="INPUT"||p.type!=="hidden"))break}else if(F){if(!p[Vr])switch(v){case"meta":if(!p.hasAttribute("itemprop"))break;return p;case"link":if(se=p.getAttribute("rel"),se==="stylesheet"&&p.hasAttribute("data-precedence"))break;if(se!==Y.rel||p.getAttribute("href")!==(Y.href==null?null:Y.href)||p.getAttribute("crossorigin")!==(Y.crossOrigin==null?null:Y.crossOrigin)||p.getAttribute("title")!==(Y.title==null?null:Y.title))break;return p;case"style":if(p.hasAttribute("data-precedence"))break;return p;case"script":if(se=p.getAttribute("src"),(se!==(Y.src==null?null:Y.src)||p.getAttribute("type")!==(Y.type==null?null:Y.type)||p.getAttribute("crossorigin")!==(Y.crossOrigin==null?null:Y.crossOrigin))&&se&&p.hasAttribute("async")&&!p.hasAttribute("itemprop"))break;return p;default:return p}}else if(v==="input"&&p.type==="hidden"){var se=Y.name==null?null:""+Y.name;if(Y.type==="hidden"&&p.getAttribute("name")===se)return p}else return p;if(p=zu(p.nextSibling),p===null)break}return null}function gP(p,v,x){if(v==="")return null;for(;p.nodeType!==3;)if((p.nodeType!==1||p.nodeName!=="INPUT"||p.type!=="hidden")&&!x||(p=zu(p.nextSibling),p===null))return null;return p}function zu(p){for(;p!=null;p=p.nextSibling){var v=p.nodeType;if(v===1||v===3)break;if(v===8){if(v=p.data,v==="$"||v==="$!"||v==="$?"||v==="F!"||v==="F")break;if(v==="/$")return null}}return p}function g1(p){p=p.previousSibling;for(var v=0;p;){if(p.nodeType===8){var x=p.data;if(x==="$"||x==="$!"||x==="$?"){if(v===0)return p;v--}else x==="/$"&&v++}p=p.previousSibling}return null}function yA(p,v,x){switch(v=Ky(x),p){case"html":if(p=v.documentElement,!p)throw Error(r(452));return p;case"head":if(p=v.head,!p)throw Error(r(453));return p;case"body":if(p=v.body,!p)throw Error(r(454));return p;default:throw Error(r(451))}}var qd=new Map,A1=new Set;function Ym(p){return typeof p.getRootNode=="function"?p.getRootNode():p.ownerDocument}var Vf=$e.d;$e.d={f:j0,r:XT,D:JT,C:AP,L:QT,m:eS,X:aS,S:tS,M:_1};function j0(){var p=Vf.f(),v=E0();return p||v}function XT(p){var v=Jn(p);v!==null&&v.tag===5&&v.type==="form"?Gh(v):Vf.r(p)}var nm=typeof document>"u"?null:document;function Z0(p,v,x){var F=nm;if(F&&typeof v=="string"&&v){var Y=Xs(v);Y='link[rel="'+p+'"][href="'+Y+'"]',typeof x=="string"&&(Y+='[crossorigin="'+x+'"]'),A1.has(Y)||(A1.add(Y),p={rel:p,crossOrigin:x,href:v},F.querySelector(Y)===null&&(v=F.createElement("link"),Co(v,"link",p),Hr(v),F.head.appendChild(v)))}}function JT(p){Vf.D(p),Z0("dns-prefetch",p,null)}function AP(p,v){Vf.C(p,v),Z0("preconnect",p,v)}function QT(p,v,x){Vf.L(p,v,x);var F=nm;if(F&&p&&v){var Y='link[rel="preload"][as="'+Xs(v)+'"]';v==="image"&&x&&x.imageSrcSet?(Y+='[imagesrcset="'+Xs(x.imageSrcSet)+'"]',typeof x.imageSizes=="string"&&(Y+='[imagesizes="'+Xs(x.imageSizes)+'"]')):Y+='[href="'+Xs(p)+'"]';var se=Y;switch(v){case"style":se=im(p);break;case"script":se=Wy(p)}qd.has(se)||(p=De({rel:"preload",href:v==="image"&&x&&x.imageSrcSet?void 0:p,as:v},x),qd.set(se,p),F.querySelector(Y)!==null||v==="style"&&F.querySelector(gA(se))||v==="script"&&F.querySelector(Yy(se))||(v=F.createElement("link"),Co(v,"link",p),Hr(v),F.head.appendChild(v)))}}function eS(p,v){Vf.m(p,v);var x=nm;if(x&&p){var F=v&&typeof v.as=="string"?v.as:"script",Y='link[rel="modulepreload"][as="'+Xs(F)+'"][href="'+Xs(p)+'"]',se=Y;switch(F){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":se=Wy(p)}if(!qd.has(se)&&(p=De({rel:"modulepreload",href:p},v),qd.set(se,p),x.querySelector(Y)===null)){switch(F){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(x.querySelector(Yy(se)))return}F=x.createElement("link"),Co(F,"link",p),Hr(F),x.head.appendChild(F)}}}function tS(p,v,x){Vf.S(p,v,x);var F=nm;if(F&&p){var Y=yn(F).hoistableStyles,se=im(p);v=v||"default";var Fe=Y.get(se);if(!Fe){var dt={loading:0,preload:null};if(Fe=F.querySelector(gA(se)))dt.loading=5;else{p=De({rel:"stylesheet",href:p,"data-precedence":v},x),(x=qd.get(se))&&Xm(p,x);var Ft=Fe=F.createElement("link");Hr(Ft),Co(Ft,"link",p),Ft._p=new Promise(function(oa,ja){Ft.onload=oa,Ft.onerror=ja}),Ft.addEventListener("load",function(){dt.loading|=1}),Ft.addEventListener("error",function(){dt.loading|=2}),dt.loading|=4,sm(Fe,v,F)}Fe={type:"stylesheet",instance:Fe,count:1,state:dt},Y.set(se,Fe)}}}function aS(p,v){Vf.X(p,v);var x=nm;if(x&&p){var F=yn(x).hoistableScripts,Y=Wy(p),se=F.get(Y);se||(se=x.querySelector(Yy(Y)),se||(p=De({src:p,async:!0},v),(v=qd.get(Y))&&Xy(p,v),se=x.createElement("script"),Hr(se),Co(se,"link",p),x.head.appendChild(se)),se={type:"script",instance:se,count:1,state:null},F.set(Y,se))}}function _1(p,v){Vf.M(p,v);var x=nm;if(x&&p){var F=yn(x).hoistableScripts,Y=Wy(p),se=F.get(Y);se||(se=x.querySelector(Yy(Y)),se||(p=De({src:p,async:!0,type:"module"},v),(v=qd.get(Y))&&Xy(p,v),se=x.createElement("script"),Hr(se),Co(se,"link",p),x.head.appendChild(se)),se={type:"script",instance:se,count:1,state:null},F.set(Y,se))}}function v1(p,v,x,F){var Y=(Y=Pa.current)?Ym(Y):null;if(!Y)throw Error(r(446));switch(p){case"meta":case"title":return null;case"style":return typeof x.precedence=="string"&&typeof x.href=="string"?(v=im(x.href),x=yn(Y).hoistableStyles,F=x.get(v),F||(F={type:"style",instance:null,count:0,state:null},x.set(v,F)),F):{type:"void",instance:null,count:0,state:null};case"link":if(x.rel==="stylesheet"&&typeof x.href=="string"&&typeof x.precedence=="string"){p=im(x.href);var se=yn(Y).hoistableStyles,Fe=se.get(p);if(Fe||(Y=Y.ownerDocument||Y,Fe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},se.set(p,Fe),(se=Y.querySelector(gA(p)))&&!se._p&&(Fe.instance=se,Fe.state.loading=5),qd.has(p)||(x={rel:"preload",as:"style",href:x.href,crossOrigin:x.crossOrigin,integrity:x.integrity,media:x.media,hrefLang:x.hrefLang,referrerPolicy:x.referrerPolicy},qd.set(p,x),se||_P(Y,p,x,Fe.state))),v&&F===null)throw Error(r(528,""));return Fe}if(v&&F!==null)throw Error(r(529,""));return null;case"script":return v=x.async,x=x.src,typeof x=="string"&&v&&typeof v!="function"&&typeof v!="symbol"?(v=Wy(x),x=yn(Y).hoistableScripts,F=x.get(v),F||(F={type:"script",instance:null,count:0,state:null},x.set(v,F)),F):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,p))}}function im(p){return'href="'+Xs(p)+'"'}function gA(p){return'link[rel="stylesheet"]['+p+"]"}function rS(p){return De({},p,{"data-precedence":p.precedence,precedence:null})}function _P(p,v,x,F){p.querySelector('link[rel="preload"][as="style"]['+v+"]")?F.loading=1:(v=p.createElement("link"),F.preload=v,v.addEventListener("load",function(){return F.loading|=1}),v.addEventListener("error",function(){return F.loading|=2}),Co(v,"link",x),Hr(v),p.head.appendChild(v))}function Wy(p){return'[src="'+Xs(p)+'"]'}function Yy(p){return"script[async]"+p}function hp(p,v,x){if(v.count++,v.instance===null)switch(v.type){case"style":var F=p.querySelector('style[data-href~="'+Xs(x.href)+'"]');if(F)return v.instance=F,Hr(F),F;var Y=De({},x,{"data-href":x.href,"data-precedence":x.precedence,href:null,precedence:null});return F=(p.ownerDocument||p).createElement("style"),Hr(F),Co(F,"style",Y),sm(F,x.precedence,p),v.instance=F;case"stylesheet":Y=im(x.href);var se=p.querySelector(gA(Y));if(se)return v.state.loading|=4,v.instance=se,Hr(se),se;F=rS(x),(Y=qd.get(Y))&&Xm(F,Y),se=(p.ownerDocument||p).createElement("link"),Hr(se);var Fe=se;return Fe._p=new Promise(function(dt,Ft){Fe.onload=dt,Fe.onerror=Ft}),Co(se,"link",F),v.state.loading|=4,sm(se,x.precedence,p),v.instance=se;case"script":return se=Wy(x.src),(Y=p.querySelector(Yy(se)))?(v.instance=Y,Hr(Y),Y):(F=x,(Y=qd.get(se))&&(F=De({},x),Xy(F,Y)),p=p.ownerDocument||p,Y=p.createElement("script"),Hr(Y),Co(Y,"link",F),p.head.appendChild(Y),v.instance=Y);case"void":return null;default:throw Error(r(443,v.type))}else v.type==="stylesheet"&&(v.state.loading&4)===0&&(F=v.instance,v.state.loading|=4,sm(F,x.precedence,p));return v.instance}function sm(p,v,x){for(var F=x.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),Y=F.length?F[F.length-1]:null,se=Y,Fe=0;Fe<F.length;Fe++){var dt=F[Fe];if(dt.dataset.precedence===v)se=dt;else if(se!==Y)break}se?se.parentNode.insertBefore(p,se.nextSibling):(v=x.nodeType===9?x.head:x,v.insertBefore(p,v.firstChild))}function Xm(p,v){p.crossOrigin==null&&(p.crossOrigin=v.crossOrigin),p.referrerPolicy==null&&(p.referrerPolicy=v.referrerPolicy),p.title==null&&(p.title=v.title)}function Xy(p,v){p.crossOrigin==null&&(p.crossOrigin=v.crossOrigin),p.referrerPolicy==null&&(p.referrerPolicy=v.referrerPolicy),p.integrity==null&&(p.integrity=v.integrity)}var om=null;function w1(p,v,x){if(om===null){var F=new Map,Y=om=new Map;Y.set(x,F)}else Y=om,F=Y.get(x),F||(F=new Map,Y.set(x,F));if(F.has(p))return F;for(F.set(p,null),x=x.getElementsByTagName(p),Y=0;Y<x.length;Y++){var se=x[Y];if(!(se[Vr]||se[$t]||p==="link"&&se.getAttribute("rel")==="stylesheet")&&se.namespaceURI!=="http://www.w3.org/2000/svg"){var Fe=se.getAttribute(v)||"";Fe=p+Fe;var dt=F.get(Fe);dt?dt.push(se):F.set(Fe,[se])}}return F}function R1(p,v,x){p=p.ownerDocument||p,p.head.insertBefore(x,v==="title"?p.querySelector("head > title"):null)}function nS(p,v,x){if(x===1||v.itemProp!=null)return!1;switch(p){case"meta":case"title":return!0;case"style":if(typeof v.precedence!="string"||typeof v.href!="string"||v.href==="")break;return!0;case"link":if(typeof v.rel!="string"||typeof v.href!="string"||v.href===""||v.onLoad||v.onError)break;switch(v.rel){case"stylesheet":return p=v.disabled,typeof v.precedence=="string"&&p==null;default:return!0}case"script":if(v.async&&typeof v.async!="function"&&typeof v.async!="symbol"&&!v.onLoad&&!v.onError&&v.src&&typeof v.src=="string")return!0}return!1}function T1(p){return!(p.type==="stylesheet"&&(p.state.loading&3)===0)}var AA=null;function vP(){}function iS(p,v,x){if(AA===null)throw Error(r(475));var F=AA;if(v.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&(v.state.loading&4)===0){if(v.instance===null){var Y=im(x.href),se=p.querySelector(gA(Y));if(se){p=se._p,p!==null&&typeof p=="object"&&typeof p.then=="function"&&(F.count++,F=_A.bind(F),p.then(F,F)),v.state.loading|=4,v.instance=se,Hr(se);return}se=p.ownerDocument||p,x=rS(x),(Y=qd.get(Y))&&Xm(x,Y),se=se.createElement("link"),Hr(se);var Fe=se;Fe._p=new Promise(function(dt,Ft){Fe.onload=dt,Fe.onerror=Ft}),Co(se,"link",x),v.instance=se}F.stylesheets===null&&(F.stylesheets=new Map),F.stylesheets.set(v,p),(p=v.state.preload)&&(v.state.loading&3)===0&&(F.count++,v=_A.bind(F),p.addEventListener("load",v),p.addEventListener("error",v))}}function q0(){if(AA===null)throw Error(r(475));var p=AA;return p.stylesheets&&p.count===0&&$0(p,p.stylesheets),0<p.count?function(v){var x=setTimeout(function(){if(p.stylesheets&&$0(p,p.stylesheets),p.unsuspend){var F=p.unsuspend;p.unsuspend=null,F()}},6e4);return p.unsuspend=v,function(){p.unsuspend=null,clearTimeout(x)}}:null}function _A(){if(this.count--,this.count===0){if(this.stylesheets)$0(this,this.stylesheets);else if(this.unsuspend){var p=this.unsuspend;this.unsuspend=null,p()}}}var H0=null;function $0(p,v){p.stylesheets=null,p.unsuspend!==null&&(p.count++,H0=new Map,v.forEach(S1,p),H0=null,_A.call(p))}function S1(p,v){if(!(v.state.loading&4)){var x=H0.get(p);if(x)var F=x.get(null);else{x=new Map,H0.set(p,x);for(var Y=p.querySelectorAll("link[data-precedence],style[data-precedence]"),se=0;se<Y.length;se++){var Fe=Y[se];(Fe.nodeName==="LINK"||Fe.getAttribute("media")!=="not all")&&(x.set(Fe.dataset.precedence,Fe),F=Fe)}F&&x.set(null,F)}Y=v.instance,Fe=Y.getAttribute("data-precedence"),se=x.get(Fe)||F,se===F&&x.set(null,Y),x.set(Fe,Y),this.count++,F=_A.bind(this),Y.addEventListener("load",F),Y.addEventListener("error",F),se?se.parentNode.insertBefore(Y,se.nextSibling):(p=p.nodeType===9?p.head:p,p.insertBefore(Y,p.firstChild)),v.state.loading|=4}}var Jy={$$typeof:U,Provider:null,Consumer:null,_currentValue:ft,_currentValue2:ft,_threadCount:0};function sS(p,v,x,F,Y,se,Fe,dt){this.tag=1,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xe(0),this.hiddenUpdates=xe(null),this.identifierPrefix=F,this.onUncaughtError=Y,this.onCaughtError=se,this.onRecoverableError=Fe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=dt,this.incompleteTransitions=new Map}function C1(p,v,x,F,Y,se,Fe,dt,Ft,oa,ja,nr){return p=new sS(p,v,x,Fe,dt,Ft,oa,nr),v=1,se===!0&&(v|=24),se=aa(3,null,null,v),p.current=se,se.stateNode=p,v=kh(),v.refCount++,p.pooledCache=v,v.refCount++,se.memoizedState={element:F,isDehydrated:x,cache:v},_h(se),p}function b1(p){return p?(p=Uc,p):Uc}function x1(p,v,x,F,Y,se){Y=b1(Y),F.context===null?F.context=Y:F.pendingContext=Y,F=Sf(v),F.payload={element:x},se=se===void 0?null:se,se!==null&&(F.callback=se),x=Cf(p,F,v),x!==null&&(Il(x,p,v),bf(x,p,v))}function oS(p,v){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var x=p.retryLane;p.retryLane=x!==0&&x<v?x:v}}function K0(p,v){oS(p,v),(p=p.alternate)&&oS(p,v)}function P1(p){if(p.tag===13){var v=el(p,67108864);v!==null&&Il(v,p,67108864),K0(p,67108864)}}var lm=!0;function lS(p,v,x,F){var Y=be.T;be.T=null;var se=$e.p;try{$e.p=2,E1(p,v,x,F)}finally{$e.p=se,be.T=Y}}function uS(p,v,x,F){var Y=be.T;be.T=null;var se=$e.p;try{$e.p=8,E1(p,v,x,F)}finally{$e.p=se,be.T=Y}}function E1(p,v,x,F){if(lm){var Y=N1(F);if(Y===null)U0(p,v,F,W0,x),D1(p,F);else if(dS(Y,p,v,x,F))F.stopPropagation();else if(D1(p,F),v&4&&-1<O1.indexOf(p)){for(;Y!==null;){var se=Jn(Y);if(se!==null)switch(se.tag){case 3:if(se=se.stateNode,se.current.memoizedState.isDehydrated){var Fe=Ni(se.pendingLanes);if(Fe!==0){var dt=se;for(dt.pendingLanes|=2,dt.entangledLanes|=2;Fe;){var Ft=1<<31-en(Fe);dt.entanglements[1]|=Ft,Fe&=~Ft}$h(se),(xr&6)===0&&(yo=ka()+500,rm(0))}}break;case 13:dt=el(se,2),dt!==null&&Il(dt,se,2),E0(),K0(se,2)}if(se=N1(F),se===null&&U0(p,v,F,W0,x),se===Y)break;Y=se}Y!==null&&F.stopPropagation()}else U0(p,v,F,null,x)}}function N1(p){return p=hr(p),V1(p)}var W0=null;function V1(p){if(W0=null,p=zn(p),p!==null){var v=ke(p);if(v===null)p=null;else{var x=v.tag;if(x===13){if(p=tt(v),p!==null)return p;p=null}else if(x===3){if(v.stateNode.current.memoizedState.isDehydrated)return v.tag===3?v.stateNode.containerInfo:null;p=null}else v!==p&&(p=null)}}return W0=p,null}function cS(p){switch(p){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(jr()){case pn:return 2;case Dn:return 8;case Rn:case va:return 32;case Wa:return 268435456;default:return 32}default:return 32}}var z1=!1,um=null,fp=null,cm=null,vA=new Map,wA=new Map,zf=[],O1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function D1(p,v){switch(p){case"focusin":case"focusout":um=null;break;case"dragenter":case"dragleave":fp=null;break;case"mouseover":case"mouseout":cm=null;break;case"pointerover":case"pointerout":vA.delete(v.pointerId);break;case"gotpointercapture":case"lostpointercapture":wA.delete(v.pointerId)}}function Qy(p,v,x,F,Y,se){return p===null||p.nativeEvent!==se?(p={blockedOn:v,domEventName:x,eventSystemFlags:F,nativeEvent:se,targetContainers:[Y]},v!==null&&(v=Jn(v),v!==null&&P1(v)),p):(p.eventSystemFlags|=F,v=p.targetContainers,Y!==null&&v.indexOf(Y)===-1&&v.push(Y),p)}function dS(p,v,x,F,Y){switch(v){case"focusin":return um=Qy(um,p,v,x,F,Y),!0;case"dragenter":return fp=Qy(fp,p,v,x,F,Y),!0;case"mouseover":return cm=Qy(cm,p,v,x,F,Y),!0;case"pointerover":var se=Y.pointerId;return vA.set(se,Qy(vA.get(se)||null,p,v,x,F,Y)),!0;case"gotpointercapture":return se=Y.pointerId,wA.set(se,Qy(wA.get(se)||null,p,v,x,F,Y)),!0}return!1}function M1(p){var v=zn(p.target);if(v!==null){var x=ke(v);if(x!==null){if(v=x.tag,v===13){if(v=tt(x),v!==null){p.blockedOn=v,Et(p.priority,function(){if(x.tag===13){var F=go(),Y=el(x,F);Y!==null&&Il(Y,x,F),K0(x,F)}});return}}else if(v===3&&x.stateNode.current.memoizedState.isDehydrated){p.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}p.blockedOn=null}function RA(p){if(p.blockedOn!==null)return!1;for(var v=p.targetContainers;0<v.length;){var x=N1(p.nativeEvent);if(x===null){x=p.nativeEvent;var F=new x.constructor(x.type,x);lo=F,x.target.dispatchEvent(F),lo=null}else return v=Jn(x),v!==null&&P1(v),p.blockedOn=x,!1;v.shift()}return!0}function I1(p,v,x){RA(p)&&x.delete(v)}function hS(){z1=!1,um!==null&&RA(um)&&(um=null),fp!==null&&RA(fp)&&(fp=null),cm!==null&&RA(cm)&&(cm=null),vA.forEach(I1),wA.forEach(I1)}function TA(p,v){p.blockedOn===v&&(p.blockedOn=null,z1||(z1=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,hS)))}var eg=null;function L1(p){eg!==p&&(eg=p,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){eg===p&&(eg=null);for(var v=0;v<p.length;v+=3){var x=p[v],F=p[v+1],Y=p[v+2];if(typeof F!="function"){if(V1(F||x)===null)continue;break}var se=Jn(x);se!==null&&(p.splice(v,3),v-=3,Kc(se,{pending:!0,data:Y,method:x.method,action:F},F,Y))}}))}function SA(p){function v(Ft){return TA(Ft,p)}um!==null&&TA(um,p),fp!==null&&TA(fp,p),cm!==null&&TA(cm,p),vA.forEach(v),wA.forEach(v);for(var x=0;x<zf.length;x++){var F=zf[x];F.blockedOn===p&&(F.blockedOn=null)}for(;0<zf.length&&(x=zf[0],x.blockedOn===null);)M1(x),x.blockedOn===null&&zf.shift();if(x=(p.ownerDocument||p).$$reactFormReplay,x!=null)for(F=0;F<x.length;F+=3){var Y=x[F],se=x[F+1],Fe=Y[qt]||null;if(typeof se=="function")Fe||L1(x);else if(Fe){var dt=null;if(se&&se.hasAttribute("formAction")){if(Y=se,Fe=se[qt]||null)dt=Fe.formAction;else if(V1(Y)!==null)continue}else dt=Fe.action;typeof dt=="function"?x[F+1]=dt:(x.splice(F,3),F-=3),L1(x)}}}function Jm(p){this._internalRoot=p}CA.prototype.render=Jm.prototype.render=function(p){var v=this._internalRoot;if(v===null)throw Error(r(409));var x=v.current,F=go();x1(x,F,p,v,null,null)},CA.prototype.unmount=Jm.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var v=p.containerInfo;p.tag===0&&Rh(),x1(p.current,2,null,p,null,null),E0(),v[Ra]=null}};function CA(p){this._internalRoot=p}CA.prototype.unstable_scheduleHydration=function(p){if(p){var v=kt();p={blockedOn:null,target:p,priority:v};for(var x=0;x<zf.length&&v!==0&&v<zf[x].priority;x++);zf.splice(x,0,p),x===0&&M1(p)}};var fS=e.version;if(fS!=="19.0.0")throw Error(r(527,fS,"19.0.0"));$e.findDOMNode=function(p){var v=p._reactInternals;if(v===void 0)throw typeof p.render=="function"?Error(r(188)):(p=Object.keys(p).join(","),Error(r(268,p)));return p=He(v),p=p!==null?Ce(p):null,p=p===null?null:p.stateNode,p};var wP={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:be,findFiberByHostInstance:zn,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Y0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Y0.isDisabled&&Y0.supportsFiber)try{gr=Y0.inject(wP),Zn=Y0}catch{}}return sw.createRoot=function(p,v){if(!s(p))throw Error(r(299));var x=!1,F="",Y=tp,se=jh,Fe=gh,dt=null;return v!=null&&(v.unstable_strictMode===!0&&(x=!0),v.identifierPrefix!==void 0&&(F=v.identifierPrefix),v.onUncaughtError!==void 0&&(Y=v.onUncaughtError),v.onCaughtError!==void 0&&(se=v.onCaughtError),v.onRecoverableError!==void 0&&(Fe=v.onRecoverableError),v.unstable_transitionCallbacks!==void 0&&(dt=v.unstable_transitionCallbacks)),v=C1(p,1,!1,null,null,x,F,Y,se,Fe,dt,null),p[Ra]=v.current,F0(p.nodeType===8?p.parentNode:p),new Jm(v)},sw.hydrateRoot=function(p,v,x){if(!s(p))throw Error(r(299));var F=!1,Y="",se=tp,Fe=jh,dt=gh,Ft=null,oa=null;return x!=null&&(x.unstable_strictMode===!0&&(F=!0),x.identifierPrefix!==void 0&&(Y=x.identifierPrefix),x.onUncaughtError!==void 0&&(se=x.onUncaughtError),x.onCaughtError!==void 0&&(Fe=x.onCaughtError),x.onRecoverableError!==void 0&&(dt=x.onRecoverableError),x.unstable_transitionCallbacks!==void 0&&(Ft=x.unstable_transitionCallbacks),x.formState!==void 0&&(oa=x.formState)),v=C1(p,1,!0,v,x??null,F,Y,se,Fe,dt,Ft,oa),v.context=b1(null),x=v.current,F=go(),Y=Sf(F),Y.callback=null,Cf(x,Y,F),v.current.lanes=F,Oe(v,F),$h(v),p[Ra]=v.current,F0(p),new CA(v)},sw.version="19.0.0",sw}var t6;function ete(){if(t6)return yE.exports;t6=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),yE.exports=Qee(),yE.exports}var tte=ete(),ow={},a6;function ate(){if(a6)return ow;a6=1,Object.defineProperty(ow,"__esModule",{value:!0}),ow.parse=h,ow.serialize=T;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,l=(()=>{const k=function(){};return k.prototype=Object.create(null),k})();function h(k,U){const Z=new l,q=k.length;if(q<2)return Z;const $=(U==null?void 0:U.decode)||E;let J=0;do{const ie=k.indexOf("=",J);if(ie===-1)break;const de=k.indexOf(";",J),ge=de===-1?q:de;if(ie>ge){J=k.lastIndexOf(";",ie-1)+1;continue}const he=n(k,J,ie),Ae=w(k,ie,he),me=k.slice(he,Ae);if(Z[me]===void 0){let Re=n(k,ie+1,ge),be=w(k,ge,Re);const De=$(k.slice(Re,be));Z[me]=De}J=ge+1}while(J<q);return Z}function n(k,U,Z){do{const q=k.charCodeAt(U);if(q!==32&&q!==9)return U}while(++U<Z);return Z}function w(k,U,Z){for(;U>Z;){const q=k.charCodeAt(--U);if(q!==32&&q!==9)return U+1}return Z}function T(k,U,Z){const q=(Z==null?void 0:Z.encode)||encodeURIComponent;if(!t.test(k))throw new TypeError(`argument name is invalid: ${k}`);const $=q(U);if(!e.test($))throw new TypeError(`argument val is invalid: ${U}`);let J=k+"="+$;if(!Z)return J;if(Z.maxAge!==void 0){if(!Number.isInteger(Z.maxAge))throw new TypeError(`option maxAge is invalid: ${Z.maxAge}`);J+="; Max-Age="+Z.maxAge}if(Z.domain){if(!a.test(Z.domain))throw new TypeError(`option domain is invalid: ${Z.domain}`);J+="; Domain="+Z.domain}if(Z.path){if(!r.test(Z.path))throw new TypeError(`option path is invalid: ${Z.path}`);J+="; Path="+Z.path}if(Z.expires){if(!z(Z.expires)||!Number.isFinite(Z.expires.valueOf()))throw new TypeError(`option expires is invalid: ${Z.expires}`);J+="; Expires="+Z.expires.toUTCString()}if(Z.httpOnly&&(J+="; HttpOnly"),Z.secure&&(J+="; Secure"),Z.partitioned&&(J+="; Partitioned"),Z.priority)switch(typeof Z.priority=="string"?Z.priority.toLowerCase():void 0){case"low":J+="; Priority=Low";break;case"medium":J+="; Priority=Medium";break;case"high":J+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${Z.priority}`)}if(Z.sameSite)switch(typeof Z.sameSite=="string"?Z.sameSite.toLowerCase():Z.sameSite){case!0:case"strict":J+="; SameSite=Strict";break;case"lax":J+="; SameSite=Lax";break;case"none":J+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${Z.sameSite}`)}return J}function E(k){if(k.indexOf("%")===-1)return k;try{return decodeURIComponent(k)}catch{return k}}function z(k){return s.call(k)==="[object Date]"}return ow}ate();/**
 * react-router v7.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var r6="popstate";function rte(t={}){function e(s,l){let{pathname:h="/",search:n="",hash:w=""}=m0(s.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),b5("",{pathname:h,search:n,hash:w},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function a(s,l){let h=s.document.querySelector("base"),n="";if(h&&h.getAttribute("href")){let w=s.location.href,T=w.indexOf("#");n=T===-1?w:w.slice(0,T)}return n+"#"+(typeof l=="string"?l:Jw(l))}function r(s,l){zp(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return ite(e,a,r,t)}function dl(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function zp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function nte(){return Math.random().toString(36).substring(2,10)}function n6(t,e){return{usr:t.state,key:t.key,idx:e}}function b5(t,e,a=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?m0(e):e,state:a,key:e&&e.key||r||nte()}}function Jw({pathname:t="/",search:e="",hash:a=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function m0(t){let e={};if(t){let a=t.indexOf("#");a>=0&&(e.hash=t.substring(a),t=t.substring(0,a));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function ite(t,e,a,r={}){let{window:s=document.defaultView,v5Compat:l=!1}=r,h=s.history,n="POP",w=null,T=E();T==null&&(T=0,h.replaceState({...h.state,idx:T},""));function E(){return(h.state||{idx:null}).idx}function z(){n="POP";let $=E(),J=$==null?null:$-T;T=$,w&&w({action:n,location:q.location,delta:J})}function k($,J){n="PUSH";let ie=b5(q.location,$,J);a&&a(ie,$),T=E()+1;let de=n6(ie,T),ge=q.createHref(ie);try{h.pushState(de,"",ge)}catch(he){if(he instanceof DOMException&&he.name==="DataCloneError")throw he;s.location.assign(ge)}l&&w&&w({action:n,location:q.location,delta:1})}function U($,J){n="REPLACE";let ie=b5(q.location,$,J);a&&a(ie,$),T=E();let de=n6(ie,T),ge=q.createHref(ie);h.replaceState(de,"",ge),l&&w&&w({action:n,location:q.location,delta:0})}function Z($){let J=s.location.origin!=="null"?s.location.origin:s.location.href,ie=typeof $=="string"?$:Jw($);return ie=ie.replace(/ $/,"%20"),dl(J,`No window.location.(origin|href) available to create URL for href: ${ie}`),new URL(ie,J)}let q={get action(){return n},get location(){return t(s,h)},listen($){if(w)throw new Error("A history only accepts one active listener");return s.addEventListener(r6,z),w=$,()=>{s.removeEventListener(r6,z),w=null}},createHref($){return e(s,$)},createURL:Z,encodeLocation($){let J=Z($);return{pathname:J.pathname,search:J.search,hash:J.hash}},push:k,replace:U,go($){return h.go($)}};return q}function YZ(t,e,a="/"){return ste(t,e,a,!1)}function ste(t,e,a,r){let s=typeof e=="string"?m0(e):e,l=py(s.pathname||"/",a);if(l==null)return null;let h=XZ(t);ote(h);let n=null;for(let w=0;n==null&&w<h.length;++w){let T=Ate(l);n=yte(h[w],T,r)}return n}function XZ(t,e=[],a=[],r=""){let s=(l,h,n)=>{let w={relativePath:n===void 0?l.path||"":n,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};w.relativePath.startsWith("/")&&(dl(w.relativePath.startsWith(r),`Absolute route path "${w.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(r.length));let T=cy([r,w.relativePath]),E=a.concat(w);l.children&&l.children.length>0&&(dl(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),XZ(l.children,e,E,T)),!(l.path==null&&!l.index)&&e.push({path:T,score:pte(T,l.index),routesMeta:E})};return t.forEach((l,h)=>{var n;if(l.path===""||!((n=l.path)!=null&&n.includes("?")))s(l,h);else for(let w of JZ(l.path))s(l,h,w)}),e}function JZ(t){let e=t.split("/");if(e.length===0)return[];let[a,...r]=e,s=a.endsWith("?"),l=a.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let h=JZ(r.join("/")),n=[];return n.push(...h.map(w=>w===""?l:[l,w].join("/"))),s&&n.push(...h),n.map(w=>t.startsWith("/")&&w===""?"/":w)}function ote(t){t.sort((e,a)=>e.score!==a.score?a.score-e.score:mte(e.routesMeta.map(r=>r.childrenIndex),a.routesMeta.map(r=>r.childrenIndex)))}var lte=/^:[\w-]+$/,ute=3,cte=2,dte=1,hte=10,fte=-2,i6=t=>t==="*";function pte(t,e){let a=t.split("/"),r=a.length;return a.some(i6)&&(r+=fte),e&&(r+=cte),a.filter(s=>!i6(s)).reduce((s,l)=>s+(lte.test(l)?ute:l===""?dte:hte),r)}function mte(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function yte(t,e,a=!1){let{routesMeta:r}=t,s={},l="/",h=[];for(let n=0;n<r.length;++n){let w=r[n],T=n===r.length-1,E=l==="/"?e:e.slice(l.length)||"/",z=YC({path:w.relativePath,caseSensitive:w.caseSensitive,end:T},E),k=w.route;if(!z&&T&&a&&!r[r.length-1].route.index&&(z=YC({path:w.relativePath,caseSensitive:w.caseSensitive,end:!1},E)),!z)return null;Object.assign(s,z.params),h.push({params:s,pathname:cy([l,z.pathname]),pathnameBase:Rte(cy([l,z.pathnameBase])),route:k}),z.pathnameBase!=="/"&&(l=cy([l,z.pathnameBase]))}return h}function YC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,r]=gte(t.path,t.caseSensitive,t.end),s=e.match(a);if(!s)return null;let l=s[0],h=l.replace(/(.)\/+$/,"$1"),n=s.slice(1);return{params:r.reduce((T,{paramName:E,isOptional:z},k)=>{if(E==="*"){let Z=n[k]||"";h=l.slice(0,l.length-Z.length).replace(/(.)\/+$/,"$1")}const U=n[k];return z&&!U?T[E]=void 0:T[E]=(U||"").replace(/%2F/g,"/"),T},{}),pathname:l,pathnameBase:h,pattern:t}}function gte(t,e=!1,a=!0){zp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,n,w)=>(r.push({paramName:n,isOptional:w!=null}),w?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Ate(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zp(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function py(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let a=e.endsWith("/")?e.length-1:e.length,r=t.charAt(a);return r&&r!=="/"?null:t.slice(a)||"/"}function _te(t,e="/"){let{pathname:a,search:r="",hash:s=""}=typeof t=="string"?m0(t):t;return{pathname:a?a.startsWith("/")?a:vte(a,e):e,search:Tte(r),hash:Ste(s)}}function vte(t,e){let a=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?a.length>1&&a.pop():s!=="."&&a.push(s)}),a.length>1?a.join("/"):"/"}function vE(t,e,a,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function wte(t){return t.filter((e,a)=>a===0||e.route.path&&e.route.path.length>0)}function QZ(t){let e=wte(t);return e.map((a,r)=>r===e.length-1?a.pathname:a.pathnameBase)}function eq(t,e,a,r=!1){let s;typeof t=="string"?s=m0(t):(s={...t},dl(!s.pathname||!s.pathname.includes("?"),vE("?","pathname","search",s)),dl(!s.pathname||!s.pathname.includes("#"),vE("#","pathname","hash",s)),dl(!s.search||!s.search.includes("#"),vE("#","search","hash",s)));let l=t===""||s.pathname==="",h=l?"/":s.pathname,n;if(h==null)n=a;else{let z=e.length-1;if(!r&&h.startsWith("..")){let k=h.split("/");for(;k[0]==="..";)k.shift(),z-=1;s.pathname=k.join("/")}n=z>=0?e[z]:"/"}let w=_te(s,n),T=h&&h!=="/"&&h.endsWith("/"),E=(l||h===".")&&a.endsWith("/");return!w.pathname.endsWith("/")&&(T||E)&&(w.pathname+="/"),w}var cy=t=>t.join("/").replace(/\/\/+/g,"/"),Rte=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Tte=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Ste=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Cte(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var tq=["POST","PUT","PATCH","DELETE"];new Set(tq);var bte=["GET",...tq];new Set(bte);var Ov=nt.createContext(null);Ov.displayName="DataRouter";var x2=nt.createContext(null);x2.displayName="DataRouterState";var aq=nt.createContext({isTransitioning:!1});aq.displayName="ViewTransition";var xte=nt.createContext(new Map);xte.displayName="Fetchers";var Pte=nt.createContext(null);Pte.displayName="Await";var zm=nt.createContext(null);zm.displayName="Navigation";var tT=nt.createContext(null);tT.displayName="Location";var Sy=nt.createContext({outlet:null,matches:[],isDataRoute:!1});Sy.displayName="Route";var e3=nt.createContext(null);e3.displayName="RouteError";function Ete(t,{relative:e}={}){dl(aT(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:r}=nt.useContext(zm),{hash:s,pathname:l,search:h}=rT(t,{relative:e}),n=l;return a!=="/"&&(n=l==="/"?a:cy([a,l])),r.createHref({pathname:n,search:h,hash:s})}function aT(){return nt.useContext(tT)!=null}function Fg(){return dl(aT(),"useLocation() may be used only in the context of a <Router> component."),nt.useContext(tT).location}var rq="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function nq(t){nt.useContext(zm).static||nt.useLayoutEffect(t)}function t3(){let{isDataRoute:t}=nt.useContext(Sy);return t?Gte():Nte()}function Nte(){dl(aT(),"useNavigate() may be used only in the context of a <Router> component.");let t=nt.useContext(Ov),{basename:e,navigator:a}=nt.useContext(zm),{matches:r}=nt.useContext(Sy),{pathname:s}=Fg(),l=JSON.stringify(QZ(r)),h=nt.useRef(!1);return nq(()=>{h.current=!0}),nt.useCallback((w,T={})=>{if(zp(h.current,rq),!h.current)return;if(typeof w=="number"){a.go(w);return}let E=eq(w,JSON.parse(l),s,T.relative==="path");t==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:cy([e,E.pathname])),(T.replace?a.replace:a.push)(E,T.state,T)},[e,a,l,s,t])}nt.createContext(null);function rT(t,{relative:e}={}){let{matches:a}=nt.useContext(Sy),{pathname:r}=Fg(),s=JSON.stringify(QZ(a));return nt.useMemo(()=>eq(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function Vte(t,e){return iq(t,e)}function iq(t,e,a,r){var ie;dl(aT(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:l}=nt.useContext(zm),{matches:h}=nt.useContext(Sy),n=h[h.length-1],w=n?n.params:{},T=n?n.pathname:"/",E=n?n.pathnameBase:"/",z=n&&n.route;{let de=z&&z.path||"";sq(T,!z||de.endsWith("*")||de.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${T}" (under <Route path="${de}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${de}"> to <Route path="${de==="/"?"*":`${de}/*`}">.`)}let k=Fg(),U;if(e){let de=typeof e=="string"?m0(e):e;dl(E==="/"||((ie=de.pathname)==null?void 0:ie.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${de.pathname}" was given in the \`location\` prop.`),U=de}else U=k;let Z=U.pathname||"/",q=Z;if(E!=="/"){let de=E.replace(/^\//,"").split("/");q="/"+Z.replace(/^\//,"").split("/").slice(de.length).join("/")}let $=!l&&a&&a.matches&&a.matches.length>0?a.matches:YZ(t,{pathname:q});zp(z||$!=null,`No routes matched location "${U.pathname}${U.search}${U.hash}" `),zp($==null||$[$.length-1].route.element!==void 0||$[$.length-1].route.Component!==void 0||$[$.length-1].route.lazy!==void 0,`Matched leaf route at location "${U.pathname}${U.search}${U.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let J=Ite($&&$.map(de=>Object.assign({},de,{params:Object.assign({},w,de.params),pathname:cy([E,s.encodeLocation?s.encodeLocation(de.pathname).pathname:de.pathname]),pathnameBase:de.pathnameBase==="/"?E:cy([E,s.encodeLocation?s.encodeLocation(de.pathnameBase).pathname:de.pathnameBase])})),h,a,r);return e&&J?nt.createElement(tT.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...U},navigationType:"POP"}},J):J}function zte(){let t=Bte(),e=Cte(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},h=null;return console.error("Error handled by React Router default ErrorBoundary:",t),h=nt.createElement(nt.Fragment,null,nt.createElement("p",null," Hey developer "),nt.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",nt.createElement("code",{style:l},"ErrorBoundary")," or"," ",nt.createElement("code",{style:l},"errorElement")," prop on your route.")),nt.createElement(nt.Fragment,null,nt.createElement("h2",null,"Unexpected Application Error!"),nt.createElement("h3",{style:{fontStyle:"italic"}},e),a?nt.createElement("pre",{style:s},a):null,h)}var Ote=nt.createElement(zte,null),Dte=class extends nt.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?nt.createElement(Sy.Provider,{value:this.props.routeContext},nt.createElement(e3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Mte({routeContext:t,match:e,children:a}){let r=nt.useContext(Ov);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),nt.createElement(Sy.Provider,{value:t},a)}function Ite(t,e=[],a=null,r=null){if(t==null){if(!a)return null;if(a.errors)t=a.matches;else if(e.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let s=t,l=a==null?void 0:a.errors;if(l!=null){let w=s.findIndex(T=>T.route.id&&(l==null?void 0:l[T.route.id])!==void 0);dl(w>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),s=s.slice(0,Math.min(s.length,w+1))}let h=!1,n=-1;if(a)for(let w=0;w<s.length;w++){let T=s[w];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(n=w),T.route.id){let{loaderData:E,errors:z}=a,k=T.route.loader&&!E.hasOwnProperty(T.route.id)&&(!z||z[T.route.id]===void 0);if(T.route.lazy||k){h=!0,n>=0?s=s.slice(0,n+1):s=[s[0]];break}}}return s.reduceRight((w,T,E)=>{let z,k=!1,U=null,Z=null;a&&(z=l&&T.route.id?l[T.route.id]:void 0,U=T.route.errorElement||Ote,h&&(n<0&&E===0?(sq("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,Z=null):n===E&&(k=!0,Z=T.route.hydrateFallbackElement||null)));let q=e.concat(s.slice(0,E+1)),$=()=>{let J;return z?J=U:k?J=Z:T.route.Component?J=nt.createElement(T.route.Component,null):T.route.element?J=T.route.element:J=w,nt.createElement(Mte,{match:T,routeContext:{outlet:w,matches:q,isDataRoute:a!=null},children:J})};return a&&(T.route.ErrorBoundary||T.route.errorElement||E===0)?nt.createElement(Dte,{location:a.location,revalidation:a.revalidation,component:U,error:z,children:$(),routeContext:{outlet:null,matches:q,isDataRoute:!0}}):$()},null)}function a3(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Lte(t){let e=nt.useContext(Ov);return dl(e,a3(t)),e}function Fte(t){let e=nt.useContext(x2);return dl(e,a3(t)),e}function Ute(t){let e=nt.useContext(Sy);return dl(e,a3(t)),e}function r3(t){let e=Ute(t),a=e.matches[e.matches.length-1];return dl(a.route.id,`${t} can only be used on routes that contain a unique "id"`),a.route.id}function kte(){return r3("useRouteId")}function Bte(){var r;let t=nt.useContext(e3),e=Fte("useRouteError"),a=r3("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[a]}function Gte(){let{router:t}=Lte("useNavigate"),e=r3("useNavigate"),a=nt.useRef(!1);return nq(()=>{a.current=!0}),nt.useCallback(async(s,l={})=>{zp(a.current,rq),a.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...l}))},[t,e])}var s6={};function sq(t,e,a){!e&&!s6[t]&&(s6[t]=!0,zp(!1,a))}nt.memo(jte);function jte({routes:t,future:e,state:a}){return iq(t,void 0,a,e)}function Tp(t){dl(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Zte({basename:t="/",children:e=null,location:a,navigationType:r="POP",navigator:s,static:l=!1}){dl(!aT(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=t.replace(/^\/*/,"/"),n=nt.useMemo(()=>({basename:h,navigator:s,static:l,future:{}}),[h,s,l]);typeof a=="string"&&(a=m0(a));let{pathname:w="/",search:T="",hash:E="",state:z=null,key:k="default"}=a,U=nt.useMemo(()=>{let Z=py(w,h);return Z==null?null:{location:{pathname:Z,search:T,hash:E,state:z,key:k},navigationType:r}},[h,w,T,E,z,k,r]);return zp(U!=null,`<Router basename="${h}"> is not able to match the URL "${w}${T}${E}" because it does not start with the basename, so the <Router> won't render anything.`),U==null?null:nt.createElement(zm.Provider,{value:n},nt.createElement(tT.Provider,{children:e,value:U}))}function qte({children:t,location:e}){return Vte(x5(t),e)}function x5(t,e=[]){let a=[];return nt.Children.forEach(t,(r,s)=>{if(!nt.isValidElement(r))return;let l=[...e,s];if(r.type===nt.Fragment){a.push.apply(a,x5(r.props.children,l));return}dl(r.type===Tp,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),dl(!r.props.index||!r.props.children,"An index route cannot have child routes.");let h={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(h.children=x5(r.props.children,l)),a.push(h)}),a}var SC="get",CC="application/x-www-form-urlencoded";function P2(t){return t!=null&&typeof t.tagName=="string"}function Hte(t){return P2(t)&&t.tagName.toLowerCase()==="button"}function $te(t){return P2(t)&&t.tagName.toLowerCase()==="form"}function Kte(t){return P2(t)&&t.tagName.toLowerCase()==="input"}function Wte(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Yte(t,e){return t.button===0&&(!e||e==="_self")&&!Wte(t)}var KS=null;function Xte(){if(KS===null)try{new FormData(document.createElement("form"),0),KS=!1}catch{KS=!0}return KS}var Jte=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wE(t){return t!=null&&!Jte.has(t)?(zp(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${CC}"`),null):t}function Qte(t,e){let a,r,s,l,h;if($te(t)){let n=t.getAttribute("action");r=n?py(n,e):null,a=t.getAttribute("method")||SC,s=wE(t.getAttribute("enctype"))||CC,l=new FormData(t)}else if(Hte(t)||Kte(t)&&(t.type==="submit"||t.type==="image")){let n=t.form;if(n==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let w=t.getAttribute("formaction")||n.getAttribute("action");if(r=w?py(w,e):null,a=t.getAttribute("formmethod")||n.getAttribute("method")||SC,s=wE(t.getAttribute("formenctype"))||wE(n.getAttribute("enctype"))||CC,l=new FormData(n,t),!Xte()){let{name:T,type:E,value:z}=t;if(E==="image"){let k=T?`${T}.`:"";l.append(`${k}x`,"0"),l.append(`${k}y`,"0")}else T&&l.append(T,z)}}else{if(P2(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=SC,r=null,s=CC,h=t}return l&&s==="text/plain"&&(h=l,l=void 0),{action:r,method:a.toLowerCase(),encType:s,formData:l,body:h}}function n3(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function eae(t,e){if(t.id in e)return e[t.id];try{let a=await import(t.module);return e[t.id]=a,a}catch(a){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function tae(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function aae(t,e,a){let r=await Promise.all(t.map(async s=>{let l=e.routes[s.route.id];if(l){let h=await eae(l,a);return h.links?h.links():[]}return[]}));return sae(r.flat(1).filter(tae).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function o6(t,e,a,r,s,l){let h=(w,T)=>a[T]?w.route.id!==a[T].route.id:!0,n=(w,T)=>{var E;return a[T].pathname!==w.pathname||((E=a[T].route.path)==null?void 0:E.endsWith("*"))&&a[T].params["*"]!==w.params["*"]};return l==="assets"?e.filter((w,T)=>h(w,T)||n(w,T)):l==="data"?e.filter((w,T)=>{var z;let E=r.routes[w.route.id];if(!E||!E.hasLoader)return!1;if(h(w,T)||n(w,T))return!0;if(w.route.shouldRevalidate){let k=w.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((z=a[0])==null?void 0:z.params)||{},nextUrl:new URL(t,window.origin),nextParams:w.params,defaultShouldRevalidate:!0});if(typeof k=="boolean")return k}return!0}):[]}function rae(t,e,{includeHydrateFallback:a}={}){return nae(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),a&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function nae(t){return[...new Set(t)]}function iae(t){let e={},a=Object.keys(t).sort();for(let r of a)e[r]=t[r];return e}function sae(t,e){let a=new Set;return new Set(e),t.reduce((r,s)=>{let l=JSON.stringify(iae(s));return a.has(l)||(a.add(l),r.push({key:l,link:s})),r},[])}function oae(t,e){let a=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return a.pathname==="/"?a.pathname="_root.data":e&&py(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.data`:a.pathname=`${a.pathname.replace(/\/$/,"")}.data`,a}function oq(){let t=nt.useContext(Ov);return n3(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function lae(){let t=nt.useContext(x2);return n3(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var i3=nt.createContext(void 0);i3.displayName="FrameworkContext";function lq(){let t=nt.useContext(i3);return n3(t,"You must render this element inside a <HydratedRouter> element"),t}function uae(t,e){let a=nt.useContext(i3),[r,s]=nt.useState(!1),[l,h]=nt.useState(!1),{onFocus:n,onBlur:w,onMouseEnter:T,onMouseLeave:E,onTouchStart:z}=e,k=nt.useRef(null);nt.useEffect(()=>{if(t==="render"&&h(!0),t==="viewport"){let q=J=>{J.forEach(ie=>{h(ie.isIntersecting)})},$=new IntersectionObserver(q,{threshold:.5});return k.current&&$.observe(k.current),()=>{$.disconnect()}}},[t]),nt.useEffect(()=>{if(r){let q=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(q)}}},[r]);let U=()=>{s(!0)},Z=()=>{s(!1),h(!1)};return a?t!=="intent"?[l,k,{}]:[l,k,{onFocus:lw(n,U),onBlur:lw(w,Z),onMouseEnter:lw(T,U),onMouseLeave:lw(E,Z),onTouchStart:lw(z,U)}]:[!1,k,{}]}function lw(t,e){return a=>{t&&t(a),a.defaultPrevented||e(a)}}function cae({page:t,...e}){let{router:a}=oq(),r=nt.useMemo(()=>YZ(a.routes,t,a.basename),[a.routes,t,a.basename]);return r?nt.createElement(hae,{page:t,matches:r,...e}):null}function dae(t){let{manifest:e,routeModules:a}=lq(),[r,s]=nt.useState([]);return nt.useEffect(()=>{let l=!1;return aae(t,e,a).then(h=>{l||s(h)}),()=>{l=!0}},[t,e,a]),r}function hae({page:t,matches:e,...a}){let r=Fg(),{manifest:s,routeModules:l}=lq(),{basename:h}=oq(),{loaderData:n,matches:w}=lae(),T=nt.useMemo(()=>o6(t,e,w,s,r,"data"),[t,e,w,s,r]),E=nt.useMemo(()=>o6(t,e,w,s,r,"assets"),[t,e,w,s,r]),z=nt.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let Z=new Set,q=!1;if(e.forEach(J=>{var de;let ie=s.routes[J.route.id];!ie||!ie.hasLoader||(!T.some(ge=>ge.route.id===J.route.id)&&J.route.id in n&&((de=l[J.route.id])!=null&&de.shouldRevalidate)||ie.hasClientLoader?q=!0:Z.add(J.route.id))}),Z.size===0)return[];let $=oae(t,h);return q&&Z.size>0&&$.searchParams.set("_routes",e.filter(J=>Z.has(J.route.id)).map(J=>J.route.id).join(",")),[$.pathname+$.search]},[h,n,r,s,T,e,t,l]),k=nt.useMemo(()=>rae(E,s),[E,s]),U=dae(E);return nt.createElement(nt.Fragment,null,z.map(Z=>nt.createElement("link",{key:Z,rel:"prefetch",as:"fetch",href:Z,...a})),k.map(Z=>nt.createElement("link",{key:Z,rel:"modulepreload",href:Z,...a})),U.map(({key:Z,link:q})=>nt.createElement("link",{key:Z,...q})))}function fae(...t){return e=>{t.forEach(a=>{typeof a=="function"?a(e):a!=null&&(a.current=e)})}}var uq=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{uq&&(window.__reactRouterVersion="7.3.0")}catch{}function pae({basename:t,children:e,window:a}){let r=nt.useRef();r.current==null&&(r.current=rte({window:a,v5Compat:!0}));let s=r.current,[l,h]=nt.useState({action:s.action,location:s.location}),n=nt.useCallback(w=>{nt.startTransition(()=>h(w))},[h]);return nt.useLayoutEffect(()=>s.listen(n),[s,n]),nt.createElement(Zte,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:s})}var cq=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dq=nt.forwardRef(function({onClick:e,discover:a="render",prefetch:r="none",relative:s,reloadDocument:l,replace:h,state:n,target:w,to:T,preventScrollReset:E,viewTransition:z,...k},U){let{basename:Z}=nt.useContext(zm),q=typeof T=="string"&&cq.test(T),$,J=!1;if(typeof T=="string"&&q&&($=T,uq))try{let be=new URL(window.location.href),De=T.startsWith("//")?new URL(be.protocol+T):new URL(T),ne=py(De.pathname,Z);De.origin===be.origin&&ne!=null?T=ne+De.search+De.hash:J=!0}catch{zp(!1,`<Link to="${T}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ie=Ete(T,{relative:s}),[de,ge,he]=uae(r,k),Ae=Aae(T,{replace:h,state:n,target:w,preventScrollReset:E,relative:s,viewTransition:z});function me(be){e&&e(be),be.defaultPrevented||Ae(be)}let Re=nt.createElement("a",{...k,...he,href:$||ie,onClick:J||l?e:me,ref:fae(U,ge),target:w,"data-discover":!q&&a==="render"?"true":void 0});return de&&!q?nt.createElement(nt.Fragment,null,Re,nt.createElement(cae,{page:ie})):Re});dq.displayName="Link";var mae=nt.forwardRef(function({"aria-current":e="page",caseSensitive:a=!1,className:r="",end:s=!1,style:l,to:h,viewTransition:n,children:w,...T},E){let z=rT(h,{relative:T.relative}),k=Fg(),U=nt.useContext(x2),{navigator:Z,basename:q}=nt.useContext(zm),$=U!=null&&Tae(z)&&n===!0,J=Z.encodeLocation?Z.encodeLocation(z).pathname:z.pathname,ie=k.pathname,de=U&&U.navigation&&U.navigation.location?U.navigation.location.pathname:null;a||(ie=ie.toLowerCase(),de=de?de.toLowerCase():null,J=J.toLowerCase()),de&&q&&(de=py(de,q)||de);const ge=J!=="/"&&J.endsWith("/")?J.length-1:J.length;let he=ie===J||!s&&ie.startsWith(J)&&ie.charAt(ge)==="/",Ae=de!=null&&(de===J||!s&&de.startsWith(J)&&de.charAt(J.length)==="/"),me={isActive:he,isPending:Ae,isTransitioning:$},Re=he?e:void 0,be;typeof r=="function"?be=r(me):be=[r,he?"active":null,Ae?"pending":null,$?"transitioning":null].filter(Boolean).join(" ");let De=typeof l=="function"?l(me):l;return nt.createElement(dq,{...T,"aria-current":Re,className:be,ref:E,style:De,to:h,viewTransition:n},typeof w=="function"?w(me):w)});mae.displayName="NavLink";var yae=nt.forwardRef(({discover:t="render",fetcherKey:e,navigate:a,reloadDocument:r,replace:s,state:l,method:h=SC,action:n,onSubmit:w,relative:T,preventScrollReset:E,viewTransition:z,...k},U)=>{let Z=wae(),q=Rae(n,{relative:T}),$=h.toLowerCase()==="get"?"get":"post",J=typeof n=="string"&&cq.test(n),ie=de=>{if(w&&w(de),de.defaultPrevented)return;de.preventDefault();let ge=de.nativeEvent.submitter,he=(ge==null?void 0:ge.getAttribute("formmethod"))||h;Z(ge||de.currentTarget,{fetcherKey:e,method:he,navigate:a,replace:s,state:l,relative:T,preventScrollReset:E,viewTransition:z})};return nt.createElement("form",{ref:U,method:$,action:q,onSubmit:r?w:ie,...k,"data-discover":!J&&t==="render"?"true":void 0})});yae.displayName="Form";function gae(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hq(t){let e=nt.useContext(Ov);return dl(e,gae(t)),e}function Aae(t,{target:e,replace:a,state:r,preventScrollReset:s,relative:l,viewTransition:h}={}){let n=t3(),w=Fg(),T=rT(t,{relative:l});return nt.useCallback(E=>{if(Yte(E,e)){E.preventDefault();let z=a!==void 0?a:Jw(w)===Jw(T);n(t,{replace:z,state:r,preventScrollReset:s,relative:l,viewTransition:h})}},[w,n,T,a,r,e,t,s,l,h])}var _ae=0,vae=()=>`__${String(++_ae)}__`;function wae(){let{router:t}=hq("useSubmit"),{basename:e}=nt.useContext(zm),a=kte();return nt.useCallback(async(r,s={})=>{let{action:l,method:h,encType:n,formData:w,body:T}=Qte(r,e);if(s.navigate===!1){let E=s.fetcherKey||vae();await t.fetch(E,a,s.action||l,{preventScrollReset:s.preventScrollReset,formData:w,body:T,formMethod:s.method||h,formEncType:s.encType||n,flushSync:s.flushSync})}else await t.navigate(s.action||l,{preventScrollReset:s.preventScrollReset,formData:w,body:T,formMethod:s.method||h,formEncType:s.encType||n,replace:s.replace,state:s.state,fromRouteId:a,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,a])}function Rae(t,{relative:e}={}){let{basename:a}=nt.useContext(zm),r=nt.useContext(Sy);dl(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),l={...rT(t||".",{relative:e})},h=Fg();if(t==null){l.search=h.search;let n=new URLSearchParams(l.search),w=n.getAll("index");if(w.some(E=>E==="")){n.delete("index"),w.filter(z=>z).forEach(z=>n.append("index",z));let E=n.toString();l.search=E?`?${E}`:""}}return(!t||t===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(l.pathname=l.pathname==="/"?a:cy([a,l.pathname])),Jw(l)}function Tae(t,e={}){let a=nt.useContext(aq);dl(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=hq("useViewTransitionState"),s=rT(t,{relative:e.relative});if(!a.isTransitioning)return!1;let l=py(a.currentLocation.pathname,r)||a.currentLocation.pathname,h=py(a.nextLocation.pathname,r)||a.nextLocation.pathname;return YC(s.pathname,h)!=null||YC(s.pathname,l)!=null}new TextEncoder;var l6={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fq=function(t){const e=[];let a=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[a++]=s:s<2048?(e[a++]=s>>6|192,e[a++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[a++]=s>>18|240,e[a++]=s>>12&63|128,e[a++]=s>>6&63|128,e[a++]=s&63|128):(e[a++]=s>>12|224,e[a++]=s>>6&63|128,e[a++]=s&63|128)}return e},Sae=function(t){const e=[];let a=0,r=0;for(;a<t.length;){const s=t[a++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const l=t[a++];e[r++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=t[a++],h=t[a++],n=t[a++],w=((s&7)<<18|(l&63)<<12|(h&63)<<6|n&63)-65536;e[r++]=String.fromCharCode(55296+(w>>10)),e[r++]=String.fromCharCode(56320+(w&1023))}else{const l=t[a++],h=t[a++];e[r++]=String.fromCharCode((s&15)<<12|(l&63)<<6|h&63)}}return e.join("")},pq={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const a=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const l=t[s],h=s+1<t.length,n=h?t[s+1]:0,w=s+2<t.length,T=w?t[s+2]:0,E=l>>2,z=(l&3)<<4|n>>4;let k=(n&15)<<2|T>>6,U=T&63;w||(U=64,h||(k=64)),r.push(a[E],a[z],a[k],a[U])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fq(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Sae(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const a=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const l=a[t.charAt(s++)],n=s<t.length?a[t.charAt(s)]:0;++s;const T=s<t.length?a[t.charAt(s)]:64;++s;const z=s<t.length?a[t.charAt(s)]:64;if(++s,l==null||n==null||T==null||z==null)throw new Cae;const k=l<<2|n>>4;if(r.push(k),T!==64){const U=n<<4&240|T>>2;if(r.push(U),z!==64){const Z=T<<6&192|z;r.push(Z)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Cae extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bae=function(t){const e=fq(t);return pq.encodeByteArray(e,!0)},XC=function(t){return bae(t).replace(/\./g,"")},mq=function(t){try{return pq.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xae(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pae=()=>xae().__FIREBASE_DEFAULTS__,Eae=()=>{if(typeof process>"u"||typeof l6>"u")return;const t=l6.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Nae=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mq(t[1]);return e&&JSON.parse(e)},s3=()=>{try{return Pae()||Eae()||Nae()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},yq=t=>{var e,a;return(a=(e=s3())===null||e===void 0?void 0:e.emulatorHosts)===null||a===void 0?void 0:a[t]},Vae=t=>{const e=yq(t);if(!e)return;const a=e.lastIndexOf(":");if(a<=0||a+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(a+1),10);return e[0]==="["?[e.substring(1,a-1),r]:[e.substring(0,a),r]},gq=()=>{var t;return(t=s3())===null||t===void 0?void 0:t.config},Aq=t=>{var e;return(e=s3())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,a)=>{this.resolve=e,this.reject=a})}wrapCallback(e){return(a,r)=>{a?this.reject(a):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(a):e(a,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oae(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const a={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},t);return[XC(JSON.stringify(a)),XC(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gd(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Dae(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gd())}function Mae(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Iae(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Lae(){const t=gd();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Fae(){try{return typeof indexedDB=="object"}catch{return!1}}function Uae(){return new Promise((t,e)=>{try{let a=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),a||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{a=!1},s.onerror=()=>{var l;e(((l=s.error)===null||l===void 0?void 0:l.message)||"")}}catch(a){e(a)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kae="FirebaseError";class Cy extends Error{constructor(e,a,r){super(a),this.code=e,this.customData=r,this.name=kae,Object.setPrototypeOf(this,Cy.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nT.prototype.create)}}class nT{constructor(e,a,r){this.service=e,this.serviceName=a,this.errors=r}create(e,...a){const r=a[0]||{},s=`${this.service}/${e}`,l=this.errors[e],h=l?Bae(l,r):"Error",n=`${this.serviceName}: ${h} (${s}).`;return new Cy(s,n,r)}}function Bae(t,e){return t.replace(Gae,(a,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Gae=/\{\$([^}]+)}/g;function jae(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function JC(t,e){if(t===e)return!0;const a=Object.keys(t),r=Object.keys(e);for(const s of a){if(!r.includes(s))return!1;const l=t[s],h=e[s];if(u6(l)&&u6(h)){if(!JC(l,h))return!1}else if(l!==h)return!1}for(const s of r)if(!a.includes(s))return!1;return!0}function u6(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(t){const e=[];for(const[a,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(a)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(a)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Cw(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,l]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(l)}}),e}function bw(t){const e=t.indexOf("?");if(!e)return"";const a=t.indexOf("#",e);return t.substring(e,a>0?a:void 0)}function Zae(t,e){const a=new qae(t,e);return a.subscribe.bind(a)}class qae{constructor(e,a){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=a,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(a=>{a.next(e)})}error(e){this.forEachObserver(a=>{a.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,a,r){let s;if(e===void 0&&a===void 0&&r===void 0)throw new Error("Missing Observer.");Hae(e,["next","error","complete"])?s=e:s={next:e,error:a,complete:r},s.next===void 0&&(s.next=RE),s.error===void 0&&(s.error=RE),s.complete===void 0&&(s.complete=RE);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let a=0;a<this.observers.length;a++)this.sendOne(a,e)}sendOne(e,a){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{a(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Hae(t,e){if(typeof t!="object"||t===null)return!1;for(const a of e)if(a in t&&typeof t[a]=="function")return!0;return!1}function RE(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(t){return t&&t._delegate?t._delegate:t}class n0{constructor(e,a,r){this.name=e,this.instanceFactory=a,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ae{constructor(e,a){this.name=e,this.container=a,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const a=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(a)){const r=new zae;if(this.instancesDeferred.set(a,r),this.isInitialized(a)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:a});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(a).promise}getImmediate(e){var a;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(a=e==null?void 0:e.optional)!==null&&a!==void 0?a:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Wae(e))try{this.getOrInitializeService({instanceIdentifier:LA})}catch{}for(const[a,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(a);try{const l=this.getOrInitializeService({instanceIdentifier:s});r.resolve(l)}catch{}}}}clearInstance(e=LA){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(a=>"INTERNAL"in a).map(a=>a.INTERNAL.delete()),...e.filter(a=>"_delete"in a).map(a=>a._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=LA){return this.instances.has(e)}getOptions(e=LA){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:a={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:a});for(const[l,h]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(l);r===n&&h.resolve(s)}return s}onInit(e,a){var r;const s=this.normalizeInstanceIdentifier(a),l=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(s,l);const h=this.instances.get(s);return h&&e(h,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,a){const r=this.onInitCallbacks.get(a);if(r)for(const s of r)try{s(e,a)}catch{}}getOrInitializeService({instanceIdentifier:e,options:a={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Kae(e),options:a}),this.instances.set(e,r),this.instancesOptions.set(e,a),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=LA){return this.component?this.component.multipleInstances?e:LA:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Kae(t){return t===LA?void 0:t}function Wae(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yae{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const a=this.getProvider(e.name);if(a.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);a.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const a=new $ae(e,this);return this.providers.set(e,a),a}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fs;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(fs||(fs={}));const Xae={debug:fs.DEBUG,verbose:fs.VERBOSE,info:fs.INFO,warn:fs.WARN,error:fs.ERROR,silent:fs.SILENT},Jae=fs.INFO,Qae={[fs.DEBUG]:"log",[fs.VERBOSE]:"log",[fs.INFO]:"info",[fs.WARN]:"warn",[fs.ERROR]:"error"},ere=(t,e,...a)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Qae[e];if(s)console[s](`[${r}]  ${t.name}:`,...a);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class o3{constructor(e){this.name=e,this._logLevel=Jae,this._logHandler=ere,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fs))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Xae[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fs.DEBUG,...e),this._logHandler(this,fs.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fs.VERBOSE,...e),this._logHandler(this,fs.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fs.INFO,...e),this._logHandler(this,fs.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fs.WARN,...e),this._logHandler(this,fs.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fs.ERROR,...e),this._logHandler(this,fs.ERROR,...e)}}const tre=(t,e)=>e.some(a=>t instanceof a);let c6,d6;function are(){return c6||(c6=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rre(){return d6||(d6=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _q=new WeakMap,P5=new WeakMap,vq=new WeakMap,TE=new WeakMap,l3=new WeakMap;function nre(t){const e=new Promise((a,r)=>{const s=()=>{t.removeEventListener("success",l),t.removeEventListener("error",h)},l=()=>{a(bg(t.result)),s()},h=()=>{r(t.error),s()};t.addEventListener("success",l),t.addEventListener("error",h)});return e.then(a=>{a instanceof IDBCursor&&_q.set(a,t)}).catch(()=>{}),l3.set(e,t),e}function ire(t){if(P5.has(t))return;const e=new Promise((a,r)=>{const s=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",h),t.removeEventListener("abort",h)},l=()=>{a(),s()},h=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",l),t.addEventListener("error",h),t.addEventListener("abort",h)});P5.set(t,e)}let E5={get(t,e,a){if(t instanceof IDBTransaction){if(e==="done")return P5.get(t);if(e==="objectStoreNames")return t.objectStoreNames||vq.get(t);if(e==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return bg(t[e])},set(t,e,a){return t[e]=a,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function sre(t){E5=t(E5)}function ore(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...a){const r=t.call(SE(this),e,...a);return vq.set(r,e.sort?e.sort():[e]),bg(r)}:rre().includes(t)?function(...e){return t.apply(SE(this),e),bg(_q.get(this))}:function(...e){return bg(t.apply(SE(this),e))}}function lre(t){return typeof t=="function"?ore(t):(t instanceof IDBTransaction&&ire(t),tre(t,are())?new Proxy(t,E5):t)}function bg(t){if(t instanceof IDBRequest)return nre(t);if(TE.has(t))return TE.get(t);const e=lre(t);return e!==t&&(TE.set(t,e),l3.set(e,t)),e}const SE=t=>l3.get(t);function ure(t,e,{blocked:a,upgrade:r,blocking:s,terminated:l}={}){const h=indexedDB.open(t,e),n=bg(h);return r&&h.addEventListener("upgradeneeded",w=>{r(bg(h.result),w.oldVersion,w.newVersion,bg(h.transaction),w)}),a&&h.addEventListener("blocked",w=>a(w.oldVersion,w.newVersion,w)),n.then(w=>{l&&w.addEventListener("close",()=>l()),s&&w.addEventListener("versionchange",T=>s(T.oldVersion,T.newVersion,T))}).catch(()=>{}),n}const cre=["get","getKey","getAll","getAllKeys","count"],dre=["put","add","delete","clear"],CE=new Map;function h6(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(CE.get(e))return CE.get(e);const a=e.replace(/FromIndex$/,""),r=e!==a,s=dre.includes(a);if(!(a in(r?IDBIndex:IDBObjectStore).prototype)||!(s||cre.includes(a)))return;const l=async function(h,...n){const w=this.transaction(h,s?"readwrite":"readonly");let T=w.store;return r&&(T=T.index(n.shift())),(await Promise.all([T[a](...n),s&&w.done]))[0]};return CE.set(e,l),l}sre(t=>({...t,get:(e,a,r)=>h6(e,a)||t.get(e,a,r),has:(e,a)=>!!h6(e,a)||t.has(e,a)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hre{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(a=>{if(fre(a)){const r=a.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(a=>a).join(" ")}}function fre(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const N5="@firebase/app",f6="0.9.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=new o3("@firebase/app"),pre="@firebase/app-compat",mre="@firebase/analytics-compat",yre="@firebase/analytics",gre="@firebase/app-check-compat",Are="@firebase/app-check",_re="@firebase/auth",vre="@firebase/auth-compat",wre="@firebase/database",Rre="@firebase/database-compat",Tre="@firebase/functions",Sre="@firebase/functions-compat",Cre="@firebase/installations",bre="@firebase/installations-compat",xre="@firebase/messaging",Pre="@firebase/messaging-compat",Ere="@firebase/performance",Nre="@firebase/performance-compat",Vre="@firebase/remote-config",zre="@firebase/remote-config-compat",Ore="@firebase/storage",Dre="@firebase/storage-compat",Mre="@firebase/firestore",Ire="@firebase/firestore-compat",Lre="firebase",Fre="9.23.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5="[DEFAULT]",Ure={[N5]:"fire-core",[pre]:"fire-core-compat",[yre]:"fire-analytics",[mre]:"fire-analytics-compat",[Are]:"fire-app-check",[gre]:"fire-app-check-compat",[_re]:"fire-auth",[vre]:"fire-auth-compat",[wre]:"fire-rtdb",[Rre]:"fire-rtdb-compat",[Tre]:"fire-fn",[Sre]:"fire-fn-compat",[Cre]:"fire-iid",[bre]:"fire-iid-compat",[xre]:"fire-fcm",[Pre]:"fire-fcm-compat",[Ere]:"fire-perf",[Nre]:"fire-perf-compat",[Vre]:"fire-rc",[zre]:"fire-rc-compat",[Ore]:"fire-gcs",[Dre]:"fire-gcs-compat",[Mre]:"fire-fst",[Ire]:"fire-fst-compat","fire-js":"fire-js",[Lre]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=new Map,z5=new Map;function kre(t,e){try{t.container.addComponent(e)}catch(a){i0.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,a)}}function $_(t){const e=t.name;if(z5.has(e))return i0.debug(`There were multiple attempts to register component ${e}.`),!1;z5.set(e,t);for(const a of QC.values())kre(a,t);return!0}function u3(t,e){const a=t.container.getProvider("heartbeat").getImmediate({optional:!0});return a&&a.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bre={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},xg=new nT("app","Firebase",Bre);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gre{constructor(e,a,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},a),this._name=a.name,this._automaticDataCollectionEnabled=a.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new n0("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xg.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv=Fre;function wq(t,e={}){let a=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:V5,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw xg.create("bad-app-name",{appName:String(s)});if(a||(a=gq()),!a)throw xg.create("no-options");const l=QC.get(s);if(l){if(JC(a,l.options)&&JC(r,l.config))return l;throw xg.create("duplicate-app",{appName:s})}const h=new Yae(s);for(const w of z5.values())h.addComponent(w);const n=new Gre(a,r,h);return QC.set(s,n),n}function Rq(t=V5){const e=QC.get(t);if(!e&&t===V5&&gq())return wq();if(!e)throw xg.create("no-app",{appName:t});return e}function Pg(t,e,a){var r;let s=(r=Ure[t])!==null&&r!==void 0?r:t;a&&(s+=`-${a}`);const l=s.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const n=[`Unable to register library "${s}" with version "${e}":`];l&&n.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&h&&n.push("and"),h&&n.push(`version name "${e}" contains illegal characters (whitespace or "/")`),i0.warn(n.join(" "));return}$_(new n0(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jre="firebase-heartbeat-database",Zre=1,Qw="firebase-heartbeat-store";let bE=null;function Tq(){return bE||(bE=ure(jre,Zre,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Qw)}}}).catch(t=>{throw xg.create("idb-open",{originalErrorMessage:t.message})})),bE}async function qre(t){try{return await(await Tq()).transaction(Qw).objectStore(Qw).get(Sq(t))}catch(e){if(e instanceof Cy)i0.warn(e.message);else{const a=xg.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});i0.warn(a.message)}}}async function p6(t,e){try{const r=(await Tq()).transaction(Qw,"readwrite");await r.objectStore(Qw).put(e,Sq(t)),await r.done}catch(a){if(a instanceof Cy)i0.warn(a.message);else{const r=xg.create("idb-set",{originalErrorMessage:a==null?void 0:a.message});i0.warn(r.message)}}}function Sq(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hre=1024,$re=30*24*60*60*1e3;class Kre{constructor(e){this.container=e,this._heartbeatsCache=null;const a=this.container.getProvider("app").getImmediate();this._storage=new Yre(a),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=m6();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const l=new Date(s.date).valueOf();return Date.now()-l<=$re}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=m6(),{heartbeatsToSend:a,unsentEntries:r}=Wre(this._heartbeatsCache.heartbeats),s=XC(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function m6(){return new Date().toISOString().substring(0,10)}function Wre(t,e=Hre){const a=[];let r=t.slice();for(const s of t){const l=a.find(h=>h.agent===s.agent);if(l){if(l.dates.push(s.date),y6(a)>e){l.dates.pop();break}}else if(a.push({agent:s.agent,dates:[s.date]}),y6(a)>e){a.pop();break}r=r.slice(1)}return{heartbeatsToSend:a,unsentEntries:r}}class Yre{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Fae()?Uae().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await qre(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var a;if(await this._canUseIndexedDBPromise){const s=await this.read();return p6(this.app,{lastSentHeartbeatDate:(a=e.lastSentHeartbeatDate)!==null&&a!==void 0?a:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var a;if(await this._canUseIndexedDBPromise){const s=await this.read();return p6(this.app,{lastSentHeartbeatDate:(a=e.lastSentHeartbeatDate)!==null&&a!==void 0?a:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function y6(t){return XC(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xre(t){$_(new n0("platform-logger",e=>new hre(e),"PRIVATE")),$_(new n0("heartbeat",e=>new Kre(e),"PRIVATE")),Pg(N5,f6,t),Pg(N5,f6,"esm2017"),Pg("fire-js","")}Xre("");var Jre="firebase",Qre="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pg(Jre,Qre,"app");function c3(t,e){var a={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(a[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(a[r[s]]=t[r[s]]);return a}function Cq(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ene=Cq,bq=new nT("auth","Firebase",Cq());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=new o3("@firebase/auth");function tne(t,...e){eb.logLevel<=fs.WARN&&eb.warn(`Auth (${Dv}): ${t}`,...e)}function bC(t,...e){eb.logLevel<=fs.ERROR&&eb.error(`Auth (${Dv}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(t,...e){throw d3(t,...e)}function Tm(t,...e){return d3(t,...e)}function ane(t,e,a){const r=Object.assign(Object.assign({},ene()),{[e]:a});return new nT("auth","Firebase",r).create(e,{appName:t.name})}function d3(t,...e){if(typeof t!="string"){const a=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(a,...r)}return bq.create(t,...e)}function ei(t,e,...a){if(!t)throw d3(e,...a)}function ny(t){const e="INTERNAL ASSERTION FAILED: "+t;throw bC(e),new Error(e)}function my(t,e){t||ny(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function rne(){return g6()==="http:"||g6()==="https:"}function g6(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nne(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rne()||Mae()||"connection"in navigator)?navigator.onLine:!0}function ine(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,a){this.shortDelay=e,this.longDelay=a,my(a>e,"Short delay should be less than long delay!"),this.isMobile=Dae()||Iae()}get(){return nne()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h3(t,e){my(t.emulator,"Emulator should always be set here");const{url:a}=t.emulator;return e?`${a}${e.startsWith("/")?e.slice(1):e}`:a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xq{static initialize(e,a,r){this.fetchImpl=e,a&&(this.headersImpl=a),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;ny("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;ny("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;ny("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sne={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const one=new sT(3e4,6e4);function oT(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Mv(t,e,a,r,s={}){return Pq(t,s,async()=>{let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});const n=iT(Object.assign({key:t.config.apiKey},h)).slice(1),w=await t._getAdditionalHeaders();return w["Content-Type"]="application/json",t.languageCode&&(w["X-Firebase-Locale"]=t.languageCode),xq.fetch()(Eq(t,t.config.apiHost,a,n),Object.assign({method:e,headers:w,referrerPolicy:"no-referrer"},l))})}async function Pq(t,e,a){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},sne),e);try{const s=new lne(t),l=await Promise.race([a(),s.promise]);s.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw WS(t,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const n=l.ok?h.errorMessage:h.error.message,[w,T]=n.split(" : ");if(w==="FEDERATED_USER_ID_ALREADY_LINKED")throw WS(t,"credential-already-in-use",h);if(w==="EMAIL_EXISTS")throw WS(t,"email-already-in-use",h);if(w==="USER_DISABLED")throw WS(t,"user-disabled",h);const E=r[w]||w.toLowerCase().replace(/[_\s]+/g,"-");if(T)throw ane(t,E,T);Op(t,E)}}catch(s){if(s instanceof Cy)throw s;Op(t,"network-request-failed",{message:String(s)})}}async function E2(t,e,a,r,s={}){const l=await Mv(t,e,a,r,s);return"mfaPendingCredential"in l&&Op(t,"multi-factor-auth-required",{_serverResponse:l}),l}function Eq(t,e,a,r){const s=`${e}${a}?${r}`;return t.config.emulator?h3(t.config,s):`${t.config.apiScheme}://${s}`}class lne{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((a,r)=>{this.timer=setTimeout(()=>r(Tm(this.auth,"network-request-failed")),one.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function WS(t,e,a){const r={appName:t.name};a.email&&(r.email=a.email),a.phoneNumber&&(r.phoneNumber=a.phoneNumber);const s=Tm(t,e,r);return s.customData._tokenResponse=a,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function une(t,e){return Mv(t,"POST","/v1/accounts:delete",e)}async function cne(t,e){return Mv(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dne(t,e=!1){const a=Iu(t),r=await a.getIdToken(e),s=f3(r);ei(s&&s.exp&&s.auth_time&&s.iat,a.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:s,token:r,authTime:Iw(xE(s.auth_time)),issuedAtTime:Iw(xE(s.iat)),expirationTime:Iw(xE(s.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function xE(t){return Number(t)*1e3}function f3(t){const[e,a,r]=t.split(".");if(e===void 0||a===void 0||r===void 0)return bC("JWT malformed, contained fewer than 3 sections"),null;try{const s=mq(a);return s?JSON.parse(s):(bC("Failed to decode base64 JWT payload"),null)}catch(s){return bC("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function hne(t){const e=f3(t);return ei(e,"internal-error"),ei(typeof e.exp<"u","internal-error"),ei(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eR(t,e,a=!1){if(a)return e;try{return await e}catch(r){throw r instanceof Cy&&fne(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function fne({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pne{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var a;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((a=this.user.stsTokenManager.expirationTime)!==null&&a!==void 0?a:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const a=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},a)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nq{constructor(e,a){this.createdAt=e,this.lastLoginAt=a,this._initializeTime()}_initializeTime(){this.lastSignInTime=Iw(this.lastLoginAt),this.creationTime=Iw(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tb(t){var e;const a=t.auth,r=await t.getIdToken(),s=await eR(t,cne(a,{idToken:r}));ei(s==null?void 0:s.users.length,a,"internal-error");const l=s.users[0];t._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?gne(l.providerUserInfo):[],n=yne(t.providerData,h),w=t.isAnonymous,T=!(t.email&&l.passwordHash)&&!(n!=null&&n.length),E=w?T:!1,z={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:n,metadata:new Nq(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(t,z)}async function mne(t){const e=Iu(t);await tb(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yne(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function gne(t){return t.map(e=>{var{providerId:a}=e,r=c3(e,["providerId"]);return{providerId:a,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ane(t,e){const a=await Pq(t,{},async()=>{const r=iT({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=t.config,h=Eq(t,s,"/v1/token",`key=${l}`),n=await t._getAdditionalHeaders();return n["Content-Type"]="application/x-www-form-urlencoded",xq.fetch()(h,{method:"POST",headers:n,body:r})});return{accessToken:a.access_token,expiresIn:a.expires_in,refreshToken:a.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ei(e.idToken,"internal-error"),ei(typeof e.idToken<"u","internal-error"),ei(typeof e.refreshToken<"u","internal-error");const a="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hne(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,a)}async getToken(e,a=!1){return ei(!this.accessToken||this.refreshToken,e,"user-token-expired"),!a&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,a){const{accessToken:r,refreshToken:s,expiresIn:l}=await Ane(e,a);this.updateTokensAndExpiration(r,s,Number(l))}updateTokensAndExpiration(e,a,r){this.refreshToken=a||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,a){const{refreshToken:r,accessToken:s,expirationTime:l}=a,h=new tR;return r&&(ei(typeof r=="string","internal-error",{appName:e}),h.refreshToken=r),s&&(ei(typeof s=="string","internal-error",{appName:e}),h.accessToken=s),l&&(ei(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new tR,this.toJSON())}_performRefresh(){return ny("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(t,e){ei(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class JA{constructor(e){var{uid:a,auth:r,stsTokenManager:s}=e,l=c3(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pne(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=a,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Nq(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const a=await eR(this,this.stsTokenManager.getToken(this.auth,e));return ei(a,this.auth,"internal-error"),this.accessToken!==a&&(this.accessToken=a,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),a}getIdTokenResult(e){return dne(this,e)}reload(){return mne(this)}_assign(e){this!==e&&(ei(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(a=>Object.assign({},a)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const a=new JA(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return a.metadata._copy(this.metadata),a}_onReload(e){ei(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,a=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),a&&await tb(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await eR(this,une(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,a){var r,s,l,h,n,w,T,E;const z=(r=a.displayName)!==null&&r!==void 0?r:void 0,k=(s=a.email)!==null&&s!==void 0?s:void 0,U=(l=a.phoneNumber)!==null&&l!==void 0?l:void 0,Z=(h=a.photoURL)!==null&&h!==void 0?h:void 0,q=(n=a.tenantId)!==null&&n!==void 0?n:void 0,$=(w=a._redirectEventId)!==null&&w!==void 0?w:void 0,J=(T=a.createdAt)!==null&&T!==void 0?T:void 0,ie=(E=a.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:de,emailVerified:ge,isAnonymous:he,providerData:Ae,stsTokenManager:me}=a;ei(de&&me,e,"internal-error");const Re=tR.fromJSON(this.name,me);ei(typeof de=="string",e,"internal-error"),ug(z,e.name),ug(k,e.name),ei(typeof ge=="boolean",e,"internal-error"),ei(typeof he=="boolean",e,"internal-error"),ug(U,e.name),ug(Z,e.name),ug(q,e.name),ug($,e.name),ug(J,e.name),ug(ie,e.name);const be=new JA({uid:de,auth:e,email:k,emailVerified:ge,displayName:z,isAnonymous:he,photoURL:Z,phoneNumber:U,tenantId:q,stsTokenManager:Re,createdAt:J,lastLoginAt:ie});return Ae&&Array.isArray(Ae)&&(be.providerData=Ae.map(De=>Object.assign({},De))),$&&(be._redirectEventId=$),be}static async _fromIdTokenResponse(e,a,r=!1){const s=new tR;s.updateFromServerResponse(a);const l=new JA({uid:a.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await tb(l),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A6=new Map;function iy(t){my(t instanceof Function,"Expected a class definition");let e=A6.get(t);return e?(my(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,A6.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vq{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,a){this.storage[e]=a}async _get(e){const a=this.storage[e];return a===void 0?null:a}async _remove(e){delete this.storage[e]}_addListener(e,a){}_removeListener(e,a){}}Vq.type="NONE";const _6=Vq;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(t,e,a){return`firebase:${t}:${e}:${a}`}class O_{constructor(e,a,r){this.persistence=e,this.auth=a,this.userKey=r;const{config:s,name:l}=this.auth;this.fullUserKey=xC(this.userKey,s.apiKey,l),this.fullPersistenceKey=xC("persistence",s.apiKey,l),this.boundEventHandler=a._onStorageEvent.bind(a),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?JA._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const a=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,a)return this.setCurrentUser(a)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,a,r="authUser"){if(!a.length)return new O_(iy(_6),e,r);const s=(await Promise.all(a.map(async T=>{if(await T._isAvailable())return T}))).filter(T=>T);let l=s[0]||iy(_6);const h=xC(r,e.config.apiKey,e.name);let n=null;for(const T of a)try{const E=await T._get(h);if(E){const z=JA._fromJSON(e,E);T!==l&&(n=z),l=T;break}}catch{}const w=s.filter(T=>T._shouldAllowMigration);return!l._shouldAllowMigration||!w.length?new O_(l,e,r):(l=w[0],n&&await l._set(h,n.toJSON()),await Promise.all(a.map(async T=>{if(T!==l)try{await T._remove(h)}catch{}})),new O_(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v6(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Dq(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zq(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Iq(e))return"Blackberry";if(Lq(e))return"Webos";if(p3(e))return"Safari";if((e.includes("chrome/")||Oq(e))&&!e.includes("edge/"))return"Chrome";if(Mq(e))return"Android";{const a=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(a);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function zq(t=gd()){return/firefox\//i.test(t)}function p3(t=gd()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Oq(t=gd()){return/crios\//i.test(t)}function Dq(t=gd()){return/iemobile/i.test(t)}function Mq(t=gd()){return/android/i.test(t)}function Iq(t=gd()){return/blackberry/i.test(t)}function Lq(t=gd()){return/webos/i.test(t)}function N2(t=gd()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _ne(t=gd()){var e;return N2(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function vne(){return Lae()&&document.documentMode===10}function Fq(t=gd()){return N2(t)||Mq(t)||Lq(t)||Iq(t)||/windows phone/i.test(t)||Dq(t)}function wne(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uq(t,e=[]){let a;switch(t){case"Browser":a=v6(gd());break;case"Worker":a=`${v6(gd())}-${t}`;break;default:a=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${a}/JsCore/${Dv}/${r}`}async function kq(t,e){return Mv(t,"GET","/v2/recaptchaConfig",oT(t,e))}function w6(t){return t!==void 0&&t.enterprise!==void 0}class Bq{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(a=>a.provider==="EMAIL_PASSWORD_PROVIDER"&&a.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rne(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function Gq(t){return new Promise((e,a)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const l=Tm("internal-error");l.customData=s,a(l)},r.type="text/javascript",r.charset="UTF-8",Rne().appendChild(r)})}function Tne(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Sne="https://www.google.com/recaptcha/enterprise.js?render=",Cne="recaptcha-enterprise",bne="NO_RECAPTCHA";class jq{constructor(e){this.type=Cne,this.auth=lT(e)}async verify(e="verify",a=!1){async function r(l){if(!a){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,n)=>{kq(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(w=>{if(w.recaptchaKey===void 0)n(new Error("recaptcha Enterprise site key undefined"));else{const T=new Bq(w);return l.tenantId==null?l._agentRecaptchaConfig=T:l._tenantRecaptchaConfigs[l.tenantId]=T,h(T.siteKey)}}).catch(w=>{n(w)})})}function s(l,h,n){const w=window.grecaptcha;w6(w)?w.enterprise.ready(()=>{w.enterprise.execute(l,{action:e}).then(T=>{h(T)}).catch(()=>{h(bne)})}):n(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((l,h)=>{r(this.auth).then(n=>{if(!a&&w6(window.grecaptcha))s(n,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}Gq(Sne+n).then(()=>{s(n,l,h)}).catch(w=>{h(w)})}}).catch(n=>{h(n)})})}}async function R6(t,e,a,r=!1){const s=new jq(t);let l;try{l=await s.verify(a)}catch{l=await s.verify(a,!0)}const h=Object.assign({},e);return r?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xne{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,a){const r=l=>new Promise((h,n)=>{try{const w=e(l);h(w)}catch(w){n(w)}});r.onAbort=a,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const a=[];try{for(const r of this.queue)await r(e),r.onAbort&&a.push(r.onAbort)}catch(r){a.reverse();for(const s of a)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pne{constructor(e,a,r,s){this.app=e,this.heartbeatServiceProvider=a,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new T6(this),this.idTokenSubscription=new T6(this),this.beforeStateQueue=new xne(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bq,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,a){return a&&(this._popupRedirectResolver=iy(a)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await O_.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(a),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var a;const r=await this.assertedPersistence.getCurrentUser();let s=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId,n=s==null?void 0:s._redirectEventId,w=await this.tryRedirectSignIn(e);(!h||h===n)&&(w!=null&&w.user)&&(s=w.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(h){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ei(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let a=null;try{a=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return a}async reloadAndSetCurrentUserOrClear(e){try{await tb(e)}catch(a){if((a==null?void 0:a.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ine()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const a=e?Iu(e):null;return a&&ei(a.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(a&&a._clone(this))}async _updateCurrentUser(e,a=!1){if(!this._deleted)return e&&ei(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),a||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(iy(e))})}async initializeRecaptchaConfig(){const e=await kq(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),a=new Bq(e);this.tenantId==null?this._agentRecaptchaConfig=a:this._tenantRecaptchaConfigs[this.tenantId]=a,a.emailPasswordEnabled&&new jq(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new nT("auth","Firebase",e())}onAuthStateChanged(e,a,r){return this.registerStateListener(this.authStateSubscription,e,a,r)}beforeAuthStateChanged(e,a){return this.beforeStateQueue.pushCallback(e,a)}onIdTokenChanged(e,a,r){return this.registerStateListener(this.idTokenSubscription,e,a,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,a){const r=await this.getOrInitRedirectPersistenceManager(a);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const a=e&&iy(e)||this._popupRedirectResolver;ei(a,this,"argument-error"),this.redirectPersistenceManager=await O_.create(this,[iy(a._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var a,r;return this._isInitialized&&await this.queue(async()=>{}),((a=this._currentUser)===null||a===void 0?void 0:a._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,a;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(a=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&a!==void 0?a:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,a,r,s){if(this._deleted)return()=>{};const l=typeof a=="function"?a:a.next.bind(a),h=this._isInitialized?Promise.resolve():this._initializationPromise;return ei(h,this,"internal-error"),h.then(()=>l(this.currentUser)),typeof a=="function"?e.addObserver(a,r,s):e.addObserver(a)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ei(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Uq(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const a={"X-Client-Version":this.clientVersion};this.app.options.appId&&(a["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(a["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(a["X-Firebase-AppCheck"]=s),a}async _getAppCheckToken(){var e;const a=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return a!=null&&a.error&&tne(`Error while retrieving App Check token: ${a.error}`),a==null?void 0:a.token}}function lT(t){return Iu(t)}class T6{constructor(e){this.auth=e,this.observer=null,this.addObserver=Zae(a=>this.observer=a)}get next(){return ei(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ene(t,e){const a=u3(t,"auth");if(a.isInitialized()){const s=a.getImmediate(),l=a.getOptions();if(JC(l,e??{}))return s;Op(s,"already-initialized")}return a.initialize({options:e})}function Nne(t,e){const a=(e==null?void 0:e.persistence)||[],r=(Array.isArray(a)?a:[a]).map(iy);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Vne(t,e,a){const r=lT(t);ei(r._canInitEmulator,r,"emulator-config-failed"),ei(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,l=Zq(e),{host:h,port:n}=zne(e),w=n===null?"":`:${n}`;r.config.emulator={url:`${l}//${h}${w}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:h,port:n,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})}),One()}function Zq(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function zne(t){const e=Zq(t),a=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!a)return{host:"",port:null};const r=a[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const l=s[1];return{host:l,port:S6(r.substr(l.length+1))}}else{const[l,h]=r.split(":");return{host:l,port:S6(h)}}}function S6(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function One(){function t(){const e=document.createElement("p"),a=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",a.position="fixed",a.width="100%",a.backgroundColor="#ffffff",a.border=".1em solid #000000",a.color="#b50000",a.bottom="0px",a.left="0px",a.margin="0px",a.zIndex="10000",a.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(e,a){this.providerId=e,this.signInMethod=a}toJSON(){return ny("not implemented")}_getIdTokenResponse(e){return ny("not implemented")}_linkToIdToken(e,a){return ny("not implemented")}_getReauthenticationResolver(e){return ny("not implemented")}}async function Dne(t,e){return Mv(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PE(t,e){return E2(t,"POST","/v1/accounts:signInWithPassword",oT(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mne(t,e){return E2(t,"POST","/v1/accounts:signInWithEmailLink",oT(t,e))}async function Ine(t,e){return E2(t,"POST","/v1/accounts:signInWithEmailLink",oT(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR extends m3{constructor(e,a,r,s=null){super("password",r),this._email=e,this._password=a,this._tenantId=s}static _fromEmailAndPassword(e,a){return new aR(e,a,"password")}static _fromEmailAndCode(e,a,r=null){return new aR(e,a,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const a=typeof e=="string"?JSON.parse(e):e;if(a!=null&&a.email&&(a!=null&&a.password)){if(a.signInMethod==="password")return this._fromEmailAndPassword(a.email,a.password);if(a.signInMethod==="emailLink")return this._fromEmailAndCode(a.email,a.password,a.tenantId)}return null}async _getIdTokenResponse(e){var a;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((a=e._getRecaptchaConfig())===null||a===void 0)&&a.emailPasswordEnabled){const s=await R6(e,r,"signInWithPassword");return PE(e,s)}else return PE(e,r).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const l=await R6(e,r,"signInWithPassword");return PE(e,l)}else return Promise.reject(s)});case"emailLink":return Mne(e,{email:this._email,oobCode:this._password});default:Op(e,"internal-error")}}async _linkToIdToken(e,a){switch(this.signInMethod){case"password":return Dne(e,{idToken:a,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Ine(e,{idToken:a,email:this._email,oobCode:this._password});default:Op(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D_(t,e){return E2(t,"POST","/v1/accounts:signInWithIdp",oT(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lne="http://localhost";class s0 extends m3{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const a=new s0(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(a.idToken=e.idToken),e.accessToken&&(a.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(a.nonce=e.nonce),e.pendingToken&&(a.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(a.accessToken=e.oauthToken,a.secret=e.oauthTokenSecret):Op("argument-error"),a}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const a=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=a,l=c3(a,["providerId","signInMethod"]);if(!r||!s)return null;const h=new s0(r,s);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const a=this.buildRequest();return D_(e,a)}_linkToIdToken(e,a){const r=this.buildRequest();return r.idToken=a,D_(e,r)}_getReauthenticationResolver(e){const a=this.buildRequest();return a.autoCreate=!1,D_(e,a)}buildRequest(){const e={requestUri:Lne,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const a={};this.idToken&&(a.id_token=this.idToken),this.accessToken&&(a.access_token=this.accessToken),this.secret&&(a.oauth_token_secret=this.secret),a.providerId=this.providerId,this.nonce&&!this.pendingToken&&(a.nonce=this.nonce),e.postBody=iT(a)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fne(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Une(t){const e=Cw(bw(t)).link,a=e?Cw(bw(e)).deep_link_id:null,r=Cw(bw(t)).deep_link_id;return(r?Cw(bw(r)).link:null)||r||a||e||t}class y3{constructor(e){var a,r,s,l,h,n;const w=Cw(bw(e)),T=(a=w.apiKey)!==null&&a!==void 0?a:null,E=(r=w.oobCode)!==null&&r!==void 0?r:null,z=Fne((s=w.mode)!==null&&s!==void 0?s:null);ei(T&&E&&z,"argument-error"),this.apiKey=T,this.operation=z,this.code=E,this.continueUrl=(l=w.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=w.languageCode)!==null&&h!==void 0?h:null,this.tenantId=(n=w.tenantId)!==null&&n!==void 0?n:null}static parseLink(e){const a=Une(e);try{return new y3(a)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(){this.providerId=Iv.PROVIDER_ID}static credential(e,a){return aR._fromEmailAndPassword(e,a)}static credentialWithLink(e,a){const r=y3.parseLink(a);return ei(r,"argument-error"),aR._fromEmailAndCode(e,r.code,r.tenantId)}}Iv.PROVIDER_ID="password";Iv.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Iv.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qq{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT extends qq{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg extends uT{constructor(){super("facebook.com")}static credential(e){return s0._fromParams({providerId:yg.PROVIDER_ID,signInMethod:yg.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yg.credentialFromTaggedObject(e)}static credentialFromError(e){return yg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yg.credential(e.oauthAccessToken)}catch{return null}}}yg.FACEBOOK_SIGN_IN_METHOD="facebook.com";yg.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg extends uT{constructor(){super("google.com"),this.addScope("profile")}static credential(e,a){return s0._fromParams({providerId:gg.PROVIDER_ID,signInMethod:gg.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:a})}static credentialFromResult(e){return gg.credentialFromTaggedObject(e)}static credentialFromError(e){return gg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:a,oauthAccessToken:r}=e;if(!a&&!r)return null;try{return gg.credential(a,r)}catch{return null}}}gg.GOOGLE_SIGN_IN_METHOD="google.com";gg.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag extends uT{constructor(){super("github.com")}static credential(e){return s0._fromParams({providerId:Ag.PROVIDER_ID,signInMethod:Ag.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ag.credentialFromTaggedObject(e)}static credentialFromError(e){return Ag.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ag.credential(e.oauthAccessToken)}catch{return null}}}Ag.GITHUB_SIGN_IN_METHOD="github.com";Ag.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g extends uT{constructor(){super("twitter.com")}static credential(e,a){return s0._fromParams({providerId:_g.PROVIDER_ID,signInMethod:_g.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:a})}static credentialFromResult(e){return _g.credentialFromTaggedObject(e)}static credentialFromError(e){return _g.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:a,oauthTokenSecret:r}=e;if(!a||!r)return null;try{return _g.credential(a,r)}catch{return null}}}_g.TWITTER_SIGN_IN_METHOD="twitter.com";_g.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,a,r,s=!1){const l=await JA._fromIdTokenResponse(e,r,s),h=C6(r);return new K_({user:l,providerId:h,_tokenResponse:r,operationType:a})}static async _forOperation(e,a,r){await e._updateTokensIfNecessary(r,!0);const s=C6(r);return new K_({user:e,providerId:s,_tokenResponse:r,operationType:a})}}function C6(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab extends Cy{constructor(e,a,r,s){var l;super(a.code,a.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,ab.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:a.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,a,r,s){return new ab(e,a,r,s)}}function Hq(t,e,a,r){return(e==="reauthenticate"?a._getReauthenticationResolver(t):a._getIdTokenResponse(t)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?ab._fromErrorAndOperation(t,l,e,r):l})}async function kne(t,e,a=!1){const r=await eR(t,e._linkToIdToken(t.auth,await t.getIdToken()),a);return K_._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bne(t,e,a=!1){const{auth:r}=t,s="reauthenticate";try{const l=await eR(t,Hq(r,s,e,t),a);ei(l.idToken,r,"internal-error");const h=f3(l.idToken);ei(h,r,"internal-error");const{sub:n}=h;return ei(t.uid===n,r,"user-mismatch"),K_._forOperation(t,s,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Op(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $q(t,e,a=!1){const r="signIn",s=await Hq(t,r,e),l=await K_._fromIdTokenResponse(t,r,s);return a||await t._updateCurrentUser(l.user),l}async function Gne(t,e){return $q(lT(t),e)}function jne(t,e,a){return Gne(Iu(t),Iv.credential(e,a))}function Zne(t,e,a,r){return Iu(t).onIdTokenChanged(e,a,r)}function qne(t,e,a){return Iu(t).beforeAuthStateChanged(e,a)}const rb="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kq{constructor(e,a){this.storageRetriever=e,this.type=a}_isAvailable(){try{return this.storage?(this.storage.setItem(rb,"1"),this.storage.removeItem(rb),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,a){return this.storage.setItem(e,JSON.stringify(a)),Promise.resolve()}_get(e){const a=this.storage.getItem(e);return Promise.resolve(a?JSON.parse(a):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hne(){const t=gd();return p3(t)||N2(t)}const $ne=1e3,Kne=10;class Wq extends Kq{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,a)=>this.onStorageEvent(e,a),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Hne()&&wne(),this.fallbackToPolling=Fq(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const a of Object.keys(this.listeners)){const r=this.storage.getItem(a),s=this.localCache[a];r!==s&&e(a,s,r)}}onStorageEvent(e,a=!1){if(!e.key){this.forAllChangedKeys((h,n,w)=>{this.notifyListeners(h,w)});return}const r=e.key;if(a?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const h=this.storage.getItem(r);if(e.newValue!==h)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!a)return}const s=()=>{const h=this.storage.getItem(r);!a&&this.localCache[r]===h||this.notifyListeners(r,h)},l=this.storage.getItem(r);vne()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Kne):s()}notifyListeners(e,a){this.localCache[e]=a;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(a&&JSON.parse(a))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,a,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:a,newValue:r}),!0)})},$ne)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,a){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(a)}_removeListener(e,a){this.listeners[e]&&(this.listeners[e].delete(a),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,a){await super._set(e,a),this.localCache[e]=JSON.stringify(a)}async _get(e){const a=await super._get(e);return this.localCache[e]=JSON.stringify(a),a}async _remove(e){await super._remove(e),delete this.localCache[e]}}Wq.type="LOCAL";const Wne=Wq;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yq extends Kq{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,a){}_removeListener(e,a){}}Yq.type="SESSION";const Xq=Yq;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yne(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(a){return{fulfilled:!1,reason:a}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const a=this.receivers.find(s=>s.isListeningto(e));if(a)return a;const r=new V2(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const a=e,{eventId:r,eventType:s,data:l}=a.data,h=this.handlersMap[s];if(!(h!=null&&h.size))return;a.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const n=Array.from(h).map(async T=>T(a.origin,l)),w=await Yne(n);a.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:w})}_subscribe(e,a){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(a)}_unsubscribe(e,a){this.handlersMap[e]&&a&&this.handlersMap[e].delete(a),(!a||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}V2.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g3(t="",e=10){let a="";for(let r=0;r<e;r++)a+=Math.floor(Math.random()*10);return t+a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xne{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,a,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,h;return new Promise((n,w)=>{const T=g3("",20);s.port1.start();const E=setTimeout(()=>{w(new Error("unsupported_event"))},r);h={messageChannel:s,onMessage(z){const k=z;if(k.data.eventId===T)switch(k.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{w(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),n(k.data.response);break;default:clearTimeout(E),clearTimeout(l),w(new Error("invalid_response"));break}}},this.handlers.add(h),s.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:T,data:a},[s.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(){return window}function Jne(t){Sm().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jq(){return typeof Sm().WorkerGlobalScope<"u"&&typeof Sm().importScripts=="function"}async function Qne(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eie(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function tie(){return Jq()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qq="firebaseLocalStorageDb",aie=1,nb="firebaseLocalStorage",eH="fbase_key";class cT{constructor(e){this.request=e}toPromise(){return new Promise((e,a)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{a(this.request.error)})})}}function z2(t,e){return t.transaction([nb],e?"readwrite":"readonly").objectStore(nb)}function rie(){const t=indexedDB.deleteDatabase(Qq);return new cT(t).toPromise()}function D5(){const t=indexedDB.open(Qq,aie);return new Promise((e,a)=>{t.addEventListener("error",()=>{a(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(nb,{keyPath:eH})}catch(s){a(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(nb)?e(r):(r.close(),await rie(),e(await D5()))})})}async function b6(t,e,a){const r=z2(t,!0).put({[eH]:e,value:a});return new cT(r).toPromise()}async function nie(t,e){const a=z2(t,!1).get(e),r=await new cT(a).toPromise();return r===void 0?null:r.value}function x6(t,e){const a=z2(t,!0).delete(e);return new cT(a).toPromise()}const iie=800,sie=3;class tH{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await D5(),this.db)}async _withRetries(e){let a=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(a++>sie)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Jq()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=V2._getInstance(tie()),this.receiver._subscribe("keyChanged",async(e,a)=>({keyProcessed:(await this._poll()).includes(a.key)})),this.receiver._subscribe("ping",async(e,a)=>["keyChanged"])}async initializeSender(){var e,a;if(this.activeServiceWorker=await Qne(),!this.activeServiceWorker)return;this.sender=new Xne(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((a=r[0])===null||a===void 0)&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eie()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await D5();return await b6(e,rb,"1"),await x6(e,rb),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,a){return this._withPendingWrite(async()=>(await this._withRetries(r=>b6(r,e,a)),this.localCache[e]=a,this.notifyServiceWorker(e)))}async _get(e){const a=await this._withRetries(r=>nie(r,e));return this.localCache[e]=a,a}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(a=>x6(a,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=z2(s,!1).getAll();return new cT(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const a=[],r=new Set;for(const{fbase_key:s,value:l}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),a.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),a.push(s));return a}notifyListeners(e,a){this.localCache[e]=a;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(a)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iie)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,a){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(a)}_removeListener(e,a){this.listeners[e]&&(this.listeners[e].delete(a),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tH.type="LOCAL";const oie=tH;new sT(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lie(t,e){return e?iy(e):(ei(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3 extends m3{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return D_(e,this._buildIdpRequest())}_linkToIdToken(e,a){return D_(e,this._buildIdpRequest(a))}_getReauthenticationResolver(e){return D_(e,this._buildIdpRequest())}_buildIdpRequest(e){const a={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(a.idToken=e),a}}function uie(t){return $q(t.auth,new A3(t),t.bypassAuthState)}function cie(t){const{auth:e,user:a}=t;return ei(a,e,"internal-error"),Bne(a,new A3(t),t.bypassAuthState)}async function die(t){const{auth:e,user:a}=t;return ei(a,e,"internal-error"),kne(a,new A3(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aH{constructor(e,a,r,s,l=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(a)?a:[a]}execute(){return new Promise(async(e,a)=>{this.pendingPromise={resolve:e,reject:a};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:a,sessionId:r,postBody:s,tenantId:l,error:h,type:n}=e;if(h){this.reject(h);return}const w={auth:this.auth,requestUri:a,sessionId:r,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(n)(w))}catch(T){this.reject(T)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uie;case"linkViaPopup":case"linkViaRedirect":return die;case"reauthViaPopup":case"reauthViaRedirect":return cie;default:Op(this.auth,"internal-error")}}resolve(e){my(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){my(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hie=new sT(2e3,1e4);class S_ extends aH{constructor(e,a,r,s,l){super(e,a,s,l),this.provider=r,this.authWindow=null,this.pollId=null,S_.currentPopupAction&&S_.currentPopupAction.cancel(),S_.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ei(e,this.auth,"internal-error"),e}async onExecution(){my(this.filter.length===1,"Popup operations only handle one event");const e=g3();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(a=>{this.reject(a)}),this.resolver._isIframeWebStorageSupported(this.auth,a=>{a||this.reject(Tm(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Tm(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,S_.currentPopupAction=null}pollUserCancellation(){const e=()=>{var a,r;if(!((r=(a=this.authWindow)===null||a===void 0?void 0:a.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tm(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hie.get())};e()}}S_.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fie="pendingRedirect",PC=new Map;class pie extends aH{constructor(e,a,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],a,void 0,r),this.eventId=null}async execute(){let e=PC.get(this.auth._key());if(!e){try{const r=await mie(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(a){e=()=>Promise.reject(a)}PC.set(this.auth._key(),e)}return this.bypassAuthState||PC.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const a=await this.auth._redirectUserForId(e.eventId);if(a)return this.user=a,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mie(t,e){const a=Aie(e),r=gie(t);if(!await r._isAvailable())return!1;const s=await r._get(a)==="true";return await r._remove(a),s}function yie(t,e){PC.set(t._key(),e)}function gie(t){return iy(t._redirectPersistence)}function Aie(t){return xC(fie,t.config.apiKey,t.name)}async function _ie(t,e,a=!1){const r=lT(t),s=lie(r,e),h=await new pie(r,s,a).execute();return h&&!a&&(delete h.user._redirectEventId,await r._persistUserIfCurrent(h.user),await r._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vie=10*60*1e3;class wie{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let a=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(a=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Rie(e)||(this.hasHandledPotentialRedirect=!0,a||(this.queuedRedirectEvent=e,a=!0)),a}sendToConsumer(e,a){var r;if(e.error&&!rH(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";a.onError(Tm(this.auth,s))}else a.onAuthEvent(e)}isEventForConsumer(e,a){const r=a.eventId===null||!!e.eventId&&e.eventId===a.eventId;return a.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vie&&this.cachedEventUids.clear(),this.cachedEventUids.has(P6(e))}saveEventToCache(e){this.cachedEventUids.add(P6(e)),this.lastProcessedEventTime=Date.now()}}function P6(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function rH({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Rie(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rH(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tie(t,e={}){return Mv(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sie=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Cie=/^https?/;async function bie(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Tie(t);for(const a of e)try{if(xie(a))return}catch{}Op(t,"unauthorized-domain")}function xie(t){const e=O5(),{protocol:a,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const h=new URL(t);return h.hostname===""&&r===""?a==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):a==="chrome-extension:"&&h.hostname===r}if(!Cie.test(a))return!1;if(Sie.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pie=new sT(3e4,6e4);function E6(){const t=Sm().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let a=0;a<t.CP.length;a++)t.CP[a]=null}}function Eie(t){return new Promise((e,a)=>{var r,s,l;function h(){E6(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{E6(),a(Tm(t,"network-request-failed"))},timeout:Pie.get()})}if(!((s=(r=Sm().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((l=Sm().gapi)===null||l===void 0)&&l.load)h();else{const n=Tne("iframefcb");return Sm()[n]=()=>{gapi.load?h():a(Tm(t,"network-request-failed"))},Gq(`https://apis.google.com/js/api.js?onload=${n}`).catch(w=>a(w))}}).catch(e=>{throw EC=null,e})}let EC=null;function Nie(t){return EC=EC||Eie(t),EC}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vie=new sT(5e3,15e3),zie="__/auth/iframe",Oie="emulator/auth/iframe",Die={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Mie=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Iie(t){const e=t.config;ei(e.authDomain,t,"auth-domain-config-required");const a=e.emulator?h3(e,Oie):`https://${t.config.authDomain}/${zie}`,r={apiKey:e.apiKey,appName:t.name,v:Dv},s=Mie.get(t.config.apiHost);s&&(r.eid=s);const l=t._getFrameworks();return l.length&&(r.fw=l.join(",")),`${a}?${iT(r).slice(1)}`}async function Lie(t){const e=await Nie(t),a=Sm().gapi;return ei(a,t,"internal-error"),e.open({where:document.body,url:Iie(t),messageHandlersFilter:a.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Die,dontclear:!0},r=>new Promise(async(s,l)=>{await r.restyle({setHideOnLeave:!1});const h=Tm(t,"network-request-failed"),n=Sm().setTimeout(()=>{l(h)},Vie.get());function w(){Sm().clearTimeout(n),s(r)}r.ping(w).then(w,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fie={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Uie=500,kie=600,Bie="_blank",Gie="http://localhost";class N6{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jie(t,e,a,r=Uie,s=kie){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),h=Math.max((window.screen.availWidth-r)/2,0).toString();let n="";const w=Object.assign(Object.assign({},Fie),{width:r.toString(),height:s.toString(),top:l,left:h}),T=gd().toLowerCase();a&&(n=Oq(T)?Bie:a),zq(T)&&(e=e||Gie,w.scrollbars="yes");const E=Object.entries(w).reduce((k,[U,Z])=>`${k}${U}=${Z},`,"");if(_ne(T)&&n!=="_self")return Zie(e||"",n),new N6(null);const z=window.open(e||"",n,E);ei(z,t,"popup-blocked");try{z.focus()}catch{}return new N6(z)}function Zie(t,e){const a=document.createElement("a");a.href=t,a.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),a.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qie="__/auth/handler",Hie="emulator/auth/handler",$ie=encodeURIComponent("fac");async function V6(t,e,a,r,s,l){ei(t.config.authDomain,t,"auth-domain-config-required"),ei(t.config.apiKey,t,"invalid-api-key");const h={apiKey:t.config.apiKey,appName:t.name,authType:a,redirectUrl:r,v:Dv,eventId:s};if(e instanceof qq){e.setDefaultLanguage(t.languageCode),h.providerId=e.providerId||"",jae(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,z]of Object.entries({}))h[E]=z}if(e instanceof uT){const E=e.getScopes().filter(z=>z!=="");E.length>0&&(h.scopes=E.join(","))}t.tenantId&&(h.tid=t.tenantId);const n=h;for(const E of Object.keys(n))n[E]===void 0&&delete n[E];const w=await t._getAppCheckToken(),T=w?`#${$ie}=${encodeURIComponent(w)}`:"";return`${Kie(t)}?${iT(n).slice(1)}${T}`}function Kie({config:t}){return t.emulator?h3(t,Hie):`https://${t.authDomain}/${qie}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="webStorageSupport";class Wie{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xq,this._completeRedirectFn=_ie,this._overrideRedirectResult=yie}async _openPopup(e,a,r,s){var l;my((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await V6(e,a,r,O5(),s);return jie(e,h,g3())}async _openRedirect(e,a,r,s){await this._originValidation(e);const l=await V6(e,a,r,O5(),s);return Jne(l),new Promise(()=>{})}_initialize(e){const a=e._key();if(this.eventManagers[a]){const{manager:s,promise:l}=this.eventManagers[a];return s?Promise.resolve(s):(my(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[a]={promise:r},r.catch(()=>{delete this.eventManagers[a]}),r}async initAndGetManager(e){const a=await Lie(e),r=new wie(e);return a.register("authEvent",s=>(ei(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=a,r}_isIframeWebStorageSupported(e,a){this.iframes[e._key()].send(EE,{type:EE},s=>{var l;const h=(l=s==null?void 0:s[0])===null||l===void 0?void 0:l[EE];h!==void 0&&a(!!h),Op(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const a=e._key();return this.originValidationPromises[a]||(this.originValidationPromises[a]=bie(e)),this.originValidationPromises[a]}get _shouldInitProactively(){return Fq()||p3()||N2()}}const Yie=Wie;var z6="@firebase/auth",O6="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xie{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const a=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,a),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const a=this.internalListeners.get(e);a&&(this.internalListeners.delete(e),a(),this.updateProactiveRefresh())}assertAuthConfigured(){ei(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jie(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Qie(t){$_(new n0("auth",(e,{options:a})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:n}=r.options;ei(h&&!h.includes(":"),"invalid-api-key",{appName:r.name});const w={apiKey:h,authDomain:n,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Uq(t)},T=new Pne(r,s,l,w);return Nne(T,a),T},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,a,r)=>{e.getProvider("auth-internal").initialize()})),$_(new n0("auth-internal",e=>{const a=lT(e.getProvider("auth").getImmediate());return(r=>new Xie(r))(a)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pg(z6,O6,Jie(t)),Pg(z6,O6,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ese=5*60,tse=Aq("authIdTokenMaxAge")||ese;let D6=null;const ase=t=>async e=>{const a=e&&await e.getIdTokenResult(),r=a&&(new Date().getTime()-Date.parse(a.issuedAtTime))/1e3;if(r&&r>tse)return;const s=a==null?void 0:a.token;D6!==s&&(D6=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function rse(t=Rq()){const e=u3(t,"auth");if(e.isInitialized())return e.getImmediate();const a=Ene(t,{popupRedirectResolver:Yie,persistence:[oie,Wne,Xq]}),r=Aq("authTokenSyncURL");if(r){const l=ase(r);qne(a,l,()=>l(a.currentUser)),Zne(a,h=>l(h))}const s=yq("auth");return s&&Vne(a,`http://${s}`),a}Qie("Browser");var nse=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Br,_3=_3||{},si=nse||self;function O2(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function D2(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function ise(t,e,a){return t.call.apply(t.bind,arguments)}function sse(t,e,a){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function pd(t,e,a){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?pd=ise:pd=sse,pd.apply(null,arguments)}function YS(t,e){var a=Array.prototype.slice.call(arguments,1);return function(){var r=a.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function ac(t,e){function a(){}a.prototype=e.prototype,t.$=e.prototype,t.prototype=new a,t.prototype.constructor=t,t.ac=function(r,s,l){for(var h=Array(arguments.length-2),n=2;n<arguments.length;n++)h[n-2]=arguments[n];return e.prototype[s].apply(r,h)}}function Ug(){this.s=this.s,this.o=this.o}var ose=0;Ug.prototype.s=!1;Ug.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),ose!=0)};Ug.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const nH=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let a=0;a<t.length;a++)if(a in t&&t[a]===e)return a;return-1};function v3(t){const e=t.length;if(0<e){const a=Array(e);for(let r=0;r<e;r++)a[r]=t[r];return a}return[]}function M6(t,e){for(let a=1;a<arguments.length;a++){const r=arguments[a];if(O2(r)){const s=t.length||0,l=r.length||0;t.length=s+l;for(let h=0;h<l;h++)t[s+h]=r[h]}else t.push(r)}}function md(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}md.prototype.h=function(){this.defaultPrevented=!0};var lse=function(){if(!si.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{si.addEventListener("test",()=>{},e),si.removeEventListener("test",()=>{},e)}catch{}return t}();function rR(t){return/^[\s\xa0]*$/.test(t)}function M2(){var t=si.navigator;return t&&(t=t.userAgent)?t:""}function gm(t){return M2().indexOf(t)!=-1}function w3(t){return w3[" "](t),t}w3[" "]=function(){};function use(t,e){var a=aoe;return Object.prototype.hasOwnProperty.call(a,t)?a[t]:a[t]=e(t)}var cse=gm("Opera"),W_=gm("Trident")||gm("MSIE"),iH=gm("Edge"),M5=iH||W_,sH=gm("Gecko")&&!(M2().toLowerCase().indexOf("webkit")!=-1&&!gm("Edge"))&&!(gm("Trident")||gm("MSIE"))&&!gm("Edge"),dse=M2().toLowerCase().indexOf("webkit")!=-1&&!gm("Edge");function oH(){var t=si.document;return t?t.documentMode:void 0}var I5;e:{var NE="",VE=function(){var t=M2();if(sH)return/rv:([^\);]+)(\)|;)/.exec(t);if(iH)return/Edge\/([\d\.]+)/.exec(t);if(W_)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(dse)return/WebKit\/(\S+)/.exec(t);if(cse)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(VE&&(NE=VE?VE[1]:""),W_){var zE=oH();if(zE!=null&&zE>parseFloat(NE)){I5=String(zE);break e}}I5=NE}var L5;if(si.document&&W_){var I6=oH();L5=I6||parseInt(I5,10)||void 0}else L5=void 0;var hse=L5;function nR(t,e){if(md.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var a=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(sH){e:{try{w3(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else a=="mouseover"?e=t.fromElement:a=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:fse[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&nR.$.h.call(this)}}ac(nR,md);var fse={2:"touch",3:"pen",4:"mouse"};nR.prototype.h=function(){nR.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var I2="closure_listenable_"+(1e6*Math.random()|0),pse=0;function mse(t,e,a,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=a,this.capture=!!r,this.la=s,this.key=++pse,this.fa=this.ia=!1}function L2(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function R3(t,e,a){for(const r in t)e.call(a,t[r],r,t)}function yse(t,e){for(const a in t)e.call(void 0,t[a],a,t)}function lH(t){const e={};for(const a in t)e[a]=t[a];return e}const L6="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function uH(t,e){let a,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(a in r)t[a]=r[a];for(let l=0;l<L6.length;l++)a=L6[l],Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}}function F2(t){this.src=t,this.g={},this.h=0}F2.prototype.add=function(t,e,a,r,s){var l=t.toString();t=this.g[l],t||(t=this.g[l]=[],this.h++);var h=U5(t,e,r,s);return-1<h?(e=t[h],a||(e.ia=!1)):(e=new mse(e,this.src,l,!!r,s),e.ia=a,t.push(e)),e};function F5(t,e){var a=e.type;if(a in t.g){var r=t.g[a],s=nH(r,e),l;(l=0<=s)&&Array.prototype.splice.call(r,s,1),l&&(L2(e),t.g[a].length==0&&(delete t.g[a],t.h--))}}function U5(t,e,a,r){for(var s=0;s<t.length;++s){var l=t[s];if(!l.fa&&l.listener==e&&l.capture==!!a&&l.la==r)return s}return-1}var T3="closure_lm_"+(1e6*Math.random()|0),OE={};function cH(t,e,a,r,s){if(Array.isArray(e)){for(var l=0;l<e.length;l++)cH(t,e[l],a,r,s);return null}return a=fH(a),t&&t[I2]?t.O(e,a,D2(r)?!!r.capture:!1,s):gse(t,e,a,!1,r,s)}function gse(t,e,a,r,s,l){if(!e)throw Error("Invalid event type");var h=D2(s)?!!s.capture:!!s,n=C3(t);if(n||(t[T3]=n=new F2(t)),a=n.add(e,a,r,h,l),a.proxy)return a;if(r=Ase(),a.proxy=r,r.src=t,r.listener=a,t.addEventListener)lse||(s=h),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(hH(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return a}function Ase(){function t(a){return e.call(t.src,t.listener,a)}const e=_se;return t}function dH(t,e,a,r,s){if(Array.isArray(e))for(var l=0;l<e.length;l++)dH(t,e[l],a,r,s);else r=D2(r)?!!r.capture:!!r,a=fH(a),t&&t[I2]?(t=t.i,e=String(e).toString(),e in t.g&&(l=t.g[e],a=U5(l,a,r,s),-1<a&&(L2(l[a]),Array.prototype.splice.call(l,a,1),l.length==0&&(delete t.g[e],t.h--)))):t&&(t=C3(t))&&(e=t.g[e.toString()],t=-1,e&&(t=U5(e,a,r,s)),(a=-1<t?e[t]:null)&&S3(a))}function S3(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[I2])F5(e.i,t);else{var a=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(a,r,t.capture):e.detachEvent?e.detachEvent(hH(a),r):e.addListener&&e.removeListener&&e.removeListener(r),(a=C3(e))?(F5(a,t),a.h==0&&(a.src=null,e[T3]=null)):L2(t)}}}function hH(t){return t in OE?OE[t]:OE[t]="on"+t}function _se(t,e){if(t.fa)t=!0;else{e=new nR(e,this);var a=t.listener,r=t.la||t.src;t.ia&&S3(t),t=a.call(r,e)}return t}function C3(t){return t=t[T3],t instanceof F2?t:null}var DE="__closure_events_fn_"+(1e9*Math.random()>>>0);function fH(t){return typeof t=="function"?t:(t[DE]||(t[DE]=function(e){return t.handleEvent(e)}),t[DE])}function tc(){Ug.call(this),this.i=new F2(this),this.S=this,this.J=null}ac(tc,Ug);tc.prototype[I2]=!0;tc.prototype.removeEventListener=function(t,e,a,r){dH(this,t,e,a,r)};function Pc(t,e){var a,r=t.J;if(r)for(a=[];r;r=r.J)a.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new md(e,t);else if(e instanceof md)e.target=e.target||t;else{var s=e;e=new md(r,t),uH(e,s)}if(s=!0,a)for(var l=a.length-1;0<=l;l--){var h=e.g=a[l];s=XS(h,r,!0,e)&&s}if(h=e.g=t,s=XS(h,r,!0,e)&&s,s=XS(h,r,!1,e)&&s,a)for(l=0;l<a.length;l++)h=e.g=a[l],s=XS(h,r,!1,e)&&s}tc.prototype.N=function(){if(tc.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var a=t.g[e],r=0;r<a.length;r++)L2(a[r]);delete t.g[e],t.h--}}this.J=null};tc.prototype.O=function(t,e,a,r){return this.i.add(String(t),e,!1,a,r)};tc.prototype.P=function(t,e,a,r){return this.i.add(String(t),e,!0,a,r)};function XS(t,e,a,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,l=0;l<e.length;++l){var h=e[l];if(h&&!h.fa&&h.capture==a){var n=h.listener,w=h.la||h.src;h.ia&&F5(t.i,h),s=n.call(w,r)!==!1&&s}}return s&&!r.defaultPrevented}var b3=si.JSON.stringify;class vse{constructor(e,a){this.i=e,this.j=a,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function wse(){var t=x3;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class Rse{constructor(){this.h=this.g=null}add(e,a){const r=pH.get();r.set(e,a),this.h?this.h.next=r:this.g=r,this.h=r}}var pH=new vse(()=>new Tse,t=>t.reset());class Tse{constructor(){this.next=this.g=this.h=null}set(e,a){this.h=e,this.g=a,this.next=null}reset(){this.next=this.g=this.h=null}}function Sse(t){var e=1;t=t.split(":");const a=[];for(;0<e&&t.length;)a.push(t.shift()),e--;return t.length&&a.push(t.join(":")),a}function Cse(t){si.setTimeout(()=>{throw t},0)}let iR,sR=!1,x3=new Rse,mH=()=>{const t=si.Promise.resolve(void 0);iR=()=>{t.then(bse)}};var bse=()=>{for(var t;t=wse();){try{t.h.call(t.g)}catch(a){Cse(a)}var e=pH;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}sR=!1};function U2(t,e){tc.call(this),this.h=t||1,this.g=e||si,this.j=pd(this.qb,this),this.l=Date.now()}ac(U2,tc);Br=U2.prototype;Br.ga=!1;Br.T=null;Br.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Pc(this,"tick"),this.ga&&(P3(this),this.start()))}};Br.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function P3(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}Br.N=function(){U2.$.N.call(this),P3(this),delete this.g};function E3(t,e,a){if(typeof t=="function")a&&(t=pd(t,a));else if(t&&typeof t.handleEvent=="function")t=pd(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:si.setTimeout(t,e||0)}function yH(t){t.g=E3(()=>{t.g=null,t.i&&(t.i=!1,yH(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class xse extends Ug{constructor(e,a){super(),this.m=e,this.j=a,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:yH(this)}N(){super.N(),this.g&&(si.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oR(t){Ug.call(this),this.h=t,this.g={}}ac(oR,Ug);var F6=[];function gH(t,e,a,r){Array.isArray(a)||(a&&(F6[0]=a.toString()),a=F6);for(var s=0;s<a.length;s++){var l=cH(e,a[s],r||t.handleEvent,!1,t.h||t);if(!l)break;t.g[l.key]=l}}function AH(t){R3(t.g,function(e,a){this.g.hasOwnProperty(a)&&S3(e)},t),t.g={}}oR.prototype.N=function(){oR.$.N.call(this),AH(this)};oR.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function k2(){this.g=!0}k2.prototype.Ea=function(){this.g=!1};function Pse(t,e,a,r,s,l){t.info(function(){if(t.g)if(l)for(var h="",n=l.split("&"),w=0;w<n.length;w++){var T=n[w].split("=");if(1<T.length){var E=T[0];T=T[1];var z=E.split("_");h=2<=z.length&&z[1]=="type"?h+(E+"="+T+"&"):h+(E+"=redacted&")}}else h=null;else h=l;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+a+`
`+h})}function Ese(t,e,a,r,s,l,h){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+a+`
`+l+" "+h})}function C_(t,e,a,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Vse(t,a)+(r?" "+r:"")})}function Nse(t,e){t.info(function(){return"TIMEOUT: "+e})}k2.prototype.info=function(){};function Vse(t,e){if(!t.g)return e;if(!e)return null;try{var a=JSON.parse(e);if(a){for(t=0;t<a.length;t++)if(Array.isArray(a[t])){var r=a[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var l=s[0];if(l!="noop"&&l!="stop"&&l!="close")for(var h=1;h<s.length;h++)s[h]=""}}}}return b3(a)}catch{return e}}var y0={},U6=null;function B2(){return U6=U6||new tc}y0.Ta="serverreachability";function _H(t){md.call(this,y0.Ta,t)}ac(_H,md);function lR(t){const e=B2();Pc(e,new _H(e))}y0.STAT_EVENT="statevent";function vH(t,e){md.call(this,y0.STAT_EVENT,t),this.stat=e}ac(vH,md);function Wd(t){const e=B2();Pc(e,new vH(e,t))}y0.Ua="timingevent";function wH(t,e){md.call(this,y0.Ua,t),this.size=e}ac(wH,md);function dT(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return si.setTimeout(function(){t()},e)}var G2={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},RH={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function N3(){}N3.prototype.h=null;function k6(t){return t.h||(t.h=t.i())}function TH(){}var hT={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function V3(){md.call(this,"d")}ac(V3,md);function z3(){md.call(this,"c")}ac(z3,md);var k5;function j2(){}ac(j2,N3);j2.prototype.g=function(){return new XMLHttpRequest};j2.prototype.i=function(){return{}};k5=new j2;function fT(t,e,a,r){this.l=t,this.j=e,this.m=a,this.W=r||1,this.U=new oR(this),this.P=zse,t=M5?125:void 0,this.V=new U2(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new SH}function SH(){this.i=null,this.g="",this.h=!1}var zse=45e3,B5={},ib={};Br=fT.prototype;Br.setTimeout=function(t){this.P=t};function G5(t,e,a){t.L=1,t.v=q2(yy(e)),t.s=a,t.S=!0,CH(t,null)}function CH(t,e){t.G=Date.now(),pT(t),t.A=yy(t.v);var a=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),OH(a.i,"t",r),t.C=0,a=t.l.J,t.h=new SH,t.g=e$(t.l,a?e:null,!t.s),0<t.O&&(t.M=new xse(pd(t.Pa,t,t.g),t.O)),gH(t.U,t.g,"readystatechange",t.nb),e=t.I?lH(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),lR(),Pse(t.j,t.u,t.A,t.m,t.W,t.s)}Br.nb=function(t){t=t.target;const e=this.M;e&&Am(t)==3?e.l():this.Pa(t)};Br.Pa=function(t){try{if(t==this.g)e:{const E=Am(this.g);var e=this.g.Ia();const z=this.g.da();if(!(3>E)&&(E!=3||M5||this.g&&(this.h.h||this.g.ja()||Z6(this.g)))){this.J||E!=4||e==7||(e==8||0>=z?lR(3):lR(2)),Z2(this);var a=this.g.da();this.ca=a;t:if(bH(this)){var r=Z6(this.g);t="";var s=r.length,l=Am(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){jA(this),Lw(this);var h="";break t}this.h.i=new si.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:l&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,h=this.h.g}else h=this.g.ja();if(this.i=a==200,Ese(this.j,this.u,this.A,this.m,this.W,E,a),this.i){if(this.aa&&!this.K){t:{if(this.g){var n,w=this.g;if((n=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rR(n)){var T=n;break t}}T=null}if(a=T)C_(this.j,this.m,a,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,j5(this,a);else{this.i=!1,this.o=3,Wd(12),jA(this),Lw(this);break e}}this.S?(xH(this,E,h),M5&&this.i&&E==3&&(gH(this.U,this.V,"tick",this.mb),this.V.start())):(C_(this.j,this.m,h,null),j5(this,h)),E==4&&jA(this),this.i&&!this.J&&(E==4?YH(this.l,this):(this.i=!1,pT(this)))}else Qse(this.g),a==400&&0<h.indexOf("Unknown SID")?(this.o=3,Wd(12)):(this.o=0,Wd(13)),jA(this),Lw(this)}}}catch{}finally{}};function bH(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function xH(t,e,a){let r=!0,s;for(;!t.J&&t.C<a.length;)if(s=Ose(t,a),s==ib){e==4&&(t.o=4,Wd(14),r=!1),C_(t.j,t.m,null,"[Incomplete Response]");break}else if(s==B5){t.o=4,Wd(15),C_(t.j,t.m,a,"[Invalid Chunk]"),r=!1;break}else C_(t.j,t.m,s,null),j5(t,s);bH(t)&&s!=ib&&s!=B5&&(t.h.g="",t.C=0),e!=4||a.length!=0||t.h.h||(t.o=1,Wd(16),r=!1),t.i=t.i&&r,r?0<a.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+a.length),F3(e),e.M=!0,Wd(11))):(C_(t.j,t.m,a,"[Invalid Chunked Response]"),jA(t),Lw(t))}Br.mb=function(){if(this.g){var t=Am(this.g),e=this.g.ja();this.C<e.length&&(Z2(this),xH(this,t,e),this.i&&t!=4&&pT(this))}};function Ose(t,e){var a=t.C,r=e.indexOf(`
`,a);return r==-1?ib:(a=Number(e.substring(a,r)),isNaN(a)?B5:(r+=1,r+a>e.length?ib:(e=e.slice(r,r+a),t.C=r+a,e)))}Br.cancel=function(){this.J=!0,jA(this)};function pT(t){t.Y=Date.now()+t.P,PH(t,t.P)}function PH(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=dT(pd(t.lb,t),e)}function Z2(t){t.B&&(si.clearTimeout(t.B),t.B=null)}Br.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(Nse(this.j,this.A),this.L!=2&&(lR(),Wd(17)),jA(this),this.o=2,Lw(this)):PH(this,this.Y-t)};function Lw(t){t.l.H==0||t.J||YH(t.l,t)}function jA(t){Z2(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,P3(t.V),AH(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function j5(t,e){try{var a=t.l;if(a.H!=0&&(a.g==t||Z5(a.i,t))){if(!t.K&&Z5(a.i,t)&&a.H==3){try{var r=a.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!a.u){if(a.g)if(a.g.G+3e3<t.G)lb(a),K2(a);else break e;L3(a),Wd(18)}}else a.Fa=s[1],0<a.Fa-a.V&&37500>s[2]&&a.G&&a.A==0&&!a.v&&(a.v=dT(pd(a.ib,a),6e3));if(1>=IH(a.i)&&a.oa){try{a.oa()}catch{}a.oa=void 0}}else ZA(a,11)}else if((t.K||a.g==t)&&lb(a),!rR(e))for(s=a.Ja.g.parse(e),e=0;e<s.length;e++){let T=s[e];if(a.V=T[0],T=T[1],a.H==2)if(T[0]=="c"){a.K=T[1],a.pa=T[2];const E=T[3];E!=null&&(a.ra=E,a.l.info("VER="+a.ra));const z=T[4];z!=null&&(a.Ga=z,a.l.info("SVER="+a.Ga));const k=T[5];k!=null&&typeof k=="number"&&0<k&&(r=1.5*k,a.L=r,a.l.info("backChannelRequestTimeoutMs_="+r)),r=a;const U=t.g;if(U){const Z=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var l=r.i;l.g||Z.indexOf("spdy")==-1&&Z.indexOf("quic")==-1&&Z.indexOf("h2")==-1||(l.j=l.l,l.g=new Set,l.h&&(O3(l,l.h),l.h=null))}if(r.F){const q=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;q&&(r.Da=q,Eo(r.I,r.F,q))}}a.H=3,a.h&&a.h.Ba(),a.ca&&(a.S=Date.now()-t.G,a.l.info("Handshake RTT: "+a.S+"ms")),r=a;var h=t;if(r.wa=QH(r,r.J?r.pa:null,r.Y),h.K){LH(r.i,h);var n=h,w=r.L;w&&n.setTimeout(w),n.B&&(Z2(n),pT(n)),r.g=h}else KH(r);0<a.j.length&&W2(a)}else T[0]!="stop"&&T[0]!="close"||ZA(a,7);else a.H==3&&(T[0]=="stop"||T[0]=="close"?T[0]=="stop"?ZA(a,7):I3(a):T[0]!="noop"&&a.h&&a.h.Aa(T),a.A=0)}}lR(4)}catch{}}function Dse(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(O2(t)){for(var e=[],a=t.length,r=0;r<a;r++)e.push(t[r]);return e}e=[],a=0;for(r in t)e[a++]=t[r];return e}function Mse(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(O2(t)||typeof t=="string"){var e=[];t=t.length;for(var a=0;a<t;a++)e.push(a);return e}e=[],a=0;for(const r in t)e[a++]=r;return e}}}function EH(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(O2(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var a=Mse(t),r=Dse(t),s=r.length,l=0;l<s;l++)e.call(void 0,r[l],a&&a[l],t)}var NH=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ise(t,e){if(t){t=t.split("&");for(var a=0;a<t.length;a++){var r=t[a].indexOf("="),s=null;if(0<=r){var l=t[a].substring(0,r);s=t[a].substring(r+1)}else l=t[a];e(l,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function QA(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof QA){this.h=t.h,sb(this,t.j),this.s=t.s,this.g=t.g,ob(this,t.m),this.l=t.l;var e=t.i,a=new uR;a.i=e.i,e.g&&(a.g=new Map(e.g),a.h=e.h),B6(this,a),this.o=t.o}else t&&(e=String(t).match(NH))?(this.h=!1,sb(this,e[1]||"",!0),this.s=xw(e[2]||""),this.g=xw(e[3]||"",!0),ob(this,e[4]),this.l=xw(e[5]||"",!0),B6(this,e[6]||"",!0),this.o=xw(e[7]||"")):(this.h=!1,this.i=new uR(null,this.h))}QA.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Pw(e,G6,!0),":");var a=this.g;return(a||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Pw(e,G6,!0),"@"),t.push(encodeURIComponent(String(a)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a=this.m,a!=null&&t.push(":",String(a))),(a=this.l)&&(this.g&&a.charAt(0)!="/"&&t.push("/"),t.push(Pw(a,a.charAt(0)=="/"?Use:Fse,!0))),(a=this.i.toString())&&t.push("?",a),(a=this.o)&&t.push("#",Pw(a,Bse)),t.join("")};function yy(t){return new QA(t)}function sb(t,e,a){t.j=a?xw(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ob(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function B6(t,e,a){e instanceof uR?(t.i=e,Gse(t.i,t.h)):(a||(e=Pw(e,kse)),t.i=new uR(e,t.h))}function Eo(t,e,a){t.i.set(e,a)}function q2(t){return Eo(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function xw(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Pw(t,e,a){return typeof t=="string"?(t=encodeURI(t).replace(e,Lse),a&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Lse(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var G6=/[#\/\?@]/g,Fse=/[#\?:]/g,Use=/[#\?]/g,kse=/[#\?@]/g,Bse=/#/g;function uR(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function kg(t){t.g||(t.g=new Map,t.h=0,t.i&&Ise(t.i,function(e,a){t.add(decodeURIComponent(e.replace(/\+/g," ")),a)}))}Br=uR.prototype;Br.add=function(t,e){kg(this),this.i=null,t=Lv(this,t);var a=this.g.get(t);return a||this.g.set(t,a=[]),a.push(e),this.h+=1,this};function VH(t,e){kg(t),e=Lv(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function zH(t,e){return kg(t),e=Lv(t,e),t.g.has(e)}Br.forEach=function(t,e){kg(this),this.g.forEach(function(a,r){a.forEach(function(s){t.call(e,s,r,this)},this)},this)};Br.ta=function(){kg(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),a=[];for(let r=0;r<e.length;r++){const s=t[r];for(let l=0;l<s.length;l++)a.push(e[r])}return a};Br.Z=function(t){kg(this);let e=[];if(typeof t=="string")zH(this,t)&&(e=e.concat(this.g.get(Lv(this,t))));else{t=Array.from(this.g.values());for(let a=0;a<t.length;a++)e=e.concat(t[a])}return e};Br.set=function(t,e){return kg(this),this.i=null,t=Lv(this,t),zH(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};Br.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function OH(t,e,a){VH(t,e),0<a.length&&(t.i=null,t.g.set(Lv(t,e),v3(a)),t.h+=a.length)}Br.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var a=0;a<e.length;a++){var r=e[a];const l=encodeURIComponent(String(r)),h=this.Z(r);for(r=0;r<h.length;r++){var s=l;h[r]!==""&&(s+="="+encodeURIComponent(String(h[r]))),t.push(s)}}return this.i=t.join("&")};function Lv(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Gse(t,e){e&&!t.j&&(kg(t),t.i=null,t.g.forEach(function(a,r){var s=r.toLowerCase();r!=s&&(VH(this,r),OH(this,s,a))},t)),t.j=e}var jse=class{constructor(t,e){this.g=t,this.map=e}};function DH(t){this.l=t||Zse,si.PerformanceNavigationTiming?(t=si.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(si.g&&si.g.Ka&&si.g.Ka()&&si.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Zse=10;function MH(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function IH(t){return t.h?1:t.g?t.g.size:0}function Z5(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function O3(t,e){t.g?t.g.add(e):t.h=e}function LH(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}DH.prototype.cancel=function(){if(this.i=FH(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function FH(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const a of t.g.values())e=e.concat(a.F);return e}return v3(t.i)}var qse=class{stringify(t){return si.JSON.stringify(t,void 0)}parse(t){return si.JSON.parse(t,void 0)}};function Hse(){this.g=new qse}function $se(t,e,a){const r=a||"";try{EH(t,function(s,l){let h=s;D2(s)&&(h=b3(s)),e.push(r+l+"="+encodeURIComponent(h))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function Kse(t,e){const a=new k2;if(si.Image){const r=new Image;r.onload=YS(JS,a,r,"TestLoadImage: loaded",!0,e),r.onerror=YS(JS,a,r,"TestLoadImage: error",!1,e),r.onabort=YS(JS,a,r,"TestLoadImage: abort",!1,e),r.ontimeout=YS(JS,a,r,"TestLoadImage: timeout",!1,e),si.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function JS(t,e,a,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function mT(t){this.l=t.fc||null,this.j=t.ob||!1}ac(mT,N3);mT.prototype.g=function(){return new H2(this.l,this.j)};mT.prototype.i=function(t){return function(){return t}}({});function H2(t,e){tc.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=D3,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ac(H2,tc);var D3=0;Br=H2.prototype;Br.open=function(t,e){if(this.readyState!=D3)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,cR(this)};Br.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||si).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};Br.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yT(this)),this.readyState=D3};Br.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,cR(this)),this.g&&(this.readyState=3,cR(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof si.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;UH(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function UH(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}Br.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?yT(this):cR(this),this.readyState==3&&UH(this)}};Br.Za=function(t){this.g&&(this.response=this.responseText=t,yT(this))};Br.Ya=function(t){this.g&&(this.response=t,yT(this))};Br.ka=function(){this.g&&yT(this)};function yT(t){t.readyState=4,t.l=null,t.j=null,t.A=null,cR(t)}Br.setRequestHeader=function(t,e){this.v.append(t,e)};Br.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};Br.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var a=e.next();!a.done;)a=a.value,t.push(a[0]+": "+a[1]),a=e.next();return t.join(`\r
`)};function cR(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(H2.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var Wse=si.JSON.parse;function Sl(t){tc.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=kH,this.L=this.M=!1}ac(Sl,tc);var kH="",Yse=/^https?$/i,Xse=["POST","PUT"];Br=Sl.prototype;Br.Oa=function(t){this.M=t};Br.ha=function(t,e,a,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():k5.g(),this.C=this.u?k6(this.u):k6(k5),this.g.onreadystatechange=pd(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(l){j6(this,l);return}if(t=a||"",a=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)a.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const l of r.keys())a.set(l,r.get(l));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(a.keys()).find(l=>l.toLowerCase()=="content-type"),s=si.FormData&&t instanceof si.FormData,!(0<=nH(Xse,e))||r||s||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,h]of a)this.g.setRequestHeader(l,h);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{jH(this),0<this.B&&((this.L=Jse(this.g))?(this.g.timeout=this.B,this.g.ontimeout=pd(this.ua,this)):this.A=E3(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(l){j6(this,l)}};function Jse(t){return W_&&typeof t.timeout=="number"&&t.ontimeout!==void 0}Br.ua=function(){typeof _3<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Pc(this,"timeout"),this.abort(8))};function j6(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,BH(t),$2(t)}function BH(t){t.F||(t.F=!0,Pc(t,"complete"),Pc(t,"error"))}Br.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Pc(this,"complete"),Pc(this,"abort"),$2(this))};Br.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),$2(this,!0)),Sl.$.N.call(this)};Br.La=function(){this.s||(this.G||this.v||this.l?GH(this):this.kb())};Br.kb=function(){GH(this)};function GH(t){if(t.h&&typeof _3<"u"&&(!t.C[1]||Am(t)!=4||t.da()!=2)){if(t.v&&Am(t)==4)E3(t.La,0,t);else if(Pc(t,"readystatechange"),Am(t)==4){t.h=!1;try{const h=t.da();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var a;if(!(a=e)){var r;if(r=h===0){var s=String(t.I).match(NH)[1]||null;!s&&si.self&&si.self.location&&(s=si.self.location.protocol.slice(0,-1)),r=!Yse.test(s?s.toLowerCase():"")}a=r}if(a)Pc(t,"complete"),Pc(t,"success");else{t.m=6;try{var l=2<Am(t)?t.g.statusText:""}catch{l=""}t.j=l+" ["+t.da()+"]",BH(t)}}finally{$2(t)}}}}function $2(t,e){if(t.g){jH(t);const a=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Pc(t,"ready");try{a.onreadystatechange=r}catch{}}}function jH(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(si.clearTimeout(t.A),t.A=null)}Br.isActive=function(){return!!this.g};function Am(t){return t.g?t.g.readyState:0}Br.da=function(){try{return 2<Am(this)?this.g.status:-1}catch{return-1}};Br.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};Br.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Wse(e)}};function Z6(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case kH:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function Qse(t){const e={};t=(t.g&&2<=Am(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(rR(t[r]))continue;var a=Sse(t[r]);const s=a[0];if(a=a[1],typeof a!="string")continue;a=a.trim();const l=e[s]||[];e[s]=l,l.push(a)}yse(e,function(r){return r.join(", ")})}Br.Ia=function(){return this.m};Br.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function ZH(t){let e="";return R3(t,function(a,r){e+=r,e+=":",e+=a,e+=`\r
`}),e}function M3(t,e,a){e:{for(r in a){var r=!1;break e}r=!0}r||(a=ZH(a),typeof t=="string"?a!=null&&encodeURIComponent(String(a)):Eo(t,e,a))}function uw(t,e,a){return a&&a.internalChannelParams&&a.internalChannelParams[t]||e}function qH(t){this.Ga=0,this.j=[],this.l=new k2,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=uw("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=uw("baseRetryDelayMs",5e3,t),this.hb=uw("retryDelaySeedMs",1e4,t),this.eb=uw("forwardChannelMaxRetries",2,t),this.xa=uw("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new DH(t&&t.concurrentRequestLimit),this.Ja=new Hse,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}Br=qH.prototype;Br.ra=8;Br.H=1;function I3(t){if(HH(t),t.H==3){var e=t.W++,a=yy(t.I);if(Eo(a,"SID",t.K),Eo(a,"RID",e),Eo(a,"TYPE","terminate"),gT(t,a),e=new fT(t,t.l,e),e.L=2,e.v=q2(yy(a)),a=!1,si.navigator&&si.navigator.sendBeacon)try{a=si.navigator.sendBeacon(e.v.toString(),"")}catch{}!a&&si.Image&&(new Image().src=e.v,a=!0),a||(e.g=e$(e.l,null),e.g.ha(e.v)),e.G=Date.now(),pT(e)}JH(t)}function K2(t){t.g&&(F3(t),t.g.cancel(),t.g=null)}function HH(t){K2(t),t.u&&(si.clearTimeout(t.u),t.u=null),lb(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&si.clearTimeout(t.m),t.m=null)}function W2(t){if(!MH(t.i)&&!t.m){t.m=!0;var e=t.Na;iR||mH(),sR||(iR(),sR=!0),x3.add(e,t),t.C=0}}function eoe(t,e){return IH(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=dT(pd(t.Na,t,e),XH(t,t.C)),t.C++,!0)}Br.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new fT(this,this.l,t);let l=this.s;if(this.U&&(l?(l=lH(l),uH(l,this.U)):l=this.U),this.o!==null||this.O||(s.I=l,l=null),this.P)e:{for(var e=0,a=0;a<this.j.length;a++){t:{var r=this.j[a];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=a;break e}if(e===4096||a===this.j.length-1){e=a+1;break e}}e=1e3}else e=1e3;e=$H(this,s,e),a=yy(this.I),Eo(a,"RID",t),Eo(a,"CVER",22),this.F&&Eo(a,"X-HTTP-Session-Id",this.F),gT(this,a),l&&(this.O?e="headers="+encodeURIComponent(String(ZH(l)))+"&"+e:this.o&&M3(a,this.o,l)),O3(this.i,s),this.bb&&Eo(a,"TYPE","init"),this.P?(Eo(a,"$req",e),Eo(a,"SID","null"),s.aa=!0,G5(s,a,null)):G5(s,a,e),this.H=2}}else this.H==3&&(t?q6(this,t):this.j.length==0||MH(this.i)||q6(this))};function q6(t,e){var a;e?a=e.m:a=t.W++;const r=yy(t.I);Eo(r,"SID",t.K),Eo(r,"RID",a),Eo(r,"AID",t.V),gT(t,r),t.o&&t.s&&M3(r,t.o,t.s),a=new fT(t,t.l,a,t.C+1),t.o===null&&(a.I=t.s),e&&(t.j=e.F.concat(t.j)),e=$H(t,a,1e3),a.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),O3(t.i,a),G5(a,r,e)}function gT(t,e){t.na&&R3(t.na,function(a,r){Eo(e,r,a)}),t.h&&EH({},function(a,r){Eo(e,r,a)})}function $H(t,e,a){a=Math.min(t.j.length,a);var r=t.h?pd(t.h.Va,t.h,t):null;e:{var s=t.j;let l=-1;for(;;){const h=["count="+a];l==-1?0<a?(l=s[0].g,h.push("ofs="+l)):l=0:h.push("ofs="+l);let n=!0;for(let w=0;w<a;w++){let T=s[w].g;const E=s[w].map;if(T-=l,0>T)l=Math.max(0,s[w].g-100),n=!1;else try{$se(E,h,"req"+T+"_")}catch{r&&r(E)}}if(n){r=h.join("&");break e}}}return t=t.j.splice(0,a),e.F=t,r}function KH(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;iR||mH(),sR||(iR(),sR=!0),x3.add(e,t),t.A=0}}function L3(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=dT(pd(t.Ma,t),XH(t,t.A)),t.A++,!0)}Br.Ma=function(){if(this.u=null,WH(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=dT(pd(this.jb,this),t)}};Br.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Wd(10),K2(this),WH(this))};function F3(t){t.B!=null&&(si.clearTimeout(t.B),t.B=null)}function WH(t){t.g=new fT(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=yy(t.wa);Eo(e,"RID","rpc"),Eo(e,"SID",t.K),Eo(e,"AID",t.V),Eo(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Eo(e,"TO",t.qa),Eo(e,"TYPE","xmlhttp"),gT(t,e),t.o&&t.s&&M3(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var a=t.g;t=t.pa,a.L=1,a.v=q2(yy(e)),a.s=null,a.S=!0,CH(a,t)}Br.ib=function(){this.v!=null&&(this.v=null,K2(this),L3(this),Wd(19))};function lb(t){t.v!=null&&(si.clearTimeout(t.v),t.v=null)}function YH(t,e){var a=null;if(t.g==e){lb(t),F3(t),t.g=null;var r=2}else if(Z5(t.i,e))a=e.F,LH(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){a=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;r=B2(),Pc(r,new wH(r,a)),W2(t)}else KH(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(r==1&&eoe(t,e)||r==2&&L3(t)))switch(a&&0<a.length&&(e=t.i,e.i=e.i.concat(a)),s){case 1:ZA(t,5);break;case 4:ZA(t,10);break;case 3:ZA(t,6);break;default:ZA(t,2)}}}function XH(t,e){let a=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(a*=2),a*e}function ZA(t,e){if(t.l.info("Error code "+e),e==2){var a=null;t.h&&(a=null);var r=pd(t.pb,t);a||(a=new QA("//www.google.com/images/cleardot.gif"),si.location&&si.location.protocol=="http"||sb(a,"https"),q2(a)),Kse(a.toString(),r)}else Wd(2);t.H=0,t.h&&t.h.za(e),JH(t),HH(t)}Br.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Wd(2)):(this.l.info("Failed to ping google.com"),Wd(1))};function JH(t){if(t.H=0,t.ma=[],t.h){const e=FH(t.i);(e.length!=0||t.j.length!=0)&&(M6(t.ma,e),M6(t.ma,t.j),t.i.i.length=0,v3(t.j),t.j.length=0),t.h.ya()}}function QH(t,e,a){var r=a instanceof QA?yy(a):new QA(a);if(r.g!="")e&&(r.g=e+"."+r.g),ob(r,r.m);else{var s=si.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var l=new QA(null);r&&sb(l,r),e&&(l.g=e),s&&ob(l,s),a&&(l.l=a),r=l}return a=t.F,e=t.Da,a&&e&&Eo(r,a,e),Eo(r,"VER",t.ra),gT(t,r),r}function e$(t,e,a){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=a&&t.Ha&&!t.va?new Sl(new mT({ob:!0})):new Sl(t.va),e.Oa(t.J),e}Br.isActive=function(){return!!this.h&&this.h.isActive(this)};function t$(){}Br=t$.prototype;Br.Ba=function(){};Br.Aa=function(){};Br.za=function(){};Br.ya=function(){};Br.isActive=function(){return!0};Br.Va=function(){};function ub(){if(W_&&!(10<=Number(hse)))throw Error("Environmental error: no available transport.")}ub.prototype.g=function(t,e){return new cf(t,e)};function cf(t,e){tc.call(this),this.g=new qH(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!rR(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!rR(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Fv(this)}ac(cf,tc);cf.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,a=this.h||void 0;Wd(0),t.Y=e,t.na=a||{},t.G=t.aa,t.I=QH(t,null,t.Y),W2(t)};cf.prototype.close=function(){I3(this.g)};cf.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var a={};a.__data__=t,t=a}else this.v&&(a={},a.__data__=b3(t),t=a);e.j.push(new jse(e.fb++,t)),e.H==3&&W2(e)};cf.prototype.N=function(){this.g.h=null,delete this.j,I3(this.g),delete this.g,cf.$.N.call(this)};function a$(t){V3.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const a in e){t=a;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}ac(a$,V3);function r$(){z3.call(this),this.status=1}ac(r$,z3);function Fv(t){this.g=t}ac(Fv,t$);Fv.prototype.Ba=function(){Pc(this.g,"a")};Fv.prototype.Aa=function(t){Pc(this.g,new a$(t))};Fv.prototype.za=function(t){Pc(this.g,new r$)};Fv.prototype.ya=function(){Pc(this.g,"b")};function toe(){this.blockSize=-1}function Dp(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}ac(Dp,toe);Dp.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function ME(t,e,a){a||(a=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(a++)|e.charCodeAt(a++)<<8|e.charCodeAt(a++)<<16|e.charCodeAt(a++)<<24;else for(s=0;16>s;++s)r[s]=e[a++]|e[a++]<<8|e[a++]<<16|e[a++]<<24;e=t.g[0],a=t.g[1],s=t.g[2];var l=t.g[3],h=e+(l^a&(s^l))+r[0]+3614090360&4294967295;e=a+(h<<7&4294967295|h>>>25),h=l+(s^e&(a^s))+r[1]+3905402710&4294967295,l=e+(h<<12&4294967295|h>>>20),h=s+(a^l&(e^a))+r[2]+606105819&4294967295,s=l+(h<<17&4294967295|h>>>15),h=a+(e^s&(l^e))+r[3]+3250441966&4294967295,a=s+(h<<22&4294967295|h>>>10),h=e+(l^a&(s^l))+r[4]+4118548399&4294967295,e=a+(h<<7&4294967295|h>>>25),h=l+(s^e&(a^s))+r[5]+1200080426&4294967295,l=e+(h<<12&4294967295|h>>>20),h=s+(a^l&(e^a))+r[6]+2821735955&4294967295,s=l+(h<<17&4294967295|h>>>15),h=a+(e^s&(l^e))+r[7]+4249261313&4294967295,a=s+(h<<22&4294967295|h>>>10),h=e+(l^a&(s^l))+r[8]+1770035416&4294967295,e=a+(h<<7&4294967295|h>>>25),h=l+(s^e&(a^s))+r[9]+2336552879&4294967295,l=e+(h<<12&4294967295|h>>>20),h=s+(a^l&(e^a))+r[10]+4294925233&4294967295,s=l+(h<<17&4294967295|h>>>15),h=a+(e^s&(l^e))+r[11]+2304563134&4294967295,a=s+(h<<22&4294967295|h>>>10),h=e+(l^a&(s^l))+r[12]+1804603682&4294967295,e=a+(h<<7&4294967295|h>>>25),h=l+(s^e&(a^s))+r[13]+4254626195&4294967295,l=e+(h<<12&4294967295|h>>>20),h=s+(a^l&(e^a))+r[14]+2792965006&4294967295,s=l+(h<<17&4294967295|h>>>15),h=a+(e^s&(l^e))+r[15]+1236535329&4294967295,a=s+(h<<22&4294967295|h>>>10),h=e+(s^l&(a^s))+r[1]+4129170786&4294967295,e=a+(h<<5&4294967295|h>>>27),h=l+(a^s&(e^a))+r[6]+3225465664&4294967295,l=e+(h<<9&4294967295|h>>>23),h=s+(e^a&(l^e))+r[11]+643717713&4294967295,s=l+(h<<14&4294967295|h>>>18),h=a+(l^e&(s^l))+r[0]+3921069994&4294967295,a=s+(h<<20&4294967295|h>>>12),h=e+(s^l&(a^s))+r[5]+3593408605&4294967295,e=a+(h<<5&4294967295|h>>>27),h=l+(a^s&(e^a))+r[10]+38016083&4294967295,l=e+(h<<9&4294967295|h>>>23),h=s+(e^a&(l^e))+r[15]+3634488961&4294967295,s=l+(h<<14&4294967295|h>>>18),h=a+(l^e&(s^l))+r[4]+3889429448&4294967295,a=s+(h<<20&4294967295|h>>>12),h=e+(s^l&(a^s))+r[9]+568446438&4294967295,e=a+(h<<5&4294967295|h>>>27),h=l+(a^s&(e^a))+r[14]+3275163606&4294967295,l=e+(h<<9&4294967295|h>>>23),h=s+(e^a&(l^e))+r[3]+4107603335&4294967295,s=l+(h<<14&4294967295|h>>>18),h=a+(l^e&(s^l))+r[8]+1163531501&4294967295,a=s+(h<<20&4294967295|h>>>12),h=e+(s^l&(a^s))+r[13]+2850285829&4294967295,e=a+(h<<5&4294967295|h>>>27),h=l+(a^s&(e^a))+r[2]+4243563512&4294967295,l=e+(h<<9&4294967295|h>>>23),h=s+(e^a&(l^e))+r[7]+1735328473&4294967295,s=l+(h<<14&4294967295|h>>>18),h=a+(l^e&(s^l))+r[12]+2368359562&4294967295,a=s+(h<<20&4294967295|h>>>12),h=e+(a^s^l)+r[5]+4294588738&4294967295,e=a+(h<<4&4294967295|h>>>28),h=l+(e^a^s)+r[8]+2272392833&4294967295,l=e+(h<<11&4294967295|h>>>21),h=s+(l^e^a)+r[11]+1839030562&4294967295,s=l+(h<<16&4294967295|h>>>16),h=a+(s^l^e)+r[14]+4259657740&4294967295,a=s+(h<<23&4294967295|h>>>9),h=e+(a^s^l)+r[1]+2763975236&4294967295,e=a+(h<<4&4294967295|h>>>28),h=l+(e^a^s)+r[4]+1272893353&4294967295,l=e+(h<<11&4294967295|h>>>21),h=s+(l^e^a)+r[7]+4139469664&4294967295,s=l+(h<<16&4294967295|h>>>16),h=a+(s^l^e)+r[10]+3200236656&4294967295,a=s+(h<<23&4294967295|h>>>9),h=e+(a^s^l)+r[13]+681279174&4294967295,e=a+(h<<4&4294967295|h>>>28),h=l+(e^a^s)+r[0]+3936430074&4294967295,l=e+(h<<11&4294967295|h>>>21),h=s+(l^e^a)+r[3]+3572445317&4294967295,s=l+(h<<16&4294967295|h>>>16),h=a+(s^l^e)+r[6]+76029189&4294967295,a=s+(h<<23&4294967295|h>>>9),h=e+(a^s^l)+r[9]+3654602809&4294967295,e=a+(h<<4&4294967295|h>>>28),h=l+(e^a^s)+r[12]+3873151461&4294967295,l=e+(h<<11&4294967295|h>>>21),h=s+(l^e^a)+r[15]+530742520&4294967295,s=l+(h<<16&4294967295|h>>>16),h=a+(s^l^e)+r[2]+3299628645&4294967295,a=s+(h<<23&4294967295|h>>>9),h=e+(s^(a|~l))+r[0]+4096336452&4294967295,e=a+(h<<6&4294967295|h>>>26),h=l+(a^(e|~s))+r[7]+1126891415&4294967295,l=e+(h<<10&4294967295|h>>>22),h=s+(e^(l|~a))+r[14]+2878612391&4294967295,s=l+(h<<15&4294967295|h>>>17),h=a+(l^(s|~e))+r[5]+4237533241&4294967295,a=s+(h<<21&4294967295|h>>>11),h=e+(s^(a|~l))+r[12]+1700485571&4294967295,e=a+(h<<6&4294967295|h>>>26),h=l+(a^(e|~s))+r[3]+2399980690&4294967295,l=e+(h<<10&4294967295|h>>>22),h=s+(e^(l|~a))+r[10]+4293915773&4294967295,s=l+(h<<15&4294967295|h>>>17),h=a+(l^(s|~e))+r[1]+2240044497&4294967295,a=s+(h<<21&4294967295|h>>>11),h=e+(s^(a|~l))+r[8]+1873313359&4294967295,e=a+(h<<6&4294967295|h>>>26),h=l+(a^(e|~s))+r[15]+4264355552&4294967295,l=e+(h<<10&4294967295|h>>>22),h=s+(e^(l|~a))+r[6]+2734768916&4294967295,s=l+(h<<15&4294967295|h>>>17),h=a+(l^(s|~e))+r[13]+1309151649&4294967295,a=s+(h<<21&4294967295|h>>>11),h=e+(s^(a|~l))+r[4]+4149444226&4294967295,e=a+(h<<6&4294967295|h>>>26),h=l+(a^(e|~s))+r[11]+3174756917&4294967295,l=e+(h<<10&4294967295|h>>>22),h=s+(e^(l|~a))+r[2]+718787259&4294967295,s=l+(h<<15&4294967295|h>>>17),h=a+(l^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(h<<21&4294967295|h>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+l&4294967295}Dp.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var a=e-this.blockSize,r=this.m,s=this.h,l=0;l<e;){if(s==0)for(;l<=a;)ME(this,t,l),l+=this.blockSize;if(typeof t=="string"){for(;l<e;)if(r[s++]=t.charCodeAt(l++),s==this.blockSize){ME(this,r),s=0;break}}else for(;l<e;)if(r[s++]=t[l++],s==this.blockSize){ME(this,r),s=0;break}}this.h=s,this.i+=e};Dp.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var a=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=a&255,a/=256;for(this.j(t),t=Array(16),e=a=0;4>e;++e)for(var r=0;32>r;r+=8)t[a++]=this.g[e]>>>r&255;return t};function Fs(t,e){this.h=e;for(var a=[],r=!0,s=t.length-1;0<=s;s--){var l=t[s]|0;r&&l==e||(a[s]=l,r=!1)}this.g=a}var aoe={};function U3(t){return-128<=t&&128>t?use(t,function(e){return new Fs([e|0],0>e?-1:0)}):new Fs([t|0],0>t?-1:0)}function _m(t){if(isNaN(t)||!isFinite(t))return M_;if(0>t)return xc(_m(-t));for(var e=[],a=1,r=0;t>=a;r++)e[r]=t/a|0,a*=q5;return new Fs(e,0)}function n$(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return xc(n$(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var a=_m(Math.pow(e,8)),r=M_,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),h=parseInt(t.substring(s,s+l),e);8>l?(l=_m(Math.pow(e,l)),r=r.R(l).add(_m(h))):(r=r.R(a),r=r.add(_m(h)))}return r}var q5=4294967296,M_=U3(0),H5=U3(1),H6=U3(16777216);Br=Fs.prototype;Br.ea=function(){if(Ff(this))return-xc(this).ea();for(var t=0,e=1,a=0;a<this.g.length;a++){var r=this.D(a);t+=(0<=r?r:q5+r)*e,e*=q5}return t};Br.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(sy(this))return"0";if(Ff(this))return"-"+xc(this).toString(t);for(var e=_m(Math.pow(t,6)),a=this,r="";;){var s=db(a,e).g;a=cb(a,s.R(e));var l=((0<a.g.length?a.g[0]:a.h)>>>0).toString(t);if(a=s,sy(a))return l+r;for(;6>l.length;)l="0"+l;r=l+r}};Br.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function sy(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Ff(t){return t.h==-1}Br.X=function(t){return t=cb(this,t),Ff(t)?-1:sy(t)?0:1};function xc(t){for(var e=t.g.length,a=[],r=0;r<e;r++)a[r]=~t.g[r];return new Fs(a,~t.h).add(H5)}Br.abs=function(){return Ff(this)?xc(this):this};Br.add=function(t){for(var e=Math.max(this.g.length,t.g.length),a=[],r=0,s=0;s<=e;s++){var l=r+(this.D(s)&65535)+(t.D(s)&65535),h=(l>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=h>>>16,l&=65535,h&=65535,a[s]=h<<16|l}return new Fs(a,a[a.length-1]&-2147483648?-1:0)};function cb(t,e){return t.add(xc(e))}Br.R=function(t){if(sy(this)||sy(t))return M_;if(Ff(this))return Ff(t)?xc(this).R(xc(t)):xc(xc(this).R(t));if(Ff(t))return xc(this.R(xc(t)));if(0>this.X(H6)&&0>t.X(H6))return _m(this.ea()*t.ea());for(var e=this.g.length+t.g.length,a=[],r=0;r<2*e;r++)a[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var l=this.D(r)>>>16,h=this.D(r)&65535,n=t.D(s)>>>16,w=t.D(s)&65535;a[2*r+2*s]+=h*w,QS(a,2*r+2*s),a[2*r+2*s+1]+=l*w,QS(a,2*r+2*s+1),a[2*r+2*s+1]+=h*n,QS(a,2*r+2*s+1),a[2*r+2*s+2]+=l*n,QS(a,2*r+2*s+2)}for(r=0;r<e;r++)a[r]=a[2*r+1]<<16|a[2*r];for(r=e;r<2*e;r++)a[r]=0;return new Fs(a,0)};function QS(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function cw(t,e){this.g=t,this.h=e}function db(t,e){if(sy(e))throw Error("division by zero");if(sy(t))return new cw(M_,M_);if(Ff(t))return e=db(xc(t),e),new cw(xc(e.g),xc(e.h));if(Ff(e))return e=db(t,xc(e)),new cw(xc(e.g),e.h);if(30<t.g.length){if(Ff(t)||Ff(e))throw Error("slowDivide_ only works with positive integers.");for(var a=H5,r=e;0>=r.X(t);)a=$6(a),r=$6(r);var s=d_(a,1),l=d_(r,1);for(r=d_(r,2),a=d_(a,2);!sy(r);){var h=l.add(r);0>=h.X(t)&&(s=s.add(a),l=h),r=d_(r,1),a=d_(a,1)}return e=cb(t,s.R(e)),new cw(s,e)}for(s=M_;0<=t.X(e);){for(a=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(a)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),l=_m(a),h=l.R(e);Ff(h)||0<h.X(t);)a-=r,l=_m(a),h=l.R(e);sy(l)&&(l=H5),s=s.add(l),t=cb(t,h)}return new cw(s,t)}Br.gb=function(t){return db(this,t).h};Br.and=function(t){for(var e=Math.max(this.g.length,t.g.length),a=[],r=0;r<e;r++)a[r]=this.D(r)&t.D(r);return new Fs(a,this.h&t.h)};Br.or=function(t){for(var e=Math.max(this.g.length,t.g.length),a=[],r=0;r<e;r++)a[r]=this.D(r)|t.D(r);return new Fs(a,this.h|t.h)};Br.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),a=[],r=0;r<e;r++)a[r]=this.D(r)^t.D(r);return new Fs(a,this.h^t.h)};function $6(t){for(var e=t.g.length+1,a=[],r=0;r<e;r++)a[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Fs(a,t.h)}function d_(t,e){var a=e>>5;e%=32;for(var r=t.g.length-a,s=[],l=0;l<r;l++)s[l]=0<e?t.D(l+a)>>>e|t.D(l+a+1)<<32-e:t.D(l+a);return new Fs(s,t.h)}ub.prototype.createWebChannel=ub.prototype.g;cf.prototype.send=cf.prototype.u;cf.prototype.open=cf.prototype.m;cf.prototype.close=cf.prototype.close;G2.NO_ERROR=0;G2.TIMEOUT=8;G2.HTTP_ERROR=6;RH.COMPLETE="complete";TH.EventType=hT;hT.OPEN="a";hT.CLOSE="b";hT.ERROR="c";hT.MESSAGE="d";tc.prototype.listen=tc.prototype.O;Sl.prototype.listenOnce=Sl.prototype.P;Sl.prototype.getLastError=Sl.prototype.Sa;Sl.prototype.getLastErrorCode=Sl.prototype.Ia;Sl.prototype.getStatus=Sl.prototype.da;Sl.prototype.getResponseJson=Sl.prototype.Wa;Sl.prototype.getResponseText=Sl.prototype.ja;Sl.prototype.send=Sl.prototype.ha;Sl.prototype.setWithCredentials=Sl.prototype.Oa;Dp.prototype.digest=Dp.prototype.l;Dp.prototype.reset=Dp.prototype.reset;Dp.prototype.update=Dp.prototype.j;Fs.prototype.add=Fs.prototype.add;Fs.prototype.multiply=Fs.prototype.R;Fs.prototype.modulo=Fs.prototype.gb;Fs.prototype.compare=Fs.prototype.X;Fs.prototype.toNumber=Fs.prototype.ea;Fs.prototype.toString=Fs.prototype.toString;Fs.prototype.getBits=Fs.prototype.D;Fs.fromNumber=_m;Fs.fromString=n$;var roe=function(){return new ub},noe=function(){return B2()},IE=G2,ioe=RH,soe=y0,K6={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ooe=mT,eC=TH,loe=Sl,uoe=Dp,I_=Fs;const W6="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sd=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};sd.UNAUTHENTICATED=new sd(null),sd.GOOGLE_CREDENTIALS=new sd("google-credentials-uid"),sd.FIRST_PARTY=new sd("first-party-uid"),sd.MOCK_USER=new sd("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uv="9.23.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=new o3("@firebase/firestore");function Y6(){return o0.logLevel}function hn(t,...e){if(o0.logLevel<=fs.DEBUG){const a=e.map(k3);o0.debug(`Firestore (${Uv}): ${t}`,...a)}}function gy(t,...e){if(o0.logLevel<=fs.ERROR){const a=e.map(k3);o0.error(`Firestore (${Uv}): ${t}`,...a)}}function Y_(t,...e){if(o0.logLevel<=fs.WARN){const a=e.map(k3);o0.warn(`Firestore (${Uv}): ${t}`,...a)}}function k3(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(t="Unexpected state"){const e=`FIRESTORE (${Uv}) INTERNAL ASSERTION FAILED: `+t;throw gy(e),new Error(e)}function zo(t,e){t||ti()}function pi(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};let Zr=class extends Cy{constructor(e,a){super(e,a),this.code=e,this.message=a,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dy=class{constructor(){this.promise=new Promise((e,a)=>{this.resolve=e,this.reject=a})}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let i$=class{constructor(e,a){this.user=a,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},coe=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,a){e.enqueueRetryable(()=>a(sd.UNAUTHENTICATED))}shutdown(){}},doe=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,a){this.changeListener=a,e.enqueueRetryable(()=>a(this.token.user))}shutdown(){this.changeListener=null}},hoe=class{constructor(e){this.t=e,this.currentUser=sd.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,a){let r=this.i;const s=w=>this.i!==r?(r=this.i,a(w)):Promise.resolve();let l=new dy;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new dy,e.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const w=l;e.enqueueRetryable(async()=>{await w.promise,await s(this.currentUser)})},n=w=>{hn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(w=>n(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?n(w):(hn("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new dy)}},0),h()}getToken(){const e=this.i,a=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(a).then(r=>this.i!==e?(hn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(zo(typeof r.accessToken=="string"),new i$(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return zo(e===null||typeof e=="string"),new sd(e)}},foe=class{constructor(e,a,r){this.h=e,this.l=a,this.m=r,this.type="FirstParty",this.user=sd.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}},poe=class{constructor(e,a,r){this.h=e,this.l=a,this.m=r}getToken(){return Promise.resolve(new foe(this.h,this.l,this.m))}start(e,a){e.enqueueRetryable(()=>a(sd.FIRST_PARTY))}shutdown(){}invalidateToken(){}},moe=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},yoe=class{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,a){const r=l=>{l.error!=null&&hn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.T;return this.T=l.token,hn("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?a(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const s=l=>{hn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.I.onInit(l=>s(l)),setTimeout(()=>{if(!this.appCheck){const l=this.I.getImmediate({optional:!0});l?s(l):hn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(a=>a?(zo(typeof a.token=="string"),this.T=a.token,new moe(a.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function goe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),a=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(a);else for(let r=0;r<t;r++)a[r]=Math.floor(256*Math.random());return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let s$=class{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=goe(40);for(let l=0;l<s.length;++l)r.length<20&&s[l]<a&&(r+=e.charAt(s[l]%e.length))}return r}};function gs(t,e){return t<e?-1:t>e?1:0}function X_(t,e,a){return t.length===e.length&&t.every((r,s)=>a(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qd=class NC{constructor(e,a){if(this.seconds=e,this.nanoseconds=a,a<0)throw new Zr(ar.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+a);if(a>=1e9)throw new Zr(ar.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+a);if(e<-62135596800)throw new Zr(ar.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Zr(ar.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return NC.fromMillis(Date.now())}static fromDate(e){return NC.fromMillis(e.getTime())}static fromMillis(e){const a=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*a));return new NC(a,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?gs(this.nanoseconds,e.nanoseconds):gs(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ci=class VC{constructor(e){this.timestamp=e}static fromTimestamp(e){return new VC(e)}static min(){return new VC(new Qd(0,0))}static max(){return new VC(new Qd(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let o$=class $5{constructor(e,a,r){a===void 0?a=0:a>e.length&&ti(),r===void 0?r=e.length-a:r>e.length-a&&ti(),this.segments=e,this.offset=a,this.len=r}get length(){return this.len}isEqual(e){return $5.comparator(this,e)===0}child(e){const a=this.segments.slice(this.offset,this.limit());return e instanceof $5?e.forEach(r=>{a.push(r)}):a.push(e),this.construct(a)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let a=0;a<this.length;a++)if(this.get(a)!==e.get(a))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let a=0;a<this.length;a++)if(this.get(a)!==e.get(a))return!1;return!0}forEach(e){for(let a=this.offset,r=this.limit();a<r;a++)e(this.segments[a])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,a){const r=Math.min(e.length,a.length);for(let s=0;s<r;s++){const l=e.get(s),h=a.get(s);if(l<h)return-1;if(l>h)return 1}return e.length<a.length?-1:e.length>a.length?1:0}},Fl=class zC extends o${construct(e,a,r){return new zC(e,a,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const a=[];for(const r of e){if(r.indexOf("//")>=0)throw new Zr(ar.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);a.push(...r.split("/").filter(s=>s.length>0))}return new zC(a)}static emptyPath(){return new zC([])}};const Aoe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;let Em=class __ extends o${construct(e,a,r){return new __(e,a,r)}static isValidIdentifier(e){return Aoe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),__.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new __(["__name__"])}static fromServerFormat(e){const a=[];let r="",s=0;const l=()=>{if(r.length===0)throw new Zr(ar.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);a.push(r),r=""};let h=!1;for(;s<e.length;){const n=e[s];if(n==="\\"){if(s+1===e.length)throw new Zr(ar.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[s+1];if(w!=="\\"&&w!=="."&&w!=="`")throw new Zr(ar.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,s+=2}else n==="`"?(h=!h,s++):n!=="."||h?(r+=n,s++):(l(),s++)}if(l(),h)throw new Zr(ar.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new __(a)}static emptyPath(){return new __([])}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yn=class Ew{constructor(e){this.path=e}static fromPath(e){return new Ew(Fl.fromString(e))}static fromName(e){return new Ew(Fl.fromString(e).popFirst(5))}static empty(){return new Ew(Fl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fl.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,a){return Fl.comparator(e.path,a.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ew(new Fl(e.slice()))}};function _oe(t,e){const a=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ci.fromTimestamp(r===1e9?new Qd(a+1,0):new Qd(a,r));return new dR(s,Yn.empty(),e)}function voe(t){return new dR(t.readTime,t.key,-1)}let dR=class K5{constructor(e,a,r){this.readTime=e,this.documentKey=a,this.largestBatchId=r}static min(){return new K5(Ci.min(),Yn.empty(),-1)}static max(){return new K5(Ci.max(),Yn.empty(),-1)}};function woe(t,e){let a=t.readTime.compareTo(e.readTime);return a!==0?a:(a=Yn.comparator(t.documentKey,e.documentKey),a!==0?a:gs(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Roe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";let Toe=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AT(t){if(t.code!==ar.FAILED_PRECONDITION||t.message!==Roe)throw t;hn("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mr=class Sh{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(a=>{this.isDone=!0,this.result=a,this.nextCallback&&this.nextCallback(a)},a=>{this.isDone=!0,this.error=a,this.catchCallback&&this.catchCallback(a)})}catch(e){return this.next(void 0,e)}next(e,a){return this.callbackAttached&&ti(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(a,this.error):this.wrapSuccess(e,this.result):new Sh((r,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,s)},this.catchCallback=l=>{this.wrapFailure(a,l).next(r,s)}})}toPromise(){return new Promise((e,a)=>{this.next(e,a)})}wrapUserFunction(e){try{const a=e();return a instanceof Sh?a:Sh.resolve(a)}catch(a){return Sh.reject(a)}}wrapSuccess(e,a){return e?this.wrapUserFunction(()=>e(a)):Sh.resolve(a)}wrapFailure(e,a){return e?this.wrapUserFunction(()=>e(a)):Sh.reject(a)}static resolve(e){return new Sh((a,r)=>{a(e)})}static reject(e){return new Sh((a,r)=>{r(e)})}static waitFor(e){return new Sh((a,r)=>{let s=0,l=0,h=!1;e.forEach(n=>{++s,n.next(()=>{++l,h&&l===s&&a()},w=>r(w))}),h=!0,l===s&&a()})}static or(e){let a=Sh.resolve(!1);for(const r of e)a=a.next(s=>s?Sh.resolve(s):r());return a}static forEach(e,a){const r=[];return e.forEach((s,l)=>{r.push(a.call(this,s,l))}),this.waitFor(r)}static mapArray(e,a){return new Sh((r,s)=>{const l=e.length,h=new Array(l);let n=0;for(let w=0;w<l;w++){const T=w;a(e[T]).next(E=>{h[T]=E,++n,n===l&&r(h)},E=>s(E))}})}static doWhile(e,a){return new Sh((r,s)=>{const l=()=>{e()===!0?a().next(()=>{l()},s):r()};l()})}};function _T(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let B3=class{constructor(e,a){this.previousValue=e,a&&(a.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>a.writeSequenceNumber(r))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}};B3.ct=-1;function Y2(t){return t==null}function hb(t){return t===0&&1/t==-1/0}function Soe(t){return typeof t=="number"&&Number.isInteger(t)&&!hb(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X6(t){let e=0;for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&e++;return e}function g0(t,e){for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&e(a,t[a])}function l$(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cu=class W5{constructor(e,a){this.comparator=e,this.root=a||bc.EMPTY}insert(e,a){return new W5(this.comparator,this.root.insert(e,a,this.comparator).copy(null,null,bc.BLACK,null,null))}remove(e){return new W5(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bc.BLACK,null,null))}get(e){let a=this.root;for(;!a.isEmpty();){const r=this.comparator(e,a.key);if(r===0)return a.value;r<0?a=a.left:r>0&&(a=a.right)}return null}indexOf(e){let a=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return a+r.left.size;s<0?r=r.left:(a+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((a,r)=>(e(a,r),!1))}toString(){const e=[];return this.inorderTraversal((a,r)=>(e.push(`${a}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tC(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tC(this.root,e,this.comparator,!1)}getReverseIterator(){return new tC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tC(this.root,e,this.comparator,!0)}};class tC{constructor(e,a,r,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=a?r(e.key,a):1,a&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const a={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return a}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bc{constructor(e,a,r,s,l){this.key=e,this.value=a,this.color=r??bc.RED,this.left=s??bc.EMPTY,this.right=l??bc.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,a,r,s,l){return new bc(e??this.key,a??this.value,r??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,a,r){let s=this;const l=r(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,a,r),null):l===0?s.copy(null,a,null,null,null):s.copy(null,null,null,null,s.right.insert(e,a,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return bc.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,a){let r,s=this;if(a(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,a),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),a(e,s.key)===0){if(s.right.isEmpty())return bc.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,a))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),a=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,a)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ti();const e=this.left.check();if(e!==this.right.check())throw ti();return e+(this.isRed()?0:1)}}bc.EMPTY=null,bc.RED=!0,bc.BLACK=!1;bc.EMPTY=new class{constructor(){this.size=0}get key(){throw ti()}get value(){throw ti()}get color(){throw ti()}get left(){throw ti()}get right(){throw ti()}copy(t,e,a,r,s){return this}insert(t,e,a){return new bc(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e){this.comparator=e,this.data=new cu(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((a,r)=>(e(a),!1))}forEachInRange(e,a){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;a(s.key)}}forEachWhile(e,a){let r;for(r=a!==void 0?this.data.getIteratorFrom(a):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const a=this.data.getIteratorFrom(e);return a.hasNext()?a.getNext().key:null}getIterator(){return new J6(this.data.getIterator())}getIteratorFrom(e){return new J6(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let a=this;return a.size<e.size&&(a=e,e=this),e.forEach(r=>{a=a.add(r)}),a}isEqual(e){if(!(e instanceof yd)||this.size!==e.size)return!1;const a=this.data.getIterator(),r=e.data.getIterator();for(;a.hasNext();){const s=a.getNext().key,l=r.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(a=>{e.push(a)}),e}toString(){const e=[];return this.forEach(a=>e.push(a)),"SortedSet("+e.toString()+")"}copy(e){const a=new yd(this.comparator);return a.data=e,a}}class J6{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e){this.fields=e,e.sort(Em.comparator)}static empty(){return new nf([])}unionWith(e){let a=new yd(Em.comparator);for(const r of this.fields)a=a.add(r);for(const r of e)a=a.add(r);return new nf(a.toArray())}covers(e){for(const a of this.fields)if(a.isPrefixOf(e))return!0;return!1}isEqual(e){return X_(this.fields,e.fields,(a,r)=>a.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u$ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e){this.binaryString=e}static fromBase64String(e){const a=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new u$("Invalid base64 string: "+s):s}}(e);return new Ad(a)}static fromUint8Array(e){const a=function(r){let s="";for(let l=0;l<r.length;++l)s+=String.fromCharCode(r[l]);return s}(e);return new Ad(a)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const a=new Uint8Array(e.length);for(let r=0;r<e.length;r++)a[r]=e.charCodeAt(r);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return gs(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ad.EMPTY_BYTE_STRING=new Ad("");const Coe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zg(t){if(zo(!!t),typeof t=="string"){let e=0;const a=Coe.exec(t);if(zo(!!a),a[1]){let s=a[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:su(t.seconds),nanos:su(t.nanos)}}function su(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function l0(t){return typeof t=="string"?Ad.fromBase64String(t):Ad.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G3(t){var e,a;return((a=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||a===void 0?void 0:a.stringValue)==="server_timestamp"}function j3(t){const e=t.mapValue.fields.__previous_value__;return G3(e)?j3(e):e}function hR(t){const e=zg(t.mapValue.fields.__local_write_time__.timestampValue);return new Qd(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class boe{constructor(e,a,r,s,l,h,n,w,T){this.databaseId=e,this.appId=a,this.persistenceKey=r,this.host=s,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=n,this.longPollingOptions=w,this.useFetchStreams=T}}class fR{constructor(e,a){this.projectId=e,this.database=a||"(default)"}static empty(){return new fR("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof fR&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC={mapValue:{}};function u0(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?G3(t)?4:xoe(t)?9007199254740991:10:ti()}function Nm(t,e){if(t===e)return!0;const a=u0(t);if(a!==u0(e))return!1;switch(a){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return hR(t).isEqual(hR(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const l=zg(r.timestampValue),h=zg(s.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return l0(r.bytesValue).isEqual(l0(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return su(r.geoPointValue.latitude)===su(s.geoPointValue.latitude)&&su(r.geoPointValue.longitude)===su(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return su(r.integerValue)===su(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const l=su(r.doubleValue),h=su(s.doubleValue);return l===h?hb(l)===hb(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return X_(t.arrayValue.values||[],e.arrayValue.values||[],Nm);case 10:return function(r,s){const l=r.mapValue.fields||{},h=s.mapValue.fields||{};if(X6(l)!==X6(h))return!1;for(const n in l)if(l.hasOwnProperty(n)&&(h[n]===void 0||!Nm(l[n],h[n])))return!1;return!0}(t,e);default:return ti()}}function pR(t,e){return(t.values||[]).find(a=>Nm(a,e))!==void 0}function J_(t,e){if(t===e)return 0;const a=u0(t),r=u0(e);if(a!==r)return gs(a,r);switch(a){case 0:case 9007199254740991:return 0;case 1:return gs(t.booleanValue,e.booleanValue);case 2:return function(s,l){const h=su(s.integerValue||s.doubleValue),n=su(l.integerValue||l.doubleValue);return h<n?-1:h>n?1:h===n?0:isNaN(h)?isNaN(n)?0:-1:1}(t,e);case 3:return Q6(t.timestampValue,e.timestampValue);case 4:return Q6(hR(t),hR(e));case 5:return gs(t.stringValue,e.stringValue);case 6:return function(s,l){const h=l0(s),n=l0(l);return h.compareTo(n)}(t.bytesValue,e.bytesValue);case 7:return function(s,l){const h=s.split("/"),n=l.split("/");for(let w=0;w<h.length&&w<n.length;w++){const T=gs(h[w],n[w]);if(T!==0)return T}return gs(h.length,n.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,l){const h=gs(su(s.latitude),su(l.latitude));return h!==0?h:gs(su(s.longitude),su(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,l){const h=s.values||[],n=l.values||[];for(let w=0;w<h.length&&w<n.length;++w){const T=J_(h[w],n[w]);if(T)return T}return gs(h.length,n.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,l){if(s===aC.mapValue&&l===aC.mapValue)return 0;if(s===aC.mapValue)return 1;if(l===aC.mapValue)return-1;const h=s.fields||{},n=Object.keys(h),w=l.fields||{},T=Object.keys(w);n.sort(),T.sort();for(let E=0;E<n.length&&E<T.length;++E){const z=gs(n[E],T[E]);if(z!==0)return z;const k=J_(h[n[E]],w[T[E]]);if(k!==0)return k}return gs(n.length,T.length)}(t.mapValue,e.mapValue);default:throw ti()}}function Q6(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return gs(t,e);const a=zg(t),r=zg(e),s=gs(a.seconds,r.seconds);return s!==0?s:gs(a.nanos,r.nanos)}function Q_(t){return Y5(t)}function Y5(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const s=zg(r);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?l0(t.bytesValue).toBase64():"referenceValue"in t?(a=t.referenceValue,Yn.fromName(a).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let s="[",l=!0;for(const h of r.values||[])l?l=!1:s+=",",s+=Y5(h);return s+"]"}(t.arrayValue):"mapValue"in t?function(r){const s=Object.keys(r.fields||{}).sort();let l="{",h=!0;for(const n of s)h?h=!1:l+=",",l+=`${n}:${Y5(r.fields[n])}`;return l+"}"}(t.mapValue):ti();var e,a}function eU(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function X5(t){return!!t&&"integerValue"in t}function Z3(t){return!!t&&"arrayValue"in t}function tU(t){return!!t&&"nullValue"in t}function aU(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function OC(t){return!!t&&"mapValue"in t}function Fw(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return g0(t.mapValue.fields,(a,r)=>e.mapValue.fields[a]=Fw(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let a=0;a<(t.arrayValue.values||[]).length;++a)e.arrayValue.values[a]=Fw(t.arrayValue.values[a]);return e}return Object.assign({},t)}function xoe(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e){this.value=e}static empty(){return new Ch({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let a=this.value;for(let r=0;r<e.length-1;++r)if(a=(a.mapValue.fields||{})[e.get(r)],!OC(a))return null;return a=(a.mapValue.fields||{})[e.lastSegment()],a||null}}set(e,a){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fw(a)}setAll(e){let a=Em.emptyPath(),r={},s=[];e.forEach((h,n)=>{if(!a.isImmediateParentOf(n)){const w=this.getFieldsMap(a);this.applyChanges(w,r,s),r={},s=[],a=n.popLast()}h?r[n.lastSegment()]=Fw(h):s.push(n.lastSegment())});const l=this.getFieldsMap(a);this.applyChanges(l,r,s)}delete(e){const a=this.field(e.popLast());OC(a)&&a.mapValue.fields&&delete a.mapValue.fields[e.lastSegment()]}isEqual(e){return Nm(this.value,e.value)}getFieldsMap(e){let a=this.value;a.mapValue.fields||(a.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=a.mapValue.fields[e.get(r)];OC(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},a.mapValue.fields[e.get(r)]=s),a=s}return a.mapValue.fields}applyChanges(e,a,r){g0(a,(s,l)=>e[s]=l);for(const s of r)delete e[s]}clone(){return new Ch(Fw(this.value))}}function c$(t){const e=[];return g0(t.fields,(a,r)=>{const s=new Em([a]);if(OC(r)){const l=c$(r.mapValue).fields;if(l.length===0)e.push(s);else for(const h of l)e.push(s.child(h))}else e.push(s)}),new nf(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,a,r,s,l,h,n){this.key=e,this.documentType=a,this.version=r,this.readTime=s,this.createTime=l,this.data=h,this.documentState=n}static newInvalidDocument(e){return new ud(e,0,Ci.min(),Ci.min(),Ci.min(),Ch.empty(),0)}static newFoundDocument(e,a,r,s){return new ud(e,1,a,Ci.min(),r,s,0)}static newNoDocument(e,a){return new ud(e,2,a,Ci.min(),Ci.min(),Ch.empty(),0)}static newUnknownDocument(e,a){return new ud(e,3,a,Ci.min(),Ci.min(),Ch.empty(),2)}convertToFoundDocument(e,a){return!this.createTime.isEqual(Ci.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=a,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ch.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ch.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ci.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ud&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ud(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e,a){this.position=e,this.inclusive=a}}function rU(t,e,a){let r=0;for(let s=0;s<t.position.length;s++){const l=e[s],h=t.position[s];if(l.field.isKeyField()?r=Yn.comparator(Yn.fromName(h.referenceValue),a.key):r=J_(h,a.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function nU(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let a=0;a<t.position.length;a++)if(!Nm(t.position[a],e.position[a]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,a="asc"){this.field=e,this.dir=a}}function Poe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d${}class lu extends d${constructor(e,a,r){super(),this.field=e,this.op=a,this.value=r}static create(e,a,r){return e.isKeyField()?a==="in"||a==="not-in"?this.createKeyFieldInFilter(e,a,r):new Noe(e,a,r):a==="array-contains"?new Ooe(e,r):a==="in"?new Doe(e,r):a==="not-in"?new Moe(e,r):a==="array-contains-any"?new Ioe(e,r):new lu(e,a,r)}static createKeyFieldInFilter(e,a,r){return a==="in"?new Voe(e,r):new zoe(e,r)}matches(e){const a=e.data.field(this.field);return this.op==="!="?a!==null&&this.matchesComparison(J_(a,this.value)):a!==null&&u0(this.value)===u0(a)&&this.matchesComparison(J_(a,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ti()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Mp extends d${constructor(e,a){super(),this.filters=e,this.op=a,this.lt=null}static create(e,a){return new Mp(e,a)}matches(e){return h$(this)?this.filters.find(a=>!a.matches(e))===void 0:this.filters.find(a=>a.matches(e))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce((e,a)=>e.concat(a.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(a=>a.isInequality());return e!==null?e.field:null}ft(e){for(const a of this.getFlattenedFilters())if(e(a))return a;return null}}function h$(t){return t.op==="and"}function f$(t){return Eoe(t)&&h$(t)}function Eoe(t){for(const e of t.filters)if(e instanceof Mp)return!1;return!0}function J5(t){if(t instanceof lu)return t.field.canonicalString()+t.op.toString()+Q_(t.value);if(f$(t))return t.filters.map(e=>J5(e)).join(",");{const e=t.filters.map(a=>J5(a)).join(",");return`${t.op}(${e})`}}function p$(t,e){return t instanceof lu?function(a,r){return r instanceof lu&&a.op===r.op&&a.field.isEqual(r.field)&&Nm(a.value,r.value)}(t,e):t instanceof Mp?function(a,r){return r instanceof Mp&&a.op===r.op&&a.filters.length===r.filters.length?a.filters.reduce((s,l,h)=>s&&p$(l,r.filters[h]),!0):!1}(t,e):void ti()}function m$(t){return t instanceof lu?function(e){return`${e.field.canonicalString()} ${e.op} ${Q_(e.value)}`}(t):t instanceof Mp?function(e){return e.op.toString()+" {"+e.getFilters().map(m$).join(" ,")+"}"}(t):"Filter"}class Noe extends lu{constructor(e,a,r){super(e,a,r),this.key=Yn.fromName(r.referenceValue)}matches(e){const a=Yn.comparator(e.key,this.key);return this.matchesComparison(a)}}class Voe extends lu{constructor(e,a){super(e,"in",a),this.keys=y$("in",a)}matches(e){return this.keys.some(a=>a.isEqual(e.key))}}class zoe extends lu{constructor(e,a){super(e,"not-in",a),this.keys=y$("not-in",a)}matches(e){return!this.keys.some(a=>a.isEqual(e.key))}}function y$(t,e){var a;return(((a=e.arrayValue)===null||a===void 0?void 0:a.values)||[]).map(r=>Yn.fromName(r.referenceValue))}class Ooe extends lu{constructor(e,a){super(e,"array-contains",a)}matches(e){const a=e.data.field(this.field);return Z3(a)&&pR(a.arrayValue,this.value)}}class Doe extends lu{constructor(e,a){super(e,"in",a)}matches(e){const a=e.data.field(this.field);return a!==null&&pR(this.value.arrayValue,a)}}class Moe extends lu{constructor(e,a){super(e,"not-in",a)}matches(e){if(pR(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const a=e.data.field(this.field);return a!==null&&!pR(this.value.arrayValue,a)}}class Ioe extends lu{constructor(e,a){super(e,"array-contains-any",a)}matches(e){const a=e.data.field(this.field);return!(!Z3(a)||!a.arrayValue.values)&&a.arrayValue.values.some(r=>pR(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Loe{constructor(e,a=null,r=[],s=[],l=null,h=null,n=null){this.path=e,this.collectionGroup=a,this.orderBy=r,this.filters=s,this.limit=l,this.startAt=h,this.endAt=n,this.dt=null}}function iU(t,e=null,a=[],r=[],s=null,l=null,h=null){return new Loe(t,e,a,r,s,l,h)}function q3(t){const e=pi(t);if(e.dt===null){let a=e.path.canonicalString();e.collectionGroup!==null&&(a+="|cg:"+e.collectionGroup),a+="|f:",a+=e.filters.map(r=>J5(r)).join(","),a+="|ob:",a+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Y2(e.limit)||(a+="|l:",a+=e.limit),e.startAt&&(a+="|lb:",a+=e.startAt.inclusive?"b:":"a:",a+=e.startAt.position.map(r=>Q_(r)).join(",")),e.endAt&&(a+="|ub:",a+=e.endAt.inclusive?"a:":"b:",a+=e.endAt.position.map(r=>Q_(r)).join(",")),e.dt=a}return e.dt}function H3(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let a=0;a<t.orderBy.length;a++)if(!Poe(t.orderBy[a],e.orderBy[a]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let a=0;a<t.filters.length;a++)if(!p$(t.filters[a],e.filters[a]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!nU(t.startAt,e.startAt)&&nU(t.endAt,e.endAt)}function Q5(t){return Yn.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,a=null,r=[],s=[],l=null,h="F",n=null,w=null){this.path=e,this.collectionGroup=a,this.explicitOrderBy=r,this.filters=s,this.limit=l,this.limitType=h,this.startAt=n,this.endAt=w,this.wt=null,this._t=null,this.startAt,this.endAt}}function Foe(t,e,a,r,s,l,h,n){return new kv(t,e,a,r,s,l,h,n)}function X2(t){return new kv(t)}function sU(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function $3(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function J2(t){for(const e of t.filters){const a=e.getFirstInequalityField();if(a!==null)return a}return null}function g$(t){return t.collectionGroup!==null}function F_(t){const e=pi(t);if(e.wt===null){e.wt=[];const a=J2(e),r=$3(e);if(a!==null&&r===null)a.isKeyField()||e.wt.push(new L_(a)),e.wt.push(new L_(Em.keyField(),"asc"));else{let s=!1;for(const l of e.explicitOrderBy)e.wt.push(l),l.field.isKeyField()&&(s=!0);if(!s){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new L_(Em.keyField(),l))}}}return e.wt}function Ay(t){const e=pi(t);if(!e._t)if(e.limitType==="F")e._t=iU(e.path,e.collectionGroup,F_(e),e.filters,e.limit,e.startAt,e.endAt);else{const a=[];for(const l of F_(e)){const h=l.dir==="desc"?"asc":"desc";a.push(new L_(l.field,h))}const r=e.endAt?new fb(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new fb(e.startAt.position,e.startAt.inclusive):null;e._t=iU(e.path,e.collectionGroup,a,e.filters,e.limit,r,s)}return e._t}function eD(t,e){e.getFirstInequalityField(),J2(t);const a=t.filters.concat([e]);return new kv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),a,t.limit,t.limitType,t.startAt,t.endAt)}function tD(t,e,a){return new kv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,a,t.startAt,t.endAt)}function Q2(t,e){return H3(Ay(t),Ay(e))&&t.limitType===e.limitType}function A$(t){return`${q3(Ay(t))}|lt:${t.limitType}`}function aD(t){return`Query(target=${function(e){let a=e.path.canonicalString();return e.collectionGroup!==null&&(a+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(a+=`, filters: [${e.filters.map(r=>m$(r)).join(", ")}]`),Y2(e.limit)||(a+=", limit: "+e.limit),e.orderBy.length>0&&(a+=`, orderBy: [${e.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),e.startAt&&(a+=", startAt: ",a+=e.startAt.inclusive?"b:":"a:",a+=e.startAt.position.map(r=>Q_(r)).join(",")),e.endAt&&(a+=", endAt: ",a+=e.endAt.inclusive?"a:":"b:",a+=e.endAt.position.map(r=>Q_(r)).join(",")),`Target(${a})`}(Ay(t))}; limitType=${t.limitType})`}function ex(t,e){return e.isFoundDocument()&&function(a,r){const s=r.key.path;return a.collectionGroup!==null?r.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(s):Yn.isDocumentKey(a.path)?a.path.isEqual(s):a.path.isImmediateParentOf(s)}(t,e)&&function(a,r){for(const s of F_(a))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(a,r){for(const s of a.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(a,r){return!(a.startAt&&!function(s,l,h){const n=rU(s,l,h);return s.inclusive?n<=0:n<0}(a.startAt,F_(a),r)||a.endAt&&!function(s,l,h){const n=rU(s,l,h);return s.inclusive?n>=0:n>0}(a.endAt,F_(a),r))}(t,e)}function Uoe(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function _$(t){return(e,a)=>{let r=!1;for(const s of F_(t)){const l=koe(s,e,a);if(l!==0)return l;r=r||s.field.isKeyField()}return 0}}function koe(t,e,a){const r=t.field.isKeyField()?Yn.comparator(e.key,a.key):function(s,l,h){const n=l.data.field(s),w=h.data.field(s);return n!==null&&w!==null?J_(n,w):ti()}(t.field,e,a);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ti()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,a){this.mapKeyFn=e,this.equalsFn=a,this.inner={},this.innerSize=0}get(e){const a=this.mapKeyFn(e),r=this.inner[a];if(r!==void 0){for(const[s,l]of r)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,a){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,a]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,a]);s.push([e,a]),this.innerSize++}delete(e){const a=this.mapKeyFn(e),r=this.inner[a];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[a]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){g0(this.inner,(a,r)=>{for(const[s,l]of r)e(s,l)})}isEmpty(){return l$(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Boe=new cu(Yn.comparator);function _y(){return Boe}const v$=new cu(Yn.comparator);function Nw(...t){let e=v$;for(const a of t)e=e.insert(a.key,a);return e}function w$(t){let e=v$;return t.forEach((a,r)=>e=e.insert(a,r.overlayedDocument)),e}function qA(){return Uw()}function R$(){return Uw()}function Uw(){return new Bv(t=>t.toString(),(t,e)=>t.isEqual(e))}const Goe=new cu(Yn.comparator),joe=new yd(Yn.comparator);function ki(...t){let e=joe;for(const a of t)e=e.add(a);return e}const Zoe=new yd(gs);function qoe(){return Zoe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T$(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hb(e)?"-0":e}}function S$(t){return{integerValue:""+t}}function Hoe(t,e){return Soe(e)?S$(e):T$(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(){this._=void 0}}function $oe(t,e,a){return t instanceof pb?function(r,s){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&G3(s)&&(s=j3(s)),s&&(l.fields.__previous_value__=s),{mapValue:l}}(a,e):t instanceof mR?b$(t,e):t instanceof yR?x$(t,e):function(r,s){const l=C$(r,s),h=oU(l)+oU(r.gt);return X5(l)&&X5(r.gt)?S$(h):T$(r.serializer,h)}(t,e)}function Koe(t,e,a){return t instanceof mR?b$(t,e):t instanceof yR?x$(t,e):a}function C$(t,e){return t instanceof mb?X5(a=e)||function(r){return!!r&&"doubleValue"in r}(a)?e:{integerValue:0}:null;var a}class pb extends tx{}class mR extends tx{constructor(e){super(),this.elements=e}}function b$(t,e){const a=P$(e);for(const r of t.elements)a.some(s=>Nm(s,r))||a.push(r);return{arrayValue:{values:a}}}class yR extends tx{constructor(e){super(),this.elements=e}}function x$(t,e){let a=P$(e);for(const r of t.elements)a=a.filter(s=>!Nm(s,r));return{arrayValue:{values:a}}}class mb extends tx{constructor(e,a){super(),this.serializer=e,this.gt=a}}function oU(t){return su(t.integerValue||t.doubleValue)}function P$(t){return Z3(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Woe(t,e){return t.field.isEqual(e.field)&&function(a,r){return a instanceof mR&&r instanceof mR||a instanceof yR&&r instanceof yR?X_(a.elements,r.elements,Nm):a instanceof mb&&r instanceof mb?Nm(a.gt,r.gt):a instanceof pb&&r instanceof pb}(t.transform,e.transform)}class Yoe{constructor(e,a){this.version=e,this.transformResults=a}}class xh{constructor(e,a){this.updateTime=e,this.exists=a}static none(){return new xh}static exists(e){return new xh(void 0,e)}static updateTime(e){return new xh(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function DC(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ax{}function E$(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new rx(t.key,xh.none()):new vT(t.key,t.data,xh.none());{const a=t.data,r=Ch.empty();let s=new yd(Em.comparator);for(let l of e.fields)if(!s.has(l)){let h=a.field(l);h===null&&l.length>1&&(l=l.popLast(),h=a.field(l)),h===null?r.delete(l):r.set(l,h),s=s.add(l)}return new Bg(t.key,r,new nf(s.toArray()),xh.none())}}function Xoe(t,e,a){t instanceof vT?function(r,s,l){const h=r.value.clone(),n=uU(r.fieldTransforms,s,l.transformResults);h.setAll(n),s.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,a):t instanceof Bg?function(r,s,l){if(!DC(r.precondition,s))return void s.convertToUnknownDocument(l.version);const h=uU(r.fieldTransforms,s,l.transformResults),n=s.data;n.setAll(N$(r)),n.setAll(h),s.convertToFoundDocument(l.version,n).setHasCommittedMutations()}(t,e,a):function(r,s,l){s.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,a)}function kw(t,e,a,r){return t instanceof vT?function(s,l,h,n){if(!DC(s.precondition,l))return h;const w=s.value.clone(),T=cU(s.fieldTransforms,n,l);return w.setAll(T),l.convertToFoundDocument(l.version,w).setHasLocalMutations(),null}(t,e,a,r):t instanceof Bg?function(s,l,h,n){if(!DC(s.precondition,l))return h;const w=cU(s.fieldTransforms,n,l),T=l.data;return T.setAll(N$(s)),T.setAll(w),l.convertToFoundDocument(l.version,T).setHasLocalMutations(),h===null?null:h.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(E=>E.field))}(t,e,a,r):function(s,l,h){return DC(s.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,a)}function Joe(t,e){let a=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),l=C$(r.transform,s||null);l!=null&&(a===null&&(a=Ch.empty()),a.set(r.field,l))}return a||null}function lU(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(a,r){return a===void 0&&r===void 0||!(!a||!r)&&X_(a,r,(s,l)=>Woe(s,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class vT extends ax{constructor(e,a,r,s=[]){super(),this.key=e,this.value=a,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Bg extends ax{constructor(e,a,r,s,l=[]){super(),this.key=e,this.data=a,this.fieldMask=r,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function N$(t){const e=new Map;return t.fieldMask.fields.forEach(a=>{if(!a.isEmpty()){const r=t.data.field(a);e.set(a,r)}}),e}function uU(t,e,a){const r=new Map;zo(t.length===a.length);for(let s=0;s<a.length;s++){const l=t[s],h=l.transform,n=e.data.field(l.field);r.set(l.field,Koe(h,n,a[s]))}return r}function cU(t,e,a){const r=new Map;for(const s of t){const l=s.transform,h=a.data.field(s.field);r.set(s.field,$oe(l,h,e))}return r}class rx extends ax{constructor(e,a){super(),this.key=e,this.precondition=a,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Qoe extends ax{constructor(e,a){super(),this.key=e,this.precondition=a,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ele{constructor(e,a,r,s){this.batchId=e,this.localWriteTime=a,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,a){const r=a.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&Xoe(l,e,r[s])}}applyToLocalView(e,a){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(a=kw(r,e,a,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(a=kw(r,e,a,this.localWriteTime));return a}applyToLocalDocumentSet(e,a){const r=R$();return this.mutations.forEach(s=>{const l=e.get(s.key),h=l.overlayedDocument;let n=this.applyToLocalView(h,l.mutatedFields);n=a.has(s.key)?null:n;const w=E$(h,n);w!==null&&r.set(s.key,w),h.isValidDocument()||h.convertToNoDocument(Ci.min())}),r}keys(){return this.mutations.reduce((e,a)=>e.add(a.key),ki())}isEqual(e){return this.batchId===e.batchId&&X_(this.mutations,e.mutations,(a,r)=>lU(a,r))&&X_(this.baseMutations,e.baseMutations,(a,r)=>lU(a,r))}}class K3{constructor(e,a,r,s){this.batch=e,this.commitVersion=a,this.mutationResults=r,this.docVersions=s}static from(e,a,r){zo(e.mutations.length===r.length);let s=Goe;const l=e.mutations;for(let h=0;h<l.length;h++)s=s.insert(l[h].key,r[h].version);return new K3(e,a,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tle{constructor(e,a){this.largestBatchId=e,this.mutation=a}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ale{constructor(e,a){this.count=e,this.unchangedNames=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nu,rs;function rle(t){switch(t){default:return ti();case ar.CANCELLED:case ar.UNKNOWN:case ar.DEADLINE_EXCEEDED:case ar.RESOURCE_EXHAUSTED:case ar.INTERNAL:case ar.UNAVAILABLE:case ar.UNAUTHENTICATED:return!1;case ar.INVALID_ARGUMENT:case ar.NOT_FOUND:case ar.ALREADY_EXISTS:case ar.PERMISSION_DENIED:case ar.FAILED_PRECONDITION:case ar.ABORTED:case ar.OUT_OF_RANGE:case ar.UNIMPLEMENTED:case ar.DATA_LOSS:return!0}}function V$(t){if(t===void 0)return gy("GRPC error has no .code"),ar.UNKNOWN;switch(t){case nu.OK:return ar.OK;case nu.CANCELLED:return ar.CANCELLED;case nu.UNKNOWN:return ar.UNKNOWN;case nu.DEADLINE_EXCEEDED:return ar.DEADLINE_EXCEEDED;case nu.RESOURCE_EXHAUSTED:return ar.RESOURCE_EXHAUSTED;case nu.INTERNAL:return ar.INTERNAL;case nu.UNAVAILABLE:return ar.UNAVAILABLE;case nu.UNAUTHENTICATED:return ar.UNAUTHENTICATED;case nu.INVALID_ARGUMENT:return ar.INVALID_ARGUMENT;case nu.NOT_FOUND:return ar.NOT_FOUND;case nu.ALREADY_EXISTS:return ar.ALREADY_EXISTS;case nu.PERMISSION_DENIED:return ar.PERMISSION_DENIED;case nu.FAILED_PRECONDITION:return ar.FAILED_PRECONDITION;case nu.ABORTED:return ar.ABORTED;case nu.OUT_OF_RANGE:return ar.OUT_OF_RANGE;case nu.UNIMPLEMENTED:return ar.UNIMPLEMENTED;case nu.DATA_LOSS:return ar.DATA_LOSS;default:return ti()}}(rs=nu||(nu={}))[rs.OK=0]="OK",rs[rs.CANCELLED=1]="CANCELLED",rs[rs.UNKNOWN=2]="UNKNOWN",rs[rs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rs[rs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rs[rs.NOT_FOUND=5]="NOT_FOUND",rs[rs.ALREADY_EXISTS=6]="ALREADY_EXISTS",rs[rs.PERMISSION_DENIED=7]="PERMISSION_DENIED",rs[rs.UNAUTHENTICATED=16]="UNAUTHENTICATED",rs[rs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rs[rs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rs[rs.ABORTED=10]="ABORTED",rs[rs.OUT_OF_RANGE=11]="OUT_OF_RANGE",rs[rs.UNIMPLEMENTED=12]="UNIMPLEMENTED",rs[rs.INTERNAL=13]="INTERNAL",rs[rs.UNAVAILABLE=14]="UNAVAILABLE",rs[rs.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return rC}static getOrCreateInstance(){return rC===null&&(rC=new W3),rC}onExistenceFilterMismatch(e){const a=Symbol();return this.onExistenceFilterMismatchCallbacks.set(a,e),()=>this.onExistenceFilterMismatchCallbacks.delete(a)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(a=>a(e))}}let rC=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nle(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ile=new I_([4294967295,4294967295],0);function dU(t){const e=nle().encode(t),a=new uoe;return a.update(e),new Uint8Array(a.digest())}function hU(t){const e=new DataView(t.buffer),a=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new I_([a,r],0),new I_([s,l],0)]}class Y3{constructor(e,a,r){if(this.bitmap=e,this.padding=a,this.hashCount=r,a<0||a>=8)throw new Vw(`Invalid padding: ${a}`);if(r<0)throw new Vw(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Vw(`Invalid hash count: ${r}`);if(e.length===0&&a!==0)throw new Vw(`Invalid padding when bitmap length is 0: ${a}`);this.It=8*e.length-a,this.Tt=I_.fromNumber(this.It)}Et(e,a,r){let s=e.add(a.multiply(I_.fromNumber(r)));return s.compare(ile)===1&&(s=new I_([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Tt).toNumber()}At(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}vt(e){if(this.It===0)return!1;const a=dU(e),[r,s]=hU(a);for(let l=0;l<this.hashCount;l++){const h=this.Et(r,s,l);if(!this.At(h))return!1}return!0}static create(e,a,r){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Y3(l,s,a);return r.forEach(n=>h.insert(n)),h}insert(e){if(this.It===0)return;const a=dU(e),[r,s]=hU(a);for(let l=0;l<this.hashCount;l++){const h=this.Et(r,s,l);this.Rt(h)}}Rt(e){const a=Math.floor(e/8),r=e%8;this.bitmap[a]|=1<<r}}class Vw extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,a,r,s,l){this.snapshotVersion=e,this.targetChanges=a,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,a,r){const s=new Map;return s.set(e,wT.createSynthesizedTargetChangeForCurrentChange(e,a,r)),new nx(Ci.min(),s,new cu(gs),_y(),ki())}}class wT{constructor(e,a,r,s,l){this.resumeToken=e,this.current=a,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,a,r){return new wT(r,a,ki(),ki(),ki())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,a,r,s){this.Pt=e,this.removedTargetIds=a,this.key=r,this.bt=s}}let z$=class{constructor(e,a){this.targetId=e,this.Vt=a}};class O${constructor(e,a,r=Ad.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=a,this.resumeToken=r,this.cause=s}}class fU{constructor(){this.St=0,this.Dt=mU(),this.Ct=Ad.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return this.St!==0}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=ki(),a=ki(),r=ki();return this.Dt.forEach((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:a=a.add(s);break;case 1:r=r.add(s);break;default:ti()}}),new wT(this.Ct,this.xt,e,a,r)}Ft(){this.Nt=!1,this.Dt=mU()}Bt(e,a){this.Nt=!0,this.Dt=this.Dt.insert(e,a)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class sle{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=_y(),this.zt=pU(),this.Wt=new cu(gs)}Ht(e){for(const a of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(a,e.bt):this.Yt(a,e.key,e.bt);for(const a of e.removedTargetIds)this.Yt(a,e.key,e.bt)}Xt(e){this.forEachTarget(e,a=>{const r=this.Zt(a);switch(e.state){case 0:this.te(a)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(a);break;case 3:this.te(a)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(a)&&(this.ee(a),r.$t(e.resumeToken));break;default:ti()}})}forEachTarget(e,a){e.targetIds.length>0?e.targetIds.forEach(a):this.Qt.forEach((r,s)=>{this.te(s)&&a(s)})}ne(e){var a;const r=e.targetId,s=e.Vt.count,l=this.se(r);if(l){const h=l.target;if(Q5(h))if(s===0){const n=new Yn(h.path);this.Yt(r,n,ud.newNoDocument(n,Ci.min()))}else zo(s===1);else{const n=this.ie(r);if(n!==s){const w=this.re(e,n);if(w!==0){this.ee(r);const T=w===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(r,T)}(a=W3.instance)===null||a===void 0||a.notifyOnExistenceFilterMismatch(function(T,E,z){var k,U,Z,q,$,J;const ie={localCacheCount:E,existenceFilterCount:z.count},de=z.unchangedNames;return de&&(ie.bloomFilter={applied:T===0,hashCount:(k=de==null?void 0:de.hashCount)!==null&&k!==void 0?k:0,bitmapLength:(q=(Z=(U=de==null?void 0:de.bits)===null||U===void 0?void 0:U.bitmap)===null||Z===void 0?void 0:Z.length)!==null&&q!==void 0?q:0,padding:(J=($=de==null?void 0:de.bits)===null||$===void 0?void 0:$.padding)!==null&&J!==void 0?J:0}),ie}(w,n,e.Vt))}}}}re(e,a){const{unchangedNames:r,count:s}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:l="",padding:h=0},hashCount:n=0}=r;let w,T;try{w=l0(l).toUint8Array()}catch(E){if(E instanceof u$)return Y_("Decoding the base64 bloom filter in existence filter failed ("+E.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw E}try{T=new Y3(w,h,n)}catch(E){return Y_(E instanceof Vw?"BloomFilter error: ":"Applying bloom filter failed: ",E),1}return T.It===0?1:s!==a-this.oe(e.targetId,T)?2:0}oe(e,a){const r=this.Gt.getRemoteKeysForTarget(e);let s=0;return r.forEach(l=>{const h=this.Gt.ue(),n=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;a.vt(n)||(this.Yt(e,l,null),s++)}),s}ce(e){const a=new Map;this.Qt.forEach((l,h)=>{const n=this.se(h);if(n){if(l.current&&Q5(n.target)){const w=new Yn(n.target.path);this.jt.get(w)!==null||this.ae(h,w)||this.Yt(h,w,ud.newNoDocument(w,e))}l.Mt&&(a.set(h,l.Ot()),l.Ft())}});let r=ki();this.zt.forEach((l,h)=>{let n=!0;h.forEachWhile(w=>{const T=this.se(w);return!T||T.purpose==="TargetPurposeLimboResolution"||(n=!1,!1)}),n&&(r=r.add(l))}),this.jt.forEach((l,h)=>h.setReadTime(e));const s=new nx(e,a,this.Wt,this.jt,r);return this.jt=_y(),this.zt=pU(),this.Wt=new cu(gs),s}Jt(e,a){if(!this.te(e))return;const r=this.ae(e,a.key)?2:0;this.Zt(e).Bt(a.key,r),this.jt=this.jt.insert(a.key,a),this.zt=this.zt.insert(a.key,this.he(a.key).add(e))}Yt(e,a,r){if(!this.te(e))return;const s=this.Zt(e);this.ae(e,a)?s.Bt(a,1):s.Lt(a),this.zt=this.zt.insert(a,this.he(a).delete(e)),r&&(this.jt=this.jt.insert(a,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const a=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+a.addedDocuments.size-a.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let a=this.Qt.get(e);return a||(a=new fU,this.Qt.set(e,a)),a}he(e){let a=this.zt.get(e);return a||(a=new yd(gs),this.zt=this.zt.insert(e,a)),a}te(e){const a=this.se(e)!==null;return a||hn("WatchChangeAggregator","Detected inactive target",e),a}se(e){const a=this.Qt.get(e);return a&&a.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new fU),this.Gt.getRemoteKeysForTarget(e).forEach(a=>{this.Yt(e,a,null)})}ae(e,a){return this.Gt.getRemoteKeysForTarget(e).has(a)}}function pU(){return new cu(Yn.comparator)}function mU(){return new cu(Yn.comparator)}const ole={asc:"ASCENDING",desc:"DESCENDING"},lle={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ule={and:"AND",or:"OR"};class cle{constructor(e,a){this.databaseId=e,this.useProto3Json=a}}function rD(t,e){return t.useProto3Json||Y2(e)?e:{value:e}}function yb(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function D$(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function dle(t,e){return yb(t,e.toTimestamp())}function Cm(t){return zo(!!t),Ci.fromTimestamp(function(e){const a=zg(e);return new Qd(a.seconds,a.nanos)}(t))}function X3(t,e){return function(a){return new Fl(["projects",a.projectId,"databases",a.database])}(t).child("documents").child(e).canonicalString()}function M$(t){const e=Fl.fromString(t);return zo(U$(e)),e}function nD(t,e){return X3(t.databaseId,e.path)}function LE(t,e){const a=M$(e);if(a.get(1)!==t.databaseId.projectId)throw new Zr(ar.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+a.get(1)+" vs "+t.databaseId.projectId);if(a.get(3)!==t.databaseId.database)throw new Zr(ar.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+a.get(3)+" vs "+t.databaseId.database);return new Yn(I$(a))}function iD(t,e){return X3(t.databaseId,e)}function hle(t){const e=M$(t);return e.length===4?Fl.emptyPath():I$(e)}function sD(t){return new Fl(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function I$(t){return zo(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function yU(t,e,a){return{name:nD(t,e),fields:a.value.mapValue.fields}}function fle(t,e){let a;if("targetChange"in e){e.targetChange;const r=function(w){return w==="NO_CHANGE"?0:w==="ADD"?1:w==="REMOVE"?2:w==="CURRENT"?3:w==="RESET"?4:ti()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=function(w,T){return w.useProto3Json?(zo(T===void 0||typeof T=="string"),Ad.fromBase64String(T||"")):(zo(T===void 0||T instanceof Uint8Array),Ad.fromUint8Array(T||new Uint8Array))}(t,e.targetChange.resumeToken),h=e.targetChange.cause,n=h&&function(w){const T=w.code===void 0?ar.UNKNOWN:V$(w.code);return new Zr(T,w.message||"")}(h);a=new O$(r,s,l,n||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=LE(t,r.document.name),l=Cm(r.document.updateTime),h=r.document.createTime?Cm(r.document.createTime):Ci.min(),n=new Ch({mapValue:{fields:r.document.fields}}),w=ud.newFoundDocument(s,l,h,n),T=r.targetIds||[],E=r.removedTargetIds||[];a=new MC(T,E,w.key,w)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=LE(t,r.document),l=r.readTime?Cm(r.readTime):Ci.min(),h=ud.newNoDocument(s,l),n=r.removedTargetIds||[];a=new MC([],n,h.key,h)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=LE(t,r.document),l=r.removedTargetIds||[];a=new MC([],l,s,null)}else{if(!("filter"in e))return ti();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:l}=r,h=new ale(s,l),n=r.targetId;a=new z$(n,h)}}return a}function ple(t,e){let a;if(e instanceof vT)a={update:yU(t,e.key,e.value)};else if(e instanceof rx)a={delete:nD(t,e.key)};else if(e instanceof Bg)a={update:yU(t,e.key,e.data),updateMask:Tle(e.fieldMask)};else{if(!(e instanceof Qoe))return ti();a={verify:nD(t,e.key)}}return e.fieldTransforms.length>0&&(a.updateTransforms=e.fieldTransforms.map(r=>function(s,l){const h=l.transform;if(h instanceof pb)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof mR)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof yR)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof mb)return{fieldPath:l.field.canonicalString(),increment:h.gt};throw ti()}(0,r))),e.precondition.isNone||(a.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:dle(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ti()}(t,e.precondition)),a}function mle(t,e){return t&&t.length>0?(zo(e!==void 0),t.map(a=>function(r,s){let l=r.updateTime?Cm(r.updateTime):Cm(s);return l.isEqual(Ci.min())&&(l=Cm(s)),new Yoe(l,r.transformResults||[])}(a,e))):[]}function yle(t,e){return{documents:[iD(t,e.path)]}}function gle(t,e){const a={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(a.parent=iD(t,r),a.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a.parent=iD(t,r.popLast()),a.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(w){if(w.length!==0)return F$(Mp.create(w,"and"))}(e.filters);s&&(a.structuredQuery.where=s);const l=function(w){if(w.length!==0)return w.map(T=>function(E){return{field:v_(E.field),direction:vle(E.dir)}}(T))}(e.orderBy);l&&(a.structuredQuery.orderBy=l);const h=rD(t,e.limit);var n;return h!==null&&(a.structuredQuery.limit=h),e.startAt&&(a.structuredQuery.startAt={before:(n=e.startAt).inclusive,values:n.position}),e.endAt&&(a.structuredQuery.endAt=function(w){return{before:!w.inclusive,values:w.position}}(e.endAt)),a}function Ale(t){let e=hle(t.parent);const a=t.structuredQuery,r=a.from?a.from.length:0;let s=null;if(r>0){zo(r===1);const E=a.from[0];E.allDescendants?s=E.collectionId:e=e.child(E.collectionId)}let l=[];a.where&&(l=function(E){const z=L$(E);return z instanceof Mp&&f$(z)?z.getFilters():[z]}(a.where));let h=[];a.orderBy&&(h=a.orderBy.map(E=>function(z){return new L_(w_(z.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(z.direction))}(E)));let n=null;a.limit&&(n=function(E){let z;return z=typeof E=="object"?E.value:E,Y2(z)?null:z}(a.limit));let w=null;a.startAt&&(w=function(E){const z=!!E.before,k=E.values||[];return new fb(k,z)}(a.startAt));let T=null;return a.endAt&&(T=function(E){const z=!E.before,k=E.values||[];return new fb(k,z)}(a.endAt)),Foe(e,s,h,l,n,"F",w,T)}function _le(t,e){const a=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ti()}}(e.purpose);return a==null?null:{"goog-listen-tags":a}}function L$(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const a=w_(e.unaryFilter.field);return lu.create(a,"==",{doubleValue:NaN});case"IS_NULL":const r=w_(e.unaryFilter.field);return lu.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=w_(e.unaryFilter.field);return lu.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=w_(e.unaryFilter.field);return lu.create(l,"!=",{nullValue:"NULL_VALUE"});default:return ti()}}(t):t.fieldFilter!==void 0?function(e){return lu.create(w_(e.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ti()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Mp.create(e.compositeFilter.filters.map(a=>L$(a)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ti()}}(e.compositeFilter.op))}(t):ti()}function vle(t){return ole[t]}function wle(t){return lle[t]}function Rle(t){return ule[t]}function v_(t){return{fieldPath:t.canonicalString()}}function w_(t){return Em.fromServerFormat(t.fieldPath)}function F$(t){return t instanceof lu?function(e){if(e.op==="=="){if(aU(e.value))return{unaryFilter:{field:v_(e.field),op:"IS_NAN"}};if(tU(e.value))return{unaryFilter:{field:v_(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(aU(e.value))return{unaryFilter:{field:v_(e.field),op:"IS_NOT_NAN"}};if(tU(e.value))return{unaryFilter:{field:v_(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:v_(e.field),op:wle(e.op),value:e.value}}}(t):t instanceof Mp?function(e){const a=e.getFilters().map(r=>F$(r));return a.length===1?a[0]:{compositeFilter:{op:Rle(e.op),filters:a}}}(t):ti()}function Tle(t){const e=[];return t.fields.forEach(a=>e.push(a.canonicalString())),{fieldPaths:e}}function U$(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,a,r,s,l=Ci.min(),h=Ci.min(),n=Ad.EMPTY_BYTE_STRING,w=null){this.target=e,this.targetId=a,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=n,this.expectedCount=w}withSequenceNumber(e){return new wg(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,a){return new wg(this.target,this.targetId,this.purpose,this.sequenceNumber,a,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sle{constructor(e){this.fe=e}}function Cle(t){const e=Ale({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?tD(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ble{constructor(){this.rn=new xle}addToCollectionParentIndex(e,a){return this.rn.add(a),Mr.resolve()}getCollectionParents(e,a){return Mr.resolve(this.rn.getEntries(a))}addFieldIndex(e,a){return Mr.resolve()}deleteFieldIndex(e,a){return Mr.resolve()}getDocumentsMatchingTarget(e,a){return Mr.resolve(null)}getIndexType(e,a){return Mr.resolve(0)}getFieldIndexes(e,a){return Mr.resolve([])}getNextCollectionGroupToUpdate(e){return Mr.resolve(null)}getMinOffset(e,a){return Mr.resolve(dR.min())}getMinOffsetFromCollectionGroup(e,a){return Mr.resolve(dR.min())}updateCollectionGroup(e,a,r){return Mr.resolve()}updateIndexEntries(e,a){return Mr.resolve()}}class xle{constructor(){this.index={}}add(e){const a=e.lastSegment(),r=e.popLast(),s=this.index[a]||new yd(Fl.comparator),l=!s.has(r);return this.index[a]=s.add(r),l}has(e){const a=e.lastSegment(),r=e.popLast(),s=this.index[a];return s&&s.has(r)}getEntries(e){return(this.index[e]||new yd(Fl.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new ev(0)}static Mn(){return new ev(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ple{constructor(){this.changes=new Bv(e=>e.toString(),(e,a)=>e.isEqual(a)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,a){this.assertNotApplied(),this.changes.set(e,ud.newInvalidDocument(e).setReadTime(a))}getEntry(e,a){this.assertNotApplied();const r=this.changes.get(a);return r!==void 0?Mr.resolve(r):this.getFromCache(e,a)}getEntries(e,a){return this.getAllFromCache(e,a)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ele{constructor(e,a){this.overlayedDocument=e,this.mutatedFields=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nle{constructor(e,a,r,s){this.remoteDocumentCache=e,this.mutationQueue=a,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,a){let r=null;return this.documentOverlayCache.getOverlay(e,a).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,a))).next(s=>(r!==null&&kw(r.mutation,s,nf.empty(),Qd.now()),s))}getDocuments(e,a){return this.remoteDocumentCache.getEntries(e,a).next(r=>this.getLocalViewOfDocuments(e,r,ki()).next(()=>r))}getLocalViewOfDocuments(e,a,r=ki()){const s=qA();return this.populateOverlays(e,s,a).next(()=>this.computeViews(e,a,s,r).next(l=>{let h=Nw();return l.forEach((n,w)=>{h=h.insert(n,w.overlayedDocument)}),h}))}getOverlayedDocuments(e,a){const r=qA();return this.populateOverlays(e,r,a).next(()=>this.computeViews(e,a,r,ki()))}populateOverlays(e,a,r){const s=[];return r.forEach(l=>{a.has(l)||s.push(l)}),this.documentOverlayCache.getOverlays(e,s).next(l=>{l.forEach((h,n)=>{a.set(h,n)})})}computeViews(e,a,r,s){let l=_y();const h=Uw(),n=Uw();return a.forEach((w,T)=>{const E=r.get(T.key);s.has(T.key)&&(E===void 0||E.mutation instanceof Bg)?l=l.insert(T.key,T):E!==void 0?(h.set(T.key,E.mutation.getFieldMask()),kw(E.mutation,T,E.mutation.getFieldMask(),Qd.now())):h.set(T.key,nf.empty())}),this.recalculateAndSaveOverlays(e,l).next(w=>(w.forEach((T,E)=>h.set(T,E)),a.forEach((T,E)=>{var z;return n.set(T,new Ele(E,(z=h.get(T))!==null&&z!==void 0?z:null))}),n))}recalculateAndSaveOverlays(e,a){const r=Uw();let s=new cu((h,n)=>h-n),l=ki();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,a).next(h=>{for(const n of h)n.keys().forEach(w=>{const T=a.get(w);if(T===null)return;let E=r.get(w)||nf.empty();E=n.applyToLocalView(T,E),r.set(w,E);const z=(s.get(n.batchId)||ki()).add(w);s=s.insert(n.batchId,z)})}).next(()=>{const h=[],n=s.getReverseIterator();for(;n.hasNext();){const w=n.getNext(),T=w.key,E=w.value,z=R$();E.forEach(k=>{if(!l.has(k)){const U=E$(a.get(k),r.get(k));U!==null&&z.set(k,U),l=l.add(k)}}),h.push(this.documentOverlayCache.saveOverlays(e,T,z))}return Mr.waitFor(h)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,a){return this.remoteDocumentCache.getEntries(e,a).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,a,r){return function(s){return Yn.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(a)?this.getDocumentsMatchingDocumentQuery(e,a.path):g$(a)?this.getDocumentsMatchingCollectionGroupQuery(e,a,r):this.getDocumentsMatchingCollectionQuery(e,a,r)}getNextDocuments(e,a,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,a,r,s).next(l=>{const h=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,a,r.largestBatchId,s-l.size):Mr.resolve(qA());let n=-1,w=l;return h.next(T=>Mr.forEach(T,(E,z)=>(n<z.largestBatchId&&(n=z.largestBatchId),l.get(E)?Mr.resolve():this.remoteDocumentCache.getEntry(e,E).next(k=>{w=w.insert(E,k)}))).next(()=>this.populateOverlays(e,T,l)).next(()=>this.computeViews(e,w,T,ki())).next(E=>({batchId:n,changes:w$(E)})))})}getDocumentsMatchingDocumentQuery(e,a){return this.getDocument(e,new Yn(a)).next(r=>{let s=Nw();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,a,r){const s=a.collectionGroup;let l=Nw();return this.indexManager.getCollectionParents(e,s).next(h=>Mr.forEach(h,n=>{const w=function(T,E){return new kv(E,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(a,n.child(s));return this.getDocumentsMatchingCollectionQuery(e,w,r).next(T=>{T.forEach((E,z)=>{l=l.insert(E,z)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,a,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,a.path,r.largestBatchId).next(l=>(s=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,a,r,s))).next(l=>{s.forEach((n,w)=>{const T=w.getKey();l.get(T)===null&&(l=l.insert(T,ud.newInvalidDocument(T)))});let h=Nw();return l.forEach((n,w)=>{const T=s.get(n);T!==void 0&&kw(T.mutation,w,nf.empty(),Qd.now()),ex(a,w)&&(h=h.insert(n,w))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vle{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,a){return Mr.resolve(this.cs.get(a))}saveBundleMetadata(e,a){var r;return this.cs.set(a.id,{id:(r=a).id,version:r.version,createTime:Cm(r.createTime)}),Mr.resolve()}getNamedQuery(e,a){return Mr.resolve(this.hs.get(a))}saveNamedQuery(e,a){return this.hs.set(a.name,function(r){return{name:r.name,query:Cle(r.bundledQuery),readTime:Cm(r.readTime)}}(a)),Mr.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zle{constructor(){this.overlays=new cu(Yn.comparator),this.ls=new Map}getOverlay(e,a){return Mr.resolve(this.overlays.get(a))}getOverlays(e,a){const r=qA();return Mr.forEach(a,s=>this.getOverlay(e,s).next(l=>{l!==null&&r.set(s,l)})).next(()=>r)}saveOverlays(e,a,r){return r.forEach((s,l)=>{this.we(e,a,l)}),Mr.resolve()}removeOverlaysForBatchId(e,a,r){const s=this.ls.get(r);return s!==void 0&&(s.forEach(l=>this.overlays=this.overlays.remove(l)),this.ls.delete(r)),Mr.resolve()}getOverlaysForCollection(e,a,r){const s=qA(),l=a.length+1,h=new Yn(a.child("")),n=this.overlays.getIteratorFrom(h);for(;n.hasNext();){const w=n.getNext().value,T=w.getKey();if(!a.isPrefixOf(T.path))break;T.path.length===l&&w.largestBatchId>r&&s.set(w.getKey(),w)}return Mr.resolve(s)}getOverlaysForCollectionGroup(e,a,r,s){let l=new cu((T,E)=>T-E);const h=this.overlays.getIterator();for(;h.hasNext();){const T=h.getNext().value;if(T.getKey().getCollectionGroup()===a&&T.largestBatchId>r){let E=l.get(T.largestBatchId);E===null&&(E=qA(),l=l.insert(T.largestBatchId,E)),E.set(T.getKey(),T)}}const n=qA(),w=l.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((T,E)=>n.set(T,E)),!(n.size()>=s)););return Mr.resolve(n)}we(e,a,r){const s=this.overlays.get(r.key);if(s!==null){const h=this.ls.get(s.largestBatchId).delete(r.key);this.ls.set(s.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new tle(a,r));let l=this.ls.get(a);l===void 0&&(l=ki(),this.ls.set(a,l)),this.ls.set(a,l.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(){this.fs=new yd(Xu.ds),this.ws=new yd(Xu._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,a){const r=new Xu(e,a);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,a){e.forEach(r=>this.addReference(r,a))}removeReference(e,a){this.ys(new Xu(e,a))}ps(e,a){e.forEach(r=>this.removeReference(r,a))}Is(e){const a=new Yn(new Fl([])),r=new Xu(a,e),s=new Xu(a,e+1),l=[];return this.ws.forEachInRange([r,s],h=>{this.ys(h),l.push(h.key)}),l}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const a=new Yn(new Fl([])),r=new Xu(a,e),s=new Xu(a,e+1);let l=ki();return this.ws.forEachInRange([r,s],h=>{l=l.add(h.key)}),l}containsKey(e){const a=new Xu(e,0),r=this.fs.firstAfterOrEqual(a);return r!==null&&e.isEqual(r.key)}}class Xu{constructor(e,a){this.key=e,this.As=a}static ds(e,a){return Yn.comparator(e.key,a.key)||gs(e.As,a.As)}static _s(e,a){return gs(e.As,a.As)||Yn.comparator(e.key,a.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ole{constructor(e,a){this.indexManager=e,this.referenceDelegate=a,this.mutationQueue=[],this.vs=1,this.Rs=new yd(Xu.ds)}checkEmpty(e){return Mr.resolve(this.mutationQueue.length===0)}addMutationBatch(e,a,r,s){const l=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new ele(l,a,r,s);this.mutationQueue.push(h);for(const n of s)this.Rs=this.Rs.add(new Xu(n.key,l)),this.indexManager.addToCollectionParentIndex(e,n.key.path.popLast());return Mr.resolve(h)}lookupMutationBatch(e,a){return Mr.resolve(this.Ps(a))}getNextMutationBatchAfterBatchId(e,a){const r=a+1,s=this.bs(r),l=s<0?0:s;return Mr.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Mr.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(e){return Mr.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,a){const r=new Xu(a,0),s=new Xu(a,Number.POSITIVE_INFINITY),l=[];return this.Rs.forEachInRange([r,s],h=>{const n=this.Ps(h.As);l.push(n)}),Mr.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,a){let r=new yd(gs);return a.forEach(s=>{const l=new Xu(s,0),h=new Xu(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([l,h],n=>{r=r.add(n.As)})}),Mr.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,a){const r=a.path,s=r.length+1;let l=r;Yn.isDocumentKey(l)||(l=l.child(""));const h=new Xu(new Yn(l),0);let n=new yd(gs);return this.Rs.forEachWhile(w=>{const T=w.key.path;return!!r.isPrefixOf(T)&&(T.length===s&&(n=n.add(w.As)),!0)},h),Mr.resolve(this.Vs(n))}Vs(e){const a=[];return e.forEach(r=>{const s=this.Ps(r);s!==null&&a.push(s)}),a}removeMutationBatch(e,a){zo(this.Ss(a.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Rs;return Mr.forEach(a.mutations,s=>{const l=new Xu(s.key,a.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,a){const r=new Xu(a,0),s=this.Rs.firstAfterOrEqual(r);return Mr.resolve(a.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Mr.resolve()}Ss(e,a){return this.bs(e)}bs(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Ps(e){const a=this.bs(e);return a<0||a>=this.mutationQueue.length?null:this.mutationQueue[a]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dle{constructor(e){this.Ds=e,this.docs=new cu(Yn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,a){const r=a.key,s=this.docs.get(r),l=s?s.size:0,h=this.Ds(a);return this.docs=this.docs.insert(r,{document:a.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const a=this.docs.get(e);a&&(this.docs=this.docs.remove(e),this.size-=a.size)}getEntry(e,a){const r=this.docs.get(a);return Mr.resolve(r?r.document.mutableCopy():ud.newInvalidDocument(a))}getEntries(e,a){let r=_y();return a.forEach(s=>{const l=this.docs.get(s);r=r.insert(s,l?l.document.mutableCopy():ud.newInvalidDocument(s))}),Mr.resolve(r)}getDocumentsMatchingQuery(e,a,r,s){let l=_y();const h=a.path,n=new Yn(h.child("")),w=this.docs.getIteratorFrom(n);for(;w.hasNext();){const{key:T,value:{document:E}}=w.getNext();if(!h.isPrefixOf(T.path))break;T.path.length>h.length+1||woe(voe(E),r)<=0||(s.has(E.key)||ex(a,E))&&(l=l.insert(E.key,E.mutableCopy()))}return Mr.resolve(l)}getAllFromCollectionGroup(e,a,r,s){ti()}Cs(e,a){return Mr.forEach(this.docs,r=>a(r))}newChangeBuffer(e){return new Mle(this)}getSize(e){return Mr.resolve(this.size)}}class Mle extends Ple{constructor(e){super(),this.os=e}applyChanges(e){const a=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?a.push(this.os.addEntry(e,s)):this.os.removeEntry(r)}),Mr.waitFor(a)}getFromCache(e,a){return this.os.getEntry(e,a)}getAllFromCache(e,a){return this.os.getEntries(e,a)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ile{constructor(e){this.persistence=e,this.xs=new Bv(a=>q3(a),H3),this.lastRemoteSnapshotVersion=Ci.min(),this.highestTargetId=0,this.Ns=0,this.ks=new J3,this.targetCount=0,this.Ms=ev.kn()}forEachTarget(e,a){return this.xs.forEach((r,s)=>a(s)),Mr.resolve()}getLastRemoteSnapshotVersion(e){return Mr.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Mr.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Mr.resolve(this.highestTargetId)}setTargetsMetadata(e,a,r){return r&&(this.lastRemoteSnapshotVersion=r),a>this.Ns&&(this.Ns=a),Mr.resolve()}Fn(e){this.xs.set(e.target,e);const a=e.targetId;a>this.highestTargetId&&(this.Ms=new ev(a),this.highestTargetId=a),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,a){return this.Fn(a),this.targetCount+=1,Mr.resolve()}updateTargetData(e,a){return this.Fn(a),Mr.resolve()}removeTargetData(e,a){return this.xs.delete(a.target),this.ks.Is(a.targetId),this.targetCount-=1,Mr.resolve()}removeTargets(e,a,r){let s=0;const l=[];return this.xs.forEach((h,n)=>{n.sequenceNumber<=a&&r.get(n.targetId)===null&&(this.xs.delete(h),l.push(this.removeMatchingKeysForTargetId(e,n.targetId)),s++)}),Mr.waitFor(l).next(()=>s)}getTargetCount(e){return Mr.resolve(this.targetCount)}getTargetData(e,a){const r=this.xs.get(a)||null;return Mr.resolve(r)}addMatchingKeys(e,a,r){return this.ks.gs(a,r),Mr.resolve()}removeMatchingKeys(e,a,r){this.ks.ps(a,r);const s=this.persistence.referenceDelegate,l=[];return s&&a.forEach(h=>{l.push(s.markPotentiallyOrphaned(e,h))}),Mr.waitFor(l)}removeMatchingKeysForTargetId(e,a){return this.ks.Is(a),Mr.resolve()}getMatchingKeysForTargetId(e,a){const r=this.ks.Es(a);return Mr.resolve(r)}containsKey(e,a){return Mr.resolve(this.ks.containsKey(a))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lle{constructor(e,a){this.$s={},this.overlays={},this.Os=new B3(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Ile(this),this.indexManager=new ble,this.remoteDocumentCache=function(r){return new Dle(r)}(r=>this.referenceDelegate.Ls(r)),this.serializer=new Sle(a),this.qs=new Vle(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let a=this.overlays[e.toKey()];return a||(a=new zle,this.overlays[e.toKey()]=a),a}getMutationQueue(e,a){let r=this.$s[e.toKey()];return r||(r=new Ole(a,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,a,r){hn("MemoryPersistence","Starting transaction:",e);const s=new Fle(this.Os.next());return this.referenceDelegate.Us(),r(s).next(l=>this.referenceDelegate.Ks(s).next(()=>l)).toPromise().then(l=>(s.raiseOnCommittedEvent(),l))}Gs(e,a){return Mr.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,a)))}}class Fle extends Toe{constructor(e){super(),this.currentSequenceNumber=e}}class Q3{constructor(e){this.persistence=e,this.Qs=new J3,this.js=null}static zs(e){return new Q3(e)}get Ws(){if(this.js)return this.js;throw ti()}addReference(e,a,r){return this.Qs.addReference(r,a),this.Ws.delete(r.toString()),Mr.resolve()}removeReference(e,a,r){return this.Qs.removeReference(r,a),this.Ws.add(r.toString()),Mr.resolve()}markPotentiallyOrphaned(e,a){return this.Ws.add(a.toString()),Mr.resolve()}removeTarget(e,a){this.Qs.Is(a.targetId).forEach(s=>this.Ws.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,a.targetId).next(s=>{s.forEach(l=>this.Ws.add(l.toString()))}).next(()=>r.removeTargetData(e,a))}Us(){this.js=new Set}Ks(e){const a=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Mr.forEach(this.Ws,r=>{const s=Yn.fromPath(r);return this.Hs(e,s).next(l=>{l||a.removeEntry(s,Ci.min())})}).next(()=>(this.js=null,a.apply(e)))}updateLimboDocument(e,a){return this.Hs(e,a).next(r=>{r?this.Ws.delete(a.toString()):this.Ws.add(a.toString())})}Ls(e){return 0}Hs(e,a){return Mr.or([()=>Mr.resolve(this.Qs.containsKey(a)),()=>this.persistence.getTargetCache().containsKey(e,a),()=>this.persistence.Gs(e,a)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,a,r,s){this.targetId=e,this.fromCache=a,this.Fi=r,this.Bi=s}static Li(e,a){let r=ki(),s=ki();for(const l of a.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new eI(e,a.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ule{constructor(){this.qi=!1}initialize(e,a){this.Ui=e,this.indexManager=a,this.qi=!0}getDocumentsMatchingQuery(e,a,r,s){return this.Ki(e,a).next(l=>l||this.Gi(e,a,s,r)).next(l=>l||this.Qi(e,a))}Ki(e,a){if(sU(a))return Mr.resolve(null);let r=Ay(a);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(a.limit!==null&&s===1&&(a=tD(a,null,"F"),r=Ay(a)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const h=ki(...l);return this.Ui.getDocuments(e,h).next(n=>this.indexManager.getMinOffset(e,r).next(w=>{const T=this.ji(a,n);return this.zi(a,T,h,w.readTime)?this.Ki(e,tD(a,null,"F")):this.Wi(e,T,a,w)}))})))}Gi(e,a,r,s){return sU(a)||s.isEqual(Ci.min())?this.Qi(e,a):this.Ui.getDocuments(e,r).next(l=>{const h=this.ji(a,l);return this.zi(a,h,r,s)?this.Qi(e,a):(Y6()<=fs.DEBUG&&hn("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),aD(a)),this.Wi(e,h,a,_oe(s,-1)))})}ji(e,a){let r=new yd(_$(e));return a.forEach((s,l)=>{ex(e,l)&&(r=r.add(l))}),r}zi(e,a,r,s){if(e.limit===null)return!1;if(r.size!==a.size)return!0;const l=e.limitType==="F"?a.last():a.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}Qi(e,a){return Y6()<=fs.DEBUG&&hn("QueryEngine","Using full collection scan to execute query:",aD(a)),this.Ui.getDocumentsMatchingQuery(e,a,dR.min())}Wi(e,a,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(l=>(a.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kle{constructor(e,a,r,s){this.persistence=e,this.Hi=a,this.serializer=s,this.Ji=new cu(gs),this.Yi=new Bv(l=>q3(l),H3),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Nle(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",a=>e.collect(a,this.Ji))}}function Ble(t,e,a,r){return new kle(t,e,a,r)}async function k$(t,e){const a=pi(t);return await a.persistence.runTransaction("Handle user change","readonly",r=>{let s;return a.mutationQueue.getAllMutationBatches(r).next(l=>(s=l,a.tr(e),a.mutationQueue.getAllMutationBatches(r))).next(l=>{const h=[],n=[];let w=ki();for(const T of s){h.push(T.batchId);for(const E of T.mutations)w=w.add(E.key)}for(const T of l){n.push(T.batchId);for(const E of T.mutations)w=w.add(E.key)}return a.localDocuments.getDocuments(r,w).next(T=>({er:T,removedBatchIds:h,addedBatchIds:n}))})})}function Gle(t,e){const a=pi(t);return a.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),l=a.Zi.newChangeBuffer({trackRemovals:!0});return function(h,n,w,T){const E=w.batch,z=E.keys();let k=Mr.resolve();return z.forEach(U=>{k=k.next(()=>T.getEntry(n,U)).next(Z=>{const q=w.docVersions.get(U);zo(q!==null),Z.version.compareTo(q)<0&&(E.applyToRemoteDocument(Z,w),Z.isValidDocument()&&(Z.setReadTime(w.commitVersion),T.addEntry(Z)))})}),k.next(()=>h.mutationQueue.removeMutationBatch(n,E))}(a,r,e,l).next(()=>l.apply(r)).next(()=>a.mutationQueue.performConsistencyCheck(r)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let n=ki();for(let w=0;w<h.mutationResults.length;++w)h.mutationResults[w].transformResults.length>0&&(n=n.add(h.batch.mutations[w].key));return n}(e))).next(()=>a.localDocuments.getDocuments(r,s))})}function B$(t){const e=pi(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",a=>e.Bs.getLastRemoteSnapshotVersion(a))}function jle(t,e){const a=pi(t),r=e.snapshotVersion;let s=a.Ji;return a.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=a.Zi.newChangeBuffer({trackRemovals:!0});s=a.Ji;const n=[];e.targetChanges.forEach((E,z)=>{const k=s.get(z);if(!k)return;n.push(a.Bs.removeMatchingKeys(l,E.removedDocuments,z).next(()=>a.Bs.addMatchingKeys(l,E.addedDocuments,z)));let U=k.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(z)!==null?U=U.withResumeToken(Ad.EMPTY_BYTE_STRING,Ci.min()).withLastLimboFreeSnapshotVersion(Ci.min()):E.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(E.resumeToken,r)),s=s.insert(z,U),function(Z,q,$){return Z.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(k,U,E)&&n.push(a.Bs.updateTargetData(l,U))});let w=_y(),T=ki();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&n.push(a.persistence.referenceDelegate.updateLimboDocument(l,E))}),n.push(Zle(l,h,e.documentUpdates).next(E=>{w=E.nr,T=E.sr})),!r.isEqual(Ci.min())){const E=a.Bs.getLastRemoteSnapshotVersion(l).next(z=>a.Bs.setTargetsMetadata(l,l.currentSequenceNumber,r));n.push(E)}return Mr.waitFor(n).next(()=>h.apply(l)).next(()=>a.localDocuments.getLocalViewOfDocuments(l,w,T)).next(()=>w)}).then(l=>(a.Ji=s,l))}function Zle(t,e,a){let r=ki(),s=ki();return a.forEach(l=>r=r.add(l)),e.getEntries(t,r).next(l=>{let h=_y();return a.forEach((n,w)=>{const T=l.get(n);w.isFoundDocument()!==T.isFoundDocument()&&(s=s.add(n)),w.isNoDocument()&&w.version.isEqual(Ci.min())?(e.removeEntry(n,w.readTime),h=h.insert(n,w)):!T.isValidDocument()||w.version.compareTo(T.version)>0||w.version.compareTo(T.version)===0&&T.hasPendingWrites?(e.addEntry(w),h=h.insert(n,w)):hn("LocalStore","Ignoring outdated watch update for ",n,". Current version:",T.version," Watch version:",w.version)}),{nr:h,sr:s}})}function qle(t,e){const a=pi(t);return a.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),a.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Hle(t,e){const a=pi(t);return a.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return a.Bs.getTargetData(r,e).next(l=>l?(s=l,Mr.resolve(s)):a.Bs.allocateTargetId(r).next(h=>(s=new wg(e,h,"TargetPurposeListen",r.currentSequenceNumber),a.Bs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=a.Ji.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(a.Ji=a.Ji.insert(r.targetId,r),a.Yi.set(e,r.targetId)),r})}async function oD(t,e,a){const r=pi(t),s=r.Ji.get(e),l=a?"readwrite":"readwrite-primary";try{a||await r.persistence.runTransaction("Release target",l,h=>r.persistence.referenceDelegate.removeTarget(h,s))}catch(h){if(!_T(h))throw h;hn("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(s.target)}function gU(t,e,a){const r=pi(t);let s=Ci.min(),l=ki();return r.persistence.runTransaction("Execute query","readonly",h=>function(n,w,T){const E=pi(n),z=E.Yi.get(T);return z!==void 0?Mr.resolve(E.Ji.get(z)):E.Bs.getTargetData(w,T)}(r,h,Ay(e)).next(n=>{if(n)return s=n.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(h,n.targetId).next(w=>{l=w})}).next(()=>r.Hi.getDocumentsMatchingQuery(h,e,a?s:Ci.min(),a?l:ki())).next(n=>($le(r,Uoe(e),n),{documents:n,ir:l})))}function $le(t,e,a){let r=t.Xi.get(e)||Ci.min();a.forEach((s,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),t.Xi.set(e,r)}class AU{constructor(){this.activeTargetIds=qoe()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Kle{constructor(){this.Hr=new AU,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,a,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,a,r){this.Jr[e]=a}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new AU,Promise.resolve()}handleUserChange(e,a,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wle{Yr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){hn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){hn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nC=null;function FE(){return nC===null?nC=268435456+Math.round(2147483648*Math.random()):nC++,"0x"+nC.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yle={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xle{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed="WebChannelConnection";class Jle extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const a=e.ssl?"https":"http";this.mo=a+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,a,r,s,l){const h=FE(),n=this.To(e,a);hn("RestConnection",`Sending RPC '${e}' ${h}:`,n,r);const w={};return this.Eo(w,s,l),this.Ao(e,n,w,r).then(T=>(hn("RestConnection",`Received RPC '${e}' ${h}: `,T),T),T=>{throw Y_("RestConnection",`RPC '${e}' ${h} failed with error: `,T,"url: ",n,"request:",r),T})}vo(e,a,r,s,l,h){return this.Io(e,a,r,s,l)}Eo(e,a,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Uv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),a&&a.headers.forEach((s,l)=>e[l]=s),r&&r.headers.forEach((s,l)=>e[l]=s)}To(e,a){const r=Yle[e];return`${this.mo}/v1/${a}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,a,r,s){const l=FE();return new Promise((h,n)=>{const w=new loe;w.setWithCredentials(!0),w.listenOnce(ioe.COMPLETE,()=>{try{switch(w.getLastErrorCode()){case IE.NO_ERROR:const E=w.getResponseJson();hn(ed,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(E)),h(E);break;case IE.TIMEOUT:hn(ed,`RPC '${e}' ${l} timed out`),n(new Zr(ar.DEADLINE_EXCEEDED,"Request time out"));break;case IE.HTTP_ERROR:const z=w.getStatus();if(hn(ed,`RPC '${e}' ${l} failed with status:`,z,"response text:",w.getResponseText()),z>0){let k=w.getResponseJson();Array.isArray(k)&&(k=k[0]);const U=k==null?void 0:k.error;if(U&&U.status&&U.message){const Z=function(q){const $=q.toLowerCase().replace(/_/g,"-");return Object.values(ar).indexOf($)>=0?$:ar.UNKNOWN}(U.status);n(new Zr(Z,U.message))}else n(new Zr(ar.UNKNOWN,"Server responded with status "+w.getStatus()))}else n(new Zr(ar.UNAVAILABLE,"Connection failed."));break;default:ti()}}finally{hn(ed,`RPC '${e}' ${l} completed.`)}});const T=JSON.stringify(s);hn(ed,`RPC '${e}' ${l} sending request:`,s),w.send(a,"POST",T,r,15)})}Ro(e,a,r){const s=FE(),l=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=roe(),n=noe(),w={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},T=this.longPollingOptions.timeoutSeconds;T!==void 0&&(w.longPollingTimeout=Math.round(1e3*T)),this.useFetchStreams&&(w.xmlHttpFactory=new ooe({})),this.Eo(w.initMessageHeaders,a,r),w.encodeInitMessageHeaders=!0;const E=l.join("");hn(ed,`Creating RPC '${e}' stream ${s}: ${E}`,w);const z=h.createWebChannel(E,w);let k=!1,U=!1;const Z=new Xle({ro:$=>{U?hn(ed,`Not sending because RPC '${e}' stream ${s} is closed:`,$):(k||(hn(ed,`Opening RPC '${e}' stream ${s} transport.`),z.open(),k=!0),hn(ed,`RPC '${e}' stream ${s} sending:`,$),z.send($))},oo:()=>z.close()}),q=($,J,ie)=>{$.listen(J,de=>{try{ie(de)}catch(ge){setTimeout(()=>{throw ge},0)}})};return q(z,eC.EventType.OPEN,()=>{U||hn(ed,`RPC '${e}' stream ${s} transport opened.`)}),q(z,eC.EventType.CLOSE,()=>{U||(U=!0,hn(ed,`RPC '${e}' stream ${s} transport closed`),Z.wo())}),q(z,eC.EventType.ERROR,$=>{U||(U=!0,Y_(ed,`RPC '${e}' stream ${s} transport errored:`,$),Z.wo(new Zr(ar.UNAVAILABLE,"The operation could not be completed")))}),q(z,eC.EventType.MESSAGE,$=>{var J;if(!U){const ie=$.data[0];zo(!!ie);const de=ie,ge=de.error||((J=de[0])===null||J===void 0?void 0:J.error);if(ge){hn(ed,`RPC '${e}' stream ${s} received error:`,ge);const he=ge.status;let Ae=function(Re){const be=nu[Re];if(be!==void 0)return V$(be)}(he),me=ge.message;Ae===void 0&&(Ae=ar.INTERNAL,me="Unknown error status: "+he+" with message "+ge.message),U=!0,Z.wo(new Zr(Ae,me)),z.close()}else hn(ed,`RPC '${e}' stream ${s} received:`,ie),Z._o(ie)}}),q(n,soe.STAT_EVENT,$=>{$.stat===K6.PROXY?hn(ed,`RPC '${e}' stream ${s} detected buffering proxy`):$.stat===K6.NOPROXY&&hn(ed,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{Z.fo()},0),Z}}function UE(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(t){return new cle(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G${constructor(e,a,r=1e3,s=1.5,l=6e4){this.ii=e,this.timerId=a,this.Po=r,this.bo=s,this.Vo=l,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const a=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),s=Math.max(0,a-r);s>0&&hn("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${a} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j${constructor(e,a,r,s,l,h,n,w){this.ii=e,this.$o=r,this.Oo=s,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=n,this.listener=w,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new G$(e,a)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,a){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,e!==4?this.qo.reset():a&&a.code===ar.RESOURCE_EXHAUSTED?(gy(a.toString()),gy("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):a&&a.code===ar.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(a)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),a=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Fo===a&&this.Zo(r,s)},r=>{e(()=>{const s=new Zr(ar.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(s)})})}Zo(e,a){const r=this.Xo(this.Fo);this.stream=this.eu(e,a),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(s=>{r(()=>this.tu(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return hn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return a=>{this.ii.enqueueAndForget(()=>this.Fo===e?a():(hn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Qle extends j${constructor(e,a,r,s,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",a,r,s,h),this.serializer=l}eu(e,a){return this.connection.Ro("Listen",e,a)}onMessage(e){this.qo.reset();const a=fle(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ci.min();const l=s.targetChange;return l.targetIds&&l.targetIds.length?Ci.min():l.readTime?Cm(l.readTime):Ci.min()}(e);return this.listener.nu(a,r)}su(e){const a={};a.database=sD(this.serializer),a.addTarget=function(s,l){let h;const n=l.target;if(h=Q5(n)?{documents:yle(s,n)}:{query:gle(s,n)},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=D$(s,l.resumeToken);const w=rD(s,l.expectedCount);w!==null&&(h.expectedCount=w)}else if(l.snapshotVersion.compareTo(Ci.min())>0){h.readTime=yb(s,l.snapshotVersion.toTimestamp());const w=rD(s,l.expectedCount);w!==null&&(h.expectedCount=w)}return h}(this.serializer,e);const r=_le(this.serializer,e);r&&(a.labels=r),this.Wo(a)}iu(e){const a={};a.database=sD(this.serializer),a.removeTarget=e,this.Wo(a)}}class eue extends j${constructor(e,a,r,s,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",a,r,s,h),this.serializer=l,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,a){return this.connection.Ro("Write",e,a)}onMessage(e){if(zo(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const a=mle(e.writeResults,e.commitTime),r=Cm(e.commitTime);return this.listener.cu(r,a)}return zo(!e.writeResults||e.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const e={};e.database=sD(this.serializer),this.Wo(e)}uu(e){const a={streamToken:this.lastStreamToken,writes:e.map(r=>ple(this.serializer,r))};this.Wo(a)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tue extends class{}{constructor(e,a,r,s){super(),this.authCredentials=e,this.appCheckCredentials=a,this.connection=r,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new Zr(ar.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,a,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.Io(e,a,r,s,l)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ar.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Zr(ar.UNKNOWN,s.toString())})}vo(e,a,r,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.vo(e,a,r,l,h,s)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ar.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Zr(ar.UNKNOWN,l.toString())})}terminate(){this.lu=!0}}class aue{constructor(e,a){this.asyncQueue=e,this.onlineStateHandler=a,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,e==="Online"&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const a=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(gy(a),this.mu=!1):hn("OnlineStateTracker",a)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rue{constructor(e,a,r,s,l){this.localStore=e,this.datastore=a,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=l,this.Pu.Yr(h=>{r.enqueueAndForget(async()=>{A0(this)&&(hn("RemoteStore","Restarting streams for network reachability change."),await async function(n){const w=pi(n);w.vu.add(4),await RT(w),w.bu.set("Unknown"),w.vu.delete(4),await sx(w)}(this))})}),this.bu=new aue(r,s)}}async function sx(t){if(A0(t))for(const e of t.Ru)await e(!0)}async function RT(t){for(const e of t.Ru)await e(!1)}function Z$(t,e){const a=pi(t);a.Au.has(e.targetId)||(a.Au.set(e.targetId,e),rI(a)?aI(a):Gv(a).Ko()&&tI(a,e))}function q$(t,e){const a=pi(t),r=Gv(a);a.Au.delete(e),r.Ko()&&H$(a,e),a.Au.size===0&&(r.Ko()?r.jo():A0(a)&&a.bu.set("Unknown"))}function tI(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ci.min())>0){const a=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(a)}Gv(t).su(e)}function H$(t,e){t.Vu.qt(e),Gv(t).iu(e)}function aI(t){t.Vu=new sle({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),Gv(t).start(),t.bu.gu()}function rI(t){return A0(t)&&!Gv(t).Uo()&&t.Au.size>0}function A0(t){return pi(t).vu.size===0}function $$(t){t.Vu=void 0}async function nue(t){t.Au.forEach((e,a)=>{tI(t,e)})}async function iue(t,e){$$(t),rI(t)?(t.bu.Iu(e),aI(t)):t.bu.set("Unknown")}async function sue(t,e,a){if(t.bu.set("Online"),e instanceof O$&&e.state===2&&e.cause)try{await async function(r,s){const l=s.cause;for(const h of s.targetIds)r.Au.has(h)&&(await r.remoteSyncer.rejectListen(h,l),r.Au.delete(h),r.Vu.removeTarget(h))}(t,e)}catch(r){hn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await gb(t,r)}else if(e instanceof MC?t.Vu.Ht(e):e instanceof z$?t.Vu.ne(e):t.Vu.Xt(e),!a.isEqual(Ci.min()))try{const r=await B$(t.localStore);a.compareTo(r)>=0&&await function(s,l){const h=s.Vu.ce(l);return h.targetChanges.forEach((n,w)=>{if(n.resumeToken.approximateByteSize()>0){const T=s.Au.get(w);T&&s.Au.set(w,T.withResumeToken(n.resumeToken,l))}}),h.targetMismatches.forEach((n,w)=>{const T=s.Au.get(n);if(!T)return;s.Au.set(n,T.withResumeToken(Ad.EMPTY_BYTE_STRING,T.snapshotVersion)),H$(s,n);const E=new wg(T.target,n,w,T.sequenceNumber);tI(s,E)}),s.remoteSyncer.applyRemoteEvent(h)}(t,a)}catch(r){hn("RemoteStore","Failed to raise snapshot:",r),await gb(t,r)}}async function gb(t,e,a){if(!_T(e))throw e;t.vu.add(1),await RT(t),t.bu.set("Offline"),a||(a=()=>B$(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{hn("RemoteStore","Retrying IndexedDB access"),await a(),t.vu.delete(1),await sx(t)})}function K$(t,e){return e().catch(a=>gb(t,a,e))}async function ox(t){const e=pi(t),a=Og(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;oue(e);)try{const s=await qle(e.localStore,r);if(s===null){e.Eu.length===0&&a.jo();break}r=s.batchId,lue(e,s)}catch(s){await gb(e,s)}W$(e)&&Y$(e)}function oue(t){return A0(t)&&t.Eu.length<10}function lue(t,e){t.Eu.push(e);const a=Og(t);a.Ko()&&a.ou&&a.uu(e.mutations)}function W$(t){return A0(t)&&!Og(t).Uo()&&t.Eu.length>0}function Y$(t){Og(t).start()}async function uue(t){Og(t).hu()}async function cue(t){const e=Og(t);for(const a of t.Eu)e.uu(a.mutations)}async function due(t,e,a){const r=t.Eu.shift(),s=K3.from(r,e,a);await K$(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ox(t)}async function hue(t,e){e&&Og(t).ou&&await async function(a,r){if(s=r.code,rle(s)&&s!==ar.ABORTED){const l=a.Eu.shift();Og(a).Qo(),await K$(a,()=>a.remoteSyncer.rejectFailedWrite(l.batchId,r)),await ox(a)}var s}(t,e),W$(t)&&Y$(t)}async function vU(t,e){const a=pi(t);a.asyncQueue.verifyOperationInProgress(),hn("RemoteStore","RemoteStore received new credentials");const r=A0(a);a.vu.add(3),await RT(a),r&&a.bu.set("Unknown"),await a.remoteSyncer.handleCredentialChange(e),a.vu.delete(3),await sx(a)}async function fue(t,e){const a=pi(t);e?(a.vu.delete(2),await sx(a)):e||(a.vu.add(2),await RT(a),a.bu.set("Unknown"))}function Gv(t){return t.Su||(t.Su=function(e,a,r){const s=pi(e);return s.fu(),new Qle(a,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{uo:nue.bind(null,t),ao:iue.bind(null,t),nu:sue.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Qo(),rI(t)?aI(t):t.bu.set("Unknown")):(await t.Su.stop(),$$(t))})),t.Su}function Og(t){return t.Du||(t.Du=function(e,a,r){const s=pi(e);return s.fu(),new eue(a,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{uo:uue.bind(null,t),ao:hue.bind(null,t),au:cue.bind(null,t),cu:due.bind(null,t)}),t.Ru.push(async e=>{e?(t.Du.Qo(),await ox(t)):(await t.Du.stop(),t.Eu.length>0&&(hn("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))})),t.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,a,r,s,l){this.asyncQueue=e,this.timerId=a,this.targetTimeMs=r,this.op=s,this.removalCallback=l,this.deferred=new dy,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,a,r,s,l){const h=Date.now()+r,n=new nI(e,a,h,s,l);return n.start(r),n}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Zr(ar.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function iI(t,e){if(gy("AsyncQueue",`${e}: ${t}`),_T(t))return new Zr(ar.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e){this.comparator=e?(a,r)=>e(a,r)||Yn.comparator(a.key,r.key):(a,r)=>Yn.comparator(a.key,r.key),this.keyedMap=Nw(),this.sortedSet=new cu(this.comparator)}static emptySet(e){return new U_(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const a=this.keyedMap.get(e);return a?this.sortedSet.indexOf(a):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((a,r)=>(e(a),!1))}add(e){const a=this.delete(e.key);return a.copy(a.keyedMap.insert(e.key,e),a.sortedSet.insert(e,null))}delete(e){const a=this.get(e);return a?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(a)):this}isEqual(e){if(!(e instanceof U_)||this.size!==e.size)return!1;const a=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;a.hasNext();){const s=a.getNext().key,l=r.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(a=>{e.push(a.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,a){const r=new U_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=a,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(){this.Cu=new cu(Yn.comparator)}track(e){const a=e.doc.key,r=this.Cu.get(a);r?e.type!==0&&r.type===3?this.Cu=this.Cu.insert(a,e):e.type===3&&r.type!==1?this.Cu=this.Cu.insert(a,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Cu=this.Cu.insert(a,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Cu=this.Cu.insert(a,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Cu=this.Cu.remove(a):e.type===1&&r.type===2?this.Cu=this.Cu.insert(a,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Cu=this.Cu.insert(a,{type:2,doc:e.doc}):ti():this.Cu=this.Cu.insert(a,e)}xu(){const e=[];return this.Cu.inorderTraversal((a,r)=>{e.push(r)}),e}}class tv{constructor(e,a,r,s,l,h,n,w,T){this.query=e,this.docs=a,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=n,this.excludesMetadataChanges=w,this.hasCachedResults=T}static fromInitialDocuments(e,a,r,s,l){const h=[];return a.forEach(n=>{h.push({type:0,doc:n})}),new tv(e,a,U_.emptySet(a),h,r,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Q2(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const a=this.docChanges,r=e.docChanges;if(a.length!==r.length)return!1;for(let s=0;s<a.length;s++)if(a[s].type!==r[s].type||!a[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pue{constructor(){this.Nu=void 0,this.listeners=[]}}class mue{constructor(){this.queries=new Bv(e=>A$(e),Q2),this.onlineState="Unknown",this.ku=new Set}}async function sI(t,e){const a=pi(t),r=e.query;let s=!1,l=a.queries.get(r);if(l||(s=!0,l=new pue),s)try{l.Nu=await a.onListen(r)}catch(h){const n=iI(h,`Initialization of query '${aD(e.query)}' failed`);return void e.onError(n)}a.queries.set(r,l),l.listeners.push(e),e.Mu(a.onlineState),l.Nu&&e.$u(l.Nu)&&lI(a)}async function oI(t,e){const a=pi(t),r=e.query;let s=!1;const l=a.queries.get(r);if(l){const h=l.listeners.indexOf(e);h>=0&&(l.listeners.splice(h,1),s=l.listeners.length===0)}if(s)return a.queries.delete(r),a.onUnlisten(r)}function yue(t,e){const a=pi(t);let r=!1;for(const s of e){const l=s.query,h=a.queries.get(l);if(h){for(const n of h.listeners)n.$u(s)&&(r=!0);h.Nu=s}}r&&lI(a)}function gue(t,e,a){const r=pi(t),s=r.queries.get(e);if(s)for(const l of s.listeners)l.onError(a);r.queries.delete(e)}function lI(t){t.ku.forEach(e=>{e.next()})}class uI{constructor(e,a,r){this.query=e,this.Ou=a,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new tv(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let a=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),a=!0):this.qu(e,this.onlineState)&&(this.Uu(e),a=!0),this.Bu=e,a}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let a=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),a=!0),a}qu(e,a){if(!e.fromCache)return!0;const r=a!=="Offline";return(!this.options.Ku||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||a==="Offline")}Lu(e){if(e.docChanges.length>0)return!0;const a=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!a)&&this.options.includeMetadataChanges===!0}Uu(e){e=tv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X${constructor(e){this.key=e}}class J${constructor(e){this.key=e}}class Aue{constructor(e,a){this.query=e,this.Yu=a,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=ki(),this.mutatedKeys=ki(),this.tc=_$(e),this.ec=new U_(this.tc)}get nc(){return this.Yu}sc(e,a){const r=a?a.ic:new wU,s=a?a.ec:this.ec;let l=a?a.mutatedKeys:this.mutatedKeys,h=s,n=!1;const w=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,T=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((E,z)=>{const k=s.get(E),U=ex(this.query,z)?z:null,Z=!!k&&this.mutatedKeys.has(k.key),q=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let $=!1;k&&U?k.data.isEqual(U.data)?Z!==q&&(r.track({type:3,doc:U}),$=!0):this.rc(k,U)||(r.track({type:2,doc:U}),$=!0,(w&&this.tc(U,w)>0||T&&this.tc(U,T)<0)&&(n=!0)):!k&&U?(r.track({type:0,doc:U}),$=!0):k&&!U&&(r.track({type:1,doc:k}),$=!0,(w||T)&&(n=!0)),$&&(U?(h=h.add(U),l=q?l.add(E):l.delete(E)):(h=h.delete(E),l=l.delete(E)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),l=l.delete(E.key),r.track({type:1,doc:E})}return{ec:h,ic:r,zi:n,mutatedKeys:l}}rc(e,a){return e.hasLocalMutations&&a.hasCommittedMutations&&!a.hasLocalMutations}applyChanges(e,a,r){const s=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const l=e.ic.xu();l.sort((T,E)=>function(z,k){const U=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ti()}};return U(z)-U(k)}(T.type,E.type)||this.tc(T.doc,E.doc)),this.oc(r);const h=a?this.uc():[],n=this.Zu.size===0&&this.current?1:0,w=n!==this.Xu;return this.Xu=n,l.length!==0||w?{snapshot:new tv(this.query,e.ec,s,l,e.mutatedKeys,n===0,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:h}:{cc:h}}Mu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ec:this.ec,ic:new wU,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(a=>this.Yu=this.Yu.add(a)),e.modifiedDocuments.forEach(a=>{}),e.removedDocuments.forEach(a=>this.Yu=this.Yu.delete(a)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=ki(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const a=[];return e.forEach(r=>{this.Zu.has(r)||a.push(new J$(r))}),this.Zu.forEach(r=>{e.has(r)||a.push(new X$(r))}),a}hc(e){this.Yu=e.ir,this.Zu=ki();const a=this.sc(e.documents);return this.applyChanges(a,!0)}lc(){return tv.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,this.Xu===0,this.hasCachedResults)}}class _ue{constructor(e,a,r){this.query=e,this.targetId=a,this.view=r}}class vue{constructor(e){this.key=e,this.fc=!1}}class wue{constructor(e,a,r,s,l,h){this.localStore=e,this.remoteStore=a,this.eventManager=r,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.dc={},this.wc=new Bv(n=>A$(n),Q2),this._c=new Map,this.mc=new Set,this.gc=new cu(Yn.comparator),this.yc=new Map,this.Ic=new J3,this.Tc={},this.Ec=new Map,this.Ac=ev.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function Rue(t,e){const a=zue(t);let r,s;const l=a.wc.get(e);if(l)r=l.targetId,a.sharedClientState.addLocalQueryTarget(r),s=l.view.lc();else{const h=await Hle(a.localStore,Ay(e)),n=a.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,s=await Tue(a,e,r,n==="current",h.resumeToken),a.isPrimaryClient&&Z$(a.remoteStore,h)}return s}async function Tue(t,e,a,r,s){t.Rc=(z,k,U)=>async function(Z,q,$,J){let ie=q.view.sc($);ie.zi&&(ie=await gU(Z.localStore,q.query,!1).then(({documents:he})=>q.view.sc(he,ie)));const de=J&&J.targetChanges.get(q.targetId),ge=q.view.applyChanges(ie,Z.isPrimaryClient,de);return TU(Z,q.targetId,ge.cc),ge.snapshot}(t,z,k,U);const l=await gU(t.localStore,e,!0),h=new Aue(e,l.ir),n=h.sc(l.documents),w=wT.createSynthesizedTargetChangeForCurrentChange(a,r&&t.onlineState!=="Offline",s),T=h.applyChanges(n,t.isPrimaryClient,w);TU(t,a,T.cc);const E=new _ue(e,a,h);return t.wc.set(e,E),t._c.has(a)?t._c.get(a).push(e):t._c.set(a,[e]),T.snapshot}async function Sue(t,e){const a=pi(t),r=a.wc.get(e),s=a._c.get(r.targetId);if(s.length>1)return a._c.set(r.targetId,s.filter(l=>!Q2(l,e))),void a.wc.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(r.targetId),a.sharedClientState.isActiveQueryTarget(r.targetId)||await oD(a.localStore,r.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(r.targetId),q$(a.remoteStore,r.targetId),lD(a,r.targetId)}).catch(AT)):(lD(a,r.targetId),await oD(a.localStore,r.targetId,!0))}async function Cue(t,e,a){const r=Oue(t);try{const s=await function(l,h){const n=pi(l),w=Qd.now(),T=h.reduce((k,U)=>k.add(U.key),ki());let E,z;return n.persistence.runTransaction("Locally write mutations","readwrite",k=>{let U=_y(),Z=ki();return n.Zi.getEntries(k,T).next(q=>{U=q,U.forEach(($,J)=>{J.isValidDocument()||(Z=Z.add($))})}).next(()=>n.localDocuments.getOverlayedDocuments(k,U)).next(q=>{E=q;const $=[];for(const J of h){const ie=Joe(J,E.get(J.key).overlayedDocument);ie!=null&&$.push(new Bg(J.key,ie,c$(ie.value.mapValue),xh.exists(!0)))}return n.mutationQueue.addMutationBatch(k,w,$,h)}).next(q=>{z=q;const $=q.applyToLocalDocumentSet(E,Z);return n.documentOverlayCache.saveOverlays(k,q.batchId,$)})}).then(()=>({batchId:z.batchId,changes:w$(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(l,h,n){let w=l.Tc[l.currentUser.toKey()];w||(w=new cu(gs)),w=w.insert(h,n),l.Tc[l.currentUser.toKey()]=w}(r,s.batchId,a),await TT(r,s.changes),await ox(r.remoteStore)}catch(s){const l=iI(s,"Failed to persist write");a.reject(l)}}async function Q$(t,e){const a=pi(t);try{const r=await jle(a.localStore,e);e.targetChanges.forEach((s,l)=>{const h=a.yc.get(l);h&&(zo(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?h.fc=!0:s.modifiedDocuments.size>0?zo(h.fc):s.removedDocuments.size>0&&(zo(h.fc),h.fc=!1))}),await TT(a,r,e)}catch(r){await AT(r)}}function RU(t,e,a){const r=pi(t);if(r.isPrimaryClient&&a===0||!r.isPrimaryClient&&a===1){const s=[];r.wc.forEach((l,h)=>{const n=h.view.Mu(e);n.snapshot&&s.push(n.snapshot)}),function(l,h){const n=pi(l);n.onlineState=h;let w=!1;n.queries.forEach((T,E)=>{for(const z of E.listeners)z.Mu(h)&&(w=!0)}),w&&lI(n)}(r.eventManager,e),s.length&&r.dc.nu(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function bue(t,e,a){const r=pi(t);r.sharedClientState.updateQueryState(e,"rejected",a);const s=r.yc.get(e),l=s&&s.key;if(l){let h=new cu(Yn.comparator);h=h.insert(l,ud.newNoDocument(l,Ci.min()));const n=ki().add(l),w=new nx(Ci.min(),new Map,new cu(gs),h,n);await Q$(r,w),r.gc=r.gc.remove(l),r.yc.delete(e),cI(r)}else await oD(r.localStore,e,!1).then(()=>lD(r,e,a)).catch(AT)}async function xue(t,e){const a=pi(t),r=e.batch.batchId;try{const s=await Gle(a.localStore,e);tK(a,r,null),eK(a,r),a.sharedClientState.updateMutationState(r,"acknowledged"),await TT(a,s)}catch(s){await AT(s)}}async function Pue(t,e,a){const r=pi(t);try{const s=await function(l,h){const n=pi(l);return n.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let T;return n.mutationQueue.lookupMutationBatch(w,h).next(E=>(zo(E!==null),T=E.keys(),n.mutationQueue.removeMutationBatch(w,E))).next(()=>n.mutationQueue.performConsistencyCheck(w)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(w,T,h)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,T)).next(()=>n.localDocuments.getDocuments(w,T))})}(r.localStore,e);tK(r,e,a),eK(r,e),r.sharedClientState.updateMutationState(e,"rejected",a),await TT(r,s)}catch(s){await AT(s)}}function eK(t,e){(t.Ec.get(e)||[]).forEach(a=>{a.resolve()}),t.Ec.delete(e)}function tK(t,e,a){const r=pi(t);let s=r.Tc[r.currentUser.toKey()];if(s){const l=s.get(e);l&&(a?l.reject(a):l.resolve(),s=s.remove(e)),r.Tc[r.currentUser.toKey()]=s}}function lD(t,e,a=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t._c.get(e))t.wc.delete(r),a&&t.dc.Pc(r,a);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(r=>{t.Ic.containsKey(r)||aK(t,r)})}function aK(t,e){t.mc.delete(e.path.canonicalString());const a=t.gc.get(e);a!==null&&(q$(t.remoteStore,a),t.gc=t.gc.remove(e),t.yc.delete(a),cI(t))}function TU(t,e,a){for(const r of a)r instanceof X$?(t.Ic.addReference(r.key,e),Eue(t,r)):r instanceof J$?(hn("SyncEngine","Document no longer in limbo: "+r.key),t.Ic.removeReference(r.key,e),t.Ic.containsKey(r.key)||aK(t,r.key)):ti()}function Eue(t,e){const a=e.key,r=a.path.canonicalString();t.gc.get(a)||t.mc.has(r)||(hn("SyncEngine","New document in limbo: "+a),t.mc.add(r),cI(t))}function cI(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const a=new Yn(Fl.fromString(e)),r=t.Ac.next();t.yc.set(r,new vue(a)),t.gc=t.gc.insert(a,r),Z$(t.remoteStore,new wg(Ay(X2(a.path)),r,"TargetPurposeLimboResolution",B3.ct))}}async function TT(t,e,a){const r=pi(t),s=[],l=[],h=[];r.wc.isEmpty()||(r.wc.forEach((n,w)=>{h.push(r.Rc(w,e,a).then(T=>{if((T||a)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,T!=null&&T.fromCache?"not-current":"current"),T){s.push(T);const E=eI.Li(w.targetId,T);l.push(E)}}))}),await Promise.all(h),r.dc.nu(s),await async function(n,w){const T=pi(n);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>Mr.forEach(w,z=>Mr.forEach(z.Fi,k=>T.persistence.referenceDelegate.addReference(E,z.targetId,k)).next(()=>Mr.forEach(z.Bi,k=>T.persistence.referenceDelegate.removeReference(E,z.targetId,k)))))}catch(E){if(!_T(E))throw E;hn("LocalStore","Failed to update sequence numbers: "+E)}for(const E of w){const z=E.targetId;if(!E.fromCache){const k=T.Ji.get(z),U=k.snapshotVersion,Z=k.withLastLimboFreeSnapshotVersion(U);T.Ji=T.Ji.insert(z,Z)}}}(r.localStore,l))}async function Nue(t,e){const a=pi(t);if(!a.currentUser.isEqual(e)){hn("SyncEngine","User change. New user:",e.toKey());const r=await k$(a.localStore,e);a.currentUser=e,function(s,l){s.Ec.forEach(h=>{h.forEach(n=>{n.reject(new Zr(ar.CANCELLED,l))})}),s.Ec.clear()}(a,"'waitForPendingWrites' promise is rejected due to a user change."),a.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await TT(a,r.er)}}function Vue(t,e){const a=pi(t),r=a.yc.get(e);if(r&&r.fc)return ki().add(r.key);{let s=ki();const l=a._c.get(e);if(!l)return s;for(const h of l){const n=a.wc.get(h);s=s.unionWith(n.view.nc)}return s}}function zue(t){const e=pi(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Q$.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vue.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bue.bind(null,e),e.dc.nu=yue.bind(null,e.eventManager),e.dc.Pc=gue.bind(null,e.eventManager),e}function Oue(t){const e=pi(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xue.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Pue.bind(null,e),e}class SU{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=ix(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,a){return null}createIndexBackfillerScheduler(e,a){return null}createLocalStore(e){return Ble(this.persistence,new Ule,e.initialUser,this.serializer)}createPersistence(e){return new Lle(Q3.zs,this.serializer)}createSharedClientState(e){return new Kle}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Due{async initialize(e,a){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(a),this.remoteStore=this.createRemoteStore(a),this.eventManager=this.createEventManager(a),this.syncEngine=this.createSyncEngine(a,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>RU(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Nue.bind(null,this.syncEngine),await fue(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new mue}createDatastore(e){const a=ix(e.databaseInfo.databaseId),r=(s=e.databaseInfo,new Jle(s));var s;return function(l,h,n,w){return new tue(l,h,n,w)}(e.authCredentials,e.appCheckCredentials,r,a)}createRemoteStore(e){return a=this.localStore,r=this.datastore,s=e.asyncQueue,l=n=>RU(this.syncEngine,n,0),h=_U.D()?new _U:new Wle,new rue(a,r,s,l,h);var a,r,s,l,h}createSyncEngine(e,a){return function(r,s,l,h,n,w,T){const E=new wue(r,s,l,h,n,w);return T&&(E.vc=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,a)}terminate(){return async function(e){const a=pi(e);hn("RemoteStore","RemoteStore shutting down."),a.vu.add(5),await RT(a),a.Pu.shutdown(),a.bu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):gy("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,a){this.muted||setTimeout(()=>{this.muted||e(a)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mue{constructor(e,a,r,s){this.authCredentials=e,this.appCheckCredentials=a,this.asyncQueue=r,this.databaseInfo=s,this.user=sd.UNAUTHENTICATED,this.clientId=s$.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async l=>{hn("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(hn("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Zr(ar.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new dy;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(a){const r=iI(a,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function kE(t,e){t.asyncQueue.verifyOperationInProgress(),hn("FirestoreClient","Initializing OfflineComponentProvider");const a=await t.getConfiguration();await e.initialize(a);let r=a.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await k$(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function CU(t,e){t.asyncQueue.verifyOperationInProgress();const a=await Lue(t);hn("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(a,r),t.setCredentialChangeListener(s=>vU(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,l)=>vU(e.remoteStore,l)),t._onlineComponents=e}function Iue(t){return t.name==="FirebaseError"?t.code===ar.FAILED_PRECONDITION||t.code===ar.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function Lue(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){hn("FirestoreClient","Using user provided OfflineComponentProvider");try{await kE(t,t._uninitializedComponentsProvider._offline)}catch(e){const a=e;if(!Iue(a))throw a;Y_("Error using user provided cache. Falling back to memory cache: "+a),await kE(t,new SU)}}else hn("FirestoreClient","Using default OfflineComponentProvider"),await kE(t,new SU);return t._offlineComponents}async function rK(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(hn("FirestoreClient","Using user provided OnlineComponentProvider"),await CU(t,t._uninitializedComponentsProvider._online)):(hn("FirestoreClient","Using default OnlineComponentProvider"),await CU(t,new Due))),t._onlineComponents}function Fue(t){return rK(t).then(e=>e.syncEngine)}async function Ab(t){const e=await rK(t),a=e.eventManager;return a.onListen=Rue.bind(null,e.syncEngine),a.onUnlisten=Sue.bind(null,e.syncEngine),a}function Uue(t,e,a={}){const r=new dy;return t.asyncQueue.enqueueAndForget(async()=>function(s,l,h,n,w){const T=new dI({next:z=>{l.enqueueAndForget(()=>oI(s,E));const k=z.docs.has(h);!k&&z.fromCache?w.reject(new Zr(ar.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&z.fromCache&&n&&n.source==="server"?w.reject(new Zr(ar.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(z)},error:z=>w.reject(z)}),E=new uI(X2(h.path),T,{includeMetadataChanges:!0,Ku:!0});return sI(s,E)}(await Ab(t),t.asyncQueue,e,a,r)),r.promise}function kue(t,e,a={}){const r=new dy;return t.asyncQueue.enqueueAndForget(async()=>function(s,l,h,n,w){const T=new dI({next:z=>{l.enqueueAndForget(()=>oI(s,E)),z.fromCache&&n.source==="server"?w.reject(new Zr(ar.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(z)},error:z=>w.reject(z)}),E=new uI(h,T,{includeMetadataChanges:!0,Ku:!0});return sI(s,E)}(await Ab(t),t.asyncQueue,e,a,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nK(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bU=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iK(t,e,a){if(!a)throw new Zr(ar.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Bue(t,e,a,r){if(e===!0&&r===!0)throw new Zr(ar.INVALID_ARGUMENT,`${t} and ${a} cannot be used together.`)}function xU(t){if(!Yn.isDocumentKey(t))throw new Zr(ar.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function PU(t){if(Yn.isDocumentKey(t))throw new Zr(ar.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function lx(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(a){return a.constructor?a.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ti()}function of(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Zr(ar.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const a=lx(t);throw new Zr(ar.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${a}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EU{constructor(e){var a,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Zr(ar.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(a=e.ssl)===null||a===void 0||a;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Zr(ar.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Bue("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nK((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Zr(ar.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Zr(ar.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Zr(ar.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(a=this.experimentalLongPollingOptions,r=e.experimentalLongPollingOptions,a.timeoutSeconds===r.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var a,r}}class ux{constructor(e,a,r,s){this._authCredentials=e,this._appCheckCredentials=a,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new EU({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Zr(ar.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Zr(ar.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new EU(e),e.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new coe;switch(a.type){case"firstParty":return new poe(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Zr(ar.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const a=bU.get(e);a&&(hn("ComponentProvider","Removing Datastore"),bU.delete(e),a.terminate())}(this),Promise.resolve()}}function Gue(t,e,a,r={}){var s;const l=(t=of(t,ux))._getSettings(),h=`${e}:${a}`;if(l.host!=="firestore.googleapis.com"&&l.host!==h&&Y_("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},l),{host:h,ssl:!1})),r.mockUserToken){let n,w;if(typeof r.mockUserToken=="string")n=r.mockUserToken,w=sd.MOCK_USER;else{n=Oae(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new Zr(ar.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new sd(T)}t._authCredentials=new doe(new i$(n,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,a,r){this.converter=a,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new eh(this.firestore,e,this._key)}}class Gg{constructor(e,a,r){this.converter=a,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Gg(this.firestore,e,this._query)}}class Eg extends Gg{constructor(e,a,r){super(e,a,X2(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new eh(this.firestore,null,new Yn(e))}withConverter(e){return new Eg(this.firestore,e,this._path)}}function Wn(t,e,...a){if(t=Iu(t),iK("collection","path",e),t instanceof ux){const r=Fl.fromString(e,...a);return PU(r),new Eg(t,null,r)}{if(!(t instanceof eh||t instanceof Eg))throw new Zr(ar.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fl.fromString(e,...a));return PU(r),new Eg(t.firestore,null,r)}}function Is(t,e,...a){if(t=Iu(t),arguments.length===1&&(e=s$.A()),iK("doc","path",e),t instanceof ux){const r=Fl.fromString(e,...a);return xU(r),new eh(t,null,new Yn(r))}{if(!(t instanceof eh||t instanceof Eg))throw new Zr(ar.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fl.fromString(e,...a));return xU(r),new eh(t.firestore,t instanceof Eg?t.converter:null,new Yn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jue{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new G$(this,"async_queue_retry"),this.Xc=()=>{const a=UE();a&&hn("AsyncQueue","Visibility state changed to "+a.visibilityState),this.qo.Mo()};const e=UE();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const a=UE();a&&typeof a.removeEventListener=="function"&&a.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const a=new dy;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(a.resolve,a.reject),a.promise)).then(()=>a.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!_T(e))throw e;hn("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const a=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{this.Wc=r,this.Hc=!1;const s=function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),h}(r);throw gy("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Hc=!1,r))));return this.Gc=a,a}enqueueAfterDelay(e,a,r){this.Zc(),this.Yc.indexOf(e)>-1&&(a=0);const s=nI.createAndSchedule(this,e,a,r,l=>this.na(l));return this.zc.push(s),s}Zc(){this.Wc&&ti()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(const a of this.zc)if(a.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((a,r)=>a.targetTimeMs-r.targetTimeMs);for(const a of this.zc)if(a.skipDelay(),e!=="all"&&a.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const a=this.zc.indexOf(e);this.zc.splice(a,1)}}function NU(t){return function(e,a){if(typeof e!="object"||e===null)return!1;const r=e;for(const s of a)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class vy extends ux{constructor(e,a,r,s){super(e,a,r,s),this.type="firestore",this._queue=new jue,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||sK(this),this._firestoreClient.terminate()}}function Zue(t,e){const a=typeof t=="object"?t:Rq(),r=typeof t=="string"?t:"(default)",s=u3(a,"firestore").getImmediate({identifier:r});if(!s._initialized){const l=Vae("firestore");l&&Gue(s,...l)}return s}function ST(t){return t._firestoreClient||sK(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function sK(t){var e,a,r;const s=t._freezeSettings(),l=function(h,n,w,T){return new boe(h,n,w,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,nK(T.experimentalLongPollingOptions),T.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new Mue(t._authCredentials,t._appCheckCredentials,t._queue,l),!((a=s.cache)===null||a===void 0)&&a._offlineComponentProvider&&(!((r=s.cache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e){this._byteString=e}static fromBase64String(e){try{return new av(Ad.fromBase64String(e))}catch(a){throw new Zr(ar.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+a)}}static fromUint8Array(e){return new av(Ad.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(...e){for(let a=0;a<e.length;++a)if(e[a].length===0)throw new Zr(ar.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Em(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,a){if(!isFinite(e)||e<-90||e>90)throw new Zr(ar.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(a)||a<-180||a>180)throw new Zr(ar.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+a);this._lat=e,this._long=a}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return gs(this._lat,e._lat)||gs(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const que=/^__.*__$/;class Hue{constructor(e,a,r){this.data=e,this.fieldMask=a,this.fieldTransforms=r}toMutation(e,a){return this.fieldMask!==null?new Bg(e,this.data,this.fieldMask,a,this.fieldTransforms):new vT(e,this.data,a,this.fieldTransforms)}}class oK{constructor(e,a,r){this.data=e,this.fieldMask=a,this.fieldTransforms=r}toMutation(e,a){return new Bg(e,this.data,this.fieldMask,a,this.fieldTransforms)}}function lK(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ti()}}class pI{constructor(e,a,r,s,l,h){this.settings=e,this.databaseId=a,this.serializer=r,this.ignoreUndefinedProperties=s,l===void 0&&this.ua(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new pI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var a;const r=(a=this.path)===null||a===void 0?void 0:a.child(e),s=this.aa({path:r,la:!1});return s.fa(e),s}da(e){var a;const r=(a=this.path)===null||a===void 0?void 0:a.child(e),s=this.aa({path:r,la:!1});return s.ua(),s}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return _b(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return this.fieldMask.find(a=>e.isPrefixOf(a))!==void 0||this.fieldTransforms.find(a=>e.isPrefixOf(a.field))!==void 0}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(e.length===0)throw this._a("Document fields must not be empty");if(lK(this.ca)&&que.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class $ue{constructor(e,a,r){this.databaseId=e,this.ignoreUndefinedProperties=a,this.serializer=r||ix(e)}ya(e,a,r,s=!1){return new pI({ca:e,methodName:a,ga:r,path:Em.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cx(t){const e=t._freezeSettings(),a=ix(t._databaseId);return new $ue(t._databaseId,!!e.ignoreUndefinedProperties,a)}function uK(t,e,a,r,s,l={}){const h=t.ya(l.merge||l.mergeFields?2:0,e,a,s);mI("Data must be an object, but it was:",h,r);const n=hK(r,h);let w,T;if(l.merge)w=new nf(h.fieldMask),T=h.fieldTransforms;else if(l.mergeFields){const E=[];for(const z of l.mergeFields){const k=uD(e,z,a);if(!h.contains(k))throw new Zr(ar.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);pK(E,k)||E.push(k)}w=new nf(E),T=h.fieldTransforms.filter(z=>w.covers(z.field))}else w=null,T=h.fieldTransforms;return new Hue(new Ch(n),w,T)}class dx extends hI{_toFieldTransform(e){if(e.ca!==2)throw e.ca===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dx}}function cK(t,e,a,r){const s=t.ya(1,e,a);mI("Data must be an object, but it was:",s,r);const l=[],h=Ch.empty();g0(r,(w,T)=>{const E=yI(e,w,a);T=Iu(T);const z=s.da(E);if(T instanceof dx)l.push(E);else{const k=bT(T,z);k!=null&&(l.push(E),h.set(E,k))}});const n=new nf(l);return new oK(h,n,s.fieldTransforms)}function dK(t,e,a,r,s,l){const h=t.ya(1,e,a),n=[uD(e,r,a)],w=[s];if(l.length%2!=0)throw new Zr(ar.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<l.length;k+=2)n.push(uD(e,l[k])),w.push(l[k+1]);const T=[],E=Ch.empty();for(let k=n.length-1;k>=0;--k)if(!pK(T,n[k])){const U=n[k];let Z=w[k];Z=Iu(Z);const q=h.da(U);if(Z instanceof dx)T.push(U);else{const $=bT(Z,q);$!=null&&(T.push(U),E.set(U,$))}}const z=new nf(T);return new oK(E,z,h.fieldTransforms)}function Kue(t,e,a,r=!1){return bT(a,t.ya(r?4:3,e))}function bT(t,e){if(fK(t=Iu(t)))return mI("Unsupported field value:",e,t),hK(t,e);if(t instanceof hI)return function(a,r){if(!lK(r.ca))throw r._a(`${a._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${a._methodName}() is not currently supported inside arrays`);const s=a._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&e.ca!==4)throw e._a("Nested arrays are not supported");return function(a,r){const s=[];let l=0;for(const h of a){let n=bT(h,r.wa(l));n==null&&(n={nullValue:"NULL_VALUE"}),s.push(n),l++}return{arrayValue:{values:s}}}(t,e)}return function(a,r){if((a=Iu(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return Hoe(r.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const s=Qd.fromDate(a);return{timestampValue:yb(r.serializer,s)}}if(a instanceof Qd){const s=new Qd(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:yb(r.serializer,s)}}if(a instanceof fI)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof av)return{bytesValue:D$(r.serializer,a._byteString)};if(a instanceof eh){const s=r.databaseId,l=a.firestore._databaseId;if(!l.isEqual(s))throw r._a(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:X3(a.firestore._databaseId||r.databaseId,a._key.path)}}throw r._a(`Unsupported field value: ${lx(a)}`)}(t,e)}function hK(t,e){const a={};return l$(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):g0(t,(r,s)=>{const l=bT(s,e.ha(r));l!=null&&(a[r]=l)}),{mapValue:{fields:a}}}function fK(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qd||t instanceof fI||t instanceof av||t instanceof eh||t instanceof hI)}function mI(t,e,a){if(!fK(a)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(a)){const r=lx(a);throw r==="an object"?e._a(t+" a custom object"):e._a(t+" "+r)}}function uD(t,e,a){if((e=Iu(e))instanceof CT)return e._internalPath;if(typeof e=="string")return yI(t,e);throw _b("Field path arguments must be of type string or ",t,!1,void 0,a)}const Wue=new RegExp("[~\\*/\\[\\]]");function yI(t,e,a){if(e.search(Wue)>=0)throw _b(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,a);try{return new CT(...e.split("."))._internalPath}catch{throw _b(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,a)}}function _b(t,e,a,r,s){const l=r&&!r.isEmpty(),h=s!==void 0;let n=`Function ${e}() called with invalid data`;a&&(n+=" (via `toFirestore()`)"),n+=". ";let w="";return(l||h)&&(w+=" (found",l&&(w+=` in field ${r}`),h&&(w+=` in document ${s}`),w+=")"),new Zr(ar.INVALID_ARGUMENT,n+t+w)}function pK(t,e){return t.some(a=>a.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mK{constructor(e,a,r,s,l){this._firestore=e,this._userDataWriter=a,this._key=r,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new eh(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Yue(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const a=this._document.data.field(hx("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a)}}}class Yue extends mK{data(){return super.data()}}function hx(t,e){return typeof e=="string"?yI(t,e):e instanceof CT?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yK(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Zr(ar.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gI{}class gK extends gI{}function b_(t,e,...a){let r=[];e instanceof gI&&r.push(e),r=r.concat(a),function(s){const l=s.filter(n=>n instanceof AI).length,h=s.filter(n=>n instanceof fx).length;if(l>1||l>0&&h>0)throw new Zr(ar.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class fx extends gK{constructor(e,a,r){super(),this._field=e,this._op=a,this._value=r,this.type="where"}static _create(e,a,r){return new fx(e,a,r)}_apply(e){const a=this._parse(e);return _K(e._query,a),new Gg(e.firestore,e.converter,eD(e._query,a))}_parse(e){const a=cx(e.firestore);return function(s,l,h,n,w,T,E){let z;if(w.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new Zr(ar.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){zU(E,T);const k=[];for(const U of E)k.push(VU(n,s,U));z={arrayValue:{values:k}}}else z=VU(n,s,E)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||zU(E,T),z=Kue(h,l,E,T==="in"||T==="not-in");return lu.create(w,T,z)}(e._query,"where",a,e.firestore._databaseId,this._field,this._op,this._value)}}function iC(t,e,a){const r=e,s=hx("where",t);return fx._create(s,r,a)}class AI extends gI{constructor(e,a){super(),this.type=e,this._queryConstraints=a}static _create(e,a){return new AI(e,a)}_parse(e){const a=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return a.length===1?a[0]:Mp.create(a,this._getOperator())}_apply(e){const a=this._parse(e);return a.getFilters().length===0?e:(function(r,s){let l=r;const h=s.getFlattenedFilters();for(const n of h)_K(l,n),l=eD(l,n)}(e._query,a),new Gg(e.firestore,e.converter,eD(e._query,a)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _I extends gK{constructor(e,a){super(),this._field=e,this._direction=a,this.type="orderBy"}static _create(e,a){return new _I(e,a)}_apply(e){const a=function(r,s,l){if(r.startAt!==null)throw new Zr(ar.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Zr(ar.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new L_(s,l);return function(n,w){if($3(n)===null){const T=J2(n);T!==null&&vK(n,T,w.field)}}(r,h),h}(e._query,this._field,this._direction);return new Gg(e.firestore,e.converter,function(r,s){const l=r.explicitOrderBy.concat([s]);return new kv(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,a))}}function AK(t,e="asc"){const a=e,r=hx("orderBy",t);return _I._create(r,a)}function VU(t,e,a){if(typeof(a=Iu(a))=="string"){if(a==="")throw new Zr(ar.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!g$(e)&&a.indexOf("/")!==-1)throw new Zr(ar.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${a}' contains a '/' character.`);const r=e.path.child(Fl.fromString(a));if(!Yn.isDocumentKey(r))throw new Zr(ar.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return eU(t,new Yn(r))}if(a instanceof eh)return eU(t,a._key);throw new Zr(ar.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lx(a)}.`)}function zU(t,e){if(!Array.isArray(t)||t.length===0)throw new Zr(ar.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _K(t,e){if(e.isInequality()){const r=J2(t),s=e.field;if(r!==null&&!r.isEqual(s))throw new Zr(ar.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const l=$3(t);l!==null&&vK(t,s,l)}const a=function(r,s){for(const l of r)for(const h of l.getFlattenedFilters())if(s.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(a!==null)throw a===e.op?new Zr(ar.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Zr(ar.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${a.toString()}' filters.`)}function vK(t,e,a){if(!a.isEqual(e))throw new Zr(ar.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${a.toString()}' instead.`)}class Xue{convertValue(e,a="none"){switch(u0(e)){case 0:return null;case 1:return e.booleanValue;case 2:return su(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,a);case 5:return e.stringValue;case 6:return this.convertBytes(l0(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,a);case 10:return this.convertObject(e.mapValue,a);default:throw ti()}}convertObject(e,a){return this.convertObjectMap(e.fields,a)}convertObjectMap(e,a="none"){const r={};return g0(e,(s,l)=>{r[s]=this.convertValue(l,a)}),r}convertGeoPoint(e){return new fI(su(e.latitude),su(e.longitude))}convertArray(e,a){return(e.values||[]).map(r=>this.convertValue(r,a))}convertServerTimestamp(e,a){switch(a){case"previous":const r=j3(e);return r==null?null:this.convertValue(r,a);case"estimate":return this.convertTimestamp(hR(e));default:return null}}convertTimestamp(e){const a=zg(e);return new Qd(a.seconds,a.nanos)}convertDocumentKey(e,a){const r=Fl.fromString(e);zo(U$(r));const s=new fR(r.get(1),r.get(3)),l=new Yn(r.popFirst(5));return s.isEqual(a)||gy(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${a.projectId}/${a.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wK(t,e,a){let r;return r=t?a&&(a.merge||a.mergeFields)?t.toFirestore(e,a):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,a){this.hasPendingWrites=e,this.fromCache=a}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class RK extends mK{constructor(e,a,r,s,l,h){super(e,a,r,s,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const a=new IC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(a,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,a={}){if(this._document){const r=this._document.data.field(hx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,a.serverTimestamps)}}}class IC extends RK{data(e={}){return super.data(e)}}class TK{constructor(e,a,r,s){this._firestore=e,this._userDataWriter=a,this._snapshot=s,this.metadata=new zw(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(a=>e.push(a)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,a){this._snapshot.docs.forEach(r=>{e.call(a,new IC(this._firestore,this._userDataWriter,r.key,r,new zw(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const a=!!e.includeMetadataChanges;if(a&&this._snapshot.excludesMetadataChanges)throw new Zr(ar.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===a||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(h=>{const n=new IC(r._firestore,r._userDataWriter,h.doc.key,h.doc,new zw(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:n,oldIndex:-1,newIndex:l++}})}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>s||h.type!==3).map(h=>{const n=new IC(r._firestore,r._userDataWriter,h.doc.key,h.doc,new zw(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,T=-1;return h.type!==0&&(w=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),T=l.indexOf(h.doc.key)),{type:Jue(h.type),doc:n,oldIndex:w,newIndex:T}})}}(this,a),this._cachedChangesIncludeMetadataChanges=a),this._cachedChanges}}function Jue(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ti()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(t){t=of(t,eh);const e=of(t.firestore,vy);return Uue(ST(e),t._key).then(a=>SK(e,t,a))}class vI extends Xue{constructor(e){super(),this.firestore=e}convertBytes(e){return new av(e)}convertReference(e){const a=this.convertDocumentKey(e,this.firestore._databaseId);return new eh(this.firestore,null,a)}}function Xi(t){t=of(t,Gg);const e=of(t.firestore,vy),a=ST(e),r=new vI(e);return yK(t._query),kue(a,t._query).then(s=>new TK(e,r,t,s))}function cd(t,e,a,...r){t=of(t,eh);const s=of(t.firestore,vy),l=cx(s);let h;return h=typeof(e=Iu(e))=="string"||e instanceof CT?dK(l,"updateDoc",t._key,e,a,r):cK(l,"updateDoc",t._key,e),px(s,[h.toMutation(t._key,xh.exists(!0))])}function wI(t){return px(of(t.firestore,vy),[new rx(t._key,xh.none())])}function gR(t,e){const a=of(t.firestore,vy),r=Is(t),s=wK(t.converter,e);return px(a,[uK(cx(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,xh.exists(!1))]).then(()=>r)}function ay(t,...e){var a,r,s;t=Iu(t);let l={includeMetadataChanges:!1},h=0;typeof e[h]!="object"||NU(e[h])||(l=e[h],h++);const n={includeMetadataChanges:l.includeMetadataChanges};if(NU(e[h])){const z=e[h];e[h]=(a=z.next)===null||a===void 0?void 0:a.bind(z),e[h+1]=(r=z.error)===null||r===void 0?void 0:r.bind(z),e[h+2]=(s=z.complete)===null||s===void 0?void 0:s.bind(z)}let w,T,E;if(t instanceof eh)T=of(t.firestore,vy),E=X2(t._key.path),w={next:z=>{e[h]&&e[h](SK(T,t,z))},error:e[h+1],complete:e[h+2]};else{const z=of(t,Gg);T=of(z.firestore,vy),E=z._query;const k=new vI(T);w={next:U=>{e[h]&&e[h](new TK(T,k,z,U))},error:e[h+1],complete:e[h+2]},yK(t._query)}return function(z,k,U,Z){const q=new dI(Z),$=new uI(k,q,U);return z.asyncQueue.enqueueAndForget(async()=>sI(await Ab(z),$)),()=>{q.Dc(),z.asyncQueue.enqueueAndForget(async()=>oI(await Ab(z),$))}}(ST(T),E,n,w)}function px(t,e){return function(a,r){const s=new dy;return a.asyncQueue.enqueueAndForget(async()=>Cue(await Fue(a),r,s)),s.promise}(ST(t),e)}function SK(t,e,a){const r=a.docs.get(e._key),s=new vI(t);return new RK(t,s,e._key,r,new zw(a.hasPendingWrites,a.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Que{constructor(e,a){this._firestore=e,this._commitHandler=a,this._mutations=[],this._committed=!1,this._dataReader=cx(e)}set(e,a,r){this._verifyNotCommitted();const s=BE(e,this._firestore),l=wK(s.converter,a,r),h=uK(this._dataReader,"WriteBatch.set",s._key,l,s.converter!==null,r);return this._mutations.push(h.toMutation(s._key,xh.none())),this}update(e,a,r,...s){this._verifyNotCommitted();const l=BE(e,this._firestore);let h;return h=typeof(a=Iu(a))=="string"||a instanceof CT?dK(this._dataReader,"WriteBatch.update",l._key,a,r,s):cK(this._dataReader,"WriteBatch.update",l._key,a),this._mutations.push(h.toMutation(l._key,xh.exists(!0))),this}delete(e){this._verifyNotCommitted();const a=BE(e,this._firestore);return this._mutations=this._mutations.concat(new rx(a._key,xh.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Zr(ar.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function BE(t,e){if((t=Iu(t)).firestore!==e)throw new Zr(ar.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ece(t){return ST(t=of(t,vy)),new Que(t,e=>px(t,e))}(function(t,e=!0){(function(a){Uv=a})(Dv),$_(new n0("firestore",(a,{instanceIdentifier:r,options:s})=>{const l=a.getProvider("app").getImmediate(),h=new vy(new hoe(a.getProvider("auth-internal")),new yoe(a.getProvider("app-check-internal")),function(n,w){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Zr(ar.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fR(n.options.projectId,w)}(l,r),l);return s=Object.assign({useFetchStreams:e},s),h._setSettings(s),h},"PUBLIC").setMultipleInstances(!0)),Pg(W6,"3.13.0",t),Pg(W6,"3.13.0","esm2017")})();const tce={apiKey:"AIzaSyAqEefB5cZ1jVzeqdhxfRYHUzOqgyUqieo",authDomain:"ecp-caps.firebaseapp.com",projectId:"ecp-caps",storageBucket:"ecp-caps.firebasestorage.app",messagingSenderId:"1040391525167",appId:"1:1040391525167:web:c4b9bff139a86daacf47da"},CK=wq(tce),jv=rse(CK),zr=Zue(CK);var bK={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},OU=Vt.createContext&&Vt.createContext(bK),ace=["attr","size","title"];function rce(t,e){if(t==null)return{};var a=nce(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function nce(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function vb(){return vb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},vb.apply(this,arguments)}function DU(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function wb(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?DU(Object(a),!0).forEach(function(r){ice(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):DU(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function ice(t,e,a){return e=sce(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function sce(t){var e=oce(t,"string");return typeof e=="symbol"?e:e+""}function oce(t,e){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xK(t){return t&&t.map((e,a)=>Vt.createElement(e.tag,wb({key:a},e.attr),xK(e.child)))}function Wo(t){return e=>Vt.createElement(lce,vb({attr:wb({},t.attr)},e),xK(t.child))}function lce(t){var e=a=>{var{attr:r,size:s,title:l}=t,h=rce(t,ace),n=s||a.size||"1em",w;return a.className&&(w=a.className),t.className&&(w=(w?w+" ":"")+t.className),Vt.createElement("svg",vb({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,r,h,{className:w,style:wb(wb({color:t.color||a.color},a.style),t.style),height:n,width:n,xmlns:"http://www.w3.org/2000/svg"}),l&&Vt.createElement("title",null,l),t.children)};return OU!==void 0?Vt.createElement(OU.Consumer,null,a=>e(a)):e(bK)}function uce(t){return Wo({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(t)}function cce(t){return Wo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"},child:[]}]})(t)}function MU(t){return Wo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function dce(t){return Wo({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(t)}function hce(t){return Wo({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(t)}function fce(t){return Wo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(t)}function Bw(t){return Wo({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function pce(t){return Wo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"},child:[]}]})(t)}function mce(t){return Wo({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 0c-69.59 0-126 56.41-126 126 0 56.26 82.35 158.8 113.9 196.02 6.39 7.54 17.82 7.54 24.2 0C331.65 284.8 414 182.26 414 126 414 56.41 357.59 0 288 0zm0 168c-23.2 0-42-18.8-42-42s18.8-42 42-42 42 18.8 42 42-18.8 42-42 42zM20.12 215.95A32.006 32.006 0 0 0 0 245.66v250.32c0 11.32 11.43 19.06 21.94 14.86L160 448V214.92c-8.84-15.98-16.07-31.54-21.25-46.42L20.12 215.95zM288 359.67c-14.07 0-27.38-6.18-36.51-16.96-19.66-23.2-40.57-49.62-59.49-76.72v182l192 64V266c-18.92 27.09-39.82 53.52-59.49 76.72-9.13 10.77-22.44 16.95-36.51 16.95zm266.06-198.51L416 224v288l139.88-55.95A31.996 31.996 0 0 0 576 426.34V176.02c0-11.32-11.43-19.06-21.94-14.86z"},child:[]}]})(t)}function yce(t){return Wo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"},child:[]}]})(t)}function RI(t){return Wo({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function PK(t){return Wo({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function EK(t){return Wo({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"},child:[]}]})(t)}function IU(t){return Wo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}function gce(t){return Wo({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M630.6 364.9l-90.3-90.2c-12-12-28.3-18.7-45.3-18.7h-79.3c-17.7 0-32 14.3-32 32v79.2c0 17 6.7 33.2 18.7 45.2l90.3 90.2c12.5 12.5 32.8 12.5 45.3 0l92.5-92.5c12.6-12.5 12.6-32.7.1-45.2zm-182.8-21c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24c0 13.2-10.7 24-24 24zm-223.8-88c70.7 0 128-57.3 128-128C352 57.3 294.7 0 224 0S96 57.3 96 128c0 70.6 57.3 127.9 128 127.9zm127.8 111.2V294c-12.2-3.6-24.9-6.2-38.2-6.2h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 287.9 0 348.1 0 422.3v41.6c0 26.5 21.5 48 48 48h352c15.5 0 29.1-7.5 37.9-18.9l-58-58c-18.1-18.1-28.1-42.2-28.1-67.9z"},child:[]}]})(t)}const jg=()=>{const[t,e]=nt.useState("Loading..."),[a,r]=nt.useState([]),[s,l]=nt.useState(!1),[h,n]=nt.useState(0),w="https://ecorideupload.s3.ap-southeast-2.amazonaws.com/uploads/profile/1742829316204_image.png";nt.useEffect(()=>{const U=Wn(zr,"notifications"),Z=b_(U,AK("timestamp","desc")),q=ay(Z,$=>{const J=[];$.forEach(ie=>{J.push({id:ie.id,...ie.data()})}),r(J),n(J.filter(ie=>!ie.read).length)});return()=>q()},[]),nt.useEffect(()=>{const U=jv.onAuthStateChanged(async Z=>{if(Z)try{const q=Is(zr,"users",Z.uid),$=await Ep(q);$.exists()?e($.data().name):e("Super Admin")}catch(q){console.error("Error fetching user data:",q)}else e("Unknown User")});return()=>U()},[]);const T=()=>{l(!s)},E=async()=>{try{const U=ece(zr);a.filter(Z=>!Z.read).forEach(Z=>{const q=Is(zr,"notifications",Z.id);U.update(q,{read:!0})}),await U.commit(),r(a.map(Z=>({...Z,read:!0}))),n(0)}catch(U){console.error("Error marking notifications as read:",U)}},z=U=>{if(!U)return"";const Z=U.toDate();return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(Z)},k=U=>{switch(U.type){case"status_update":return K.jsxs("div",{className:"notification-message",children:[K.jsx("p",{children:U.message}),K.jsx("span",{className:`status-badge ${U.status.toLowerCase().replace(" ","-")}`,children:U.status})]});case"battery_update":return K.jsxs("div",{className:"notification-message",children:[K.jsx("p",{children:U.message}),K.jsx("div",{className:"battery-indicator",children:K.jsx("span",{className:"battery-level",style:{width:`${U.batteryLevel}%`}})})]});default:return K.jsx("p",{children:U.message})}};return K.jsx("div",{className:"header",children:K.jsxs("div",{className:"user-profile",children:[K.jsxs("div",{className:"profile",children:[K.jsx("img",{src:w,alt:"Profile",className:"profile-img"}),K.jsxs("div",{className:"profile-name",children:[K.jsx("p",{children:t}),K.jsx("small",{children:"Super Admin"})]})]}),K.jsxs("div",{className:"notification-container",children:[K.jsx(uce,{className:"icon",onClick:T}),h>0&&K.jsx("span",{className:"notification-badge",children:h}),s&&K.jsxs("div",{className:"notifications-modal",children:[K.jsxs("div",{className:"notifications-header",children:[K.jsx("h3",{children:"Notifications"}),K.jsx("button",{className:"mark-all-read",onClick:E,disabled:h===0,children:"Mark all as read"})]}),K.jsx("div",{className:"notifications-list",children:a.length>0?a.map(U=>K.jsx("div",{className:`notification-item ${U.read?"":"unread"}`,children:K.jsxs("div",{className:"notification-content",children:[k(U),K.jsx("span",{className:"notification-time",children:z(U.timestamp)})]})},U.id)):K.jsx("p",{className:"no-notifications",children:"No notifications"})})]})]})]})})};function Ace(t){return Wo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19 2H6c-1.206 0-3 .799-3 3v14c0 2.201 1.794 3 3 3h15v-2H6.012C5.55 19.988 5 19.806 5 19s.55-.988 1.012-1H21V4c0-1.103-.897-2-2-2zm0 14H5V5c0-.806.55-.988 1-1h13v12z"},child:[]}]})(t)}function _ce(t){return Wo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M11 15.414V20h2v-4.586c0-.526-.214-1.042-.586-1.414l-2-2L13 9.414l2 2c.372.372.888.586 1.414.586H20v-2h-3.586l-3.707-3.707a.999.999 0 0 0-1.414 0L8 9.586c-.378.378-.586.88-.586 1.414s.208 1.036.586 1.414l3 3z"},child:[]},{tag:"circle",attr:{cx:"16",cy:"5",r:"2"},child:[]},{tag:"path",attr:{d:"M18 14c-2.206 0-4 1.794-4 4s1.794 4 4 4 4-1.794 4-4-1.794-4-4-4zm0 6c-1.103 0-2-.897-2-2s.897-2 2-2 2 .897 2 2-.897 2-2 2zM6 22c2.206 0 4-1.794 4-4s-1.794-4-4-4-4 1.794-4 4 1.794 4 4 4zm0-6c1.103 0 2 .897 2 2s-.897 2-2 2-2-.897-2-2 .897-2 2-2z"},child:[]}]})(t)}function vce(t){return Wo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M3 13h1v7c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2v-7h1a1 1 0 0 0 .707-1.707l-9-9a.999.999 0 0 0-1.414 0l-9 9A1 1 0 0 0 3 13zm7 7v-5h4v5h-4zm2-15.586 6 6V15l.001 5H16v-5c0-1.103-.897-2-2-2h-4c-1.103 0-2 .897-2 2v5H6v-9.586l6-6z"},child:[]}]})(t)}function wce(t){return Wo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16 13v-2H7V8l-5 4 5 4v-3z"},child:[]},{tag:"path",attr:{d:"M20 3h-9c-1.103 0-2 .897-2 2v4h2V5h9v14h-9v-4H9v4c0 1.103.897 2 2 2h9c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2z"},child:[]}]})(t)}function Rce(t){return Wo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 12a2 2 0 0 0-.703.133l-2.398-1.963c.059-.214.101-.436.101-.67C17 8.114 15.886 7 14.5 7S12 8.114 12 9.5c0 .396.1.765.262 1.097l-2.909 3.438A2.06 2.06 0 0 0 9 14c-.179 0-.348.03-.512.074l-2.563-2.563C5.97 11.348 6 11.179 6 11c0-1.108-.892-2-2-2s-2 .892-2 2 .892 2 2 2c.179 0 .348-.03.512-.074l2.563 2.563A1.906 1.906 0 0 0 7 16c0 1.108.892 2 2 2s2-.892 2-2c0-.237-.048-.46-.123-.671l2.913-3.442c.227.066.462.113.71.113a2.48 2.48 0 0 0 1.133-.281l2.399 1.963A2.077 2.077 0 0 0 18 14c0 1.108.892 2 2 2s2-.892 2-2-.892-2-2-2z"},child:[]}]})(t)}function Tce(t){return Wo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4 21h15.893c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2H4c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2zm0-2v-5h4v5H4zM14 7v5h-4V7h4zM8 7v5H4V7h4zm2 12v-5h4v5h-4zm6 0v-5h3.894v5H16zm3.893-7H16V7h3.893v5z"},child:[]}]})(t)}function Sce(t){return Wo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M5 22h14c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2h-2a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1H5c-1.103 0-2 .897-2 2v15c0 1.103.897 2 2 2zM5 5h2v2h10V5h2v15H5V5z"},child:[]},{tag:"path",attr:{d:"m11 13.586-1.793-1.793-1.414 1.414L11 16.414l5.207-5.207-1.414-1.414z"},child:[]}]})(t)}function Cce(t){return Wo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20.29 8.29 16 12.58l-1.3-1.29-1.41 1.42 2.7 2.7 5.72-5.7zM4 8a3.91 3.91 0 0 0 4 4 3.91 3.91 0 0 0 4-4 3.91 3.91 0 0 0-4-4 3.91 3.91 0 0 0-4 4zm6 0a1.91 1.91 0 0 1-2 2 1.91 1.91 0 0 1-2-2 1.91 1.91 0 0 1 2-2 1.91 1.91 0 0 1 2 2zM4 18a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1h2v-1a5 5 0 0 0-5-5H7a5 5 0 0 0-5 5v1h2z"},child:[]}]})(t)}function bce(t){return Wo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m20 8-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8zM9 19H7v-9h2v9zm4 0h-2v-6h2v6zm4 0h-2v-3h2v3zM14 9h-1V4l5 5h-4z"},child:[]}]})(t)}const NK=()=>{const t=t3(),e=Fg(),a=async()=>{try{await jv.signOut(),t("/login")}catch(s){console.error("Error signing out: ",s.message)}},r=s=>e.pathname===s;return K.jsxs("div",{className:"sidebar",children:[K.jsx("div",{className:"logo",children:K.jsx("img",{src:"/ecpcaps/assets/ecoridelogo2.png",alt:"EcoRide Logo",style:{width:"100%",maxWidth:"100px",height:"auto"}})}),K.jsxs("div",{className:"menu-list",children:[K.jsxs("div",{className:`menu-item ${r("/dashboard")?"active":""}`,onClick:()=>t("/dashboard"),children:[K.jsx(vce,{}),K.jsx("span",{children:"Dashboard"})]}),K.jsxs("div",{className:`menu-item ${r("/stations")?"active":""}`,onClick:()=>t("/stations"),children:[K.jsx(Ace,{}),K.jsx("span",{children:"Manage Stations"})]}),K.jsxs("div",{className:`menu-item ${r("/user-management")?"active":""}`,onClick:()=>t("/user-management"),children:[K.jsx(Cce,{}),K.jsx("span",{children:"Manage User"})]}),K.jsxs("div",{className:`menu-item ${r("/admin-management")?"active":""}`,onClick:()=>t("/admin-management"),children:[K.jsx(bce,{}),K.jsx("span",{children:"Manage & Create Admin"})]}),K.jsxs("div",{className:`menu-item ${r("/bike-management")?"active":""}`,onClick:()=>t("/bike-management"),children:[K.jsx(_ce,{}),K.jsx("span",{children:"Manage Bikes"})]}),K.jsxs("div",{className:`menu-item ${r("/rate-management")?"active":""}`,onClick:()=>t("/rate-management"),children:[K.jsx(Sce,{}),K.jsx("span",{children:"Rate Management"})]}),K.jsxs("div",{className:`menu-item ${r("/system-analytics")?"active":""}`,onClick:()=>t("/system-analytics"),children:[K.jsx(Rce,{}),K.jsx("span",{children:"System Analytics"})]}),K.jsxs("div",{className:`menu-item ${r("/ride-details")?"active":""}`,onClick:()=>t("/ride-details"),children:[K.jsx(Tce,{}),K.jsx("span",{children:"Ride Details"})]}),K.jsxs("div",{className:"menu-item logout",onClick:a,children:[K.jsx(wce,{}),K.jsx("span",{children:"Logout"})]})]})]})};var LC={exports:{}},xce=LC.exports,LU;function Pce(){return LU||(LU=1,function(t,e){(function(a,r){t.exports=r()})(xce,function(){var a,r,s;function l(n,w){if(!a)a=w;else if(!r)r=w;else{var T="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+a+")(sharedChunk); ("+r+")(sharedChunk); self.onerror = null;",E={};a(E),s=w(E),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(s.workerUrl=window.URL.createObjectURL(new Blob([T],{type:"text/javascript"})))}}l(["exports"],function(n){function w(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var T,E={},z={};function k(){if(T)return z;T=1,Object.defineProperty(z,"__esModule",{value:!0}),z.setMatrixArrayType=function(y){z.ARRAY_TYPE=i=y},z.toRadian=function(y){return y*f},z.equals=function(y,m){return Math.abs(y-m)<=d*Math.max(1,Math.abs(y),Math.abs(m))},z.RANDOM=z.ARRAY_TYPE=z.EPSILON=void 0;var d=1e-6;z.EPSILON=d;var i=typeof Float32Array<"u"?Float32Array:Array;z.ARRAY_TYPE=i;var u=Math.random;z.RANDOM=u;var f=Math.PI/180;return Math.hypot||(Math.hypot=function(){for(var y=0,m=arguments.length;m--;)y+=arguments[m]*arguments[m];return Math.sqrt(y)}),z}var U,Z={};function q(){if(U)return Z;function d(m){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},d(m)}U=1,Object.defineProperty(Z,"__esModule",{value:!0}),Z.create=function(){var m=new i.ARRAY_TYPE(4);return i.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m},Z.clone=function(m){var _=new i.ARRAY_TYPE(4);return _[0]=m[0],_[1]=m[1],_[2]=m[2],_[3]=m[3],_},Z.copy=function(m,_){return m[0]=_[0],m[1]=_[1],m[2]=_[2],m[3]=_[3],m},Z.identity=function(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=1,m},Z.fromValues=function(m,_,b,N){var D=new i.ARRAY_TYPE(4);return D[0]=m,D[1]=_,D[2]=b,D[3]=N,D},Z.set=function(m,_,b,N,D){return m[0]=_,m[1]=b,m[2]=N,m[3]=D,m},Z.transpose=function(m,_){if(m===_){var b=_[1];m[1]=_[2],m[2]=b}else m[0]=_[0],m[1]=_[2],m[2]=_[1],m[3]=_[3];return m},Z.invert=function(m,_){var b=_[0],N=_[1],D=_[2],S=_[3],V=b*S-D*N;return V?(m[0]=S*(V=1/V),m[1]=-N*V,m[2]=-D*V,m[3]=b*V,m):null},Z.adjoint=function(m,_){var b=_[0];return m[0]=_[3],m[1]=-_[1],m[2]=-_[2],m[3]=b,m},Z.determinant=function(m){return m[0]*m[3]-m[2]*m[1]},Z.multiply=f,Z.rotate=function(m,_,b){var N=_[0],D=_[1],S=_[2],V=_[3],I=Math.sin(b),O=Math.cos(b);return m[0]=N*O+S*I,m[1]=D*O+V*I,m[2]=N*-I+S*O,m[3]=D*-I+V*O,m},Z.scale=function(m,_,b){var N=_[1],D=_[2],S=_[3],V=b[0],I=b[1];return m[0]=_[0]*V,m[1]=N*V,m[2]=D*I,m[3]=S*I,m},Z.fromRotation=function(m,_){var b=Math.sin(_),N=Math.cos(_);return m[0]=N,m[1]=b,m[2]=-b,m[3]=N,m},Z.fromScaling=function(m,_){return m[0]=_[0],m[1]=0,m[2]=0,m[3]=_[1],m},Z.str=function(m){return"mat2("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+")"},Z.frob=function(m){return Math.hypot(m[0],m[1],m[2],m[3])},Z.LDU=function(m,_,b,N){return m[2]=N[2]/N[0],b[0]=N[0],b[1]=N[1],b[3]=N[3]-m[2]*b[1],[m,_,b]},Z.add=function(m,_,b){return m[0]=_[0]+b[0],m[1]=_[1]+b[1],m[2]=_[2]+b[2],m[3]=_[3]+b[3],m},Z.subtract=y,Z.exactEquals=function(m,_){return m[0]===_[0]&&m[1]===_[1]&&m[2]===_[2]&&m[3]===_[3]},Z.equals=function(m,_){var b=m[0],N=m[1],D=m[2],S=m[3],V=_[0],I=_[1],O=_[2],M=_[3];return Math.abs(b-V)<=i.EPSILON*Math.max(1,Math.abs(b),Math.abs(V))&&Math.abs(N-I)<=i.EPSILON*Math.max(1,Math.abs(N),Math.abs(I))&&Math.abs(D-O)<=i.EPSILON*Math.max(1,Math.abs(D),Math.abs(O))&&Math.abs(S-M)<=i.EPSILON*Math.max(1,Math.abs(S),Math.abs(M))},Z.multiplyScalar=function(m,_,b){return m[0]=_[0]*b,m[1]=_[1]*b,m[2]=_[2]*b,m[3]=_[3]*b,m},Z.multiplyScalarAndAdd=function(m,_,b,N){return m[0]=_[0]+b[0]*N,m[1]=_[1]+b[1]*N,m[2]=_[2]+b[2]*N,m[3]=_[3]+b[3]*N,m},Z.sub=Z.mul=void 0;var i=function(m,_){if(m&&m.__esModule)return m;if(m===null||d(m)!=="object"&&typeof m!="function")return{default:m};var b=u(void 0);if(b&&b.has(m))return b.get(m);var N={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in m)if(S!=="default"&&Object.prototype.hasOwnProperty.call(m,S)){var V=D?Object.getOwnPropertyDescriptor(m,S):null;V&&(V.get||V.set)?Object.defineProperty(N,S,V):N[S]=m[S]}return N.default=m,b&&b.set(m,N),N}(k());function u(m){if(typeof WeakMap!="function")return null;var _=new WeakMap,b=new WeakMap;return(u=function(N){return N?b:_})(m)}function f(m,_,b){var N=_[0],D=_[1],S=_[2],V=_[3],I=b[0],O=b[1],M=b[2],B=b[3];return m[0]=N*I+S*O,m[1]=D*I+V*O,m[2]=N*M+S*B,m[3]=D*M+V*B,m}function y(m,_,b){return m[0]=_[0]-b[0],m[1]=_[1]-b[1],m[2]=_[2]-b[2],m[3]=_[3]-b[3],m}return Z.mul=f,Z.sub=y,Z}var $,J={};function ie(){if($)return J;function d(m){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},d(m)}$=1,Object.defineProperty(J,"__esModule",{value:!0}),J.create=function(){var m=new i.ARRAY_TYPE(6);return i.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0,m[4]=0,m[5]=0),m[0]=1,m[3]=1,m},J.clone=function(m){var _=new i.ARRAY_TYPE(6);return _[0]=m[0],_[1]=m[1],_[2]=m[2],_[3]=m[3],_[4]=m[4],_[5]=m[5],_},J.copy=function(m,_){return m[0]=_[0],m[1]=_[1],m[2]=_[2],m[3]=_[3],m[4]=_[4],m[5]=_[5],m},J.identity=function(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=1,m[4]=0,m[5]=0,m},J.fromValues=function(m,_,b,N,D,S){var V=new i.ARRAY_TYPE(6);return V[0]=m,V[1]=_,V[2]=b,V[3]=N,V[4]=D,V[5]=S,V},J.set=function(m,_,b,N,D,S,V){return m[0]=_,m[1]=b,m[2]=N,m[3]=D,m[4]=S,m[5]=V,m},J.invert=function(m,_){var b=_[0],N=_[1],D=_[2],S=_[3],V=_[4],I=_[5],O=b*S-N*D;return O?(m[0]=S*(O=1/O),m[1]=-N*O,m[2]=-D*O,m[3]=b*O,m[4]=(D*I-S*V)*O,m[5]=(N*V-b*I)*O,m):null},J.determinant=function(m){return m[0]*m[3]-m[1]*m[2]},J.multiply=f,J.rotate=function(m,_,b){var N=_[0],D=_[1],S=_[2],V=_[3],I=_[4],O=_[5],M=Math.sin(b),B=Math.cos(b);return m[0]=N*B+S*M,m[1]=D*B+V*M,m[2]=N*-M+S*B,m[3]=D*-M+V*B,m[4]=I,m[5]=O,m},J.scale=function(m,_,b){var N=_[1],D=_[2],S=_[3],V=_[4],I=_[5],O=b[0],M=b[1];return m[0]=_[0]*O,m[1]=N*O,m[2]=D*M,m[3]=S*M,m[4]=V,m[5]=I,m},J.translate=function(m,_,b){var N=_[0],D=_[1],S=_[2],V=_[3],I=_[4],O=_[5],M=b[0],B=b[1];return m[0]=N,m[1]=D,m[2]=S,m[3]=V,m[4]=N*M+S*B+I,m[5]=D*M+V*B+O,m},J.fromRotation=function(m,_){var b=Math.sin(_),N=Math.cos(_);return m[0]=N,m[1]=b,m[2]=-b,m[3]=N,m[4]=0,m[5]=0,m},J.fromScaling=function(m,_){return m[0]=_[0],m[1]=0,m[2]=0,m[3]=_[1],m[4]=0,m[5]=0,m},J.fromTranslation=function(m,_){return m[0]=1,m[1]=0,m[2]=0,m[3]=1,m[4]=_[0],m[5]=_[1],m},J.str=function(m){return"mat2d("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+", "+m[4]+", "+m[5]+")"},J.frob=function(m){return Math.hypot(m[0],m[1],m[2],m[3],m[4],m[5],1)},J.add=function(m,_,b){return m[0]=_[0]+b[0],m[1]=_[1]+b[1],m[2]=_[2]+b[2],m[3]=_[3]+b[3],m[4]=_[4]+b[4],m[5]=_[5]+b[5],m},J.subtract=y,J.multiplyScalar=function(m,_,b){return m[0]=_[0]*b,m[1]=_[1]*b,m[2]=_[2]*b,m[3]=_[3]*b,m[4]=_[4]*b,m[5]=_[5]*b,m},J.multiplyScalarAndAdd=function(m,_,b,N){return m[0]=_[0]+b[0]*N,m[1]=_[1]+b[1]*N,m[2]=_[2]+b[2]*N,m[3]=_[3]+b[3]*N,m[4]=_[4]+b[4]*N,m[5]=_[5]+b[5]*N,m},J.exactEquals=function(m,_){return m[0]===_[0]&&m[1]===_[1]&&m[2]===_[2]&&m[3]===_[3]&&m[4]===_[4]&&m[5]===_[5]},J.equals=function(m,_){var b=m[0],N=m[1],D=m[2],S=m[3],V=m[4],I=m[5],O=_[0],M=_[1],B=_[2],X=_[3],ee=_[4],ue=_[5];return Math.abs(b-O)<=i.EPSILON*Math.max(1,Math.abs(b),Math.abs(O))&&Math.abs(N-M)<=i.EPSILON*Math.max(1,Math.abs(N),Math.abs(M))&&Math.abs(D-B)<=i.EPSILON*Math.max(1,Math.abs(D),Math.abs(B))&&Math.abs(S-X)<=i.EPSILON*Math.max(1,Math.abs(S),Math.abs(X))&&Math.abs(V-ee)<=i.EPSILON*Math.max(1,Math.abs(V),Math.abs(ee))&&Math.abs(I-ue)<=i.EPSILON*Math.max(1,Math.abs(I),Math.abs(ue))},J.sub=J.mul=void 0;var i=function(m,_){if(m&&m.__esModule)return m;if(m===null||d(m)!=="object"&&typeof m!="function")return{default:m};var b=u(void 0);if(b&&b.has(m))return b.get(m);var N={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in m)if(S!=="default"&&Object.prototype.hasOwnProperty.call(m,S)){var V=D?Object.getOwnPropertyDescriptor(m,S):null;V&&(V.get||V.set)?Object.defineProperty(N,S,V):N[S]=m[S]}return N.default=m,b&&b.set(m,N),N}(k());function u(m){if(typeof WeakMap!="function")return null;var _=new WeakMap,b=new WeakMap;return(u=function(N){return N?b:_})(m)}function f(m,_,b){var N=_[0],D=_[1],S=_[2],V=_[3],I=_[4],O=_[5],M=b[0],B=b[1],X=b[2],ee=b[3],ue=b[4],le=b[5];return m[0]=N*M+S*B,m[1]=D*M+V*B,m[2]=N*X+S*ee,m[3]=D*X+V*ee,m[4]=N*ue+S*le+I,m[5]=D*ue+V*le+O,m}function y(m,_,b){return m[0]=_[0]-b[0],m[1]=_[1]-b[1],m[2]=_[2]-b[2],m[3]=_[3]-b[3],m[4]=_[4]-b[4],m[5]=_[5]-b[5],m}return J.mul=f,J.sub=y,J}var de,ge={};function he(){if(de)return ge;function d(m){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},d(m)}de=1,Object.defineProperty(ge,"__esModule",{value:!0}),ge.create=function(){var m=new i.ARRAY_TYPE(9);return i.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0,m[3]=0,m[5]=0,m[6]=0,m[7]=0),m[0]=1,m[4]=1,m[8]=1,m},ge.fromMat4=function(m,_){return m[0]=_[0],m[1]=_[1],m[2]=_[2],m[3]=_[4],m[4]=_[5],m[5]=_[6],m[6]=_[8],m[7]=_[9],m[8]=_[10],m},ge.clone=function(m){var _=new i.ARRAY_TYPE(9);return _[0]=m[0],_[1]=m[1],_[2]=m[2],_[3]=m[3],_[4]=m[4],_[5]=m[5],_[6]=m[6],_[7]=m[7],_[8]=m[8],_},ge.copy=function(m,_){return m[0]=_[0],m[1]=_[1],m[2]=_[2],m[3]=_[3],m[4]=_[4],m[5]=_[5],m[6]=_[6],m[7]=_[7],m[8]=_[8],m},ge.fromValues=function(m,_,b,N,D,S,V,I,O){var M=new i.ARRAY_TYPE(9);return M[0]=m,M[1]=_,M[2]=b,M[3]=N,M[4]=D,M[5]=S,M[6]=V,M[7]=I,M[8]=O,M},ge.set=function(m,_,b,N,D,S,V,I,O,M){return m[0]=_,m[1]=b,m[2]=N,m[3]=D,m[4]=S,m[5]=V,m[6]=I,m[7]=O,m[8]=M,m},ge.identity=function(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=1,m[5]=0,m[6]=0,m[7]=0,m[8]=1,m},ge.transpose=function(m,_){if(m===_){var b=_[1],N=_[2],D=_[5];m[1]=_[3],m[2]=_[6],m[3]=b,m[5]=_[7],m[6]=N,m[7]=D}else m[0]=_[0],m[1]=_[3],m[2]=_[6],m[3]=_[1],m[4]=_[4],m[5]=_[7],m[6]=_[2],m[7]=_[5],m[8]=_[8];return m},ge.invert=function(m,_){var b=_[0],N=_[1],D=_[2],S=_[3],V=_[4],I=_[5],O=_[6],M=_[7],B=_[8],X=B*V-I*M,ee=-B*S+I*O,ue=M*S-V*O,le=b*X+N*ee+D*ue;return le?(m[0]=X*(le=1/le),m[1]=(-B*N+D*M)*le,m[2]=(I*N-D*V)*le,m[3]=ee*le,m[4]=(B*b-D*O)*le,m[5]=(-I*b+D*S)*le,m[6]=ue*le,m[7]=(-M*b+N*O)*le,m[8]=(V*b-N*S)*le,m):null},ge.adjoint=function(m,_){var b=_[0],N=_[1],D=_[2],S=_[3],V=_[4],I=_[5],O=_[6],M=_[7],B=_[8];return m[0]=V*B-I*M,m[1]=D*M-N*B,m[2]=N*I-D*V,m[3]=I*O-S*B,m[4]=b*B-D*O,m[5]=D*S-b*I,m[6]=S*M-V*O,m[7]=N*O-b*M,m[8]=b*V-N*S,m},ge.determinant=function(m){var _=m[3],b=m[4],N=m[5],D=m[6],S=m[7],V=m[8];return m[0]*(V*b-N*S)+m[1]*(-V*_+N*D)+m[2]*(S*_-b*D)},ge.multiply=f,ge.translate=function(m,_,b){var N=_[0],D=_[1],S=_[2],V=_[3],I=_[4],O=_[5],M=_[6],B=_[7],X=_[8],ee=b[0],ue=b[1];return m[0]=N,m[1]=D,m[2]=S,m[3]=V,m[4]=I,m[5]=O,m[6]=ee*N+ue*V+M,m[7]=ee*D+ue*I+B,m[8]=ee*S+ue*O+X,m},ge.rotate=function(m,_,b){var N=_[0],D=_[1],S=_[2],V=_[3],I=_[4],O=_[5],M=_[6],B=_[7],X=_[8],ee=Math.sin(b),ue=Math.cos(b);return m[0]=ue*N+ee*V,m[1]=ue*D+ee*I,m[2]=ue*S+ee*O,m[3]=ue*V-ee*N,m[4]=ue*I-ee*D,m[5]=ue*O-ee*S,m[6]=M,m[7]=B,m[8]=X,m},ge.scale=function(m,_,b){var N=b[0],D=b[1];return m[0]=N*_[0],m[1]=N*_[1],m[2]=N*_[2],m[3]=D*_[3],m[4]=D*_[4],m[5]=D*_[5],m[6]=_[6],m[7]=_[7],m[8]=_[8],m},ge.fromTranslation=function(m,_){return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=1,m[5]=0,m[6]=_[0],m[7]=_[1],m[8]=1,m},ge.fromRotation=function(m,_){var b=Math.sin(_),N=Math.cos(_);return m[0]=N,m[1]=b,m[2]=0,m[3]=-b,m[4]=N,m[5]=0,m[6]=0,m[7]=0,m[8]=1,m},ge.fromScaling=function(m,_){return m[0]=_[0],m[1]=0,m[2]=0,m[3]=0,m[4]=_[1],m[5]=0,m[6]=0,m[7]=0,m[8]=1,m},ge.fromMat2d=function(m,_){return m[0]=_[0],m[1]=_[1],m[2]=0,m[3]=_[2],m[4]=_[3],m[5]=0,m[6]=_[4],m[7]=_[5],m[8]=1,m},ge.fromQuat=function(m,_){var b=_[0],N=_[1],D=_[2],S=_[3],V=b+b,I=N+N,O=D+D,M=b*V,B=N*V,X=N*I,ee=D*V,ue=D*I,le=D*O,re=S*V,pe=S*I,we=S*O;return m[0]=1-X-le,m[3]=B-we,m[6]=ee+pe,m[1]=B+we,m[4]=1-M-le,m[7]=ue-re,m[2]=ee-pe,m[5]=ue+re,m[8]=1-M-X,m},ge.normalFromMat4=function(m,_){var b=_[0],N=_[1],D=_[2],S=_[3],V=_[4],I=_[5],O=_[6],M=_[7],B=_[8],X=_[9],ee=_[10],ue=_[11],le=_[12],re=_[13],pe=_[14],we=_[15],Pe=b*I-N*V,We=b*O-D*V,je=b*M-S*V,Ze=N*O-D*I,mt=N*M-S*I,Ye=D*M-S*O,At=B*re-X*le,xt=B*pe-ee*le,St=B*we-ue*le,Ot=X*pe-ee*re,Nt=X*we-ue*re,Ut=ee*we-ue*pe,Mt=Pe*Ut-We*Nt+je*Ot+Ze*St-mt*xt+Ye*At;return Mt?(m[0]=(I*Ut-O*Nt+M*Ot)*(Mt=1/Mt),m[1]=(O*St-V*Ut-M*xt)*Mt,m[2]=(V*Nt-I*St+M*At)*Mt,m[3]=(D*Nt-N*Ut-S*Ot)*Mt,m[4]=(b*Ut-D*St+S*xt)*Mt,m[5]=(N*St-b*Nt-S*At)*Mt,m[6]=(re*Ye-pe*mt+we*Ze)*Mt,m[7]=(pe*je-le*Ye-we*We)*Mt,m[8]=(le*mt-re*je+we*Pe)*Mt,m):null},ge.projection=function(m,_,b){return m[0]=2/_,m[1]=0,m[2]=0,m[3]=0,m[4]=-2/b,m[5]=0,m[6]=-1,m[7]=1,m[8]=1,m},ge.str=function(m){return"mat3("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+", "+m[4]+", "+m[5]+", "+m[6]+", "+m[7]+", "+m[8]+")"},ge.frob=function(m){return Math.hypot(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8])},ge.add=function(m,_,b){return m[0]=_[0]+b[0],m[1]=_[1]+b[1],m[2]=_[2]+b[2],m[3]=_[3]+b[3],m[4]=_[4]+b[4],m[5]=_[5]+b[5],m[6]=_[6]+b[6],m[7]=_[7]+b[7],m[8]=_[8]+b[8],m},ge.subtract=y,ge.multiplyScalar=function(m,_,b){return m[0]=_[0]*b,m[1]=_[1]*b,m[2]=_[2]*b,m[3]=_[3]*b,m[4]=_[4]*b,m[5]=_[5]*b,m[6]=_[6]*b,m[7]=_[7]*b,m[8]=_[8]*b,m},ge.multiplyScalarAndAdd=function(m,_,b,N){return m[0]=_[0]+b[0]*N,m[1]=_[1]+b[1]*N,m[2]=_[2]+b[2]*N,m[3]=_[3]+b[3]*N,m[4]=_[4]+b[4]*N,m[5]=_[5]+b[5]*N,m[6]=_[6]+b[6]*N,m[7]=_[7]+b[7]*N,m[8]=_[8]+b[8]*N,m},ge.exactEquals=function(m,_){return m[0]===_[0]&&m[1]===_[1]&&m[2]===_[2]&&m[3]===_[3]&&m[4]===_[4]&&m[5]===_[5]&&m[6]===_[6]&&m[7]===_[7]&&m[8]===_[8]},ge.equals=function(m,_){var b=m[0],N=m[1],D=m[2],S=m[3],V=m[4],I=m[5],O=m[6],M=m[7],B=m[8],X=_[0],ee=_[1],ue=_[2],le=_[3],re=_[4],pe=_[5],we=_[6],Pe=_[7],We=_[8];return Math.abs(b-X)<=i.EPSILON*Math.max(1,Math.abs(b),Math.abs(X))&&Math.abs(N-ee)<=i.EPSILON*Math.max(1,Math.abs(N),Math.abs(ee))&&Math.abs(D-ue)<=i.EPSILON*Math.max(1,Math.abs(D),Math.abs(ue))&&Math.abs(S-le)<=i.EPSILON*Math.max(1,Math.abs(S),Math.abs(le))&&Math.abs(V-re)<=i.EPSILON*Math.max(1,Math.abs(V),Math.abs(re))&&Math.abs(I-pe)<=i.EPSILON*Math.max(1,Math.abs(I),Math.abs(pe))&&Math.abs(O-we)<=i.EPSILON*Math.max(1,Math.abs(O),Math.abs(we))&&Math.abs(M-Pe)<=i.EPSILON*Math.max(1,Math.abs(M),Math.abs(Pe))&&Math.abs(B-We)<=i.EPSILON*Math.max(1,Math.abs(B),Math.abs(We))},ge.sub=ge.mul=void 0;var i=function(m,_){if(m&&m.__esModule)return m;if(m===null||d(m)!=="object"&&typeof m!="function")return{default:m};var b=u(void 0);if(b&&b.has(m))return b.get(m);var N={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in m)if(S!=="default"&&Object.prototype.hasOwnProperty.call(m,S)){var V=D?Object.getOwnPropertyDescriptor(m,S):null;V&&(V.get||V.set)?Object.defineProperty(N,S,V):N[S]=m[S]}return N.default=m,b&&b.set(m,N),N}(k());function u(m){if(typeof WeakMap!="function")return null;var _=new WeakMap,b=new WeakMap;return(u=function(N){return N?b:_})(m)}function f(m,_,b){var N=_[0],D=_[1],S=_[2],V=_[3],I=_[4],O=_[5],M=_[6],B=_[7],X=_[8],ee=b[0],ue=b[1],le=b[2],re=b[3],pe=b[4],we=b[5],Pe=b[6],We=b[7],je=b[8];return m[0]=ee*N+ue*V+le*M,m[1]=ee*D+ue*I+le*B,m[2]=ee*S+ue*O+le*X,m[3]=re*N+pe*V+we*M,m[4]=re*D+pe*I+we*B,m[5]=re*S+pe*O+we*X,m[6]=Pe*N+We*V+je*M,m[7]=Pe*D+We*I+je*B,m[8]=Pe*S+We*O+je*X,m}function y(m,_,b){return m[0]=_[0]-b[0],m[1]=_[1]-b[1],m[2]=_[2]-b[2],m[3]=_[3]-b[3],m[4]=_[4]-b[4],m[5]=_[5]-b[5],m[6]=_[6]-b[6],m[7]=_[7]-b[7],m[8]=_[8]-b[8],m}return ge.mul=f,ge.sub=y,ge}var Ae,me={};function Re(){if(Ae)return me;function d(S){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},d(S)}Ae=1,Object.defineProperty(me,"__esModule",{value:!0}),me.create=function(){var S=new i.ARRAY_TYPE(16);return i.ARRAY_TYPE!=Float32Array&&(S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[11]=0,S[12]=0,S[13]=0,S[14]=0),S[0]=1,S[5]=1,S[10]=1,S[15]=1,S},me.clone=function(S){var V=new i.ARRAY_TYPE(16);return V[0]=S[0],V[1]=S[1],V[2]=S[2],V[3]=S[3],V[4]=S[4],V[5]=S[5],V[6]=S[6],V[7]=S[7],V[8]=S[8],V[9]=S[9],V[10]=S[10],V[11]=S[11],V[12]=S[12],V[13]=S[13],V[14]=S[14],V[15]=S[15],V},me.copy=function(S,V){return S[0]=V[0],S[1]=V[1],S[2]=V[2],S[3]=V[3],S[4]=V[4],S[5]=V[5],S[6]=V[6],S[7]=V[7],S[8]=V[8],S[9]=V[9],S[10]=V[10],S[11]=V[11],S[12]=V[12],S[13]=V[13],S[14]=V[14],S[15]=V[15],S},me.fromValues=function(S,V,I,O,M,B,X,ee,ue,le,re,pe,we,Pe,We,je){var Ze=new i.ARRAY_TYPE(16);return Ze[0]=S,Ze[1]=V,Ze[2]=I,Ze[3]=O,Ze[4]=M,Ze[5]=B,Ze[6]=X,Ze[7]=ee,Ze[8]=ue,Ze[9]=le,Ze[10]=re,Ze[11]=pe,Ze[12]=we,Ze[13]=Pe,Ze[14]=We,Ze[15]=je,Ze},me.set=function(S,V,I,O,M,B,X,ee,ue,le,re,pe,we,Pe,We,je,Ze){return S[0]=V,S[1]=I,S[2]=O,S[3]=M,S[4]=B,S[5]=X,S[6]=ee,S[7]=ue,S[8]=le,S[9]=re,S[10]=pe,S[11]=we,S[12]=Pe,S[13]=We,S[14]=je,S[15]=Ze,S},me.identity=f,me.transpose=function(S,V){if(S===V){var I=V[1],O=V[2],M=V[3],B=V[6],X=V[7],ee=V[11];S[1]=V[4],S[2]=V[8],S[3]=V[12],S[4]=I,S[6]=V[9],S[7]=V[13],S[8]=O,S[9]=B,S[11]=V[14],S[12]=M,S[13]=X,S[14]=ee}else S[0]=V[0],S[1]=V[4],S[2]=V[8],S[3]=V[12],S[4]=V[1],S[5]=V[5],S[6]=V[9],S[7]=V[13],S[8]=V[2],S[9]=V[6],S[10]=V[10],S[11]=V[14],S[12]=V[3],S[13]=V[7],S[14]=V[11],S[15]=V[15];return S},me.invert=function(S,V){var I=V[0],O=V[1],M=V[2],B=V[3],X=V[4],ee=V[5],ue=V[6],le=V[7],re=V[8],pe=V[9],we=V[10],Pe=V[11],We=V[12],je=V[13],Ze=V[14],mt=V[15],Ye=I*ee-O*X,At=I*ue-M*X,xt=I*le-B*X,St=O*ue-M*ee,Ot=O*le-B*ee,Nt=M*le-B*ue,Ut=re*je-pe*We,Mt=re*Ze-we*We,jt=re*mt-Pe*We,ga=pe*Ze-we*je,ma=pe*mt-Pe*je,Ya=we*mt-Pe*Ze,xa=Ye*Ya-At*ma+xt*ga+St*jt-Ot*Mt+Nt*Ut;return xa?(S[0]=(ee*Ya-ue*ma+le*ga)*(xa=1/xa),S[1]=(M*ma-O*Ya-B*ga)*xa,S[2]=(je*Nt-Ze*Ot+mt*St)*xa,S[3]=(we*Ot-pe*Nt-Pe*St)*xa,S[4]=(ue*jt-X*Ya-le*Mt)*xa,S[5]=(I*Ya-M*jt+B*Mt)*xa,S[6]=(Ze*xt-We*Nt-mt*At)*xa,S[7]=(re*Nt-we*xt+Pe*At)*xa,S[8]=(X*ma-ee*jt+le*Ut)*xa,S[9]=(O*jt-I*ma-B*Ut)*xa,S[10]=(We*Ot-je*xt+mt*Ye)*xa,S[11]=(pe*xt-re*Ot-Pe*Ye)*xa,S[12]=(ee*Mt-X*ga-ue*Ut)*xa,S[13]=(I*ga-O*Mt+M*Ut)*xa,S[14]=(je*At-We*St-Ze*Ye)*xa,S[15]=(re*St-pe*At+we*Ye)*xa,S):null},me.adjoint=function(S,V){var I=V[0],O=V[1],M=V[2],B=V[3],X=V[4],ee=V[5],ue=V[6],le=V[7],re=V[8],pe=V[9],we=V[10],Pe=V[11],We=V[12],je=V[13],Ze=V[14],mt=V[15];return S[0]=ee*(we*mt-Pe*Ze)-pe*(ue*mt-le*Ze)+je*(ue*Pe-le*we),S[1]=-(O*(we*mt-Pe*Ze)-pe*(M*mt-B*Ze)+je*(M*Pe-B*we)),S[2]=O*(ue*mt-le*Ze)-ee*(M*mt-B*Ze)+je*(M*le-B*ue),S[3]=-(O*(ue*Pe-le*we)-ee*(M*Pe-B*we)+pe*(M*le-B*ue)),S[4]=-(X*(we*mt-Pe*Ze)-re*(ue*mt-le*Ze)+We*(ue*Pe-le*we)),S[5]=I*(we*mt-Pe*Ze)-re*(M*mt-B*Ze)+We*(M*Pe-B*we),S[6]=-(I*(ue*mt-le*Ze)-X*(M*mt-B*Ze)+We*(M*le-B*ue)),S[7]=I*(ue*Pe-le*we)-X*(M*Pe-B*we)+re*(M*le-B*ue),S[8]=X*(pe*mt-Pe*je)-re*(ee*mt-le*je)+We*(ee*Pe-le*pe),S[9]=-(I*(pe*mt-Pe*je)-re*(O*mt-B*je)+We*(O*Pe-B*pe)),S[10]=I*(ee*mt-le*je)-X*(O*mt-B*je)+We*(O*le-B*ee),S[11]=-(I*(ee*Pe-le*pe)-X*(O*Pe-B*pe)+re*(O*le-B*ee)),S[12]=-(X*(pe*Ze-we*je)-re*(ee*Ze-ue*je)+We*(ee*we-ue*pe)),S[13]=I*(pe*Ze-we*je)-re*(O*Ze-M*je)+We*(O*we-M*pe),S[14]=-(I*(ee*Ze-ue*je)-X*(O*Ze-M*je)+We*(O*ue-M*ee)),S[15]=I*(ee*we-ue*pe)-X*(O*we-M*pe)+re*(O*ue-M*ee),S},me.determinant=function(S){var V=S[0],I=S[1],O=S[2],M=S[3],B=S[4],X=S[5],ee=S[6],ue=S[7],le=S[8],re=S[9],pe=S[10],we=S[11],Pe=S[12],We=S[13],je=S[14],Ze=S[15];return(V*X-I*B)*(pe*Ze-we*je)-(V*ee-O*B)*(re*Ze-we*We)+(V*ue-M*B)*(re*je-pe*We)+(I*ee-O*X)*(le*Ze-we*Pe)-(I*ue-M*X)*(le*je-pe*Pe)+(O*ue-M*ee)*(le*We-re*Pe)},me.multiply=y,me.translate=function(S,V,I){var O,M,B,X,ee,ue,le,re,pe,we,Pe,We,je=I[0],Ze=I[1],mt=I[2];return V===S?(S[12]=V[0]*je+V[4]*Ze+V[8]*mt+V[12],S[13]=V[1]*je+V[5]*Ze+V[9]*mt+V[13],S[14]=V[2]*je+V[6]*Ze+V[10]*mt+V[14],S[15]=V[3]*je+V[7]*Ze+V[11]*mt+V[15]):(M=V[1],B=V[2],X=V[3],ee=V[4],ue=V[5],le=V[6],re=V[7],pe=V[8],we=V[9],Pe=V[10],We=V[11],S[0]=O=V[0],S[1]=M,S[2]=B,S[3]=X,S[4]=ee,S[5]=ue,S[6]=le,S[7]=re,S[8]=pe,S[9]=we,S[10]=Pe,S[11]=We,S[12]=O*je+ee*Ze+pe*mt+V[12],S[13]=M*je+ue*Ze+we*mt+V[13],S[14]=B*je+le*Ze+Pe*mt+V[14],S[15]=X*je+re*Ze+We*mt+V[15]),S},me.scale=function(S,V,I){var O=I[0],M=I[1],B=I[2];return S[0]=V[0]*O,S[1]=V[1]*O,S[2]=V[2]*O,S[3]=V[3]*O,S[4]=V[4]*M,S[5]=V[5]*M,S[6]=V[6]*M,S[7]=V[7]*M,S[8]=V[8]*B,S[9]=V[9]*B,S[10]=V[10]*B,S[11]=V[11]*B,S[12]=V[12],S[13]=V[13],S[14]=V[14],S[15]=V[15],S},me.rotate=function(S,V,I,O){var M,B,X,ee,ue,le,re,pe,we,Pe,We,je,Ze,mt,Ye,At,xt,St,Ot,Nt,Ut,Mt,jt,ga,ma=O[0],Ya=O[1],xa=O[2],Oa=Math.hypot(ma,Ya,xa);return Oa<i.EPSILON?null:(ma*=Oa=1/Oa,Ya*=Oa,xa*=Oa,M=Math.sin(I),B=Math.cos(I),ue=V[1],le=V[2],re=V[3],we=V[5],Pe=V[6],We=V[7],Ze=V[9],mt=V[10],Ye=V[11],At=ma*ma*(X=1-B)+B,Ot=ma*Ya*X-xa*M,Nt=Ya*Ya*X+B,Ut=xa*Ya*X+ma*M,Mt=ma*xa*X+Ya*M,jt=Ya*xa*X-ma*M,ga=xa*xa*X+B,S[0]=(ee=V[0])*At+(pe=V[4])*(xt=Ya*ma*X+xa*M)+(je=V[8])*(St=xa*ma*X-Ya*M),S[1]=ue*At+we*xt+Ze*St,S[2]=le*At+Pe*xt+mt*St,S[3]=re*At+We*xt+Ye*St,S[4]=ee*Ot+pe*Nt+je*Ut,S[5]=ue*Ot+we*Nt+Ze*Ut,S[6]=le*Ot+Pe*Nt+mt*Ut,S[7]=re*Ot+We*Nt+Ye*Ut,S[8]=ee*Mt+pe*jt+je*ga,S[9]=ue*Mt+we*jt+Ze*ga,S[10]=le*Mt+Pe*jt+mt*ga,S[11]=re*Mt+We*jt+Ye*ga,V!==S&&(S[12]=V[12],S[13]=V[13],S[14]=V[14],S[15]=V[15]),S)},me.rotateX=function(S,V,I){var O=Math.sin(I),M=Math.cos(I),B=V[4],X=V[5],ee=V[6],ue=V[7],le=V[8],re=V[9],pe=V[10],we=V[11];return V!==S&&(S[0]=V[0],S[1]=V[1],S[2]=V[2],S[3]=V[3],S[12]=V[12],S[13]=V[13],S[14]=V[14],S[15]=V[15]),S[4]=B*M+le*O,S[5]=X*M+re*O,S[6]=ee*M+pe*O,S[7]=ue*M+we*O,S[8]=le*M-B*O,S[9]=re*M-X*O,S[10]=pe*M-ee*O,S[11]=we*M-ue*O,S},me.rotateY=function(S,V,I){var O=Math.sin(I),M=Math.cos(I),B=V[0],X=V[1],ee=V[2],ue=V[3],le=V[8],re=V[9],pe=V[10],we=V[11];return V!==S&&(S[4]=V[4],S[5]=V[5],S[6]=V[6],S[7]=V[7],S[12]=V[12],S[13]=V[13],S[14]=V[14],S[15]=V[15]),S[0]=B*M-le*O,S[1]=X*M-re*O,S[2]=ee*M-pe*O,S[3]=ue*M-we*O,S[8]=B*O+le*M,S[9]=X*O+re*M,S[10]=ee*O+pe*M,S[11]=ue*O+we*M,S},me.rotateZ=function(S,V,I){var O=Math.sin(I),M=Math.cos(I),B=V[0],X=V[1],ee=V[2],ue=V[3],le=V[4],re=V[5],pe=V[6],we=V[7];return V!==S&&(S[8]=V[8],S[9]=V[9],S[10]=V[10],S[11]=V[11],S[12]=V[12],S[13]=V[13],S[14]=V[14],S[15]=V[15]),S[0]=B*M+le*O,S[1]=X*M+re*O,S[2]=ee*M+pe*O,S[3]=ue*M+we*O,S[4]=le*M-B*O,S[5]=re*M-X*O,S[6]=pe*M-ee*O,S[7]=we*M-ue*O,S},me.fromTranslation=function(S,V){return S[0]=1,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=1,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=1,S[11]=0,S[12]=V[0],S[13]=V[1],S[14]=V[2],S[15]=1,S},me.fromScaling=function(S,V){return S[0]=V[0],S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=V[1],S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=V[2],S[11]=0,S[12]=0,S[13]=0,S[14]=0,S[15]=1,S},me.fromRotation=function(S,V,I){var O,M,B,X=I[0],ee=I[1],ue=I[2],le=Math.hypot(X,ee,ue);return le<i.EPSILON?null:(X*=le=1/le,ee*=le,ue*=le,O=Math.sin(V),M=Math.cos(V),S[0]=X*X*(B=1-M)+M,S[1]=ee*X*B+ue*O,S[2]=ue*X*B-ee*O,S[3]=0,S[4]=X*ee*B-ue*O,S[5]=ee*ee*B+M,S[6]=ue*ee*B+X*O,S[7]=0,S[8]=X*ue*B+ee*O,S[9]=ee*ue*B-X*O,S[10]=ue*ue*B+M,S[11]=0,S[12]=0,S[13]=0,S[14]=0,S[15]=1,S)},me.fromXRotation=function(S,V){var I=Math.sin(V),O=Math.cos(V);return S[0]=1,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=O,S[6]=I,S[7]=0,S[8]=0,S[9]=-I,S[10]=O,S[11]=0,S[12]=0,S[13]=0,S[14]=0,S[15]=1,S},me.fromYRotation=function(S,V){var I=Math.sin(V),O=Math.cos(V);return S[0]=O,S[1]=0,S[2]=-I,S[3]=0,S[4]=0,S[5]=1,S[6]=0,S[7]=0,S[8]=I,S[9]=0,S[10]=O,S[11]=0,S[12]=0,S[13]=0,S[14]=0,S[15]=1,S},me.fromZRotation=function(S,V){var I=Math.sin(V),O=Math.cos(V);return S[0]=O,S[1]=I,S[2]=0,S[3]=0,S[4]=-I,S[5]=O,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=1,S[11]=0,S[12]=0,S[13]=0,S[14]=0,S[15]=1,S},me.fromRotationTranslation=m,me.fromQuat2=function(S,V){var I=new i.ARRAY_TYPE(3),O=-V[0],M=-V[1],B=-V[2],X=V[3],ee=V[4],ue=V[5],le=V[6],re=V[7],pe=O*O+M*M+B*B+X*X;return pe>0?(I[0]=2*(ee*X+re*O+ue*B-le*M)/pe,I[1]=2*(ue*X+re*M+le*O-ee*B)/pe,I[2]=2*(le*X+re*B+ee*M-ue*O)/pe):(I[0]=2*(ee*X+re*O+ue*B-le*M),I[1]=2*(ue*X+re*M+le*O-ee*B),I[2]=2*(le*X+re*B+ee*M-ue*O)),m(S,V,I),S},me.getTranslation=function(S,V){return S[0]=V[12],S[1]=V[13],S[2]=V[14],S},me.getScaling=_,me.getRotation=function(S,V){var I=new i.ARRAY_TYPE(3);_(I,V);var O=1/I[0],M=1/I[1],B=1/I[2],X=V[0]*O,ee=V[1]*M,ue=V[2]*B,le=V[4]*O,re=V[5]*M,pe=V[6]*B,we=V[8]*O,Pe=V[9]*M,We=V[10]*B,je=X+re+We,Ze=0;return je>0?(Ze=2*Math.sqrt(je+1),S[3]=.25*Ze,S[0]=(pe-Pe)/Ze,S[1]=(we-ue)/Ze,S[2]=(ee-le)/Ze):X>re&&X>We?(Ze=2*Math.sqrt(1+X-re-We),S[3]=(pe-Pe)/Ze,S[0]=.25*Ze,S[1]=(ee+le)/Ze,S[2]=(we+ue)/Ze):re>We?(Ze=2*Math.sqrt(1+re-X-We),S[3]=(we-ue)/Ze,S[0]=(ee+le)/Ze,S[1]=.25*Ze,S[2]=(pe+Pe)/Ze):(Ze=2*Math.sqrt(1+We-X-re),S[3]=(ee-le)/Ze,S[0]=(we+ue)/Ze,S[1]=(pe+Pe)/Ze,S[2]=.25*Ze),S},me.fromRotationTranslationScale=function(S,V,I,O){var M=V[0],B=V[1],X=V[2],ee=V[3],ue=M+M,le=B+B,re=X+X,pe=M*ue,we=M*le,Pe=M*re,We=B*le,je=B*re,Ze=X*re,mt=ee*ue,Ye=ee*le,At=ee*re,xt=O[0],St=O[1],Ot=O[2];return S[0]=(1-(We+Ze))*xt,S[1]=(we+At)*xt,S[2]=(Pe-Ye)*xt,S[3]=0,S[4]=(we-At)*St,S[5]=(1-(pe+Ze))*St,S[6]=(je+mt)*St,S[7]=0,S[8]=(Pe+Ye)*Ot,S[9]=(je-mt)*Ot,S[10]=(1-(pe+We))*Ot,S[11]=0,S[12]=I[0],S[13]=I[1],S[14]=I[2],S[15]=1,S},me.fromRotationTranslationScaleOrigin=function(S,V,I,O,M){var B=V[0],X=V[1],ee=V[2],ue=V[3],le=B+B,re=X+X,pe=ee+ee,we=B*le,Pe=B*re,We=B*pe,je=X*re,Ze=X*pe,mt=ee*pe,Ye=ue*le,At=ue*re,xt=ue*pe,St=O[0],Ot=O[1],Nt=O[2],Ut=M[0],Mt=M[1],jt=M[2],ga=(1-(je+mt))*St,ma=(Pe+xt)*St,Ya=(We-At)*St,xa=(Pe-xt)*Ot,Oa=(1-(we+mt))*Ot,_a=(Ze+Ye)*Ot,Ar=(We+At)*Nt,$a=(Ze-Ye)*Nt,or=(1-(we+je))*Nt;return S[0]=ga,S[1]=ma,S[2]=Ya,S[3]=0,S[4]=xa,S[5]=Oa,S[6]=_a,S[7]=0,S[8]=Ar,S[9]=$a,S[10]=or,S[11]=0,S[12]=I[0]+Ut-(ga*Ut+xa*Mt+Ar*jt),S[13]=I[1]+Mt-(ma*Ut+Oa*Mt+$a*jt),S[14]=I[2]+jt-(Ya*Ut+_a*Mt+or*jt),S[15]=1,S},me.fromQuat=function(S,V){var I=V[0],O=V[1],M=V[2],B=V[3],X=I+I,ee=O+O,ue=M+M,le=I*X,re=O*X,pe=O*ee,we=M*X,Pe=M*ee,We=M*ue,je=B*X,Ze=B*ee,mt=B*ue;return S[0]=1-pe-We,S[1]=re+mt,S[2]=we-Ze,S[3]=0,S[4]=re-mt,S[5]=1-le-We,S[6]=Pe+je,S[7]=0,S[8]=we+Ze,S[9]=Pe-je,S[10]=1-le-pe,S[11]=0,S[12]=0,S[13]=0,S[14]=0,S[15]=1,S},me.frustum=function(S,V,I,O,M,B,X){var ee=1/(I-V),ue=1/(M-O),le=1/(B-X);return S[0]=2*B*ee,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=2*B*ue,S[6]=0,S[7]=0,S[8]=(I+V)*ee,S[9]=(M+O)*ue,S[10]=(X+B)*le,S[11]=-1,S[12]=0,S[13]=0,S[14]=X*B*2*le,S[15]=0,S},me.perspectiveNO=b,me.perspectiveZO=function(S,V,I,O,M){var B,X=1/Math.tan(V/2);return S[0]=X/I,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=X,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[11]=-1,S[12]=0,S[13]=0,S[15]=0,M!=null&&M!==1/0?(S[10]=M*(B=1/(O-M)),S[14]=M*O*B):(S[10]=-1,S[14]=-O),S},me.perspectiveFromFieldOfView=function(S,V,I,O){var M=Math.tan(V.upDegrees*Math.PI/180),B=Math.tan(V.downDegrees*Math.PI/180),X=Math.tan(V.leftDegrees*Math.PI/180),ee=Math.tan(V.rightDegrees*Math.PI/180),ue=2/(X+ee),le=2/(M+B);return S[0]=ue,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=le,S[6]=0,S[7]=0,S[8]=-(X-ee)*ue*.5,S[9]=(M-B)*le*.5,S[10]=O/(I-O),S[11]=-1,S[12]=0,S[13]=0,S[14]=O*I/(I-O),S[15]=0,S},me.orthoNO=N,me.orthoZO=function(S,V,I,O,M,B,X){var ee=1/(V-I),ue=1/(O-M),le=1/(B-X);return S[0]=-2*ee,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=-2*ue,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=le,S[11]=0,S[12]=(V+I)*ee,S[13]=(M+O)*ue,S[14]=B*le,S[15]=1,S},me.lookAt=function(S,V,I,O){var M,B,X,ee,ue,le,re,pe,we,Pe,We=V[0],je=V[1],Ze=V[2],mt=O[0],Ye=O[1],At=O[2],xt=I[0],St=I[1],Ot=I[2];return Math.abs(We-xt)<i.EPSILON&&Math.abs(je-St)<i.EPSILON&&Math.abs(Ze-Ot)<i.EPSILON?f(S):(re=We-xt,pe=je-St,we=Ze-Ot,M=Ye*(we*=Pe=1/Math.hypot(re,pe,we))-At*(pe*=Pe),B=At*(re*=Pe)-mt*we,X=mt*pe-Ye*re,(Pe=Math.hypot(M,B,X))?(M*=Pe=1/Pe,B*=Pe,X*=Pe):(M=0,B=0,X=0),ee=pe*X-we*B,ue=we*M-re*X,le=re*B-pe*M,(Pe=Math.hypot(ee,ue,le))?(ee*=Pe=1/Pe,ue*=Pe,le*=Pe):(ee=0,ue=0,le=0),S[0]=M,S[1]=ee,S[2]=re,S[3]=0,S[4]=B,S[5]=ue,S[6]=pe,S[7]=0,S[8]=X,S[9]=le,S[10]=we,S[11]=0,S[12]=-(M*We+B*je+X*Ze),S[13]=-(ee*We+ue*je+le*Ze),S[14]=-(re*We+pe*je+we*Ze),S[15]=1,S)},me.targetTo=function(S,V,I,O){var M=V[0],B=V[1],X=V[2],ee=O[0],ue=O[1],le=O[2],re=M-I[0],pe=B-I[1],we=X-I[2],Pe=re*re+pe*pe+we*we;Pe>0&&(re*=Pe=1/Math.sqrt(Pe),pe*=Pe,we*=Pe);var We=ue*we-le*pe,je=le*re-ee*we,Ze=ee*pe-ue*re;return(Pe=We*We+je*je+Ze*Ze)>0&&(We*=Pe=1/Math.sqrt(Pe),je*=Pe,Ze*=Pe),S[0]=We,S[1]=je,S[2]=Ze,S[3]=0,S[4]=pe*Ze-we*je,S[5]=we*We-re*Ze,S[6]=re*je-pe*We,S[7]=0,S[8]=re,S[9]=pe,S[10]=we,S[11]=0,S[12]=M,S[13]=B,S[14]=X,S[15]=1,S},me.str=function(S){return"mat4("+S[0]+", "+S[1]+", "+S[2]+", "+S[3]+", "+S[4]+", "+S[5]+", "+S[6]+", "+S[7]+", "+S[8]+", "+S[9]+", "+S[10]+", "+S[11]+", "+S[12]+", "+S[13]+", "+S[14]+", "+S[15]+")"},me.frob=function(S){return Math.hypot(S[0],S[1],S[2],S[3],S[4],S[5],S[6],S[7],S[8],S[9],S[10],S[11],S[12],S[13],S[14],S[15])},me.add=function(S,V,I){return S[0]=V[0]+I[0],S[1]=V[1]+I[1],S[2]=V[2]+I[2],S[3]=V[3]+I[3],S[4]=V[4]+I[4],S[5]=V[5]+I[5],S[6]=V[6]+I[6],S[7]=V[7]+I[7],S[8]=V[8]+I[8],S[9]=V[9]+I[9],S[10]=V[10]+I[10],S[11]=V[11]+I[11],S[12]=V[12]+I[12],S[13]=V[13]+I[13],S[14]=V[14]+I[14],S[15]=V[15]+I[15],S},me.subtract=D,me.multiplyScalar=function(S,V,I){return S[0]=V[0]*I,S[1]=V[1]*I,S[2]=V[2]*I,S[3]=V[3]*I,S[4]=V[4]*I,S[5]=V[5]*I,S[6]=V[6]*I,S[7]=V[7]*I,S[8]=V[8]*I,S[9]=V[9]*I,S[10]=V[10]*I,S[11]=V[11]*I,S[12]=V[12]*I,S[13]=V[13]*I,S[14]=V[14]*I,S[15]=V[15]*I,S},me.multiplyScalarAndAdd=function(S,V,I,O){return S[0]=V[0]+I[0]*O,S[1]=V[1]+I[1]*O,S[2]=V[2]+I[2]*O,S[3]=V[3]+I[3]*O,S[4]=V[4]+I[4]*O,S[5]=V[5]+I[5]*O,S[6]=V[6]+I[6]*O,S[7]=V[7]+I[7]*O,S[8]=V[8]+I[8]*O,S[9]=V[9]+I[9]*O,S[10]=V[10]+I[10]*O,S[11]=V[11]+I[11]*O,S[12]=V[12]+I[12]*O,S[13]=V[13]+I[13]*O,S[14]=V[14]+I[14]*O,S[15]=V[15]+I[15]*O,S},me.exactEquals=function(S,V){return S[0]===V[0]&&S[1]===V[1]&&S[2]===V[2]&&S[3]===V[3]&&S[4]===V[4]&&S[5]===V[5]&&S[6]===V[6]&&S[7]===V[7]&&S[8]===V[8]&&S[9]===V[9]&&S[10]===V[10]&&S[11]===V[11]&&S[12]===V[12]&&S[13]===V[13]&&S[14]===V[14]&&S[15]===V[15]},me.equals=function(S,V){var I=S[0],O=S[1],M=S[2],B=S[3],X=S[4],ee=S[5],ue=S[6],le=S[7],re=S[8],pe=S[9],we=S[10],Pe=S[11],We=S[12],je=S[13],Ze=S[14],mt=S[15],Ye=V[0],At=V[1],xt=V[2],St=V[3],Ot=V[4],Nt=V[5],Ut=V[6],Mt=V[7],jt=V[8],ga=V[9],ma=V[10],Ya=V[11],xa=V[12],Oa=V[13],_a=V[14],Ar=V[15];return Math.abs(I-Ye)<=i.EPSILON*Math.max(1,Math.abs(I),Math.abs(Ye))&&Math.abs(O-At)<=i.EPSILON*Math.max(1,Math.abs(O),Math.abs(At))&&Math.abs(M-xt)<=i.EPSILON*Math.max(1,Math.abs(M),Math.abs(xt))&&Math.abs(B-St)<=i.EPSILON*Math.max(1,Math.abs(B),Math.abs(St))&&Math.abs(X-Ot)<=i.EPSILON*Math.max(1,Math.abs(X),Math.abs(Ot))&&Math.abs(ee-Nt)<=i.EPSILON*Math.max(1,Math.abs(ee),Math.abs(Nt))&&Math.abs(ue-Ut)<=i.EPSILON*Math.max(1,Math.abs(ue),Math.abs(Ut))&&Math.abs(le-Mt)<=i.EPSILON*Math.max(1,Math.abs(le),Math.abs(Mt))&&Math.abs(re-jt)<=i.EPSILON*Math.max(1,Math.abs(re),Math.abs(jt))&&Math.abs(pe-ga)<=i.EPSILON*Math.max(1,Math.abs(pe),Math.abs(ga))&&Math.abs(we-ma)<=i.EPSILON*Math.max(1,Math.abs(we),Math.abs(ma))&&Math.abs(Pe-Ya)<=i.EPSILON*Math.max(1,Math.abs(Pe),Math.abs(Ya))&&Math.abs(We-xa)<=i.EPSILON*Math.max(1,Math.abs(We),Math.abs(xa))&&Math.abs(je-Oa)<=i.EPSILON*Math.max(1,Math.abs(je),Math.abs(Oa))&&Math.abs(Ze-_a)<=i.EPSILON*Math.max(1,Math.abs(Ze),Math.abs(_a))&&Math.abs(mt-Ar)<=i.EPSILON*Math.max(1,Math.abs(mt),Math.abs(Ar))},me.sub=me.mul=me.ortho=me.perspective=void 0;var i=function(S,V){if(S&&S.__esModule)return S;if(S===null||d(S)!=="object"&&typeof S!="function")return{default:S};var I=u(void 0);if(I&&I.has(S))return I.get(S);var O={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in S)if(B!=="default"&&Object.prototype.hasOwnProperty.call(S,B)){var X=M?Object.getOwnPropertyDescriptor(S,B):null;X&&(X.get||X.set)?Object.defineProperty(O,B,X):O[B]=S[B]}return O.default=S,I&&I.set(S,O),O}(k());function u(S){if(typeof WeakMap!="function")return null;var V=new WeakMap,I=new WeakMap;return(u=function(O){return O?I:V})(S)}function f(S){return S[0]=1,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=1,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=1,S[11]=0,S[12]=0,S[13]=0,S[14]=0,S[15]=1,S}function y(S,V,I){var O=V[0],M=V[1],B=V[2],X=V[3],ee=V[4],ue=V[5],le=V[6],re=V[7],pe=V[8],we=V[9],Pe=V[10],We=V[11],je=V[12],Ze=V[13],mt=V[14],Ye=V[15],At=I[0],xt=I[1],St=I[2],Ot=I[3];return S[0]=At*O+xt*ee+St*pe+Ot*je,S[1]=At*M+xt*ue+St*we+Ot*Ze,S[2]=At*B+xt*le+St*Pe+Ot*mt,S[3]=At*X+xt*re+St*We+Ot*Ye,S[4]=(At=I[4])*O+(xt=I[5])*ee+(St=I[6])*pe+(Ot=I[7])*je,S[5]=At*M+xt*ue+St*we+Ot*Ze,S[6]=At*B+xt*le+St*Pe+Ot*mt,S[7]=At*X+xt*re+St*We+Ot*Ye,S[8]=(At=I[8])*O+(xt=I[9])*ee+(St=I[10])*pe+(Ot=I[11])*je,S[9]=At*M+xt*ue+St*we+Ot*Ze,S[10]=At*B+xt*le+St*Pe+Ot*mt,S[11]=At*X+xt*re+St*We+Ot*Ye,S[12]=(At=I[12])*O+(xt=I[13])*ee+(St=I[14])*pe+(Ot=I[15])*je,S[13]=At*M+xt*ue+St*we+Ot*Ze,S[14]=At*B+xt*le+St*Pe+Ot*mt,S[15]=At*X+xt*re+St*We+Ot*Ye,S}function m(S,V,I){var O=V[0],M=V[1],B=V[2],X=V[3],ee=O+O,ue=M+M,le=B+B,re=O*ee,pe=O*ue,we=O*le,Pe=M*ue,We=M*le,je=B*le,Ze=X*ee,mt=X*ue,Ye=X*le;return S[0]=1-(Pe+je),S[1]=pe+Ye,S[2]=we-mt,S[3]=0,S[4]=pe-Ye,S[5]=1-(re+je),S[6]=We+Ze,S[7]=0,S[8]=we+mt,S[9]=We-Ze,S[10]=1-(re+Pe),S[11]=0,S[12]=I[0],S[13]=I[1],S[14]=I[2],S[15]=1,S}function _(S,V){var I=V[4],O=V[5],M=V[6],B=V[8],X=V[9],ee=V[10];return S[0]=Math.hypot(V[0],V[1],V[2]),S[1]=Math.hypot(I,O,M),S[2]=Math.hypot(B,X,ee),S}function b(S,V,I,O,M){var B,X=1/Math.tan(V/2);return S[0]=X/I,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=X,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[11]=-1,S[12]=0,S[13]=0,S[15]=0,M!=null&&M!==1/0?(S[10]=(M+O)*(B=1/(O-M)),S[14]=2*M*O*B):(S[10]=-1,S[14]=-2*O),S}function N(S,V,I,O,M,B,X){var ee=1/(V-I),ue=1/(O-M),le=1/(B-X);return S[0]=-2*ee,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=-2*ue,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=2*le,S[11]=0,S[12]=(V+I)*ee,S[13]=(M+O)*ue,S[14]=(X+B)*le,S[15]=1,S}function D(S,V,I){return S[0]=V[0]-I[0],S[1]=V[1]-I[1],S[2]=V[2]-I[2],S[3]=V[3]-I[3],S[4]=V[4]-I[4],S[5]=V[5]-I[5],S[6]=V[6]-I[6],S[7]=V[7]-I[7],S[8]=V[8]-I[8],S[9]=V[9]-I[9],S[10]=V[10]-I[10],S[11]=V[11]-I[11],S[12]=V[12]-I[12],S[13]=V[13]-I[13],S[14]=V[14]-I[14],S[15]=V[15]-I[15],S}return me.perspective=b,me.ortho=N,me.mul=y,me.sub=D,me}var be,De={},ne={};function ye(){if(be)return ne;function d(M){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},d(M)}be=1,Object.defineProperty(ne,"__esModule",{value:!0}),ne.create=f,ne.clone=function(M){var B=new i.ARRAY_TYPE(3);return B[0]=M[0],B[1]=M[1],B[2]=M[2],B},ne.length=y,ne.fromValues=function(M,B,X){var ee=new i.ARRAY_TYPE(3);return ee[0]=M,ee[1]=B,ee[2]=X,ee},ne.copy=function(M,B){return M[0]=B[0],M[1]=B[1],M[2]=B[2],M},ne.set=function(M,B,X,ee){return M[0]=B,M[1]=X,M[2]=ee,M},ne.add=function(M,B,X){return M[0]=B[0]+X[0],M[1]=B[1]+X[1],M[2]=B[2]+X[2],M},ne.subtract=m,ne.multiply=_,ne.divide=b,ne.ceil=function(M,B){return M[0]=Math.ceil(B[0]),M[1]=Math.ceil(B[1]),M[2]=Math.ceil(B[2]),M},ne.floor=function(M,B){return M[0]=Math.floor(B[0]),M[1]=Math.floor(B[1]),M[2]=Math.floor(B[2]),M},ne.min=function(M,B,X){return M[0]=Math.min(B[0],X[0]),M[1]=Math.min(B[1],X[1]),M[2]=Math.min(B[2],X[2]),M},ne.max=function(M,B,X){return M[0]=Math.max(B[0],X[0]),M[1]=Math.max(B[1],X[1]),M[2]=Math.max(B[2],X[2]),M},ne.round=function(M,B){return M[0]=Math.round(B[0]),M[1]=Math.round(B[1]),M[2]=Math.round(B[2]),M},ne.scale=function(M,B,X){return M[0]=B[0]*X,M[1]=B[1]*X,M[2]=B[2]*X,M},ne.scaleAndAdd=function(M,B,X,ee){return M[0]=B[0]+X[0]*ee,M[1]=B[1]+X[1]*ee,M[2]=B[2]+X[2]*ee,M},ne.distance=N,ne.squaredDistance=D,ne.squaredLength=S,ne.negate=function(M,B){return M[0]=-B[0],M[1]=-B[1],M[2]=-B[2],M},ne.inverse=function(M,B){return M[0]=1/B[0],M[1]=1/B[1],M[2]=1/B[2],M},ne.normalize=function(M,B){var X=B[0],ee=B[1],ue=B[2],le=X*X+ee*ee+ue*ue;return le>0&&(le=1/Math.sqrt(le)),M[0]=B[0]*le,M[1]=B[1]*le,M[2]=B[2]*le,M},ne.dot=V,ne.cross=function(M,B,X){var ee=B[0],ue=B[1],le=B[2],re=X[0],pe=X[1],we=X[2];return M[0]=ue*we-le*pe,M[1]=le*re-ee*we,M[2]=ee*pe-ue*re,M},ne.lerp=function(M,B,X,ee){var ue=B[0],le=B[1],re=B[2];return M[0]=ue+ee*(X[0]-ue),M[1]=le+ee*(X[1]-le),M[2]=re+ee*(X[2]-re),M},ne.hermite=function(M,B,X,ee,ue,le){var re=le*le,pe=re*(2*le-3)+1,we=re*(le-2)+le,Pe=re*(le-1),We=re*(3-2*le);return M[0]=B[0]*pe+X[0]*we+ee[0]*Pe+ue[0]*We,M[1]=B[1]*pe+X[1]*we+ee[1]*Pe+ue[1]*We,M[2]=B[2]*pe+X[2]*we+ee[2]*Pe+ue[2]*We,M},ne.bezier=function(M,B,X,ee,ue,le){var re=1-le,pe=re*re,we=le*le,Pe=pe*re,We=3*le*pe,je=3*we*re,Ze=we*le;return M[0]=B[0]*Pe+X[0]*We+ee[0]*je+ue[0]*Ze,M[1]=B[1]*Pe+X[1]*We+ee[1]*je+ue[1]*Ze,M[2]=B[2]*Pe+X[2]*We+ee[2]*je+ue[2]*Ze,M},ne.random=function(M,B){B=B||1;var X=2*i.RANDOM()*Math.PI,ee=2*i.RANDOM()-1,ue=Math.sqrt(1-ee*ee)*B;return M[0]=Math.cos(X)*ue,M[1]=Math.sin(X)*ue,M[2]=ee*B,M},ne.transformMat4=function(M,B,X){var ee=B[0],ue=B[1],le=B[2],re=X[3]*ee+X[7]*ue+X[11]*le+X[15];return M[0]=(X[0]*ee+X[4]*ue+X[8]*le+X[12])/(re=re||1),M[1]=(X[1]*ee+X[5]*ue+X[9]*le+X[13])/re,M[2]=(X[2]*ee+X[6]*ue+X[10]*le+X[14])/re,M},ne.transformMat3=function(M,B,X){var ee=B[0],ue=B[1],le=B[2];return M[0]=ee*X[0]+ue*X[3]+le*X[6],M[1]=ee*X[1]+ue*X[4]+le*X[7],M[2]=ee*X[2]+ue*X[5]+le*X[8],M},ne.transformQuat=function(M,B,X){var ee=X[0],ue=X[1],le=X[2],re=B[0],pe=B[1],we=B[2],Pe=ue*we-le*pe,We=le*re-ee*we,je=ee*pe-ue*re,Ze=ue*je-le*We,mt=le*Pe-ee*je,Ye=ee*We-ue*Pe,At=2*X[3];return We*=At,je*=At,mt*=2,Ye*=2,M[0]=re+(Pe*=At)+(Ze*=2),M[1]=pe+We+mt,M[2]=we+je+Ye,M},ne.rotateX=function(M,B,X,ee){var ue=[],le=[];return ue[0]=B[0]-X[0],ue[1]=B[1]-X[1],ue[2]=B[2]-X[2],le[0]=ue[0],le[1]=ue[1]*Math.cos(ee)-ue[2]*Math.sin(ee),le[2]=ue[1]*Math.sin(ee)+ue[2]*Math.cos(ee),M[0]=le[0]+X[0],M[1]=le[1]+X[1],M[2]=le[2]+X[2],M},ne.rotateY=function(M,B,X,ee){var ue=[],le=[];return ue[0]=B[0]-X[0],ue[1]=B[1]-X[1],ue[2]=B[2]-X[2],le[0]=ue[2]*Math.sin(ee)+ue[0]*Math.cos(ee),le[1]=ue[1],le[2]=ue[2]*Math.cos(ee)-ue[0]*Math.sin(ee),M[0]=le[0]+X[0],M[1]=le[1]+X[1],M[2]=le[2]+X[2],M},ne.rotateZ=function(M,B,X,ee){var ue=[],le=[];return ue[0]=B[0]-X[0],ue[1]=B[1]-X[1],ue[2]=B[2]-X[2],le[0]=ue[0]*Math.cos(ee)-ue[1]*Math.sin(ee),le[1]=ue[0]*Math.sin(ee)+ue[1]*Math.cos(ee),le[2]=ue[2],M[0]=le[0]+X[0],M[1]=le[1]+X[1],M[2]=le[2]+X[2],M},ne.angle=function(M,B){var X=M[0],ee=M[1],ue=M[2],le=B[0],re=B[1],pe=B[2],we=Math.sqrt(X*X+ee*ee+ue*ue)*Math.sqrt(le*le+re*re+pe*pe),Pe=we&&V(M,B)/we;return Math.acos(Math.min(Math.max(Pe,-1),1))},ne.zero=function(M){return M[0]=0,M[1]=0,M[2]=0,M},ne.str=function(M){return"vec3("+M[0]+", "+M[1]+", "+M[2]+")"},ne.exactEquals=function(M,B){return M[0]===B[0]&&M[1]===B[1]&&M[2]===B[2]},ne.equals=function(M,B){var X=M[0],ee=M[1],ue=M[2],le=B[0],re=B[1],pe=B[2];return Math.abs(X-le)<=i.EPSILON*Math.max(1,Math.abs(X),Math.abs(le))&&Math.abs(ee-re)<=i.EPSILON*Math.max(1,Math.abs(ee),Math.abs(re))&&Math.abs(ue-pe)<=i.EPSILON*Math.max(1,Math.abs(ue),Math.abs(pe))},ne.forEach=ne.sqrLen=ne.len=ne.sqrDist=ne.dist=ne.div=ne.mul=ne.sub=void 0;var i=function(M,B){if(M&&M.__esModule)return M;if(M===null||d(M)!=="object"&&typeof M!="function")return{default:M};var X=u(void 0);if(X&&X.has(M))return X.get(M);var ee={},ue=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var le in M)if(le!=="default"&&Object.prototype.hasOwnProperty.call(M,le)){var re=ue?Object.getOwnPropertyDescriptor(M,le):null;re&&(re.get||re.set)?Object.defineProperty(ee,le,re):ee[le]=M[le]}return ee.default=M,X&&X.set(M,ee),ee}(k());function u(M){if(typeof WeakMap!="function")return null;var B=new WeakMap,X=new WeakMap;return(u=function(ee){return ee?X:B})(M)}function f(){var M=new i.ARRAY_TYPE(3);return i.ARRAY_TYPE!=Float32Array&&(M[0]=0,M[1]=0,M[2]=0),M}function y(M){return Math.hypot(M[0],M[1],M[2])}function m(M,B,X){return M[0]=B[0]-X[0],M[1]=B[1]-X[1],M[2]=B[2]-X[2],M}function _(M,B,X){return M[0]=B[0]*X[0],M[1]=B[1]*X[1],M[2]=B[2]*X[2],M}function b(M,B,X){return M[0]=B[0]/X[0],M[1]=B[1]/X[1],M[2]=B[2]/X[2],M}function N(M,B){return Math.hypot(B[0]-M[0],B[1]-M[1],B[2]-M[2])}function D(M,B){var X=B[0]-M[0],ee=B[1]-M[1],ue=B[2]-M[2];return X*X+ee*ee+ue*ue}function S(M){var B=M[0],X=M[1],ee=M[2];return B*B+X*X+ee*ee}function V(M,B){return M[0]*B[0]+M[1]*B[1]+M[2]*B[2]}ne.sub=m,ne.mul=_,ne.div=b,ne.dist=N,ne.sqrDist=D,ne.len=y,ne.sqrLen=S;var I,O=(I=f(),function(M,B,X,ee,ue,le){var re,pe;for(B||(B=3),X||(X=0),pe=ee?Math.min(ee*B+X,M.length):M.length,re=X;re<pe;re+=B)I[0]=M[re],I[1]=M[re+1],I[2]=M[re+2],ue(I,I,le),M[re]=I[0],M[re+1]=I[1],M[re+2]=I[2];return M});return ne.forEach=O,ne}var Me,ze,Le={};function Ie(){if(Me)return Le;function d(O){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},d(O)}Me=1,Object.defineProperty(Le,"__esModule",{value:!0}),Le.create=f,Le.clone=function(O){var M=new i.ARRAY_TYPE(4);return M[0]=O[0],M[1]=O[1],M[2]=O[2],M[3]=O[3],M},Le.fromValues=function(O,M,B,X){var ee=new i.ARRAY_TYPE(4);return ee[0]=O,ee[1]=M,ee[2]=B,ee[3]=X,ee},Le.copy=function(O,M){return O[0]=M[0],O[1]=M[1],O[2]=M[2],O[3]=M[3],O},Le.set=function(O,M,B,X,ee){return O[0]=M,O[1]=B,O[2]=X,O[3]=ee,O},Le.add=function(O,M,B){return O[0]=M[0]+B[0],O[1]=M[1]+B[1],O[2]=M[2]+B[2],O[3]=M[3]+B[3],O},Le.subtract=y,Le.multiply=m,Le.divide=_,Le.ceil=function(O,M){return O[0]=Math.ceil(M[0]),O[1]=Math.ceil(M[1]),O[2]=Math.ceil(M[2]),O[3]=Math.ceil(M[3]),O},Le.floor=function(O,M){return O[0]=Math.floor(M[0]),O[1]=Math.floor(M[1]),O[2]=Math.floor(M[2]),O[3]=Math.floor(M[3]),O},Le.min=function(O,M,B){return O[0]=Math.min(M[0],B[0]),O[1]=Math.min(M[1],B[1]),O[2]=Math.min(M[2],B[2]),O[3]=Math.min(M[3],B[3]),O},Le.max=function(O,M,B){return O[0]=Math.max(M[0],B[0]),O[1]=Math.max(M[1],B[1]),O[2]=Math.max(M[2],B[2]),O[3]=Math.max(M[3],B[3]),O},Le.round=function(O,M){return O[0]=Math.round(M[0]),O[1]=Math.round(M[1]),O[2]=Math.round(M[2]),O[3]=Math.round(M[3]),O},Le.scale=function(O,M,B){return O[0]=M[0]*B,O[1]=M[1]*B,O[2]=M[2]*B,O[3]=M[3]*B,O},Le.scaleAndAdd=function(O,M,B,X){return O[0]=M[0]+B[0]*X,O[1]=M[1]+B[1]*X,O[2]=M[2]+B[2]*X,O[3]=M[3]+B[3]*X,O},Le.distance=b,Le.squaredDistance=N,Le.length=D,Le.squaredLength=S,Le.negate=function(O,M){return O[0]=-M[0],O[1]=-M[1],O[2]=-M[2],O[3]=-M[3],O},Le.inverse=function(O,M){return O[0]=1/M[0],O[1]=1/M[1],O[2]=1/M[2],O[3]=1/M[3],O},Le.normalize=function(O,M){var B=M[0],X=M[1],ee=M[2],ue=M[3],le=B*B+X*X+ee*ee+ue*ue;return le>0&&(le=1/Math.sqrt(le)),O[0]=B*le,O[1]=X*le,O[2]=ee*le,O[3]=ue*le,O},Le.dot=function(O,M){return O[0]*M[0]+O[1]*M[1]+O[2]*M[2]+O[3]*M[3]},Le.cross=function(O,M,B,X){var ee=B[0]*X[1]-B[1]*X[0],ue=B[0]*X[2]-B[2]*X[0],le=B[0]*X[3]-B[3]*X[0],re=B[1]*X[2]-B[2]*X[1],pe=B[1]*X[3]-B[3]*X[1],we=B[2]*X[3]-B[3]*X[2],Pe=M[0],We=M[1],je=M[2],Ze=M[3];return O[0]=We*we-je*pe+Ze*re,O[1]=-Pe*we+je*le-Ze*ue,O[2]=Pe*pe-We*le+Ze*ee,O[3]=-Pe*re+We*ue-je*ee,O},Le.lerp=function(O,M,B,X){var ee=M[0],ue=M[1],le=M[2],re=M[3];return O[0]=ee+X*(B[0]-ee),O[1]=ue+X*(B[1]-ue),O[2]=le+X*(B[2]-le),O[3]=re+X*(B[3]-re),O},Le.random=function(O,M){var B,X,ee,ue,le,re;M=M||1;do le=(B=2*i.RANDOM()-1)*B+(X=2*i.RANDOM()-1)*X;while(le>=1);do re=(ee=2*i.RANDOM()-1)*ee+(ue=2*i.RANDOM()-1)*ue;while(re>=1);var pe=Math.sqrt((1-le)/re);return O[0]=M*B,O[1]=M*X,O[2]=M*ee*pe,O[3]=M*ue*pe,O},Le.transformMat4=function(O,M,B){var X=M[0],ee=M[1],ue=M[2],le=M[3];return O[0]=B[0]*X+B[4]*ee+B[8]*ue+B[12]*le,O[1]=B[1]*X+B[5]*ee+B[9]*ue+B[13]*le,O[2]=B[2]*X+B[6]*ee+B[10]*ue+B[14]*le,O[3]=B[3]*X+B[7]*ee+B[11]*ue+B[15]*le,O},Le.transformQuat=function(O,M,B){var X=M[0],ee=M[1],ue=M[2],le=B[0],re=B[1],pe=B[2],we=B[3],Pe=we*X+re*ue-pe*ee,We=we*ee+pe*X-le*ue,je=we*ue+le*ee-re*X,Ze=-le*X-re*ee-pe*ue;return O[0]=Pe*we+Ze*-le+We*-pe-je*-re,O[1]=We*we+Ze*-re+je*-le-Pe*-pe,O[2]=je*we+Ze*-pe+Pe*-re-We*-le,O[3]=M[3],O},Le.zero=function(O){return O[0]=0,O[1]=0,O[2]=0,O[3]=0,O},Le.str=function(O){return"vec4("+O[0]+", "+O[1]+", "+O[2]+", "+O[3]+")"},Le.exactEquals=function(O,M){return O[0]===M[0]&&O[1]===M[1]&&O[2]===M[2]&&O[3]===M[3]},Le.equals=function(O,M){var B=O[0],X=O[1],ee=O[2],ue=O[3],le=M[0],re=M[1],pe=M[2],we=M[3];return Math.abs(B-le)<=i.EPSILON*Math.max(1,Math.abs(B),Math.abs(le))&&Math.abs(X-re)<=i.EPSILON*Math.max(1,Math.abs(X),Math.abs(re))&&Math.abs(ee-pe)<=i.EPSILON*Math.max(1,Math.abs(ee),Math.abs(pe))&&Math.abs(ue-we)<=i.EPSILON*Math.max(1,Math.abs(ue),Math.abs(we))},Le.forEach=Le.sqrLen=Le.len=Le.sqrDist=Le.dist=Le.div=Le.mul=Le.sub=void 0;var i=function(O,M){if(O&&O.__esModule)return O;if(O===null||d(O)!=="object"&&typeof O!="function")return{default:O};var B=u(void 0);if(B&&B.has(O))return B.get(O);var X={},ee=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ue in O)if(ue!=="default"&&Object.prototype.hasOwnProperty.call(O,ue)){var le=ee?Object.getOwnPropertyDescriptor(O,ue):null;le&&(le.get||le.set)?Object.defineProperty(X,ue,le):X[ue]=O[ue]}return X.default=O,B&&B.set(O,X),X}(k());function u(O){if(typeof WeakMap!="function")return null;var M=new WeakMap,B=new WeakMap;return(u=function(X){return X?B:M})(O)}function f(){var O=new i.ARRAY_TYPE(4);return i.ARRAY_TYPE!=Float32Array&&(O[0]=0,O[1]=0,O[2]=0,O[3]=0),O}function y(O,M,B){return O[0]=M[0]-B[0],O[1]=M[1]-B[1],O[2]=M[2]-B[2],O[3]=M[3]-B[3],O}function m(O,M,B){return O[0]=M[0]*B[0],O[1]=M[1]*B[1],O[2]=M[2]*B[2],O[3]=M[3]*B[3],O}function _(O,M,B){return O[0]=M[0]/B[0],O[1]=M[1]/B[1],O[2]=M[2]/B[2],O[3]=M[3]/B[3],O}function b(O,M){return Math.hypot(M[0]-O[0],M[1]-O[1],M[2]-O[2],M[3]-O[3])}function N(O,M){var B=M[0]-O[0],X=M[1]-O[1],ee=M[2]-O[2],ue=M[3]-O[3];return B*B+X*X+ee*ee+ue*ue}function D(O){return Math.hypot(O[0],O[1],O[2],O[3])}function S(O){var M=O[0],B=O[1],X=O[2],ee=O[3];return M*M+B*B+X*X+ee*ee}Le.sub=y,Le.mul=m,Le.div=_,Le.dist=b,Le.sqrDist=N,Le.len=D,Le.sqrLen=S;var V,I=(V=f(),function(O,M,B,X,ee,ue){var le,re;for(M||(M=4),B||(B=0),re=X?Math.min(X*M+B,O.length):O.length,le=B;le<re;le+=M)V[0]=O[le],V[1]=O[le+1],V[2]=O[le+2],V[3]=O[le+3],ee(V,V,ue),O[le]=V[0],O[le+1]=V[1],O[le+2]=V[2],O[le+3]=V[3];return O});return Le.forEach=I,Le}function qe(){if(ze)return De;function d(Ye){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(At){return typeof At}:function(At){return At&&typeof Symbol=="function"&&At.constructor===Symbol&&At!==Symbol.prototype?"symbol":typeof At},d(Ye)}ze=1,Object.defineProperty(De,"__esModule",{value:!0}),De.create=b,De.identity=function(Ye){return Ye[0]=0,Ye[1]=0,Ye[2]=0,Ye[3]=1,Ye},De.setAxisAngle=N,De.getAxisAngle=function(Ye,At){var xt=2*Math.acos(At[3]),St=Math.sin(xt/2);return St>i.EPSILON?(Ye[0]=At[0]/St,Ye[1]=At[1]/St,Ye[2]=At[2]/St):(Ye[0]=1,Ye[1]=0,Ye[2]=0),xt},De.getAngle=function(Ye,At){var xt=B(Ye,At);return Math.acos(2*xt*xt-1)},De.multiply=D,De.rotateX=function(Ye,At,xt){xt*=.5;var St=At[0],Ot=At[1],Nt=At[2],Ut=At[3],Mt=Math.sin(xt),jt=Math.cos(xt);return Ye[0]=St*jt+Ut*Mt,Ye[1]=Ot*jt+Nt*Mt,Ye[2]=Nt*jt-Ot*Mt,Ye[3]=Ut*jt-St*Mt,Ye},De.rotateY=function(Ye,At,xt){xt*=.5;var St=At[0],Ot=At[1],Nt=At[2],Ut=At[3],Mt=Math.sin(xt),jt=Math.cos(xt);return Ye[0]=St*jt-Nt*Mt,Ye[1]=Ot*jt+Ut*Mt,Ye[2]=Nt*jt+St*Mt,Ye[3]=Ut*jt-Ot*Mt,Ye},De.rotateZ=function(Ye,At,xt){xt*=.5;var St=At[0],Ot=At[1],Nt=At[2],Ut=At[3],Mt=Math.sin(xt),jt=Math.cos(xt);return Ye[0]=St*jt+Ot*Mt,Ye[1]=Ot*jt-St*Mt,Ye[2]=Nt*jt+Ut*Mt,Ye[3]=Ut*jt-Nt*Mt,Ye},De.calculateW=function(Ye,At){var xt=At[0],St=At[1],Ot=At[2];return Ye[0]=xt,Ye[1]=St,Ye[2]=Ot,Ye[3]=Math.sqrt(Math.abs(1-xt*xt-St*St-Ot*Ot)),Ye},De.exp=S,De.ln=V,De.pow=function(Ye,At,xt){return V(Ye,At),M(Ye,Ye,xt),S(Ye,Ye),Ye},De.slerp=I,De.random=function(Ye){var At=i.RANDOM(),xt=i.RANDOM(),St=i.RANDOM(),Ot=Math.sqrt(1-At),Nt=Math.sqrt(At);return Ye[0]=Ot*Math.sin(2*Math.PI*xt),Ye[1]=Ot*Math.cos(2*Math.PI*xt),Ye[2]=Nt*Math.sin(2*Math.PI*St),Ye[3]=Nt*Math.cos(2*Math.PI*St),Ye},De.invert=function(Ye,At){var xt=At[0],St=At[1],Ot=At[2],Nt=At[3],Ut=xt*xt+St*St+Ot*Ot+Nt*Nt,Mt=Ut?1/Ut:0;return Ye[0]=-xt*Mt,Ye[1]=-St*Mt,Ye[2]=-Ot*Mt,Ye[3]=Nt*Mt,Ye},De.conjugate=function(Ye,At){return Ye[0]=-At[0],Ye[1]=-At[1],Ye[2]=-At[2],Ye[3]=At[3],Ye},De.fromMat3=O,De.fromEuler=function(Ye,At,xt,St){var Ot=.5*Math.PI/180;At*=Ot,xt*=Ot,St*=Ot;var Nt=Math.sin(At),Ut=Math.cos(At),Mt=Math.sin(xt),jt=Math.cos(xt),ga=Math.sin(St),ma=Math.cos(St);return Ye[0]=Nt*jt*ma-Ut*Mt*ga,Ye[1]=Ut*Mt*ma+Nt*jt*ga,Ye[2]=Ut*jt*ga-Nt*Mt*ma,Ye[3]=Ut*jt*ma+Nt*Mt*ga,Ye},De.str=function(Ye){return"quat("+Ye[0]+", "+Ye[1]+", "+Ye[2]+", "+Ye[3]+")"},De.setAxes=De.sqlerp=De.rotationTo=De.equals=De.exactEquals=De.normalize=De.sqrLen=De.squaredLength=De.len=De.length=De.lerp=De.dot=De.scale=De.mul=De.add=De.set=De.copy=De.fromValues=De.clone=void 0;var i=_(k()),u=_(he()),f=_(ye()),y=_(Ie());function m(Ye){if(typeof WeakMap!="function")return null;var At=new WeakMap,xt=new WeakMap;return(m=function(St){return St?xt:At})(Ye)}function _(Ye,At){if(Ye&&Ye.__esModule)return Ye;if(Ye===null||d(Ye)!=="object"&&typeof Ye!="function")return{default:Ye};var xt=m(At);if(xt&&xt.has(Ye))return xt.get(Ye);var St={},Ot=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Nt in Ye)if(Nt!=="default"&&Object.prototype.hasOwnProperty.call(Ye,Nt)){var Ut=Ot?Object.getOwnPropertyDescriptor(Ye,Nt):null;Ut&&(Ut.get||Ut.set)?Object.defineProperty(St,Nt,Ut):St[Nt]=Ye[Nt]}return St.default=Ye,xt&&xt.set(Ye,St),St}function b(){var Ye=new i.ARRAY_TYPE(4);return i.ARRAY_TYPE!=Float32Array&&(Ye[0]=0,Ye[1]=0,Ye[2]=0),Ye[3]=1,Ye}function N(Ye,At,xt){xt*=.5;var St=Math.sin(xt);return Ye[0]=St*At[0],Ye[1]=St*At[1],Ye[2]=St*At[2],Ye[3]=Math.cos(xt),Ye}function D(Ye,At,xt){var St=At[0],Ot=At[1],Nt=At[2],Ut=At[3],Mt=xt[0],jt=xt[1],ga=xt[2],ma=xt[3];return Ye[0]=St*ma+Ut*Mt+Ot*ga-Nt*jt,Ye[1]=Ot*ma+Ut*jt+Nt*Mt-St*ga,Ye[2]=Nt*ma+Ut*ga+St*jt-Ot*Mt,Ye[3]=Ut*ma-St*Mt-Ot*jt-Nt*ga,Ye}function S(Ye,At){var xt=At[0],St=At[1],Ot=At[2],Nt=At[3],Ut=Math.sqrt(xt*xt+St*St+Ot*Ot),Mt=Math.exp(Nt),jt=Ut>0?Mt*Math.sin(Ut)/Ut:0;return Ye[0]=xt*jt,Ye[1]=St*jt,Ye[2]=Ot*jt,Ye[3]=Mt*Math.cos(Ut),Ye}function V(Ye,At){var xt=At[0],St=At[1],Ot=At[2],Nt=At[3],Ut=Math.sqrt(xt*xt+St*St+Ot*Ot),Mt=Ut>0?Math.atan2(Ut,Nt)/Ut:0;return Ye[0]=xt*Mt,Ye[1]=St*Mt,Ye[2]=Ot*Mt,Ye[3]=.5*Math.log(xt*xt+St*St+Ot*Ot+Nt*Nt),Ye}function I(Ye,At,xt,St){var Ot,Nt,Ut,Mt,jt,ga=At[0],ma=At[1],Ya=At[2],xa=At[3],Oa=xt[0],_a=xt[1],Ar=xt[2],$a=xt[3];return(Nt=ga*Oa+ma*_a+Ya*Ar+xa*$a)<0&&(Nt=-Nt,Oa=-Oa,_a=-_a,Ar=-Ar,$a=-$a),1-Nt>i.EPSILON?(Ot=Math.acos(Nt),Ut=Math.sin(Ot),Mt=Math.sin((1-St)*Ot)/Ut,jt=Math.sin(St*Ot)/Ut):(Mt=1-St,jt=St),Ye[0]=Mt*ga+jt*Oa,Ye[1]=Mt*ma+jt*_a,Ye[2]=Mt*Ya+jt*Ar,Ye[3]=Mt*xa+jt*$a,Ye}function O(Ye,At){var xt,St=At[0]+At[4]+At[8];if(St>0)xt=Math.sqrt(St+1),Ye[3]=.5*xt,Ye[0]=(At[5]-At[7])*(xt=.5/xt),Ye[1]=(At[6]-At[2])*xt,Ye[2]=(At[1]-At[3])*xt;else{var Ot=0;At[4]>At[0]&&(Ot=1),At[8]>At[3*Ot+Ot]&&(Ot=2);var Nt=(Ot+1)%3,Ut=(Ot+2)%3;xt=Math.sqrt(At[3*Ot+Ot]-At[3*Nt+Nt]-At[3*Ut+Ut]+1),Ye[Ot]=.5*xt,Ye[3]=(At[3*Nt+Ut]-At[3*Ut+Nt])*(xt=.5/xt),Ye[Nt]=(At[3*Nt+Ot]+At[3*Ot+Nt])*xt,Ye[Ut]=(At[3*Ut+Ot]+At[3*Ot+Ut])*xt}return Ye}De.clone=y.clone,De.fromValues=y.fromValues,De.copy=y.copy,De.set=y.set,De.add=y.add,De.mul=D;var M=y.scale;De.scale=M;var B=y.dot;De.dot=B,De.lerp=y.lerp;var X=y.length;De.length=X,De.len=X;var ee=y.squaredLength;De.squaredLength=ee,De.sqrLen=ee;var ue=y.normalize;De.normalize=ue,De.exactEquals=y.exactEquals,De.equals=y.equals;var le,re,pe,we=(le=f.create(),re=f.fromValues(1,0,0),pe=f.fromValues(0,1,0),function(Ye,At,xt){var St=f.dot(At,xt);return St<-.999999?(f.cross(le,re,At),f.len(le)<1e-6&&f.cross(le,pe,At),f.normalize(le,le),N(Ye,le,Math.PI),Ye):St>.999999?(Ye[0]=0,Ye[1]=0,Ye[2]=0,Ye[3]=1,Ye):(f.cross(le,At,xt),Ye[0]=le[0],Ye[1]=le[1],Ye[2]=le[2],Ye[3]=1+St,ue(Ye,Ye))});De.rotationTo=we;var Pe,We,je=(Pe=b(),We=b(),function(Ye,At,xt,St,Ot,Nt){return I(Pe,At,Ot,Nt),I(We,xt,St,Nt),I(Ye,Pe,We,2*Nt*(1-Nt)),Ye});De.sqlerp=je;var Ze,mt=(Ze=u.create(),function(Ye,At,xt,St){return Ze[0]=xt[0],Ze[3]=xt[1],Ze[6]=xt[2],Ze[1]=St[0],Ze[4]=St[1],Ze[7]=St[2],Ze[2]=-At[0],Ze[5]=-At[1],Ze[8]=-At[2],ue(Ye,O(Ye,Ze))});return De.setAxes=mt,De}var ke,tt={};function Ue(){if(ke)return tt;function d(I){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},d(I)}ke=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.create=function(){var I=new i.ARRAY_TYPE(8);return i.ARRAY_TYPE!=Float32Array&&(I[0]=0,I[1]=0,I[2]=0,I[4]=0,I[5]=0,I[6]=0,I[7]=0),I[3]=1,I},tt.clone=function(I){var O=new i.ARRAY_TYPE(8);return O[0]=I[0],O[1]=I[1],O[2]=I[2],O[3]=I[3],O[4]=I[4],O[5]=I[5],O[6]=I[6],O[7]=I[7],O},tt.fromValues=function(I,O,M,B,X,ee,ue,le){var re=new i.ARRAY_TYPE(8);return re[0]=I,re[1]=O,re[2]=M,re[3]=B,re[4]=X,re[5]=ee,re[6]=ue,re[7]=le,re},tt.fromRotationTranslationValues=function(I,O,M,B,X,ee,ue){var le=new i.ARRAY_TYPE(8);le[0]=I,le[1]=O,le[2]=M,le[3]=B;var re=.5*X,pe=.5*ee,we=.5*ue;return le[4]=re*B+pe*M-we*O,le[5]=pe*B+we*I-re*M,le[6]=we*B+re*O-pe*I,le[7]=-re*I-pe*O-we*M,le},tt.fromRotationTranslation=_,tt.fromTranslation=function(I,O){return I[0]=0,I[1]=0,I[2]=0,I[3]=1,I[4]=.5*O[0],I[5]=.5*O[1],I[6]=.5*O[2],I[7]=0,I},tt.fromRotation=function(I,O){return I[0]=O[0],I[1]=O[1],I[2]=O[2],I[3]=O[3],I[4]=0,I[5]=0,I[6]=0,I[7]=0,I},tt.fromMat4=function(I,O){var M=u.create();f.getRotation(M,O);var B=new i.ARRAY_TYPE(3);return f.getTranslation(B,O),_(I,M,B),I},tt.copy=b,tt.identity=function(I){return I[0]=0,I[1]=0,I[2]=0,I[3]=1,I[4]=0,I[5]=0,I[6]=0,I[7]=0,I},tt.set=function(I,O,M,B,X,ee,ue,le,re){return I[0]=O,I[1]=M,I[2]=B,I[3]=X,I[4]=ee,I[5]=ue,I[6]=le,I[7]=re,I},tt.getDual=function(I,O){return I[0]=O[4],I[1]=O[5],I[2]=O[6],I[3]=O[7],I},tt.setDual=function(I,O){return I[4]=O[0],I[5]=O[1],I[6]=O[2],I[7]=O[3],I},tt.getTranslation=function(I,O){var M=O[4],B=O[5],X=O[6],ee=O[7],ue=-O[0],le=-O[1],re=-O[2],pe=O[3];return I[0]=2*(M*pe+ee*ue+B*re-X*le),I[1]=2*(B*pe+ee*le+X*ue-M*re),I[2]=2*(X*pe+ee*re+M*le-B*ue),I},tt.translate=function(I,O,M){var B=O[0],X=O[1],ee=O[2],ue=O[3],le=.5*M[0],re=.5*M[1],pe=.5*M[2],we=O[4],Pe=O[5],We=O[6],je=O[7];return I[0]=B,I[1]=X,I[2]=ee,I[3]=ue,I[4]=ue*le+X*pe-ee*re+we,I[5]=ue*re+ee*le-B*pe+Pe,I[6]=ue*pe+B*re-X*le+We,I[7]=-B*le-X*re-ee*pe+je,I},tt.rotateX=function(I,O,M){var B=-O[0],X=-O[1],ee=-O[2],ue=O[3],le=O[4],re=O[5],pe=O[6],we=O[7],Pe=le*ue+we*B+re*ee-pe*X,We=re*ue+we*X+pe*B-le*ee,je=pe*ue+we*ee+le*X-re*B,Ze=we*ue-le*B-re*X-pe*ee;return u.rotateX(I,O,M),I[4]=Pe*(ue=I[3])+Ze*(B=I[0])+We*(ee=I[2])-je*(X=I[1]),I[5]=We*ue+Ze*X+je*B-Pe*ee,I[6]=je*ue+Ze*ee+Pe*X-We*B,I[7]=Ze*ue-Pe*B-We*X-je*ee,I},tt.rotateY=function(I,O,M){var B=-O[0],X=-O[1],ee=-O[2],ue=O[3],le=O[4],re=O[5],pe=O[6],we=O[7],Pe=le*ue+we*B+re*ee-pe*X,We=re*ue+we*X+pe*B-le*ee,je=pe*ue+we*ee+le*X-re*B,Ze=we*ue-le*B-re*X-pe*ee;return u.rotateY(I,O,M),I[4]=Pe*(ue=I[3])+Ze*(B=I[0])+We*(ee=I[2])-je*(X=I[1]),I[5]=We*ue+Ze*X+je*B-Pe*ee,I[6]=je*ue+Ze*ee+Pe*X-We*B,I[7]=Ze*ue-Pe*B-We*X-je*ee,I},tt.rotateZ=function(I,O,M){var B=-O[0],X=-O[1],ee=-O[2],ue=O[3],le=O[4],re=O[5],pe=O[6],we=O[7],Pe=le*ue+we*B+re*ee-pe*X,We=re*ue+we*X+pe*B-le*ee,je=pe*ue+we*ee+le*X-re*B,Ze=we*ue-le*B-re*X-pe*ee;return u.rotateZ(I,O,M),I[4]=Pe*(ue=I[3])+Ze*(B=I[0])+We*(ee=I[2])-je*(X=I[1]),I[5]=We*ue+Ze*X+je*B-Pe*ee,I[6]=je*ue+Ze*ee+Pe*X-We*B,I[7]=Ze*ue-Pe*B-We*X-je*ee,I},tt.rotateByQuatAppend=function(I,O,M){var B=M[0],X=M[1],ee=M[2],ue=M[3],le=O[0],re=O[1],pe=O[2],we=O[3];return I[0]=le*ue+we*B+re*ee-pe*X,I[1]=re*ue+we*X+pe*B-le*ee,I[2]=pe*ue+we*ee+le*X-re*B,I[3]=we*ue-le*B-re*X-pe*ee,I[4]=(le=O[4])*ue+(we=O[7])*B+(re=O[5])*ee-(pe=O[6])*X,I[5]=re*ue+we*X+pe*B-le*ee,I[6]=pe*ue+we*ee+le*X-re*B,I[7]=we*ue-le*B-re*X-pe*ee,I},tt.rotateByQuatPrepend=function(I,O,M){var B=O[0],X=O[1],ee=O[2],ue=O[3],le=M[0],re=M[1],pe=M[2],we=M[3];return I[0]=B*we+ue*le+X*pe-ee*re,I[1]=X*we+ue*re+ee*le-B*pe,I[2]=ee*we+ue*pe+B*re-X*le,I[3]=ue*we-B*le-X*re-ee*pe,I[4]=B*(we=M[7])+ue*(le=M[4])+X*(pe=M[6])-ee*(re=M[5]),I[5]=X*we+ue*re+ee*le-B*pe,I[6]=ee*we+ue*pe+B*re-X*le,I[7]=ue*we-B*le-X*re-ee*pe,I},tt.rotateAroundAxis=function(I,O,M,B){if(Math.abs(B)<i.EPSILON)return b(I,O);var X=Math.hypot(M[0],M[1],M[2]);B*=.5;var ee=Math.sin(B),ue=ee*M[0]/X,le=ee*M[1]/X,re=ee*M[2]/X,pe=Math.cos(B),we=O[0],Pe=O[1],We=O[2],je=O[3];I[0]=we*pe+je*ue+Pe*re-We*le,I[1]=Pe*pe+je*le+We*ue-we*re,I[2]=We*pe+je*re+we*le-Pe*ue,I[3]=je*pe-we*ue-Pe*le-We*re;var Ze=O[4],mt=O[5],Ye=O[6],At=O[7];return I[4]=Ze*pe+At*ue+mt*re-Ye*le,I[5]=mt*pe+At*le+Ye*ue-Ze*re,I[6]=Ye*pe+At*re+Ze*le-mt*ue,I[7]=At*pe-Ze*ue-mt*le-Ye*re,I},tt.add=function(I,O,M){return I[0]=O[0]+M[0],I[1]=O[1]+M[1],I[2]=O[2]+M[2],I[3]=O[3]+M[3],I[4]=O[4]+M[4],I[5]=O[5]+M[5],I[6]=O[6]+M[6],I[7]=O[7]+M[7],I},tt.multiply=N,tt.scale=function(I,O,M){return I[0]=O[0]*M,I[1]=O[1]*M,I[2]=O[2]*M,I[3]=O[3]*M,I[4]=O[4]*M,I[5]=O[5]*M,I[6]=O[6]*M,I[7]=O[7]*M,I},tt.lerp=function(I,O,M,B){var X=1-B;return D(O,M)<0&&(B=-B),I[0]=O[0]*X+M[0]*B,I[1]=O[1]*X+M[1]*B,I[2]=O[2]*X+M[2]*B,I[3]=O[3]*X+M[3]*B,I[4]=O[4]*X+M[4]*B,I[5]=O[5]*X+M[5]*B,I[6]=O[6]*X+M[6]*B,I[7]=O[7]*X+M[7]*B,I},tt.invert=function(I,O){var M=V(O);return I[0]=-O[0]/M,I[1]=-O[1]/M,I[2]=-O[2]/M,I[3]=O[3]/M,I[4]=-O[4]/M,I[5]=-O[5]/M,I[6]=-O[6]/M,I[7]=O[7]/M,I},tt.conjugate=function(I,O){return I[0]=-O[0],I[1]=-O[1],I[2]=-O[2],I[3]=O[3],I[4]=-O[4],I[5]=-O[5],I[6]=-O[6],I[7]=O[7],I},tt.normalize=function(I,O){var M=V(O);if(M>0){M=Math.sqrt(M);var B=O[0]/M,X=O[1]/M,ee=O[2]/M,ue=O[3]/M,le=O[4],re=O[5],pe=O[6],we=O[7],Pe=B*le+X*re+ee*pe+ue*we;I[0]=B,I[1]=X,I[2]=ee,I[3]=ue,I[4]=(le-B*Pe)/M,I[5]=(re-X*Pe)/M,I[6]=(pe-ee*Pe)/M,I[7]=(we-ue*Pe)/M}return I},tt.str=function(I){return"quat2("+I[0]+", "+I[1]+", "+I[2]+", "+I[3]+", "+I[4]+", "+I[5]+", "+I[6]+", "+I[7]+")"},tt.exactEquals=function(I,O){return I[0]===O[0]&&I[1]===O[1]&&I[2]===O[2]&&I[3]===O[3]&&I[4]===O[4]&&I[5]===O[5]&&I[6]===O[6]&&I[7]===O[7]},tt.equals=function(I,O){var M=I[0],B=I[1],X=I[2],ee=I[3],ue=I[4],le=I[5],re=I[6],pe=I[7],we=O[0],Pe=O[1],We=O[2],je=O[3],Ze=O[4],mt=O[5],Ye=O[6],At=O[7];return Math.abs(M-we)<=i.EPSILON*Math.max(1,Math.abs(M),Math.abs(we))&&Math.abs(B-Pe)<=i.EPSILON*Math.max(1,Math.abs(B),Math.abs(Pe))&&Math.abs(X-We)<=i.EPSILON*Math.max(1,Math.abs(X),Math.abs(We))&&Math.abs(ee-je)<=i.EPSILON*Math.max(1,Math.abs(ee),Math.abs(je))&&Math.abs(ue-Ze)<=i.EPSILON*Math.max(1,Math.abs(ue),Math.abs(Ze))&&Math.abs(le-mt)<=i.EPSILON*Math.max(1,Math.abs(le),Math.abs(mt))&&Math.abs(re-Ye)<=i.EPSILON*Math.max(1,Math.abs(re),Math.abs(Ye))&&Math.abs(pe-At)<=i.EPSILON*Math.max(1,Math.abs(pe),Math.abs(At))},tt.sqrLen=tt.squaredLength=tt.len=tt.length=tt.dot=tt.mul=tt.setReal=tt.getReal=void 0;var i=m(k()),u=m(qe()),f=m(Re());function y(I){if(typeof WeakMap!="function")return null;var O=new WeakMap,M=new WeakMap;return(y=function(B){return B?M:O})(I)}function m(I,O){if(I&&I.__esModule)return I;if(I===null||d(I)!=="object"&&typeof I!="function")return{default:I};var M=y(O);if(M&&M.has(I))return M.get(I);var B={},X=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ee in I)if(ee!=="default"&&Object.prototype.hasOwnProperty.call(I,ee)){var ue=X?Object.getOwnPropertyDescriptor(I,ee):null;ue&&(ue.get||ue.set)?Object.defineProperty(B,ee,ue):B[ee]=I[ee]}return B.default=I,M&&M.set(I,B),B}function _(I,O,M){var B=.5*M[0],X=.5*M[1],ee=.5*M[2],ue=O[0],le=O[1],re=O[2],pe=O[3];return I[0]=ue,I[1]=le,I[2]=re,I[3]=pe,I[4]=B*pe+X*re-ee*le,I[5]=X*pe+ee*ue-B*re,I[6]=ee*pe+B*le-X*ue,I[7]=-B*ue-X*le-ee*re,I}function b(I,O){return I[0]=O[0],I[1]=O[1],I[2]=O[2],I[3]=O[3],I[4]=O[4],I[5]=O[5],I[6]=O[6],I[7]=O[7],I}function N(I,O,M){var B=O[0],X=O[1],ee=O[2],ue=O[3],le=M[4],re=M[5],pe=M[6],we=M[7],Pe=O[4],We=O[5],je=O[6],Ze=O[7],mt=M[0],Ye=M[1],At=M[2],xt=M[3];return I[0]=B*xt+ue*mt+X*At-ee*Ye,I[1]=X*xt+ue*Ye+ee*mt-B*At,I[2]=ee*xt+ue*At+B*Ye-X*mt,I[3]=ue*xt-B*mt-X*Ye-ee*At,I[4]=B*we+ue*le+X*pe-ee*re+Pe*xt+Ze*mt+We*At-je*Ye,I[5]=X*we+ue*re+ee*le-B*pe+We*xt+Ze*Ye+je*mt-Pe*At,I[6]=ee*we+ue*pe+B*re-X*le+je*xt+Ze*At+Pe*Ye-We*mt,I[7]=ue*we-B*le-X*re-ee*pe+Ze*xt-Pe*mt-We*Ye-je*At,I}tt.getReal=u.copy,tt.setReal=u.copy,tt.mul=N;var D=u.dot;tt.dot=D;var S=u.length;tt.length=S,tt.len=S;var V=u.squaredLength;return tt.squaredLength=V,tt.sqrLen=V,tt}var He,Ce,Se={};function $e(){if(He)return Se;function d(O){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},d(O)}He=1,Object.defineProperty(Se,"__esModule",{value:!0}),Se.create=f,Se.clone=function(O){var M=new i.ARRAY_TYPE(2);return M[0]=O[0],M[1]=O[1],M},Se.fromValues=function(O,M){var B=new i.ARRAY_TYPE(2);return B[0]=O,B[1]=M,B},Se.copy=function(O,M){return O[0]=M[0],O[1]=M[1],O},Se.set=function(O,M,B){return O[0]=M,O[1]=B,O},Se.add=function(O,M,B){return O[0]=M[0]+B[0],O[1]=M[1]+B[1],O},Se.subtract=y,Se.multiply=m,Se.divide=_,Se.ceil=function(O,M){return O[0]=Math.ceil(M[0]),O[1]=Math.ceil(M[1]),O},Se.floor=function(O,M){return O[0]=Math.floor(M[0]),O[1]=Math.floor(M[1]),O},Se.min=function(O,M,B){return O[0]=Math.min(M[0],B[0]),O[1]=Math.min(M[1],B[1]),O},Se.max=function(O,M,B){return O[0]=Math.max(M[0],B[0]),O[1]=Math.max(M[1],B[1]),O},Se.round=function(O,M){return O[0]=Math.round(M[0]),O[1]=Math.round(M[1]),O},Se.scale=function(O,M,B){return O[0]=M[0]*B,O[1]=M[1]*B,O},Se.scaleAndAdd=function(O,M,B,X){return O[0]=M[0]+B[0]*X,O[1]=M[1]+B[1]*X,O},Se.distance=b,Se.squaredDistance=N,Se.length=D,Se.squaredLength=S,Se.negate=function(O,M){return O[0]=-M[0],O[1]=-M[1],O},Se.inverse=function(O,M){return O[0]=1/M[0],O[1]=1/M[1],O},Se.normalize=function(O,M){var B=M[0],X=M[1],ee=B*B+X*X;return ee>0&&(ee=1/Math.sqrt(ee)),O[0]=M[0]*ee,O[1]=M[1]*ee,O},Se.dot=function(O,M){return O[0]*M[0]+O[1]*M[1]},Se.cross=function(O,M,B){var X=M[0]*B[1]-M[1]*B[0];return O[0]=O[1]=0,O[2]=X,O},Se.lerp=function(O,M,B,X){var ee=M[0],ue=M[1];return O[0]=ee+X*(B[0]-ee),O[1]=ue+X*(B[1]-ue),O},Se.random=function(O,M){M=M||1;var B=2*i.RANDOM()*Math.PI;return O[0]=Math.cos(B)*M,O[1]=Math.sin(B)*M,O},Se.transformMat2=function(O,M,B){var X=M[0],ee=M[1];return O[0]=B[0]*X+B[2]*ee,O[1]=B[1]*X+B[3]*ee,O},Se.transformMat2d=function(O,M,B){var X=M[0],ee=M[1];return O[0]=B[0]*X+B[2]*ee+B[4],O[1]=B[1]*X+B[3]*ee+B[5],O},Se.transformMat3=function(O,M,B){var X=M[0],ee=M[1];return O[0]=B[0]*X+B[3]*ee+B[6],O[1]=B[1]*X+B[4]*ee+B[7],O},Se.transformMat4=function(O,M,B){var X=M[0],ee=M[1];return O[0]=B[0]*X+B[4]*ee+B[12],O[1]=B[1]*X+B[5]*ee+B[13],O},Se.rotate=function(O,M,B,X){var ee=M[0]-B[0],ue=M[1]-B[1],le=Math.sin(X),re=Math.cos(X);return O[0]=ee*re-ue*le+B[0],O[1]=ee*le+ue*re+B[1],O},Se.angle=function(O,M){var B=O[0],X=O[1],ee=M[0],ue=M[1],le=Math.sqrt(B*B+X*X)*Math.sqrt(ee*ee+ue*ue);return Math.acos(Math.min(Math.max(le&&(B*ee+X*ue)/le,-1),1))},Se.zero=function(O){return O[0]=0,O[1]=0,O},Se.str=function(O){return"vec2("+O[0]+", "+O[1]+")"},Se.exactEquals=function(O,M){return O[0]===M[0]&&O[1]===M[1]},Se.equals=function(O,M){var B=O[0],X=O[1],ee=M[0],ue=M[1];return Math.abs(B-ee)<=i.EPSILON*Math.max(1,Math.abs(B),Math.abs(ee))&&Math.abs(X-ue)<=i.EPSILON*Math.max(1,Math.abs(X),Math.abs(ue))},Se.forEach=Se.sqrLen=Se.sqrDist=Se.dist=Se.div=Se.mul=Se.sub=Se.len=void 0;var i=function(O,M){if(O&&O.__esModule)return O;if(O===null||d(O)!=="object"&&typeof O!="function")return{default:O};var B=u(void 0);if(B&&B.has(O))return B.get(O);var X={},ee=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ue in O)if(ue!=="default"&&Object.prototype.hasOwnProperty.call(O,ue)){var le=ee?Object.getOwnPropertyDescriptor(O,ue):null;le&&(le.get||le.set)?Object.defineProperty(X,ue,le):X[ue]=O[ue]}return X.default=O,B&&B.set(O,X),X}(k());function u(O){if(typeof WeakMap!="function")return null;var M=new WeakMap,B=new WeakMap;return(u=function(X){return X?B:M})(O)}function f(){var O=new i.ARRAY_TYPE(2);return i.ARRAY_TYPE!=Float32Array&&(O[0]=0,O[1]=0),O}function y(O,M,B){return O[0]=M[0]-B[0],O[1]=M[1]-B[1],O}function m(O,M,B){return O[0]=M[0]*B[0],O[1]=M[1]*B[1],O}function _(O,M,B){return O[0]=M[0]/B[0],O[1]=M[1]/B[1],O}function b(O,M){return Math.hypot(M[0]-O[0],M[1]-O[1])}function N(O,M){var B=M[0]-O[0],X=M[1]-O[1];return B*B+X*X}function D(O){return Math.hypot(O[0],O[1])}function S(O){var M=O[0],B=O[1];return M*M+B*B}Se.len=D,Se.sub=y,Se.mul=m,Se.div=_,Se.dist=b,Se.sqrDist=N,Se.sqrLen=S;var V,I=(V=f(),function(O,M,B,X,ee,ue){var le,re;for(M||(M=2),B||(B=0),re=X?Math.min(X*M+B,O.length):O.length,le=B;le<re;le+=M)V[0]=O[le],V[1]=O[le+1],ee(V,V,ue),O[le]=V[0],O[le+1]=V[1];return O});return Se.forEach=I,Se}function ft(){if(Ce)return E;function d(O){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},d(O)}Ce=1,Object.defineProperty(E,"__esModule",{value:!0}),E.vec4=E.vec3=E.vec2=E.quat2=E.quat=E.mat4=E.mat3=E.mat2d=E.mat2=E.glMatrix=void 0;var i=I(k());E.glMatrix=i;var u=I(q());E.mat2=u;var f=I(ie());E.mat2d=f;var y=I(he());E.mat3=y;var m=I(Re());E.mat4=m;var _=I(qe());E.quat=_;var b=I(Ue());E.quat2=b;var N=I($e());E.vec2=N;var D=I(ye());E.vec3=D;var S=I(Ie());function V(O){if(typeof WeakMap!="function")return null;var M=new WeakMap,B=new WeakMap;return(V=function(X){return X?B:M})(O)}function I(O,M){if(O&&O.__esModule)return O;if(O===null||d(O)!=="object"&&typeof O!="function")return{default:O};var B=V(M);if(B&&B.has(O))return B.get(O);var X={},ee=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ue in O)if(ue!=="default"&&Object.prototype.hasOwnProperty.call(O,ue)){var le=ee?Object.getOwnPropertyDescriptor(O,ue):null;le&&(le.get||le.set)?Object.defineProperty(X,ue,le):X[ue]=O[ue]}return X.default=O,B&&B.set(O,X),X}return E.vec4=S,E}var Je,wt,it,ct,_e=ft(),Jt=function(){if(wt)return Je;function d(i,u,f,y){this.cx=3*i,this.bx=3*(f-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(y-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=u,this.p2x=f,this.p2y=y}return wt=1,Je=d,d.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,u){if(u===void 0&&(u=1e-6),i<0)return 0;if(i>1)return 1;for(var f=i,y=0;y<8;y++){var m=this.sampleCurveX(f)-i;if(Math.abs(m)<u)return f;var _=this.sampleCurveDerivativeX(f);if(Math.abs(_)<1e-6)break;f-=m/_}var b=0,N=1;for(f=i,y=0;y<20&&(m=this.sampleCurveX(f),!(Math.abs(m-i)<u));y++)i>m?b=f:N=f,f=.5*(N-b)+b;return f},solve:function(i,u){return this.sampleCurveY(this.solveCurveX(i,u))}},Je}(),Zt=w(Jt);function Pa(){if(ct)return it;function d(i,u){this.x=i,this.y=u}return ct=1,it=d,d.prototype={clone:function(){return new d(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,u){return this.clone()._rotateAround(i,u)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var u=i.x-this.x,f=i.y-this.y;return u*u+f*f},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,u){return Math.atan2(this.x*u-this.y*i,this.x*i+this.y*u)},_matMult:function(i){var u=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=u,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var u=Math.cos(i),f=Math.sin(i),y=f*this.x+u*this.y;return this.x=u*this.x-f*this.y,this.y=y,this},_rotateAround:function(i,u){var f=Math.cos(i),y=Math.sin(i),m=u.y+y*(this.x-u.x)+f*(this.y-u.y);return this.x=u.x+f*(this.x-u.x)-y*(this.y-u.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},d.convert=function(i){return i instanceof d?i:Array.isArray(i)?new d(i[0],i[1]):i},it}var Bt=w(Pa());function la(d,i){if(Array.isArray(d)){if(!Array.isArray(i)||d.length!==i.length)return!1;for(let u=0;u<d.length;u++)if(!la(d[u],i[u]))return!1;return!0}if(typeof d=="object"&&d!==null&&i!==null){if(typeof i!="object"||Object.keys(d).length!==Object.keys(i).length)return!1;for(const u in d)if(!la(d[u],i[u]))return!1;return!0}return d===i}const Rt=Math.PI/180,yr=180/Math.PI;function za(d){return d*Rt}function Va(d){return d*yr}const er=[[0,0],[1,0],[1,1],[0,1]];function cr(d){if(d<=0)return 0;if(d>=1)return 1;const i=d*d,u=i*d;return 4*(d<.5?u:3*(d-i)+u-.75)}function ur(d,i,u,f){const y=new Zt(d,i,u,f);return function(m){return y.solve(m)}}const Pr=ur(.25,.1,.25,1);function ka(d,i,u){return Math.min(u,Math.max(i,d))}function jr(d,i,u){return(u=ka((u-d)/(i-d),0,1))*u*(3-2*u)}function pn(d,i,u){const f=u-i,y=((d-i)%f+f)%f+i;return y===i?u:y}function Dn(d,i,u){if(!d.length)return u(null,[]);let f=d.length;const y=new Array(d.length);let m=null;d.forEach((_,b)=>{i(_,(N,D)=>{N&&(m=N),y[b]=D,--f==0&&u(m,y)})})}function Rn(d,...i){for(const u of i)for(const f in u)d[f]=u[f];return d}let va=1;function Wa(){return va++}function ca(d){return d<=1?1:Math.pow(2,Math.ceil(Math.log(d)/Math.LN2))}function Qa(d,i){d.forEach(u=>{i[u]&&(i[u]=i[u].bind(i))})}function gr(d,i,u){const f={};for(const y in d)f[y]=i.call(this,d[y],y,d);return f}function Zn(d,i,u){const f={};for(const y in d)i.call(this,d[y],y,d)&&(f[y]=d[y]);return f}function Mn(d){return Array.isArray(d)?d.map(Mn):typeof d=="object"&&d?gr(d,Mn):d}const mn={};function en(d){mn[d]||(typeof console<"u"&&console.warn(d),mn[d]=!0)}function Er(d,i,u){return(u.y-d.y)*(i.x-d.x)>(i.y-d.y)*(u.x-d.x)}function As(d){let i=0;for(let u,f,y=0,m=d.length,_=m-1;y<m;_=y++)u=d[y],f=d[_],i+=(f.x-u.x)*(u.y+f.y);return i}function Bi([d,i,u]){const f=za(i+90),y=za(u);return{x:d*Math.cos(f)*Math.sin(y),y:d*Math.sin(f)*Math.sin(y),z:d*Math.cos(y),azimuthal:i,polar:u}}function Qi(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Oo(d){const i={};if(d.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,f,y,m)=>{const _=y||m;return i[f]=!_||_.toLowerCase(),""}),i["max-age"]){const u=parseInt(i["max-age"],10);isNaN(u)?delete i["max-age"]:i["max-age"]=u}return i}let Ni=null;function fn(d,i){return[d[4*i],d[4*i+1],d[4*i+2],d[4*i+3]]}function ui(d,i,u,f){for(;i<u;){const y=i+u>>1;d[y]<f?i=y+1:u=y}return i}function Ec(d,i,u,f){for(;i<u;){const y=i+u>>1;d[y]<=f?i=y+1:u=y}return i}function Us(d){return d>0?1/(1.001-d):1+d}function Xt(d){return d>0?1-1/(1.001-d):-d}const xe={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!xe.API_URL)return null;try{const d=new URL(xe.API_URL);return d.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":d.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function Oe(d){return xe.API_URL_REGEX.test(d)}function rt(d){return xe.API_SPRITE_REGEX.test(d)}let _t,yt,bt,kt,Et,Ht;function $t(){return _t==null&&(_t=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),_t}const qt={now:()=>kt!==void 0?kt:performance.now(),setNow(d){kt=d},restoreNow(){kt=void 0},frame(d){const i=requestAnimationFrame(d);return{cancel:()=>cancelAnimationFrame(i)}},getImageData(d,i=0){const{width:u,height:f}=d;Et||(Et=document.createElement("canvas"));const y=Et.getContext("2d",{willReadFrequently:!0});if(!y)throw new Error("failed to create canvas 2d context");return(u>Et.width||f>Et.height)&&(Et.width=u,Et.height=f),y.clearRect(-i,-i,u+2*i,f+2*i),y.drawImage(d,0,0,u,f),y.getImageData(-i,-i,u+2*i,f+2*i)},resolveURL:d=>(yt||(yt=document.createElement("a")),yt.href=d,yt.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(bt==null&&(bt=window.matchMedia("(prefers-reduced-motion: reduce)")),bt.matches)},hasCanvasFingerprintNoise(){if(Ht!==void 0)return Ht;if(!$t())return Ht=!1,!1;const d=new OffscreenCanvas(85,1),i=d.getContext("2d",{willReadFrequently:!0});let u=0;for(let y=0;y<d.width;++y)i.fillStyle=`rgba(${u++},${u++},${u++}, 255)`,i.fillRect(y,0,1,1);const f=i.getImageData(0,0,d.width,d.height);u=0;for(let y=0;y<f.data.length;++y)if(y%4!=3&&u++!==f.data[y])return Ht=!0,!0;return Ht=!1,!1}};function Ra(d,i){const u=d.indexOf("?");if(u<0)return`${d}?${new URLSearchParams(i).toString()}`;const f=new URLSearchParams(d.slice(u));for(const y in i)f.set(y,i[y]);return`${d.slice(0,u)}?${f.toString()}`}function Ma(d,i={persistentParams:[]}){const u=d.indexOf("?");if(u<0)return d;const f=new URLSearchParams,y=new URLSearchParams(d.slice(u));for(const _ of i.persistentParams){const b=y.get(_);b&&f.set(_,b)}const m=f.toString();return`${d.slice(0,u)}${m.length>0?`?${m}`:""}`}const Ba="mapbox-tiles";let _r=500,Nr=50;const Vr=["language","worldview","jobid"];let Gr,zn;function Jn(){try{return caches}catch{}}function qr(){const d=Jn();d&&Gr==null&&(Gr=d.open(Ba))}let yn=1/0;const Hr={supported:!1,testSupport:function(d){!Gi&&Vi&&(_s?Do(d):In=d)}};let In,Vi,Gi=!1,_s=!1;const vs=typeof self<"u"?self:{};function Do(d){const i=d.createTexture();d.bindTexture(d.TEXTURE_2D,i);try{if(d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,Vi),d.isContextLost())return;Hr.supported=!0}catch{}d.deleteTexture(i),Gi=!0}vs.document&&(Vi=vs.document.createElement("img"),Vi.onload=function(){In&&Do(In),In=null,_s=!0},Vi.onerror=function(){Gi=!0,In=null},Vi.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const ws={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Iconset:"Iconset",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(ws);class ks extends Error{constructor(i,u,f){u===401&&Oe(f)&&(i+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(i),this.status=u,this.url=f}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const nc=Qi()?()=>self.worker&&self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,Yo=function(d,i){if(!(/^file:/.test(u=d.url)||/^file:/.test(nc())&&!/^\w+:/.test(u))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(f,y){const m=new AbortController,_=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,referrer:nc(),referrerPolicy:f.referrerPolicy,signal:m.signal});let b=!1,N=!1;const D=(S=_.url).indexOf("sku=")>0&&Oe(S);var S;f.type==="json"&&_.headers.set("Accept","application/json");const V=(O,M,B)=>{if(N)return;if(O&&O.message!=="SecurityError"&&en(O.toString()),M&&B)return I(M);const X=Date.now();fetch(_).then(ee=>{if(ee.ok){const ue=D?ee.clone():null;return I(ee,ue,X)}return y(new ks(ee.statusText,ee.status,f.url))}).catch(ee=>{ee.name!=="AbortError"&&y(new Error(`${ee.message} ${f.url}`))})},I=(O,M,B)=>{(f.type==="arrayBuffer"?O.arrayBuffer():f.type==="json"?O.json():O.text()).then(X=>{N||(M&&B&&function(ee,ue,le){if(qr(),Gr==null)return;const re=Oo(ue.headers.get("Cache-Control")||"");if(re["no-store"])return;const pe={status:ue.status,statusText:ue.statusText,headers:new Headers};ue.headers.forEach((We,je)=>pe.headers.set(je,We)),re["max-age"]&&pe.headers.set("Expires",new Date(le+1e3*re["max-age"]).toUTCString());const we=pe.headers.get("Expires");if(!we||new Date(we).getTime()-le<42e4)return;let Pe=Ma(ee.url,{persistentParams:Vr});if(ue.status===206){const We=ee.headers.get("Range");if(!We)return;pe.status=200,Pe=Ra(Pe,{range:We})}(function(We,je){if(zn===void 0)try{new Response(new ReadableStream),zn=!0}catch{zn=!1}zn?je(We.body):We.blob().then(je)})(ue,We=>{const je=new Response((Ze=ue.status)!==200&&Ze!==404&&[101,103,204,205,304].includes(Ze)?null:We,pe);var Ze;qr(),Gr!=null&&Gr.then(mt=>mt.put(Pe,je)).catch(mt=>en(mt.message))})}(_,M,B),b=!0,y(null,X,O.headers.get("Cache-Control"),O.headers.get("Expires")))}).catch(X=>{N||y(new Error(X.message))})};return D?function(O,M){if(qr(),Gr==null)return M(null);Gr.then(B=>{let X=Ma(O.url,{persistentParams:Vr});const ee=O.headers.get("Range");ee&&(X=Ra(X,{range:ee})),B.match(X).then(ue=>{const le=function(re){if(!re)return!1;const pe=new Date(re.headers.get("Expires")||0),we=Oo(re.headers.get("Cache-Control")||"");return pe>Date.now()&&!we["no-cache"]}(ue);B.delete(X),le&&B.put(X,ue.clone()),M(null,ue,le)}).catch(M)}).catch(M)}(_,V):V(null,null),{cancel:()=>{N=!0,b||m.abort()}}}(d,i);if(Qi()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",d,i,void 0,!0)}var u;return function(f,y){const m=new XMLHttpRequest;m.open(f.method||"GET",f.url,!0),f.type==="arrayBuffer"&&(m.responseType="arraybuffer");for(const _ in f.headers)m.setRequestHeader(_,f.headers[_]);return f.type==="json"&&(m.responseType="text",m.setRequestHeader("Accept","application/json")),m.withCredentials=f.credentials==="include",m.onerror=()=>{y(new Error(m.statusText))},m.onload=()=>{if((m.status>=200&&m.status<300||m.status===0)&&m.response!==null){let _=m.response;if(f.type==="json")try{_=JSON.parse(m.response)}catch(b){return y(b)}y(null,_,m.getResponseHeader("Cache-Control"),m.getResponseHeader("Expires"))}else y(new ks(m.statusText,m.status,f.url))},m.send(f.body),{cancel:()=>m.abort()}}(d,i)},zi=function(d,i){return Yo(Rn(d,{type:"arrayBuffer"}),i)};function Gl(d){const i=document.createElement("a");return i.href=d,i.protocol===location.protocol&&i.host===location.host}const Mo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let _d,Nc;_d=[],Nc=0;const ah=function(d,i){if(Hr.supported&&(d.headers||(d.headers={}),d.headers.accept="image/webp,*/*"),Nc>=xe.MAX_PARALLEL_IMAGE_REQUESTS){const m={requestParameters:d,callback:i,cancelled:!1,cancel(){this.cancelled=!0}};return _d.push(m),m}Nc++;let u=!1;const f=()=>{if(!u)for(u=!0,Nc--;_d.length&&Nc<xe.MAX_PARALLEL_IMAGE_REQUESTS;){const m=_d.shift(),{requestParameters:_,callback:b,cancelled:N}=m;N||(m.cancel=ah(_,b).cancel)}},y=zi(d,(m,_,b,N)=>{f(),m?i(m):_&&(self.createImageBitmap?function(D,S){const V=new Blob([new Uint8Array(D)],{type:"image/png"});createImageBitmap(V).then(I=>{S(null,I)}).catch(I=>{S(new Error(`Could not load image because of ${I.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(_,(D,S)=>i(D,S,b,N)):function(D,S){const V=new Image;V.onload=()=>{S(null,V),URL.revokeObjectURL(V.src),V.onload=null,requestAnimationFrame(()=>{V.src=Mo})},V.onerror=()=>S(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const I=new Blob([new Uint8Array(D)],{type:"image/png"});V.src=D.byteLength?URL.createObjectURL(I):Mo}(_,(D,S)=>i(D,S,b,N)))});return{cancel:()=>{y.cancel(),f()}}};var du,Vc,hl,Xs={exports:{}},Io={exports:{}},jl={exports:{}},hu=function(){if(hl)return Xs.exports;hl=1;var d=(du||(du=1,Io.exports=function(u,f){var y,m,_,b,N,D,S,V;for(m=u.length-(y=3&u.length),_=f,N=3432918353,D=461845907,V=0;V<m;)S=255&u.charCodeAt(V)|(255&u.charCodeAt(++V))<<8|(255&u.charCodeAt(++V))<<16|(255&u.charCodeAt(++V))<<24,++V,_=27492+(65535&(b=5*(65535&(_=(_^=S=(65535&(S=(S=(65535&S)*N+(((S>>>16)*N&65535)<<16)&4294967295)<<15|S>>>17))*D+(((S>>>16)*D&65535)<<16)&4294967295)<<13|_>>>19))+((5*(_>>>16)&65535)<<16)&4294967295))+((58964+(b>>>16)&65535)<<16);switch(S=0,y){case 3:S^=(255&u.charCodeAt(V+2))<<16;case 2:S^=(255&u.charCodeAt(V+1))<<8;case 1:_^=S=(65535&(S=(S=(65535&(S^=255&u.charCodeAt(V)))*N+(((S>>>16)*N&65535)<<16)&4294967295)<<15|S>>>17))*D+(((S>>>16)*D&65535)<<16)&4294967295}return _^=u.length,_=2246822507*(65535&(_^=_>>>16))+((2246822507*(_>>>16)&65535)<<16)&4294967295,_=3266489909*(65535&(_^=_>>>13))+((3266489909*(_>>>16)&65535)<<16)&4294967295,(_^=_>>>16)>>>0}),Io.exports),i=(Vc||(Vc=1,jl.exports=function(u,f){for(var y,m=u.length,_=f^m,b=0;m>=4;)y=1540483477*(65535&(y=255&u.charCodeAt(b)|(255&u.charCodeAt(++b))<<8|(255&u.charCodeAt(++b))<<16|(255&u.charCodeAt(++b))<<24))+((1540483477*(y>>>16)&65535)<<16),_=1540483477*(65535&_)+((1540483477*(_>>>16)&65535)<<16)^(y=1540483477*(65535&(y^=y>>>24))+((1540483477*(y>>>16)&65535)<<16)),m-=4,++b;switch(m){case 3:_^=(255&u.charCodeAt(b+2))<<16;case 2:_^=(255&u.charCodeAt(b+1))<<8;case 1:_=1540483477*(65535&(_^=255&u.charCodeAt(b)))+((1540483477*(_>>>16)&65535)<<16)}return _=1540483477*(65535&(_^=_>>>13))+((1540483477*(_>>>16)&65535)<<16),(_^=_>>>15)>>>0}),jl.exports);return Xs.exports=d,Xs.exports.murmur3=d,Xs.exports.murmur2=i,Xs.exports}(),oo=w(hu);class Lo{constructor(i,...u){Rn(this,u[0]||{}),this.type=i}}class vd extends Lo{constructor(i,u={}){super("error",Rn({error:i},u))}}function Fu(d,i,u){u[d]&&u[d].indexOf(i)!==-1||(u[d]=u[d]||[],u[d].push(i))}function df(d,i,u){if(u&&u[d]){const f=u[d].indexOf(i);f!==-1&&u[d].splice(f,1)}}class Zl{on(i,u){return this._listeners=this._listeners||{},Fu(i,u,this._listeners),this}off(i,u){return df(i,u,this._listeners),df(i,u,this._oneTimeListeners),this}once(i,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},Fu(i,u,this._oneTimeListeners),this):new Promise(f=>{this.once(i,f)})}fire(i,u){const f=typeof i=="string"?new Lo(i,u):i,y=f.type;if(this.listens(y)){f.target=this;const m=this._listeners&&this._listeners[y]?this._listeners[y].slice():[];for(const N of m)N.call(this,f);const _=this._oneTimeListeners&&this._oneTimeListeners[y]?this._oneTimeListeners[y].slice():[];for(const N of _)df(y,N,this._oneTimeListeners),N.call(this,f);const b=this._eventedParent;b&&(Rn(f,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),b.fire(f))}else f instanceof vd&&console.error(f.error);return this}listens(i){return!!(this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i))}setEventedParent(i,u){return this._eventedParent=i,this._eventedParentData=u,this}}class Fo{constructor(i){typeof i=="string"?this.name=i:(this.name=i.name,this.iconsetId=i.iconsetId)}static from(i){return new Fo(i)}static toString(i){return i.iconsetId?`${i.name}${i.iconsetId}`:i.name}static parse(i){const[u,f]=i.split("");return new Fo({name:u,iconsetId:f})}static isEqual(i,u){return i.name===u.name&&i.iconsetId===u.iconsetId}toString(){return Fo.toString(this)}serialize(){return{name:this.name,iconsetId:this.iconsetId}}}var Uu,rh={},Xo=function(){if(Uu)return rh;Uu=1;var d={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function i(m){return(m=Math.round(m))<0?0:m>255?255:m}function u(m){return i(m[m.length-1]==="%"?parseFloat(m)/100*255:parseInt(m))}function f(m){return(_=m[m.length-1]==="%"?parseFloat(m)/100:parseFloat(m))<0?0:_>1?1:_;var _}function y(m,_,b){return b<0?b+=1:b>1&&(b-=1),6*b<1?m+(_-m)*b*6:2*b<1?_:3*b<2?m+(_-m)*(2/3-b)*6:m}try{rh.parseCSSColor=function(m){var _,b=m.replace(/ /g,"").toLowerCase();if(b in d)return d[b].slice();if(b[0]==="#")return b.length===4?(_=parseInt(b.substr(1),16))>=0&&_<=4095?[(3840&_)>>4|(3840&_)>>8,240&_|(240&_)>>4,15&_|(15&_)<<4,1]:null:b.length===7&&(_=parseInt(b.substr(1),16))>=0&&_<=16777215?[(16711680&_)>>16,(65280&_)>>8,255&_,1]:null;var N=b.indexOf("("),D=b.indexOf(")");if(N!==-1&&D+1===b.length){var S=b.substr(0,N),V=b.substr(N+1,D-(N+1)).split(","),I=1;switch(S){case"rgba":if(V.length!==4)return null;I=f(V.pop());case"rgb":return V.length!==3?null:[u(V[0]),u(V[1]),u(V[2]),I];case"hsla":if(V.length!==4)return null;I=f(V.pop());case"hsl":if(V.length!==3)return null;var O=(parseFloat(V[0])%360+360)%360/360,M=f(V[1]),B=f(V[2]),X=B<=.5?B*(M+1):B+M-B*M,ee=2*B-X;return[i(255*y(ee,X,O+1/3)),i(255*y(ee,X,O)),i(255*y(ee,X,O-1/3)),I];default:return null}}return null}}catch{}return rh}();class bn{constructor(i,u,f,y=1){this.r=i,this.g=u,this.b=f,this.a=y}static parse(i){if(!i)return;if(i instanceof bn)return i;if(typeof i!="string")return;const u=Xo.parseCSSColor(i);return u?new bn(u[0]/255*u[3],u[1]/255*u[3],u[2]/255*u[3],u[3]):void 0}toStringPremultipliedAlpha(){const[i,u,f,y]=this.a===0?[0,0,0,0]:[255*this.r/this.a,255*this.g/this.a,255*this.b/this.a,this.a];return`rgba(${Math.round(i)},${Math.round(u)},${Math.round(f)},${y})`}toString(){const[i,u,f,y]=[this.r,this.g,this.b,this.a];return`rgba(${Math.round(255*i)},${Math.round(255*u)},${Math.round(255*f)},${y})`}toRenderColor(i){const{r:u,g:f,b:y,a:m}=this;return new lo(i,u,f,y,m)}clone(){return new bn(this.r,this.g,this.b,this.a)}}class lo{constructor(i,u,f,y,m){if(i){const _=i.image.height,b=_*_;u=m===0?0:u/m*(_-1),f=m===0?0:f/m*(_-1),y=m===0?0:y/m*(_-1);const N=Math.floor(u),D=Math.floor(f),S=Math.floor(y),V=Math.ceil(u),I=Math.ceil(f),O=Math.ceil(y),M=u-N,B=f-D,X=y-S,ee=i.image.data,ue=4*(N+D*b+S*_),le=4*(N+D*b+O*_),re=4*(N+I*b+S*_),pe=4*(N+I*b+O*_),we=4*(V+D*b+S*_),Pe=4*(V+D*b+O*_),We=4*(V+I*b+S*_),je=4*(V+I*b+O*_);if(ue<0||je>=ee.length)throw new Error("out of range");this.r=hr(hr(hr(ee[ue],ee[le],X),hr(ee[re],ee[pe],X),B),hr(hr(ee[we],ee[Pe],X),hr(ee[We],ee[je],X),B),M)/255*m,this.g=hr(hr(hr(ee[ue+1],ee[le+1],X),hr(ee[re+1],ee[pe+1],X),B),hr(hr(ee[we+1],ee[Pe+1],X),hr(ee[We+1],ee[je+1],X),B),M)/255*m,this.b=hr(hr(hr(ee[ue+2],ee[le+2],X),hr(ee[re+2],ee[pe+2],X),B),hr(hr(ee[we+2],ee[Pe+2],X),hr(ee[We+2],ee[je+2],X),B),M)/255*m,this.a=m}else this.r=u,this.g=f,this.b=y,this.a=m}toArray(){const{r:i,g:u,b:f,a:y}=this;return y===0?[0,0,0,0]:[255*i/y,255*u/y,255*f/y,y]}toHslaArray(){if(this.a===0)return[0,0,0,0];const{r:i,g:u,b:f,a:y}=this,m=Math.min(Math.max(i/y,0),1),_=Math.min(Math.max(u/y,0),1),b=Math.min(Math.max(f/y,0),1),N=Math.min(m,_,b),D=Math.max(m,_,b),S=(N+D)/2;if(N===D)return[0,0,100*S,y];const V=D-N,I=S>.5?V/(2-D-N):V/(D+N);let O=0;return D===m?O=(_-b)/V+(_<b?6:0):D===_?O=(b-m)/V+2:D===b&&(O=(m-_)/V+4),O*=60,[Math.min(Math.max(O,0),360),Math.min(Math.max(100*I,0),100),Math.min(Math.max(100*S,0),100),y]}toArray01(){const{r:i,g:u,b:f,a:y}=this;return y===0?[0,0,0,0]:[i/y,u/y,f/y,y]}toArray01Scaled(i){const{r:u,g:f,b:y,a:m}=this;return m===0?[0,0,0]:[u/m*i,f/m*i,y/m*i]}toArray01PremultipliedAlpha(){const{r:i,g:u,b:f,a:y}=this;return[i,u,f,y]}toArray01Linear(){const{r:i,g:u,b:f,a:y}=this;return y===0?[0,0,0,0]:[Math.pow(i/y,2.2),Math.pow(u/y,2.2),Math.pow(f/y,2.2),y]}}function hr(d,i,u){return d*(1-u)+i*u}function zc(d,i,u){return d.map((f,y)=>hr(f,i[y],u))}function gn(d){return d*d*d*d*d}bn.black=new bn(0,0,0,1),bn.white=new bn(1,1,1,1),bn.transparent=new bn(0,0,0,0),bn.red=new bn(1,0,0,1),bn.blue=new bn(0,0,1,1);var nh=Object.freeze({__proto__:null,array:zc,color:function(d,i,u){return new bn(hr(d.r,i.r,u),hr(d.g,i.g,u),hr(d.b,i.b,u),hr(d.a,i.a,u))},easeIn:gn,number:hr});function Tn(d,...i){for(const u of i)for(const f in u)d[f]=u[f];return d}class Bs extends Error{constructor(i,u){super(u),this.message=u,this.key=i}}class ic{constructor(i,u=[]){this.parent=i,this.bindings={};for(const[f,y]of u)this.bindings[f]=y}concat(i){return new ic(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}const sc={kind:"null"},Xa={kind:"number"},an={kind:"string"},An={kind:"boolean"},Gs={kind:"color"},wd={kind:"object"},un={kind:"value"},Uo={kind:"collator"},fu={kind:"formatted"},Rs={kind:"resolvedImage"};function Li(d,i){return{kind:"array",itemType:d,N:i}}function bi(d){if(d.kind==="array"){const i=bi(d.itemType);return typeof d.N=="number"?`array<${i}, ${d.N}>`:d.itemType.kind==="value"?"array":`array<${i}>`}return d.kind}const uo=[sc,Xa,an,An,Gs,fu,wd,Li(un),Rs];function Rd(d,i){if(i.kind==="error")return null;if(d.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!Rd(d.itemType,i.itemType))&&(typeof d.N!="number"||d.N===i.N))return null}else{if(d.kind===i.kind)return null;if(d.kind==="value"){for(const u of uo)if(!Rd(u,i))return null}}return`Expected ${bi(d)} but found ${bi(i)} instead.`}function ih(d,i){return i.some(u=>u.kind===d.kind)}function oc(d,i){return i.some(u=>u==="null"?d===null:u==="array"?Array.isArray(d):u==="object"?d&&!Array.isArray(d)&&typeof d=="object":u===typeof d)}class lc{constructor(i,u,f){this.sensitivity=i?u?"variant":"case":u?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,u){return this.collator.compare(i,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Jo{constructor(i,u,f,y,m){this.text=i.normalize?i.normalize():i,this.image=u,this.scale=f,this.fontStack=y,this.textColor=m}}class us{constructor(i){this.sections=i}static fromString(i){return new us([new Jo(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||!!i.image&&i.image.hasPrimary())}static factory(i){return i instanceof us?i:us.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}serialize(){const i=["format"];for(const u of this.sections){if(u.image){const y=u.image.getPrimary().id.toString();i.push(["image",y]);continue}i.push(u.text);const f={};u.fontStack&&(f["text-font"]=["literal",u.fontStack.split(",")]),u.scale&&(f["font-scale"]=u.scale),u.textColor&&(f["text-color"]=["rgba"].concat(u.textColor.toRenderColor(null).toArray())),i.push(f)}return i}}class ku{constructor(i,u={}){if(this.id=Fo.from(i),this.options=Object.assign({},u),u.transform){const{a:f,b:y,c:m,d:_,e:b,f:N}=u.transform;this.options.transform=new DOMMatrix([f,y,m,_,b,N])}else this.options.transform=new DOMMatrix([1,0,0,1,0,0])}toString(){const{a:i,b:u,c:f,d:y,e:m,f:_}=this.options.transform;return JSON.stringify({name:this.id.name,iconsetId:this.id.iconsetId,params:this.options.params,transform:{a:i,b:u,c:f,d:y,e:m,f:_}})}static parse(i){let u,f,y,m;try{({name:u,iconsetId:f,params:y,transform:m}=JSON.parse(i)||{})}catch{return null}if(!u)return null;const{a:_,b,c:N,d:D,e:S,f:V}=m||{};return new ku({name:u,iconsetId:f},{params:y,transform:new DOMMatrix([_,b,N,D,S,V])})}scaleSelf(i){return this.options.transform.scaleSelf(i),this}}class Ts{constructor(i,u,f,y,m=!1){this.primaryId=Fo.from(i),this.primaryOptions=u,f&&(this.secondaryId=Fo.from(f)),this.secondaryOptions=y,this.available=m}toString(){return this.primaryId&&this.secondaryId?`[${this.primaryId.name},${this.secondaryId.name}]`:this.primaryId.name}hasPrimary(){return!!this.primaryId}getPrimary(){return new ku(this.primaryId,this.primaryOptions)}hasSecondary(){return!!this.secondaryId}getSecondary(){return this.secondaryId?new ku(this.secondaryId,this.secondaryOptions):null}static from(i){return typeof i=="string"?Ts.build({name:i}):i}static build(i,u,f,y){return!i||typeof i=="object"&&!("name"in i)?null:new Ts(i,f,u,y)}}function Cl(d,i,u,f){return typeof d=="number"&&d>=0&&d<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof u=="number"&&u>=0&&u<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[d,i,u,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[d,i,u,f]:[d,i,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Qo(d){if(d===null||typeof d=="string"||typeof d=="boolean"||typeof d=="number"||d instanceof bn||d instanceof lc||d instanceof us||d instanceof Ts)return!0;if(Array.isArray(d)){for(const i of d)if(!Qo(i))return!1;return!0}if(typeof d=="object"){for(const i in d)if(!Qo(d[i]))return!1;return!0}return!1}function ji(d){if(d===null)return sc;if(typeof d=="string")return an;if(typeof d=="boolean")return An;if(typeof d=="number")return Xa;if(d instanceof bn)return Gs;if(d instanceof lc)return Uo;if(d instanceof us)return fu;if(d instanceof Ts)return Rs;if(Array.isArray(d)){const i=d.length;let u;for(const f of d){const y=ji(f);if(u){if(u===y)continue;u=un;break}u=y}return Li(u||un,i)}return wd}function js(d){const i=typeof d;return d===null?"":i==="string"||i==="number"||i==="boolean"?String(d):d instanceof bn?d.toStringPremultipliedAlpha():d instanceof us||d instanceof Ts?d.toString():JSON.stringify(d)}class ql{constructor(i,u){this.type=i,this.value=u}static parse(i,u){if(i.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!Qo(i[1]))return u.error("invalid value");const f=i[1];let y=ji(f);const m=u.expectedType;return y.kind!=="array"||y.N!==0||!m||m.kind!=="array"||typeof m.N=="number"&&m.N!==0||(y=m),new ql(y,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof bn?["rgba"].concat(this.value.toRenderColor(null).toArray()):this.value instanceof us?this.value.serialize():this.value}}class ns{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}}const Vh={string:an,number:Xa,boolean:An,object:wd};class ko{constructor(i,u){this.type=i,this.args=u}static parse(i,u){if(i.length<2)return u.error("Expected at least one argument.");let f,y=1;const m=i[0];if(m==="array"){let b,N;if(i.length>2){const D=i[1];if(typeof D!="string"||!(D in Vh)||D==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);b=Vh[D],y++}else b=un;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return u.error('The length argument to "array" must be a positive integer literal',2);N=i[2],y++}f=Li(b,N)}else f=Vh[m];const _=[];for(;y<i.length;y++){const b=u.parse(i[y],y,un);if(!b)return null;_.push(b)}return new ko(f,_)}evaluate(i){for(let u=0;u<this.args.length;u++){const f=this.args[u].evaluate(i);if(!Rd(this.type,ji(f)))return f;if(u===this.args.length-1)throw new ns(`The expression ${JSON.stringify(this.args[u].serialize())} evaluated to ${bi(ji(f))} but was expected to be of type ${bi(this.type)}.`)}return null}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=this.type,u=[i.kind];if(i.kind==="array"){const f=i.itemType;if(f.kind==="string"||f.kind==="number"||f.kind==="boolean"){u.push(f.kind);const y=i.N;(typeof y=="number"||this.args.length>1)&&u.push(y)}}return u.concat(this.args.map(f=>f.serialize()))}}class Td{constructor(i){this.type=fu,this.sections=i}static parse(i,u){if(i.length<2)return u.error("Expected at least one argument.");const f=i[1];if(!Array.isArray(f)&&typeof f=="object")return u.error("First argument must be an image or text section.");const y=[];let m=!1;for(let _=1;_<=i.length-1;++_){const b=i[_];if(m&&typeof b=="object"&&!Array.isArray(b)){m=!1;let N=null;if(b["font-scale"]&&(N=u.parseObjectValue(b["font-scale"],_,"font-scale",Xa),!N))return null;let D=null;if(b["text-font"]&&(D=u.parseObjectValue(b["text-font"],_,"text-font",Li(an)),!D))return null;let S=null;if(b["text-color"]&&(S=u.parseObjectValue(b["text-color"],_,"text-color",Gs),!S))return null;const V=y[y.length-1];V.scale=N,V.font=D,V.textColor=S}else{const N=u.parse(i[_],_,un);if(!N)return null;const D=N.type.kind;if(D!=="string"&&D!=="value"&&D!=="null"&&D!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,y.push({content:N,scale:null,font:null,textColor:null})}}return new Td(y)}evaluate(i){return new us(this.sections.map(u=>{const f=u.content.evaluate(i);return ji(f)===Rs?new Jo("",f,null,null,null):new Jo(js(f),null,u.scale?u.scale.evaluate(i):null,u.font?u.font.evaluate(i).join(","):null,u.textColor?u.textColor.evaluate(i):null)}))}eachChild(i){for(const u of this.sections)i(u.content),u.scale&&i(u.scale),u.font&&i(u.font),u.textColor&&i(u.textColor)}outputDefined(){return!1}serialize(){const i=["format"];for(const u of this.sections){i.push(u.content.serialize());const f={};u.scale&&(f["font-scale"]=u.scale.serialize()),u.font&&(f["text-font"]=u.font.serialize()),u.textColor&&(f["text-color"]=u.textColor.serialize()),i.push(f)}return i}}class pu{constructor(i,u,f,y){this._imageWarnHistory={},this.type=Rs,this.namePrimary=i,this.nameSecondary=u,f&&(this.paramsPrimary=f.params,this.iconsetIdPrimary=f.iconset?f.iconset.id:void 0),y&&(this.paramsSecondary=y.params,this.iconsetIdSecondary=y.iconset?y.iconset.id:void 0)}static parse(i,u){if(i.length<2)return u.error("Expected two or more arguments.");let f=1;const y=[];function m(){if(f<i.length){const b=u.parse(i[f],f++,an);return b?(y.push({image:b,options:{}}),!0):(u.error(y.length?"Secondary image variant is not a string.":"No image name provided."),!1)}return!0}function _(){if(f<i.length){const N=i[f];if((b=N)===null||typeof b!="object"||Array.isArray(b))return!0;const D=N.params,S=N.iconset,V=u.concat(f);if(!D&&!S)return f++,!0;if(D){if(typeof D!="object"||D.constructor!==Object)return V.error('Image options "params" should be an object'),!1;const I={},O=V.concat(void 0,"params");for(const M in D){if(!M)return O.error("Image parameter name should be non-empty"),!1;const B=O.concat(void 0,M).parse(D[M],void 0,Gs,void 0,{typeAnnotation:"coerce"});if(!B)return!1;I[M]=B}y[y.length-1].options.params=I}if(S){if(typeof S!="object"||S.constructor!==Object)return V.error('Image options "iconset" should be an object'),!1;if(!S.id)return V.error('Image options "iconset" should have an "id" property'),!1;y[y.length-1].options.iconset=S}return f++,!0}var b;return!0}for(let b=0;b<2;b++)if(!m()||!_())return;return new pu(y[0].image,y[1]?y[1].image:void 0,y[0].options,y[1]?y[1].options:void 0)}evaluateParams(i,u){const f={};if(u){for(const y in u)if(u[y])try{f[y]=u[y].evaluate(i)}catch{continue}if(Object.keys(f).length!==0)return{params:f}}}evaluate(i){const u={name:this.namePrimary.evaluate(i),iconsetId:this.iconsetIdPrimary},f=this.nameSecondary?{name:this.nameSecondary.evaluate(i),iconsetId:this.iconsetIdSecondary}:void 0,y=Ts.build(u,f,this.paramsPrimary?this.evaluateParams(i,this.paramsPrimary):void 0,this.paramsSecondary?this.evaluateParams(i,this.paramsSecondary):void 0);if(y&&i.availableImages){const m=y.getPrimary().id;if(y.available=i.availableImages.some(_=>Fo.isEqual(_,m)),y.available){const _=y.getSecondary()?y.getSecondary().id:null;_&&(y.available=i.availableImages.some(b=>Fo.isEqual(b,_)))}}return y}eachChild(i){if(i(this.namePrimary),this.paramsPrimary)for(const u in this.paramsPrimary)this.paramsPrimary[u]&&i(this.paramsPrimary[u]);if(this.nameSecondary&&(i(this.nameSecondary),this.paramsSecondary))for(const u in this.paramsSecondary)this.paramsSecondary[u]&&i(this.paramsSecondary[u])}outputDefined(){return!1}serializeOptions(i,u){const f={};if(u&&(f.iconset={id:u}),i){f.params={};for(const y in i)i[y]&&(f.params[y]=i[y].serialize())}return Object.keys(f).length>0?f:void 0}serialize(){const i=["image",this.namePrimary.serialize()];if(this.paramsPrimary||this.iconsetIdPrimary){const u=this.serializeOptions(this.paramsPrimary,this.iconsetIdPrimary);u&&i.push(u)}if(this.nameSecondary&&(i.push(this.nameSecondary.serialize()),this.paramsSecondary||this.iconsetIdSecondary)){const u=this.serializeOptions(this.paramsSecondary,this.iconsetIdSecondary);u&&i.push(u)}return i}}function mu(d){return d instanceof Number?"number":d instanceof String?"string":d instanceof Boolean?"boolean":Array.isArray(d)?"array":d===null?"null":typeof d}const Hf={"to-boolean":An,"to-color":Gs,"to-number":Xa,"to-string":an};class Hl{constructor(i,u){this.type=i,this.args=u}static parse(i,u){if(i.length<2)return u.error("Expected at least one argument.");const f=i[0],y=[];let m=sc;if(f==="to-array"){if(!Array.isArray(i[1]))return null;const _=i[1].length;if(u.expectedType){if(u.expectedType.kind!=="array")return u.error(`Expected ${u.expectedType.kind} but found array.`);m=Li(u.expectedType.itemType,_)}else{if(!(_>0&&Qo(i[1][0])))return null;m=Li(ji(i[1][0]),_)}for(let b=0;b<_;b++){const N=i[1][b];let D;if(mu(N)==="array")D=u.parse(N,void 0,m.itemType);else{const S=mu(N);if(S!==m.itemType.kind)return u.error(`Expected ${m.itemType.kind} but found ${S}.`);D=u.registry.literal.parse(["literal",N===void 0?null:N],u)}if(!D)return null;y.push(D)}}else{if((f==="to-boolean"||f==="to-string")&&i.length!==2)return u.error("Expected one argument.");m=Hf[f];for(let _=1;_<i.length;_++){const b=u.parse(i[_],_,un);if(!b)return null;y.push(b)}}return new Hl(m,y)}evaluate(i){if(this.type.kind==="boolean")return!!this.args[0].evaluate(i);if(this.type.kind==="color"){let u,f;for(const y of this.args){if(u=y.evaluate(i),f=null,u instanceof bn)return u;if(typeof u=="string"){const m=i.parseColor(u);if(m)return m}else if(Array.isArray(u)&&(f=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:Cl(u[0],u[1],u[2],u[3]),!f))return new bn(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new ns(f||`Could not parse color from value '${typeof u=="string"?u:String(JSON.stringify(u))}'`)}if(this.type.kind==="number"){let u=null;for(const f of this.args){if(u=f.evaluate(i),u===null)return 0;const y=Number(u);if(!isNaN(y))return y}throw new ns(`Could not convert ${JSON.stringify(u)} to number.`)}return this.type.kind==="formatted"?us.fromString(js(this.args[0].evaluate(i))):this.type.kind==="resolvedImage"?Ts.build(js(this.args[0].evaluate(i))):this.type.kind==="array"?this.args.map(u=>u.evaluate(i)):js(this.args[0].evaluate(i))}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Td([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new pu(this.args[0]).serialize();const i=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(u=>{i.push(u.serialize())}),i}}const Im=["Unknown","Point","LineString","Polygon"];class Sd{constructor(i,u){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=i,this.options=u}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Im[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(i){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const i=this.featureDistanceData.center,u=this.featureDistanceData.scale,{x:f,y}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(f*u-i[0])+this.featureDistanceData.bearing[1]*(y*u-i[1])}return 0}parseColor(i){let u=this._parseColorCache[i];return u||(u=this._parseColorCache[i]=bn.parse(i)),u}getConfig(i){return this.options?this.options.get(i):null}}class Zs{constructor(i,u,f,y,m){this.name=i,this.type=u,this._evaluate=f,this.args=y,this._overloadIndex=m}evaluate(i){if(!this._evaluate){const u=Zs.definitions[this.name];this._evaluate=Array.isArray(u)?u[2]:u.overloads[this._overloadIndex][1]}return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(i=>i.serialize()))}static parse(i,u){const f=i[0],y=Zs.definitions[f];if(!y)return u.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const m=Array.isArray(y)?y[0]:y.type,_=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,b=[];let N=null,D=-1;for(const[S,V]of _){if(Array.isArray(S)&&S.length!==i.length-1)continue;b.push(S),D++,N=new Xl(u.registry,u.path,null,u.scope,void 0,u._scope,u.options);const I=[];let O=!1;for(let M=1;M<i.length;M++){const B=i[M],X=Array.isArray(S)?S[M-1]:S.type,ee=N.parse(B,1+I.length,X);if(!ee){O=!0;break}I.push(ee)}if(!O)if(Array.isArray(S)&&S.length!==I.length)N.error(`Expected ${S.length} arguments, but found ${I.length} instead.`);else{for(let M=0;M<I.length;M++){const B=Array.isArray(S)?S[M]:S.type,X=I[M];N.concat(M+1).checkSubtype(B,X.type)}if(N.errors.length===0)return new Zs(f,m,V,I,D)}}if(b.length===1)u.errors.push(...N.errors);else{const S=(b.length?b:_.map(([I])=>I)).map(hf).join(" | "),V=[];for(let I=1;I<i.length;I++){const O=u.parse(i[I],1+V.length);if(!O)return null;V.push(bi(O.type))}u.error(`Expected arguments of type ${S}, but found (${V.join(", ")}) instead.`)}return null}static register(i,u){Zs.definitions=u;for(const f in u)i[f]=Zs}}function hf(d){return Array.isArray(d)?`(${d.map(bi).join(", ")})`:`(${bi(d.type)}...)`}class $l{constructor(i,u,f){this.type=Uo,this.locale=f,this.caseSensitive=i,this.diacriticSensitive=u}static parse(i,u){if(i.length!==2)return u.error("Expected one argument.");const f=i[1];if(typeof f!="object"||Array.isArray(f))return u.error("Collator options argument must be an object.");const y=f["case-sensitive"]===void 0?u.parse(!1,1,An):u.parseObjectValue(f["case-sensitive"],1,"case-sensitive",An);if(!y)return null;const m=f["diacritic-sensitive"]===void 0?u.parse(!1,1,An):u.parseObjectValue(f["diacritic-sensitive"],1,"diacritic-sensitive",An);if(!m)return null;let _=null;return f.locale&&(_=u.parseObjectValue(f.locale,1,"locale",an),!_)?null:new $l(y,m,_)}evaluate(i){return new lc(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}serialize(){const i={};return i["case-sensitive"]=this.caseSensitive.serialize(),i["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(i.locale=this.locale.serialize()),["collator",i]}}function ff(d,i,u=0,f=d.length-1,y=Ke){for(;f>u;){if(f-u>600){const N=f-u+1,D=i-u+1,S=Math.log(N),V=.5*Math.exp(2*S/3),I=.5*Math.sqrt(S*V*(N-V)/N)*(D-N/2<0?-1:1);ff(d,i,Math.max(u,Math.floor(i-D*V/N+I)),Math.min(f,Math.floor(i+(N-D)*V/N+I)),y)}const m=d[i];let _=u,b=f;for(oe(d,u,i),y(d[f],m)>0&&oe(d,u,f);_<b;){for(oe(d,_,b),_++,b--;y(d[_],m)<0;)_++;for(;y(d[b],m)>0;)b--}y(d[u],m)===0?oe(d,u,b):(b++,oe(d,b,f)),b<=i&&(u=b+1),i<=b&&(f=b-1)}}function oe(d,i,u){const f=d[i];d[i]=d[u],d[u]=f}function Ke(d,i){return d<i?-1:d>i?1:0}function Dt(d){let i=0;for(let u,f,y=0,m=d.length,_=m-1;y<m;_=y++)u=d[y],f=d[_],i+=(f.x-u.x)*(u.y+f.y);return i}function Wt(d,i){d[0]=Math.min(d[0],i[0]),d[1]=Math.min(d[1],i[1]),d[2]=Math.max(d[2],i[0]),d[3]=Math.max(d[3],i[1])}function ha(d,i){return!(d[0]<=i[0]||d[2]>=i[2]||d[1]<=i[1]||d[3]>=i[3])}function Da(d,i,u){const f=d[0]-i[0],y=d[1]-i[1],m=d[0]-u[0],_=d[1]-u[1];return f*_-m*y==0&&f*m<=0&&y*_<=0}function rr(d,i,u=!1){let f=!1;for(let b=0,N=i.length;b<N;b++){const D=i[b];for(let S=0,V=D.length,I=V-1;S<V;I=S++){const O=D[I],M=D[S];if(Da(d,O,M))return u;(m=O)[1]>(y=d)[1]!=(_=M)[1]>y[1]&&y[0]<(_[0]-m[0])*(y[1]-m[1])/(_[1]-m[1])+m[0]&&(f=!f)}}var y,m,_;return f}function wr(d,i,u,f){const y=f[0]-u[0],m=f[1]-u[1],_=(d[0]-u[0])*m-y*(d[1]-u[1]),b=(i[0]-u[0])*m-y*(i[1]-u[1]);return _>0&&b<0||_<0&&b>0}function $r(d,i,u,f){return(y=[f[0]-u[0],f[1]-u[1]])[0]*(m=[i[0]-d[0],i[1]-d[1]])[1]-y[1]*m[0]!=0&&!(!wr(d,i,u,f)||!wr(u,f,d,i));var y,m}const Sn=8192;function Nn(d,i){const u=(180+d[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d[1]*Math.PI/360)))/360,y=Math.pow(2,i.z);return[Math.round(u*y*Sn),Math.round(f*y*Sn)]}function mi(d,i){for(let u=0;u<i.length;u++)if(rr(d,i[u]))return!0;return!1}function Ss(d,i,u){for(const f of u)for(let y=0,m=f.length,_=m-1;y<m;_=y++)if($r(d,i,f[_],f[y]))return!0;return!1}function Cs(d,i){for(let u=0;u<d.length;++u)if(!rr(d[u],i))return!1;for(let u=0;u<d.length-1;++u)if(Ss(d[u],d[u+1],i))return!1;return!0}function Js(d,i){for(let u=0;u<i.length;u++)if(Cs(d,i[u]))return!0;return!1}function es(d,i,u){const f=[];for(let y=0;y<d.length;y++){const m=[];for(let _=0;_<d[y].length;_++){const b=Nn(d[y][_],u);Wt(i,b),m.push(b)}f.push(m)}return f}function br(d,i,u){const f=[];for(let y=0;y<d.length;y++){const m=es(d[y],i,u);f.push(m)}return f}function ir(d,i,u,f){if(d[0]<u[0]||d[0]>u[2]){const y=.5*f;let m=d[0]-u[0]>y?-f:u[0]-d[0]>y?f:0;m===0&&(m=d[0]-u[2]>y?-f:u[2]-d[0]>y?f:0),d[0]+=m}Wt(i,d)}function fl(d,i,u,f){const y=Math.pow(2,f.z)*Sn,m=[f.x*Sn,f.y*Sn],_=[];if(!d)return _;for(const b of d)for(const N of b){const D=[N.x+m[0],N.y+m[1]];ir(D,i,u,y),_.push(D)}return _}function Rr(d,i,u,f){const y=Math.pow(2,f.z)*Sn,m=[f.x*Sn,f.y*Sn],_=[];if(!d)return _;for(const N of d){const D=[];for(const S of N){const V=[S.x+m[0],S.y+m[1]];Wt(i,V),D.push(V)}_.push(D)}if(i[2]-i[0]<=y/2){(b=i)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const N of _)for(const D of N)ir(D,i,u,y)}var b;return _}class yu{constructor(i,u){this.type=An,this.geojson=i,this.geometries=u}static parse(i,u){if(i.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(Qo(i[1])){const f=i[1];if(f.type==="FeatureCollection")for(let y=0;y<f.features.length;++y){const m=f.features[y].geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new yu(f,f.features[y].geometry)}else if(f.type==="Feature"){const y=f.geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new yu(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new yu(f,f)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(u,f){const y=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],_=u.canonicalID();if(!_)return!1;if(f.type==="Polygon"){const b=es(f.coordinates,m,_),N=fl(u.geometry(),y,m,_);if(!ha(y,m))return!1;for(const D of N)if(!rr(D,b))return!1}if(f.type==="MultiPolygon"){const b=br(f.coordinates,m,_),N=fl(u.geometry(),y,m,_);if(!ha(y,m))return!1;for(const D of N)if(!mi(D,b))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(u,f){const y=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],_=u.canonicalID();if(!_)return!1;if(f.type==="Polygon"){const b=es(f.coordinates,m,_),N=Rr(u.geometry(),y,m,_);if(!ha(y,m))return!1;for(const D of N)if(!Cs(D,b))return!1}if(f.type==="MultiPolygon"){const b=br(f.coordinates,m,_),N=Rr(u.geometry(),y,m,_);if(!ha(y,m))return!1;for(const D of N)if(!Js(D,b))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const Kl={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},vr=1/298.257223563,sh=vr*(2-vr),Wl=Math.PI/180;class uc{static fromTile(i,u,f){const y=Math.PI*(1-2*(i+.5)/Math.pow(2,u)),m=Math.atan(.5*(Math.exp(y)-Math.exp(-y)))/Wl;return new uc(m,f)}static get units(){return Kl}constructor(i,u){if(i===void 0)throw new Error("No latitude given.");if(u&&!Kl[u])throw new Error(`Unknown unit ${u}. Use one of: ${Object.keys(Kl).join(", ")}`);const f=6378.137*Wl*(u?Kl[u]:1),y=Math.cos(i*Wl),m=1/(1-sh*(1-y*y)),_=Math.sqrt(m);this.kx=f*_*y,this.ky=f*_*m*(1-sh)}distance(i,u){const f=Ai(i[0]-u[0])*this.kx,y=(i[1]-u[1])*this.ky;return Math.sqrt(f*f+y*y)}bearing(i,u){const f=Ai(u[0]-i[0])*this.kx;return Math.atan2(f,(u[1]-i[1])*this.ky)/Wl}destination(i,u,f){const y=f*Wl;return this.offset(i,Math.sin(y)*u,Math.cos(y)*u)}offset(i,u,f){return[i[0]+u/this.kx,i[1]+f/this.ky]}lineDistance(i){let u=0;for(let f=0;f<i.length-1;f++)u+=this.distance(i[f],i[f+1]);return u}area(i){let u=0;for(let f=0;f<i.length;f++){const y=i[f];for(let m=0,_=y.length,b=_-1;m<_;b=m++)u+=Ai(y[m][0]-y[b][0])*(y[m][1]+y[b][1])*(f?-1:1)}return Math.abs(u)/2*this.kx*this.ky}along(i,u){let f=0;if(u<=0)return i[0];for(let y=0;y<i.length-1;y++){const m=i[y],_=i[y+1],b=this.distance(m,_);if(f+=b,f>u)return bs(m,_,(u-(f-b))/b)}return i[i.length-1]}pointToSegmentDistance(i,u,f){let[y,m]=u,_=Ai(f[0]-y)*this.kx,b=(f[1]-m)*this.ky;if(_!==0||b!==0){const N=(Ai(i[0]-y)*this.kx*_+(i[1]-m)*this.ky*b)/(_*_+b*b);N>1?(y=f[0],m=f[1]):N>0&&(y+=_/this.kx*N,m+=b/this.ky*N)}return _=Ai(i[0]-y)*this.kx,b=(i[1]-m)*this.ky,Math.sqrt(_*_+b*b)}pointOnLine(i,u){let f=1/0,y=i[0][0],m=i[0][1],_=0,b=0;for(let N=0;N<i.length-1;N++){let D=i[N][0],S=i[N][1],V=Ai(i[N+1][0]-D)*this.kx,I=(i[N+1][1]-S)*this.ky,O=0;V===0&&I===0||(O=(Ai(u[0]-D)*this.kx*V+(u[1]-S)*this.ky*I)/(V*V+I*I),O>1?(D=i[N+1][0],S=i[N+1][1]):O>0&&(D+=V/this.kx*O,S+=I/this.ky*O)),V=Ai(u[0]-D)*this.kx,I=(u[1]-S)*this.ky;const M=V*V+I*I;M<f&&(f=M,y=D,m=S,_=N,b=O)}return{point:[y,m],index:_,t:Math.max(0,Math.min(1,b))}}lineSlice(i,u,f){let y=this.pointOnLine(f,i),m=this.pointOnLine(f,u);if(y.index>m.index||y.index===m.index&&y.t>m.t){const D=y;y=m,m=D}const _=[y.point],b=y.index+1,N=m.index;!Cd(f[b],_[0])&&b<=N&&_.push(f[b]);for(let D=b+1;D<=N;D++)_.push(f[D]);return Cd(f[N],m.point)||_.push(m.point),_}lineSliceAlong(i,u,f){let y=0;const m=[];for(let _=0;_<f.length-1;_++){const b=f[_],N=f[_+1],D=this.distance(b,N);if(y+=D,y>i&&m.length===0&&m.push(bs(b,N,(i-(y-D))/D)),y>=u)return m.push(bs(b,N,(u-(y-D))/D)),m;y>i&&m.push(N)}return m}bufferPoint(i,u){const f=u/this.ky,y=u/this.kx;return[i[0]-y,i[1]-f,i[0]+y,i[1]+f]}bufferBBox(i,u){const f=u/this.ky,y=u/this.kx;return[i[0]-y,i[1]-f,i[2]+y,i[3]+f]}insideBBox(i,u){return Ai(i[0]-u[0])>=0&&Ai(i[0]-u[2])<=0&&i[1]>=u[1]&&i[1]<=u[3]}}function Cd(d,i){return d[0]===i[0]&&d[1]===i[1]}function bs(d,i,u){const f=Ai(i[0]-d[0]);return[d[0]+f*u,d[1]+(i[1]-d[1])*u]}function Ai(d){for(;d<-180;)d+=360;for(;d>180;)d-=360;return d}class cc{constructor(i=[],u=(f,y)=>f<y?-1:f>y?1:0){if(this.data=i,this.length=this.data.length,this.compare=u,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;const i=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:u,compare:f}=this,y=u[i];for(;i>0;){const m=i-1>>1,_=u[m];if(f(y,_)>=0)break;u[i]=_,i=m}u[i]=y}_down(i){const{data:u,compare:f}=this,y=this.length>>1,m=u[i];for(;i<y;){let _=1+(i<<1);const b=_+1;if(b<this.length&&f(u[b],u[_])<0&&(_=b),f(u[_],m)>=0)break;u[i]=u[_],i=_}u[i]=m}}var Na=8192;function bd(d,i){return i.dist-d.dist}const qs=100,co=50;function pf(d){const i=[1/0,1/0,-1/0,-1/0];if(i.length!==d.length)return!1;for(let u=0;u<i.length;u++)if(i[u]!==d[u])return!1;return!0}function zh(d){return d[1]-d[0]+1}function ho(d,i){const u=d[1]>=d[0]&&d[1]<i;return u||console.warn("Distance Expression: Index is out of range"),u}function Os(d,i){if(d[0]>d[1])return[null,null];const u=zh(d);if(i){if(u===2)return[d,null];const f=Math.floor(u/2);return[[d[0],d[0]+f],[d[0]+f,d[1]]]}{if(u===1)return[d,null];const f=Math.floor(u/2)-1;return[[d[0],d[0]+f],[d[0]+f+1,d[1]]]}}function bl(d,i){const u=[1/0,1/0,-1/0,-1/0];if(!ho(i,d.length))return u;for(let f=i[0];f<=i[1];++f)Wt(u,d[f]);return u}function Oc(d){const i=[1/0,1/0,-1/0,-1/0];for(let u=0;u<d.length;++u)for(let f=0;f<d[u].length;++f)Wt(i,d[u][f]);return i}function Yl(d,i,u){if(pf(d)||pf(i))return NaN;let f=0,y=0;return d[2]<i[0]&&(f=i[0]-d[2]),d[0]>i[2]&&(f=d[0]-i[2]),d[1]>i[3]&&(y=d[1]-i[3]),d[3]<i[1]&&(y=i[1]-d[3]),u.distance([0,0],[f,y])}function oh(d){return 360*d-180}function xl(d){return 360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90}function Ro(d,i){const u=Math.pow(2,i.z),f=(d.y/Na+i.y)/u;return[oh((d.x/Na+i.x)/u),xl(f)]}function xd(d,i){const u=[];for(let f=0;f<d.length;++f)u.push(Ro(d[f],i));return u}function Dc(d,i,u){const f=u.pointOnLine(i,d).point;return u.distance(d,f)}function Pl(d,i,u,f,y){const m=u.slice(f[0],f[1]+1);let _=1/0;for(let b=i[0];b<=i[1];++b)if((_=Math.min(_,Dc(d[b],m,y)))===0)return 0;return _}function dc(d,i,u,f,y){const m=Math.min(y.pointToSegmentDistance(d,u,f),y.pointToSegmentDistance(i,u,f)),_=Math.min(y.pointToSegmentDistance(u,d,i),y.pointToSegmentDistance(f,d,i));return Math.min(m,_)}function gu(d,i,u,f,y){if(!ho(i,d.length)||!ho(f,u.length))return NaN;let m=1/0;for(let _=i[0];_<i[1];++_)for(let b=f[0];b<f[1];++b){if($r(d[_],d[_+1],u[b],u[b+1]))return 0;m=Math.min(m,dc(d[_],d[_+1],u[b],u[b+1],y))}return m}function Zi(d,i,u,f,y){if(!ho(i,d.length)||!ho(f,u.length))return NaN;let m=1/0;for(let _=i[0];_<=i[1];++_)for(let b=f[0];b<=f[1];++b)if((m=Math.min(m,y.distance(d[_],u[b])))===0)return m;return m}function mf(d,i,u){if(rr(d,i,!0))return 0;let f=1/0;for(const y of i){const m=y.length;if(m<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(y[0]!==y[m-1]&&(f=Math.min(f,u.pointToSegmentDistance(d,y[m-1],y[0])))===0||(f=Math.min(f,Dc(d,y,u)))===0)return f}return f}function Qs(d,i,u,f){if(!ho(i,d.length))return NaN;for(let m=i[0];m<=i[1];++m)if(rr(d[m],u,!0))return 0;let y=1/0;for(let m=i[0];m<i[1];++m)for(const _ of u)for(let b=0,N=_.length,D=N-1;b<N;D=b++){if($r(d[m],d[m+1],_[D],_[b]))return 0;y=Math.min(y,dc(d[m],d[m+1],_[D],_[b],f))}return y}function fo(d,i){for(const u of d)for(let f=0;f<=u.length-1;++f)if(rr(u[f],i,!0))return!0;return!1}function Pd(d,i,u,f=1/0){const y=Oc(d),m=Oc(i);if(f!==1/0&&Yl(y,m,u)>=f)return f;if(ha(y,m)){if(fo(d,i))return 0}else if(fo(i,d))return 0;let _=f;for(const b of d)for(let N=0,D=b.length,S=D-1;N<D;S=N++)for(const V of i)for(let I=0,O=V.length,M=O-1;I<O;M=I++){if($r(b[S],b[N],V[M],V[I]))return 0;_=Math.min(_,dc(b[S],b[N],V[M],V[I],u))}return _}function Ed(d,i,u,f,y,m,_){if(m===null||_===null)return;const b=Yl(bl(f,m),bl(y,_),u);b<i&&d.push({dist:b,range1:m,range2:_})}function eo(d,i,u,f,y=1/0){let m=Math.min(f.distance(d[0],u[0][0]),y);if(m===0)return m;const _=new cc([{dist:0,range1:[0,d.length-1],range2:[0,0]}],bd),b=i?co:qs,N=Oc(u);for(;_.length;){const D=_.pop();if(D.dist>=m)continue;const S=D.range1;if(zh(S)<=b){if(!ho(S,d.length))return NaN;if(i){const V=Qs(d,S,u,f);if((m=Math.min(m,V))===0)return m}else for(let V=S[0];V<=S[1];++V){const I=mf(d[V],u,f);if((m=Math.min(m,I))===0)return m}}else{const V=Os(S,i);if(V[0]!==null){const I=Yl(bl(d,V[0]),N,f);I<m&&_.push({dist:I,range1:V[0],range2:[0,0]})}if(V[1]!==null){const I=Yl(bl(d,V[1]),N,f);I<m&&_.push({dist:I,range1:V[1],range2:[0,0]})}}}return m}function Mc(d,i,u,f,y,m=1/0){let _=Math.min(m,y.distance(d[0],u[0]));if(_===0)return _;const b=new cc([{dist:0,range1:[0,d.length-1],range2:[0,u.length-1]}],bd),N=i?co:qs,D=f?co:qs;for(;b.length;){const S=b.pop();if(S.dist>=_)continue;const V=S.range1,I=S.range2;if(zh(V)<=N&&zh(I)<=D){if(!ho(V,d.length)||!ho(I,u.length))return NaN;if(i&&f?_=Math.min(_,gu(d,V,u,I,y)):i||f?i&&!f?_=Math.min(_,Pl(u,I,d,V,y)):!i&&f&&(_=Math.min(_,Pl(d,V,u,I,y))):_=Math.min(_,Zi(d,V,u,I,y)),_===0)return _}else{const O=Os(V,i),M=Os(I,f);Ed(b,_,y,d,u,O[0],M[0]),Ed(b,_,y,d,u,O[0],M[1]),Ed(b,_,y,d,u,O[1],M[0]),Ed(b,_,y,d,u,O[1],M[1])}}return _}function hc(d,i,u,f,y=1/0){let m=y;const _=bl(d,[0,d.length-1]);for(const b of u)if(!(m!==1/0&&Yl(_,bl(b,[0,b.length-1]),f)>=m)&&(m=Math.min(m,Mc(d,i,b,!0,f,m)),m===0))return m;return m}function Au(d,i,u,f,y=1/0){let m=y;const _=bl(d,[0,d.length-1]);for(const b of u){if(m!==1/0&&Yl(_,Oc(b),f)>=m)continue;const N=eo(d,i,b,f,m);if(isNaN(N))return N;if((m=Math.min(m,N))===0)return m}return m}function Ic(d){return d==="Point"||d==="MultiPoint"||d==="LineString"||d==="MultiLineString"||d==="Polygon"||d==="MultiPolygon"}class _u{constructor(i,u){this.type=Xa,this.geojson=i,this.geometries=u}static parse(i,u){if(i.length!==2)return u.error(`'distance' expression requires either one argument, but found ' ${i.length-1} instead.`);if(Qo(i[1])){const f=i[1];if(f.type==="FeatureCollection"){for(let y=0;y<f.features.length;++y)if(Ic(f.features[y].geometry.type))return new _u(f,f.features[y].geometry)}else if(f.type==="Feature"){if(Ic(f.geometry.type))return new _u(f,f.geometry)}else if(Ic(f.type))return new _u(f,f)}return u.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(i){const u=i.geometry(),f=i.canonicalID();if(u!=null&&f!=null){if(i.geometryType()==="Point")return function(y,m,_){const b=[];for(const D of y)for(const S of D)b.push(Ro(S,m));const N=new uc(b[0][1],"meters");return _.type==="Point"||_.type==="MultiPoint"||_.type==="LineString"?Mc(b,!1,_.type==="Point"?[_.coordinates]:_.coordinates,_.type==="LineString",N):_.type==="MultiLineString"?hc(b,!1,_.coordinates,N):_.type==="Polygon"||_.type==="MultiPolygon"?Au(b,!1,_.type==="Polygon"?[_.coordinates]:_.coordinates,N):null}(u,f,this.geometries);if(i.geometryType()==="LineString")return function(y,m,_){const b=[];for(const D of y){const S=[];for(const V of D)S.push(Ro(V,m));b.push(S)}const N=new uc(b[0][0][1],"meters");if(_.type==="Point"||_.type==="MultiPoint"||_.type==="LineString")return hc(_.type==="Point"?[_.coordinates]:_.coordinates,_.type==="LineString",b,N);if(_.type==="MultiLineString"){let D=1/0;for(let S=0;S<_.coordinates.length;S++){const V=hc(_.coordinates[S],!0,b,N,D);if(isNaN(V))return V;if((D=Math.min(D,V))===0)return D}return D}if(_.type==="Polygon"||_.type==="MultiPolygon"){let D=1/0;for(let S=0;S<b.length;S++){const V=Au(b[S],!0,_.type==="Polygon"?[_.coordinates]:_.coordinates,N,D);if(isNaN(V))return V;if((D=Math.min(D,V))===0)return D}return D}return null}(u,f,this.geometries);if(i.geometryType()==="Polygon")return function(y,m,_){const b=[];for(const D of function(S,V){const I=S.length;if(I<=1)return[S];const O=[];let M,B;for(let X=0;X<I;X++){const ee=Dt(S[X]);ee!==0&&(S[X].area=Math.abs(ee),B===void 0&&(B=ee<0),B===ee<0?(M&&O.push(M),M=[S[X]]):M.push(S[X]))}return M&&O.push(M),O}(y)){const S=[];for(let V=0;V<D.length;++V)S.push(xd(D[V],m));b.push(S)}const N=new uc(b[0][0][0][1],"meters");if(_.type==="Point"||_.type==="MultiPoint"||_.type==="LineString")return Au(_.type==="Point"?[_.coordinates]:_.coordinates,_.type==="LineString",b,N);if(_.type==="MultiLineString"){let D=1/0;for(let S=0;S<_.coordinates.length;S++){const V=Au(_.coordinates[S],!0,b,N,D);if(isNaN(V))return V;if((D=Math.min(D,V))===0)return D}return D}return _.type==="Polygon"||_.type==="MultiPolygon"?function(D,S,V){let I=1/0;for(const O of D)for(const M of S){const B=Pd(O,M,V,I);if(isNaN(B))return B;if((I=Math.min(I,B))===0)return I}return I}(_.type==="Polygon"?[_.coordinates]:_.coordinates,b,N):null}(u,f,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function Lc(d,i){switch(d){case"string":return js(i);case"number":return+i;case"boolean":return!!i;case"color":return bn.parse(i);case"formatted":return us.fromString(js(i));case"resolvedImage":return Ts.build(js(i))}return i}function fc(d,i,u,f){return f!==void 0&&(d=f*Math.round(d/f)),i!==void 0&&d<i&&(d=i),u!==void 0&&d>u&&(d=u),d}class Bu{constructor(i,u,f){this.type=i,this.key=u,this.scope=f}static parse(i,u){let f=u.expectedType;if(f==null&&(f=un),i.length<2||i.length>3)return u.error("Invalid number of arguments for 'config' expression.");const y=u.parse(i[1],1);if(!(y instanceof ql))return u.error("Key name of 'config' expression must be a string literal.");if(i.length>=3){const m=u.parse(i[2],2);return m instanceof ql?new Bu(f,js(y.value),js(m.value)):u.error("Scope of 'config' expression must be a string literal.")}return new Bu(f,js(y.value))}evaluate(i){const u=[this.key,this.scope,i.scope].filter(Boolean).join(""),f=i.getConfig(u);if(!f)return null;const{type:y,value:m,values:_,minValue:b,maxValue:N,stepValue:D}=f,S=f.default.evaluate(i);let V=S;if(m){const I=i.scope;i.scope=(I||"").split("").slice(1).join(""),V=m.evaluate(i),i.scope=I}return y&&(V=Lc(y,V)),V===void 0||b===void 0&&N===void 0&&D===void 0||(typeof V=="number"?V=fc(V,b,N,D):Array.isArray(V)&&(V=V.map(I=>typeof I=="number"?fc(I,b,N,D):I))),m!==void 0&&V!==void 0&&_&&!_.includes(V)&&(V=S,y&&(V=Lc(y,V))),(y&&y!==this.type||V!==void 0&&ji(V)!==this.type)&&(V=Lc(this.type.kind,V)),V}eachChild(){}outputDefined(){return!1}serialize(){const i=["config",this.key];return this.scope&&i.concat(this.key),i}}function Bo(d){if(d instanceof Zs&&(d.name==="get"&&d.args.length===1||d.name==="feature-state"||d.name==="has"&&d.args.length===1||d.name==="properties"||d.name==="geometry-type"||d.name==="id"||/^filter-/.test(d.name))||d instanceof yu||d instanceof _u)return!1;let i=!0;return d.eachChild(u=>{i&&!Bo(u)&&(i=!1)}),i}function cs(d){if(d instanceof Zs&&d.name==="feature-state")return!1;let i=!0;return d.eachChild(u=>{i&&!cs(u)&&(i=!1)}),i}function Xn(d){if(d instanceof Bu)return new Set([d.key]);let i=new Set;return d.eachChild(u=>{i=new Set([...i,...Xn(u)])}),i}function ai(d,i){if(d instanceof Zs&&i.indexOf(d.name)>=0)return!1;let u=!0;return d.eachChild(f=>{u&&!ai(f,i)&&(u=!1)}),u}class qi{constructor(i,u){this.type=u.type,this.name=i,this.boundExpression=u}static parse(i,u){if(i.length!==2||typeof i[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const f=i[1];return u.scope.has(f)?new qi(f,u.scope.get(f)):u.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class is{constructor(i,u=[],f,y=new ic,m=[],_,b){this.registry=i,this.path=u,this.key=u.map(N=>typeof N=="string"?`['${N}']`:`[${N}]`).join(""),this.scope=y,this.errors=m,this.expectedType=f,this._scope=_,this.options=b}parse(i,u,f,y,m={}){return u||f?this.concat(u,null,f,y)._parse(i,m):this._parse(i,m)}parseObjectValue(i,u,f,y,m,_={}){return this.concat(u,f,y,m)._parse(i,_)}_parse(i,u){function f(y,m,_){return _==="assert"?new ko(m,[y]):_==="coerce"?new Hl(m,[y]):y}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const y=typeof i[0]=="string"?this.registry[i[0]]:void 0;if(y){let m=y.parse(i,this);if(!m)return null;if(this.expectedType){const _=this.expectedType,b=m.type;if(_.kind!=="string"&&_.kind!=="number"&&_.kind!=="boolean"&&_.kind!=="object"&&_.kind!=="array"||b.kind!=="value")if(_.kind!=="color"&&_.kind!=="formatted"&&_.kind!=="resolvedImage"||b.kind!=="value"&&b.kind!=="string"){if(this.checkSubtype(_,b))return null}else m=f(m,_,u.typeAnnotation||"coerce");else m=f(m,_,u.typeAnnotation||"assert")}if(!(m instanceof ql)&&m.type.kind!=="resolvedImage"&&Fc(m)){const _=new Sd(this._scope,this.options);try{m=new ql(m.type,m.evaluate(_))}catch(b){return this.error(b.message),null}}return m}return Hl.parse(["to-array",i],this)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,u,f,y){let m=typeof i=="number"?this.path.concat(i):this.path;m=typeof u=="string"?m.concat(u):m;const _=y?this.scope.concat(y):this.scope;return new is(this.registry,m,f||null,_,this.errors,this._scope,this.options)}error(i,...u){const f=`${this.key}${u.map(y=>`[${y}]`).join("")}`;this.errors.push(new Bs(f,i))}checkSubtype(i,u){const f=Rd(i,u);return f&&this.error(f),f}}var Xl=is;function Fc(d){if(d instanceof qi)return Fc(d.boundExpression);if(d instanceof Zs&&d.name==="error"||d instanceof $l||d instanceof yu||d instanceof _u||d instanceof Bu)return!1;const i=d instanceof Hl||d instanceof ko;let u=!0;return d.eachChild(f=>{u=i?u&&Fc(f):u&&f instanceof ql}),!!u&&Bo(d)&&ai(d,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function el(d,i){const u=d.length-1;let f,y,m=0,_=u,b=0;for(;m<=_;)if(b=Math.floor((m+_)/2),f=d[b],y=d[b+1],f<=i){if(b===u||i<y)return b;m=b+1}else{if(!(f>i))throw new ns("Input is not a number.");_=b-1}return 0}class Jl{constructor(i,u,f){this.type=i,this.input=u,this.labels=[],this.outputs=[];for(const[y,m]of f)this.labels.push(y),this.outputs.push(m)}static parse(i,u){if(i.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return u.error("Expected an even number of arguments.");const f=u.parse(i[1],1,Xa);if(!f)return null;const y=[];let m=null;u.expectedType&&u.expectedType.kind!=="value"&&(m=u.expectedType);for(let _=1;_<i.length;_+=2){const b=_===1?-1/0:i[_],N=i[_+1],D=_,S=_+1;if(typeof b!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(y.length&&y[y.length-1][0]>=b)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);const V=u.parse(N,S,m);if(!V)return null;m=m||V.type,y.push([b,V])}return new Jl(m,f,y)}evaluate(i){const u=this.labels,f=this.outputs;if(u.length===1)return f[0].evaluate(i);const y=this.input.evaluate(i);if(y<=u[0])return f[0].evaluate(i);const m=u.length;return y>=u[m-1]?f[m-1].evaluate(i):f[el(u,y)].evaluate(i)}eachChild(i){i(this.input);for(const u of this.outputs)i(u)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){const i=["step",this.input.serialize()];for(let u=0;u<this.labels.length;u++)u>0&&i.push(this.labels[u]),i.push(this.outputs[u].serialize());return i}}const tn=.95047,Uc=1.08883,El=4/29,ts=6/29,pc=3*ts*ts,Nd=ts*ts*ts,di=Math.PI/180,Oh=180/Math.PI;function tl(d){return d>Nd?Math.pow(d,1/3):d/pc+El}function pl(d){return d>ts?d*d*d:pc*(d-El)}function kc(d){return 255*(d<=.0031308?12.92*d:1.055*Math.pow(d,1/2.4)-.055)}function vu(d){return(d/=255)<=.04045?d/12.92:Math.pow((d+.055)/1.055,2.4)}function Gu(d){const i=vu(d.r),u=vu(d.g),f=vu(d.b),y=tl((.4124564*i+.3575761*u+.1804375*f)/tn),m=tl((.2126729*i+.7151522*u+.072175*f)/1);return{l:116*m-16,a:500*(y-m),b:200*(m-tl((.0193339*i+.119192*u+.9503041*f)/Uc)),alpha:d.a}}function mc(d){let i=(d.l+16)/116,u=isNaN(d.a)?i:i+d.a/500,f=isNaN(d.b)?i:i-d.b/200;return i=1*pl(i),u=tn*pl(u),f=Uc*pl(f),new bn(kc(3.2404542*u-1.5371385*i-.4985314*f),kc(-.969266*u+1.8760108*i+.041556*f),kc(.0556434*u-.2040259*i+1.0572252*f),d.alpha)}function Bp(d,i,u){const f=i-d;return d+u*(f>180||f<-180?f-360*Math.round(f/360):f)}const Dh={forward:Gu,reverse:mc,interpolate:function(d,i,u){return{l:hr(d.l,i.l,u),a:hr(d.a,i.a,u),b:hr(d.b,i.b,u),alpha:hr(d.alpha,i.alpha,u)}}},Mh={forward:function(d){const{l:i,a:u,b:f}=Gu(d),y=Math.atan2(f,u)*Oh;return{h:y<0?y+360:y,c:Math.sqrt(u*u+f*f),l:i,alpha:d.a}},reverse:function(d){const i=d.h*di,u=d.c;return mc({l:d.l,a:Math.cos(i)*u,b:Math.sin(i)*u,alpha:d.alpha})},interpolate:function(d,i,u){return{h:Bp(d.h,i.h,u),c:hr(d.c,i.c,u),l:hr(d.l,i.l,u),alpha:hr(d.alpha,i.alpha,u)}}};var al=Object.freeze({__proto__:null,hcl:Mh,lab:Dh});class Hi{constructor(i,u,f,y,m){this.type=i,this.operator=u,this.interpolation=f,this.input=y,this.labels=[],this.outputs=[];for(const[_,b]of m)this.labels.push(_),this.outputs.push(b)}static interpolationFactor(i,u,f,y){let m=0;if(i.name==="exponential")m=_i(u,i.base,f,y);else if(i.name==="linear")m=_i(u,1,f,y);else if(i.name==="cubic-bezier"){const _=i.controlPoints;m=new Zt(_[0],_[1],_[2],_[3]).solve(_i(u,1,f,y))}return m}static parse(i,u){let[f,y,m,..._]=i;if(!Array.isArray(y)||y.length===0)return u.error("Expected an interpolation type expression.",1);if(y[0]==="linear")y={name:"linear"};else if(y[0]==="exponential"){const D=y[1];if(typeof D!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:D}}else{if(y[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(y[0])}`,1,0);{const D=y.slice(1);if(D.length!==4||D.some(S=>typeof S!="number"||S<0||S>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:D}}}if(i.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length-1>3&&(i.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(m=u.parse(m,2,Xa),!m)return null;const b=[];let N=null;f==="interpolate-hcl"||f==="interpolate-lab"?N=Gs:u.expectedType&&u.expectedType.kind!=="value"&&(N=u.expectedType);for(let D=0;D<_.length;D+=2){const S=_[D],V=_[D+1],I=D+3,O=D+4;if(typeof S!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(b.length&&b[b.length-1][0]>=S)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',I);const M=u.parse(V,O,N);if(!M)return null;N=N||M.type,b.push([S,M])}return N.kind==="number"||N.kind==="color"||N.kind==="array"&&N.itemType.kind==="number"&&typeof N.N=="number"?new Hi(N,f,y,m,b):u.error(`Type ${bi(N)} is not interpolatable.`)}evaluate(i){const u=this.labels,f=this.outputs;if(u.length===1)return f[0].evaluate(i);const y=this.input.evaluate(i);if(y<=u[0])return f[0].evaluate(i);const m=u.length;if(y>=u[m-1])return f[m-1].evaluate(i);const _=el(u,y),b=Hi.interpolationFactor(this.interpolation,y,u[_],u[_+1]),N=f[_].evaluate(i),D=f[_+1].evaluate(i);return this.operator==="interpolate"?nh[this.type.kind.toLowerCase()](N,D,b):this.operator==="interpolate-hcl"?Mh.reverse(Mh.interpolate(Mh.forward(N),Mh.forward(D),b)):Dh.reverse(Dh.interpolate(Dh.forward(N),Dh.forward(D),b))}eachChild(i){i(this.input);for(const u of this.outputs)i(u)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){let i;i=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier",...this.interpolation.controlPoints];const u=[this.operator,i,this.input.serialize()];for(let f=0;f<this.labels.length;f++)u.push(this.labels[f],this.outputs[f].serialize());return u}}function _i(d,i,u,f){const y=f-u,m=d-u;return y===0?0:i===1?m/y:(Math.pow(i,m)-1)/(Math.pow(i,y)-1)}class Ql{constructor(i,u){this.type=i,this.args=u}static parse(i,u){if(i.length<2)return u.error("Expectected at least one argument.");let f=null;const y=u.expectedType;y&&y.kind!=="value"&&(f=y);const m=[];for(const b of i.slice(1)){const N=u.parse(b,1+m.length,f,void 0,{typeAnnotation:"omit"});if(!N)return null;f=f||N.type,m.push(N)}const _=y&&m.some(b=>Rd(y,b.type));return new Ql(_?un:f,m)}evaluate(i){let u,f=null,y=0;for(const m of this.args){if(y++,f=m.evaluate(i),f&&f instanceof Ts&&!f.available&&(u||(u=f),f=null,y===this.args.length))return u;if(f!==null)break}return f}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=["coalesce"];return this.eachChild(u=>{i.push(u.serialize())}),i}}class wu{constructor(i,u){this.type=u.type,this.bindings=[].concat(i),this.result=u}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const u of this.bindings)i(u[1]);i(this.result)}static parse(i,u){if(i.length<4)return u.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const f=[];for(let m=1;m<i.length-1;m+=2){const _=i[m];if(typeof _!="string")return u.error(`Expected string, but found ${typeof _} instead.`,m);if(/[^a-zA-Z0-9_]/.test(_))return u.error("Variable names must contain only alphanumeric characters or '_'.",m);const b=u.parse(i[m+1],m+1);if(!b)return null;f.push([_,b])}const y=u.parse(i[i.length-1],i.length-1,u.expectedType,f);return y?new wu(f,y):null}outputDefined(){return this.result.outputDefined()}serialize(){const i=["let"];for(const[u,f]of this.bindings)i.push(u,f.serialize());return i.push(this.result.serialize()),i}}class $f{constructor(i,u,f){this.type=i,this.index=u,this.input=f}static parse(i,u){if(i.length!==3)return u.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const f=u.parse(i[1],1,Xa),y=u.parse(i[2],2,Li(u.expectedType||un));return f&&y?new $f(y.type.itemType,f,y):null}evaluate(i){const u=this.index.evaluate(i),f=this.input.evaluate(i);if(u<0)throw new ns(`Array index out of bounds: ${u} < 0.`);if(u>=f.length)throw new ns(`Array index out of bounds: ${u} > ${f.length-1}.`);if(u!==Math.floor(u))throw new ns(`Array index must be an integer, but found ${u} instead. Use at-interpolated to retrieve interpolated result with a fractional index.`);return f[u]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class yc{constructor(i,u,f){this.type=i,this.index=u,this.input=f}static parse(i,u){if(i.length!==3)return u.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const f=u.parse(i[1],1,Xa),y=u.parse(i[2],2,Li(u.expectedType||un));return f&&y?new yc(y.type.itemType,f,y):null}evaluate(i){const u=this.index.evaluate(i),f=this.input.evaluate(i);if(u<0)throw new ns(`Array index out of bounds: ${u} < 0.`);if(u>f.length-1)throw new ns(`Array index out of bounds: ${u} > ${f.length-1}.`);if(u===Math.floor(u))return f[u];const y=Math.floor(u),m=Math.ceil(u),_=f[y],b=f[m];if(typeof _!="number"||typeof b!="number")throw new ns(`Cannot interpolate between non-number values at index ${u}.`);const N=u-y;return _*(1-N)+b*N}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}serialize(){return["at-interpolated",this.index.serialize(),this.input.serialize()]}}class yf{constructor(i,u){this.type=An,this.needle=i,this.haystack=u}static parse(i,u){if(i.length!==3)return u.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const f=u.parse(i[1],1,un),y=u.parse(i[2],2,un);return f&&y?ih(f.type,[An,an,Xa,sc,un])?new yf(f,y):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${bi(f.type)} instead`):null}evaluate(i){const u=this.needle.evaluate(i),f=this.haystack.evaluate(i);if(f==null)return!1;if(!oc(u,["boolean","string","number","null"]))throw new ns(`Expected first argument to be of type boolean, string, number or null, but found ${bi(ji(u))} instead.`);if(!oc(f,["string","array"]))throw new ns(`Expected second argument to be of type array or string, but found ${bi(ji(f))} instead.`);return f.indexOf(u)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Vd{constructor(i,u,f){this.type=Xa,this.needle=i,this.haystack=u,this.fromIndex=f}static parse(i,u){if(i.length<=2||i.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const f=u.parse(i[1],1,un),y=u.parse(i[2],2,un);if(!f||!y)return null;if(!ih(f.type,[An,an,Xa,sc,un]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${bi(f.type)} instead`);if(i.length===4){const m=u.parse(i[3],3,Xa);return m?new Vd(f,y,m):null}return new Vd(f,y)}evaluate(i){const u=this.needle.evaluate(i),f=this.haystack.evaluate(i);if(!oc(u,["boolean","string","number","null"]))throw new ns(`Expected first argument to be of type boolean, string, number or null, but found ${bi(ji(u))} instead.`);if(!oc(f,["string","array"]))throw new ns(`Expected second argument to be of type array or string, but found ${bi(ji(f))} instead.`);if(this.fromIndex){const y=this.fromIndex.evaluate(i);return f.indexOf(u,y)}return f.indexOf(u)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const i=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),i]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Ih{constructor(i,u,f,y,m,_){this.inputType=i,this.type=u,this.input=f,this.cases=y,this.outputs=m,this.otherwise=_}static parse(i,u){if(i.length<5)return u.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return u.error("Expected an even number of arguments.");let f,y;u.expectedType&&u.expectedType.kind!=="value"&&(y=u.expectedType);const m={},_=[];for(let D=2;D<i.length-1;D+=2){let S=i[D];const V=i[D+1];Array.isArray(S)||(S=[S]);const I=u.concat(D);if(S.length===0)return I.error("Expected at least one branch label.");for(const M of S){if(typeof M!="number"&&typeof M!="string")return I.error("Branch labels must be numbers or strings.");if(typeof M=="number"&&Math.abs(M)>Number.MAX_SAFE_INTEGER)return I.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof M=="number"&&Math.floor(M)!==M)return I.error("Numeric branch labels must be integer values.");if(f){if(I.checkSubtype(f,ji(M)))return null}else f=ji(M);if(m[String(M)]!==void 0)return I.error("Branch labels must be unique.");m[String(M)]=_.length}const O=u.parse(V,D,y);if(!O)return null;y=y||O.type,_.push(O)}const b=u.parse(i[1],1,un);if(!b)return null;const N=u.parse(i[i.length-1],i.length-1,y);return N?b.type.kind!=="value"&&u.concat(1).checkSubtype(f,b.type)?null:new Ih(f,y,b,m,_,N):null}evaluate(i){const u=this.input.evaluate(i);return(ji(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["match",this.input.serialize()],u=Object.keys(this.cases).sort(),f=[],y={};for(const _ of u){const b=y[this.cases[_]];b===void 0?(y[this.cases[_]]=f.length,f.push([this.cases[_],[_]])):f[b][1].push(_)}const m=_=>this.inputType.kind==="number"?Number(_):_;for(const[_,b]of f)i.push(b.length===1?m(b[0]):b.map(m)),i.push(this.outputs[_].serialize());return i.push(this.otherwise.serialize()),i}}class Lh{constructor(i,u,f){this.type=i,this.branches=u,this.otherwise=f}static parse(i,u){if(i.length<4)return u.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return u.error("Expected an odd number of arguments.");let f;u.expectedType&&u.expectedType.kind!=="value"&&(f=u.expectedType);const y=[];for(let _=1;_<i.length-1;_+=2){const b=u.parse(i[_],_,An);if(!b)return null;const N=u.parse(i[_+1],_+1,f);if(!N)return null;y.push([b,N]),f=f||N.type}const m=u.parse(i[i.length-1],i.length-1,f);return m?new Lh(f,y,m):null}evaluate(i){for(const[u,f]of this.branches)if(u.evaluate(i))return f.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[u,f]of this.branches)i(u),i(f);i(this.otherwise)}outputDefined(){return this.branches.every(([i,u])=>u.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["case"];return this.eachChild(u=>{i.push(u.serialize())}),i}}class zd{constructor(i,u,f,y){this.type=i,this.input=u,this.beginIndex=f,this.endIndex=y}static parse(i,u){if(i.length<=2||i.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const f=u.parse(i[1],1,un),y=u.parse(i[2],2,Xa);if(!f||!y)return null;if(!ih(f.type,[Li(un),an,un]))return u.error(`Expected first argument to be of type array or string, but found ${bi(f.type)} instead`);if(i.length===4){const m=u.parse(i[3],3,Xa);return m?new zd(f.type,f,y,m):null}return new zd(f.type,f,y)}evaluate(i){const u=this.input.evaluate(i),f=this.beginIndex.evaluate(i);if(!oc(u,["string","array"]))throw new ns(`Expected first argument to be of type array or string, but found ${bi(ji(u))} instead.`);if(this.endIndex){const y=this.endIndex.evaluate(i);return u.slice(f,y)}return u.slice(f)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const i=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),i]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function gf(d,i){return d==="=="||d==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function Lm(d,i,u,f){return f.compare(i,u)===0}function lh(d,i,u){const f=d!=="=="&&d!=="!=";return class VK{constructor(m,_,b){this.type=An,this.lhs=m,this.rhs=_,this.collator=b,this.hasUntypedArgument=m.type.kind==="value"||_.type.kind==="value"}static parse(m,_){if(m.length!==3&&m.length!==4)return _.error("Expected two or three arguments.");const b=m[0];let N=_.parse(m[1],1,un);if(!N)return null;if(!gf(b,N.type))return _.concat(1).error(`"${b}" comparisons are not supported for type '${bi(N.type)}'.`);let D=_.parse(m[2],2,un);if(!D)return null;if(!gf(b,D.type))return _.concat(2).error(`"${b}" comparisons are not supported for type '${bi(D.type)}'.`);if(N.type.kind!==D.type.kind&&N.type.kind!=="value"&&D.type.kind!=="value")return _.error(`Cannot compare types '${bi(N.type)}' and '${bi(D.type)}'.`);f&&(N.type.kind==="value"&&D.type.kind!=="value"?N=new ko(D.type,[N]):N.type.kind!=="value"&&D.type.kind==="value"&&(D=new ko(N.type,[D])));let S=null;if(m.length===4){if(N.type.kind!=="string"&&D.type.kind!=="string"&&N.type.kind!=="value"&&D.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(S=_.parse(m[3],3,Uo),!S)return null}return new VK(N,D,S)}evaluate(m){const _=this.lhs.evaluate(m),b=this.rhs.evaluate(m);if(f&&this.hasUntypedArgument){const N=ji(_),D=ji(b);if(N.kind!==D.kind||N.kind!=="string"&&N.kind!=="number")throw new ns(`Expected arguments for "${d}" to be (string, string) or (number, number), but found (${N.kind}, ${D.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const N=ji(_),D=ji(b);if(N.kind!=="string"||D.kind!=="string")return i(m,_,b)}return this.collator?u(m,_,b,this.collator.evaluate(m)):i(m,_,b)}eachChild(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)}outputDefined(){return!0}serialize(){const m=[d];return this.eachChild(_=>{m.push(_.serialize())}),m}}}const Vy=lh("==",function(d,i,u){return i===u},Lm),gc=lh("!=",function(d,i,u){return i!==u},function(d,i,u,f){return!Lm(0,i,u,f)}),ju=lh("<",function(d,i,u){return i<u},function(d,i,u,f){return f.compare(i,u)<0}),Ru=lh(">",function(d,i,u){return i>u},function(d,i,u,f){return f.compare(i,u)>0}),zy=lh("<=",function(d,i,u){return i<=u},function(d,i,u,f){return f.compare(i,u)<=0}),Fh=lh(">=",function(d,i,u){return i>=u},function(d,i,u,f){return f.compare(i,u)>=0});class ml{constructor(i,u,f,y,m,_){this.type=an,this.number=i,this.locale=u,this.currency=f,this.unit=y,this.minFractionDigits=m,this.maxFractionDigits=_}static parse(i,u){if(i.length!==3)return u.error("Expected two arguments.");const f=u.parse(i[1],1,Xa);if(!f)return null;const y=i[2];if(typeof y!="object"||Array.isArray(y))return u.error("NumberFormat options argument must be an object.");let m=null;if(y.locale&&(m=u.parseObjectValue(y.locale,2,"locale",an),!m))return null;let _=null;if(y.currency&&(_=u.parseObjectValue(y.currency,2,"currency",an),!_))return null;let b=null;if(y.unit&&(b=u.parseObjectValue(y.unit,2,"unit",an),!b))return null;let N=null;if(y["min-fraction-digits"]&&(N=u.parseObjectValue(y["min-fraction-digits"],2,"min-fraction-digits",Xa),!N))return null;let D=null;return y["max-fraction-digits"]&&(D=u.parseObjectValue(y["max-fraction-digits"],2,"max-fraction-digits",Xa),!D)?null:new ml(f,m,_,b,N,D)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(i):void 0,unit:this.unit?this.unit.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.unit&&i(this.unit),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const i={};return this.locale&&(i.locale=this.locale.serialize()),this.currency&&(i.currency=this.currency.serialize()),this.unit&&(i.unit=this.unit.serialize()),this.minFractionDigits&&(i["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(i["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),i]}}class rl{constructor(i){this.type=Xa,this.input=i}static parse(i,u){if(i.length!==2)return u.error(`Expected 1 argument, but found ${i.length-1} instead.`);const f=u.parse(i[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${bi(f.type)} instead.`):new rl(f):null}evaluate(i){const u=this.input.evaluate(i);if(typeof u=="string"||Array.isArray(u))return u.length;throw new ns(`Expected value to be of type string or array, but found ${bi(ji(u))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){const i=["length"];return this.eachChild(u=>{i.push(u.serialize())}),i}}function Uh(d){return function(){d=1831565813+(d|=0)|0;let i=Math.imul(d^d>>>15,1|d);return i=i+Math.imul(i^i>>>7,61|i)^i,((i^i>>>14)>>>0)/4294967296}}const Od={"==":Vy,"!=":gc,">":Ru,"<":ju,">=":Fh,"<=":zy,array:ko,at:$f,"at-interpolated":yc,boolean:ko,case:Lh,coalesce:Ql,collator:$l,format:Td,image:pu,in:yf,"index-of":Vd,interpolate:Hi,"interpolate-hcl":Hi,"interpolate-lab":Hi,length:rl,let:wu,literal:ql,match:Ih,number:ko,"number-format":ml,object:ko,slice:zd,step:Jl,string:ko,"to-boolean":Hl,"to-color":Hl,"to-number":Hl,"to-string":Hl,var:qi,within:yu,distance:_u,config:Bu};function Gp(d,[i,u,f,y]){i=i.evaluate(d),u=u.evaluate(d),f=f.evaluate(d);const m=y?y.evaluate(d):1,_=Cl(i,u,f,m);if(_)throw new ns(_);return new bn(i/255*m,u/255*m,f/255*m,m)}function jp(d,[i,u,f,y]){i=i.evaluate(d),u=u.evaluate(d),f=f.evaluate(d);const m=y?y.evaluate(d):1,_=function(D,S,V,I){return typeof D=="number"&&D>=0&&D<=360?typeof S=="number"&&S>=0&&S<=100&&typeof V=="number"&&V>=0&&V<=100?I===void 0||typeof I=="number"&&I>=0&&I<=1?null:`Invalid hsla value [${[D,S,V,I].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof I=="number"?[D,S,V,I]:[D,S,V]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof I=="number"?[D,S,V,I]:[D,S,V]).join(", ")}]: 'h' must be between 0 and 360.`}(i,u,f,m);if(_)throw new ns(_);const b=`hsla(${i}, ${u}%, ${f}%, ${m})`,N=bn.parse(b);if(!N)throw new ns(`Failed to parse HSLA color: ${b}`);return N}function Bc(d,i){return d in i}function Af(d,i){const u=i[d];return u===void 0?null:u}function nl(d){return{type:d}}function Dd(d){return{result:"success",value:d}}function Tu(d){return{result:"error",value:d}}function Md(d,i){return!!d&&!!d.parameters&&d.parameters.indexOf(i)>-1}function Gc(d){return d["property-type"]==="data-driven"}function Nl(d){return Md(d.expression,"measure-light")}function Zu(d){return Md(d.expression,"zoom")}function jc(d){return!!d.expression&&d.expression.interpolated}function Kf(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)}function Id(d){return d}function Zc(d,i){const u=i.type==="color",f=d.stops&&typeof d.stops[0][0]=="object",y=f||!(f||d.property!==void 0),m=d.type||(jc(i)?"exponential":"interval");if(u&&((d=Tn({},d)).stops&&(d.stops=d.stops.map(D=>[D[0],bn.parse(D[1])])),d.default=bn.parse(d.default?d.default:i.default)),d.colorSpace&&d.colorSpace!=="rgb"&&!al[d.colorSpace])throw new Error(`Unknown color space: ${d.colorSpace}`);let _,b,N;if(m==="exponential")_=_f;else if(m==="interval")_=Fm;else if(m==="categorical"){_=Zp,b=Object.create(null);for(const D of d.stops)b[D[0]]=D[1];N=typeof d.stops[0][0]}else{if(m!=="identity")throw new Error(`Unknown function type "${m}"`);_=qp}if(f){const D={},S=[];for(let O=0;O<d.stops.length;O++){const M=d.stops[O],B=M[0].zoom;D[B]===void 0&&(D[B]={zoom:B,type:d.type,property:d.property,default:d.default,stops:[]},S.push(B)),D[B].stops.push([M[0].value,M[1]])}const V=[];for(const O of S)V.push([D[O].zoom,Zc(D[O],i)]);const I={name:"linear"};return{kind:"composite",interpolationType:I,interpolationFactor:Hi.interpolationFactor.bind(void 0,I),zoomStops:V.map(O=>O[0]),evaluate:({zoom:O},M)=>_f({stops:V,base:d.base},i,O).evaluate(O,M)}}if(y){const D=m==="exponential"?{name:"exponential",base:d.base!==void 0?d.base:1}:null;return{kind:"camera",interpolationType:D,interpolationFactor:Hi.interpolationFactor.bind(void 0,D),zoomStops:d.stops.map(S=>S[0]),evaluate:({zoom:S})=>_(d,i,S,b,N)}}return{kind:"source",evaluate(D,S){const V=S&&S.properties?S.properties[d.property]:void 0;return V===void 0?Ds(d.default,i.default):_(d,i,V,b,N)}}}function Ds(d,i,u){return d!==void 0?d:i!==void 0?i:u!==void 0?u:void 0}function Zp(d,i,u,f,y){return Ds(typeof u===y?f[u]:void 0,d.default,i.default)}function Fm(d,i,u){if(mu(u)!=="number")return Ds(d.default,i.default);const f=d.stops.length;if(f===1||u<=d.stops[0][0])return d.stops[0][1];if(u>=d.stops[f-1][0])return d.stops[f-1][1];const y=el(d.stops.map(m=>m[0]),u);return d.stops[y][1]}function _f(d,i,u){const f=d.base!==void 0?d.base:1;if(mu(u)!=="number")return Ds(d.default,i.default);const y=d.stops.length;if(y===1||u<=d.stops[0][0])return d.stops[0][1];if(u>=d.stops[y-1][0])return d.stops[y-1][1];const m=el(d.stops.map(S=>S[0]),u),_=function(S,V,I,O){const M=O-I,B=S-I;return M===0?0:V===1?B/M:(Math.pow(V,B)-1)/(Math.pow(V,M)-1)}(u,f,d.stops[m][0],d.stops[m+1][0]),b=d.stops[m][1],N=d.stops[m+1][1];let D=nh[i.type]||Id;if(d.colorSpace&&d.colorSpace!=="rgb"){const S=al[d.colorSpace];D=(V,I)=>S.reverse(S.interpolate(S.forward(V),S.forward(I),_))}return typeof b.evaluate=="function"?{evaluate(...S){const V=b.evaluate.apply(void 0,S),I=N.evaluate.apply(void 0,S);if(V!==void 0&&I!==void 0)return D(V,I,_)}}:D(b,N,_)}function qp(d,i,u){return i.type==="color"?u=bn.parse(u):i.type==="formatted"?u=us.fromString(u.toString()):i.type==="resolvedImage"?u=Ts.build(u.toString()):mu(u)===i.type||i.type==="enum"&&i.values[u]||(u=void 0),Ds(u,d.default,i.default)}Zs.register(Od,{error:[{kind:"error"},[an],(d,[i])=>{throw new ns(i.evaluate(d))}],typeof:[an,[un],(d,[i])=>bi(ji(i.evaluate(d)))],"to-rgba":[Li(Xa,4),[Gs],(d,[i])=>i.evaluate(d).toRenderColor(null).toArray()],"to-hsla":[Li(Xa,4),[Gs],(d,[i])=>i.evaluate(d).toRenderColor(null).toHslaArray()],rgb:[Gs,[Xa,Xa,Xa],Gp],rgba:[Gs,[Xa,Xa,Xa,Xa],Gp],hsl:[Gs,[Xa,Xa,Xa],jp],hsla:[Gs,[Xa,Xa,Xa,Xa],jp],has:{type:An,overloads:[[[an],(d,[i])=>Bc(i.evaluate(d),d.properties())],[[an,wd],(d,[i,u])=>Bc(i.evaluate(d),u.evaluate(d))]]},get:{type:un,overloads:[[[an],(d,[i])=>Af(i.evaluate(d),d.properties())],[[an,wd],(d,[i,u])=>Af(i.evaluate(d),u.evaluate(d))]]},"feature-state":[un,[an],(d,[i])=>Af(i.evaluate(d),d.featureState||{})],properties:[wd,[],d=>d.properties()],"geometry-type":[an,[],d=>d.geometryType()],id:[un,[],d=>d.id()],zoom:[Xa,[],d=>d.globals.zoom],pitch:[Xa,[],d=>d.globals.pitch||0],"distance-from-center":[Xa,[],d=>d.distanceFromCenter()],"measure-light":[Xa,[an],(d,[i])=>d.measureLight(i.evaluate(d))],"heatmap-density":[Xa,[],d=>d.globals.heatmapDensity||0],"line-progress":[Xa,[],d=>d.globals.lineProgress||0],"raster-value":[Xa,[],d=>d.globals.rasterValue||0],"raster-particle-speed":[Xa,[],d=>d.globals.rasterParticleSpeed||0],"sky-radial-progress":[Xa,[],d=>d.globals.skyRadialProgress||0],accumulated:[un,[],d=>d.globals.accumulated===void 0?null:d.globals.accumulated],"+":[Xa,nl(Xa),(d,i)=>{let u=0;for(const f of i)u+=f.evaluate(d);return u}],"*":[Xa,nl(Xa),(d,i)=>{let u=1;for(const f of i)u*=f.evaluate(d);return u}],"-":{type:Xa,overloads:[[[Xa,Xa],(d,[i,u])=>i.evaluate(d)-u.evaluate(d)],[[Xa],(d,[i])=>-i.evaluate(d)]]},"/":[Xa,[Xa,Xa],(d,[i,u])=>i.evaluate(d)/u.evaluate(d)],"%":[Xa,[Xa,Xa],(d,[i,u])=>i.evaluate(d)%u.evaluate(d)],ln2:[Xa,[],()=>Math.LN2],pi:[Xa,[],()=>Math.PI],e:[Xa,[],()=>Math.E],"^":[Xa,[Xa,Xa],(d,[i,u])=>Math.pow(i.evaluate(d),u.evaluate(d))],sqrt:[Xa,[Xa],(d,[i])=>Math.sqrt(i.evaluate(d))],log10:[Xa,[Xa],(d,[i])=>Math.log(i.evaluate(d))/Math.LN10],ln:[Xa,[Xa],(d,[i])=>Math.log(i.evaluate(d))],log2:[Xa,[Xa],(d,[i])=>Math.log(i.evaluate(d))/Math.LN2],sin:[Xa,[Xa],(d,[i])=>Math.sin(i.evaluate(d))],cos:[Xa,[Xa],(d,[i])=>Math.cos(i.evaluate(d))],tan:[Xa,[Xa],(d,[i])=>Math.tan(i.evaluate(d))],asin:[Xa,[Xa],(d,[i])=>Math.asin(i.evaluate(d))],acos:[Xa,[Xa],(d,[i])=>Math.acos(i.evaluate(d))],atan:[Xa,[Xa],(d,[i])=>Math.atan(i.evaluate(d))],min:[Xa,nl(Xa),(d,i)=>Math.min(...i.map(u=>u.evaluate(d)))],max:[Xa,nl(Xa),(d,i)=>Math.max(...i.map(u=>u.evaluate(d)))],abs:[Xa,[Xa],(d,[i])=>Math.abs(i.evaluate(d))],round:[Xa,[Xa],(d,[i])=>{const u=i.evaluate(d);return u<0?-Math.round(-u):Math.round(u)}],floor:[Xa,[Xa],(d,[i])=>Math.floor(i.evaluate(d))],ceil:[Xa,[Xa],(d,[i])=>Math.ceil(i.evaluate(d))],"filter-==":[An,[an,un],(d,[i,u])=>d.properties()[i.value]===u.value],"filter-id-==":[An,[un],(d,[i])=>d.id()===i.value],"filter-type-==":[An,[an],(d,[i])=>d.geometryType()===i.value],"filter-<":[An,[an,un],(d,[i,u])=>{const f=d.properties()[i.value],y=u.value;return typeof f==typeof y&&f<y}],"filter-id-<":[An,[un],(d,[i])=>{const u=d.id(),f=i.value;return typeof u==typeof f&&u<f}],"filter->":[An,[an,un],(d,[i,u])=>{const f=d.properties()[i.value],y=u.value;return typeof f==typeof y&&f>y}],"filter-id->":[An,[un],(d,[i])=>{const u=d.id(),f=i.value;return typeof u==typeof f&&u>f}],"filter-<=":[An,[an,un],(d,[i,u])=>{const f=d.properties()[i.value],y=u.value;return typeof f==typeof y&&f<=y}],"filter-id-<=":[An,[un],(d,[i])=>{const u=d.id(),f=i.value;return typeof u==typeof f&&u<=f}],"filter->=":[An,[an,un],(d,[i,u])=>{const f=d.properties()[i.value],y=u.value;return typeof f==typeof y&&f>=y}],"filter-id->=":[An,[un],(d,[i])=>{const u=d.id(),f=i.value;return typeof u==typeof f&&u>=f}],"filter-has":[An,[un],(d,[i])=>i.value in d.properties()],"filter-has-id":[An,[],d=>d.id()!==null&&d.id()!==void 0],"filter-type-in":[An,[Li(an)],(d,[i])=>i.value.indexOf(d.geometryType())>=0],"filter-id-in":[An,[Li(un)],(d,[i])=>i.value.indexOf(d.id())>=0],"filter-in-small":[An,[an,Li(un)],(d,[i,u])=>u.value.indexOf(d.properties()[i.value])>=0],"filter-in-large":[An,[an,Li(un)],(d,[i,u])=>function(f,y,m,_){for(;m<=_;){const b=m+_>>1;if(y[b]===f)return!0;y[b]>f?_=b-1:m=b+1}return!1}(d.properties()[i.value],u.value,0,u.value.length-1)],all:{type:An,overloads:[[[An,An],(d,[i,u])=>i.evaluate(d)&&u.evaluate(d)],[nl(An),(d,i)=>{for(const u of i)if(!u.evaluate(d))return!1;return!0}]]},any:{type:An,overloads:[[[An,An],(d,[i,u])=>i.evaluate(d)||u.evaluate(d)],[nl(An),(d,i)=>{for(const u of i)if(u.evaluate(d))return!0;return!1}]]},"!":[An,[An],(d,[i])=>!i.evaluate(d)],"is-supported-script":[An,[an],(d,[i])=>{const u=d.globals&&d.globals.isSupportedScript;return!u||u(i.evaluate(d))}],upcase:[an,[an],(d,[i])=>i.evaluate(d).toUpperCase()],downcase:[an,[an],(d,[i])=>i.evaluate(d).toLowerCase()],concat:[an,nl(un),(d,i)=>i.map(u=>js(u.evaluate(d))).join("")],"resolved-locale":[an,[Uo],(d,[i])=>i.evaluate(d).resolvedLocale()],random:[Xa,[Xa,Xa,un],(d,i)=>{const[u,f,y]=i.map(_=>_.evaluate(d));if(u>f||u===f)return u;let m;if(typeof y=="string")m=function(_){let b=0;if(_.length===0)return b;for(let N=0;N<_.length;N++)b=(b<<5)-b+_.charCodeAt(N),b|=0;return b}(y);else{if(typeof y!="number")throw new ns(`Invalid seed input: ${y}`);m=y}return u+Uh(m)()*(f-u)}]});class to{constructor(i,u,f,y){this.expression=i,this._warningHistory={},this._evaluator=new Sd(f,y),this._defaultValue=u?function(m){return m.type==="color"&&(Kf(m.default)||Array.isArray(m.default))?new bn(0,0,0,0):m.type==="color"?bn.parse(m.default)||null:m.default===void 0?null:m.default}(u):null,this._enumValues=u&&u.type==="enum"?u.values:null,this.configDependencies=Xn(i)}evaluateWithoutErrorHandling(i,u,f,y,m,_,b,N){return this._evaluator.globals=i,this._evaluator.feature=u,this._evaluator.featureState=f,this._evaluator.canonical=y||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=_,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=N||null,this.expression.evaluate(this._evaluator)}evaluate(i,u,f,y,m,_,b,N){this._evaluator.globals=i,this._evaluator.feature=u||null,this._evaluator.featureState=f||null,this._evaluator.canonical=y||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=_||null,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=N||null;try{const D=this.expression.evaluate(this._evaluator);if(D==null||typeof D=="number"&&D!=D)return this._defaultValue;if(this._enumValues&&!(D in this._enumValues))throw new ns(`Expected value to be one of ${Object.keys(this._enumValues).map(S=>JSON.stringify(S)).join(", ")}, but found ${JSON.stringify(D)} instead.`);return D}catch(D){return this._warningHistory[D.message]||(this._warningHistory[D.message]=!0,typeof console<"u"&&console.warn(`Failed to evaluate expression "${JSON.stringify(this.expression.serialize())}". ${D.message}`)),this._defaultValue}}}function kh(d){return Array.isArray(d)&&d.length>0&&typeof d[0]=="string"&&d[0]in Od}function G(d,i,u,f){const y=new Xl(Od,[],i?function(_){const b={color:Gs,string:an,number:Xa,enum:an,boolean:An,formatted:fu,resolvedImage:Rs};return _.type==="array"?Li(b[_.value]||un,_.length):b[_.type]}(i):void 0,void 0,void 0,u,f),m=y.parse(d,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?Dd(new to(m,i,u,f)):Tu(y.errors)}class Q{constructor(i,u,f,y){this.kind=i,this._styleExpression=u,this.isLightConstant=f,this.isLineProgressConstant=y,this.isStateDependent=i!=="constant"&&!cs(u.expression),this.configDependencies=Xn(u.expression)}evaluateWithoutErrorHandling(i,u,f,y,m,_){return this._styleExpression.evaluateWithoutErrorHandling(i,u,f,y,m,_)}evaluate(i,u,f,y,m,_){return this._styleExpression.evaluate(i,u,f,y,m,_)}}class fe{constructor(i,u,f,y,m,_){this.kind=i,this.zoomStops=f,this._styleExpression=u,this.isStateDependent=i!=="camera"&&!cs(u.expression),this.isLightConstant=m,this.isLineProgressConstant=_,this.configDependencies=Xn(u.expression),this.interpolationType=y}evaluateWithoutErrorHandling(i,u,f,y,m,_){return this._styleExpression.evaluateWithoutErrorHandling(i,u,f,y,m,_)}evaluate(i,u,f,y,m,_){return this._styleExpression.evaluate(i,u,f,y,m,_)}interpolationFactor(i,u,f){return this.interpolationType?Hi.interpolationFactor(this.interpolationType,i,u,f):0}}function Ne(d,i,u,f){if((d=G(d,i,u,f)).result==="error")return d;const y=d.value.expression,m=Bo(y);if(!m&&!Gc(i))return Tu([new Bs("","data expressions not supported")]);const _=ai(y,["zoom","pitch","distance-from-center"]);if(!_&&!Zu(i))return Tu([new Bs("","zoom expressions not supported")]);const b=ai(y,["measure-light"]);if(!b&&!Nl(i))return Tu([new Bs("","measure-light expression not supported")]);const N=ai(y,["line-progress"]);if(!N&&!function(V){return Md(V.expression,"line-progress")}(i))return Tu([new Bs("","line-progress expression not supported")]);const D=i.expression&&i.expression.relaxZoomRestriction,S=Qe(y);return S||_||D?S instanceof Bs?Tu([S]):S instanceof Hi&&!jc(i)?Tu([new Bs("",'"interpolate" expressions cannot be used with this property')]):Dd(S?new fe(m&&N?"camera":"composite",d.value,S.labels,S instanceof Hi?S.interpolation:void 0,b,N):new Q(m&&N?"constant":"source",d.value,b,N)):Tu([new Bs("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class Ge{constructor(i,u){this._parameters=i,this._specification=u,Tn(this,Zc(this._parameters,this._specification))}static deserialize(i){return new Ge(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function Qe(d){let i=null;if(d instanceof wu)i=Qe(d.result);else if(d instanceof Ql){for(const u of d.args)if(i=Qe(u),i)break}else(d instanceof Jl||d instanceof Hi)&&d.input instanceof Zs&&d.input.name==="zoom"&&(i=d);return i instanceof Bs||d.eachChild(u=>{const f=Qe(u);f instanceof Bs?i=f:i&&f&&i!==f&&(i=new Bs("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}var at,ut,pt=function(){if(ut)return at;ut=1,at=i;var d=3;function i(u,f,y){var m=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;var _=new Int32Array(this.arrayBuffer);u=_[0],this.d=(f=_[1])+2*(y=_[2]);for(var b=0;b<this.d*this.d;b++){var N=_[d+b],D=_[d+b+1];m.push(N===D?null:_.subarray(N,D))}var S=_[d+m.length+1];this.keys=_.subarray(_[d+m.length],S),this.bboxes=_.subarray(S),this.insert=this._insertReadonly}else{this.d=f+2*y;for(var V=0;V<this.d*this.d;V++)m.push([]);this.keys=[],this.bboxes=[]}this.n=f,this.extent=u,this.padding=y,this.scale=f/u,this.uid=0;var I=y/f*u;this.min=-I,this.max=u+I}return i.prototype.insert=function(u,f,y,m,_){this._forEachCell(f,y,m,_,this._insertCell,this.uid++),this.keys.push(u),this.bboxes.push(f),this.bboxes.push(y),this.bboxes.push(m),this.bboxes.push(_)},i.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},i.prototype._insertCell=function(u,f,y,m,_,b){this.cells[_].push(b)},i.prototype.query=function(u,f,y,m,_){var b=this.min,N=this.max;if(u<=b&&f<=b&&N<=y&&N<=m&&!_)return Array.prototype.slice.call(this.keys);var D=[];return this._forEachCell(u,f,y,m,this._queryCell,D,{},_),D},i.prototype._queryCell=function(u,f,y,m,_,b,N,D){var S=this.cells[_];if(S!==null)for(var V=this.keys,I=this.bboxes,O=0;O<S.length;O++){var M=S[O];if(N[M]===void 0){var B=4*M;(D?D(I[B+0],I[B+1],I[B+2],I[B+3]):u<=I[B+2]&&f<=I[B+3]&&y>=I[B+0]&&m>=I[B+1])?(N[M]=!0,b.push(V[M])):N[M]=!1}}},i.prototype._forEachCell=function(u,f,y,m,_,b,N,D){for(var S=this._convertToCellCoord(u),V=this._convertToCellCoord(f),I=this._convertToCellCoord(y),O=this._convertToCellCoord(m),M=S;M<=I;M++)for(var B=V;B<=O;B++){var X=this.d*B+M;if((!D||D(this._convertFromCellCoord(M),this._convertFromCellCoord(B),this._convertFromCellCoord(M+1),this._convertFromCellCoord(B+1)))&&_.call(this,u,f,y,m,X,b,N,D))return}},i.prototype._convertFromCellCoord=function(u){return(u-this.padding)/this.scale},i.prototype._convertToCellCoord=function(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))},i.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var u=this.cells,f=d+this.cells.length+1+1,y=0,m=0;m<this.cells.length;m++)y+=this.cells[m].length;var _=new Int32Array(f+y+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;for(var b=f,N=0;N<u.length;N++){var D=u[N];_[d+N]=b,_.set(D,b),b+=D.length}return _[d+u.length]=b,_.set(this.keys,b),_[d+u.length+1]=b+=this.keys.length,_.set(this.bboxes,b),b+=this.bboxes.length,_.buffer},at}(),Ct=w(pt);const Qt={};function Pt(d,i,u={}){Object.defineProperty(d,"_classRegistryKey",{value:i,writable:!1}),Qt[i]={klass:d,omit:u.omit||[]}}Pt(Object,"Object"),Ct.serialize=function(d,i){const u=d.toArrayBuffer();return i&&i.add(u),{buffer:u}},Ct.deserialize=function(d){return new Ct(d.buffer)},Object.defineProperty(Ct,"name",{value:"Grid"}),Pt(Ct,"Grid"),typeof DOMMatrix<"u"&&Pt(DOMMatrix,"DOMMatrix"),Pt(bn,"Color"),Pt(Error,"Error"),Pt(us,"Formatted"),Pt(Jo,"FormattedSection"),Pt(ks,"AJAXError"),Pt(Ts,"ResolvedImage"),Pt(Ge,"StylePropertyFunction"),Pt(to,"StyleExpression",{omit:["_evaluator"]}),Pt(Fo,"ImageId"),Pt(ku,"ImageVariant"),Pt(fe,"ZoomDependentExpression"),Pt(Q,"ZoomConstantExpression"),Pt(Zs,"CompoundExpression",{omit:["_evaluate"]});for(const d in Od)Qt[Od[d]._classRegistryKey]||Pt(Od[d],`Expression${d}`);function Aa(d){return d&&typeof ArrayBuffer<"u"&&(d instanceof ArrayBuffer||d.constructor&&d.constructor.name==="ArrayBuffer")}function ra(d){return self.ImageBitmap&&d instanceof ImageBitmap}function wa(d,i){if(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp)return d;if(Aa(d)||ra(d))return i&&i.add(d),d;if(ArrayBuffer.isView(d))return i&&i.add(d.buffer),d;if(d instanceof ImageData)return i&&i.add(d.data.buffer),d;if(Array.isArray(d)){const u=[];for(const f of d)u.push(wa(f,i));return u}if(d instanceof Map){const u={$name:"Map",entries:[]};for(const[f,y]of d.entries())u.entries.push(wa(f),wa(y));return u}if(d instanceof Set){const u={$name:"Set"};let f=0;for(const y of d.values())u[++f]=wa(y);return u}if(d instanceof DOMMatrix){const u={$name:"DOMMatrix"},f=["is2D","m11","m12","m13","m14","m21","m22","m23","m24","m31","m32","m33","m34","m41","m42","m43","m44","a","b","c","d","e","f"];for(const y of f)u[y]=d[y];return u}if(typeof d=="bigint")return{$name:"BigInt",value:d.toString()};if(typeof d=="object"){const u=d.constructor,f=u._classRegistryKey;if(!f)throw new Error(`Can't serialize object of unregistered class "${u.name}".`);const y=u.serialize?u.serialize(d,i):{};if(!u.serialize){for(const m in d)d.hasOwnProperty(m)&&(Qt[f].omit.indexOf(m)>=0||(y[m]=wa(d[m],i)));d instanceof Error&&(y.message=d.message)}if(y.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(y.$name=f),y}throw new Error("can't serialize object of type "+typeof d)}function fa(d){if(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp||Aa(d)||ra(d)||ArrayBuffer.isView(d)||d instanceof ImageData)return d;if(Array.isArray(d))return d.map(fa);if(typeof d=="object"){const i=d.$name||"Object";if(i==="Map"){const y=d.entries||[],m=new Map;for(let _=0;_<y.length;_+=2)m.set(fa(y[_]),fa(y[_+1]));return m}if(i==="Set"){const y=new Set;for(const m of Object.keys(d))m!=="$name"&&y.add(fa(d[m]));return y}if(i==="DOMMatrix"){let y;return y=d.is2D?[d.a,d.b,d.c,d.d,d.e,d.f]:[d.m11,d.m12,d.m13,d.m14,d.m21,d.m22,d.m23,d.m24,d.m31,d.m32,d.m33,d.m34,d.m41,d.m42,d.m43,d.m44],new DOMMatrix(y)}if(i==="BigInt")return BigInt(d.value);const{klass:u}=Qt[i];if(!u)throw new Error(`Can't deserialize unregistered class "${i}".`);if(u.deserialize)return u.deserialize(d);const f=Object.create(u.prototype);for(const y of Object.keys(d))y!=="$name"&&(f[y]=fa(d[y]));return f}throw new Error("can't deserialize object of type "+typeof d)}const vt={"Latin-1 Supplement":d=>d>=128&&d<=255,Arabic:d=>d>=1536&&d<=1791,"Arabic Supplement":d=>d>=1872&&d<=1919,"Arabic Extended-A":d=>d>=2208&&d<=2303,"Hangul Jamo":d=>d>=4352&&d<=4607,"Unified Canadian Aboriginal Syllabics":d=>d>=5120&&d<=5759,Khmer:d=>d>=6016&&d<=6143,"Unified Canadian Aboriginal Syllabics Extended":d=>d>=6320&&d<=6399,"General Punctuation":d=>d>=8192&&d<=8303,"Letterlike Symbols":d=>d>=8448&&d<=8527,"Number Forms":d=>d>=8528&&d<=8591,"Miscellaneous Technical":d=>d>=8960&&d<=9215,"Control Pictures":d=>d>=9216&&d<=9279,"Optical Character Recognition":d=>d>=9280&&d<=9311,"Enclosed Alphanumerics":d=>d>=9312&&d<=9471,"Geometric Shapes":d=>d>=9632&&d<=9727,"Miscellaneous Symbols":d=>d>=9728&&d<=9983,"Miscellaneous Symbols and Arrows":d=>d>=11008&&d<=11263,"CJK Radicals Supplement":d=>d>=11904&&d<=12031,"Kangxi Radicals":d=>d>=12032&&d<=12255,"Ideographic Description Characters":d=>d>=12272&&d<=12287,"CJK Symbols and Punctuation":d=>d>=12288&&d<=12351,Hiragana:d=>d>=12352&&d<=12447,Katakana:d=>d>=12448&&d<=12543,Bopomofo:d=>d>=12544&&d<=12591,"Hangul Compatibility Jamo":d=>d>=12592&&d<=12687,Kanbun:d=>d>=12688&&d<=12703,"Bopomofo Extended":d=>d>=12704&&d<=12735,"CJK Strokes":d=>d>=12736&&d<=12783,"Katakana Phonetic Extensions":d=>d>=12784&&d<=12799,"Enclosed CJK Letters and Months":d=>d>=12800&&d<=13055,"CJK Compatibility":d=>d>=13056&&d<=13311,"CJK Unified Ideographs Extension A":d=>d>=13312&&d<=19903,"Yijing Hexagram Symbols":d=>d>=19904&&d<=19967,"CJK Unified Ideographs":d=>d>=19968&&d<=40959,"Yi Syllables":d=>d>=40960&&d<=42127,"Yi Radicals":d=>d>=42128&&d<=42191,"Hangul Jamo Extended-A":d=>d>=43360&&d<=43391,"Hangul Syllables":d=>d>=44032&&d<=55215,"Hangul Jamo Extended-B":d=>d>=55216&&d<=55295,"Private Use Area":d=>d>=57344&&d<=63743,"CJK Compatibility Ideographs":d=>d>=63744&&d<=64255,"Arabic Presentation Forms-A":d=>d>=64336&&d<=65023,"Vertical Forms":d=>d>=65040&&d<=65055,"CJK Compatibility Forms":d=>d>=65072&&d<=65103,"Small Form Variants":d=>d>=65104&&d<=65135,"Arabic Presentation Forms-B":d=>d>=65136&&d<=65279,"Halfwidth and Fullwidth Forms":d=>d>=65280&&d<=65519,Osage:d=>d>=66736&&d<=66815,"CJK Unified Ideographs Extension B":d=>d>=131072&&d<=173791};function ta(d){for(const i of d)if(qa(i.charCodeAt(0)))return!0;return!1}function Ga(d){for(const i of d)if(!Ka(i.charCodeAt(0)))return!1;return!0}function Ka(d){return!(vt.Arabic(d)||vt["Arabic Supplement"](d)||vt["Arabic Extended-A"](d)||vt["Arabic Presentation Forms-A"](d)||vt["Arabic Presentation Forms-B"](d))}function qa(d){return!(d!==746&&d!==747&&(d<4352||!(vt["Bopomofo Extended"](d)||vt.Bopomofo(d)||vt["CJK Compatibility Forms"](d)&&!(d>=65097&&d<=65103)||vt["CJK Compatibility Ideographs"](d)||vt["CJK Compatibility"](d)||vt["CJK Radicals Supplement"](d)||vt["CJK Strokes"](d)||!(!vt["CJK Symbols and Punctuation"](d)||d>=12296&&d<=12305||d>=12308&&d<=12319||d===12336)||vt["CJK Unified Ideographs Extension A"](d)||vt["CJK Unified Ideographs"](d)||vt["Enclosed CJK Letters and Months"](d)||vt["Hangul Compatibility Jamo"](d)||vt["Hangul Jamo Extended-A"](d)||vt["Hangul Jamo Extended-B"](d)||vt["Hangul Jamo"](d)||vt["Hangul Syllables"](d)||vt.Hiragana(d)||vt["Ideographic Description Characters"](d)||vt.Kanbun(d)||vt["Kangxi Radicals"](d)||vt["Katakana Phonetic Extensions"](d)||vt.Katakana(d)&&d!==12540||!(!vt["Halfwidth and Fullwidth Forms"](d)||d===65288||d===65289||d===65293||d>=65306&&d<=65310||d===65339||d===65341||d===65343||d>=65371&&d<=65503||d===65507||d>=65512&&d<=65519)||!(!vt["Small Form Variants"](d)||d>=65112&&d<=65118||d>=65123&&d<=65126)||vt["Unified Canadian Aboriginal Syllabics"](d)||vt["Unified Canadian Aboriginal Syllabics Extended"](d)||vt["Vertical Forms"](d)||vt["Yijing Hexagram Symbols"](d)||vt["Yi Syllables"](d)||vt["Yi Radicals"](d))))}function Sr(d){return!(qa(d)||function(i){return!!(vt["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||vt["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||vt["Letterlike Symbols"](i)||vt["Number Forms"](i)||vt["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||vt["Control Pictures"](i)&&i!==9251||vt["Optical Character Recognition"](i)||vt["Enclosed Alphanumerics"](i)||vt["Geometric Shapes"](i)||vt["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||vt["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||vt["CJK Symbols and Punctuation"](i)||vt.Katakana(i)||vt["Private Use Area"](i)||vt["CJK Compatibility Forms"](i)||vt["Small Form Variants"](i)||vt["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(d))}function fr(d){return vt.Arabic(d)||vt["Arabic Supplement"](d)||vt["Arabic Extended-A"](d)||vt["Arabic Presentation Forms-A"](d)||vt["Arabic Presentation Forms-B"](d)}function rn(d){return d>=1424&&d<=2303||vt["Arabic Presentation Forms-A"](d)||vt["Arabic Presentation Forms-B"](d)}function lr(d,i){return!(!i&&rn(d)||d>=2304&&d<=3583||d>=3840&&d<=4255||vt.Khmer(d))}function vi(d){for(const i of d)if(rn(i.charCodeAt(0)))return!0;return!1}const xi="deferred",qn="loading",ri="loaded";let $i=null,kn="unavailable",_n=null;const ds=function(d){d&&typeof d=="string"&&d.indexOf("NetworkError")>-1&&(kn="error"),$i&&$i(d)};function Fi(){Bn.fire(new Lo("pluginStateChange",{pluginStatus:kn,pluginURL:_n}))}const Bn=new Zl,po=function(){return kn},wi=function(){if(kn!==xi||!_n)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");kn=qn,Fi(),_n&&zi({url:_n},d=>{d?ds(d):(kn=ri,Fi())})},ss={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>kn===ri||ss.applyArabicShaping!=null,isLoading:()=>kn===qn,setState(d){kn=d.pluginStatus,_n=d.pluginURL},isParsed:()=>ss.applyArabicShaping!=null&&ss.processBidirectionalText!=null&&ss.processStyledBidirectionalText!=null,getPluginURL:()=>_n};class vn{constructor(i,u){this.zoom=i,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.transition=u.transition,this.pitch=u.pitch,this.brightness=u.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(i){return function(u,f){for(const y of u)if(!lr(y.charCodeAt(0),f))return!1;return!0}(i,ss.isLoaded())}}class Ii{constructor(i,u,f,y){this.property=i,this.value=u,this.expression=function(m,_,b,N){if(Kf(m))return new Ge(m,_);if(kh(m)||Array.isArray(m)&&m.length>0){const D=Ne(m,_,b,N);if(D.result==="error")throw new Error(D.value.map(S=>`${S.key}: ${S.message}`).join(", "));return D.value}{let D=m;return typeof m=="string"&&_.type==="color"&&(D=bn.parse(m)),{kind:"constant",configDependencies:new Set,evaluate:()=>D}}}(u===void 0?i.specification.default:u,i.specification,f,y)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,u,f){return this.property.possiblyEvaluate(this,i,u,f)}}class Hs{constructor(i,u,f){this.property=i,this.value=new Ii(i,void 0,u,f)}transitioned(i,u){return new il(this.property,this.value,u,Rn({},i.transition,this.transition),i.now)}untransitioned(){return new il(this.property,this.value,null,{},0)}}class To{constructor(i,u,f){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues),this._scope=u,this._options=f,this.configDependencies=new Set}getValue(i){return Mn(this._values[i].value.value)}setValue(i,u){this._values.hasOwnProperty(i)||(this._values[i]=new Hs(this._values[i].property,this._scope,this._options)),this._values[i].value=new Ii(this._values[i].property,u===null?void 0:Mn(u),this._scope,this._options),this._values[i].value.expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[i].value.expression.configDependencies]))}setTransitionOrValue(i,u){u&&(this._options=u);const f=this._properties.properties;if(i)for(const y in i){const m=i[y];if(y.endsWith("-transition")){const _=y.slice(0,-11);f[_]&&this.setTransition(_,m)}else f.hasOwnProperty(y)&&this.setValue(y,m)}}getTransition(i){return Mn(this._values[i].transition)}setTransition(i,u){this._values.hasOwnProperty(i)||(this._values[i]=new Hs(this._values[i].property)),this._values[i].transition=Mn(u)||void 0}serialize(){const i={};for(const u of Object.keys(this._values)){const f=this.getValue(u);f!==void 0&&(i[u]=f);const y=this.getTransition(u);y!==void 0&&(i[`${u}-transition`]=y)}return i}transitioned(i,u){const f=new Vl(this._properties);for(const y of Object.keys(this._values))f._values[y]=this._values[y].transitioned(i,u._values[y]);return f}untransitioned(){const i=new Vl(this._properties);for(const u of Object.keys(this._values))i._values[u]=this._values[u].untransitioned();return i}}class il{constructor(i,u,f,y,m){const _=y.delay||0,b=y.duration||0;m=m||0,this.property=i,this.value=u,this.begin=m+_,this.end=this.begin+b,i.specification.transition&&(y.delay||y.duration)&&(this.prior=f)}possiblyEvaluate(i,u,f){const y=i.now||0,m=this.value.possiblyEvaluate(i,u,f),_=this.prior;if(_){if(y>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(y<this.begin)return _.possiblyEvaluate(i,u,f);{const b=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(i,u,f),m,cr(b))}}return m}}class Vl{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,u,f){const y=new Su(this._properties);for(const m of Object.keys(this._values))y._values[m]=this._values[m].possiblyEvaluate(i,u,f);return y}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class xs{constructor(i,u,f){this._properties=i,this._values=Object.create(i.defaultPropertyValues),this._scope=u,this._options=f,this.configDependencies=new Set}getValue(i){return Mn(this._values[i].value)}setValue(i,u){this._values[i]=new Ii(this._values[i].property,u===null?void 0:Mn(u),this._scope,this._options),this._values[i].expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[i].expression.configDependencies]))}serialize(){const i={};for(const u of Object.keys(this._values)){const f=this.getValue(u);f!==void 0&&(i[u]=f)}return i}possiblyEvaluate(i,u,f){const y=new Su(this._properties);for(const m of Object.keys(this._values))y._values[m]=this._values[m].possiblyEvaluate(i,u,f);return y}}class zl{constructor(i,u,f){this.property=i,this.value=u,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,u,f,y){return this.property.evaluate(this.value,this.parameters,i,u,f,y)}}class Su{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class Ca{constructor(i){this.specification=i}possiblyEvaluate(i,u){return i.expression.evaluate(u)}interpolate(i,u,f){const y=nh[this.specification.type];return y?y(i,u,f):i}}class Ua{constructor(i,u){this.specification=i,this.overrides=u}possiblyEvaluate(i,u,f,y){return new zl(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(u,null,{},f,y)}:i.expression,u)}interpolate(i,u,f){if(i.value.kind!=="constant"||u.value.kind!=="constant")return i;if(i.value.value===void 0||u.value.value===void 0)return new zl(this,{kind:"constant",value:void 0},i.parameters);const y=nh[this.specification.type];return y?new zl(this,{kind:"constant",value:y(i.value.value,u.value.value,f)},i.parameters):i}evaluate(i,u,f,y,m,_){return i.kind==="constant"?i.value:i.evaluate(u,f,y,m,_)}}class Ki{constructor(i){this.specification=i}possiblyEvaluate(i,u,f,y){return!!i.expression.evaluate(u,null,{},f,y)}interpolate(){return!1}}class Oi{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const u=new vn(0,{});for(const f in i){const y=i[f];y.specification.overridable&&this.overridableProperties.push(f);const m=this.defaultPropertyValues[f]=new Ii(y,void 0),_=this.defaultTransitionablePropertyValues[f]=new Hs(y);this.defaultTransitioningPropertyValues[f]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=m.possiblyEvaluate(u)}}}Pt(Ua,"DataDrivenProperty"),Pt(Ca,"DataConstantProperty"),Pt(Ki,"ColorRampProperty");var Gt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"snow":{"type":"snow","experimental":true},"rain":{"type":"rain","experimental":true},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"indoor":{"type":"indoor","experimental":true},"imports":{"type":"array","value":"import"},"iconsets":{"experimental":true,"type":"iconsets"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"},"featuresets":{"experimental":true,"type":"featuresets"}},"featuresets":{"experimental":true,"*":{"type":"featureset"}},"featureset":{"experimental":true,"metadata":{"experimental":true,"type":"*"},"selectors":{"experimental":true,"type":"array","value":"selector"}},"selector":{"experimental":true,"layer":{"experimental":true,"type":"string","required":true},"properties":{"experimental":true,"type":"selectorProperty","required":false},"featureNamespace":{"experimental":true,"type":"string","required":false},"_uniqueFeatureID":{"experimental":true,"type":"boolean","private":true,"required":false}},"selectorProperty":{"experimental":true,"*":{"experimental":true,"type":"*"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"},"color-theme":{"type":"colorTheme","optional":true}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","property-type":"data-constant","expression":{},"required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"property-type":"data-constant"},"shadow-quality":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"parameters":["zoom"]},"experimental":true},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"iconsets":{"*":{"type":"iconset"}},"iconset":["iconset_sprite","iconset_source"],"iconset_sprite":{"type":{"required":true,"type":"enum","values":{"sprite":1}},"url":{"required":true,"type":"string"}},"iconset_source":{"type":{"required":true,"type":"enum","values":{"source":1}},"source":{"required":true,"type":"string"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"experimental":true,"type":{"required":true,"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"raster-particle":{"experimental":true},"hillshade":{},"model":{"experimental":true},"background":{},"sky":{},"slot":{},"clip":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{},"property-type":"data-constant"},"clip-layer-scope":{"type":"array","value":"string","default":[],"expression":{},"property-type":"data-constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-base":1,"hd-road-markup":1},"default":"none","experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"fill-construct-bridge-guard-rail":{"type":"boolean","default":"true","experimental":true,"private":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"circle-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-markup":1},"default":"none","experimental":true,"expression":{},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","experimental":true,"default":0,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"line-elevation-reference":{"type":"enum","values":{"none":1,"sea":1,"ground":1,"hd-road-markup":1},"default":"none","experimental":true,"expression":{},"property-type":"data-constant"},"line-cross-slope":{"type":"number","experimental":true,"expression":{},"property-type":"constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"line-width-unit":{"type":"enum","values":{"pixels":1,"meters":1},"default":"pixels","experimental":true,"private":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-elevation-reference":{"type":"enum","values":{"sea":1,"ground":1,"hd-road-markup":1},"default":"ground","experimental":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_hillshade":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster-particle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_clip":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_model":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"snow":{"density":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.85],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.3],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","property-type":"data-constant","default":"#ffffff","experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"center-thinning":{"type":"number","property-type":"data-constant","default":0.4,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,50],"minimum":0,"maximum":360,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"flake-size":{"type":"number","property-type":"data-constant","default":0.71,"minimum":0,"maximum":5,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"rain":{"density":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.5],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,"#03113d",0.3,"#a8adbc"],"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,0.88,1,0.7],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,1],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,"#001736",0.3,"#464646"],"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"center-thinning":{"type":"number","property-type":"data-constant","default":0.57,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,80],"minimum":0,"maximum":360,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"droplet-size":{"type":"array","default":[2.6,18.2],"minimum":0,"maximum":50,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"distortion-strength":{"type":"number","property-type":"data-constant","default":0.7,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"colorTheme":{"data":{"type":"string","property-type":"data-constant","expression":{}}},"indoor":{"floorplanFeaturesetId":{"type":"string","experimental":true,"property-type":"data-constant","expression":{}},"buildingFeaturesetId":{"type":"string","experimental":true,"property-type":"data-constant","expression":{}}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"fill-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-bridge-guard-rail-color":{"type":"color","default":"rgba(241, 236, 225, 255)","experimental":true,"private":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"},"fill-tunnel-structure-color":{"type":"color","default":"rgba(241, 236, 225, 255)","transition":true,"experimental":true,"private":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-height-alignment":{"type":"enum","experimental":true,"values":{"terrain":1,"flat":1},"default":"flat","property-type":"data-constant"},"fill-extrusion-base-alignment":{"type":"enum","experimental":true,"values":{"terrain":1,"flat":1},"default":"terrain","property-type":"data-constant"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","experimental":true,"default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","experimental":true,"default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"experimental":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"fill-extrusion-line-width":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light","line-progress"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-trim-fade-range":{"type":"array","value":"number","experimental":true,"length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-trim-color":{"type":"color","experimental":true,"default":"transparent","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"property-type":"data-constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"symbol-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"experimental":true,"property-type":"data-constant"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-particle-count":{"type":"number","default":512,"minimum":1,"property-type":"data-constant"},"raster-particle-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-particle-speed"]},"property-type":"color-ramp"},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1,"property-type":"data-constant"},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1,"property-type":"data-constant"},"raster-particle-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":[]},"experimental":true,"property-type":"data-constant"},"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"property-type":"data-driven"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"model-front-cutoff":{"type":"array","private":true,"value":"number","property-type":"data-constant","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"*"}}}');function Hp(d){return d instanceof Number||d instanceof String||d instanceof Boolean?d.valueOf():d}function uh(d){if(Array.isArray(d))return d.map(uh);if(d instanceof Object&&!(d instanceof Number||d instanceof String||d instanceof Boolean)){const i={};for(const u in d)i[u]=uh(d[u]);return i}return Hp(d)}function ch(d){if(d===!0||d===!1)return!0;if(!Array.isArray(d)||d.length===0)return!1;switch(d[0]){case"has":return d.length>=2&&d[1]!=="$id"&&d[1]!=="$type";case"in":return d.length>=3&&(typeof d[1]!="string"||Array.isArray(d[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return d.length!==3||Array.isArray(d[1])||Array.isArray(d[2]);case"any":case"all":for(const i of d.slice(1))if(!ch(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}function dh(d,i="",u=null,f="fill"){if(d==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};ch(d)||(d=fh(d));const y=d;let m=!0;try{m=function(S){if(!qu(S))return S;let V=uh(S);return hh(V),V=Cu(V),V}(y)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(y,null,2)}
        `)}let _=null,b=null;if(f!=="background"&&f!=="sky"&&f!=="slot"){b=Gt[`filter_${f}`];const S=G(m,b,i,u);if(S.result==="error")throw new Error(S.value.map(V=>`${V.key}: ${V.message}`).join(", "));_=(V,I,O)=>S.value.evaluate(V,I,{},O)}let N=null,D=null;if(m!==y){const S=G(y,b,i,u);if(S.result==="error")throw new Error(S.value.map(V=>`${V.key}: ${V.message}`).join(", "));N=(V,I,O,M,B)=>S.value.evaluate(V,I,{},O,void 0,void 0,M,B),D=!Bo(S.value.expression)}return{filter:_,dynamicFilter:N||void 0,needGeometry:km(m),needFeature:!!D}}function Cu(d){if(!Array.isArray(d))return d;const i=function(u){if(Um.has(u[0])){for(let f=1;f<u.length;f++)if(qu(u[f]))return!0}return u}(d);return i===!0?i:i.map(u=>Cu(u))}function hh(d){let i=!1;const u=[];if(d[0]==="case"){for(let f=1;f<d.length-1;f+=2)i=i||qu(d[f]),u.push(d[f+1]);u.push(d[d.length-1])}else if(d[0]==="match"){i=i||qu(d[1]);for(let f=2;f<d.length-1;f+=2)u.push(d[f+1]);u.push(d[d.length-1])}else if(d[0]==="step"){i=i||qu(d[1]);for(let f=1;f<d.length-1;f+=2)u.push(d[f+1])}i&&(d.length=0,d.push("any",...u));for(let f=1;f<d.length;f++)hh(d[f])}function qu(d){if(!Array.isArray(d))return!1;if((i=d[0])==="pitch"||i==="distance-from-center")return!0;var i;for(let u=1;u<d.length;u++)if(qu(d[u]))return!0;return!1}const Um=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Wf(d,i){return d<i?-1:d>i?1:0}function km(d){if(!Array.isArray(d))return!1;if(d[0]==="within"||d[0]==="distance")return!0;for(let i=1;i<d.length;i++)if(km(d[i]))return!0;return!1}function fh(d){if(!d)return!0;const i=d[0];return d.length<=1?i!=="any":i==="=="?Ol(d[1],d[2],"=="):i==="!="?Hc(Ol(d[1],d[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Ol(d[1],d[2],i):i==="any"?(u=d.slice(1),["any"].concat(u.map(fh))):i==="all"?["all"].concat(d.slice(1).map(fh)):i==="none"?["all"].concat(d.slice(1).map(fh).map(Hc)):i==="in"?Bh(d[1],d.slice(2)):i==="!in"?Hc(Bh(d[1],d.slice(2))):i==="has"?qc(d[1]):i!=="!has"||Hc(qc(d[1]));var u}function Ol(d,i,u){switch(d){case"$type":return[`filter-type-${u}`,i];case"$id":return[`filter-id-${u}`,i];default:return[`filter-${u}`,d,i]}}function Bh(d,i){if(i.length===0)return!1;switch(d){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(u=>typeof u!=typeof i[0])?["filter-in-large",d,["literal",i.sort(Wf)]]:["filter-in-small",d,["literal",i]]}}function qc(d){switch(d){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",d]}}function Hc(d){return["!",d]}const Yf="";function $c(d,i){return i?`${d}${Yf}${i}`:d}const sl="-transition",Bm=new Set(["fill","line","background","hillshade","raster"]);class ao extends Zl{constructor(i,u,f,y,m){if(super(),this.id=i.id,this.fqid=$c(this.id,f),this.type=i.type,this.scope=f,this.lut=y,this.options=m,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.configDependencies=new Set,i.type!=="custom"){if(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type&&i.type!=="background"&&i.type!=="sky"&&i.type!=="slot"){this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter;const _=G(this.filter,Gt[`filter_${i.type}`]);_.result!=="error"&&(this.configDependencies=new Set([...this.configDependencies,..._.value.configDependencies]))}if(i.slot&&(this.slot=i.slot),u.layout&&(this._unevaluatedLayout=new xs(u.layout,this.scope,m),this.configDependencies=new Set([...this.configDependencies,...this._unevaluatedLayout.configDependencies])),u.paint){this._transitionablePaint=new To(u.paint,this.scope,m);for(const _ in i.paint)this.setPaintProperty(_,i.paint[_]);for(const _ in i.layout)this.setLayoutProperty(_,i.layout[_]);this.configDependencies=new Set([...this.configDependencies,...this._transitionablePaint.configDependencies]),this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Su(u.paint)}}}onAdd(i){}onRemove(i){}isDraped(i){return!this.is3D(!0)&&Bm.has(this.type)}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,u){if(this.type==="custom"&&i==="visibility")return void(this.visibility=u);const f=this._unevaluatedLayout;f._properties.properties[i]&&(f.setValue(i,u),this.configDependencies=new Set([...this.configDependencies,...f.configDependencies]),i==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this._unevaluatedLayout._values.visibility&&(this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0}))}getPaintProperty(i){return i.endsWith(sl)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,u){const f=this._transitionablePaint,y=f._properties.properties;if(i.endsWith(sl)){const V=i.slice(0,-11);return y[V]&&f.setTransition(V,u||void 0),!1}if(!y[i])return!1;const m=f._values[i],_=m.value.isDataDriven(),b=m.value;f.setValue(i,u),this.configDependencies=new Set([...this.configDependencies,...f.configDependencies]),this._handleSpecialPaintPropertyUpdate(i);const N=f._values[i].value,D=N.isDataDriven(),S=i.endsWith("pattern")||i==="line-dasharray";return D||_||S||this._handleOverridablePaintPropertyUpdate(i,b,N)}_handleSpecialPaintPropertyUpdate(i){}getProgramIds(){return null}getDefaultProgramParams(i,u,f){return null}_handleOverridablePaintPropertyUpdate(i,u,f){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,u){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,u)}serialize(){return Zn({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(i,u)=>!(i===void 0||u==="layout"&&!Object.keys(i).length||u==="paint"&&!Object.keys(i).length))}is3D(i){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const i in this.paint._values){const u=this.paint.get(i);if(u instanceof zl&&Gc(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}compileFilter(i){this._filterCompiled||(this._featureFilter=dh(this.filter,this.scope,i),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(i){this._stats&&(i.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}queryRadius(i){}queryIntersectsFeature(i,u,f,y,m,_,b,N,D){}}const Oy={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ph{constructor(i,u){this._structArray=i,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ni{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,u){return i._trim(),u&&(i.isTransferred=!0,u.add(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const u=Object.create(this.prototype);return u.arrayBuffer=i.arrayBuffer,u.length=i.length,u.capacity=i.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...i){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...i){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function xn(d,i=1){let u=0,f=0;return{members:d.map(y=>{const m=Oy[y.type].BYTES_PER_ELEMENT,_=u=Xf(u,Math.max(i,m)),b=y.components||1;return f=Math.max(f,m),u+=m*b,{name:y.name,type:y.type,components:b,offset:_}}),size:Xf(u,Math.max(f,i)),alignment:i}}function Xf(d,i){return Math.ceil(d/i)*i}class bu extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u){const f=this.length;return this.resize(f+1),this.emplace(f,i,u)}emplace(i,u,f){const y=2*i;return this.int16[y+0]=u,this.int16[y+1]=f,i}}bu.prototype.bytesPerElement=4,Pt(bu,"StructArrayLayout2i4");class Ld extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,f){const y=this.length;return this.resize(y+1),this.emplace(y,i,u,f)}emplace(i,u,f,y){const m=3*i;return this.int16[m+0]=u,this.int16[m+1]=f,this.int16[m+2]=y,i}}Ld.prototype.bytesPerElement=6,Pt(Ld,"StructArrayLayout3i6");class xu extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,f,y){const m=this.length;return this.resize(m+1),this.emplace(m,i,u,f,y)}emplace(i,u,f,y,m){const _=4*i;return this.int16[_+0]=u,this.int16[_+1]=f,this.int16[_+2]=y,this.int16[_+3]=m,i}}xu.prototype.bytesPerElement=8,Pt(xu,"StructArrayLayout4i8");class Kc extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.float32[1*i+0]=u,i}}Kc.prototype.bytesPerElement=4,Pt(Kc,"StructArrayLayout1f4");class vf extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f){const y=this.length;return this.resize(y+1),this.emplace(y,i,u,f)}emplace(i,u,f,y){const m=4*i,_=2*i;return this.int16[m+0]=u,this.int16[m+1]=f,this.float32[_+1]=y,i}}vf.prototype.bytesPerElement=8,Pt(vf,"StructArrayLayout2i1f8");class Gh extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,f){const y=this.length;return this.resize(y+1),this.emplace(y,i,u,f)}emplace(i,u,f,y){const m=4*i;return this.int16[m+0]=u,this.int16[m+1]=f,this.int16[m+2]=y,i}}Gh.prototype.bytesPerElement=8,Pt(Gh,"StructArrayLayout3i8");class Dl extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m){const _=this.length;return this.resize(_+1),this.emplace(_,i,u,f,y,m)}emplace(i,u,f,y,m,_){const b=5*i;return this.int16[b+0]=u,this.int16[b+1]=f,this.int16[b+2]=y,this.int16[b+3]=m,this.int16[b+4]=_,i}}Dl.prototype.bytesPerElement=10,Pt(Dl,"StructArrayLayout5i10");class wf extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b){const N=this.length;return this.resize(N+1),this.emplace(N,i,u,f,y,m,_,b)}emplace(i,u,f,y,m,_,b,N){const D=6*i,S=12*i,V=3*i;return this.int16[D+0]=u,this.int16[D+1]=f,this.uint8[S+4]=y,this.uint8[S+5]=m,this.uint8[S+6]=_,this.uint8[S+7]=b,this.float32[V+2]=N,i}}wf.prototype.bytesPerElement=12,Pt(wf,"StructArrayLayout2i4ub1f12");class So extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f){const y=this.length;return this.resize(y+1),this.emplace(y,i,u,f)}emplace(i,u,f,y){const m=3*i;return this.float32[m+0]=u,this.float32[m+1]=f,this.float32[m+2]=y,i}}So.prototype.bytesPerElement=12,Pt(So,"StructArrayLayout3f12");class Fd extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m){const _=this.length;return this.resize(_+1),this.emplace(_,i,u,f,y,m)}emplace(i,u,f,y,m,_){const b=6*i,N=3*i;return this.uint16[b+0]=u,this.uint16[b+1]=f,this.uint16[b+2]=y,this.uint16[b+3]=m,this.float32[N+2]=_,i}}Fd.prototype.bytesPerElement=12,Pt(Fd,"StructArrayLayout4ui1f12");class Jf extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,f,y){const m=this.length;return this.resize(m+1),this.emplace(m,i,u,f,y)}emplace(i,u,f,y,m){const _=4*i;return this.uint16[_+0]=u,this.uint16[_+1]=f,this.uint16[_+2]=y,this.uint16[_+3]=m,i}}Jf.prototype.bytesPerElement=8,Pt(Jf,"StructArrayLayout4ui8");class Qf extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_){const b=this.length;return this.resize(b+1),this.emplace(b,i,u,f,y,m,_)}emplace(i,u,f,y,m,_,b){const N=6*i;return this.int16[N+0]=u,this.int16[N+1]=f,this.int16[N+2]=y,this.int16[N+3]=m,this.int16[N+4]=_,this.int16[N+5]=b,i}}Qf.prototype.bytesPerElement=12,Pt(Qf,"StructArrayLayout6i12");class mh extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b,N,D,S,V,I){const O=this.length;return this.resize(O+1),this.emplace(O,i,u,f,y,m,_,b,N,D,S,V,I)}emplace(i,u,f,y,m,_,b,N,D,S,V,I,O){const M=12*i;return this.int16[M+0]=u,this.int16[M+1]=f,this.int16[M+2]=y,this.int16[M+3]=m,this.uint16[M+4]=_,this.uint16[M+5]=b,this.uint16[M+6]=N,this.uint16[M+7]=D,this.int16[M+8]=S,this.int16[M+9]=V,this.int16[M+10]=I,this.int16[M+11]=O,i}}mh.prototype.bytesPerElement=24,Pt(mh,"StructArrayLayout4i4ui4i24");class Wc extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_){const b=this.length;return this.resize(b+1),this.emplace(b,i,u,f,y,m,_)}emplace(i,u,f,y,m,_,b){const N=10*i,D=5*i;return this.int16[N+0]=u,this.int16[N+1]=f,this.int16[N+2]=y,this.float32[D+2]=m,this.float32[D+3]=_,this.float32[D+4]=b,i}}Wc.prototype.bytesPerElement=20,Pt(Wc,"StructArrayLayout3i3f20");class Yc extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y){const m=this.length;return this.resize(m+1),this.emplace(m,i,u,f,y)}emplace(i,u,f,y,m){const _=4*i;return this.float32[_+0]=u,this.float32[_+1]=f,this.float32[_+2]=y,this.float32[_+3]=m,i}}Yc.prototype.bytesPerElement=16,Pt(Yc,"StructArrayLayout4f16");class ep extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.uint32[1*i+0]=u,i}}ep.prototype.bytesPerElement=4,Pt(ep,"StructArrayLayout1ul4");class Ud extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u){const f=this.length;return this.resize(f+1),this.emplace(f,i,u)}emplace(i,u,f){const y=2*i;return this.uint16[y+0]=u,this.uint16[y+1]=f,i}}Ud.prototype.bytesPerElement=4,Pt(Ud,"StructArrayLayout2ui4");class Pu extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b,N,D,S,V,I,O){const M=this.length;return this.resize(M+1),this.emplace(M,i,u,f,y,m,_,b,N,D,S,V,I,O)}emplace(i,u,f,y,m,_,b,N,D,S,V,I,O,M){const B=20*i,X=10*i;return this.int16[B+0]=u,this.int16[B+1]=f,this.int16[B+2]=y,this.int16[B+3]=m,this.int16[B+4]=_,this.float32[X+3]=b,this.float32[X+4]=N,this.float32[X+5]=D,this.float32[X+6]=S,this.int16[B+14]=V,this.uint32[X+8]=I,this.uint16[B+18]=O,this.uint16[B+19]=M,i}}Pu.prototype.bytesPerElement=40,Pt(Pu,"StructArrayLayout5i4f1i1ul2ui40");class Ac extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b){const N=this.length;return this.resize(N+1),this.emplace(N,i,u,f,y,m,_,b)}emplace(i,u,f,y,m,_,b,N){const D=8*i;return this.int16[D+0]=u,this.int16[D+1]=f,this.int16[D+2]=y,this.int16[D+4]=m,this.int16[D+5]=_,this.int16[D+6]=b,this.int16[D+7]=N,i}}Ac.prototype.bytesPerElement=16,Pt(Ac,"StructArrayLayout3i2i2i16");class eu extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m){const _=this.length;return this.resize(_+1),this.emplace(_,i,u,f,y,m)}emplace(i,u,f,y,m,_){const b=4*i,N=8*i;return this.float32[b+0]=u,this.float32[b+1]=f,this.float32[b+2]=y,this.int16[N+6]=m,this.int16[N+7]=_,i}}eu.prototype.bytesPerElement=16,Pt(eu,"StructArrayLayout2f1f2i16");class _c extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_){const b=this.length;return this.resize(b+1),this.emplace(b,i,u,f,y,m,_)}emplace(i,u,f,y,m,_,b){const N=20*i,D=5*i;return this.uint8[N+0]=u,this.uint8[N+1]=f,this.float32[D+1]=y,this.float32[D+2]=m,this.float32[D+3]=_,this.float32[D+4]=b,i}}_c.prototype.bytesPerElement=20,Pt(_c,"StructArrayLayout2ub4f20");class Ps extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,f){const y=this.length;return this.resize(y+1),this.emplace(y,i,u,f)}emplace(i,u,f,y){const m=3*i;return this.uint16[m+0]=u,this.uint16[m+1]=f,this.uint16[m+2]=y,i}}Ps.prototype.bytesPerElement=6,Pt(Ps,"StructArrayLayout3ui6");class tu extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,X,ee,ue,le,re,pe){const we=this.length;return this.resize(we+1),this.emplace(we,i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,X,ee,ue,le,re,pe)}emplace(i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,X,ee,ue,le,re,pe,we){const Pe=30*i,We=15*i,je=60*i;return this.int16[Pe+0]=u,this.int16[Pe+1]=f,this.int16[Pe+2]=y,this.float32[We+2]=m,this.float32[We+3]=_,this.uint16[Pe+8]=b,this.uint16[Pe+9]=N,this.uint32[We+5]=D,this.uint32[We+6]=S,this.uint32[We+7]=V,this.uint16[Pe+16]=I,this.uint16[Pe+17]=O,this.uint16[Pe+18]=M,this.float32[We+10]=B,this.float32[We+11]=X,this.uint8[je+48]=ee,this.uint8[je+49]=ue,this.uint8[je+50]=le,this.uint32[We+13]=re,this.int16[Pe+28]=pe,this.uint8[je+58]=we,i}}tu.prototype.bytesPerElement=60,Pt(tu,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Hu extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,X,ee,ue,le,re,pe,we,Pe,We,je,Ze,mt,Ye,At,xt,St,Ot,Nt){const Ut=this.length;return this.resize(Ut+1),this.emplace(Ut,i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,X,ee,ue,le,re,pe,we,Pe,We,je,Ze,mt,Ye,At,xt,St,Ot,Nt)}emplace(i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,X,ee,ue,le,re,pe,we,Pe,We,je,Ze,mt,Ye,At,xt,St,Ot,Nt,Ut){const Mt=20*i,jt=40*i,ga=80*i;return this.float32[Mt+0]=u,this.float32[Mt+1]=f,this.int16[jt+4]=y,this.int16[jt+5]=m,this.int16[jt+6]=_,this.int16[jt+7]=b,this.int16[jt+8]=N,this.int16[jt+9]=D,this.int16[jt+10]=S,this.int16[jt+11]=V,this.int16[jt+12]=I,this.uint16[jt+13]=O,this.uint16[jt+14]=M,this.uint16[jt+15]=B,this.uint16[jt+16]=X,this.uint16[jt+17]=ee,this.uint16[jt+18]=ue,this.uint16[jt+19]=le,this.uint16[jt+20]=re,this.uint16[jt+21]=pe,this.uint16[jt+22]=we,this.uint16[jt+23]=Pe,this.uint16[jt+24]=We,this.uint16[jt+25]=je,this.uint16[jt+26]=Ze,this.uint16[jt+27]=mt,this.uint32[Mt+14]=Ye,this.float32[Mt+15]=At,this.float32[Mt+16]=xt,this.float32[Mt+17]=St,this.float32[Mt+18]=Ot,this.uint8[ga+76]=Nt,this.uint16[jt+39]=Ut,i}}Hu.prototype.bytesPerElement=80,Pt(Hu,"StructArrayLayout2f9i15ui1ul4f1ub1ui80");class $s extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m){const _=this.length;return this.resize(_+1),this.emplace(_,i,u,f,y,m)}emplace(i,u,f,y,m,_){const b=5*i;return this.float32[b+0]=u,this.float32[b+1]=f,this.float32[b+2]=y,this.float32[b+3]=m,this.float32[b+4]=_,i}}$s.prototype.bytesPerElement=20,Pt($s,"StructArrayLayout5f20");class Eu extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b){const N=this.length;return this.resize(N+1),this.emplace(N,i,u,f,y,m,_,b)}emplace(i,u,f,y,m,_,b,N){const D=7*i;return this.float32[D+0]=u,this.float32[D+1]=f,this.float32[D+2]=y,this.float32[D+3]=m,this.float32[D+4]=_,this.float32[D+5]=b,this.float32[D+6]=N,i}}Eu.prototype.bytesPerElement=28,Pt(Eu,"StructArrayLayout7f28");class yh extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b,N,D,S,V){const I=this.length;return this.resize(I+1),this.emplace(I,i,u,f,y,m,_,b,N,D,S,V)}emplace(i,u,f,y,m,_,b,N,D,S,V,I){const O=11*i;return this.float32[O+0]=u,this.float32[O+1]=f,this.float32[O+2]=y,this.float32[O+3]=m,this.float32[O+4]=_,this.float32[O+5]=b,this.float32[O+6]=N,this.float32[O+7]=D,this.float32[O+8]=S,this.float32[O+9]=V,this.float32[O+10]=I,i}}yh.prototype.bytesPerElement=44,Pt(yh,"StructArrayLayout11f44");class tp extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b,N,D){const S=this.length;return this.resize(S+1),this.emplace(S,i,u,f,y,m,_,b,N,D)}emplace(i,u,f,y,m,_,b,N,D,S){const V=9*i;return this.float32[V+0]=u,this.float32[V+1]=f,this.float32[V+2]=y,this.float32[V+3]=m,this.float32[V+4]=_,this.float32[V+5]=b,this.float32[V+6]=N,this.float32[V+7]=D,this.float32[V+8]=S,i}}tp.prototype.bytesPerElement=36,Pt(tp,"StructArrayLayout9f36");class jh extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u){const f=this.length;return this.resize(f+1),this.emplace(f,i,u)}emplace(i,u,f){const y=2*i;return this.float32[y+0]=u,this.float32[y+1]=f,i}}jh.prototype.bytesPerElement=8,Pt(jh,"StructArrayLayout2f8");class gh extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,f,y){const m=this.length;return this.resize(m+1),this.emplace(m,i,u,f,y)}emplace(i,u,f,y,m){const _=6*i;return this.uint32[3*i+0]=u,this.uint16[_+2]=f,this.uint16[_+3]=y,this.uint16[_+4]=m,i}}gh.prototype.bytesPerElement=12,Pt(gh,"StructArrayLayout1ul3ui12");class kd extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.uint16[1*i+0]=u,i}}kd.prototype.bytesPerElement=2,Pt(kd,"StructArrayLayout1ui2");class Gm extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,X){const ee=this.length;return this.resize(ee+1),this.emplace(ee,i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,X)}emplace(i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,X,ee){const ue=16*i;return this.float32[ue+0]=u,this.float32[ue+1]=f,this.float32[ue+2]=y,this.float32[ue+3]=m,this.float32[ue+4]=_,this.float32[ue+5]=b,this.float32[ue+6]=N,this.float32[ue+7]=D,this.float32[ue+8]=S,this.float32[ue+9]=V,this.float32[ue+10]=I,this.float32[ue+11]=O,this.float32[ue+12]=M,this.float32[ue+13]=B,this.float32[ue+14]=X,this.float32[ue+15]=ee,i}}Gm.prototype.bytesPerElement=64,Pt(Gm,"StructArrayLayout16f64");class $p extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b){const N=this.length;return this.resize(N+1),this.emplace(N,i,u,f,y,m,_,b)}emplace(i,u,f,y,m,_,b,N){const D=10*i,S=5*i;return this.uint16[D+0]=u,this.uint16[D+1]=f,this.uint16[D+2]=y,this.uint16[D+3]=m,this.float32[S+2]=_,this.float32[S+3]=b,this.float32[S+4]=N,i}}$p.prototype.bytesPerElement=20,Pt($p,"StructArrayLayout4ui3f20");class jm extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.int16[1*i+0]=u,i}}jm.prototype.bytesPerElement=2,Pt(jm,"StructArrayLayout1i2");class Dy extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.uint8[1*i+0]=u,i}}Dy.prototype.bytesPerElement=1,Pt(Dy,"StructArrayLayout1ub1");class Wg extends ph{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Wg.prototype.size=40;class Kp extends Pu{get(i){return new Wg(this,i)}}Pt(Kp,"CollisionBoxArray");class ol extends ph{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(i){this._structArray.uint8[this._pos1+49]=i}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(i){this._structArray.uint8[this._pos1+50]=i}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(i){this._structArray.uint32[this._pos4+13]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(i){this._structArray.uint8[this._pos1+58]=i}}ol.prototype.size=60;class yl extends tu{get(i){return new ol(this,i)}}Pt(yl,"PlacedSymbolArray");class Yg extends ph{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(i){this._structArray.uint32[this._pos4+14]=i}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(i){this._structArray.float32[this._pos4+18]=i}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}get elevationFeatureIndex(){return this._structArray.uint16[this._pos2+39]}}Yg.prototype.size=80;class Xg extends Hu{get(i){return new Yg(this,i)}}Pt(Xg,"SymbolInstanceArray");class Jg extends Kc{getoffsetX(i){return this.float32[1*i+0]}}Pt(Jg,"GlyphOffsetArray");class Wp extends bu{getx(i){return this.int16[2*i+0]}gety(i){return this.int16[2*i+1]}}Pt(Wp,"SymbolLineVertexArray");class Yp extends ph{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Yp.prototype.size=12;class gl extends gh{get(i){return new Yp(this,i)}}Pt(gl,"FeatureIndexArray");class ap extends Ud{geta_centroid_pos0(i){return this.uint16[2*i+0]}geta_centroid_pos1(i){return this.uint16[2*i+1]}}Pt(ap,"FillExtrusionCentroidArray");class Qg extends ph{get a_join_normal_inside0(){return this._structArray.int16[this._pos2+0]}get a_join_normal_inside1(){return this._structArray.int16[this._pos2+1]}get a_join_normal_inside2(){return this._structArray.int16[this._pos2+2]}}Qg.prototype.size=6;class eA extends Ld{get(i){return new Qg(this,i)}}Pt(eA,"FillExtrusionWallArray");const P0=xn([{name:"a_pos",components:2,type:"Int16"}],4),tA=xn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Di{constructor(i=[]){this.segments=i}_prepareSegment(i,u,f,y){let m=this.segments[this.segments.length-1];return i>Di.MAX_VERTEX_ARRAY_LENGTH&&en(`Max vertices per segment is ${Di.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}`),(!m||m.vertexLength+i>Di.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==y)&&(m={vertexOffset:u,primitiveOffset:f,vertexLength:0,primitiveLength:0},y!==void 0&&(m.sortKey=y),this.segments.push(m)),m}prepareSegment(i,u,f,y){return this._prepareSegment(i,u.length,f.length,y)}get(){return this.segments}destroy(){for(const i of this.segments)for(const u in i.vaos)i.vaos[u].destroy()}static simpleSegment(i,u,f,y){return new Di([{vertexOffset:i,primitiveOffset:u,vertexLength:f,primitiveLength:y,vaos:{},sortKey:0}])}}function My(d,i){return 256*(d=ka(Math.floor(d),0,255))+ka(Math.floor(i),0,255)}Di.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Pt(Di,"SegmentVector");const Iy=xn([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),aA=xn([{name:"a_dash",components:4,type:"Uint16"}]);class rp{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(i,u,f,y){this.ids.push(Zm(i)),this.positions.push(u,f,y)}eachPosition(i,u){const f=Zm(i);let y=0,m=this.ids.length-1;for(;y<m;){const _=y+m>>1;this.ids[_]>=f?m=_:y=_+1}for(;this.ids[y]===f;)u(this.positions[3*y],this.positions[3*y+1],this.positions[3*y+2]),y++}static serialize(i,u){const f=new Float64Array(i.ids),y=new Uint32Array(i.positions);return Xp(f,y,0,f.length-1),u&&(u.add(f.buffer),u.add(y.buffer)),{ids:f,positions:y}}static deserialize(i){const u=new rp;let f;u.ids=i.ids,u.positions=i.positions;for(const y of u.ids)y!==f&&u.uniqueIds.push(y),f=y;return u.indexed=!0,u}}function Zm(d){const i=+d;return!isNaN(i)&&Number.MIN_SAFE_INTEGER<=i&&i<=Number.MAX_SAFE_INTEGER?i:oo(String(d))}function Xp(d,i,u,f){for(;u<f;){const y=d[u+f>>1];let m=u-1,_=f+1;for(;;){do m++;while(d[m]<y);do _--;while(d[_]>y);if(m>=_)break;Jp(d,m,_),Jp(i,3*m,3*_),Jp(i,3*m+1,3*_+1),Jp(i,3*m+2,3*_+2)}_-u<f-_?(Xp(d,i,u,_),u=_+1):(Xp(d,i,_+1,f),f=_)}}function Jp(d,i,u){const f=d[i];d[i]=d[u],d[u]=f}Pt(rp,"FeaturePositionMap");class Bd{constructor(i){this.gl=i.gl,this.initialized=!1}fetchUniformLocation(i,u){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(i,u),this.initialized=!0),!!this.location}set(i,u,f){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class vc extends Bd{constructor(i){super(i),this.current=0}set(i,u,f){this.fetchUniformLocation(i,u)&&this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}}class ms extends Bd{constructor(i){super(i),this.current=0}set(i,u,f){this.fetchUniformLocation(i,u)&&this.current!==f&&(this.current=f,this.gl.uniform1f(this.location,f))}}class Xc extends Bd{constructor(i){super(i),this.current=[0,0]}set(i,u,f){this.fetchUniformLocation(i,u)&&(f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1])))}}class np extends Bd{constructor(i){super(i),this.current=[0,0,0]}set(i,u,f){this.fetchUniformLocation(i,u)&&(f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2])))}}class ip extends Bd{constructor(i){super(i),this.current=[0,0,0,0]}set(i,u,f){this.fetchUniformLocation(i,u)&&(f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]&&f[3]===this.current[3]||(this.current=f,this.gl.uniform4f(this.location,f[0],f[1],f[2],f[3])))}}class Rf extends Bd{constructor(i){super(i),this.current=bn.transparent.toRenderColor(null)}set(i,u,f){this.fetchUniformLocation(i,u)&&(f.r===this.current.r&&f.g===this.current.g&&f.b===this.current.b&&f.a===this.current.a||(this.current=f,this.gl.uniform4f(this.location,f.r,f.g,f.b,f.a)))}}const Ah=new Float32Array(16);class Jc extends Bd{constructor(i){super(i),this.current=Ah}set(i,u,f){if(this.fetchUniformLocation(i,u)){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let y=1;y<16;y++)if(f[y]!==this.current[y]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}}}const Gd=new Float32Array(9),rA=new Float32Array(4);class qm extends Bd{constructor(i){super(i),this.current=rA}set(i,u,f){if(this.fetchUniformLocation(i,u)){for(let y=0;y<4;y++)if(f[y]!==this.current[y]){this.current=f,this.gl.uniformMatrix2fv(this.location,!1,f);break}}}}function sp(d){return[My(255*d.r,255*d.g),My(255*d.b,255*d.a)]}class Tf{constructor(i,u,f,y){this.value=i,this.uniformNames=u.map(m=>`u_${m}`),this.type=f,this.context=y}setUniform(i,u,f,y,m){const _=y.constantOr(this.value);u.set(i,m,_ instanceof bn?_.toRenderColor(this.lutExpression&&this.lutExpression.value==="none"?null:this.context.lut):_)}getBinding(i,u){return this.type==="color"?new Rf(i):new ms(i)}}class wc{constructor(i,u){this.uniformNames=u.map(f=>`u_${f}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(i){this.pixelRatio=i.pixelRatio||1,this.pattern=i.tl.concat(i.br)}setUniform(i,u,f,y,m){const _=m==="u_pattern"||m==="u_dash"?this.pattern:m==="u_pixel_ratio"?this.pixelRatio:null;_&&u.set(i,m,_)}getBinding(i,u){return u==="u_pattern"||u==="u_dash"?new ip(i):new ms(i)}}class Ks{constructor(i,u,f,y){this.expression=i,this.type=f,this.maxValue=0,this.paintVertexAttributes=u.map(m=>({name:`a_${m}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new y}populatePaintArray(i,u,f,y,m,_,b){const N=this.paintVertexArray.length,D=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate(new vn(0,{brightness:_}),u,{},m,y,b):this.expression.kind==="constant"&&this.expression.value,S=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new vn(0,{brightness:_}),u,{},m,y,b):this.lutExpression.value)==="none";this.paintVertexArray.resize(i),this._setPaintValue(N,i,D,S?null:this.context.lut)}updatePaintArray(i,u,f,y,m,_,b){const N=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate({zoom:0,brightness:b},f,y,void 0,m):this.expression.kind==="constant"&&this.expression.value,D=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new vn(0,{brightness:b}),f,y,void 0,m):this.lutExpression.value)==="none";this._setPaintValue(i,u,N,D?null:this.context.lut)}_setPaintValue(i,u,f,y){if(this.type==="color"){const m=sp(f.toRenderColor(y));for(let _=i;_<u;_++)this.paintVertexArray.emplace(_,m[0],m[1])}else{for(let m=i;m<u;m++)this.paintVertexArray.emplace(m,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.lutExpression&&this.lutExpression.kind!=="constant"&&(this.lutExpression.isStateDependent||!this.lutExpression.isLightConstant)||this.expression.kind!=="constant"&&(this.expression.isStateDependent||!this.expression.isLightConstant)))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class $u{constructor(i,u,f,y,m,_){this.expression=i,this.uniformNames=u.map(b=>`u_${b}_t`),this.type=f,this.useIntegerZoom=y,this.context=m,this.maxValue=0,this.paintVertexAttributes=u.map(b=>({name:`a_${b}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(i,u,f,y,m,_,b){const N=this.expression.evaluate(new vn(this.context.zoom,{brightness:_}),u,{},m,y,b),D=this.expression.evaluate(new vn(this.context.zoom+1,{brightness:_}),u,{},m,y,b),S=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new vn(0,{brightness:_}),u,{},m,y,b):this.lutExpression.value)==="none",V=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(V,i,N,D,S?null:this.context.lut)}updatePaintArray(i,u,f,y,m,_,b){const N=this.expression.evaluate({zoom:this.context.zoom,brightness:b},f,y,void 0,m),D=this.expression.evaluate({zoom:this.context.zoom+1,brightness:b},f,y,void 0,m),S=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new vn(0,{brightness:b}),f,y,void 0,m):this.lutExpression.value)==="none";this._setPaintValue(i,u,N,D,S?null:this.context.lut)}_setPaintValue(i,u,f,y,m){if(this.type==="color"){const _=sp(f.toRenderColor(m)),b=sp(f.toRenderColor(m));for(let N=i;N<u;N++)this.paintVertexArray.emplace(N,_[0],_[1],b[0],b[1])}else{for(let _=i;_<u;_++)this.paintVertexArray.emplace(_,f,y);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(y))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,u,f,y,m){const _=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,b=ka(this.expression.interpolationFactor(_,this.context.zoom,this.context.zoom+1),0,1);u.set(i,m,b)}getBinding(i,u){return new ms(i)}}class Zh{constructor(i,u,f,y,m){this.expression=i,this.layerId=m,this.paintVertexAttributes=(f==="array"?aA:Iy).members;for(let _=0;_<u.length;++_);this.paintVertexArray=new y}populatePaintArray(i,u,f,y){const m=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValues(m,i,u.patterns&&u.patterns[this.layerId],f)}updatePaintArray(i,u,f,y,m,_,b){this._setPaintValues(i,u,f.patterns&&f.patterns[this.layerId],_)}_setPaintValues(i,u,f,y){if(!y||!f)return;const m=y[f];if(!m)return;const{tl:_,br:b,pixelRatio:N}=m;for(let D=i;D<u;D++)this.paintVertexArray.emplace(D,_[0],_[1],b[0],b[1],N)}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ku{constructor(i,u,f=()=>!0){this.binders={},this._buffers=[],this.context=u;const y=[];for(const m in i.paint._values){const _=i.paint.get(m);if(m.endsWith("-use-theme")||!f(m)||!(_ instanceof zl&&Gc(_.property.specification)))continue;const b=Sf(m,i.type),N=_.value,D=_.property.specification.type,S=!!_.property.useIntegerZoom,V=m==="line-dasharray"||m.endsWith("pattern"),I=i.paint.get(`${m}-use-theme`),O=m==="line-dasharray"&&i.layout.get("line-cap").value.kind!=="constant"||I&&I.value.kind!=="constant";if(N.kind!=="constant"||O)if(N.kind==="source"||O||V){const M=Ly(m,D,"source");this.binders[m]=V?new Zh(N,b,D,M,i.id):new Ks(N,b,D,M),y.push(`/a_${m}`)}else{const M=Ly(m,D,"composite");this.binders[m]=new $u(N,b,D,S,u,M),y.push(`/z_${m}`)}else this.binders[m]=V?new wc(N.value,b):new Tf(N.value,b,D,u),y.push(`/u_${m}`);I&&(this.binders[m].lutExpression=I.value)}this.cacheKey=y.sort().join("")}getMaxValue(i){const u=this.binders[i];return u instanceof Ks||u instanceof $u?u.maxValue:0}populatePaintArrays(i,u,f,y,m,_,b){for(const N in this.binders){const D=this.binders[N];D.context=this.context,(D instanceof Ks||D instanceof $u||D instanceof Zh)&&D.populatePaintArray(i,u,f,y,m,_,b)}}setConstantPatternPositions(i){for(const u in this.binders){const f=this.binders[u];f instanceof wc&&f.setConstantPatternPositions(i)}}updatePaintArrays(i,u,f,y,m,_,b,N,D){let S=!1;const V=Object.keys(i),I=V.length!==0&&!N,O=I?V:u.uniqueIds;this.context.lut=m.lut;for(const M in this.binders){const B=this.binders[M];if(B.context=this.context,(B instanceof Ks||B instanceof $u||B instanceof Zh)&&B.expression&&B.expression.kind&&B.expression.kind!=="constant"&&(B.expression.isStateDependent===!0||B.expression.isLightConstant===!1)){const X=m.paint.get(M);B.expression=X.value;for(const ee of O){const ue=i[ee.toString()];u.eachPosition(ee,(le,re,pe)=>{const we=y.feature(le);B.updatePaintArray(re,pe,we,ue,_,b,D)})}if(!I)for(const ee of f.uniqueIds){const ue=i[ee.toString()];f.eachPosition(ee,(le,re,pe)=>{const we=y.feature(le);B.updatePaintArray(re,pe,we,ue,_,b,D)})}S=!0}}return S}defines(){const i=[];for(const u in this.binders){const f=this.binders[u];(f instanceof Tf||f instanceof wc)&&i.push(...f.uniformNames.map(y=>`#define HAS_UNIFORM_${y}`))}return i}getBinderAttributes(){const i=[];for(const u in this.binders){const f=this.binders[u];if(f instanceof Ks||f instanceof $u||f instanceof Zh)for(let y=0;y<f.paintVertexAttributes.length;y++)i.push(f.paintVertexAttributes[y].name)}return i}getBinderUniforms(){const i=[];for(const u in this.binders){const f=this.binders[u];if(f instanceof Tf||f instanceof wc||f instanceof $u)for(const y of f.uniformNames)i.push(y)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i){const u=[];for(const f in this.binders){const y=this.binders[f];if(y instanceof Tf||y instanceof wc||y instanceof $u)for(const m of y.uniformNames)u.push({name:m,property:f,binding:y.getBinding(i,m)})}return u}setUniforms(i,u,f,y,m){for(const{name:_,property:b,binding:N}of f)this.binders[b].setUniform(i,N,m,y.get(b),_)}updatePaintBuffers(){this._buffers=[];for(const i in this.binders){const u=this.binders[i];(u instanceof Ks||u instanceof $u||u instanceof Zh)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}}upload(i){for(const u in this.binders){const f=this.binders[u];(f instanceof Ks||f instanceof $u||f instanceof Zh)&&f.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const u=this.binders[i];(u instanceof Ks||u instanceof $u||u instanceof Zh)&&u.destroy()}}}class _h{constructor(i,u,f=()=>!0){this.programConfigurations={};for(const y of i)this.programConfigurations[y.id]=new Ku(y,u,f);this.needsUpload=!1,this._featureMap=new rp,this._featureMapWithoutIds=new rp,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(i,u,f,y,m,_,b,N){for(const D in this.programConfigurations)this.programConfigurations[D].populatePaintArrays(i,u,y,m,_,b,N);u.id!==void 0?this._featureMap.add(u.id,f,this._bufferOffset,i):(this._featureMapWithoutIds.add(this._idlessCounter,f,this._bufferOffset,i),this._idlessCounter+=1),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,u,f,y,m,_,b){for(const N of f)this.needsUpload=this.programConfigurations[N.id].updatePaintArrays(i,this._featureMap,this._featureMapWithoutIds,u,N,y,m,_,b||0)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}const nA={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"symbol-z-offset":["z_offset"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function Sf(d,i){return nA[d]||[d.replace(`${i}-`,"").replace(/-/g,"_")]}const Cf={"line-pattern":{source:Fd,composite:Fd},"fill-pattern":{source:Fd,composite:Fd},"fill-extrusion-pattern":{source:Fd,composite:Fd},"line-dasharray":{source:Jf,composite:Jf}},bf={color:{source:jh,composite:Yc},number:{source:Kc,composite:jh}};function Ly(d,i,u){const f=Cf[d];return f&&f[u]||bf[i][u]}Pt(Tf,"ConstantBinder"),Pt(wc,"PatternConstantBinder"),Pt(Ks,"SourceExpressionBinder"),Pt(Zh,"PatternCompositeBinder"),Pt($u,"CompositeExpressionBinder"),Pt(Ku,"ProgramConfiguration",{omit:["_buffers"]}),Pt(_h,"ProgramConfigurationSet");const Al=Na/Math.PI/2,vh=5,Qp=6,iA=16383,op=64,xf=[op,32,16],Go=-Al,Wu=Al;function lp(d,i,u,f=Al){return u=za(u),[d*Math.sin(u)*f,-i*f,d*Math.cos(u)*f]}function Rc(d,i,u){return lp(Math.cos(za(d)),Math.sin(za(d)),i,u)}const ll=63710088e-1,Fy=2*Math.PI*ll;class Ln{constructor(i,u){if(isNaN(i)||isNaN(u))throw new Error(`Invalid LngLat object: (${i}, ${u})`);if(this.lng=+i,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ln(pn(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const u=Math.PI/180,f=this.lat*u,y=i.lat*u,m=Math.sin(f)*Math.sin(y)+Math.cos(f)*Math.cos(y)*Math.cos((i.lng-this.lng)*u);return ll*Math.acos(Math.min(m,1))}toBounds(i=0){const u=360*i/40075017,f=u/Math.cos(Math.PI/180*this.lat);return new qh({lng:this.lng-f,lat:this.lat-u},{lng:this.lng+f,lat:this.lat+u})}toEcef(i){return Rc(this.lat,this.lng,Al+i*Al/ll)}static convert(i){if(i instanceof Ln)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new Ln(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new Ln(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class qh{constructor(i,u){if(i)if(u)this.setSouthWest(i).setNorthEast(u);else if(i.length===4){const f=i;this.setSouthWest([f[0],f[1]]).setNorthEast([f[2],f[3]])}else{const f=i;this.setSouthWest(f[0]).setNorthEast(f[1])}}setNorthEast(i){return this._ne=i instanceof Ln?new Ln(i.lng,i.lat):Ln.convert(i),this}setSouthWest(i){return this._sw=i instanceof Ln?new Ln(i.lng,i.lat):Ln.convert(i),this}extend(i){const u=this._sw,f=this._ne;let y,m;if(i instanceof Ln)y=i,m=i;else{if(!(i instanceof qh))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(qh.convert(i)):this.extend(Ln.convert(i)):typeof i=="object"&&i!==null&&i.hasOwnProperty("lat")&&(i.hasOwnProperty("lon")||i.hasOwnProperty("lng"))?this.extend(Ln.convert(i)):this;if(y=i._sw,m=i._ne,!y||!m)return this}return u||f?(u.lng=Math.min(y.lng,u.lng),u.lat=Math.min(y.lat,u.lat),f.lng=Math.max(m.lng,f.lng),f.lat=Math.max(m.lat,f.lat)):(this._sw=new Ln(y.lng,y.lat),this._ne=new Ln(m.lng,m.lat)),this}getCenter(){return new Ln((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ln(this.getWest(),this.getNorth())}getSouthEast(){return new Ln(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:u,lat:f}=Ln.convert(i);let y=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&y}static convert(i){if(i)return i instanceof qh?i:new qh(i)}}const sA=0,oA=25.5;function up(d){return Fy*Math.cos(d*Math.PI/180)}function _l(d){return(180+d)/360}function Pi(d){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360)))/360}function jo(d,i){return d/up(i)}function Nu(d){return 360*d-180}function Ri(d){return 360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90}function Uy(d,i){return d*up(Ri(i))}const Vu=85.051129;function lA(d){return Math.cos(za(ka(d,-85.051129,Vu)))}function Hh(d,i){const u=ka(i,sA,oA),f=Math.pow(2,u);return lA(d)*Fy/(512*f)}function Zo(d){return 1/Math.cos(d*Math.PI/180)}function g(d,i=0){const u=Math.exp(Math.PI*(1-(d.y+i/Na)/(1<<d.z)*2));return 80150034*u/(u*u+1)/Na/(1<<d.z)}class o{constructor(i,u,f=0){this.x=+i,this.y=+u,this.z=+f}static fromLngLat(i,u=0){const f=Ln.convert(i);return new o(_l(f.lng),Pi(f.lat),jo(u,f.lat))}toLngLat(){return new Ln(Nu(this.x),Ri(this.y))}toAltitude(){return Uy(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Fy*Zo(Ri(this.y))}}function c(d,i,u,f,y,m,_,b,N){const D=(i+f)/2,S=(u+y)/2,V=new Bt(D,S);b(V),function(I,O,M,B,X,ee){const ue=M-X,le=B-ee;return Math.abs((B-O)*ue-(M-I)*le)/Math.hypot(ue,le)}(V.x,V.y,m.x,m.y,_.x,_.y)>=N?(c(d,i,u,D,S,m,V,b,N),c(d,D,S,f,y,V,_,b,N)):d.push(_)}function A(d,i,u){let f=d[0],y=f.x,m=f.y;i(f);const _=[f];for(let b=1;b<d.length;b++){const N=d[b],{x:D,y:S}=N;i(N),c(_,y,m,D,S,f,N,i,u),y=D,m=S,f=N}return _}function R(d,i,u,f){if(f(i,u)){const y=i.add(u)._mult(.5);R(d,i,y,f),R(d,y,u,f)}else d.push(u)}function C(d,i){let u=d[0];const f=[u];for(let y=1;y<d.length;y++){const m=d[y];R(f,u,m,i),u=m}return f}const P=Math.pow(2,14)-1,L=-P-1;function j(d,i){const u=Math.round(d.x*i),f=Math.round(d.y*i);return d.x=ka(u,L,P),d.y=ka(f,L,P),(u<d.x||u>d.x+1||f<d.y||f>d.y+1)&&en("Geometry exceeds allowed extent, reduce your vector tile buffer size"),d}function H(d,i,u){const f=d.loadGeometry(),y=d.extent,m=Na/y;if(i&&u&&u.projection.isReprojectedInTileSpace){const _=1<<i.z,{scale:b,x:N,y:D,projection:S}=u,V=I=>{const O=Nu((i.x+I.x/y)/_),M=Ri((i.y+I.y/y)/_),B=S.project(O,M);I.x=(B.x*b-N)*y,I.y=(B.y*b-D)*y};for(let I=0;I<f.length;I++)if(d.type!==1)f[I]=A(f[I],V,1);else{const O=[];for(const M of f[I])M.x<0||M.x>=y||M.y<0||M.y>=y||(V(M),O.push(M));f[I]=O}}for(const _ of f)for(const b of _)j(b,m);return f}function W(d,i){return{type:d.type,id:d.id,properties:d.properties,geometry:i?H(d):[]}}function te(d,i,u,f,y){d.emplaceBack(2*i+(f+1)/2,2*u+(y+1)/2)}function ae(d,i,u){d.emplaceBack(i.x,i.y,i.z,u[0]*16384,u[1]*16384,u[2]*16384)}class ce{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=i.index,this.hasPattern=!1,this.projection=i.projection,this.layoutVertexArray=new bu,this.indexArray=new Ps,this.segments=new Di,this.programConfigurations=new _h(i.layers,{zoom:i.zoom,lut:i.lut}),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}updateFootprints(i,u){}populate(i,u,f,y){const m=this.layers[0],_=[];let b=null;m.type==="circle"&&(b=m.layout.get("circle-sort-key"));for(const{feature:D,id:S,index:V,sourceLayerIndex:I}of i){const O=this.layers[0]._featureFilter.needGeometry,M=W(D,O);if(!this.layers[0]._featureFilter.filter(new vn(this.zoom),M,f))continue;const B=b?b.evaluate(M,{},f):void 0,X={id:S,properties:D.properties,type:D.type,sourceLayerIndex:I,index:V,geometry:O?M.geometry:H(D,f,y),patterns:{},sortKey:B};_.push(X)}b&&_.sort((D,S)=>D.sortKey-S.sortKey);let N=null;y.projection.name==="globe"&&(this.globeExtVertexArray=new Qf,N=y.projection);for(const D of _){const{geometry:S,index:V,sourceLayerIndex:I}=D,O=i[V].feature;this.addFeature(D,S,V,u.availableImages,f,N,u.brightness),u.featureIndex.insert(O,S,V,I,this.index)}}update(i,u,f,y,m,_,b){this.programConfigurations.updatePaintArrays(i,u,m,f,y,_,b)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,P0.members),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,tA.members))),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(i,u,f,y,m,_,b){for(const N of u)for(const D of N){const S=D.x,V=D.y;if(S<0||S>=Na||V<0||V>=Na)continue;if(_){const M=_.projectTilePoint(S,V,m),B=_.upVector(m,S,V),X=this.globeExtVertexArray;ae(X,M,B),ae(X,M,B),ae(X,M,B),ae(X,M,B)}const I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),O=I.vertexLength;te(this.layoutVertexArray,S,V,-1,-1),te(this.layoutVertexArray,S,V,1,-1),te(this.layoutVertexArray,S,V,1,1),te(this.layoutVertexArray,S,V,-1,1),this.indexArray.emplaceBack(O,O+1,O+2),this.indexArray.emplaceBack(O,O+2,O+3),I.vertexLength+=4,I.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,{},y,m,b)}}function Te(d,i){for(let u=0;u<d.length;u++)if(ot(i,d[u]))return!0;for(let u=0;u<i.length;u++)if(ot(d,i[u]))return!0;return!!Be(d,i)}function ve(d,i,u){return!!ot(d,i)||!!Xe(i,d,u)}function Ee(d,i){if(d.length===1)return st(i,d[0]);for(let u=0;u<i.length;u++){const f=i[u];for(let y=0;y<f.length;y++)if(ot(d,f[y]))return!0}for(let u=0;u<d.length;u++)if(st(i,d[u]))return!0;for(let u=0;u<i.length;u++)if(Be(d,i[u]))return!0;return!1}function Ve(d,i,u){if(d.length>1){if(Be(d,i))return!0;for(let f=0;f<i.length;f++)if(Xe(i[f],d,u))return!0}for(let f=0;f<d.length;f++)if(Xe(d[f],i,u))return!0;return!1}function Be(d,i){if(d.length===0||i.length===0)return!1;for(let u=0;u<d.length-1;u++){const f=d[u],y=d[u+1];for(let m=0;m<i.length-1;m++)if(et(f,y,i[m],i[m+1]))return!0}return!1}function et(d,i,u,f){return Er(d,u,f)!==Er(i,u,f)&&Er(d,i,u)!==Er(d,i,f)}function Xe(d,i,u){const f=u*u;if(i.length===1)return d.distSqr(i[0])<f;for(let y=1;y<i.length;y++)if(ht(d,i[y-1],i[y])<f)return!0;return!1}function ht(d,i,u){const f=i.distSqr(u);if(f===0)return d.distSqr(i);const y=((d.x-i.x)*(u.x-i.x)+(d.y-i.y)*(u.y-i.y))/f;return d.distSqr(y<0?i:y>1?u:u.sub(i)._mult(y)._add(i))}function st(d,i){let u,f,y,m=!1;for(let _=0;_<d.length;_++){u=d[_];for(let b=0,N=u.length-1;b<u.length;N=b++)f=u[b],y=u[N],f.y>i.y!=y.y>i.y&&i.x<(y.x-f.x)*(i.y-f.y)/(y.y-f.y)+f.x&&(m=!m)}return m}function ot(d,i){let u=!1;for(let f=0,y=d.length-1;f<d.length;y=f++){const m=d[f],_=d[y];m.y>i.y!=_.y>i.y&&i.x<(_.x-m.x)*(i.y-m.y)/(_.y-m.y)+m.x&&(u=!u)}return u}function lt(d,i,u,f,y){for(const _ of d)if(i<=_.x&&u<=_.y&&f>=_.x&&y>=_.y)return!0;const m=[new Bt(i,u),new Bt(i,y),new Bt(f,y),new Bt(f,u)];if(d.length>2){for(const _ of m)if(ot(d,_))return!0}for(let _=0;_<d.length-1;_++)if(gt(d[_],d[_+1],m))return!0;return!1}function gt(d,i,u){const f=u[0],y=u[2];if(d.x<f.x&&i.x<f.x||d.x>y.x&&i.x>y.x||d.y<f.y&&i.y<f.y||d.y>y.y&&i.y>y.y)return!1;const m=Er(d,i,u[0]);return m!==Er(d,i,u[1])||m!==Er(d,i,u[2])||m!==Er(d,i,u[3])}function Tt(d,i,u,f,y,m){let _=i.y-d.y,b=d.x-i.x;if(m=m||0){const N=_*_+b*b;if(N===0)return!0;const D=Math.sqrt(N);_/=D,b/=D}return!((u.x-d.x)*_+(u.y-d.y)*b-m<0||(f.x-d.x)*_+(f.y-d.y)*b-m<0||(y.x-d.x)*_+(y.y-d.y)*b-m<0)}function Yt(d,i,u,f,y,m,_){return!(Tt(d,i,f,y,m,_)||Tt(i,u,f,y,m,_)||Tt(u,d,f,y,m,_)||Tt(f,y,d,i,u,_)||Tt(y,m,d,i,u,_)||Tt(m,f,d,i,u,_))}function Lt(d,i,u){const f=i.paint.get(d).value;return f.kind==="constant"?f.value:u.programConfigurations.get(i.id).getMaxValue(d)}function aa(d){return Math.sqrt(d[0]*d[0]+d[1]*d[1])}function ua(d,i,u,f,y){if(!i[0]&&!i[1])return d;const m=Bt.convert(i)._mult(y);u==="viewport"&&m._rotate(-f);const _=[];for(let b=0;b<d.length;b++)_.push(d[b].sub(m));return _}function Sa(d,i,u,f){const y=Bt.convert(d)._mult(f);return i==="viewport"&&y._rotate(-u),y}let It,ia;Pt(ce,"CircleBucket",{omit:["layers"]});var zt,sa={exports:{}},ea=(zt||(zt=1,function(d,i){(function(u){function f(m,_,b){var N=y(256*m,256*(_=Math.pow(2,b)-_-1),b),D=y(256*(m+1),256*(_+1),b);return N[0]+","+N[1]+","+D[0]+","+D[1]}function y(m,_,b){var N=2*Math.PI*6378137/256/Math.pow(2,b);return[m*N-2*Math.PI*6378137/2,_*N-2*Math.PI*6378137/2]}u.getURL=function(m,_,b,N,D,S){return S=S||{},m+"?"+["bbox="+f(b,N,D),"format="+(S.format||"image/png"),"service="+(S.service||"WMS"),"version="+(S.version||"1.1.1"),"request="+(S.request||"GetMap"),"srs="+(S.srs||"EPSG:3857"),"width="+(S.width||256),"height="+(S.height||256),"layers="+_].join("&")},u.getTileBBox=f,u.getMercCoords=y,Object.defineProperty(u,"__esModule",{value:!0})})(i)}(0,sa.exports)),sa.exports);class da{constructor(i,u,f){this.z=i,this.x=u,this.y=f,this.key=Ia(0,i,i,u,f)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,u){const f=ea.getTileBBox(this.x,this.y,this.z),y=function(m,_,b){let N,D="";for(let S=m;S>0;S--)N=1<<S-1,D+=(_&N?1:0)+(b&N?2:0);return D}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(u==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",y).replace("{bbox-epsg-3857}",f)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Kt{constructor(i,u){this.wrap=i,this.canonical=u,this.key=Ia(i,u.z,u.z,u.x,u.y)}}class pa{constructor(i,u,f,y,m){this.overscaledZ=i,this.wrap=u,this.canonical=new da(f,+y,+m),this.key=u===0&&i===f?this.canonical.key:Ia(u,i,f,y,m)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){const u=this.canonical.z-i;return i>this.canonical.z?new pa(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new pa(i,this.wrap,i,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(i,u=!0){if(this.overscaledZ===i&&u)return this.key;if(i>this.canonical.z)return Ia(this.wrap*+u,i,this.canonical.z,this.canonical.x,this.canonical.y);{const f=this.canonical.z-i;return Ia(this.wrap*+u,i,i,this.canonical.x>>f,this.canonical.y>>f)}}isChildOf(i){if(i.wrap!==this.wrap)return!1;const u=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.z<this.canonical.z&&i.canonical.x===this.canonical.x>>u&&i.canonical.y===this.canonical.y>>u}children(i){if(this.overscaledZ>=i)return[new pa(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,f=2*this.canonical.x,y=2*this.canonical.y;return[new pa(u,this.wrap,u,f,y),new pa(u,this.wrap,u,f+1,y),new pa(u,this.wrap,u,f,y+1),new pa(u,this.wrap,u,f+1,y+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new pa(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new pa(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Kt(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Ia(d,i,u,f,y){const m=1<<Math.min(u,22);let _=m*(y%m)+f%m;return d&&u<22&&(_+=m*m*((d<0?-2*d-1:2*d)%(1<<2*(22-u)))),16*(32*_+u)+(i-u)}const La=[d=>{let i=d.canonical.x-1,u=d.wrap;return i<0&&(i=(1<<d.canonical.z)-1,u--),new pa(d.overscaledZ,u,d.canonical.z,i,d.canonical.y)},d=>{let i=d.canonical.x+1,u=d.wrap;return i===1<<d.canonical.z&&(i=0,u++),new pa(d.overscaledZ,u,d.canonical.z,i,d.canonical.y)},d=>new pa(d.overscaledZ,d.wrap,d.canonical.z,d.canonical.x,(d.canonical.y===0?1<<d.canonical.z:d.canonical.y)-1),d=>new pa(d.overscaledZ,d.wrap,d.canonical.z,d.canonical.x,d.canonical.y===(1<<d.canonical.z)-1?0:d.canonical.y+1)];Pt(da,"CanonicalTileID"),Pt(pa,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const Ea=xn([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:sr}=Ea,Fr=xn([{name:"a_pos_3",components:3,type:"Int16"}]);var pr=xn([{name:"a_pos",type:"Int16",components:2}]);class Or{constructor(i,u){this.pos=i,this.dir=u}intersectsPlane(i,u,f){const y=_e.vec2.dot(u,this.dir);if(Math.abs(y)<1e-6)return!1;const m=((i[0]-this.pos[0])*u[0]+(i[1]-this.pos[1])*u[1])/y;return f[0]=this.pos[0]+this.dir[0]*m,f[1]=this.pos[1]+this.dir[1]*m,!0}}class Cr{constructor(i,u){this.pos=i,this.dir=u}intersectsPlane(i,u,f){const y=_e.vec3.dot(u,this.dir);if(Math.abs(y)<1e-6)return!1;const m=((i[0]-this.pos[0])*u[0]+(i[1]-this.pos[1])*u[1]+(i[2]-this.pos[2])*u[2])/y;return f[0]=this.pos[0]+this.dir[0]*m,f[1]=this.pos[1]+this.dir[1]*m,f[2]=this.pos[2]+this.dir[2]*m,!0}closestPointOnSphere(i,u,f){if(_e.vec3.equals(this.pos,i)||u===0)return f[0]=f[1]=f[2]=0,!1;const[y,m,_]=this.dir,b=this.pos[0]-i[0],N=this.pos[1]-i[1],D=this.pos[2]-i[2],S=y*y+m*m+_*_,V=2*(b*y+N*m+D*_),I=V*V-4*S*(b*b+N*N+D*D-u*u);if(I<0){const O=Math.max(-V/2,0),M=b+y*O,B=N+m*O,X=D+_*O,ee=Math.hypot(M,B,X);return f[0]=M*u/ee,f[1]=B*u/ee,f[2]=X*u/ee,!1}{const O=(-V-Math.sqrt(I))/(2*S);if(O<0){const M=Math.hypot(b,N,D);return f[0]=b*u/M,f[1]=N*u/M,f[2]=D*u/M,!1}return f[0]=b+y*O,f[1]=N+m*O,f[2]=D+_*O,!0}}}class xr{constructor(i,u,f,y,m){this.TL=i,this.TR=u,this.BR=f,this.BL=y,this.horizon=m}static fromInvProjectionMatrix(i,u,f){const y=[-1,1,1],m=[1,1,1],_=[1,-1,1],b=[-1,-1,1],N=_e.vec3.transformMat4(y,y,i),D=_e.vec3.transformMat4(m,m,i),S=_e.vec3.transformMat4(_,_,i),V=_e.vec3.transformMat4(b,b,i);return new xr(N,D,S,V,u/f)}}function Ur(d,i,u){let f=1/0,y=-1/0;const m=[];for(const _ of d){_e.vec3.sub(m,_,i);const b=_e.vec3.dot(m,u);f=Math.min(f,b),y=Math.max(y,b)}return[f,y]}function Ir(d,i){let u=!0;for(let f=0;f<d.planes.length;f++){const y=d.planes[f];let m=0;for(let _=0;_<i.length;_++)m+=_e.vec3.dot(y,i[_])+y[3]>=0;if(m===0)return 0;m!==i.length&&(u=!1)}return u?2:1}function dr(d,i){for(const u of d.projections){const f=Ur(i,d.points[0],u.axis);if(u.projection[1]<f[0]||u.projection[0]>f[1])return 0}return 1}function nn(d,i){let u=0;const f=[0,0,0,0];for(let y=0;y<d.length;y++)f[0]=d[y][0],f[1]=d[y][1],f[2]=d[y][2],f[3]=1,_e.vec4.dot(f,i)>=0&&u++;return u}class Tr{constructor(i,u){this.points=i||new Array(8).fill([0,0,0]),this.planes=u||new Array(6).fill([0,0,0,0]),this.bounds=tr.fromPoints(this.points),this.projections=[],this.frustumEdges=[_e.vec3.sub([],this.points[2],this.points[3]),_e.vec3.sub([],this.points[0],this.points[3]),_e.vec3.sub([],this.points[4],this.points[0]),_e.vec3.sub([],this.points[5],this.points[1]),_e.vec3.sub([],this.points[6],this.points[2]),_e.vec3.sub([],this.points[7],this.points[3])];for(const f of this.frustumEdges){const y=[0,-f[2],f[1]],m=[f[2],0,-f[0]];this.projections.push({axis:y,projection:Ur(this.points,this.points[0],y)}),this.projections.push({axis:m,projection:Ur(this.points,this.points[0],m)})}}static fromInvProjectionMatrix(i,u,f,y){const m=Math.pow(2,f),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(D=>{const S=_e.vec4.transformMat4([],D,i),V=1/S[3]/u*m;return _e.vec4.mul(S,S,[V,V,y?1/S[3]:V,V])}),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(D=>{const S=_e.vec3.sub([],_[D[0]],_[D[1]]),V=_e.vec3.sub([],_[D[2]],_[D[1]]),I=_e.vec3.normalize([],_e.vec3.cross([],S,V)),O=-_e.vec3.dot(I,_[D[1]]);return I.concat(O)}),N=[];for(let D=0;D<_.length;D++)N.push([_[D][0],_[D][1],_[D][2]]);return new Tr(N,b)}intersectsPrecise(i,u,f){for(let y=0;y<u.length;y++)if(!nn(i,u[y]))return 0;for(let y=0;y<this.planes.length;y++)if(!nn(i,this.planes[y]))return 0;for(const y of f)for(const m of this.frustumEdges){const _=_e.vec3.cross([],y,m),b=_e.vec3.length(_);if(b===0)continue;_e.vec3.scale(_,_,1/b);const N=Ur(this.points,this.points[0],_),D=Ur(i,this.points[0],_);if(N[0]>D[1]||D[0]>N[1])return 0}return 1}containsPoint(i){for(const u of this.planes){const f=u[3];if(_e.vec3.dot([u[0],u[1],u[2]],i)+f<0)return!1}return!0}}class tr{static fromPoints(i){const u=[1/0,1/0,1/0],f=[-1/0,-1/0,-1/0];for(const y of i)_e.vec3.min(u,u,y),_e.vec3.max(f,f,y);return new tr(u,f)}static fromTileIdAndHeight(i,u,f){const y=1<<i.canonical.z,m=i.canonical.x,_=i.canonical.y;return new tr([m/y,_/y,u],[(m+1)/y,(_+1)/y,f])}static applyTransform(i,u){const f=i.getCorners();for(let y=0;y<f.length;++y)_e.vec3.transformMat4(f[y],f[y],u);return tr.fromPoints(f)}static applyTransformFast(i,u){const f=[u[12],u[13],u[14]],y=[...f];for(let m=0;m<3;m++)for(let _=0;_<3;_++){const b=u[4*_+m],N=b*i.min[_],D=b*i.max[_];f[m]+=Math.min(N,D),y[m]+=Math.max(N,D)}return new tr(f,y)}static projectAabbCorners(i,u){const f=i.getCorners();for(let y=0;y<f.length;++y)_e.vec3.transformMat4(f[y],f[y],u);return f}constructor(i,u){this.min=i,this.max=u,this.center=_e.vec3.scale([],_e.vec3.add([],this.min,this.max),.5)}quadrant(i){const u=[i%2==0,i<2],f=_e.vec3.clone(this.min),y=_e.vec3.clone(this.max);for(let m=0;m<u.length;m++)f[m]=u[m]?this.min[m]:this.center[m],y[m]=u[m]?this.center[m]:this.max[m];return y[2]=this.max[2],new tr(f,y)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}distanceZ(i){return Math.max(Math.min(this.max[2],i[2]),this.min[2])-i[2]}getCorners(){const i=this.min,u=this.max;return[[i[0],i[1],i[2]],[u[0],i[1],i[2]],[u[0],u[1],i[2]],[i[0],u[1],i[2]],[i[0],i[1],u[2]],[u[0],i[1],u[2]],[u[0],u[1],u[2]],[i[0],u[1],u[2]]]}intersects(i){return this.intersectsAabb(i.bounds)?Ir(i,this.getCorners()):0}intersectsFlat(i){return this.intersectsAabb(i.bounds)?Ir(i,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(i,u){return u||this.intersects(i)?dr(i,this.getCorners()):0}intersectsPreciseFlat(i,u){return u||this.intersectsFlat(i)?dr(i,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(i){for(let u=0;u<3;++u)if(this.min[u]>i.max[u]||i.min[u]>this.max[u])return!1;return!0}intersectsAabbXY(i){return!(this.min[0]>i.max[0]||i.min[0]>this.max[0]||this.min[1]>i.max[1]||i.min[1]>this.max[1])}encapsulate(i){for(let u=0;u<3;u++)this.min[u]=Math.min(this.min[u],i.min[u]),this.max[u]=Math.max(this.max[u],i.max[u])}encapsulatePoint(i){for(let u=0;u<3;u++)this.min[u]=Math.min(this.min[u],i[u]),this.max[u]=Math.max(this.max[u],i[u])}closestPoint(i){return[Math.max(Math.min(this.max[0],i[0]),this.min[0]),Math.max(Math.min(this.max[1],i[1]),this.min[1]),Math.max(Math.min(this.max[2],i[2]),this.min[2])]}}function sn(d){return d*Al/ll}Pt(tr,"Aabb");const Hn=[new tr([Go,Go,Go],[Wu,Wu,Wu]),new tr([Go,Go,Go],[0,0,Wu]),new tr([0,Go,Go],[Wu,0,Wu]),new tr([Go,0,Go],[0,Wu,Wu]),new tr([0,0,Go],[Wu,Wu,Wu])];function cn(d,i,u,f=!0){const y=_e.vec3.scale([],d._camera.position,d.worldSize),m=[i,u,1,1];_e.vec4.transformMat4(m,m,d.pixelMatrixInverse),_e.vec4.scale(m,m,1/m[3]);const _=_e.vec3.sub([],m,y),b=_e.vec3.normalize([],_),N=d.globeMatrix,D=[N[12],N[13],N[14]],S=_e.vec3.sub([],D,y),V=_e.vec3.length(S),I=_e.vec3.normalize([],S),O=d.worldSize/(2*Math.PI),M=_e.vec3.dot(I,b),B=Math.asin(O/V);if(B<Math.acos(M)){if(!f)return null;const mt=[],Ye=[];_e.vec3.scale(mt,b,V/M),_e.vec3.normalize(Ye,_e.vec3.sub(Ye,mt,S)),_e.vec3.normalize(b,_e.vec3.add(b,S,_e.vec3.scale(b,Ye,Math.tan(B)*V)))}const X=[];new Cr(y,b).closestPointOnSphere(D,O,X);const ee=_e.vec3.normalize([],fn(N,0)),ue=_e.vec3.normalize([],fn(N,1)),le=_e.vec3.normalize([],fn(N,2)),re=_e.vec3.dot(ee,X),pe=_e.vec3.dot(ue,X),we=_e.vec3.dot(le,X),Pe=Va(Math.asin(-pe/O));let We=Va(Math.atan2(re,we));We=d.center.lng+function(mt,Ye){const At=(Ye-mt+180)%360-180;return At<-180?At+360:At}(d.center.lng,We);const je=_l(We),Ze=ka(Pi(Pe),0,1);return new o(je,Ze)}class Vn{constructor(i,u,f){this.a=_e.vec3.sub([],i,f),this.b=_e.vec3.sub([],u,f),this.center=f;const y=_e.vec3.normalize([],this.a),m=_e.vec3.normalize([],this.b);this.angle=Math.acos(_e.vec3.dot(y,m))}}function Wi(d,i){if(d.angle===0)return null;let u;return u=d.a[i]===0?1/d.angle*.5*Math.PI:1/d.angle*Math.atan(d.b[i]/d.a[i]/Math.sin(d.angle)-1/Math.tan(d.angle)),u<0||u>1?null:function(f,y,m,_){const b=Math.sin(m);return f*(Math.sin((1-_)*m)/b)+y*(Math.sin(_*m)/b)}(d.a[i],d.b[i],d.angle,ka(u,0,1))+d.center[i]}function hs(d){if(d.z<=1)return Hn[d.z+2*d.y+d.x];const i=ii(Cn(d));return tr.fromPoints(i)}function ro(d,i,u){return _e.vec3.scale(d,d,1-u),_e.vec3.scaleAndAdd(d,d,i,u)}function Ws(d,i,u){for(const f of d)_e.vec3.transformMat4(f,f,i),_e.vec3.scale(f,f,u)}function mo(d,i,u,f){const y=i/d.worldSize,m=d.globeMatrix;if(u.z<=1){const je=hs(u).getCorners();return Ws(je,m,y),tr.fromPoints(je)}const _=Cn(u,f),b=ii(_,Al+sn(d._tileCoverLift));Ws(b,m,y);const N=Number.MAX_VALUE,D=[-N,-N,-N],S=[N,N,N];if(_.contains(d.center)){for(const mt of b)_e.vec3.min(S,S,mt),_e.vec3.max(D,D,mt);D[2]=0;const je=d.point,Ze=[je.x*y,je.y*y,0];return _e.vec3.min(S,S,Ze),_e.vec3.max(D,D,Ze),new tr(S,D)}if(d._tileCoverLift>0){for(const je of b)_e.vec3.min(S,S,je),_e.vec3.max(D,D,je);return new tr(S,D)}const V=[m[12]*y,m[13]*y,m[14]*y],I=_.getCenter(),O=ka(d.center.lat,-85.051129,Vu),M=ka(I.lat,-85.051129,Vu),B=_l(d.center.lng),X=Pi(O);let ee=B-_l(I.lng);const ue=X-Pi(M);ee>.5?ee-=1:ee<-.5&&(ee+=1);let le=0;if(Math.abs(ee)>Math.abs(ue))le=ee>=0?1:3;else{le=ue>=0?0:2;const je=[m[4]*y,m[5]*y,m[6]*y],Ze=-Math.sin(za(ue>=0?_.getSouth():_.getNorth()))*Al;_e.vec3.scaleAndAdd(V,V,je,Ze)}const re=b[le],pe=b[(le+1)%4],we=new Vn(re,pe,V),Pe=[Wi(we,0)||re[0],Wi(we,1)||re[1],Wi(we,2)||re[2]],We=Ml(d.zoom);if(We>0){const je=function({x:mt,y:Ye,z:At},xt,St,Ot,Nt){const Ut=1/(1<<At);let Mt=mt*Ut,jt=Mt+Ut,ga=Ye*Ut,ma=ga+Ut,Ya=0;const xa=(Mt+jt)/2-Ot;return xa>.5?Ya=-1:xa<-.5&&(Ya=1),Mt=((Mt+Ya)*xt-(Ot*=xt))*St+Ot,jt=((jt+Ya)*xt-Ot)*St+Ot,ga=(ga*xt-(Nt*=xt))*St+Nt,ma=(ma*xt-Nt)*St+Nt,[[Mt,ma,0],[jt,ma,0],[jt,ga,0],[Mt,ga,0]]}(u,i,d._pixelsPerMercatorPixel,B,X);for(let mt=0;mt<b.length;mt++)ro(b[mt],je[mt],We);const Ze=_e.vec3.add([],je[le],je[(le+1)%4]);_e.vec3.scale(Ze,Ze,.5),ro(Pe,Ze,We)}for(const je of b)_e.vec3.min(S,S,je),_e.vec3.max(D,D,je);return S[2]=Math.min(re[2],pe[2]),_e.vec3.min(S,S,Pe),_e.vec3.max(D,D,Pe),new tr(S,D)}function Cn({x:d,y:i,z:u},f=!1){const y=1/(1<<u),m=new Ln(Nu(d*y),i===(1<<u)-1&&f?-90:Ri((i+1)*y)),_=new Ln(Nu((d+1)*y),i===0&&f?90:Ri(i*y));return new qh(m,_)}function ii(d,i=Al){const u=za(d.getNorth()),f=za(d.getSouth()),y=Math.cos(u),m=Math.cos(f),_=Math.sin(u),b=Math.sin(f),N=d.getWest(),D=d.getEast();return[lp(m,b,N,i),lp(m,b,D,i),lp(y,_,D,i),lp(y,_,N,i)]}function On(d,i,u,f){const y=1<<u.z,m=(d/Na+u.x)/y;return Rc(Ri((i/Na+u.y)/y),Nu(m),f)}function oi({min:d,max:i}){return iA/Math.max(i[0]-d[0],i[1]-d[1],i[2]-d[2])}const yo=new Float64Array(16);function Ti(d){const i=oi(d),u=_e.mat4.fromScaling(yo,[i,i,i]);return _e.mat4.translate(u,u,_e.vec3.negate([],d.min))}function os(d){const i=_e.mat4.fromTranslation(yo,d.min),u=1/oi(d);return _e.mat4.scale(i,i,[u,u,u])}function Tc(d){const i=Na/(2*Math.PI);return d/(2*Math.PI)/i}function qo(d,i){return Na/(512*Math.pow(2,d))*oi(hs(i))}function au(d,i,u,f,y){const m=Tc(u),_=[d,i,-u/(2*Math.PI)],b=_e.mat4.identity(new Float64Array(16));return _e.mat4.translate(b,b,_),_e.mat4.scale(b,b,[m,m,m]),_e.mat4.rotateX(b,b,za(-y)),_e.mat4.rotateY(b,b,za(-f)),b}function Ml(d){return jr(vh,Qp,d)}function Yu(d,i){const u=Rc(i.lat,i.lng),f=function(m){const _=Rc(m._center.lat,m._center.lng),b=_e.vec3.fromValues(0,1,0);let N=_e.vec3.cross([],b,_);const D=_e.mat4.fromRotation([],-m.angle,_);N=_e.vec3.transformMat4(N,N,D),_e.mat4.fromRotation(D,-m._pitch,N);const S=_e.vec3.normalize([],_);return _e.vec3.scale(S,S,sn(m.cameraToCenterDistance/m.pixelsPerMeter)),_e.vec3.transformMat4(S,S,D),_e.vec3.add([],_,S)}(d),y=_e.vec3.subtract([],f,u);return _e.vec3.angle(y,u)}function vl(d,i){return Yu(d,i)>Math.PI/2*1.01}const jd=za(85),go=Math.cos(jd),wh=Math.sin(jd),Il=_e.mat4.create(),cp=d=>{const i=[];return d.paint.get("circle-pitch-alignment")==="map"&&i.push("PITCH_WITH_MAP"),d.paint.get("circle-pitch-scale")==="map"&&i.push("SCALE_WITH_MAP"),i};function em(d,i,u,f,y,m,_,b,N){if(m&&d.queryGeometry.isAboveHorizon)return!1;m&&(N*=d.pixelToTileUnitsFactor);const D=d.tileID.canonical,S=u.projection.upVectorScale(D,u.center.lat,u.worldSize).metersToTile;for(const V of i)for(const I of V){const O=I.add(b),M=y&&u.elevation?u.elevation.exaggeration()*y.getElevationAt(O.x,O.y,!0):0,B=u.projection.projectTilePoint(O.x,O.y,D);if(M>0){const le=u.projection.upVector(D,O.x,O.y);B.x+=le[0]*S*M,B.y+=le[1]*S*M,B.z+=le[2]*S*M}const X=m?O:ky(B.x,B.y,B.z,f),ee=m?d.tilespaceRays.map(le=>E0(le,M)):d.queryGeometry.screenGeometry,ue=_e.vec4.transformMat4([],[B.x,B.y,B.z,1],f);if(!_&&m?N*=ue[3]/u.cameraToCenterDistance:_&&!m&&(N*=u.cameraToCenterDistance/ue[3]),m){const le=Ri((I.y/Na+D.y)/(1<<D.z));N/=u.projection.pixelsPerMeter(le,1)/jo(1,le)}if(ve(ee,X,N))return!0}return!1}function ky(d,i,u,f){const y=_e.vec4.transformMat4([],[d,i,u,1],f);return new Bt(y[0]/y[3],y[1]/y[3])}const FT=_e.vec3.fromValues(0,0,0),dp=_e.vec3.fromValues(0,0,1);function E0(d,i){const u=_e.vec3.create();return FT[2]=i,d.intersectsPlane(FT,dp,u),new Bt(u[0],u[1])}class N0 extends ce{}let Hm,t1,a1,r1;function V0(d,{width:i,height:u},f,y){if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==i*u*f)throw new RangeError("mismatched image size")}else y=new Uint8Array(i*u*f);return d.width=i,d.height=u,d.data=y,d}function z0(d,i,u){const{width:f,height:y}=i;f===d.width&&y===d.height||(n1(d,i,{x:0,y:0},{x:0,y:0},{width:Math.min(d.width,f),height:Math.min(d.height,y)},u,null),d.width=f,d.height=y,d.data=i.data)}function n1(d,i,u,f,y,m,_,b){if(y.width===0||y.height===0)return i;if(y.width>d.width||y.height>d.height||u.x>d.width-y.width||u.y>d.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>i.width||y.height>i.height||f.x>i.width-y.width||f.y>i.height-y.height)throw new RangeError("out of range destination coordinates for image copy");const N=d.data,D=i.data,S=m===4&&b;for(let V=0;V<y.height;V++){const I=((u.y+V)*d.width+u.x)*m,O=((f.y+V)*i.width+f.x)*m;if(S)for(let M=0;M<y.width;M++){const B=I+M*m+3,X=O+M*m;D[X+0]=255,D[X+1]=255,D[X+2]=255,D[X+3]=N[B]}else if(_)for(let M=0;M<y.width;M++){const B=I+M*m,X=O+M*m,ee=N[B+3],ue=new bn(N[B+0]/255*ee,N[B+1]/255*ee,N[B+2]/255*ee,ee).toRenderColor(_).toArray();D[X+0]=ue[0],D[X+1]=ue[1],D[X+2]=ue[2],D[X+3]=ue[3]}else for(let M=0;M<y.width*m;M++)D[O+M]=N[I+M]}return i}Pt(N0,"HeatmapBucket",{omit:["layers"]});class tm{constructor(i,u){V0(this,i,1,u)}resize(i){z0(this,new tm(i),1)}clone(){return new tm({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,u,f,y,m){n1(i,u,f,y,m,1,null)}}class wl{constructor(i,u){V0(this,i,4,u)}resize(i){z0(this,new wl(i),4)}replace(i,u){u?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new wl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,u,f,y,m,_,b){n1(i,u,f,y,m,4,_,b)}}class i1{constructor(i,u){this.width=i.width,this.height=i.height,this.data=u instanceof Uint8Array?new Float32Array(u.buffer):u}}function By(d){const i={},u=d.resolution||256,f=d.clips?d.clips.length:1,y=d.image||new wl({width:u,height:f}),m=(_,b,N)=>{i[d.evaluationKey]=N;const D=d.expression.evaluate(i);D&&(y.data[_+b+0]=Math.floor(255*D.r/D.a),y.data[_+b+1]=Math.floor(255*D.g/D.a),y.data[_+b+2]=Math.floor(255*D.b/D.a),y.data[_+b+3]=Math.floor(255*D.a))};if(d.clips)for(let _=0,b=0;_<f;++_,b+=4*u)for(let N=0,D=0;N<u;N++,D+=4){const S=N/(u-1),{start:V,end:I}=d.clips[_];m(b,D,V*(1-S)+I*S)}else for(let _=0,b=0;_<u;_++,b+=4)m(0,b,_/(u-1));return y}Pt(tm,"AlphaImage"),Pt(wl,"RGBAImage");const Gy=xn([{name:"a_pos",components:2,type:"Int16"}],4),O0=xn([{name:"a_road_z_offset",components:1,type:"Float32"}],4),UT=xn([{name:"a_pos",components:2,type:"Int16"},{name:"a_height",components:1,type:"Float32"}],4),kT=xn([{name:"a_pos_normal_3",components:3,type:"Int16"}],4);function uA(d,i,u=2){const f=i&&i.length,y=f?i[0]*u:d.length;let m=s1(d,0,y,u,!0);const _=[];if(!m||m.next===m.prev)return _;let b,N,D;if(f&&(m=function(S,V,I,O){const M=[];for(let B=0,X=V.length;B<X;B++){const ee=s1(S,V[B]*O,B<X-1?V[B+1]*O:S.length,O,!1);ee===ee.next&&(ee.steiner=!0),M.push(qy(ee))}M.sort(uP);for(let B=0;B<M.length;B++)I=cP(M[B],I);return I}(d,i,m,u)),d.length>80*u){b=1/0,N=1/0;let S=-1/0,V=-1/0;for(let I=u;I<y;I+=u){const O=d[I],M=d[I+1];O<b&&(b=O),M<N&&(N=M),O>S&&(S=O),M>V&&(V=M)}D=Math.max(S-b,V-N),D=D!==0?32767/D:0}return jy(m,_,u,b,N,D,0),_}function s1(d,i,u,f,y){let m;if(y===function(_,b,N,D){let S=0;for(let V=b,I=N-D;V<N;V+=D)S+=(_[I]-_[V])*(_[V+1]+_[I+1]),I=V;return S}(d,i,u,f)>0)for(let _=i;_<u;_+=f)m=u1(_/f|0,d[_],d[_+1],m);else for(let _=u-f;_>=i;_-=f)m=u1(_/f|0,d[_],d[_+1],m);return m&&Pf(m,m.next)&&(cA(m),m=m.next),m}function Rh(d,i){if(!d)return d;i||(i=d);let u,f=d;do if(u=!1,f.steiner||!Pf(f,f.next)&&no(f.prev,f,f.next)!==0)f=f.next;else{if(cA(f),f=i=f.prev,f===f.next)break;u=!0}while(u||f!==i);return i}function jy(d,i,u,f,y,m,_){if(!d)return;!_&&m&&function(N,D,S,V){let I=N;do I.z===0&&(I.z=Zy(I.x,I.y,D,S,V)),I.prevZ=I.prev,I.nextZ=I.next,I=I.next;while(I!==N);I.prevZ.nextZ=null,I.prevZ=null,function(O){let M,B=1;do{let X,ee=O;O=null;let ue=null;for(M=0;ee;){M++;let le=ee,re=0;for(let we=0;we<B&&(re++,le=le.nextZ,le);we++);let pe=B;for(;re>0||pe>0&&le;)re!==0&&(pe===0||!le||ee.z<=le.z)?(X=ee,ee=ee.nextZ,re--):(X=le,le=le.nextZ,pe--),ue?ue.nextZ=X:O=X,X.prevZ=ue,ue=X;ee=le}ue.nextZ=null,B*=2}while(M>1)}(I)}(d,f,y,m);let b=d;for(;d.prev!==d.next;){const N=d.prev,D=d.next;if(m?o1(d,f,y,m):Ms(d))i.push(N.i,d.i,D.i),cA(d),d=D.next,b=D.next;else if((d=D)===b){_?_===1?jy(d=lP(Rh(d),i),i,u,f,y,m,2):_===2&&BT(d,i,u,f,y,m):jy(Rh(d),i,u,f,y,m,1);break}}}function Ms(d){const i=d.prev,u=d,f=d.next;if(no(i,u,f)>=0)return!1;const y=i.x,m=u.x,_=f.x,b=i.y,N=u.y,D=f.y,S=y<m?y<_?y:_:m<_?m:_,V=b<N?b<D?b:D:N<D?N:D,I=y>m?y>_?y:_:m>_?m:_,O=b>N?b>D?b:D:N>D?N:D;let M=f.next;for(;M!==i;){if(M.x>=S&&M.x<=I&&M.y>=V&&M.y<=O&&am(y,b,m,N,_,D,M.x,M.y)&&no(M.prev,M,M.next)>=0)return!1;M=M.next}return!0}function o1(d,i,u,f){const y=d.prev,m=d,_=d.next;if(no(y,m,_)>=0)return!1;const b=y.x,N=m.x,D=_.x,S=y.y,V=m.y,I=_.y,O=b<N?b<D?b:D:N<D?N:D,M=S<V?S<I?S:I:V<I?V:I,B=b>N?b>D?b:D:N>D?N:D,X=S>V?S>I?S:I:V>I?V:I,ee=Zy(O,M,i,u,f),ue=Zy(B,X,i,u,f);let le=d.prevZ,re=d.nextZ;for(;le&&le.z>=ee&&re&&re.z<=ue;){if(le.x>=O&&le.x<=B&&le.y>=M&&le.y<=X&&le!==y&&le!==_&&am(b,S,N,V,D,I,le.x,le.y)&&no(le.prev,le,le.next)>=0||(le=le.prevZ,re.x>=O&&re.x<=B&&re.y>=M&&re.y<=X&&re!==y&&re!==_&&am(b,S,N,V,D,I,re.x,re.y)&&no(re.prev,re,re.next)>=0))return!1;re=re.nextZ}for(;le&&le.z>=ee;){if(le.x>=O&&le.x<=B&&le.y>=M&&le.y<=X&&le!==y&&le!==_&&am(b,S,N,V,D,I,le.x,le.y)&&no(le.prev,le,le.next)>=0)return!1;le=le.prevZ}for(;re&&re.z<=ue;){if(re.x>=O&&re.x<=B&&re.y>=M&&re.y<=X&&re!==y&&re!==_&&am(b,S,N,V,D,I,re.x,re.y)&&no(re.prev,re,re.next)>=0)return!1;re=re.nextZ}return!0}function lP(d,i){let u=d;do{const f=u.prev,y=u.next.next;!Pf(f,y)&&$h(f,u,u.next,y)&&Hy(f,y)&&Hy(y,f)&&(i.push(f.i,u.i,y.i),cA(u),cA(u.next),u=d=y),u=u.next}while(u!==d);return Rh(u)}function BT(d,i,u,f,y,m){let _=d;do{let b=_.next.next;for(;b!==_.prev;){if(_.i!==b.i&&D0(_,b)){let N=l1(_,b);return _=Rh(_,_.next),N=Rh(N,N.next),jy(_,i,u,f,y,m,0),void jy(N,i,u,f,y,m,0)}b=b.next}_=_.next}while(_!==d)}function uP(d,i){return d.x-i.x}function cP(d,i){const u=function(y,m){let _=m;const b=y.x,N=y.y;let D,S=-1/0;do{if(N<=_.y&&N>=_.next.y&&_.next.y!==_.y){const B=_.x+(N-_.y)*(_.next.x-_.x)/(_.next.y-_.y);if(B<=b&&B>S&&(S=B,D=_.x<_.next.x?_:_.next,B===b))return D}_=_.next}while(_!==m);if(!D)return null;const V=D,I=D.x,O=D.y;let M=1/0;_=D;do{if(b>=_.x&&_.x>=I&&b!==_.x&&am(N<O?b:S,N,I,O,N<O?S:b,N,_.x,_.y)){const B=Math.abs(N-_.y)/(b-_.x);Hy(_,y)&&(B<M||B===M&&(_.x>D.x||_.x===D.x&&dP(D,_)))&&(D=_,M=B)}_=_.next}while(_!==V);return D}(d,i);if(!u)return i;const f=l1(u,d);return Rh(f,f.next),Rh(u,u.next)}function dP(d,i){return no(d.prev,d,i.prev)<0&&no(i.next,d,d.next)<0}function Zy(d,i,u,f,y){return(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=(d-u)*y|0)|d<<8))|d<<4))|d<<2))|d<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-f)*y|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function qy(d){let i=d,u=d;do(i.x<u.x||i.x===u.x&&i.y<u.y)&&(u=i),i=i.next;while(i!==d);return u}function am(d,i,u,f,y,m,_,b){return(y-_)*(i-b)>=(d-_)*(m-b)&&(d-_)*(f-b)>=(u-_)*(i-b)&&(u-_)*(m-b)>=(y-_)*(f-b)}function D0(d,i){return d.next.i!==i.i&&d.prev.i!==i.i&&!function(u,f){let y=u;do{if(y.i!==u.i&&y.next.i!==u.i&&y.i!==f.i&&y.next.i!==f.i&&$h(y,y.next,u,f))return!0;y=y.next}while(y!==u);return!1}(d,i)&&(Hy(d,i)&&Hy(i,d)&&function(u,f){let y=u,m=!1;const _=(u.x+f.x)/2,b=(u.y+f.y)/2;do y.y>b!=y.next.y>b&&y.next.y!==y.y&&_<(y.next.x-y.x)*(b-y.y)/(y.next.y-y.y)+y.x&&(m=!m),y=y.next;while(y!==u);return m}(d,i)&&(no(d.prev,d,i.prev)||no(d,i.prev,i))||Pf(d,i)&&no(d.prev,d,d.next)>0&&no(i.prev,i,i.next)>0)}function no(d,i,u){return(i.y-d.y)*(u.x-i.x)-(i.x-d.x)*(u.y-i.y)}function Pf(d,i){return d.x===i.x&&d.y===i.y}function $h(d,i,u,f){const y=M0(no(d,i,u)),m=M0(no(d,i,f)),_=M0(no(u,f,d)),b=M0(no(u,f,i));return y!==m&&_!==b||!(y!==0||!rm(d,u,i))||!(m!==0||!rm(d,f,i))||!(_!==0||!rm(u,d,f))||!(b!==0||!rm(u,i,f))}function rm(d,i,u){return i.x<=Math.max(d.x,u.x)&&i.x>=Math.min(d.x,u.x)&&i.y<=Math.max(d.y,u.y)&&i.y>=Math.min(d.y,u.y)}function M0(d){return d>0?1:d<0?-1:0}function Hy(d,i){return no(d.prev,d,d.next)<0?no(d,i,d.next)>=0&&no(d,d.prev,i)>=0:no(d,i,d.prev)<0||no(d,d.next,i)<0}function l1(d,i){const u=dA(d.i,d.x,d.y),f=dA(i.i,i.x,i.y),y=d.next,m=i.prev;return d.next=i,i.prev=d,u.next=y,y.prev=u,f.next=u,u.prev=f,m.next=f,f.prev=m,f}function u1(d,i,u,f){const y=dA(d,i,u);return f?(y.next=f.next,y.prev=f,f.next.prev=y,f.next=y):(y.prev=y,y.next=y),y}function cA(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function dA(d,i,u){return{i:d,x:i,y:u,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function hA(d,i){const u=d.length;if(u<=1)return[d];const f=[];let y,m;for(let _=0;_<u;_++){const b=As(d[_]);b!==0&&(d[_].area=Math.abs(b),m===void 0&&(m=b<0),m===b<0?(y&&f.push(y),y=[d[_]]):y.push(d[_]))}if(y&&f.push(y),i>1)for(let _=0;_<f.length;_++)f[_].length<=i||(ff(f[_],i,1,f[_].length-1,GT),f[_]=f[_].slice(0,i));return f}function GT(d,i){return i.area-d.area}function jT(d,i,u=1){if(!d)return null;const f=typeof d=="string"?Ts.from(d).getPrimary():d.getPrimary(),y=f.id.toString();return i.has(y)||i.set(y,[]),f.scaleSelf(u),i.get(y).push(f),f.toString()}function fA(d,i,u,f){const y=f.patternDependencies;let m=!1;for(const _ of i){const b=_.paint.get(`${d}-pattern`);b.isConstant()||(m=!0),jT(b.constantOr(null),y,u)&&(m=!0)}return m}function pA(d,i,u,f,y,m){const _=m.patternDependencies;for(const b of i){const N=b.paint.get(`${d}-pattern`).value;if(N.kind!=="constant"){let D=N.evaluate({zoom:f},u,{},m.availableImages);D=D&&D.name?D.name:D;const S=jT(D,_,y);S&&(u.patterns[b.id]=S)}}return u}var c1,ZT,$m,qT,I0,Mi,L0,Km={};function F0(){if(ZT)return c1;ZT=1;var d=Pa();function i(y,m,_,b,N){this.properties={},this.extent=_,this.type=0,this._pbf=y,this._geometry=-1,this._keys=b,this._values=N,y.readFields(u,this,m)}function u(y,m,_){y==1?m.id=_.readVarint():y==2?function(b,N){for(var D=b.readVarint()+b.pos;b.pos<D;){var S=N._keys[b.readVarint()],V=N._values[b.readVarint()];N.properties[S]=V}}(_,m):y==3?m.type=_.readVarint():y==4&&(m._geometry=_.pos)}function f(y){for(var m,_,b=0,N=0,D=y.length,S=D-1;N<D;S=N++)b+=((_=y[S]).x-(m=y[N]).x)*(m.y+_.y);return b}return c1=i,i.types=["Unknown","Point","LineString","Polygon"],i.prototype.loadGeometry=function(){var y=this._pbf;y.pos=this._geometry;for(var m,_=y.readVarint()+y.pos,b=1,N=0,D=0,S=0,V=[];y.pos<_;){if(N<=0){var I=y.readVarint();b=7&I,N=I>>3}if(N--,b===1||b===2)D+=y.readSVarint(),S+=y.readSVarint(),b===1&&(m&&V.push(m),m=[]),m.push(new d(D,S));else{if(b!==7)throw new Error("unknown command "+b);m&&m.push(m[0].clone())}}return m&&V.push(m),V},i.prototype.bbox=function(){var y=this._pbf;y.pos=this._geometry;for(var m=y.readVarint()+y.pos,_=1,b=0,N=0,D=0,S=1/0,V=-1/0,I=1/0,O=-1/0;y.pos<m;){if(b<=0){var M=y.readVarint();_=7&M,b=M>>3}if(b--,_===1||_===2)(N+=y.readSVarint())<S&&(S=N),N>V&&(V=N),(D+=y.readSVarint())<I&&(I=D),D>O&&(O=D);else if(_!==7)throw new Error("unknown command "+_)}return[S,I,V,O]},i.prototype.toGeoJSON=function(y,m,_){var b,N,D=this.extent*Math.pow(2,_),S=this.extent*y,V=this.extent*m,I=this.loadGeometry(),O=i.types[this.type];function M(ee){for(var ue=0;ue<ee.length;ue++){var le=ee[ue];ee[ue]=[360*(le.x+S)/D-180,360/Math.PI*Math.atan(Math.exp((180-360*(le.y+V)/D)*Math.PI/180))-90]}}switch(this.type){case 1:var B=[];for(b=0;b<I.length;b++)B[b]=I[b][0];M(I=B);break;case 2:for(b=0;b<I.length;b++)M(I[b]);break;case 3:for(I=function(ee){var ue=ee.length;if(ue<=1)return[ee];for(var le,re,pe=[],we=0;we<ue;we++){var Pe=f(ee[we]);Pe!==0&&(re===void 0&&(re=Pe<0),re===Pe<0?(le&&pe.push(le),le=[ee[we]]):le.push(ee[we]))}return le&&pe.push(le),pe}(I),b=0;b<I.length;b++)for(N=0;N<I[b].length;N++)M(I[b][N])}I.length===1?I=I[0]:O="Multi"+O;var X={type:"Feature",geometry:{type:O,coordinates:I},properties:this.properties};return"id"in this&&(X.id=this.id),X},c1}function d1(){if(qT)return $m;qT=1;var d=F0();function i(f,y){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=f,this._keys=[],this._values=[],this._features=[],f.readFields(u,this,y),this.length=this._features.length}function u(f,y,m){f===15?y.version=m.readVarint():f===1?y.name=m.readString():f===5?y.extent=m.readVarint():f===2?y._features.push(m.pos):f===3?y._keys.push(m.readString()):f===4&&y._values.push(function(_){for(var b=null,N=_.readVarint()+_.pos;_.pos<N;){var D=_.readVarint()>>3;b=D===1?_.readString():D===2?_.readFloat():D===3?_.readDouble():D===4?_.readVarint64():D===5?_.readVarint():D===6?_.readSVarint():D===7?_.readBoolean():null}return b}(m))}return $m=i,i.prototype.feature=function(f){if(f<0||f>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[f];var y=this._pbf.readVarint()+this._pbf.pos;return new d(this._pbf,y,this.extent,this._keys,this._values)},$m}function U0(){return L0||(L0=1,Km.VectorTile=function(){if(Mi)return I0;Mi=1;var d=d1();function i(u,f,y){if(u===3){var m=new d(y,y.readVarint()+y.pos);m.length&&(f[m.name]=m)}}return I0=function(u,f){this.layers=u.readFields(i,{},f)},I0}(),Km.VectorTileFeature=F0(),Km.VectorTileLayer=d1()),Km}var Th=U0();const Ef="3d_elevation_id",Wm="level";class HT{constructor(){this._valid=!1}reset(i){return this.feature=i,this._valid=!0,this._geometry=i.loadGeometry(),this._geometry.length!==0&&this._geometry[0].length!==0||(this._valid=!1),this}geometry(i,u){return this._valid&&i(u(this._geometry)),this}require(i,u,f){return this.get(i,!0,u,f)}optional(i,u,f){return this.get(i,!1,u,f)}success(){return this._valid}get(i,u,f,y){const m=this.feature.properties.hasOwnProperty(i)?+this.feature.properties[i]:void 0;return this._valid&&m!==void 0?f(y?y(m):m):u&&(this._valid=!1),this}}class $T{constructor(i,u){this.featureFunc=i,this.vertexFunc=u}parseFeature(i,u,f){return this.featureFunc(i,u,f)}parseVertex(i,u,f){return this.vertexFunc(i,u,f)}}const hP=new $T((d,i,u)=>d.reset(i).require(Ef,f=>{u.id=f}).optional("fixed_height_relative",f=>{u.constantHeight=f},Nf.decodeRelativeHeight).geometry(f=>{u.bounds=f},Nf.computeBounds).success(),(d,i,u)=>d.reset(i).require(Ef,f=>{u.id=f}).require("elevation_idx",f=>{u.idx=f}).require("extent",f=>{u.extent=f}).require("height_relative",f=>{u.height=f},Nf.decodeRelativeHeight).geometry(f=>{u.position=f},Nf.getPoint).success()),KT=new $T((d,i,u)=>d.reset(i).require(Ef,f=>{u.id=f}).optional("fixed_height",f=>{u.constantHeight=f},Nf.decodeMetricHeight).geometry(f=>{u.bounds=f},Nf.computeBounds).success(),(d,i,u)=>d.reset(i).require(Ef,f=>{u.id=f}).require("elevation_idx",f=>{u.idx=f}).require("extent",f=>{u.extent=f}).require("height",f=>{u.height=f},Nf.decodeMetricHeight).geometry(f=>{u.position=f},Nf.getPoint).success());class Nf{static computeBounds(i){const u=new Bt(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),f=new Bt(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);for(const y of i[0])u.x>y.x&&(u.x=y.x),u.y>y.y&&(u.y=y.y),f.x<y.x&&(f.x=y.x),f.y<y.y&&(f.y=y.y);return{min:u,max:f}}static getPoint(i){return _e.vec2.fromValues(i[0][0].x,i[0][0].y)}static decodeRelativeHeight(i){return 1e-4*i*5}static decodeMetricHeight(i){return 1e-4*i}static parse(i){const u=[],f=[],y=i.length,m=new HT;for(let b=0;b<y;b++){const N=i.feature(b),D=N.properties.hasOwnProperty("version")?String(N.properties.version):void 0,S=(_=D)?_==="1.0.1"?KT:void 0:hP;if(S===void 0){en(`Unknown elevation feature version number ${D||"(unknown)"}`);continue}const V=N.properties.hasOwnProperty("type")?N.properties.type:void 0;if(V){if(Th.VectorTileFeature.types[N.type]==="Point"&&V==="curve_point"){const I={};S.parseVertex(m,N,I)&&u.push(I)}else if(Th.VectorTileFeature.types[N.type]==="Polygon"&&V==="curve_meta"){const I={};S.parseFeature(m,N,I)&&f.push(I)}}}var _;return{vertices:u,features:f}}}class $y{constructor(i,u,f,y,m,_){if(this.vertices=new Array,this.vertexProps=new Array,this.edges=new Array,this.edgeProps=new Array,this.id=i,this.heightRange={min:f,max:f},this.safeArea=u,this.constantHeight=f,this.constantHeight==null&&(this.constantHeight!=null||y.length!==0)){this.vertices=y,this.edges=m,this.edges=this.edges.filter(b=>b.a<this.vertices.length&&b.b<this.vertices.length&&!_e.vec2.exactEquals(this.vertices[b.a].position,this.vertices[b.b].position)),this.heightRange={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};for(const b of this.vertices)this.vertexProps.push({dir:_e.vec2.fromValues(0,0)}),this.heightRange.min=Math.min(this.heightRange.min,b.height),this.heightRange.max=Math.max(this.heightRange.max,b.height);for(const b of this.edges){const N=this.vertices[b.a].position,D=this.vertices[b.b].position,S=_e.vec2.subtract(_e.vec2.create(),D,N),V=_e.vec2.length(S),I=_e.vec2.scale(_e.vec2.create(),S,1/V);this.edgeProps.push({vec:S,dir:I,len:V});const O=this.vertexProps[b.a].dir,M=this.vertexProps[b.b].dir;_e.vec2.add(O,O,I),_e.vec2.add(M,M,I)}for(const b of this.vertexProps)b.dir[0]===0&&b.dir[1]===0||_e.vec2.normalize(b.dir,b.dir);this.tessellate(_)}}pointElevation(i){if(this.constantHeight!=null)return this.constantHeight;const u=this.getClosestEdge(i);if(u==null)return 0;const[f,y]=u;return((m,_,b)=>(1-b)*m+b*_)(this.vertices[this.edges[f].a].height,this.vertices[this.edges[f].b].height,y)}getSafeArea(){return this.safeArea}isTunnel(){return this.heightRange.max<=-5}getClosestEdge(i){if(this.edges.length===0)return;let u=0,f=Number.POSITIVE_INFINITY,y=0;const m=_e.vec2.fromValues(i.x,i.y);for(let _=0;_<this.edges.length;_++){const b=this.edges[_],N=this.edgeProps[_].dir,D=new Or(m,this.edgeProps[_].dir),S=this.vertices[b.a].position,V=this.vertices[b.b].position,I=_e.vec2.create(),O=_e.vec2.create(),M=D.intersectsPlane(S,this.vertexProps[b.a].dir,I),B=D.intersectsPlane(V,this.vertexProps[b.b].dir,O);if(!M||!B)continue;const X=_e.vec2.subtract(_e.vec2.create(),O,I),ee=_e.vec2.subtract(_e.vec2.create(),m,I),ue=_e.vec2.dot(X,X),le=ue>0?_e.vec2.dot(ee,X)/ue:0,re=ka(le,0,1),pe=Math.abs((le-re)*this.edgeProps[_].len),we=_e.vec2.subtract(_e.vec2.create(),m,S),Pe=pe+Math.abs(_e.vec2.dot(we,_e.vec2.fromValues(N[1],-N[0])));Pe<f&&(u=_,f=Pe,y=re)}return[u,y]}tessellate(i){for(let u=this.edges.length-1;u>=0;--u){const f=this.edges[u].a,y=this.edges[u].b,{position:m,height:_,extent:b}=this.vertices[f],{position:N,height:D,extent:S}=this.vertices[y],V=this.vertexProps[f].dir,I=this.vertexProps[y].dir,O=_e.vec3.fromValues(m[0]/i,m[1]/i,_),M=_e.vec3.fromValues(N[0]/i,N[1]/i,D),B=_e.vec3.fromValues(V[1],-V[0],0);_e.vec3.scale(B,B,b);const X=_e.vec3.fromValues(I[1],-I[0],0);if(_e.vec3.scale(X,X,S),this.distSqLines(_e.vec3.fromValues(O[0]+.5*B[0],O[1]+.5*B[1],O[2]+.5*B[2]),_e.vec3.fromValues(M[0]-.5*X[0],M[1]-.5*X[1],M[2]-.5*X[2]),_e.vec3.fromValues(O[0]-.5*B[0],O[1]-.5*B[1],O[2]-.5*B[2]),_e.vec3.fromValues(M[0]+.5*X[0],M[1]+.5*X[1],M[2]+.5*X[2]))<=.05*.05)continue;const ee=this.vertices.length,ue=_e.vec2.add(_e.vec2.create(),m,N);this.vertices.push({position:_e.vec2.scale(ue,ue,.5),height:.5*(_+D),extent:.5*(b+S)});const le=_e.vec2.add(_e.vec2.create(),V,I);this.vertexProps.push({dir:_e.vec2.normalize(le,le)}),this.edges.splice(u,1),this.edgeProps.splice(u,1),this.edges.push({a:f,b:ee}),this.edges.push({a:ee,b:y});const re=_e.vec2.subtract(_e.vec2.create(),this.vertices[ee].position,m),pe=_e.vec2.length(re),we={vec:re,dir:_e.vec2.scale(_e.vec2.create(),re,1/pe),len:pe};this.edgeProps.push(we),this.edgeProps.push(we)}}distSqLines(i,u,f,y){const m=_e.vec3.subtract(_e.vec3.create(),u,i),_=_e.vec3.subtract(_e.vec3.create(),y,f),b=_e.vec3.subtract(_e.vec3.create(),i,f),N=_e.vec3.dot(m,m),D=_e.vec3.dot(m,_),S=_e.vec3.dot(m,b),V=_e.vec3.dot(_,_),I=_e.vec3.dot(_,b),O=N*V-D*D;if(O===0){const ue=_e.vec3.dot(b,_)/_e.vec3.dot(_,_),le=_e.vec3.lerp(_e.vec3.create(),f,y,ue);return _e.vec3.squaredDistance(le,i)}const M=(D*I-S*V)/O,B=(N*I-D*S)/O,X=_e.vec3.lerp(_e.vec3.create(),i,u,M),ee=_e.vec3.lerp(_e.vec3.create(),f,y,B);return _e.vec3.squaredDistance(X,ee)}}class Es{constructor(i,u){this.zScale=1,this.xOffset=0,this.yOffset=0,i.equals(u)||(this.zScale=Math.pow(2,u.z-i.z),this.xOffset=(i.x*this.zScale-u.x)*Na,this.yOffset=(i.y*this.zScale-u.y)*Na)}constantElevation(i,u){if(i.constantHeight!=null)return this.computeBiasedHeight(i.constantHeight,u)}pointElevation(i,u,f){const y=this.constantElevation(u,f);return y??(i.x=i.x*this.zScale+this.xOffset,i.y=i.y*this.zScale+this.yOffset,this.computeBiasedHeight(u.pointElevation(i),f))}computeBiasedHeight(i,u){return u<=0?i:i+u*jr(0,u,i>=0?i:Math.abs(.5*i))}}Pt($y,"ElevationFeature");class k0{constructor(){this.polygons=new Map}add(i,...u){this.polygons.has(i)?this.polygons.get(i).push(...u):this.polygons.set(i,u)}merge(i){for(const[u,f]of i.polygons)this.add(u,...f)}}class Co{constructor(){this.portals=[]}static evaluate(i){if(i.length===0)return new Co;let u=[];for(const D of i)u.push(...D.portals);if(u.length===0)return new Co;const f=(D,S)=>D<=0&&S<=0||D>=Na&&S>=Na;for(const D of u){const S=D.va,V=D.vb;(f(S.x,V.x)||f(S.y,V.y))&&(D.type="border")}const y=u.filter(D=>D.type!=="unevaluated"),m=u.filter(D=>D.type==="unevaluated");if(m.length===0)return new Co;m.sort((D,S)=>D.hash===S.hash?D.isTunnel===S.isTunnel?0:D.isTunnel?-1:1:D.hash<S.hash?1:-1),u=y.concat(m);let _=y.length,b=_,N=_;do if(b++,b===u.length||u[_].hash!==u[b].hash){if(b-_==2){N<_&&(u[N]=u[_],u[_]=null);const D=u[N],S=u[b-1];D.type=D.isTunnel!==S.isTunnel?"tunnel":"polygon",D.connection={a:D.connection.a,b:S.connection.a},N++}_=b}while(_!==u.length);return u.splice(N),u.sort((D,S)=>D.hash<S.hash?1:-1),{portals:u}}}Pt(Co,"ElevationPortalGraph"),Pt(k0,"ElevationPolygons");class fP{constructor(i,u,f){this.outPositions=i,this.outNormals=u,this.outIndices=f,this.vertexLookup=new Map,this.buffer=new ArrayBuffer(4),this.view=new DataView(this.buffer)}addVertex(i,u,f){let y=i[2];f!=null&&(y*=f);const m=this.getVec3Bits(i)<<96n|this.getVec3Bits(u),_=this.vertexLookup.get(m);if(_!=null)return _;const b=this.outPositions.length;this.vertexLookup.set(m,b);const N=Math.trunc(16384*u[0]),D=Math.trunc(16384*u[1]),S=Math.trunc(16384*u[2]);return this.outPositions.emplaceBack(i[0],i[1],y),this.outNormals.emplaceBack(N,D,S),b}addVertices(i,u,...f){const y=[];for(const m of f){const _=this.addVertex(m,i,u);y.push(_)}return y}addTriangles(i,u,f){if(u&&f){const y=f.length===1,m=_e.vec3.fromValues(0,0,0);for(let _=0;_<i.length;_+=3){const b=u[i[_+0]],N=u[i[_+1]],D=u[i[_+2]],S=y?f[0]:f[i[_+1]],V=y?f[0]:f[i[_+2]],I=this.addVertex(_e.vec3.fromValues(b.x,b.y,y?f[0]:f[i[_+0]]),m),O=this.addVertex(_e.vec3.fromValues(N.x,N.y,S),m),M=this.addVertex(_e.vec3.fromValues(D.x,D.y,V),m);this.outIndices.emplaceBack(I,O,M)}}else for(let y=0;y<i.length;y+=3)this.outIndices.emplaceBack(i[y+0],i[y+1],i[y+2])}addQuad(i,u){const f=this.addVertices(u,void 0,...i.map(N=>_e.vec3.fromValues(N.coord.x,N.coord.y,N.height))),[y,m,_,b]=f;this.addTriangles([y,m,_,_,b,y])}getBits(i){return this.view.setFloat32(0,i),BigInt(this.view.getUint32(0))}getVec3Bits(i){return this.getBits(i[0])<<64n|this.getBits(i[1])<<32n|this.getBits(i[2])}}class Zd{constructor(i){this.unevaluatedPortals=new Co,this.portalPolygons=new k0,this.vertexHashLookup=new Map,this.unevalVertices=[],this.unevalHeights=[],this.unevalTriangles=[],this.unevalTunnelTriangles=[],this.unevalEdges=[],this.vertexPositions=new vf,this.vertexNormals=new Gh,this.indexArray=new Ps,this.tileToMeters=g(i)}addVertices(i,u){const f=this.unevalVertices.length;for(let y=0;y<i.length;y++)this.unevalVertices.push(i[y]),this.unevalHeights.push(u[y]);return f}addTriangles(i,u,f){const y=f?this.unevalTunnelTriangles:this.unevalTriangles;for(const m of i)y.push(m+u)}addRenderableRing(i,u,f,y,m){const _=[new Bt(m.min.x,m.min.y),new Bt(m.max.x,m.min.y),new Bt(m.max.x,m.max.y),new Bt(m.min.x,m.max.y)];for(let b=0;b<f-1;b++){const N=u+b,D=N+1,S=this.unevalVertices[N],V=this.unevalVertices[D];if(!(S.x>=m.min.x&&S.x<=m.max.x&&S.y>=m.min.y&&S.y<=m.max.y||V.x>=m.min.x&&V.x<=m.max.x&&V.y>=m.min.y&&V.y<=m.max.y||gt(S,V,_))||this.isOnBorder(S.x,V.x)||this.isOnBorder(S.y,V.y))continue;const I=Zd.computeEdgeHash(this.unevalVertices[N],this.unevalVertices[D]);let O,M=this.vertexHashLookup.get(Zd.computePosHash(S));M!=null?O=M.next:(M=this.vertexHashLookup.get(Zd.computePosHash(V)),O=M!=null?M.prev:I),this.unevalEdges.push({polygonIdx:i,a:N,b:D,hash:I,portalHash:O,isTunnel:y,type:"unevaluated"})}}addPortalCandidates(i,u,f,y,m){if(u.length===0)return;this.portalPolygons.add(i,{geometry:u,zLevel:m});const _=u[0];this.vertexHashLookup.clear();let b=Zd.computeEdgeHash(_[_.length-2],_[_.length-1]);for(let N=0;N<_.length-1;N++){const D=_[N+0],S=_[N+1],V=_e.vec2.fromValues(S.x-D.x,S.y-D.y),I=_e.vec2.length(V);if(I===0)continue;let O="unevaluated";const M=y.pointElevation(D),B=y.pointElevation(S);Math.abs(M)<.01&&Math.abs(B)<.01?O="entrance":(this.isOnBorder(D.x,S.x)||this.isOnBorder(D.y,S.y))&&(O="border");const X=Zd.computeEdgeHash(D,S);this.unevaluatedPortals.portals.push({connection:{a:i,b:void 0},va:D,vb:S,vab:V,length:I,hash:X,isTunnel:f,type:O});const ee=Zd.computePosHash(D);this.vertexHashLookup.set(ee,{prev:b,next:X}),b=X}}construct(i){if(this.unevalVertices.length===0)return;const u=()=>({vertexOffset:0,primitiveOffset:this.indexArray.length}),f=V=>{V.primitiveLength=this.indexArray.length-V.primitiveOffset},y=new fP(this.vertexPositions,this.vertexNormals,this.indexArray);this.prepareEdges(i.portals,this.unevalEdges);const m=u(),_=u(),b=u(),N=(V,I)=>{V.sort((M,B)=>M.type===I&&B.type!==I?-1:M.type!==I&&B.type===I?1:0);const O=V.findIndex(M=>M.type!==I);return O>=0?O:V.length};let D=0;this.unevalEdges.length>0&&(D=N(this.unevalEdges,"none"),this.constructBridgeStructures(y,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:D},this.tileToMeters));const S=u();if(this.unevalEdges.length>0){const V=this.unevalEdges.splice(D),I=N(V,"tunnel")+D;this.unevalEdges.push(...V),this.constructTunnelStructures(y,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:D},{min:D,max:I})}f(b),y.addTriangles(this.unevalTriangles,this.unevalVertices,this.unevalHeights),f(S),y.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,this.unevalHeights),f(_),y.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,[-.1]),f(m),this.maskSegments=Di.simpleSegment(0,S.primitiveOffset,0,S.primitiveLength),this.depthSegments=Di.simpleSegment(0,_.primitiveOffset,0,_.primitiveLength),this.renderableSegments=Di.simpleSegment(0,b.primitiveOffset,0,b.primitiveLength),this.shadowCasterSegments=Di.simpleSegment(0,m.primitiveOffset,0,m.primitiveLength)}upload(i){this.vertexBuffer||this.vertexPositions.length===0||this.vertexNormals.length===0||this.indexArray.length===0||(this.vertexBuffer=i.createVertexBuffer(this.vertexPositions,UT.members),this.vertexBufferNormal=i.createVertexBuffer(this.vertexNormals,kT.members),this.indexBuffer=i.createIndexBuffer(this.indexArray))}destroy(){this.vertexBuffer&&(this.vertexBuffer.destroy(),this.vertexBufferNormal.destroy(),this.indexBuffer.destroy()),this.maskSegments&&(this.maskSegments.destroy(),this.depthSegments.destroy(),this.renderableSegments.destroy(),this.shadowCasterSegments.destroy())}computeVertexConnections(i,u,f,y){const m=new Map;for(let _=f;_<y;_++){const b=u[_],N=b.a,D=b.b;m.has(N)||m.set(N,{}),m.has(D)||m.set(D,{});const S=m.get(N),V=m.get(D);i[D]>0&&(S.to=D),i[N]>0&&(V.from=N)}return m}constructBridgeStructures(i,u,f,y,m,_){const b=this.computeVertexConnections(f,y,m.min,m.max),N=1/_,D=.5*N,S=I=>_e.vec3.fromValues(u[I].x,u[I].y,f[I]*N),V=I=>{const O=b.get(I),M=O.from,B=O.to;if(!M||!B)return;const X=S(M),ee=S(I),ue=S(B),le=_e.vec3.fromValues(0,0,0);if(!_e.vec3.exactEquals(X,ee)){const pe=_e.vec3.sub(_e.vec3.create(),ee,X);_e.vec3.add(le,le,_e.vec3.normalize(pe,pe))}if(!_e.vec3.exactEquals(ue,ee)){const pe=_e.vec3.sub(_e.vec3.create(),ue,ee);_e.vec3.add(le,le,_e.vec3.normalize(pe,pe))}const re=_e.vec3.len(le);return re>0?_e.vec3.scale(le,le,1/re):void 0};for(let I=m.min;I<m.max;I++){const O=y[I],M=this.prepareEdgePoints(u,f,O,(_a,Ar)=>_a>=Ar);if(M==null)continue;const B=M[0],X=M[1],ee=_e.vec3.fromValues(B.coord.x,B.coord.y,N*B.height),ue=_e.vec3.fromValues(X.coord.x,X.coord.y,N*X.height);if(_e.vec3.exactEquals(ee,ue))continue;const le=_e.vec3.sub(_e.vec3.create(),ue,ee);_e.vec3.normalize(le,le);const re=_a=>_e.vec3.normalize(_a,_a),pe=V(O.a)||le,we=V(O.b)||le,Pe=re(_e.vec3.fromValues(pe[1],-pe[0],0)),We=re(_e.vec3.fromValues(we[1],-we[0],0)),je=re(_e.vec3.cross(_e.vec3.create(),Pe,pe)),Ze=re(_e.vec3.cross(_e.vec3.create(),We,we)),mt=_e.vec3.create(),Ye=[_e.vec3.add(_e.vec3.create(),ee,_e.vec3.scale(mt,_e.vec3.sub(mt,Pe,je),D)),_e.vec3.add(_e.vec3.create(),ee,_e.vec3.scale(mt,_e.vec3.add(mt,Pe,je),D)),_e.vec3.add(_e.vec3.create(),ee,_e.vec3.scale(mt,je,D)),ee],At=[_e.vec3.add(_e.vec3.create(),ue,_e.vec3.scale(mt,_e.vec3.sub(mt,We,Ze),D)),_e.vec3.add(_e.vec3.create(),ue,_e.vec3.scale(mt,_e.vec3.add(mt,We,Ze),D)),_e.vec3.add(_e.vec3.create(),ue,_e.vec3.scale(mt,Ze,D)),ue],[xt,St]=i.addVertices(Pe,_,Ye[0],Ye[1]),[Ot,Nt]=i.addVertices(We,_,At[0],At[1]);i.addTriangles([xt,St,Ot,St,Nt,Ot]);const[Ut,Mt]=i.addVertices(je,_,Ye[1],Ye[2]),[jt,ga]=i.addVertices(Ze,_,At[1],At[2]);i.addTriangles([Ut,Mt,jt,Mt,ga,jt]);const[ma,Ya]=i.addVertices(_e.vec3.negate(Pe,Pe),_,Ye[2],Ye[3]),[xa,Oa]=i.addVertices(_e.vec3.negate(We,We),_,At[2],At[3]);i.addTriangles([ma,Ya,xa,Ya,Oa,xa])}}constructTunnelStructures(i,u,f,y,m,_){const b=N=>_e.vec3.normalize(N,N);for(let N=m.min;N<m.max;N++){const D=this.prepareEdgePoints(u,f,y[N],(O,M)=>O<=M);if(D==null)continue;const[S,V]=D,I=b(_e.vec3.fromValues(V.coord.y-S.coord.y,-(V.coord.x-S.coord.x),0));i.addQuad([S,V,{coord:V.coord,height:y[N].isTunnel?-.1:0},{coord:S.coord,height:y[N].isTunnel?-.1:0}],I)}for(let N=_.min;N<_.max;N++){const D=y[N],S=u[D.a],V=u[D.b],I=b(_e.vec3.fromValues(V.y-S.y,-(V.x-S.x),0));i.addQuad([{coord:V,height:0},{coord:S,height:0},{coord:S,height:f[D.a]+4},{coord:V,height:f[D.b]+4}],I),i.addQuad([{coord:S,height:0},{coord:V,height:0},{coord:V,height:f[D.b]+4},{coord:S,height:f[D.a]+4}],I)}}prepareEdgePoints(i,u,f,y){const m=i[f.a],_=i[f.b];let b=u[f.a],N=u[f.b];if(!(b!==0&&y(b,0)||N!==0&&y(N,0)))return;const D=m.clone(),S=_.clone();if(y(b,0)){if(!y(N,0)){const V=N/(N-b);S.x=hr(S.x,D.x,V),S.y=hr(S.y,D.y,V),N=hr(N,b,V)}}else{const V=b/(b-N);D.x=hr(D.x,S.x,V),D.y=hr(D.y,S.y,V),b=hr(b,N,V)}return[{coord:D,height:b},{coord:S,height:N}]}prepareEdges(i,u){if(u.length===0)return;u.sort((b,N)=>b.hash===N.hash?N.polygonIdx-b.polygonIdx:N.hash>b.hash?1:-1);let f=0,y=0,m=0,_=u[f].polygonIdx;do y++,(y===u.length||u[f].hash!==u[y].hash)&&((y-f==1||u[y-1].polygonIdx!==_)&&(m<f&&(u[m]=u[f],u[f]=null),u[m].type="none",m++),f=y,f!==u.length&&(_=u[f].polygonIdx));while(f!==u.length);if(u.splice(m),u.length!==0&&i.length!==0){u.sort((D,S)=>D.hash<S.hash?1:-1);let b=0,N=0;for(;b!==u.length&&N!==i.length;){const D=u[b],S=i[N];D.portalHash>S.hash?b++:S.hash>D.portalHash?N++:(D.type=S.type,b++)}}}isOnBorder(i,u){return i<=0&&u<=0||i>=Na&&u>=Na}static computeEdgeHash(i,u){return(i.y===u.y&&i.x>u.x||i.y>u.y)&&([i,u]=[u,i]),BigInt(Zd.computePosHash(i))<<32n|BigInt(Zd.computePosHash(u))}static computePosHash(i){return((65535&i.x)<<16|65535&i.y)>>>0}}class mA{constructor(i,u){this.layoutVertexArray=new bu,this.indexArray=new Ps,this.lineIndexArray=new Ud,this.triangleSegments=new Di,this.lineSegments=new Di,this.programConfigurations=new _h(i.layers,{zoom:i.zoom,lut:i.lut}),this.uploaded=!1,u&&(this.elevatedLayoutVertexArray=new Kc)}update(i,u,f,y,m,_,b){this.programConfigurations.updatePaintArrays(i,u,m,f,y,_,b)}isEmpty(){return this.layoutVertexArray.length===0}needsUpload(){return this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Gy.members),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.lineIndexBuffer=i.createIndexBuffer(this.lineIndexArray),this.elevatedLayoutVertexArray&&this.elevatedLayoutVertexArray.length>0&&(this.elevatedLayoutVertexBuffer=i.createVertexBuffer(this.elevatedLayoutVertexArray,O0.members))),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.elevatedLayoutVertexBuffer&&this.elevatedLayoutVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.lineIndexBuffer.destroy(),this.programConfigurations.destroy(),this.triangleSegments.destroy(),this.lineSegments.destroy())}populatePaintArrays(i,u,f,y,m,_){this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,u,f,y,m,_)}}class Ky{constructor(i){this.zoom=i.zoom,this.pixelRatio=i.pixelRatio,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.bufferData=new mA(i,!1),this.elevationBufferData=new mA(i,!0),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.projection=i.projection,this.elevationMode=this.layers[0].layout.get("fill-elevation-reference")}updateFootprints(i,u){}populate(i,u,f,y){this.hasPattern=fA("fill",this.layers,this.pixelRatio,u);const m=this.layers[0].layout.get("fill-sort-key"),_=[];for(const{feature:b,id:N,index:D,sourceLayerIndex:S}of i){const V=this.layers[0]._featureFilter.needGeometry,I=W(b,V);if(!this.layers[0]._featureFilter.filter(new vn(this.zoom),I,f))continue;const O=m?m.evaluate(I,{},f,u.availableImages):void 0,M={id:N,properties:b.properties,type:b.type,sourceLayerIndex:S,index:D,geometry:V?I.geometry:H(b,f,y),patterns:{},sortKey:O};_.push(M)}m&&_.sort((b,N)=>b.sortKey-N.sortKey);for(const b of _){const{geometry:N,index:D,sourceLayerIndex:S}=b;if(this.hasPattern){const V=pA("fill",this.layers,b,this.zoom,this.pixelRatio,u);this.patternFeatures.push(V)}else this.addFeature(b,N,D,f,{},u.availableImages,u.brightness,u.elevationFeatures);u.featureIndex.insert(i[D].feature,N,D,S,this.index)}}update(i,u,f,y,m,_,b){this.bufferData.update(i,u,f,y,m,_,b),this.elevationBufferData.update(i,u,f,y,m,_,b)}addFeatures(i,u,f,y,m,_){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,u,f,y,_,i.elevationFeatures)}isEmpty(){return this.bufferData.isEmpty()&&this.elevationBufferData.isEmpty()}uploadPending(){return!this.uploaded||this.bufferData.needsUpload()||this.elevationBufferData.needsUpload()}upload(i){this.bufferData.upload(i),this.elevationBufferData.upload(i),this.elevatedStructures&&this.elevatedStructures.upload(i)}destroy(){this.bufferData.destroy(),this.elevationBufferData.destroy(),this.elevatedStructures&&this.elevatedStructures.destroy()}addFeature(i,u,f,y,m,_=[],b,N){const D=hA(u,500);this.elevationMode!=="none"?this.addElevatedRoadFeature(i,D,y,f,N):this.addGeometry(D,this.bufferData),this.bufferData.populatePaintArrays(i,f,m,_,y,b),this.elevationBufferData.populatePaintArrays(i,f,m,_,y,b)}getUnevaluatedPortalGraph(){return this.elevatedStructures?this.elevatedStructures.unevaluatedPortals:void 0}getElevationPolygons(){return this.elevatedStructures?this.elevatedStructures.portalPolygons:void 0}setEvaluatedPortalGraph(i){this.elevatedStructures&&this.elevatedStructures.construct(i)}addElevatedRoadFeature(i,u,f,y,m){const _=new Array,b=this.getElevationFeature(i,m);if(b){_.push({polygons:u,elevationFeature:b,elevationTileID:f});for(const N of _)if(N.elevationFeature){if(this.elevationMode==="hd-road-base"){this.elevatedStructures||(this.elevatedStructures=new Zd(N.elevationTileID));const S=N.elevationFeature.isTunnel();let V=0;i.properties.hasOwnProperty(Wm)&&(V=+i.properties[Wm]);for(const I of N.polygons)this.elevatedStructures.addPortalCandidates(N.elevationFeature.id,I,S,N.elevationFeature,V)}const D=new Es(f,N.elevationTileID);this.addElevatedGeometry(N.polygons,D,N.elevationFeature,this.elevationMode==="hd-road-base"?0:.05,y)}}else this.addGeometry(u,this.bufferData)}addElevatedGeometry(i,u,f,y,m){const _={elevation:f,elevationSampler:u,bias:y,index:m},[b,N]=this.addGeometry(i,this.elevationBufferData,_);this.elevationBufferData.heightRange==null?this.elevationBufferData.heightRange={min:b,max:N}:(this.elevationBufferData.heightRange.min=Math.min(this.elevationBufferData.heightRange.min,b),this.elevationBufferData.heightRange.max=Math.max(this.elevationBufferData.heightRange.max,N))}addGeometry(i,u,f){let y=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,_=null;f&&(_=f.elevationSampler.constantElevation(f.elevation,f.bias),_!=null&&(y=_,m=_));const b=(N,D,S)=>{if(f!=null)if(D.push(N),_!=null)u.elevatedLayoutVertexArray.emplaceBack(_),S.push(_);else{const V=f.elevationSampler.pointElevation(N,f.elevation,f.bias);u.elevatedLayoutVertexArray.emplaceBack(V),S.push(V),y=Math.min(y,V),m=Math.max(m,V)}};for(const N of i){let D=0;for(const le of N)D+=le.length;const S=u.triangleSegments.prepareSegment(D,u.layoutVertexArray,u.indexArray),V=S.vertexLength,I=[],O=[],M=[],B=[],X=[],ee=u.layoutVertexArray.length;for(const le of N){if(le.length===0)continue;le!==N[0]&&O.push(I.length/2);const re=u.lineSegments.prepareSegment(le.length,u.layoutVertexArray,u.lineIndexArray),pe=re.vertexLength;f&&X.push(u.layoutVertexArray.length-ee),b(le[0],M,B),u.layoutVertexArray.emplaceBack(le[0].x,le[0].y),u.lineIndexArray.emplaceBack(pe+le.length-1,pe),I.push(le[0].x),I.push(le[0].y);for(let we=1;we<le.length;we++)b(le[we],M,B),u.layoutVertexArray.emplaceBack(le[we].x,le[we].y),u.lineIndexArray.emplaceBack(pe+we-1,pe+we),I.push(le[we].x),I.push(le[we].y);re.vertexLength+=le.length,re.primitiveLength+=le.length}const ue=uA(I,O);for(let le=0;le<ue.length;le+=3)u.indexArray.emplaceBack(V+ue[le],V+ue[le+1],V+ue[le+2]);if(f&&this.elevationMode==="hd-road-base"){const le=f.elevation.isTunnel(),re=f.elevation.safeArea,pe=this.elevatedStructures.addVertices(M,B);this.elevatedStructures.addTriangles(ue,pe,le);const we=X.length;if(we>0){for(let Pe=0;Pe<we-1;Pe++)this.elevatedStructures.addRenderableRing(f.index,X[Pe]+pe,X[Pe+1]-X[Pe],le,re);this.elevatedStructures.addRenderableRing(f.index,X[we-1]+pe,M.length-X[we-1],le,re)}}S.vertexLength+=D,S.primitiveLength+=ue.length/3}return[y,m]}getElevationFeature(i,u){if(!u)return;const f=+i.properties[Ef];return f!=null?u.find(y=>y.id===f):void 0}}let h1,f1,B0,G0;Pt(Ky,"FillBucket",{omit:["layers","patternFeatures"]}),Pt(mA,"FillBufferData"),Pt(Zd,"ElevatedStructures");class p1{constructor(i,u,f,y){if(this.triangleCount=u.length/3,this.min=new Bt(0,0),this.max=new Bt(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||i.length===0)return;const[m,_]=[i[0].clone(),i[0].clone()];for(let V=1;V<i.length;++V){const I=i[V];m.x=Math.min(m.x,I.x),m.y=Math.min(m.y,I.y),_.x=Math.max(_.x,I.x),_.y=Math.max(_.y,I.y)}if(y){const V=Math.ceil(Math.max(_.x-m.x,_.y-m.y)/y);f=Math.max(f,V)}if(f===0)return;this.min=m,this.max=_;const b=this.max.sub(this.min);b.x=Math.max(b.x,1),b.y=Math.max(b.y,1);const N=Math.max(b.x,b.y)/f;this.cellsX=Math.max(1,Math.ceil(b.x/N)),this.cellsY=Math.max(1,Math.ceil(b.y/N)),this.xScale=1/N,this.yScale=1/N;const D=[];for(let V=0;V<this.triangleCount;V++){const I=i[u[3*V+0]].sub(this.min),O=i[u[3*V+1]].sub(this.min),M=i[u[3*V+2]].sub(this.min),B=Kh(Math.floor(Math.min(I.x,O.x,M.x)),this.xScale,this.cellsX),X=Kh(Math.floor(Math.max(I.x,O.x,M.x)),this.xScale,this.cellsX),ee=Kh(Math.floor(Math.min(I.y,O.y,M.y)),this.yScale,this.cellsY),ue=Kh(Math.floor(Math.max(I.y,O.y,M.y)),this.yScale,this.cellsY),le=new Bt(0,0),re=new Bt(0,0),pe=new Bt(0,0),we=new Bt(0,0);for(let Pe=ee;Pe<=ue;++Pe){le.y=re.y=Pe*N,pe.y=we.y=(Pe+1)*N;for(let We=B;We<=X;++We)le.x=pe.x=We*N,re.x=we.x=(We+1)*N,(Yt(I,O,M,le,re,we)||Yt(I,O,M,le,we,pe))&&D.push({cellIdx:Pe*this.cellsX+We,triIdx:V})}}if(D.length===0)return;D.sort((V,I)=>V.cellIdx-I.cellIdx||V.triIdx-I.triIdx);let S=0;for(;S<D.length;){const V=D[S].cellIdx,I={start:this.payload.length,len:0};for(;S<D.length&&D[S].cellIdx===V;)++I.len,this.payload.push(D[S++].triIdx);this.cells[V]=I}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(i,u){if(this.triangleCount===0||this.cells.length===0||i.x>this.max.x||this.min.x>i.x||i.y>this.max.y||this.min.y>i.y)return;const f=Kh(i.x-this.min.x,this.xScale,this.cellsX),y=Kh(i.y-this.min.y,this.yScale,this.cellsY),m=this.cells[y*this.cellsX+f];if(m){this._lazyInitLookup();for(let _=0;_<m.len;_++){const b=this.payload[m.start+_],N=Math.floor(b/8),D=1<<b%8;if(!(this.lookup[N]&D)&&(this.lookup[N]|=D,u.push(b),u.length===this.triangleCount))return}}}query(i,u,f){if(this.triangleCount===0||this.cells.length===0||i.x>this.max.x||this.min.x>u.x||i.y>this.max.y||this.min.y>u.y)return;this._lazyInitLookup();const y=Kh(i.x-this.min.x,this.xScale,this.cellsX),m=Kh(u.x-this.min.x,this.xScale,this.cellsX),_=Kh(i.y-this.min.y,this.yScale,this.cellsY),b=Kh(u.y-this.min.y,this.yScale,this.cellsY);for(let N=_;N<=b;N++)for(let D=y;D<=m;D++){const S=this.cells[N*this.cellsX+D];if(S)for(let V=0;V<S.len;V++){const I=this.payload[S.start+V],O=Math.floor(I/8),M=1<<I%8;if(!(this.lookup[O]&M)&&(this.lookup[O]|=M,f.push(I),f.length===this.triangleCount))return}}}}function Kh(d,i,u){return Math.max(0,Math.min(u-1,Math.floor(d*i)))}Pt(p1,"TriangleGridIndex");class WT{constructor(i){this.zoom=i.zoom,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=i.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.footprints=[]}updateFootprints(i,u){for(const f of this.footprints)u.push({footprint:f,id:i})}populate(i,u,f,y){const m=[];for(const{feature:_,id:b,index:N,sourceLayerIndex:D}of i){const S=this.layers[0]._featureFilter.needGeometry,V=W(_,S);if(!this.layers[0]._featureFilter.filter(new vn(this.zoom),V,f))continue;const I={id:b,properties:_.properties,type:_.type,sourceLayerIndex:D,index:N,geometry:S?V.geometry:H(_,f,y),patterns:{}};m.push(I)}for(const _ of m){const{geometry:b,index:N,sourceLayerIndex:D}=_;this.addFeature(_,b,N,f,{},u.availableImages,u.brightness),u.featureIndex.insert(i[N].feature,b,N,D,this.index)}}isEmpty(){return this.footprints.length===0}uploadPending(){return!1}upload(i){}update(i,u,f,y,m,_,b){}destroy(){}addFeature(i,u,f,y,m,_=[],b){for(const N of hA(u,2)){const D=[],S=[],V=[],I=new Bt(1/0,1/0),O=new Bt(-1/0,-1/0);for(const X of N)if(X.length!==0){X!==N[0]&&V.push(S.length/2);for(let ee=0;ee<X.length;ee++)S.push(X[ee].x),S.push(X[ee].y),D.push(X[ee]),I.x=Math.min(I.x,X[ee].x),I.y=Math.min(I.y,X[ee].y),O.x=Math.max(O.x,X[ee].x),O.y=Math.max(O.y,X[ee].y)}const M=uA(S,V),B=new p1(D,M,8,256);this.footprints.push({vertices:D,indices:M,grid:B,min:I,max:O})}}}Pt(WT,"ClipBucket",{omit:["layers"]});const YT=xn([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),pP=xn([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),mP=xn([{name:"a_centroid_pos",components:2,type:"Uint16"}]),m1=xn([{name:"a_join_normal_inside",components:3,type:"Int16"}]),y1=xn([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),yP=xn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:gP}=YT;class zu extends Bt{constructor(i,u,f){super(i,u),this.z=f}}class g1 extends zu{constructor(i,u,f,y){super(i,u,f),this.w=y}}function yA(d,i,u,f){const y=[],m=f===0?(_,b,N,D,S,V)=>{_.push(new Bt(V,N+(V-b)/(D-b)*(S-N)))}:(_,b,N,D,S,V)=>{_.push(new Bt(b+(V-N)/(S-N)*(D-b),V))};for(const _ of d){const b=[];for(const N of _){if(N.length<=2)continue;const D=[];for(let I=0;I<N.length-1;I++){const O=N[I].x,M=N[I].y,B=N[I+1].x,X=N[I+1].y,ee=f===0?O:M,ue=f===0?B:X;ee<i?ue>i&&m(D,O,M,B,X,i):ee>u?ue<u&&m(D,O,M,B,X,u):D.push(N[I]),ue<i&&ee>=i&&m(D,O,M,B,X,i),ue>u&&ee<=u&&m(D,O,M,B,X,u)}let S=N[N.length-1];const V=f===0?S.x:S.y;V>=i&&V<=u&&D.push(S),D.length&&(S=D[D.length-1],D[0].x===S.x&&D[0].y===S.y||D.push(D[0]),b.push(D))}b.length&&y.push(b)}return y}function qd(d,i,u,f){const y=u==="x"?"y":"x",m=(f-d[u])/(i[u]-d[u]);d[y]=d[y]+(i[y]-d[y])*m,d[u]=f,d.hasOwnProperty("z")&&(d.z=hr(d.z,i.z,m)),d.hasOwnProperty("w")&&(d.w=hr(d.w,i.w,m))}function A1(d,i,u,f){const y=u,m=f;for(const _ of["x","y"]){let b=d,N=i;b[_]>=N[_]&&(b=i,N=d),b[_]<y&&N[_]>y&&qd(b,N,_,y),b[_]<m&&N[_]>m&&qd(N,b,_,m)}}const Ym=Number.MAX_SAFE_INTEGER;function Vf(d,i,u,f){return d.order<i||d.order===Ym||!(d.clipMask&u)||function(y,m){return m.length!==0&&m.find(_=>_===y)===void 0}(f,d.clipScope)}function j0(d,i){return d.x-i.x||d.y-i.y}function XT(d,i){return j0(d.min,i.min)===0&&j0(d.max,i.max)===0}function nm(d,i){return!(d.min.x>i.max.x||d.max.x<i.min.x||d.min.y>i.max.y||d.max.y<i.min.y)}function Z0(d,i){if(d.length!==i.length)return!1;for(let u=0;u<d.length;u++)if(d[u].sourceId!==i[u].sourceId||!XT(d[u],i[u])||d[u].order!==i[u].order||d[u].clipMask!==i[u].clipMask||!la(d[u].clipScope,i[u].clipScope))return!1;return!0}function JT(d,i,u){const f=1/Na,y=1/(1<<u.canonical.z),m=(i.x*f+u.canonical.x)*y+u.wrap,_=(i.y*f+u.canonical.y)*y;return{min:new Bt((d.x*f+u.canonical.x)*y+u.wrap,(d.y*f+u.canonical.y)*y),max:new Bt(m,_)}}function AP(d,i,u){const f=1<<u.canonical.z,y=((i.x-u.wrap)*f-u.canonical.x)*Na,m=(i.y*f-u.canonical.y)*Na;return{min:new Bt(((d.x-u.wrap)*f-u.canonical.x)*Na,(d.y*f-u.canonical.y)*Na),max:new Bt(y,m)}}function QT(d,i,u,f,y,m,_){const b=d.indices,N=d.vertices,D=[];for(let S=f;S<f+y;S+=3){const V=i[u[S+0]+m],I=i[u[S+1]+m],O=i[u[S+2]+m],M=Math.min(V.x,I.x,O.x),B=Math.max(V.x,I.x,O.x),X=Math.min(V.y,I.y,O.y),ee=Math.max(V.y,I.y,O.y);D.length=0,d.grid.query(new Bt(M,X),new Bt(B,ee),D);for(let ue=0;ue<D.length;ue++){const le=D[ue];if(Yt(N[b[3*le+0]],N[b[3*le+1]],N[b[3*le+2]],V,I,O,_))return!0}}return!1}function eS(d,i,u,f){if(!d||!u)return!1;let y=d.vertices;if(!i.canonical.equals(f.canonical)||i.wrap!==f.wrap){if(u.vertices.length<d.vertices.length)return eS(u,f,d,i);const m=i.canonical,_=f.canonical,b=Math.pow(2,_.z-m.z);y=d.vertices.map(N=>new Bt((N.x+m.x*Na)*b-_.x*Na,(N.y+m.y*Na)*b-_.y*Na))}return QT(u,y,d.indices,0,d.indices.length,0,0)}function tS(d,i,u,f){const y=Math.pow(2,f.z-u.z);return new Bt((d+u.x*Na)*y-f.x*Na,(i+u.y*Na)*y-f.y*Na)}function aS(d,i){const u=[];i.grid.queryPoint(d,u);const f=i.indices,y=i.vertices;for(let m=0;m<u.length;m++){const _=u[m];if(ot([y[f[3*_+0]],y[f[3*_+1]],y[f[3*_+2]]],d))return!0}return!1}const _1=[new Bt(0,0),new Bt(Na,0),new Bt(Na,Na),new Bt(0,Na)];function v1(d,i){const u=[];let f=[];if(!i||d.length<2)return[d];if(d.length===2)return gt(d[0],d[1],_1)?[d]:[];for(let y=0;y<d.length+2;y++){const m=d[y%d.length],_=d[(y+1)%d.length],b=gt(y===0?d[d.length-1]:d[(y-1)%d.length],m,_1),N=gt(m,_,_1),D=b||N;D&&f.push(m),D&&N||f.length>0&&(f.length>1&&u.push(f),f=[])}return f.length>1&&u.push(f),u}const im=Th.VectorTileFeature.types,gA=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius","fill-extrusion-line-width","fill-extrusion-emissive-strength"],rS=["fill-extrusion-flood-light-ground-radius"],_P=Math.pow(2,13),Wy=Math.pow(2,15)-1,Yy=new Bt(0,1),hp=2147483648;function sm(d,i,u,f,y,m,_,b){d.emplaceBack((i<<1)+_,(u<<1)+m,(Math.floor(f*_P)<<1)+y,Math.round(b))}function Xm(d,i,u){d.emplaceBack(i.x*Na,i.y*Na,u?1:0)}function Xy(d,i,u,f,y,m){d.emplaceBack(i.x,i.y,(u.x<<1)+f,(u.y<<1)+y,m)}function om(d,i,u){d.emplaceBack(i.x,i.y,i.z,u[0]*16384,u[1]*16384,u[2]*16384)}class w1{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class R1{constructor(){this.centroidXY=new Bt(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new Bt(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new Bt(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new Bt(this.max.x-this.min.x,this.max.y-this.min.y)}}class nS{constructor(){this.acc=new Bt(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(i,u){i.min.x===Number.MAX_VALUE&&(i.min.x=i.max.x=u.x,i.min.y=i.max.y=u.y)}appendEdge(i,u,f){this.accCount++,this.acc._add(u);let y=!!this.borders;u.x<i.min.x?(i.min.x=u.x,y=!0):u.x>i.max.x&&(i.max.x=u.x,y=!0),u.y<i.min.y?(i.min.y=u.y,y=!0):u.y>i.max.y&&(i.max.y=u.y,y=!0),((u.x===0||u.x===Na)&&u.x===f.x)!=((u.y===0||u.y===Na)&&u.y===f.y)&&this.processBorderOverlap(u,f),y&&this.checkBorderIntersection(u,f)}checkBorderIntersection(i,u){u.x<0!=i.x<0&&this.addBorderIntersection(0,hr(u.y,i.y,(0-u.x)/(i.x-u.x))),u.x>Na!=i.x>Na&&this.addBorderIntersection(1,hr(u.y,i.y,(Na-u.x)/(i.x-u.x))),u.y<0!=i.y<0&&this.addBorderIntersection(2,hr(u.x,i.x,(0-u.y)/(i.y-u.y))),u.y>Na!=i.y>Na&&this.addBorderIntersection(3,hr(u.x,i.x,(Na-u.y)/(i.y-u.y)))}addBorderIntersection(i,u){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const f=this.borders[i];u<f[0]&&(f[0]=u),u>f[1]&&(f[1]=u)}processBorderOverlap(i,u){if(i.x===u.x){if(i.y===u.y)return;const f=i.x===0?0:1;this.addBorderIntersection(f,u.y),this.addBorderIntersection(f,i.y)}else{const f=i.y===0?2:3;this.addBorderIntersection(f,u.x),this.addBorderIntersection(f,i.x)}}centroid(){return this.accCount===0?new Bt(0,0):new Bt(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((i,u)=>i+ +(u[0]!==Number.MAX_VALUE),0):0}}function T1(d,i){const u=d.add(i)._unit(),f=ka(d.x*u.x+d.y*u.y,-1,1);var y,m,_;return _=Math.acos(f),Math.min(4,Math.max(-4,Math.tan(_)))/4*Wy*((y=d).x*(m=i).y-y.y*m.x<0?-1:1)}const AA=[d=>d.x<0,d=>d.x>Na,d=>d.y<0,d=>d.y>Na];function vP(d,i,u,f){const y=[4];if(f===0)return y;u._mult(f);const m=d.sub(u),_=i.sub(u),b=[d,i,m,_];for(let N=0;N<4;N++)for(const D of b)if(AA[N](D)){y.push(N);break}return y}class iS{constructor(i){this.vertexArray=new Dl,this.indexArray=new Ps,this.programConfigurations=new _h(i.layers,{zoom:i.zoom,lut:i.lut},u=>rS.includes(u)),this._segments=new Di,this.hiddenByLandmarkVertexArray=new Dy,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new Di}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(i,u,f,y=!1){const m=i.length;if(m>2){let _=Math.max(0,this._segments.get().length-1);const b=this._segments._prepareSegment(4*m,this.vertexArray.length,2*this._segmentToGroundQuads[_].length);let N;_!==this._segments.get().length-1&&(_++,this._segmentToGroundQuads[_]=[],this._segmentToRegionTriCounts[_]=[0,0,0,0,0]);{const D=i[0],S=i[1];N=T1(D.sub(i[m-1])._perp()._unit(),S.sub(D)._perp()._unit())}for(let D=0;D<m;D++){const S=D===m-1?0:D+1,V=i[D],I=i[S],O=i[S===m-1?0:S+1],M=I.sub(V)._perp()._unit(),B=T1(M,O.sub(I)._perp()._unit()),X=N,ee=B;if(S1(V,I,u)||y&&Jy(V,u)&&Jy(I,u)){N=B;continue}const ue=b.vertexLength;Xy(this.vertexArray,V,I,1,1,X),Xy(this.vertexArray,V,I,1,0,X),Xy(this.vertexArray,V,I,0,1,ee),Xy(this.vertexArray,V,I,0,0,ee),b.vertexLength+=4;const le=vP(V,I,M,f);for(const re of le)this._segmentToGroundQuads[_].push({id:ue,region:re}),this._segmentToRegionTriCounts[_][re]+=2,b.primitiveLength+=2;N=B}}}prepareBorderSegments(){if(!this.hasData())return;const i=this._segments.get(),u=i.length;for(let f=0;f<u;f++)this._segmentToGroundQuads[f].sort((y,m)=>y.region-m.region);for(let f=0;f<u;f++){const y=this._segmentToGroundQuads[f],m=i[f],_=this._segmentToRegionTriCounts[f];_.reduce((N,D)=>N+D,0);let b=0;for(let N=0;N<=4;N++){const D=_[N];if(D!==0){let S=this.regionSegments[N];S||(S=this.regionSegments[N]=new Di);const V={vertexOffset:m.vertexOffset,primitiveOffset:m.primitiveOffset+b,vertexLength:m.vertexLength,primitiveLength:D};S.get().push(V)}b+=D}for(let N=0;N<y.length;N++){const D=y[N].id;this.indexArray.emplaceBack(D,D+1,D+3),this.indexArray.emplaceBack(D,D+3,D+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(i,u,f,y,m,_){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,i,u,f,y,m,_)}upload(i){this.hasData()&&(this.vertexBuffer=i.createVertexBuffer(this.vertexArray,pP.members),this.indexBuffer=i.createIndexBuffer(this.indexArray))}uploadPaintProperties(i){this.hasData()&&this.programConfigurations.upload(i)}update(i,u,f,y,m,_,b){this.hasData()&&this.programConfigurations.updatePaintArrays(i,u,f,y,m,_,b)}updateHiddenByLandmark(i){if(!this.hasData())return;const u=i.groundVertexCount+i.groundVertexArrayOffset;if(i.groundVertexCount===0)return;const f=i.flags&hp?1:0;for(let y=i.groundVertexArrayOffset;y<u;++y)this.hiddenByLandmarkVertexArray.emplace(y,f);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(i){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=i.createVertexBuffer(this.hiddenByLandmarkVertexArray,y1.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let i=0;i<=4;i++){const u=this.regionSegments[i];u&&u.destroy()}}}}class q0{constructor(i){this.zoom=i.zoom,this.canonical=i.canonical,this.overscaling=i.overscaling,this.layers=i.layers,this.pixelRatio=i.pixelRatio,this.layerIds=this.layers.map(u=>u.fqid),this.index=i.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=i.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new Ps,this.footprintVertices=new bu,this.footprintSegments=[],this.layoutVertexArray=new xu,this.centroidVertexArray=new ap,this.wallVertexArray=new eA,this.indexArray=new Ps,this.programConfigurations=new _h(i.layers,{zoom:i.zoom,lut:i.lut},u=>gA.includes(u)),this.segments=new Di,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.groundEffect=new iS(i),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}updateFootprints(i,u){}populate(i,u,f,y){this.features=[],this.hasPattern=fA("fill-extrusion",this.layers,this.pixelRatio,u),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.selfDEMTileTimestamp=Number.MAX_VALUE,this.borderDEMTileTimestamp=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],this.tileToMeter=g(f),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,this.wallMode=this.layers[0].paint.get("fill-extrusion-line-width").constantOr(1)!==0;for(const{feature:m,id:_,index:b,sourceLayerIndex:N}of i){const D=this.layers[0]._featureFilter.needGeometry,S=W(m,D);if(!this.layers[0]._featureFilter.filter(new vn(this.zoom),S,f))continue;const V={id:_,sourceLayerIndex:N,index:b,geometry:D?S.geometry:H(m,f,y),properties:m.properties,type:m.type,patterns:{}},I=this.layoutVertexArray.length,O=im[V.type]==="Polygon";if(this.hasPattern)this.features.push(pA("fill-extrusion",this.layers,V,this.zoom,this.pixelRatio,u));else if(this.wallMode)for(const M of V.geometry)for(const B of v1(M,O))this.addFeature(V,[B],b,f,{},u.availableImages,y,u.brightness);else this.addFeature(V,V.geometry,b,f,{},u.availableImages,y,u.brightness);u.featureIndex.insert(m,V.geometry,b,N,this.index,I)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(i,u,f,y,m,_){for(const b of this.features){const N=im[b.type]==="Polygon",{geometry:D}=b;if(this.wallMode)for(const S of D)for(const V of v1(S,N))this.addFeature(b,[V],b.index,u,f,y,m,_);else this.addFeature(b,D,b.index,u,f,y,m,_)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(i,u,f,y,m,_,b){this.programConfigurations.updatePaintArrays(i,u,m,f,y,_,b),this.groundEffect.update(i,u,m,f,y,_,b)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,gP),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.wallVertexBuffer=i.createVertexBuffer(this.wallVertexArray,m1.members),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=i.createVertexBuffer(this.layoutVertexExtArray,yP.members,!0)),this.groundEffect.upload(i)),this.groundEffect.uploadPaintProperties(i),this.programConfigurations.upload(i),this.uploaded=!0}uploadCentroid(i){this.groundEffect.uploadHiddenByLandmark(i),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,mP.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,u,f,y,m,_,b,N){const D=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(i,{})/this.tileToMeter,S=[new Bt(0,0),new Bt(Na,Na)],V=b.projection,I=V.name==="globe",O=this.wallMode||im[i.type]==="Polygon",M=new nS;M.centroidDataIndex=this.centroidData.length;const B=new R1,X=this.layers[0].paint.get("fill-extrusion-base").evaluate(i,{},y)<=0,ee=this.layers[0].paint.get("fill-extrusion-height").evaluate(i,{},y);let ue;if(B.height=ee,B.vertexArrayOffset=this.layoutVertexArray.length,B.groundVertexArrayOffset=this.groundEffect.vertexArray.length,I&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Qf),this.wallMode){if(I)return void en("Non zero fill-extrusion-line-width is not yet supported on globe.");if(u.length!==1)return;ue=function(Ze){const mt=Ze[0].x===Ze[Ze.length-1].x&&Ze[0].y===Ze[Ze.length-1].y;(function(Oa){let _a=0;const Ar=Oa.length;for(let $a=0;$a<Ar;$a++)_a+=(Oa[($a+1)%Ar].x-Oa[$a].x)*(Oa[($a+1)%Ar].y+Oa[$a].y);return _a>=0})(Ze)||(Ze=Ze.reverse());const At={geometry:[],joinNormals:[],indices:[]},xt=[],St=[],Ot=[];let Nt=Ze.length;for(;Nt>=2&&Ze[Nt-1].equals(Ze[Nt-2]);)Nt--;if(Nt<(mt?3:2))return At;let Ut,Mt,jt,ga,ma,Ya=0;for(;Ya<Nt-1&&Ze[Ya].equals(Ze[Ya+1]);)Ya++;mt&&(Ut=Ze[Nt-2],ma=Ze[Ya].sub(Ut)._unit()._perp());for(let Oa=Ya;Oa<Nt;Oa++){if(jt=Oa===Nt-1?mt?Ze[Ya+1]:void 0:Ze[Oa+1],jt&&Ze[Oa].equals(jt))continue;ma&&(ga=ma),Ut&&(Mt=Ut),Ut=Ze[Oa],ma=jt?jt.sub(Ut)._unit()._perp():ga,ga=ga||ma;let _a=ga.add(ma);_a.x===0&&_a.y===0||_a._unit();const Ar=_a.x*ma.x+_a.y*ma.y,$a=Ar!==0?1/Ar:1/0,or=ga.x*ma.y-ga.y*ma.x>0;let Dr="miter";const Jr=2;Dr==="miter"&&$a>Jr&&(Dr="bevel"),Dr==="bevel"&&($a>100&&(Dr="flipbevel"),$a<Jr&&(Dr="miter"));const kr=(dn,Xr,wn,$n)=>{const Ei=new Bt(dn.x,dn.y),Lr=new Bt(dn.x,dn.y);Ei.x+=Xr.x*$n,Ei.y+=Xr.y*$n,Lr.x-=Xr.x*Math.max(wn,1),Lr.y-=Xr.y*Math.max(wn,1),Ot.push(Xr),xt.push(Ei),St.push(Lr)};if(Dr==="miter")_a._mult($a),kr(Ut,_a,0,0);else if(Dr==="flipbevel")_a=ma.mult(-1),kr(Ut,_a,0,0),kr(Ut,_a.mult(-1),0,0);else{const dn=-Math.sqrt($a*$a-1),Xr=or?dn:0,wn=or?0:dn;Mt&&kr(Ut,ga,Xr,wn),jt&&kr(Ut,ma,Xr,wn)}}At.geometry=[...xt,...St.reverse(),xt[0]],At.joinNormals=[...Ot,...Ot.reverse(),Ot[Ot.length-1]];const xa=At.geometry.length-1;for(let Oa=0;Oa<xa/2;Oa++)if(Oa+1<xa/2){let _a=Oa,Ar=Oa+1,$a=xa-1-Oa,or=xa-2-Oa;_a=_a===0?xa-1:_a-1,Ar=Ar===0?xa-1:Ar-1,$a=$a===0?xa-1:$a-1,or=or===0?xa-1:or-1,At.indices.push($a),At.indices.push(Ar),At.indices.push(_a),At.indices.push($a),At.indices.push(or),At.indices.push(Ar)}return At}(u[0]),u=[ue.geometry]}const le=(Ze,mt)=>Ze<(mt.length-1)/2||Ze===mt.length-1,re=this.wallMode?[u]:hA(u,500);for(let Ze=re.length-1;Ze>=0;Ze--){const mt=re[Ze];(mt.length===0||(pe=mt[0]).every(Ye=>Ye.x<=0)||pe.every(Ye=>Ye.x>=Na)||pe.every(Ye=>Ye.y<=0)||pe.every(Ye=>Ye.y>=Na))&&re.splice(Ze,1)}var pe;let we;if(I)we=x1(re,S,y);else{we=[];for(const Ze of re)we.push({polygon:Ze,bounds:S})}const Pe=O?this.edgeRadius:0,We=Pe>0&&this.zoom<17,je=(Ze,mt)=>{if(Ze.length===0)return!1;const Ye=Ze[Ze.length-1];return mt.x===Ye.x&&mt.y===Ye.y};for(const{polygon:Ze,bounds:mt}of we){let Ye=0,At=0;for(const Nt of Ze)O&&!Nt[0].equals(Nt[Nt.length-1])&&Nt.push(Nt[0]),At+=O?Nt.length-1:Nt.length;const xt=this.segments.prepareSegment((O?5:4)*At,this.layoutVertexArray,this.indexArray);B.footprintSegIdx<0&&(B.footprintSegIdx=this.footprintSegments.length),B.polygonSegIdx<0&&(B.polygonSegIdx=this.polygonSegments.length);const St={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},Ot=new w1;if(Ot.vertexOffset=this.footprintVertices.length,Ot.indexOffset=3*this.footprintIndices.length,Ot.ringIndices=[],O){const Nt=[],Ut=[];Ye=xt.vertexLength;for(let jt=0;jt<Ze.length;jt++){const ga=Ze[jt];ga.length&&jt!==0&&Ut.push(Nt.length/2);const ma=[];let Ya,xa;Ya=ga[1].sub(ga[0])._perp()._unit(),Ot.ringIndices.push(ga.length-1);for(let Oa=1;Oa<ga.length;Oa++){const _a=ga[Oa],Ar=ga[Oa===ga.length-1?1:Oa+1],$a=_a.clone();if(Pe){xa=Ar.sub(_a)._perp()._unit();const or=Ya.add(xa)._unit(),Dr=Pe*Math.min(4,1/(Ya.x*or.x+Ya.y*or.y));$a.x+=Dr*or.x,$a.y+=Dr*or.y,$a.x=Math.round($a.x),$a.y=Math.round($a.y),Ya=xa}if(!X||Pe!==0&&!We||je(ma,$a)||ma.push($a),sm(this.layoutVertexArray,$a.x,$a.y,0,0,1,1,0),this.wallMode){const or=le(Oa,ga);Xm(this.wallVertexArray,ue.joinNormals[Oa],!or)}xt.vertexLength++,this.footprintVertices.emplaceBack(_a.x,_a.y),Nt.push(_a.x,_a.y),I&&om(this.layoutVertexExtArray,V.projectTilePoint($a.x,$a.y,y),V.upVector(y,$a.x,$a.y))}X&&(Pe===0||We)&&(ma.length!==0&&je(ma,ma[0])&&ma.pop(),this.groundEffect.addData(ma,mt,D))}const Mt=this.wallMode?ue.indices:uA(Nt,Ut);for(let jt=0;jt<Mt.length;jt+=3)this.footprintIndices.emplaceBack(Ot.vertexOffset+Mt[jt+0],Ot.vertexOffset+Mt[jt+1],Ot.vertexOffset+Mt[jt+2]),this.indexArray.emplaceBack(Ye+Mt[jt],Ye+Mt[jt+2],Ye+Mt[jt+1]),xt.primitiveLength++;Ot.indexCount+=Mt.length,Ot.vertexCount+=this.footprintVertices.length-Ot.vertexOffset}for(let Nt=0;Nt<Ze.length;Nt++){const Ut=Ze[Nt];M.startRing(B,Ut[0]);let Mt=Ut.length>4&&sS(Ut[Ut.length-2],Ut[0],Ut[1]),jt=Pe?H0(Ut[Ut.length-2],Ut[0],Ut[1],Pe):0;const ga=[];let ma,Ya,xa;Ya=Ut[1].sub(Ut[0])._perp()._unit();let Oa=!0;for(let _a=1,Ar=0;_a<Ut.length;_a++){let $a=Ut[_a-1],or=Ut[_a];const Dr=Ut[_a===Ut.length-1?1:_a+1];if(M.appendEdge(B,or,$a),S1(or,$a,mt)){Pe&&(Ya=Dr.sub(or)._perp()._unit(),Oa=!Oa);continue}const Jr=or.sub($a)._perp(),kr=Jr.x/(Math.abs(Jr.x)+Math.abs(Jr.y)),dn=Jr.y>0?1:0,Xr=$a.dist(or);if(Ar+Xr>32768&&(Ar=0),Pe){xa=Dr.sub(or)._perp()._unit();let Lr=$0($a,or,Dr,_A(Ya,xa),Pe);isNaN(Lr)&&(Lr=0);const En=or.sub($a)._unit();$a=$a.add(En.mult(jt))._round(),or=or.add(En.mult(-Lr))._round(),jt=Lr,Ya=xa,X&&this.zoom>=17&&(je(ga,$a)||ga.push($a),je(ga,or)||ga.push(or))}const wn=xt.vertexLength,$n=Ut.length>4&&sS($a,or,Dr);let Ei=C1(Ar,Mt,Oa);if(sm(this.layoutVertexArray,$a.x,$a.y,kr,dn,0,0,Ei),sm(this.layoutVertexArray,$a.x,$a.y,kr,dn,0,1,Ei),this.wallMode){const Lr=le(_a-1,Ut),En=ue.joinNormals[_a-1];Xm(this.wallVertexArray,En,Lr),Xm(this.wallVertexArray,En,Lr)}if(Ar+=Xr,Ei=C1(Ar,$n,!Oa),Mt=$n,sm(this.layoutVertexArray,or.x,or.y,kr,dn,0,0,Ei),sm(this.layoutVertexArray,or.x,or.y,kr,dn,0,1,Ei),this.wallMode){const Lr=le(_a,Ut),En=ue.joinNormals[_a];Xm(this.wallVertexArray,En,Lr),Xm(this.wallVertexArray,En,Lr)}if(xt.vertexLength+=4,this.indexArray.emplaceBack(wn+0,wn+1,wn+2),this.indexArray.emplaceBack(wn+1,wn+3,wn+2),xt.primitiveLength+=2,Pe){const Lr=Ye+(_a===1?Ut.length-2:_a-2),En=_a===1?Ye:Lr+1;if(this.indexArray.emplaceBack(wn+1,Lr,wn+3),this.indexArray.emplaceBack(Lr,En,wn+3),xt.primitiveLength+=2,ma===void 0&&(ma=wn),!S1(Dr,Ut[_a],mt)){const Yi=_a===Ut.length-1?ma:xt.vertexLength;this.indexArray.emplaceBack(wn+2,wn+3,Yi),this.indexArray.emplaceBack(wn+3,Yi+1,Yi),this.indexArray.emplaceBack(wn+3,En,Yi+1),xt.primitiveLength+=3}Oa=!Oa}if(I){const Lr=this.layoutVertexExtArray,En=V.projectTilePoint($a.x,$a.y,y),Yi=V.projectTilePoint(or.x,or.y,y),ls=V.upVector(y,$a.x,$a.y),ys=V.upVector(y,or.x,or.y);om(Lr,En,ls),om(Lr,En,ls),om(Lr,Yi,ys),om(Lr,Yi,ys)}}O&&(Ye+=Ut.length-1),X&&Pe&&this.zoom>=17&&(ga.length!==0&&je(ga,ga[0])&&ga.pop(),this.groundEffect.addData(ga,mt,D,Pe>0))}this.footprintSegments.push(Ot),St.triangleCount=this.indexArray.length-St.triangleArrayOffset,this.polygonSegments.push(St),++B.footprintSegLen,++B.polygonSegLen}if(B.vertexCount=this.layoutVertexArray.length-B.vertexArrayOffset,B.groundVertexCount=this.groundEffect.vertexArray.length-B.groundVertexArrayOffset,B.vertexCount!==0){if(B.centroidXY=M.borders?Yy:this.encodeCentroid(M,B),this.centroidData.push(B),M.borders){this.featuresOnBorder.push(M);const Ze=this.featuresOnBorder.length-1;for(let mt=0;mt<M.borders.length;mt++)M.borders[mt][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[mt].push(Ze)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,m,_,y,N),this.groundEffect.addPaintPropertiesData(i,f,m,_,y,N),this.maxHeight=Math.max(this.maxHeight,ee)}}sortBorders(){for(let i=0;i<this.borderFeatureIndices.length;i++)this.borderFeatureIndices[i].sort((u,f)=>this.featuresOnBorder[u].borders[i][0]-this.featuresOnBorder[f].borders[i][0])}splitToSubtiles(){const i=[];for(let b=0;b<this.centroidData.length;b++){const N=this.centroidData[b],D=+(N.min.y+N.max.y>Na),S=2*D+(+(N.min.x+N.max.x>Na)^D);for(let V=0;V<N.polygonSegLen;V++){const I=N.polygonSegIdx+V;i.push({centroidIdx:b,subtile:S,polygonSegmentIdx:I,triangleSegmentIdx:this.polygonSegments[I].triangleSegIdx})}}const u=new Ps;i.sort((b,N)=>b.triangleSegmentIdx===N.triangleSegmentIdx?b.subtile-N.subtile:b.triangleSegmentIdx-N.triangleSegmentIdx);let f=0,y=0,m=0;for(const b of i){if(b.triangleSegmentIdx!==f)break;m++}const _=i.length;for(;y!==i.length;){f=i[y].triangleSegmentIdx;let b=0,N=y,D=y;for(let S=N;S<m&&i[S].subtile===b;S++)D++;for(;N!==m;){const S=i[N];b=S.subtile;const V=this.centroidData[S.centroidIdx].min.clone(),I=this.centroidData[S.centroidIdx].max.clone(),O={vertexOffset:this.segments.segments[f].vertexOffset,primitiveOffset:u.length,vertexLength:this.segments.segments[f].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let M=N;M<D;M++){const B=i[M],X=this.polygonSegments[B.polygonSegmentIdx],ee=this.centroidData[B.centroidIdx].min,ue=this.centroidData[B.centroidIdx].max,le=this.indexArray.uint16;for(let re=X.triangleArrayOffset;re<X.triangleArrayOffset+X.triangleCount;re++)u.emplaceBack(le[3*re],le[3*re+1],le[3*re+2]);O.primitiveLength+=X.triangleCount,V.x=Math.min(V.x,ee.x),V.y=Math.min(V.y,ee.y),I.x=Math.max(I.x,ue.x),I.y=Math.max(I.y,ue.y)}O.primitiveLength>0&&this.triangleSubSegments.push({segment:O,min:V,max:I}),N=D;for(let M=N;M<m&&i[M].subtile===i[N].subtile;M++)D++}y=m;for(let S=y;S<_&&i[S].triangleSegmentIdx===i[y].triangleSegmentIdx;S++)m++}u._trim(),this.indexArray=u}getVisibleSegments(i,u,f){const y=new Di;if(this.wallMode){for(const B of this.triangleSubSegments)y.segments.push(B.segment);return y}let m=0,_=0;const b=1<<i.canonical.z;if(u){const B=u.getMinMaxForTile(i);B&&(m=B.min,_=B.max)}_+=this.maxHeight;const N=i.toUnwrapped();let D;const S=[N.canonical.x/b+N.wrap,N.canonical.y/b],V=[(N.canonical.x+1)/b+N.wrap,(N.canonical.y+1)/b],I=(B,X,ee)=>[B[0]*(1-ee[0])+X[0]*ee[0],B[1]*(1-ee[1])+X[1]*ee[1]],O=[],M=[];for(const B of this.triangleSubSegments){O[0]=B.min.x/Na,O[1]=B.min.y/Na,M[0]=B.max.x/Na,M[1]=B.max.y/Na;const X=I(S,V,O),ee=I(S,V,M);if(new tr([X[0],X[1],m],[ee[0],ee[1],_]).intersectsPrecise(f)===0){D&&(y.segments.push(D),D=void 0);continue}const ue=B.segment;D&&D.vertexOffset!==ue.vertexOffset&&(y.segments.push(D),D=void 0),D?(D.vertexLength+=ue.vertexLength,D.primitiveLength+=ue.primitiveLength):D={vertexOffset:ue.vertexOffset,primitiveLength:ue.primitiveLength,vertexLength:ue.vertexLength,primitiveOffset:ue.primitiveOffset,sortKey:void 0,vaos:{}}}return D&&y.segments.push(D),y}encodeCentroid(i,u){const f=i.centroid(),y=u.span(),m=Math.min(7,Math.round(y.x*this.tileToMeter/10)),_=Math.min(7,Math.round(y.y*this.tileToMeter/10));return new Bt(ka(f.x,1,Na-1)<<3|m,ka(f.y,1,Na-1)<<3|_)}encodeBorderCentroid(i){if(!i.borders)return new Bt(0,0);const u=i.borders,f=Number.MAX_VALUE;if(u[0][0]!==f||u[1][0]!==f){const y=u[0][0]!==f?0:1;return new Bt(6|(u[0][0]!==f?0:65528),(u[y][0]+u[y][1])/2<<3|6)}{const y=u[2][0]!==f?2:3;return new Bt((u[y][0]+u[y][1])/2<<3|6,6|(u[2][0]!==f?0:65528))}}showCentroid(i){const u=this.centroidData[i.centroidDataIndex];u.flags&=hp,u.centroidXY.x=0,u.centroidXY.y=0,this.writeCentroidToBuffer(u)}writeCentroidToBuffer(i){this.groundEffect.updateHiddenByLandmark(i);const u=i.vertexArrayOffset,f=i.vertexCount+i.vertexArrayOffset,y=i.flags&hp?Yy:i.centroidXY,m=this.centroidVertexArray.geta_centroid_pos0(u);if(this.centroidVertexArray.geta_centroid_pos1(u)!==y.y||m!==y.x){for(let _=u;_<f;++_)this.centroidVertexArray.emplace(_,y.x,y.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const i of this.centroidData)this.writeCentroidToBuffer(i)}updateReplacement(i,u,f){if(u.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=u.updateTime;const y=u.getReplacementRegionsForTile(i.toUnwrapped());if(Z0(this.activeReplacements,y))return;if(this.activeReplacements=y,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const _ of this.centroidData)_.flags&=2147483647;const m=[];for(const _ of this.activeReplacements){if(_.order<f)continue;const b=Math.max(1,Math.pow(2,_.footprintTileId.canonical.z-i.canonical.z));for(const N of this.centroidData)if(!(N.flags&hp||_.min.x>N.max.x||N.min.x>_.max.x||_.min.y>N.max.y||N.min.y>_.max.y))for(let D=0;D<N.footprintSegLen;D++){const S=this.footprintSegments[N.footprintSegIdx+D];if(m.length=0,oS(this.footprintVertices,S.vertexOffset,S.vertexCount,_.footprintTileId.canonical,i.canonical,m),QT(_.footprint,m,this.footprintIndices.uint16,S.indexOffset,S.indexCount,-S.vertexOffset,-b)){N.flags|=hp;break}}}for(const _ of this.centroidData)this.writeCentroidToBuffer(_);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(i,u,f){let y=!1;for(let m=0;m<f.footprintSegLen;m++){const _=this.footprintSegments[f.footprintSegIdx+m];let b=0;for(const N of _.ringIndices){for(let D=b,S=N+b-1;D<N+b;S=D++){const V=this.footprintVertices.int16[2*(D+_.vertexOffset)+0],I=this.footprintVertices.int16[2*(D+_.vertexOffset)+1],O=this.footprintVertices.int16[2*(S+_.vertexOffset)+1];I>u!=O>u&&i<(this.footprintVertices.int16[2*(S+_.vertexOffset)+0]-V)*(u-I)/(O-I)+V&&(y=!y)}b=N}}return y}getHeightAtTileCoord(i,u){let f=Number.NEGATIVE_INFINITY,y=!0;const m=4*(i+Na)*Na+(u+Na);if(this.partLookup.hasOwnProperty(m)){const _=this.partLookup[m];return _?{height:_.height,hidden:!!(_.flags&hp)}:void 0}for(const _ of this.centroidData)i>_.max.x||_.min.x>i||u>_.max.y||_.min.y>u||this.footprintContainsPoint(i,u,_)&&_&&_.height>f&&(f=_.height,this.partLookup[m]=_,y=!!(_.flags&hp));if(f!==Number.NEGATIVE_INFINITY)return{height:f,hidden:y};this.partLookup[m]=void 0}}function _A(d,i){const u=d.add(i)._unit();return d.x*u.x+d.y*u.y}function H0(d,i,u,f){const y=i.sub(d)._perp()._unit(),m=u.sub(i)._perp()._unit();return $0(d,i,u,_A(y,m),f)}function $0(d,i,u,f,y){const m=Math.sqrt(1-f*f);return Math.min(d.dist(i)/3,i.dist(u)/3,y*m/f)}function S1(d,i,u){return d.x<u[0].x&&i.x<u[0].x||d.x>u[1].x&&i.x>u[1].x||d.y<u[0].y&&i.y<u[0].y||d.y>u[1].y&&i.y>u[1].y}function Jy(d,i){return d.x<i[0].x||d.x>i[1].x||d.y<i[0].y||d.y>i[1].y}function sS(d,i,u){if(d.x<0||d.x>=Na||i.x<0||i.x>=Na||u.x<0||u.x>=Na)return!1;const f=u.sub(i),y=f.perp(),m=d.sub(i);return(f.x*m.x+f.y*m.y)/Math.sqrt((f.x*f.x+f.y*f.y)*(m.x*m.x+m.y*m.y))>-.866&&y.x*m.x+y.y*m.y<0}function C1(d,i,u){const f=i?2|d:-3&d;return u?1|f:-2&f}function b1(){const d=Math.PI/32,i=Math.tan(d),u=ll;return u*Math.sqrt(1+2*i*i)-u}function x1(d,i,u){const f=1<<u.z,y=Nu(u.x/f),m=Nu((u.x+1)/f),_=Ri(u.y/f),b=Ri((u.y+1)/f);return function(N,D,S,V,I=0,O){const M=[];if(!N.length||!S||!V)return M;const B=(we,Pe)=>{for(const We of we)M.push({polygon:We,bounds:Pe})},X=Math.ceil(Math.log2(S)),ee=Math.ceil(Math.log2(V)),ue=X-ee,le=[];for(let we=0;we<Math.abs(ue);we++)le.push(ue>0?0:1);for(let we=0;we<Math.min(X,ee);we++)le.push(0),le.push(1);let re=N;if(re=yA(re,D[0].y-I,D[1].y+I,1),re=yA(re,D[0].x-I,D[1].x+I,0),!re.length)return M;const pe=[];for(le.length?pe.push({polygons:re,bounds:D,depth:0}):B(re,D);pe.length;){const we=pe.pop(),Pe=we.depth,We=le[Pe],je=we.bounds[0],Ze=we.bounds[1],mt=We===0?je.x:je.y,Ye=We===0?Ze.x:Ze.y,At=O?O(We,mt,Ye):.5*(mt+Ye),xt=yA(we.polygons,mt-I,At+I,We),St=yA(we.polygons,At-I,Ye+I,We);if(xt.length){const Ot=[je,new Bt(We===0?At:Ze.x,We===1?At:Ze.y)];le.length>Pe+1?pe.push({polygons:xt,bounds:Ot,depth:Pe+1}):B(xt,Ot)}if(St.length){const Ot=[new Bt(We===0?At:je.x,We===1?At:je.y),Ze];le.length>Pe+1?pe.push({polygons:St,bounds:Ot,depth:Pe+1}):B(St,Ot)}}return M}(d,i,Math.ceil((m-y)/11.25),Math.ceil((_-b)/11.25),1,(N,D,S)=>{if(N===0)return .5*(D+S);{const V=Ri((u.y+D/Na)/f);return(Pi(.5*(Ri((u.y+S/Na)/f)+V))*f-u.y)*Na}})}function oS(d,i,u,f,y,m){const _=Math.pow(2,f.z-y.z);for(let b=0;b<u;b++){let N=d.int16[2*(b+i)+0],D=d.int16[2*(b+i)+1];N=(N+y.x*Na)*_-f.x*Na,D=(D+y.y*Na)*_-f.y*Na,m.push(new Bt(N,D))}}let K0,P1;function lm(d,i){return d.x*i.x+d.y*i.y}function lS(d,i){if(d.length===1){let u=0;const f=i[u++];let y;for(;!y||f.equals(y);)if(y=i[u++],!y)return 1/0;for(;u<i.length;u++){const m=i[u],_=d[0],b=y.sub(f),N=m.sub(f),D=_.sub(f),S=lm(b,b),V=lm(b,N),I=lm(N,N),O=lm(D,b),M=lm(D,N),B=S*I-V*V,X=(I*O-V*M)/B,ee=(S*M-V*O)/B,ue=f.z*(1-X-ee)+y.z*X+m.z*ee;if(isFinite(ue))return ue}return 1/0}{let u=1/0;for(const f of i)u=Math.min(u,f.z);return u}}function uS(d,i,u,f,y,m,_,b){const N=_*y.getElevationAt(d,i,!0,!0),D=m[0]!==0,S=D?m[1]===0?_*(m[0]/7-450):_*function(V,I,O){const M=Math.floor(I[0]/8),B=Math.floor(I[1]/8),X=10*(I[0]-8*M),ee=10*(I[1]-8*B),ue=V.getElevationAt(M,B,!0,!0),le=V.getMeterToDEM(O),re=Math.floor(.5*(X*le-1)),pe=Math.floor(.5*(ee*le-1)),we=V.tileCoordToPixel(M,B),Pe=2*re+1,We=2*pe+1,je=function(St,Ot,Nt,Ut,Mt){return[St.getElevationAtPixel(Ot,Nt,!0),St.getElevationAtPixel(Ot+Mt,Nt,!0),St.getElevationAtPixel(Ot,Nt+Mt,!0),St.getElevationAtPixel(Ot+Ut,Nt+Mt,!0)]}(V,we.x-re,we.y-pe,Pe,We),Ze=Math.abs(je[0]-je[1]),mt=Math.abs(je[2]-je[3]),Ye=Math.abs(je[0]-je[2])+Math.abs(je[1]-je[3]),At=Math.min(.25,.5*le*(Ze+mt)/Pe),xt=Math.min(.25,.5*le*Ye/We);return ue+Math.max(At*X,xt*ee)}(y,m,b):N;return{base:N+(u===0?-1:u),top:D?Math.max(S+f,N+u+2):N+f}}Pt(q0,"FillExtrusionBucket",{omit:["layers","features"]}),Pt(R1,"PartData"),Pt(w1,"FootprintSegment"),Pt(nS,"BorderCentroidData"),Pt(iS,"GroundEffect");const E1=xn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),N1=xn([{name:"a_z_offset_width",components:3,type:"Float32"}],4),{members:W0}=E1,V1=xn([{name:"a_packed",components:3,type:"Float32"}]),{members:cS}=V1,z1=xn([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:um}=z1;class fp{constructor(i,u){this.width=i,this.height=u,this.nextRow=0,this.image=new tm({width:i,height:u}),this.positions={},this.uploaded=!1}getDash(i,u){const f=this.getKey(i,u);return this.positions[f]}trim(){const i=this.width,u=this.height=ca(this.nextRow);this.image.resize({width:i,height:u})}getKey(i,u){return i.join(",")+u}getDashRanges(i,u,f){const y=[];let m=i.length%2==1?-i[i.length-1]*f:0,_=i[0]*f,b=!0;y.push({left:m,right:_,isDash:b,zeroLength:i[0]===0});let N=i[0];for(let D=1;D<i.length;D++){b=!b;const S=i[D];m=N*f,N+=S,_=N*f,y.push({left:m,right:_,isDash:b,zeroLength:S===0})}return y}addRoundDash(i,u,f){const y=u/2;for(let m=-f;m<=f;m++){const _=this.width*(this.nextRow+f+m);let b=0,N=i[b];for(let D=0;D<this.width;D++){D/N.right>1&&(N=i[++b]);const S=Math.abs(D-N.left),V=Math.abs(D-N.right),I=Math.min(S,V);let O;const M=m/f*(y+1);if(N.isDash){const B=y-Math.abs(M);O=Math.sqrt(I*I+B*B)}else O=y-Math.sqrt(I*I+M*M);this.image.data[_+D]=Math.max(0,Math.min(255,O+128))}}}addRegularDash(i,u){for(let N=i.length-1;N>=0;--N){const D=i[N],S=i[N+1];D.zeroLength?i.splice(N,1):S&&S.isDash===D.isDash&&(S.left=D.left,i.splice(N,1))}const f=i[0],y=i[i.length-1];f.isDash===y.isDash&&(f.left=y.left-this.width,y.right=f.right+this.width);const m=this.width*this.nextRow;let _=0,b=i[_];for(let N=0;N<this.width;N++){N/b.right>1&&(b=i[++_]);const D=Math.abs(N-b.left),S=Math.abs(N-b.right),V=Math.min(D,S);this.image.data[m+N]=Math.max(0,Math.min(255,(b.isDash?V:-V)+u+128))}}addDash(i,u){const f=this.getKey(i,u);if(this.positions[f])return this.positions[f];const y=u==="round",m=y?7:0,_=2*m+1;if(this.nextRow+_>this.height)return en("LineAtlas out of space"),null;i.length===0&&i.push(1);let b=0;for(let S=0;S<i.length;S++)i[S]<0&&(en("Negative value is found in line dasharray, replacing values with 0"),i[S]=0),b+=i[S];if(b!==0){const S=this.width/b,V=this.getDashRanges(i,this.width,S);y?this.addRoundDash(V,S,m):this.addRegularDash(V,u==="square"?.5*S:0)}const N=this.nextRow+m;this.nextRow+=_;const D={tl:[N,m],br:[b,0]};return this.positions[f]=D,D}}Pt(fp,"LineAtlas");const cm=Th.VectorTileFeature.types,vA=Math.cos(Math.PI/180*37.5),wA=Math.cos(Math.PI/180*5);class zf{constructor(i){this.evaluationGlobals={zoom:0,lineProgress:void 0},this.zoom=i.zoom,this.evaluationGlobals.zoom=this.zoom,this.overscaling=i.overscaling,this.pixelRatio=i.pixelRatio,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=i.index,this.projection=i.projection,this.hasPattern=!1,this.hasZOffset=!1,this.hasCrossSlope=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new wf,this.layoutVertexArray2=new So,this.patternVertexArray=new So,this.indexArray=new Ps,this.programConfigurations=new _h(i.layers,{zoom:i.zoom,lut:i.lut}),this.segments=new Di,this.maxLineLength=0,this.zOffsetVertexArray=new So,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.tessellationStep=i.tessellationStep?i.tessellationStep:Na/64}updateFootprints(i,u){}populate(i,u,f,y){this.hasPattern=fA("line",this.layers,this.pixelRatio,u);const m=this.layers[0].layout.get("line-sort-key");this.tileToMeter=g(f);const _=this.layers[0].layout.get("line-z-offset"),b=_.isConstant()&&!_.constantOr(0),N=this.layers[0].layout.get("line-elevation-reference");this.hasZOffset=N==="sea"||N==="ground"||!b&&N==="none",this.hasZOffset&&N==="none"&&en(`line-elevation-reference: ground is used for the layer ${this.layerIds[0]} because non-zero line-z-offset value was found.`);const D=this.layers[0].layout.get("line-cross-slope");this.hasCrossSlope=this.hasZOffset&&D!==void 0;const S=[];for(const{feature:M,id:B,index:X,sourceLayerIndex:ee}of i){const ue=this.layers[0]._featureFilter.needGeometry,le=W(M,ue);if(!this.layers[0]._featureFilter.filter(new vn(this.zoom),le,f))continue;const re=m?m.evaluate(le,{},f):void 0,pe={id:B,properties:M.properties,type:M.type,sourceLayerIndex:ee,index:X,geometry:ue?le.geometry:H(M,f,y),patterns:{},sortKey:re};S.push(pe)}m&&S.sort((M,B)=>M.sortKey-B.sortKey);const{lineAtlas:V,featureIndex:I}=u,O=this.addConstantDashes(V);for(const M of S){const{geometry:B,index:X,sourceLayerIndex:ee}=M;if(O&&this.addFeatureDashes(M,V),this.hasPattern){const ue=pA("line",this.layers,M,this.zoom,this.pixelRatio,u);this.patternFeatures.push(ue)}else this.addFeature(M,B,X,f,V.positions,u.availableImages,u.brightness);I.insert(i[X].feature,B,X,ee,this.index)}}addConstantDashes(i){let u=!1;for(const f of this.layers){const y=f.paint.get("line-dasharray").value,m=f.layout.get("line-cap").value;if(y.kind!=="constant"||m.kind!=="constant")u=!0;else{const _=m.value,b=y.value;if(!b)continue;i.addDash(b,_)}}return u}addFeatureDashes(i,u){const f=this.zoom;for(const y of this.layers){const m=y.paint.get("line-dasharray").value,_=y.layout.get("line-cap").value;if(m.kind==="constant"&&_.kind==="constant")continue;let b,N;if(m.kind==="constant"){if(b=m.value,!b)continue}else b=m.evaluate({zoom:f},i);N=_.kind==="constant"?_.value:_.evaluate({zoom:f},i),u.addDash(b,N),i.patterns[y.id]=u.getKey(b,N)}}update(i,u,f,y,m,_,b){this.programConfigurations.updatePaintArrays(i,u,m,f,y,_,b)}addFeatures(i,u,f,y,m,_){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,u,f,y,_)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,cS)),this.patternVertexArray.length!==0&&(this.patternVertexBuffer=i.createVertexBuffer(this.patternVertexArray,um)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=i.createVertexBuffer(this.zOffsetVertexArray,N1.members,!0)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,W0),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&i.properties.hasOwnProperty("mapbox_clip_start")&&i.properties.hasOwnProperty("mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,u,f,y,m,_,b){const N=this.layers[0].layout,D=N.get("line-join").evaluate(i,{}),S=N.get("line-cap").evaluate(i,{}),V=N.get("line-miter-limit"),I=N.get("line-round-limit");this.lineClips=this.lineFeatureClips(i),this.lineFeature=i,this.zOffsetValue=N.get("line-z-offset").value;const O=this.layers[0].paint.get("line-width").value;O.kind!=="constant"&&O.isLineProgressConstant===!1&&(this.variableWidthValue=O);for(const M of u)this.addLine(M,i,y,D,S,V,I);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,m,_,y,b)}addLine(i,u,f,y,m,_,b){this.distance=0,this.prevDistance=0,this.scaledDistance=0,this.totalDistance=0,this.totalFeatureLength=0,this.lineSoFar=0,this.currentVertex=void 0;const N=y==="none";if(this.patternJoinNone=this.hasPattern&&N,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[],this.lineClips){this.lineClipsArray.push(this.lineClips);for(let le=0;le<i.length-1;le++)this.totalDistance+=i[le].dist(i[le+1]);this.totalFeatureLength=this.totalDistance/(this.lineClips.end-this.lineClips.start),this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const D=cm[u.type]==="Polygon";let S=i.length;for(;S>=2&&i[S-1].equals(i[S-2]);)S--;let V=0;for(;V<S-1&&i[V].equals(i[V+1]);)V++;if(S<(D?3:2))return;y==="bevel"&&(_=1.05);const I=this.segments.prepareSegment(10*S,this.layoutVertexArray,this.indexArray);let O,M,B,X,ee,ue;this.e1=this.e2=-1,D&&(O=i[S-2],ee=i[V].sub(O)._unit()._perp());for(let le=V;le<S;le++){if(B=le===S-1?D?i[V+1]:void 0:i[le+1],B&&i[le].equals(B))continue;ee&&(X=ee),O&&(M=O),O=i[le],ue=this.evaluateLineProgressFeatures(M?M.dist(O):0),ee=B?B.sub(O)._unit()._perp():X,X=X||ee;const re=M&&B;let pe=re?y:D||N?"butt":m;const we=X.x*ee.x+X.y*ee.y;if(N){const xt=function(St){if(St.patternJoinNone){const Ot=St.segmentPoints.length/2,Nt=St.lineSoFar-St.segmentStart;for(let Ut=0;Ut<Ot;++Ut){const Mt=St.segmentPoints[2*Ut+1],jt=Math.round(St.segmentPoints[2*Ut])+.5+.25*Mt;St.patternVertexArray.emplaceBack(jt,Nt,St.segmentStart),St.patternVertexArray.emplaceBack(jt,Nt,St.segmentStart)}St.segmentPoints.length=0}St.e1=St.e2=-1};if(re&&we<wA){this.updateDistance(M,O),this.addCurrentVertex(O,X,1,1,I,ue),xt(this),this.addCurrentVertex(O,ee,-1,-1,I,ue);continue}if(M){if(!B){this.updateDistance(M,O),this.addCurrentVertex(O,X,1,1,I,ue),xt(this);continue}pe="miter"}}let Pe=X.add(ee);Pe.x===0&&Pe.y===0||Pe._unit();const We=Pe.x*ee.x+Pe.y*ee.y,je=We!==0?1/We:1/0,Ze=2*Math.sqrt(2-2*We),mt=We<vA&&M&&B,Ye=X.x*ee.y-X.y*ee.x>0,At=this.overscaling<=16?15*Na/(512*this.overscaling):0;if(re&&pe==="round"){if(je<b)pe="miter";else if(je<=2){const xt=O1(O,-10,Na+10);pe=this.hasZOffset&&(xt||this.hasCrossSlope)?"miter":"fakeround"}}if(pe==="miter"&&je>_&&(pe="bevel"),pe==="bevel"&&(je>2&&(pe="flipbevel"),je<_&&(pe="miter")),M&&!(pe==="miter"&&mt)&&this.updateDistance(M,O),pe==="miter")if(mt){const xt=O.dist(M);if(xt>2*At){const Ot=O.sub(O.sub(M)._mult(At/xt)._round());this.updateDistance(M,Ot),this.addCurrentVertex(Ot,X,0,0,I,ue),M=Ot}this.updateDistance(M,O),Pe._mult(je),this.addCurrentVertex(O,Pe,0,0,I,ue);const St=O.dist(B);if(St>2*At){const Ot=O.add(B.sub(O)._mult(At/St)._round());this.updateDistance(O,Ot),this.addCurrentVertex(Ot,ee,0,0,I,ue),O=Ot}}else Pe._mult(je),this.addCurrentVertex(O,Pe,0,0,I,ue);else if(pe==="flipbevel"){if(je>100)Pe=ee.mult(-1);else{const xt=je*X.add(ee).mag()/X.sub(ee).mag();Pe._perp()._mult(xt*(Ye?-1:1))}this.addCurrentVertex(O,Pe,0,0,I,ue),this.addCurrentVertex(O,Pe.mult(-1),0,0,I,ue)}else if(pe==="bevel"||pe==="fakeround"){ue!=null&&M&&this.addCurrentVertex(O,X,-1,-1,I,ue);const xt=O.dist(M)<=2*At&&pe!=="bevel",St=Pe.mult(Ye?1:-1);St._mult(je);const Ot=ee.mult(Ye?-1:1),Nt=X.mult(Ye?-1:1),Ut=this.evaluateLineProgressFeatures(this.distance);if(ue==null&&(this.addHalfVertex(O,St.x,St.y,!1,!Ye,0,I,Ut),xt||this.addHalfVertex(O,St.x+2*Nt.x,St.y+2*Nt.y,!1,Ye,0,I,Ut)),pe==="fakeround"){const Mt=Math.round(180*Ze/Math.PI/20);this.addHalfVertex(O,Nt.x,Nt.y,!1,Ye,0,I,Ut);for(let jt=0;jt<Mt;jt++){let ga=jt/Mt;if(ga!==.5){const Ya=ga-.5;ga+=ga*Ya*(ga-1)*((1.0904+we*(we*(3.55645-1.43519*we)-3.2452))*Ya*Ya+(.848013+we*(.215638*we-1.06021)))}const ma=Ot.sub(Nt)._mult(ga)._add(Nt)._unit();this.addHalfVertex(O,ma.x,ma.y,!1,Ye,0,I,Ut)}this.addHalfVertex(O,Ot.x,Ot.y,!1,Ye,0,I,Ut)}xt||ue!=null||this.addHalfVertex(O,St.x+2*Ot.x,St.y+2*Ot.y,!1,Ye,0,I,Ut),ue!=null&&B&&this.addCurrentVertex(O,ee,1,1,I,ue)}else pe==="butt"?this.addCurrentVertex(O,Pe,0,0,I,ue):pe==="square"?(M||this.addCurrentVertex(O,Pe,-1,-1,I,ue),this.addCurrentVertex(O,Pe,0,0,I,ue),M&&this.addCurrentVertex(O,Pe,1,1,I,ue)):pe==="round"&&(M&&(this.addCurrentVertex(O,X,0,0,I,ue),this.addCurrentVertex(O,X,1,1,I,ue,!0)),B&&(this.addCurrentVertex(O,ee,-1,-1,I,ue,!0),this.addCurrentVertex(O,ee,0,0,I,ue)))}}addVerticesTo(i,u,f,y,m,_,b,N,D,S){const V=(u.w-i.w)/this.tessellationStep|0;let I=0;const O=this.scaledDistance;if(V>1){this.lineSoFar=i.w;const B=(u.x-i.x)/V,X=(u.y-i.y)/V,ee=(u.z-i.z)/V,ue=(u.w-i.w)/V;for(let le=1;le<V;++le){i.x+=B,i.y+=X,i.z+=ee,this.lineSoFar+=ue,I+=ue;const re=this.evaluateLineProgressFeatures(this.prevDistance+I);this.scaledDistance=(this.prevDistance+I)/this.totalDistance,this.addHalfVertex(i,f,y,S,!1,b,D,re),this.addHalfVertex(i,m,_,S,!0,-N,D,re)}}this.lineSoFar=u.w,this.scaledDistance=O;const M=this.evaluateLineProgressFeatures(this.distance);this.addHalfVertex(u,f,y,S,!1,b,D,M),this.addHalfVertex(u,m,_,S,!0,-N,D,M)}evaluateLineProgressFeatures(i){if(!this.variableWidthValue&&!this.hasZOffset)return null;this.evaluationGlobals.lineProgress=0,this.lineClips?this.evaluationGlobals.lineProgress=Math.min(1,(this.totalFeatureLength*this.lineClips.start+i)/this.totalFeatureLength):en(`line-progress evaluation for ${this.layerIds[0]} requires enabling 'lineMetrics' for the source.`);let u=0;return this.variableWidthValue&&this.variableWidthValue.kind!=="constant"&&(u=this.variableWidthValue.evaluate(this.evaluationGlobals,this.lineFeature)||0),this.hasZOffset?this.zOffsetValue.kind==="constant"?{zOffset:this.zOffsetValue.value,variableWidth:u}:{zOffset:this.zOffsetValue.evaluate(this.evaluationGlobals,this.lineFeature)||0,variableWidth:u}:{zOffset:0,variableWidth:u}}addCurrentVertex(i,u,f,y,m,_,b=!1){const N=u.x+u.y*f,D=u.y-u.x*f,S=u.y*y-u.x,V=-u.y-u.x*y;if(_!=null){const I=this.hasZOffset,O=-10,M=Na+10,B=_.zOffset,X=new g1(i.x,i.y,B,this.lineSoFar),ee=!!I&&O1(i,O,M),ue=this.lineSoFar,le=this.distance;if(this.currentVertex)if(ee){const re=this.currentVertexIsOutside,pe=this.currentVertex,we=new g1(i.x,i.y,B,this.lineSoFar);if(A1(pe,we,O,M),!O1(we,O,M)){if(re){this.e1=this.e2=-1,this.distance-=pe.dist(X),this.lineSoFar=pe.w;const Pe=this.evaluateLineProgressFeatures(pe.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(pe,N,D,b,!1,f,m,Pe),this.addHalfVertex(pe,S,V,b,!0,-y,m,Pe),this.prevDistance=this.distance}this.distance=this.prevDistance+pe.dist(we),this.scaledDistance=this.distance/this.totalDistance,this.addVerticesTo(pe,we,N,D,S,V,f,y,m,b),this.distance=le,this.scaledDistance=this.distance/this.totalDistance}}else{const re=this.currentVertex;if(this.currentVertexIsOutside){A1(re,X,O,M),this.e1=this.e2=-1,this.distance-=re.dist(X),this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=re.w;const pe=this.evaluateLineProgressFeatures(re.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(re,N,D,b,!1,f,m,pe),this.addHalfVertex(re,S,V,b,!0,-y,m,pe),this.prevDistance=this.distance,this.distance=le,this.scaledDistance=this.distance/this.totalDistance}this.addVerticesTo(re,X,N,D,S,V,f,y,m,b)}else ee||(this.addHalfVertex(i,N,D,b,!1,f,m,_),this.addHalfVertex(i,S,V,b,!0,-y,m,_));this.currentVertex=X,this.currentVertexIsOutside=ee,this.lineSoFar=ue}else this.addHalfVertex(i,N,D,b,!1,f,m,_),this.addHalfVertex(i,S,V,b,!0,-y,m,_)}addHalfVertex({x:i,y:u},f,y,m,_,b,N,D){if(this.patternJoinNone&&(this.segmentPoints.length===0&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),_||this.segmentPoints.push(this.lineSoFar-this.segmentStart,b)),this.layoutVertexArray.emplaceBack((i<<1)+(m?1:0),(u<<1)+(_?1:0),Math.round(63*f)+128,Math.round(63*y)+128,1+(b===0?0:b<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips){const V=hr(this.lineClips.start,this.lineClips.end,this.scaledDistance);this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,V)}const S=N.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,S),N.primitiveLength++),_?this.e2=S:this.e1=S,D!=null&&this.zOffsetVertexArray.emplaceBack(D.zOffset,D.variableWidth,D.variableWidth)}updateScaledDistance(){this.lineClips?(this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=this.totalFeatureLength*this.lineClips.start+this.distance):this.lineSoFar=this.distance}updateDistance(i,u){this.prevDistance=this.distance,this.distance+=i.dist(u),this.updateScaledDistance()}}function O1(d,i,u){return d.x<i||d.x>u||d.y<i||d.y>u}let D1,Qy;function dS(d,i,u){return i*(Na/(d.tileSize*Math.pow(2,u-d.tileID.overscaledZ)))}Pt(zf,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const M1=(d,i,u)=>(1-u)*d+u*i;function RA(d,i){return 1/dS(d,1,i.tileZoom)}function I1(d,i,u,f){return d.translatePosMatrix(f||i.tileID.projMatrix,i,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const hS=d=>{const i=[];TA(d)&&i.push("RENDER_LINE_DASH"),d.paint.get("line-gradient")&&i.push("RENDER_LINE_GRADIENT");const u=d.paint.get("line-trim-offset");u[0]===0&&u[1]===0||i.push("RENDER_LINE_TRIM_OFFSET"),d.paint.get("line-border-width").constantOr(1)!==0&&i.push("RENDER_LINE_BORDER");const f=d.layout.get("line-join").constantOr("miter")==="none",y=!!d.paint.get("line-pattern").constantOr(1);return f&&y&&i.push("LINE_JOIN_NONE"),i};function TA(d){const i=d.paint.get("line-dasharray").value;return i.value||i.kind!=="constant"}let eg;const L1=()=>eg||(eg={layout:D1||(D1=new Oi({"line-cap":new Ua(Gt.layout_line["line-cap"]),"line-join":new Ua(Gt.layout_line["line-join"]),"line-miter-limit":new Ca(Gt.layout_line["line-miter-limit"]),"line-round-limit":new Ca(Gt.layout_line["line-round-limit"]),"line-sort-key":new Ua(Gt.layout_line["line-sort-key"]),"line-z-offset":new Ua(Gt.layout_line["line-z-offset"]),"line-elevation-reference":new Ca(Gt.layout_line["line-elevation-reference"]),"line-cross-slope":new Ca(Gt.layout_line["line-cross-slope"]),visibility:new Ca(Gt.layout_line.visibility),"line-width-unit":new Ca(Gt.layout_line["line-width-unit"])})),paint:Qy||(Qy=new Oi({"line-opacity":new Ua(Gt.paint_line["line-opacity"]),"line-color":new Ua(Gt.paint_line["line-color"]),"line-translate":new Ca(Gt.paint_line["line-translate"]),"line-translate-anchor":new Ca(Gt.paint_line["line-translate-anchor"]),"line-width":new Ua(Gt.paint_line["line-width"]),"line-gap-width":new Ua(Gt.paint_line["line-gap-width"]),"line-offset":new Ua(Gt.paint_line["line-offset"]),"line-blur":new Ua(Gt.paint_line["line-blur"]),"line-dasharray":new Ua(Gt.paint_line["line-dasharray"]),"line-pattern":new Ua(Gt.paint_line["line-pattern"]),"line-gradient":new Ki(Gt.paint_line["line-gradient"]),"line-trim-offset":new Ca(Gt.paint_line["line-trim-offset"]),"line-trim-fade-range":new Ca(Gt.paint_line["line-trim-fade-range"]),"line-trim-color":new Ca(Gt.paint_line["line-trim-color"]),"line-emissive-strength":new Ca(Gt.paint_line["line-emissive-strength"]),"line-border-width":new Ua(Gt.paint_line["line-border-width"]),"line-border-color":new Ua(Gt.paint_line["line-border-color"]),"line-occlusion-opacity":new Ca(Gt.paint_line["line-occlusion-opacity"]),"line-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"line-gradient-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"line-trim-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"line-border-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},eg);class SA extends Ua{possiblyEvaluate(i,u){return u=new vn(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,transition:u.transition}),super.possiblyEvaluate(i,u)}evaluate(i,u,f,y){return u=Rn({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(i,u,f,y)}}let Jm;function CA(d,i){return i>0?i+2*d:d}const fS=xn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),wP=xn([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Y0=xn([{name:"a_projected_pos",components:4,type:"Float32"}],4);xn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const p=xn([{name:"a_auto_z_offset",components:1,type:"Float32"}],4),v=xn([{name:"a_texb",components:2,type:"Uint16"}]),x=xn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_elevation_from_sea",components:2,type:"Float32"}]),F=xn([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_auto_z_offset",components:1,type:"Float32"}]);xn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Y=xn([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),se=xn([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);xn([{name:"triangle",components:3,type:"Uint16"}]),xn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),xn([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"},{type:"Uint16",name:"elevationFeatureIndex"}]),xn([{type:"Float32",name:"offsetX"}]),xn([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Fe=24;const dt=128;function Ft(d,i,u,f,y){if(d.kind==="camera")return d.maxSize;if(d.kind==="composite"){const m=i.possiblyEvaluate(new vn(d.maxZoom),u).evaluate(y,{},u),_=i.possiblyEvaluate(new vn(d.minZoom),u).evaluate(y,{},u);return Math.max(m,_)}return i.possiblyEvaluate(new vn(f)).evaluate(y,{},u)}function oa(d,i){const{expression:u}=i;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new vn(d+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:y}=u;let m=0;for(;m<f.length&&f[m]<=d;)m++;m=Math.max(0,m-1);let _=m;for(;_<f.length&&f[_]<d+1;)_++;_=Math.min(f.length-1,_);const b=f[m],N=f[_];return u.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:N,interpolationType:y}:{kind:"camera",minZoom:b,maxZoom:N,minSize:u.evaluate(new vn(b)),maxSize:u.evaluate(new vn(N)),interpolationType:y}}}function ja(d,{uSize:i,uSizeT:u},{lowerSize:f,upperSize:y}){return d.kind==="source"?f/dt:d.kind==="composite"?hr(f/dt,y/dt,u):i}function nr(d,i,u=1){let f=0,y=0;if(d.kind==="constant")y=d.layoutSize*u;else if(d.kind!=="source"){const{interpolationType:m,minZoom:_,maxZoom:b}=d,N=m?ka(Hi.interpolationFactor(m,i,_,b),0,1):0;d.kind==="camera"?y=hr(d.minSize,d.maxSize,N)*u:f=N*u}return{uSizeT:f,uSize:y}}var ba=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:dt,evaluateSizeForFeature:ja,evaluateSizeForZoom:nr,getRasterizedIconSize:Ft,getSizeData:oa});function Za(d,i,u){return d.sections.forEach(f=>{f.text=function(y,m,_){const b=m.layout.get("text-transform").evaluate(_,{});return b==="uppercase"?y=y.toLocaleUpperCase():b==="lowercase"&&(y=y.toLocaleLowerCase()),ss.applyArabicShaping&&(y=ss.applyArabicShaping(y)),y}(f.text,i,u)}),d}const Yr={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function Qn(d){return d===""||d===""||d===""||d===""||d===""||d===""||d===""||d===""||d===""||d===""||d===""||d===""||d===""||d===""||d===""||d===""||d===""}function Ho(d){return d===""||d===""||d===""||d===""||d===""||d===""||d===""||d===""||d===""||d===""}var ya,na,Ta,Ja={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Kr(){return ya||(ya=1,Ja.read=function(d,i,u,f,y){var m,_,b=8*y-f-1,N=(1<<b)-1,D=N>>1,S=-7,V=u?y-1:0,I=u?-1:1,O=d[i+V];for(V+=I,m=O&(1<<-S)-1,O>>=-S,S+=b;S>0;m=256*m+d[i+V],V+=I,S-=8);for(_=m&(1<<-S)-1,m>>=-S,S+=f;S>0;_=256*_+d[i+V],V+=I,S-=8);if(m===0)m=1-D;else{if(m===N)return _?NaN:1/0*(O?-1:1);_+=Math.pow(2,f),m-=D}return(O?-1:1)*_*Math.pow(2,m-f)},Ja.write=function(d,i,u,f,y,m){var _,b,N,D=8*m-y-1,S=(1<<D)-1,V=S>>1,I=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,O=f?0:m-1,M=f?1:-1,B=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(b=isNaN(i)?1:0,_=S):(_=Math.floor(Math.log(i)/Math.LN2),i*(N=Math.pow(2,-_))<1&&(_--,N*=2),(i+=_+V>=1?I/N:I*Math.pow(2,1-V))*N>=2&&(_++,N/=2),_+V>=S?(b=0,_=S):_+V>=1?(b=(i*N-1)*Math.pow(2,y),_+=V):(b=i*Math.pow(2,V-1)*Math.pow(2,y),_=0));y>=8;d[u+O]=255&b,O+=M,b/=256,y-=8);for(_=_<<y|b,D+=y;D>0;d[u+O]=255&_,O+=M,_/=256,D-=8);d[u+O-M]|=128*B}),Ja}function yi(){if(Ta)return na;Ta=1,na=i;var d=Kr();function i(re){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(re)?re:new Uint8Array(re||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var u=4294967296,f=1/u,y=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function m(re){return re.type===i.Bytes?re.readVarint()+re.pos:re.pos+1}function _(re,pe,we){return we?4294967296*pe+(re>>>0):4294967296*(pe>>>0)+(re>>>0)}function b(re,pe,we){var Pe=pe<=16383?1:pe<=2097151?2:pe<=268435455?3:Math.floor(Math.log(pe)/(7*Math.LN2));we.realloc(Pe);for(var We=we.pos-1;We>=re;We--)we.buf[We+Pe]=we.buf[We]}function N(re,pe){for(var we=0;we<re.length;we++)pe.writeVarint(re[we])}function D(re,pe){for(var we=0;we<re.length;we++)pe.writeSVarint(re[we])}function S(re,pe){for(var we=0;we<re.length;we++)pe.writeFloat(re[we])}function V(re,pe){for(var we=0;we<re.length;we++)pe.writeDouble(re[we])}function I(re,pe){for(var we=0;we<re.length;we++)pe.writeBoolean(re[we])}function O(re,pe){for(var we=0;we<re.length;we++)pe.writeFixed32(re[we])}function M(re,pe){for(var we=0;we<re.length;we++)pe.writeSFixed32(re[we])}function B(re,pe){for(var we=0;we<re.length;we++)pe.writeFixed64(re[we])}function X(re,pe){for(var we=0;we<re.length;we++)pe.writeSFixed64(re[we])}function ee(re,pe){return(re[pe]|re[pe+1]<<8|re[pe+2]<<16)+16777216*re[pe+3]}function ue(re,pe,we){re[we]=pe,re[we+1]=pe>>>8,re[we+2]=pe>>>16,re[we+3]=pe>>>24}function le(re,pe){return(re[pe]|re[pe+1]<<8|re[pe+2]<<16)+(re[pe+3]<<24)}return i.prototype={destroy:function(){this.buf=null},readFields:function(re,pe,we){for(we=we||this.length;this.pos<we;){var Pe=this.readVarint(),We=Pe>>3,je=this.pos;this.type=7&Pe,re(We,pe,this),this.pos===je&&this.skip(Pe)}return pe},readMessage:function(re,pe){return this.readFields(re,pe,this.readVarint()+this.pos)},readFixed32:function(){var re=ee(this.buf,this.pos);return this.pos+=4,re},readSFixed32:function(){var re=le(this.buf,this.pos);return this.pos+=4,re},readFixed64:function(){var re=ee(this.buf,this.pos)+ee(this.buf,this.pos+4)*u;return this.pos+=8,re},readSFixed64:function(){var re=ee(this.buf,this.pos)+le(this.buf,this.pos+4)*u;return this.pos+=8,re},readFloat:function(){var re=d.read(this.buf,this.pos,!0,23,4);return this.pos+=4,re},readDouble:function(){var re=d.read(this.buf,this.pos,!0,52,8);return this.pos+=8,re},readVarint:function(re){var pe,we,Pe=this.buf;return pe=127&(we=Pe[this.pos++]),we<128?pe:(pe|=(127&(we=Pe[this.pos++]))<<7,we<128?pe:(pe|=(127&(we=Pe[this.pos++]))<<14,we<128?pe:(pe|=(127&(we=Pe[this.pos++]))<<21,we<128?pe:function(We,je,Ze){var mt,Ye,At=Ze.buf;if(mt=(112&(Ye=At[Ze.pos++]))>>4,Ye<128||(mt|=(127&(Ye=At[Ze.pos++]))<<3,Ye<128)||(mt|=(127&(Ye=At[Ze.pos++]))<<10,Ye<128)||(mt|=(127&(Ye=At[Ze.pos++]))<<17,Ye<128)||(mt|=(127&(Ye=At[Ze.pos++]))<<24,Ye<128)||(mt|=(1&(Ye=At[Ze.pos++]))<<31,Ye<128))return _(We,mt,je);throw new Error("Expected varint not more than 10 bytes")}(pe|=(15&(we=Pe[this.pos]))<<28,re,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var re=this.readVarint();return re%2==1?(re+1)/-2:re/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var re=this.readVarint()+this.pos,pe=this.pos;return this.pos=re,re-pe>=12&&y?function(we,Pe,We){return y.decode(we.subarray(Pe,We))}(this.buf,pe,re):function(we,Pe,We){for(var je="",Ze=Pe;Ze<We;){var mt,Ye,At,xt=we[Ze],St=null,Ot=xt>239?4:xt>223?3:xt>191?2:1;if(Ze+Ot>We)break;Ot===1?xt<128&&(St=xt):Ot===2?(192&(mt=we[Ze+1]))==128&&(St=(31&xt)<<6|63&mt)<=127&&(St=null):Ot===3?(Ye=we[Ze+2],(192&(mt=we[Ze+1]))==128&&(192&Ye)==128&&((St=(15&xt)<<12|(63&mt)<<6|63&Ye)<=2047||St>=55296&&St<=57343)&&(St=null)):Ot===4&&(Ye=we[Ze+2],At=we[Ze+3],(192&(mt=we[Ze+1]))==128&&(192&Ye)==128&&(192&At)==128&&((St=(15&xt)<<18|(63&mt)<<12|(63&Ye)<<6|63&At)<=65535||St>=1114112)&&(St=null)),St===null?(St=65533,Ot=1):St>65535&&(St-=65536,je+=String.fromCharCode(St>>>10&1023|55296),St=56320|1023&St),je+=String.fromCharCode(St),Ze+=Ot}return je}(this.buf,pe,re)},readBytes:function(){var re=this.readVarint()+this.pos,pe=this.buf.subarray(this.pos,re);return this.pos=re,pe},readPackedVarint:function(re,pe){if(this.type!==i.Bytes)return re.push(this.readVarint(pe));var we=m(this);for(re=re||[];this.pos<we;)re.push(this.readVarint(pe));return re},readPackedSVarint:function(re){if(this.type!==i.Bytes)return re.push(this.readSVarint());var pe=m(this);for(re=re||[];this.pos<pe;)re.push(this.readSVarint());return re},readPackedBoolean:function(re){if(this.type!==i.Bytes)return re.push(this.readBoolean());var pe=m(this);for(re=re||[];this.pos<pe;)re.push(this.readBoolean());return re},readPackedFloat:function(re){if(this.type!==i.Bytes)return re.push(this.readFloat());var pe=m(this);for(re=re||[];this.pos<pe;)re.push(this.readFloat());return re},readPackedDouble:function(re){if(this.type!==i.Bytes)return re.push(this.readDouble());var pe=m(this);for(re=re||[];this.pos<pe;)re.push(this.readDouble());return re},readPackedFixed32:function(re){if(this.type!==i.Bytes)return re.push(this.readFixed32());var pe=m(this);for(re=re||[];this.pos<pe;)re.push(this.readFixed32());return re},readPackedSFixed32:function(re){if(this.type!==i.Bytes)return re.push(this.readSFixed32());var pe=m(this);for(re=re||[];this.pos<pe;)re.push(this.readSFixed32());return re},readPackedFixed64:function(re){if(this.type!==i.Bytes)return re.push(this.readFixed64());var pe=m(this);for(re=re||[];this.pos<pe;)re.push(this.readFixed64());return re},readPackedSFixed64:function(re){if(this.type!==i.Bytes)return re.push(this.readSFixed64());var pe=m(this);for(re=re||[];this.pos<pe;)re.push(this.readSFixed64());return re},skip:function(re){var pe=7&re;if(pe===i.Varint)for(;this.buf[this.pos++]>127;);else if(pe===i.Bytes)this.pos=this.readVarint()+this.pos;else if(pe===i.Fixed32)this.pos+=4;else{if(pe!==i.Fixed64)throw new Error("Unimplemented type: "+pe);this.pos+=8}},writeTag:function(re,pe){this.writeVarint(re<<3|pe)},realloc:function(re){for(var pe=this.length||16;pe<this.pos+re;)pe*=2;if(pe!==this.length){var we=new Uint8Array(pe);we.set(this.buf),this.buf=we,this.length=pe}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(re){this.realloc(4),ue(this.buf,re,this.pos),this.pos+=4},writeSFixed32:function(re){this.realloc(4),ue(this.buf,re,this.pos),this.pos+=4},writeFixed64:function(re){this.realloc(8),ue(this.buf,-1&re,this.pos),ue(this.buf,Math.floor(re*f),this.pos+4),this.pos+=8},writeSFixed64:function(re){this.realloc(8),ue(this.buf,-1&re,this.pos),ue(this.buf,Math.floor(re*f),this.pos+4),this.pos+=8},writeVarint:function(re){(re=+re||0)>268435455||re<0?function(pe,we){var Pe,We;if(pe>=0?(Pe=pe%4294967296|0,We=pe/4294967296|0):(We=~(-pe/4294967296),4294967295^(Pe=~(-pe%4294967296))?Pe=Pe+1|0:(Pe=0,We=We+1|0)),pe>=18446744073709552e3||pe<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");we.realloc(10),function(je,Ze,mt){mt.buf[mt.pos++]=127&je|128,je>>>=7,mt.buf[mt.pos++]=127&je|128,je>>>=7,mt.buf[mt.pos++]=127&je|128,je>>>=7,mt.buf[mt.pos++]=127&je|128,mt.buf[mt.pos]=127&(je>>>=7)}(Pe,0,we),function(je,Ze){var mt=(7&je)<<4;Ze.buf[Ze.pos++]|=mt|((je>>>=3)?128:0),je&&(Ze.buf[Ze.pos++]=127&je|((je>>>=7)?128:0),je&&(Ze.buf[Ze.pos++]=127&je|((je>>>=7)?128:0),je&&(Ze.buf[Ze.pos++]=127&je|((je>>>=7)?128:0),je&&(Ze.buf[Ze.pos++]=127&je|((je>>>=7)?128:0),je&&(Ze.buf[Ze.pos++]=127&je)))))}(We,we)}(re,this):(this.realloc(4),this.buf[this.pos++]=127&re|(re>127?128:0),re<=127||(this.buf[this.pos++]=127&(re>>>=7)|(re>127?128:0),re<=127||(this.buf[this.pos++]=127&(re>>>=7)|(re>127?128:0),re<=127||(this.buf[this.pos++]=re>>>7&127))))},writeSVarint:function(re){this.writeVarint(re<0?2*-re-1:2*re)},writeBoolean:function(re){this.writeVarint(!!re)},writeString:function(re){re=String(re),this.realloc(4*re.length),this.pos++;var pe=this.pos;this.pos=function(Pe,We,je){for(var Ze,mt,Ye=0;Ye<We.length;Ye++){if((Ze=We.charCodeAt(Ye))>55295&&Ze<57344){if(!mt){Ze>56319||Ye+1===We.length?(Pe[je++]=239,Pe[je++]=191,Pe[je++]=189):mt=Ze;continue}if(Ze<56320){Pe[je++]=239,Pe[je++]=191,Pe[je++]=189,mt=Ze;continue}Ze=mt-55296<<10|Ze-56320|65536,mt=null}else mt&&(Pe[je++]=239,Pe[je++]=191,Pe[je++]=189,mt=null);Ze<128?Pe[je++]=Ze:(Ze<2048?Pe[je++]=Ze>>6|192:(Ze<65536?Pe[je++]=Ze>>12|224:(Pe[je++]=Ze>>18|240,Pe[je++]=Ze>>12&63|128),Pe[je++]=Ze>>6&63|128),Pe[je++]=63&Ze|128)}return je}(this.buf,re,this.pos);var we=this.pos-pe;we>=128&&b(pe,we,this),this.pos=pe-1,this.writeVarint(we),this.pos+=we},writeFloat:function(re){this.realloc(4),d.write(this.buf,re,this.pos,!0,23,4),this.pos+=4},writeDouble:function(re){this.realloc(8),d.write(this.buf,re,this.pos,!0,52,8),this.pos+=8},writeBytes:function(re){var pe=re.length;this.writeVarint(pe),this.realloc(pe);for(var we=0;we<pe;we++)this.buf[this.pos++]=re[we]},writeRawMessage:function(re,pe){this.pos++;var we=this.pos;re(pe,this);var Pe=this.pos-we;Pe>=128&&b(we,Pe,this),this.pos=we-1,this.writeVarint(Pe),this.pos+=Pe},writeMessage:function(re,pe,we){this.writeTag(re,i.Bytes),this.writeRawMessage(pe,we)},writePackedVarint:function(re,pe){pe.length&&this.writeMessage(re,N,pe)},writePackedSVarint:function(re,pe){pe.length&&this.writeMessage(re,D,pe)},writePackedBoolean:function(re,pe){pe.length&&this.writeMessage(re,I,pe)},writePackedFloat:function(re,pe){pe.length&&this.writeMessage(re,S,pe)},writePackedDouble:function(re,pe){pe.length&&this.writeMessage(re,V,pe)},writePackedFixed32:function(re,pe){pe.length&&this.writeMessage(re,O,pe)},writePackedSFixed32:function(re,pe){pe.length&&this.writeMessage(re,M,pe)},writePackedFixed64:function(re,pe){pe.length&&this.writeMessage(re,B,pe)},writePackedSFixed64:function(re,pe){pe.length&&this.writeMessage(re,X,pe)},writeBytesField:function(re,pe){this.writeTag(re,i.Bytes),this.writeBytes(pe)},writeFixed32Field:function(re,pe){this.writeTag(re,i.Fixed32),this.writeFixed32(pe)},writeSFixed32Field:function(re,pe){this.writeTag(re,i.Fixed32),this.writeSFixed32(pe)},writeFixed64Field:function(re,pe){this.writeTag(re,i.Fixed64),this.writeFixed64(pe)},writeSFixed64Field:function(re,pe){this.writeTag(re,i.Fixed64),this.writeSFixed64(pe)},writeVarintField:function(re,pe){this.writeTag(re,i.Varint),this.writeVarint(pe)},writeSVarintField:function(re,pe){this.writeTag(re,i.Varint),this.writeSVarint(pe)},writeStringField:function(re,pe){this.writeTag(re,i.Bytes),this.writeString(pe)},writeFloatField:function(re,pe){this.writeTag(re,i.Fixed32),this.writeFloat(pe)},writeDoubleField:function(re,pe){this.writeTag(re,i.Fixed64),this.writeDouble(pe)},writeBooleanField:function(re,pe){this.writeVarintField(re,!!pe)}},na}var on=w(yi());const Pn=3;function ru(d,i,u){i.glyphs=[],d===1&&u.readMessage(as,i)}function as(d,i,u){if(d===3){const{id:f,bitmap:y,width:m,height:_,left:b,top:N,advance:D}=u.readMessage(dm,{});i.glyphs.push({id:f,bitmap:new tm({width:m+2*Pn,height:_+2*Pn},y),metrics:{width:m,height:_,left:b,top:N,advance:D}})}else d===4?i.ascender=u.readSVarint():d===5&&(i.descender=u.readSVarint())}function dm(d,i,u){d===1?i.id=u.readVarint():d===2?i.bitmap=u.readBytes():d===3?i.width=u.readVarint():d===4?i.height=u.readVarint():d===5?i.left=u.readSVarint():d===6?i.top=u.readSVarint():d===7&&(i.advance=u.readVarint())}const RP=Pn,Hd={horizontal:1,vertical:2,horizontalOnly:3};class F1{constructor(){this.scale=1,this.fontStack="",this.image=null}static forText(i,u){const f=new F1;return f.scale=i||1,f.fontStack=u,f}static forImage(i){const u=new F1;return u.image=i,u}}class X0{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,u,f){const y=new X0;for(let m=0;m<i.sections.length;m++){const _=i.sections[m];_.image?y.addImageSection(_,f):y.addTextSection(_,u)}return y}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSections(){return this.sections}getSectionIndex(i){return this.sectionIndex[i]}getCodePoint(i){return this.text.codePointAt(i)}verticalizePunctuation(i){this.text=function(u,f){let y="";for(let m=0;m<u.length;m++){const _=u.charCodeAt(m+1)||null,b=u.charCodeAt(m-1)||null;y+=!f&&(_&&Sr(_)&&!Yr[u[m+1]]||b&&Sr(b)&&!Yr[u[m-1]])||!Yr[u[m]]?u[m]:Yr[u[m]]}return y}(this.text,i)}trim(){let i=0;for(let f=0;f<this.text.length&&pS[this.text.charCodeAt(f)];f++)i++;let u=this.text.length;for(let f=this.text.length-1;f>=0&&f>=i&&pS[this.text.charCodeAt(f)];f--)u--;this.text=this.text.substring(i,u),this.sectionIndex=this.sectionIndex.slice(i,u)}substring(i,u){const f=new X0;return f.text=this.text.substring(i,u),f.sectionIndex=this.sectionIndex.slice(i,u),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,u)=>Math.max(i,this.sections[u].scale),0)}addTextSection(i,u){this.text+=i.text,this.sections.push(F1.forText(i.scale,i.fontStack||u));const f=this.sections.length-1;for(let y=0;y<i.text.length;++y)this.sectionIndex.push(f)}addImageSection(i,u){const f=i.image?i.image.getPrimary():null;if(!f)return void en("Can't add FormattedSection with an empty image.");f.scaleSelf(u);const y=this.getNextImageSectionCharCode();y?(this.text+=String.fromCodePoint(y),this.sections.push(F1.forImage(f)),this.sectionIndex.push(this.sections.length-1)):en("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function TP(d,i,u,f,y,m,_,b,N,D,S,V,I,O,M,B=1){const X=X0.fromFeature(d,y,B);V===Hd.vertical&&X.verticalizePunctuation(I);let ee=[];const ue=function(Pe,We,je,Ze,mt,Ye){if(!Pe)return[];const At=[],xt=function(Ut,Mt,jt,ga,ma,Ya){let xa=0;for(let Oa=0;Oa<Ut.length();Oa++){const _a=Ut.getSection(Oa);xa+=z4(Ut.getCodePoint(Oa),_a,ga,ma,Mt,Ya)}return xa/Math.max(1,Math.ceil(xa/jt))}(Pe,We,je,Ze,mt,Ye),St=Pe.text.indexOf("")>=0;let Ot=0;for(let Ut=0;Ut<Pe.length();Ut++){const Mt=Pe.getSection(Ut),jt=Pe.getCodePoint(Ut);if(pS[jt]||(Ot+=z4(jt,Mt,Ze,mt,We,Ye)),Ut<Pe.length()-1){const ga=!((Nt=jt)<11904||!(vt["Bopomofo Extended"](Nt)||vt.Bopomofo(Nt)||vt["CJK Compatibility Forms"](Nt)||vt["CJK Compatibility Ideographs"](Nt)||vt["CJK Compatibility"](Nt)||vt["CJK Radicals Supplement"](Nt)||vt["CJK Strokes"](Nt)||vt["CJK Symbols and Punctuation"](Nt)||vt["CJK Unified Ideographs Extension A"](Nt)||vt["CJK Unified Ideographs"](Nt)||vt["Enclosed CJK Letters and Months"](Nt)||vt["Halfwidth and Fullwidth Forms"](Nt)||vt.Hiragana(Nt)||vt["Ideographic Description Characters"](Nt)||vt["Kangxi Radicals"](Nt)||vt["Katakana Phonetic Extensions"](Nt)||vt.Katakana(Nt)||vt["Vertical Forms"](Nt)||vt["Yi Radicals"](Nt)||vt["Yi Syllables"](Nt)));(aQ[jt]||ga||Mt.image)&&At.push(D4(Ut+1,Ot,xt,At,rQ(jt,Pe.getCodePoint(Ut+1),ga&&St),!1))}}var Nt;return M4(D4(Pe.length(),Ot,xt,At,0,!0))}(X,D,m,i,f,O),{processBidirectionalText:le,processStyledBidirectionalText:re}=ss;if(le&&X.sections.length===1){const Pe=le(X.toString(),ue);for(const We of Pe){const je=new X0;je.text=We,je.sections=X.sections;for(let Ze=0;Ze<We.length;Ze++)je.sectionIndex.push(0);ee.push(je)}}else if(re){const Pe=re(X.text,X.sectionIndex,ue);for(const We of Pe){const je=new X0;je.text=We[0],je.sectionIndex=We[1],je.sections=X.sections,ee.push(je)}}else ee=function(Pe,We){const je=[],Ze=Pe.text;let mt=0;for(const Ye of We)je.push(Pe.substring(mt,Ye)),mt=Ye;return mt<Ze.length&&je.push(Pe.substring(mt,Ze.length)),je}(X,ue);const pe=[],we={positionedLines:pe,text:X.toString(),top:S[1],bottom:S[1],left:S[0],right:S[0],writingMode:V,iconsInText:!1,verticalizable:!1,hasBaseline:!1};if(function(Pe,We,je,Ze,mt,Ye,At,xt,St,Ot,Nt,Ut){let Mt=0,jt=0,ga=0;const ma=xt==="right"?1:xt==="left"?0:.5;let Ya=!1;for(const or of mt){const Dr=or.getSections();for(const Jr of Dr){if(Jr.image)continue;const kr=We[Jr.fontStack];if(kr&&(Ya=kr.ascender!==void 0&&kr.descender!==void 0,!Ya))break}if(!Ya)break}let xa=0;for(const or of mt){or.trim();const Dr=or.getMaxScale(),Jr=(Dr-1)*Fe,kr={positionedGlyphs:[],lineOffset:0};Pe.positionedLines[xa]=kr;const dn=kr.positionedGlyphs;let Xr=0;if(!or.length()){jt+=Ye,++xa;continue}let wn=0,$n=0;for(let Lr=0;Lr<or.length();Lr++){const En=or.getSection(Lr),Yi=or.getSectionIndex(Lr),ls=or.getCodePoint(Lr);let ys=En.scale,Ns=null,Si=null,ul=null,Sc=Fe,Ao=0;St===Hd.vertical&&((Oa=ls)===12312||Oa===12313||Oa===12316||Oa===12540||Oa===12448)&&(St=Hd.horizontal);const xo=!(St===Hd.horizontal||!Nt&&!qa(ls)||Nt&&(pS[ls]||fr(ls)));if(En.image){const Ou=Ze.get(En.image.toString());if(!Ou)continue;ul=En.image,Pe.iconsInText=Pe.iconsInText||!0,Si=Ou.paddedRect;const Ll=Ou.displaySize;ys=ys*Fe/Ut,Ns={width:Ll[0],height:Ll[1],left:0,top:-3,advance:xo?Ll[1]:Ll[0],localGlyph:!1},Ao=Ya?-Ns.height*ys:Dr*Fe-17-Ll[1]*ys,Sc=Ns.advance;const Yh=(xo?Ll[0]:Ll[1])*ys-Fe*Dr;Yh>0&&Yh>Xr&&(Xr=Yh)}else{const Ou=je[En.fontStack];if(!Ou)continue;Ou[ls]&&(Si=Ou[ls]);const Ll=We[En.fontStack];if(!Ll)continue;const Yh=Ll.glyphs[ls];if(!Yh)continue;if(Ns=Yh.metrics,Sc=ls!==8203?Fe:0,Ya){const ig=Ll.ascender!==void 0?Math.abs(Ll.ascender):0,Df=Ll.descender!==void 0?Math.abs(Ll.descender):0,Ap=(ig+Df)*ys;wn<Ap&&(wn=Ap,$n=(ig-Df)/2*ys),Ao=-ig*ys}else Ao=(Dr-ys)*Fe-17}xo?(Pe.verticalizable=!0,dn.push({glyph:ls,image:ul,x:Mt,y:jt+Ao,vertical:xo,scale:ys,localGlyph:Ns.localGlyph,fontStack:En.fontStack,sectionIndex:Yi,metrics:Ns,rect:Si}),Mt+=Sc*ys+Ot):(dn.push({glyph:ls,image:ul,x:Mt,y:jt+Ao,vertical:xo,scale:ys,localGlyph:Ns.localGlyph,fontStack:En.fontStack,sectionIndex:Yi,metrics:Ns,rect:Si}),Mt+=Ns.advance*ys+Ot)}dn.length!==0&&(ga=Math.max(Mt-Ot,ga),Ya?I4(dn,ma,Xr,$n,Ye*Dr/2):I4(dn,ma,Xr,0,Ye/2)),Mt=0;const Ei=Ye*Dr+Xr;kr.lineOffset=Math.max(Xr,Jr),jt+=Ei,++xa}var Oa;const _a=jt,{horizontalAlign:Ar,verticalAlign:$a}=SP(At);(function(or,Dr,Jr,kr,dn,Xr){const wn=(Dr-Jr)*dn,$n=-Xr*kr;for(const Ei of or)for(const Lr of Ei.positionedGlyphs)Lr.x+=wn,Lr.y+=$n})(Pe.positionedLines,ma,Ar,$a,ga,_a),Pe.top+=-$a*_a,Pe.bottom=Pe.top+_a,Pe.left+=-Ar*ga,Pe.right=Pe.left+ga,Pe.hasBaseline=Ya}(we,i,u,f,ee,_,b,N,V,D,I,M),!function(Pe){for(const We of Pe)if(We.positionedGlyphs.length!==0)return!1;return!0}(pe))return we}const pS={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},aQ={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function z4(d,i,u,f,y,m){if(i.image){const _=f.get(i.image.toString());return _?_.displaySize[0]*i.scale*Fe/m+y:0}{const _=u[i.fontStack],b=_&&_.glyphs[d];return b?b.metrics.advance*i.scale+y:0}}function O4(d,i,u,f){const y=Math.pow(d-i,2);return f?d<i?y/2:2*y:y+Math.abs(u)*u}function rQ(d,i,u){let f=0;return d===10&&(f-=1e4),u&&(f+=150),d!==40&&d!==65288||(f+=50),i!==41&&i!==65289||(f+=50),f}function D4(d,i,u,f,y,m){let _=null,b=O4(i,u,y,m);for(const N of f){const D=O4(i-N.x,u,y,m)+N.badness;D<=b&&(_=N,b=D)}return{index:d,x:i,priorBreak:_,badness:b}}function M4(d){return d?M4(d.priorBreak).concat(d.index):[]}function SP(d){let i=.5,u=.5;switch(d){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(d){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:i,verticalAlign:u}}function I4(d,i,u,f,y){if(!(i||u||f||y))return;const m=d.length-1,_=d[m],b=(_.x+_.metrics.advance*_.scale)*i;for(let N=0;N<=m;N++)d[N].x-=b,d[N].y+=u+f+y}function nQ(d,i,u,f){const{horizontalAlign:y,verticalAlign:m}=SP(f),_=u[0]-d.displaySize[0]*y,b=u[1]-d.displaySize[1]*m;return{imagePrimary:d,imageSecondary:i,top:b,bottom:b+d.displaySize[1],left:_,right:_+d.displaySize[0]}}function L4(d,i,u,f,y,m){const _=d.imagePrimary;let b;if(_.content){const X=_.content,ee=_.pixelRatio||1;b=[X[0]/ee,X[1]/ee,_.displaySize[0]-X[2]/ee,_.displaySize[1]-X[3]/ee]}const N=i.left*m,D=i.right*m;let S,V,I,O;u==="width"||u==="both"?(O=y[0]+N-f[3],V=y[0]+D+f[1]):(O=y[0]+(N+D-_.displaySize[0])/2,V=O+_.displaySize[0]);const M=i.top*m,B=i.bottom*m;return u==="height"||u==="both"?(S=y[1]+M-f[0],I=y[1]+B+f[2]):(S=y[1]+(M+B-_.displaySize[1])/2,I=S+_.displaySize[1]),{imagePrimary:_,imageSecondary:void 0,top:S,right:V,bottom:I,left:O,collisionPadding:b}}class Qm extends Bt{constructor(i,u,f,y,m){super(i,u),this.angle=y,this.z=f,m!==void 0&&(this.segment=m)}clone(){return new Qm(this.x,this.y,this.z,this.angle,this.segment)}}function F4(d,i,u,f,y){if(i.segment===void 0)return!0;let m=i,_=i.segment+1,b=0;for(;b>-u/2;){if(_--,_<0)return!1;b-=d[_].dist(m),m=d[_]}b+=d[_].dist(d[_+1]),_++;const N=[];let D=0;for(;b<u/2;){const S=d[_],V=d[_+1];if(!V)return!1;let I=d[_-1].angleTo(S)-S.angleTo(V);for(I=Math.abs((I+3*Math.PI)%(2*Math.PI)-Math.PI),N.push({distance:b,angleDelta:I}),D+=I;b-N[0].distance>f;)D-=N.shift().angleDelta;if(D>y)return!1;_++,b+=S.dist(V)}return!0}function U4(d){let i=0;for(let u=0;u<d.length-1;u++)i+=d[u].dist(d[u+1]);return i}function k4(d,i,u){return d?.6*i*u:0}function B4(d,i){return Math.max(d?d.right-d.left:0,i?i.right-i.left:0)}function iQ(d,i,u,f,y,m){const _=k4(u,y,m),b=B4(u,f)*m;let N=0;const D=U4(d)/2;for(let S=0;S<d.length-1;S++){const V=d[S],I=d[S+1],O=V.dist(I);if(N+O>D){const M=(D-N)/O,B=hr(V.x,I.x,M),X=hr(V.y,I.y,M),ee=new Qm(B,X,0,I.angleTo(V),S);return!_||F4(d,ee,b,_,i)?ee:void 0}N+=O}}function sQ(d,i,u,f,y,m,_,b,N){const D=k4(f,m,_),S=B4(f,y),V=S*_,I=d[0].x===0||d[0].x===N||d[0].y===0||d[0].y===N;return i-V<i/4&&(i=V+i/4),G4(d,I?i/2*b%i:(S/2+2*m)*_*b%i,i,D,u,V,I,!1,N)}function G4(d,i,u,f,y,m,_,b,N){const D=m/2,S=U4(d);let V=0,I=i-u,O=[];for(let M=0;M<d.length-1;M++){const B=d[M],X=d[M+1],ee=B.dist(X),ue=X.angleTo(B);for(;I+u<V+ee;){I+=u;const le=(I-V)/ee,re=hr(B.x,X.x,le),pe=hr(B.y,X.y,le);if(re>=0&&re<N&&pe>=0&&pe<N&&I-D>=0&&I+D<=S){const we=new Qm(re,pe,0,ue,M);f&&!F4(d,we,m,f,y)||O.push(we)}}V+=ee}return b||O.length||_||(O=G4(d,V/2,u,f,y,m,_,!0,N)),O}function j4(d,i,u,f,y){const m=[];for(let _=0;_<d.length;_++){const b=d[_];let N;for(let D=0;D<b.length-1;D++){let S=b[D],V=b[D+1];S.x<i&&V.x<i||(S.x<i?S=new Bt(i,S.y+(i-S.x)/(V.x-S.x)*(V.y-S.y))._round():V.x<i&&(V=new Bt(i,S.y+(i-S.x)/(V.x-S.x)*(V.y-S.y))._round()),S.y<u&&V.y<u||(S.y<u?S=new Bt(S.x+(u-S.y)/(V.y-S.y)*(V.x-S.x),u)._round():V.y<u&&(V=new Bt(S.x+(u-S.y)/(V.y-S.y)*(V.x-S.x),u)._round()),S.x>=f&&V.x>=f||(S.x>=f?S=new Bt(f,S.y+(f-S.x)/(V.x-S.x)*(V.y-S.y))._round():V.x>=f&&(V=new Bt(f,S.y+(f-S.x)/(V.x-S.x)*(V.y-S.y))._round()),S.y>=y&&V.y>=y||(S.y>=y?S=new Bt(S.x+(y-S.y)/(V.y-S.y)*(V.x-S.x),y)._round():V.y>=y&&(V=new Bt(S.x+(y-S.y)/(V.y-S.y)*(V.x-S.x),y)._round()),N&&S.equals(N[N.length-1])||(N=[S],m.push(N)),N.push(V)))))}}return m}function Z4(d){let i=0,u=0;for(const _ of d)i+=_.w*_.h,u=Math.max(u,_.w);d.sort((_,b)=>b.h-_.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),u),h:1/0}];let y=0,m=0;for(const _ of d)for(let b=f.length-1;b>=0;b--){const N=f[b];if(!(_.w>N.w||_.h>N.h)){if(_.x=N.x,_.y=N.y,m=Math.max(m,_.y+_.h),y=Math.max(y,_.x+_.w),_.w===N.w&&_.h===N.h){const D=f.pop();b<f.length&&(f[b]=D)}else _.h===N.h?(N.x+=_.w,N.w-=_.w):_.w===N.w?(N.y+=_.h,N.h-=_.h):(f.push({x:N.x+_.w,y:N.y,w:N.w-_.w,h:_.h}),N.y+=_.h,N.h-=_.h);break}}return{w:y,h:m,fill:i/(y*m)||0}}Pt(Qm,"Anchor");const J0=1;class U1{static getImagePositionScale(i,u,f){if(u&&i&&i.options&&i.options.transform){const y=i.options.transform;return{x:y.a,y:y.d}}return{x:f,y:f}}constructor(i,u,f,y){this.paddedRect=i;const{pixelRatio:m,version:_,stretchX:b,stretchY:N,content:D,sdf:S,usvg:V}=u;this.pixelRatio=m,this.stretchX=b,this.stretchY=N,this.content=D,this.version=_,this.padding=f,this.sdf=S,this.scale=U1.getImagePositionScale(y,V,m)}get tl(){return[this.paddedRect.x+this.padding,this.paddedRect.y+this.padding]}get br(){return[this.paddedRect.x+this.paddedRect.w-this.padding,this.paddedRect.y+this.paddedRect.h-this.padding]}get displaySize(){return[(this.paddedRect.w-2*this.padding)/this.scale.x,(this.paddedRect.h-2*this.padding)/this.scale.y]}}function q4(d,i,u){const f=ku.parse(d),y=function(m,_,b=[1,1]){return{x:0,y:0,w:(m.data?m.data.width:m.width*b[0])+2*_,h:(m.data?m.data.height:m.height*b[1])+2*_}}(i,u,[f.options.transform.a,f.options.transform.d]);return{bin:y,imagePosition:new U1(y,i,u,f),imageVariant:f}}class H4{constructor(i,u,f){const y=new Map,m=new Map;this.haveRenderCallbacks=[];const _=[];this.addImages(i,y,J0,_),this.addImages(u,m,2,_);const{w:b,h:N}=Z4(_),D=new wl({width:b||1,height:N||1});for(const[S,V]of i.entries()){const I=y.get(S).paddedRect;wl.copy(V.data,D,{x:0,y:0},{x:I.x+J0,y:I.y+J0},V.data,f,V.sdf)}for(const[S,V]of u.entries()){const I=m.get(S),O=I.paddedRect;let M=I.padding;const B=O.x+M,X=O.y+M,ee=V.data.width,ue=V.data.height;M=M>1?M-1:M,wl.copy(V.data,D,{x:0,y:0},{x:B,y:X},V.data,f),wl.copy(V.data,D,{x:0,y:ue-M},{x:B,y:X-M},{width:ee,height:M},f),wl.copy(V.data,D,{x:0,y:0},{x:B,y:X+ue},{width:ee,height:M},f),wl.copy(V.data,D,{x:ee-M,y:0},{x:B-M,y:X},{width:M,height:ue},f),wl.copy(V.data,D,{x:0,y:0},{x:B+ee,y:X},{width:M,height:ue},f),wl.copy(V.data,D,{x:ee-M,y:ue-M},{x:B-M,y:X-M},{width:M,height:M},f),wl.copy(V.data,D,{x:0,y:ue-M},{x:B+ee,y:X-M},{width:M,height:M},f),wl.copy(V.data,D,{x:0,y:0},{x:B+ee,y:X+ue},{width:M,height:M},f),wl.copy(V.data,D,{x:ee-M,y:0},{x:B-M,y:X+ue},{width:M,height:M},f)}this.lut=f,this.image=D,this.iconPositions=y,this.patternPositions=m}addImages(i,u,f,y){for(const[m,_]of i.entries()){const{bin:b,imagePosition:N,imageVariant:D}=q4(m,_,f);u.set(m,N),y.push(b),_.hasRenderCallback&&this.haveRenderCallbacks.push(D.id)}}patchUpdatedImages(i,u,f){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(y=>i.hasImage(y,f)),i.dispatchRenderCallbacks(this.haveRenderCallbacks,f);for(const y of i.getUpdatedImages(f)){for(const m of this.iconPositions.keys()){const _=ku.parse(m);if(Fo.isEqual(_.id,y)){const b=i.getImage(y,f);this.patchUpdatedImage(this.iconPositions.get(m),b,u)}}for(const m of this.patternPositions.keys()){const _=ku.parse(m);if(Fo.isEqual(_.id,y)){const b=i.getImage(y,f);this.patchUpdatedImage(this.patternPositions.get(m),b,u)}}}}patchUpdatedImage(i,u,f){if(!i||!u||i.version===u.version)return;i.version=u.version;const[y,m]=i.tl,_=i.sdf;if(this.lut||_){const b={width:u.data.width,height:u.data.height},N=new wl(b);wl.copy(u.data,N,{x:0,y:0},{x:0,y:0},b,this.lut,_),f.update(N,{position:{x:y,y:m}})}else f.update(u.data,{position:{x:y,y:m}})}}Pt(U1,"ImagePosition"),Pt(H4,"ImageAtlas");const mS=1e20;function $4(d,i,u,f,y,m,_,b,N){for(let D=i;D<i+f;D++)K4(d,u*m+D,m,y,_,b,N);for(let D=u;D<u+y;D++)K4(d,D*m+i,1,f,_,b,N)}function K4(d,i,u,f,y,m,_){m[0]=0,_[0]=-1e20,_[1]=mS,y[0]=d[i];for(let b=1,N=0,D=0;b<f;b++){y[b]=d[i+b*u];const S=b*b;do{const V=m[N];D=(y[b]-y[V]+S-V*V)/(b-V)/2}while(D<=_[N]&&--N>-1);N++,m[N]=b,_[N]=D,_[N+1]=mS}for(let b=0,N=0;b<f;b++){for(;_[N+1]<b;)N++;const D=m[N],S=b-D;d[i+b*u]=y[D]+S*S}}const pp=2,CP={none:0,ideographs:1,all:2};class Q0{constructor(i,u,f){this.requestManager=i,this.localGlyphMode=u,this.localFontFamily=f,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(i,u){this.urls[u]=i}getGlyphs(i,u,f){const y=[],m=this.urls[u]||xe.GLYPHS_URL;for(const _ in i)for(const b of i[_])y.push({stack:_,id:b});Dn(y,({stack:_,id:b},N)=>{let D=this.entries[_];D||(D=this.entries[_]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let S=D.glyphs[b];if(S!==void 0)return void N(null,{stack:_,id:b,glyph:S});if(S=this._tinySDF(D,_,b),S)return D.glyphs[b]=S,void N(null,{stack:_,id:b,glyph:S});const V=Math.floor(b/256);if(256*V>65535)return en("glyphs > 65535 not supported"),void N(null,{stack:_,id:b,glyph:S});if(D.ranges[V])return void N(null,{stack:_,id:b,glyph:S});let I=D.requests[V];I||(I=D.requests[V]=[],Q0.loadGlyphRange(_,V,m,this.requestManager,(O,M)=>{if(M){D.ascender=M.ascender,D.descender=M.descender;for(const B in M.glyphs)this._doesCharSupportLocalGlyph(+B)||(D.glyphs[+B]=M.glyphs[+B]);D.ranges[V]=!0}for(const B of I)B(O,M);delete D.requests[V]})),I.push((O,M)=>{O?N(O):M&&N(null,{stack:_,id:b,glyph:M.glyphs[b]||null})})},(_,b)=>{if(_)f(_);else if(b){const N={};for(const{stack:D,id:S,glyph:V}of b)N[D]===void 0&&(N[D]={}),N[D].glyphs===void 0&&(N[D].glyphs={}),N[D].glyphs[S]=V&&{id:V.id,bitmap:V.bitmap.clone(),metrics:V.metrics},N[D].ascender=this.entries[D].ascender,N[D].descender=this.entries[D].descender;f(null,N)}})}_doesCharSupportLocalGlyph(i){return this.localGlyphMode!==CP.none&&(this.localGlyphMode===CP.all?!!this.localFontFamily:!!this.localFontFamily&&(vt["CJK Unified Ideographs"](i)||vt["Hangul Syllables"](i)||vt.Hiragana(i)||vt.Katakana(i)||vt["CJK Symbols and Punctuation"](i)||vt["CJK Unified Ideographs Extension A"](i)||vt["CJK Unified Ideographs Extension B"](i)||vt.Osage(i)))}_tinySDF(i,u,f){const y=this.localFontFamily;if(!y||!this._doesCharSupportLocalGlyph(f))return;let m=i.tinySDF;if(!m){let B="400";/bold/i.test(u)?B="900":/medium/i.test(u)?B="500":/light/i.test(u)&&(B="200"),m=i.tinySDF=new Q0.TinySDF({fontFamily:y,fontWeight:B,fontSize:24*pp,buffer:3*pp,radius:8*pp}),m.fontWeight=B}if(this.localGlyphs[m.fontWeight][f])return this.localGlyphs[m.fontWeight][f];const _=String.fromCodePoint(f),{data:b,width:N,height:D,glyphWidth:S,glyphHeight:V,glyphLeft:I,glyphTop:O,glyphAdvance:M}=m.draw(_);return this.localGlyphs[m.fontWeight][f]={id:f,bitmap:new tm({width:N,height:D},b),metrics:{width:S/pp,height:V/pp,left:I/pp,top:O/pp-27,advance:M/pp,localGlyph:!0}}}}Q0.loadGlyphRange=function(d,i,u,f,y){const m=256*i,_=m+255,b=f.transformRequest(f.normalizeGlyphsURL(u).replace("{fontstack}",d).replace("{range}",`${m}-${_}`),ws.Glyphs);zi(b,(N,D)=>{if(N)y(N);else if(D){const S={},V=function(I){return new on(I).readFields(ru,{})}(D);for(const I of V.glyphs)S[I.id]=I;y(null,{glyphs:S,ascender:V.ascender,descender:V.descender})}})},Q0.TinySDF=class{constructor({fontSize:d=24,buffer:i=3,radius:u=8,cutoff:f=.25,fontFamily:y="sans-serif",fontWeight:m="normal",fontStyle:_="normal"}={}){this.buffer=i,this.cutoff=f,this.radius=u;const b=this.size=d+4*i,N=this._createCanvas(b),D=this.ctx=N.getContext("2d",{willReadFrequently:!0});D.font=`${_} ${m} ${d}px ${y}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(b*b),this.gridInner=new Float64Array(b*b),this.f=new Float64Array(b),this.z=new Float64Array(b+1),this.v=new Uint16Array(b)}_createCanvas(d){const i=document.createElement("canvas");return i.width=i.height=d,i}draw(d){const{width:i,actualBoundingBoxAscent:u,actualBoundingBoxDescent:f,actualBoundingBoxLeft:y,actualBoundingBoxRight:m}=this.ctx.measureText(d),_=Math.ceil(u),b=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(m-y))),N=Math.min(this.size-this.buffer,_+Math.ceil(f)),D=b+2*this.buffer,S=N+2*this.buffer,V=Math.max(D*S,0),I=new Uint8ClampedArray(V),O={data:I,width:D,height:S,glyphWidth:b,glyphHeight:N,glyphTop:_,glyphLeft:0,glyphAdvance:i};if(b===0||N===0)return O;const{ctx:M,buffer:B,gridInner:X,gridOuter:ee}=this;M.clearRect(B,B,b,N),M.fillText(d,B,B+_);const ue=M.getImageData(B,B,b,N);ee.fill(mS,0,V),X.fill(0,0,V);for(let le=0;le<N;le++)for(let re=0;re<b;re++){const pe=ue.data[4*(le*b+re)+3]/255;if(pe===0)continue;const we=(le+B)*D+re+B;if(pe===1)ee[we]=0,X[we]=mS;else{const Pe=.5-pe;ee[we]=Pe>0?Pe*Pe:0,X[we]=Pe<0?Pe*Pe:0}}$4(ee,0,0,D,S,D,this.f,this.v,this.z),$4(X,B,B,b,N,D,this.f,this.v,this.z);for(let le=0;le<V;le++){const re=Math.sqrt(ee[le])-Math.sqrt(X[le]);I[le]=Math.round(255-255*(re/this.radius+this.cutoff))}return O}};const bA=J0;function W4(d,i){return d+i[1]-i[0]}function Y4(d,i,u,f,y=1){const m=[],_=d.imagePrimary,b=_.pixelRatio,N=_.paddedRect.w-2*bA,D=_.paddedRect.h-2*bA,S=(d.right-d.left)*y,V=(d.bottom-d.top)*y,I=_.stretchX||[[0,N]],O=_.stretchY||[[0,D]],M=I.reduce(W4,0),B=O.reduce(W4,0),X=N-M,ee=D-B;let ue=0,le=M,re=0,pe=B,we=0,Pe=X,We=0,je=ee;if(_.content&&f){const mt=_.content;ue=yS(I,0,mt[0]),re=yS(O,0,mt[1]),le=yS(I,mt[0],mt[2]),pe=yS(O,mt[1],mt[3]),we=mt[0]-ue,We=mt[1]-re,Pe=mt[2]-mt[0]-le,je=mt[3]-mt[1]-pe}const Ze=(mt,Ye,At,xt)=>{const St=gS(mt.stretch-ue,le,S,d.left*y),Ot=AS(mt.fixed-we,Pe,mt.stretch,M),Nt=gS(Ye.stretch-re,pe,V,d.top*y),Ut=AS(Ye.fixed-We,je,Ye.stretch,B),Mt=gS(At.stretch-ue,le,S,d.left*y),jt=AS(At.fixed-we,Pe,At.stretch,M),ga=gS(xt.stretch-re,pe,V,d.top*y),ma=AS(xt.fixed-We,je,xt.stretch,B),Ya=new Bt(St,Nt),xa=new Bt(Mt,Nt),Oa=new Bt(Mt,ga),_a=new Bt(St,ga),Ar=new Bt(Ot/b,Ut/b),$a=new Bt(jt/b,ma/b),or=i*Math.PI/180;if(or){const wn=Math.sin(or),$n=Math.cos(or),Ei=[$n,-wn,wn,$n];Ya._matMult(Ei),xa._matMult(Ei),_a._matMult(Ei),Oa._matMult(Ei)}const Dr=mt.stretch+mt.fixed,Jr=At.stretch+At.fixed,kr=Ye.stretch+Ye.fixed,dn=xt.stretch+xt.fixed,Xr=d.imageSecondary;return{tl:Ya,tr:xa,bl:_a,br:Oa,texPrimary:{x:_.paddedRect.x+bA+Dr,y:_.paddedRect.y+bA+kr,w:Jr-Dr,h:dn-kr},texSecondary:Xr?{x:Xr.paddedRect.x+bA+Dr,y:Xr.paddedRect.y+bA+kr,w:Jr-Dr,h:dn-kr}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ar,pixelOffsetBR:$a,minFontScaleX:Pe/b/S,minFontScaleY:je/b/V,isSDF:u}};if(f&&(_.stretchX||_.stretchY)){const mt=X4(I,X,M),Ye=X4(O,ee,B);for(let At=0;At<mt.length-1;At++){const xt=mt[At],St=mt[At+1];for(let Ot=0;Ot<Ye.length-1;Ot++)m.push(Ze(xt,Ye[Ot],St,Ye[Ot+1]))}}else m.push(Ze({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:N+1},{fixed:0,stretch:D+1}));return m}function yS(d,i,u){let f=0;for(const y of d)f+=Math.max(i,Math.min(u,y[1]))-Math.max(i,Math.min(u,y[0]));return f}function X4(d,i,u){const f=[{fixed:-1,stretch:0}];for(const[y,m]of d){const _=f[f.length-1];f.push({fixed:y-_.stretch,stretch:_.stretch}),f.push({fixed:y-_.stretch,stretch:_.stretch+(m-y)})}return f.push({fixed:i+bA,stretch:u}),f}function gS(d,i,u,f){return d/i*u+f}function AS(d,i,u,f){return d-i*u/f}function oQ(d,i,u,f){const y=i+d.positionedLines[f].lineOffset;return f===0?u+y/2:u+(y+(i+d.positionedLines[f-1].lineOffset))/2}function lQ(d,i=1,u=!1){let f=1/0,y=1/0,m=-1/0,_=-1/0;const b=d[0];for(let O=0;O<b.length;O++){const M=b[O];(!O||M.x<f)&&(f=M.x),(!O||M.y<y)&&(y=M.y),(!O||M.x>m)&&(m=M.x),(!O||M.y>_)&&(_=M.y)}const N=Math.min(m-f,_-y);let D=N/2;const S=new cc([],uQ);if(N===0)return new Bt(f,y);for(let O=f;O<m;O+=N)for(let M=y;M<_;M+=N)S.push(new e_(O+D,M+D,D,d));let V=function(O){let M=0,B=0,X=0;const ee=O[0];for(let ue=0,le=ee.length,re=le-1;ue<le;re=ue++){const pe=ee[ue],we=ee[re],Pe=pe.x*we.y-we.x*pe.y;B+=(pe.x+we.x)*Pe,X+=(pe.y+we.y)*Pe,M+=3*Pe}return new e_(B/M,X/M,0,O)}(d),I=S.length;for(;S.length;){const O=S.pop();(O.d>V.d||!V.d)&&(V=O,u&&console.log("found best %d after %d probes",Math.round(1e4*O.d)/1e4,I)),O.max-V.d<=i||(D=O.h/2,S.push(new e_(O.p.x-D,O.p.y-D,D,d)),S.push(new e_(O.p.x+D,O.p.y-D,D,d)),S.push(new e_(O.p.x-D,O.p.y+D,D,d)),S.push(new e_(O.p.x+D,O.p.y+D,D,d)),I+=4)}return u&&(console.log(`num probes: ${I}`),console.log(`best distance: ${V.d}`)),V.p}function uQ(d,i){return i.max-d.max}class e_{constructor(i,u,f,y){this.p=new Bt(i,u),this.h=f,this.d=function(m,_){let b=!1,N=1/0;for(let D=0;D<_.length;D++){const S=_[D];for(let V=0,I=S.length,O=I-1;V<I;O=V++){const M=S[V],B=S[O];M.y>m.y!=B.y>m.y&&m.x<(B.x-M.x)*(m.y-M.y)/(B.y-M.y)+M.x&&(b=!b),N=Math.min(N,ht(m,M,B))}}return(b?1:-1)*Math.sqrt(N)}(this.p,y),this.max=this.d+this.h*Math.SQRT2}}const bP=Number.POSITIVE_INFINITY,cQ=Math.sqrt(2);function J4(d,[i,u]){let f=0,y=0;if(u===bP){i<0&&(i=0);const m=i/cQ;switch(d){case"top-right":case"top-left":y=m-7;break;case"bottom-right":case"bottom-left":y=7-m;break;case"bottom":y=7-i;break;case"top":y=i-7}switch(d){case"top-right":case"bottom-right":f=-m;break;case"top-left":case"bottom-left":f=m;break;case"left":f=i;break;case"right":f=-i}}else{switch(i=Math.abs(i),u=Math.abs(u),d){case"top-right":case"top-left":case"top":y=u-7;break;case"bottom-right":case"bottom-left":case"bottom":y=7-u}switch(d){case"top-right":case"bottom-right":case"right":f=-i;break;case"top-left":case"bottom-left":case"left":f=i}}return[f,y]}function Q4(d,i,u,f,y,m,_,b){if(!d)return;const N=Ft(i,u,f,y,m);return d.scaleSelf(N*b*_)}function eL(d,i,u,f,y,m,_,b){return{iconPrimary:Q4(d.getPrimary(),i,u,f,y,m,_,b),iconSecondary:Q4(d.getSecondary(),i,u,f,y,m,_,b)}}function tL(d,i,u,f){if(!d)return;const y=i.get(u.toString());if(d.imagePrimary=y,f){const m=i.get(f.toString());d.imageSecondary=m}}function dQ(d,i){for(const u in d.horizontal)aL(d.horizontal[u],i);aL(d.vertical,i)}function aL(d,i){if(d){for(const u of d.positionedLines)for(const f of u.positionedGlyphs)if(f.image!==null){const y=f.image.toString();f.rect=i.get(y).paddedRect}}}function xP(d){switch(d){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function hQ(d,i,u,f,y,m,_,b,N){const D=PP(m.horizontal)||m.vertical,S=u.get("icon-text-fit-padding").evaluate(f,{},y);let V,I=i;return i&&N!=="none"&&(d.allowVerticalPlacement&&m.vertical&&(V=L4(i,m.vertical,N,S,b,_)),D&&(I=L4(i,D,N,S,b,_))),{defaultShapedIcon:I,verticallyShapedIcon:V}}function fQ(d,i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,X,ee,ue,le){let re=_.textMaxSize.evaluate(i,{},I);re===void 0?re=b*_.textScaleFactor:re*=_.textScaleFactor;const pe=d.layers[0].layout,we=PP(u.horizontal)||u.vertical,Pe=O.name==="globe",We=Fe,je=d.tilePixelRatio*re/We,Ze=(Ot=d.overscaling,d.zoom>18&&Ot>2&&(Ot>>=1),Math.max(Na/(512*Ot),1)*pe.get("symbol-spacing")),mt=pe.get("text-padding")*d.tilePixelRatio,Ye=pe.get("icon-padding")*d.tilePixelRatio,At=za(pe.get("text-max-angle")),xt=pe.get("icon-rotation-alignment")==="map"&&le!=="point",St=Ze/2;var Ot;d.hasAnyIconTextFit===!1&&X!=="none"&&(d.hasAnyIconTextFit=!0);const Nt=i.properties?+i.properties[Ef]:null,Ut=Nt&&d.elevationFeatureIdToIndex?d.elevationFeatureIdToIndex.get(Nt):65535,Mt=(jt,ga,ma)=>{if(ga.x<0||ga.x>=Na||ga.y<0||ga.y>=Na)return;let Ya=null;if(Pe){const{x:xa,y:Oa,z:_a}=O.projectTilePoint(ga.x,ga.y,ma);Ya={anchor:new Qm(xa,Oa,_a,0,void 0),up:O.upVector(ma,ga.x,ga.y)}}(function(xa,Oa,_a,Ar,$a,or,Dr,Jr,kr,dn,Xr,wn,$n,Ei,Lr,En,Yi,ls,ys,Ns,Si,ul,Sc,Ao,xo,Ou,Ll,Yh,ig){const Df=xa.addToLineVertexArray(Oa,Ar);let Ap,sg,og,VA,FF,UF,kF,BF=0,GF=0,jF=0,ZF=0,oE=-1,lE=-1;const hm={};let qF=oo("");const zA=_a?_a.anchor:Oa,uE=Yh!=="none";let cE=0,dE=0;if(kr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[cE,dE]=kr.layout.get("text-offset").evaluate(Si,{},xo).map(Xh=>Xh*Fe):(cE=kr.layout.get("text-radial-offset").evaluate(Si,{},xo)*Fe,dE=bP),xa.allowVerticalPlacement&&$a.vertical){const Xh=$a.vertical;if(Lr)UF=EP(Xh),Jr&&(kF=EP(Jr));else{const $d=kr.layout.get("text-rotate").evaluate(Si,{},xo)+90;og=_S(dn,zA,Oa,Xr,wn,$n,Xh,Ei,$d,En),Jr&&(VA=_S(dn,zA,Oa,Xr,wn,$n,Jr,ls,$d))}}if(or){const Xh=xa.iconSizeData,$d=kr.layout.get("icon-rotate").evaluate(Si,{},xo),nw=Y4(or,$d,Sc,uE,ul.iconScaleFactor),fE=Jr?Y4(Jr,$d,Sc,uE,ul.iconScaleFactor):void 0;sg=_S(dn,zA,Oa,Xr,wn,$n,or,ls,$d,null),BF=4*nw.length;let OA=null;Xh.kind==="source"?(OA=[dt*kr.layout.get("icon-size").evaluate(Si,{},xo)*ul.iconScaleFactor],OA[0]>tg&&en(`${xa.layerIds[0]}: Value for "icon-size" is >= ${k1}. Reduce your "icon-size".`)):Xh.kind==="composite"&&(OA=[dt*ul.compositeIconSizes[0].evaluate(Si,{},xo)*ul.iconScaleFactor,dt*ul.compositeIconSizes[1].evaluate(Si,{},xo)*ul.iconScaleFactor],(OA[0]>tg||OA[1]>tg)&&en(`${xa.layerIds[0]}: Value for "icon-size" is >= ${k1}. Reduce your "icon-size".`)),xa.addSymbols(xa.icon,nw,OA,Ns,ys,Si,!1,_a,Oa,Df.lineStartIndex,Df.lineLength,-1,Ao,xo,Ou,Ll),oE=xa.icon.placedSymbolArray.length-1,fE&&(GF=4*fE.length,xa.addSymbols(xa.icon,fE,OA,Ns,ys,Si,Hd.vertical,_a,Oa,Df.lineStartIndex,Df.lineLength,-1,Ao,xo,Ou,Ll),lE=xa.icon.placedSymbolArray.length-1)}for(const Xh in $a.horizontal){const $d=$a.horizontal[Xh];Ap||(qF=oo($d.text),Lr?FF=EP($d):Ap=_S(dn,zA,Oa,Xr,wn,$n,$d,Ei,kr.layout.get("text-rotate").evaluate(Si,{},xo),En));const nw=$d.positionedLines.length===1;if(jF+=rL(xa,_a,Oa,$d,Dr,kr,Lr,Si,En,Df,$a.vertical?Hd.horizontal:Hd.horizontalOnly,nw?Object.keys($a.horizontal):[Xh],hm,oE,ul,Ao,xo,Ou),nw)break}$a.vertical&&(ZF+=rL(xa,_a,Oa,$a.vertical,Dr,kr,Lr,Si,En,Df,Hd.vertical,["vertical"],hm,lE,ul,Ao,xo,Ou));let lg=-1;const hE=(Xh,$d)=>Xh?Math.max(Xh,$d):$d;lg=hE(FF,lg),lg=hE(UF,lg),lg=hE(kF,lg);const qee=lg>-1?1:0;xa.glyphOffsetArray.length>=65535&&en("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Si.sortKey!==void 0&&xa.addToSortKeyRanges(xa.symbolInstances.length,Si.sortKey),xa.symbolInstances.emplaceBack(Oa.x,Oa.y,zA.x,zA.y,zA.z,hm.right>=0?hm.right:-1,hm.center>=0?hm.center:-1,hm.left>=0?hm.left:-1,hm.vertical>=0?hm.vertical:-1,oE,lE,qF,Ap!==void 0?Ap:xa.collisionBoxArray.length,Ap!==void 0?Ap+1:xa.collisionBoxArray.length,og!==void 0?og:xa.collisionBoxArray.length,og!==void 0?og+1:xa.collisionBoxArray.length,sg!==void 0?sg:xa.collisionBoxArray.length,sg!==void 0?sg+1:xa.collisionBoxArray.length,VA||xa.collisionBoxArray.length,VA?VA+1:xa.collisionBoxArray.length,Xr,jF,ZF,BF,GF,qee,0,cE,dE,lg,0,uE?1:0,ig)})(d,ga,Ya,jt,u,f,m,y,d.layers[0],d.collisionBoxArray,i.index,i.sourceLayerIndex,d.index,mt,ue,D,0,Ye,xt,ee,i,_,S,V,I,M,B,X,Ut)};if(le==="line")for(const jt of j4(i.geometry,0,0,Na,Na)){const ga=sQ(jt,Ze,At,u.vertical||we,f,We,je,d.overscaling,Na);for(const ma of ga)we&&pQ(d,we.text,St,ma)||Mt(jt,ma,I)}else if(le==="line-center"){for(const jt of i.geometry)if(jt.length>1){const ga=iQ(jt,At,u.vertical||we,f,We,je);ga&&Mt(jt,ga,I)}}else if(i.type==="Polygon")for(const jt of hA(i.geometry,0)){const ga=lQ(jt,16);Mt(jt[0],new Qm(ga.x,ga.y,0,0,void 0),I)}else if(i.type==="LineString")for(const jt of i.geometry)Mt(jt,new Qm(jt[0].x,jt[0].y,0,0,void 0),I);else if(i.type==="Point")for(const jt of i.geometry)for(const ga of jt)Mt([ga],new Qm(ga.x,ga.y,0,0,void 0),I)}const k1=255,tg=k1*dt;function rL(d,i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,X,ee){const ue=function(pe,we,Pe,We,je,Ze,mt,Ye){const At=[];if(we.positionedLines.length===0)return At;const xt=We.layout.get("text-rotate").evaluate(Ze,{})*Math.PI/180,St=function(jt){const ga=jt[0],ma=jt[1],Ya=ga*ma;return Ya>0?[ga,-ma]:Ya<0?[-ga,ma]:ga===0?[ma,ga]:[ma,-ga]}(Pe);let Ot=Math.abs(we.top-we.bottom);for(const jt of we.positionedLines)Ot-=jt.lineOffset;const Nt=we.positionedLines.length,Ut=Ot/Nt;let Mt=we.top-Pe[1];for(let jt=0;jt<Nt;++jt){const ga=we.positionedLines[jt];Mt=oQ(we,Ut,Mt,jt);for(const ma of ga.positionedGlyphs){if(!ma.rect)continue;const Ya=ma.rect||{};let xa=RP+1,Oa=!0,_a=1,Ar=0;if(ma.image){const Si=mt.get(ma.image.toString());if(!Si)continue;if(Si.sdf){en("SDF images are not supported in formatted text and will be ignored.");continue}Oa=!1,_a=Si.pixelRatio,xa=J0/_a}const $a=(je||Ye)&&ma.vertical,or=ma.metrics.advance*ma.scale/2,Dr=ma.metrics,Jr=ma.rect;if(Jr===null)continue;Ye&&we.verticalizable&&(Ar=ma.image?or-ma.metrics.width*ma.scale/2:0);const kr=je?[ma.x+or,ma.y]:[0,0];let dn=[0,0],Xr=[0,0],wn=!1;je||($a?(Xr=[ma.x+or+St[0],ma.y+St[1]-Ar],wn=!0):dn=[ma.x+or+Pe[0],ma.y+Pe[1]-Ar]);const $n=Jr.w*ma.scale/(_a*(ma.localGlyph?pp:1)),Ei=Jr.h*ma.scale/(_a*(ma.localGlyph?pp:1));let Lr,En,Yi,ls;if($a){const Si=ma.y-Mt,ul=new Bt(-or,or-Si),Sc=-Math.PI/2,Ao=new Bt(...Xr);Lr=new Bt(-or+dn[0],dn[1]),Lr._rotateAround(Sc,ul)._add(Ao),Lr.x+=-Si+or,Lr.y-=(Dr.left-xa)*ma.scale;const xo=ma.image?Dr.advance*ma.scale:Fe*ma.scale,Ou=String.fromCodePoint(ma.glyph);Qn(Ou)?Lr.x+=(1-xa)*ma.scale:Ho(Ou)?Lr.x+=xo-Dr.height*ma.scale+(-xa-1)*ma.scale:Lr.x+=ma.image||Dr.width+2*xa===Jr.w&&Dr.height+2*xa===Jr.h?(xo-Ei)/2:(xo-(Dr.height+2*xa)*ma.scale)/2,En=new Bt(Lr.x,Lr.y-$n),Yi=new Bt(Lr.x+Ei,Lr.y),ls=new Bt(Lr.x+Ei,Lr.y-$n)}else{const Si=(Dr.left-xa)*ma.scale-or+dn[0],ul=(-Dr.top-xa)*ma.scale+dn[1],Sc=Si+$n,Ao=ul+Ei;Lr=new Bt(Si,ul),En=new Bt(Sc,ul),Yi=new Bt(Si,Ao),ls=new Bt(Sc,Ao)}if(xt){let Si;Si=je?new Bt(0,0):wn?new Bt(St[0],St[1]):new Bt(Pe[0],Pe[1]),Lr._rotateAround(xt,Si),En._rotateAround(xt,Si),Yi._rotateAround(xt,Si),ls._rotateAround(xt,Si)}const ys=new Bt(0,0),Ns=new Bt(0,0);At.push({tl:Lr,tr:En,bl:Yi,br:ls,texPrimary:Ya,texSecondary:void 0,writingMode:we.writingMode,glyphOffset:kr,sectionIndex:ma.sectionIndex,isSDF:Oa,pixelOffsetTL:ys,pixelOffsetBR:Ns,minFontScaleX:0,minFontScaleY:0})}}return At}(0,f,N,m,_,b,y,d.allowVerticalPlacement),le=d.textSizeData;let re=null;le.kind==="source"?(re=[dt*m.layout.get("text-size").evaluate(b,{},X)*M.textScaleFactor],re[0]>tg&&en(`${d.layerIds[0]}: Value for "text-size" is >= ${k1}. Reduce your "text-size".`)):le.kind==="composite"&&(re=[dt*M.compositeTextSizes[0].evaluate(b,{},X)*M.textScaleFactor,dt*M.compositeTextSizes[1].evaluate(b,{},X)*M.textScaleFactor],(re[0]>tg||re[1]>tg)&&en(`${d.layerIds[0]}: Value for "text-size" is >= ${k1}. Reduce your "text-size".`)),d.addSymbols(d.text,ue,re,N,_,b,S,i,u,D.lineStartIndex,D.lineLength,O,B,X,ee,!1);for(const pe of V)I[pe]=d.text.placedSymbolArray.length-1;return 4*ue.length}function PP(d){for(const i in d)return d[i];return null}function _S(d,i,u,f,y,m,_,b,N,D){let S=_.top,V=_.bottom,I=_.left,O=_.right;const M=_.collisionPadding;if(M&&(I-=M[0],S-=M[1],O+=M[2],V+=M[3]),N){const B=new Bt(I,S),X=new Bt(O,S),ee=new Bt(I,V),ue=new Bt(O,V),le=za(N);let re=new Bt(0,0);D&&(re=new Bt(D[0],D[1])),B._rotateAround(le,re),X._rotateAround(le,re),ee._rotateAround(le,re),ue._rotateAround(le,re),I=Math.min(B.x,X.x,ee.x,ue.x),O=Math.max(B.x,X.x,ee.x,ue.x),S=Math.min(B.y,X.y,ee.y,ue.y),V=Math.max(B.y,X.y,ee.y,ue.y)}return d.emplaceBack(i.x,i.y,i.z,u.x,u.y,I,S,O,V,b,f,y,m),d.length-1}function EP(d){d.collisionPadding&&(d.top-=d.collisionPadding[1],d.bottom+=d.collisionPadding[3]);const i=d.bottom-d.top;return i>0?Math.max(10,i):null}function pQ(d,i,u,f){const y=d.compareText;if(i in y){const m=y[i];for(let _=m.length-1;_>=0;_--)if(f.dist(m[_])<u)return!0}else y[i]=[];return y[i].push(f),!1}function nL(d,i){const u=d.fovAboveCenter,f=d.elevation?d.elevation.getMinElevationBelowMSL()*i:0,y=(d._camera.position[2]*d.worldSize-f)/Math.cos(d._pitch),m=Math.sin(u)*y/Math.sin(Math.max(Math.PI/2-d._pitch-u,.01));let _=Math.sin(d._pitch)*m+y;const b=y*(1/d._horizonShift);if(!d.elevation||d.elevation.exaggeration()===0){let N=Math.max(d.zoom-17,0);d.isOrthographic&&(N/=10),_*=1+N}return Math.min(1.01*_,b)}function B1(d,i){if(!i.isReprojectedInTileSpace)return{scale:1<<d.z,x:d.x,y:d.y,x2:d.x+1,y2:d.y+1,projection:i};const u=Math.pow(2,-d.z),f=d.x*u,y=(d.x+1)*u,m=d.y*u,_=(d.y+1)*u,b=Nu(f),N=Nu(y),D=Ri(m),S=Ri(_),V=i.project(b,D),I=i.project(N,D),O=i.project(N,S),M=i.project(b,S);let B=Math.min(V.x,I.x,O.x,M.x),X=Math.min(V.y,I.y,O.y,M.y),ee=Math.max(V.x,I.x,O.x,M.x),ue=Math.max(V.y,I.y,O.y,M.y);const le=u/16;function re(we,Pe,We,je,Ze,mt){const Ye=(We+Ze)/2,At=(je+mt)/2,xt=i.project(Nu(Ye),Ri(At)),St=Math.max(0,B-xt.x,X-xt.y,xt.x-ee,xt.y-ue);B=Math.min(B,xt.x),ee=Math.max(ee,xt.x),X=Math.min(X,xt.y),ue=Math.max(ue,xt.y),St>le&&(re(we,xt,We,je,Ye,At),re(xt,Pe,Ye,At,Ze,mt))}re(V,I,f,m,y,m),re(I,O,y,m,y,_),re(O,M,y,_,f,_),re(M,V,f,_,f,m),B-=le,X-=le,ee+=le,ue+=le;const pe=1/Math.max(ee-B,ue-X);return{scale:pe,x:B*pe,y:X*pe,x2:ee*pe,y2:ue*pe,projection:i}}function iL(d,{x:i,y:u},f=0){return new Bt(((i-f)*d.scale-d.x)*Na,(u*d.scale-d.y)*Na)}const mQ=_e.mat4.identity(new Float32Array(16));class ag{constructor(i){this.spec=i,this.name=i.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(i,u){return{x:0,y:0,z:0}}unproject(i,u){return new Ln(0,0)}projectTilePoint(i,u,f){return{x:i,y:u,z:0}}locationPoint(i,u,f,y=!0){return i._coordinatePoint(i.locationCoordinate(u,f),y)}pixelsPerMeter(i,u){return jo(1,i)*u}pixelSpaceConversion(i,u,f){return 1}farthestPixelDistance(i){return nL(i,i.pixelsPerMeter)}pointCoordinate(i,u,f,y){const m=i.horizonLineFromTop(!1),_=new Bt(u,Math.max(m,f));return i.rayIntersectionCoordinate(i.pointRayIntersection(_,y))}pointCoordinate3D(i,u,f){const y=new Bt(u,f);if(i.elevation)return i.elevation.pointCoordinate(y);{const m=this.pointCoordinate(i,y.x,y.y,0);return[m.x,m.y,m.z]}}isPointAboveHorizon(i,u){if(i.elevation&&i.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(i,u.x,u.y);const f=i.horizonLineFromTop();return u.y<f}createInversionMatrix(i,u){return mQ}createTileMatrix(i,u,f){let y,m,_;const b=f.canonical,N=_e.mat4.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){const D=B1(b,this);y=1,m=D.x+f.wrap*D.scale,_=D.y,_e.mat4.scale(N,N,[y/D.scale,y/D.scale,i.pixelsPerMeter/u])}else y=u/i.zoomScale(b.z),m=(b.x+Math.pow(2,b.z)*f.wrap)*y,_=b.y*y;return _e.mat4.translate(N,N,[m,_,0]),_e.mat4.scale(N,N,[y/Na,y/Na,1]),N}upVector(i,u,f){return[0,0,1]}upVectorScale(i,u,f){return{metersToTile:1}}}class yQ extends ag{constructor(i){super(i),this.range=[4,7],this.center=i.center||[-96,37.5];const[u,f]=this.parallels=i.parallels||[29.5,45.5],y=Math.sin(za(u));this.n=(y+Math.sin(za(f)))/2,this.c=1+y*(2*this.n-y),this.r0=Math.sqrt(this.c)/this.n}project(i,u){const{n:f,c:y,r0:m}=this,_=za(i-this.center[0]),b=za(u),N=Math.sqrt(y-2*f*Math.sin(b))/f;return{x:N*Math.sin(_*f),y:N*Math.cos(_*f)-m,z:0}}unproject(i,u){const{n:f,c:y,r0:m}=this,_=m+u;let b=Math.atan2(i,Math.abs(_))*Math.sign(_);_*f<0&&(b-=Math.PI*Math.sign(i)*Math.sign(_));const N=za(this.center[0])*f;b=pn(b,-Math.PI-N,Math.PI-N);const D=ka(Va(b/f)+this.center[0],-180,180),S=Math.asin(ka((y-(i*i+_*_)*f*f)/(2*f),-1,1)),V=ka(Va(S),-85.051129,Vu);return new Ln(D,V)}}const G1=1.340264,j1=-.081106,Z1=893e-6,q1=.003796,vS=Math.sqrt(3)/2;class gQ extends ag{project(i,u){u=u/180*Math.PI,i=i/180*Math.PI;const f=Math.asin(vS*Math.sin(u)),y=f*f,m=y*y*y;return{x:.5*(i*Math.cos(f)/(vS*(G1+3*j1*y+m*(7*Z1+9*q1*y)))/Math.PI+.5),y:1-.5*(f*(G1+j1*y+m*(Z1+q1*y))/Math.PI+1),z:0}}unproject(i,u){i=(2*i-.5)*Math.PI;let f=u=(2*(1-u)-1)*Math.PI,y=f*f,m=y*y*y;for(let S,V,I,O=0;O<12&&(V=f*(G1+j1*y+m*(Z1+q1*y))-u,I=G1+3*j1*y+m*(7*Z1+9*q1*y),S=V/I,f=ka(f-S,-Math.PI/3,Math.PI/3),y=f*f,m=y*y*y,!(Math.abs(S)<1e-12));++O);const _=vS*i*(G1+3*j1*y+m*(7*Z1+9*q1*y))/Math.cos(f),b=Math.asin(Math.sin(f)/vS),N=ka(180*_/Math.PI,-180,180),D=ka(180*b/Math.PI,-85.051129,Vu);return new Ln(N,D)}}class AQ extends ag{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0}project(i,u){return{x:.5+i/360,y:.5-u/360,z:0}}unproject(i,u){const f=360*(i-.5),y=ka(360*(.5-u),-85.051129,Vu);return new Ln(f,y)}}const t_=Math.PI/2;function wS(d){return Math.tan((t_+d)/2)}class _Q extends ag{constructor(i){super(i),this.center=i.center||[0,30];const[u,f]=this.parallels=i.parallels||[30,30];let y=za(u),m=za(f);this.southernCenter=y+m<0,this.southernCenter&&(y=-y,m=-m);const _=Math.cos(y),b=wS(y);this.n=y===m?Math.sin(y):Math.log(_/Math.cos(m))/Math.log(wS(m)/b),this.f=_*Math.pow(wS(y),this.n)/this.n}project(i,u){u=za(u),this.southernCenter&&(u=-u),i=za(i-this.center[0]);const f=1e-6,{n:y,f:m}=this;m>0?u<-t_+f&&(u=-t_+f):u>t_-f&&(u=t_-f);const _=m/Math.pow(wS(u),y);let b=_*Math.sin(y*i),N=m-_*Math.cos(y*i);return b=.5*(b/Math.PI+.5),N=.5*(N/Math.PI+.5),{x:b,y:this.southernCenter?N:1-N,z:0}}unproject(i,u){i=(2*i-.5)*Math.PI,this.southernCenter&&(u=1-u),u=(2*(1-u)-.5)*Math.PI;const{n:f,f:y}=this,m=y-u,_=Math.sign(m),b=Math.sign(f)*Math.sqrt(i*i+m*m);let N=Math.atan2(i,Math.abs(m))*_;m*f<0&&(N-=Math.PI*Math.sign(i)*_);const D=ka(Va(N/f)+this.center[0],-180,180),S=ka(Va(2*Math.atan(Math.pow(y/b,1/f))-t_),-85.051129,Vu);return new Ln(D,this.southernCenter?-S:S)}}class sL extends ag{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(i,u){return{x:_l(i),y:Pi(u),z:0}}unproject(i,u){const f=Nu(i),y=Ri(u);return new Ln(f,y)}}const oL=za(Vu);class vQ extends ag{project(i,u){const f=(u=za(u))*u,y=f*f;return{x:.5*((i=za(i))*(.8707-.131979*f+y*(y*(.003971*f-.001529*y)-.013791))/Math.PI+.5),y:1-.5*(u*(1.007226+f*(.015085+y*(.028874*f-.044475-.005916*y)))/Math.PI+1),z:0}}unproject(i,u){i=(2*i-.5)*Math.PI;let f=u=(2*(1-u)-1)*Math.PI,y=25,m=0,_=f*f;do{_=f*f;const D=_*_;m=(f*(1.007226+_*(.015085+D*(.028874*_-.044475-.005916*D)))-u)/(1.007226+_*(.045255+D*(.259866*_-.311325-.005916*11*D))),f=ka(f-m,-oL,oL)}while(Math.abs(m)>1e-6&&--y>0);_=f*f;const b=ka(Va(i/(.8707+_*(_*(_*_*_*(.003971-.001529*_)-.013791)-.131979))),-180,180),N=Va(f);return new Ln(b,N)}}const lL=za(Vu);class wQ extends ag{project(i,u){u=za(u),i=za(i);const f=Math.cos(u),y=2/Math.PI,m=Math.acos(f*Math.cos(i/2)),_=Math.sin(m)/m,b=.5*(i*y+2*f*Math.sin(i/2)/_)||0,N=.5*(u+Math.sin(u)/_)||0;return{x:.5*(b/Math.PI+.5),y:1-.5*(N/Math.PI+1),z:0}}unproject(i,u){let f=i=(2*i-.5)*Math.PI,y=u=(2*(1-u)-1)*Math.PI,m=25;const _=1e-6;let b=0,N=0;do{const D=Math.cos(y),S=Math.sin(y),V=2*S*D,I=S*S,O=D*D,M=Math.cos(f/2),B=Math.sin(f/2),X=2*M*B,ee=B*B,ue=1-O*M*M,le=ue?1/ue:0,re=ue?Math.acos(D*M)*Math.sqrt(1/ue):0,pe=.5*(2*re*D*B+2*f/Math.PI)-i,we=.5*(re*S+y)-u,Pe=.5*le*(O*ee+re*D*M*I)+1/Math.PI,We=le*(X*V/4-re*S*B),je=.125*le*(V*B-re*S*O*X),Ze=.5*le*(I*M+re*ee*D)+.5,mt=We*je-Ze*Pe;b=(we*We-pe*Ze)/mt,N=(pe*je-we*Pe)/mt,f=ka(f-b,-Math.PI,Math.PI),y=ka(y-N,-lL,lL)}while((Math.abs(b)>_||Math.abs(N)>_)&&--m>0);return new Ln(Va(f),Va(y))}}class uL extends ag{constructor(i){super(i),this.center=i.center||[0,0],this.parallels=i.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(za(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(i,u){const{scale:f,cosPhi:y}=this;return{x:za(i)*y*f+.5,y:-Math.sin(za(u))/y*f+.5,z:0}}unproject(i,u){const{scale:f,cosPhi:y}=this,m=-(u-.5)/f,_=ka(Va((i-.5)/f)/y,-180,180),b=Math.asin(ka(m*y,-1,1)),N=ka(Va(b),-85.051129,Vu);return new Ln(_,N)}}class RQ extends sL{constructor(i){super(i),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(i,u,f){const y=On(i,u,f),m=Ti(hs(f));return _e.vec3.transformMat4(y,y,m),{x:y[0],y:y[1],z:y[2]}}locationPoint(i,u,f){const y=Rc(u.lat,u.lng),m=_e.vec3.normalize([],y),_=f?i._centerAltitude+f:i.elevation?i.elevation.getAtPointOrZero(i.locationCoordinate(u),i._centerAltitude):i._centerAltitude,b=jo(1,0)*Na*_;_e.vec3.scaleAndAdd(y,y,m,b);const N=_e.mat4.identity(new Float64Array(16));return _e.mat4.multiply(N,i.pixelMatrix,i.globeMatrix),_e.vec3.transformMat4(y,y,N),new Bt(y[0],y[1])}pixelsPerMeter(i,u){return jo(1,0)*u}pixelSpaceConversion(i,u,f){const y=jo(1,i)*u,m=hr(jo(1,45)*u,y,f);return this.pixelsPerMeter(i,u)/m}createTileMatrix(i,u,f){const y=os(hs(f.canonical));return _e.mat4.multiply(new Float64Array(16),i.globeMatrix,y)}createInversionMatrix(i,u){const{center:f}=i,y=Ti(hs(u));return _e.mat4.rotateY(y,y,za(f.lng)),_e.mat4.rotateX(y,y,za(f.lat)),_e.mat4.scale(y,y,[i._pixelsPerMercatorPixel,i._pixelsPerMercatorPixel,1]),Float32Array.from(y)}pointCoordinate(i,u,f,y){return cn(i,u,f,!0)||new o(0,0)}pointCoordinate3D(i,u,f){const y=this.pointCoordinate(i,u,f,0);return[y.x,y.y,y.z]}isPointAboveHorizon(i,u){return!cn(i,u.x,u.y,!1)}farthestPixelDistance(i){const u=function(y,m){const _=y.cameraToCenterDistance,b=y._centerAltitude*m,N=y._camera,D=y._camera.forward(),S=_e.vec3.add([],_e.vec3.scale([],D,-_),[0,0,b]),V=y.worldSize/(2*Math.PI),I=[0,0,-V],O=y.width/y.height,M=Math.tan(y.fovAboveCenter),B=_e.vec3.scale([],N.up(),M),X=_e.vec3.scale([],N.right(),M*O),ee=_e.vec3.normalize([],_e.vec3.add([],_e.vec3.add([],D,B),X)),ue=[];let le;if(new Cr(S,ee).closestPointOnSphere(I,V,ue)){const re=_e.vec3.add([],ue,I),pe=_e.vec3.sub([],re,S);le=Math.cos(y.fovAboveCenter)*_e.vec3.length(pe)}else{const re=_e.vec3.sub([],S,I),pe=_e.vec3.sub([],I,S);_e.vec3.normalize(pe,pe);const we=_e.vec3.length(re)-V;le=Math.sqrt(we*(we+2*V));const Pe=Math.acos(le/(V+we))-Math.acos(_e.vec3.dot(D,pe));le*=Math.cos(Pe)}return 1.01*le}(i,this.pixelsPerMeter(i.center.lat,i.worldSize)),f=Ml(i.zoom);if(f>0){const y=nL(i,jo(1,i.center.lat)*i.worldSize),m=i.worldSize/(2*Math.PI),_=Math.max(i.width,i.height)/i.worldSize*Math.PI;return hr(u,y+m*(1-Math.cos(_)),Math.pow(f,10))}return u}upVector(i,u,f){return On(u,f,i,1)}upVectorScale(i){return{metersToTile:sn(oi(hs(i)))}}}function cL(d){const i=d.parallels,u=!!i&&Math.abs(i[0]+i[1])<.01;switch(d.name){case"mercator":return new sL(d);case"equirectangular":return new AQ(d);case"naturalEarth":return new vQ(d);case"equalEarth":return new gQ(d);case"winkelTripel":return new wQ(d);case"albers":return u?new uL(d):new yQ(d);case"lambertConformalConic":return u?new uL(d):new _Q(d);case"globe":return new RQ(d)}throw new Error(`Invalid projection name: ${d.name}`)}const TQ=Th.VectorTileFeature.types,SQ=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function RS(d,i,u,f,y,m,_,b,N,D,S,V,I){const O=b?Math.min(tg,Math.round(b[0])):0,M=b?Math.min(tg,Math.round(b[1])):0;d.emplaceBack(i,u,Math.round(32*f),Math.round(32*y),m,_,(O<<1)+(N?1:0),M,16*D,16*S,256*V,256*I)}function TS(d,i,u){d.emplaceBack(i,u)}function SS(d,i,u,f,y,m,_){d.emplaceBack(i,u,f,y,m,_)}function CS(d,i,u,f,y){d.emplaceBack(i,u,f,y),d.emplaceBack(i,u,f,y),d.emplaceBack(i,u,f,y),d.emplaceBack(i,u,f,y)}function CQ(d){for(const i of d.sections)if(vi(i.text))return!0;return!1}class NP{constructor(i){this.layoutVertexArray=new mh,this.indexArray=new Ps,this.programConfigurations=i,this.segments=new Di,this.dynamicLayoutVertexArray=new Yc,this.opacityVertexArray=new ep,this.placedSymbolArray=new yl,this.iconTransitioningVertexArray=new Ud,this.globeExtVertexArray=new Wc,this.zOffsetVertexArray=new Kc}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(i,u,f,y,m){this.isEmpty()||(f&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,fS.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,Y0.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,SQ,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=i.createVertexBuffer(this.iconTransitioningVertexArray,v.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,wP.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||m)&&(this.zOffsetVertexBuffer=i.createVertexBuffer(this.zOffsetVertexArray,p.members,!0)),this.opacityVertexBuffer.itemSize=1),(f||y)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}Pt(NP,"SymbolBuffers");class VP{constructor(i,u,f){this.layoutVertexArray=new i,this.layoutAttributes=u,this.indexArray=new f,this.segments=new Di,this.collisionVertexArray=new _c,this.collisionVertexArrayExt=new Yc}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,x.members,!0),this.collisionVertexBufferExt=i.createVertexBuffer(this.collisionVertexArrayExt,F.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Pt(VP,"CollisionBuffers");class bS{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.lut=i.lut,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(_=>_.fqid),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=_e.mat4.identity([]),this.placementViewportMatrix=_e.mat4.identity([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=oa(this.zoom,u["text-size"]),this.iconSizeData=oa(this.zoom,u["icon-size"]);const f=this.layers[0].layout,y=f.get("symbol-sort-key"),m=f.get("symbol-z-order");this.canOverlap=f.get("text-allow-overlap")||f.get("icon-allow-overlap")||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=m!=="viewport-y"&&y.constantOr(1)!==void 0,this.sortFeaturesByY=(m==="viewport-y"||m==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=f.get("text-writing-mode").map(_=>Hd[_]),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=i.sourceID,this.projection=i.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=!1,this.elevationType="none",this.elevationStateComplete=!1,this.activeReplacements=[],this.replacementUpdateTime=0}createArrays(){this.text=new NP(new _h(this.layers,{zoom:this.zoom,lut:this.lut},i=>i.startsWith("text")||i.startsWith("symbol"))),this.icon=new NP(new _h(this.layers,{zoom:this.zoom,lut:this.lut},i=>i.startsWith("icon")||i.startsWith("symbol"))),this.glyphOffsetArray=new Jg,this.lineVertexArray=new Wp,this.symbolInstances=new Xg}calculateGlyphDependencies(i,u,f,y,m){for(const _ of i){const b=_.codePointAt(0);if(b===void 0)break;if(u[b]=!0,y&&m&&b<=65535){const N=Yr[_];N&&(u[N.charCodeAt(0)]=!0)}}}updateFootprints(i,u){}updateReplacement(i,u){if(u.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=u.updateTime;const f=u.getReplacementRegionsForTile(i.toUnwrapped(),!0);return!Z0(this.activeReplacements,f)&&(this.activeReplacements=f,!0)}populate(i,u,f,y){const m=this.layers[0],_=m.layout,b=this.projection.name==="globe",N=_.get("text-font"),D=_.get("text-field"),S=_.get("icon-image"),[V,I]=_.get("icon-size-scale-range"),O=ka(u.scaleFactor||1,V,I),M=(D.value.kind!=="constant"||D.value.value instanceof us&&!D.value.value.isEmpty()||D.value.value.toString().length>0)&&(N.value.kind!=="constant"||N.value.value.length>0),B=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,X=_.get("symbol-sort-key");if(this.features=[],!M&&!B)return;const ee=u.iconDependencies,ue=u.glyphDependencies,le=u.availableImages,re=new vn(this.zoom);for(const{feature:pe,id:we,index:Pe,sourceLayerIndex:We}of i){const je=m._featureFilter.needGeometry,Ze=W(pe,je);if(!m._featureFilter.filter(re,Ze,f))continue;if(je||(Ze.geometry=H(pe,f,y)),b&&pe.type!==1&&f.z<=5){const St=Ze.geometry,Ot=.98078528056,Nt=(Ut,Mt)=>{const jt=On(Ut.x,Ut.y,f,1),ga=On(Mt.x,Mt.y,f,1);return _e.vec3.dot(jt,ga)<Ot};for(let Ut=0;Ut<St.length;Ut++)St[Ut]=C(St[Ut],Nt)}let mt,Ye;if(M){const St=m.getValueAndResolveTokens("text-field",Ze,f,le),Ot=us.factory(St);CQ(Ot)&&(this.hasRTLText=!0),(!this.hasRTLText||po()==="unavailable"||this.hasRTLText&&ss.isParsed())&&(mt=Za(Ot,m,Ze))}if(B){const St=m.getValueAndResolveTokens("icon-image",Ze,f,le);Ye=St instanceof Ts?St:Ts.build(St)}if(!mt&&!Ye)continue;const At=this.sortFeaturesByKey?X.evaluate(Ze,{},f):void 0,xt={id:we,text:mt,icon:Ye,index:Pe,sourceLayerIndex:We,geometry:Ze.geometry,properties:pe.properties,type:TQ[pe.type],sortKey:At};if(this.features.push(xt),Ye){const St=this.layers[0]._unevaluatedLayout._values,{iconPrimary:Ot,iconSecondary:Nt}=eL(Ye,this.iconSizeData,St["icon-size"],f,this.zoom,xt,this.pixelRatio,O),Ut=Ot.id.toString();if(ee.has(Ut)?ee.get(Ut).push(Ot):ee.set(Ut,[Ot]),Nt){const Mt=Nt.id.toString();ee.has(Mt)?ee.get(Mt).push(Nt):ee.set(Mt,[Nt])}}if(mt){const St=N.evaluate(Ze,{},f).join(","),Ot=_.get("text-rotation-alignment")==="map"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Hd.vertical)>=0;for(const Nt of mt.sections)if(Nt.image){const Ut=Nt.image.getPrimary().scaleSelf(this.pixelRatio),Mt=Ut.id.toString(),jt=ee.get(Mt)||[];jt.push(Ut),ee.set(Mt,jt)}else{const Ut=ta(mt.toString()),Mt=Nt.fontStack||St,jt=ue[Mt]=ue[Mt]||{};this.calculateGlyphDependencies(Nt.text,jt,Ot,this.allowVerticalPlacement,Ut)}}}if(_.get("symbol-placement")==="line"&&(this.features=function(pe){const we={},Pe={},We=[];let je=0;function Ze(xt){We.push(pe[xt]),je++}function mt(xt,St,Ot){const Nt=Pe[xt];return delete Pe[xt],Pe[St]=Nt,We[Nt].geometry[0].pop(),We[Nt].geometry[0]=We[Nt].geometry[0].concat(Ot[0]),Nt}function Ye(xt,St,Ot){const Nt=we[St];return delete we[St],we[xt]=Nt,We[Nt].geometry[0].shift(),We[Nt].geometry[0]=Ot[0].concat(We[Nt].geometry[0]),Nt}function At(xt,St,Ot){const Nt=Ot?St[0][St[0].length-1]:St[0][0];return`${xt}:${Nt.x}:${Nt.y}`}for(let xt=0;xt<pe.length;xt++){const St=pe[xt],Ot=St.geometry,Nt=St.text?St.text.toString():null;if(!Nt){Ze(xt);continue}const Ut=At(Nt,Ot),Mt=At(Nt,Ot,!0);if(Ut in Pe&&Mt in we&&Pe[Ut]!==we[Mt]){const jt=Ye(Ut,Mt,Ot),ga=mt(Ut,Mt,We[jt].geometry);delete we[Ut],delete Pe[Mt],Pe[At(Nt,We[ga].geometry,!0)]=ga,We[jt].geometry=null}else Ut in Pe?mt(Ut,Mt,Ot):Mt in we?Ye(Ut,Mt,Ot):(Ze(xt),we[Ut]=je-1,Pe[Mt]=je-1)}return We.filter(xt=>xt.geometry)}(this.features)),_.get("symbol-elevation-reference")==="hd-road-markup"){if(this.elevationType="road",u.elevationFeatures){!this.elevationFeatures&&u.elevationFeatures.length>0&&(this.elevationFeatures=[],this.elevationFeatureIdToIndex=new Map);for(const pe of u.elevationFeatures)this.elevationFeatureIdToIndex.set(pe.id,this.elevationFeatures.length),this.elevationFeatures.push(pe)}}else _.get("symbol-z-elevate")&&(this.elevationType="offset");this.elevationType!=="none"&&(this.zOffsetBuffersNeedUpload=!0),this.sortFeaturesByKey&&this.features.sort((pe,we)=>pe.sortKey-we.sortKey)}update(i,u,f,y,m,_,b){this.text.programConfigurations.updatePaintArrays(i,u,m,f,y,_,b),this.icon.programConfigurations.updatePaintArrays(i,u,m,f,y,_,b)}updateRoadElevation(){if(this.elevationType!=="road"||!this.elevationFeatures||this.elevationStateComplete)return;this.elevationStateComplete=!0,this.hasAnyZOffset=!1;let i=!1;for(let u=0;u<this.symbolInstances.length;u++){const f=this.symbolInstances.get(u);if(f.elevationFeatureIndex===65535)continue;const y=this.elevationFeatures[f.elevationFeatureIndex];if(y){const m=.05+y.pointElevation(new Bt(f.tileAnchorX,f.tileAnchorY));f.zOffset!==m&&(i=!0,f.zOffset=m)}}i&&(this.zOffsetBuffersNeedUpload=!0,this.zOffsetSortDirty=!0)}updateZOffset(){const i=(m,_,b)=>{f+=_,f>m.length&&m.resize(f);for(let N=-_;N<0;N++)m.emplace(N+f,b)},u=(m,_,b)=>{y+=_,y>m.length&&m.resize(y);for(let N=-_;N<0;N++)m.emplace(N+y,b)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let f=0,y=0;for(let m=0;m<this.symbolInstances.length;m++){const _=this.symbolInstances.get(m),{numHorizontalGlyphVertices:b,numVerticalGlyphVertices:N,numIconVertices:D}=_,S=_.zOffset,V=D>0;if((b>0||N>0)&&(i(this.text.zOffsetVertexArray,b,S),i(this.text.zOffsetVertexArray,N,S)),V){const{placedIconSymbolIndex:I,verticalPlacedIconSymbolIndex:O}=_;I>=0&&u(this.icon.zOffsetVertexArray,D,S),O>=0&&u(this.icon.zOffsetVertexArray,_.numVerticalIconVertices,S)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=cL(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,u){const f=this.lineVertexArray.length;if(i.segment!==void 0)for(const{x:y,y:m}of u)this.lineVertexArray.emplaceBack(y,m);return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,X){const ee=i.indexArray,ue=i.layoutVertexArray,le=i.globeExtVertexArray,re=i.segments.prepareSegment(4*u.length,ue,ee,this.canOverlap?_.sortKey:void 0),pe=this.glyphOffsetArray.length,we=re.vertexLength,Pe=this.allowVerticalPlacement&&b===Hd.vertical?Math.PI/2:0,We=_.text&&_.text.sections;for(let Ze=0;Ze<u.length;Ze++){const{tl:mt,tr:Ye,bl:At,br:xt,texPrimary:St,texSecondary:Ot,pixelOffsetTL:Nt,pixelOffsetBR:Ut,minFontScaleX:Mt,minFontScaleY:jt,glyphOffset:ga,isSDF:ma,sectionIndex:Ya}=u[Ze],xa=re.vertexLength,Oa=ga[1];if(RS(ue,D.x,D.y,mt.x,Oa+mt.y,St.x,St.y,f,ma,Nt.x,Nt.y,Mt,jt),RS(ue,D.x,D.y,Ye.x,Oa+Ye.y,St.x+St.w,St.y,f,ma,Ut.x,Nt.y,Mt,jt),RS(ue,D.x,D.y,At.x,Oa+At.y,St.x,St.y+St.h,f,ma,Nt.x,Ut.y,Mt,jt),RS(ue,D.x,D.y,xt.x,Oa+xt.y,St.x+St.w,St.y+St.h,f,ma,Ut.x,Ut.y,Mt,jt),N){const{x:_a,y:Ar,z:$a}=N.anchor,[or,Dr,Jr]=N.up;SS(le,_a,Ar,$a,or,Dr,Jr),SS(le,_a,Ar,$a,or,Dr,Jr),SS(le,_a,Ar,$a,or,Dr,Jr),SS(le,_a,Ar,$a,or,Dr,Jr),CS(i.dynamicLayoutVertexArray,_a,Ar,$a,Pe)}else CS(i.dynamicLayoutVertexArray,D.x,D.y,D.z,Pe);if(X){const _a=Ot||St;TS(i.iconTransitioningVertexArray,_a.x,_a.y),TS(i.iconTransitioningVertexArray,_a.x+_a.w,_a.y),TS(i.iconTransitioningVertexArray,_a.x,_a.y+_a.h),TS(i.iconTransitioningVertexArray,_a.x+_a.w,_a.y+_a.h)}ee.emplaceBack(xa,xa+1,xa+2),ee.emplaceBack(xa+1,xa+2,xa+3),re.vertexLength+=4,re.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ga[0]),Ze!==u.length-1&&Ya===u[Ze+1].sectionIndex||i.programConfigurations.populatePaintArrays(ue.length,_,_.index,{},O,M,B,We&&We[Ya])}const je=N?N.anchor:D;i.placedSymbolArray.emplaceBack(je.x,je.y,je.z,D.x,D.y,pe,this.glyphOffsetArray.length-pe,we,S,V,D.segment,f?f[0]:0,f?f[1]:0,y[0],y[1],b,0,!1,0,I,0)}_commitLayoutVertex(i,u,f,y,m,_,b){i.emplaceBack(u,f,y,m,_,Math.round(b.x),Math.round(b.y))}_addCollisionDebugVertices(i,u,f,y,m,_,b){const N=f.segments.prepareSegment(4,f.layoutVertexArray,f.indexArray),D=N.vertexLength,S=b.tileAnchorX,V=b.tileAnchorY;for(let O=0;O<4;O++)f.collisionVertexArray.emplaceBack(0,0,0,0,0,0);this._commitDebugCollisionVertexUpdate(f.collisionVertexArrayExt,u,i.padding,b.zOffset),this._commitLayoutVertex(f.layoutVertexArray,y,m,_,S,V,new Bt(i.x1,i.y1)),this._commitLayoutVertex(f.layoutVertexArray,y,m,_,S,V,new Bt(i.x2,i.y1)),this._commitLayoutVertex(f.layoutVertexArray,y,m,_,S,V,new Bt(i.x2,i.y2)),this._commitLayoutVertex(f.layoutVertexArray,y,m,_,S,V,new Bt(i.x1,i.y2)),N.vertexLength+=4;const I=f.indexArray;I.emplaceBack(D,D+1),I.emplaceBack(D+1,D+2),I.emplaceBack(D+2,D+3),I.emplaceBack(D+3,D),N.primitiveLength+=4}_addTextDebugCollisionBoxes(i,u,f,y,m,_){for(let b=y;b<m;b++){const N=f.get(b),D=this.getSymbolInstanceTextSize(i,_,u,b);this._addCollisionDebugVertices(N,D,this.textCollisionBox,N.projectedAnchorX,N.projectedAnchorY,N.projectedAnchorZ,_)}}_addIconDebugCollisionBoxes(i,u,f,y,m,_){for(let b=y;b<m;b++){const N=f.get(b),D=this.getSymbolInstanceIconSize(i,u,_.placedIconSymbolIndex);this._addCollisionDebugVertices(N,D,this.iconCollisionBox,N.projectedAnchorX,N.projectedAnchorY,N.projectedAnchorZ,_)}}generateCollisionDebugBuffers(i,u,f){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new VP(Ac,Y.members,Ud),this.iconCollisionBox=new VP(Ac,Y.members,Ud);const y=nr(this.iconSizeData,i),m=nr(this.textSizeData,i,f);for(let _=0;_<this.symbolInstances.length;_++){const b=this.symbolInstances.get(_);this._addTextDebugCollisionBoxes(m,i,u,b.textBoxStartIndex,b.textBoxEndIndex,b),this._addTextDebugCollisionBoxes(m,i,u,b.verticalTextBoxStartIndex,b.verticalTextBoxEndIndex,b),this._addIconDebugCollisionBoxes(y,i,u,b.iconBoxStartIndex,b.iconBoxEndIndex,b),this._addIconDebugCollisionBoxes(y,i,u,b.verticalIconBoxStartIndex,b.verticalIconBoxEndIndex,b)}}getSymbolInstanceTextSize(i,u,f,y){const m=this.text.placedSymbolArray.get(u.rightJustifiedTextSymbolIndex>=0?u.rightJustifiedTextSymbolIndex:u.centerJustifiedTextSymbolIndex>=0?u.centerJustifiedTextSymbolIndex:u.leftJustifiedTextSymbolIndex>=0?u.leftJustifiedTextSymbolIndex:u.verticalPlacedTextSymbolIndex>=0?u.verticalPlacedTextSymbolIndex:y),_=ja(this.textSizeData,i,m)/Fe;return this.tilePixelRatio*_}getSymbolInstanceIconSize(i,u,f){const y=this.icon.placedSymbolArray.get(f),m=ja(this.iconSizeData,i,y);return this.tilePixelRatio*m}_commitDebugCollisionVertexUpdate(i,u,f,y){i.emplaceBack(u,-f,-f,y),i.emplaceBack(u,f,-f,y),i.emplaceBack(u,f,f,y),i.emplaceBack(u,-f,f,y)}_updateTextDebugCollisionBoxes(i,u,f,y,m,_,b){for(let N=y;N<m;N++){const D=f.get(N),S=this.getSymbolInstanceTextSize(i,_,u,N);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,S,D.padding,_.zOffset)}}_updateIconDebugCollisionBoxes(i,u,f,y,m,_,b){for(let N=y;N<m;N++){const D=f.get(N),S=this.getSymbolInstanceIconSize(i,u,_.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,S,D.padding,_.zOffset)}}updateCollisionDebugBuffers(i,u,f,y){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const m=nr(this.iconSizeData,i,y),_=nr(this.textSizeData,i,f);for(let b=0;b<this.symbolInstances.length;b++){const N=this.symbolInstances.get(b);this._updateTextDebugCollisionBoxes(_,i,u,N.textBoxStartIndex,N.textBoxEndIndex,N,f),this._updateTextDebugCollisionBoxes(_,i,u,N.verticalTextBoxStartIndex,N.verticalTextBoxEndIndex,N,f),this._updateIconDebugCollisionBoxes(m,i,u,N.iconBoxStartIndex,N.iconBoxEndIndex,N,y),this._updateIconDebugCollisionBoxes(m,i,u,N.verticalIconBoxStartIndex,N.verticalIconBoxEndIndex,N,y)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(i,u,f,y,m,_,b,N,D){const S={};if(u<f){const{x1:V,y1:I,x2:O,y2:M,padding:B,projectedAnchorX:X,projectedAnchorY:ee,projectedAnchorZ:ue,tileAnchorX:le,tileAnchorY:re,featureIndex:pe}=i.get(u);S.textBox={x1:V,y1:I,x2:O,y2:M,padding:B,projectedAnchorX:X,projectedAnchorY:ee,projectedAnchorZ:ue,tileAnchorX:le,tileAnchorY:re},S.textFeatureIndex=pe}if(y<m){const{x1:V,y1:I,x2:O,y2:M,padding:B,projectedAnchorX:X,projectedAnchorY:ee,projectedAnchorZ:ue,tileAnchorX:le,tileAnchorY:re,featureIndex:pe}=i.get(y);S.verticalTextBox={x1:V,y1:I,x2:O,y2:M,padding:B,projectedAnchorX:X,projectedAnchorY:ee,projectedAnchorZ:ue,tileAnchorX:le,tileAnchorY:re},S.verticalTextFeatureIndex=pe}if(_<b){const{x1:V,y1:I,x2:O,y2:M,padding:B,projectedAnchorX:X,projectedAnchorY:ee,projectedAnchorZ:ue,tileAnchorX:le,tileAnchorY:re,featureIndex:pe}=i.get(_);S.iconBox={x1:V,y1:I,x2:O,y2:M,padding:B,projectedAnchorX:X,projectedAnchorY:ee,projectedAnchorZ:ue,tileAnchorX:le,tileAnchorY:re},S.iconFeatureIndex=pe}if(N<D){const{x1:V,y1:I,x2:O,y2:M,padding:B,projectedAnchorX:X,projectedAnchorY:ee,projectedAnchorZ:ue,tileAnchorX:le,tileAnchorY:re,featureIndex:pe}=i.get(N);S.verticalIconBox={x1:V,y1:I,x2:O,y2:M,padding:B,projectedAnchorX:X,projectedAnchorY:ee,projectedAnchorZ:ue,tileAnchorX:le,tileAnchorY:re},S.verticalIconFeatureIndex=pe}return S}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const f=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(i,u){const f=i.placedSymbolArray.get(u),y=f.vertexStartIndex+4*f.numGlyphs;for(let m=f.vertexStartIndex;m<y;m+=4)i.indexArray.emplaceBack(m,m+1,m+2),i.indexArray.emplaceBack(m+1,m+2,m+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(i),f=Math.cos(i),y=[],m=[],_=[];for(let b=0;b<this.symbolInstances.length;++b){_.push(b);const N=this.symbolInstances.get(b);y.push(0|Math.round(u*N.tileAnchorX+f*N.tileAnchorY)),m.push(N.featureIndex)}return _.sort((b,N)=>y[b]-y[N]||m[N]-m[b]),_}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let i=0;i<this.symbolInstances.length;++i)this.symbolInstanceIndexesSortedZOffset.push(i)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((i,u)=>this.symbolInstances.get(u).zOffset-this.symbolInstances.get(i).zOffset)}addToSortKeyRanges(i,u){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===u?f.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const f=this.symbolInstances.get(u);this.featureSortOrder.push(f.featureIndex);const{rightJustifiedTextSymbolIndex:y,centerJustifiedTextSymbolIndex:m,leftJustifiedTextSymbolIndex:_,verticalPlacedTextSymbolIndex:b,placedIconSymbolIndex:N,verticalPlacedIconSymbolIndex:D}=f;y>=0&&this.addIndicesForPlacedSymbol(this.text,y),m>=0&&m!==y&&this.addIndicesForPlacedSymbol(this.text,m),_>=0&&_!==m&&_!==y&&this.addIndicesForPlacedSymbol(this.text,_),b>=0&&this.addIndicesForPlacedSymbol(this.text,b),N>=0&&this.addIndicesForPlacedSymbol(this.icon,N),D>=0&&this.addIndicesForPlacedSymbol(this.icon,D)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let dL,hL,zP;Pt(bS,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),bS.addDynamicAttributes=CS;class fL{constructor(i){this.type=i.property.overrides?i.property.overrides.runtimeType:sc,this.defaultValue=i}evaluate(i){if(i.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(i.formattedSection))return u.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Pt(fL,"FormatSectionOverride",{omit:["defaultValue"]});const OP=()=>zP||(zP={layout:dL||(dL=new Oi({"symbol-placement":new Ca(Gt.layout_symbol["symbol-placement"]),"symbol-spacing":new Ca(Gt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ca(Gt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ua(Gt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ca(Gt.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new Ca(Gt.layout_symbol["symbol-z-elevate"]),"symbol-elevation-reference":new Ca(Gt.layout_symbol["symbol-elevation-reference"]),"icon-allow-overlap":new Ca(Gt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ca(Gt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ca(Gt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ca(Gt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ua(Gt.layout_symbol["icon-size"]),"icon-size-scale-range":new Ca(Gt.layout_symbol["icon-size-scale-range"]),"icon-text-fit":new Ua(Gt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ua(Gt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ua(Gt.layout_symbol["icon-image"]),"icon-rotate":new Ua(Gt.layout_symbol["icon-rotate"]),"icon-padding":new Ca(Gt.layout_symbol["icon-padding"]),"icon-keep-upright":new Ca(Gt.layout_symbol["icon-keep-upright"]),"icon-offset":new Ua(Gt.layout_symbol["icon-offset"]),"icon-anchor":new Ua(Gt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ca(Gt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ca(Gt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ca(Gt.layout_symbol["text-rotation-alignment"]),"text-field":new Ua(Gt.layout_symbol["text-field"]),"text-font":new Ua(Gt.layout_symbol["text-font"]),"text-size":new Ua(Gt.layout_symbol["text-size"]),"text-size-scale-range":new Ca(Gt.layout_symbol["text-size-scale-range"]),"text-max-width":new Ua(Gt.layout_symbol["text-max-width"]),"text-line-height":new Ua(Gt.layout_symbol["text-line-height"]),"text-letter-spacing":new Ua(Gt.layout_symbol["text-letter-spacing"]),"text-justify":new Ua(Gt.layout_symbol["text-justify"]),"text-radial-offset":new Ua(Gt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ca(Gt.layout_symbol["text-variable-anchor"]),"text-anchor":new Ua(Gt.layout_symbol["text-anchor"]),"text-max-angle":new Ca(Gt.layout_symbol["text-max-angle"]),"text-writing-mode":new Ca(Gt.layout_symbol["text-writing-mode"]),"text-rotate":new Ua(Gt.layout_symbol["text-rotate"]),"text-padding":new Ca(Gt.layout_symbol["text-padding"]),"text-keep-upright":new Ca(Gt.layout_symbol["text-keep-upright"]),"text-transform":new Ua(Gt.layout_symbol["text-transform"]),"text-offset":new Ua(Gt.layout_symbol["text-offset"]),"text-allow-overlap":new Ca(Gt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ca(Gt.layout_symbol["text-ignore-placement"]),"text-optional":new Ca(Gt.layout_symbol["text-optional"]),visibility:new Ca(Gt.layout_symbol.visibility)})),paint:hL||(hL=new Oi({"icon-opacity":new Ua(Gt.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new Ua(Gt.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new Ua(Gt.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new Ua(Gt.paint_symbol["text-emissive-strength"]),"icon-color":new Ua(Gt.paint_symbol["icon-color"]),"icon-halo-color":new Ua(Gt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ua(Gt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ua(Gt.paint_symbol["icon-halo-blur"]),"icon-translate":new Ca(Gt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ca(Gt.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new Ua(Gt.paint_symbol["icon-image-cross-fade"]),"text-opacity":new Ua(Gt.paint_symbol["text-opacity"]),"text-occlusion-opacity":new Ua(Gt.paint_symbol["text-occlusion-opacity"]),"text-color":new Ua(Gt.paint_symbol["text-color"],{runtimeType:Gs,getOverride:d=>d.textColor,hasOverride:d=>!!d.textColor}),"text-halo-color":new Ua(Gt.paint_symbol["text-halo-color"]),"text-halo-width":new Ua(Gt.paint_symbol["text-halo-width"]),"text-halo-blur":new Ua(Gt.paint_symbol["text-halo-blur"]),"text-translate":new Ca(Gt.paint_symbol["text-translate"]),"text-translate-anchor":new Ca(Gt.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new Ca(Gt.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new Ca(Gt.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new Ca(Gt.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new Ca(Gt.paint_symbol["icon-color-brightness-max"]),"symbol-z-offset":new Ua(Gt.paint_symbol["symbol-z-offset"]),"icon-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"icon-halo-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"text-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"text-halo-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},zP);class xS extends ao{constructor(i,u,f,y){super(i,OP(),u,f,y),this._colorAdjustmentMatrix=_e.mat4.identity([]),this.hasInitialOcclusionOpacityProperties=i.paint!==void 0&&("icon-occlusion-opacity"in i.paint||"text-occlusion-opacity"in i.paint)}recalculate(i,u){super.recalculate(i,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const f=this.layout.get("text-writing-mode");if(f){const y=[];for(const m of f)y.indexOf(m)<0&&y.push(m);this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(i,u,f,y){return this._saturation===i&&this._contrast===u&&this._brightnessMin===f&&this._brightnessMax===y||(this._colorAdjustmentMatrix=function(m,_,b,N){m=Xt(m),_=Us(_);const D=_e.mat4.create(),S=m/3,V=1-2*S,I=[V,S,S,0,S,V,S,0,S,S,V,0,0,0,0,1],O=.5-.5*_,M=N-b;return _e.mat4.multiply(D,[M,0,0,0,0,M,0,0,0,0,M,0,b,b,b,1],[_,0,0,0,0,_,0,0,0,0,_,0,O,O,O,1]),_e.mat4.multiply(D,D,I),D}(i,u,f,y),this._saturation=i,this._contrast=u,this._brightnessMin=f,this._brightnessMax=y),this._colorAdjustmentMatrix}getValueAndResolveTokens(i,u,f,y){const m=this.layout.get(i).evaluate(u,{},f,y),_=this._unevaluatedLayout._values[i];return _.isDataDriven()||kh(_.value)||!m?m:function(b,N){return N.replace(/{([^{}]+)}/g,(D,S)=>S in b?String(b[S]):"")}(u.properties,m)}createBucket(i){return new bS(i)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const i of OP().paint.overridableProperties){if(!xS.hasPaintOverride(this.layout,i))continue;const u=this.paint.get(i),f=new fL(u),y=new to(f,u.property.specification,this.scope,this.options);let m=null;m=u.value.kind==="constant"||u.value.kind==="source"?new Q("source",y):new fe("composite",y,u.value.zoomStops,u.value._interpolationType),this.paint._values[i]=new zl(u.property,m,u.parameters)}}_handleOverridablePaintPropertyUpdate(i,u,f){return!(!this.layout||u.isDataDriven()||f.isDataDriven())&&xS.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,u){const f=i.get("text-field"),y=OP().paint.properties[u];let m=!1;const _=b=>{for(const N of b)if(y.overrides&&y.overrides.hasOverride(N))return void(m=!0)};if(f.value.kind==="constant"&&f.value.value instanceof us)_(f.value.value.sections);else if(f.value.kind==="source"){const b=D=>{m||(D instanceof ql&&ji(D.value)===fu?_(D.value.sections):D instanceof Td?_(D.sections):D.eachChild(b))},N=f.value;N._styleExpression&&b(N._styleExpression.expression)}return m}getProgramIds(){return["symbol"]}getDefaultProgramParams(i,u,f){return{config:new Ku(this,{zoom:u,lut:f}),overrideFog:!1}}}let pL,mL,yL,gL;var DP=xn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);function MP(d){switch(d){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.RGBA;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.DEPTH_COMPONENT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.DEPTH_STENCIL;case WebGL2RenderingContext.R8:case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.RED}}function IP(d){switch(d){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.UNSIGNED_SHORT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.UNSIGNED_INT_24_8;case WebGL2RenderingContext.R8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.FLOAT}}class LP{constructor(i,u,f,y){this.context=i,this.format=f,this.useMipmap=y&&y.useMipmap,this.texture=i.gl.createTexture(),this.update(u,{premultiply:y&&y.premultiply})}update(i,u){const f=i&&i instanceof HTMLVideoElement&&i.width===0?i.videoWidth:i.width,y=i&&i instanceof HTMLVideoElement&&i.height===0?i.videoHeight:i.height,{context:m}=this,{gl:_}=m,{x:b,y:N}=u&&u.position?u.position:{x:0,y:0},D=b+f,S=N+y;!this.size||this.size[0]===D&&this.size[1]===S||(_.bindTexture(_.TEXTURE_2D,null),_.deleteTexture(this.texture),this.texture=_.createTexture(),this.size=null),_.bindTexture(_.TEXTURE_2D,this.texture),m.pixelStoreUnpackFlipY.set(!1),m.pixelStoreUnpack.set(1),m.pixelStoreUnpackPremultiplyAlpha.set(this.format===_.RGBA8&&(!u||u.premultiply!==!1));const V=i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||ImageBitmap&&i instanceof ImageBitmap;if(!this.size&&D>0&&S>0){const I=this.useMipmap?Math.floor(Math.log2(Math.max(D,S)))+1:1;_.texStorage2D(_.TEXTURE_2D,I,this.format,D,S),this.size=[D,S]}if(this.size)if(V)_.texSubImage2D(_.TEXTURE_2D,0,b,N,MP(this.format),IP(this.format),i);else{const I=i.data;I&&_.texSubImage2D(_.TEXTURE_2D,0,b,N,f,y,MP(this.format),IP(this.format),I)}this.useMipmap&&_.generateMipmap(_.TEXTURE_2D)}bind(i,u,f=!1){const{context:y}=this,{gl:m}=y;m.bindTexture(m.TEXTURE_2D,this.texture),i!==this.minFilter&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,i),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,this.useMipmap&&!f?i===m.NEAREST?m.NEAREST_MIPMAP_NEAREST:m.LINEAR_MIPMAP_LINEAR:i),this.minFilter=i),u!==this.wrapS&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,u),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,u),this.wrapS=u)}bindExtraParam(i,u,f,y){const{context:m}=this,{gl:_}=m;_.bindTexture(_.TEXTURE_2D,this.texture),u!==this.magFilter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,u),this.magFilter=u),i!==this.minFilter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,this.useMipmap?i===_.NEAREST?_.NEAREST_MIPMAP_NEAREST:_.LINEAR_MIPMAP_LINEAR:i),this.minFilter=i),f!==this.wrapS&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,f),this.wrapS=f),y!==this.wrapT&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,y),this.wrapT=y)}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}class PS{constructor(i,u){this.context=i,this.texture=u}bind(i,u){const{context:f}=this,{gl:y}=f;y.bindTexture(y.TEXTURE_2D,this.texture),i!==this.minFilter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,i),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,i),this.minFilter=i),u!==this.wrapS&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,u),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,u),this.wrapS=u)}}function ES(d,i,u,f,y,m,_,b){const N=[d,i,1,u,f,1,y,m,1],D=[_,b,1],S=_e.mat3.adjoint([],N),[V,I,O]=_e.vec3.transformMat3(D,D,S);return _e.mat3.multiply(N,N,[V,0,0,0,I,0,0,0,O])}function AL(d,i,u,f,y,m,_,b){const N=function(D,S,V,I,O,M,B,X){const ee=ES(0,0,1,0,1,1,0,1),ue=ES(D,S,V,I,O,M,B,X),le=_e.mat3.adjoint([],ee);return _e.mat3.multiply(ue,ue,le)}(d,i,u,f,y,m,_,b);return[N[2]/N[8]/Na,N[5]/N[8]/Na]}function NS(d){return[d[0],Math.min(Math.max(d[1],-85.051129),Vu)]}class _L extends Zl{constructor(i,u,f,y){super(),this.id=i,this.dispatcher=f,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(y),this.options=u,this._dirty=!1}load(i,u){if(this._loaded=u||!1,this.fire(new Lo("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return i&&(this.coordinates=i),this._loaded=!0,void this._finishLoading();this._imageRequest=ah(this.map._requestManager.transformRequest(this.url,ws.Image),(f,y)=>{this._imageRequest=null,this._loaded=!0,f?this.fire(new vd(f)):y&&(this.image=y instanceof HTMLImageElement?qt.getImageData(y):y,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,i&&(this.coordinates=i),this._finishLoading())})}loaded(){return this._loaded}updateImage(i){return i.url?(this._imageRequest&&i.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=i.url,this.load(i.coordinates,this._loaded),this):this}setTexture(i){if(!(i.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new PS(this.map.painter.context,i.handle),this.width=i.dimensions[0],this.height=i.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new Lo("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(i){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof PS||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(i){if(this.coordinates=i,this._boundsArray=void 0,this._unsupportedCoords=!1,!i.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let u=i[0][1],f=i[0][1];for(const m of i)m[1]>f&&(f=m[1]),m[1]<u&&(u=m[1]);const y=(f+u)/2;if(y>Vu?this.onNorthPole=!0:y<-85.051129&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const m=i.map(o.fromLngLat);this.tileID=function(_){let b=1/0,N=1/0,D=-1/0,S=-1/0;for(const B of _)b=Math.min(b,B.x),N=Math.min(N,B.y),D=Math.max(D,B.x),S=Math.max(S,B.y);const V=Math.max(D-b,S-N),I=Math.max(0,Math.floor(-Math.log(V)/Math.LN2)),O=Math.pow(2,I);let M=Math.floor((b+D)/2*O);return M>1&&(M-=1),new da(I,M,Math.floor((N+S)/2*O))}(m),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new Lo("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(i){for(const ee in this.tiles){const ue=this.tiles[ee];ue.state!=="loaded"&&(ue.state="loaded",ue.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const u=B1(new da(0,0,0),this.map.transform.projection),f=[u.projection.project(this.coordinates[0][0],this.coordinates[0][1]),u.projection.project(this.coordinates[1][0],this.coordinates[1][1]),u.projection.project(this.coordinates[2][0],this.coordinates[2][1]),u.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(ee){const ue=ee[1].x-ee[0].x,le=ee[1].y-ee[0].y,re=ee[2].x-ee[1].x,pe=ee[2].y-ee[1].y,we=ee[3].x-ee[2].x,Pe=ee[3].y-ee[2].y,We=ee[0].x-ee[3].x,je=ee[0].y-ee[3].y,Ze=ue*pe-re*le,mt=re*Pe-we*pe,Ye=we*je-We*Pe,At=We*le-ue*je;return Ze>0&&mt>0&&Ye>0&&At>0||Ze<0&&mt<0&&Ye<0&&At<0}(f))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const y=B1(this.tileID,this.map.transform.projection),[m,_,b,N]=this.coordinates.map(ee=>{const ue=y.projection.project(ee[0],ee[1]);return iL(y,ue)._round()});this.perspectiveTransform=AL(m.x,m.y,_.x,_.y,b.x,b.y,N.x,N.y);const D=this._boundsArray=new xu;D.emplaceBack(m.x,m.y,0,0),D.emplaceBack(_.x,_.y,Na,0),D.emplaceBack(N.x,N.y,0,Na),D.emplaceBack(b.x,b.y,Na,Na),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=i.createVertexBuffer(D,DP.members),this.boundsSegments=Di.simpleSegment(0,0,4,2);const S=[],V=[NS((I=this.coordinates)[0]),NS(I[1]),NS(I[2]),NS(I[3])];var I;const[O,M,B,X]=function(ee){let ue=ee[0][0],le=ue,re=ee[0][1],pe=re;for(let we=1;we<ee.length;we++)ee[we][0]<ue?ue=ee[we][0]:ee[we][0]>le&&(le=ee[we][0]),ee[we][1]<re?re=ee[we][1]:ee[we][1]>pe&&(pe=ee[we][1]);return[ue,re,le-ue,pe-re]}(V);{const ee=new xu,[ue,le,re,pe]=function(Nt){let Ut=Nt[0].x,Mt=Ut,jt=Nt[0].y,ga=jt;for(let ma=1;ma<Nt.length;ma++)Nt[ma].x<Ut?Ut=Nt[ma].x:Nt[ma].x>Mt&&(Mt=Nt[ma].x),Nt[ma].y<jt?jt=Nt[ma].y:Nt[ma].y>ga&&(ga=Nt[ma].y);return[Ut,jt,Mt-Ut,ga-jt]}(f),we=Nt=>[(Nt.x-ue)/re,(Nt.y-le)/pe],[Pe,We,je,Ze]=f.map(we),mt=function(Nt,Ut,Mt,jt,ga,ma,Ya,xa){const Oa=ES(0,0,1,0,1,1,0,1),_a=ES(Nt,Ut,Mt,jt,ga,ma,Ya,xa),Ar=_e.mat3.adjoint([],_a);return _e.mat3.multiply(Oa,Oa,Ar)}(Pe[0],Pe[1],We[0],We[1],je[0],je[1],Ze[0],Ze[1]);this.elevatedGlobePerspectiveTransform=AL(Pe[0],Pe[1],We[0],We[1],je[0],je[1],Ze[0],Ze[1]);const Ye=(Nt,Ut)=>{S.push(Nt.lng);const Mt=Math.round((Nt.lng-O)/B*Na),jt=Math.round((Nt.lat-M)/X*Na),ga=we(Ut),ma=_e.vec3.transformMat3([],[ga[0],ga[1],1],mt),Ya=Math.round(ma[0]/ma[2]*Na),xa=Math.round(ma[1]/ma[2]*Na);ee.emplaceBack(Mt,jt,Ya,xa)},At=f[3].x-f[0].x,xt=f[3].y-f[0].y,St=f[2].x-f[1].x,Ot=f[2].y-f[1].y;for(let Nt=0;Nt<65;Nt++){const Ut=Nt/64,Mt=[f[0].x+Ut*At,f[0].y+Ut*xt],jt=[f[1].x+Ut*St,f[1].y+Ut*Ot],ga=jt[0]-Mt[0],ma=jt[1]-Mt[1];for(let Ya=0;Ya<65;Ya++){const xa=Ya/64,Oa={x:Mt[0]+ga*xa,y:Mt[1]+ma*xa};Ye(u.projection.unproject(Oa.x,Oa.y),Oa)}}this.elevatedGlobeVertexBuffer=i.createVertexBuffer(ee,DP.members)}{this.maxLongitudeTriangleSize=0;let ee=[],ue=new Ps;const le=(re,pe,we)=>{ue.emplaceBack(re,pe,we);const Pe=S[re],We=S[pe],je=S[we],Ze=Math.min(Math.min(Pe,We),je),mt=Math.max(Math.max(Pe,We),je)-Ze;mt>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=mt),ee.push(Ze+mt/2)};for(let re=0;re<64;re++)for(let pe=0;pe<64;pe++){const we=65*re+pe,Pe=we+1,We=we+65,je=We+1;le(we,We,Pe),le(Pe,We,je)}[ee,ue]=function(re,pe){const we=Array.from({length:re.length},(je,Ze)=>Ze);we.sort((je,Ze)=>re[je]-re[Ze]);const Pe=[],We=new Ps;for(let je=0;je<we.length;je++){const Ze=we[je];Pe.push(re[Ze]);const mt=3*Ze,Ye=mt+1;We.emplaceBack(pe.uint16[mt],pe.uint16[Ye],pe.uint16[Ye+1])}return[Pe,We]}(ee,ue),this.elevatedGlobeTrianglesCenterLongitudes=ee,this.elevatedGlobeIndexBuffer=i.createIndexBuffer(ue)}this.elevatedGlobeSegments=Di.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,B/Na,0,X/Na,0,0,M,O,0])}prepare(){const i=Object.keys(this.tiles).length!==0;if(this.tileID&&!i)return;const u=this.map.painter.context,f=u.gl;!this._dirty||this.texture instanceof PS||(this.texture?this.texture.update(this.image):(this.texture=new LP(u,this.image,f.RGBA8),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE)),this._dirty=!1),i&&this._prepareData(u)}loadTile(i,u){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},u(null)):(i.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(i){const u=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!u)return null;const f=this.elevatedGlobeTrianglesCenterLongitudes;let y=(m=i+180)+360*Math.round((f[0]-m)/360);var m;const _=new Di,b=(V,I)=>{_.segments.push({vertexOffset:0,primitiveOffset:V,vertexLength:u.segments[0].vertexLength,primitiveLength:I,sortKey:void 0,vaos:{}})},N=.51*this.maxLongitudeTriangleSize;if(Math.abs(f[0]-y)<=N){const V=Ec(f,0,f.length,y+N);return V===f.length||b(V,ui(f,V+1,f.length,y+360-N)-V),_}y<f[0]&&(y+=360);const D=ui(f,0,f.length,y-N);if(D===f.length)return b(0,f.length),_;b(0,D-0);const S=Ec(f,D+1,f.length,y+N);return S!==f.length&&b(S,f.length-S),_}}const bQ=(Math.pow(256,2)-1)/16907520;class vL extends ao{constructor(i,u,f,y){super(i,{layout:yL||(yL=new Oi({visibility:new Ca(Gt.layout_raster.visibility)})),paint:gL||(gL=new Oi({"raster-opacity":new Ca(Gt.paint_raster["raster-opacity"]),"raster-color":new Ki(Gt.paint_raster["raster-color"]),"raster-color-mix":new Ca(Gt.paint_raster["raster-color-mix"]),"raster-color-range":new Ca(Gt.paint_raster["raster-color-range"]),"raster-hue-rotate":new Ca(Gt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ca(Gt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ca(Gt.paint_raster["raster-brightness-max"]),"raster-saturation":new Ca(Gt.paint_raster["raster-saturation"]),"raster-contrast":new Ca(Gt.paint_raster["raster-contrast"]),"raster-resampling":new Ca(Gt.paint_raster["raster-resampling"]),"raster-fade-duration":new Ca(Gt.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new Ca(Gt.paint_raster["raster-emissive-strength"]),"raster-array-band":new Ca(Gt.paint_raster["raster-array-band"]),"raster-elevation":new Ca(Gt.paint_raster["raster-elevation"]),"raster-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},u,f,y),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(i){return!(i&&i._source instanceof _L&&(i._source.onNorthPole||i._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(i){i!=="raster-color"&&i!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(i){if(!this.hasColorMap()||!this._curRampRange)return;const u=this._transitionablePaint._values["raster-color"].value.expression,[f,y]=i||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(f)&&isNaN(y)||f===this._curRampRange[0]&&y===this._curRampRange[1]||(this.colorRamp=By({expression:u,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:f,end:y}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[f,y])}}let wL,RL,TL,SL,CL;class bL extends ao{constructor(i,u,f,y){super(i,{layout:wL||(wL=new Oi({visibility:new Ca(Gt["layout_raster-particle"].visibility)})),paint:RL||(RL=new Oi({"raster-particle-array-band":new Ca(Gt["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new Ca(Gt["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new Ki(Gt["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new Ca(Gt["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new Ca(Gt["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new Ca(Gt["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new Ca(Gt["paint_raster-particle"]["raster-particle-reset-rate-factor"]),"raster-particle-elevation":new Ca(Gt["paint_raster-particle"]["raster-particle-elevation"]),"raster-particle-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},u,f,y),this._updateColorRamp(),this.lastInvalidatedAt=qt.now()}onRemove(i){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isDraped(i){return!1}_handleSpecialPaintPropertyUpdate(i){i!=="raster-particle-color"&&i!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),i==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const i=this._transitionablePaint._values["raster-particle-color"].value.expression,u=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=By({expression:i,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:u}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=qt.now()}tileCoverLift(){return this.paint.get("raster-particle-elevation")}}class xQ extends ao{constructor(i,u){super(i,{},u,null),this.implementation=i,i.slot&&(this.slot=i.slot)}is3D(i){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isDraped(i){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)}onRemove(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)}}function FP(d,i,u){const f=[0,0,1],y=_e.quat.identity([]);return _e.quat.rotateY(y,y,u?-za(d)+Math.PI:za(d)),_e.quat.rotateX(y,y,-za(i)),_e.vec3.transformQuat(f,f,y),_e.vec3.normalize(f,f)}function xL(d,i){const u=VS(d.projection,d.zoom,d.width,d.height),f=function(m,_,b,N,D){const S=new Ln(b.lng-180*rg,b.lat),V=new Ln(b.lng+180*rg,b.lat),I=m.project(S.lng,S.lat),O=m.project(V.lng,V.lat),M=-Math.atan2(O.y-I.y,O.x-I.x),B=o.fromLngLat(b);B.y=ka(B.y,-1+rg,1-rg);const X=B.toLngLat(),ee=m.project(X.lng,X.lat),ue=o.fromLngLat(X);ue.x+=rg;const le=ue.toLngLat(),re=m.project(le.lng,le.lat),pe=EL(re.x-ee.x,re.y-ee.y,M),we=o.fromLngLat(X);we.y+=rg;const Pe=we.toLngLat(),We=m.project(Pe.lng,Pe.lat),je=EL(We.x-ee.x,We.y-ee.y,M),Ze=Math.abs(pe.x)/Math.abs(je.y),mt=_e.mat4.identity([]);_e.mat4.rotateZ(mt,mt,-M*(1-(D?0:N)));const Ye=_e.mat4.identity([]);return _e.mat4.scale(Ye,Ye,[1,1-(1-Ze)*N,1]),Ye[4]=-je.x/je.y*N,_e.mat4.rotateZ(Ye,Ye,M),_e.mat4.multiply(Ye,mt,Ye),Ye}(d.projection,0,d.center,u,i),y=PL(d);return _e.mat4.scale(f,f,[y,y,1]),f}function PL(d){const i=d.projection,u=VS(d.projection,d.zoom,d.width,d.height),f=UP(i,d.center),y=UP(i,Ln.convert(i.center));return Math.pow(2,f*u+(1-u)*y)}function VS(d,i,u,f,y=1/0){const m=d.range;if(!m)return 0;const _=Math.min(y,Math.max(u,f)),b=Math.log(_/1024)/Math.LN2;return jr(m[0]+b,m[1]+b,i)}const rg=1/4e4;function UP(d,i){const u=ka(i.lat,-85.051129,Vu),f=new Ln(i.lng-180*rg,u),y=new Ln(i.lng+180*rg,u),m=d.project(f.lng,u),_=d.project(y.lng,u),b=o.fromLngLat(f),N=o.fromLngLat(y),D=_.x-m.x,S=_.y-m.y,V=N.x-b.x,I=N.y-b.y,O=Math.sqrt((V*V+I*I)/(D*D+S*S));return Math.log(O)/Math.LN2}function EL(d,i,u){const f=Math.cos(u),y=Math.sin(u);return{x:d*f-i*y,y:d*y+i*f}}function NL(d,i,u){_e.mat4.identity(d),_e.mat4.rotateZ(d,d,za(i[2])),_e.mat4.rotateX(d,d,za(i[0])),_e.mat4.rotateY(d,d,za(i[1])),_e.mat4.scale(d,d,u),_e.mat4.multiply(d,d,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function zS(d,i,u,f,y,m,_,b){const N=[u[0]-i[0],u[1]-i[1],0],D=[f[0]-i[0],f[1]-i[1],0];if(_e.vec3.length(N)<1e-12||_e.vec3.length(D)<1e-12)return _e.quat.identity(d);const S=_e.vec3.cross([],N,D);_e.vec3.normalize(S,S),_e.vec3.subtract(D,f,i),N[2]=(m-y)*b,D[2]=(_-y)*b;const V=N;return _e.vec3.cross(V,N,D),_e.vec3.normalize(V,V),_e.quat.rotationTo(d,S,V)}function kP(d,i,u=!1){const f=Ml(i.zoom),y=function(m,_,b){const N=_.worldSize,D=[m[12],m[13],m[14]],S=Ri(D[1]/N),V=Nu(D[0]/N),I=_e.mat4.identity([]),O=jo(1,S)*N,M=jo(1,0)*N*Hh(S,_.zoom),B=1/Tc(N);let X=M*B;if(b){const re=VS(_.projection,_.zoom,_.width,_.height,1024);X=B*_.projection.pixelSpaceConversion(_.center.lat,N,re)}const ee=Rc(S,V);_e.vec3.add(ee,ee,_e.vec3.scale([],_e.vec3.normalize([],ee),O*X*D[2]));const ue=function(re){const pe=[re[0],re[1],re[2]];let we=[0,1,0];const Pe=_e.vec3.cross([],we,pe);return _e.vec3.cross(we,pe,Pe),_e.vec3.squaredLength(we)===0&&(we=[0,1,0],_e.vec3.cross(Pe,pe,we)),_e.vec3.normalize(Pe,Pe),_e.vec3.normalize(we,we),_e.vec3.normalize(pe,pe),[Pe[0],Pe[1],Pe[2],0,we[0],we[1],we[2],0,pe[0],pe[1],pe[2],0,re[0],re[1],re[2],1]}(ee);_e.mat4.scale(I,I,[X,X,X*O]),_e.mat4.translate(I,I,[-D[0],-D[1],-D[2]]);const le=_e.mat4.multiply([],_.globeMatrix,ue);return _e.mat4.multiply(le,le,I),_e.mat4.multiply(le,le,m),le}(d,i,u);if(f>0){const m=function(_,b){const N=b.worldSize,D=jo(1,0)*N*Hh(b.center.lat,b.zoom)/Tc(N),S=jo(1,b.center.lat)*N,V=_e.mat4.identity([]);return _e.mat4.rotateY(V,V,za(b.center.lng)),_e.mat4.rotateX(V,V,za(b.center.lat)),_e.mat4.translate(V,V,[0,0,Al]),_e.mat4.scale(V,V,[D,D,D*S]),_e.mat4.translate(V,V,[b.point.x-.5*N,b.point.y-.5*N,0]),_e.mat4.multiply(V,V,_),_e.mat4.multiply(V,b.globeMatrix,V)}(d,i);return function(_,b,N){const D=(M,B,X)=>{const ee=_e.vec3.length(M),ue=_e.vec3.length(B),le=ro(M,B,X);return _e.vec3.scale(le,le,1/_e.vec3.length(le)*hr(ee,ue,X))},S=D([_[0],_[1],_[2]],[b[0],b[1],b[2]],N),V=D([_[4],_[5],_[6]],[b[4],b[5],b[6]],N),I=D([_[8],_[9],_[10]],[b[8],b[9],b[10]],N),O=ro([_[12],_[13],_[14]],[b[12],b[13],b[14]],N);return[S[0],S[1],S[2],0,V[0],V[1],V[2],0,I[0],I[1],I[2],0,O[0],O[1],O[2],1]}(y,m,f)}return y}function VL(d,i,u,f){const y=tr.projectAabbCorners(f,u);let m=Number.MAX_VALUE,_=-1;for(let D=0;D<y.length;++D){const S=y[D];S[0]=(.5*S[0]+.5)*i.width,S[1]=(.5-.5*S[1])*i.height,S[2]<m&&(_=D,m=S[2])}const b=D=>new Bt(y[D][0],y[D][1]);let N;switch(_){case 0:case 6:N=[b(1),b(5),b(4),b(7),b(3),b(2),b(1)];break;case 1:case 7:N=[b(0),b(4),b(5),b(6),b(2),b(3),b(0)];break;case 3:case 5:N=[b(1),b(0),b(4),b(7),b(6),b(2),b(1)];break;default:N=[b(1),b(5),b(6),b(7),b(3),b(0),b(1)]}if(Te(d,N))return m}const PQ=xn([{name:"a_pos_3f",components:3,type:"Float32"}]),EQ=xn([{name:"a_color_3f",components:3,type:"Float32"}]),NQ=xn([{name:"a_color_4f",components:4,type:"Float32"}]),VQ=xn([{name:"a_uv_2f",components:2,type:"Float32"}]),zQ=xn([{name:"a_normal_3f",components:3,type:"Float32"}]),OQ=xn([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),DQ=xn([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]),zL={None:0,Model:1,Symbol:2,FillExtrusion:4,All:7};class OS{constructor(i,u,f,y){this.message=(i?`${i}: `:"")+f,y&&(this.identifier=y),u!=null&&u.__line__&&(this.line=u.__line__)}}function OL(d,i){const u=d.indexOf("://")===-1;try{return new URL(d,u&&i?"http://example.com":void 0),!0}catch{return!1}}class DL{constructor(i,u){this.feature=i,this.instancedDataOffset=u,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class ML{constructor(){this.instancedDataArray=new Gm,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class BP{constructor(i){this.zoom=i.zoom,this.canonical=i.canonical,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.fqid),this.projection=i.projection,this.index=i.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0}updateFootprints(i,u){}populate(i,u,f,y){this.tileToMeter=g(f);const m=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:_,id:b,index:N,sourceLayerIndex:D}of i){const S=b??(_.properties&&_.properties.hasOwnProperty("id")?_.properties.id:void 0),V=W(_,m);if(!this.layers[0]._featureFilter.filter(new vn(this.zoom),V,f))continue;const I={id:S,sourceLayerIndex:D,index:N,geometry:m?V.geometry:H(_,f,y),properties:_.properties,type:_.type,patterns:{}},O=this.addFeature(I,I.geometry,V);O&&u.featureIndex.insert(_,I.geometry,N,D,this.index,this.instancesPerModel[O].instancedDataArray.length,Na/32)}this.lookup=null}update(i,u,f,y){for(const m in this.instancesPerModel){const _=this.instancesPerModel[m];for(const b in i)_.idToFeaturesIndex.hasOwnProperty(b)&&(this.evaluate(_.features[_.idToFeaturesIndex[b]],i[b],_,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let i=!1;for(const u in this.instancesPerModel){const f=this.instancesPerModel[u];for(const y of f.features){const m=this.layers[0],_=y.feature,b=this.canonical,N=m.paint.get("model-rotation").evaluate(_,{},b),D=m.paint.get("model-scale").evaluate(_,{},b),S=m.paint.get("model-translation").evaluate(_,{},b);_e.vec3.exactEquals(y.rotation,N)&&_e.vec3.exactEquals(y.scale,D)&&_e.vec3.exactEquals(y.translation,S)||(this.evaluate(y,y.featureStates,f,!0),i=!0)}}return i}updateReplacement(i,u,f,y){if(u.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=u.updateTime;const m=u.getReplacementRegionsForTile(i.toUnwrapped(),!0);if(Z0(this.activeReplacements,m))return!1;this.activeReplacements=m;let _=!1;for(const b in this.instancesPerModel){const N=this.instancesPerModel[b],D=N.instancedDataArray;for(const S of N.features){const V=S.instancedDataOffset,I=S.instancedDataCount;for(let O=0;O<I;O++){const M=16*(O+V);let B=D.float32[M+0];const X=B>Na;B=X?B-Na:B;const ee=Math.floor(B),ue=D.float32[M+1];let le=!1;for(const re of this.activeReplacements)if(!Vf(re,f,zL.Model,y)&&!(re.min.x>ee||ee>re.max.x||re.min.y>ue||ue>re.max.y)&&(le=aS(tS(ee,ue,i.canonical,re.footprintTileId.canonical),re.footprint),le))break;D.float32[M]=le?B+Na:B,_=_||le!==X}}}return _}isEmpty(){for(const i in this.instancesPerModel)if(this.instancesPerModel[i].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(i){if(!this.uploaded)for(const u in this.instancesPerModel){const f=this.instancesPerModel[u];f.instancedDataArray.length<0||f.instancedDataArray.length===0||(f.instancedDataBuffer?f.instancedDataBuffer.updateData(f.instancedDataArray):f.instancedDataBuffer=i.createVertexBuffer(f.instancedDataArray,OQ.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const u in this.instancesPerModel){const f=this.instancesPerModel[u];f.instancedDataArray.length!==0&&f.instancedDataBuffer&&f.instancedDataBuffer.destroy()}const i=this.layers[0].modelManager;if(i&&this.modelUris)for(const u of this.modelUris)i.removeModel(u,"")}addFeature(i,u,f){const y=this.layers[0],m=y.layout.get("model-id").evaluate(f,{},this.canonical);if(!m)return en(`modelId is not evaluated for layer ${y.id} and it is not going to get rendered.`),m;OL(m,!1)&&(this.modelUris.includes(m)||this.modelUris.push(m)),this.instancesPerModel[m]||(this.instancesPerModel[m]=new ML);const _=this.instancesPerModel[m],b=_.instancedDataArray,N=new DL(f,b.length);for(const D of u)for(const S of D){if(S.x<0||S.x>=Na||S.y<0||S.y>=Na)continue;const V=(this.lookupDim-1)/Na,I=this.lookupDim*(S.y*V|0)+S.x*V|0;if(this.lookup){if(this.lookup[I]!==0)continue;this.lookup[I]=1}this.instanceCount++;const O=b.length;b.resize(O+1),_.instancesEvaluatedElevation.push(0),b.float32[16*O]=S.x,b.float32[16*O+1]=S.y}return N.instancedDataCount=_.instancedDataArray.length-N.instancedDataOffset,N.instancedDataCount>0&&(i.id&&(_.idToFeaturesIndex[i.id]=_.features.length),_.features.push(N),this.evaluate(N,{},_,!1)),m}getModelUris(){return this.modelUris}evaluate(i,u,f,y){const m=this.layers[0],_=i.feature,b=this.canonical,N=i.rotation=m.paint.get("model-rotation").evaluate(_,u,b),D=i.scale=m.paint.get("model-scale").evaluate(_,u,b),S=i.translation=m.paint.get("model-translation").evaluate(_,u,b),V=m.paint.get("model-color").evaluate(_,u,b);V.a=m.paint.get("model-color-mix-intensity").evaluate(_,u,b);const I=[];this.maxVerticalOffset<S[2]&&(this.maxVerticalOffset=S[2]),this.maxScale=Math.max(Math.max(this.maxScale,D[0]),Math.max(D[1],D[2])),NL(I,N,D);const O=Math.round(100*V.a)+V.b/1.05;for(let M=0;M<i.instancedDataCount;++M){const B=i.instancedDataOffset+M,X=16*B,ee=f.instancedDataArray.float32;let ue=0;y&&(ue=ee[X+6]-f.instancesEvaluatedElevation[B]);const le=0|ee[X+1];ee[X]=(0|ee[X])+V.r/1.05,ee[X+1]=le+V.g/1.05,ee[X+2]=O,ee[X+3]=1/(b.z>10?this.tileToMeter:g(b,le)),ee[X+4]=S[0],ee[X+5]=S[1],ee[X+6]=S[2]+ue,ee[X+7]=I[0],ee[X+8]=I[1],ee[X+9]=I[2],ee[X+10]=I[4],ee[X+11]=I[5],ee[X+12]=I[6],ee[X+13]=I[8],ee[X+14]=I[9],ee[X+15]=I[10],f.instancesEvaluatedElevation[B]=S[2]}}}let IL,LL;Pt(BP,"ModelBucket",{omit:["layers"]}),Pt(ML,"PerModelAttributes"),Pt(DL,"ModelFeature");const xA=64,a_={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function FL(d,i,u,f,y,m,_,b,N,D=!1){const S=u.zoom,V=u.project(f),I=Hh(f.lat,S),O=1/I;_e.mat4.identity(d),_e.mat4.translate(d,d,[V.x+_[0]*O,V.y+_[1]*O,_[2]]);let M=1,B=1;const X=u.worldSize;if(D){if(u.projection.name==="mercator"){let re=0;u.elevation&&(re=u.elevation.getAtPointOrZero(new o(V.x/X,V.y/X),0));const pe=_e.vec4.transformMat4([],[V.x,V.y,re,1],u.projMatrix)[3]/u.cameraToCenterDistance;M=pe,B=pe*Hh(u.center.lat,S)}else if(u.projection.name==="globe"){const re=kP(d,u),pe=_e.mat4.multiply([],u.projMatrix,re),we=[0,0,0,1];_e.vec4.transformMat4(we,we,pe);const Pe=we[3]/u.cameraToCenterDistance,We=Ml(S),je=u.projection.pixelsPerMeter(f.lat,X)*Hh(f.lat,S),Ze=u.projection.pixelsPerMeter(u.center.lat,X)*Hh(u.center.lat,S);M=Pe/hr(je,lA(u.center.lat),We),B=Pe*I/je,M*=Ze,B*=Ze}}else M=O;_e.mat4.scale(d,d,[M,M,B]);const ee=[...d],ue=i.orientation,le=[];if(NL(le,[ue[0]+y[0],ue[1]+y[1],ue[2]+y[2]],m),_e.mat4.multiply(d,ee,le),b&&u.elevation){let re=0;const pe=[];if(N&&u.elevation){re=function(We,je,Ze,mt,Ye){const At=je.elevation;if(!At)return 0;const xt=tr.projectAabbCorners(Ze,mt),St=jo(1,Ye.lat)*je.worldSize,Ot=function(Ar,$a){const or=[0,0,1],Dr=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const Jr of Dr){const kr=Ar[Jr.corners[0]],dn=Ar[Jr.corners[1]],Xr=Ar[Jr.corners[2]],wn=[dn[0]-kr[0],dn[1]-kr[1],$a*(dn[2]-kr[2])],$n=_e.vec3.cross(wn,wn,[Xr[0]-kr[0],Xr[1]-kr[1],$a*(Xr[2]-kr[2])]);_e.vec3.normalize($n,$n),Jr.dotProductWithUp=_e.vec3.dot($n,or)}return Dr.sort((Jr,kr)=>Jr.dotProductWithUp-kr.dotProductWithUp),Dr[0].corners}(xt,St),Nt=xt[Ot[0]],Ut=xt[Ot[1]],Mt=xt[Ot[2]],jt=xt[Ot[3]],ga=At.getAtPointOrZero(new o(Nt[0]/je.worldSize,Nt[1]/je.worldSize),0),ma=At.getAtPointOrZero(new o(Ut[0]/je.worldSize,Ut[1]/je.worldSize),0),Ya=At.getAtPointOrZero(new o(Mt[0]/je.worldSize,Mt[1]/je.worldSize),0),xa=At.getAtPointOrZero(new o(jt[0]/je.worldSize,jt[1]/je.worldSize),0),Oa=(ga+xa)/2,_a=(ma+Ya)/2;return Oa>_a?ma<Ya?zS(We,Ut,jt,Nt,ma,xa,ga,St):zS(We,Mt,Nt,jt,Ya,ga,xa,St):ga<xa?zS(We,Nt,Ut,Mt,ga,ma,Ya,St):zS(We,jt,Mt,Ut,xa,Ya,ma,St),Math.max(Oa,_a)}(pe,u,i.aabb,d,f);const we=_e.mat4.fromQuat([],pe),Pe=_e.mat4.multiply([],we,le);_e.mat4.multiply(d,ee,Pe)}else re=u.elevation.getAtPointOrZero(new o(V.x/X,V.y/X),0);re!==0&&(d[14]+=re)}}function H1(d,i,u=!1){d.uploaded||(d.gfxTexture=new LP(i,d.image,u?i.gl.R8:i.gl.RGBA8,{useMipmap:d.sampler.minFilter>=i.gl.NEAREST_MIPMAP_NEAREST}),d.uploaded=!0,d.image=null)}function MQ(d,i,u){d.indexBuffer=i.createIndexBuffer(d.indexArray,!1,!0),d.vertexBuffer=i.createVertexBuffer(d.vertexArray,PQ.members,!1,!0),d.normalArray&&(d.normalBuffer=i.createVertexBuffer(d.normalArray,zQ.members,!1,!0)),d.texcoordArray&&(d.texcoordBuffer=i.createVertexBuffer(d.texcoordArray,VQ.members,!1,!0)),d.colorArray&&(d.colorBuffer=i.createVertexBuffer(d.colorArray,(d.colorArray.bytesPerElement===12?EQ:NQ).members,!1,!0)),d.featureArray&&(d.pbrBuffer=i.createVertexBuffer(d.featureArray,DQ.members,!0)),d.segments=Di.simpleSegment(0,0,d.vertexArray.length,d.indexArray.length);const f=d.material;f.pbrMetallicRoughness.baseColorTexture&&H1(f.pbrMetallicRoughness.baseColorTexture,i),f.pbrMetallicRoughness.metallicRoughnessTexture&&H1(f.pbrMetallicRoughness.metallicRoughnessTexture,i),f.normalTexture&&H1(f.normalTexture,i),f.occlusionTexture&&H1(f.occlusionTexture,i,u),f.emissionTexture&&H1(f.emissionTexture,i)}function GP(d,i,u){if(d.meshes)for(const f of d.meshes)MQ(f,i,u);if(d.children)for(const f of d.children)GP(f,i,u)}function DS(d){if(d.meshes)for(const i of d.meshes)i.indexArray.destroy(),i.vertexArray.destroy(),i.colorArray&&i.colorArray.destroy(),i.normalArray&&i.normalArray.destroy(),i.texcoordArray&&i.texcoordArray.destroy(),i.featureArray&&i.featureArray.destroy();if(d.children)for(const i of d.children)DS(i)}function jP(d){if(d.meshes)for(const u of d.meshes)u.vertexBuffer&&(u.vertexBuffer.destroy(),u.indexBuffer.destroy(),u.normalBuffer&&u.normalBuffer.destroy(),u.texcoordBuffer&&u.texcoordBuffer.destroy(),u.colorBuffer&&u.colorBuffer.destroy(),u.pbrBuffer&&u.pbrBuffer.destroy(),u.segments.destroy(),u.material&&((i=u.material).pbrMetallicRoughness.baseColorTexture&&i.pbrMetallicRoughness.baseColorTexture.gfxTexture&&i.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),i.pbrMetallicRoughness.metallicRoughnessTexture&&i.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&i.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),i.normalTexture&&i.normalTexture.gfxTexture&&i.normalTexture.gfxTexture.destroy(),i.emissionTexture&&i.emissionTexture.gfxTexture&&i.emissionTexture.gfxTexture.destroy(),i.occlusionTexture&&i.occlusionTexture.gfxTexture&&i.occlusionTexture.gfxTexture.destroy()));var i;if(d.children)for(const u of d.children)jP(u)}class r_{constructor(i,u,f){this._demTile=i,this._dem=this._demTile.dem,this._scale=u,this._offset=f}static create(i,u,f){const y=f||i.findDEMTileFor(u);if(!y||!y.dem)return;const m=y.dem,_=y.tileID,b=1<<u.canonical.z-_.canonical.z;return new r_(y,m.dim/Na/b,[(u.canonical.x/b-_.canonical.x)*m.dim,(u.canonical.y/b-_.canonical.y)*m.dim])}tileCoordToPixel(i,u){const f=u*this._scale+this._offset[1],y=Math.floor(i*this._scale+this._offset[0]),m=Math.floor(f);return new Bt(y,m)}getElevationAt(i,u,f,y){const m=i*this._scale+this._offset[0],_=u*this._scale+this._offset[1],b=Math.floor(m),N=Math.floor(_),D=this._dem;return y=!!y,f?hr(hr(D.get(b,N,y),D.get(b,N+1,y),_-N),hr(D.get(b+1,N,y),D.get(b+1,N+1,y),_-N),m-b):D.get(b,N,y)}getElevationAtPixel(i,u,f){return this._dem.get(i,u,!!f)}getMeterToDEM(i){return(1<<this._demTile.tileID.canonical.z)*jo(1,i)*this._dem.stride}}const ZP=new Float32Array(262144),PA=new Uint8Array(262144);function UL(d){let i=0;if(d.meshes)for(const u of d.meshes)i=Math.max(i,u.aabb.max[2]);if(d.children)for(const u of d.children)i=Math.max(i,UL(u));return i}function kL(d,i,u){if(d.meshes)for(const f of d.meshes){if(f.aabb.min[0]===1/0)continue;const y=tr.applyTransform(f.aabb,d.matrix);u.insert(i,y.min[0],y.min[1],y.max[0],y.max[1])}if(d.children)for(const f of d.children)kL(f,i,u)}const BL=["","wall","door","roof","window","lamp","logo"];class GL{constructor(i){this.node=i,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.cameraCollisionOpacity=1,this.feature={type:"Point",id:i.id,geometry:[],properties:{height:UL(i)}},this.aabb=this._getLocalBounds(),this.state=null}_getLocalBounds(){if(!this.node.meshes)return new tr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let i=0;const u=new tr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const f of this.node.meshes)this.node.lightMeshIndex!==i&&(f.transformedAabb=tr.applyTransformFast(f.aabb,this.node.matrix),u.encapsulate(f.transformedAabb)),i++;this.aabb=u}return this.aabb}}class MS{constructor(i,u,f,y,m,_,b){this.id=f,this.layers=i,this.layerIds=this.layers.map(N=>N.fqid),this.stateDependentLayerIds=this.layers.filter(N=>N.isStateDependent()).map(N=>N.id),this.modelTraits|=a_.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,y&&(this.modelTraits|=a_.HasMapboxMeshFeatures),m&&(this.modelTraits|=a_.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=_,this.dirty=!0,this.needsUpload=!1,this.filter=null,this.nodesInfo=[];for(const N of u)this.nodesInfo.push(new GL(N)),kL(N,b.featureIndexArray.length,b.grid),b.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,b.bucketLayerIDs.length-1,0);this.states={}}updateFootprints(i,u){for(const f of this.getNodesInfo()){const y=f.node;y.footprint&&u.push({footprint:y.footprint,id:i})}}update(i){const u=Object.keys(i).length!==0;if(u&&!this.stateDependentLayers.length)return;const f=u?this.stateDependentLayers:this.layers;if(!la(i,this.states))for(const y of f)this.evaluate(y,i);this.states=structuredClone(i)}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(i){if(!this.needsUpload)return;const u=this.getNodesInfo();for(const f of u){const y=f.node;this.uploaded?this.updatePbrBuffer(y):GP(y,i,!0)}for(const f of u)DS(f.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(i){let u=!1;if(!i.meshes)return u;for(const f of i.meshes)f.pbrBuffer&&(f.pbrBuffer.updateData(f.featureArray),u=!0);return u}needsReEvaluation(i,u,f){const y=i.transform.projectionOptions,m=i.style.getBrightness(),_=this.brightness!==m;if(!this.uploaded||this.dirty||y.name!==this.projection.name||$1(f.paint.get("model-color").value,_)||$1(f.paint.get("model-color-mix-intensity").value,_)||$1(f.paint.get("model-roughness").value,_)||$1(f.paint.get("model-emissive-strength").value,_)||$1(f.paint.get("model-height-based-emissive-strength-multiplier").value,_)){this.projection=y,this.brightness=m;const b=this.getNodesInfo();for(const N of b)N.state=null;return!0}return!1}evaluateScale(i,u){if(i.transform.zoom===this.zoom)return;this.zoom=i.transform.zoom;const f=this.getNodesInfo(),y=this.id.canonical;for(const m of f){const _=m.feature;m.evaluatedScale=u.paint.get("model-scale").evaluate(_,{},y)}}evaluate(i,u){const f=this.getNodesInfo();for(const y of f){if(!y.node.meshes)continue;const m=y.feature,_=u&&u[m.id];if(la(_,y.state))continue;y.state=structuredClone(_);const b=y.node.meshes&&y.node.meshes[0].featureData,N=y.evaluatedColor[2],D=y.evaluatedRMEA[2],S=this.id.canonical;if(y.hasTranslucentParts=!1,b){for(let V=0;V<BL.length;V++){const I=BL[V];I.length&&(m.properties.part=I);const O=i.paint.get("model-color").evaluate(m,_,S).toRenderColor(null),M=i.paint.get("model-color-mix-intensity").evaluate(m,_,S);y.evaluatedColor[V]=[O.r,O.g,O.b,M],y.evaluatedRMEA[V][0]=i.paint.get("model-roughness").evaluate(m,_,S),y.evaluatedRMEA[V][2]=i.paint.get("model-emissive-strength").evaluate(m,_,S),y.evaluatedRMEA[V][3]=O.a,y.emissionHeightBasedParams[V]=i.paint.get("model-height-based-emissive-strength-multiplier").evaluate(m,_,S),!y.hasTranslucentParts&&O.a<1&&(y.hasTranslucentParts=!0)}delete m.properties.part,LQ(y,N!==y.evaluatedColor[2]||D!==y.evaluatedRMEA[2],this.modelTraits)}else y.evaluatedRMEA[0][2]=i.paint.get("model-emissive-strength").evaluate(m,_,S);y.evaluatedScale=i.paint.get("model-scale").evaluate(m,_,S),this.updatePbrBuffer(y.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(i,u,f,y){const m=i.findDEMTileFor(f);if(m&&(m.tileID.canonical!==this.terrainTile||u!==this.terrainExaggeration)){if(m.dem&&m.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=m.tileID.overscaledZ;const _=r_.create(i,f,m);if(!_)return;this.modelTraits&a_.HasMapboxMeshFeatures&&this.updateDEM(i,_,f,y);for(const b of this.getNodesInfo()){const N=b.node;if(!N.footprint||!N.footprint.vertices||!N.footprint.vertices.length)continue;const D=N.footprint.vertices;let S=_.getElevationAt(D[0].x,D[0].y,!0,!0);for(let V=1;V<D.length;V++)S=Math.min(S,_.getElevationAt(D[V].x,D[V].y,!0,!0));N.elevation=S}}this.terrainTile=m.tileID.canonical,this.terrainExaggeration=u}}updateDEM(i,u,f,y){let m=u._dem._modifiedForSources[y];if(m===void 0&&(u._dem._modifiedForSources[y]=[],m=u._dem._modifiedForSources[y]),m.includes(f.canonical))return;const _=u._dem.dim;m.push(f.canonical);let b=!1;for(const N of this.getNodesInfo()){const D=N.node;if(!D.footprint||!D.footprint.grid)continue;const S=D.footprint.grid,V=u.tileCoordToPixel(S.min.x,S.min.y),I=u.tileCoordToPixel(S.max.x,S.max.y),O=Math.min(Math.min(_-I.y,V.x),Math.min(V.y,_-I.x));if(O<0)continue;const M=ka(O,2,5);let B=Math.max(0,V.x-M),X=Math.max(0,V.y-M),ee=Math.min(I.x+M,_-1),ue=Math.min(I.y+M,_-1);for(let we=X;we<=ue;++we)for(let Pe=B;Pe<=ee;++Pe)PA[we*_+Pe]=255;let le=0,re=0;for(let we=0;we<S.cellsY;++we)for(let Pe=0;Pe<S.cellsX;++Pe){if(!S.cells[we*S.cellsX+Pe])continue;const We=u.tileCoordToPixel(S.min.x+Pe/S.xScale,S.min.y+we/S.yScale),je=u.tileCoordToPixel(S.min.x+(Pe+1)/S.xScale,S.min.y+(we+1)/S.yScale);for(let Ze=We.y;Ze<=Math.min(je.y+1,_-1);++Ze)for(let mt=We.x;mt<=Math.min(je.x+1,_-1);++mt)PA[Ze*_+mt]===255&&(PA[Ze*_+mt]=0,le+=u.getElevationAtPixel(mt,Ze),re++)}const pe=le/re;B=Math.max(1,V.x-M),X=Math.max(1,V.y-M),ee=Math.min(I.x+M,_-2),ue=Math.min(I.y+M,_-2),b=!0;for(let we=X;we<=ue;++we)for(let Pe=B;Pe<=ee;++Pe)PA[we*_+Pe]===0&&(ZP[we*_+Pe]=u._dem.set(Pe,we,pe));for(let we=1;we<M;++we){B=Math.max(1,V.x-we),X=Math.max(1,V.y-we),ee=Math.min(I.x+we,_-2),ue=Math.min(I.y+we,_-2);for(let Pe=X;Pe<=ue;++Pe)for(let We=B;We<=ee;++We){const je=Pe*_+We;if(PA[je]===255){let Ze=0,mt=0,Ye=-1,At=-1;for(let xt=-1;xt<=1;++xt)for(let St=-1;St<=1;++St){const Ot=(Pe+xt)*_+We+St;if(PA[Ot]>=we)continue;const Nt=ZP[Ot],Ut=Math.abs(Nt);Ut>mt&&(Ze=Nt,mt=Ut,Ye=St,At=xt)}if(mt>.1){const xt=1-(we+.5*Math.abs(Ye*At))/M;let St=u._dem.get(We,Pe)+Ze*xt;const Ot=u._dem.get(We+Ye,Pe+At),Nt=u._dem.get(We-Ye,Pe-At,!0);(St-Ot)*(St-Nt)>0&&(St=(Ot+Nt)/2),ZP[je]=u._dem.set(We,Pe,St),PA[je]=we}}}}}b&&(u._demTile.needsDEMTextureUpload=!0,u._dem._timestamp=qt.now())}setFilter(i){this.filter=i?dh(i):null}getNodesInfo(){return this.filter?this.nodesInfo.filter(i=>this.filter.filter(new vn(this.id.overscaledZ),i.feature,this.id.canonical)):this.nodesInfo}destroy(){const i=this.getNodesInfo();for(const u of i)DS(u.node),jP(u.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(i,u){if(u.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=u.updateTime;const f=u.getReplacementRegionsForTile(i.toUnwrapped()),y=this.getNodesInfo();for(let m=0;m<this.nodesInfo.length;m++){const _=y[m].node;y[m].hiddenByReplacement=!!_.footprint&&!f.find(b=>b.footprint===_.footprint)}}getHeightAtTileCoord(i,u){const f=this.getNodesInfo(),y=[],m=[0,0,0],_=_e.mat4.identity([]);for(let b=0;b<this.nodesInfo.length;b++){const N=f[b],D=N.node.meshes[0],S=D.transformedAabb;if(i<S.min[0]||u<S.min[1]||i>S.max[0]||u>S.max[1])continue;if(N.node.hidden===!0)return{height:1/0,maxHeight:N.feature.properties.height,hidden:!1,verticalScale:N.evaluatedScale[2]};_e.mat4.invert(_,N.node.matrix),m[0]=i,m[1]=u,_e.vec3.transformMat4(m,m,_);const V=(m[0]-D.aabb.min[0])/(D.aabb.max[0]-D.aabb.min[0])*xA|0,I=Math.min(63,(m[1]-D.aabb.min[1])/(D.aabb.max[1]-D.aabb.min[1])*xA|0)*xA+Math.min(63,V),O=D.heightmap[I];if(!(O<0&&N.node.footprint))return N.hiddenByReplacement?void 0:{height:O,maxHeight:N.feature.properties.height,hidden:!1,verticalScale:N.evaluatedScale[2]};if(N.node.footprint.grid.query(new Bt(i,u),new Bt(i,u),y),y.length>0)return{height:void 0,maxHeight:N.feature.properties.height,hidden:N.hiddenByReplacement,verticalScale:N.evaluatedScale[2]}}}}function $1(d,i){return!d.isLightConstant&&i}function IQ(d,i,u,f,y,m,_,b){let N=(61440&i|(61440&i)>>4)>>8,D=(3840&i|(3840&i)>>4)>>4,S=240&i|(240&i)>>4;u[3]>0&&(N=hr(N,255*u[0],u[3]),D=hr(D,255*u[1],u[3]),S=hr(S,255*u[2],u[3]));const V=N<<8|D,I=S<<8|Math.floor(255*f[3]),O=function(we){const Pe=ka(we,0,2);return Math.min(Math.round(.5*Pe*255),255)}(f[2])<<8|15*f[0]<<4|15*f[1],M=ka(y[0],0,1),B=ka(y[1],0,1),X=ka(y[2],0,1),ee=ka(y[3],0,1);let ue,le,re,pe;if(M!==B&&_!==m&&B!==M){const we=_-m;le=1/(we*(B-M)),re=-(m+we*M)/(we*(B-M));const Pe=ka(y[4],-1,1);pe=Math.pow(10,Pe),ue=255*X<<8|255*ee}else ue=65535,le=0,re=1,pe=1;if(d.emplaceBack(V,I,O,ue,le,re,pe),b){const we=b.length;b.clear();for(let Pe=0;Pe<we;Pe++)b.emplaceBack(V,I,O,ue,le,re,pe)}}function LQ(d,i,u){const f=d.node;let y=0;const m=u&a_.HasMeshoptCompression;for(const _ of f.meshes){if(f.lights&&f.lightMeshIndex===y||!_.featureData)continue;_.featureArray=new $p,_.featureArray.reserve(_.featureData.length);let b=i;for(const N of _.featureData){const D=m?65535&N:N>>16&65535,S=m?N>>16&65535:65535&N,V=(15&S)<8?15&S:0,I=d.evaluatedRMEA[V],O=d.evaluatedColor[V],M=d.emissionHeightBasedParams[V];let B;if(b&&V===2&&f.lights&&(B=new $p,B.resize(10*f.lights.length)),IQ(_.featureArray,D,O,I,M,_.aabb.min[2],_.aabb.max[2],B),B&&b){b=!1;const X=f.meshes[f.lightMeshIndex];X.featureArray=B,X.featureArray._trim()}}_.featureArray._trim(),y++}}function jL(d,i,u,f){const y=1<<d.z;i.lat=Ri((f/Na+d.y)/y),i.lng=Nu((u/Na+d.x)/y)}Pt(MS,"Tiled3dModelBucket",{omit:["layers"]}),Pt(GL,"Tiled3dModelFeature");const FQ={circle:class extends ao{constructor(d,i,u,f){super(d,{layout:It||(It=new Oi({"circle-sort-key":new Ua(Gt.layout_circle["circle-sort-key"]),"circle-elevation-reference":new Ca(Gt.layout_circle["circle-elevation-reference"]),visibility:new Ca(Gt.layout_circle.visibility)})),paint:ia||(ia=new Oi({"circle-radius":new Ua(Gt.paint_circle["circle-radius"]),"circle-color":new Ua(Gt.paint_circle["circle-color"]),"circle-blur":new Ua(Gt.paint_circle["circle-blur"]),"circle-opacity":new Ua(Gt.paint_circle["circle-opacity"]),"circle-translate":new Ca(Gt.paint_circle["circle-translate"]),"circle-translate-anchor":new Ca(Gt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ca(Gt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ca(Gt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ua(Gt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ua(Gt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ua(Gt.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new Ca(Gt.paint_circle["circle-emissive-strength"]),"circle-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"circle-stroke-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},i,u,f)}createBucket(d){return new ce(d)}queryRadius(d){const i=d;return Lt("circle-radius",this,i)+Lt("circle-stroke-width",this,i)+aa(this.paint.get("circle-translate"))}queryIntersectsFeature(d,i,u,f,y,m,_,b){const N=Sa(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),m.angle,d.pixelToTileUnitsFactor),D=this.paint.get("circle-radius").evaluate(i,u)+this.paint.get("circle-stroke-width").evaluate(i,u);return em(d,f,m,_,b,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",N,D)}getProgramIds(){return["circle"]}getDefaultProgramParams(d,i,u){const f=cp(this);return{config:new Ku(this,{zoom:i,lut:u}),defines:f,overrideFog:!1}}},heatmap:class extends ao{createBucket(d){return new N0(d)}constructor(d,i,u,f){super(d,{layout:Hm||(Hm=new Oi({visibility:new Ca(Gt.layout_heatmap.visibility)})),paint:t1||(t1=new Oi({"heatmap-radius":new Ua(Gt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ua(Gt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ca(Gt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ki(Gt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ca(Gt.paint_heatmap["heatmap-opacity"]),"heatmap-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},i,u,f),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(d){d==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=By({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(d){return Lt("heatmap-radius",this,d)}queryIntersectsFeature(d,i,u,f,y,m,_,b){const N=this.paint.get("heatmap-radius").evaluate(i,u);return em(d,f,m,_,b,!0,!0,new Bt(0,0),N)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(d,i,u){return d==="heatmap"?{config:new Ku(this,{zoom:i,lut:u}),overrideFog:!1}:{}}},hillshade:class extends ao{constructor(d,i,u,f){super(d,{layout:a1||(a1=new Oi({visibility:new Ca(Gt.layout_hillshade.visibility)})),paint:r1||(r1=new Oi({"hillshade-illumination-direction":new Ca(Gt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ca(Gt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ca(Gt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ca(Gt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ca(Gt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ca(Gt.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new Ca(Gt.paint_hillshade["hillshade-emissive-strength"]),"hillshade-shadow-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"hillshade-highlight-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"hillshade-accent-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},i,u,f)}shouldRedrape(){return this.hasOffscreenPass()&&this.paint.get("hillshade-illumination-anchor")==="viewport"}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(d,i,u){return{overrideFog:!1}}},fill:class extends ao{constructor(d,i,u,f){super(d,{layout:h1||(h1=new Oi({"fill-sort-key":new Ua(Gt.layout_fill["fill-sort-key"]),visibility:new Ca(Gt.layout_fill.visibility),"fill-elevation-reference":new Ca(Gt.layout_fill["fill-elevation-reference"]),"fill-construct-bridge-guard-rail":new Ua(Gt.layout_fill["fill-construct-bridge-guard-rail"])})),paint:f1||(f1=new Oi({"fill-antialias":new Ca(Gt.paint_fill["fill-antialias"]),"fill-opacity":new Ua(Gt.paint_fill["fill-opacity"]),"fill-color":new Ua(Gt.paint_fill["fill-color"]),"fill-outline-color":new Ua(Gt.paint_fill["fill-outline-color"]),"fill-translate":new Ca(Gt.paint_fill["fill-translate"]),"fill-translate-anchor":new Ca(Gt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ua(Gt.paint_fill["fill-pattern"]),"fill-emissive-strength":new Ca(Gt.paint_fill["fill-emissive-strength"]),"fill-z-offset":new Ua(Gt.paint_fill["fill-z-offset"]),"fill-bridge-guard-rail-color":new Ua(Gt.paint_fill["fill-bridge-guard-rail-color"]),"fill-tunnel-structure-color":new Ua(Gt.paint_fill["fill-tunnel-structure-color"]),"fill-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"fill-outline-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"fill-bridge-guard-rail-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"fill-tunnel-structure-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},i,u,f)}getProgramIds(){const d=this.paint.get("fill-pattern"),i=d&&d.constantOr(1),u=[i?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&u.push(i&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),u}getDefaultProgramParams(d,i,u){return{config:new Ku(this,{zoom:i,lut:u}),overrideFog:!1}}recalculate(d,i){super.recalculate(d,i);const u=this.paint._values["fill-outline-color"];u.value.kind==="constant"&&u.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(d){return new Ky(d)}queryRadius(){return aa(this.paint.get("fill-translate"))}queryIntersectsFeature(d,i,u,f,y,m){return!d.queryGeometry.isAboveHorizon&&Ee(ua(d.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),m.angle,d.pixelToTileUnitsFactor),f)}isTileClipped(){return this.paint.get("fill-z-offset").constantOr(1)===0}is3D(d){if(this.paint.get("fill-z-offset").constantOr(1)!==0)return!0;const i=this.layout&&this.layout.get("fill-elevation-reference")!=="none";return d!=null?i&&!d:i}},"fill-extrusion":class extends ao{constructor(d,i,u,f){super(d,{layout:K0||(K0=new Oi({visibility:new Ca(Gt["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new Ca(Gt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])})),paint:P1||(P1=new Oi({"fill-extrusion-opacity":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ua(Gt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ua(Gt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ua(Gt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ua(Gt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-height-alignment":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-height-alignment"]),"fill-extrusion-base-alignment":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-base-alignment"]),"fill-extrusion-vertical-gradient":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new Ua(Gt["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new Ua(Gt["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new Ua(Gt["paint_fill-extrusion"]["fill-extrusion-emissive-strength"]),"fill-extrusion-line-width":new Ua(Gt["paint_fill-extrusion"]["fill-extrusion-line-width"]),"fill-extrusion-cast-shadows":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-cast-shadows"]),"fill-extrusion-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"fill-extrusion-flood-light-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},i,u,f),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(d){return new q0(d)}queryRadius(){return aa(this.paint.get("fill-extrusion-translate"))}is3D(d){return!0}hasShadowPass(){return this.paint.get("fill-extrusion-cast-shadows")}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(d,i,u,f,y,m,_,b,N){const D=Sa(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),m.angle,d.pixelToTileUnitsFactor),S=this.paint.get("fill-extrusion-height").evaluate(i,u),V=this.paint.get("fill-extrusion-base").evaluate(i,u),I=[0,0],O=b&&m.elevation,M=m.elevation?m.elevation.exaggeration():1,B=d.tile.getBucket(this);if(O&&B instanceof q0){const re=B.centroidVertexArray,pe=N+1;pe<re.length&&(I[0]=re.geta_centroid_pos0(pe),I[1]=re.geta_centroid_pos1(pe))}if(I[0]===0&&I[1]===1)return!1;m.projection.name==="globe"&&(f=x1([f],[new Bt(0,0),new Bt(Na,Na)],d.tileID.canonical).map(re=>re.polygon).flat());const X=O?b:null,[ee,ue]=function(re,pe,we,Pe,We,je,Ze,mt,Ye,At,xt){return re.projection.name==="globe"?function(St,Ot,Nt,Ut,Mt,jt,ga,ma,Ya,xa,Oa){const _a=[],Ar=[],$a=St.projection.upVectorScale(Oa,St.center.lat,St.worldSize).metersToTile,or=[0,0,0,1],Dr=[0,0,0,1],Jr=(dn,Xr,wn,$n)=>{dn[0]=Xr,dn[1]=wn,dn[2]=$n,dn[3]=1},kr=b1();Nt>0&&(Nt+=kr),Ut+=kr;for(const dn of Ot){const Xr=[],wn=[];for(const $n of dn){const Ei=$n.x+Mt.x,Lr=$n.y+Mt.y,En=St.projection.projectTilePoint(Ei,Lr,Oa),Yi=St.projection.upVector(Oa,$n.x,$n.y);let ls=Nt,ys=Ut;if(ga){const Ns=uS(Ei,Lr,Nt,Ut,ga,ma,Ya,xa);ls+=Ns.base,ys+=Ns.top}Nt!==0?Jr(or,En.x+Yi[0]*$a*ls,En.y+Yi[1]*$a*ls,En.z+Yi[2]*$a*ls):Jr(or,En.x,En.y,En.z),Jr(Dr,En.x+Yi[0]*$a*ys,En.y+Yi[1]*$a*ys,En.z+Yi[2]*$a*ys),_e.vec3.transformMat4(or,or,jt),_e.vec3.transformMat4(Dr,Dr,jt),Xr.push(new zu(or[0],or[1],or[2])),wn.push(new zu(Dr[0],Dr[1],Dr[2]))}_a.push(Xr),Ar.push(wn)}return[_a,Ar]}(re,pe,we,Pe,We,je,Ze,mt,Ye,At,xt):Ze?function(St,Ot,Nt,Ut,Mt,jt,ga,ma,Ya){const xa=[],Oa=[],_a=[0,0,0,1];for(const Ar of St){const $a=[],or=[];for(const Dr of Ar){const Jr=Dr.x+Ut.x,kr=Dr.y+Ut.y,dn=uS(Jr,kr,Ot,Nt,jt,ga,ma,Ya);_a[0]=Jr,_a[1]=kr,_a[2]=dn.base,_a[3]=1,_e.vec4.transformMat4(_a,_a,Mt),_a[3]=Math.max(_a[3],1e-5);const Xr=new zu(_a[0]/_a[3],_a[1]/_a[3],_a[2]/_a[3]);_a[0]=Jr,_a[1]=kr,_a[2]=dn.top,_a[3]=1,_e.vec4.transformMat4(_a,_a,Mt),_a[3]=Math.max(_a[3],1e-5);const wn=new zu(_a[0]/_a[3],_a[1]/_a[3],_a[2]/_a[3]);$a.push(Xr),or.push(wn)}xa.push($a),Oa.push(or)}return[xa,Oa]}(pe,we,Pe,We,je,Ze,mt,Ye,At):function(St,Ot,Nt,Ut,Mt){const jt=[],ga=[],ma=Mt[8]*Ot,Ya=Mt[9]*Ot,xa=Mt[10]*Ot,Oa=Mt[11]*Ot,_a=Mt[8]*Nt,Ar=Mt[9]*Nt,$a=Mt[10]*Nt,or=Mt[11]*Nt;for(const Dr of St){const Jr=[],kr=[];for(const dn of Dr){const Xr=dn.x+Ut.x,wn=dn.y+Ut.y,$n=Mt[0]*Xr+Mt[4]*wn+Mt[12],Ei=Mt[1]*Xr+Mt[5]*wn+Mt[13],Lr=Mt[2]*Xr+Mt[6]*wn+Mt[14],En=Mt[3]*Xr+Mt[7]*wn+Mt[15],Yi=$n+ma,ls=Ei+Ya,ys=Lr+xa,Ns=Math.max(En+Oa,1e-5),Si=$n+_a,ul=Ei+Ar,Sc=Lr+$a,Ao=Math.max(En+or,1e-5);Jr.push(new zu(Yi/Ns,ls/Ns,ys/Ns)),kr.push(new zu(Si/Ao,ul/Ao,Sc/Ao))}jt.push(Jr),ga.push(kr)}return[jt,ga]}(pe,we,Pe,We,je)}(m,f,V,S,D,_,X,I,M,m.center.lat,d.tileID.canonical),le=d.queryGeometry;return function(re,pe,we){let Pe=1/0;Ee(we,pe)&&(Pe=lS(we,pe[0]));for(let We=0;We<pe.length;We++){const je=pe[We],Ze=re[We];for(let mt=0;mt<je.length-1;mt++){const Ye=je[mt],At=[Ye,je[mt+1],Ze[mt+1],Ze[mt],Ye];Te(we,At)&&(Pe=Math.min(Pe,lS(we,At)))}}return Pe!==1/0&&Pe}(ee,ue,le.isPointQuery()?le.screenBounds:le.screenGeometry)}},line:class extends ao{constructor(d,i,u,f){const y=L1();super(d,y,i,u,f),y.layout&&(this.layout=new Su(y.layout)),this.gradientVersion=0,this.hasElevatedBuckets=!1,this.hasNonElevatedBuckets=!1}_handleSpecialPaintPropertyUpdate(d){if(d==="line-gradient"){const i=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=i._styleExpression&&i._styleExpression.expression instanceof Jl,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(d,i){super.recalculate(d,i),this.paint._values["line-floorwidth"]=(()=>{if(Jm)return Jm;const u=L1();return Jm=new SA(u.paint.properties["line-width"].specification),Jm.useIntegerZoom=!0,Jm})().possiblyEvaluate(this._transitioningPaint._values["line-width"].value,d)}createBucket(d){return new zf(d)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(d,i,u){const f=hS(this);return{config:new Ku(this,{zoom:i,lut:u}),defines:f,overrideFog:!1}}queryRadius(d){const i=d,u=CA(Lt("line-width",this,i),Lt("line-gap-width",this,i)),f=Lt("line-offset",this,i);return u/2+Math.abs(f)+aa(this.paint.get("line-translate"))}queryIntersectsFeature(d,i,u,f,y,m){if(d.queryGeometry.isAboveHorizon)return!1;const _=ua(d.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),m.angle,d.pixelToTileUnitsFactor),b=d.pixelToTileUnitsFactor/2*CA(this.paint.get("line-width").evaluate(i,u),this.paint.get("line-gap-width").evaluate(i,u)),N=this.paint.get("line-offset").evaluate(i,u);return N&&(f=function(D,S){const V=[],I=new Bt(0,0);for(let O=0;O<D.length;O++){const M=D[O],B=[];for(let X=0;X<M.length;X++){const ee=M[X],ue=M[X+1],le=X===0?I:ee.sub(M[X-1])._unit()._perp(),re=X===M.length-1?I:ue.sub(ee)._unit()._perp(),pe=le._add(re)._unit();pe._mult(1/(pe.x*re.x+pe.y*re.y)),B.push(pe._mult(S)._add(ee))}V.push(B)}return V}(f,N*d.pixelToTileUnitsFactor)),function(D,S,V){for(let I=0;I<S.length;I++){const O=S[I];if(D.length>=3){for(let M=0;M<O.length;M++)if(ot(D,O[M]))return!0}if(Ve(D,O,V))return!0}return!1}(_,f,b)}isTileClipped(){return this.hasNonElevatedBuckets}isDraped(d){return!this.hasElevatedBuckets}},symbol:xS,background:class extends ao{constructor(d,i,u,f){super(d,{layout:pL||(pL=new Oi({visibility:new Ca(Gt.layout_background.visibility)})),paint:mL||(mL=new Oi({"background-pitch-alignment":new Ca(Gt.paint_background["background-pitch-alignment"]),"background-color":new Ca(Gt.paint_background["background-color"]),"background-pattern":new Ca(Gt.paint_background["background-pattern"]),"background-opacity":new Ca(Gt.paint_background["background-opacity"]),"background-emissive-strength":new Ca(Gt.paint_background["background-emissive-strength"]),"background-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},i,u,f)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(d,i,u){return{overrideFog:!1}}is3D(d){return this.paint.get("background-pitch-alignment")==="viewport"}},raster:vL,"raster-particle":bL,sky:class extends ao{constructor(d,i,u,f){super(d,{layout:TL||(TL=new Oi({visibility:new Ca(Gt.layout_sky.visibility)})),paint:SL||(SL=new Oi({"sky-type":new Ca(Gt.paint_sky["sky-type"]),"sky-atmosphere-sun":new Ca(Gt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Ca(Gt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Ca(Gt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Ca(Gt.paint_sky["sky-gradient-radius"]),"sky-gradient":new Ki(Gt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Ca(Gt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Ca(Gt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Ca(Gt.paint_sky["sky-opacity"]),"sky-gradient-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-halo-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},i,u,f),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(d){d==="sky-gradient"?this._updateColorRamp():d!=="sky-atmosphere-sun"&&d!=="sky-atmosphere-halo-color"&&d!=="sky-atmosphere-color"&&d!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=By({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(d){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const i=d.style.light.properties.get("position");return this._lightPosition.azimuthal!==i.azimuthal||this._lightPosition.polar!==i.polar}return!1}getCenter(d,i){if(this.paint.get("sky-type")==="atmosphere"){const f=this.paint.get("sky-atmosphere-sun"),y=!f,m=d.style.light,_=m.properties.get("position");return y&&m.properties.get("anchor")==="viewport"&&en("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),y?FP(_.azimuthal,90-_.polar,i):FP(f[0],90-f[1],i)}const u=this.paint.get("sky-gradient-center");return FP(u[0],90-u[1],i)}isSky(){return!0}markSkyboxValid(d){this._skyboxInvalidated=!1,this._lightPosition=d.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const d=this.paint.get("sky-type");return d==="atmosphere"?["skyboxCapture","skybox"]:d==="gradient"?["skyboxGradient"]:null}},slot:class extends ao{constructor(d,i,u,f){super(d,{paint:CL||(CL=new Oi({}))},i,null)}},model:class extends ao{constructor(d,i,u,f){super(d,{layout:IL||(IL=new Oi({visibility:new Ca(Gt.layout_model.visibility),"model-id":new Ua(Gt.layout_model["model-id"])})),paint:LL||(LL=new Oi({"model-opacity":new Ua(Gt.paint_model["model-opacity"]),"model-rotation":new Ua(Gt.paint_model["model-rotation"]),"model-scale":new Ua(Gt.paint_model["model-scale"]),"model-translation":new Ua(Gt.paint_model["model-translation"]),"model-color":new Ua(Gt.paint_model["model-color"]),"model-color-mix-intensity":new Ua(Gt.paint_model["model-color-mix-intensity"]),"model-type":new Ca(Gt.paint_model["model-type"]),"model-cast-shadows":new Ca(Gt.paint_model["model-cast-shadows"]),"model-receive-shadows":new Ca(Gt.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new Ca(Gt.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new Ua(Gt.paint_model["model-emissive-strength"]),"model-roughness":new Ua(Gt.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new Ua(Gt.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new Ca(Gt.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new Ca(Gt.paint_model["model-front-cutoff"]),"model-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},i,u,f),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(d){return new BP(d)}getProgramIds(){return["model"]}is3D(d){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(d){return d instanceof MS?Na-1:0}queryIntersectsFeature(d,i,u,f,y,m){if(!this.modelManager)return!1;const _=this.modelManager,b=d.tile.getBucket(this);if(!(b&&b instanceof BP))return!1;for(const N in b.instancesPerModel){const D=b.instancesPerModel[N],S=i.id!==void 0?i.id:i.properties&&i.properties.hasOwnProperty("id")?i.properties.id:void 0;if(D.idToFeaturesIndex.hasOwnProperty(S)){const V=D.features[D.idToFeaturesIndex[S]],I=_.getModel(N,this.scope);if(!I)return!1;let O=_e.mat4.create();const M=new Ln(0,0),B=b.canonical;let X=Number.MAX_VALUE;for(let ee=0;ee<V.instancedDataCount;++ee){const ue=16*(V.instancedDataOffset+ee),le=D.instancedDataArray.float32,re=[le[ue+4],le[ue+5],le[ue+6]];jL(B,M,le[ue],0|le[ue+1]),FL(O,I,m,M,V.rotation,V.scale,re,!1,!1,!1),m.projection.name==="globe"&&(O=kP(O,m));const pe=_e.mat4.multiply([],m.projMatrix,O),we=d.queryGeometry,Pe=VL(we.isPointQuery()?we.screenBounds:we.screenGeometry,m,pe,I.aabb);Pe!=null&&(X=Math.min(Pe,X))}return X!==Number.MAX_VALUE&&X}}return!1}_handleOverridablePaintPropertyUpdate(d,i,u){return!(!this.layout||i.isDataDriven()||u.isDataDriven()||d!=="model-color"&&d!=="model-color-mix-intensity"&&d!=="model-rotation"&&d!=="model-scale"&&d!=="model-translation"&&d!=="model-emissive-strength")}_isPropertyZoomDependent(d){const i=this._transitionablePaint._values[d];return i!=null&&i.value!=null&&i.value.expression!=null&&i.value.expression instanceof fe}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}},clip:class extends ao{constructor(d,i,u,f){super(d,{layout:B0||(B0=new Oi({"clip-layer-types":new Ca(Gt.layout_clip["clip-layer-types"]),"clip-layer-scope":new Ca(Gt.layout_clip["clip-layer-scope"])})),paint:G0||(G0=new Oi({}))},i,u,f)}recalculate(d,i){super.recalculate(d,i)}createBucket(d){return new WT(d)}is3D(d){return!0}}};class UQ{constructor(i){this._callback=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class kQ{constructor(){this.tasks={},this.taskQueue=[],Qa(["process"],this),this.invoker=new UQ(this.process),this.nextId=0}add(i,u){const f=this.nextId++,y=function({type:m,isSymbolTile:_,zoom:b}){return b=b||0,m==="message"?0:m!=="maybePrepare"||_?m!=="parseTile"||_?m==="parseTile"&&_?300-b:m==="maybePrepare"&&_?400-b:500:200-b:100-b}(u);if(y===0){try{i()}finally{}return null}return this.tasks[f]={fn:i,metadata:u,priority:y,id:f},this.taskQueue.push(f),this.invoker.trigger(),{cancel:()=>{delete this.tasks[f]}}}process(){try{if(this.taskQueue=this.taskQueue.filter(f=>!!this.tasks[f]),!this.taskQueue.length)return;const i=this.pick();if(i===null)return;const u=this.tasks[i];if(delete this.tasks[i],this.taskQueue.length&&this.invoker.trigger(),!u)return;u.fn()}finally{}}pick(){let i=null,u=1/0;for(let y=0;y<this.taskQueue.length;y++){const m=this.tasks[this.taskQueue[y]];m.priority<u&&(u=m.priority,i=y)}if(i===null)return null;const f=this.taskQueue[i];return this.taskQueue.splice(i,1),f}remove(){this.invoker.remove()}}class ZL{constructor(i,u,f){this.target=i,this.parent=u,this.mapId=f,this.callbacks={},this.cancelCallbacks={},Qa(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new kQ}send(i,u,f,y,m=!1,_){const b=Math.round(1e18*Math.random()).toString(36).substring(0,10);f&&(f.metadata=_,this.callbacks[b]=f);const N=new Set;return this.target.postMessage({id:b,type:i,hasCallback:!!f,targetMapId:y,mustQueue:m,sourceMapId:this.mapId,data:wa(u,N)},N),{cancel:()=>{f&&delete this.callbacks[b],this.target.postMessage({id:b,type:"<cancel>",targetMapId:y,sourceMapId:this.mapId})}}}receive(i){const u=i.data;if(!u)return;const f=u.id;if(f&&(!u.targetMapId||this.mapId===u.targetMapId))if(u.type==="<cancel>"){const y=this.cancelCallbacks[f];delete this.cancelCallbacks[f],y&&y.cancel()}else if(u.mustQueue||Qi()){const y=this.callbacks[f],m=this.scheduler.add(()=>this.processTask(f,u),y&&y.metadata||{type:"message"});m&&(this.cancelCallbacks[f]=m)}else this.processTask(f,u)}processTask(i,u){if(delete this.cancelCallbacks[i],u.type==="<response>"){const f=this.callbacks[i];delete this.callbacks[i],f&&(u.error?f(fa(u.error)):f(null,fa(u.data)))}else{const f=new Set,y=u.hasCallback?(_,b)=>{this.target.postMessage({id:i,type:"<response>",sourceMapId:this.mapId,error:_?wa(_):null,data:wa(b,f)},f)}:()=>{},m=fa(u.data);if(this.parent[u.type])this.parent[u.type](u.sourceMapId,m,y);else if(this.parent.getWorkerSource){const _=u.type.split(".");this.parent.getWorkerSource(u.sourceMapId,_[0],m.source,m.scope)[_[1]](m,y)}else y(new Error(`Could not find function ${u.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}var K1={workerUrl:"",workerClass:null,workerParams:void 0};const qP="mapboxgl_preloaded_worker_pool";class EA{constructor(){this.active={}}acquire(i,u=EA.workerCount){if(!this.workers)for(this.workers=[];this.workers.length<u;)this.workers.push(K1.workerClass!=null?new K1.workerClass:new self.Worker(K1.workerUrl,K1.workerParams));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.workers&&this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[qP]}numActive(){return Object.keys(this.active).length}}EA.workerCount=2;class n_{constructor(i,u,f="Worker",y=EA.workerCount){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=Wa();const m=this.workerPool.acquire(this.id,y);for(let _=0;_<m.length;_++){const b=new n_.Actor(m[_],u,this.id);b.name=`${f} ${_}`,this.actors.push(b)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(i,u,f){Dn(this.actors,(y,m)=>{y.send(i,u,m)},f=f||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(i=>{i.remove()}),this.actors=[],this.workerPool.release(this.id)}}let W1,HP;function IS(){return W1||(W1=new EA),W1}n_.Actor=ZL;const $P=new bn(0,0,0);var KP=(d=>(d[d.PATH_RULE_UNSPECIFIED=0]="PATH_RULE_UNSPECIFIED",d[d.PATH_RULE_NON_ZERO=1]="PATH_RULE_NON_ZERO",d[d.PATH_RULE_EVEN_ODD=2]="PATH_RULE_EVEN_ODD",d))(KP||{}),LS=(d=>(d[d.LINE_CAP_UNSPECIFIED=0]="LINE_CAP_UNSPECIFIED",d[d.LINE_CAP_BUTT=1]="LINE_CAP_BUTT",d[d.LINE_CAP_ROUND=2]="LINE_CAP_ROUND",d[d.LINE_CAP_SQUARE=3]="LINE_CAP_SQUARE",d))(LS||{}),Y1=(d=>(d[d.LINE_JOIN_UNSPECIFIED=0]="LINE_JOIN_UNSPECIFIED",d[d.LINE_JOIN_MITER=1]="LINE_JOIN_MITER",d[d.LINE_JOIN_MITER_CLIP=2]="LINE_JOIN_MITER_CLIP",d[d.LINE_JOIN_ROUND=3]="LINE_JOIN_ROUND",d[d.LINE_JOIN_BEVEL=4]="LINE_JOIN_BEVEL",d))(Y1||{}),qL=(d=>(d[d.PAINT_ORDER_UNSPECIFIED=0]="PAINT_ORDER_UNSPECIFIED",d[d.PAINT_ORDER_FILL_AND_STROKE=1]="PAINT_ORDER_FILL_AND_STROKE",d[d.PAINT_ORDER_STROKE_AND_FILL=2]="PAINT_ORDER_STROKE_AND_FILL",d))(qL||{}),i_=(d=>(d[d.PATH_COMMAND_UNSPECIFIED=0]="PATH_COMMAND_UNSPECIFIED",d[d.PATH_COMMAND_MOVE=1]="PATH_COMMAND_MOVE",d[d.PATH_COMMAND_LINE=2]="PATH_COMMAND_LINE",d[d.PATH_COMMAND_QUAD=3]="PATH_COMMAND_QUAD",d[d.PATH_COMMAND_CUBIC=4]="PATH_COMMAND_CUBIC",d[d.PATH_COMMAND_CLOSE=5]="PATH_COMMAND_CLOSE",d))(i_||{}),HL=(d=>(d[d.MASK_TYPE_UNSPECIFIED=0]="MASK_TYPE_UNSPECIFIED",d[d.MASK_TYPE_LUMINANCE=1]="MASK_TYPE_LUMINANCE",d[d.MASK_TYPE_ALPHA=2]="MASK_TYPE_ALPHA",d))(HL||{});function BQ(d,i,u){d===1&&i.icons.push(function(f,y){return function(m){if(m.usvg_tree.height||(m.usvg_tree.height=m.usvg_tree.width),!m.metadata)return m;const{metadata:_}=m;if(_.content_area){const{content_area:b}=_;b.top==null&&(b.top=b.left),b.width==null&&(b.width=m.usvg_tree.width),b.height==null&&(b.height=b.width)}return _.stretch_x&&_.stretch_x.length&&$L(_,"x"),_.stretch_y&&_.stretch_y.length&&$L(_,"y"),m}(f.readFields(GQ,{name:void 0},y))}(u,u.readVarint()+u.pos))}function $L(d,i){const u=[],f=d[`stretch_${i}`];let y=null;for(let m=0;m<f.length;m++)y===null?y=u.length===0?f[0]:u[u.length-1][1]+f[m]:(u.push([y,y+f[m]]),y=null);d[`stretch_${i}_areas`]=u}function GQ(d,i,u){d===1?i.name=u.readString():d===2?i.metadata=function(f,y){return f.readFields(jQ,{stretch_x:null,stretch_y:null,stretch_x_areas:null,stretch_y_areas:null,variables:[]},y)}(u,u.readVarint()+u.pos):d===3&&(i.usvg_tree=function(f,y){return f.readFields(HQ,{width:20,children:[],linear_gradients:[],radial_gradients:[],clip_paths:[],masks:[]},y)}(u,u.readVarint()+u.pos),i.data="usvg_tree")}function jQ(d,i,u){d===1?i.stretch_x=u.readPackedVarint():d===2?i.stretch_y=u.readPackedVarint():d===3?i.content_area=function(f,y){return f.readFields(ZQ,{left:0},y)}(u,u.readVarint()+u.pos):d===4&&i.variables.push(function(f,y){return f.readFields(qQ,{name:void 0},y)}(u,u.readVarint()+u.pos))}function ZQ(d,i,u){d===1?i.left=u.readVarint():d===2?i.width=u.readVarint():d===3?i.top=u.readVarint():d===4&&(i.height=u.readVarint())}function qQ(d,i,u){d===1?i.name=u.readString():d===2&&(i.rgb_color=kS(u.readVarint()),i.value="rgb_color")}function HQ(d,i,u){d===1?i.width=i.height=u.readVarint():d===2?i.height=u.readVarint():d===3?i.children.push(FS(u,u.readVarint()+u.pos)):d===4?i.linear_gradients.push(function(f,y){return f.readFields(QQ,{spread_method:1,stops:[],x1:0,y1:0,x2:1,y2:0},y)}(u,u.readVarint()+u.pos)):d===5?i.radial_gradients.push(function(f,y){return f.readFields(tee,{spread_method:1,stops:[],cx:.5,cy:.5,r:.5,fx:.5,fy:.5,fr:0},y)}(u,u.readVarint()+u.pos)):d===7?i.clip_paths.push(function(f,y){return f.readFields(aee,{children:[]},y)}(u,u.readVarint()+u.pos)):d===8&&i.masks.push(function(f,y){const m=f.readFields(ree,{left:0,width:20,mask_type:1,children:[]},y);return m.height==null&&(m.height=m.width),m.top==null&&(m.top=m.left),m}(u,u.readVarint()+u.pos))}function FS(d,i){return d.readFields($Q,{},i)}function $Q(d,i,u){d===1?(i.group=function(f,y){return f.readFields(KQ,{opacity:255,children:[]},y)}(u,u.readVarint()+u.pos),i.node="group"):d===2&&(i.path=function(f,y){return f.readFields(YQ,{paint_order:1,commands:[],step:1,diffs:[],rule:1},y)}(u,u.readVarint()+u.pos),i.node="path")}function KQ(d,i,u){d===1?i.transform=US(u,u.readVarint()+u.pos):d===2?i.opacity=u.readVarint():d===5?i.clip_path_idx=u.readVarint():d===6?i.mask_idx=u.readVarint():d===7&&i.children.push(FS(u,u.readVarint()+u.pos))}function US(d,i){return d.readFields(WQ,{sx:1,ky:0,kx:0,sy:1,tx:0,ty:0},i)}function WQ(d,i,u){d===1?i.sx=u.readFloat():d===2?i.ky=u.readFloat():d===3?i.kx=u.readFloat():d===4?i.sy=u.readFloat():d===5?i.tx=u.readFloat():d===6&&(i.ty=u.readFloat())}function YQ(d,i,u){d===1?i.fill=function(f,y){return f.readFields(XQ,{rgb_color:$P,paint:"rgb_color",opacity:255},y)}(u,u.readVarint()+u.pos):d===2?i.stroke=function(f,y){return f.readFields(JQ,{rgb_color:$P,paint:"rgb_color",dasharray:[],dashoffset:0,miterlimit:4,opacity:255,width:1,linecap:1,linejoin:1},y)}(u,u.readVarint()+u.pos):d===3?i.paint_order=u.readVarint():d===5?u.readPackedVarint(i.commands):d===6?i.step=u.readFloat():d===7?u.readPackedSVarint(i.diffs):d===8&&(i.rule=u.readVarint())}function XQ(d,i,u){d===1?(i.rgb_color=kS(u.readVarint()),i.paint="rgb_color"):d===2?(i.linear_gradient_idx=u.readVarint(),i.paint="linear_gradient_idx"):d===3?(i.radial_gradient_idx=u.readVarint(),i.paint="radial_gradient_idx"):d===5&&(i.opacity=u.readVarint())}function kS(d){return new bn((d>>16&255)/255,(d>>8&255)/255,(255&d)/255,1)}function JQ(d,i,u){d===1?(i.rgb_color=kS(u.readVarint()),i.paint="rgb_color"):d===2?(i.linear_gradient_idx=u.readVarint(),i.paint="linear_gradient_idx"):d===3?(i.radial_gradient_idx=u.readVarint(),i.paint="radial_gradient_idx"):d===5?u.readPackedFloat(i.dasharray):d===6?i.dashoffset=u.readFloat():d===7?i.miterlimit=u.readFloat():d===8?i.opacity=u.readVarint():d===9?i.width=u.readFloat():d===10?i.linecap=u.readVarint():d===11&&(i.linejoin=u.readVarint())}function QQ(d,i,u){d===1?i.transform=US(u,u.readVarint()+u.pos):d===2?i.spread_method=u.readVarint():d===3?i.stops.push(KL(u,u.readVarint()+u.pos)):d===4?i.x1=u.readFloat():d===5?i.y1=u.readFloat():d===6?i.x2=u.readFloat():d===7&&(i.y2=u.readFloat())}function KL(d,i){return d.readFields(eee,{offset:0,opacity:255,rgb_color:$P},i)}function eee(d,i,u){d===1?i.offset=u.readFloat():d===2?i.opacity=u.readVarint():d===3&&(i.rgb_color=kS(u.readVarint()))}function tee(d,i,u){d===1?i.transform=US(u,u.readVarint()+u.pos):d===2?i.spread_method=u.readVarint():d===3?i.stops.push(KL(u,u.readVarint()+u.pos)):d===4?i.cx=u.readFloat():d===5?i.cy=u.readFloat():d===6?i.r=u.readFloat():d===7?i.fx=u.readFloat():d===8?i.fy=u.readFloat():d===9&&(i.fr=u.readFloat())}function aee(d,i,u){d===1?i.transform=US(u,u.readVarint()+u.pos):d===2?i.clip_path_idx=u.readVarint():d===3&&i.children.push(FS(u,u.readVarint()+u.pos))}function ree(d,i,u){d===1?i.left=i.top=u.readFloat():d===2?i.width=i.height=u.readFloat():d===3?i.top=u.readFloat():d===4?i.height=u.readFloat():d===5?i.mask_type=u.readVarint():d===6?i.mask_idx=u.readVarint():d===7&&i.children.push(FS(u,u.readVarint()+u.pos))}class nee{static calculate(i={},u=[]){const f=new Map,y=new Map;if(Object.keys(i).length===0)return f;u.forEach(m=>{y.set(m.name,m.rgb_color||new bn(0,0,0))});for(const[m,_]of Object.entries(i))y.has(m)?f.set(y.get(m).toStringPremultipliedAlpha(),_):console.warn(`Ignoring unknown image variable "${m}"`);return f}}function s_(d,i=255,u){const f=i/255,y=d.toStringPremultipliedAlpha(),m=u.has(y)?u.get(y).clone():d.clone();return m.a*=f,m.toString()}function X1(d,i){if(!$t()){const u=document.createElement("canvas");return u.width=d,u.height=i,u}return new OffscreenCanvas(d,i)}function iee(d,i){const u=nee.calculate(i.params,d.metadata?d.metadata.variables:[]),f=d.usvg_tree,y=f.width,m=f.height,_=i.transform?i.transform:new DOMMatrix,b=Math.max(1,Math.round(y*_.a)),N=Math.max(1,Math.round(m*_.d)),D=new DOMMatrix([b/y,0,0,N/m,0,0]),S=X1(b,N).getContext("2d");return WP(S,D,f,f,u),S.getImageData(0,0,b,N)}function WP(d,i,u,f,y){for(const m of f.children)WL(d,i,u,m,y)}function WL(d,i,u,f,y){f.group?(d.save(),function(m,_,b,N,D){const S=N.mask_idx!=null?b.masks[N.mask_idx]:null,V=N.clip_path_idx!=null?b.clip_paths[N.clip_path_idx]:null;if(N.transform&&(_=BS(N.transform).preMultiplySelf(_)),!function(M,B,X){return M.opacity!==255||B||X}(N,V!=null,S!=null))return void WP(m,_,b,N,D);const I=X1(m.canvas.width,m.canvas.height),O=I.getContext("2d");WP(O,_,b,N,D),V&&aF(O,_,b,V),S&&rF(O,_,b,S,D),m.globalAlpha=N.opacity/255,m.drawImage(I,0,0)}(d,i,u,f.group,y),d.restore()):f.path&&(d.save(),function(m,_,b,N,D){const S=nF(N);m.setTransform(_),N.paint_order===qL.PAINT_ORDER_FILL_AND_STROKE?(YL(m,b,N,S,D),JL(m,b,N,S,D)):(JL(m,b,N,S,D),YL(m,b,N,S,D))}(d,i,u,f.path,y),d.restore())}function YL(d,i,u,f,y){const m=u.fill;if(!m)return;const _=m.opacity/255;switch(m.paint){case"rgb_color":d.fillStyle=s_(m.rgb_color,m.opacity,y);break;case"linear_gradient_idx":d.fillStyle=QL(d,i.linear_gradients[m.linear_gradient_idx],_,y);break;case"radial_gradient_idx":d.fillStyle=eF(d,i.radial_gradients[m.radial_gradient_idx],_,y)}d.fill(f,XL(u))}function XL(d){return d.rule===KP.PATH_RULE_NON_ZERO?"nonzero":d.rule===KP.PATH_RULE_EVEN_ODD?"evenodd":void 0}function JL(d,i,u,f,y){const m=u.stroke;if(!m)return;d.lineWidth=m.width,d.miterLimit=m.miterlimit,d.setLineDash(m.dasharray),d.lineDashOffset=m.dashoffset;const _=m.opacity/255;switch(m.paint){case"rgb_color":d.strokeStyle=s_(m.rgb_color,m.opacity,y);break;case"linear_gradient_idx":d.strokeStyle=QL(d,i.linear_gradients[m.linear_gradient_idx],_,y);break;case"radial_gradient_idx":d.strokeStyle=eF(d,i.radial_gradients[m.radial_gradient_idx],_,y)}switch(m.linejoin){case Y1.LINE_JOIN_MITER_CLIP:case Y1.LINE_JOIN_MITER:d.lineJoin="miter";break;case Y1.LINE_JOIN_ROUND:d.lineJoin="round";break;case Y1.LINE_JOIN_BEVEL:d.lineJoin="bevel"}switch(m.linecap){case LS.LINE_CAP_BUTT:d.lineCap="butt";break;case LS.LINE_CAP_ROUND:d.lineCap="round";break;case LS.LINE_CAP_SQUARE:d.lineCap="square"}d.stroke(f)}function QL(d,i,u,f){if(i.stops.length===1){const I=i.stops[0];return s_(I.rgb_color,I.opacity*u,f)}const y=BS(i.transform),{x1:m,y1:_,x2:b,y2:N}=i,D=y.transformPoint(new DOMPoint(m,_)),S=y.transformPoint(new DOMPoint(b,N)),V=d.createLinearGradient(D.x,D.y,S.x,S.y);for(const I of i.stops)V.addColorStop(I.offset,s_(I.rgb_color,I.opacity*u,f));return V}function eF(d,i,u,f){if(i.stops.length===1){const I=i.stops[0];return s_(I.rgb_color,I.opacity*u,f)}const y=BS(i.transform),{fx:m,fy:_,cx:b,cy:N}=i,D=y.transformPoint(new DOMPoint(m,_)),S=y.transformPoint(new DOMPoint(b,N)),V=d.createRadialGradient(D.x,D.y,0,S.x,S.y,i.r*((y.a+y.d)/2));for(const I of i.stops)V.addColorStop(I.offset,s_(I.rgb_color,I.opacity*u,f));return V}function tF(d,i,u,f){const y=f.transform?BS(f.transform).preMultiplySelf(i):i,m=X1(d.canvas.width,d.canvas.height),_=m.getContext("2d");for(const N of f.children)if(N.group)tF(_,y,u,N.group);else if(N.path){const D=N.path,S=new Path2D;S.addPath(nF(D),y),_.fill(S,XL(D))}const b=f.clip_path_idx!=null?u.clip_paths[f.clip_path_idx]:null;b&&aF(_,y,u,b),d.globalCompositeOperation="source-over",d.drawImage(m,0,0)}function aF(d,i,u,f){const y=X1(d.canvas.width,d.canvas.height);tF(y.getContext("2d"),i,u,f),d.globalCompositeOperation="destination-in",d.drawImage(y,0,0)}function rF(d,i,u,f,y){if(f.children.length===0)return;const m=f.mask_idx!=null?u.masks[f.mask_idx]:null;m&&rF(d,i,u,m,y);const _=d.canvas.width,b=d.canvas.height,N=X1(_,b),D=N.getContext("2d"),S=f.width,V=f.height,I=f.left,O=f.top,M=new Path2D,B=new Path2D;B.rect(I,O,S,V),M.addPath(B,i),D.clip(M);for(const ue of f.children)WL(D,i,u,ue,y);const X=D.getImageData(0,0,_,b),ee=X.data;if(f.mask_type===HL.MASK_TYPE_LUMINANCE)for(let ue=0;ue<ee.length;ue+=4)ee[ue+3]=ee[ue+3]/255*(.2126*ee[ue]+.7152*ee[ue+1]+.0722*ee[ue+2]);D.putImageData(X,0,0),d.globalCompositeOperation="destination-in",d.drawImage(N,0,0)}function BS(d){return d?new DOMMatrix([d.sx,d.ky,d.kx,d.sy,d.tx,d.ty]):new DOMMatrix}function nF(d){const i=new Path2D,u=d.step;let f=d.diffs[0]*u,y=d.diffs[1]*u;i.moveTo(f,y);for(let m=0,_=2;m<d.commands.length;m++)switch(d.commands[m]){case i_.PATH_COMMAND_MOVE:f+=d.diffs[_++]*u,y+=d.diffs[_++]*u,i.moveTo(f,y);break;case i_.PATH_COMMAND_LINE:f+=d.diffs[_++]*u,y+=d.diffs[_++]*u,i.lineTo(f,y);break;case i_.PATH_COMMAND_QUAD:{const b=f+d.diffs[_++]*u,N=y+d.diffs[_++]*u;f=b+d.diffs[_++]*u,y=N+d.diffs[_++]*u,i.quadraticCurveTo(b,N,f,y);break}case i_.PATH_COMMAND_CUBIC:{const b=f+d.diffs[_++]*u,N=y+d.diffs[_++]*u,D=b+d.diffs[_++]*u,S=N+d.diffs[_++]*u;f=D+d.diffs[_++]*u,y=S+d.diffs[_++]*u,i.bezierCurveTo(b,N,D,S,f,y);break}case i_.PATH_COMMAND_CLOSE:i.closePath()}return i}class GS{constructor(i){this.capacity=i,this.cache=new Map}get(i){if(!this.cache.has(i))return;const u=this.cache.get(i);return this.cache.delete(i),this.cache.set(i,u),u}put(i,u){this.cache.has(i)?this.cache.delete(i):this.cache.size===this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(i,u)}delete(i){this.cache.delete(i)}}Pt(GS,"LRUCache");class YP{constructor(){this.cacheMap=new Map,this.cacheDependenciesMap=new Map}static _getImage(i){return new wl(i,i.data)}getFromCache(i,u,f){return this.cacheMap.has(f)||this.cacheMap.set(f,new GS(150)),this.cacheMap.get(f).get($c(i.toString(),u))}setInCache(i,u,f,y){this.cacheDependenciesMap.has(y)||this.cacheDependenciesMap.set(y,new Map),this.cacheMap.has(y)||this.cacheMap.set(y,new GS(150));const m=this.cacheDependenciesMap.get(y),_=$c(i.id.toString(),f);m.get(_)||m.set(_,new Set);const b=this.cacheMap.get(y),N=i.toString();m.get(_).add(N),b.put($c(i.toString(),f),u)}removeImagesFromCacheByIds(i,u,f=0){if(!this.cacheMap.has(f)||!this.cacheDependenciesMap.has(f))return;const y=this.cacheMap.get(f),m=this.cacheDependenciesMap.get(f);for(const _ of i){const b=$c(_.toString(),u);if(m.has(b)){for(const N of m.get(b))y.delete(N);m.delete(b)}}}rasterize(i,u,f,y,m=iee){const _=this.getFromCache(i,f,y);if(_)return _.clone();const b=m(u.icon,i.options),N=YP._getImage(b);return this.setInCache(i,N,f,y),N.clone()}}class iF{constructor(i){this.size=i,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(i,u){const f=this.toIdx(i,u);return{min:this.minimums[f],max:this.maximums[f]}}isLeaf(i,u){return this.leaves[this.toIdx(i,u)]}toIdx(i,u){return u*this.size+i}}function sF(d,i,u,f){let y=0,m=Number.MAX_VALUE;for(let _=0;_<3;_++)if(Math.abs(f[_])<1e-15){if(u[_]<d[_]||u[_]>i[_])return null}else{const b=1/f[_];let N=(d[_]-u[_])*b,D=(i[_]-u[_])*b;if(N>D){const S=N;N=D,D=S}if(N>y&&(y=N),D<m&&(m=D),y>m)return null}return y}function oF(d,i,u,f,y,m,_,b,N,D,S){const V=f-d,I=y-i,O=m-u,M=_-d,B=b-i,X=N-u,ee=S[1]*X-S[2]*B,ue=S[2]*M-S[0]*X,le=S[0]*B-S[1]*M,re=V*ee+I*ue+O*le;if(Math.abs(re)<1e-15)return null;const pe=1/re,we=D[0]-d,Pe=D[1]-i,We=D[2]-u,je=(we*ee+Pe*ue+We*le)*pe;if(je<0||je>1)return null;const Ze=Pe*O-We*I,mt=We*V-we*O,Ye=we*I-Pe*V,At=(S[0]*Ze+S[1]*mt+S[2]*Ye)*pe;return At<0||je+At>1?null:(M*Ze+B*mt+X*Ye)*pe}function lF(d,i,u){return(d-i)/(u-i)}function uF(d,i,u,f,y,m,_,b,N){const D=1<<u,S=m-f,V=_-y,I=(d+1)/D*S+f,O=(i+0)/D*V+y,M=(i+1)/D*V+y;b[0]=(d+0)/D*S+f,b[1]=O,N[0]=I,N[1]=M}class cF{constructor(i){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=i,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const u=function(m){const _=Math.ceil(Math.log2(m.dim/8)),b=[];let N=Math.ceil(Math.pow(2,_));const D=1/N,S=(O,M,B,X,ee)=>{const ue=X?1:0,le=(O+1)*B-ue,re=M*B,pe=(M+1)*B-ue;ee[0]=O*B,ee[1]=re,ee[2]=le,ee[3]=pe};let V=new iF(N);const I=[];for(let O=0;O<N*N;O++){S(O%N,Math.floor(O/N),D,!1,I);const M=ng(I[0],I[1],m),B=ng(I[2],I[1],m),X=ng(I[2],I[3],m),ee=ng(I[0],I[3],m);V.minimums.push(Math.min(M,B,X,ee)),V.maximums.push(Math.max(M,B,X,ee)),V.leaves.push(1)}for(b.push(V),N/=2;N>=1;N/=2){const O=b[b.length-1];V=new iF(N);for(let M=0;M<N*N;M++){S(M%N,Math.floor(M/N),2,!0,I);const B=O.getElevation(I[0],I[1]),X=O.getElevation(I[2],I[1]),ee=O.getElevation(I[2],I[3]),ue=O.getElevation(I[0],I[3]),le=O.isLeaf(I[0],I[1]),re=O.isLeaf(I[2],I[1]),pe=O.isLeaf(I[2],I[3]),we=O.isLeaf(I[0],I[3]),Pe=Math.min(B.min,X.min,ee.min,ue.min),We=Math.max(B.max,X.max,ee.max,ue.max),je=le&&re&&pe&&we;V.maximums.push(We),V.minimums.push(Pe),V.leaves.push(We-Pe<=5&&je?1:0)}b.push(V)}return b}(this.dem),f=u.length-1,y=u[f];this._addNode(y.minimums[0],y.maximums[0],y.leaves[0]),this._construct(u,0,0,f,0)}raycastRoot(i,u,f,y,m,_,b=1){return sF([i,u,-100],[f,y,this.maximums[0]*b],m,_)}raycast(i,u,f,y,m,_,b=1){if(!this.nodeCount)return null;const N=this.raycastRoot(i,u,f,y,m,_,b);if(N==null)return null;const D=[],S=[],V=[],I=[],O=[{idx:0,t:N,nodex:0,nodey:0,depth:0}];for(;O.length>0;){const{idx:M,t:B,nodex:X,nodey:ee,depth:ue}=O.pop();if(this.leaves[M]){uF(X,ee,ue,i,u,f,y,V,I);const re=1<<ue,pe=(X+0)/re,we=(X+1)/re,Pe=(ee+0)/re,We=(ee+1)/re,je=ng(pe,Pe,this.dem)*b,Ze=ng(we,Pe,this.dem)*b,mt=ng(we,We,this.dem)*b,Ye=ng(pe,We,this.dem)*b,At=oF(V[0],V[1],je,I[0],V[1],Ze,I[0],I[1],mt,m,_),xt=oF(I[0],I[1],mt,V[0],I[1],Ye,V[0],V[1],je,m,_),St=Math.min(At!==null?At:Number.MAX_VALUE,xt!==null?xt:Number.MAX_VALUE);if(St!==Number.MAX_VALUE)return St;{const Ot=_e.vec3.scaleAndAdd([],m,_,B);if(dF(je,Ze,Ye,mt,lF(Ot[0],V[0],I[0]),lF(Ot[1],V[1],I[1]))>=Ot[2])return B}continue}let le=0;for(let re=0;re<this._siblingOffset.length;re++){uF((X<<1)+this._siblingOffset[re][0],(ee<<1)+this._siblingOffset[re][1],ue+1,i,u,f,y,V,I),V[2]=-100,I[2]=this.maximums[this.childOffsets[M]+re]*b;const pe=sF(V,I,m,_);if(pe!=null){const we=pe;D[re]=we;let Pe=!1;for(let We=0;We<le&&!Pe;We++)we>=D[S[We]]&&(S.splice(We,0,re),Pe=!0);Pe||(S[le]=re),le++}}for(let re=0;re<le;re++){const pe=S[re];O.push({idx:this.childOffsets[M]+pe,t:D[pe],nodex:(X<<1)+this._siblingOffset[pe][0],nodey:(ee<<1)+this._siblingOffset[pe][1],depth:ue+1})}}return null}_addNode(i,u,f){return this.minimums.push(i),this.maximums.push(u),this.leaves.push(f),this.childOffsets.push(0),this.nodeCount++}_construct(i,u,f,y,m){if(i[y].isLeaf(u,f)===1)return;this.childOffsets[m]||(this.childOffsets[m]=this.nodeCount);const _=y-1,b=i[_];let N=0,D=0;for(let S=0;S<this._siblingOffset.length;S++){const V=2*u+this._siblingOffset[S][0],I=2*f+this._siblingOffset[S][1],O=b.getElevation(V,I),M=b.isLeaf(V,I),B=this._addNode(O.min,O.max,M);M&&(N|=1<<S),D||(D=B)}for(let S=0;S<this._siblingOffset.length;S++)N&1<<S||this._construct(i,2*u+this._siblingOffset[S][0],2*f+this._siblingOffset[S][1],_,D+S)}}function dF(d,i,u,f,y,m){return hr(hr(d,u,m),hr(i,f,m),y)}function ng(d,i,u){const f=u.dim,y=ka(d*f-.5,0,f-1),m=ka(i*f-.5,0,f-1),_=Math.floor(y),b=Math.floor(m),N=Math.min(_+1,f-1),D=Math.min(b+1,f-1);return dF(u.get(_,b),u.get(N,b),u.get(_,D),u.get(N,D),y-_,m-b)}const see={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function oee(d,i,u){return(256*d*256+256*i+u)/10-1e4}function lee(d,i,u){return 256*d+i+u/256-32768}class jS{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(i,u,f,y=!1){if(this.uid=i,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(f&&f!=="mapbox"&&f!=="terrarium")return void en(`"${f}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=u.height;const m=this.dim=u.height-2,_=new Uint32Array(u.data.buffer);if(this.pixels=new Uint8Array(u.data.buffer),this.floatView=new Float32Array(u.data.buffer),this.borderReady=y,this._modifiedForSources={},!y){for(let N=0;N<m;N++)_[this._idx(-1,N)]=_[this._idx(0,N)],_[this._idx(m,N)]=_[this._idx(m-1,N)],_[this._idx(N,-1)]=_[this._idx(N,0)],_[this._idx(N,m)]=_[this._idx(N,m-1)];_[this._idx(-1,-1)]=_[this._idx(0,0)],_[this._idx(m,-1)]=_[this._idx(m-1,0)],_[this._idx(-1,m)]=_[this._idx(0,m-1)],_[this._idx(m,m)]=_[this._idx(m-1,m-1)]}const b=f==="terrarium"?lee:oee;for(let N=0;N<_.length;++N){const D=4*N;this.floatView[N]=b(this.pixels[D],this.pixels[D+1],this.pixels[D+2])}this._timestamp=qt.now()}_buildQuadTree(){this._tree=new cF(this)}get(i,u,f=!1){f&&(i=ka(i,-1,this.dim),u=ka(u,-1,this.dim));const y=this._idx(i,u);return this.floatView[y]}set(i,u,f){const y=this._idx(i,u),m=this.floatView[y];return this.floatView[y]=f,f-m}static getUnpackVector(i){return see[i]}_idx(i,u){if(i<-1||i>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(i+1)}static pack(i,u){const f=[0,0,0,0],y=jS.getUnpackVector(u);let m=Math.floor((i+y[3])/y[2]);return f[2]=m%256,m=Math.floor(m/256),f[1]=m%256,m=Math.floor(m/256),f[0]=m,f}getPixels(){return new i1({width:this.stride,height:this.stride},this.pixels)}backfillBorder(i,u,f){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let y=u*this.dim,m=u*this.dim+this.dim,_=f*this.dim,b=f*this.dim+this.dim;switch(u){case-1:y=m-1;break;case 1:m=y+1}switch(f){case-1:_=b-1;break;case 1:b=_+1}const N=-u*this.dim,D=-f*this.dim;for(let S=_;S<b;S++)for(let V=y;V<m;V++){const I=4*this._idx(V,S),O=4*this._idx(V+N,S+D);this.pixels[I+0]=i.pixels[O+0],this.pixels[I+1]=i.pixels[O+1],this.pixels[I+2]=i.pixels[O+2],this.pixels[I+3]=i.pixels[O+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}function uee(d,i,u){d===1?i.headerLength=u.readFixed32():d===2?i.x=u.readVarint():d===3?i.y=u.readVarint():d===4?i.z=u.readVarint():d===5&&i.layers.push(function(f,y){return f.readFields(pee,{version:0,name:"",units:"",tileSize:0,buffer:0,pixelFormat:0,dataIndex:[]},y)}(u,u.readVarint()+u.pos))}function cee(d,i,u){d===1?(i.delta_filter=function(f,y){return f.readFields(dee,{blockSize:0},y)}(u,u.readVarint()+u.pos),i.filter="delta_filter"):d===2?(u.readVarint(),i.filter="zigzag_filter"):d===3?(u.readVarint(),i.filter="bitshuffle_filter"):d===4&&(u.readVarint(),i.filter="byteshuffle_filter")}function dee(d,i,u){d===1&&(i.blockSize=u.readVarint())}function hee(d,i,u){d===1?(u.readVarint(),i.codec="gzip_data"):d===2?(u.readVarint(),i.codec="jpeg_image"):d===3?(u.readVarint(),i.codec="webp_image"):d===4&&(u.readVarint(),i.codec="png_image")}function fee(d,i,u){let f=0,y=0;d===1?i.firstByte=u.readFixed64():d===2?i.lastByte=u.readFixed64():d===3?i.filters.push(function(m,_){return m.readFields(cee,{},_)}(u,u.readVarint()+u.pos)):d===4?i.codec=function(m,_){return m.readFields(hee,{},_)}(u,u.readVarint()+u.pos):d===5?y=u.readFloat():d===6?f=u.readFloat():d===7?i.bands.push(u.readString()):d===8?i.offset=u.readDouble():d===9&&(i.scale=u.readDouble()),i.offset===0&&(i.offset=y),i.scale===0&&(i.scale=f)}function pee(d,i,u){d===1?i.version=u.readVarint():d===2?i.name=u.readString():d===3?i.units=u.readString():d===4?i.tileSize=u.readVarint():d===5?i.buffer=u.readVarint():d===6?i.pixelFormat=u.readVarint():d===7&&i.dataIndex.push(function(f,y){return f.readFields(fee,{firstByte:0,lastByte:0,filters:[],codec:null,offset:0,scale:0,bands:[]},y)}(u,u.readVarint()+u.pos))}function mee(d,i,u){if(d===2)(function(f,y,m){f.readFields(yee,m,y)})(u,u.readVarint()+u.pos,i);else if(d===3)throw new Error("Not implemented")}function yee(d,i,u){if(d===1){let f=0;const y=u.readVarint()+u.pos;for(;u.pos<y;)i[f++]=u.readVarint()}}function gee(d,i){if(i.length!==4)throw new Error(`Expected data of dimension 4 but got ${i.length}.`);let u=i[3];for(let f=2;f>=1;f--){const y=f===1?1:0,m=f===2?1:0;for(let _=0;_<i[0];_++){const b=i[1]*_;for(let N=y;N<i[1];N++){const D=i[2]*(N+b);for(let S=m;S<i[2];S++){const V=i[3]*(S+D);for(let I=0;I<i[3];I++){const O=V+I;d[O]+=d[O-u]}}}}u*=i[f]}return d}function Aee(d){for(let i=0,u=d.length;i<u;i++)d[i]=d[i]>>>1^-(1&d[i]);return d}function _ee(d,i){switch(i){case"uint32":return d;case"uint16":for(let u=0;u<d.length;u+=2){const f=d[u],y=d[u+1];d[u]=(240&f)>>4|(61440&f)>>8|(240&y)<<4|61440&y,d[u+1]=15&f|(3840&f)>>4|(15&y)<<8|(3840&y)<<4}return d;case"uint8":for(let u=0;u<d.length;u+=4){const f=d[u],y=d[u+1],m=d[u+2],_=d[u+3];d[u+0]=(192&f)>>6|(192&y)>>4|(192&m)>>2|192&_,d[u+1]=(48&f)>>4|(48&y)>>2|48&m|(48&_)<<2,d[u+2]=(12&f)>>2|12&y|(12&m)<<2|(12&_)<<4,d[u+3]=3&f|(3&y)<<2|(3&m)<<4|(3&_)<<6}return d;default:throw new Error(`Invalid pixel format, "${i}"`)}}Pt(jS,"DEMData"),Pt(cF,"DemMinMaxQuadTree",{omit:["dem"]});var Wh=Uint8Array,J1=Uint16Array,vee=Int32Array,hF=new Wh([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fF=new Wh([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),wee=new Wh([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),pF=function(d,i){for(var u=new J1(31),f=0;f<31;++f)u[f]=i+=1<<d[f-1];var y=new vee(u[30]);for(f=1;f<30;++f)for(var m=u[f];m<u[f+1];++m)y[m]=m-u[f]<<5|f;return{b:u,r:y}},mF=pF(hF,2),yF=mF.b,Ree=mF.r;yF[28]=258,Ree[258]=28;for(var Tee=pF(fF,0).b,gF=new J1(32768),bo=0;bo<32768;++bo){var o_=(43690&bo)>>1|(21845&bo)<<1;gF[bo]=((65280&(o_=(61680&(o_=(52428&o_)>>2|(13107&o_)<<2))>>4|(3855&o_)<<4))>>8|(255&o_)<<8)>>1}var Q1=function(d,i,u){for(var f=d.length,y=0,m=new J1(i);y<f;++y)d[y]&&++m[d[y]-1];var _,b=new J1(i);for(y=1;y<i;++y)b[y]=b[y-1]+m[y-1]<<1;_=new J1(1<<i);var N=15-i;for(y=0;y<f;++y)if(d[y])for(var D=y<<4|d[y],S=i-d[y],V=b[d[y]-1]++<<S,I=V|(1<<S)-1;V<=I;++V)_[gF[V]>>N]=D;return _},ew=new Wh(288);for(bo=0;bo<144;++bo)ew[bo]=8;for(bo=144;bo<256;++bo)ew[bo]=9;for(bo=256;bo<280;++bo)ew[bo]=7;for(bo=280;bo<288;++bo)ew[bo]=8;var AF=new Wh(32);for(bo=0;bo<32;++bo)AF[bo]=5;var See=Q1(ew,9),Cee=Q1(AF,5),XP=function(d){for(var i=d[0],u=1;u<d.length;++u)d[u]>i&&(i=d[u]);return i},mp=function(d,i,u){var f=i/8|0;return(d[f]|d[f+1]<<8)>>(7&i)&u},JP=function(d,i){var u=i/8|0;return(d[u]|d[u+1]<<8|d[u+2]<<16)>>(7&i)},bee=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],yp=function(d,i,u){var f=new Error(i||bee[d]);if(f.code=d,Error.captureStackTrace&&Error.captureStackTrace(f,yp),!u)throw f;return f},xee=new Wh(0),Pee=typeof TextDecoder<"u"&&new TextDecoder;try{Pee.decode(xee,{stream:!0})}catch{}const Eee={gzip_data:"gzip"};class Of extends Error{constructor(i){super(i),this.name="MRTError"}}const Nee={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},_F={uint32:1,uint16:2,uint8:4},Vee={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};let QP;class ZS{constructor(i=5){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=i}getLayer(i){const u=this.layers[i];if(!u)throw new Of(`Layer '${i}' not found`);return u}getHeaderLength(i){const u=new Uint8Array(i),f=new DataView(i);if(u[0]!==13)throw new Of("File is not a valid MRT.");return f.getUint32(1,!0)}parseHeader(i){const u=new Uint8Array(i),f=this.getHeaderLength(i);if(u.length<f)throw new Of(`Expected header with length >= ${f} but got buffer of length ${u.length}`);const y=function(m,_){return m.readFields(uee,{headerLength:0,x:0,y:0,z:0,layers:[]},void 0)}(new QP(u.subarray(0,f)));if(!isNaN(this.x)&&(this.x!==y.x||this.y!==y.y||this.z!==y.z))throw new Of(`Invalid attempt to parse header ${y.z}/${y.x}/${y.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=y.x,this.y=y.y,this.z=y.z;for(const m of y.layers)this.layers[m.name]=new vF(m,{cacheSize:this._cacheSize});return this}createDecodingTask(i){const u=[],f=this.getLayer(i.layerName);for(let y of i.blockIndices){const m=f.dataIndex[y],_=m.firstByte-i.firstByte,b=m.lastByte-i.firstByte;if(f._blocksInProgress.has(y))continue;const N={layerName:f.name,firstByte:_,lastByte:b,pixelFormat:f.pixelFormat,blockIndex:y,blockShape:[m.bands.length].concat(f.bandShape),buffer:f.buffer,codec:m.codec.codec,filters:m.filters.map(D=>D.filter)};f._blocksInProgress.add(y),u.push(N)}return new wF(u,()=>{u.forEach(y=>f._blocksInProgress.delete(y.blockIndex))},(y,m)=>{if(u.forEach(_=>f._blocksInProgress.delete(_.blockIndex)),y)throw y;m.forEach(_=>{this.getLayer(_.layerName).processDecodedData(_)})})}}class vF{constructor({version:i,name:u,units:f,tileSize:y,pixelFormat:m,buffer:_,dataIndex:b},N){if(this.version=i,this.version!==1)throw new Of(`Cannot parse raster layer encoded with MRT version ${i}`);this.name=u,this.units=f,this.tileSize=y,this.buffer=_,this.pixelFormat=Nee[m],this.dataIndex=b,this.bandShape=[y+2*_,y+2*_,_F[this.pixelFormat]],this._decodedBlocks=new GS(N?N.cacheSize:5),this._blocksInProgress=new Set}get dimension(){return _F[this.pixelFormat]}get cacheSize(){return this._decodedBlocks.capacity}getBandList(){return this.dataIndex.map(({bands:i})=>i).flat()}processDecodedData(i){const u=i.blockIndex.toString();this._decodedBlocks.get(u)||this._decodedBlocks.put(u,i.data)}getBlockForBand(i){let u=0;switch(typeof i){case"string":for(const[f,y]of this.dataIndex.entries()){for(const[m,_]of y.bands.entries())if(_===i)return{bandIndex:u+m,blockIndex:f,blockBandIndex:m};u+=y.bands.length}break;case"number":for(const[f,y]of this.dataIndex.entries()){if(i>=u&&i<u+y.bands.length)return{bandIndex:i,blockIndex:f,blockBandIndex:i-u};u+=y.bands.length}break;default:throw new Of(`Invalid band \`${JSON.stringify(i)}\`. Expected string or integer.`)}throw new Of(`Band not found: ${JSON.stringify(i)}`)}getDataRange(i){let u=1/0,f=-1/0;const y=[],m=new Set;for(const _ of i){const{blockIndex:b}=this.getBlockForBand(_);if(b<0)throw new Of(`Invalid band: ${JSON.stringify(_)}`);const N=this.dataIndex[b];y.includes(b)||y.push(b),m.add(b),u=Math.min(u,N.firstByte),f=Math.max(f,N.lastByte)}if(m.size>this.cacheSize)throw new Of(`Number of blocks to decode (${m.size}) exceeds cache size (${this.cacheSize}).`);return{layerName:this.name,firstByte:u,lastByte:f,blockIndices:y}}hasBand(i){const{blockIndex:u}=this.getBlockForBand(i);return u>=0}hasDataForBand(i){const{blockIndex:u}=this.getBlockForBand(i);return u>=0&&!!this._decodedBlocks.get(u.toString())}getBandView(i){const{blockIndex:u,blockBandIndex:f}=this.getBlockForBand(i),y=this._decodedBlocks.get(u.toString());if(!y)throw new Of(`Data for band ${JSON.stringify(i)} of layer "${this.name}" not decoded.`);const m=this.dataIndex[u],_=this.bandShape.reduce((D,S)=>D*S,1),b=f*_,N=y.subarray(b,b+_);return{data:N,bytes:new Uint8Array(N.buffer).subarray(N.byteOffset,N.byteOffset+N.byteLength),tileSize:this.tileSize,buffer:this.buffer,pixelFormat:this.pixelFormat,dimension:this.dimension,offset:m.offset,scale:m.scale}}}ZS.setPbf=function(d){QP=d};class wF{constructor(i,u,f){this.tasks=i,this._onCancel=u,this._onComplete=f,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(i,u){this._finalized||(this._onComplete(i,u),this._finalized=!0)}}ZS.performDecoding=function(d,i){const u=new Uint8Array(d);return Promise.all(i.tasks.map(f=>{const{layerName:y,firstByte:m,lastByte:_,pixelFormat:b,blockShape:N,blockIndex:D,filters:S,codec:V}=f,I=u.subarray(m,_+1),O=new Uint32Array(N[0]*N[1]*N[2]);let M;if(V!=="gzip_data")throw new Of(`Unhandled codec: ${V}`);return M=function(B,X){if(!globalThis.DecompressionStream&&X==="gzip_data")return Promise.resolve(((re=function(Pe){Pe[0]==31&&Pe[1]==139&&Pe[2]==8||yp(6,"invalid gzip data");var We=Pe[3],je=10;4&We&&(je+=2+(Pe[10]|Pe[11]<<8));for(var Ze=(We>>3&1)+(We>>4&1);Ze>0;Ze-=!Pe[je++]);return je+(2&We)}(le=B))+8>le.length&&yp(6,"invalid gzip data"),function(Pe,We,je,Ze){var mt=Pe.length;if(!mt||We.f&&!We.l)return je||new Wh(0);var Ye=!je,At=Ye||We.i!=2,xt=We.i;Ye&&(je=new Wh(3*mt));var St,Ot,Nt=function(sg){var og=je.length;if(sg>og){var VA=new Wh(Math.max(2*og,sg));VA.set(je),je=VA}},Ut=We.f||0,Mt=We.p||0,jt=We.b||0,ga=We.l,ma=We.d,Ya=We.m,xa=We.n,Oa=8*mt;do{if(!ga){Ut=mp(Pe,Mt,1);var _a=mp(Pe,Mt+1,3);if(Mt+=3,!_a){var Ar=Pe[(Lr=4+((Mt+7)/8|0))-4]|Pe[Lr-3]<<8,$a=Lr+Ar;if($a>mt){xt&&yp(0);break}At&&Nt(jt+Ar),je.set(Pe.subarray(Lr,$a),jt),We.b=jt+=Ar,We.p=Mt=8*$a,We.f=Ut;continue}if(_a==1)ga=See,ma=Cee,Ya=9,xa=5;else if(_a==2){var or=mp(Pe,Mt,31)+257,Dr=mp(Pe,Mt+10,15)+4,Jr=or+mp(Pe,Mt+5,31)+1;Mt+=14;for(var kr=new Wh(Jr),dn=new Wh(19),Xr=0;Xr<Dr;++Xr)dn[wee[Xr]]=mp(Pe,Mt+3*Xr,7);Mt+=3*Dr;var wn=XP(dn),$n=(1<<wn)-1,Ei=Q1(dn,wn);for(Xr=0;Xr<Jr;){var Lr,En=Ei[mp(Pe,Mt,$n)];if(Mt+=15&En,(Lr=En>>4)<16)kr[Xr++]=Lr;else{var Yi=0,ls=0;for(Lr==16?(ls=3+mp(Pe,Mt,3),Mt+=2,Yi=kr[Xr-1]):Lr==17?(ls=3+mp(Pe,Mt,7),Mt+=3):Lr==18&&(ls=11+mp(Pe,Mt,127),Mt+=7);ls--;)kr[Xr++]=Yi}}var ys=kr.subarray(0,or),Ns=kr.subarray(or);Ya=XP(ys),xa=XP(Ns),ga=Q1(ys,Ya),ma=Q1(Ns,xa)}else yp(1);if(Mt>Oa){xt&&yp(0);break}}At&&Nt(jt+131072);for(var Si=(1<<Ya)-1,ul=(1<<xa)-1,Sc=Mt;;Sc=Mt){var Ao=(Yi=ga[JP(Pe,Mt)&Si])>>4;if((Mt+=15&Yi)>Oa){xt&&yp(0);break}if(Yi||yp(2),Ao<256)je[jt++]=Ao;else{if(Ao==256){Sc=Mt,ga=null;break}var xo=Ao-254;Ao>264&&(xo=mp(Pe,Mt,(1<<(Yh=hF[Xr=Ao-257]))-1)+yF[Xr],Mt+=Yh);var Ou=ma[JP(Pe,Mt)&ul],Ll=Ou>>4;if(Ou||yp(3),Mt+=15&Ou,Ns=Tee[Ll],Ll>3){var Yh=fF[Ll];Ns+=JP(Pe,Mt)&(1<<Yh)-1,Mt+=Yh}if(Mt>Oa){xt&&yp(0);break}At&&Nt(jt+131072);var ig=jt+xo;if(jt<Ns){var Df=0-Ns,Ap=Math.min(Ns,ig);for(Df+jt<0&&yp(3);jt<Ap;++jt)je[jt]=(void 0)[Df+jt]}for(;jt<ig;++jt)je[jt]=je[jt-Ns]}}We.l=ga,We.p=Sc,We.b=jt,We.f=Ut,ga&&(Ut=1,We.m=Ya,We.d=ma,We.n=xa)}while(!Ut);return jt!=je.length&&Ye?(St=je,((Ot=jt)==null||Ot>St.length)&&(Ot=St.length),new Wh(St.subarray(0,Ot))):je.subarray(0,jt)}(le.subarray(re,-8),{i:2},new Wh(((ee=le)[(ue=ee.length)-4]|ee[ue-3]<<8|ee[ue-2]<<16|ee[ue-1]<<24)>>>0))));var ee,ue,le,re;const pe=Eee[X];if(!pe)throw new Error(`Unhandled codec: ${X}`);const we=new globalThis.DecompressionStream(pe);return new Response(new Blob([B]).stream().pipeThrough(we)).arrayBuffer().then(Pe=>new Uint8Array(Pe))}(I,V).then(B=>(function(X,ee){X.readFields(mee,ee)}(new QP(B),O),new Vee[b](O.buffer))),M.then(B=>{for(let X=S.length-1;X>=0;X--)switch(S[X]){case"delta_filter":gee(B,N);break;case"zigzag_filter":Aee(B);break;case"bitshuffle_filter":_ee(B,b);break;default:throw new Of(`Unhandled filter "${S[X]}"`)}return{layerName:y,blockIndex:D,data:B}}).catch(B=>{throw B})}))},Pt(wF,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]}),Pt(ZS,"MapboxRasterTile"),Pt(vF,"MapboxRasterLayer",{omit:["_blocksInProgress"]});let tw,eE,gp,l_,tE,u_=null;function RF(){return Qi()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:eE||xe.DRACO_URL}function TF(){if(Qi()&&self.worker&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(l_)return l_;const d=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return l_=WebAssembly.validate(d)?xe.MESHOPT_SIMD_URL:xe.MESHOPT_URL,l_}const qS={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},zee={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},aw={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function SF(d,i,u){const f=u.json.bufferViews.length,y=u.buffers.length;i.bufferView=f,u.json.bufferViews[f]={buffer:y,byteLength:d.byteLength},u.buffers[y]=d}const aE="KHR_draco_mesh_compression";function Oee(d,i){const u=d.extensions&&d.extensions[aE];if(!u)return;const f=new gp.Decoder,y=PF(i,u.bufferView),m=new gp.Mesh;if(!f.DecodeArrayToMesh(y,y.byteLength,m))throw new Error("Failed to decode Draco mesh");const _=i.json.accessors[d.indices],b=qS[_.componentType],N=_.count*b.BYTES_PER_ELEMENT,D=gp._malloc(N);b===Uint16Array?f.GetTrianglesUInt16Array(m,N,D):f.GetTrianglesUInt32Array(m,N,D),SF(gp.memory.buffer.slice(D,D+N),_,i),gp._free(D);for(const S of Object.keys(u.attributes)){const V=f.GetAttributeByUniqueId(m,u.attributes[S]),I=i.json.accessors[d.attributes[S]],O=zee[I.componentType],M=I.count*aw[I.type]*qS[I.componentType].BYTES_PER_ELEMENT,B=gp._malloc(M);f.GetAttributeDataArrayForAllPoints(m,V,gp[O],M,B),SF(gp.memory.buffer.slice(B,B+M),I,i),gp._free(B)}f.destroy(),m.destroy(),delete d.extensions[aE]}const HS="EXT_meshopt_compression";function Dee(d,i){if(!d.extensions||!d.extensions[HS])return;const u=d.extensions[HS],f=new Uint8Array(i.buffers[u.buffer],u.byteOffset||0,u.byteLength||0),y=new Uint8Array(u.count*u.byteStride);tE.decodeGltfBuffer(y,u.count,u.byteStride,f,u.mode,u.filter),d.buffer=i.buffers.length,d.byteOffset=0,i.buffers[d.buffer]=y.buffer,delete d.extensions[HS]}const CF=1179937895,bF=new TextDecoder("utf8");function xF(d,i){return new URL(d,i).href}function Mee(d,i,u,f){return fetch(xF(d.uri,f)).then(y=>y.arrayBuffer()).then(y=>{i.buffers[u]=y})}function PF(d,i){const u=d.json.bufferViews[i];return new Uint8Array(d.buffers[u.buffer],u.byteOffset||0,u.byteLength)}function Iee(d,i,u,f){if(d.uri){const y=xF(d.uri,f);return fetch(y).then(m=>m.blob()).then(m=>createImageBitmap(m)).then(m=>{i.images[u]=m})}if(d.bufferView!==void 0){const y=PF(i,d.bufferView),m=new Blob([y],{type:d.mimeType});return createImageBitmap(m).then(_=>{i.images[u]=_})}}function EF(d,i=0,u){const f={json:null,images:[],buffers:[]};if(new Uint32Array(d,i,1)[0]===CF){const S=new Uint32Array(d,i);let V=2;const I=(S[V++]>>2)-3,O=S[V++]>>2;if(V++,f.json=JSON.parse(bF.decode(S.subarray(V,V+O))),V+=O,V<I){const M=S[V++];V++;const B=i+(V<<2);f.buffers[0]=d.slice(B,B+M)}}else f.json=JSON.parse(bF.decode(new Uint8Array(d,i)));const{buffers:y,images:m,meshes:_,extensionsUsed:b,bufferViews:N}=f.json;let D=Promise.resolve();if(y){const S=[];for(let V=0;V<y.length;V++){const I=y[V];I.uri?S.push(Mee(I,f,V,u)):f.buffers[V]||(f.buffers[V]=null)}D=Promise.all(S)}return D.then(()=>{const S=[],V=b&&b.includes(aE),I=b&&b.includes(HS);if(V&&S.push(function(){if(!gp)return tw??(tw=function(O){let M,B=null;function X(){M=new Uint8Array(B.buffer)}function ee(){throw new Error("Unexpected Draco error.")}const ue={a:{a:ee,d:function(le,re,pe){return M.copyWithin(le,re,re+pe)},c:function(le){const re=M.length,pe=Math.max(le>>>0,Math.ceil(1.2*re)),we=Math.ceil((pe-re)/65536);try{return B.grow(we),X(),!0}catch{return!1}},b:ee}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(O,ue):O.then(le=>le.arrayBuffer()).then(le=>WebAssembly.instantiate(le,ue))).then(le=>{const{Rb:re,Qb:pe,P:we,T:Pe,X:We,Ja:je,La:Ze,Qa:mt,Va:Ye,Wa:At,eb:xt,jb:St,f:Ot,e:Nt,yb:Ut,zb:Mt,Ab:jt,Bb:ga,Db:ma,Gb:Ya}=le.instance.exports;B=Nt;const xa=(()=>{let Oa=0,_a=0,Ar=0,$a=0;return or=>{Ar&&(re($a),re(Oa),_a+=Ar,Ar=Oa=0),Oa||(_a+=128,Oa=pe(_a));const Dr=or.length+7&-8;let Jr=Oa;Dr>=_a&&(Ar=Dr,Jr=$a=pe(Dr));for(let kr=0;kr<or.length;kr++)M[Jr+kr]=or[kr];return Jr}})();return X(),Ot(),{memory:Nt,_free:re,_malloc:pe,Mesh:class{constructor(){this.ptr=we()}destroy(){Pe(this.ptr)}},Decoder:class{constructor(){this.ptr=je()}destroy(){St(this.ptr)}DecodeArrayToMesh(Oa,_a,Ar){const $a=xa(Oa),or=Ze(this.ptr,$a,_a,Ar.ptr);return!!We(or)}GetAttributeByUniqueId(Oa,_a){return{ptr:mt(this.ptr,Oa.ptr,_a)}}GetTrianglesUInt16Array(Oa,_a,Ar){Ye(this.ptr,Oa.ptr,_a,Ar)}GetTrianglesUInt32Array(Oa,_a,Ar){At(this.ptr,Oa.ptr,_a,Ar)}GetAttributeDataArrayForAllPoints(Oa,_a,Ar,$a,or){xt(this.ptr,Oa.ptr,_a.ptr,Ar,$a,or)}},DT_INT8:Ut(),DT_UINT8:Mt(),DT_INT16:jt(),DT_UINT16:ga(),DT_UINT32:ma(),DT_FLOAT32:Ya()}})}(fetch(RF())),tw.then(O=>{gp=O,tw=void 0}))}()),I&&S.push(function(){if(tE)return;const O=function(M){let B;const X=WebAssembly.instantiateStreaming(M,{}).then(le=>{B=le.instance,B.exports.__wasm_call_ctors()}),ee={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},ue={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:X,supported:!0,decodeGltfBuffer(le,re,pe,we,Pe,We){(function(je,Ze,mt,Ye,At,xt,St){const Ot=je.exports.sbrk,Nt=Ye+3&-4,Ut=Ot(Nt*At),Mt=Ot(xt.length),jt=new Uint8Array(je.exports.memory.buffer);jt.set(xt,Mt);const ga=Ze(Ut,Ye,At,Mt,xt.length);if(ga===0&&St&&St(Ut,Nt,At),mt.set(jt.subarray(Ut,Ut+Ye*At)),Ot(Ut-Ot(0)),ga!==0)throw new Error(`Malformed buffer data: ${ga}`)})(B,B.exports[ue[Pe]],le,re,pe,we,B.exports[ee[We]])}}}(fetch(TF()));return O.ready.then(()=>{tE=O})}()),m)for(let O=0;O<m.length;O++)S.push(Iee(m[O],f,O,u));return(S.length?Promise.all(S):Promise.resolve()).then(()=>{if(V&&_)for(const{primitives:O}of _)for(const M of O)Oee(M,f);if(I&&_&&N)for(const O of N)Dee(O,f);return f})})}function NA(d,i){const u=d.json.bufferViews[i.bufferView],f=qS[i.componentType];return new f(d.buffers[u.buffer],(i.byteOffset||0)+(u.byteOffset||0),i.count*(u.byteStride&&u.byteStride!==aw[i.type]*f.BYTES_PER_ELEMENT?u.byteStride/f.BYTES_PER_ELEMENT:aw[i.type]))}function rE(d,i,u,f){const y=qS[i.componentType],m=function(S){switch(S){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(y),_=d.json.bufferViews[i.bufferView],b=_.byteStride?_.byteStride/y.BYTES_PER_ELEMENT:aw[i.type],N=u.float32,D=N.length/u.capacity;for(let S=0,V=0;S<i.count*b;S+=b,V+=D)for(let I=0;I<D;I++)N[V+I]=f[S+I]*m;u._trim()}function Lee(d,i,u){const f=d.indices,y=d.attributes,m={};m.indexArray=new Ps;const _=i.json.accessors[f],b=_.count/3;m.indexArray.reserve(b);const N=NA(i,_);for(let I=0;I<b;I++)m.indexArray.emplaceBack(N[3*I],N[3*I+1],N[3*I+2]);m.indexArray._trim(),m.vertexArray=new So;const D=i.json.accessors[y.POSITION];m.vertexArray.reserve(D.count);const S=NA(i,D);for(let I=0;I<D.count;I++)m.vertexArray.emplaceBack(S[3*I],S[3*I+1],S[3*I+2]);if(m.vertexArray._trim(),m.aabb=new tr(D.min,D.max),m.centroid=function(I,O){const M=[0,0,0],B=I.length;if(B>0){for(let X=0;X<B;X++){const ee=3*I[X];M[0]+=O[ee],M[1]+=O[ee+1],M[2]+=O[ee+2]}M[0]/=B,M[1]/=B,M[2]/=B}return M}(N,S),y.COLOR_0!==void 0){const I=i.json.accessors[y.COLOR_0],O=aw[I.type],M=NA(i,I);m.colorArray=O===3?new So:new Yc,m.colorArray.resize(I.count),rE(i,I,m.colorArray,M)}if(y.NORMAL!==void 0){m.normalArray=new So;const I=i.json.accessors[y.NORMAL];m.normalArray.resize(I.count);const O=NA(i,I);rE(i,I,m.normalArray,O)}if(y.TEXCOORD_0!==void 0&&u.length>0){m.texcoordArray=new jh;const I=i.json.accessors[y.TEXCOORD_0];m.texcoordArray.resize(I.count);const O=NA(i,I);rE(i,I,m.texcoordArray,O)}if(y._FEATURE_ID_RGBA4444!==void 0){const I=i.json.accessors[y._FEATURE_ID_RGBA4444];i.json.extensionsUsed&&i.json.extensionsUsed.includes("EXT_meshopt_compression")&&(m.featureData=NA(i,I))}y._FEATURE_RGBA4444!==void 0&&(m.featureData=new Uint32Array(NA(i,i.json.accessors[y._FEATURE_RGBA4444]).buffer));const V=d.material;return m.material=function(I,O){const{emissiveFactor:M=[0,0,0],alphaMode:B="OPAQUE",alphaCutoff:X=.5,normalTexture:ee,occlusionTexture:ue,emissiveTexture:le,doubleSided:re}=I,{baseColorFactor:pe=[1,1,1,1],metallicFactor:we=1,roughnessFactor:Pe=1,baseColorTexture:We,metallicRoughnessTexture:je}=I.pbrMetallicRoughness||{},Ze=ue?O[ue.index]:void 0;if(ue&&ue.extensions&&ue.extensions.KHR_texture_transform&&Ze){const mt=ue.extensions.KHR_texture_transform;Ze.offsetScale=[mt.offset[0],mt.offset[1],mt.scale[0],mt.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new bn(...pe),metallicFactor:we,roughnessFactor:Pe,baseColorTexture:We?O[We.index]:void 0,metallicRoughnessTexture:je?O[je.index]:void 0},doubleSided:re,emissiveFactor:M,alphaMode:B,alphaCutoff:X,normalTexture:ee?O[ee.index]:void 0,occlusionTexture:Ze,emissionTexture:le?O[le.index]:void 0,defined:I.defined===void 0}}(V!==void 0?i.json.materials[V]:{defined:!1},u),m}function NF(d,i,u){const{matrix:f,rotation:y,translation:m,scale:_,mesh:b,extras:N,children:D}=d,S={};if(S.matrix=f||_e.mat4.fromRotationTranslationScale([],y||[0,0,0,1],m||[0,0,0],_||[1,1,1]),b!==void 0){S.meshes=u[b];const V=S.anchor=[0,0];for(const I of S.meshes){const{min:O,max:M}=I.aabb;V[0]+=O[0]+M[0],V[1]+=O[1]+M[1]}V[0]=Math.floor(V[0]/S.meshes.length/2),V[1]=Math.floor(V[1]/S.meshes.length/2)}if(N&&(N.id&&(S.id=N.id),N.lights&&(S.lights=function(V){if(!V.length)return[];const I=function(ee){const ue=atob(ee),le=new Uint8Array(ue.length);for(let re=0;re<ue.length;re++)le[re]=ue.codePointAt(re);return le}(V),O=[],M=I.length/24,B=new Uint16Array(I.buffer),X=new Float32Array(I.buffer);for(let ee=0;ee<M;ee++){const ue=B[2*ee*6]/30,le=B[2*ee*6+1]/30,re=B[2*ee*6+10]/100,pe=X[6*ee+1],we=X[6*ee+2],Pe=X[6*ee+3],We=X[6*ee+4],je=Pe-pe,Ze=We-we,mt=Math.hypot(je,Ze);O.push({pos:[pe+.5*je,we+.5*Ze,le],normal:[Ze/mt,-je/mt,0],width:mt,height:ue,depth:re,points:[pe,we,Pe,We]})}return O}(N.lights))),D){const V=[];for(const I of D)V.push(NF(i.json.nodes[I],i,u));S.children=V}return S}function Fee(d){if(d.vertices.length===0||d.indices.length===0)return null;const i=new p1(d.vertices,d.indices,8,256),[u,f]=[i.min.clone(),i.max.clone()];return{vertices:d.vertices,indices:d.indices,grid:i,min:u,max:f}}function Uee(d){if(!d.extras||!d.extras.ground)return null;const i=d.extras.ground;if(!i||!Array.isArray(i)||i.length===0)return null;const u=i[0];if(!u||!Array.isArray(u)||u.length===0)return null;const f=[];for(const _ of u){if(!Array.isArray(_)||_.length!==2)continue;const b=_[0],N=_[1];typeof b=="number"&&typeof N=="number"&&f.push(new Bt(b,N))}if(f.length<3)return null;f.length>1&&f[f.length-1].equals(f[0])&&f.pop();let y=0;for(let _=0;_<f.length;_++){const b=f[_],N=f[(_+1)%f.length],D=f[(_+2)%f.length];y+=(b.x-N.x)*(D.y-N.y)-(D.x-N.x)*(b.y-N.y)}y>0&&f.reverse();const m=uA(f.flatMap(_=>[_.x,_.y]),[]);return m.length===0?null:{vertices:f,indices:m}}function kee(d,i){const u=[],f=[];let y=0;const m=[];for(const _ of d){y=u.length;const b=_.vertexArray.float32,N=_.indexArray.uint16;for(let D=0;D<_.vertexArray.length;D++)m[0]=b[3*D+0],m[1]=b[3*D+1],m[2]=b[3*D+2],_e.vec3.transformMat4(m,m,i),u.push(new Bt(m[0],m[1]));for(let D=0;D<3*_.indexArray.length;D++)f.push(N[D]+y)}if(f.length%3!=0)return null;for(let _=0;_<f.length;_+=3){const b=u[f[_+0]],N=u[f[_+1]],D=u[f[_+2]];(b.x-N.x)*(D.y-N.y)-(D.x-N.x)*(b.y-N.y)>0&&([f[_+1],f[_+2]]=[f[_+2],f[_+1]])}return{vertices:u,indices:f}}function VF(d){const i=function(N,D){const S=[],V=WebGL2RenderingContext;if(N.json.textures)for(const I of N.json.textures){const O={magFilter:V.LINEAR,minFilter:V.NEAREST,wrapS:V.REPEAT,wrapT:V.REPEAT};I.sampler!==void 0&&Object.assign(O,N.json.samplers[I.sampler]),S.push({image:D[I.source],sampler:O,uploaded:!1})}return S}(d,d.images),u=function(N,D){const S=[];for(const V of N.json.meshes){const I=[];for(const O of V.primitives)I.push(Lee(O,N,D));S.push(I)}return S}(d,i),{scenes:f,scene:y,nodes:m}=d.json,_=f?f[y||0].nodes:m,b=[];for(const N of _)b.push(NF(m[N],d,u));return function(N,D,S){const V={},I=new Set;for(let O=0;O<N.length;O++){const M=S[D[O]];if(!M.extras)continue;const B=M.extras["mapbox:footprint:version"],X=M.extras["mapbox:footprint:id"];(B||X)&&I.add(O),B==="1.0.0"&&X&&(V[X]=O)}for(let O=0;O<N.length;O++){if(I.has(O))continue;const M=N[O],B=S[D[O]];if(!B.extras)continue;let X=null;M.id in V&&(X=kee(N[V[M.id]].meshes,M.matrix)),X||(X=Uee(B)),X&&(M.footprint=Fee(X))}if(I.size>0){const O=Array.from(I.values()).sort((M,B)=>M-B);for(let M=O.length-1;M>=0;M--)N.splice(O[M],1)}}(b,_,d.json.nodes),b}function Bee(d){d.heightmap=new Float32Array(4096),d.heightmap.fill(-1);const i=d.vertexArray.float32,u=d.aabb.min[0]-1,f=d.aabb.min[1]-1,y=xA/(d.aabb.max[0]-u+2),m=xA/(d.aabb.max[1]-f+2);for(let _=0;_<i.length;_+=3){const b=i[_+2],N=(i[_+0]-u)*y|0,D=(i[_+1]-f)*m|0;b>d.heightmap[D*xA+N]&&(d.heightmap[D*xA+N]=b)}}function Gee(d,i){const u={};u.indexArray=new Ps,u.indexArray.reserve(4*d.length),u.vertexArray=new So,u.vertexArray.reserve(10*d.length),u.colorArray=new Yc,u.vertexArray.reserve(10*d.length);let f=0;for(const _ of d){const b=Math.min(10,Math.max(4,1.3*_.height))*i,N=[-_.normal[1],_.normal[0],0],D=Math.min(.29,.1*_.width/_.depth),S=_.width-2*_.depth*i*(D+.01),V=_e.vec3.scaleAndAdd([],_.pos,N,S/2),I=_e.vec3.scaleAndAdd([],_.pos,N,-S/2),O=[V[0],V[1],V[2]+_.height],M=[I[0],I[1],I[2]+_.height],B=_e.vec3.scaleAndAdd([],_.normal,N,D);_e.vec3.scale(B,B,b);const X=_e.vec3.scaleAndAdd([],_.normal,N,-D);_e.vec3.scale(X,X,b),_e.vec3.add(B,V,B),_e.vec3.add(X,I,X),V[2]+=.1,I[2]+=.1,u.vertexArray.emplaceBack(B[0],B[1],B[2]),u.vertexArray.emplaceBack(X[0],X[1],X[2]),u.vertexArray.emplaceBack(V[0],V[1],V[2]),u.vertexArray.emplaceBack(I[0],I[1],I[2]),u.vertexArray.emplaceBack(O[0],O[1],O[2]),u.vertexArray.emplaceBack(M[0],M[1],M[2]),u.vertexArray.emplaceBack(V[0],V[1],V[2]),u.vertexArray.emplaceBack(I[0],I[1],I[2]),u.vertexArray.emplaceBack(B[0],B[1],B[2]),u.vertexArray.emplaceBack(X[0],X[1],X[2]);const ee=S/b/2;u.colorArray.emplaceBack(-ee-D,-1,ee,.8),u.colorArray.emplaceBack(ee+D,-1,ee,.8),u.colorArray.emplaceBack(-ee,0,ee,1.3),u.colorArray.emplaceBack(ee,0,ee,1.3),u.colorArray.emplaceBack(ee+D,-.8,ee,.7),u.colorArray.emplaceBack(ee+D,-.8,ee,.7),u.colorArray.emplaceBack(0,0,ee,1.3),u.colorArray.emplaceBack(0,0,ee,1.3),u.colorArray.emplaceBack(ee+D,-1.2,ee,.8),u.colorArray.emplaceBack(ee+D,-1.2,ee,.8),u.indexArray.emplaceBack(6+f,4+f,8+f),u.indexArray.emplaceBack(7+f,9+f,5+f),u.indexArray.emplaceBack(0+f,1+f,2+f),u.indexArray.emplaceBack(1+f,3+f,2+f),f+=10}const y={defined:!0,emissiveFactor:[0,0,0]},m={};return m.baseColorFactor=bn.white,y.pbrMetallicRoughness=m,u.material=y,u.aabb=new tr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),u}class zF{constructor(i){this._stringToNumber={},this._numberToString=[];for(let u=0;u<i.length;u++){const f=i[u];this._stringToNumber[f]=u,this._numberToString[u]=f}}encode(i){return this._stringToNumber[i]}decode(i){return this._numberToString[i]}}const jee=["id","tile","layer","source","sourceLayer","state"];class c_{constructor(i,u,f,y,m){this.type="Feature",this._vectorTileFeature=i,this._z=u,this._x=f,this._y=y,this.properties=i.properties,this.id=m}clone(){const i=new c_(this._vectorTileFeature,this._z,this._x,this._y,this.id);return this.state&&(i.state=Object.assign({},this.state)),this.layer&&(i.layer=Object.assign({},this.layer)),this.source&&(i.source=this.source),this.sourceLayer&&(i.sourceLayer=this.sourceLayer),i}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const u of jee)this[u]!==void 0&&(i[u]=this[u]);return i}}class OF{constructor(i,u){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new Ct(Na,16,0),this.featureIndexArray=new gl,this.promoteId=u,this.is3DTile=!1,this.serializedLayersCache=new Map}insert(i,u,f,y,m,_=0,b=0){const N=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,y,m,_);const D=this.grid;for(let S=0;S<u.length;S++){const V=u[S],I=[1/0,1/0,-1/0,-1/0];for(let O=0;O<V.length;O++){const M=V[O];I[0]=Math.min(I[0],M.x),I[1]=Math.min(I[1],M.y),I[2]=Math.max(I[2],M.x),I[3]=Math.max(I[3],M.y)}b!==0&&(I[0]-=b,I[1]-=b,I[2]+=b,I[3]+=b),I[0]<Na&&I[1]<Na&&I[2]>=0&&I[3]>=0&&D.insert(N,I[0],I[1],I[2],I[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Th.VectorTile(new on(this.rawTileData)).layers,this.sourceLayerCoder=new zF(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const i in this.vtLayers)this.vtFeatures[i]=[]}return this.vtLayers}query(i,u){const{tilespaceGeometry:f,transform:y,tileTransform:m,pixelPosMatrix:_,availableImages:b}=u;this.loadVTLayers(),this.serializedLayersCache.clear();const N=f.bufferedTilespaceBounds,D=this.grid.query(N.min.x,N.min.y,N.max.x,N.max.y,(O,M,B,X)=>lt(f.bufferedTilespaceGeometry,O,M,B,X));D.sort(Zee);let S=null;y.elevation&&D.length>0&&(S=r_.create(y.elevation,this.tileID));const V={};let I;for(let O=0;O<D.length;O++){const M=D[O];if(M===I)continue;I=M;const B=this.featureIndexArray.get(M);let X=null;this.is3DTile?this.loadMatchingModelFeature(V,B,i,f,y):this.loadMatchingFeature(V,B,i,b,(ee,ue,le,re=0)=>(X||(X=H(ee,this.tileID.canonical,m)),ue.queryIntersectsFeature(f,ee,le,X,this.z,y,_,S,re)))}return V}loadMatchingFeature(i,u,f,y,m){const{featureIndex:_,bucketIndex:b,sourceLayerIndex:N,layoutVertexArrayOffset:D}=u,S=this.bucketLayerIDs[b],V=f.layers,I=Object.keys(V);if(I.length&&!function(ee,ue){for(let le=0;le<ee.length;le++)if(ue.indexOf(ee[le])>=0)return!0;return!1}(I,S))return;const O=f.sourceCache,M=this.sourceLayerCoder.decode(N),B=this.vtLayers[M].feature(_),X=this.getId(B,M);for(let ee=0;ee<S.length;ee++){const ue=S[ee];if(!V[ue])continue;const{styleLayer:le,targets:re}=V[ue];let pe={};X!==void 0&&(pe=O.getFeatureState(le.sourceLayer,X));const we=!m||m(B,le,pe,D);if(!we)continue;const Pe=new c_(B,this.z,this.x,this.y,X);Pe.tile=this.tileID.canonical,Pe.state=pe;let We=this.serializedLayersCache.get(ue);We||(We=le.serialize(),We.id=ue,this.serializedLayersCache.set(ue,We)),Pe.source=We.source,Pe.sourceLayer=We["source-layer"],Pe.layer=Rn({},We),Pe.layer.paint=DF(We.paint,le.paint,B,pe,y),Pe.layer.layout=DF(We.layout,le.layout,B,pe,y);let je=!1;for(const Ze of re){this.updateFeatureProperties(Pe,Ze);const{filter:mt}=Ze;if(mt){if(B.properties=Pe.properties,mt.needGeometry){const Ye=W(B,!0);if(!mt.filter(new vn(this.tileID.overscaledZ),Ye,this.tileID.canonical))continue}else if(!mt.filter(new vn(this.tileID.overscaledZ),B))continue}je=!0,Ze.targetId&&this.addFeatureVariant(Pe,Ze)}je&&this.appendToResult(i,ue,_,Pe,we)}}loadMatchingModelFeature(i,u,f,y,m){const _=this.bucketLayerIDs[0][0],b=f.layers;if(!b[_])return;const{styleLayer:N,targets:D}=b[_];if(N.type!=="model")return;const S=y.tile,V=u.featureIndex,I=S.getBucket(N);if(!(I&&I instanceof MS))return;const O=function(We,je,Ze,mt){const Ye=We.getNodesInfo()[je];if(Ye.hiddenByReplacement||!Ye.node.meshes)return;let At=Number.MAX_VALUE;const xt=Ye.node,St=Ze.tile,Ot=mt.calculatePosMatrix(St.tileID.toUnwrapped(),mt.worldSize),Nt=Ye.evaluatedScale;let Ut=0;mt.elevation&&xt.elevation&&(Ut=xt.elevation*mt.elevation.exaggeration()),_e.mat4.translate(Ot,Ot,[(xt.anchor?xt.anchor[0]:0)*(Nt[0]-1),(xt.anchor?xt.anchor[1]:0)*(Nt[1]-1),Ut]),_e.mat4.scale(Ot,Ot,Nt);const Mt=Ze.queryGeometry,jt=Mt.isPointQuery()?Mt.screenBounds:Mt.screenGeometry,ga=function(Ya){const xa=_e.mat4.multiply([],Ot,Ya.matrix);_e.mat4.multiply(xa,mt.expandedFarZProjMatrix,xa);for(let Oa=0;Oa<Ya.meshes.length;++Oa){const _a=Ya.meshes[Oa];if(Oa===Ya.lightMeshIndex)continue;const Ar=VL(jt,mt,xa,_a.aabb);Ar!=null&&(At=Math.min(Ar,At))}if(Ya.children)for(const Oa of Ya.children)ga(Oa)};if(ga(xt),At===Number.MAX_VALUE)return;const ma=new Ln(0,0);return jL(St.tileID.canonical,ma,Ye.node.anchor[0],Ye.node.anchor[1]),{intersectionZ:At,position:ma,feature:Ye.feature}}(I,V,y,m);if(!O)return;const{z:M,x:B,y:X}=S.tileID.canonical,{feature:ee,intersectionZ:ue,position:le}=O;let re={};ee.id!==void 0&&(re=f.sourceCache.getFeatureState(N.sourceLayer,ee.id));const pe=new c_({},M,B,X,ee.id);pe.tile=this.tileID.canonical,pe.state=re,pe.properties=ee.properties,pe.geometry={type:"Point",coordinates:[le.lng,le.lat]};let we=this.serializedLayersCache.get(_);we||(we=N.serialize(),we.id=_,this.serializedLayersCache.set(_,we)),pe.source=we.source,pe.sourceLayer=we["source-layer"],pe.layer=Rn({},we);let Pe=!1;for(const We of D){this.updateFeatureProperties(pe,We);const{filter:je}=We;if(je){if(ee.properties=pe.properties,je.needGeometry){if(!je.filter(new vn(this.tileID.overscaledZ),ee,this.tileID.canonical))continue}else if(!je.filter(new vn(this.tileID.overscaledZ),ee))continue}Pe=!0,We.targetId&&this.addFeatureVariant(pe,We)}Pe&&this.appendToResult(i,_,V,pe,ue)}updateFeatureProperties(i,u,f){if(u.properties){const y={};for(const m in u.properties){const _=u.properties[m].evaluate({zoom:this.z},i._vectorTileFeature,i.state,i.tile,f);_!=null&&(y[m]=_)}i.properties=y}}addFeatureVariant(i,u,f){const y={target:u.target,namespace:u.namespace,uniqueFeatureID:u.uniqueFeatureID};u.properties&&(y.properties=i.properties),i.variants=i.variants||{},i.variants[u.targetId]=i.variants[u.targetId]||[],i.variants[u.targetId].push(y)}appendToResult(i,u,f,y,m){let _=i[u];_===void 0&&(_=i[u]=[]),_.push({featureIndex:f,feature:y,intersectionZ:m})}lookupSymbolFeatures(i,u,f,y,m){const _={};this.loadVTLayers();for(const b of i)this.loadMatchingFeature(_,{bucketIndex:u,sourceLayerIndex:f,featureIndex:b,layoutVertexArrayOffset:0},y,m);return _}loadFeature(i){const{featureIndex:u,sourceLayerIndex:f}=i;this.loadVTLayers();const y=this.sourceLayerCoder.decode(f),m=this.vtFeatures[y];if(m[u])return m[u];const _=this.vtLayers[y].feature(u);return m[u]=_,_}hasLayer(i){for(const u of this.bucketLayerIDs)for(const f of u)if(i===f)return!0;return!1}getId(i,u){let f=i.id;if(this.promoteId){const y=Array.isArray(this.promoteId)||typeof this.promoteId!="object"?this.promoteId:this.promoteId[u];if(y!=null)if(Array.isArray(y)){if(!this.promoteIdExpression){const m=G(y);if(m.result!=="success"){const _=m.value.map(b=>`${b.key}: ${b.message}`).join(", ");return void en(`Failed to create expression for promoteId: ${_}`)}this.promoteIdExpression=m.value}this.promoteIdExpression._evaluator||(this.promoteIdExpression._evaluator=new Sd),f=this.promoteIdExpression.evaluate({zoom:0},i)}else f=i.properties[y];typeof f=="boolean"&&(f=Number(f))}return f}}function DF(d,i,u,f,y){return gr(d,(m,_)=>{const b=i instanceof Su?i.get(_):null;return b&&b.evaluate?b.evaluate(u,f,y):b})}function Zee(d,i){return i-d}Pt(OF,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const MF=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class nE{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,f]=new Uint8Array(i,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const y=f>>4;if(y!==1)throw new Error(`Got v${y} data when expected v1.`);const m=MF[15&f];if(!m)throw new Error("Unrecognized array type.");const[_]=new Uint16Array(i,2,1),[b]=new Uint32Array(i,4,1);return new nE(b,_,m,i)}constructor(i,u=64,f=Float64Array,y){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=f,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;const m=MF.indexOf(this.ArrayType),_=2*i*this.ArrayType.BYTES_PER_ELEMENT,b=i*this.IndexArrayType.BYTES_PER_ELEMENT,N=(8-b%8)%8;if(m<0)throw new Error(`Unexpected typed array class: ${f}.`);y&&y instanceof ArrayBuffer?(this.data=y,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+b+N,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+_+b+N),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+b+N,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+m]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=i)}add(i,u){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=i,this.coords[this._pos++]=u,f}finish(){const i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return iE(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,u,f,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:_,nodeSize:b}=this,N=[0,m.length-1,0],D=[];for(;N.length;){const S=N.pop()||0,V=N.pop()||0,I=N.pop()||0;if(V-I<=b){for(let X=I;X<=V;X++){const ee=_[2*X],ue=_[2*X+1];ee>=i&&ee<=f&&ue>=u&&ue<=y&&D.push(m[X])}continue}const O=I+V>>1,M=_[2*O],B=_[2*O+1];M>=i&&M<=f&&B>=u&&B<=y&&D.push(m[O]),(S===0?i<=M:u<=B)&&(N.push(I),N.push(O-1),N.push(1-S)),(S===0?f>=M:y>=B)&&(N.push(O+1),N.push(V),N.push(1-S))}return D}within(i,u,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:m,nodeSize:_}=this,b=[0,y.length-1,0],N=[],D=f*f;for(;b.length;){const S=b.pop()||0,V=b.pop()||0,I=b.pop()||0;if(V-I<=_){for(let X=I;X<=V;X++)LF(m[2*X],m[2*X+1],i,u)<=D&&N.push(y[X]);continue}const O=I+V>>1,M=m[2*O],B=m[2*O+1];LF(M,B,i,u)<=D&&N.push(y[O]),(S===0?i-f<=M:u-f<=B)&&(b.push(I),b.push(O-1),b.push(1-S)),(S===0?i+f>=M:u+f>=B)&&(b.push(O+1),b.push(V),b.push(1-S))}return N}}function iE(d,i,u,f,y,m){if(y-f<=u)return;const _=f+y>>1;IF(d,i,_,f,y,m),iE(d,i,u,f,_-1,1-m),iE(d,i,u,_+1,y,1-m)}function IF(d,i,u,f,y,m){for(;y>f;){if(y-f>600){const D=y-f+1,S=u-f+1,V=Math.log(D),I=.5*Math.exp(2*V/3),O=.5*Math.sqrt(V*I*(D-I)/D)*(S-D/2<0?-1:1);IF(d,i,u,Math.max(f,Math.floor(u-S*I/D+O)),Math.min(y,Math.floor(u+(D-S)*I/D+O)),m)}const _=i[2*u+m];let b=f,N=y;for(rw(d,i,f,u),i[2*y+m]>_&&rw(d,i,f,y);b<N;){for(rw(d,i,b,N),b++,N--;i[2*b+m]<_;)b++;for(;i[2*N+m]>_;)N--}i[2*f+m]===_?rw(d,i,f,N):(N++,rw(d,i,N,y)),N<=u&&(f=N+1),u<=N&&(y=N-1)}}function rw(d,i,u,f){sE(d,u,f),sE(i,2*u,2*f),sE(i,2*u+1,2*f+1)}function sE(d,i,u){const f=d[i];d[i]=d[u],d[u]=f}function LF(d,i,u,f){const y=d-u,m=i-f;return y*y+m*m}n.$=Zs,n.A=Lo,n.B=ku,n.C=$c,n.D=n_,n.E=Zl,n.F=2,n.G=U1,n.H=Z4,n.I=Fo,n.J=class extends OS{},n.K=mu,n.L=Tn,n.M=Hp,n.N=jc,n.O=Gc,n.P=Bt,n.Q=Zu,n.R=ws,n.S=kh,n.T=LP,n.U=uh,n.V=OS,n.W=Ne,n.X=G,n.Y=cs,n.Z=ai,n._=Bo,n.a=function(d){return xe.API_CDN_URL_REGEX.test(d)},n.a$=W,n.a0=Xo,n.a1=ch,n.a2=Kf,n.a3=Nl,n.a4=function(d){const i=d.value;let u=[];if(!i)return u;const f=mu(i);return f!=="string"?(u=u.concat([new OS(d.key,i,`string expected, "${f}" found`)]),u):(OL(i,!0)||(u=u.concat([new OS(d.key,i,`invalid url "${i}"`)])),u)},n.a5=Gt,n.a6=To,n.a7=Oi,n.a8=Ca,n.a9=class{constructor(d){this.specification=d}possiblyEvaluate(d,i){return Bi(d.expression.evaluate(i))}interpolate(d,i,u){return{x:hr(d.x,i.x,u),y:hr(d.y,i.y,u),z:hr(d.z,i.z,u),azimuthal:hr(d.azimuthal,i.azimuthal,u),polar:hr(d.polar,i.polar,u)}}},n.aA=function(d,i){const u={};for(let f=0;f<i.length;f++){const y=i[f];y in d&&(u[y]=d[y])}return u},n.aB=qh,n.aC=Pi,n.aD=class{constructor(d){this.entries={},this.scheduler=d}request(d,i,u,f){const y=this.entries[d]=this.entries[d]||{callbacks:[]};if(y.result){const[m,_]=y.result;return this.scheduler?this.scheduler.add(()=>{f(m,_)},i):f(m,_),()=>{}}return y.callbacks.push(f),y.cancel||(y.cancel=u((m,_)=>{y.result=[m,_];for(const b of y.callbacks)this.scheduler?this.scheduler.add(()=>{b(m,_)},i):b(m,_);setTimeout(()=>delete this.entries[d],3e3)})),()=>{y.result||(y.callbacks=y.callbacks.filter(m=>m!==f),y.callbacks.length||(y.cancel(),delete this.entries[d]))}}},n.aE=function(d,i,u){const f=JSON.stringify(d.request);return d.data&&(this.deduped.entries[f]={result:[null,d.data]}),this.deduped.request(f,{type:"parseTile",isSymbolTile:d.isSymbolTile,zoom:d.tileZoom},y=>{const m=zi(d.request,(_,b,N,D)=>{_?y(_):b&&y(null,{vectorTile:u?void 0:new Th.VectorTile(new on(b)),rawData:b,cacheControl:N,expires:D})});return()=>{m.cancel(),y()}},i)},n.aF=function(d){yn++,yn>Nr&&(d.getActor().send("enforceCacheSizeLimit",_r),yn=0)},n.aG=function(d){return d<=1?1:Math.pow(2,Math.floor(Math.log(d)/Math.LN2))},n.aH=pa,n.aI=vL,n.aJ=bL,n.aK=_L,n.aL=function(d,i){const u=document.createElement("video");u.muted=!0,u.onloadstart=function(){i(null,u)};for(let f=0;f<d.length;f++){const y=document.createElement("source");Gl(d[f])||(u.crossOrigin="Anonymous"),y.src=d[f],u.appendChild(y)}return{cancel:()=>{}}},n.aM=PS,n.aN=function(d){return fetch(d).then(i=>i.arrayBuffer()).then(i=>EF(i,0,d))},n.aO=VF,n.aP=class{constructor(d,i,u,f){this.id=d,this.position=i!=null?new Ln(i[0],i[1]):new Ln(0,0),this.orientation=u??[0,0,0],this.nodes=f,this.uploaded=!1,this.aabb=new tr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(d,i){if(_e.mat4.multiply(d.matrix,i,d.matrix),d.meshes)for(const u of d.meshes){const f=tr.applyTransformFast(u.aabb,d.matrix);this.aabb.encapsulate(f)}if(d.children)for(const u of d.children)this._applyTransformations(u,d.matrix)}computeBoundsAndApplyParent(){const d=_e.mat4.identity([]);for(const i of this.nodes)this._applyTransformations(i,d)}computeModelMatrix(d,i,u,f,y,m,_=!1){FL(this.matrix,this,d.transform,this.position,i,u,f,y,m,_)}upload(d){if(!this.uploaded){for(const i of this.nodes)GP(i,d);for(const i of this.nodes)DS(i);this.uploaded=!0}}destroy(){for(const d of this.nodes)jP(d)}},n.aQ=Qa,n.aR=B1,n.aS=Nu,n.aT=Ri,n.aU=xu,n.aV=Ps,n.aW=Wa,n.aX=Kp,n.aY=bS,n.aZ=function(){ss.isLoading()||ss.isLoaded()||po()!=="deferred"||wi()},n.a_=dh,n.aa=vn,n.ab=fe,n.ac=o,n.ad=_e,n.ae=jr,n.af=Su,n.ag=Ml,n.ah=hr,n.ai=Na,n.aj=zc,n.ak=za,n.al=bn,n.am=class{constructor(d){this.specification=d}possiblyEvaluate(d,i){return function([u,f]){const y=Bi([1,u,f]);return{x:y.x,y:y.y,z:y.z}}(d.expression.evaluate(i))}interpolate(d,i,u){return{x:hr(d.x,i.x,u),y:hr(d.y,i.y,u),z:hr(d.z,i.z,u)}}},n.an=function(d,i,u=0,f=!0){const y=new Bt(u,u),m=d.sub(y),_=i.add(y),b=[m,new Bt(_.x,m.y),_,new Bt(m.x,_.y)];return f&&b.push(m.clone()),b},n.ao=function(d,i){const u=[];for(let f=0;f<d.length;f++){const y=pn(f-1,-1,d.length-1),m=pn(f+1,-1,d.length-1),_=d[f],b=d[m],N=d[y].sub(_).unit(),D=b.sub(_).unit(),S=D.angleWithSep(N.x,N.y),V=N.add(D).unit().mult(-1*i/Math.sin(S/2));u.push(_.add(V))}return u},n.ap=iL,n.aq=lt,n.ar=function(d,i,u=0){return _e.vec3.fromValues(((i.x-u)*d.scale-d.x)*Na,(i.y*d.scale-d.y)*Na,Uy(i.z,i.y))},n.as=Cr,n.at=dS,n.au=function(d){let i=1/0,u=1/0,f=-1/0,y=-1/0;for(const m of d)i=Math.min(i,m.x),u=Math.min(u,m.y),f=Math.max(f,m.x),y=Math.max(y,m.y);return{min:new Bt(i,u),max:new Bt(f,y)}},n.av=_l,n.aw=ot,n.ax=A,n.ay=ka,n.az=Al,n.b=function(d){return xe.API_FONTS_REGEX.test(d)},n.b$=VS,n.b0=c_,n.b1=Oo,n.b2=zf,n.b3=Ky,n.b4=H,n.b5=bu,n.b6=kd,n.b7=pr,n.b8=Di,n.b9=uA,n.bA=aS,n.bB=xP,n.bC=J4,n.bD=SP,n.bE=nE,n.bF=pn,n.bG=fn,n.bH=jo,n.bI=function(d,i,u){d[4*i+0]=u[0],d[4*i+1]=u[1],d[4*i+2]=u[2],d[4*i+3]=u[3]},n.bJ=Jc,n.bK=Xc,n.bL=np,n.bM=ms,n.bN=vc,n.bO=Ln,n.bP=cL,n.bQ=Kt,n.bR=Tr,n.bS=PL,n.bT=da,n.bU=mo,n.bV=function(d,i,u,f,y,m,_,b,N){if(N.name==="globe")return mo(d,i,new da(u,f,y),!1);const D=B1({z:u,x:f,y},N);return new tr([(m+D.x/D.scale)*i,i*(D.y/D.scale),_],[(m+D.x2/D.scale)*i,i*(D.y2/D.scale),b])},n.bW=function(d,i,u){let f=0;for(let y=0;y<2;++y)d[y]>0&&(f+=(d[y]-0)*(d[y]-0)),i[y]<0&&(f+=(0-i[y])*(0-i[y]));return f},n.bX=Vu,n.bY=Qp,n.bZ=function(d){const i=_e.mat4.identity(new Float64Array(16));_e.mat4.multiply(i,d.pixelMatrix,d.globeMatrix);const u=[0,Go,0],f=[0,Wu,0];return _e.vec3.transformMat4(u,u,i),_e.vec3.transformMat4(f,f,i),[u[0]>0&&u[0]<=d.width&&u[1]>0&&u[1]<=d.height&&!vl(d,new Ln(d.center.lat,90)),f[0]>0&&f[0]<=d.width&&f[1]>0&&f[1]<=d.height&&!vl(d,new Ln(d.center.lat,-90))]},n.b_=function(d,i){const{scale:u}=d.tileTransform,f=u*Na/(d.tileSize*Math.pow(2,i.zoom-d.tileID.overscaledZ+d.tileID.canonical.z));return _e.mat2.scale(new Float32Array(4),i.inverseAdjustmentMatrix,[f,f])},n.ba=DP,n.bb=function(d,i){const u=Ml(i.zoom);if(u===0)return hs(d);const f=Cn(d),y=ii(f),m=_l(f.getWest())*i.worldSize,_=_l(f.getEast())*i.worldSize,b=Pi(f.getNorth())*i.worldSize,N=Pi(f.getSouth())*i.worldSize,D=[m,b,0],S=[_,b,0],V=[m,N,0],I=[_,N,0],O=_e.mat4.invert([],i.globeMatrix);return _e.vec3.transformMat4(D,D,O),_e.vec3.transformMat4(S,S,O),_e.vec3.transformMat4(V,V,O),_e.vec3.transformMat4(I,I,O),y[0]=ro(y[0],V,u),y[1]=ro(y[1],I,u),y[2]=ro(y[2],S,u),y[3]=ro(y[3],D,u),tr.fromPoints(y)},n.bc=Ti,n.bd=On,n.be=ro,n.bf=Ld,n.bg=Fr,n.bh=ZS,n.bi=on,n.bj=zi,n.bk=function(d,i){const u=[];for(const f in d)f in i||u.push(f);return u},n.bl=Dn,n.bm=["type","source","source-layer","minzoom","maxzoom","filter","layout"],n.bn=la,n.bo=function(d,i){const{x:u,y:f}=d.point,y=au(u,f,d.worldSize/d._pixelsPerMercatorPixel,0,0);return _e.mat4.multiply(y,y,os(hs(i)))},n.bp=nr,n.bq=Hd,n.br=ja,n.bs=function(d,i,u,f,y){const m=5*i+2;d.float32[m+0]=u,d.float32[m+1]=f,d.float32[m+2]=y},n.bt=CS,n.bu=j4,n.bv=Te,n.bw=Fe,n.bx=Vf,n.by=zL,n.bz=tS,n.c=rt,n.c$=hS,n.c0=xL,n.c1=function(d){const i=xL(d,!0);return _e.mat2.invert([],[i[0],i[1],i[4],i[5]])},n.c2=xr,n.c3=function(d){const{x:i,y:u}=d.point,{lng:f,lat:y}=d._center;return au(i,u,d.worldSize,f,y)},n.c4=Va,n.c5=Ia,n.c6=vh,n.c7=function(d){const i=Math.round((d+45+360)%360/90)%4;return er[i]},n.c8=45,n.c9=gn,n.cA=Rf,n.cB=class extends Bd{constructor(d){super(d),this.current=Gd}set(d,i,u){if(this.fetchUniformLocation(d,i)){for(let f=0;f<9;f++)if(u[f]!==this.current[f]){this.current=u,this.gl.uniformMatrix3fv(this.location,!1,u);break}}}},n.cC=cr,n.cD=function(d,i,u){const f=Ml(u.zoom),y=d.style.map._antialias,m=d.terrain&&d.terrain.exaggeration()>0;return f===0&&!y&&!m},n.cE=function(d){const i=d.pixelsPerMeter,u=i/jo(1,d.center.lat),f=_e.mat4.identity(new Float64Array(16));return _e.mat4.translate(f,f,[d.point.x,d.point.y,0]),_e.mat4.scale(f,f,[u,u,i]),Float32Array.from(f)},n.cF=Cn,n.cG=function(d){const i=Vu-5;d=ka(d,-80.051129,i)/i*90;const u=Math.pow(Math.abs(Math.sin(za(d))),3);return Math.round(u*(xf.length-1))},n.cH=function(d,i,u,f){const y=i.getNorth(),m=i.getSouth(),_=i.getWest(),b=i.getEast(),N=1<<d.z,D=b-_,S=y-m,V=D/op,I=-S/xf[u],O=[0,V,0,I,0,0,y,_,0];if(d.z>0){const M=180/f;_e.mat3.multiply(O,O,[M/D+1,0,0,0,M/S+1,0,-.5*M/V,.5*M/I,1])}return O[2]=N,O[5]=d.x,O[8]=d.y,O},n.cI=hs,n.cJ=function(d,i,u){const f=_e.mat4.identity(new Float64Array(16)),y=(i/(1<<d)-.5)*Math.PI*2;return _e.mat4.rotateY(f,u.globeMatrix,y),Float32Array.from(f)},n.cK=class{isDataAvailableAtPoint(d){const i=this._source();if(this.isUsingMockSource()||!i||d.y<0||d.y>1)return!1;const u=i.getSource().maxzoom,f=1<<u,y=Math.floor(d.x),m=Math.floor((d.x-y)*f),_=Math.floor(d.y*f),b=this.findDEMTileFor(new pa(u,y,u,m,_));return!(!b||!b.dem)}getAtPointOrZero(d,i=0){return this.getAtPoint(d,i)||0}getAtPoint(d,i,u=!0){if(this.isUsingMockSource())return null;i==null&&(i=null);const f=this._source();if(!f||d.y<0||d.y>1)return i;const y=f.getSource().maxzoom,m=1<<y,_=Math.floor(d.x),b=d.x-_,N=new pa(y,_,y,Math.floor(b*m),Math.floor(d.y*m)),D=this.findDEMTileFor(N);if(!D||!D.dem)return i;const S=D.dem,V=1<<D.tileID.canonical.z,I=(b*V-D.tileID.canonical.x)*S.dim,O=(d.y*V-D.tileID.canonical.y)*S.dim,M=Math.floor(I),B=Math.floor(O);return(u?this.exaggeration():1)*hr(hr(S.get(M,B),S.get(M,B+1),O-B),hr(S.get(M+1,B),S.get(M+1,B+1),O-B),I-M)}getAtTileOffset(d,i,u){const f=1<<d.canonical.z;return this.getAtPointOrZero(new o(d.wrap+(d.canonical.x+i/Na)/f,(d.canonical.y+u/Na)/f))}getAtTileOffsetFunc(d,i,u,f){return y=>{const m=this.getAtTileOffset(d,y.x,y.y),_=f.upVector(d.canonical,y.x,y.y),b=f.upVectorScale(d.canonical,i,u).metersToTile;return _e.vec3.scale(_,_,m*b),_}}getForTilePoints(d,i,u,f){if(this.isUsingMockSource())return!1;const y=r_.create(this,d,f);return!!y&&(i.forEach(m=>{m[2]=this.exaggeration()*y.getElevationAt(m[0],m[1],u)}),!0)}getMinMaxForTile(d){if(this.isUsingMockSource())return null;const i=this.findDEMTileFor(d);if(!i||!i.dem)return null;const u=i.dem.tree,f=i.tileID,y=1<<d.canonical.z-f.canonical.z;let m=d.canonical.x/y-f.canonical.x,_=d.canonical.y/y-f.canonical.y,b=0;for(let N=0;N<d.canonical.z-f.canonical.z&&!u.leaves[b];N++){m*=2,_*=2;const D=2*Math.floor(_)+Math.floor(m);b=u.childOffsets[b]+D,m%=1,_%=1}return{min:this.exaggeration()*u.minimums[b],max:this.exaggeration()*u.maximums[b]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(d,i,u){throw new Error("Pure virtual method called.")}pointCoordinate(d){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(d){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const d=this.visibleDemTiles;if(d.length===0)return null;let i=!1,u=Number.MAX_VALUE,f=Number.MIN_VALUE;for(const y of d){const m=this.getMinMaxForTile(y.tileID);m&&(u=Math.min(u,m.min),f=Math.max(f,m.max),i=!0)}return i?{min:u,max:f}:null}},n.cL=i1,n.cM=sn,n.cN=function(d,i){return[Math.pow(d[0],2.2)*i,Math.pow(d[1],2.2)*i,Math.pow(d[2],2.2)*i]},n.cO=qo,n.cP=Xt,n.cQ=Us,n.cR=256,n.cS=function(d,i){const u=[0,0,0],f=Ti(hs(i.canonical));return _e.vec3.transformMat4(u,u,f),_e.vec3.transformMat4(u,u,d),u},n.cT=d=>({u_camera_to_center_distance:new ms(d),u_extrude_scale:new qm(d),u_device_pixel_ratio:new ms(d),u_matrix:new Jc(d),u_inv_rot_matrix:new Jc(d),u_merc_center:new Xc(d),u_tile_id:new np(d),u_zoom_transition:new ms(d),u_up_dir:new np(d),u_emissive_strength:new ms(d)}),n.cU=d=>({u_matrix:new Jc(d),u_pixels_to_tile_units:new qm(d),u_device_pixel_ratio:new ms(d),u_width_scale:new ms(d),u_floor_width_scale:new ms(d),u_units_to_pixels:new Xc(d),u_dash_image:new vc(d),u_gradient_image:new vc(d),u_image_height:new ms(d),u_texsize:new Xc(d),u_tile_units_to_pixels:new ms(d),u_alpha_discard_threshold:new ms(d),u_trim_offset:new Xc(d),u_trim_fade_range:new Xc(d),u_trim_color:new ip(d),u_emissive_strength:new ms(d),u_zbias_factor:new ms(d),u_tile_to_meter:new ms(d)}),n.cV=d=>({u_matrix:new Jc(d),u_texsize:new Xc(d),u_pixels_to_tile_units:new qm(d),u_device_pixel_ratio:new ms(d),u_width_scale:new ms(d),u_floor_width_scale:new ms(d),u_image:new vc(d),u_units_to_pixels:new Xc(d),u_tile_units_to_pixels:new ms(d),u_alpha_discard_threshold:new ms(d),u_trim_offset:new Xc(d),u_trim_fade_range:new Xc(d),u_trim_color:new ip(d),u_emissive_strength:new ms(d),u_zbias_factor:new ms(d),u_tile_to_meter:new ms(d)}),n.cW=eu,n.cX=se,n.cY=ba,n.cZ=cp,n.c_=(d,i,u,f,y,m)=>{const _=d.transform,b=_.projection.name==="globe";let N;if(m.paint.get("circle-pitch-alignment")==="map")if(b){const S=qo(_.zoom,i.canonical)*_._pixelsPerMercatorPixel;N=Float32Array.from([S,0,0,S])}else N=_.calculatePixelsToTileUnitsMatrix(u);else N=new Float32Array([_.pixelsToGLUnits[0],0,0,_.pixelsToGLUnits[1]]);const D={u_camera_to_center_distance:d.transform.getCameraToCenterDistance(_.projection),u_matrix:d.translatePosMatrix(i.projMatrix,u,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_device_pixel_ratio:qt.devicePixelRatio,u_extrude_scale:N,u_inv_rot_matrix:Il,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:m.paint.get("circle-emissive-strength")};if(b){D.u_inv_rot_matrix=f,D.u_merc_center=y,D.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],D.u_zoom_transition=Ml(_.zoom);const S=y[0]*Na,V=y[1]*Na;D.u_up_dir=_.projection.upVector(new da(0,0,0),S,V)}return D},n.ca=up,n.cb=ip,n.cc=function(d,i,u){const f=Math.sqrt(d*d+i*i+u*u),y=f>0?Math.acos(u/f)*yr:0;let m=d!==0||i!==0?Math.atan2(-i,-d)*yr+90:0;return m<0&&(m+=360),[f,m,y]},n.cd=g,n.ce=tr,n.cf=Bi,n.cg=function(d){return[Math.pow(d[0],1/2.2),Math.pow(d[1],1/2.2),Math.pow(d[2],1/2.2)]},n.ch=function(d,i){return d.readFields(BQ,{icons:[]},i)},n.ci=function(d){return d({pluginStatus:kn,pluginURL:_n}),Bn.on("pluginStateChange",d),d},n.cj=IS,n.ck=Q0,n.cl=CP,n.cm=nc,n.cn=ds,n.co=Ma,n.cp=oo,n.cq=Mn,n.cr=function(d){const i=d.indexOf(Yf);return i>=0?d.slice(0,i):d},n.cs=function(d){return d.indexOf(Yf)>=0},n.ct=function(d){const i=d.indexOf(Yf);return i>=0?d.slice(i+1):""},n.cu=function(d){const i=[],u=d.id;return u===void 0&&i.push({message:`layers.${u}: missing required property "id"`}),d.render===void 0&&i.push({message:`layers.${u}: missing required method "render"`}),d.renderingMode&&d.renderingMode!=="2d"&&d.renderingMode!=="3d"&&i.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),i},n.cv=function(d,i,u,f){return d.type==="custom"?new xQ(d,i):new FQ[d.type](d,i,u,f)},n.cw=Zn,n.cx=class extends c_{constructor(d,i){super(d._vectorTileFeature,d._z,d._x,d._y,d.id),d.state&&(this.state=Object.assign({},d.state)),this.target=i.target,this.namespace=i.namespace,i.properties&&(this.properties=i.properties),this.target&&("featuresetId"in this.target&&!this.target.importId||"layerId"in this.target)&&(this.source=d.source,this.sourceLayer=d.sourceLayer,this.layer=d.layer)}toJSON(){const d=super.toJSON();return d.target=this.target,d.namespace=this.namespace,d}},n.cy=Bn,n.cz=Yo,n.d=function(d){return xe.API_TILEJSON_REGEX.test(d)},n.d$=zF,n.d0=Ts,n.d1=(d,i,u,f,y,m,_,b)=>{const N=d.transform,D=N.pitch<15?M1(.07,.7,ka((14-N.zoom)/5,0,1)):.07,S=u.paint.get("line-trim-color-use-theme").constantOr("default")==="none";return{u_matrix:I1(d,i,u,f),u_texsize:i.imageAtlasTexture?i.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:N.calculatePixelsToTileUnitsMatrix(i),u_device_pixel_ratio:y,u_width_scale:m,u_floor_width_scale:_,u_image:0,u_tile_units_to_pixels:RA(i,N),u_units_to_pixels:[1/N.pixelsToGLUnits[0],1/N.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:b,u_trim_fade_range:u.paint.get("line-trim-fade-range"),u_trim_color:u.paint.get("line-trim-color").toRenderColor(S?null:u.lut).toArray01(),u_emissive_strength:u.paint.get("line-emissive-strength"),u_zbias_factor:D,u_tile_to_meter:g(i.tileID.canonical,0)}},n.d2=(d,i,u,f,y,m,_,b,N)=>{const D=d.transform,S=D.calculatePixelsToTileUnitsMatrix(i),V=u.paint.get("line-trim-color-use-theme").constantOr("default")==="none",I=D.pitch<15?M1(.07,.7,ka((14-D.zoom)/5,0,1)):.07;return{u_matrix:I1(d,i,u,f),u_pixels_to_tile_units:S,u_device_pixel_ratio:m,u_width_scale:_,u_floor_width_scale:b,u_units_to_pixels:[1/D.pixelsToGLUnits[0],1/D.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:y,u_texsize:TA(u)&&i.lineAtlasTexture?i.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:RA(i,d.transform),u_alpha_discard_threshold:0,u_trim_offset:N,u_trim_fade_range:u.paint.get("line-trim-fade-range"),u_trim_color:u.paint.get("line-trim-color").toRenderColor(V?null:u.lut).toArray01(),u_emissive_strength:u.paint.get("line-emissive-strength"),u_zbias_factor:I,u_tile_to_meter:g(i.tileID.canonical,0)}},n.d3=ca,n.d4=By,n.d5=Uy,n.d6=b1,n.d7=La,n.d8=q0,n.d9=hp,n.dA=Ym,n.dB=ur,n.dC=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},n.dD=Pr,n.dE=Zo,n.dF=Rc,n.dG=function([d,i,u]){const f=Math.hypot(d,i,u),y=Math.atan2(d,u),m=.5*Math.PI-Math.acos(-i/f);return new Ln(Va(y),Va(m))},n.dH=UP,n.dI=function(d){const i=d.navigator?d.navigator.userAgent:null;return!!function(u){if(Ni==null){const f=u.navigator?u.navigator.userAgent:null;Ni=!!u.safari||!(!f||!(/\b(iPad|iPhone|iPod)\b/.test(f)||f.match("Safari")&&!f.match("Chrome")))}return Ni}(d)&&i&&(i.match("Version/15.4")||i.match("Version/15.5")||i.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},n.dJ=function(d,i){_r=d,Nr=i},n.dK=vl,n.dL=Yu,n.dM=function(d){const i=[0,0,0],u=_e.mat4.identity(new Float64Array(16));return _e.mat4.multiply(u,d.pixelMatrix,d.globeMatrix),_e.vec3.transformMat4(i,i,u),new Bt(i[0],i[1])},n.dN=function(d,i,u=!1){if(kn===xi||kn===qn||kn===ri)throw new Error("setRTLTextPlugin cannot be called multiple times.");_n=qt.resolveURL(d),kn=xi,$i=i,Fi(),u||wi()},n.dO=po,n.dP=function(){IS().acquire(qP)},n.dQ=function(){const d=W1;d&&(d.isPreloaded()&&d.numActive()===1?(d.release(qP),W1=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},n.dR=EA,n.dS=function(d){const i=Jn();if(!i)return;const u=i.delete(Ba);d&&u.catch(d).then(()=>d())},n.dT=K1,n.dU=RF,n.dV=function(d){eE=qt.resolveURL(d),u_||(u_=new n_(IS(),new Zl)),u_.broadcast("setDracoUrl",eE)},n.dW=TF,n.dX=function(d){l_=qt.resolveURL(d),u_||(u_=new n_(IS(),new Zl)),u_.broadcast("setMeshoptUrl",l_)},n.dY=Pt,n.dZ=tm,n.d_=pp,n.da=450,n.db=7,n.dc=bQ,n.dd=xn,n.de=jm,n.df=256,n.dg=os,n.dh=So,n.di=$s,n.dj=Eu,n.dk=function(d,i,u,f,y){return ka((d-i)/(u-i)*(y-f)+f,f,y)},n.dl=Uh,n.dm=Hh,n.dn=class{constructor(d,i,u,f){this.context=d,this.format=f,this.size=u,this.texture=d.gl.createTexture();const[y,m,_]=this.size,{gl:b}=d;b.bindTexture(b.TEXTURE_3D,this.texture),d.pixelStoreUnpackFlipY.set(!1),d.pixelStoreUnpack.set(1),d.pixelStoreUnpackPremultiplyAlpha.set(!1),b.texImage3D(b.TEXTURE_3D,0,this.format,y,m,_,0,MP(this.format),IP(this.format),i.data)}bind(d,i){const{context:u}=this,{gl:f}=u;f.bindTexture(f.TEXTURE_3D,this.texture),d!==this.minFilter&&(f.texParameteri(f.TEXTURE_3D,f.TEXTURE_MAG_FILTER,d),f.texParameteri(f.TEXTURE_3D,f.TEXTURE_MIN_FILTER,d),this.minFilter=d),i!==this.wrapS&&(f.texParameteri(f.TEXTURE_3D,f.TEXTURE_WRAP_S,i),f.texParameteri(f.TEXTURE_3D,f.TEXTURE_WRAP_T,i),this.wrapS=i)}destroy(){const{gl:d}=this.context;d.deleteTexture(this.texture),this.texture=null}},n.dp=kP,n.dq=[1,1,1],n.dr=r_,n.ds=a_,n.dt=Ud,n.du=jh,n.dv=ll,n.dw=tp,n.dx=yh,n.dy=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new Bt(1/0,1/0),max:new Bt(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(d,i=!1){const u=JT(new Bt(0,0),new Bt(Na,Na),d),f=[];if(i&&!nm(u,this._globalClipBounds))return f;for(const y of this._activeRegions){if(y.hiddenByOverlap||!nm(u,y))continue;const m=AP(y.min,y.max,d);f.push({min:m.min,max:m.max,sourceId:this._sourceIds[y.priority],footprint:y.footprint,footprintTileId:y.tileId,order:y.order,clipMask:y.clipMask,clipScope:y.clipScope})}return f}setSources(d){this._setSources(d.map(i=>({getSourceId:()=>i.cache.id,getFootprints:()=>{const u=[];for(const f of i.cache.getVisibleCoordinates()){const y=i.cache.getTile(f).buckets[i.layer];y&&y.updateFootprints(f.toUnwrapped(),u)}return u},getOrder:()=>i.order,getClipMask:()=>i.clipMask,getClipScope:()=>i.clipScope})))}_addSource(d){const i=d.getFootprints();if(i.length===0)return;const u=d.getOrder(),f=d.getClipMask(),y=d.getClipScope();for(const m of i){if(!m.footprint)continue;const _=JT(m.footprint.min,m.footprint.max,m.id);this._activeRegions.push({min:_.min,max:_.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:m.id,footprint:m.footprint,order:u,clipMask:f,clipScope:y})}this._sourceIds.push(d.getSourceId())}_computeReplacement(){this._activeRegions.sort((i,u)=>i.priority-u.priority||j0(i.min,u.min)||j0(i.max,u.max)||i.order-u.order||i.clipMask-u.clipMask||function(f,y){const m=(_,b)=>_+b;return f.length-y.length||f.reduce(m,"").localeCompare(y.reduce(m,""))}(i.clipScope,u.clipScope));let d=this._activeRegions.length!==this._prevRegions.length;if(!d){let i=0;for(;!d&&i!==this._activeRegions.length;){const u=this._activeRegions[i],f=this._prevRegions[i];d=u.priority!==f.priority||!XT(u,f)||u.order!==f.order||u.clipMask!==f.clipMask||!la(u.clipScope,f.clipScope),++i}}if(d){++this._updateTime;for(const u of this._activeRegions)u.order!==Ym&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,u.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,u.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,u.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,u.max.y));const i=u=>{const f=this._activeRegions;if(u>=f.length)return u;const y=f[u].priority;for(;u<f.length&&f[u].priority===y;)++u;return u};if(this._sourceIds.length>1){let u=0,f=i(u);for(;u!==f;){let y=u;const m=u;for(;y!==f;){const _=this._activeRegions[y];_.hiddenByOverlap=!1;for(let b=0;b<m;b++){const N=this._activeRegions[b];if(!N.hiddenByOverlap&&_.order===Ym&&nm(_,N)&&(_.hiddenByOverlap=eS(_.footprint,_.tileId,N.footprint,N.tileId),_.hiddenByOverlap))break}++y}u=f,f=i(u)}}}}_setSources(d){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let i=d.length-1;i>=0;i--)this._addSource(d[i]);this._computeReplacement()}},n.dz=class{constructor(d){this._createGrid(d),this._createPoles(d)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const d of this._poleSegments)d.destroy();for(const d of this._gridSegments)d.withSkirts.destroy(),d.withoutSkirts.destroy()}_fillGridMeshWithLods(d,i){const u=new bu,f=new Ps,y=[],m=d+1+2,_=i[0]+1,b=i[0]+1+(1+i.length),N=(D,S,V)=>{let I=D===m-1?D-2:D===0?D:D-1;return I+=V?24575:0,[I,S]};for(let D=0;D<m;++D)u.emplaceBack(...N(D,0,!0));for(let D=0;D<_;++D)for(let S=0;S<m;++S)u.emplaceBack(...N(S,D,(S===0||S===m-1)&&!0));for(let D=0;D<i.length;++D){const S=i[D];for(let V=0;V<m;++V)u.emplaceBack(...N(V,S,!0))}for(let D=0;D<i.length;++D){const S=f.length,V=i[D]+1+2,I=new Ps;for(let B=0;B<V-1;B++){const X=B===V-2,ee=X?m*(b-i.length+D-B):m;for(let ue=0;ue<m-1;ue++){const le=B*m+ue;B===0||X||ue===0||ue===m-2?(I.emplaceBack(le+1,le,le+ee),I.emplaceBack(le+ee,le+ee+1,le+1)):(f.emplaceBack(le+1,le,le+ee),f.emplaceBack(le+ee,le+ee+1,le+1))}}const O=Di.simpleSegment(0,S,u.length,f.length-S);for(let B=0;B<I.uint16.length;B+=3)f.emplaceBack(I.uint16[B],I.uint16[B+1],I.uint16[B+2]);const M=Di.simpleSegment(0,S,u.length,f.length-S);y.push({withoutSkirts:O,withSkirts:M})}return{vertices:u,indices:f,segments:y}}_createGrid(d){const i=this._fillGridMeshWithLods(op,xf);this._gridSegments=i.segments,this._gridBuffer=d.createVertexBuffer(i.vertices,pr.members),this._gridIndexBuffer=d.createIndexBuffer(i.indices,!0)}_createPoles(d){const i=new Ps;for(let _=0;_<=op;_++)i.emplaceBack(0,_+1,_+2);this._poleIndexBuffer=d.createIndexBuffer(i,!0);const u=new $s,f=new $s,y=new $s,m=new $s;this._poleSegments=[];for(let _=0,b=0;_<vh;_++){const N=360/(1<<_);u.emplaceBack(0,-Al,0,.5,0),f.emplaceBack(0,-Al,0,.5,1),y.emplaceBack(0,-Al,0,.5,.5),m.emplaceBack(0,-Al,0,.5,.5);for(let D=0;D<=op;D++){let S=D/op,V=0;const I=hr(0,N,S),[O,M,B]=lp(go,wh,I,Al);u.emplaceBack(O,M,B,S,V),f.emplaceBack(O,M,B,S,1-V);const X=za(I);S=.5+.5*Math.sin(X),V=.5+.5*Math.cos(X),y.emplaceBack(O,M,B,S,V),m.emplaceBack(O,M,B,S,1-V)}this._poleSegments.push(Di.simpleSegment(b,0,66,64)),b+=66}this._poleNorthVertexBuffer=d.createVertexBuffer(u,sr,!1),this._poleSouthVertexBuffer=d.createVertexBuffer(f,sr,!1),this._texturedPoleNorthVertexBuffer=d.createVertexBuffer(y,sr,!1),this._texturedPoleSouthVertexBuffer=d.createVertexBuffer(m,sr,!1)}getGridBuffers(d,i){return[this._gridBuffer,this._gridIndexBuffer,i?this._gridSegments[d].withSkirts:this._gridSegments[d].withoutSkirts]}getPoleBuffers(d,i){return[i?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,i?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[d]]}},n.e=xe,n.e0=OF,n.e1=fp,n.e2=Ef,n.e3="hd_road_elevation",n.e4=class{static parseFrom(d,i){const u=Nf.parse(d);if(!u)return[];let{vertices:f,features:y}=u;const m=1/g(i);y.sort((D,S)=>D.id-S.id),f.sort((D,S)=>D.id-S.id||D.idx-S.idx),f=f.filter((D,S,V)=>S===V.findIndex(I=>I.id===D.id&&I.idx===D.idx));const _=new Array;let b=0;const N=f.length;for(const D of y){if(D.constantHeight){_.push(new $y(D.id,D.bounds,D.constantHeight));continue}for(;b!==N&&f[b].id<D.id;)b++;if(b===N||f[b].id!==D.id)continue;const S=new Array,V=new Array,I=b;for(;b!==N&&f[b].id===D.id;){const O=f[b];if(S.push({position:O.position,height:O.height,extent:O.extent}),b!==I&&f[b-1].idx===O.idx-1){const M=b-I;V.push({a:M-1,b:M})}b++}_.push(new $y(D.id,D.bounds,void 0,S,V,m))}return _}},n.e5=gr,n.e6=Co,n.e7=q4,n.e8=J0,n.e9=function(d,i,u,f,y,m,_,b=1,N){d.createArrays(),d.tilePixelRatio=Na/(512*d.overscaling),d.compareText={},d.iconsNeedLinear=!1;const D=d.layers[0].layout,S=d.layers[0]._unevaluatedLayout._values,V={};V.scaleFactor=b,V.textSizeScaleRange=D.get("text-size-scale-range"),V.iconSizeScaleRange=D.get("icon-size-scale-range");const[I,O]=V.textSizeScaleRange,[M,B]=V.iconSizeScaleRange;V.textScaleFactor=ka(V.scaleFactor,I,O),V.iconScaleFactor=ka(V.scaleFactor,M,B);const X=S["text-size"],ee=S["icon-size"];if(d.textSizeData.kind==="composite"){const{minZoom:Pe,maxZoom:We}=d.textSizeData;V.compositeTextSizes=[X.possiblyEvaluate(new vn(Pe),m),X.possiblyEvaluate(new vn(We),m)]}if(d.iconSizeData.kind==="composite"){const{minZoom:Pe,maxZoom:We}=d.iconSizeData;V.compositeIconSizes=[ee.possiblyEvaluate(new vn(Pe),m),ee.possiblyEvaluate(new vn(We),m)]}V.layoutTextSize=X.possiblyEvaluate(new vn(_+1),m),V.layoutIconSize=ee.possiblyEvaluate(new vn(_+1),m),V.textMaxSize=X.possiblyEvaluate(new vn(18),m);const ue=D.get("symbol-placement"),le=D.get("text-rotation-alignment")==="map"&&ue!=="point",re=D.get("text-size");let pe=!1;const we=[];for(const Pe of d.features){const We=D.get("text-font").evaluate(Pe,{},m).join(","),je=re.evaluate(Pe,{},m)*V.textScaleFactor,Ze=V.layoutTextSize.evaluate(Pe,{},m)*V.textScaleFactor,mt=V.layoutIconSize.evaluate(Pe,{},m)*V.iconScaleFactor,Ye={horizontal:{},vertical:void 0},At=Pe.text;let xt,St=[0,0];if(At){const _a=At.toString(),Ar=D.get("text-letter-spacing").evaluate(Pe,{},m)*Fe,$a=D.get("text-line-height").evaluate(Pe,{},m)*Fe,or=Ga(_a)?Ar:0,Dr=D.get("text-anchor").evaluate(Pe,{},m),Jr=D.get("text-variable-anchor");if(!Jr){const $n=D.get("text-radial-offset").evaluate(Pe,{},m);St=$n?J4(Dr,[$n*Fe,bP]):D.get("text-offset").evaluate(Pe,{},m).map(Ei=>Ei*Fe)}let kr=le?"center":D.get("text-justify").evaluate(Pe,{},m);const dn=ue==="point",Xr=dn?D.get("text-max-width").evaluate(Pe,{},m)*Fe:1/0,wn=$n=>{d.allowVerticalPlacement&&ta(_a)&&(Ye.vertical=TP(At,i,u,y,We,Xr,$a,Dr,$n,or,St,Hd.vertical,!0,Ze,je,N))};if(!le&&Jr){const $n=kr==="auto"?Jr.map(Lr=>xP(Lr)):[kr];let Ei=!1;for(let Lr=0;Lr<$n.length;Lr++){const En=$n[Lr];if(!Ye.horizontal[En])if(Ei)Ye.horizontal[En]=Ye.horizontal[0];else{const Yi=TP(At,i,u,y,We,Xr,$a,"center",En,or,St,Hd.horizontal,!1,Ze,je,N);Yi&&(Ye.horizontal[En]=Yi,Ei=Yi.positionedLines.length===1)}}wn("left")}else{if(kr==="auto"&&(kr=xP(Dr)),dn||D.get("text-writing-mode").indexOf("horizontal")>=0||!ta(_a)){const $n=TP(At,i,u,y,We,Xr,$a,Dr,kr,or,St,Hd.horizontal,!1,Ze,je,N);$n&&(Ye.horizontal[kr]=$n)}wn(dn?"left":kr)}}let Ot,Nt,Ut,Mt,jt,ga=!1;if(Pe.icon&&Pe.icon.hasPrimary()){const _a=eL(Pe.icon,d.iconSizeData,S["icon-size"],m,d.zoom,Pe,N,V.iconScaleFactor);Ot=_a.iconPrimary,Nt=_a.iconSecondary;const Ar=Ot.toString(),$a=f.get(Ar);$a&&(Ut=D.get("icon-offset").evaluate(Pe,{},m),Mt=D.get("icon-anchor").evaluate(Pe,{},m),jt=D.get("icon-text-fit").evaluate(Pe,{},m),xt=nQ(y.get(Ar),Nt?y.get(Nt.toString()):void 0,Ut,Mt),ga=$a.sdf,d.sdfIcons===void 0?d.sdfIcons=$a.sdf:d.sdfIcons!==$a.sdf&&en("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),($a.pixelRatio!==d.pixelRatio||D.get("icon-rotate").constantOr(1)!==0)&&(d.iconsNeedLinear=!0))}pe=pe||!(!Pe.icon||!Pe.icon.hasSecondary());const ma=PP(Ye.horizontal)||Ye.vertical;d.iconsInText||(d.iconsInText=!!ma&&ma.iconsInText);const Ya=Ze*V.textScaleFactor/Fe,{defaultShapedIcon:xa,verticallyShapedIcon:Oa}=hQ(d,xt,D,Pe,m,Ye,Ya,Ut,jt);xt=xa,we.push({feature:Pe,shapedTextOrientations:Ye,shapedText:ma,shapedIcon:xt,iconPrimary:Ot,iconSecondary:Nt,iconOffset:Ut,iconAnchor:Mt,verticallyShapedIcon:Oa,layoutTextSize:Ze,layoutIconSize:mt,textOffset:St,isSDFIcon:ga,iconTextFit:jt})}return{featureData:we,sizes:V,hasAnySecondaryIcon:pe,textAlongLine:le,symbolPlacement:ue}},n.ea=H4,n.eb=function(d,i,u,f,y,m,_,b,N,D){const{featureData:S,hasAnySecondaryIcon:V,sizes:I,textAlongLine:O,symbolPlacement:M}=i;for(const B of S){const{shapedIcon:X,verticallyShapedIcon:ee,feature:ue,shapedTextOrientations:le,shapedText:re,layoutTextSize:pe,textOffset:we,isSDFIcon:Pe,iconPrimary:We,iconSecondary:je,iconTextFit:Ze,iconOffset:mt}=B;tL(X,D.iconPositions,We,je),tL(ee,D.iconPositions,We,je),dQ(le,D.iconPositions),(re||X)&&fQ(d,ue,le,X,ee,N,I,pe,0,we,Pe,f,y,_,b,V,Ze,mt,O,M)}u&&d.generateCollisionDebugBuffers(m,d.collisionBoxArray,I.textScaleFactor)},n.ec=Th,n.ed=jS,n.ee=Pa,n.ef=U0,n.eg=yi,n.eh=w,n.ei=function(d){let i=0;if(new Uint32Array(d,0,1)[0]!==CF){const u=new Uint32Array(d,0,7),[,,f,y,m,_]=u;i=u.byteLength+y+m+_+m,(f!==d.byteLength||i>=d.byteLength)&&en("Invalid b3dm header information.")}return EF(d,i)},n.ej=function(d,i){const u=VF(d);for(const f of u){for(const y of f.meshes)Bee(y);f.lights&&(f.lightMeshIndex=f.meshes.length,f.meshes.push(Gee(f.lights,i)))}return u},n.ek=MS,n.el=ZL,n.em=ss,n.en=function(d){qr(),Gr!=null&&Gr.then(i=>{i.keys().then(u=>{for(let f=0;f<u.length-d;f++)i.delete(u[f])})})},n.f=function(d){return d.indexOf("mapbox:")===0},n.g=function(d,i){return Yo(Rn(d,{method:"GET"}),i)},n.h=Oe,n.i=function(d){return xe.API_STYLE_REGEX.test(d)&&!rt(d)},n.j=function(d){return decodeURIComponent(atob(d).split("").map(i=>"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)).join(""))},n.k=function(d){return btoa(encodeURIComponent(d).replace(/%([0-9A-F]{2})/g,(i,u)=>String.fromCharCode(+("0x"+u))))},n.l=Rn,n.m=Hr,n.n=function(d,i){return Yo(Rn(d,{type:"json"}),i)},n.o=ah,n.p=function(d,i){return Yo(Rn(d,{method:"POST"}),i)},n.q=qt,n.r=wl,n.s=function(d){try{const i=self[d];return i.setItem("_mapbox_test_",1),i.removeItem("_mapbox_test_"),!0}catch{return!1}},n.t=$t,n.u=function(){return function d(i){return i?(i^Math.random()*(16>>i/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,d)}()},n.v=function(d){return!!d&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(d)},n.w=en,n.x=function(){return HP||(HP=new EA),HP},n.y=YP,n.z=vd}),l(["./shared"],function(n){function w(Xt){const xe=Xt?Xt.url.toString():void 0;return xe?performance.getEntriesByName(xe):[]}function T(Xt){if(typeof Xt=="number"||typeof Xt=="boolean"||typeof Xt=="string"||Xt==null)return JSON.stringify(Xt);if(Array.isArray(Xt)){let Oe="[";for(const rt of Xt)Oe+=`${T(rt)},`;return`${Oe}]`}let xe="{";for(const Oe of Object.keys(Xt).sort())xe+=`${Oe}:${T(Xt[Oe])},`;return`${xe}}`}function E(Xt){let xe="";for(const Oe of n.bm)(Xt.type!=="model"||Oe!=="minzoom"&&Oe!=="maxzoom")&&(xe+=`/${T(Xt[Oe])}`);return xe}class z{constructor(xe){this.keyCache={},this._layers={},this._layerConfigs={},xe&&this.replace(xe)}replace(xe,Oe){this._layerConfigs={},this._layers={},this.update(xe,[],Oe)}update(xe,Oe,rt){this._options=rt;for(const yt of xe)this._layerConfigs[yt.id]=yt,(this._layers[yt.id]=n.cv(yt,this.scope,null,this._options)).compileFilter(rt),this.keyCache[yt.id]&&delete this.keyCache[yt.id];for(const yt of Oe)delete this.keyCache[yt],delete this._layerConfigs[yt],delete this._layers[yt];this.familiesBySource={};const _t=function(yt,bt){const kt={};for(let Ht=0;Ht<yt.length;Ht++){const $t=yt[Ht];let qt=bt&&bt[$t.id];!qt&&(qt=E($t),$t.type==="line"&&$t.paint)&&function Ma(Ba){return typeof Ba=="string"&&Ba==="line-progress"||(Array.isArray(Ba)?Ba.some(Ma):!(!Ba||typeof Ba!="object")&&Object.values(Ba).some(Ma))}($t.paint["line-width"])&&(qt+=`/${T($t.paint["line-width"])}`),bt&&(bt[$t.id]=qt);let Ra=kt[qt];Ra||(Ra=kt[qt]=[]),Ra.push($t)}const Et=[];for(const Ht in kt)Et.push(kt[Ht]);return Et}(Object.values(this._layerConfigs),this.keyCache);for(const yt of _t){const bt=yt.map(Ra=>this._layers[Ra.id]),kt=bt[0];if(kt.visibility==="none")continue;const Et=kt.source||"";let Ht=this.familiesBySource[Et];Ht||(Ht=this.familiesBySource[Et]={});const $t=kt.sourceLayer||"_geojsonTileLayer";let qt=Ht[$t];qt||(qt=Ht[$t]=[]),qt.push(bt)}}}const k=1*n.d_;class U{constructor(xe){const Oe={},rt=[];for(const kt in xe){const Et=xe[kt],Ht=Oe[kt]={};for(const $t in Et.glyphs){const qt=Et.glyphs[+$t];if(!qt||qt.bitmap.width===0||qt.bitmap.height===0)continue;const Ra=qt.metrics.localGlyph?k:1,Ma={x:0,y:0,w:qt.bitmap.width+2*Ra,h:qt.bitmap.height+2*Ra};rt.push(Ma),Ht[$t]=Ma}}const{w:_t,h:yt}=n.H(rt),bt=new n.dZ({width:_t||1,height:yt||1});for(const kt in xe){const Et=xe[kt];for(const Ht in Et.glyphs){const $t=Et.glyphs[+Ht];if(!$t||$t.bitmap.width===0||$t.bitmap.height===0)continue;const qt=Oe[kt][Ht],Ra=$t.metrics.localGlyph?k:1;n.dZ.copy($t.bitmap,bt,{x:0,y:0},{x:qt.x+Ra,y:qt.y+Ra},$t.bitmap)}}this.image=bt,this.positions=Oe}}n.dY(U,"GlyphAtlas");class Z{constructor(xe){this.tileID=new n.aH(xe.tileID.overscaledZ,xe.tileID.wrap,xe.tileID.canonical.z,xe.tileID.canonical.x,xe.tileID.canonical.y),this.tileZoom=xe.tileZoom,this.uid=xe.uid,this.zoom=xe.zoom,this.lut=xe.lut,this.canonical=xe.tileID.canonical,this.pixelRatio=xe.pixelRatio,this.tileSize=xe.tileSize,this.source=xe.source,this.scope=xe.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=xe.showCollisionBoxes,this.collectResourceTiming=!!xe.request&&xe.request.collectResourceTiming,this.promoteId=xe.promoteId,this.isSymbolTile=xe.isSymbolTile,this.tileTransform=n.aR(xe.tileID.canonical,xe.projection),this.projection=xe.projection,this.worldview=xe.worldview,this.localizableLayerIds=xe.localizableLayerIds,this.brightness=xe.brightness,this.extraShadowCaster=!!xe.extraShadowCaster,this.tessellationStep=xe.tessellationStep,this.scaleFactor=xe.scaleFactor}parse(xe,Oe,rt,_t,yt){this.status="parsing",this.data=xe,this.collisionBoxArray=new n.aX;const bt=new n.d$(Object.keys(xe.layers).sort()),kt=new n.e0(this.tileID,this.promoteId);kt.bucketLayerIDs=[];const Et={},Ht=new n.e1(256,256),$t={featureIndex:kt,iconDependencies:new Map,patternDependencies:new Map,glyphDependencies:{},lineAtlas:Ht,availableImages:rt,brightness:this.brightness,scaleFactor:this.scaleFactor,elevationFeatures:void 0},qt=Oe.familiesBySource[this.source];for(const qr in qt){const yn=xe.layers[qr];if(!yn)continue;let Hr=!1,In=!1,Vi=!1;for(const Do of qt[qr])Do[0].type==="symbol"?Hr=!0:In=!0,Do[0].is3D()&&Do[0].type!=="model"&&(Vi=!0);if(this.extraShadowCaster&&!Vi||this.isSymbolTile===!0&&!Hr||this.isSymbolTile===!1&&!In)continue;yn.version===1&&n.w(`Vector tile source "${this.source}" layer "${qr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Gi=bt.encode(qr),_s=[];let vs=!1;for(let Do=0,ws=0;Do<yn.length;Do++){const ks=yn.feature(Do),nc=kt.getId(ks,qr);if(this.localizableLayerIds&&this.localizableLayerIds.has(qr)){const Yo=ks.properties?ks.properties.worldview:null;if(this.worldview&&typeof Yo=="string")if(Yo==="all")ks.properties.$localized=!0;else{if(!Yo.split(",").includes(this.worldview))continue;ks.properties.$localized=!0,ks.properties.worldview=this.worldview}}!vs&&ks.properties&&ks.properties.hasOwnProperty(n.e2)&&(vs=!0),_s.push({feature:ks,id:nc,index:ws,sourceLayerIndex:Gi}),ws++}vs&&!$t.elevationFeatures&&xe.layers.hasOwnProperty(n.e3)&&($t.elevationFeatures=n.e4.parseFrom(xe.layers[n.e3],this.canonical));for(const Do of qt[qr]){const ws=Do[0];(!this.extraShadowCaster||ws.is3D()&&ws.type!=="model")&&(this.isSymbolTile!==void 0&&ws.type==="symbol"!==this.isSymbolTile||ws.minzoom&&this.zoom<Math.floor(ws.minzoom)||ws.maxzoom&&this.zoom>=ws.maxzoom||ws.visibility!=="none"&&(q(Do,this.zoom,$t.brightness,rt),(Et[ws.id]=ws.createBucket({index:kt.bucketLayerIDs.length,layers:Do,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Gi,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep})).populate(_s,$t,this.tileID.canonical,this.tileTransform),kt.bucketLayerIDs.push(Do.map(ks=>n.C(ks.id,ks.scope)))))}}let Ra,Ma,Ba,_r,Nr,Vr;Ht.trim();const Gr={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},zn=()=>{if(Ra)return this.status="done",yt(Ra);if(this.extraShadowCaster)this.status="done",yt(null,{buckets:Object.values(Et).filter(qr=>!qr.isEmpty()),featureIndex:kt,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:$t.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(Ma&&Ba&&_r){const qr=new U(Ma),yn=new Map;for(const[Vi,Gi]of Ba.entries()){const{imagePosition:_s}=n.e7(Vi,Gi,n.e8);yn.set(Vi,_s)}const Hr={};for(const Vi in Et){const Gi=Et[Vi];Gi instanceof n.aY&&(q(Gi.layers,this.zoom,$t.brightness,rt),Hr[Vi]=n.e9(Gi,Ma,qr.positions,Ba,yn,this.tileID.canonical,this.tileZoom,this.scaleFactor,this.pixelRatio))}const In={iconsPending:!0,patternsPending:!0};this.rasterizeIfNeeded(_t,Ba,Nr,()=>{In.iconsPending=!1,Jn(Hr,qr,In)}),this.rasterizeIfNeeded(_t,_r,Vr,()=>{In.patternsPending=!1,Jn(Hr,qr,In)})}},Jn=(qr,yn,Hr,In)=>{if(Hr.iconsPending||Hr.patternsPending)return;const Vi=new n.ea(Ba,_r,this.lut);for(const Gi in Et){const _s=Et[Gi];if(Gi in qr)n.eb(_s,qr[Gi],this.showCollisionBoxes,rt,this.tileID.canonical,this.tileZoom,this.projection,this.brightness,Ba,Vi);else if(_s.hasPattern&&(_s instanceof n.b2||_s instanceof n.b3||_s instanceof n.d8)){q(_s.layers,this.zoom,$t.brightness,rt);const vs=Object.fromEntries(Vi.patternPositions);_s.addFeatures($t,this.tileID.canonical,vs,rt,this.tileTransform,this.brightness)}}this.status="done",yt(null,{buckets:Object.values(Et).filter(Gi=>!Gi.isEmpty()),featureIndex:kt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:yn.image,lineAtlas:Ht,imageAtlas:Vi,brightness:$t.brightness})};if(!this.extraShadowCaster){const qr=n.e5($t.glyphDependencies,In=>Object.keys(In).map(Number));Object.keys(qr).length?_t.send("getGlyphs",{uid:this.uid,stacks:qr,scope:this.scope},(In,Vi)=>{Ra||(Ra=In,Ma=Vi,zn())},void 0,!1,Gr):Ma={};const yn=Array.from($t.iconDependencies.keys()).map(In=>n.I.parse(In));yn.length?_t.send("getImages",{images:yn,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(In,Vi)=>{Ra||(Ra=In,Ba=new Map,Nr=this.updateImageMapAndGetImageTaskQueue(Ba,Vi,$t.iconDependencies),zn())},void 0,!1,Gr):(Ba=new Map,Nr=new Map);const Hr=Array.from($t.patternDependencies.keys()).map(In=>n.I.parse(In));Hr.length?_t.send("getImages",{images:Hr,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(In,Vi)=>{Ra||(Ra=In,_r=new Map,Vr=this.updateImageMapAndGetImageTaskQueue(_r,Vi,$t.patternDependencies),zn())},void 0,!1,Gr):(_r=new Map,Vr=new Map)}if($t.elevationFeatures&&$t.elevationFeatures.length>0){const qr=[];for(const Hr of Object.values(Et))if(Hr instanceof n.b3){const In=Hr.getUnevaluatedPortalGraph();In&&qr.push(In)}const yn=n.e6.evaluate(qr);for(const Hr of Object.values(Et))Hr instanceof n.b3&&Hr.setEvaluatedPortalGraph(yn)}zn()}rasterizeIfNeeded(xe,Oe,rt,_t){Array.from(Oe.values()).some(yt=>yt.usvg)?this.rasterize(xe,Oe,rt,_t):_t()}updateImageMapAndGetImageTaskQueue(xe,Oe,rt){const _t=new Map;for(const yt of Oe.keys()){const bt=rt.get(yt)||[];for(const kt of bt){const Et=kt.toString(),Ht=Oe.get(kt.id.toString());Ht.usvg?_t.has(Et)||(_t.set(Et,kt),xe.set(Et,Object.assign({},Ht))):xe.set(Et,Ht)}}return _t}rasterize(xe,Oe,rt,_t){this.rasterizeTask=xe.send("rasterizeImages",{scope:this.scope,tasks:rt},(yt,bt)=>{if(!yt)for(const[kt,Et]of bt.entries()){const Ht=Object.assign(Oe.get(kt),{data:Et});Oe.set(kt,Ht)}_t()})}cancelRasterize(){this.rasterizeTask&&this.rasterizeTask.cancel()}}function q(Xt,xe,Oe,rt){const _t=new n.aa(xe,{brightness:Oe});for(const yt of Xt)yt.recalculate(_t,rt)}class $ extends n.E{constructor(xe,Oe,rt,_t,yt,bt){super(),this.actor=xe,this.layerIndex=Oe,this.availableImages=rt,this.loadVectorData=yt||n.aE,this.loading={},this.loaded={},this.deduped=new n.aD(xe.scheduler),this.isSpriteLoaded=_t,this.scheduler=xe.scheduler,this.brightness=bt}loadTile(xe,Oe){const rt=xe.uid,_t=xe&&xe.request,yt=_t&&_t.collectResourceTiming,bt=this.loading[rt]=new Z(xe);bt.abort=this.loadVectorData(xe,(kt,Et)=>{const Ht=!this.loading[rt];if(delete this.loading[rt],bt.cancelRasterize(),Ht||kt||!Et)return bt.status="done",Ht||(this.loaded[rt]=bt),Oe(kt);const $t=Et.rawData,qt={};Et.expires&&(qt.expires=Et.expires),Et.cacheControl&&(qt.cacheControl=Et.cacheControl),bt.vectorTile=Et.vectorTile||new n.ec.VectorTile(new n.bi($t));const Ra=()=>{bt.parse(bt.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ma,Ba)=>{if(Ma||!Ba)return Oe(Ma);const _r={};if(yt){const Nr=w(_t);Nr.length>0&&(_r.resourceTiming=JSON.parse(JSON.stringify(Nr)))}Oe(null,n.l({rawTileData:$t.slice(0)},Ba,qt,_r))})};this.isSpriteLoaded?Ra():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(Ra,{type:"parseTile",isSymbolTile:xe.isSymbolTile,zoom:xe.tileZoom}):Ra()}),this.loaded=this.loaded||{},this.loaded[rt]=bt})}reloadTile(xe,Oe){const rt=this.loaded,_t=xe.uid;if(rt&&rt[_t]){const yt=rt[_t];yt.scaleFactor=xe.scaleFactor,yt.showCollisionBoxes=xe.showCollisionBoxes,yt.projection=xe.projection,yt.brightness=xe.brightness,yt.tileTransform=n.aR(xe.tileID.canonical,xe.projection),yt.extraShadowCaster=xe.extraShadowCaster,yt.lut=xe.lut;const bt=(kt,Et)=>{const Ht=yt.reloadCallback;Ht&&(delete yt.reloadCallback,yt.parse(yt.vectorTile,this.layerIndex,this.availableImages,this.actor,Ht)),Oe(kt,Et)};yt.status==="parsing"?yt.reloadCallback=bt:yt.status==="done"&&(yt.vectorTile?yt.parse(yt.vectorTile,this.layerIndex,this.availableImages,this.actor,bt):bt())}else Oe(null,void 0)}abortTile(xe,Oe){const rt=xe.uid,_t=this.loading[rt];_t&&(_t.abort&&_t.abort(),delete this.loading[rt]),Oe()}removeTile(xe,Oe){const rt=this.loaded,_t=xe.uid;rt&&rt[_t]&&delete rt[_t],Oe()}}class J{loadTile(xe,Oe){const{uid:rt,encoding:_t,rawImageData:yt,padding:bt}=xe,kt=ImageBitmap&&yt instanceof ImageBitmap?this.getImageData(yt,bt):yt;Oe(null,new n.ed(rt,kt,_t,bt<1))}reloadTile(xe,Oe){Oe(null,null)}abortTile(xe,Oe){Oe()}removeTile(xe,Oe){Oe()}getImageData(xe,Oe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(xe.width,xe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=xe.width,this.offscreenCanvas.height=xe.height,this.offscreenCanvasContext.drawImage(xe,0,0,xe.width,xe.height);const rt=this.offscreenCanvasContext.getImageData(-Oe,-Oe,xe.width+2*Oe,xe.height+2*Oe);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),rt}}n.bh.setPbf(n.bi);class ie{constructor(xe){this._mrt=new n.bh(xe.partial?30:1/0),this._isHeaderLoaded=!1,this.uid=xe.uid,this.tileID=xe.tileID,this.source=xe.source}parse(xe,Oe){const rt=this._mrt;this.status="parsing",this._entireBuffer=xe;try{rt.parseHeader(xe),this._isHeaderLoaded=!0;const _t=[];for(const yt in rt.layers){const bt=rt.getLayer(yt),kt=bt.getDataRange(bt.getBandList()),Et=rt.createDecodingTask(kt),Ht=xe.slice(kt.firstByte,kt.lastByte+1),$t=n.bh.performDecoding(Ht,Et).then(qt=>Et.complete(null,qt)).catch(qt=>Et.complete(qt,null));_t.push($t)}Promise.allSettled(_t).then(()=>Oe(null,rt))}catch(_t){Oe(_t)}}}class de{constructor(xe){this.actor=xe,this.loading={},this.loaded={}}loadTile(xe,Oe){const rt=xe.uid,_t=xe.request,yt=this.loading[rt]=new ie(xe),{cancel:bt}=n.bj(_t,(kt,Et,Ht,$t)=>{const qt=!this.loading[rt];if(delete this.loading[rt],qt||kt||!Et)return yt.status="done",qt||(this.loaded[rt]=yt),Oe(kt);yt.parse(Et,(Ra,Ma)=>{if(Ra||!Ma)return Oe(Ra);Oe(null,Ma,Ht,$t)}),this.loaded[rt]=yt});yt.abort=bt}reloadTile(xe,Oe){Oe(null,void 0)}abortTile(xe,Oe){const rt=xe.uid,_t=this.loading[rt];_t&&(_t.abort&&_t.abort(),delete this.loading[rt]),Oe()}removeTile(xe,Oe){const rt=xe.uid;this.loaded[rt]&&delete this.loaded[rt],Oe()}decodeRasterArray({task:xe,buffer:Oe},rt){n.bh.performDecoding(Oe,xe).then(_t=>rt(null,_t)).catch(_t=>rt(_t))}}const ge=n.ec.VectorTileFeature.prototype.toGeoJSON;class he{constructor(xe){this._feature=xe,this.extent=n.ai,this.type=xe.type,this.properties=xe.tags,"id"in xe&&!isNaN(xe.id)&&(this.id=parseInt(xe.id,10))}loadGeometry(){if(this._feature.type===1){const xe=[];for(const Oe of this._feature.geometry)xe.push([new n.P(Oe[0],Oe[1])]);return xe}{const xe=[];for(const Oe of this._feature.geometry){const rt=[];for(const _t of Oe)rt.push(new n.P(_t[0],_t[1]));xe.push(rt)}return xe}}toGeoJSON(xe,Oe,rt){return ge.call(this,xe,Oe,rt)}}class Ae{constructor(xe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=n.ai,this.length=xe.length,this._features=xe}feature(xe){return new he(this._features[xe])}}const me=64/4096,Re=128;class be{constructor(){this.features=new Map}clear(){this.features.clear()}load(xe=[],Oe){for(const rt of xe){const _t=rt.id;if(_t==null)continue;let yt=this.features.get(_t);yt&&this.updateCache(yt,Oe),rt.geometry?(yt=ne(rt),this.updateCache(yt,Oe),this.features.set(_t,yt)):this.features.delete(_t),this.updateCache(yt,Oe)}}updateCache(xe,Oe){for(const{canonical:rt,uid:_t}of Object.values(Oe)){const{z:yt,x:bt,y:kt}=rt;De(xe,Math.pow(2,yt),bt,kt)&&delete Oe[_t]}}getTile(xe,Oe,rt){const _t=Math.pow(2,xe),yt=[];for(const bt of this.features.values())De(bt,_t,Oe,rt)&&yt.push(Le(bt,_t,Oe,rt));return{features:yt}}getFeatures(){return[...this.features.values()]}}function De({minX:Xt,minY:xe,maxX:Oe,maxY:rt},_t,yt,bt){return Xt<(yt+1+me)/_t&&xe<(bt+1+me)/_t&&Oe>(yt-me)/_t&&rt>(bt-me)/_t}function ne(Xt){const{id:xe,geometry:Oe,properties:rt}=Xt;if(!Oe)return;if(Oe.type==="GeometryCollection")throw new Error("GeometryCollection not supported in dynamic mode.");const{type:_t,coordinates:yt}=Oe,bt={id:xe,type:1,geometry:[],tags:rt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},kt=bt.geometry;if(_t==="Point")ye(yt,kt,bt);else if(_t==="MultiPoint")for(const Et of yt)ye(Et,kt,bt);else if(_t==="LineString")bt.type=2,Me(yt,kt,bt);else if(_t==="MultiLineString")bt.type=2,ze(yt,kt,bt);else if(_t==="Polygon")bt.type=3,ze(yt,kt,bt,!0);else{if(_t!=="MultiPolygon")throw new Error("Input data is not a valid GeoJSON object.");bt.type=3;for(const Et of yt)ze(Et,kt,bt,!0)}return bt}function ye([Xt,xe],Oe,rt){const _t=n.av(Xt);let yt=n.aC(xe);yt=yt<0?0:yt>1?1:yt,Oe.push(_t,yt),rt.minX=Math.min(rt.minX,_t),rt.minY=Math.min(rt.minY,yt),rt.maxX=Math.max(rt.maxX,_t),rt.maxY=Math.max(rt.maxY,yt)}function Me(Xt,xe,Oe,rt=!1,_t=!1){const yt=[];for(const bt of Xt)ye(bt,yt,Oe);xe.push(yt),rt&&function(bt,kt){let Et=0;for(let Ht=0,$t=bt.length,qt=$t-2;Ht<$t;qt=Ht,Ht+=2)Et+=(bt[Ht]-bt[qt])*(bt[Ht+1]+bt[qt+1]);if(Et>0===kt)for(let Ht=0,$t=bt.length;Ht<$t/2;Ht+=2){const qt=bt[Ht],Ra=bt[Ht+1];bt[Ht]=bt[$t-2-Ht],bt[Ht+1]=bt[$t-1-Ht],bt[$t-2-Ht]=qt,bt[$t-1-Ht]=Ra}}(yt,_t)}function ze(Xt,xe,Oe,rt=!1){for(let _t=0;_t<Xt.length;_t++)Me(Xt[_t],xe,Oe,rt,_t===0)}function Le(Xt,xe,Oe,rt){const{id:_t,type:yt,geometry:bt,tags:kt}=Xt,Et=[];if(yt===1)(function(Ht,$t,qt,Ra,Ma){for(let Ba=0;Ba<Ht.length;Ba+=2){const _r=Math.round(n.ai*(Ht[Ba+0]*$t-qt)),Nr=Math.round(n.ai*(Ht[Ba+1]*$t-Ra));Ma.push([_r,Nr])}})(bt,xe,Oe,rt,Et);else for(const Ht of bt)Ie(Ht,xe,Oe,rt,Et);return{id:_t,type:yt,geometry:Et,tags:kt}}function Ie(Xt,xe,Oe,rt,_t){const bt=n.ai+Re;let kt;for(let Et=0;Et<Xt.length-2;Et+=2){let Ht=Math.round(n.ai*(Xt[Et+0]*xe-Oe)),$t=Math.round(n.ai*(Xt[Et+1]*xe-rt)),qt=Math.round(n.ai*(Xt[Et+2]*xe-Oe)),Ra=Math.round(n.ai*(Xt[Et+3]*xe-rt));const Ma=qt-Ht,Ba=Ra-$t;Ht<-128&&qt<-128||(Ht<-128?($t+=Math.round(Ba*((-128-Ht)/Ma)),Ht=-128):qt<-128&&(Ra=$t+Math.round(Ba*((-128-Ht)/Ma)),qt=-128),$t<-128&&Ra<-128||($t<-128?(Ht+=Math.round(Ma*((-128-$t)/Ba)),$t=-128):Ra<-128&&(qt=Ht+Math.round(Ma*((-128-$t)/Ba)),Ra=-128),Ht>=bt&&qt>=bt||(Ht>=bt?($t+=Math.round(Ba*((bt-Ht)/Ma)),Ht=bt):qt>=bt&&(Ra=$t+Math.round(Ba*((bt-Ht)/Ma)),qt=bt),$t>=bt&&Ra>=bt||($t>=bt?(Ht+=Math.round(Ma*((bt-$t)/Ba)),$t=bt):Ra>=bt&&(qt=Ht+Math.round(Ma*((bt-$t)/Ba)),Ra=bt),kt&&Ht===kt[kt.length-1][0]&&$t===kt[kt.length-1][1]||(kt=[[Ht,$t]],_t.push(kt)),kt.push([qt,Ra])))))}}var qe,ke,tt,Ue={exports:{}},He=function(){if(tt)return Ue.exports;tt=1;var Xt=n.eg(),xe=function(){if(ke)return qe;ke=1;var $t=n.ee(),qt=n.ef().VectorTileFeature;function Ra(Ba,_r){this.options=_r||{},this.features=Ba,this.length=Ba.length}function Ma(Ba,_r){this.id=typeof Ba.id=="number"?Ba.id:void 0,this.type=Ba.type,this.rawGeometry=Ba.type===1?[Ba.geometry]:Ba.geometry,this.properties=Ba.tags,this.extent=_r||4096}return qe=Ra,Ra.prototype.feature=function(Ba){return new Ma(this.features[Ba],this.options.extent)},Ma.prototype.loadGeometry=function(){var Ba=this.rawGeometry;this.geometry=[];for(var _r=0;_r<Ba.length;_r++){for(var Nr=Ba[_r],Vr=[],Gr=0;Gr<Nr.length;Gr++)Vr.push(new $t(Nr[Gr][0],Nr[Gr][1]));this.geometry.push(Vr)}return this.geometry},Ma.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ba=this.geometry,_r=1/0,Nr=-1/0,Vr=1/0,Gr=-1/0,zn=0;zn<Ba.length;zn++)for(var Jn=Ba[zn],qr=0;qr<Jn.length;qr++){var yn=Jn[qr];_r=Math.min(_r,yn.x),Nr=Math.max(Nr,yn.x),Vr=Math.min(Vr,yn.y),Gr=Math.max(Gr,yn.y)}return[_r,Vr,Nr,Gr]},Ma.prototype.toGeoJSON=qt.prototype.toGeoJSON,qe}();function Oe($t){var qt=new Xt;return function(Ra,Ma){for(var Ba in Ra.layers)Ma.writeMessage(3,rt,Ra.layers[Ba])}($t,qt),qt.finish()}function rt($t,qt){var Ra;qt.writeVarintField(15,$t.version||1),qt.writeStringField(1,$t.name||""),qt.writeVarintField(5,$t.extent||4096);var Ma={keys:[],values:[],keycache:{},valuecache:{}};for(Ra=0;Ra<$t.length;Ra++)Ma.feature=$t.feature(Ra),qt.writeMessage(2,_t,Ma);var Ba=Ma.keys;for(Ra=0;Ra<Ba.length;Ra++)qt.writeStringField(3,Ba[Ra]);var _r=Ma.values;for(Ra=0;Ra<_r.length;Ra++)qt.writeMessage(4,Ht,_r[Ra])}function _t($t,qt){var Ra=$t.feature;Ra.id!==void 0&&qt.writeVarintField(1,Ra.id),qt.writeMessage(2,yt,$t),qt.writeVarintField(3,Ra.type),qt.writeMessage(4,Et,Ra)}function yt($t,qt){var Ra=$t.feature,Ma=$t.keys,Ba=$t.values,_r=$t.keycache,Nr=$t.valuecache;for(var Vr in Ra.properties){var Gr=Ra.properties[Vr],zn=_r[Vr];if(Gr!==null){zn===void 0&&(Ma.push(Vr),_r[Vr]=zn=Ma.length-1),qt.writeVarint(zn);var Jn=typeof Gr;Jn!=="string"&&Jn!=="boolean"&&Jn!=="number"&&(Gr=JSON.stringify(Gr));var qr=Jn+":"+Gr,yn=Nr[qr];yn===void 0&&(Ba.push(Gr),Nr[qr]=yn=Ba.length-1),qt.writeVarint(yn)}}}function bt($t,qt){return(qt<<3)+(7&$t)}function kt($t){return $t<<1^$t>>31}function Et($t,qt){for(var Ra=$t.loadGeometry(),Ma=$t.type,Ba=0,_r=0,Nr=Ra.length,Vr=0;Vr<Nr;Vr++){var Gr=Ra[Vr],zn=1;Ma===1&&(zn=Gr.length),qt.writeVarint(bt(1,zn));for(var Jn=Ma===3?Gr.length-1:Gr.length,qr=0;qr<Jn;qr++){qr===1&&Ma!==1&&qt.writeVarint(bt(2,Jn-1));var yn=Gr[qr].x-Ba,Hr=Gr[qr].y-_r;qt.writeVarint(kt(yn)),qt.writeVarint(kt(Hr)),Ba+=yn,_r+=Hr}Ma===3&&qt.writeVarint(bt(7,1))}}function Ht($t,qt){var Ra=typeof $t;Ra==="string"?qt.writeStringField(1,$t):Ra==="boolean"?qt.writeBooleanField(7,$t):Ra==="number"&&($t%1!=0?qt.writeDoubleField(3,$t):$t<0?qt.writeSVarintField(6,$t):qt.writeVarintField(5,$t))}return Ue.exports=Oe,Ue.exports.fromVectorTileJs=Oe,Ue.exports.fromGeojsonVt=function($t,qt){qt=qt||{};var Ra={};for(var Ma in $t)Ra[Ma]=new xe($t[Ma].features,qt),Ra[Ma].name=Ma,Ra[Ma].version=qt.version,Ra[Ma].extent=qt.extent;return Oe({layers:Ra})},Ue.exports.GeoJSONWrapper=xe,Ue.exports}(),Ce=n.eh(He);const Se={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Xt=>Xt},$e=Math.fround||(ft=new Float32Array(1),Xt=>(ft[0]=+Xt,ft[0]));var ft;const Je=3,wt=5,it=6;class ct{constructor(xe){this.options=Object.assign(Object.create(Se),xe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(xe){const{log:Oe,minZoom:rt,maxZoom:_t}=this.options;Oe&&console.time("total time");const yt=`prepare ${xe.length} points`;Oe&&console.time(yt),this.points=xe;const bt=[];for(let Et=0;Et<xe.length;Et++){const Ht=xe[Et];if(!Ht.geometry)continue;const[$t,qt]=Ht.geometry.coordinates,Ra=$e(Zt($t)),Ma=$e(Pa(qt));bt.push(Ra,Ma,1/0,Et,-1,1),this.options.reduce&&bt.push(0)}let kt=this.trees[_t+1]=this._createTree(bt);Oe&&console.timeEnd(yt);for(let Et=_t;Et>=rt;Et--){const Ht=+Date.now();kt=this.trees[Et]=this._createTree(this._cluster(kt,Et)),Oe&&console.log("z%d: %d clusters in %dms",Et,kt.numItems,+Date.now()-Ht)}return Oe&&console.timeEnd("total time"),this}getClusters(xe,Oe){let rt=((xe[0]+180)%360+360)%360-180;const _t=Math.max(-90,Math.min(90,xe[1]));let yt=xe[2]===180?180:((xe[2]+180)%360+360)%360-180;const bt=Math.max(-90,Math.min(90,xe[3]));if(xe[2]-xe[0]>=360)rt=-180,yt=180;else if(rt>yt){const qt=this.getClusters([rt,_t,180,bt],Oe),Ra=this.getClusters([-180,_t,yt,bt],Oe);return qt.concat(Ra)}const kt=this.trees[this._limitZoom(Oe)],Et=kt.range(Zt(rt),Pa(bt),Zt(yt),Pa(_t)),Ht=kt.data,$t=[];for(const qt of Et){const Ra=this.stride*qt;$t.push(Ht[Ra+wt]>1?_e(Ht,Ra,this.clusterProps):this.points[Ht[Ra+Je]])}return $t}getChildren(xe){const Oe=this._getOriginId(xe),rt=this._getOriginZoom(xe),_t="No cluster with the specified id.",yt=this.trees[rt];if(!yt)throw new Error(_t);const bt=yt.data;if(Oe*this.stride>=bt.length)throw new Error(_t);const kt=this.options.radius/(this.options.extent*Math.pow(2,rt-1)),Et=yt.within(bt[Oe*this.stride],bt[Oe*this.stride+1],kt),Ht=[];for(const $t of Et){const qt=$t*this.stride;bt[qt+4]===xe&&Ht.push(bt[qt+wt]>1?_e(bt,qt,this.clusterProps):this.points[bt[qt+Je]])}if(Ht.length===0)throw new Error(_t);return Ht}getLeaves(xe,Oe,rt){const _t=[];return this._appendLeaves(_t,xe,Oe=Oe||10,rt=rt||0,0),_t}getTile(xe,Oe,rt){const _t=this.trees[this._limitZoom(xe)],yt=Math.pow(2,xe),{extent:bt,radius:kt}=this.options,Et=kt/bt,Ht=(rt-Et)/yt,$t=(rt+1+Et)/yt,qt={features:[]};return this._addTileFeatures(_t.range((Oe-Et)/yt,Ht,(Oe+1+Et)/yt,$t),_t.data,Oe,rt,yt,qt),Oe===0&&this._addTileFeatures(_t.range(1-Et/yt,Ht,1,$t),_t.data,yt,rt,yt,qt),Oe===yt-1&&this._addTileFeatures(_t.range(0,Ht,Et/yt,$t),_t.data,-1,rt,yt,qt),qt.features.length?qt:null}getClusterExpansionZoom(xe){let Oe=this._getOriginZoom(xe)-1;for(;Oe<=this.options.maxZoom;){const rt=this.getChildren(xe);if(Oe++,rt.length!==1)break;xe=rt[0].properties.cluster_id}return Oe}_appendLeaves(xe,Oe,rt,_t,yt){const bt=this.getChildren(Oe);for(const kt of bt){const Et=kt.properties;if(Et&&Et.cluster?yt+Et.point_count<=_t?yt+=Et.point_count:yt=this._appendLeaves(xe,Et.cluster_id,rt,_t,yt):yt<_t?yt++:xe.push(kt),xe.length===rt)break}return yt}_createTree(xe){const Oe=new n.bE(xe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let rt=0;rt<xe.length;rt+=this.stride)Oe.add(xe[rt],xe[rt+1]);return Oe.finish(),Oe.data=xe,Oe}_addTileFeatures(xe,Oe,rt,_t,yt,bt){for(const kt of xe){const Et=kt*this.stride,Ht=Oe[Et+wt]>1;let $t,qt,Ra;if(Ht)$t=Jt(Oe,Et,this.clusterProps),qt=Oe[Et],Ra=Oe[Et+1];else{const _r=this.points[Oe[Et+Je]];$t=_r.properties;const[Nr,Vr]=_r.geometry.coordinates;qt=Zt(Nr),Ra=Pa(Vr)}const Ma={type:1,geometry:[[Math.round(this.options.extent*(qt*yt-rt)),Math.round(this.options.extent*(Ra*yt-_t))]],tags:$t};let Ba;Ba=Ht||this.options.generateId?Oe[Et+Je]:this.points[Oe[Et+Je]].id,Ba!==void 0&&(Ma.id=Ba),bt.features.push(Ma)}}_limitZoom(xe){return Math.max(this.options.minZoom,Math.min(Math.floor(+xe),this.options.maxZoom+1))}_cluster(xe,Oe){const{radius:rt,extent:_t,reduce:yt,minPoints:bt}=this.options,kt=rt/(_t*Math.pow(2,Oe)),Et=xe.data,Ht=[],$t=this.stride;for(let qt=0;qt<Et.length;qt+=$t){if(Et[qt+2]<=Oe)continue;Et[qt+2]=Oe;const Ra=Et[qt],Ma=Et[qt+1],Ba=xe.within(Et[qt],Et[qt+1],kt),_r=Et[qt+wt];let Nr=_r;for(const Vr of Ba){const Gr=Vr*$t;Et[Gr+2]>Oe&&(Nr+=Et[Gr+wt])}if(Nr>_r&&Nr>=bt){let Vr,Gr=Ra*_r,zn=Ma*_r,Jn=-1;const qr=(qt/$t<<5)+(Oe+1)+this.points.length;for(const yn of Ba){const Hr=yn*$t;if(Et[Hr+2]<=Oe)continue;Et[Hr+2]=Oe;const In=Et[Hr+wt];Gr+=Et[Hr]*In,zn+=Et[Hr+1]*In,Et[Hr+4]=qr,yt&&(Vr||(Vr=this._map(Et,qt,!0),Jn=this.clusterProps.length,this.clusterProps.push(Vr)),yt(Vr,this._map(Et,Hr)))}Et[qt+4]=qr,Ht.push(Gr/Nr,zn/Nr,1/0,qr,-1,Nr),yt&&Ht.push(Jn)}else{for(let Vr=0;Vr<$t;Vr++)Ht.push(Et[qt+Vr]);if(Nr>1)for(const Vr of Ba){const Gr=Vr*$t;if(!(Et[Gr+2]<=Oe)){Et[Gr+2]=Oe;for(let zn=0;zn<$t;zn++)Ht.push(Et[Gr+zn])}}}}return Ht}_getOriginId(xe){return xe-this.points.length>>5}_getOriginZoom(xe){return(xe-this.points.length)%32}_map(xe,Oe,rt){if(xe[Oe+wt]>1){const bt=this.clusterProps[xe[Oe+it]];return rt?Object.assign({},bt):bt}const _t=this.points[xe[Oe+Je]].properties,yt=this.options.map(_t);return rt&&yt===_t?Object.assign({},yt):yt}}function _e(Xt,xe,Oe){return{type:"Feature",id:Xt[xe+Je],properties:Jt(Xt,xe,Oe),geometry:{type:"Point",coordinates:[(rt=Xt[xe],360*(rt-.5)),Bt(Xt[xe+1])]}};var rt}function Jt(Xt,xe,Oe){const rt=Xt[xe+wt],_t=rt>=1e4?`${Math.round(rt/1e3)}k`:rt>=1e3?Math.round(rt/100)/10+"k":rt,yt=Xt[xe+it],bt=yt===-1?{}:Object.assign({},Oe[yt]);return Object.assign(bt,{cluster:!0,cluster_id:Xt[xe+Je],point_count:rt,point_count_abbreviated:_t})}function Zt(Xt){return Xt/360+.5}function Pa(Xt){const xe=Math.sin(Xt*Math.PI/180),Oe=.5-.25*Math.log((1+xe)/(1-xe))/Math.PI;return Oe<0?0:Oe>1?1:Oe}function Bt(Xt){const xe=(180-360*Xt)*Math.PI/180;return 360*Math.atan(Math.exp(xe))/Math.PI-90}function la(Xt,xe,Oe,rt){let _t=rt;const yt=xe+(Oe-xe>>1);let bt,kt=Oe-xe;const Et=Xt[xe],Ht=Xt[xe+1],$t=Xt[Oe],qt=Xt[Oe+1];for(let Ra=xe+3;Ra<Oe;Ra+=3){const Ma=Rt(Xt[Ra],Xt[Ra+1],Et,Ht,$t,qt);if(Ma>_t)bt=Ra,_t=Ma;else if(Ma===_t){const Ba=Math.abs(Ra-yt);Ba<kt&&(bt=Ra,kt=Ba)}}_t>rt&&(bt-xe>3&&la(Xt,xe,bt,rt),Xt[bt+2]=_t,Oe-bt>3&&la(Xt,bt,Oe,rt))}function Rt(Xt,xe,Oe,rt,_t,yt){let bt=_t-Oe,kt=yt-rt;if(bt!==0||kt!==0){const Et=((Xt-Oe)*bt+(xe-rt)*kt)/(bt*bt+kt*kt);Et>1?(Oe=_t,rt=yt):Et>0&&(Oe+=bt*Et,rt+=kt*Et)}return bt=Xt-Oe,kt=xe-rt,bt*bt+kt*kt}function yr(Xt,xe,Oe,rt){const _t={id:Xt??null,type:xe,geometry:Oe,tags:rt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(xe==="Point"||xe==="MultiPoint"||xe==="LineString")za(_t,Oe);else if(xe==="Polygon")za(_t,Oe[0]);else if(xe==="MultiLineString")for(const yt of Oe)za(_t,yt);else if(xe==="MultiPolygon")for(const yt of Oe)za(_t,yt[0]);return _t}function za(Xt,xe){for(let Oe=0;Oe<xe.length;Oe+=3)Xt.minX=Math.min(Xt.minX,xe[Oe]),Xt.minY=Math.min(Xt.minY,xe[Oe+1]),Xt.maxX=Math.max(Xt.maxX,xe[Oe]),Xt.maxY=Math.max(Xt.maxY,xe[Oe+1])}function Va(Xt,xe,Oe,rt){if(!xe.geometry)return;const _t=xe.geometry.coordinates;if(_t&&_t.length===0)return;const yt=xe.geometry.type,bt=Math.pow(Oe.tolerance/((1<<Oe.maxZoom)*Oe.extent),2);let kt=[],Et=xe.id;if(Oe.promoteId?Et=xe.properties[Oe.promoteId]:Oe.generateId&&(Et=rt||0),yt==="Point")er(_t,kt);else if(yt==="MultiPoint")for(const Ht of _t)er(Ht,kt);else if(yt==="LineString")cr(_t,kt,bt,!1);else if(yt==="MultiLineString"){if(Oe.lineMetrics){for(const Ht of _t)kt=[],cr(Ht,kt,bt,!1),Xt.push(yr(Et,"LineString",kt,xe.properties));return}ur(_t,kt,bt,!1)}else if(yt==="Polygon")ur(_t,kt,bt,!0);else{if(yt!=="MultiPolygon"){if(yt==="GeometryCollection"){for(const Ht of xe.geometry.geometries)Va(Xt,{id:Et,geometry:Ht,properties:xe.properties},Oe,rt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Ht of _t){const $t=[];ur(Ht,$t,bt,!0),kt.push($t)}}Xt.push(yr(Et,yt,kt,xe.properties))}function er(Xt,xe){xe.push(Pr(Xt[0]),ka(Xt[1]),0)}function cr(Xt,xe,Oe,rt){let _t,yt,bt=0;for(let Et=0;Et<Xt.length;Et++){const Ht=Pr(Xt[Et][0]),$t=ka(Xt[Et][1]);xe.push(Ht,$t,0),Et>0&&(bt+=rt?(_t*$t-Ht*yt)/2:Math.sqrt(Math.pow(Ht-_t,2)+Math.pow($t-yt,2))),_t=Ht,yt=$t}const kt=xe.length-3;xe[2]=1,la(xe,0,kt,Oe),xe[kt+2]=1,xe.size=Math.abs(bt),xe.start=0,xe.end=xe.size}function ur(Xt,xe,Oe,rt){for(let _t=0;_t<Xt.length;_t++){const yt=[];cr(Xt[_t],yt,Oe,rt),xe.push(yt)}}function Pr(Xt){return Xt/360+.5}function ka(Xt){const xe=Math.sin(Xt*Math.PI/180),Oe=.5-.25*Math.log((1+xe)/(1-xe))/Math.PI;return Oe<0?0:Oe>1?1:Oe}function jr(Xt,xe,Oe,rt,_t,yt,bt,kt){if(rt/=xe,yt>=(Oe/=xe)&&bt<rt)return Xt;if(bt<Oe||yt>=rt)return null;const Et=[];for(const Ht of Xt){const $t=Ht.geometry;let qt=Ht.type;const Ra=_t===0?Ht.minX:Ht.minY,Ma=_t===0?Ht.maxX:Ht.maxY;if(Ra>=Oe&&Ma<rt){Et.push(Ht);continue}if(Ma<Oe||Ra>=rt)continue;let Ba=[];if(qt==="Point"||qt==="MultiPoint")pn($t,Ba,Oe,rt,_t);else if(qt==="LineString")Dn($t,Ba,Oe,rt,_t,!1,kt.lineMetrics);else if(qt==="MultiLineString")va($t,Ba,Oe,rt,_t,!1);else if(qt==="Polygon")va($t,Ba,Oe,rt,_t,!0);else if(qt==="MultiPolygon")for(const _r of $t){const Nr=[];va(_r,Nr,Oe,rt,_t,!0),Nr.length&&Ba.push(Nr)}if(Ba.length){if(kt.lineMetrics&&qt==="LineString"){for(const _r of Ba)Et.push(yr(Ht.id,qt,_r,Ht.tags));continue}qt!=="LineString"&&qt!=="MultiLineString"||(Ba.length===1?(qt="LineString",Ba=Ba[0]):qt="MultiLineString"),qt!=="Point"&&qt!=="MultiPoint"||(qt=Ba.length===3?"Point":"MultiPoint"),Et.push(yr(Ht.id,qt,Ba,Ht.tags))}}return Et.length?Et:null}function pn(Xt,xe,Oe,rt,_t){for(let yt=0;yt<Xt.length;yt+=3){const bt=Xt[yt+_t];bt>=Oe&&bt<=rt&&Wa(xe,Xt[yt],Xt[yt+1],Xt[yt+2])}}function Dn(Xt,xe,Oe,rt,_t,yt,bt){let kt=Rn(Xt);const Et=_t===0?ca:Qa;let Ht,$t,qt=Xt.start;for(let Nr=0;Nr<Xt.length-3;Nr+=3){const Vr=Xt[Nr],Gr=Xt[Nr+1],zn=Xt[Nr+2],Jn=Xt[Nr+3],qr=Xt[Nr+4],yn=_t===0?Vr:Gr,Hr=_t===0?Jn:qr;let In=!1;bt&&(Ht=Math.sqrt(Math.pow(Vr-Jn,2)+Math.pow(Gr-qr,2))),yn<Oe?Hr>Oe&&($t=Et(kt,Vr,Gr,Jn,qr,Oe),bt&&(kt.start=qt+Ht*$t)):yn>rt?Hr<rt&&($t=Et(kt,Vr,Gr,Jn,qr,rt),bt&&(kt.start=qt+Ht*$t)):Wa(kt,Vr,Gr,zn),Hr<Oe&&yn>=Oe&&($t=Et(kt,Vr,Gr,Jn,qr,Oe),In=!0),Hr>rt&&yn<=rt&&($t=Et(kt,Vr,Gr,Jn,qr,rt),In=!0),!yt&&In&&(bt&&(kt.end=qt+Ht*$t),xe.push(kt),kt=Rn(Xt)),bt&&(qt+=Ht)}let Ra=Xt.length-3;const Ma=Xt[Ra],Ba=Xt[Ra+1],_r=_t===0?Ma:Ba;_r>=Oe&&_r<=rt&&Wa(kt,Ma,Ba,Xt[Ra+2]),Ra=kt.length-3,yt&&Ra>=3&&(kt[Ra]!==kt[0]||kt[Ra+1]!==kt[1])&&Wa(kt,kt[0],kt[1],kt[2]),kt.length&&xe.push(kt)}function Rn(Xt){const xe=[];return xe.size=Xt.size,xe.start=Xt.start,xe.end=Xt.end,xe}function va(Xt,xe,Oe,rt,_t,yt){for(const bt of Xt)Dn(bt,xe,Oe,rt,_t,yt,!1)}function Wa(Xt,xe,Oe,rt){Xt.push(xe,Oe,rt)}function ca(Xt,xe,Oe,rt,_t,yt){const bt=(yt-xe)/(rt-xe);return Wa(Xt,yt,Oe+(_t-Oe)*bt,1),bt}function Qa(Xt,xe,Oe,rt,_t,yt){const bt=(yt-Oe)/(_t-Oe);return Wa(Xt,xe+(rt-xe)*bt,yt,1),bt}function gr(Xt,xe){const Oe=[];for(let rt=0;rt<Xt.length;rt++){const _t=Xt[rt],yt=_t.type;let bt;if(yt==="Point"||yt==="MultiPoint"||yt==="LineString")bt=Zn(_t.geometry,xe);else if(yt==="MultiLineString"||yt==="Polygon"){bt=[];for(const kt of _t.geometry)bt.push(Zn(kt,xe))}else if(yt==="MultiPolygon"){bt=[];for(const kt of _t.geometry){const Et=[];for(const Ht of kt)Et.push(Zn(Ht,xe));bt.push(Et)}}Oe.push(yr(_t.id,yt,bt,_t.tags))}return Oe}function Zn(Xt,xe){const Oe=[];Oe.size=Xt.size,Xt.start!==void 0&&(Oe.start=Xt.start,Oe.end=Xt.end);for(let rt=0;rt<Xt.length;rt+=3)Oe.push(Xt[rt]+xe,Xt[rt+1],Xt[rt+2]);return Oe}function Mn(Xt,xe){if(Xt.transformed)return Xt;const Oe=1<<Xt.z,rt=Xt.x,_t=Xt.y;for(const yt of Xt.features){const bt=yt.geometry,kt=yt.type;if(yt.geometry=[],kt===1)for(let Et=0;Et<bt.length;Et+=2)yt.geometry.push(mn(bt[Et],bt[Et+1],xe,Oe,rt,_t));else for(let Et=0;Et<bt.length;Et++){const Ht=[];for(let $t=0;$t<bt[Et].length;$t+=2)Ht.push(mn(bt[Et][$t],bt[Et][$t+1],xe,Oe,rt,_t));yt.geometry.push(Ht)}}return Xt.transformed=!0,Xt}function mn(Xt,xe,Oe,rt,_t,yt){return[Math.round(Oe*(Xt*rt-_t)),Math.round(Oe*(xe*rt-yt))]}function en(Xt,xe,Oe,rt,_t){const yt=xe===_t.maxZoom?0:_t.tolerance/((1<<xe)*_t.extent),bt={features:[],numPoints:0,numSimplified:0,numFeatures:Xt.length,source:null,x:Oe,y:rt,z:xe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const kt of Xt)Er(bt,kt,yt,_t);return bt}function Er(Xt,xe,Oe,rt){const _t=xe.geometry,yt=xe.type,bt=[];if(Xt.minX=Math.min(Xt.minX,xe.minX),Xt.minY=Math.min(Xt.minY,xe.minY),Xt.maxX=Math.max(Xt.maxX,xe.maxX),Xt.maxY=Math.max(Xt.maxY,xe.maxY),yt==="Point"||yt==="MultiPoint")for(let kt=0;kt<_t.length;kt+=3)bt.push(_t[kt],_t[kt+1]),Xt.numPoints++,Xt.numSimplified++;else if(yt==="LineString")As(bt,_t,Xt,Oe,!1,!1);else if(yt==="MultiLineString"||yt==="Polygon")for(let kt=0;kt<_t.length;kt++)As(bt,_t[kt],Xt,Oe,yt==="Polygon",kt===0);else if(yt==="MultiPolygon")for(let kt=0;kt<_t.length;kt++){const Et=_t[kt];for(let Ht=0;Ht<Et.length;Ht++)As(bt,Et[Ht],Xt,Oe,!0,Ht===0)}if(bt.length){let kt=xe.tags||null;if(yt==="LineString"&&rt.lineMetrics){kt={};for(const Ht in xe.tags)kt[Ht]=xe.tags[Ht];kt.mapbox_clip_start=_t.start/_t.size,kt.mapbox_clip_end=_t.end/_t.size}const Et={geometry:bt,type:yt==="Polygon"||yt==="MultiPolygon"?3:yt==="LineString"||yt==="MultiLineString"?2:1,tags:kt};xe.id!==null&&(Et.id=xe.id),Xt.features.push(Et)}}function As(Xt,xe,Oe,rt,_t,yt){const bt=rt*rt;if(rt>0&&xe.size<(_t?bt:rt))return void(Oe.numPoints+=xe.length/3);const kt=[];for(let Et=0;Et<xe.length;Et+=3)(rt===0||xe[Et+2]>bt)&&(Oe.numSimplified++,kt.push(xe[Et],xe[Et+1])),Oe.numPoints++;_t&&function(Et,Ht){let $t=0;for(let qt=0,Ra=Et.length,Ma=Ra-2;qt<Ra;Ma=qt,qt+=2)$t+=(Et[qt]-Et[Ma])*(Et[qt+1]+Et[Ma+1]);if($t>0===Ht)for(let qt=0,Ra=Et.length;qt<Ra/2;qt+=2){const Ma=Et[qt],Ba=Et[qt+1];Et[qt]=Et[Ra-2-qt],Et[qt+1]=Et[Ra-1-qt],Et[Ra-2-qt]=Ma,Et[Ra-1-qt]=Ba}}(kt,yt),Xt.push(kt)}const Bi={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Qi{constructor(xe,Oe){const rt=(Oe=this.options=function(yt,bt){for(const kt in bt)yt[kt]=bt[kt];return yt}(Object.create(Bi),Oe)).debug;if(rt&&console.time("preprocess data"),Oe.maxZoom<0||Oe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Oe.promoteId&&Oe.generateId)throw new Error("promoteId and generateId cannot be used together.");let _t=function(yt,bt){const kt=[];if(yt.type==="FeatureCollection")for(let Et=0;Et<yt.features.length;Et++)Va(kt,yt.features[Et],bt,Et);else Va(kt,yt.type==="Feature"?yt:{geometry:yt},bt);return kt}(xe,Oe);this.tiles={},this.tileCoords=[],rt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Oe.indexMaxZoom,Oe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),_t=function(yt,bt){const kt=bt.buffer/bt.extent;let Et=yt;const Ht=jr(yt,1,-1-kt,kt,0,-1,2,bt),$t=jr(yt,1,1-kt,2+kt,0,-1,2,bt);return(Ht||$t)&&(Et=jr(yt,1,-kt,1+kt,0,-1,2,bt)||[],Ht&&(Et=gr(Ht,1).concat(Et)),$t&&(Et=Et.concat(gr($t,-1)))),Et}(_t,Oe),_t.length&&this.splitTile(_t,0,0,0),rt&&(_t.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(xe,Oe,rt,_t,yt,bt,kt){const Et=[xe,Oe,rt,_t],Ht=this.options,$t=Ht.debug;for(;Et.length;){_t=Et.pop(),rt=Et.pop(),Oe=Et.pop(),xe=Et.pop();const qt=1<<Oe,Ra=Oo(Oe,rt,_t);let Ma=this.tiles[Ra];if(!Ma&&($t>1&&console.time("creation"),Ma=this.tiles[Ra]=en(xe,Oe,rt,_t,Ht),this.tileCoords.push({z:Oe,x:rt,y:_t}),$t)){$t>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Oe,rt,_t,Ma.numFeatures,Ma.numPoints,Ma.numSimplified),console.timeEnd("creation"));const In=`z${Oe}`;this.stats[In]=(this.stats[In]||0)+1,this.total++}if(Ma.source=xe,yt==null){if(Oe===Ht.indexMaxZoom||Ma.numPoints<=Ht.indexMaxPoints)continue}else{if(Oe===Ht.maxZoom||Oe===yt)continue;if(yt!=null){const In=yt-Oe;if(rt!==bt>>In||_t!==kt>>In)continue}}if(Ma.source=null,xe.length===0)continue;$t>1&&console.time("clipping");const Ba=.5*Ht.buffer/Ht.extent,_r=.5-Ba,Nr=.5+Ba,Vr=1+Ba;let Gr=null,zn=null,Jn=null,qr=null,yn=jr(xe,qt,rt-Ba,rt+Nr,0,Ma.minX,Ma.maxX,Ht),Hr=jr(xe,qt,rt+_r,rt+Vr,0,Ma.minX,Ma.maxX,Ht);xe=null,yn&&(Gr=jr(yn,qt,_t-Ba,_t+Nr,1,Ma.minY,Ma.maxY,Ht),zn=jr(yn,qt,_t+_r,_t+Vr,1,Ma.minY,Ma.maxY,Ht),yn=null),Hr&&(Jn=jr(Hr,qt,_t-Ba,_t+Nr,1,Ma.minY,Ma.maxY,Ht),qr=jr(Hr,qt,_t+_r,_t+Vr,1,Ma.minY,Ma.maxY,Ht),Hr=null),$t>1&&console.timeEnd("clipping"),Et.push(Gr||[],Oe+1,2*rt,2*_t),Et.push(zn||[],Oe+1,2*rt,2*_t+1),Et.push(Jn||[],Oe+1,2*rt+1,2*_t),Et.push(qr||[],Oe+1,2*rt+1,2*_t+1)}}getTile(xe,Oe,rt){xe=+xe,Oe=+Oe,rt=+rt;const _t=this.options,{extent:yt,debug:bt}=_t;if(xe<0||xe>24)return null;const kt=1<<xe,Et=Oo(xe,Oe=Oe+kt&kt-1,rt);if(this.tiles[Et])return Mn(this.tiles[Et],yt);bt>1&&console.log("drilling down to z%d-%d-%d",xe,Oe,rt);let Ht,$t=xe,qt=Oe,Ra=rt;for(;!Ht&&$t>0;)$t--,qt>>=1,Ra>>=1,Ht=this.tiles[Oo($t,qt,Ra)];return Ht&&Ht.source?(bt>1&&(console.log("found parent tile z%d-%d-%d",$t,qt,Ra),console.time("drilling down")),this.splitTile(Ht.source,$t,qt,Ra,xe,Oe,rt),bt>1&&console.timeEnd("drilling down"),this.tiles[Et]?Mn(this.tiles[Et],yt):null):null}}function Oo(Xt,xe,Oe){return 32*((1<<Xt)*Oe+xe)+Xt}function Ni(Xt,xe){const Oe=Xt.tileID.canonical;if(!this._geoJSONIndex)return void xe(null,null);const rt=this._geoJSONIndex.getTile(Oe.z,Oe.x,Oe.y);if(!rt)return void xe(null,null);const _t=new Ae(rt.features);let yt=Ce(_t);yt.byteOffset===0&&yt.byteLength===yt.buffer.byteLength||(yt=new Uint8Array(yt)),xe(null,{vectorTile:_t,rawData:yt.buffer})}class fn extends ${constructor(xe,Oe,rt,_t,yt,bt){super(xe,Oe,rt,_t,Ni,bt),yt&&(this.loadGeoJSON=yt),this._dynamicIndex=new be}loadData(xe,Oe){const rt=xe&&xe.request,_t=rt&&rt.collectResourceTiming;this.loadGeoJSON(xe,(yt,bt)=>{if(yt||!bt)return Oe(yt);if(typeof bt!="object")return Oe(new Error(`Input data given to '${xe.source}' is not a valid GeoJSON object.`));{try{if(xe.filter){const Et=n.X(xe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Et.result==="error")throw new Error(Et.value.map(Ht=>`${Ht.key}: ${Ht.message}`).join(", "));bt.features=bt.features.filter(Ht=>Et.value.evaluate({zoom:0},Ht))}xe.dynamic?(bt.type==="Feature"&&(bt={type:"FeatureCollection",features:[bt]}),xe.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load(bt.features,this.loaded),xe.cluster&&(bt.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=xe.cluster?new ct(function({superclusterOptions:Et,clusterProperties:Ht}){if(!Ht||!Et)return Et;const $t={},qt={},Ra={accumulated:null,zoom:0},Ma={properties:null},Ba=Object.keys(Ht);for(const _r of Ba){const[Nr,Vr]=Ht[_r],Gr=n.X(Vr),zn=n.X(typeof Nr=="string"?[Nr,["accumulated"],["get",_r]]:Nr);$t[_r]=Gr.value,qt[_r]=zn.value}return Et.map=_r=>{Ma.properties=_r;const Nr={};for(const Vr of Ba)Nr[Vr]=$t[Vr].evaluate(Ra,Ma);return Nr},Et.reduce=(_r,Nr)=>{Ma.properties=Nr;for(const Vr of Ba)Ra.accumulated=_r[Vr],_r[Vr]=qt[Vr].evaluate(Ra,Ma)},Et}(xe)).load(bt.features):xe.dynamic?this._dynamicIndex:function(Et,Ht){return new Qi(Et,Ht)}(bt,xe.geojsonVtOptions)}catch(Et){return Oe(Et)}const kt={};if(_t){const Et=w(rt);Et&&(kt.resourceTiming={},kt.resourceTiming[xe.source]=JSON.parse(JSON.stringify(Et)))}Oe(null,kt)}})}reloadTile(xe,Oe){const rt=this.loaded;return rt&&rt[xe.uid]?xe.partial?Oe(null,void 0):super.reloadTile(xe,Oe):this.loadTile(xe,Oe)}loadGeoJSON(xe,Oe){if(xe.request)n.n(xe.request,Oe);else{if(typeof xe.data!="string")return Oe(new Error(`Input data given to '${xe.source}' is not a valid GeoJSON object.`));try{return Oe(null,JSON.parse(xe.data))}catch{return Oe(new Error(`Input data given to '${xe.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(xe,Oe){try{Oe(null,this._geoJSONIndex.getClusterExpansionZoom(xe.clusterId))}catch(rt){Oe(rt)}}getClusterChildren(xe,Oe){try{Oe(null,this._geoJSONIndex.getChildren(xe.clusterId))}catch(rt){Oe(rt)}}getClusterLeaves(xe,Oe){try{Oe(null,this._geoJSONIndex.getLeaves(xe.clusterId,xe.limit,xe.offset))}catch(rt){Oe(rt)}}}class ui{constructor(xe,Oe){this.tileID=new n.aH(xe.tileID.overscaledZ,xe.tileID.wrap,xe.tileID.canonical.z,xe.tileID.canonical.x,xe.tileID.canonical.y),this.tileZoom=xe.tileZoom,this.uid=xe.uid,this.zoom=xe.zoom,this.canonical=xe.tileID.canonical,this.pixelRatio=xe.pixelRatio,this.tileSize=xe.tileSize,this.source=xe.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=xe.projection,this.brightness=Oe}parse(xe,Oe,rt,_t){this.status="parsing";const yt=new n.aH(rt.tileID.overscaledZ,rt.tileID.wrap,rt.tileID.canonical.z,rt.tileID.canonical.x,rt.tileID.canonical.y),bt=[],kt=Oe.familiesBySource[rt.source],Et=new n.e0(yt,rt.promoteId);return Et.bucketLayerIDs=[],Et.is3DTile=!0,n.ei(xe).then(Ht=>{if(!Ht)return _t(new Error("Could not parse tile"));const $t=n.ej(Ht,1/n.cd(rt.tileID.canonical)),qt=Ht.json.extensionsUsed&&Ht.json.extensionsUsed.includes("MAPBOX_mesh_features")||Ht.json.asset.extras&&Ht.json.asset.extras.MAPBOX_mesh_features,Ra=Ht.json.extensionsUsed&&Ht.json.extensionsUsed.includes("EXT_meshopt_compression"),Ma=new n.aa(this.zoom,{brightness:this.brightness});for(const Ba in kt)for(const _r of kt[Ba]){const Nr=_r[0];Et.bucketLayerIDs.push(_r.map(Gr=>n.C(Gr.id,Gr.scope))),Nr.recalculate(Ma,[]);const Vr=new n.ek(_r,$t,yt,qt,Ra,this.brightness,Et);qt||(Vr.needsUpload=!0),bt.push(Vr),Vr.evaluate(Nr)}this.status="done",_t(null,{buckets:bt,featureIndex:Et,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:null})}).catch(Ht=>_t(new Error(Ht.message)))}}class Ec{constructor(xe,Oe,rt,_t,yt,bt){this.actor=xe,this.layerIndex=Oe,this.availableImages=rt,this.brightness=bt,this.loading={},this.loaded={}}loadTile(xe,Oe){const rt=xe.uid,_t=this.loading[rt]=new ui(xe,this.brightness);n.bj(xe.request,(yt,bt)=>{const kt=!this.loading[rt];return delete this.loading[rt],kt||yt?(_t.status="done",kt||(this.loaded[rt]=_t),Oe(yt)):bt&&bt.byteLength!==0?void _t.parse(bt,this.layerIndex,xe,(Et,Ht)=>{_t.status="done",this.loaded=this.loaded||{},this.loaded[rt]=_t,Et||!Ht?Oe(Et):Oe(null,Ht)}):(_t.status="done",this.loaded[rt]=_t,Oe())})}reloadTile(xe,Oe){const rt=this.loaded,_t=xe.uid;if(rt&&rt[_t]){const yt=rt[_t];yt.projection=xe.projection,yt.brightness=xe.brightness;const bt=(kt,Et)=>{yt.reloadCallback&&(delete yt.reloadCallback,this.loadTile(xe,Oe)),Oe(kt,Et)};yt.status==="parsing"?yt.reloadCallback=bt:yt.status==="done"&&this.loadTile(xe,Oe)}}abortTile(xe,Oe){const rt=xe.uid;this.loading[rt]&&delete this.loading[rt],Oe()}removeTile(xe,Oe){const rt=this.loaded,_t=xe.uid;rt&&rt[_t]&&delete rt[_t],Oe()}}class Us{constructor(xe){this.self=xe,this.actor=new n.el(xe,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.imageRasterizer=new n.y,this.projections={},this.defaultProjection=n.bP({name:"mercator"}),this.workerSourceTypes={vector:$,geojson:fn,"raster-dem":J,"raster-array":de,"batched-model":Ec},this.workerSources={},this.self.registerWorkerSource=(Oe,rt)=>{if(this.workerSourceTypes[Oe])throw new Error(`Worker source with name "${Oe}" already registered.`);this.workerSourceTypes[Oe]=rt},this.self.registerRTLTextPlugin=Oe=>{if(n.em.isParsed())throw new Error("RTL text plugin already registered.");n.em.applyArabicShaping=Oe.applyArabicShaping,n.em.processBidirectionalText=Oe.processBidirectionalText,n.em.processStyledBidirectionalText=Oe.processStyledBidirectionalText}}clearCaches(xe,Oe,rt){delete this.layerIndexes[xe],delete this.availableImages[xe],delete this.workerSources[xe],rt()}checkIfReady(xe,Oe,rt){rt()}setReferrer(xe,Oe){this.referrer=Oe}spriteLoaded(xe,{scope:Oe,isLoaded:rt}){if(this.isSpriteLoaded[xe]||(this.isSpriteLoaded[xe]={}),this.isSpriteLoaded[xe][Oe]=rt,this.workerSources[xe]&&this.workerSources[xe][Oe])for(const _t in this.workerSources[xe][Oe]){const yt=this.workerSources[xe][Oe][_t];for(const bt in yt){const kt=yt[bt];kt instanceof $&&(kt.isSpriteLoaded=rt,kt.fire(new n.A("isSpriteLoaded")))}}}setImages(xe,{scope:Oe,images:rt},_t){if(this.availableImages[xe]||(this.availableImages[xe]={}),this.availableImages[xe][Oe]=rt,this.workerSources[xe]&&this.workerSources[xe][Oe]){for(const yt in this.workerSources[xe][Oe]){const bt=this.workerSources[xe][Oe][yt];for(const kt in bt)bt[kt].availableImages=rt}_t()}else _t()}setProjection(xe,Oe){this.projections[xe]=n.bP(Oe)}setBrightness(xe,Oe,rt){this.brightness=Oe,rt()}setLayers(xe,Oe,rt){this.getLayerIndex(xe,Oe.scope).replace(Oe.layers,Oe.options),rt()}updateLayers(xe,Oe,rt){this.getLayerIndex(xe,Oe.scope).update(Oe.layers,Oe.removedIds,Oe.options),rt()}loadTile(xe,Oe,rt){Oe.projection=this.projections[xe]||this.defaultProjection,this.getWorkerSource(xe,Oe.type,Oe.source,Oe.scope).loadTile(Oe,rt)}decodeRasterArray(xe,Oe,rt){this.getWorkerSource(xe,Oe.type,Oe.source,Oe.scope).decodeRasterArray(Oe,rt)}reloadTile(xe,Oe,rt){Oe.projection=this.projections[xe]||this.defaultProjection,this.getWorkerSource(xe,Oe.type,Oe.source,Oe.scope).reloadTile(Oe,rt)}abortTile(xe,Oe,rt){this.getWorkerSource(xe,Oe.type,Oe.source,Oe.scope).abortTile(Oe,rt)}removeTile(xe,Oe,rt){this.getWorkerSource(xe,Oe.type,Oe.source,Oe.scope).removeTile(Oe,rt)}removeSource(xe,Oe,rt){if(!(this.workerSources[xe]&&this.workerSources[xe][Oe.scope]&&this.workerSources[xe][Oe.scope][Oe.type]&&this.workerSources[xe][Oe.scope][Oe.type][Oe.source]))return;const _t=this.workerSources[xe][Oe.scope][Oe.type][Oe.source];delete this.workerSources[xe][Oe.scope][Oe.type][Oe.source],_t.removeSource!==void 0?_t.removeSource(Oe,rt):rt()}loadWorkerSource(xe,Oe,rt){try{this.self.importScripts(Oe.url),rt()}catch(_t){rt(_t.toString())}}syncRTLPluginState(xe,Oe,rt){try{n.em.setState(Oe);const _t=n.em.getPluginURL();if(n.em.isLoaded()&&!n.em.isParsed()&&_t!=null){this.self.importScripts(_t);const yt=n.em.isParsed();rt(yt?void 0:new Error(`RTL Text Plugin failed to import scripts from ${_t}`),yt)}}catch(_t){rt(_t.toString())}}setDracoUrl(xe,Oe){this.dracoUrl=Oe}getAvailableImages(xe,Oe){this.availableImages[xe]||(this.availableImages[xe]={});let rt=this.availableImages[xe][Oe];return rt||(rt=[]),rt}getLayerIndex(xe,Oe){this.layerIndexes[xe]||(this.layerIndexes[xe]={});let rt=this.layerIndexes[xe][Oe];return rt||(rt=this.layerIndexes[xe][Oe]=new z,rt.scope=Oe),rt}getWorkerSource(xe,Oe,rt,_t){const yt=this.workerSources;return yt[xe]||(yt[xe]={}),yt[xe][_t]||(yt[xe][_t]={}),yt[xe][_t][Oe]||(yt[xe][_t][Oe]={}),this.isSpriteLoaded[xe]||(this.isSpriteLoaded[xe]={}),yt[xe][_t][Oe][rt]||(yt[xe][_t][Oe][rt]=new this.workerSourceTypes[Oe]({send:(bt,kt,Et,Ht,$t,qt)=>{this.actor.send(bt,kt,Et,xe,$t,qt)},scheduler:this.actor.scheduler},this.getLayerIndex(xe,_t),this.getAvailableImages(xe,_t),this.isSpriteLoaded[xe][_t],void 0,this.brightness)),yt[xe][_t][Oe][rt]}rasterizeImages(xe,Oe,rt){const _t=new Map;for(const[yt,{image:bt,imageVariant:kt}]of Oe.tasks.entries()){const Et=this.imageRasterizer.rasterize(kt,bt,Oe.scope,xe);_t.set(yt,Et)}rt(void 0,_t)}removeRasterizedImages(xe,Oe,rt){this.imageRasterizer.removeImagesFromCacheByIds(Oe.imageIds,Oe.scope,xe),rt()}enforceCacheSizeLimit(xe,Oe){n.en(Oe)}getWorkerPerformanceMetrics(xe,Oe,rt){rt(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Us(self)),Us}),l(["./shared"],function(n){var w="3.11.0";const T={create:"create",load:"load",fullLoad:"fullLoad"},E={mark(g){performance.mark(g)},measure(g,o,c){performance.measure(g,o,c)}};function z(g){const o=g.name.split("?")[0];return n.a(o)&&o.includes("mapbox-gl.js")?"javascript":n.a(o)&&o.includes("mapbox-gl.css")?"css":n.b(o)?"fontRange":n.c(o)?"sprite":n.i(o)?"style":n.d(o)?"tilejson":"other"}var k,U={},Z=function(){if(k)return U;function g(A){return!o(A)}function o(A){return typeof window>"u"||typeof document>"u"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var C,P,L=new Blob([""],{type:"text/javascript"}),j=URL.createObjectURL(L);try{P=new Worker(j),C=!0}catch{C=!1}return P&&P.terminate(),URL.revokeObjectURL(j),C}()?function(){var C=document.createElement("canvas");C.width=C.height=1;var P=C.getContext("2d");if(!P)return!1;var L=P.getImageData(0,0,1,1);return L&&L.width===C.width}()?(c[R=A&&A.failIfMajorPerformanceCaveat]===void 0&&(c[R]=function(C){var P,L=function(j){var H=document.createElement("canvas"),W=Object.create(g.webGLContextAttributes);return W.failIfMajorPerformanceCaveat=j,H.getContext("webgl2",W)}(C);if(!L)return!1;try{P=L.createShader(L.VERTEX_SHADER)}catch{return!1}return!(!P||L.isContextLost())&&(L.shaderSource(P,"void main() {}"),L.compileShader(P),L.getShaderParameter(P,L.COMPILE_STATUS)===!0)}(R)),c[R]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var R}k=1,U.supported=g,U.notSupportedReason=o;var c={};return g.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0},U}();function q(g,o,c){const A=document.createElement(g);return o!=null&&(A.className=o),c&&c.appendChild(A),A}function $(g,o,c){const A=document.createElementNS("http://www.w3.org/2000/svg",g);for(const R of Object.keys(o))A.setAttributeNS(null,R,String(o[R]));return c&&c.appendChild(A),A}const J=typeof document<"u"?document.documentElement&&document.documentElement.style:null,ie=J&&J.userSelect!==void 0?"userSelect":"WebkitUserSelect";let de;function ge(){J&&ie&&(de=J[ie],J[ie]="none")}function he(){J&&ie&&(J[ie]=de)}function Ae(g){g.preventDefault(),g.stopPropagation(),window.removeEventListener("click",Ae,!0)}function me(){window.addEventListener("click",Ae,!0),window.setTimeout(()=>{window.removeEventListener("click",Ae,!0)},0)}function Re(g,o){const c=g.getBoundingClientRect();return ne(g,c,o)}function be(g,o){const c=g.getBoundingClientRect(),A=[];for(let R=0;R<o.length;R++)A.push(ne(g,c,o[R]));return A}function De(g){return/firefox/i.test(navigator.userAgent)&&/macintosh/i.test(navigator.userAgent)&&g.button===2&&g.ctrlKey?0:g.button}function ne(g,o,c){const A=g.offsetWidth===o.width?1:g.offsetWidth/o.width;return new n.P((c.clientX-o.left)*A,(c.clientY-o.top)*A)}const ye="01",Me="NO_ACCESS_TOKEN";class ze{constructor(o,c,A){this._transformRequestFn=o,this._customAccessToken=c,this._silenceAuthErrors=!!A,this._createSkuToken()}_createSkuToken(){const o=function(){let c="";for(let A=0;A<10;A++)c+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ye,c].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=o.token,this._skuTokenExpiresAt=o.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(o,c){return this._transformRequestFn&&this._transformRequestFn(o,c)||{url:o}}normalizeStyleURL(o,c){if(!n.f(o))return o;const A=Ie(o);return A.params.push(`sdk=js-${w}`),A.path=`/styles/v1${A.path}`,this._makeAPIURL(A,this._customAccessToken||c)}normalizeGlyphsURL(o,c){if(!n.f(o))return o;const A=Ie(o);return A.path=`/fonts/v1${A.path}`,this._makeAPIURL(A,this._customAccessToken||c)}normalizeModelURL(o,c){if(!n.f(o))return o;const A=Ie(o);return A.path=`/models/v1${A.path}`,this._makeAPIURL(A,this._customAccessToken||c)}normalizeSourceURL(o,c,A,R){if(!n.f(o))return o;const C=Ie(o);return C.path=`/v4/${C.authority}.json`,C.params.push("secure"),A&&C.params.push(`language=${A}`),R&&C.params.push(`worldview=${R}`),this._makeAPIURL(C,this._customAccessToken||c)}normalizeIconsetURL(o,c){const A=Ie(o);return n.f(o)?(A.path=`/styles/v1${A.path}/iconset.pbf`,this._makeAPIURL(A,this._customAccessToken||c)):qe(A)}normalizeSpriteURL(o,c,A,R){const C=Ie(o);return n.f(o)?(C.path=`/styles/v1${C.path}/sprite${c}${A}`,this._makeAPIURL(C,this._customAccessToken||R)):(C.path+=`${c}${A}`,qe(C))}normalizeTileURL(o,c,A){if(this._isSkuTokenExpired()&&this._createSkuToken(),o&&!n.f(o))return o;const R=Ie(o);R.path=R.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${c||A&&R.authority!=="raster"&&A===512?"@2x":""}${n.m.supported?".webp":"$1"}`),R.authority==="raster"?R.path=`/${n.e.RASTER_URL_PREFIX}${R.path}`:R.authority==="rasterarrays"?R.path=`/${n.e.RASTERARRAYS_URL_PREFIX}${R.path}`:R.authority==="3dtiles"?R.path=`/${n.e.TILES3D_URL_PREFIX}${R.path}`:(R.path=R.path.replace(/^.+\/v4\//,"/"),R.path=`/${n.e.TILE_URL_VERSION}${R.path}`);const C=this._customAccessToken||function(P){for(const L of P){const j=L.match(/^access_token=(.*)$/);if(j)return j[1]}return null}(R.params)||n.e.ACCESS_TOKEN;return n.e.REQUIRE_ACCESS_TOKEN&&C&&this._skuToken&&R.params.push(`sku=${this._skuToken}`),this._makeAPIURL(R,C)}canonicalizeTileURL(o,c){const A=Ie(o);if(!A.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!A.path.match(/\.[\w]+$/))return o;let R="mapbox://";A.path.match(/^\/raster\/v1\//)?R+=`raster/${A.path.replace(`/${n.e.RASTER_URL_PREFIX}/`,"")}`:A.path.match(/^\/rasterarrays\/v1\//)?R+=`rasterarrays/${A.path.replace(`/${n.e.RASTERARRAYS_URL_PREFIX}/`,"")}`:R+=`tiles/${A.path.replace(`/${n.e.TILE_URL_VERSION}/`,"")}`;let C=A.params;return c&&(C=C.filter(P=>!P.match(/^access_token=/))),C.length&&(R+=`?${C.join("&")}`),R}canonicalizeTileset(o,c){const A=!!c&&n.f(c),R=[];for(const C of o.tiles||[])n.h(C)?R.push(this.canonicalizeTileURL(C,A)):R.push(C);return R}_makeAPIURL(o,c){const A="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",R=Ie(n.e.API_URL);if(o.protocol=R.protocol,o.authority=R.authority,o.protocol==="http"){const C=o.params.indexOf("secure");C>=0&&o.params.splice(C,1)}if(R.path!=="/"&&(o.path=`${R.path}${o.path}`),!n.e.REQUIRE_ACCESS_TOKEN)return qe(o);if(c=c||n.e.ACCESS_TOKEN,!this._silenceAuthErrors){if(!c)throw new Error(`An API access token is required to use Mapbox GL. ${A}`);if(c[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${A}`)}return o.params=o.params.filter(C=>C.indexOf("access_token")===-1),o.params.push(`access_token=${c||""}`),qe(o)}}const Le=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ie(g){const o=g.match(Le);if(!o)throw new Error("Unable to parse URL object");return{protocol:o[1],authority:o[2],path:o[3]||"/",params:o[4]?o[4].split("&"):[]}}function qe(g){const o=g.params.length?`?${g.params.join("&")}`:"";return`${g.protocol}://${g.authority}${g.path}${o}`}const ke="mapbox.eventData";function tt(g){if(!g)return null;const o=g.split(".");if(!o||o.length!==3)return null;try{return JSON.parse(n.j(o[1]))}catch{return null}}class Ue{constructor(o){this.type=o,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(o){const c=tt(n.e.ACCESS_TOKEN);let A="";return A=c&&c.u?n.k(c.u):n.e.ACCESS_TOKEN||"",o?`${ke}.${o}:${A}`:`${ke}:${A}`}fetchEventData(){const o=n.s("localStorage"),c=this.getStorageKey(),A=this.getStorageKey("uuid");if(o)try{const R=localStorage.getItem(c);R&&(this.eventData=JSON.parse(R));const C=localStorage.getItem(A);C&&(this.anonId=C)}catch{n.w("Unable to read from LocalStorage")}}saveEventData(){const o=n.s("localStorage"),c=this.getStorageKey(),A=this.getStorageKey("uuid"),R=this.anonId;if(o&&R)try{localStorage.setItem(A,R),Object.keys(this.eventData).length>=1&&localStorage.setItem(c,JSON.stringify(this.eventData))}catch{n.w("Unable to write to LocalStorage")}}processRequests(o){}postEvent(o,c,A,R){if(!n.e.EVENTS_URL)return;const C=Ie(n.e.EVENTS_URL);C.params.push(`access_token=${R||n.e.ACCESS_TOKEN||""}`);const P={event:this.type,created:new Date(o).toISOString()},L=c?n.l(P,c):P,j={url:qe(C),headers:{"Content-Type":"text/plain"},body:JSON.stringify([L])};this.pendingRequest=n.p(j,H=>{this.pendingRequest=null,A(H),this.saveEventData(),this.processRequests(R)})}queueRequest(o,c){this.queue.push(o),this.processRequests(c)}}const He=new class extends Ue{constructor(g){super("appUserTurnstile"),this._customAccessToken=g}postTurnstileEvent(g,o){n.e.EVENTS_URL&&n.e.ACCESS_TOKEN&&Array.isArray(g)&&g.some(c=>n.f(c)||n.h(c))&&this.queueRequest(Date.now(),o)}processRequests(g){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const o=tt(n.e.ACCESS_TOKEN),c=o?o.u:n.e.ACCESS_TOKEN;let A=c!==this.eventData.tokenU;n.v(this.anonId)||(this.anonId=n.u(),A=!0);const R=this.queue.shift();if(this.eventData.lastSuccess){const C=new Date(this.eventData.lastSuccess),P=new Date(R),L=(R-this.eventData.lastSuccess)/864e5;A=A||L>=1||L<-1||C.getDate()!==P.getDate()}else A=!0;A?this.postEvent(R,{sdkIdentifier:"mapbox-gl-js",sdkVersion:w,skuId:ye,"enabled.telemetry":!1,userId:this.anonId},C=>{C||(this.eventData.lastSuccess=R,this.eventData.tokenU=c)},g):this.processRequests()}},Ce=He.postTurnstileEvent.bind(He),Se=new class extends Ue{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(g,o,c,A){this.skuToken=o,this.errorCb=A,n.e.EVENTS_URL&&(c||n.e.ACCESS_TOKEN?this.queueRequest({id:g,timestamp:Date.now()},c):this.errorCb(new Error(Me)))}processRequests(g){if(this.pendingRequest||this.queue.length===0)return;const{id:o,timestamp:c}=this.queue.shift();o&&this.success[o]||(this.anonId||this.fetchEventData(),n.v(this.anonId)||(this.anonId=n.u()),this.postEvent(c,{sdkIdentifier:"mapbox-gl-js",sdkVersion:w,skuId:ye,skuToken:this.skuToken,userId:this.anonId},A=>{A?this.errorCb(A):o&&(this.success[o]=!0)},g))}remove(){this.errorCb=null}},$e=Se.postMapLoadEvent.bind(Se),ft=new class extends Ue{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(g){let o=this.mapInstanceIdMap.get(g);return o||(o=n.u(),this.mapInstanceIdMap.set(g,o)),o}getEventId(g){const o=this.eventIdPerMapInstanceMap.get(g)||0;return this.eventIdPerMapInstanceMap.set(g,o+1),o}postStyleLoadEvent(g,o){const{map:c,style:A,importedStyles:R}=o;if(!n.e.EVENTS_URL||!g&&!n.e.ACCESS_TOKEN)return;const C=this.getMapInstanceId(c),P={mapInstanceId:C,eventId:this.getEventId(C),style:A};R.length&&(P.importedStyles=R),this.queueRequest({timestamp:Date.now(),payload:P},g)}processRequests(g){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:o,payload:c}=this.queue.shift();this.postEvent(o,c,()=>{},g)}},Je=ft.postStyleLoadEvent.bind(ft),wt=new class extends Ue{constructor(){super("gljs.performance")}postPerformanceEvent(g,o){n.e.EVENTS_URL&&(g||n.e.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:o},g)}processRequests(g){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:o,performanceData:c}=this.queue.shift(),A=function(R){const C=performance.getEntriesByType("resource"),P=performance.getEntriesByType("mark"),L=function(ce){const Te={};if(ce){for(const ve in ce)if(ve!=="other")for(const Ee of ce[ve]){const Ve=`${ve}ResolveRangeMin`,Be=`${ve}ResolveRangeMax`,et=`${ve}RequestCount`,Xe=`${ve}RequestCachedCount`;Te[Ve]=Math.min(Te[Ve]||1/0,Ee.startTime),Te[Be]=Math.max(Te[Be]||-1/0,Ee.responseEnd);const ht=st=>{Te[st]===void 0&&(Te[st]=0),++Te[st]};Ee.transferSize!==void 0&&Ee.transferSize===0&&ht(Xe),ht(et)}}return Te}(function(ce,Te){const ve={};if(ce)for(const Ee of ce){const Ve=Te(Ee);ve[Ve]===void 0&&(ve[Ve]=[]),ve[Ve].push(Ee)}return ve}(C,z)),j=window.devicePixelRatio,H=navigator.connection||navigator.mozConnection||navigator.webkitConnection,W=H?H.effectiveType:void 0,te={counters:[],metadata:[],attributes:[]},ae=(ce,Te,ve)=>{ve!=null&&ce.push({name:Te,value:ve.toString()})};for(const ce in L)ae(te.counters,ce,L[ce]);if(R.interactionRange[0]!==1/0&&R.interactionRange[1]!==-1/0&&(ae(te.counters,"interactionRangeMin",R.interactionRange[0]),ae(te.counters,"interactionRangeMax",R.interactionRange[1])),P)for(const ce of Object.keys(T)){const Te=T[ce],ve=P.find(Ee=>Ee.name===Te);ve&&ae(te.counters,Te,ve.startTime)}return ae(te.counters,"visibilityHidden",R.visibilityHidden),ae(te.attributes,"style",function(ce){if(ce)for(const Te of ce){const ve=Te.name.split("?")[0];if(n.i(ve)){const Ee=ve.split("/").slice(-2);if(Ee.length===2)return`mapbox://styles/${Ee[0]}/${Ee[1]}`}}}(C)),ae(te.attributes,"terrainEnabled",R.terrainEnabled?"true":"false"),ae(te.attributes,"fogEnabled",R.fogEnabled?"true":"false"),ae(te.attributes,"projection",R.projection),ae(te.attributes,"zoom",R.zoom),ae(te.metadata,"devicePixelRatio",j),ae(te.metadata,"connectionEffectiveType",W),ae(te.metadata,"navigatorUserAgent",navigator.userAgent),ae(te.metadata,"screenWidth",window.screen.width),ae(te.metadata,"screenHeight",window.screen.height),ae(te.metadata,"windowWidth",window.innerWidth),ae(te.metadata,"windowHeight",window.innerHeight),ae(te.metadata,"mapWidth",R.width/j),ae(te.metadata,"mapHeight",R.height/j),ae(te.metadata,"webglRenderer",R.renderer),ae(te.metadata,"webglVendor",R.vendor),ae(te.metadata,"sdkVersion",w),ae(te.metadata,"sdkIdentifier","mapbox-gl-js"),te}(c);for(const R of A.metadata);for(const R of A.counters);for(const R of A.attributes);this.postEvent(o,A,()=>{},g)}},it=wt.postPerformanceEvent.bind(wt),ct=new class extends Ue{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(g,o,c,A){if(!n.e.API_URL||!n.e.SESSION_PATH)return;const R=Ie(n.e.API_URL+n.e.SESSION_PATH);R.params.push(`sku=${o||""}`),R.params.push(`access_token=${A||n.e.ACCESS_TOKEN||""}`);const C={url:qe(R),headers:{"Content-Type":"text/plain"}};this.pendingRequest=n.g(C,P=>{this.pendingRequest=null,c(P),this.saveEventData(),this.processRequests(A)})}getSessionAPI(g,o,c,A){this.skuToken=o,this.errorCb=A,n.e.SESSION_PATH&&n.e.API_URL&&(c||n.e.ACCESS_TOKEN?this.queueRequest({id:g,timestamp:Date.now()},c):this.errorCb(new Error(Me)))}processRequests(g){if(this.pendingRequest||this.queue.length===0)return;const{id:o,timestamp:c}=this.queue.shift();o&&this.success[o]||this.getSession(c,this.skuToken,A=>{A?this.errorCb(A):o&&(this.success[o]=!0)},g)}remove(){this.errorCb=null}},_e=ct.getSessionAPI.bind(ct),Jt=new Set;function Zt(g,o){o?Jt.add(g):Jt.delete(g)}class Pa{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages=new Set}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(o,c){this._updatedSourceCaches[o]=c,this.setDirty()}discardSourceCacheUpdate(o){delete this._updatedSourceCaches[o]}updateLayer(o){const c=o.scope;this._updatedLayers[c]=this._updatedLayers[c]||new Set,this._updatedLayers[c].add(o.id),this.setDirty()}removeLayer(o){const c=o.scope;this._removedLayers[c]=this._removedLayers[c]||{},this._updatedLayers[c]=this._updatedLayers[c]||new Set,this._removedLayers[c][o.id]=o,this._updatedLayers[c].delete(o.id),this._updatedPaintProps.delete(o.fqid),this.setDirty()}getRemovedLayer(o){return this._removedLayers[o.scope]?this._removedLayers[o.scope][o.id]:null}discardLayerRemoval(o){this._removedLayers[o.scope]&&delete this._removedLayers[o.scope][o.id]}getLayerUpdatesByScope(){const o={};for(const c in this._updatedLayers)o[c]=o[c]||{},o[c].updatedIds=Array.from(this._updatedLayers[c].values());for(const c in this._removedLayers)o[c]=o[c]||{},o[c].removedIds=Object.keys(this._removedLayers[c]);return o}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(o){this._updatedPaintProps.add(o.fqid),this.setDirty()}getUpdatedImages(){return Array.from(this._updatedImages.values())}updateImage(o){this._updatedImages.add(n.I.toString(o)),this.setDirty()}resetUpdatedImages(){this._updatedImages.clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages.clear()}}function Bt(g){const{userImage:o}=g;return!!(o&&o.render&&o.render())&&(g.data.replace(new Uint8Array(o.data.buffer)),!0)}class la extends n.E{constructor(o){super(),this._images={},this._iconsets={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded={},this.requestors=[],this.patterns={},this.patternsInFlight=new Set,this.atlasImage={},this.atlasTexture={},this.dirty=!0,this.spriteFormat=o,o!=="raster"&&n.t()&&(this.imageRasterizerDispatcher=new n.D(n.x(),this,"Image Rasterizer Worker",1))}get imageRasterizer(){return this._imageRasterizer||(this._imageRasterizer=new n.y),this._imageRasterizer}createScope(o){this._images[o]={},this._iconsets[o]={},this.loaded[o]=!1,this.updatedImages[o]=new Set,this.patterns[o]={},this.callbackDispatchedThisFrame[o]=new Set,this.atlasImage[o]=new n.r({width:1,height:1})}createIconset(o,c){this._iconsets[o][c]={}}isLoaded(){for(const o in this.loaded)if(!this.loaded[o])return!1;return!0}setLoaded(o,c){if(this.loaded[c]!==o&&(this.loaded[c]=o,o)){for(const{ids:A,callback:R}of this.requestors)this._notify(A,c,R);this.requestors=[]}}hasImage(o,c){return!!this.getImage(o,c)}getImage(o,c){return(o.iconsetId?this._iconsets[c][o.iconsetId]:this._images[c])[o.name]}addImage(o,c,A){const R=o.iconsetId?this._iconsets[c][o.iconsetId]:this._images[c];this._validate(o,A)&&(R[o.name]=A)}_validate(o,c){let A=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new n.z(new Error(`Image "${o.name}" has invalid "stretchX" value`))),A=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new n.z(new Error(`Image "${o.name}" has invalid "stretchY" value`))),A=!1),this._validateContent(c.content,c)||(this.fire(new n.z(new Error(`Image "${o.name}" has invalid "content" value`))),A=!1),A}_validateStretch(o,c){if(!o)return!0;let A=0;for(const R of o){if(R[0]<A||R[1]<R[0]||c<R[1])return!1;A=R[1]}return!0}_validateContent(o,c){return o?o.length!==4||!c.usvg&&(o[0]<0||c.data.width<o[0]||o[1]<0||c.data.height<o[1]||o[2]<0||c.data.width<o[2]||o[3]<0||c.data.height<o[3])?!1:!(o[2]<o[0]||o[3]<o[1]):!0}updateImage(o,c,A){const R=o.iconsetId?this._iconsets[c][o.iconsetId]:this._images[c];A.version=R[o.name].version+1,R[o.name]=A,this.updatedImages[c].add(o),this.removeFromImageRasterizerCache(o,c)}clearUpdatedImages(o){this.updatedImages[o].clear()}removeFromImageRasterizerCache(o,c){if(this.spriteFormat!=="raster")if(n.t()){const A={imageIds:[o],scope:c};this.imageRasterizerDispatcher.getActor().send("removeRasterizedImages",A)}else this.imageRasterizer.removeImagesFromCacheByIds([o],c)}removeImage(o,c){const A=o.iconsetId?this._iconsets[c][o.iconsetId]:this._images[c],R=A[o.name];delete A[o.name],delete this.patterns[c][o.name],this.removeFromImageRasterizerCache(o,c),R.userImage&&R.userImage.onRemove&&R.userImage.onRemove()}listImages(o){const c=[];for(const A of Object.keys(this._images[o]))c.push(new n.I(A));for(const A in this._iconsets[o])for(const R of Object.keys(this._iconsets[o][A]))c.push(new n.I({name:R,iconsetId:A}));return c}getImages(o,c,A){let R=!0;const C=!!this.loaded[c];if(!C)for(const P of o)(P.iconsetId?this._iconsets[c][P.iconsetId]:this._images[c])[P.name]||(R=!1);C||R?this._notify(o,c,A):this.requestors.push({ids:o,scope:c,callback:A})}rasterizeImages({scope:o,tasks:c},A){const R=new Map;for(const[C,P]of c.entries()){const L=this.getImage(P.id,o);L&&R.set(C,{image:L,imageVariant:P})}this._rasterizeImages(o,R,A)}_rasterizeImages(o,c,A){if(n.t())this.imageRasterizerDispatcher.getActor().send("rasterizeImages",{tasks:c,scope:o},A);else{const R=new Map;for(const[C,{image:P,imageVariant:L}]of c.entries())R.set(C,this.imageRasterizer.rasterize(L,P,o,0));A(void 0,R)}}getUpdatedImages(o){return this.updatedImages[o]||new Set}_notify(o,c,A){const R=new Map;for(const C of o){C.iconsetId&&(this._iconsets[c][C.iconsetId]=this._iconsets[c][C.iconsetId]||{});const P=(C.iconsetId?this._iconsets[c][C.iconsetId]:this._images[c])[C.name];if(!P){if(C.iconsetId)continue;n.w(`Image "${C.name}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`),this.fire(new n.A("styleimagemissing",{id:C.name}));continue}const L={data:P.usvg?null:P.data.clone(),pixelRatio:P.pixelRatio,sdf:P.sdf,usvg:P.usvg,version:P.version,stretchX:P.stretchX,stretchY:P.stretchY,content:P.content,hasRenderCallback:!!(P.userImage&&P.userImage.render)};P.usvg&&Object.assign(L,{width:P.icon.usvg_tree.width,height:P.icon.usvg_tree.height}),R.set(n.I.toString(C),L)}A(null,R)}getPixelSize(o){const{width:c,height:A}=this.atlasImage[o];return{width:c,height:A}}getPattern(o,c,A){const R=this.patterns[c][o.name],C=this.getImage(o,c);if(!C)return null;if(R){if(R.position.version===C.version)return R.position;R.position.version=C.version}else{if(C.usvg&&!C.data){const P=this.getPatternInFlightId(o.toString(),c);if(this.patternsInFlight.has(P))return null;this.patternsInFlight.add(P);const L=new n.B(o).scaleSelf(n.q.devicePixelRatio),j=new Map([[L.toString(),{image:C,imageVariant:L}]]);return this._rasterizeImages(c,j,(H,W)=>this.storePatternImage(L,c,C,A,W)),null}this.storePattern(o,c,C)}return this._updatePatternAtlas(c,A),this.patterns[c][o.name].position}getPatternInFlightId(o,c){return n.C(o,c)}hasPatternsInFlight(){return this.patternsInFlight.size!==0}storePatternImage(o,c,A,R,C){const P=o.toString(),L=C?C.get(P):void 0;L&&(A.data=L,this.storePattern(o.id,c,A),this._updatePatternAtlas(c,R),this.patternsInFlight.delete(this.getPatternInFlightId(o.id.toString(),c)))}storePattern(o,c,A){const R={w:A.data.width+2*n.F,h:A.data.height+2*n.F,x:0,y:0},C=new n.G(R,A,n.F);this.patterns[c][o.name]={bin:R,position:C}}bind(o,c){const A=o.gl;let R=this.atlasTexture[c];R?this.dirty&&(R.update(this.atlasImage[c]),this.dirty=!1):(R=new n.T(o,this.atlasImage[c],A.RGBA8),this.atlasTexture[c]=R),R.bind(A.LINEAR,A.CLAMP_TO_EDGE)}_updatePatternAtlas(o,c){const A=[];for(const L in this.patterns[o])A.push(this.patterns[o][L].bin);const{w:R,h:C}=n.H(A),P=this.atlasImage[o];P.resize({width:R||1,height:C||1});for(const L in this.patterns[o]){const{bin:j,position:H}=this.patterns[o][L];let W=H.padding;const te=j.x+W,ae=j.y+W,ce=this._images[o][L].data,Te=ce.width,ve=ce.height;W=W>1?W-1:W,n.r.copy(ce,P,{x:0,y:0},{x:te,y:ae},{width:Te,height:ve},c),n.r.copy(ce,P,{x:0,y:ve-W},{x:te,y:ae-W},{width:Te,height:W},c),n.r.copy(ce,P,{x:0,y:0},{x:te,y:ae+ve},{width:Te,height:W},c),n.r.copy(ce,P,{x:Te-W,y:0},{x:te-W,y:ae},{width:W,height:ve},c),n.r.copy(ce,P,{x:0,y:0},{x:te+Te,y:ae},{width:W,height:ve},c),n.r.copy(ce,P,{x:Te-W,y:ve-W},{x:te-W,y:ae-W},{width:W,height:W},c),n.r.copy(ce,P,{x:0,y:ve-W},{x:te+Te,y:ae-W},{width:W,height:W},c),n.r.copy(ce,P,{x:0,y:0},{x:te+Te,y:ae+ve},{width:W,height:W},c),n.r.copy(ce,P,{x:Te-W,y:0},{x:te-W,y:ae+ve},{width:W,height:W},c)}this.dirty=!0}beginFrame(){for(const o in this._images)this.callbackDispatchedThisFrame[o]=new Set}dispatchRenderCallbacks(o,c){for(const A of o){if(this.callbackDispatchedThisFrame[c].has(A.toString()))continue;this.callbackDispatchedThisFrame[c].add(A.toString());const R=(A.iconsetId?this._iconsets[c][A.iconsetId]:this._images[c])[A.name];Bt(R)&&this.updateImage(A,c,R)}}}function Rt(g){const o=g.key,c=g.value,A=g.valueSpec||{},R=g.objectElementValidators||{},C=g.style,P=g.styleSpec;let L=[];const j=n.K(c);if(j!=="object")return[new n.V(o,c,`object expected, ${j} found`)];for(const H in c){const W=H.split(".")[0];let te;R[W]?te=R[W]:A[W]?te=Er:R["*"]?te=R["*"]:A["*"]&&(te=Er),te?L=L.concat(te({key:(o&&`${o}.`)+H,value:c[H],valueSpec:A[W]||A["*"],style:C,styleSpec:P,object:c,objectKey:H},c)):L.push(new n.J(o,c[H],`unknown property "${H}"`))}for(const H in A)R[H]||A[H].required&&A[H].default===void 0&&c[H]===void 0&&L.push(new n.V(o,c,`missing required property "${H}"`));return L}function yr(g){const o=g.value,c=g.valueSpec,A=g.style,R=g.styleSpec,C=g.key,P=g.arrayElementValidator||Er;if(n.K(o)!=="array")return[new n.V(C,o,`array expected, ${n.K(o)} found`)];if(c.length&&o.length!==c.length)return[new n.V(C,o,`array length ${c.length} expected, length ${o.length} found`)];if(c["min-length"]&&o.length<c["min-length"])return[new n.V(C,o,`array length at least ${c["min-length"]} expected, length ${o.length} found`)];let L={type:c.value,values:c.values,minimum:c.minimum,maximum:c.maximum,function:void 0};R.$version<7&&(L.function=c.function),n.K(c.value)==="object"&&(L=c.value);let j=[];for(let H=0;H<o.length;H++)j=j.concat(P({array:o,arrayIndex:H,value:o[H],valueSpec:L,style:A,styleSpec:R,key:`${C}[${H}]`},!0));return j}function za(g){const o=g.key,c=g.value,A=g.valueSpec;let R=n.K(c);if(R==="number"&&c!=c&&(R="NaN"),R!=="number")return[new n.V(o,c,`number expected, ${R} found`)];if("minimum"in A){let C=A.minimum;if(n.K(A.minimum)==="array"&&(C=A.minimum[g.arrayIndex]),c<C)return[new n.V(o,c,`${c} is less than the minimum value ${C}`)]}if("maximum"in A){let C=A.maximum;if(n.K(A.maximum)==="array"&&(C=A.maximum[g.arrayIndex]),c>C)return[new n.V(o,c,`${c} is greater than the maximum value ${C}`)]}return[]}function Va(g){const o=g.valueSpec,c=n.M(g.value.type);let A,R,C,P={};const L=c!=="categorical"&&g.value.property===void 0,j=!L,H=n.K(g.value.stops)==="array"&&n.K(g.value.stops[0])==="array"&&n.K(g.value.stops[0][0])==="object",W=Rt({key:g.key,value:g.value,valueSpec:g.styleSpec.function,style:g.style,styleSpec:g.styleSpec,objectElementValidators:{stops:function(ce){if(c==="identity")return[new n.V(ce.key,ce.value,'identity function may not have a "stops" property')];let Te=[];const ve=ce.value;return Te=Te.concat(yr({key:ce.key,value:ve,valueSpec:ce.valueSpec,style:ce.style,styleSpec:ce.styleSpec,arrayElementValidator:te})),n.K(ve)==="array"&&ve.length===0&&Te.push(new n.V(ce.key,ve,"array must have at least one stop")),Te},default:function(ce){return Er({key:ce.key,value:ce.value,valueSpec:o,style:ce.style,styleSpec:ce.styleSpec})}}});return c==="identity"&&L&&W.push(new n.V(g.key,g.value,'missing required property "property"')),c==="identity"||g.value.stops||W.push(new n.V(g.key,g.value,'missing required property "stops"')),c==="exponential"&&g.valueSpec.expression&&!n.N(g.valueSpec)&&W.push(new n.V(g.key,g.value,"exponential functions not supported")),g.styleSpec.$version>=8&&(j&&!n.O(g.valueSpec)?W.push(new n.V(g.key,g.value,"property functions not supported")):L&&!n.Q(g.valueSpec)&&W.push(new n.V(g.key,g.value,"zoom functions not supported"))),c!=="categorical"&&!H||g.value.property!==void 0||W.push(new n.V(g.key,g.value,'"property" property is required')),W;function te(ce){let Te=[];const ve=ce.value,Ee=ce.key;if(n.K(ve)!=="array")return[new n.V(Ee,ve,`array expected, ${n.K(ve)} found`)];if(ve.length!==2)return[new n.V(Ee,ve,`array length 2 expected, length ${ve.length} found`)];if(H){if(n.K(ve[0])!=="object")return[new n.V(Ee,ve,`object expected, ${n.K(ve[0])} found`)];if(ve[0].zoom===void 0)return[new n.V(Ee,ve,"object stop key must have zoom")];if(ve[0].value===void 0)return[new n.V(Ee,ve,"object stop key must have value")];const Ve=n.M(ve[0].zoom);if(typeof Ve!="number")return[new n.V(Ee,ve[0].zoom,"stop zoom values must be numbers")];if(C&&C>Ve)return[new n.V(Ee,ve[0].zoom,"stop zoom values must appear in ascending order")];Ve!==C&&(C=Ve,R=void 0,P={}),Te=Te.concat(Rt({key:`${Ee}[0]`,value:ve[0],valueSpec:{zoom:{}},style:ce.style,styleSpec:ce.styleSpec,objectElementValidators:{zoom:za,value:ae}}))}else Te=Te.concat(ae({key:`${Ee}[0]`,value:ve[0],style:ce.style,styleSpec:ce.styleSpec},ve));return n.S(n.U(ve[1]))?Te.concat([new n.V(`${Ee}[1]`,ve[1],"expressions are not allowed in function stops.")]):Te.concat(Er({key:`${Ee}[1]`,value:ve[1],valueSpec:o,style:ce.style,styleSpec:ce.styleSpec}))}function ae(ce,Te){const ve=n.K(ce.value),Ee=n.M(ce.value),Ve=ce.value!==null?ce.value:Te;if(A){if(ve!==A)return[new n.V(ce.key,Ve,`${ve} stop domain type must match previous stop domain type ${A}`)]}else A=ve;if(ve!=="number"&&ve!=="string"&&ve!=="boolean"&&typeof Ee!="number"&&typeof Ee!="string"&&typeof Ee!="boolean")return[new n.V(ce.key,Ve,"stop domain value must be a number, string, or boolean")];if(ve!=="number"&&c!=="categorical"){let Be=`number expected, ${ve} found`;return n.O(o)&&c===void 0&&(Be+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new n.V(ce.key,Ve,Be)]}return c!=="categorical"||ve!=="number"||typeof Ee=="number"&&isFinite(Ee)&&Math.floor(Ee)===Ee?c!=="categorical"&&ve==="number"&&typeof Ee=="number"&&typeof R=="number"&&R!==void 0&&Ee<R?[new n.V(ce.key,Ve,"stop domain values must appear in ascending order")]:(R=Ee,c==="categorical"&&Ee in P?[new n.V(ce.key,Ve,"stop domain values must be unique")]:(P[Ee]=!0,[])):[new n.V(ce.key,Ve,`integer expected, found ${String(Ee)}`)]}}function er(g){const o=(g.expressionContext==="property"?n.W:n.X)(n.U(g.value),g.valueSpec);if(o.result==="error")return o.value.map(A=>new n.V(`${g.key}${A.key}`,g.value,A.message));const c=o.value.expression||o.value._styleExpression.expression;if(g.expressionContext==="property"&&g.propertyKey==="text-font"&&!c.outputDefined())return[new n.V(g.key,g.value,`Invalid data expression for "${g.propertyKey}". Output values must be contained as literals within the expression.`)];if(g.expressionContext==="property"&&g.propertyType==="layout"&&!n.Y(c))return[new n.V(g.key,g.value,'"feature-state" data expressions are not supported with layout properties.')];if(g.expressionContext==="filter")return cr(c,g);if(g.expressionContext&&g.expressionContext.indexOf("cluster")===0){if(!n.Z(c,["zoom","feature-state"]))return[new n.V(g.key,g.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(g.expressionContext==="cluster-initial"&&!n._(c))return[new n.V(g.key,g.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function cr(g,o){const c=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(o.valueSpec&&o.valueSpec.expression)for(const R of o.valueSpec.expression.parameters)c.delete(R);if(c.size===0)return[];const A=[];return g instanceof n.$&&c.has(g.name)?[new n.V(o.key,o.value,`["${g.name}"] expression is not supported in a filter for a ${o.object.type} layer with id: ${o.object.id}`)]:(g.eachChild(R=>{A.push(...cr(R,o))}),A)}function ur(g){const o=g.key,c=g.value,A=g.valueSpec,R=[];return Array.isArray(A.values)?A.values.indexOf(n.M(c))===-1&&R.push(new n.V(o,c,`expected one of [${A.values.join(", ")}], ${JSON.stringify(c)} found`)):Object.keys(A.values).indexOf(n.M(c))===-1&&R.push(new n.V(o,c,`expected one of [${Object.keys(A.values).join(", ")}], ${JSON.stringify(c)} found`)),R}function Pr(g){return n.a1(n.U(g.value))?er(n.L({},g,{expressionContext:"filter",valueSpec:g.styleSpec[`filter_${g.layerType||"fill"}`]})):ka(g)}function ka(g){const o=g.value,c=g.key;if(n.K(o)!=="array")return[new n.V(c,o,`array expected, ${n.K(o)} found`)];const A=g.styleSpec;let R,C=[];if(o.length<1)return[new n.V(c,o,"filter array must have at least 1 element")];switch(C=C.concat(ur({key:`${c}[0]`,value:o[0],valueSpec:A.filter_operator,style:g.style,styleSpec:g.styleSpec})),n.M(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&n.M(o[1])==="$type"&&C.push(new n.V(c,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":o.length!==3&&C.push(new n.V(c,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(R=n.K(o[1]),R!=="string"&&C.push(new n.V(`${c}[1]`,o[1],`string expected, ${R} found`)));for(let P=2;P<o.length;P++)R=n.K(o[P]),n.M(o[1])==="$type"?C=C.concat(ur({key:`${c}[${P}]`,value:o[P],valueSpec:A.geometry_type,style:g.style,styleSpec:g.styleSpec})):R!=="string"&&R!=="number"&&R!=="boolean"&&C.push(new n.V(`${c}[${P}]`,o[P],`string, number, or boolean expected, ${R} found`));break;case"any":case"all":case"none":for(let P=1;P<o.length;P++)C=C.concat(ka({key:`${c}[${P}]`,value:o[P],style:g.style,styleSpec:g.styleSpec}));break;case"has":case"!has":R=n.K(o[1]),o.length!==2?C.push(new n.V(c,o,`filter array for "${o[0]}" operator must have 2 elements`)):R!=="string"&&C.push(new n.V(`${c}[1]`,o[1],`string expected, ${R} found`))}return C}function jr(g,o){const c=g.key,A=g.style,R=g.layer,C=g.styleSpec,P=g.value,L=g.objectKey,j=C[`${o}_${g.layerType}`];if(!j)return[];const H=L.match(/^(.*)-use-theme$/);if(o==="paint"&&H&&j[H[1]])return n.S(P)?[].concat(Er({key:g.key,value:P,valueSpec:{type:"string",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},style:A,styleSpec:C,expressionContext:"property",propertyType:o,propertyKey:L})):Er({key:c,value:P,valueSpec:{type:"string"},style:A,styleSpec:C});const W=L.match(/^(.*)-transition$/);if(o==="paint"&&W&&j[W[1]]&&j[W[1]].transition)return Er({key:c,value:P,valueSpec:C.transition,style:A,styleSpec:C});const te=g.valueSpec||j[L];if(!te)return[new n.J(c,P,`unknown property "${L}"`)];let ae;if(n.K(P)==="string"&&n.O(te)&&!te.tokens&&(ae=/^{([^}]+)}$/.exec(P))){const Te=`\`{ "type": "identity", "property": ${ae?JSON.stringify(ae[1]):'"_"'} }\``;return[new n.V(c,P,`"${L}" does not support interpolation syntax
Use an identity property function instead: ${Te}.`)]}const ce=[];if(g.layerType==="symbol")L!=="text-field"||!A||A.glyphs||A.imports||ce.push(new n.V(c,P,'use of "text-field" requires a style "glyphs" property')),L==="text-font"&&n.a2(n.U(P))&&n.M(P.type)==="identity"&&ce.push(new n.V(c,P,'"text-font" does not support identity functions'));else if(g.layerType==="model"&&o==="paint"&&R&&R.layout&&R.layout.hasOwnProperty("model-id")&&n.O(te)&&(n.a3(te)||n.Q(te))){const Te=n.W(n.U(P),te),ve=Te.value.expression||Te.value._styleExpression.expression;ve&&!n.Z(ve,["measure-light"])&&(L==="model-emissive-strength"&&n._(ve)&&n.Y(ve)||ce.push(new n.V(c,P,`${L} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return ce.concat(Er({key:g.key,value:P,valueSpec:te,style:A,styleSpec:C,expressionContext:"property",propertyType:o,propertyKey:L}))}function pn(g){return jr(g,"paint")}function Dn(g){return jr(g,"layout")}function Rn(g){let o=[];const c=g.value,A=g.key,R=g.style,C=g.styleSpec;c.type||c.ref||o.push(new n.V(A,c,'either "type" or "ref" is required'));let P=n.M(c.type);const L=n.M(c.ref);if(c.id){const j=n.M(c.id);for(let H=0;H<g.arrayIndex;H++){const W=R.layers[H];n.M(W.id)===j&&o.push(new n.V(A,c.id,`duplicate layer id "${c.id}", previously used at line ${W.id.__line__}`))}}if("ref"in c){let j;["type","source","source-layer","filter","layout"].forEach(H=>{H in c&&o.push(new n.V(A,c[H],`"${H}" is prohibited for ref layers`))}),R.layers.forEach(H=>{n.M(H.id)===L&&(j=H)}),j?j.ref?o.push(new n.V(A,c.ref,"ref cannot reference another ref layer")):P=n.M(j.type):typeof L=="string"&&o.push(new n.V(A,c.ref,`ref layer "${L}" not found`))}else if(P!=="background"&&P!=="sky"&&P!=="slot")if(c.source){const j=R.sources&&R.sources[c.source],H=j&&n.M(j.type);j?H==="vector"&&P==="raster"?o.push(new n.V(A,c.source,`layer "${c.id}" requires a raster source`)):H==="raster"&&P!=="raster"?o.push(new n.V(A,c.source,`layer "${c.id}" requires a vector source`)):H!=="vector"||c["source-layer"]?H==="raster-dem"&&P!=="hillshade"?o.push(new n.V(A,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):H!=="raster-array"||["raster","raster-particle"].includes(P)?P!=="line"||!c.paint||!c.paint["line-gradient"]&&!c.paint["line-trim-offset"]||H==="geojson"&&j.lineMetrics?P==="raster-particle"&&H!=="raster-array"&&o.push(new n.V(A,c.source,`layer "${c.id}" requires a 'raster-array' source.`)):o.push(new n.V(A,c,`layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new n.V(A,c.source,"raster-array source can only be used with layer type 'raster'.")):o.push(new n.V(A,c,`layer "${c.id}" must specify a "source-layer"`)):o.push(new n.V(A,c.source,`source "${c.source}" not found`))}else o.push(new n.V(A,c,'missing required property "source"'));return o=o.concat(Rt({key:A,value:c,valueSpec:C.layer,style:g.style,styleSpec:g.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Er({key:`${A}.type`,value:c.type,valueSpec:C.layer.type,style:g.style,styleSpec:g.styleSpec,object:c,objectKey:"type"}),filter:j=>Pr(n.L({layerType:P},j)),layout:j=>Rt({layer:c,key:j.key,value:j.value,valueSpec:{},style:j.style,styleSpec:j.styleSpec,objectElementValidators:{"*":H=>Dn(n.L({layerType:P},H))}}),paint:j=>Rt({layer:c,key:j.key,value:j.value,valueSpec:{},style:j.style,styleSpec:j.styleSpec,objectElementValidators:{"*":H=>pn(n.L({layerType:P,layer:c},H))}})}})),o}function va(g){const o=g.value,c=g.key,A=n.K(o);return A!=="string"?[new n.V(c,o,`string expected, ${A} found`)]:[]}const Wa={promoteId:function g({key:o,value:c}){if(n.K(c)==="string")return va({key:o,value:c});if(Array.isArray(c)){const A=[],R=n.U(c),C=n.X(R);return C.result==="error"&&C.value.forEach(P=>{A.push(new n.V(`${o}${P.key}`,null,`${P.message}`))}),n.Z(C.value.expression,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])||A.push(new n.V(`${o}`,null,"promoteId expression should be only feature dependent")),A}{const A=[];for(const R in c)A.push(...g({key:`${o}.${R}`,value:c[R]}));return A}}};function ca(g){const o=g.value,c=g.key,A=g.styleSpec,R=g.style;if(!o.type)return[new n.V(c,o,'"type" is required')];const C=n.M(o.type);let P=[];switch(["vector","raster","raster-dem","raster-array"].includes(C)&&(o.url||o.tiles||P.push(new n.J(c,o,'Either "url" or "tiles" is required.'))),C){case"vector":case"raster":case"raster-dem":case"raster-array":return P=P.concat(Rt({key:c,value:o,valueSpec:A[`source_${C.replace("-","_")}`],style:g.style,styleSpec:A,objectElementValidators:Wa})),P;case"geojson":if(P=Rt({key:c,value:o,valueSpec:A.source_geojson,style:R,styleSpec:A,objectElementValidators:Wa}),o.cluster)for(const L in o.clusterProperties){const[j,H]=o.clusterProperties[L],W=typeof j=="string"?[j,["accumulated"],["get",L]]:j;P.push(...er({key:`${c}.${L}.map`,value:H,expressionContext:"cluster-map"})),P.push(...er({key:`${c}.${L}.reduce`,value:W,expressionContext:"cluster-reduce"}))}return P;case"video":return Rt({key:c,value:o,valueSpec:A.source_video,style:R,styleSpec:A});case"image":return Rt({key:c,value:o,valueSpec:A.source_image,style:R,styleSpec:A});case"canvas":return[new n.V(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ur({key:`${c}.type`,value:o.type,valueSpec:{values:Qa(A)}})}}function Qa(g){return g.source.reduce((o,c)=>{const A=g[c];return A.type.type==="enum"&&(o=o.concat(Object.keys(A.type.values))),o},[])}function gr(g){const o=g.value,c=g.styleSpec,A=c.light,R=g.style;let C=[];const P=n.K(o);if(o===void 0)return C;if(P!=="object")return C=C.concat([new n.V("light",o,`object expected, ${P} found`)]),C;for(const L in o){const j=L.match(/^(.*)-transition$/),H=L.match(/^(.*)-use-theme$/);C=C.concat(H&&A[H[1]]?Er({key:L,value:o[L],valueSpec:{type:"string"},style:R,styleSpec:c}):j&&A[j[1]]&&A[j[1]].transition?Er({key:L,value:o[L],valueSpec:c.transition,style:R,styleSpec:c}):A[L]?Er({key:L,value:o[L],valueSpec:A[L],style:R,styleSpec:c}):[new n.V(L,o[L],`unknown property "${L}"`)])}return C}function Zn(g){const o=g.value;let c=[];if(!o)return c;const A=n.K(o);if(A!=="object")return c=c.concat([new n.V("light-3d",o,`object expected, ${A} found`)]),c;const R=g.styleSpec,C=R["light-3d"],P=g.key,L=g.style,j=g.style.lights;for(const te of["type","id"])if(!(te in o))return c=c.concat([new n.V("light-3d",o,`missing property ${te} on light`)]),c;if(o.type&&j)for(let te=0;te<g.arrayIndex;te++){const ae=n.M(o.type),ce=j[te];n.M(ce.type)===ae&&c.push(new n.V(P,o.id,`duplicate light type "${o.type}", previously defined at line ${ce.id.__line__}`))}const H=`properties_light_${o.type}`;if(!(H in R))return c=c.concat([new n.V("light-3d",o,`Invalid light type ${o.type}`)]),c;const W=R[H];for(const te in o)if(te==="properties"){const ae=o[te],ce=n.K(ae);if(ce!=="object")return c=c.concat([new n.V("properties",ae,`object expected, ${ce} found`)]),c;for(const Te in ae)c=c.concat(W[Te]?Er({key:Te,value:ae[Te],valueSpec:W[Te],style:L,styleSpec:R}):[new n.J(g.key,ae[Te],`unknown property "${Te}"`)])}else{const ae=te.match(/^(.*)-transition$/),ce=te.match(/^(.*)-use-theme$/);c=c.concat(ce&&C[ce[1]]?Er({key:te,value:o[te],valueSpec:{type:"string"},style:L,styleSpec:R}):ae&&C[ae[1]]&&C[ae[1]].transition?Er({key:te,value:o[te],valueSpec:R.transition,style:L,styleSpec:R}):C[te]?Er({key:te,value:o[te],valueSpec:C[te],style:L,styleSpec:R}):[new n.J(te,o[te],`unknown property "${te}"`)])}return c}function Mn(g){const o=g.value,c=g.key,A=g.style,R=g.styleSpec,C=R.terrain;let P=[];const L=n.K(o);if(o===void 0||L==="null")return P;if(L!=="object")return P=P.concat([new n.V("terrain",o,`object expected, ${L} found`)]),P;for(const j in o){const H=j.match(/^(.*)-transition$/),W=j.match(/^(.*)-use-theme$/);P=P.concat(W&&C[W[1]]?Er({key:j,value:o[j],valueSpec:{type:"string"},style:A,styleSpec:R}):H&&C[H[1]]&&C[H[1]].transition?Er({key:j,value:o[j],valueSpec:R.transition,style:A,styleSpec:R}):C[j]?Er({key:j,value:o[j],valueSpec:C[j],style:A,styleSpec:R}):[new n.J(j,o[j],`unknown property "${j}"`)])}if(o.source){const j=A.sources&&A.sources[o.source],H=j&&n.M(j.type);j?H!=="raster-dem"&&P.push(new n.V(c,o.source,`terrain cannot be used with a source of type ${String(H)}, it only be used with a "raster-dem" source type`)):P.push(new n.V(c,o.source,`source "${o.source}" not found`))}else P.push(new n.V(c,o,'terrain is missing required property "source"'));return P}function mn(g){const o=g.value,c=g.style,A=g.styleSpec,R=A.fog;let C=[];const P=n.K(o);if(o===void 0)return C;if(P!=="object")return C=C.concat([new n.V("fog",o,`object expected, ${P} found`)]),C;for(const L in o){const j=L.match(/^(.*)-transition$/),H=L.match(/^(.*)-use-theme$/);C=C.concat(H&&R[H[1]]?Er({key:L,value:o[L],valueSpec:{type:"string"},style:c,styleSpec:A}):j&&R[j[1]]&&R[j[1]].transition?Er({key:L,value:o[L],valueSpec:A.transition,style:c,styleSpec:A}):R[L]?Er({key:L,value:o[L],valueSpec:R[L],style:c,styleSpec:A}):[new n.J(L,o[L],`unknown property "${L}"`)])}return C}const en={"*":()=>[],array:yr,boolean:function(g){const o=g.value,c=g.key,A=n.K(o);return A!=="boolean"?[new n.V(c,o,`boolean expected, ${A} found`)]:[]},number:za,color:function(g){const o=g.key,c=g.value,A=n.K(c);return A!=="string"?[new n.V(o,c,`color expected, ${A} found`)]:n.a0.parseCSSColor(c)===null?[new n.V(o,c,`color expected, "${c}" found`)]:[]},enum:ur,filter:Pr,function:Va,layer:Rn,object:Rt,source:ca,model:n.a4,light:gr,"light-3d":Zn,terrain:Mn,fog:mn,string:va,formatted:function(g){return va(g).length===0?[]:er(g)},resolvedImage:function(g){return va(g).length===0?[]:er(g)},projection:function(g){const o=g.value,c=g.styleSpec,A=c.projection,R=g.style;let C=[];const P=n.K(o);if(P==="object")for(const L in o)C=C.concat(Er({key:L,value:o[L],valueSpec:A[L],style:R,styleSpec:c}));else P!=="string"&&(C=C.concat([new n.V("projection",o,`object or string expected, ${P} found`)]));return C},import:function(g){const{value:o,styleSpec:c}=g,{data:A,...R}=o;Object.defineProperty(R,"__line__",{value:o.__line__,enumerable:!1});let C=Rt(n.L({},g,{value:R,valueSpec:c.import}));return n.M(R.id)===""&&C.push(new n.V(`${g.key}.id`,R,"import id can't be an empty string")),A&&(C=C.concat(Bi(A,c,{key:`${g.key}.data`}))),C},iconset:function(g){const o=g.value,c=g.key,A=g.styleSpec,R=g.style;if(!o.type)return[new n.V(c,o,'"type" is required')];const C=n.M(o.type);let P=[];if(P=P.concat(Rt({key:c,value:o,valueSpec:A[`iconset_${C}`],style:R,styleSpec:A})),C==="source"&&o.source){const L=R.sources&&R.sources[o.source],j=L&&n.M(L.type);L?j!=="raster-array"&&P.push(new n.V(c,o.source,`iconset cannot be used with a source of type ${String(j)}, it only be used with a "raster-array" source type`)):P.push(new n.V(c,o.source,`source "${o.source}" not found`))}return P}};function Er(g,o=!1){const c=g.value,A=g.valueSpec,R=g.styleSpec;if(A.expression&&n.a2(n.M(c)))return Va(g);if(A.expression&&n.S(n.U(c)))return er(g);if(A.type&&en[A.type]){const C=en[A.type](g);return o===!0&&C.length>0&&n.K(g.value)==="array"?er(g):C}return Rt(n.L({},g,{valueSpec:A.type?R[A.type]:A}))}function As(g){const o=g.value,c=g.key,A=va(g);return A.length||(o.indexOf("{fontstack}")===-1&&A.push(new n.V(c,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&A.push(new n.V(c,o,'"glyphs" url must include a "{range}" token'))),A}function Bi(g,o=n.a5,c={}){return Er({key:c.key||"",value:g,valueSpec:o.$root,styleSpec:o,style:g,objectElementValidators:{glyphs:As,"*":()=>[]}})}function Qi(g,o=n.a5){return bt(Bi(g,o))}const Oo=g=>bt(ca(g)),Ni=g=>bt(gr(g)),fn=g=>bt(Zn(g)),ui=g=>bt(Mn(g)),Ec=g=>bt(mn(g)),Us=g=>bt(function(o){const c=o.value,A=o.style,R=o.styleSpec,C=R.snow;let P=[];const L=n.K(c);if(c===void 0)return P;if(L!=="object")return P=P.concat([new n.V("snow",c,`object expected, ${L} found`)]),P;for(const j in c){const H=j.match(/^(.*)-transition$/);P=P.concat(H&&C[H[1]]&&C[H[1]].transition?Er({key:j,value:c[j],valueSpec:R.transition,style:A,styleSpec:R}):C[j]?Er({key:j,value:c[j],valueSpec:C[j],style:A,styleSpec:R}):[new n.J(j,c[j],`unknown property "${j}"`)])}return P}(g)),Xt=g=>bt(function(o){const c=o.value,A=o.style,R=o.styleSpec,C=R.rain;let P=[];const L=n.K(c);if(c===void 0)return P;if(L!=="object")return P=P.concat([new n.V("rain",c,`object expected, ${L} found`)]),P;for(const j in c){const H=j.match(/^(.*)-transition$/);P=P.concat(H&&C[H[1]]&&C[H[1]].transition?Er({key:j,value:c[j],valueSpec:R.transition,style:A,styleSpec:R}):C[j]?Er({key:j,value:c[j],valueSpec:C[j],style:A,styleSpec:R}):[new n.J(j,c[j],`unknown property "${j}"`)])}return P}(g)),xe=g=>bt(Rn(g)),Oe=g=>bt(Pr(g)),rt=g=>bt(pn(g)),_t=g=>bt(Dn(g)),yt=g=>bt(n.a4(g));function bt(g){return g.slice().sort((o,c)=>o.line&&c.line?o.line-c.line:0)}function kt(g,o){let c=!1;if(o&&o.length)for(const A of o)A instanceof n.J?n.w(A.message):(g.fire(new n.z(new Error(A.message))),c=!0);return c}let Et;class Ht extends n.E{constructor(o,c="flat"){super(),this._transitionable=new n.a6(Et||(Et=new n.a7({anchor:new n.a8(n.a5.light.anchor),position:new n.a9(n.a5.light.position),color:new n.a8(n.a5.light.color),intensity:new n.a8(n.a5.light.intensity)}))),this.setLight(o,c),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,c,A={}){this._validate(Ni,o,A)||(this._transitionable.setTransitionOrValue(o),this.id=c)}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,c,A){return(!A||A.validate!==!1)&&kt(this,o.call(Qi,n.l({value:c,style:{glyphs:!0,sprite:!0},styleSpec:n.a5})))}}let $t=class extends n.E{constructor(g,o,c,A){super(),this.scope=c,this._transitionable=new n.a6(new n.a7({source:new n.a8(n.a5.terrain.source),exaggeration:new n.a8(n.a5.terrain.exaggeration)}),c,A),this._transitionable.setTransitionOrValue(g,A),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=o}get(){return this._transitionable.serialize()}set(g,o){this._transitionable.setTransitionOrValue(g,o)}updateTransitions(g){this._transitioning=this._transitionable.transitioned(g,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(g){this.properties=this._transitioning.possiblyEvaluate(g)}getExaggeration(g){return this._transitioning.possiblyEvaluate(new n.aa(g)).get("exaggeration")}getAttenuationRange(){if(!this.isZoomDependent())return null;const g=this._transitionable._values.exaggeration;if(!g)return null;const o=g.value.expression;if(!o)return null;let c=-1,A=-1,R=1;for(const C of o.zoomStops)R=o.evaluate(new n.aa(C)),R>.01?(c=C,A=-1):A=C;return R<.01&&c>0&&A>c?[c,A]:null}isZoomDependent(){const g=this._transitionable._values.exaggeration;return g!=null&&g.value!=null&&g.value.expression!=null&&g.value.expression instanceof n.ab}};const qt=45,Ra=65,Ma=.05;function Ba(g,o,c,A){const R=n.ae(qt,Ra,c),[C,P]=_r(g,A);let L=1-Math.min(1,Math.exp((o-C)/(P-C)*-6));return L*=L*L,L=Math.min(1,1.00747*L),L*R*g.alpha}function _r(g,o){const c=.5/Math.tan(.5*o);return[g.range[0]+c,g.range[1]+c]}function Nr(g,o,c,A,R){const C=n.ad.vec3.transformMat4([],[o,c,A],R.mercatorFogMatrix);return Ba(g,n.ad.vec3.length(C),R.pitch,R._fov)}function Vr(g,o,c,A,R,C,P){const L=[[c,A,0],[R,A,0],[R,C,0],[c,C,0]];let j=Number.MAX_VALUE,H=-Number.MAX_VALUE;for(const W of L){const te=n.ad.vec3.transformMat4([],W,o),ae=n.ad.vec3.length(te);j=Math.min(j,ae),H=Math.max(H,ae)}return[Ba(g,j,P.pitch,P._fov),Ba(g,H,P.pitch,P._fov)]}class Gr extends n.E{constructor(o,c,A,R){super();const C=new n.a7({range:new n.a8(n.a5.fog.range),color:new n.a8(n.a5.fog.color),"color-use-theme":new n.a8({type:"string","property-type":"data-constant",default:"default"}),"high-color":new n.a8(n.a5.fog["high-color"]),"high-color-use-theme":new n.a8({type:"string","property-type":"data-constant",default:"default"}),"space-color":new n.a8(n.a5.fog["space-color"]),"space-color-use-theme":new n.a8({type:"string","property-type":"data-constant",default:"default"}),"horizon-blend":new n.a8(n.a5.fog["horizon-blend"]),"star-intensity":new n.a8(n.a5.fog["star-intensity"]),"vertical-range":new n.a8(n.a5.fog["vertical-range"])});this._transitionable=new n.a6(C,A,new Map(R)),this.set(o,R),this._transitioning=this._transitionable.untransitioned(),this._transform=c,this.properties=new n.af(C),this.scope=A}get state(){const o=this._transform,c=o.projection.name==="globe",A=n.ag(o.zoom),R=this.properties.get("range"),C=[.5,3];return{range:c?[n.ah(C[0],R[0],A),n.ah(C[1],R[1],A)]:R,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(o,c,A={}){if(this._validate(Ec,o,A))return;const R=n.l({},o);for(const C of Object.keys(n.a5.fog))R[C]===void 0&&(R[C]=n.a5.fog[C].default);this._options=R,this._transitionable.setTransitionOrValue(this._options,c)}getOpacity(o){if(!this._transform.projection.supportsFog)return 0;const c=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:n.ae(qt,Ra,o))*c.a}getOpacityAtLatLng(o,c){return this._transform.projection.supportsFog?function(A,R,C){const P=n.ac.fromLngLat(R),L=C.elevation?C.elevation.getAtPointOrZero(P):0;return Nr(A,P.x,P.y,L,C)}(this.state,o,c):0}getOpacityForTile(o){if(!this._transform.projection.supportsFog)return[1,1];const c=this._transform.calculateFogTileMatrix(o.toUnwrapped());return Vr(this.state,c,0,0,n.ai,n.ai,this._transform)}getOpacityForBounds(o,c,A,R,C){return this._transform.projection.supportsFog?Vr(this.state,o,c,A,R,C,this._transform):[1,1]}getFovAdjustedRange(o){return this._transform.projection.supportsFog?_r(this.state,o):[0,1]}isVisibleOnFrustum(o){if(!this._transform.projection.supportsFog)return!1;const c=[4,5,6,7];for(const A of c){const R=o.points[A];let C;if(R[2]>=0)C=R;else{const P=o.points[A-4];C=n.aj(P,R,P[2]/(P[2]-R[2]))}if(Nr(this.state,C[0],C[1],0,this._transform)>=Ma)return!0}return!1}updateConfig(o){this._transitionable.setTransitionOrValue(this._options,new Map(o))}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,c,A){return(!A||A.validate!==!1)&&kt(this,o.call(Qi,n.l({value:c,style:{glyphs:!0,sprite:!0},styleSpec:n.a5})))}}let zn,Jn,qr,yn,Hr=class extends n.E{constructor(g,o,c,A){super();const R=zn||(zn=new n.a7({density:new n.a8(n.a5.snow.density),intensity:new n.a8(n.a5.snow.intensity),color:new n.a8(n.a5.snow.color),opacity:new n.a8(n.a5.snow.opacity),vignette:new n.a8(n.a5.snow.vignette),"vignette-color":new n.a8(n.a5.snow["vignette-color"]),"center-thinning":new n.a8(n.a5.snow["center-thinning"]),direction:new n.a8(n.a5.snow.direction),"flake-size":new n.a8(n.a5.snow["flake-size"])}));this._transitionable=new n.a6(R,c,new Map(A)),this.set(g,A),this._transitioning=this._transitionable.untransitioned(),this.properties=new n.af(R),this.scope=c}get state(){const g=this.properties.get("opacity"),o=this.properties.get("color"),c=this.properties.get("direction"),A=n.ak(c[0]),R=-Math.max(n.ak(c[1]),.01),C=[Math.cos(A)*Math.cos(R),Math.sin(A)*Math.cos(R),Math.sin(R)],P=this.properties.get("vignette"),L=this.properties.get("vignette-color");return L.a=P,{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new n.al(o.r,o.g,o.b,o.a*g),direction:C,centerThinning:this.properties.get("center-thinning"),flakeSize:this.properties.get("flake-size"),vignetteColor:L}}get(){return this._transitionable.serialize()}set(g,o,c={}){if(this._validate(Us,g,c))return;const A=n.l({},g);for(const R of Object.keys(n.a5.snow))A[R]===void 0&&(A[R]=n.a5.snow[R].default);this._options=A,this._transitionable.setTransitionOrValue(this._options,o)}updateConfig(g){this._transitionable.setTransitionOrValue(this._options,new Map(g))}updateTransitions(g){this._transitioning=this._transitionable.transitioned(g,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(g){this.properties=this._transitioning.possiblyEvaluate(g)}_validate(g,o,c){return(!c||c.validate!==!1)&&kt(this,g.call(Qi,n.l({value:o,style:{glyphs:!0,sprite:!0},styleSpec:n.a5})))}},In=class extends n.E{constructor(g,o,c,A){super();const R=Jn||(Jn=new n.a7({density:new n.a8(n.a5.rain.density),intensity:new n.a8(n.a5.rain.intensity),color:new n.a8(n.a5.rain.color),opacity:new n.a8(n.a5.rain.opacity),vignette:new n.a8(n.a5.rain.vignette),"vignette-color":new n.a8(n.a5.rain["vignette-color"]),"center-thinning":new n.a8(n.a5.rain["center-thinning"]),direction:new n.a8(n.a5.rain.direction),"droplet-size":new n.a8(n.a5.rain["droplet-size"]),"distortion-strength":new n.a8(n.a5.rain["distortion-strength"])}));this._transitionable=new n.a6(R,c,new Map(A)),this.set(g,A),this._transitioning=this._transitionable.untransitioned(),this.properties=new n.af(R),this.scope=c}get state(){const g=this.properties.get("opacity"),o=this.properties.get("color"),c=this.properties.get("direction"),A=n.ak(c[0]),R=-Math.max(n.ak(c[1]),.01),C=[Math.cos(A)*Math.cos(R),Math.sin(A)*Math.cos(R),Math.sin(R)],P=this.properties.get("vignette-color");return P.a=this.properties.get("vignette"),{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new n.al(o.r,o.g,o.b,o.a*g),direction:C,centerThinning:this.properties.get("center-thinning"),dropletSize:this.properties.get("droplet-size"),distortionStrength:this.properties.get("distortion-strength"),vignetteColor:P}}get(){return this._transitionable.serialize()}set(g,o,c={}){if(this._validate(Xt,g,c))return;const A=n.l({},g);for(const R of Object.keys(n.a5.rain))A[R]===void 0&&(A[R]=n.a5.rain[R].default);this._options=A,this._transitionable.setTransitionOrValue(this._options,o)}updateConfig(g){this._transitionable.setTransitionOrValue(this._options,new Map(g))}updateTransitions(g){this._transitioning=this._transitionable.transitioned(g,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(g){this.properties=this._transitioning.possiblyEvaluate(g)}_validate(g,o,c){return(!c||c.validate!==!1)&&kt(this,g.call(Qi,n.l({value:o,style:{glyphs:!0,sprite:!0},styleSpec:n.a5})))}};class Vi extends n.E{constructor(o,c,A,R){super(),this.scope=A,this._options=o,this.properties=new n.af(c),this._transitionable=new n.a6(c,A,new Map(R)),this._transitionable.setTransitionOrValue(o.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(o){this._transitionable.setTransitionOrValue(this._options.properties,new Map(o))}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(o,c){this._options=o,this._transitionable.setTransitionOrValue(o.properties,c)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}class Gi{constructor(o,c,A,R){this.screenBounds=o,this.cameraPoint=c,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=A,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,R)}static createFromScreenPoints(o,c){let A,R;if(o instanceof n.P||typeof o[0]=="number"){const C=n.P.convert(o);A=[C],R=c.isPointAboveHorizon(C)}else{const C=n.P.convert(o[0]),P=n.P.convert(o[1]);A=[C,P],R=n.an(C,P).every(L=>c.isPointAboveHorizon(L))}return new Gi(A,c.getCameraPoint(),R,c)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(o){return n.an(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],o)}bufferedCameraGeometry(o){const c=this.screenBounds[0],A=this.screenBounds.length===1?this.screenBounds[0].add(new n.P(1,1)):this.screenBounds[1],R=n.an(c,A,0,!1);return this.cameraPoint.y>A.y&&(this.cameraPoint.x>c.x&&this.cameraPoint.x<A.x?R.splice(3,0,this.cameraPoint):this.cameraPoint.x>=A.x?R[2]=this.cameraPoint:this.cameraPoint.x<=c.x&&(R[3]=this.cameraPoint)),n.ao(R,o)}bufferedCameraGeometryGlobe(o){const c=this.screenBounds[0],A=this.screenBounds.length===1?this.screenBounds[0].add(new n.P(1,1)):this.screenBounds[1],R=n.an(c,A,o),C=this.cameraPoint.clone();switch(3*((C.y>c.y)+(C.y>A.y))+((C.x>c.x)+(C.x>A.x))){case 0:R[0]=C,R[4]=C.clone();break;case 1:R.splice(1,0,C);break;case 2:R[1]=C;break;case 3:R.splice(4,0,C);break;case 5:R.splice(2,0,C);break;case 6:R[3]=C;break;case 7:R.splice(3,0,C);break;case 8:R[2]=C}return R}containsTile(o,c,A,R=0){const C=o.queryPadding/c._pixelsPerMercatorPixel+1,P=A?this._bufferedCameraMercator(C,c):this._bufferedScreenMercator(C,c);let L=o.tileID.wrap+(P.unwrapped?R:0);const j=P.polygon.map(Ee=>n.ap(o.tileTransform,Ee,L));if(!n.aq(j,0,0,n.ai,n.ai))return;L=o.tileID.wrap+(this.screenGeometryMercator.unwrapped?R:0);const H=this.screenGeometryMercator.polygon.map(Ee=>n.ar(o.tileTransform,Ee,L)),W=H.map(Ee=>new n.P(Ee[0],Ee[1])),te=c.getFreeCameraOptions().position||new n.ac(0,0,0),ae=n.ar(o.tileTransform,te,L),ce=H.map(Ee=>{const Ve=n.ad.vec3.sub(Ee,Ee,ae);return n.ad.vec3.normalize(Ve,Ve),new n.as(ae,Ve)}),Te=n.at(o,1,c.zoom)*c._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:W,tilespaceRays:ce,bufferedTilespaceGeometry:j,bufferedTilespaceBounds:(ve=n.au(j),ve.min.x=n.ay(ve.min.x,0,n.ai),ve.min.y=n.ay(ve.min.y,0,n.ai),ve.max.x=n.ay(ve.max.x,0,n.ai),ve.max.y=n.ay(ve.max.y,0,n.ai),ve),tile:o,tileID:o.tileID,pixelToTileUnitsFactor:Te};var ve}_bufferedScreenMercator(o,c){const A=Do(o);if(this._screenRaycastCache[A])return this._screenRaycastCache[A];{let R;return R=c.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(o),c):{polygon:this.bufferedScreenGeometry(o).map(C=>c.pointCoordinate3D(C)),unwrapped:!0},this._screenRaycastCache[A]=R,R}}_bufferedCameraMercator(o,c){const A=Do(o);if(this._cameraRaycastCache[A])return this._cameraRaycastCache[A];{let R;return R=c.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(o),c):{polygon:this.bufferedCameraGeometry(o).map(C=>c.pointCoordinate3D(C)),unwrapped:!0},this._cameraRaycastCache[A]=R,R}}_projectAndResample(o,c){const A=function(C,P){const L=n.ad.mat4.multiply([],P.pixelMatrix,P.globeMatrix),j=[0,-n.az,0,1],H=[0,n.az,0,1],W=[0,0,0,1];n.ad.vec4.transformMat4(j,j,L),n.ad.vec4.transformMat4(H,H,L),n.ad.vec4.transformMat4(W,W,L);const te=new n.P(j[0]/j[3],j[1]/j[3]),ae=new n.P(H[0]/H[3],H[1]/H[3]),ce=n.aw(C,te)&&j[3]<W[3],Te=n.aw(C,ae)&&H[3]<W[3];if(!ce&&!Te)return null;const ve=function(ot,lt,gt){for(let Tt=1;Tt<ot.length;Tt++){const Yt=vs(lt.pointCoordinate3D(ot[Tt-1]).x),Lt=vs(lt.pointCoordinate3D(ot[Tt]).x);if(gt<0){if(Yt<Lt)return{idx:Tt,t:-Yt/(Lt-1-Yt)}}else if(Lt<Yt)return{idx:Tt,t:(1-Yt)/(Lt+1-Yt)}}return null}(C,P,ce?-1:1);if(!ve)return null;const{idx:Ee,t:Ve}=ve;let Be=Ee>1?_s(C.slice(0,Ee),P):[],et=Ee<C.length?_s(C.slice(Ee),P):[];Be=Be.map(ot=>new n.P(vs(ot.x),ot.y)),et=et.map(ot=>new n.P(vs(ot.x),ot.y));const Xe=[...Be];Xe.length===0&&Xe.push(et[et.length-1]);const ht=n.ah(Xe[Xe.length-1].y,(et.length===0?Be[0]:et[0]).y,Ve);let st;return st=ce?[new n.P(0,ht),new n.P(0,0),new n.P(1,0),new n.P(1,ht)]:[new n.P(1,ht),new n.P(1,1),new n.P(0,1),new n.P(0,ht)],Xe.push(...st),et.length===0?Xe.push(Be[0]):Xe.push(...et),{polygon:Xe.map(ot=>new n.ac(ot.x,ot.y)),unwrapped:!1}}(o,c);if(A)return A;const R=function(C,P){let L=!1,j=-1/0,H=0;for(let te=0;te<C.length-1;te++)C[te].x>j&&(j=C[te].x,H=te);for(let te=0;te<C.length-1;te++){const ae=(H+te)%(C.length-1),ce=C[ae],Te=C[ae+1];Math.abs(ce.x-Te.x)>.5&&(ce.x<Te.x?(ce.x+=1,ae===0&&(C[C.length-1].x+=1)):(Te.x+=1,ae+1===C.length-1&&(C[0].x+=1)),L=!0)}const W=n.av(P.center.lng);return L&&W<Math.abs(W-1)&&C.forEach(te=>{te.x-=1}),{polygon:C,unwrapped:L}}(_s(o,c).map(C=>new n.P(vs(C.x),C.y)),c);return{polygon:R.polygon.map(C=>new n.ac(C.x,C.y)),unwrapped:R.unwrapped}}}function _s(g,o){return n.ax(g,c=>{const A=o.pointCoordinate3D(c);c.x=A.x,c.y=A.y},1/256)}function vs(g){return g<0?1+g%1:g%1}function Do(g){return 100*g|0}function ws(g,o,c,A,R){const C=function(L,j){if(L)return R(L);if(j){if(g.url&&j.tiles&&g.tiles&&delete g.tiles,j.variants){if(!Array.isArray(j.variants))return R(new Error("variants must be an array"));for(const W of j.variants){if(W==null||typeof W!="object"||W.constructor!==Object)return R(new Error("variant must be an object"));if(!Array.isArray(W.capabilities))return R(new Error("capabilities must be an array"));if(W.capabilities.length===1&&W.capabilities[0]==="meshopt"){j=n.l(j,W);break}}}const H=n.aA(n.l({},j,g),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding","vector_layers","raster_layers","worldview_options","worldview_default","worldview"]);H.tiles=o.canonicalizeTileset(H,g.url),R(null,H)}},P=function(L,j,H){if(!L)return null;if(!j&&!H)return L;H=H||L.worldview_default;const W=Object.values(L.language||{});if(W.length===0)return null;const te=Object.values(L.worldview||{});if(te.length===0)return null;const ae=W.every(Te=>Te===j),ce=te.every(Te=>Te===H);return ae&&ce?L:j in(L.language_options||{})||H in(L.worldview_options||{})?null:L.language_options&&L.worldview_options?L:null}(g.data,c,A);return P?n.q.frame(()=>C(null,P)):g.url?n.n(o.transformRequest(o.normalizeSourceURL(g.url,null,c,A),n.R.Source),C):n.q.frame(()=>{const{data:L,...j}=g;C(null,j)})}class ks{constructor(o,c,A){this.bounds=n.aB.convert(this.validateBounds(o)),this.minzoom=c||0,this.maxzoom=A||24}validateBounds(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}contains(o){const c=Math.pow(2,o.z),A=Math.floor(n.av(this.bounds.getWest())*c),R=Math.floor(n.aC(this.bounds.getNorth())*c),C=Math.ceil(n.av(this.bounds.getEast())*c),P=Math.ceil(n.aC(this.bounds.getSouth())*c);return o.x>=A&&o.x<C&&o.y>=R&&o.y<P}}class nc extends n.E{constructor(o,c,A,R){if(super(),this.id=o,this.dispatcher=A,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,n.l(this,n.aA(c,["url","scheme","tileSize","promoteId"])),this._options=n.l({type:"vector"},c),this._collectResourceTiming=!!c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(R),this._tileWorkers={},this._deduped=new n.aD}load(o){this._loaded=!1,this.fire(new n.A("dataloading",{dataType:"source"}));const c=Array.isArray(this.map._language)?this.map._language.join():this.map._language,A=this.map.getWorldview();this._tileJSONRequest=ws(this._options,this.map._requestManager,c,A,(R,C)=>{if(this._tileJSONRequest=null,this._loaded=!0,R)c&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${c}`),A&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${A}`),this.fire(new n.z(R));else if(C){if(n.l(this,C),this.hasWorldviews=!!C.worldview_options,C.worldview_default&&(this.worldviewDefault=C.worldview_default),C.vector_layers){this.vectorLayers=C.vector_layers,this.vectorLayerIds=[],this.localizableLayerIds=new Set;for(const P of C.vector_layers)this.vectorLayerIds.push(P.id),C.worldview&&C.worldview[P.source]&&this.localizableLayerIds.add(P.id)}C.bounds&&(this.tileBounds=new ks(C.bounds,this.minzoom,this.maxzoom)),Ce(C.tiles,this.map._requestManager._customAccessToken),this.fire(new n.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.A("data",{dataType:"source",sourceDataType:"content"}))}o&&o(R)})}loaded(){return this._loaded}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}onAdd(o){this.map=o,this.load()}reload(){this.cancelTileJSONRequest();const o=n.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(o))}setTiles(o){return this._options.tiles=o,this.reload(),this}setUrl(o){return this.url=o,this._options.url=o,this.reload(),this}onRemove(o){this.cancelTileJSONRequest()}serialize(){return n.l({},this._options)}loadTile(o,c){const A=o.tileID.canonical.url(this.tiles,this.scheme),R=this.map._requestManager.normalizeTileURL(A),C=this.map._requestManager.transformRequest(R,n.R.Tile),P=this.map.style?this.map.style.getLut(this.scope):null,L=P?{image:P.image.clone()}:null,j={request:C,data:void 0,uid:o.uid,tileID:o.tileID,tileZoom:o.tileZoom,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,lut:L,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:n.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:o.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:o.isExtraShadowCaster,tessellationStep:this.map._tessellationStep,scaleFactor:this.map.getScaleFactor()};if(this.hasWorldviews&&n.f(A)&&(j.worldview=this.map.getWorldview()||this.worldviewDefault,j.localizableLayerIds=this.localizableLayerIds),j.request.collectResourceTiming=this._collectResourceTiming,o.actor&&o.state!=="expired")o.state==="loading"?o.reloadCallback=c:o.request=o.actor.send("reloadTile",j,H.bind(this));else if(o.actor=this._tileWorkers[R]=this._tileWorkers[R]||this.dispatcher.getActor(),this.dispatcher.ready)o.request=o.actor.send("loadTile",j,H.bind(this),void 0,!0);else{const W=n.aE.call({deduped:this._deduped},j,(te,ae)=>{te||!ae?H.call(this,te):(j.data={cacheControl:ae.cacheControl,expires:ae.expires,rawData:ae.rawData.slice(0)},o.actor&&o.actor.send("loadTile",j,H.bind(this),void 0,!0))},!0);o.request={cancel:W}}function H(W,te){return delete o.request,o.aborted?c(null):W&&W.status!==404?c(W):(te&&te.resourceTiming&&(o.resourceTiming=te.resourceTiming),this.map._refreshExpiredTiles&&te&&o.setExpiryData(te),o.loadVectorData(te,this.map.painter),n.aF(this.dispatcher),c(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(o,c){o.actor&&o.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id,scope:this.scope}),o.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Yo extends n.E{constructor(o,c,A,R){super(),this.id=o,this.dispatcher=A,this.setEventedParent(R),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=n.l({type:"raster"},c),n.l(this,n.aA(c,["url","scheme","tileSize"]))}load(o){this._loaded=!1,this.fire(new n.A("dataloading",{dataType:"source"})),this._tileJSONRequest=ws(this._options,this.map._requestManager,null,null,(c,A)=>{this._tileJSONRequest=null,this._loaded=!0,c?this.fire(new n.z(c)):A&&(n.l(this,A),A.raster_layers&&(this.rasterLayers=A.raster_layers,this.rasterLayerIds=this.rasterLayers.map(R=>R.id)),A.bounds&&(this.tileBounds=new ks(A.bounds,this.minzoom,this.maxzoom)),Ce(A.tiles),this.fire(new n.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.A("data",{dataType:"source",sourceDataType:"content"}))),o&&o(c)})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}reload(){this.cancelTileJSONRequest();const o=n.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(o))}setTiles(o){return this._options.tiles=o,this.reload(),this}setUrl(o){return this.url=o,this._options.url=o,this.reload(),this}onRemove(o){this.cancelTileJSONRequest()}serialize(){return n.l({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o,c){const A=n.q.devicePixelRatio>=2,R=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),A,this.tileSize);o.request=n.o(this.map._requestManager.transformRequest(R,n.R.Tile),(C,P,L,j)=>(delete o.request,o.aborted?(o.state="unloaded",c(null)):C?(o.state="errored",c(C)):P?(this.map._refreshExpiredTiles&&o.setExpiryData({cacheControl:L,expires:j}),o.setTexture(P,this.map.painter),o.state="loaded",n.aF(this.dispatcher),void c(null)):c(null)))}abortTile(o,c){o.request&&(o.request.cancel(),delete o.request),c&&c()}unloadTile(o,c){o.texture&&o.texture instanceof n.T?(o.destroy(!0),o.texture&&o.texture instanceof n.T&&this.map.painter.saveTileTexture(o.texture)):o.destroy(),c&&c()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class zi extends Yo{constructor(o,c,A,R){super(o,c,A,R),this.type="raster-array",this.maxzoom=22,this.partial=!0,this.iconsets={},this._options=n.l({type:"raster-array"},c)}triggerRepaint(o){const c=this.map.painter._terrain,A=this.map.style.getSourceCache(this.id);c&&c.enabled&&A&&c._clearRenderCacheForTile(A.id,o.tileID),this.map.triggerRepaint()}loadTile(o,c){const A=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),R=this.map._requestManager.transformRequest(A,n.R.Tile),C={request:R,uid:o.uid,tileID:o.tileID,type:this.type,source:this.id,scope:this.scope,partial:this.partial};o.source=this.id,o.scope=this.scope,o.requestParams=R,o.actor||(o.actor=this.dispatcher.getActor());const P=(L,j,H,W)=>{if(delete o.request,o.aborted)return o.state="unloaded",c(null);if(L)return L.name==="AbortError"?void 0:(o.state="errored",c(L));if(this.map._refreshExpiredTiles&&j&&o.setExpiryData({cacheControl:H,expires:W}),this.partial)o.state="empty";else{if(!j)return c(null);o.state="loaded",o._isHeaderLoaded=!0,o._mrt=j;const te=new Map;for(const ae in o._mrt.layers){const ce=o.getLayer(ae);if(ce)for(const Te of ce.getBandList()){const{bytes:ve,tileSize:Ee,buffer:Ve}=ce.getBandView(Te),Be=Ee+2*Ve,et={data:new n.r({width:Be,height:Be},ve),pixelRatio:2,sdf:!1,usvg:!1,version:0};te.set(`${ae}/${Te}`,et)}}for(const ae in this.iconsets)this.iconsets[ae].addIcons(te)}c(null)};o.request=this.partial?o.fetchHeader(void 0,P.bind(this)):o.actor.send("loadTile",C,P.bind(this),void 0,!0)}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(o,c){const A=o.texture;A&&A instanceof n.T?(o.destroy(!0),this.map.painter.saveTileTexture(A)):(o.destroy(),o.flushQueues(),o._isHeaderLoaded=!1,delete o._mrt,delete o.textureDescriptor),o.fbo&&(o.fbo.destroy(),delete o.fbo),delete o.request,delete o.requestParams,delete o.neighboringTiles,o.state="unloaded"}prepareTile(o,c,A){o._isHeaderLoaded&&(o.state!=="empty"&&(o.state="reloading"),o.fetchBand(c,A,(R,C)=>{if(R)return o.state="errored",this.fire(new n.z(R)),void this.triggerRepaint(o);C&&(o._isHeaderLoaded=!0,o.setTexture(C,this.map.painter),o.state="loaded",this.triggerRepaint(o))}))}getInitialBand(o){if(!this.rasterLayers)return 0;const c=this.rasterLayers.find(({id:C})=>C===o),A=c&&c.fields,R=A&&A.bands&&A.bands;return R?R[0]:0}getTextureDescriptor(o,c,A){if(!o)return;const R=c.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!R)return;let C=null;c instanceof n.aI?C=c.paint.get("raster-array-band"):c instanceof n.aJ&&(C=c.paint.get("raster-particle-array-band"));const P=C||this.getInitialBand(R);if(P!=null)if(o.textureDescriptor){if(!o.updateNeeded(R,P)||A)return Object.assign({},o.textureDescriptor,{texture:o.texture})}else this.prepareTile(o,R,P)}addIconset(o,c){this.iconsets[o]=c,this.partial=!1}}const Gl={vector:nc,raster:Yo,"raster-dem":class extends Yo{constructor(g,o,c,A){super(g,o,c,A),this.type="raster-dem",this.maxzoom=22,this._options=n.l({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox"}loadTile(g,o){const c=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function A(R,C){R&&(g.state="errored",o(R)),C&&(g.dem=C,g.dem.onDeserialize(),g.needsHillshadePrepare=!0,g.needsDEMTextureUpload=!0,g.state="loaded",o(null))}g.request=n.o(this.map._requestManager.transformRequest(c,n.R.Tile),(function(R,C,P,L){if(delete g.request,g.aborted)g.state="unloaded",o(null);else if(R)g.state="errored",o(R);else if(C){this.map._refreshExpiredTiles&&g.setExpiryData({cacheControl:P,expires:L});const j=ImageBitmap&&C instanceof ImageBitmap&&n.t(),H=1-(C.width-n.aG(C.width))/2;H<1||g.neighboringTiles||(g.neighboringTiles=this._getNeighboringTiles(g.tileID));const W=j?C:n.q.getImageData(C,H),te={uid:g.uid,tileID:g.tileID,source:this.id,type:this.type,scope:this.scope,rawImageData:W,encoding:this.encoding,padding:H};g.actor&&g.state!=="expired"||(g.actor=this.dispatcher.getActor(),g.actor.send("loadTile",te,A.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(g){const o=g.canonical,c=Math.pow(2,o.z),A=(o.x-1+c)%c,R=o.x===0?g.wrap-1:g.wrap,C=(o.x+1+c)%c,P=o.x+1===c?g.wrap+1:g.wrap,L={};return L[new n.aH(g.overscaledZ,R,o.z,A,o.y).key]={backfilled:!1},L[new n.aH(g.overscaledZ,P,o.z,C,o.y).key]={backfilled:!1},o.y>0&&(L[new n.aH(g.overscaledZ,R,o.z,A,o.y-1).key]={backfilled:!1},L[new n.aH(g.overscaledZ,g.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},L[new n.aH(g.overscaledZ,P,o.z,C,o.y-1).key]={backfilled:!1}),o.y+1<c&&(L[new n.aH(g.overscaledZ,R,o.z,A,o.y+1).key]={backfilled:!1},L[new n.aH(g.overscaledZ,g.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},L[new n.aH(g.overscaledZ,P,o.z,C,o.y+1).key]={backfilled:!1}),L}},"raster-array":zi,geojson:class extends n.E{constructor(g,o,c,A){super(),this.id=g,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=c.getActor(),this.setEventedParent(A),this._data=o.data,this._options=n.l({},o),this._collectResourceTiming=o.collectResourceTiming,o.maxzoom!==void 0&&(this.maxzoom=o.maxzoom),o.minzoom!==void 0&&(this.minzoom=o.minzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId;const R=n.ai/this.tileSize;this.workerOptions=n.l({source:this.id,scope:this.scope,cluster:o.cluster||!1,geojsonVtOptions:{buffer:(o.buffer!==void 0?o.buffer:128)*R,tolerance:(o.tolerance!==void 0?o.tolerance:.375)*R,extent:n.ai,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:o.clusterMaxZoom!==void 0?o.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,o.clusterMinPoints||2),extent:n.ai,radius:(o.clusterRadius!==void 0?o.clusterRadius:50)*R,log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter,dynamic:o.dynamic},o.workerOptions)}onAdd(g){this.map=g,this.setData(this._data)}setData(g){return this._data=g,this._updateWorkerData(),this}updateData(g){if(!this._options.dynamic)return this.fire(new n.z(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")));if(typeof g!="string"&&(g.type==="Feature"&&(g={type:"FeatureCollection",features:[g]}),g.type!=="FeatureCollection"))return this.fire(new n.z(new Error("Data to update should be a feature or a feature collection.")));if(this._coalesce&&typeof g!="string"&&typeof this._data!="string"&&this._data.type==="FeatureCollection"){const o=new Map;for(const c of this._data.features)o.set(c.id,c);for(const c of g.features)o.set(c.id,c);this._data.features=[...o.values()]}else this._data=g;return this._updateWorkerData(!0),this}getClusterExpansionZoom(g,o){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:g,source:this.id,scope:this.scope},o),this}getClusterChildren(g,o){return this.actor.send("geojson.getClusterChildren",{clusterId:g,source:this.id,scope:this.scope},o),this}getClusterLeaves(g,o,c,A){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:g,limit:o,offset:c},A),this}_updateWorkerData(g=!1){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new n.A("dataloading",{dataType:"source"})),this._loaded=!1;const o=n.l({append:g},this.workerOptions);o.scope=this.scope;const c=this._data;typeof c=="string"?(o.request=this.map._requestManager.transformRequest(n.q.resolveURL(c),n.R.Source),o.request.collectResourceTiming=this._collectResourceTiming):o.data=JSON.stringify(c),this._pendingLoad=this.actor.send(`${this.type}.loadData`,o,(A,R)=>{if(this._loaded=!0,this._pendingLoad=null,A)this.fire(new n.z(A));else{const C={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&R&&R.resourceTiming&&R.resourceTiming[this.id]&&(C.resourceTiming=R.resourceTiming[this.id]),g&&(this._partialReload=!0),this.fire(new n.A("data",C)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(g),this._coalesce=!1)})}loaded(){return this._loaded}reload(){const g=n.C(this.id,this.scope);this.map.style.clearSource(g),this._updateWorkerData()}loadTile(g,o){const c=g.actor?"reloadTile":"loadTile";g.actor=this.actor;const A=this.map.style?this.map.style.getLut(this.scope):null,R=A?{image:A.image.clone()}:null,C=this._partialReload,P={type:this.type,uid:g.uid,tileID:g.tileID,tileZoom:g.tileZoom,zoom:g.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:R,scope:this.scope,pixelRatio:n.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,scaleFactor:this.map.getScaleFactor(),partial:C};g.request=this.actor.send(c,P,(L,j)=>C&&!j?(g.state="loaded",o(null)):(delete g.request,g.destroy(),g.aborted?o(null):L?o(L):(g.loadVectorData(j,this.map.painter,c==="reloadTile"),o(null))),void 0,c==="loadTile")}abortTile(g){g.request&&(g.request.cancel(),delete g.request),g.aborted=!0}unloadTile(g,o){this.actor.send("removeTile",{uid:g.uid,type:this.type,source:this.id,scope:this.scope}),g.destroy()}onRemove(g){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return n.l({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends n.aK{constructor(g,o,c,A){super(g,o,c,A),this.roundZoom=!0,this.type="video",this.options=o}load(){this._loaded=!1;const g=this.options;this.urls=[];for(const o of g.urls)this.urls.push(this.map._requestManager.transformRequest(o,n.R.Source).url);n.aL(this.urls,(o,c)=>{this._loaded=!0,o?this.fire(new n.z(o)):c&&(this.video=c,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(g){if(this.video){const o=this.video.seekable;g<o.start(0)||g>o.end(0)?this.fire(new n.z(new n.V(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=g}}getVideo(){return this.video}onAdd(g){this.map||(this.map=g,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const g=this.map.painter.context,o=g.gl;this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new n.T(g,this.video,o.RGBA8),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(g)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:n.aK,model:class extends n.E{constructor(g,o,c,A){super(),this.id=g,this.type="model",this.models=[],this._loaded=!1,this._options=o}load(){const g=[];for(const o in this._options.models){const c=this._options.models[o],A=n.aN(this.map._requestManager.transformRequest(c.uri,n.R.Model).url).then(R=>{if(!R)return;const C=n.aO(R),P=new n.aP(o,c.position,c.orientation,C);P.computeBoundsAndApplyParent(),this.models.push(P)}).catch(R=>{this.fire(new n.z(new Error(`Could not load model ${o} from ${c.uri}: ${R.message}`)))});g.push(A)}return Promise.allSettled(g).then(()=>{this._loaded=!0,this.fire(new n.A("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(o=>{this.fire(new n.z(new Error(`Could not load models: ${o.message}`)))})}onAdd(g){this.map=g,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(g,o){}serialize(){return{type:"model"}}},"batched-model":class extends n.E{constructor(g,o,c,A){super(),this.type="batched-model",this.id=g,this.tileSize=512,this._options=o,this.tiles=this._options.tiles,this.maxzoom=o.maxzoom||19,this.minzoom=o.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=c,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(A)}onAdd(g){this.map=g,this.load()}reload(){this.cancelTileJSONRequest();const g=n.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(g))}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}load(g){this._loaded=!1,this.fire(new n.A("dataloading",{dataType:"source"}));const o=Array.isArray(this.map._language)?this.map._language.join():this.map._language,c=this.map.getWorldview();this._tileJSONRequest=ws(this._options,this.map._requestManager,o,c,(A,R)=>{this._tileJSONRequest=null,this._loaded=!0,A?(o&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${o}`),c&&c.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${c}`),this.fire(new n.z(A))):R&&(n.l(this,R),R.bounds&&(this.tileBounds=new ks(R.bounds,this.minzoom,this.maxzoom)),Ce(R.tiles,this.map._requestManager._customAccessToken),this.fire(new n.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.A("data",{dataType:"source",sourceDataType:"content"}))),g&&g(A)})}hasTransition(){return!1}hasTile(g){return!this.tileBounds||this.tileBounds.contains(g.canonical)}loaded(){return this._loaded}loadTile(g,o){const c=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme)),A={request:this.map._requestManager.transformRequest(c,n.R.Tile),data:void 0,uid:g.uid,tileID:g.tileID,tileZoom:g.tileZoom,zoom:g.tileID.overscaledZ,tileSize:this.tileSize*g.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:g.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,pixelRatio:n.q.devicePixelRatio,promoteId:this.promoteId};if(g.actor&&g.state!=="expired")if(g.state==="loading")g.reloadCallback=o;else{if(g.buckets){const C=Object.values(g.buckets);for(const P of C)P.dirty=!0;return void(g.state="loaded")}g.request=g.actor.send("reloadTile",A,R.bind(this))}else g.actor=this.dispatcher.getActor(),g.request=g.actor.send("loadTile",A,R.bind(this),void 0,!0);function R(C,P){return g.aborted?o(null):C&&C.status!==404?o(C):(this.map._refreshExpiredTiles&&P&&g.setExpiryData(P),g.loadModelData(P,this.map.painter),g.state="loaded",void o(null))}}serialize(){return n.l({},this._options)}},canvas:class extends n.aK{constructor(g,o,c,A){super(g,o,c,A),o.coordinates?Array.isArray(o.coordinates)&&o.coordinates.length===4&&!o.coordinates.some(R=>!Array.isArray(R)||R.length!==2||R.some(C=>typeof C!="number"))||this.fire(new n.z(new n.V(`sources.${g}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new n.z(new n.V(`sources.${g}`,null,'missing required property "coordinates"'))),o.animate&&typeof o.animate!="boolean"&&this.fire(new n.z(new n.V(`sources.${g}`,null,'optional "animate" property must be a boolean value'))),o.canvas?typeof o.canvas=="string"||o.canvas instanceof HTMLCanvasElement||this.fire(new n.z(new n.V(`sources.${g}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new n.z(new n.V(`sources.${g}`,null,'missing required property "canvas"'))),this.options=o,this.animate=o.animate===void 0||o.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new n.z(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(g){this.map=g,this.load(),this.canvas&&this.animate&&this.play()}onRemove(g){this.pause()}prepare(){let g=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,g=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,g=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const o=this.map.painter.context;this.texture?!g&&!this._playing||this.texture instanceof n.aM||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new n.T(o,this.canvas,o.gl.RGBA8,{premultiply:!0}),this._prepareData(o)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const g of[this.canvas.width,this.canvas.height])if(isNaN(g)||g<=0)return!0;return!1}},custom:class extends n.E{constructor(g,o,c,A){super(),this.id=g,this.type="custom",this._dataType="raster",this._dispatcher=c,this._implementation=o,this.setEventedParent(A),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new n.z(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new n.z(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new ks(this._implementation.bounds,this.minzoom,this.maxzoom)),o.update=this._update.bind(this),o.clearTiles=this._clearTiles.bind(this),o.coveringTiles=this._coveringTiles.bind(this),n.l(this,n.aA(o,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return n.aA(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new n.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.A("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(g){this.map=g,this._loaded=!1,this.fire(new n.A("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(g),this.load()}onRemove(g){this._implementation.onRemove&&this._implementation.onRemove(g)}hasTile(g){if(this._implementation.hasTile){const{x:o,y:c,z:A}=g.canonical;return this._implementation.hasTile({x:o,y:c,z:A})}return!this.tileBounds||this.tileBounds.contains(g.canonical)}loadTile(g,o){const{x:c,y:A,z:R}=g.tileID.canonical,C=new AbortController;g.request=Promise.resolve(this._implementation.loadTile({x:c,y:A,z:R},{signal:C.signal})).then((function(P){return delete g.request,g.aborted?(g.state="unloaded",o(null)):P===void 0?(g.state="errored",o(null)):P===null?(this.loadTileData(g,{width:this.tileSize,height:this.tileSize,data:null}),g.state="loaded",o(null)):function(L){return L instanceof ImageData||L instanceof HTMLCanvasElement||L instanceof ImageBitmap||L instanceof HTMLImageElement}(P)?(this.loadTileData(g,P),g.state="loaded",void o(null)):(g.state="errored",o(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(P=>{P.name!=="AbortError"&&(g.state="errored",o(P))}),g.request.cancel=()=>C.abort()}loadTileData(g,o){g.setTexture(o,this.map.painter)}unloadTile(g,o){if(g.texture&&g.texture instanceof n.T?(g.destroy(!0),g.texture&&g.texture instanceof n.T&&this.map.painter.saveTileTexture(g.texture)):g.destroy(),this._implementation.unloadTile){const{x:c,y:A,z:R}=g.tileID.canonical;this._implementation.unloadTile({x:c,y:A,z:R})}o&&o()}abortTile(g,o){g.request&&g.request.cancel&&(g.request.cancel(),delete g.request),o&&o()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(g=>({x:g.canonical.x,y:g.canonical.y,z:g.canonical.z}))}_clearTiles(){const g=n.C(this.id,this.scope);this.map.style.clearSource(g)}_update(){this.fire(new n.A("data",{dataType:"source",sourceDataType:"content"}))}}},Mo=function(g,o,c,A){const R=new Gl[o.type](g,o,c,A);if(R.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${R.id}`);return n.aQ(["load","abort","unload","serialize","prepare"],R),R};function _d(g,o,c=""){return`${c}:${o.id||""}:${o.layer.id}:${function(A){if("layerId"in A)return`layer:${A.layerId}`;{const{featuresetId:R,importId:C}=A;return`featureset:${R}${C?`:import:${C}`:""}`}}(g.target)}`}function Nc(g,o,c,A=""){if(g.uniqueFeatureID){const R=_d(g,o,A);if(c.has(R))return!0;c.add(R)}return!1}function ah(g,o,c,A,R=!1){const C=o.sourceCache.transform,P=o.sourceCache.tilesIn(g,o.has3DLayers,R);P.sort(hl);const L=[];for(const j of P){const H=j.tile.queryRenderedFeatures(o,j,c,A,C,R);Object.keys(H).length&&L.push({wrappedTileID:j.tile.tileID.wrapped().key,queryResults:H})}return L.length===0?{}:function(j){const H={},W={};for(const te of j){const ae=te.queryResults,ce=te.wrappedTileID,Te=W[ce]=W[ce]||{};for(const ve in ae){const Ee=ae[ve],Ve=Te[ve]=Te[ve]||{},Be=H[ve]=H[ve]||[];for(const et of Ee)Ve[et.featureIndex]||(Ve[et.featureIndex]=!0,Be.push(et))}}return H}(L)}function du(g,o,c,A,R){const C={},P=A.queryRenderedSymbols(g),L=[];for(const j of Object.keys(P).map(Number))L.push(R[j]);L.sort(hl);for(const j of L){const H=j.featureIndex.lookupSymbolFeatures(P[j.bucketInstanceId],j.bucketIndex,j.sourceLayerIndex,o,c);for(const W in H){const te=C[W]=C[W]||[],ae=H[W];ae.sort((ce,Te)=>{const ve=j.featureSortOrder;if(ve){const Ee=ve.indexOf(ce.featureIndex);return ve.indexOf(Te.featureIndex)-Ee}return Te.featureIndex-ce.featureIndex});for(const ce of ae)te.push(ce)}}return C}function Vc(g,o){const c=g.getRenderableIds().map(C=>g.getTileByID(C)),A=[],R={};for(let C=0;C<c.length;C++){const P=c[C],L=P.tileID.canonical.key;R[L]||(R[L]=!0,P.querySourceFeatures(A,o))}return A}function hl(g,o){const c=g.tileID,A=o.tileID;return c.overscaledZ-A.overscaledZ||c.canonical.y-A.canonical.y||c.wrap-A.wrap||c.canonical.x-A.canonical.x}function Xs(g,o){const c={};if(!o)return c;for(const A of g){const R=A.layerIds.map(C=>o.getLayer(C)).filter(Boolean);if(R.length!==0){A.layers=R,A.stateDependentLayerIds&&(A.stateDependentLayers=A.stateDependentLayerIds.map(C=>R.filter(P=>P.id===C)[0]));for(const C of R)c[C.fqid]=A}}return c}const Io=32,jl=33,hu=new Uint16Array(8184);for(let g=0;g<2046;g++){let o=g+2,c=0,A=0,R=0,C=0,P=0,L=0;for(1&o?R=C=P=Io:c=A=L=Io;(o>>=1)>1;){const H=c+R>>1,W=A+C>>1;1&o?(R=c,C=A,c=P,A=L):(c=R,A=C,R=P,C=L),P=H,L=W}const j=4*g;hu[j+0]=c,hu[j+1]=A,hu[j+2]=R,hu[j+3]=C}const oo=new Uint16Array(2178),Lo=new Uint8Array(1089),vd=new Uint16Array(1089);function Fu(g){return g===0?-.03125:g===32?.03125:0}const df={type:2,extent:n.ai,loadGeometry:()=>[[new n.P(0,0),new n.P(n.ai+1,0),new n.P(n.ai+1,n.ai+1),new n.P(0,n.ai+1),new n.P(0,0)]]};class Zl{constructor(o,c,A,R,C){this.tileID=o,this.uid=n.aW(),this.uses=0,this.tileSize=c,this.tileZoom=A,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=C,R&&R.style&&(this._lastUpdatedBrightness=R.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",R&&R.transform&&(this.projection=R.transform.projection)}registerFadeDuration(o){const c=o+this.timeAdded;c<n.q.now()||this.fadeEndTime&&c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=n.aR(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(o,c,A){if(this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=Xs(o.buckets,c.style),this.hasSymbolBuckets=!1;for(const R in this.buckets){const C=this.buckets[R];if(C instanceof n.aY){if(this.hasSymbolBuckets=!0,!A)break;C.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const R in this.buckets){const C=this.buckets[R];if(C instanceof n.aY&&C.hasRTLText){this.hasRTLText=!0,n.aZ();break}}this.queryPadding=0;for(const R in this.buckets){const C=this.buckets[R],P=c.style.getOwnLayer(R);if(!P)continue;const L=P.queryRadius(C);this.queryPadding=Math.max(this.queryPadding,L)}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage),o.lineAtlas&&(this.lineAtlas=o.lineAtlas),this._lastUpdatedBrightness=o.brightness}else this.collisionBoxArray=new n.aX}unloadVectorData(){if(this.hasData()){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}loadModelData(o,c,A){o&&(o.resourceTiming&&(this.resourceTiming=o.resourceTiming),this.buckets=Object.assign({},this.buckets,Xs(o.buckets,c.style)),o.featureIndex&&(this.latestFeatureIndex=o.featureIndex))}getBucket(o){return this.buckets[o.fqid]}upload(o){for(const R in this.buckets){const C=this.buckets[R];C.uploadPending()&&C.upload(o)}const c=o.gl,A=this.imageAtlas;A&&!A.uploaded&&(this.imageAtlasTexture=new n.T(o,A.image,c.RGBA8,{useMipmap:!!A.patternPositions.size}),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new n.T(o,this.glyphAtlasImage,c.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new n.T(o,this.lineAtlas.image,c.R8),this.lineAtlas.uploaded=!0)}prepare(o,c,A){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture,A),!c||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const R=c.style.getBrightness();(this._lastUpdatedBrightness||R)&&(this._lastUpdatedBrightness&&R&&Math.abs(this._lastUpdatedBrightness-R)<.001||(this.updateBuckets(c,this._lastUpdatedBrightness!==R),this._lastUpdatedBrightness=R))}queryRenderedFeatures(o,c,A,R,C,P){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData&&!this.latestFeatureIndex.is3DTile)return{};const L=function(j,H){const W=n.ad.mat4.fromScaling([],[.5*j.width,.5*-j.height,1]);return n.ad.mat4.translate(W,W,[1,-1,0]),n.ad.mat4.multiply(W,W,j.calculateProjMatrix(H.toUnwrapped())),Float32Array.from(W)}(C,this.tileID);return this.latestFeatureIndex.query(o,{tilespaceGeometry:c,pixelPosMatrix:L,transform:R,availableImages:A,tileTransform:this.tileTransform})}querySourceFeatures(o,c){const A=this.latestFeatureIndex;if(!A||!A.rawTileData)return;const R=A.loadVTLayers(),C=c?c.sourceLayer:"",P=R._geojsonTileLayer||R[C];if(!P)return;const L=n.a_(c&&c.filter),{z:j,x:H,y:W}=this.tileID.canonical,te={z:j,x:H,y:W};for(let ae=0;ae<P.length;ae++){const ce=P.feature(ae);if(L.needGeometry){const Ee=n.a$(ce,!0);if(!L.filter(new n.aa(this.tileID.overscaledZ),Ee,this.tileID.canonical))continue}else if(!L.filter(new n.aa(this.tileID.overscaledZ),ce))continue;const Te=A.getId(ce,C),ve=new n.b0(ce,j,H,W,Te);ve.tile=te,o.push(ve)}}loaded(){return this.state==="loaded"||this.state==="errored"}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!this.imageAtlas.patternPositions.size}setExpiryData(o){const c=this.expirationTime;if(o.cacheControl){const A=n.b1(o.cacheControl);A["max-age"]&&(this.expirationTime=Date.now()+1e3*A["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const A=Date.now();let R=!1;if(this.expirationTime>A)R=!1;else if(c)if(this.expirationTime<c)R=!0;else{const C=this.expirationTime-c;C?this.expirationTime=A+Math.max(C,3e4):R=!0}else R=!0;R?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}refreshFeatureState(o){this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)&&o&&this.updateBuckets(o)}updateBuckets(o,c){if(!this.latestFeatureIndex||!o.style)return;const A=this.latestFeatureIndex.loadVTLayers(),R=o.style.listImages(),C=o.style.getBrightness();for(const P in this.buckets){if(!o.style.hasLayer(P))continue;const L=this.buckets[P],j=L.layers[0],H=j.sourceLayer||"_geojsonTileLayer",W=A[H],te=o.style.getLayerSourceCache(j);let ae={};te&&(ae=te._state.getState(H,void 0));const ce=this.imageAtlas?Object.fromEntries(this.imageAtlas.patternPositions):{},Te=Object.keys(ae).length>0&&!c;Te&&!L.stateDependentLayers.length&&!c||L.update(ae,W,R,ce,Te?L.stateDependentLayers:L.layers,c,C),(L instanceof n.b2||L instanceof n.b3)&&o._terrain&&o._terrain.enabled&&te&&L.uploadPending()&&o._terrain._clearRenderCacheForTile(te.id,this.tileID);const ve=o&&o.style&&o.style.getOwnLayer(P);ve&&(this.queryPadding=Math.max(this.queryPadding,ve.queryRadius(L)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<n.q.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=n.q.now()+o}setTexture(o,c){const A=c.context,R=A.gl;this.texture=this.texture||c.getTileTexture(o.width),this.texture&&this.texture instanceof n.T?this.texture.update(o):(this.texture=new n.T(A,o,R.RGBA8,{useMipmap:!0}),this.texture.bind(R.LINEAR,R.CLAMP_TO_EDGE))}setDependencies(o,c){const A={};for(const R of c)A[R]=!0;this.dependencies[o]=A}hasDependency(o,c){for(const A of o){const R=this.dependencies[A];if(R){for(const C of c)if(R[C])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(o,c){if(!c||c.name==="mercator"||this._tileDebugBuffer)return;const A=n.b4(df,this.tileID.canonical,this.tileTransform)[0],R=new n.b5,C=new n.b6;for(let P=0;P<A.length;P++){const{x:L,y:j}=A[P];R.emplaceBack(L,j),C.emplaceBack(P)}C.emplaceBack(0),this._tileDebugIndexBuffer=o.createIndexBuffer(C),this._tileDebugBuffer=o.createVertexBuffer(R,n.b7.members),this._tileDebugSegments=n.b8.simpleSegment(0,0,R.length,C.length)}_makeTileBoundsBuffers(o,c){if(this._tileBoundsBuffer||!c||c.name==="mercator")return;const A=n.b4(df,this.tileID.canonical,this.tileTransform)[0];let R,C;if(this.isRaster){const P=function(L,j){const H=n.aR(L,j),W=Math.pow(2,L.z);for(let Ee=0;Ee<jl;Ee++)for(let Ve=0;Ve<jl;Ve++){const Be=n.aS((L.x+(Ve+Fu(Ve))/Io)/W),et=n.aT((L.y+(Ee+Fu(Ee))/Io)/W),Xe=j.project(Be,et),ht=Ee*jl+Ve;oo[2*ht+0]=Math.round((Xe.x*H.scale-H.x)*n.ai),oo[2*ht+1]=Math.round((Xe.y*H.scale-H.y)*n.ai)}Lo.fill(0),vd.fill(0);for(let Ee=2045;Ee>=0;Ee--){const Ve=4*Ee,Be=hu[Ve+0],et=hu[Ve+1],Xe=hu[Ve+2],ht=hu[Ve+3],st=Be+Xe>>1,ot=et+ht>>1,lt=st+ot-et,gt=ot+Be-st,Tt=et*jl+Be,Yt=ht*jl+Xe,Lt=ot*jl+st,aa=Math.hypot((oo[2*Tt+0]+oo[2*Yt+0])/2-oo[2*Lt+0],(oo[2*Tt+1]+oo[2*Yt+1])/2-oo[2*Lt+1])>=16;Lo[Lt]=Lo[Lt]||(aa?1:0),Ee<1022&&(Lo[Lt]=Lo[Lt]||Lo[(et+gt>>1)*jl+(Be+lt>>1)]||Lo[(ht+gt>>1)*jl+(Xe+lt>>1)])}const te=new n.aU,ae=new n.aV;let ce=0;function Te(Ee,Ve){const Be=Ve*jl+Ee;return vd[Be]===0&&(te.emplaceBack(oo[2*Be+0],oo[2*Be+1],Ee*n.ai/Io,Ve*n.ai/Io),vd[Be]=++ce),vd[Be]-1}function ve(Ee,Ve,Be,et,Xe,ht){const st=Ee+Be>>1,ot=Ve+et>>1;if(Math.abs(Ee-Xe)+Math.abs(Ve-ht)>1&&Lo[ot*jl+st])ve(Xe,ht,Ee,Ve,st,ot),ve(Be,et,Xe,ht,st,ot);else{const lt=Te(Ee,Ve),gt=Te(Be,et),Tt=Te(Xe,ht);ae.emplaceBack(lt,gt,Tt)}}return ve(0,0,Io,Io,Io,0),ve(Io,Io,0,0,0,Io),{vertices:te,indices:ae}}(this.tileID.canonical,c);R=P.vertices,C=P.indices}else{R=new n.aU,C=new n.aV;for(const{x:L,y:j}of A)R.emplaceBack(L,j,0,0);const P=n.b9(R.int16,void 0,4);for(let L=0;L<P.length;L+=3)C.emplaceBack(P[L],P[L+1],P[L+2])}this._tileBoundsBuffer=o.createVertexBuffer(R,n.ba.members),this._tileBoundsIndexBuffer=o.createIndexBuffer(C),this._tileBoundsSegments=n.b8.simpleSegment(0,0,R.length,C.length)}_makeGlobeTileDebugBuffers(o,c){const A=c.projection;if(!A||A.name!=="globe"||c.freezeTileCoverage)return;const R=this.tileID.canonical,C=n.bb(R,c),P=n.bc(C),L=n.ag(c.zoom);let j;L>0&&(j=n.ad.mat4.invert(new Float64Array(16),c.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(o,R,c,P,j,L),this._makeGlobeTileDebugTextBuffer(o,R,c,P,j,L)}_globePoint(o,c,A,R,C,P,L){let j=n.bd(o,c,A);if(P){const H=1<<A.z,W=n.av(R.center.lng),te=n.aC(R.center.lat),ae=(A.x+.5)/H-W;let ce=0;ae>.5?ce=-1:ae<-.5&&(ce=1);let Te=(o/n.ai+A.x)/H+ce,ve=(c/n.ai+A.y)/H;Te=(Te-W)*R._pixelsPerMercatorPixel+W,ve=(ve-te)*R._pixelsPerMercatorPixel+te;const Ee=[Te*R.worldSize,ve*R.worldSize,0];n.ad.vec3.transformMat4(Ee,Ee,P),j=n.be(j,Ee,L)}return n.ad.vec3.transformMat4(j,j,C)}_makeGlobeTileDebugBorderBuffer(o,c,A,R,C,P){const L=new n.b5,j=new n.b6,H=new n.bf,W=(ae,ce,Te,ve,Ee)=>{const Ve=(Te-ae)/(Ee-1),Be=(ve-ce)/(Ee-1),et=L.length;for(let Xe=0;Xe<Ee;Xe++){const ht=ae+Xe*Ve,st=ce+Xe*Be;L.emplaceBack(ht,st);const ot=this._globePoint(ht,st,c,A,R,C,P);H.emplaceBack(ot[0],ot[1],ot[2]),j.emplaceBack(et+Xe)}},te=n.ai;W(0,0,te,0,16),W(te,0,te,te,16),W(te,te,0,te,16),W(0,te,0,0,16),this._tileDebugIndexBuffer=o.createIndexBuffer(j),this._tileDebugBuffer=o.createVertexBuffer(L,n.b7.members),this._globeTileDebugBorderBuffer=o.createVertexBuffer(H,n.bg.members),this._tileDebugSegments=n.b8.simpleSegment(0,0,L.length,j.length)}_makeGlobeTileDebugTextBuffer(o,c,A,R,C,P){const L=n.ai/4,j=new n.b5,H=new n.aV,W=new n.bf,te=25;H.reserve(32),j.reserve(te),W.reserve(te);const ae=(ce,Te)=>te*ce+Te;for(let ce=0;ce<te;ce++){const Te=ce*L;for(let ve=0;ve<te;ve++){const Ee=ve*L;j.emplaceBack(Ee,Te);const Ve=this._globePoint(Ee,Te,c,A,R,C,P);W.emplaceBack(Ve[0],Ve[1],Ve[2])}}for(let ce=0;ce<4;ce++)for(let Te=0;Te<4;Te++){const ve=ae(ce,Te),Ee=ae(ce,Te+1),Ve=ae(ce+1,Te),Be=ae(ce+1,Te+1);H.emplaceBack(ve,Ee,Ve),H.emplaceBack(Ve,Ee,Be)}this._tileDebugTextIndexBuffer=o.createIndexBuffer(H),this._tileDebugTextBuffer=o.createVertexBuffer(j,n.b7.members),this._globeTileDebugTextBuffer=o.createVertexBuffer(W,n.bg.members),this._tileDebugTextSegments=n.b8.simpleSegment(0,0,te,32)}destroy(o=!1){for(const c in this.buckets)this.buckets[c].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!o&&this.texture&&this.texture instanceof n.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}n.bh.setPbf(n.bi);class Fo extends Zl{constructor(o,c,A,R,C){super(o,c,A,R,C),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}getLayers(){return this._mrt?Object.values(this._mrt.layers):[]}getLayer(o){return this._mrt&&this._mrt.getLayer(o)}setTexture(o,c){const A=c.context,R=A.gl;this.texture=this.texture||c.getTileTexture(o.width),this.texture&&this.texture instanceof n.T?this.texture.update(o,{premultiply:!1}):this.texture=new n.T(A,o,R.RGBA8,{premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(o=16384,c){const A=this._mrt=new n.bh(30),R=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(o-1)}});return this.entireBuffer=null,this.request=n.bj(R,(C,P,L,j)=>{if(C)c(C);else try{const H=A.getHeaderLength(P);if(H>o)return void(this.request=this.fetchHeader(H,c));A.parseHeader(P),this._isHeaderLoaded=!0;let W=0;for(const te of Object.values(A.layers))W=Math.max(W,te.dataIndex[te.dataIndex.length-1].lastByte);P.byteLength>=W&&(this.entireBuffer=P),c(null,this.entireBuffer||P,L,j)}catch(H){c(H)}}),this.request}fetchBand(o,c,A){const R=this._mrt;if(!this._isHeaderLoaded||!R)return void A(new Error("Tile header is not ready"));const C=this.actor;if(!C)return void A(new Error("Can't fetch tile band without an actor"));let P;const L=(te,ae)=>{P.complete(te,ae),te?A(te):(this.updateTextureDescriptor(o,c),A(null,this.textureDescriptor&&this.textureDescriptor.img))},j=(te,ae)=>{if(te)return A(te);const ce=C.send("decodeRasterArray",{type:"raster-array",source:this.source,scope:this.scope,tileID:this.tileID,uid:this.uid,buffer:ae,task:P},L,void 0,!0);this._workQueue.push(()=>{ce&&ce.cancel(),P.cancel()})},H=R.getLayer(o);if(!H)return void A(new Error(`Unknown sourceLayer "${o}"`));if(H.hasDataForBand(c))return this.updateTextureDescriptor(o,c),void A(null,this.textureDescriptor?this.textureDescriptor.img:null);const W=H.getDataRange([c]);if(P=R.createDecodingTask(W),!P||P.tasks.length)if(this.flushQueues(),this.entireBuffer)j(null,this.entireBuffer.slice(W.firstByte,W.lastByte+1));else{const te=Object.assign({},this.requestParams,{headers:{Range:`bytes=${W.firstByte}-${W.lastByte}`}}),ae=n.bj(te,j);this._fetchQueue.push(()=>{ae.cancel(),P.cancel()})}else A(null)}updateNeeded(o,c){return(!this.textureDescriptor||this.textureDescriptor.band!==c||this.textureDescriptor.layer!==o)&&this.state!=="errored"}updateTextureDescriptor(o,c){if(!this._mrt)return;const A=this._mrt.getLayer(o);if(!A||!A.hasBand(c)||!A.hasDataForBand(c))return;const{bytes:R,tileSize:C,buffer:P,offset:L,scale:j}=A.getBandView(c),H=C+2*P,W=new n.r({width:H,height:H},R),te=this.texture;te&&te instanceof n.T&&te.update(W,{premultiply:!1}),this.textureDescriptor={layer:o,band:c,img:W,buffer:P,offset:L,tileSize:C,format:A.pixelFormat,mix:[j,256*j,65536*j,16777216*j]}}}class Uu{constructor(o,c){this.max=o,this.onRemove=c,this.reset()}reset(){for(const o in this.data)for(const c of this.data[o])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(o,c,A){const R=o.wrapped().key;this.data[R]===void 0&&(this.data[R]=[]);const C={value:c,timeout:void 0};if(A!==void 0&&(C.timeout=setTimeout(()=>{this.remove(o,C)},A)),this.data[R].push(C),this.order.push(R),this.order.length>this.max){const P=this._getAndRemoveByKey(this.order[0]);P&&this.onRemove(P)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const c=this.data[o].shift();return c.timeout&&clearTimeout(c.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),c.value}getByKey(o){const c=this.data[o];return c?c[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,c){if(!this.has(o))return this;const A=o.wrapped().key,R=c===void 0?0:this.data[A].indexOf(c),C=this.data[A][R];return this.data[A].splice(R,1),C.timeout&&clearTimeout(C.timeout),this.data[A].length===0&&delete this.data[A],this.onRemove(C.value),this.order.splice(this.order.indexOf(A),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(o){const c=[];for(const A in this.data)for(const R of this.data[A])o(R.value)||c.push(R);for(const A of c)this.remove(A.value.tileID,A)}}class rh{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,c,A){const R=String(c);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][R]=this.stateChanges[o][R]||{},n.l(this.stateChanges[o][R],A),this.deletedStates[o]===null){this.deletedStates[o]={};for(const C in this.state[o])C!==R&&(this.deletedStates[o][C]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][R]===null){this.deletedStates[o][R]={};for(const C in this.state[o][R])A[C]||(this.deletedStates[o][R][C]=null)}else for(const C in A)this.deletedStates[o]&&this.deletedStates[o][R]&&this.deletedStates[o][R][C]===null&&delete this.deletedStates[o][R][C]}removeFeatureState(o,c,A){if(this.deletedStates[o]===null)return;const R=String(c);if(this.deletedStates[o]=this.deletedStates[o]||{},A&&c!==void 0)this.deletedStates[o][R]!==null&&(this.deletedStates[o][R]=this.deletedStates[o][R]||{},this.deletedStates[o][R][A]=null);else if(c!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][R])for(A in this.deletedStates[o][R]={},this.stateChanges[o][R])this.deletedStates[o][R][A]=null;else this.deletedStates[o][R]=null;else this.deletedStates[o]=null}getState(o,c){const A=this.state[o]||{},R=this.stateChanges[o]||{},C=this.deletedStates[o];if(C===null)return{};if(c!==void 0){const L=String(c),j=n.l({},A[L],R[L]);if(C){const H=C[c];if(H===null)return{};for(const W in H)delete j[W]}return j}const P=n.l({},A,R);if(C)for(const L in C)delete P[L];return P}initializeTileState(o,c){o.refreshFeatureState(c)}coalesceChanges(o,c){const A={};for(const R in this.stateChanges){this.state[R]=this.state[R]||{};const C={};for(const P in this.stateChanges[R])this.state[R][P]||(this.state[R][P]={}),n.l(this.state[R][P],this.stateChanges[R][P]),C[P]=this.state[R][P];A[R]=C}for(const R in this.deletedStates){this.state[R]=this.state[R]||{};const C={};if(this.deletedStates[R]===null)for(const P in this.state[R])C[P]={},this.state[R][P]={};else for(const P in this.deletedStates[R]){if(this.deletedStates[R][P]===null)this.state[R][P]={};else if(this.state[R][P])for(const L of Object.keys(this.deletedStates[R][P]))delete this.state[R][P][L];C[P]=this.state[R][P]}A[R]=A[R]||{},n.l(A[R],C)}if(this.stateChanges={},this.deletedStates={},Object.keys(A).length!==0)for(const R in o)o[R].refreshFeatureState(c)}}class Xo extends n.E{constructor(o,c,A){super(),this.id=o,this._onlySymbols=A,c.on("data",R=>{R.dataType==="source"&&R.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&R.dataType==="source"&&R.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),c.on("error",()=>{this._sourceErrored=!0}),this._source=c,this._tiles={},this._cache=new Uu(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=c.minTileCacheSize,this._maxTileCacheSize=c.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new rh,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(o){this.map=o,this._minTileCacheSize=this._minTileCacheSize===void 0&&o?o._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&o?o._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const o in this._tiles)if(!this._tiles[o].loaded())return!1;return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(o,c){return o.isSymbolTile=this._onlySymbols,o.isExtraShadowCaster=this._shadowCasterTiles[o.tileID.key],this._source.loadTile(o,c)}_unloadTile(o){if(this._source.unloadTile)return this._source.unloadTile(o)}_abortTile(o){if(this._source.abortTile)return this._source.abortTile(o)}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const A=this._tiles[c];A.upload(o),A.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return Object.values(this._tiles).map(o=>o.tileID).sort(bn).map(o=>o.key)}getRenderableIds(o,c){const A=[];for(const R in this._tiles)this._isIdRenderable(+R,o,c)&&A.push(this._tiles[R]);return o?A.sort((R,C)=>{const P=R.tileID,L=C.tileID,j=new n.P(P.canonical.x,P.canonical.y)._rotate(this.transform.angle),H=new n.P(L.canonical.x,L.canonical.y)._rotate(this.transform.angle);return P.overscaledZ-L.overscaledZ||H.y-j.y||H.x-j.x}).map(R=>R.tileID.key):A.map(R=>R.tileID).sort(bn).map(R=>R.key)}hasRenderableParent(o){const c=this.findLoadedParent(o,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(o,c,A){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(c||!this._tiles[o].holdingForFade())&&(A||!this._shadowCasterTiles[o])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(+o,"reloading")}}_reloadTile(o,c){const A=this._tiles[o];A&&(A.state!=="loading"&&(A.state=c),this._loadTile(A,this._tileLoaded.bind(this,A,o,c)))}_tileLoaded(o,c,A,R){if(R)if(o.state="errored",R.status!==404)this._source.fire(new n.z(R,{tile:o}));else{if(this._source.fire(new n.A("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id,tile:o})),!(o.tileID.key in this._loadedParentTiles))return;if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const C=this.map.painter.terrain;this.update(this.transform,C.getScaledDemTileSize(),!0),C.resetTileLookupCache(this.id)}else this.update(this.transform)}else o.timeAdded=n.q.now(),A==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(c,o),this._source.type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new n.A("data",{dataType:"source",tile:o,coord:o.tileID,sourceCacheId:this.id}))}_backfillDEM(o){const c=this.getRenderableIds();for(let R=0;R<c.length;R++){const C=c[R];if(o.neighboringTiles&&o.neighboringTiles[C]){const P=this.getTileByID(C);A(o,P),A(P,o)}}function A(R,C){if(!R.dem||R.dem.borderReady)return;R.needsHillshadePrepare=!0,R.needsDEMTextureUpload=!0;let P=C.tileID.canonical.x-R.tileID.canonical.x;const L=C.tileID.canonical.y-R.tileID.canonical.y,j=Math.pow(2,R.tileID.canonical.z),H=C.tileID.key;P===0&&L===0||Math.abs(L)>1||(Math.abs(P)>1&&(Math.abs(P+j)===1?P+=j:Math.abs(P-j)===1&&(P-=j)),C.dem&&R.dem&&(R.dem.backfillBorder(C.dem,P,L),R.neighboringTiles&&R.neighboringTiles[H]&&(R.neighboringTiles[H].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,c,A,R){for(const C in this._tiles){let P=this._tiles[C];if(R[C]||!P.hasData()||P.tileID.overscaledZ<=c||P.tileID.overscaledZ>A)continue;let L=P.tileID;for(;P&&P.tileID.overscaledZ>c+1;){const H=P.tileID.scaledTo(P.tileID.overscaledZ-1);P=this._tiles[H.key],P&&P.hasData()&&(L=H)}let j=L;for(;j.overscaledZ>c;)if(j=j.scaledTo(j.overscaledZ-1),o[j.key]){R[L.key]=L;break}}}findLoadedParent(o,c){if(o.key in this._loadedParentTiles){const A=this._loadedParentTiles[o.key];return A&&A.tileID.overscaledZ>=c?A:null}for(let A=o.overscaledZ-1;A>=c;A--){const R=o.scaledTo(A),C=this._getLoadedTile(R);if(C)return C}}_getLoadedTile(o){const c=this._tiles[o.key];return c&&c.hasData()?c:this._cache.getByKey(this._source.reparseOverscaled?o.wrapped().key:o.canonical.key)}updateCacheSize(o,c){c=c||this._source.tileSize;const A=Math.ceil(o.width/c)+1,R=Math.ceil(o.height/c)+1,C=Math.floor(A*R*5),P=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,C):C,L=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,P):P;this._cache.setMaxSize(L)}handleWrapJump(o){const c=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,c){const A={};for(const R in this._tiles){const C=this._tiles[R];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+c),A[C.tileID.key]=C}this._tiles=A;for(const R in this._timers)clearTimeout(this._timers[R]),delete this._timers[R];for(const R in this._tiles)this._setTileReloadTimer(+R,this._tiles[R])}}update(o,c,A,R){if(this.transform=o,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!A)return;this.updateCacheSize(o,c),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={};const C=this._source.type==="batched-model";let P,L=this._source.maxzoom;const j=this.map&&this.map.painter?this.map.painter._terrain:null;if(j&&j.sourceCache===this&&j.attenuationRange()){const te=j.attenuationRange()[0],ae=Math.floor(te)-Math.log2(j.getDemUpscale());L>ae&&(L=ae)}if(this.used||this.usedForTerrain){if(this._source.tileID)P=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(te=>new n.aH(te.canonical.z,te.wrap,te.canonical.z,te.canonical.x,te.canonical.y));else if(this.tileCoverLift!==0){const te=o.clone();te.tileCoverLift=this.tileCoverLift,P=te.coveringTiles({tileSize:c||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:L,roundZoom:this._source.roundZoom&&!A,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:C}),this._source.minzoom<=1&&o.projection.name==="globe"&&(P.push(new n.aH(1,0,1,0,0)),P.push(new n.aH(1,0,1,1,0)),P.push(new n.aH(1,0,1,0,1)),P.push(new n.aH(1,0,1,1,1)))}else if(P=o.coveringTiles({tileSize:c||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:L,roundZoom:this._source.roundZoom&&!A,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:C}),this._source.hasTile){const te=this._source.hasTile.bind(this._source);P=P.filter(ae=>te(ae))}}else P=[];if(P.length>0&&this.castsShadows&&R&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!lo(this._source.type)){const te=o.coveringZoomLevel({tileSize:c||this._source.tileSize,roundZoom:this._source.roundZoom&&!A}),ae=Math.min(te,this._source.maxzoom);if(C){const ce=o.extendTileCover(P,ae);for(const Te of ce)P.push(Te)}else{const ce=o.extendTileCover(P,ae,R);for(const Te of ce)this._shadowCasterTiles[Te.key]=!0,P.push(Te)}}const H=this._updateRetainedTiles(P);if(lo(this._source.type)&&P.length!==0){const te={},ae={},ce=Object.keys(H);for(const ve of ce){const Ee=H[ve],Ve=this._tiles[ve];if(!Ve||Ve.fadeEndTime&&Ve.fadeEndTime<=n.q.now())continue;const Be=this.findLoadedParent(Ee,Math.max(Ee.overscaledZ-Xo.maxOverzooming,this._source.minzoom));Be&&(this._addTile(Be.tileID),te[Be.tileID.key]=Be.tileID),ae[ve]=Ee}const Te=P[P.length-1].overscaledZ;for(const ve in this._tiles){const Ee=this._tiles[ve];if(H[ve]||!Ee.hasData())continue;let Ve=Ee.tileID;for(;Ve.overscaledZ>Te;){Ve=Ve.scaledTo(Ve.overscaledZ-1);const Be=this._tiles[Ve.key];if(Be&&Be.hasData()&&ae[Ve.key]){H[ve]=Ee.tileID;break}}}for(const ve in te)H[ve]||(this._coveredTiles[ve]=!0,H[ve]=te[ve])}for(const te in H)this._tiles[te].clearFadeHold();const W=n.bk(this._tiles,H);for(const te of W){const ae=this._tiles[te];ae.hasSymbolBuckets&&!ae.holdingForFade()?ae.setHoldDuration(this.map._fadeDuration):ae.hasSymbolBuckets&&!ae.symbolFadeFinished()||this._removeTile(+te)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(+o)}_updateRetainedTiles(o){const c={};if(o.length===0)return c;const A={},R=o.reduce((H,W)=>Math.min(H,W.overscaledZ),1/0),C=o[0].overscaledZ,P=Math.max(C-Xo.maxOverzooming,this._source.minzoom),L=Math.max(C+Xo.maxUnderzooming,this._source.minzoom),j={};for(const H of o){const W=this._addTile(H);c[H.key]=H,W.hasData()||R<this._source.maxzoom&&(j[H.key]=H)}this._retainLoadedChildren(j,R,L,c);for(const H of o){let W=this._tiles[H.key];if(W.hasData())continue;if(H.canonical.z>=this._source.maxzoom){const ae=H.children(this._source.maxzoom)[0],ce=this.getTile(ae);if(ce&&ce.hasData()){c[ae.key]=ae;continue}}else{const ae=H.children(this._source.maxzoom);if(c[ae[0].key]&&c[ae[1].key]&&c[ae[2].key]&&c[ae[3].key])continue}let te=W.wasRequested();for(let ae=H.overscaledZ-1;ae>=P;--ae){const ce=H.scaledTo(ae);if(A[ce.key]||(A[ce.key]=!0,W=this.getTile(ce),!W&&te&&(W=this._addTile(ce)),W&&(c[ce.key]=ce,te=W.wasRequested(),W.hasData())))break}}return c}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const c=[];let A,R=this._tiles[o].tileID;for(;R.overscaledZ>0;){if(R.key in this._loadedParentTiles){A=this._loadedParentTiles[R.key];break}c.push(R.key);const C=R.scaledTo(R.overscaledZ-1);if(A=this._getLoadedTile(C),A)break;R=C}for(const C of c)this._loadedParentTiles[C]=A}}_addTile(o){let c=this._tiles[o.key];if(c)return c.isExtraShadowCaster!==!0||this._shadowCasterTiles[o.key]||this._reloadTile(o.key,"reloading"),c;c=this._cache.getAndRemove(o),c&&(this._setTileReloadTimer(o.key,c),c.tileID=o,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,c)));const A=!!c;if(!A){const R=this.map?this.map.painter:null,C=this._source.tileSize*o.overscaleFactor();c=this._source.type==="raster-array"?new Fo(o,C,this.transform.tileZoom,R,this._isRaster):new Zl(o,C,this.transform.tileZoom,R,this._isRaster),this._loadTile(c,this._tileLoaded.bind(this,c,o.key,c.state))}return c?(c.uses++,this._tiles[o.key]=c,A||this._source.fire(new n.A("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c):null}_setTileReloadTimer(o,c){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const A=c.getExpiryTimeout();A&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},A))}_removeTile(o){const c=this._tiles[o];c&&(c.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),c.uses>0||(c.hasData()&&c.state!=="reloading"||c.state==="empty"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(+o);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(o,c,A){const R=[],C=this.transform;if(!C)return R;const P=C.projection.name==="globe",L=n.av(C.center.lng);for(const j in this._tiles){const H=this._tiles[j];if(A&&H.clearQueryDebugViz(),H.holdingForFade())continue;let W;if(P){const te=H.tileID.canonical;if(te.z===0){const ae=[Math.abs(n.ay(L,...hr(te,-1))-L),Math.abs(n.ay(L,...hr(te,1))-L)];W=[0,2*ae.indexOf(Math.min(...ae))-1]}else{const ae=[Math.abs(n.ay(L,...hr(te,-1))-L),Math.abs(n.ay(L,...hr(te,0))-L),Math.abs(n.ay(L,...hr(te,1))-L)];W=[ae.indexOf(Math.min(...ae))-1]}}else W=[0];for(const te of W){const ae=o.containsTile(H,C,c,te);ae&&R.push(ae)}}return R}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(o){return this._getRenderableCoordinates(o)}_getRenderableCoordinates(o,c){const A=this.getRenderableIds(o,c).map(C=>this._tiles[C].tileID),R=this.transform.projection.name==="globe";for(const C of A)C.projMatrix=this.transform.calculateProjMatrix(C.toUnwrapped()),C.expandedProjMatrix=R?this.transform.calculateProjMatrix(C.toUnwrapped(),!1,!0):C.projMatrix;return A}sortCoordinatesByDistance(o){const c=o.slice(),A=this.transform._camera.position,R=this.transform._camera.forward(),C={};for(const P of c){const L=1/(1<<P.canonical.z);C[P.key]=((P.canonical.x+.5)*L+P.wrap-A[0])*R[0]+((P.canonical.y+.5)*L-A[1])*R[1]-A[2]*R[2]}return c.sort((P,L)=>C[P.key]-C[L.key]),c}hasTransition(){if(this._source.hasTransition())return!0;if(lo(this._source.type))for(const o in this._tiles){const c=this._tiles[o];if(c.fadeEndTime!==void 0&&c.fadeEndTime>=n.q.now())return!0}return!1}setFeatureState(o,c,A){this._state.updateState(o=o||"_geojsonTileLayer",c,A)}removeFeatureState(o,c,A){this._state.removeFeatureState(o=o||"_geojsonTileLayer",c,A)}getFeatureState(o,c){return this._state.getState(o=o||"_geojsonTileLayer",c)}setDependencies(o,c,A){const R=this._tiles[o];R&&R.setDependencies(c,A)}reloadTilesForDependencies(o,c){for(const A in this._tiles)this._tiles[A].hasDependency(o,c)&&this._reloadTile(+A,"reloading");this._cache.filter(A=>!A.hasDependency(o,c))}_preloadTiles(o,c){if(!this._sourceLoaded){const j=()=>{this._sourceLoaded&&(this._source.off("data",j),this._preloadTiles(o,c))};return void this._source.on("data",j)}const A=new Map,R=Array.isArray(o)?o:[o],C=this.map.painter.terrain,P=this.usedForTerrain&&C?C.getScaledDemTileSize():this._source.tileSize;for(const j of R){const H=j.coveringTiles({tileSize:P,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const W of H)A.set(W.key,W);this.usedForTerrain&&j.updateElevation(!1)}const L=Array.from(A.values());n.bl(L,(j,H)=>{const W=new Zl(j,this._source.tileSize*j.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(W,te=>{this._source.type==="raster-dem"&&W.dem&&this._backfillDEM(W),H(te,W)})},c)}}function bn(g,o){const c=Math.abs(2*g.wrap)-+(g.wrap<0),A=Math.abs(2*o.wrap)-+(o.wrap<0);return g.overscaledZ-o.overscaledZ||A-c||o.canonical.y-g.canonical.y||o.canonical.x-g.canonical.x}function lo(g){return g==="raster"||g==="image"||g==="video"||g==="custom"}function hr(g,o){const c=1<<g.z;return[g.x/c+o,(g.x+1)/c+o]}Xo.maxOverzooming=10,Xo.maxUnderzooming=3;class zc{constructor(o){this.style=o,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const o=!1,c=!1;for(const A in this.style._mergedLayers){const R=this.style._mergedLayers[A];if(R.type==="fill-extrusion")this.layers.push({layer:R,visible:o,visibilityChanged:c});else if(R.type==="model"){const C=this.style.getLayerSource(R);C&&C.type==="batched-model"&&this.layers.push({layer:R,visible:o,visibilityChanged:c})}}}onNewFrame(o){this.layersGotHidden=!1;for(const c of this.layers){const A=c.layer;let R=!1;A.type==="fill-extrusion"?R=!A.isHidden(o)&&A.paint.get("fill-extrusion-opacity")>0:A.type==="model"&&(R=!A.isHidden(o)&&A.paint.get("model-opacity").constantOr(1)>0),this.layersGotHidden=this.layersGotHidden||!R&&c.visible,c.visible=R}}updateZOffset(o,c){this.currentBuildingBuckets=[];for(const R of this.layers){const C=R.layer,P=this.style.getLayerSourceCache(C);let L=1;C.type==="fill-extrusion"&&(L=R.visible?C.paint.get("fill-extrusion-vertical-scale"):0);let j=P?P.getTile(c):null;if(!j&&P&&c.canonical.z>P.getSource().minzoom){let H=c.scaledTo(Math.min(P.getSource().maxzoom,c.overscaledZ-1));for(;H.overscaledZ>=P.getSource().minzoom&&(j=P.getTile(H),!j&&H.overscaledZ!==0);)H=H.scaledTo(H.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:j?j.getBucket(C):null,tileID:j?j.tileID:c,verticalScale:L})}o.hasAnyZOffset=!1;let A=!1;for(let R=0;R<o.symbolInstances.length;R++){const C=o.symbolInstances.get(R),P=C.zOffset,L=this._getHeightAtTileOffset(c,C.tileAnchorX,C.tileAnchorY);C.zOffset=L!==Number.NEGATIVE_INFINITY?L:P,A||P===C.zOffset||(A=!0),o.hasAnyZOffset||C.zOffset===0||(o.hasAnyZOffset=!0)}A&&(o.zOffsetBuffersNeedUpload=!0,o.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(o,c,A,R){let C=c,P=A;if(o.canonical.z!==R.canonical.z){const L=R.canonical,j=1/(1<<o.canonical.z-L.z);C=(c+o.canonical.x*n.ai)*j-L.x*n.ai|0,P=(A+o.canonical.y*n.ai)*j-L.y*n.ai|0}return{tileX:C,tileY:P}}_getHeightAtTileOffset(o,c,A){let R,C;for(let P=0;P<this.layers.length;++P){if(this.layers[P].layer.type!=="fill-extrusion")continue;const{bucket:L,tileID:j,verticalScale:H}=this.currentBuildingBuckets[P];if(!L)continue;const{tileX:W,tileY:te}=this._mapCoordToOverlappingTile(o,c,A,j),ae=L.getHeightAtTileCoord(W,te);ae&&ae.height!==void 0&&(ae.hidden?R=ae.height:C=Math.max(ae.height*H,C||0))}if(C!==void 0)return C;for(let P=0;P<this.layers.length;++P){const L=this.layers[P];if(L.layer.type!=="model"||!L.visible)continue;const{bucket:j,tileID:H}=this.currentBuildingBuckets[P];if(!j)continue;const{tileX:W,tileY:te}=this._mapCoordToOverlappingTile(o,c,A,H),ae=j.getHeightAtTileCoord(W,te);if(ae&&!ae.hidden)return ae.height===void 0&&R!==void 0?Math.min(ae.maxHeight,R)*ae.verticalScale:ae.height?ae.height*ae.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function gn(g,o){const c={};for(const A in g)A!=="ref"&&(c[A]=g[A]);return n.bm.forEach(A=>{A in o&&(c[A]=o[A])}),c}function nh(g){g=g.slice();const o=Object.create(null);for(let c=0;c<g.length;c++)o[g[c].id]=g[c];for(let c=0;c<g.length;c++)"ref"in g[c]&&(g[c]=gn(g[c],o[g[c].ref]));return g}const Tn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setSnow:"setSnow",setRain:"setRain",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport"};function Bs(g,o,c){c.push({command:Tn.addSource,args:[g,o[g]]})}function ic(g,o,c){o.push({command:Tn.removeSource,args:[g]}),c[g]=!0}function sc(g,o,c,A){ic(g,c,A),Bs(g,o,c)}function Xa(g,o,c){let A;for(A in g[c])if(g[c].hasOwnProperty(A)&&A!=="data"&&!n.bn(g[c][A],o[c][A]))return!1;for(A in o[c])if(o[c].hasOwnProperty(A)&&A!=="data"&&!n.bn(g[c][A],o[c][A]))return!1;return!0}function an(g,o,c,A,R,C){let P;for(P in o=o||{},g=g||{})g.hasOwnProperty(P)&&(n.bn(g[P],o[P])||c.push({command:C,args:[A,P,o[P],R]}));for(P in o)o.hasOwnProperty(P)&&!g.hasOwnProperty(P)&&(n.bn(g[P],o[P])||c.push({command:C,args:[A,P,o[P],R]}))}function An(g){return g.id}function Gs(g,o){return g[o.id]=o,g}class wd{constructor(o,c){this.reset(o,c)}reset(o,c){this.points=o||[],this._distances=[0];for(let A=1;A<this.points.length;A++)this._distances[A]=this._distances[A-1]+this.points[A].dist(this.points[A-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(this.points.length===1)return this.points[0];o=n.ay(o,0,1);let c=1,A=this._distances[c];const R=o*this.paddedLength+this.padding;for(;A<R&&c<this._distances.length;)A=this._distances[++c];const C=c-1,P=this._distances[C],L=A-P,j=L>0?(R-P)/L:0;return this.points[C].mult(1-j).add(this.points[c].mult(j))}}class un{constructor(o,c,A){const R=this.boxCells=[],C=this.circleCells=[];this.xCellCount=Math.ceil(o/A),this.yCellCount=Math.ceil(c/A);for(let P=0;P<this.xCellCount*this.yCellCount;P++)R.push([]),C.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=c,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,c,A,R,C){this._forEachCell(c,A,R,C,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(c),this.bboxes.push(A),this.bboxes.push(R),this.bboxes.push(C)}insertCircle(o,c,A,R){this._forEachCell(c-R,A-R,c+R,A+R,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(c),this.circles.push(A),this.circles.push(R)}_insertBoxCell(o,c,A,R,C,P){this.boxCells[C].push(P)}_insertCircleCell(o,c,A,R,C,P){this.circleCells[C].push(P)}_query(o,c,A,R,C,P){if(A<0||o>this.width||R<0||c>this.height)return!C&&[];const L=[];if(o<=0&&c<=0&&this.width<=A&&this.height<=R){if(C)return!0;for(let j=0;j<this.boxKeys.length;j++)L.push({key:this.boxKeys[j],x1:this.bboxes[4*j],y1:this.bboxes[4*j+1],x2:this.bboxes[4*j+2],y2:this.bboxes[4*j+3]});for(let j=0;j<this.circleKeys.length;j++){const H=this.circles[3*j],W=this.circles[3*j+1],te=this.circles[3*j+2];L.push({key:this.circleKeys[j],x1:H-te,y1:W-te,x2:H+te,y2:W+te})}return P?L.filter(P):L}return this._forEachCell(o,c,A,R,this._queryCell,L,{hitTest:C,seenUids:{box:{},circle:{}}},P),C?L.length>0:L}_queryCircle(o,c,A,R,C){const P=o-A,L=o+A,j=c-A,H=c+A;if(L<0||P>this.width||H<0||j>this.height)return!R&&[];const W=[];return this._forEachCell(P,j,L,H,this._queryCellCircle,W,{hitTest:R,circle:{x:o,y:c,radius:A},seenUids:{box:{},circle:{}}},C),R?W.length>0:W}query(o,c,A,R,C){return this._query(o,c,A,R,!1,C)}hitTest(o,c,A,R,C){return this._query(o,c,A,R,!0,C)}hitTestCircle(o,c,A,R){return this._queryCircle(o,c,A,!0,R)}_queryCell(o,c,A,R,C,P,L,j){const H=L.seenUids,W=this.boxCells[C];if(W!==null){const ae=this.bboxes;for(const ce of W)if(!H.box[ce]){H.box[ce]=!0;const Te=4*ce;if(o<=ae[Te+2]&&c<=ae[Te+3]&&A>=ae[Te+0]&&R>=ae[Te+1]&&(!j||j(this.boxKeys[ce]))){if(L.hitTest)return P.push(!0),!0;P.push({key:this.boxKeys[ce],x1:ae[Te],y1:ae[Te+1],x2:ae[Te+2],y2:ae[Te+3]})}}}const te=this.circleCells[C];if(te!==null){const ae=this.circles;for(const ce of te)if(!H.circle[ce]){H.circle[ce]=!0;const Te=3*ce;if(this._circleAndRectCollide(ae[Te],ae[Te+1],ae[Te+2],o,c,A,R)&&(!j||j(this.circleKeys[ce]))){if(L.hitTest)return P.push(!0),!0;{const ve=ae[Te],Ee=ae[Te+1],Ve=ae[Te+2];P.push({key:this.circleKeys[ce],x1:ve-Ve,y1:Ee-Ve,x2:ve+Ve,y2:Ee+Ve})}}}}}_queryCellCircle(o,c,A,R,C,P,L,j){const H=L.circle,W=L.seenUids,te=this.boxCells[C];if(te!==null){const ce=this.bboxes;for(const Te of te)if(!W.box[Te]){W.box[Te]=!0;const ve=4*Te;if(this._circleAndRectCollide(H.x,H.y,H.radius,ce[ve+0],ce[ve+1],ce[ve+2],ce[ve+3])&&(!j||j(this.boxKeys[Te])))return P.push(!0),!0}}const ae=this.circleCells[C];if(ae!==null){const ce=this.circles;for(const Te of ae)if(!W.circle[Te]){W.circle[Te]=!0;const ve=3*Te;if(this._circlesCollide(ce[ve],ce[ve+1],ce[ve+2],H.x,H.y,H.radius)&&(!j||j(this.circleKeys[Te])))return P.push(!0),!0}}}_forEachCell(o,c,A,R,C,P,L,j){const H=this._convertToXCellCoord(o),W=this._convertToYCellCoord(c),te=this._convertToXCellCoord(A),ae=this._convertToYCellCoord(R);for(let ce=H;ce<=te;ce++)for(let Te=W;Te<=ae;Te++)if(C.call(this,o,c,A,R,this.xCellCount*Te+ce,P,L,j))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,c,A,R,C,P){const L=R-o,j=C-c,H=A+P;return H*H>L*L+j*j}_circleAndRectCollide(o,c,A,R,C,P,L){const j=(P-R)/2,H=Math.abs(o-(R+j));if(H>j+A)return!1;const W=(L-C)/2,te=Math.abs(c-(C+W));if(te>W+A)return!1;if(H<=j||te<=W)return!0;const ae=H-j,ce=te-W;return ae*ae+ce*ce<=A*A}}const Uo={unknown:0,flipRequired:1,flipNotRequired:2},fu=Math.tan(85*Math.PI/180);function Rs(g,o,c,A,R,C,P){const L=n.ad.mat4.create();if(c)if(C.name==="globe"){const j=n.bo(R,o);n.ad.mat4.multiply(L,L,j)}else{const j=n.ad.mat2.invert([],P);L[0]=j[0],L[1]=j[1],L[4]=j[2],L[5]=j[3],A||n.ad.mat4.rotateZ(L,L,R.angle)}else n.ad.mat4.multiply(L,R.labelPlaneMatrix,g);return L}function Li(g,o,c,A,R,C,P){const L=Rs(g,o,c,A,R,C,P);return C.name==="globe"&&c||(L[2]=L[6]=L[10]=L[14]=0),L}function bi(g,o,c,A,R,C,P){if(c){if(C.name==="globe"){const L=Rs(g,o,c,A,R,C,P);return n.ad.mat4.invert(L,L),n.ad.mat4.multiply(L,g,L),L}{const L=n.ad.mat4.clone(g),j=n.ad.mat4.identity([]);return j[0]=P[0],j[1]=P[1],j[4]=P[2],j[5]=P[3],n.ad.mat4.multiply(L,L,j),A||n.ad.mat4.rotateZ(L,L,-R.angle),L}}return R.glCoordMatrix}function uo(g,o,c,A){const R=[g,o,c,1];c?n.ad.vec4.transformMat4(R,R,A):ji(R,R,A);const C=R[3];return R[0]/=C,R[1]/=C,R[2]/=C,R}function Rd(g,o){return Math.min(.5+g/o*.5,1.5)}function ih(g,o){const c=g[0]/g[3],A=g[1]/g[3];return c>=-o[0]&&c<=o[0]&&A>=-o[1]&&A<=o[1]}function oc(g,o,c,A,R,C,P,L,j,H){const W=c.transform,te=A?g.textSizeData:g.iconSizeData,ae=n.bp(te,c.transform.zoom),ce=W.projection.name==="globe",Te=[256/c.width*2+1,256/c.height*2+1],ve=A?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;ve.clear();let Ee=null;ce&&(Ee=A?g.text.globeExtVertexArray:g.icon.globeExtVertexArray);const Ve=g.lineVertexArray,Be=A?g.text.placedSymbolArray:g.icon.placedSymbolArray,et=c.transform.width/c.transform.height;let Xe,ht=!1;for(let st=0;st<Be.length;st++){const ot=Be.get(st),{numGlyphs:lt,writingMode:gt}=ot;if(gt!==n.bq.vertical||ht||Xe===n.bq.horizontal||(ht=!0),Xe=gt,(ot.hidden||gt===n.bq.vertical)&&!ht){Qo(lt,ve);continue}ht=!1;const Tt=new n.P(ot.tileAnchorX,ot.tileAnchorY);let{x:Yt,y:Lt,z:aa}=W.projection.projectTilePoint(Tt.x,Tt.y,H.canonical);if(j){const[La,Ea,sr]=j(Tt);Yt+=La,Lt+=Ea,aa+=sr}const ua=[Yt,Lt,aa,1];if(n.ad.vec4.transformMat4(ua,ua,o),!ih(ua,Te)){Qo(lt,ve);continue}const Sa=ua[3],It=Rd(c.transform.getCameraToCenterDistance(W.projection),Sa),ia=n.br(te,ae,ot),zt=P?ia/It:ia*It,sa=uo(Yt,Lt,aa,R);if(sa[3]<=0){Qo(lt,ve);continue}let ea={};const da=n.ak(g.layers[0].layout.get("text-max-angle")),Kt=Math.cos(da),pa=P?null:j,Ia=us(ot,zt,!1,L,o,R,C,g.glyphOffsetArray,Ve,ve,Ee,sa,Tt,ea,et,pa,W.projection,H,P,Kt);ht=Ia.useVertical,pa&&Ia.needsFlipping&&(ea={}),(Ia.notEnoughRoom||ht||Ia.needsFlipping&&us(ot,zt,!0,L,o,R,C,g.glyphOffsetArray,Ve,ve,Ee,sa,Tt,ea,et,pa,W.projection,H,P,Kt).notEnoughRoom)&&Qo(lt,ve)}A?(g.text.dynamicLayoutVertexBuffer.updateData(ve),Ee&&g.text.globeExtVertexBuffer&&g.text.globeExtVertexBuffer.updateData(Ee)):(g.icon.dynamicLayoutVertexBuffer.updateData(ve),Ee&&g.icon.globeExtVertexBuffer&&g.icon.globeExtVertexBuffer.updateData(Ee))}function lc(g,o,c,A,R,C,P,L,j,H,W,te,ae,ce,Te,ve,Ee){const{lineStartIndex:Ve,glyphStartIndex:Be,segment:et}=L,Xe=Be+L.numGlyphs,ht=Ve+L.lineLength,st=o.getoffsetX(Be),ot=o.getoffsetX(Xe-1),lt=Cl(g*st,c,A,R,C,P,et,Ve,ht,j,H,W,te,ae,!0,ce,Te,ve,Ee);if(!lt)return null;const gt=Cl(g*ot,c,A,R,C,P,et,Ve,ht,j,H,W,te,ae,!0,ce,Te,ve,Ee);return gt?{first:lt,last:gt}:null}function Jo(g,o,c,A){return g===n.bq.horizontal&&Math.abs(A)>Math.abs(c)?{useVertical:!0}:g===n.bq.vertical?A>0?{needsFlipping:!0}:null:o!==Uo.unknown&&function(R,C){return R===0||Math.abs(C/R)>fu}(c,A)?o===Uo.flipRequired?{needsFlipping:!0}:null:c<0?{needsFlipping:!0}:null}function us(g,o,c,A,R,C,P,L,j,H,W,te,ae,ce,Te,ve,Ee,Ve,Be,et){const Xe=o/24,ht=g.lineOffsetX*Xe,st=g.lineOffsetY*Xe,{lineStartIndex:ot,glyphStartIndex:lt,numGlyphs:gt,segment:Tt,writingMode:Yt,flipState:Lt}=g,aa=ot+g.lineLength,ua=Sa=>{if(W){const[sa,ea,da]=Sa.up,Kt=H.length;n.bs(W,Kt+0,sa,ea,da),n.bs(W,Kt+1,sa,ea,da),n.bs(W,Kt+2,sa,ea,da),n.bs(W,Kt+3,sa,ea,da)}const[It,ia,zt]=Sa.point;n.bt(H,It,ia,zt,Sa.angle)};if(gt>1){const Sa=lc(Xe,L,ht,st,c,te,ae,g,j,C,ce,ve,!1,Ee,Ve,Be,et);if(!Sa)return{notEnoughRoom:!0};if(A&&!c){let[It,ia,zt]=Sa.first.point,[sa,ea,da]=Sa.last.point;[It,ia]=uo(It,ia,zt,P),[sa,ea]=uo(sa,ea,da,P);const Kt=Jo(Yt,Lt,(sa-It)*Te,ea-ia);if(g.flipState=Kt&&Kt.needsFlipping?Uo.flipRequired:Uo.flipNotRequired,Kt)return Kt}ua(Sa.first);for(let It=lt+1;It<lt+gt-1;It++){const ia=Cl(Xe*L.getoffsetX(It),ht,st,c,te,ae,Tt,ot,aa,j,C,ce,ve,!1,!1,Ee,Ve,Be,et);if(!ia)return H.length-=4*(It-lt),{notEnoughRoom:!0};ua(ia)}ua(Sa.last)}else{if(A&&!c){const It=uo(ae.x,ae.y,0,R),ia=ot+Tt+1,zt=new n.P(j.getx(ia),j.gety(ia)),sa=uo(zt.x,zt.y,0,R),ea=sa[3]>0?sa:Ts(ae,zt,It,1,R,void 0,Ee,Ve.canonical),da=Jo(Yt,Lt,(ea[0]-It[0])*Te,ea[1]-It[1]);if(g.flipState=da&&da.needsFlipping?Uo.flipRequired:Uo.flipNotRequired,da)return da}const Sa=Cl(Xe*L.getoffsetX(lt),ht,st,c,te,ae,Tt,ot,aa,j,C,ce,ve,!1,!1,Ee,Ve,Be,et);if(!Sa)return{notEnoughRoom:!0};ua(Sa)}return{}}function ku(g,o,c,A,R){const{x:C,y:P,z:L}=A.projectTilePoint(g.x,g.y,o);if(!R)return uo(C,P,L,c);const[j,H,W]=R(g);return uo(C+j,P+H,L+W,c)}function Ts(g,o,c,A,R,C,P,L){const j=ku(g.sub(o)._unit()._add(g),L,R,P,C);return n.ad.vec3.sub(j,c,j),n.ad.vec3.normalize(j,j),n.ad.vec3.scaleAndAdd(j,c,j,A)}function Cl(g,o,c,A,R,C,P,L,j,H,W,te,ae,ce,Te,ve,Ee,Ve,Be){const et=A?g-o:g+o;let Xe=et>0?1:-1,ht=0;A&&(Xe*=-1,ht=Math.PI),Xe<0&&(ht+=Math.PI);let st=L+P+(Xe>0?0:1)|0,ot=R,lt=R,gt=0,Tt=0;const Yt=Math.abs(et),Lt=[],aa=[];let ua=C,Sa=ua,It=n.ad.vec3.zero([]);const ia=()=>Ts(Sa,ua,lt,Yt-gt+1,W,ae,ve,Ee.canonical);for(;gt+Tt<=Yt;){if(st+=Xe,st<L||st>=j)return null;if(lt=ot,Sa=ua,Lt.push(lt),ce&&aa.push(Sa),ua=new n.P(H.getx(st),H.gety(st)),ot=te[st],!ot){const sr=ku(ua,Ee.canonical,W,ve,ae);ot=sr[3]>0?te[st]=sr:ia()}gt+=Tt;const La=n.ad.vec3.sub([],ot,lt),Ea=n.ad.vec3.distance(lt,ot);if(c&&Ea>0&&Tt>0&&n.ad.vec3.dot(It,La)/(Tt*Ea)<Be)return null;Tt=Ea,It=La}Te&&ae&&(te[st]&&(ot=ia(),Tt=n.ad.vec3.distance(lt,ot),It=n.ad.vec3.sub([],ot,lt)),te[st]=ot);const zt=(Yt-gt)/Tt,sa=ua.sub(Sa)._mult(zt)._add(Sa),ea=n.ad.vec3.scaleAndAdd([],lt,It,zt);let da=[0,0,1],Kt=It[0],pa=It[1];if(Ve&&(da=ve.upVector(Ee.canonical,sa.x,sa.y),da[0]!==0||da[1]!==0||da[2]!==1)){const La=[da[2],0,-da[0]],Ea=n.ad.vec3.cross([],da,La);n.ad.vec3.normalize(La,La),n.ad.vec3.normalize(Ea,Ea),Kt=n.ad.vec3.dot(It,La),pa=n.ad.vec3.dot(It,Ea)}if(c){const La=n.ad.vec3.cross([],da,It);n.ad.vec3.normalize(La,La),n.ad.vec3.scaleAndAdd(ea,ea,La,c*Xe)}const Ia=ht+Math.atan2(pa,Kt);return Lt.push(ea),ce&&aa.push(sa),{point:ea,angle:Ia,path:Lt,tilePath:aa,up:da}}function Qo(g,o){const c=o.length,A=c+4*g;o.resize(A),o.float32.fill(-1/0,4*c,4*A)}function ji(g,o,c){const A=o[0],R=o[1];return g[0]=c[0]*A+c[4]*R+c[12],g[1]=c[1]*A+c[5]*R+c[13],g[3]=c[3]*A+c[7]*R+c[15],g}const js=100;class ql{constructor(o,c,A=new un(o.width+200,o.height+200,25),R=new un(o.width+200,o.height+200,25)){this.transform=o,this.grid=A,this.ignoredGrid=R,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+js,this.screenBottomBoundary=o.height+js,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.fogState=c}placeCollisionBox(o,c,A,R,C,P,L,j){let H=A.projectedAnchorX,W=A.projectedAnchorY,te=A.projectedAnchorZ;const ae=A.elevation,ce=A.tileID,Te=o.getProjection();if(ae&&ce){const[st,ot,lt]=Te.upVector(ce.canonical,A.tileAnchorX,A.tileAnchorY),gt=Te.upVectorScale(ce.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;H+=st*ae*gt,W+=ot*ae*gt,te+=lt*ae*gt}const ve=this.projectAndGetPerspectiveRatio(L,H,W,te,A.tileID,Te.name==="globe"||!!ae||this.transform.pitch>0,Te),Ee=P*ve.perspectiveRatio,Ve=(A.x1*c+R.x-A.padding)*Ee+ve.point.x,Be=(A.y1*c+R.y-A.padding)*Ee+ve.point.y,et=(A.x2*c+R.x+A.padding)*Ee+ve.point.x,Xe=(A.y2*c+R.y+A.padding)*Ee+ve.point.y,ht=ve.perspectiveRatio<=.55||ve.occluded;return!this.isInsideGrid(Ve,Be,et,Xe)||!C&&this.grid.hitTest(Ve,Be,et,Xe,j)||ht?{box:[],offscreen:!1,occluded:ve.occluded}:{box:[Ve,Be,et,Xe],offscreen:this.isOffscreen(Ve,Be,et,Xe),occluded:!1}}placeCollisionCircles(o,c,A,R,C,P,L,j,H,W,te,ae,ce,Te,ve){const Ee=[],Ve=this.transform.elevation,Be=o.getProjection(),et=Ve?Ve.getAtTileOffsetFunc(ve,this.transform.center.lat,this.transform.worldSize,Be):null,Xe=new n.P(A.tileAnchorX,A.tileAnchorY);let{x:ht,y:st,z:ot}=Be.projectTilePoint(Xe.x,Xe.y,ve.canonical);if(et){const[da,Kt,pa]=et(Xe);ht+=da,st+=Kt,ot+=pa}const lt=Be.name==="globe",gt=this.projectAndGetPerspectiveRatio(L,ht,st,ot,ve,lt||!!Ve||this.transform.pitch>0,Be),{perspectiveRatio:Tt}=gt,Yt=(te?P/Tt:P*Tt)/n.bw,Lt=uo(ht,st,ot,j),aa=A.lineOffsetX*Yt,ua=A.lineOffsetY*Yt,Sa=n.ak(o.layers[0].layout.get("text-max-angle")),It=Math.cos(Sa),ia=gt.signedDistanceFromCamera>0?lc(Yt,C,aa,ua,!1,Lt,Xe,A,R,j,{},Ve&&!te?et:null,te&&!!Ve,Be,ve,te,It):null;let zt=!1,sa=!1,ea=!0;if(ia&&!gt.occluded){const da=.5*ce*Tt+Te,Kt=new n.P(-100,-100),pa=new n.P(this.screenRightBoundary,this.screenBottomBoundary),Ia=new wd,{first:La,last:Ea}=ia,sr=La.path.length;let Fr=[];for(let Cr=sr-1;Cr>=1;Cr--)Fr.push(La.path[Cr]);for(let Cr=1;Cr<Ea.path.length;Cr++)Fr.push(Ea.path[Cr]);const pr=2.5*da;H&&(Fr=Fr.map(([Cr,xr,Ur],Ir)=>(et&&!lt&&(Ur=et(Ir<sr-1?La.tilePath[sr-1-Ir]:Ea.tilePath[Ir-sr+2])[2]),uo(Cr,xr,Ur,H))),Fr.some(Cr=>Cr[3]<=0)&&(Fr=[]));let Or=[];if(Fr.length>0){let Cr=1/0,xr=-1/0,Ur=1/0,Ir=-1/0;for(const dr of Fr)Cr=Math.min(Cr,dr[0]),Ur=Math.min(Ur,dr[1]),xr=Math.max(xr,dr[0]),Ir=Math.max(Ir,dr[1]);xr>=Kt.x&&Cr<=pa.x&&Ir>=Kt.y&&Ur<=pa.y&&(Or=[Fr.map(dr=>new n.P(dr[0],dr[1]))],(Cr<Kt.x||xr>pa.x||Ur<Kt.y||Ir>pa.y)&&(Or=n.bu(Or,Kt.x,Kt.y,pa.x,pa.y)))}for(const Cr of Or){Ia.reset(Cr,.25*da);let xr=0;xr=Ia.length<=.5*da?1:Math.ceil(Ia.paddedLength/pr)+1;for(let Ur=0;Ur<xr;Ur++){const Ir=Ur/Math.max(xr-1,1),dr=Ia.lerp(Ir),nn=dr.x+js,Tr=dr.y+js;Ee.push(nn,Tr,da,0);const tr=nn-da,sn=Tr-da,Hn=nn+da,cn=Tr+da;if(ea=ea&&this.isOffscreen(tr,sn,Hn,cn),sa=sa||this.isInsideGrid(tr,sn,Hn,cn),!c&&this.grid.hitTestCircle(nn,Tr,da,ae)&&(zt=!0,!W))return{circles:[],offscreen:!1,collisionDetected:zt,occluded:!1}}}}return{circles:!W&&zt||!sa?[]:Ee,offscreen:ea,collisionDetected:zt,occluded:gt.occluded}}queryRenderedSymbols(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let A=1/0,R=1/0,C=-1/0,P=-1/0;for(const W of o){const te=new n.P(W.x+js,W.y+js);A=Math.min(A,te.x),R=Math.min(R,te.y),C=Math.max(C,te.x),P=Math.max(P,te.y),c.push(te)}const L=this.grid.query(A,R,C,P).concat(this.ignoredGrid.query(A,R,C,P)),j={},H={};for(const W of L){const te=W.key;if(j[te.bucketInstanceId]===void 0&&(j[te.bucketInstanceId]={}),j[te.bucketInstanceId][te.featureIndex])continue;const ae=[new n.P(W.x1,W.y1),new n.P(W.x2,W.y1),new n.P(W.x2,W.y2),new n.P(W.x1,W.y2)];n.bv(c,ae)&&(j[te.bucketInstanceId][te.featureIndex]=!0,H[te.bucketInstanceId]===void 0&&(H[te.bucketInstanceId]=[]),H[te.bucketInstanceId].push(te.featureIndex))}return H}insertCollisionBox(o,c,A,R,C){(c?this.ignoredGrid:this.grid).insert({bucketInstanceId:A,featureIndex:R,collisionGroupID:C},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,c,A,R,C){const P=c?this.ignoredGrid:this.grid,L={bucketInstanceId:A,featureIndex:R,collisionGroupID:C};for(let j=0;j<o.length;j+=4)P.insertCircle(L,o[j],o[j+1],o[j+2])}projectAndGetPerspectiveRatio(o,c,A,R,C,P,L){const j=[c,A,R,1];let H=!1;R||this.transform.pitch>0?(n.ad.vec4.transformMat4(j,j,o),this.fogState&&C&&L.name!=="globe"&&(H=function(ae,ce,Te,ve,Ee,Ve){const Be=Ve.calculateFogTileMatrix(Ee),et=[ce,Te,ve];return n.ad.vec3.transformMat4(et,et,Be),Ba(ae,n.ad.vec3.length(et),Ve.pitch,Ve._fov)}(this.fogState,c,A,R,C.toUnwrapped(),this.transform)>.9)):ji(j,j,o);const W=j[3];return{point:new n.P((j[0]/W+1)/2*this.transform.width+js,(-j[1]/W+1)/2*this.transform.height+js),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(L)/W*.5,1.5),signedDistanceFromCamera:W,occluded:P&&j[2]>W||H}}isOffscreen(o,c,A,R){return A<js||o>=this.screenRightBoundary||R<js||c>this.screenBottomBoundary}isInsideGrid(o,c,A,R){return A>=0&&o<this.gridRightBoundary&&R>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const o=n.ad.mat4.identity([]);return n.ad.mat4.translate(o,o,[-100,-100,0]),o}}function ns(g,o,c){const A=o.createTileMatrix(g,g.worldSize,c.toUnwrapped());return n.ad.mat4.multiply(new Float32Array(16),g.projMatrix,A)}function Vh(g,o,c){if(o.projection.name===c.projection.name)return g.projMatrix;const A=c.clone();return A.setProjection(o.projection),ns(A,o.getProjection(),g)}function ko(g,o,c){return o.name===c.projection.name?g.projMatrix:ns(c,o,g)}class Td{constructor(o,c,A,R){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?c:-c))):R&&A?1:0,this.placed=A}isHidden(){return this.opacity===0&&!this.placed}}class pu{constructor(o,c,A,R,C,P=!1){this.text=new Td(o?o.text:null,c,A,C),this.icon=new Td(o?o.icon:null,c,R,C),this.clipped=P}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class mu{constructor(o,c,A,R=!1){this.text=o,this.icon=c,this.skipFade=A,this.clipped=R}}class Hf{constructor(){this.invProjMatrix=n.ad.mat4.create(),this.viewportMatrix=n.ad.mat4.create(),this.circles=[]}}class Hl{constructor(o,c,A,R,C){this.bucketInstanceId=o,this.featureIndex=c,this.sourceLayerIndex=A,this.bucketIndex=R,this.tileID=C}}class Im{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){const c=++this.maxGroupID;this.collisionGroups[o]={ID:c,predicate:A=>A.collisionGroupID===c}}return this.collisionGroups[o]}}function Sd(g,o,c,A,R){const{horizontalAlign:C,verticalAlign:P}=n.bD(g),L=-(C-.5)*o,j=-(P-.5)*c,H=n.bC(g,A);return new n.P(L+H[0]*R,j+H[1]*R)}function Zs(g,o,c,A,R){const C=new n.P(g,o);return c&&C._rotate(A?R:-R),C}class hf{constructor(o,c,A,R,C,P){this.transform=o.clone(),this.projection=o.projection.name,this.collisionIndex=new ql(this.transform,C),this.buildingIndex=P,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=c,this.retainedQueryData={},this.collisionGroups=new Im(A),this.collisionCircleArrays={},this.prevPlacement=R,R&&(R.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(o,c,A,R,C=1){const P=A.getBucket(c),L=A.latestFeatureIndex;if(!P||!L||c.fqid!==P.layerIds[0])return;const j=P.layers[0].layout,H=P.layers[0].paint,W=A.collisionBoxArray,te=Math.pow(2,this.transform.zoom-A.tileID.overscaledZ),ae=A.tileSize/n.ai,ce=A.tileID.toUnwrapped();this.transform.setProjection(P.projection);const Te=(ve=A.tileID,Ee=P.getProjection(),Ve=this.transform,Ee.name===this.projection?Ve.calculateProjMatrix(ve.toUnwrapped()):ns(Ve,Ee,ve));var ve,Ee,Ve;const Be=j.get("text-pitch-alignment")==="map",et=j.get("text-rotation-alignment")==="map";c.compileFilter(c.options);const Xe=c.dynamicFilter(),ht=c.dynamicFilterNeedsFeature(),st=this.transform.calculatePixelsToTileUnitsMatrix(A),ot=Li(Te,A.tileID.canonical,Be,et,this.transform,P.getProjection(),st);let lt=null;if(Be){const ia=bi(Te,A.tileID.canonical,Be,et,this.transform,P.getProjection(),st);lt=n.ad.mat4.multiply([],this.transform.labelPlaneMatrix,ia)}let gt=null;Xe&&A.latestFeatureIndex&&(gt={unwrappedTileID:ce,dynamicFilter:Xe,dynamicFilterNeedsFeature:ht}),this.retainedQueryData[P.bucketInstanceId]=new Hl(P.bucketInstanceId,L,P.sourceLayerIndex,P.index,A.tileID);const[Tt,Yt]=P.layers[0].layout.get("text-size-scale-range"),Lt=n.ay(C,Tt,Yt),[aa,ua]=j.get("icon-size-scale-range"),Sa=n.ay(C,aa,ua),It={bucket:P,layout:j,paint:H,posMatrix:Te,textLabelPlaneMatrix:ot,labelToScreenMatrix:lt,clippingData:gt,scale:te,textPixelRatio:ae,holdingForFade:A.holdingForFade(),collisionBoxArray:W,partiallyEvaluatedTextSize:n.bp(P.textSizeData,this.transform.zoom,Lt),partiallyEvaluatedIconSize:n.bp(P.iconSizeData,this.transform.zoom,Sa),collisionGroup:this.collisionGroups.get(P.sourceID),latestFeatureIndex:A.latestFeatureIndex};if(R)for(const ia of P.sortKeyRanges){const{sortKey:zt,symbolInstanceStart:sa,symbolInstanceEnd:ea}=ia;o.push({sortKey:zt,symbolInstanceStart:sa,symbolInstanceEnd:ea,parameters:It})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:P.symbolInstances.length,parameters:It})}attemptAnchorPlacement(o,c,A,R,C,P,L,j,H,W,te,ae,ce,Te,ve,Ee,Ve,Be){const{textOffset0:et,textOffset1:Xe,crossTileID:ht}=ae,st=[et,Xe],ot=Sd(o,A,R,st,C),lt=this.collisionIndex.placeCollisionBox(Te,C,c,Zs(ot.x,ot.y,P,L,this.transform.angle),te,j,H,W.predicate);if(Ee){const gt=Te.getSymbolInstanceIconSize(Be,this.transform.zoom,ae.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(Te,gt,Ee,Zs(ot.x,ot.y,P,L,this.transform.angle),te,j,H,W.predicate).box.length===0)return}if(lt.box.length>0){let gt;return this.prevPlacement&&this.prevPlacement.variableOffsets[ht]&&this.prevPlacement.placements[ht]&&this.prevPlacement.placements[ht].text&&(gt=this.prevPlacement.variableOffsets[ht].anchor),this.variableOffsets[ht]={textOffset:st,width:A,height:R,anchor:o,textScale:C,prevAnchor:gt},this.markUsedJustification(Te,o,ae,ve),Te.allowVerticalPlacement&&(this.markUsedOrientation(Te,ve,ae),this.placedOrientations[ht]=ve),{shift:ot,placedGlyphBoxes:lt}}}placeLayerBucketPart(o,c,A,R,C=1){const{bucket:P,layout:L,paint:j,posMatrix:H,textLabelPlaneMatrix:W,labelToScreenMatrix:te,clippingData:ae,textPixelRatio:ce,holdingForFade:Te,collisionBoxArray:ve,partiallyEvaluatedTextSize:Ee,partiallyEvaluatedIconSize:Ve,collisionGroup:Be,latestFeatureIndex:et}=o.parameters,Xe=L.get("text-optional"),ht=L.get("icon-optional"),st=L.get("text-allow-overlap"),ot=L.get("icon-allow-overlap"),lt=L.get("text-rotation-alignment")==="map",gt=L.get("text-pitch-alignment")==="map",Tt=j.get("symbol-z-offset"),Yt=L.get("symbol-elevation-reference")==="sea",[Lt,aa]=L.get("text-size-scale-range"),[ua,Sa]=L.get("icon-size-scale-range"),It=n.ay(C,Lt,aa),ia=n.ay(C,ua,Sa);this.transform.setProjection(P.projection);let zt=st&&(ot||!P.hasIconData()||ht),sa=ot&&(st||!P.hasTextData()||Xe);const ea=!Tt.isConstant();!P.collisionArrays&&ve&&P.deserializeCollisionBoxes(ve),A&&R&&P.updateCollisionDebugBuffers(this.transform.zoom,ve,It,ia);const da=(Kt,pa,Ia)=>{const{crossTileID:La,numVerticalGlyphVertices:Ea}=Kt;let sr=null;if(ae&&ae.dynamicFilterNeedsFeature||ea){const Cn=this.retainedQueryData[P.bucketInstanceId];sr=et.loadFeature({featureIndex:Kt.featureIndex,bucketIndex:Cn.bucketIndex,sourceLayerIndex:Cn.sourceLayerIndex,layoutVertexArrayOffset:0})}if(ae&&!(0,ae.dynamicFilter)({zoom:this.transform.zoom,pitch:this.transform.pitch},sr,this.retainedQueryData[P.bucketInstanceId].tileID.canonical,new n.P(Kt.tileAnchorX,Kt.tileAnchorY),this.transform.calculateDistanceTileData(ae.unwrappedTileID)))return this.placements[La]=new mu(!1,!1,!1,!0),void c.add(La);const Fr=Tt.evaluate(sr,{});if(c.has(La))return;if(Te)return void(this.placements[La]=new mu(!1,!1,!1));let pr=!1,Or=!1,Cr=!0,xr=!1,Ur=!1,Ir=null,dr={box:null,offscreen:null,occluded:null},nn={box:null},Tr=null,tr=null,sn=null,Hn=0,cn=0,Vn=0;Ia.textFeatureIndex?Hn=Ia.textFeatureIndex:Kt.useRuntimeCollisionCircles&&(Hn=Kt.featureIndex),Ia.verticalTextFeatureIndex&&(cn=Ia.verticalTextFeatureIndex);const Wi=Cn=>{Cn.tileID=this.retainedQueryData[P.bucketInstanceId].tileID;const ii=this.transform.elevation;Cn.elevation=Yt?Fr:Fr+(ii?ii.getAtTileOffset(Cn.tileID,Cn.tileAnchorX,Cn.tileAnchorY):0),Cn.elevation+=Kt.zOffset},hs=Ia.textBox;if(hs){Wi(hs);const Cn=On=>{let oi=n.bq.horizontal;if(P.allowVerticalPlacement&&!On&&this.prevPlacement){const yo=this.prevPlacement.placedOrientations[La];yo&&(this.placedOrientations[La]=yo,oi=yo,this.markUsedOrientation(P,oi,Kt))}return oi},ii=(On,oi)=>{if(P.allowVerticalPlacement&&Ea>0&&Ia.verticalTextBox){for(const yo of P.writingModes)if(yo===n.bq.vertical?(dr=oi(),nn=dr):dr=On(),dr&&dr.box&&dr.box.length)break}else dr=On()};if(L.get("text-variable-anchor")){let On=L.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[La]){const Ti=this.prevPlacement.variableOffsets[La];On.indexOf(Ti.anchor)>0&&(On=On.filter(os=>os!==Ti.anchor),On.unshift(Ti.anchor))}const oi=(Ti,os,Tc)=>{const qo=P.getSymbolInstanceTextSize(Ee,Kt,this.transform.zoom,pa),au=(Ti.x2-Ti.x1)*qo+2*Ti.padding,Ml=(Ti.y2-Ti.y1)*qo+2*Ti.padding,Yu=Kt.hasIconTextFit&&!ot?os:null;Yu&&Wi(Yu);let vl={box:[],offscreen:!1,occluded:!1};const jd=st?2*On.length:On.length;for(let go=0;go<jd;++go){const wh=this.attemptAnchorPlacement(On[go%On.length],Ti,au,Ml,qo,lt,gt,ce,H,Be,go>=On.length,Kt,pa,P,Tc,Yu,Ee,Ve);if(wh&&(vl=wh.placedGlyphBoxes,vl&&vl.box&&vl.box.length)){pr=!0,Ir=wh.shift;break}}return vl};ii(()=>oi(hs,Ia.iconBox,n.bq.horizontal),()=>{const Ti=Ia.verticalTextBox;return Ti&&Wi(Ti),P.allowVerticalPlacement&&!(dr&&dr.box&&dr.box.length)&&Ea>0&&Ti?oi(Ti,Ia.verticalIconBox,n.bq.vertical):{box:null,offscreen:null,occluded:null}}),dr&&(pr=dr.box,Cr=dr.offscreen,xr=dr.occluded);const yo=Cn(!(!dr||!dr.box));if(!pr&&this.prevPlacement){const Ti=this.prevPlacement.variableOffsets[La];Ti&&(this.variableOffsets[La]=Ti,this.markUsedJustification(P,Ti.anchor,Kt,yo))}}else{const On=(oi,yo)=>{const Ti=P.getSymbolInstanceTextSize(Ee,Kt,this.transform.zoom,pa,C),os=this.collisionIndex.placeCollisionBox(P,Ti,oi,new n.P(0,0),st,ce,H,Be.predicate);return os&&os.box&&os.box.length&&(this.markUsedOrientation(P,yo,Kt),this.placedOrientations[La]=yo),os};ii(()=>On(hs,n.bq.horizontal),()=>{const oi=Ia.verticalTextBox;return P.allowVerticalPlacement&&Ea>0&&oi?(Wi(oi),On(oi,n.bq.vertical)):{box:null,offscreen:null,occluded:null}}),Cn(!!(dr&&dr.box&&dr.box.length))}}if(Tr=dr,pr=Tr&&Tr.box&&Tr.box.length>0,Cr=Tr&&Tr.offscreen,xr=Tr&&Tr.occluded,Kt.useRuntimeCollisionCircles){const Cn=P.text.placedSymbolArray.get(Kt.centerJustifiedTextSymbolIndex>=0?Kt.centerJustifiedTextSymbolIndex:Kt.verticalPlacedTextSymbolIndex),ii=n.br(P.textSizeData,Ee,Cn),On=L.get("text-padding");tr=this.collisionIndex.placeCollisionCircles(P,st,Cn,P.lineVertexArray,P.glyphOffsetArray,ii,H,W,te,A,gt,Be.predicate,Kt.collisionCircleDiameter*ii/n.bw,On,this.retainedQueryData[P.bucketInstanceId].tileID),pr=st||tr.circles.length>0&&!tr.collisionDetected,Cr=Cr&&tr.offscreen,xr=tr.occluded}if(Ia.iconFeatureIndex&&(Vn=Ia.iconFeatureIndex),Ia.iconBox){const Cn=ii=>{Wi(ii);const On=Kt.hasIconTextFit&&Ir?Zs(Ir.x,Ir.y,lt,gt,this.transform.angle):new n.P(0,0),oi=P.getSymbolInstanceIconSize(Ve,this.transform.zoom,Kt.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(P,oi,ii,On,ot,ce,H,Be.predicate)};nn&&nn.box&&nn.box.length&&Ia.verticalIconBox?(sn=Cn(Ia.verticalIconBox),Or=sn.box.length>0):(sn=Cn(Ia.iconBox),Or=sn.box.length>0),Cr=Cr&&sn.offscreen,Ur=sn.occluded}const ro=Xe||Kt.numHorizontalGlyphVertices===0&&Ea===0,Ws=ht||Kt.numIconVertices===0;if(ro||Ws?Ws?ro||(Or=Or&&pr):pr=Or&&pr:Or=pr=Or&&pr,pr&&Tr&&Tr.box&&this.collisionIndex.insertCollisionBox(Tr.box,L.get("text-ignore-placement"),P.bucketInstanceId,nn&&nn.box&&cn?cn:Hn,Be.ID),Or&&sn&&this.collisionIndex.insertCollisionBox(sn.box,L.get("icon-ignore-placement"),P.bucketInstanceId,Vn,Be.ID),tr&&(pr&&this.collisionIndex.insertCollisionCircles(tr.circles,L.get("text-ignore-placement"),P.bucketInstanceId,Hn,Be.ID),A)){const Cn=P.bucketInstanceId;let ii=this.collisionCircleArrays[Cn];ii===void 0&&(ii=this.collisionCircleArrays[Cn]=new Hf);for(let On=0;On<tr.circles.length;On+=4)ii.circles.push(tr.circles[On+0]),ii.circles.push(tr.circles[On+1]),ii.circles.push(tr.circles[On+2]),ii.circles.push(tr.collisionDetected?1:0)}const mo=P.projection.name!=="globe";zt=zt&&(mo||!xr),sa=sa&&(mo||!Ur),this.placements[La]=new mu(pr||zt,Or||sa,Cr||P.justReloaded),c.add(La)};if(P.elevationType==="offset"&&this.buildingIndex&&this.buildingIndex.updateZOffset(P,this.retainedQueryData[P.bucketInstanceId].tileID),P.elevationType==="road"&&P.updateRoadElevation(),P.updateZOffset(),P.sortFeaturesByY){const Kt=P.getSortedSymbolIndexes(this.transform.angle);for(let pa=Kt.length-1;pa>=0;--pa){const Ia=Kt[pa];da(P.symbolInstances.get(Ia),Ia,P.collisionArrays[Ia])}P.hasAnyZOffset&&n.w(`${P.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(P.hasAnyZOffset){const Kt=P.getSortedIndexesByZOffset();for(let pa=0;pa<Kt.length;++pa){const Ia=Kt[pa];da(P.symbolInstances.get(Ia),Ia,P.collisionArrays[Ia])}}else for(let Kt=o.symbolInstanceStart;Kt<o.symbolInstanceEnd;Kt++)da(P.symbolInstances.get(Kt),Kt,P.collisionArrays[Kt]);if(A&&P.bucketInstanceId in this.collisionCircleArrays){const Kt=this.collisionCircleArrays[P.bucketInstanceId];n.ad.mat4.invert(Kt.invProjMatrix,H),Kt.viewportMatrix=this.collisionIndex.getViewportMatrix()}P.justReloaded=!1}markUsedJustification(o,c,A,R){const{leftJustifiedTextSymbolIndex:C,centerJustifiedTextSymbolIndex:P,rightJustifiedTextSymbolIndex:L,verticalPlacedTextSymbolIndex:j,crossTileID:H}=A,W=n.bB(c),te=R===n.bq.vertical?j:W==="left"?C:W==="center"?P:W==="right"?L:-1;C>=0&&(o.text.placedSymbolArray.get(C).crossTileID=te>=0&&C!==te?0:H),P>=0&&(o.text.placedSymbolArray.get(P).crossTileID=te>=0&&P!==te?0:H),L>=0&&(o.text.placedSymbolArray.get(L).crossTileID=te>=0&&L!==te?0:H),j>=0&&(o.text.placedSymbolArray.get(j).crossTileID=te>=0&&j!==te?0:H)}markUsedOrientation(o,c,A){const R=c===n.bq.horizontal||c===n.bq.horizontalOnly?c:0,C=c===n.bq.vertical?c:0,{leftJustifiedTextSymbolIndex:P,centerJustifiedTextSymbolIndex:L,rightJustifiedTextSymbolIndex:j,verticalPlacedTextSymbolIndex:H}=A,W=o.text.placedSymbolArray;P>=0&&(W.get(P).placedOrientation=R),L>=0&&(W.get(L).placedOrientation=R),j>=0&&(W.get(j).placedOrientation=R),H>=0&&(W.get(H).placedOrientation=C)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let A=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const R=c?c.symbolFadeChange(o):1,C=c?c.opacities:{},P=c?c.variableOffsets:{},L=c?c.placedOrientations:{};for(const j in this.placements){const H=this.placements[j],W=C[j];W?(this.opacities[j]=new pu(W,R,H.text,H.icon,null,H.clipped),A=A||H.text!==W.text.placed||H.icon!==W.icon.placed):(this.opacities[j]=new pu(null,R,H.text,H.icon,H.skipFade,H.clipped),A=A||H.text||H.icon)}for(const j in C){const H=C[j];if(!this.opacities[j]){const W=new pu(H,R,!1,!1);W.isHidden()||(this.opacities[j]=W,A=A||H.text.placed||H.icon.placed)}}for(const j in P)this.variableOffsets[j]||!this.opacities[j]||this.opacities[j].isHidden()||(this.variableOffsets[j]=P[j]);for(const j in L)this.placedOrientations[j]||!this.opacities[j]||this.opacities[j].isHidden()||(this.placedOrientations[j]=L[j]);A?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:o)}updateLayerOpacities(o,c,A,R){const C=new Set;for(const P of c){const L=P.getBucket(o);L&&P.latestFeatureIndex&&o.fqid===L.layerIds[0]&&(this.updateBucketOpacities(L,C,P,P.collisionBoxArray,A,R,P.tileID,o.scope),L.elevationType==="offset"&&this.buildingIndex&&this.buildingIndex.updateZOffset(L,P.tileID),L.elevationType==="road"&&L.updateRoadElevation(),L.updateZOffset())}}updateBucketOpacities(o,c,A,R,C,P,L,j){o.hasTextData()&&o.text.opacityVertexArray.clear(),o.hasIconData()&&o.icon.opacityVertexArray.clear(),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();const H=o.layers[0].layout,W=o.layers[0].paint,te=!!o.layers[0].dynamicFilter(),ae=new pu(null,0,!1,!1,!0),ce=H.get("text-allow-overlap"),Te=H.get("icon-allow-overlap"),ve=H.get("text-variable-anchor"),Ee=H.get("text-rotation-alignment")==="map",Ve=H.get("text-pitch-alignment")==="map",Be=W.get("symbol-z-offset"),et=H.get("symbol-elevation-reference")==="sea",Xe=!Be.isConstant(),ht=new pu(null,0,ce&&(Te||!o.hasIconData()||H.get("icon-optional")),Te&&(ce||!o.hasTextData()||H.get("text-optional")),!0);!o.collisionArrays&&R&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(R);const st=(lt,gt,Tt)=>{for(let Yt=0;Yt<gt/4;Yt++)lt.opacityVertexArray.emplaceBack(Tt)};let ot=0;P&&o.updateReplacement(L,P);for(let lt=0;lt<o.symbolInstances.length;lt++){const gt=o.symbolInstances.get(lt),{numHorizontalGlyphVertices:Tt,numVerticalGlyphVertices:Yt,crossTileID:Lt,numIconVertices:aa,tileAnchorX:ua,tileAnchorY:Sa}=gt;let It=null;const ia=this.retainedQueryData[o.bucketInstanceId];Xe&&gt&&ia&&(It=A.latestFeatureIndex.loadFeature({featureIndex:gt.featureIndex,bucketIndex:ia.bucketIndex,sourceLayerIndex:ia.sourceLayerIndex,layoutVertexArrayOffset:0}));const zt=Be.evaluate(It,{}),sa=c.has(Lt);let ea=this.opacities[Lt];sa?ea=ae:ea||(ea=ht,this.opacities[Lt]=ea),c.add(Lt);const da=Tt>0||Yt>0,Kt=aa>0,pa=this.placedOrientations[Lt],Ia=pa===n.bq.vertical,La=pa===n.bq.horizontal||pa===n.bq.horizontalOnly;!da&&!Kt||ea.isHidden()||ot++;let Ea=!1;if((da||Kt)&&P)for(const sr of o.activeReplacements){if(n.bx(sr,C,n.by.Symbol,j)||sr.min.x>ua||ua>sr.max.x||sr.min.y>Sa||Sa>sr.max.y)continue;const Fr=n.bz(ua,Sa,L.canonical,sr.footprintTileId.canonical);if(Ea=n.bA(Fr,sr.footprint),Ea)break}if(da){const sr=Ea?wr:rr(ea.text);st(o.text,Tt,Ia?wr:sr),st(o.text,Yt,La?wr:sr);const Fr=ea.text.isHidden(),{leftJustifiedTextSymbolIndex:pr,centerJustifiedTextSymbolIndex:Or,rightJustifiedTextSymbolIndex:Cr,verticalPlacedTextSymbolIndex:xr}=gt,Ur=o.text.placedSymbolArray,Ir=Fr||Ia?1:0;pr>=0&&(Ur.get(pr).hidden=Ir),Or>=0&&(Ur.get(Or).hidden=Ir),Cr>=0&&(Ur.get(Cr).hidden=Ir),xr>=0&&(Ur.get(xr).hidden=Fr||La?1:0);const dr=this.variableOffsets[Lt];dr&&this.markUsedJustification(o,dr.anchor,gt,pa);const nn=this.placedOrientations[Lt];nn&&(this.markUsedJustification(o,"left",gt,nn),this.markUsedOrientation(o,nn,gt))}if(Kt){const sr=Ea?wr:rr(ea.icon),{placedIconSymbolIndex:Fr,verticalPlacedIconSymbolIndex:pr}=gt,Or=o.icon.placedSymbolArray,Cr=ea.icon.isHidden()?1:0;Fr>=0&&(st(o.icon,aa,Ia?wr:sr),Or.get(Fr).hidden=Cr),pr>=0&&(st(o.icon,gt.numVerticalIconVertices,La?wr:sr),Or.get(pr).hidden=Cr)}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){const sr=o.collisionArrays[lt];if(sr){let Fr=new n.P(0,0),pr=!0;if(sr.textBox||sr.verticalTextBox){if(ve){const Cr=this.variableOffsets[Lt];Cr?(Fr=Sd(Cr.anchor,Cr.width,Cr.height,Cr.textOffset,Cr.textScale),Ee&&Fr._rotate(Ve?this.transform.angle:-this.transform.angle)):pr=!1}te&&(pr=!ea.clipped),sr.textBox&&$l(o.textCollisionBox.collisionVertexArray,ea.text.placed,!pr||Ia,zt,et,Fr.x,Fr.y),sr.verticalTextBox&&$l(o.textCollisionBox.collisionVertexArray,ea.text.placed,!pr||La,zt,et,Fr.x,Fr.y)}const Or=pr&&!!(!La&&sr.verticalIconBox);sr.iconBox&&$l(o.iconCollisionBox.collisionVertexArray,ea.icon.placed,Or,zt,et,gt.hasIconTextFit?Fr.x:0,gt.hasIconTextFit?Fr.y:0),sr.verticalIconBox&&$l(o.iconCollisionBox.collisionVertexArray,ea.icon.placed,!Or,zt,et,gt.hasIconTextFit?Fr.x:0,gt.hasIconTextFit?Fr.y:0)}}}if(o.fullyClipped=ot===0,o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.bucketInstanceId in this.collisionCircleArrays){const lt=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=lt.invProjMatrix,o.placementViewportMatrix=lt.viewportMatrix,o.collisionCircleArray=lt.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}}symbolFadeChange(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,c){const A=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*A>o}setStale(){this.stale=!0}}function $l(g,o,c,A,R,C,P){g.emplaceBack(o?1:0,c?1:0,C||0,P||0,A,R?1:0),g.emplaceBack(o?1:0,c?1:0,C||0,P||0,A,R?1:0),g.emplaceBack(o?1:0,c?1:0,C||0,P||0,A,R?1:0),g.emplaceBack(o?1:0,c?1:0,C||0,P||0,A,R?1:0)}const ff=Math.pow(2,25),oe=Math.pow(2,24),Ke=Math.pow(2,17),Dt=Math.pow(2,16),Wt=Math.pow(2,9),ha=Math.pow(2,8),Da=Math.pow(2,1);function rr(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;const o=g.placed?1:0,c=Math.floor(127*g.opacity);return c*ff+o*oe+c*Ke+o*Dt+c*Wt+o*ha+c*Da+o}const wr=0;class $r{constructor(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&o.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(o,c,A,R,C,P){const L=this._bucketParts;for(;this._currentTileIndex<o.length;)if(c.getBucketParts(L,R,o[this._currentTileIndex],this._sortAcrossTiles,P),this._currentTileIndex++,C())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,L.sort((j,H)=>j.sortKey-H.sortKey));this._currentPartIndex<L.length;){const j=L[this._currentPartIndex];if(c.placeLayerBucketPart(j,this._seenCrossTileIDs,A,j.symbolInstanceStart===0,P),this._currentPartIndex++,C())return!0}return!1}}class Sn{constructor(o,c,A,R,C,P,L,j,H){this.placement=new hf(o,C,P,L,j,H),this._currentPlacementIndex=c.length-1,this._forceFullPlacement=A,this._showCollisionBoxes=R,this._done=!1}isDone(){return this._done}continuePlacement(o,c,A,R,C){const P=n.q.now(),L=()=>{const j=n.q.now()-P;return!this._forceFullPlacement&&j>2};for(;this._currentPlacementIndex>=0;){const j=c[o[this._currentPlacementIndex]],H=this.placement.collisionIndex.transform.zoom;if(j.type==="symbol"&&(!j.minzoom||j.minzoom<=H)&&(!j.maxzoom||j.maxzoom>H)){const W=j,te=W.layout.get("symbol-z-elevate"),ae=W.layout.get("symbol-sort-key").constantOr(1)!==void 0,ce=W.layout.get("symbol-z-order"),Te=ce==="viewport-y"||ce==="auto"&&!(ce!=="viewport-y"&&ae),ve=W.layout.get("text-allow-overlap")||W.layout.get("icon-allow-overlap")||W.layout.get("text-ignore-placement")||W.layout.get("icon-ignore-placement"),Ee=Te&&ve,Ve=this._inProgressLayer=this._inProgressLayer||new $r(W),Be=n.C(j.source,j.scope);if(Ve.continuePlacement(te||Ee?R[Be]:A[Be],this.placement,this._showCollisionBoxes,j,L,C))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}const Nn=512/n.ai/2;class mi{constructor(o,c,A){this.tileID=o,this.bucketInstanceId=A,this.index=new n.bE(c.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const R=o.canonical.x*n.ai,C=o.canonical.y*n.ai;for(let P=0;P<c.length;P++){const{key:L,crossTileID:j,tileAnchorX:H,tileAnchorY:W}=c.get(P),te=Math.floor((R+H)*Nn),ae=Math.floor((C+W)*Nn);this.index.add(te,ae),this.keys.push(L),this.crossTileIDs.push(j)}this.index.finish()}findMatches(o,c,A){const R=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z),C=Nn/Math.pow(2,c.canonical.z-this.tileID.canonical.z),P=c.canonical.x*n.ai,L=c.canonical.y*n.ai;for(let j=0;j<o.length;j++){const H=o.get(j);if(H.crossTileID)continue;const{key:W,tileAnchorX:te,tileAnchorY:ae}=H,ce=Math.floor((P+te)*C),Te=Math.floor((L+ae)*C),ve=this.index.range(ce-R,Te-R,ce+R,Te+R);for(const Ee of ve){const Ve=this.crossTileIDs[Ee];if(this.keys[Ee]===W&&!A.has(Ve)){A.add(Ve),H.crossTileID=Ve;break}}}}}class Ss{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Cs{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){const c=Math.round((o-this.lng)/360);if(c!==0)for(const A in this.indexes){const R=this.indexes[A],C={};for(const P in R){const L=R[P];L.tileID=L.tileID.unwrapTo(L.tileID.wrap+c),C[L.tileID.key]=L}this.indexes[A]=C}this.lng=o}addBucket(o,c,A){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let C=0;C<c.symbolInstances.length;C++)c.symbolInstances.get(C).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]=new Set);const R=this.usedCrossTileIDs[o.overscaledZ];for(const C in this.indexes){const P=this.indexes[C];if(Number(C)>o.overscaledZ)for(const L in P){const j=P[L];j.tileID.isChildOf(o)&&j.findMatches(c.symbolInstances,o,R)}else{const L=P[o.scaledTo(Number(C)).key];L&&L.findMatches(c.symbolInstances,o,R)}}for(let C=0;C<c.symbolInstances.length;C++){const P=c.symbolInstances.get(C);P.crossTileID||(P.crossTileID=A.generate(),R.add(P.crossTileID))}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new mi(o,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(o,c){for(const A of c.crossTileIDs)this.usedCrossTileIDs[o].delete(A)}removeStaleBuckets(o){let c=!1;for(const A in this.indexes){const R=this.indexes[A];for(const C in R)o[R[C].bucketInstanceId]||(this.removeBucketCrossTileIDs(A,R[C]),delete R[C],c=!0)}return c}}class Js{constructor(){this.layerIndexes={},this.crossTileIDs=new Ss,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,c,A,R){let C=this.layerIndexes[o.fqid];C===void 0&&(C=this.layerIndexes[o.fqid]=new Cs);let P=!1;const L={};R.name!=="globe"&&C.handleWrapJump(A);for(const j of c){const H=j.getBucket(o);H&&o.fqid===H.layerIds[0]&&(H.bucketInstanceId||(H.bucketInstanceId=++this.maxBucketInstanceId),C.addBucket(j.tileID,H,this.crossTileIDs)&&(P=!0),L[H.bucketInstanceId]=!0)}return C.removeStaleBuckets(L)&&(P=!0),P}pruneUnusedLayers(o){const c={};o.forEach(A=>{c[A]=!0});for(const A in this.layerIndexes)c[A]||delete this.layerIndexes[A]}}const es=771;class br{constructor(o,c,A,R){this.blendFunction=o,this.blendColor=c,this.mask=A,this.blendEquation=R}}br.Replace=[1,0,1,0],br.disabled=new br(br.Replace,n.al.transparent,[!1,!1,!1,!1]),br.unblended=new br(br.Replace,n.al.transparent,[!0,!0,!0,!0]),br.alphaBlended=new br([1,es,1,es],n.al.transparent,[!0,!0,!0,!0]),br.alphaBlendedNonPremultiplied=new br([770,es,770,es],n.al.transparent,[!0,!0,!0,!0]),br.multiply=new br([774,0,774,0],n.al.transparent,[!0,!0,!0,!0]);class ir{constructor(o,c,A){this.func=o,this.mask=c,this.range=A}}ir.ReadOnly=!1,ir.ReadWrite=!0,ir.disabled=new ir(519,ir.ReadOnly,[0,1]);const fl=7680;class Rr{constructor(o,c,A,R,C,P){this.test=o,this.ref=c,this.mask=A,this.fail=R,this.depthFail=C,this.pass=P}}Rr.disabled=new Rr({func:519,mask:0},0,0,fl,fl,fl);const yu=1029,Kl=2305;class vr{constructor(o,c,A){this.enable=o,this.mode=c,this.frontFace=A}}function sh(g,o){const c=n.bG(g,3);n.ad.mat4.fromQuat(g,o),n.bI(g,3,c)}function Wl(g,o){const c=n.ad.quat.identity([]);return n.ad.quat.rotateZ(c,c,-o),n.ad.quat.rotateX(c,c,-g),c}function uc(g,o){const c=[g[0],g[1],0],A=[o[0],o[1],0];if(n.ad.vec3.length(c)>=1e-15){const P=n.ad.vec3.normalize([],c);n.ad.vec3.scale(A,P,n.ad.vec3.dot(A,P)),o[0]=A[0],o[1]=A[1]}const R=n.ad.vec3.cross([],o,g);if(n.ad.vec3.len(R)<1e-15)return null;const C=Math.atan2(-R[1],R[0]);return Wl(Math.atan2(Math.sqrt(g[0]*g[0]+g[1]*g[1]),-g[2]),C)}vr.disabled=new vr(!1,yu,Kl),vr.backCCW=new vr(!0,yu,Kl),vr.backCW=new vr(!0,yu,2304),vr.frontCW=new vr(!0,1028,2304),vr.frontCCW=new vr(!0,1028,Kl);class Cd{constructor(o,c){this.position=o,this.orientation=c}get position(){return this._position}set position(o){if(o){const c=o instanceof n.ac?o:new n.ac(o[0],o[1],o[2]);this._renderWorldCopies&&(c.x=n.bF(c.x,0,1)),this._position=c}else this._position=null}lookAtPoint(o,c){if(this.orientation=null,!this.position)return;const A=this.position,R=this._elevation?this._elevation.getAtPointOrZero(n.ac.fromLngLat(o)):0,C=n.ac.fromLngLat(o,R),P=[C.x-A.x,C.y-A.y,C.z-A.z];c||(c=[0,0,1]),c[2]=Math.abs(c[2]),this.orientation=uc(P,c)}setPitchBearing(o,c){this.orientation=Wl(n.ak(o),n.ak(-c))}}class bs{constructor(o,c){this._transform=n.ad.mat4.identity([]),this.orientation=c,this.position=o}get mercatorPosition(){const o=this.position;return new n.ac(o[0],o[1],o[2])}get position(){const o=n.bG(this._transform,3);return[o[0],o[1],o[2]]}set position(o){var c;o&&n.bI(this._transform,3,[(c=o)[0],c[1],c[2],1])}get orientation(){return this._orientation}set orientation(o){this._orientation=o||n.ad.quat.identity([]),o&&sh(this._transform,this._orientation)}getPitchBearing(){const o=this.forward(),c=this.right();return{bearing:Math.atan2(-c[1],c[0]),pitch:Math.atan2(Math.sqrt(o[0]*o[0]+o[1]*o[1]),-o[2])}}setPitchBearing(o,c){this._orientation=Wl(o,c),sh(this._transform,this._orientation)}forward(){const o=n.bG(this._transform,2);return[-o[0],-o[1],-o[2]]}up(){const o=n.bG(this._transform,1);return[-o[0],-o[1],-o[2]]}right(){const o=n.bG(this._transform,0);return[o[0],o[1],o[2]]}getCameraToWorld(o,c){const A=new Float64Array(16);return n.ad.mat4.invert(A,this.getWorldToCamera(o,c)),A}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(o,c,A){const R=this.position;n.ad.vec3.scale(R,R,-o);const C=new Float64Array(16);return n.ad.mat4.fromScaling(C,[A,A,A]),n.ad.mat4.translate(C,C,R),C[10]*=c,C}getWorldToCamera(o,c){const A=new Float64Array(16),R=new Float64Array(4),C=this.position;return n.ad.quat.conjugate(R,this._orientation),n.ad.vec3.scale(C,C,-o),n.ad.mat4.fromQuat(A,R),n.ad.mat4.translate(A,A,C),A[1]*=-1,A[5]*=-1,A[9]*=-1,A[13]*=-1,A[8]*=c,A[9]*=c,A[10]*=c,A[11]*=c,A}getCameraToClipPerspective(o,c,A,R){const C=new Float64Array(16);return n.ad.mat4.perspective(C,o,c,A,R),C}getCameraToClipOrthographic(o,c,A,R,C,P){const L=new Float64Array(16);return n.ad.mat4.ortho(L,o,c,A,R,C,P),L}getDistanceToElevation(o,c=!1){const A=o===0?0:n.bH(o,c?n.aT(this.position[1]):this.position[1]),R=this.forward();return(A-this.position[2])/R[2]}clone(){return new bs([...this.position],[...this.orientation])}}const Ai={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,LUT:10,ShadowMap0:11};class cc{constructor(o=0,c=0,A=0,R=0){if(isNaN(o)||o<0||isNaN(c)||c<0||isNaN(A)||A<0||isNaN(R)||R<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=c,this.left=A,this.right=R}interpolate(o,c,A){return c.top!=null&&o.top!=null&&(this.top=n.ah(o.top,c.top,A)),c.bottom!=null&&o.bottom!=null&&(this.bottom=n.ah(o.bottom,c.bottom,A)),c.left!=null&&o.left!=null&&(this.left=n.ah(o.left,c.left,A)),c.right!=null&&o.right!=null&&(this.right=n.ah(o.right,c.right,A)),this}getCenter(o,c){const A=n.ay((this.left+o-this.right)/2,0,o),R=n.ay((this.top+c-this.bottom)/2,0,c);return new n.P(A,R)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new cc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Na=15;class bd{constructor(o,c,A,R,C,P,L){this.tileSize=512,this._renderWorldCopies=C===void 0||C,this._minZoom=o||0,this._maxZoom=c||22,this._minPitch=A??0,this._maxPitch=R??60,this.setProjection(P),this.setMaxBounds(L),this.width=0,this.height=0,this._center=new n.bO(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new cc,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new bs,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1,this._allowWorldUnderZoom=!1}clone(){const o=new bd(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection(),this.maxBounds);return o._elevation=this._elevation,o._centerAltitude=this._centerAltitude,o._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,o.tileSize=this.tileSize,o.mercatorFromTransition=this.mercatorFromTransition,o.width=this.width,o.height=this.height,o.cameraElevationReference=this.cameraElevationReference,o._center=this._center,o._setZoom(this.zoom),o._seaLevelZoom=this._seaLevelZoom,o.angle=this.angle,o._fov=this._fov,o._pitch=this._pitch,o._nearZ=this._nearZ,o._farZ=this._farZ,o._averageElevation=this._averageElevation,o._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,o._unmodified=this._unmodified,o._edgeInsets=this._edgeInsets.clone(),o._camera=this._camera.clone(),o._calcMatrices(),o.freezeTileCoverage=this.freezeTileCoverage,o.frustumCorners=this.frustumCorners,o._allowWorldUnderZoom=this._allowWorldUnderZoom,o}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<Na}get elevation(){return this._elevation}set elevation(o){this._elevation!==o&&(this._elevation=o,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(o,c=!1){const A=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||A)&&this._updateCameraOnTerrain(),(o||A)&&this._constrainCamera(c),this._calcMatrices()}getProjection(){return n.aA(this.projection,["name","center","parallels"])}setProjection(o){this.projectionOptions=o||{name:"mercator"};const c=this.projection?this.getProjection():void 0;this.projection=n.bP(this.projectionOptions);const A=this.getProjection(),R=!n.bn(c,A);return R&&this._calcMatrices(),this.mercatorFromTransition=!1,R}setOrthographicProjectionAtLowPitch(o){return this._orthographicProjectionAtLowPitch!==o&&(this._orthographicProjectionAtLowPitch=o,this._calcMatrices(),!0)}setMercatorFromTransition(){const o=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=n.bP({name:"mercator"});const c=o!==this.projection.name;return c&&this._calcMatrices(),c}get minZoom(){return this._minZoom}set minZoom(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))}get maxZoom(){return this._maxZoom}set maxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))}get minPitch(){return this._minPitch}set minPitch(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))}get maxPitch(){return this._maxPitch}set maxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const o=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(o))}get cameraWorldSize(){const o=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(o))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return n.bH(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new n.P(this.width,this.height)}get bearing(){return n.bF(this.rotation,-180,180)}set bearing(o){this.rotation=o}get rotation(){return-this.angle/Math.PI*180}set rotation(o){const c=-o*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=n.ad.mat2.create(),n.ad.mat2.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(o){const c=n.ay(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}set fov(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=n.ak(o),this._calcMatrices())}get fovX(){return this._fov}get fovY(){const o=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/o)}get averageElevation(){return this._averageElevation}set averageElevation(o){this._averageElevation=o,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(o){const c=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._setZoom(c),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(o){this._zoom=o,this.scale=this.zoomScale(o),this.tileZoom=Math.floor(o),this.zoomFraction=o-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(o){this._tileCoverLift!==o&&(this._tileCoverLift=o)}_updateCameraOnTerrain(){const o=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,c=this.elevation&&o===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||o===Number.NEGATIVE_INFINITY&&(!c||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const A=this._elevation;c||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&A.exaggeration()&&this._centerAltitudeValidForExaggeration!==A.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*A.exaggeration(),this._centerAltitudeValidForExaggeration=A.exaggeration()):(this._centerAltitude=o||0,this._centerAltitudeValidForExaggeration=A.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const o=this._elevation,c=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],A=this.horizonLineFromTop();let R=0,C=0;for(let P=0;P<c.length;P++){const L=new n.P(c[P][0]*this.width,A+c[P][1]*(this.height-A)),j=o.pointCoordinate(L);if(!j)continue;const H=1/Math.hypot(j[0]-this._camera.position[0],j[1]-this._camera.position[1]);R+=j[3]*H,C+=H}return C===0?NaN:R/C}get center(){return this._center}set center(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const o=this._seaLevelZoom,c=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),A=this.pixelsPerMeter/this.worldSize*c,R=this._mercatorZfromZoom(o),C=this._mercatorZfromZoom(this._maxZoom),P=Math.max(R-A,C);this._setZoom(this._zoomFromMercatorZ(P))}get padding(){return this._edgeInsets.toJSON()}set padding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}computeZoomRelativeTo(o){const c=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,o.toAltitude()));let A;A=o.z<this._camera.position[2]?[c.x,c.y,c.z]:[o.x,o.y,o.z];const R=n.ad.vec3.length(n.ad.vec3.sub([],this._camera.position,A));return n.ay(this._zoomFromMercatorZ(R),this._minZoom,this._maxZoom)}setFreeCameraOptions(o){if(!this.height||!o.position&&!o.orientation)return;this._updateCameraState();let c=!1;if(o.orientation&&!n.ad.quat.exactEquals(o.orientation,this._camera.orientation)&&(c=this._setCameraOrientation(o.orientation)),o.position){const A=[o.position.x,o.position.y,o.position.z];n.ad.vec3.exactEquals(A,this._camera.position)||(this._setCameraPosition(A),c=!0)}c&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const o=this._camera.position,c=new Cd;return c.position=new n.ac(o[0],o[1],o[2]),c.orientation=this._camera.orientation,c._elevation=this.elevation,c._renderWorldCopies=this.renderWorldCopies,c}_setCameraOrientation(o){if(!n.ad.quat.length(o))return!1;n.ad.quat.normalize(o,o);const c=n.ad.vec3.transformQuat([],[0,0,-1],o),A=n.ad.vec3.transformQuat([],[0,-1,0],o);if(A[2]<0)return!1;const R=uc(c,A);return!!R&&(this._camera.orientation=R,!0)}_setCameraPosition(o){const c=this.zoomScale(this.minZoom)*this.tileSize,A=this.zoomScale(this.maxZoom)*this.tileSize,R=this.cameraToCenterDistance;o[2]=n.ay(o[2],R/A,R/c),this._camera.position=o}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,c,A){this._unmodified=!1,this._edgeInsets.interpolate(o,c,A),this._constrain(),this._calcMatrices()}coveringZoomLevel(o){const c=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(o){const c=[new n.bQ(0,o)];if(this.renderWorldCopies){const A=this.pointCoordinate(new n.P(0,0)),R=this.pointCoordinate(new n.P(this.width,0)),C=this.pointCoordinate(new n.P(this.width,this.height)),P=this.pointCoordinate(new n.P(0,this.height)),L=Math.floor(Math.min(A.x,R.x,C.x,P.x)),j=Math.floor(Math.max(A.x,R.x,C.x,P.x)),H=1;for(let W=L-H;W<=j+H;W++)W!==0&&c.push(new n.bQ(W,o))}return c}isLODDisabled(o){return(!o||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCover(o,c,A){let R=[];const C=A!==void 0,P=!C;if(P&&this.zoom<c||C&&A[0]===0&&A[1]===0)return R;const L=new Set,j=(W,te,ae,ce,Te)=>{const ve=n.c5(te,W,ae,ce,Te);L.has(ve)||(R.push(new n.aH(W,te,ae,ce,Te)),L.add(ve))};for(let W=0;W<o.length;W++){const te=o[W];if(P&&te.canonical.z!==c)continue;const ae=te.canonical,ce=te.overscaledZ,Te=te.wrap,ve=1<<ae.z,Ee=ae.x+1<ve,Ve=ae.x>0,Be=ae.y+1<ve,et=ae.y>0,Xe=te.wrap-(Ve?0:1),ht=te.wrap+(Ee?0:1),st=Ve?ae.x-1:ve-1,ot=Ee?ae.x+1:0;if(C)A[0]<0?(j(ce,ht,ae.z,ot,ae.y),A[1]<0&&Be&&(j(ce,Te,ae.z,ae.x,ae.y+1),j(ce,ht,ae.z,ot,ae.y+1)),A[1]>0&&et&&(j(ce,Te,ae.z,ae.x,ae.y-1),j(ce,ht,ae.z,ot,ae.y-1))):A[0]>0?(j(ce,Xe,ae.z,st,ae.y),A[1]<0&&Be&&(j(ce,Te,ae.z,ae.x,ae.y+1),j(ce,Xe,ae.z,st,ae.y+1)),A[1]>0&&et&&(j(ce,Te,ae.z,ae.x,ae.y-1),j(ce,Xe,ae.z,st,ae.y-1))):A[1]<0&&Be?j(ce,Te,ae.z,ae.x,ae.y+1):et&&j(ce,Te,ae.z,ae.x,ae.y-1);else{const lt=te.visibleQuadrants;1&lt&&(j(ce,Xe,ae.z,st,ae.y),et&&(j(ce,Te,ae.z,ae.x,ae.y-1),j(ce,Xe,ae.z,st,ae.y-1))),2&lt&&(j(ce,ht,ae.z,ot,ae.y),et&&(j(ce,Te,ae.z,ae.x,ae.y-1),j(ce,ht,ae.z,ot,ae.y-1))),4&lt&&(j(ce,Xe,ae.z,st,ae.y),Be&&(j(ce,Te,ae.z,ae.x,ae.y+1),j(ce,Xe,ae.z,st,ae.y+1))),8&lt&&(j(ce,ht,ae.z,ot,ae.y),Be&&(j(ce,Te,ae.z,ae.x,ae.y+1),j(ce,ht,ae.z,ot,ae.y+1)))}}const H=[];for(const W of R)R.some(te=>W.isChildOf(te))||H.push(W);if(R=H.filter(W=>!o.some(te=>!!(W.overscaledZ<c&&te.isChildOf(W))||W.equals(te)||W.isChildOf(te))),P){const W=1<<c,te=this.projection.name==="globe"?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),ae=[W*te.x,W*te.y],ce=4,Te=ce*ce;R=R.filter(ve=>{const Ee=ve.canonical.x+.5-ae[0],Ve=ve.canonical.y+.5-ae[1];return Ee*Ee+Ve*Ve<Te})}return R}coveringTiles(o){let c=this.coveringZoomLevel(o);const A=c,R=this.elevation&&this.elevation.exaggeration(),C=R&&!o.isTerrainDEM,P=this.projection.name==="mercator";if(o.minzoom!==void 0&&c<o.minzoom)return[];o.maxzoom!==void 0&&c>o.maxzoom&&(c=o.maxzoom);const L=this.locationCoordinate(this.center),j=this.center.lat,H=1<<c,W=[H*L.x,H*L.y,0],te=this.projection.name==="globe",ae=!te,ce=n.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,c,ae),Te=te?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),ve=H*n.bH(1,this.center.lat),Ee=this._camera.position[2]/n.bH(1,this.center.lat),Ve=[H*Te.x,H*Te.y,Ee*(ae?1:ve)],Be=te||R,et=this.cameraToCenterDistance/o.tileSize*(o.roundZoom?1:.502),Xe=this.isLODDisabled(!0)?c:0;let ht;if(this._elevation&&o.isTerrainDEM)ht=1e4*this._elevation.exaggeration();else if(this._elevation){const zt=this._elevation.getMinMaxForVisibleTiles();ht=zt?zt.max:this._centerAltitude}else ht=this._centerAltitude;const st=o.isTerrainDEM?-ht:this._elevation?this._elevation.getMinElevationBelowMSL():0,ot=this.projection.isReprojectedInTileSpace?n.bS(this):1,lt=zt=>{const ea=new n.ac(zt.x+25e-6,zt.y,zt.z),da=new n.ac(zt.x,zt.y+25e-6,zt.z),Kt=zt.toLngLat(),pa=ea.toLngLat(),Ia=da.toLngLat(),La=this.locationCoordinate(Kt),Ea=this.locationCoordinate(pa),sr=this.locationCoordinate(Ia),Fr=Math.hypot(Ea.x-La.x,Ea.y-La.y),pr=Math.hypot(sr.x-La.x,sr.y-La.y);return Math.sqrt(Fr*pr)*ot/25e-6},gt=zt=>{const sa=ht,ea=st;return{aabb:n.bV(this,H,0,0,0,zt,ea,sa,this.projection),zoom:0,x:0,y:0,minZ:ea,maxZ:sa,wrap:zt,fullyVisible:!1}},Tt=[];let Yt=[];const Lt=c,aa=o.reparseOverscaled?A:c,ua=(Ee-this._centerAltitude)*ve,Sa=zt=>{if(!this._elevation||!zt.tileID||!P)return;const sa=this._elevation.getMinMaxForTile(zt.tileID),ea=zt.aabb;sa?(ea.min[2]=sa.min,ea.max[2]=sa.max,ea.center[2]=(ea.min[2]+ea.max[2])/2):(zt.shouldSplit=ia(zt),zt.shouldSplit||(ea.min[2]=ea.max[2]=ea.center[2]=this._centerAltitude))},It=(zt,sa)=>{if(.707*sa<zt)return 1;const ea=sa/zt;return ea/(1.4144271570014144+(Math.pow(1.1,ea-1.4144271570014144+1)-1)/(1.1-1)-1)},ia=zt=>{if(zt.zoom<Xe)return!0;if(zt.zoom===Lt)return!1;if(zt.shouldSplit!=null)return zt.shouldSplit;const sa=zt.aabb.distanceX(Ve),ea=zt.aabb.distanceY(Ve);let da=ua,Kt=1;if(te){da=zt.aabb.distanceZ(Ve);const pr=Math.pow(2,zt.zoom),Or=n.aT((zt.y+1)/pr),Cr=n.aT(zt.y/pr),xr=Math.min(Math.max(j,Or),Cr),Ur=n.ca(xr)/n.ca(j);if(Kt=xr===j?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Ur/this._mercatorScaleRatio),this.zoom<=n.c6&&zt.zoom===Lt-1&&Ur>=.9)return!0}else if(C&&(da=zt.aabb.distanceZ(Ve)*ve),this.projection.isReprojectedInTileSpace&&A<=5){const pr=Math.pow(2,zt.zoom),Or=lt(new n.ac((zt.x+.5)/pr,(zt.y+.5)/pr));Kt=Or>.85?1:Or}if(!P){const pr=Math.sqrt(sa*sa+ea*ea+da*da);let Or=(1<<Lt-zt.zoom)*et*Kt;return Or*=It(Math.max(da,ua),pr),pr<Or}let pa=Number.MAX_VALUE,Ia=0;const La=zt.aabb.getCorners(),Ea=[];for(const pr of La){n.ad.vec3.sub(Ea,pr,Ve),te||(C?Ea[2]*=ve:Ea[2]=ua);const Or=n.ad.vec3.dot(Ea,this._camera.forward());Or<pa&&(pa=Or,Ia=Math.abs(Ea[2]))}let sr=(1<<Lt-zt.zoom)*et*Kt;if(sr*=It(Math.max(Ia,ua),pa),pa<sr)return!0;const Fr=zt.aabb.closestPoint(W);return Fr[0]===W[0]&&Fr[1]===W[1]};if(this.renderWorldCopies)for(let zt=1;zt<=3;zt++)Tt.push(gt(-zt)),Tt.push(gt(zt));for(Tt.push(gt(0));Tt.length>0;){const zt=Tt.pop(),sa=zt.x,ea=zt.y;let da=zt.fullyVisible;const Kt=()=>this.projection.name==="globe"&&(zt.y===0||zt.y===(1<<zt.zoom)-1);if(!da){let pa=Be?zt.aabb.intersects(ce):zt.aabb.intersectsFlat(ce);if(pa===0&&Kt()){const Ia=new n.bT(zt.zoom,sa,ea);pa=n.bU(this,H,Ia,!0).intersects(ce)}if(pa===0)continue;da=pa===2}if(zt.zoom!==Lt&&ia(zt))for(let pa=0;pa<4;pa++){const Ia=(sa<<1)+pa%2,La=(ea<<1)+(pa>>1),Ea={aabb:P?zt.aabb.quadrant(pa):n.bV(this,H,zt.zoom+1,Ia,La,zt.wrap,zt.minZ,zt.maxZ,this.projection),zoom:zt.zoom+1,x:Ia,y:La,wrap:zt.wrap,fullyVisible:da,tileID:void 0,shouldSplit:void 0,minZ:zt.minZ,maxZ:zt.maxZ};C&&!te&&(Ea.tileID=new n.aH(zt.zoom+1===Lt?aa:zt.zoom+1,zt.wrap,zt.zoom+1,Ia,La),Sa(Ea)),Tt.push(Ea)}else{const pa=zt.zoom===Lt?aa:zt.zoom;if(o.minzoom&&o.minzoom>pa)continue;let Ia=0;if(!da){let Fr=Be?zt.aabb.intersectsPrecise(ce):zt.aabb.intersectsPreciseFlat(ce);if(Fr===0&&Kt()){const pr=new n.bT(zt.zoom,sa,ea);Fr=n.bU(this,H,pr,!0).intersectsPrecise(ce)}if(Fr===0)continue;if(o.calculateQuadrantVisibility)if(ce.containsPoint(zt.aabb.center))Ia=15;else for(let pr=0;pr<4;pr++)zt.aabb.quadrant(pr).intersects(ce)!==0&&(Ia|=1<<pr)}const La=W[0]-(.5+sa+(zt.wrap<<zt.zoom))*(1<<c-zt.zoom),Ea=W[1]-.5-ea,sr=zt.tileID?zt.tileID:new n.aH(pa,zt.wrap,zt.zoom,sa,ea);o.calculateQuadrantVisibility&&(sr.visibleQuadrants=Ia),Yt.push({tileID:sr,distanceSq:La*La+Ea*Ea})}}if(this.fogCullDistSq){const zt=this.fogCullDistSq,sa=this.horizonLineFromTop();Yt=Yt.filter(ea=>{const da=[0,0,0,1],Kt=[n.ai,n.ai,0,1],pa=this.calculateFogTileMatrix(ea.tileID.toUnwrapped());n.ad.vec4.transformMat4(da,da,pa),n.ad.vec4.transformMat4(Kt,Kt,pa);const Ia=n.ad.vec4.min([],da,Kt),La=n.ad.vec4.max([],da,Kt),Ea=n.bW(Ia,La);if(Ea===0)return!0;let sr=!1;const Fr=this._elevation;if(Fr&&Ea>zt&&sa!==0){const pr=this.calculateProjMatrix(ea.tileID.toUnwrapped());let Or;o.isTerrainDEM||(Or=Fr.getMinMaxForTile(ea.tileID)),Or||(Or={min:st,max:ht});const Cr=n.c7(this.rotation),xr=[Cr[0]*n.ai,Cr[1]*n.ai,Or.max];n.ad.vec3.transformMat4(xr,xr,pr),sr=(1-xr[1])*this.height*.5<sa}return Ea<zt||sr})}return Yt.sort((zt,sa)=>zt.distanceSq-sa.distanceSq).map(zt=>zt.tileID)}resize(o,c){this.width=o,this.height=c,this.pixelsToGLUnits=[2/o,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(o){return Math.pow(2,o)}scaleZoom(o){return Math.log(o)/Math.LN2}project(o){const c=n.ay(o.lat,-n.bX,n.bX),A=this.projection.project(o.lng,c);return new n.P(A.x*this.worldSize,A.y*this.worldSize)}unproject(o){return this.projection.unproject(o.x/this.worldSize,o.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/n.bH(1,this.center.lat)/this.worldSize}setLocationAtPoint(o,c){let A,R;const C=this.centerPoint;if(this.projection.name==="globe"){const L=this.worldSize;A=(c.x-C.x)/L,R=(c.y-C.y)/L}else{const L=this.pointCoordinate(c),j=this.pointCoordinate(C);A=L.x-j.x,R=L.y-j.y}const P=this.locationCoordinate(o);this.setLocation(new n.ac(P.x-A,P.y-R))}setLocation(o){this.center=this.coordinateLocation(o),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(o,c){return this.projection.locationPoint(this,o,c)}locationPoint3D(o,c){return this.projection.locationPoint(this,o,c,!0)}pointLocation(o){return this.coordinateLocation(this.pointCoordinate(o))}pointLocation3D(o,c){return this.coordinateLocation(this.pointCoordinate3D(o,c))}locationCoordinate(o,c){const A=c?n.bH(c,o.lat):void 0,R=this.projection.project(o.lng,o.lat);return new n.ac(R.x,R.y,A)}coordinateLocation(o){return this.projection.unproject(o.x,o.y)}pointRayIntersection(o,c){const A=c??this._centerAltitude,R=[o.x,o.y,0,1],C=[o.x,o.y,1,1];n.ad.vec4.transformMat4(R,R,this.pixelMatrixInverse),n.ad.vec4.transformMat4(C,C,this.pixelMatrixInverse);const P=C[3];n.ad.vec4.scale(R,R,1/R[3]),n.ad.vec4.scale(C,C,1/P);const L=R[2],j=C[2];return{p0:R,p1:C,t:L===j?0:(A-L)/(j-L)}}screenPointToMercatorRay(o){const c=[o.x,o.y,0,1],A=[o.x,o.y,1,1];return n.ad.vec4.transformMat4(c,c,this.pixelMatrixInverse),n.ad.vec4.transformMat4(A,A,this.pixelMatrixInverse),n.ad.vec4.scale(c,c,1/c[3]),n.ad.vec4.scale(A,A,1/A[3]),c[2]=n.bH(c[2],this._center.lat)*this.worldSize,A[2]=n.bH(A[2],this._center.lat)*this.worldSize,n.ad.vec4.scale(c,c,1/this.worldSize),n.ad.vec4.scale(A,A,1/this.worldSize),new n.as([c[0],c[1],c[2]],n.ad.vec3.normalize([],n.ad.vec3.sub([],A,c)))}rayIntersectionCoordinate(o){const{p0:c,p1:A,t:R}=o,C=n.bH(c[2],this._center.lat),P=n.bH(A[2],this._center.lat);return new n.ac(n.ah(c[0],A[0],R)/this.worldSize,n.ah(c[1],A[1],R)/this.worldSize,n.ah(C,P,R))}pointCoordinate(o,c=this._centerAltitude){return this.projection.pointCoordinate(this,o.x,o.y,c)}pointCoordinate3D(o,c){if(!this.elevation)return this.pointCoordinate(o,c);let A=this.projection.pointCoordinate3D(this,o.x,o.y);if(A)return new n.ac(A[0],A[1],A[2]);let R=0,C=this.horizonLineFromTop();if(o.y>C)return this.pointCoordinate(o,c);const P=.02*C,L=o.clone();for(let j=0;j<10&&C-R>P;j++){L.y=n.ah(R,C,.66);const H=this.projection.pointCoordinate3D(this,L.x,L.y);H?(C=L.y,A=H):R=L.y}return A?new n.ac(A[0],A[1],A[2]):this.pointCoordinate(o)}isPointAboveHorizon(o){return this.projection.isPointAboveHorizon(this,o)}isPointOnSurface(o){if(o.y<0||o.y>this.height||o.x<0||o.x>this.width)return!1;if(this.elevation||this.zoom>=n.bY)return!this.isPointAboveHorizon(o);const c=this.pointCoordinate(o);return c.y>=0&&c.y<=1}_coordinatePoint(o,c){const A=c&&this.elevation?this.elevation.getAtPointOrZero(o,this._centerAltitude):this._centerAltitude,R=[o.x*this.worldSize,o.y*this.worldSize,A+o.toAltitude(),1];return n.ad.vec4.transformMat4(R,R,this.pixelMatrix),R[3]>0?new n.P(R[0]/R[3],R[1]/R[3]):new n.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:o,left:c}=this._edgeInsets,A=this.height-this._edgeInsets.bottom,R=this.width-this._edgeInsets.right,C=this.pointLocation3D(new n.P(c,o)),P=this.pointLocation3D(new n.P(R,o)),L=this.pointLocation3D(new n.P(R,A)),j=this.pointLocation3D(new n.P(c,A));let H=Math.min(C.lng,P.lng,L.lng,j.lng),W=Math.max(C.lng,P.lng,L.lng,j.lng),te=Math.min(C.lat,P.lat,L.lat,j.lat),ae=Math.max(C.lat,P.lat,L.lat,j.lat);const ce=Math.pow(2,-this.zoom)/16*270,Te=this.projection.name==="globe"?1:4,ve=(Ee,Ve,Be,et,Xe)=>{const ht=(Ee+Be)/2,st=(Ve+et)/2,ot=new n.P(ht,st),{lng:lt,lat:gt}=this.pointLocation3D(ot),Tt=Math.max(0,H-lt,te-gt,lt-W,gt-ae);H=Math.min(H,lt),W=Math.max(W,lt),te=Math.min(te,gt),ae=Math.max(ae,gt),(Xe<Te||Tt>ce)&&(ve(Ee,Ve,ht,st,Xe+1),ve(ht,st,Be,et,Xe+1))};if(ve(c,o,R,o,1),ve(R,o,R,A,1),ve(R,A,c,A,1),ve(c,A,c,o,1),this.projection.name==="globe"){const[Ee,Ve]=n.bZ(this);Ee?(ae=90,W=180,H=-180):Ve&&(te=-90,W=180,H=-180)}return new n.aB(new n.bO(H,te),new n.bO(W,ae))}_getBoundsRectangular(o,c){const{top:A,left:R}=this._edgeInsets,C=this.height-this._edgeInsets.bottom,P=this.width-this._edgeInsets.right,L=new n.P(R,A),j=new n.P(P,A),H=new n.P(P,C),W=new n.P(R,C);let te=this.pointCoordinate(L,o),ae=this.pointCoordinate(j,o);const ce=this.pointCoordinate(H,c),Te=this.pointCoordinate(W,c),ve=(Ee,Ve)=>(Ve.y-Ee.y)/(Ve.x-Ee.x);return te.y>1&&ae.y>=0?te=new n.ac((1-Te.y)/ve(Te,te)+Te.x,1):te.y<0&&ae.y<=1&&(te=new n.ac(-Te.y/ve(Te,te)+Te.x,0)),ae.y>1&&te.y>=0?ae=new n.ac((1-ce.y)/ve(ce,ae)+ce.x,1):ae.y<0&&te.y<=1&&(ae=new n.ac(-ce.y/ve(ce,ae)+ce.x,0)),new n.aB().extend(this.coordinateLocation(te)).extend(this.coordinateLocation(ae)).extend(this.coordinateLocation(Te)).extend(this.coordinateLocation(ce))}_getBoundsRectangularTerrain(){const o=this.elevation;if(!o.visibleDemTiles.length||o.isUsingMockSource())return this._getBoundsRectangular(0,0);const c=o.visibleDemTiles.reduce((A,R)=>{if(R.dem){const C=R.dem.tree;A.min=Math.min(A.min,C.minimums[0]),A.max=Math.max(A.max,C.maximums[0])}return A},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(c.min*o.exaggeration(),c.max*o.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(o=!0){const c=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,A=this.height/2-c*(1-this._horizonShift);return o?Math.max(0,A):A}getMaxBounds(){return this.maxBounds}setMaxBounds(o){this.maxBounds=o,this.minLat=-n.bX,this.maxLat=n.bX,this.minLng=-180,this.maxLng=180,o&&(this.minLat=o.getSouth(),this.maxLat=o.getNorth(),this.minLng=o.getWest(),this.maxLng=o.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=n.av(this.minLng)*this.tileSize,this.worldMaxX=n.av(this.maxLng)*this.tileSize,this.worldMinY=n.aC(this.maxLat)*this.tileSize,this.worldMaxY=n.aC(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(o,c){return this.projection.createTileMatrix(this,c,o)}calculateDistanceTileData(o){const c=o.key,A=this._distanceTileDataCache;if(A[c])return A[c];const R=o.canonical,C=1/this.height,P=this.cameraWorldSize,L=P/this.zoomScale(R.z),j=(R.x+Math.pow(2,R.z)*o.wrap)*L,H=R.y*L,W=this.point;W.x*=P/this.worldSize,W.y*=P/this.worldSize;const te=this.angle,ae=Math.sin(-te),ce=-Math.cos(-te);return A[c]={bearing:[ae,ce],center:[(W.x-j)*C,(W.y-H)*C],scale:L/n.ai*C},A[c]}calculateFogTileMatrix(o){const c=o.key,A=this._fogTileMatrixCache;if(A[c])return A[c];const R=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,o);return n.ad.mat4.multiply(R,this.worldToFogMatrix,R),A[c]=new Float32Array(R),A[c]}calculateProjMatrix(o,c=!1,A=!1){const R=o.key;let C;if(C=A?this._expandedProjMatrixCache:c?this._alignedProjMatrixCache:this._projMatrixCache,C[R])return C[R];const P=this.calculatePosMatrix(o,this.worldSize);let L;return L=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:A?this.expandedFarZProjMatrix:c?this.alignedProjMatrix:this.projMatrix,n.ad.mat4.multiply(P,L,P),C[R]=new Float32Array(P),C[R]}calculatePixelsToTileUnitsMatrix(o){const c=o.tileID.key,A=this._pixelsToTileUnitsCache;if(A[c])return A[c];const R=n.b_(o,this);return A[c]=R,A[c]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const o=1/this.worldSize,c=n.ad.mat4.fromScaling([],[o,o,o]);return n.ad.mat4.multiply(c,c,this.globeMatrix),c}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const o=this._elevation;this._updateCameraState();const c=n.bH(1,this._center.lat)*this.worldSize,A=this._computeCameraPosition(c),R=this._camera.forward(),C=n.bH(1,this._center.lat);A[2]/=C,R[2]/=C,n.ad.vec3.normalize(R,R);const P=o.raycast(A,R,o.exaggeration());if(P){const L=n.ad.vec3.scaleAndAdd([],A,R,P),j=new n.ac(L[0],L[1],n.bH(L[2],n.aT(L[1]))),H=(j.z+n.ad.vec3.length([j.x-A[0],j.y-A[1],j.z-A[2]*C]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(H),this._centerAltitude=j.toAltitude(),this._center=this.coordinateLocation(j),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(o=!1){if(!this._elevation)return;const c=this._elevation,A=n.bH(1,this._center.lat)*this.worldSize,R=this._computeCameraPosition(A),C=c.getAtPointOrZero(new n.ac(...R)),P=this.pixelsPerMeter/this.worldSize*C,L=this._minimumHeightOverTerrain(),j=R[2]-P;if(j<=L)if(j<0||o){const H=this.locationCoordinate(this._center,this._centerAltitude),W=[R[0],R[1],H.z-R[2]],te=n.ad.vec3.length(W);W[2]-=(L-j)/this._pixelsPerMercatorPixel;const ae=n.ad.vec3.length(W);if(ae===0)return;n.ad.vec3.scale(W,W,te/ae*this._pixelsPerMercatorPixel),this._camera.position=[R[0],R[1],H.z*this._pixelsPerMercatorPixel-W[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const o=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||o){const ae=this.center;return ae.lat=n.ay(ae.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!o)&&(ae.lng=n.ay(ae.lng,this.minLng,this.maxLng)),this.center=ae,void(this._constraining=!1)}const c=this._unmodified,{x:A,y:R}=this.point;let C=0,P=A,L=R;const j=this.width/2,H=this.height/2,W=this.worldMinY*this.scale,te=this.worldMaxY*this.scale;if(R-H<W&&(L=W+H),R+H>te&&(L=te-H),te-W<this.height&&(C=Math.max(C,this.height/(te-W)),L=(te+W)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const ae=this.worldMinX*this.scale,ce=this.worldMaxX*this.scale,Te=this.worldSize/2-(ae+ce)/2;P=(A+Te+this.worldSize)%this.worldSize-Te,P-j<ae&&(P=ae+j),P+j>ce&&(P=ce-j),ce-ae<this.width&&(C=Math.max(C,this.width/(ce-ae)),P=(ce+ae)/2)}P===A&&L===R||this._allowWorldUnderZoom||(this.center=this.unproject(new n.P(P,L))),C&&!this._allowWorldUnderZoom&&(this.zoom+=this.scaleZoom(C)),this._constrainCamera(),this._unmodified=c,this._constraining=!1}_minZoomForBounds(){let o=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(o=Math.max(o,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),o}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const o=this.centerOffset,c=this.projection.name==="globe",A=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=n.bH(1,this.center.lat)/n.bH(1,n.c8));const R=n.b$(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,R),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const C=this.projection.zAxisUnit==="meters"?A:1,P=this._camera.getWorldToCamera(this.worldSize,C);let L;const j=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(j[8]=2*-o.x/this.width,j[9]=2*o.y/this.height,this.isOrthographic){let gt=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),Tt=gt*this.aspect,Yt=-Tt,Lt=-gt;Tt-=o.x,Yt-=o.x,gt+=o.y,Lt+=o.y,L=this._camera.getCameraToClipOrthographic(Yt,Tt,Lt,gt,this._nearZ,this._farZ),((aa,ua,Sa,It)=>{for(let ia=0;ia<16;ia++)aa[ia]=n.ah(ua[ia],Sa[ia],It)})(L,L,j,n.c9(this.pitch>=Na?1:this.pitch/Na))}else L=j;const H=n.ad.mat4.mul([],j,P);let W=n.ad.mat4.mul([],L,P);if(this.projection.isReprojectedInTileSpace){const gt=this.locationCoordinate(this.center),Tt=n.ad.mat4.identity([]);n.ad.mat4.translate(Tt,Tt,[gt.x*this.worldSize,gt.y*this.worldSize,0]),n.ad.mat4.multiply(Tt,Tt,n.c0(this)),n.ad.mat4.translate(Tt,Tt,[-gt.x*this.worldSize,-gt.y*this.worldSize,0]),n.ad.mat4.multiply(W,W,Tt),n.ad.mat4.multiply(H,H,Tt),this.inverseAdjustmentMatrix=n.c1(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=n.ad.mat4.scale([],W,[this.worldSize,this.worldSize,this.worldSize/C,1]),this.projMatrix=W,this.invProjMatrix=n.ad.mat4.invert(new Float64Array(16),this.projMatrix),c){const gt=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);gt[8]=2*-o.x/this.width,gt[9]=2*o.y/this.height,this.expandedFarZProjMatrix=n.ad.mat4.mul([],gt,P)}else this.expandedFarZProjMatrix=this.projMatrix;const te=n.ad.mat4.invert([],L);this.frustumCorners=n.c2.fromInvProjectionMatrix(te,this.horizonLineFromTop(),this.height),this.cameraFrustum=n.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!c);const ae=new Float32Array(16);n.ad.mat4.identity(ae),n.ad.mat4.scale(ae,ae,[1,-1,1]),n.ad.mat4.rotateX(ae,ae,this._pitch),n.ad.mat4.rotateZ(ae,ae,this.angle);const ce=n.ad.mat4.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=n.ad.mat4.clone(ce);const Te=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;ce[8]=2*-o.x/this.width,ce[9]=2*(o.y+Te)/this.height,this.skyboxMatrix=n.ad.mat4.multiply(ae,ce,ae);const ve=this.point,Ee=ve.x,Ve=ve.y,Be=this.width%2/2,et=this.height%2/2,Xe=Math.cos(this.angle),ht=Math.sin(this.angle),st=Ee-Math.round(Ee)+Xe*Be+ht*et,ot=Ve-Math.round(Ve)+Xe*et+ht*Be,lt=new Float64Array(W);if(n.ad.mat4.translate(lt,lt,[st>.5?st-1:st,ot>.5?ot-1:ot,0]),this.alignedProjMatrix=lt,W=n.ad.mat4.create(),n.ad.mat4.scale(W,W,[this.width/2,-this.height/2,1]),n.ad.mat4.translate(W,W,[1,-1,0]),this.labelPlaneMatrix=W,W=n.ad.mat4.create(),n.ad.mat4.scale(W,W,[1,-1,1]),n.ad.mat4.translate(W,W,[-1,-1,0]),n.ad.mat4.scale(W,W,[2/this.width,2/this.height,1]),this.glCoordMatrix=W,this.pixelMatrix=n.ad.mat4.multiply(new Float64Array(16),this.labelPlaneMatrix,H),this._calcFogMatrices(),this._distanceTileDataCache={},W=n.ad.mat4.invert(new Float64Array(16),this.pixelMatrix),!W)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=W,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=n.c3(this);const gt=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=n.ad.vec3.transformMat4(gt,gt,P),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=W;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const o=this.cameraWorldSizeForFog,c=this.cameraPixelsPerMeter,A=this._camera.position,R=1/this.height/this._pixelsPerMercatorPixel,C=[o,o,c];n.ad.vec3.scale(C,C,R),n.ad.vec3.scale(A,A,-1),n.ad.vec3.multiply(A,A,C);const P=n.ad.mat4.create();n.ad.mat4.translate(P,P,A),n.ad.mat4.scale(P,P,C),this.mercatorFogMatrix=P,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(o,c,R)}_computeCameraPosition(o){const c=(o=o||this.pixelsPerMeter)/this.pixelsPerMeter,A=this._camera.forward(),R=this.point,C=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*c-o/this.worldSize*this._centerAltitude;return[R.x/this.worldSize-A[0]*C,R.y/this.worldSize-A[1]*C,o/this.worldSize*this._centerAltitude-A[2]*C]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(o){const c=this._maxCameraBoundsDistance()*Math.cos(this._pitch),A=this._camera.position[2],R=o[2];let C=1;this.projection.wrap&&(this.center=this.center.wrap()),R>0&&(C=Math.min((c-A)/R,1)),this._camera.position=n.ad.vec3.scaleAndAdd([],this._camera.position,o,C),this._updateStateFromCamera()}_updateStateFromCamera(){const o=this._camera.position,c=this._camera.forward(),{pitch:A,bearing:R}=this._camera.getPitchBearing(),C=n.bH(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,P=this._mercatorZfromZoom(this._maxZoom)*Math.cos(n.ak(this._maxPitch)),L=Math.max((o[2]-C)/Math.cos(A),P),j=this._zoomFromMercatorZ(L);n.ad.vec3.scaleAndAdd(o,o,c,L),this._pitch=n.ay(A,n.ak(this.minPitch),n.ak(this.maxPitch)),this.angle=n.bF(R,-Math.PI,Math.PI),this._setZoom(n.ay(j,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new n.ac(o[0],o[1],o[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(o){return Math.pow(2,o)*this.tileSize}_mercatorZfromZoom(o){return this.cameraToCenterDistance/this._worldSizeFromZoom(o)}_minimumHeightOverTerrain(){const o=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(o)}_zoomFromMercatorZ(o){return this.scaleZoom(this.cameraToCenterDistance/(o*this.tileSize))}zoomFromMercatorZAdjusted(o){let c=0,A=n.bY,R=0,C=1/0;for(;A-c>1e-6&&A>c;){const P=c+.5*(A-c),L=this.tileSize*Math.pow(2,P),j=this.getCameraToCenterDistance(this.projection,P,L),H=this.scaleZoom(j/(o*this.tileSize)),W=Math.abs(P-H);W<C&&(C=W,R=P),P<H?c=P:A=P}return R}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(n.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(o,c){const A=Math.min(o.x,c.x),R=Math.max(o.x,c.x),C=Math.min(o.y,c.y),P=Math.max(o.y,c.y);if(C<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const L=[new n.P(A,C),new n.P(R,P),new n.P(A,P),new n.P(R,C)],j=this.renderWorldCopies?-3:0,H=this.renderWorldCopies?4:1;for(const W of L){const te=this.pointRayIntersection(W);if(te.t<0)return!0;const ae=this.rayIntersectionCoordinate(te);if(ae.x<j||ae.y<0||ae.x>H||ae.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+n.c4(this.fovAboveCenter)>88||this.anyCornerOffEdge(new n.P(0,0),new n.P(this.width,this.height))}zoomDeltaToMovement(o,c){const A=n.ad.vec3.length(n.ad.vec3.sub([],this._camera.position,o)),R=this._zoomFromMercatorZ(A)+c;return A-this._mercatorZfromZoom(R)}getCameraPoint(){if(this.projection.name==="globe"){const o=function([c,A,R],C){const P=[c,A,R,1];n.ad.vec4.transformMat4(P,P,C);const L=P[3]=Math.max(P[3],1e-6);return P[0]/=L,P[1]/=L,P[2]/=L,P}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new n.P(o[0],o[1])}{const o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new n.P(0,o))}}getCameraToCenterDistance(o,c=this.zoom,A=this.worldSize){const R=n.b$(o,c,this.width,this.height,1024),C=o.pixelSpaceConversion(this.center.lat,A,R);let P=.5/Math.tan(.5*this._fov)*this.height*C;return this.isOrthographic&&(P=n.ah(1,P,n.c9(this.pitch>=Na?1:this.pitch/Na))),P}getWorldToCameraMatrix(){const o=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&n.ad.mat4.multiply(o,o,this.globeMatrix),o}getFrustum(o){return n.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,o,this.projection.zAxisUnit==="meters")}}const qs=(g,o)=>{if(o>0&&g.terrain&&n.w("Cutoff is currently disabled on terrain"),o<=0||g.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const c=g.transform,A=Math.max(Math.abs(c._zoom-(g.minCutoffZoom-1)),1),R=c.isLODDisabled(!1)?n.ae(60,45,c.pitch):n.ae(30,15,c.pitch),C=c._farZ-c._nearZ,P=o*c.height,L=((1-(j=R))*c.cameraToCenterDistance+j*(c._farZ+P))*A;var j;return{shouldRenderCutoff:R<1,uniformValues:{u_cutoff_params:[c._nearZ,c._farZ,(L-c._nearZ)/C,(L-P-c._nearZ)/C]}}},co={cascadeCount:2,normalOffset:3,shadowMapResolution:2048};class pf{constructor(o,c){this.aabb=o,this.lastCascade=c}}class zh{add(o,c){const A=this.receivers[o.key];A!==void 0?(A.aabb.min[0]=Math.min(A.aabb.min[0],c.min[0]),A.aabb.min[1]=Math.min(A.aabb.min[1],c.min[1]),A.aabb.min[2]=Math.min(A.aabb.min[2],c.min[2]),A.aabb.max[0]=Math.max(A.aabb.max[0],c.max[0]),A.aabb.max[1]=Math.max(A.aabb.max[1],c.max[1]),A.aabb.max[2]=Math.max(A.aabb.max[2],c.max[2])):this.receivers[o.key]=new pf(c,null)}clear(){this.receivers={}}get(o){return this.receivers[o.key]}computeRequiredCascades(o,c,A){const R=n.ce.fromPoints(o.points);let C=0;for(const P in this.receivers){const L=this.receivers[P];if(!L||!R.intersectsAabb(L.aabb))continue;L.aabb.min=R.closestPoint(L.aabb.min),L.aabb.max=R.closestPoint(L.aabb.max);const j=L.aabb.getCorners();for(let H=0;H<A.length;H++){let W=!0;for(const te of j){const ae=[te[0]*c,te[1]*c,te[2]];if(n.ad.vec3.transformMat4(ae,ae,A[H].matrix),ae[0]<-1||ae[0]>1||ae[1]<-1||ae[1]>1){W=!1;break}}if(L.lastCascade=H,C=Math.max(C,H),W)break}}return C+1}}class ho{constructor(o){this.painter=o,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new zh,this._depthMode=new ir(o.context.gl.LEQUAL,ir.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1,o.tp.registerParameter(this,["Shadows"],"_forceDisable",{label:"forceDisable"},()=>{this.painter.style.map.triggerRepaint()}),o.tp.registerParameter(co,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),o.tp.registerParameter(co,["Shadows"],"normalOffset",{min:0,max:10,step:.05}),o.tp.registerParameter(co,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32}),o.tp.registerBinding(this,["Shadows"],"_numCascadesToRender",{readonly:!0,label:"numCascadesToRender"})}destroy(){for(const o of this._cascades)o.texture.destroy(),o.framebuffer.destroy();this._cascades=[]}updateShadowParameters(o,c){const A=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!c||!c.properties)return;const R=c.properties.get("shadow-intensity");if(!c.shadowsEnabled()||R<=0||(this._shadowLayerCount=A.style.order.reduce((Te,ve)=>{const Ee=A.style._mergedLayers[ve];return Te+(Ee.hasShadowPass()&&!Ee.isHidden(o.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this.enabled))return;const C=A.context,P=co.shadowMapResolution,L=co.shadowMapResolution;if(this._cascades.length===0||co.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let Te=0;Te<co.cascadeCount;++Te){const ve=A._shadowMapDebug,Ee=C.gl,Ve=C.createFramebuffer(P,L,ve,"texture"),Be=new n.T(C,{width:P,height:L,data:null},Ee.DEPTH_COMPONENT16);if(Ve.depthAttachment.set(Be.texture),ve){const et=new n.T(C,{width:P,height:L,data:null},Ee.RGBA8);Ve.colorAttachment.set(et.texture)}this._cascades.push({framebuffer:Ve,texture:Be,matrix:[],far:0,boundingSphereRadius:0,frustum:new n.bR,scale:0})}}this.shadowDirection=bl(c);let j=0;if(o.elevation){const Te=o.elevation,ve=[1e4,-1e4];Te.visibleDemTiles.filter(Ee=>Ee.dem).forEach(Ee=>{const Ve=Ee.dem.tree;ve[0]=Math.min(ve[0],Ve.minimums[0]),ve[1]=Math.max(ve[1],Ve.maximums[0])}),ve[0]!==1e4&&(j=(ve[1]-ve[0])*Te.exaggeration())}const H=1.5*o.cameraToCenterDistance,W=3*H,te=new Float64Array(16);for(let Te=0;Te<this._cascades.length;++Te){const ve=this._cascades[Te];let Ee=o.height/50,Ve=1;co.cascadeCount===1?Ve=W:Te===0?Ve=H:(Ee=H,Ve=W);const[Be,et]=Yl(o,this.shadowDirection,Ee,Ve,co.shadowMapResolution,j);ve.scale=o.scale,ve.matrix=Be,ve.boundingSphereRadius=et,n.ad.mat4.invert(te,ve.matrix),ve.frustum=n.bR.fromInvProjectionMatrix(te,1,0,!0),ve.far=Ve}const ae=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[ae].far,this._cascades[ae].far],this._uniformValues.u_shadow_intensity=R,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/co.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=co.shadowMapResolution,this._uniformValues.u_shadowmap_0=Ai.ShadowMap0,this._uniformValues.u_shadowmap_1=Ai.ShadowMap0+1,this._groundShadowTiles=A.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const ce=A.transform.elevation;for(const Te of this._groundShadowTiles){let ve={min:0,max:0};if(ce){const Ee=ce.getMinMaxForTile(Te);Ee&&(ve=Ee)}this.addShadowReceiver(Te.toUnwrapped(),ve.min,ve.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(o){this._enabled=o}drawShadowPass(o,c){if(!this.enabled)return;const A=this.painter,R=A.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(A.transform.getFrustum(0),A.transform.worldSize,this._cascades),R.viewport.set([0,0,co.shadowMapResolution,co.shadowMapResolution]);for(let C=0;C<this._numCascadesToRender;++C){A.currentShadowCascade=C,R.bindFramebuffer.set(this._cascades[C].framebuffer.framebuffer),R.clear({color:n.al.white,depth:1});for(const P of o.order){const L=o._mergedLayers[P];if(!L.hasShadowPass()||L.isHidden(A.transform.zoom))continue;const j=o.getLayerSourceCache(L),H=j?c[j.id]:void 0;(L.type==="model"||H&&H.length)&&A.renderLayer(A,j,L,H)}}A.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const o=this.painter,c=o.style,A=o.context,R=c.directionalLight,C=c.ambientLight;if(!R||!C)return;const P=[],L=qs(o,o.longestCutoffRange);L.shouldRenderCutoff&&P.push("RENDER_CUTOFF"),P.push("RENDER_SHADOWS","DEPTH_TEXTURE"),this.useNormalOffset&&P.push("NORMAL_OFFSET");const j=Oc(c,R,C),H=new ir(A.gl.LEQUAL,ir.ReadOnly,o.depthRangeFor3D);for(const W of this._groundShadowTiles){const te=W.toUnwrapped(),ae=o.isTileAffectedByFog(W),ce=o.getOrCreateProgram("groundShadow",{defines:P,overrideFog:ae});this.setupShadows(te,ce),o.uploadCommonUniforms(A,ce,te,null,L);const Te={u_matrix:o.transform.calculateProjMatrix(te),u_ground_shadow_factor:j};ce.draw(o,A.gl.TRIANGLES,H,Rr.disabled,br.multiply,vr.disabled,Te,"ground_shadow",o.tileExtentBuffer,o.quadTriangleIndexBuffer,o.tileExtentSegments,null,o.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?br.unblended:br.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(o){const c=this.painter.transform,A=c.calculatePosMatrix(o,c.worldSize);return n.ad.mat4.multiply(A,this._cascades[this.painter.currentShadowCascade].matrix,A),Float32Array.from(A)}calculateShadowPassMatrixFromMatrix(o){return n.ad.mat4.multiply(o,this._cascades[this.painter.currentShadowCascade].matrix,o),Float32Array.from(o)}setupShadows(o,c,A,R=0){if(!this.enabled)return;const C=this.painter.transform,P=this.painter.context,L=P.gl,j=this._uniformValues,H=new Float64Array(16),W=C.calculatePosMatrix(o,C.worldSize);for(let te=0;te<this._cascades.length;te++)n.ad.mat4.multiply(H,this._cascades[te].matrix,W),j[te===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(H),P.activeTexture.set(L.TEXTURE0+Ai.ShadowMap0+te),this._cascades[te].texture.bind(L.NEAREST,L.CLAMP_TO_EDGE);if(this.useNormalOffset=!!A,this.useNormalOffset){const te=n.cd(o.canonical),ae=2/C.tileSize*n.ai/co.shadowMapResolution,ce=ae*this._cascades[0].boundingSphereRadius,Te=ae*this._cascades[this._cascades.length-1].boundingSphereRadius,ve=(A==="vector-tile"?1:3)/Math.pow(2,R-o.canonical.z-(1-C.zoom+Math.floor(C.zoom)));j.u_shadow_normal_offset=[te,ce*ve,Te*ve],j.u_shadow_bias=[6e-5,.0012,.012]}else j.u_shadow_bias=[36e-5,.0012,.012];c.setShadowUniformValues(P,j)}setupShadowsFromMatrix(o,c,A=!1){if(!this.enabled)return;const R=this.painter.context,C=R.gl,P=this._uniformValues,L=new Float64Array(16);for(let j=0;j<co.cascadeCount;j++)n.ad.mat4.multiply(L,this._cascades[j].matrix,o),P[j===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(L),R.activeTexture.set(C.TEXTURE0+Ai.ShadowMap0+j),this._cascades[j].texture.bind(C.NEAREST,C.CLAMP_TO_EDGE);if(this.useNormalOffset=A,A){const j=co.normalOffset;P.u_shadow_normal_offset=[1,j,j],P.u_shadow_bias=[6e-5,.0012,.012]}else P.u_shadow_bias=[36e-5,.0012,.012];c.setShadowUniformValues(R,P)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(o,c,A,R){if(R[2]>=0)return{};const C=function(j,H,W){const te=W/(1<<j.canonical.z);return new n.ce([j.canonical.x*te+j.wrap*W,j.canonical.y*te+j.wrap*W,0],[(j.canonical.x+1)*te+j.wrap*W,(j.canonical.y+1)*te+j.wrap*W,H])}(o,c,A).getCorners(),P=c/-R[2];R[0]<0?(n.ad.vec3.add(C[0],C[0],[R[0]*P,0,0]),n.ad.vec3.add(C[3],C[3],[R[0]*P,0,0])):R[0]>0&&(n.ad.vec3.add(C[1],C[1],[R[0]*P,0,0]),n.ad.vec3.add(C[2],C[2],[R[0]*P,0,0])),R[1]<0?(n.ad.vec3.add(C[0],C[0],[0,R[1]*P,0]),n.ad.vec3.add(C[1],C[1],[0,R[1]*P,0])):R[1]>0&&(n.ad.vec3.add(C[2],C[2],[0,R[1]*P,0]),n.ad.vec3.add(C[3],C[3],[0,R[1]*P,0]));const L={};return L.vertices=C,L.planes=[Os(C[1],C[0],C[4]),Os(C[2],C[1],C[5]),Os(C[3],C[2],C[6]),Os(C[0],C[3],C[7])],L}addShadowReceiver(o,c,A){this._receivers.add(o,n.ce.fromTileIdAndHeight(o,c,A))}getMaxCascadeForTile(o){const c=this._receivers.get(o);return c&&c.lastCascade?c.lastCascade:0}}function Os(g,o,c){const A=n.ad.vec3.sub([],c,o),R=n.ad.vec3.sub([],g,o),C=n.ad.vec3.cross([],A,R),P=n.ad.vec3.length(C);return P===0?[0,0,1,0]:(n.ad.vec3.scale(C,C,1/P),[C[0],C[1],C[2],-n.ad.vec3.dot(C,o)])}function bl(g){const o=g.properties.get("direction"),c=n.cc(o.x,o.y,o.z);c[2]=n.ay(c[2],0,75);const A=n.cf([c[0],c[1],c[2]]);return n.ad.vec3.fromValues(A.x,A.y,A.z)}function Oc(g,o,c){const A=o.properties.get("color-use-theme")==="none",R=o.properties.get("color"),C=o.properties.get("intensity"),P=o.properties.get("direction"),L=[P.x,P.y,P.z],j=c.properties.get("color-use-theme")==="none",H=c.properties.get("color"),W=c.properties.get("intensity"),te=Math.max(n.ad.vec3.dot([0,0,1],L),0),ae=[0,0,0];n.ad.vec3.scale(ae,H.toRenderColor(j?null:g.getLut(o.scope)).toArray01Linear().slice(0,3),W);const ce=[0,0,0];return n.ad.vec3.scale(ce,R.toRenderColor(A?null:g.getLut(c.scope)).toArray01Linear().slice(0,3),te*C),n.cg([ae[0]>0?ae[0]/(ae[0]+ce[0]):0,ae[1]>0?ae[1]/(ae[1]+ce[1]):0,ae[2]>0?ae[2]/(ae[2]+ce[2]):0])}function Yl(g,o,c,A,R,C){const P=g.zoom,L=g.scale,j=g.worldSize,H=1/j,W=g.aspect,te=Math.sqrt(1+W*W)*Math.tan(.5*g.fovX),ae=te*te,ce=A-c,Te=A+c;let ve,Ee;ae>ce/Te?(ve=A,Ee=A*te):(ve=.5*Te*(1+ae),Ee=.5*Math.sqrt(ce*ce+2*(A*A+c*c)*ae+Te*Te*ae*ae));const Ve=g.projection.pixelsPerMeter(g.center.lat,j),Be=g._camera.getCameraToWorldMercator(),et=[0,0,-ve*H];n.ad.vec3.transformMat4(et,et,Be);let Xe=Ee*H;const ht=g._edgeInsets;if(!(ht.left===0&&ht.top===0&&ht.right===0&&ht.bottom===0||ht.left===ht.right&&ht.top===ht.bottom)){const da=g._camera.getWorldToCamera(g.worldSize,g.projection.zAxisUnit==="meters"?Ve:1),Kt=g._camera.getCameraToClipPerspective(g._fov,g.width/g.height,c,A);Kt[8]=2*-g.centerOffset.x/g.width,Kt[9]=2*g.centerOffset.y/g.height;const pa=new Float64Array(16);n.ad.mat4.mul(pa,Kt,da);const Ia=new Float64Array(16);n.ad.mat4.invert(Ia,pa);const La=n.bR.fromInvProjectionMatrix(Ia,j,P,!0);for(const Ea of La.points){const sr=((st=Ea)[0]/=L,st[1]/=L,st[2]=n.bH(st[2],g._center.lat),st);Xe=Math.max(Xe,n.ad.vec3.len(n.ad.vec3.subtract([],et,sr)))}}var st;Xe*=R/(R-1);const ot=Math.acos(o[2]),lt=Math.atan2(-o[0],-o[1]),gt=new bs;gt.position=et,gt.setPitchBearing(ot,lt);const Tt=gt.getWorldToCamera(j,Ve),Yt=Xe*j,Lt=Math.min(g._mercatorZfromZoom(17)*j*-2,-2*Yt),aa=gt.getCameraToClipOrthographic(-Yt,Yt,-Yt,Yt,Lt,(Yt+C*Ve)/o[2]),ua=new Float64Array(16);n.ad.mat4.multiply(ua,aa,Tt);const Sa=n.ad.vec3.fromValues(Math.floor(1e6*et[0])/1e6*j,Math.floor(1e6*et[1])/1e6*j,0),It=.5*R,ia=[0,0,0];n.ad.vec3.transformMat4(ia,Sa,ua),n.ad.vec3.scale(ia,ia,It);const zt=[Math.floor(ia[0]),Math.floor(ia[1]),Math.floor(ia[2])],sa=[0,0,0];n.ad.vec3.sub(sa,ia,zt),n.ad.vec3.scale(sa,sa,-1/It);const ea=new Float64Array(16);return n.ad.mat4.identity(ea),n.ad.mat4.translate(ea,ea,sa),n.ad.mat4.multiply(ua,ea,ua),[ua,Yt]}class oh extends n.E{constructor(o){super(),this.requestManager=o,this.models={"":{}},this.modelUris={"":{}},this.numModelsLoading={}}loadModel(o,c){return n.aN(this.requestManager.transformRequest(c,n.R.Model).url).then(A=>{if(!A)return;const R=n.aO(A),C=new n.aP(o,void 0,void 0,R);return C.computeBoundsAndApplyParent(),C}).catch(A=>{if(A&&A.status===404)return null;this.fire(new n.z(new Error(`Could not load model ${o} from ${c}: ${A.message}`)))})}load(o,c,A={keepNumReferences:!1}){this.models[c]||(this.models[c]={});const R=Object.keys(o);this.numModelsLoading[c]=(this.numModelsLoading[c]||0)+R.length;const C=[];for(const P of R)C.push(this.loadModel(P,o[P]));Promise.allSettled(C).then(P=>{for(let L=0;L<P.length;L++){const{status:j,value:H}=P[L];if(j==="fulfilled"&&H){const W=this.models[c][R[L]];this.models[c][R[L]]={model:H,numReferences:A.keepNumReferences&&W?W.numReferences:1}}}this.numModelsLoading[c]-=R.length,this.fire(new n.A("data",{dataType:"style"}))}).catch(P=>{this.fire(new n.z(new Error(`Could not load models: ${P.message}`)))})}isLoaded(){for(const o in this.numModelsLoading)if(this.numModelsLoading[o]>0)return!1;return!0}hasModel(o,c){return!!this.getModel(o,c)}getModel(o,c){return this.models[c]||(this.models[c]={}),this.models[c][o]?this.models[c][o].model:void 0}addModel(o,c,A){this.models[A]||(this.models[A]={}),this.modelUris[A]||(this.modelUris[A]={}),this.hasModel(o,A)&&this.models[A][o].numReferences++,this.modelUris[A][o]=this.requestManager.normalizeModelURL(c),this.load({[o]:this.modelUris[A][o]},A)}addModels(o,c){this.models[c]||(this.models[c]={}),this.modelUris[c]||(this.modelUris[c]={});const A=this.modelUris[c];for(const R in o)this.models[c][R]={},A[R]=this.requestManager.normalizeModelURL(o[R]);this.load(A,c,{keepNumReferences:!0})}reloadModels(o){this.load(this.modelUris[o],o)}addModelsFromBucket(o,c){this.models[c]||(this.models[c]={}),this.modelUris[c]||(this.modelUris[c]={});const A={};for(const R of o)this.hasModel(R,c)?this.models[c][R].numReferences++:(this.modelUris[c][R]=this.requestManager.normalizeModelURL(R),A[R]=this.modelUris[c][R]);this.load(A,c)}removeModel(o,c){if(this.models[c]&&this.models[c][o]&&(this.models[c][o].numReferences--,this.models[c][o].numReferences===0)){const A=this.models[c][o].model;delete this.models[c][o],delete this.modelUris[c][o],A.destroy()}}listModels(o){return this.models[o]||(this.models[o]={}),Object.keys(this.models[o])}upload(o,c){this.models[c]||(this.models[c]={});for(const A in this.models[c])this.models[c][A].model&&this.models[c][A].model.upload(o.context)}}const xl=new n.a7({data:new n.a8(n.a5.colorTheme.data)}),Ro={"mbx-indoor-active-floorplans":{default:["literal",[]]},"mbx-indoor-underground":{default:["literal",!1]},"mbx-indoor-loaded-levels":{default:["literal",[]]},"mbx-indoor-level-height":{default:["literal",{}]},"mbx-indoor-level-base":{default:["literal",{}]},"mbx-indoor-level-selected":{default:["literal",{}]},"mbx-indoor-level-overlapped":{default:["literal",{}]}};function xd(g){return g=g||{},Object.assign(g,Ro)}class Dc extends n.E{constructor(o){super(),this.mergeFloors=!0,this._scope=void 0,this._queryFeatureSetId=void 0,this._buildingEntryFeatureSetId=void 0,this._selectedFloorplan=void 0,this._indoorData=void 0,this._selectedLevel=void 0,this._floorplanStates={},n.aQ(["_onLoad","_onMove","_checkFloorplanVisible"],this),this._map=o,this._checkFloorplanVisible(!0),this._map.on("load",this._onLoad),this._map.on("move",this._onMove)}destroy(){this._map.indoor.off("load",this._onLoad),this._map.indoor.off("move",this._onMove),this._map=void 0}_onLoad(){this._map.style.forEachFragmentStyle(o=>{o.stylesheet.indoor&&(this._queryFeatureSetId?this.fire(new n.z(new Error("Multiple indoor map styles detected, simultaneous usage is not allowed currently."))):(this._queryFeatureSetId=o.stylesheet.indoor.floorplanFeaturesetId,this._buildingEntryFeatureSetId=o.stylesheet.indoor.buildingFeaturesetId,this._scope=o.scope))}),this._queryFeatureSetId&&this._buildingEntryFeatureSetId&&this._map.addInteraction("mbx-indoor-buildingclick",{type:"click",target:{featuresetId:this._buildingEntryFeatureSetId,importId:this._scope},handler:o=>(o.feature&&o.feature.properties.floorplan&&this.selectFloorplan(o.feature.properties.floorplan),!0)}),this._checkFloorplanVisible(!0)}_onMove(){this._checkFloorplanVisible(!1)}_checkFloorplanVisible(o){if(!this._queryFeatureSetId||!this._map.isStyleLoaded()||this._map.transform.zoom<13)return;this._indoorData&&!function(P,L){const[j,H]=P,{center:W,radius:te}=L,[ae,ce]=W,Te=Math.abs(j-ae);return Math.sqrt((Te>180?360-Te:Te)**2+(H-ce)**2)<=te}([this._map.getCenter().lng,this._map.getCenter().lat],this._indoorData.circumCircle)&&(this._indoorData=void 0,this._selectedFloorplan=void 0,this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",["literal",[]]),this.fire(new n.A("floorplangone")));const c={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},A=new n.P(this._map.transform.width/2,this._map.transform.height/2),R=[new n.P(0,0),new n.P(this._map.transform.width,this._map.transform.height)],C=this._map.queryRenderedFeatures(o?R:A,c);C.length>0&&(this._selectedFloorplan&&C[0].properties.id===this._selectedFloorplan.properties.id||(this._selectedFloorplan=C[0],this._floorplanSelected(!1)))}_floorplanSelected(o){this._indoorData=JSON.parse(this._selectedFloorplan.properties["indoor-data"]),this._indoorData.id=this._selectedFloorplan.properties.id,this._indoorData.circumCircle=function(C){const[[P,L],[j,H]]=C,W=(j-P+360)%360,te=W>180?360-W:W;return{center:[(P+te/2+360)%360,(L+H)/2],radius:Math.sqrt(te**2+(H-L)**2)/2}}(this._indoorData.extent),this._floorplanStates[this._indoorData.id]||(this._floorplanStates[this._indoorData.id]={});const c=this._floorplanStates[this._indoorData.id].selectedBuilding,A=this._floorplanStates[this._indoorData.id].selectedLevel;let R;if(this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",this._indoorData.floorplanIDs),this._selectedLevel)for(const C of this._indoorData.levels)C.id===this._selectedLevel.id&&(R=C.id);if(this.fire(new n.A("floorplanselected",{buildings:this._indoorData.buildings,levels:this._indoorData.levels,selectedLevelId:R})),c){const C=this._indoorData.buildings.find(P=>P.id===c);this._buildingSelected(C,!1)}else this._indoorData.buildings.length>0&&this._buildingSelected(this._indoorData.buildings[0],!1);if(A){const C=this._indoorData.levels.find(P=>P.id===A);this._updateLevels(C,o)}else o&&this._indoorData["default-levels"].length>0&&this.selectLevel(this._indoorData["default-levels"][0])}_buildingSelected(o,c){c&&o&&o.extent&&this._map.fitBounds(o.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),this._floorplanStates[this._indoorData.id].selectedBuilding=o?o.id:void 0;const A=this._indoorData.levels.filter(R=>o.levels.includes(R.id));this.fire(new n.A("buildingselected",{buildingId:o.id,levels:A}))}_levelSelected(o){if(o==="overview")this._updateLevels(void 0,!0);else{const c=this._indoorData.levels.find(A=>A.id===o);this._updateLevels(c,!0)}this.fire(new n.A("levelselected",{levelId:o==="overview"?void 0:o}))}_updateLevels(o,c){if(!o)return this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",[]]),this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._floorplanStates[this._indoorData.id].selectedLevel=void 0,void(c&&this._indoorData.extent&&this._map.fitBounds(this._indoorData.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}));function A(H){const W=H.indexOf("/floor/");if(W===-1)return H;const te=W+7,ae=H.indexOf("/",te);return ae===-1?H.slice(te):H.slice(te,ae)}this._selectedLevel=o,this._floorplanStates[this._indoorData.id].selectedLevel=o?o.id:void 0;const R=[],C={},P={},L={},j={};for(const H of this._indoorData.levels)if(R.push(H.id),C[H.id]=H.height,P[H.id]=H.base,o){if(this.mergeFloors){const W=A(o.id),te=A(H.id);L[H.id]=te===W?"true":"false"}else L[H.id]=H.id===o.id?"true":"false";j[H.id]=H.base<o.base?"true":"false"}else j[H.id]=!0;if(this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",R]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-height",["literal",C]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-base",["literal",P]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-selected",["literal",L]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-overlapped",["literal",j]),o&&(this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!!o.isUnderground),c&&o.extent)){const H=this._map.cameraForBounds(o.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),W=this._map.getZoom(),te=H.zoom?Math.abs(W-H.zoom):0;this._map.fitBounds(o.extent,te>=1?{pitch:this._map.getPitch(),bearing:this._map.getBearing()}:{pitch:this._map.getPitch(),bearing:this._map.getBearing(),zoom:W})}}selectFloorplan(o){const c={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},A=[new n.P(0,0),new n.P(this._map.transform.width,this._map.transform.height)],R=this._map.queryRenderedFeatures(A,c);if(R.length>0){for(const C of R)if(JSON.parse(C.properties["indoor-data"]).floorplanIDs.includes(o)){this._selectedFloorplan=C,this._floorplanSelected(!0);break}}}selectBuilding(o){const c=this._indoorData.buildings.find(A=>A.id===o);this._buildingSelected(c,!0)}selectLevel(o){this._levelSelected(o)}}function Pl(g){if(!g.metadata||!g.metadata.content_area)return;const o=n.q.devicePixelRatio,{left:c,top:A,width:R,height:C}=g.metadata.content_area,P=c*o,L=A*o;return[P,L,P+R*o,L+C*o]}function dc(g){if(g)return g.map(([o,c])=>[o*n.q.devicePixelRatio,c*n.q.devicePixelRatio])}class gu{constructor(o,c){this.id=o,this.style=c}addIcons(o){const c=new Map;for(const[A,R]of o.entries()){const C=n.I.from({name:A,iconsetId:this.id});c.set(C,R)}this.style.addImages(c)}}const Zi=(g,o)=>kt(g,o&&o.filter(c=>c.identifier!=="source.canvas")),mf=n.aA(Tn,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setSnow","setRain","setProjection","setCamera","addImport","removeImport","updateImport"]),Qs=n.aA(Tn,["setCenter","setZoom","setBearing","setPitch"]),fo=new Set(["background","sky","slot","custom"]),Pd={version:8,layers:[],sources:{}},Ed={duration:300,delay:0};class eo extends n.E{constructor(o,c={}){super(),this.map=o,this.scope=c.scope||"",this.globalId=null,this.fragments=[],this.importDepth=c.importDepth||0,this.importsCache=c.importsCache||new Map,this.resolvedImports=c.resolvedImports||new Set,this.transition=n.l({},Ed),this._buildingIndex=new zc(this),this.crossTileSymbolIndex=new Js,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._clipLayerPresent=!1,this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=c.styleChanges||new Pa,this.dispatcher=c.dispatcher?c.dispatcher:new n.D(n.cj(),this),c.imageManager?this.imageManager=c.imageManager:(this.imageManager=new la(this.map._spriteFormat),this.imageManager.setEventedParent(this)),this.imageManager.createScope(this.scope),this.glyphManager=c.glyphManager?c.glyphManager:new n.ck(o._requestManager,c.localFontFamily?n.cl.all:c.localIdeographFontFamily?n.cl.ideographs:n.cl.none,c.localFontFamily||c.localIdeographFontFamily),c.modelManager?this.modelManager=c.modelManager:(this.modelManager=new oh(o._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this.options=c.configOptions?c.configOptions:new Map,this._configDependentLayers=c.configDependentLayers?c.configDependentLayers:new Set,this._config=c.config,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null,colorThemeOverride:c.colorThemeOverride},this._styleColorThemeForScope={},this._initialConfig=c.initialConfig,this.dispatcher.broadcast("setReferrer",n.cm());const A=this;this._rtlTextPluginCallback=eo.registerForPluginStateChange(R=>{A.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:R.pluginStatus,pluginURL:R.pluginURL},(C,P)=>{if(n.cn(C),P&&P.every(L=>L))for(const L in A._sourceCaches){const j=A._sourceCaches[L],H=j.getSource().type;H!=="vector"&&H!=="geojson"||j.reload()}})}),this.on("data",R=>{if(R.dataType!=="source"||R.sourceDataType!=="metadata")return;const C=this.getOwnSource(R.sourceId);if(C&&C.vectorLayerIds)for(const P in this._layers){const L=this._layers[P];L.source===C.id&&this._validateLayer(L)}})}load(o){return o?(typeof o=="string"?this.loadURL(o):this.loadJSON(o),this):this}_getGlobalId(o){if(!o)return null;if(typeof o=="string"){if(n.f(o))return o;const c=n.co(o);if(!c.startsWith("http"))try{return new URL(c,location.href).toString()}catch{return c}return c}return`json://${n.cp(JSON.stringify(o))}`}_diffStyle(o,c,A){this.globalId=this._getGlobalId(o);const R=(C,P)=>{try{P(null,this.setState(C,A))}catch(L){P(L,!1)}};if(typeof o=="string"){const C=this.map._requestManager.normalizeStyleURL(o),P=this.map._requestManager.transformRequest(C,n.R.Style);n.n(P,(L,j)=>{L?this.fire(new n.z(L)):j&&R(j,c)})}else typeof o=="object"&&R(o,c)}loadURL(o,c={}){this.fire(new n.A("dataloading",{dataType:"style"}));const A=typeof c.validate=="boolean"?c.validate:!n.f(o);this.globalId=this._getGlobalId(o),o=this.map._requestManager.normalizeStyleURL(o,c.accessToken),this.resolvedImports.add(o);const R=this.importsCache.get(o);if(R)return this._load(R,A);const C=this.map._requestManager.transformRequest(o,n.R.Style);this._request=n.n(C,(P,L)=>{if(this._request=null,P)this.fire(new n.z(P));else if(L)return this.importsCache.set(o,L),this._load(L,A)})}loadJSON(o,c={}){this.fire(new n.A("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(o),this._request=n.q.frame(()=>{this._request=null,this._load(o,c.validate!==!1)})}loadEmpty(){this.fire(new n.A("dataloading",{dataType:"style"})),this._load(Pd,!1)}_loadImports(o,c,A){if(this.importDepth>=4)return n.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const R=[];for(const C of o){const P=this._createFragmentStyle(C),L=new Promise(W=>{P.once("style.import.load",W),P.once("error",W)}).then(()=>this.mergeAll());if(R.push(L),this.resolvedImports.has(C.url)){P.loadEmpty();continue}const j=C.data||this.importsCache.get(C.url);j?(P.loadJSON(j,{validate:c}),this._isInternalStyle(j)&&(P.globalId=null)):C.url?P.loadURL(C.url,{validate:c}):P.loadEmpty();const H={style:P,id:C.id,config:C.config};if(A){const W=this.fragments.findIndex(({id:te})=>te===A);this.fragments=this.fragments.slice(0,W).concat(H).concat(this.fragments.slice(W))}else this.fragments.push(H)}return Promise.allSettled(R)}getImportGlobalIds(o=this,c=new Set){for(const A of o.fragments)A.style.globalId&&c.add(A.style.globalId),this.getImportGlobalIds(A.style,c);return[...c.values()]}_createFragmentStyle(o){const c=this.scope?n.C(o.id,this.scope):o.id;let A;const R=this._initialConfig&&this._initialConfig[c];(o.config||R)&&(A=n.l({},o.config,R));const C=new eo(this.map,{scope:c,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:A,configOptions:this.options,colorThemeOverride:o["color-theme"],configDependentLayers:this._configDependentLayers});return C.setEventedParent(this.map,{style:C}),C}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.map._precompilePrograms&&this.isRootStyle()}_isInternalStyle(o){return this.isRootStyle()&&(o.fragment||!!o.schema&&o.fragment!==!1)}_load(o,c){const A=o.indoor?xd(o.schema):o.schema;if(this._isInternalStyle(o)){const P=n.l({},Pd,{imports:[{id:"basemap",data:o,url:""}]});return void this._load(P,c)}if(this.updateConfig(this._config,A),c&&Zi(this,Qi(o)))return;this._loaded=!0,this.stylesheet=n.cq(o);const R=()=>{for(const H in o.sources)this.addSource(H,o.sources[H],{validate:!1,isInitialLoad:!0});if(o.iconsets)for(const H in o.iconsets)this.addIconset(H,o.iconsets[H]);o.sprite?this._loadIconset(o.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.setGlyphsUrl(o.glyphs);const P=nh(this.stylesheet.layers);if(this._order=P.map(H=>H.id),this.stylesheet.light&&n.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const H=this.stylesheet.lights[0];this.light=new Ht(H.properties,H.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new Ht(this.stylesheet.light)),this._layers={};for(const H of P){const W=n.cv(H,this.scope,this._styleColorTheme.lut,this.options);W.configDependencies.size!==0&&this._configDependentLayers.add(W.fqid),W.setEventedParent(this,{layer:{id:W.id}}),this._layers[W.id]=W;const te=this.getOwnLayerSourceCache(W),ae=!!this.directionalLight&&this.directionalLight.shadowsEnabled();te&&W.canCastShadows()&&ae&&(te.castsShadows=!0)}this.stylesheet.featuresets&&this.setFeaturesetSelectors(this.stylesheet.featuresets),this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);const L=this.stylesheet.terrain;L&&(this.checkCanvasFingerprintNoise(),this.disableElevatedTerrain||this.terrainSetForDrapingOnly()||this._createTerrain(L,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.snow&&this._createSnow(this.stylesheet.snow),this.stylesheet.rain&&this._createRain(this.stylesheet.rain),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new n.A("data",{dataType:"style"}));const j=this.isRootStyle();o.imports?this._loadImports(o.imports,c).then(()=>{this._reloadImports(),this.fire(new n.A(j?"style.load":"style.import.load"))}):(this._reloadImports(),this.fire(new n.A(j?"style.load":"style.import.load")))};this._styleColorTheme.colorTheme=this.stylesheet["color-theme"];const C=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(C){const P=this._evaluateColorThemeData(C);this._loadColorTheme(P).then(()=>{R()}).catch(L=>{n.w(`Couldn't load color theme from the stylesheet: ${L}`),R()})}else this._styleColorTheme.lut=null,R()}isRootStyle(){return this.importDepth===0}mergeAll(){let o,c,A,R,C,P,L,j,H,W;const te={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(ae=>{if(ae.stylesheet){if(ae.light!=null&&(o=ae.light),ae.stylesheet.lights)for(const ce of ae.stylesheet.lights)ce.type==="ambient"&&ae.ambientLight!=null&&(c=ae.ambientLight),ce.type==="directional"&&ae.directionalLight!=null&&(A=ae.directionalLight);R=this._prioritizeTerrain(R,ae.terrain,ae.stylesheet.terrain),ae.stylesheet.fog&&ae.fog!=null&&(C=ae.fog),ae.stylesheet.snow&&ae.snow!=null&&(P=ae.snow),ae.stylesheet.rain&&ae.rain!=null&&(L=ae.rain),ae.stylesheet.camera!=null&&(W=ae.stylesheet.camera),ae.stylesheet.projection!=null&&(j=ae.stylesheet.projection),ae.stylesheet.transition!=null&&(H=ae.stylesheet.transition),te[ae.scope]=ae._styleColorTheme}}),this.light=o,this.ambientLight=c,this.directionalLight=A,this.fog=C,this.snow=P,this.rain=L,this._styleColorThemeForScope=te,R===null?delete this.terrain:this.terrain=R,this.camera=W||{"camera-projection":"perspective"},this.projection=j||{name:"mercator"},this.transition=n.l({},Ed,H),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(o){const c=A=>{for(const R of A.fragments)c(R.style);o(A)};c(this)}_prioritizeTerrain(o,c,A){const R=o&&o.drapeRenderMode===0;return A===null?c&&c.drapeRenderMode===0?c:R?o:null:c!=null&&(!o||R||c&&c.drapeRenderMode===1)?c:o}mergeTerrain(){let o;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(c=>{o=this._prioritizeTerrain(o,c.terrain,c.stylesheet.terrain)}),o===null?delete this.terrain:this.terrain=o}mergeProjection(){let o;this.forEachFragmentStyle(c=>{c.stylesheet.projection!=null&&(o=c.stylesheet.projection)}),this.projection=o||{name:"mercator"}}mergeSources(){const o={},c={},A={};this.forEachFragmentStyle(R=>{for(const C in R._sourceCaches){const P=n.C(C,R.scope);o[P]=R._sourceCaches[C]}for(const C in R._otherSourceCaches){const P=n.C(C,R.scope);c[P]=R._otherSourceCaches[C]}for(const C in R._symbolSourceCaches){const P=n.C(C,R.scope);A[P]=R._symbolSourceCaches[C]}}),this._mergedSourceCaches=o,this._mergedOtherSourceCaches=c,this._mergedSymbolSourceCaches=A}mergeLayers(){const o={},c=[],A={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(C=>{for(const P of C._order){const L=C._layers[P];if(L.type==="slot"){const j=n.cr(P);if(o[j])continue;o[j]=[]}L.slot&&o[L.slot]?o[L.slot].push(L):c.push(L)}}),this._mergedOrder=[];const R=(C=[])=>{for(const P of C)if(P.type==="slot"){const L=n.cr(P.id);o[L]&&R(o[L]),this._mergedSlots.push(L)}else{const L=n.C(P.id,P.scope);this._mergedOrder.push(L),A[L]=P,P.is3D(!!this.terrain)&&(this._has3DLayers=!0),P.type==="circle"&&(this._hasCircleLayers=!0),P.type==="symbol"&&(this._hasSymbolLayers=!0),P.type==="clip"&&(this._clipLayerPresent=!0)}};R(c),this._mergedOrder.sort((C,P)=>{const L=A[C],j=A[P];return L.hasInitialOcclusionOpacityProperties?j.is3D(!!this.terrain)?1:0:L.is3D(!!this.terrain)&&j.hasInitialOcclusionOpacityProperties?-1:0}),this._mergedLayers=A,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(o){return this.stylesheet.camera=n.l({},this.stylesheet.camera,o),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(o){return o.data?function(c,A,R){const C=n.l({},A);for(const L of Object.keys(n.a5.colorTheme))C[L]===void 0&&(C[L]=n.a5.colorTheme[L].default);const P=new n.a6(xl,c,new Map(R));return P.setTransitionOrValue(C,R),P.untransitioned().possiblyEvaluate(new n.aa(0))}(this.scope,o,this.options).get("data"):null}_loadColorTheme(o){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const c=this._styleColorTheme.lutLoadingCorrelationID;return new Promise((A,R)=>{const C="data:image/png;base64,";if(!o||o.length===0)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void A();let P=o;P.startsWith(C)||(P=C+P);const L=n.I.from("mapbox-reserved-lut"),j=new Image;j.src=P,j.onerror=()=>{this._styleColorTheme.lutLoading=!1,R(new Error("Failed to load image data"))},j.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==c)return void A();this._styleColorTheme.lutLoading=!1;const{width:H,height:W,data:te}=n.q.getImageData(j);if(W>32)return void R(new Error("The height of the image must be less than or equal to 32 pixels."));if(H!==W*W)return void R(new Error("The width of the image must be equal to the height squared."));this.getImage(L)&&this.removeImage(L),this.addImage(L,{data:new n.r({width:H,height:W},te),pixelRatio:1,sdf:!1,usvg:!1,version:0});const ae=this.imageManager.getImage(L,this.scope);ae?(this._styleColorTheme.lut={image:ae.data,data:o},A()):R(new Error("Missing LUT image."))}})}getLut(o){const c=this._styleColorThemeForScope[o];return c?c.lut:null}setProjection(o){o?this.stylesheet.projection=o:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(o){this._spriteRequest=function(c,A,R){let C,P,L;const j=n.q.devicePixelRatio>1?"@2x":"";let H=n.n(A.transformRequest(A.normalizeSpriteURL(c,j,".json"),n.R.SpriteJSON),(ae,ce)=>{H=null,L||(L=ae,C=ce,te())}),W=n.o(A.transformRequest(A.normalizeSpriteURL(c,j,".png"),n.R.SpriteImage),(ae,ce)=>{W=null,L||(L=ae,P=ce,te())});function te(){if(L)R(L);else if(C&&P){const ae=n.q.getImageData(P),ce={};for(const Te in C){const{width:ve,height:Ee,x:Ve,y:Be,sdf:et,pixelRatio:Xe,stretchX:ht,stretchY:st,content:ot}=C[Te],lt=new n.r({width:ve,height:Ee});n.r.copy(ae,lt,{x:Ve,y:Be},{x:0,y:0},{width:ve,height:Ee},null),ce[Te]={data:lt,pixelRatio:Xe,sdf:et,stretchX:ht,stretchY:st,content:ot,usvg:!1}}R(null,ce)}}return{cancel(){H&&(H.cancel(),H=null),W&&(W.cancel(),W=null)}}}(o,this.map._requestManager,(c,A)=>{if(this._spriteRequest=null,c)this.fire(new n.z(c));else if(A){const R=new Map;for(const C in A)R.set(n.I.from(C),A[C]);this.addImages(R)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new n.A("data",{dataType:"style"}))})}addIconset(o,c){if(c.type==="sprite")return void this._loadSprite(c.url);const A=this.getOwnSource(c.source);if(!A)return void this.fire(new n.z(new Error(`Source "${c.source}" as specified by iconset "${o}" does not exist and cannot be used as an iconset source`)));if(A.type!=="raster-array")return void this.fire(new n.z(new Error(`Source "${c.source}" as specified by iconset "${o}" is not a "raster-array" source and cannot be used as an iconset source`)));this.imageManager.createIconset(this.scope,o);const R=new gu(o,this);A.addIconset(o,R)}_loadIconset(o){if(!n.f(o)&&this.map._spriteFormat!=="icon_set"||this.map._spriteFormat==="raster")return void this._loadSprite(o);const c=this.map._spriteFormat==="auto";var A,R;this._spriteRequest=(R=(C,P)=>{if(this._spriteRequest=null,C)c?this._loadSprite(o):this.fire(new n.z(C));else if(P){const L=new Map;for(const j in P)L.set(n.I.from(j),P[j]);this.addImages(L)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new n.A("data",{dataType:"style"}))},n.bj((A=this.map._requestManager).transformRequest(A.normalizeIconsetURL(o),n.R.Iconset),(C,P)=>{if(C)return void R(C);const L={},j=n.ch(new n.bi(P));for(const H of j.icons){const W={version:1,pixelRatio:n.q.devicePixelRatio,content:Pl(H),stretchX:H.metadata?dc(H.metadata.stretch_x_areas):void 0,stretchY:H.metadata?dc(H.metadata.stretch_y_areas):void 0,sdf:!1,usvg:!0,icon:H};L[H.name]=W}R(null,L)}))}_validateLayer(o){const c=this.getOwnSource(o.source);if(!c)return;const A=o.sourceLayer;A&&(c.type==="geojson"||c.vectorLayerIds&&c.vectorLayerIds.indexOf(A)===-1)&&this.fire(new n.z(new Error(`Source layer "${A}" does not exist on source "${c.id}" as specified by style layer "${o.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const o in this._sourceCaches)if(!this._sourceCaches[o].loaded())return!1;if(!this.imageManager.isLoaded()||this.imageManager.hasPatternsInFlight()||!this.modelManager.isLoaded()||this._styleColorTheme.lutLoading)return!1;for(const{style:o}of this.fragments)if(!o.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((o,c)=>{const A=this.fragments[c];return A&&A.style&&(o.data=A.style.serialize()),o})}_serializeSources(){const o={};for(const c in this._sourceCaches){const A=this._sourceCaches[c].getSource();o[A.id]||(o[A.id]=A.serialize())}return o}_serializeLayers(o){const c=[];for(const A of o){const R=this._layers[A];R&&R.type!=="custom"&&c.push(R.serialize())}return c}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasSnowTransition(){return!!this.snow&&this.snow.hasTransition()}hasRainTransition(){return!!this.rain&&this.rain.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition()||this.hasSnowTransition()||this.hasRainTransition())return!0;for(const o in this._sourceCaches)if(this._sourceCaches[o].hasTransition())return!0;for(const o in this._layers)if(this._layers[o].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}_getOrder(o){return o?this.order:this._mergedOrder}isLayerDraped(o){return!!this.terrain&&o.isDraped(this.getLayerSourceCache(o))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(o){const c=this.getOwnLayer(o);if(c)return c;this.fire(new n.z(new Error(`The layer '${o}' does not exist in the map's style.`)))}_checkSource(o){const c=this.getOwnSource(o);if(c)return c;this.fire(new n.z(new Error(`The source '${o}' does not exist in the map's style.`)))}precompilePrograms(o,c){const A=this.map.painter;if(A)for(let R=o.minzoom||0;R<(o.maxzoom||25.5);R++){const C=o.getProgramIds();if(C)for(const P of C){const L=o.getDefaultProgramParams(P,c.zoom,this._styleColorTheme.lut);L&&(A.style=this,this.fog&&(A._fogVisible=!0,L.overrideFog=!0,A.getOrCreateProgram(P,L)),A._fogVisible=!1,L.overrideFog=!1,A.getOrCreateProgram(P,L),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(L.overrideRtt=!0,A.getOrCreateProgram(P,L)))}}}update(o){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(o),this.directionalLight&&this.directionalLight.recalculate(o);const c=this.calculateLightsBrightness();o.brightness=c||0,c!==this._brightness&&(this._brightness=c,this.dispatcher.broadcast("setBrightness",c));const A=this._changes.isDirty();let R=!1;if(this._changes.isDirty()){const P=this._changes.getLayerUpdatesByScope();for(const L in P){const{updatedIds:j,removedIds:H}=P[L];(j||H)&&(this._updateWorkerLayers(L,j,H),R=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(o),this.light&&this.light.updateTransitions(o),this.ambientLight&&this.ambientLight.updateTransitions(o),this.directionalLight&&this.directionalLight.updateTransitions(o),this.fog&&this.fog.updateTransitions(o),this.snow&&this.snow.updateTransitions(o),this.rain&&this.rain.updateTransitions(o),this._changes.reset()}const C={};for(const P in this._mergedSourceCaches){const L=this._mergedSourceCaches[P];C[P]=L.used,L.used=!1,L.tileCoverLift=0}for(const P of this._mergedOrder){const L=this._mergedLayers[P];if(L.recalculate(o,this._availableImages),!L.isHidden(o.zoom)){const j=this.getLayerSourceCache(L);j&&(j.used=!0,j.tileCoverLift=Math.max(j.tileCoverLift,L.tileCoverLift()))}!this._precompileDone&&this._shouldPrecompile&&("requestIdleCallback"in window?requestIdleCallback(()=>{this.precompilePrograms(L,o)}):this.precompilePrograms(L,o))}for(const P in this._mergedSourceCaches){const L=this._mergedSourceCaches[P];if(!L)continue;const j=L._source;j.type==="raster-array"&&j.iconsets&&(L.used=!0)}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&R&&this.mergeLayers();for(const P in C){const L=this._mergedSourceCaches[P];C[P]!==L.used&&L.getSource().fire(new n.A("data",{sourceDataType:"visibility",dataType:"source",sourceId:L.getSource().id}))}this.light&&this.light.recalculate(o),this.terrain&&this.terrain.recalculate(o),this.fog&&this.fog.recalculate(o),this.snow&&this.snow.recalculate(o),this.rain&&this.rain.recalculate(o),this.z=o.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),this.imageManager.clearUpdatedImages(this.scope),A&&this.fire(new n.A("data",{dataType:"style"}))}_updateTilesForChangedImages(){const o=this._changes.getUpdatedImages();if(o.length){for(const c in this._mergedSourceCaches)this._mergedSourceCaches[c].reloadTilesForDependencies(["icons","patterns"],o);this._changes.resetUpdatedImages()}}_updateWorkerLayers(o,c,A){const R=this.getFragmentStyle(o);R&&this.dispatcher.broadcast("updateLayers",{layers:c?R._serializeLayers(c):[],scope:o,removedIds:A||[],options:R.options})}setState(o,c){if(this._checkLoaded(),Zi(this,Qi(o)))return!1;(o=n.cq(o)).layers=nh(o.layers);const A=function(P,L){if(!P)return[{command:Tn.setStyle,args:[L]}];let j=[];try{if(!n.bn(P.version,L.version))return[{command:Tn.setStyle,args:[L]}];if(n.bn(P.center,L.center)||j.push({command:Tn.setCenter,args:[L.center]}),n.bn(P.zoom,L.zoom)||j.push({command:Tn.setZoom,args:[L.zoom]}),n.bn(P.bearing,L.bearing)||j.push({command:Tn.setBearing,args:[L.bearing]}),n.bn(P.pitch,L.pitch)||j.push({command:Tn.setPitch,args:[L.pitch]}),n.bn(P.sprite,L.sprite)||j.push({command:Tn.setSprite,args:[L.sprite]}),n.bn(P.glyphs,L.glyphs)||j.push({command:Tn.setGlyphs,args:[L.glyphs]}),n.bn(P.imports,L.imports)||function(ce=[],Te=[],ve){Te=Te||[];const Ee=(ce=ce||[]).map(An),Ve=Te.map(An),Be=ce.reduce(Gs,{}),et=Te.reduce(Gs,{}),Xe=Ee.slice();let ht,st,ot,lt;for(ht=0,st=0;ht<Ee.length;ht++)ot=Ee[ht],et.hasOwnProperty(ot)?st++:(ve.push({command:Tn.removeImport,args:[ot]}),Xe.splice(Xe.indexOf(ot,st),1));for(ht=0,st=0;ht<Ve.length;ht++)ot=Ve[Ve.length-1-ht],Xe[Xe.length-1-ht]!==ot&&(Be.hasOwnProperty(ot)?(ve.push({command:Tn.removeImport,args:[ot]}),Xe.splice(Xe.lastIndexOf(ot,Xe.length-st),1)):st++,lt=Xe[Xe.length-ht],ve.push({command:Tn.addImport,args:[et[ot],lt]}),Xe.splice(Xe.length-ht,0,ot));for(const gt of Te){const Tt=Be[gt.id];Tt&&!n.bn(Tt,gt)&&ve.push({command:Tn.updateImport,args:[gt.id,gt]})}}(P.imports,L.imports,j),n.bn(P.transition,L.transition)||j.push({command:Tn.setTransition,args:[L.transition]}),n.bn(P.light,L.light)||j.push({command:Tn.setLight,args:[L.light]}),n.bn(P.fog,L.fog)||j.push({command:Tn.setFog,args:[L.fog]}),n.bn(P.snow,L.snow)||j.push({command:Tn.setSnow,args:[L.snow]}),n.bn(P.rain,L.rain)||j.push({command:Tn.setRain,args:[L.rain]}),n.bn(P.projection,L.projection)||j.push({command:Tn.setProjection,args:[L.projection]}),n.bn(P.lights,L.lights)||j.push({command:Tn.setLights,args:[L.lights]}),n.bn(P.camera,L.camera)||j.push({command:Tn.setCamera,args:[L.camera]}),!n.bn(P["color-theme"],L["color-theme"]))return[{command:Tn.setStyle,args:[L]}];const H={},W=[];(function(ce,Te,ve,Ee){let Ve;for(Ve in Te=Te||{},ce=ce||{})ce.hasOwnProperty(Ve)&&(Te.hasOwnProperty(Ve)||ic(Ve,ve,Ee));for(Ve in Te){if(!Te.hasOwnProperty(Ve))continue;const Be=Te[Ve];ce.hasOwnProperty(Ve)?n.bn(ce[Ve],Be)||(ce[Ve].type==="geojson"&&Be.type==="geojson"&&Xa(ce,Te,Ve)?ve.push({command:Tn.setGeoJSONSourceData,args:[Ve,Be.data]}):sc(Ve,Te,ve,Ee)):Bs(Ve,Te,ve)}})(P.sources,L.sources,W,H);const te=[];P.layers&&P.layers.forEach(ce=>{ce.source&&H[ce.source]?j.push({command:Tn.removeLayer,args:[ce.id]}):te.push(ce)});let ae=P.terrain;ae&&H[ae.source]&&(j.push({command:Tn.setTerrain,args:[void 0]}),ae=void 0),j=j.concat(W),n.bn(ae,L.terrain)||j.push({command:Tn.setTerrain,args:[L.terrain]}),function(ce,Te,ve){Te=Te||[];const Ee=(ce=ce||[]).map(An),Ve=Te.map(An),Be=ce.reduce(Gs,{}),et=Te.reduce(Gs,{}),Xe=Ee.slice(),ht=Object.create(null);let st,ot,lt,gt,Tt,Yt,Lt;for(st=0,ot=0;st<Ee.length;st++)lt=Ee[st],et.hasOwnProperty(lt)?ot++:(ve.push({command:Tn.removeLayer,args:[lt]}),Xe.splice(Xe.indexOf(lt,ot),1));for(st=0,ot=0;st<Ve.length;st++)lt=Ve[Ve.length-1-st],Xe[Xe.length-1-st]!==lt&&(Be.hasOwnProperty(lt)?(ve.push({command:Tn.removeLayer,args:[lt]}),Xe.splice(Xe.lastIndexOf(lt,Xe.length-ot),1)):ot++,Yt=Xe[Xe.length-st],ve.push({command:Tn.addLayer,args:[et[lt],Yt]}),Xe.splice(Xe.length-st,0,lt),ht[lt]=!0);for(st=0;st<Ve.length;st++)if(lt=Ve[st],gt=Be[lt],Tt=et[lt],!ht[lt]&&!n.bn(gt,Tt))if(n.bn(gt.source,Tt.source)&&n.bn(gt["source-layer"],Tt["source-layer"])&&n.bn(gt.type,Tt.type)){for(Lt in an(gt.layout,Tt.layout,ve,lt,null,Tn.setLayoutProperty),an(gt.paint,Tt.paint,ve,lt,null,Tn.setPaintProperty),n.bn(gt.slot,Tt.slot)||ve.push({command:Tn.setSlot,args:[lt,Tt.slot]}),n.bn(gt.filter,Tt.filter)||ve.push({command:Tn.setFilter,args:[lt,Tt.filter]}),n.bn(gt.minzoom,Tt.minzoom)&&n.bn(gt.maxzoom,Tt.maxzoom)||ve.push({command:Tn.setLayerZoomRange,args:[lt,Tt.minzoom,Tt.maxzoom]}),gt)gt.hasOwnProperty(Lt)&&Lt!=="layout"&&Lt!=="paint"&&Lt!=="filter"&&Lt!=="metadata"&&Lt!=="minzoom"&&Lt!=="maxzoom"&&Lt!=="slot"&&(Lt.indexOf("paint.")===0?an(gt[Lt],Tt[Lt],ve,lt,Lt.slice(6),Tn.setPaintProperty):n.bn(gt[Lt],Tt[Lt])||ve.push({command:Tn.setLayerProperty,args:[lt,Lt,Tt[Lt]]}));for(Lt in Tt)Tt.hasOwnProperty(Lt)&&!gt.hasOwnProperty(Lt)&&Lt!=="layout"&&Lt!=="paint"&&Lt!=="filter"&&Lt!=="metadata"&&Lt!=="minzoom"&&Lt!=="maxzoom"&&Lt!=="slot"&&(Lt.indexOf("paint.")===0?an(gt[Lt],Tt[Lt],ve,lt,Lt.slice(6),Tn.setPaintProperty):n.bn(gt[Lt],Tt[Lt])||ve.push({command:Tn.setLayerProperty,args:[lt,Lt,Tt[Lt]]}))}else ve.push({command:Tn.removeLayer,args:[lt]}),Yt=Xe[Xe.lastIndexOf(lt)+1],ve.push({command:Tn.addLayer,args:[Tt,Yt]})}(te,L.layers,j)}catch(H){console.warn("Unable to compute style diff:",H),j=[{command:Tn.setStyle,args:[L]}]}return j}(this.serialize(),o).filter(P=>!(P.command in Qs));if(A.length===0)return!1;const R=A.filter(P=>!(P.command in mf));if(R.length>0)throw new Error(`Unimplemented: ${R.map(P=>P.command).join(", ")}.`);const C=[];return A.forEach(P=>{C.push(this[P.command].apply(this,P.args))}),c&&Promise.all(C).then(c),this.stylesheet=o,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}_updateWorkerImages(){this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages})}addImages(o){for(const[c,A]of o.entries()){if(this.getImage(c)&&!c.iconsetId)return this.fire(new n.z(new Error(`An image with the name "${c.name}" already exists.`)));this.imageManager.addImage(c,this.scope,A),this._changes.updateImage(c)}return this._updateWorkerImages(),this.fire(new n.A("data",{dataType:"style"})),this}addImage(o,c){return this.getImage(o)&&!o.iconsetId?this.fire(new n.z(new Error(`An image with the name "${o.name}" already exists.`))):(this.imageManager.addImage(o,this.scope,c),this._changes.updateImage(o),this._updateWorkerImages(),this.fire(new n.A("data",{dataType:"style"})),this)}updateImage(o,c,A=!1){this.imageManager.updateImage(o,this.scope,c),A&&(this._changes.updateImage(o),this._updateWorkerImages(),this.fire(new n.A("data",{dataType:"style"})))}getImage(o){return this.imageManager.getImage(o,this.scope)}removeImage(o){return this.getImage(o)?(this.imageManager.removeImage(o,this.scope),this._changes.updateImage(o),this._updateWorkerImages(),this.fire(new n.A("data",{dataType:"style"})),this):this.fire(new n.z(new Error("No image with this name exists.")))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(o,c,A={}){return this._checkLoaded(),this._validate(yt,`models.${o}`,c,null,A)||(this.modelManager.addModel(o,c,this.scope),this._changes.setDirty()),this}hasModel(o){return this.modelManager.hasModel(o,this.scope)}removeModel(o){return this.hasModel(o)?(this.modelManager.removeModel(o,this.scope),this):this.fire(new n.z(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(o,c,A={}){if(this._checkLoaded(),this.getOwnSource(o)!==void 0)throw new Error(`There is already a source with ID "${o}".`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(Oo,`sources.${o}`,c,null,A))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const R=Mo(o,c,this.dispatcher,this);R.scope=this.scope,R.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(R.id),source:R.serialize(),sourceId:R.id}));const C=P=>{const L=(P?"symbol:":"other:")+R.id,j=n.C(L,this.scope),H=this._sourceCaches[L]=new Xo(j,R,P);(P?this._symbolSourceCaches:this._otherSourceCaches)[R.id]=H,H.onAdd(this.map)};C(!1),c.type!=="vector"&&c.type!=="geojson"||C(!0),R.onAdd&&R.onAdd(this.map),A.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(o){this._checkLoaded();const c=this.getOwnSource(o);if(!c)throw new Error("There is no source with this ID");for(const R in this._layers)if(this._layers[R].source===o)return this.fire(new n.z(new Error(`Source "${o}" cannot be removed while layer "${R}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===o)return this.fire(new n.z(new Error(`Source "${o}" cannot be removed while terrain is using it.`)));const A=this.getOwnSourceCaches(o);for(const R of A){const C=n.cr(R.id);delete this._sourceCaches[C],this._changes.discardSourceCacheUpdate(R.id),R.fire(new n.A("data",{sourceDataType:"metadata",dataType:"source",sourceId:R.getSource().id})),R.setEventedParent(null),R.clearTiles()}return delete this._otherSourceCaches[o],delete this._symbolSourceCaches[o],this.mergeSources(),c.setEventedParent(null),c.onRemove&&c.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(o,c){this._checkLoaded(),this.getOwnSource(o).setData(c),this._changes.setDirty()}getOwnSource(o){const c=this.getOwnSourceCache(o);return c&&c.getSource()}getOwnSources(){const o=[];for(const c in this._otherSourceCaches){const A=this.getOwnSourceCache(c);A&&o.push(A.getSource())}return o}areTilesLoaded(){const o=this._mergedSourceCaches;for(const c in o){const A=o[c]._tiles;for(const R in A){const C=A[R];if(C.state!=="loaded"&&C.state!=="errored")return!1}}return!0}setLights(o){if(this._checkLoaded(),!o)return delete this.ambientLight,void delete this.directionalLight;const c=this._getTransitionParameters();for(const R of o){if(this._validate(fn,"lights",R))return;switch(R.type){case"ambient":if(this.ambientLight){const C=this.ambientLight;C.set(R),C.updateTransitions(c)}else this.ambientLight=new Vi(R,qr||(qr=new n.a7({color:new n.a8(n.a5.properties_light_ambient.color),"color-use-theme":new n.a8({type:"string",default:"default","property-type":"data-constant"}),intensity:new n.a8(n.a5.properties_light_ambient.intensity)})),this.scope,this.options);break;case"directional":if(this.directionalLight){const C=this.directionalLight;C.set(R),C.updateTransitions(c)}else this.directionalLight=new Vi(R,yn||(yn=new n.a7({direction:new n.am(n.a5.properties_light_directional.direction),color:new n.a8(n.a5.properties_light_directional.color),"color-use-theme":new n.a8({type:"string",default:"default","property-type":"data-constant"}),intensity:new n.a8(n.a5.properties_light_directional.intensity),"cast-shadows":new n.a8(n.a5.properties_light_directional["cast-shadows"]),"shadow-quality":new n.a8(n.a5.properties_light_directional["shadow-quality"]),"shadow-intensity":new n.a8(n.a5.properties_light_directional["shadow-intensity"])})),this.scope,this.options)}}const A=new n.aa(this.z||0,c);this.ambientLight&&this.ambientLight.recalculate(A),this.directionalLight&&this.directionalLight.recalculate(A),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const o=this.directionalLight,c=this.ambientLight;if(!o||!c)return;const A=ae=>.2126*(ae[0]<=.03928?ae[0]/12.92:Math.pow((ae[0]+.055)/1.055,2.4))+.7152*(ae[1]<=.03928?ae[1]/12.92:Math.pow((ae[1]+.055)/1.055,2.4))+.0722*(ae[2]<=.03928?ae[2]/12.92:Math.pow((ae[2]+.055)/1.055,2.4)),R=o.properties.get("color").toRenderColor(null).toArray01(),C=o.properties.get("intensity"),P=o.properties.get("direction"),L=1-n.cc(P.x,P.y,P.z)[2]/90,j=A(R)*C*L,H=c.properties.get("color").toRenderColor(null).toArray01(),W=c.properties.get("intensity"),te=A(H)*W;return Number(((j+te)/2).toFixed(6))}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const o=[];return this.directionalLight&&o.push(this.directionalLight.get()),this.ambientLight&&o.push(this.ambientLight.get()),o}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(o){if(!o)return this;if(n.cs(o)){const c=n.ct(o),A=this.fragments.find(({id:C})=>C===c);if(!A)throw new Error(`Style import '${o}' not found`);const R=n.cr(o);return A.style.getFragmentStyle(R)}{const c=this.fragments.find(({id:A})=>A===o);return c?c.style:void 0}}setFeaturesetSelectors(o){if(!o)return;const c={},A=(R,C="")=>`${R}::${C}`;this._featuresetSelectors={};for(const R in o){const C=this._featuresetSelectors[R]=[];for(const P of o[R].selectors){if(P.featureNamespace){const j=this.getOwnLayer(P.layer);if(!j){n.w(`Layer is undefined for selector: ${P.layer}`);continue}const H=A(j.source,j.sourceLayer);if(H in c&&c[H]!==P.featureNamespace){n.w(`"featureNamespace ${P.featureNamespace} of featureset ${R}'s selector is not associated to the same source, skip this selector`);continue}c[H]=P.featureNamespace}let L;if(P.properties)for(const j in P.properties){const H=n.X(P.properties[j]);H.result==="success"&&(L=L||{},L[j]=H.value)}C.push({layerId:P.layer,namespace:P.featureNamespace,properties:L,uniqueFeatureID:P._uniqueFeatureID})}}}getFeaturesetDescriptors(o){const c=this.getFragmentStyle(o);if(!c||!c.stylesheet.featuresets)return[];const A=[];for(const R in c.stylesheet.featuresets)A.push({featuresetId:R,importId:c.scope?c.scope:void 0});return A}getFeaturesetLayers(o,c){const A=this.getFragmentStyle(c),R=A.stylesheet.featuresets;if(!R||!R[o])return this.fire(new n.z(new Error(`The featureset '${o}' does not exist in the map's style and cannot be queried.`))),[];const C=[];for(const P of R[o].selectors){const L=A.getOwnLayer(P.layer);L&&C.push(L)}return C}getConfigProperty(o,c){const A=this.getFragmentStyle(o);if(!A)return null;const R=n.C(c,A.scope),C=A.options.get(R),P=C?C.value||C.default:null;return P?P.serialize():null}setConfigProperty(o,c,A){const R=this.getFragmentStyle(o);if(!R)return;const C=R.stylesheet.indoor?xd(R.stylesheet.schema):R.stylesheet.schema;if(!C||!C[c])return;const P=n.X(A);if(P.result!=="success")return void Zi(this,P.value);const L=P.value.expression,j=n.C(c,R.scope),H=R.options.get(j);if(!H)return;let W;const{minValue:te,maxValue:ae,stepValue:ce,type:Te,values:ve}=C[c],Ee=n.X(C[c].default);Ee.result==="success"&&(W=Ee.value.expression),W?(this.options.set(j,Object.assign({},H,{value:L,default:W,minValue:te,maxValue:ae,stepValue:ce,type:Te,values:ve})),this.updateConfigDependencies(c)):this.fire(new n.z(new Error(`No schema defined for the config option "${c}" in the "${o}" fragment.`)))}getConfig(o){const c=this.getFragmentStyle(o);if(!c)return null;const A=c.stylesheet.schema;if(!A)return null;const R={};for(const C in A){const P=n.C(C,c.scope),L=c.options.get(P),j=L?L.value||L.default:null;R[C]=j?j.serialize():null}return R}setConfig(o,c){const A=this.getFragmentStyle(o);A&&(A.updateConfig(c,A.stylesheet.schema),this.updateConfigDependencies())}getSchema(o){const c=this.getFragmentStyle(o);return c?c.stylesheet.schema:null}setSchema(o,c){const A=this.getFragmentStyle(o);A&&(A.stylesheet.schema=c,A.updateConfig(A._config,c),this.updateConfigDependencies())}updateConfig(o,c){if(this._config=o,o||c)if(c)for(const A in c){let R,C;const P=n.X(c[A].default);if(P.result==="success"&&(R=P.value.expression),o&&o[A]!==void 0){const ae=n.X(o[A]);ae.result==="success"&&(C=ae.value.expression)}const{minValue:L,maxValue:j,stepValue:H,type:W,values:te}=c[A];if(R){const ae=n.C(A,this.scope);this.options.set(ae,{default:R,value:C,minValue:L,maxValue:j,stepValue:H,type:W,values:te})}else this.fire(new n.z(new Error(`No schema defined for config option "${A}".`)))}else this.fire(new n.z(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(o){for(const c of this._configDependentLayers){const A=this.getLayer(c);if(A){if(o&&!A.configDependencies.has(o))continue;A.possiblyEvaluateVisibility(),this._updateLayer(A)}}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.snow&&this.snow.updateConfig(this.options),this.rain&&this.rain.updateConfig(this.options),this.forEachFragmentStyle(c=>{const A=c._styleColorTheme.colorThemeOverride?c._styleColorTheme.colorThemeOverride:c._styleColorTheme.colorTheme;if(A){const R=c._evaluateColorThemeData(A);(!c._styleColorTheme.lut&&R!==""||c._styleColorTheme.lut&&R!==c._styleColorTheme.lut.data)&&c.setColorTheme(A)}}),this._changes.setDirty()}addLayer(o,c,A={}){this._checkLoaded();const R=o.id;if(this._layers[R])return void this.fire(new n.z(new Error(`Layer with id "${R}" already exists on this map`)));let C;if(o.type==="custom"){if(Zi(this,n.cu(o)))return;C=n.cv(o,this.scope,this._styleColorTheme.lut,this.options)}else{if(typeof o.source=="object"&&(this.addSource(R,o.source),o=n.cq(o),o=n.l(o,{source:R})),this._validate(xe,`layers.${R}`,o,{arrayIndex:-1},A))return;C=n.cv(o,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(C),C.setEventedParent(this,{layer:{id:R}})}C.configDependencies.size!==0&&this._configDependentLayers.add(C.fqid);let P=this._order.length;if(c){const W=this._order.indexOf(c);if(W===-1)return void this.fire(new n.z(new Error(`Layer with id "${c}" does not exist on this map.`)));C.slot===this._layers[c].slot?P=W:n.w(`Layer with id "${c}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(P,0,R),this._layerOrderChanged=!0,this._layers[R]=C;const L=this.getOwnLayerSourceCache(C),j=!!this.directionalLight&&this.directionalLight.shadowsEnabled();L&&C.canCastShadows()&&j&&(L.castsShadows=!0);const H=this._changes.getRemovedLayer(C);if(H&&C.source&&L&&C.type!=="custom"){this._changes.discardLayerRemoval(C);const W=n.C(C.source,C.scope);H.type!==C.type?this._changes.updateSourceCache(W,"clear"):(this._changes.updateSourceCache(W,"reload"),L.pause())}this._updateLayer(C),C.onAdd&&C.onAdd(this.map),C.scope=this.scope,this.mergeLayers()}moveLayer(o,c){this._checkLoaded();const A=this._checkLayer(o);if(!A||o===c)return;const R=this._order.indexOf(o);this._order.splice(R,1);let C=this._order.length;if(c){const P=this._order.indexOf(c);if(P===-1)return void this.fire(new n.z(new Error(`Layer with id "${c}" does not exist on this map.`)));A.slot===this._layers[c].slot?C=P:n.w(`Layer with id "${c}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(C,0,o),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(o){this._checkLoaded();const c=this._checkLayer(o);if(!c)return;c.setEventedParent(null);const A=this._order.indexOf(o);this._order.splice(A,1),delete this._layers[o],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(c.fqid),this._changes.removeLayer(c);const R=this.getOwnLayerSourceCache(c);if(R&&R.castsShadows){let C=!1;for(const P in this._layers)if(this._layers[P].source===c.source&&this._layers[P].canCastShadows()){C=!0;break}R.castsShadows=C}c.onRemove&&c.onRemove(this.map),this.mergeLayers()}getOwnLayer(o){return this._layers[o]}hasLayer(o){return o in this._mergedLayers}hasLayerType(o){for(const c in this._layers)if(this._layers[c].type===o)return!0;return!1}setLayerZoomRange(o,c,A){this._checkLoaded();const R=this._checkLayer(o);R&&(R.minzoom===c&&R.maxzoom===A||(c!=null&&(R.minzoom=c),A!=null&&(R.maxzoom=A),this._updateLayer(R)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(o,c){this._checkLoaded();const A=this._checkLayer(o);A&&A.slot!==c&&(A.slot=c,this._updateLayer(A))}setFilter(o,c,A={}){this._checkLoaded();const R=this._checkLayer(o);if(R&&!n.bn(R.filter,c))return c==null?(R.filter=void 0,void this._updateLayer(R)):void(this._validate(Oe,`layers.${R.id}.filter`,c,{layerType:R.type},A)||(R.filter=n.cq(c),this._updateLayer(R)))}getFilter(o){const c=this._checkLayer(o);if(c)return n.cq(c.filter)}setLayoutProperty(o,c,A,R={}){this._checkLoaded();const C=this._checkLayer(o);if(C&&!n.bn(C.getLayoutProperty(c),A)){if(A!=null&&(!R||R.validate!==!1)&&Zi(C,_t.call(Qi,{key:`layers.${o}.layout.${c}`,layerType:C.type,objectKey:c,value:A,styleSpec:n.a5,style:{glyphs:!0,sprite:!0}})))return;C.setLayoutProperty(c,A),C.configDependencies.size!==0&&this._configDependentLayers.add(C.fqid),this._updateLayer(C)}}getLayoutProperty(o,c){const A=this._checkLayer(o);if(A)return A.getLayoutProperty(c)}setPaintProperty(o,c,A,R={}){this._checkLoaded();const C=this._checkLayer(o);if(!C||n.bn(C.getPaintProperty(c),A)||A!=null&&(!R||R.validate!==!1)&&Zi(C,rt.call(Qi,{key:`layers.${o}.paint.${c}`,layerType:C.type,objectKey:c,value:A,styleSpec:n.a5})))return;const P=C.setPaintProperty(c,A);C.configDependencies.size!==0&&this._configDependentLayers.add(C.fqid),P&&this._updateLayer(C),this._changes.updatePaintProperties(C)}getPaintProperty(o,c){const A=this._checkLayer(o);if(A)return A.getPaintProperty(c)}setFeatureState(o,c){if(this._checkLoaded(),"target"in o){if("featuresetId"in o.target){const{featuresetId:j,importId:H}=o.target,W=this.getFragmentStyle(H),te=W.getFeaturesetLayers(j);for(const{source:ae,sourceLayer:ce}of te)W.setFeatureState({id:o.id,source:ae,sourceLayer:ce},c)}else if("layerId"in o.target){const{layerId:j}=o.target,H=this.getLayer(j);this.setFeatureState({id:o.id,source:H.source,sourceLayer:H.sourceLayer},c)}return}const A=o.source,R=o.sourceLayer,C=this._checkSource(A);if(!C)return;const P=C.type;if(P==="geojson"&&R)return void this.fire(new n.z(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(P==="vector"&&!R)return void this.fire(new n.z(new Error("The sourceLayer parameter must be provided for vector source types.")));o.id===void 0&&this.fire(new n.z(new Error("The feature id parameter must be provided.")));const L=this.getOwnSourceCaches(A);for(const j of L)j.setFeatureState(R,o.id,c)}removeFeatureState(o,c){if(this._checkLoaded(),"target"in o){if("featuresetId"in o.target){const{featuresetId:j,importId:H}=o.target,W=this.getFragmentStyle(H),te=W.getFeaturesetLayers(j);for(const{source:ae,sourceLayer:ce}of te)W.removeFeatureState({id:o.id,source:ae,sourceLayer:ce},c)}else if("layerId"in o.target){const{layerId:j}=o.target,H=this.getLayer(j);this.removeFeatureState({id:o.id,source:H.source,sourceLayer:H.sourceLayer},c)}return}const A=o.source,R=this._checkSource(A);if(!R)return;const C=R.type,P=C==="vector"?o.sourceLayer:void 0;if(C==="vector"&&!P)return void this.fire(new n.z(new Error("The sourceLayer parameter must be provided for vector source types.")));if(c&&typeof o.id!="string"&&typeof o.id!="number")return void this.fire(new n.z(new Error("A feature id is required to remove its specific state property.")));const L=this.getOwnSourceCaches(A);for(const j of L)j.removeFeatureState(P,o.id,c)}getFeatureState(o){if(this._checkLoaded(),"target"in o){let C;if("featuresetId"in o.target){const{featuresetId:P,importId:L}=o.target,j=this.getFragmentStyle(L),H=j.getFeaturesetLayers(P);for(const{source:W,sourceLayer:te}of H){const ae=j.getFeatureState({id:o.id,source:W,sourceLayer:te});if(ae&&!C)C=ae;else if(!n.bn(C,ae))return void this.fire(new n.z(new Error("The same feature id exists in multiple sources in the featureset, but their feature states are not consistent through the sources.")))}}else if("layerId"in o.target){const{layerId:P}=o.target,L=this.getLayer(P);C=this.getFeatureState({id:o.id,source:L.source,sourceLayer:L.sourceLayer})}return C}const c=o.source,A=o.sourceLayer,R=this._checkSource(c);if(R){if(R.type!=="vector"||A)return o.id===void 0&&this.fire(new n.z(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(c)[0].getFeatureState(A,o.id);this.fire(new n.z(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(o){return this.stylesheet.transition=n.l({},this.stylesheet.transition,o),this.transition=this.stylesheet.transition,this}getTransition(){return n.l({},this.stylesheet.transition)}serialize(){this._checkLoaded();const o=this.getTerrain(),c=o&&this.terrain&&this.terrain.scope===this.scope?o:this.stylesheet.terrain;return n.cw({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,iconsets:this.stylesheet.iconsets,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:c,fog:this.stylesheet.fog,snow:this.stylesheet.snow,rain:this.stylesheet.rain,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},A=>A!==void 0)}_updateFilteredLayers(o){for(const c of Object.values(this._mergedLayers))o(c)&&this._updateLayer(c)}_updateLayer(o){this._changes.updateLayer(o);const c=this.getLayerSourceCache(o),A=n.C(o.source,o.scope),R=this._changes.getUpdatedSourceCaches();o.source&&!R[A]&&c&&c.getSource().type!=="raster"&&(this._changes.updateSourceCache(A,"reload"),c.pause()),o.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(o){const c=L=>this._mergedLayers[L].is3D(!!this.terrain),A=this.order,R={},C=[];for(let L=A.length-1;L>=0;L--){const j=A[L];if(c(j)){R[j]=L;for(const H of o){const W=H[j];if(W)for(const te of W)C.push(te)}}}C.sort((L,j)=>j.intersectionZ-L.intersectionZ);const P=[];for(let L=A.length-1;L>=0;L--){const j=A[L];if(c(j))for(let H=C.length-1;H>=0;H--){const W=C[H].feature;if(W.layer&&R[W.layer.id]<L)break;P.push(W),C.pop()}else for(const H of o){const W=H[j];if(W)for(const te of W)P.push(te.feature)}}return P}queryRenderedFeatures(o,c,A){let R;c&&!Array.isArray(c)&&c.filter&&(this._validate(Oe,"queryRenderedFeatures.filter",c.filter,null,c),R=n.a_(c.filter));const C={},P=W=>{if(fo.has(W.type))return;const te=this.getOwnLayerSourceCache(W),ae=C[te.id]=C[te.id]||{sourceCache:te,layers:{},has3DLayers:!1};W.is3D(!!this.terrain)&&(ae.has3DLayers=!0),ae.layers[W.fqid]=ae.layers[W.fqid]||{styleLayer:W,targets:[]},ae.layers[W.fqid].targets.push({filter:R})};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new n.z(new Error("parameters.layers must be an Array."))),[];for(const W of c.layers){const te=this._layers[W];if(!te)return this.fire(new n.z(new Error(`The layer '${W}' does not exist in the map's style and cannot be queried for features.`))),[];P(te)}}else for(const W in this._layers)P(this._layers[W]);const L=this._queryRenderedFeatures(o,C,A),j=this._flattenAndSortRenderedFeatures(L),H=[];for(const W of j)n.ct(W.layer.id)===this.scope&&H.push(W);return H}queryRenderedFeatureset(o,c,A){let R;c&&!Array.isArray(c)&&c.filter&&(this._validate(Oe,"queryRenderedFeatures.filter",c.filter,null,c),R=n.a_(c.filter));const C="mock",P=[];if(c&&c.target)P.push(Object.assign({},c,{targetId:C,filter:R}));else{const W=this.getFeaturesetDescriptors();for(const te of W)P.push({targetId:C,filter:R,target:te});for(const{style:te}of this.fragments){const ae=te.getFeaturesetDescriptors();for(const ce of ae)P.push({targetId:C,filter:R,target:ce})}}const L=this.queryRenderedTargets(o,P,A),j=[],H=new Set;for(const W of L)for(const te of W.variants[C])Nc(te,W,H)||j.push(new n.cx(W,te));return j}queryRenderedTargets(o,c,A){const R={},C=(L,j,H,W)=>{const te=R[j.id]=R[j.id]||{sourceCache:j,layers:{},has3DLayers:!1};if(te.layers[L.fqid]=te.layers[L.fqid]||{styleLayer:L,targets:[]},L.is3D(!!this.terrain)&&(te.has3DLayers=!0),!W)return H.uniqueFeatureID=!1,void te.layers[L.fqid].targets.push(H);te.layers[L.fqid].targets.push(Object.assign({},H,{namespace:W.namespace,properties:W.properties,uniqueFeatureID:W.uniqueFeatureID}))};for(const L of c)if("featuresetId"in L.target){const{featuresetId:j,importId:H}=L.target,W=this.getFragmentStyle(H);if(!W||!W._featuresetSelectors)continue;const te=W._featuresetSelectors[j];if(!te){this.fire(new n.z(new Error(`The featureset '${j}' does not exist in the map's style and cannot be queried for features.`)));continue}for(const ae of te){const ce=W.getOwnLayer(ae.layerId);ce&&!fo.has(ce.type)&&C(ce,W.getOwnLayerSourceCache(ce),L,ae)}}else if("layerId"in L.target){const{layerId:j}=L.target,H=this.getLayer(j);if(!H||fo.has(H.type))continue;C(H,this.getLayerSourceCache(H),L)}const P=this._queryRenderedFeatures(o,R,A);return this._flattenAndSortRenderedFeatures(P)}_queryRenderedFeatures(o,c,A){const R=[],C=!!this.map._showQueryGeometry,P=Gi.createFromScreenPoints(o,A);for(const L in c){const j=ah(P,c[L],this._availableImages,A,C);Object.keys(j).length&&R.push(j)}if(this.placement)for(const L in c){if(!c[L].sourceCache._onlySymbols)continue;const j=du(P.screenGeometry,c[L],this._availableImages,this.placement.collisionIndex,this.placement.retainedQueryData);Object.keys(j).length&&R.push(j)}return R}querySourceFeatures(o,c){const A=c&&c.filter;A&&this._validate(Oe,"querySourceFeatures.filter",A,null,c);let R=[];const C=this.getOwnSourceCaches(o);for(const P of C)R=R.concat(Vc(P,c));return R}addSourceType(o,c,A){return eo.getSourceType(o)?A(new Error(`A source type called "${o}" already exists.`)):(eo.setSourceType(o,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:c.workerSourceURL},A):A(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(o,c,A={}){this._checkLoaded();const R=this.light.getLight();let C=!1;for(const L in o)if(!n.bn(o[L],R[L])){C=!0;break}if(!C)return;const P=this._getTransitionParameters();this.light.setLight(o,c,A),this.light.updateTransitions(P)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=n.q.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&n.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(o,c=1){if(this._checkLoaded(),!o)return this.terrainSetForDrapingOnly()||(delete this.terrain,this.map.transform.projection.requiresDraping&&this.setTerrainForDraping()),c===0&&delete this.terrain,o===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let A=o;const R=o.source==null;if(c===1){if(this.disableElevatedTerrain)return;if(typeof A.source=="object"){const L="terrain-dem-src";this.addSource(L,A.source),A=n.cq(A),A=n.l(A,{source:L})}const C=n.l({},A),P={};if(this.terrain&&R){C.source=this.terrain.get().source;const L=this.terrain?this.getFragmentStyle(this.terrain.scope):null;L&&(P.style=L.serialize())}if(this._validate(ui,"terrain",C,P))return}if(!this.terrain||this.terrain.scope!==this.scope&&!R||this.terrain&&c!==this.terrain.drapeRenderMode){if(!A)return;this._createTerrain(A,c),this.fire(new n.A("data",{dataType:"style"}))}else{const C=this.terrain,P=C.get();for(const L of Object.keys(n.a5.terrain))!A.hasOwnProperty(L)&&n.a5.terrain[L].default&&(A[L]=n.a5.terrain[L].default);for(const L in o)if(!n.bn(o[L],P[L])){C.set(o,this.options),this.stylesheet.terrain=o;const j=this._getTransitionParameters({duration:0});C.updateTransitions(j),this.fire(new n.A("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(o){const c=this.fog=new Gr(o,this.map.transform,this.scope,this.options);this.stylesheet.fog=c.get();const A=this._getTransitionParameters({duration:0});c.updateTransitions(A)}_createSnow(o){const c=this.snow=new Hr(o,this.map.transform,this.scope,this.options);this.stylesheet.snow=c.get();const A=this._getTransitionParameters({duration:0});c.updateTransitions(A)}_createRain(o){const c=this.rain=new In(o,this.map.transform,this.scope,this.options);this.stylesheet.rain=c.get();const A=this._getTransitionParameters({duration:0});c.updateTransitions(A)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const o of this.map._markers)o._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(o){if(this._checkLoaded(),!o)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const c=this.fog;if(!n.bn(c.get(),o)){c.set(o,this.options),this.stylesheet.fog=c.get();const A=this._getTransitionParameters({duration:0});c.updateTransitions(A)}}else this._createFog(o);this._markersNeedUpdate=!0}getSnow(){return this.snow?this.snow.get():null}setSnow(o){if(this._checkLoaded(),!o)return delete this.snow,void delete this.stylesheet.snow;if(this.snow){const c=this.snow;if(!n.bn(c.get(),o)){c.set(o,this.options),this.stylesheet.snow=c.get();const A=this._getTransitionParameters({duration:0});c.updateTransitions(A)}}else this._createSnow(o);this._markersNeedUpdate=!0}getRain(){return this.rain?this.rain.get():null}setRain(o){if(this._checkLoaded(),!o)return delete this.rain,void delete this.stylesheet.rain;if(this.rain){const c=this.rain;if(!n.bn(c.get(),o)){c.set(o,this.options),this.stylesheet.rain=c.get();const A=this._getTransitionParameters({duration:0});c.updateTransitions(A)}}else this._createRain(o);this._markersNeedUpdate=!0}_reloadColorTheme(){const o=()=>{for(const R in this._layers)this._layers[R].lut=this._styleColorTheme.lut;for(const R in this._sourceCaches)this._sourceCaches[R].clearTiles()},c=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(!c)return this._styleColorTheme.lut=null,void o();const A=this._evaluateColorThemeData(c);this._loadColorTheme(A).then(()=>{this.fire(new n.A("colorthemeset")),o()}).catch(R=>{n.w(`Couldn't set color theme: ${R}`)})}setColorTheme(o){this._checkLoaded(),this._styleColorTheme.colorThemeOverride&&n.w("Note: setColorTheme is called on a style with a color-theme override, the passed color-theme won't be visible."),this._styleColorTheme.colorTheme=o,this._reloadColorTheme()}setImportColorTheme(o,c){const A=this.getFragmentStyle(o);A&&(A._styleColorTheme.colorThemeOverride=c,A._reloadColorTheme())}_getTransitionParameters(o){return{now:n.q.now(),transition:n.l(this.transition,o)}}updateDrapeFirstLayers(){if(!this.terrain)return;const o=[],c=[];for(const A of this._mergedOrder)this.isLayerDraped(this._mergedLayers[A])?o.push(A):c.push(A);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...o),this._drapedFirstOrder.push(...c)}_createTerrain(o,c){const A=this.terrain=new $t(o,c,this.scope,this.options);c===1&&(this.stylesheet.terrain=o),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const R=this._getTransitionParameters({duration:0});A.updateTransitions(R)}_force3DLayerUpdate(){for(const o in this._layers){const c=this._layers[o];c.type==="fill-extrusion"&&this._updateLayer(c)}}_forceSymbolLayerUpdate(){for(const o in this._layers){const c=this._layers[o];c.type==="symbol"&&this._updateLayer(c)}}_validate(o,c,A,R,C={}){if(C&&C.validate===!1)return!1;const P=n.l({},this.serialize());return Zi(this,o.call(Qi,n.l({key:c,style:P,value:A,styleSpec:n.a5},R)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),n.cy.off("pluginStateChange",this._rtlTextPluginCallback);for(const o in this._mergedLayers)this._mergedLayers[o].setEventedParent(null);for(const o in this._mergedSourceCaches)this._mergedSourceCaches[o].clearTiles(),this._mergedSourceCaches[o].setEventedParent(null);this.setEventedParent(null),delete this.fog,delete this.snow,delete this.rain,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(o){const c=this.getSourceCaches(o);for(const A of c)A.clearTiles()}clearSources(){for(const o in this._mergedSourceCaches)this._mergedSourceCaches[o].clearTiles()}reloadSource(o){const c=this.getSourceCaches(o);for(const A of c)A.resume(),A.reload()}reloadSources(){for(const o of this.getSources())o.reload&&o.reload()}reloadModels(){this.modelManager.reloadModels(""),this.forEachFragmentStyle(o=>{o.modelManager.reloadModels(o.scope)})}updateSources(o){let c;this.directionalLight&&(c=bl(this.directionalLight));for(const A in this._mergedSourceCaches)this._mergedSourceCaches[A].update(o,void 0,void 0,c)}_generateCollisionBoxes(){for(const o in this._sourceCaches){const c=this._sourceCaches[o];c.resume(),c.reload()}}_updatePlacement(o,c,A,R,C,P,L=!1){let j=!1,H=!1;const W={},te={};for(const ae of this._mergedOrder){const ce=this._mergedLayers[ae];if(ce.type!=="symbol")continue;const Te=n.C(ce.source,ce.scope);let ve=W[Te];if(!ve){const Ve=this.getLayerSourceCache(ce);if(!Ve)continue;const Be=Ve.getRenderableIds(!0).map(et=>Ve.getTileByID(et));te[Te]=Be.slice(),ve=W[Te]=Be.sort((et,Xe)=>Xe.tileID.overscaledZ-et.tileID.overscaledZ||(et.tileID.isLessThan(Xe.tileID)?-1:1))}const Ee=this.crossTileSymbolIndex.addLayer(ce,ve,c.center.lng,c.projection);j=j||Ee}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),L=L||this._layerOrderChanged||R===0,this._layerOrderChanged&&this.fire(new n.A("neworder")),(L||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(n.q.now(),c.zoom))&&(this.pauseablePlacement=new Sn(c,this._mergedOrder,L,A,R,C,this.placement,this.fog&&c.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,W,te,this.map.painter.scaleFactor),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(n.q.now()),H=!0),j&&this.pauseablePlacement.placement.setStale()),H||j){this._buildingIndex.onNewFrame(c.zoom);for(let ae=0;ae<this._mergedOrder.length;ae++){const ce=this._mergedLayers[this._mergedOrder[ae]];if(ce.type!=="symbol")continue;const Te=this.isLayerClipped(ce);this.placement.updateLayerOpacities(ce,W[n.C(ce.source,ce.scope)],ae,Te?P:null)}}return{needsRerender:!this.pauseablePlacement.isDone()||this.placement.hasTransitions(n.q.now())}}_releaseSymbolFadeTiles(){for(const o in this._sourceCaches)this._sourceCaches[o].releaseSymbolFadeTiles()}addImport(o,c){this._checkLoaded();const A=this.stylesheet.imports=this.stylesheet.imports||[];if(A.findIndex(({id:C})=>C===o.id)!==-1)return void this.fire(new n.z(new Error(`Import with id '${o.id}' already exists in the map's style.`)));if(!c)return A.push(o),this._loadImports([o],!0);const R=A.findIndex(({id:C})=>C===c);return R===-1&&this.fire(new n.z(new Error(`Import with id "${c}" does not exist on this map.`))),this.stylesheet.imports=A.slice(0,R).concat(o).concat(A.slice(R)),this._loadImports([o],!0,c)}updateImport(o,c){this._checkLoaded();const A=this.stylesheet.imports||[],R=this.getImportIndex(o);return R===-1?this:typeof c=="string"?(this.setImportUrl(o,c),this):(c.url&&c.url!==A[R].url&&this.setImportUrl(o,c.url),n.bn(c.config,A[R].config)||this.setImportConfig(o,c.config,c.data.schema),n.bn(c.data,A[R].data)||this.setImportData(o,c.data),this)}moveImport(o,c){this._checkLoaded();let A=this.stylesheet.imports||[];const R=this.getImportIndex(o);if(R===-1)return this;const C=this.getImportIndex(c);if(C===-1)return this;const P=A[R],L=this.fragments[R];return A=A.filter(({id:j})=>j!==o),this.fragments=this.fragments.filter(({id:j})=>j!==o),this.stylesheet.imports=A.slice(0,C).concat(P).concat(A.slice(C)),this.fragments=this.fragments.slice(0,C).concat(L).concat(this.fragments.slice(C)),this.mergeLayers(),this}setImportUrl(o,c){this._checkLoaded();const A=this.stylesheet.imports||[],R=this.getImportIndex(o);if(R===-1)return this;A[R].url=c;const C=this.fragments[R];return C.style=this._createFragmentStyle(A[R]),C.style.on("style.import.load",()=>this.mergeAll()),C.style.loadURL(c),this}setImportData(o,c){this._checkLoaded();const A=this.getImportIndex(o),R=this.stylesheet.imports||[];return A===-1?this:c?(this.fragments[A].style.setState(c),this._reloadImports(),this):(delete R[A].data,this.setImportUrl(o,R[A].url))}setImportConfig(o,c,A){this._checkLoaded();const R=this.getImportIndex(o),C=this.stylesheet.imports||[];if(R===-1)return this;c?C[R].config=c:delete C[R].config;const P=this.fragments[R];A&&P.style.stylesheet&&(P.style.stylesheet.schema=A);const L=P.style.stylesheet&&P.style.stylesheet.schema;return P.config=c,P.style.updateConfig(c,L),this.updateConfigDependencies(),this}removeImport(o){this._checkLoaded();const c=this.stylesheet.imports||[],A=this.getImportIndex(o);A!==-1&&(c.splice(A,1),this.fragments[A].style._remove(),this.fragments.splice(A,1),this._reloadImports())}getImportIndex(o){const c=(this.stylesheet.imports||[]).findIndex(A=>A.id===o);return c===-1&&this.fire(new n.z(new Error(`Import '${o}' does not exist in the map's style and cannot be updated.`))),c}getLayer(o){return this._mergedLayers[o]}getSources(){const o=[];for(const c in this._mergedOtherSourceCaches){const A=this._mergedOtherSourceCaches[c];A&&o.push(A.getSource())}return o}getSource(o,c){const A=this.getSourceCache(o,c);return A&&A.getSource()}getLayerSource(o){const c=this.getLayerSourceCache(o);return c&&c.getSource()}getSourceCache(o,c){const A=n.C(o,c);return this._mergedOtherSourceCaches[A]}getLayerSourceCache(o){const c=n.C(o.source,o.scope);return o.type==="symbol"?this._mergedSymbolSourceCaches[c]:this._mergedOtherSourceCaches[c]}getSourceCaches(o){if(o==null)return Object.values(this._mergedSourceCaches);const c=[];return this._mergedOtherSourceCaches[o]&&c.push(this._mergedOtherSourceCaches[o]),this._mergedSymbolSourceCaches[o]&&c.push(this._mergedSymbolSourceCaches[o]),c}updateSourceCaches(){const o=this._changes.getUpdatedSourceCaches();for(const c in o){const A=o[c];A==="reload"?this.reloadSource(c):A==="clear"&&this.clearSource(c)}}updateLayers(o){const c=this._changes.getUpdatedPaintProperties();for(const A of c){const R=this.getLayer(A);R&&R.updateTransitions(o)}}getGlyphsUrl(){return this.stylesheet.glyphs}setGlyphsUrl(o){this.stylesheet.glyphs=o,this.glyphManager.setURL(o,this.scope)}getImages(o,c,A){this.imageManager.getImages(c.images,c.scope,A),this._updateTilesForChangedImages();const R=P=>{if(P){const L=c.images.map(j=>n.I.toString(j));P.setDependencies(c.tileID.key,c.type,L)}},C=n.C(c.source,c.scope);R(this._mergedOtherSourceCaches[C]),R(this._mergedSymbolSourceCaches[C])}rasterizeImages(o,c,A){this.imageManager.rasterizeImages(c,A)}getGlyphs(o,c,A){this.glyphManager.getGlyphs(c.stacks,c.scope,A)}getResource(o,c,A){return n.cz(c,A)}getOwnSourceCache(o){return this._otherSourceCaches[o]}getOwnLayerSourceCache(o){return o.type==="symbol"?this._symbolSourceCaches[o.source]:this._otherSourceCaches[o.source]}getOwnSourceCaches(o){const c=[];return this._otherSourceCaches[o]&&c.push(this._otherSourceCaches[o]),this._symbolSourceCaches[o]&&c.push(this._symbolSourceCaches[o]),c}_isSourceCacheLoaded(o){const c=this.getOwnSourceCaches(o);return c.length===0?(this.fire(new n.z(new Error(`There is no source with ID '${o}'`))),!1):c.every(A=>A.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(o,c){if(!this._clipLayerPresent&&o.type!=="fill-extrusion")return!1;const A=o.type==="fill-extrusion"&&o.sourceLayer==="building";if(o.is3D(!!this.terrain)){if(A||c&&c.type==="batched-model"||o.type==="model")return!0}else if(o.type==="symbol")return!0;return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(o=>{o.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}eo.getSourceType=function(g){return Gl[g]},eo.setSourceType=function(g,o){Gl[g]=o},eo.registerForPluginStateChange=n.ci;var Mc=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,hc=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec3 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color,float height) {
#ifdef INDICATOR_CUTOUT
float verticalFadeRange=u_indicator_cutout_centers.z*0.25;float holeMinOpacity=mix(1.0,u_indicator_cutout_params.x,smoothstep(u_indicator_cutout_centers.z,u_indicator_cutout_centers.z+verticalFadeRange,height));float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,highp vec2 pos,highp vec2 lod_coord) {highp vec2 size=vec2(textureSize(image,0));highp vec2 dx=dFdx(lod_coord.xy*size);highp vec2 dy=dFdy(lod_coord.xy*size);highp float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));highp float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}`,Au=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const vec2 units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (units_to_pixels*pos+offset)/pattern_size;}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {return get_pattern_pos(pixel_coord_upper,pixel_coord_lower,pattern_size,vec2(tile_units_to_pixels),pos);}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,Ic="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",_u=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }
#endif
#ifdef DEPTH_OCCLUSION
uniform highp sampler2D u_depth;uniform highp vec2 u_depth_size_inv;uniform highp vec2 u_depth_range_unpack;uniform highp float u_occluder_half_size;uniform highp float u_occlusion_depth_offset;
#ifdef DEPTH_D24
float unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}
#else
highp float unpack_depth_rgba(vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;
#ifdef DEPTH_D24
float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);
#else
float depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));
#endif
return coord.z+u_occlusion_depth_offset > depth;}highp vec4 getCornerDepths(vec2 coord) {highp vec3 df=vec3(u_occluder_half_size*u_depth_size_inv,0.0);highp vec2 uv=0.5*coord.xy+0.5;
#ifdef DEPTH_D24
highp vec4 depth=vec4(
texture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r
);depth=unpack_depth4(depth);
#else
highp vec4 depth=vec4(
unpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))
);
#endif
return depth;}highp float occlusionFadeMultiSample(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec2 uv=0.5*coord.xy+0.5;int NX=3;int NY=4;highp vec2 df=u_occluder_half_size*u_depth_size_inv;highp vec2 oneStep=2.0*u_occluder_half_size*u_depth_size_inv/vec2(NX-1,NY-1);highp float res=0.0;for (int y=0; y < NY;++y) {for (int x=0; x < NX;++x) {
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)));
#endif
res+=1.0-clamp(300.0*(coord.z+u_occlusion_depth_offset-depth),0.0,1.0);}}res=clamp(2.0*res/float(NX*NY)-0.5,0.0,1.0);return res;}highp float occlusionFade(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec4 depth=getCornerDepths(coord.xy);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z+u_occlusion_depth_offset)-depth),0.0,1.0));}
#else
bool isOccluded(vec4 frag) { return false; }highp float occlusionFade(vec4 frag) { return 1.0; }highp float occlusionFadeMultiSample(vec4 frag) { return 1.0; }
#endif//DEPTH_OCCLUSION`,Lc=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,fc=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {return color;}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,Bu=`#ifdef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,Bo=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}
#endif
uniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}`,cs=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {vec3 transformed_normal=vec3(-normal.xy,normal.z);float NDotL=dot(normalize(transformed_normal),u_shadow_direction);float dotScale=min(1.0-NDotL,1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,Xn=`#ifdef RENDER_SHADOWS
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef TEXTURE_GATHER
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return clamp(mix(lerpx.x,lerpx.y,f.y),0.0,1.0);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz/=light_view_pos0.w;vec2 abs_bounds=abs(light_view_pos0.xy);if (abs_bounds.x >=1.0 || abs_bounds.y >=1.0) {return 0.0;}light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return clamp(mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth)),0.0,1.0);
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}highp vec2 compute_receiver_plane_depth_bias(highp vec3 pos_dx,highp vec3 pos_dy)
{highp vec2 biasUV=vec2(
pos_dy.y*pos_dx.z-pos_dx.y*pos_dy.z,pos_dx.x*pos_dy.z-pos_dy.x*pos_dx.z);biasUV*=1.0/((pos_dx.x*pos_dy.y)-(pos_dx.y*pos_dy.x));return biasUV;}float shadowed_light_factor_plane_bias(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {highp vec3 light_view_pos0_xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;highp vec3 light_view_pos0_ddx=dFdx(light_view_pos0_xyz);highp vec3 light_view_pos0_ddy=dFdy(light_view_pos0_xyz);highp vec2 plane_depth_bias=compute_receiver_plane_depth_bias(light_view_pos0_ddx,light_view_pos0_ddy);highp float bias=dot(vec2(u_shadow_texel_size,u_shadow_texel_size),plane_depth_bias)+0.0001;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const ai=[];Jl(Mc,ai),Jl(Au,ai),Jl(hc,ai);const qi={"_prelude_fog.vertex.glsl":Lc,"_prelude_terrain.vertex.glsl":_u,"_prelude_shadow.vertex.glsl":cs,"_prelude_fog.fragment.glsl":fc,"_prelude_shadow.fragment.glsl":Xn,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":Bu,"_prelude_raster_particle.glsl":Bo},is={};tn("",_u),tn(fc,Lc),tn(Xn,cs),tn(Bu,""),tn(Bo,"");const Xl=tn(hc,Au),Fc=Mc;var el={background:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in highp vec2 v_pos;void main() {highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec2 u_pattern_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_pattern_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float blur_positive=blur < 0.0 ? 0.0 : 1.0;lowp float antialiasblur=v_data.z;float extrude_length=length(extrude)+antialiasblur*(1.0-blur_positive);float antialiased_blur=-max(abs(blur),antialiasblur);float antialiase_blur_opacity=smoothstep(0.0,antialiasblur,extrude_length-1.0);float opacity_t=blur_positive==1.0 ? 
smoothstep(0.0,-antialiased_blur,1.0-extrude_length) : 
smoothstep(antialiased_blur,0.0,extrude_length-1.0)-antialiase_blur_opacity;float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
#ifdef ELEVATED_ROADS
in float a_circle_z_offset;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
#ifdef ELEVATED_ROADS
world_center.z+=a_circle_z_offset+ELEVATION_BIAS;
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:tn("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:tn(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:tn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:tn("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in vec2 a_elevation_from_sea;in float a_size_scale;in vec2 a_padding;in float a_auto_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {float feature_elevation=a_elevation_from_sea.x+a_auto_z_offset;float terrain_elevation=(a_elevation_from_sea.y==1.0 ? 0.0 : elevation(a_anchor_pos));vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(feature_elevation+terrain_elevation),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:tn("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:tn("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),elevatedStructuresDepth:tn(`void main() {
#ifndef DEPTH_TEXTURE
glFragColor=vec4(0.);
#endif
}`,"in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform float u_depth_bias;void main() {gl_Position=u_matrix*vec4(a_pos,a_height,1);gl_Position.z=gl_Position.z+u_depth_bias;}"),elevatedStructuresDepthReconstruct:tn(`#ifdef DEPTH_RECONSTRUCTION
in float v_height;
#endif
void main() {
#ifdef DEPTH_RECONSTRUCTION
if (v_height >=0.0)
discard;
#endif
glFragColor=vec4(1.0,0.0,0.0,1.0);}`,`in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform vec3 u_camera_pos;uniform highp float u_depth_bias;uniform lowp float u_height_scale;uniform lowp float u_reset_depth;
#ifdef DEPTH_RECONSTRUCTION
out float v_height;
#endif
void main() {vec3 vpos=vec3(a_pos,a_height*u_height_scale);
#ifdef DEPTH_RECONSTRUCTION
if (u_camera_pos.z > vpos.z) {vpos-=(u_camera_pos-vpos)*(vpos.z/(u_camera_pos.z-vpos.z));}v_height=a_height;
#endif
gl_Position=u_matrix*vec4(vpos,1);gl_Position.z=u_reset_depth==1.0 ? gl_Position.w : gl_Position.z+u_depth_bias;}`),elevatedStructures:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in vec3 v_normal;in float v_height;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth;
#endif
void main() {vec3 color=vec3(241.0/255.0,236.0/255.0,225.0/255.0);
#ifdef LIGHTING_3D_MODE
vec3 normal=normalize(v_normal);
#ifdef RENDER_SHADOWS
float shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,v_depth);color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#else
color=apply_lighting(color,normal);
#endif
if (v_height < 0.0) {float penetration=max(v_height+7.5,0.0);float occlusion=1.0-1.0/PI*acos(1.0-penetration/4.0);color=color*(1.0-pow(occlusion,2.0)*0.3);}
#endif
#ifdef FOG
color=fog_apply(color,v_fog_pos);
#endif
vec4 out_color=vec4(color,1.0);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_height);
#endif
glFragColor=out_color;HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;in float a_height;in vec3 a_pos_normal_3;uniform mat4 u_matrix;out vec3 v_normal;out float v_height;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {v_normal=a_pos_normal_3/16384.0;v_height=a_height;vec3 pos=vec3(a_pos,a_height);gl_Position=u_matrix*vec4(pos,1);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(v_normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fill:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=opacity;
#ifdef INDICATOR_CUTOUT
if (v_z_offset >=0.0) {out_color=applyCutout(out_color,v_z_offset);}
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=z_offset;
#endif
}`),fillOutline:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
in float v_height;
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float emissive_strength
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor;
#ifdef RENDER_CUTOFF
shadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}
#else
shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);
#endif
color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,h);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;uniform float u_width_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp float emissive_strength
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=cutoff_opacity(u_cutoff_params,ground.z);if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0) || (color.a==0.0));
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);scaled_pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;scaled_pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);float ndotl=calculate_NdotL(normal);v_flat.rgb=sRGBToLinear(color.rgb);v_flat.rgb=v_flat.rgb*(ndotl+(1.0-min(ndotl*57.29,1.0))*emissive_strength);v_flat=vec4(linearTosRGB(v_flat.rgb),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:tn(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_width_scale;uniform float u_vertical_scale;
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp vec4 color
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp vec4 color
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;float ele=elevation(pos_nx.xy);float c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);float h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in highp vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,height);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_width_scale;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
out highp vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
#pragma mapbox: define highp float line_width
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
#pragma mapbox: initialize highp float line_width
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);p.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;p.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:tn(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor_plane_bias(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0),0.0).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:tn(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp float u_dynamic_offset;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(u_dynamic_offset,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:tn(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform lowp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_floor_width_scale;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec3 v_uv;
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;float scaled_floorwidth=(floorwidth*u_floor_width_scale);alpha*=linearstep(0.5-sdfgamma/scaled_floorwidth,0.5+sdfgamma/scaled_floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trim_alpha=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);out_color=mix(out_color,u_trim_color,transition_factor);trim_alpha=1.0-transition_factor;}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=((border_width*u_width_scale)+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color=mix(border_color*trim_alpha,out_color,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
out_color.rgb*=mix(v_road_z_offset > 0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS) || defined(VARIABLE_LINE_WIDTH)
in vec3 a_z_offset_width;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec3 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;uniform float u_width_scale;uniform highp float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec3 v_uv;
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth;
#ifdef VARIABLE_LINE_WIDTH
float left=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);halfwidth=(u_width_scale*(left==1.0 ? a_z_offset_width.y : a_z_offset_width.z))/2.0;
#else
halfwidth=(u_width_scale*width)/2.0;
#endif
offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=max(length(projected_extrude_xy/gl_Position.w*u_units_to_pixels),0.001);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
highp float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float line_progress=a_packed[2];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec3(a_uv_x,a_split_index*texel_height-half_texel_height,line_progress);
#else
v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/(floorwidth*u_floor_width_scale),(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),linePattern:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform highp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef LINE_JOIN_NONE
in vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
uniform float u_emissive_strength;
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;highp float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;highp float x=mod(pattern_x,1.0);highp float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;highp vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));highp vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);color=mix(color,color.a*u_trim_color,transition_factor);}
#endif
#ifdef LINE_JOIN_NONE
highp float pattern_len=pattern_size/aspect;highp float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);highp float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;highp float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_with_emission_ground(color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
color.rgb*=mix(v_road_z_offset > 0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,v_z_offset);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in vec3 a_z_offset_width;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 a_packed;
#endif
in highp float a_linesofar;
#ifdef LINE_JOIN_NONE
in highp vec3 a_pattern_data;out vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;uniform float u_width_scale;uniform float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
#pragma mapbox: define mediump float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define mediump float floorwidth
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
void main() {
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
#pragma mapbox: initialize mediump float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=(u_width_scale*width)/2.0;offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude_xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float a_uv_x=a_packed[0];highp float line_progress=a_packed[2];v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=(floorwidth*u_floor_width_scale);
#ifdef LINE_JOIN_NONE
v_width=(floorwidth*u_floor_width_scale)+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),raster:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:tn("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`#include "_prelude_raster_particle.glsl"
in float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(
mod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}`),rasterParticleTexture:tn("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:tn(`#include "_prelude_raster_particle.glsl"
uniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(
linearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)
);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}`,"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbol:tn(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;uniform lowp float u_scale_factor;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
#ifdef COLOR_ADJUSTMENT
uniform mat4 u_color_adj_mat;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
in float v_draw_halo;in vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
in float is_sdf;in vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec4 out_color;float fade_opacity=v_gamma_scale_size_fade_opacity[2];
#ifdef RENDER_TEXT_AND_SYMBOL
if (is_sdf==ICON) {vec2 tex_icon=v_tex_a_icon;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}
#endif
#ifdef RENDER_SDF
float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_gamma_scale_size_fade_opacity.x;float size=v_gamma_scale_size_fade_opacity.y;float fontScale=u_is_text ? size/24.0 : size;out_color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {out_color=halo_color;gamma=(halo_blur*u_scale_factor*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width*u_scale_factor/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,v_tex_a).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);out_color*=alpha;
#else
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);
#else
out_color=texture(u_texture,v_tex_a);
#endif
#ifdef COLOR_ADJUSTMENT
out_color=u_color_adj_mat*out_color;
#endif
#endif
out_color*=opacity*fade_opacity;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_auto_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
#ifdef OCCLUSION_QUERIES
in float a_occlusion_query_opacity;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_elevation_from_sea;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_draw_halo;out vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
out float is_sdf;out vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
#pragma mapbox: define lowp float occlusion_opacity
#pragma mapbox: define lowp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
#pragma mapbox: initialize lowp float occlusion_opacity
#pragma mapbox: initialize lowp float z_offset
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=u_elevation_from_sea ? z_offset : z_offset+elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_auto_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;
#endif
vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
#ifdef PROJECTED_POS_ON_VIEWPORT
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xyz+h,1.0);
#else
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz,mercator_pos,u_zoom_transition)+h;projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);    
#endif
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
#ifdef Z_OFFSET
z+=u_pitch_with_map ? a_auto_z_offset+(u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#else
z+=u_pitch_with_map ? (u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#endif
float occlusion_fade=globe_occlusion_fade;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float out_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));
#ifdef DEPTH_OCCLUSION
float depth_occlusion=occlusionFadeMultiSample(projected_point);float depth_occlusion_multplier=mix(occlusion_opacity,1.0,depth_occlusion);out_fade_opacity*=depth_occlusion_multplier;
#endif
#ifdef OCCLUSION_QUERIES
float occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;
#endif
float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_gamma_scale_size_fade_opacity=vec3(gamma_scale,size,out_fade_opacity);v_tex_a=a_tex/u_texsize;
#ifdef RENDER_TEXT_AND_SYMBOL
is_sdf=a_size[0]-2.0*a_size_min;v_tex_a_icon=a_tex/u_texsize_icon;
#endif
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=e;
#endif
}`),terrainRaster:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:tn("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:tn(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Ic),skyboxGradient:tn(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Ic),skyboxCapture:tn(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;highp float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);highp float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(clamp(raster.rgb,vec3(0),vec3(1))*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:tn(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform highp sampler2D u_depthTexture;uniform highp vec2 u_inv_depth_size;uniform highp vec2 u_depth_range_unpack;
#ifdef DEPTH_D24
highp float unpack_depth(highp float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}
#else
highp float unpack_depth_rgba(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded() {highp vec2 coord=gl_FragCoord.xy*u_inv_depth_size;
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depthTexture,coord).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));
#endif
return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
vec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);
#ifdef APPLY_LUT_ON_GPU
color=applyLUT(u_lutTexture,color);
#endif
return color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
#ifdef APPLY_LUT_ON_GPU
float emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;
#ifdef APPLY_LUT_ON_GPU
color_mix=applyLUT(u_lutTexture,color_mix);
#endif
color=mix(color,color_mix,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor,v_position_height.w);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normal_3f);shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:tn(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:tn(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`),snowParticle:tn("in highp vec2 uv;in highp float alphaMultiplier;uniform vec4 u_particleColor;uniform vec2 u_simpleShapeParameters;void main() {float t=clamp((length(uv)-u_simpleShapeParameters.x)/(1.0-u_simpleShapeParameters.x),0.0,1.0);float alpha=1.0-pow(t,pow(10.0,u_simpleShapeParameters.y));alpha*=alphaMultiplier;alpha*=u_particleColor.a;vec3 color=u_particleColor.rgb*alpha;glFragColor=vec4(color,alpha) ;HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_snowParticleData;in highp vec4 a_snowParticleDataHorizontalOscillation;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform vec2 u_screenSize;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity;uniform vec3 u_direction;uniform float u_horizontalOscillationRadius; 
uniform float u_horizontalOscillationRate; 
uniform float u_billboardSize;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;out highp vec2 uv;out highp float alphaMultiplier;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos.xyz*=halfBoxSize;pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_snowParticleData.z;float coneAngleHeadingRad=a_snowParticleData.w*radians(360.0);vec3 localZ=normalize(u_direction);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 direction;direction.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.z=cos(coneAnglePichRad);direction=normalize(direction);vec3 simPosLocal=vec3(0,0,0);float velocityScale=(1.0+3.0*a_snowParticleData.y)*u_velocity;simPosLocal+=direction*velocityScale*u_time;float horizontalOscillationRadius=u_horizontalOscillationRadius*a_snowParticleDataHorizontalOscillation.x;float horizontalOscillationAngle=u_horizontalOscillationRate*u_time*(-1.0+2.0*a_snowParticleDataHorizontalOscillation.y);simPosLocal.xy+=horizontalOscillationRadius*vec2(cos(horizontalOscillationAngle),sin(horizontalOscillationAngle));vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);float clipZ=-u_cam_pos.z+pos.z;vec4 posView=u_modelview*vec4(pos,1.0);float size=u_billboardSize;alphaMultiplier=1.0;vec4 posScreen=u_projection*posView;posScreen/=posScreen.w;posScreen.xy=vec2(0.5)+posScreen.xy*0.5;posScreen.xy*=u_screenSize;vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=u_screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-posScreen.xy)/(0.5*u_screenSize));screenDist+=a_snowParticleData.x*u_thinningParticleOffset;float scaleFactorMode=0.0;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);if (a_snowParticleData.x < u_thinningAffectedRatio) {scaleFactorMode=1.0-thinningFadeRatio;alphaMultiplier=thinningFadeRatio;}}vec4 posScreen1=u_projection*vec4(posView.x-size,posView.yzw);posScreen1/=posScreen1.w;vec4 posScreen2=u_projection*vec4(posView.x+size,posView.yzw);posScreen2/=posScreen2.w;posScreen1.xy=vec2(0.5)+posScreen1.xy*0.5;posScreen1.xy*=u_screenSize;posScreen2.xy=vec2(0.5)+posScreen2.xy*0.5;posScreen2.xy*=u_screenSize;float screenLength=length(posScreen1.xy-posScreen2.xy);float screenEpsilon=3.0;float scaleFactor=1.0;if (screenLength < screenEpsilon) {scaleFactor=screenEpsilon/max(screenLength,0.01);scaleFactor=mix(scaleFactor,1.0,scaleFactorMode);}float screenEpsilon2=15.0;if (screenLength > screenEpsilon2) {scaleFactor=screenEpsilon2/max(screenLength,0.01);}size*=scaleFactor;vec2 right=size*vec2(1,0);vec2 up=size*vec2(0,1);posView.xy+=right*a_uv.x;posView.xy+=up*a_uv.y;uv=a_uv;gl_Position=u_projection*posView;}`),rainParticle:tn("in highp vec2 uv;in highp float particleRandomValue;uniform sampler2D u_texScreen;uniform float u_distortionStrength;uniform vec4 u_color;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;uniform float u_shapeDirectionalPower;uniform float u_mode;void main() {vec2 st=uv*0.5+vec2(0.5);vec2 uvm=uv;uvm.y=-1.0+2.0*pow(st.y,u_shapeDirectionalPower);float shape=clamp(1.0-length(uvm),0.0,1.0);float alpha=abs(shape)*u_color.a;vec2 screenSize=vec2(textureSize(u_texScreen,0));vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-gl_FragCoord.xy)/(0.5*screenSize));screenDist+=(0.5+0.5*particleRandomValue)*u_thinningParticleOffset;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;float thinningAlpha=1.0;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);thinningAlpha*=thinningFadeRatio;}vec2 offsetXY=normalize(uvm)*abs(shape);vec2 stScreen=(gl_FragCoord.xy+offsetXY*u_distortionStrength*thinningAlpha)/screenSize;vec3 colorScreen=texture(u_texScreen,stScreen).rgb;alpha*=thinningAlpha;glFragColor=mix(vec4(colorScreen,1.0),vec4(u_color.rgb*alpha,alpha),u_mode);HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_rainParticleData;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity; 
uniform vec2 u_rainDropletSize;uniform vec3 u_rainDirection;out highp vec2 uv;out highp float particleRandomValue;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos*=halfBoxSize; 
pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_rainParticleData.z;float coneAngleHeadingRad=a_rainParticleData.w*radians(360.0);vec3 localZ=normalize(u_rainDirection);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 directionLocal;directionLocal.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.z=cos(coneAnglePichRad);directionLocal=normalize(directionLocal);vec3 directionWorld=localX*directionLocal.x+localY*directionLocal.y+localZ*directionLocal.z;float velocityScale=(1.0+3.0*a_rainParticleData.y)*u_velocity;vec3 simPosLocal=vec3(0,0,0);simPosLocal+=directionLocal*velocityScale*u_time;vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);vec4 posView=u_modelview*vec4(pos,1.0);vec3 directionView=normalize((u_modelview*vec4(directionWorld,0.0)).xyz);vec3 side=cross(directionView,normalize(posView.xyz));posView.xyz+=side*a_uv.x*u_rainDropletSize.x;posView.xyz+=directionView*a_uv.y*u_rainDropletSize.y;uv=a_uv;particleRandomValue=a_rainParticleData.x;gl_Position=u_projection*posView;}`),vignette:tn("uniform vec3 u_vignetteShape;uniform vec4 u_vignetteColor;in vec2 st;void main() {float screenDist=length(st);float alpha=clamp((screenDist-u_vignetteShape.x)/u_vignetteShape.y,0.0,1.0);alpha=pow(alpha,u_vignetteShape.z)*u_vignetteColor.a;vec3 color=u_vignetteColor.rgb;glFragColor=vec4(color*alpha,alpha) ;}","in vec2 a_pos_2f;out vec2 st;void main() {st=a_pos_2f;gl_Position=vec4(a_pos_2f,0,1);}"),occlusion:tn("uniform vec4 u_color;void main() {glFragColor=u_color;}",`#include "_prelude_terrain.vertex.glsl"
in highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;
#ifdef TERRAIN
float e=elevation(world_pos.xy);world_pos.z+=e;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}`)};function Jl(g,o){const c=g.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let A of c)if(A=A.trim(),A[0]==="#"&&A.includes("if")&&!A.includes("endif")){A=A.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const R=A.split(" ");for(const C of R)o.includes(C)||o.push(C)}}function tn(g,o){const c=/#include\s+"([^"]+)"/g,A=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let R=o.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);R&&(R=R.map(H=>{const W=H.split(" ");return W[W.length-1]}),R=[...new Set(R)]);const C={},P=[],L=[];if(g=g.replace(c,(H,W)=>(L.push(W),"")),(o=o.replace(c,(H,W)=>(P.push(W),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let j=[...ai];Jl(g,j),Jl(o,j);for(const H of[...P,...L])qi[H]||console.error(`Undefined include: ${H}`),is[H]||(is[H]=[],Jl(qi[H],is[H])),j=[...j,...is[H]];return{fragmentSource:g=g.replace(A,(H,W,te,ae,ce)=>(C[ce]=!0,W==="define"?`
#ifndef HAS_UNIFORM_u_${ce}
in ${te} ${ae} ${ce};
#else
uniform ${te} ${ae} u_${ce};
#endif
`:W==="initialize"?`
#ifdef HAS_UNIFORM_u_${ce}
    ${te} ${ae} ${ce} = u_${ce};
#endif
`:W==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${ce}
    in ${te} ${ae} ${ce};
#endif
`:W==="initialize-attribute"?"":void 0)),vertexSource:o=o.replace(A,(H,W,te,ae,ce)=>{const Te=ae==="float"?"vec2":ae,ve=ce.match(/color/)?"color":Te;return W==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${ce}
in ${te} ${ae} a_${ce};
#endif
`:C[ce]?W==="define"?`
#ifndef HAS_UNIFORM_u_${ce}
uniform lowp float u_${ce}_t;
in ${te} ${Te} a_${ce};
out ${te} ${ae} ${ce};
#else
uniform ${te} ${ae} u_${ce};
#endif
`:W==="initialize"?ve==="vec4"?`
#ifndef HAS_UNIFORM_u_${ce}
    ${ce} = a_${ce};
#else
    ${te} ${ae} ${ce} = u_${ce};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ce}
    ${ce} = unpack_mix_${ve}(a_${ce}, u_${ce}_t);
#else
    ${te} ${ae} ${ce} = u_${ce};
#endif
`:W==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${ce}
    in ${te} ${ae} a_${ce};
    out ${te} ${ae} ${ce};
#endif
`:W==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${ce}
    ${ce} = a_${ce};
#endif
`:void 0:W==="define"?`
#ifndef HAS_UNIFORM_u_${ce}
uniform lowp float u_${ce}_t;
in ${te} ${Te} a_${ce};
#else
uniform ${te} ${ae} u_${ce};
#endif
`:W==="define-instanced"?ve==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${ce}0;
in vec4 a_${ce}1;
in vec4 a_${ce}2;
in vec4 a_${ce}3;
#else
uniform ${te} ${ae} u_${ce};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${te} ${Te} a_${ce};
#else
uniform ${te} ${ae} u_${ce};
#endif
`:W==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${ce}
    ${te} ${ae} ${ce} = a_${ce};
#endif
`:ve==="vec4"?`
#ifndef HAS_UNIFORM_u_${ce}
    ${te} ${ae} ${ce} = a_${ce};
#else
    ${te} ${ae} ${ce} = u_${ce};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ce}
    ${te} ${ae} ${ce} = unpack_mix_${ve}(a_${ce}, u_${ce}_t);
#else
    ${te} ${ae} ${ce} = u_${ce};
#endif
`}),staticAttributes:R,usedDefines:j,vertexIncludes:P,fragmentIncludes:L}}class Uc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(o,c,A,R,C,P,L,j){this.context=o;let H=this.boundPaintVertexBuffers.length!==R.length;for(let te=0;!H&&te<R.length;te++)this.boundPaintVertexBuffers[te]!==R[te]&&(H=!0);let W=this.boundDynamicVertexBuffers.length!==L.length;for(let te=0;!W&&te<L.length;te++)this.boundDynamicVertexBuffers[te]!==L[te]&&(W=!0);if(!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==A||H||W||this.boundIndexBuffer!==C||this.boundVertexOffset!==P)this.freshBind(c,A,R,C,P,L,j);else{o.bindVertexArrayOES.set(this.vao);for(const te of L)te&&(te.bind(),j&&te.instanceCount&&te.setVertexAttribDivisor(o.gl,c,j));C&&C.dynamicDraw&&C.bind()}}freshBind(o,c,A,R,C,P,L){const j=o.numAttributes,H=this.context,W=H.gl;this.vao&&this.destroy(),this.vao=H.gl.createVertexArray(),H.bindVertexArrayOES.set(this.vao),this.boundProgram=o,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=A,this.boundIndexBuffer=R,this.boundVertexOffset=C,this.boundDynamicVertexBuffers=P,c.enableAttributes(W,o),c.bind(),c.setVertexAttribPointers(W,o,C);for(const te of A)te.enableAttributes(W,o),te.bind(),te.setVertexAttribPointers(W,o,C);for(const te of P)te&&(te.enableAttributes(W,o),te.bind(),te.setVertexAttribPointers(W,o,C),L&&te.instanceCount&&te.setVertexAttribDivisor(W,o,L));R&&R.bind(),H.currentNumAttributes=j}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function El(g,o){const c=Math.pow(2,o.canonical.z),A=o.canonical.y;return[new n.ac(0,A/c).toLngLat().lat,new n.ac(0,(A+1)/c).toLngLat().lat]}function ts(g,o,c,A,R,C,P){const L=g.context,j=L.gl,H=c.hillshadeFBO;if(!H)return;g.prepareDrawTile();const W=g.isTileAffectedByFog(o),te=g.getOrCreateProgram("hillshade",{overrideFog:W});L.activeTexture.set(j.TEXTURE0),j.bindTexture(j.TEXTURE_2D,H.colorAttachment.get());const ae=((Ee,Ve,Be,et)=>{const Xe=Be.paint.get("hillshade-shadow-color"),ht=Be.paint.get("hillshade-shadow-color-use-theme").constantOr("default")==="none",st=Be.paint.get("hillshade-highlight-color"),ot=Be.paint.get("hillshade-highlight-color-use-theme").constantOr("default")==="none",lt=Be.paint.get("hillshade-accent-color"),gt=Be.paint.get("hillshade-accent-color-use-theme").constantOr("default")==="none",Tt=Be.paint.get("hillshade-emissive-strength");let Yt=n.ak(Be.paint.get("hillshade-illumination-direction"));if(Be.paint.get("hillshade-illumination-anchor")==="viewport")Yt-=Ee.transform.angle;else if(Ee.style&&Ee.style.enable3dLights()&&Ee.style.directionalLight){const aa=Ee.style.directionalLight.properties.get("direction"),ua=n.cc(aa.x,aa.y,aa.z);Yt=n.ak(ua[1])}const Lt=!Ee.options.moving;return{u_matrix:et||Ee.transform.calculateProjMatrix(Ve.tileID.toUnwrapped(),Lt),u_image:0,u_latrange:El(0,Ve.tileID),u_light:[Be.paint.get("hillshade-exaggeration"),Yt],u_shadow:Xe.toRenderColor(ht?null:Be.lut),u_highlight:st.toRenderColor(ot?null:Be.lut),u_emissive_strength:Tt,u_accent:lt.toRenderColor(gt?null:Be.lut)}})(g,c,A,g.terrain?o.projMatrix:null);g.uploadCommonUniforms(L,te,o.toUnwrapped());const{tileBoundsBuffer:ce,tileBoundsIndexBuffer:Te,tileBoundsSegments:ve}=g.getTileBoundsBuffers(c);te.draw(g,j.TRIANGLES,R,C,P,vr.disabled,ae,A.id,ce,Te,ve)}function pc(g,o,c){if(!o.needsDEMTextureUpload)return;const A=g.context,R=A.gl;A.pixelStoreUnpackPremultiplyAlpha.set(!1),o.demTexture=o.demTexture||g.getTileTexture(c.stride);const C=c.getPixels();o.demTexture?o.demTexture.update(C,{premultiply:!1}):o.demTexture=new n.T(A,C,R.R32F,{premultiply:!1}),o.needsDEMTextureUpload=!1}function Nd(g,o,c){const A=g.context,R=A.gl;if(!o.dem)return;const C=o.dem;if(A.activeTexture.set(R.TEXTURE1),pc(g,o,C),!o.demTexture)return;o.demTexture.bind(R.NEAREST,R.CLAMP_TO_EDGE);const P=C.dim;A.activeTexture.set(R.TEXTURE0);let L=o.hillshadeFBO;if(!L){const ae=new n.T(A,{width:P,height:P,data:null},R.RGBA8);ae.bind(R.LINEAR,R.CLAMP_TO_EDGE),L=o.hillshadeFBO=A.createFramebuffer(P,P,!0,"renderbuffer"),L.colorAttachment.set(ae.texture)}A.bindFramebuffer.set(L.framebuffer),A.viewport.set([0,0,P,P]);const{tileBoundsBuffer:j,tileBoundsIndexBuffer:H,tileBoundsSegments:W}=g.getMercatorTileBoundsBuffers(),te=[];g.linearFloatFilteringSupported()&&te.push("TERRAIN_DEM_FLOAT_FORMAT"),g.getOrCreateProgram("hillshadePrepare",{defines:te}).draw(g,R.TRIANGLES,ir.disabled,Rr.disabled,br.unblended,vr.disabled,((ae,ce)=>{const Te=ce.stride,ve=n.ad.mat4.create();return n.ad.mat4.ortho(ve,0,n.ai,-n.ai,0,0,1),n.ad.mat4.translate(ve,ve,[0,-n.ai,0]),{u_matrix:ve,u_image:1,u_dimension:[Te,Te],u_zoom:ae.overscaledZ}})(o.tileID,C),c.id,j,H,W),o.needsHillshadePrepare=!1}class di{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Oh extends di{getDefault(){return n.al.transparent}set(o){const c=this.current;(o.r!==c.r||o.g!==c.g||o.b!==c.b||o.a!==c.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class tl extends di{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class pl extends di{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class kc extends di{getDefault(){return[!0,!0,!0,!0]}set(o){const c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class vu extends di{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class Gu extends di{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class mc extends di{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){const c=this.current;(o.func!==c.func||o.ref!==c.ref||o.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class Bp extends di{getDefault(){const o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){const c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class Dh extends di{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;o?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=o,this.dirty=!1}}class Mh extends di{getDefault(){return[0,1]}set(o){const c=this.current;(o[0]!==c[0]||o[1]!==c[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class al extends di{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;o?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=o,this.dirty=!1}}class Hi extends di{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class _i extends di{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;o?c.enable(c.BLEND):c.disable(c.BLEND),this.current=o,this.dirty=!1}}class Ql extends di{getDefault(){const o=this.gl;return[o.ONE,o.ZERO,o.ONE,o.ZERO]}set(o){const c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.blendFuncSeparate(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class wu extends di{getDefault(){return n.al.transparent}set(o){const c=this.current;(o.r!==c.r||o.g!==c.g||o.b!==c.b||o.a!==c.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class $f extends di{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(o,o),this.current=o,this.dirty=!1)}}class yc extends di{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;o?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=o,this.dirty=!1}}class yf extends di{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class Vd extends di{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}let Ih=class extends di{getDefault(){return null}set(g){(g!==this.current||this.dirty)&&(this.gl.useProgram(g),this.current=g,this.dirty=!1)}};class Lh extends di{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class zd extends di{getDefault(){const o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){const c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class gf extends di{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class Lm extends di{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class lh extends di{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class Vy extends di{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class gc extends di{getDefault(){return null}set(o){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class ju extends di{getDefault(){return null}set(o){this.gl&&(o!==this.current||this.dirty)&&(this.gl.bindVertexArray(o),this.current=o,this.dirty=!1)}}class Ru extends di{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class zy extends di{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class Fh extends di{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class ml extends di{constructor(o,c){super(o),this.context=o,this.parent=c}getDefault(){return null}}class rl extends ml{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class Uh extends ml{attachment(){return this.gl.DEPTH_ATTACHMENT}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,this.attachment(),c.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Od extends ml{attachment(){return this.gl.DEPTH_ATTACHMENT}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,this.attachment(),c.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class Gp extends Uh{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}const jp=(g,o,c)=>({u_matrix:g,u_image0:0,u_skirt_height:o,u_ground_shadow_factor:c}),Bc=(g,o,c,A,R,C,P,L,j,H,W,te,ae,ce,Te,ve)=>({u_proj_matrix:Float32Array.from(g),u_globe_matrix:o,u_normalize_matrix:Float32Array.from(A),u_merc_matrix:c,u_zoom_transition:R,u_merc_center:C,u_image0:0,u_frustum_tl:P,u_frustum_tr:L,u_frustum_br:j,u_frustum_bl:H,u_globe_pos:W,u_globe_radius:te,u_viewport:ae,u_grid_matrix:ve?Float32Array.from(ve):new Float32Array(9),u_skirt_height:ce,u_far_z_cutoff:Te});function Af(g,o){return g!=null&&o!=null&&!(!g.hasData()||!o.hasData())&&g.demTexture!=null&&o.demTexture!=null&&g.tileID.key!==o.tileID.key}const nl=new class{constructor(){this.operations={}}newMorphing(g,o,c,A,R){if(g in this.operations){const C=this.operations[g];C.to.tileID.key!==c.tileID.key&&(C.queued=c)}else this.operations[g]={startTime:A,phase:0,duration:R,from:o,to:c,queued:null}}getMorphValuesForProxy(g){if(!(g in this.operations))return null;const o=this.operations[g];return{from:o.from,to:o.to,phase:o.phase}}update(g){for(const o in this.operations){const c=this.operations[o];for(c.phase=(g-c.startTime)/c.duration;c.phase>=1||!this._validOp(c);)if(!this._nextOp(c,g)){delete this.operations[o];break}}}_nextOp(g,o){return!!g.queued&&(g.from=g.to,g.to=g.queued,g.queued=null,g.phase=0,g.startTime=o,!0)}_validOp(g){return g.from.hasData()&&g.to.hasData()}},Dd={0:null,1:"TERRAIN_VERTEX_MORPHING"};function Tu(g,o,c){if(o===0)return 0;const A=o<1&&c===514?.25/o:1;return 6*Math.pow(1.5,22-g)*Math.max(o,1)*A}function Md(g,o){const c=1<<g.z;return!o&&(g.x===0||g.x===c-1)||g.y===0||g.y===c-1}const Gc=g=>({u_matrix:g});function Nl(g,o,c,A,R){if(R>0){const C=n.q.now(),P=(C-g.timeAdded)/R,L=o?(C-o.timeAdded)/R:-1,j=c.getSource(),H=A.coveringZoomLevel({tileSize:j.tileSize,roundZoom:j.roundZoom}),W=!o||Math.abs(o.tileID.overscaledZ-H)>Math.abs(g.tileID.overscaledZ-H),te=W&&g.refreshedUponExpiration?1:n.ay(W?P:1-L,0,1);return g.refreshedUponExpiration&&P>=1&&(g.refreshedUponExpiration=!1),o?{opacity:1,mix:1-te}:{opacity:te,mix:0}}return{opacity:1,mix:0}}class Zu extends Xo{constructor(o){const c={type:"raster-dem",maxzoom:o.transform.maxZoom},A=new n.D(n.cj(),null),R=Mo("mock-dem",c,A,o.style);super("mock-dem",R,!1),R.setEventedParent(this),this._sourceLoaded=!0}_loadTile(o,c){o.state="loaded",c(null)}}class jc extends Xo{constructor(o){const c=Mo("proxy",{type:"geojson",maxzoom:o.transform.maxZoom},new n.D(n.cj(),null),o.style);super("proxy",c,!1),c.setEventedParent(this),this.map=this.getSource().map=o,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(o,c,A){if(o.freezeTileCoverage)return;this.transform=o;const R=o.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((C,P)=>{if(C[P.key]="",!this._tiles[P.key]){const L=new Zl(P,this._source.tileSize*P.overscaleFactor(),o.tileZoom);L.state="loaded",this._tiles[P.key]=L}return C},{});for(const C in this._tiles)C in R||(this.freeFBO(C),this._tiles[C].unloadVectorData(),delete this._tiles[C])}freeFBO(o){const c=this.proxyCachedFBO[o];if(c!==void 0){const A=Object.values(c);this.renderCachePool.push(...A),delete this.proxyCachedFBO[o]}}deallocRenderCache(){this.renderCache.forEach(o=>o.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Kf extends n.aH{constructor(o,c,A){super(o.overscaledZ,o.wrap,o.canonical.z,o.canonical.x,o.canonical.y),this.proxyTileKey=c,this.projMatrix=A}}class Id extends n.cK{constructor(o,c){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},o.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),o.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),o.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=o,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[A,R,C]=function(j){const H=new n.b5,W=new n.aV,te=131;H.reserve(17161),W.reserve(33800);const ae=n.ai/128,ce=n.ai+ae/2,Te=ce+ae;for(let Ee=-ae;Ee<Te;Ee+=ae)for(let Ve=-ae;Ve<Te;Ve+=ae){const Be=Ve<0||Ve>ce||Ee<0||Ee>ce?24575:0,et=n.ay(Math.round(Ve),0,n.ai),Xe=n.ay(Math.round(Ee),0,n.ai);H.emplaceBack(et+Be,Xe)}const ve=(Ee,Ve)=>{const Be=Ve*te+Ee;W.emplaceBack(Be+1,Be,Be+te),W.emplaceBack(Be+te,Be+te+1,Be+1)};for(let Ee=1;Ee<129;Ee++)for(let Ve=1;Ve<129;Ve++)ve(Ve,Ee);return[0,129].forEach(Ee=>{for(let Ve=0;Ve<130;Ve++)ve(Ve,Ee),ve(Ee,Ve)}),[H,W,32768]}(),P=o.context;this.gridBuffer=P.createVertexBuffer(A,n.b7.members),this.gridIndexBuffer=P.createIndexBuffer(R),this.gridSegments=n.b8.simpleSegment(0,0,A.length,R.length),this.gridNoSkirtSegments=n.b8.simpleSegment(0,0,A.length,C),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new jc(c.map),this.orthoMatrix=n.ad.mat4.create(),n.ad.mat4.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,n.ai,0,n.ai,0,1);const L=P.gl;this._overlapStencilMode=new Rr({func:L.GEQUAL,mask:255},0,255,L.KEEP,L.KEEP,L.REPLACE),this._previousZoom=o.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=c,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Zu(c.map),this._pendingGroundEffectLayers=[]}set style(o){o.on("data",this._onStyleDataEvent.bind(this)),this._style=o,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(o,c,A){if(o&&o.terrain){this._style!==o&&(this.style=o,this._evaluationZoom=void 0);const R=o.terrain.properties,C=o.terrain.drapeRenderMode===0,P=o.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=n.q.now();const L=o.terrain&&o.terrain.scope,j=R.get("source"),H=C?this._mockSourceCache:o.getSourceCache(j,L);if(!H)return void n.w(`Couldn't find terrain source "${j}".`);if(this.sourceCache=H,this._attenuationRange=o.terrain.getAttenuationRange(),this._exaggeration=P?this.calculateExaggeration(c):R.get("exaggeration"),!c.projection.requiresDraping&&P&&this._exaggeration===0)return void this._disable();this.enabled=!0;const W=()=>{this.sourceCache.used&&n.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const te=this.getScaledDemTileSize();this.sourceCache.update(c,te,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,W(),this._initializing=!0),W(),c.updateElevation(!0,A),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(c),this._emptyDEMTextureDirty=!0,this._previousZoom=c.zoom}else this._disable()}calculateExaggeration(o){if(this._attenuationRange&&o.zoom>=Math.ceil(this._attenuationRange[1]))return this._style.terrain.getExaggeration(o.zoom);const c=this._previousCameraAltitude,A=o.getFreeCameraOptions().position.z/o.pixelsPerMeter*o.worldSize;this._previousCameraAltitude=A;const R=c!=null?A-c:Number.MAX_VALUE;if(Math.abs(R)<2)return this._exaggeration;const C=o.zoom,P=this._style.terrain;if(!this._previousUpdateTimestamp)return P.getExaggeration(C);let L=C-this._previousZoom;const j=this._previousUpdateTimestamp;let H=C;this._evaluationZoom!=null&&(H=this._evaluationZoom,Math.abs(C-H)>.5&&(L=.5*(C-H+L)),L*R<0&&(H+=L)),this._evaluationZoom=H;const W=P.getExaggeration(H),te=W===P.getExaggeration(Math.max(0,H-.1));if(te&&Math.abs(W-this._exaggeration)<.01)return W;let ae=Math.min(.1,.00375*(this._updateTimestamp-j));return(te||W<.1||Math.abs(L)<1e-4)&&(ae=Math.min(.2,4*ae)),n.ah(this._exaggeration,W,ae)}resetTileLookupCache(o){this._findCoveringTileCache[o]={}}attenuationRange(){return this._attenuationRange}getDemUpscale(){return this.proxySourceCache.getSource().tileSize/128}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(o){o.coord&&o.dataType==="source"?this._clearRenderCacheForTile(o.sourceCacheId,o.coord):o.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const o in this._style._mergedSourceCaches)this._style._mergedSourceCaches[o].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(o=>o.fb.destroy()),this.pool=[],this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const o=2*this.proxySourceCache.getSource().tileSize;return[o,o]}set useVertexMorphing(o){this._useVertexMorphing=o}updateTileBinding(o){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const c=this.proxySourceCache,A=this.painter.transform;this._initializing&&(this._initializing=A._centerAltitude===0&&this.getAtPointOrZero(n.ac.fromLngLat(A.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const R=this.proxyCoords=c.getIds().map(j=>{const H=c.getTileByID(j).tileID;return H.projMatrix=A.calculateProjMatrix(H.toUnwrapped()),H});(function(j,H){const W=H.transform.pointCoordinate(H.transform.getCameraPoint()),te=new n.P(W.x,W.y);j.sort((ae,ce)=>{if(ce.overscaledZ-ae.overscaledZ)return ce.overscaledZ-ae.overscaledZ;const Te=new n.P(ae.canonical.x+(1<<ae.canonical.z)*ae.wrap,ae.canonical.y),ve=new n.P(ce.canonical.x+(1<<ce.canonical.z)*ce.wrap,ce.canonical.y),Ee=te.mult(1<<ae.canonical.z);return Ee.x-=.5,Ee.y-=.5,Ee.distSqr(Te)-Ee.distSqr(ve)})})(R,this.painter);const C=this.proxyToSource||{};this.proxyToSource={},R.forEach(j=>{this.proxyToSource[j.key]={}}),this.terrainTileForTile={};const P=this._style._mergedSourceCaches;for(const j in P){const H=P[j];if(!H.used||(H!==this.sourceCache&&this.resetTileLookupCache(H.id),this._setupProxiedCoordsForOrtho(H,o[j],C),H.usedForTerrain))continue;const W=o[j];H.getSource().reparseOverscaled&&this._assignTerrainTiles(W)}this.proxiedCoords[c.id]=R.map(j=>new Kf(j,j.key,this.orthoMatrix)),this._assignTerrainTiles(R),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(C),this.renderingToTexture=!1;const L={};this._visibleDemTiles=[];for(const j of this.proxyCoords){const H=this.terrainTileForTile[j.key];if(!H)continue;const W=H.tileID.key;W in L||(this._visibleDemTiles.push(H),L[W]=W)}}_assignTerrainTiles(o){this._initializing||o.forEach(c=>{if(this.terrainTileForTile[c.key])return;const A=this._findTileCoveringTileID(c,this.sourceCache);A&&(this.terrainTileForTile[c.key]=A)})}_prepareDEMTextures(){const o=this.painter.context,c=o.gl;for(const A in this.terrainTileForTile){const R=this.terrainTileForTile[A],C=R.dem;!C||R.demTexture&&!R.needsDEMTextureUpload||(o.activeTexture.set(c.TEXTURE1),pc(this.painter,R,C))}}_prepareDemTileUniforms(o,c,A,R){if(!c||c.demTexture==null)return!1;const C=o.tileID.canonical,P=Math.pow(2,c.tileID.canonical.z-C.z),L=R||"";return A[`u_dem_tl${L}`]=[C.x*P%1,C.y*P%1],A[`u_dem_scale${L}`]=P,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let o=0;const c=this._visibleDemTiles.reduce((A,R)=>{if(!R.dem)return A;const C=R.dem.tree.minimums[0];return C>0&&o++,A+C},0);return o?c/o:0}_updateEmptyDEMTexture(){const o=this.painter.context,c=o.gl;o.activeTexture.set(c.TEXTURE2);const A=this._getLoadedAreaMinimum(),R=new n.cL({width:1,height:1},new Float32Array([A]));this._emptyDEMTextureDirty=!1;let C=this._emptyDEMTexture;return C?C.update(R,{premultiply:!1}):C=this._emptyDEMTexture=new n.T(o,R,c.R32F,{premultiply:!1}),C}setupElevationDraw(o,c,A){const R=this.painter.context,C=R.gl,P={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0};P.u_exaggeration=this.exaggeration();let L=null,j=null,H=1;if(A&&A.morphing&&this._useVertexMorphing){const ce=A.morphing.srcDemTile,Te=A.morphing.dstDemTile;H=A.morphing.phase,ce&&Te&&(this._prepareDemTileUniforms(o,ce,P,"_prev")&&(j=ce),this._prepareDemTileUniforms(o,Te,P)&&(L=Te))}const W=ce=>ce&&ce.demTexture&&this.painter.linearFloatFilteringSupported()?C.LINEAR:C.NEAREST;let te=null;var ae;if(this.enabled?j&&L?(te=L.demTexture,R.activeTexture.set(C.TEXTURE4),j.demTexture.bind(W(j),C.CLAMP_TO_EDGE),P.u_dem_lerp=H):(L=this.terrainTileForTile[o.tileID.key],te=this._prepareDemTileUniforms(o,L,P)?L.demTexture:this.emptyDEMTexture):te=this.emptyDEMTexture,R.activeTexture.set(C.TEXTURE2),te&&(P.u_dem_size=(ae=te).size[0]===1?1:ae.size[0]-2,te.bind(W(L),C.CLAMP_TO_EDGE)),this.painter.setupDepthForOcclusion(A&&A.useDepthForOcclusion,c,P),A&&A.useMeterToDem&&L){const ce=(1<<L.tileID.canonical.z)*n.bH(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;P.u_meter_to_dem=ce}if(A&&A.labelPlaneMatrixInv&&(P.u_label_plane_matrix_inv=A.labelPlaneMatrixInv),c.setTerrainUniformValues(R,P),this.painter.transform.projection.name==="globe"){const ce=this.globeUniformValues(this.painter.transform,o.tileID.canonical,A&&A.useDenormalizedUpVectorScale);c.setGlobeUniformValues(R,ce)}}globeUniformValues(o,c,A){const R=o.projection;return{u_tile_tl_up:R.upVector(c,0,0),u_tile_tr_up:R.upVector(c,n.ai,0),u_tile_br_up:R.upVector(c,n.ai,n.ai),u_tile_bl_up:R.upVector(c,0,n.ai),u_tile_up_scale:A?n.cM(1):R.upVectorScale(c,o.center.lat,o.worldSize).metersToTile}}renderToBackBuffer(o){const c=this.painter,A=this.painter.context;o.length!==0&&(A.bindFramebuffer.set(null),A.viewport.set([0,0,c.width,c.height]),c.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(R,C,P,L,j){if(R.transform.projection.name==="globe")(function(H,W,te,ae,ce){const Te=H.context,ve=Te.gl;let Ee,Ve;const Be=H.transform,et=n.cD(H,Te,Be),Xe=(aa,ua)=>{if(Ve===ua)return;const Sa=[Dd[ua],"PROJECTION_GLOBE_VIEW"];et&&Sa.push("CUSTOM_ANTIALIASING");const It=H.isTileAffectedByFog(aa);Ee=H.getOrCreateProgram("globeRaster",{defines:Sa,overrideFog:It}),Ve=ua},ht=H.colorModeForRenderPass(),st=new ir(ve.LEQUAL,ir.ReadWrite,H.depthRangeFor3D);nl.update(ce);const ot=n.cE(Be),lt=[n.av(Be.center.lng),n.aC(Be.center.lat)],gt=H.globeSharedBuffers,Tt=[Be.width*n.q.devicePixelRatio,Be.height*n.q.devicePixelRatio],Yt=Float32Array.from(Be.globeMatrix),Lt={useDenormalizedUpVectorScale:!0};{const aa=H.transform,ua=Tu(aa.zoom,W.exaggeration(),W.sourceCache._source.tileSize);Ve=-1;const Sa=ve.TRIANGLES;for(const It of ae){const ia=te.getTile(It),zt=Rr.disabled,sa=W.prevTerrainTileForTile[It.key],ea=W.terrainTileForTile[It.key];Af(sa,ea)&&nl.newMorphing(It.key,sa,ea,ce,250),Te.activeTexture.set(ve.TEXTURE0),ia.texture&&ia.texture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE);const da=nl.getMorphValuesForProxy(It.key),Kt=da?1:0;da&&n.L(Lt,{morphing:{srcDemTile:da.from,dstDemTile:da.to,phase:n.cC(da.phase)}});const pa=n.cF(It.canonical),Ia=n.cG(pa.getCenter().lat),La=n.cH(It.canonical,pa,Ia,aa.worldSize/aa._pixelsPerMercatorPixel),Ea=n.bc(n.cI(It.canonical)),sr=Bc(aa.expandedFarZProjMatrix,Yt,ot,Ea,n.ag(aa.zoom),lt,aa.frustumCorners.TL,aa.frustumCorners.TR,aa.frustumCorners.BR,aa.frustumCorners.BL,aa.globeCenterInViewSpace,aa.globeRadius,Tt,ua,aa._farZ,La);if(Xe(It,Kt),Ee&&(W.setupElevationDraw(ia,Ee,Lt),H.uploadCommonUniforms(Te,Ee,It.toUnwrapped()),gt)){const[Fr,pr,Or]=gt.getGridBuffers(Ia,ua!==0);Ee.draw(H,Sa,st,zt,ht,vr.backCCW,sr,"globe_raster",Fr,pr,Or)}}}if(gt&&(H.renderDefaultNorthPole||H.renderDefaultSouthPole)){const aa=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];et&&aa.push("CUSTOM_ANTIALIASING"),Ee=H.getOrCreateProgram("globeRaster",{defines:aa});for(const ua of ae){const{x:Sa,y:It,z:ia}=ua.canonical,zt=It===0,sa=It===(1<<ia)-1,[ea,da,Kt,pa]=gt.getPoleBuffers(ia,!1);if(pa&&(zt||sa)){const Ia=te.getTile(ua);Te.activeTexture.set(ve.TEXTURE0),Ia.texture&&Ia.texture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE);let La=n.cJ(ia,Sa,Be);const Ea=n.bc(n.cI(ua.canonical)),sr=(Fr,pr)=>Fr.draw(H,ve.TRIANGLES,st,Rr.disabled,ht,vr.disabled,Bc(Be.expandedFarZProjMatrix,La,La,Ea,0,lt,Be.frustumCorners.TL,Be.frustumCorners.TR,Be.frustumCorners.BR,Be.frustumCorners.BL,Be.globeCenterInViewSpace,Be.globeRadius,Tt,0,Be._farZ),"globe_pole_raster",pr,Kt,pa);W.setupElevationDraw(Ia,Ee,Lt),H.uploadCommonUniforms(Te,Ee,ua.toUnwrapped()),zt&&H.renderDefaultNorthPole&&sr(Ee,ea),sa&&H.renderDefaultSouthPole&&(La=n.ad.mat4.scale(n.ad.mat4.create(),La,[1,-1,1]),sr(Ee,da))}}}})(R,C,P,L,j);else{const H=R.context,W=H.gl;let te,ae;const ce=R.shadowRenderer,Te=qs(R,R.longestCutoffRange),ve=ht=>{if(ae===ht)return;const st=[];st.push(Dd[ht]),Te.shouldRenderCutoff&&st.push("RENDER_CUTOFF"),ce&&(st.push("RENDER_SHADOWS","DEPTH_TEXTURE"),ce.useNormalOffset&&st.push("NORMAL_OFFSET")),te=R.getOrCreateProgram("terrainRaster",{defines:st}),ae=ht},Ee=R.colorModeForRenderPass(),Ve=new ir(W.LEQUAL,ir.ReadWrite,R.depthRangeFor3D);nl.update(j);const Be=R.transform,et=Tu(Be.zoom,C.exaggeration(),C.sourceCache._source.tileSize);let Xe=[0,0,0];if(ce){const ht=R.style.directionalLight,st=R.style.ambientLight;ht&&st&&(Xe=Oc(R.style,ht,st))}{ae=-1;const ht=W.TRIANGLES,[st,ot]=[C.gridIndexBuffer,C.gridSegments];for(const lt of L){const gt=P.getTile(lt),Tt=Rr.disabled,Yt=C.prevTerrainTileForTile[lt.key],Lt=C.terrainTileForTile[lt.key];Af(Yt,Lt)&&nl.newMorphing(lt.key,Yt,Lt,j,250),H.activeTexture.set(W.TEXTURE0),gt.texture&&gt.texture.bind(W.LINEAR,W.CLAMP_TO_EDGE);const aa=nl.getMorphValuesForProxy(lt.key),ua=aa?1:0;let Sa;aa&&(Sa={morphing:{srcDemTile:aa.from,dstDemTile:aa.to,phase:n.cC(aa.phase)}});const It=jp(lt.projMatrix,Md(lt.canonical,Be.renderWorldCopies)?et/10:et,Xe);if(ve(ua),!te)continue;C.setupElevationDraw(gt,te,Sa);const ia=lt.toUnwrapped();ce&&ce.setupShadows(ia,te),R.uploadCommonUniforms(H,te,ia,null,Te),te.draw(R,ht,Ve,Tt,Ee,vr.backCCW,It,"terrain_raster",C.gridBuffer,st,ot)}}}}(c,this,this.proxySourceCache,o,this._updateTimestamp),this.renderingToTexture=!0,c.gpuTimingDeferredRenderEnd(),o.splice(0,o.length))}renderBatch(o){if(this._drapedRenderBatches.length===0)return o+1;this.renderingToTexture=!0;const c=this.painter,A=this.painter.context,R=this.proxySourceCache,C=this.proxiedCoords[R.id],P=this._drapedRenderBatches.shift(),L=c.style.order,j=[];let H=0;for(const W of C){const te=R.getTileByID(W.proxyTileKey),ae=R.proxyCachedFBO[W.key]?R.proxyCachedFBO[W.key][o]:void 0,ce=ae!==void 0?R.renderCache[ae]:this.pool[H++],Te=ae!==void 0;if(te.texture=ce.tex,Te&&!ce.dirty){j.push(te.tileID);continue}let ve;A.bindFramebuffer.set(ce.fb.framebuffer),this.renderedToTile=!1,ce.dirty&&(A.clear({color:n.al.transparent,stencil:0}),ce.dirty=!1);for(let Ee=P.start;Ee<=P.end;++Ee){const Ve=c.style._mergedLayers[L[Ee]];if(Ve.isHidden(c.transform.zoom))continue;const Be=c.style.getLayerSourceCache(Ve),et=Be?this.proxyToSource[W.key][Be.id]:[W];if(!et)continue;const Xe=et;A.viewport.set([0,0,ce.fb.width,ce.fb.height]),ve!==(Be?Be.id:null)&&(this._setupStencil(ce,et,Ve,Be),ve=Be?Be.id:null),c.renderLayer(c,Be,Ve,Xe)}if(this._drapedRenderBatches.length===0)for(const Ee of this._pendingGroundEffectLayers){const Ve=c.style._mergedLayers[L[Ee]];if(Ve.isHidden(c.transform.zoom))continue;const Be=c.style.getLayerSourceCache(Ve),et=Be?this.proxyToSource[W.key][Be.id]:[W];if(!et)continue;const Xe=et;A.viewport.set([0,0,ce.fb.width,ce.fb.height]),ve!==(Be?Be.id:null)&&(this._setupStencil(ce,et,Ve,Be),ve=Be?Be.id:null),c.renderLayer(c,Be,Ve,Xe)}this.renderedToTile?(ce.dirty=!0,j.push(te.tileID)):Te||--H,H===5&&(H=0,this.renderToBackBuffer(j))}return this.renderToBackBuffer(j),this.renderingToTexture=!1,A.bindFramebuffer.set(null),A.viewport.set([0,0,c.width,c.height]),P.end+1}postRender(){}isLayerOrderingCorrect(o){const c=o.order.length;let A=-1,R=c;for(let C=0;C<c;++C)this._style.isLayerDraped(o._mergedLayers[o.order[C]])?A=Math.max(A,C):R=Math.min(R,C);return R>A}getMinElevationBelowMSL(){let o=0;return this._visibleDemTiles.filter(c=>c.dem).forEach(c=>{o=Math.min(o,c.dem.tree.minimums[0])}),o===0?o:(o-30)*this._exaggeration}raycast(o,c,A){if(!this._visibleDemTiles)return null;const R=this._visibleDemTiles.filter(C=>C.dem).map(C=>{const P=C.tileID,L=1<<P.overscaledZ,{x:j,y:H}=P.canonical,W=j/L,te=(j+1)/L,ae=H/L,ce=(H+1)/L;return{minx:W,miny:ae,maxx:te,maxy:ce,t:C.dem.tree.raycastRoot(W,ae,te,ce,o,c,A),tile:C}});R.sort((C,P)=>(C.t!==null?C.t:Number.MAX_VALUE)-(P.t!==null?P.t:Number.MAX_VALUE));for(const C of R){if(C.t==null)return null;const P=C.tile.dem.tree.raycast(C.minx,C.miny,C.maxx,C.maxy,o,c,A);if(P!=null)return P}return null}_createFBO(){const o=this.painter.context,c=o.gl,A=this.drapeBufferSize;o.activeTexture.set(c.TEXTURE0);const R=new n.T(o,{width:A[0],height:A[1],data:null},c.RGBA8);R.bind(c.LINEAR,c.CLAMP_TO_EDGE);const C=o.createFramebuffer(A[0],A[1],!0,null);return C.colorAttachment.set(R.texture),C.depthAttachment=new Gp(o,C.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=o.createRenderbuffer(o.gl.DEPTH_STENCIL,A[0],A[1]),this._stencilRef=0,C.depthAttachment.set(this._sharedDepthStencil),o.clear({stencil:0})):C.depthAttachment.set(this._sharedDepthStencil),o.extTextureFilterAnisotropic&&c.texParameterf(c.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax),{fb:C,tex:R,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const o in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[o].hasTransition())return!0;return this._style.order.some(o=>{const c=this._style._mergedLayers[o],A=c.isHidden(this.painter.transform.zoom);return c.type==="hillshade"||c.type==="custom"?!A&&c.shouldRedrape():!A&&c.hasTransition()})}_clearLineLayersFromRenderCache(){let o=!1;for(const A of this._style.getSources())if(A instanceof nc){o=!0;break}if(!o)return;const c={};for(let A=0;A<this._style.order.length;++A){const R=this._style._mergedLayers[this._style.order[A]],C=this._style.getLayerSourceCache(R);if(C&&!c[C.id]&&!R.isHidden(this.painter.transform.zoom)&&R.type==="line"&&R.widthExpression()instanceof n.ab){c[C.id]=!0;for(const P of this.proxyCoords){const L=this.proxyToSource[P.key][C.id];if(L)for(const j of L)this._clearRenderCacheForTile(C.id,j)}}}}_clearRasterLayersFromRenderCache(){let o=!1;for(const A in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[A]._source instanceof Yo){o=!0;break}if(!o)return;const c={};for(let A=0;A<this._style.order.length;++A){const R=this._style._mergedLayers[this._style.order[A]],C=this._style.getLayerSourceCache(R);if(!C||c[C.id]||R.isHidden(this.painter.transform.zoom)||R.type!=="raster")continue;const P=R.paint.get("raster-fade-duration");for(const L of this.proxyCoords){const j=this.proxyToSource[L.key][C.id];if(j)for(const H of j){const W=Nl(C.getTile(H),C.findLoadedParent(H,0),C,this.painter.transform,P);(W.opacity!==1||W.mix!==0)&&this._clearRenderCacheForTile(C.id,H)}}}}_setupDrapedRenderBatches(){this._style.updateDrapeFirstLayers();const o=this._style.order,c=o.length;if(c===0)return;const A=[];this._pendingGroundEffectLayers=[];let R,C=0,P=this._style._mergedLayers[o[C]];for(;!this._style.isLayerDraped(P)&&P.isHidden(this.painter.transform.zoom)&&++C<c;)P=this._style._mergedLayers[o[C]];for(;C<c;++C){const L=this._style._mergedLayers[o[C]];L.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(L)?R===void 0&&(R=C):(L.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(C),R!==void 0&&(A.push({start:R,end:C-1}),R=void 0)))}if(R!==void 0&&A.push({start:R,end:C-1}),A.length!==0){const L=A[A.length-1];this._pendingGroundEffectLayers.every(j=>j>L.end)||n.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=A}_setupRenderCache(o){const c=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,c.renderCache.length>c.renderCachePool.length){const P=Object.values(c.proxyCachedFBO);c.proxyCachedFBO={};for(let L=0;L<P.length;++L){const j=Object.values(P[L]);c.renderCachePool.push(...j)}}return}this._clearRasterLayersFromRenderCache();const A=this.proxyCoords,R=this._tilesDirty;for(let P=A.length-1;P>=0;P--){const L=A[P];if(c.getTileByID(L.key),c.proxyCachedFBO[L.key]!==void 0){const j=o[L.key],H=this.proxyToSource[L.key];let W=0;for(const te in H){const ae=H[te],ce=j[te];if(!ce||ce.length!==ae.length||ae.some((Te,ve)=>Te!==ce[ve]||R[te]&&R[te].hasOwnProperty(Te.key))){W=-1;break}++W}for(const te in c.proxyCachedFBO[L.key])c.renderCache[c.proxyCachedFBO[L.key][te]].dirty=W<0||W!==Object.values(j).length}}const C=[...this._drapedRenderBatches];C.sort((P,L)=>L.end-L.start-(P.end-P.start));for(const P of C)for(const L of A){if(c.proxyCachedFBO[L.key])continue;let j=c.renderCachePool.pop();j===void 0&&c.renderCache.length<50&&(j=c.renderCache.length,c.renderCache.push(this._createFBO())),j!==void 0&&(c.proxyCachedFBO[L.key]={},c.proxyCachedFBO[L.key][P.start]=j,c.renderCache[j].dirty=!0)}this._tilesDirty={}}_setupStencil(o,c,A,R){if(!R||!this._sourceTilesOverlap[R.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const C=this.painter.context,P=C.gl;if(c.length<=1)return void(this._overlapStencilType=!1);let L;if(A.isTileClipped())L=c.length,this._overlapStencilMode.test={func:P.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(c[0].overscaledZ>c[c.length-1].overscaledZ))return void(this._overlapStencilType=!1);L=1,this._overlapStencilMode.test={func:P.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+L>255&&(C.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=L,this._overlapStencilMode.ref=this._stencilRef,A.isTileClipped()&&this._renderTileClippingMasks(c,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(o){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[o.key]),this._overlapStencilMode):Rr.disabled}_renderTileClippingMasks(o,c){const A=this.painter,R=this.painter.context,C=R.gl;A._tileClippingMaskIDs={},R.setColorMode(br.disabled),R.setDepthMode(ir.disabled);const P=A.getOrCreateProgram("clippingMask");for(const L of o){const j=A._tileClippingMaskIDs[L.key]=--c;P.draw(A,C.TRIANGLES,ir.disabled,new Rr({func:C.ALWAYS,mask:0},j,255,C.KEEP,C.KEEP,C.REPLACE),br.disabled,vr.disabled,Gc(L.projMatrix),"$clipping",A.tileExtentBuffer,A.quadTriangleIndexBuffer,A.tileExtentSegments)}}pointCoordinate(o){const c=this.painter.transform;if(o.x<0||o.x>c.width||o.y<0||o.y>c.height)return null;const A=[o.x,o.y,1,1];n.ad.vec4.transformMat4(A,A,c.pixelMatrixInverse),n.ad.vec4.scale(A,A,1/A[3]),A[0]/=c.worldSize,A[1]/=c.worldSize;const R=c._camera.position,C=n.bH(1,c.center.lat),P=[R[0],R[1],R[2]/C,0],L=n.ad.vec3.subtract([],A.slice(0,3),P);n.ad.vec3.normalize(L,L);const j=this.raycast(P,L,this._exaggeration);return j!==null&&j?(n.ad.vec3.scaleAndAdd(P,P,L,j),P[3]=P[2],P[2]*=C,P):null}_setupProxiedCoordsForOrtho(o,c,A){if(o.getSource()instanceof n.aK)return this._setupProxiedCoordsForImageSource(o,c,A);this._findCoveringTileCache[o.id]=this._findCoveringTileCache[o.id]||{};const R=this.proxiedCoords[o.id]=[],C=this.proxyCoords;for(let j=0;j<C.length;j++){const H=C[j],W=this._findTileCoveringTileID(H,o);if(W){const te=this._createProxiedId(H,W,A[H.key]&&A[H.key][o.id]);R.push(te),this.proxyToSource[H.key][o.id]=[te]}}let P=!1;const L=new Set;for(let j=0;j<c.length;j++){const H=o.getTile(c[j]);if(!H||!H.hasData())continue;const W=this._findTileCoveringTileID(H.tileID,this.proxySourceCache);if(W&&W.tileID.canonical.z!==H.tileID.canonical.z){const te=this.proxyToSource[W.tileID.key][o.id],ae=this._createProxiedId(W.tileID,H,A[W.tileID.key]&&A[W.tileID.key][o.id]);te?te.splice(te.length-1,0,ae):this.proxyToSource[W.tileID.key][o.id]=[ae];const ce=this.proxyToSource[W.tileID.key][o.id];L.has(ce)||L.add(ce),R.push(ae),P=!0}}if(this._sourceTilesOverlap[o.id]=P,P&&this._debugParams.sortTilesHiZFirst)for(const j of L)j.sort((H,W)=>W.overscaledZ-H.overscaledZ)}_setupProxiedCoordsForImageSource(o,c,A){if(!o.getSource().loaded())return;const R=this.proxiedCoords[o.id]=[],C=this.proxyCoords,P=o.getSource(),L=P.tileID;if(!L)return;const j=new n.P(L.x,L.y)._div(1<<L.z),H=P.coordinates.map(n.ac.fromLngLat).reduce((te,ae)=>(te.min.x=Math.min(te.min.x,ae.x-j.x),te.min.y=Math.min(te.min.y,ae.y-j.y),te.max.x=Math.max(te.max.x,ae.x-j.x),te.max.y=Math.max(te.max.y,ae.y-j.y),te),{min:new n.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new n.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),W=(te,ae)=>{const ce=te.wrap+te.canonical.x/(1<<te.canonical.z),Te=te.canonical.y/(1<<te.canonical.z),ve=n.ai/(1<<te.canonical.z),Ee=ae.wrap+ae.canonical.x/(1<<ae.canonical.z),Ve=ae.canonical.y/(1<<ae.canonical.z);return ce+ve<Ee+H.min.x||ce>Ee+H.max.x||Te+ve<Ve+H.min.y||Te>Ve+H.max.y};for(let te=0;te<C.length;te++){const ae=C[te];for(let ce=0;ce<c.length;ce++){const Te=o.getTile(c[ce]);if(!Te||!Te.hasData()||W(ae,Te.tileID))continue;const ve=this._createProxiedId(ae,Te,A[ae.key]&&A[ae.key][o.id]),Ee=this.proxyToSource[ae.key][o.id];Ee?Ee.push(ve):this.proxyToSource[ae.key][o.id]=[ve],R.push(ve)}}}_createProxiedId(o,c,A){let R=this.orthoMatrix;if(A){const C=A.find(P=>P.key===c.tileID.key);if(C)return C}if(c.tileID.key!==o.key){const C=o.canonical.z-c.tileID.canonical.z;let P,L,j;R=n.ad.mat4.create();const H=c.tileID.wrap-o.wrap<<o.overscaledZ;C>0?(P=n.ai>>C,L=P*((c.tileID.canonical.x<<C)-o.canonical.x+H),j=P*((c.tileID.canonical.y<<C)-o.canonical.y)):(P=n.ai<<-C,L=n.ai*(c.tileID.canonical.x-(o.canonical.x+H<<-C)),j=n.ai*(c.tileID.canonical.y-(o.canonical.y<<-C))),n.ad.mat4.ortho(R,0,P,0,P,0,1),n.ad.mat4.translate(R,R,[L,j,0])}return new Kf(c.tileID,o.key,R)}_findTileCoveringTileID(o,c){let A=c.getTile(o);if(A&&A.hasData())return A;const R=this._findCoveringTileCache[c.id],C=R[o.key];if(A=C?c.getTileByID(C):null,A&&A.hasData()||C===null)return A;let P=A?A.tileID:o,L=P.overscaledZ;const j=c.getSource().minzoom,H=[];if(!C){const te=c.getSource().maxzoom;if(o.canonical.z>=te){const ae=o.canonical.z-te;c.getSource().reparseOverscaled?(L=Math.max(o.canonical.z+2,c.transform.tileZoom),P=new n.aH(L,o.wrap,te,o.canonical.x>>ae,o.canonical.y>>ae)):ae!==0&&(L=te,P=new n.aH(L,o.wrap,te,o.canonical.x>>ae,o.canonical.y>>ae))}P.key!==o.key&&(H.push(P.key),A=c.getTile(P))}const W=te=>{H.forEach(ae=>{R[ae]=te}),H.length=0};for(L-=1;L>=j&&(!A||!A.hasData());L--){A&&W(A.tileID.key);const te=P.calculateScaledKey(L);if(A=c.getTileByID(te),A&&A.hasData())break;const ae=R[te];if(ae===null)break;ae===void 0?H.push(te):A=c.getTileByID(ae)}return W(A?A.tileID.key:null),A&&A.hasData()?A:null}findDEMTileFor(o){return this.enabled?this._findTileCoveringTileID(o,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(o,c){let A=this._tilesDirty[o];A||(A=this._tilesDirty[o]={}),A[c.key]=!0}}function Zc(g,o,c){const A=function(L,j,H){const W=n.ad.vec3.dot(j,L),te=n.ad.vec3.dot(H,[.2126,.7152,.0722]),ae=(Te,ve,Ee)=>(1-Ee)*Te+Ee*ve,ce=ae(1-.3*Math.min(te,1),1,Math.min(W+1,1));return ae(.92,1,Math.asin(n.ay(j[2],-1,1))/Math.PI+.5)*ce}(g,[0,0,1],o),R=[0,0,0];n.ad.vec3.scale(R,c.slice(0,3),A);const C=[0,0,0];n.ad.vec3.scale(C,o.slice(0,3),g[2]);const P=[0,0,0];return n.ad.vec3.add(P,R,C),n.cg(P)}const Ds=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],Zp=["stars","rainParticle","snowParticle","fillExtrusion","fillExtrusionGroundEffect","elevatedStructures","model","symbol"];class Fm{static cacheKey(o,c,A,R){let C=`${c}${R?R.cacheKey:""}`;for(const P of A)o.usedDefines.includes(P)&&(C+=`/${P}`);return C}constructor(o,c,A,R,C,P){const L=o.gl;this.program=L.createProgram(),this.configuration=R,this.name=c,this.fixedDefines=[...P];const j=R?R.getBinderAttributes():[],H=(A.staticAttributes||[]).concat(j);let W=R?R.defines():[];W=W.concat(P.map(Ee=>`#define ${Ee}`));const te=`#version 300 es
`;let ae=te+W.concat("precision mediump float;",Fc,Xl.fragmentSource).join(`
`);for(const Ee of A.fragmentIncludes)ae+=`
${qi[Ee]}`;ae+=`
${A.fragmentSource}`;let ce=te+W.concat("precision highp float;",Fc,Xl.vertexSource).join(`
`);for(const Ee of A.vertexIncludes)ce+=`
${qi[Ee]}`;this.forceManualRenderingForInstanceIDShaders=o.forceManualRenderingForInstanceIDShaders&&A.vertexSource.indexOf("gl_InstanceID")!==-1,this.forceManualRenderingForInstanceIDShaders&&(ce+=`
uniform int u_instanceID;
`),ce+=`
${A.vertexSource}`,this.forceManualRenderingForInstanceIDShaders&&(ce=ce.replaceAll("gl_InstanceID","u_instanceID"));const Te=L.createShader(L.FRAGMENT_SHADER);if(L.isContextLost())return void(this.failedToCreate=!0);L.shaderSource(Te,ae),L.compileShader(Te),L.attachShader(this.program,Te);const ve=L.createShader(L.VERTEX_SHADER);if(L.isContextLost())this.failedToCreate=!0;else{L.shaderSource(ve,ce),L.compileShader(ve),L.attachShader(this.program,ve),this.attributes={},this.numAttributes=H.length;for(let Ee=0;Ee<this.numAttributes;Ee++)if(H[Ee]){const Ve=H[Ee].startsWith("a_")?H[Ee]:`a_${H[Ee]}`;L.bindAttribLocation(this.program,Ee,Ve),this.attributes[Ve]=Ee}L.linkProgram(this.program),L.deleteShader(ve),L.deleteShader(Te),this.fixedUniforms=C(o),this.binderUniforms=R?R.getUniforms(o):[],this.forceManualRenderingForInstanceIDShaders&&(this.instancingUniforms=(Ee=>({u_instanceID:new n.bN(Ee)}))(o)),(P.includes("TERRAIN")||c.indexOf("symbol")!==-1||c.indexOf("circle")!==-1)&&(this.terrainUniforms=(Ee=>({u_dem:new n.bN(Ee),u_dem_prev:new n.bN(Ee),u_dem_tl:new n.bK(Ee),u_dem_scale:new n.bM(Ee),u_dem_tl_prev:new n.bK(Ee),u_dem_scale_prev:new n.bM(Ee),u_dem_size:new n.bM(Ee),u_dem_lerp:new n.bM(Ee),u_exaggeration:new n.bM(Ee),u_depth:new n.bN(Ee),u_depth_size_inv:new n.bK(Ee),u_depth_range_unpack:new n.bK(Ee),u_occluder_half_size:new n.bM(Ee),u_occlusion_depth_offset:new n.bM(Ee),u_meter_to_dem:new n.bM(Ee),u_label_plane_matrix_inv:new n.bJ(Ee)}))(o)),P.includes("GLOBE")&&(this.globeUniforms=(Ee=>({u_tile_tl_up:new n.bL(Ee),u_tile_tr_up:new n.bL(Ee),u_tile_br_up:new n.bL(Ee),u_tile_bl_up:new n.bL(Ee),u_tile_up_scale:new n.bM(Ee)}))(o)),P.includes("FOG")&&(this.fogUniforms=(Ee=>({u_fog_matrix:new n.bJ(Ee),u_fog_range:new n.bK(Ee),u_fog_color:new n.cb(Ee),u_fog_horizon_blend:new n.bM(Ee),u_fog_vertical_limit:new n.bK(Ee),u_fog_temporal_offset:new n.bM(Ee),u_frustum_tl:new n.bL(Ee),u_frustum_tr:new n.bL(Ee),u_frustum_br:new n.bL(Ee),u_frustum_bl:new n.bL(Ee),u_globe_pos:new n.bL(Ee),u_globe_radius:new n.bM(Ee),u_globe_transition:new n.bM(Ee),u_is_globe:new n.bN(Ee),u_viewport:new n.bK(Ee)}))(o)),P.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(Ee=>({u_cutoff_params:new n.cb(Ee)}))(o)),P.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(Ee=>({u_lighting_ambient_color:new n.bL(Ee),u_lighting_directional_dir:new n.bL(Ee),u_lighting_directional_color:new n.bL(Ee),u_ground_radiance:new n.bL(Ee)}))(o)),P.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(Ee=>({u_light_matrix_0:new n.bJ(Ee),u_light_matrix_1:new n.bJ(Ee),u_fade_range:new n.bK(Ee),u_shadow_normal_offset:new n.bL(Ee),u_shadow_intensity:new n.bM(Ee),u_shadow_texel_size:new n.bM(Ee),u_shadow_map_resolution:new n.bM(Ee),u_shadow_direction:new n.bL(Ee),u_shadow_bias:new n.bL(Ee),u_shadowmap_0:new n.bN(Ee),u_shadowmap_1:new n.bN(Ee)}))(o))}}setTerrainUniformValues(o,c){if(!this.terrainUniforms)return;const A=this.terrainUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const R in c)A[R]&&A[R].set(this.program,R,c[R])}}setGlobeUniformValues(o,c){if(!this.globeUniforms)return;const A=this.globeUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const R in c)A[R]&&A[R].set(this.program,R,c[R])}}setFogUniformValues(o,c){if(!this.fogUniforms)return;const A=this.fogUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const R in c)A[R].set(this.program,R,c[R])}}setCutoffUniformValues(o,c){if(!this.cutoffUniforms)return;const A=this.cutoffUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const R in c)A[R].set(this.program,R,c[R])}}setLightsUniformValues(o,c){if(!this.lightsUniforms)return;const A=this.lightsUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const R in c)A[R].set(this.program,R,c[R])}}setShadowUniformValues(o,c){if(this.failedToCreate||!this.shadowUniforms)return;const A=this.shadowUniforms;o.program.set(this.program);for(const R in c)A[R].set(this.program,R,c[R])}_drawDebugWireframe(o,c,A,R,C,P,L,j,H,W){const te=o.options.wireframe;if(te.terrain===!1&&te.layers2D===!1&&te.layers3D===!1)return;const ae=o.context;if(!(!(!te.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!te.layers2D||o._terrain&&o._terrain.renderingToTexture||!Ds.includes(this.name))||!(!te.layers3D||!Zp.includes(this.name))))return;const ce=ae.gl,Te=o.wireframeDebugCache.getLinesFromTrianglesBuffer(o.frameCounter,C,ae);if(!Te)return;const ve=[...this.fixedDefines];ve.push("DEBUG_WIREFRAME");const Ee=o.getOrCreateProgram(this.name,{config:this.configuration,defines:ve});ae.program.set(Ee.program);const Ve=(Xe,ht,st)=>{if(ht[Xe]&&st[Xe])for(const ot in ht[Xe])st[Xe][ot]&&st[Xe][ot].set(st.program,ot,ht[Xe][ot].current)};H&&H.setUniforms(Ee.program,ae,Ee.binderUniforms,L,{zoom:j}),Ve("fixedUniforms",this,Ee),Ve("terrainUniforms",this,Ee),Ve("globeUniforms",this,Ee),Ve("fogUniforms",this,Ee),Ve("lightsUniforms",this,Ee),Ve("shadowUniforms",this,Ee),Te.bind(),ae.setColorMode(new br([ce.ONE,ce.ONE_MINUS_SRC_ALPHA,ce.ZERO,ce.ONE],n.al.transparent,[!0,!0,!0,!1])),ae.setDepthMode(new ir(c.func===ce.LESS?ce.LEQUAL:c.func,ir.ReadOnly,c.range)),ae.setStencilMode(Rr.disabled);const Be=3*P.primitiveLength*2,et=3*P.primitiveOffset*2*2;if(this.forceManualRenderingForInstanceIDShaders){const Xe=W||1;for(let ht=0;ht<Xe;++ht)Ee.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",ht),ce.drawElements(ce.LINES,Be,ce.UNSIGNED_SHORT,et)}else W&&W>1?ce.drawElementsInstanced(ce.LINES,Be,ce.UNSIGNED_SHORT,et,W):ce.drawElements(ce.LINES,Be,ce.UNSIGNED_SHORT,et);C.bind(),ae.program.set(this.program),ae.setDepthMode(c),ae.setStencilMode(A),ae.setColorMode(R)}checkUniforms(o,c,A){if(this.fixedDefines.includes(c)){for(const R of Object.keys(A))if(!A[R].initialized)throw new Error(`Program '${this.name}', from draw '${o}': uniform ${R} not set but required by ${c} being defined`)}}draw(o,c,A,R,C,P,L,j,H,W,te,ae,ce,Te,ve,Ee){const Ve=o.context,Be=Ve.gl;if(this.failedToCreate)return;Ve.program.set(this.program),Ve.setDepthMode(A),Ve.setStencilMode(R),Ve.setColorMode(C),Ve.setCullFace(P);for(const ht of Object.keys(this.fixedUniforms))this.fixedUniforms[ht].set(this.program,ht,L[ht]);Te&&Te.setUniforms(this.program,Ve,this.binderUniforms,ae,{zoom:ce});const et={[Be.POINTS]:1,[Be.LINES]:2,[Be.TRIANGLES]:3,[Be.LINE_STRIP]:1}[c];this.checkUniforms(j,"RENDER_SHADOWS",this.shadowUniforms);const Xe=Ee&&Ee>0?1:void 0;for(const ht of te.get()){const st=ht.vaos||(ht.vaos={});if((st[j]||(st[j]=new Uc)).bind(Ve,this,H,Te?Te.getPaintVertexBuffers():[],W,ht.vertexOffset,ve||[],Xe),this.forceManualRenderingForInstanceIDShaders){const ot=Ee||1;for(let lt=0;lt<ot;++lt)this.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",lt),W?Be.drawElements(c,ht.primitiveLength*et,Be.UNSIGNED_SHORT,ht.primitiveOffset*et*2):Be.drawArrays(c,ht.vertexOffset,ht.vertexLength)}else Ee&&Ee>1?Be.drawElementsInstanced(c,ht.primitiveLength*et,Be.UNSIGNED_SHORT,ht.primitiveOffset*et*2,Ee):W?Be.drawElements(c,ht.primitiveLength*et,Be.UNSIGNED_SHORT,ht.primitiveOffset*et*2):Be.drawArrays(c,ht.vertexOffset,ht.vertexLength);c===Be.TRIANGLES&&W&&this._drawDebugWireframe(o,A,R,C,W,ht,ae,ce,Te,Ee)}}}function _f(g,o){const c=Math.pow(2,o.tileID.overscaledZ),A=o.tileSize*Math.pow(2,g.transform.tileZoom)/c,R=A*(o.tileID.canonical.x+o.tileID.wrap*c),C=A*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture?o.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/n.at(o,1,g.transform.tileZoom),u_pixel_coord_upper:[R>>16,C>>16],u_pixel_coord_lower:[65535&R,65535&C]}}const qp={terrain:0,flat:1},to=n.ad.mat4.create(),kh=(g,o,c,A,R,C,P,L,j,H,W,te,ae,ce,Te,ve,Ee,Ve)=>{const Be=o.style.light,et=Be.properties.get("position"),Xe=[et.x,et.y,et.z],ht=n.ad.mat3.create();Be.properties.get("anchor")==="viewport"&&(n.ad.mat3.fromRotation(ht,-o.transform.angle),n.ad.vec3.transformMat3(Xe,Xe,ht));const st=Be.properties.get("color"),ot=o.transform,lt={u_matrix:g,u_lightpos:Xe,u_lightintensity:Be.properties.get("intensity"),u_lightcolor:[st.r,st.g,st.b],u_vertical_gradient:+c,u_opacity:A,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:to,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_height_type:qp[H],u_base_type:qp[W],u_ao:R,u_edge_radius:C,u_width_scale:P,u_flood_light_color:Te,u_vertical_scale:ve,u_flood_light_intensity:Ee,u_ground_shadow_factor:Ve};return ot.projection.name==="globe"&&(lt.u_tile_id=[L.canonical.x,L.canonical.y,1<<L.canonical.z],lt.u_zoom_transition=te,lt.u_inv_rot_matrix=ce,lt.u_merc_center=ae,lt.u_up_dir=ot.projection.upVector(new n.bT(0,0,0),ae[0]*n.ai,ae[1]*n.ai),lt.u_height_lift=j),lt},G=(g,o,c,A,R,C)=>({u_matrix:g,u_edge_radius:o,u_width_scale:c,u_vertical_scale:A,u_height_type:qp[R],u_base_type:qp[C]}),Q=(g,o,c,A,R,C,P,L,j,H,W,te,ae,ce,Te,ve,Ee)=>{const Ve=kh(g,o,c,A,R,C,P,L,H,W,te,ae,ce,Te,ve,Ee,1,[0,0,0]),Be={u_height_factor:-Math.pow(2,L.overscaledZ)/j.tileSize/8};return n.l(Ve,_f(o,j),Be)},fe=(g,o)=>({u_matrix:g,u_emissive_strength:o}),Ne=(g,o,c,A)=>n.l(fe(g,o),_f(c,A)),Ge=(g,o,c)=>({u_matrix:g,u_world:c,u_emissive_strength:o}),Qe=(g,o,c,A,R)=>n.l(Ne(g,o,c,A),{u_world:R}),at=(g,o,c,A,R)=>({u_matrix:g,u_camera_pos:[o[0],o[1],o[2]],u_depth_bias:c,u_height_scale:A,u_reset_depth:R}),ut=(g,o,c,A)=>{const R=n.ai/c.tileSize;return{u_matrix:g,u_camera_to_center_distance:o.getCameraToCenterDistance(A),u_extrude_scale:[o.pixelsToGLUnits[0]/R,o.pixelsToGLUnits[1]/R]}},pt=(g,o,c=1)=>({u_matrix:g,u_color:o.toRenderColor(null),u_overlay:0,u_overlay_scale:c}),Ct=n.ad.mat4.create(),Qt=(g,o,c,A,R,C,P)=>{const L=g.transform,j=L.projection.name==="globe",H=j?n.cO(L.zoom,o.canonical)*L._pixelsPerMercatorPixel:n.at(c,1,C),W={u_matrix:o.projMatrix,u_extrude_scale:H,u_intensity:P,u_inv_rot_matrix:Ct,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(j){W.u_inv_rot_matrix=A,W.u_merc_center=R,W.u_tile_id=[o.canonical.x,o.canonical.y,1<<o.canonical.z],W.u_zoom_transition=n.ag(L.zoom);const te=R[0]*n.ai,ae=R[1]*n.ai;W.u_up_dir=L.projection.upVector(new n.bT(0,0,0),te,ae)}return W};function Pt(g,[o,c,A,R],[C,P]){if(C===P)return[0,0,0,0];const L=255*(g-1)/(g*(P-C));return[o*L,c*L,A*L,R*L]}function Aa(g,o,[c,A]){return c===A?0:.5/g+(o-c)*(g-1)/(g*(A-c))}const ra=(g,o,c,A,R,C,P,L,j,H,W,te,ae,ce,Te,ve,Ee,Ve,Be,et,Xe)=>({u_matrix:g,u_normalize_matrix:o,u_globe_matrix:c,u_merc_matrix:A,u_grid_matrix:R,u_tl_parent:C,u_scale_parent:H,u_fade_t:W.mix,u_opacity:W.opacity*te.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:te.paint.get("raster-brightness-min"),u_brightness_high:te.paint.get("raster-brightness-max"),u_saturation_factor:n.cP(te.paint.get("raster-saturation")),u_contrast_factor:n.cQ(te.paint.get("raster-contrast")),u_spin_weights:wa(te.paint.get("raster-hue-rotate")),u_perspective_transform:ae,u_raster_elevation:ce,u_zoom_transition:P,u_merc_center:L,u_cutoff_params:j,u_colorization_mix:Pt(n.cR,ve,Ve),u_colorization_offset:Aa(n.cR,Ee,Ve),u_color_ramp:Te,u_texture_offset:[et/(Be+2*et),Be/(Be+2*et)],u_texture_res:[Be+2*et,Be+2*et],u_emissive_strength:Xe});function wa(g){g*=Math.PI/180;const o=Math.sin(g),c=Math.cos(g);return[(2*c+1)/3,(-Math.sqrt(3)*o-c+1)/3,(Math.sqrt(3)*o-c+1)/3]}const fa=.05,vt=(g,o,c,A,R,C,P,L,j,H,W,te)=>({u_matrix:g,u_normalize_matrix:o,u_globe_matrix:c,u_merc_matrix:A,u_grid_matrix:R,u_tl_parent:C,u_scale_parent:H,u_fade_t:W.mix,u_opacity:W.opacity,u_image0:0,u_image1:1,u_raster_elevation:te,u_zoom_transition:P,u_merc_center:L,u_cutoff_params:j}),ta=(g,o,c,A,R,C,P,L,j,H)=>({u_particle_texture:g,u_particle_texture_side_len:o,u_tile_offset:c,u_velocity:A,u_color_ramp:C,u_velocity_res:R,u_max_speed:P,u_uv_offset:L,u_data_scale:[255*j[0],255*j[1]],u_data_offset:H,u_particle_pos_scale:1.1,u_particle_pos_offset:[fa,fa]}),Ga=(g,o,c,A,R,C,P,L,j,H)=>({u_particle_texture:g,u_particle_texture_side_len:o,u_velocity:c,u_velocity_res:A,u_max_speed:R,u_speed_factor:C,u_reset_rate:P,u_rand_seed:Math.random(),u_uv_offset:L,u_data_scale:[255*j[0],255*j[1]],u_data_offset:H,u_particle_pos_scale:1.1,u_particle_pos_offset:[fa,fa]}),Ka=n.ad.mat4.create(),qa=(g,o,c,A,R,C,P,L,j,H,W,te,ae,ce,Te,ve,Ee,Ve,Be,et,Xe,ht)=>{const st=R.transform,ot={u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:st.getCameraToCenterDistance(Be),u_rotate_symbol:+c,u_aspect_ratio:st.width/st.height,u_fade_change:R.options.fadeDuration?R.symbolFadeChange:1,u_matrix:C,u_label_plane_matrix:P,u_coord_matrix:L,u_is_text:+H,u_elevation_from_sea:j?1:0,u_pitch_with_map:+A,u_texsize:W,u_texsize_icon:te,u_texture:0,u_texture_icon:1,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Ka,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Ka,u_up_vector:[0,-1,0],u_color_adj_mat:et,u_icon_transition:Xe||0,u_gamma_scale:A?R.transform.getCameraToCenterDistance(Be)*Math.cos(R.terrain?0:R.transform._pitch):1,u_device_pixel_ratio:n.q.devicePixelRatio,u_is_halo:1,u_scale_factor:ht||1};return Be.name==="globe"&&(ot.u_tile_id=[ce.canonical.x,ce.canonical.y,1<<ce.canonical.z],ot.u_zoom_transition=Te,ot.u_inv_rot_matrix=Ee,ot.u_merc_center=ve,ot.u_camera_forward=st._camera.forward(),ot.u_ecef_origin=n.cS(st.globeMatrix,ce.toUnwrapped()),ot.u_tile_matrix=Float32Array.from(st.globeMatrix),ot.u_up_vector=Ve),ot},Sr=(g,o,c,A)=>({u_matrix:g,u_emissive_strength:o,u_opacity:c,u_color:A}),fr=(g,o,c,A,R,C,P,L,j)=>n.l(function(H,W,te,ae,ce,Te){const{width:ve,height:Ee}=ae.imageManager.getPixelSize(W),Ve=Math.pow(2,Te.tileID.overscaledZ),Be=Te.tileSize*Math.pow(2,ae.transform.tileZoom)/Ve,et=Be*(Te.tileID.canonical.x+Te.tileID.wrap*Ve),Xe=Be*Te.tileID.canonical.y;return{u_image:0,u_pattern_tl:te.tl,u_pattern_br:te.br,u_texsize:[ve,Ee],u_pattern_size:te.displaySize,u_pattern_units_to_pixels:ce?[ae.transform.width,-1*ae.transform.height]:[1/n.at(Te,1,ae.transform.tileZoom),1/n.at(Te,1,ae.transform.tileZoom)],u_pixel_coord_upper:[et>>16,Xe>>16],u_pixel_coord_lower:[65535&et,65535&Xe]}}(0,C,P,A,L,j),{u_matrix:g,u_emissive_strength:o,u_opacity:c}),rn=new Float32Array(n.ad.mat4.identity([])),lr=(g,o,c,A,R,C,P,L,j,H,W,te,ae,ce=[0,0,0],Te)=>{const ve=R.style.light,Ee=ve.properties.get("position"),Ve=[-Ee.x,-Ee.y,Ee.z],Be=n.ad.mat3.create();ve.properties.get("anchor")==="viewport"&&(n.ad.mat3.fromRotation(Be,-R.transform.angle),n.ad.vec3.transformMat3(Ve,Ve,Be));const et=W.alphaMode==="MASK",Xe=ve.properties.get("color").toRenderColor(null),ht=ae.paint.get("model-ambient-occlusion-intensity"),st=ae.paint.get("model-color").constantOr(n.al.white).toRenderColor(null),ot=ae.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:g,u_lighting_matrix:o,u_normal_matrix:c,u_node_matrix:A||rn,u_lightpos:Ve,u_lightintensity:ve.properties.get("intensity"),u_lightcolor:[Xe.r,Xe.g,Xe.b],u_camera_pos:ce,u_opacity:C,u_baseTextureIsAlpha:0,u_alphaMask:+et,u_alphaCutoff:W.alphaCutoff,u_baseColorFactor:[P.r,P.g,P.b,P.a],u_emissiveFactor:[L[0],L[1],L[2],1],u_metallicFactor:j,u_roughnessFactor:H,u_baseColorTexture:Ai.BaseColor,u_metallicRoughnessTexture:Ai.MetallicRoughness,u_normalTexture:Ai.Normal,u_occlusionTexture:Ai.Occlusion,u_emissionTexture:Ai.Emission,u_lutTexture:Ai.LUT,u_color_mix:[st.r,st.g,st.b,ot],u_aoIntensity:ht,u_emissive_strength:te,u_occlusionTextureTransform:Te||[0,0,0,0]}},vi=(g,o=rn,c=rn)=>({u_matrix:g,u_instance:o,u_node_matrix:c}),xi={fillExtrusion:g=>({u_matrix:new n.bJ(g),u_lightpos:new n.bL(g),u_lightintensity:new n.bM(g),u_lightcolor:new n.bL(g),u_vertical_gradient:new n.bM(g),u_opacity:new n.bM(g),u_edge_radius:new n.bM(g),u_width_scale:new n.bM(g),u_ao:new n.bK(g),u_height_type:new n.bN(g),u_base_type:new n.bN(g),u_tile_id:new n.bL(g),u_zoom_transition:new n.bM(g),u_inv_rot_matrix:new n.bJ(g),u_merc_center:new n.bK(g),u_up_dir:new n.bL(g),u_height_lift:new n.bM(g),u_flood_light_color:new n.bL(g),u_vertical_scale:new n.bM(g),u_flood_light_intensity:new n.bM(g),u_ground_shadow_factor:new n.bL(g)}),fillExtrusionDepth:g=>({u_matrix:new n.bJ(g),u_edge_radius:new n.bM(g),u_width_scale:new n.bM(g),u_vertical_scale:new n.bM(g),u_height_type:new n.bN(g),u_base_type:new n.bN(g)}),fillExtrusionPattern:g=>({u_matrix:new n.bJ(g),u_lightpos:new n.bL(g),u_lightintensity:new n.bM(g),u_lightcolor:new n.bL(g),u_vertical_gradient:new n.bM(g),u_height_factor:new n.bM(g),u_edge_radius:new n.bM(g),u_width_scale:new n.bM(g),u_ao:new n.bK(g),u_height_type:new n.bN(g),u_base_type:new n.bN(g),u_tile_id:new n.bL(g),u_zoom_transition:new n.bM(g),u_inv_rot_matrix:new n.bJ(g),u_merc_center:new n.bK(g),u_up_dir:new n.bL(g),u_height_lift:new n.bM(g),u_image:new n.bN(g),u_texsize:new n.bK(g),u_pixel_coord_upper:new n.bK(g),u_pixel_coord_lower:new n.bK(g),u_tile_units_to_pixels:new n.bM(g),u_opacity:new n.bM(g)}),fillExtrusionGroundEffect:g=>({u_matrix:new n.bJ(g),u_opacity:new n.bM(g),u_ao_pass:new n.bM(g),u_meter_to_tile:new n.bM(g),u_ao:new n.bK(g),u_flood_light_intensity:new n.bM(g),u_flood_light_color:new n.bL(g),u_attenuation:new n.bM(g),u_edge_radius:new n.bM(g),u_fb:new n.bN(g),u_fb_size:new n.bM(g),u_dynamic_offset:new n.bM(g)}),fill:g=>({u_matrix:new n.bJ(g),u_emissive_strength:new n.bM(g)}),fillPattern:g=>({u_matrix:new n.bJ(g),u_emissive_strength:new n.bM(g),u_image:new n.bN(g),u_texsize:new n.bK(g),u_pixel_coord_upper:new n.bK(g),u_pixel_coord_lower:new n.bK(g),u_tile_units_to_pixels:new n.bM(g)}),fillOutline:g=>({u_matrix:new n.bJ(g),u_emissive_strength:new n.bM(g),u_world:new n.bK(g)}),fillOutlinePattern:g=>({u_matrix:new n.bJ(g),u_emissive_strength:new n.bM(g),u_world:new n.bK(g),u_image:new n.bN(g),u_texsize:new n.bK(g),u_pixel_coord_upper:new n.bK(g),u_pixel_coord_lower:new n.bK(g),u_tile_units_to_pixels:new n.bM(g)}),elevatedStructures:g=>({u_matrix:new n.bJ(g)}),elevatedStructuresDepthReconstruct:g=>({u_matrix:new n.bJ(g),u_camera_pos:new n.bL(g),u_depth_bias:new n.bM(g),u_height_scale:new n.bM(g),u_reset_depth:new n.bM(g)}),circle:n.cT,collisionBox:g=>({u_matrix:new n.bJ(g),u_camera_to_center_distance:new n.bM(g),u_extrude_scale:new n.bK(g)}),collisionCircle:g=>({u_matrix:new n.bJ(g),u_inv_matrix:new n.bJ(g),u_camera_to_center_distance:new n.bM(g),u_viewport_size:new n.bK(g)}),debug:g=>({u_color:new n.cA(g),u_matrix:new n.bJ(g),u_overlay:new n.bN(g),u_overlay_scale:new n.bM(g)}),clippingMask:g=>({u_matrix:new n.bJ(g)}),heatmap:g=>({u_extrude_scale:new n.bM(g),u_intensity:new n.bM(g),u_matrix:new n.bJ(g),u_inv_rot_matrix:new n.bJ(g),u_merc_center:new n.bK(g),u_tile_id:new n.bL(g),u_zoom_transition:new n.bM(g),u_up_dir:new n.bL(g)}),heatmapTexture:g=>({u_image:new n.bN(g),u_color_ramp:new n.bN(g),u_opacity:new n.bM(g)}),hillshade:g=>({u_matrix:new n.bJ(g),u_image:new n.bN(g),u_latrange:new n.bK(g),u_light:new n.bK(g),u_shadow:new n.cA(g),u_highlight:new n.cA(g),u_emissive_strength:new n.bM(g),u_accent:new n.cA(g)}),hillshadePrepare:g=>({u_matrix:new n.bJ(g),u_image:new n.bN(g),u_dimension:new n.bK(g),u_zoom:new n.bM(g)}),line:n.cU,linePattern:n.cV,raster:g=>({u_matrix:new n.bJ(g),u_normalize_matrix:new n.bJ(g),u_globe_matrix:new n.bJ(g),u_merc_matrix:new n.bJ(g),u_grid_matrix:new n.cB(g),u_tl_parent:new n.bK(g),u_scale_parent:new n.bM(g),u_fade_t:new n.bM(g),u_opacity:new n.bM(g),u_image0:new n.bN(g),u_image1:new n.bN(g),u_brightness_low:new n.bM(g),u_brightness_high:new n.bM(g),u_saturation_factor:new n.bM(g),u_contrast_factor:new n.bM(g),u_spin_weights:new n.bL(g),u_perspective_transform:new n.bK(g),u_raster_elevation:new n.bM(g),u_zoom_transition:new n.bM(g),u_merc_center:new n.bK(g),u_cutoff_params:new n.cb(g),u_colorization_mix:new n.cb(g),u_colorization_offset:new n.bM(g),u_color_ramp:new n.bN(g),u_texture_offset:new n.bK(g),u_texture_res:new n.bK(g),u_emissive_strength:new n.bM(g)}),rasterParticle:g=>({u_matrix:new n.bJ(g),u_normalize_matrix:new n.bJ(g),u_globe_matrix:new n.bJ(g),u_merc_matrix:new n.bJ(g),u_grid_matrix:new n.cB(g),u_tl_parent:new n.bK(g),u_scale_parent:new n.bM(g),u_fade_t:new n.bM(g),u_opacity:new n.bM(g),u_image0:new n.bN(g),u_image1:new n.bN(g),u_raster_elevation:new n.bM(g),u_zoom_transition:new n.bM(g),u_merc_center:new n.bK(g),u_cutoff_params:new n.cb(g)}),rasterParticleTexture:g=>({u_texture:new n.bN(g),u_opacity:new n.bM(g)}),rasterParticleDraw:g=>({u_particle_texture:new n.bN(g),u_particle_texture_side_len:new n.bM(g),u_tile_offset:new n.bK(g),u_velocity:new n.bN(g),u_color_ramp:new n.bN(g),u_velocity_res:new n.bK(g),u_max_speed:new n.bM(g),u_uv_offset:new n.bK(g),u_data_scale:new n.bK(g),u_data_offset:new n.bM(g),u_particle_pos_scale:new n.bM(g),u_particle_pos_offset:new n.bK(g)}),rasterParticleUpdate:g=>({u_particle_texture:new n.bN(g),u_particle_texture_side_len:new n.bM(g),u_velocity:new n.bN(g),u_velocity_res:new n.bK(g),u_max_speed:new n.bM(g),u_speed_factor:new n.bM(g),u_reset_rate:new n.bM(g),u_rand_seed:new n.bM(g),u_uv_offset:new n.bK(g),u_data_scale:new n.bK(g),u_data_offset:new n.bM(g),u_particle_pos_scale:new n.bM(g),u_particle_pos_offset:new n.bK(g)}),symbol:g=>({u_is_size_zoom_constant:new n.bN(g),u_is_size_feature_constant:new n.bN(g),u_size_t:new n.bM(g),u_size:new n.bM(g),u_camera_to_center_distance:new n.bM(g),u_rotate_symbol:new n.bN(g),u_aspect_ratio:new n.bM(g),u_fade_change:new n.bM(g),u_matrix:new n.bJ(g),u_label_plane_matrix:new n.bJ(g),u_coord_matrix:new n.bJ(g),u_is_text:new n.bN(g),u_elevation_from_sea:new n.bN(g),u_pitch_with_map:new n.bN(g),u_texsize:new n.bK(g),u_texsize_icon:new n.bK(g),u_texture:new n.bN(g),u_texture_icon:new n.bN(g),u_gamma_scale:new n.bM(g),u_device_pixel_ratio:new n.bM(g),u_tile_id:new n.bL(g),u_zoom_transition:new n.bM(g),u_inv_rot_matrix:new n.bJ(g),u_merc_center:new n.bK(g),u_camera_forward:new n.bL(g),u_tile_matrix:new n.bJ(g),u_up_vector:new n.bL(g),u_ecef_origin:new n.bL(g),u_is_halo:new n.bN(g),u_icon_transition:new n.bM(g),u_color_adj_mat:new n.bJ(g),u_scale_factor:new n.bM(g)}),background:g=>({u_matrix:new n.bJ(g),u_emissive_strength:new n.bM(g),u_opacity:new n.bM(g),u_color:new n.cA(g)}),backgroundPattern:g=>({u_matrix:new n.bJ(g),u_emissive_strength:new n.bM(g),u_opacity:new n.bM(g),u_image:new n.bN(g),u_pattern_tl:new n.bK(g),u_pattern_br:new n.bK(g),u_texsize:new n.bK(g),u_pattern_size:new n.bK(g),u_pixel_coord_upper:new n.bK(g),u_pixel_coord_lower:new n.bK(g),u_pattern_units_to_pixels:new n.bK(g)}),terrainRaster:g=>({u_matrix:new n.bJ(g),u_image0:new n.bN(g),u_skirt_height:new n.bM(g),u_ground_shadow_factor:new n.bL(g)}),skybox:g=>({u_matrix:new n.bJ(g),u_sun_direction:new n.bL(g),u_cubemap:new n.bN(g),u_opacity:new n.bM(g),u_temporal_offset:new n.bM(g)}),skyboxGradient:g=>({u_matrix:new n.bJ(g),u_color_ramp:new n.bN(g),u_center_direction:new n.bL(g),u_radius:new n.bM(g),u_opacity:new n.bM(g),u_temporal_offset:new n.bM(g)}),skyboxCapture:g=>({u_matrix_3f:new n.cB(g),u_sun_direction:new n.bL(g),u_sun_intensity:new n.bM(g),u_color_tint_r:new n.cb(g),u_color_tint_m:new n.cb(g),u_luminance:new n.bM(g)}),globeRaster:g=>({u_proj_matrix:new n.bJ(g),u_globe_matrix:new n.bJ(g),u_normalize_matrix:new n.bJ(g),u_merc_matrix:new n.bJ(g),u_zoom_transition:new n.bM(g),u_merc_center:new n.bK(g),u_image0:new n.bN(g),u_grid_matrix:new n.cB(g),u_skirt_height:new n.bM(g),u_far_z_cutoff:new n.bM(g),u_frustum_tl:new n.bL(g),u_frustum_tr:new n.bL(g),u_frustum_br:new n.bL(g),u_frustum_bl:new n.bL(g),u_globe_pos:new n.bL(g),u_globe_radius:new n.bM(g),u_viewport:new n.bK(g)}),globeAtmosphere:g=>({u_frustum_tl:new n.bL(g),u_frustum_tr:new n.bL(g),u_frustum_br:new n.bL(g),u_frustum_bl:new n.bL(g),u_horizon:new n.bM(g),u_transition:new n.bM(g),u_fadeout_range:new n.bM(g),u_color:new n.cb(g),u_high_color:new n.cb(g),u_space_color:new n.cb(g),u_temporal_offset:new n.bM(g),u_horizon_angle:new n.bM(g)}),model:g=>({u_matrix:new n.bJ(g),u_lighting_matrix:new n.bJ(g),u_normal_matrix:new n.bJ(g),u_node_matrix:new n.bJ(g),u_lightpos:new n.bL(g),u_lightintensity:new n.bM(g),u_lightcolor:new n.bL(g),u_camera_pos:new n.bL(g),u_opacity:new n.bM(g),u_baseColorFactor:new n.cb(g),u_emissiveFactor:new n.cb(g),u_metallicFactor:new n.bM(g),u_roughnessFactor:new n.bM(g),u_baseTextureIsAlpha:new n.bN(g),u_alphaMask:new n.bN(g),u_alphaCutoff:new n.bM(g),u_baseColorTexture:new n.bN(g),u_metallicRoughnessTexture:new n.bN(g),u_normalTexture:new n.bN(g),u_occlusionTexture:new n.bN(g),u_emissionTexture:new n.bN(g),u_lutTexture:new n.bN(g),u_color_mix:new n.cb(g),u_aoIntensity:new n.bM(g),u_emissive_strength:new n.bM(g),u_occlusionTextureTransform:new n.cb(g)}),modelDepth:g=>({u_matrix:new n.bJ(g),u_instance:new n.bJ(g),u_node_matrix:new n.bJ(g)}),groundShadow:g=>({u_matrix:new n.bJ(g),u_ground_shadow_factor:new n.bL(g)}),stars:g=>({u_matrix:new n.bJ(g),u_up:new n.bL(g),u_right:new n.bL(g),u_intensity_multiplier:new n.bM(g)}),snowParticle:g=>({u_modelview:new n.bJ(g),u_projection:new n.bJ(g),u_time:new n.bM(g),u_cam_pos:new n.bL(g),u_velocityConeAperture:new n.bM(g),u_velocity:new n.bM(g),u_horizontalOscillationRadius:new n.bM(g),u_horizontalOscillationRate:new n.bM(g),u_boxSize:new n.bM(g),u_billboardSize:new n.bM(g),u_simpleShapeParameters:new n.bK(g),u_screenSize:new n.bK(g),u_thinningCenterPos:new n.bK(g),u_thinningShape:new n.bL(g),u_thinningAffectedRatio:new n.bM(g),u_thinningParticleOffset:new n.bM(g),u_particleColor:new n.cb(g),u_direction:new n.bL(g)}),rainParticle:g=>({u_modelview:new n.bJ(g),u_projection:new n.bJ(g),u_time:new n.bM(g),u_cam_pos:new n.bL(g),u_texScreen:new n.bN(g),u_velocityConeAperture:new n.bM(g),u_velocity:new n.bM(g),u_boxSize:new n.bM(g),u_rainDropletSize:new n.bK(g),u_distortionStrength:new n.bM(g),u_rainDirection:new n.bL(g),u_color:new n.cb(g),u_screenSize:new n.bK(g),u_thinningCenterPos:new n.bK(g),u_thinningShape:new n.bL(g),u_thinningAffectedRatio:new n.bM(g),u_thinningParticleOffset:new n.bM(g),u_shapeDirectionalPower:new n.bM(g),u_shapeNormalPower:new n.bM(g),u_mode:new n.bM(g)}),vignette:g=>({u_vignetteShape:new n.bL(g),u_vignetteColor:new n.cb(g)}),occlusion:g=>({u_matrix:new n.bJ(g),u_anchorPos:new n.bL(g),u_screenSizePx:new n.bK(g),u_occluderSizePx:new n.bK(g),u_color:new n.cb(g)})};class qn{constructor(o,c,A,R){this.id=qn.uniqueIdxCounter,qn.uniqueIdxCounter++,this.context=o;const C=o.gl;this.buffer=C.createBuffer(),this.dynamicDraw=!!A,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),C.bufferData(C.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||R||c.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){this.id=qn.uniqueIdxCounter,qn.uniqueIdxCounter++;const c=this.context.gl;this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}qn.uniqueIdxCounter=0;const ri={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class $i{constructor(o,c,A,R,C,P){this.length=c.length,this.attributes=A,this.itemSize=c.bytesPerElement,this.dynamicDraw=R,this.instanceCount=P,this.context=o;const L=o.gl;this.buffer=L.createBuffer(),o.bindVertexBuffer.set(this.buffer),L.bufferData(L.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?L.DYNAMIC_DRAW:L.STATIC_DRAW),this.dynamicDraw||C||c.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,c){for(let A=0;A<this.attributes.length;A++){const R=c.attributes[this.attributes[A].name];R!==void 0&&o.enableVertexAttribArray(R)}}setVertexAttribPointers(o,c,A){for(let R=0;R<this.attributes.length;R++){const C=this.attributes[R],P=c.attributes[C.name];P!==void 0&&o.vertexAttribPointer(P,C.components,o[ri[C.type]],!1,this.itemSize,C.offset+this.itemSize*(A||0))}}setVertexAttribDivisor(o,c,A){for(let R=0;R<this.attributes.length;R++){const C=c.attributes[this.attributes[R].name];C!==void 0&&this.instanceCount&&this.instanceCount>0&&o.vertexAttribDivisor(C,A)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class kn{constructor(o,c,A,R,C){this.context=o,this.width=c,this.height=A;const P=this.framebuffer=o.gl.createFramebuffer();R&&(this.colorAttachment=new rl(o,P)),C&&(this.depthAttachmentType=C,this.depthAttachment=C==="renderbuffer"?new Uh(o,P):new Od(o,P))}destroy(){const o=this.context.gl;if(this.colorAttachment){const c=this.colorAttachment.get();c&&o.deleteTexture(c)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const c=this.depthAttachment.get();c&&o.deleteRenderbuffer(c)}else{const c=this.depthAttachment.get();c&&o.deleteTexture(c)}o.deleteFramebuffer(this.framebuffer)}}class _n{constructor(o,c){this.gl=o,this.clearColor=new Oh(this),this.clearDepth=new tl(this),this.clearStencil=new pl(this),this.colorMask=new kc(this),this.depthMask=new vu(this),this.stencilMask=new Gu(this),this.stencilFunc=new mc(this),this.stencilOp=new Bp(this),this.stencilTest=new Dh(this),this.depthRange=new Mh(this),this.depthTest=new al(this),this.depthFunc=new Hi(this),this.blend=new _i(this),this.blendFunc=new Ql(this),this.blendColor=new wu(this),this.blendEquation=new $f(this),this.cullFace=new yc(this),this.cullFaceSide=new yf(this),this.frontFace=new Vd(this),this.program=new Ih(this),this.activeTexture=new Lh(this),this.viewport=new zd(this),this.bindFramebuffer=new gf(this),this.bindRenderbuffer=new Lm(this),this.bindTexture=new lh(this),this.bindVertexBuffer=new Vy(this),this.bindElementBuffer=new gc(this),this.bindVertexArrayOES=new ju(this),this.pixelStoreUnpack=new Ru(this),this.pixelStoreUnpackPremultiplyAlpha=new zy(this),this.pixelStoreUnpackFlipY=new Fh(this),this.options=c?Object.assign({},c):{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=o.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=o.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=o.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.forceManualRenderingForInstanceIDShaders=c&&!!c.forceManualRenderingForInstanceIDShaders||this.renderer&&this.renderer.indexOf("PowerVR")!==-1,this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=o.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=o.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=o.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),this.maxPointSize=o.getParameter(o.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,c,A){return new qn(this,o,c,A)}createVertexBuffer(o,c,A,R,C){return new $i(this,o,c,A,R,C)}createRenderbuffer(o,c,A){const R=this.gl,C=R.createRenderbuffer();return this.bindRenderbuffer.set(C),R.renderbufferStorage(R.RENDERBUFFER,o,c,A),this.bindRenderbuffer.set(null),C}createFramebuffer(o,c,A,R){return new kn(this,o,c,A,R)}clear({color:o,depth:c,stencil:A,colorMask:R}){const C=this.gl;let P=0;o&&(P|=C.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set(R||[!0,!0,!0,!0])),c!==void 0&&(P|=C.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),A!==void 0&&(P|=C.STENCIL_BUFFER_BIT,this.clearStencil.set(A),this.stencilMask.set(255)),C.clear(P)}setCullFace(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){n.bn(o.blendFunction,br.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor),o.blendEquation?this.blendEquation.set(o.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(o.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}let ds;function Fi(g,o,c,A,R,C,P){const L=g.context,j=L.gl,H=g.transform,W=g.getOrCreateProgram("collisionBox"),te=[];let ae=0,ce=0;for(let Xe=0;Xe<A.length;Xe++){const ht=A[Xe],st=o.getTile(ht),ot=st.getBucket(c);if(!ot)continue;const lt=Vh(ht,ot,H);let gt=lt;R[0]===0&&R[1]===0||(gt=g.translatePosMatrix(lt,st,R,C));const Tt=P?ot.textCollisionBox:ot.iconCollisionBox,Yt=ot.collisionCircleArray;if(Yt.length>0){const Lt=n.ad.mat4.create(),aa=gt;n.ad.mat4.mul(Lt,ot.placementInvProjMatrix,H.glCoordMatrix),n.ad.mat4.mul(Lt,Lt,ot.placementViewportMatrix),te.push({circleArray:Yt,circleOffset:ce,transform:aa,invTransform:Lt,projection:ot.getProjection()}),ae+=Yt.length/4,ce=ae}Tt&&(g.terrain&&g.terrain.setupElevationDraw(st,W),W.draw(g,j.LINES,ir.disabled,Rr.disabled,g.colorModeForRenderPass(),vr.disabled,ut(gt,H,st,ot.getProjection()),c.id,Tt.layoutVertexBuffer,Tt.indexBuffer,Tt.segments,null,H.zoom,null,[Tt.collisionVertexBuffer,Tt.collisionVertexBufferExt]))}if(!P||!te.length)return;const Te=g.getOrCreateProgram("collisionCircle"),ve=new n.cW;ve.resize(4*ae),ve._trim();let Ee=0;for(const Xe of te)for(let ht=0;ht<Xe.circleArray.length/4;ht++){const st=4*ht,ot=Xe.circleArray[st+0],lt=Xe.circleArray[st+1],gt=Xe.circleArray[st+2],Tt=Xe.circleArray[st+3];ve.emplace(Ee++,ot,lt,gt,Tt,0),ve.emplace(Ee++,ot,lt,gt,Tt,1),ve.emplace(Ee++,ot,lt,gt,Tt,2),ve.emplace(Ee++,ot,lt,gt,Tt,3)}(!ds||ds.length<2*ae)&&(ds=function(Xe){const ht=2*Xe,st=new n.aV;st.resize(ht),st._trim();for(let ot=0;ot<ht;ot++){const lt=6*ot;st.uint16[lt+0]=4*ot+0,st.uint16[lt+1]=4*ot+1,st.uint16[lt+2]=4*ot+2,st.uint16[lt+3]=4*ot+2,st.uint16[lt+4]=4*ot+3,st.uint16[lt+5]=4*ot+0}return st}(ae));const Ve=L.createIndexBuffer(ds,!0),Be=L.createVertexBuffer(ve,n.cX.members,!0);for(const Xe of te){const ht={u_matrix:Xe.transform,u_inv_matrix:Xe.invTransform,u_camera_to_center_distance:(et=H).getCameraToCenterDistance(Xe.projection),u_viewport_size:[et.width,et.height]};Te.draw(g,j.TRIANGLES,ir.disabled,Rr.disabled,g.colorModeForRenderPass(),vr.disabled,ht,c.id,Be,Ve,n.b8.simpleSegment(0,2*Xe.circleOffset,Xe.circleArray.length,Xe.circleArray.length/2),null,H.zoom)}var et;Be.destroy(),Ve.destroy()}const Bn=n.ad.mat4.create();function po(g){const o=g._camera.getWorldToCamera(g.worldSize,1),c=n.ad.mat4.multiply([],o,g.globeMatrix);n.ad.mat4.invert(c,c);const A=[0,0,0],R=[0,1,0,0];return n.ad.vec4.transformMat4(R,R,c),A[0]=R[0],A[1]=R[1],A[2]=R[2],n.ad.vec3.normalize(A,A),A}function wi({width:g,height:o,anchor:c,textOffset:A,textScale:R},C){const{horizontalAlign:P,verticalAlign:L}=n.bD(c),j=-(P-.5)*g,H=-(L-.5)*o,W=n.bC(c,A);return new n.P((j/R+W[0])*C,(H/R+W[1])*C)}function ss(g,o,c,A,R,C,P,L,j,H,W){const te=g.text.placedSymbolArray,ae=g.text.dynamicLayoutVertexArray,ce=g.icon.dynamicLayoutVertexArray,Te={},ve=g.getProjection(),Ee=ko(L,ve,C),Ve=C.elevation,Be=ve.upVectorScale(L.canonical,C.center.lat,C.worldSize).metersToTile;ae.clear();for(let et=0;et<te.length;et++){const Xe=te.get(et),{tileAnchorX:ht,tileAnchorY:st,numGlyphs:ot}=Xe,lt=Xe.hidden||!Xe.crossTileID||g.allowVerticalPlacement&&!Xe.placedOrientation?null:A[Xe.crossTileID];if(lt){let gt=0,Tt=0,Yt=0;if(Ve){const ea=Ve?Ve.getAtTileOffset(L,ht,st):0,[da,Kt,pa]=ve.upVector(L.canonical,ht,st);gt=ea*da*Be,Tt=ea*Kt*Be,Yt=ea*pa*Be}let[Lt,aa,ua,Sa]=uo(Xe.projectedAnchorX+gt,Xe.projectedAnchorY+Tt,Xe.projectedAnchorZ+Yt,c?Ee:P);const It=Rd(C.getCameraToCenterDistance(ve),Sa);let ia=R.evaluateSizeForFeature(g.textSizeData,H,Xe)*It/n.bw;c&&(ia*=g.tilePixelRatio/j);const zt=wi(lt,ia);c?({x:Lt,y:aa,z:ua}=ve.projectTilePoint(ht+zt.x,st+zt.y,L.canonical),[Lt,aa,ua]=uo(Lt+gt,aa+Tt,ua+Yt,P)):(o&&zt._rotate(-C.angle),Lt+=zt.x,aa+=zt.y,ua=0);const sa=g.allowVerticalPlacement&&Xe.placedOrientation===n.bq.vertical?Math.PI/2:0;for(let ea=0;ea<ot;ea++)n.bt(ae,Lt,aa,ua,sa);W&&Xe.associatedIconIndex>=0&&(Te[Xe.associatedIconIndex]={x:Lt,y:aa,z:ua,angle:sa})}else Qo(ot,ae)}if(W){ce.clear();const et=g.icon.placedSymbolArray;for(let Xe=0;Xe<et.length;Xe++){const ht=et.get(Xe),{numGlyphs:st}=ht,ot=Te[Xe];if(ht.hidden||!ot)Qo(st,ce);else{const{x:lt,y:gt,z:Tt,angle:Yt}=ot;for(let Lt=0;Lt<st;Lt++)n.bt(ce,lt,gt,Tt,Yt)}}g.icon.dynamicLayoutVertexBuffer.updateData(ce)}g.text.dynamicLayoutVertexBuffer.updateData(ae)}function vn(g,o,c,A,R,C,P={}){const L=c.paint.get("icon-translate"),j=c.paint.get("text-translate"),H=c.paint.get("icon-translate-anchor"),W=c.paint.get("text-translate-anchor"),te=c.layout.get("icon-rotation-alignment"),ae=c.layout.get("text-rotation-alignment"),ce=c.layout.get("icon-pitch-alignment"),Te=c.layout.get("text-pitch-alignment"),ve=c.layout.get("icon-keep-upright"),Ee=c.layout.get("text-keep-upright"),Ve=c.paint.get("icon-color-saturation"),Be=c.paint.get("icon-color-contrast"),et=c.paint.get("icon-color-brightness-min"),Xe=c.paint.get("icon-color-brightness-max"),ht=c.layout.get("symbol-elevation-reference")==="sea",st=g.context,ot=st.gl,lt=g.transform,gt=te==="map",Tt=ae==="map",Yt=ce==="map",Lt=Te==="map",aa=c.layout.get("symbol-sort-key").constantOr(1)!==void 0;let ua=!1;const Sa=g.depthModeForSublayer(0,ir.ReadOnly),It=[n.av(lt.center.lng),n.aC(lt.center.lat)],ia=c.layout.get("text-variable-anchor"),zt=lt.projection.name==="globe",sa=[],ea=[0,-1,0];for(const da of A){const Kt=o.getTile(da),pa=Kt.getBucket(c);if(!pa||pa.projection.name==="mercator"&&zt||pa.fullyClipped)continue;const Ia=pa.projection.name==="globe",La=Ia?n.ag(lt.zoom):0,Ea=ko(da,pa.getProjection(),lt),sr=lt.calculatePixelsToTileUnitsMatrix(Kt),Fr=ia&&pa.hasTextData(),pr=pa.hasIconTextFit()&&Fr&&pa.hasIconData(),Or=pa.getProjection().createInversionMatrix(lt,da.canonical),Cr=Hn=>{lt.depthOcclusionForSymbolsAndCircles&&(c.hasInitialOcclusionOpacityProperties||g.terrain)&&(Hn.push("DEPTH_D24"),Hn.push("DEPTH_OCCLUSION"))},xr=()=>{const Hn=gt&&c.layout.get("symbol-placement")!=="point",cn=[];Cr(cn);const Vn=Hn||pr,Wi=c.paint.get("icon-image-cross-fade").constantOr(0);g.terrainRenderModeElevated()&&Yt&&cn.push("PITCH_WITH_MAP_TERRAIN"),Ia&&(cn.push("PROJECTION_GLOBE_VIEW"),Vn&&cn.push("PROJECTED_POS_ON_VIEWPORT")),Wi>0&&cn.push("ICON_TRANSITION"),pa.icon.zOffsetVertexBuffer&&cn.push("Z_OFFSET"),Ve===0&&Be===0&&et===0&&Xe===1||cn.push("COLOR_ADJUSTMENT"),pa.sdfIcons&&cn.push("RENDER_SDF");const hs=pa.icon.programConfigurations.get(c.id),ro=g.getOrCreateProgram("symbol",{config:hs,defines:cn}),Ws=Kt.imageAtlasTexture?Kt.imageAtlasTexture.size:[0,0],mo=pa.iconSizeData,Cn=n.bp(mo,lt.zoom),ii=Yt||lt.pitch!==0,On=Rs(Ea,Kt.tileID.canonical,Yt,gt,lt,pa.getProjection(),sr),oi=bi(Ea,Kt.tileID.canonical,Yt,gt,lt,pa.getProjection(),sr),yo=g.translatePosMatrix(oi,Kt,L,H,!0),Ti=g.translatePosMatrix(Ea,Kt,L,H),os=Vn?Bn:On,Tc=gt&&!Yt&&!Hn;let qo=ea;!zt&&!lt.mercatorFromTransition||gt||(qo=po(lt));const au=Ia?qo:ea,Ml=c.getColorAdjustmentMatrix(Ve,Be,et,Xe),Yu=qa(mo.kind,Cn,Tc,Yt,g,Ti,os,yo,ht,!1,Ws,[0,0],!0,da,La,It,Or,au,pa.getProjection(),Ml,Wi),vl=Kt.imageAtlasTexture?Kt.imageAtlasTexture:null,jd=c.layout.get("icon-size").constantOr(0)!==1||pa.iconsNeedLinear,go=pa.sdfIcons||g.options.rotating||g.options.zooming||jd||ii?ot.LINEAR:ot.NEAREST,wh=pa.sdfIcons&&c.paint.get("icon-halo-width").constantOr(1)!==0,Il=g.terrain&&Yt&&Hn?n.ad.mat4.invert(n.ad.mat4.create(),On):Bn;if(Hn&&pa.icon){const cp=lt.elevation,em=cp?cp.getAtTileOffsetFunc(da,lt.center.lat,lt.worldSize,pa.getProjection()):null,ky=Li(Ea,Kt.tileID.canonical,Yt,gt,lt,pa.getProjection(),sr);oc(pa,Ea,g,!1,ky,oi,Yt,ve,em,da)}return{program:ro,buffers:pa.icon,uniformValues:Yu,atlasTexture:vl,atlasTextureIcon:null,atlasInterpolation:go,atlasInterpolationIcon:null,isSDF:pa.sdfIcons,hasHalo:wh,tile:Kt,labelPlaneMatrixInv:Il}},Ur=()=>{const Hn=Tt&&c.layout.get("symbol-placement")!=="point",cn=[],Vn=Hn||ia||pr;g.terrainRenderModeElevated()&&Lt&&cn.push("PITCH_WITH_MAP_TERRAIN"),Ia&&(cn.push("PROJECTION_GLOBE_VIEW"),Vn&&cn.push("PROJECTED_POS_ON_VIEWPORT")),pa.text.zOffsetVertexBuffer&&cn.push("Z_OFFSET"),pa.iconsInText&&cn.push("RENDER_TEXT_AND_SYMBOL"),cn.push("RENDER_SDF"),Cr(cn);const Wi=pa.text.programConfigurations.get(c.id),hs=g.getOrCreateProgram("symbol",{config:Wi,defines:cn});let ro,Ws=[0,0],mo=null;const Cn=pa.textSizeData;pa.iconsInText&&(Ws=Kt.imageAtlasTexture?Kt.imageAtlasTexture.size:[0,0],mo=Kt.imageAtlasTexture?Kt.imageAtlasTexture:null,ro=Lt||lt.pitch!==0||g.options.rotating||g.options.zooming||Cn.kind==="composite"||Cn.kind==="camera"?ot.LINEAR:ot.NEAREST);const ii=Kt.glyphAtlasTexture?Kt.glyphAtlasTexture.size:[0,0],On=c.layout.get("text-size-scale-range"),oi=n.ay(g.scaleFactor,On[0],On[1]),yo=n.bp(Cn,lt.zoom,oi),Ti=Rs(Ea,Kt.tileID.canonical,Lt,Tt,lt,pa.getProjection(),sr),os=bi(Ea,Kt.tileID.canonical,Lt,Tt,lt,pa.getProjection(),sr),Tc=g.translatePosMatrix(os,Kt,j,W,!0),qo=g.translatePosMatrix(Ea,Kt,j,W),au=Vn?Bn:Ti,Ml=Tt&&!Lt&&!Hn;let Yu=ea;!zt&&!lt.mercatorFromTransition||Tt||(Yu=po(lt));const vl=qa(Cn.kind,yo,Ml,Lt,g,qo,au,Tc,ht,!0,ii,Ws,!0,da,La,It,Or,Ia?Yu:ea,pa.getProjection(),null,null,oi),jd=Kt.glyphAtlasTexture?Kt.glyphAtlasTexture:null,go=ot.LINEAR,wh=c.paint.get("text-halo-width").constantOr(1)!==0,Il=g.terrain&&Lt&&Hn?n.ad.mat4.invert(n.ad.mat4.create(),Ti):Bn;if(Hn&&pa.text){const cp=lt.elevation,em=cp?cp.getAtTileOffsetFunc(da,lt.center.lat,lt.worldSize,pa.getProjection()):null,ky=Li(Ea,Kt.tileID.canonical,Lt,Tt,lt,pa.getProjection(),sr);oc(pa,Ea,g,!0,ky,os,Lt,Ee,em,da)}return{program:hs,buffers:pa.text,uniformValues:vl,atlasTexture:jd,atlasTextureIcon:mo,atlasInterpolation:go,atlasInterpolationIcon:ro,isSDF:!0,hasHalo:wh,tile:Kt,labelPlaneMatrixInv:Il}},Ir=pa.icon.segments.get().length,dr=pa.text.segments.get().length,nn=Ir&&!P.onlyText?xr():null,Tr=dr&&!P.onlyIcons?Ur():null,tr=c.paint.get("icon-opacity").constantOr(1),sn=c.paint.get("text-opacity").constantOr(1);if(aa&&pa.canOverlap){ua=!0;const Hn=tr&&!P.onlyText?pa.icon.segments.get():[],cn=sn&&!P.onlyIcons?pa.text.segments.get():[];for(const Vn of Hn)sa.push({segments:new n.b8([Vn]),sortKey:Vn.sortKey,state:nn});for(const Vn of cn)sa.push({segments:new n.b8([Vn]),sortKey:Vn.sortKey,state:Tr})}else P.onlyText||sa.push({segments:tr?pa.icon.segments:new n.b8([]),sortKey:0,state:nn}),P.onlyIcons||sa.push({segments:sn?pa.text.segments:new n.b8([]),sortKey:0,state:Tr})}ua&&sa.sort((da,Kt)=>da.sortKey-Kt.sortKey);for(const da of sa){const Kt=da.state;if(Kt)if(g.terrain?g.terrain.setupElevationDraw(Kt.tile,Kt.program,{useDepthForOcclusion:lt.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:Kt.labelPlaneMatrixInv}):g.setupDepthForOcclusion(lt.depthOcclusionForSymbolsAndCircles,Kt.program),st.activeTexture.set(ot.TEXTURE0),Kt.atlasTexture&&Kt.atlasTexture.bind(Kt.atlasInterpolation,ot.CLAMP_TO_EDGE,!0),Kt.atlasTextureIcon&&(st.activeTexture.set(ot.TEXTURE1),Kt.atlasTextureIcon&&Kt.atlasTextureIcon.bind(Kt.atlasInterpolationIcon,ot.CLAMP_TO_EDGE,!0)),g.uploadCommonLightUniforms(g.context,Kt.program),Kt.hasHalo){const pa=Kt.uniformValues;pa.u_is_halo=1,Ii(Kt.buffers,da.segments,c,g,Kt.program,Sa,R,C,pa,2),pa.u_is_halo=0}else{if(Kt.isSDF){const pa=Kt.uniformValues;Kt.hasHalo&&(pa.u_is_halo=1,Ii(Kt.buffers,da.segments,c,g,Kt.program,Sa,R,C,pa,1)),pa.u_is_halo=0}Ii(Kt.buffers,da.segments,c,g,Kt.program,Sa,R,C,Kt.uniformValues,1)}}}function Ii(g,o,c,A,R,C,P,L,j,H){const W=[g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer,g.iconTransitioningVertexBuffer,g.globeExtVertexBuffer,g.zOffsetVertexBuffer];R.draw(A,A.context.gl.TRIANGLES,C,P,L,vr.disabled,j,c.id,g.layoutVertexBuffer,g.indexBuffer,o,c.paint,A.transform.zoom,g.programConfigurations.get(c.id),W,H)}function Hs(g,o){const c=1<<g.canonical.z,A=(o.x*c-g.canonical.x-g.wrap*c)*n.ai,R=(o.y*c-g.canonical.y)*n.ai,C=n.d5(o.z,o.y);return n.ad.vec3.fromValues(A,R,C)}function To(g,o,c,A,R){if(!c.layout||c.layout.get("fill-elevation-reference")==="none")return;const C=g.context.gl,P=new ir(g.context.gl.LEQUAL,ir.ReadWrite,g.depthRangeFor3D),L=new ir(g.context.gl.GREATER,ir.ReadWrite,g.depthRangeFor3D),j=function(ce){const Te=n.c4(ce.pitch);let ve=.01;return ce.isOrthographic&&(ve=n.ah(1e-4,ve,n.c9(Te>=Na?1:Te/Na))),2*ve}(g.transform),H=g.transform.getFreeCameraOptions().position,W="elevatedStructuresDepthReconstruct",te=g.getOrCreateProgram(W,{defines:["DEPTH_RECONSTRUCTION"]}),ae=g.getOrCreateProgram(W);for(const ce of A){const Te=o.getTile(ce),ve=Te.getBucket(c);if(!ve)continue;const Ee=ve.elevatedStructures;if(!Ee)continue;const Ve=ve.elevationBufferData.heightRange,Be=Hs(ce.toUnwrapped(),H),et=g.translatePosMatrix(ce.projMatrix,Te,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));let Xe,ht,st,ot;if(R==="initialize"){if(!Ve||Ve.min>=1||Ee.depthSegments.segments[0].primitiveLength===0)continue;Xe=at(et,Be,j,1,0),ht=P,st=Ee.depthSegments,ot=te}else if(R==="reset"){if(!Ve||Ve.min>=0||Ee.maskSegments.segments[0].primitiveLength===0)continue;Xe=at(et,Be,0,0,1),ht=L,st=Ee.maskSegments,ot=te}else if(R==="geometry"){if(Ee.depthSegments.segments[0].primitiveLength===0)continue;Xe=at(et,Be,j,1,0),ht=P,st=Ee.depthSegments,ot=ae}ot.draw(g,C.TRIANGLES,ht,Rr.disabled,br.disabled,vr.disabled,Xe,c.id,Ee.vertexBuffer,Ee.indexBuffer,st,c.paint,g.transform.zoom)}}function il(g,o,c){const{painter:A,sourceCache:R,layer:C,coords:P,colorMode:L,elevationType:j,terrainEnabled:H,pass:W}=g,te=A.context.gl,ae=C.paint.get("fill-pattern");let ce=j;j!=="road"||o&&!H||(ce="none");const Te=ce==="road",ve=new ir(A.context.gl.LEQUAL,ir.ReadWrite,A.depthRangeFor3D),Ee=ae&&ae.constantOr(1),Ve=(Be,et)=>{let Xe,ht,st,ot,lt;et?(ht=Ee&&!C.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Xe=te.LINES):(ht=Ee?"fillPattern":"fill",Xe=te.TRIANGLES);for(const gt of P){const Tt=R.getTile(gt);if(Ee&&!Tt.patternsLoaded())continue;const Yt=Tt.getBucket(C);if(!Yt)continue;const Lt=o?Yt.elevationBufferData:Yt.bufferData;if(Lt.isEmpty())continue;A.prepareDrawTile();const aa=Lt.programConfigurations.get(C.id),ua=A.isTileAffectedByFog(gt),Sa=[],It=[];Te&&(Sa.push("ELEVATED_ROADS"),It.push(Lt.elevatedLayoutVertexBuffer));const ia=A.getOrCreateProgram(ht,{config:aa,overrideFog:ua,defines:Sa});Ee&&(A.context.activeTexture.set(te.TEXTURE0),Tt.imageAtlasTexture&&Tt.imageAtlasTexture.bind(te.LINEAR,te.CLAMP_TO_EDGE),aa.updatePaintBuffers());const zt=ae.constantOr(null);if(zt&&Tt.imageAtlas){const da=Tt.imageAtlas,Kt=n.d0.from(zt).getPrimary().scaleSelf(n.q.devicePixelRatio).toString(),pa=da.patternPositions.get(Kt);pa&&aa.setConstantPatternPositions(pa)}const sa=A.translatePosMatrix(gt.projMatrix,Tt,C.paint.get("fill-translate"),C.paint.get("fill-translate-anchor")),ea=C.paint.get("fill-emissive-strength");if(et){ot=Lt.lineIndexBuffer,lt=Lt.lineSegments;const da=A.terrain&&A.terrain.renderingToTexture?A.terrain.drapeBufferSize:[te.drawingBufferWidth,te.drawingBufferHeight];st=ht==="fillOutlinePattern"&&Ee?Qe(sa,ea,A,Tt,da):Ge(sa,ea,da)}else ot=Lt.indexBuffer,lt=Lt.triangleSegments,st=Ee?Ne(sa,ea,A,Tt):fe(sa,ea);A.uploadCommonUniforms(A.context,ia,gt.toUnwrapped()),ia.draw(A,Xe,ce!=="none"?ve:Be,c||A.stencilModeForClipping(gt),L,vr.disabled,st,C.id,Lt.layoutVertexBuffer,ot,lt,C.paint,A.transform.zoom,aa,It)}};A.renderPass===W&&Ve(A.depthModeForSublayer(1,A.renderPass==="opaque"?ir.ReadWrite:ir.ReadOnly),!1),ce==="none"&&A.renderPass==="translucent"&&C.paint.get("fill-antialias")&&Ve(A.depthModeForSublayer(C.getPaintProperty("fill-outline-color")?2:0,ir.ReadOnly),!0)}function Vl(g,o,c,A,R,C,P,L){c.resetLayerRenderingStats(g);const j=g.context,H=j.gl,W=g.transform,te=c.paint.get("fill-extrusion-pattern"),ae=te.constantOr(1),ce=c.paint.get("fill-extrusion-opacity"),Te=g.style.enable3dLights(),ve=c.paint.get(Te&&!ae?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),Ee=[c.paint.get("fill-extrusion-ambient-occlusion-intensity"),ve],Ve=c.layout.get("fill-extrusion-edge-radius"),Be=Ve>0&&!c.paint.get("fill-extrusion-rounded-roof"),et=Be?0:Ve,Xe=W.projection.name==="globe"?n.d6():0,ht=W.projection.name==="globe",st=ht?n.ag(W.zoom):0,ot=[n.av(W.center.lng),n.aC(W.center.lat)],lt=c.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",gt=c.paint.get("fill-extrusion-flood-light-color").toRenderColor(lt?null:c.lut).toArray01().slice(0,3),Tt=c.paint.get("fill-extrusion-flood-light-intensity"),Yt=c.paint.get("fill-extrusion-vertical-scale"),Lt=c.paint.get("fill-extrusion-line-width").constantOr(1)!==0,aa=c.paint.get("fill-extrusion-height-alignment"),ua=c.paint.get("fill-extrusion-base-alignment"),Sa=qs(g,c.paint.get("fill-extrusion-cutoff-fade-range")),It=[];let ia;ht&&It.push("PROJECTION_GLOBE_VIEW"),Ee[0]>0&&It.push("FAUX_AO"),Be&&It.push("ZERO_ROOF_RADIUS"),L&&It.push("HAS_CENTROID"),Tt>0&&It.push("FLOOD_LIGHT"),Sa.shouldRenderCutoff&&It.push("RENDER_CUTOFF"),Lt&&It.push("RENDER_WALL_MODE");const zt=g.renderPass==="shadow",sa=g.shadowRenderer,ea=zt&&!!sa;g.shadowRenderer&&(g.shadowRenderer.useNormalOffset=!0);let da=[0,0,0];if(sa){const Ia=g.style.directionalLight,La=g.style.ambientLight;Ia&&La&&(da=Oc(g.style,Ia,La)),zt||(It.push("RENDER_SHADOWS","DEPTH_TEXTURE"),sa.useNormalOffset&&It.push("NORMAL_OFFSET")),ia=It.concat(["SHADOWS_SINGLE_CASCADE"])}const Kt=ea?"fillExtrusionDepth":ae?"fillExtrusionPattern":"fillExtrusion",pa=c.getLayerRenderingStats();for(const Ia of A){const La=o.getTile(Ia),Ea=La.getBucket(c);if(!Ea||Ea.projection.name!==W.projection.name)continue;let sr=!1;sa&&(sr=sa.getMaxCascadeForTile(Ia.toUnwrapped())===0);const Fr=g.isTileAffectedByFog(Ia),pr=Ea.programConfigurations.get(c.id),Or=g.getOrCreateProgram(Kt,{config:pr,defines:sr?ia:It,overrideFog:Fr});if(g.terrain&&g.terrain.setupElevationDraw(La,Or,{useMeterToDem:!0}),!Ea.centroidVertexBuffer){const Tr=Or.attributes.a_centroid_pos;Tr!==void 0&&H.vertexAttrib2f(Tr,0,0)}!zt&&sa&&sa.setupShadows(La.tileID.toUnwrapped(),Or,"vector-tile",La.tileID.overscaledZ),ae&&(g.context.activeTexture.set(H.TEXTURE0),La.imageAtlasTexture&&La.imageAtlasTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE),pr.updatePaintBuffers());const Cr=te.constantOr(null);if(Cr&&La.imageAtlas){const Tr=La.imageAtlas,tr=n.d0.from(Cr).getPrimary().scaleSelf(n.q.devicePixelRatio),sn=Tr.patternPositions.get(tr.toString());sn&&pr.setConstantPatternPositions(sn)}const xr=c.paint.get("fill-extrusion-vertical-gradient"),Ur=1/Ea.tileToMeter;let Ir;if(zt&&sa){if(Ki(La.tileID,Ea,g))continue;const Tr=sa.calculateShadowPassMatrixFromTile(La.tileID.toUnwrapped());Ir=G(Tr,et,Ur,Yt,aa,ua)}else{const Tr=g.translatePosMatrix(Ia.expandedProjMatrix,La,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),tr=W.projection.createInversionMatrix(W,Ia.canonical);Ir=ae?Q(Tr,g,xr,ce,Ee,et,Ur,Ia,La,Xe,aa,ua,st,ot,tr,gt,Yt):kh(Tr,g,xr,ce,Ee,et,Ur,Ia,Xe,aa,ua,st,ot,tr,gt,Yt,Tt,da)}g.uploadCommonUniforms(j,Or,Ia.toUnwrapped(),null,Sa);let dr=Ea.segments;if(W.projection.name==="mercator"&&!zt&&(dr=Ea.getVisibleSegments(La.tileID,g.terrain,g.transform.getFrustum(0)),!dr.get().length))continue;if(pa)if(zt)for(const Tr of dr.get())pa.numRenderedVerticesInShadowPass+=Tr.primitiveLength;else for(const Tr of dr.get())pa.numRenderedVerticesInTransparentPass+=Tr.primitiveLength;const nn=[];(g.terrain||L)&&nn.push(Ea.centroidVertexBuffer),ht&&nn.push(Ea.layoutVertexExtBuffer),Lt&&nn.push(Ea.wallVertexBuffer),Or.draw(g,j.gl.TRIANGLES,R,C,P,vr.backCCW,Ir,c.id,Ea.layoutVertexBuffer,Ea.indexBuffer,dr,c.paint,g.transform.zoom,pr,nn)}g.shadowRenderer&&(g.shadowRenderer.useNormalOffset=!1)}function xs(g,o,c,A,R,C,P,L,j,H,W,te,ae,ce,Te,ve,Ee,Ve,Be){const et=g.context,Xe=et.gl,ht=g.transform,st=g.transform.zoom,ot=[],lt=qs(g,c.paint.get("fill-extrusion-cutoff-fade-range"));H==="clear"?(ot.push("CLEAR_SUBPASS"),Be&&(ot.push("CLEAR_FROM_TEXTURE"),et.activeTexture.set(Xe.TEXTURE0),Be.bind(Xe.LINEAR,Xe.CLAMP_TO_EDGE))):H==="sdf"&&ot.push("SDF_SUBPASS"),Ee&&ot.push("HAS_CENTROID"),lt.shouldRenderCutoff&&ot.push("RENDER_CUTOFF");const gt=c.layout.get("fill-extrusion-edge-radius"),Tt=(Yt,Lt,aa,ua,Sa)=>{const It=Lt.programConfigurations.get(c.id),ia=g.isTileAffectedByFog(Yt),zt=g.getOrCreateProgram("fillExtrusionGroundEffect",{config:It,defines:ot,overrideFog:ia}),sa=((da,Kt,pa,Ia,La,Ea,sr,Fr,pr,Or,Cr)=>({u_matrix:Kt,u_opacity:pa,u_ao_pass:Ia?1:0,u_meter_to_tile:La,u_ao:Ea,u_flood_light_intensity:sr,u_flood_light_color:Fr,u_attenuation:pr,u_edge_radius:Or,u_fb:0,u_fb_size:Cr,u_dynamic_offset:1}))(0,ua,W,j,Sa,[te,ae*Sa],ce,Te,ve,st>=17?0:gt*Sa,Be?Be.size[0]:0),ea=[];Ee&&ea.push(Lt.hiddenByLandmarkVertexBuffer),g.uploadCommonUniforms(et,zt,Yt.toUnwrapped(),null,lt),zt.draw(g,et.gl.TRIANGLES,R,C,P,L,sa,c.id,Lt.vertexBuffer,Lt.indexBuffer,aa,c.paint,st,It,ea)};for(const Yt of A){const Lt=o.getTile(Yt),aa=Lt.getBucket(c);if(!aa||aa.projection.name!==ht.projection.name||!aa.groundEffect||aa.groundEffect&&!aa.groundEffect.hasData())continue;const ua=aa.groundEffect,Sa=1/aa.tileToMeter;{const It=g.translatePosMatrix(Yt.projMatrix,Lt,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),ia=ua.getDefaultSegment();Tt(Yt,ua,ia,It,Sa)}if(Ve)for(let It=0;It<4;It++){const ia=n.d7[It](Yt),zt=o.getTile(ia);if(!zt)continue;const sa=zt.getBucket(c);if(!sa||sa.projection.name!==ht.projection.name||!sa.groundEffect||sa.groundEffect&&!sa.groundEffect.hasData())continue;const ea=sa.groundEffect;let da,Kt;It===0?(da=[-n.ai,0,0],Kt=1):It===1?(da=[n.ai,0,0],Kt=0):It===2?(da=[0,-n.ai,0],Kt=3):(da=[0,n.ai,0],Kt=2);const pa=ea.regionSegments[Kt];if(!pa)continue;const Ia=new Float32Array(16);n.ad.mat4.translate(Ia,Yt.projMatrix,da),Tt(Yt,ea,pa,g.translatePosMatrix(Ia,Lt,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Sa)}}}function zl(g,o,c,A,R,C,P){A.centroidVertexArray.length===0&&A.createCentroidsBuffer();const L=C?C.findDEMTileFor(c):null;if(!(L&&L.dem||P))return;C&&L&&L.dem&&A.selfDEMTileTimestamp!==L.dem._timestamp&&(A.borderDoneWithNeighborZ=[-1,-1,-1,-1],A.selfDEMTileTimestamp=L.dem._timestamp);const j=Ve=>new n.P(Math.ceil((Ve+n.da)*n.db),0),H=Ve=>{const Be=o.getSource().minzoom,et=ht=>{const st=o.getTileByID(ht);if(st&&st.hasData())return st.getBucket(R)},Xe=[0,-1,1];for(const ht of Xe){if(Ve.overscaledZ+ht<Be)continue;const st=et(Ve.calculateScaledKey(Ve.overscaledZ+ht));if(st)return st}},W=[0,0,0],te=(Ve,Be)=>(W[0]=Math.min(Ve.min.y,Be.min.y),W[1]=Math.max(Ve.max.y,Be.max.y),W[2]=n.ai-Be.min.x>Ve.max.x?Be.min.x-n.ai:Ve.max.x,W),ae=(Ve,Be)=>(W[0]=Math.min(Ve.min.x,Be.min.x),W[1]=Math.max(Ve.max.x,Be.max.x),W[2]=n.ai-Be.min.y>Ve.max.y?Be.min.y-n.ai:Ve.max.y,W),ce=[(Ve,Be)=>te(Ve,Be),(Ve,Be)=>te(Be,Ve),(Ve,Be)=>ae(Ve,Be),(Ve,Be)=>ae(Be,Ve)],Te=(Ve,Be,et,Xe,ht,st,ot)=>{if(!C)return 0;const lt=[[st?et:Ve,st?Ve:et,0],[st?et:Be,st?Be:et,0]],gt=ot<0?n.ai+ot:ot,Tt=[st?gt:(Ve+Be)/2,st?(Ve+Be)/2:gt,0];return et===0&&ot<0||et!==0&&ot>0?C.getForTilePoints(ht,[Tt],!0,Xe):lt.push(Tt),C.getForTilePoints(c,lt,!0,L),Math.max(lt[0][2],lt[1][2],Tt[2])/C.exaggeration()};for(let Ve=0;Ve<4;Ve++){const Be=A.borderFeatureIndices[Ve];if(Be.length===0)continue;const et=n.d7[Ve](c),Xe=H(et);if(!(Xe&&Xe instanceof n.d8))continue;const ht=C?C.findDEMTileFor(et):null;if(!(ht&&ht.dem||P)||(C&&ht&&ht.dem&&A.borderDEMTileTimestamp[Ve]!==ht.dem._timestamp&&(A.borderDoneWithNeighborZ[Ve]=-1,A.borderDEMTileTimestamp[Ve]=ht.dem._timestamp),A.borderDoneWithNeighborZ[Ve]===Xe.canonical.z))continue;Xe.centroidVertexArray.length===0&&Xe.createCentroidsBuffer();const st=(Ve<2?1:5)-Ve,ot=Xe.borderDoneWithNeighborZ[st]!==A.canonical.z,lt=Xe.borderFeatureIndices[st];let gt=0;if(A.canonical.z!==Xe.canonical.z){for(const Tt of Be)A.showCentroid(A.featuresOnBorder[Tt]);if(ot)for(const Tt of lt)Xe.showCentroid(Xe.featuresOnBorder[Tt]);A.borderDoneWithNeighborZ[Ve]=Xe.canonical.z,Xe.borderDoneWithNeighborZ[st]=A.canonical.z}for(const Tt of Be){const Yt=A.featuresOnBorder[Tt],Lt=A.centroidData[Yt.centroidDataIndex],aa=Yt.borders[Ve];let ua;for(;gt<lt.length;){ua=Xe.featuresOnBorder[lt[gt]];const Sa=ua.borders[st];if(Sa[1]>aa[0]+3||Sa[0]>aa[0]-3)break;Xe.showCentroid(ua),gt++}if(ua&&gt<lt.length){const Sa=gt;let It=0;for(;!(ua.borders[st][0]>aa[1]-3)&&(It++,++gt!==lt.length);)ua=Xe.featuresOnBorder[lt[gt]];ua=Xe.featuresOnBorder[lt[Sa]];let ia=!1;if(It>=1){const ea=ua.borders[st];Math.abs(aa[0]-ea[0])<3&&Math.abs(aa[1]-ea[1])<3&&(It=1,ia=!0,gt=Sa+1)}else if(It===0){A.showCentroid(Yt);continue}const zt=Xe.centroidData[ua.centroidDataIndex];P&&ia&&(((ve=Lt).flags|(Ee=zt).flags)&n.d9?(ve.flags|=n.d9,Ee.flags|=n.d9):(ve.flags&=~n.d9,Ee.flags&=~n.d9));const sa=Yt.intersectsCount()>1||ua.intersectsCount()>1;if(It>1)gt=Sa,Lt.centroidXY=zt.centroidXY=new n.P(0,0);else if(ht&&ht.dem&&!sa){const ea=ce[Ve](Lt,zt),da=Ve%2?n.ai-1:0,Kt=Te(ea[0],Math.min(n.ai-1,ea[1]),da,ht,et,Ve<2,ea[2]);Lt.centroidXY=zt.centroidXY=j(Kt)}else sa?Lt.centroidXY=zt.centroidXY=new n.P(0,0):(Lt.centroidXY=A.encodeBorderCentroid(Yt),zt.centroidXY=Xe.encodeBorderCentroid(ua));A.writeCentroidToBuffer(Lt),Xe.writeCentroidToBuffer(zt)}else A.showCentroid(Yt)}A.borderDoneWithNeighborZ[Ve]=Xe.canonical.z,Xe.borderDoneWithNeighborZ[st]=A.canonical.z}var ve,Ee;(A.needsCentroidUpdate||!A.centroidVertexBuffer&&A.centroidVertexArray.length!==0)&&A.uploadCentroid(g)}const Su=[1,0,0],Ca=[0,1,0],Ua=[0,0,1];function Ki(g,o,c){const A=c.transform,R=c.shadowRenderer;if(!R)return!0;const C=g.toUnwrapped(),P=A.tileSize*R._cascades[c.currentShadowCascade].scale;let L=o.maxHeight;if(A.elevation){const ve=A.elevation.getMinMaxForTile(g);ve&&(L+=ve.max)}const j=[...R.shadowDirection];j[2]=-j[2];const H=R.computeSimplifiedTileShadowVolume(C,L,P,j);if(!H)return!1;const W=[Su,Ca,Ua,j,[j[0],0,j[2]],[0,j[1],j[2]]],te=A.projection.name==="globe",ae=A.scaleZoom(P),ce=n.bR.fromInvProjectionMatrix(A.invProjMatrix,A.worldSize,ae,!te),Te=R.getCurrentCascadeFrustum();return ce.intersectsPrecise(H.vertices,H.planes,W)===0||Te.intersectsPrecise(H.vertices,H.planes,W)===0}function Oi(g){return[g[0]*n.dc,g[1]*n.dc,g[2]*n.dc,0]}function Gt(g,o,c,A,R,C,P,L,j){const H=A.getSource(),W=c.globeSharedBuffers;if(!W)return;let te,ae,ce;if(o&&(te=A.getTile(o)),H instanceof n.aK?(ae=H.texture,ce=n.cJ(0,0,c.transform)):te&&o&&(ae=te.texture,ce=n.cJ(o.canonical.z,o.canonical.x,c.transform)),!ae||!ce)return;g||(ce=n.ad.mat4.scale(n.ad.mat4.create(),ce,[1,-1,1]));const Te=c.context,ve=Te.gl,Ee=R.paint.get("raster-resampling")==="nearest"?ve.NEAREST:ve.LINEAR,Ve=c.colorModeForDrapableLayerRenderPass(C),Be=P.defines;Be.push("GLOBE_POLES");const et=new ir(ve.LEQUAL,ir.ReadWrite,c.depthRangeFor3D),Xe=Float32Array.from(c.transform.expandedFarZProjMatrix),ht=Float32Array.from(n.bc(n.cI(new n.bT(0,0,0))));c.terrain&&c.terrain.prepareDrawTile(),Te.activeTexture.set(ve.TEXTURE0),ae.bind(Ee,ve.CLAMP_TO_EDGE),Te.activeTexture.set(ve.TEXTURE1),ae.bind(Ee,ve.CLAMP_TO_EDGE),"useMipmap"in ae&&Te.extTextureFilterAnisotropic&&c.transform.pitch>20&&ve.texParameterf(ve.TEXTURE_2D,Te.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Te.extTextureFilterAnisotropicMax);const[st,ot,lt,gt]=o?W.getPoleBuffers(o.canonical.z,!1):W.getPoleBuffers(0,!0),Tt=R.paint.get("raster-elevation");let Yt;g?(Yt=st,c.renderDefaultNorthPole=Tt!==0):(Yt=ot,c.renderDefaultSouthPole=Tt!==0);const Lt=Oi(P.mix),aa=((Sa,It,ia,zt,sa,ea,da,Kt,pa,Ia,La,Ea,sr)=>ra(Sa,It,ia,new Float32Array(16),new Float32Array(9),[0,0],zt,[0,0],[0,0,0,0],1,{opacity:1,mix:0},ea,[0,0],Kt,2,Ia,La,Ea,1,0,sr))(Xe,ht,ce,n.ag(c.transform.zoom),0,R,0,Tt,0,Lt,P.offset,P.range,C),ua=c.getOrCreateProgram("raster",{defines:Be});c.uploadCommonUniforms(Te,ua,null),ua.draw(c,ve.TRIANGLES,et,j,Ve,L,aa,R.id,Yt,lt,gt)}function Hp(g){const o=g._nearZ,c=g.projection.farthestPixelDistance(g),A=c-o,R=.2*g.height,C=o+R;return[o,c,(C-R-o)/A,(C-o)/A]}function uh(g,o,c,A){if(g)return o instanceof zi&&g instanceof Fo?o.getTextureDescriptor(g,c,!0):{texture:g.texture,mix:Oi(A.mix),offset:A.offset,buffer:0,tileSize:1}}var ch=n.dd([{name:"a_index",type:"Int16",components:1}]);class dh{constructor(o,c,A,R){const C={width:A[0],height:A[1],data:null},P=o.gl;this.targetColorTexture=new n.T(o,C,P.RGBA8,{useMipmap:!1}),this.backgroundColorTexture=new n.T(o,C,P.RGBA8,{useMipmap:!1}),this.context=o,this.updateParticleTexture(c,R),this.lastInvalidatedAt=0}updateParticleTexture(o,c){if(this.particleTextureDimension===c.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const A=this.context.gl,R=c.width*c.height;this.particleTexture0=new n.T(this.context,c,A.RGBA8,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new n.T(this.context,c,A.RGBA8,{premultiply:!1,useMipmap:!1});const C=new n.de;C.reserve(R);for(let P=0;P<R;P++)C.emplaceBack(P);this.particleIndexBuffer=this.context.createVertexBuffer(C,ch.members,!0),this.particleSegment=n.b8.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=c.width}update(o){return!(this.lastInvalidatedAt<o&&(this.lastInvalidatedAt=n.q.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}function Cu(g,o,c){if(!g)return null;const A=o.getTextureDescriptor(g,c,!0);if(!A)return null;let{texture:R,mix:C,offset:P,tileSize:L,buffer:j,format:H}=A;if(!R||!H)return null;let W=!1;return H==="uint32"&&(W=!0,C[3]=0,C=Pt(n.df,C,[0,c.paint.get("raster-particle-max-speed")]),P=Aa(n.df,P,[0,c.paint.get("raster-particle-max-speed")])),{texture:R,textureOffset:[j/(L+2*j),L/(L+2*j)],tileSize:L,scalarData:W,scale:C,offset:P,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[H]]}}function hh(g){const o=g._nearZ,c=g.projection.farthestPixelDistance(g),A=c-o,R=.2*g.height,C=o+R;return[o,c,(C-R-o)/A,(C-o)/A]}const qu=new n.al(1,0,0,1),Um=new n.al(0,1,0,1),Wf=new n.al(0,0,1,1),km=new n.al(1,0,1,1),fh=new n.al(0,1,1,1);function Ol(g,o,c,A,R,C,P){const L=g.context,j=g.transform,H=L.gl,W=j.projection.name==="globe",te=W?["PROJECTION_GLOBE_VIEW"]:[];let ae=n.ad.mat4.clone(c.projMatrix);if(W&&n.ag(j.zoom)>0){const Lt=n.bb(c.canonical,j),aa=n.dg(Lt);ae=n.ad.mat4.multiply(new Float32Array(16),j.globeMatrix,aa),n.ad.mat4.multiply(ae,j.projMatrix,ae)}const ce=n.ad.mat4.create();ce[12]+=2*R/(n.q.devicePixelRatio*j.width),ce[13]+=2*C/(n.q.devicePixelRatio*j.height),n.ad.mat4.multiply(ae,ce,ae);const Te=g.getOrCreateProgram("debug",{defines:te}),ve=o.getTileByID(c.key);g.terrain&&g.terrain.setupElevationDraw(ve,Te);const Ee=ir.disabled,Ve=Rr.disabled,Be=g.colorModeForRenderPass(),et="$debug";L.activeTexture.set(H.TEXTURE0),g.emptyTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE),W?ve._makeGlobeTileDebugBuffers(g.context,j):ve._makeDebugTileBoundsBuffers(g.context,j.projection);const Xe=ve._tileDebugBuffer||g.debugBuffer,ht=ve._tileDebugIndexBuffer||g.debugIndexBuffer,st=ve._tileDebugSegments||g.debugSegments;if(Te.draw(g,H.LINE_STRIP,Ee,Ve,Be,vr.disabled,pt(ae,A),et,Xe,ht,st,null,null,null,[ve._globeTileDebugBorderBuffer]),P){const Lt=ve.latestRawTileData,aa=Math.floor((Lt&&Lt.byteLength||0)/1024);let ua=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(ua+=` => ${c.overscaledZ}`),ua+=` ${ve.state}`,ua+=` ${aa}kb`,function(Sa,It){Sa.initDebugOverlayCanvas();const ia=Sa.debugOverlayCanvas,zt=Sa.context.gl,sa=Sa.debugOverlayCanvas.getContext("2d");sa.clearRect(0,0,ia.width,ia.height),sa.shadowColor="white",sa.shadowBlur=2,sa.lineWidth=1.5,sa.strokeStyle="white",sa.textBaseline="top",sa.font="bold 36px Open Sans, sans-serif",sa.fillText(It,5,5),sa.strokeText(It,5,5),Sa.debugOverlayTexture.update(ia),Sa.debugOverlayTexture.bind(zt.LINEAR,zt.CLAMP_TO_EDGE)}(g,ua)}const ot=o.getTile(c).tileSize,lt=512/Math.min(ot,512)*(c.overscaledZ/j.zoom)*.5,gt=ve._tileDebugTextBuffer||g.debugBuffer,Tt=ve._tileDebugTextIndexBuffer||g.quadTriangleIndexBuffer,Yt=ve._tileDebugTextSegments||g.debugSegments;Te.draw(g,H.TRIANGLES,Ee,Ve,br.alphaBlended,vr.disabled,pt(ae,n.al.transparent,lt),et,gt,Tt,Yt,null,null,null,[ve._globeTileDebugTextBuffer])}function Bh(g,o,c,A){Hc(g,0,o+c/2,g.transform.width,c,A)}function qc(g,o,c,A){Hc(g,o-c/2,0,c,g.transform.height,A)}function Hc(g,o,c,A,R,C){const P=g.context,L=P.gl;L.enable(L.SCISSOR_TEST),L.scissor(o*n.q.devicePixelRatio,c*n.q.devicePixelRatio,A*n.q.devicePixelRatio,R*n.q.devicePixelRatio),P.clear({color:C}),L.disable(L.SCISSOR_TEST)}const Yf=n.dd([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:$c}=Yf;function sl(g,o,c,A){g.emplaceBack(o,c,A)}class Bm{constructor(o){this.vertexArray=new n.dh,this.indices=new n.aV,sl(this.vertexArray,-1,-1,1),sl(this.vertexArray,1,-1,1),sl(this.vertexArray,-1,1,1),sl(this.vertexArray,1,1,1),sl(this.vertexArray,-1,-1,-1),sl(this.vertexArray,1,-1,-1),sl(this.vertexArray,-1,1,-1),sl(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=o.createVertexBuffer(this.vertexArray,$c),this.indexBuffer=o.createIndexBuffer(this.indices),this.segment=n.b8.simpleSegment(0,0,36,12)}}function ao(g,o,c,A,R,C){const P=g.context.gl,L=o.paint.get("sky-atmosphere-color"),j=o.paint.get("sky-atmosphere-halo-color"),H=o.paint.get("sky-atmosphere-sun-intensity"),W=((te,ae,ce,Te,ve)=>({u_matrix_3f:te,u_sun_direction:ae,u_sun_intensity:ce,u_color_tint_r:[Te.r,Te.g,Te.b,Te.a],u_color_tint_m:[ve.r,ve.g,ve.b,ve.a],u_luminance:5e-5}))(n.ad.mat3.fromMat4(n.ad.mat3.create(),A),R,H,L,j);P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_CUBE_MAP_POSITIVE_X+C,o.skyboxTexture,0),c.draw(g,P.TRIANGLES,ir.disabled,Rr.disabled,br.unblended,vr.frontCW,W,"skyboxCapture",o.skyboxGeometry.vertexBuffer,o.skyboxGeometry.indexBuffer,o.skyboxGeometry.segment)}const Oy=n.dd([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class ph{constructor(o){const c=new n.di;c.emplaceBack(-1,1,1,0,0),c.emplaceBack(1,1,1,1,0),c.emplaceBack(1,-1,1,1,1),c.emplaceBack(-1,-1,1,0,1);const A=new n.aV;A.emplaceBack(0,1,2),A.emplaceBack(2,3,0),this.vertexBuffer=o.createVertexBuffer(c,Oy.members),this.indexBuffer=o.createIndexBuffer(A),this.segments=n.b8.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const ni=n.dd([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class xn{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class Xf{constructor(o){this.colorModeAlphaBlendedWriteRGB=new br([1,es,1,es],n.al.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new br([1,0,1,0],n.al.transparent,[!1,!1,!1,!0]),this.params=new xn,this.updateNeeded=!0,o.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),o.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),o.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),o.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(o){const c=o.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new ph(c);const A=this.params.sizeRange,R=this.params.intensityRange,C=function(W){const te=n.dl(30),ae=[];for(let ce=0;ce<W;++ce){const Te=2*Math.PI*te(),ve=Math.acos(1-2*te())-.5*Math.PI;ae.push(n.ad.vec3.fromValues(Math.cos(ve)*Math.cos(Te),Math.cos(ve)*Math.sin(Te),Math.sin(ve)))}return ae}(this.params.starsCount),P=n.dl(300),L=new n.dj,j=new n.aV;let H=0;for(let W=0;W<C.length;++W){const te=n.ad.vec3.scale([],C[W],200),ae=Math.max(0,1+.01*A*(1*P()-.5)),ce=Math.max(0,1+.01*R*(1*P()-.5));L.emplaceBack(te[0],te[1],te[2],-1,-1,ae,ce),L.emplaceBack(te[0],te[1],te[2],1,-1,ae,ce),L.emplaceBack(te[0],te[1],te[2],1,1,ae,ce),L.emplaceBack(te[0],te[1],te[2],-1,1,ae,ce),j.emplaceBack(H+0,H+1,H+2),j.emplaceBack(H+0,H+2,H+3),H+=4}this.starsVx=c.createVertexBuffer(L,ni.members),this.starsIdx=c.createIndexBuffer(j),this.starsSegments=n.b8.simpleSegment(0,0,L.length,j.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(o,c){const A=o.context,R=A.gl,C=o.transform,P=new ir(R.LEQUAL,ir.ReadOnly,[0,1]),L=n.ag(C.zoom),j=o.style.getLut(c.scope),H=c.properties.get("color-use-theme")==="none",W=c.properties.get("color").toRenderColor(H?null:j).toArray01(),te=c.properties.get("high-color-use-theme")==="none",ae=c.properties.get("high-color").toRenderColor(te?null:j).toArray01(),ce=c.properties.get("space-color-use-theme")==="none",Te=c.properties.get("space-color").toRenderColor(ce?null:j).toArray01PremultipliedAlpha(),ve=5e-4,Ee=n.dk(c.properties.get("horizon-blend"),0,1,ve,.25),Ve=n.cD(o,A,C)&&Ee===ve?C.worldSize/(2*Math.PI*1.025)-1:C.globeRadius,Be=o.frameCounter/1e3%1,et=n.ad.vec3.length(C.globeCenterInViewSpace),Xe=Math.sqrt(Math.pow(et,2)-Math.pow(Ve,2)),ht=Math.acos(Xe/et),st=ot=>{const lt=C.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];ot&&lt.push("ALPHA_PASS");const gt=o.getOrCreateProgram("globeAtmosphere",{defines:lt}),Tt=((Lt,aa,ua,Sa,It,ia,zt,sa,ea,da,Kt,pa)=>({u_frustum_tl:Lt,u_frustum_tr:aa,u_frustum_br:ua,u_frustum_bl:Sa,u_horizon:It,u_transition:ia,u_fadeout_range:zt,u_color:sa,u_high_color:ea,u_space_color:da,u_temporal_offset:Kt,u_horizon_angle:pa}))(C.frustumCorners.TL,C.frustumCorners.TR,C.frustumCorners.BR,C.frustumCorners.BL,C.frustumCorners.horizon,L,Ee,W,ae,Te,Be,ht);o.uploadCommonUniforms(A,gt);const Yt=this.atmosphereBuffer;Yt&&gt.draw(o,R.TRIANGLES,P,Rr.disabled,ot?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,vr.backCW,Tt,ot?"atmosphere_glow_alpha":"atmosphere_glow",Yt.vertexBuffer,Yt.indexBuffer,Yt.segments)};st(!1),st(!0)}drawStars(o,c){const A=n.ay(c.properties.get("star-intensity"),0,1);if(A===0)return;const R=o.context,C=R.gl,P=o.transform,L=o.getOrCreateProgram("stars"),j=n.ad.quat.identity([]);n.ad.quat.rotateX(j,j,-P._pitch),n.ad.quat.rotateZ(j,j,-P.angle),n.ad.quat.rotateX(j,j,n.ak(P._center.lat)),n.ad.quat.rotateY(j,j,-n.ak(P._center.lng));const H=n.ad.mat4.fromQuat(new Float32Array(16),j),W=n.ad.mat4.multiply([],P.starsProjMatrix,H),te=n.ad.mat3.fromMat4([],H),ae=n.ad.mat3.invert([],te),ce=[0,1,0];n.ad.vec3.transformMat3(ce,ce,ae),n.ad.vec3.scale(ce,ce,this.params.sizeMultiplier);const Te=[1,0,0];n.ad.vec3.transformMat3(Te,Te,ae),n.ad.vec3.scale(Te,Te,this.params.sizeMultiplier);const ve=(Ee=ce,Ve=Te,Be=A,{u_matrix:Float32Array.from(W),u_up:Ee,u_right:Ve,u_intensity_multiplier:Be});var Ee,Ve,Be;o.uploadCommonUniforms(R,L),this.starsVx&&this.starsIdx&&L.draw(o,C.TRIANGLES,ir.disabled,Rr.disabled,this.colorModeAlphaBlendedWriteRGB,vr.disabled,ve,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function bu(g,o){const c=[...g],A=o.cameraWorldSizeForFog/o.worldSize,R=n.ad.mat4.identity([]);return n.ad.mat4.scale(R,R,[A,A,1]),n.ad.mat4.multiply(c,R,c),n.ad.mat4.multiply(c,o.worldToFogMatrix,c),c}function Ld(g,o,c,A,R){const C=c.material,P=A.context,{baseColorTexture:L,metallicRoughnessTexture:j}=C.pbrMetallicRoughness,{normalTexture:H,occlusionTexture:W,emissionTexture:te}=C;function ae(Te,ve,Ee){if(Te&&(g.push(ve),P.activeTexture.set(P.gl.TEXTURE0+Ee),Te.gfxTexture)){const{minFilter:Ve,magFilter:Be,wrapS:et,wrapT:Xe}=Te.sampler;Te.gfxTexture.bindExtraParam(Ve,Be,et,Xe)}}ae(L,"HAS_TEXTURE_u_baseColorTexture",Ai.BaseColor),ae(j,"HAS_TEXTURE_u_metallicRoughnessTexture",Ai.MetallicRoughness),ae(H,"HAS_TEXTURE_u_normalTexture",Ai.Normal),ae(W,"HAS_TEXTURE_u_occlusionTexture",Ai.Occlusion),ae(te,"HAS_TEXTURE_u_emissionTexture",Ai.Emission),R&&(R.texture||(R.texture=new n.dn(A.context,R.image,[R.image.height,R.image.height,R.image.height],P.gl.RGBA8)),P.activeTexture.set(P.gl.TEXTURE0+Ai.LUT),R.texture&&R.texture.bind(P.gl.LINEAR,P.gl.CLAMP_TO_EDGE),g.push("APPLY_LUT_ON_GPU")),c.texcoordBuffer&&(g.push("HAS_ATTRIBUTE_a_uv_2f"),o.push(c.texcoordBuffer)),c.colorBuffer&&(g.push(c.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),o.push(c.colorBuffer)),c.normalBuffer&&(g.push("HAS_ATTRIBUTE_a_normal_3f"),o.push(c.normalBuffer)),c.pbrBuffer&&(g.push("HAS_ATTRIBUTE_a_pbr"),g.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),o.push(c.pbrBuffer)),C.alphaMode!=="OPAQUE"&&C.alphaMode!=="MASK"||g.push("UNPREMULT_TEXTURE_IN_SHADER"),C.defined||g.push("DIFFUSE_SHADED");const ce=A.shadowRenderer;ce&&(g.push("RENDER_SHADOWS","DEPTH_TEXTURE"),ce.useNormalOffset&&g.push("NORMAL_OFFSET"))}function xu(g,o,c,A,R,C){const P=c.paint.get("model-opacity").constantOr(1),L=o.context,j=new ir(o.context.gl.LEQUAL,ir.ReadWrite,o.depthRangeFor3D),H=o.transform,W=g.mesh,te=W.material,ae=te.pbrMetallicRoughness,ce=o.style.fog;let Te;Te=o.transform.projection.zAxisUnit==="pixels"?[...g.nodeModelMatrix]:n.ad.mat4.multiply([],A.zScaleMatrix,g.nodeModelMatrix),n.ad.mat4.multiply(Te,A.negCameraPosMatrix,Te);const ve=n.ad.mat4.invert([],Te);n.ad.mat4.transpose(ve,ve);const Ee=c.paint.get("model-color-use-theme").constantOr("default")==="none",Ve=c.paint.get("model-emissive-strength").constantOr(0),Be=lr(new Float32Array(g.worldViewProjection),new Float32Array(Te),new Float32Array(ve),null,o,P,ae.baseColorFactor.toRenderColor(null),te.emissiveFactor,ae.metallicFactor,ae.roughnessFactor,te,Ve,c),et={defines:[]},Xe=[],ht=o.shadowRenderer;ht&&(ht.useNormalOffset=!1),Ld(et.defines,Xe,W,o,Ee?null:c.lut);let st=null;if(ce){const gt=bu(g.nodeModelMatrix,o.transform);if(st=new Float32Array(gt),H.projection.name!=="globe"){const Tt=W.aabb.min,Yt=W.aabb.max,[Lt,aa]=ce.getOpacityForBounds(gt,Tt[0],Tt[1],Yt[0],Yt[1]);et.overrideFog=Lt>=Ma||aa>=Ma}}const ot=qs(o,c.paint.get("model-cutoff-fade-range"));ot.shouldRenderCutoff&&et.defines.push("RENDER_CUTOFF");const lt=o.getOrCreateProgram("model",et);o.uploadCommonUniforms(L,lt,null,st,ot),o.renderPass!=="shadow"&&ht&&ht.setupShadowsFromMatrix(g.nodeModelMatrix,lt),lt.draw(o,L.gl.TRIANGLES,j,R,C,W.material.doubleSided?vr.disabled:vr.backCCW,Be,c.id,W.vertexBuffer,W.indexBuffer,W.segments,c.paint,o.transform.zoom,void 0,Xe)}function Kc(g,o,c,A,R,C,P){let L;L=g.projection.name==="globe"?n.dp(c,g):[...c],n.ad.mat4.multiply(L,L,o.matrix);const j=n.ad.mat4.multiply([],A,L);if(o.meshes)for(const H of o.meshes){if(H.material.alphaMode!=="BLEND"){P.push({mesh:H,depth:0,modelIndex:R,worldViewProjection:j,nodeModelMatrix:L});continue}const W=n.ad.vec3.transformMat4([],H.centroid,j);!g.isOrthographic&&W[2]<=0||C.push({mesh:H,depth:W[2],modelIndex:R,worldViewProjection:j,nodeModelMatrix:L})}if(o.children)for(const H of o.children)Kc(g,H,c,A,R,C,P)}function vf(g,o,c,A){const R=c.shadowRenderer;if(!R)return;const C=R.getShadowPassDepthMode(),P=R.getShadowPassColorMode(),L=R.calculateShadowPassMatrixFromMatrix(o),j=vi(L);c.getOrCreateProgram("modelDepth",{defines:c._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(c,c.context.gl.TRIANGLES,C,Rr.disabled,P,vr.backCCW,j,A.id,g.vertexBuffer,g.indexBuffer,g.segments,A.paint,c.transform.zoom,void 0,void 0)}function Gh(g,o,c){const A=o.updateZoomBasedPaintProperties(),R=function(C,P,L){let j,H,W,te=C.terrain?C.terrain.exaggeration():0;if(C.terrain&&te>0){const ae=C.terrain,ce=ae.findDEMTileFor(L);ce&&ce.dem?j=n.dr.create(ae,L,ce):te=0}if(te===0&&(P.terrainElevationMin=0,P.terrainElevationMax=0),te===P.validForExaggeration&&(te===0||j&&j._demTile&&j._demTile.tileID===P.validForDEMTile.id&&j._dem._timestamp===P.validForDEMTile.timestamp))return!1;for(const ae in P.instancesPerModel){const ce=P.instancesPerModel[ae];for(let Te=0;Te<ce.instancedDataArray.length;++Te){const ve=(j?te*j.getElevationAt(0|ce.instancedDataArray.float32[16*Te],0|ce.instancedDataArray.float32[16*Te+1],!0,!0):0)+ce.instancesEvaluatedElevation[Te];ce.instancedDataArray.float32[16*Te+6]=ve,H=H?Math.min(P.terrainElevationMin,ve):ve,W=W?Math.max(P.terrainElevationMax,ve):ve}}return P.terrainElevationMin=H||0,P.terrainElevationMax=W||0,P.validForExaggeration=te,P.validForDEMTile=j&&j._demTile?{id:j._demTile.tileID,timestamp:j._dem._timestamp}:{id:void 0,timestamp:0},!0}(g,o,c);(A||R)&&(o.uploaded=!1,o.upload(g.context))}const Dl={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new n.ce([0,0,0],[n.ai,n.ai,0])};function wf(g,o){const c=1<<g.canonical.z,A=o.getFreeCameraOptions().position,R=o.elevation,C=g.canonical.x/c,P=(g.canonical.x+1)/c,L=g.canonical.y/c,j=(g.canonical.y+1)/c;let H=o._centerAltitude;if(R){const ce=R.getMinMaxForTile(g);ce&&ce.max>H&&(H=ce.max)}const W=n.ay(A.x,C,P)-A.x,te=n.ay(A.y,L,j)-A.y,ae=n.bH(H,o.center.lat)-A.z;return o._zoomFromMercatorZ(Math.sqrt(W*W+te*te+ae*ae))}function So(g,o,c,A,R,C,P){const L=g.context,j=g.renderPass==="shadow",H=g.shadowRenderer,W=j&&H?H.getShadowPassDepthMode():new ir(L.gl.LEQUAL,ir.ReadWrite,g.depthRangeFor3D),te=g.isTileAffectedByFog(C);if(c.meshes)for(const ae of c.meshes){const ce=["MODEL_POSITION_ON_GPU"],Te=[];let ve,Ee,Ve;A.instancedDataArray.length>20&&ce.push("INSTANCED_ARRAYS");const Be=qs(g,o.paint.get("model-cutoff-fade-range"));if(Be.shouldRenderCutoff&&ce.push("RENDER_CUTOFF"),j&&H)ve=g.getOrCreateProgram("modelDepth",{defines:ce}),Ee=vi(P.shadowTileMatrix,P.shadowTileMatrix,Float32Array.from(c.matrix)),Ve=H.getShadowPassColorMode();else{Ld(ce,Te,ae,g,o.paint.get("model-color-use-theme").constantOr("default")==="none"?null:o.lut),ve=g.getOrCreateProgram("model",{defines:ce,overrideFog:te});const Xe=ae.material,ht=Xe.pbrMetallicRoughness,st=o.paint.get("model-opacity").constantOr(1),ot=o.paint.get("model-emissive-strength").constantOr(0);Ee=lr(C.expandedProjMatrix,Float32Array.from(c.matrix),new Float32Array(16),null,g,st,ht.baseColorFactor.toRenderColor(null),Xe.emissiveFactor,ht.metallicFactor,ht.roughnessFactor,Xe,ot,o,R),H&&(P.shadowUniformsInitialized?ve.setShadowUniformValues(L,H.getShadowUniformValues()):(H.setupShadows(C.toUnwrapped(),ve,"model-tile",C.overscaledZ),P.shadowUniformsInitialized=!0)),Ve=Be.shouldRenderCutoff||st<1||Xe.alphaMode!=="OPAQUE"?br.alphaBlended:br.unblended}g.uploadCommonUniforms(L,ve,C.toUnwrapped(),null,Be);const et=ae.material.doubleSided?vr.disabled:vr.backCCW;if(A.instancedDataArray.length>20)Te.push(A.instancedDataBuffer),ve.draw(g,L.gl.TRIANGLES,W,Rr.disabled,Ve,et,Ee,o.id,ae.vertexBuffer,ae.indexBuffer,ae.segments,o.paint,g.transform.zoom,void 0,Te,A.instancedDataArray.length);else{const Xe=j?"u_instance":"u_normal_matrix";for(let ht=0;ht<A.instancedDataArray.length;++ht)Ee[Xe]=new Float32Array(A.instancedDataArray.arrayBuffer,64*ht,16),ve.draw(g,L.gl.TRIANGLES,W,Rr.disabled,Ve,et,Ee,o.id,ae.vertexBuffer,ae.indexBuffer,ae.segments,o.paint,g.transform.zoom,void 0,Te)}}if(c.children)for(const ae of c.children)So(g,o,ae,A,R,C,P)}const Fd=[1,-1,1];function Jf(g,o,c,A){if(!c.modelManager)return!0;const R=c.modelManager;if(!c.shadowRenderer)return!0;const C=c.shadowRenderer,P=o.aabb;let L=!0,j=g.maxHeight;if(j===0){let W=0;for(const te in g.instancesPerModel){const ae=R.getModel(te,A);ae?W=Math.max(W,Math.max(Math.max(ae.aabb.max[0],ae.aabb.max[1]),ae.aabb.max[2])):L=!1}j=g.maxScale*W*1.41+g.maxVerticalOffset,L&&(g.maxHeight=j)}P.max[2]=j,P.min[2]+=g.terrainElevationMin,P.max[2]+=g.terrainElevationMax,n.ad.vec3.transformMat4(P.min,P.min,o.tileMatrix),n.ad.vec3.transformMat4(P.max,P.max,o.tileMatrix);const H=P.intersects(C.getCurrentCascadeFrustum());return c.currentShadowCascade===0&&(g.isInsideFirstShadowMapFrustum=H===2),H===0}function Qf(g,o){const c=g.uniformValues.u_cutoff_params[0],A=g.uniformValues.u_cutoff_params[1],R=g.uniformValues.u_cutoff_params[2],C=g.uniformValues.u_cutoff_params[3];return A===c||C===R?1:n.ay(((o-c)/(A-c)-R)/(C-R),0,1)}function mh(g,o,c,A){if(o.pitch<20)return 1;const R=o.getWorldToCameraMatrix();n.ad.mat4.multiply(R,R,g);const C=n.ad.vec4.fromValues(c.min[0],c.min[1],c.min[2],1);let P=n.ad.vec4.transformMat4(n.ad.vec4.create(),C,R),L=P,j=P;C[1]=c.max[1],P=n.ad.vec4.transformMat4(n.ad.vec4.create(),C,R),L=P[1]<L[1]?P:L,j=P[1]>j[1]?P:j,C[0]=c.max[0],P=n.ad.vec4.transformMat4(n.ad.vec4.create(),C,R),L=P[1]<L[1]?P:L,j=P[1]>j[1]?P:j,C[1]=c.min[1],P=n.ad.vec4.transformMat4(n.ad.vec4.create(),C,R),L=P[1]<L[1]?P:L,j=P[1]>j[1]?P:j;const H=n.ay(A[0],0,1),W=100*o.pixelsPerMeter*n.ay(A[1],0,1),te=n.ay(A[2],0,1),ae=n.ad.vec4.lerp(n.ad.vec4.create(),L,j,H),ce=Math.tan(.5*o.fovX),Te=-ae[2]*ce;if(W===0)return ae[1]<-Math.abs(Te)?te:1;const ve=(-Math.abs(Te)-ae[1])/W,Ee=(Be,et,Xe)=>(1-Xe)*Be+Xe*et,Ve=n.ay(Ee(1,te,ve),te,1);return Ee(1,Ve,n.ay((o.pitch-20)/20,0,1))}class Wc{}class Yc{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(o,c,A){{const te=this._storage.get(c.id);if(te)return te.lastUsedFrameIdx=o,te.buf}const R=A.gl,C=R.getBufferParameter(R.ELEMENT_ARRAY_BUFFER,R.BUFFER_SIZE),P=new ArrayBuffer(C),L=new Int16Array(P);R.getBufferSubData(R.ELEMENT_ARRAY_BUFFER,0,new Int16Array(P));const j=new n.dt;for(let te=0;te<C/2;te+=3){const ae=L[te],ce=L[te+1],Te=L[te+2];j.emplaceBack(ae,ce),j.emplaceBack(ce,Te),j.emplaceBack(Te,ae)}const H=A.bindVertexArrayOES.current,W=new Wc;return W.buf=new qn(A,j),W.lastUsedFrameIdx=o,this._storage.set(c.id,W),A.bindVertexArrayOES.set(H),W.buf}update(o){for(const[c,A]of this._storage)o-A.lastUsedFrameIdx>30&&(A.buf.destroy(),this._storage.delete(c))}destroy(){for(const[o,c]of this._storage)c.buf.destroy(),this._storage.delete(o)}}class ep{constructor(o){this.occluderSize=30,this.depthOffset=-1e-4,o.registerParameter(this,["Occlusion"],"occluderSize",{min:1,max:100,step:1}),o.registerParameter(this,["Occlusion"],"depthOffset",{min:-.05,max:0,step:1e-5})}}const Ud=n.dd([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_rainParticleData",components:4}]);class Pu{registerParameter(){}registerButton(){}registerBinding(){}refreshUI(){}}class Ac{constructor(o,c){this.revealStart=11,this.revealRange=2,o.registerParameter(this,[...c,"Reveal"],"revealStart",{min:0,max:17,step:.05}),o.registerParameter(this,[...c,"Reveal"],"revealRange",{min:.1,max:5.1,step:.05})}}const eu=n.dd([{type:"Float32",name:"a_pos_2f",components:2}]);class _c{destroy(){this.vignetteVx&&this.vignetteVx.destroy(),this.vignetteIdx&&this.vignetteIdx.destroy()}draw(o,c){const A=o.getOrCreateProgram("vignette");if(!this.vignetteVx||!this.vignetteIdx){const P=new n.du,L=new n.aV;P.emplaceBack(-1,-1),P.emplaceBack(1,-1),P.emplaceBack(1,1),P.emplaceBack(-1,1),L.emplaceBack(0,1,2),L.emplaceBack(0,2,3),this.vignetteVx=o.context.createVertexBuffer(P,eu.members),this.vignetteIdx=o.context.createIndexBuffer(L)}const R=n.b8.simpleSegment(0,0,4,6);if(this.vignetteVx&&this.vignetteIdx){o.uploadCommonUniforms(o.context,A);const P={u_vignetteShape:(C={vignetteShape:[c.start,c.range,Math.pow(10,c.fadePower)],vignetteColor:[c.color.r,c.color.g,c.color.b,c.color.a*c.strength]}).vignetteShape,u_vignetteColor:C.vignetteColor};A.draw(o,o.context.gl.TRIANGLES,ir.disabled,Rr.disabled,br.alphaBlended,vr.disabled,P,"vignette",this.vignetteVx,this.vignetteIdx,R)}var C}}class Ps{constructor(){this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0}update(o,c){const A=o.getFreeCameraOptions().position,R=A.toAltitude(),C=A.toLngLat(),P=n.ak(C.lng),L=n.ak(C.lat),j=o.pixelsPerMeter/c,H=P*n.dv,W=n.dv*Math.log(Math.tan(Math.PI/4+L/2));if(this._offsetXPrev===void 0)this._offsetXPrev=0,this._offsetYPrev=0,this._elevationPrev=0,this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0;else{const te=-this._offsetYPrev+W,ae=-this._elevationPrev+R;this._accumulatedOffsetX+=(-this._offsetXPrev+H)*j,this._accumulatedOffsetY+=te*j,this._accumulatedElevation+=ae*j,this._offsetXPrev=H,this._offsetYPrev=W,this._elevationPrev=R}}getPosition(){return[this._accumulatedOffsetX,this._accumulatedOffsetY,this._accumulatedElevation]}}function tu(g,o){return[-(g[0]-Math.floor(g[0]/o)*o),-(g[1]-Math.floor(g[1]/o)*o),-(g[2]-Math.floor(g[2]/o)*o)]}function Hu(g){const o=n.dl(1323123451230),c=[];for(let A=0;A<g;++A){const R=2*o()-1,C=2*o()-1,P=2*o()-1;c.push(n.ad.vec3.fromValues(R,C,P))}return c}function $s(g,o,c,A,R){const C=n.ay((R-c)/(A-c),0,1);return(1-C)*g+C*o}class Eu{constructor(o){this._movement=new Ps,this._accumulatedTimeFromStart=0,this._prevTime=Date.now()/1e3,this._vignette=new _c,this._ppmScaleFactor=o}destroy(){this.particlesVx&&this.particlesVx.destroy(),this.particlesIdx&&this.particlesIdx.destroy(),this._vignette&&this._vignette.destroy()}updateOnRender(o,c){const A=o.transform;this._movement.update(A,this._ppmScaleFactor);const R=A.starsProjMatrix,C=n.ad.quat.identity([]);n.ad.quat.rotateX(C,C,n.ak(90)-A._pitch),n.ad.quat.rotateZ(C,C,-A.angle);const P=n.ad.mat4.fromQuat(new Float32Array(16),C),L=n.ad.mat4.fromValues(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1),j=n.ad.mat4.transpose([],L),H=n.ad.mat4.multiply([],j,P),W=Date.now()/1e3;return this._accumulatedTimeFromStart+=(W-this._prevTime)*c,this._prevTime=W,{projectionMatrix:R,modelviewMatrix:H}}}class yh extends Eu{constructor(o){super(4.25),this._params={overrideStyleParameters:!1,intensity:.5,timeFactor:1,velocityConeAperture:0,velocity:300,boxSize:2500,dropletSizeX:1,dropletSizeYScale:10,distortionStrength:70,screenThinning:{intensity:.57,start:.46,range:1.17,fadePower:.17,affectedRatio:1,particleOffset:-.2},color:{r:.66,g:.68,b:.74,a:.7},direction:{x:-50,y:-35},shapeDirPower:2,shapeNormalPower:1},this._revealParams=new Ac(o.tp,["Precipitation","Rain"]),this._vignetteParams={strength:1,start:.7,range:1,fadePower:.4,color:{r:.27,g:.27,b:.27,a:1}},this.particlesCount=16e3}update(o){const c=o.context;if(!this.particlesVx){const A=Hu(this.particlesCount),R=new n.dw,C=new n.aV;let P=0;const L=n.dl(1323123451230);for(let j=0;j<A.length;++j){const H=A[j],W=[2*L()-1,L(),L(),L()];R.emplaceBack(H[0],H[1],H[2],-1,-1,...W),R.emplaceBack(H[0],H[1],H[2],1,-1,...W),R.emplaceBack(H[0],H[1],H[2],1,1,...W),R.emplaceBack(H[0],H[1],H[2],-1,1,...W),C.emplaceBack(P+0,P+1,P+2),C.emplaceBack(P+0,P+2,P+3),P+=4}this.particlesVx=c.createVertexBuffer(R,Ud.members),this.particlesIdx=c.createIndexBuffer(C)}}draw(o){if(!this._params.overrideStyleParameters&&!o.style.rain)return;const c=this._params.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},A=o.transform.zoom;if(c.revealStart>A)return;const R=$s(0,1,c.revealStart,c.revealStart+c.revealRange,A);if(!this.particlesVx||!this.particlesIdx)return;const C=structuredClone(this._params);let P=[-C.direction.x,C.direction.y,-100];n.ad.vec3.normalize(P,P);const L=structuredClone(this._vignetteParams);L.strength*=R,C.overrideStyleParameters||(C.intensity=o.style.rain.state.density,C.timeFactor=o.style.rain.state.intensity,C.color=structuredClone(o.style.rain.state.color),P=structuredClone(o.style.rain.state.direction),C.screenThinning.intensity=o.style.rain.state.centerThinning,C.dropletSizeX=o.style.rain.state.dropletSize[0],C.dropletSizeYScale=o.style.rain.state.dropletSize[1]/o.style.rain.state.dropletSize[0],C.distortionStrength=100*o.style.rain.state.distortionStrength,L.strength=1,L.color=structuredClone(o.style.rain.state.vignetteColor));const j=this.updateOnRender(o,C.timeFactor),H=o.context,W=H.gl,te=o.transform;this.screenTexture&&this.screenTexture.size[0]===o.width&&this.screenTexture.size[1]===o.height||(this.screenTexture=new n.T(H,{width:o.width,height:o.height,data:null},W.RGBA8)),C.distortionStrength>0&&(H.activeTexture.set(W.TEXTURE0),this.screenTexture.bind(W.LINEAR,W.CLAMP_TO_EDGE),W.copyTexSubImage2D(W.TEXTURE_2D,0,0,0,0,0,o.width,o.height));const ae=o.getOrCreateProgram("rainParticle");o.uploadCommonUniforms(H,ae),H.activeTexture.set(W.TEXTURE0),this.screenTexture.bind(W.LINEAR,W.CLAMP_TO_EDGE);const ce=[C.color.r,C.color.g,C.color.b,C.color.a],Te=(ve,Ee)=>{const Ve=tu(this._movement.getPosition(),ve),Be=C.dropletSizeX,et=C.dropletSizeX*C.dropletSizeYScale,Xe=o.width/2,ht=o.height/2,st=$s(0,C.screenThinning.start,0,1,C.screenThinning.intensity),ot=$s(.001,C.screenThinning.range,0,1,C.screenThinning.intensity),lt=$s(0,C.screenThinning.particleOffset,0,1,C.screenThinning.intensity),gt=(Tt={modelview:j.modelviewMatrix,projection:j.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:Ve,velocityConeAperture:C.velocityConeAperture,velocity:C.velocity,boxSize:ve,rainDropletSize:[Be,et],distortionStrength:C.distortionStrength,rainDirection:P,color:ce,screenSize:[te.width,te.height],thinningCenterPos:[Xe,ht],thinningShape:[st,ot,Math.pow(10,C.screenThinning.fadePower)],thinningAffectedRatio:C.screenThinning.affectedRatio,thinningParticleOffset:lt,shapeDirectionalPower:C.shapeDirPower,shapeNormalPower:C.shapeNormalPower,mode:Ee?0:1},{u_modelview:Float32Array.from(Tt.modelview),u_projection:Float32Array.from(Tt.projection),u_time:Tt.time,u_cam_pos:Tt.camPos,u_texScreen:0,u_velocityConeAperture:Tt.velocityConeAperture,u_velocity:Tt.velocity,u_boxSize:Tt.boxSize,u_rainDropletSize:Tt.rainDropletSize,u_distortionStrength:Tt.distortionStrength,u_rainDirection:Tt.rainDirection,u_color:Tt.color,u_screenSize:Tt.screenSize,u_thinningCenterPos:Tt.thinningCenterPos,u_thinningShape:Tt.thinningShape,u_thinningAffectedRatio:Tt.thinningAffectedRatio,u_thinningParticleOffset:Tt.thinningParticleOffset,u_shapeDirectionalPower:Tt.shapeDirectionalPower,u_shapeNormalPower:Tt.shapeNormalPower,u_mode:Tt.mode});var Tt;const Yt=Math.round(C.intensity*this.particlesCount),Lt=n.b8.simpleSegment(0,0,4*Yt,2*Yt);ae.draw(o,W.TRIANGLES,ir.disabled,Rr.disabled,br.alphaBlended,vr.disabled,gt,"rain_particles",this.particlesVx,this.particlesIdx,Lt)};C.distortionStrength>0&&Te(C.boxSize,!0),Te(C.boxSize,!1),this._vignette.draw(o,L)}}const tp=n.dd([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_snowParticleData",components:4},{type:"Float32",name:"a_snowParticleDataHorizontalOscillation",components:2}]);class jh extends Eu{constructor(o){super(2.25),this._params={overrideStyleParameters:!1,intensity:.85,timeFactor:.75,velocityConeAperture:70,velocity:40,horizontalOscillationRadius:4,horizontalOscillationRate:1.5,boxSize:2e3,billboardSize:2,shapeFadeStart:.27,shapeFadePower:.21,screenThinning:{intensity:.4,start:.15,range:1.4,fadePower:.24,affectedRatio:1,particleOffset:-.2},color:{r:1,g:1,b:1,a:1},direction:{x:-50,y:-35}},this._revealParams=new Ac(o.tp,["Precipitation","Snow"]),this._vignetteParams={strength:.3,start:.78,range:.46,fadePower:.2,color:{r:1,g:1,b:1,a:1}},this.particlesCount=16e3}update(o){const c=o.context;if(!this.particlesVx){const A=Hu(this.particlesCount),R=new n.dx,C=new n.aV;let P=0;const L=n.dl(1323123451230);for(let j=0;j<A.length;++j){const H=A[j],W=L(),te=L(),ae=L(),ce=[j/A.length,W,te,ae],Te=[L(),L()];R.emplaceBack(H[0],H[1],H[2],-1,-1,...ce,...Te),R.emplaceBack(H[0],H[1],H[2],1,-1,...ce,...Te),R.emplaceBack(H[0],H[1],H[2],1,1,...ce,...Te),R.emplaceBack(H[0],H[1],H[2],-1,1,...ce,...Te),C.emplaceBack(P+0,P+1,P+2),C.emplaceBack(P+0,P+2,P+3),P+=4}this.particlesVx=c.createVertexBuffer(R,tp.members),this.particlesIdx=c.createIndexBuffer(C)}}draw(o){if(!this._params.overrideStyleParameters&&!o.style.snow)return;const c=structuredClone(this._params);let A=[-c.direction.x,c.direction.y,-100];n.ad.vec3.normalize(A,A);const R=structuredClone(this._vignetteParams),C=c.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},P=o.transform.zoom;if(C.revealStart>P)return;const L=$s(0,1,C.revealStart,C.revealStart+C.revealRange,P);R.strength*=L,c.overrideStyleParameters||(c.intensity=o.style.snow.state.density,c.timeFactor=o.style.snow.state.intensity,c.color=structuredClone(o.style.snow.state.color),A=structuredClone(o.style.snow.state.direction),c.screenThinning.intensity=o.style.snow.state.centerThinning,c.billboardSize=2.79*o.style.snow.state.flakeSize,R.strength=1,R.color=structuredClone(o.style.snow.state.vignetteColor));const j=this.updateOnRender(o,c.timeFactor);if(!this.particlesVx||!this.particlesIdx)return;const H=o.context,W=H.gl,te=o.transform,ae=o.getOrCreateProgram("snowParticle");o.uploadCommonUniforms(H,ae),((ce,Te,ve)=>{const Ee=tu(this._movement.getPosition(),ce),Ve=te.width/2,Be=te.height/2,et=$s(0,ve.screenThinning.start,0,1,ve.screenThinning.intensity),Xe=$s(.001,ve.screenThinning.range,0,1,ve.screenThinning.intensity),ht=$s(0,ve.screenThinning.particleOffset,0,1,ve.screenThinning.intensity),st=(ot={modelview:j.modelviewMatrix,projection:j.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:Ee,velocityConeAperture:ve.velocityConeAperture,velocity:ve.velocity,horizontalOscillationRadius:ve.horizontalOscillationRadius,horizontalOscillationRate:ve.horizontalOscillationRate,boxSize:ce,billboardSize:1*ve.billboardSize,simpleShapeParameters:[ve.shapeFadeStart,ve.shapeFadePower],screenSize:[te.width,te.height],thinningCenterPos:[Ve,Be],thinningShape:[et,Xe,Math.pow(10,ve.screenThinning.fadePower)],thinningAffectedRatio:ve.screenThinning.affectedRatio,thinningParticleOffset:ht,color:[ve.color.r,ve.color.g,ve.color.b,ve.color.a],direction:A},{u_modelview:Float32Array.from(ot.modelview),u_projection:Float32Array.from(ot.projection),u_time:ot.time,u_cam_pos:ot.camPos,u_velocityConeAperture:ot.velocityConeAperture,u_velocity:ot.velocity,u_horizontalOscillationRadius:ot.horizontalOscillationRadius,u_horizontalOscillationRate:ot.horizontalOscillationRate,u_boxSize:ot.boxSize,u_billboardSize:ot.billboardSize,u_simpleShapeParameters:ot.simpleShapeParameters,u_screenSize:ot.screenSize,u_thinningCenterPos:ot.thinningCenterPos,u_thinningShape:ot.thinningShape,u_thinningAffectedRatio:ot.thinningAffectedRatio,u_thinningParticleOffset:ot.thinningParticleOffset,u_particleColor:ot.color,u_direction:ot.direction});var ot;const lt=Math.round(ve.intensity*this.particlesCount),gt=n.b8.simpleSegment(0,0,4*lt,2*lt);this.particlesVx&&this.particlesIdx&&ae.draw(o,W.TRIANGLES,ir.disabled,Rr.disabled,br.alphaBlended,vr.disabled,st,"snow_particles",this.particlesVx,this.particlesIdx,gt)})(c.boxSize,0,c),this._vignette.draw(o,R)}}const gh={symbol:function(g,o,c,A,R){if(g.renderPass!=="translucent")return;const C=Rr.disabled,P=g.colorModeForRenderPass(),L=c.layout.get("text-variable-anchor"),j=c.layout.get("text-size-scale-range"),H=n.ay(g.scaleFactor,j[0],j[1]);L&&function(ae,ce,Te,ve,Ee,Ve,Be,et){const Xe=ce.transform,ht=Ee==="map",st=Ve==="map";for(const ot of ae){const lt=ve.getTile(ot),gt=lt.getBucket(Te);if(!gt||!gt.text||!gt.text.segments.get().length)continue;const Tt=n.bp(gt.textSizeData,Xe.zoom,et),Yt=ko(ot,gt.getProjection(),Xe),Lt=Xe.calculatePixelsToTileUnitsMatrix(lt),aa=Rs(Yt,lt.tileID.canonical,st,ht,Xe,gt.getProjection(),Lt),ua=gt.hasIconTextFit()&&gt.hasIconData();if(Tt){const Sa=Math.pow(2,Xe.zoom-lt.tileID.overscaledZ);ss(gt,ht,st,Be,n.cY,Xe,aa,ot,Sa,Tt,ua)}}}(A,g,c,o,c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),R,H);const W=c.paint.get("icon-opacity").constantOr(1)!==0,te=c.paint.get("text-opacity").constantOr(1)!==0;c.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(W||te)?vn(g,o,c,A,C,P):(W&&vn(g,o,c,A,C,P,{onlyIcons:!0}),te&&vn(g,o,c,A,C,P,{onlyText:!0})),o.map.showCollisionBoxes&&(Fi(g,o,c,A,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),!0),Fi(g,o,c,A,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),!1))},circle:function(g,o,c,A){if(g.renderPass!=="translucent")return;const R=c.paint.get("circle-opacity"),C=c.paint.get("circle-stroke-width"),P=c.paint.get("circle-stroke-opacity"),L=c.layout.get("circle-sort-key").constantOr(1)!==void 0,j=c.paint.get("circle-emissive-strength");if(R.constantOr(1)===0&&(C.constantOr(1)===0||P.constantOr(1)===0))return;const H=g.context,W=H.gl,te=g.transform,ae=g.depthModeForSublayer(0,ir.ReadOnly),ce=Rr.disabled,Te=g.colorModeForDrapableLayerRenderPass(j),ve=te.projection.name==="globe",Ee=[n.av(te.center.lng),n.aC(te.center.lat)],Ve=[];for(let et=0;et<A.length;et++){const Xe=A[et],ht=o.getTile(Xe),st=ht.getBucket(c);if(!st||st.projection.name!==te.projection.name)continue;const ot=st.programConfigurations.get(c.id),lt=n.cZ(c),gt=g.isTileAffectedByFog(Xe);ve&&lt.push("PROJECTION_GLOBE_VIEW"),lt.push("DEPTH_D24"),g.terrain&&te.depthOcclusionForSymbolsAndCircles&&lt.push("DEPTH_OCCLUSION");const Tt=g.getOrCreateProgram("circle",{config:ot,defines:lt,overrideFog:gt}),Yt=st.layoutVertexBuffer,Lt=st.globeExtVertexBuffer,aa=st.indexBuffer,ua=te.projection.createInversionMatrix(te,Xe.canonical),Sa={programConfiguration:ot,program:Tt,layoutVertexBuffer:Yt,globeExtVertexBuffer:Lt,indexBuffer:aa,uniformValues:n.c_(g,Xe,ht,ua,Ee,c),tile:ht};if(L){const It=st.segments.get();for(const ia of It)Ve.push({segments:new n.b8([ia]),sortKey:ia.sortKey,state:Sa})}else Ve.push({segments:st.segments,sortKey:0,state:Sa})}L&&Ve.sort((et,Xe)=>et.sortKey-Xe.sortKey);const Be={useDepthForOcclusion:te.depthOcclusionForSymbolsAndCircles};for(const et of Ve){const{programConfiguration:Xe,program:ht,layoutVertexBuffer:st,globeExtVertexBuffer:ot,indexBuffer:lt,uniformValues:gt,tile:Tt}=et.state,Yt=et.segments;g.terrain&&g.terrain.setupElevationDraw(Tt,ht,Be),g.uploadCommonUniforms(H,ht,Tt.tileID.toUnwrapped()),ht.draw(g,W.TRIANGLES,ae,ce,Te,vr.disabled,gt,c.id,st,lt,Yt,c.paint,te.zoom,Xe,[ot])}},heatmap:function(g,o,c,A){if(c.paint.get("heatmap-opacity")!==0)if(g.renderPass==="offscreen"){const R=g.context,C=R.gl,P=Rr.disabled,L=new br([C.ONE,C.ONE,C.ONE,C.ONE],n.al.transparent,[!0,!0,!0,!0]);(function(ce,Te,ve,Ee){const Ve=ce.gl,Be=Te.width*Ee,et=Te.height*Ee;ce.activeTexture.set(Ve.TEXTURE1),ce.viewport.set([0,0,Be,et]);let Xe=ve.heatmapFbo;if(!Xe||Xe&&(Xe.width!==Be||Xe.height!==et)){Xe&&Xe.destroy();const ht=Ve.createTexture();Ve.bindTexture(Ve.TEXTURE_2D,ht),Ve.texParameteri(Ve.TEXTURE_2D,Ve.TEXTURE_WRAP_S,Ve.CLAMP_TO_EDGE),Ve.texParameteri(Ve.TEXTURE_2D,Ve.TEXTURE_WRAP_T,Ve.CLAMP_TO_EDGE),Ve.texParameteri(Ve.TEXTURE_2D,Ve.TEXTURE_MIN_FILTER,Ve.LINEAR),Ve.texParameteri(Ve.TEXTURE_2D,Ve.TEXTURE_MAG_FILTER,Ve.LINEAR),Xe=ve.heatmapFbo=ce.createFramebuffer(Be,et,!0,null),function(st,ot,lt,gt,Tt,Yt){const Lt=st.gl;Lt.texImage2D(Lt.TEXTURE_2D,0,st.extRenderToTextureHalfFloat?Lt.RGBA16F:Lt.RGBA,Tt,Yt,0,Lt.RGBA,st.extRenderToTextureHalfFloat?Lt.HALF_FLOAT:Lt.UNSIGNED_BYTE,null),gt.colorAttachment.set(lt)}(ce,0,ht,Xe,Be,et)}else Ve.bindTexture(Ve.TEXTURE_2D,Xe.colorAttachment.get()),ce.bindFramebuffer.set(Xe.framebuffer)})(R,g,c,g.transform.projection.name==="globe"?.5:.25),R.clear({color:n.al.transparent});const j=g.transform,H=j.projection.name==="globe",W=H?["PROJECTION_GLOBE_VIEW"]:[],te=H?vr.frontCCW:vr.disabled,ae=[n.av(j.center.lng),n.aC(j.center.lat)];for(let ce=0;ce<A.length;ce++){const Te=A[ce];if(o.hasRenderableParent(Te))continue;const ve=o.getTile(Te),Ee=ve.getBucket(c);if(!Ee||Ee.projection.name!==j.projection.name)continue;const Ve=g.isTileAffectedByFog(Te),Be=Ee.programConfigurations.get(c.id),et=g.getOrCreateProgram("heatmap",{config:Be,defines:W,overrideFog:Ve}),{zoom:Xe}=g.transform;g.terrain&&g.terrain.setupElevationDraw(ve,et),g.uploadCommonUniforms(R,et,Te.toUnwrapped());const ht=j.projection.createInversionMatrix(j,Te.canonical);et.draw(g,C.TRIANGLES,ir.disabled,P,L,te,Qt(g,Te,ve,ht,ae,Xe,c.paint.get("heatmap-intensity")),c.id,Ee.layoutVertexBuffer,Ee.indexBuffer,Ee.segments,c.paint,g.transform.zoom,Be,H?[Ee.globeExtVertexBuffer]:null)}R.viewport.set([0,0,g.width,g.height])}else g.renderPass==="translucent"&&(g.context.setColorMode(g.colorModeForRenderPass()),function(R,C){const P=R.context,L=P.gl,j=C.heatmapFbo;if(!j)return;P.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,j.colorAttachment.get()),P.activeTexture.set(L.TEXTURE1);let H=C.colorRampTexture;H||(H=C.colorRampTexture=new n.T(P,C.colorRamp,L.RGBA8)),H.bind(L.LINEAR,L.CLAMP_TO_EDGE),R.getOrCreateProgram("heatmapTexture").draw(R,L.TRIANGLES,ir.disabled,Rr.disabled,R.colorModeForRenderPass(),vr.disabled,((W,te,ae,ce)=>({u_image:0,u_color_ramp:1,u_opacity:te.paint.get("heatmap-opacity")}))(0,C),C.id,R.viewportBuffer,R.quadTriangleIndexBuffer,R.viewportSegments,C.paint,R.transform.zoom)}(g,c))},line:function(g,o,c,A){if(g.renderPass!=="translucent")return;const R=c.paint.get("line-opacity"),C=c.paint.get("line-width");if(R.constantOr(1)===0||C.constantOr(1)===0)return;const P=c.paint.get("line-emissive-strength"),L=c.paint.get("line-occlusion-opacity"),j=c.layout.get("line-elevation-reference"),H=c.layout.get("line-width-unit")==="meters",W=j==="sea",te=g.context,ae=te.gl;if(c.hasElevatedBuckets&&g.transform.projection.name==="globe")return;const ce=c.layout.get("line-cross-slope"),Te=ce!==void 0,ve=ce<1,Ee=g.colorModeForDrapableLayerRenderPass(P),Ve=g.terrain&&g.terrain.renderingToTexture,Be=Ve?1:n.q.devicePixelRatio,et=c.paint.get("line-dasharray"),Xe=et.constantOr(1),ht=c.layout.get("line-cap"),st=et.constantOr(null),ot=ht.constantOr(null),lt=c.paint.get("line-pattern"),gt=lt.constantOr(1),Tt=lt.constantOr(null),Yt=c.paint.get("line-opacity").constantOr(1);let Lt=!gt&&Yt!==1||g.depthOcclusion&&L>0&&L<1;const aa=c.paint.get("line-gradient"),ua=gt?"linePattern":"line",Sa=n.c$(c);let It;if(Ve&&g.terrain&&g.terrain.clipOrMaskOverlapStencilType()&&(Lt=!1),L!==0&&g.depthOcclusion){const zt=c.paint._values["line-opacity"];zt&&zt.value&&zt.value.kind==="constant"?It=zt.value:n.w(`Occlusion opacity for layer ${c.id} is supported only when line-opacity isn't data-driven.`)}C.value.kind!=="constant"&&C.value.isLineProgressConstant===!1&&Sa.push("VARIABLE_LINE_WIDTH");const ia=(zt,sa,ea,da,Kt,pa)=>{for(const Ia of zt){const La=o.getTile(Ia);if(gt&&!La.patternsLoaded())continue;const Ea=La.getBucket(c);if(!Ea||Ea.hasZOffset&&!Kt||!Ea.hasZOffset&&Kt)continue;g.prepareDrawTile();const sr=Ea.programConfigurations.get(c.id),Fr=g.isTileAffectedByFog(Ia),pr=g.getOrCreateProgram(ua,{config:sr,defines:sa,overrideFog:Fr,overrideRtt:!Kt&&void 0});if(Tt&&La.imageAtlas){const Tr=n.d0.from(Tt).getPrimary().scaleSelf(Be).toString(),tr=La.imageAtlas.patternPositions.get(Tr);tr&&sr.setConstantPatternPositions(tr)}if(!gt&&st&&ot&&La.lineAtlas){const Tr=La.lineAtlas.getDash(st,ot);Tr&&sr.setConstantPatternPositions(Tr)}let[Or,Cr]=c.paint.get("line-trim-offset");(ot==="round"||ot==="square")&&Or!==Cr&&(Or===0&&(Or-=1),Cr===1&&(Cr+=1));const xr=Ve?Ia.projMatrix:null,Ur=H?1/Ea.tileToMeter/n.at(La,1,g.transform.zoom):1,Ir=H?1/Ea.tileToMeter/n.at(La,1,Math.floor(g.transform.zoom)):1,dr=gt?n.d1(g,La,c,xr,Be,Ur,Ir,[Or,Cr]):n.d2(g,La,c,xr,Ea.lineClipsArray.length,Be,Ur,Ir,[Or,Cr]);if(aa){const Tr=Ea.gradients[c.id];let tr=Tr.texture;if(c.gradientVersion!==Tr.version){let sn=256;if(c.stepInterpolant){const Hn=o.getSource().maxzoom,cn=Ia.canonical.z===Hn?Math.ceil(1<<g.transform.maxZoom-Ia.canonical.z):1;sn=n.ay(n.d3(Ea.maxLineLength/n.ai*1024*cn),256,te.maxTextureSize)}Tr.gradient=n.d4({expression:c.gradientExpression(),evaluationKey:"lineProgress",resolution:sn,image:Tr.gradient||void 0,clips:Ea.lineClipsArray}),Tr.texture?Tr.texture.update(Tr.gradient):Tr.texture=new n.T(te,Tr.gradient,ae.RGBA8),Tr.version=c.gradientVersion,tr=Tr.texture}te.activeTexture.set(ae.TEXTURE1),tr.bind(c.stepInterpolant?ae.NEAREST:ae.LINEAR,ae.CLAMP_TO_EDGE)}Xe&&(te.activeTexture.set(ae.TEXTURE0),La.lineAtlasTexture&&La.lineAtlasTexture.bind(ae.LINEAR,ae.REPEAT),sr.updatePaintBuffers()),gt&&(te.activeTexture.set(ae.TEXTURE0),La.imageAtlasTexture&&La.imageAtlasTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),sr.updatePaintBuffers()),Kt&&!W&&g.terrain.setupElevationDraw(La,pr),g.uploadCommonUniforms(te,pr,Ia.toUnwrapped());const nn=Tr=>{It!=null&&(It.value=Yt*L),pr.draw(g,ae.TRIANGLES,ea,Tr,Ee,vr.disabled,dr,c.id,Ea.layoutVertexBuffer,Ea.indexBuffer,Ea.segments,c.paint,g.transform.zoom,sr,[Ea.layoutVertexBuffer2,Ea.patternVertexBuffer,Ea.zOffsetVertexBuffer]),It!=null&&(It.value=Yt)};if(Lt&&!Kt){const Tr=g.stencilModeForClipping(Ia).ref;Tr===0&&Ve&&te.clear({stencil:0});const tr={func:ae.EQUAL,mask:255};dr.u_alpha_discard_threshold=.8,nn(new Rr(tr,Tr,255,ae.KEEP,ae.KEEP,ae.INVERT)),dr.u_alpha_discard_threshold=0,nn(new Rr(tr,Tr,255,ae.KEEP,ae.KEEP,ae.KEEP))}else dr.u_alpha_discard_threshold=Lt&&Kt&&pa?.8:0,nn(Kt?da:g.stencilModeForClipping(Ia))}};if(c.hasNonElevatedBuckets){const zt=!Ve&&g.terrain;L!==0&&zt?n.w(`Occlusion opacity for layer ${c.id} is supported on terrain only if the layer has line-z-offset enabled.`):zt?n.w(`Cannot render non-elevated lines in immediate mode when terrain is enabled. Layer: ${c.id}.`):ia(A,Sa,g.depthModeForSublayer(0,ir.ReadOnly),Rr.disabled,!1,!0)}if(c.hasElevatedBuckets){Sa.push("ELEVATED"),Te&&Sa.push(ve?"CROSS_SLOPE_HORIZONTAL":"CROSS_SLOPE_VERTICAL"),W&&Sa.push("ELEVATION_REFERENCE_SEA");const zt=Lt?g.stencilModeFor3D():Rr.disabled,sa=new ir(g.depthOcclusion?ae.GREATER:ae.LEQUAL,ir.ReadOnly,g.depthRangeFor3D);g.forceTerrainMode=!0,ia(A,Sa,sa,zt,!0,!0),Lt&&ia(A,Sa,sa,zt,!0,!1),g.forceTerrainMode=!1}Lt&&(g.resetStencilClippingMasks(),Ve&&te.clear({stencil:0})),L===0||g.depthOcclusion||Ve||g.layersWithOcclusionOpacity.push(g.currentLayer)},fill:function(g,o,c,A){const R=c.paint.get("fill-color"),C=c.paint.get("fill-opacity");if(C.constantOr(1)===0)return;const P=c.paint.get("fill-emissive-strength"),L=g.colorModeForDrapableLayerRenderPass(P),j=c.paint.get("fill-pattern"),H=g.opaquePassEnabledForLayer()&&!j.constantOr(1)&&R.constantOr(n.al.transparent).a===1&&C.constantOr(0)===1?"opaque":"translucent";let W="none";c.layout.get("fill-elevation-reference")!=="none"?W="road":c.paint.get("fill-z-offset").constantOr(1)!==0&&(W="offset");const te=!(!g.terrain||!g.terrain.enabled),ae={painter:g,sourceCache:o,layer:c,coords:A,colorMode:L,elevationType:W,terrainEnabled:te,pass:H};if(W!=="offset"){if(il(ae,!1),W==="road"){const ce=!te&&g.renderPass==="translucent";ce&&To(g,o,c,A,"geometry"),il(ae,!0,Rr.disabled),ce&&function(Te){const{painter:ve,sourceCache:Ee,layer:Ve,coords:Be,colorMode:et}=Te,Xe=ve.context.gl,ht=new ir(ve.context.gl.LEQUAL,ir.ReadOnly,ve.depthRangeFor3D);for(const st of Be){const ot=Ee.getTile(st),lt=ot.getBucket(Ve);if(!lt)continue;const gt=lt.elevatedStructures;if(!gt||!gt.renderableSegments||gt.renderableSegments.segments[0].primitiveLength===0)continue;ve.prepareDrawTile();const Tt=lt.bufferData.programConfigurations.get(Ve.id),Yt=ve.isTileAffectedByFog(st),Lt=ve.getOrCreateProgram("elevatedStructures",{config:Tt,overrideFog:Yt,defines:["NORMAL_OFFSET"]}),aa={u_matrix:ve.translatePosMatrix(st.projMatrix,ot,Ve.paint.get("fill-translate"),Ve.paint.get("fill-translate-anchor"))};ve.uploadCommonUniforms(ve.context,Lt,st.toUnwrapped()),Lt.draw(ve,Xe.TRIANGLES,ht,Rr.disabled,et,vr.backCCW,aa,Ve.id,gt.vertexBuffer,gt.indexBuffer,gt.renderableSegments,Ve.paint,ve.transform.zoom,Tt,[gt.vertexBufferNormal])}}(ae)}}else il(ae,!1,g.stencilModeFor3D())},"fill-extrusion":function(g,o,c,A){const R=c.paint.get("fill-extrusion-opacity"),C=g.context,P=C.gl,L=g.terrain,j=L&&L.renderingToTexture;if(R===0)return;const H=g.conflationActive&&g.style.isLayerClipped(c,o.getSource()),W=g.style.order.indexOf(c.fqid);if(H&&function(te,ae,ce,Te,ve){for(const Ee of Te){const Ve=ae.getTile(Ee).getBucket(ce);Ve&&(Ve.updateReplacement(Ee,te.replacementSource,ve),Ve.uploadCentroid(te.context))}}(g,o,c,A,W),L||H)for(const te of A){const ae=o.getTile(te).getBucket(c);ae&&zl(g.context,o,te,ae,c,L,H)}if(g.renderPass==="shadow"&&g.shadowRenderer){const te=g.shadowRenderer;if(L&&R<.65&&c._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof n.ab)return;const ae=te.getShadowPassDepthMode(),ce=te.getShadowPassColorMode();Vl(g,o,c,A,ae,Rr.disabled,ce,H)}else if(g.renderPass==="translucent"){const te=!c.paint.get("fill-extrusion-pattern").constantOr(1),ae=c.paint.get("fill-extrusion-color").constantOr(n.al.white);if(!j&&ae.a!==0){const ce=new ir(g.context.gl.LEQUAL,ir.ReadWrite,g.depthRangeFor3D);R===1&&te?Vl(g,o,c,A,ce,Rr.disabled,br.unblended,H):(Vl(g,o,c,A,ce,Rr.disabled,br.disabled,H),Vl(g,o,c,A,ce,g.stencilModeFor3D(),g.colorModeForRenderPass(),H),g.resetStencilClippingMasks())}if(g.style.enable3dLights()&&te&&(!L&&g.transform.projection.name!=="globe"||j)){const ce=c.paint.get("fill-extrusion-opacity"),Te=c.paint.get("fill-extrusion-ambient-occlusion-intensity"),ve=c.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),Ee=c.paint.get("fill-extrusion-flood-light-intensity"),Ve=c.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",Be=c.paint.get("fill-extrusion-flood-light-color").toRenderColor(Ve?null:c.lut).toArray01().slice(0,3),et=Te>0&&ve>0,Xe=Ee>0,ht=(ot,lt,gt)=>(1-gt)*ot+gt*lt,st=ot=>{const lt=g.depthModeForSublayer(1,ir.ReadOnly,P.LEQUAL,!0),gt=c.paint.get(ot?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),Tt=ht(.1,3,gt),Yt=g._showOverdrawInspector;if(!Yt){const Lt=new Rr({func:P.ALWAYS,mask:255},255,255,P.KEEP,P.KEEP,P.REPLACE),aa=new br([P.ONE,P.ONE,P.ONE,P.ONE],n.al.transparent,[!1,!1,!1,!0],P.MIN);xs(g,o,c,A,lt,Lt,aa,vr.disabled,ot,"sdf",ce,Te,ve,Ee,Be,Tt,H,!1)}{const Lt=Yt?Rr.disabled:new Rr({func:P.EQUAL,mask:255},255,255,P.KEEP,P.DECR,P.DECR),aa=Yt?g.colorModeForRenderPass():new br([P.ONE_MINUS_DST_ALPHA,P.DST_ALPHA,P.ONE,P.ONE],n.al.transparent,[!0,!0,!0,!0]);xs(g,o,c,A,lt,Lt,aa,vr.disabled,ot,"color",ce,Te,ve,Ee,Be,Tt,H,!1)}};if(j){const ot=(lt,gt,Tt)=>{const Yt=g.depthModeForSublayer(1,ir.ReadOnly,P.LEQUAL,!1),Lt=c.paint.get(lt?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),aa=ht(.1,3,Lt);{const ua=new br([P.ONE,P.ONE,P.ONE,P.ONE],n.al.transparent,[!1,!1,!1,!0]);xs(g,o,c,A,Yt,Rr.disabled,ua,vr.disabled,lt,"clear",ce,Te,ve,Ee,Be,aa,H,gt)}{const ua=new Rr({func:P.ALWAYS,mask:255},255,255,P.KEEP,P.KEEP,P.REPLACE),Sa=new br([P.ONE,P.ONE,P.ONE,P.ONE],n.al.transparent,[!1,!1,!1,!0],P.MIN);xs(g,o,c,A,Yt,ua,Sa,vr.disabled,lt,"sdf",ce,Te,ve,Ee,Be,aa,H,gt)}{const ua=lt?P.ZERO:P.ONE_MINUS_DST_ALPHA,Sa=new Rr({func:P.EQUAL,mask:255},255,255,P.KEEP,P.DECR,P.DECR),It=new br([ua,P.DST_ALPHA,P.ONE_MINUS_DST_ALPHA,P.ZERO],n.al.transparent,[!0,!0,!0,!0]);xs(g,o,c,A,Yt,Sa,It,vr.disabled,lt,"color",ce,Te,ve,Ee,Be,aa,H,gt)}{const ua=new br([P.ONE,P.ONE,P.ONE,lt?P.ZERO:P.ONE],n.al.transparent,[!1,!1,!1,!0],lt?P.FUNC_ADD:P.MAX);xs(g,o,c,A,Yt,Rr.disabled,ua,vr.disabled,lt,"clear",ce,Te,ve,Ee,Be,aa,H,gt,Tt)}};if(et||Xe){let lt;if(g.prepareDrawTile(),L){const gt=L.drapeBufferSize[0],Tt=L.drapeBufferSize[1];lt=L.framebufferCopyTexture,lt&&(!lt||lt.size[0]===gt&&lt.size[1]===Tt)||(lt&&lt.destroy(),lt=L.framebufferCopyTexture=new n.T(C,new n.r({width:gt,height:Tt}),P.RGBA8)),lt.bind(P.LINEAR,P.CLAMP_TO_EDGE),P.copyTexSubImage2D(P.TEXTURE_2D,0,0,0,0,0,gt,Tt)}et&&ot(!0,!1,lt),Xe&&ot(!1,!0,lt)}}else et&&st(!0),Xe&&st(!1),(et||Xe)&&g.resetStencilClippingMasks()}}},hillshade:function(g,o,c,A){if(g.renderPass!=="offscreen"&&g.renderPass!=="translucent"||g.style.disableElevatedTerrain)return;const R=g.context,C=g.terrain&&g.terrain.renderingToTexture,[P,L]=g.renderPass!=="translucent"||C?[{},A]:g.stencilConfigForOverlap(A);for(const j of L){const H=o.getTile(j);if(H.needsHillshadePrepare&&g.renderPass==="offscreen")Nd(g,H,c);else if(g.renderPass==="translucent"){const W=g.depthModeForSublayer(0,ir.ReadOnly),te=c.paint.get("hillshade-emissive-strength"),ae=g.colorModeForDrapableLayerRenderPass(te),ce=C&&g.terrain?g.terrain.stencilModeForRTTOverlap(j):P[j.overscaledZ];ts(g,j,H,c,W,ce,ae)}}R.viewport.set([0,0,g.width,g.height]),g.resetStencilClippingMasks()},raster:function(g,o,c,A,R,C){if(g.renderPass!=="translucent"||c.paint.get("raster-opacity")===0)return;const P=g.transform.projection.name==="globe",L=c.paint.get("raster-elevation")!==0,j=L&&P;if(g.renderElevatedRasterBackface&&!j)return;const H=g.context,W=H.gl,te=o.getSource(),ae=function(st,ot,lt,gt){const Tt=ot.paint.get("raster-color"),Yt=st.type==="raster-array",Lt=[],aa=ot.paint.get("raster-resampling"),ua=ot.paint.get("raster-color-mix");let Sa=ot.paint.get("raster-color-range");const It=[ua[0],ua[1],ua[2],0],ia=ua[3];let zt=aa==="nearest"?gt.NEAREST:gt.LINEAR;if(Yt&&(Lt.push("RASTER_ARRAY"),Tt||Lt.push("RASTER_COLOR"),aa==="linear"&&Lt.push("RASTER_ARRAY_LINEAR"),zt=gt.NEAREST,!Sa&&st.rasterLayers)){const sa=st.rasterLayers.find(({id:ea})=>ea===ot.sourceLayer);sa&&sa.fields&&sa.fields.range&&(Sa=sa.fields.range)}if(Sa=Sa||[0,1],Tt){Lt.push("RASTER_COLOR"),lt.activeTexture.set(gt.TEXTURE2),ot.updateColorRamp(Sa);let sa=ot.colorRampTexture;sa||(sa=ot.colorRampTexture=new n.T(lt,ot.colorRamp,gt.RGBA8)),sa.bind(gt.LINEAR,gt.CLAMP_TO_EDGE)}return{mix:It,range:Sa,offset:ia,defines:Lt,resampling:zt}}(te,c,H,W);if(te instanceof n.aK&&!A.length&&!P)return;const ce=c.paint.get("raster-emissive-strength"),Te=g.colorModeForDrapableLayerRenderPass(ce),ve=g.terrain&&g.terrain.renderingToTexture,Ee=!g.options.moving,Ve=c.paint.get("raster-resampling")==="nearest"?W.NEAREST:W.LINEAR;if(te instanceof n.aK&&!A.length&&(te.onNorthPole||te.onSouthPole)){const st=L?g.stencilModeFor3D():Rr.disabled;return void Gt(!!te.onNorthPole,null,g,o,c,ce,ae,vr.disabled,st)}if(!A.length)return;const[Be,et]=te instanceof n.aK||ve?[{},A]:g.stencilConfigForOverlap(A),Xe=et[et.length-1].overscaledZ;j&&ae.defines.push("PROJECTION_GLOBE_VIEW"),L&&ae.defines.push("RENDER_CUTOFF");const ht=(st,ot,lt)=>{for(const gt of st){const Tt=gt.toUnwrapped(),Yt=o.getTile(gt);if(ve&&(!Yt||!Yt.hasData()))continue;H.activeTexture.set(W.TEXTURE0);const Lt=uh(Yt,te,c,ae);if(!Lt||!Lt.texture)continue;const{texture:aa,mix:ua,offset:Sa,tileSize:It,buffer:ia}=Lt;let zt,sa;ve?(zt=ir.disabled,sa=gt.projMatrix):L?(zt=new ir(W.LEQUAL,ir.ReadWrite,g.depthRangeFor3D),sa=P?Float32Array.from(g.transform.expandedFarZProjMatrix):g.transform.calculateProjMatrix(Tt,Ee)):(zt=g.depthModeForSublayer(gt.overscaledZ-Xe,c.paint.get("raster-opacity")===1?ir.ReadWrite:ir.ReadOnly,W.LESS),sa=g.transform.calculateProjMatrix(Tt,Ee));const ea=g.terrain&&ve?g.terrain.stencilModeForRTTOverlap(gt):Be[gt.overscaledZ],da=C?0:c.paint.get("raster-fade-duration");Yt.registerFadeDuration(da);const Kt=o.findLoadedParent(gt,0),pa=Nl(Yt,Kt,o,g.transform,da);let Ia,La;g.terrain&&g.terrain.prepareDrawTile(),H.activeTexture.set(W.TEXTURE0),aa.bind(Ve,W.CLAMP_TO_EDGE),H.activeTexture.set(W.TEXTURE1),Kt?(Kt.texture&&Kt.texture.bind(Ve,W.CLAMP_TO_EDGE),Ia=Math.pow(2,Kt.tileID.overscaledZ-Yt.tileID.overscaledZ),La=[Yt.tileID.canonical.x*Ia%1,Yt.tileID.canonical.y*Ia%1]):aa.bind(Ve,W.CLAMP_TO_EDGE),"useMipmap"in aa&&H.extTextureFilterAnisotropic&&g.transform.pitch>20&&W.texParameterf(W.TEXTURE_2D,H.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,H.extTextureFilterAnisotropicMax);const Ea=g.transform;let sr;const Fr=L?Hp(Ea):[0,0,0,0];let pr,Or,Cr,xr,Ur,Ir=0;if(j&&te instanceof n.aK&&te.coordinates.length>3)pr=Float32Array.from(n.bc(n.cI(new n.bT(0,0,0)))),Or=Float32Array.from(Ea.globeMatrix),Cr=Float32Array.from(n.cE(Ea)),xr=[n.av(Ea.center.lng),n.aC(Ea.center.lat)],sr=te.elevatedGlobePerspectiveTransform,Ur=te.elevatedGlobeGridMatrix||new Float32Array(9);else if(j){const tr=n.cF(gt.canonical);Ir=n.cG(tr.getCenter().lat),pr=Float32Array.from(n.bc(n.cI(gt.canonical))),Or=Float32Array.from(Ea.globeMatrix),Cr=Float32Array.from(n.cE(Ea)),xr=[n.av(Ea.center.lng),n.aC(Ea.center.lat)],sr=[0,0],Ur=Float32Array.from(n.cH(gt.canonical,tr,Ir,Ea.worldSize/Ea._pixelsPerMercatorPixel))}else sr=te instanceof n.aK?te.perspectiveTransform:[0,0],pr=new Float32Array(16),Or=new Float32Array(9),Cr=new Float32Array(16),xr=[0,0],Ur=new Float32Array(9);const dr=ra(sa,pr,Or,Cr,Ur,La||[0,0],n.ag(g.transform.zoom),xr,Fr,Ia||1,pa,c,sr,L?c.paint.get("raster-elevation"):0,2,ua,Sa,ae.range,It,ia,ce),nn=g.isTileAffectedByFog(gt),Tr=g.getOrCreateProgram("raster",{defines:ae.defines,overrideFog:nn});if(g.uploadCommonUniforms(H,Tr,Tt),te instanceof n.aK){const tr=te.elevatedGlobeVertexBuffer,sn=te.elevatedGlobeIndexBuffer;if(ve||!P)te.boundsBuffer&&te.boundsSegments&&Tr.draw(g,W.TRIANGLES,zt,Rr.disabled,Te,vr.disabled,dr,c.id,te.boundsBuffer,g.quadTriangleIndexBuffer,te.boundsSegments);else if(tr&&sn){const Hn=Ea.zoom<=n.c6?te.elevatedGlobeSegments:te.getSegmentsForLongitude(Ea.center.lng);Hn&&Tr.draw(g,W.TRIANGLES,zt,Rr.disabled,Te,ot,dr,c.id,tr,sn,Hn)}}else if(j){zt=new ir(W.LEQUAL,ir.ReadOnly,g.depthRangeFor3D);const tr=g.globeSharedBuffers;if(tr){const[sn,Hn,cn]=tr.getGridBuffers(Ir,!1);Tr.draw(g,W.TRIANGLES,zt,lt||ea,g.colorModeForRenderPass(),ot,dr,c.id,sn,Hn,cn)}}else{const{tileBoundsBuffer:tr,tileBoundsIndexBuffer:sn,tileBoundsSegments:Hn}=g.getTileBoundsBuffers(Yt);Tr.draw(g,W.TRIANGLES,zt,ea,Te,vr.disabled,dr,c.id,tr,sn,Hn)}}if(!(te instanceof n.aK)&&j)for(const gt of st){const Tt=gt.canonical.y===(1<<gt.canonical.z)-1;gt.canonical.y===0&&Gt(!0,gt,g,o,c,ce,ae,ot,lt||Rr.disabled),Tt&&Gt(!1,gt,g,o,c,ce,ae,ot===vr.frontCW?vr.backCW:vr.frontCW,lt||Rr.disabled)}};j?ht(et,g.renderElevatedRasterBackface?vr.backCW:vr.frontCW,g.stencilModeFor3D()):ht(et,vr.disabled,void 0),g.resetStencilClippingMasks()},"raster-particle":function(g,o,c,A,R,C){g.renderPass==="offscreen"&&function(P,L,j,H){if(!H.length)return;const W=P.context,te=W.gl,ae=L.getSource();if(!(ae instanceof zi))return;const ce=Math.ceil(Math.sqrt(j.paint.get("raster-particle-count")));let Te=j.particlePositionRGBAImage;if(!Te||Te.width!==ce){const et=function(Xe){const ht=Xe*Xe,st=new Uint8Array(4*ht),ot=function(gt){return gt|=0,gt=Math.imul(2747636419^gt,2654435769),gt=Math.imul(gt^gt>>>16,2654435769),((gt=Math.imul(gt^gt>>>16,2654435769))>>>0)/4294967296},lt=1/1.1;for(let gt=0;gt<ht;gt++){const Tt=lt*(ot(2*gt+0)+fa),Yt=lt*(ot(2*gt+1)+fa),Lt=255*Tt%1,aa=255*Yt%1,ua=Lt,Sa=Yt-aa/255,It=aa;st[4*gt+0]=255*(Tt-Lt/255),st[4*gt+1]=255*ua,st[4*gt+2]=255*Sa,st[4*gt+3]=255*It}return st}(ce);Te=j.particlePositionRGBAImage=new n.r({width:ce,height:ce},et)}let ve=j.particleFramebuffer;ve?ve.width!==ce&&(ve.destroy(),ve=j.particleFramebuffer=W.createFramebuffer(ce,ce,!0,null)):ve=j.particleFramebuffer=W.createFramebuffer(ce,ce,!0,null);const Ee=[];for(const et of H){const Xe=L.getTile(et);if(!(Xe instanceof Fo))continue;const ht=Cu(Xe,ae,j);if(!ht)continue;const st=[Xe.tileSize,Xe.tileSize];let ot=j.tileFramebuffer;ot||(ot=j.tileFramebuffer=W.createFramebuffer(st[0],st[1],!0,null));let lt=Xe.rasterParticleState;lt||(lt=Xe.rasterParticleState=new dh(W,et,st,Te));const gt=lt.update(j.lastInvalidatedAt);lt.particleTextureDimension!==ce&&lt.updateParticleTexture(et,Te);const Tt=lt.targetColorTexture;lt.targetColorTexture=lt.backgroundColorTexture,lt.backgroundColorTexture=Tt;const Yt=lt.particleTexture0;lt.particleTexture0=lt.particleTexture1,lt.particleTexture1=Yt,Ee.push([et,ht,lt,gt])}if(Ee.length===0)return;const Ve=n.q.now(),Be=j.previousDrawTimestamp?.001*(Ve-j.previousDrawTimestamp):.0167;if(j.previousDrawTimestamp=Ve,j.hasColorMap()){W.activeTexture.set(te.TEXTURE0+2);let et=j.colorRampTexture;et||(et=j.colorRampTexture=new n.T(W,j.colorRamp,te.RGBA8)),et.bind(te.LINEAR,te.CLAMP_TO_EDGE)}W.bindFramebuffer.set(j.tileFramebuffer.framebuffer),function(et,Xe,ht){const st=et.context,ot=st.gl,lt=Xe.tileFramebuffer;st.activeTexture.set(ot.TEXTURE0);const gt={u_texture:0,u_opacity:1.05*(Yt=Xe.paint.get("raster-particle-fade-opacity-factor"))/(Yt+.05)},Tt=et.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var Yt;for(const Lt of ht){const[,,aa,ua]=Lt;lt.colorAttachment.set(aa.targetColorTexture.texture),st.viewport.set([0,0,lt.width,lt.height]),st.clear({color:n.al.transparent}),ua&&(aa.backgroundColorTexture.bind(ot.NEAREST,ot.CLAMP_TO_EDGE),Tt.draw(et,ot.TRIANGLES,ir.disabled,Rr.disabled,br.alphaBlended,vr.disabled,gt,Xe.id,et.viewportBuffer,et.quadTriangleIndexBuffer,et.viewportSegments))}}(P,j,Ee),function(et,Xe,ht,st){const ot=et.context,lt=ot.gl,gt=ht.tileFramebuffer,Tt=et.transform.projection.name==="globe",Yt=ht.paint.get("raster-particle-max-speed");for(const Lt of st){const[aa,ua,Sa]=Lt;ot.activeTexture.set(lt.TEXTURE0+0),ua.texture.bind(lt.LINEAR,lt.CLAMP_TO_EDGE),gt.colorAttachment.set(Sa.targetColorTexture.texture);const It=et.getOrCreateProgram("rasterParticleDraw",{defines:ua.defines,overrideFog:!1});ot.activeTexture.set(lt.TEXTURE0+1);const ia=ua.scalarData?[]:[0,1,2,3].map(ea=>n.d7[ea](aa));ia.push(aa);const zt=aa.canonical.x,sa=aa.canonical.y;for(const ea of ia){const da=Xe.getTile(Tt?ea.wrapped():ea);if(!da)continue;const Kt=da.rasterParticleState;if(!Kt)continue;const pa=ea.canonical.x+(1<<ea.canonical.z)*(ea.wrap-aa.wrap),Ia=ea.canonical.y;Kt.particleTexture0.bind(lt.NEAREST,lt.CLAMP_TO_EDGE);const La=ta(1,Kt.particleTexture0.size[0],[pa-zt,Ia-sa],0,ua.texture.size,2,Yt,ua.textureOffset,ua.scale,ua.offset);It.draw(et,lt.POINTS,ir.disabled,Rr.disabled,br.alphaBlended,vr.disabled,La,ht.id,Kt.particleIndexBuffer,void 0,Kt.particleSegment)}}}(P,L,j,Ee),W.bindFramebuffer.set(j.particleFramebuffer.framebuffer),function(et,Xe,ht,st){const ot=et.context,lt=ot.gl,gt=Xe.paint.get("raster-particle-max-speed"),Tt=st*Xe.paint.get("raster-particle-speed-factor")*.15,Yt=function(aa){return Math.pow(aa,6)}(.01+1*Xe.paint.get("raster-particle-reset-rate-factor")),Lt=Xe.particleFramebuffer;ot.viewport.set([0,0,Lt.width,Lt.height]);for(const aa of ht){const[,ua,Sa]=aa;ot.activeTexture.set(lt.TEXTURE0+0),ua.texture.bind(lt.LINEAR,lt.CLAMP_TO_EDGE),ot.activeTexture.set(lt.TEXTURE0+1);const It=Sa.particleTexture0;It.bind(lt.NEAREST,lt.CLAMP_TO_EDGE);const ia=Ga(1,It.size[0],0,ua.texture.size,gt,Tt,Yt,ua.textureOffset,ua.scale,ua.offset);Lt.colorAttachment.set(Sa.particleTexture1.texture),ot.clear({color:n.al.transparent}),et.getOrCreateProgram("rasterParticleUpdate",{defines:ua.defines}).draw(et,lt.TRIANGLES,ir.disabled,Rr.disabled,br.unblended,vr.disabled,ia,Xe.id,et.viewportBuffer,et.quadTriangleIndexBuffer,et.viewportSegments)}}(P,j,Ee,Be)}(g,o,c,A),g.renderPass==="translucent"&&(function(P,L,j,H,W){const te=P.context,ae=te.gl,ce=L.getSource().tileSize,Te=5*(1-n.ae(n.bY,n.bY+1,P.transform.zoom))*ce+j.paint.get("raster-particle-elevation"),ve=!P.options.moving,Ee=P.transform.projection.name==="globe";if(!H.length)return;const[Ve,Be]=P.stencilConfigForOverlap(H),et=[];Ee&&et.push("PROJECTION_GLOBE_VIEW");const Xe=P.stencilModeFor3D();for(const ht of Be){const st=ht.toUnwrapped(),ot=L.getTile(ht);if(!ot.rasterParticleState)continue;const lt=ot.rasterParticleState,gt=100;ot.registerFadeDuration(gt);const Tt=L.findLoadedParent(ht,0),Yt=Nl(ot,Tt,L,P.transform,gt);let Lt,aa;P.terrain&&P.terrain.prepareDrawTile(),te.activeTexture.set(ae.TEXTURE0),lt.targetColorTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),te.activeTexture.set(ae.TEXTURE1),Tt&&Tt.rasterParticleState?(Tt.rasterParticleState.targetColorTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),Lt=Math.pow(2,Tt.tileID.overscaledZ-ot.tileID.overscaledZ),aa=[ot.tileID.canonical.x*Lt%1,ot.tileID.canonical.y*Lt%1]):lt.targetColorTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE);const ua=Ee?Float32Array.from(P.transform.expandedFarZProjMatrix):P.transform.calculateProjMatrix(st,ve),Sa=P.transform,It=hh(Sa),ia=n.cF(ht.canonical),zt=n.cG(ia.getCenter().lat);let sa,ea,da,Kt,pa;Ee?(sa=Float32Array.from(n.bc(n.cI(ht.canonical))),ea=Float32Array.from(Sa.globeMatrix),da=Float32Array.from(n.cE(Sa)),Kt=[n.av(Sa.center.lng),n.aC(Sa.center.lat)],pa=Float32Array.from(n.cH(ht.canonical,ia,zt,Sa.worldSize/Sa._pixelsPerMercatorPixel))):(sa=new Float32Array(16),ea=new Float32Array(9),da=new Float32Array(16),Kt=[0,0],pa=new Float32Array(9));const Ia=vt(ua,sa,ea,da,pa,aa||[0,0],n.ag(P.transform.zoom),Kt,It,Lt||1,Yt,Te),La=P.isTileAffectedByFog(ht),Ea=P.getOrCreateProgram("rasterParticle",{defines:et,overrideFog:La});if(P.uploadCommonUniforms(te,Ea,st),Ee){const sr=new ir(ae.LEQUAL,ir.ReadOnly,P.depthRangeFor3D),Fr=0,pr=P.globeSharedBuffers;if(pr){const[Or,Cr,xr]=pr.getGridBuffers(zt,Fr!==0);Ea.draw(P,ae.TRIANGLES,sr,Xe,br.alphaBlended,P.renderElevatedRasterBackface?vr.frontCCW:vr.backCCW,Ia,j.id,Or,Cr,xr)}}else{const sr=P.depthModeForSublayer(0,ir.ReadOnly),Fr=Ve[ht.overscaledZ],{tileBoundsBuffer:pr,tileBoundsIndexBuffer:Or,tileBoundsSegments:Cr}=P.getTileBoundsBuffers(ot);Ea.draw(P,ae.TRIANGLES,sr,Fr,br.alphaBlended,vr.disabled,Ia,j.id,pr,Or,Cr)}}P.resetStencilClippingMasks()}(g,o,c,A),g.style.map.triggerRepaint())},background:function(g,o,c,A){const R=c.paint.get("background-color"),C=c.paint.get("background-color-use-theme").constantOr("default")==="none",P=c.paint.get("background-opacity"),L=c.paint.get("background-emissive-strength"),j=c.paint.get("background-pitch-alignment")==="viewport";if(P===0)return;const H=g.context,W=H.gl,te=g.transform,ae=te.tileSize,ce=c.paint.get("background-pattern");let Te;if(ce!==void 0&&(ce===null||(Te=g.imageManager.getPattern(n.I.from(ce.toString()),c.scope,g.style.getLut(c.scope)),!Te)))return;const ve=!ce&&R.a===1&&P===1&&g.opaquePassEnabledForLayer()?"opaque":"translucent";if(g.renderPass!==ve)return;const Ee=Rr.disabled,Ve=g.depthModeForSublayer(0,ve==="opaque"?ir.ReadWrite:ir.ReadOnly),Be=g.colorModeForDrapableLayerRenderPass(L),et=ce?"backgroundPattern":"background";let Xe,ht=A;if(ht||(Xe=g.getBackgroundTiles(),ht=Object.values(Xe).map(st=>st.tileID)),ce&&(H.activeTexture.set(W.TEXTURE0),g.imageManager.bind(g.context,c.scope)),j){const st=g.getOrCreateProgram(et,{overrideFog:!1,overrideRtt:!0}),ot=new Float32Array(n.ad.mat4.identity([])),lt=new n.aH(0,0,0,0,0),gt=ce?fr(ot,L,P,g,0,c.scope,Te,j,{tileID:lt,tileSize:ae}):Sr(ot,L,P,R.toRenderColor(C?null:c.lut));st.draw(g,W.TRIANGLES,Ve,Ee,Be,vr.disabled,gt,c.id,g.viewportBuffer,g.quadTriangleIndexBuffer,g.viewportSegments)}else for(const st of ht){const ot=g.isTileAffectedByFog(st),lt=g.getOrCreateProgram(et,{overrideFog:ot}),gt=st.toUnwrapped(),Tt=A?st.projMatrix:g.transform.calculateProjMatrix(gt);g.prepareDrawTile();const Yt=o?o.getTile(st):Xe?Xe[st.key]:new Zl(st,ae,te.zoom,g),Lt=ce?fr(Tt,L,P,g,0,c.scope,Te,j,{tileID:st,tileSize:ae}):Sr(Tt,L,P,R.toRenderColor(C?null:c.lut));g.uploadCommonUniforms(H,lt,gt);const{tileBoundsBuffer:aa,tileBoundsIndexBuffer:ua,tileBoundsSegments:Sa}=g.getTileBoundsBuffers(Yt);lt.draw(g,W.TRIANGLES,Ve,Ee,Be,vr.disabled,Lt,c.id,aa,ua,Sa)}},sky:function(g,o,c){const A=g._atmosphere?n.ag(g.transform.zoom):1,R=c.paint.get("sky-opacity")*A;if(R===0)return;const C=g.context,P=c.paint.get("sky-type"),L=new ir(C.gl.LEQUAL,ir.ReadOnly,[0,1]),j=g.frameCounter/1e3%1;P==="atmosphere"?g.renderPass==="offscreen"?c.needsSkyboxCapture(g)&&(function(H,W,te,ae){const ce=H.context,Te=ce.gl;let ve=W.skyboxFbo;if(!ve){ve=W.skyboxFbo=ce.createFramebuffer(32,32,!0,null),W.skyboxGeometry=new Bm(ce),W.skyboxTexture=ce.gl.createTexture(),Te.bindTexture(Te.TEXTURE_CUBE_MAP,W.skyboxTexture),Te.texParameteri(Te.TEXTURE_CUBE_MAP,Te.TEXTURE_WRAP_S,Te.CLAMP_TO_EDGE),Te.texParameteri(Te.TEXTURE_CUBE_MAP,Te.TEXTURE_WRAP_T,Te.CLAMP_TO_EDGE),Te.texParameteri(Te.TEXTURE_CUBE_MAP,Te.TEXTURE_MIN_FILTER,Te.LINEAR),Te.texParameteri(Te.TEXTURE_CUBE_MAP,Te.TEXTURE_MAG_FILTER,Te.LINEAR);for(let et=0;et<6;++et)Te.texImage2D(Te.TEXTURE_CUBE_MAP_POSITIVE_X+et,0,Te.RGBA,32,32,0,Te.RGBA,Te.UNSIGNED_BYTE,null)}ce.bindFramebuffer.set(ve.framebuffer),ce.viewport.set([0,0,32,32]);const Ee=W.getCenter(H,!0),Ve=H.getOrCreateProgram("skyboxCapture"),Be=new Float64Array(16);n.ad.mat4.identity(Be),n.ad.mat4.rotateY(Be,Be,.5*-Math.PI),ao(H,W,Ve,Be,Ee,0),n.ad.mat4.identity(Be),n.ad.mat4.rotateY(Be,Be,.5*Math.PI),ao(H,W,Ve,Be,Ee,1),n.ad.mat4.identity(Be),n.ad.mat4.rotateX(Be,Be,.5*-Math.PI),ao(H,W,Ve,Be,Ee,2),n.ad.mat4.identity(Be),n.ad.mat4.rotateX(Be,Be,.5*Math.PI),ao(H,W,Ve,Be,Ee,3),n.ad.mat4.identity(Be),ao(H,W,Ve,Be,Ee,4),n.ad.mat4.identity(Be),n.ad.mat4.rotateY(Be,Be,Math.PI),ao(H,W,Ve,Be,Ee,5),ce.viewport.set([0,0,H.width,H.height])}(g,c),c.markSkyboxValid(g)):g.renderPass==="sky"&&function(H,W,te,ae,ce){const Te=H.context,ve=Te.gl,Ee=H.transform,Ve=H.getOrCreateProgram("skybox");Te.activeTexture.set(ve.TEXTURE0),ve.bindTexture(ve.TEXTURE_CUBE_MAP,W.skyboxTexture);const Be=((et,Xe,ht,st,ot)=>({u_matrix:et,u_sun_direction:Xe,u_cubemap:0,u_opacity:st,u_temporal_offset:ot}))(Ee.skyboxMatrix,W.getCenter(H,!1),0,ae,ce);H.uploadCommonUniforms(Te,Ve),Ve.draw(H,ve.TRIANGLES,te,Rr.disabled,H.colorModeForRenderPass(),vr.backCW,Be,"skybox",W.skyboxGeometry.vertexBuffer,W.skyboxGeometry.indexBuffer,W.skyboxGeometry.segment)}(g,c,L,R,j):P==="gradient"&&g.renderPass==="sky"&&function(H,W,te,ae,ce){const Te=H.context,ve=Te.gl,Ee=H.transform,Ve=H.getOrCreateProgram("skyboxGradient");W.skyboxGeometry||(W.skyboxGeometry=new Bm(Te)),Te.activeTexture.set(ve.TEXTURE0);let Be=W.colorRampTexture;Be||(Be=W.colorRampTexture=new n.T(Te,W.colorRamp,ve.RGBA8)),Be.bind(ve.LINEAR,ve.CLAMP_TO_EDGE);const et=((Xe,ht,st,ot,lt)=>({u_matrix:Xe,u_color_ramp:0,u_center_direction:ht,u_radius:n.ak(st),u_opacity:ot,u_temporal_offset:lt}))(Ee.skyboxMatrix,W.getCenter(H,!1),W.paint.get("sky-gradient-radius"),ae,ce);H.uploadCommonUniforms(Te,Ve),Ve.draw(H,ve.TRIANGLES,te,Rr.disabled,H.colorModeForRenderPass(),vr.backCW,et,"skyboxGradient",W.skyboxGeometry.vertexBuffer,W.skyboxGeometry.indexBuffer,W.skyboxGeometry.segment)}(g,c,L,R,j)},debug:function(g,o,c,A,R,C){for(let P=0;P<c.length;P++)if(R){const H=new n.al(A.r*.8,A.g*.8,A.b*.8,1);Ol(g,o,c[P],A,-1,-1,C),Ol(g,o,c[P],A,-1,1,C),Ol(g,o,c[P],A,1,1,C),Ol(g,o,c[P],A,1,-1,C),Ol(g,o,c[P],H,0,0,C)}else Ol(g,o,c[P],A,0,0,C)},custom:function(g,o,c,A){const R=g.context,C=c.implementation;if(!g.transform.projection.unsupportedLayers||!g.transform.projection.unsupportedLayers.includes("custom")||g.terrain&&(g.terrain.renderingToTexture||g.renderPass==="offscreen")&&c.isDraped(o)){if(g.renderPass==="offscreen"){const P=C.prerender;if(P){if(g.setCustomLayerDefaults(),R.setColorMode(g.colorModeForRenderPass()),g.transform.projection.name==="globe"){const L=g.transform.pointMerc;P.call(C,R.gl,g.transform.customLayerMatrix(),g.transform.getProjection(),g.transform.globeToMercatorMatrix(),n.ag(g.transform.zoom),[L.x,L.y],g.transform.pixelsPerMeterRatio)}else P.call(C,R.gl,g.transform.customLayerMatrix());R.setDirty(),g.setBaseState()}}else if(g.renderPass==="translucent"){if(g.terrain&&g.terrain.renderingToTexture){const L=C.renderToTile;if(L){const j=A[0].canonical,H=new n.ac(j.x+A[0].wrap*(1<<j.z),j.y,j.z);R.setDepthMode(ir.disabled),R.setStencilMode(Rr.disabled),R.setColorMode(g.colorModeForRenderPass()),g.setCustomLayerDefaults(),L.call(C,R.gl,H),R.setDirty(),g.setBaseState()}return}g.setCustomLayerDefaults(),R.setColorMode(g.colorModeForRenderPass()),R.setStencilMode(Rr.disabled);const P=C.renderingMode==="3d"?new ir(g.context.gl.LEQUAL,ir.ReadWrite,g.depthRangeFor3D):g.depthModeForSublayer(0,ir.ReadOnly);if(R.setDepthMode(P),g.transform.projection.name==="globe"){const L=g.transform.pointMerc;C.render(R.gl,g.transform.customLayerMatrix(),g.transform.getProjection(),g.transform.globeToMercatorMatrix(),n.ag(g.transform.zoom),[L.x,L.y],g.transform.pixelsPerMeterRatio)}else C.render(R.gl,g.transform.customLayerMatrix());R.setDirty(),g.setBaseState(),R.bindFramebuffer.set(null)}}else n.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(g,o,c,A){if(g.renderPass==="opaque")return;const R=c.paint.get("model-opacity").constantOr(1);if(R===0)return;const C=c.paint.get("model-cast-shadows");if(g.renderPass==="shadow"&&(!C||g.terrain&&R<.65&&c._transitionablePaint._values["model-opacity"].value.expression instanceof n.ab))return;const P=g.shadowRenderer,L=c.paint.get("model-receive-shadows");P&&(P.useNormalOffset=!0,L||(P.enabled=!1));const j=()=>{P&&(P.useNormalOffset=!0,L||(P.enabled=!0))},H=o.getSource();if(g.renderPass==="light-beam"&&H.type!=="batched-model")return;if(H.type==="vector"||H.type==="geojson")return function(Ve,Be,et,Xe,ht){const st=Ve.transform;if(st.projection.name!=="mercator")return void n.w(`Drawing 3D models for ${st.projection.name} projection is not yet implemented`);const ot=st.getFreeCameraOptions().position;if(!Ve.modelManager)return;const lt=Ve.modelManager;et.modelManager=lt;const gt=Ve.shadowRenderer;if(!et._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const Tt=et._unevaluatedLayout._values["model-id"],Yt=Object.assign({},et.layout.get("model-id").parameters),Lt=Ve.style.order.indexOf(et.fqid);for(const aa of Xe){const ua=Be.getTile(aa).getBucket(et);if(!ua||ua.projection.name!==st.projection.name)continue;const Sa=ua.getModelUris();Sa&&!ua.modelsRequested&&(lt.addModelsFromBucket(Sa,ht),ua.modelsRequested=!0);const It=wf(aa,st);Yt.zoom=It;const ia=Tt.possiblyEvaluate(Yt);if(Gh(Ve,ua,aa),Dl.shadowUniformsInitialized=!1,Dl.useSingleShadowCascade=!!gt&&gt.getMaxCascadeForTile(aa.toUnwrapped())===0,Ve.renderPass==="shadow"&&gt){if(Ve.currentShadowCascade===1&&ua.isInsideFirstShadowMapFrustum)continue;const ea=st.calculatePosMatrix(aa.toUnwrapped(),st.worldSize);if(Dl.tileMatrix.set(ea),Dl.shadowTileMatrix=Float32Array.from(gt.calculateShadowPassMatrixFromMatrix(ea)),Dl.aabb.min.fill(0),Dl.aabb.max[0]=Dl.aabb.max[1]=n.ai,Dl.aabb.max[2]=0,Jf(ua,Dl,Ve,et.scope))continue}const zt=1<<aa.canonical.z,sa=[((ot.x-aa.wrap)*zt-aa.canonical.x)*n.ai,(ot.y*zt-aa.canonical.y)*n.ai,ot.z*zt*n.ai];Ve.conflationActive&&Object.keys(ua.instancesPerModel).length>0&&Ve.style.isLayerClipped(et,Be.getSource())&&ua.updateReplacement(aa,Ve.replacementSource,Lt,ht)&&(ua.uploaded=!1,ua.upload(Ve.context));for(let ea in ua.instancesPerModel){const da=ua.instancesPerModel[ea];da.features.length>0&&(ea=ia.evaluate(da.features[0].feature,{}));const Kt=lt.getModel(ea,ht);if(Kt&&Kt.uploaded)for(const pa of Kt.nodes)So(Ve,et,pa,da,sa,aa,Dl)}}}(g,o,c,A,H.type==="vector"?c.scope:""),void j();if(!H.loaded())return;if(H.type==="batched-model")return function(Ve,Be,et,Xe){et.resetLayerRenderingStats(Ve);const ht=Ve.context,st=Ve.transform,ot=Ve.style.fog,lt=Ve.shadowRenderer;if(st.projection.name!=="mercator")return void n.w(`Drawing 3D landmark models for ${st.projection.name} projection is not yet implemented`);const gt=Ve.transform.getFreeCameraOptions().position,Tt=n.ad.vec3.scale([],[gt.x,gt.y,gt.z],Ve.transform.worldSize),Yt=n.ad.vec3.negate([],Tt),Lt=n.ad.mat4.identity([]),aa=n.dm(st.center.lat,st.zoom),ua=n.ad.mat4.fromScaling([],[1,1,1/aa]);n.ad.mat4.translate(Lt,Lt,Yt);const Sa=et.paint.get("model-opacity").constantOr(1),It=new ir(ht.gl.LEQUAL,ir.ReadWrite,Ve.depthRangeFor3D),ia=new ir(ht.gl.LEQUAL,ir.ReadOnly,Ve.depthRangeFor3D),zt=new n.ce([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),sa=Ve.renderPass==="shadow",ea=sa&&lt?lt.getCurrentCascadeFrustum():st.getFrustum(st.scaleZoom(st.worldSize)),da=et.paint.get("model-front-cutoff"),Kt=da[2]<1,pa=qs(Ve,et.paint.get("model-cutoff-fade-range")),Ia=et.getLayerRenderingStats();(function(La,Ea,sr,Fr){const pr=La.terrain?La.terrain.exaggeration():0,Or=La.transform.zoom;for(const Cr of Fr){const xr=Ea.getTile(Cr).getBucket(sr);xr&&(xr.setFilter(sr.filter),La.conflationActive&&xr.updateReplacement(Cr,La.replacementSource),xr.evaluateScale(La,sr),La.terrain&&pr>0&&xr.elevationUpdate(La.terrain,pr,Cr,sr.source),xr.needsReEvaluation(La,Or,sr)&&xr.evaluate(sr))}})(Ve,Be,et,Xe),function(){let La,Ea,sr;Kt?(La=Xe.length-1,Ea=-1,sr=-1):(La=0,Ea=Xe.length,sr=1);const Fr=new Float64Array(16),pr=n.ad.vec3.create(),Or=new n.P(0,0);for(let Cr=La;Cr!==Ea;Cr+=sr){const xr=Xe[Cr],Ur=Be.getTile(xr).getBucket(et);if(!Ur||!Ur.uploaded)continue;let Ir=!1;lt&&(Ir=lt.getMaxCascadeForTile(xr.toUnwrapped())===0);const dr=st.calculatePosMatrix(xr.toUnwrapped(),st.worldSize),nn=Ur.modelTraits;!sa&&Kt&&(n.ad.mat4.invert(Fr,dr),n.ad.vec3.transformMat4(pr,Tt,Fr),Or.x=pr[0],Or.y=pr[1]);const Tr=[];Ur.setFilter(et.filter);for(const tr of Ur.getNodesInfo()){if(tr.hiddenByReplacement||!tr.node.meshes)continue;const sn=tr.node;let Hn=0;Ve.terrain&&sn.elevation&&(Hn=sn.elevation*Ve.terrain.exaggeration());const cn=(()=>{const oi=tr.aabb;return zt.min=[...oi.min],zt.max=[...oi.max],zt.min[2]+=Hn,zt.max[2]+=Hn,n.ad.vec3.transformMat4(zt.min,zt.min,dr),n.ad.vec3.transformMat4(zt.max,zt.max,dr),zt})(),Vn=tr.evaluatedScale;if(Vn[0]<=1&&Vn[1]<=1&&Vn[2]<=1&&cn.intersects(ea)===0)continue;if(!sa&&Kt){const oi=.16666666666666666;tr.cameraCollisionOpacity=Tt[0]>cn.min[0]&&Tt[0]<cn.max[0]&&Tt[1]>cn.min[1]&&Tt[1]<cn.max[1]&&Tt[2]*aa<cn.max[2]&&sn.footprint&&n.bA(Or,sn.footprint)?Math.max(tr.cameraCollisionOpacity-oi,0):Math.min(1,tr.cameraCollisionOpacity+oi)}const Wi=[...dr],hs=sn.anchor?sn.anchor[0]:0,ro=sn.anchor?sn.anchor[1]:0;n.ad.mat4.translate(Wi,Wi,[hs*(Vn[0]-1),ro*(Vn[1]-1),Hn]),n.ad.vec3.exactEquals(Vn,n.dq)||n.ad.mat4.scale(Wi,Wi,Vn);const Ws=n.ad.mat4.multiply([],Wi,sn.matrix),mo=n.ad.mat4.multiply([],st.expandedFarZProjMatrix,Ws),Cn=n.ad.mat4.multiply([],st.expandedFarZProjMatrix,Wi),ii=n.ad.vec4.transformMat4([],[hs,ro,Hn,1],mo)[2];sn.hidden=!1;let On=Sa;sa||(Kt&&(On*=tr.cameraCollisionOpacity,On*=mh(Wi,st,tr.aabb,da)),On*=Qf(pa,ii)),On!==0?Tr.push({nodeInfo:tr,depth:ii,opacity:On,wvpForNode:mo,wvpForTile:Cn,nodeModelMatrix:Ws,tileModelMatrix:Wi}):sn.hidden=!0}sa||Tr.sort((tr,sn)=>!Kt||tr.opacity===1&&sn.opacity===1?tr.depth<sn.depth?-1:1:tr.opacity===1?-1:sn.opacity===1?1:tr.depth>sn.depth?-1:1);for(const tr of Tr){const sn=tr.nodeInfo,Hn=sn.node;let cn=n.ad.mat4.multiply([],ua,tr.tileModelMatrix);n.ad.mat4.multiply(cn,Lt,cn);const Vn=n.ad.mat4.invert([],cn);n.ad.mat4.transpose(Vn,Vn),n.ad.mat4.scale(Vn,Vn,Fd),cn=n.ad.mat4.multiply(cn,cn,Hn.matrix);const Wi=Ve.renderPass==="light-beam",hs=et.paint.get("model-color-use-theme").constantOr("default")==="none",ro=nn&n.ds.HasMapboxMeshFeatures,Ws=ro?0:sn.evaluatedRMEA[0][2];for(let mo=0;mo<Hn.meshes.length;++mo){const Cn=Hn.meshes[mo],ii=mo===Hn.lightMeshIndex;let On=tr.wvpForNode;if(ii){if(!Wi&&!Ve.terrain&&Ve.shadowRenderer){Ve.currentLayer<Ve.firstLightBeamLayer&&(Ve.firstLightBeamLayer=Ve.currentLayer);continue}On=tr.wvpForTile}else if(Wi)continue;const oi={defines:[]},yo=[];if(!sa&&lt&&(lt.useNormalOffset=!!Cn.normalBuffer),Ld(oi.defines,yo,Cn,Ve,hs?null:et.lut),ro||oi.defines.push("DIFFUSE_SHADED"),Ir&&oi.defines.push("SHADOWS_SINGLE_CASCADE"),Ia&&(sa?Ia.numRenderedVerticesInShadowPass+=Cn.vertexArray.length:Ia.numRenderedVerticesInTransparentPass+=Cn.vertexArray.length),sa){vf(Cn,tr.nodeModelMatrix,Ve,et);continue}let Ti=null;if(ot){const Yu=bu(tr.nodeModelMatrix,Ve.transform);if(Ti=new Float32Array(Yu),st.projection.name!=="globe"){const vl=Cn.aabb.min,jd=Cn.aabb.max,[go,wh]=ot.getOpacityForBounds(Yu,vl[0],vl[1],jd[0],jd[1]);oi.overrideFog=go>=Ma||wh>=Ma}}const os=Cn.material;let Tc;os.occlusionTexture&&os.occlusionTexture.offsetScale&&(Tc=os.occlusionTexture.offsetScale,oi.defines.push("OCCLUSION_TEXTURE_TRANSFORM"));const qo=Ve.getOrCreateProgram("model",oi);!sa&&lt&&lt.setupShadowsFromMatrix(tr.tileModelMatrix,qo,lt.useNormalOffset),Ve.uploadCommonUniforms(ht,qo,null,Ti);const au=os.pbrMetallicRoughness;au.metallicFactor=.9,au.roughnessFactor=.5;const Ml=lr(new Float32Array(On),new Float32Array(cn),new Float32Array(Vn),new Float32Array(Hn.matrix),Ve,tr.opacity,au.baseColorFactor.toRenderColor(null),os.emissiveFactor,au.metallicFactor,au.roughnessFactor,os,Ws,et,[0,0,0],Tc);!ii&&(sn.hasTranslucentParts||tr.opacity<1)&&qo.draw(Ve,ht.gl.TRIANGLES,It,Rr.disabled,br.disabled,vr.backCCW,Ml,et.id,Cn.vertexBuffer,Cn.indexBuffer,Cn.segments,et.paint,Ve.transform.zoom,void 0,yo),qo.draw(Ve,ht.gl.TRIANGLES,ii?ia:It,Rr.disabled,ii||tr.opacity<1||sn.hasTranslucentParts?br.alphaBlended:br.unblended,vr.backCCW,Ml,et.id,Cn.vertexBuffer,Cn.indexBuffer,Cn.segments,et.paint,Ve.transform.zoom,void 0,yo)}}}}()}(g,o,c,A),void j();if(H.type!=="model")return;const W=H.getModels(),te=[],ae=g.transform.getFreeCameraOptions().position,ce=n.ad.vec3.scale([],[ae.x,ae.y,ae.z],g.transform.worldSize);n.ad.vec3.negate(ce,ce);const Te=[],ve=[];let Ee=0;for(const Ve of W){const Be=c.paint.get("model-rotation").constantOr(null),et=c.paint.get("model-scale").constantOr(null),Xe=c.paint.get("model-translation").constantOr(null);Ve.computeModelMatrix(g,Be,et,Xe,!0,!0,!1);const ht=n.ad.mat4.identity([]),st=n.dm(Ve.position.lat,g.transform.zoom),ot=n.ad.mat4.fromScaling([],[1,1,1/st]);n.ad.mat4.translate(ht,ht,ce),te.push({zScaleMatrix:ot,negCameraPosMatrix:ht});for(const lt of Ve.nodes)Kc(g.transform,lt,Ve.matrix,g.transform.expandedFarZProjMatrix,Ee,Te,ve);Ee++}if(Te.sort((Ve,Be)=>Be.depth-Ve.depth),g.renderPass!=="shadow"){if(R===1)for(const Ve of ve)xu(Ve,g,c,te[Ve.modelIndex],Rr.disabled,g.colorModeForRenderPass());else{for(const Ve of ve)xu(Ve,g,c,te[Ve.modelIndex],Rr.disabled,br.disabled);for(const Ve of ve)xu(Ve,g,c,te[Ve.modelIndex],g.stencilModeFor3D(),g.colorModeForRenderPass());g.resetStencilClippingMasks()}for(const Ve of Te)xu(Ve,g,c,te[Ve.modelIndex],Rr.disabled,g.colorModeForRenderPass());j()}else{for(const Ve of ve)vf(Ve.mesh,Ve.nodeModelMatrix,g,c);for(const Ve of Te)vf(Ve.mesh,Ve.nodeModelMatrix,g,c);j()}}},kd={line:function(g,o,c){if(g.hasElevatedBuckets=!1,g.hasNonElevatedBuckets=!1,g._unevaluatedLayout.getValue("line-elevation-reference")!==void 0||g._unevaluatedLayout.getValue("line-z-offset")!==void 0){if(o){const A=o.getVisibleCoordinates();for(const R of A){const C=o.getTile(R).getBucket(g);if(C&&(C.hasZOffset?g.hasElevatedBuckets=!0:g.hasNonElevatedBuckets=!0,g.hasElevatedBuckets&&g.hasNonElevatedBuckets))break}}}else g.hasNonElevatedBuckets=!0},model:function(g,o,c){const A=o.getSource();if(!A.loaded())return;if(A.type==="vector"||A.type==="geojson")return void(c.modelManager&&c.modelManager.upload(c,A.type==="vector"?g.scope:""));if(A.type==="batched-model"||A.type!=="model")return;const R=A.getModels();for(const C of R)C.upload(c.context)},raster:function(g,o,c){const A=o.getSource();if(!(A instanceof zi&&A.loaded()))return;const R=g.sourceLayer||A.rasterLayerIds&&A.rasterLayerIds[0];if(!R)return;const C=g.paint.get("raster-array-band")||A.getInitialBand(R);if(C==null)return;const P=o.getIds().map(L=>o.getTileByID(L));for(const L of P)L.updateNeeded(R,C)&&A.prepareTile(L,R,C)},"raster-particle":function(g,o,c){const A=o.getSource();if(!(A instanceof zi&&A.loaded()))return;const R=g.sourceLayer||A.rasterLayerIds&&A.rasterLayerIds[0];if(!R)return;const C=g.paint.get("raster-particle-array-band")||A.getInitialBand(R);if(C==null)return;const P=o.getIds().map(L=>o.getTileByID(L));for(const L of P)L.updateNeeded(R,C)&&A.prepareTile(L,R,C)}},Gm={fill:To};class $p{constructor(o,c,A,R,C){this.context=new _n(o,c),this.transform=A,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=C,this._timeStamp=n.q.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={forceEnablePrecipitation:!1,showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const P=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","raster-particle","hillshade","model","background","sky"];for(const j of P)this._debugParams.enabledLayers[j]=!0;C.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),C.registerParameter(this._debugParams,["Precipitation"],"forceEnablePrecipitation"),C.registerParameter(this._debugParams,["FPS"],"fpsWindow",{min:1,max:100,step:1}),C.registerBinding(this._debugParams,["FPS"],"continousRedraw",{readonly:!0,label:"continuous redraw"}),C.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"value"}),C.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"graph",view:"graph",min:0,max:200});for(const j of P)C.registerParameter(this._debugParams.enabledLayers,["Debug","Layers"],j);this.occlusionParams=new ep(C),this.setup(),this.numSublayers=Xo.maxUnderzooming+Xo.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new n.dy,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new ho(this),this._wireframeDebugCache=new Yc,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[];const L=new n.r({width:1,height:1},Uint8Array.of(0,0,0,0));this.emptyDepthTexture=new n.T(this.context,L,o.RGBA8),this._clippingActiveLastFrame=!1,this.scaleFactor=R}updateTerrain(o,c){const A=!!o&&!!o.terrain&&this.transform.projection.supportsTerrain;if(!(A||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Id(this,o));const R=this._terrain;this.transform.elevation=A?R:null,R.update(o,this.transform,c),this.transform.elevation&&!R.enabled&&(this.transform.elevation=null)}_updateFog(o){const c=o.fog;if(!c||this.transform.projection.name==="globe"||c.getOpacity(this.transform.pitch)<1||c.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[A,R]=c.getFovAdjustedRange(this.transform._fov);if(A>R)return void(this.transform.fogCullDistSq=null);const C=A+.78*(R-A);this.transform.fogCullDistSq=C*C}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(o){o&&!this._terrain&&(this._terrain=new Id(this,this.style)),this._forceTerrainMode=o}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(o,c){if(this.width=o*n.q.devicePixelRatio,this.height=c*n.q.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const A of this.style.order)this.style._mergedLayers[A].resize()}setup(){const o=this.context,c=new n.b5;c.emplaceBack(0,0),c.emplaceBack(n.ai,0),c.emplaceBack(0,n.ai),c.emplaceBack(n.ai,n.ai),this.tileExtentBuffer=o.createVertexBuffer(c,n.b7.members),this.tileExtentSegments=n.b8.simpleSegment(0,0,4,2);const A=new n.b5;A.emplaceBack(0,0),A.emplaceBack(n.ai,0),A.emplaceBack(0,n.ai),A.emplaceBack(n.ai,n.ai),this.debugBuffer=o.createVertexBuffer(A,n.b7.members),this.debugSegments=n.b8.simpleSegment(0,0,4,5);const R=new n.b5;R.emplaceBack(-1,-1),R.emplaceBack(1,-1),R.emplaceBack(-1,1),R.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(R,n.b7.members),this.viewportSegments=n.b8.simpleSegment(0,0,4,2);const C=new n.aU;C.emplaceBack(0,0,0,0),C.emplaceBack(n.ai,0,n.ai,0),C.emplaceBack(0,n.ai,0,n.ai),C.emplaceBack(n.ai,n.ai,n.ai,n.ai),this.mercatorBoundsBuffer=o.createVertexBuffer(C,n.ba.members),this.mercatorBoundsSegments=n.b8.simpleSegment(0,0,4,2);const P=new n.aV;P.emplaceBack(0,1,2),P.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(P);const L=new n.b6;for(const H of[0,1,3,2,0])L.emplaceBack(H);this.debugIndexBuffer=o.createIndexBuffer(L),this.emptyTexture=new n.T(o,new n.r({width:1,height:1},Uint8Array.of(0,0,0,0)),o.gl.RGBA8),this.identityMat=n.ad.mat4.create();const j=this.context.gl;this.stencilClearMode=new Rr({func:j.ALWAYS,mask:0},0,255,j.ZERO,j.ZERO,j.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(o){return o._makeTileBoundsBuffers(this.context,this.transform.projection),o._tileBoundsBuffer?{tileBoundsBuffer:o._tileBoundsBuffer,tileBoundsIndexBuffer:o._tileBoundsIndexBuffer,tileBoundsSegments:o._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const o=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,o.TRIANGLES,ir.disabled,this.stencilClearMode,br.disabled,vr.disabled,Gc(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(o,c,A){if(!c||this.currentStencilSource===c.id||!o.isTileClipped()||!A||A.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let L=!1;for(const j of A)if(this._tileClippingMaskIDs[j.key]===void 0){L=!0;break}if(!L)return}this.currentStencilSource=c.id;const R=this.context,C=R.gl;this.nextStencilID+A.length>256&&this.clearStencil(),R.setColorMode(br.disabled),R.setDepthMode(ir.disabled);const P=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const L of A){const j=c.getTile(L),H=this._tileClippingMaskIDs[L.key]=this.nextStencilID++,{tileBoundsBuffer:W,tileBoundsIndexBuffer:te,tileBoundsSegments:ae}=this.getTileBoundsBuffers(j);P.draw(this,C.TRIANGLES,ir.disabled,new Rr({func:C.ALWAYS,mask:0},H,255,C.KEEP,C.KEEP,C.REPLACE),br.disabled,vr.disabled,Gc(L.projMatrix),"$clipping",W,te,ae)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const o=this.nextStencilID++,c=this.context.gl;return new Rr({func:c.NOTEQUAL,mask:255},o,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(o){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(o);const c=this.context.gl;return new Rr({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(o){const c=this.context.gl,A=o.sort((P,L)=>L.overscaledZ-P.overscaledZ),R=A[A.length-1].overscaledZ,C=A[0].overscaledZ-R+1;if(C>1){this.currentStencilSource=void 0,this.nextStencilID+C>256&&this.clearStencil();const P={};for(let L=0;L<C;L++)P[L+R]=new Rr({func:c.GEQUAL,mask:255},L+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=C,[P,A]}return[{[R]:Rr.disabled},A]}colorModeForRenderPass(){const o=this.context.gl;return this._showOverdrawInspector?new br([o.CONSTANT_COLOR,o.ONE,o.CONSTANT_COLOR,o.ONE],new n.al(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?br.unblended:br.alphaBlended}colorModeForDrapableLayerRenderPass(o){const c=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new br([c.ONE,c.ONE_MINUS_SRC_ALPHA,c.CONSTANT_ALPHA,c.ONE_MINUS_SRC_ALPHA],new n.al(0,0,0,o===void 0?0:o),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(o,c,A,R=!1){if(this.depthOcclusion)return new ir(this.context.gl.GREATER,ir.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!R)return ir.disabled;const C=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new ir(A||this.context.gl.LEQUAL,c,[C,C])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const o=this.context.gl,c=Math.ceil(this.width),A=Math.ceil(this.height),R=this.context.bindFramebuffer.get(),C=o.getParameter(o.TEXTURE_BINDING_2D);this.depthFBO&&this.depthFBO.width===c&&this.depthFBO.height===A||(this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),c!==0&&A!==0&&(this.depthFBO=new kn(this.context,c,A,!1,"texture"),this.depthTexture=new n.T(this.context,{width:c,height:A,data:null},o.DEPTH24_STENCIL8),this.depthFBO.depthAttachment.set(this.depthTexture.texture))),this.context.bindFramebuffer.set(R),o.bindTexture(o.TEXTURE_2D,C),this.depthFBO&&(o.bindFramebuffer(o.READ_FRAMEBUFFER,null),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,this.depthFBO.framebuffer),o.blitFramebuffer(0,0,c,A,0,0,c,A,o.DEPTH_BUFFER_BIT,o.NEAREST),o.bindFramebuffer(o.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(this._dt===0?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce((o,c)=>o+c/this._fpsHistory.length,0))}render(o,c){const A=n.q.now();this._dt=A-this._timeStamp,this._timeStamp=A,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=o.map.repaint,this.style=o,this.options=c;const R=this.style._mergedLayers,C=!(!this.terrain||!this.terrain.enabled),P=()=>this.style._getOrder(C).filter(It=>{const ia=R[It];return!(ia.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[ia.type]});let L=P(),j=!1,H=!1;for(const It of L){const ia=R[It];ia.type==="circle"&&(j=!0),ia.type==="symbol"&&(ia.hasInitialOcclusionOpacityProperties?H=!0:j=!0)}let W=L.map(It=>R[It]);const te=this.style._mergedSourceCaches;this.imageManager=o.imageManager,this.modelManager=o.modelManager,this.symbolFadeChange=o.placement.symbolFadeChange(n.q.now()),this.imageManager.beginFrame();let ae=0,ce=!1;for(const It in te){const ia=te[It];ia.used&&(ia.prepare(this.context),ia.getSource().usedInConflation&&++ae)}let Te=!1;for(const It of W)It.isHidden(this.transform.zoom)||(It.type==="clip"&&(Te=!0),this.prepareLayer(It));const ve={},Ee={},Ve={},Be={},et={};for(const It in te){const ia=te[It];ve[It]=ia.getVisibleCoordinates(),Ee[It]=ve[It].slice().reverse(),Ve[It]=ia.getVisibleCoordinates(!0).reverse(),Be[It]=ia.getShadowCasterCoordinates(),et[It]=ia.sortCoordinatesByDistance(ve[It])}const Xe=It=>{const ia=this.style.getLayerSourceCache(It);return ia&&ia.used?ia.getSource():null};if(ae||Te||this._clippingActiveLastFrame){const It=[],ia=[];let zt=0;for(const sa of W)this.isSourceForClippingOrConflation(sa,Xe(sa))&&(It.push(sa),ia.push(zt)),zt++;if(It&&(Te||It.length>1)||this._clippingActiveLastFrame){Te=!1;const sa=[];for(let ea=0;ea<It.length;ea++){const da=It[ea],Kt=ia[ea],pa=this.style.getLayerSourceCache(da);if(!pa||!pa.used||!pa.getSource().usedInConflation&&da.type!=="clip")continue;let Ia=n.dA,La=n.by.None;const Ea=[];let sr=!0;if(da.type==="clip"){Ia=Kt;for(const Fr of da.layout.get("clip-layer-types"))La|=Fr==="model"?n.by.Model:Fr==="symbol"?n.by.Symbol:n.by.FillExtrusion;for(const Fr of da.layout.get("clip-layer-scope"))Ea.push(Fr);da.isHidden(this.transform.zoom)?sr=!1:Te=!0}sr&&sa.push({layer:da.fqid,cache:pa,order:Ia,clipMask:La,clipScope:Ea})}this.replacementSource.setSources(sa),ce=!0}}this._clippingActiveLastFrame=Te,ce||this.replacementSource.clear(),this.conflationActive=ce,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let It=0;It<W.length;It++){const ia=W[It],zt=ia.cutoffRange();if(this.longestCutoffRange=Math.max(zt,this.longestCutoffRange),zt>0){const sa=Xe(ia);sa&&(this.minCutoffZoom=Math.max(sa.minzoom,this.minCutoffZoom)),ia.minzoom&&(this.minCutoffZoom=Math.max(ia.minzoom,this.minCutoffZoom))}ia.is3D(C)&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=It),this._lastOcclusionLayer=It)}const ht=this.style&&this.style.fog;ht?(this._fogVisible=ht.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=ht.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(Ve),this.opaquePassCutoff=0,L=P(),W=L.map(It=>R[It]));const st=this._shadowRenderer;if(st){st.updateShadowParameters(this.transform,this.style.directionalLight);for(const It in te)for(const ia of ve[It]){let zt={min:0,max:0};this.terrain&&(zt=this.terrain.getMinMaxForTile(ia)||zt),st.addShadowReceiver(ia.toUnwrapped(),zt.min,zt.max)}}this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new n.dz(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new Xf(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0);const ot=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.snow),lt=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.rain);if(ot&&!this._snow&&(this._snow=new jh(this)),!ot&&this._snow&&(this._snow.destroy(),delete this._snow),lt&&!this._rain&&(this._rain=new yh(this)),!lt&&this._rain&&(this._rain.destroy(),delete this._rain),this._snow&&this._snow.update(this),this._rain&&this._rain.update(this),!Jt.has(this.context.gl))return;this.renderPass="offscreen";for(const It of W){const ia=o.getLayerSourceCache(It);if(!It.hasOffscreenPass()||It.isHidden(this.transform.zoom))continue;const zt=ia?Ee[ia.id]:void 0;(It.type==="custom"||It.type==="raster"||It.type==="raster-particle"||It.isSky()||zt&&zt.length)&&this.renderLayer(this,ia,It,zt)}this.depthRangeFor3D=[0,1-(W.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,Be)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const gt=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),Tt=(()=>{if(c.showOverdrawInspector)return n.al.black;const It=this.style.fog;if(It&&this.transform.projection.supportsFog){const ia=this.style.getLut(It.scope);if(!gt){const zt=It.properties.get("color-use-theme")==="none",sa=It.properties.get("color").toRenderColor(zt?null:ia).toArray01();return new n.al(...sa)}if(gt){const zt=It.properties.get("space-color-use-theme")==="none",sa=It.properties.get("space-color").toRenderColor(zt?null:ia).toArray01();return new n.al(...sa)}}return n.al.transparent})();if(this.context.clear({color:Tt,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&gt&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=L.length-1;this.currentLayer>=0;this.currentLayer--){const It=W[this.currentLayer],ia=o.getLayerSourceCache(It);if(It.isSky())continue;const zt=ia?(It.is3D(C)?et:Ee)[ia.id]:void 0;this._renderTileClippingMasks(It,ia,zt),this.renderLayer(this,ia,It,zt)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&gt&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||n.ag(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<L.length;this.currentLayer++){const It=W[this.currentLayer],ia=o.getLayerSourceCache(It);It.isSky()&&this.renderLayer(this,ia,It,ia?Ee[ia.id]:void 0)}function Yt(It,ia){let zt;return ia&&(zt=(It.type==="symbol"?Ve:It.is3D(C)?et:Ee)[ia.id]),zt}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<L.length;){const It=W[this.currentLayer];if(It.type==="raster"||It.type==="raster-particle"){const ia=o.getLayerSourceCache(It);this.renderLayer(this,ia,It,Yt(It,ia))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let Lt=0;st&&(Lt=st.getShadowCastingLayerCount());let aa=!1,ua=-1;for(let It=0;It<L.length;++It){const ia=W[It];ia.isHidden(this.transform.zoom)||ia.is3D(C)&&(ua=It)}H&&ua===-1&&(j=!0);let Sa=!1;for(;this.currentLayer<L.length;){const It=W[this.currentLayer],ia=o.getLayerSourceCache(It);if(It.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(It)){if(It.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(!Sa&&It.is3D(C)&&!C){const zt=this.currentLayer,sa=ea=>{for(this.currentLayer=0;this.currentLayer<W.length;this.currentLayer++){const da=W[this.currentLayer];if(Gm[da.type]){const Kt=this.style.getLayerSourceCache(da);Gm[da.type](this,Kt,da,Yt(da,Kt),ea)}}};sa("initialize"),sa("reset"),this.currentLayer=zt,Sa=!0}if(j&&!aa&&this.terrain&&!this.transform.isOrthographic&&(aa=!0,this.blitDepth()),H&&ua!==-1&&this.currentLayer===ua+1&&!this.transform.isOrthographic&&this.blitDepth(),this.terrain||this._renderTileClippingMasks(It,ia,ia?ve[ia.id]:void 0),this.renderLayer(this,ia,It,Yt(It,ia)),!this.terrain&&st&&Lt>0&&It.hasShadowPass()&&--Lt==0&&(st.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const zt=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=zt;this.currentLayer++){const sa=W[this.currentLayer];if(!sa.hasLightBeamPass())continue;const ea=o.getLayerSourceCache(sa);this.renderLayer(this,ea,sa,ea?Ee[ea.id]:void 0)}this.currentLayer=zt,this.renderPass="translucent"}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const zt=this.currentLayer;this.depthOcclusion=!0;for(const sa of this.layersWithOcclusionOpacity){this.currentLayer=sa;const ea=W[this.currentLayer],da=o.getLayerSourceCache(ea),Kt=da?Ee[da.id]:void 0;this.terrain||this._renderTileClippingMasks(ea,da,da?ve[da.id]:void 0),this.renderLayer(this,da,ea,Kt)}this.depthOcclusion=!1,this.currentLayer=zt,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this._snow&&this._snow.draw(this),this._rain&&this._rain.draw(this),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let It=null;W.forEach(ia=>{const zt=o.getLayerSourceCache(ia);zt&&!ia.isHidden(this.transform.zoom)&&zt.getVisibleCoordinates().length&&(!It||It.getSource().maxzoom<zt.getSource().maxzoom)&&(It=zt)}),It&&this.options.showTileBoundaries&&gh.debug(this,It,It.getVisibleCoordinates(),n.al.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&gh.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new n.al(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(It){const ia=It.transform.padding;Bh(It,It.transform.height-(ia.top||0),3,qu),Bh(It,ia.bottom||0,3,Um),qc(It,ia.left||0,3,Wf),qc(It,It.transform.width-(ia.right||0),3,km);const zt=It.transform.centerPoint;(function(sa,ea,da,Kt){Hc(sa,ea-1,da-10,2,20,Kt),Hc(sa,ea-10,da-1,20,2,Kt)})(It,zt.x,It.transform.height-zt.y,fh)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),ce||(this.conflationActive=!1)}prepareLayer(o){this.gpuTimingStart(o);const{unsupportedLayers:c}=this.transform.projection,A=!c||!c.includes(o.type);if(kd[o.type]&&(A||this.terrain&&o.type==="custom")){const R=this.style.getLayerSourceCache(o);kd[o.type](o,R,this)}this.gpuTimingEnd()}renderLayer(o,c,A,R){A.isHidden(this.transform.zoom)||(A.type==="background"||A.type==="sky"||A.type==="custom"||A.type==="model"||A.type==="raster"||A.type==="raster-particle"||R&&R.length)&&(this.id=A.id,this.gpuTimingStart(A),o.transform.projection.unsupportedLayers&&o.transform.projection.unsupportedLayers.includes(A.type)&&(!o.terrain||A.type!=="custom")||A.type==="clip"||gh[A.type](o,c,A,R,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(o){if(!this.options.gpuTiming)return;const c=this.context.extTimerQuery,A=this.context.gl;let R=this.gpuTimers[o.id];R||(R=this.gpuTimers[o.id]={calls:0,cpuTime:0,query:A.createQuery()}),R.calls++,A.beginQuery(c.TIME_ELAPSED_EXT,R.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const o=this.context.extTimerQuery,c=this.context.gl,A=c.createQuery();this.deferredRenderGpuTimeQueries.push(A),c.beginQuery(o.TIME_ELAPSED_EXT,A)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const o=this.gpuTimers;return this.gpuTimers={},o}collectDeferredRenderGpuQueries(){const o=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],o}queryGpuTimers(o){const c={};for(const A in o){const R=o[A],C=this.context.extTimerQuery,P=C.getQueryParameter(R.query,this.context.gl.QUERY_RESULT)/1e6;C.deleteQueryEXT(R.query),c[A]=P}return c}queryGpuTimeDeferredRender(o){if(!this.options.gpuTimingDeferredRender)return 0;const c=this.context.gl;let A=0;for(const R of o)A+=c.getQueryParameter(R,c.QUERY_RESULT)/1e6,c.deleteQuery(R);return A}translatePosMatrix(o,c,A,R,C){if(!A[0]&&!A[1])return o;const P=C?R==="map"?this.transform.angle:0:R==="viewport"?-this.transform.angle:0;if(P){const H=Math.sin(P),W=Math.cos(P);A=[A[0]*W-A[1]*H,A[0]*H+A[1]*W]}const L=[C?A[0]:n.at(c,A[0],this.transform.zoom),C?A[1]:n.at(c,A[1],this.transform.zoom),0],j=new Float32Array(16);return n.ad.mat4.translate(j,o,L),j}saveTileTexture(o){const c=o.size[0],A=this._tileTextures[c];A?A.push(o):this._tileTextures[c]=[o]}getTileTexture(o){const c=this._tileTextures[o];return c&&c.length>0?c.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(o,c,A){const R=A===void 0?this.terrain&&this.terrain.renderingToTexture:A,C=[];return this.style&&this.style.enable3dLights()&&(o==="globeRaster"||o==="terrainRaster"?(C.push("LIGHTING_3D_MODE"),C.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):R||C.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"&&(this._shadowMapDebug||C.push("DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(C.push("TERRAIN"),this.linearFloatFilteringSupported()&&C.push("TERRAIN_DEM_FLOAT_FORMAT")),this.transform.projection.name==="globe"&&C.push("GLOBE"),!this._fogVisible||R||c!==void 0&&!c||C.push("FOG","FOG_DITHERING"),R&&C.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&C.push("OVERDRAW_INSPECTOR"),C}getOrCreateProgram(o,c){this.cache=this.cache||{};const A=c&&c.defines||[],R=c&&c.config,C=this.currentGlobalDefines(o,c&&c.overrideFog,c&&c.overrideRtt).concat(A),P=Fm.cacheKey(el[o],o,C,R);return this.cache[P]||(this.cache[P]=new Fm(this.context,o,el[o],R,xi[o],C)),this.cache[P]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new n.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA8))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),this.emptyDepthTexture&&this.emptyDepthTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(o,c){if(this.style.enable3dLights()){const A=this.style.directionalLight,R=this.style.ambientLight;if(A&&R){const C=((P,L,j)=>{const H=P.properties.get("direction"),W=P.properties.get("color-use-theme")==="none",te=P.properties.get("color").toRenderColor(W?null:j.getLut(P.scope)).toArray01(),ae=P.properties.get("intensity"),ce=L.properties.get("color-use-theme")==="none",Te=L.properties.get("color").toRenderColor(ce?null:j.getLut(L.scope)).toArray01(),ve=L.properties.get("intensity"),Ee=[H.x,H.y,H.z],Ve=n.cN(Te,ve),Be=n.cN(te,ae);return{u_lighting_ambient_color:Ve,u_lighting_directional_dir:Ee,u_lighting_directional_color:Be,u_ground_radiance:Zc(Ee,Be,Ve)}})(A,R,this.style);c.setLightsUniformValues(o,C)}}}uploadCommonUniforms(o,c,A,R,C){if(this.uploadCommonLightUniforms(o,c),this.terrain&&this.terrain.renderingToTexture)return;const P=this.style.fog;if(P){const L=P.getOpacity(this.transform.pitch),j=((H,W,te,ae,ce,Te,ve,Ee,Ve,Be,et,Xe)=>{const ht=H.transform,st=W.properties.get("color-use-theme")==="none",ot=W.properties.get("color").toRenderColor(st?null:H.style.getLut(W.scope)).toArray01();ot[3]=ae;const lt=H.frameCounter/1e3%1,[gt,Tt]=W.properties.get("vertical-range");return{u_fog_matrix:te?ht.calculateFogTileMatrix(te):Xe||H.identityMat,u_fog_range:W.getFovAdjustedRange(ht._fov),u_fog_color:ot,u_fog_horizon_blend:W.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(gt,Tt),Tt],u_fog_temporal_offset:lt,u_frustum_tl:ce,u_frustum_tr:Te,u_frustum_br:ve,u_frustum_bl:Ee,u_globe_pos:Ve,u_globe_radius:Be,u_viewport:et,u_globe_transition:n.ag(ht.zoom),u_is_globe:+(ht.projection.name==="globe")}})(this,P,A,L,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*n.q.devicePixelRatio,this.transform.height*n.q.devicePixelRatio],R);c.setFogUniformValues(o,j)}C&&c.setCutoffUniformValues(o,C.uniformValues)}setTileLoadedFlag(o){this.tileLoaded=o}saveCanvasCopy(){const o=this.canvasCopy();o&&(this.frameCopies.push(o),this.tileLoaded=!1)}canvasCopy(){const o=this.context.gl,c=o.createTexture();return o.bindTexture(o.TEXTURE_2D,c),o.copyTexImage2D(o.TEXTURE_2D,0,o.RGBA,0,0,o.drawingBufferWidth,o.drawingBufferHeight,0),c}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const o=this.style&&this.style.fog;return!!o&&o.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const o=this._backgroundTiles,c=this._backgroundTiles={},A=this.transform.coveringTiles({tileSize:512});for(const R of A)c[R.key]=o[R.key]||new Zl(R,512,this.transform.tileZoom,this);return c}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(o,c){return!(!o.is3D(!(!this.terrain||!this.terrain.enabled))||o.type!=="clip"&&(o.minzoom&&o.minzoom>this.transform.zoom||(this.style._clipLayerPresent||o.sourceLayer!=="building")&&(!c||c.type!=="batched-model")))}isTileAffectedByFog(o){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let c=this._cachedTileFogOpacities[o.key];return c||(this._cachedTileFogOpacities[o.key]=c=this.style.fog.getOpacityForTile(o)),c[0]>=Ma||c[1]>=Ma}setupDepthForOcclusion(o,c,A){const R=this.context,C=R.gl,P=!!A;var L;A||(A={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0}),R.activeTexture.set(C.TEXTURE3),o&&this.depthFBO&&this.depthTexture?(this.depthTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE),A.u_depth_size_inv=[1/this.depthFBO.width,1/this.depthFBO.height],A.u_depth_range_unpack=[2/((L=this.depthRangeFor3D)[1]-L[0]),-1-2*L[0]/(L[1]-L[0])],A.u_occluder_half_size=.5*this.occlusionParams.occluderSize,A.u_occlusion_depth_offset=this.occlusionParams.depthOffset):this.emptyDepthTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE),R.activeTexture.set(C.TEXTURE0),P||c.setTerrainUniformValues(R,A)}}function jm(g,o){let c=!1,A=null;const R=()=>{A=null,c&&(g(),A=setTimeout(R,o),c=!1)};return()=>(c=!0,A||R(),A)}class Dy{constructor(o){this._hashName=o&&encodeURIComponent(o),n.aQ(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=jm(this._updateHashUnthrottled.bind(this),300)}addTo(o){return this._map=o,window.addEventListener("hashchange",this._onHashChange,!1),o.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const o=this._map;if(!o)return"";const c=Wg(o);if(this._hashName){const A=this._hashName;let R=!1;const C=location.hash.slice(1).split("&").map(P=>{const L=P.split("=")[0];return L===A?(R=!0,`${L}=${c}`):P}).filter(P=>P);return R||C.push(`${A}=${c}`),`#${C.join("&")}`}return`#${c}`}_getCurrentHash(){const o=location.hash.replace("#","");if(this._hashName){let c;return o.split("&").map(A=>A.split("=")).forEach(A=>{A[0]===this._hashName&&(c=A)}),(c&&c[1]||"").split("/")}return o.split("/")}_onHashChange(){const o=this._map;if(!o)return!1;const c=this._getCurrentHash();if(c.length>=3&&!c.some(A=>isNaN(A))){const A=o.dragRotate.isEnabled()&&o.touchZoomRotate.isEnabled()?+(c[3]||0):o.getBearing();return o.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:A,pitch:+(c[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function Wg(g,o){const c=g.getCenter(),A=Math.round(100*g.getZoom())/100,R=Math.ceil((A*Math.LN2+Math.log(512/360/.5))/Math.LN10),C=Math.pow(10,R),P=Math.round(c.lng*C)/C,L=Math.round(c.lat*C)/C,j=g.getBearing(),H=g.getPitch();let W=o?`/${P}/${L}/${A}`:`${A}/${L}/${P}`;return(j||H)&&(W+="/"+Math.round(10*j)/10),H&&(W+=`/${Math.round(H)}`),W}const Kp={linearity:.3,easing:n.dB(0,0,.3,1)},ol=n.l({deceleration:2500,maxSpeed:1400},Kp),yl=n.l({deceleration:20,maxSpeed:1400},Kp),Yg=n.l({deceleration:1e3,maxSpeed:360},Kp),Xg=n.l({deceleration:1e3,maxSpeed:90},Kp);class Jg{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:n.q.now(),settings:o})}_drainInertiaBuffer(){const o=this._inertiaBuffer,c=n.q.now();for(;o.length>0&&c-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const c={zoom:0,bearing:0,pitch:0,pan:new n.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:C}of this._inertiaBuffer)c.zoom+=C.zoomDelta||0,c.bearing+=C.bearingDelta||0,c.pitch+=C.pitchDelta||0,C.panDelta&&c.pan._add(C.panDelta),C.around&&(c.around=C.around),C.pinchAround&&(c.pinchAround=C.pinchAround);const A=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,R={};if(c.pan.mag()){const C=Yp(c.pan.mag(),A,n.l({},ol,o||{}));R.offset=c.pan.mult(C.amount/c.pan.mag()),R.center=this._map.transform.center,Wp(R,C)}if(c.zoom){const C=Yp(c.zoom,A,yl);R.zoom=this._map.transform.zoom+C.amount,Wp(R,C)}if(c.bearing){const C=Yp(c.bearing,A,Yg);R.bearing=this._map.transform.bearing+n.ay(C.amount,-179,179),Wp(R,C)}if(c.pitch){const C=Yp(c.pitch,A,Xg);R.pitch=this._map.transform.pitch+C.amount,Wp(R,C)}if(R.zoom||R.bearing){const C=c.pinchAround===void 0?c.around:c.pinchAround;R.around=C?this._map.unproject(C):this._map.getCenter()}return this.clear(),R.noMoveStart=!0,R}}function Wp(g,o){(!g.duration||g.duration<o.duration)&&(g.duration=o.duration,g.easing=o.easing)}function Yp(g,o,c){const{maxSpeed:A,linearity:R,deceleration:C}=c,P=n.ay(g*R/(o/1e3),-A,A),L=Math.abs(P)/(C*R);return{easing:c.easing,duration:1e3*L,amount:P*(L/2)}}class gl extends n.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,c,A,R={}){const C=Re(c.getCanvasContainer(),A),P=c.unproject(C);super(o,n.l({point:C,lngLat:P,originalEvent:A},R)),this._defaultPrevented=!1,this.target=c}}class ap extends n.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,c,A){const R=o==="touchend"?A.changedTouches:A.touches,C=be(c.getCanvasContainer(),R),P=C.map(j=>c.unproject(j)),L=C.reduce((j,H,W,te)=>j.add(H.div(te.length)),new n.P(0,0));super(o,{points:C,point:L,lngLats:P,lngLat:c.unproject(L),originalEvent:A}),this._defaultPrevented=!1}}class Qg extends n.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,c){super("wheel",{originalEvent:c}),this._defaultPrevented=!1}}class eA{constructor(o,c){this._map=o,this._clickTolerance=c.clickTolerance}reset(){this._mousedownPos=void 0}wheel(o){return this._firePreventable(new Qg(this._map,o))}mousedown(o,c){return this._mousedownPos=c,this._firePreventable(new gl(o.type,this._map,o))}mouseup(o){this._map.fire(new gl(o.type,this._map,o))}preclick(o){const c=n.l({},o);c.type="preclick",this._map.fire(new gl(c.type,this._map,c))}click(o,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||(this.preclick(o),this._map.fire(new gl(o.type,this._map,o)))}dblclick(o){return this._firePreventable(new gl(o.type,this._map,o))}mouseover(o){this._map.fire(new gl(o.type,this._map,o))}mouseout(o){this._map.fire(new gl(o.type,this._map,o))}touchstart(o){return this._firePreventable(new ap(o.type,this._map,o))}touchmove(o){this._map.fire(new ap(o.type,this._map,o))}touchend(o){this._map.fire(new ap(o.type,this._map,o))}touchcancel(o){this._map.fire(new ap(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class P0{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(o){this._map.fire(new gl(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new gl("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._map.fire(new gl(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class tA{constructor(o,c){this._map=o,this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,c){this.isEnabled()&&o.shiftKey&&o.button===0&&(ge(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(o,c){if(!this._active)return;const A=c,R=this._startPos,C=this._lastPos;if(!R||!C||C.equals(A)||!this._box&&A.dist(R)<this._clickTolerance)return;this._lastPos=A,this._box||(this._box=q("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",o));const P=Math.min(R.x,A.x),L=Math.max(R.x,A.x),j=Math.min(R.y,A.y),H=Math.max(R.y,A.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${P}px,${j}px)`,this._box.style.width=L-P+"px",this._box.style.height=H-j+"px")})}mouseupWindow(o,c){if(!this._active)return;const A=this._startPos,R=c;if(A&&o.button===0){if(this.reset(),me(),A.x!==R.x||A.y!==R.y)return this._map.fire(new n.A("boxzoomend",{originalEvent:o})),{cameraAnimation:C=>C.fitScreenCoordinates(A,R,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",o)}}keydown(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),he(),delete this._startPos,delete this._lastPos}_fireEvent(o,c){return this._map.fire(new n.A(o,{originalEvent:c}))}}function Di(g,o){const c={};for(let A=0;A<g.length;A++)c[g[A].identifier]=o[A];return c}class My{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(o,c,A){(this.centroid||A.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=o.timeStamp),A.length===this.numTouches&&(this.centroid=function(R){const C=new n.P(0,0);for(const P of R)C._add(P);return C.div(R.length)}(c),this.touches=Di(A,c)))}touchmove(o,c,A){if(this.aborted||!this.centroid)return;const R=Di(A,c);for(const C in this.touches){const P=R[C];(!P||P.dist(this.touches[C])>30)&&(this.aborted=!0)}}touchend(o,c,A){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),A.length===0){const R=!this.aborted&&this.centroid;if(this.reset(),R)return R}}}class Iy{constructor(o){this.singleTap=new My(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(o,c,A){this.singleTap.touchstart(o,c,A)}touchmove(o,c,A){this.singleTap.touchmove(o,c,A)}touchend(o,c,A){const R=this.singleTap.touchend(o,c,A);if(R){const C=o.timeStamp-this.lastTime<500,P=!this.lastTap||this.lastTap.dist(R)<30;if(C&&P||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=R,this.count===this.numTaps)return this.reset(),R}}}class aA{constructor(){this._zoomIn=new Iy({numTouches:1,numTaps:2}),this._zoomOut=new Iy({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,c,A){this._zoomIn.touchstart(o,c,A),this._zoomOut.touchstart(o,c,A)}touchmove(o,c,A){this._zoomIn.touchmove(o,c,A),this._zoomOut.touchmove(o,c,A)}touchend(o,c,A){const R=this._zoomIn.touchend(o,c,A),C=this._zoomOut.touchend(o,c,A);return R?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:P.getZoom()+1,around:P.unproject(R)},{originalEvent:o})}):C?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:P.getZoom()-1,around:P.unproject(C)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const rp={0:1,2:2},Zm={Control:"ctrlKey",Alt:"altKey",Shift:"shiftKey",Meta:"metaKey"};class Xp{constructor(o){this.reset(),this._clickTolerance=o.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(o,c){return!1}_move(o,c){return{}}mousedown(o,c){if(this._lastPoint)return;const A=De(o);this._correctButton(o,A)&&(this._lastPoint=c,this._eventButton=A)}mousemoveWindow(o,c){const A=this._lastPoint;if(A){if(o.preventDefault(),this._eventButton!=null&&function(R,C){const P=rp[C];return R.buttons===void 0||(R.buttons&P)!==P}(o,this._eventButton))this.reset();else if(this._moved||!(c.dist(A)<this._clickTolerance))return this._moved=!0,this._lastPoint=c,this._move(A,c)}}mouseupWindow(o){this._lastPoint&&De(o)===this._eventButton&&(this._moved&&me(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Jp extends Xp{mousedown(o,c){super.mousedown(o,c),this._lastPoint&&(this._active=!0)}_correctButton(o,c){return c===0&&!o.ctrlKey}_move(o,c){return{around:c,panDelta:c.sub(o)}}}class Bd extends Xp{constructor(o){super(o),this._pitchRotateKey=o.pitchRotateKey?Zm[o.pitchRotateKey]:void 0}_correctButton(o,c){return this._pitchRotateKey?c===0&&o[this._pitchRotateKey]:c===0&&o.ctrlKey||c===2}_move(o,c){const A=.8*(c.x-o.x);if(A)return this._active=!0,{bearingDelta:A}}contextmenu(o){this._pitchRotateKey||o.preventDefault()}}class vc extends Xp{constructor(o){super(o),this._pitchRotateKey=o.pitchRotateKey?Zm[o.pitchRotateKey]:void 0}_correctButton(o,c){return this._pitchRotateKey?c===0&&o[this._pitchRotateKey]:c===0&&o.ctrlKey||c===2}_move(o,c){const A=-.5*(c.y-o.y);if(A)return this._active=!0,{pitchDelta:A}}contextmenu(o){this._pitchRotateKey||o.preventDefault()}}class ms{constructor(o,c){this._map=o,this._el=o.getCanvasContainer(),this._minTouches=1,this._clickTolerance=c.clickTolerance||1,this.reset(),n.aQ(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new n.P(0,0)}touchstart(o,c,A){return this._calculateTransform(o,c,A)}touchmove(o,c,A){if(this._active&&!(A.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(A.length===1&&!n.dC())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return o.cancelable&&o.preventDefault(),this._calculateTransform(o,c,A)}}touchend(o,c,A){this._calculateTransform(o,c,A),this._active&&A.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,c,A){A.length>0&&(this._active=!0);const R=Di(A,c),C=new n.P(0,0),P=new n.P(0,0);let L=0;for(const H in R){const W=R[H],te=this._touches[H];te&&(C._add(W),P._add(W.sub(te)),L++,R[H]=W)}if(this._touches=R,L<this._minTouches||!P.mag())return;const j=P.div(L);return this._sum._add(j),this._sum.mag()<this._clickTolerance?void 0:{around:C.div(L),panDelta:j}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=q("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class Xc{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(o){}_move(o,c,A){return{}}touchstart(o,c,A){this._firstTwoTouches||A.length<2||(this._firstTwoTouches=[A[0].identifier,A[1].identifier],this._start([c[0],c[1]]))}touchmove(o,c,A){const R=this._firstTwoTouches;if(!R)return;o.preventDefault();const[C,P]=R,L=np(A,c,C),j=np(A,c,P);if(!L||!j)return;const H=this._aroundCenter?null:L.add(j).div(2);return this._move([L,j],H,o)}touchend(o,c,A){if(!this._firstTwoTouches)return;const[R,C]=this._firstTwoTouches,P=np(A,c,R),L=np(A,c,C);P&&L||(this._active&&me(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function np(g,o,c){for(let A=0;A<g.length;A++)if(g[A].identifier===c)return o[A]}function ip(g,o){return Math.log(g/o)/Math.LN2}class Rf extends Xc{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,c){const A=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(ip(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ip(this._distance,A),pinchAround:c}}}function Ah(g,o){return 180*g.angleWith(o)/Math.PI}class Jc extends Xc{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,c){const A=this._vector;if(this._vector=o[0].sub(o[1]),A&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Ah(this._vector,A),pinchAround:c}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());const c=25/(Math.PI*this._minDiameter)*360,A=this._startVector;if(!A)return!1;const R=Ah(o,A);return Math.abs(R)<c}}function Gd(g){return Math.abs(g.y)>Math.abs(g.x)}class rA extends Xc{constructor(o){super(),this._map=o}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(o){this._lastPoints=o,Gd(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,c,A){const R=this._lastPoints;if(!R)return;const C=o[0].sub(R[0]),P=o[1].sub(R[1]);return this._map._cooperativeGestures&&!n.dC()&&A.touches.length<3||(this._valid=this.gestureBeginsVertically(C,P,A.timeStamp),!this._valid)?void 0:(this._lastPoints=o,this._active=!0,{pitchDelta:(C.y+P.y)/2*-.5})}gestureBeginsVertically(o,c,A){if(this._valid!==void 0)return this._valid;const R=o.mag()>=2,C=c.mag()>=2;if(!R&&!C)return;if(!R||!C)return this._firstMove==null&&(this._firstMove=A),A-this._firstMove<100&&void 0;const P=o.y>0==c.y>0;return Gd(o)&&Gd(c)&&P}}const qm={panStep:100,bearingStep:15,pitchStep:10};class sp{constructor(){const o=qm;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let c=0,A=0,R=0,C=0,P=0;switch(o.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:o.shiftKey?A=-1:(o.preventDefault(),C=-1);break;case 39:o.shiftKey?A=1:(o.preventDefault(),C=1);break;case 38:o.shiftKey?R=1:(o.preventDefault(),P=-1);break;case 40:o.shiftKey?R=-1:(o.preventDefault(),P=1);break;default:return}return this._rotationDisabled&&(A=0,R=0),{cameraAnimation:L=>{const j=L.getZoom();L.easeTo({duration:300,easeId:"keyboardHandler",easing:Tf,zoom:c?Math.round(j)+c*(o.shiftKey?2:1):j,bearing:L.getBearing()+A*this._bearingStep,pitch:L.getPitch()+R*this._pitchStep,offset:[-C*this._panStep,-P*this._panStep],center:L.getCenter()},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Tf(g){return g*(2-g)}const wc=4.000244140625,Ks=1/450;class $u{constructor(o,c){this._map=o,this._el=o.getCanvasContainer(),this._handler=c,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Ks,n.aQ(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!o&&o.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(o){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(o.ctrlKey||o.metaKey||this.isZooming()||n.dC()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let c=o.deltaMode===WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY;const A=n.q.now(),R=A-(this._lastWheelEventTime||0);this._lastWheelEventTime=A,c!==0&&c%wc==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":R>400?(this._type=null,this._lastValue=c,this._timeout=window.setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(R*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),o.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=o,this._delta-=c,this._active||this._start(o)),o.preventDefault()}_onTimeout(o){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(o)}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=Re(this._el,o);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:c,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const o=this._map.transform;this._type==="wheel"&&o.projection.wrap&&(o._center.lng>=180||o._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const c=()=>o._terrainEnabled()&&this._aroundCoord?o.computeZoomRelativeTo(this._aroundCoord):o.zoom;if(this._delta!==0){const H=this._type==="wheel"&&Math.abs(this._delta)>wc?this._wheelZoomRate:this._defaultZoomRate;let W=2/(1+Math.exp(-Math.abs(this._delta*H)));this._delta<0&&W!==0&&(W=1/W);const te=c(),ae=Math.pow(2,te),ce=typeof this._targetZoom=="number"?o.zoomScale(this._targetZoom):ae;this._targetZoom=Math.min(o.maxZoom,Math.max(o.minZoom,o.scaleZoom(ce*W))),this._type==="wheel"&&(this._startZoom=te,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const A=typeof this._targetZoom=="number"?this._targetZoom:c(),R=this._startZoom,C=this._easing;let P,L=!1;if(this._type==="wheel"&&R&&C){const H=Math.min((n.q.now()-this._lastWheelEventTime)/200,1),W=C(H);P=n.ah(R,A,W),H<1?this._frameId||(this._frameId=!0):L=!0}else P=A,L=!0;this._active=!0,L&&(this._active=!1,this._finishTimeout=window.setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let j=P-c();return j*this._lastDelta<0&&(j=0),{noInertia:!0,needsRenderFrame:!L,zoomDelta:j,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let c=n.dD;if(this._prevEase){const A=this._prevEase,R=(n.q.now()-A.start)/A.duration,C=A.easing(R+.01)-A.easing(R),P=.27/Math.sqrt(C*C+1e-4)*.01,L=Math.sqrt(.0729-P*P);c=n.dB(P,L,.25,1)}return this._prevEase={start:n.q.now(),duration:o,easing:c},c}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=q("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class Zh{constructor(o,c){this._clickZoom=o,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ku{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(o,c){return o.preventDefault(),{cameraAnimation:A=>{A.easeTo({duration:300,zoom:A.getZoom()+(o.shiftKey?-1:1),around:A.unproject(c)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _h{constructor(){this._tap=new Iy({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(o,c,A){this._swipePoint||(this._tapTime&&o.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?A.length>0&&(this._swipePoint=c[0],this._swipeTouch=A[0].identifier):this._tap.touchstart(o,c,A))}touchmove(o,c,A){if(this._tapTime){if(this._swipePoint){if(A[0].identifier!==this._swipeTouch)return;const R=c[0],C=R.y-this._swipePoint.y;return this._swipePoint=R,o.preventDefault(),this._active=!0,{zoomDelta:C/128}}}else this._tap.touchmove(o,c,A)}touchend(o,c,A){this._tapTime?this._swipePoint&&A.length===0&&this.reset():this._tap.touchend(o,c,A)&&(this._tapTime=o.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class nA{constructor(o,c,A){this._el=o,this._mousePan=c,this._touchPan=A}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Sf{constructor(o,c,A){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=c,this._mousePitch=A}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Cf{constructor(o,c,A,R){this._el=o,this._touchZoom=c,this._touchRotate=A,this._tapDragZoom=R,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const bf=g=>g.zoom||g.drag||g.pitch||g.rotate;class Ly extends n.A{}class Al{constructor(){this.constants=[1,1,.01],this.radius=0}setup(o,c){const A=n.ad.vec3.sub([],c,o);this.radius=n.ad.vec3.length(A[2]<0?n.ad.vec3.div([],A,this.constants):[A[0],A[1],0])}projectRay(o){n.ad.vec3.div(o,o,this.constants),n.ad.vec3.normalize(o,o),n.ad.vec3.mul(o,o,this.constants);const c=n.ad.vec3.scale([],o,this.radius);if(c[2]>0){const A=n.ad.vec3.scale([],[0,0,1],n.ad.vec3.dot(c,[0,0,1])),R=n.ad.vec3.scale([],n.ad.vec3.normalize([],[c[0],c[1],0]),this.radius),C=n.ad.vec3.add([],c,n.ad.vec3.scale([],n.ad.vec3.sub([],n.ad.vec3.add([],R,A),c),2));c[0]=C[0],c[1]=C[1]}return c}}function vh(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta}class Qp{constructor(o,c){this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Jg(o),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Al,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(c),n.aQ(["handleEvent","handleWindowEvent"],this);const A=this._el;this._listeners=[[A,"touchstart",{passive:!0}],[A,"touchmove",{passive:!1}],[A,"touchend",void 0],[A,"touchcancel",void 0],[A,"mousedown",void 0],[A,"mousemove",void 0],[A,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[A,"mouseover",void 0],[A,"mouseout",void 0],[A,"dblclick",void 0],[A,"click",void 0],[A,"keydown",{capture:!1}],[A,"keyup",void 0],[A,"wheel",{passive:!1}],[A,"contextmenu",void 0],[window,"blur",void 0]];for(const[R,C,P]of this._listeners){const L=R===document?this.handleWindowEvent:this.handleEvent;R.addEventListener(C,L,P)}}destroy(){for(const[o,c,A]of this._listeners){const R=o===document?this.handleWindowEvent:this.handleEvent;o.removeEventListener(c,R,A)}}_addDefaultHandlers(o){const c=this._map,A=c.getCanvasContainer();this._add("mapEvent",new eA(c,o));const R=c.boxZoom=new tA(c,o);this._add("boxZoom",R);const C=new aA,P=new Ku;c.doubleClickZoom=new Zh(P,C),this._add("tapZoom",C),this._add("clickZoom",P);const L=new _h;this._add("tapDragZoom",L);const j=c.touchPitch=new rA(c);this._add("touchPitch",j);const H=new Bd(o),W=new vc(o);c.dragRotate=new Sf(o,H,W),this._add("mouseRotate",H,["mousePitch"]),this._add("mousePitch",W,["mouseRotate"]);const te=new Jp(o),ae=new ms(c,o);c.dragPan=new nA(A,te,ae),this._add("mousePan",te),this._add("touchPan",ae,["touchZoom","touchRotate"]);const ce=new Jc,Te=new Rf;c.touchZoomRotate=new Cf(A,Te,ce,L),this._add("touchRotate",ce,["touchPan","touchZoom"]),this._add("touchZoom",Te,["touchPan","touchRotate"]),this._add("blockableMapEvent",new P0(c));const ve=c.scrollZoom=new $u(c,this);this._add("scrollZoom",ve,["mousePan"]);const Ee=c.keyboard=new sp;this._add("keyboard",Ee);for(const Ve of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])o.interactive&&o[Ve]&&c[Ve].enable(o[Ve])}_add(o,c,A){this._handlers.push({handlerName:o,handler:c,allowed:A}),this._handlersById[o]=c}stop(o){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!bf(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(o,c,A){for(const R in o)if(R!==A&&(!c||c.indexOf(R)<0))return!0;return!1}handleWindowEvent(o){this.handleEvent(o,`${o.type}Window`)}_getMapTouches(o){const c=[];for(const A of o)this._el.contains(A.target)&&c.push(A);return c}handleEvent(o,c){this._updatingCamera=!0;const A=o.type==="renderFrame",R=A?void 0:o,C={needsRenderFrame:!1},P={},L={},j=o.touches?this._getMapTouches(o.touches):void 0,H=j?be(this._el,j):A?void 0:Re(this._el,o);for(const{handlerName:ae,handler:ce,allowed:Te}of this._handlers){if(!ce.isEnabled())continue;let ve;this._blockedByActive(L,Te,ae)?ce.reset():ce[c||o.type]&&(ve=ce[c||o.type](o,H,j),this.mergeHandlerResult(C,P,ve,ae,R),ve&&ve.needsRenderFrame&&this._triggerRenderFrame()),(ve||ce.isActive())&&(L[ae]=ce)}const W={};for(const ae in this._previousActiveHandlers)L[ae]||(W[ae]=R);this._previousActiveHandlers=L,(Object.keys(W).length||vh(C))&&(this._changes.push([C,P,W]),this._triggerRenderFrame()),(Object.keys(L).length||vh(C))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:te}=C;te&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],te(this._map))}mergeHandlerResult(o,c,A,R,C){if(!A)return;n.l(o,A);const P={handlerName:R,originalEvent:A.originalEvent||C};A.zoomDelta!==void 0&&(c.zoom=P),A.panDelta!==void 0&&(c.drag=P),A.pitchDelta!==void 0&&(c.pitch=P),A.bearingDelta!==void 0&&(c.rotate=P)}_applyChanges(){const o={},c={},A={};for(const[R,C,P]of this._changes)R.panDelta&&(o.panDelta=(o.panDelta||new n.P(0,0))._add(R.panDelta)),R.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+R.zoomDelta),R.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+R.bearingDelta),R.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+R.pitchDelta),R.around!==void 0&&(o.around=R.around),R.aroundCoord!==void 0&&(o.aroundCoord=R.aroundCoord),R.pinchAround!==void 0&&(o.pinchAround=R.pinchAround),R.noInertia&&(o.noInertia=R.noInertia),n.l(c,C),n.l(A,P);this._updateMapTransform(o,c,A),this._changes=[]}_updateMapTransform(o,c,A){const R=this._map,C=R.transform,P=Be=>[Be.x,Be.y,Be.z];if((Be=>{const et=this._eventsInProgress.drag;return et&&!this._handlersById[et.handlerName].isActive()})()&&!vh(o)){const Be=C.zoom;C.cameraElevationReference="sea",this._originalZoom!=null&&C._orthographicProjectionAtLowPitch&&C.projection.name!=="globe"&&C.pitch===0?(C.cameraElevationReference="ground",C.zoom=this._originalZoom):(C.recenterOnTerrain(),C.cameraElevationReference="ground"),Be!==C.zoom&&this._map._update(!0)}if(C._isCameraConstrained&&R._stop(!0),!vh(o))return void this._fireEvents(c,A,!0);let{panDelta:L,zoomDelta:j,bearingDelta:H,pitchDelta:W,around:te,aroundCoord:ae,pinchAround:ce}=o;C._isCameraConstrained&&(j>0&&(j=0),C._isCameraConstrained=!1),ce!==void 0&&(te=ce),(j||(Be=>c[Be]&&!this._eventsInProgress[Be])("drag"))&&te&&(this._dragOrigin=P(C.pointCoordinate3D(te)),this._originalZoom=C.zoom,this._trackingEllipsoid.setup(C._camera.position,this._dragOrigin)),C.cameraElevationReference="sea",R._stop(!0),te=te||R.transform.centerPoint,H&&(C.bearing+=H),W&&(C.pitch+=W),C._updateCameraState();const Te=[0,0,0];if(L)if(C.projection.name==="mercator"){const Be=this._trackingEllipsoid.projectRay(C.screenPointToMercatorRay(te).dir),et=this._trackingEllipsoid.projectRay(C.screenPointToMercatorRay(te.sub(L)).dir);Te[0]=et[0]-Be[0],Te[1]=et[1]-Be[1]}else{const Be=C.pointCoordinate(te);if(C.projection.name==="globe"){L=L.rotate(-C.angle);const et=C._pixelsPerMercatorPixel/C.worldSize;Te[0]=-L.x*n.dE(n.aT(Be.y))*et,Te[1]=-L.y*n.dE(C.center.lat)*et}else{const et=C.pointCoordinate(te.sub(L));Be&&et&&(Te[0]=et.x-Be.x,Te[1]=et.y-Be.y)}}const ve=C.zoom,Ee=[0,0,0];if(j){const Be=P(ae||C.pointCoordinate3D(te)),et={dir:n.ad.vec3.normalize([],n.ad.vec3.sub([],Be,C._camera.position))};if(et.dir[2]<0){const Xe=C.zoomDeltaToMovement(Be,j);n.ad.vec3.scale(Ee,et.dir,Xe)}}const Ve=n.ad.vec3.add(Te,Te,Ee);C._translateCameraConstrained(Ve),j&&Math.abs(C.zoom-ve)>1e-4&&C.recenterOnTerrain(),C.cameraElevationReference="ground",this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(c,A,!0)}_fireEvents(o,c,A){const R=bf(this._eventsInProgress),C=bf(o),P={};for(const W in o){const{originalEvent:te}=o[W];this._eventsInProgress[W]||(P[`${W}start`]=te),this._eventsInProgress[W]=o[W]}!R&&C&&this._fireEvent("movestart",C.originalEvent);for(const W in P)this._fireEvent(W,P[W]);C&&this._fireEvent("move",C.originalEvent);for(const W in o){const{originalEvent:te}=o[W];this._fireEvent(W,te)}const L={};let j;for(const W in this._eventsInProgress){const{handlerName:te,originalEvent:ae}=this._eventsInProgress[W];this._handlersById[te].isActive()||(delete this._eventsInProgress[W],j=c[te]||ae,L[`${W}end`]=j)}for(const W in L)this._fireEvent(W,L[W]);const H=bf(this._eventsInProgress);if(A&&(R||C)&&!H){this._updatingCamera=!0;const W=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),te=ae=>ae!==0&&-this._bearingSnap<ae&&ae<this._bearingSnap;W?(te(W.bearing||this._map.getBearing())&&(W.bearing=0),this._map.easeTo(W,{originalEvent:j})):(this._map.fire(new n.A("moveend",{originalEvent:j})),te(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(o,c){this._map.fire(new n.A(o,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{this._frameId=void 0,this.handleEvent(new Ly("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const iA="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class op extends n.E{constructor(o,c){super(),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=c.bearingSnap,this._respectPrefersReducedMotion=c.respectPrefersReducedMotion!==!1,n.aQ(["_renderFrameCallback"],this)}getCenter(){return new n.bO(this.transform.center.lng,this.transform.center.lat)}setCenter(o,c){return this.jumpTo({center:o},c)}panBy(o,c,A){return o=n.P.convert(o).mult(-1),this.panTo(this.transform.center,n.l({offset:o},c),A)}panTo(o,c,A){return this.easeTo(n.l({center:o},c),A)}getZoom(){return this.transform.zoom}setZoom(o,c){return this.jumpTo({zoom:o},c),this}zoomTo(o,c,A){return this.easeTo(n.l({zoom:o},c),A)}zoomIn(o,c){return this.zoomTo(this.getZoom()+1,o,c),this}zoomOut(o,c){return this.zoomTo(this.getZoom()-1,o,c),this}getBearing(){return this.transform.bearing}setBearing(o,c){return this.jumpTo({bearing:o},c),this}getPadding(){return this.transform.padding}setPadding(o,c){return this.jumpTo({padding:o},c),this}rotateTo(o,c,A){return this.easeTo(n.l({bearing:o},c),A)}resetNorth(o,c){return this.rotateTo(0,n.l({duration:1e3},o),c),this}resetNorthPitch(o,c){return this.easeTo(n.l({bearing:0,pitch:0,duration:1e3},o),c),this}snapToNorth(o,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,c):this}getPitch(){return this.transform.pitch}setPitch(o,c){return this.jumpTo({pitch:o},c),this}cameraForBounds(o,c){o=n.aB.convert(o);const A=c&&c.bearing||0,R=c&&c.pitch||0,C=o.getNorthWest(),P=o.getSouthEast();return this._cameraForBounds(this.transform,C,P,A,R,c)}_extendPadding(o){const c={top:0,right:0,bottom:0,left:0};return o==null?n.l({},c,this.transform.padding):typeof o=="number"?{top:o,bottom:o,right:o,left:o}:n.l({},c,o)}_extendCameraOptions(o){return(o=n.l({offset:[0,0],maxZoom:this.transform.maxZoom},o)).padding=this._extendPadding(o.padding),o}_minimumAABBFrustumDistance(o,c){const A=c.max[0]-c.min[0],R=c.max[1]-c.min[1];return A/R>o.aspect?A/(2*Math.tan(.5*o.fovX)*o.aspect):R/(2*Math.tan(.5*o.fovY)*o.aspect)}_cameraForBoundsOnGlobe(o,c,A,R,C,P){const L=o.clone(),j=this._extendCameraOptions(P);L.bearing=R,L.pitch=C;const H=n.bO.convert(c),W=n.bO.convert(A),te=.5*(H.lat+W.lat),ae=.5*(H.lng+W.lng),ce=n.dF(te,ae),Te=n.ad.vec3.normalize([],ce),ve=n.ad.vec3.normalize([],n.ad.vec3.cross([],Te,[0,1,0])),Ee=n.ad.vec3.cross([],ve,Te),Ve=[ve[0],ve[1],ve[2],0,Ee[0],Ee[1],Ee[2],0,Te[0],Te[1],Te[2],0,0,0,0,1],Be=[ce,n.dF(H.lat,H.lng),n.dF(W.lat,H.lng),n.dF(W.lat,W.lng),n.dF(H.lat,W.lng),n.dF(te,H.lng),n.dF(te,W.lng),n.dF(H.lat,ae),n.dF(W.lat,ae)];let et=n.ce.fromPoints(Be.map(ea=>[n.ad.vec3.dot(ve,ea),n.ad.vec3.dot(Ee,ea),n.ad.vec3.dot(Te,ea)]));const Xe=n.ad.vec3.transformMat4([],et.center,Ve);n.ad.vec3.squaredLength(Xe)===0&&n.ad.vec3.set(Xe,0,0,1),n.ad.vec3.normalize(Xe,Xe),n.ad.vec3.scale(Xe,Xe,n.az),L.center=n.dG(Xe);const ht=L.getWorldToCameraMatrix(),st=n.ad.mat4.invert(new Float64Array(16),ht);et=n.ce.applyTransform(et,n.ad.mat4.multiply([],ht,Ve));const ot=this._extendAABB(et,L,j,R);if(!ot)return void n.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");et=ot,n.ad.vec3.transformMat4(Xe,Xe,ht);const lt=.5*(et.max[2]-et.min[2]),gt=this._minimumAABBFrustumDistance(L,et),Tt=n.ad.vec3.scale([],[0,0,1],lt),Yt=n.ad.vec3.add(Tt,Xe,Tt),Lt=gt+(L.pitch===0?0:n.ad.vec3.distance(Xe,Yt)),aa=L.globeCenterInViewSpace,ua=n.ad.vec3.sub([],Xe,[aa[0],aa[1],aa[2]]);n.ad.vec3.normalize(ua,ua),n.ad.vec3.scale(ua,ua,Lt);const Sa=n.ad.vec3.add([],Xe,ua);n.ad.vec3.transformMat4(Sa,Sa,st);const It=n.dv/n.az,ia=n.ad.vec3.length(Sa),zt=n.bH(Math.max(ia*It-n.dv,Number.EPSILON),0),sa=Math.min(L.zoomFromMercatorZAdjusted(zt),j.maxZoom);return sa>.5*(n.c6+n.bY)?(L.setProjection({name:"mercator"}),L.zoom=sa,this._cameraForBounds(L,c,A,R,C,P)):{center:L.center,zoom:sa,bearing:R,pitch:C}}_extendAABB(o,c,A,R){const C=.5*((A.padding.left||0)+(A.padding.right||0)),P=.5*((A.padding.top||0)+(A.padding.bottom||0)),L=P,j=C,H=C,W=P,te=c.width-(j+H),ae=c.height-(L+W),ce=n.ad.vec3.sub([],o.max,o.min),Te=Math.min(te/ce[0],ae/ce[1]),ve=Math.min(c.scaleZoom(c.scale*Te),A.maxZoom);if(isNaN(ve))return null;const Ee=c.scale/c.zoomScale(ve),Ve=new n.ce([o.min[0]-j*Ee,o.min[1]-W*Ee,o.min[2]],[o.max[0]+H*Ee,o.max[1]+L*Ee,o.max[2]]),Be=(typeof A.offset.x=="number"&&typeof A.offset.y=="number"?new n.P(A.offset.x,A.offset.y):n.P.convert(A.offset)).rotate(-n.ak(R));return Ve.center[0]-=Be.x*Ee,Ve.center[1]+=Be.y*Ee,Ve}queryTerrainElevation(o,c){const A=this.transform.elevation;return A?(c=n.l({},{exaggerated:!0},c),A.getAtPoint(n.ac.fromLngLat(o),null,c.exaggerated)):null}_cameraForBounds(o,c,A,R,C,P){if(o.projection.name==="globe")return this._cameraForBoundsOnGlobe(o,c,A,R,C,P);const L=o.clone(),j=this._extendCameraOptions(P);L.bearing=R,L.pitch=C;const H=n.bO.convert(c),W=n.bO.convert(A),te=new n.bO(H.lng,W.lat),ae=new n.bO(W.lng,H.lat),ce=L.project(H),Te=L.project(W),ve=this.queryTerrainElevation(H),Ee=this.queryTerrainElevation(W),Ve=this.queryTerrainElevation(te),Be=this.queryTerrainElevation(ae),et=[[ce.x,ce.y,Math.min(ve||0,Ee||0,Ve||0,Be||0)],[Te.x,Te.y,Math.max(ve||0,Ee||0,Ve||0,Be||0)]];let Xe=n.ce.fromPoints(et);const ht=L.getWorldToCameraMatrix(),st=n.ad.mat4.invert(new Float64Array(16),ht);Xe=n.ce.applyTransform(Xe,ht);const ot=this._extendAABB(Xe,L,j,R);if(!ot)return void n.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");Xe=ot;const lt=.5*n.ad.vec3.sub([],Xe.max,Xe.min)[2],gt=this._minimumAABBFrustumDistance(L,Xe),Tt=[0,0,1,0];n.ad.vec4.transformMat4(Tt,Tt,ht),n.ad.vec4.normalize(Tt,Tt);const Yt=n.ad.vec3.scale([],Tt,gt+lt),Lt=n.ad.vec3.add([],Xe.center,Yt);n.ad.vec3.transformMat4(Xe.center,Xe.center,st),n.ad.vec3.transformMat4(Lt,Lt,st);const aa=L.unproject(new n.P(Xe.center[0],Xe.center[1])),ua=n.dH(L.projection,aa),Sa=Math.pow(2,ua),It=Math.min(L._zoomFromMercatorZ(Lt[2]*L.pixelsPerMeter*Sa/L.worldSize),j.maxZoom);return L.mercatorFromTransition&&It<.5*(n.c6+n.bY)?(L.setProjection({name:"globe"}),L.zoom=It,this._cameraForBounds(L,c,A,R,C,P)):{center:aa,zoom:It,bearing:R,pitch:C}}fitBounds(o,c,A){const R=this.cameraForBounds(o,c);return this._fitInternal(R,c,A)}fitScreenCoordinates(o,c,A,R,C){const P=n.P.convert(o),L=n.P.convert(c),j=new n.P(Math.min(P.x,L.x),Math.min(P.y,L.y)),H=new n.P(Math.max(P.x,L.x),Math.max(P.y,L.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(P,L))return this;const W=this.transform.pointLocation3D(j),te=this.transform.pointLocation3D(H),ae=this.transform.pointLocation3D(new n.P(j.x,H.y)),ce=this.transform.pointLocation3D(new n.P(H.x,j.y)),Te=[Math.min(W.lng,te.lng,ae.lng,ce.lng),Math.min(W.lat,te.lat,ae.lat,ce.lat)],ve=[Math.max(W.lng,te.lng,ae.lng,ce.lng),Math.max(W.lat,te.lat,ae.lat,ce.lat)],Ee=R&&R.pitch?R.pitch:this.getPitch(),Ve=this._cameraForBounds(this.transform,Te,ve,A,Ee,R);return this._fitInternal(Ve,R,C)}_fitInternal(o,c,A){return o?(c=n.l(o,c)).linear?this.easeTo(c,A):this.flyTo(c,A):this}jumpTo(o,c){this.stop();const A=o.preloadOnly?this.transform.clone():this.transform;let R=!1,C=!1,P=!1;"zoom"in o&&A.zoom!==+o.zoom&&(R=!0,A.zoom=+o.zoom),o.center!==void 0&&(A.center=n.bO.convert(o.center)),"bearing"in o&&A.bearing!==+o.bearing&&(C=!0,A.bearing=+o.bearing),"pitch"in o&&A.pitch!==+o.pitch&&(P=!0,A.pitch=+o.pitch);const L=typeof o.padding=="number"?this._extendPadding(o.padding):o.padding;if(o.padding!=null&&!A.isPaddingEqual(L))if(o.retainPadding===!1){const j=A.clone();j.padding=L,A.setLocationAtPoint(A.center,j.centerPoint)}else A.padding=L;return o.preloadOnly?(this._preloadTiles(A),this):(this.fire(new n.A("movestart",c)).fire(new n.A("move",c)),R&&this.fire(new n.A("zoomstart",c)).fire(new n.A("zoom",c)).fire(new n.A("zoomend",c)),C&&this.fire(new n.A("rotatestart",c)).fire(new n.A("rotate",c)).fire(new n.A("rotateend",c)),P&&this.fire(new n.A("pitchstart",c)).fire(new n.A("pitch",c)).fire(new n.A("pitchend",c)),this.fire(new n.A("moveend",c)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||n.w(iA),this.transform.getFreeCameraOptions()}setFreeCameraOptions(o,c){const A=this.transform;if(!A.projection.supportsFreeCamera)return n.w(iA),this;this.stop();const R=A.zoom,C=A.pitch,P=A.bearing;A.setFreeCameraOptions(o);const L=R!==A.zoom,j=C!==A.pitch,H=P!==A.bearing;return this.fire(new n.A("movestart",c)).fire(new n.A("move",c)),L&&this.fire(new n.A("zoomstart",c)).fire(new n.A("zoom",c)).fire(new n.A("zoomend",c)),H&&this.fire(new n.A("rotatestart",c)).fire(new n.A("rotate",c)).fire(new n.A("rotateend",c)),j&&this.fire(new n.A("pitchstart",c)).fire(new n.A("pitch",c)).fire(new n.A("pitchend",c)),this.fire(new n.A("moveend",c)),this}easeTo(o,c){this._stop(!1,o.easeId),((o=n.l({offset:[0,0],duration:500,easing:n.dD},o)).animate===!1||this._prefersReducedMotion(o))&&(o.duration=0);const A=this.transform,R=this.getZoom(),C=this.getBearing(),P=this.getPitch(),L=this.getPadding(),j="zoom"in o?+o.zoom:R,H="bearing"in o?this._normalizeBearing(o.bearing,C):C,W="pitch"in o?+o.pitch:P,te=this._extendPadding(o.padding),ae=n.P.convert(o.offset);let ce,Te,ve;if(A.projection.name==="globe"){const Tt=n.ac.fromLngLat(A.center),Yt=ae.rotate(-A.angle);Tt.x+=Yt.x/A.worldSize,Tt.y+=Yt.y/A.worldSize;const Lt=Tt.toLngLat(),aa=n.bO.convert(o.center||Lt);this._normalizeCenter(aa),ce=A.centerPoint.add(Yt),Te=new n.P(Tt.x,Tt.y).mult(A.worldSize),ve=new n.P(n.av(aa.lng),n.aC(aa.lat)).mult(A.worldSize).sub(Te)}else{ce=A.centerPoint.add(ae);const Tt=A.pointLocation(ce),Yt=n.bO.convert(o.center||Tt);this._normalizeCenter(Yt),Te=A.project(Tt),ve=A.project(Yt).sub(Te)}const Ee=A.zoomScale(j-R);let Ve,Be;o.around&&(Ve=n.bO.convert(o.around),Be=A.locationPoint(Ve));const et=this._zooming||j!==R,Xe=this._rotating||C!==H,ht=this._pitching||W!==P,st=!A.isPaddingEqual(te),ot=o.retainPadding===!1?A.clone():A,lt=Tt=>Yt=>{if(et&&(Tt.zoom=n.ah(R,j,Yt)),Xe&&(Tt.bearing=n.ah(C,H,Yt)),ht&&(Tt.pitch=n.ah(P,W,Yt)),st&&(ot.interpolatePadding(L,te,Yt),ce=ot.centerPoint.add(ae)),Ve)Tt.setLocationAtPoint(Ve,Be);else{const Lt=Tt.zoomScale(Tt.zoom-R),aa=j>R?Math.min(2,Ee):Math.max(.5,Ee),ua=Math.pow(aa,1-Yt),Sa=Tt.unproject(Te.add(ve.mult(Yt*ua)).mult(Lt));Tt.setLocationAtPoint(Tt.renderWorldCopies?Sa.wrap():Sa,ce)}return o.preloadOnly||this._fireMoveEvents(c),Tt};if(o.preloadOnly){const Tt=this._emulate(lt,o.duration,A);return this._preloadTiles(Tt),this}const gt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=et,this._rotating=Xe,this._pitching=ht,this._padding=st,this._easeId=o.easeId,this._prepareEase(c,o.noMoveStart,gt),this._ease(lt(A),Tt=>{A.cameraElevationReference==="sea"&&A.recenterOnTerrain(),this._afterEase(c,Tt)},o),this}_prepareEase(o,c,A={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),c||A.moving||this.fire(new n.A("movestart",o)),this._zooming&&!A.zooming&&this.fire(new n.A("zoomstart",o)),this._rotating&&!A.rotating&&this.fire(new n.A("rotatestart",o)),this._pitching&&!A.pitching&&this.fire(new n.A("pitchstart",o))}_fireMoveEvents(o){this.fire(new n.A("move",o)),this._zooming&&this.fire(new n.A("zoom",o)),this._rotating&&this.fire(new n.A("rotate",o)),this._pitching&&this.fire(new n.A("pitch",o))}_afterEase(o,c){if(this._easeId&&c&&this._easeId===c)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const A=this._zooming,R=this._rotating,C=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,A&&this.fire(new n.A("zoomend",o)),R&&this.fire(new n.A("rotateend",o)),C&&this.fire(new n.A("pitchend",o)),this.fire(new n.A("moveend",o))}flyTo(o,c){if(this._prefersReducedMotion(o)){const ea=n.aA(o,["center","zoom","bearing","pitch","around","padding","retainPadding"]);return this.jumpTo(ea,c)}this.stop(),o=n.l({offset:[0,0],speed:1.2,curve:1.42,easing:n.dD},o);const A=this.transform,R=this.getZoom(),C=this.getBearing(),P=this.getPitch(),L=this.getPadding(),j="zoom"in o?n.ay(+o.zoom,A.minZoom,A.maxZoom):R,H="bearing"in o?this._normalizeBearing(o.bearing,C):C,W="pitch"in o?+o.pitch:P,te=this._extendPadding(o.padding),ae=A.zoomScale(j-R),ce=n.P.convert(o.offset);let Te=A.centerPoint.add(ce);const ve=A.pointLocation(Te),Ee=n.bO.convert(o.center||ve);this._normalizeCenter(Ee);const Ve=A.project(ve),Be=A.project(Ee).sub(Ve);let et=o.curve;const Xe=Math.max(A.width,A.height),ht=Xe/ae,st=Be.mag();if("minZoom"in o){const ea=n.ay(Math.min(o.minZoom,R,j),A.minZoom,A.maxZoom),da=Xe/A.zoomScale(ea-R);et=Math.sqrt(da/st*2)}const ot=et*et;function lt(ea){const da=(ht*ht-Xe*Xe+(ea?-1:1)*ot*ot*st*st)/(2*(ea?ht:Xe)*ot*st);return Math.log(Math.sqrt(da*da+1)-da)}function gt(ea){return(Math.exp(ea)-Math.exp(-ea))/2}function Tt(ea){return(Math.exp(ea)+Math.exp(-ea))/2}const Yt=lt(0);let Lt=function(ea){return Tt(Yt)/Tt(Yt+et*ea)},aa=function(ea){return Xe*((Tt(Yt)*(gt(da=Yt+et*ea)/Tt(da))-gt(Yt))/ot)/st;var da},ua=(lt(1)-Yt)/et;if(Math.abs(st)<1e-6||!isFinite(ua)){if(Math.abs(Xe-ht)<1e-6)return this.easeTo(o,c);const ea=ht<Xe?-1:1;ua=Math.abs(Math.log(ht/Xe))/et,aa=function(){return 0},Lt=function(da){return Math.exp(ea*et*da)}}o.duration="duration"in o?+o.duration:1e3*ua/("screenSpeed"in o?+o.screenSpeed/et:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0);const Sa=C!==H,It=W!==P,ia=!A.isPaddingEqual(te),zt=o.retainPadding===!1?A.clone():A,sa=ea=>da=>{const Kt=da*ua,pa=1/Lt(Kt);ea.zoom=da===1?j:R+ea.scaleZoom(pa),Sa&&(ea.bearing=n.ah(C,H,da)),It&&(ea.pitch=n.ah(P,W,da)),ia&&(zt.interpolatePadding(L,te,da),Te=zt.centerPoint.add(ce));const Ia=da===1?Ee:ea.unproject(Ve.add(Be.mult(aa(Kt))).mult(pa));return ea.setLocationAtPoint(ea.renderWorldCopies?Ia.wrap():Ia,Te),ea._updateCameraOnTerrain(),o.preloadOnly||this._fireMoveEvents(c),ea};if(o.preloadOnly){const ea=this._emulate(sa,o.duration,A);return this._preloadTiles(ea),this}return this._zooming=!0,this._rotating=Sa,this._pitching=It,this._padding=ia,this._prepareEase(c,!1),this._ease(sa(A),()=>this._afterEase(c),o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(o){}_cancelRenderFrame(o){}_stop(o,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const A=this._onEaseEnd;this._onEaseEnd=void 0,A.call(this,c)}if(!o){const A=this.handlers;A&&A.stop(!1)}return this}_ease(o,c,A){A.animate===!1||A.duration===0?(o(1),c()):(this._easeStart=n.q.now(),this._easeOptions=A,this._onEaseFrame=o,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const o=Math.min((n.q.now()-this._easeStart)/this._easeOptions.duration,1),c=this._onEaseFrame;c&&c(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(o,c){o=n.bF(o,-180,180);const A=Math.abs(o-c);return Math.abs(o-360-c)<A&&(o-=360),Math.abs(o+360-c)<A&&(o+=360),o}_normalizeCenter(o){const c=this.transform;if(c.maxBounds||c.projection.name!=="globe"&&!c.renderWorldCopies)return;const A=o.lng-c.center.lng;o.lng+=A>180?-360:A<-180?360:0}_prefersReducedMotion(o){return this._respectPrefersReducedMotion&&n.q.prefersReducedMotion&&!(o&&o.essential)}_emulate(o,c,A){const R=Math.ceil(15*c/1e3),C=[],P=o(A.clone());for(let L=0;L<=R;L++){const j=P(L/R);C.push(j.clone())}return C}_preloadTiles(o,c){}}class xf{constructor(o={}){this.options=o,n.aQ(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(o){const c=this.options&&this.options.compact,A=o._getUIString("AttributionControl.ToggleAttribution");this._map=o,this._container=q("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=q("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.setAttribute("aria-label",A);const R=q("span","mapboxgl-ctrl-icon",this._compactButton);return R.setAttribute("aria-hidden","true"),R.setAttribute("title",A),this._innerContainer=q("div","mapboxgl-ctrl-attrib-inner",this._container),c&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),c===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let o=this._editLink;o||(o=this._editLink=this._container.querySelector(".mapbox-improve-map"));const c=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||n.e.ACCESS_TOKEN}];if(o){const A=c.reduce((R,C,P)=>(C.value&&(R+=`${C.key}=${C.value}${P<c.length-1?"&":""}`),R),"?");o.href=`${n.e.FEEDBACK_URL}/${A}#${Wg(this._map,!0)}`,o.rel="noopener nofollow"}}_updateData(o){!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let o=[];if(this._map.style.stylesheet){const R=this._map.style.stylesheet;this.styleOwner=R.owner,this.styleId=R.id}const c=this._map.style._mergedSourceCaches;for(const R in c){const C=c[R];if(C.used){const P=C.getSource();P.attribution&&o.indexOf(P.attribution)<0&&o.push(P.attribution)}}o.sort((R,C)=>R.length-C.length),o=o.filter((R,C)=>{for(let P=C+1;P<o.length;P++)if(o[P].indexOf(R)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=[...this.options.customAttribution,...o]:o.unshift(this.options.customAttribution));const A=o.join(" | ");A!==this._attribHTML&&(this._attribHTML=A,o.length?(this._innerContainer.innerHTML=A,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Go{constructor(){n.aQ(["_updateLogo","_updateCompact"],this)}onAdd(o){this._map=o,this._container=q("div","mapboxgl-ctrl");const c=q("a","mapboxgl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://www.mapbox.com/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(o){o&&o.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const o=this._map.style._sourceCaches;if(Object.entries(o).length===0)return!0;for(const c in o){const A=o[c].getSource();if(A.hasOwnProperty("mapbox_logo")&&!A.mapbox_logo)return!1}return!0}_updateCompact(){const o=this._container.children;if(o.length){const c=o[0];this._map.getCanvasContainer().offsetWidth<250?c.classList.add("mapboxgl-compact"):c.classList.remove("mapboxgl-compact")}}}class Wu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){const c=++this._id;return this._queue.push({callback:o,id:c,cancelled:!1}),c}remove(o){const c=this._currentlyRunning,A=c?this._queue.concat(c):this._queue;for(const R of A)if(R.id===o)return void(R.cancelled=!0)}run(o=0){const c=this._currentlyRunning=this._queue;this._queue=[];for(const A of c)if(!A.cancelled&&(A.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}class lp{constructor(o){this.jumpTo(o)}getValue(o){if(o<=this._startTime)return this._start;if(o>=this._endTime)return this._end;const c=n.cC((o-this._startTime)/(this._endTime-this._startTime));return this._start*(1-c)+this._end*c}isEasing(o){return o>=this._startTime&&o<=this._endTime}jumpTo(o){this._startTime=-1/0,this._endTime=-1/0,this._start=o,this._end=o}easeTo(o,c,A){this._start=this.getValue(c),this._end=o,this._startTime=c,this._endTime=c+A}}const Rc={"AttributionControl.ToggleAttribution":"Toggle attribution","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox homepage","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"};class ll extends n.A{constructor(o,c,A,R){const{point:C,lngLat:P,originalEvent:L,target:j}=o;super(o.type,{point:C,lngLat:P,originalEvent:L,target:j}),this.preventDefault=()=>{o.preventDefault()},this.id=c,this.interaction=A,this.feature=R}}class Fy{constructor(o){this.map=o,this.interactionsByType=new Map,this.delegatedInteractions=new Map,this.typeById=new Map,this.filters=new Map,this.handleType=this.handleType.bind(this),this.handleMove=this.handleMove.bind(this),this.handleOut=this.handleOut.bind(this),this.hoveredFeatures=new Map,this.prevHoveredFeatures=new Map}add(o,c){if(this.typeById.has(o))throw new Error(`Interaction id "${o}" already exists.`);const A=c.filter;let R=c.type;A&&this.filters.set(o,n.a_(A)),R==="mouseover"&&(R="mouseenter"),R==="mouseout"&&(R="mouseleave");const C=this.interactionsByType.get(R)||new Map;R==="mouseenter"||R==="mouseleave"?(this.delegatedInteractions.size===0&&(this.map.on("mousemove",this.handleMove),this.map.on("mouseout",this.handleOut)),this.delegatedInteractions.set(o,c)):C.size===0&&this.map.on(R,this.handleType),C.size===0&&this.interactionsByType.set(R,C),C.set(o,c),this.typeById.set(o,R)}get(o){const c=this.typeById.get(o);if(!c)return;const A=this.interactionsByType.get(c);return A?A.get(o):void 0}remove(o){const c=this.typeById.get(o);if(!c)return;this.typeById.delete(o),this.filters.delete(o);const A=this.interactionsByType.get(c);A&&(A.delete(o),c==="mouseenter"||c==="mouseleave"?(this.delegatedInteractions.delete(o),this.delegatedInteractions.size===0&&(this.map.off("mousemove",this.handleMove),this.map.off("mouseout",this.handleOut))):A.size===0&&this.map.off(c,this.handleType))}queryTargets(o,c){const A=[];for(const[R,C]of c)C.target&&A.push({targetId:R,target:C.target,filter:this.filters.get(R)});return this.map.style.queryRenderedTargets(o,A,this.map.transform)}handleMove(o){this.prevHoveredFeatures=this.hoveredFeatures,this.hoveredFeatures=new Map;const c=this.queryTargets(o.point,Array.from(this.delegatedInteractions).reverse());c.length&&(o.type="mouseenter",this.handleType(o,c));const A=new Map;for(const[R,{feature:C}]of this.prevHoveredFeatures)this.hoveredFeatures.has(R)||A.set(C.id,C);A.size&&(o.type="mouseleave",this.handleType(o,Array.from(A.values())))}handleOut(o){const c=Array.from(this.hoveredFeatures.values()).map(({feature:A})=>A);c.length&&(o.type="mouseleave",this.handleType(o,c)),this.hoveredFeatures.clear()}handleType(o,c){const A=Array.from(this.interactionsByType.get(o.type)).reverse(),R=!!c;c=c||this.queryTargets(o.point,A);const C=o.type==="mouseenter";let P=!1;const L=new Set;for(const j of c){for(const[H,W]of A){if(!W.target)continue;const te=j.variants?j.variants[H]:null;if(te){for(const ae of te){if(Nc(ae,j,L,H))continue;const ce=new n.cx(j,ae),Te=_d(ae,j,H);R&&(ce.state=this.map.getFeatureState(ce));const ve=C?this.prevHoveredFeatures.get(Te):null,Ee=new ll(o,H,W,ce),Ve=ve?ve.stop:W.handler(Ee);if(C&&this.hoveredFeatures.set(Te,{feature:j,stop:Ve}),Ve!==!1){P=!0;break}}if(P)break}}if(P)break}if(!P)for(const[j,H]of A){const{handler:W,target:te}=H;if(!te&&W(new ll(o,j,H,null))!==!1)break}}}function Ln(g,o){if(Array.isArray(g)&&Array.isArray(o)){const c=new Set(g),A=new Set(o);return c.size===A.size&&g.every(R=>A.has(R))}return n.bn(g,o)}const qh={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1,precompilePrograms:!0,scaleFactor:1,spriteFormat:"auto"},sA={showCompass:!0,showZoom:!0,visualizePitch:!1};class oA{constructor(o,c,A=!1){this._clickTolerance=10,this.element=c,this.mouseRotate=new Bd({clickTolerance:o.dragRotate._mouseRotate._clickTolerance}),this.map=o,A&&(this.mousePitch=new vc({clickTolerance:o.dragRotate._mousePitch._clickTolerance})),n.aQ(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),c.addEventListener("mousedown",this.mousedown),c.addEventListener("touchstart",this.touchstart,{passive:!1}),c.addEventListener("touchmove",this.touchmove),c.addEventListener("touchend",this.touchend),c.addEventListener("touchcancel",this.reset)}down(o,c){this.mouseRotate.mousedown(o,c),this.mousePitch&&this.mousePitch.mousedown(o,c),ge()}move(o,c){const A=this.map,R=this.mouseRotate.mousemoveWindow(o,c),C=R&&R.bearingDelta;if(C&&A.setBearing(A.getBearing()+C),this.mousePitch){const P=this.mousePitch.mousemoveWindow(o,c),L=P&&P.pitchDelta;L&&A.setPitch(A.getPitch()+L)}}off(){const o=this.element;o.removeEventListener("mousedown",this.mousedown),o.removeEventListener("touchstart",this.touchstart,{passive:!1}),o.removeEventListener("touchmove",this.touchmove),o.removeEventListener("touchend",this.touchend),o.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){he(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(o){this.down(n.l({},o,{ctrlKey:!0,preventDefault:()=>o.preventDefault()}),Re(this.element,o)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(o){this.move(o,Re(this.element,o))}mouseup(o){this.mouseRotate.mouseupWindow(o),this.mousePitch&&this.mousePitch.mouseupWindow(o),this.offTemp()}touchstart(o){o.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=be(this.element,o.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>o.preventDefault()},this._startPos))}touchmove(o){o.targetTouches.length!==1?this.reset():(this._lastPos=be(this.element,o.targetTouches)[0],this.move({preventDefault:()=>o.preventDefault()},this._lastPos))}touchend(o){o.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function up(g,o,c){if(g=new n.bO(g.lng,g.lat),o){const A=new n.bO(g.lng-360,g.lat),R=new n.bO(g.lng+360,g.lat),C=360*Math.ceil(Math.abs(g.lng-c.center.lng)/360),P=c.locationPoint3D(g).distSqr(o),L=o.x<0||o.y<0||o.x>c.width||o.y>c.height;c.locationPoint3D(A).distSqr(o)<P&&(L||Math.abs(A.lng-c.center.lng)<C)?g=A:c.locationPoint3D(R).distSqr(o)<P&&(L||Math.abs(R.lng-c.center.lng)<C)&&(g=R)}for(;Math.abs(g.lng-c.center.lng)>180;){const A=c.locationPoint3D(g);if(A.x>=0&&A.y>=0&&A.x<=c.width&&A.y<=c.height)break;g.lng>c.center.lng?g.lng-=360:g.lng+=360}return g}const _l={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},Pi={anchor:"center",color:"#3FB1CE",scale:1,draggable:!1,clickTolerance:0,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto",occludedOpacity:.2,altitude:0};class jo extends n.E{constructor(o,c){super(),(o instanceof HTMLElement||c)&&(o=n.l({element:o},c)),n.aQ(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),o=n.l({},Pi,o),this._anchor=o.anchor,this._color=o.color,this._scale=o.scale,this._draggable=o.draggable,this._clickTolerance=o.clickTolerance,this._rotation=o.rotation,this._rotationAlignment=o.rotationAlignment,this._pitchAlignment=o.pitchAlignment,this._occludedOpacity=o.occludedOpacity,this._altitude=o.altitude,this._state="inactive",this._isDragging=!1,this._updateMoving=()=>this._update(!0),o&&o.element?(this._element=o.element,this._offset=n.P.convert(o&&o.offset||[0,0])):(this._defaultMarker=!0,this._element=this._createDefaultMarker(),this._offset=n.P.convert(o&&o.offset||[0,-14])),this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",C=>{C.preventDefault()}),this._element.addEventListener("mousedown",C=>{C.preventDefault()});const A=this._element.classList;for(const C in _l)A.remove(`mapboxgl-marker-anchor-${C}`);A.add(`mapboxgl-marker-anchor-${this._anchor}`);const R=o&&o.className?o.className.trim().split(/\s+/):[];A.add(...R),this._popup=null}_createDefaultMarker(){const o=q("div"),c=$("svg",{display:"block",height:41*this._scale+"px",width:27*this._scale+"px",viewBox:"0 0 27 41"},o);if(this._altitude===0){const A=$("radialGradient",{id:"shadowGradient"},$("defs",{},c));$("stop",{offset:"10%","stop-opacity":.4},A),$("stop",{offset:"100%","stop-opacity":.05},A),$("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},c)}return $("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},c),$("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},c),$("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},c),o}addTo(o){return o===this._map||(this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._updateMoving),o.on("moveend",this._update),o.on("remove",this._clearFadeTimer),o._addMarker(this),this.setDraggable(this._draggable),this._update(),o.on("click",this._onMapClick)),this}remove(){const o=this._map;return o&&(o.off("click",this._onMapClick),o.off("move",this._updateMoving),o.off("moveend",this._update),o.off("mousedown",this._addDragHandler),o.off("touchstart",this._addDragHandler),o.off("mouseup",this._onUp),o.off("touchend",this._onUp),o.off("mousemove",this._onMove),o.off("touchmove",this._onMove),o.off("remove",this._clearFadeTimer),o._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=n.bO.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}setAltitude(o){return o===this._altitude||(this._defaultMarker&&(this._altitude===0&&o!==0||this._altitude!==0&&o===0)&&(this._element=this._createDefaultMarker()),this._altitude=o||Pi.altitude,this._update()),this}getAltitude(){return this._altitude}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){const R=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[R,-1*(38.1-13.5+R)],"bottom-right":[-R,-1*(38.1-13.5+R)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=o,o._marker=this,o._altitude=this._altitude,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(o){const c=o.code,A=o.charCode||o.keyCode;c!=="Space"&&c!=="Enter"&&A!==32&&A!==13||this.togglePopup()}_onMapClick(o){const c=o.originalEvent.target,A=this._element;this._popup&&(c===A||A.contains(c))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const o=this._popup;return o?(o.isOpen()?(o.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(o.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const o=this._map,c=this._pos;if(!o||!c)return!1;const A=o.unproject(c,this._altitude),R=o.getFreeCameraOptions();if(!R.position)return!1;const C=R.position.toLngLat();return C.distanceTo(A)<.9*C.distanceTo(this._lngLat)}_evaluateOpacity(){const o=this._map;if(!o)return;const c=this._pos;if(!c||c.x<0||c.x>o.transform.width||c.y<0||c.y>o.transform.height)return void this._clearFadeTimer();const A=o.unproject(c,this._altitude);let R;o._showingGlobe()&&n.dK(o.transform,this._lngLat)?R=0:(R=1-o._queryFogOpacity(A),o.transform._terrainEnabled()&&o.getTerrain()&&this._behindTerrain()&&(R*=this._occludedOpacity)),this._element.style.opacity=`${R}`,this._element.style.pointerEvents=R>0?"auto":"none",this._popup&&this._popup._setOpacity(R),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const o=this._pos;if(!o||!this._map)return;const c=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${o.x}px,${o.y}px)
            ${_l[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${c.x}px,${c.y}px)
        `}_calculateXYTransform(){const o=this._pos,c=this._map,A=this.getPitchAlignment();if(!c||!o||A!=="map")return"";if(!c._showingGlobe()){const j=c.getPitch();return j?`rotateX(${j}deg)`:""}const R=n.c4(n.dL(c.transform,this._lngLat)),C=o.sub(n.dM(c.transform)),P=Math.abs(C.x)+Math.abs(C.y);if(P===0)return"";const L=R/P;return`rotateX(${-C.y*L}deg) rotateY(${C.x*L}deg)`}_calculateZTransform(){const o=this._pos,c=this._map;if(!c||!o)return"";let A=0;const R=this.getRotationAlignment();if(R==="map")if(c._showingGlobe()){const C=c.project(new n.bO(this._lngLat.lng,this._lngLat.lat+.001),this._altitude),P=c.project(new n.bO(this._lngLat.lng,this._lngLat.lat-.001),this._altitude).sub(C);A=n.c4(Math.atan2(P.y,P.x))-90}else A=-c.getBearing();else if(R==="horizon"){const C=n.ae(4,6,c.getZoom()),P=n.dM(c.transform);P.y+=C*c.transform.height;const L=o.sub(P),j=n.c4(Math.atan2(L.y,L.x));A=(j>90?j-270:j+90)*(1-C)}return A+=this._rotation,A?`rotateZ(${A}deg)`:""}_update(o){cancelAnimationFrame(this._updateFrameId);const c=this._map;c&&(c.transform.renderWorldCopies&&(this._lngLat=up(this._lngLat,this._pos,c.transform)),this._pos=c.project(this._lngLat,this._altitude),o===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),c._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(c._showingGlobe()||c.getTerrain()||c.getFog())&&!this._fadeTimer&&(this._fadeTimer=window.setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(o){return this._offset=n.P.convert(o),this._update(),this}addClassName(o){return this._element.classList.add(o),this}removeClassName(o){return this._element.classList.remove(o),this}toggleClassName(o){return this._element.classList.toggle(o)}_onMove(o){const c=this._map;if(!c)return;const A=this._pointerdownPos,R=this._positionDelta;if(A&&R){if(!this._isDragging){const C=this._clickTolerance||c._clickTolerance;if(o.point.dist(A)<C)return;this._isDragging=!0}this._pos=o.point.sub(R),this._lngLat=c.unproject(this._pos,this._altitude),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new n.A("dragstart"))),this.fire(new n.A("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const o=this._map;o&&(o.off("mousemove",this._onMove),o.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new n.A("dragend")),this._state="inactive"}_addDragHandler(o){const c=this._map,A=this._pos;c&&A&&this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(A),this._pointerdownPos=o.point,this._state="pending",c.on("mousemove",this._onMove),c.on("touchmove",this._onMove),c.once("mouseup",this._onUp),c.once("touchend",this._onUp))}setDraggable(o){this._draggable=!!o;const c=this._map;return c&&(o?(c.on("mousedown",this._addDragHandler),c.on("touchstart",this._addDragHandler)):(c.off("mousedown",this._addDragHandler),c.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||Pi.rotation,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||Pi.rotationAlignment,this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o||Pi.pitchAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(o){return this._occludedOpacity=o||Pi.occludedOpacity,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Nu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Ri={maxWidth:100,unit:"metric"},Uy={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},Vu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",altitude:0},lA=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Hh(g=new n.P(0,0),o="bottom"){if(typeof g=="number"){const c=Math.round(Math.sqrt(.5*Math.pow(g,2)));switch(o){case"top":return new n.P(0,g);case"top-left":return new n.P(c,c);case"top-right":return new n.P(-c,c);case"bottom":return new n.P(0,-g);case"bottom-left":return new n.P(c,-c);case"bottom-right":return new n.P(-c,-c);case"left":return new n.P(g,0);case"right":return new n.P(-g,0)}return new n.P(0,0)}return g instanceof n.P||Array.isArray(g)?n.P.convert(g):n.P.convert(g[o]||[0,0])}return{version:w,supported:Z.supported,setRTLTextPlugin:n.dN,getRTLTextPluginStatus:n.dO,Map:class extends op{constructor(g){E.mark(T.create);const o=g;if((g=n.l({},qh,g)).minZoom!=null&&g.maxZoom!=null&&g.minZoom>g.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(g.minPitch!=null&&g.maxPitch!=null&&g.minPitch>g.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(g.minPitch!=null&&g.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(g.maxPitch!=null&&g.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(g.antialias&&n.dI(window)&&(g.antialias=!1,n.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new bd(g.minZoom,g.maxZoom,g.minPitch,g.maxPitch,g.renderWorldCopies,null,null),g),this._repaint=!!g.repaint,this._interactive=g.interactive,this._minTileCacheSize=g.minTileCacheSize,this._maxTileCacheSize=g.maxTileCacheSize,this._failIfMajorPerformanceCaveat=g.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=g.preserveDrawingBuffer,this._antialias=g.antialias,this._trackResize=g.trackResize,this._bearingSnap=g.bearingSnap,this._refreshExpiredTiles=g.refreshExpiredTiles,this._fadeDuration=g.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=g.crossSourceCollisions,this._collectResourceTiming=g.collectResourceTiming,this._language=this._parseLanguage(g.language),this._worldview=g.worldview,this._renderTaskQueue=new Wu,this._domRenderTaskQueue=new Wu,this._controls=[],this._markers=[],this._popups=[],this._mapId=n.aW(),this._locale=n.l({},Rc,g.locale),this._clickTolerance=g.clickTolerance,this._cooperativeGestures=g.cooperativeGestures,this._performanceMetricsCollection=g.performanceMetricsCollection,this._tessellationStep=g.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._precompilePrograms=g.precompilePrograms,this._scaleFactorChanged=!1,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new lp(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._scaleFactor=g.scaleFactor,this._requestManager=new ze(g.transformRequest,g.accessToken,g.testMode),this._silenceAuthErrors=!!g.testMode,this._contextCreateOptions=g.contextCreateOptions?Object.assign({},g.contextCreateOptions):{},typeof g.container=="string"){const c=document.getElementById(g.container);if(!c)throw new Error(`Container '${g.container.toString()}' not found.`);this._container=c}else{if(!(g.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=g.container}if(this._container.childNodes.length>0&&n.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),g.maxBounds&&this.setMaxBounds(g.maxBounds),this._spriteFormat=g.spriteFormat,n.aQ(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._tp||(this._tp=new Pu),this._tp.registerParameter(this,["Debug"],"showOverdrawInspector"),this._tp.registerParameter(this,["Debug"],"showTileBoundaries"),this._tp.registerParameter(this,["Debug"],"showParseStatus"),this._tp.registerParameter(this,["Debug"],"repaint"),this._tp.registerParameter(this,["Debug"],"showTileAABBs"),this._tp.registerParameter(this,["Debug"],"showPadding"),this._tp.registerParameter(this,["Debug"],"showCollisionBoxes",{noSave:!0}),this._tp.registerParameter(this.transform,["Debug"],"freezeTileCoverage",{noSave:!0},()=>{this._update()}),this._tp.registerParameter(this,["Debug","Wireframe"],"showTerrainWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers2DWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers3DWireframe"),this._tp.registerParameter(this,["Scaling"],"_scaleFactor",{min:.1,max:10,step:.1},()=>{this.setScaleFactor(this._scaleFactor)}),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new Qp(this,g),this._localFontFamily=g.localFontFamily,this._localIdeographFontFamily=g.localIdeographFontFamily,(g.style||!g.testMode)&&this.setStyle(g.style||n.e.DEFAULT_STYLE,{config:g.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),g.projection&&this.setProjection(g.projection),this.indoor=new Dc(this),g.hash&&(this._hash=new Dy(typeof g.hash=="string"&&g.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){o.center==null&&o.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch});const c=g.bounds;c&&(this.resize(),this.fitBounds(c,n.l({},g.fitBoundsOptions,{duration:0})))}this.resize(),g.attributionControl&&this.addControl(new xf({customAttribution:g.customAttribution})),this._logoControl=new Go,this.addControl(this._logoControl,g.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent()}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new n.A(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new n.A(`${c.dataType}dataloading`,c))}),this._interactions=new Fy(this)}_getMapId(){return this._mapId}addControl(g,o){if(o===void 0&&(o=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new n.z(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=g.onAdd(this);this._controls.push(g);const A=this._controlPositions[o];return o.indexOf("bottom")!==-1?A.insertBefore(c,A.firstChild):A.appendChild(c),this}removeControl(g){if(!g||!g.onRemove)return this.fire(new n.z(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const o=this._controls.indexOf(g);return o>-1&&this._controls.splice(o,1),g.onRemove(this),this}hasControl(g){return this._controls.indexOf(g)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(g){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const o=!this._moving;return o&&this.fire(new n.A("movestart",g)).fire(new n.A("move",g)),this.fire(new n.A("resize",g)),o&&this.fire(new n.A("moveend",g)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(g){return this.transform.setMaxBounds(n.aB.convert(g)),this._update()}setMinZoom(g){if((g=g??-2)>=-2&&g<=this.transform.maxZoom)return this.transform.minZoom=g,this._update(),this.getZoom()<g?this.setZoom(g):this.fire(new n.A("zoomstart")).fire(new n.A("zoom")).fire(new n.A("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(g){if((g=g??22)>=this.transform.minZoom)return this.transform.maxZoom=g,this._update(),this.getZoom()>g?this.setZoom(g):this.fire(new n.A("zoomstart")).fire(new n.A("zoom")).fire(new n.A("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(g){if((g=g??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.minPitch=g,this._update(),this.getPitch()<g?this.setPitch(g):this.fire(new n.A("pitchstart")).fire(new n.A("pitch")).fire(new n.A("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(g){if((g=g??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(g>=this.transform.minPitch)return this.transform.maxPitch=g,this._update(),this.getPitch()>g?this.setPitch(g):this.fire(new n.A("pitchstart")).fire(new n.A("pitch")).fire(new n.A("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getScaleFactor(){return this._scaleFactor}setScaleFactor(g){return this._scaleFactor=g,this.painter.scaleFactor=g,this._tp.refreshUI(),this._scaleFactorChanged=!0,this.style._updateFilteredLayers(o=>o.type==="symbol"),this._update(!0),this}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(g){return this.transform.renderWorldCopies=g,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(g){return g==="auto"?navigator.language:Array.isArray(g)?g.length===0?void 0:g.map(o=>o==="auto"?navigator.language:o):g}setLanguage(g){const o=this._parseLanguage(g);if(!this.style||o===this._language)return this;this._language=o,this.style.reloadSources();for(const c of this._controls)c._setLanguage&&c._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(g){return this.style&&g!==this._worldview?(this._worldview=g,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(g){return this._lazyInitEmptyStyle(),g?typeof g=="string"&&(g={name:g}):g=null,this._useExplicitProjection=!!g,this._prioritizeAndUpdateProjection(g,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const g=this.transform,o=g.projection.name;let c;o==="globe"&&g.zoom>=n.bY?(g.setMercatorFromTransition(),c=!0):o==="mercator"&&g.zoom<n.bY&&(g.setProjection({name:"globe"}),c=!0),c&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(g,o){return this._updateProjection(g||o||{name:"mercator"})}_updateProjection(g){let o;return o=g.name==="globe"&&this.transform.zoom>=n.bY?this.transform.setMercatorFromTransition():this.transform.setProjection(g),this.style.applyProjectionUpdate(),o&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(g,o){return this.transform.locationPoint3D(n.bO.convert(g),o)}unproject(g,o){return this.transform.pointLocation3D(n.P.convert(g),o)}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(g,o,c){const A=R=>{let C=[];if(Array.isArray(o)){const P=o.filter(L=>this.getLayer(L));C=P.length?this.queryRenderedFeatures(R,{layers:P}):[]}else C=this.queryRenderedFeatures(R,{target:o});return C};if(g==="mouseenter"||g==="mouseover"){let R=!1;return{listener:c,targets:o,delegates:{mousemove:P=>{const L=A(P.point);L.length?R||(R=!0,c.call(this,new gl(g,this,P.originalEvent,{features:L}))):R=!1},mouseout:()=>{R=!1}}}}if(g==="mouseleave"||g==="mouseout"){let R=!1;return{listener:c,targets:o,delegates:{mousemove:L=>{A(L.point).length?R=!0:R&&(R=!1,c.call(this,new gl(g,this,L.originalEvent)))},mouseout:L=>{R&&(R=!1,c.call(this,new gl(g,this,L.originalEvent)))}}}}{const R=C=>{const P=A(C.point);P.length&&(C.features=P,c.call(this,C),delete C.features)};return{listener:c,targets:o,delegates:{[g]:R}}}}on(g,o,c){if(typeof o=="function"||c===void 0)return super.on(g,o);if(typeof o=="string"&&(o=[o]),!this._areTargetsValid(o))return this;const A=this._createDelegatedListener(g,o,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(A);for(const R in A.delegates)this.on(R,A.delegates[R]);return this}once(g,o,c){if(typeof o=="function"||c===void 0)return super.once(g,o);if(typeof o=="string"&&(o=[o]),!this._areTargetsValid(o))return this;const A=this._createDelegatedListener(g,o,c);for(const R in A.delegates)this.once(R,A.delegates[R]);return this}off(g,o,c){if(typeof o=="function"||c===void 0)return super.off(g,o);if(typeof o=="string"&&(o=[o]),!this._areTargetsValid(o))return this;const A=this._delegatedListeners?this._delegatedListeners[g]:void 0;return A&&(R=>{for(let C=0;C<R.length;C++){const P=R[C];if(P.listener===c&&Ln(P.targets,o)){for(const L in P.delegates)this.off(L,P.delegates[L]);return R.splice(C,1),this}}})(A),this}queryRenderedFeatures(g,o){if(!this.style)return[];if(g===void 0||g instanceof n.P||Array.isArray(g)||o!==void 0||(o=g,g=void 0),g=g||[[0,0],[this.transform.width,this.transform.height]],!o){const C=this.style.queryRenderedFeatures(g,void 0,this.transform),P=this.style.queryRenderedFeatureset(g,void 0,this.transform);return C.concat(P)}let c=!0;if(o.target&&(c=this._isTargetValid(o.target),c&&!o.layers))return this.style.queryRenderedFeatureset(g,o,this.transform);let A=!0;if(o.layers&&Array.isArray(o.layers)){for(const C of o.layers)if(!this._isValidId(C)){A=!1;break}if(A&&!o.target)return this.style.queryRenderedFeatures(g,o,this.transform)}let R=[];return A&&(R=R.concat(this.style.queryRenderedFeatures(g,o,this.transform))),c&&(R=R.concat(this.style.queryRenderedFeatureset(g,o,this.transform))),R}querySourceFeatures(g,o){return!g||typeof g=="string"&&!this._isValidId(g)?[]:this.style.querySourceFeatures(g,o)}isPointOnSurface(g){const{name:o}=this.transform.projection;return o!=="globe"&&o!=="mercator"&&n.w(`${o} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(n.P.convert(g))}addInteraction(g,o){return this._interactions.add(g,o),this}removeInteraction(g){return this._interactions.remove(g),this}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(g){return this._cooperativeGestures=g,this}setStyle(g,o){return o=n.l({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},o),this.style&&g&&o.diff!==!1&&o.localFontFamily===this._localFontFamily&&o.localIdeographFontFamily===this._localIdeographFontFamily&&!o.config?(this.style._diffStyle(g,(c,A)=>{c?(n.w(`Unable to perform style diff: ${String(c.message||c.error||c)}. Rebuilding the style from scratch.`),this._updateStyle(g,o)):A&&this._update(!0)},()=>{this._postStyleLoadEvent()}),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._localFontFamily=o.localFontFamily,this._updateStyle(g,o))}_getUIString(g){const o=this._locale[g];if(o==null)throw new Error(`Missing UI string '${g}'`);return o}_updateStyle(g,o){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),g){const c=n.l({},o);o&&o.config&&(c.initialConfig=o.config,delete c.config),this.style=new eo(this,c).load(g),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new eo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(n.w("There is no style added to the map."),!1)}_isValidId(g){return g==null?(this.fire(new n.z(new Error("IDs can't be empty."))),!1):!n.cs(g)||(this.fire(new n.z(new Error(`IDs can't contain special symbols: "${g}".`))),!1)}_isTargetValid(g){return"featuresetId"in g?this._isValidId("importId"in g?g.importId:g.featuresetId):"layerId"in g&&this._isValidId(g.layerId)}_areTargetsValid(g){if(Array.isArray(g)){for(const o of g)if(!this._isValidId(o))return!1;return!0}return this._isTargetValid(g)}addSource(g,o){return this._isValidId(g)?(this._lazyInitEmptyStyle(),this.style.addSource(g,o),this._update(!0)):this}isSourceLoaded(g){return!!this._isValidId(g)&&!!this.style&&this.style._isSourceCacheLoaded(g)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(g,o,c){this._lazyInitEmptyStyle(),this.style.addSourceType(g,o,c)}removeSource(g){return this._isValidId(g)?(this.style.removeSource(g),this._updateTerrain(),this._update(!0)):this}getSource(g){return this._isValidId(g)?this.style.getOwnSource(g):null}addImage(g,o,{pixelRatio:c=1,sdf:A=!1,stretchX:R,stretchY:C,content:P}={}){this._lazyInitEmptyStyle();const L=n.I.from(g);if(o instanceof HTMLImageElement||ImageBitmap&&o instanceof ImageBitmap){const{width:j,height:H,data:W}=n.q.getImageData(o);this.style.addImage(L,{data:new n.r({width:j,height:H},W),pixelRatio:c,stretchX:R,stretchY:C,content:P,sdf:A,version:0,usvg:!1})}else if(o.width===void 0||o.height===void 0)this.fire(new n.z(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:j,height:H}=o,W=o;this.style.addImage(L,{data:new n.r({width:j,height:H},new Uint8Array(W.data)),pixelRatio:c,stretchX:R,stretchY:C,content:P,sdf:A,usvg:!1,version:0,userImage:W}),W.onAdd&&W.onAdd(this,g)}}updateImage(g,o){this._lazyInitEmptyStyle();const c=n.I.from(g),A=this.style.getImage(c);if(!A)return void this.fire(new n.z(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const R=o instanceof HTMLImageElement||ImageBitmap&&o instanceof ImageBitmap?n.q.getImageData(o):o,{width:C,height:P,data:L}=R;if(C===void 0||P===void 0)return void this.fire(new n.z(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(C!==(A.usvg?A.icon.usvg_tree.width:A.data.width)||P!==(A.usvg?A.icon.usvg_tree.height:A.data.height))return void this.fire(new n.z(new Error(`The width and height of the updated image (${C}, ${P})
                must be that same as the previous version of the image
                (${A.data.width}, ${A.data.height})`)));const j=!(o instanceof HTMLImageElement||ImageBitmap&&o instanceof ImageBitmap);let H=!1;A.usvg?(A.data=new n.r({width:C,height:P},new Uint8Array(L)),A.usvg=!1,A.icon=void 0,H=!0):A.data.replace(L,j),this.style.updateImage(c,A,H)}hasImage(g){return g?!!this.style&&!!this.style.getImage(n.I.from(g)):(this.fire(new n.z(new Error("Missing required image id"))),!1)}removeImage(g){this.style.removeImage(n.I.from(g))}loadImage(g,o){n.o(this._requestManager.transformRequest(g,n.R.Image),(c,A)=>{o(c,A instanceof HTMLImageElement?n.q.getImageData(A):A)})}listImages(){return this.style.listImages().map(g=>g.name)}addModel(g,o){this._lazyInitEmptyStyle(),this.style.addModel(g,o)}hasModel(g){return g?this.style.hasModel(g):(this.fire(new n.z(new Error("Missing required model id"))),!1)}removeModel(g){this.style.removeModel(g)}listModels(){return this.style.listModels()}addLayer(g,o){return this._isValidId(g.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(g,o),this._update(!0)):this}getSlot(g){const o=this.getLayer(g);return o&&o.slot||null}setSlot(g,o){return this.style.setSlot(g,o),this.style.mergeLayers(),this._update(!0)}addImport(g,o){return this.style.addImport(g,o),this}updateImport(g,o){return typeof o!="string"&&o.id!==g?(this.removeImport(g),this.addImport(o)):(this.style.updateImport(g,o),this._update(!0))}removeImport(g){return this.style.removeImport(g),this}moveImport(g,o){return this.style.moveImport(g,o),this._update(!0)}moveLayer(g,o){return this._isValidId(g)?(this.style.moveLayer(g,o),this._update(!0)):this}removeLayer(g){return this._isValidId(g)?(this.style.removeLayer(g),this._update(!0)):this}getLayer(g){if(!this._isValidId(g))return null;const o=this.style.getOwnLayer(g);return o?o.type==="custom"?o.implementation:o.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(g,o,c){return this._isValidId(g)?(this.style.setLayerZoomRange(g,o,c),this._update(!0)):this}setFilter(g,o,c={}){return this._isValidId(g)?(this.style.setFilter(g,o,c),this._update(!0)):this}getFilter(g){return this._isValidId(g)?this.style.getFilter(g):null}setPaintProperty(g,o,c,A={}){return this._isValidId(g)?(this.style.setPaintProperty(g,o,c,A),this._update(!0)):this}getPaintProperty(g,o){return this._isValidId(g)?this.style.getPaintProperty(g,o):null}setLayoutProperty(g,o,c,A={}){return this._isValidId(g)?(this.style.setLayoutProperty(g,o,c,A),this._update(!0)):this}getLayoutProperty(g,o){return this._isValidId(g)?this.style.getLayoutProperty(g,o):null}getGlyphsUrl(){return this.style.getGlyphsUrl()}setGlyphsUrl(g){return this.style.setGlyphsUrl(g),this._update(!0)}getSchema(g){return this.style.getSchema(g)}setSchema(g,o){return this.style.setSchema(g,o),this._update(!0)}getConfig(g){return this.style.getConfig(g)}setConfig(g,o){return this.style.setConfig(g,o),this._update(!0)}getConfigProperty(g,o){return this.style.getConfigProperty(g,o)}setConfigProperty(g,o,c){return this.style.setConfigProperty(g,o,c),this._update(!0)}getFeaturesetDescriptors(g){return this.style.getFeaturesetDescriptors(g)}setLights(g){if(this._lazyInitEmptyStyle(),g&&g.length===1&&g[0].type==="flat"){const o=g[0];o.properties?this.style.setFlatLight(o.properties,o.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(g),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const g=this.style.getLights()||[];return g.length===0&&g.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),g}setLight(g,o={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:g}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(g){return this._lazyInitEmptyStyle(),!g&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(g),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(g){return this._lazyInitEmptyStyle(),this.style.setFog(g),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setSnow(g){return this._lazyInitEmptyStyle(),this.style.setSnow(g),this._update(!0)}getSnow(){return this.style?this.style.getSnow():null}setRain(g){return this._lazyInitEmptyStyle(),this.style.setRain(g),this._update(!0)}getRain(){return this.style?this.style.getRain():null}setColorTheme(g){return this._lazyInitEmptyStyle(),this.style.setColorTheme(g),this._update(!0)}setImportColorTheme(g,o){return this._lazyInitEmptyStyle(),this.style.setImportColorTheme(g,o),this._update(!0)}setCamera(g){return this.style.setCamera(g),this._triggerCameraUpdate(g)}_triggerCameraUpdate(g){return this._update(this.transform.setOrthographicProjectionAtLowPitch(g["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(g){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(n.bO.convert(g),this.transform):0}setFeatureState(g,o){return g.source&&!this._isValidId(g.source)?this:(this.style.setFeatureState(g,o),this._update())}removeFeatureState(g,o){return g.source&&!this._isValidId(g.source)?this:(this.style.removeFeatureState(g,o),this._update())}getFeatureState(g){return g.source&&!this._isValidId(g.source)?null:this.style.getFeatureState(g)}_updateContainerDimensions(){if(!this._container)return;const g=this._container.getBoundingClientRect().width||400,o=this._container.getBoundingClientRect().height||300;let c,A,R,C=this._container;for(;C&&(!A||!R);){const P=window.getComputedStyle(C).transform;P&&P!=="none"&&(c=P.match(/matrix.*\((.+)\)/)[1].split(", "),c[0]&&c[0]!=="0"&&c[0]!=="1"&&(A=c[0]),c[3]&&c[3]!=="0"&&c[3]!=="1"&&(R=c[3])),C=C.parentElement}this._containerWidth=A?Math.abs(g/A):g,this._containerHeight=R?Math.abs(o/R):o}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&n.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const g=this._container;g.classList.add("mapboxgl-map"),(this._missingCSSCanary=q("div","mapboxgl-canary",g)).style.visibility="hidden",this._detectMissingCSS();const o=this._canvasContainer=q("div","mapboxgl-canvas-container",g);this._canvas=q("canvas","mapboxgl-canvas",o),this._interactive&&(o.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const c=this._controlContainer=q("div","mapboxgl-control-container",g),A=this._controlPositions={};["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"].forEach(R=>{A[R]=q("div",`mapboxgl-ctrl-${R}`,c)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(g,o){const c=n.q.devicePixelRatio||1;this._canvas.width=c*Math.ceil(g),this._canvas.height=c*Math.ceil(o),this._canvas.style.width=`${g}px`,this._canvas.style.height=`${o}px`}_addMarker(g){this._markers.push(g)}_removeMarker(g){const o=this._markers.indexOf(g);o!==-1&&this._markers.splice(o,1)}_addPopup(g){this._popups.push(g)}_removePopup(g){const o=this._popups.indexOf(g);o!==-1&&this._popups.splice(o,1)}_setupPainter(){const g=n.l({},Z.supported.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),o=this._canvas.getContext("webgl2",g);o?(Zt(o,!0),this.painter=new $p(o,this._contextCreateOptions,this.transform,this._scaleFactor,this._tp),this.on("data",c=>{c.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),n.m.testSupport(o)):this.fire(new n.z(new Error("Failed to initialize WebGL")))}_contextLost(g){g.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new n.A("webglcontextlost",{originalEvent:g}))}_contextRestored(g){this._setupPainter(),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight)),this._updateTerrain(),this.style.reloadModels(),this.style.clearSources(),this._update(),this.fire(new n.A("webglcontextrestored",{originalEvent:g}))}_onMapScroll(g){if(g.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}idle(){return!this.isMoving()&&this.loaded()}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty}_update(g){return this.style?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(g){return this._update(),this._renderTaskQueue.add(g)}_cancelRenderFrame(g){this._renderTaskQueue.remove(g)}_requestDomTask(g){!this.loaded()||this.loaded()&&!this.isMoving()?g():this._domRenderTaskQueue.add(g)}_render(g){let o;this.fire(new n.A("renderstart")),++this._frameId;const c=this.painter.context.extTimerQuery,A=n.q.now(),R=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(o=R.createQuery(),R.beginQuery(c.TIME_ELAPSED_EXT,o)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(g),this._domRenderTaskQueue.run(g),this._removed)return;this._updateProjectionTransition();const C=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const H=this.transform.zoom,W=this.transform.pitch,te=n.q.now(),ae=new n.aa(H,{now:te,fadeDuration:C,pitch:W,transition:this.style.transition});this.style.update(ae)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let P=!1;this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),P=this._updateAverageElevation(A),this.style.updateSources(this.transform),this.isMoving()||this._forceMarkerAndPopupUpdate()):P=this._updateAverageElevation(A);const L=this.style&&this.style._updatePlacement(this.painter,this.painter.transform,this.showCollisionBoxes,C,this._crossSourceCollisions,this.painter.replacementSource,this._scaleFactorChanged);if(this._scaleFactorChanged&&(this._scaleFactorChanged=!1),L&&(this._placementDirty=L.needsRerender),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:C,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new n.A("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,E.mark(T.load),this.fire(new n.A("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&(this.style.snow||this.style.rain)&&(this._styleDirty=!0),this.style&&this.style.imageManager.hasPatternsInFlight()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),o){const H=n.q.now()-A;R.endQuery(c.TIME_ELAPSED_EXT),setTimeout(()=>{const W=R.getQueryParameter(o,R.QUERY_RESULT)/1e6;R.deleteQuery(o),this.fire(new n.A("gpu-timing-frame",{cpuTime:H,gpuTime:W}))},50)}if(this.listens("gpu-timing-layer")){const H=this.painter.collectGpuTimers();setTimeout(()=>{const W=this.painter.queryGpuTimers(H);this.fire(new n.A("gpu-timing-layer",{layerTimes:W}))},50)}if(this.listens("gpu-timing-deferred-render")){const H=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const W=this.painter.queryGpuTimeDeferredRender(H);this.fire(new n.A("gpu-timing-deferred-render",{gpuTime:W}))},50)}const j=this._sourcesDirty||this._styleDirty||this._placementDirty||P;if(j||this._repaint)this.triggerRepaint();else{const H=this.idle();if(H&&(P=this._updateAverageElevation(A,!0)),P)this.triggerRepaint();else if(this._triggerFrame(!1),H&&(this.fire(new n.A("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const W=this._calculateSpeedIndex();this.fire(new n.A("speedindexcompleted",{speedIndex:W})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||j||(this._fullyLoaded=!0,E.mark(T.fullLoad),this._performanceMetricsCollection&&it(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(g){for(const o of this._markers)g&&!this.getRenderWorldCopies()&&(o._lngLat=o._lngLat.wrap()),o._update();for(const o of this._popups)!g||this.getRenderWorldCopies()||o._trackPointer||(o._lngLat=o._lngLat.wrap()),o._update()}_updateAverageElevation(g,o=!1){const c=R=>(this.transform.averageElevation=R,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&c(0);const A=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(A||(o||g-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(g)){const R=this.transform.averageElevation;let C=this.transform.sampleAverageElevation();this.transform.elevation!=null&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(C)?C=0:this._averageElevationLastSampledAt=g;const P=Math.abs(R-C);if(P>1){if(this._isInitialLoad||A)return this._averageElevation.jumpTo(C),c(C);this._averageElevation.easeTo(C,g,300)}else if(P>1e-4)return this._averageElevation.jumpTo(C),c(C)}return!!this._averageElevation.isEasing(g)&&c(this._averageElevation.getValue(g))}_authenticate(){_e(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,g=>{if(g&&(g.message===Me||g.status===401)){const o=this.painter.context.gl;Zt(o,!1),this._logoControl instanceof Go&&this._logoControl._updateLogo(),o&&o.clear(o.DEPTH_BUFFER_BIT|o.COLOR_BUFFER_BIT|o.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new n.z(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),$e(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_postStyleLoadEvent(){this.style.globalId&&Je(this._requestManager._customAccessToken,{map:this,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_updateTerrain(){const g=this._isDragging();this.painter.updateTerrain(this.style,g)}_calculateSpeedIndex(){const g=this.painter.canvasCopy(),o=this.painter.getCanvasCopiesAndTimestamps();o.timeStamps.push(performance.now());const c=this.painter.context.gl,A=c.createFramebuffer();function R(C){c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,C,0);const P=new Uint8Array(c.drawingBufferWidth*c.drawingBufferHeight*4);return c.readPixels(0,0,c.drawingBufferWidth,c.drawingBufferHeight,c.RGBA,c.UNSIGNED_BYTE,P),P}return c.bindFramebuffer(c.FRAMEBUFFER,A),this._canvasPixelComparison(R(g),o.canvasCopies.map(R),o.timeStamps)}_canvasPixelComparison(g,o,c){let A=c[1]-c[0];const R=g.length/4;for(let C=0;C<o.length;C++){const P=o[C];let L=0;for(let j=0;j<P.length;j+=4)P[j]===g[j]&&P[j+1]===g[j+1]&&P[j+2]===g[j+2]&&P[j+3]===g[j+3]&&(L+=1);A+=(c[C+2]-c[C+1])*(1-L/R)}return A}remove(){this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.indoor.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const g=this.painter.context.gl.getExtension("WEBGL_lose_context");g&&g.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),Jt.delete(this.painter.context.gl),ct.remove(),Se.remove(),this._removed=!0,this.fire(new n.A("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(g){this._renderNextFrame=this._renderNextFrame||g,this.style&&!this._frame&&(this._frame=n.q.frame(o=>{const c=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,c&&this._render(o)}))}_preloadTiles(g){const o=this.style?this.style.getSourceCaches():[];return n.bl(o,(c,A)=>c._preloadTiles(g,A),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(g){this._trackResize&&this.resize({originalEvent:g})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._tp.refreshUI(),this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(g){this._showParseStatus!==g&&(this._showParseStatus=g,this._tp.refreshUI(),this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(g){this._showTerrainWireframe!==g&&(this._showTerrainWireframe=g,this._tp.refreshUI(),this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(g){this._showLayers2DWireframe!==g&&(this._showLayers2DWireframe=g,this._tp.refreshUI(),this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(g){this._showLayers3DWireframe!==g&&(this._showLayers3DWireframe=g,this._tp.refreshUI(),this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(g){this._speedIndexTiming!==g&&(this._speedIndexTiming=g,this._update())}get showPadding(){return!!this._showPadding}set showPadding(g){this._showPadding!==g&&(this._showPadding=g,this._tp.refreshUI(),this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,this._tp.refreshUI(),g?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._tp.refreshUI(),this._update())}get repaint(){return!!this._repaint}set repaint(g){this._repaint!==g&&(this._repaint=g,this._tp.refreshUI(),this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(g){this._vertices=g,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(g){this._showTileAABBs!==g&&(this._showTileAABBs=g,this._tp.refreshUI(),g&&this._update())}_setCacheLimits(g,o){n.dJ(g,o)}get version(){return w}},NavigationControl:class{constructor(g={}){this.options=n.l({},sA,g),this._container=q("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(n.aQ(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",o=>{this._map&&this._map.zoomIn({},{originalEvent:o})}),q("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",o=>{this._map&&this._map.zoomOut({},{originalEvent:o})}),q("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(n.aQ(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",o=>{const c=this._map;c&&(this.options.visualizePitch?c.resetNorthPitch({},{originalEvent:o}):c.resetNorth({},{originalEvent:o}))}),this._compassIcon=q("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const g=this._map;if(!g)return;const o=g.getZoom(),c=o===g.getMaxZoom(),A=o===g.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=A,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",A.toString())}_rotateCompassArrow(){const g=this._map;if(!g)return;const o=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(g.transform.pitch*(Math.PI/180)),.5)}) rotateX(${g.transform.pitch}deg) rotateZ(${g.transform.angle*(180/Math.PI)}deg)`:`rotate(${g.transform.angle*(180/Math.PI)}deg)`;g._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=o)})}onAdd(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),g.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&g.on("pitch",this._rotateCompassArrow),g.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new oA(g,this._compass,this.options.visualizePitch)),this._container}onRemove(){const g=this._map;g&&(this._container.remove(),this.options.showZoom&&g.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&g.off("pitch",this._rotateCompassArrow),g.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(g,o){const c=q("button",g,this._container);return c.type="button",c.addEventListener("click",o),c}_setButtonTitle(g,o){if(!this._map)return;const c=this._map._getUIString(`NavigationControl.${o}`);g.setAttribute("aria-label",c),g.firstElementChild&&g.firstElementChild.setAttribute("title",c)}},GeolocateControl:class extends n.E{constructor(g={}){super();const o=navigator.geolocation;this.options=n.l({geolocation:o},Nu,g),n.aQ(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=jm(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(g){return this._map=g,this._container=q("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(g){const o=(c=!!this.options.geolocation)=>{this._supportsGeolocation=c,g(c)};this._supportsGeolocation!==void 0?g(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(c=>o(c.state!=="denied")).catch(()=>o()):o()}_isOutOfMapMaxBounds(g){const o=this._map.getMaxBounds(),c=g.coords;return!!o&&(c.longitude<o.getWest()||c.longitude>o.getEast()||c.latitude<o.getSouth()||c.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(g){if(this._map){if(this._isOutOfMapMaxBounds(g))return this._setErrorState(),this.fire(new n.A("outofmaxbounds",g)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=g,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(g),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(g),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new n.A("geolocate",g)),this._finish()}}_updateCamera(g){const o=new n.bO(g.coords.longitude,g.coords.latitude),c=g.coords.accuracy,A=this._map.getBearing(),R=n.l({bearing:A},this.options.fitBoundsOptions);this._map.fitBounds(o.toBounds(c),R,{geolocateSource:!0})}_updateMarker(g){if(g){const o=new n.bO(g.coords.longitude,g.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=g.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const g=this._map.transform,o=n.bH(1,g._center.lat)*g.worldSize,c=Math.ceil(2*this._accuracy*o);this._circleElement.style.width=`${c}px`,this._circleElement.style.height=`${c}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(g){if(this._map){if(this.options.trackUserLocation)if(g.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(g.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new n.A("error",g)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(g){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",o=>o.preventDefault()),this._geolocateButton=q("button","mapboxgl-ctrl-geolocate",this._container),q("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",g===!1){n.w("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=q("div","mapboxgl-user-location"),this._dotElement.appendChild(q("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(q("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new jo({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=q("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new jo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new n.A("trackuserlocationend")))})}}_onDeviceOrientation(g){this._userLocationDotMarker&&(g.webkitCompassHeading?this._heading=g.webkitCompassHeading:g.absolute===!0&&(this._heading=-1*g.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return n.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new n.A("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new n.A("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new n.A("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let g;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(g={maximumAge:6e5,timeout:0},this._noTimeout=!0):(g=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,g),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=window.setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const g=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(o=>{o==="granted"&&g()}).catch(console.error):g()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:xf,ScaleControl:class{constructor(g={}){this.options=n.l({},Ri,g),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),n.aQ(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const g=this.options.maxWidth||100,o=this._map,c=o._containerHeight/2,A=o._containerWidth/2-g/2,R=o.unproject([A,c]),C=o.unproject([A+g,c]),P=R.distanceTo(C);if(this.options.unit==="imperial"){const L=3.2808*P;L>5280?this._setScale(g,L/5280,"mile"):this._setScale(g,L,"foot")}else this.options.unit==="nautical"?this._setScale(g,P/1852,"nautical-mile"):P>=1e3?this._setScale(g,P/1e3,"kilometer"):this._setScale(g,P,"meter")}_setScale(g,o,c){this._map._requestDomTask(()=>{const A=function(C){const P=Math.pow(10,`${Math.floor(C)}`.length-1);let L=C/P;return L=L>=10?10:L>=5?5:L>=3?3:L>=2?2:L>=1?1:function(j){const H=Math.pow(10,Math.ceil(-Math.log(j)/Math.LN10));return Math.round(j*H)/H}(L),P*L}(o),R=A/o;this._container.innerHTML=this._isNumberFormatSupported&&c!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:c}).format(A):`${A}&nbsp;${Uy[c]}`,this._container.style.width=g*R+"px"})}onAdd(g){return this._map=g,this._language=g.getLanguage(),this._container=q("div","mapboxgl-ctrl mapboxgl-ctrl-scale",g.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(g){this._language=g,this._update()}setUnit(g){this.options.unit=g,this._update()}},FullscreenControl:class{constructor(g={}){this._fullscreen=!1,g&&g.container&&(g.container instanceof HTMLElement?this._container=g.container:n.w("Full screen control 'container' must be a DOM element.")),n.aQ(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=q("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",n.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const g=this._fullscreenButton=q("button","mapboxgl-ctrl-fullscreen",this._controlContainer);q("span","mapboxgl-ctrl-icon",g).setAttribute("aria-hidden","true"),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",g)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends n.E{constructor(g){super(),this.options=n.l(Object.create(Vu),g),this._altitude=this.options.altitude,n.aQ(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(g&&g.className?g.className.trim().split(/\s+/):[])}addTo(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&g.on("preclick",this._onClose),this.options.closeOnMove&&g.on("move",this._onClose),g.on("remove",this.remove),this._update(),g._addPopup(this),this._focusFirstElement(),this._trackPointer?(g.on("mousemove",this._onMouseEvent),g.on("mouseup",this._onMouseEvent),g._canvasContainer.classList.add("mapboxgl-track-pointer")):g.on("move",this._update),this.fire(new n.A("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const g=this._map;return g&&(g.off("move",this._update),g.off("move",this._onClose),g.off("preclick",this._onClose),g.off("click",this._onClose),g.off("remove",this.remove),g.off("mousemove",this._onMouseEvent),g.off("mouseup",this._onMouseEvent),g.off("drag",this._onMouseEvent),g._canvasContainer&&g._canvasContainer.classList.remove("mapboxgl-track-pointer"),g._removePopup(this),this._map=void 0),this.fire(new n.A("close")),this}getLngLat(){return this._lngLat}setLngLat(g){this._lngLat=n.bO.convert(g),this._pos=null,this._trackPointer=!1,this._update();const o=this._map;return o&&(o.on("move",this._update),o.off("mousemove",this._onMouseEvent),o._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}getAltitude(){return this._altitude}setAltitude(g){return this._altitude=g,this._update(),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const g=this._map;return g&&(g.off("move",this._update),g.on("mousemove",this._onMouseEvent),g.on("drag",this._onMouseEvent),g._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(g){return this.setDOMContent(document.createTextNode(g))}setHTML(g){const o=document.createDocumentFragment(),c=document.createElement("body");let A;for(c.innerHTML=g;A=c.firstChild,A;)o.appendChild(A);return this.setDOMContent(o)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(g){return this.options.maxWidth=g,this._update(),this}setDOMContent(g){let o=this._content;if(o)for(;o.hasChildNodes();)o.firstChild&&o.removeChild(o.firstChild);else o=this._content=q("div","mapboxgl-popup-content",this._container||void 0);if(o.appendChild(g),this.options.closeButton){const c=this._closeButton=q("button","mapboxgl-popup-close-button",o);c.type="button",c.setAttribute("aria-label","Close popup"),c.innerHTML='<span aria-hidden="true">&#215;</span>',c.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(g){return this._classList.add(g),this._updateClassList(),this}removeClassName(g){return this._classList.delete(g),this._updateClassList(),this}setOffset(g){return this.options.offset=g,this._update(),this}toggleClassName(g){let o;return this._classList.delete(g)?o=!1:(this._classList.add(g),o=!0),this._updateClassList(),o}_onMouseEvent(g){this._update(g.point)}_getAnchor(g){if(this.options.anchor)return this.options.anchor;const o=this._map,c=this._container,A=this._pos;if(!o||!c||!A)return"bottom";const R=c.offsetWidth,C=c.offsetHeight,P=A.x<R/2,L=A.x>o.transform.width-R/2;if(A.y+g<C)return P?"top-left":L?"top-right":"top";if(A.y>o.transform.height-C){if(P)return"bottom-left";if(L)return"bottom-right"}return P?"left":L?"right":"bottom"}_updateClassList(){const g=this._container;if(!g)return;const o=[...this._classList];o.push("mapboxgl-popup"),this._anchor&&o.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&o.push("mapboxgl-popup-track-pointer"),g.className=o.join(" ")}_update(g){const o=this._map,c=this._content;if(!o||!this._lngLat&&!this._trackPointer||!c)return;let A=this._container;if(A||(A=this._container=q("div","mapboxgl-popup",o.getContainer()),this._tip=q("div","mapboxgl-popup-tip",A),A.appendChild(c)),this.options.maxWidth&&A.style.maxWidth!==this.options.maxWidth&&(A.style.maxWidth=this.options.maxWidth),o.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=up(this._lngLat,this._pos,o.transform)),!this._trackPointer||g){const R=this._pos=this._trackPointer&&g instanceof n.P?g:o.project(this._lngLat,this._altitude),C=Hh(this.options.offset),P=this._anchor=this._getAnchor(C.y),L=Hh(this.options.offset,P),j=R.add(L).round();o._requestDomTask(()=>{this._container&&P&&(this._container.style.transform=`${_l[P]} translate(${j.x}px,${j.y}px)`)})}if(!this._marker&&o._showingGlobe()){const R=n.dK(o.transform,this._lngLat)?0:1;this._setOpacity(R)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const g=this._container.querySelector(lA);g&&g.focus()}_onClose(){this.remove()}_setOpacity(g){this._container&&(this._container.style.opacity=`${g}`),this._content&&(this._content.style.pointerEvents=g?"auto":"none")}},Marker:jo,Style:eo,LngLat:n.bO,LngLatBounds:n.aB,Point:n.P,MercatorCoordinate:n.ac,FreeCameraOptions:Cd,Evented:n.E,config:n.e,prewarm:n.dP,clearPrewarmedResources:n.dQ,get accessToken(){return n.e.ACCESS_TOKEN},set accessToken(g){n.e.ACCESS_TOKEN=g},get baseApiUrl(){return n.e.API_URL},set baseApiUrl(g){n.e.API_URL=g},get workerCount(){return n.dR.workerCount},set workerCount(g){n.dR.workerCount=g},get maxParallelImageRequests(){return n.e.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(g){n.e.MAX_PARALLEL_IMAGE_REQUESTS=g},clearStorage(g){n.dS(g)},get workerUrl(){return n.dT.workerUrl},set workerUrl(g){n.dT.workerUrl=g},get workerClass(){return n.dT.workerClass},set workerClass(g){n.dT.workerClass=g},get workerParams(){return n.dT.workerParams},set workerParams(g){n.dT.workerParams=g},get dracoUrl(){return n.dU()},set dracoUrl(g){n.dV(g)},get meshoptUrl(){return n.dW()},set meshoptUrl(g){n.dX(g)},setNow:n.q.setNow,restoreNow:n.q.restoreNow}});var h=s;return h})}(LC)),LC.exports}var Ece=Pce();const kf=Ji(Ece);function zK(t){var e,a,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(a=zK(t[e]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}function ci(){for(var t,e,a=0,r="",s=arguments.length;a<s;a++)(t=arguments[a])&&(e=zK(t))&&(r&&(r+=" "),r+=e);return r}var GE,FU;function Eh(){if(FU)return GE;FU=1;var t=Array.isArray;return GE=t,GE}var jE,UU;function OK(){if(UU)return jE;UU=1;var t=typeof $S=="object"&&$S&&$S.Object===Object&&$S;return jE=t,jE}var ZE,kU;function Om(){if(kU)return ZE;kU=1;var t=OK(),e=typeof self=="object"&&self&&self.Object===Object&&self,a=t||e||Function("return this")();return ZE=a,ZE}var qE,BU;function xT(){if(BU)return qE;BU=1;var t=Om(),e=t.Symbol;return qE=e,qE}var HE,GU;function Nce(){if(GU)return HE;GU=1;var t=xT(),e=Object.prototype,a=e.hasOwnProperty,r=e.toString,s=t?t.toStringTag:void 0;function l(h){var n=a.call(h,s),w=h[s];try{h[s]=void 0;var T=!0}catch{}var E=r.call(h);return T&&(n?h[s]=w:delete h[s]),E}return HE=l,HE}var $E,jU;function Vce(){if(jU)return $E;jU=1;var t=Object.prototype,e=t.toString;function a(r){return e.call(r)}return $E=a,$E}var KE,ZU;function by(){if(ZU)return KE;ZU=1;var t=xT(),e=Nce(),a=Vce(),r="[object Null]",s="[object Undefined]",l=t?t.toStringTag:void 0;function h(n){return n==null?n===void 0?s:r:l&&l in Object(n)?e(n):a(n)}return KE=h,KE}var WE,qU;function xy(){if(qU)return WE;qU=1;function t(e){return e!=null&&typeof e=="object"}return WE=t,WE}var YE,HU;function Zv(){if(HU)return YE;HU=1;var t=by(),e=xy(),a="[object Symbol]";function r(s){return typeof s=="symbol"||e(s)&&t(s)==a}return YE=r,YE}var XE,$U;function TI(){if($U)return XE;$U=1;var t=Eh(),e=Zv(),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function s(l,h){if(t(l))return!1;var n=typeof l;return n=="number"||n=="symbol"||n=="boolean"||l==null||e(l)?!0:r.test(l)||!a.test(l)||h!=null&&l in Object(h)}return XE=s,XE}var JE,KU;function Zg(){if(KU)return JE;KU=1;function t(e){var a=typeof e;return e!=null&&(a=="object"||a=="function")}return JE=t,JE}var QE,WU;function SI(){if(WU)return QE;WU=1;var t=by(),e=Zg(),a="[object AsyncFunction]",r="[object Function]",s="[object GeneratorFunction]",l="[object Proxy]";function h(n){if(!e(n))return!1;var w=t(n);return w==r||w==s||w==a||w==l}return QE=h,QE}var eN,YU;function zce(){if(YU)return eN;YU=1;var t=Om(),e=t["__core-js_shared__"];return eN=e,eN}var tN,XU;function Oce(){if(XU)return tN;XU=1;var t=zce(),e=function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function a(r){return!!e&&e in r}return tN=a,tN}var aN,JU;function DK(){if(JU)return aN;JU=1;var t=Function.prototype,e=t.toString;function a(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return aN=a,aN}var rN,QU;function Dce(){if(QU)return rN;QU=1;var t=SI(),e=Oce(),a=Zg(),r=DK(),s=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,h=Function.prototype,n=Object.prototype,w=h.toString,T=n.hasOwnProperty,E=RegExp("^"+w.call(T).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function z(k){if(!a(k)||e(k))return!1;var U=t(k)?E:l;return U.test(r(k))}return rN=z,rN}var nN,ek;function Mce(){if(ek)return nN;ek=1;function t(e,a){return e==null?void 0:e[a]}return nN=t,nN}var iN,tk;function _0(){if(tk)return iN;tk=1;var t=Dce(),e=Mce();function a(r,s){var l=e(r,s);return t(l)?l:void 0}return iN=a,iN}var sN,ak;function mx(){if(ak)return sN;ak=1;var t=_0(),e=t(Object,"create");return sN=e,sN}var oN,rk;function Ice(){if(rk)return oN;rk=1;var t=mx();function e(){this.__data__=t?t(null):{},this.size=0}return oN=e,oN}var lN,nk;function Lce(){if(nk)return lN;nk=1;function t(e){var a=this.has(e)&&delete this.__data__[e];return this.size-=a?1:0,a}return lN=t,lN}var uN,ik;function Fce(){if(ik)return uN;ik=1;var t=mx(),e="__lodash_hash_undefined__",a=Object.prototype,r=a.hasOwnProperty;function s(l){var h=this.__data__;if(t){var n=h[l];return n===e?void 0:n}return r.call(h,l)?h[l]:void 0}return uN=s,uN}var cN,sk;function Uce(){if(sk)return cN;sk=1;var t=mx(),e=Object.prototype,a=e.hasOwnProperty;function r(s){var l=this.__data__;return t?l[s]!==void 0:a.call(l,s)}return cN=r,cN}var dN,ok;function kce(){if(ok)return dN;ok=1;var t=mx(),e="__lodash_hash_undefined__";function a(r,s){var l=this.__data__;return this.size+=this.has(r)?0:1,l[r]=t&&s===void 0?e:s,this}return dN=a,dN}var hN,lk;function Bce(){if(lk)return hN;lk=1;var t=Ice(),e=Lce(),a=Fce(),r=Uce(),s=kce();function l(h){var n=-1,w=h==null?0:h.length;for(this.clear();++n<w;){var T=h[n];this.set(T[0],T[1])}}return l.prototype.clear=t,l.prototype.delete=e,l.prototype.get=a,l.prototype.has=r,l.prototype.set=s,hN=l,hN}var fN,uk;function Gce(){if(uk)return fN;uk=1;function t(){this.__data__=[],this.size=0}return fN=t,fN}var pN,ck;function CI(){if(ck)return pN;ck=1;function t(e,a){return e===a||e!==e&&a!==a}return pN=t,pN}var mN,dk;function yx(){if(dk)return mN;dk=1;var t=CI();function e(a,r){for(var s=a.length;s--;)if(t(a[s][0],r))return s;return-1}return mN=e,mN}var yN,hk;function jce(){if(hk)return yN;hk=1;var t=yx(),e=Array.prototype,a=e.splice;function r(s){var l=this.__data__,h=t(l,s);if(h<0)return!1;var n=l.length-1;return h==n?l.pop():a.call(l,h,1),--this.size,!0}return yN=r,yN}var gN,fk;function Zce(){if(fk)return gN;fk=1;var t=yx();function e(a){var r=this.__data__,s=t(r,a);return s<0?void 0:r[s][1]}return gN=e,gN}var AN,pk;function qce(){if(pk)return AN;pk=1;var t=yx();function e(a){return t(this.__data__,a)>-1}return AN=e,AN}var _N,mk;function Hce(){if(mk)return _N;mk=1;var t=yx();function e(a,r){var s=this.__data__,l=t(s,a);return l<0?(++this.size,s.push([a,r])):s[l][1]=r,this}return _N=e,_N}var vN,yk;function gx(){if(yk)return vN;yk=1;var t=Gce(),e=jce(),a=Zce(),r=qce(),s=Hce();function l(h){var n=-1,w=h==null?0:h.length;for(this.clear();++n<w;){var T=h[n];this.set(T[0],T[1])}}return l.prototype.clear=t,l.prototype.delete=e,l.prototype.get=a,l.prototype.has=r,l.prototype.set=s,vN=l,vN}var wN,gk;function bI(){if(gk)return wN;gk=1;var t=_0(),e=Om(),a=t(e,"Map");return wN=a,wN}var RN,Ak;function $ce(){if(Ak)return RN;Ak=1;var t=Bce(),e=gx(),a=bI();function r(){this.size=0,this.__data__={hash:new t,map:new(a||e),string:new t}}return RN=r,RN}var TN,_k;function Kce(){if(_k)return TN;_k=1;function t(e){var a=typeof e;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?e!=="__proto__":e===null}return TN=t,TN}var SN,vk;function Ax(){if(vk)return SN;vk=1;var t=Kce();function e(a,r){var s=a.__data__;return t(r)?s[typeof r=="string"?"string":"hash"]:s.map}return SN=e,SN}var CN,wk;function Wce(){if(wk)return CN;wk=1;var t=Ax();function e(a){var r=t(this,a).delete(a);return this.size-=r?1:0,r}return CN=e,CN}var bN,Rk;function Yce(){if(Rk)return bN;Rk=1;var t=Ax();function e(a){return t(this,a).get(a)}return bN=e,bN}var xN,Tk;function Xce(){if(Tk)return xN;Tk=1;var t=Ax();function e(a){return t(this,a).has(a)}return xN=e,xN}var PN,Sk;function Jce(){if(Sk)return PN;Sk=1;var t=Ax();function e(a,r){var s=t(this,a),l=s.size;return s.set(a,r),this.size+=s.size==l?0:1,this}return PN=e,PN}var EN,Ck;function xI(){if(Ck)return EN;Ck=1;var t=$ce(),e=Wce(),a=Yce(),r=Xce(),s=Jce();function l(h){var n=-1,w=h==null?0:h.length;for(this.clear();++n<w;){var T=h[n];this.set(T[0],T[1])}}return l.prototype.clear=t,l.prototype.delete=e,l.prototype.get=a,l.prototype.has=r,l.prototype.set=s,EN=l,EN}var NN,bk;function MK(){if(bk)return NN;bk=1;var t=xI(),e="Expected a function";function a(r,s){if(typeof r!="function"||s!=null&&typeof s!="function")throw new TypeError(e);var l=function(){var h=arguments,n=s?s.apply(this,h):h[0],w=l.cache;if(w.has(n))return w.get(n);var T=r.apply(this,h);return l.cache=w.set(n,T)||w,T};return l.cache=new(a.Cache||t),l}return a.Cache=t,NN=a,NN}var VN,xk;function Qce(){if(xk)return VN;xk=1;var t=MK(),e=500;function a(r){var s=t(r,function(h){return l.size===e&&l.clear(),h}),l=s.cache;return s}return VN=a,VN}var zN,Pk;function ede(){if(Pk)return zN;Pk=1;var t=Qce(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,r=t(function(s){var l=[];return s.charCodeAt(0)===46&&l.push(""),s.replace(e,function(h,n,w,T){l.push(w?T.replace(a,"$1"):n||h)}),l});return zN=r,zN}var ON,Ek;function PI(){if(Ek)return ON;Ek=1;function t(e,a){for(var r=-1,s=e==null?0:e.length,l=Array(s);++r<s;)l[r]=a(e[r],r,e);return l}return ON=t,ON}var DN,Nk;function tde(){if(Nk)return DN;Nk=1;var t=xT(),e=PI(),a=Eh(),r=Zv(),s=t?t.prototype:void 0,l=s?s.toString:void 0;function h(n){if(typeof n=="string")return n;if(a(n))return e(n,h)+"";if(r(n))return l?l.call(n):"";var w=n+"";return w=="0"&&1/n==-1/0?"-0":w}return DN=h,DN}var MN,Vk;function IK(){if(Vk)return MN;Vk=1;var t=tde();function e(a){return a==null?"":t(a)}return MN=e,MN}var IN,zk;function LK(){if(zk)return IN;zk=1;var t=Eh(),e=TI(),a=ede(),r=IK();function s(l,h){return t(l)?l:e(l,h)?[l]:a(r(l))}return IN=s,IN}var LN,Ok;function _x(){if(Ok)return LN;Ok=1;var t=Zv();function e(a){if(typeof a=="string"||t(a))return a;var r=a+"";return r=="0"&&1/a==-1/0?"-0":r}return LN=e,LN}var FN,Dk;function EI(){if(Dk)return FN;Dk=1;var t=LK(),e=_x();function a(r,s){s=t(s,r);for(var l=0,h=s.length;r!=null&&l<h;)r=r[e(s[l++])];return l&&l==h?r:void 0}return FN=a,FN}var UN,Mk;function FK(){if(Mk)return UN;Mk=1;var t=EI();function e(a,r,s){var l=a==null?void 0:t(a,r);return l===void 0?s:l}return UN=e,UN}var ade=FK();const lf=Ji(ade);var kN,Ik;function rde(){if(Ik)return kN;Ik=1;function t(e){return e==null}return kN=t,kN}var nde=rde();const Un=Ji(nde);var BN,Lk;function ide(){if(Lk)return BN;Lk=1;var t=by(),e=Eh(),a=xy(),r="[object String]";function s(l){return typeof l=="string"||!e(l)&&a(l)&&t(l)==r}return BN=s,BN}var sde=ide();const PT=Ji(sde);var ode=SI();const Fn=Ji(ode);var lde=Zg();const qv=Ji(lde);var GN={exports:{}},Vs={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fk;function ude(){if(Fk)return Vs;Fk=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),n=Symbol.for("react.server_context"),w=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),U=Symbol.for("react.offscreen"),Z;Z=Symbol.for("react.module.reference");function q($){if(typeof $=="object"&&$!==null){var J=$.$$typeof;switch(J){case t:switch($=$.type,$){case a:case s:case r:case T:case E:return $;default:switch($=$&&$.$$typeof,$){case n:case h:case w:case k:case z:case l:return $;default:return J}}case e:return J}}}return Vs.ContextConsumer=h,Vs.ContextProvider=l,Vs.Element=t,Vs.ForwardRef=w,Vs.Fragment=a,Vs.Lazy=k,Vs.Memo=z,Vs.Portal=e,Vs.Profiler=s,Vs.StrictMode=r,Vs.Suspense=T,Vs.SuspenseList=E,Vs.isAsyncMode=function(){return!1},Vs.isConcurrentMode=function(){return!1},Vs.isContextConsumer=function($){return q($)===h},Vs.isContextProvider=function($){return q($)===l},Vs.isElement=function($){return typeof $=="object"&&$!==null&&$.$$typeof===t},Vs.isForwardRef=function($){return q($)===w},Vs.isFragment=function($){return q($)===a},Vs.isLazy=function($){return q($)===k},Vs.isMemo=function($){return q($)===z},Vs.isPortal=function($){return q($)===e},Vs.isProfiler=function($){return q($)===s},Vs.isStrictMode=function($){return q($)===r},Vs.isSuspense=function($){return q($)===T},Vs.isSuspenseList=function($){return q($)===E},Vs.isValidElementType=function($){return typeof $=="string"||typeof $=="function"||$===a||$===s||$===r||$===T||$===E||$===U||typeof $=="object"&&$!==null&&($.$$typeof===k||$.$$typeof===z||$.$$typeof===l||$.$$typeof===h||$.$$typeof===w||$.$$typeof===Z||$.getModuleId!==void 0)},Vs.typeOf=q,Vs}var Uk;function cde(){return Uk||(Uk=1,GN.exports=ude()),GN.exports}var dde=cde(),jN,kk;function UK(){if(kk)return jN;kk=1;var t=by(),e=xy(),a="[object Number]";function r(s){return typeof s=="number"||e(s)&&t(s)==a}return jN=r,jN}var ZN,Bk;function hde(){if(Bk)return ZN;Bk=1;var t=UK();function e(a){return t(a)&&a!=+a}return ZN=e,ZN}var fde=hde();const Hv=Ji(fde);var pde=UK();const mde=Ji(pde);var Yd=function(e){return e===0?0:e>0?1:-1},HA=function(e){return PT(e)&&e.indexOf("%")===e.length-1},mr=function(e){return mde(e)&&!Hv(e)},Mu=function(e){return mr(e)||PT(e)},yde=0,qg=function(e){var a=++yde;return"".concat(e||"").concat(a)},Xd=function(e,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!mr(e)&&!PT(e))return r;var l;if(HA(e)){var h=e.indexOf("%");l=a*parseFloat(e.slice(0,h))/100}else l=+e;return Hv(l)&&(l=r),s&&l>a&&(l=a),l},vg=function(e){if(!e)return null;var a=Object.keys(e);return a&&a.length?e[a[0]]:null},gde=function(e){if(!Array.isArray(e))return!1;for(var a=e.length,r={},s=0;s<a;s++)if(!r[e[s]])r[e[s]]=!0;else return!0;return!1},cl=function(e,a){return mr(e)&&mr(a)?function(r){return e+r*(a-e)}:function(){return a}};function Rb(t,e,a){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):lf(r,e))===a})}var Ade=function(e){if(!e||!e.length)return null;for(var a=e.length,r=0,s=0,l=0,h=0,n=1/0,w=-1/0,T=0,E=0,z=0;z<a;z++)T=e[z].cx||0,E=e[z].cy||0,r+=T,s+=E,l+=T*E,h+=T*T,n=Math.min(n,T),w=Math.max(w,T);var k=a*h!==r*r?(a*l-r*s)/(a*h-r*r):0;return{xmin:n,xmax:w,a:k,b:(s-k*r)/a}};function k_(t,e){for(var a in t)if({}.hasOwnProperty.call(t,a)&&(!{}.hasOwnProperty.call(e,a)||t[a]!==e[a]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function cD(t){"@babel/helpers - typeof";return cD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cD(t)}var _de=["viewBox","children"],vde=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Gk=["points","pathLength"],qN={svg:_de,polygon:Gk,polyline:Gk},NI=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Tb=function(e,a){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(nt.isValidElement(e)&&(r=e.props),!qv(r))return null;var s={};return Object.keys(r).forEach(function(l){NI.includes(l)&&(s[l]=a||function(h){return r[l](r,h)})}),s},wde=function(e,a,r){return function(s){return e(a,r,s),null}},Dg=function(e,a,r){if(!qv(e)||cD(e)!=="object")return null;var s=null;return Object.keys(e).forEach(function(l){var h=e[l];NI.includes(l)&&typeof h=="function"&&(s||(s={}),s[l]=wde(h,a,r))}),s},Rde=["children"],Tde=["children"];function jk(t,e){if(t==null)return{};var a=Sde(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Sde(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function dD(t){"@babel/helpers - typeof";return dD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dD(t)}var Zk={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},hy=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},qk=null,HN=null,VI=function t(e){if(e===qk&&Array.isArray(HN))return HN;var a=[];return nt.Children.forEach(e,function(r){Un(r)||(dde.isFragment(r)?a=a.concat(t(r.props.children)):a.push(r))}),HN=a,qk=e,a};function th(t,e){var a=[],r=[];return Array.isArray(e)?r=e.map(function(s){return hy(s)}):r=[hy(e)],VI(t).forEach(function(s){var l=lf(s,"type.displayName")||lf(s,"type.name");r.indexOf(l)!==-1&&a.push(s)}),a}function ef(t,e){var a=th(t,e);return a&&a[0]}var Hk=function(e){if(!e||!e.props)return!1;var a=e.props,r=a.width,s=a.height;return!(!mr(r)||r<=0||!mr(s)||s<=0)},Cde=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],bde=function(e){return e&&e.type&&PT(e.type)&&Cde.indexOf(e.type)>=0},kK=function(e){return e&&dD(e)==="object"&&"clipDot"in e},xde=function(e,a,r,s){var l,h=(l=qN==null?void 0:qN[s])!==null&&l!==void 0?l:[];return!Fn(e)&&(s&&h.includes(a)||vde.includes(a))||r&&NI.includes(a)},ln=function(e,a,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var s=e;if(nt.isValidElement(e)&&(s=e.props),!qv(s))return null;var l={};return Object.keys(s).forEach(function(h){var n;xde((n=s)===null||n===void 0?void 0:n[h],h,a,r)&&(l[h]=s[h])}),l},hD=function t(e,a){if(e===a)return!0;var r=nt.Children.count(e);if(r!==nt.Children.count(a))return!1;if(r===0)return!0;if(r===1)return $k(Array.isArray(e)?e[0]:e,Array.isArray(a)?a[0]:a);for(var s=0;s<r;s++){var l=e[s],h=a[s];if(Array.isArray(l)||Array.isArray(h)){if(!t(l,h))return!1}else if(!$k(l,h))return!1}return!0},$k=function(e,a){if(Un(e)&&Un(a))return!0;if(!Un(e)&&!Un(a)){var r=e.props||{},s=r.children,l=jk(r,Rde),h=a.props||{},n=h.children,w=jk(h,Tde);return s&&n?k_(l,w)&&hD(s,n):!s&&!n?k_(l,w):!1}return!1},Kk=function(e,a){var r=[],s={};return VI(e).forEach(function(l,h){if(bde(l))r.push(l);else if(l){var n=hy(l.type),w=a[n]||{},T=w.handler,E=w.once;if(T&&(!E||!s[n])){var z=T(l,n,h);r.push(z),s[n]=!0}}}),r},Pde=function(e){var a=e&&e.type;return a&&Zk[a]?Zk[a]:null},Ede=function(e,a){return VI(a).indexOf(e)},Nde=["children","width","height","viewBox","className","style","title","desc"];function fD(){return fD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},fD.apply(this,arguments)}function Vde(t,e){if(t==null)return{};var a=zde(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function zde(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function pD(t){var e=t.children,a=t.width,r=t.height,s=t.viewBox,l=t.className,h=t.style,n=t.title,w=t.desc,T=Vde(t,Nde),E=s||{width:a,height:r,x:0,y:0},z=ci("recharts-surface",l);return Vt.createElement("svg",fD({},ln(T,!0,"svg"),{className:z,width:a,height:r,style:h,viewBox:"".concat(E.x," ").concat(E.y," ").concat(E.width," ").concat(E.height)}),Vt.createElement("title",null,n),Vt.createElement("desc",null,w),e)}var Ode=["children","className"];function mD(){return mD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},mD.apply(this,arguments)}function Dde(t,e){if(t==null)return{};var a=Mde(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Mde(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}var fi=Vt.forwardRef(function(t,e){var a=t.children,r=t.className,s=Dde(t,Ode),l=ci("recharts-layer",r);return Vt.createElement("g",mD({className:l},ln(s,!0),{ref:e}),a)}),Vp=function(e,a){for(var r=arguments.length,s=new Array(r>2?r-2:0),l=2;l<r;l++)s[l-2]=arguments[l]},$N,Wk;function Ide(){if(Wk)return $N;Wk=1;function t(e,a,r){var s=-1,l=e.length;a<0&&(a=-a>l?0:l+a),r=r>l?l:r,r<0&&(r+=l),l=a>r?0:r-a>>>0,a>>>=0;for(var h=Array(l);++s<l;)h[s]=e[s+a];return h}return $N=t,$N}var KN,Yk;function Lde(){if(Yk)return KN;Yk=1;var t=Ide();function e(a,r,s){var l=a.length;return s=s===void 0?l:s,!r&&s>=l?a:t(a,r,s)}return KN=e,KN}var WN,Xk;function BK(){if(Xk)return WN;Xk=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",s=e+a+r,l="\\ufe0e\\ufe0f",h="\\u200d",n=RegExp("["+h+t+s+l+"]");function w(T){return n.test(T)}return WN=w,WN}var YN,Jk;function Fde(){if(Jk)return YN;Jk=1;function t(e){return e.split("")}return YN=t,YN}var XN,Qk;function Ude(){if(Qk)return XN;Qk=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",s=e+a+r,l="\\ufe0e\\ufe0f",h="["+t+"]",n="["+s+"]",w="\\ud83c[\\udffb-\\udfff]",T="(?:"+n+"|"+w+")",E="[^"+t+"]",z="(?:\\ud83c[\\udde6-\\uddff]){2}",k="[\\ud800-\\udbff][\\udc00-\\udfff]",U="\\u200d",Z=T+"?",q="["+l+"]?",$="(?:"+U+"(?:"+[E,z,k].join("|")+")"+q+Z+")*",J=q+Z+$,ie="(?:"+[E+n+"?",n,z,k,h].join("|")+")",de=RegExp(w+"(?="+w+")|"+ie+J,"g");function ge(he){return he.match(de)||[]}return XN=ge,XN}var JN,eB;function kde(){if(eB)return JN;eB=1;var t=Fde(),e=BK(),a=Ude();function r(s){return e(s)?a(s):t(s)}return JN=r,JN}var QN,tB;function Bde(){if(tB)return QN;tB=1;var t=Lde(),e=BK(),a=kde(),r=IK();function s(l){return function(h){h=r(h);var n=e(h)?a(h):void 0,w=n?n[0]:h.charAt(0),T=n?t(n,1).join(""):h.slice(1);return w[l]()+T}}return QN=s,QN}var eV,aB;function Gde(){if(aB)return eV;aB=1;var t=Bde(),e=t("toUpperCase");return eV=e,eV}var jde=Gde();const vx=Ji(jde);function vo(t){return function(){return t}}const GK=Math.cos,Sb=Math.sin,Lp=Math.sqrt,Cb=Math.PI,wx=2*Cb,yD=Math.PI,gD=2*yD,FA=1e-6,Zde=gD-FA;function jK(t){this._+=t[0];for(let e=1,a=t.length;e<a;++e)this._+=arguments[e]+t[e]}function qde(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return jK;const a=10**e;return function(r){this._+=r[0];for(let s=1,l=r.length;s<l;++s)this._+=Math.round(arguments[s]*a)/a+r[s]}}class Hde{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?jK:qde(e)}moveTo(e,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,a){this._append`L${this._x1=+e},${this._y1=+a}`}quadraticCurveTo(e,a,r,s){this._append`Q${+e},${+a},${this._x1=+r},${this._y1=+s}`}bezierCurveTo(e,a,r,s,l,h){this._append`C${+e},${+a},${+r},${+s},${this._x1=+l},${this._y1=+h}`}arcTo(e,a,r,s,l){if(e=+e,a=+a,r=+r,s=+s,l=+l,l<0)throw new Error(`negative radius: ${l}`);let h=this._x1,n=this._y1,w=r-e,T=s-a,E=h-e,z=n-a,k=E*E+z*z;if(this._x1===null)this._append`M${this._x1=e},${this._y1=a}`;else if(k>FA)if(!(Math.abs(z*w-T*E)>FA)||!l)this._append`L${this._x1=e},${this._y1=a}`;else{let U=r-h,Z=s-n,q=w*w+T*T,$=U*U+Z*Z,J=Math.sqrt(q),ie=Math.sqrt(k),de=l*Math.tan((yD-Math.acos((q+k-$)/(2*J*ie)))/2),ge=de/ie,he=de/J;Math.abs(ge-1)>FA&&this._append`L${e+ge*E},${a+ge*z}`,this._append`A${l},${l},0,0,${+(z*U>E*Z)},${this._x1=e+he*w},${this._y1=a+he*T}`}}arc(e,a,r,s,l,h){if(e=+e,a=+a,r=+r,h=!!h,r<0)throw new Error(`negative radius: ${r}`);let n=r*Math.cos(s),w=r*Math.sin(s),T=e+n,E=a+w,z=1^h,k=h?s-l:l-s;this._x1===null?this._append`M${T},${E}`:(Math.abs(this._x1-T)>FA||Math.abs(this._y1-E)>FA)&&this._append`L${T},${E}`,r&&(k<0&&(k=k%gD+gD),k>Zde?this._append`A${r},${r},0,1,${z},${e-n},${a-w}A${r},${r},0,1,${z},${this._x1=T},${this._y1=E}`:k>FA&&this._append`A${r},${r},0,${+(k>=yD)},${z},${this._x1=e+r*Math.cos(l)},${this._y1=a+r*Math.sin(l)}`)}rect(e,a,r,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}h${r=+r}v${+s}h${-r}Z`}toString(){return this._}}function zI(t){let e=3;return t.digits=function(a){if(!arguments.length)return e;if(a==null)e=null;else{const r=Math.floor(a);if(!(r>=0))throw new RangeError(`invalid digits: ${a}`);e=r}return t},()=>new Hde(e)}function OI(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ZK(t){this._context=t}ZK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Rx(t){return new ZK(t)}function qK(t){return t[0]}function HK(t){return t[1]}function $K(t,e){var a=vo(!0),r=null,s=Rx,l=null,h=zI(n);t=typeof t=="function"?t:t===void 0?qK:vo(t),e=typeof e=="function"?e:e===void 0?HK:vo(e);function n(w){var T,E=(w=OI(w)).length,z,k=!1,U;for(r==null&&(l=s(U=h())),T=0;T<=E;++T)!(T<E&&a(z=w[T],T,w))===k&&((k=!k)?l.lineStart():l.lineEnd()),k&&l.point(+t(z,T,w),+e(z,T,w));if(U)return l=null,U+""||null}return n.x=function(w){return arguments.length?(t=typeof w=="function"?w:vo(+w),n):t},n.y=function(w){return arguments.length?(e=typeof w=="function"?w:vo(+w),n):e},n.defined=function(w){return arguments.length?(a=typeof w=="function"?w:vo(!!w),n):a},n.curve=function(w){return arguments.length?(s=w,r!=null&&(l=s(r)),n):s},n.context=function(w){return arguments.length?(w==null?r=l=null:l=s(r=w),n):r},n}function sC(t,e,a){var r=null,s=vo(!0),l=null,h=Rx,n=null,w=zI(T);t=typeof t=="function"?t:t===void 0?qK:vo(+t),e=typeof e=="function"?e:vo(e===void 0?0:+e),a=typeof a=="function"?a:a===void 0?HK:vo(+a);function T(z){var k,U,Z,q=(z=OI(z)).length,$,J=!1,ie,de=new Array(q),ge=new Array(q);for(l==null&&(n=h(ie=w())),k=0;k<=q;++k){if(!(k<q&&s($=z[k],k,z))===J)if(J=!J)U=k,n.areaStart(),n.lineStart();else{for(n.lineEnd(),n.lineStart(),Z=k-1;Z>=U;--Z)n.point(de[Z],ge[Z]);n.lineEnd(),n.areaEnd()}J&&(de[k]=+t($,k,z),ge[k]=+e($,k,z),n.point(r?+r($,k,z):de[k],a?+a($,k,z):ge[k]))}if(ie)return n=null,ie+""||null}function E(){return $K().defined(s).curve(h).context(l)}return T.x=function(z){return arguments.length?(t=typeof z=="function"?z:vo(+z),r=null,T):t},T.x0=function(z){return arguments.length?(t=typeof z=="function"?z:vo(+z),T):t},T.x1=function(z){return arguments.length?(r=z==null?null:typeof z=="function"?z:vo(+z),T):r},T.y=function(z){return arguments.length?(e=typeof z=="function"?z:vo(+z),a=null,T):e},T.y0=function(z){return arguments.length?(e=typeof z=="function"?z:vo(+z),T):e},T.y1=function(z){return arguments.length?(a=z==null?null:typeof z=="function"?z:vo(+z),T):a},T.lineX0=T.lineY0=function(){return E().x(t).y(e)},T.lineY1=function(){return E().x(t).y(a)},T.lineX1=function(){return E().x(r).y(e)},T.defined=function(z){return arguments.length?(s=typeof z=="function"?z:vo(!!z),T):s},T.curve=function(z){return arguments.length?(h=z,l!=null&&(n=h(l)),T):h},T.context=function(z){return arguments.length?(z==null?l=n=null:n=h(l=z),T):l},T}class KK{constructor(e,a){this._context=e,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,a){switch(e=+e,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,a):this._context.moveTo(e,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,a,e,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,e,this._y0,e,a);break}}this._x0=e,this._y0=a}}function $de(t){return new KK(t,!0)}function Kde(t){return new KK(t,!1)}const DI={draw(t,e){const a=Lp(e/Cb);t.moveTo(a,0),t.arc(0,0,a,0,wx)}},Wde={draw(t,e){const a=Lp(e/5)/2;t.moveTo(-3*a,-a),t.lineTo(-a,-a),t.lineTo(-a,-3*a),t.lineTo(a,-3*a),t.lineTo(a,-a),t.lineTo(3*a,-a),t.lineTo(3*a,a),t.lineTo(a,a),t.lineTo(a,3*a),t.lineTo(-a,3*a),t.lineTo(-a,a),t.lineTo(-3*a,a),t.closePath()}},WK=Lp(1/3),Yde=WK*2,Xde={draw(t,e){const a=Lp(e/Yde),r=a*WK;t.moveTo(0,-a),t.lineTo(r,0),t.lineTo(0,a),t.lineTo(-r,0),t.closePath()}},Jde={draw(t,e){const a=Lp(e),r=-a/2;t.rect(r,r,a,a)}},Qde=.8908130915292852,YK=Sb(Cb/10)/Sb(7*Cb/10),ehe=Sb(wx/10)*YK,the=-GK(wx/10)*YK,ahe={draw(t,e){const a=Lp(e*Qde),r=ehe*a,s=the*a;t.moveTo(0,-a),t.lineTo(r,s);for(let l=1;l<5;++l){const h=wx*l/5,n=GK(h),w=Sb(h);t.lineTo(w*a,-n*a),t.lineTo(n*r-w*s,w*r+n*s)}t.closePath()}},tV=Lp(3),rhe={draw(t,e){const a=-Lp(e/(tV*3));t.moveTo(0,a*2),t.lineTo(-tV*a,-a),t.lineTo(tV*a,-a),t.closePath()}},Mf=-.5,If=Lp(3)/2,AD=1/Lp(12),nhe=(AD/2+1)*3,ihe={draw(t,e){const a=Lp(e/nhe),r=a/2,s=a*AD,l=r,h=a*AD+a,n=-l,w=h;t.moveTo(r,s),t.lineTo(l,h),t.lineTo(n,w),t.lineTo(Mf*r-If*s,If*r+Mf*s),t.lineTo(Mf*l-If*h,If*l+Mf*h),t.lineTo(Mf*n-If*w,If*n+Mf*w),t.lineTo(Mf*r+If*s,Mf*s-If*r),t.lineTo(Mf*l+If*h,Mf*h-If*l),t.lineTo(Mf*n+If*w,Mf*w-If*n),t.closePath()}};function she(t,e){let a=null,r=zI(s);t=typeof t=="function"?t:vo(t||DI),e=typeof e=="function"?e:vo(e===void 0?64:+e);function s(){let l;if(a||(a=l=r()),t.apply(this,arguments).draw(a,+e.apply(this,arguments)),l)return a=null,l+""||null}return s.type=function(l){return arguments.length?(t=typeof l=="function"?l:vo(l),s):t},s.size=function(l){return arguments.length?(e=typeof l=="function"?l:vo(+l),s):e},s.context=function(l){return arguments.length?(a=l??null,s):a},s}function bb(){}function xb(t,e,a){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+a)/6)}function XK(t){this._context=t}XK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:xb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:xb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ohe(t){return new XK(t)}function JK(t){this._context=t}JK.prototype={areaStart:bb,areaEnd:bb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:xb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function lhe(t){return new JK(t)}function QK(t){this._context=t}QK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(a,r):this._context.moveTo(a,r);break;case 3:this._point=4;default:xb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function uhe(t){return new QK(t)}function eW(t){this._context=t}eW.prototype={areaStart:bb,areaEnd:bb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function che(t){return new eW(t)}function rB(t){return t<0?-1:1}function nB(t,e,a){var r=t._x1-t._x0,s=e-t._x1,l=(t._y1-t._y0)/(r||s<0&&-0),h=(a-t._y1)/(s||r<0&&-0),n=(l*s+h*r)/(r+s);return(rB(l)+rB(h))*Math.min(Math.abs(l),Math.abs(h),.5*Math.abs(n))||0}function iB(t,e){var a=t._x1-t._x0;return a?(3*(t._y1-t._y0)/a-e)/2:e}function aV(t,e,a){var r=t._x0,s=t._y0,l=t._x1,h=t._y1,n=(l-r)/3;t._context.bezierCurveTo(r+n,s+n*e,l-n,h-n*a,l,h)}function Pb(t){this._context=t}Pb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:aV(this,this._t0,iB(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var a=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,aV(this,iB(this,a=nB(this,t,e)),a);break;default:aV(this,this._t0,a=nB(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=a}}};function tW(t){this._context=new aW(t)}(tW.prototype=Object.create(Pb.prototype)).point=function(t,e){Pb.prototype.point.call(this,e,t)};function aW(t){this._context=t}aW.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,a,r,s,l){this._context.bezierCurveTo(e,t,r,a,l,s)}};function dhe(t){return new Pb(t)}function hhe(t){return new tW(t)}function rW(t){this._context=t}rW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,a=t.length;if(a)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),a===2)this._context.lineTo(t[1],e[1]);else for(var r=sB(t),s=sB(e),l=0,h=1;h<a;++l,++h)this._context.bezierCurveTo(r[0][l],s[0][l],r[1][l],s[1][l],t[h],e[h]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function sB(t){var e,a=t.length-1,r,s=new Array(a),l=new Array(a),h=new Array(a);for(s[0]=0,l[0]=2,h[0]=t[0]+2*t[1],e=1;e<a-1;++e)s[e]=1,l[e]=4,h[e]=4*t[e]+2*t[e+1];for(s[a-1]=2,l[a-1]=7,h[a-1]=8*t[a-1]+t[a],e=1;e<a;++e)r=s[e]/l[e-1],l[e]-=r,h[e]-=r*h[e-1];for(s[a-1]=h[a-1]/l[a-1],e=a-2;e>=0;--e)s[e]=(h[e]-s[e+1])/l[e];for(l[a-1]=(t[a]+s[a-1])/2,e=0;e<a-1;++e)l[e]=2*t[e+1]-s[e+1];return[s,l]}function fhe(t){return new rW(t)}function Tx(t,e){this._context=t,this._t=e}Tx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var a=this._x*(1-this._t)+t*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,e)}break}}this._x=t,this._y=e}};function phe(t){return new Tx(t,.5)}function mhe(t){return new Tx(t,0)}function yhe(t){return new Tx(t,1)}function rv(t,e){if((h=t.length)>1)for(var a=1,r,s,l=t[e[0]],h,n=l.length;a<h;++a)for(s=l,l=t[e[a]],r=0;r<n;++r)l[r][1]+=l[r][0]=isNaN(s[r][1])?s[r][0]:s[r][1]}function _D(t){for(var e=t.length,a=new Array(e);--e>=0;)a[e]=e;return a}function ghe(t,e){return t[e]}function Ahe(t){const e=[];return e.key=t,e}function _he(){var t=vo([]),e=_D,a=rv,r=ghe;function s(l){var h=Array.from(t.apply(this,arguments),Ahe),n,w=h.length,T=-1,E;for(const z of l)for(n=0,++T;n<w;++n)(h[n][T]=[0,+r(z,h[n].key,T,l)]).data=z;for(n=0,E=OI(e(h));n<w;++n)h[E[n]].index=n;return a(h,E),h}return s.keys=function(l){return arguments.length?(t=typeof l=="function"?l:vo(Array.from(l)),s):t},s.value=function(l){return arguments.length?(r=typeof l=="function"?l:vo(+l),s):r},s.order=function(l){return arguments.length?(e=l==null?_D:typeof l=="function"?l:vo(Array.from(l)),s):e},s.offset=function(l){return arguments.length?(a=l??rv,s):a},s}function vhe(t,e){if((r=t.length)>0){for(var a,r,s=0,l=t[0].length,h;s<l;++s){for(h=a=0;a<r;++a)h+=t[a][s][1]||0;if(h)for(a=0;a<r;++a)t[a][s][1]/=h}rv(t,e)}}function whe(t,e){if((s=t.length)>0){for(var a=0,r=t[e[0]],s,l=r.length;a<l;++a){for(var h=0,n=0;h<s;++h)n+=t[h][a][1]||0;r[a][1]+=r[a][0]=-n/2}rv(t,e)}}function Rhe(t,e){if(!(!((h=t.length)>0)||!((l=(s=t[e[0]]).length)>0))){for(var a=0,r=1,s,l,h;r<l;++r){for(var n=0,w=0,T=0;n<h;++n){for(var E=t[e[n]],z=E[r][1]||0,k=E[r-1][1]||0,U=(z-k)/2,Z=0;Z<n;++Z){var q=t[e[Z]],$=q[r][1]||0,J=q[r-1][1]||0;U+=$-J}w+=z,T+=U*z}s[r-1][1]+=s[r-1][0]=a,w&&(a-=T/w)}s[r-1][1]+=s[r-1][0]=a,rv(t,e)}}function AR(t){"@babel/helpers - typeof";return AR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AR(t)}var The=["type","size","sizeType"];function vD(){return vD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},vD.apply(this,arguments)}function oB(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function lB(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?oB(Object(a),!0).forEach(function(r){She(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):oB(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function She(t,e,a){return e=Che(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Che(t){var e=bhe(t,"string");return AR(e)=="symbol"?e:e+""}function bhe(t,e){if(AR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(AR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xhe(t,e){if(t==null)return{};var a=Phe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Phe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}var nW={symbolCircle:DI,symbolCross:Wde,symbolDiamond:Xde,symbolSquare:Jde,symbolStar:ahe,symbolTriangle:rhe,symbolWye:ihe},Ehe=Math.PI/180,Nhe=function(e){var a="symbol".concat(vx(e));return nW[a]||DI},Vhe=function(e,a,r){if(a==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*Ehe;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},zhe=function(e,a){nW["symbol".concat(vx(e))]=a},Sx=function(e){var a=e.type,r=a===void 0?"circle":a,s=e.size,l=s===void 0?64:s,h=e.sizeType,n=h===void 0?"area":h,w=xhe(e,The),T=lB(lB({},w),{},{type:r,size:l,sizeType:n}),E=function(){var $=Nhe(r),J=she().type($).size(Vhe(l,n,r));return J()},z=T.className,k=T.cx,U=T.cy,Z=ln(T,!0);return k===+k&&U===+U&&l===+l?Vt.createElement("path",vD({},Z,{className:ci("recharts-symbols",z),transform:"translate(".concat(k,", ").concat(U,")"),d:E()})):null};Sx.registerSymbol=zhe;function nv(t){"@babel/helpers - typeof";return nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nv(t)}function wD(){return wD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},wD.apply(this,arguments)}function uB(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Ohe(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?uB(Object(a),!0).forEach(function(r){_R(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):uB(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Dhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mhe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sW(r.key),r)}}function Ihe(t,e,a){return e&&Mhe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Lhe(t,e,a){return e=Eb(e),Fhe(t,iW()?Reflect.construct(e,a||[],Eb(t).constructor):e.apply(t,a))}function Fhe(t,e){if(e&&(nv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uhe(t)}function Uhe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iW=function(){return!!t})()}function Eb(t){return Eb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Eb(t)}function khe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RD(t,e)}function RD(t,e){return RD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},RD(t,e)}function _R(t,e,a){return e=sW(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function sW(t){var e=Bhe(t,"string");return nv(e)=="symbol"?e:e+""}function Bhe(t,e){if(nv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(nv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var _p=32,MI=function(t){function e(){return Dhe(this,e),Lhe(this,e,arguments)}return khe(e,t),Ihe(e,[{key:"renderIcon",value:function(r){var s=this.props.inactiveColor,l=_p/2,h=_p/6,n=_p/3,w=r.inactive?s:r.color;if(r.type==="plainline")return Vt.createElement("line",{strokeWidth:4,fill:"none",stroke:w,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:l,x2:_p,y2:l,className:"recharts-legend-icon"});if(r.type==="line")return Vt.createElement("path",{strokeWidth:4,fill:"none",stroke:w,d:"M0,".concat(l,"h").concat(n,`
            A`).concat(h,",").concat(h,",0,1,1,").concat(2*n,",").concat(l,`
            H`).concat(_p,"M").concat(2*n,",").concat(l,`
            A`).concat(h,",").concat(h,",0,1,1,").concat(n,",").concat(l),className:"recharts-legend-icon"});if(r.type==="rect")return Vt.createElement("path",{stroke:"none",fill:w,d:"M0,".concat(_p/8,"h").concat(_p,"v").concat(_p*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(Vt.isValidElement(r.legendIcon)){var T=Ohe({},r);return delete T.legendIcon,Vt.cloneElement(r.legendIcon,T)}return Vt.createElement(Sx,{fill:w,cx:l,cy:l,size:_p,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,s=this.props,l=s.payload,h=s.iconSize,n=s.layout,w=s.formatter,T=s.inactiveColor,E={x:0,y:0,width:_p,height:_p},z={display:n==="horizontal"?"inline-block":"block",marginRight:10},k={display:"inline-block",verticalAlign:"middle",marginRight:4};return l.map(function(U,Z){var q=U.formatter||w,$=ci(_R(_R({"recharts-legend-item":!0},"legend-item-".concat(Z),!0),"inactive",U.inactive));if(U.type==="none")return null;var J=Fn(U.value)?null:U.value;Vp(!Fn(U.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var ie=U.inactive?T:U.color;return Vt.createElement("li",wD({className:$,style:z,key:"legend-item-".concat(Z)},Dg(r.props,U,Z)),Vt.createElement(pD,{width:h,height:h,viewBox:E,style:k},r.renderIcon(U)),Vt.createElement("span",{className:"recharts-legend-item-text",style:{color:ie}},q?q(J,U,Z):J))})}},{key:"render",value:function(){var r=this.props,s=r.payload,l=r.layout,h=r.align;if(!s||!s.length)return null;var n={padding:0,margin:0,textAlign:l==="horizontal"?h:"left"};return Vt.createElement("ul",{className:"recharts-default-legend",style:n},this.renderItems())}}])}(nt.PureComponent);_R(MI,"displayName","Legend");_R(MI,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var rV,cB;function Ghe(){if(cB)return rV;cB=1;var t=gx();function e(){this.__data__=new t,this.size=0}return rV=e,rV}var nV,dB;function jhe(){if(dB)return nV;dB=1;function t(e){var a=this.__data__,r=a.delete(e);return this.size=a.size,r}return nV=t,nV}var iV,hB;function Zhe(){if(hB)return iV;hB=1;function t(e){return this.__data__.get(e)}return iV=t,iV}var sV,fB;function qhe(){if(fB)return sV;fB=1;function t(e){return this.__data__.has(e)}return sV=t,sV}var oV,pB;function Hhe(){if(pB)return oV;pB=1;var t=gx(),e=bI(),a=xI(),r=200;function s(l,h){var n=this.__data__;if(n instanceof t){var w=n.__data__;if(!e||w.length<r-1)return w.push([l,h]),this.size=++n.size,this;n=this.__data__=new a(w)}return n.set(l,h),this.size=n.size,this}return oV=s,oV}var lV,mB;function oW(){if(mB)return lV;mB=1;var t=gx(),e=Ghe(),a=jhe(),r=Zhe(),s=qhe(),l=Hhe();function h(n){var w=this.__data__=new t(n);this.size=w.size}return h.prototype.clear=e,h.prototype.delete=a,h.prototype.get=r,h.prototype.has=s,h.prototype.set=l,lV=h,lV}var uV,yB;function $he(){if(yB)return uV;yB=1;var t="__lodash_hash_undefined__";function e(a){return this.__data__.set(a,t),this}return uV=e,uV}var cV,gB;function Khe(){if(gB)return cV;gB=1;function t(e){return this.__data__.has(e)}return cV=t,cV}var dV,AB;function lW(){if(AB)return dV;AB=1;var t=xI(),e=$he(),a=Khe();function r(s){var l=-1,h=s==null?0:s.length;for(this.__data__=new t;++l<h;)this.add(s[l])}return r.prototype.add=r.prototype.push=e,r.prototype.has=a,dV=r,dV}var hV,_B;function uW(){if(_B)return hV;_B=1;function t(e,a){for(var r=-1,s=e==null?0:e.length;++r<s;)if(a(e[r],r,e))return!0;return!1}return hV=t,hV}var fV,vB;function cW(){if(vB)return fV;vB=1;function t(e,a){return e.has(a)}return fV=t,fV}var pV,wB;function dW(){if(wB)return pV;wB=1;var t=lW(),e=uW(),a=cW(),r=1,s=2;function l(h,n,w,T,E,z){var k=w&r,U=h.length,Z=n.length;if(U!=Z&&!(k&&Z>U))return!1;var q=z.get(h),$=z.get(n);if(q&&$)return q==n&&$==h;var J=-1,ie=!0,de=w&s?new t:void 0;for(z.set(h,n),z.set(n,h);++J<U;){var ge=h[J],he=n[J];if(T)var Ae=k?T(he,ge,J,n,h,z):T(ge,he,J,h,n,z);if(Ae!==void 0){if(Ae)continue;ie=!1;break}if(de){if(!e(n,function(me,Re){if(!a(de,Re)&&(ge===me||E(ge,me,w,T,z)))return de.push(Re)})){ie=!1;break}}else if(!(ge===he||E(ge,he,w,T,z))){ie=!1;break}}return z.delete(h),z.delete(n),ie}return pV=l,pV}var mV,RB;function Whe(){if(RB)return mV;RB=1;var t=Om(),e=t.Uint8Array;return mV=e,mV}var yV,TB;function Yhe(){if(TB)return yV;TB=1;function t(e){var a=-1,r=Array(e.size);return e.forEach(function(s,l){r[++a]=[l,s]}),r}return yV=t,yV}var gV,SB;function II(){if(SB)return gV;SB=1;function t(e){var a=-1,r=Array(e.size);return e.forEach(function(s){r[++a]=s}),r}return gV=t,gV}var AV,CB;function Xhe(){if(CB)return AV;CB=1;var t=xT(),e=Whe(),a=CI(),r=dW(),s=Yhe(),l=II(),h=1,n=2,w="[object Boolean]",T="[object Date]",E="[object Error]",z="[object Map]",k="[object Number]",U="[object RegExp]",Z="[object Set]",q="[object String]",$="[object Symbol]",J="[object ArrayBuffer]",ie="[object DataView]",de=t?t.prototype:void 0,ge=de?de.valueOf:void 0;function he(Ae,me,Re,be,De,ne,ye){switch(Re){case ie:if(Ae.byteLength!=me.byteLength||Ae.byteOffset!=me.byteOffset)return!1;Ae=Ae.buffer,me=me.buffer;case J:return!(Ae.byteLength!=me.byteLength||!ne(new e(Ae),new e(me)));case w:case T:case k:return a(+Ae,+me);case E:return Ae.name==me.name&&Ae.message==me.message;case U:case q:return Ae==me+"";case z:var Me=s;case Z:var ze=be&h;if(Me||(Me=l),Ae.size!=me.size&&!ze)return!1;var Le=ye.get(Ae);if(Le)return Le==me;be|=n,ye.set(Ae,me);var Ie=r(Me(Ae),Me(me),be,De,ne,ye);return ye.delete(Ae),Ie;case $:if(ge)return ge.call(Ae)==ge.call(me)}return!1}return AV=he,AV}var _V,bB;function hW(){if(bB)return _V;bB=1;function t(e,a){for(var r=-1,s=a.length,l=e.length;++r<s;)e[l+r]=a[r];return e}return _V=t,_V}var vV,xB;function Jhe(){if(xB)return vV;xB=1;var t=hW(),e=Eh();function a(r,s,l){var h=s(r);return e(r)?h:t(h,l(r))}return vV=a,vV}var wV,PB;function Qhe(){if(PB)return wV;PB=1;function t(e,a){for(var r=-1,s=e==null?0:e.length,l=0,h=[];++r<s;){var n=e[r];a(n,r,e)&&(h[l++]=n)}return h}return wV=t,wV}var RV,EB;function efe(){if(EB)return RV;EB=1;function t(){return[]}return RV=t,RV}var TV,NB;function tfe(){if(NB)return TV;NB=1;var t=Qhe(),e=efe(),a=Object.prototype,r=a.propertyIsEnumerable,s=Object.getOwnPropertySymbols,l=s?function(h){return h==null?[]:(h=Object(h),t(s(h),function(n){return r.call(h,n)}))}:e;return TV=l,TV}var SV,VB;function afe(){if(VB)return SV;VB=1;function t(e,a){for(var r=-1,s=Array(e);++r<e;)s[r]=a(r);return s}return SV=t,SV}var CV,zB;function rfe(){if(zB)return CV;zB=1;var t=by(),e=xy(),a="[object Arguments]";function r(s){return e(s)&&t(s)==a}return CV=r,CV}var bV,OB;function LI(){if(OB)return bV;OB=1;var t=rfe(),e=xy(),a=Object.prototype,r=a.hasOwnProperty,s=a.propertyIsEnumerable,l=t(function(){return arguments}())?t:function(h){return e(h)&&r.call(h,"callee")&&!s.call(h,"callee")};return bV=l,bV}var Ow={exports:{}},xV,DB;function nfe(){if(DB)return xV;DB=1;function t(){return!1}return xV=t,xV}Ow.exports;var MB;function fW(){return MB||(MB=1,function(t,e){var a=Om(),r=nfe(),s=e&&!e.nodeType&&e,l=s&&!0&&t&&!t.nodeType&&t,h=l&&l.exports===s,n=h?a.Buffer:void 0,w=n?n.isBuffer:void 0,T=w||r;t.exports=T}(Ow,Ow.exports)),Ow.exports}var PV,IB;function FI(){if(IB)return PV;IB=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function a(r,s){var l=typeof r;return s=s??t,!!s&&(l=="number"||l!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<s}return PV=a,PV}var EV,LB;function UI(){if(LB)return EV;LB=1;var t=9007199254740991;function e(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=t}return EV=e,EV}var NV,FB;function ife(){if(FB)return NV;FB=1;var t=by(),e=UI(),a=xy(),r="[object Arguments]",s="[object Array]",l="[object Boolean]",h="[object Date]",n="[object Error]",w="[object Function]",T="[object Map]",E="[object Number]",z="[object Object]",k="[object RegExp]",U="[object Set]",Z="[object String]",q="[object WeakMap]",$="[object ArrayBuffer]",J="[object DataView]",ie="[object Float32Array]",de="[object Float64Array]",ge="[object Int8Array]",he="[object Int16Array]",Ae="[object Int32Array]",me="[object Uint8Array]",Re="[object Uint8ClampedArray]",be="[object Uint16Array]",De="[object Uint32Array]",ne={};ne[ie]=ne[de]=ne[ge]=ne[he]=ne[Ae]=ne[me]=ne[Re]=ne[be]=ne[De]=!0,ne[r]=ne[s]=ne[$]=ne[l]=ne[J]=ne[h]=ne[n]=ne[w]=ne[T]=ne[E]=ne[z]=ne[k]=ne[U]=ne[Z]=ne[q]=!1;function ye(Me){return a(Me)&&e(Me.length)&&!!ne[t(Me)]}return NV=ye,NV}var VV,UB;function pW(){if(UB)return VV;UB=1;function t(e){return function(a){return e(a)}}return VV=t,VV}var Dw={exports:{}};Dw.exports;var kB;function sfe(){return kB||(kB=1,function(t,e){var a=OK(),r=e&&!e.nodeType&&e,s=r&&!0&&t&&!t.nodeType&&t,l=s&&s.exports===r,h=l&&a.process,n=function(){try{var w=s&&s.require&&s.require("util").types;return w||h&&h.binding&&h.binding("util")}catch{}}();t.exports=n}(Dw,Dw.exports)),Dw.exports}var zV,BB;function mW(){if(BB)return zV;BB=1;var t=ife(),e=pW(),a=sfe(),r=a&&a.isTypedArray,s=r?e(r):t;return zV=s,zV}var OV,GB;function ofe(){if(GB)return OV;GB=1;var t=afe(),e=LI(),a=Eh(),r=fW(),s=FI(),l=mW(),h=Object.prototype,n=h.hasOwnProperty;function w(T,E){var z=a(T),k=!z&&e(T),U=!z&&!k&&r(T),Z=!z&&!k&&!U&&l(T),q=z||k||U||Z,$=q?t(T.length,String):[],J=$.length;for(var ie in T)(E||n.call(T,ie))&&!(q&&(ie=="length"||U&&(ie=="offset"||ie=="parent")||Z&&(ie=="buffer"||ie=="byteLength"||ie=="byteOffset")||s(ie,J)))&&$.push(ie);return $}return OV=w,OV}var DV,jB;function lfe(){if(jB)return DV;jB=1;var t=Object.prototype;function e(a){var r=a&&a.constructor,s=typeof r=="function"&&r.prototype||t;return a===s}return DV=e,DV}var MV,ZB;function yW(){if(ZB)return MV;ZB=1;function t(e,a){return function(r){return e(a(r))}}return MV=t,MV}var IV,qB;function ufe(){if(qB)return IV;qB=1;var t=yW(),e=t(Object.keys,Object);return IV=e,IV}var LV,HB;function cfe(){if(HB)return LV;HB=1;var t=lfe(),e=ufe(),a=Object.prototype,r=a.hasOwnProperty;function s(l){if(!t(l))return e(l);var h=[];for(var n in Object(l))r.call(l,n)&&n!="constructor"&&h.push(n);return h}return LV=s,LV}var FV,$B;function ET(){if($B)return FV;$B=1;var t=SI(),e=UI();function a(r){return r!=null&&e(r.length)&&!t(r)}return FV=a,FV}var UV,KB;function Cx(){if(KB)return UV;KB=1;var t=ofe(),e=cfe(),a=ET();function r(s){return a(s)?t(s):e(s)}return UV=r,UV}var kV,WB;function dfe(){if(WB)return kV;WB=1;var t=Jhe(),e=tfe(),a=Cx();function r(s){return t(s,a,e)}return kV=r,kV}var BV,YB;function hfe(){if(YB)return BV;YB=1;var t=dfe(),e=1,a=Object.prototype,r=a.hasOwnProperty;function s(l,h,n,w,T,E){var z=n&e,k=t(l),U=k.length,Z=t(h),q=Z.length;if(U!=q&&!z)return!1;for(var $=U;$--;){var J=k[$];if(!(z?J in h:r.call(h,J)))return!1}var ie=E.get(l),de=E.get(h);if(ie&&de)return ie==h&&de==l;var ge=!0;E.set(l,h),E.set(h,l);for(var he=z;++$<U;){J=k[$];var Ae=l[J],me=h[J];if(w)var Re=z?w(me,Ae,J,h,l,E):w(Ae,me,J,l,h,E);if(!(Re===void 0?Ae===me||T(Ae,me,n,w,E):Re)){ge=!1;break}he||(he=J=="constructor")}if(ge&&!he){var be=l.constructor,De=h.constructor;be!=De&&"constructor"in l&&"constructor"in h&&!(typeof be=="function"&&be instanceof be&&typeof De=="function"&&De instanceof De)&&(ge=!1)}return E.delete(l),E.delete(h),ge}return BV=s,BV}var GV,XB;function ffe(){if(XB)return GV;XB=1;var t=_0(),e=Om(),a=t(e,"DataView");return GV=a,GV}var jV,JB;function pfe(){if(JB)return jV;JB=1;var t=_0(),e=Om(),a=t(e,"Promise");return jV=a,jV}var ZV,QB;function gW(){if(QB)return ZV;QB=1;var t=_0(),e=Om(),a=t(e,"Set");return ZV=a,ZV}var qV,e8;function mfe(){if(e8)return qV;e8=1;var t=_0(),e=Om(),a=t(e,"WeakMap");return qV=a,qV}var HV,t8;function yfe(){if(t8)return HV;t8=1;var t=ffe(),e=bI(),a=pfe(),r=gW(),s=mfe(),l=by(),h=DK(),n="[object Map]",w="[object Object]",T="[object Promise]",E="[object Set]",z="[object WeakMap]",k="[object DataView]",U=h(t),Z=h(e),q=h(a),$=h(r),J=h(s),ie=l;return(t&&ie(new t(new ArrayBuffer(1)))!=k||e&&ie(new e)!=n||a&&ie(a.resolve())!=T||r&&ie(new r)!=E||s&&ie(new s)!=z)&&(ie=function(de){var ge=l(de),he=ge==w?de.constructor:void 0,Ae=he?h(he):"";if(Ae)switch(Ae){case U:return k;case Z:return n;case q:return T;case $:return E;case J:return z}return ge}),HV=ie,HV}var $V,a8;function gfe(){if(a8)return $V;a8=1;var t=oW(),e=dW(),a=Xhe(),r=hfe(),s=yfe(),l=Eh(),h=fW(),n=mW(),w=1,T="[object Arguments]",E="[object Array]",z="[object Object]",k=Object.prototype,U=k.hasOwnProperty;function Z(q,$,J,ie,de,ge){var he=l(q),Ae=l($),me=he?E:s(q),Re=Ae?E:s($);me=me==T?z:me,Re=Re==T?z:Re;var be=me==z,De=Re==z,ne=me==Re;if(ne&&h(q)){if(!h($))return!1;he=!0,be=!1}if(ne&&!be)return ge||(ge=new t),he||n(q)?e(q,$,J,ie,de,ge):a(q,$,me,J,ie,de,ge);if(!(J&w)){var ye=be&&U.call(q,"__wrapped__"),Me=De&&U.call($,"__wrapped__");if(ye||Me){var ze=ye?q.value():q,Le=Me?$.value():$;return ge||(ge=new t),de(ze,Le,J,ie,ge)}}return ne?(ge||(ge=new t),r(q,$,J,ie,de,ge)):!1}return $V=Z,$V}var KV,r8;function kI(){if(r8)return KV;r8=1;var t=gfe(),e=xy();function a(r,s,l,h,n){return r===s?!0:r==null||s==null||!e(r)&&!e(s)?r!==r&&s!==s:t(r,s,l,h,a,n)}return KV=a,KV}var WV,n8;function Afe(){if(n8)return WV;n8=1;var t=oW(),e=kI(),a=1,r=2;function s(l,h,n,w){var T=n.length,E=T,z=!w;if(l==null)return!E;for(l=Object(l);T--;){var k=n[T];if(z&&k[2]?k[1]!==l[k[0]]:!(k[0]in l))return!1}for(;++T<E;){k=n[T];var U=k[0],Z=l[U],q=k[1];if(z&&k[2]){if(Z===void 0&&!(U in l))return!1}else{var $=new t;if(w)var J=w(Z,q,U,l,h,$);if(!(J===void 0?e(q,Z,a|r,w,$):J))return!1}}return!0}return WV=s,WV}var YV,i8;function AW(){if(i8)return YV;i8=1;var t=Zg();function e(a){return a===a&&!t(a)}return YV=e,YV}var XV,s8;function _fe(){if(s8)return XV;s8=1;var t=AW(),e=Cx();function a(r){for(var s=e(r),l=s.length;l--;){var h=s[l],n=r[h];s[l]=[h,n,t(n)]}return s}return XV=a,XV}var JV,o8;function _W(){if(o8)return JV;o8=1;function t(e,a){return function(r){return r==null?!1:r[e]===a&&(a!==void 0||e in Object(r))}}return JV=t,JV}var QV,l8;function vfe(){if(l8)return QV;l8=1;var t=Afe(),e=_fe(),a=_W();function r(s){var l=e(s);return l.length==1&&l[0][2]?a(l[0][0],l[0][1]):function(h){return h===s||t(h,s,l)}}return QV=r,QV}var ez,u8;function wfe(){if(u8)return ez;u8=1;function t(e,a){return e!=null&&a in Object(e)}return ez=t,ez}var tz,c8;function Rfe(){if(c8)return tz;c8=1;var t=LK(),e=LI(),a=Eh(),r=FI(),s=UI(),l=_x();function h(n,w,T){w=t(w,n);for(var E=-1,z=w.length,k=!1;++E<z;){var U=l(w[E]);if(!(k=n!=null&&T(n,U)))break;n=n[U]}return k||++E!=z?k:(z=n==null?0:n.length,!!z&&s(z)&&r(U,z)&&(a(n)||e(n)))}return tz=h,tz}var az,d8;function Tfe(){if(d8)return az;d8=1;var t=wfe(),e=Rfe();function a(r,s){return r!=null&&e(r,s,t)}return az=a,az}var rz,h8;function Sfe(){if(h8)return rz;h8=1;var t=kI(),e=FK(),a=Tfe(),r=TI(),s=AW(),l=_W(),h=_x(),n=1,w=2;function T(E,z){return r(E)&&s(z)?l(h(E),z):function(k){var U=e(k,E);return U===void 0&&U===z?a(k,E):t(z,U,n|w)}}return rz=T,rz}var nz,f8;function $v(){if(f8)return nz;f8=1;function t(e){return e}return nz=t,nz}var iz,p8;function Cfe(){if(p8)return iz;p8=1;function t(e){return function(a){return a==null?void 0:a[e]}}return iz=t,iz}var sz,m8;function bfe(){if(m8)return sz;m8=1;var t=EI();function e(a){return function(r){return t(r,a)}}return sz=e,sz}var oz,y8;function xfe(){if(y8)return oz;y8=1;var t=Cfe(),e=bfe(),a=TI(),r=_x();function s(l){return a(l)?t(r(l)):e(l)}return oz=s,oz}var lz,g8;function Dm(){if(g8)return lz;g8=1;var t=vfe(),e=Sfe(),a=$v(),r=Eh(),s=xfe();function l(h){return typeof h=="function"?h:h==null?a:typeof h=="object"?r(h)?e(h[0],h[1]):t(h):s(h)}return lz=l,lz}var uz,A8;function vW(){if(A8)return uz;A8=1;function t(e,a,r,s){for(var l=e.length,h=r+(s?1:-1);s?h--:++h<l;)if(a(e[h],h,e))return h;return-1}return uz=t,uz}var cz,_8;function Pfe(){if(_8)return cz;_8=1;function t(e){return e!==e}return cz=t,cz}var dz,v8;function Efe(){if(v8)return dz;v8=1;function t(e,a,r){for(var s=r-1,l=e.length;++s<l;)if(e[s]===a)return s;return-1}return dz=t,dz}var hz,w8;function Nfe(){if(w8)return hz;w8=1;var t=vW(),e=Pfe(),a=Efe();function r(s,l,h){return l===l?a(s,l,h):t(s,e,h)}return hz=r,hz}var fz,R8;function Vfe(){if(R8)return fz;R8=1;var t=Nfe();function e(a,r){var s=a==null?0:a.length;return!!s&&t(a,r,0)>-1}return fz=e,fz}var pz,T8;function zfe(){if(T8)return pz;T8=1;function t(e,a,r){for(var s=-1,l=e==null?0:e.length;++s<l;)if(r(a,e[s]))return!0;return!1}return pz=t,pz}var mz,S8;function Ofe(){if(S8)return mz;S8=1;function t(){}return mz=t,mz}var yz,C8;function Dfe(){if(C8)return yz;C8=1;var t=gW(),e=Ofe(),a=II(),r=1/0,s=t&&1/a(new t([,-0]))[1]==r?function(l){return new t(l)}:e;return yz=s,yz}var gz,b8;function Mfe(){if(b8)return gz;b8=1;var t=lW(),e=Vfe(),a=zfe(),r=cW(),s=Dfe(),l=II(),h=200;function n(w,T,E){var z=-1,k=e,U=w.length,Z=!0,q=[],$=q;if(E)Z=!1,k=a;else if(U>=h){var J=T?null:s(w);if(J)return l(J);Z=!1,k=r,$=new t}else $=T?[]:q;e:for(;++z<U;){var ie=w[z],de=T?T(ie):ie;if(ie=E||ie!==0?ie:0,Z&&de===de){for(var ge=$.length;ge--;)if($[ge]===de)continue e;T&&$.push(de),q.push(ie)}else k($,de,E)||($!==q&&$.push(de),q.push(ie))}return q}return gz=n,gz}var Az,x8;function Ife(){if(x8)return Az;x8=1;var t=Dm(),e=Mfe();function a(r,s){return r&&r.length?e(r,t(s,2)):[]}return Az=a,Az}var Lfe=Ife();const P8=Ji(Lfe);function wW(t,e,a){return e===!0?P8(t,a):Fn(e)?P8(t,e):t}function iv(t){"@babel/helpers - typeof";return iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iv(t)}var Ffe=["ref"];function E8(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function ey(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?E8(Object(a),!0).forEach(function(r){bx(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):E8(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Ufe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N8(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,TW(r.key),r)}}function kfe(t,e,a){return e&&N8(t.prototype,e),a&&N8(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bfe(t,e,a){return e=Nb(e),Gfe(t,RW()?Reflect.construct(e,a||[],Nb(t).constructor):e.apply(t,a))}function Gfe(t,e){if(e&&(iv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jfe(t)}function jfe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RW=function(){return!!t})()}function Nb(t){return Nb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Nb(t)}function Zfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TD(t,e)}function TD(t,e){return TD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},TD(t,e)}function bx(t,e,a){return e=TW(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function TW(t){var e=qfe(t,"string");return iv(e)=="symbol"?e:e+""}function qfe(t,e){if(iv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(iv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Hfe(t,e){if(t==null)return{};var a=$fe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function $fe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function Kfe(t){return t.value}function Wfe(t,e){if(Vt.isValidElement(t))return Vt.cloneElement(t,e);if(typeof t=="function")return Vt.createElement(t,e);e.ref;var a=Hfe(e,Ffe);return Vt.createElement(MI,a)}var V8=1,tf=function(t){function e(){var a;Ufe(this,e);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return a=Bfe(this,e,[].concat(s)),bx(a,"lastBoundingBox",{width:-1,height:-1}),a}return Zfe(e,t),kfe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>V8||Math.abs(s.height-this.lastBoundingBox.height)>V8)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,r&&r(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ey({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var s=this.props,l=s.layout,h=s.align,n=s.verticalAlign,w=s.margin,T=s.chartWidth,E=s.chartHeight,z,k;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(h==="center"&&l==="vertical"){var U=this.getBBoxSnapshot();z={left:((T||0)-U.width)/2}}else z=h==="right"?{right:w&&w.right||0}:{left:w&&w.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(n==="middle"){var Z=this.getBBoxSnapshot();k={top:((E||0)-Z.height)/2}}else k=n==="bottom"?{bottom:w&&w.bottom||0}:{top:w&&w.top||0};return ey(ey({},z),k)}},{key:"render",value:function(){var r=this,s=this.props,l=s.content,h=s.width,n=s.height,w=s.wrapperStyle,T=s.payloadUniqBy,E=s.payload,z=ey(ey({position:"absolute",width:h||"auto",height:n||"auto"},this.getDefaultPosition(w)),w);return Vt.createElement("div",{className:"recharts-legend-wrapper",style:z,ref:function(U){r.wrapperNode=U}},Wfe(l,ey(ey({},this.props),{},{payload:wW(E,T,Kfe)})))}}],[{key:"getWithHeight",value:function(r,s){var l=ey(ey({},this.defaultProps),r.props),h=l.layout;return h==="vertical"&&mr(r.props.height)?{height:r.props.height}:h==="horizontal"?{width:r.props.width||s}:null}}])}(nt.PureComponent);bx(tf,"displayName","Legend");bx(tf,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var _z,z8;function Yfe(){if(z8)return _z;z8=1;var t=xT(),e=LI(),a=Eh(),r=t?t.isConcatSpreadable:void 0;function s(l){return a(l)||e(l)||!!(r&&l&&l[r])}return _z=s,_z}var vz,O8;function SW(){if(O8)return vz;O8=1;var t=hW(),e=Yfe();function a(r,s,l,h,n){var w=-1,T=r.length;for(l||(l=e),n||(n=[]);++w<T;){var E=r[w];s>0&&l(E)?s>1?a(E,s-1,l,h,n):t(n,E):h||(n[n.length]=E)}return n}return vz=a,vz}var wz,D8;function Xfe(){if(D8)return wz;D8=1;function t(e){return function(a,r,s){for(var l=-1,h=Object(a),n=s(a),w=n.length;w--;){var T=n[e?w:++l];if(r(h[T],T,h)===!1)break}return a}}return wz=t,wz}var Rz,M8;function Jfe(){if(M8)return Rz;M8=1;var t=Xfe(),e=t();return Rz=e,Rz}var Tz,I8;function CW(){if(I8)return Tz;I8=1;var t=Jfe(),e=Cx();function a(r,s){return r&&t(r,s,e)}return Tz=a,Tz}var Sz,L8;function Qfe(){if(L8)return Sz;L8=1;var t=ET();function e(a,r){return function(s,l){if(s==null)return s;if(!t(s))return a(s,l);for(var h=s.length,n=r?h:-1,w=Object(s);(r?n--:++n<h)&&l(w[n],n,w)!==!1;);return s}}return Sz=e,Sz}var Cz,F8;function BI(){if(F8)return Cz;F8=1;var t=CW(),e=Qfe(),a=e(t);return Cz=a,Cz}var bz,U8;function bW(){if(U8)return bz;U8=1;var t=BI(),e=ET();function a(r,s){var l=-1,h=e(r)?Array(r.length):[];return t(r,function(n,w,T){h[++l]=s(n,w,T)}),h}return bz=a,bz}var xz,k8;function epe(){if(k8)return xz;k8=1;function t(e,a){var r=e.length;for(e.sort(a);r--;)e[r]=e[r].value;return e}return xz=t,xz}var Pz,B8;function tpe(){if(B8)return Pz;B8=1;var t=Zv();function e(a,r){if(a!==r){var s=a!==void 0,l=a===null,h=a===a,n=t(a),w=r!==void 0,T=r===null,E=r===r,z=t(r);if(!T&&!z&&!n&&a>r||n&&w&&E&&!T&&!z||l&&w&&E||!s&&E||!h)return 1;if(!l&&!n&&!z&&a<r||z&&s&&h&&!l&&!n||T&&s&&h||!w&&h||!E)return-1}return 0}return Pz=e,Pz}var Ez,G8;function ape(){if(G8)return Ez;G8=1;var t=tpe();function e(a,r,s){for(var l=-1,h=a.criteria,n=r.criteria,w=h.length,T=s.length;++l<w;){var E=t(h[l],n[l]);if(E){if(l>=T)return E;var z=s[l];return E*(z=="desc"?-1:1)}}return a.index-r.index}return Ez=e,Ez}var Nz,j8;function rpe(){if(j8)return Nz;j8=1;var t=PI(),e=EI(),a=Dm(),r=bW(),s=epe(),l=pW(),h=ape(),n=$v(),w=Eh();function T(E,z,k){z.length?z=t(z,function(q){return w(q)?function($){return e($,q.length===1?q[0]:q)}:q}):z=[n];var U=-1;z=t(z,l(a));var Z=r(E,function(q,$,J){var ie=t(z,function(de){return de(q)});return{criteria:ie,index:++U,value:q}});return s(Z,function(q,$){return h(q,$,k)})}return Nz=T,Nz}var Vz,Z8;function npe(){if(Z8)return Vz;Z8=1;function t(e,a,r){switch(r.length){case 0:return e.call(a);case 1:return e.call(a,r[0]);case 2:return e.call(a,r[0],r[1]);case 3:return e.call(a,r[0],r[1],r[2])}return e.apply(a,r)}return Vz=t,Vz}var zz,q8;function ipe(){if(q8)return zz;q8=1;var t=npe(),e=Math.max;function a(r,s,l){return s=e(s===void 0?r.length-1:s,0),function(){for(var h=arguments,n=-1,w=e(h.length-s,0),T=Array(w);++n<w;)T[n]=h[s+n];n=-1;for(var E=Array(s+1);++n<s;)E[n]=h[n];return E[s]=l(T),t(r,this,E)}}return zz=a,zz}var Oz,H8;function spe(){if(H8)return Oz;H8=1;function t(e){return function(){return e}}return Oz=t,Oz}var Dz,$8;function xW(){if($8)return Dz;$8=1;var t=_0(),e=function(){try{var a=t(Object,"defineProperty");return a({},"",{}),a}catch{}}();return Dz=e,Dz}var Mz,K8;function ope(){if(K8)return Mz;K8=1;var t=spe(),e=xW(),a=$v(),r=e?function(s,l){return e(s,"toString",{configurable:!0,enumerable:!1,value:t(l),writable:!0})}:a;return Mz=r,Mz}var Iz,W8;function lpe(){if(W8)return Iz;W8=1;var t=800,e=16,a=Date.now;function r(s){var l=0,h=0;return function(){var n=a(),w=e-(n-h);if(h=n,w>0){if(++l>=t)return arguments[0]}else l=0;return s.apply(void 0,arguments)}}return Iz=r,Iz}var Lz,Y8;function upe(){if(Y8)return Lz;Y8=1;var t=ope(),e=lpe(),a=e(t);return Lz=a,Lz}var Fz,X8;function cpe(){if(X8)return Fz;X8=1;var t=$v(),e=ipe(),a=upe();function r(s,l){return a(e(s,l,t),s+"")}return Fz=r,Fz}var Uz,J8;function xx(){if(J8)return Uz;J8=1;var t=CI(),e=ET(),a=FI(),r=Zg();function s(l,h,n){if(!r(n))return!1;var w=typeof h;return(w=="number"?e(n)&&a(h,n.length):w=="string"&&h in n)?t(n[h],l):!1}return Uz=s,Uz}var kz,Q8;function dpe(){if(Q8)return kz;Q8=1;var t=SW(),e=rpe(),a=cpe(),r=xx(),s=a(function(l,h){if(l==null)return[];var n=h.length;return n>1&&r(l,h[0],h[1])?h=[]:n>2&&r(h[0],h[1],h[2])&&(h=[h[0]]),e(l,t(h,1),[])});return kz=s,kz}var hpe=dpe();const GI=Ji(hpe);function vR(t){"@babel/helpers - typeof";return vR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vR(t)}function SD(){return SD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},SD.apply(this,arguments)}function fpe(t,e){return gpe(t)||ype(t,e)||mpe(t,e)||ppe()}function ppe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mpe(t,e){if(t){if(typeof t=="string")return eG(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return eG(t,e)}}function eG(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function ype(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(E){T=!0,s=E}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function gpe(t){if(Array.isArray(t))return t}function tG(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Bz(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?tG(Object(a),!0).forEach(function(r){Ape(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):tG(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Ape(t,e,a){return e=_pe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function _pe(t){var e=vpe(t,"string");return vR(e)=="symbol"?e:e+""}function vpe(t,e){if(vR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(vR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wpe(t){return Array.isArray(t)&&Mu(t[0])&&Mu(t[1])?t.join(" ~ "):t}var Rpe=function(e){var a=e.separator,r=a===void 0?" : ":a,s=e.contentStyle,l=s===void 0?{}:s,h=e.itemStyle,n=h===void 0?{}:h,w=e.labelStyle,T=w===void 0?{}:w,E=e.payload,z=e.formatter,k=e.itemSorter,U=e.wrapperClassName,Z=e.labelClassName,q=e.label,$=e.labelFormatter,J=e.accessibilityLayer,ie=J===void 0?!1:J,de=function(){if(E&&E.length){var ye={padding:0,margin:0},Me=(k?GI(E,k):E).map(function(ze,Le){if(ze.type==="none")return null;var Ie=Bz({display:"block",paddingTop:4,paddingBottom:4,color:ze.color||"#000"},n),qe=ze.formatter||z||wpe,ke=ze.value,tt=ze.name,Ue=ke,He=tt;if(qe&&Ue!=null&&He!=null){var Ce=qe(ke,tt,ze,Le,E);if(Array.isArray(Ce)){var Se=fpe(Ce,2);Ue=Se[0],He=Se[1]}else Ue=Ce}return Vt.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Le),style:Ie},Mu(He)?Vt.createElement("span",{className:"recharts-tooltip-item-name"},He):null,Mu(He)?Vt.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,Vt.createElement("span",{className:"recharts-tooltip-item-value"},Ue),Vt.createElement("span",{className:"recharts-tooltip-item-unit"},ze.unit||""))});return Vt.createElement("ul",{className:"recharts-tooltip-item-list",style:ye},Me)}return null},ge=Bz({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},l),he=Bz({margin:0},T),Ae=!Un(q),me=Ae?q:"",Re=ci("recharts-default-tooltip",U),be=ci("recharts-tooltip-label",Z);Ae&&$&&E!==void 0&&E!==null&&(me=$(q,E));var De=ie?{role:"status","aria-live":"assertive"}:{};return Vt.createElement("div",SD({className:Re,style:ge},De),Vt.createElement("p",{className:be,style:he},Vt.isValidElement(me)?me:"".concat(me)),de())};function wR(t){"@babel/helpers - typeof";return wR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wR(t)}function oC(t,e,a){return e=Tpe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Tpe(t){var e=Spe(t,"string");return wR(e)=="symbol"?e:e+""}function Spe(t,e){if(wR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(wR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dw="recharts-tooltip-wrapper",Cpe={visibility:"hidden"};function bpe(t){var e=t.coordinate,a=t.translateX,r=t.translateY;return ci(dw,oC(oC(oC(oC({},"".concat(dw,"-right"),mr(a)&&e&&mr(e.x)&&a>=e.x),"".concat(dw,"-left"),mr(a)&&e&&mr(e.x)&&a<e.x),"".concat(dw,"-bottom"),mr(r)&&e&&mr(e.y)&&r>=e.y),"".concat(dw,"-top"),mr(r)&&e&&mr(e.y)&&r<e.y))}function aG(t){var e=t.allowEscapeViewBox,a=t.coordinate,r=t.key,s=t.offsetTopLeft,l=t.position,h=t.reverseDirection,n=t.tooltipDimension,w=t.viewBox,T=t.viewBoxDimension;if(l&&mr(l[r]))return l[r];var E=a[r]-n-s,z=a[r]+s;if(e[r])return h[r]?E:z;if(h[r]){var k=E,U=w[r];return k<U?Math.max(z,w[r]):Math.max(E,w[r])}var Z=z+n,q=w[r]+T;return Z>q?Math.max(E,w[r]):Math.max(z,w[r])}function xpe(t){var e=t.translateX,a=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(a,"px, 0)"):"translate(".concat(e,"px, ").concat(a,"px)")}}function Ppe(t){var e=t.allowEscapeViewBox,a=t.coordinate,r=t.offsetTopLeft,s=t.position,l=t.reverseDirection,h=t.tooltipBox,n=t.useTranslate3d,w=t.viewBox,T,E,z;return h.height>0&&h.width>0&&a?(E=aG({allowEscapeViewBox:e,coordinate:a,key:"x",offsetTopLeft:r,position:s,reverseDirection:l,tooltipDimension:h.width,viewBox:w,viewBoxDimension:w.width}),z=aG({allowEscapeViewBox:e,coordinate:a,key:"y",offsetTopLeft:r,position:s,reverseDirection:l,tooltipDimension:h.height,viewBox:w,viewBoxDimension:w.height}),T=xpe({translateX:E,translateY:z,useTranslate3d:n})):T=Cpe,{cssProperties:T,cssClasses:bpe({translateX:E,translateY:z,coordinate:a})}}function sv(t){"@babel/helpers - typeof";return sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sv(t)}function rG(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function nG(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?rG(Object(a),!0).forEach(function(r){bD(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):rG(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Epe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Npe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,EW(r.key),r)}}function Vpe(t,e,a){return e&&Npe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function zpe(t,e,a){return e=Vb(e),Ope(t,PW()?Reflect.construct(e,a||[],Vb(t).constructor):e.apply(t,a))}function Ope(t,e){if(e&&(sv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dpe(t)}function Dpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PW=function(){return!!t})()}function Vb(t){return Vb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Vb(t)}function Mpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CD(t,e)}function CD(t,e){return CD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},CD(t,e)}function bD(t,e,a){return e=EW(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function EW(t){var e=Ipe(t,"string");return sv(e)=="symbol"?e:e+""}function Ipe(t,e){if(sv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(sv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var iG=1,Lpe=function(t){function e(){var a;Epe(this,e);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return a=zpe(this,e,[].concat(s)),bD(a,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),bD(a,"handleKeyDown",function(h){if(h.key==="Escape"){var n,w,T,E;a.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(w=a.props.coordinate)===null||w===void 0?void 0:w.x)!==null&&n!==void 0?n:0,y:(T=(E=a.props.coordinate)===null||E===void 0?void 0:E.y)!==null&&T!==void 0?T:0}})}}),a}return Mpe(e,t),Vpe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>iG||Math.abs(r.height-this.state.lastBoundingBox.height)>iG)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,s=this.props,l=s.active,h=s.allowEscapeViewBox,n=s.animationDuration,w=s.animationEasing,T=s.children,E=s.coordinate,z=s.hasPayload,k=s.isAnimationActive,U=s.offset,Z=s.position,q=s.reverseDirection,$=s.useTranslate3d,J=s.viewBox,ie=s.wrapperStyle,de=Ppe({allowEscapeViewBox:h,coordinate:E,offsetTopLeft:U,position:Z,reverseDirection:q,tooltipBox:this.state.lastBoundingBox,useTranslate3d:$,viewBox:J}),ge=de.cssClasses,he=de.cssProperties,Ae=nG(nG({transition:k&&l?"transform ".concat(n,"ms ").concat(w):void 0},he),{},{pointerEvents:"none",visibility:!this.state.dismissed&&l&&z?"visible":"hidden",position:"absolute",top:0,left:0},ie);return Vt.createElement("div",{tabIndex:-1,className:ge,style:Ae,ref:function(Re){r.wrapperNode=Re}},T)}}])}(nt.PureComponent),Fpe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Py={isSsr:Fpe()};function ov(t){"@babel/helpers - typeof";return ov=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ov(t)}function sG(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function oG(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?sG(Object(a),!0).forEach(function(r){jI(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):sG(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Upe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kpe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,VW(r.key),r)}}function Bpe(t,e,a){return e&&kpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gpe(t,e,a){return e=zb(e),jpe(t,NW()?Reflect.construct(e,a||[],zb(t).constructor):e.apply(t,a))}function jpe(t,e){if(e&&(ov(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zpe(t)}function Zpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NW=function(){return!!t})()}function zb(t){return zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},zb(t)}function qpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xD(t,e)}function xD(t,e){return xD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},xD(t,e)}function jI(t,e,a){return e=VW(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function VW(t){var e=Hpe(t,"string");return ov(e)=="symbol"?e:e+""}function Hpe(t,e){if(ov(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(ov(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function $pe(t){return t.dataKey}function Kpe(t,e){return Vt.isValidElement(t)?Vt.cloneElement(t,e):typeof t=="function"?Vt.createElement(t,e):Vt.createElement(Rpe,e)}var ou=function(t){function e(){return Upe(this,e),Gpe(this,e,arguments)}return qpe(e,t),Bpe(e,[{key:"render",value:function(){var r=this,s=this.props,l=s.active,h=s.allowEscapeViewBox,n=s.animationDuration,w=s.animationEasing,T=s.content,E=s.coordinate,z=s.filterNull,k=s.isAnimationActive,U=s.offset,Z=s.payload,q=s.payloadUniqBy,$=s.position,J=s.reverseDirection,ie=s.useTranslate3d,de=s.viewBox,ge=s.wrapperStyle,he=Z??[];z&&he.length&&(he=wW(Z.filter(function(me){return me.value!=null&&(me.hide!==!0||r.props.includeHidden)}),q,$pe));var Ae=he.length>0;return Vt.createElement(Lpe,{allowEscapeViewBox:h,animationDuration:n,animationEasing:w,isAnimationActive:k,active:l,coordinate:E,hasPayload:Ae,offset:U,position:$,reverseDirection:J,useTranslate3d:ie,viewBox:de,wrapperStyle:ge},Kpe(T,oG(oG({},this.props),{},{payload:he})))}}])}(nt.PureComponent);jI(ou,"displayName","Tooltip");jI(ou,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Py.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Gz,lG;function Wpe(){if(lG)return Gz;lG=1;var t=Om(),e=function(){return t.Date.now()};return Gz=e,Gz}var jz,uG;function Ype(){if(uG)return jz;uG=1;var t=/\s/;function e(a){for(var r=a.length;r--&&t.test(a.charAt(r)););return r}return jz=e,jz}var Zz,cG;function Xpe(){if(cG)return Zz;cG=1;var t=Ype(),e=/^\s+/;function a(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return Zz=a,Zz}var qz,dG;function zW(){if(dG)return qz;dG=1;var t=Xpe(),e=Zg(),a=Zv(),r=NaN,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,h=/^0o[0-7]+$/i,n=parseInt;function w(T){if(typeof T=="number")return T;if(a(T))return r;if(e(T)){var E=typeof T.valueOf=="function"?T.valueOf():T;T=e(E)?E+"":E}if(typeof T!="string")return T===0?T:+T;T=t(T);var z=l.test(T);return z||h.test(T)?n(T.slice(2),z?2:8):s.test(T)?r:+T}return qz=w,qz}var Hz,hG;function Jpe(){if(hG)return Hz;hG=1;var t=Zg(),e=Wpe(),a=zW(),r="Expected a function",s=Math.max,l=Math.min;function h(n,w,T){var E,z,k,U,Z,q,$=0,J=!1,ie=!1,de=!0;if(typeof n!="function")throw new TypeError(r);w=a(w)||0,t(T)&&(J=!!T.leading,ie="maxWait"in T,k=ie?s(a(T.maxWait)||0,w):k,de="trailing"in T?!!T.trailing:de);function ge(Me){var ze=E,Le=z;return E=z=void 0,$=Me,U=n.apply(Le,ze),U}function he(Me){return $=Me,Z=setTimeout(Re,w),J?ge(Me):U}function Ae(Me){var ze=Me-q,Le=Me-$,Ie=w-ze;return ie?l(Ie,k-Le):Ie}function me(Me){var ze=Me-q,Le=Me-$;return q===void 0||ze>=w||ze<0||ie&&Le>=k}function Re(){var Me=e();if(me(Me))return be(Me);Z=setTimeout(Re,Ae(Me))}function be(Me){return Z=void 0,de&&E?ge(Me):(E=z=void 0,U)}function De(){Z!==void 0&&clearTimeout(Z),$=0,E=q=z=Z=void 0}function ne(){return Z===void 0?U:be(e())}function ye(){var Me=e(),ze=me(Me);if(E=arguments,z=this,q=Me,ze){if(Z===void 0)return he(q);if(ie)return clearTimeout(Z),Z=setTimeout(Re,w),ge(q)}return Z===void 0&&(Z=setTimeout(Re,w)),U}return ye.cancel=De,ye.flush=ne,ye}return Hz=h,Hz}var $z,fG;function Qpe(){if(fG)return $z;fG=1;var t=Jpe(),e=Zg(),a="Expected a function";function r(s,l,h){var n=!0,w=!0;if(typeof s!="function")throw new TypeError(a);return e(h)&&(n="leading"in h?!!h.leading:n,w="trailing"in h?!!h.trailing:w),t(s,l,{leading:n,maxWait:l,trailing:w})}return $z=r,$z}var eme=Qpe();const OW=Ji(eme);function RR(t){"@babel/helpers - typeof";return RR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RR(t)}function pG(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function lC(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?pG(Object(a),!0).forEach(function(r){tme(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):pG(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function tme(t,e,a){return e=ame(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function ame(t){var e=rme(t,"string");return RR(e)=="symbol"?e:e+""}function rme(t,e){if(RR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(RR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nme(t,e){return lme(t)||ome(t,e)||sme(t,e)||ime()}function ime(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sme(t,e){if(t){if(typeof t=="string")return mG(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return mG(t,e)}}function mG(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function ome(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(E){T=!0,s=E}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function lme(t){if(Array.isArray(t))return t}var Sp=nt.forwardRef(function(t,e){var a=t.aspect,r=t.initialDimension,s=r===void 0?{width:-1,height:-1}:r,l=t.width,h=l===void 0?"100%":l,n=t.height,w=n===void 0?"100%":n,T=t.minWidth,E=T===void 0?0:T,z=t.minHeight,k=t.maxHeight,U=t.children,Z=t.debounce,q=Z===void 0?0:Z,$=t.id,J=t.className,ie=t.onResize,de=t.style,ge=de===void 0?{}:de,he=nt.useRef(null),Ae=nt.useRef();Ae.current=ie,nt.useImperativeHandle(e,function(){return Object.defineProperty(he.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),he.current},configurable:!0})});var me=nt.useState({containerWidth:s.width,containerHeight:s.height}),Re=nme(me,2),be=Re[0],De=Re[1],ne=nt.useCallback(function(Me,ze){De(function(Le){var Ie=Math.round(Me),qe=Math.round(ze);return Le.containerWidth===Ie&&Le.containerHeight===qe?Le:{containerWidth:Ie,containerHeight:qe}})},[]);nt.useEffect(function(){var Me=function(tt){var Ue,He=tt[0].contentRect,Ce=He.width,Se=He.height;ne(Ce,Se),(Ue=Ae.current)===null||Ue===void 0||Ue.call(Ae,Ce,Se)};q>0&&(Me=OW(Me,q,{trailing:!0,leading:!1}));var ze=new ResizeObserver(Me),Le=he.current.getBoundingClientRect(),Ie=Le.width,qe=Le.height;return ne(Ie,qe),ze.observe(he.current),function(){ze.disconnect()}},[ne,q]);var ye=nt.useMemo(function(){var Me=be.containerWidth,ze=be.containerHeight;if(Me<0||ze<0)return null;Vp(HA(h)||HA(w),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,h,w),Vp(!a||a>0,"The aspect(%s) must be greater than zero.",a);var Le=HA(h)?Me:h,Ie=HA(w)?ze:w;a&&a>0&&(Le?Ie=Le/a:Ie&&(Le=Ie*a),k&&Ie>k&&(Ie=k)),Vp(Le>0||Ie>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Le,Ie,h,w,E,z,a);var qe=!Array.isArray(U)&&hy(U.type).endsWith("Chart");return Vt.Children.map(U,function(ke){return Vt.isValidElement(ke)?nt.cloneElement(ke,lC({width:Le,height:Ie},qe?{style:lC({height:"100%",width:"100%",maxHeight:Ie,maxWidth:Le},ke.props.style)}:{})):ke})},[a,U,w,k,z,E,be,h]);return Vt.createElement("div",{id:$?"".concat($):void 0,className:ci("recharts-responsive-container",J),style:lC(lC({},ge),{},{width:h,height:w,minWidth:E,minHeight:z,maxHeight:k}),ref:he},ye)}),lv=function(e){return null};lv.displayName="Cell";function TR(t){"@babel/helpers - typeof";return TR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},TR(t)}function yG(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function PD(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?yG(Object(a),!0).forEach(function(r){ume(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):yG(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function ume(t,e,a){return e=cme(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function cme(t){var e=dme(t,"string");return TR(e)=="symbol"?e:e+""}function dme(t,e){if(TR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(TR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var h_={widthCache:{},cacheCount:0},hme=2e3,fme={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},gG="recharts_measurement_span";function pme(t){var e=PD({},t);return Object.keys(e).forEach(function(a){e[a]||delete e[a]}),e}var Gw=function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Py.isSsr)return{width:0,height:0};var r=pme(a),s=JSON.stringify({text:e,copyStyle:r});if(h_.widthCache[s])return h_.widthCache[s];try{var l=document.getElementById(gG);l||(l=document.createElement("span"),l.setAttribute("id",gG),l.setAttribute("aria-hidden","true"),document.body.appendChild(l));var h=PD(PD({},fme),r);Object.assign(l.style,h),l.textContent="".concat(e);var n=l.getBoundingClientRect(),w={width:n.width,height:n.height};return h_.widthCache[s]=w,++h_.cacheCount>hme&&(h_.cacheCount=0,h_.widthCache={}),w}catch{return{width:0,height:0}}},mme=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function SR(t){"@babel/helpers - typeof";return SR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},SR(t)}function Ob(t,e){return _me(t)||Ame(t,e)||gme(t,e)||yme()}function yme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gme(t,e){if(t){if(typeof t=="string")return AG(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return AG(t,e)}}function AG(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function Ame(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e===0){if(Object(a)!==a)return;w=!1}else for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(E){T=!0,s=E}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function _me(t){if(Array.isArray(t))return t}function vme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _G(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Rme(r.key),r)}}function wme(t,e,a){return e&&_G(t.prototype,e),a&&_G(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Rme(t){var e=Tme(t,"string");return SR(e)=="symbol"?e:e+""}function Tme(t,e){if(SR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(SR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var vG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,wG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Sme=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Cme=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,DW={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},bme=Object.keys(DW),x_="NaN";function xme(t,e){return t*DW[e]}var uC=function(){function t(e,a){vme(this,t),this.num=e,this.unit=a,this.num=e,this.unit=a,Number.isNaN(e)&&(this.unit=""),a!==""&&!Sme.test(a)&&(this.num=NaN,this.unit=""),bme.includes(a)&&(this.num=xme(e,a),this.unit="px")}return wme(t,[{key:"add",value:function(a){return this.unit!==a.unit?new t(NaN,""):new t(this.num+a.num,this.unit)}},{key:"subtract",value:function(a){return this.unit!==a.unit?new t(NaN,""):new t(this.num-a.num,this.unit)}},{key:"multiply",value:function(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new t(NaN,""):new t(this.num*a.num,this.unit||a.unit)}},{key:"divide",value:function(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new t(NaN,""):new t(this.num/a.num,this.unit||a.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(a){var r,s=(r=Cme.exec(a))!==null&&r!==void 0?r:[],l=Ob(s,3),h=l[1],n=l[2];return new t(parseFloat(h),n??"")}}])}();function MW(t){if(t.includes(x_))return x_;for(var e=t;e.includes("*")||e.includes("/");){var a,r=(a=vG.exec(e))!==null&&a!==void 0?a:[],s=Ob(r,4),l=s[1],h=s[2],n=s[3],w=uC.parse(l??""),T=uC.parse(n??""),E=h==="*"?w.multiply(T):w.divide(T);if(E.isNaN())return x_;e=e.replace(vG,E.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var z,k=(z=wG.exec(e))!==null&&z!==void 0?z:[],U=Ob(k,4),Z=U[1],q=U[2],$=U[3],J=uC.parse(Z??""),ie=uC.parse($??""),de=q==="+"?J.add(ie):J.subtract(ie);if(de.isNaN())return x_;e=e.replace(wG,de.toString())}return e}var RG=/\(([^()]*)\)/;function Pme(t){for(var e=t;e.includes("(");){var a=RG.exec(e),r=Ob(a,2),s=r[1];e=e.replace(RG,MW(s))}return e}function Eme(t){var e=t.replace(/\s+/g,"");return e=Pme(e),e=MW(e),e}function Nme(t){try{return Eme(t)}catch{return x_}}function Kz(t){var e=Nme(t.slice(5,-1));return e===x_?"":e}var Vme=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],zme=["dx","dy","angle","className","breakAll"];function ED(){return ED=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ED.apply(this,arguments)}function TG(t,e){if(t==null)return{};var a=Ome(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Ome(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function SG(t,e){return Lme(t)||Ime(t,e)||Mme(t,e)||Dme()}function Dme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mme(t,e){if(t){if(typeof t=="string")return CG(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return CG(t,e)}}function CG(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function Ime(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e===0){if(Object(a)!==a)return;w=!1}else for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(E){T=!0,s=E}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function Lme(t){if(Array.isArray(t))return t}var IW=/[ \f\n\r\t\v\u2028\u2029]+/,LW=function(e){var a=e.children,r=e.breakAll,s=e.style;try{var l=[];Un(a)||(r?l=a.toString().split(""):l=a.toString().split(IW));var h=l.map(function(w){return{word:w,width:Gw(w,s).width}}),n=r?0:Gw("",s).width;return{wordsWithComputedWidth:h,spaceWidth:n}}catch{return null}},Fme=function(e,a,r,s,l){var h=e.maxLines,n=e.children,w=e.style,T=e.breakAll,E=mr(h),z=n,k=function(){var Le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Le.reduce(function(Ie,qe){var ke=qe.word,tt=qe.width,Ue=Ie[Ie.length-1];if(Ue&&(s==null||l||Ue.width+tt+r<Number(s)))Ue.words.push(ke),Ue.width+=tt+r;else{var He={words:[ke],width:tt};Ie.push(He)}return Ie},[])},U=k(a),Z=function(Le){return Le.reduce(function(Ie,qe){return Ie.width>qe.width?Ie:qe})};if(!E)return U;for(var q="",$=function(Le){var Ie=z.slice(0,Le),qe=LW({breakAll:T,style:w,children:Ie+q}).wordsWithComputedWidth,ke=k(qe),tt=ke.length>h||Z(ke).width>Number(s);return[tt,ke]},J=0,ie=z.length-1,de=0,ge;J<=ie&&de<=z.length-1;){var he=Math.floor((J+ie)/2),Ae=he-1,me=$(Ae),Re=SG(me,2),be=Re[0],De=Re[1],ne=$(he),ye=SG(ne,1),Me=ye[0];if(!be&&!Me&&(J=he+1),be&&Me&&(ie=he-1),!be&&Me){ge=De;break}de++}return ge||U},bG=function(e){var a=Un(e)?[]:e.toString().split(IW);return[{words:a}]},Ume=function(e){var a=e.width,r=e.scaleToFit,s=e.children,l=e.style,h=e.breakAll,n=e.maxLines;if((a||r)&&!Py.isSsr){var w,T,E=LW({breakAll:h,children:s,style:l});if(E){var z=E.wordsWithComputedWidth,k=E.spaceWidth;w=z,T=k}else return bG(s);return Fme({breakAll:h,children:s,maxLines:n,style:l},w,T,a,r)}return bG(s)},xG="#808080",c0=function(e){var a=e.x,r=a===void 0?0:a,s=e.y,l=s===void 0?0:s,h=e.lineHeight,n=h===void 0?"1em":h,w=e.capHeight,T=w===void 0?"0.71em":w,E=e.scaleToFit,z=E===void 0?!1:E,k=e.textAnchor,U=k===void 0?"start":k,Z=e.verticalAnchor,q=Z===void 0?"end":Z,$=e.fill,J=$===void 0?xG:$,ie=TG(e,Vme),de=nt.useMemo(function(){return Ume({breakAll:ie.breakAll,children:ie.children,maxLines:ie.maxLines,scaleToFit:z,style:ie.style,width:ie.width})},[ie.breakAll,ie.children,ie.maxLines,z,ie.style,ie.width]),ge=ie.dx,he=ie.dy,Ae=ie.angle,me=ie.className,Re=ie.breakAll,be=TG(ie,zme);if(!Mu(r)||!Mu(l))return null;var De=r+(mr(ge)?ge:0),ne=l+(mr(he)?he:0),ye;switch(q){case"start":ye=Kz("calc(".concat(T,")"));break;case"middle":ye=Kz("calc(".concat((de.length-1)/2," * -").concat(n," + (").concat(T," / 2))"));break;default:ye=Kz("calc(".concat(de.length-1," * -").concat(n,")"));break}var Me=[];if(z){var ze=de[0].width,Le=ie.width;Me.push("scale(".concat((mr(Le)?Le/ze:1)/ze,")"))}return Ae&&Me.push("rotate(".concat(Ae,", ").concat(De,", ").concat(ne,")")),Me.length&&(be.transform=Me.join(" ")),Vt.createElement("text",ED({},ln(be,!0),{x:De,y:ne,className:ci("recharts-text",me),textAnchor:U,fill:J.includes("url")?xG:J}),de.map(function(Ie,qe){var ke=Ie.words.join(Re?"":" ");return Vt.createElement("tspan",{x:De,dy:qe===0?ye:n,key:"".concat(ke,"-").concat(qe)},ke)}))};function Ng(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function kme(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ZI(t){let e,a,r;t.length!==2?(e=Ng,a=(n,w)=>Ng(t(n),w),r=(n,w)=>t(n)-w):(e=t===Ng||t===kme?t:Bme,a=t,r=t);function s(n,w,T=0,E=n.length){if(T<E){if(e(w,w)!==0)return E;do{const z=T+E>>>1;a(n[z],w)<0?T=z+1:E=z}while(T<E)}return T}function l(n,w,T=0,E=n.length){if(T<E){if(e(w,w)!==0)return E;do{const z=T+E>>>1;a(n[z],w)<=0?T=z+1:E=z}while(T<E)}return T}function h(n,w,T=0,E=n.length){const z=s(n,w,T,E-1);return z>T&&r(n[z-1],w)>-r(n[z],w)?z-1:z}return{left:s,center:h,right:l}}function Bme(){return 0}function FW(t){return t===null?NaN:+t}function*Gme(t,e){for(let a of t)a!=null&&(a=+a)>=a&&(yield a)}const jme=ZI(Ng),NT=jme.right;ZI(FW).center;class PG extends Map{constructor(e,a=Hme){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),e!=null)for(const[r,s]of e)this.set(r,s)}get(e){return super.get(EG(this,e))}has(e){return super.has(EG(this,e))}set(e,a){return super.set(Zme(this,e),a)}delete(e){return super.delete(qme(this,e))}}function EG({_intern:t,_key:e},a){const r=e(a);return t.has(r)?t.get(r):a}function Zme({_intern:t,_key:e},a){const r=e(a);return t.has(r)?t.get(r):(t.set(r,a),a)}function qme({_intern:t,_key:e},a){const r=e(a);return t.has(r)&&(a=t.get(r),t.delete(r)),a}function Hme(t){return t!==null&&typeof t=="object"?t.valueOf():t}function $me(t=Ng){if(t===Ng)return UW;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,a)=>{const r=t(e,a);return r||r===0?r:(t(a,a)===0)-(t(e,e)===0)}}function UW(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Kme=Math.sqrt(50),Wme=Math.sqrt(10),Yme=Math.sqrt(2);function Db(t,e,a){const r=(e-t)/Math.max(0,a),s=Math.floor(Math.log10(r)),l=r/Math.pow(10,s),h=l>=Kme?10:l>=Wme?5:l>=Yme?2:1;let n,w,T;return s<0?(T=Math.pow(10,-s)/h,n=Math.round(t*T),w=Math.round(e*T),n/T<t&&++n,w/T>e&&--w,T=-T):(T=Math.pow(10,s)*h,n=Math.round(t/T),w=Math.round(e/T),n*T<t&&++n,w*T>e&&--w),w<n&&.5<=a&&a<2?Db(t,e,a*2):[n,w,T]}function ND(t,e,a){if(e=+e,t=+t,a=+a,!(a>0))return[];if(t===e)return[t];const r=e<t,[s,l,h]=r?Db(e,t,a):Db(t,e,a);if(!(l>=s))return[];const n=l-s+1,w=new Array(n);if(r)if(h<0)for(let T=0;T<n;++T)w[T]=(l-T)/-h;else for(let T=0;T<n;++T)w[T]=(l-T)*h;else if(h<0)for(let T=0;T<n;++T)w[T]=(s+T)/-h;else for(let T=0;T<n;++T)w[T]=(s+T)*h;return w}function VD(t,e,a){return e=+e,t=+t,a=+a,Db(t,e,a)[2]}function zD(t,e,a){e=+e,t=+t,a=+a;const r=e<t,s=r?VD(e,t,a):VD(t,e,a);return(r?-1:1)*(s<0?1/-s:s)}function NG(t,e){let a;for(const r of t)r!=null&&(a<r||a===void 0&&r>=r)&&(a=r);return a}function VG(t,e){let a;for(const r of t)r!=null&&(a>r||a===void 0&&r>=r)&&(a=r);return a}function kW(t,e,a=0,r=1/0,s){if(e=Math.floor(e),a=Math.floor(Math.max(0,a)),r=Math.floor(Math.min(t.length-1,r)),!(a<=e&&e<=r))return t;for(s=s===void 0?UW:$me(s);r>a;){if(r-a>600){const w=r-a+1,T=e-a+1,E=Math.log(w),z=.5*Math.exp(2*E/3),k=.5*Math.sqrt(E*z*(w-z)/w)*(T-w/2<0?-1:1),U=Math.max(a,Math.floor(e-T*z/w+k)),Z=Math.min(r,Math.floor(e+(w-T)*z/w+k));kW(t,e,U,Z,s)}const l=t[e];let h=a,n=r;for(hw(t,a,e),s(t[r],l)>0&&hw(t,a,r);h<n;){for(hw(t,h,n),++h,--n;s(t[h],l)<0;)++h;for(;s(t[n],l)>0;)--n}s(t[a],l)===0?hw(t,a,n):(++n,hw(t,n,r)),n<=e&&(a=n+1),e<=n&&(r=n-1)}return t}function hw(t,e,a){const r=t[e];t[e]=t[a],t[a]=r}function Xme(t,e,a){if(t=Float64Array.from(Gme(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return VG(t);if(e>=1)return NG(t);var r,s=(r-1)*e,l=Math.floor(s),h=NG(kW(t,l).subarray(0,l+1)),n=VG(t.subarray(l+1));return h+(n-h)*(s-l)}}function Jme(t,e,a=FW){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+a(t[0],0,t);if(e>=1)return+a(t[r-1],r-1,t);var r,s=(r-1)*e,l=Math.floor(s),h=+a(t[l],l,t),n=+a(t[l+1],l+1,t);return h+(n-h)*(s-l)}}function Qme(t,e,a){t=+t,e=+e,a=(s=arguments.length)<2?(e=t,t=0,1):s<3?1:+a;for(var r=-1,s=Math.max(0,Math.ceil((e-t)/a))|0,l=new Array(s);++r<s;)l[r]=t+r*a;return l}function qf(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ey(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const OD=Symbol("implicit");function qI(){var t=new PG,e=[],a=[],r=OD;function s(l){let h=t.get(l);if(h===void 0){if(r!==OD)return r;t.set(l,h=e.push(l)-1)}return a[h%a.length]}return s.domain=function(l){if(!arguments.length)return e.slice();e=[],t=new PG;for(const h of l)t.has(h)||t.set(h,e.push(h)-1);return s},s.range=function(l){return arguments.length?(a=Array.from(l),s):a.slice()},s.unknown=function(l){return arguments.length?(r=l,s):r},s.copy=function(){return qI(e,a).unknown(r)},qf.apply(s,arguments),s}function CR(){var t=qI().unknown(void 0),e=t.domain,a=t.range,r=0,s=1,l,h,n=!1,w=0,T=0,E=.5;delete t.unknown;function z(){var k=e().length,U=s<r,Z=U?s:r,q=U?r:s;l=(q-Z)/Math.max(1,k-w+T*2),n&&(l=Math.floor(l)),Z+=(q-Z-l*(k-w))*E,h=l*(1-w),n&&(Z=Math.round(Z),h=Math.round(h));var $=Qme(k).map(function(J){return Z+l*J});return a(U?$.reverse():$)}return t.domain=function(k){return arguments.length?(e(k),z()):e()},t.range=function(k){return arguments.length?([r,s]=k,r=+r,s=+s,z()):[r,s]},t.rangeRound=function(k){return[r,s]=k,r=+r,s=+s,n=!0,z()},t.bandwidth=function(){return h},t.step=function(){return l},t.round=function(k){return arguments.length?(n=!!k,z()):n},t.padding=function(k){return arguments.length?(w=Math.min(1,T=+k),z()):w},t.paddingInner=function(k){return arguments.length?(w=Math.min(1,k),z()):w},t.paddingOuter=function(k){return arguments.length?(T=+k,z()):T},t.align=function(k){return arguments.length?(E=Math.max(0,Math.min(1,k)),z()):E},t.copy=function(){return CR(e(),[r,s]).round(n).paddingInner(w).paddingOuter(T).align(E)},qf.apply(z(),arguments)}function BW(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return BW(e())},t}function jw(){return BW(CR.apply(null,arguments).paddingInner(1))}function HI(t,e,a){t.prototype=e.prototype=a,a.constructor=t}function GW(t,e){var a=Object.create(t.prototype);for(var r in e)a[r]=e[r];return a}function VT(){}var bR=.7,Mb=1/bR,B_="\\s*([+-]?\\d+)\\s*",xR="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",bm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",eye=/^#([0-9a-f]{3,8})$/,tye=new RegExp(`^rgb\\(${B_},${B_},${B_}\\)$`),aye=new RegExp(`^rgb\\(${bm},${bm},${bm}\\)$`),rye=new RegExp(`^rgba\\(${B_},${B_},${B_},${xR}\\)$`),nye=new RegExp(`^rgba\\(${bm},${bm},${bm},${xR}\\)$`),iye=new RegExp(`^hsl\\(${xR},${bm},${bm}\\)$`),sye=new RegExp(`^hsla\\(${xR},${bm},${bm},${xR}\\)$`),zG={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};HI(VT,PR,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:OG,formatHex:OG,formatHex8:oye,formatHsl:lye,formatRgb:DG,toString:DG});function OG(){return this.rgb().formatHex()}function oye(){return this.rgb().formatHex8()}function lye(){return jW(this).formatHsl()}function DG(){return this.rgb().formatRgb()}function PR(t){var e,a;return t=(t+"").trim().toLowerCase(),(e=eye.exec(t))?(a=e[1].length,e=parseInt(e[1],16),a===6?MG(e):a===3?new bh(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):a===8?cC(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):a===4?cC(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=tye.exec(t))?new bh(e[1],e[2],e[3],1):(e=aye.exec(t))?new bh(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=rye.exec(t))?cC(e[1],e[2],e[3],e[4]):(e=nye.exec(t))?cC(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=iye.exec(t))?FG(e[1],e[2]/100,e[3]/100,1):(e=sye.exec(t))?FG(e[1],e[2]/100,e[3]/100,e[4]):zG.hasOwnProperty(t)?MG(zG[t]):t==="transparent"?new bh(NaN,NaN,NaN,0):null}function MG(t){return new bh(t>>16&255,t>>8&255,t&255,1)}function cC(t,e,a,r){return r<=0&&(t=e=a=NaN),new bh(t,e,a,r)}function uye(t){return t instanceof VT||(t=PR(t)),t?(t=t.rgb(),new bh(t.r,t.g,t.b,t.opacity)):new bh}function DD(t,e,a,r){return arguments.length===1?uye(t):new bh(t,e,a,r??1)}function bh(t,e,a,r){this.r=+t,this.g=+e,this.b=+a,this.opacity=+r}HI(bh,DD,GW(VT,{brighter(t){return t=t==null?Mb:Math.pow(Mb,t),new bh(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?bR:Math.pow(bR,t),new bh(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new bh(e0(this.r),e0(this.g),e0(this.b),Ib(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:IG,formatHex:IG,formatHex8:cye,formatRgb:LG,toString:LG}));function IG(){return`#${$A(this.r)}${$A(this.g)}${$A(this.b)}`}function cye(){return`#${$A(this.r)}${$A(this.g)}${$A(this.b)}${$A((isNaN(this.opacity)?1:this.opacity)*255)}`}function LG(){const t=Ib(this.opacity);return`${t===1?"rgb(":"rgba("}${e0(this.r)}, ${e0(this.g)}, ${e0(this.b)}${t===1?")":`, ${t})`}`}function Ib(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function e0(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function $A(t){return t=e0(t),(t<16?"0":"")+t.toString(16)}function FG(t,e,a,r){return r<=0?t=e=a=NaN:a<=0||a>=1?t=e=NaN:e<=0&&(t=NaN),new Np(t,e,a,r)}function jW(t){if(t instanceof Np)return new Np(t.h,t.s,t.l,t.opacity);if(t instanceof VT||(t=PR(t)),!t)return new Np;if(t instanceof Np)return t;t=t.rgb();var e=t.r/255,a=t.g/255,r=t.b/255,s=Math.min(e,a,r),l=Math.max(e,a,r),h=NaN,n=l-s,w=(l+s)/2;return n?(e===l?h=(a-r)/n+(a<r)*6:a===l?h=(r-e)/n+2:h=(e-a)/n+4,n/=w<.5?l+s:2-l-s,h*=60):n=w>0&&w<1?0:h,new Np(h,n,w,t.opacity)}function dye(t,e,a,r){return arguments.length===1?jW(t):new Np(t,e,a,r??1)}function Np(t,e,a,r){this.h=+t,this.s=+e,this.l=+a,this.opacity=+r}HI(Np,dye,GW(VT,{brighter(t){return t=t==null?Mb:Math.pow(Mb,t),new Np(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?bR:Math.pow(bR,t),new Np(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,a=this.l,r=a+(a<.5?a:1-a)*e,s=2*a-r;return new bh(Wz(t>=240?t-240:t+120,s,r),Wz(t,s,r),Wz(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new Np(UG(this.h),dC(this.s),dC(this.l),Ib(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ib(this.opacity);return`${t===1?"hsl(":"hsla("}${UG(this.h)}, ${dC(this.s)*100}%, ${dC(this.l)*100}%${t===1?")":`, ${t})`}`}}));function UG(t){return t=(t||0)%360,t<0?t+360:t}function dC(t){return Math.max(0,Math.min(1,t||0))}function Wz(t,e,a){return(t<60?e+(a-e)*t/60:t<180?a:t<240?e+(a-e)*(240-t)/60:e)*255}const $I=t=>()=>t;function hye(t,e){return function(a){return t+a*e}}function fye(t,e,a){return t=Math.pow(t,a),e=Math.pow(e,a)-t,a=1/a,function(r){return Math.pow(t+r*e,a)}}function pye(t){return(t=+t)==1?ZW:function(e,a){return a-e?fye(e,a,t):$I(isNaN(e)?a:e)}}function ZW(t,e){var a=e-t;return a?hye(t,a):$I(isNaN(t)?e:t)}const kG=function t(e){var a=pye(e);function r(s,l){var h=a((s=DD(s)).r,(l=DD(l)).r),n=a(s.g,l.g),w=a(s.b,l.b),T=ZW(s.opacity,l.opacity);return function(E){return s.r=h(E),s.g=n(E),s.b=w(E),s.opacity=T(E),s+""}}return r.gamma=t,r}(1);function mye(t,e){e||(e=[]);var a=t?Math.min(e.length,t.length):0,r=e.slice(),s;return function(l){for(s=0;s<a;++s)r[s]=t[s]*(1-l)+e[s]*l;return r}}function yye(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function gye(t,e){var a=e?e.length:0,r=t?Math.min(a,t.length):0,s=new Array(r),l=new Array(a),h;for(h=0;h<r;++h)s[h]=Kv(t[h],e[h]);for(;h<a;++h)l[h]=e[h];return function(n){for(h=0;h<r;++h)l[h]=s[h](n);return l}}function Aye(t,e){var a=new Date;return t=+t,e=+e,function(r){return a.setTime(t*(1-r)+e*r),a}}function Lb(t,e){return t=+t,e=+e,function(a){return t*(1-a)+e*a}}function _ye(t,e){var a={},r={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?a[s]=Kv(t[s],e[s]):r[s]=e[s];return function(l){for(s in a)r[s]=a[s](l);return r}}var MD=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yz=new RegExp(MD.source,"g");function vye(t){return function(){return t}}function wye(t){return function(e){return t(e)+""}}function Rye(t,e){var a=MD.lastIndex=Yz.lastIndex=0,r,s,l,h=-1,n=[],w=[];for(t=t+"",e=e+"";(r=MD.exec(t))&&(s=Yz.exec(e));)(l=s.index)>a&&(l=e.slice(a,l),n[h]?n[h]+=l:n[++h]=l),(r=r[0])===(s=s[0])?n[h]?n[h]+=s:n[++h]=s:(n[++h]=null,w.push({i:h,x:Lb(r,s)})),a=Yz.lastIndex;return a<e.length&&(l=e.slice(a),n[h]?n[h]+=l:n[++h]=l),n.length<2?w[0]?wye(w[0].x):vye(e):(e=w.length,function(T){for(var E=0,z;E<e;++E)n[(z=w[E]).i]=z.x(T);return n.join("")})}function Kv(t,e){var a=typeof e,r;return e==null||a==="boolean"?$I(e):(a==="number"?Lb:a==="string"?(r=PR(e))?(e=r,kG):Rye:e instanceof PR?kG:e instanceof Date?Aye:yye(e)?mye:Array.isArray(e)?gye:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?_ye:Lb)(t,e)}function KI(t,e){return t=+t,e=+e,function(a){return Math.round(t*(1-a)+e*a)}}function Tye(t,e){e===void 0&&(e=t,t=Kv);for(var a=0,r=e.length-1,s=e[0],l=new Array(r<0?0:r);a<r;)l[a]=t(s,s=e[++a]);return function(h){var n=Math.max(0,Math.min(r-1,Math.floor(h*=r)));return l[n](h-n)}}function Sye(t){return function(){return t}}function Fb(t){return+t}var BG=[0,1];function Jd(t){return t}function ID(t,e){return(e-=t=+t)?function(a){return(a-t)/e}:Sye(isNaN(e)?NaN:.5)}function Cye(t,e){var a;return t>e&&(a=t,t=e,e=a),function(r){return Math.max(t,Math.min(e,r))}}function bye(t,e,a){var r=t[0],s=t[1],l=e[0],h=e[1];return s<r?(r=ID(s,r),l=a(h,l)):(r=ID(r,s),l=a(l,h)),function(n){return l(r(n))}}function xye(t,e,a){var r=Math.min(t.length,e.length)-1,s=new Array(r),l=new Array(r),h=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++h<r;)s[h]=ID(t[h],t[h+1]),l[h]=a(e[h],e[h+1]);return function(n){var w=NT(t,n,1,r)-1;return l[w](s[w](n))}}function zT(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Px(){var t=BG,e=BG,a=Kv,r,s,l,h=Jd,n,w,T;function E(){var k=Math.min(t.length,e.length);return h!==Jd&&(h=Cye(t[0],t[k-1])),n=k>2?xye:bye,w=T=null,z}function z(k){return k==null||isNaN(k=+k)?l:(w||(w=n(t.map(r),e,a)))(r(h(k)))}return z.invert=function(k){return h(s((T||(T=n(e,t.map(r),Lb)))(k)))},z.domain=function(k){return arguments.length?(t=Array.from(k,Fb),E()):t.slice()},z.range=function(k){return arguments.length?(e=Array.from(k),E()):e.slice()},z.rangeRound=function(k){return e=Array.from(k),a=KI,E()},z.clamp=function(k){return arguments.length?(h=k?!0:Jd,E()):h!==Jd},z.interpolate=function(k){return arguments.length?(a=k,E()):a},z.unknown=function(k){return arguments.length?(l=k,z):l},function(k,U){return r=k,s=U,E()}}function WI(){return Px()(Jd,Jd)}function Pye(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ub(t,e){if((a=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var a,r=t.slice(0,a);return[r.length>1?r[0]+r.slice(2):r,+t.slice(a+1)]}function uv(t){return t=Ub(Math.abs(t)),t?t[1]:NaN}function Eye(t,e){return function(a,r){for(var s=a.length,l=[],h=0,n=t[0],w=0;s>0&&n>0&&(w+n+1>r&&(n=Math.max(1,r-w)),l.push(a.substring(s-=n,s+n)),!((w+=n+1)>r));)n=t[h=(h+1)%t.length];return l.reverse().join(e)}}function Nye(t){return function(e){return e.replace(/[0-9]/g,function(a){return t[+a]})}}var Vye=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ER(t){if(!(e=Vye.exec(t)))throw new Error("invalid format: "+t);var e;return new YI({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ER.prototype=YI.prototype;function YI(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}YI.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function zye(t){e:for(var e=t.length,a=1,r=-1,s;a<e;++a)switch(t[a]){case".":r=s=a;break;case"0":r===0&&(r=a),s=a;break;default:if(!+t[a])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(s+1):t}var qW;function Oye(t,e){var a=Ub(t,e);if(!a)return t+"";var r=a[0],s=a[1],l=s-(qW=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,h=r.length;return l===h?r:l>h?r+new Array(l-h+1).join("0"):l>0?r.slice(0,l)+"."+r.slice(l):"0."+new Array(1-l).join("0")+Ub(t,Math.max(0,e+l-1))[0]}function GG(t,e){var a=Ub(t,e);if(!a)return t+"";var r=a[0],s=a[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const jG={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Pye,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>GG(t*100,e),r:GG,s:Oye,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ZG(t){return t}var qG=Array.prototype.map,HG=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Dye(t){var e=t.grouping===void 0||t.thousands===void 0?ZG:Eye(qG.call(t.grouping,Number),t.thousands+""),a=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",l=t.numerals===void 0?ZG:Nye(qG.call(t.numerals,String)),h=t.percent===void 0?"%":t.percent+"",n=t.minus===void 0?"":t.minus+"",w=t.nan===void 0?"NaN":t.nan+"";function T(z){z=ER(z);var k=z.fill,U=z.align,Z=z.sign,q=z.symbol,$=z.zero,J=z.width,ie=z.comma,de=z.precision,ge=z.trim,he=z.type;he==="n"?(ie=!0,he="g"):jG[he]||(de===void 0&&(de=12),ge=!0,he="g"),($||k==="0"&&U==="=")&&($=!0,k="0",U="=");var Ae=q==="$"?a:q==="#"&&/[boxX]/.test(he)?"0"+he.toLowerCase():"",me=q==="$"?r:/[%p]/.test(he)?h:"",Re=jG[he],be=/[defgprs%]/.test(he);de=de===void 0?6:/[gprs]/.test(he)?Math.max(1,Math.min(21,de)):Math.max(0,Math.min(20,de));function De(ne){var ye=Ae,Me=me,ze,Le,Ie;if(he==="c")Me=Re(ne)+Me,ne="";else{ne=+ne;var qe=ne<0||1/ne<0;if(ne=isNaN(ne)?w:Re(Math.abs(ne),de),ge&&(ne=zye(ne)),qe&&+ne==0&&Z!=="+"&&(qe=!1),ye=(qe?Z==="("?Z:n:Z==="-"||Z==="("?"":Z)+ye,Me=(he==="s"?HG[8+qW/3]:"")+Me+(qe&&Z==="("?")":""),be){for(ze=-1,Le=ne.length;++ze<Le;)if(Ie=ne.charCodeAt(ze),48>Ie||Ie>57){Me=(Ie===46?s+ne.slice(ze+1):ne.slice(ze))+Me,ne=ne.slice(0,ze);break}}}ie&&!$&&(ne=e(ne,1/0));var ke=ye.length+ne.length+Me.length,tt=ke<J?new Array(J-ke+1).join(k):"";switch(ie&&$&&(ne=e(tt+ne,tt.length?J-Me.length:1/0),tt=""),U){case"<":ne=ye+ne+Me+tt;break;case"=":ne=ye+tt+ne+Me;break;case"^":ne=tt.slice(0,ke=tt.length>>1)+ye+ne+Me+tt.slice(ke);break;default:ne=tt+ye+ne+Me;break}return l(ne)}return De.toString=function(){return z+""},De}function E(z,k){var U=T((z=ER(z),z.type="f",z)),Z=Math.max(-8,Math.min(8,Math.floor(uv(k)/3)))*3,q=Math.pow(10,-Z),$=HG[8+Z/3];return function(J){return U(q*J)+$}}return{format:T,formatPrefix:E}}var hC,XI,HW;Mye({thousands:",",grouping:[3],currency:["$",""]});function Mye(t){return hC=Dye(t),XI=hC.format,HW=hC.formatPrefix,hC}function Iye(t){return Math.max(0,-uv(Math.abs(t)))}function Lye(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(uv(e)/3)))*3-uv(Math.abs(t)))}function Fye(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,uv(e)-uv(t))+1}function $W(t,e,a,r){var s=zD(t,e,a),l;switch(r=ER(r??",f"),r.type){case"s":{var h=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(l=Lye(s,h))&&(r.precision=l),HW(r,h)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(l=Fye(s,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=l-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(l=Iye(s))&&(r.precision=l-(r.type==="%")*2);break}}return XI(r)}function Hg(t){var e=t.domain;return t.ticks=function(a){var r=e();return ND(r[0],r[r.length-1],a??10)},t.tickFormat=function(a,r){var s=e();return $W(s[0],s[s.length-1],a??10,r)},t.nice=function(a){a==null&&(a=10);var r=e(),s=0,l=r.length-1,h=r[s],n=r[l],w,T,E=10;for(n<h&&(T=h,h=n,n=T,T=s,s=l,l=T);E-- >0;){if(T=VD(h,n,a),T===w)return r[s]=h,r[l]=n,e(r);if(T>0)h=Math.floor(h/T)*T,n=Math.ceil(n/T)*T;else if(T<0)h=Math.ceil(h*T)/T,n=Math.floor(n*T)/T;else break;w=T}return t},t}function kb(){var t=WI();return t.copy=function(){return zT(t,kb())},qf.apply(t,arguments),Hg(t)}function KW(t){var e;function a(r){return r==null||isNaN(r=+r)?e:r}return a.invert=a,a.domain=a.range=function(r){return arguments.length?(t=Array.from(r,Fb),a):t.slice()},a.unknown=function(r){return arguments.length?(e=r,a):e},a.copy=function(){return KW(t).unknown(e)},t=arguments.length?Array.from(t,Fb):[0,1],Hg(a)}function WW(t,e){t=t.slice();var a=0,r=t.length-1,s=t[a],l=t[r],h;return l<s&&(h=a,a=r,r=h,h=s,s=l,l=h),t[a]=e.floor(s),t[r]=e.ceil(l),t}function $G(t){return Math.log(t)}function KG(t){return Math.exp(t)}function Uye(t){return-Math.log(-t)}function kye(t){return-Math.exp(-t)}function Bye(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Gye(t){return t===10?Bye:t===Math.E?Math.exp:e=>Math.pow(t,e)}function jye(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function WG(t){return(e,a)=>-t(-e,a)}function JI(t){const e=t($G,KG),a=e.domain;let r=10,s,l;function h(){return s=jye(r),l=Gye(r),a()[0]<0?(s=WG(s),l=WG(l),t(Uye,kye)):t($G,KG),e}return e.base=function(n){return arguments.length?(r=+n,h()):r},e.domain=function(n){return arguments.length?(a(n),h()):a()},e.ticks=n=>{const w=a();let T=w[0],E=w[w.length-1];const z=E<T;z&&([T,E]=[E,T]);let k=s(T),U=s(E),Z,q;const $=n==null?10:+n;let J=[];if(!(r%1)&&U-k<$){if(k=Math.floor(k),U=Math.ceil(U),T>0){for(;k<=U;++k)for(Z=1;Z<r;++Z)if(q=k<0?Z/l(-k):Z*l(k),!(q<T)){if(q>E)break;J.push(q)}}else for(;k<=U;++k)for(Z=r-1;Z>=1;--Z)if(q=k>0?Z/l(-k):Z*l(k),!(q<T)){if(q>E)break;J.push(q)}J.length*2<$&&(J=ND(T,E,$))}else J=ND(k,U,Math.min(U-k,$)).map(l);return z?J.reverse():J},e.tickFormat=(n,w)=>{if(n==null&&(n=10),w==null&&(w=r===10?"s":","),typeof w!="function"&&(!(r%1)&&(w=ER(w)).precision==null&&(w.trim=!0),w=XI(w)),n===1/0)return w;const T=Math.max(1,r*n/e.ticks().length);return E=>{let z=E/l(Math.round(s(E)));return z*r<r-.5&&(z*=r),z<=T?w(E):""}},e.nice=()=>a(WW(a(),{floor:n=>l(Math.floor(s(n))),ceil:n=>l(Math.ceil(s(n)))})),e}function YW(){const t=JI(Px()).domain([1,10]);return t.copy=()=>zT(t,YW()).base(t.base()),qf.apply(t,arguments),t}function YG(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function XG(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function QI(t){var e=1,a=t(YG(e),XG(e));return a.constant=function(r){return arguments.length?t(YG(e=+r),XG(e)):e},Hg(a)}function XW(){var t=QI(Px());return t.copy=function(){return zT(t,XW()).constant(t.constant())},qf.apply(t,arguments)}function JG(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Zye(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function qye(t){return t<0?-t*t:t*t}function e4(t){var e=t(Jd,Jd),a=1;function r(){return a===1?t(Jd,Jd):a===.5?t(Zye,qye):t(JG(a),JG(1/a))}return e.exponent=function(s){return arguments.length?(a=+s,r()):a},Hg(e)}function t4(){var t=e4(Px());return t.copy=function(){return zT(t,t4()).exponent(t.exponent())},qf.apply(t,arguments),t}function Hye(){return t4.apply(null,arguments).exponent(.5)}function QG(t){return Math.sign(t)*t*t}function $ye(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function JW(){var t=WI(),e=[0,1],a=!1,r;function s(l){var h=$ye(t(l));return isNaN(h)?r:a?Math.round(h):h}return s.invert=function(l){return t.invert(QG(l))},s.domain=function(l){return arguments.length?(t.domain(l),s):t.domain()},s.range=function(l){return arguments.length?(t.range((e=Array.from(l,Fb)).map(QG)),s):e.slice()},s.rangeRound=function(l){return s.range(l).round(!0)},s.round=function(l){return arguments.length?(a=!!l,s):a},s.clamp=function(l){return arguments.length?(t.clamp(l),s):t.clamp()},s.unknown=function(l){return arguments.length?(r=l,s):r},s.copy=function(){return JW(t.domain(),e).round(a).clamp(t.clamp()).unknown(r)},qf.apply(s,arguments),Hg(s)}function QW(){var t=[],e=[],a=[],r;function s(){var h=0,n=Math.max(1,e.length);for(a=new Array(n-1);++h<n;)a[h-1]=Jme(t,h/n);return l}function l(h){return h==null||isNaN(h=+h)?r:e[NT(a,h)]}return l.invertExtent=function(h){var n=e.indexOf(h);return n<0?[NaN,NaN]:[n>0?a[n-1]:t[0],n<a.length?a[n]:t[t.length-1]]},l.domain=function(h){if(!arguments.length)return t.slice();t=[];for(let n of h)n!=null&&!isNaN(n=+n)&&t.push(n);return t.sort(Ng),s()},l.range=function(h){return arguments.length?(e=Array.from(h),s()):e.slice()},l.unknown=function(h){return arguments.length?(r=h,l):r},l.quantiles=function(){return a.slice()},l.copy=function(){return QW().domain(t).range(e).unknown(r)},qf.apply(l,arguments)}function eY(){var t=0,e=1,a=1,r=[.5],s=[0,1],l;function h(w){return w!=null&&w<=w?s[NT(r,w,0,a)]:l}function n(){var w=-1;for(r=new Array(a);++w<a;)r[w]=((w+1)*e-(w-a)*t)/(a+1);return h}return h.domain=function(w){return arguments.length?([t,e]=w,t=+t,e=+e,n()):[t,e]},h.range=function(w){return arguments.length?(a=(s=Array.from(w)).length-1,n()):s.slice()},h.invertExtent=function(w){var T=s.indexOf(w);return T<0?[NaN,NaN]:T<1?[t,r[0]]:T>=a?[r[a-1],e]:[r[T-1],r[T]]},h.unknown=function(w){return arguments.length&&(l=w),h},h.thresholds=function(){return r.slice()},h.copy=function(){return eY().domain([t,e]).range(s).unknown(l)},qf.apply(Hg(h),arguments)}function tY(){var t=[.5],e=[0,1],a,r=1;function s(l){return l!=null&&l<=l?e[NT(t,l,0,r)]:a}return s.domain=function(l){return arguments.length?(t=Array.from(l),r=Math.min(t.length,e.length-1),s):t.slice()},s.range=function(l){return arguments.length?(e=Array.from(l),r=Math.min(t.length,e.length-1),s):e.slice()},s.invertExtent=function(l){var h=e.indexOf(l);return[t[h-1],t[h]]},s.unknown=function(l){return arguments.length?(a=l,s):a},s.copy=function(){return tY().domain(t).range(e).unknown(a)},qf.apply(s,arguments)}const Xz=new Date,Jz=new Date;function Lu(t,e,a,r){function s(l){return t(l=arguments.length===0?new Date:new Date(+l)),l}return s.floor=l=>(t(l=new Date(+l)),l),s.ceil=l=>(t(l=new Date(l-1)),e(l,1),t(l),l),s.round=l=>{const h=s(l),n=s.ceil(l);return l-h<n-l?h:n},s.offset=(l,h)=>(e(l=new Date(+l),h==null?1:Math.floor(h)),l),s.range=(l,h,n)=>{const w=[];if(l=s.ceil(l),n=n==null?1:Math.floor(n),!(l<h)||!(n>0))return w;let T;do w.push(T=new Date(+l)),e(l,n),t(l);while(T<l&&l<h);return w},s.filter=l=>Lu(h=>{if(h>=h)for(;t(h),!l(h);)h.setTime(h-1)},(h,n)=>{if(h>=h)if(n<0)for(;++n<=0;)for(;e(h,-1),!l(h););else for(;--n>=0;)for(;e(h,1),!l(h););}),a&&(s.count=(l,h)=>(Xz.setTime(+l),Jz.setTime(+h),t(Xz),t(Jz),Math.floor(a(Xz,Jz))),s.every=l=>(l=Math.floor(l),!isFinite(l)||!(l>0)?null:l>1?s.filter(r?h=>r(h)%l===0:h=>s.count(0,h)%l===0):s)),s}const Bb=Lu(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Bb.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Lu(e=>{e.setTime(Math.floor(e/t)*t)},(e,a)=>{e.setTime(+e+a*t)},(e,a)=>(a-e)/t):Bb);Bb.range;const oy=1e3,Bf=oy*60,ly=Bf*60,wy=ly*24,a4=wy*7,e7=wy*30,Qz=wy*365,KA=Lu(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*oy)},(t,e)=>(e-t)/oy,t=>t.getUTCSeconds());KA.range;const r4=Lu(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*oy)},(t,e)=>{t.setTime(+t+e*Bf)},(t,e)=>(e-t)/Bf,t=>t.getMinutes());r4.range;const n4=Lu(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Bf)},(t,e)=>(e-t)/Bf,t=>t.getUTCMinutes());n4.range;const i4=Lu(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*oy-t.getMinutes()*Bf)},(t,e)=>{t.setTime(+t+e*ly)},(t,e)=>(e-t)/ly,t=>t.getHours());i4.range;const s4=Lu(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*ly)},(t,e)=>(e-t)/ly,t=>t.getUTCHours());s4.range;const OT=Lu(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Bf)/wy,t=>t.getDate()-1);OT.range;const Ex=Lu(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/wy,t=>t.getUTCDate()-1);Ex.range;const aY=Lu(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/wy,t=>Math.floor(t/wy));aY.range;function v0(t){return Lu(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,a)=>{e.setDate(e.getDate()+a*7)},(e,a)=>(a-e-(a.getTimezoneOffset()-e.getTimezoneOffset())*Bf)/a4)}const Nx=v0(0),Gb=v0(1),Kye=v0(2),Wye=v0(3),cv=v0(4),Yye=v0(5),Xye=v0(6);Nx.range;Gb.range;Kye.range;Wye.range;cv.range;Yye.range;Xye.range;function w0(t){return Lu(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,a)=>{e.setUTCDate(e.getUTCDate()+a*7)},(e,a)=>(a-e)/a4)}const Vx=w0(0),jb=w0(1),Jye=w0(2),Qye=w0(3),dv=w0(4),ege=w0(5),tge=w0(6);Vx.range;jb.range;Jye.range;Qye.range;dv.range;ege.range;tge.range;const o4=Lu(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());o4.range;const l4=Lu(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());l4.range;const Ry=Lu(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Ry.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Lu(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,a)=>{e.setFullYear(e.getFullYear()+a*t)});Ry.range;const Ty=Lu(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ty.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Lu(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,a)=>{e.setUTCFullYear(e.getUTCFullYear()+a*t)});Ty.range;function rY(t,e,a,r,s,l){const h=[[KA,1,oy],[KA,5,5*oy],[KA,15,15*oy],[KA,30,30*oy],[l,1,Bf],[l,5,5*Bf],[l,15,15*Bf],[l,30,30*Bf],[s,1,ly],[s,3,3*ly],[s,6,6*ly],[s,12,12*ly],[r,1,wy],[r,2,2*wy],[a,1,a4],[e,1,e7],[e,3,3*e7],[t,1,Qz]];function n(T,E,z){const k=E<T;k&&([T,E]=[E,T]);const U=z&&typeof z.range=="function"?z:w(T,E,z),Z=U?U.range(T,+E+1):[];return k?Z.reverse():Z}function w(T,E,z){const k=Math.abs(E-T)/z,U=ZI(([,,$])=>$).right(h,k);if(U===h.length)return t.every(zD(T/Qz,E/Qz,z));if(U===0)return Bb.every(Math.max(zD(T,E,z),1));const[Z,q]=h[k/h[U-1][2]<h[U][2]/k?U-1:U];return Z.every(q)}return[n,w]}const[age,rge]=rY(Ty,l4,Vx,aY,s4,n4),[nge,ige]=rY(Ry,o4,Nx,OT,i4,r4);function eO(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function tO(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function fw(t,e,a){return{y:t,m:e,d:a,H:0,M:0,S:0,L:0}}function sge(t){var e=t.dateTime,a=t.date,r=t.time,s=t.periods,l=t.days,h=t.shortDays,n=t.months,w=t.shortMonths,T=pw(s),E=mw(s),z=pw(l),k=mw(l),U=pw(h),Z=mw(h),q=pw(n),$=mw(n),J=pw(w),ie=mw(w),de={a:qe,A:ke,b:tt,B:Ue,c:null,d:s7,e:s7,f:Ege,g:Uge,G:Bge,H:bge,I:xge,j:Pge,L:nY,m:Nge,M:Vge,p:He,q:Ce,Q:u7,s:c7,S:zge,u:Oge,U:Dge,V:Mge,w:Ige,W:Lge,x:null,X:null,y:Fge,Y:kge,Z:Gge,"%":l7},ge={a:Se,A:$e,b:ft,B:Je,c:null,d:o7,e:o7,f:Hge,g:aAe,G:nAe,H:jge,I:Zge,j:qge,L:sY,m:$ge,M:Kge,p:wt,q:it,Q:u7,s:c7,S:Wge,u:Yge,U:Xge,V:Jge,w:Qge,W:eAe,x:null,X:null,y:tAe,Y:rAe,Z:iAe,"%":l7},he={a:De,A:ne,b:ye,B:Me,c:ze,d:n7,e:n7,f:Rge,g:r7,G:a7,H:i7,I:i7,j:Age,L:wge,m:gge,M:_ge,p:be,q:yge,Q:Sge,s:Cge,S:vge,u:dge,U:hge,V:fge,w:cge,W:pge,x:Le,X:Ie,y:r7,Y:a7,Z:mge,"%":Tge};de.x=Ae(a,de),de.X=Ae(r,de),de.c=Ae(e,de),ge.x=Ae(a,ge),ge.X=Ae(r,ge),ge.c=Ae(e,ge);function Ae(ct,_e){return function(Jt){var Zt=[],Pa=-1,Bt=0,la=ct.length,Rt,yr,za;for(Jt instanceof Date||(Jt=new Date(+Jt));++Pa<la;)ct.charCodeAt(Pa)===37&&(Zt.push(ct.slice(Bt,Pa)),(yr=t7[Rt=ct.charAt(++Pa)])!=null?Rt=ct.charAt(++Pa):yr=Rt==="e"?" ":"0",(za=_e[Rt])&&(Rt=za(Jt,yr)),Zt.push(Rt),Bt=Pa+1);return Zt.push(ct.slice(Bt,Pa)),Zt.join("")}}function me(ct,_e){return function(Jt){var Zt=fw(1900,void 0,1),Pa=Re(Zt,ct,Jt+="",0),Bt,la;if(Pa!=Jt.length)return null;if("Q"in Zt)return new Date(Zt.Q);if("s"in Zt)return new Date(Zt.s*1e3+("L"in Zt?Zt.L:0));if(_e&&!("Z"in Zt)&&(Zt.Z=0),"p"in Zt&&(Zt.H=Zt.H%12+Zt.p*12),Zt.m===void 0&&(Zt.m="q"in Zt?Zt.q:0),"V"in Zt){if(Zt.V<1||Zt.V>53)return null;"w"in Zt||(Zt.w=1),"Z"in Zt?(Bt=tO(fw(Zt.y,0,1)),la=Bt.getUTCDay(),Bt=la>4||la===0?jb.ceil(Bt):jb(Bt),Bt=Ex.offset(Bt,(Zt.V-1)*7),Zt.y=Bt.getUTCFullYear(),Zt.m=Bt.getUTCMonth(),Zt.d=Bt.getUTCDate()+(Zt.w+6)%7):(Bt=eO(fw(Zt.y,0,1)),la=Bt.getDay(),Bt=la>4||la===0?Gb.ceil(Bt):Gb(Bt),Bt=OT.offset(Bt,(Zt.V-1)*7),Zt.y=Bt.getFullYear(),Zt.m=Bt.getMonth(),Zt.d=Bt.getDate()+(Zt.w+6)%7)}else("W"in Zt||"U"in Zt)&&("w"in Zt||(Zt.w="u"in Zt?Zt.u%7:"W"in Zt?1:0),la="Z"in Zt?tO(fw(Zt.y,0,1)).getUTCDay():eO(fw(Zt.y,0,1)).getDay(),Zt.m=0,Zt.d="W"in Zt?(Zt.w+6)%7+Zt.W*7-(la+5)%7:Zt.w+Zt.U*7-(la+6)%7);return"Z"in Zt?(Zt.H+=Zt.Z/100|0,Zt.M+=Zt.Z%100,tO(Zt)):eO(Zt)}}function Re(ct,_e,Jt,Zt){for(var Pa=0,Bt=_e.length,la=Jt.length,Rt,yr;Pa<Bt;){if(Zt>=la)return-1;if(Rt=_e.charCodeAt(Pa++),Rt===37){if(Rt=_e.charAt(Pa++),yr=he[Rt in t7?_e.charAt(Pa++):Rt],!yr||(Zt=yr(ct,Jt,Zt))<0)return-1}else if(Rt!=Jt.charCodeAt(Zt++))return-1}return Zt}function be(ct,_e,Jt){var Zt=T.exec(_e.slice(Jt));return Zt?(ct.p=E.get(Zt[0].toLowerCase()),Jt+Zt[0].length):-1}function De(ct,_e,Jt){var Zt=U.exec(_e.slice(Jt));return Zt?(ct.w=Z.get(Zt[0].toLowerCase()),Jt+Zt[0].length):-1}function ne(ct,_e,Jt){var Zt=z.exec(_e.slice(Jt));return Zt?(ct.w=k.get(Zt[0].toLowerCase()),Jt+Zt[0].length):-1}function ye(ct,_e,Jt){var Zt=J.exec(_e.slice(Jt));return Zt?(ct.m=ie.get(Zt[0].toLowerCase()),Jt+Zt[0].length):-1}function Me(ct,_e,Jt){var Zt=q.exec(_e.slice(Jt));return Zt?(ct.m=$.get(Zt[0].toLowerCase()),Jt+Zt[0].length):-1}function ze(ct,_e,Jt){return Re(ct,e,_e,Jt)}function Le(ct,_e,Jt){return Re(ct,a,_e,Jt)}function Ie(ct,_e,Jt){return Re(ct,r,_e,Jt)}function qe(ct){return h[ct.getDay()]}function ke(ct){return l[ct.getDay()]}function tt(ct){return w[ct.getMonth()]}function Ue(ct){return n[ct.getMonth()]}function He(ct){return s[+(ct.getHours()>=12)]}function Ce(ct){return 1+~~(ct.getMonth()/3)}function Se(ct){return h[ct.getUTCDay()]}function $e(ct){return l[ct.getUTCDay()]}function ft(ct){return w[ct.getUTCMonth()]}function Je(ct){return n[ct.getUTCMonth()]}function wt(ct){return s[+(ct.getUTCHours()>=12)]}function it(ct){return 1+~~(ct.getUTCMonth()/3)}return{format:function(ct){var _e=Ae(ct+="",de);return _e.toString=function(){return ct},_e},parse:function(ct){var _e=me(ct+="",!1);return _e.toString=function(){return ct},_e},utcFormat:function(ct){var _e=Ae(ct+="",ge);return _e.toString=function(){return ct},_e},utcParse:function(ct){var _e=me(ct+="",!0);return _e.toString=function(){return ct},_e}}}var t7={"-":"",_:" ",0:"0"},rc=/^\s*\d+/,oge=/^%/,lge=/[\\^$*+?|[\]().{}]/g;function ps(t,e,a){var r=t<0?"-":"",s=(r?-t:t)+"",l=s.length;return r+(l<a?new Array(a-l+1).join(e)+s:s)}function uge(t){return t.replace(lge,"\\$&")}function pw(t){return new RegExp("^(?:"+t.map(uge).join("|")+")","i")}function mw(t){return new Map(t.map((e,a)=>[e.toLowerCase(),a]))}function cge(t,e,a){var r=rc.exec(e.slice(a,a+1));return r?(t.w=+r[0],a+r[0].length):-1}function dge(t,e,a){var r=rc.exec(e.slice(a,a+1));return r?(t.u=+r[0],a+r[0].length):-1}function hge(t,e,a){var r=rc.exec(e.slice(a,a+2));return r?(t.U=+r[0],a+r[0].length):-1}function fge(t,e,a){var r=rc.exec(e.slice(a,a+2));return r?(t.V=+r[0],a+r[0].length):-1}function pge(t,e,a){var r=rc.exec(e.slice(a,a+2));return r?(t.W=+r[0],a+r[0].length):-1}function a7(t,e,a){var r=rc.exec(e.slice(a,a+4));return r?(t.y=+r[0],a+r[0].length):-1}function r7(t,e,a){var r=rc.exec(e.slice(a,a+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),a+r[0].length):-1}function mge(t,e,a){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(a,a+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),a+r[0].length):-1}function yge(t,e,a){var r=rc.exec(e.slice(a,a+1));return r?(t.q=r[0]*3-3,a+r[0].length):-1}function gge(t,e,a){var r=rc.exec(e.slice(a,a+2));return r?(t.m=r[0]-1,a+r[0].length):-1}function n7(t,e,a){var r=rc.exec(e.slice(a,a+2));return r?(t.d=+r[0],a+r[0].length):-1}function Age(t,e,a){var r=rc.exec(e.slice(a,a+3));return r?(t.m=0,t.d=+r[0],a+r[0].length):-1}function i7(t,e,a){var r=rc.exec(e.slice(a,a+2));return r?(t.H=+r[0],a+r[0].length):-1}function _ge(t,e,a){var r=rc.exec(e.slice(a,a+2));return r?(t.M=+r[0],a+r[0].length):-1}function vge(t,e,a){var r=rc.exec(e.slice(a,a+2));return r?(t.S=+r[0],a+r[0].length):-1}function wge(t,e,a){var r=rc.exec(e.slice(a,a+3));return r?(t.L=+r[0],a+r[0].length):-1}function Rge(t,e,a){var r=rc.exec(e.slice(a,a+6));return r?(t.L=Math.floor(r[0]/1e3),a+r[0].length):-1}function Tge(t,e,a){var r=oge.exec(e.slice(a,a+1));return r?a+r[0].length:-1}function Sge(t,e,a){var r=rc.exec(e.slice(a));return r?(t.Q=+r[0],a+r[0].length):-1}function Cge(t,e,a){var r=rc.exec(e.slice(a));return r?(t.s=+r[0],a+r[0].length):-1}function s7(t,e){return ps(t.getDate(),e,2)}function bge(t,e){return ps(t.getHours(),e,2)}function xge(t,e){return ps(t.getHours()%12||12,e,2)}function Pge(t,e){return ps(1+OT.count(Ry(t),t),e,3)}function nY(t,e){return ps(t.getMilliseconds(),e,3)}function Ege(t,e){return nY(t,e)+"000"}function Nge(t,e){return ps(t.getMonth()+1,e,2)}function Vge(t,e){return ps(t.getMinutes(),e,2)}function zge(t,e){return ps(t.getSeconds(),e,2)}function Oge(t){var e=t.getDay();return e===0?7:e}function Dge(t,e){return ps(Nx.count(Ry(t)-1,t),e,2)}function iY(t){var e=t.getDay();return e>=4||e===0?cv(t):cv.ceil(t)}function Mge(t,e){return t=iY(t),ps(cv.count(Ry(t),t)+(Ry(t).getDay()===4),e,2)}function Ige(t){return t.getDay()}function Lge(t,e){return ps(Gb.count(Ry(t)-1,t),e,2)}function Fge(t,e){return ps(t.getFullYear()%100,e,2)}function Uge(t,e){return t=iY(t),ps(t.getFullYear()%100,e,2)}function kge(t,e){return ps(t.getFullYear()%1e4,e,4)}function Bge(t,e){var a=t.getDay();return t=a>=4||a===0?cv(t):cv.ceil(t),ps(t.getFullYear()%1e4,e,4)}function Gge(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ps(e/60|0,"0",2)+ps(e%60,"0",2)}function o7(t,e){return ps(t.getUTCDate(),e,2)}function jge(t,e){return ps(t.getUTCHours(),e,2)}function Zge(t,e){return ps(t.getUTCHours()%12||12,e,2)}function qge(t,e){return ps(1+Ex.count(Ty(t),t),e,3)}function sY(t,e){return ps(t.getUTCMilliseconds(),e,3)}function Hge(t,e){return sY(t,e)+"000"}function $ge(t,e){return ps(t.getUTCMonth()+1,e,2)}function Kge(t,e){return ps(t.getUTCMinutes(),e,2)}function Wge(t,e){return ps(t.getUTCSeconds(),e,2)}function Yge(t){var e=t.getUTCDay();return e===0?7:e}function Xge(t,e){return ps(Vx.count(Ty(t)-1,t),e,2)}function oY(t){var e=t.getUTCDay();return e>=4||e===0?dv(t):dv.ceil(t)}function Jge(t,e){return t=oY(t),ps(dv.count(Ty(t),t)+(Ty(t).getUTCDay()===4),e,2)}function Qge(t){return t.getUTCDay()}function eAe(t,e){return ps(jb.count(Ty(t)-1,t),e,2)}function tAe(t,e){return ps(t.getUTCFullYear()%100,e,2)}function aAe(t,e){return t=oY(t),ps(t.getUTCFullYear()%100,e,2)}function rAe(t,e){return ps(t.getUTCFullYear()%1e4,e,4)}function nAe(t,e){var a=t.getUTCDay();return t=a>=4||a===0?dv(t):dv.ceil(t),ps(t.getUTCFullYear()%1e4,e,4)}function iAe(){return"+0000"}function l7(){return"%"}function u7(t){return+t}function c7(t){return Math.floor(+t/1e3)}var f_,lY,uY;sAe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function sAe(t){return f_=sge(t),lY=f_.format,f_.parse,uY=f_.utcFormat,f_.utcParse,f_}function oAe(t){return new Date(t)}function lAe(t){return t instanceof Date?+t:+new Date(+t)}function u4(t,e,a,r,s,l,h,n,w,T){var E=WI(),z=E.invert,k=E.domain,U=T(".%L"),Z=T(":%S"),q=T("%I:%M"),$=T("%I %p"),J=T("%a %d"),ie=T("%b %d"),de=T("%B"),ge=T("%Y");function he(Ae){return(w(Ae)<Ae?U:n(Ae)<Ae?Z:h(Ae)<Ae?q:l(Ae)<Ae?$:r(Ae)<Ae?s(Ae)<Ae?J:ie:a(Ae)<Ae?de:ge)(Ae)}return E.invert=function(Ae){return new Date(z(Ae))},E.domain=function(Ae){return arguments.length?k(Array.from(Ae,lAe)):k().map(oAe)},E.ticks=function(Ae){var me=k();return t(me[0],me[me.length-1],Ae??10)},E.tickFormat=function(Ae,me){return me==null?he:T(me)},E.nice=function(Ae){var me=k();return(!Ae||typeof Ae.range!="function")&&(Ae=e(me[0],me[me.length-1],Ae??10)),Ae?k(WW(me,Ae)):E},E.copy=function(){return zT(E,u4(t,e,a,r,s,l,h,n,w,T))},E}function uAe(){return qf.apply(u4(nge,ige,Ry,o4,Nx,OT,i4,r4,KA,lY).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function cAe(){return qf.apply(u4(age,rge,Ty,l4,Vx,Ex,s4,n4,KA,uY).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function zx(){var t=0,e=1,a,r,s,l,h=Jd,n=!1,w;function T(z){return z==null||isNaN(z=+z)?w:h(s===0?.5:(z=(l(z)-a)*s,n?Math.max(0,Math.min(1,z)):z))}T.domain=function(z){return arguments.length?([t,e]=z,a=l(t=+t),r=l(e=+e),s=a===r?0:1/(r-a),T):[t,e]},T.clamp=function(z){return arguments.length?(n=!!z,T):n},T.interpolator=function(z){return arguments.length?(h=z,T):h};function E(z){return function(k){var U,Z;return arguments.length?([U,Z]=k,h=z(U,Z),T):[h(0),h(1)]}}return T.range=E(Kv),T.rangeRound=E(KI),T.unknown=function(z){return arguments.length?(w=z,T):w},function(z){return l=z,a=z(t),r=z(e),s=a===r?0:1/(r-a),T}}function $g(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function cY(){var t=Hg(zx()(Jd));return t.copy=function(){return $g(t,cY())},Ey.apply(t,arguments)}function dY(){var t=JI(zx()).domain([1,10]);return t.copy=function(){return $g(t,dY()).base(t.base())},Ey.apply(t,arguments)}function hY(){var t=QI(zx());return t.copy=function(){return $g(t,hY()).constant(t.constant())},Ey.apply(t,arguments)}function c4(){var t=e4(zx());return t.copy=function(){return $g(t,c4()).exponent(t.exponent())},Ey.apply(t,arguments)}function dAe(){return c4.apply(null,arguments).exponent(.5)}function fY(){var t=[],e=Jd;function a(r){if(r!=null&&!isNaN(r=+r))return e((NT(t,r,1)-1)/(t.length-1))}return a.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let s of r)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(Ng),a},a.interpolator=function(r){return arguments.length?(e=r,a):e},a.range=function(){return t.map((r,s)=>e(s/(t.length-1)))},a.quantiles=function(r){return Array.from({length:r+1},(s,l)=>Xme(t,l/r))},a.copy=function(){return fY(e).domain(t)},Ey.apply(a,arguments)}function Ox(){var t=0,e=.5,a=1,r=1,s,l,h,n,w,T=Jd,E,z=!1,k;function U(q){return isNaN(q=+q)?k:(q=.5+((q=+E(q))-l)*(r*q<r*l?n:w),T(z?Math.max(0,Math.min(1,q)):q))}U.domain=function(q){return arguments.length?([t,e,a]=q,s=E(t=+t),l=E(e=+e),h=E(a=+a),n=s===l?0:.5/(l-s),w=l===h?0:.5/(h-l),r=l<s?-1:1,U):[t,e,a]},U.clamp=function(q){return arguments.length?(z=!!q,U):z},U.interpolator=function(q){return arguments.length?(T=q,U):T};function Z(q){return function($){var J,ie,de;return arguments.length?([J,ie,de]=$,T=Tye(q,[J,ie,de]),U):[T(0),T(.5),T(1)]}}return U.range=Z(Kv),U.rangeRound=Z(KI),U.unknown=function(q){return arguments.length?(k=q,U):k},function(q){return E=q,s=q(t),l=q(e),h=q(a),n=s===l?0:.5/(l-s),w=l===h?0:.5/(h-l),r=l<s?-1:1,U}}function pY(){var t=Hg(Ox()(Jd));return t.copy=function(){return $g(t,pY())},Ey.apply(t,arguments)}function mY(){var t=JI(Ox()).domain([.1,1,10]);return t.copy=function(){return $g(t,mY()).base(t.base())},Ey.apply(t,arguments)}function yY(){var t=QI(Ox());return t.copy=function(){return $g(t,yY()).constant(t.constant())},Ey.apply(t,arguments)}function d4(){var t=e4(Ox());return t.copy=function(){return $g(t,d4()).exponent(t.exponent())},Ey.apply(t,arguments)}function hAe(){return d4.apply(null,arguments).exponent(.5)}const d7=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:CR,scaleDiverging:pY,scaleDivergingLog:mY,scaleDivergingPow:d4,scaleDivergingSqrt:hAe,scaleDivergingSymlog:yY,scaleIdentity:KW,scaleImplicit:OD,scaleLinear:kb,scaleLog:YW,scaleOrdinal:qI,scalePoint:jw,scalePow:t4,scaleQuantile:QW,scaleQuantize:eY,scaleRadial:JW,scaleSequential:cY,scaleSequentialLog:dY,scaleSequentialPow:c4,scaleSequentialQuantile:fY,scaleSequentialSqrt:dAe,scaleSequentialSymlog:hY,scaleSqrt:Hye,scaleSymlog:XW,scaleThreshold:tY,scaleTime:uAe,scaleUtc:cAe,tickFormat:$W},Symbol.toStringTag,{value:"Module"}));var aO,h7;function Dx(){if(h7)return aO;h7=1;var t=Zv();function e(a,r,s){for(var l=-1,h=a.length;++l<h;){var n=a[l],w=r(n);if(w!=null&&(T===void 0?w===w&&!t(w):s(w,T)))var T=w,E=n}return E}return aO=e,aO}var rO,f7;function gY(){if(f7)return rO;f7=1;function t(e,a){return e>a}return rO=t,rO}var nO,p7;function fAe(){if(p7)return nO;p7=1;var t=Dx(),e=gY(),a=$v();function r(s){return s&&s.length?t(s,a,e):void 0}return nO=r,nO}var pAe=fAe();const Rg=Ji(pAe);var iO,m7;function AY(){if(m7)return iO;m7=1;function t(e,a){return e<a}return iO=t,iO}var sO,y7;function mAe(){if(y7)return sO;y7=1;var t=Dx(),e=AY(),a=$v();function r(s){return s&&s.length?t(s,a,e):void 0}return sO=r,sO}var yAe=mAe();const Mx=Ji(yAe);var oO,g7;function gAe(){if(g7)return oO;g7=1;var t=PI(),e=Dm(),a=bW(),r=Eh();function s(l,h){var n=r(l)?t:a;return n(l,e(h,3))}return oO=s,oO}var lO,A7;function AAe(){if(A7)return lO;A7=1;var t=SW(),e=gAe();function a(r,s){return t(e(r,s),1)}return lO=a,lO}var _Ae=AAe();const vAe=Ji(_Ae);var uO,_7;function wAe(){if(_7)return uO;_7=1;var t=kI();function e(a,r){return t(a,r)}return uO=e,uO}var RAe=wAe();const Mg=Ji(RAe);var Wv=1e9,TAe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},f4,$o=!0,jf="[DecimalError] ",t0=jf+"Invalid argument: ",h4=jf+"Exponent out of range: ",Yv=Math.floor,UA=Math.pow,SAe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,af,Ju=1e7,Po=7,_Y=9007199254740991,Zb=Yv(_Y/Po),Wr={};Wr.absoluteValue=Wr.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Wr.comparedTo=Wr.cmp=function(t){var e,a,r,s,l=this;if(t=new l.constructor(t),l.s!==t.s)return l.s||-t.s;if(l.e!==t.e)return l.e>t.e^l.s<0?1:-1;for(r=l.d.length,s=t.d.length,e=0,a=r<s?r:s;e<a;++e)if(l.d[e]!==t.d[e])return l.d[e]>t.d[e]^l.s<0?1:-1;return r===s?0:r>s^l.s<0?1:-1};Wr.decimalPlaces=Wr.dp=function(){var t=this,e=t.d.length-1,a=(e-t.e)*Po;if(e=t.d[e],e)for(;e%10==0;e/=10)a--;return a<0?0:a};Wr.dividedBy=Wr.div=function(t){return fy(this,new this.constructor(t))};Wr.dividedToIntegerBy=Wr.idiv=function(t){var e=this,a=e.constructor;return so(fy(e,new a(t),0,1),a.precision)};Wr.equals=Wr.eq=function(t){return!this.cmp(t)};Wr.exponent=function(){return uu(this)};Wr.greaterThan=Wr.gt=function(t){return this.cmp(t)>0};Wr.greaterThanOrEqualTo=Wr.gte=function(t){return this.cmp(t)>=0};Wr.isInteger=Wr.isint=function(){return this.e>this.d.length-2};Wr.isNegative=Wr.isneg=function(){return this.s<0};Wr.isPositive=Wr.ispos=function(){return this.s>0};Wr.isZero=function(){return this.s===0};Wr.lessThan=Wr.lt=function(t){return this.cmp(t)<0};Wr.lessThanOrEqualTo=Wr.lte=function(t){return this.cmp(t)<1};Wr.logarithm=Wr.log=function(t){var e,a=this,r=a.constructor,s=r.precision,l=s+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(af))throw Error(jf+"NaN");if(a.s<1)throw Error(jf+(a.s?"NaN":"-Infinity"));return a.eq(af)?new r(0):($o=!1,e=fy(NR(a,l),NR(t,l),l),$o=!0,so(e,s))};Wr.minus=Wr.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?RY(e,t):vY(e,(t.s=-t.s,t))};Wr.modulo=Wr.mod=function(t){var e,a=this,r=a.constructor,s=r.precision;if(t=new r(t),!t.s)throw Error(jf+"NaN");return a.s?($o=!1,e=fy(a,t,0,1).times(t),$o=!0,a.minus(e)):so(new r(a),s)};Wr.naturalExponential=Wr.exp=function(){return wY(this)};Wr.naturalLogarithm=Wr.ln=function(){return NR(this)};Wr.negated=Wr.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Wr.plus=Wr.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?vY(e,t):RY(e,(t.s=-t.s,t))};Wr.precision=Wr.sd=function(t){var e,a,r,s=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(t0+t);if(e=uu(s)+1,r=s.d.length-1,a=r*Po+1,r=s.d[r],r){for(;r%10==0;r/=10)a--;for(r=s.d[0];r>=10;r/=10)a++}return t&&e>a?e:a};Wr.squareRoot=Wr.sqrt=function(){var t,e,a,r,s,l,h,n=this,w=n.constructor;if(n.s<1){if(!n.s)return new w(0);throw Error(jf+"NaN")}for(t=uu(n),$o=!1,s=Math.sqrt(+n),s==0||s==1/0?(e=vm(n.d),(e.length+t)%2==0&&(e+="0"),s=Math.sqrt(e),t=Yv((t+1)/2)-(t<0||t%2),s==1/0?e="5e"+t:(e=s.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new w(e)):r=new w(s.toString()),a=w.precision,s=h=a+3;;)if(l=r,r=l.plus(fy(n,l,h+2)).times(.5),vm(l.d).slice(0,h)===(e=vm(r.d)).slice(0,h)){if(e=e.slice(h-3,h+1),s==h&&e=="4999"){if(so(l,a+1,0),l.times(l).eq(n)){r=l;break}}else if(e!="9999")break;h+=4}return $o=!0,so(r,a)};Wr.times=Wr.mul=function(t){var e,a,r,s,l,h,n,w,T,E=this,z=E.constructor,k=E.d,U=(t=new z(t)).d;if(!E.s||!t.s)return new z(0);for(t.s*=E.s,a=E.e+t.e,w=k.length,T=U.length,w<T&&(l=k,k=U,U=l,h=w,w=T,T=h),l=[],h=w+T,r=h;r--;)l.push(0);for(r=T;--r>=0;){for(e=0,s=w+r;s>r;)n=l[s]+U[r]*k[s-r-1]+e,l[s--]=n%Ju|0,e=n/Ju|0;l[s]=(l[s]+e)%Ju|0}for(;!l[--h];)l.pop();return e?++a:l.shift(),t.d=l,t.e=a,$o?so(t,z.precision):t};Wr.toDecimalPlaces=Wr.todp=function(t,e){var a=this,r=a.constructor;return a=new r(a),t===void 0?a:(Vm(t,0,Wv),e===void 0?e=r.rounding:Vm(e,0,8),so(a,t+uu(a)+1,e))};Wr.toExponential=function(t,e){var a,r=this,s=r.constructor;return t===void 0?a=d0(r,!0):(Vm(t,0,Wv),e===void 0?e=s.rounding:Vm(e,0,8),r=so(new s(r),t+1,e),a=d0(r,!0,t+1)),a};Wr.toFixed=function(t,e){var a,r,s=this,l=s.constructor;return t===void 0?d0(s):(Vm(t,0,Wv),e===void 0?e=l.rounding:Vm(e,0,8),r=so(new l(s),t+uu(s)+1,e),a=d0(r.abs(),!1,t+uu(r)+1),s.isneg()&&!s.isZero()?"-"+a:a)};Wr.toInteger=Wr.toint=function(){var t=this,e=t.constructor;return so(new e(t),uu(t)+1,e.rounding)};Wr.toNumber=function(){return+this};Wr.toPower=Wr.pow=function(t){var e,a,r,s,l,h,n=this,w=n.constructor,T=12,E=+(t=new w(t));if(!t.s)return new w(af);if(n=new w(n),!n.s){if(t.s<1)throw Error(jf+"Infinity");return n}if(n.eq(af))return n;if(r=w.precision,t.eq(af))return so(n,r);if(e=t.e,a=t.d.length-1,h=e>=a,l=n.s,h){if((a=E<0?-E:E)<=_Y){for(s=new w(af),e=Math.ceil(r/Po+4),$o=!1;a%2&&(s=s.times(n),w7(s.d,e)),a=Yv(a/2),a!==0;)n=n.times(n),w7(n.d,e);return $o=!0,t.s<0?new w(af).div(s):so(s,r)}}else if(l<0)throw Error(jf+"NaN");return l=l<0&&t.d[Math.max(e,a)]&1?-1:1,n.s=1,$o=!1,s=t.times(NR(n,r+T)),$o=!0,s=wY(s),s.s=l,s};Wr.toPrecision=function(t,e){var a,r,s=this,l=s.constructor;return t===void 0?(a=uu(s),r=d0(s,a<=l.toExpNeg||a>=l.toExpPos)):(Vm(t,1,Wv),e===void 0?e=l.rounding:Vm(e,0,8),s=so(new l(s),t,e),a=uu(s),r=d0(s,t<=a||a<=l.toExpNeg,t)),r};Wr.toSignificantDigits=Wr.tosd=function(t,e){var a=this,r=a.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Vm(t,1,Wv),e===void 0?e=r.rounding:Vm(e,0,8)),so(new r(a),t,e)};Wr.toString=Wr.valueOf=Wr.val=Wr.toJSON=Wr[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=uu(t),a=t.constructor;return d0(t,e<=a.toExpNeg||e>=a.toExpPos)};function vY(t,e){var a,r,s,l,h,n,w,T,E=t.constructor,z=E.precision;if(!t.s||!e.s)return e.s||(e=new E(t)),$o?so(e,z):e;if(w=t.d,T=e.d,h=t.e,s=e.e,w=w.slice(),l=h-s,l){for(l<0?(r=w,l=-l,n=T.length):(r=T,s=h,n=w.length),h=Math.ceil(z/Po),n=h>n?h+1:n+1,l>n&&(l=n,r.length=1),r.reverse();l--;)r.push(0);r.reverse()}for(n=w.length,l=T.length,n-l<0&&(l=n,r=T,T=w,w=r),a=0;l;)a=(w[--l]=w[l]+T[l]+a)/Ju|0,w[l]%=Ju;for(a&&(w.unshift(a),++s),n=w.length;w[--n]==0;)w.pop();return e.d=w,e.e=s,$o?so(e,z):e}function Vm(t,e,a){if(t!==~~t||t<e||t>a)throw Error(t0+t)}function vm(t){var e,a,r,s=t.length-1,l="",h=t[0];if(s>0){for(l+=h,e=1;e<s;e++)r=t[e]+"",a=Po-r.length,a&&(l+=mg(a)),l+=r;h=t[e],r=h+"",a=Po-r.length,a&&(l+=mg(a))}else if(h===0)return"0";for(;h%10===0;)h/=10;return l+h}var fy=function(){function t(r,s){var l,h=0,n=r.length;for(r=r.slice();n--;)l=r[n]*s+h,r[n]=l%Ju|0,h=l/Ju|0;return h&&r.unshift(h),r}function e(r,s,l,h){var n,w;if(l!=h)w=l>h?1:-1;else for(n=w=0;n<l;n++)if(r[n]!=s[n]){w=r[n]>s[n]?1:-1;break}return w}function a(r,s,l){for(var h=0;l--;)r[l]-=h,h=r[l]<s[l]?1:0,r[l]=h*Ju+r[l]-s[l];for(;!r[0]&&r.length>1;)r.shift()}return function(r,s,l,h){var n,w,T,E,z,k,U,Z,q,$,J,ie,de,ge,he,Ae,me,Re,be=r.constructor,De=r.s==s.s?1:-1,ne=r.d,ye=s.d;if(!r.s)return new be(r);if(!s.s)throw Error(jf+"Division by zero");for(w=r.e-s.e,me=ye.length,he=ne.length,U=new be(De),Z=U.d=[],T=0;ye[T]==(ne[T]||0);)++T;if(ye[T]>(ne[T]||0)&&--w,l==null?ie=l=be.precision:h?ie=l+(uu(r)-uu(s))+1:ie=l,ie<0)return new be(0);if(ie=ie/Po+2|0,T=0,me==1)for(E=0,ye=ye[0],ie++;(T<he||E)&&ie--;T++)de=E*Ju+(ne[T]||0),Z[T]=de/ye|0,E=de%ye|0;else{for(E=Ju/(ye[0]+1)|0,E>1&&(ye=t(ye,E),ne=t(ne,E),me=ye.length,he=ne.length),ge=me,q=ne.slice(0,me),$=q.length;$<me;)q[$++]=0;Re=ye.slice(),Re.unshift(0),Ae=ye[0],ye[1]>=Ju/2&&++Ae;do E=0,n=e(ye,q,me,$),n<0?(J=q[0],me!=$&&(J=J*Ju+(q[1]||0)),E=J/Ae|0,E>1?(E>=Ju&&(E=Ju-1),z=t(ye,E),k=z.length,$=q.length,n=e(z,q,k,$),n==1&&(E--,a(z,me<k?Re:ye,k))):(E==0&&(n=E=1),z=ye.slice()),k=z.length,k<$&&z.unshift(0),a(q,z,$),n==-1&&($=q.length,n=e(ye,q,me,$),n<1&&(E++,a(q,me<$?Re:ye,$))),$=q.length):n===0&&(E++,q=[0]),Z[T++]=E,n&&q[0]?q[$++]=ne[ge]||0:(q=[ne[ge]],$=1);while((ge++<he||q[0]!==void 0)&&ie--)}return Z[0]||Z.shift(),U.e=w,so(U,h?l+uu(U)+1:l)}}();function wY(t,e){var a,r,s,l,h,n,w=0,T=0,E=t.constructor,z=E.precision;if(uu(t)>16)throw Error(h4+uu(t));if(!t.s)return new E(af);for($o=!1,n=z,h=new E(.03125);t.abs().gte(.1);)t=t.times(h),T+=5;for(r=Math.log(UA(2,T))/Math.LN10*2+5|0,n+=r,a=s=l=new E(af),E.precision=n;;){if(s=so(s.times(t),n),a=a.times(++w),h=l.plus(fy(s,a,n)),vm(h.d).slice(0,n)===vm(l.d).slice(0,n)){for(;T--;)l=so(l.times(l),n);return E.precision=z,e==null?($o=!0,so(l,z)):l}l=h}}function uu(t){for(var e=t.e*Po,a=t.d[0];a>=10;a/=10)e++;return e}function cO(t,e,a){if(e>t.LN10.sd())throw $o=!0,a&&(t.precision=a),Error(jf+"LN10 precision limit exceeded");return so(new t(t.LN10),e)}function mg(t){for(var e="";t--;)e+="0";return e}function NR(t,e){var a,r,s,l,h,n,w,T,E,z=1,k=10,U=t,Z=U.d,q=U.constructor,$=q.precision;if(U.s<1)throw Error(jf+(U.s?"NaN":"-Infinity"));if(U.eq(af))return new q(0);if(e==null?($o=!1,T=$):T=e,U.eq(10))return e==null&&($o=!0),cO(q,T);if(T+=k,q.precision=T,a=vm(Z),r=a.charAt(0),l=uu(U),Math.abs(l)<15e14){for(;r<7&&r!=1||r==1&&a.charAt(1)>3;)U=U.times(t),a=vm(U.d),r=a.charAt(0),z++;l=uu(U),r>1?(U=new q("0."+a),l++):U=new q(r+"."+a.slice(1))}else return w=cO(q,T+2,$).times(l+""),U=NR(new q(r+"."+a.slice(1)),T-k).plus(w),q.precision=$,e==null?($o=!0,so(U,$)):U;for(n=h=U=fy(U.minus(af),U.plus(af),T),E=so(U.times(U),T),s=3;;){if(h=so(h.times(E),T),w=n.plus(fy(h,new q(s),T)),vm(w.d).slice(0,T)===vm(n.d).slice(0,T))return n=n.times(2),l!==0&&(n=n.plus(cO(q,T+2,$).times(l+""))),n=fy(n,new q(z),T),q.precision=$,e==null?($o=!0,so(n,$)):n;n=w,s+=2}}function v7(t,e){var a,r,s;for((a=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(a<0&&(a=r),a+=+e.slice(r+1),e=e.substring(0,r)):a<0&&(a=e.length),r=0;e.charCodeAt(r)===48;)++r;for(s=e.length;e.charCodeAt(s-1)===48;)--s;if(e=e.slice(r,s),e){if(s-=r,a=a-r-1,t.e=Yv(a/Po),t.d=[],r=(a+1)%Po,a<0&&(r+=Po),r<s){for(r&&t.d.push(+e.slice(0,r)),s-=Po;r<s;)t.d.push(+e.slice(r,r+=Po));e=e.slice(r),r=Po-e.length}else r-=s;for(;r--;)e+="0";if(t.d.push(+e),$o&&(t.e>Zb||t.e<-Zb))throw Error(h4+a)}else t.s=0,t.e=0,t.d=[0];return t}function so(t,e,a){var r,s,l,h,n,w,T,E,z=t.d;for(h=1,l=z[0];l>=10;l/=10)h++;if(r=e-h,r<0)r+=Po,s=e,T=z[E=0];else{if(E=Math.ceil((r+1)/Po),l=z.length,E>=l)return t;for(T=l=z[E],h=1;l>=10;l/=10)h++;r%=Po,s=r-Po+h}if(a!==void 0&&(l=UA(10,h-s-1),n=T/l%10|0,w=e<0||z[E+1]!==void 0||T%l,w=a<4?(n||w)&&(a==0||a==(t.s<0?3:2)):n>5||n==5&&(a==4||w||a==6&&(r>0?s>0?T/UA(10,h-s):0:z[E-1])%10&1||a==(t.s<0?8:7))),e<1||!z[0])return w?(l=uu(t),z.length=1,e=e-l-1,z[0]=UA(10,(Po-e%Po)%Po),t.e=Yv(-e/Po)||0):(z.length=1,z[0]=t.e=t.s=0),t;if(r==0?(z.length=E,l=1,E--):(z.length=E+1,l=UA(10,Po-r),z[E]=s>0?(T/UA(10,h-s)%UA(10,s)|0)*l:0),w)for(;;)if(E==0){(z[0]+=l)==Ju&&(z[0]=1,++t.e);break}else{if(z[E]+=l,z[E]!=Ju)break;z[E--]=0,l=1}for(r=z.length;z[--r]===0;)z.pop();if($o&&(t.e>Zb||t.e<-Zb))throw Error(h4+uu(t));return t}function RY(t,e){var a,r,s,l,h,n,w,T,E,z,k=t.constructor,U=k.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new k(t),$o?so(e,U):e;if(w=t.d,z=e.d,r=e.e,T=t.e,w=w.slice(),h=T-r,h){for(E=h<0,E?(a=w,h=-h,n=z.length):(a=z,r=T,n=w.length),s=Math.max(Math.ceil(U/Po),n)+2,h>s&&(h=s,a.length=1),a.reverse(),s=h;s--;)a.push(0);a.reverse()}else{for(s=w.length,n=z.length,E=s<n,E&&(n=s),s=0;s<n;s++)if(w[s]!=z[s]){E=w[s]<z[s];break}h=0}for(E&&(a=w,w=z,z=a,e.s=-e.s),n=w.length,s=z.length-n;s>0;--s)w[n++]=0;for(s=z.length;s>h;){if(w[--s]<z[s]){for(l=s;l&&w[--l]===0;)w[l]=Ju-1;--w[l],w[s]+=Ju}w[s]-=z[s]}for(;w[--n]===0;)w.pop();for(;w[0]===0;w.shift())--r;return w[0]?(e.d=w,e.e=r,$o?so(e,U):e):new k(0)}function d0(t,e,a){var r,s=uu(t),l=vm(t.d),h=l.length;return e?(a&&(r=a-h)>0?l=l.charAt(0)+"."+l.slice(1)+mg(r):h>1&&(l=l.charAt(0)+"."+l.slice(1)),l=l+(s<0?"e":"e+")+s):s<0?(l="0."+mg(-s-1)+l,a&&(r=a-h)>0&&(l+=mg(r))):s>=h?(l+=mg(s+1-h),a&&(r=a-s-1)>0&&(l=l+"."+mg(r))):((r=s+1)<h&&(l=l.slice(0,r)+"."+l.slice(r)),a&&(r=a-h)>0&&(s+1===h&&(l+="."),l+=mg(r))),t.s<0?"-"+l:l}function w7(t,e){if(t.length>e)return t.length=e,!0}function TY(t){var e,a,r;function s(l){var h=this;if(!(h instanceof s))return new s(l);if(h.constructor=s,l instanceof s){h.s=l.s,h.e=l.e,h.d=(l=l.d)?l.slice():l;return}if(typeof l=="number"){if(l*0!==0)throw Error(t0+l);if(l>0)h.s=1;else if(l<0)l=-l,h.s=-1;else{h.s=0,h.e=0,h.d=[0];return}if(l===~~l&&l<1e7){h.e=0,h.d=[l];return}return v7(h,l.toString())}else if(typeof l!="string")throw Error(t0+l);if(l.charCodeAt(0)===45?(l=l.slice(1),h.s=-1):h.s=1,SAe.test(l))v7(h,l);else throw Error(t0+l)}if(s.prototype=Wr,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=TY,s.config=s.set=CAe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(a=r[e++])||(t[a]=this[a]);return s.config(t),s}function CAe(t){if(!t||typeof t!="object")throw Error(jf+"Object expected");var e,a,r,s=["precision",1,Wv,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<s.length;e+=3)if((r=t[a=s[e]])!==void 0)if(Yv(r)===r&&r>=s[e+1]&&r<=s[e+2])this[a]=r;else throw Error(t0+a+": "+r);if((r=t[a="LN10"])!==void 0)if(r==Math.LN10)this[a]=new this(r);else throw Error(t0+a+": "+r);return this}var f4=TY(TAe);af=new f4(1);const Ys=f4;function bAe(t){return NAe(t)||EAe(t)||PAe(t)||xAe()}function xAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PAe(t,e){if(t){if(typeof t=="string")return LD(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return LD(t,e)}}function EAe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function NAe(t){if(Array.isArray(t))return LD(t)}function LD(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var VAe=function(e){return e},SY={},CY=function(e){return e===SY},R7=function(e){return function a(){return arguments.length===0||arguments.length===1&&CY(arguments.length<=0?void 0:arguments[0])?a:e.apply(void 0,arguments)}},zAe=function t(e,a){return e===1?a:R7(function(){for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];var h=s.filter(function(n){return n!==SY}).length;return h>=e?a.apply(void 0,s):t(e-h,R7(function(){for(var n=arguments.length,w=new Array(n),T=0;T<n;T++)w[T]=arguments[T];var E=s.map(function(z){return CY(z)?w.shift():z});return a.apply(void 0,bAe(E).concat(w))}))})},Ix=function(e){return zAe(e.length,e)},FD=function(e,a){for(var r=[],s=e;s<a;++s)r[s-e]=s;return r},OAe=Ix(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(a){return e[a]}).map(t)}),DAe=function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];if(!a.length)return VAe;var s=a.reverse(),l=s[0],h=s.slice(1);return function(){return h.reduce(function(n,w){return w(n)},l.apply(void 0,arguments))}},UD=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},bY=function(e){var a=null,r=null;return function(){for(var s=arguments.length,l=new Array(s),h=0;h<s;h++)l[h]=arguments[h];return a&&l.every(function(n,w){return n===a[w]})||(a=l,r=e.apply(void 0,l)),r}};function MAe(t){var e;return t===0?e=1:e=Math.floor(new Ys(t).abs().log(10).toNumber())+1,e}function IAe(t,e,a){for(var r=new Ys(t),s=0,l=[];r.lt(e)&&s<1e5;)l.push(r.toNumber()),r=r.add(a),s++;return l}var LAe=Ix(function(t,e,a){var r=+t,s=+e;return r+a*(s-r)}),FAe=Ix(function(t,e,a){var r=e-+t;return r=r||1/0,(a-t)/r}),UAe=Ix(function(t,e,a){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(a-t)/r))});const Lx={rangeStep:IAe,getDigitCount:MAe,interpolateNumber:LAe,uninterpolateNumber:FAe,uninterpolateTruncation:UAe};function kD(t){return GAe(t)||BAe(t)||xY(t)||kAe()}function kAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BAe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function GAe(t){if(Array.isArray(t))return BD(t)}function VR(t,e){return qAe(t)||ZAe(t,e)||xY(t,e)||jAe()}function jAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xY(t,e){if(t){if(typeof t=="string")return BD(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return BD(t,e)}}function BD(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function ZAe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var a=[],r=!0,s=!1,l=void 0;try{for(var h=t[Symbol.iterator](),n;!(r=(n=h.next()).done)&&(a.push(n.value),!(e&&a.length===e));r=!0);}catch(w){s=!0,l=w}finally{try{!r&&h.return!=null&&h.return()}finally{if(s)throw l}}return a}}function qAe(t){if(Array.isArray(t))return t}function PY(t){var e=VR(t,2),a=e[0],r=e[1],s=a,l=r;return a>r&&(s=r,l=a),[s,l]}function EY(t,e,a){if(t.lte(0))return new Ys(0);var r=Lx.getDigitCount(t.toNumber()),s=new Ys(10).pow(r),l=t.div(s),h=r!==1?.05:.1,n=new Ys(Math.ceil(l.div(h).toNumber())).add(a).mul(h),w=n.mul(s);return e?w:new Ys(Math.ceil(w))}function HAe(t,e,a){var r=1,s=new Ys(t);if(!s.isint()&&a){var l=Math.abs(t);l<1?(r=new Ys(10).pow(Lx.getDigitCount(t)-1),s=new Ys(Math.floor(s.div(r).toNumber())).mul(r)):l>1&&(s=new Ys(Math.floor(t)))}else t===0?s=new Ys(Math.floor((e-1)/2)):a||(s=new Ys(Math.floor(t)));var h=Math.floor((e-1)/2),n=DAe(OAe(function(w){return s.add(new Ys(w-h).mul(r)).toNumber()}),FD);return n(0,e)}function NY(t,e,a,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(a-1)))return{step:new Ys(0),tickMin:new Ys(0),tickMax:new Ys(0)};var l=EY(new Ys(e).sub(t).div(a-1),r,s),h;t<=0&&e>=0?h=new Ys(0):(h=new Ys(t).add(e).div(2),h=h.sub(new Ys(h).mod(l)));var n=Math.ceil(h.sub(t).div(l).toNumber()),w=Math.ceil(new Ys(e).sub(h).div(l).toNumber()),T=n+w+1;return T>a?NY(t,e,a,r,s+1):(T<a&&(w=e>0?w+(a-T):w,n=e>0?n:n+(a-T)),{step:l,tickMin:h.sub(new Ys(n).mul(l)),tickMax:h.add(new Ys(w).mul(l))})}function $Ae(t){var e=VR(t,2),a=e[0],r=e[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,h=Math.max(s,2),n=PY([a,r]),w=VR(n,2),T=w[0],E=w[1];if(T===-1/0||E===1/0){var z=E===1/0?[T].concat(kD(FD(0,s-1).map(function(){return 1/0}))):[].concat(kD(FD(0,s-1).map(function(){return-1/0})),[E]);return a>r?UD(z):z}if(T===E)return HAe(T,s,l);var k=NY(T,E,h,l),U=k.step,Z=k.tickMin,q=k.tickMax,$=Lx.rangeStep(Z,q.add(new Ys(.1).mul(U)),U);return a>r?UD($):$}function KAe(t,e){var a=VR(t,2),r=a[0],s=a[1],l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,h=PY([r,s]),n=VR(h,2),w=n[0],T=n[1];if(w===-1/0||T===1/0)return[r,s];if(w===T)return[w];var E=Math.max(e,2),z=EY(new Ys(T).sub(w).div(E-1),l,0),k=[].concat(kD(Lx.rangeStep(new Ys(w),new Ys(T).sub(new Ys(.99).mul(z)),z)),[T]);return r>s?UD(k):k}var WAe=bY($Ae),YAe=bY(KAe),XAe="Invariant failed";function h0(t,e){throw new Error(XAe)}var JAe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function hv(t){"@babel/helpers - typeof";return hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hv(t)}function qb(){return qb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},qb.apply(this,arguments)}function QAe(t,e){return r0e(t)||a0e(t,e)||t0e(t,e)||e0e()}function e0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t0e(t,e){if(t){if(typeof t=="string")return T7(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return T7(t,e)}}function T7(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function a0e(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(E){T=!0,s=E}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function r0e(t){if(Array.isArray(t))return t}function n0e(t,e){if(t==null)return{};var a=i0e(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function i0e(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function s0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o0e(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,OY(r.key),r)}}function l0e(t,e,a){return e&&o0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function u0e(t,e,a){return e=Hb(e),c0e(t,VY()?Reflect.construct(e,a||[],Hb(t).constructor):e.apply(t,a))}function c0e(t,e){if(e&&(hv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d0e(t)}function d0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VY=function(){return!!t})()}function Hb(t){return Hb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Hb(t)}function h0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GD(t,e)}function GD(t,e){return GD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},GD(t,e)}function zY(t,e,a){return e=OY(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function OY(t){var e=f0e(t,"string");return hv(e)=="symbol"?e:e+""}function f0e(t,e){if(hv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(hv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Xv=function(t){function e(){return s0e(this,e),u0e(this,e,arguments)}return h0e(e,t),l0e(e,[{key:"render",value:function(){var r=this.props,s=r.offset,l=r.layout,h=r.width,n=r.dataKey,w=r.data,T=r.dataPointFormatter,E=r.xAxis,z=r.yAxis,k=n0e(r,JAe),U=ln(k,!1);this.props.direction==="x"&&E.type!=="number"&&h0();var Z=w.map(function(q){var $=T(q,n),J=$.x,ie=$.y,de=$.value,ge=$.errorVal;if(!ge)return null;var he=[],Ae,me;if(Array.isArray(ge)){var Re=QAe(ge,2);Ae=Re[0],me=Re[1]}else Ae=me=ge;if(l==="vertical"){var be=E.scale,De=ie+s,ne=De+h,ye=De-h,Me=be(de-Ae),ze=be(de+me);he.push({x1:ze,y1:ne,x2:ze,y2:ye}),he.push({x1:Me,y1:De,x2:ze,y2:De}),he.push({x1:Me,y1:ne,x2:Me,y2:ye})}else if(l==="horizontal"){var Le=z.scale,Ie=J+s,qe=Ie-h,ke=Ie+h,tt=Le(de-Ae),Ue=Le(de+me);he.push({x1:qe,y1:Ue,x2:ke,y2:Ue}),he.push({x1:Ie,y1:tt,x2:Ie,y2:Ue}),he.push({x1:qe,y1:tt,x2:ke,y2:tt})}return Vt.createElement(fi,qb({className:"recharts-errorBar",key:"bar-".concat(he.map(function(He){return"".concat(He.x1,"-").concat(He.x2,"-").concat(He.y1,"-").concat(He.y2)}))},U),he.map(function(He){return Vt.createElement("line",qb({},He,{key:"line-".concat(He.x1,"-").concat(He.x2,"-").concat(He.y1,"-").concat(He.y2)}))}))});return Vt.createElement(fi,{className:"recharts-errorBars"},Z)}}])}(Vt.Component);zY(Xv,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});zY(Xv,"displayName","ErrorBar");function zR(t){"@babel/helpers - typeof";return zR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zR(t)}function S7(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function DA(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?S7(Object(a),!0).forEach(function(r){p0e(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):S7(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function p0e(t,e,a){return e=m0e(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function m0e(t){var e=y0e(t,"string");return zR(e)=="symbol"?e:e+""}function y0e(t,e){if(zR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(zR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var DY=function(e){var a=e.children,r=e.formattedGraphicalItems,s=e.legendWidth,l=e.legendContent,h=ef(a,tf);if(!h)return null;var n=tf.defaultProps,w=n!==void 0?DA(DA({},n),h.props):{},T;return h.props&&h.props.payload?T=h.props&&h.props.payload:l==="children"?T=(r||[]).reduce(function(E,z){var k=z.item,U=z.props,Z=U.sectors||U.data||[];return E.concat(Z.map(function(q){return{type:h.props.iconType||k.props.legendType,value:q.name,color:q.fill,payload:q}}))},[]):T=(r||[]).map(function(E){var z=E.item,k=z.type.defaultProps,U=k!==void 0?DA(DA({},k),z.props):{},Z=U.dataKey,q=U.name,$=U.legendType,J=U.hide;return{inactive:J,dataKey:Z,type:w.iconType||$||"square",color:p4(z),value:q||Z,payload:U}}),DA(DA(DA({},w),tf.getWithHeight(h,s)),{},{payload:T,item:h})};function OR(t){"@babel/helpers - typeof";return OR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OR(t)}function C7(t){return v0e(t)||_0e(t)||A0e(t)||g0e()}function g0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A0e(t,e){if(t){if(typeof t=="string")return jD(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return jD(t,e)}}function _0e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function v0e(t){if(Array.isArray(t))return jD(t)}function jD(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function b7(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Tl(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?b7(Object(a),!0).forEach(function(r){G_(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):b7(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function G_(t,e,a){return e=w0e(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function w0e(t){var e=R0e(t,"string");return OR(e)=="symbol"?e:e+""}function R0e(t,e){if(OR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(OR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function No(t,e,a){return Un(t)||Un(e)?a:Mu(e)?lf(t,e,a):Fn(e)?e(t):a}function Zw(t,e,a,r){var s=vAe(t,function(n){return No(n,e)});if(a==="number"){var l=s.filter(function(n){return mr(n)||parseFloat(n)});return l.length?[Mx(l),Rg(l)]:[1/0,-1/0]}var h=r?s.filter(function(n){return!Un(n)}):s;return h.map(function(n){return Mu(n)||n instanceof Date?n:""})}var T0e=function(e){var a,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0,h=-1,n=(a=r==null?void 0:r.length)!==null&&a!==void 0?a:0;if(n<=1)return 0;if(l&&l.axisType==="angleAxis"&&Math.abs(Math.abs(l.range[1]-l.range[0])-360)<=1e-6)for(var w=l.range,T=0;T<n;T++){var E=T>0?s[T-1].coordinate:s[n-1].coordinate,z=s[T].coordinate,k=T>=n-1?s[0].coordinate:s[T+1].coordinate,U=void 0;if(Yd(z-E)!==Yd(k-z)){var Z=[];if(Yd(k-z)===Yd(w[1]-w[0])){U=k;var q=z+w[1]-w[0];Z[0]=Math.min(q,(q+E)/2),Z[1]=Math.max(q,(q+E)/2)}else{U=E;var $=k+w[1]-w[0];Z[0]=Math.min(z,($+z)/2),Z[1]=Math.max(z,($+z)/2)}var J=[Math.min(z,(U+z)/2),Math.max(z,(U+z)/2)];if(e>J[0]&&e<=J[1]||e>=Z[0]&&e<=Z[1]){h=s[T].index;break}}else{var ie=Math.min(E,k),de=Math.max(E,k);if(e>(ie+z)/2&&e<=(de+z)/2){h=s[T].index;break}}}else for(var ge=0;ge<n;ge++)if(ge===0&&e<=(r[ge].coordinate+r[ge+1].coordinate)/2||ge>0&&ge<n-1&&e>(r[ge].coordinate+r[ge-1].coordinate)/2&&e<=(r[ge].coordinate+r[ge+1].coordinate)/2||ge===n-1&&e>(r[ge].coordinate+r[ge-1].coordinate)/2){h=r[ge].index;break}return h},p4=function(e){var a,r=e,s=r.type.displayName,l=(a=e.type)!==null&&a!==void 0&&a.defaultProps?Tl(Tl({},e.type.defaultProps),e.props):e.props,h=l.stroke,n=l.fill,w;switch(s){case"Line":w=h;break;case"Area":case"Radar":w=h&&h!=="none"?h:n;break;default:w=n;break}return w},S0e=function(e){var a=e.barSize,r=e.totalSize,s=e.stackGroups,l=s===void 0?{}:s;if(!l)return{};for(var h={},n=Object.keys(l),w=0,T=n.length;w<T;w++)for(var E=l[n[w]].stackGroups,z=Object.keys(E),k=0,U=z.length;k<U;k++){var Z=E[z[k]],q=Z.items,$=Z.cateAxisId,J=q.filter(function(me){return hy(me.type).indexOf("Bar")>=0});if(J&&J.length){var ie=J[0].type.defaultProps,de=ie!==void 0?Tl(Tl({},ie),J[0].props):J[0].props,ge=de.barSize,he=de[$];h[he]||(h[he]=[]);var Ae=Un(ge)?a:ge;h[he].push({item:J[0],stackList:J.slice(1),barSize:Un(Ae)?void 0:Xd(Ae,r,0)})}}return h},C0e=function(e){var a=e.barGap,r=e.barCategoryGap,s=e.bandSize,l=e.sizeList,h=l===void 0?[]:l,n=e.maxBarSize,w=h.length;if(w<1)return null;var T=Xd(a,s,0,!0),E,z=[];if(h[0].barSize===+h[0].barSize){var k=!1,U=s/w,Z=h.reduce(function(ge,he){return ge+he.barSize||0},0);Z+=(w-1)*T,Z>=s&&(Z-=(w-1)*T,T=0),Z>=s&&U>0&&(k=!0,U*=.9,Z=w*U);var q=(s-Z)/2>>0,$={offset:q-T,size:0};E=h.reduce(function(ge,he){var Ae={item:he.item,position:{offset:$.offset+$.size+T,size:k?U:he.barSize}},me=[].concat(C7(ge),[Ae]);return $=me[me.length-1].position,he.stackList&&he.stackList.length&&he.stackList.forEach(function(Re){me.push({item:Re,position:$})}),me},z)}else{var J=Xd(r,s,0,!0);s-2*J-(w-1)*T<=0&&(T=0);var ie=(s-2*J-(w-1)*T)/w;ie>1&&(ie>>=0);var de=n===+n?Math.min(ie,n):ie;E=h.reduce(function(ge,he,Ae){var me=[].concat(C7(ge),[{item:he.item,position:{offset:J+(ie+T)*Ae+(ie-de)/2,size:de}}]);return he.stackList&&he.stackList.length&&he.stackList.forEach(function(Re){me.push({item:Re,position:me[me.length-1].position})}),me},z)}return E},b0e=function(e,a,r,s){var l=r.children,h=r.width,n=r.margin,w=h-(n.left||0)-(n.right||0),T=DY({children:l,legendWidth:w});if(T){var E=s||{},z=E.width,k=E.height,U=T.align,Z=T.verticalAlign,q=T.layout;if((q==="vertical"||q==="horizontal"&&Z==="middle")&&U!=="center"&&mr(e[U]))return Tl(Tl({},e),{},G_({},U,e[U]+(z||0)));if((q==="horizontal"||q==="vertical"&&U==="center")&&Z!=="middle"&&mr(e[Z]))return Tl(Tl({},e),{},G_({},Z,e[Z]+(k||0)))}return e},x0e=function(e,a,r){return Un(a)?!0:e==="horizontal"?a==="yAxis":e==="vertical"||r==="x"?a==="xAxis":r==="y"?a==="yAxis":!0},MY=function(e,a,r,s,l){var h=a.props.children,n=th(h,Xv).filter(function(T){return x0e(s,l,T.props.direction)});if(n&&n.length){var w=n.map(function(T){return T.props.dataKey});return e.reduce(function(T,E){var z=No(E,r);if(Un(z))return T;var k=Array.isArray(z)?[Mx(z),Rg(z)]:[z,z],U=w.reduce(function(Z,q){var $=No(E,q,0),J=k[0]-Math.abs(Array.isArray($)?$[0]:$),ie=k[1]+Math.abs(Array.isArray($)?$[1]:$);return[Math.min(J,Z[0]),Math.max(ie,Z[1])]},[1/0,-1/0]);return[Math.min(U[0],T[0]),Math.max(U[1],T[1])]},[1/0,-1/0])}return null},P0e=function(e,a,r,s,l){var h=a.map(function(n){return MY(e,n,r,l,s)}).filter(function(n){return!Un(n)});return h&&h.length?h.reduce(function(n,w){return[Math.min(n[0],w[0]),Math.max(n[1],w[1])]},[1/0,-1/0]):null},IY=function(e,a,r,s,l){var h=a.map(function(w){var T=w.props.dataKey;return r==="number"&&T&&MY(e,w,T,s)||Zw(e,T,r,l)});if(r==="number")return h.reduce(function(w,T){return[Math.min(w[0],T[0]),Math.max(w[1],T[1])]},[1/0,-1/0]);var n={};return h.reduce(function(w,T){for(var E=0,z=T.length;E<z;E++)n[T[E]]||(n[T[E]]=!0,w.push(T[E]));return w},[])},LY=function(e,a){return e==="horizontal"&&a==="xAxis"||e==="vertical"&&a==="yAxis"||e==="centric"&&a==="angleAxis"||e==="radial"&&a==="radiusAxis"},FY=function(e,a,r,s){if(s)return e.map(function(w){return w.coordinate});var l,h,n=e.map(function(w){return w.coordinate===a&&(l=!0),w.coordinate===r&&(h=!0),w.coordinate});return l||n.push(a),h||n.push(r),n},uy=function(e,a,r){if(!e)return null;var s=e.scale,l=e.duplicateDomain,h=e.type,n=e.range,w=e.realScaleType==="scaleBand"?s.bandwidth()/2:2,T=(a||r)&&h==="category"&&s.bandwidth?s.bandwidth()/w:0;if(T=e.axisType==="angleAxis"&&(n==null?void 0:n.length)>=2?Yd(n[0]-n[1])*2*T:T,a&&(e.ticks||e.niceTicks)){var E=(e.ticks||e.niceTicks).map(function(z){var k=l?l.indexOf(z):z;return{coordinate:s(k)+T,value:z,offset:T}});return E.filter(function(z){return!Hv(z.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(z,k){return{coordinate:s(z)+T,value:z,index:k,offset:T}}):s.ticks&&!r?s.ticks(e.tickCount).map(function(z){return{coordinate:s(z)+T,value:z,offset:T}}):s.domain().map(function(z,k){return{coordinate:s(z)+T,value:l?l[z]:z,index:k,offset:T}})},dO=new WeakMap,fC=function(e,a){if(typeof a!="function")return e;dO.has(e)||dO.set(e,new WeakMap);var r=dO.get(e);if(r.has(a))return r.get(a);var s=function(){e.apply(void 0,arguments),a.apply(void 0,arguments)};return r.set(a,s),s},UY=function(e,a,r){var s=e.scale,l=e.type,h=e.layout,n=e.axisType;if(s==="auto")return h==="radial"&&n==="radiusAxis"?{scale:CR(),realScaleType:"band"}:h==="radial"&&n==="angleAxis"?{scale:kb(),realScaleType:"linear"}:l==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!r)?{scale:jw(),realScaleType:"point"}:l==="category"?{scale:CR(),realScaleType:"band"}:{scale:kb(),realScaleType:"linear"};if(PT(s)){var w="scale".concat(vx(s));return{scale:(d7[w]||jw)(),realScaleType:d7[w]?w:"point"}}return Fn(s)?{scale:s}:{scale:jw(),realScaleType:"point"}},x7=1e-4,kY=function(e){var a=e.domain();if(!(!a||a.length<=2)){var r=a.length,s=e.range(),l=Math.min(s[0],s[1])-x7,h=Math.max(s[0],s[1])+x7,n=e(a[0]),w=e(a[r-1]);(n<l||n>h||w<l||w>h)&&e.domain([a[0],a[r-1]])}},E0e=function(e,a){if(!e)return null;for(var r=0,s=e.length;r<s;r++)if(e[r].item===a)return e[r].position;return null},N0e=function(e,a){if(!a||a.length!==2||!mr(a[0])||!mr(a[1]))return e;var r=Math.min(a[0],a[1]),s=Math.max(a[0],a[1]),l=[e[0],e[1]];return(!mr(e[0])||e[0]<r)&&(l[0]=r),(!mr(e[1])||e[1]>s)&&(l[1]=s),l[0]>s&&(l[0]=s),l[1]<r&&(l[1]=r),l},V0e=function(e){var a=e.length;if(!(a<=0))for(var r=0,s=e[0].length;r<s;++r)for(var l=0,h=0,n=0;n<a;++n){var w=Hv(e[n][r][1])?e[n][r][0]:e[n][r][1];w>=0?(e[n][r][0]=l,e[n][r][1]=l+w,l=e[n][r][1]):(e[n][r][0]=h,e[n][r][1]=h+w,h=e[n][r][1])}},z0e=function(e){var a=e.length;if(!(a<=0))for(var r=0,s=e[0].length;r<s;++r)for(var l=0,h=0;h<a;++h){var n=Hv(e[h][r][1])?e[h][r][0]:e[h][r][1];n>=0?(e[h][r][0]=l,e[h][r][1]=l+n,l=e[h][r][1]):(e[h][r][0]=0,e[h][r][1]=0)}},O0e={sign:V0e,expand:vhe,none:rv,silhouette:whe,wiggle:Rhe,positive:z0e},D0e=function(e,a,r){var s=a.map(function(n){return n.props.dataKey}),l=O0e[r],h=_he().keys(s).value(function(n,w){return+No(n,w,0)}).order(_D).offset(l);return h(e)},M0e=function(e,a,r,s,l,h){if(!e)return null;var n=h?a.reverse():a,w={},T=n.reduce(function(z,k){var U,Z=(U=k.type)!==null&&U!==void 0&&U.defaultProps?Tl(Tl({},k.type.defaultProps),k.props):k.props,q=Z.stackId,$=Z.hide;if($)return z;var J=Z[r],ie=z[J]||{hasStack:!1,stackGroups:{}};if(Mu(q)){var de=ie.stackGroups[q]||{numericAxisId:r,cateAxisId:s,items:[]};de.items.push(k),ie.hasStack=!0,ie.stackGroups[q]=de}else ie.stackGroups[qg("_stackId_")]={numericAxisId:r,cateAxisId:s,items:[k]};return Tl(Tl({},z),{},G_({},J,ie))},w),E={};return Object.keys(T).reduce(function(z,k){var U=T[k];if(U.hasStack){var Z={};U.stackGroups=Object.keys(U.stackGroups).reduce(function(q,$){var J=U.stackGroups[$];return Tl(Tl({},q),{},G_({},$,{numericAxisId:r,cateAxisId:s,items:J.items,stackedData:D0e(e,J.items,l)}))},Z)}return Tl(Tl({},z),{},G_({},k,U))},E)},BY=function(e,a){var r=a.realScaleType,s=a.type,l=a.tickCount,h=a.originalDomain,n=a.allowDecimals,w=r||a.scale;if(w!=="auto"&&w!=="linear")return null;if(l&&s==="number"&&h&&(h[0]==="auto"||h[1]==="auto")){var T=e.domain();if(!T.length)return null;var E=WAe(T,l,n);return e.domain([Mx(E),Rg(E)]),{niceTicks:E}}if(l&&s==="number"){var z=e.domain(),k=YAe(z,l,n);return{niceTicks:k}}return null};function fv(t){var e=t.axis,a=t.ticks,r=t.bandSize,s=t.entry,l=t.index,h=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Un(s[e.dataKey])){var n=Rb(a,"value",s[e.dataKey]);if(n)return n.coordinate+r/2}return a[l]?a[l].coordinate+r/2:null}var w=No(s,Un(h)?e.dataKey:h);return Un(w)?null:e.scale(w)}var P7=function(e){var a=e.axis,r=e.ticks,s=e.offset,l=e.bandSize,h=e.entry,n=e.index;if(a.type==="category")return r[n]?r[n].coordinate+s:null;var w=No(h,a.dataKey,a.domain[n]);return Un(w)?null:a.scale(w)-l/2+s},I0e=function(e){var a=e.numericAxis,r=a.scale.domain();if(a.type==="number"){var s=Math.min(r[0],r[1]),l=Math.max(r[0],r[1]);return s<=0&&l>=0?0:l<0?l:s}return r[0]},L0e=function(e,a){var r,s=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Tl(Tl({},e.type.defaultProps),e.props):e.props,l=s.stackId;if(Mu(l)){var h=a[l];if(h){var n=h.items.indexOf(e);return n>=0?h.stackedData[n]:null}}return null},F0e=function(e){return e.reduce(function(a,r){return[Mx(r.concat([a[0]]).filter(mr)),Rg(r.concat([a[1]]).filter(mr))]},[1/0,-1/0])},GY=function(e,a,r){return Object.keys(e).reduce(function(s,l){var h=e[l],n=h.stackedData,w=n.reduce(function(T,E){var z=F0e(E.slice(a,r+1));return[Math.min(T[0],z[0]),Math.max(T[1],z[1])]},[1/0,-1/0]);return[Math.min(w[0],s[0]),Math.max(w[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},E7=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,N7=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ZD=function(e,a,r){if(Fn(e))return e(a,r);if(!Array.isArray(e))return a;var s=[];if(mr(e[0]))s[0]=r?e[0]:Math.min(e[0],a[0]);else if(E7.test(e[0])){var l=+E7.exec(e[0])[1];s[0]=a[0]-l}else Fn(e[0])?s[0]=e[0](a[0]):s[0]=a[0];if(mr(e[1]))s[1]=r?e[1]:Math.max(e[1],a[1]);else if(N7.test(e[1])){var h=+N7.exec(e[1])[1];s[1]=a[1]+h}else Fn(e[1])?s[1]=e[1](a[1]):s[1]=a[1];return s},$b=function(e,a,r){if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!r||s>0)return s}if(e&&a&&a.length>=2){for(var l=GI(a,function(z){return z.coordinate}),h=1/0,n=1,w=l.length;n<w;n++){var T=l[n],E=l[n-1];h=Math.min((T.coordinate||0)-(E.coordinate||0),h)}return h===1/0?0:h}return r?void 0:0},V7=function(e,a,r){return!e||!e.length||Mg(e,lf(r,"type.defaultProps.domain"))?a:e},jY=function(e,a){var r=e.type.defaultProps?Tl(Tl({},e.type.defaultProps),e.props):e.props,s=r.dataKey,l=r.name,h=r.unit,n=r.formatter,w=r.tooltipType,T=r.chartType,E=r.hide;return Tl(Tl({},ln(e,!1)),{},{dataKey:s,unit:h,formatter:n,name:l||s,color:p4(e),value:No(a,s),type:w,payload:a,chartType:T,hide:E})};function DR(t){"@babel/helpers - typeof";return DR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DR(t)}function z7(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function ry(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?z7(Object(a),!0).forEach(function(r){ZY(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):z7(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function ZY(t,e,a){return e=U0e(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function U0e(t){var e=k0e(t,"string");return DR(e)=="symbol"?e:e+""}function k0e(t,e){if(DR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(DR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function B0e(t,e){return q0e(t)||Z0e(t,e)||j0e(t,e)||G0e()}function G0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j0e(t,e){if(t){if(typeof t=="string")return O7(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return O7(t,e)}}function O7(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function Z0e(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(E){T=!0,s=E}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function q0e(t){if(Array.isArray(t))return t}var Kb=Math.PI/180,H0e=function(e){return e*180/Math.PI},wo=function(e,a,r,s){return{x:e+Math.cos(-Kb*s)*r,y:a+Math.sin(-Kb*s)*r}},qY=function(e,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(a-(r.top||0)-(r.bottom||0)))/2},$0e=function(e,a,r,s,l){var h=e.width,n=e.height,w=e.startAngle,T=e.endAngle,E=Xd(e.cx,h,h/2),z=Xd(e.cy,n,n/2),k=qY(h,n,r),U=Xd(e.innerRadius,k,0),Z=Xd(e.outerRadius,k,k*.8),q=Object.keys(a);return q.reduce(function($,J){var ie=a[J],de=ie.domain,ge=ie.reversed,he;if(Un(ie.range))s==="angleAxis"?he=[w,T]:s==="radiusAxis"&&(he=[U,Z]),ge&&(he=[he[1],he[0]]);else{he=ie.range;var Ae=he,me=B0e(Ae,2);w=me[0],T=me[1]}var Re=UY(ie,l),be=Re.realScaleType,De=Re.scale;De.domain(de).range(he),kY(De);var ne=BY(De,ry(ry({},ie),{},{realScaleType:be})),ye=ry(ry(ry({},ie),ne),{},{range:he,radius:Z,realScaleType:be,scale:De,cx:E,cy:z,innerRadius:U,outerRadius:Z,startAngle:w,endAngle:T});return ry(ry({},$),{},ZY({},J,ye))},{})},K0e=function(e,a){var r=e.x,s=e.y,l=a.x,h=a.y;return Math.sqrt(Math.pow(r-l,2)+Math.pow(s-h,2))},W0e=function(e,a){var r=e.x,s=e.y,l=a.cx,h=a.cy,n=K0e({x:r,y:s},{x:l,y:h});if(n<=0)return{radius:n};var w=(r-l)/n,T=Math.acos(w);return s>h&&(T=2*Math.PI-T),{radius:n,angle:H0e(T),angleInRadian:T}},Y0e=function(e){var a=e.startAngle,r=e.endAngle,s=Math.floor(a/360),l=Math.floor(r/360),h=Math.min(s,l);return{startAngle:a-h*360,endAngle:r-h*360}},X0e=function(e,a){var r=a.startAngle,s=a.endAngle,l=Math.floor(r/360),h=Math.floor(s/360),n=Math.min(l,h);return e+n*360},D7=function(e,a){var r=e.x,s=e.y,l=W0e({x:r,y:s},a),h=l.radius,n=l.angle,w=a.innerRadius,T=a.outerRadius;if(h<w||h>T)return!1;if(h===0)return!0;var E=Y0e(a),z=E.startAngle,k=E.endAngle,U=n,Z;if(z<=k){for(;U>k;)U-=360;for(;U<z;)U+=360;Z=U>=z&&U<=k}else{for(;U>z;)U-=360;for(;U<k;)U+=360;Z=U>=k&&U<=z}return Z?ry(ry({},a),{},{radius:h,angle:X0e(U,a)}):null},HY=function(e){return!nt.isValidElement(e)&&!Fn(e)&&typeof e!="boolean"?e.className:""};function MR(t){"@babel/helpers - typeof";return MR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},MR(t)}var J0e=["offset"];function Q0e(t){return r_e(t)||a_e(t)||t_e(t)||e_e()}function e_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t_e(t,e){if(t){if(typeof t=="string")return qD(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return qD(t,e)}}function a_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function r_e(t){if(Array.isArray(t))return qD(t)}function qD(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function n_e(t,e){if(t==null)return{};var a=i_e(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function i_e(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function M7(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Du(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?M7(Object(a),!0).forEach(function(r){s_e(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):M7(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function s_e(t,e,a){return e=o_e(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function o_e(t){var e=l_e(t,"string");return MR(e)=="symbol"?e:e+""}function l_e(t,e){if(MR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(MR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function IR(){return IR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},IR.apply(this,arguments)}var u_e=function(e){var a=e.value,r=e.formatter,s=Un(e.children)?a:e.children;return Fn(r)?r(s):s},c_e=function(e,a){var r=Yd(a-e),s=Math.min(Math.abs(a-e),360);return r*s},d_e=function(e,a,r){var s=e.position,l=e.viewBox,h=e.offset,n=e.className,w=l,T=w.cx,E=w.cy,z=w.innerRadius,k=w.outerRadius,U=w.startAngle,Z=w.endAngle,q=w.clockWise,$=(z+k)/2,J=c_e(U,Z),ie=J>=0?1:-1,de,ge;s==="insideStart"?(de=U+ie*h,ge=q):s==="insideEnd"?(de=Z-ie*h,ge=!q):s==="end"&&(de=Z+ie*h,ge=q),ge=J<=0?ge:!ge;var he=wo(T,E,$,de),Ae=wo(T,E,$,de+(ge?1:-1)*359),me="M".concat(he.x,",").concat(he.y,`
    A`).concat($,",").concat($,",0,1,").concat(ge?0:1,`,
    `).concat(Ae.x,",").concat(Ae.y),Re=Un(e.id)?qg("recharts-radial-line-"):e.id;return Vt.createElement("text",IR({},r,{dominantBaseline:"central",className:ci("recharts-radial-bar-label",n)}),Vt.createElement("defs",null,Vt.createElement("path",{id:Re,d:me})),Vt.createElement("textPath",{xlinkHref:"#".concat(Re)},a))},h_e=function(e){var a=e.viewBox,r=e.offset,s=e.position,l=a,h=l.cx,n=l.cy,w=l.innerRadius,T=l.outerRadius,E=l.startAngle,z=l.endAngle,k=(E+z)/2;if(s==="outside"){var U=wo(h,n,T+r,k),Z=U.x,q=U.y;return{x:Z,y:q,textAnchor:Z>=h?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:h,y:n,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:h,y:n,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:h,y:n,textAnchor:"middle",verticalAnchor:"end"};var $=(w+T)/2,J=wo(h,n,$,k),ie=J.x,de=J.y;return{x:ie,y:de,textAnchor:"middle",verticalAnchor:"middle"}},f_e=function(e){var a=e.viewBox,r=e.parentViewBox,s=e.offset,l=e.position,h=a,n=h.x,w=h.y,T=h.width,E=h.height,z=E>=0?1:-1,k=z*s,U=z>0?"end":"start",Z=z>0?"start":"end",q=T>=0?1:-1,$=q*s,J=q>0?"end":"start",ie=q>0?"start":"end";if(l==="top"){var de={x:n+T/2,y:w-z*s,textAnchor:"middle",verticalAnchor:U};return Du(Du({},de),r?{height:Math.max(w-r.y,0),width:T}:{})}if(l==="bottom"){var ge={x:n+T/2,y:w+E+k,textAnchor:"middle",verticalAnchor:Z};return Du(Du({},ge),r?{height:Math.max(r.y+r.height-(w+E),0),width:T}:{})}if(l==="left"){var he={x:n-$,y:w+E/2,textAnchor:J,verticalAnchor:"middle"};return Du(Du({},he),r?{width:Math.max(he.x-r.x,0),height:E}:{})}if(l==="right"){var Ae={x:n+T+$,y:w+E/2,textAnchor:ie,verticalAnchor:"middle"};return Du(Du({},Ae),r?{width:Math.max(r.x+r.width-Ae.x,0),height:E}:{})}var me=r?{width:T,height:E}:{};return l==="insideLeft"?Du({x:n+$,y:w+E/2,textAnchor:ie,verticalAnchor:"middle"},me):l==="insideRight"?Du({x:n+T-$,y:w+E/2,textAnchor:J,verticalAnchor:"middle"},me):l==="insideTop"?Du({x:n+T/2,y:w+k,textAnchor:"middle",verticalAnchor:Z},me):l==="insideBottom"?Du({x:n+T/2,y:w+E-k,textAnchor:"middle",verticalAnchor:U},me):l==="insideTopLeft"?Du({x:n+$,y:w+k,textAnchor:ie,verticalAnchor:Z},me):l==="insideTopRight"?Du({x:n+T-$,y:w+k,textAnchor:J,verticalAnchor:Z},me):l==="insideBottomLeft"?Du({x:n+$,y:w+E-k,textAnchor:ie,verticalAnchor:U},me):l==="insideBottomRight"?Du({x:n+T-$,y:w+E-k,textAnchor:J,verticalAnchor:U},me):qv(l)&&(mr(l.x)||HA(l.x))&&(mr(l.y)||HA(l.y))?Du({x:n+Xd(l.x,T),y:w+Xd(l.y,E),textAnchor:"end",verticalAnchor:"end"},me):Du({x:n+T/2,y:w+E/2,textAnchor:"middle",verticalAnchor:"middle"},me)},p_e=function(e){return"cx"in e&&mr(e.cx)};function ec(t){var e=t.offset,a=e===void 0?5:e,r=n_e(t,J0e),s=Du({offset:a},r),l=s.viewBox,h=s.position,n=s.value,w=s.children,T=s.content,E=s.className,z=E===void 0?"":E,k=s.textBreakAll;if(!l||Un(n)&&Un(w)&&!nt.isValidElement(T)&&!Fn(T))return null;if(nt.isValidElement(T))return nt.cloneElement(T,s);var U;if(Fn(T)){if(U=nt.createElement(T,s),nt.isValidElement(U))return U}else U=u_e(s);var Z=p_e(l),q=ln(s,!0);if(Z&&(h==="insideStart"||h==="insideEnd"||h==="end"))return d_e(s,U,q);var $=Z?h_e(s):f_e(s);return Vt.createElement(c0,IR({className:ci("recharts-label",z)},q,$,{breakAll:k}),U)}ec.displayName="Label";var $Y=function(e){var a=e.cx,r=e.cy,s=e.angle,l=e.startAngle,h=e.endAngle,n=e.r,w=e.radius,T=e.innerRadius,E=e.outerRadius,z=e.x,k=e.y,U=e.top,Z=e.left,q=e.width,$=e.height,J=e.clockWise,ie=e.labelViewBox;if(ie)return ie;if(mr(q)&&mr($)){if(mr(z)&&mr(k))return{x:z,y:k,width:q,height:$};if(mr(U)&&mr(Z))return{x:U,y:Z,width:q,height:$}}return mr(z)&&mr(k)?{x:z,y:k,width:0,height:0}:mr(a)&&mr(r)?{cx:a,cy:r,startAngle:l||s||0,endAngle:h||s||0,innerRadius:T||0,outerRadius:E||w||n||0,clockWise:J}:e.viewBox?e.viewBox:{}},m_e=function(e,a){return e?e===!0?Vt.createElement(ec,{key:"label-implicit",viewBox:a}):Mu(e)?Vt.createElement(ec,{key:"label-implicit",viewBox:a,value:e}):nt.isValidElement(e)?e.type===ec?nt.cloneElement(e,{key:"label-implicit",viewBox:a}):Vt.createElement(ec,{key:"label-implicit",content:e,viewBox:a}):Fn(e)?Vt.createElement(ec,{key:"label-implicit",content:e,viewBox:a}):qv(e)?Vt.createElement(ec,IR({viewBox:a},e,{key:"label-implicit"})):null:null},y_e=function(e,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var s=e.children,l=$Y(e),h=th(s,ec).map(function(w,T){return nt.cloneElement(w,{viewBox:a||l,key:"label-".concat(T)})});if(!r)return h;var n=m_e(e.label,a||l);return[n].concat(Q0e(h))};ec.parseViewBox=$Y;ec.renderCallByParent=y_e;var hO,I7;function g_e(){if(I7)return hO;I7=1;function t(e){var a=e==null?0:e.length;return a?e[a-1]:void 0}return hO=t,hO}var A_e=g_e();const __e=Ji(A_e);function LR(t){"@babel/helpers - typeof";return LR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},LR(t)}var v_e=["valueAccessor"],w_e=["data","dataKey","clockWise","id","textBreakAll"];function R_e(t){return b_e(t)||C_e(t)||S_e(t)||T_e()}function T_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S_e(t,e){if(t){if(typeof t=="string")return HD(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return HD(t,e)}}function C_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function b_e(t){if(Array.isArray(t))return HD(t)}function HD(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function Wb(){return Wb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Wb.apply(this,arguments)}function L7(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function F7(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?L7(Object(a),!0).forEach(function(r){x_e(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):L7(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function x_e(t,e,a){return e=P_e(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function P_e(t){var e=E_e(t,"string");return LR(e)=="symbol"?e:e+""}function E_e(t,e){if(LR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(LR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function U7(t,e){if(t==null)return{};var a=N_e(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function N_e(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}var V_e=function(e){return Array.isArray(e.value)?__e(e.value):e.value};function Gf(t){var e=t.valueAccessor,a=e===void 0?V_e:e,r=U7(t,v_e),s=r.data,l=r.dataKey,h=r.clockWise,n=r.id,w=r.textBreakAll,T=U7(r,w_e);return!s||!s.length?null:Vt.createElement(fi,{className:"recharts-label-list"},s.map(function(E,z){var k=Un(l)?a(E,z):No(E&&E.payload,l),U=Un(n)?{}:{id:"".concat(n,"-").concat(z)};return Vt.createElement(ec,Wb({},ln(E,!0),T,U,{parentViewBox:E.parentViewBox,value:k,textBreakAll:w,viewBox:ec.parseViewBox(Un(h)?E:F7(F7({},E),{},{clockWise:h})),key:"label-".concat(z),index:z}))}))}Gf.displayName="LabelList";function z_e(t,e){return t?t===!0?Vt.createElement(Gf,{key:"labelList-implicit",data:e}):Vt.isValidElement(t)||Fn(t)?Vt.createElement(Gf,{key:"labelList-implicit",data:e,content:t}):qv(t)?Vt.createElement(Gf,Wb({data:e},t,{key:"labelList-implicit"})):null:null}function O_e(t,e){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var r=t.children,s=th(r,Gf).map(function(h,n){return nt.cloneElement(h,{data:e,key:"labelList-".concat(n)})});if(!a)return s;var l=z_e(t.label,e);return[l].concat(R_e(s))}Gf.renderCallByParent=O_e;function FR(t){"@babel/helpers - typeof";return FR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},FR(t)}function $D(){return $D=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},$D.apply(this,arguments)}function k7(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function B7(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?k7(Object(a),!0).forEach(function(r){D_e(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):k7(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function D_e(t,e,a){return e=M_e(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function M_e(t){var e=I_e(t,"string");return FR(e)=="symbol"?e:e+""}function I_e(t,e){if(FR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(FR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var L_e=function(e,a){var r=Yd(a-e),s=Math.min(Math.abs(a-e),359.999);return r*s},pC=function(e){var a=e.cx,r=e.cy,s=e.radius,l=e.angle,h=e.sign,n=e.isExternal,w=e.cornerRadius,T=e.cornerIsExternal,E=w*(n?1:-1)+s,z=Math.asin(w/E)/Kb,k=T?l:l+h*z,U=wo(a,r,E,k),Z=wo(a,r,s,k),q=T?l-h*z:l,$=wo(a,r,E*Math.cos(z*Kb),q);return{center:U,circleTangency:Z,lineTangency:$,theta:z}},KY=function(e){var a=e.cx,r=e.cy,s=e.innerRadius,l=e.outerRadius,h=e.startAngle,n=e.endAngle,w=L_e(h,n),T=h+w,E=wo(a,r,l,h),z=wo(a,r,l,T),k="M ".concat(E.x,",").concat(E.y,`
    A `).concat(l,",").concat(l,`,0,
    `).concat(+(Math.abs(w)>180),",").concat(+(h>T),`,
    `).concat(z.x,",").concat(z.y,`
  `);if(s>0){var U=wo(a,r,s,h),Z=wo(a,r,s,T);k+="L ".concat(Z.x,",").concat(Z.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(w)>180),",").concat(+(h<=T),`,
            `).concat(U.x,",").concat(U.y," Z")}else k+="L ".concat(a,",").concat(r," Z");return k},F_e=function(e){var a=e.cx,r=e.cy,s=e.innerRadius,l=e.outerRadius,h=e.cornerRadius,n=e.forceCornerRadius,w=e.cornerIsExternal,T=e.startAngle,E=e.endAngle,z=Yd(E-T),k=pC({cx:a,cy:r,radius:l,angle:T,sign:z,cornerRadius:h,cornerIsExternal:w}),U=k.circleTangency,Z=k.lineTangency,q=k.theta,$=pC({cx:a,cy:r,radius:l,angle:E,sign:-z,cornerRadius:h,cornerIsExternal:w}),J=$.circleTangency,ie=$.lineTangency,de=$.theta,ge=w?Math.abs(T-E):Math.abs(T-E)-q-de;if(ge<0)return n?"M ".concat(Z.x,",").concat(Z.y,`
        a`).concat(h,",").concat(h,",0,0,1,").concat(h*2,`,0
        a`).concat(h,",").concat(h,",0,0,1,").concat(-h*2,`,0
      `):KY({cx:a,cy:r,innerRadius:s,outerRadius:l,startAngle:T,endAngle:E});var he="M ".concat(Z.x,",").concat(Z.y,`
    A`).concat(h,",").concat(h,",0,0,").concat(+(z<0),",").concat(U.x,",").concat(U.y,`
    A`).concat(l,",").concat(l,",0,").concat(+(ge>180),",").concat(+(z<0),",").concat(J.x,",").concat(J.y,`
    A`).concat(h,",").concat(h,",0,0,").concat(+(z<0),",").concat(ie.x,",").concat(ie.y,`
  `);if(s>0){var Ae=pC({cx:a,cy:r,radius:s,angle:T,sign:z,isExternal:!0,cornerRadius:h,cornerIsExternal:w}),me=Ae.circleTangency,Re=Ae.lineTangency,be=Ae.theta,De=pC({cx:a,cy:r,radius:s,angle:E,sign:-z,isExternal:!0,cornerRadius:h,cornerIsExternal:w}),ne=De.circleTangency,ye=De.lineTangency,Me=De.theta,ze=w?Math.abs(T-E):Math.abs(T-E)-be-Me;if(ze<0&&h===0)return"".concat(he,"L").concat(a,",").concat(r,"Z");he+="L".concat(ye.x,",").concat(ye.y,`
      A`).concat(h,",").concat(h,",0,0,").concat(+(z<0),",").concat(ne.x,",").concat(ne.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(ze>180),",").concat(+(z>0),",").concat(me.x,",").concat(me.y,`
      A`).concat(h,",").concat(h,",0,0,").concat(+(z<0),",").concat(Re.x,",").concat(Re.y,"Z")}else he+="L".concat(a,",").concat(r,"Z");return he},U_e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},WY=function(e){var a=B7(B7({},U_e),e),r=a.cx,s=a.cy,l=a.innerRadius,h=a.outerRadius,n=a.cornerRadius,w=a.forceCornerRadius,T=a.cornerIsExternal,E=a.startAngle,z=a.endAngle,k=a.className;if(h<l||E===z)return null;var U=ci("recharts-sector",k),Z=h-l,q=Xd(n,Z,0,!0),$;return q>0&&Math.abs(E-z)<360?$=F_e({cx:r,cy:s,innerRadius:l,outerRadius:h,cornerRadius:Math.min(q,Z/2),forceCornerRadius:w,cornerIsExternal:T,startAngle:E,endAngle:z}):$=KY({cx:r,cy:s,innerRadius:l,outerRadius:h,startAngle:E,endAngle:z}),Vt.createElement("path",$D({},ln(a,!0),{className:U,d:$,role:"img"}))};function UR(t){"@babel/helpers - typeof";return UR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UR(t)}function KD(){return KD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},KD.apply(this,arguments)}function G7(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function j7(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?G7(Object(a),!0).forEach(function(r){k_e(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):G7(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function k_e(t,e,a){return e=B_e(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function B_e(t){var e=G_e(t,"string");return UR(e)=="symbol"?e:e+""}function G_e(t,e){if(UR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(UR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Z7={curveBasisClosed:lhe,curveBasisOpen:uhe,curveBasis:ohe,curveBumpX:$de,curveBumpY:Kde,curveLinearClosed:che,curveLinear:Rx,curveMonotoneX:dhe,curveMonotoneY:hhe,curveNatural:fhe,curveStep:phe,curveStepAfter:yhe,curveStepBefore:mhe},mC=function(e){return e.x===+e.x&&e.y===+e.y},yw=function(e){return e.x},gw=function(e){return e.y},j_e=function(e,a){if(Fn(e))return e;var r="curve".concat(vx(e));return(r==="curveMonotone"||r==="curveBump")&&a?Z7["".concat(r).concat(a==="vertical"?"Y":"X")]:Z7[r]||Rx},Z_e=function(e){var a=e.type,r=a===void 0?"linear":a,s=e.points,l=s===void 0?[]:s,h=e.baseLine,n=e.layout,w=e.connectNulls,T=w===void 0?!1:w,E=j_e(r,n),z=T?l.filter(function(q){return mC(q)}):l,k;if(Array.isArray(h)){var U=T?h.filter(function(q){return mC(q)}):h,Z=z.map(function(q,$){return j7(j7({},q),{},{base:U[$]})});return n==="vertical"?k=sC().y(gw).x1(yw).x0(function(q){return q.base.x}):k=sC().x(yw).y1(gw).y0(function(q){return q.base.y}),k.defined(mC).curve(E),k(Z)}return n==="vertical"&&mr(h)?k=sC().y(gw).x1(yw).x0(h):mr(h)?k=sC().x(yw).y1(gw).y0(h):k=$K().x(yw).y(gw),k.defined(mC).curve(E),k(z)},Vg=function(e){var a=e.className,r=e.points,s=e.path,l=e.pathRef;if((!r||!r.length)&&!s)return null;var h=r&&r.length?Z_e(e):s;return Vt.createElement("path",KD({},ln(e,!1),Tb(e),{className:ci("recharts-curve",a),d:h,ref:l}))},fO={exports:{}},pO,q7;function q_e(){if(q7)return pO;q7=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return pO=t,pO}var mO,H7;function H_e(){if(H7)return mO;H7=1;var t=q_e();function e(){}function a(){}return a.resetWarningCache=e,mO=function(){function r(h,n,w,T,E,z){if(z!==t){var k=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw k.name="Invariant Violation",k}}r.isRequired=r;function s(){return r}var l={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:a,resetWarningCache:e};return l.PropTypes=l,l},mO}var $7;function $_e(){return $7||($7=1,fO.exports=H_e()()),fO.exports}var K_e=$_e();const zs=Ji(K_e);var W_e=Object.getOwnPropertyNames,Y_e=Object.getOwnPropertySymbols,X_e=Object.prototype.hasOwnProperty;function K7(t,e){return function(r,s,l){return t(r,s,l)&&e(r,s,l)}}function yC(t){return function(a,r,s){if(!a||!r||typeof a!="object"||typeof r!="object")return t(a,r,s);var l=s.cache,h=l.get(a),n=l.get(r);if(h&&n)return h===r&&n===a;l.set(a,r),l.set(r,a);var w=t(a,r,s);return l.delete(a),l.delete(r),w}}function W7(t){return W_e(t).concat(Y_e(t))}var J_e=Object.hasOwn||function(t,e){return X_e.call(t,e)};function R0(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var Q_e="__v",eve="__o",tve="_owner",Y7=Object.getOwnPropertyDescriptor,X7=Object.keys;function ave(t,e,a){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!a.equals(t[r],e[r],r,r,t,e,a))return!1;return!0}function rve(t,e){return R0(t.getTime(),e.getTime())}function nve(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function ive(t,e){return t===e}function J7(t,e,a){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var s=new Array(r),l=t.entries(),h,n,w=0;(h=l.next())&&!h.done;){for(var T=e.entries(),E=!1,z=0;(n=T.next())&&!n.done;){if(s[z]){z++;continue}var k=h.value,U=n.value;if(a.equals(k[0],U[0],w,z,t,e,a)&&a.equals(k[1],U[1],k[0],U[0],t,e,a)){E=s[z]=!0;break}z++}if(!E)return!1;w++}return!0}var sve=R0;function ove(t,e,a){var r=X7(t),s=r.length;if(X7(e).length!==s)return!1;for(;s-- >0;)if(!YY(t,e,a,r[s]))return!1;return!0}function Aw(t,e,a){var r=W7(t),s=r.length;if(W7(e).length!==s)return!1;for(var l,h,n;s-- >0;)if(l=r[s],!YY(t,e,a,l)||(h=Y7(t,l),n=Y7(e,l),(h||n)&&(!h||!n||h.configurable!==n.configurable||h.enumerable!==n.enumerable||h.writable!==n.writable)))return!1;return!0}function lve(t,e){return R0(t.valueOf(),e.valueOf())}function uve(t,e){return t.source===e.source&&t.flags===e.flags}function Q7(t,e,a){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var s=new Array(r),l=t.values(),h,n;(h=l.next())&&!h.done;){for(var w=e.values(),T=!1,E=0;(n=w.next())&&!n.done;){if(!s[E]&&a.equals(h.value,n.value,h.value,n.value,t,e,a)){T=s[E]=!0;break}E++}if(!T)return!1}return!0}function cve(t,e){var a=t.length;if(e.length!==a)return!1;for(;a-- >0;)if(t[a]!==e[a])return!1;return!0}function dve(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function YY(t,e,a,r){return(r===tve||r===eve||r===Q_e)&&(t.$$typeof||e.$$typeof)?!0:J_e(e,r)&&a.equals(t[r],e[r],r,r,t,e,a)}var hve="[object Arguments]",fve="[object Boolean]",pve="[object Date]",mve="[object Error]",yve="[object Map]",gve="[object Number]",Ave="[object Object]",_ve="[object RegExp]",vve="[object Set]",wve="[object String]",Rve="[object URL]",Tve=Array.isArray,ej=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,tj=Object.assign,Sve=Object.prototype.toString.call.bind(Object.prototype.toString);function Cve(t){var e=t.areArraysEqual,a=t.areDatesEqual,r=t.areErrorsEqual,s=t.areFunctionsEqual,l=t.areMapsEqual,h=t.areNumbersEqual,n=t.areObjectsEqual,w=t.arePrimitiveWrappersEqual,T=t.areRegExpsEqual,E=t.areSetsEqual,z=t.areTypedArraysEqual,k=t.areUrlsEqual;return function(Z,q,$){if(Z===q)return!0;if(Z==null||q==null)return!1;var J=typeof Z;if(J!==typeof q)return!1;if(J!=="object")return J==="number"?h(Z,q,$):J==="function"?s(Z,q,$):!1;var ie=Z.constructor;if(ie!==q.constructor)return!1;if(ie===Object)return n(Z,q,$);if(Tve(Z))return e(Z,q,$);if(ej!=null&&ej(Z))return z(Z,q,$);if(ie===Date)return a(Z,q,$);if(ie===RegExp)return T(Z,q,$);if(ie===Map)return l(Z,q,$);if(ie===Set)return E(Z,q,$);var de=Sve(Z);return de===pve?a(Z,q,$):de===_ve?T(Z,q,$):de===yve?l(Z,q,$):de===vve?E(Z,q,$):de===Ave?typeof Z.then!="function"&&typeof q.then!="function"&&n(Z,q,$):de===Rve?k(Z,q,$):de===mve?r(Z,q,$):de===hve?n(Z,q,$):de===fve||de===gve||de===wve?w(Z,q,$):!1}}function bve(t){var e=t.circular,a=t.createCustomConfig,r=t.strict,s={areArraysEqual:r?Aw:ave,areDatesEqual:rve,areErrorsEqual:nve,areFunctionsEqual:ive,areMapsEqual:r?K7(J7,Aw):J7,areNumbersEqual:sve,areObjectsEqual:r?Aw:ove,arePrimitiveWrappersEqual:lve,areRegExpsEqual:uve,areSetsEqual:r?K7(Q7,Aw):Q7,areTypedArraysEqual:r?Aw:cve,areUrlsEqual:dve};if(a&&(s=tj({},s,a(s))),e){var l=yC(s.areArraysEqual),h=yC(s.areMapsEqual),n=yC(s.areObjectsEqual),w=yC(s.areSetsEqual);s=tj({},s,{areArraysEqual:l,areMapsEqual:h,areObjectsEqual:n,areSetsEqual:w})}return s}function xve(t){return function(e,a,r,s,l,h,n){return t(e,a,n)}}function Pve(t){var e=t.circular,a=t.comparator,r=t.createState,s=t.equals,l=t.strict;if(r)return function(w,T){var E=r(),z=E.cache,k=z===void 0?e?new WeakMap:void 0:z,U=E.meta;return a(w,T,{cache:k,equals:s,meta:U,strict:l})};if(e)return function(w,T){return a(w,T,{cache:new WeakMap,equals:s,meta:void 0,strict:l})};var h={cache:void 0,equals:s,meta:void 0,strict:l};return function(w,T){return a(w,T,h)}}var Eve=Kg();Kg({strict:!0});Kg({circular:!0});Kg({circular:!0,strict:!0});Kg({createInternalComparator:function(){return R0}});Kg({strict:!0,createInternalComparator:function(){return R0}});Kg({circular:!0,createInternalComparator:function(){return R0}});Kg({circular:!0,createInternalComparator:function(){return R0},strict:!0});function Kg(t){t===void 0&&(t={});var e=t.circular,a=e===void 0?!1:e,r=t.createInternalComparator,s=t.createState,l=t.strict,h=l===void 0?!1:l,n=bve(t),w=Cve(n),T=r?r(w):xve(w);return Pve({circular:a,comparator:w,createState:s,equals:T,strict:h})}function Nve(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function aj(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=-1,r=function s(l){a<0&&(a=l),l-a>e?(t(l),a=-1):Nve(s)};requestAnimationFrame(r)}function WD(t){"@babel/helpers - typeof";return WD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WD(t)}function Vve(t){return Mve(t)||Dve(t)||Ove(t)||zve()}function zve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ove(t,e){if(t){if(typeof t=="string")return rj(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return rj(t,e)}}function rj(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function Dve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Mve(t){if(Array.isArray(t))return t}function Ive(){var t={},e=function(){return null},a=!1,r=function s(l){if(!a){if(Array.isArray(l)){if(!l.length)return;var h=l,n=Vve(h),w=n[0],T=n.slice(1);if(typeof w=="number"){aj(s.bind(null,T),w);return}s(w),aj(s.bind(null,T));return}WD(l)==="object"&&(t=l,e(t)),typeof l=="function"&&l()}};return{stop:function(){a=!0},start:function(l){a=!1,r(l)},subscribe:function(l){return e=l,function(){e=function(){return null}}}}}function kR(t){"@babel/helpers - typeof";return kR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kR(t)}function nj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function ij(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?nj(Object(a),!0).forEach(function(r){XY(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):nj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function XY(t,e,a){return e=Lve(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Lve(t){var e=Fve(t,"string");return kR(e)==="symbol"?e:String(e)}function Fve(t,e){if(kR(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(kR(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Uve=function(e,a){return[Object.keys(e),Object.keys(a)].reduce(function(r,s){return r.filter(function(l){return s.includes(l)})})},kve=function(e){return e},Bve=function(e){return e.replace(/([A-Z])/g,function(a){return"-".concat(a.toLowerCase())})},qw=function(e,a){return Object.keys(a).reduce(function(r,s){return ij(ij({},r),{},XY({},s,e(s,a[s])))},{})},sj=function(e,a,r){return e.map(function(s){return"".concat(Bve(s)," ").concat(a,"ms ").concat(r)}).join(",")};function Gve(t,e){return qve(t)||Zve(t,e)||JY(t,e)||jve()}function jve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zve(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(E){T=!0,s=E}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function qve(t){if(Array.isArray(t))return t}function Hve(t){return Wve(t)||Kve(t)||JY(t)||$ve()}function $ve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JY(t,e){if(t){if(typeof t=="string")return YD(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return YD(t,e)}}function Kve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Wve(t){if(Array.isArray(t))return YD(t)}function YD(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var Yb=1e-4,QY=function(e,a){return[0,3*e,3*a-6*e,3*e-3*a+1]},eX=function(e,a){return e.map(function(r,s){return r*Math.pow(a,s)}).reduce(function(r,s){return r+s})},oj=function(e,a){return function(r){var s=QY(e,a);return eX(s,r)}},Yve=function(e,a){return function(r){var s=QY(e,a),l=[].concat(Hve(s.map(function(h,n){return h*n}).slice(1)),[0]);return eX(l,r)}},lj=function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];var s=a[0],l=a[1],h=a[2],n=a[3];if(a.length===1)switch(a[0]){case"linear":s=0,l=0,h=1,n=1;break;case"ease":s=.25,l=.1,h=.25,n=1;break;case"ease-in":s=.42,l=0,h=1,n=1;break;case"ease-out":s=.42,l=0,h=.58,n=1;break;case"ease-in-out":s=0,l=0,h=.58,n=1;break;default:{var w=a[0].split("(");if(w[0]==="cubic-bezier"&&w[1].split(")")[0].split(",").length===4){var T=w[1].split(")")[0].split(",").map(function($){return parseFloat($)}),E=Gve(T,4);s=E[0],l=E[1],h=E[2],n=E[3]}}}var z=oj(s,h),k=oj(l,n),U=Yve(s,h),Z=function(J){return J>1?1:J<0?0:J},q=function(J){for(var ie=J>1?1:J,de=ie,ge=0;ge<8;++ge){var he=z(de)-ie,Ae=U(de);if(Math.abs(he-ie)<Yb||Ae<Yb)return k(de);de=Z(de-he/Ae)}return k(de)};return q.isStepper=!1,q},Xve=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=e.stiff,r=a===void 0?100:a,s=e.damping,l=s===void 0?8:s,h=e.dt,n=h===void 0?17:h,w=function(E,z,k){var U=-(E-z)*r,Z=k*l,q=k+(U-Z)*n/1e3,$=k*n/1e3+E;return Math.abs($-z)<Yb&&Math.abs(q)<Yb?[z,0]:[$,q]};return w.isStepper=!0,w.dt=n,w},Jve=function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];var s=a[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return lj(s);case"spring":return Xve();default:if(s.split("(")[0]==="cubic-bezier")return lj(s)}return typeof s=="function"?s:null};function BR(t){"@babel/helpers - typeof";return BR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BR(t)}function uj(t){return t1e(t)||e1e(t)||tX(t)||Qve()}function Qve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e1e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function t1e(t){if(Array.isArray(t))return JD(t)}function cj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Cc(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?cj(Object(a),!0).forEach(function(r){XD(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):cj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function XD(t,e,a){return e=a1e(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function a1e(t){var e=r1e(t,"string");return BR(e)==="symbol"?e:String(e)}function r1e(t,e){if(BR(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(BR(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function n1e(t,e){return o1e(t)||s1e(t,e)||tX(t,e)||i1e()}function i1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tX(t,e){if(t){if(typeof t=="string")return JD(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return JD(t,e)}}function JD(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function s1e(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(E){T=!0,s=E}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function o1e(t){if(Array.isArray(t))return t}var Xb=function(e,a,r){return e+(a-e)*r},QD=function(e){var a=e.from,r=e.to;return a!==r},l1e=function t(e,a,r){var s=qw(function(l,h){if(QD(h)){var n=e(h.from,h.to,h.velocity),w=n1e(n,2),T=w[0],E=w[1];return Cc(Cc({},h),{},{from:T,velocity:E})}return h},a);return r<1?qw(function(l,h){return QD(h)?Cc(Cc({},h),{},{velocity:Xb(h.velocity,s[l].velocity,r),from:Xb(h.from,s[l].from,r)}):h},a):t(e,s,r-1)};const u1e=function(t,e,a,r,s){var l=Uve(t,e),h=l.reduce(function($,J){return Cc(Cc({},$),{},XD({},J,[t[J],e[J]]))},{}),n=l.reduce(function($,J){return Cc(Cc({},$),{},XD({},J,{from:t[J],velocity:0,to:e[J]}))},{}),w=-1,T,E,z=function(){return null},k=function(){return qw(function(J,ie){return ie.from},n)},U=function(){return!Object.values(n).filter(QD).length},Z=function(J){T||(T=J);var ie=J-T,de=ie/a.dt;n=l1e(a,n,de),s(Cc(Cc(Cc({},t),e),k())),T=J,U()||(w=requestAnimationFrame(z))},q=function(J){E||(E=J);var ie=(J-E)/r,de=qw(function(he,Ae){return Xb.apply(void 0,uj(Ae).concat([a(ie)]))},h);if(s(Cc(Cc(Cc({},t),e),de)),ie<1)w=requestAnimationFrame(z);else{var ge=qw(function(he,Ae){return Xb.apply(void 0,uj(Ae).concat([a(1)]))},h);s(Cc(Cc(Cc({},t),e),ge))}};return z=a.isStepper?Z:q,function(){return requestAnimationFrame(z),function(){cancelAnimationFrame(w)}}};function pv(t){"@babel/helpers - typeof";return pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pv(t)}var c1e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function d1e(t,e){if(t==null)return{};var a=h1e(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function h1e(t,e){if(t==null)return{};var a={},r=Object.keys(t),s,l;for(l=0;l<r.length;l++)s=r[l],!(e.indexOf(s)>=0)&&(a[s]=t[s]);return a}function yO(t){return y1e(t)||m1e(t)||p1e(t)||f1e()}function f1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p1e(t,e){if(t){if(typeof t=="string")return eM(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return eM(t,e)}}function m1e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function y1e(t){if(Array.isArray(t))return eM(t)}function eM(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function dj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function vp(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?dj(Object(a),!0).forEach(function(r){Mw(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):dj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Mw(t,e,a){return e=aX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function g1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A1e(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,aX(r.key),r)}}function _1e(t,e,a){return e&&A1e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function aX(t){var e=v1e(t,"string");return pv(e)==="symbol"?e:String(e)}function v1e(t,e){if(pv(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(pv(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function w1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tM(t,e)}function tM(t,e){return tM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},tM(t,e)}function R1e(t){var e=T1e();return function(){var r=Jb(t),s;if(e){var l=Jb(this).constructor;s=Reflect.construct(r,arguments,l)}else s=r.apply(this,arguments);return aM(this,s)}}function aM(t,e){if(e&&(pv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rM(t)}function rM(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T1e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Jb(t){return Jb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Jb(t)}var Zf=function(t){w1e(a,t);var e=R1e(a);function a(r,s){var l;g1e(this,a),l=e.call(this,r,s);var h=l.props,n=h.isActive,w=h.attributeName,T=h.from,E=h.to,z=h.steps,k=h.children,U=h.duration;if(l.handleStyleChange=l.handleStyleChange.bind(rM(l)),l.changeStyle=l.changeStyle.bind(rM(l)),!n||U<=0)return l.state={style:{}},typeof k=="function"&&(l.state={style:E}),aM(l);if(z&&z.length)l.state={style:z[0].style};else if(T){if(typeof k=="function")return l.state={style:T},aM(l);l.state={style:w?Mw({},w,T):T}}else l.state={style:{}};return l}return _1e(a,[{key:"componentDidMount",value:function(){var s=this.props,l=s.isActive,h=s.canBegin;this.mounted=!0,!(!l||!h)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var l=this.props,h=l.isActive,n=l.canBegin,w=l.attributeName,T=l.shouldReAnimate,E=l.to,z=l.from,k=this.state.style;if(n){if(!h){var U={style:w?Mw({},w,E):E};this.state&&k&&(w&&k[w]!==E||!w&&k!==E)&&this.setState(U);return}if(!(Eve(s.to,E)&&s.canBegin&&s.isActive)){var Z=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var q=Z||T?z:s.to;if(this.state&&k){var $={style:w?Mw({},w,q):q};(w&&k[w]!==q||!w&&k!==q)&&this.setState($)}this.runAnimation(vp(vp({},this.props),{},{from:q,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var l=this,h=s.from,n=s.to,w=s.duration,T=s.easing,E=s.begin,z=s.onAnimationEnd,k=s.onAnimationStart,U=u1e(h,n,Jve(T),w,this.changeStyle),Z=function(){l.stopJSAnimation=U()};this.manager.start([k,E,Z,w,z])}},{key:"runStepAnimation",value:function(s){var l=this,h=s.steps,n=s.begin,w=s.onAnimationStart,T=h[0],E=T.style,z=T.duration,k=z===void 0?0:z,U=function(q,$,J){if(J===0)return q;var ie=$.duration,de=$.easing,ge=de===void 0?"ease":de,he=$.style,Ae=$.properties,me=$.onAnimationEnd,Re=J>0?h[J-1]:$,be=Ae||Object.keys(he);if(typeof ge=="function"||ge==="spring")return[].concat(yO(q),[l.runJSAnimation.bind(l,{from:Re.style,to:he,duration:ie,easing:ge}),ie]);var De=sj(be,ie,ge),ne=vp(vp(vp({},Re.style),he),{},{transition:De});return[].concat(yO(q),[ne,ie,me]).filter(kve)};return this.manager.start([w].concat(yO(h.reduce(U,[E,Math.max(k,n)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=Ive());var l=s.begin,h=s.duration,n=s.attributeName,w=s.to,T=s.easing,E=s.onAnimationStart,z=s.onAnimationEnd,k=s.steps,U=s.children,Z=this.manager;if(this.unSubscribe=Z.subscribe(this.handleStyleChange),typeof T=="function"||typeof U=="function"||T==="spring"){this.runJSAnimation(s);return}if(k.length>1){this.runStepAnimation(s);return}var q=n?Mw({},n,w):w,$=sj(Object.keys(q),h,T);Z.start([E,l,vp(vp({},q),{},{transition:$}),h,z])}},{key:"render",value:function(){var s=this.props,l=s.children;s.begin;var h=s.duration;s.attributeName,s.easing;var n=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var w=d1e(s,c1e),T=nt.Children.count(l),E=this.state.style;if(typeof l=="function")return l(E);if(!n||T===0||h<=0)return l;var z=function(U){var Z=U.props,q=Z.style,$=q===void 0?{}:q,J=Z.className,ie=nt.cloneElement(U,vp(vp({},w),{},{style:vp(vp({},$),E),className:J}));return ie};return T===1?z(nt.Children.only(l)):Vt.createElement("div",null,nt.Children.map(l,function(k){return z(k)}))}}]),a}(nt.PureComponent);Zf.displayName="Animate";Zf.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Zf.propTypes={from:zs.oneOfType([zs.object,zs.string]),to:zs.oneOfType([zs.object,zs.string]),attributeName:zs.string,duration:zs.number,begin:zs.number,easing:zs.oneOfType([zs.string,zs.func]),steps:zs.arrayOf(zs.shape({duration:zs.number.isRequired,style:zs.object.isRequired,easing:zs.oneOfType([zs.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),zs.func]),properties:zs.arrayOf("string"),onAnimationEnd:zs.func})),children:zs.oneOfType([zs.node,zs.func]),isActive:zs.bool,canBegin:zs.bool,onAnimationEnd:zs.func,shouldReAnimate:zs.bool,onAnimationStart:zs.func,onAnimationReStart:zs.func};function GR(t){"@babel/helpers - typeof";return GR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GR(t)}function Qb(){return Qb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Qb.apply(this,arguments)}function S1e(t,e){return P1e(t)||x1e(t,e)||b1e(t,e)||C1e()}function C1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b1e(t,e){if(t){if(typeof t=="string")return hj(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return hj(t,e)}}function hj(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function x1e(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(E){T=!0,s=E}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function P1e(t){if(Array.isArray(t))return t}function fj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function pj(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?fj(Object(a),!0).forEach(function(r){E1e(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):fj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function E1e(t,e,a){return e=N1e(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function N1e(t){var e=V1e(t,"string");return GR(e)=="symbol"?e:e+""}function V1e(t,e){if(GR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(GR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mj=function(e,a,r,s,l){var h=Math.min(Math.abs(r)/2,Math.abs(s)/2),n=s>=0?1:-1,w=r>=0?1:-1,T=s>=0&&r>=0||s<0&&r<0?1:0,E;if(h>0&&l instanceof Array){for(var z=[0,0,0,0],k=0,U=4;k<U;k++)z[k]=l[k]>h?h:l[k];E="M".concat(e,",").concat(a+n*z[0]),z[0]>0&&(E+="A ".concat(z[0],",").concat(z[0],",0,0,").concat(T,",").concat(e+w*z[0],",").concat(a)),E+="L ".concat(e+r-w*z[1],",").concat(a),z[1]>0&&(E+="A ".concat(z[1],",").concat(z[1],",0,0,").concat(T,`,
        `).concat(e+r,",").concat(a+n*z[1])),E+="L ".concat(e+r,",").concat(a+s-n*z[2]),z[2]>0&&(E+="A ".concat(z[2],",").concat(z[2],",0,0,").concat(T,`,
        `).concat(e+r-w*z[2],",").concat(a+s)),E+="L ".concat(e+w*z[3],",").concat(a+s),z[3]>0&&(E+="A ".concat(z[3],",").concat(z[3],",0,0,").concat(T,`,
        `).concat(e,",").concat(a+s-n*z[3])),E+="Z"}else if(h>0&&l===+l&&l>0){var Z=Math.min(h,l);E="M ".concat(e,",").concat(a+n*Z,`
            A `).concat(Z,",").concat(Z,",0,0,").concat(T,",").concat(e+w*Z,",").concat(a,`
            L `).concat(e+r-w*Z,",").concat(a,`
            A `).concat(Z,",").concat(Z,",0,0,").concat(T,",").concat(e+r,",").concat(a+n*Z,`
            L `).concat(e+r,",").concat(a+s-n*Z,`
            A `).concat(Z,",").concat(Z,",0,0,").concat(T,",").concat(e+r-w*Z,",").concat(a+s,`
            L `).concat(e+w*Z,",").concat(a+s,`
            A `).concat(Z,",").concat(Z,",0,0,").concat(T,",").concat(e,",").concat(a+s-n*Z," Z")}else E="M ".concat(e,",").concat(a," h ").concat(r," v ").concat(s," h ").concat(-r," Z");return E},z1e=function(e,a){if(!e||!a)return!1;var r=e.x,s=e.y,l=a.x,h=a.y,n=a.width,w=a.height;if(Math.abs(n)>0&&Math.abs(w)>0){var T=Math.min(l,l+n),E=Math.max(l,l+n),z=Math.min(h,h+w),k=Math.max(h,h+w);return r>=T&&r<=E&&s>=z&&s<=k}return!1},O1e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},m4=function(e){var a=pj(pj({},O1e),e),r=nt.useRef(),s=nt.useState(-1),l=S1e(s,2),h=l[0],n=l[1];nt.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var ge=r.current.getTotalLength();ge&&n(ge)}catch{}},[]);var w=a.x,T=a.y,E=a.width,z=a.height,k=a.radius,U=a.className,Z=a.animationEasing,q=a.animationDuration,$=a.animationBegin,J=a.isAnimationActive,ie=a.isUpdateAnimationActive;if(w!==+w||T!==+T||E!==+E||z!==+z||E===0||z===0)return null;var de=ci("recharts-rectangle",U);return ie?Vt.createElement(Zf,{canBegin:h>0,from:{width:E,height:z,x:w,y:T},to:{width:E,height:z,x:w,y:T},duration:q,animationEasing:Z,isActive:ie},function(ge){var he=ge.width,Ae=ge.height,me=ge.x,Re=ge.y;return Vt.createElement(Zf,{canBegin:h>0,from:"0px ".concat(h===-1?1:h,"px"),to:"".concat(h,"px 0px"),attributeName:"strokeDasharray",begin:$,duration:q,isActive:J,easing:Z},Vt.createElement("path",Qb({},ln(a,!0),{className:de,d:mj(me,Re,he,Ae,k),ref:r})))}):Vt.createElement("path",Qb({},ln(a,!0),{className:de,d:mj(w,T,E,z,k)}))},D1e=["points","className","baseLinePoints","connectNulls"];function P_(){return P_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},P_.apply(this,arguments)}function M1e(t,e){if(t==null)return{};var a=I1e(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function I1e(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function yj(t){return k1e(t)||U1e(t)||F1e(t)||L1e()}function L1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F1e(t,e){if(t){if(typeof t=="string")return nM(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return nM(t,e)}}function U1e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function k1e(t){if(Array.isArray(t))return nM(t)}function nM(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var gj=function(e){return e&&e.x===+e.x&&e.y===+e.y},B1e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=[[]];return e.forEach(function(r){gj(r)?a[a.length-1].push(r):a[a.length-1].length>0&&a.push([])}),gj(e[0])&&a[a.length-1].push(e[0]),a[a.length-1].length<=0&&(a=a.slice(0,-1)),a},Hw=function(e,a){var r=B1e(e);a&&(r=[r.reduce(function(l,h){return[].concat(yj(l),yj(h))},[])]);var s=r.map(function(l){return l.reduce(function(h,n,w){return"".concat(h).concat(w===0?"M":"L").concat(n.x,",").concat(n.y)},"")}).join("");return r.length===1?"".concat(s,"Z"):s},G1e=function(e,a,r){var s=Hw(e,r);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(Hw(a.reverse(),r).slice(1))},j1e=function(e){var a=e.points,r=e.className,s=e.baseLinePoints,l=e.connectNulls,h=M1e(e,D1e);if(!a||!a.length)return null;var n=ci("recharts-polygon",r);if(s&&s.length){var w=h.stroke&&h.stroke!=="none",T=G1e(a,s,l);return Vt.createElement("g",{className:n},Vt.createElement("path",P_({},ln(h,!0),{fill:T.slice(-1)==="Z"?h.fill:"none",stroke:"none",d:T})),w?Vt.createElement("path",P_({},ln(h,!0),{fill:"none",d:Hw(a,l)})):null,w?Vt.createElement("path",P_({},ln(h,!0),{fill:"none",d:Hw(s,l)})):null)}var E=Hw(a,l);return Vt.createElement("path",P_({},ln(h,!0),{fill:E.slice(-1)==="Z"?h.fill:"none",className:n,d:E}))};function iM(){return iM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},iM.apply(this,arguments)}var DT=function(e){var a=e.cx,r=e.cy,s=e.r,l=e.className,h=ci("recharts-dot",l);return a===+a&&r===+r&&s===+s?Vt.createElement("circle",iM({},ln(e,!1),Tb(e),{className:h,cx:a,cy:r,r:s})):null};function jR(t){"@babel/helpers - typeof";return jR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jR(t)}var Z1e=["x","y","top","left","width","height","className"];function sM(){return sM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},sM.apply(this,arguments)}function Aj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function q1e(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Aj(Object(a),!0).forEach(function(r){H1e(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Aj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function H1e(t,e,a){return e=$1e(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function $1e(t){var e=K1e(t,"string");return jR(e)=="symbol"?e:e+""}function K1e(t,e){if(jR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(jR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function W1e(t,e){if(t==null)return{};var a=Y1e(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Y1e(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}var X1e=function(e,a,r,s,l,h){return"M".concat(e,",").concat(l,"v").concat(s,"M").concat(h,",").concat(a,"h").concat(r)},J1e=function(e){var a=e.x,r=a===void 0?0:a,s=e.y,l=s===void 0?0:s,h=e.top,n=h===void 0?0:h,w=e.left,T=w===void 0?0:w,E=e.width,z=E===void 0?0:E,k=e.height,U=k===void 0?0:k,Z=e.className,q=W1e(e,Z1e),$=q1e({x:r,y:l,top:n,left:T,width:z,height:U},q);return!mr(r)||!mr(l)||!mr(z)||!mr(U)||!mr(n)||!mr(T)?null:Vt.createElement("path",sM({},ln($,!0),{className:ci("recharts-cross",Z),d:X1e(r,l,z,U,n,T)}))},gO,_j;function Q1e(){if(_j)return gO;_j=1;var t=Dx(),e=gY(),a=Dm();function r(s,l){return s&&s.length?t(s,a(l,2),e):void 0}return gO=r,gO}var ewe=Q1e();const twe=Ji(ewe);var AO,vj;function awe(){if(vj)return AO;vj=1;var t=Dx(),e=Dm(),a=AY();function r(s,l){return s&&s.length?t(s,e(l,2),a):void 0}return AO=r,AO}var rwe=awe();const nwe=Ji(rwe);var iwe=["cx","cy","angle","ticks","axisLine"],swe=["ticks","tick","angle","tickFormatter","stroke"];function mv(t){"@babel/helpers - typeof";return mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mv(t)}function $w(){return $w=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},$w.apply(this,arguments)}function wj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function MA(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?wj(Object(a),!0).forEach(function(r){Fx(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):wj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Rj(t,e){if(t==null)return{};var a=owe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function owe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function lwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tj(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nX(r.key),r)}}function uwe(t,e,a){return e&&Tj(t.prototype,e),a&&Tj(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function cwe(t,e,a){return e=e2(e),dwe(t,rX()?Reflect.construct(e,a||[],e2(t).constructor):e.apply(t,a))}function dwe(t,e){if(e&&(mv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hwe(t)}function hwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rX=function(){return!!t})()}function e2(t){return e2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},e2(t)}function fwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oM(t,e)}function oM(t,e){return oM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},oM(t,e)}function Fx(t,e,a){return e=nX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function nX(t){var e=pwe(t,"string");return mv(e)=="symbol"?e:e+""}function pwe(t,e){if(mv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(mv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ux=function(t){function e(){return lwe(this,e),cwe(this,e,arguments)}return fwe(e,t),uwe(e,[{key:"getTickValueCoord",value:function(r){var s=r.coordinate,l=this.props,h=l.angle,n=l.cx,w=l.cy;return wo(n,w,s,h)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,s;switch(r){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var r=this.props,s=r.cx,l=r.cy,h=r.angle,n=r.ticks,w=twe(n,function(E){return E.coordinate||0}),T=nwe(n,function(E){return E.coordinate||0});return{cx:s,cy:l,startAngle:h,endAngle:h,innerRadius:T.coordinate||0,outerRadius:w.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.cx,l=r.cy,h=r.angle,n=r.ticks,w=r.axisLine,T=Rj(r,iwe),E=n.reduce(function(Z,q){return[Math.min(Z[0],q.coordinate),Math.max(Z[1],q.coordinate)]},[1/0,-1/0]),z=wo(s,l,E[0],h),k=wo(s,l,E[1],h),U=MA(MA(MA({},ln(T,!1)),{},{fill:"none"},ln(w,!1)),{},{x1:z.x,y1:z.y,x2:k.x,y2:k.y});return Vt.createElement("line",$w({className:"recharts-polar-radius-axis-line"},U))}},{key:"renderTicks",value:function(){var r=this,s=this.props,l=s.ticks,h=s.tick,n=s.angle,w=s.tickFormatter,T=s.stroke,E=Rj(s,swe),z=this.getTickTextAnchor(),k=ln(E,!1),U=ln(h,!1),Z=l.map(function(q,$){var J=r.getTickValueCoord(q),ie=MA(MA(MA(MA({textAnchor:z,transform:"rotate(".concat(90-n,", ").concat(J.x,", ").concat(J.y,")")},k),{},{stroke:"none",fill:T},U),{},{index:$},J),{},{payload:q});return Vt.createElement(fi,$w({className:ci("recharts-polar-radius-axis-tick",HY(h)),key:"tick-".concat(q.coordinate)},Dg(r.props,q,$)),e.renderTickItem(h,ie,w?w(q.value,$):q.value))});return Vt.createElement(fi,{className:"recharts-polar-radius-axis-ticks"},Z)}},{key:"render",value:function(){var r=this.props,s=r.ticks,l=r.axisLine,h=r.tick;return!s||!s.length?null:Vt.createElement(fi,{className:ci("recharts-polar-radius-axis",this.props.className)},l&&this.renderAxisLine(),h&&this.renderTicks(),ec.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,s,l){var h;return Vt.isValidElement(r)?h=Vt.cloneElement(r,s):Fn(r)?h=r(s):h=Vt.createElement(c0,$w({},s,{className:"recharts-polar-radius-axis-tick-value"}),l),h}}])}(nt.PureComponent);Fx(Ux,"displayName","PolarRadiusAxis");Fx(Ux,"axisType","radiusAxis");Fx(Ux,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function yv(t){"@babel/helpers - typeof";return yv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yv(t)}function BA(){return BA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},BA.apply(this,arguments)}function Sj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function IA(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Sj(Object(a),!0).forEach(function(r){kx(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Sj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function mwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cj(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sX(r.key),r)}}function ywe(t,e,a){return e&&Cj(t.prototype,e),a&&Cj(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function gwe(t,e,a){return e=t2(e),Awe(t,iX()?Reflect.construct(e,a||[],t2(t).constructor):e.apply(t,a))}function Awe(t,e){if(e&&(yv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _we(t)}function _we(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iX=function(){return!!t})()}function t2(t){return t2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},t2(t)}function vwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lM(t,e)}function lM(t,e){return lM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},lM(t,e)}function kx(t,e,a){return e=sX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function sX(t){var e=wwe(t,"string");return yv(e)=="symbol"?e:e+""}function wwe(t,e){if(yv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(yv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Rwe=Math.PI/180,Twe=1e-5,Bx=function(t){function e(){return mwe(this,e),gwe(this,e,arguments)}return vwe(e,t),ywe(e,[{key:"getTickLineCoord",value:function(r){var s=this.props,l=s.cx,h=s.cy,n=s.radius,w=s.orientation,T=s.tickSize,E=T||8,z=wo(l,h,n,r.coordinate),k=wo(l,h,n+(w==="inner"?-1:1)*E,r.coordinate);return{x1:z.x,y1:z.y,x2:k.x,y2:k.y}}},{key:"getTickTextAnchor",value:function(r){var s=this.props.orientation,l=Math.cos(-r.coordinate*Rwe),h;return l>Twe?h=s==="outer"?"start":"end":l<-1e-5?h=s==="outer"?"end":"start":h="middle",h}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.cx,l=r.cy,h=r.radius,n=r.axisLine,w=r.axisLineType,T=IA(IA({},ln(this.props,!1)),{},{fill:"none"},ln(n,!1));if(w==="circle")return Vt.createElement(DT,BA({className:"recharts-polar-angle-axis-line"},T,{cx:s,cy:l,r:h}));var E=this.props.ticks,z=E.map(function(k){return wo(s,l,h,k.coordinate)});return Vt.createElement(j1e,BA({className:"recharts-polar-angle-axis-line"},T,{points:z}))}},{key:"renderTicks",value:function(){var r=this,s=this.props,l=s.ticks,h=s.tick,n=s.tickLine,w=s.tickFormatter,T=s.stroke,E=ln(this.props,!1),z=ln(h,!1),k=IA(IA({},E),{},{fill:"none"},ln(n,!1)),U=l.map(function(Z,q){var $=r.getTickLineCoord(Z),J=r.getTickTextAnchor(Z),ie=IA(IA(IA({textAnchor:J},E),{},{stroke:"none",fill:T},z),{},{index:q,payload:Z,x:$.x2,y:$.y2});return Vt.createElement(fi,BA({className:ci("recharts-polar-angle-axis-tick",HY(h)),key:"tick-".concat(Z.coordinate)},Dg(r.props,Z,q)),n&&Vt.createElement("line",BA({className:"recharts-polar-angle-axis-tick-line"},k,$)),h&&e.renderTickItem(h,ie,w?w(Z.value,q):Z.value))});return Vt.createElement(fi,{className:"recharts-polar-angle-axis-ticks"},U)}},{key:"render",value:function(){var r=this.props,s=r.ticks,l=r.radius,h=r.axisLine;return l<=0||!s||!s.length?null:Vt.createElement(fi,{className:ci("recharts-polar-angle-axis",this.props.className)},h&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,s,l){var h;return Vt.isValidElement(r)?h=Vt.cloneElement(r,s):Fn(r)?h=r(s):h=Vt.createElement(c0,BA({},s,{className:"recharts-polar-angle-axis-tick-value"}),l),h}}])}(nt.PureComponent);kx(Bx,"displayName","PolarAngleAxis");kx(Bx,"axisType","angleAxis");kx(Bx,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var _O,bj;function Swe(){if(bj)return _O;bj=1;var t=yW(),e=t(Object.getPrototypeOf,Object);return _O=e,_O}var vO,xj;function Cwe(){if(xj)return vO;xj=1;var t=by(),e=Swe(),a=xy(),r="[object Object]",s=Function.prototype,l=Object.prototype,h=s.toString,n=l.hasOwnProperty,w=h.call(Object);function T(E){if(!a(E)||t(E)!=r)return!1;var z=e(E);if(z===null)return!0;var k=n.call(z,"constructor")&&z.constructor;return typeof k=="function"&&k instanceof k&&h.call(k)==w}return vO=T,vO}var bwe=Cwe();const xwe=Ji(bwe);var wO,Pj;function Pwe(){if(Pj)return wO;Pj=1;var t=by(),e=xy(),a="[object Boolean]";function r(s){return s===!0||s===!1||e(s)&&t(s)==a}return wO=r,wO}var Ewe=Pwe();const Nwe=Ji(Ewe);function ZR(t){"@babel/helpers - typeof";return ZR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ZR(t)}function a2(){return a2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},a2.apply(this,arguments)}function Vwe(t,e){return Mwe(t)||Dwe(t,e)||Owe(t,e)||zwe()}function zwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Owe(t,e){if(t){if(typeof t=="string")return Ej(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ej(t,e)}}function Ej(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function Dwe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(E){T=!0,s=E}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function Mwe(t){if(Array.isArray(t))return t}function Nj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Vj(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Nj(Object(a),!0).forEach(function(r){Iwe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Nj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Iwe(t,e,a){return e=Lwe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Lwe(t){var e=Fwe(t,"string");return ZR(e)=="symbol"?e:e+""}function Fwe(t,e){if(ZR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(ZR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zj=function(e,a,r,s,l){var h=r-s,n;return n="M ".concat(e,",").concat(a),n+="L ".concat(e+r,",").concat(a),n+="L ".concat(e+r-h/2,",").concat(a+l),n+="L ".concat(e+r-h/2-s,",").concat(a+l),n+="L ".concat(e,",").concat(a," Z"),n},Uwe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},kwe=function(e){var a=Vj(Vj({},Uwe),e),r=nt.useRef(),s=nt.useState(-1),l=Vwe(s,2),h=l[0],n=l[1];nt.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var de=r.current.getTotalLength();de&&n(de)}catch{}},[]);var w=a.x,T=a.y,E=a.upperWidth,z=a.lowerWidth,k=a.height,U=a.className,Z=a.animationEasing,q=a.animationDuration,$=a.animationBegin,J=a.isUpdateAnimationActive;if(w!==+w||T!==+T||E!==+E||z!==+z||k!==+k||E===0&&z===0||k===0)return null;var ie=ci("recharts-trapezoid",U);return J?Vt.createElement(Zf,{canBegin:h>0,from:{upperWidth:0,lowerWidth:0,height:k,x:w,y:T},to:{upperWidth:E,lowerWidth:z,height:k,x:w,y:T},duration:q,animationEasing:Z,isActive:J},function(de){var ge=de.upperWidth,he=de.lowerWidth,Ae=de.height,me=de.x,Re=de.y;return Vt.createElement(Zf,{canBegin:h>0,from:"0px ".concat(h===-1?1:h,"px"),to:"".concat(h,"px 0px"),attributeName:"strokeDasharray",begin:$,duration:q,easing:Z},Vt.createElement("path",a2({},ln(a,!0),{className:ie,d:zj(me,Re,ge,he,Ae),ref:r})))}):Vt.createElement("g",null,Vt.createElement("path",a2({},ln(a,!0),{className:ie,d:zj(w,T,E,z,k)})))},Bwe=["option","shapeType","propTransformer","activeClassName","isActive"];function qR(t){"@babel/helpers - typeof";return qR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qR(t)}function Gwe(t,e){if(t==null)return{};var a=jwe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function jwe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function Oj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function r2(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Oj(Object(a),!0).forEach(function(r){Zwe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Oj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Zwe(t,e,a){return e=qwe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function qwe(t){var e=Hwe(t,"string");return qR(e)=="symbol"?e:e+""}function Hwe(t,e){if(qR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(qR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $we(t,e){return r2(r2({},e),t)}function Kwe(t,e){return t==="symbols"}function Dj(t){var e=t.shapeType,a=t.elementProps;switch(e){case"rectangle":return Vt.createElement(m4,a);case"trapezoid":return Vt.createElement(kwe,a);case"sector":return Vt.createElement(WY,a);case"symbols":if(Kwe(e))return Vt.createElement(Sx,a);break;default:return null}}function Wwe(t){return nt.isValidElement(t)?t.props:t}function n2(t){var e=t.option,a=t.shapeType,r=t.propTransformer,s=r===void 0?$we:r,l=t.activeClassName,h=l===void 0?"recharts-active-shape":l,n=t.isActive,w=Gwe(t,Bwe),T;if(nt.isValidElement(e))T=nt.cloneElement(e,r2(r2({},w),Wwe(e)));else if(Fn(e))T=e(w);else if(xwe(e)&&!Nwe(e)){var E=s(e,w);T=Vt.createElement(Dj,{shapeType:a,elementProps:E})}else{var z=w;T=Vt.createElement(Dj,{shapeType:a,elementProps:z})}return n?Vt.createElement(fi,{className:h},T):T}function Gx(t,e){return e!=null&&"trapezoids"in t.props}function jx(t,e){return e!=null&&"sectors"in t.props}function HR(t,e){return e!=null&&"points"in t.props}function Ywe(t,e){var a,r,s=t.x===(e==null||(a=e.labelViewBox)===null||a===void 0?void 0:a.x)||t.x===e.x,l=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return s&&l}function Xwe(t,e){var a=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return a&&r}function Jwe(t,e){var a=t.x===e.x,r=t.y===e.y,s=t.z===e.z;return a&&r&&s}function Qwe(t,e){var a;return Gx(t,e)?a=Ywe:jx(t,e)?a=Xwe:HR(t,e)&&(a=Jwe),a}function eRe(t,e){var a;return Gx(t,e)?a="trapezoids":jx(t,e)?a="sectors":HR(t,e)&&(a="points"),a}function tRe(t,e){if(Gx(t,e)){var a;return(a=e.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}if(jx(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return HR(t,e)?e.payload:{}}function aRe(t){var e=t.activeTooltipItem,a=t.graphicalItem,r=t.itemData,s=eRe(a,e),l=tRe(a,e),h=r.filter(function(w,T){var E=Mg(l,w),z=a.props[s].filter(function(Z){var q=Qwe(a,e);return q(Z,e)}),k=a.props[s].indexOf(z[z.length-1]),U=T===k;return E&&U}),n=r.indexOf(h[h.length-1]);return n}var FC;function gv(t){"@babel/helpers - typeof";return gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gv(t)}function E_(){return E_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},E_.apply(this,arguments)}function Mj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function _o(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Mj(Object(a),!0).forEach(function(r){Uf(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Mj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function rRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ij(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lX(r.key),r)}}function nRe(t,e,a){return e&&Ij(t.prototype,e),a&&Ij(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function iRe(t,e,a){return e=i2(e),sRe(t,oX()?Reflect.construct(e,a||[],i2(t).constructor):e.apply(t,a))}function sRe(t,e){if(e&&(gv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oRe(t)}function oRe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oX=function(){return!!t})()}function i2(t){return i2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},i2(t)}function lRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uM(t,e)}function uM(t,e){return uM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},uM(t,e)}function Uf(t,e,a){return e=lX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function lX(t){var e=uRe(t,"string");return gv(e)=="symbol"?e:e+""}function uRe(t,e){if(gv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(gv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ny=function(t){function e(a){var r;return rRe(this,e),r=iRe(this,e,[a]),Uf(r,"pieRef",null),Uf(r,"sectorRefs",[]),Uf(r,"id",qg("recharts-pie-")),Uf(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Fn(s)&&s()}),Uf(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Fn(s)&&s()}),r.state={isAnimationFinished:!a.isAnimationActive,prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,sectorToFocus:0},r}return lRe(e,t),nRe(e,[{key:"isActiveIndex",value:function(r){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(r)!==-1:r===s}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var l=this.props,h=l.label,n=l.labelLine,w=l.dataKey,T=l.valueKey,E=ln(this.props,!1),z=ln(h,!1),k=ln(n,!1),U=h&&h.offsetRadius||20,Z=r.map(function(q,$){var J=(q.startAngle+q.endAngle)/2,ie=wo(q.cx,q.cy,q.outerRadius+U,J),de=_o(_o(_o(_o({},E),q),{},{stroke:"none"},z),{},{index:$,textAnchor:e.getTextAnchor(ie.x,q.cx)},ie),ge=_o(_o(_o(_o({},E),q),{},{fill:"none",stroke:q.fill},k),{},{index:$,points:[wo(q.cx,q.cy,q.outerRadius,J),ie]}),he=w;return Un(w)&&Un(T)?he="value":Un(w)&&(he=T),Vt.createElement(fi,{key:"label-".concat(q.startAngle,"-").concat(q.endAngle,"-").concat(q.midAngle,"-").concat($)},n&&e.renderLabelLineItem(n,ge,"line"),e.renderLabelItem(h,de,No(q,he)))});return Vt.createElement(fi,{className:"recharts-pie-labels"},Z)}},{key:"renderSectorsStatically",value:function(r){var s=this,l=this.props,h=l.activeShape,n=l.blendStroke,w=l.inactiveShape;return r.map(function(T,E){if((T==null?void 0:T.startAngle)===0&&(T==null?void 0:T.endAngle)===0&&r.length!==1)return null;var z=s.isActiveIndex(E),k=w&&s.hasActiveIndex()?w:null,U=z?h:k,Z=_o(_o({},T),{},{stroke:n?T.fill:T.stroke,tabIndex:-1});return Vt.createElement(fi,E_({ref:function($){$&&!s.sectorRefs.includes($)&&s.sectorRefs.push($)},tabIndex:-1,className:"recharts-pie-sector"},Dg(s.props,T,E),{key:"sector-".concat(T==null?void 0:T.startAngle,"-").concat(T==null?void 0:T.endAngle,"-").concat(T.midAngle,"-").concat(E)}),Vt.createElement(n2,E_({option:U,isActive:z,shapeType:"sector"},Z)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,s=this.props,l=s.sectors,h=s.isAnimationActive,n=s.animationBegin,w=s.animationDuration,T=s.animationEasing,E=s.animationId,z=this.state,k=z.prevSectors,U=z.prevIsAnimationActive;return Vt.createElement(Zf,{begin:n,duration:w,isActive:h,easing:T,from:{t:0},to:{t:1},key:"pie-".concat(E,"-").concat(U),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(Z){var q=Z.t,$=[],J=l&&l[0],ie=J.startAngle;return l.forEach(function(de,ge){var he=k&&k[ge],Ae=ge>0?lf(de,"paddingAngle",0):0;if(he){var me=cl(he.endAngle-he.startAngle,de.endAngle-de.startAngle),Re=_o(_o({},de),{},{startAngle:ie+Ae,endAngle:ie+me(q)+Ae});$.push(Re),ie=Re.endAngle}else{var be=de.endAngle,De=de.startAngle,ne=cl(0,be-De),ye=ne(q),Me=_o(_o({},de),{},{startAngle:ie+Ae,endAngle:ie+ye+Ae});$.push(Me),ie=Me.endAngle}}),Vt.createElement(fi,null,r.renderSectorsStatically($))})}},{key:"attachKeyboardHandlers",value:function(r){var s=this;r.onkeydown=function(l){if(!l.altKey)switch(l.key){case"ArrowLeft":{var h=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[h].focus(),s.setState({sectorToFocus:h});break}case"ArrowRight":{var n=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[n].focus(),s.setState({sectorToFocus:n});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,s=r.sectors,l=r.isAnimationActive,h=this.state.prevSectors;return l&&s&&s.length&&(!h||!Mg(h,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,s=this.props,l=s.hide,h=s.sectors,n=s.className,w=s.label,T=s.cx,E=s.cy,z=s.innerRadius,k=s.outerRadius,U=s.isAnimationActive,Z=this.state.isAnimationFinished;if(l||!h||!h.length||!mr(T)||!mr(E)||!mr(z)||!mr(k))return null;var q=ci("recharts-pie",n);return Vt.createElement(fi,{tabIndex:this.props.rootTabIndex,className:q,ref:function(J){r.pieRef=J}},this.renderSectors(),w&&this.renderLabels(h),ec.renderCallByParent(this.props,null,!1),(!U||Z)&&Gf.renderCallByParent(this.props,h,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return s.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:r.sectors!==s.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,s){return r>s?"start":r<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,s,l){if(Vt.isValidElement(r))return Vt.cloneElement(r,s);if(Fn(r))return r(s);var h=ci("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return Vt.createElement(Vg,E_({},s,{key:l,type:"linear",className:h}))}},{key:"renderLabelItem",value:function(r,s,l){if(Vt.isValidElement(r))return Vt.cloneElement(r,s);var h=l;if(Fn(r)&&(h=r(s),Vt.isValidElement(h)))return h;var n=ci("recharts-pie-label-text",typeof r!="boolean"&&!Fn(r)?r.className:"");return Vt.createElement(c0,E_({},s,{alignmentBaseline:"middle",className:n}),h)}}])}(nt.PureComponent);FC=Ny;Uf(Ny,"displayName","Pie");Uf(Ny,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Py.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Uf(Ny,"parseDeltaAngle",function(t,e){var a=Yd(e-t),r=Math.min(Math.abs(e-t),360);return a*r});Uf(Ny,"getRealPieData",function(t){var e=t.data,a=t.children,r=ln(t,!1),s=th(a,lv);return e&&e.length?e.map(function(l,h){return _o(_o(_o({payload:l},r),l),s&&s[h]&&s[h].props)}):s&&s.length?s.map(function(l){return _o(_o({},r),l.props)}):[]});Uf(Ny,"parseCoordinateOfPie",function(t,e){var a=e.top,r=e.left,s=e.width,l=e.height,h=qY(s,l),n=r+Xd(t.cx,s,s/2),w=a+Xd(t.cy,l,l/2),T=Xd(t.innerRadius,h,0),E=Xd(t.outerRadius,h,h*.8),z=t.maxRadius||Math.sqrt(s*s+l*l)/2;return{cx:n,cy:w,innerRadius:T,outerRadius:E,maxRadius:z}});Uf(Ny,"getComposedData",function(t){var e=t.item,a=t.offset,r=e.type.defaultProps!==void 0?_o(_o({},e.type.defaultProps),e.props):e.props,s=FC.getRealPieData(r);if(!s||!s.length)return null;var l=r.cornerRadius,h=r.startAngle,n=r.endAngle,w=r.paddingAngle,T=r.dataKey,E=r.nameKey,z=r.valueKey,k=r.tooltipType,U=Math.abs(r.minAngle),Z=FC.parseCoordinateOfPie(r,a),q=FC.parseDeltaAngle(h,n),$=Math.abs(q),J=T;Un(T)&&Un(z)?(Vp(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),J="value"):Un(T)&&(Vp(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),J=z);var ie=s.filter(function(Re){return No(Re,J,0)!==0}).length,de=($>=360?ie:ie-1)*w,ge=$-ie*U-de,he=s.reduce(function(Re,be){var De=No(be,J,0);return Re+(mr(De)?De:0)},0),Ae;if(he>0){var me;Ae=s.map(function(Re,be){var De=No(Re,J,0),ne=No(Re,E,be),ye=(mr(De)?De:0)/he,Me;be?Me=me.endAngle+Yd(q)*w*(De!==0?1:0):Me=h;var ze=Me+Yd(q)*((De!==0?U:0)+ye*ge),Le=(Me+ze)/2,Ie=(Z.innerRadius+Z.outerRadius)/2,qe=[{name:ne,value:De,payload:Re,dataKey:J,type:k}],ke=wo(Z.cx,Z.cy,Ie,Le);return me=_o(_o(_o({percent:ye,cornerRadius:l,name:ne,tooltipPayload:qe,midAngle:Le,middleRadius:Ie,tooltipPosition:ke},Re),Z),{},{value:No(Re,J),startAngle:Me,endAngle:ze,payload:Re,paddingAngle:Yd(q)*w}),me})}return _o(_o({},Z),{},{sectors:Ae,data:s})});var RO,Lj;function cRe(){if(Lj)return RO;Lj=1;var t=Math.ceil,e=Math.max;function a(r,s,l,h){for(var n=-1,w=e(t((s-r)/(l||1)),0),T=Array(w);w--;)T[h?w:++n]=r,r+=l;return T}return RO=a,RO}var TO,Fj;function uX(){if(Fj)return TO;Fj=1;var t=zW(),e=1/0,a=17976931348623157e292;function r(s){if(!s)return s===0?s:0;if(s=t(s),s===e||s===-1/0){var l=s<0?-1:1;return l*a}return s===s?s:0}return TO=r,TO}var SO,Uj;function dRe(){if(Uj)return SO;Uj=1;var t=cRe(),e=xx(),a=uX();function r(s){return function(l,h,n){return n&&typeof n!="number"&&e(l,h,n)&&(h=n=void 0),l=a(l),h===void 0?(h=l,l=0):h=a(h),n=n===void 0?l<h?1:-1:a(n),t(l,h,n,s)}}return SO=r,SO}var CO,kj;function hRe(){if(kj)return CO;kj=1;var t=dRe(),e=t();return CO=e,CO}var fRe=hRe();const s2=Ji(fRe);function $R(t){"@babel/helpers - typeof";return $R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$R(t)}function Bj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Gj(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Bj(Object(a),!0).forEach(function(r){cX(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Bj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function cX(t,e,a){return e=pRe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function pRe(t){var e=mRe(t,"string");return $R(e)=="symbol"?e:e+""}function mRe(t,e){if($R(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if($R(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yRe=["Webkit","Moz","O","ms"],gRe=function(e,a){var r=e.replace(/(\w)/,function(l){return l.toUpperCase()}),s=yRe.reduce(function(l,h){return Gj(Gj({},l),{},cX({},h+r,a))},{});return s[e]=a,s};function Av(t){"@babel/helpers - typeof";return Av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Av(t)}function o2(){return o2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},o2.apply(this,arguments)}function jj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function bO(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?jj(Object(a),!0).forEach(function(r){Qh(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):jj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function ARe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zj(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hX(r.key),r)}}function _Re(t,e,a){return e&&Zj(t.prototype,e),a&&Zj(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function vRe(t,e,a){return e=l2(e),wRe(t,dX()?Reflect.construct(e,a||[],l2(t).constructor):e.apply(t,a))}function wRe(t,e){if(e&&(Av(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RRe(t)}function RRe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dX=function(){return!!t})()}function l2(t){return l2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},l2(t)}function TRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cM(t,e)}function cM(t,e){return cM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},cM(t,e)}function Qh(t,e,a){return e=hX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function hX(t){var e=SRe(t,"string");return Av(e)=="symbol"?e:e+""}function SRe(t,e){if(Av(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Av(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var CRe=function(e){var a=e.data,r=e.startIndex,s=e.endIndex,l=e.x,h=e.width,n=e.travellerWidth;if(!a||!a.length)return{};var w=a.length,T=jw().domain(s2(0,w)).range([l,l+h-n]),E=T.domain().map(function(z){return T(z)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:T(r),endX:T(s),scale:T,scaleValues:E}},qj=function(e){return e.changedTouches&&!!e.changedTouches.length},_v=function(t){function e(a){var r;return ARe(this,e),r=vRe(this,e,[a]),Qh(r,"handleDrag",function(s){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(s):r.state.isSlideMoving&&r.handleSlideDrag(s)}),Qh(r,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&r.handleDrag(s.changedTouches[0])}),Qh(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=r.props,l=s.endIndex,h=s.onDragEnd,n=s.startIndex;h==null||h({endIndex:l,startIndex:n})}),r.detachDragEndListener()}),Qh(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Qh(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Qh(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Qh(r,"handleSlideDragStart",function(s){var l=qj(s)?s.changedTouches[0]:s;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:l.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return TRe(e,t),_Re(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var s=r.startX,l=r.endX,h=this.state.scaleValues,n=this.props,w=n.gap,T=n.data,E=T.length-1,z=Math.min(s,l),k=Math.max(s,l),U=e.getIndexInRange(h,z),Z=e.getIndexInRange(h,k);return{startIndex:U-U%w,endIndex:Z===E?E:Z-Z%w}}},{key:"getTextOfTick",value:function(r){var s=this.props,l=s.data,h=s.tickFormatter,n=s.dataKey,w=No(l[r],n,r);return Fn(h)?h(w,r):w}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var s=this.state,l=s.slideMoveStartX,h=s.startX,n=s.endX,w=this.props,T=w.x,E=w.width,z=w.travellerWidth,k=w.startIndex,U=w.endIndex,Z=w.onChange,q=r.pageX-l;q>0?q=Math.min(q,T+E-z-n,T+E-z-h):q<0&&(q=Math.max(q,T-h,T-n));var $=this.getIndex({startX:h+q,endX:n+q});($.startIndex!==k||$.endIndex!==U)&&Z&&Z($),this.setState({startX:h+q,endX:n+q,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,s){var l=qj(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:l.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var s=this.state,l=s.brushMoveStartX,h=s.movingTravellerId,n=s.endX,w=s.startX,T=this.state[h],E=this.props,z=E.x,k=E.width,U=E.travellerWidth,Z=E.onChange,q=E.gap,$=E.data,J={startX:this.state.startX,endX:this.state.endX},ie=r.pageX-l;ie>0?ie=Math.min(ie,z+k-U-T):ie<0&&(ie=Math.max(ie,z-T)),J[h]=T+ie;var de=this.getIndex(J),ge=de.startIndex,he=de.endIndex,Ae=function(){var Re=$.length-1;return h==="startX"&&(n>w?ge%q===0:he%q===0)||n<w&&he===Re||h==="endX"&&(n>w?he%q===0:ge%q===0)||n>w&&he===Re};this.setState(Qh(Qh({},h,T+ie),"brushMoveStartX",r.pageX),function(){Z&&Ae()&&Z(de)})}},{key:"handleTravellerMoveKeyboard",value:function(r,s){var l=this,h=this.state,n=h.scaleValues,w=h.startX,T=h.endX,E=this.state[s],z=n.indexOf(E);if(z!==-1){var k=z+r;if(!(k===-1||k>=n.length)){var U=n[k];s==="startX"&&U>=T||s==="endX"&&U<=w||this.setState(Qh({},s,U),function(){l.props.onChange(l.getIndex({startX:l.state.startX,endX:l.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,s=r.x,l=r.y,h=r.width,n=r.height,w=r.fill,T=r.stroke;return Vt.createElement("rect",{stroke:T,fill:w,x:s,y:l,width:h,height:n})}},{key:"renderPanorama",value:function(){var r=this.props,s=r.x,l=r.y,h=r.width,n=r.height,w=r.data,T=r.children,E=r.padding,z=nt.Children.only(T);return z?Vt.cloneElement(z,{x:s,y:l,width:h,height:n,margin:E,compact:!0,data:w}):null}},{key:"renderTravellerLayer",value:function(r,s){var l,h,n=this,w=this.props,T=w.y,E=w.travellerWidth,z=w.height,k=w.traveller,U=w.ariaLabel,Z=w.data,q=w.startIndex,$=w.endIndex,J=Math.max(r,this.props.x),ie=bO(bO({},ln(this.props,!1)),{},{x:J,y:T,width:E,height:z}),de=U||"Min value: ".concat((l=Z[q])===null||l===void 0?void 0:l.name,", Max value: ").concat((h=Z[$])===null||h===void 0?void 0:h.name);return Vt.createElement(fi,{tabIndex:0,role:"slider","aria-label":de,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(he){["ArrowLeft","ArrowRight"].includes(he.key)&&(he.preventDefault(),he.stopPropagation(),n.handleTravellerMoveKeyboard(he.key==="ArrowRight"?1:-1,s))},onFocus:function(){n.setState({isTravellerFocused:!0})},onBlur:function(){n.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(k,ie))}},{key:"renderSlide",value:function(r,s){var l=this.props,h=l.y,n=l.height,w=l.stroke,T=l.travellerWidth,E=Math.min(r,s)+T,z=Math.max(Math.abs(s-r)-T,0);return Vt.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:w,fillOpacity:.2,x:E,y:h,width:z,height:n})}},{key:"renderText",value:function(){var r=this.props,s=r.startIndex,l=r.endIndex,h=r.y,n=r.height,w=r.travellerWidth,T=r.stroke,E=this.state,z=E.startX,k=E.endX,U=5,Z={pointerEvents:"none",fill:T};return Vt.createElement(fi,{className:"recharts-brush-texts"},Vt.createElement(c0,o2({textAnchor:"end",verticalAnchor:"middle",x:Math.min(z,k)-U,y:h+n/2},Z),this.getTextOfTick(s)),Vt.createElement(c0,o2({textAnchor:"start",verticalAnchor:"middle",x:Math.max(z,k)+w+U,y:h+n/2},Z),this.getTextOfTick(l)))}},{key:"render",value:function(){var r=this.props,s=r.data,l=r.className,h=r.children,n=r.x,w=r.y,T=r.width,E=r.height,z=r.alwaysShowText,k=this.state,U=k.startX,Z=k.endX,q=k.isTextActive,$=k.isSlideMoving,J=k.isTravellerMoving,ie=k.isTravellerFocused;if(!s||!s.length||!mr(n)||!mr(w)||!mr(T)||!mr(E)||T<=0||E<=0)return null;var de=ci("recharts-brush",l),ge=Vt.Children.count(h)===1,he=gRe("userSelect","none");return Vt.createElement(fi,{className:de,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:he},this.renderBackground(),ge&&this.renderPanorama(),this.renderSlide(U,Z),this.renderTravellerLayer(U,"startX"),this.renderTravellerLayer(Z,"endX"),(q||$||J||ie||z)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var s=r.x,l=r.y,h=r.width,n=r.height,w=r.stroke,T=Math.floor(l+n/2)-1;return Vt.createElement(Vt.Fragment,null,Vt.createElement("rect",{x:s,y:l,width:h,height:n,fill:w,stroke:"none"}),Vt.createElement("line",{x1:s+1,y1:T,x2:s+h-1,y2:T,fill:"none",stroke:"#fff"}),Vt.createElement("line",{x1:s+1,y1:T+2,x2:s+h-1,y2:T+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,s){var l;return Vt.isValidElement(r)?l=Vt.cloneElement(r,s):Fn(r)?l=r(s):l=e.renderDefaultTraveller(s),l}},{key:"getDerivedStateFromProps",value:function(r,s){var l=r.data,h=r.width,n=r.x,w=r.travellerWidth,T=r.updateId,E=r.startIndex,z=r.endIndex;if(l!==s.prevData||T!==s.prevUpdateId)return bO({prevData:l,prevTravellerWidth:w,prevUpdateId:T,prevX:n,prevWidth:h},l&&l.length?CRe({data:l,width:h,x:n,travellerWidth:w,startIndex:E,endIndex:z}):{scale:null,scaleValues:null});if(s.scale&&(h!==s.prevWidth||n!==s.prevX||w!==s.prevTravellerWidth)){s.scale.range([n,n+h-w]);var k=s.scale.domain().map(function(U){return s.scale(U)});return{prevData:l,prevTravellerWidth:w,prevUpdateId:T,prevX:n,prevWidth:h,startX:s.scale(r.startIndex),endX:s.scale(r.endIndex),scaleValues:k}}return null}},{key:"getIndexInRange",value:function(r,s){for(var l=r.length,h=0,n=l-1;n-h>1;){var w=Math.floor((h+n)/2);r[w]>s?n=w:h=w}return s>=r[n]?n:h}}])}(nt.PureComponent);Qh(_v,"displayName","Brush");Qh(_v,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var xO,Hj;function bRe(){if(Hj)return xO;Hj=1;var t=BI();function e(a,r){var s;return t(a,function(l,h,n){return s=r(l,h,n),!s}),!!s}return xO=e,xO}var PO,$j;function xRe(){if($j)return PO;$j=1;var t=uW(),e=Dm(),a=bRe(),r=Eh(),s=xx();function l(h,n,w){var T=r(h)?t:a;return w&&s(h,n,w)&&(n=void 0),T(h,e(n,3))}return PO=l,PO}var PRe=xRe();const ERe=Ji(PRe);var xm=function(e,a){var r=e.alwaysShow,s=e.ifOverflow;return r&&(s="extendDomain"),s===a},EO,Kj;function NRe(){if(Kj)return EO;Kj=1;var t=xW();function e(a,r,s){r=="__proto__"&&t?t(a,r,{configurable:!0,enumerable:!0,value:s,writable:!0}):a[r]=s}return EO=e,EO}var NO,Wj;function VRe(){if(Wj)return NO;Wj=1;var t=NRe(),e=CW(),a=Dm();function r(s,l){var h={};return l=a(l,3),e(s,function(n,w,T){t(h,w,l(n,w,T))}),h}return NO=r,NO}var zRe=VRe();const ORe=Ji(zRe);var VO,Yj;function DRe(){if(Yj)return VO;Yj=1;function t(e,a){for(var r=-1,s=e==null?0:e.length;++r<s;)if(!a(e[r],r,e))return!1;return!0}return VO=t,VO}var zO,Xj;function MRe(){if(Xj)return zO;Xj=1;var t=BI();function e(a,r){var s=!0;return t(a,function(l,h,n){return s=!!r(l,h,n),s}),s}return zO=e,zO}var OO,Jj;function IRe(){if(Jj)return OO;Jj=1;var t=DRe(),e=MRe(),a=Dm(),r=Eh(),s=xx();function l(h,n,w){var T=r(h)?t:e;return w&&s(h,n,w)&&(n=void 0),T(h,a(n,3))}return OO=l,OO}var LRe=IRe();const fX=Ji(LRe);var FRe=["x","y"];function KR(t){"@babel/helpers - typeof";return KR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KR(t)}function dM(){return dM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},dM.apply(this,arguments)}function Qj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function _w(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Qj(Object(a),!0).forEach(function(r){URe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Qj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function URe(t,e,a){return e=kRe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function kRe(t){var e=BRe(t,"string");return KR(e)=="symbol"?e:e+""}function BRe(t,e){if(KR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(KR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GRe(t,e){if(t==null)return{};var a=jRe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function jRe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function ZRe(t,e){var a=t.x,r=t.y,s=GRe(t,FRe),l="".concat(a),h=parseInt(l,10),n="".concat(r),w=parseInt(n,10),T="".concat(e.height||s.height),E=parseInt(T,10),z="".concat(e.width||s.width),k=parseInt(z,10);return _w(_w(_w(_w(_w({},e),s),h?{x:h}:{}),w?{y:w}:{}),{},{height:E,width:k,name:e.name,radius:e.radius})}function e9(t){return Vt.createElement(n2,dM({shapeType:"rectangle",propTransformer:ZRe,activeClassName:"recharts-active-bar"},t))}var qRe=function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,s){if(typeof e=="number")return e;var l=typeof r=="number";return l?e(r,s):(l||h0(),a)}},HRe=["value","background"],pX;function vv(t){"@babel/helpers - typeof";return vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vv(t)}function $Re(t,e){if(t==null)return{};var a=KRe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function KRe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function u2(){return u2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},u2.apply(this,arguments)}function t9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function iu(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?t9(Object(a),!0).forEach(function(r){Tg(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):t9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function WRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a9(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yX(r.key),r)}}function YRe(t,e,a){return e&&a9(t.prototype,e),a&&a9(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function XRe(t,e,a){return e=c2(e),JRe(t,mX()?Reflect.construct(e,a||[],c2(t).constructor):e.apply(t,a))}function JRe(t,e){if(e&&(vv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QRe(t)}function QRe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mX=function(){return!!t})()}function c2(t){return c2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},c2(t)}function eTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hM(t,e)}function hM(t,e){return hM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},hM(t,e)}function Tg(t,e,a){return e=yX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function yX(t){var e=tTe(t,"string");return vv(e)=="symbol"?e:e+""}function tTe(t,e){if(vv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(vv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ip=function(t){function e(){var a;WRe(this,e);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return a=XRe(this,e,[].concat(s)),Tg(a,"state",{isAnimationFinished:!1}),Tg(a,"id",qg("recharts-bar-")),Tg(a,"handleAnimationEnd",function(){var h=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),h&&h()}),Tg(a,"handleAnimationStart",function(){var h=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),h&&h()}),a}return eTe(e,t),YRe(e,[{key:"renderRectanglesStatically",value:function(r){var s=this,l=this.props,h=l.shape,n=l.dataKey,w=l.activeIndex,T=l.activeBar,E=ln(this.props,!1);return r&&r.map(function(z,k){var U=k===w,Z=U?T:h,q=iu(iu(iu({},E),z),{},{isActive:U,option:Z,index:k,dataKey:n,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return Vt.createElement(fi,u2({className:"recharts-bar-rectangle"},Dg(s.props,z,k),{key:"rectangle-".concat(z==null?void 0:z.x,"-").concat(z==null?void 0:z.y,"-").concat(z==null?void 0:z.value)}),Vt.createElement(e9,q))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,s=this.props,l=s.data,h=s.layout,n=s.isAnimationActive,w=s.animationBegin,T=s.animationDuration,E=s.animationEasing,z=s.animationId,k=this.state.prevData;return Vt.createElement(Zf,{begin:w,duration:T,isActive:n,easing:E,from:{t:0},to:{t:1},key:"bar-".concat(z),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(U){var Z=U.t,q=l.map(function($,J){var ie=k&&k[J];if(ie){var de=cl(ie.x,$.x),ge=cl(ie.y,$.y),he=cl(ie.width,$.width),Ae=cl(ie.height,$.height);return iu(iu({},$),{},{x:de(Z),y:ge(Z),width:he(Z),height:Ae(Z)})}if(h==="horizontal"){var me=cl(0,$.height),Re=me(Z);return iu(iu({},$),{},{y:$.y+$.height-Re,height:Re})}var be=cl(0,$.width),De=be(Z);return iu(iu({},$),{},{width:De})});return Vt.createElement(fi,null,r.renderRectanglesStatically(q))})}},{key:"renderRectangles",value:function(){var r=this.props,s=r.data,l=r.isAnimationActive,h=this.state.prevData;return l&&s&&s.length&&(!h||!Mg(h,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var r=this,s=this.props,l=s.data,h=s.dataKey,n=s.activeIndex,w=ln(this.props.background,!1);return l.map(function(T,E){T.value;var z=T.background,k=$Re(T,HRe);if(!z)return null;var U=iu(iu(iu(iu(iu({},k),{},{fill:"#eee"},z),w),Dg(r.props,T,E)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:h,index:E,className:"recharts-bar-background-rectangle"});return Vt.createElement(e9,u2({key:"background-bar-".concat(E),option:r.props.background,isActive:E===n},U))})}},{key:"renderErrorBar",value:function(r,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var l=this.props,h=l.data,n=l.xAxis,w=l.yAxis,T=l.layout,E=l.children,z=th(E,Xv);if(!z)return null;var k=T==="vertical"?h[0].height/2:h[0].width/2,U=function($,J){var ie=Array.isArray($.value)?$.value[1]:$.value;return{x:$.x,y:$.y,value:ie,errorVal:No($,J)}},Z={clipPath:r?"url(#clipPath-".concat(s,")"):null};return Vt.createElement(fi,Z,z.map(function(q){return Vt.cloneElement(q,{key:"error-bar-".concat(s,"-").concat(q.props.dataKey),data:h,xAxis:n,yAxis:w,layout:T,offset:k,dataPointFormatter:U})}))}},{key:"render",value:function(){var r=this.props,s=r.hide,l=r.data,h=r.className,n=r.xAxis,w=r.yAxis,T=r.left,E=r.top,z=r.width,k=r.height,U=r.isAnimationActive,Z=r.background,q=r.id;if(s||!l||!l.length)return null;var $=this.state.isAnimationFinished,J=ci("recharts-bar",h),ie=n&&n.allowDataOverflow,de=w&&w.allowDataOverflow,ge=ie||de,he=Un(q)?this.id:q;return Vt.createElement(fi,{className:J},ie||de?Vt.createElement("defs",null,Vt.createElement("clipPath",{id:"clipPath-".concat(he)},Vt.createElement("rect",{x:ie?T:T-z/2,y:de?E:E-k/2,width:ie?z:z*2,height:de?k:k*2}))):null,Vt.createElement(fi,{className:"recharts-bar-rectangles",clipPath:ge?"url(#clipPath-".concat(he,")"):null},Z?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(ge,he),(!U||$)&&Gf.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:s.curData}:r.data!==s.curData?{curData:r.data}:null}}])}(nt.PureComponent);pX=Ip;Tg(Ip,"displayName","Bar");Tg(Ip,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Py.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Tg(Ip,"getComposedData",function(t){var e=t.props,a=t.item,r=t.barPosition,s=t.bandSize,l=t.xAxis,h=t.yAxis,n=t.xAxisTicks,w=t.yAxisTicks,T=t.stackedData,E=t.dataStartIndex,z=t.displayedData,k=t.offset,U=E0e(r,a);if(!U)return null;var Z=e.layout,q=a.type.defaultProps,$=q!==void 0?iu(iu({},q),a.props):a.props,J=$.dataKey,ie=$.children,de=$.minPointSize,ge=Z==="horizontal"?h:l,he=T?ge.scale.domain():null,Ae=I0e({numericAxis:ge}),me=th(ie,lv),Re=z.map(function(be,De){var ne,ye,Me,ze,Le,Ie;T?ne=N0e(T[E+De],he):(ne=No(be,J),Array.isArray(ne)||(ne=[Ae,ne]));var qe=qRe(de,pX.defaultProps.minPointSize)(ne[1],De);if(Z==="horizontal"){var ke,tt=[h.scale(ne[0]),h.scale(ne[1])],Ue=tt[0],He=tt[1];ye=P7({axis:l,ticks:n,bandSize:s,offset:U.offset,entry:be,index:De}),Me=(ke=He??Ue)!==null&&ke!==void 0?ke:void 0,ze=U.size;var Ce=Ue-He;if(Le=Number.isNaN(Ce)?0:Ce,Ie={x:ye,y:h.y,width:ze,height:h.height},Math.abs(qe)>0&&Math.abs(Le)<Math.abs(qe)){var Se=Yd(Le||qe)*(Math.abs(qe)-Math.abs(Le));Me-=Se,Le+=Se}}else{var $e=[l.scale(ne[0]),l.scale(ne[1])],ft=$e[0],Je=$e[1];if(ye=ft,Me=P7({axis:h,ticks:w,bandSize:s,offset:U.offset,entry:be,index:De}),ze=Je-ft,Le=U.size,Ie={x:l.x,y:Me,width:l.width,height:Le},Math.abs(qe)>0&&Math.abs(ze)<Math.abs(qe)){var wt=Yd(ze||qe)*(Math.abs(qe)-Math.abs(ze));ze+=wt}}return iu(iu(iu({},be),{},{x:ye,y:Me,width:ze,height:Le,value:T?ne:ne[1],payload:be,background:Ie},me&&me[De]&&me[De].props),{},{tooltipPayload:[jY(a,be)],tooltipPosition:{x:ye+ze/2,y:Me+Le/2}})});return iu({data:Re,layout:Z},k)});function WR(t){"@babel/helpers - typeof";return WR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WR(t)}function aTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r9(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gX(r.key),r)}}function rTe(t,e,a){return e&&r9(t.prototype,e),a&&r9(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function n9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function bp(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?n9(Object(a),!0).forEach(function(r){Zx(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Zx(t,e,a){return e=gX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function gX(t){var e=nTe(t,"string");return WR(e)=="symbol"?e:e+""}function nTe(t,e){if(WR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(WR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qx=function(e,a,r,s,l){var h=e.width,n=e.height,w=e.layout,T=e.children,E=Object.keys(a),z={left:r.left,leftMirror:r.left,right:h-r.right,rightMirror:h-r.right,top:r.top,topMirror:r.top,bottom:n-r.bottom,bottomMirror:n-r.bottom},k=!!ef(T,Ip);return E.reduce(function(U,Z){var q=a[Z],$=q.orientation,J=q.domain,ie=q.padding,de=ie===void 0?{}:ie,ge=q.mirror,he=q.reversed,Ae="".concat($).concat(ge?"Mirror":""),me,Re,be,De,ne;if(q.type==="number"&&(q.padding==="gap"||q.padding==="no-gap")){var ye=J[1]-J[0],Me=1/0,ze=q.categoricalDomain.sort();if(ze.forEach(function($e,ft){ft>0&&(Me=Math.min(($e||0)-(ze[ft-1]||0),Me))}),Number.isFinite(Me)){var Le=Me/ye,Ie=q.layout==="vertical"?r.height:r.width;if(q.padding==="gap"&&(me=Le*Ie/2),q.padding==="no-gap"){var qe=Xd(e.barCategoryGap,Le*Ie),ke=Le*Ie/2;me=ke-qe-(ke-qe)/Ie*qe}}}s==="xAxis"?Re=[r.left+(de.left||0)+(me||0),r.left+r.width-(de.right||0)-(me||0)]:s==="yAxis"?Re=w==="horizontal"?[r.top+r.height-(de.bottom||0),r.top+(de.top||0)]:[r.top+(de.top||0)+(me||0),r.top+r.height-(de.bottom||0)-(me||0)]:Re=q.range,he&&(Re=[Re[1],Re[0]]);var tt=UY(q,l,k),Ue=tt.scale,He=tt.realScaleType;Ue.domain(J).range(Re),kY(Ue);var Ce=BY(Ue,bp(bp({},q),{},{realScaleType:He}));s==="xAxis"?(ne=$==="top"&&!ge||$==="bottom"&&ge,be=r.left,De=z[Ae]-ne*q.height):s==="yAxis"&&(ne=$==="left"&&!ge||$==="right"&&ge,be=z[Ae]-ne*q.width,De=r.top);var Se=bp(bp(bp({},q),Ce),{},{realScaleType:He,x:be,y:De,scale:Ue,width:s==="xAxis"?r.width:q.width,height:s==="yAxis"?r.height:q.height});return Se.bandSize=$b(Se,Ce),!q.hide&&s==="xAxis"?z[Ae]+=(ne?-1:1)*Se.height:q.hide||(z[Ae]+=(ne?-1:1)*Se.width),bp(bp({},U),{},Zx({},Z,Se))},{})},AX=function(e,a){var r=e.x,s=e.y,l=a.x,h=a.y;return{x:Math.min(r,l),y:Math.min(s,h),width:Math.abs(l-r),height:Math.abs(h-s)}},iTe=function(e){var a=e.x1,r=e.y1,s=e.x2,l=e.y2;return AX({x:a,y:r},{x:s,y:l})},_X=function(){function t(e){aTe(this,t),this.scale=e}return rTe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.bandAware,l=r.position;if(a!==void 0){if(l)switch(l){case"start":return this.scale(a);case"middle":{var h=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+h}case"end":{var n=this.bandwidth?this.bandwidth():0;return this.scale(a)+n}default:return this.scale(a)}if(s){var w=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+w}return this.scale(a)}}},{key:"isInRange",value:function(a){var r=this.range(),s=r[0],l=r[r.length-1];return s<=l?a>=s&&a<=l:a>=l&&a<=s}}],[{key:"create",value:function(a){return new t(a)}}])}();Zx(_X,"EPS",1e-4);var y4=function(e){var a=Object.keys(e).reduce(function(r,s){return bp(bp({},r),{},Zx({},s,_X.create(e[s])))},{});return bp(bp({},a),{},{apply:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=l.bandAware,n=l.position;return ORe(s,function(w,T){return a[T].apply(w,{bandAware:h,position:n})})},isInRange:function(s){return fX(s,function(l,h){return a[h].isInRange(l)})}})};function sTe(t){return(t%180+180)%180}var oTe=function(e){var a=e.width,r=e.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=sTe(s),h=l*Math.PI/180,n=Math.atan(r/a),w=h>n&&h<Math.PI-n?r/Math.sin(h):a/Math.cos(h);return Math.abs(w)},DO,i9;function lTe(){if(i9)return DO;i9=1;var t=Dm(),e=ET(),a=Cx();function r(s){return function(l,h,n){var w=Object(l);if(!e(l)){var T=t(h,3);l=a(l),h=function(z){return T(w[z],z,w)}}var E=s(l,h,n);return E>-1?w[T?l[E]:E]:void 0}}return DO=r,DO}var MO,s9;function uTe(){if(s9)return MO;s9=1;var t=uX();function e(a){var r=t(a),s=r%1;return r===r?s?r-s:r:0}return MO=e,MO}var IO,o9;function cTe(){if(o9)return IO;o9=1;var t=vW(),e=Dm(),a=uTe(),r=Math.max;function s(l,h,n){var w=l==null?0:l.length;if(!w)return-1;var T=n==null?0:a(n);return T<0&&(T=r(w+T,0)),t(l,e(h,3),T)}return IO=s,IO}var LO,l9;function dTe(){if(l9)return LO;l9=1;var t=lTe(),e=cTe(),a=t(e);return LO=a,LO}var hTe=dTe();const fTe=Ji(hTe);var pTe=MK();const mTe=Ji(pTe);var yTe=mTe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),g4=nt.createContext(void 0),A4=nt.createContext(void 0),vX=nt.createContext(void 0),wX=nt.createContext({}),RX=nt.createContext(void 0),TX=nt.createContext(0),SX=nt.createContext(0),u9=function(e){var a=e.state,r=a.xAxisMap,s=a.yAxisMap,l=a.offset,h=e.clipPathId,n=e.children,w=e.width,T=e.height,E=yTe(l);return Vt.createElement(g4.Provider,{value:r},Vt.createElement(A4.Provider,{value:s},Vt.createElement(wX.Provider,{value:l},Vt.createElement(vX.Provider,{value:E},Vt.createElement(RX.Provider,{value:h},Vt.createElement(TX.Provider,{value:T},Vt.createElement(SX.Provider,{value:w},n)))))))},gTe=function(){return nt.useContext(RX)},CX=function(e){var a=nt.useContext(g4);a==null&&h0();var r=a[e];return r==null&&h0(),r},ATe=function(){var e=nt.useContext(g4);return vg(e)},_Te=function(){var e=nt.useContext(A4),a=fTe(e,function(r){return fX(r.domain,Number.isFinite)});return a||vg(e)},bX=function(e){var a=nt.useContext(A4);a==null&&h0();var r=a[e];return r==null&&h0(),r},vTe=function(){var e=nt.useContext(vX);return e},wTe=function(){return nt.useContext(wX)},_4=function(){return nt.useContext(SX)},v4=function(){return nt.useContext(TX)};function wv(t){"@babel/helpers - typeof";return wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wv(t)}function RTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function TTe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,PX(r.key),r)}}function STe(t,e,a){return e&&TTe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function CTe(t,e,a){return e=d2(e),bTe(t,xX()?Reflect.construct(e,a||[],d2(t).constructor):e.apply(t,a))}function bTe(t,e){if(e&&(wv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xTe(t)}function xTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xX=function(){return!!t})()}function d2(t){return d2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},d2(t)}function PTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fM(t,e)}function fM(t,e){return fM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},fM(t,e)}function c9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function d9(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?c9(Object(a),!0).forEach(function(r){w4(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function w4(t,e,a){return e=PX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function PX(t){var e=ETe(t,"string");return wv(e)=="symbol"?e:e+""}function ETe(t,e){if(wv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(wv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function NTe(t,e){return DTe(t)||OTe(t,e)||zTe(t,e)||VTe()}function VTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zTe(t,e){if(t){if(typeof t=="string")return h9(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return h9(t,e)}}function h9(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function OTe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(E){T=!0,s=E}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function DTe(t){if(Array.isArray(t))return t}function pM(){return pM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},pM.apply(this,arguments)}var MTe=function(e,a){var r;return Vt.isValidElement(e)?r=Vt.cloneElement(e,a):Fn(e)?r=e(a):r=Vt.createElement("line",pM({},a,{className:"recharts-reference-line-line"})),r},ITe=function(e,a,r,s,l,h,n,w,T){var E=l.x,z=l.y,k=l.width,U=l.height;if(r){var Z=T.y,q=e.y.apply(Z,{position:h});if(xm(T,"discard")&&!e.y.isInRange(q))return null;var $=[{x:E+k,y:q},{x:E,y:q}];return w==="left"?$.reverse():$}if(a){var J=T.x,ie=e.x.apply(J,{position:h});if(xm(T,"discard")&&!e.x.isInRange(ie))return null;var de=[{x:ie,y:z+U},{x:ie,y:z}];return n==="top"?de.reverse():de}if(s){var ge=T.segment,he=ge.map(function(Ae){return e.apply(Ae,{position:h})});return xm(T,"discard")&&ERe(he,function(Ae){return!e.isInRange(Ae)})?null:he}return null};function LTe(t){var e=t.x,a=t.y,r=t.segment,s=t.xAxisId,l=t.yAxisId,h=t.shape,n=t.className,w=t.alwaysShow,T=gTe(),E=CX(s),z=bX(l),k=vTe();if(!T||!k)return null;Vp(w===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var U=y4({x:E.scale,y:z.scale}),Z=Mu(e),q=Mu(a),$=r&&r.length===2,J=ITe(U,Z,q,$,k,t.position,E.orientation,z.orientation,t);if(!J)return null;var ie=NTe(J,2),de=ie[0],ge=de.x,he=de.y,Ae=ie[1],me=Ae.x,Re=Ae.y,be=xm(t,"hidden")?"url(#".concat(T,")"):void 0,De=d9(d9({clipPath:be},ln(t,!0)),{},{x1:ge,y1:he,x2:me,y2:Re});return Vt.createElement(fi,{className:ci("recharts-reference-line",n)},MTe(h,De),ec.renderCallByParent(t,iTe({x1:ge,y1:he,x2:me,y2:Re})))}var R4=function(t){function e(){return RTe(this,e),CTe(this,e,arguments)}return PTe(e,t),STe(e,[{key:"render",value:function(){return Vt.createElement(LTe,this.props)}}])}(Vt.Component);w4(R4,"displayName","ReferenceLine");w4(R4,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function mM(){return mM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},mM.apply(this,arguments)}function Rv(t){"@babel/helpers - typeof";return Rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rv(t)}function f9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function p9(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?f9(Object(a),!0).forEach(function(r){Hx(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):f9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function FTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function UTe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,NX(r.key),r)}}function kTe(t,e,a){return e&&UTe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function BTe(t,e,a){return e=h2(e),GTe(t,EX()?Reflect.construct(e,a||[],h2(t).constructor):e.apply(t,a))}function GTe(t,e){if(e&&(Rv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jTe(t)}function jTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function EX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EX=function(){return!!t})()}function h2(t){return h2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},h2(t)}function ZTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yM(t,e)}function yM(t,e){return yM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},yM(t,e)}function Hx(t,e,a){return e=NX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function NX(t){var e=qTe(t,"string");return Rv(e)=="symbol"?e:e+""}function qTe(t,e){if(Rv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Rv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var HTe=function(e){var a=e.x,r=e.y,s=e.xAxis,l=e.yAxis,h=y4({x:s.scale,y:l.scale}),n=h.apply({x:a,y:r},{bandAware:!0});return xm(e,"discard")&&!h.isInRange(n)?null:n},$x=function(t){function e(){return FTe(this,e),BTe(this,e,arguments)}return ZTe(e,t),kTe(e,[{key:"render",value:function(){var r=this.props,s=r.x,l=r.y,h=r.r,n=r.alwaysShow,w=r.clipPathId,T=Mu(s),E=Mu(l);if(Vp(n===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!T||!E)return null;var z=HTe(this.props);if(!z)return null;var k=z.x,U=z.y,Z=this.props,q=Z.shape,$=Z.className,J=xm(this.props,"hidden")?"url(#".concat(w,")"):void 0,ie=p9(p9({clipPath:J},ln(this.props,!0)),{},{cx:k,cy:U});return Vt.createElement(fi,{className:ci("recharts-reference-dot",$)},e.renderDot(q,ie),ec.renderCallByParent(this.props,{x:k-h,y:U-h,width:2*h,height:2*h}))}}])}(Vt.Component);Hx($x,"displayName","ReferenceDot");Hx($x,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Hx($x,"renderDot",function(t,e){var a;return Vt.isValidElement(t)?a=Vt.cloneElement(t,e):Fn(t)?a=t(e):a=Vt.createElement(DT,mM({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),a});function gM(){return gM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},gM.apply(this,arguments)}function Tv(t){"@babel/helpers - typeof";return Tv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tv(t)}function m9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function y9(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?m9(Object(a),!0).forEach(function(r){Kx(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):m9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function $Te(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KTe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zX(r.key),r)}}function WTe(t,e,a){return e&&KTe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function YTe(t,e,a){return e=f2(e),XTe(t,VX()?Reflect.construct(e,a||[],f2(t).constructor):e.apply(t,a))}function XTe(t,e){if(e&&(Tv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JTe(t)}function JTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VX=function(){return!!t})()}function f2(t){return f2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},f2(t)}function QTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AM(t,e)}function AM(t,e){return AM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},AM(t,e)}function Kx(t,e,a){return e=zX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function zX(t){var e=eSe(t,"string");return Tv(e)=="symbol"?e:e+""}function eSe(t,e){if(Tv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Tv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var tSe=function(e,a,r,s,l){var h=l.x1,n=l.x2,w=l.y1,T=l.y2,E=l.xAxis,z=l.yAxis;if(!E||!z)return null;var k=y4({x:E.scale,y:z.scale}),U={x:e?k.x.apply(h,{position:"start"}):k.x.rangeMin,y:r?k.y.apply(w,{position:"start"}):k.y.rangeMin},Z={x:a?k.x.apply(n,{position:"end"}):k.x.rangeMax,y:s?k.y.apply(T,{position:"end"}):k.y.rangeMax};return xm(l,"discard")&&(!k.isInRange(U)||!k.isInRange(Z))?null:AX(U,Z)},Wx=function(t){function e(){return $Te(this,e),YTe(this,e,arguments)}return QTe(e,t),WTe(e,[{key:"render",value:function(){var r=this.props,s=r.x1,l=r.x2,h=r.y1,n=r.y2,w=r.className,T=r.alwaysShow,E=r.clipPathId;Vp(T===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var z=Mu(s),k=Mu(l),U=Mu(h),Z=Mu(n),q=this.props.shape;if(!z&&!k&&!U&&!Z&&!q)return null;var $=tSe(z,k,U,Z,this.props);if(!$&&!q)return null;var J=xm(this.props,"hidden")?"url(#".concat(E,")"):void 0;return Vt.createElement(fi,{className:ci("recharts-reference-area",w)},e.renderRect(q,y9(y9({clipPath:J},ln(this.props,!0)),$)),ec.renderCallByParent(this.props,$))}}])}(Vt.Component);Kx(Wx,"displayName","ReferenceArea");Kx(Wx,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Kx(Wx,"renderRect",function(t,e){var a;return Vt.isValidElement(t)?a=Vt.cloneElement(t,e):Fn(t)?a=t(e):a=Vt.createElement(m4,gM({},e,{className:"recharts-reference-area-rect"})),a});function OX(t,e,a){if(e<1)return[];if(e===1&&a===void 0)return t;for(var r=[],s=0;s<t.length;s+=e)r.push(t[s]);return r}function aSe(t,e,a){var r={width:t.width+e.width,height:t.height+e.height};return oTe(r,a)}function rSe(t,e,a){var r=a==="width",s=t.x,l=t.y,h=t.width,n=t.height;return e===1?{start:r?s:l,end:r?s+h:l+n}:{start:r?s+h:l+n,end:r?s:l}}function p2(t,e,a,r,s){if(t*e<t*r||t*e>t*s)return!1;var l=a();return t*(e-t*l/2-r)>=0&&t*(e+t*l/2-s)<=0}function nSe(t,e){return OX(t,e+1)}function iSe(t,e,a,r,s){for(var l=(r||[]).slice(),h=e.start,n=e.end,w=0,T=1,E=h,z=function(){var Z=r==null?void 0:r[w];if(Z===void 0)return{v:OX(r,T)};var q=w,$,J=function(){return $===void 0&&($=a(Z,q)),$},ie=Z.coordinate,de=w===0||p2(t,ie,J,E,n);de||(w=0,E=h,T+=1),de&&(E=ie+t*(J()/2+s),w+=T)},k;T<=l.length;)if(k=z(),k)return k.v;return[]}function YR(t){"@babel/helpers - typeof";return YR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},YR(t)}function g9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function id(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?g9(Object(a),!0).forEach(function(r){sSe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):g9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function sSe(t,e,a){return e=oSe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function oSe(t){var e=lSe(t,"string");return YR(e)=="symbol"?e:e+""}function lSe(t,e){if(YR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(YR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uSe(t,e,a,r,s){for(var l=(r||[]).slice(),h=l.length,n=e.start,w=e.end,T=function(k){var U=l[k],Z,q=function(){return Z===void 0&&(Z=a(U,k)),Z};if(k===h-1){var $=t*(U.coordinate+t*q()/2-w);l[k]=U=id(id({},U),{},{tickCoord:$>0?U.coordinate-$*t:U.coordinate})}else l[k]=U=id(id({},U),{},{tickCoord:U.coordinate});var J=p2(t,U.tickCoord,q,n,w);J&&(w=U.tickCoord-t*(q()/2+s),l[k]=id(id({},U),{},{isShow:!0}))},E=h-1;E>=0;E--)T(E);return l}function cSe(t,e,a,r,s,l){var h=(r||[]).slice(),n=h.length,w=e.start,T=e.end;if(l){var E=r[n-1],z=a(E,n-1),k=t*(E.coordinate+t*z/2-T);h[n-1]=E=id(id({},E),{},{tickCoord:k>0?E.coordinate-k*t:E.coordinate});var U=p2(t,E.tickCoord,function(){return z},w,T);U&&(T=E.tickCoord-t*(z/2+s),h[n-1]=id(id({},E),{},{isShow:!0}))}for(var Z=l?n-1:n,q=function(ie){var de=h[ie],ge,he=function(){return ge===void 0&&(ge=a(de,ie)),ge};if(ie===0){var Ae=t*(de.coordinate-t*he()/2-w);h[ie]=de=id(id({},de),{},{tickCoord:Ae<0?de.coordinate-Ae*t:de.coordinate})}else h[ie]=de=id(id({},de),{},{tickCoord:de.coordinate});var me=p2(t,de.tickCoord,he,w,T);me&&(w=de.tickCoord+t*(he()/2+s),h[ie]=id(id({},de),{},{isShow:!0}))},$=0;$<Z;$++)q($);return h}function T4(t,e,a){var r=t.tick,s=t.ticks,l=t.viewBox,h=t.minTickGap,n=t.orientation,w=t.interval,T=t.tickFormatter,E=t.unit,z=t.angle;if(!s||!s.length||!r)return[];if(mr(w)||Py.isSsr)return nSe(s,typeof w=="number"&&mr(w)?w:0);var k=[],U=n==="top"||n==="bottom"?"width":"height",Z=E&&U==="width"?Gw(E,{fontSize:e,letterSpacing:a}):{width:0,height:0},q=function(de,ge){var he=Fn(T)?T(de.value,ge):de.value;return U==="width"?aSe(Gw(he,{fontSize:e,letterSpacing:a}),Z,z):Gw(he,{fontSize:e,letterSpacing:a})[U]},$=s.length>=2?Yd(s[1].coordinate-s[0].coordinate):1,J=rSe(l,$,U);return w==="equidistantPreserveStart"?iSe($,J,q,s,h):(w==="preserveStart"||w==="preserveStartEnd"?k=cSe($,J,q,s,h,w==="preserveStartEnd"):k=uSe($,J,q,s,h),k.filter(function(ie){return ie.isShow}))}var dSe=["viewBox"],hSe=["viewBox"],fSe=["ticks"];function Sv(t){"@babel/helpers - typeof";return Sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sv(t)}function N_(){return N_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},N_.apply(this,arguments)}function A9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Kd(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?A9(Object(a),!0).forEach(function(r){S4(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):A9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function FO(t,e){if(t==null)return{};var a=pSe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function pSe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function mSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _9(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,MX(r.key),r)}}function ySe(t,e,a){return e&&_9(t.prototype,e),a&&_9(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function gSe(t,e,a){return e=m2(e),ASe(t,DX()?Reflect.construct(e,a||[],m2(t).constructor):e.apply(t,a))}function ASe(t,e){if(e&&(Sv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _Se(t)}function _Se(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DX=function(){return!!t})()}function m2(t){return m2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},m2(t)}function vSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_M(t,e)}function _M(t,e){return _M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},_M(t,e)}function S4(t,e,a){return e=MX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function MX(t){var e=wSe(t,"string");return Sv(e)=="symbol"?e:e+""}function wSe(t,e){if(Sv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Sv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Jv=function(t){function e(a){var r;return mSe(this,e),r=gSe(this,e,[a]),r.state={fontSize:"",letterSpacing:""},r}return vSe(e,t),ySe(e,[{key:"shouldComponentUpdate",value:function(r,s){var l=r.viewBox,h=FO(r,dSe),n=this.props,w=n.viewBox,T=FO(n,hSe);return!k_(l,w)||!k_(h,T)||!k_(s,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var s=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var s=this.props,l=s.x,h=s.y,n=s.width,w=s.height,T=s.orientation,E=s.tickSize,z=s.mirror,k=s.tickMargin,U,Z,q,$,J,ie,de=z?-1:1,ge=r.tickSize||E,he=mr(r.tickCoord)?r.tickCoord:r.coordinate;switch(T){case"top":U=Z=r.coordinate,$=h+ +!z*w,q=$-de*ge,ie=q-de*k,J=he;break;case"left":q=$=r.coordinate,Z=l+ +!z*n,U=Z-de*ge,J=U-de*k,ie=he;break;case"right":q=$=r.coordinate,Z=l+ +z*n,U=Z+de*ge,J=U+de*k,ie=he;break;default:U=Z=r.coordinate,$=h+ +z*w,q=$+de*ge,ie=q+de*k,J=he;break}return{line:{x1:U,y1:q,x2:Z,y2:$},tick:{x:J,y:ie}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,s=r.orientation,l=r.mirror,h;switch(s){case"left":h=l?"start":"end";break;case"right":h=l?"end":"start";break;default:h="middle";break}return h}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,s=r.orientation,l=r.mirror,h="end";switch(s){case"left":case"right":h="middle";break;case"top":h=l?"start":"end";break;default:h=l?"end":"start";break}return h}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.x,l=r.y,h=r.width,n=r.height,w=r.orientation,T=r.mirror,E=r.axisLine,z=Kd(Kd(Kd({},ln(this.props,!1)),ln(E,!1)),{},{fill:"none"});if(w==="top"||w==="bottom"){var k=+(w==="top"&&!T||w==="bottom"&&T);z=Kd(Kd({},z),{},{x1:s,y1:l+k*n,x2:s+h,y2:l+k*n})}else{var U=+(w==="left"&&!T||w==="right"&&T);z=Kd(Kd({},z),{},{x1:s+U*h,y1:l,x2:s+U*h,y2:l+n})}return Vt.createElement("line",N_({},z,{className:ci("recharts-cartesian-axis-line",lf(E,"className"))}))}},{key:"renderTicks",value:function(r,s,l){var h=this,n=this.props,w=n.tickLine,T=n.stroke,E=n.tick,z=n.tickFormatter,k=n.unit,U=T4(Kd(Kd({},this.props),{},{ticks:r}),s,l),Z=this.getTickTextAnchor(),q=this.getTickVerticalAnchor(),$=ln(this.props,!1),J=ln(E,!1),ie=Kd(Kd({},$),{},{fill:"none"},ln(w,!1)),de=U.map(function(ge,he){var Ae=h.getTickLineCoord(ge),me=Ae.line,Re=Ae.tick,be=Kd(Kd(Kd(Kd({textAnchor:Z,verticalAnchor:q},$),{},{stroke:"none",fill:T},J),Re),{},{index:he,payload:ge,visibleTicksCount:U.length,tickFormatter:z});return Vt.createElement(fi,N_({className:"recharts-cartesian-axis-tick",key:"tick-".concat(ge.value,"-").concat(ge.coordinate,"-").concat(ge.tickCoord)},Dg(h.props,ge,he)),w&&Vt.createElement("line",N_({},ie,me,{className:ci("recharts-cartesian-axis-tick-line",lf(w,"className"))})),E&&e.renderTickItem(E,be,"".concat(Fn(z)?z(ge.value,he):ge.value).concat(k||"")))});return Vt.createElement("g",{className:"recharts-cartesian-axis-ticks"},de)}},{key:"render",value:function(){var r=this,s=this.props,l=s.axisLine,h=s.width,n=s.height,w=s.ticksGenerator,T=s.className,E=s.hide;if(E)return null;var z=this.props,k=z.ticks,U=FO(z,fSe),Z=k;return Fn(w)&&(Z=k&&k.length>0?w(this.props):w(U)),h<=0||n<=0||!Z||!Z.length?null:Vt.createElement(fi,{className:ci("recharts-cartesian-axis",T),ref:function($){r.layerReference=$}},l&&this.renderAxisLine(),this.renderTicks(Z,this.state.fontSize,this.state.letterSpacing),ec.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,s,l){var h;return Vt.isValidElement(r)?h=Vt.cloneElement(r,s):Fn(r)?h=r(s):h=Vt.createElement(c0,N_({},s,{className:"recharts-cartesian-axis-tick-value"}),l),h}}])}(nt.Component);S4(Jv,"displayName","CartesianAxis");S4(Jv,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var RSe=["x1","y1","x2","y2","key"],TSe=["offset"];function f0(t){"@babel/helpers - typeof";return f0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f0(t)}function v9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function dd(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?v9(Object(a),!0).forEach(function(r){SSe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function SSe(t,e,a){return e=CSe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function CSe(t){var e=bSe(t,"string");return f0(e)=="symbol"?e:e+""}function bSe(t,e){if(f0(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(f0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WA(){return WA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},WA.apply(this,arguments)}function w9(t,e){if(t==null)return{};var a=xSe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function xSe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}var PSe=function(e){var a=e.fill;if(!a||a==="none")return null;var r=e.fillOpacity,s=e.x,l=e.y,h=e.width,n=e.height,w=e.ry;return Vt.createElement("rect",{x:s,y:l,ry:w,width:h,height:n,stroke:"none",fill:a,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function IX(t,e){var a;if(Vt.isValidElement(t))a=Vt.cloneElement(t,e);else if(Fn(t))a=t(e);else{var r=e.x1,s=e.y1,l=e.x2,h=e.y2,n=e.key,w=w9(e,RSe),T=ln(w,!1);T.offset;var E=w9(T,TSe);a=Vt.createElement("line",WA({},E,{x1:r,y1:s,x2:l,y2:h,fill:"none",key:n}))}return a}function ESe(t){var e=t.x,a=t.width,r=t.horizontal,s=r===void 0?!0:r,l=t.horizontalPoints;if(!s||!l||!l.length)return null;var h=l.map(function(n,w){var T=dd(dd({},t),{},{x1:e,y1:n,x2:e+a,y2:n,key:"line-".concat(w),index:w});return IX(s,T)});return Vt.createElement("g",{className:"recharts-cartesian-grid-horizontal"},h)}function NSe(t){var e=t.y,a=t.height,r=t.vertical,s=r===void 0?!0:r,l=t.verticalPoints;if(!s||!l||!l.length)return null;var h=l.map(function(n,w){var T=dd(dd({},t),{},{x1:n,y1:e,x2:n,y2:e+a,key:"line-".concat(w),index:w});return IX(s,T)});return Vt.createElement("g",{className:"recharts-cartesian-grid-vertical"},h)}function VSe(t){var e=t.horizontalFill,a=t.fillOpacity,r=t.x,s=t.y,l=t.width,h=t.height,n=t.horizontalPoints,w=t.horizontal,T=w===void 0?!0:w;if(!T||!e||!e.length)return null;var E=n.map(function(k){return Math.round(k+s-s)}).sort(function(k,U){return k-U});s!==E[0]&&E.unshift(0);var z=E.map(function(k,U){var Z=!E[U+1],q=Z?s+h-k:E[U+1]-k;if(q<=0)return null;var $=U%e.length;return Vt.createElement("rect",{key:"react-".concat(U),y:k,x:r,height:q,width:l,stroke:"none",fill:e[$],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return Vt.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},z)}function zSe(t){var e=t.vertical,a=e===void 0?!0:e,r=t.verticalFill,s=t.fillOpacity,l=t.x,h=t.y,n=t.width,w=t.height,T=t.verticalPoints;if(!a||!r||!r.length)return null;var E=T.map(function(k){return Math.round(k+l-l)}).sort(function(k,U){return k-U});l!==E[0]&&E.unshift(0);var z=E.map(function(k,U){var Z=!E[U+1],q=Z?l+n-k:E[U+1]-k;if(q<=0)return null;var $=U%r.length;return Vt.createElement("rect",{key:"react-".concat(U),x:k,y:h,width:q,height:w,stroke:"none",fill:r[$],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return Vt.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},z)}var OSe=function(e,a){var r=e.xAxis,s=e.width,l=e.height,h=e.offset;return FY(T4(dd(dd(dd({},Jv.defaultProps),r),{},{ticks:uy(r,!0),viewBox:{x:0,y:0,width:s,height:l}})),h.left,h.left+h.width,a)},DSe=function(e,a){var r=e.yAxis,s=e.width,l=e.height,h=e.offset;return FY(T4(dd(dd(dd({},Jv.defaultProps),r),{},{ticks:uy(r,!0),viewBox:{x:0,y:0,width:s,height:l}})),h.top,h.top+h.height,a)},p_={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function xp(t){var e,a,r,s,l,h,n=_4(),w=v4(),T=wTe(),E=dd(dd({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:p_.stroke,fill:(a=t.fill)!==null&&a!==void 0?a:p_.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:p_.horizontal,horizontalFill:(s=t.horizontalFill)!==null&&s!==void 0?s:p_.horizontalFill,vertical:(l=t.vertical)!==null&&l!==void 0?l:p_.vertical,verticalFill:(h=t.verticalFill)!==null&&h!==void 0?h:p_.verticalFill,x:mr(t.x)?t.x:T.left,y:mr(t.y)?t.y:T.top,width:mr(t.width)?t.width:T.width,height:mr(t.height)?t.height:T.height}),z=E.x,k=E.y,U=E.width,Z=E.height,q=E.syncWithTicks,$=E.horizontalValues,J=E.verticalValues,ie=ATe(),de=_Te();if(!mr(U)||U<=0||!mr(Z)||Z<=0||!mr(z)||z!==+z||!mr(k)||k!==+k)return null;var ge=E.verticalCoordinatesGenerator||OSe,he=E.horizontalCoordinatesGenerator||DSe,Ae=E.horizontalPoints,me=E.verticalPoints;if((!Ae||!Ae.length)&&Fn(he)){var Re=$&&$.length,be=he({yAxis:de?dd(dd({},de),{},{ticks:Re?$:de.ticks}):void 0,width:n,height:w,offset:T},Re?!0:q);Vp(Array.isArray(be),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(f0(be),"]")),Array.isArray(be)&&(Ae=be)}if((!me||!me.length)&&Fn(ge)){var De=J&&J.length,ne=ge({xAxis:ie?dd(dd({},ie),{},{ticks:De?J:ie.ticks}):void 0,width:n,height:w,offset:T},De?!0:q);Vp(Array.isArray(ne),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(f0(ne),"]")),Array.isArray(ne)&&(me=ne)}return Vt.createElement("g",{className:"recharts-cartesian-grid"},Vt.createElement(PSe,{fill:E.fill,fillOpacity:E.fillOpacity,x:E.x,y:E.y,width:E.width,height:E.height,ry:E.ry}),Vt.createElement(ESe,WA({},E,{offset:T,horizontalPoints:Ae,xAxis:ie,yAxis:de})),Vt.createElement(NSe,WA({},E,{offset:T,verticalPoints:me,xAxis:ie,yAxis:de})),Vt.createElement(VSe,WA({},E,{horizontalPoints:Ae})),Vt.createElement(zSe,WA({},E,{verticalPoints:me})))}xp.displayName="CartesianGrid";var MSe=["type","layout","connectNulls","ref"],ISe=["key"];function Cv(t){"@babel/helpers - typeof";return Cv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cv(t)}function R9(t,e){if(t==null)return{};var a=LSe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function LSe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function Kw(){return Kw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Kw.apply(this,arguments)}function T9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Jh(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?T9(Object(a),!0).forEach(function(r){Pp(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):T9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function m_(t){return BSe(t)||kSe(t)||USe(t)||FSe()}function FSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function USe(t,e){if(t){if(typeof t=="string")return vM(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return vM(t,e)}}function kSe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function BSe(t){if(Array.isArray(t))return vM(t)}function vM(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function GSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S9(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,FX(r.key),r)}}function jSe(t,e,a){return e&&S9(t.prototype,e),a&&S9(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function ZSe(t,e,a){return e=y2(e),qSe(t,LX()?Reflect.construct(e,a||[],y2(t).constructor):e.apply(t,a))}function qSe(t,e){if(e&&(Cv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HSe(t)}function HSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function LX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LX=function(){return!!t})()}function y2(t){return y2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},y2(t)}function $Se(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wM(t,e)}function wM(t,e){return wM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},wM(t,e)}function Pp(t,e,a){return e=FX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function FX(t){var e=KSe(t,"string");return Cv(e)=="symbol"?e:e+""}function KSe(t,e){if(Cv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Cv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var T0=function(t){function e(){var a;GSe(this,e);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return a=ZSe(this,e,[].concat(s)),Pp(a,"state",{isAnimationFinished:!0,totalLength:0}),Pp(a,"generateSimpleStrokeDasharray",function(h,n){return"".concat(n,"px ").concat(h-n,"px")}),Pp(a,"getStrokeDasharray",function(h,n,w){var T=w.reduce(function(J,ie){return J+ie});if(!T)return a.generateSimpleStrokeDasharray(n,h);for(var E=Math.floor(h/T),z=h%T,k=n-h,U=[],Z=0,q=0;Z<w.length;q+=w[Z],++Z)if(q+w[Z]>z){U=[].concat(m_(w.slice(0,Z)),[z-q]);break}var $=U.length%2===0?[0,k]:[k];return[].concat(m_(e.repeat(w,E)),m_(U),$).map(function(J){return"".concat(J,"px")}).join(", ")}),Pp(a,"id",qg("recharts-line-")),Pp(a,"pathRef",function(h){a.mainCurve=h}),Pp(a,"handleAnimationEnd",function(){a.setState({isAnimationFinished:!0}),a.props.onAnimationEnd&&a.props.onAnimationEnd()}),Pp(a,"handleAnimationStart",function(){a.setState({isAnimationFinished:!1}),a.props.onAnimationStart&&a.props.onAnimationStart()}),a}return $Se(e,t),jSe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var l=this.props,h=l.points,n=l.xAxis,w=l.yAxis,T=l.layout,E=l.children,z=th(E,Xv);if(!z)return null;var k=function(q,$){return{x:q.x,y:q.y,value:q.value,errorVal:No(q.payload,$)}},U={clipPath:r?"url(#clipPath-".concat(s,")"):null};return Vt.createElement(fi,U,z.map(function(Z){return Vt.cloneElement(Z,{key:"bar-".concat(Z.props.dataKey),data:h,xAxis:n,yAxis:w,layout:T,dataPointFormatter:k})}))}},{key:"renderDots",value:function(r,s,l){var h=this.props.isAnimationActive;if(h&&!this.state.isAnimationFinished)return null;var n=this.props,w=n.dot,T=n.points,E=n.dataKey,z=ln(this.props,!1),k=ln(w,!0),U=T.map(function(q,$){var J=Jh(Jh(Jh({key:"dot-".concat($),r:3},z),k),{},{value:q.value,dataKey:E,cx:q.x,cy:q.y,index:$,payload:q.payload});return e.renderDotItem(w,J)}),Z={clipPath:r?"url(#clipPath-".concat(s?"":"dots-").concat(l,")"):null};return Vt.createElement(fi,Kw({className:"recharts-line-dots",key:"dots"},Z),U)}},{key:"renderCurveStatically",value:function(r,s,l,h){var n=this.props,w=n.type,T=n.layout,E=n.connectNulls;n.ref;var z=R9(n,MSe),k=Jh(Jh(Jh({},ln(z,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(l,")"):null,points:r},h),{},{type:w,layout:T,connectNulls:E});return Vt.createElement(Vg,Kw({},k,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,s){var l=this,h=this.props,n=h.points,w=h.strokeDasharray,T=h.isAnimationActive,E=h.animationBegin,z=h.animationDuration,k=h.animationEasing,U=h.animationId,Z=h.animateNewValues,q=h.width,$=h.height,J=this.state,ie=J.prevPoints,de=J.totalLength;return Vt.createElement(Zf,{begin:E,duration:z,isActive:T,easing:k,from:{t:0},to:{t:1},key:"line-".concat(U),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(ge){var he=ge.t;if(ie){var Ae=ie.length/n.length,me=n.map(function(ye,Me){var ze=Math.floor(Me*Ae);if(ie[ze]){var Le=ie[ze],Ie=cl(Le.x,ye.x),qe=cl(Le.y,ye.y);return Jh(Jh({},ye),{},{x:Ie(he),y:qe(he)})}if(Z){var ke=cl(q*2,ye.x),tt=cl($/2,ye.y);return Jh(Jh({},ye),{},{x:ke(he),y:tt(he)})}return Jh(Jh({},ye),{},{x:ye.x,y:ye.y})});return l.renderCurveStatically(me,r,s)}var Re=cl(0,de),be=Re(he),De;if(w){var ne="".concat(w).split(/[,\s]+/gim).map(function(ye){return parseFloat(ye)});De=l.getStrokeDasharray(be,de,ne)}else De=l.generateSimpleStrokeDasharray(de,be);return l.renderCurveStatically(n,r,s,{strokeDasharray:De})})}},{key:"renderCurve",value:function(r,s){var l=this.props,h=l.points,n=l.isAnimationActive,w=this.state,T=w.prevPoints,E=w.totalLength;return n&&h&&h.length&&(!T&&E>0||!Mg(T,h))?this.renderCurveWithAnimation(r,s):this.renderCurveStatically(h,r,s)}},{key:"render",value:function(){var r,s=this.props,l=s.hide,h=s.dot,n=s.points,w=s.className,T=s.xAxis,E=s.yAxis,z=s.top,k=s.left,U=s.width,Z=s.height,q=s.isAnimationActive,$=s.id;if(l||!n||!n.length)return null;var J=this.state.isAnimationFinished,ie=n.length===1,de=ci("recharts-line",w),ge=T&&T.allowDataOverflow,he=E&&E.allowDataOverflow,Ae=ge||he,me=Un($)?this.id:$,Re=(r=ln(h,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},be=Re.r,De=be===void 0?3:be,ne=Re.strokeWidth,ye=ne===void 0?2:ne,Me=kK(h)?h:{},ze=Me.clipDot,Le=ze===void 0?!0:ze,Ie=De*2+ye;return Vt.createElement(fi,{className:de},ge||he?Vt.createElement("defs",null,Vt.createElement("clipPath",{id:"clipPath-".concat(me)},Vt.createElement("rect",{x:ge?k:k-U/2,y:he?z:z-Z/2,width:ge?U:U*2,height:he?Z:Z*2})),!Le&&Vt.createElement("clipPath",{id:"clipPath-dots-".concat(me)},Vt.createElement("rect",{x:k-Ie/2,y:z-Ie/2,width:U+Ie,height:Z+Ie}))):null,!ie&&this.renderCurve(Ae,me),this.renderErrorBar(Ae,me),(ie||h)&&this.renderDots(Ae,Le,me),(!q||J)&&Gf.renderCallByParent(this.props,n))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:s.curPoints}:r.points!==s.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,s){for(var l=r.length%2!==0?[].concat(m_(r),[0]):r,h=[],n=0;n<s;++n)h=[].concat(m_(h),m_(l));return h}},{key:"renderDotItem",value:function(r,s){var l;if(Vt.isValidElement(r))l=Vt.cloneElement(r,s);else if(Fn(r))l=r(s);else{var h=s.key,n=R9(s,ISe),w=ci("recharts-line-dot",typeof r!="boolean"?r.className:"");l=Vt.createElement(DT,Kw({key:h},n,{className:w}))}return l}}])}(nt.PureComponent);Pp(T0,"displayName","Line");Pp(T0,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Py.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Pp(T0,"getComposedData",function(t){var e=t.props,a=t.xAxis,r=t.yAxis,s=t.xAxisTicks,l=t.yAxisTicks,h=t.dataKey,n=t.bandSize,w=t.displayedData,T=t.offset,E=e.layout,z=w.map(function(k,U){var Z=No(k,h);return E==="horizontal"?{x:fv({axis:a,ticks:s,bandSize:n,entry:k,index:U}),y:Un(Z)?null:r.scale(Z),value:Z,payload:k}:{x:Un(Z)?null:a.scale(Z),y:fv({axis:r,ticks:l,bandSize:n,entry:k,index:U}),value:Z,payload:k}});return Jh({points:z,layout:E},T)});var WSe=["layout","type","stroke","connectNulls","isRange","ref"],YSe=["key"],UX;function bv(t){"@babel/helpers - typeof";return bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bv(t)}function kX(t,e){if(t==null)return{};var a=XSe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function XSe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function YA(){return YA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},YA.apply(this,arguments)}function C9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function pg(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?C9(Object(a),!0).forEach(function(r){wm(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):C9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function JSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b9(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,GX(r.key),r)}}function QSe(t,e,a){return e&&b9(t.prototype,e),a&&b9(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function eCe(t,e,a){return e=g2(e),tCe(t,BX()?Reflect.construct(e,a||[],g2(t).constructor):e.apply(t,a))}function tCe(t,e){if(e&&(bv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aCe(t)}function aCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function BX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BX=function(){return!!t})()}function g2(t){return g2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},g2(t)}function rCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RM(t,e)}function RM(t,e){return RM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},RM(t,e)}function wm(t,e,a){return e=GX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function GX(t){var e=nCe(t,"string");return bv(e)=="symbol"?e:e+""}function nCe(t,e){if(bv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(bv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var rf=function(t){function e(){var a;JSe(this,e);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return a=eCe(this,e,[].concat(s)),wm(a,"state",{isAnimationFinished:!0}),wm(a,"id",qg("recharts-area-")),wm(a,"handleAnimationEnd",function(){var h=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),Fn(h)&&h()}),wm(a,"handleAnimationStart",function(){var h=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),Fn(h)&&h()}),a}return rCe(e,t),QSe(e,[{key:"renderDots",value:function(r,s,l){var h=this.props.isAnimationActive,n=this.state.isAnimationFinished;if(h&&!n)return null;var w=this.props,T=w.dot,E=w.points,z=w.dataKey,k=ln(this.props,!1),U=ln(T,!0),Z=E.map(function($,J){var ie=pg(pg(pg({key:"dot-".concat(J),r:3},k),U),{},{index:J,cx:$.x,cy:$.y,dataKey:z,value:$.value,payload:$.payload,points:E});return e.renderDotItem(T,ie)}),q={clipPath:r?"url(#clipPath-".concat(s?"":"dots-").concat(l,")"):null};return Vt.createElement(fi,YA({className:"recharts-area-dots"},q),Z)}},{key:"renderHorizontalRect",value:function(r){var s=this.props,l=s.baseLine,h=s.points,n=s.strokeWidth,w=h[0].x,T=h[h.length-1].x,E=r*Math.abs(w-T),z=Rg(h.map(function(k){return k.y||0}));return mr(l)&&typeof l=="number"?z=Math.max(l,z):l&&Array.isArray(l)&&l.length&&(z=Math.max(Rg(l.map(function(k){return k.y||0})),z)),mr(z)?Vt.createElement("rect",{x:w<T?w:w-E,y:0,width:E,height:Math.floor(z+(n?parseInt("".concat(n),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var s=this.props,l=s.baseLine,h=s.points,n=s.strokeWidth,w=h[0].y,T=h[h.length-1].y,E=r*Math.abs(w-T),z=Rg(h.map(function(k){return k.x||0}));return mr(l)&&typeof l=="number"?z=Math.max(l,z):l&&Array.isArray(l)&&l.length&&(z=Math.max(Rg(l.map(function(k){return k.x||0})),z)),mr(z)?Vt.createElement("rect",{x:0,y:w<T?w:w-E,width:z+(n?parseInt("".concat(n),10):1),height:Math.floor(E)}):null}},{key:"renderClipRect",value:function(r){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,s,l,h){var n=this.props,w=n.layout,T=n.type,E=n.stroke,z=n.connectNulls,k=n.isRange;n.ref;var U=kX(n,WSe);return Vt.createElement(fi,{clipPath:l?"url(#clipPath-".concat(h,")"):null},Vt.createElement(Vg,YA({},ln(U,!0),{points:r,connectNulls:z,type:T,baseLine:s,layout:w,stroke:"none",className:"recharts-area-area"})),E!=="none"&&Vt.createElement(Vg,YA({},ln(this.props,!1),{className:"recharts-area-curve",layout:w,type:T,connectNulls:z,fill:"none",points:r})),E!=="none"&&k&&Vt.createElement(Vg,YA({},ln(this.props,!1),{className:"recharts-area-curve",layout:w,type:T,connectNulls:z,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(r,s){var l=this,h=this.props,n=h.points,w=h.baseLine,T=h.isAnimationActive,E=h.animationBegin,z=h.animationDuration,k=h.animationEasing,U=h.animationId,Z=this.state,q=Z.prevPoints,$=Z.prevBaseLine;return Vt.createElement(Zf,{begin:E,duration:z,isActive:T,easing:k,from:{t:0},to:{t:1},key:"area-".concat(U),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(J){var ie=J.t;if(q){var de=q.length/n.length,ge=n.map(function(Re,be){var De=Math.floor(be*de);if(q[De]){var ne=q[De],ye=cl(ne.x,Re.x),Me=cl(ne.y,Re.y);return pg(pg({},Re),{},{x:ye(ie),y:Me(ie)})}return Re}),he;if(mr(w)&&typeof w=="number"){var Ae=cl($,w);he=Ae(ie)}else if(Un(w)||Hv(w)){var me=cl($,0);he=me(ie)}else he=w.map(function(Re,be){var De=Math.floor(be*de);if($[De]){var ne=$[De],ye=cl(ne.x,Re.x),Me=cl(ne.y,Re.y);return pg(pg({},Re),{},{x:ye(ie),y:Me(ie)})}return Re});return l.renderAreaStatically(ge,he,r,s)}return Vt.createElement(fi,null,Vt.createElement("defs",null,Vt.createElement("clipPath",{id:"animationClipPath-".concat(s)},l.renderClipRect(ie))),Vt.createElement(fi,{clipPath:"url(#animationClipPath-".concat(s,")")},l.renderAreaStatically(n,w,r,s)))})}},{key:"renderArea",value:function(r,s){var l=this.props,h=l.points,n=l.baseLine,w=l.isAnimationActive,T=this.state,E=T.prevPoints,z=T.prevBaseLine,k=T.totalLength;return w&&h&&h.length&&(!E&&k>0||!Mg(E,h)||!Mg(z,n))?this.renderAreaWithAnimation(r,s):this.renderAreaStatically(h,n,r,s)}},{key:"render",value:function(){var r,s=this.props,l=s.hide,h=s.dot,n=s.points,w=s.className,T=s.top,E=s.left,z=s.xAxis,k=s.yAxis,U=s.width,Z=s.height,q=s.isAnimationActive,$=s.id;if(l||!n||!n.length)return null;var J=this.state.isAnimationFinished,ie=n.length===1,de=ci("recharts-area",w),ge=z&&z.allowDataOverflow,he=k&&k.allowDataOverflow,Ae=ge||he,me=Un($)?this.id:$,Re=(r=ln(h,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},be=Re.r,De=be===void 0?3:be,ne=Re.strokeWidth,ye=ne===void 0?2:ne,Me=kK(h)?h:{},ze=Me.clipDot,Le=ze===void 0?!0:ze,Ie=De*2+ye;return Vt.createElement(fi,{className:de},ge||he?Vt.createElement("defs",null,Vt.createElement("clipPath",{id:"clipPath-".concat(me)},Vt.createElement("rect",{x:ge?E:E-U/2,y:he?T:T-Z/2,width:ge?U:U*2,height:he?Z:Z*2})),!Le&&Vt.createElement("clipPath",{id:"clipPath-dots-".concat(me)},Vt.createElement("rect",{x:E-Ie/2,y:T-Ie/2,width:U+Ie,height:Z+Ie}))):null,ie?null:this.renderArea(Ae,me),(h||ie)&&this.renderDots(Ae,Le,me),(!q||J)&&Gf.renderCallByParent(this.props,n))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:r.points!==s.curPoints||r.baseLine!==s.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(nt.PureComponent);UX=rf;wm(rf,"displayName","Area");wm(rf,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Py.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});wm(rf,"getBaseValue",function(t,e,a,r){var s=t.layout,l=t.baseValue,h=e.props.baseValue,n=h??l;if(mr(n)&&typeof n=="number")return n;var w=s==="horizontal"?r:a,T=w.scale.domain();if(w.type==="number"){var E=Math.max(T[0],T[1]),z=Math.min(T[0],T[1]);return n==="dataMin"?z:n==="dataMax"||E<0?E:Math.max(Math.min(T[0],T[1]),0)}return n==="dataMin"?T[0]:n==="dataMax"?T[1]:T[0]});wm(rf,"getComposedData",function(t){var e=t.props,a=t.item,r=t.xAxis,s=t.yAxis,l=t.xAxisTicks,h=t.yAxisTicks,n=t.bandSize,w=t.dataKey,T=t.stackedData,E=t.dataStartIndex,z=t.displayedData,k=t.offset,U=e.layout,Z=T&&T.length,q=UX.getBaseValue(e,a,r,s),$=U==="horizontal",J=!1,ie=z.map(function(ge,he){var Ae;Z?Ae=T[E+he]:(Ae=No(ge,w),Array.isArray(Ae)?J=!0:Ae=[q,Ae]);var me=Ae[1]==null||Z&&No(ge,w)==null;return $?{x:fv({axis:r,ticks:l,bandSize:n,entry:ge,index:he}),y:me?null:s.scale(Ae[1]),value:Ae,payload:ge}:{x:me?null:r.scale(Ae[1]),y:fv({axis:s,ticks:h,bandSize:n,entry:ge,index:he}),value:Ae,payload:ge}}),de;return Z||J?de=ie.map(function(ge){var he=Array.isArray(ge.value)?ge.value[0]:null;return $?{x:ge.x,y:he!=null&&ge.y!=null?s.scale(he):null}:{x:he!=null?r.scale(he):null,y:ge.y}}):de=$?s.scale(q):r.scale(q),pg({points:ie,baseLine:de,layout:U,isRange:J},k)});wm(rf,"renderDotItem",function(t,e){var a;if(Vt.isValidElement(t))a=Vt.cloneElement(t,e);else if(Fn(t))a=t(e);else{var r=ci("recharts-area-dot",typeof t!="boolean"?t.className:""),s=e.key,l=kX(e,YSe);a=Vt.createElement(DT,YA({},l,{key:s,className:r}))}return a});function xv(t){"@babel/helpers - typeof";return xv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xv(t)}function iCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sCe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qX(r.key),r)}}function oCe(t,e,a){return e&&sCe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function lCe(t,e,a){return e=A2(e),uCe(t,jX()?Reflect.construct(e,a||[],A2(t).constructor):e.apply(t,a))}function uCe(t,e){if(e&&(xv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cCe(t)}function cCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jX=function(){return!!t})()}function A2(t){return A2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},A2(t)}function dCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TM(t,e)}function TM(t,e){return TM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},TM(t,e)}function ZX(t,e,a){return e=qX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function qX(t){var e=hCe(t,"string");return xv(e)=="symbol"?e:e+""}function hCe(t,e){if(xv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(xv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Yx=function(t){function e(){return iCe(this,e),lCe(this,e,arguments)}return dCe(e,t),oCe(e,[{key:"render",value:function(){return null}}])}(Vt.Component);ZX(Yx,"displayName","ZAxis");ZX(Yx,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var fCe=["option","isActive"];function Ww(){return Ww=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Ww.apply(this,arguments)}function pCe(t,e){if(t==null)return{};var a=mCe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function mCe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function yCe(t){var e=t.option,a=t.isActive,r=pCe(t,fCe);return typeof e=="string"?Vt.createElement(n2,Ww({option:Vt.createElement(Sx,Ww({type:e},r)),isActive:a,shapeType:"symbols"},r)):Vt.createElement(n2,Ww({option:e,isActive:a,shapeType:"symbols"},r))}function Pv(t){"@babel/helpers - typeof";return Pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pv(t)}function Yw(){return Yw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Yw.apply(this,arguments)}function x9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Lf(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?x9(Object(a),!0).forEach(function(r){Sg(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):x9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function gCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P9(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$X(r.key),r)}}function ACe(t,e,a){return e&&P9(t.prototype,e),a&&P9(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function _Ce(t,e,a){return e=_2(e),vCe(t,HX()?Reflect.construct(e,a||[],_2(t).constructor):e.apply(t,a))}function vCe(t,e){if(e&&(Pv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wCe(t)}function wCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function HX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HX=function(){return!!t})()}function _2(t){return _2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},_2(t)}function RCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SM(t,e)}function SM(t,e){return SM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},SM(t,e)}function Sg(t,e,a){return e=$X(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function $X(t){var e=TCe(t,"string");return Pv(e)=="symbol"?e:e+""}function TCe(t,e){if(Pv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Pv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Xx=function(t){function e(){var a;gCe(this,e);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return a=_Ce(this,e,[].concat(s)),Sg(a,"state",{isAnimationFinished:!1}),Sg(a,"handleAnimationEnd",function(){a.setState({isAnimationFinished:!0})}),Sg(a,"handleAnimationStart",function(){a.setState({isAnimationFinished:!1})}),Sg(a,"id",qg("recharts-scatter-")),a}return RCe(e,t),ACe(e,[{key:"renderSymbolsStatically",value:function(r){var s=this,l=this.props,h=l.shape,n=l.activeShape,w=l.activeIndex,T=ln(this.props,!1);return r.map(function(E,z){var k=w===z,U=k?n:h,Z=Lf(Lf({},T),E);return Vt.createElement(fi,Yw({className:"recharts-scatter-symbol",key:"symbol-".concat(E==null?void 0:E.cx,"-").concat(E==null?void 0:E.cy,"-").concat(E==null?void 0:E.size,"-").concat(z)},Dg(s.props,E,z),{role:"img"}),Vt.createElement(yCe,Yw({option:U,isActive:k,key:"symbol-".concat(z)},Z)))})}},{key:"renderSymbolsWithAnimation",value:function(){var r=this,s=this.props,l=s.points,h=s.isAnimationActive,n=s.animationBegin,w=s.animationDuration,T=s.animationEasing,E=s.animationId,z=this.state.prevPoints;return Vt.createElement(Zf,{begin:n,duration:w,isActive:h,easing:T,from:{t:0},to:{t:1},key:"pie-".concat(E),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(k){var U=k.t,Z=l.map(function(q,$){var J=z&&z[$];if(J){var ie=cl(J.cx,q.cx),de=cl(J.cy,q.cy),ge=cl(J.size,q.size);return Lf(Lf({},q),{},{cx:ie(U),cy:de(U),size:ge(U)})}var he=cl(0,q.size);return Lf(Lf({},q),{},{size:he(U)})});return Vt.createElement(fi,null,r.renderSymbolsStatically(Z))})}},{key:"renderSymbols",value:function(){var r=this.props,s=r.points,l=r.isAnimationActive,h=this.state.prevPoints;return l&&s&&s.length&&(!h||!Mg(h,s))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(s)}},{key:"renderErrorBar",value:function(){var r=this.props.isAnimationActive;if(r&&!this.state.isAnimationFinished)return null;var s=this.props,l=s.points,h=s.xAxis,n=s.yAxis,w=s.children,T=th(w,Xv);return T?T.map(function(E,z){var k=E.props,U=k.direction,Z=k.dataKey;return Vt.cloneElement(E,{key:"".concat(U,"-").concat(Z,"-").concat(l[z]),data:l,xAxis:h,yAxis:n,layout:U==="x"?"vertical":"horizontal",dataPointFormatter:function($,J){return{x:$.cx,y:$.cy,value:U==="x"?+$.node.x:+$.node.y,errorVal:No($,J)}}})}):null}},{key:"renderLine",value:function(){var r=this.props,s=r.points,l=r.line,h=r.lineType,n=r.lineJointType,w=ln(this.props,!1),T=ln(l,!1),E,z;if(h==="joint")E=s.map(function(de){return{x:de.cx,y:de.cy}});else if(h==="fitting"){var k=Ade(s),U=k.xmin,Z=k.xmax,q=k.a,$=k.b,J=function(ge){return q*ge+$};E=[{x:U,y:J(U)},{x:Z,y:J(Z)}]}var ie=Lf(Lf(Lf({},w),{},{fill:"none",stroke:w&&w.fill},T),{},{points:E});return Vt.isValidElement(l)?z=Vt.cloneElement(l,ie):Fn(l)?z=l(ie):z=Vt.createElement(Vg,Yw({},ie,{type:n})),Vt.createElement(fi,{className:"recharts-scatter-line",key:"recharts-scatter-line"},z)}},{key:"render",value:function(){var r=this.props,s=r.hide,l=r.points,h=r.line,n=r.className,w=r.xAxis,T=r.yAxis,E=r.left,z=r.top,k=r.width,U=r.height,Z=r.id,q=r.isAnimationActive;if(s||!l||!l.length)return null;var $=this.state.isAnimationFinished,J=ci("recharts-scatter",n),ie=w&&w.allowDataOverflow,de=T&&T.allowDataOverflow,ge=ie||de,he=Un(Z)?this.id:Z;return Vt.createElement(fi,{className:J,clipPath:ge?"url(#clipPath-".concat(he,")"):null},ie||de?Vt.createElement("defs",null,Vt.createElement("clipPath",{id:"clipPath-".concat(he)},Vt.createElement("rect",{x:ie?E:E-k/2,y:de?z:z-U/2,width:ie?k:k*2,height:de?U:U*2}))):null,h&&this.renderLine(),this.renderErrorBar(),Vt.createElement(fi,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!q||$)&&Gf.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:s.curPoints}:r.points!==s.curPoints?{curPoints:r.points}:null}}])}(nt.PureComponent);Sg(Xx,"displayName","Scatter");Sg(Xx,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Py.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});Sg(Xx,"getComposedData",function(t){var e=t.xAxis,a=t.yAxis,r=t.zAxis,s=t.item,l=t.displayedData,h=t.xAxisTicks,n=t.yAxisTicks,w=t.offset,T=s.props.tooltipType,E=th(s.props.children,lv),z=Un(e.dataKey)?s.props.dataKey:e.dataKey,k=Un(a.dataKey)?s.props.dataKey:a.dataKey,U=r&&r.dataKey,Z=r?r.range:Yx.defaultProps.range,q=Z&&Z[0],$=e.scale.bandwidth?e.scale.bandwidth():0,J=a.scale.bandwidth?a.scale.bandwidth():0,ie=l.map(function(de,ge){var he=No(de,z),Ae=No(de,k),me=!Un(U)&&No(de,U)||"-",Re=[{name:Un(e.dataKey)?s.props.name:e.name||e.dataKey,unit:e.unit||"",value:he,payload:de,dataKey:z,type:T},{name:Un(a.dataKey)?s.props.name:a.name||a.dataKey,unit:a.unit||"",value:Ae,payload:de,dataKey:k,type:T}];me!=="-"&&Re.push({name:r.name||r.dataKey,unit:r.unit||"",value:me,payload:de,dataKey:U,type:T});var be=fv({axis:e,ticks:h,bandSize:$,entry:de,index:ge,dataKey:z}),De=fv({axis:a,ticks:n,bandSize:J,entry:de,index:ge,dataKey:k}),ne=me!=="-"?r.scale(me):q,ye=Math.sqrt(Math.max(ne,0)/Math.PI);return Lf(Lf({},de),{},{cx:be,cy:De,x:be-ye,y:De-ye,xAxis:e,yAxis:a,zAxis:r,width:2*ye,height:2*ye,size:ne,node:{x:he,y:Ae,z:me},tooltipPayload:Re,tooltipPosition:{x:be,y:De},payload:de},E&&E[ge]&&E[ge].props)});return Lf({points:ie},w)});function Ev(t){"@babel/helpers - typeof";return Ev=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ev(t)}function SCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CCe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,YX(r.key),r)}}function bCe(t,e,a){return e&&CCe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function xCe(t,e,a){return e=v2(e),PCe(t,KX()?Reflect.construct(e,a||[],v2(t).constructor):e.apply(t,a))}function PCe(t,e){if(e&&(Ev(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ECe(t)}function ECe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KX=function(){return!!t})()}function v2(t){return v2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},v2(t)}function NCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CM(t,e)}function CM(t,e){return CM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},CM(t,e)}function WX(t,e,a){return e=YX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function YX(t){var e=VCe(t,"string");return Ev(e)=="symbol"?e:e+""}function VCe(t,e){if(Ev(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Ev(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function bM(){return bM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},bM.apply(this,arguments)}function zCe(t){var e=t.xAxisId,a=_4(),r=v4(),s=CX(e);return s==null?null:Vt.createElement(Jv,bM({},s,{className:ci("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:a,height:r},ticksGenerator:function(h){return uy(h,!0)}}))}var od=function(t){function e(){return SCe(this,e),xCe(this,e,arguments)}return NCe(e,t),bCe(e,[{key:"render",value:function(){return Vt.createElement(zCe,this.props)}}])}(Vt.Component);WX(od,"displayName","XAxis");WX(od,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Nv(t){"@babel/helpers - typeof";return Nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nv(t)}function OCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DCe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,QX(r.key),r)}}function MCe(t,e,a){return e&&DCe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ICe(t,e,a){return e=w2(e),LCe(t,XX()?Reflect.construct(e,a||[],w2(t).constructor):e.apply(t,a))}function LCe(t,e){if(e&&(Nv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FCe(t)}function FCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XX=function(){return!!t})()}function w2(t){return w2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},w2(t)}function UCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xM(t,e)}function xM(t,e){return xM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},xM(t,e)}function JX(t,e,a){return e=QX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function QX(t){var e=kCe(t,"string");return Nv(e)=="symbol"?e:e+""}function kCe(t,e){if(Nv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Nv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function PM(){return PM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},PM.apply(this,arguments)}var BCe=function(e){var a=e.yAxisId,r=_4(),s=v4(),l=bX(a);return l==null?null:Vt.createElement(Jv,PM({},l,{className:ci("recharts-".concat(l.axisType," ").concat(l.axisType),l.className),viewBox:{x:0,y:0,width:r,height:s},ticksGenerator:function(n){return uy(n,!0)}}))},ld=function(t){function e(){return OCe(this,e),ICe(this,e,arguments)}return UCe(e,t),MCe(e,[{key:"render",value:function(){return Vt.createElement(BCe,this.props)}}])}(Vt.Component);JX(ld,"displayName","YAxis");JX(ld,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function E9(t){return qCe(t)||ZCe(t)||jCe(t)||GCe()}function GCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jCe(t,e){if(t){if(typeof t=="string")return EM(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return EM(t,e)}}function ZCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function qCe(t){if(Array.isArray(t))return EM(t)}function EM(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var NM=function(e,a,r,s,l){var h=th(e,R4),n=th(e,$x),w=[].concat(E9(h),E9(n)),T=th(e,Wx),E="".concat(s,"Id"),z=s[0],k=a;if(w.length&&(k=w.reduce(function(q,$){if($.props[E]===r&&xm($.props,"extendDomain")&&mr($.props[z])){var J=$.props[z];return[Math.min(q[0],J),Math.max(q[1],J)]}return q},k)),T.length){var U="".concat(z,"1"),Z="".concat(z,"2");k=T.reduce(function(q,$){if($.props[E]===r&&xm($.props,"extendDomain")&&mr($.props[U])&&mr($.props[Z])){var J=$.props[U],ie=$.props[Z];return[Math.min(q[0],J,ie),Math.max(q[1],J,ie)]}return q},k)}return l&&l.length&&(k=l.reduce(function(q,$){return mr($)?[Math.min(q[0],$),Math.max(q[1],$)]:q},k)),k},UO={exports:{}},N9;function HCe(){return N9||(N9=1,function(t){var e=Object.prototype.hasOwnProperty,a="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(a=!1));function s(w,T,E){this.fn=w,this.context=T,this.once=E||!1}function l(w,T,E,z,k){if(typeof E!="function")throw new TypeError("The listener must be a function");var U=new s(E,z||w,k),Z=a?a+T:T;return w._events[Z]?w._events[Z].fn?w._events[Z]=[w._events[Z],U]:w._events[Z].push(U):(w._events[Z]=U,w._eventsCount++),w}function h(w,T){--w._eventsCount===0?w._events=new r:delete w._events[T]}function n(){this._events=new r,this._eventsCount=0}n.prototype.eventNames=function(){var T=[],E,z;if(this._eventsCount===0)return T;for(z in E=this._events)e.call(E,z)&&T.push(a?z.slice(1):z);return Object.getOwnPropertySymbols?T.concat(Object.getOwnPropertySymbols(E)):T},n.prototype.listeners=function(T){var E=a?a+T:T,z=this._events[E];if(!z)return[];if(z.fn)return[z.fn];for(var k=0,U=z.length,Z=new Array(U);k<U;k++)Z[k]=z[k].fn;return Z},n.prototype.listenerCount=function(T){var E=a?a+T:T,z=this._events[E];return z?z.fn?1:z.length:0},n.prototype.emit=function(T,E,z,k,U,Z){var q=a?a+T:T;if(!this._events[q])return!1;var $=this._events[q],J=arguments.length,ie,de;if($.fn){switch($.once&&this.removeListener(T,$.fn,void 0,!0),J){case 1:return $.fn.call($.context),!0;case 2:return $.fn.call($.context,E),!0;case 3:return $.fn.call($.context,E,z),!0;case 4:return $.fn.call($.context,E,z,k),!0;case 5:return $.fn.call($.context,E,z,k,U),!0;case 6:return $.fn.call($.context,E,z,k,U,Z),!0}for(de=1,ie=new Array(J-1);de<J;de++)ie[de-1]=arguments[de];$.fn.apply($.context,ie)}else{var ge=$.length,he;for(de=0;de<ge;de++)switch($[de].once&&this.removeListener(T,$[de].fn,void 0,!0),J){case 1:$[de].fn.call($[de].context);break;case 2:$[de].fn.call($[de].context,E);break;case 3:$[de].fn.call($[de].context,E,z);break;case 4:$[de].fn.call($[de].context,E,z,k);break;default:if(!ie)for(he=1,ie=new Array(J-1);he<J;he++)ie[he-1]=arguments[he];$[de].fn.apply($[de].context,ie)}}return!0},n.prototype.on=function(T,E,z){return l(this,T,E,z,!1)},n.prototype.once=function(T,E,z){return l(this,T,E,z,!0)},n.prototype.removeListener=function(T,E,z,k){var U=a?a+T:T;if(!this._events[U])return this;if(!E)return h(this,U),this;var Z=this._events[U];if(Z.fn)Z.fn===E&&(!k||Z.once)&&(!z||Z.context===z)&&h(this,U);else{for(var q=0,$=[],J=Z.length;q<J;q++)(Z[q].fn!==E||k&&!Z[q].once||z&&Z[q].context!==z)&&$.push(Z[q]);$.length?this._events[U]=$.length===1?$[0]:$:h(this,U)}return this},n.prototype.removeAllListeners=function(T){var E;return T?(E=a?a+T:T,this._events[E]&&h(this,E)):(this._events=new r,this._eventsCount=0),this},n.prototype.off=n.prototype.removeListener,n.prototype.addListener=n.prototype.on,n.prefixed=a,n.EventEmitter=n,t.exports=n}(UO)),UO.exports}var $Ce=HCe();const KCe=Ji($Ce);var kO=new KCe,BO="recharts.syncMouseEvents";function XR(t){"@babel/helpers - typeof";return XR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XR(t)}function WCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YCe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,eJ(r.key),r)}}function XCe(t,e,a){return e&&YCe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function GO(t,e,a){return e=eJ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function eJ(t){var e=JCe(t,"string");return XR(e)=="symbol"?e:e+""}function JCe(t,e){if(XR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(XR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var QCe=function(){function t(){WCe(this,t),GO(this,"activeIndex",0),GO(this,"coordinateList",[]),GO(this,"layout","horizontal")}return XCe(t,[{key:"setDetails",value:function(a){var r,s=a.coordinateList,l=s===void 0?null:s,h=a.container,n=h===void 0?null:h,w=a.layout,T=w===void 0?null:w,E=a.offset,z=E===void 0?null:E,k=a.mouseHandlerCallback,U=k===void 0?null:k;this.coordinateList=(r=l??this.coordinateList)!==null&&r!==void 0?r:[],this.container=n??this.container,this.layout=T??this.layout,this.offset=z??this.offset,this.mouseHandlerCallback=U??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(a){if(this.coordinateList.length!==0)switch(a.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(a){this.activeIndex=a}},{key:"spoofMouse",value:function(){var a,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),l=s.x,h=s.y,n=s.height,w=this.coordinateList[this.activeIndex].coordinate,T=((a=window)===null||a===void 0?void 0:a.scrollX)||0,E=((r=window)===null||r===void 0?void 0:r.scrollY)||0,z=l+w+T,k=h+this.offset.top+n/2+E;this.mouseHandlerCallback({pageX:z,pageY:k})}}}])}();function ebe(t,e,a){if(a==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],s=t==null?void 0:t[1];if(r&&s&&mr(r)&&mr(s))return!0}return!1}function tbe(t,e,a,r){var s=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-s:a.left+.5,y:t==="horizontal"?a.top+.5:e.y-s,width:t==="horizontal"?r:a.width-1,height:t==="horizontal"?a.height-1:r}}function tJ(t){var e=t.cx,a=t.cy,r=t.radius,s=t.startAngle,l=t.endAngle,h=wo(e,a,r,s),n=wo(e,a,r,l);return{points:[h,n],cx:e,cy:a,radius:r,startAngle:s,endAngle:l}}function abe(t,e,a){var r,s,l,h;if(t==="horizontal")r=e.x,l=r,s=a.top,h=a.top+a.height;else if(t==="vertical")s=e.y,h=s,r=a.left,l=a.left+a.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var n=e.cx,w=e.cy,T=e.innerRadius,E=e.outerRadius,z=e.angle,k=wo(n,w,T,z),U=wo(n,w,E,z);r=k.x,s=k.y,l=U.x,h=U.y}else return tJ(e);return[{x:r,y:s},{x:l,y:h}]}function JR(t){"@babel/helpers - typeof";return JR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},JR(t)}function V9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function gC(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?V9(Object(a),!0).forEach(function(r){rbe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):V9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function rbe(t,e,a){return e=nbe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function nbe(t){var e=ibe(t,"string");return JR(e)=="symbol"?e:e+""}function ibe(t,e){if(JR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(JR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sbe(t){var e,a,r=t.element,s=t.tooltipEventType,l=t.isActive,h=t.activeCoordinate,n=t.activePayload,w=t.offset,T=t.activeTooltipIndex,E=t.tooltipAxisBandSize,z=t.layout,k=t.chartName,U=(e=r.props.cursor)!==null&&e!==void 0?e:(a=r.type.defaultProps)===null||a===void 0?void 0:a.cursor;if(!r||!U||!l||!h||k!=="ScatterChart"&&s!=="axis")return null;var Z,q=Vg;if(k==="ScatterChart")Z=h,q=J1e;else if(k==="BarChart")Z=tbe(z,h,w,E),q=m4;else if(z==="radial"){var $=tJ(h),J=$.cx,ie=$.cy,de=$.radius,ge=$.startAngle,he=$.endAngle;Z={cx:J,cy:ie,startAngle:ge,endAngle:he,innerRadius:de,outerRadius:de},q=WY}else Z={points:abe(z,h,w)},q=Vg;var Ae=gC(gC(gC(gC({stroke:"#ccc",pointerEvents:"none"},w),Z),ln(U,!1)),{},{payload:n,payloadIndex:T,className:ci("recharts-tooltip-cursor",U.className)});return nt.isValidElement(U)?nt.cloneElement(U,Ae):nt.createElement(q,Ae)}var obe=["item"],lbe=["children","className","width","height","style","compact","title","desc"];function Vv(t){"@babel/helpers - typeof";return Vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vv(t)}function V_(){return V_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},V_.apply(this,arguments)}function z9(t,e){return dbe(t)||cbe(t,e)||rJ(t,e)||ube()}function ube(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cbe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(E){T=!0,s=E}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function dbe(t){if(Array.isArray(t))return t}function O9(t,e){if(t==null)return{};var a=hbe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function hbe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function fbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pbe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nJ(r.key),r)}}function mbe(t,e,a){return e&&pbe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ybe(t,e,a){return e=R2(e),gbe(t,aJ()?Reflect.construct(e,a||[],R2(t).constructor):e.apply(t,a))}function gbe(t,e){if(e&&(Vv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Abe(t)}function Abe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aJ=function(){return!!t})()}function R2(t){return R2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},R2(t)}function _be(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VM(t,e)}function VM(t,e){return VM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},VM(t,e)}function zv(t){return Rbe(t)||wbe(t)||rJ(t)||vbe()}function vbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rJ(t,e){if(t){if(typeof t=="string")return zM(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return zM(t,e)}}function wbe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Rbe(t){if(Array.isArray(t))return zM(t)}function zM(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function D9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Ha(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?D9(Object(a),!0).forEach(function(r){Gn(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):D9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Gn(t,e,a){return e=nJ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function nJ(t){var e=Tbe(t,"string");return Vv(e)=="symbol"?e:e+""}function Tbe(t,e){if(Vv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Vv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Sbe={xAxis:["bottom","top"],yAxis:["left","right"]},Cbe={width:"100%",height:"100%"},iJ={x:0,y:0};function AC(t){return t}var bbe=function(e,a){return a==="horizontal"?e.x:a==="vertical"?e.y:a==="centric"?e.angle:e.radius},xbe=function(e,a,r,s){var l=a.find(function(E){return E&&E.index===r});if(l){if(e==="horizontal")return{x:l.coordinate,y:s.y};if(e==="vertical")return{x:s.x,y:l.coordinate};if(e==="centric"){var h=l.coordinate,n=s.radius;return Ha(Ha(Ha({},s),wo(s.cx,s.cy,n,h)),{},{angle:h,radius:n})}var w=l.coordinate,T=s.angle;return Ha(Ha(Ha({},s),wo(s.cx,s.cy,w,T)),{},{angle:T,radius:w})}return iJ},Jx=function(e,a){var r=a.graphicalItems,s=a.dataStartIndex,l=a.dataEndIndex,h=(r??[]).reduce(function(n,w){var T=w.props.data;return T&&T.length?[].concat(zv(n),zv(T)):n},[]);return h.length>0?h:e&&e.length&&mr(s)&&mr(l)?e.slice(s,l+1):[]};function sJ(t){return t==="number"?[0,"auto"]:void 0}var OM=function(e,a,r,s){var l=e.graphicalItems,h=e.tooltipAxis,n=Jx(a,e);return r<0||!l||!l.length||r>=n.length?null:l.reduce(function(w,T){var E,z=(E=T.props.data)!==null&&E!==void 0?E:a;z&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(z=z.slice(e.dataStartIndex,e.dataEndIndex+1));var k;if(h.dataKey&&!h.allowDuplicatedCategory){var U=z===void 0?n:z;k=Rb(U,h.dataKey,s)}else k=z&&z[r]||n[r];return k?[].concat(zv(w),[jY(T,k)]):w},[])},M9=function(e,a,r,s){var l=s||{x:e.chartX,y:e.chartY},h=bbe(l,r),n=e.orderedTooltipTicks,w=e.tooltipAxis,T=e.tooltipTicks,E=T0e(h,n,T,w);if(E>=0&&T){var z=T[E]&&T[E].value,k=OM(e,a,E,z),U=xbe(r,n,E,l);return{activeTooltipIndex:E,activeLabel:z,activePayload:k,activeCoordinate:U}}return null},Pbe=function(e,a){var r=a.axes,s=a.graphicalItems,l=a.axisType,h=a.axisIdKey,n=a.stackGroups,w=a.dataStartIndex,T=a.dataEndIndex,E=e.layout,z=e.children,k=e.stackOffset,U=LY(E,l);return r.reduce(function(Z,q){var $,J=q.type.defaultProps!==void 0?Ha(Ha({},q.type.defaultProps),q.props):q.props,ie=J.type,de=J.dataKey,ge=J.allowDataOverflow,he=J.allowDuplicatedCategory,Ae=J.scale,me=J.ticks,Re=J.includeHidden,be=J[h];if(Z[be])return Z;var De=Jx(e.data,{graphicalItems:s.filter(function(Ce){var Se,$e=h in Ce.props?Ce.props[h]:(Se=Ce.type.defaultProps)===null||Se===void 0?void 0:Se[h];return $e===be}),dataStartIndex:w,dataEndIndex:T}),ne=De.length,ye,Me,ze;ebe(J.domain,ge,ie)&&(ye=ZD(J.domain,null,ge),U&&(ie==="number"||Ae!=="auto")&&(ze=Zw(De,de,"category")));var Le=sJ(ie);if(!ye||ye.length===0){var Ie,qe=(Ie=J.domain)!==null&&Ie!==void 0?Ie:Le;if(de){if(ye=Zw(De,de,ie),ie==="category"&&U){var ke=gde(ye);he&&ke?(Me=ye,ye=s2(0,ne)):he||(ye=V7(qe,ye,q).reduce(function(Ce,Se){return Ce.indexOf(Se)>=0?Ce:[].concat(zv(Ce),[Se])},[]))}else if(ie==="category")he?ye=ye.filter(function(Ce){return Ce!==""&&!Un(Ce)}):ye=V7(qe,ye,q).reduce(function(Ce,Se){return Ce.indexOf(Se)>=0||Se===""||Un(Se)?Ce:[].concat(zv(Ce),[Se])},[]);else if(ie==="number"){var tt=P0e(De,s.filter(function(Ce){var Se,$e,ft=h in Ce.props?Ce.props[h]:(Se=Ce.type.defaultProps)===null||Se===void 0?void 0:Se[h],Je="hide"in Ce.props?Ce.props.hide:($e=Ce.type.defaultProps)===null||$e===void 0?void 0:$e.hide;return ft===be&&(Re||!Je)}),de,l,E);tt&&(ye=tt)}U&&(ie==="number"||Ae!=="auto")&&(ze=Zw(De,de,"category"))}else U?ye=s2(0,ne):n&&n[be]&&n[be].hasStack&&ie==="number"?ye=k==="expand"?[0,1]:GY(n[be].stackGroups,w,T):ye=IY(De,s.filter(function(Ce){var Se=h in Ce.props?Ce.props[h]:Ce.type.defaultProps[h],$e="hide"in Ce.props?Ce.props.hide:Ce.type.defaultProps.hide;return Se===be&&(Re||!$e)}),ie,E,!0);if(ie==="number")ye=NM(z,ye,be,l,me),qe&&(ye=ZD(qe,ye,ge));else if(ie==="category"&&qe){var Ue=qe,He=ye.every(function(Ce){return Ue.indexOf(Ce)>=0});He&&(ye=Ue)}}return Ha(Ha({},Z),{},Gn({},be,Ha(Ha({},J),{},{axisType:l,domain:ye,categoricalDomain:ze,duplicateDomain:Me,originalDomain:($=J.domain)!==null&&$!==void 0?$:Le,isCategorical:U,layout:E})))},{})},Ebe=function(e,a){var r=a.graphicalItems,s=a.Axis,l=a.axisType,h=a.axisIdKey,n=a.stackGroups,w=a.dataStartIndex,T=a.dataEndIndex,E=e.layout,z=e.children,k=Jx(e.data,{graphicalItems:r,dataStartIndex:w,dataEndIndex:T}),U=k.length,Z=LY(E,l),q=-1;return r.reduce(function($,J){var ie=J.type.defaultProps!==void 0?Ha(Ha({},J.type.defaultProps),J.props):J.props,de=ie[h],ge=sJ("number");if(!$[de]){q++;var he;return Z?he=s2(0,U):n&&n[de]&&n[de].hasStack?(he=GY(n[de].stackGroups,w,T),he=NM(z,he,de,l)):(he=ZD(ge,IY(k,r.filter(function(Ae){var me,Re,be=h in Ae.props?Ae.props[h]:(me=Ae.type.defaultProps)===null||me===void 0?void 0:me[h],De="hide"in Ae.props?Ae.props.hide:(Re=Ae.type.defaultProps)===null||Re===void 0?void 0:Re.hide;return be===de&&!De}),"number",E),s.defaultProps.allowDataOverflow),he=NM(z,he,de,l)),Ha(Ha({},$),{},Gn({},de,Ha(Ha({axisType:l},s.defaultProps),{},{hide:!0,orientation:lf(Sbe,"".concat(l,".").concat(q%2),null),domain:he,originalDomain:ge,isCategorical:Z,layout:E})))}return $},{})},Nbe=function(e,a){var r=a.axisType,s=r===void 0?"xAxis":r,l=a.AxisComp,h=a.graphicalItems,n=a.stackGroups,w=a.dataStartIndex,T=a.dataEndIndex,E=e.children,z="".concat(s,"Id"),k=th(E,l),U={};return k&&k.length?U=Pbe(e,{axes:k,graphicalItems:h,axisType:s,axisIdKey:z,stackGroups:n,dataStartIndex:w,dataEndIndex:T}):h&&h.length&&(U=Ebe(e,{Axis:l,graphicalItems:h,axisType:s,axisIdKey:z,stackGroups:n,dataStartIndex:w,dataEndIndex:T})),U},Vbe=function(e){var a=vg(e),r=uy(a,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:GI(r,function(s){return s.coordinate}),tooltipAxis:a,tooltipAxisBandSize:$b(a,r)}},I9=function(e){var a=e.children,r=e.defaultShowTooltip,s=ef(a,_v),l=0,h=0;return e.data&&e.data.length!==0&&(h=e.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(l=s.props.startIndex),s.props.endIndex>=0&&(h=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:l,dataEndIndex:h,activeTooltipIndex:-1,isTooltipActive:!!r}},zbe=function(e){return!e||!e.length?!1:e.some(function(a){var r=hy(a&&a.type);return r&&r.indexOf("Bar")>=0})},L9=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Obe=function(e,a){var r=e.props,s=e.graphicalItems,l=e.xAxisMap,h=l===void 0?{}:l,n=e.yAxisMap,w=n===void 0?{}:n,T=r.width,E=r.height,z=r.children,k=r.margin||{},U=ef(z,_v),Z=ef(z,tf),q=Object.keys(w).reduce(function(he,Ae){var me=w[Ae],Re=me.orientation;return!me.mirror&&!me.hide?Ha(Ha({},he),{},Gn({},Re,he[Re]+me.width)):he},{left:k.left||0,right:k.right||0}),$=Object.keys(h).reduce(function(he,Ae){var me=h[Ae],Re=me.orientation;return!me.mirror&&!me.hide?Ha(Ha({},he),{},Gn({},Re,lf(he,"".concat(Re))+me.height)):he},{top:k.top||0,bottom:k.bottom||0}),J=Ha(Ha({},$),q),ie=J.bottom;U&&(J.bottom+=U.props.height||_v.defaultProps.height),Z&&a&&(J=b0e(J,s,r,a));var de=T-J.left-J.right,ge=E-J.top-J.bottom;return Ha(Ha({brushBottom:ie},J),{},{width:Math.max(de,0),height:Math.max(ge,0)})},Dbe=function(e,a){if(a==="xAxis")return e[a].width;if(a==="yAxis")return e[a].height},MT=function(e){var a=e.chartName,r=e.GraphicalChild,s=e.defaultTooltipEventType,l=s===void 0?"axis":s,h=e.validateTooltipEventTypes,n=h===void 0?["axis"]:h,w=e.axisComponents,T=e.legendContent,E=e.formatAxisMap,z=e.defaultProps,k=function(J,ie){var de=ie.graphicalItems,ge=ie.stackGroups,he=ie.offset,Ae=ie.updateId,me=ie.dataStartIndex,Re=ie.dataEndIndex,be=J.barSize,De=J.layout,ne=J.barGap,ye=J.barCategoryGap,Me=J.maxBarSize,ze=L9(De),Le=ze.numericAxisName,Ie=ze.cateAxisName,qe=zbe(de),ke=[];return de.forEach(function(tt,Ue){var He=Jx(J.data,{graphicalItems:[tt],dataStartIndex:me,dataEndIndex:Re}),Ce=tt.type.defaultProps!==void 0?Ha(Ha({},tt.type.defaultProps),tt.props):tt.props,Se=Ce.dataKey,$e=Ce.maxBarSize,ft=Ce["".concat(Le,"Id")],Je=Ce["".concat(Ie,"Id")],wt={},it=w.reduce(function(cr,ur){var Pr=ie["".concat(ur.axisType,"Map")],ka=Ce["".concat(ur.axisType,"Id")];Pr&&Pr[ka]||ur.axisType==="zAxis"||h0();var jr=Pr[ka];return Ha(Ha({},cr),{},Gn(Gn({},ur.axisType,jr),"".concat(ur.axisType,"Ticks"),uy(jr)))},wt),ct=it[Ie],_e=it["".concat(Ie,"Ticks")],Jt=ge&&ge[ft]&&ge[ft].hasStack&&L0e(tt,ge[ft].stackGroups),Zt=hy(tt.type).indexOf("Bar")>=0,Pa=$b(ct,_e),Bt=[],la=qe&&S0e({barSize:be,stackGroups:ge,totalSize:Dbe(it,Ie)});if(Zt){var Rt,yr,za=Un($e)?Me:$e,Va=(Rt=(yr=$b(ct,_e,!0))!==null&&yr!==void 0?yr:za)!==null&&Rt!==void 0?Rt:0;Bt=C0e({barGap:ne,barCategoryGap:ye,bandSize:Va!==Pa?Va:Pa,sizeList:la[Je],maxBarSize:za}),Va!==Pa&&(Bt=Bt.map(function(cr){return Ha(Ha({},cr),{},{position:Ha(Ha({},cr.position),{},{offset:cr.position.offset-Va/2})})}))}var er=tt&&tt.type&&tt.type.getComposedData;er&&ke.push({props:Ha(Ha({},er(Ha(Ha({},it),{},{displayedData:He,props:J,dataKey:Se,item:tt,bandSize:Pa,barPosition:Bt,offset:he,stackedData:Jt,layout:De,dataStartIndex:me,dataEndIndex:Re}))),{},Gn(Gn(Gn({key:tt.key||"item-".concat(Ue)},Le,it[Le]),Ie,it[Ie]),"animationId",Ae)),childIndex:Ede(tt,J.children),item:tt})}),ke},U=function(J,ie){var de=J.props,ge=J.dataStartIndex,he=J.dataEndIndex,Ae=J.updateId;if(!Hk({props:de}))return null;var me=de.children,Re=de.layout,be=de.stackOffset,De=de.data,ne=de.reverseStackOrder,ye=L9(Re),Me=ye.numericAxisName,ze=ye.cateAxisName,Le=th(me,r),Ie=M0e(De,Le,"".concat(Me,"Id"),"".concat(ze,"Id"),be,ne),qe=w.reduce(function(Ce,Se){var $e="".concat(Se.axisType,"Map");return Ha(Ha({},Ce),{},Gn({},$e,Nbe(de,Ha(Ha({},Se),{},{graphicalItems:Le,stackGroups:Se.axisType===Me&&Ie,dataStartIndex:ge,dataEndIndex:he}))))},{}),ke=Obe(Ha(Ha({},qe),{},{props:de,graphicalItems:Le}),ie==null?void 0:ie.legendBBox);Object.keys(qe).forEach(function(Ce){qe[Ce]=E(de,qe[Ce],ke,Ce.replace("Map",""),a)});var tt=qe["".concat(ze,"Map")],Ue=Vbe(tt),He=k(de,Ha(Ha({},qe),{},{dataStartIndex:ge,dataEndIndex:he,updateId:Ae,graphicalItems:Le,stackGroups:Ie,offset:ke}));return Ha(Ha({formattedGraphicalItems:He,graphicalItems:Le,offset:ke,stackGroups:Ie},Ue),qe)},Z=function($){function J(ie){var de,ge,he;return fbe(this,J),he=ybe(this,J,[ie]),Gn(he,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Gn(he,"accessibilityManager",new QCe),Gn(he,"handleLegendBBoxUpdate",function(Ae){if(Ae){var me=he.state,Re=me.dataStartIndex,be=me.dataEndIndex,De=me.updateId;he.setState(Ha({legendBBox:Ae},U({props:he.props,dataStartIndex:Re,dataEndIndex:be,updateId:De},Ha(Ha({},he.state),{},{legendBBox:Ae}))))}}),Gn(he,"handleReceiveSyncEvent",function(Ae,me,Re){if(he.props.syncId===Ae){if(Re===he.eventEmitterSymbol&&typeof he.props.syncMethod!="function")return;he.applySyncEvent(me)}}),Gn(he,"handleBrushChange",function(Ae){var me=Ae.startIndex,Re=Ae.endIndex;if(me!==he.state.dataStartIndex||Re!==he.state.dataEndIndex){var be=he.state.updateId;he.setState(function(){return Ha({dataStartIndex:me,dataEndIndex:Re},U({props:he.props,dataStartIndex:me,dataEndIndex:Re,updateId:be},he.state))}),he.triggerSyncEvent({dataStartIndex:me,dataEndIndex:Re})}}),Gn(he,"handleMouseEnter",function(Ae){var me=he.getMouseInfo(Ae);if(me){var Re=Ha(Ha({},me),{},{isTooltipActive:!0});he.setState(Re),he.triggerSyncEvent(Re);var be=he.props.onMouseEnter;Fn(be)&&be(Re,Ae)}}),Gn(he,"triggeredAfterMouseMove",function(Ae){var me=he.getMouseInfo(Ae),Re=me?Ha(Ha({},me),{},{isTooltipActive:!0}):{isTooltipActive:!1};he.setState(Re),he.triggerSyncEvent(Re);var be=he.props.onMouseMove;Fn(be)&&be(Re,Ae)}),Gn(he,"handleItemMouseEnter",function(Ae){he.setState(function(){return{isTooltipActive:!0,activeItem:Ae,activePayload:Ae.tooltipPayload,activeCoordinate:Ae.tooltipPosition||{x:Ae.cx,y:Ae.cy}}})}),Gn(he,"handleItemMouseLeave",function(){he.setState(function(){return{isTooltipActive:!1}})}),Gn(he,"handleMouseMove",function(Ae){Ae.persist(),he.throttleTriggeredAfterMouseMove(Ae)}),Gn(he,"handleMouseLeave",function(Ae){he.throttleTriggeredAfterMouseMove.cancel();var me={isTooltipActive:!1};he.setState(me),he.triggerSyncEvent(me);var Re=he.props.onMouseLeave;Fn(Re)&&Re(me,Ae)}),Gn(he,"handleOuterEvent",function(Ae){var me=Pde(Ae),Re=lf(he.props,"".concat(me));if(me&&Fn(Re)){var be,De;/.*touch.*/i.test(me)?De=he.getMouseInfo(Ae.changedTouches[0]):De=he.getMouseInfo(Ae),Re((be=De)!==null&&be!==void 0?be:{},Ae)}}),Gn(he,"handleClick",function(Ae){var me=he.getMouseInfo(Ae);if(me){var Re=Ha(Ha({},me),{},{isTooltipActive:!0});he.setState(Re),he.triggerSyncEvent(Re);var be=he.props.onClick;Fn(be)&&be(Re,Ae)}}),Gn(he,"handleMouseDown",function(Ae){var me=he.props.onMouseDown;if(Fn(me)){var Re=he.getMouseInfo(Ae);me(Re,Ae)}}),Gn(he,"handleMouseUp",function(Ae){var me=he.props.onMouseUp;if(Fn(me)){var Re=he.getMouseInfo(Ae);me(Re,Ae)}}),Gn(he,"handleTouchMove",function(Ae){Ae.changedTouches!=null&&Ae.changedTouches.length>0&&he.throttleTriggeredAfterMouseMove(Ae.changedTouches[0])}),Gn(he,"handleTouchStart",function(Ae){Ae.changedTouches!=null&&Ae.changedTouches.length>0&&he.handleMouseDown(Ae.changedTouches[0])}),Gn(he,"handleTouchEnd",function(Ae){Ae.changedTouches!=null&&Ae.changedTouches.length>0&&he.handleMouseUp(Ae.changedTouches[0])}),Gn(he,"handleDoubleClick",function(Ae){var me=he.props.onDoubleClick;if(Fn(me)){var Re=he.getMouseInfo(Ae);me(Re,Ae)}}),Gn(he,"handleContextMenu",function(Ae){var me=he.props.onContextMenu;if(Fn(me)){var Re=he.getMouseInfo(Ae);me(Re,Ae)}}),Gn(he,"triggerSyncEvent",function(Ae){he.props.syncId!==void 0&&kO.emit(BO,he.props.syncId,Ae,he.eventEmitterSymbol)}),Gn(he,"applySyncEvent",function(Ae){var me=he.props,Re=me.layout,be=me.syncMethod,De=he.state.updateId,ne=Ae.dataStartIndex,ye=Ae.dataEndIndex;if(Ae.dataStartIndex!==void 0||Ae.dataEndIndex!==void 0)he.setState(Ha({dataStartIndex:ne,dataEndIndex:ye},U({props:he.props,dataStartIndex:ne,dataEndIndex:ye,updateId:De},he.state)));else if(Ae.activeTooltipIndex!==void 0){var Me=Ae.chartX,ze=Ae.chartY,Le=Ae.activeTooltipIndex,Ie=he.state,qe=Ie.offset,ke=Ie.tooltipTicks;if(!qe)return;if(typeof be=="function")Le=be(ke,Ae);else if(be==="value"){Le=-1;for(var tt=0;tt<ke.length;tt++)if(ke[tt].value===Ae.activeLabel){Le=tt;break}}var Ue=Ha(Ha({},qe),{},{x:qe.left,y:qe.top}),He=Math.min(Me,Ue.x+Ue.width),Ce=Math.min(ze,Ue.y+Ue.height),Se=ke[Le]&&ke[Le].value,$e=OM(he.state,he.props.data,Le),ft=ke[Le]?{x:Re==="horizontal"?ke[Le].coordinate:He,y:Re==="horizontal"?Ce:ke[Le].coordinate}:iJ;he.setState(Ha(Ha({},Ae),{},{activeLabel:Se,activeCoordinate:ft,activePayload:$e,activeTooltipIndex:Le}))}else he.setState(Ae)}),Gn(he,"renderCursor",function(Ae){var me,Re=he.state,be=Re.isTooltipActive,De=Re.activeCoordinate,ne=Re.activePayload,ye=Re.offset,Me=Re.activeTooltipIndex,ze=Re.tooltipAxisBandSize,Le=he.getTooltipEventType(),Ie=(me=Ae.props.active)!==null&&me!==void 0?me:be,qe=he.props.layout,ke=Ae.key||"_recharts-cursor";return Vt.createElement(sbe,{key:ke,activeCoordinate:De,activePayload:ne,activeTooltipIndex:Me,chartName:a,element:Ae,isActive:Ie,layout:qe,offset:ye,tooltipAxisBandSize:ze,tooltipEventType:Le})}),Gn(he,"renderPolarAxis",function(Ae,me,Re){var be=lf(Ae,"type.axisType"),De=lf(he.state,"".concat(be,"Map")),ne=Ae.type.defaultProps,ye=ne!==void 0?Ha(Ha({},ne),Ae.props):Ae.props,Me=De&&De[ye["".concat(be,"Id")]];return nt.cloneElement(Ae,Ha(Ha({},Me),{},{className:ci(be,Me.className),key:Ae.key||"".concat(me,"-").concat(Re),ticks:uy(Me,!0)}))}),Gn(he,"renderPolarGrid",function(Ae){var me=Ae.props,Re=me.radialLines,be=me.polarAngles,De=me.polarRadius,ne=he.state,ye=ne.radiusAxisMap,Me=ne.angleAxisMap,ze=vg(ye),Le=vg(Me),Ie=Le.cx,qe=Le.cy,ke=Le.innerRadius,tt=Le.outerRadius;return nt.cloneElement(Ae,{polarAngles:Array.isArray(be)?be:uy(Le,!0).map(function(Ue){return Ue.coordinate}),polarRadius:Array.isArray(De)?De:uy(ze,!0).map(function(Ue){return Ue.coordinate}),cx:Ie,cy:qe,innerRadius:ke,outerRadius:tt,key:Ae.key||"polar-grid",radialLines:Re})}),Gn(he,"renderLegend",function(){var Ae=he.state.formattedGraphicalItems,me=he.props,Re=me.children,be=me.width,De=me.height,ne=he.props.margin||{},ye=be-(ne.left||0)-(ne.right||0),Me=DY({children:Re,formattedGraphicalItems:Ae,legendWidth:ye,legendContent:T});if(!Me)return null;var ze=Me.item,Le=O9(Me,obe);return nt.cloneElement(ze,Ha(Ha({},Le),{},{chartWidth:be,chartHeight:De,margin:ne,onBBoxUpdate:he.handleLegendBBoxUpdate}))}),Gn(he,"renderTooltip",function(){var Ae,me=he.props,Re=me.children,be=me.accessibilityLayer,De=ef(Re,ou);if(!De)return null;var ne=he.state,ye=ne.isTooltipActive,Me=ne.activeCoordinate,ze=ne.activePayload,Le=ne.activeLabel,Ie=ne.offset,qe=(Ae=De.props.active)!==null&&Ae!==void 0?Ae:ye;return nt.cloneElement(De,{viewBox:Ha(Ha({},Ie),{},{x:Ie.left,y:Ie.top}),active:qe,label:Le,payload:qe?ze:[],coordinate:Me,accessibilityLayer:be})}),Gn(he,"renderBrush",function(Ae){var me=he.props,Re=me.margin,be=me.data,De=he.state,ne=De.offset,ye=De.dataStartIndex,Me=De.dataEndIndex,ze=De.updateId;return nt.cloneElement(Ae,{key:Ae.key||"_recharts-brush",onChange:fC(he.handleBrushChange,Ae.props.onChange),data:be,x:mr(Ae.props.x)?Ae.props.x:ne.left,y:mr(Ae.props.y)?Ae.props.y:ne.top+ne.height+ne.brushBottom-(Re.bottom||0),width:mr(Ae.props.width)?Ae.props.width:ne.width,startIndex:ye,endIndex:Me,updateId:"brush-".concat(ze)})}),Gn(he,"renderReferenceElement",function(Ae,me,Re){if(!Ae)return null;var be=he,De=be.clipPathId,ne=he.state,ye=ne.xAxisMap,Me=ne.yAxisMap,ze=ne.offset,Le=Ae.type.defaultProps||{},Ie=Ae.props,qe=Ie.xAxisId,ke=qe===void 0?Le.xAxisId:qe,tt=Ie.yAxisId,Ue=tt===void 0?Le.yAxisId:tt;return nt.cloneElement(Ae,{key:Ae.key||"".concat(me,"-").concat(Re),xAxis:ye[ke],yAxis:Me[Ue],viewBox:{x:ze.left,y:ze.top,width:ze.width,height:ze.height},clipPathId:De})}),Gn(he,"renderActivePoints",function(Ae){var me=Ae.item,Re=Ae.activePoint,be=Ae.basePoint,De=Ae.childIndex,ne=Ae.isRange,ye=[],Me=me.props.key,ze=me.item.type.defaultProps!==void 0?Ha(Ha({},me.item.type.defaultProps),me.item.props):me.item.props,Le=ze.activeDot,Ie=ze.dataKey,qe=Ha(Ha({index:De,dataKey:Ie,cx:Re.x,cy:Re.y,r:4,fill:p4(me.item),strokeWidth:2,stroke:"#fff",payload:Re.payload,value:Re.value},ln(Le,!1)),Tb(Le));return ye.push(J.renderActiveDot(Le,qe,"".concat(Me,"-activePoint-").concat(De))),be?ye.push(J.renderActiveDot(Le,Ha(Ha({},qe),{},{cx:be.x,cy:be.y}),"".concat(Me,"-basePoint-").concat(De))):ne&&ye.push(null),ye}),Gn(he,"renderGraphicChild",function(Ae,me,Re){var be=he.filterFormatItem(Ae,me,Re);if(!be)return null;var De=he.getTooltipEventType(),ne=he.state,ye=ne.isTooltipActive,Me=ne.tooltipAxis,ze=ne.activeTooltipIndex,Le=ne.activeLabel,Ie=he.props.children,qe=ef(Ie,ou),ke=be.props,tt=ke.points,Ue=ke.isRange,He=ke.baseLine,Ce=be.item.type.defaultProps!==void 0?Ha(Ha({},be.item.type.defaultProps),be.item.props):be.item.props,Se=Ce.activeDot,$e=Ce.hide,ft=Ce.activeBar,Je=Ce.activeShape,wt=!!(!$e&&ye&&qe&&(Se||ft||Je)),it={};De!=="axis"&&qe&&qe.props.trigger==="click"?it={onClick:fC(he.handleItemMouseEnter,Ae.props.onClick)}:De!=="axis"&&(it={onMouseLeave:fC(he.handleItemMouseLeave,Ae.props.onMouseLeave),onMouseEnter:fC(he.handleItemMouseEnter,Ae.props.onMouseEnter)});var ct=nt.cloneElement(Ae,Ha(Ha({},be.props),it));function _e(ur){return typeof Me.dataKey=="function"?Me.dataKey(ur.payload):null}if(wt)if(ze>=0){var Jt,Zt;if(Me.dataKey&&!Me.allowDuplicatedCategory){var Pa=typeof Me.dataKey=="function"?_e:"payload.".concat(Me.dataKey.toString());Jt=Rb(tt,Pa,Le),Zt=Ue&&He&&Rb(He,Pa,Le)}else Jt=tt==null?void 0:tt[ze],Zt=Ue&&He&&He[ze];if(Je||ft){var Bt=Ae.props.activeIndex!==void 0?Ae.props.activeIndex:ze;return[nt.cloneElement(Ae,Ha(Ha(Ha({},be.props),it),{},{activeIndex:Bt})),null,null]}if(!Un(Jt))return[ct].concat(zv(he.renderActivePoints({item:be,activePoint:Jt,basePoint:Zt,childIndex:ze,isRange:Ue})))}else{var la,Rt=(la=he.getItemByXY(he.state.activeCoordinate))!==null&&la!==void 0?la:{graphicalItem:ct},yr=Rt.graphicalItem,za=yr.item,Va=za===void 0?Ae:za,er=yr.childIndex,cr=Ha(Ha(Ha({},be.props),it),{},{activeIndex:er});return[nt.cloneElement(Va,cr),null,null]}return Ue?[ct,null,null]:[ct,null]}),Gn(he,"renderCustomized",function(Ae,me,Re){return nt.cloneElement(Ae,Ha(Ha({key:"recharts-customized-".concat(Re)},he.props),he.state))}),Gn(he,"renderMap",{CartesianGrid:{handler:AC,once:!0},ReferenceArea:{handler:he.renderReferenceElement},ReferenceLine:{handler:AC},ReferenceDot:{handler:he.renderReferenceElement},XAxis:{handler:AC},YAxis:{handler:AC},Brush:{handler:he.renderBrush,once:!0},Bar:{handler:he.renderGraphicChild},Line:{handler:he.renderGraphicChild},Area:{handler:he.renderGraphicChild},Radar:{handler:he.renderGraphicChild},RadialBar:{handler:he.renderGraphicChild},Scatter:{handler:he.renderGraphicChild},Pie:{handler:he.renderGraphicChild},Funnel:{handler:he.renderGraphicChild},Tooltip:{handler:he.renderCursor,once:!0},PolarGrid:{handler:he.renderPolarGrid,once:!0},PolarAngleAxis:{handler:he.renderPolarAxis},PolarRadiusAxis:{handler:he.renderPolarAxis},Customized:{handler:he.renderCustomized}}),he.clipPathId="".concat((de=ie.id)!==null&&de!==void 0?de:qg("recharts"),"-clip"),he.throttleTriggeredAfterMouseMove=OW(he.triggeredAfterMouseMove,(ge=ie.throttleDelay)!==null&&ge!==void 0?ge:1e3/60),he.state={},he}return _be(J,$),mbe(J,[{key:"componentDidMount",value:function(){var de,ge;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(de=this.props.margin.left)!==null&&de!==void 0?de:0,top:(ge=this.props.margin.top)!==null&&ge!==void 0?ge:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var de=this.props,ge=de.children,he=de.data,Ae=de.height,me=de.layout,Re=ef(ge,ou);if(Re){var be=Re.props.defaultIndex;if(!(typeof be!="number"||be<0||be>this.state.tooltipTicks.length-1)){var De=this.state.tooltipTicks[be]&&this.state.tooltipTicks[be].value,ne=OM(this.state,he,be,De),ye=this.state.tooltipTicks[be].coordinate,Me=(this.state.offset.top+Ae)/2,ze=me==="horizontal",Le=ze?{x:ye,y:Me}:{y:ye,x:Me},Ie=this.state.formattedGraphicalItems.find(function(ke){var tt=ke.item;return tt.type.name==="Scatter"});Ie&&(Le=Ha(Ha({},Le),Ie.props.points[be].tooltipPosition),ne=Ie.props.points[be].tooltipPayload);var qe={activeTooltipIndex:be,isTooltipActive:!0,activeLabel:De,activePayload:ne,activeCoordinate:Le};this.setState(qe),this.renderCursor(Re),this.accessibilityManager.setIndex(be)}}}},{key:"getSnapshotBeforeUpdate",value:function(de,ge){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==ge.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==de.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==de.margin){var he,Ae;this.accessibilityManager.setDetails({offset:{left:(he=this.props.margin.left)!==null&&he!==void 0?he:0,top:(Ae=this.props.margin.top)!==null&&Ae!==void 0?Ae:0}})}return null}},{key:"componentDidUpdate",value:function(de){hD([ef(de.children,ou)],[ef(this.props.children,ou)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var de=ef(this.props.children,ou);if(de&&typeof de.props.shared=="boolean"){var ge=de.props.shared?"axis":"item";return n.indexOf(ge)>=0?ge:l}return l}},{key:"getMouseInfo",value:function(de){if(!this.container)return null;var ge=this.container,he=ge.getBoundingClientRect(),Ae=mme(he),me={chartX:Math.round(de.pageX-Ae.left),chartY:Math.round(de.pageY-Ae.top)},Re=he.width/ge.offsetWidth||1,be=this.inRange(me.chartX,me.chartY,Re);if(!be)return null;var De=this.state,ne=De.xAxisMap,ye=De.yAxisMap,Me=this.getTooltipEventType();if(Me!=="axis"&&ne&&ye){var ze=vg(ne).scale,Le=vg(ye).scale,Ie=ze&&ze.invert?ze.invert(me.chartX):null,qe=Le&&Le.invert?Le.invert(me.chartY):null;return Ha(Ha({},me),{},{xValue:Ie,yValue:qe})}var ke=M9(this.state,this.props.data,this.props.layout,be);return ke?Ha(Ha({},me),ke):null}},{key:"inRange",value:function(de,ge){var he=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,Ae=this.props.layout,me=de/he,Re=ge/he;if(Ae==="horizontal"||Ae==="vertical"){var be=this.state.offset,De=me>=be.left&&me<=be.left+be.width&&Re>=be.top&&Re<=be.top+be.height;return De?{x:me,y:Re}:null}var ne=this.state,ye=ne.angleAxisMap,Me=ne.radiusAxisMap;if(ye&&Me){var ze=vg(ye);return D7({x:me,y:Re},ze)}return null}},{key:"parseEventsOfWrapper",value:function(){var de=this.props.children,ge=this.getTooltipEventType(),he=ef(de,ou),Ae={};he&&ge==="axis"&&(he.props.trigger==="click"?Ae={onClick:this.handleClick}:Ae={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var me=Tb(this.props,this.handleOuterEvent);return Ha(Ha({},me),Ae)}},{key:"addListener",value:function(){kO.on(BO,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){kO.removeListener(BO,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(de,ge,he){for(var Ae=this.state.formattedGraphicalItems,me=0,Re=Ae.length;me<Re;me++){var be=Ae[me];if(be.item===de||be.props.key===de.key||ge===hy(be.item.type)&&he===be.childIndex)return be}return null}},{key:"renderClipPath",value:function(){var de=this.clipPathId,ge=this.state.offset,he=ge.left,Ae=ge.top,me=ge.height,Re=ge.width;return Vt.createElement("defs",null,Vt.createElement("clipPath",{id:de},Vt.createElement("rect",{x:he,y:Ae,height:me,width:Re})))}},{key:"getXScales",value:function(){var de=this.state.xAxisMap;return de?Object.entries(de).reduce(function(ge,he){var Ae=z9(he,2),me=Ae[0],Re=Ae[1];return Ha(Ha({},ge),{},Gn({},me,Re.scale))},{}):null}},{key:"getYScales",value:function(){var de=this.state.yAxisMap;return de?Object.entries(de).reduce(function(ge,he){var Ae=z9(he,2),me=Ae[0],Re=Ae[1];return Ha(Ha({},ge),{},Gn({},me,Re.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(de){var ge;return(ge=this.state.xAxisMap)===null||ge===void 0||(ge=ge[de])===null||ge===void 0?void 0:ge.scale}},{key:"getYScaleByAxisId",value:function(de){var ge;return(ge=this.state.yAxisMap)===null||ge===void 0||(ge=ge[de])===null||ge===void 0?void 0:ge.scale}},{key:"getItemByXY",value:function(de){var ge=this.state,he=ge.formattedGraphicalItems,Ae=ge.activeItem;if(he&&he.length)for(var me=0,Re=he.length;me<Re;me++){var be=he[me],De=be.props,ne=be.item,ye=ne.type.defaultProps!==void 0?Ha(Ha({},ne.type.defaultProps),ne.props):ne.props,Me=hy(ne.type);if(Me==="Bar"){var ze=(De.data||[]).find(function(ke){return z1e(de,ke)});if(ze)return{graphicalItem:be,payload:ze}}else if(Me==="RadialBar"){var Le=(De.data||[]).find(function(ke){return D7(de,ke)});if(Le)return{graphicalItem:be,payload:Le}}else if(Gx(be,Ae)||jx(be,Ae)||HR(be,Ae)){var Ie=aRe({graphicalItem:be,activeTooltipItem:Ae,itemData:ye.data}),qe=ye.activeIndex===void 0?Ie:ye.activeIndex;return{graphicalItem:Ha(Ha({},be),{},{childIndex:qe}),payload:HR(be,Ae)?ye.data[Ie]:be.props.data[Ie]}}}return null}},{key:"render",value:function(){var de=this;if(!Hk(this))return null;var ge=this.props,he=ge.children,Ae=ge.className,me=ge.width,Re=ge.height,be=ge.style,De=ge.compact,ne=ge.title,ye=ge.desc,Me=O9(ge,lbe),ze=ln(Me,!1);if(De)return Vt.createElement(u9,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Vt.createElement(pD,V_({},ze,{width:me,height:Re,title:ne,desc:ye}),this.renderClipPath(),Kk(he,this.renderMap)));if(this.props.accessibilityLayer){var Le,Ie;ze.tabIndex=(Le=this.props.tabIndex)!==null&&Le!==void 0?Le:0,ze.role=(Ie=this.props.role)!==null&&Ie!==void 0?Ie:"application",ze.onKeyDown=function(ke){de.accessibilityManager.keyboardEvent(ke)},ze.onFocus=function(){de.accessibilityManager.focus()}}var qe=this.parseEventsOfWrapper();return Vt.createElement(u9,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Vt.createElement("div",V_({className:ci("recharts-wrapper",Ae),style:Ha({position:"relative",cursor:"default",width:me,height:Re},be)},qe,{ref:function(tt){de.container=tt}}),Vt.createElement(pD,V_({},ze,{width:me,height:Re,title:ne,desc:ye,style:Cbe}),this.renderClipPath(),Kk(he,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(nt.Component);Gn(Z,"displayName",a),Gn(Z,"defaultProps",Ha({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},z)),Gn(Z,"getDerivedStateFromProps",function($,J){var ie=$.dataKey,de=$.data,ge=$.children,he=$.width,Ae=$.height,me=$.layout,Re=$.stackOffset,be=$.margin,De=J.dataStartIndex,ne=J.dataEndIndex;if(J.updateId===void 0){var ye=I9($);return Ha(Ha(Ha({},ye),{},{updateId:0},U(Ha(Ha({props:$},ye),{},{updateId:0}),J)),{},{prevDataKey:ie,prevData:de,prevWidth:he,prevHeight:Ae,prevLayout:me,prevStackOffset:Re,prevMargin:be,prevChildren:ge})}if(ie!==J.prevDataKey||de!==J.prevData||he!==J.prevWidth||Ae!==J.prevHeight||me!==J.prevLayout||Re!==J.prevStackOffset||!k_(be,J.prevMargin)){var Me=I9($),ze={chartX:J.chartX,chartY:J.chartY,isTooltipActive:J.isTooltipActive},Le=Ha(Ha({},M9(J,de,me)),{},{updateId:J.updateId+1}),Ie=Ha(Ha(Ha({},Me),ze),Le);return Ha(Ha(Ha({},Ie),U(Ha({props:$},Ie),J)),{},{prevDataKey:ie,prevData:de,prevWidth:he,prevHeight:Ae,prevLayout:me,prevStackOffset:Re,prevMargin:be,prevChildren:ge})}if(!hD(ge,J.prevChildren)){var qe,ke,tt,Ue,He=ef(ge,_v),Ce=He&&(qe=(ke=He.props)===null||ke===void 0?void 0:ke.startIndex)!==null&&qe!==void 0?qe:De,Se=He&&(tt=(Ue=He.props)===null||Ue===void 0?void 0:Ue.endIndex)!==null&&tt!==void 0?tt:ne,$e=Ce!==De||Se!==ne,ft=!Un(de),Je=ft&&!$e?J.updateId:J.updateId+1;return Ha(Ha({updateId:Je},U(Ha(Ha({props:$},J),{},{updateId:Je,dataStartIndex:Ce,dataEndIndex:Se}),J)),{},{prevChildren:ge,dataStartIndex:Ce,dataEndIndex:Se})}return null}),Gn(Z,"renderActiveDot",function($,J,ie){var de;return nt.isValidElement($)?de=nt.cloneElement($,J):Fn($)?de=$(J):de=Vt.createElement(DT,J),Vt.createElement(fi,{className:"recharts-active-dot",key:ie},de)});var q=nt.forwardRef(function(J,ie){return Vt.createElement(Z,V_({},J,{ref:ie}))});return q.displayName=Z.displayName,q},Mbe=MT({chartName:"LineChart",GraphicalChild:T0,axisComponents:[{axisType:"xAxis",AxisComp:od},{axisType:"yAxis",AxisComp:ld}],formatAxisMap:qx}),DM=MT({chartName:"BarChart",GraphicalChild:Ip,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:od},{axisType:"yAxis",AxisComp:ld}],formatAxisMap:qx}),Ibe=MT({chartName:"PieChart",GraphicalChild:Ny,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Bx},{axisType:"radiusAxis",AxisComp:Ux}],formatAxisMap:$0e,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),vw=MT({chartName:"AreaChart",GraphicalChild:rf,axisComponents:[{axisType:"xAxis",AxisComp:od},{axisType:"yAxis",AxisComp:ld}],formatAxisMap:qx}),Lbe=MT({chartName:"ComposedChart",GraphicalChild:[T0,rf,Ip,Xx],axisComponents:[{axisType:"xAxis",AxisComp:od},{axisType:"yAxis",AxisComp:ld},{axisType:"zAxis",AxisComp:Yx}],formatAxisMap:qx}),UC={exports:{}},Fbe=UC.exports,F9;function Ube(){return F9||(F9=1,function(t,e){(function(a,r){t.exports=r()})(Fbe,function(){var a=1e3,r=6e4,s=36e5,l="millisecond",h="second",n="minute",w="hour",T="day",E="week",z="month",k="quarter",U="year",Z="date",q="Invalid Date",$=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,J=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,ie={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(ze){var Le=["th","st","nd","rd"],Ie=ze%100;return"["+ze+(Le[(Ie-20)%10]||Le[Ie]||Le[0])+"]"}},de=function(ze,Le,Ie){var qe=String(ze);return!qe||qe.length>=Le?ze:""+Array(Le+1-qe.length).join(Ie)+ze},ge={s:de,z:function(ze){var Le=-ze.utcOffset(),Ie=Math.abs(Le),qe=Math.floor(Ie/60),ke=Ie%60;return(Le<=0?"+":"-")+de(qe,2,"0")+":"+de(ke,2,"0")},m:function ze(Le,Ie){if(Le.date()<Ie.date())return-ze(Ie,Le);var qe=12*(Ie.year()-Le.year())+(Ie.month()-Le.month()),ke=Le.clone().add(qe,z),tt=Ie-ke<0,Ue=Le.clone().add(qe+(tt?-1:1),z);return+(-(qe+(Ie-ke)/(tt?ke-Ue:Ue-ke))||0)},a:function(ze){return ze<0?Math.ceil(ze)||0:Math.floor(ze)},p:function(ze){return{M:z,y:U,w:E,d:T,D:Z,h:w,m:n,s:h,ms:l,Q:k}[ze]||String(ze||"").toLowerCase().replace(/s$/,"")},u:function(ze){return ze===void 0}},he="en",Ae={};Ae[he]=ie;var me="$isDayjsObject",Re=function(ze){return ze instanceof ye||!(!ze||!ze[me])},be=function ze(Le,Ie,qe){var ke;if(!Le)return he;if(typeof Le=="string"){var tt=Le.toLowerCase();Ae[tt]&&(ke=tt),Ie&&(Ae[tt]=Ie,ke=tt);var Ue=Le.split("-");if(!ke&&Ue.length>1)return ze(Ue[0])}else{var He=Le.name;Ae[He]=Le,ke=He}return!qe&&ke&&(he=ke),ke||!qe&&he},De=function(ze,Le){if(Re(ze))return ze.clone();var Ie=typeof Le=="object"?Le:{};return Ie.date=ze,Ie.args=arguments,new ye(Ie)},ne=ge;ne.l=be,ne.i=Re,ne.w=function(ze,Le){return De(ze,{locale:Le.$L,utc:Le.$u,x:Le.$x,$offset:Le.$offset})};var ye=function(){function ze(Ie){this.$L=be(Ie.locale,null,!0),this.parse(Ie),this.$x=this.$x||Ie.x||{},this[me]=!0}var Le=ze.prototype;return Le.parse=function(Ie){this.$d=function(qe){var ke=qe.date,tt=qe.utc;if(ke===null)return new Date(NaN);if(ne.u(ke))return new Date;if(ke instanceof Date)return new Date(ke);if(typeof ke=="string"&&!/Z$/i.test(ke)){var Ue=ke.match($);if(Ue){var He=Ue[2]-1||0,Ce=(Ue[7]||"0").substring(0,3);return tt?new Date(Date.UTC(Ue[1],He,Ue[3]||1,Ue[4]||0,Ue[5]||0,Ue[6]||0,Ce)):new Date(Ue[1],He,Ue[3]||1,Ue[4]||0,Ue[5]||0,Ue[6]||0,Ce)}}return new Date(ke)}(Ie),this.init()},Le.init=function(){var Ie=this.$d;this.$y=Ie.getFullYear(),this.$M=Ie.getMonth(),this.$D=Ie.getDate(),this.$W=Ie.getDay(),this.$H=Ie.getHours(),this.$m=Ie.getMinutes(),this.$s=Ie.getSeconds(),this.$ms=Ie.getMilliseconds()},Le.$utils=function(){return ne},Le.isValid=function(){return this.$d.toString()!==q},Le.isSame=function(Ie,qe){var ke=De(Ie);return this.startOf(qe)<=ke&&ke<=this.endOf(qe)},Le.isAfter=function(Ie,qe){return De(Ie)<this.startOf(qe)},Le.isBefore=function(Ie,qe){return this.endOf(qe)<De(Ie)},Le.$g=function(Ie,qe,ke){return ne.u(Ie)?this[qe]:this.set(ke,Ie)},Le.unix=function(){return Math.floor(this.valueOf()/1e3)},Le.valueOf=function(){return this.$d.getTime()},Le.startOf=function(Ie,qe){var ke=this,tt=!!ne.u(qe)||qe,Ue=ne.p(Ie),He=function(ct,_e){var Jt=ne.w(ke.$u?Date.UTC(ke.$y,_e,ct):new Date(ke.$y,_e,ct),ke);return tt?Jt:Jt.endOf(T)},Ce=function(ct,_e){return ne.w(ke.toDate()[ct].apply(ke.toDate("s"),(tt?[0,0,0,0]:[23,59,59,999]).slice(_e)),ke)},Se=this.$W,$e=this.$M,ft=this.$D,Je="set"+(this.$u?"UTC":"");switch(Ue){case U:return tt?He(1,0):He(31,11);case z:return tt?He(1,$e):He(0,$e+1);case E:var wt=this.$locale().weekStart||0,it=(Se<wt?Se+7:Se)-wt;return He(tt?ft-it:ft+(6-it),$e);case T:case Z:return Ce(Je+"Hours",0);case w:return Ce(Je+"Minutes",1);case n:return Ce(Je+"Seconds",2);case h:return Ce(Je+"Milliseconds",3);default:return this.clone()}},Le.endOf=function(Ie){return this.startOf(Ie,!1)},Le.$set=function(Ie,qe){var ke,tt=ne.p(Ie),Ue="set"+(this.$u?"UTC":""),He=(ke={},ke[T]=Ue+"Date",ke[Z]=Ue+"Date",ke[z]=Ue+"Month",ke[U]=Ue+"FullYear",ke[w]=Ue+"Hours",ke[n]=Ue+"Minutes",ke[h]=Ue+"Seconds",ke[l]=Ue+"Milliseconds",ke)[tt],Ce=tt===T?this.$D+(qe-this.$W):qe;if(tt===z||tt===U){var Se=this.clone().set(Z,1);Se.$d[He](Ce),Se.init(),this.$d=Se.set(Z,Math.min(this.$D,Se.daysInMonth())).$d}else He&&this.$d[He](Ce);return this.init(),this},Le.set=function(Ie,qe){return this.clone().$set(Ie,qe)},Le.get=function(Ie){return this[ne.p(Ie)]()},Le.add=function(Ie,qe){var ke,tt=this;Ie=Number(Ie);var Ue=ne.p(qe),He=function($e){var ft=De(tt);return ne.w(ft.date(ft.date()+Math.round($e*Ie)),tt)};if(Ue===z)return this.set(z,this.$M+Ie);if(Ue===U)return this.set(U,this.$y+Ie);if(Ue===T)return He(1);if(Ue===E)return He(7);var Ce=(ke={},ke[n]=r,ke[w]=s,ke[h]=a,ke)[Ue]||1,Se=this.$d.getTime()+Ie*Ce;return ne.w(Se,this)},Le.subtract=function(Ie,qe){return this.add(-1*Ie,qe)},Le.format=function(Ie){var qe=this,ke=this.$locale();if(!this.isValid())return ke.invalidDate||q;var tt=Ie||"YYYY-MM-DDTHH:mm:ssZ",Ue=ne.z(this),He=this.$H,Ce=this.$m,Se=this.$M,$e=ke.weekdays,ft=ke.months,Je=ke.meridiem,wt=function(_e,Jt,Zt,Pa){return _e&&(_e[Jt]||_e(qe,tt))||Zt[Jt].slice(0,Pa)},it=function(_e){return ne.s(He%12||12,_e,"0")},ct=Je||function(_e,Jt,Zt){var Pa=_e<12?"AM":"PM";return Zt?Pa.toLowerCase():Pa};return tt.replace(J,function(_e,Jt){return Jt||function(Zt){switch(Zt){case"YY":return String(qe.$y).slice(-2);case"YYYY":return ne.s(qe.$y,4,"0");case"M":return Se+1;case"MM":return ne.s(Se+1,2,"0");case"MMM":return wt(ke.monthsShort,Se,ft,3);case"MMMM":return wt(ft,Se);case"D":return qe.$D;case"DD":return ne.s(qe.$D,2,"0");case"d":return String(qe.$W);case"dd":return wt(ke.weekdaysMin,qe.$W,$e,2);case"ddd":return wt(ke.weekdaysShort,qe.$W,$e,3);case"dddd":return $e[qe.$W];case"H":return String(He);case"HH":return ne.s(He,2,"0");case"h":return it(1);case"hh":return it(2);case"a":return ct(He,Ce,!0);case"A":return ct(He,Ce,!1);case"m":return String(Ce);case"mm":return ne.s(Ce,2,"0");case"s":return String(qe.$s);case"ss":return ne.s(qe.$s,2,"0");case"SSS":return ne.s(qe.$ms,3,"0");case"Z":return Ue}return null}(_e)||Ue.replace(":","")})},Le.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Le.diff=function(Ie,qe,ke){var tt,Ue=this,He=ne.p(qe),Ce=De(Ie),Se=(Ce.utcOffset()-this.utcOffset())*r,$e=this-Ce,ft=function(){return ne.m(Ue,Ce)};switch(He){case U:tt=ft()/12;break;case z:tt=ft();break;case k:tt=ft()/3;break;case E:tt=($e-Se)/6048e5;break;case T:tt=($e-Se)/864e5;break;case w:tt=$e/s;break;case n:tt=$e/r;break;case h:tt=$e/a;break;default:tt=$e}return ke?tt:ne.a(tt)},Le.daysInMonth=function(){return this.endOf(z).$D},Le.$locale=function(){return Ae[this.$L]},Le.locale=function(Ie,qe){if(!Ie)return this.$L;var ke=this.clone(),tt=be(Ie,qe,!0);return tt&&(ke.$L=tt),ke},Le.clone=function(){return ne.w(this.$d,this)},Le.toDate=function(){return new Date(this.valueOf())},Le.toJSON=function(){return this.isValid()?this.toISOString():null},Le.toISOString=function(){return this.$d.toISOString()},Le.toString=function(){return this.$d.toUTCString()},ze}(),Me=ye.prototype;return De.prototype=Me,[["$ms",l],["$s",h],["$m",n],["$H",w],["$W",T],["$M",z],["$y",U],["$D",Z]].forEach(function(ze){Me[ze[1]]=function(Le){return this.$g(Le,ze[0],ze[1])}}),De.extend=function(ze,Le){return ze.$i||(ze(Le,ye,De),ze.$i=!0),De},De.locale=be,De.isDayjs=Re,De.unix=function(ze){return De(1e3*ze)},De.en=Ae[he],De.Ls=Ae,De.p={},De})}(UC)),UC.exports}var kbe=Ube();const Ui=Ji(kbe);var kC={exports:{}},Bbe=kC.exports,U9;function Gbe(){return U9||(U9=1,function(t,e){(function(a,r){t.exports=r()})(Bbe,function(){var a={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,s=/\d/,l=/\d\d/,h=/\d\d?/,n=/\d*[^-_:/,()\s\d]+/,w={},T=function($){return($=+$)+($>68?1900:2e3)},E=function($){return function(J){this[$]=+J}},z=[/[+-]\d\d:?(\d\d)?|Z/,function($){(this.zone||(this.zone={})).offset=function(J){if(!J||J==="Z")return 0;var ie=J.match(/([+-]|\d\d)/g),de=60*ie[1]+(+ie[2]||0);return de===0?0:ie[0]==="+"?-de:de}($)}],k=function($){var J=w[$];return J&&(J.indexOf?J:J.s.concat(J.f))},U=function($,J){var ie,de=w.meridiem;if(de){for(var ge=1;ge<=24;ge+=1)if($.indexOf(de(ge,0,J))>-1){ie=ge>12;break}}else ie=$===(J?"pm":"PM");return ie},Z={A:[n,function($){this.afternoon=U($,!1)}],a:[n,function($){this.afternoon=U($,!0)}],Q:[s,function($){this.month=3*($-1)+1}],S:[s,function($){this.milliseconds=100*+$}],SS:[l,function($){this.milliseconds=10*+$}],SSS:[/\d{3}/,function($){this.milliseconds=+$}],s:[h,E("seconds")],ss:[h,E("seconds")],m:[h,E("minutes")],mm:[h,E("minutes")],H:[h,E("hours")],h:[h,E("hours")],HH:[h,E("hours")],hh:[h,E("hours")],D:[h,E("day")],DD:[l,E("day")],Do:[n,function($){var J=w.ordinal,ie=$.match(/\d+/);if(this.day=ie[0],J)for(var de=1;de<=31;de+=1)J(de).replace(/\[|\]/g,"")===$&&(this.day=de)}],w:[h,E("week")],ww:[l,E("week")],M:[h,E("month")],MM:[l,E("month")],MMM:[n,function($){var J=k("months"),ie=(k("monthsShort")||J.map(function(de){return de.slice(0,3)})).indexOf($)+1;if(ie<1)throw new Error;this.month=ie%12||ie}],MMMM:[n,function($){var J=k("months").indexOf($)+1;if(J<1)throw new Error;this.month=J%12||J}],Y:[/[+-]?\d+/,E("year")],YY:[l,function($){this.year=T($)}],YYYY:[/\d{4}/,E("year")],Z:z,ZZ:z};function q($){var J,ie;J=$,ie=w&&w.formats;for(var de=($=J.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(De,ne,ye){var Me=ye&&ye.toUpperCase();return ne||ie[ye]||a[ye]||ie[Me].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(ze,Le,Ie){return Le||Ie.slice(1)})})).match(r),ge=de.length,he=0;he<ge;he+=1){var Ae=de[he],me=Z[Ae],Re=me&&me[0],be=me&&me[1];de[he]=be?{regex:Re,parser:be}:Ae.replace(/^\[|\]$/g,"")}return function(De){for(var ne={},ye=0,Me=0;ye<ge;ye+=1){var ze=de[ye];if(typeof ze=="string")Me+=ze.length;else{var Le=ze.regex,Ie=ze.parser,qe=De.slice(Me),ke=Le.exec(qe)[0];Ie.call(ne,ke),De=De.replace(ke,"")}}return function(tt){var Ue=tt.afternoon;if(Ue!==void 0){var He=tt.hours;Ue?He<12&&(tt.hours+=12):He===12&&(tt.hours=0),delete tt.afternoon}}(ne),ne}}return function($,J,ie){ie.p.customParseFormat=!0,$&&$.parseTwoDigitYear&&(T=$.parseTwoDigitYear);var de=J.prototype,ge=de.parse;de.parse=function(he){var Ae=he.date,me=he.utc,Re=he.args;this.$u=me;var be=Re[1];if(typeof be=="string"){var De=Re[2]===!0,ne=Re[3]===!0,ye=De||ne,Me=Re[2];ne&&(Me=Re[2]),w=this.$locale(),!De&&Me&&(w=ie.Ls[Me]),this.$d=function(qe,ke,tt,Ue){try{if(["x","X"].indexOf(ke)>-1)return new Date((ke==="X"?1e3:1)*qe);var He=q(ke)(qe),Ce=He.year,Se=He.month,$e=He.day,ft=He.hours,Je=He.minutes,wt=He.seconds,it=He.milliseconds,ct=He.zone,_e=He.week,Jt=new Date,Zt=$e||(Ce||Se?1:Jt.getDate()),Pa=Ce||Jt.getFullYear(),Bt=0;Ce&&!Se||(Bt=Se>0?Se-1:Jt.getMonth());var la,Rt=ft||0,yr=Je||0,za=wt||0,Va=it||0;return ct?new Date(Date.UTC(Pa,Bt,Zt,Rt,yr,za,Va+60*ct.offset*1e3)):tt?new Date(Date.UTC(Pa,Bt,Zt,Rt,yr,za,Va)):(la=new Date(Pa,Bt,Zt,Rt,yr,za,Va),_e&&(la=Ue(la).week(_e).toDate()),la)}catch{return new Date("")}}(Ae,be,me,ie),this.init(),Me&&Me!==!0&&(this.$L=this.locale(Me).$L),ye&&Ae!=this.format(be)&&(this.$d=new Date("")),w={}}else if(be instanceof Array)for(var ze=be.length,Le=1;Le<=ze;Le+=1){Re[1]=be[Le-1];var Ie=ie.apply(this,Re);if(Ie.isValid()){this.$d=Ie.$d,this.$L=Ie.$L,this.init();break}Le===ze&&(this.$d=new Date(""))}else ge.call(this,he)}}})}(kC)),kC.exports}var jbe=Gbe();const Zbe=Ji(jbe);Ui.extend(Zbe);kf.accessToken="pk.eyJ1IjoiY29jb2xlbW9uMTIiLCJhIjoiY204YTBoMnZpMHplbzJzcTR3dDFmOXc4NiJ9.NqqEHSBe8cn9Gy9knbUqew";const qbe=()=>{const[t,e]=nt.useState(""),[a,r]=nt.useState(0),[s,l]=nt.useState(0),[h,n]=nt.useState(!1),[w,T]=nt.useState(null),[E,z]=nt.useState([]),[k,U]=nt.useState({}),[Z,q]=nt.useState(0),[$,J]=nt.useState({totalDistance:0,totalDuration:0,totalCalories:0,totalCarbon:0,totalRevenue:0}),[ie,de]=nt.useState({today:0,weekly:0,monthly:0}),[ge,he]=nt.useState(Array(24).fill(0)),[Ae,me]=nt.useState(0),[Re,be]=nt.useState({}),De=nt.useRef(null),ne=nt.useRef(null);nt.useRef(null);const ye=nt.useRef({}),Me=Se=>{let $e=Se.replace("UTC+","+").replace("UTC-","-");return $e=$e.replace(/([+\-]\d{1,2})$/,"$1:00"),Ui($e,"D MMMM YYYY [at] HH:mm:ss Z")},ze=Se=>typeof Se=="string"?Me(Se):Se&&typeof Se.toDate=="function"?Ui(Se.toDate()):Ui(Se),Le=async()=>{try{const Se=await Xi(Wn(zr,"bikes"));r(Se.size)}catch(Se){console.error("Error fetching total bikes:",Se)}},Ie=async()=>{try{const Se=Ui().startOf("day"),$e=Wn(zr,"ride_history"),ft=await Xi($e);let Je=0;ft.forEach(wt=>{const ct=wt.data().rideEndedAt;ct&&ze(ct).isSame(Se,"day")&&Je++}),console.log("Today's total rides:",Je),l(Je)}catch(Se){console.error("Error fetching total rides today:",Se)}},qe=async()=>{try{const Se=Ui().startOf("day"),$e=Wn(zr,"ride_history"),ft=await Xi($e);let Je={totalDistance:0,totalDuration:0,totalCalories:0,totalCarbon:0,totalRevenue:0};ft.forEach(wt=>{var ct,_e,Jt;const it=wt.data();it.rideEndedAt&&ze(it.rideEndedAt).isSame(Se,"day")&&(Je.totalDistance+=((ct=it.currentMetrics)==null?void 0:ct.distance)||0,Je.totalDuration+=((_e=it.currentMetrics)==null?void 0:_e.duration)||0,Je.totalCalories+=((Jt=it.currentMetrics)==null?void 0:Jt.calories)||0,Je.totalCarbon+=it.carbonSaved||0,Je.totalRevenue+=it.amountPaid||0)}),J({totalDistance:Je.totalDistance||0,totalDuration:Je.totalDuration||0,totalCalories:Je.totalCalories||0,totalCarbon:Je.totalCarbon||0,totalRevenue:Je.totalRevenue||0})}catch(Se){console.error("Error fetching today's metrics:",Se)}},ke=async()=>{try{const Se=await Xi(Wn(zr,"approved_users"));let $e=0,ft=0,Je=0;const wt=Ui().startOf("day"),it=Ui().startOf("week"),ct=Ui().startOf("month");for(const _e of Se.docs){const Jt=Wn(zr,"approved_users",_e.id,"rideHistory"),Zt=await Xi(Jt);for(const Pa of Zt.docs){const Bt=Pa.data(),la=ze(Bt.rideStartedAt),Rt=Bt.amountPaid||0;la.isSame(wt,"day")&&($e+=Rt),la.isAfter(it)&&(ft+=Rt),la.isAfter(ct)&&(Je+=Rt)}}de({today:$e,weekly:ft,monthly:Je})}catch(Se){console.error("Error fetching revenue:",Se)}},tt=async()=>{try{const Se=Ui().startOf("day"),$e=Wn(zr,"ride_history");return ay($e,Je=>{let wt=Array(24).fill(0);Je.forEach(it=>{const ct=it.data();if(ct.rideEndedAt&&ct.amountPaid){const _e=ze(ct.rideEndedAt);if(_e.isSame(Se,"day")){const Jt=_e.hour();wt[Jt]+=Number(ct.amountPaid||0)}}}),console.log("Hourly revenue data:",wt),he(wt)})}catch(Se){console.error("Error fetching hourly revenue:",Se)}},Ue=()=>{try{const Se=Wn(zr,"activeRides"),$e=b_(Se,iC("rideStatus","==","started"));return ay($e,async Je=>{const wt=[];for(const it of Je.docs){const ct=it.data();console.log("Ride data:",ct);try{const _e=Is(zr,"approved_users",ct.userId),Jt=await Ep(_e),Zt=Jt.exists()?Jt.data():{};console.log("User data:",Zt);const Pa=Is(zr,"bikes",ct.bikeId),Bt=await Ep(Pa),la=Bt.exists()?Bt.data():{};console.log("Bike data:",la);let Rt="Unknown Station";if(ct.startStation){console.log("Attempting to fetch station with ID:",ct.startStation);const za=Is(zr,"stations",ct.startStation),Va=await Ep(za);if(console.log("Station doc exists:",Va.exists()),Va.exists()){const er=Va.data();console.log("Station data:",er),Rt=er.stationName||er.name||"Unknown Station"}}const yr={rideId:it.id,userName:Zt.name||`${Zt.first_name||""} ${Zt.surname||""}`.trim(),startTime:ct.startTime,bikeName:la.bikeName||"Unknown Bike",stationName:Rt};console.log("Pushing ride info:",yr),wt.push(yr)}catch(_e){console.error("Error fetching related documents:",_e),console.error("Error details:",{rideId:it.id,userId:ct.userId,bikeId:ct.bikeId,startStation:ct.startStation})}}console.log("Final active rides array:",wt),z(wt)})}catch(Se){return console.error("Error in fetchActiveRides:",Se),()=>{}}},He=()=>{try{const Se=Wn(zr,"admins");return ay(Se,$e=>{const ft=$e.docs.reduce((Je,wt)=>{const it=wt.data();return it.status==="Active"&&it.stationAssignedTo?Je+1:Je},0);me(ft)})}catch(Se){return console.error("Error fetching active admins:",Se),()=>{}}};nt.useEffect(()=>{Le(),Ie(),qe(),tt(),ke();const Se=jv.onAuthStateChanged(async $e=>{if($e)try{const ft=Is(zr,"users",$e.uid),Je=await Ep(ft);if(Je.exists()){const wt=Je.data(),it=(wt==null?void 0:wt.name)||"Super Admin";e(it)}else e("Super Admin")}catch(ft){console.error("Error fetching user data:",ft),e("Super Admin")}else e("Unknown User")});return()=>Se()},[]),nt.useEffect(()=>{if(!(ne.current||!De.current))try{ne.current=new kf.Map({container:De.current,style:"mapbox://styles/mapbox/streets-v11",center:[120.9882053036898,14.693467677226026],zoom:12}),ne.current.addControl(new kf.NavigationControl,"top-right");const Se=Wn(zr,"activeRides"),$e=ay(b_(Se,iC("rideStatus","==","started")),ft=>{ne.current});return()=>{$e(),ne.current&&(ne.current.remove(),ne.current=null)}}catch(Se){console.error("Error initializing map:",Se)}},[De.current]),nt.useEffect(()=>{if(!ne.current)return;const Se=Wn(zr,"activeRides"),$e=b_(Se,iC("rideStatus","==","started")),ft=ay($e,async Je=>{try{Je.docChanges().forEach(async wt=>{const it=wt.doc.data(),ct=wt.doc.id;if((wt.type==="added"||wt.type==="modified")&&it.locationData){const{latitude:_e,longitude:Jt}=it.locationData,Zt=Is(zr,"approved_users",it.userId),Pa=await Ep(Zt),Bt=Pa.exists()?Pa.data():{},la=`${Bt.first_name||""} ${Bt.surname||""}`.trim(),Rt=Is(zr,"bikes",it.bikeId),yr=await Ep(Rt),Va=(yr.exists()?yr.data():{}).bikeName||"Unknown Bike";if(ye.current[ct])ye.current[ct].setLngLat([Jt,_e]).getPopup().setHTML(`
                  <div class="simple-popup">
                    <p><strong>${la}</strong></p>
                    <p>Bike: ${Va}</p>
                  </div>
                `);else{const er=document.createElement("div");er.className="user-location-marker";const cr=new kf.Popup({closeButton:!1,closeOnClick:!1,anchor:"top",offset:[0,-10]}).setHTML(`
                <div class="simple-popup">
                  <p><strong>${la}</strong></p>
                  <p>Bike: ${Va}</p>
                </div>
              `);ye.current[ct]=new kf.Marker({element:er,anchor:"center"}).setLngLat([Jt,_e]).setPopup(cr).addTo(ne.current)}}wt.type==="removed"&&ye.current[ct]&&(ye.current[ct].remove(),delete ye.current[ct])})}catch(wt){console.error("Error updating markers:",wt)}});return()=>{ft(),Object.values(ye.current).forEach(Je=>Je.remove()),ye.current={}}},[]),nt.useEffect(()=>{const Se=Wn(zr,"activeRides"),$e=b_(Se,iC("rideStatus","==","started")),ft=ay($e,Je=>{q(Je.size)});return()=>ft()},[]),nt.useEffect(()=>{let Se;try{Se=Ue()}catch($e){console.error("Error setting up active rides listener:",$e)}return()=>{typeof Se=="function"&&Se()}},[]),nt.useEffect(()=>{const Se=He();return()=>{typeof Se=="function"&&Se()}},[]),nt.useEffect(()=>{const Se=Ui().startOf("day"),$e=Wn(zr,"ride_history");let ft=null;try{ft=ay($e,Je=>{let wt={totalDistance:0,totalDuration:0,totalCalories:0,totalCarbon:0,totalRevenue:0},it=Array(24).fill(0),ct=0;Je.forEach(_e=>{const Jt=_e.data();if(Jt.rideEndedAt){const Zt=ze(Jt.rideEndedAt);if(Zt.isSame(Se,"day")){wt.totalDistance+=Number(Jt.distance||0),wt.totalDuration+=Number(Jt.duration||0),wt.totalCalories+=Number(Jt.caloriesBurned||0),wt.totalCarbon+=Number(Jt.carbonSaved||0),wt.totalRevenue+=Number(Jt.amountPaid||0);const Pa=Zt.hour();it[Pa]+=Number(Jt.amountPaid||0),ct++}}}),J(wt),he(it),l(ct)})}catch(Je){console.error("Error setting up ride history listener:",Je)}return()=>{typeof ft=="function"&&ft()}},[]);const Ce=[{name:"Bikes Available",value:a},{name:"Active Users",value:Z},{name:"Active Admins",value:Ae},{name:"Today's Revenue",value:Number(($==null?void 0:$.totalRevenue)||0)},{name:"Rides Today",value:s}];return K.jsxs("div",{className:"content-container",children:[K.jsxs("div",{className:"content-header",children:[K.jsxs("h1",{className:"content-header__title",children:["Hello ",t,"!"]}),K.jsx("p",{className:"content-header__subtitle",children:"Keeping the wheels turning for a greener future."})]}),K.jsx("div",{className:"stats-section",children:Ce.map((Se,$e)=>K.jsxs("div",{className:"stat-card",children:[K.jsx("h3",{className:"stat-card__title",children:Se.name}),K.jsx("p",{className:"stat-card__value",children:Se.name==="Today's Revenue"?Number(Se.value).toFixed(2):typeof Se.value>"u"?"0":Se.value})]},$e))}),K.jsxs("div",{className:"tracking-section",children:[K.jsxs("div",{className:"active-rides-table",children:[K.jsx("h3",{className:"section-title",children:"Active Rides"}),K.jsxs("table",{children:[K.jsx("thead",{children:K.jsxs("tr",{children:[K.jsx("th",{children:"Rider Name"}),K.jsx("th",{children:"Start Time"}),K.jsx("th",{children:"Bike Name"}),K.jsx("th",{children:"Station"})]})}),K.jsxs("tbody",{children:[E.slice(0,5).map(Se=>K.jsxs("tr",{children:[K.jsx("td",{children:Se.userName}),K.jsx("td",{children:ze(Se.startTime).format("HH:mm:ss")}),K.jsx("td",{children:Se.bikeName}),K.jsx("td",{children:Se.stationName})]},Se.rideId)),E.length===0&&K.jsx("tr",{children:K.jsx("td",{colSpan:"4",className:"no-rides",children:"No active rides at the moment"})})]})]})]}),K.jsxs("div",{className:"map-container",children:[K.jsxs("div",{className:"map-section-header",children:[K.jsxs("h2",{className:"map-title",children:[K.jsx(mce,{})," Live User Activity Map"]}),K.jsx("p",{className:"map-subtitle",children:"Track real-time locations of active riders across the system"})]}),K.jsx("div",{ref:De,className:"ride-tracking-map"})]})]}),K.jsxs("div",{className:"charts-grid",children:[K.jsxs("div",{className:"charts-row",children:[K.jsxs("div",{className:"chart-container",children:[K.jsx("h3",{className:"chart-title",children:"Today's Ride Metrics"}),K.jsx(Sp,{width:"100%",height:300,children:K.jsxs(DM,{data:[{name:"Distance",value:parseFloat($.totalDistance||0),unit:"km"},{name:"Duration",value:parseFloat(($.totalDuration||0)/60),unit:"min"},{name:"Calories",value:parseFloat($.totalCalories||0),unit:"cal"},{name:"CO2 Saved",value:parseFloat($.totalCarbon||0),unit:"kg"}],margin:{top:5,right:30,left:20,bottom:60},children:[K.jsx(xp,{strokeDasharray:"3 3"}),K.jsx(od,{dataKey:"name",angle:-45,textAnchor:"end",height:60,tick:{fontSize:12},interval:0}),K.jsx(ld,{tickFormatter:Se=>Se.toFixed(2),tick:{fontSize:12}}),K.jsx(ou,{formatter:(Se,$e,ft)=>ft&&ft.payload?[`${Se.toFixed(2)} ${ft.payload.unit}`,$e]:[Se,$e],contentStyle:{fontSize:12}}),K.jsx(Ip,{dataKey:"value",fill:"#009C8C",children:K.jsx(Gf,{dataKey:"value",position:"top",formatter:(Se,$e)=>$e&&$e.payload?`${Se.toFixed(2)} ${$e.payload.unit}`:Se.toFixed(2),style:{fontSize:"11px"}})})]})})]}),K.jsxs("div",{className:"chart-container",children:[K.jsx("h3",{className:"chart-title",children:"System Overview"}),K.jsx(Sp,{width:"100%",height:300,children:K.jsxs(DM,{data:Ce,margin:{top:5,right:30,left:20,bottom:60},children:[K.jsx(xp,{strokeDasharray:"3 3"}),K.jsx(od,{dataKey:"name",angle:-45,textAnchor:"end",height:60,tick:{fontSize:12},interval:0}),K.jsx(ld,{tick:{fontSize:12}}),K.jsx(ou,{contentStyle:{fontSize:12}}),K.jsx(Ip,{dataKey:"value",fill:"#009C8C"})]})})]})]}),K.jsxs("div",{className:"revenue-section",children:[K.jsx("h3",{className:"chart-title",children:"Today's Hourly Revenue"}),K.jsx(Sp,{width:"100%",height:300,children:K.jsxs(Mbe,{data:ge.map((Se,$e)=>({hour:`${String($e).padStart(2,"0")}:00`,value:Se})),margin:{top:5,right:30,left:20,bottom:5},children:[K.jsx(xp,{strokeDasharray:"3 3"}),K.jsx(od,{dataKey:"hour",tick:{fontSize:12},interval:2}),K.jsx(ld,{tick:{fontSize:12},tickFormatter:Se=>`${Se.toFixed(2)}`}),K.jsx(ou,{formatter:Se=>[`${Number(Se).toFixed(2)}`,"Revenue"],contentStyle:{fontSize:12}}),K.jsx(T0,{type:"monotone",dataKey:"value",stroke:"#4CAF50",strokeWidth:2,dot:{fill:"#4CAF50"}})]})})]})]})]})},jO=()=>K.jsxs("div",{className:"dashboard",children:[K.jsx(NK,{})," ",K.jsxs("div",{className:"dashboard-content",children:[K.jsx(jg,{})," ",K.jsx(qbe,{})," "]})]}),fm=()=>{const t=t3(),[e,a]=nt.useState(""),[r,s]=nt.useState(""),[l,h]=nt.useState(""),n=T=>`/ecpcaps/assets/${T}`,w=async T=>{T.preventDefault();try{await jne(jv,e,r),t("/dashboard")}catch(E){h(E.message)}};return K.jsxs("div",{className:"login-container",children:[K.jsx("div",{className:"login-logo-container",children:K.jsx("img",{src:n("ecoridelogo2.png"),alt:"Eco Ride Logo",className:"login-logo"})}),K.jsx("p",{className:"login-subtitle",children:"Drive Green, Ride Clean!"}),K.jsx("h2",{className:"login-title",children:"Super Admin Login"}),K.jsxs("form",{className:"login-form",onSubmit:w,children:[l&&K.jsx("p",{className:"error",children:l}),K.jsxs("div",{className:"form-group",children:[K.jsx("label",{children:"Email"}),K.jsx("input",{type:"email",value:e,onChange:T=>a(T.target.value),required:!0})]}),K.jsxs("div",{className:"form-group",children:[K.jsx("label",{children:"Password"}),K.jsx("input",{type:"password",required:!0,autoComplete:"current-password",value:r,onChange:T=>s(T.target.value)})]}),K.jsx("button",{type:"submit",className:"login-button",children:"LOG IN"})]})]})},Hbe=JSON.parse('[{"Raw Address":"168 SALAZAR ST. BO.PARADA Valenzuela City"},{"Raw Address":"235 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"118-CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"330 T. MANANG ST Parada Valenzuela City"},{"Raw Address":"21 EARTH STREET Parada Valenzuela City"},{"Raw Address":"70 PARADA ST.RD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"188 M DE GULA ST.PARADA Valenzuela City"},{"Raw Address":"104 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"9 E&E COMP. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"395 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"155 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"332 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"BLK1 LOT 12 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"237 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"338 T.MANAG ST. PARADA Valenzuela City"},{"Raw Address":"362 B. TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"109 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"9R CABRAL STREET Parada Valenzuela City"},{"Raw Address":"126 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"110 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"170 Parada Valenzuela City"},{"Raw Address":"198 CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"195 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"CANDIDO APT. SAN ANDRES Parada Valenzuela City"},{"Raw Address":"250 S. DE GUZMAN ST BO Parada Valenzuela City"},{"Raw Address":"274 PILAR ST FV4 Village Parada Valenzuela City"},{"Raw Address":"371 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"98 7TH ST. FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"341 20TH ST. Parada Valenzuela City"},{"Raw Address":"233 Fortune Village 5 19TH ST. Parada Valenzuela City"},{"Raw Address":"TATA ERRO ST. Parada Valenzuela City"},{"Raw Address":"0002 Parada Valenzuela City"},{"Raw Address":"T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"249 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"192 RAMON FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"440 SERVICE ROAD Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"91 DAET COMPD. Parada Valenzuela City"},{"Raw Address":"095 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"012 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"244 7TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"257 M DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"308 JIMENEZ ST. PARADA Valenzuela City"},{"Raw Address":"99 VENUS ST F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"12 D PARADA ROAD Parada Valenzuela City"},{"Raw Address":"187 UNIT14 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"230 18ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"181 FELIZA T. Parada Valenzuela City"},{"Raw Address":"7 ALFONSO APARTMENT 101 CAPT CRUZ ST COR Parada Valenzuela City"},{"Raw Address":"087 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"140 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"441 P GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"234 Fortune Village 5 19T Parada Valenzuela City"},{"Raw Address":"412 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"#90 ADOR STREET Parada Valenzuela City"},{"Raw Address":"BLK 12 LOT1 Parada Valenzuela City"},{"Raw Address":"36-A PARADA RD. Parada Valenzuela City"},{"Raw Address":"93 A. CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"139 LAGMDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"185 B. FELIZA ST Parada Valenzuela City"},{"Raw Address":"74 PARADA ST. Parada Valenzuela City"},{"Raw Address":"192 RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"244 ESTRELLA APRT. 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"178 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"170 DOON COMP. SALAZAR ST Parada Valenzuela City"},{"Raw Address":"039 D SANTIAGO COMPD. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"1992 1ST. BENMARIE COMP FV5 Parada Valenzuela City"},{"Raw Address":"390 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"166 SALAZAR Parada Valenzuela City"},{"Raw Address":"192 M DE GULA ST. PARADA Valenzuela City"},{"Raw Address":"93 E. CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"21ST PARADA ROAD Parada Valenzuela City"},{"Raw Address":"339 BO. Parada Valenzuela City"},{"Raw Address":"295 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"276B S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"04 Parada Valenzuela City"},{"Raw Address":"436 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"5 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"388 IMPONG JUANA S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"99 SATURN ST F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"191 24TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B6 L7 F. FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"064 PARADA RD. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"DE GUZMAN CPD. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"307 PEARL ST. HIYAS HOMES. PARADA Valenzuela City"},{"Raw Address":"39C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"199 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ ST. PARADA Valenzuela City"},{"Raw Address":"LOT 23 BLK 14 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"259 25TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"87 PARADA ST. Parada Valenzuela City"},{"Raw Address":"99 SATURN ST. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"465 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"199 21ST ST. FORTUNE VillageAG 5 Parada Valenzuela City"},{"Raw Address":"234 ALOHA COMP. S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"234 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"L13 B19 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"091 FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"07 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"372 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"43 B. SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"199 21ST. BENMARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"330 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"141 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"250 B S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"234 19TH Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"121 CONZUELO ST. Parada Valenzuela City"},{"Raw Address":"177 CAPITAN CRUZ ST Parada Valenzuela City"},{"Raw Address":"19921 ST.FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"260 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"143 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"468 KAINGIN ST. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"233 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"172-B MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"106 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"BLK6 LOT7 GINTONG SILANGAN ST. F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"400 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"15 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"438 E FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"440 RUMARAO COMPOUND Parada Valenzuela City"},{"Raw Address":"232 SAN MIGUEL COMP. Parada Valenzuela City"},{"Raw Address":"430 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"75 PARADA RD. EXT. Parada Valenzuela City"},{"Raw Address":"248 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"101 LAGADAMEO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"321 S. DEG GUZMAN Parada Valenzuela City"},{"Raw Address":"269 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"195 6TH ST. FORTUNE   Parada Valenzuela City"},{"Raw Address":"77 PARADA RD. EXT. FORTUNE7 Parada Valenzuela City"},{"Raw Address":"264 25TH ST. FORTUNE VIL 5 Parada Valenzuela City"},{"Raw Address":"0090 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"412 Fortune Village 7 ZAMORA ST. PARADA Valenzuela City"},{"Raw Address":"#207 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"UNIT 3 LOT 16 BLK 8 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"278 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"287 SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"306-A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"114-E LAGDAMEO Parada Valenzuela City"},{"Raw Address":"247 PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"58 PARADA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"466 KA BERONG Parada Valenzuela City"},{"Raw Address":"321 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"202 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"190 B MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"9 5TH STEET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"134 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"386 IMPONG JUANA STREET Parada Valenzuela City"},{"Raw Address":"0419 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"B5 L7GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"207 ANTHONY ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"099 CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"260 S. DE GUSMAN ST. Parada Valenzuela City"},{"Raw Address":"98 CAPT. CRUZ ST. BO.PARADA Valenzuela City"},{"Raw Address":"388 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"71 FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"#93-C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"20 ZAMORA ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 12 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"032 Parada Valenzuela City"},{"Raw Address":"276 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"BK3 LT12 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"58 Fortune Village 6 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"39 D. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"302-B CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"125 DAET COMPOUND Parada Valenzuela City"},{"Raw Address":"320 J S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"182 MOLAVE Parada Valenzuela City"},{"Raw Address":"0011 UNIT C MOLAVE ST Parada Valenzuela City"},{"Raw Address":"201 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"#146 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"84 PARADA ROAD Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"# 365 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"96 FELIZA ST Parada Valenzuela City"},{"Raw Address":"039 RAMON ST. Parada Valenzuela City"},{"Raw Address":"236 7ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"055 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE FV 5 Parada Valenzuela City"},{"Raw Address":"AGLIHAM COMPD. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 9 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"91-A CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"7 CONSUELO ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"414 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"184 RAMON ST FV4 Parada Valenzuela City"},{"Raw Address":"26 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"19-B ZAMORA Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"18 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"# 43 PARADA RD. Parada Valenzuela City"},{"Raw Address":"083 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"391 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"90 G. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"86 SALVADOR ST Parada Valenzuela City"},{"Raw Address":"322 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"448 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"297-D T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"87 PARADA RD. Parada Valenzuela City"},{"Raw Address":"SISCAR APARTMENT ADOR STREET Parada Valenzuela City"},{"Raw Address":"114 YAKAL ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"452 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"223 ABELARDO Parada Valenzuela City"},{"Raw Address":"22 T. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"199 6TH ST. FORTUNE Village 6. PARADA Valenzuela City"},{"Raw Address":"276A S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"120 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"245 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"0094 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"101 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"301 T.MANANG Parada Valenzuela City"},{"Raw Address":"004 Parada Valenzuela City"},{"Raw Address":"246 7TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"#93 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"105 KAMAGONG Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"B5L3 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"BLOCK 5 LOT 11 FRANCISCO ST GINTONG Parada Valenzuela City"},{"Raw Address":"87 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"317 TADANG MANANG Parada Valenzuela City"},{"Raw Address":"8-FIFTH ST. Parada Valenzuela City"},{"Raw Address":"157 ELAGDAMEO ST. FV4 Parada Valenzuela City"},{"Raw Address":"122 CALLE ONSE ST. PARADA Valenzuela City"},{"Raw Address":"#12 PARADA RD. Parada Valenzuela City"},{"Raw Address":"254 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"89 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"468-G KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"LOT 41 BLK 10 NARA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"6 Parada Valenzuela City"},{"Raw Address":"333 A TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"LOT 19 BLK 8 FORTUNE DR. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"170 RAMON FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"122 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"242 19TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"199 6TH ST. COR. Parada Valenzuela City"},{"Raw Address":"043 PARADA Valenzuela City"},{"Raw Address":"108 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"339 21ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"031 PARADA RD Parada Valenzuela City"},{"Raw Address":"FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"35 Parada Valenzuela City"},{"Raw Address":"184 Fortune Village 6 MOLAVE ST. PARADA Valenzuela City"},{"Raw Address":"302 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"SALAZAR Parada Valenzuela City"},{"Raw Address":"20 EUGENIO Parada Valenzuela City"},{"Raw Address":"01 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"B13L27 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"253 Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. FORUNE Village4 Parada Valenzuela City"},{"Raw Address":"B1 L9 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"00002 B CALLE ONSE Parada Valenzuela City"},{"Raw Address":"187 UNIT 11 3RD FLOOR FELIZA ST. Parada Valenzuela City"},{"Raw Address":"87 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"181 FELIZA Parada Valenzuela City"},{"Raw Address":"136 E. LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"200 B CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"97 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"214-S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"# 86 C. CAPITAN CRUZ Parada Valenzuela City"},{"Raw Address":"# 95 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"231 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"139 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"154 ALICIA STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 2 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"BLK3 LOT20 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"347 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"241 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"427 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"207 FELISA ST. Parada Valenzuela City"},{"Raw Address":"248 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"268 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"88 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"404 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"5 PARADA Valenzuela City"},{"Raw Address":"04 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"369 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"405-B P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"145 C NARRA ST. Parada Valenzuela City"},{"Raw Address":"274 PILAR ST. Parada Valenzuela City"},{"Raw Address":"367 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE Parada Valenzuela City"},{"Raw Address":"339 T. MANANG Parada Valenzuela City"},{"Raw Address":"39 C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"315 MENES COMP. Parada Valenzuela City"},{"Raw Address":"255 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"091 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"357 FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"188 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"324 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"156 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"412-B P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"204B F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"162 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"31 EARTH ST. Parada Valenzuela City"},{"Raw Address":"028 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"464 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"LOT 10 BLK. 2 PARADA ROAD EXT. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"L 9 B 9 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"172 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"185 B. FELIZA ST. Parada Valenzuela City"},{"Raw Address":"419 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"127 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"PARADA ROAD PARADA Valenzuela City"},{"Raw Address":"332 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"231 18TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"FRANCISCO Parada Valenzuela City"},{"Raw Address":"172 MOLAVE ST. Fortune Village 5&6 Parada Valenzuela City"},{"Raw Address":"21ST PARADA RD Parada Valenzuela City"},{"Raw Address":"290 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"177 GONZALES COMP. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. BENMARIE COMP. Parada Valenzuela City"},{"Raw Address":"#39D. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"3A LOT 13 BLK 13 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"9001 LOT 4 A CALLE ONCE Parada Valenzuela City"},{"Raw Address":"450 Parada Valenzuela City"},{"Raw Address":"283 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"143 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"043 6TH ST. CORNER NARRRA ST. Parada Valenzuela City"},{"Raw Address":"413-J P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"L26 NARRA ST Parada Valenzuela City"},{"Raw Address":"065 BO.PARADA Valenzuela City"},{"Raw Address":"27 DIAMOND ST HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"404 P.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"140 DALAWAN ST.PARADA Valenzuela City"},{"Raw Address":"412 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"273 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"84 A. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"123 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"91-A CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"222 20TH STREET FORTUNE5 Parada Valenzuela City"},{"Raw Address":"#12 PARADA ST. Parada Valenzuela City"},{"Raw Address":"276-B S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"410 P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"420 ZAMORA FV7 Parada Valenzuela City"},{"Raw Address":"18 A F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"73 GOMEZ ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"199 6TH ST. MANALANG APT. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"UNIT1 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"413 ZAMORA ST. PARADA Valenzuela City"},{"Raw Address":"315 JIMENEZ ST. PARADA Valenzuela City"},{"Raw Address":"20 EUGENIO ST. CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"63 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"78 PARADA RD. EXT. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"39 D RAMON ST. SANTIAGO COMPOUND F4 Parada Valenzuela City"},{"Raw Address":"26 MARS ST. Parada Valenzuela City"},{"Raw Address":"224 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"SERVE 1 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"220D 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"046 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"11 5TH FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"26 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"176 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"141 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"178 KAMAGONG FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"420 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"144 E FRANCISCO Parada Valenzuela City"},{"Raw Address":"259 2ST ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 7 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"411 C P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"286 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"410-A P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"99 VENUS ST. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"36-G TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"413 FV7 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ ST Parada Valenzuela City"},{"Raw Address":"100 CAPTAIN CRUZ ST. COR. M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"248 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"0006 BLOCK 3 LOT 4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"269 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"122 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"168 ACACIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"440 WEST SERVICE RUMARAO COMPD Parada Valenzuela City"},{"Raw Address":"171 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 8 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"134 E.LAGDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"151 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"125 CONSUELO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"COR. PEARL & CORAL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"409 P.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"192 RAMON FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPUND Parada Valenzuela City"},{"Raw Address":"29 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"414 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"437 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"227 ABLERADO ST. Parada Valenzuela City"},{"Raw Address":"196 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"1F DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"119A KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST.FV 4 Parada Valenzuela City"},{"Raw Address":"22 Parada Valenzuela City"},{"Raw Address":"10 5TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"ABELARDO Parada Valenzuela City"},{"Raw Address":"199 6TH Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"65 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"109 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"283 MARTA ST. Parada Valenzuela City"},{"Raw Address":"371 -A TATA ANDRES Parada Valenzuela City"},{"Raw Address":"274 PILAR ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"UNIT A 276 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"274 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B2 L22 JADE ST Parada Valenzuela City"},{"Raw Address":"2 CALLE ONSE FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"067 PARADA RD Parada Valenzuela City"},{"Raw Address":"165 G ACACIA ST Parada Valenzuela City"},{"Raw Address":"441 GOMEZ Parada Valenzuela City"},{"Raw Address":"18 GP WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"9 VENUS ST. Parada Valenzuela City"},{"Raw Address":"028 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"BLK1 LOT5 TMHOA T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"181 23RD STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"135 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"360 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"207 FELA BUKID Parada Valenzuela City"},{"Raw Address":"173 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"269 S. GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"250 ABELARDO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"42 PARADA RD. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"466 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"RAMON ST. Parada Valenzuela City"},{"Raw Address":"93 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"91B S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"101 A CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"UNIT 4 CALYE 7 Parada Valenzuela City"},{"Raw Address":"123 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"080 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"322 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"199 6TH ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"122 CALE ONCE ST. Parada Valenzuela City"},{"Raw Address":"193-C M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"62 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"222 ANTHONY STREET Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"201 6ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"165 Parada Valenzuela City"},{"Raw Address":"217 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"#80 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"97 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"# 26 MARS ST. Parada Valenzuela City"},{"Raw Address":"358 J.FRANCISCO Parada Valenzuela City"},{"Raw Address":"4389 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"LOT 10 NEPTUNE STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"246 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"165 YAKAL ST. Parada Valenzuela City"},{"Raw Address":"194 FORTUNE Village 5 CORNER 6 ST. Parada Valenzuela City"},{"Raw Address":"94A FELIZA ST. Parada Valenzuela City"},{"Raw Address":"159 6TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"342 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"0118A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"372 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"139 Fortune Village 5 DRIVE Village Parada Valenzuela City"},{"Raw Address":"ADOR ST. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"128 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"30B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"361 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"88 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"251 ABELARDO ST.PARADA Valenzuela City"},{"Raw Address":"109 KAMAGONG Parada Valenzuela City"},{"Raw Address":"LOT 10 NEPTUNE F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"122 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"39 D. SANTIAGO COMPD. FV4 Parada Valenzuela City"},{"Raw Address":"439 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"307 JIMENEZ ST.PARADA Valenzuela City"},{"Raw Address":"ACACIA ST. Parada Valenzuela City"},{"Raw Address":"358 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"6TH ST. CORNER NARRA Parada Valenzuela City"},{"Raw Address":"192 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"400 SAN ANDRES ST Parada Valenzuela City"},{"Raw Address":"123 C. CRUZ Parada Valenzuela City"},{"Raw Address":"414 PARADA ST. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"CANDIDO APT. Parada Valenzuela City"},{"Raw Address":"RUMARAO COMPOUND WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"260 TATA ROMAN ST Parada Valenzuela City"},{"Raw Address":"B4 L11 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"1243 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"416 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"169 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"140 E FRANCISCO Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST. FORUNE Village 4 Parada Valenzuela City"},{"Raw Address":"349-F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"039 RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"435 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"CALL ONSE Parada Valenzuela City"},{"Raw Address":"097 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 22 JADE ST. Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"104 A CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"#330 TADANG MANANG Parada Valenzuela City"},{"Raw Address":"B2L20 349 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"449 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"146 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"177 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"228 ABELARDO FV 4 Parada Valenzuela City"},{"Raw Address":"279-B S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"35 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"#42 PARADA RD. Parada Valenzuela City"},{"Raw Address":"117 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"BLK 4 LOT 18 PEARL ST. HIYAS Parada Valenzuela City"},{"Raw Address":"28 PARADA RD Parada Valenzuela City"},{"Raw Address":"95 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"462 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"203 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"055 KAMAGONG STREET Parada Valenzuela City"},{"Raw Address":"# 12 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"103 KAMAGONG STREET. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"235 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"365 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"BLK9 LOT29-A KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"169 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID CALLE ONCE Parada Valenzuela City"},{"Raw Address":"464 KAINGIN Parada Valenzuela City"},{"Raw Address":"182 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"442 ROSILOS Parada Valenzuela City"},{"Raw Address":"470 CARACTA VillageE KAINGIN ST Parada Valenzuela City"},{"Raw Address":"457 F KAINGIN ST Parada Valenzuela City"},{"Raw Address":"0147E LOT 0147 DOON COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"105 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"289-D S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"283 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"348 CAPT.CRUZ ST. BO. PARADA Valenzuela City"},{"Raw Address":"377 TATA ANDREZ ST. Parada Valenzuela City"},{"Raw Address":"26 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"8 M. LAUREL DRIVE Fortune Village 4. Parada Valenzuela City"},{"Raw Address":"CALLE ONSE BUKID Parada Valenzuela City"},{"Raw Address":"230 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"286 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"95 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"219 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"JORGE EMBUSCADO Parada Valenzuela City"},{"Raw Address":"#153 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"3 5TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"442 P. GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"17 F.SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"171 RAMON ST. Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"279 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"0320 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"332 T MANANG ST Parada Valenzuela City"},{"Raw Address":"514 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"412 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"160 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"224 2OTH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"225 BELARDO ST. FV 4 Village Parada Valenzuela City"},{"Raw Address":"25 GUENIO Parada Valenzuela City"},{"Raw Address":"407 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"405 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"146 ALICIA ST.FV 4 Parada Valenzuela City"},{"Raw Address":"136 LAGDAMEO Parada Valenzuela City"},{"Raw Address":"199 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"134 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 14 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"103 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"307 JIMENES ST. Parada Valenzuela City"},{"Raw Address":"315 JEMENES COMPOUND Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 6 TANDANG MANANG HOWA Parada Valenzuela City"},{"Raw Address":"3 CORAL ST. Parada Valenzuela City"},{"Raw Address":"100 E. DE GULA COMP. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"#6 Fortune Village 5 5TH STREET Parada Valenzuela City"},{"Raw Address":"198 RAMON ST. FV4 Parada Valenzuela City"},{"Raw Address":"168 SALAZAR DOON COMPD. Parada Valenzuela City"},{"Raw Address":"301 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 9 PEARL CORNER JADE HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"172 23 ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"257 RIZALINA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"320 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"190 6TH ST. Fortune Village 5 MOLAVE EXT. Parada Valenzuela City"},{"Raw Address":"111 Fortune Village 6 Village YAKAL ST. Parada Valenzuela City"},{"Raw Address":"349 GINTONG SILANGAN BLK. 5 LOT 15 Parada Valenzuela City"},{"Raw Address":"458 KAINGIN Parada Valenzuela City"},{"Raw Address":"2 YAKAL ST. CORNER ACACIA Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"471-A KA BERONG ST. Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 1 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"205 FELISA ST. Parada Valenzuela City"},{"Raw Address":"406 BANDINO Parada Valenzuela City"},{"Raw Address":"L8 MERCURY F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"267 CORNER 24TH & 19TH Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"207 FILIZA BUKID Parada Valenzuela City"},{"Raw Address":"L10 B 2 PARADA EXT. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"413H SANTOS TWNH P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"L6 BF SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"#70 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"98 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"0281 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"#91 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"L-10 B-4 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"363 APT E. TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"222C ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"201 CALLE ONCE PARADA Valenzuela City"},{"Raw Address":"161 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"9 DR.LAUREL ST. Parada Valenzuela City"},{"Raw Address":"456-C KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"333 APTC. KAMAGONG ST FV6 Parada Valenzuela City"},{"Raw Address":"358 FRANCISCO Parada Valenzuela City"},{"Raw Address":"116 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"190 6TH ST Parada Valenzuela City"},{"Raw Address":"BL 3 LT 5 GINTONG SILANGAN 349 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"118 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"201 A. FELIZA Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"234 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"HIYAS HOME PARADA RD. Parada Valenzuela City"},{"Raw Address":"233 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"226 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"BLOCK 6 LOT 11 F FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"177 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"271 CONSUELO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"470 PARADA ST. Parada Valenzuela City"},{"Raw Address":"329 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"457 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"112 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"MACABALO APARTMENT PILAR ST. Parada Valenzuela City"},{"Raw Address":"118 E CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"442 P GOMEZ ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"21ST F5 MARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"4541 MOLAVE ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"15 F AANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"046 Fortune Village 5 PARADA RD. Parada Valenzuela City"},{"Raw Address":"LOT 5 BLK 10A NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"95P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"204 VENUS ST. E AND E COMPD. Parada Valenzuela City"},{"Raw Address":"406 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"185 A FELIZA ST Parada Valenzuela City"},{"Raw Address":"0222 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"467-A KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"410 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"BLK 2 LOT 1 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"472 KA BERONG ST. Parada Valenzuela City"},{"Raw Address":"0394L SAN ADNRES ST. Parada Valenzuela City"},{"Raw Address":"360 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"SAPHIRE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"132 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"123 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"256 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"352 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"121 E LAGDAME ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"232 S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"171 MOLAVE STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"130 5THV ST. FV 5 Parada Valenzuela City"},{"Raw Address":"468 KAINGI ST. Parada Valenzuela City"},{"Raw Address":"LOT 1 BLK. 11 FORTUNE DRIVE Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"LOT 10 NIPTUNE ST. Parada Valenzuela City"},{"Raw Address":"25 ST. FORTUNE Village Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"DIZON COMP. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"298 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"28 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"246 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"4541 MOLAVE ST. FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. F4 Parada Valenzuela City"},{"Raw Address":"246 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"168 TATA ERO ST Parada Valenzuela City"},{"Raw Address":"41 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"363 D. TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"91-B CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"343 F. FRANCISCOST Parada Valenzuela City"},{"Raw Address":"217 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"BLK.1 LOT 7 GOMEZ ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"171 A.SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 5TH ST. Parada Valenzuela City"},{"Raw Address":"224 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"150 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"254 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"19 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"272 DOOR 3 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"0339 ST. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"B1 L2 24TH ST. BEN MARIE COMP. Parada Valenzuela City"},{"Raw Address":"444 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"121 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"02 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"269 24TH STREET Parada Valenzuela City"},{"Raw Address":"37 PARADA RD. Parada Valenzuela City"},{"Raw Address":"4365 TATA ANDRES ST.PARADA Valenzuela City"},{"Raw Address":"327 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"403 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"184 RAMON FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"273 PILAR ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"407 Parada Valenzuela City"},{"Raw Address":"188 CAPT. CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"3201 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"039 RAMON ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"193 M. DE GULA ST Parada Valenzuela City"},{"Raw Address":"234 19TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"1548 F PEARL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"258 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST DOON COMPD Parada Valenzuela City"},{"Raw Address":"257 RIZALINA STREET Parada Valenzuela City"},{"Raw Address":"101 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"098 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"412 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"258 25TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"091 FORTUNE DR. PARADA Valenzuela City"},{"Raw Address":"166 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"108 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"278 PILAR ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"342 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"151 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"193 RAMON ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"140 E.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"PEARL CORNER SAPPHIRE ST. B.Parada Valenzuela City"},{"Raw Address":"401 SAN ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"121 CONSUELO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"013 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 7 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"# 10 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"155 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"257 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"312 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"140 NARRA ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. FV4 Parada Valenzuela City"},{"Raw Address":"168 TATA ERO Parada Valenzuela City"},{"Raw Address":"2970 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"312 INT.JIMENEZ COMPD. ST. Parada Valenzuela City"},{"Raw Address":"250 25TH ST. FORTUNE DRIVE Village 5 Parada Valenzuela City"},{"Raw Address":"13 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"266 24TH ST. FORTUNE 5 Parada Valenzuela City"},{"Raw Address":"207 A FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"169 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 STREET 21 Parada Valenzuela City"},{"Raw Address":"257 M DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"187 Parada Valenzuela City"},{"Raw Address":"414 A. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"171 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"466 KABERONG KAINGIN Parada Valenzuela City"},{"Raw Address":"BLK 2 GINTONG SILANGAN SAN FRANCISCO Parada Valenzuela City"},{"Raw Address":"99 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"185 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"392-B P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"PARADA ST. SALAZAR Parada Valenzuela City"},{"Raw Address":"290 M. ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"130 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"#230 18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"407 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"443 GOMEZ ST. PARADA Valenzuela City"},{"Raw Address":"230 1-F EMBUSCADO APT. S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"161 YAKAL ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"161 FELISA SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"028 CAPT. CRUZ. PARADA Valenzuela City"},{"Raw Address":"232 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"186 FELIZA Parada Valenzuela City"},{"Raw Address":"22 T.EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"121 CAPITAN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"#185 FILIZA Parada Valenzuela City"},{"Raw Address":"362 B. TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"BLK. 10 LOT 5 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"BLK Parada Valenzuela City"},{"Raw Address":"108 RAMON ST. Parada Valenzuela City"},{"Raw Address":"4542 ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"455 KAINGIN Parada Valenzuela City"},{"Raw Address":"123 LAGDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"22 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"88 A. CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"UNIT3A B9L30 NARRA ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"165 ACACIA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"174 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"140 E. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 14 349 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"1252 CONSUELO ST. Parada Valenzuela City"},{"Raw Address":"319 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"279 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"131 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"50 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"165 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"101 KAMAGONG ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"278 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"333 TANDANG MANANG. PARADA Valenzuela City"},{"Raw Address":"LOT 29 A BLK. 9 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"156 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"111-B KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"201 6THST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"70 PARADA RD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"199 21 STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"186 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"12 B. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"39C PARADA RD Parada Valenzuela City"},{"Raw Address":"23RD ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"122 B CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"91A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"42 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"70 PARADA Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"15 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"150 ALICIA FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"233 19 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"433 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"124 -B CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"9 M. LAUREL STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"88 I. SANTIAGO Parada Valenzuela City"},{"Raw Address":"31 U4&5 KAMAGONG Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"L8 B2 TINDALO ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"240 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"460 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"B2 L8 349 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"139 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#136 NARRA ST. Parada Valenzuela City"},{"Raw Address":"206 F.SANTIAGO ST.PARADA Valenzuela City"},{"Raw Address":"409 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"199 BENMARI CPD. Parada Valenzuela City"},{"Raw Address":"340 20TH ST. FV5 Parada Valenzuela City"},{"Raw Address":"133 KAMAGONG ST. FORTUNE VillageE Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMP Parada Valenzuela City"},{"Raw Address":"450 SERVICE ROAD WEST Parada Valenzuela City"},{"Raw Address":"457 F. KAINGIN ST Parada Valenzuela City"},{"Raw Address":"DAET CMPD.PARADA Valenzuela City"},{"Raw Address":"417 TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"128 YAKAL ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"177 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"95 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"166 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"9 PARADA RD. Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"150 AVELIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"111 BLK. B KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"Q02 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"296 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"244 7TH ST.FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"338 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"40 PARADA RD Parada Valenzuela City"},{"Raw Address":"287 SANTOLAN RD. PARADA Valenzuela City"},{"Raw Address":"24TH STREET BEN MARIE COMPD. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"094 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"79 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"417 TATA ERRO ST. Parada Valenzuela City"},{"Raw Address":"409 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"416 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"45-A F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"187 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"466 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"333 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"60 Fortune Village 6 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"409 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"466 KAINGIN ST . PARADA Valenzuela City"},{"Raw Address":"357 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"024 T.EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"LOT 31 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"333-A KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"332 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"199 21ST. BENMARE COMP. Parada Valenzuela City"},{"Raw Address":"139 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"65 PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"39 D SANTIAGO CPMD. FV4 Parada Valenzuela City"},{"Raw Address":"273 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"170 SLAZAR ST. Parada Valenzuela City"},{"Raw Address":"141 DALAWAN ST.PARADA Valenzuela City"},{"Raw Address":"279 B S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"B 2 L19 SAPPHIRE ST.HIYAS HOME Parada Valenzuela City"},{"Raw Address":"409 P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"138-E LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"347 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"1114 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"14 E. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"123 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"220 21ST ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"DOOR 4 ALFONSO APARTMENT M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"4-D S.DE GUZMAN ST. EMBUSCADO APT. Parada Valenzuela City"},{"Raw Address":"328 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"59 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"360-J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"138 NARRA ST. Parada Valenzuela City"},{"Raw Address":"358 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"INT. CAPT.CRUZ. ST. PARADA Valenzuela City"},{"Raw Address":"202 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"347 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ STREET Parada Valenzuela City"},{"Raw Address":"246 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"200 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"444 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"198 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"248 PARADA RD. Parada Valenzuela City"},{"Raw Address":"204-B F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"271 S. DEGUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"225 A BELARDO ST. FV4 Parada Valenzuela City"},{"Raw Address":"267 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"94 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"222 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"410P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"353 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"33 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"34 PARADA RD Parada Valenzuela City"},{"Raw Address":"365 B TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"351-C CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"DOOR B. MACABALO FORTUNE IV Village Parada Valenzuela City"},{"Raw Address":"090 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"78-B PARADA EXTN. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"E. QUENIO ST. Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMP 21 ST FORTUNE Parada Valenzuela City"},{"Raw Address":"203 18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"170 UNIT 1 SALAZAR Parada Valenzuela City"},{"Raw Address":"91 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"067 E PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"199 21 STREET Parada Valenzuela City"},{"Raw Address":"CABRAL ST. Parada Valenzuela City"},{"Raw Address":"207 FELISA ST Parada Valenzuela City"},{"Raw Address":"448 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"310 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"437 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"26 MARS ST. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"FELISA ST Parada Valenzuela City"},{"Raw Address":"117 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"167 6TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"435 B. ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"225 ABELARDO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"26 MARS ST. F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"67 FORTUNE VIILAGE 6 PARADA RD. Parada Valenzuela City"},{"Raw Address":"19921 ST. Parada Valenzuela City"},{"Raw Address":"410 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"454 SERVICE RD Parada Valenzuela City"},{"Raw Address":"B5 L6 F FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"15 F. Parada Valenzuela City"},{"Raw Address":"MENEZ COMPD. PARADA Valenzuela City"},{"Raw Address":"236 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"LOT10 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"332 TANDANG MANANG ST.PARADA Valenzuela City"},{"Raw Address":"B4L7 MHOAI TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"66 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"B3L24 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"202 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"162 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"229 ABELARDO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"133 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"29 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"170 RAMON ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B1 L7 LUPANG SINILANGAN Parada Valenzuela City"},{"Raw Address":"239 PARADA Valenzuela City"},{"Raw Address":"155 ALICIA ST FV4 Parada Valenzuela City"},{"Raw Address":"055 Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"141 FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"339TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"204 VENUS ST. F.SANTIAGO COMPD. Parada Valenzuela City"},{"Raw Address":"16 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"3 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"24 T. EUGENIO ST Parada Valenzuela City"},{"Raw Address":"358 J. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"BLK.14 L3 M. DELOS REYES ST. Parada Valenzuela City"},{"Raw Address":"392-B P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN EXT. Parada Valenzuela City"},{"Raw Address":"247 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"193 DE GULA ST. Parada Valenzuela City"},{"Raw Address":"233 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"25TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"170 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"349 F. FANCISCO ST. Parada Valenzuela City"},{"Raw Address":"424 BURGOS STREET Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"232 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"FORTUNE5 5 Parada Valenzuela City"},{"Raw Address":"204 VENUS STREET Parada Valenzuela City"},{"Raw Address":"326 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"BLK. 8 LOT 3 F.FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"465B KAINGIN ST Parada Valenzuela City"},{"Raw Address":"CRUZ ST. Parada Valenzuela City"},{"Raw Address":"91 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"257 M. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"185 A. FELIZA ST. Parada Valenzuela City"},{"Raw Address":". Parada Valenzuela City"},{"Raw Address":"WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"245 B DOON SALAZAR ST. COMPD. Parada Valenzuela City"},{"Raw Address":"230-S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"L 16 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"206 TATA ROMAN Parada Valenzuela City"},{"Raw Address":"0250 CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"199 21ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"273 S. DEGUZMAN Parada Valenzuela City"},{"Raw Address":"157 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 10 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"154 ALICICA ST. Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE FORTUNE Village. 5 Parada Valenzuela City"},{"Raw Address":"296 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"LOT 10 NEPTUNE F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"COR. 6TH ST. Parada Valenzuela City"},{"Raw Address":"100 CAPT. CRUS ST. Parada Valenzuela City"},{"Raw Address":"215 DAET COMPOUND Parada Valenzuela City"},{"Raw Address":"406 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"164 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"416 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"365-A TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"347 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"351 D. CAPT. F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"243 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"233 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"326 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"220 21ST STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"TOMASA Parada Valenzuela City"},{"Raw Address":"276 J S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"0334 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"BLOCK 7 LOT 9 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"91-E CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"BLK 1 LOT 13 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"316 MENES CMPD. PARADA Valenzuela City"},{"Raw Address":"110 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"FELIZA ABUKID Parada Valenzuela City"},{"Raw Address":"315 JIMENES COMP. PARADA Valenzuela City"},{"Raw Address":"0177 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 8 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 AGLIHAN COMPD. Parada Valenzuela City"},{"Raw Address":"PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"170 MOLAVE STR Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"172 RAMON ST. Parada Valenzuela City"},{"Raw Address":"202-A FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"9-E PARADA ROAD Parada Valenzuela City"},{"Raw Address":"206 D 22ND ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"05 118 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"267 INANG PETRA ST Parada Valenzuela City"},{"Raw Address":"324 TANGDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"BLK.8 LOT31 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"327 T. MANANG Parada Valenzuela City"},{"Raw Address":"297 B. TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"132 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"26 MARS STREET Parada Valenzuela City"},{"Raw Address":"215 DAET COMP Parada Valenzuela City"},{"Raw Address":"L14 B 5 GINTONG SILANGAN ST. Parada Valenzuela City"},{"Raw Address":"172 Parada Valenzuela City"},{"Raw Address":"207 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"115 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"85 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"283 MARTHA ST Parada Valenzuela City"},{"Raw Address":"195 19TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"199 CALLE ONSE ST. PARADA Valenzuela City"},{"Raw Address":"LOT 17 BLK 2 SAPPHIRE ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"28 PARADA Valenzuela City"},{"Raw Address":"LOT 4 BLK 21 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"F. FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"33 EARTH ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"406 BANDINO ST Parada Valenzuela City"},{"Raw Address":"349 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"249 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"168-B SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"052 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"363-D TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"LOT 6-B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"236 7TH ST. PARADA Valenzuela City"},{"Raw Address":"5 Parada Valenzuela City"},{"Raw Address":"5 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"18 BEN MARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"320 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"40 PEARL ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"200 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"214 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"255 TOMAS ST. Parada Valenzuela City"},{"Raw Address":"424 BURGOS STREET Parada Valenzuela City"},{"Raw Address":"119 PEARL ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"279 PILAR ST Parada Valenzuela City"},{"Raw Address":"440 SERVICE RD Parada Valenzuela City"},{"Raw Address":"0349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"242 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"271 MARTHA ST. Parada Valenzuela City"},{"Raw Address":"24TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"11 PARADA ROAD ST. Parada Valenzuela City"},{"Raw Address":"L6 B2 TINDALO ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"01 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"FELIZA Parada Valenzuela City"},{"Raw Address":"146 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"09 BO. PARADA RD. Parada Valenzuela City"},{"Raw Address":"405 B P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"181 FELIZA ST Parada Valenzuela City"},{"Raw Address":"342 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"333 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"123 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"192 M DEGULA Parada Valenzuela City"},{"Raw Address":"173 SALAZAR ST. BO. PARADA Valenzuela City"},{"Raw Address":"416 TATA ERO Parada Valenzuela City"},{"Raw Address":"124 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"422 GOMEZ ST. FORUNE Village 7 Parada Valenzuela City"},{"Raw Address":"90 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"380 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"410 A- P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"506 TINDALO ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"86 SALVADOR Parada Valenzuela City"},{"Raw Address":"31 EARTH ST. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"DOOR 12 118 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"199 AGLIHAM COMPD. Parada Valenzuela City"},{"Raw Address":"272 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"377 TATA ANDRESS ST. Parada Valenzuela City"},{"Raw Address":"384 SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"233 ABELARDO FAVillageA Parada Valenzuela City"},{"Raw Address":"5JUPITER ST. Parada Valenzuela City"},{"Raw Address":"333-F KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"204 F SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"355 J. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"111 YAKAL STREET Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"L8 MERCURY F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"352 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"201 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"235 ABELARDO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"0260 1 TATA ROMAN S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"84 A CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"131-C CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"252 ABELARDO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMPD. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"455 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"PARADA ROAD 28 Parada Valenzuela City"},{"Raw Address":"14 B PARADA RD. Parada Valenzuela City"},{"Raw Address":"26 F. SNTIAGO ST. Parada Valenzuela City"},{"Raw Address":"16 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"147 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"258 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"314 MENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"184 RAMON ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"25 STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"242 DE GUZMAN Parada Valenzuela City"},{"Raw Address":"410 T. MANANG Parada Valenzuela City"},{"Raw Address":"313 MENEZ CMPD. Parada Valenzuela City"},{"Raw Address":"330 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"277 PILAR ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN SANTOS TOWAN HOUSE Parada Valenzuela City"},{"Raw Address":"202 FELIZA Parada Valenzuela City"},{"Raw Address":"278 PILAR STREET Parada Valenzuela City"},{"Raw Address":"14 DIAMOND ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"131-CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"325 Parada Valenzuela City"},{"Raw Address":"055 PARADA RD. COR. IPIL ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"311 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG LOT 3 BLOCK 14 Parada Valenzuela City"},{"Raw Address":"286 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"203 6TH STREET FORTUNE Village 5-6 Parada Valenzuela City"},{"Raw Address":"DELA CRUZ COMP. CALLE ONSE DULO Parada Valenzuela City"},{"Raw Address":"026 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"411 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"325 T.MANANAG ST Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"51 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 9 GINTONG SILANGAN A . FRANCISCO Parada Valenzuela City"},{"Raw Address":"046 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"414 ZAMORA ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"002 YAKAL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"11-B S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"146 NARRA ST. Parada Valenzuela City"},{"Raw Address":"123 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"407-B P. DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"200 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"061 PARADA RD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"D: Parada Valenzuela City"},{"Raw Address":"330 TIA. MANANG ST. Parada Valenzuela City"},{"Raw Address":"93 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"407 BANDINO ST. Parada Valenzuela City"},{"Raw Address":"#267 INANG PETRA ST. Parada Valenzuela City"},{"Raw Address":"007 PARADA RD Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"133 ST.PARADA Valenzuela City"},{"Raw Address":"5TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"150 NARRA STREET Parada Valenzuela City"},{"Raw Address":"1288 KAMAGONG STREET Parada Valenzuela City"},{"Raw Address":"146 DALAWAN Parada Valenzuela City"},{"Raw Address":"267 INANG PETRA ST. Parada Valenzuela City"},{"Raw Address":"384 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"200 FORTUNE V FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"119 Fortune Village 5 6 ST. Parada Valenzuela City"},{"Raw Address":"161 B SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"L2 DIAMOND ST HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"192-3 6TH ST. Parada Valenzuela City"},{"Raw Address":"177 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 22 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"347 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"0320 D S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"262 25TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"416 TATAERO ST. Parada Valenzuela City"},{"Raw Address":"407 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"25TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"9 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 6 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"403 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"457 KAINGIN ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"204 VENUS ST CMPD SALAZAR Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 19 HIYAS HOMES SAPHIRE ST. Parada Valenzuela City"},{"Raw Address":"379 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"407 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"376 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"419 ZAMORA ST. FV7 Parada Valenzuela City"},{"Raw Address":"F.FRNCISCO ST. Parada Valenzuela City"},{"Raw Address":"406 BANDINO ST. P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"30 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"360 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"351 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"124B CUPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"FELIZA BUKID ST Parada Valenzuela City"},{"Raw Address":"37 PARADA RD Parada Valenzuela City"},{"Raw Address":"200 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"168 INT. SALAZAR ST. BO.PARADA Valenzuela City"},{"Raw Address":"94- B FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"409 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"169 DOON COMPOUND Parada Valenzuela City"},{"Raw Address":"199 6TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"007 F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"419 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"222 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"200 FORTUNE Village 5 Valenzuela City Parada Valenzuela City"},{"Raw Address":"0394 (G.) SAN ANDRES STREET Parada Valenzuela City"},{"Raw Address":"8 VENANIO RD. P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"234 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"116 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"31 F. SANT IAGOS T. Parada Valenzuela City"},{"Raw Address":"200C CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"310 MENEZ CMPD. PARADA Valenzuela City"},{"Raw Address":"351 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"#255 TOMASA ST. Parada Valenzuela City"},{"Raw Address":"0306 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"168N SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"LT 6B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"228-A S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"BLK4 LOT7 TANDANG MANANG TMHOA Parada Valenzuela City"},{"Raw Address":"287 BO. PARADA SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"457-F KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"400 SAN ANDRES Parada Valenzuela City"},{"Raw Address":"366 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"320 A SANTIAGO DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"442 P GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"BLK.1 LOT12 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"170 DOON COMP. SALAZAR Parada Valenzuela City"},{"Raw Address":"77 PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"307 FELISA STREET Parada Valenzuela City"},{"Raw Address":"KALYE ONSE BUKID Parada Valenzuela City"},{"Raw Address":"268 25TH Fortune Village 5. Parada Valenzuela City"},{"Raw Address":"257 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"KA BERONG ST. PARADA Valenzuela City"},{"Raw Address":"UNIT 1 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"SALASAR ST. Parada Valenzuela City"},{"Raw Address":"2860 140 E FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"357 FRANCISCO Parada Valenzuela City"},{"Raw Address":"276 SANTOLAN PARADA Valenzuela City"},{"Raw Address":"FILEZA BUKID Parada Valenzuela City"},{"Raw Address":"150 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"B3L3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"266B 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"264 B 4TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"207 FILISA BUKID Parada Valenzuela City"},{"Raw Address":"095 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"131 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"122 B KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"39-K RAMON ST. Parada Valenzuela City"},{"Raw Address":"246 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"LOT 6 B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"245 19TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"141 FORTUNE DRIVE PARADA RD. Parada Valenzuela City"},{"Raw Address":"33 F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"132 LAGDAMEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"200 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"284 P. DEGUZMAN Parada Valenzuela City"},{"Raw Address":"456 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"149 A 6TH ST. KAMAGONG ROAD Parada Valenzuela City"},{"Raw Address":"168 DOON COMPOUND SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"207 STREET FILISA BUKID Parada Valenzuela City"},{"Raw Address":"01 CALLE ONSE DULO Parada Valenzuela City"},{"Raw Address":"201 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"233 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"022 EUGENIO Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES ST.PARADA Valenzuela City"},{"Raw Address":"92 FORTUNE DR. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"366 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"55 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"155 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"L12 BURGOS ST Parada Valenzuela City"},{"Raw Address":"110 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"237 19TH ST. Parada Valenzuela City"},{"Raw Address":"B4 L11 GINTONG SILANGAN COMP. F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"297 D TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"B4 L11 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"60 PARADA RD. Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"50 PARADA ST. PARADA Valenzuela City"},{"Raw Address":"1288 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"247 S.DEGUZMAN Parada Valenzuela City"},{"Raw Address":"290 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"2532 140 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"429 BURGOS ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"274 Parada Valenzuela City"},{"Raw Address":"250 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"207 22ND STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"243 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"B2 L1 S. DE GUZMAN ST. VillageA Parada Valenzuela City"},{"Raw Address":"CALLE ONCE ST. PARADA Valenzuela City"},{"Raw Address":"150 ALICIA ST Parada Valenzuela City"},{"Raw Address":"121 Parada Valenzuela City"},{"Raw Address":"169 DON COMPOUND SALAZAR ST Parada Valenzuela City"},{"Raw Address":"158 NARRA ST. Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ Parada Valenzuela City"},{"Raw Address":"168 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"254 25TH. Parada Valenzuela City"},{"Raw Address":"424 BURGOS Parada Valenzuela City"},{"Raw Address":"125 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"33 Parada Valenzuela City"},{"Raw Address":"466C KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"158 ALICIA ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"274 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"1288 KAMAGONG STREET CORNER 6TH STREET Parada Valenzuela City"},{"Raw Address":"138 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"440 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"415 Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"93 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"100 E CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"237 19TH Parada Valenzuela City"},{"Raw Address":"214 IPIL ST. Parada Valenzuela City"},{"Raw Address":"252 DEGUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"107 E.LAGDAMEO ST. FVF. 4 PARADA Valenzuela City"},{"Raw Address":"258 INT. S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"210 21TH STREET COR. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CORNER 23 RD. ST. FOERTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39 PARADA RD. STREET Parada Valenzuela City"},{"Raw Address":"412-B P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"184 Parada Valenzuela City"},{"Raw Address":"140 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"15 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"SISCAR APARTMENT ADOR ST Parada Valenzuela City"},{"Raw Address":"369 T.ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"028 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"116 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"67 B PARADA ROAD EXIT FORTUNE6 Parada Valenzuela City"},{"Raw Address":"407-B P.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"122 CALLE II PARADA Valenzuela City"},{"Raw Address":"249 Parada Valenzuela City"},{"Raw Address":"161 YAKAL ST. COR. MOLAVE Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"215 21ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"168 SALAZAR Parada Valenzuela City"},{"Raw Address":"FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"116 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"170SALAZAR ST Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"415 TATA ERO ST Parada Valenzuela City"},{"Raw Address":"175-B RAMON STREET Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"215 PARADA Valenzuela City"},{"Raw Address":"39-B RAMON ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"101 M. DE GULA STREET Parada Valenzuela City"},{"Raw Address":"128 PARADA ROAD FVG Parada Valenzuela City"},{"Raw Address":"201 22ND ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"BENMARIE 21ST ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"231 A BELARDO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"466-C KA BERONG ST.KAINGIN Parada Valenzuela City"},{"Raw Address":"34 PARADA ST. Parada Valenzuela City"},{"Raw Address":"406 Parada Valenzuela City"},{"Raw Address":"395 SAN ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"#92 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"234 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"339 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"192 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"139 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"021 EUGENIO BARIO Parada Valenzuela City"},{"Raw Address":"175 FELISA ST. Parada Valenzuela City"},{"Raw Address":"F. Village 5 Parada Valenzuela City"},{"Raw Address":"422 BURGOZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"132 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"201 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"267 PETRA Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST Parada Valenzuela City"},{"Raw Address":"410 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"250 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"LT 6 B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"469-B KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"487 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"# 95 A. F. SNTIAGO Parada Valenzuela City"},{"Raw Address":"99 SATURN ST F SANTIAGO Parada Valenzuela City"},{"Raw Address":"227 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"236 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"441 Parada Valenzuela City"},{"Raw Address":"41 B. TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"0506 UNIT 2 TINDALO ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"465 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"95 M DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"308 JIMENES COMP. Parada Valenzuela City"},{"Raw Address":"293 ILOCTO ST. PARADA Valenzuela City"},{"Raw Address":"#26 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"206 D 22ND ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"500 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"14 DIAMOND STREET Parada Valenzuela City"},{"Raw Address":"83 CAPT. CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"207 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"86 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"4541 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"204 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"25 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"264 19TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"333 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"299 BO. PARADA Valenzuela City"},{"Raw Address":"387 S.DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"53 SALAZAR RD. BOPARADA Valenzuela City"},{"Raw Address":"137 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"BENMARIE COMPD. 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"230 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"LOT 2 DIAMOND ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"012 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"136 KAMAGONG ST Parada Valenzuela City"},{"Raw Address":"090 CAPT. CRUZ ADOR ST. Parada Valenzuela City"},{"Raw Address":"273 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"204 ANTHONY STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ ST Parada Valenzuela City"},{"Raw Address":"B1 L3 SAPPHIRE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"186 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"180 23RD ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"207 FELIZA ST Parada Valenzuela City"},{"Raw Address":"224 20TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"207 22ND ST. Parada Valenzuela City"},{"Raw Address":"161 A SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"146 Fortune Village 6 NARRA ST. Parada Valenzuela City"},{"Raw Address":"378 A. TATA ANDRES Parada Valenzuela City"},{"Raw Address":"169 D 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"249 ABELLARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"2531 M.DELOS REYES ST. PARADA Valenzuela City"},{"Raw Address":"456 KAINGIN Parada Valenzuela City"},{"Raw Address":"MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"64 PARADA RD. FORTUNE Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"B-7 L-7 BURGOS ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"310 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"458 P. ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"308 A. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"009 CABRAL ST. Parada Valenzuela City"},{"Raw Address":"WEST CVR Parada Valenzuela City"},{"Raw Address":"9E PARADA RD. PARADA Valenzuela City"},{"Raw Address":"# 347 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST.GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 7 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"07 HIYAS HOMES CORAL ST. Parada Valenzuela City"},{"Raw Address":"199 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"389 IMPONG JUANA ST. Parada Valenzuela City"},{"Raw Address":"325 T MANANG ST Parada Valenzuela City"},{"Raw Address":"188 DE GULA ST. Parada Valenzuela City"},{"Raw Address":"0002 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"415 B TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"223 A BELARDO ST. Parada Valenzuela City"},{"Raw Address":"456 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"#15 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"51 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"198 RAMON FORUNTE Village 4 Parada Valenzuela City"},{"Raw Address":"85 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"39 A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"98 KAMAGONG Parada Valenzuela City"},{"Raw Address":"LOT 2 BLK. 2 SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"178 RAMON Parada Valenzuela City"},{"Raw Address":"448 ROMARAO SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"423 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"331 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"235 S DU GUZMAN ST Parada Valenzuela City"},{"Raw Address":"254 25ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"B1L5 TMHOA TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"98 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"PEARL ST. HIYAS HOMES SUBD. BO. Parada Valenzuela City"},{"Raw Address":"357 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. DOON CPND. Parada Valenzuela City"},{"Raw Address":"BLOCK 1 LOT 12 BURGOS ST. FV7 Parada Valenzuela City"},{"Raw Address":"199 21 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"17 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"225 ABELARDO STREET Parada Valenzuela City"},{"Raw Address":"272 IMPONG JUANA ST. S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"101 E. LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"25 PARADA RD. Parada Valenzuela City"},{"Raw Address":"169 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"25 ST. FV5 Parada Valenzuela City"},{"Raw Address":"268 25TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"406 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"ure Name and Signature Parada Valenzuela City"},{"Raw Address":"BLOCK 7 LOT 17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"357 J. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"297 TADANG MANANG Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"131 CAPT. CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"366 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"01 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"472 KABERONG ST. Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG STREET Parada Valenzuela City"},{"Raw Address":"87 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"183 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"055 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"260 TATA ROMAN STREET Parada Valenzuela City"},{"Raw Address":"185 D FELIZA ST. Parada Valenzuela City"},{"Raw Address":"9 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"4-3 GINTONG SILANGAN F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPOUND 21ST STREET Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ CMPD. PARADA Valenzuela City"},{"Raw Address":"26 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"112 Parada Valenzuela City"},{"Raw Address":"019 PARADA Valenzuela City"},{"Raw Address":"33 EARTH F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"260 RIZALIN ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"mplete. Parada Valenzuela City"},{"Raw Address":"80 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"156 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"407 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"442 ST. PARADA Valenzuela City"},{"Raw Address":"377 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"412B P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"2345 DE GUZMAN Parada Valenzuela City"},{"Raw Address":"232 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"272 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"469 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"98L KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"83 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"349 CAINGIN Parada Valenzuela City"},{"Raw Address":"244 7 ST. FV 5 Parada Valenzuela City"},{"Raw Address":"130 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"153 PARADA Valenzuela City"},{"Raw Address":"86 SALVADOR ST. BRGY. PARADA Valenzuela City"},{"Raw Address":"244 FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"311 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"39B RAMON ST. Parada Valenzuela City"},{"Raw Address":"199 BM COMP. 21 ST FV5 Parada Valenzuela City"},{"Raw Address":"ILOCTO ST. PARADA RD. Valenzuela City Parada Valenzuela City"},{"Raw Address":"B19 EARTH ST Parada Valenzuela City"},{"Raw Address":"261 25ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"429 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"220 SALVADOR ST. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"166 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"229 ABELARDO ST.FV 4 Parada Valenzuela City"},{"Raw Address":"BLK. 6 LOT 7 Parada Valenzuela City"},{"Raw Address":"99 VENUS Parada Valenzuela City"},{"Raw Address":"94 B. FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"BLK. 3 LOT 12 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"2OO C. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"56 P. DE GUZMAN TATA ERRO ST Parada Valenzuela City"},{"Raw Address":"443 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"LOT 31 EARTH ST. SANTIAGO Parada Valenzuela City"},{"Raw Address":"201 A. FELIZA ST Parada Valenzuela City"},{"Raw Address":"B3L16 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"255 TOMASA ST. Parada Valenzuela City"},{"Raw Address":"192 A M . DEGULA ST. Parada Valenzuela City"},{"Raw Address":"B2L23 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"Village 5&6 Parada Valenzuela City"},{"Raw Address":"230 - 1 D. S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"SAPPHIRE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"368 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"091 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"77 CCAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"192 RAMON ST FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"Q4289 KAMAGONG ST Parada Valenzuela City"},{"Raw Address":"LOT 1 BLK 1 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"131 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"466 C. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"2 TINDALO ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"039 D. SANTIAGO COMPOUND Parada Valenzuela City"},{"Raw Address":"73 GOMEZ ST Parada Valenzuela City"},{"Raw Address":"B4 L 18 PEARL ST. HIYAS Parada Valenzuela City"},{"Raw Address":"BLK. 7 37 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"1ST ST. BEN MARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"50 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"94B FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"440 RUMARAO ST. Parada Valenzuela City"},{"Raw Address":"12 VENUS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"0394 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"257 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"319 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 20 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"440 RUMARAO CMPD. Parada Valenzuela City"},{"Raw Address":"DOOR2 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"B2L3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"184 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"415 TIA MANANG ST. PARADA Valenzuela City"},{"Raw Address":"349 F FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"18 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"233 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"290 M. ILOCTO STREET Parada Valenzuela City"},{"Raw Address":"B6 L9 PEARL CORNER JADE HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"302 B CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"W77 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"12 VENUS ST. E&E COMPD. Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"BLK4 LOT3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"314 D JIMENEZ COMPOUND ST. Parada Valenzuela City"},{"Raw Address":"252 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"497 Parada Valenzuela City"},{"Raw Address":"181 23RD STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 10 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"297 PARADA Valenzuela City"},{"Raw Address":"403-B TANDANG MANANG ST.PARADA Valenzuela City"},{"Raw Address":"40 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"UNIT 2 #14 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"68 B PARADA RD Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"193-A M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"349 F. FARNCISCO ST. Parada Valenzuela City"},{"Raw Address":"199 6STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"138 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"028 EUGENIO Parada Valenzuela City"},{"Raw Address":"DOOR B PILAR ST. FORTUNE IV Parada Valenzuela City"},{"Raw Address":"411 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"264 Parada Valenzuela City"},{"Raw Address":"456 KAINGIN ST. BO. PARADA Valenzuela City"},{"Raw Address":"99 VENUS ST. Parada Valenzuela City"},{"Raw Address":"175 MOLAVE ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"409 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"80 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"206 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"272- A S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"122 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"32B 258 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"315 MENES CMPD. PARADA Valenzuela City"},{"Raw Address":"19 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"37 D. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"28 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"415 ZAMORA STREET FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"216 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"349 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"391 SANTALON RD. Parada Valenzuela City"},{"Raw Address":"BET 6 AND 7 ST. FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"275 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"416 TATA ERRO ST. Parada Valenzuela City"},{"Raw Address":"12 - I CONSUELO ST. Parada Valenzuela City"},{"Raw Address":"460 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"320 2nd Floor E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"440 ROMARAO COMPD. WESTSERVICE ROAD Parada Valenzuela City"},{"Raw Address":"96 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"JVC PARADA Valenzuela City"},{"Raw Address":"BEN MARIE CMPD. 21ST ST. Parada Valenzuela City"},{"Raw Address":"188 MOLAVE COR 6TH ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"194 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"269 INANG PETRA Parada Valenzuela City"},{"Raw Address":"130 5TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"#77 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"097 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"363 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"CORNER HIYAS STREET Parada Valenzuela City"},{"Raw Address":"16 VENUS ST. E&E COMPD. Parada Valenzuela City"},{"Raw Address":"VAL. M.M. Parada Valenzuela City"},{"Raw Address":"283 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"7 PARADA RD. Parada Valenzuela City"},{"Raw Address":"17 D. F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"6 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"283 S . MARTHA ST. Parada Valenzuela City"},{"Raw Address":"276 PILAR ST. Parada Valenzuela City"},{"Raw Address":"138 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 11 SAPPHIRE ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"468 CAINGIN ST. Parada Valenzuela City"},{"Raw Address":"309 MENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"45 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"083 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"888 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"222 20TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B5 L 2 F FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"B2 L17 F. FRANCISCO ST. SILANGAN Parada Valenzuela City"},{"Raw Address":"117A CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"064 FORTUNE RD. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"#170 SALAZAR ST. DOON COMPOUND Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPD. FV5 Parada Valenzuela City"},{"Raw Address":"443-3 SERVICE RD Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 8 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"169 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"257 FORTUNE DR. PARADA Valenzuela City"},{"Raw Address":"289 SANTOLAN RD Parada Valenzuela City"},{"Raw Address":"97A CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"COR. OLIVA ST. & RAMON ST. FV4 Parada Valenzuela City"},{"Raw Address":"341 20TH ST.FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"216 ANTHONY ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"200 C. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"130 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"9 PLUTO F .SANTIAGO Parada Valenzuela City"},{"Raw Address":"32 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"DE GULA APT. Parada Valenzuela City"},{"Raw Address":"344 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"116 CALLE ONSE BUKID Parada Valenzuela City"},{"Raw Address":"174 FELIZA ST Parada Valenzuela City"},{"Raw Address":"358 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"525 T. EUGENIO ST Parada Valenzuela City"},{"Raw Address":"361 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"357 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"170 DOON COMP. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"355 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"2735 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"232 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"0909 ADOR STREET Parada Valenzuela City"},{"Raw Address":"022 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"233 FRANCISCO ST.PARADA Valenzuela City"},{"Raw Address":"203 B. VENUS STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"438 WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"198 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"250 UNIT 9 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"267 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"276 E S. DEGUZMAN Parada Valenzuela City"},{"Raw Address":"064 PARADA ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"0250 DR2 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"26 MARS ST. F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"181 RAMON ST. Parada Valenzuela City"},{"Raw Address":"75 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST FV4 Parada Valenzuela City"},{"Raw Address":"442 18TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"LT 6-B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ Parada Valenzuela City"},{"Raw Address":"248 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"015 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"165 UNIT 3 ACACIA FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"149 NARRA ST. Parada Valenzuela City"},{"Raw Address":"419 ZAMORA ST. FORTUNE Village 7 BO. Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"25TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"113 Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 8 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"88 F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"99 VENUS ST F SANTIAGO Parada Valenzuela City"},{"Raw Address":"416 TATAERO Parada Valenzuela City"},{"Raw Address":"161 SALAZAR Parada Valenzuela City"},{"Raw Address":"306 CAPT.DAET COMP. Parada Valenzuela City"},{"Raw Address":"95 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"131 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"194 RAMON STREET Parada Valenzuela City"},{"Raw Address":"270 A.S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"ALICIA ST.Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"336 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"BLK 16 LOT 12 M DELOS REYES ST. Parada Valenzuela City"},{"Raw Address":"142 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"77 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"B1 L 3 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"1827 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"68 B PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"L1 B2 A. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"B1 L1 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"111E LAGDAMEO STREET Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"SANTOAGO ST. Parada Valenzuela City"},{"Raw Address":"166 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"207 ANTHONY Parada Valenzuela City"},{"Raw Address":"107 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"451 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"245 7 TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"196 MOLAVE ST FORTUNE6 Parada Valenzuela City"},{"Raw Address":"193 FORTUNE DR. ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"299 B TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"441 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"278 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"321-1 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"431 B. GOMEZ ST Parada Valenzuela City"},{"Raw Address":"LOT 10 NEPTUNE F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 8 F.FRANCISCO ST. GINTOMG Parada Valenzuela City"},{"Raw Address":"124 LAGDAMEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"446 GOMEZ ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"277 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"362A TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"182 K MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"341 21ST ST. BENMARIE COMP. Parada Valenzuela City"},{"Raw Address":"#230 18TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"055 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"414 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"0098 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"45 PARADA RD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"281 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"388 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"145 UNIT B NARRA FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"257 M. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"172 MOLAVE ST. CORNER IPIL FV6 Parada Valenzuela City"},{"Raw Address":"1-DEMBUSCADO APT. 230 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"290 SANTOLAN RD. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"224 21ST ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLACK 6 LOT 11 F FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"435 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"287 SANTOLAN Parada Valenzuela City"},{"Raw Address":"# 61 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"199 BENMARIE GARDEN 21 ST. Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. E&E SUBD. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"39 RAMON ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"E.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"169 F. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"348 CAPT. F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"0385 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"287 SANTOLAN ST. PARADA Valenzuela City"},{"Raw Address":"328 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"173 23RD ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"007 Parada Valenzuela City"},{"Raw Address":"14 B PEARL ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"MOLAVE ST. COR. IPIL Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"011 PARADA ST. Parada Valenzuela City"},{"Raw Address":"166 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"186-D 6TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"310 MENEZ STREET Parada Valenzuela City"},{"Raw Address":"28 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"354 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"LOT 6B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"453 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"194 19TH STREET Parada Valenzuela City"},{"Raw Address":"232 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"BLK 4 LOT1 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"333 T. MANANG ST. PARADA Valenzuela City"},{"Raw Address":"207 ANTHONY ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B5 L17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"116 Parada Valenzuela City"},{"Raw Address":"24 ST F SANTIAGO Parada Valenzuela City"},{"Raw Address":"123 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"115 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"236 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"377 18ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39-B RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"141 Parada Valenzuela City"},{"Raw Address":"441 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"274 PILAR ST FORTUNE FOUR Parada Valenzuela City"},{"Raw Address":"190 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"064 PARADA ROAD FORTUNE Village.. Parada Valenzuela City"},{"Raw Address":"362-B TATA ANDRES Parada Valenzuela City"},{"Raw Address":"243 SOUTH DE GUZMAN Parada Valenzuela City"},{"Raw Address":"104 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"LOT 12 BLOCK 5 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"317 F Parada Valenzuela City"},{"Raw Address":"5TH ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"247 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"257 A. M. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"29 PARADA RD Parada Valenzuela City"},{"Raw Address":"157-B PARADA Valenzuela City"},{"Raw Address":"61 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"192 RAMOS ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"135 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"147 ALICIA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"349 A FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"0035 KAINGIN Parada Valenzuela City"},{"Raw Address":"04 MARS ST. F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"073 PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"182 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"173 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"270 CONSUELO ST. Parada Valenzuela City"},{"Raw Address":"290 ILOCTO COMPOUND P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"249 ABELARDO Parada Valenzuela City"},{"Raw Address":"45 PARADA RD. FORTUNE Village 5 Valenzuela City Parada Valenzuela City"},{"Raw Address":"15 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"95 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"215 DAET COMPD. Parada Valenzuela City"},{"Raw Address":"234 S.DE GUZMAN ST. PARADA RD. Parada Valenzuela City"},{"Raw Address":"HIYAS HOMES SUBD. SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"258-S.DE GUZMANST. PARADA Valenzuela City"},{"Raw Address":"22A EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"#131 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"355 J.FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID STREET Parada Valenzuela City"},{"Raw Address":"109 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"347 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"19 BLK. 4 FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"BLK. 6 LOT 4 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE VIILL. 5 Parada Valenzuela City"},{"Raw Address":"ALICIA ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. Parada Valenzuela City"},{"Raw Address":"098 7TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"272 PILAR Parada Valenzuela City"},{"Raw Address":"349 CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"#28 NARRA ST. Parada Valenzuela City"},{"Raw Address":"172 23RD ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"256 RIZALINA ST. FORTUNE FOUR Parada Valenzuela City"},{"Raw Address":"100 LAGMADEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"21ST. FORTUNE DRIVE COFR. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"470 KAINGIN RD. Parada Valenzuela City"},{"Raw Address":"111 YAKAL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"136 E. LAGDAMEO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"259 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"465 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"132 C KAMAGONG FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"317 A.TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"96 PARADA Valenzuela City"},{"Raw Address":"193 6TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"252 ABELARDO Parada Valenzuela City"},{"Raw Address":"285 25TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"80 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"334 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"015 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"203-18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"Q5151 CASTRO COMPD. Parada Valenzuela City"},{"Raw Address":"411 TATAERO ST. Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ. PARADA Valenzuela City"},{"Raw Address":"199 ANTHONY ST. PARADA Valenzuela City"},{"Raw Address":"177 FELISA ST. Parada Valenzuela City"},{"Raw Address":"78 PARADA ROAD EXTN. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"310 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"184 FELIZA Parada Valenzuela City"},{"Raw Address":"68 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"135 A CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"KALYE ONSE Parada Valenzuela City"},{"Raw Address":"PARADA ST. Parada Valenzuela City"},{"Raw Address":"250-B S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"Q 551 CASTRO COMPD. Parada Valenzuela City"},{"Raw Address":"130 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"2-B F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"181 RAMON ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"2695 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"088 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"ADOR STREET Parada Valenzuela City"},{"Raw Address":"67 PARADA RD. Parada Valenzuela City"},{"Raw Address":"297-D TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"21 FORTUNE STREET Parada Valenzuela City"},{"Raw Address":"440 RUMARAO COMPD. SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"39 RAMON ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"94 A. FELIZA ST. Parada Valenzuela City"},{"Raw Address":"181 A. MOLAVE ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"424 A. BURGOS ST Parada Valenzuela City"},{"Raw Address":"440 SERVICE RD. ROMARAO COMP. Parada Valenzuela City"},{"Raw Address":"93 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"310 JIMENES COMP. Parada Valenzuela City"},{"Raw Address":"1010 A. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"388 IMPONG JUANA S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"44 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"279 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"11 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"230-1-D S. D GUZMAN ST EMBUSCADO APT. Parada Valenzuela City"},{"Raw Address":"14 DIAMOND ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"207 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"320 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"218 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"175 23 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"286 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"85 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"ADOR ST SISCAR APT. Parada Valenzuela City"},{"Raw Address":"19 BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"8 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"LOT 12 BLK 1 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"126 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"#3 A. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"152 ALICIA STREET Parada Valenzuela City"},{"Raw Address":"36 PARADA RD. Parada Valenzuela City"},{"Raw Address":"326 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"358 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"247 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"278 TATA ENTONG ST. S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"199 FORTUNE Village 5 21ST STREET Parada Valenzuela City"},{"Raw Address":"282 SANTALON RD. PARADA Valenzuela City"},{"Raw Address":"257 ADOR ST Parada Valenzuela City"},{"Raw Address":"098 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"330 T.AMANANG ST. PARADA Valenzuela City"},{"Raw Address":"BLK. 4 LOT 5 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"BENMARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"1223 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"7 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"200 A. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"140 E. FRANCISCO Parada Valenzuela City"},{"Raw Address":"091-B CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"325 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"411 P. DE GUZMAN ST. TATAERO Parada Valenzuela City"},{"Raw Address":"140 NARRA ST FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"F. FRANCISCO BAGONG SILANG Parada Valenzuela City"},{"Raw Address":"32- F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. FV4 Parada Valenzuela City"},{"Raw Address":"TATA ANDRES ST. RIVERA CMPD. Parada Valenzuela City"},{"Raw Address":"165 ACACIA Parada Valenzuela City"},{"Raw Address":"FORTUNE DRIVE 501 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"2 JUPITER ST. Parada Valenzuela City"},{"Raw Address":"470 KAINGIN ST. SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"297 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"35 5TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 9 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"02 TINDALO ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"39 A PARADA RD. Parada Valenzuela City"},{"Raw Address":"114 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 207 22ND ST. Parada Valenzuela City"},{"Raw Address":"97 KAPT. CRUZ PARADA Valenzuela City"},{"Raw Address":"12B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"257 20ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"UNIT 1 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"204 6 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"CALLE ONSE DULO Parada Valenzuela City"},{"Raw Address":"257 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"378 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"003 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"242 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"306 - A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"14 PARADA RD. Parada Valenzuela City"},{"Raw Address":"287 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"272 A S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"435-C ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"204 ANTHONY Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"358 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"116 CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"15 DIAMOND STREET Parada Valenzuela City"},{"Raw Address":"412 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"452 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"0024 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"24 JENUS Parada Valenzuela City"},{"Raw Address":"BLOCK 4 LOT 17 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"172 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"206 22ND ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"504 FORTUNE DR. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"277 PILLAR ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"425-T.MANANG ST. BO.PARADA Valenzuela City"},{"Raw Address":"Fortune Village 5 21ST. STREET Parada Valenzuela City"},{"Raw Address":"122 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"168 DOON COMP. Parada Valenzuela City"},{"Raw Address":"18 ROAD Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE 21ST. Parada Valenzuela City"},{"Raw Address":"11 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"FORTUNE IV Parada Valenzuela City"},{"Raw Address":"0378 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"243F S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"#73 B. PARADA RD. EXT. FV7 Parada Valenzuela City"},{"Raw Address":"185 RAMON ST. Parada Valenzuela City"},{"Raw Address":"469 C. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"441 PARADA Valenzuela City"},{"Raw Address":"470 KAINGEN ST. Parada Valenzuela City"},{"Raw Address":"120 FORTUNE Village PARADA Valenzuela City"},{"Raw Address":"35 PARADA RD. Parada Valenzuela City"},{"Raw Address":"175 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"273 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"#45 A. F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"247 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"365 TATA ANDES ST. Parada Valenzuela City"},{"Raw Address":"198 RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"297 - D TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"192 RAMON ST. Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"#203 18TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"182-D MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"385 Parada Valenzuela City"},{"Raw Address":"M.DEGULA Parada Valenzuela City"},{"Raw Address":"155 ALICIA Parada Valenzuela City"},{"Raw Address":"360 DE GUZMAN ST. J- FRANCISCO Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"202 F.SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"9 PLUTO ST. Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"0013 7TH UNIT C FV 5 Parada Valenzuela City"},{"Raw Address":"101 DE GULA PARADA Valenzuela City"},{"Raw Address":"185-D FELIZA ST. Parada Valenzuela City"},{"Raw Address":"291 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"15-F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"204 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"022 EUGENIO STREET Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"283 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"231 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"412 P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"257 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"160 MOLAVE ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"243 19TH ST. Parada Valenzuela City"},{"Raw Address":"349 CAPTAIN FRANCISCO Parada Valenzuela City"},{"Raw Address":"135 CONSUELO ST.FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"357 Parada Valenzuela City"},{"Raw Address":"242 19TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#144 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"09 PARADA RD. Parada Valenzuela City"},{"Raw Address":"377 APT. 4 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"189 24TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"223 ABELARDO FORTUNE FOUR Village Parada Valenzuela City"},{"Raw Address":"29 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"100 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"468 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"462 P. GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"252 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"B1 L12 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"011 PARADA Valenzuela City"},{"Raw Address":"442 P. GOMEZ ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"351 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"58 Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"230-S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"116 CAPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"115 JADE ST HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"160 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"0334 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"207 Parada Valenzuela City"},{"Raw Address":"274 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"199 6TH ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"197 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"313 MENEZ COMP. Parada Valenzuela City"},{"Raw Address":"009 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"LOT 19 BLK 3 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"340 20TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"9 F SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"332 TANDANG MANANG PARADA Valenzuela City"},{"Raw Address":"197 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"116 CAPT. CRUZ CALLE ONSE Parada Valenzuela City"},{"Raw Address":"#93 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"44B PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"277 PILAR STREET Parada Valenzuela City"},{"Raw Address":"258 S. D EGUZMAN STREET Parada Valenzuela City"},{"Raw Address":"15 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"325 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"219 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"343 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"93 B SALAZAR ST Parada Valenzuela City"},{"Raw Address":"397 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"225 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"31 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"257 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"405 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"111 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"406 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"256 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"40 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"207 FELIZA ST. BUKID Parada Valenzuela City"},{"Raw Address":"05 FORTUNE Village 6TH ST. Parada Valenzuela City"},{"Raw Address":"111 A KAMAGONG FORTUNE Village Parada Valenzuela City"},{"Raw Address":"193 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"186 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"062 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"190 6ST MOLAVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"#39 RAMON ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"415 ZAMORA ST. FORTUNE Village 7 PARADA Valenzuela City"},{"Raw Address":"252 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"416 TATA ERRO Parada Valenzuela City"},{"Raw Address":"25 TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"187 CAPT. CRUZ PARADA Valenzuela City"},{"Raw Address":"#39C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"315 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"174 MOLAVE Parada Valenzuela City"},{"Raw Address":"448 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"255 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"325 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"362 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"1819 PEARLS ST. Parada Valenzuela City"},{"Raw Address":"422 BURGOS ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"451 ZAMORA ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"170 MOLAVE ST Parada Valenzuela City"},{"Raw Address":"446 F. GOMEZ Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 12 BURGOS STREET Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE ST. Parada Valenzuela City"},{"Raw Address":"56 P. DE GUZMAN TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"142 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"315 JIMENEZ CMPD. Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"150 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"28 CAPT. CRUS ST. Parada Valenzuela City"},{"Raw Address":"1 MO DIZON COMP. TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"310 JIMENEZ Parada Valenzuela City"},{"Raw Address":"031 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"407 P.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"168 A CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE ST. HIYAS Parada Valenzuela City"},{"Raw Address":"440 RUMARAO COMP. Parada Valenzuela City"},{"Raw Address":"154 NARRA ST Parada Valenzuela City"},{"Raw Address":"244 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"297-D TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"96 PARADA ST. PARADA Valenzuela City"},{"Raw Address":"172 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"310 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"118 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"470-A KAINGIN Parada Valenzuela City"},{"Raw Address":"135 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"FORTUNE Village 4 RAMON ST. PARADA Valenzuela City"},{"Raw Address":"FATIMA COMP. PARADA RD. Parada Valenzuela City"},{"Raw Address":"407 P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"173 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"247 DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"24TH STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"443 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"BLOCK 5 LOT 20 GINTONG SILANGAN F. Parada Valenzuela City"},{"Raw Address":"215 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"207 CALLE ONSE DULO Parada Valenzuela City"},{"Raw Address":"27 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"409 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"41 B TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"130 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"2 TINDALO ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"207 FELEZA ST. Parada Valenzuela City"},{"Raw Address":"24TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"546 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"246 C S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"LOT 5 BLK 10 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"012 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"141 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"243 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"340 Fortune Village 5 21ST STREET Parada Valenzuela City"},{"Raw Address":"MERCURY STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"357 J. FRANCISO ST. Parada Valenzuela City"},{"Raw Address":"351 P. FRNACISCO S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"199 BENMARIE 21ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"425 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"121 C CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"175 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"#9E PARADA ROAD Parada Valenzuela City"},{"Raw Address":"110 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"245 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"158 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"178 KAMAGONG Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B3 L 3 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"BLK. 5 LOT 14 GINTONG SILANGAN F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"289 D SANTOLAN ROAD Parada Valenzuela City"},{"Raw Address":"406 BANDINO ST P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"42 PARADA RD. Parada Valenzuela City"},{"Raw Address":"32 B 258 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"327 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"112 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"42 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"195 19TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"199 21ST ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B1 L13 349 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"168- SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"071 FORTUNE Village 6 PARADA Valenzuela City"},{"Raw Address":"207 FILEZA BUKID Parada Valenzuela City"},{"Raw Address":"204 B ANTHONY STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"A CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"291 PARADA RD. Parada Valenzuela City"},{"Raw Address":"DR. 1 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"37 A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"268 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"324 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"155 ALICIA FV 4 Parada Valenzuela City"},{"Raw Address":"43 PARADA RD. Parada Valenzuela City"},{"Raw Address":"236 7TH STREET Parada Valenzuela City"},{"Raw Address":"471 KABERONG STREET Parada Valenzuela City"},{"Raw Address":"0104 AS8 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"#94 A. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"002 YAKAL ST COR ACACIA Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"351 PINAGPALA F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"405 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"11 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"176 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"154 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"L22 EARTH F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"271 CONSUELO ST. FORTRUNE 4 Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"032 PARADA Valenzuela City"},{"Raw Address":"190 6TH ST. COR. MOLAVE PARADA Valenzuela City"},{"Raw Address":"181 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"234 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"349 CAPT.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"270 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B5 L11 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"329 T.MANANG Parada Valenzuela City"},{"Raw Address":"5TH ST. Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"359 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"114 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"T.EUGENIO RD. PARADA Valenzuela City"},{"Raw Address":"410 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"2645 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"10E FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"177 23RD STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"272 PILAR ST. Parada Valenzuela City"},{"Raw Address":"99 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"412 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"25 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"104 LAGDAMEO ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"18 PARAD ROAD Parada Valenzuela City"},{"Raw Address":"405 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"097 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"L19 B3 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"L-5 BLK-06 NARRA ST. Parada Valenzuela City"},{"Raw Address":"466-C KAINGIN KABERONG Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO 31 EARTH ST. Parada Valenzuela City"},{"Raw Address":"195 CALLE ONSE BO.PARADA Valenzuela City"},{"Raw Address":"19 CARACTA VillageE KAINGIN Parada Valenzuela City"},{"Raw Address":"77 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"182 D MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"141 NARRA STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"203 Parada Valenzuela City"},{"Raw Address":"347 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"266 F 24TH STREET Parada Valenzuela City"},{"Raw Address":"45A EARTH ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"365 F TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"206-4 22ND ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"441 RUMARAO CPD. SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"341 21ST FOTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"225 ABELARDO Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"72 FORTUNE Village 6 PARADA RD. Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"171 SALAZAL Parada Valenzuela City"},{"Raw Address":"084 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"039 D. SANTIAGO RAMON ST. FV4 Parada Valenzuela City"},{"Raw Address":"120 CORNER ST. 25TH ST. Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"224H 7TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"199 - 21 ST. FV5 Parada Valenzuela City"},{"Raw Address":"258 25TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"133 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"212 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"242 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"096 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BL 3 LT 24 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"0351 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"358 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"127 YAKAL ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE GARDEN 21ST FORTUNE Parada Valenzuela City"},{"Raw Address":"371 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"391F P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"37 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"DULO Parada Valenzuela City"},{"Raw Address":"438-SERVILE ROAD Parada Valenzuela City"},{"Raw Address":"UNIT 5 ALFONSO APARTMENT M. DE GULA Parada Valenzuela City"},{"Raw Address":"219 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"456 SERVICE ROAD. Parada Valenzuela City"},{"Raw Address":"009 R.CABRAL ST. Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"162 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 22 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"20 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"313 MENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"JADE CORNER SAPPHIRE Parada Valenzuela City"},{"Raw Address":"413 H P.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"# 9 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"277 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"411-B P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"341 21ST BENMARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"257 S. DE GUZMA ST.N Parada Valenzuela City"},{"Raw Address":"452 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"230 YAKAL COR. NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"ILOCTO C5 Parada Valenzuela City"},{"Raw Address":"25TH STREET FORTUNE V Parada Valenzuela City"},{"Raw Address":"8 IPIL ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"197 19TH ST. COR. 21ST. Fortune Village 5 BO. Parada Valenzuela City"},{"Raw Address":"214 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"222 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"98 KAMAGONG ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"194 6TH STREET Parada Valenzuela City"},{"Raw Address":"# 94 A. FELEZA ST. Parada Valenzuela City"},{"Raw Address":"338 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"109 25TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"# 26 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"220 C 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"207 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"151 ALICIA Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"230 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"274 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"#18 GP WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"4180 NARRA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"199 6TH ST. FV5 Parada Valenzuela City"},{"Raw Address":"132 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"161 SALAZAR ST. BO. PARADA Valenzuela City"},{"Raw Address":"237 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"412 TATAERO 6 Parada Valenzuela City"},{"Raw Address":"257 M DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"BLOCK 5 LOT10 JADE ST HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"199 21ST. BENMARIE COMP. FORTUNE Parada Valenzuela City"},{"Raw Address":"267 S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"430 GOME ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"123 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"L-31 B-8 PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"359 J. FRNACISCO ST. Parada Valenzuela City"},{"Raw Address":"Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"50 PARADA RD. Parada Valenzuela City"},{"Raw Address":"187 FELIZA Parada Valenzuela City"},{"Raw Address":"90 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"DR 1 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"122 CONSUELO ST. FORTUNE 04 Parada Valenzuela City"},{"Raw Address":"290 CAINGIN ST. Parada Valenzuela City"},{"Raw Address":"442 P. GOMEZ Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"44 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"377 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"273 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"114 YAKAL ST. Parada Valenzuela City"},{"Raw Address":"B2L14 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"318 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"173 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"153 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"26. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"95 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 7 FORTUNE Village Parada Valenzuela City"},{"Raw Address":"393 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"79 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"136 KAMAGONG STREET Parada Valenzuela City"},{"Raw Address":"91-B S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"10 E.FRANCISCO Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"325 TANDANG ST. Parada Valenzuela City"},{"Raw Address":"185 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"NARRA ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"330 T. MANANG STREET Parada Valenzuela City"},{"Raw Address":"240 T. MANANG ST Parada Valenzuela City"},{"Raw Address":"099 PARADA Valenzuela City"},{"Raw Address":"507 23ST FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"24 A CAPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"251 25TH ST. Parada Valenzuela City"},{"Raw Address":"169 ACACIA STREET Parada Valenzuela City"},{"Raw Address":"F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"36 B. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"204 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"144 DALAWAN ST.PARADA Valenzuela City"},{"Raw Address":"113 LAGDAMEO ST. FV. 4 PARADA Valenzuela City"},{"Raw Address":"199 21 ST. Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"#27 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"189-24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#39 PARADA RD. Parada Valenzuela City"},{"Raw Address":"50 PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"139 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"109 E. LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"LOT 15 A207 FELISA BUKID Parada Valenzuela City"},{"Raw Address":"0274 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"207 LOT15 AREA-A FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"168 MOLAVE Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"37 C PARADA RD. PARADA Valenzuela City"},{"Raw Address":"203B VENUS ST. Parada Valenzuela City"},{"Raw Address":"#41 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"150 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"107 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"184 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"30 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"421 ZAMORA ST Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"190-C 6TH ST. COR KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"272 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"234 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"279 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"124 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE 05 Village Parada Valenzuela City"},{"Raw Address":"316 JIMINEZ CMPD. Parada Valenzuela City"},{"Raw Address":"207 FELIZA ST. PARADA BUKID Parada Valenzuela City"},{"Raw Address":"0192 E 6TH ST. FORTUNE Village PH 6 Parada Valenzuela City"},{"Raw Address":"229 18TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST. FV4 Parada Valenzuela City"},{"Raw Address":"100 A CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"121 LAGDAMEO ST.Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"404 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"160 NARRA ST. COR. 6TH ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"334 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"377 18ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"71 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"# 26 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"325 TADANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"230 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"B2 L20 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"4541 MOLAVE ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"23 EUGENIO Parada Valenzuela City"},{"Raw Address":"MM. Parada Valenzuela City"},{"Raw Address":"068 PARADA RD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"486 KAINGEN ST. Parada Valenzuela City"},{"Raw Address":"16 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"454 SERVICE RD. HIYAS SUBD. PARADA Valenzuela City"},{"Raw Address":"155 ALICIA ST. FV4 Parada Valenzuela City"},{"Raw Address":"351 Parada Valenzuela City"},{"Raw Address":"148 DALAWAN Parada Valenzuela City"},{"Raw Address":"0279 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"100 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"34 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"464 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"502 FORTUNE DRIVE COR. 23RD ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"381 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"160 MOLAVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"197 ANTHONY Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"ACASIA ST. KAINGIN RD. PARADA Valenzuela City"},{"Raw Address":"375 TATA ANDRES ST.PARADA Valenzuela City"},{"Raw Address":"290 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"207 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"34 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"DOOR2 M. DE GULA ST Parada Valenzuela City"},{"Raw Address":"20 A F SANTIAGO Parada Valenzuela City"},{"Raw Address":"203 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"242 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"130 KAMAGONG Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"396 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"B5 L8 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"278 PILAR ST Parada Valenzuela City"},{"Raw Address":"7 TATA-ERO ST. Parada Valenzuela City"},{"Raw Address":"341 BO.PARADA Valenzuela City"},{"Raw Address":"242 19TH ST. Parada Valenzuela City"},{"Raw Address":"824 BURGOS ST Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"BLK 03 LOT 12 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"103 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"233 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"442 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"117 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"343 CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"BLK5 LOT10 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"107 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"313 JIMENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"273 PILAR ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"242 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"0258 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"139 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"190 24TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"3 200 CALLE ONCE PARADA Valenzuela City"},{"Raw Address":"243 7 STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"87 BO Parada Valenzuela City"},{"Raw Address":"351 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"81 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"326 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"266 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"467 Parada Valenzuela City"},{"Raw Address":"173 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGO EARTH ST. Parada Valenzuela City"},{"Raw Address":"182 D MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"250B CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"409A P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"171 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"450 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"283 S DE GUZMAN SR. Parada Valenzuela City"},{"Raw Address":"308 MENES Parada Valenzuela City"},{"Raw Address":"146 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"B1L17 PARADA RD EXT. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"19 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"207 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"65 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"205 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"BLK. 5 LOT 17 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"B 4 L 10 F. FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"18 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"85 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"162 MOLABE ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"MOLAVE ST. COR. YAKAL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST Parada Valenzuela City"},{"Raw Address":"165 YAKAL STREET FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"225 Fortune Village 4 ABILARDO ST. Parada Valenzuela City"},{"Raw Address":"F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"283 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"2 PASO DE BLAS Parada Valenzuela City"},{"Raw Address":"418 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"249 7TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"200 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"144 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"146 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"L10 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"403 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"85 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"315 MENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 1 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"440 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"471 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"154 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"132 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"339 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPOUND FORTUNE Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 4 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"400 SAN ANDRES STREET Parada Valenzuela City"},{"Raw Address":"297 D T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"LOT 6 BF SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"385 MERCURY ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"052 PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"098 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"269 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"075 GOMEZ ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 6ST. Parada Valenzuela City"},{"Raw Address":"137 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"269 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"39B RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"18223 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"165 FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"301 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"456 -H KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"COR. 23 STREET FV 5 Parada Valenzuela City"},{"Raw Address":"LAGDAMO ST. Parada Valenzuela City"},{"Raw Address":"374 Parada Valenzuela City"},{"Raw Address":"108 RAMON STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B1 L7 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"204 FELISA ST. Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"79 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"45 A F SANTIAGO Parada Valenzuela City"},{"Raw Address":"204 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"68 B PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"BLK 10 LOT 12 7TH STREET Parada Valenzuela City"},{"Raw Address":"248 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"178 RAMON ST. FOERTUNE 4 Village Parada Valenzuela City"},{"Raw Address":"320 D S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"27 DIAMOND ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"325 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"LOT 6 BLK 2 TINADALOST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"241 S. DE GUSMAN ST. Parada Valenzuela City"},{"Raw Address":"340 20TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"260 TATA ROMAN S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"141 FORTUNE DRIVE FORTUNE V Parada Valenzuela City"},{"Raw Address":"123 TATA ANDREZ ST. Parada Valenzuela City"},{"Raw Address":"446 GOMEZ ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"030 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"252 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO ST. MANUKAN Parada Valenzuela City"},{"Raw Address":"444 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"39 D. SANTIAGO COMPOUND Parada Valenzuela City"},{"Raw Address":"163 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"57 PARADA ROAD Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"293 A.ILOCTO ST. PARADA Valenzuela City"},{"Raw Address":"#002 YAKAL ST. Parada Valenzuela City"},{"Raw Address":"171 RAMON ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"220 D 21ST ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"225 TOMASA ST. PARADA Valenzuela City"},{"Raw Address":"202 FELIZA ST Parada Valenzuela City"},{"Raw Address":"297-C TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"0118 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"2675 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"315 MENES COMP. PARADA Valenzuela City"},{"Raw Address":"442 ROSILLAS ST. Parada Valenzuela City"},{"Raw Address":"276 SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"179 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"7 ALFONSO APARTMENT Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"LOT 1 BLCK 7 PARADA RD. Parada Valenzuela City"},{"Raw Address":"B1 L12 BUGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"199 Fortune Village 5 21ST Parada Valenzuela City"},{"Raw Address":"438 SERVICE ROAD. Parada Valenzuela City"},{"Raw Address":"1956 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"168 Parada Valenzuela City"},{"Raw Address":"210 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"096 FORTUNE Village Parada Valenzuela City"},{"Raw Address":"68 PARADA RD. Parada Valenzuela City"},{"Raw Address":"CA[T.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"#2 TINDALO ST. Parada Valenzuela City"},{"Raw Address":"321-1 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"8 SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"175 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"117 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"075 GOMEZ ST. FORTUNE Village 07 Parada Valenzuela City"},{"Raw Address":"247 DE GUZM Parada Valenzuela City"},{"Raw Address":"UNIT 3 SALAZAR Parada Valenzuela City"},{"Raw Address":"122 CALLE ONCE ST. Parada Valenzuela City"},{"Raw Address":"234 19 Fortune Village 5 ST Parada Valenzuela City"},{"Raw Address":"091 FORTUNE DRIVE ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"207 CALLE ONSE FELISA BUKID Parada Valenzuela City"},{"Raw Address":"1 F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"279 Parada Valenzuela City"},{"Raw Address":"59 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"162E SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"103 DE GULA ST. Parada Valenzuela City"},{"Raw Address":"164 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"006 PARADA Valenzuela City"},{"Raw Address":"BLK 1 LOT 3 SAPPHIRE ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"151DALAWAN ST Parada Valenzuela City"},{"Raw Address":"137 KAINGIN Parada Valenzuela City"},{"Raw Address":"301 7TH ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"# 95 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"525 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"123 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"F. FRANCISO ST. Parada Valenzuela City"},{"Raw Address":"9 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"56 PARADA ROAD CORNER IPIL ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 4 TANDANG MANANG HOA Parada Valenzuela City"},{"Raw Address":"S-8104 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"290 ILOCTO COMPOUND Parada Valenzuela City"},{"Raw Address":"447 GOMEZ Parada Valenzuela City"},{"Raw Address":"143 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"70 PARADA RD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"BLK.1 LOT 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"411 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"117 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"23 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"002 Parada Valenzuela City"},{"Raw Address":"139 DALAWAN Parada Valenzuela City"},{"Raw Address":"39 K RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"039 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 7 LOT 11 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"170 B SALAZAR ST Parada Valenzuela City"},{"Raw Address":"1314A TATA ANDRES Parada Valenzuela City"},{"Raw Address":"349 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"248 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"237-S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"087 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"26 MARS F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"247 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"FATIMA COMPOUND Parada Valenzuela City"},{"Raw Address":"L1 B2 S. DE GUZMAN ST. VillageA Parada Valenzuela City"},{"Raw Address":"415 TATA ERO ST.3 Parada Valenzuela City"},{"Raw Address":"BL 1 LT 12 GINTONG SILANGAN 349 FRANCISCO Parada Valenzuela City"},{"Raw Address":"39 D PARADA ROAD Parada Valenzuela City"},{"Raw Address":"297 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"14 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"351 CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"286 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"161 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"192 M.DE GULA ST. PARADA Valenzuela City"},{"Raw Address":"402 SAN ANDRES STREET Parada Valenzuela City"},{"Raw Address":"256 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"185 RAMON ST. FV4 Parada Valenzuela City"},{"Raw Address":"91 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"108-B RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"56 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 21ST ST. Parada Valenzuela City"},{"Raw Address":"457 INT. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"09 BO PARADA RD Parada Valenzuela City"},{"Raw Address":"281-A S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"164 Parada Valenzuela City"},{"Raw Address":"93 C CAP. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"299 PARADA JIMENEZ ST. Parada Valenzuela City"},{"Raw Address":"268 25TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. Parada Valenzuela City"},{"Raw Address":"131 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"31 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"141 Fortune Village 5&6 Village Parada Valenzuela City"},{"Raw Address":"FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"202 MOLAVE ST Parada Valenzuela City"},{"Raw Address":"LOT 8 MERCURY ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"0260 I TATA ROMAN S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"114 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"188 MOLAVE COR. 6TH ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"201 SELIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"9 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"269 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMP. Parada Valenzuela City"},{"Raw Address":"290 M. ILOCTO COMPOUND Parada Valenzuela City"},{"Raw Address":"INT. ZAMORA ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"Village 5 Parada Valenzuela City"},{"Raw Address":"267 PETRA ST S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"136 E. LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"125 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"246 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"307 PEARL ST. HIYAS SUBD. PARADA Valenzuela City"},{"Raw Address":"08 CALLE ONCE ST. Parada Valenzuela City"},{"Raw Address":"357 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"204 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"B1 L7 PARADA ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"122 B. CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"96 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"402 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"001 PARADA RD. Parada Valenzuela City"},{"Raw Address":"341 20TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"SUBDIVISION Parada Valenzuela City"},{"Raw Address":"LOT 11 BLK 5 JADE ST. Parada Valenzuela City"},{"Raw Address":"118 DOOR 4 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"361 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"LOT 10 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"0094B C CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"096 FORTUNE Village 5 ST. PARADA Valenzuela City"},{"Raw Address":"456 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"198 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"320 T.MANANG PARADA Valenzuela City"},{"Raw Address":"B4L12 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"125 CONSUELO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"203 ALICIA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"95 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"137 FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"455 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"82 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"123A KAMAGONG ST. FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"353 J.FRANCISCO Parada Valenzuela City"},{"Raw Address":"389 S.DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"94-C FELIZA ST. Parada Valenzuela City"},{"Raw Address":"175 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"0250 DR2 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"DE GUZMAN CMPD ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"39 RAMON Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"170SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"257 RIZALINA ST. Parada Valenzuela City"},{"Raw Address":"184 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#99 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"198 Parada Valenzuela City"},{"Raw Address":"310 D JIMENEZ COMPOUND ST. Parada Valenzuela City"},{"Raw Address":"153 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"411 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"8 C F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. DOON COMPD. Parada Valenzuela City"},{"Raw Address":"FORTUNE7 Parada Valenzuela City"},{"Raw Address":"23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"135 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"177 ST. CAPT. CRUZ PARADA Valenzuela City"},{"Raw Address":"195 FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"824 BURGOS ST. F.V 7 Parada Valenzuela City"},{"Raw Address":"028 PARADA Valenzuela City"},{"Raw Address":"442 GOMEZ ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"161 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"237 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"467 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"12 5TH ST. FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"99 VINUS ST. Parada Valenzuela City"},{"Raw Address":"341 21ST BENMARIE AGLEHAM COMPOUND Parada Valenzuela City"},{"Raw Address":"110 LAGDAMEO FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"404 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"85 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"387 IMPONG JUANA ST. Parada Valenzuela City"},{"Raw Address":"404 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"299 BO. Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 3 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"192E 6ST. FORTUNR Village 5 Parada Valenzuela City"},{"Raw Address":"100 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"467 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"154 ALICIA STREET Parada Valenzuela City"},{"Raw Address":"213 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"175 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"199 6TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"262 Parada Valenzuela City"},{"Raw Address":"289-D S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"171 MOLAVE ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"0345 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. F.SANTIAGO COMPD. Parada Valenzuela City"},{"Raw Address":"187 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"266 24TH STREET Parada Valenzuela City"},{"Raw Address":"3 B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"244 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B5 L7 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"308 JIMENEZ ST. Parada Valenzuela City"},{"Raw Address":"119 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"391 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"91 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 1 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"443 B SERVICE RD. Parada Valenzuela City"},{"Raw Address":"26 SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"269 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39-D SANTIAGO COMPD. FV4 Parada Valenzuela City"},{"Raw Address":"97 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"417 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. PARADA Valenzuela City"},{"Raw Address":"194 6 STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"187-A FELISA ST. PARADA Valenzuela City"},{"Raw Address":"31F SANTIANGO VENUS ST Parada Valenzuela City"},{"Raw Address":"173 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"0014 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"237 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 7 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"178 MOLAVE ST Parada Valenzuela City"},{"Raw Address":"145 C NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"196 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"S. DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"86 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"260 TATA ROMAN Parada Valenzuela City"},{"Raw Address":"260 RIZALINA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"027 PARADA RD. Parada Valenzuela City"},{"Raw Address":"411 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"260 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"132 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"139 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"INT. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"88 CPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"111 UNIT B KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"194 COR. 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"167 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"389 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"93-A CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"119B PEARL ST. Parada Valenzuela City"},{"Raw Address":"223 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"192 RAMON ST.FV 4 Parada Valenzuela City"},{"Raw Address":"93-A CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"393 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"407 TANDANG Parada Valenzuela City"},{"Raw Address":"411 C P.DE GUZMAN ST. TATA ERO Parada Valenzuela City"},{"Raw Address":"140-B E FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"440 P. GOMEZ ST. FORTUEN 7 Parada Valenzuela City"},{"Raw Address":"E EUGENIO ST Parada Valenzuela City"},{"Raw Address":"148 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"287 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"386 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"101A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"ST Parada Valenzuela City"},{"Raw Address":"367 FELISA Parada Valenzuela City"},{"Raw Address":"14 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"FORT Village Parada Valenzuela City"},{"Raw Address":"169D 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"460 GOMEZ STREET Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"86 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"13 Parada Valenzuela City"},{"Raw Address":"407 P.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"297B TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"440 RUMARAO COMPOUND SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"B1 Parada Valenzuela City"},{"Raw Address":"259 M DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"399 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"238 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"356 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"245 ABELARDO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"174 FELISA Parada Valenzuela City"},{"Raw Address":"351 PINAGPALA F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"9 PLOTO ST. F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"315 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"030 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"12 B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"444 SERVICE RR. Parada Valenzuela City"},{"Raw Address":"123-2 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"88 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"90 ADOR STREET Parada Valenzuela City"},{"Raw Address":"327 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"357 J. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"186 UNIT 3 FELIZA ST Parada Valenzuela City"},{"Raw Address":"369 TATA ANDRESS STREET Parada Valenzuela City"},{"Raw Address":"200 FORTUNE DR. ST. Parada Valenzuela City"},{"Raw Address":"154 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"179 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"233 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"406 T. MANANG Parada Valenzuela City"},{"Raw Address":"184 FELISA ST. Parada Valenzuela City"},{"Raw Address":"271 Parada Valenzuela City"},{"Raw Address":"185 FELISA Parada Valenzuela City"},{"Raw Address":"384 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"268 FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"243 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"241 19TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"BLK 6 LOT 4 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"18 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"111 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"369 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"ADOR ST. Parada Valenzuela City"},{"Raw Address":"172 MOLAVE ST Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"310 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"AURORA COMP. S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"14 B. PARADA RD. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE GARDEN 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 8 TMHOA Parada Valenzuela City"},{"Raw Address":"15 DIAMOND ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"69 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"199 21ST AGLEHAM COMPD. Parada Valenzuela City"},{"Raw Address":"3498 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"476 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. FV 4 Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"094 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"309 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"180 23RD ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"141 NARRA ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"23 T EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"9001 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"240 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"4792 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"227 A BELARDO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"275 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"38 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"204 BF SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"468 KINGIN ST. Parada Valenzuela City"},{"Raw Address":"347-F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"341 20TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CALLE ONSE ST. PARADA Valenzuela City"},{"Raw Address":"220 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"311 MENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"124 E. LAGDAMEO STREET Parada Valenzuela City"},{"Raw Address":"225 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"469 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"199 21ST FV5 Parada Valenzuela City"},{"Raw Address":"243 PACING Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 5 TMHOA Parada Valenzuela City"},{"Raw Address":"0250 UNIT 11 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"333 T.MANANG ST. BO.PARADA Valenzuela City"},{"Raw Address":"ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"352 J.FRANCISCO Parada Valenzuela City"},{"Raw Address":"#283 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"95 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"188 MOLAVE ST. CORNER 6TH ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"275 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"138 E. LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"143 DALAWAN STREET Parada Valenzuela City"},{"Raw Address":"DE GULA APT. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"144 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"377 18 STREET Village Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"199 21 ST. BENMARIE COMP. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"020 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"BLK 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"264 19TH ST.FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"20 F. SANTIAGO EARTH ST. Parada Valenzuela City"},{"Raw Address":"195 KALYE ONSE Parada Valenzuela City"},{"Raw Address":"26 NARRA ST. FV 5&6 Parada Valenzuela City"},{"Raw Address":"402 7TH ST. Parada Valenzuela City"},{"Raw Address":"247 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"269 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"75 GOMEZ STREET FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"279 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"203 VENUS ST. E-E COMP. Parada Valenzuela City"},{"Raw Address":"504 FORTNE DRIVE Parada Valenzuela City"},{"Raw Address":"168 DOON COMP. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"286 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"317 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"349F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"004 BO. Parada Valenzuela City"},{"Raw Address":"27 A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"384 S. DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"394 SAN ANDRES Parada Valenzuela City"},{"Raw Address":"194 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"#97 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"260 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"101 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"247 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"456 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"346 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"1106 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"FORT Village 4 Parada Valenzuela City"},{"Raw Address":"135 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"88 SAPPHIRE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"115 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"132 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"162-D SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"203 VENUS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"246 PARADA RD. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"CALLE 11 BUKID ST. Parada Valenzuela City"},{"Raw Address":"130 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"244 7TH ST. FV5 Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"243 7TH ST. Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"412 PARADA Valenzuela City"},{"Raw Address":"214 IPIL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"098 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"63 PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"247-C S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"141DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"190D 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"258 GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"306 CAPT. DAET CPD. PARADA Valenzuela City"},{"Raw Address":"234 DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"291 Parada Valenzuela City"},{"Raw Address":"178 RAMON STREET Parada Valenzuela City"},{"Raw Address":"113 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"8 FIFTH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"100 A CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"B1 L10 E. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"050 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"272 S DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"141 UNIT 4 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"GINTONG SILANGAN F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"260 TATA ROMAN ST. Parada Valenzuela City"},{"Raw Address":"203 6TH STREET FORTUNE VillageE 5-6 Parada Valenzuela City"},{"Raw Address":"083 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"411 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"PEARL ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"225 DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"70 PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"274 S.DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"274 BO.PARADA Valenzuela City"},{"Raw Address":"10 PARADA RD. Parada Valenzuela City"},{"Raw Address":"407 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"B1L8 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"10 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"390 Parada Valenzuela City"},{"Raw Address":"403 FORTUNE Village PARADA Valenzuela City"},{"Raw Address":"165 SALAZAR ST. BO. PARADA Valenzuela City"},{"Raw Address":"412 A P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"111-A E.LAGDAMEO ST. PARADA Valenzuela City"},{"Raw Address":"TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"94 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"324 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"73-B PARADA RD. EXT FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"187 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"415 TATA ERO Parada Valenzuela City"},{"Raw Address":"116 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"359 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"0250 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"59 C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"199 AGLEHAM COMPD. 21ST ST. Parada Valenzuela City"},{"Raw Address":"227 ABELARDO FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"4 Parada Valenzuela City"},{"Raw Address":"257 M. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"410 A-P. DE GUZMAN ST. VAL. M.M. Parada Valenzuela City"},{"Raw Address":"103 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"33 E. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"0346 FELISA ST. Parada Valenzuela City"},{"Raw Address":"24 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"19 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"275 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"172 MOLAVE ST Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"018 EUGENIO Parada Valenzuela City"},{"Raw Address":"319 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"863 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"316 MENES COMPOUND Parada Valenzuela City"},{"Raw Address":"31 UNIT 4&5 KAMAGONG ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"271 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"8F CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"23RD ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"255 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"80 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"196 MALAVE ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"355 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"124 B CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"24TH BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"425 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"24 B F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"271 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"438 SERVICE RD.PARADA Valenzuela City"},{"Raw Address":"36 C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"40- P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"RASILIA 438 PARADA Valenzuela City"},{"Raw Address":"39-C RD. Parada Valenzuela City"},{"Raw Address":"155 ALICIA STREET Parada Valenzuela City"},{"Raw Address":"315 JIMENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"211 21TH ST. FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"95 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"393 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"212 21ST. ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"E & E COMP. Parada Valenzuela City"},{"Raw Address":"390 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"223 ABELARDO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"455 ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"056 PARADA RD. FV6 Parada Valenzuela City"},{"Raw Address":"352 G. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"183 23RD. ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. DOON COMP. Parada Valenzuela City"},{"Raw Address":"202 6TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"176 23RD ST. Parada Valenzuela City"},{"Raw Address":"190 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"89 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"199 21 ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"301 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"254 25TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"245 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"90 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"36 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"B5 L11 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"104 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"441 SERVICE ROAD RUMARAO COMP. Parada Valenzuela City"},{"Raw Address":"86 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"94 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"NO 172 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"252-A BLOCK 2 LOT 2 S. DE GUZMANS ST. Parada Valenzuela City"},{"Raw Address":"14-B PEARL ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"196 22ND ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"150 ALICIA ST. PARADA Valenzuela City"},{"Raw Address":"188 RAMON ST Parada Valenzuela City"},{"Raw Address":"215 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"248 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"17 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"199 B CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"17 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 23 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"440 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"117 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"007 F.SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"168 DOON COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"320 Parada Valenzuela City"},{"Raw Address":"8 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"460 P GOMEZ ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"148 NARRA ST. Parada Valenzuela City"},{"Raw Address":"E. SANTIAGO Parada Valenzuela City"},{"Raw Address":"30 B. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"140 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"90 CAPT.CRUZ Parada Valenzuela City"},{"Raw Address":"#170 SALAZAR T. DOON CMPD Parada Valenzuela City"},{"Raw Address":"009 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"185C FELIZA ST. Parada Valenzuela City"},{"Raw Address":"T.EUGENIO Parada Valenzuela City"},{"Raw Address":"121 CONSUELA ST.FV4 Village Parada Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B-4 L-28 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"240 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"185 B FELIZA ST Parada Valenzuela City"},{"Raw Address":"139 FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"121 CONSUELO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"349 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"365B TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. FORTUNE VillageE Parada Valenzuela City"},{"Raw Address":"20 SALAZAR Parada Valenzuela City"},{"Raw Address":"T. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"185 FELIZA ST Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ CMPD. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"21 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"25 EUGENIO STREET Parada Valenzuela City"},{"Raw Address":"314 BO.PARADA Valenzuela City"},{"Raw Address":"FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"105 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"464-A KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"279 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"218 FORTUNE Village Parada Valenzuela City"},{"Raw Address":"142 DALAWAN Parada Valenzuela City"},{"Raw Address":"310 MENES ST. Parada Valenzuela City"},{"Raw Address":"RUMARAO COMP. Parada Valenzuela City"},{"Raw Address":"127 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"118 C CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"#80 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"153 PINAGPALA PHASE 2 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"399 SAN ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"96 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"280 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"170 DOON COMPOUND SALAZAR ST Parada Valenzuela City"},{"Raw Address":"075 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"276 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"256 RIZALINA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"251 25TH ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"182 23RD ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"440 RUMARAO COMP. SERVICE RD Parada Valenzuela City"},{"Raw Address":"091 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES B.O Parada Valenzuela City"},{"Raw Address":"291 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"130 NARRA ST. Parada Valenzuela City"},{"Raw Address":"23RD ST. FORTUNE Village 5 B PARADA Valenzuela City"},{"Raw Address":"19TH ST. Parada Valenzuela City"},{"Raw Address":"271 A. MARIA ST. Parada Valenzuela City"},{"Raw Address":"307 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"225 AVELARDO ST. Parada Valenzuela City"},{"Raw Address":"230 EMBUSCADO COMP. Parada Valenzuela City"},{"Raw Address":"54 KAMAGONG STREET Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"330 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"413 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"L16 B5 349 F.FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"116 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"75 PARADA ROAD FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"NO. 199 21 ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"181 RAMON ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"6 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"60 PARADA RD. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"#113 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"157 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"14 DIAMOND ST HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"325 PARADA Valenzuela City"},{"Raw Address":"158 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"207 22ND ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 18 PEARL HIYAS Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"415 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"237 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"26TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"067 PARADA ST. Parada Valenzuela City"},{"Raw Address":"126 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"110 KAMAGONG Parada Valenzuela City"},{"Raw Address":"207 22ND ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"18 GP ST. WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"315 JIMENEZ Parada Valenzuela City"},{"Raw Address":"341 PARADA 2OTH ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"LOT 8 BLK.3 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"116 E.LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"888 MOLAVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"414 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"186 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"412 ZAMORA STREET Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"402 7TH ST. FV. 5 PARADA RD. Parada Valenzuela City"},{"Raw Address":"397 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"423 ZAMORA ST FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"224 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"111-A E.LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"88 D CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"BF SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"182 23RD ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"248 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"463 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"351 PHASE 2 PINAGPALA F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"140 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"320S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"207 PILISA BUKID Parada Valenzuela City"},{"Raw Address":"LE 116 CAPT. CRUZ ST. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"B1L10 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"123 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"6 NARRA ST. Parada Valenzuela City"},{"Raw Address":"12-B KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"143 CAPT. CRYZ ST. Parada Valenzuela City"},{"Raw Address":"207 ST. FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"103 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"227 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"165 UNIT 4 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"115 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"324 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"260 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"Village 6 Parada Valenzuela City"},{"Raw Address":"217 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 11 SAPPHIRE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"103 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"87 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"234 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"87 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"112 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"GINTONG SILANG F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"24TH ST. FORTUNE5 Parada Valenzuela City"},{"Raw Address":"273 PILAR Parada Valenzuela City"},{"Raw Address":"171 RAMON ST. FORTUNE Village IV Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGOP ST. Parada Valenzuela City"},{"Raw Address":"#88 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"235 S Parada Valenzuela City"},{"Raw Address":"466-C KABERONG KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"439 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"01 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"244 7TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"242 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"Valenzuela City. Parada Valenzuela City"},{"Raw Address":"282 PILAR ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"364 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"018 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"9 5TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"8 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"407 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"02 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"280 PILAR ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"332 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"199 6TH ST. FORTUNE Village 6 PARADA Valenzuela City"},{"Raw Address":"188 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"333 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"450 NORTH DIVERSION PARADA Valenzuela City"},{"Raw Address":"258 S.DEGUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"341 20TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"22 ST. FORTUNE Village 5 PARADA RD. Parada Valenzuela City"},{"Raw Address":"204 VENUS ST. Parada Valenzuela City"},{"Raw Address":"98 PARADA ROAD Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"184 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"111 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"#39 A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"347 FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"36A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"130 KAMAGONG ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"0099 B. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"320-E S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"0345 KALYE 11 Parada Valenzuela City"},{"Raw Address":"59 BANDINO CORP. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"456 KAKAWATE ST. Parada Valenzuela City"},{"Raw Address":"290 KAINGIN Parada Valenzuela City"},{"Raw Address":"204 C.F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"442 P. GOMEZ ST Parada Valenzuela City"},{"Raw Address":"345 CAPT. FRANCISCO Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANAG ST. Parada Valenzuela City"},{"Raw Address":"#468 M KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"173 SALAZAR ST. PUROK 1 Parada Valenzuela City"},{"Raw Address":"1F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"407 M DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"504 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"136 E LAGDAMEO ST. Fortune Village 4 VIL Parada Valenzuela City"},{"Raw Address":"308 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"45 A FSANTIAGO Parada Valenzuela City"},{"Raw Address":"001 Parada Valenzuela City"},{"Raw Address":"194 FORTUNE Village 5 CORNER 6 TH ST. Parada Valenzuela City"},{"Raw Address":"068A PARADA RAOD Parada Valenzuela City"},{"Raw Address":"0317 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"86 SALVADOR STREET Parada Valenzuela City"},{"Raw Address":"8 FIFTH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"501 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 43 LOT 23 FORTUNES 5 Parada Valenzuela City"},{"Raw Address":"291 PARADA Valenzuela City"},{"Raw Address":"270 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"94 PARADA RD. Parada Valenzuela City"},{"Raw Address":"199 Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"315 MENEZ COMP. Parada Valenzuela City"},{"Raw Address":"199 21 STREET BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"BLK. 6 LOT 5 GINTONG SILANGAN F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"122 B KAMAGONG Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"# 31 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"187 24TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B 1 L10 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"410 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"13 5TH. ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"307 A PEARL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"15 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"S. DE GUZMAN ST. 215 DAET COMPOUND Parada Valenzuela City"},{"Raw Address":"442 P.GOMEZ ST. FORTUNE Village 7 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"L1 PHASE 2 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"255 TOMASA ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"LOT 9 BLK 1 SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"10 5TH FORTUNE Parada Valenzuela City"},{"Raw Address":"18 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"199 6TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"266 24TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"224 ABELARDO ST.FV 4 Parada Valenzuela City"},{"Raw Address":"PILAR ST. FORTUNE Village4 MALINTA Valenzuela City Parada Valenzuela City"},{"Raw Address":"204 ANTHONY STREET Parada Valenzuela City"},{"Raw Address":"FELIZA ST Parada Valenzuela City"},{"Raw Address":"228 18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"409 P. DEGUZMAN ST Parada Valenzuela City"},{"Raw Address":"290 PARADA Valenzuela City"},{"Raw Address":"130 CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"315 MENES COMPOUND Parada Valenzuela City"},{"Raw Address":"294 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"132 KAMAGONG ST. FORTUNE Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"57 PARADA RD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"165 SALZAR ST Parada Valenzuela City"},{"Raw Address":"78 PARADA RD. EXT. FORTUNE Village 7 Valenzuela City Parada Valenzuela City"},{"Raw Address":"355 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"B3 L2 GINTONG SILANGAN 349 FRANCISCO Parada Valenzuela City"},{"Raw Address":"FORTUNE Village 4. PARADA Valenzuela City"},{"Raw Address":"054 PARADA ROAD CORNER FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"275 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"457 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"188 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"22 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"199 BENMARIE AGLEHAM COMPOUND Parada Valenzuela City"},{"Raw Address":"272 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"274 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"132 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"091 DOOR 3 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"COR. KAMAGONG Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"322 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"290 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 7 349 F. FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"34A F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"170 SALAZAR Parada Valenzuela City"},{"Raw Address":"LOT 20 A F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"259 25 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"246 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"488 ZAMORA STREET Parada Valenzuela City"},{"Raw Address":"78B PARADA Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"035 SALVADOR ST. PARADA Valenzuela City"},{"Raw Address":"039 D.SANTIAGO COMP. RAMON ST. F.V.PH4 Parada Valenzuela City"},{"Raw Address":"88 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"FORTUNE5 Parada Valenzuela City"},{"Raw Address":"258 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"278 SANTOLAN RD Parada Valenzuela City"},{"Raw Address":"KAINGIN RD. PARADA Valenzuela City"},{"Raw Address":"230 S. DE GUMAN ST. Parada Valenzuela City"},{"Raw Address":"412 TATA ERO ST Parada Valenzuela City"},{"Raw Address":"410 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"COR. CORAL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"59 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"90 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"147 DALAWA ST. Parada Valenzuela City"},{"Raw Address":"117 E. LAGDAMEO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"183 23RD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"406 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"378 A TATA ANDRES Parada Valenzuela City"},{"Raw Address":"386 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"329 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"320 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"90 D. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"426 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"257 25TH ST. Parada Valenzuela City"},{"Raw Address":"153 SALAZAR Parada Valenzuela City"},{"Raw Address":"199F 6TH FORTUNE Village Parada Valenzuela City"},{"Raw Address":"145 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. DOON COMP. Parada Valenzuela City"},{"Raw Address":"456-H KAINGIN Parada Valenzuela City"},{"Raw Address":"FELISA STREET Parada Valenzuela City"},{"Raw Address":"100 CAPT CRUZ DE GULA COMP Parada Valenzuela City"},{"Raw Address":"93C CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"141 DALAWAN STREET Parada Valenzuela City"},{"Raw Address":"271 CONSUELO ST. Parada Valenzuela City"},{"Raw Address":"379 TATA ANDRES ST. BO. Parada Valenzuela City"},{"Raw Address":"255 TOMASA Parada Valenzuela City"},{"Raw Address":"125 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"297 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"272-A S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"199 6TH ST. Parada Valenzuela City"},{"Raw Address":"111-C KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"44 B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"CORNER 120 25TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"91 CAPT. CRUZ PARADA Valenzuela City"},{"Raw Address":"08 MARS ST. Parada Valenzuela City"},{"Raw Address":"299 D JIMENEZ COMPOUND ST. Parada Valenzuela City"},{"Raw Address":"401 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"407B P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"365-G TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"80 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"5 PARADA RD Parada Valenzuela City"},{"Raw Address":"39-C PARADA RD. Parada Valenzuela City"},{"Raw Address":"138 E. LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"0036 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"63 PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"121 CONSUELO FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"141FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST.PARADA Valenzuela City"},{"Raw Address":"145 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"260 TATA ROMAN ST. PARADA Valenzuela City"},{"Raw Address":"390 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"330 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"351 E. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"88 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"39 RAMON Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"352 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FV7 Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"A PEARL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"302 ABELLARDO Parada Valenzuela City"},{"Raw Address":"272 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"13 UNIT 4 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"92 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"LACAY APT.KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"378 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"207 FILIPA BUKID Parada Valenzuela City"},{"Raw Address":"22 AT EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"94 A. FELISA STREEET Parada Valenzuela City"},{"Raw Address":"FORTUNEVillage6 Parada Valenzuela City"},{"Raw Address":"125 CONSUELO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"#33 EARTH ST. E. SANTIAGO Parada Valenzuela City"},{"Raw Address":"94 CAPTAIN ST. Parada Valenzuela City"},{"Raw Address":"1740 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"442 GOMES ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"349 KAINGEN Parada Valenzuela City"},{"Raw Address":"2745 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"177 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"7 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"834 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"131 K. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"153 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"246-C S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"411 A.P. DE GUZMAN TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"267 PETRA ST Parada Valenzuela City"},{"Raw Address":"21 BENMARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"170 UNIT 3 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"66 PARADA ROAD FORTUNE Parada Valenzuela City"},{"Raw Address":"242 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"B3 L6 TINDALO ST FV5 Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 AGLEHAM 2IST ST. Parada Valenzuela City"},{"Raw Address":"465 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"104 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"257 25TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"26 F SANTIAGO MARS ST. Parada Valenzuela City"},{"Raw Address":"88 H CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"252 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"6TH STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"279 PILAR ST.FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"390 TATA ANDRES ST . Parada Valenzuela City"},{"Raw Address":"177 CAPTIAN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"61 PARADA ROAD CORNER FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"255 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"230 1/E DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"240 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"416 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"039 PARADA Valenzuela City"},{"Raw Address":"TATA ERRO Parada Valenzuela City"},{"Raw Address":"319 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"30 PARADA RD. Parada Valenzuela City"},{"Raw Address":"FELISA ST.PARADA Valenzuela City"},{"Raw Address":"79 CAPT.CRUZST. PARADA Valenzuela City"},{"Raw Address":"39 B UNIT 5 RAMON ST. Parada Valenzuela City"},{"Raw Address":"437 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"252 ABELARDO STREET Parada Valenzuela City"},{"Raw Address":"#201 FORTUNE Village 5 6TH ST. Parada Valenzuela City"},{"Raw Address":"97 B CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"2 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"067 C PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"239 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"032 PARADA ST. Parada Valenzuela City"},{"Raw Address":"115 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. PESAHAV Village Parada Valenzuela City"},{"Raw Address":"457 KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"181 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"232 ABELARDO STREET FORTUNE Village NO.4 Parada Valenzuela City"},{"Raw Address":"152 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"12 VENUS ST Parada Valenzuela City"},{"Raw Address":"228 18TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"128 Parada Valenzuela City"},{"Raw Address":"220 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"513 ABCO COMPD. TINDALO ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"L-469 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"455 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"167 6TH ST. Village 5 Parada Valenzuela City"},{"Raw Address":"LOT 9 BLK. 30 UNIT 1 NARRA ST. Parada Valenzuela City"},{"Raw Address":"96 FORTUNE Village 5 ST. PARADA Valenzuela City"},{"Raw Address":"472 PETRA Parada Valenzuela City"},{"Raw Address":"168 ALICIA Parada Valenzuela City"},{"Raw Address":"320 B S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"140 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"470 KAINGIN Parada Valenzuela City"},{"Raw Address":"116 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"100 LAGDAMEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"I207 Parada Valenzuela City"},{"Raw Address":"411 A P. DE GUZMAN TATA ERO Parada Valenzuela City"},{"Raw Address":"320 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"Q-4 289 KAMAGONG ST.PARADA Valenzuela City"},{"Raw Address":"100 CAPT. CRUZ ST. DE GULA CPD. Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG ST.FV 6 PARADA Valenzuela City"},{"Raw Address":"067 Fortune Village 6 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"26 MARS ST F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"094 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"94-D FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"B13 Parada Valenzuela City"},{"Raw Address":"26 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"331 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"127 LAGDAMEO STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"307 PEARL ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"157 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"038 PARADA RD. Parada Valenzuela City"},{"Raw Address":"315 MENES COMP. PARADA VALENZUELA Parada Valenzuela City"},{"Raw Address":"123 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"392 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"L10 &12 UNITE 7ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"365-J TATA ANDRES Parada Valenzuela City"},{"Raw Address":"199 21ST ST. BENMARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"308 A. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"170 DOON COMP SALAZAR ST Parada Valenzuela City"},{"Raw Address":"416 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"1262 KAMAGONG ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"24 T EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"411 C TATA ERRO STREET Parada Valenzuela City"},{"Raw Address":"173 23RD ST. Parada Valenzuela City"},{"Raw Address":"104 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"Valenzuela City Parada Valenzuela City"},{"Raw Address":"334 A. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"342 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"151 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"274 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"197 ANTHONY Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"UNIT 3-A BLOCK 9 LOT 30 NARRA ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"JADE COR. SAPHIRE ST. HIYAS HOME Parada Valenzuela City"},{"Raw Address":"314 MENES CMPD. Parada Valenzuela City"},{"Raw Address":"160 FELIZA ST Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 13 FRANCISCO G. SILANGAN Parada Valenzuela City"},{"Raw Address":"288 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"20 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"468-I KAINGIN ST Parada Valenzuela City"},{"Raw Address":"434 ZAMORA ST. FORTUNE Village 7 BO. Parada Valenzuela City"},{"Raw Address":"51 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. 21 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"230 11-F S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"80 Parada Valenzuela City"},{"Raw Address":"45 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"316 MENES COMP Parada Valenzuela City"},{"Raw Address":"197 ANTHONY ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 20 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"V.P.S. COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"437 ZAMORA STREET Parada Valenzuela City"},{"Raw Address":"BLK2 LOT19 HIYAS SUBD Parada Valenzuela City"},{"Raw Address":"166 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"121 CONSEULO ST. Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST.FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"339 BO. PARADA Valenzuela City"},{"Raw Address":"068 A PARADA ROAD Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"LOT 2 BLK 4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"152 ACACIA ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"415 ZAMORA ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"207 CALLE ONSE BUKID DULO Parada Valenzuela City"},{"Raw Address":"351 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"119 B PEARL ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"351 F.FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"333-C KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"8 SAPPHIRE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"#14 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"172 SALAZAR Parada Valenzuela City"},{"Raw Address":"206 22ND STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"116 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"176 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"122C KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"438 SERVICE RD Parada Valenzuela City"},{"Raw Address":"317 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"0004 BLOCK 4 LOT 3 JADE ST. Parada Valenzuela City"},{"Raw Address":"160 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"115 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"248 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"282 SANTOLAN RD. PARADA Valenzuela City"},{"Raw Address":"8 M LAUREL DRIVE Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"118 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"410 P DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"232 G. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"358 S. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"173 SALAZAR Parada Valenzuela City"},{"Raw Address":"73 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"5 JUPITER ST. Parada Valenzuela City"},{"Raw Address":"LOT5 BLK 5 JADE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"204 22ND ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"237 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"IMPONG JUANA ST. Parada Valenzuela City"},{"Raw Address":"330 T. MANANG Parada Valenzuela City"},{"Raw Address":"0331 D TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"412 ZAMORA ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"280 PILAR ST. Parada Valenzuela City"},{"Raw Address":"297 B. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"127 E.LAGDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"287 SANTOLON RD Parada Valenzuela City"},{"Raw Address":"122 B CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"262 25TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"245 RAMON ST. Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN ST. EXTENSION Parada Valenzuela City"},{"Raw Address":"468 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"257 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"B5 L2 F FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"109 KAMAGONG STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"234 FORTUNE 19 ST. Parada Valenzuela City"},{"Raw Address":"467 A. KAINGIN Parada Valenzuela City"},{"Raw Address":"250 B CALLE ONSE Parada Valenzuela City"},{"Raw Address":"BLK. 4 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"414 TANDANG MANANG ST.PARADA Valenzuela City"},{"Raw Address":"207 FELISA STREET Parada Valenzuela City"},{"Raw Address":"109 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"363 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"3204 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"185-A MOLAVE STREET Parada Valenzuela City"},{"Raw Address":"249 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"232 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"259 ADOR Parada Valenzuela City"},{"Raw Address":"315 JIMENEZ COMPD. ST. Parada Valenzuela City"},{"Raw Address":"70 PARADA ROAD FORTUNE Village Parada Valenzuela City"},{"Raw Address":"BLK. 3 LOT 2 TMHOA Parada Valenzuela City"},{"Raw Address":"357 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"5 5TH ST. Parada Valenzuela City"},{"Raw Address":"12D PARADA ROAD Parada Valenzuela City"},{"Raw Address":"155 C. ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"114 E. LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"150 ALICI ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"67B PARADA RD FORTUNE Village Parada Valenzuela City"},{"Raw Address":"374 TATA ANDREZ STREET Parada Valenzuela City"},{"Raw Address":"254 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"279 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"142 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"116 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"415 TAERO ST. Parada Valenzuela City"},{"Raw Address":"229 18TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"L2 B6 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"199 BAN MARIE ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"308 JIMENEZ COMPOUND ST. PARADA Valenzuela City"},{"Raw Address":"202 ANTHONY ST Parada Valenzuela City"},{"Raw Address":"262 25TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"227 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"442 GOMES STREET Parada Valenzuela City"},{"Raw Address":"257 S.DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"K 39 RAMON STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"501 NARRA ST. FORYUNE 6 Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"KAINGIN RD. Parada Valenzuela City"},{"Raw Address":"390 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"BLK. 3 LOT 13 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"100-E DE GULA COMPOUND Parada Valenzuela City"},{"Raw Address":"444 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE GARDEN 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"202 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"244 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"402 7TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"084 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"91 Parada Valenzuela City"},{"Raw Address":"384 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"216 ANTHONY ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"392 ILOCTO COMP. KAINGIN RD. Parada Valenzuela City"},{"Raw Address":"228 18TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"36 PARADA RD Parada Valenzuela City"},{"Raw Address":"062 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"KABERONG ST. Parada Valenzuela City"},{"Raw Address":"176 23RD FORTUNE Village Parada Valenzuela City"},{"Raw Address":"04 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"266 24TH Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"90 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"371 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"454 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"157 SALAZAR Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 7 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"242 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"190 B. MOLAVE ST. FORTUNE VillageE 6 Parada Valenzuela City"},{"Raw Address":"402 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. BLK 6 LOT 5 GINTONG Parada Valenzuela City"},{"Raw Address":"97B CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"442 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"100 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"ALFONSO APARTMENT Parada Valenzuela City"},{"Raw Address":"248 PARADA RD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"401 SAN ANDRES Parada Valenzuela City"},{"Raw Address":"258 INT. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"186 FELIZA ST Parada Valenzuela City"},{"Raw Address":"409 BIASON COMPD. P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"88 D CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"442 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"152 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"ALFONSO APARTMENT"},{"Raw Address":"148 ZAMORA ST. PARADA Valenzuela City"},{"Raw Address":"BL10 L5 D NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"0343-C FELISA ST. Parada Valenzuela City"},{"Raw Address":"260 RIZALINA ST FORTUNE IV Parada Valenzuela City"},{"Raw Address":"360 J. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"254 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"1 D S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"CALLE ONCE PARADA Valenzuela City"},{"Raw Address":"90 CAPT. CRUZ ST. BO. Parada Valenzuela City"},{"Raw Address":"228 18TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"37 PARADA Valenzuela City"},{"Raw Address":"P DE GUMAN Parada Valenzuela City"},{"Raw Address":"110 CAPATAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"23RD ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"152 ACACIA STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"YAKAL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"027 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE COMPD. 21 ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"269 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"278 7TH FORTUNE VillageE 5 Parada Valenzuela City"},{"Raw Address":"199 21 ST. FV 5 Parada Valenzuela City"},{"Raw Address":"289 SANTOLAN ROAD Parada Valenzuela City"},{"Raw Address":"202 ANTHONY Parada Valenzuela City"},{"Raw Address":"123 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"232 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"164 SALAZAR Parada Valenzuela City"},{"Raw Address":"240 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"0320 B S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"071 PARADA RD. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"199 BEN MARIE COMPOUND 21ST Parada Valenzuela City"},{"Raw Address":"117 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"167 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"234 7TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"42 MARS ST. Parada Valenzuela City"},{"Raw Address":"248 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"BLK 1 LOT 7 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"113 LAGDAMEO Parada Valenzuela City"},{"Raw Address":"137-A NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"116 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"201 CALLE ONSE ST. PARADA Valenzuela City"},{"Raw Address":"121 LAGDAMEO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"360 Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 1 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"YAKAL ST. COR. ACACIA Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"255 TOMASA ST. PARADA Valenzuela City"},{"Raw Address":"22 EUGENIO STREET Parada Valenzuela City"},{"Raw Address":"166 ACACIA ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"WEST SERVICE ROAD CORNER HIYAS Parada Valenzuela City"},{"Raw Address":"179 MOLAVE STREET Parada Valenzuela City"},{"Raw Address":"443 B. WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"62 PARADA RD. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"24 T. EUGENIO Parada Valenzuela City"},{"Raw Address":"376 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"313 JEMENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"244 7TH ST. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. 21ST. Parada Valenzuela City"},{"Raw Address":"046 FORTUNE RD. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"22 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"274 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"513 JIMENES COMP. Parada Valenzuela City"},{"Raw Address":"156 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"283 MARTHA Parada Valenzuela City"},{"Raw Address":"203 B. VENUS STREET Parada Valenzuela City"},{"Raw Address":"# 94 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"88 CAPTAIN CRUZ STREET SAN MIGUEL COMP Parada Valenzuela City"},{"Raw Address":"351 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"440 B. GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"237 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"327 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"149B 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"119 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"#39 D. SANTIAGO COMPD. F4 Parada Valenzuela City"},{"Raw Address":"117 E LAGDAMEO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"31 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"Q4 289 KAMAGONG ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"427 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"135 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"445 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"310 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"359 J.FRANCISCO Parada Valenzuela City"},{"Raw Address":"377 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"33 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"287 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"30 C TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"12 VENUS ST. COMP. Parada Valenzuela City"},{"Raw Address":"43 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"242 19 TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"289 SANTOLAN RD. PARADA Valenzuela City"},{"Raw Address":"362 TATA ANDRESS ST. Parada Valenzuela City"},{"Raw Address":"108 CORNER YAKAL KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"2585 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"144 NARRA ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"244 7TH STRET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"141 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"355 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"63 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"416 TATA-ERO ST. Parada Valenzuela City"},{"Raw Address":"98 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"#40 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"UNIT 1 F. SANTIAGO MERCURY ST. Parada Valenzuela City"},{"Raw Address":"412 TATAERO ST Parada Valenzuela City"},{"Raw Address":"431 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"L5 B10 A NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"138 LAGDAMEO STREET Parada Valenzuela City"},{"Raw Address":"274 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"369 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"199 BEN MARI COMPOUND 22 STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"128 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"27 PARADA RD. Parada Valenzuela City"},{"Raw Address":"165 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"258 INTERIOR M. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"126 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"0011 ADOR ST. Parada Valenzuela City"},{"Raw Address":"106 KAMAGONG ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"162-C SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"111 E LAGDAMEO STREET Parada Valenzuela City"},{"Raw Address":"315 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"322 PEA COMP. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"203 6TH ST. FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"228 - B S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"72 FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"247 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"123 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"018 BARRIO Parada Valenzuela City"},{"Raw Address":"BLOCK 3 LOT 16 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"170 C. SALAZAR ST. DOON COMP. Parada Valenzuela City"},{"Raw Address":"297 T.MANANG ST. PARADA Valenzuela City. Parada Valenzuela City"},{"Raw Address":"182 23RD ST. FORTUNE VIILAGE 5 Parada Valenzuela City"},{"Raw Address":"Q487 IPIL STREET Parada Valenzuela City"},{"Raw Address":"187 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"10 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"170 DOON COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"0359 J.F. FRANCISCO ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"254 25TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"276 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"326 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"B-7 L-25 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"20 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"118 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"F.FRANCISCO S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"365 TATA ANDRE ST. Parada Valenzuela City"},{"Raw Address":"PARADA Valenzuela City"},{"Raw Address":"B4L5 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"285 25TH ST. FORTUNE Village PH5 Parada Valenzuela City"},{"Raw Address":"469 PARADA KAINGIN Parada Valenzuela City"},{"Raw Address":"287 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"405 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"317 A T.MANANG ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"267 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"101 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"B 5 L 9 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"198 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"1336 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"CALLE ONCE MARCELO COMPD. Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 10 E FRANCISCO ST. GINTONG Parada Valenzuela City"},{"Raw Address":"122B CALLE ONSE Parada Valenzuela City"},{"Raw Address":"235 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"140 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"238 19TH ST. FORTUNE Village PARADA Valenzuela City"},{"Raw Address":"245 ABELARDO ST. FORTUNE IV Parada Valenzuela City"},{"Raw Address":"277 PILAR ST. PARADA Valenzuela City"},{"Raw Address":"161 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"269 -G S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"239 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"116 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"276 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"187 24TH ST Parada Valenzuela City"},{"Raw Address":"428 SEVICE RD. Parada Valenzuela City"},{"Raw Address":"PARADA ROAD Parada Valenzuela City"},{"Raw Address":"39 B RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"A 94 FELISA ST. Parada Valenzuela City"},{"Raw Address":"117 E LAGDAMEO ST.FV 4 Parada Valenzuela City"},{"Raw Address":"371 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"257 M. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"203 B VENUS ST Parada Valenzuela City"},{"Raw Address":"260 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"119 21 ST. BENMARIE COMP. FORTUNE V Parada Valenzuela City"},{"Raw Address":"24 VENUZ E2E COMP. F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"25TH ST. FORTUNE Village 5. Parada Valenzuela City"},{"Raw Address":"#109 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"31 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"456-G KAKAWATE ST. KAINGIN Parada Valenzuela City"},{"Raw Address":"98 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"458 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"307 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"315 JIMENEZ CMPD Parada Valenzuela City"},{"Raw Address":"241 7TH Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"234 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"274 C S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"243 S. DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"26 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"FELIZA ST.PARADA Valenzuela City"},{"Raw Address":"LOT 10 E&E COMPOUND Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"33A. FATIMA COMP. Parada Valenzuela City"},{"Raw Address":"248 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"J FRANCISCO Parada Valenzuela City"},{"Raw Address":"415 T MANANG ST. Parada Valenzuela City"},{"Raw Address":"274 S Parada Valenzuela City"},{"Raw Address":"37-D PARADA RD. Parada Valenzuela City"},{"Raw Address":"391 P.DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"125 CONSUELO ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"APB MOLAVE ST. 6TH Parada Valenzuela City"},{"Raw Address":"83 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"15 DIAMOND ST HIYAS HOMES SUBD Parada Valenzuela City"},{"Raw Address":"B1L4 FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"257 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"97 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"#1 24 ST. FORTUINE 5 Parada Valenzuela City"},{"Raw Address":"165 SALASZAR ST. Parada Valenzuela City"},{"Raw Address":"320 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"90 ADOR ST. Parada Valenzuela City"},{"Raw Address":"188 24 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"0042 DOON COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"LOT 19 BLK 3 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"430 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"438 BO. PARADA ST. Parada Valenzuela City"},{"Raw Address":"ALICIA ST.FV 4 Parada Valenzuela City"},{"Raw Address":"118 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"206 UNIT 1 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 10 LOT 3 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"B1L2 TMOA Parada Valenzuela City"},{"Raw Address":"438 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"233 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST Parada Valenzuela City"},{"Raw Address":"135 E. LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"#45 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"192 RAMON Parada Valenzuela City"},{"Raw Address":"10 10 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"339 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"204 6TH ST. Parada Valenzuela City"},{"Raw Address":"CALLE ONCE CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"357 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"392-B S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"406 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"154 ALICIA ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"201 A. FELIZA ST. Parada Valenzuela City"},{"Raw Address":"140 CAPT. CRUZ COR E. Parada Valenzuela City"},{"Raw Address":"154 C SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"122 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"106 LAG DAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"232 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"172 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"377 18 ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"150 NARRA ST. PARADA Valenzuela City. Parada Valenzuela City"},{"Raw Address":"274 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"4684 HIYAS HOME SUBD. PEARL ST. Parada Valenzuela City"},{"Raw Address":"BLK 9 LOT 20 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"B 2 L 13 349 FRACISCO ST. Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"168 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"450 CARREON CPD. WEST SERVICE RD Parada Valenzuela City"},{"Raw Address":"246 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"312 INT. MENES CMPD. PARADA Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"199 Parada Valenzuela City"},{"Raw Address":"320 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"138 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"179 23RD STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"204 BF SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"260 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO Parada Valenzuela City"},{"Raw Address":"B2 L14 F. FRANCISCO GUINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"44 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"32 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"170 UNIT 3 DOON COMP. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"362 B TATA ANDRES Parada Valenzuela City"},{"Raw Address":"179 RAMON ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"253 ABVELARDO ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"444 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"149 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST.FV 4 Parada Valenzuela City"},{"Raw Address":"12 VENUS ST. E & E COMP. Parada Valenzuela City"},{"Raw Address":"B4 L9 349 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"273 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"145 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"287 SANTOLAN ROAD Parada Valenzuela City"},{"Raw Address":"29207 FILIZA BUKID Parada Valenzuela City"},{"Raw Address":"BLK5 LOT18 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"4480 25TH ST. Parada Valenzuela City"},{"Raw Address":"254 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"#244 7TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"279 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"154 NARRA ST. Parada Valenzuela City"},{"Raw Address":"#122 B. CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"281 PILAR ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"235 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"L9 T. MANANG Parada Valenzuela City"},{"Raw Address":"5880 CORAL ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"257 RIZALINA ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"89 Parada Valenzuela City"},{"Raw Address":"279-3 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 13 LOT 27 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"281 PILAR ST. Parada Valenzuela City"},{"Raw Address":"249 ABELARDO STREET Parada Valenzuela City"},{"Raw Address":"BLOCK 1 LOT 7 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"88 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"269 INANG PETRA ST. PARADA Valenzuela City"},{"Raw Address":"384 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"235 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"270 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"29 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"239 TANDANG MANANG PARADA Valenzuela City"},{"Raw Address":"365 TATA ANDRESS Parada Valenzuela City"},{"Raw Address":"372 TATA ANDREZ Parada Valenzuela City"},{"Raw Address":"124 LAGDAMEO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"402 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"L-31 B-8 PARADA ROAD FORTUNE VILLAGE Parada Valenzuela City"},{"Raw Address":"407 P DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"118 C. CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"012 PARADA RD. Parada Valenzuela City"},{"Raw Address":"228 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"21ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"BLK 1 LOT 3 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"462 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"416 ZAMORA ST. FV7 Parada Valenzuela City"},{"Raw Address":"165 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"285 S.DEGUZMAN PARADA Valenzuela City"},{"Raw Address":"FILIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"456 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"412 TATA IRRO ST. Parada Valenzuela City"},{"Raw Address":"260 RIZALINA ST. Parada Valenzuela City"},{"Raw Address":"#207 FELIZA BUKID VENUS ST. Parada Valenzuela City"},{"Raw Address":"47 B. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"333 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"56 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"0325 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"186 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"145B NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"#1 24 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"351 CAPT. FRANCISCO EXT. Parada Valenzuela City"},{"Raw Address":"22 IMPONG JUANA ST. S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"#1752 3RD STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"412 TATA ERRO ST Parada Valenzuela City"},{"Raw Address":"347 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"226 18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"412 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"424 BUROGOS Parada Valenzuela City"},{"Raw Address":"358 J. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"431 GOMEZ ST. FORTUNE Village 7 BO. Parada Valenzuela City"},{"Raw Address":"091 FORTUNE DR. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 5 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"424 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"170 RAMON ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"102 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"99 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"94 FELIZA ST Parada Valenzuela City"},{"Raw Address":"440B GOMEZ ST. FORTUNE Village7 MALINTA Parada Valenzuela City"},{"Raw Address":"174 FELIZA Parada Valenzuela City"},{"Raw Address":"152 ALICIA Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"86 SALVADOR ST. PARADA Valenzuela City"},{"Raw Address":"L7 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"B1 L9 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"FELIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"255 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"31F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"234 19TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"307 PARADA PEARL Parada Valenzuela City"},{"Raw Address":"L10 NEPTUNE ST. Parada Valenzuela City"},{"Raw Address":"275 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"25TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CONSUELO ST Parada Valenzuela City"},{"Raw Address":"255 TOMASA PARADA Valenzuela City"},{"Raw Address":"302 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"259 25TH ST. Parada Valenzuela City"},{"Raw Address":"411 TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"145-C NARRA STREET Parada Valenzuela City"},{"Raw Address":"256 25TH STREET Parada Valenzuela City"},{"Raw Address":"66 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"40 PEARL STREET HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"123 KAMAGONG ST Parada Valenzuela City"},{"Raw Address":"140 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"341 20TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"89 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"70 PARADA RD. Parada Valenzuela City"},{"Raw Address":"39 D. SANTIAGO CMPD. FV4 Parada Valenzuela City"},{"Raw Address":"407 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"23 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"L8 B6 GINTONG SILANGANAN F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"412 ZAMORA ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"99 VENUZ ST. F.SNTIAGO Parada Valenzuela City"},{"Raw Address":"270 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"389 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"118 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"283 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"316 MENEZ ST. PARADA Valenzuela City"},{"Raw Address":"125 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"456 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"351-C F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"87 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"243 Fortune Village 5 7TH ST. Parada Valenzuela City"},{"Raw Address":"232 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"403 FORTUNE Village 5 ST. PARADA Valenzuela City"},{"Raw Address":"BLK4 LOT1 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"045 PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"203 B VENUS ST. BO Parada Valenzuela City"},{"Raw Address":"170 DOON COMPOUND SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"468-O KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"BLK 10 LOT41 NARRA ST Parada Valenzuela City"},{"Raw Address":"27A NEW BLOCK 10 NARRA ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"CASTILLO COMPD. FELIZA ST. Parada Valenzuela City"},{"Raw Address":"154 ALICIA FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"313 MENES COMPD. BO. PARADA Valenzuela City"},{"Raw Address":"7 5TH FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"168 ALICIA Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"315 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"384 S.DEGUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"0274 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPD. 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"194 6ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"228 S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"135 LAGDAMEO ST. Fortune Village 4 VillageE Parada Valenzuela City"},{"Raw Address":"451 ZAMORA Parada Valenzuela City"},{"Raw Address":"168 DOON CMP SALAZAR ST Parada Valenzuela City"},{"Raw Address":"246 C S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"258 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE FORTUNE VillageE Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"94 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"456-D KAKAWATE ST. Parada Valenzuela City"},{"Raw Address":"039 RAMON ST. FV4 Parada Valenzuela City"},{"Raw Address":"218 ST. Parada Valenzuela City"},{"Raw Address":"470 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"125 Parada Valenzuela City"},{"Raw Address":"224 21ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 10 JADE ST. SUBD. Parada Valenzuela City"},{"Raw Address":"115 KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"LOT 6B F-SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"474 KA BERONG Parada Valenzuela City"},{"Raw Address":"40 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"BLK 5 LOT 2 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"31 F-SANTIAGO Parada Valenzuela City"},{"Raw Address":"258 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"GOMES ST. Parada Valenzuela City"},{"Raw Address":"CITY MM. Parada Valenzuela City"},{"Raw Address":"63 PARADA ROAD ST Parada Valenzuela City"},{"Raw Address":"5 JUPITER ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"C. PARADA RD. Parada Valenzuela City"},{"Raw Address":"96 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"236 19TH ST. Parada Valenzuela City"},{"Raw Address":"243 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"256 DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"146 Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMPD. PARADA Valenzuela City"},{"Raw Address":"19B ZAMORA ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO ST. LOT 8 Parada Valenzuela City"},{"Raw Address":"242 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"250 ABELARDO ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"1548-A PEARL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"200 A 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"255 TOMASA ST Parada Valenzuela City"},{"Raw Address":"200 CALLE ONCE PARADA Valenzuela City"},{"Raw Address":"114 LAGDAMEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"184 23RD ST. Parada Valenzuela City"},{"Raw Address":"362 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"031 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO MANUKAN Parada Valenzuela City"},{"Raw Address":"18A F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"169 7TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"168 ALICIA ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"246 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"064 PARADA ROAD FORTUNE Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"204 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"T. MORONG ST. Parada Valenzuela City"},{"Raw Address":"104 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"023 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"202 ANTHONY Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"267 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGOMARS ST. Parada Valenzuela City"},{"Raw Address":"171-A SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"098 Fortune Village 5 FORTUNE DR. Parada Valenzuela City"},{"Raw Address":"435 ZAMORA STREET Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"179 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"207 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"215 ANTHONY STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"272 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"230 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"201 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"276 B S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"354 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"199 21ST VF5 Parada Valenzuela City"},{"Raw Address":"134 5TH ST. Fortune Village 5&6 Parada Valenzuela City"},{"Raw Address":"240 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"1028 B. KAMAGONG ST. FV6&5 Parada Valenzuela City"},{"Raw Address":"0468 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"121 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"101 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"193 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"135 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"199 21ST ST. BENMARIE COMP. Parada Valenzuela City"},{"Raw Address":"256 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"423 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"131 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"1430 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"229 18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"256 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"200 CAPT. CRUZ CALLE ONSE Parada Valenzuela City"},{"Raw Address":"Q4289 KAMAGONG ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"338 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"343 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"427 BURGOS ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"132 KAMAGONG ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPD. 21ST FV5 Parada Valenzuela City"},{"Raw Address":"53 3RD FORTUNE V Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"B1 L12 BURGOS Parada Valenzuela City"},{"Raw Address":"161 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"325 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"1213 LAGDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"3B P.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"91 A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"239 ABELARDO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"055 PARADA FORTUNE5 Parada Valenzuela City"},{"Raw Address":"179 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"15 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"27 A. PARADA RD. Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ PARADA Valenzuela City"},{"Raw Address":"004 PARADA Valenzuela City"},{"Raw Address":"117 LAGDAMEO FV 4 Parada Valenzuela City"},{"Raw Address":"462 P GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"468 KAINGIN Parada Valenzuela City"},{"Raw Address":"147 ALICIA STREET Parada Valenzuela City"},{"Raw Address":"134 E LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"220-C 21 ST. Fortune Village 5 SUBD. Parada Valenzuela City"},{"Raw Address":"1 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"192 M. DE GULA Parada Valenzuela City"},{"Raw Address":"6 PARADA RD. Parada Valenzuela City"},{"Raw Address":"274 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"18 A F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"3 CORAL ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"391 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"376 Parada Valenzuela City"},{"Raw Address":"153 6TH ST. FORTUNE FIVE Parada Valenzuela City"},{"Raw Address":"437-M GOMEZ ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"16B SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"243 7TH ST. Parada Valenzuela City"},{"Raw Address":"269 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"187 FELIZA ST Parada Valenzuela City"},{"Raw Address":"202 22ND ST. Parada Valenzuela City"},{"Raw Address":"# 31 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"467 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"39 PARADA RD Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"4560 Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"36D PARADA RD. Parada Valenzuela City"},{"Raw Address":"190 6TH ST FORTUNE Village 5 &6 Parada Valenzuela City"},{"Raw Address":"266 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"201 22ND ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"219 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"307 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"419 ZAMORA ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"70 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"199 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"390 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"154 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"232 DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"FV7 Parada Valenzuela City"},{"Raw Address":"264 B 19TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"190 DE GULA STREET Parada Valenzuela City"},{"Raw Address":"128 PARADA ROAD Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"34 F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"246 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"201 CALLE ONCE ST. Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 20 349 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"377 18TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"247 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"#26 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"114 LAGDAMEO STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"# 66 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"KAINGIN ST. SANTOLAN RD. PARADA Valenzuela City"},{"Raw Address":"196 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"0005 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"351 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"100 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"122 A. KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"454 7TH ST. Parada Valenzuela City"},{"Raw Address":"117 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"190 6ST MOLAVE Fortune Village 5-6 Parada Valenzuela City"},{"Raw Address":"279 PILAR Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"351 F. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"196 MOLALE ST. Parada Valenzuela City"},{"Raw Address":"170 DOON COMPD. SALAZAR Parada Valenzuela City"},{"Raw Address":"160 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"4387 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"349 F FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"192 M. DE GULA STREET Parada Valenzuela City"},{"Raw Address":"199 21 ST. BENMARIE COMP. Parada Valenzuela City"},{"Raw Address":"275 PILAR ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"119 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"339 Fortune Village 5 21ST STREET Parada Valenzuela City"},{"Raw Address":"340 2OTH STREET Parada Valenzuela City"},{"Raw Address":"114 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"260 TATAROMAN ST Parada Valenzuela City"},{"Raw Address":"TATA ERO ST. PARADA Valenzuela City"},{"Raw Address":"S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"98 CAPT. ST. Parada Valenzuela City"},{"Raw Address":"168 DOON COMP Parada Valenzuela City"},{"Raw Address":"273 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMPD Parada Valenzuela City"},{"Raw Address":"272 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"72 JADE ST. Parada Valenzuela City"},{"Raw Address":"332M T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"245 ABELARDO ST FV4 Parada Valenzuela City"},{"Raw Address":"122 CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"216 D DE GUZMAN Parada Valenzuela City"},{"Raw Address":"192 C 6TH ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"BLK 12 LOT 5 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"313 MENES CMPD. PARADA Valenzuela City"},{"Raw Address":"207 F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"212 21ST STREET FORTUNE V Parada Valenzuela City"},{"Raw Address":"137 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"120 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"LOT 20 A F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"95 P. DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"176 MOLAVE ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"BLK. 6 LOT 9 JADE ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"91 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"139 NARRA STREET Parada Valenzuela City"},{"Raw Address":"441 P. GOMEZ Parada Valenzuela City"},{"Raw Address":"500 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"FORTUNE IV RAMON ST. Parada Valenzuela City"},{"Raw Address":"198 DE GULA ST. Parada Valenzuela City"},{"Raw Address":"117 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"88 Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"175 MOLAVE Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"LE 116 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"201 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"254 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"311 Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"185 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"414 NO.4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"003 PARADA Valenzuela City"},{"Raw Address":"94-B FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"202 MOLAVE Parada Valenzuela City"},{"Raw Address":"227 18TH STREET Parada Valenzuela City"},{"Raw Address":"488 ZAMORA ST Parada Valenzuela City"},{"Raw Address":"068 PARADA FORTUNE Village6 Valenzuela City Parada Valenzuela City"},{"Raw Address":"181 RAMON STREET Parada Valenzuela City"},{"Raw Address":"119 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"377 18 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"199 21ST ST.FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"197 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"31 F Parada Valenzuela City"},{"Raw Address":"172-B MOLAVE ST FORTUNE6 Parada Valenzuela City"},{"Raw Address":"#45 A F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"273 S.DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"256 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"91 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"349 BLK 9 F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"152 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. FV 4 Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG HOUSING PROJECT Parada Valenzuela City"},{"Raw Address":"FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"377 18TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"176 CAPTAIN CRUZ ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"28 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"321 B. S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"290 ILOCTO COMP. Parada Valenzuela City"},{"Raw Address":"27A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"306 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"L10 NEPTUNE ST Parada Valenzuela City"},{"Raw Address":"39 PARADA RD. Parada Valenzuela City"},{"Raw Address":"228 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"349 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"140 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"165 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"270 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"354 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"199 BENMARIE CMPD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"19921 ST FORTUNE` Parada Valenzuela City"},{"Raw Address":"116 CALLE ONCE STREET Parada Valenzuela City"},{"Raw Address":"095 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"2150 DAET COMPD. Parada Valenzuela City"},{"Raw Address":"386 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"LOT 5 BLK. 10 A NARRA STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"104 E. LAGDAMEO STREET Parada Valenzuela City"},{"Raw Address":"231 18ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"5F SANTIAGO STREET. Parada Valenzuela City"},{"Raw Address":"F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"2507 - FILIZA BUKID Parada Valenzuela City"},{"Raw Address":"22 EUGENIO Parada Valenzuela City"},{"Raw Address":"279 PILAR ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID VENUS ST. Parada Valenzuela City"},{"Raw Address":"181 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"348 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"371 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"282 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"BLK 9 LOT 30 UNIT 1 NARRA ST. Parada Valenzuela City"},{"Raw Address":"465 KAINGIN RD. Parada Valenzuela City"},{"Raw Address":"241 7TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"234 19TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"362 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"512 ABCO COMP FORTUNE VillageE 6 Parada Valenzuela City"},{"Raw Address":"282 PILAR ST. Parada Valenzuela City"},{"Raw Address":"407 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"244 7TH STREET FORTUNE VILALGE 5 Parada Valenzuela City"},{"Raw Address":"207 A FELIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"166 6TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"015 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"359 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"172 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"162 E.SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"329 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"BLK 4 LOT 4 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"GOMEZ STREET Parada Valenzuela City"},{"Raw Address":"467 CAINGIN ST. Parada Valenzuela City"},{"Raw Address":"#199 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"134 5TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"064 PARADA ROAD FORTUNE Village Parada Valenzuela City"},{"Raw Address":"63 PARADA RD EXT. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"FELIZA BUKID CALLE ONSE Parada Valenzuela City"},{"Raw Address":"14 C PEARL ST. HIYAS HOME Parada Valenzuela City"},{"Raw Address":"199 6TH STREET Parada Valenzuela City"},{"Raw Address":"94B FORTUNE DRIVE. FORTUNE Village 5 6TH ST. Parada Valenzuela City"},{"Raw Address":"5TH ST. FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"111 C KAMAGONG ST. FORTUNE VI Parada Valenzuela City"},{"Raw Address":"199 21 ST Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"116 CALLE ONCE ST. Parada Valenzuela City"},{"Raw Address":"266 24TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"399 SAN ANDRES Parada Valenzuela City"},{"Raw Address":"93 C/ CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"440 SERVICE ROAD ROMARAO COMPOUND Parada Valenzuela City"},{"Raw Address":"106 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"349 CAPT.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"266 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"L17-B2 SAPPHIRE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"318 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"31 F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"10 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"464 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"#5 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"028 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"109 E. LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"118 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"271 CONSUELO FV 4 Parada Valenzuela City"},{"Raw Address":"126 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BEN MARIE COMP. Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"379 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"258 25TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"118 DOOR 12 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 3 DAHOA PARAFORT Parada Valenzuela City"},{"Raw Address":"369 TATAANDRES ST Parada Valenzuela City"},{"Raw Address":"402 SAN ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"36 B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"#319 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"137 FORTUNE DR. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#97 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"411 C. TATA ERRO Parada Valenzuela City"},{"Raw Address":"12 Parada Valenzuela City"},{"Raw Address":"404 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"365 PARADA TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"LOT 15A 207 FELISA BUKID Parada Valenzuela City"},{"Raw Address":"19 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"404 P.DE GUZMAN PARADA RD. Parada Valenzuela City"},{"Raw Address":"362 TATA ANDRES ST.BO.Parada Valenzuela City"},{"Raw Address":"ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B5 LOT 2 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"177 GONZALES COMP. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"200 FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"413 P/ DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"45 A. EARTH ST. SANTIAGO Parada Valenzuela City"},{"Raw Address":"NEPTUNE ST. Parada Valenzuela City"},{"Raw Address":"FATIMA ANEX CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"228 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"472 KA BERONG ST. PARADA Valenzuela City"},{"Raw Address":"330 Parada Valenzuela City"},{"Raw Address":"168 KAMAGONG ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"315 JIMENES COMP Parada Valenzuela City"},{"Raw Address":"199 21ST ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"392-C P.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"A334 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"203 ANTHONY ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"Q4 289 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"31 F BO. Parada Valenzuela City"},{"Raw Address":"064 PARADA RD. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"84 A CAPT. CRUZ DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"177 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMPD. Parada Valenzuela City"},{"Raw Address":"TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"274 TATA ENRONG STREET S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"20 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"0250 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"SAN MIGUEL COMP. ST. Parada Valenzuela City"},{"Raw Address":"99 VENUS ST Parada Valenzuela City"},{"Raw Address":"0343-C FELIZA ST. Parada Valenzuela City"},{"Raw Address":"181 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"349 F-FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"435 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"330 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"314 SANTIAGO Parada Valenzuela City"},{"Raw Address":"261 25TH STREET Parada Valenzuela City"},{"Raw Address":"259 ADOR ST Parada Valenzuela City"},{"Raw Address":"185 CASTILLO COMPOUND FELIZA ST. Parada Valenzuela City"},{"Raw Address":"PARADA RD. PARADA Valenzuela City"},{"Raw Address":"372 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"314 PARADA Valenzuela City"},{"Raw Address":"294 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"B1L9 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"22 EUGENIO F.A APT. Parada Valenzuela City"},{"Raw Address":"506 TINDALO ST. Parada Valenzuela City"},{"Raw Address":"19 B ZAMORA ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"278 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"177 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"153 ACACIA ST. FV 6 Parada Valenzuela City"},{"Raw Address":"068A PARADA RD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"242 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"244 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"116-D. CALLE ONSE CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"# 207 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"390S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"90 CAPT. ST. Parada Valenzuela City"},{"Raw Address":"175 A MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"200 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO STREET BLK4 LOT5 Parada Valenzuela City"},{"Raw Address":"31 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"267 PETRA ST. Parada Valenzuela City"},{"Raw Address":"211 21ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"036 C PARADA RD. Parada Valenzuela City"},{"Raw Address":"150 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"394 F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"219 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"377 18 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"94 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"15 PARADA ST Parada Valenzuela City"},{"Raw Address":"294 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"0013 TEMPO P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"437 FV7 Parada Valenzuela City"},{"Raw Address":"5TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"114 LAGDAMEO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"144 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. BLK 2 LOT 19 GINTONG Parada Valenzuela City"},{"Raw Address":"39 PARADA Valenzuela City"},{"Raw Address":"177 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"68 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"B3 Parada Valenzuela City"},{"Raw Address":"282 S. DEGUZMAN Parada Valenzuela City"},{"Raw Address":"320B S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"KM 19 BO. PARADA ST. Parada Valenzuela City"},{"Raw Address":"6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"1727 B TATA ERO Parada Valenzuela City"},{"Raw Address":"245 B SALAZAR ST. DOON COMPD. Parada Valenzuela City"},{"Raw Address":"349 FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"439 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"204 F.SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"187 B FELIZA STREET Parada Valenzuela City"},{"Raw Address":"144 E. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"172 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"345 CAPT FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"144 DALAWAN STREET Parada Valenzuela City"},{"Raw Address":"7 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"257 S DEGUZMAN STREET Parada Valenzuela City"},{"Raw Address":"PARADA RD. Parada Valenzuela City"},{"Raw Address":"185-D FELIZA STREET Parada Valenzuela City"},{"Raw Address":"7 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"243 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"4781 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"94B FORTUNE DRIVE ST. Parada Valenzuela City"},{"Raw Address":"200 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"199 FORTUNE Village 5 STREET Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"94 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"204 VENUS STREET E.N.E COMPOUND Parada Valenzuela City"},{"Raw Address":"86 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"444 RUMARAO CPD. Parada Valenzuela City"},{"Raw Address":"413 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"449 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"CORNER SAPPHIRE ST. HIYAS SUBD. PEARL ST. Parada Valenzuela City"},{"Raw Address":"431 GOMEZ ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"442 P.GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"290 SANTOLAN ST. Parada Valenzuela City"},{"Raw Address":"222 SALVADOR Parada Valenzuela City"},{"Raw Address":"7 5TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"307 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"216 21ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"FELISA ST. Parada Valenzuela City"},{"Raw Address":"57 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"367 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"SISCARA APT ADOR ST Parada Valenzuela City"},{"Raw Address":"BLK6 LOT7 GINTONG SILANGAN F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"B5 L1 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"168 21 STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"187 A FELIZA ST Parada Valenzuela City"},{"Raw Address":"067 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"336 T.MANANG BO. PARADA Valenzuela City"},{"Raw Address":"227 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"182 Parada Valenzuela City"},{"Raw Address":"108 RAMON ST. FV 4 Parada Valenzuela City"},{"Raw Address":"HIYAS HOME SUBD. SAPHIRE Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 9 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"BLK. 8 LOT 10 CARACTA VillageE Parada Valenzuela City"},{"Raw Address":"403 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"320 S Parada Valenzuela City"},{"Raw Address":"147 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"269 INT S DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"244 7TH STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"468 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"255 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"46 P. DE GUZMAN BANDINO STREET Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. SANTIAGO Parada Valenzuela City"},{"Raw Address":"40 PARADA ST. Parada Valenzuela City"},{"Raw Address":"0147-E DOON ST. Parada Valenzuela City"},{"Raw Address":"468 - O KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"260 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"31 MARS ST. E&E COMPD. Parada Valenzuela City"},{"Raw Address":"LOT 5 BLK 7 199 BENMARIE COMP. 21 ST. Parada Valenzuela City"},{"Raw Address":"180 FELISA ST. Parada Valenzuela City"},{"Raw Address":"301 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"206 22ND ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"212 ANTHONY Parada Valenzuela City"},{"Raw Address":"Q4289 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"424 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"#118 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. 21ST. FV5 Parada Valenzuela City"},{"Raw Address":"KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"315 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"139 FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"468 Q KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"204 BF. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"349 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. DOON COMPOUND Parada Valenzuela City"},{"Raw Address":"1882 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"WEST SERVICE ROAD CARREON COMPD. Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST Parada Valenzuela City"},{"Raw Address":"161 ALICIA Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"240 7 STREET Parada Valenzuela City"},{"Raw Address":"202A 22 STREET Parada Valenzuela City"},{"Raw Address":"5TH ST. FV 5 PARADA RD. Parada Valenzuela City"},{"Raw Address":"141 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"252-A LOT 2 BLOCK 2 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"2157 BORNALES CPD.KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"90 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"#94 Parada Valenzuela City"},{"Raw Address":"036 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"327 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"283 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"313 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"318 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"167 6TH ST. Parada Valenzuela City"},{"Raw Address":"P DE GUZMAN COR TATA ERO Parada Valenzuela City"},{"Raw Address":"161 FELIZA Parada Valenzuela City"},{"Raw Address":"443 ROSELLA ST. Parada Valenzuela City"},{"Raw Address":"130 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"446 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"0290 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"B1 L6 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"024 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"1 PARADA ST Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"242 S. DE GUZMAN COR. MARY ANN THIS WAY ST. Parada Valenzuela City"},{"Raw Address":"470 KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"270 S. DE GUZMAN BARRIO Parada Valenzuela City"},{"Raw Address":"199 6TH ST.MANALANG CMPD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"270 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"67 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"032 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"283-D DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"33 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. ST. FORTUNE Village Valenzuela City Parada Valenzuela City"},{"Raw Address":"256 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"242 Parada Valenzuela City"},{"Raw Address":"101 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"ROAD Parada Valenzuela City"},{"Raw Address":"012 PARADA Valenzuela City"},{"Raw Address":"BL3LT9 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"244 7TH ST.FORTUNE Village Parada Valenzuela City"},{"Raw Address":"185B FELIZA ST. Parada Valenzuela City"},{"Raw Address":"235 19TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"336 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"468-E KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"151 ST. FORTUNE IV Parada Valenzuela City"},{"Raw Address":"177 23RD STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"111 UNIT KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"115 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"260 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B2 L5 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"200 FORTUNE Village Parada Valenzuela City"},{"Raw Address":"146 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"123 CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"199 BEN MARIE 21ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"240 ABELARDO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"266 24 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"210 21ST COR. FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"188 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"151 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"243 S. D GUZMAN ST Parada Valenzuela City"},{"Raw Address":"315 MENEZ COMP. PARADA Valenzuela City"},{"Raw Address":"30 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"A22 T. EUGENIO STREET Parada Valenzuela City"},{"Raw Address":"309 JEMENES COMP. Parada Valenzuela City"},{"Raw Address":"45A F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"80 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"3A 144 E. FRANCISCO Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPOUND Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"199 21ST ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"181 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"DOOR 1 151 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"032 PARADA RD. Parada Valenzuela City"},{"Raw Address":"431-B GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"252 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"183 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"331 D TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"340 20TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"039 D. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"091FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"199 21ST BEN MARIE COMP. FV6 Parada Valenzuela City"},{"Raw Address":"133 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"122 B CALLE ONSE Parada Valenzuela City"},{"Raw Address":"101 M. DE Parada Valenzuela City"},{"Raw Address":"28 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"273 Parada Valenzuela City"},{"Raw Address":"VALENZUELA CITY Parada Valenzuela City"},{"Raw Address":"470KAINGIN ST Parada Valenzuela City"},{"Raw Address":"4480 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"99 VENUST ST. Parada Valenzuela City"},{"Raw Address":"188 MOLAVE ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"334 T. MANANG ST Parada Valenzuela City"},{"Raw Address":"098D FORTUNE Village 7TH ST. Parada Valenzuela City"},{"Raw Address":"336 UNIT 2 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"310 JIMENEZ ST. Parada Valenzuela City"},{"Raw Address":"4680 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"031 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"167 RAMON ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"72 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"123 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"251 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"114E LAGDAMEO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"0012 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 3 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"4078 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"131 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"28 Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"07 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"222 KAMAGONG ST Parada Valenzuela City"},{"Raw Address":"291 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"256 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLOCK5 LOT2 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"200-C CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"217 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"235 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"320 C DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"199 BEN MARIE COMP. 21ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"15 DIAMOND ST. Parada Valenzuela City"},{"Raw Address":"B5 L2 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"391 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"077 PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"42 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"345 CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"297-C T. MANANG ST. PARADA Valenzuela City"},{"Raw Address":"824 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"009 Parada Valenzuela City"},{"Raw Address":"308 MENES CMPD. Parada Valenzuela City"},{"Raw Address":"118 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"267 INANG PETRA ST. S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"1253 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"405 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"PETRA ST. PARADA Valenzuela City"},{"Raw Address":"412 P DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"92 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"139 Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"276 E.S DEGUZMAN Parada Valenzuela City"},{"Raw Address":"173 SALAZAR ST. PARADA Valenzuela City.A Parada Valenzuela City"},{"Raw Address":"83 D CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BEN MARIE GARDENS Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"167 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"#79 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"362 TATAANDRES ST. Parada Valenzuela City"},{"Raw Address":"100 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"199 21 ST FORTUNE V Parada Valenzuela City"},{"Raw Address":"LOT 14 BLK 5 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"444 WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"Fortune Village 6 6TH ST. Parada Valenzuela City"},{"Raw Address":"84 PARADA ROAD EXT. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"Fortune Village 6 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"122 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"200 F. SANTIAGO MERCURY ST. Parada Valenzuela City"},{"Raw Address":"98 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"31 F. SANTIAGO ST. E&E COMPD. Parada Valenzuela City"},{"Raw Address":"269 DE GUZMAN Parada Valenzuela City"},{"Raw Address":"012 Parada Valenzuela City"},{"Raw Address":"BLOCK 4 LOT 17 F.FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"090 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"8 E AND E COMPD. F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST. Fortune Village 4. Parada Valenzuela City"},{"Raw Address":"067 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"UNIT 2 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"281 PILAR STREET Parada Valenzuela City"},{"Raw Address":"209 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"269 INT. S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"071 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"200 6TH ST. Parada Valenzuela City"},{"Raw Address":"187 DE GULA COMP CAPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"122 CALLEONSE Parada Valenzuela City"},{"Raw Address":"207 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"228 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"190 6TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"328 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"466-C KA BERONG Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. FORTUNE VillageE 4 Parada Valenzuela City"},{"Raw Address":"B2 LOT10 F FRANCISCO ST. G SILANGAN Parada Valenzuela City"},{"Raw Address":"132 LAGDAMEO ST. FOTRUNE 4 Parada Valenzuela City"},{"Raw Address":"BLK. 4 LOT 13 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"Q487 IPIL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"279 PILAR ST. Parada Valenzuela City"},{"Raw Address":"334 #1 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"35C 5TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"202 FELISA ST. Parada Valenzuela City"},{"Raw Address":"144 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"04 KAINGIN Parada Valenzuela City"},{"Raw Address":"28 CAPT CRUZ ST.Parada Valenzuela City"},{"Raw Address":"02 157 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"184 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"414 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"1548 Parada Valenzuela City"},{"Raw Address":"361 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"500 FORTUNE DRIVE FORTUNE V Parada Valenzuela City"},{"Raw Address":"50 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"83 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"GULA ST. Parada Valenzuela City"},{"Raw Address":"267 Parada Valenzuela City"},{"Raw Address":"B1 L1 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"193 AM DE GULA ST. Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO STREET Parada Valenzuela City"},{"Raw Address":"183 FELIZA Parada Valenzuela City"},{"Raw Address":"243 7TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"25 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"315 MENES CMPD. Parada Valenzuela City"},{"Raw Address":"286 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"270 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"69 Parada Valenzuela City"},{"Raw Address":"247 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"290 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"154 FORTUNE Village4 PARADA Valenzuela City"},{"Raw Address":"384 BO. PARADA Valenzuela City"},{"Raw Address":"237 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B7L1 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"109 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"442 GOMEZ Parada Valenzuela City"},{"Raw Address":"291KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"0009 BLK 3 LOT 9 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"100 DOOR 3 CAPT CRUZ ST.Parada Valenzuela City"},{"Raw Address":"88-D CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"31 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"308 MENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"157-A SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"158 21ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"LOT 2 BLK 2 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"099 CAPT.CRUZ Parada Valenzuela City"},{"Raw Address":"270 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"415 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"274 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"188 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"122 CALLEONSE STREET Parada Valenzuela City"},{"Raw Address":"113 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"139 DALAWAN STREET Parada Valenzuela City"},{"Raw Address":"146 FORTUNE DRV. Parada Valenzuela City"},{"Raw Address":"230 1F EMBUSCADO COMP. S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"LOT 10 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"347 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"18 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"228 B S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"23 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"220 C 21 STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"168 SALAZASR Parada Valenzuela City"},{"Raw Address":"B2 L4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"343 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"258 INTERIOR S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"020 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"412 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"255 SALVADOR Parada Valenzuela City"},{"Raw Address":"39 B RAMON ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"338 T. MANANG Parada Valenzuela City"},{"Raw Address":"451 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"97B CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"207 PELESA BOKED Parada Valenzuela City"},{"Raw Address":"4180 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"104 LAGDAMEO FV4 Parada Valenzuela City"},{"Raw Address":"239 ABELARDO Parada Valenzuela City"},{"Raw Address":"405 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"269 INANG PETRA STREET Parada Valenzuela City"},{"Raw Address":"260B RIZALINA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"152 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"100 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"152 NARRA ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"4389 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"260 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"FORTUNE DRIVE COR. 22 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"421 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"254 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"470 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"FELIZA STREET Parada Valenzuela City"},{"Raw Address":"TATAERO ST. Parada Valenzuela City"},{"Raw Address":"172 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"172 INTERIOR SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"1827 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"230 18TH ST Parada Valenzuela City"},{"Raw Address":"421 ZAMORA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"262 OLIVA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"3B F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"125 LAGDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST.Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"9 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"255 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"130 B 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"473 KA BERONG ST Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMP. PARADA Valenzuela City"},{"Raw Address":"M DE GULA ST Parada Valenzuela City"},{"Raw Address":"GINTONG SILANGAN F FRANCISCO Parada Valenzuela City"},{"Raw Address":"296 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"98 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"26 F.SANTIAGO MARS STREET Parada Valenzuela City"},{"Raw Address":"CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"271 MARTA ST Parada Valenzuela City"},{"Raw Address":"256 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"177 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"446 GOMEZ ST. FORTUNE Village P. 7 Parada Valenzuela City"},{"Raw Address":"50 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"#95 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST.` Parada Valenzuela City"},{"Raw Address":"137-A NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"30 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"202 A FELIZA Parada Valenzuela City"},{"Raw Address":"168 DOON COMPOUND SALAZAR Parada Valenzuela City"},{"Raw Address":"119 KAMAGONG ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"63 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"067 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"235 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"170 UNIT SALAZAR ST Parada Valenzuela City"},{"Raw Address":"276 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"22 PARADA ST. Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 2 F. FRANCISCO ST. GINTONG Parada Valenzuela City"},{"Raw Address":"2626 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE 21ST ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"185 - A FELIZA ST. Parada Valenzuela City"},{"Raw Address":"94 C CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"360 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"B3 L19 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"160 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"445 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"418-A ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"267 CORNER 19TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"186 FILISA ST Parada Valenzuela City"},{"Raw Address":"036 C. PARADA RD. Parada Valenzuela City"},{"Raw Address":"J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"12 B- KAMAGONG ST. F. Village 6 Parada Valenzuela City"},{"Raw Address":"006 F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"230 18ST Parada Valenzuela City"},{"Raw Address":"CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"331 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"256 TOMASA STREET Parada Valenzuela City"},{"Raw Address":"31 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"NO.14 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"SINILANGAN Parada Valenzuela City"},{"Raw Address":"351 F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"32 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"334 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"357 J-FRANCISCO Parada Valenzuela City"},{"Raw Address":"KABERONG ST. PARADA Valenzuela City"},{"Raw Address":"1 F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"438 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"320 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"349 F Parada Valenzuela City"},{"Raw Address":"21 BENMARIE ST. Parada Valenzuela City"},{"Raw Address":"BLK. 5 LOT 20 349 FRANCISCO ST. GINTONG Parada Valenzuela City"},{"Raw Address":"130 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"224 21ST ST Parada Valenzuela City"},{"Raw Address":"283 A S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"374 TATA ANDRES ST.PARADA Valenzuela City"},{"Raw Address":"123 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"188 MOLAVE COR 6TH ST. Parada Valenzuela City"},{"Raw Address":"10 FIFTH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"165-G5 ACASIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST.FV 4 Parada Valenzuela City"},{"Raw Address":"140 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"139 NARRA ST.FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"245 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"151 ACACIA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"460 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"207 FELISA BUKID CALLE ONSE Parada Valenzuela City"},{"Raw Address":"237 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"154 SALAZAR Parada Valenzuela City"},{"Raw Address":"ST. 4 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"168 FELISA ST Parada Valenzuela City"},{"Raw Address":"403 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"25TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"88 CAPT. CRUZ SAN MIGUEL COMP. Parada Valenzuela City"},{"Raw Address":"T. Parada Valenzuela City"},{"Raw Address":"121 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"420 ZAMORA ST. PARADA Valenzuela City"},{"Raw Address":"91B CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"26 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"90 F. CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"222 KAMAGONG FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"138 E FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"151 ALICIA STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"204 VENUS ST. E&E COMP Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 12 BURGOS Parada Valenzuela City"},{"Raw Address":"203 ANTHONY ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"19 B.F SANTIAGO E&E COMP. Parada Valenzuela City"},{"Raw Address":"258 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"393 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"468-K KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"121 CONSUELO STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"144 ALICIA ST. PARADA Valenzuela City"},{"Raw Address":"138 NARRA ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"203 VENUS STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"341 20TH ST Parada Valenzuela City"},{"Raw Address":"#80 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"192 RAMOS ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"258 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"LOT 10 NEPTUNE Parada Valenzuela City"},{"Raw Address":"9 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"02 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"BLOCK 5 LOT 15 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"305 DAET COMPD. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"152 ALICIA STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"315 JEMINEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"BLK10 LOT7 F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"276 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"0099 B. CAPT. CRUS ST. Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKDI ST. Parada Valenzuela City"},{"Raw Address":"68 FORTUNE Village 6 PARADA Valenzuela City"},{"Raw Address":"# 343 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"BLK 10/12 LOT 12 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"457B KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"188DE GULA CMPD. PARADA Valenzuela City"},{"Raw Address":"094 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"438 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 8 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"B1L6 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"64 PARADA RD. FORTUNE Village 5 4 6 Valenzuela City Parada Valenzuela City"},{"Raw Address":"417 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"187 M DE GULA COMPOUD CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"456 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"203 FELIZA ST Parada Valenzuela City"},{"Raw Address":"233 19TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"055 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"170 UNIT 3 DOON CMPD. SALAZAR Parada Valenzuela City"},{"Raw Address":"351 FRANCISCO Parada Valenzuela City"},{"Raw Address":"198 RAMON ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"89 F. SANTIAGO MARS STREET Parada Valenzuela City"},{"Raw Address":"469 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"B4 L21 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"254 25TH Parada Valenzuela City"},{"Raw Address":"206C 22ND STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"385 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"133 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"140 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"431 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"LOT 41 BLK 10 NARA ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FV 7 Parada Valenzuela City"},{"Raw Address":"281 PILAR FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"55 KAMAGONG ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"357 J FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"BLOCK 5 LOT 11 F. FRANCISCO ST GINTONG Parada Valenzuela City"},{"Raw Address":"233 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"37 B PARADA RD. PARADA Valenzuela City"},{"Raw Address":"305 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"077 PARADA RD. EXT. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"253 ABELARDO ST Parada Valenzuela City"},{"Raw Address":"165 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"299 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN SANTOS TOWNHOUSE Parada Valenzuela City"},{"Raw Address":"106 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"09 R CABRAL Parada Valenzuela City"},{"Raw Address":"135 E FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"10 CALLE ONSE BUKID Parada Valenzuela City"},{"Raw Address":"297 D. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"129 NARRA ST FV 6 Parada Valenzuela City"},{"Raw Address":"167 RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"# 70 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"232 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"121 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"3651 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"170 Fortune Village 5 MOLAVE ST Parada Valenzuela City"},{"Raw Address":"118 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"242 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"009 PARADA Valenzuela City"},{"Raw Address":"151 ALICIA Parada Valenzuela City"},{"Raw Address":"117 LAGDAMEO ST Parada Valenzuela City"},{"Raw Address":"471 KA BERONG Parada Valenzuela City"},{"Raw Address":"55 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"127 E.LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"194 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"176 23RD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"203 6TH STREET Parada Valenzuela City"},{"Raw Address":"377 APT.5 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"208 ANTHONY ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"50 RD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"233 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"354 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"269 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMPPOUND Parada Valenzuela City"},{"Raw Address":"175 A. MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"9 E & E COMP. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"4560 SAPHIRE ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"29 PARADA ST. Parada Valenzuela City"},{"Raw Address":"275-A S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"176 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"207 FELIA ST. Parada Valenzuela City"},{"Raw Address":"#177 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"160 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"193 M DE GULA ST. Parada Valenzuela City"},{"Raw Address":"130 D 5TH STREET Parada Valenzuela City"},{"Raw Address":"190 MOLAVE STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#18 PARADA RD. Parada Valenzuela City"},{"Raw Address":"332 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 3 199 BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"395 E.SAN ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"257 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"330 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"256 RIZALINA Fortune Village 4 ST. Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"359 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"203 18TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"349 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"11 PARADA RD. Parada Valenzuela City"},{"Raw Address":"226 18TH ST. Parada Valenzuela City"},{"Raw Address":"039 RAMON ST.FV 4 Parada Valenzuela City"},{"Raw Address":"469 KAINGIN Parada Valenzuela City"},{"Raw Address":"14E FRANCISCO ST NLEX CORNER Parada Valenzuela City"},{"Raw Address":"225 ABELARDO Parada Valenzuela City"},{"Raw Address":"252 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"4 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"160 NARRA ST Parada Valenzuela City"},{"Raw Address":"101 M. DEGULA ST. ALFONSO APARTMENT"},{"Raw Address":"249 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"159 6TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"195 CAPT.CRUZ ST. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"193 B.M DE GULA ST. Parada Valenzuela City"},{"Raw Address":"442 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"087 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"94 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"237 19TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLOCK 4 LOT 14 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"425 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMPD. PARADA Valenzuela City"},{"Raw Address":"94 SALAZAR Parada Valenzuela City"},{"Raw Address":"31-F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"177 24TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"354 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"LOT 20 EARTH ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"LOT 5 BLK 10A NARRA ST. Parada Valenzuela City"},{"Raw Address":"491 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"377 18TH ST.Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"456 E KAINGIN Parada Valenzuela City"},{"Raw Address":"184 RAMON ST. FORTUNE Village 4 BO. Parada Valenzuela City"},{"Raw Address":"190 6TH ST. CORNER KAMAGONG FORTUNE Village Parada Valenzuela City"},{"Raw Address":"168 DOON CMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"4698 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"239 7TH ST. FORTUNE Village 5. PARADA Valenzuela City"},{"Raw Address":"448 WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. PARADA VALENZUELA Parada Valenzuela City"},{"Raw Address":"#349 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"440 Parada Valenzuela City"},{"Raw Address":"044 PARADA RD. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"387 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"440 WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGOS T. Parada Valenzuela City"},{"Raw Address":"402 SAN ANDRES PARADA Valenzuela City"},{"Raw Address":"420 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"37-A PARADA RD.PARADA Valenzuela City"},{"Raw Address":"150 ST. Parada Valenzuela City"},{"Raw Address":"170 RAMON ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"165 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"273 PILAR ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"111E LAGDAMEO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"#39 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"70 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"04 SALAZAR ST.PARADA Valenzuela City"},{"Raw Address":"320 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"GP.STREET WES SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"460 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"316 MENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"HIYAS HOMES SUBD. CORNER DIAMOND Parada Valenzuela City"},{"Raw Address":"384 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"117 LAGDAMEO FORTUNE Village Parada Valenzuela City"},{"Raw Address":"412 TATA ERRO STREET Parada Valenzuela City"},{"Raw Address":"471 KABERONG ST Parada Valenzuela City"},{"Raw Address":"167 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"190 M. DEGULA STREET Parada Valenzuela City"},{"Raw Address":"132 CAPTAIN CROSS Parada Valenzuela City"},{"Raw Address":"9-F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"166 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"151 DALAWAN Parada Valenzuela City"},{"Raw Address":"038 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"FELIZA BUKIT ST. Parada Valenzuela City"},{"Raw Address":"438 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"444 ZAMORA ST Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"131 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"168 ALICIA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"372 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"259 ADOR STREET Parada Valenzuela City"},{"Raw Address":"ADOR Parada Valenzuela City"},{"Raw Address":"111-E LAGDAMEO ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"140 E FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"168 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"73 GOMEZ ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST.Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"JEMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"039 RAMON SANTIAGO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"193 A.M DE GULA Parada Valenzuela City"},{"Raw Address":"349 FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"L10 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"648 CAINGIN ST. Parada Valenzuela City"},{"Raw Address":"101 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"286 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"449 PARADA Valenzuela City"},{"Raw Address":"B3 L5 GINTONG SILANGAN 3497 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"145 NARRA STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"130 WEST SERVICE RD Parada Valenzuela City"},{"Raw Address":"186-D FELIZA ST. Parada Valenzuela City"},{"Raw Address":"21ST FORTUNE5 Parada Valenzuela City"},{"Raw Address":"#13TH 5TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"305 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"1-G EMBUSCADO APT. 230 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"291 SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"098 FORTUNE DRIVE COR. OF 7TH ST. FV5 Parada Valenzuela City"},{"Raw Address":"143 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"87 PARADA RD Parada Valenzuela City"},{"Raw Address":"391 Parada Valenzuela City"},{"Raw Address":"B4L11 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"93-C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"469KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"4181 NARRA ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ CVOMPD.ST. PARADA Valenzuela City"},{"Raw Address":"258 E GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"230-B S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"056 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"341 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"94 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"114 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"234 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"393 FELISA ST. Parada Valenzuela City"},{"Raw Address":"22 EUGENIO COMPD. Parada Valenzuela City"},{"Raw Address":"234 7TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"0406 MARTHA ST Parada Valenzuela City"},{"Raw Address":"314 MENES COMP. Parada Valenzuela City"},{"Raw Address":"B2 L11 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"12 PARADA RD. Parada Valenzuela City"},{"Raw Address":"412 B P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"271 CONSUELO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"144 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"91 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"15 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"297 TANDAND MANANG Parada Valenzuela City"},{"Raw Address":"DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"42 PARADA ST. PARADA Valenzuela City"},{"Raw Address":"134 E. LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"67 PARADA RD.VAL.CITY Parada Valenzuela City"},{"Raw Address":"442 P. GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"135 C CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"413 P DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"471 C KABERONG ST. Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"244 7TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"185 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"87 PARADA Valenzuela City"},{"Raw Address":"108 RAMON ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"FELISA ST. PARADA Valenzuela City"},{"Raw Address":"BLK 5 LOT 9 349 F. FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"24 E EUGENIO ST Parada Valenzuela City"},{"Raw Address":"314 JIMENES COMPOUND Parada Valenzuela City"},{"Raw Address":"385 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"130 D. 5TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"FRANSISCO ST. Parada Valenzuela City"},{"Raw Address":"148 NARRA ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"293 ILOCTO COMP. Parada Valenzuela City"},{"Raw Address":"174 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"349 F FRANCSISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"146 NARRA STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"357 J.FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"268 25TH ST. Parada Valenzuela City"},{"Raw Address":"26F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"CALLE ONSE DE GULA APARTMENT Parada Valenzuela City"},{"Raw Address":"455 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"238 19TH FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"349 E FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"190- B. MOLAVE ST FORTUNE6 Parada Valenzuela City"},{"Raw Address":"237 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"CALYE II ST. Parada Valenzuela City"},{"Raw Address":"182 UNIT G. MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"385 MERCURY ST. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"384 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"ALICIA ST. FORTUNE Village4 PARADA Valenzuela City"},{"Raw Address":"230 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"190 6TH ST. Parada Valenzuela City"},{"Raw Address":"298 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"272 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"395-DOOK1 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"28 EUGENIO Parada Valenzuela City"},{"Raw Address":"740 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"141 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"NO. 51 FORTUNE FIVE THIRD ST. Parada Valenzuela City"},{"Raw Address":"228-A S. DE GUSMAN ST. Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. DOON CMP Parada Valenzuela City"},{"Raw Address":"A ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"72 PARADA RD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"#223 21 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"506 TINDALO ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"175 23RD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLOCK 02 LOT 14 F. FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"3 CORAL ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"LOT 41 BLOCK 10 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"158 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"172 MOLAVE Parada Valenzuela City"},{"Raw Address":"BLK13 LOT 27 FORTUNE DRIVE FORTUNE VIILL. 5 Parada Valenzuela City"},{"Raw Address":"2225 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"220D 21STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMP. Parada Valenzuela City"},{"Raw Address":"465 KAINGIN Parada Valenzuela City"},{"Raw Address":"62 PARADA RD. Parada Valenzuela City"},{"Raw Address":"279 PILAR ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"137 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"315 JEMENES COMPD Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"227 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"17 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"132 LAGDAMEO ST.Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"216 ANTHONY Parada Valenzuela City"},{"Raw Address":"YAKAL Parada Valenzuela City"},{"Raw Address":"357 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"055 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ CMPD. Parada Valenzuela City"},{"Raw Address":"187- A FELISA ST. Parada Valenzuela City"},{"Raw Address":"39 C PARADA RD. Parada Valenzuela City"},{"Raw Address":"317 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"412 Parada Valenzuela City"},{"Raw Address":"244 7ST. ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"109 E. LAGDAMEO ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"443 ROSELLA PARADA Valenzuela City"},{"Raw Address":"028 CAPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"313 JIMENEZ CMPD. Parada Valenzuela City"},{"Raw Address":"244 ABELARDO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"250 B CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"102 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"258 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"828 PILAR ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"460P. GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"199 21ST STREET BEN MARIE COMPD. FORTUNE Parada Valenzuela City"},{"Raw Address":"5TH ST. FORTUNE Village 5 RD. Parada Valenzuela City"},{"Raw Address":"361 J-FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"188 MOLAVE ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"156 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"039 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"471 KABERONG ST. Parada Valenzuela City"},{"Raw Address":"279 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"168 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"206 22ND ST Parada Valenzuela City"},{"Raw Address":"301 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"435 C. ZAMORA ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"412 C.P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"457 F. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"360 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"442 GOMEZ Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"16 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"40 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"44 B PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"214 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"94 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"438 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"272 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"039 RAMON Parada Valenzuela City"},{"Raw Address":"379 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"#85 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"239 ABELARDO ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"FATIMA CMPD. PARADA Valenzuela City"},{"Raw Address":"437 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"440 RUMARAO COMP. SERVICE RD. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 6 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"54 KAMAGONG Parada Valenzuela City"},{"Raw Address":"136 KAMAGONG STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"331-A TANDANG MANANG PARADA Valenzuela City"},{"Raw Address":"88 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"310 MENEZ COMP Parada Valenzuela City"},{"Raw Address":"181 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"339 21ST Parada Valenzuela City"},{"Raw Address":"01-31 MERCURY F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"140 E Parada Valenzuela City"},{"Raw Address":"88 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"456 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"70 PARADA ROAD FORTUNE SIX Parada Valenzuela City"},{"Raw Address":"26 NARRA ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"LOT 14 BLK. 4 349 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"167 RAMON ST. PARADA Valenzuela City"},{"Raw Address":"087 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"5 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"36 G. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"150 ALICIA S. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"91-A CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"170 RAMON STREET Parada Valenzuela City"},{"Raw Address":"145 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"188 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"FELIZA ST. Parada Valenzuela City"},{"Raw Address":"290 BO. PARADA ST. SANTOLAN ROAD Parada Valenzuela City"},{"Raw Address":"138 CAPT. CRUZ ST. BO. Parada Valenzuela City"},{"Raw Address":"31 F SANTIAGO ST. E & E COMP. Parada Valenzuela City"},{"Raw Address":"BLK 1 GINTONG SILANGAN COMP. Parada Valenzuela City"},{"Raw Address":"468- KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"258 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"99 SATURN ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"240 7TH ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"144 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"195 6TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"93 PARADA RD. Parada Valenzuela City"},{"Raw Address":"067 PARADA RD. Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGO MARS Parada Valenzuela City"},{"Raw Address":"79 A. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"302 Parada Valenzuela City"},{"Raw Address":"32 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"260 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"26 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"285 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"296-B T.MANANAG ST Parada Valenzuela City"},{"Raw Address":"296-B T. MANANG Parada Valenzuela City"},{"Raw Address":"009 PARADA RD Parada Valenzuela City"},{"Raw Address":"237 DE GUZMAN Parada Valenzuela City"},{"Raw Address":"37E PARADA ROAD Parada Valenzuela City"},{"Raw Address":"067 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"349 CAPTAIN FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"153 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"438 PARADA Valenzuela City"},{"Raw Address":"# 488 ZAMORA STREET Parada Valenzuela City"},{"Raw Address":"001 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"888 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"230 EMBUSCADO APT. S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"466B KAINGIN Parada Valenzuela City"},{"Raw Address":"320E S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"168 C CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"111 E LAGDAMEO Parada Valenzuela City"},{"Raw Address":"UNIT B 276 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"202 - AFELIZA ST. Parada Valenzuela City"},{"Raw Address":"287 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"165-4 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"360 J.FRANCISCO PARADA Valenzuela City"},{"Raw Address":"0006 LOT 3 BLK 4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"349 ST. FRANCIS Parada Valenzuela City"},{"Raw Address":"411C P. DE GUZMAN ST. TATAERO Parada Valenzuela City"},{"Raw Address":"351 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"LOT 29 A. BLK 9 KAMANGONG ST. FV.6 Parada Valenzuela City"},{"Raw Address":"179 MOLAVE ST Parada Valenzuela City"},{"Raw Address":"057 Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"09 Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 10 GINTONG SILANGAN F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"228 A S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"128 A PARADA RD. Parada Valenzuela City"},{"Raw Address":"243 S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"31 P. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"136 E.LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"274 PILAR STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"358 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"14 DIAMOND ST HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"107 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"#45 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"147 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"0118 DOOR 12 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"118 ST. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BLK5 L17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"470 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"175 MOLAVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. SKYLINE SUBD. Parada Valenzuela City"},{"Raw Address":"360 J FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"149 DALAWAN ST. PARADA ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID ST Parada Valenzuela City"},{"Raw Address":"169 ACACIA ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"BO. Parada Valenzuela City"},{"Raw Address":"297 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"154 ALICIA ST. FORTUNE Village 4 PARADA Valenzuela City"},{"Raw Address":"316 JIMENEZ CMPD. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"349 FRANCISCO Parada Valenzuela City"},{"Raw Address":"22T. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"B1 L5 F. FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"412 M INT. ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"468 Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 8 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"302 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"223 ABELARDO STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"248 PARADA RD Parada Valenzuela City"},{"Raw Address":"412 TATA ERRO ST. Parada Valenzuela City"},{"Raw Address":"470 KAINIGIN ST Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRESS ST. Parada Valenzuela City"},{"Raw Address":"182-23RD ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"21ST ST. AGLEHAM COMP. Parada Valenzuela City"},{"Raw Address":"#244 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"116-B CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"31 EARTH ST F SANTIAGO Parada Valenzuela City"},{"Raw Address":"L12 BURGOS ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"KALYE 11 BUKID Parada Valenzuela City"},{"Raw Address":"277 PILAR Parada Valenzuela City"},{"Raw Address":"279-D TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"222 20TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"259 25TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"160 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"171 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"291 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"143 NARRA FORTUNE VIL 6 Parada Valenzuela City"},{"Raw Address":"#257 M. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B3L5 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"306 PARADA Valenzuela City"},{"Raw Address":"412 TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"211 21ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE CMPD. AGLIHAM Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"440 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"456 B KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"195 6ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"119 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG PARADA Valenzuela City"},{"Raw Address":"196 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"286 P. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"45 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B4 L17 F FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"17 PARADA Valenzuela City"},{"Raw Address":"BLK. 7 LOT 11 GINTONG SILANGAN F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"365 TATA ANDREZ Parada Valenzuela City"},{"Raw Address":"006 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"281 PILAR ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"107 MOLAVE ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"309 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"125 KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"106 E. LAGDAMEO Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"243 PASING ST. Parada Valenzuela City"},{"Raw Address":"402 7TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"457 INT SMC DUPLEX -D KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"170B SALAZAR Parada Valenzuela City"},{"Raw Address":"135 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST Parada Valenzuela City"},{"Raw Address":"228 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"0118 A. U2 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"360 FRANCISCO Parada Valenzuela City"},{"Raw Address":"91 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"525 T. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"360 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"SAN ANDRES Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 23 A.FRANCISCO Parada Valenzuela City"},{"Raw Address":"349 F. FERNANDO ST. Parada Valenzuela City"},{"Raw Address":"378A TATA ANDRES Parada Valenzuela City"},{"Raw Address":"415 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"223 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"258 RIZALINA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"125 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"247 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"149 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"095 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"312 MENES COMPD. Parada Valenzuela City"},{"Raw Address":"114 YAKAL STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"84 A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"270 IMPONG JUANA Parada Valenzuela City"},{"Raw Address":"93-C CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"91 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"308 APT 1 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"34 SALVADOR Parada Valenzuela City"},{"Raw Address":"306 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"33 EARTH ST. Parada Valenzuela City"},{"Raw Address":"320 DIMAUNAHAN CMPD.PARADA Valenzuela City"},{"Raw Address":"264 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"26 Parada Valenzuela City"},{"Raw Address":"147 ALICIA ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"279 B S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"157-B SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"234 ABELARDO STREET Parada Valenzuela City"},{"Raw Address":"SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"174 MOLAVE ST.FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"1 FIFTH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"341 PARADA Valenzuela City"},{"Raw Address":"39D PARADA ROAD Parada Valenzuela City"},{"Raw Address":"BLK 4 LT 12 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"466 C. KABERONG ST. Parada Valenzuela City"},{"Raw Address":"146 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"9 Parada Valenzuela City"},{"Raw Address":"274 PILAR ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"022 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"297 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"TATA ERO Parada Valenzuela City"},{"Raw Address":"332 T.MANANG ST. BO. PARADA Valenzuela City"},{"Raw Address":"104 KAMAGONG ST. FV 6 Parada Valenzuela City"},{"Raw Address":"114 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"395-B P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"214 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"169 DOON COMPOUND SALAZAR ST Parada Valenzuela City"},{"Raw Address":"109 RAMON ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"157 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"269 INANG PETRA ST. Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"201 A FELIZA ST Parada Valenzuela City"},{"Raw Address":"386 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"171 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"162 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"320 B BS DE GUZMAN Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMPD. ST. Parada Valenzuela City"},{"Raw Address":"255 ROMASA ST. Parada Valenzuela City"},{"Raw Address":"178 Parada Valenzuela City"},{"Raw Address":"UNIT A L17 B9 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"93A CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"415B TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"111-A LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"31 F. SAN TIAGO Parada Valenzuela City"},{"Raw Address":"349 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"B2 L6 BENMARIE 21ST Parada Valenzuela City"},{"Raw Address":"313 MENES COMP. Parada Valenzuela City"},{"Raw Address":"001 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"467 KAINGIN Parada Valenzuela City"},{"Raw Address":"140 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"198 RAMON FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"14 DIAMOND STREET HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"096 CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"234 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"181 MOLAVE FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"25TH ST DULO. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"#183 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"46 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"94 A FELIZA ST. Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"320 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"413 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"313 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"101 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"406 P DE GUZMAN BANDINO ST Parada Valenzuela City"},{"Raw Address":"227 18TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"412 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"93 B PARADA STREET Parada Valenzuela City"},{"Raw Address":"7TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"204 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"99 VENUS STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"453 B WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"268 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"122 CALYE ONSE Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"286 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"002 FORTUNE Village PARADA Valenzuela City"},{"Raw Address":"417 TATA ERRO STREET Parada Valenzuela City"},{"Raw Address":"240 S DEGUZMAN ST Parada Valenzuela City"},{"Raw Address":"455 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"97 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"168 FELISA ST. Parada Valenzuela City"},{"Raw Address":"18 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"312 MENES COMP. Parada Valenzuela City"},{"Raw Address":"214 IPIL ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 21 ST FORTUNE VillageE 5 Parada Valenzuela City"},{"Raw Address":"256 RIZALINA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"LOT 19 BLK 13 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"357 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"232 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"435 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"142 FORTUNE DRIVE FORTUNE5 Parada Valenzuela City"},{"Raw Address":"269 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"B4 L28 PARADA RD. Parada Valenzuela City"},{"Raw Address":"248 PARADA ROAD. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CONSUELO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"329 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"199 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"145 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"468 N KAINGIN ST Parada Valenzuela City"},{"Raw Address":"134 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"234 7TH STREET Parada Valenzuela City"},{"Raw Address":"260 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"FORTUNE Village 7.PARADA Valenzuela City"},{"Raw Address":"235 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"365 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"206 22ND ST. Parada Valenzuela City"},{"Raw Address":"31F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"202 22ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"361 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"177 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"290 ILOCT CMPD. PARADA Valenzuela City"},{"Raw Address":"S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"0257 ES DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ CMPD Parada Valenzuela City"},{"Raw Address":"310 MENES T. Parada Valenzuela City"},{"Raw Address":"132 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"184 FELIZA ST Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 14 TMHAI TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"Village 7 Parada Valenzuela City"},{"Raw Address":"250 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"94 Parada Valenzuela City"},{"Raw Address":"roup Parada Valenzuela City"},{"Raw Address":"138 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"336 TIA MANANG ST. PARADA Valenzuela City"},{"Raw Address":"B2 L6 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"159 NARRA Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"60 PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"B2L3 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"197 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"126 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"8 DR. M LAUREL DRIVE Parada Valenzuela City"},{"Raw Address":"265 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"101 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"237 19TH FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"MARS ST. #26 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"123 KAMAGONG ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"224 ABELARDO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"0117 A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"242 S . DE GUZMAN Parada Valenzuela City"},{"Raw Address":"462 P.GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"252A VillageA PARADA S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"406 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"omplete for the precinct. Parada Valenzuela City"},{"Raw Address":"161 Fortune Village 6 YAKAL ST.PARADA Valenzuela City"},{"Raw Address":"297-C T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"87C SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"333 A KAMAGONG Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST. FORTUNE IV Parada Valenzuela City"},{"Raw Address":"442 P.GOMEZ ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"360 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"407 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"168 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"72 JADE ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"110 FELISA ST. Parada Valenzuela City"},{"Raw Address":"1112 CAPATAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"358 J FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"8 5TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"123 CAPT. CRUS ST. Parada Valenzuela City"},{"Raw Address":"466 C KA BERONG ST. KAINGIN Parada Valenzuela City"},{"Raw Address":"422 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"161 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"Parada Valenzuela City"},{"Raw Address":"273 PILAR ST. Parada Valenzuela City"},{"Raw Address":"341 21 ST. BENMARIE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"413 TATA ERO Parada Valenzuela City"},{"Raw Address":"466 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"119 A KAMAGONG FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"384 S. DEGUZMAN ST Parada Valenzuela City"},{"Raw Address":"028 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"235 19TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"146 FORTUNE DRIVE 5 Parada Valenzuela City"},{"Raw Address":"280 PILAR ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"22 ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"297 C-T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"87 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"260 PARADA ST. PARADA Valenzuela City"},{"Raw Address":"18-A F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"440 BO. Parada Valenzuela City"},{"Raw Address":"#68 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"196 MOLAVE STREET Parada Valenzuela City"},{"Raw Address":"555 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"338 TIA MANANG ST. PARADA Valenzuela City"},{"Raw Address":"225 20 STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"370 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"190-B MOLAVE ST FORTUNE VIL6 Parada Valenzuela City"},{"Raw Address":"289-C P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"283 S.DE GHUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"412 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"266 Parada Valenzuela City"},{"Raw Address":"J.M.T.C. LAGDAMEO ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"406 BANDINO ST. Parada Valenzuela City"},{"Raw Address":"259 RIZALINA ST. Fortune Village 4 RD. Parada Valenzuela City"},{"Raw Address":"17-C F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"197 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"317 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"317 A.T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"339 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"9 31F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"395 SAN ANDRES Parada Valenzuela City"},{"Raw Address":"410 DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"BLK. 4 LOT 19 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"449 P. GOMES ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"392 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"17 SALAZAR ST. DOON COMPD. Parada Valenzuela City"},{"Raw Address":"061 PARADA RD. Parada Valenzuela City"},{"Raw Address":"277 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"260 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"01 NEPTUNE ST. Parada Valenzuela City"},{"Raw Address":"25TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"234 S DEGUZMAN Parada Valenzuela City"},{"Raw Address":"186 6 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"04 5TH ST. Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"167 RAMON ST. Parada Valenzuela City"},{"Raw Address":"279 PILAR ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"207 FELIZA Parada Valenzuela City"},{"Raw Address":"437 GOMEZ ST. FORTUNE Village PH.7 Parada Valenzuela City"},{"Raw Address":"234 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"CORNER CORAL Parada Valenzuela City"},{"Raw Address":"99 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"96 FELISA ST. Parada Valenzuela City"},{"Raw Address":"62 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"161 Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID VENUS STREET Parada Valenzuela City"},{"Raw Address":"314 JIMENEZ COMP Parada Valenzuela City"},{"Raw Address":"339 TANDANG MANANG PARADA Valenzuela City"},{"Raw Address":"86 SALVADOR ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"438 RUMARAO COMPOUND Parada Valenzuela City"},{"Raw Address":"MOLAVE ST. Fortune Village 6 182 D. Parada Valenzuela City"},{"Raw Address":"05 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"240 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"513 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"150 ALICIA Parada Valenzuela City"},{"Raw Address":"351 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"132 KAMAGONG Parada Valenzuela City"},{"Raw Address":"L5-207 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"13 5TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"146 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"LOT 19 BLK. 13 KAMAGONG STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"FV 4 Parada Valenzuela City"},{"Raw Address":"347 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"85 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"FORTUNE5 Village Parada Valenzuela City"},{"Raw Address":"447 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 17 GINTONG SILANGANG Parada Valenzuela City"},{"Raw Address":"#257 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"230 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"10 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"100 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"SILANGAN Parada Valenzuela City"},{"Raw Address":"BLK5 LOT10 JADE ST. HIYAS HOME Parada Valenzuela City"},{"Raw Address":"141 E. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"451 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"F SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"281 PILAR ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"185 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"454 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"294 TADANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"513 JIMENES CMPD. Parada Valenzuela City"},{"Raw Address":"77 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"448 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"2510 25 STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"297 D. T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"244 1ST. FV 5 Parada Valenzuela City"},{"Raw Address":"248 S. DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"135 YAKAL COR. NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"290 ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"329 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"067 PARADA RD. FORT. 6 Parada Valenzuela City"},{"Raw Address":"172 SALAZAR ST.  Parada Valenzuela City"},{"Raw Address":"320 E. MIURA APT. S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"#336 TIA MANANG Parada Valenzuela City"},{"Raw Address":"233 19TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"132 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"38 PARADA STREET Parada Valenzuela City"},{"Raw Address":"227 ABELARDO ST. FV4 Parada Valenzuela City"},{"Raw Address":"FORTUNE Village NO. 4 Parada Valenzuela City"},{"Raw Address":"407-A P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"0101 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"320 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"135 E. LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"009 PARADA STREET Parada Valenzuela City"},{"Raw Address":"153 ALICIA ST. FV4 Parada Valenzuela City"},{"Raw Address":"B6 Parada Valenzuela City"},{"Raw Address":"100 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"CITY MM Parada Valenzuela City"},{"Raw Address":"371-A TATA ANDRES Parada Valenzuela City"},{"Raw Address":"300 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"179 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"230S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"207 FELIZA CALLE ONSE Parada Valenzuela City"},{"Raw Address":"211 CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"230 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"#16B DOON COMP. Parada Valenzuela City"},{"Raw Address":"209 ANTHONY ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"232 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"88 SAN MIGUEL COMP. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"26 MARS STREET F SANTIAGO Parada Valenzuela City"},{"Raw Address":"318 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"254 A S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"184 FELISA Parada Valenzuela City"},{"Raw Address":"258 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"258-1 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG BLK 3 LOT 19 HOE Parada Valenzuela City"},{"Raw Address":"101 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"234 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGO EARTH ST Parada Valenzuela City"},{"Raw Address":"258 RIZALINA ST. FORTUNE Village4 ST. Parada Valenzuela City"},{"Raw Address":"F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"339 Fortune Village 5 20ST Parada Valenzuela City"},{"Raw Address":"169 DOON COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"281 PILAR ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"165 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"378 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"43 CAINGIN Parada Valenzuela City"},{"Raw Address":"25 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"2151 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"C-378 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"197 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"471C KABERONG ST Parada Valenzuela City"},{"Raw Address":"6TH ST. MOLAVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"2745 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"LOT 5 LOT 8 JADE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"449 GOMEZ STREET Parada Valenzuela City"},{"Raw Address":"200 FORTUNE DR. ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"39K RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"297 Parada Valenzuela City"},{"Raw Address":"291 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"474 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"12 5TH STREET FORTUNE FIVE Village Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"140 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"80 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"DOOR 1 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"294 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"101 M DEGULA ST. Parada Valenzuela City"},{"Raw Address":"4541 MOLAVE ST. FORTUNE5/6 Village Parada Valenzuela City"},{"Raw Address":"7TH ST. Fortune Village 5 FORTUNE Village Parada Valenzuela City"},{"Raw Address":"115 CPT CRUZ Parada Valenzuela City"},{"Raw Address":"392 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"89 D. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"035 PARADA Valenzuela City"},{"Raw Address":"EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"204 22ND ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"145 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. 21ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"177 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"094 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"228-B S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"99 SATURN STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"834 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"14 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"247 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"240 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"256 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"1EE MARS F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"414 PARADA Valenzuela City"},{"Raw Address":"245 ABELARDO Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"CALLE ONSE DULO BUKID Parada Valenzuela City"},{"Raw Address":"57 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"79 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"409 P. DE GUZMAN ST. BIAZON COMPOUND Parada Valenzuela City"},{"Raw Address":"863B KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"130 KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"21ST BENMARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"161 FELIZA ST. SALAZAR RD. Parada Valenzuela City"},{"Raw Address":"70 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"CALLE 11 BUKID Parada Valenzuela City"},{"Raw Address":"116 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"0260 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"154 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"39-A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"35 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"1 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"199 BENMARIE GARDEN FORTUNE Village Parada Valenzuela City"},{"Raw Address":"2932 ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"207 CALLE ONSE FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"358 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"BLK. 4 LOT 12 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"160 ALICIA ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"21 STREET BEN MARIE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"228 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"SINILNGAN Parada Valenzuela City"},{"Raw Address":"258 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"267 CORNER 19TH & 24TH ST Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANAG ST Parada Valenzuela City"},{"Raw Address":"201 CALLE ONCE ST. PARADA Valenzuela City"},{"Raw Address":"86 PARADA Valenzuela City"},{"Raw Address":"123 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"295 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"67 PARADA Valenzuela City"},{"Raw Address":"177 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"374 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"407 BANDIDO ST. Parada Valenzuela City"},{"Raw Address":"247 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"419 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"358-D J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"LOT9 BLK1 SAPHIRE ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"L9 GINTONG SILANG Parada Valenzuela City"},{"Raw Address":"255 E TOMASA STREET Parada Valenzuela City"},{"Raw Address":"134 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"345 F. FRANCISCO ST BO. Parada Valenzuela City"},{"Raw Address":"137 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"199 6TH ST.MANALANG CMPD Parada Valenzuela City"},{"Raw Address":"267 CORNER 24TH & 19TH STREET Parada Valenzuela City"},{"Raw Address":"15 SANTIAGO Parada Valenzuela City"},{"Raw Address":"36 C. PARADA RD. Parada Valenzuela City"},{"Raw Address":"LOT 5 BLK. 10 A NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"168 ACACIA Parada Valenzuela City"},{"Raw Address":"233 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"15 DIAMOND HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"513 ABCO COMP. TINDALO ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"26 F. SANTAIGO Parada Valenzuela City"},{"Raw Address":"302 - B TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"123-C CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"416 TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"14 PARADA Valenzuela City"},{"Raw Address":"120 25TH ST. FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"2 TINDALO ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"5 KAMAGONG Parada Valenzuela City"},{"Raw Address":"B2 L17 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"149 DALAWAN ST. BO.PARADA Valenzuela City"},{"Raw Address":"273 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"0067 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"11 5TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"473 ABERONG ST Parada Valenzuela City"},{"Raw Address":"182 FELIZA Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FORTUNE7 Parada Valenzuela City"},{"Raw Address":"39 AJERO COMP. RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"03 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"425 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"215 DAET COMP. Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"87 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"322 PEA COMP. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"182 FELISA Parada Valenzuela City"},{"Raw Address":"169 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 SANTIAGO Parada Valenzuela City"},{"Raw Address":"152 23RD ST.Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"609 7TH ST Parada Valenzuela City"},{"Raw Address":"36 G. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"434 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"457 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"208 22ND STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"339 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"58 A. Fortune Village 6 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"138 ELAGDAMEO ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"322 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"366 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"151 ACACIA Parada Valenzuela City"},{"Raw Address":"11-A F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"067 Fortune Village 6 PARADA RD. Parada Valenzuela City"},{"Raw Address":"136 D NARA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"#1 JADE ST.CORNER SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"253 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"178 RAMON ST. Parada Valenzuela City"},{"Raw Address":"44 PARADA FORTUNE V5 Parada Valenzuela City"},{"Raw Address":"525 EUGENIO Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. PARADA Valenzuela City"},{"Raw Address":"151 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"009 R.CABRAL Parada Valenzuela City"},{"Raw Address":"322 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"91 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"258 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"10 E CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"312 MENES COMP. PARADA Valenzuela City"},{"Raw Address":"267 CORNER 19TH AND 24TH ST FORTUNE Parada Valenzuela City"},{"Raw Address":"4684 PEARL ST. HIYAS HOMES. Parada Valenzuela City"},{"Raw Address":"128 YAKAL ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"404 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"410-A PARADA Valenzuela City"},{"Raw Address":"21ST BELMARIE CMPD. AGLEHAM Parada Valenzuela City"},{"Raw Address":"291 KAINGIN Parada Valenzuela City"},{"Raw Address":"90 ADOR ST Parada Valenzuela City"},{"Raw Address":"269B S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"252 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"LOT 41 BLK 10 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"207 FILIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"435 ZAMORA FORTUNE Village Parada Valenzuela City"},{"Raw Address":"KAINGIN Parada Valenzuela City"},{"Raw Address":"FELIZAS ST. BUKID 207 Parada Valenzuela City"},{"Raw Address":"190 6TH ST. MOLAVE FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"223 ABELARDO ST. FORTUNE Village IV Parada Valenzuela City"},{"Raw Address":"35 A PARADA RD. Parada Valenzuela City"},{"Raw Address":"L2 B11 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"BLK 7 LOT 4 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"328 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"004 PARADA ST. Parada Valenzuela City"},{"Raw Address":"0250 UNIT 6 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"184 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"178 23RD ST. Parada Valenzuela City"},{"Raw Address":"431 FORTUNE Village 7 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"394 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"317 T.MANANANG ST. PARADA Valenzuela City"},{"Raw Address":"330 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"22 EUQUINIO ST Parada Valenzuela City"},{"Raw Address":"367 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"242 19TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"170 DOON COMP. Parada Valenzuela City"},{"Raw Address":"068 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"440 P. GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 PARADA F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"3661 KAMAGONG ST. COR. YAKAL ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"246 S Parada Valenzuela City"},{"Raw Address":"476 SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"117 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"187 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"215 21ST ST. FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"414 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"169D 7ST FORTUNE5 Parada Valenzuela City"},{"Raw Address":"A 334 T. MANANG Parada Valenzuela City"},{"Raw Address":"023 T.EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"021 EUGENIO Parada Valenzuela City"},{"Raw Address":"LOT 6 B.F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"243 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK. 5 LOT 8 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"# 95 P DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"400 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"289 - D SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"409P. DE GUZMAN ST. VAL. M.M. Parada Valenzuela City"},{"Raw Address":"351 CAPTAIN FRANCISCO Parada Valenzuela City"},{"Raw Address":"469 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"243 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"359 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"448 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"403 P.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"207 FELEZA BUKID Parada Valenzuela City"},{"Raw Address":"349 Parada Valenzuela City"},{"Raw Address":"150 ALICIA STREET Parada Valenzuela City"},{"Raw Address":"257 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"B-5 L-8 JADE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"14 DIAMOND ST. HIYAS HOMES SUBDIVISION Parada Valenzuela City"},{"Raw Address":"249 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST FORTUNE VELLAGE4 Parada Valenzuela City"},{"Raw Address":"235 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"38 D TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"117 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"40 PEARL Parada Valenzuela City"},{"Raw Address":"021 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"073 FORTUNE Village 7 PARADA RD. EXT. Parada Valenzuela City"},{"Raw Address":"122 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"215 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"431 P. BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"276 AP DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 8 349 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"468 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"24-B EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"314 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"JADE ST. Parada Valenzuela City"},{"Raw Address":"351 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"200A 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"265 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"25TH ST. Fortune Village 5. PARADA Valenzuela City"},{"Raw Address":"352 Parada Valenzuela City"},{"Raw Address":"266 24TH STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"SMC- DUPLEX D Parada Valenzuela City"},{"Raw Address":"BLOCK 5 LOT 9 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"22 LOT F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"199 6TH ST. FORTUNE Village 5-6 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"274 PILAR ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"194 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"93 D CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"B1L4 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"223 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"247 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"190 MOLAVE STREET Parada Valenzuela City"},{"Raw Address":"109 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"165-G ACACIA STREET Parada Valenzuela City"},{"Raw Address":"P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"202 Parada Valenzuela City"},{"Raw Address":"299 T. MANANG ST. PARADA Valenzuela City"},{"Raw Address":"123 E.LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"431 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"118 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"241 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"320B S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"324 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"UNIT2 LOT17 BLK9 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"4815 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"360 J . FRANCISCO Parada Valenzuela City"},{"Raw Address":"L7A BLK8 PARADA RD. FV6 Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. B4L10 GS Parada Valenzuela City"},{"Raw Address":"225 ABELARDO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"67 PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"105 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"116 B. CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"33 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"CALYE 11 ST. Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG ST. BO.Parada Valenzuela City"},{"Raw Address":"098 Fortune Village 5 DRIVE Parada Valenzuela City"},{"Raw Address":"362 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"E LAGDAMEO FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"244 7 Fortune Village 5 STREET Parada Valenzuela City"},{"Raw Address":"438 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"26 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"465 KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"B4 L3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"347 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"59 BANDINO ST Parada Valenzuela City"},{"Raw Address":"101 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"320 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"457 INT. SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"94 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"148 Fortune Village 6 NARRA ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"122A KAMAGONG ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"441 SERVICE ROAD RUMARAO COMPD. Parada Valenzuela City"},{"Raw Address":"253 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"09 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"312 INT. MENES CMPD.PARADA Valenzuela City"},{"Raw Address":"13 PARADA RD. Valenzuela City Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE STREET Parada Valenzuela City"},{"Raw Address":"B3L2 TMHOA Parada Valenzuela City"},{"Raw Address":"14 B NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST FORTUNE Parada Valenzuela City"},{"Raw Address":"022 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"199 6TH ST. FORTUNE Village6 PARADA Valenzuela City"},{"Raw Address":"322 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. AGLEHAM STREET Parada Valenzuela City"},{"Raw Address":"16-F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMPOUND 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"247 7TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"133 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"225 Parada Valenzuela City"},{"Raw Address":"242 ABELARDO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"167 RAMON STREET Parada Valenzuela City"},{"Raw Address":"405 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"450 SERVICE RD Parada Valenzuela City"},{"Raw Address":"441 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"28 BARRIO Parada Valenzuela City"},{"Raw Address":"39 RAMON STREET Parada Valenzuela City"},{"Raw Address":"207 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"063 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"36 D. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"B7 L26 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"354 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"36C PARADA ST. Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"0232 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"45 A. F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"193 M.DE GULA ST.PARADA Valenzuela City"},{"Raw Address":"235 T. MANANG Parada Valenzuela City"},{"Raw Address":"203 B VENUS ST. Parada Valenzuela City"},{"Raw Address":"328 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"440 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"250 ABELARDO ST. Fortune Village 4 MALINTA Parada Valenzuela City"},{"Raw Address":"283 MARTHA ST. Parada Valenzuela City"},{"Raw Address":"126 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"11 D EMBUSCADO COMP. Parada Valenzuela City"},{"Raw Address":"423 L3-B3 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"130 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"247-C S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"443 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"223 ABELARDO ST. FV4 Parada Valenzuela City"},{"Raw Address":"107 E. LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"369 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"456-H KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"210 SALVADOR Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG ST Parada Valenzuela City"},{"Raw Address":"12 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"137 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"391 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"218 ANTHONY FV 4 Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST Parada Valenzuela City"},{"Raw Address":"379 TATA ANDREZ ST. Parada Valenzuela City"},{"Raw Address":"61 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"035 PARADA RD. Parada Valenzuela City"},{"Raw Address":"JIMENEZ ST. Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"BUKID Parada Valenzuela City"},{"Raw Address":"358 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"274 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"41 NARRA ST Parada Valenzuela City"},{"Raw Address":"310 MENEZ SMPD Parada Valenzuela City"},{"Raw Address":"264 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"349 F. FRANCIS OST. Parada Valenzuela City"},{"Raw Address":"157 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"199 21ST STREET BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"340 20 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"SALAZAR ST Parada Valenzuela City"},{"Raw Address":"ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"027 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"19 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"5 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"232 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK. 3 LOT 20 349 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"244 ABELARDO Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 8 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"438 Parada Valenzuela City"},{"Raw Address":"431 F. FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"114 KAMAGON ST. PARADA Valenzuela City"},{"Raw Address":"217 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"178 RAMON ST.FV 4 Parada Valenzuela City"},{"Raw Address":"31F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"103 KAMAGONG ST. FORT Village 6 Parada Valenzuela City"},{"Raw Address":"422 BURGOS STREET FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 12 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"216 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"8 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"214 DE GUZMAN Parada Valenzuela City"},{"Raw Address":"95 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMP. 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"206F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"B4 L13 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"235 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"308 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. FV4 Parada Valenzuela City"},{"Raw Address":"128 PARADA RD. FV6 Parada Valenzuela City"},{"Raw Address":"389 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"312 MENES CMPD. Parada Valenzuela City"},{"Raw Address":"294 KAINGIN Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. COMPOUND Parada Valenzuela City"},{"Raw Address":"BLK. 3 LOT 17 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"327 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"200-B CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"320 UNIT 2 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"6ST. COR. KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"BLK. 7 LOT 26 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"199 22ND ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"204 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"153 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"71 B. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"138 A NARRA ST. Parada Valenzuela City"},{"Raw Address":"259 ADOR ST. Parada Valenzuela City"},{"Raw Address":"B5 GOMEZ ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"134 CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"131 KAMAGONG Parada Valenzuela City"},{"Raw Address":"#362 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"140 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"400-A ILOCTO ST. SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"153 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"324 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"181 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"107 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"150 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"#281 PILAR ST. FV 4 Parada Valenzuela City"},{"Raw Address":"167 RAMON ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"339 T. MANANG ST Parada Valenzuela City"},{"Raw Address":"244 ESTRELLA APT. 7TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"KM.14 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"91 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"442 P. GOMEZ ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"098 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"028 PARADA RD. Parada Valenzuela City"},{"Raw Address":"1 DR.MARIANO LAUREL DRIVE Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"1F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"088 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"329 T. MANANG Parada Valenzuela City"},{"Raw Address":"151 ACACIA ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"185 FELISA ST. Parada Valenzuela City"},{"Raw Address":"169 DOON COMP. Parada Valenzuela City"},{"Raw Address":"ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"127 E. LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"183 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"095 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"207 FELISA Parada Valenzuela City"},{"Raw Address":"61 PARADA RD. Parada Valenzuela City"},{"Raw Address":"150 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"144 ALICIA FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"FATIMA COMPD. BARRIO Parada Valenzuela City"},{"Raw Address":"028 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"10TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"Fortune Village 7 GOMEZ ST. PARADA Valenzuela City"},{"Raw Address":"328 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 8 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"37 Parada Valenzuela City"},{"Raw Address":"360 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"177 MOLAVE ST. 6TH ST. FORTUN 5 Parada Valenzuela City"},{"Raw Address":"TATAERRO ST. Parada Valenzuela City"},{"Raw Address":"92 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"417 TATA ANDRESS ST Parada Valenzuela City"},{"Raw Address":"111 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"154 ALICIA STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"424 BURGOS ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"72 PARADA RD. Parada Valenzuela City"},{"Raw Address":"470 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"164 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"157 ALICIA ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"39-B RAMON ST. Parada Valenzuela City"},{"Raw Address":"031 PARADA Valenzuela City"},{"Raw Address":"289-D S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"448 SERVICE RD. HIYAS SUBD. PARADA Valenzuela City"},{"Raw Address":"57 PARADA RD. Fortune Village 6 VillageParada Valenzuela City"},{"Raw Address":"438 SILENCE RD. Parada Valenzuela City"},{"Raw Address":"117 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"BO.PARADA Valenzuela City"},{"Raw Address":"409 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"182 23RD STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"FATIMA COMP Parada Valenzuela City"},{"Raw Address":"404 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"438 PARADA FORTUNE Village7 Valenzuela City Parada Valenzuela City"},{"Raw Address":"04 P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"276 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO VENUS ST. Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"237 19TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"ROMAN ST. FORTUNE Village 4. Parada Valenzuela City"},{"Raw Address":"LOT 2 DIAMOND STREET HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"198 COR. & 21ST. 19TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"99 VENUS ST.F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"BLK. 5 LOT 1 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"LOT 3 BLK 7 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"333 KAMAGONG ST FV 5 & 6 Parada Valenzuela City"},{"Raw Address":"#287 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"UNIT 1 NARRA ST. Parada Valenzuela City"},{"Raw Address":"317 MENEZ CMPD Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 10 LUPANG SINILANGAN Parada Valenzuela City"},{"Raw Address":"LOT 10 FORTUNE F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"1548 E PEARL ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"127 YAKAL ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"198 RAMON STREE FV4 Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"039 D. SANTIAGO COMP. FV4 Parada Valenzuela City"},{"Raw Address":"412 TATAERO ST. Parada Valenzuela City"},{"Raw Address":"242 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"377 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"202 FILISA ST. Parada Valenzuela City"},{"Raw Address":"416 ZAMORA ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"374 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"348 Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DR. Parada Valenzuela City"},{"Raw Address":"468 KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"308 JIMENEZ Parada Valenzuela City"},{"Raw Address":"96 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"204B F.SANTIAGO STR. Parada Valenzuela City"},{"Raw Address":"31 B.O Parada Valenzuela City"},{"Raw Address":"116 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"134 5TH ST. Parada Valenzuela City"},{"Raw Address":"6TH STREET FORTUNE Village 5 NARRA ST. Parada Valenzuela City"},{"Raw Address":"95 P. DE GUZMAN TS. Parada Valenzuela City"},{"Raw Address":"121 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"P. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"96 Parada Valenzuela City"},{"Raw Address":"2039 SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"134 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"1164 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"39 C. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"#232 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"416 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. FORTUNE VillageE 4 Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 9 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"2311 8TH ST.FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPOUND Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"132 KANMAGONG ST. FV5 Parada Valenzuela City"},{"Raw Address":"FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"185 FELIZA Parada Valenzuela City"},{"Raw Address":"215 DAET COMPD.PARADA Valenzuela City"},{"Raw Address":"256 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"202 FELISA Parada Valenzuela City"},{"Raw Address":"CALE ONSE Parada Valenzuela City"},{"Raw Address":"425 ZAMORA ST. PARADA Valenzuela City"},{"Raw Address":"69 PARADA RD. Parada Valenzuela City"},{"Raw Address":"349 F FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"154 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"175-A MOLAVE ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"JADE ST. JADE HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"#5 IPIL ST. Parada Valenzuela City"},{"Raw Address":"032 PARADA ST. PARADA Valenzuela City"},{"Raw Address":"448 GOMEZ ST Parada Valenzuela City"},{"Raw Address":"116 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"181- RAMON ST. Parada Valenzuela City"},{"Raw Address":"353 J. FRANCIS ST. Parada Valenzuela City"},{"Raw Address":"206 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39 Parada Valenzuela City"},{"Raw Address":"DE GUZMAN Parada Valenzuela City"},{"Raw Address":"255 TOMASA STREET Parada Valenzuela City"},{"Raw Address":"310 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"181 FELISA ST. Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"257-B M DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"18-A F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"Q4-176 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"116 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"158 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"86 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"316 MENES COMP. Parada Valenzuela City"},{"Raw Address":"108 COR. YAKAL AND KAMAGONG ST FORTUNE Parada Valenzuela City"},{"Raw Address":"469 B KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"223 ABELARDO FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"234 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"(Member) Parada Valenzuela City"},{"Raw Address":"206 F.SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"039 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"303 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"41 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"190-B MOLAVE ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"237 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"211 21ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"407 P.DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"TATA ERO P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"69 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"399 SAN ANDRES ST Parada Valenzuela City"},{"Raw Address":"194 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"B2 LOT 14 F. FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"BLK. 3 LOT 1 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"271 CONSUELO ST Parada Valenzuela City"},{"Raw Address":"244 ESTRELLIA APARTMENT Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"244 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"19 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"162 E SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"244 19TH STREET FORTUNE V Village Parada Valenzuela City"},{"Raw Address":"F SANTIAGO Parada Valenzuela City"},{"Raw Address":"TATA ANDRES Parada Valenzuela City"},{"Raw Address":"141 NARRA ST. Parada Valenzuela City"},{"Raw Address":"F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"316 JEMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"104 KAMAGONG ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"108 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"455 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"315 JIMENEZ COMP Parada Valenzuela City"},{"Raw Address":"419 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"93 A. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"313 PARADA Valenzuela City"},{"Raw Address":"001 INTER ISLAND FEEDS PARADA Valenzuela City"},{"Raw Address":"154 NARRA ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 5TM HOA TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"88 KAMAGONG ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID CALLE ONSE Parada Valenzuela City"},{"Raw Address":"203 B VENUS ST. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"L4 B10 25TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"402 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"160 ACACIA CORNER MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"0004 JADE ST HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"101 DE GULA CMPD. CAPT CRUZ. ST. Parada Valenzuela City"},{"Raw Address":"CALLE ONSE ST. DULO Parada Valenzuela City"},{"Raw Address":"222 ANTHONY STREET FORTUNE Village IV Parada Valenzuela City"},{"Raw Address":"#384 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"168 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"001 BO Parada Valenzuela City"},{"Raw Address":"B2 L 1O GINTONG SILANGAN FRANCISCO Parada Valenzuela City"},{"Raw Address":"137 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"204 VENUS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"422 BURGOS ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"75 GOMEZ ST FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"366 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"032 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"270 CONSUELO ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"32 PARADA RD. Parada Valenzuela City"},{"Raw Address":"339 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"442 FORTUNE Village 7. Parada Valenzuela City"},{"Raw Address":"355 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"13 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"22 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"087 PARADA Valenzuela City"},{"Raw Address":"25 ST. FORTUNE VLL. 5 PARADA Valenzuela City"},{"Raw Address":"243 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"BLK. 2 LOT 9 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"297 D. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"332 T. MANANG ST Parada Valenzuela City"},{"Raw Address":"33 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"391 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"277 PILAR ST. Parada Valenzuela City"},{"Raw Address":"9 DR.LAUREL ST. FORTUNE Village4 Valenzuela City Parada Valenzuela City"},{"Raw Address":"Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"ILOCTO CMPD. PARADA Valenzuela City"},{"Raw Address":"72 JADE ST. HIYAS SUBD. PARADA Valenzuela City"},{"Raw Address":"130 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"147 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"283 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B2 L2 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"021 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"367 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"421 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"40 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"264 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"42 PARADA RD Parada Valenzuela City"},{"Raw Address":"201 - A FELIZA ST. Parada Valenzuela City"},{"Raw Address":"449 P. GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"117 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"187 FELIZA ST. UNIT 12 Parada Valenzuela City"},{"Raw Address":"101 DE GULA CMPD. PARADA Valenzuela City"},{"Raw Address":"169 ACACIA FORTUNE Village Parada Valenzuela City"},{"Raw Address":"CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"LOT 2 BLOCK 10 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"269 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"L4 B10 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"125 CONSUELO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"94 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"112 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"349F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"26 F Parada Valenzuela City"},{"Raw Address":"89 D CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"232 Parada Valenzuela City"},{"Raw Address":"349 A. FRANCISCO Parada Valenzuela City"},{"Raw Address":"L-11 BLK-2 SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"104 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"2427 7TH ST. Parada Valenzuela City"},{"Raw Address":"377 I8ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLK3 LOT2 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"2646 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"129 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"235 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"130 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"141 DALAWAN Parada Valenzuela City"},{"Raw Address":"229 ABELARDO ST. PARADA Valenzuela City"},{"Raw Address":"247 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"11-C 230 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"409 P.DE GUZMAN ST PARADA Valenzuela City"},{"Raw Address":"343 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"199 BEN MARIE AGLIHAM COMPOUND 21ST Parada Valenzuela City"},{"Raw Address":"410 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"39 RAMON ST . PARADA Valenzuela City"},{"Raw Address":"199 6ST Parada Valenzuela City"},{"Raw Address":"871 FELIZA ST Parada Valenzuela City"},{"Raw Address":"187 MOLAVE ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"424 A.BURGOS ST. Parada Valenzuela City"},{"Raw Address":"OLIVA COR. RAMON ST. Parada Valenzuela City"},{"Raw Address":"108 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"203 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"185 Parada Valenzuela City"},{"Raw Address":"141 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"94 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"36C PARADA RD Parada Valenzuela City"},{"Raw Address":"#8 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"0411 AP DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"138 LAGDAMEO RD. Parada Valenzuela City"},{"Raw Address":"406 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. F. SANTIAGO COMPD. Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"116 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"198 CALLE ONSE PARADA Valenzuela City"},{"Raw Address":"88 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"95 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"232 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"562 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"8 VENANCIO INT. RD. P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"406 P.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"272 PILLAR STREET Parada Valenzuela City"},{"Raw Address":"118 1ST ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"140 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"239 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"LOT 10 BLK 2 PARADA ROAD EXT. FORTUNE Parada Valenzuela City"},{"Raw Address":"94B FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"100 F. CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"236 S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"CONSUELO ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"171 SALAZAR Parada Valenzuela City"},{"Raw Address":"99 UNI STAR F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"246-C S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"250 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"36 Parada Valenzuela City"},{"Raw Address":"333 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"395 E. SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"83 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO ST. BO. Parada Valenzuela City"},{"Raw Address":"142 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"42 PARADA RD/ Parada Valenzuela City"},{"Raw Address":"04 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"153 SALAZAR ST.. PARADA Valenzuela City"},{"Raw Address":"224 CONSUELO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"57 PARADA RD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"139 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"BLK. 4 LOT 6 GINTONG SILANGAN F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"364 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"456-K KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"14 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"314 JIMENEZ CMPD. Parada Valenzuela City"},{"Raw Address":"130 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"12 D. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"22ND ST. 207 FORTUEN 5 Village Parada Valenzuela City"},{"Raw Address":"12 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"86 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"4488 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"273 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"404 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"29 Parada Valenzuela City"},{"Raw Address":"168 ALICIA ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"121 CONSUELO Parada Valenzuela City"},{"Raw Address":"Village Parada Valenzuela City"},{"Raw Address":"1 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"441 P. GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"400 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"168 DOON COMPOUND Parada Valenzuela City"},{"Raw Address":"299 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"087 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 7 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"L9 B1 HIYAS Parada Valenzuela City"},{"Raw Address":"LOT 41 BLK. 10 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"393 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"122 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"458 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"209 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"B22 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"207 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"11 RD. PARADA ST. Parada Valenzuela City"},{"Raw Address":"86 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"202 FELISA ST. PARADA Valenzuela City.A Parada Valenzuela City"},{"Raw Address":"186 D. FELIZA ST. Parada Valenzuela City"},{"Raw Address":"187-A FELIZA ST. Parada Valenzuela City"},{"Raw Address":"DOOR 1 M. DE GULA Parada Valenzuela City"},{"Raw Address":"339 20TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"456-D KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"308 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"256 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"224 20TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"320 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"243 7ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"299 JIMENES Parada Valenzuela City"},{"Raw Address":"26 MARS F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"326 T. MANANG STREET Parada Valenzuela City"},{"Raw Address":"220-A 21ST STREET Parada Valenzuela City"},{"Raw Address":"308 T MANANG Parada Valenzuela City"},{"Raw Address":"11C 230 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"417 TATA ERO Parada Valenzuela City"},{"Raw Address":"145 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"154 C. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"360 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"27 Parada Valenzuela City"},{"Raw Address":"028 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"109 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"457 E KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"B5L8 JADE ST HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"405 P. DE GUZMAN ST/ Parada Valenzuela City"},{"Raw Address":"088 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"178 KAMAGONG ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"162 SALAZAR Parada Valenzuela City"},{"Raw Address":"031 PARADA RD. Parada Valenzuela City"},{"Raw Address":"290 A.SANTOLAN RD. PARADA Valenzuela City"},{"Raw Address":"87 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"449 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"124-B CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"14 DIAMOND ST. Parada Valenzuela City"},{"Raw Address":"102 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 7 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"31 EARTH ST. P.SANTIAGO Parada Valenzuela City"},{"Raw Address":"297 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"# 39 RAMON ST. Parada Valenzuela City"},{"Raw Address":"340 20TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"DOOR F SANTOS TOWNHOUSE P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"185 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. AGLIHAM Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"261 A 25TH STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"412 TATA ERO Parada Valenzuela City"},{"Raw Address":"61 MARS ST. Parada Valenzuela City"},{"Raw Address":"130 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"248 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"A. TATAERO P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"182 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"168 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"455 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"185- C FELIZA ST. Parada Valenzuela City"},{"Raw Address":"P.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"94 PARADA Valenzuela City"},{"Raw Address":"002 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"3200 DIMAUNAHAN CMPD PARADA Valenzuela City"},{"Raw Address":"269 SDEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"225 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"147 DALAWAN STREET Parada Valenzuela City"},{"Raw Address":"390 IMPONG JUANA Parada Valenzuela City"},{"Raw Address":"199 21ST. FORTUNE Village V Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"140 CAPT. CRUZ COR E FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. F.SANTIAGO COMPOUND Parada Valenzuela City"},{"Raw Address":"234 ABELARDO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"278 PILAR ST FORTUNE VLL.4 Parada Valenzuela City"},{"Raw Address":"345 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"240 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"322 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"143 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"36 T. ANDRES ST. VAL. MM Parada Valenzuela City"},{"Raw Address":"#002 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"18 Parada Valenzuela City"},{"Raw Address":"190 6TH ST. FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"252 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"365 Parada Valenzuela City"},{"Raw Address":"117-B CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"8 YAKAL ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"468 N. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"406 BANDINO ST. P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"194 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"135 YAKAL CORNER NARRA STREET Parada Valenzuela City"},{"Raw Address":"374 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"420 ZAMORA STREET FV7 Parada Valenzuela City"},{"Raw Address":"101 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"165-G5 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"182 23RD ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"067 FURTUNE 6 Parada Valenzuela City"},{"Raw Address":"407 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"215 S. DE GUZMAN DAET COMPOUND Parada Valenzuela City"},{"Raw Address":"170 MOLAVE STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"44B SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"1727B-TATAERO Parada Valenzuela City"},{"Raw Address":"244 7TH ST. PARADA Valenzuela City"},{"Raw Address":"187 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"30 PARADA RD Parada Valenzuela City"},{"Raw Address":"ALICIA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"224 ABELARDO ST. FV 4 Parada Valenzuela City"},{"Raw Address":"#223 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"342 TIA MANANG ST. PARADA Valenzuela City"},{"Raw Address":"2345 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"415 TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"VENUS STREET 207 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"B2L23 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"B1L9 T. MANANG Parada Valenzuela City"},{"Raw Address":"039 PARADA RD. Parada Valenzuela City"},{"Raw Address":"67B. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"314 MENES COMPOUND Parada Valenzuela City"},{"Raw Address":"BLK. 4 LOT 3 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"196 MOLAVE ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"246 Parada Valenzuela City"},{"Raw Address":"440 SERVICE ROAD RUMARAO CMPD. Parada Valenzuela City"},{"Raw Address":"25TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"216 ANTHONY STREET Parada Valenzuela City"},{"Raw Address":"349 S. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"187-B FELIZA ST. Parada Valenzuela City"},{"Raw Address":"264 25 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"ROOM G 260 TATA ROMAN STREET Parada Valenzuela City"},{"Raw Address":"250 25 ST. FORTUNE DRIVE Village. 5&6 Parada Valenzuela City"},{"Raw Address":"45 AF SANTIAGO Parada Valenzuela City"},{"Raw Address":"B3 L22 TANDANG MANANG HOA Parada Valenzuela City"},{"Raw Address":"119 B PEARL ST. HIYAS SUBDIVISION Parada Valenzuela City"},{"Raw Address":"TELIZA BUKID Parada Valenzuela City"},{"Raw Address":"113 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"75 PARADA RD. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"7 F.SANTIAGO PARADA Valenzuela City"},{"Raw Address":"395 E. SAN ANDRES Parada Valenzuela City"},{"Raw Address":"T.EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"BLK 4 LOT 15 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"L6 Parada Valenzuela City"},{"Raw Address":"BLK 11 LOT 24 MOLAVE ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"243 PASING Parada Valenzuela City"},{"Raw Address":"# 80 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"105 KAMAGONG ST. FORTUNE VillageE 6 Parada Valenzuela City"},{"Raw Address":"192 M DE GULA ST Parada Valenzuela City"},{"Raw Address":"127 YAKAL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"91 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"412 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"185B MOLAVE ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"20 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"423 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"105 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"240 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"206 F SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"286 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"311 PARADA Valenzuela City"},{"Raw Address":"372 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"23 T. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"347 FRANCISCO Parada Valenzuela City"},{"Raw Address":"165 SALAZAR Parada Valenzuela City"},{"Raw Address":"341 20TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"13 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"230 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"196 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"204 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"245 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"174 FELISA ST. Parada Valenzuela City"},{"Raw Address":"308 JIMENIZ COMPOUND Parada Valenzuela City"},{"Raw Address":"123 CAPT. Parada Valenzuela City"},{"Raw Address":"222 ANTHONY Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"31 F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"338 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"3-B F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"314 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"26 F SANTIAGO PARADA V.C Parada Valenzuela City"},{"Raw Address":"456 B. KAINGIN ST Parada Valenzuela City"},{"Raw Address":"204 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"385 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"427 A BURGOS Parada Valenzuela City"},{"Raw Address":"17 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"Q5-151 SAPPHIRE ST. HIYAS SUBD. WEST Parada Valenzuela City"},{"Raw Address":"190 6TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"392 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"237 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"158 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"40 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"39 RAMOS ST. Parada Valenzuela City"},{"Raw Address":"316 BO JIMENEZ Parada Valenzuela City"},{"Raw Address":"256 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"384 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"272 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"124 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"21 ST AGLEHAM COMP. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"073 PARADA RD EXT. FORTUNE VillageE Parada Valenzuela City"},{"Raw Address":"90 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"138 E. LAGDAMEO STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"204 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"LOT 6 B. F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"F FRANCISCO Parada Valenzuela City"},{"Raw Address":"45 A F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"234 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"5-5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"237-19 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"183 MOLAVE Parada Valenzuela City"},{"Raw Address":"241 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"411 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"347 BO. PARADA Valenzuela City"},{"Raw Address":"470 A KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"CAPT.CRUZ ST PARADA Valenzuela City"},{"Raw Address":"BLK4 LOT 18 PEARL ST. HIYAS Parada Valenzuela City"},{"Raw Address":"199 BENMARY 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"57 PARADA ROAD FV6 Parada Valenzuela City"},{"Raw Address":"198 COR 19TH & 21TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"297 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"139 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"426 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"276 UNIT A Parada Valenzuela City"},{"Raw Address":"24TH ST. 266 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"36 A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"96 FELIZA Parada Valenzuela City"},{"Raw Address":"52 PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"273 S- DE GUZMAN Parada Valenzuela City"},{"Raw Address":"BLK5 LOT11 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"093 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"187 24TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"316 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"119 B PEARL ST HIYAS SUBD Parada Valenzuela City"},{"Raw Address":"192 M. DEGULA Parada Valenzuela City"},{"Raw Address":"DOON COMPD. 168 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"377 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"435 ZAMORA SR. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"055 KAMAGONG Parada Valenzuela City"},{"Raw Address":"185 23RD ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"266 24 ST. FORTUNE V-5 Parada Valenzuela City"},{"Raw Address":"113 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"316 MENEZ COMP. Parada Valenzuela City"},{"Raw Address":"COR. 23 RD ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"1 PARADA RD. Parada Valenzuela City"},{"Raw Address":"012 PARADA RD Parada Valenzuela City"},{"Raw Address":"419 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"316 MENES COMPD. Parada Valenzuela City"},{"Raw Address":"412 C. P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"281 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"271 MARTHA Parada Valenzuela City"},{"Raw Address":"241 7 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"194 FORTUNE Village 5 6TH ST. Parada Valenzuela City"},{"Raw Address":"332 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"15 F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"13 5TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B4 L9 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"5TH ST Parada Valenzuela City"},{"Raw Address":"UNIT 5 ALFONSO APARTMENT M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 11 SAPPHIRE ST. HIYAS Parada Valenzuela City"},{"Raw Address":"360 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"LOT 10 P. SANTIAGO Parada Valenzuela City"},{"Raw Address":"165 ACACIA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"175 MOLAVE Parada Valenzuela City"},{"Raw Address":"225 A. BELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"78 B PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"120 LAGDAMEO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"322 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"136 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"28 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"170 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"187 PARADA STREET Parada Valenzuela City"},{"Raw Address":"448 SERVICE ROAD DULO Parada Valenzuela City"},{"Raw Address":"FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"2 ACACIA COR. YAKAL ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"102 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"L49 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"0457 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"204 VENUS Parada Valenzuela City"},{"Raw Address":"356 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"258 M DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"224 ABELARDO Parada Valenzuela City"},{"Raw Address":"503 TINDALO ST. ABCO COMPD. Parada Valenzuela City"},{"Raw Address":"230 EMBUSADO S. DE GUZMAN ST.Parada Valenzuela City"},{"Raw Address":"230 1-F EMBUSCADO S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"184 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"0320 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"90 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"199 2 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"349 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"290 M. ILOCTO Parada Valenzuela City"},{"Raw Address":"170 DOON COMPOUND SSALAZAR ST. Parada Valenzuela City"},{"Raw Address":"318 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"202 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"106 LAGDAMEO ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"29A KAMAGONG Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"27A PARADA RD Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"258 M. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"202 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"31 EARTH F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"SISCAR APT. Parada Valenzuela City"},{"Raw Address":"260 A. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"25 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. PARADA Valenzuela City"},{"Raw Address":"214 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"#1 E&E MARS ST F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"99 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"133 KAMAGONG ST. FORTUNE VillageE 6 Parada Valenzuela City"},{"Raw Address":"31 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"188 PARADA Valenzuela City"},{"Raw Address":"1618 PARAFORT M. DELOS REYES Parada Valenzuela City"},{"Raw Address":"469 KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"147 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"153 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"94 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"071 Parada Valenzuela City"},{"Raw Address":"364 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"228 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"266 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"448 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"2 TINDALO STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"199 BENMARIE GARDEN 21ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"315 JIMENES COMP. Parada Valenzuela City"},{"Raw Address":"214 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"39 C PARADA RD VALENZUELA CITY Parada Valenzuela City"},{"Raw Address":"446 RUMARAO COPMD. PARADA Valenzuela City"},{"Raw Address":"157 A. LITICIA ST. FV 4 Parada Valenzuela City"},{"Raw Address":"175 RAMON STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"LOT 19 BLK 8 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"76 PARADA RD. EXT. FORTUNE Village 7 Valenzuela City Parada Valenzuela City"},{"Raw Address":"415 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"440 ROMARAW COMPOUND Parada Valenzuela City"},{"Raw Address":"204 B F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"271 MARTA STREET Parada Valenzuela City"},{"Raw Address":"039 Parada Valenzuela City"},{"Raw Address":"14 DIAMOND ST. HIYAS SUBDIVISION Parada Valenzuela City"},{"Raw Address":"08 5TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"160 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"215 21ST. FORTUNE VillageS 5 Parada Valenzuela City"},{"Raw Address":"63 PARADA Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"254 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"203 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"313 MENEZ ST. PARADA Valenzuela City"},{"Raw Address":"24E EUGENIO ST Parada Valenzuela City"},{"Raw Address":"126 LAGDAMEO FORTUNE IV Village Parada Valenzuela City"},{"Raw Address":"PARADA RD. ST. Parada Valenzuela City"},{"Raw Address":"390 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"241 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"241 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"173 23RD ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"133 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"278 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"26 F. MARS ST. Parada Valenzuela City"},{"Raw Address":"405 P.DEGUZMAN PARADA Valenzuela City"},{"Raw Address":"BLK. 1 LOT 7 Fortune Village 5 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"118 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"450 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"24 EUGENIO COMP. Parada Valenzuela City"},{"Raw Address":"45 ST. F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"437 ZAMORA Parada Valenzuela City"},{"Raw Address":"210 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"#26 MARS ST. Parada Valenzuela City"},{"Raw Address":"312 D JIMENEZ COMPOUND ST. Parada Valenzuela City"},{"Raw Address":"2411 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"028 Parada Valenzuela City"},{"Raw Address":"31 EARTH ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"036-C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"283 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"257 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"290 ILOCTO COMPD. Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"24 VENUS ST. Parada Valenzuela City"},{"Raw Address":"203 18TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE AGLEHAM COMP. 21ST ST. FV5 Parada Valenzuela City"},{"Raw Address":"388 IMPONG JUANA ST. Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"BLOCK 4 LOT 19 F. FRANCISCO ST. GINTONG Parada Valenzuela City"},{"Raw Address":"207 FELISA BUKID ST. Parada Valenzuela City"},{"Raw Address":"222 SALVADOR ST Parada Valenzuela City"},{"Raw Address":"064 PARADA RD Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"083 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"FORTUNE Village Parada Valenzuela City"},{"Raw Address":"269 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"234 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"36 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"APT.14 RIVERA CMPD. TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"0320 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"161 SALAZAR ST.PARADA Valenzuela City"},{"Raw Address":"F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"93 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"215 DAET COMPOND Parada Valenzuela City"},{"Raw Address":"15 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"#146 ALICIA ST. F4 Parada Valenzuela City"},{"Raw Address":"22 A. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. BENMARIE COMPD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"471 KABERONG ST. PARADA Valenzuela City"},{"Raw Address":"167 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"21 FORTUNE Village 5 STREET Parada Valenzuela City"},{"Raw Address":"267 PETER ST. Parada Valenzuela City"},{"Raw Address":"184 MOLAVE ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"136 E.LAGDAMEO ST.PARADA Valenzuela City.A Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 13 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"0147 DOON COMP. SALAZAR Parada Valenzuela City"},{"Raw Address":"199 21ST. FORTUNE Village PARADA Valenzuela City"},{"Raw Address":"68 PARADA RD. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"513 TINDALO Parada Valenzuela City"},{"Raw Address":"413 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"B3 L11 TMHOA TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"123 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"21 ST. BEN MARIE COMP. Parada Valenzuela City"},{"Raw Address":"25 PARADA RD Parada Valenzuela City"},{"Raw Address":"198 CORNER 19TH &21ST STS. Parada Valenzuela City"},{"Raw Address":"#39 K. RAMON ST. Parada Valenzuela City"},{"Raw Address":"202 FELIZA ST.PARADA Valenzuela City"},{"Raw Address":"#22 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"44 PARADA RD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"188 DE GULA COPD Parada Valenzuela City"},{"Raw Address":"39 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"39 PARADA ST. Parada Valenzuela City"},{"Raw Address":"9 5TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"995 SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"266 B 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"260 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"039 D SANTIAGO COMP. Parada Valenzuela City"},{"Raw Address":"243 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"91 ADOR ST. Parada Valenzuela City"},{"Raw Address":"PUROK 6 207 FELIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"126 B CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"207 FELISA BUKID Parada Valenzuela City"},{"Raw Address":"472 KABERONG ST. PARADA Valenzuela City"},{"Raw Address":"99 VENUS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"668 P. GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"451 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"055 BURGOS ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"BLOCK 13 C LOT 8 7TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"274 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"140 NARRA ST. Parada Valenzuela City"},{"Raw Address":"418 ZAMORA ST FV7 Parada Valenzuela City"},{"Raw Address":"3 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"M.M. Parada Valenzuela City"},{"Raw Address":"416 KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"100 CAPT.CRUZ ST.DE GULA CMPD. Parada Valenzuela City"},{"Raw Address":"BLK3 LOT 2 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"0320 UNIT 8 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"6 6TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"96 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"237 19TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"2 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"C. CALLE ONSE BUKID Parada Valenzuela City"},{"Raw Address":"406 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"369 A TATA ANDRESS ST Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 7 PARADA RD. FORTUNE VillageS Parada Valenzuela City"},{"Raw Address":"121 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"73 SAINT MARYS DULO Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"357 J/ FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"384 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"116 CALLEONCE Parada Valenzuela City"},{"Raw Address":"405 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"B4 L5 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"469 PARADA ST KAINGIN Parada Valenzuela City"},{"Raw Address":"87 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"245 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"273 PILAR STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"108 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"257 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"471 KA BERONG ST. Parada Valenzuela City"},{"Raw Address":"153 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"28 NARRA ST. Parada Valenzuela City"},{"Raw Address":"186 6TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"BLK1 LOT 7 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"118 DOOR 3 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"RUMARAO COMP. SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"130 Parada Valenzuela City"},{"Raw Address":"BLOCK 2 LOT 2 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"72 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"133 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"B2L7 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"229 18TH STREET Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"2451 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"E FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"460 GOMEZ ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"171 SALAZAR. ST. Parada Valenzuela City"},{"Raw Address":"235 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"442 GOMEZ FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"249 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"26 F SANTIAGO MARS STREET Parada Valenzuela City"},{"Raw Address":"332 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"328 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"82 RAMON ST. SANTIAGO COMP. Parada Valenzuela City"},{"Raw Address":"145 NARRA ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGO MARS ST. Parada Valenzuela City"},{"Raw Address":"316 JIMENES COMPOUND Parada Valenzuela City"},{"Raw Address":"348 CAPT. F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"CALLE ONSE Parada Valenzuela City"},{"Raw Address":"091 DAET COMPOUND Parada Valenzuela City"},{"Raw Address":"330 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"166 6ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"139 NARRA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"336 ST. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"24 VENUS E&E COMPD.1 SANTIAGO Parada Valenzuela City"},{"Raw Address":"317 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"7 GSR SATIAGO ST. Parada Valenzuela City"},{"Raw Address":"190 DE GULA ST. Parada Valenzuela City"},{"Raw Address":"350 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"0089 B CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"L41 B10 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"888 NARRA ST. Parada Valenzuela City"},{"Raw Address":"444 RUMARAO CMPD. PARADA Valenzuela City"},{"Raw Address":"141 DALAWIN ST. PARADA Valenzuela City"},{"Raw Address":"11 5TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"382 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"447 FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"31 Parada Valenzuela City"},{"Raw Address":"B3 L6 TINDALO ST. FV5 Parada Valenzuela City"},{"Raw Address":"90 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"BLK 4 LOT 13 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"56 FORTUNE VillageE Parada Valenzuela City"},{"Raw Address":"251 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"26 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"442 P. GOMEZ Parada Valenzuela City"},{"Raw Address":"254 A S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"297D TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"174 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"146 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"23RD ST. Parada Valenzuela City"},{"Raw Address":"440 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"#17 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ ADOR ST Parada Valenzuela City"}]'),S0=({children:t})=>K.jsxs("div",{className:"layout",children:[K.jsx(NK,{}),K.jsx("div",{className:"content",children:t})]}),$be=t=>Hbe.some(e=>e["Raw Address"].toLowerCase().includes(t.toLowerCase())),Kbe=()=>{const[t,e]=nt.useState([]),[a,r]=nt.useState(""),[s,l]=nt.useState(1),[h,n]=nt.useState([]),[w,T]=nt.useState(""),[E,z]=nt.useState(1),[k,U]=nt.useState({registered:0,pending:0,rejected:0,total:0}),[Z,q]=nt.useState(null),[$,J]=nt.useState([]),[ie,de]=nt.useState(""),[ge,he]=nt.useState(null),Ae=5;nt.useEffect(()=>{me(),Re(),be()},[]);const me=async()=>{try{const Ce=(await Xi(Wn(zr,"approved_users"))).docs.map(Se=>({uid:Se.id,...Se.data()}));e(Ce)}catch(He){console.error("Error fetching registered users:",He)}},Re=async()=>{try{const Ce=(await Xi(Wn(zr,"pending_users"))).docs.map(Se=>({uid:Se.id,...Se.data()}));n(Ce)}catch(He){console.error("Error fetching pending users:",He)}},be=async()=>{try{const He=await Xi(Wn(zr,"admins")),Ce=new Map;He.docs.forEach(wt=>{var ct;const it=wt.data();Ce.set(it.uid,{name:it.name,role:((ct=it.roles)==null?void 0:ct[0])||"Admin"})});const $e=(await Xi(Wn(zr,"user_reports"))).docs.map(wt=>{var _e,Jt;const it=wt.data(),ct=Ce.get(it.reportedBy);return{id:wt.id,...it,reportedByName:ct?`${ct.name} (${ct.role})`:"Unknown Admin",timestamp:(_e=it.createdAt)!=null&&_e.toDate?it.createdAt.toDate():new Date(((Jt=it.createdAt)==null?void 0:Jt.seconds)*1e3),violationType:it.violationType||"Not Specified",details:it.details||"No details provided"}}),ft=[...new Set($e.map(wt=>wt.userId))],Je=await Promise.all(ft.map(async wt=>{const ct=(await Ep(Is(zr,"approved_users",wt))).data(),_e=$e.filter(Jt=>Jt.userId===wt);return{uid:wt,...ct,reports:_e.map(Jt=>({...Jt,reportedBy:Jt.reportedByName,timestamp:Jt.timestamp,violationType:Jt.violationType,details:Jt.details})),isBanned:(ct==null?void 0:ct.isBanned)||!1}}));J(Je)}catch(He){console.error("Error fetching flagged users:",He)}},De=async(He,Ce)=>{try{const Se=Is(zr,"pending_users",He),ft=(await Ep(Se)).data();if(Ce==="approve"){const Je=$be(ft.address);if(!Je&&!window.confirm("This address is not in the validated list. Are you sure you want to approve this user?"))return;await gR(Wn(zr,"approved_users"),{...ft,status:"approved",approvedAt:new Date,addressValidated:Je}),await wI(Se)}else Ce==="reject"&&await cd(Se,{status:"rejected",rejectedAt:new Date});me(),Re()}catch(Se){console.error("Error processing user action:",Se)}},ne=async(He,Ce)=>{try{const Se=Is(zr,"approved_users",He);await cd(Se,{isBanned:Ce,bannedAt:Ce?new Date:null}),await gR(Wn(zr,"user_notifications"),{userId:He,type:Ce?"account_banned":"account_unbanned",title:Ce?"Account Banned":"Account Reinstated",message:Ce?"Your account has been banned due to violations.":"Your account has been reinstated.",createdAt:new Date,isRead:!1}),be(),me()}catch(Se){console.error("Error updating user ban status:",Se)}},ye=He=>{he({userName:`${He.first_name} ${He.middle_name} ${He.surname}`,reports:He.reports.map(Ce=>{var $e,ft;const Se=Ce.timestamp instanceof Date?Ce.timestamp:($e=Ce.timestamp)!=null&&$e.toDate?Ce.timestamp.toDate():new Date(((ft=Ce.timestamp)==null?void 0:ft.seconds)*1e3);return{...Ce,timestamp:Se}})})},Me=()=>{he(null)},ze=nt.useMemo(()=>t.filter(He=>`${He.first_name} ${He.middle_name} ${He.surname} ${He.email}`.toLowerCase().includes(a.toLowerCase())),[t,a]),Le=Math.ceil(ze.length/Ae),Ie=nt.useMemo(()=>{const He=(s-1)*Ae;return ze.slice(He,He+Ae)},[ze,s]),qe=nt.useMemo(()=>h.filter(He=>`${He.first_name} ${He.middle_name} ${He.surname} ${He.email}`.toLowerCase().includes(w.toLowerCase())),[h,w]);nt.useEffect(()=>{(()=>{U({registered:t.length,pending:h.length,rejected:h.filter(Ce=>Ce.status==="rejected").length,total:t.length+h.length})})()},[t,h]);const ke=({status:He,addressValidated:Ce})=>He==="approved"?K.jsxs("div",{className:"status-container",children:[K.jsx(MU,{className:"status-icon approved",title:"Approved"}),Ce===!1&&K.jsx("span",{className:"warning-text",title:"Address not in validated list",children:""})]}):He==="pending"?K.jsx(fce,{className:"status-icon pending",title:"Pending"}):null,tt=He=>{q(He)},Ue=()=>{q(null)};return K.jsxs(S0,{children:[K.jsx(jg,{title:"User Management"}),Z&&K.jsx("div",{className:"image-modal",onClick:Ue,children:K.jsx("img",{src:Z,alt:"Profile",className:"modal-image",onClick:He=>He.stopPropagation()})}),ge&&K.jsx("div",{className:"modal-overlay",onClick:Me,children:K.jsxs("div",{className:"modal-content reports-modal",onClick:He=>He.stopPropagation(),children:[K.jsxs("h3",{children:["Reports for ",ge.userName]}),K.jsx("div",{className:"reports-list",children:ge.reports.map((He,Ce)=>K.jsxs("div",{className:"report-item",children:[K.jsx("p",{className:"report-date",children:Ui(He.timestamp).isValid()?Ui(He.timestamp).format("MMM D, YYYY HH:mm"):"Date not available"}),K.jsxs("p",{className:"report-violation",children:[K.jsx("strong",{children:"Violation Type:"})," ",He.violationType]}),K.jsxs("p",{className:"report-details",children:[K.jsx("strong",{children:"Details:"})," ",He.details]}),K.jsxs("p",{className:"report-status",children:[K.jsx("strong",{children:"Status:"})," ",He.status]}),K.jsxs("p",{className:"report-reporter",children:[K.jsx("strong",{children:"Reported by:"})," ",He.reportedBy]})]},Ce))}),K.jsx("button",{className:"close-btn",onClick:Me,children:"Close"})]})}),K.jsxs("div",{className:"user-management",children:[K.jsxs("div",{className:"stats-container",children:[K.jsxs("div",{className:"stat-card",children:[K.jsx("h3",{children:"Registered Users"}),K.jsx("p",{children:k.registered})]}),K.jsxs("div",{className:"stat-card",children:[K.jsx("h3",{children:"Pending Users"}),K.jsx("p",{children:k.pending})]}),K.jsxs("div",{className:"stat-card",children:[K.jsx("h3",{children:"Rejected Users"}),K.jsx("p",{children:k.rejected})]}),K.jsxs("div",{className:"stat-card total",children:[K.jsx("h3",{children:"Total Users"}),K.jsx("p",{children:k.total})]})]}),K.jsxs("div",{className:"section",children:[K.jsx("h2",{children:"Pending Users"}),K.jsx("input",{type:"text",placeholder:" Search pending users...",value:w,onChange:He=>T(He.target.value),className:"search-box"}),qe.length===0?K.jsx("p",{children:"No pending users found."}):K.jsx("div",{className:"user-list",children:K.jsxs("table",{children:[K.jsx("thead",{children:K.jsxs("tr",{children:[K.jsx("th",{children:"Status"}),K.jsx("th",{className:"profile-column",children:"Profile Photo"}),K.jsx("th",{children:"Name"}),K.jsx("th",{children:"Email"}),K.jsx("th",{children:"Address"}),K.jsx("th",{children:"Actions"})]})}),K.jsx("tbody",{children:qe.map(He=>K.jsxs("tr",{children:[K.jsx("td",{children:K.jsx(ke,{status:He.status,addressValidated:He.addressValidated})}),K.jsx("td",{className:"profile-column",children:He.profile_photo_url?K.jsx("img",{src:He.profile_photo_url,alt:"Profile",className:"profile-thumbnail",onClick:()=>tt(He.profile_photo_url)}):K.jsx("div",{className:"no-photo",children:"No Photo"})}),K.jsx("td",{children:`${He.first_name} ${He.middle_name} ${He.surname}`}),K.jsx("td",{children:He.email}),K.jsx("td",{children:He.address}),K.jsxs("td",{className:"action-buttons",children:[K.jsxs("button",{onClick:()=>De(He.uid,"approve"),className:"approve-btn",children:[K.jsx(MU,{})," Approve"]}),K.jsxs("button",{onClick:()=>De(He.uid,"reject"),className:"reject-btn",children:[K.jsx(PK,{})," Reject"]})]})]},He.uid))})]})})]}),K.jsxs("div",{className:"section",children:[K.jsx("h2",{children:"Flagged Users"}),K.jsx("input",{type:"text",placeholder:" Search flagged users...",value:ie,onChange:He=>de(He.target.value),className:"search-box"}),$.length===0?K.jsx("p",{children:"No flagged users found."}):K.jsx("div",{className:"user-list",children:K.jsxs("table",{children:[K.jsx("thead",{children:K.jsxs("tr",{children:[K.jsx("th",{children:"Status"}),K.jsx("th",{className:"profile-column",children:"Profile Photo"}),K.jsx("th",{children:"Name"}),K.jsx("th",{children:"Email"}),K.jsx("th",{children:"Reports"}),K.jsx("th",{children:"Actions"})]})}),K.jsx("tbody",{children:$.filter(He=>`${He.first_name} ${He.middle_name} ${He.surname} ${He.email}`.toLowerCase().includes(ie.toLowerCase())).map(He=>K.jsxs("tr",{children:[K.jsx("td",{children:He.isBanned?K.jsx("span",{className:"banned-badge",children:"Banned"}):K.jsx("span",{className:"flagged-badge",children:"Flagged"})}),K.jsx("td",{className:"profile-column",children:He.profile_photo_url?K.jsx("img",{src:He.profile_photo_url,alt:"Profile",className:"profile-thumbnail",onClick:()=>tt(He.profile_photo_url)}):K.jsx("div",{className:"no-photo",children:"No Photo"})}),K.jsx("td",{children:`${He.first_name} ${He.middle_name} ${He.surname}`}),K.jsx("td",{children:He.email}),K.jsx("td",{children:K.jsxs("button",{className:"view-reports-btn",onClick:()=>ye(He),children:["View Reports (",He.reports.length,")"]})}),K.jsx("td",{children:K.jsx("button",{className:He.isBanned?"unban-btn":"ban-btn",onClick:()=>ne(He.uid,!He.isBanned),children:He.isBanned?"Unban User":"Ban User"})})]},He.uid))})]})})]}),K.jsxs("div",{className:"section",children:[K.jsx("h2",{children:"Registered Users"}),K.jsx("input",{type:"text",placeholder:" Search registered users...",value:a,onChange:He=>r(He.target.value),className:"search-box"}),ze.length===0?K.jsx("p",{children:"No registered users found."}):K.jsxs("div",{className:"user-list",children:[K.jsxs("table",{children:[K.jsx("thead",{children:K.jsxs("tr",{children:[K.jsx("th",{children:"Status"}),K.jsx("th",{className:"profile-column",children:"Profile Photo"}),K.jsx("th",{children:"Name"}),K.jsx("th",{children:"Email"}),K.jsx("th",{children:"Address"})]})}),K.jsx("tbody",{children:Ie.map(He=>K.jsxs("tr",{children:[K.jsx("td",{children:K.jsx(ke,{status:He.status,addressValidated:He.addressValidated})}),K.jsx("td",{className:"profile-column",children:He.profile_photo_url?K.jsx("img",{src:He.profile_photo_url,alt:"Profile",className:"profile-thumbnail",onClick:()=>tt(He.profile_photo_url)}):K.jsx("div",{className:"no-photo",children:"No Photo"})}),K.jsx("td",{children:`${He.first_name} ${He.middle_name} ${He.surname}`}),K.jsx("td",{children:He.email}),K.jsx("td",{children:He.address})]},He.uid))})]}),K.jsxs("div",{className:"pagination",children:[K.jsx("button",{disabled:s===1,onClick:()=>l(s-1),children:"Previous"}),Array.from({length:Le},(He,Ce)=>K.jsx("button",{className:s===Ce+1?"active":"",onClick:()=>l(Ce+1),children:Ce+1},Ce)),K.jsx("button",{disabled:s===Le,onClick:()=>l(s+1),children:"Next"})]})]})]})]})]})};function oJ(t,e){return function(){return t.apply(e,arguments)}}const{toString:Wbe}=Object.prototype,{getPrototypeOf:C4}=Object,Qx=(t=>e=>{const a=Wbe.call(e);return t[a]||(t[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Fp=t=>(t=t.toLowerCase(),e=>Qx(e)===t),eP=t=>e=>typeof e===t,{isArray:Qv}=Array,QR=eP("undefined");function Ybe(t){return t!==null&&!QR(t)&&t.constructor!==null&&!QR(t.constructor)&&uf(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const lJ=Fp("ArrayBuffer");function Xbe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&lJ(t.buffer),e}const Jbe=eP("string"),uf=eP("function"),uJ=eP("number"),tP=t=>t!==null&&typeof t=="object",Qbe=t=>t===!0||t===!1,BC=t=>{if(Qx(t)!=="object")return!1;const e=C4(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},e2e=Fp("Date"),t2e=Fp("File"),a2e=Fp("Blob"),r2e=Fp("FileList"),n2e=t=>tP(t)&&uf(t.pipe),i2e=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||uf(t.append)&&((e=Qx(t))==="formdata"||e==="object"&&uf(t.toString)&&t.toString()==="[object FormData]"))},s2e=Fp("URLSearchParams"),[o2e,l2e,u2e,c2e]=["ReadableStream","Request","Response","Headers"].map(Fp),d2e=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function IT(t,e,{allOwnKeys:a=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Qv(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const l=a?Object.getOwnPropertyNames(t):Object.keys(t),h=l.length;let n;for(r=0;r<h;r++)n=l[r],e.call(null,t[n],n,t)}}function cJ(t,e){e=e.toLowerCase();const a=Object.keys(t);let r=a.length,s;for(;r-- >0;)if(s=a[r],e===s.toLowerCase())return s;return null}const XA=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,dJ=t=>!QR(t)&&t!==XA;function MM(){const{caseless:t}=dJ(this)&&this||{},e={},a=(r,s)=>{const l=t&&cJ(e,s)||s;BC(e[l])&&BC(r)?e[l]=MM(e[l],r):BC(r)?e[l]=MM({},r):Qv(r)?e[l]=r.slice():e[l]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&IT(arguments[r],a);return e}const h2e=(t,e,a,{allOwnKeys:r}={})=>(IT(e,(s,l)=>{a&&uf(s)?t[l]=oJ(s,a):t[l]=s},{allOwnKeys:r}),t),f2e=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),p2e=(t,e,a,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),a&&Object.assign(t.prototype,a)},m2e=(t,e,a,r)=>{let s,l,h;const n={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),l=s.length;l-- >0;)h=s[l],(!r||r(h,t,e))&&!n[h]&&(e[h]=t[h],n[h]=!0);t=a!==!1&&C4(t)}while(t&&(!a||a(t,e))&&t!==Object.prototype);return e},y2e=(t,e,a)=>{t=String(t),(a===void 0||a>t.length)&&(a=t.length),a-=e.length;const r=t.indexOf(e,a);return r!==-1&&r===a},g2e=t=>{if(!t)return null;if(Qv(t))return t;let e=t.length;if(!uJ(e))return null;const a=new Array(e);for(;e-- >0;)a[e]=t[e];return a},A2e=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&C4(Uint8Array)),_2e=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const l=s.value;e.call(t,l[0],l[1])}},v2e=(t,e)=>{let a;const r=[];for(;(a=t.exec(e))!==null;)r.push(a);return r},w2e=Fp("HTMLFormElement"),R2e=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,r,s){return r.toUpperCase()+s}),k9=(({hasOwnProperty:t})=>(e,a)=>t.call(e,a))(Object.prototype),T2e=Fp("RegExp"),hJ=(t,e)=>{const a=Object.getOwnPropertyDescriptors(t),r={};IT(a,(s,l)=>{let h;(h=e(s,l,t))!==!1&&(r[l]=h||s)}),Object.defineProperties(t,r)},S2e=t=>{hJ(t,(e,a)=>{if(uf(t)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const r=t[a];if(uf(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},C2e=(t,e)=>{const a={},r=s=>{s.forEach(l=>{a[l]=!0})};return Qv(t)?r(t):r(String(t).split(e)),a},b2e=()=>{},x2e=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function P2e(t){return!!(t&&uf(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const E2e=t=>{const e=new Array(10),a=(r,s)=>{if(tP(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const l=Qv(r)?[]:{};return IT(r,(h,n)=>{const w=a(h,s+1);!QR(w)&&(l[n]=w)}),e[s]=void 0,l}}return r};return a(t,0)},N2e=Fp("AsyncFunction"),V2e=t=>t&&(tP(t)||uf(t))&&uf(t.then)&&uf(t.catch),fJ=((t,e)=>t?setImmediate:e?((a,r)=>(XA.addEventListener("message",({source:s,data:l})=>{s===XA&&l===a&&r.length&&r.shift()()},!1),s=>{r.push(s),XA.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",uf(XA.postMessage)),z2e=typeof queueMicrotask<"u"?queueMicrotask.bind(XA):typeof process<"u"&&process.nextTick||fJ,Fa={isArray:Qv,isArrayBuffer:lJ,isBuffer:Ybe,isFormData:i2e,isArrayBufferView:Xbe,isString:Jbe,isNumber:uJ,isBoolean:Qbe,isObject:tP,isPlainObject:BC,isReadableStream:o2e,isRequest:l2e,isResponse:u2e,isHeaders:c2e,isUndefined:QR,isDate:e2e,isFile:t2e,isBlob:a2e,isRegExp:T2e,isFunction:uf,isStream:n2e,isURLSearchParams:s2e,isTypedArray:A2e,isFileList:r2e,forEach:IT,merge:MM,extend:h2e,trim:d2e,stripBOM:f2e,inherits:p2e,toFlatObject:m2e,kindOf:Qx,kindOfTest:Fp,endsWith:y2e,toArray:g2e,forEachEntry:_2e,matchAll:v2e,isHTMLForm:w2e,hasOwnProperty:k9,hasOwnProp:k9,reduceDescriptors:hJ,freezeMethods:S2e,toObjectSet:C2e,toCamelCase:R2e,noop:b2e,toFiniteNumber:x2e,findKey:cJ,global:XA,isContextDefined:dJ,isSpecCompliantForm:P2e,toJSONObject:E2e,isAsyncFn:N2e,isThenable:V2e,setImmediate:fJ,asap:z2e};function hi(t,e,a,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),a&&(this.config=a),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}Fa.inherits(hi,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Fa.toJSONObject(this.config),code:this.code,status:this.status}}});const pJ=hi.prototype,mJ={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{mJ[t]={value:t}});Object.defineProperties(hi,mJ);Object.defineProperty(pJ,"isAxiosError",{value:!0});hi.from=(t,e,a,r,s,l)=>{const h=Object.create(pJ);return Fa.toFlatObject(t,h,function(w){return w!==Error.prototype},n=>n!=="isAxiosError"),hi.call(h,t.message,e,a,r,s),h.cause=t,h.name=t.name,l&&Object.assign(h,l),h};const O2e=null;function IM(t){return Fa.isPlainObject(t)||Fa.isArray(t)}function yJ(t){return Fa.endsWith(t,"[]")?t.slice(0,-2):t}function B9(t,e,a){return t?t.concat(e).map(function(s,l){return s=yJ(s),!a&&l?"["+s+"]":s}).join(a?".":""):e}function D2e(t){return Fa.isArray(t)&&!t.some(IM)}const M2e=Fa.toFlatObject(Fa,{},null,function(e){return/^is[A-Z]/.test(e)});function aP(t,e,a){if(!Fa.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,a=Fa.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(q,$){return!Fa.isUndefined($[q])});const r=a.metaTokens,s=a.visitor||E,l=a.dots,h=a.indexes,w=(a.Blob||typeof Blob<"u"&&Blob)&&Fa.isSpecCompliantForm(e);if(!Fa.isFunction(s))throw new TypeError("visitor must be a function");function T(Z){if(Z===null)return"";if(Fa.isDate(Z))return Z.toISOString();if(!w&&Fa.isBlob(Z))throw new hi("Blob is not supported. Use a Buffer instead.");return Fa.isArrayBuffer(Z)||Fa.isTypedArray(Z)?w&&typeof Blob=="function"?new Blob([Z]):Buffer.from(Z):Z}function E(Z,q,$){let J=Z;if(Z&&!$&&typeof Z=="object"){if(Fa.endsWith(q,"{}"))q=r?q:q.slice(0,-2),Z=JSON.stringify(Z);else if(Fa.isArray(Z)&&D2e(Z)||(Fa.isFileList(Z)||Fa.endsWith(q,"[]"))&&(J=Fa.toArray(Z)))return q=yJ(q),J.forEach(function(de,ge){!(Fa.isUndefined(de)||de===null)&&e.append(h===!0?B9([q],ge,l):h===null?q:q+"[]",T(de))}),!1}return IM(Z)?!0:(e.append(B9($,q,l),T(Z)),!1)}const z=[],k=Object.assign(M2e,{defaultVisitor:E,convertValue:T,isVisitable:IM});function U(Z,q){if(!Fa.isUndefined(Z)){if(z.indexOf(Z)!==-1)throw Error("Circular reference detected in "+q.join("."));z.push(Z),Fa.forEach(Z,function(J,ie){(!(Fa.isUndefined(J)||J===null)&&s.call(e,J,Fa.isString(ie)?ie.trim():ie,q,k))===!0&&U(J,q?q.concat(ie):[ie])}),z.pop()}}if(!Fa.isObject(t))throw new TypeError("data must be an object");return U(t),e}function G9(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function b4(t,e){this._pairs=[],t&&aP(t,this,e)}const gJ=b4.prototype;gJ.append=function(e,a){this._pairs.push([e,a])};gJ.toString=function(e){const a=e?function(r){return e.call(this,r,G9)}:G9;return this._pairs.map(function(s){return a(s[0])+"="+a(s[1])},"").join("&")};function I2e(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function AJ(t,e,a){if(!e)return t;const r=a&&a.encode||I2e;Fa.isFunction(a)&&(a={serialize:a});const s=a&&a.serialize;let l;if(s?l=s(e,a):l=Fa.isURLSearchParams(e)?e.toString():new b4(e,a).toString(r),l){const h=t.indexOf("#");h!==-1&&(t=t.slice(0,h)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class j9{constructor(){this.handlers=[]}use(e,a,r){return this.handlers.push({fulfilled:e,rejected:a,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Fa.forEach(this.handlers,function(r){r!==null&&e(r)})}}const _J={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},L2e=typeof URLSearchParams<"u"?URLSearchParams:b4,F2e=typeof FormData<"u"?FormData:null,U2e=typeof Blob<"u"?Blob:null,k2e={isBrowser:!0,classes:{URLSearchParams:L2e,FormData:F2e,Blob:U2e},protocols:["http","https","file","blob","url","data"]},x4=typeof window<"u"&&typeof document<"u",LM=typeof navigator=="object"&&navigator||void 0,B2e=x4&&(!LM||["ReactNative","NativeScript","NS"].indexOf(LM.product)<0),G2e=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",j2e=x4&&window.location.href||"http://localhost",Z2e=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:x4,hasStandardBrowserEnv:B2e,hasStandardBrowserWebWorkerEnv:G2e,navigator:LM,origin:j2e},Symbol.toStringTag,{value:"Module"})),hd={...Z2e,...k2e};function q2e(t,e){return aP(t,new hd.classes.URLSearchParams,Object.assign({visitor:function(a,r,s,l){return hd.isNode&&Fa.isBuffer(a)?(this.append(r,a.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},e))}function H2e(t){return Fa.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function $2e(t){const e={},a=Object.keys(t);let r;const s=a.length;let l;for(r=0;r<s;r++)l=a[r],e[l]=t[l];return e}function vJ(t){function e(a,r,s,l){let h=a[l++];if(h==="__proto__")return!0;const n=Number.isFinite(+h),w=l>=a.length;return h=!h&&Fa.isArray(s)?s.length:h,w?(Fa.hasOwnProp(s,h)?s[h]=[s[h],r]:s[h]=r,!n):((!s[h]||!Fa.isObject(s[h]))&&(s[h]=[]),e(a,r,s[h],l)&&Fa.isArray(s[h])&&(s[h]=$2e(s[h])),!n)}if(Fa.isFormData(t)&&Fa.isFunction(t.entries)){const a={};return Fa.forEachEntry(t,(r,s)=>{e(H2e(r),s,a,0)}),a}return null}function K2e(t,e,a){if(Fa.isString(t))try{return(e||JSON.parse)(t),Fa.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(a||JSON.stringify)(t)}const LT={transitional:_J,adapter:["xhr","http","fetch"],transformRequest:[function(e,a){const r=a.getContentType()||"",s=r.indexOf("application/json")>-1,l=Fa.isObject(e);if(l&&Fa.isHTMLForm(e)&&(e=new FormData(e)),Fa.isFormData(e))return s?JSON.stringify(vJ(e)):e;if(Fa.isArrayBuffer(e)||Fa.isBuffer(e)||Fa.isStream(e)||Fa.isFile(e)||Fa.isBlob(e)||Fa.isReadableStream(e))return e;if(Fa.isArrayBufferView(e))return e.buffer;if(Fa.isURLSearchParams(e))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let n;if(l){if(r.indexOf("application/x-www-form-urlencoded")>-1)return q2e(e,this.formSerializer).toString();if((n=Fa.isFileList(e))||r.indexOf("multipart/form-data")>-1){const w=this.env&&this.env.FormData;return aP(n?{"files[]":e}:e,w&&new w,this.formSerializer)}}return l||s?(a.setContentType("application/json",!1),K2e(e)):e}],transformResponse:[function(e){const a=this.transitional||LT.transitional,r=a&&a.forcedJSONParsing,s=this.responseType==="json";if(Fa.isResponse(e)||Fa.isReadableStream(e))return e;if(e&&Fa.isString(e)&&(r&&!this.responseType||s)){const h=!(a&&a.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(n){if(h)throw n.name==="SyntaxError"?hi.from(n,hi.ERR_BAD_RESPONSE,this,null,this.response):n}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:hd.classes.FormData,Blob:hd.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Fa.forEach(["delete","get","head","post","put","patch"],t=>{LT.headers[t]={}});const W2e=Fa.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Y2e=t=>{const e={};let a,r,s;return t&&t.split(`
`).forEach(function(h){s=h.indexOf(":"),a=h.substring(0,s).trim().toLowerCase(),r=h.substring(s+1).trim(),!(!a||e[a]&&W2e[a])&&(a==="set-cookie"?e[a]?e[a].push(r):e[a]=[r]:e[a]=e[a]?e[a]+", "+r:r)}),e},Z9=Symbol("internals");function ww(t){return t&&String(t).trim().toLowerCase()}function GC(t){return t===!1||t==null?t:Fa.isArray(t)?t.map(GC):String(t)}function X2e(t){const e=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=a.exec(t);)e[r[1]]=r[2];return e}const J2e=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function ZO(t,e,a,r,s){if(Fa.isFunction(r))return r.call(this,e,a);if(s&&(e=a),!!Fa.isString(e)){if(Fa.isString(r))return e.indexOf(r)!==-1;if(Fa.isRegExp(r))return r.test(e)}}function Q2e(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,a,r)=>a.toUpperCase()+r)}function exe(t,e){const a=Fa.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+a,{value:function(s,l,h){return this[r].call(this,e,s,l,h)},configurable:!0})})}let Ph=class{constructor(e){e&&this.set(e)}set(e,a,r){const s=this;function l(n,w,T){const E=ww(w);if(!E)throw new Error("header name must be a non-empty string");const z=Fa.findKey(s,E);(!z||s[z]===void 0||T===!0||T===void 0&&s[z]!==!1)&&(s[z||w]=GC(n))}const h=(n,w)=>Fa.forEach(n,(T,E)=>l(T,E,w));if(Fa.isPlainObject(e)||e instanceof this.constructor)h(e,a);else if(Fa.isString(e)&&(e=e.trim())&&!J2e(e))h(Y2e(e),a);else if(Fa.isHeaders(e))for(const[n,w]of e.entries())l(w,n,r);else e!=null&&l(a,e,r);return this}get(e,a){if(e=ww(e),e){const r=Fa.findKey(this,e);if(r){const s=this[r];if(!a)return s;if(a===!0)return X2e(s);if(Fa.isFunction(a))return a.call(this,s,r);if(Fa.isRegExp(a))return a.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,a){if(e=ww(e),e){const r=Fa.findKey(this,e);return!!(r&&this[r]!==void 0&&(!a||ZO(this,this[r],r,a)))}return!1}delete(e,a){const r=this;let s=!1;function l(h){if(h=ww(h),h){const n=Fa.findKey(r,h);n&&(!a||ZO(r,r[n],n,a))&&(delete r[n],s=!0)}}return Fa.isArray(e)?e.forEach(l):l(e),s}clear(e){const a=Object.keys(this);let r=a.length,s=!1;for(;r--;){const l=a[r];(!e||ZO(this,this[l],l,e,!0))&&(delete this[l],s=!0)}return s}normalize(e){const a=this,r={};return Fa.forEach(this,(s,l)=>{const h=Fa.findKey(r,l);if(h){a[h]=GC(s),delete a[l];return}const n=e?Q2e(l):String(l).trim();n!==l&&delete a[l],a[n]=GC(s),r[n]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const a=Object.create(null);return Fa.forEach(this,(r,s)=>{r!=null&&r!==!1&&(a[s]=e&&Fa.isArray(r)?r.join(", "):r)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,a])=>e+": "+a).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...a){const r=new this(e);return a.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[Z9]=this[Z9]={accessors:{}}).accessors,s=this.prototype;function l(h){const n=ww(h);r[n]||(exe(s,h),r[n]=!0)}return Fa.isArray(e)?e.forEach(l):l(e),this}};Ph.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Fa.reduceDescriptors(Ph.prototype,({value:t},e)=>{let a=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[a]=r}}});Fa.freezeMethods(Ph);function qO(t,e){const a=this||LT,r=e||a,s=Ph.from(r.headers);let l=r.data;return Fa.forEach(t,function(n){l=n.call(a,l,s.normalize(),e?e.status:void 0)}),s.normalize(),l}function wJ(t){return!!(t&&t.__CANCEL__)}function e1(t,e,a){hi.call(this,t??"canceled",hi.ERR_CANCELED,e,a),this.name="CanceledError"}Fa.inherits(e1,hi,{__CANCEL__:!0});function RJ(t,e,a){const r=a.config.validateStatus;!a.status||!r||r(a.status)?t(a):e(new hi("Request failed with status code "+a.status,[hi.ERR_BAD_REQUEST,hi.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function txe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function axe(t,e){t=t||10;const a=new Array(t),r=new Array(t);let s=0,l=0,h;return e=e!==void 0?e:1e3,function(w){const T=Date.now(),E=r[l];h||(h=T),a[s]=w,r[s]=T;let z=l,k=0;for(;z!==s;)k+=a[z++],z=z%t;if(s=(s+1)%t,s===l&&(l=(l+1)%t),T-h<e)return;const U=E&&T-E;return U?Math.round(k*1e3/U):void 0}}function rxe(t,e){let a=0,r=1e3/e,s,l;const h=(T,E=Date.now())=>{a=E,s=null,l&&(clearTimeout(l),l=null),t.apply(null,T)};return[(...T)=>{const E=Date.now(),z=E-a;z>=r?h(T,E):(s=T,l||(l=setTimeout(()=>{l=null,h(s)},r-z)))},()=>s&&h(s)]}const T2=(t,e,a=3)=>{let r=0;const s=axe(50,250);return rxe(l=>{const h=l.loaded,n=l.lengthComputable?l.total:void 0,w=h-r,T=s(w),E=h<=n;r=h;const z={loaded:h,total:n,progress:n?h/n:void 0,bytes:w,rate:T||void 0,estimated:T&&n&&E?(n-h)/T:void 0,event:l,lengthComputable:n!=null,[e?"download":"upload"]:!0};t(z)},a)},q9=(t,e)=>{const a=t!=null;return[r=>e[0]({lengthComputable:a,total:t,loaded:r}),e[1]]},H9=t=>(...e)=>Fa.asap(()=>t(...e)),nxe=hd.hasStandardBrowserEnv?((t,e)=>a=>(a=new URL(a,hd.origin),t.protocol===a.protocol&&t.host===a.host&&(e||t.port===a.port)))(new URL(hd.origin),hd.navigator&&/(msie|trident)/i.test(hd.navigator.userAgent)):()=>!0,ixe=hd.hasStandardBrowserEnv?{write(t,e,a,r,s,l){const h=[t+"="+encodeURIComponent(e)];Fa.isNumber(a)&&h.push("expires="+new Date(a).toGMTString()),Fa.isString(r)&&h.push("path="+r),Fa.isString(s)&&h.push("domain="+s),l===!0&&h.push("secure"),document.cookie=h.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function sxe(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function oxe(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function TJ(t,e,a){let r=!sxe(e);return t&&(r||a==!1)?oxe(t,e):e}const $9=t=>t instanceof Ph?{...t}:t;function p0(t,e){e=e||{};const a={};function r(T,E,z,k){return Fa.isPlainObject(T)&&Fa.isPlainObject(E)?Fa.merge.call({caseless:k},T,E):Fa.isPlainObject(E)?Fa.merge({},E):Fa.isArray(E)?E.slice():E}function s(T,E,z,k){if(Fa.isUndefined(E)){if(!Fa.isUndefined(T))return r(void 0,T,z,k)}else return r(T,E,z,k)}function l(T,E){if(!Fa.isUndefined(E))return r(void 0,E)}function h(T,E){if(Fa.isUndefined(E)){if(!Fa.isUndefined(T))return r(void 0,T)}else return r(void 0,E)}function n(T,E,z){if(z in e)return r(T,E);if(z in t)return r(void 0,T)}const w={url:l,method:l,data:l,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:n,headers:(T,E,z)=>s($9(T),$9(E),z,!0)};return Fa.forEach(Object.keys(Object.assign({},t,e)),function(E){const z=w[E]||s,k=z(t[E],e[E],E);Fa.isUndefined(k)&&z!==n||(a[E]=k)}),a}const SJ=t=>{const e=p0({},t);let{data:a,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:l,headers:h,auth:n}=e;e.headers=h=Ph.from(h),e.url=AJ(TJ(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),n&&h.set("Authorization","Basic "+btoa((n.username||"")+":"+(n.password?unescape(encodeURIComponent(n.password)):"")));let w;if(Fa.isFormData(a)){if(hd.hasStandardBrowserEnv||hd.hasStandardBrowserWebWorkerEnv)h.setContentType(void 0);else if((w=h.getContentType())!==!1){const[T,...E]=w?w.split(";").map(z=>z.trim()).filter(Boolean):[];h.setContentType([T||"multipart/form-data",...E].join("; "))}}if(hd.hasStandardBrowserEnv&&(r&&Fa.isFunction(r)&&(r=r(e)),r||r!==!1&&nxe(e.url))){const T=s&&l&&ixe.read(l);T&&h.set(s,T)}return e},lxe=typeof XMLHttpRequest<"u",uxe=lxe&&function(t){return new Promise(function(a,r){const s=SJ(t);let l=s.data;const h=Ph.from(s.headers).normalize();let{responseType:n,onUploadProgress:w,onDownloadProgress:T}=s,E,z,k,U,Z;function q(){U&&U(),Z&&Z(),s.cancelToken&&s.cancelToken.unsubscribe(E),s.signal&&s.signal.removeEventListener("abort",E)}let $=new XMLHttpRequest;$.open(s.method.toUpperCase(),s.url,!0),$.timeout=s.timeout;function J(){if(!$)return;const de=Ph.from("getAllResponseHeaders"in $&&$.getAllResponseHeaders()),he={data:!n||n==="text"||n==="json"?$.responseText:$.response,status:$.status,statusText:$.statusText,headers:de,config:t,request:$};RJ(function(me){a(me),q()},function(me){r(me),q()},he),$=null}"onloadend"in $?$.onloadend=J:$.onreadystatechange=function(){!$||$.readyState!==4||$.status===0&&!($.responseURL&&$.responseURL.indexOf("file:")===0)||setTimeout(J)},$.onabort=function(){$&&(r(new hi("Request aborted",hi.ECONNABORTED,t,$)),$=null)},$.onerror=function(){r(new hi("Network Error",hi.ERR_NETWORK,t,$)),$=null},$.ontimeout=function(){let ge=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const he=s.transitional||_J;s.timeoutErrorMessage&&(ge=s.timeoutErrorMessage),r(new hi(ge,he.clarifyTimeoutError?hi.ETIMEDOUT:hi.ECONNABORTED,t,$)),$=null},l===void 0&&h.setContentType(null),"setRequestHeader"in $&&Fa.forEach(h.toJSON(),function(ge,he){$.setRequestHeader(he,ge)}),Fa.isUndefined(s.withCredentials)||($.withCredentials=!!s.withCredentials),n&&n!=="json"&&($.responseType=s.responseType),T&&([k,Z]=T2(T,!0),$.addEventListener("progress",k)),w&&$.upload&&([z,U]=T2(w),$.upload.addEventListener("progress",z),$.upload.addEventListener("loadend",U)),(s.cancelToken||s.signal)&&(E=de=>{$&&(r(!de||de.type?new e1(null,t,$):de),$.abort(),$=null)},s.cancelToken&&s.cancelToken.subscribe(E),s.signal&&(s.signal.aborted?E():s.signal.addEventListener("abort",E)));const ie=txe(s.url);if(ie&&hd.protocols.indexOf(ie)===-1){r(new hi("Unsupported protocol "+ie+":",hi.ERR_BAD_REQUEST,t));return}$.send(l||null)})},cxe=(t,e)=>{const{length:a}=t=t?t.filter(Boolean):[];if(e||a){let r=new AbortController,s;const l=function(T){if(!s){s=!0,n();const E=T instanceof Error?T:this.reason;r.abort(E instanceof hi?E:new e1(E instanceof Error?E.message:E))}};let h=e&&setTimeout(()=>{h=null,l(new hi(`timeout ${e} of ms exceeded`,hi.ETIMEDOUT))},e);const n=()=>{t&&(h&&clearTimeout(h),h=null,t.forEach(T=>{T.unsubscribe?T.unsubscribe(l):T.removeEventListener("abort",l)}),t=null)};t.forEach(T=>T.addEventListener("abort",l));const{signal:w}=r;return w.unsubscribe=()=>Fa.asap(n),w}},dxe=function*(t,e){let a=t.byteLength;if(a<e){yield t;return}let r=0,s;for(;r<a;)s=r+e,yield t.slice(r,s),r=s},hxe=async function*(t,e){for await(const a of fxe(t))yield*dxe(a,e)},fxe=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:a,value:r}=await e.read();if(a)break;yield r}}finally{await e.cancel()}},K9=(t,e,a,r)=>{const s=hxe(t,e);let l=0,h,n=w=>{h||(h=!0,r&&r(w))};return new ReadableStream({async pull(w){try{const{done:T,value:E}=await s.next();if(T){n(),w.close();return}let z=E.byteLength;if(a){let k=l+=z;a(k)}w.enqueue(new Uint8Array(E))}catch(T){throw n(T),T}},cancel(w){return n(w),s.return()}},{highWaterMark:2})},rP=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",CJ=rP&&typeof ReadableStream=="function",pxe=rP&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),bJ=(t,...e)=>{try{return!!t(...e)}catch{return!1}},mxe=CJ&&bJ(()=>{let t=!1;const e=new Request(hd.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),W9=64*1024,FM=CJ&&bJ(()=>Fa.isReadableStream(new Response("").body)),S2={stream:FM&&(t=>t.body)};rP&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!S2[e]&&(S2[e]=Fa.isFunction(t[e])?a=>a[e]():(a,r)=>{throw new hi(`Response type '${e}' is not supported`,hi.ERR_NOT_SUPPORT,r)})})})(new Response);const yxe=async t=>{if(t==null)return 0;if(Fa.isBlob(t))return t.size;if(Fa.isSpecCompliantForm(t))return(await new Request(hd.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Fa.isArrayBufferView(t)||Fa.isArrayBuffer(t))return t.byteLength;if(Fa.isURLSearchParams(t)&&(t=t+""),Fa.isString(t))return(await pxe(t)).byteLength},gxe=async(t,e)=>{const a=Fa.toFiniteNumber(t.getContentLength());return a??yxe(e)},Axe=rP&&(async t=>{let{url:e,method:a,data:r,signal:s,cancelToken:l,timeout:h,onDownloadProgress:n,onUploadProgress:w,responseType:T,headers:E,withCredentials:z="same-origin",fetchOptions:k}=SJ(t);T=T?(T+"").toLowerCase():"text";let U=cxe([s,l&&l.toAbortSignal()],h),Z;const q=U&&U.unsubscribe&&(()=>{U.unsubscribe()});let $;try{if(w&&mxe&&a!=="get"&&a!=="head"&&($=await gxe(E,r))!==0){let he=new Request(e,{method:"POST",body:r,duplex:"half"}),Ae;if(Fa.isFormData(r)&&(Ae=he.headers.get("content-type"))&&E.setContentType(Ae),he.body){const[me,Re]=q9($,T2(H9(w)));r=K9(he.body,W9,me,Re)}}Fa.isString(z)||(z=z?"include":"omit");const J="credentials"in Request.prototype;Z=new Request(e,{...k,signal:U,method:a.toUpperCase(),headers:E.normalize().toJSON(),body:r,duplex:"half",credentials:J?z:void 0});let ie=await fetch(Z);const de=FM&&(T==="stream"||T==="response");if(FM&&(n||de&&q)){const he={};["status","statusText","headers"].forEach(be=>{he[be]=ie[be]});const Ae=Fa.toFiniteNumber(ie.headers.get("content-length")),[me,Re]=n&&q9(Ae,T2(H9(n),!0))||[];ie=new Response(K9(ie.body,W9,me,()=>{Re&&Re(),q&&q()}),he)}T=T||"text";let ge=await S2[Fa.findKey(S2,T)||"text"](ie,t);return!de&&q&&q(),await new Promise((he,Ae)=>{RJ(he,Ae,{data:ge,headers:Ph.from(ie.headers),status:ie.status,statusText:ie.statusText,config:t,request:Z})})}catch(J){throw q&&q(),J&&J.name==="TypeError"&&/fetch/i.test(J.message)?Object.assign(new hi("Network Error",hi.ERR_NETWORK,t,Z),{cause:J.cause||J}):hi.from(J,J&&J.code,t,Z)}}),UM={http:O2e,xhr:uxe,fetch:Axe};Fa.forEach(UM,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Y9=t=>`- ${t}`,_xe=t=>Fa.isFunction(t)||t===null||t===!1,xJ={getAdapter:t=>{t=Fa.isArray(t)?t:[t];const{length:e}=t;let a,r;const s={};for(let l=0;l<e;l++){a=t[l];let h;if(r=a,!_xe(a)&&(r=UM[(h=String(a)).toLowerCase()],r===void 0))throw new hi(`Unknown adapter '${h}'`);if(r)break;s[h||"#"+l]=r}if(!r){const l=Object.entries(s).map(([n,w])=>`adapter ${n} `+(w===!1?"is not supported by the environment":"is not available in the build"));let h=e?l.length>1?`since :
`+l.map(Y9).join(`
`):" "+Y9(l[0]):"as no adapter specified";throw new hi("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return r},adapters:UM};function HO(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new e1(null,t)}function X9(t){return HO(t),t.headers=Ph.from(t.headers),t.data=qO.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),xJ.getAdapter(t.adapter||LT.adapter)(t).then(function(r){return HO(t),r.data=qO.call(t,t.transformResponse,r),r.headers=Ph.from(r.headers),r},function(r){return wJ(r)||(HO(t),r&&r.response&&(r.response.data=qO.call(t,t.transformResponse,r.response),r.response.headers=Ph.from(r.response.headers))),Promise.reject(r)})}const PJ="1.8.4",nP={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{nP[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const J9={};nP.transitional=function(e,a,r){function s(l,h){return"[Axios v"+PJ+"] Transitional option '"+l+"'"+h+(r?". "+r:"")}return(l,h,n)=>{if(e===!1)throw new hi(s(h," has been removed"+(a?" in "+a:"")),hi.ERR_DEPRECATED);return a&&!J9[h]&&(J9[h]=!0,console.warn(s(h," has been deprecated since v"+a+" and will be removed in the near future"))),e?e(l,h,n):!0}};nP.spelling=function(e){return(a,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function vxe(t,e,a){if(typeof t!="object")throw new hi("options must be an object",hi.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const l=r[s],h=e[l];if(h){const n=t[l],w=n===void 0||h(n,l,t);if(w!==!0)throw new hi("option "+l+" must be "+w,hi.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new hi("Unknown option "+l,hi.ERR_BAD_OPTION)}}const jC={assertOptions:vxe,validators:nP},pm=jC.validators;let a0=class{constructor(e){this.defaults=e,this.interceptors={request:new j9,response:new j9}}async request(e,a){try{return await this._request(e,a)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const l=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?l&&!String(r.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+l):r.stack=l}catch{}}throw r}}_request(e,a){typeof e=="string"?(a=a||{},a.url=e):a=e||{},a=p0(this.defaults,a);const{transitional:r,paramsSerializer:s,headers:l}=a;r!==void 0&&jC.assertOptions(r,{silentJSONParsing:pm.transitional(pm.boolean),forcedJSONParsing:pm.transitional(pm.boolean),clarifyTimeoutError:pm.transitional(pm.boolean)},!1),s!=null&&(Fa.isFunction(s)?a.paramsSerializer={serialize:s}:jC.assertOptions(s,{encode:pm.function,serialize:pm.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),jC.assertOptions(a,{baseUrl:pm.spelling("baseURL"),withXsrfToken:pm.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let h=l&&Fa.merge(l.common,l[a.method]);l&&Fa.forEach(["delete","get","head","post","put","patch","common"],Z=>{delete l[Z]}),a.headers=Ph.concat(h,l);const n=[];let w=!0;this.interceptors.request.forEach(function(q){typeof q.runWhen=="function"&&q.runWhen(a)===!1||(w=w&&q.synchronous,n.unshift(q.fulfilled,q.rejected))});const T=[];this.interceptors.response.forEach(function(q){T.push(q.fulfilled,q.rejected)});let E,z=0,k;if(!w){const Z=[X9.bind(this),void 0];for(Z.unshift.apply(Z,n),Z.push.apply(Z,T),k=Z.length,E=Promise.resolve(a);z<k;)E=E.then(Z[z++],Z[z++]);return E}k=n.length;let U=a;for(z=0;z<k;){const Z=n[z++],q=n[z++];try{U=Z(U)}catch($){q.call(this,$);break}}try{E=X9.call(this,U)}catch(Z){return Promise.reject(Z)}for(z=0,k=T.length;z<k;)E=E.then(T[z++],T[z++]);return E}getUri(e){e=p0(this.defaults,e);const a=TJ(e.baseURL,e.url,e.allowAbsoluteUrls);return AJ(a,e.params,e.paramsSerializer)}};Fa.forEach(["delete","get","head","options"],function(e){a0.prototype[e]=function(a,r){return this.request(p0(r||{},{method:e,url:a,data:(r||{}).data}))}});Fa.forEach(["post","put","patch"],function(e){function a(r){return function(l,h,n){return this.request(p0(n||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:l,data:h}))}}a0.prototype[e]=a(),a0.prototype[e+"Form"]=a(!0)});let wxe=class EJ{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(l){a=l});const r=this;this.promise.then(s=>{if(!r._listeners)return;let l=r._listeners.length;for(;l-- >0;)r._listeners[l](s);r._listeners=null}),this.promise.then=s=>{let l;const h=new Promise(n=>{r.subscribe(n),l=n}).then(s);return h.cancel=function(){r.unsubscribe(l)},h},e(function(l,h,n){r.reason||(r.reason=new e1(l,h,n),a(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const a=this._listeners.indexOf(e);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const e=new AbortController,a=r=>{e.abort(r)};return this.subscribe(a),e.signal.unsubscribe=()=>this.unsubscribe(a),e.signal}static source(){let e;return{token:new EJ(function(s){e=s}),cancel:e}}};function Rxe(t){return function(a){return t.apply(null,a)}}function Txe(t){return Fa.isObject(t)&&t.isAxiosError===!0}const kM={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(kM).forEach(([t,e])=>{kM[e]=t});function NJ(t){const e=new a0(t),a=oJ(a0.prototype.request,e);return Fa.extend(a,a0.prototype,e,{allOwnKeys:!0}),Fa.extend(a,e,null,{allOwnKeys:!0}),a.create=function(s){return NJ(p0(t,s))},a}const Ko=NJ(LT);Ko.Axios=a0;Ko.CanceledError=e1;Ko.CancelToken=wxe;Ko.isCancel=wJ;Ko.VERSION=PJ;Ko.toFormData=aP;Ko.AxiosError=hi;Ko.Cancel=Ko.CanceledError;Ko.all=function(e){return Promise.all(e)};Ko.spread=Rxe;Ko.isAxiosError=Txe;Ko.mergeConfig=p0;Ko.AxiosHeaders=Ph;Ko.formToJSON=t=>vJ(Fa.isHTMLForm(t)?new FormData(t):t);Ko.getAdapter=xJ.getAdapter;Ko.HttpStatusCode=kM;Ko.default=Ko;const{Axios:EEe,AxiosError:NEe,CanceledError:VEe,isCancel:zEe,CancelToken:OEe,VERSION:DEe,all:MEe,Cancel:IEe,isAxiosError:LEe,spread:FEe,toFormData:UEe,AxiosHeaders:kEe,HttpStatusCode:BEe,formToJSON:GEe,getAdapter:jEe,mergeConfig:ZEe}=Ko;var y_={},$O,Q9;function Sxe(){return Q9||(Q9=1,$O=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),$O}var KO={},cg={},eZ;function C0(){if(eZ)return cg;eZ=1;let t;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return cg.getSymbolSize=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return r*4+17},cg.getSymbolTotalCodewords=function(r){return e[r]},cg.getBCHDigit=function(a){let r=0;for(;a!==0;)r++,a>>>=1;return r},cg.setToSJISFunction=function(r){if(typeof r!="function")throw new Error('"toSJISFunc" is not a valid function.');t=r},cg.isKanjiModeEnabled=function(){return typeof t<"u"},cg.toSJIS=function(r){return t(r)},cg}var WO={},tZ;function P4(){return tZ||(tZ=1,function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+a)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,s){if(t.isValid(r))return r;try{return e(r)}catch{return s}}}(WO)),WO}var YO,aZ;function Cxe(){if(aZ)return YO;aZ=1;function t(){this.buffer=[],this.length=0}return t.prototype={get:function(e){const a=Math.floor(e/8);return(this.buffer[a]>>>7-e%8&1)===1},put:function(e,a){for(let r=0;r<a;r++)this.putBit((e>>>a-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const a=Math.floor(this.length/8);this.buffer.length<=a&&this.buffer.push(0),e&&(this.buffer[a]|=128>>>this.length%8),this.length++}},YO=t,YO}var XO,rZ;function bxe(){if(rZ)return XO;rZ=1;function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return t.prototype.set=function(e,a,r,s){const l=e*this.size+a;this.data[l]=r,s&&(this.reservedBit[l]=!0)},t.prototype.get=function(e,a){return this.data[e*this.size+a]},t.prototype.xor=function(e,a,r){this.data[e*this.size+a]^=r},t.prototype.isReserved=function(e,a){return this.reservedBit[e*this.size+a]},XO=t,XO}var JO={},nZ;function xxe(){return nZ||(nZ=1,function(t){const e=C0().getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const s=Math.floor(r/7)+2,l=e(r),h=l===145?26:Math.ceil((l-13)/(2*s-2))*2,n=[l-7];for(let w=1;w<s-1;w++)n[w]=n[w-1]-h;return n.push(6),n.reverse()},t.getPositions=function(r){const s=[],l=t.getRowColCoords(r),h=l.length;for(let n=0;n<h;n++)for(let w=0;w<h;w++)n===0&&w===0||n===0&&w===h-1||n===h-1&&w===0||s.push([l[n],l[w]]);return s}}(JO)),JO}var QO={},iZ;function Pxe(){if(iZ)return QO;iZ=1;const t=C0().getSymbolSize,e=7;return QO.getPositions=function(r){const s=t(r);return[[0,0],[s-e,0],[0,s-e]]},QO}var e5={},sZ;function Exe(){return sZ||(sZ=1,function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},t.from=function(s){return t.isValid(s)?parseInt(s,10):void 0},t.getPenaltyN1=function(s){const l=s.size;let h=0,n=0,w=0,T=null,E=null;for(let z=0;z<l;z++){n=w=0,T=E=null;for(let k=0;k<l;k++){let U=s.get(z,k);U===T?n++:(n>=5&&(h+=e.N1+(n-5)),T=U,n=1),U=s.get(k,z),U===E?w++:(w>=5&&(h+=e.N1+(w-5)),E=U,w=1)}n>=5&&(h+=e.N1+(n-5)),w>=5&&(h+=e.N1+(w-5))}return h},t.getPenaltyN2=function(s){const l=s.size;let h=0;for(let n=0;n<l-1;n++)for(let w=0;w<l-1;w++){const T=s.get(n,w)+s.get(n,w+1)+s.get(n+1,w)+s.get(n+1,w+1);(T===4||T===0)&&h++}return h*e.N2},t.getPenaltyN3=function(s){const l=s.size;let h=0,n=0,w=0;for(let T=0;T<l;T++){n=w=0;for(let E=0;E<l;E++)n=n<<1&2047|s.get(T,E),E>=10&&(n===1488||n===93)&&h++,w=w<<1&2047|s.get(E,T),E>=10&&(w===1488||w===93)&&h++}return h*e.N3},t.getPenaltyN4=function(s){let l=0;const h=s.data.length;for(let w=0;w<h;w++)l+=s.data[w];return Math.abs(Math.ceil(l*100/h/5)-10)*e.N4};function a(r,s,l){switch(r){case t.Patterns.PATTERN000:return(s+l)%2===0;case t.Patterns.PATTERN001:return s%2===0;case t.Patterns.PATTERN010:return l%3===0;case t.Patterns.PATTERN011:return(s+l)%3===0;case t.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(l/3))%2===0;case t.Patterns.PATTERN101:return s*l%2+s*l%3===0;case t.Patterns.PATTERN110:return(s*l%2+s*l%3)%2===0;case t.Patterns.PATTERN111:return(s*l%3+(s+l)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(s,l){const h=l.size;for(let n=0;n<h;n++)for(let w=0;w<h;w++)l.isReserved(w,n)||l.xor(w,n,a(s,w,n))},t.getBestMask=function(s,l){const h=Object.keys(t.Patterns).length;let n=0,w=1/0;for(let T=0;T<h;T++){l(T),t.applyMask(T,s);const E=t.getPenaltyN1(s)+t.getPenaltyN2(s)+t.getPenaltyN3(s)+t.getPenaltyN4(s);t.applyMask(T,s),E<w&&(w=E,n=T)}return n}}(e5)),e5}var _C={},oZ;function VJ(){if(oZ)return _C;oZ=1;const t=P4(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],a=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return _C.getBlocksCount=function(s,l){switch(l){case t.L:return e[(s-1)*4+0];case t.M:return e[(s-1)*4+1];case t.Q:return e[(s-1)*4+2];case t.H:return e[(s-1)*4+3];default:return}},_C.getTotalCodewordsCount=function(s,l){switch(l){case t.L:return a[(s-1)*4+0];case t.M:return a[(s-1)*4+1];case t.Q:return a[(s-1)*4+2];case t.H:return a[(s-1)*4+3];default:return}},_C}var t5={},Rw={},lZ;function Nxe(){if(lZ)return Rw;lZ=1;const t=new Uint8Array(512),e=new Uint8Array(256);return function(){let r=1;for(let s=0;s<255;s++)t[s]=r,e[r]=s,r<<=1,r&256&&(r^=285);for(let s=255;s<512;s++)t[s]=t[s-255]}(),Rw.log=function(r){if(r<1)throw new Error("log("+r+")");return e[r]},Rw.exp=function(r){return t[r]},Rw.mul=function(r,s){return r===0||s===0?0:t[e[r]+e[s]]},Rw}var uZ;function Vxe(){return uZ||(uZ=1,function(t){const e=Nxe();t.mul=function(r,s){const l=new Uint8Array(r.length+s.length-1);for(let h=0;h<r.length;h++)for(let n=0;n<s.length;n++)l[h+n]^=e.mul(r[h],s[n]);return l},t.mod=function(r,s){let l=new Uint8Array(r);for(;l.length-s.length>=0;){const h=l[0];for(let w=0;w<s.length;w++)l[w]^=e.mul(s[w],h);let n=0;for(;n<l.length&&l[n]===0;)n++;l=l.slice(n)}return l},t.generateECPolynomial=function(r){let s=new Uint8Array([1]);for(let l=0;l<r;l++)s=t.mul(s,new Uint8Array([1,e.exp(l)]));return s}}(t5)),t5}var a5,cZ;function zxe(){if(cZ)return a5;cZ=1;const t=Vxe();function e(a){this.genPoly=void 0,this.degree=a,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(r){this.degree=r,this.genPoly=t.generateECPolynomial(this.degree)},e.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(r.length+this.degree);s.set(r);const l=t.mod(s,this.genPoly),h=this.degree-l.length;if(h>0){const n=new Uint8Array(this.degree);return n.set(l,h),n}return l},a5=e,a5}var r5={},n5={},i5={},dZ;function zJ(){return dZ||(dZ=1,i5.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),i5}var mm={},hZ;function OJ(){if(hZ)return mm;hZ=1;const t="[0-9]+",e="[A-Z $%*+\\-./:]+";let a="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";a=a.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+a+`)(?:.|[\r
]))+`;mm.KANJI=new RegExp(a,"g"),mm.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),mm.BYTE=new RegExp(r,"g"),mm.NUMERIC=new RegExp(t,"g"),mm.ALPHANUMERIC=new RegExp(e,"g");const s=new RegExp("^"+a+"$"),l=new RegExp("^"+t+"$"),h=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return mm.testKanji=function(w){return s.test(w)},mm.testNumeric=function(w){return l.test(w)},mm.testAlphanumeric=function(w){return h.test(w)},mm}var fZ;function b0(){return fZ||(fZ=1,function(t){const e=zJ(),a=OJ();t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(l,h){if(!l.ccBits)throw new Error("Invalid mode: "+l);if(!e.isValid(h))throw new Error("Invalid version: "+h);return h>=1&&h<10?l.ccBits[0]:h<27?l.ccBits[1]:l.ccBits[2]},t.getBestModeForData=function(l){return a.testNumeric(l)?t.NUMERIC:a.testAlphanumeric(l)?t.ALPHANUMERIC:a.testKanji(l)?t.KANJI:t.BYTE},t.toString=function(l){if(l&&l.id)return l.id;throw new Error("Invalid mode")},t.isValid=function(l){return l&&l.bit&&l.ccBits};function r(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+s)}}t.from=function(l,h){if(t.isValid(l))return l;try{return r(l)}catch{return h}}}(n5)),n5}var pZ;function Oxe(){return pZ||(pZ=1,function(t){const e=C0(),a=VJ(),r=P4(),s=b0(),l=zJ(),h=7973,n=e.getBCHDigit(h);function w(k,U,Z){for(let q=1;q<=40;q++)if(U<=t.getCapacity(q,Z,k))return q}function T(k,U){return s.getCharCountIndicator(k,U)+4}function E(k,U){let Z=0;return k.forEach(function(q){const $=T(q.mode,U);Z+=$+q.getBitsLength()}),Z}function z(k,U){for(let Z=1;Z<=40;Z++)if(E(k,Z)<=t.getCapacity(Z,U,s.MIXED))return Z}t.from=function(U,Z){return l.isValid(U)?parseInt(U,10):Z},t.getCapacity=function(U,Z,q){if(!l.isValid(U))throw new Error("Invalid QR Code version");typeof q>"u"&&(q=s.BYTE);const $=e.getSymbolTotalCodewords(U),J=a.getTotalCodewordsCount(U,Z),ie=($-J)*8;if(q===s.MIXED)return ie;const de=ie-T(q,U);switch(q){case s.NUMERIC:return Math.floor(de/10*3);case s.ALPHANUMERIC:return Math.floor(de/11*2);case s.KANJI:return Math.floor(de/13);case s.BYTE:default:return Math.floor(de/8)}},t.getBestVersionForData=function(U,Z){let q;const $=r.from(Z,r.M);if(Array.isArray(U)){if(U.length>1)return z(U,$);if(U.length===0)return 1;q=U[0]}else q=U;return w(q.mode,q.getLength(),$)},t.getEncodedBits=function(U){if(!l.isValid(U)||U<7)throw new Error("Invalid QR Code version");let Z=U<<12;for(;e.getBCHDigit(Z)-n>=0;)Z^=h<<e.getBCHDigit(Z)-n;return U<<12|Z}}(r5)),r5}var s5={},mZ;function Dxe(){if(mZ)return s5;mZ=1;const t=C0(),e=1335,a=21522,r=t.getBCHDigit(e);return s5.getEncodedBits=function(l,h){const n=l.bit<<3|h;let w=n<<10;for(;t.getBCHDigit(w)-r>=0;)w^=e<<t.getBCHDigit(w)-r;return(n<<10|w)^a},s5}var o5={},l5,yZ;function Mxe(){if(yZ)return l5;yZ=1;const t=b0();function e(a){this.mode=t.NUMERIC,this.data=a.toString()}return e.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){let s,l,h;for(s=0;s+3<=this.data.length;s+=3)l=this.data.substr(s,3),h=parseInt(l,10),r.put(h,10);const n=this.data.length-s;n>0&&(l=this.data.substr(s),h=parseInt(l,10),r.put(h,n*3+1))},l5=e,l5}var u5,gZ;function Ixe(){if(gZ)return u5;gZ=1;const t=b0(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function a(r){this.mode=t.ALPHANUMERIC,this.data=r}return a.getBitsLength=function(s){return 11*Math.floor(s/2)+6*(s%2)},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(s){let l;for(l=0;l+2<=this.data.length;l+=2){let h=e.indexOf(this.data[l])*45;h+=e.indexOf(this.data[l+1]),s.put(h,11)}this.data.length%2&&s.put(e.indexOf(this.data[l]),6)},u5=a,u5}var c5,AZ;function Lxe(){if(AZ)return c5;AZ=1;const t=b0();function e(a){this.mode=t.BYTE,typeof a=="string"?this.data=new TextEncoder().encode(a):this.data=new Uint8Array(a)}return e.getBitsLength=function(r){return r*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(a){for(let r=0,s=this.data.length;r<s;r++)a.put(this.data[r],8)},c5=e,c5}var d5,_Z;function Fxe(){if(_Z)return d5;_Z=1;const t=b0(),e=C0();function a(r){this.mode=t.KANJI,this.data=r}return a.getBitsLength=function(s){return s*13},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(r){let s;for(s=0;s<this.data.length;s++){let l=e.toSJIS(this.data[s]);if(l>=33088&&l<=40956)l-=33088;else if(l>=57408&&l<=60351)l-=49472;else throw new Error("Invalid SJIS character: "+this.data[s]+`
Make sure your charset is UTF-8`);l=(l>>>8&255)*192+(l&255),r.put(l,13)}},d5=a,d5}var h5={exports:{}},vZ;function Uxe(){return vZ||(vZ=1,function(t){var e={single_source_shortest_paths:function(a,r,s){var l={},h={};h[r]=0;var n=e.PriorityQueue.make();n.push(r,0);for(var w,T,E,z,k,U,Z,q,$;!n.empty();){w=n.pop(),T=w.value,z=w.cost,k=a[T]||{};for(E in k)k.hasOwnProperty(E)&&(U=k[E],Z=z+U,q=h[E],$=typeof h[E]>"u",($||q>Z)&&(h[E]=Z,n.push(E,Z),l[E]=T))}if(typeof s<"u"&&typeof h[s]>"u"){var J=["Could not find a path from ",r," to ",s,"."].join("");throw new Error(J)}return l},extract_shortest_path_from_predecessor_list:function(a,r){for(var s=[],l=r;l;)s.push(l),a[l],l=a[l];return s.reverse(),s},find_path:function(a,r,s){var l=e.single_source_shortest_paths(a,r,s);return e.extract_shortest_path_from_predecessor_list(l,s)},PriorityQueue:{make:function(a){var r=e.PriorityQueue,s={},l;a=a||{};for(l in r)r.hasOwnProperty(l)&&(s[l]=r[l]);return s.queue=[],s.sorter=a.sorter||r.default_sorter,s},default_sorter:function(a,r){return a.cost-r.cost},push:function(a,r){var s={value:a,cost:r};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e}(h5)),h5.exports}var wZ;function kxe(){return wZ||(wZ=1,function(t){const e=b0(),a=Mxe(),r=Ixe(),s=Lxe(),l=Fxe(),h=OJ(),n=C0(),w=Uxe();function T(J){return unescape(encodeURIComponent(J)).length}function E(J,ie,de){const ge=[];let he;for(;(he=J.exec(de))!==null;)ge.push({data:he[0],index:he.index,mode:ie,length:he[0].length});return ge}function z(J){const ie=E(h.NUMERIC,e.NUMERIC,J),de=E(h.ALPHANUMERIC,e.ALPHANUMERIC,J);let ge,he;return n.isKanjiModeEnabled()?(ge=E(h.BYTE,e.BYTE,J),he=E(h.KANJI,e.KANJI,J)):(ge=E(h.BYTE_KANJI,e.BYTE,J),he=[]),ie.concat(de,ge,he).sort(function(me,Re){return me.index-Re.index}).map(function(me){return{data:me.data,mode:me.mode,length:me.length}})}function k(J,ie){switch(ie){case e.NUMERIC:return a.getBitsLength(J);case e.ALPHANUMERIC:return r.getBitsLength(J);case e.KANJI:return l.getBitsLength(J);case e.BYTE:return s.getBitsLength(J)}}function U(J){return J.reduce(function(ie,de){const ge=ie.length-1>=0?ie[ie.length-1]:null;return ge&&ge.mode===de.mode?(ie[ie.length-1].data+=de.data,ie):(ie.push(de),ie)},[])}function Z(J){const ie=[];for(let de=0;de<J.length;de++){const ge=J[de];switch(ge.mode){case e.NUMERIC:ie.push([ge,{data:ge.data,mode:e.ALPHANUMERIC,length:ge.length},{data:ge.data,mode:e.BYTE,length:ge.length}]);break;case e.ALPHANUMERIC:ie.push([ge,{data:ge.data,mode:e.BYTE,length:ge.length}]);break;case e.KANJI:ie.push([ge,{data:ge.data,mode:e.BYTE,length:T(ge.data)}]);break;case e.BYTE:ie.push([{data:ge.data,mode:e.BYTE,length:T(ge.data)}])}}return ie}function q(J,ie){const de={},ge={start:{}};let he=["start"];for(let Ae=0;Ae<J.length;Ae++){const me=J[Ae],Re=[];for(let be=0;be<me.length;be++){const De=me[be],ne=""+Ae+be;Re.push(ne),de[ne]={node:De,lastCount:0},ge[ne]={};for(let ye=0;ye<he.length;ye++){const Me=he[ye];de[Me]&&de[Me].node.mode===De.mode?(ge[Me][ne]=k(de[Me].lastCount+De.length,De.mode)-k(de[Me].lastCount,De.mode),de[Me].lastCount+=De.length):(de[Me]&&(de[Me].lastCount=De.length),ge[Me][ne]=k(De.length,De.mode)+4+e.getCharCountIndicator(De.mode,ie))}}he=Re}for(let Ae=0;Ae<he.length;Ae++)ge[he[Ae]].end=0;return{map:ge,table:de}}function $(J,ie){let de;const ge=e.getBestModeForData(J);if(de=e.from(ie,ge),de!==e.BYTE&&de.bit<ge.bit)throw new Error('"'+J+'" cannot be encoded with mode '+e.toString(de)+`.
 Suggested mode is: `+e.toString(ge));switch(de===e.KANJI&&!n.isKanjiModeEnabled()&&(de=e.BYTE),de){case e.NUMERIC:return new a(J);case e.ALPHANUMERIC:return new r(J);case e.KANJI:return new l(J);case e.BYTE:return new s(J)}}t.fromArray=function(ie){return ie.reduce(function(de,ge){return typeof ge=="string"?de.push($(ge,null)):ge.data&&de.push($(ge.data,ge.mode)),de},[])},t.fromString=function(ie,de){const ge=z(ie,n.isKanjiModeEnabled()),he=Z(ge),Ae=q(he,de),me=w.find_path(Ae.map,"start","end"),Re=[];for(let be=1;be<me.length-1;be++)Re.push(Ae.table[me[be]].node);return t.fromArray(U(Re))},t.rawSplit=function(ie){return t.fromArray(z(ie,n.isKanjiModeEnabled()))}}(o5)),o5}var RZ;function Bxe(){if(RZ)return KO;RZ=1;const t=C0(),e=P4(),a=Cxe(),r=bxe(),s=xxe(),l=Pxe(),h=Exe(),n=VJ(),w=zxe(),T=Oxe(),E=Dxe(),z=b0(),k=kxe();function U(Ae,me){const Re=Ae.size,be=l.getPositions(me);for(let De=0;De<be.length;De++){const ne=be[De][0],ye=be[De][1];for(let Me=-1;Me<=7;Me++)if(!(ne+Me<=-1||Re<=ne+Me))for(let ze=-1;ze<=7;ze++)ye+ze<=-1||Re<=ye+ze||(Me>=0&&Me<=6&&(ze===0||ze===6)||ze>=0&&ze<=6&&(Me===0||Me===6)||Me>=2&&Me<=4&&ze>=2&&ze<=4?Ae.set(ne+Me,ye+ze,!0,!0):Ae.set(ne+Me,ye+ze,!1,!0))}}function Z(Ae){const me=Ae.size;for(let Re=8;Re<me-8;Re++){const be=Re%2===0;Ae.set(Re,6,be,!0),Ae.set(6,Re,be,!0)}}function q(Ae,me){const Re=s.getPositions(me);for(let be=0;be<Re.length;be++){const De=Re[be][0],ne=Re[be][1];for(let ye=-2;ye<=2;ye++)for(let Me=-2;Me<=2;Me++)ye===-2||ye===2||Me===-2||Me===2||ye===0&&Me===0?Ae.set(De+ye,ne+Me,!0,!0):Ae.set(De+ye,ne+Me,!1,!0)}}function $(Ae,me){const Re=Ae.size,be=T.getEncodedBits(me);let De,ne,ye;for(let Me=0;Me<18;Me++)De=Math.floor(Me/3),ne=Me%3+Re-8-3,ye=(be>>Me&1)===1,Ae.set(De,ne,ye,!0),Ae.set(ne,De,ye,!0)}function J(Ae,me,Re){const be=Ae.size,De=E.getEncodedBits(me,Re);let ne,ye;for(ne=0;ne<15;ne++)ye=(De>>ne&1)===1,ne<6?Ae.set(ne,8,ye,!0):ne<8?Ae.set(ne+1,8,ye,!0):Ae.set(be-15+ne,8,ye,!0),ne<8?Ae.set(8,be-ne-1,ye,!0):ne<9?Ae.set(8,15-ne-1+1,ye,!0):Ae.set(8,15-ne-1,ye,!0);Ae.set(be-8,8,1,!0)}function ie(Ae,me){const Re=Ae.size;let be=-1,De=Re-1,ne=7,ye=0;for(let Me=Re-1;Me>0;Me-=2)for(Me===6&&Me--;;){for(let ze=0;ze<2;ze++)if(!Ae.isReserved(De,Me-ze)){let Le=!1;ye<me.length&&(Le=(me[ye]>>>ne&1)===1),Ae.set(De,Me-ze,Le),ne--,ne===-1&&(ye++,ne=7)}if(De+=be,De<0||Re<=De){De-=be,be=-be;break}}}function de(Ae,me,Re){const be=new a;Re.forEach(function(ze){be.put(ze.mode.bit,4),be.put(ze.getLength(),z.getCharCountIndicator(ze.mode,Ae)),ze.write(be)});const De=t.getSymbolTotalCodewords(Ae),ne=n.getTotalCodewordsCount(Ae,me),ye=(De-ne)*8;for(be.getLengthInBits()+4<=ye&&be.put(0,4);be.getLengthInBits()%8!==0;)be.putBit(0);const Me=(ye-be.getLengthInBits())/8;for(let ze=0;ze<Me;ze++)be.put(ze%2?17:236,8);return ge(be,Ae,me)}function ge(Ae,me,Re){const be=t.getSymbolTotalCodewords(me),De=n.getTotalCodewordsCount(me,Re),ne=be-De,ye=n.getBlocksCount(me,Re),Me=be%ye,ze=ye-Me,Le=Math.floor(be/ye),Ie=Math.floor(ne/ye),qe=Ie+1,ke=Le-Ie,tt=new w(ke);let Ue=0;const He=new Array(ye),Ce=new Array(ye);let Se=0;const $e=new Uint8Array(Ae.buffer);for(let ct=0;ct<ye;ct++){const _e=ct<ze?Ie:qe;He[ct]=$e.slice(Ue,Ue+_e),Ce[ct]=tt.encode(He[ct]),Ue+=_e,Se=Math.max(Se,_e)}const ft=new Uint8Array(be);let Je=0,wt,it;for(wt=0;wt<Se;wt++)for(it=0;it<ye;it++)wt<He[it].length&&(ft[Je++]=He[it][wt]);for(wt=0;wt<ke;wt++)for(it=0;it<ye;it++)ft[Je++]=Ce[it][wt];return ft}function he(Ae,me,Re,be){let De;if(Array.isArray(Ae))De=k.fromArray(Ae);else if(typeof Ae=="string"){let Le=me;if(!Le){const Ie=k.rawSplit(Ae);Le=T.getBestVersionForData(Ie,Re)}De=k.fromString(Ae,Le||40)}else throw new Error("Invalid data");const ne=T.getBestVersionForData(De,Re);if(!ne)throw new Error("The amount of data is too big to be stored in a QR Code");if(!me)me=ne;else if(me<ne)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+ne+`.
`);const ye=de(me,Re,De),Me=t.getSymbolSize(me),ze=new r(Me);return U(ze,me),Z(ze),q(ze,me),J(ze,Re,0),me>=7&&$(ze,me),ie(ze,ye),isNaN(be)&&(be=h.getBestMask(ze,J.bind(null,ze,Re))),h.applyMask(be,ze),J(ze,Re,be),{modules:ze,version:me,errorCorrectionLevel:Re,maskPattern:be,segments:De}}return KO.create=function(me,Re){if(typeof me>"u"||me==="")throw new Error("No input text");let be=e.M,De,ne;return typeof Re<"u"&&(be=e.from(Re.errorCorrectionLevel,e.M),De=T.from(Re.version),ne=h.from(Re.maskPattern),Re.toSJISFunc&&t.setToSJISFunction(Re.toSJISFunc)),he(me,De,be,ne)},KO}var f5={},p5={},TZ;function DJ(){return TZ||(TZ=1,function(t){function e(a){if(typeof a=="number"&&(a=a.toString()),typeof a!="string")throw new Error("Color should be defined as hex string");let r=a.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+a);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(l){return[l,l]}))),r.length===6&&r.push("F","F");const s=parseInt(r.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const s=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,l=r.width&&r.width>=21?r.width:void 0,h=r.scale||4;return{width:l,scale:l?4:h,margin:s,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,s){return s.width&&s.width>=r+s.margin*2?s.width/(r+s.margin*2):s.scale},t.getImageWidth=function(r,s){const l=t.getScale(r,s);return Math.floor((r+s.margin*2)*l)},t.qrToImageData=function(r,s,l){const h=s.modules.size,n=s.modules.data,w=t.getScale(h,l),T=Math.floor((h+l.margin*2)*w),E=l.margin*w,z=[l.color.light,l.color.dark];for(let k=0;k<T;k++)for(let U=0;U<T;U++){let Z=(k*T+U)*4,q=l.color.light;if(k>=E&&U>=E&&k<T-E&&U<T-E){const $=Math.floor((k-E)/w),J=Math.floor((U-E)/w);q=z[n[$*h+J]?1:0]}r[Z++]=q.r,r[Z++]=q.g,r[Z++]=q.b,r[Z]=q.a}}}(p5)),p5}var SZ;function Gxe(){return SZ||(SZ=1,function(t){const e=DJ();function a(s,l,h){s.clearRect(0,0,l.width,l.height),l.style||(l.style={}),l.height=h,l.width=h,l.style.height=h+"px",l.style.width=h+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(l,h,n){let w=n,T=h;typeof w>"u"&&(!h||!h.getContext)&&(w=h,h=void 0),h||(T=r()),w=e.getOptions(w);const E=e.getImageWidth(l.modules.size,w),z=T.getContext("2d"),k=z.createImageData(E,E);return e.qrToImageData(k.data,l,w),a(z,T,E),z.putImageData(k,0,0),T},t.renderToDataURL=function(l,h,n){let w=n;typeof w>"u"&&(!h||!h.getContext)&&(w=h,h=void 0),w||(w={});const T=t.render(l,h,w),E=w.type||"image/png",z=w.rendererOpts||{};return T.toDataURL(E,z.quality)}}(f5)),f5}var m5={},CZ;function jxe(){if(CZ)return m5;CZ=1;const t=DJ();function e(s,l){const h=s.a/255,n=l+'="'+s.hex+'"';return h<1?n+" "+l+'-opacity="'+h.toFixed(2).slice(1)+'"':n}function a(s,l,h){let n=s+l;return typeof h<"u"&&(n+=" "+h),n}function r(s,l,h){let n="",w=0,T=!1,E=0;for(let z=0;z<s.length;z++){const k=Math.floor(z%l),U=Math.floor(z/l);!k&&!T&&(T=!0),s[z]?(E++,z>0&&k>0&&s[z-1]||(n+=T?a("M",k+h,.5+U+h):a("m",w,0),w=0,T=!1),k+1<l&&s[z+1]||(n+=a("h",E),E=0)):w++}return n}return m5.render=function(l,h,n){const w=t.getOptions(h),T=l.modules.size,E=l.modules.data,z=T+w.margin*2,k=w.color.light.a?"<path "+e(w.color.light,"fill")+' d="M0 0h'+z+"v"+z+'H0z"/>':"",U="<path "+e(w.color.dark,"stroke")+' d="'+r(E,T,w.margin)+'"/>',Z='viewBox="0 0 '+z+" "+z+'"',$='<svg xmlns="http://www.w3.org/2000/svg" '+(w.width?'width="'+w.width+'" height="'+w.width+'" ':"")+Z+' shape-rendering="crispEdges">'+k+U+`</svg>
`;return typeof n=="function"&&n(null,$),$},m5}var bZ;function Zxe(){if(bZ)return y_;bZ=1;const t=Sxe(),e=Bxe(),a=Gxe(),r=jxe();function s(l,h,n,w,T){const E=[].slice.call(arguments,1),z=E.length,k=typeof E[z-1]=="function";if(!k&&!t())throw new Error("Callback required as last argument");if(k){if(z<2)throw new Error("Too few arguments provided");z===2?(T=n,n=h,h=w=void 0):z===3&&(h.getContext&&typeof T>"u"?(T=w,w=void 0):(T=w,w=n,n=h,h=void 0))}else{if(z<1)throw new Error("Too few arguments provided");return z===1?(n=h,h=w=void 0):z===2&&!h.getContext&&(w=n,n=h,h=void 0),new Promise(function(U,Z){try{const q=e.create(n,w);U(l(q,h,w))}catch(q){Z(q)}})}try{const U=e.create(n,w);T(null,l(U,h,w))}catch(U){T(U)}}return y_.create=e.create,y_.toCanvas=s.bind(null,a.render),y_.toDataURL=s.bind(null,a.renderToDataURL),y_.toString=s.bind(null,function(l,h,n){return r.render(l,n)}),y_}var qxe=Zxe();const Hxe=Ji(qxe),$xe="modulepreload",Kxe=function(t){return"/ecpcaps/"+t},xZ={},BM=function(e,a,r){let s=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),n=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));s=Promise.allSettled(a.map(w=>{if(w=Kxe(w),w in xZ)return;xZ[w]=!0;const T=w.endsWith(".css"),E=T?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${w}"]${E}`))return;const z=document.createElement("link");if(z.rel=T?"stylesheet":$xe,T||(z.as="script"),z.crossOrigin="",z.href=w,n&&z.setAttribute("nonce",n),document.head.appendChild(z),T)return new Promise((k,U)=>{z.addEventListener("load",k),z.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${w}`)))})}))}function l(h){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=h,window.dispatchEvent(n),!n.defaultPrevented)throw h}return s.then(h=>{for(const n of h||[])n.status==="rejected"&&l(n.reason);return e().catch(l)})};function Ls(t){"@babel/helpers - typeof";return Ls=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ls(t)}var fd=Uint8Array,sf=Uint16Array,E4=Int32Array,iP=new fd([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),sP=new fd([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),GM=new fd([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),MJ=function(t,e){for(var a=new sf(31),r=0;r<31;++r)a[r]=e+=1<<t[r-1];for(var s=new E4(a[30]),r=1;r<30;++r)for(var l=a[r];l<a[r+1];++l)s[l]=l-a[r]<<5|r;return{b:a,r:s}},IJ=MJ(iP,2),LJ=IJ.b,jM=IJ.r;LJ[28]=258,jM[258]=28;var FJ=MJ(sP,0),Wxe=FJ.b,PZ=FJ.r,ZM=new sf(32768);for(var Vo=0;Vo<32768;++Vo){var dg=(Vo&43690)>>1|(Vo&21845)<<1;dg=(dg&52428)>>2|(dg&13107)<<2,dg=(dg&61680)>>4|(dg&3855)<<4,ZM[Vo]=((dg&65280)>>8|(dg&255)<<8)>>1}var Pm=function(t,e,a){for(var r=t.length,s=0,l=new sf(e);s<r;++s)t[s]&&++l[t[s]-1];var h=new sf(e);for(s=1;s<e;++s)h[s]=h[s-1]+l[s-1]<<1;var n;if(a){n=new sf(1<<e);var w=15-e;for(s=0;s<r;++s)if(t[s])for(var T=s<<4|t[s],E=e-t[s],z=h[t[s]-1]++<<E,k=z|(1<<E)-1;z<=k;++z)n[ZM[z]>>w]=T}else for(n=new sf(r),s=0;s<r;++s)t[s]&&(n[s]=ZM[h[t[s]-1]++]>>15-t[s]);return n},Ig=new fd(288);for(var Vo=0;Vo<144;++Vo)Ig[Vo]=8;for(var Vo=144;Vo<256;++Vo)Ig[Vo]=9;for(var Vo=256;Vo<280;++Vo)Ig[Vo]=7;for(var Vo=280;Vo<288;++Vo)Ig[Vo]=8;var eT=new fd(32);for(var Vo=0;Vo<32;++Vo)eT[Vo]=5;var Yxe=Pm(Ig,9,0),Xxe=Pm(Ig,9,1),Jxe=Pm(eT,5,0),Qxe=Pm(eT,5,1),y5=function(t){for(var e=t[0],a=1;a<t.length;++a)t[a]>e&&(e=t[a]);return e},wp=function(t,e,a){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&a},g5=function(t,e){var a=e/8|0;return(t[a]|t[a+1]<<8|t[a+2]<<16)>>(e&7)},N4=function(t){return(t+7)/8|0},UJ=function(t,e,a){return(a==null||a>t.length)&&(a=t.length),new fd(t.subarray(e,a))},ePe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Cp=function(t,e,a){var r=new Error(e||ePe[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Cp),!a)throw r;return r},tPe=function(t,e,a,r){var s=t.length,l=0;if(!s||e.f&&!e.l)return a||new fd(0);var h=!a,n=h||e.i!=2,w=e.i;h&&(a=new fd(s*3));var T=function(Jt){var Zt=a.length;if(Jt>Zt){var Pa=new fd(Math.max(Zt*2,Jt));Pa.set(a),a=Pa}},E=e.f||0,z=e.p||0,k=e.b||0,U=e.l,Z=e.d,q=e.m,$=e.n,J=s*8;do{if(!U){E=wp(t,z,1);var ie=wp(t,z+1,3);if(z+=3,ie)if(ie==1)U=Xxe,Z=Qxe,q=9,$=5;else if(ie==2){var Ae=wp(t,z,31)+257,me=wp(t,z+10,15)+4,Re=Ae+wp(t,z+5,31)+1;z+=14;for(var be=new fd(Re),De=new fd(19),ne=0;ne<me;++ne)De[GM[ne]]=wp(t,z+ne*3,7);z+=me*3;for(var ye=y5(De),Me=(1<<ye)-1,ze=Pm(De,ye,1),ne=0;ne<Re;){var Le=ze[wp(t,z,Me)];z+=Le&15;var de=Le>>4;if(de<16)be[ne++]=de;else{var Ie=0,qe=0;for(de==16?(qe=3+wp(t,z,3),z+=2,Ie=be[ne-1]):de==17?(qe=3+wp(t,z,7),z+=3):de==18&&(qe=11+wp(t,z,127),z+=7);qe--;)be[ne++]=Ie}}var ke=be.subarray(0,Ae),tt=be.subarray(Ae);q=y5(ke),$=y5(tt),U=Pm(ke,q,1),Z=Pm(tt,$,1)}else Cp(1);else{var de=N4(z)+4,ge=t[de-4]|t[de-3]<<8,he=de+ge;if(he>s){w&&Cp(0);break}n&&T(k+ge),a.set(t.subarray(de,he),k),e.b=k+=ge,e.p=z=he*8,e.f=E;continue}if(z>J){w&&Cp(0);break}}n&&T(k+131072);for(var Ue=(1<<q)-1,He=(1<<$)-1,Ce=z;;Ce=z){var Ie=U[g5(t,z)&Ue],Se=Ie>>4;if(z+=Ie&15,z>J){w&&Cp(0);break}if(Ie||Cp(2),Se<256)a[k++]=Se;else if(Se==256){Ce=z,U=null;break}else{var $e=Se-254;if(Se>264){var ne=Se-257,ft=iP[ne];$e=wp(t,z,(1<<ft)-1)+LJ[ne],z+=ft}var Je=Z[g5(t,z)&He],wt=Je>>4;Je||Cp(3),z+=Je&15;var tt=Wxe[wt];if(wt>3){var ft=sP[wt];tt+=g5(t,z)&(1<<ft)-1,z+=ft}if(z>J){w&&Cp(0);break}n&&T(k+131072);var it=k+$e;if(k<tt){var ct=l-tt,_e=Math.min(tt,it);for(ct+k<0&&Cp(3);k<_e;++k)a[k]=r[ct+k]}for(;k<it;++k)a[k]=a[k-tt]}}e.l=U,e.p=Ce,e.b=k,e.f=E,U&&(E=1,e.m=q,e.d=Z,e.n=$)}while(!E);return k!=a.length&&h?UJ(a,0,k):a.subarray(0,k)},ty=function(t,e,a){a<<=e&7;var r=e/8|0;t[r]|=a,t[r+1]|=a>>8},Tw=function(t,e,a){a<<=e&7;var r=e/8|0;t[r]|=a,t[r+1]|=a>>8,t[r+2]|=a>>16},A5=function(t,e){for(var a=[],r=0;r<t.length;++r)t[r]&&a.push({s:r,f:t[r]});var s=a.length,l=a.slice();if(!s)return{t:BJ,l:0};if(s==1){var h=new fd(a[0].s+1);return h[a[0].s]=1,{t:h,l:1}}a.sort(function(he,Ae){return he.f-Ae.f}),a.push({s:-1,f:25001});var n=a[0],w=a[1],T=0,E=1,z=2;for(a[0]={s:-1,f:n.f+w.f,l:n,r:w};E!=s-1;)n=a[a[T].f<a[z].f?T++:z++],w=a[T!=E&&a[T].f<a[z].f?T++:z++],a[E++]={s:-1,f:n.f+w.f,l:n,r:w};for(var k=l[0].s,r=1;r<s;++r)l[r].s>k&&(k=l[r].s);var U=new sf(k+1),Z=qM(a[E-1],U,0);if(Z>e){var r=0,q=0,$=Z-e,J=1<<$;for(l.sort(function(Ae,me){return U[me.s]-U[Ae.s]||Ae.f-me.f});r<s;++r){var ie=l[r].s;if(U[ie]>e)q+=J-(1<<Z-U[ie]),U[ie]=e;else break}for(q>>=$;q>0;){var de=l[r].s;U[de]<e?q-=1<<e-U[de]++-1:++r}for(;r>=0&&q;--r){var ge=l[r].s;U[ge]==e&&(--U[ge],++q)}Z=e}return{t:new fd(U),l:Z}},qM=function(t,e,a){return t.s==-1?Math.max(qM(t.l,e,a+1),qM(t.r,e,a+1)):e[t.s]=a},EZ=function(t){for(var e=t.length;e&&!t[--e];);for(var a=new sf(++e),r=0,s=t[0],l=1,h=function(w){a[r++]=w},n=1;n<=e;++n)if(t[n]==s&&n!=e)++l;else{if(!s&&l>2){for(;l>138;l-=138)h(32754);l>2&&(h(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(h(s),--l;l>6;l-=6)h(8304);l>2&&(h(l-3<<5|8208),l=0)}for(;l--;)h(s);l=1,s=t[n]}return{c:a.subarray(0,r),n:e}},Sw=function(t,e){for(var a=0,r=0;r<e.length;++r)a+=t[r]*e[r];return a},kJ=function(t,e,a){var r=a.length,s=N4(e+2);t[s]=r&255,t[s+1]=r>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var l=0;l<r;++l)t[s+l+4]=a[l];return(s+4+r)*8},NZ=function(t,e,a,r,s,l,h,n,w,T,E){ty(e,E++,a),++s[256];for(var z=A5(s,15),k=z.t,U=z.l,Z=A5(l,15),q=Z.t,$=Z.l,J=EZ(k),ie=J.c,de=J.n,ge=EZ(q),he=ge.c,Ae=ge.n,me=new sf(19),Re=0;Re<ie.length;++Re)++me[ie[Re]&31];for(var Re=0;Re<he.length;++Re)++me[he[Re]&31];for(var be=A5(me,7),De=be.t,ne=be.l,ye=19;ye>4&&!De[GM[ye-1]];--ye);var Me=T+5<<3,ze=Sw(s,Ig)+Sw(l,eT)+h,Le=Sw(s,k)+Sw(l,q)+h+14+3*ye+Sw(me,De)+2*me[16]+3*me[17]+7*me[18];if(w>=0&&Me<=ze&&Me<=Le)return kJ(e,E,t.subarray(w,w+T));var Ie,qe,ke,tt;if(ty(e,E,1+(Le<ze)),E+=2,Le<ze){Ie=Pm(k,U,0),qe=k,ke=Pm(q,$,0),tt=q;var Ue=Pm(De,ne,0);ty(e,E,de-257),ty(e,E+5,Ae-1),ty(e,E+10,ye-4),E+=14;for(var Re=0;Re<ye;++Re)ty(e,E+3*Re,De[GM[Re]]);E+=3*ye;for(var He=[ie,he],Ce=0;Ce<2;++Ce)for(var Se=He[Ce],Re=0;Re<Se.length;++Re){var $e=Se[Re]&31;ty(e,E,Ue[$e]),E+=De[$e],$e>15&&(ty(e,E,Se[Re]>>5&127),E+=Se[Re]>>12)}}else Ie=Yxe,qe=Ig,ke=Jxe,tt=eT;for(var Re=0;Re<n;++Re){var ft=r[Re];if(ft>255){var $e=ft>>18&31;Tw(e,E,Ie[$e+257]),E+=qe[$e+257],$e>7&&(ty(e,E,ft>>23&31),E+=iP[$e]);var Je=ft&31;Tw(e,E,ke[Je]),E+=tt[Je],Je>3&&(Tw(e,E,ft>>5&8191),E+=sP[Je])}else Tw(e,E,Ie[ft]),E+=qe[ft]}return Tw(e,E,Ie[256]),E+qe[256]},aPe=new E4([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),BJ=new fd(0),rPe=function(t,e,a,r,s,l){var h=l.z||t.length,n=new fd(r+h+5*(1+Math.ceil(h/7e3))+s),w=n.subarray(r,n.length-s),T=l.l,E=(l.r||0)&7;if(e){E&&(w[0]=l.r>>3);for(var z=aPe[e-1],k=z>>13,U=z&8191,Z=(1<<a)-1,q=l.p||new sf(32768),$=l.h||new sf(Z+1),J=Math.ceil(a/3),ie=2*J,de=function(Bt){return(t[Bt]^t[Bt+1]<<J^t[Bt+2]<<ie)&Z},ge=new E4(25e3),he=new sf(288),Ae=new sf(32),me=0,Re=0,be=l.i||0,De=0,ne=l.w||0,ye=0;be+2<h;++be){var Me=de(be),ze=be&32767,Le=$[Me];if(q[ze]=Le,$[Me]=ze,ne<=be){var Ie=h-be;if((me>7e3||De>24576)&&(Ie>423||!T)){E=NZ(t,w,0,ge,he,Ae,Re,De,ye,be-ye,E),De=me=Re=0,ye=be;for(var qe=0;qe<286;++qe)he[qe]=0;for(var qe=0;qe<30;++qe)Ae[qe]=0}var ke=2,tt=0,Ue=U,He=ze-Le&32767;if(Ie>2&&Me==de(be-He))for(var Ce=Math.min(k,Ie)-1,Se=Math.min(32767,be),$e=Math.min(258,Ie);He<=Se&&--Ue&&ze!=Le;){if(t[be+ke]==t[be+ke-He]){for(var ft=0;ft<$e&&t[be+ft]==t[be+ft-He];++ft);if(ft>ke){if(ke=ft,tt=He,ft>Ce)break;for(var Je=Math.min(He,ft-2),wt=0,qe=0;qe<Je;++qe){var it=be-He+qe&32767,ct=q[it],_e=it-ct&32767;_e>wt&&(wt=_e,Le=it)}}}ze=Le,Le=q[ze],He+=ze-Le&32767}if(tt){ge[De++]=268435456|jM[ke]<<18|PZ[tt];var Jt=jM[ke]&31,Zt=PZ[tt]&31;Re+=iP[Jt]+sP[Zt],++he[257+Jt],++Ae[Zt],ne=be+ke,++me}else ge[De++]=t[be],++he[t[be]]}}for(be=Math.max(be,ne);be<h;++be)ge[De++]=t[be],++he[t[be]];E=NZ(t,w,T,ge,he,Ae,Re,De,ye,be-ye,E),T||(l.r=E&7|w[E/8|0]<<3,E-=7,l.h=$,l.p=q,l.i=be,l.w=ne)}else{for(var be=l.w||0;be<h+T;be+=65535){var Pa=be+65535;Pa>=h&&(w[E/8|0]=T,Pa=h),E=kJ(w,E+1,t.subarray(be,Pa))}l.i=h}return UJ(n,0,r+N4(E)+s)},GJ=function(){var t=1,e=0;return{p:function(a){for(var r=t,s=e,l=a.length|0,h=0;h!=l;){for(var n=Math.min(h+2655,l);h<n;++h)s+=r+=a[h];r=(r&65535)+15*(r>>16),s=(s&65535)+15*(s>>16)}t=r,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},nPe=function(t,e,a,r,s){if(!s&&(s={l:1},e.dictionary)){var l=e.dictionary.subarray(-32768),h=new fd(l.length+t.length);h.set(l),h.set(t,l.length),t=h,s.w=l.length}return rPe(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,a,r,s)},jJ=function(t,e,a){for(;a;++e)t[e]=a,a>>>=8},iPe=function(t,e){var a=e.level,r=a==0?0:a<6?1:a==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=GJ();s.p(e.dictionary),jJ(t,2,s.d())}},sPe=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Cp(6,"invalid zlib data"),(t[1]>>5&1)==1&&Cp(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function HM(t,e){e||(e={});var a=GJ();a.p(t);var r=nPe(t,e,e.dictionary?6:2,4);return iPe(r,e),jJ(r,r.length-4,a.d()),r}function oPe(t,e){return tPe(t.subarray(sPe(t),-4),{i:2},e,e)}var lPe=typeof TextDecoder<"u"&&new TextDecoder,uPe=0;try{lPe.decode(BJ,{stream:!0}),uPe=1}catch{}var Kn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function _5(){Kn.console&&typeof Kn.console.log=="function"&&Kn.console.log.apply(Kn.console,arguments)}var io={log:_5,warn:function(t){Kn.console&&(typeof Kn.console.warn=="function"?Kn.console.warn.apply(Kn.console,arguments):_5.call(null,arguments))},error:function(t){Kn.console&&(typeof Kn.console.error=="function"?Kn.console.error.apply(Kn.console,arguments):_5(t))}};function v5(t,e,a){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){kA(r.response,e,a)},r.onerror=function(){io.error("could not download file")},r.send()}function VZ(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function vC(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Xw,$M,kA=Kn.saveAs||((typeof window>"u"?"undefined":Ls(window))!=="object"||window!==Kn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,a){var r=Kn.URL||Kn.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?VZ(s.href)?v5(t,e,a):vC(s,s.target="_blank"):vC(s)):(s.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){vC(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,a){if(e=e||t.name||"download",typeof t=="string")if(VZ(t))v5(t,e,a);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){vC(r)})}else navigator.msSaveOrOpenBlob(function(s,l){return l===void 0?l={autoBom:!1}:Ls(l)!=="object"&&(io.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,a),e)}:function(t,e,a,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return v5(t,e,a);var s=t.type==="application/octet-stream",l=/constructor/i.test(Kn.HTMLElement)||Kn.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent);if((h||s&&l)&&(typeof FileReader>"u"?"undefined":Ls(FileReader))==="object"){var n=new FileReader;n.onloadend=function(){var E=n.result;E=h?E:E.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=E:location=E,r=null},n.readAsDataURL(t)}else{var w=Kn.URL||Kn.webkitURL,T=w.createObjectURL(t);r?r.location=T:location.href=T,r=null,setTimeout(function(){w.revokeObjectURL(T)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function ZJ(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var a=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(n){return[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(n){return[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(n){return[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]}}],r=0;r<a.length;r++){var s=a[r].re,l=a[r].process,h=s.exec(t);h&&(e=l(h),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var n=this.r.toString(16),w=this.g.toString(16),T=this.b.toString(16);return n.length==1&&(n="0"+n),w.length==1&&(w="0"+w),T.length==1&&(T="0"+T),"#"+n+w+T}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function w5(t,e){var a=t[0],r=t[1],s=t[2],l=t[3];a=td(a,r,s,l,e[0],7,-680876936),l=td(l,a,r,s,e[1],12,-389564586),s=td(s,l,a,r,e[2],17,606105819),r=td(r,s,l,a,e[3],22,-1044525330),a=td(a,r,s,l,e[4],7,-176418897),l=td(l,a,r,s,e[5],12,1200080426),s=td(s,l,a,r,e[6],17,-1473231341),r=td(r,s,l,a,e[7],22,-45705983),a=td(a,r,s,l,e[8],7,1770035416),l=td(l,a,r,s,e[9],12,-1958414417),s=td(s,l,a,r,e[10],17,-42063),r=td(r,s,l,a,e[11],22,-1990404162),a=td(a,r,s,l,e[12],7,1804603682),l=td(l,a,r,s,e[13],12,-40341101),s=td(s,l,a,r,e[14],17,-1502002290),a=ad(a,r=td(r,s,l,a,e[15],22,1236535329),s,l,e[1],5,-165796510),l=ad(l,a,r,s,e[6],9,-1069501632),s=ad(s,l,a,r,e[11],14,643717713),r=ad(r,s,l,a,e[0],20,-373897302),a=ad(a,r,s,l,e[5],5,-701558691),l=ad(l,a,r,s,e[10],9,38016083),s=ad(s,l,a,r,e[15],14,-660478335),r=ad(r,s,l,a,e[4],20,-405537848),a=ad(a,r,s,l,e[9],5,568446438),l=ad(l,a,r,s,e[14],9,-1019803690),s=ad(s,l,a,r,e[3],14,-187363961),r=ad(r,s,l,a,e[8],20,1163531501),a=ad(a,r,s,l,e[13],5,-1444681467),l=ad(l,a,r,s,e[2],9,-51403784),s=ad(s,l,a,r,e[7],14,1735328473),a=rd(a,r=ad(r,s,l,a,e[12],20,-1926607734),s,l,e[5],4,-378558),l=rd(l,a,r,s,e[8],11,-2022574463),s=rd(s,l,a,r,e[11],16,1839030562),r=rd(r,s,l,a,e[14],23,-35309556),a=rd(a,r,s,l,e[1],4,-1530992060),l=rd(l,a,r,s,e[4],11,1272893353),s=rd(s,l,a,r,e[7],16,-155497632),r=rd(r,s,l,a,e[10],23,-1094730640),a=rd(a,r,s,l,e[13],4,681279174),l=rd(l,a,r,s,e[0],11,-358537222),s=rd(s,l,a,r,e[3],16,-722521979),r=rd(r,s,l,a,e[6],23,76029189),a=rd(a,r,s,l,e[9],4,-640364487),l=rd(l,a,r,s,e[12],11,-421815835),s=rd(s,l,a,r,e[15],16,530742520),a=nd(a,r=rd(r,s,l,a,e[2],23,-995338651),s,l,e[0],6,-198630844),l=nd(l,a,r,s,e[7],10,1126891415),s=nd(s,l,a,r,e[14],15,-1416354905),r=nd(r,s,l,a,e[5],21,-57434055),a=nd(a,r,s,l,e[12],6,1700485571),l=nd(l,a,r,s,e[3],10,-1894986606),s=nd(s,l,a,r,e[10],15,-1051523),r=nd(r,s,l,a,e[1],21,-2054922799),a=nd(a,r,s,l,e[8],6,1873313359),l=nd(l,a,r,s,e[15],10,-30611744),s=nd(s,l,a,r,e[6],15,-1560198380),r=nd(r,s,l,a,e[13],21,1309151649),a=nd(a,r,s,l,e[4],6,-145523070),l=nd(l,a,r,s,e[11],10,-1120210379),s=nd(s,l,a,r,e[2],15,718787259),r=nd(r,s,l,a,e[9],21,-343485551),t[0]=Cg(a,t[0]),t[1]=Cg(r,t[1]),t[2]=Cg(s,t[2]),t[3]=Cg(l,t[3])}function oP(t,e,a,r,s,l){return e=Cg(Cg(e,t),Cg(r,l)),Cg(e<<s|e>>>32-s,a)}function td(t,e,a,r,s,l,h){return oP(e&a|~e&r,t,e,s,l,h)}function ad(t,e,a,r,s,l,h){return oP(e&r|a&~r,t,e,s,l,h)}function rd(t,e,a,r,s,l,h){return oP(e^a^r,t,e,s,l,h)}function nd(t,e,a,r,s,l,h){return oP(a^(e|~r),t,e,s,l,h)}function qJ(t){var e,a=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)w5(r,cPe(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(w5(r,s),e=0;e<16;e++)s[e]=0;return s[14]=8*a,w5(r,s),r}function cPe(t){var e,a=[];for(e=0;e<64;e+=4)a[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return a}Xw=Kn.atob.bind(Kn),$M=Kn.btoa.bind(Kn);var zZ="0123456789abcdef".split("");function dPe(t){for(var e="",a=0;a<4;a++)e+=zZ[t>>8*a+4&15]+zZ[t>>8*a&15];return e}function hPe(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function KM(t){return qJ(t).map(hPe).join("")}var fPe=function(t){for(var e=0;e<t.length;e++)t[e]=dPe(t[e]);return t.join("")}(qJ("hello"))!="5d41402abc4b2a76b9719d911017c592";function Cg(t,e){if(fPe){var a=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(a>>16)<<16|65535&a}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function WM(t,e){var a,r,s,l;if(t!==a){for(var h=(s=t,l=1+(256/t.length>>0),new Array(l+1).join(s)),n=[],w=0;w<256;w++)n[w]=w;var T=0;for(w=0;w<256;w++){var E=n[w];T=(T+E+h.charCodeAt(w))%256,n[w]=n[T],n[T]=E}a=t,r=n}else n=r;var z=e.length,k=0,U=0,Z="";for(w=0;w<z;w++)U=(U+(E=n[k=(k+1)%256]))%256,n[k]=n[U],n[U]=E,h=n[(n[k]+n[U])%256],Z+=String.fromCharCode(e.charCodeAt(w)^h);return Z}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var OZ={print:4,modify:8,copy:16,"annot-forms":32};function R_(t,e,a,r){this.v=1,this.r=2;var s=192;t.forEach(function(n){if(OZ.perm!==void 0)throw new Error("Invalid permission: "+n);s+=OZ[n]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var l=(e+this.padding).substr(0,32),h=(a+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,h),this.P=-(1+(255^s)),this.encryptionKey=KM(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=WM(this.encryptionKey,this.padding)}function T_(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",a=t.length,r=0;r<a;r++){var s=t.charCodeAt(r);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=t[r]}return e}function DZ(t){if(Ls(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(a,r,s){if(s=s||!1,typeof a!="string"||typeof r!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(a)||(e[a]={});var l=Math.random().toString(35);return e[a][l]=[r,!!s],l},this.unsubscribe=function(a){for(var r in e)if(e[r][a])return delete e[r][a],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(a){if(e.hasOwnProperty(a)){var r=Array.prototype.slice.call(arguments,1),s=[];for(var l in e[a]){var h=e[a][l];try{h[0].apply(t,r)}catch(n){Kn.console&&io.error("jsPDF PubSub Error",n.message,n)}h[1]&&s.push(l)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function C2(t){if(!(this instanceof C2))return new C2(t);var e="opacity,stroke-opacity".split(",");for(var a in t)t.hasOwnProperty(a)&&e.indexOf(a)>=0&&(this[a]=t[a]);this.id="",this.objectNumber=-1}function HJ(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function GA(t,e,a,r,s){if(!(this instanceof GA))return new GA(t,e,a,r,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=a,HJ.call(this,r,s)}function z_(t,e,a,r,s){if(!(this instanceof z_))return new z_(t,e,a,r,s);this.boundingBox=t,this.xStep=e,this.yStep=a,this.stream="",this.cloneIndex=0,HJ.call(this,r,s)}function jn(t){var e,a=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],s=arguments[2],l=arguments[3],h=[],n=1,w=16,T="S",E=null;Ls(t=t||{})==="object"&&(a=t.orientation,r=t.unit||r,s=t.format||s,l=t.compress||t.compressPdf||l,(E=t.encryption||null)!==null&&(E.userPassword=E.userPassword||"",E.ownerPassword=E.ownerPassword||"",E.userPermissions=E.userPermissions||[]),n=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(w=t.floatPrecision),T=t.defaultPathOperation||"S"),h=t.filters||(l===!0?["FlateEncode"]:h),r=r||"mm",a=(""+(a||"P")).toLowerCase();var z=t.putOnlyUsedFonts||!1,k={},U={internal:{},__private__:{}};U.__private__.PubSub=DZ;var Z="1.3",q=U.__private__.getPdfVersion=function(){return Z};U.__private__.setPdfVersion=function(oe){Z=oe};var $={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};U.__private__.getPageFormats=function(){return $};var J=U.__private__.getPageFormat=function(oe){return $[oe]};s=s||"a4";var ie={COMPAT:"compat",ADVANCED:"advanced"},de=ie.COMPAT;function ge(){this.saveGraphicsState(),Rt(new Oe(ca,0,0,-ca,0,$l()*ca).toString()+" cm"),this.setFontSize(this.getFontSize()/ca),T="n",de=ie.ADVANCED}function he(){this.restoreGraphicsState(),T="S",de=ie.COMPAT}var Ae=U.__private__.combineFontStyleAndFontWeight=function(oe,Ke){if(oe=="bold"&&Ke=="normal"||oe=="bold"&&Ke==400||oe=="normal"&&Ke=="italic"||oe=="bold"&&Ke=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ke&&(oe=Ke==400||Ke==="normal"?oe==="italic"?"italic":"normal":Ke!=700&&Ke!=="bold"||oe!=="normal"?(Ke==700?"bold":Ke)+""+oe:"bold"),oe};U.advancedAPI=function(oe){var Ke=de===ie.COMPAT;return Ke&&ge.call(this),typeof oe!="function"||(oe(this),Ke&&he.call(this)),this},U.compatAPI=function(oe){var Ke=de===ie.ADVANCED;return Ke&&he.call(this),typeof oe!="function"||(oe(this),Ke&&ge.call(this)),this},U.isAdvancedAPI=function(){return de===ie.ADVANCED};var me,Re=function(oe){if(de!==ie.ADVANCED)throw new Error(oe+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},be=U.roundToPrecision=U.__private__.roundToPrecision=function(oe,Ke){var Dt=e||Ke;if(isNaN(oe)||isNaN(Dt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return oe.toFixed(Dt).replace(/0+$/,"")};me=U.hpf=U.__private__.hpf=typeof w=="number"?function(oe){if(isNaN(oe))throw new Error("Invalid argument passed to jsPDF.hpf");return be(oe,w)}:w==="smart"?function(oe){if(isNaN(oe))throw new Error("Invalid argument passed to jsPDF.hpf");return be(oe,oe>-1&&oe<1?16:5)}:function(oe){if(isNaN(oe))throw new Error("Invalid argument passed to jsPDF.hpf");return be(oe,16)};var De=U.f2=U.__private__.f2=function(oe){if(isNaN(oe))throw new Error("Invalid argument passed to jsPDF.f2");return be(oe,2)},ne=U.__private__.f3=function(oe){if(isNaN(oe))throw new Error("Invalid argument passed to jsPDF.f3");return be(oe,3)},ye=U.scale=U.__private__.scale=function(oe){if(isNaN(oe))throw new Error("Invalid argument passed to jsPDF.scale");return de===ie.COMPAT?oe*ca:de===ie.ADVANCED?oe:void 0},Me=function(oe){return de===ie.COMPAT?$l()-oe:de===ie.ADVANCED?oe:void 0},ze=function(oe){return ye(Me(oe))};U.__private__.setPrecision=U.setPrecision=function(oe){typeof parseInt(oe,10)=="number"&&(e=parseInt(oe,10))};var Le,Ie="00000000000000000000000000000000",qe=U.__private__.getFileId=function(){return Ie},ke=U.__private__.setFileId=function(oe){return Ie=oe!==void 0&&/^[a-fA-F0-9]{32}$/.test(oe)?oe.toUpperCase():Ie.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),E!==null&&(lo=new R_(E.userPermissions,E.userPassword,E.ownerPassword,Ie)),Ie};U.setFileId=function(oe){return ke(oe),this},U.getFileId=function(){return qe()};var tt=U.__private__.convertDateToPDFDate=function(oe){var Ke=oe.getTimezoneOffset(),Dt=Ke<0?"+":"-",Wt=Math.floor(Math.abs(Ke/60)),ha=Math.abs(Ke%60),Da=[Dt,$e(Wt),"'",$e(ha),"'"].join("");return["D:",oe.getFullYear(),$e(oe.getMonth()+1),$e(oe.getDate()),$e(oe.getHours()),$e(oe.getMinutes()),$e(oe.getSeconds()),Da].join("")},Ue=U.__private__.convertPDFDateToDate=function(oe){var Ke=parseInt(oe.substr(2,4),10),Dt=parseInt(oe.substr(6,2),10)-1,Wt=parseInt(oe.substr(8,2),10),ha=parseInt(oe.substr(10,2),10),Da=parseInt(oe.substr(12,2),10),rr=parseInt(oe.substr(14,2),10);return new Date(Ke,Dt,Wt,ha,Da,rr,0)},He=U.__private__.setCreationDate=function(oe){var Ke;if(oe===void 0&&(oe=new Date),oe instanceof Date)Ke=tt(oe);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(oe))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ke=oe}return Le=Ke},Ce=U.__private__.getCreationDate=function(oe){var Ke=Le;return oe==="jsDate"&&(Ke=Ue(Le)),Ke};U.setCreationDate=function(oe){return He(oe),this},U.getCreationDate=function(oe){return Ce(oe)};var Se,$e=U.__private__.padd2=function(oe){return("0"+parseInt(oe)).slice(-2)},ft=U.__private__.padd2Hex=function(oe){return("00"+(oe=oe.toString())).substr(oe.length)},Je=0,wt=[],it=[],ct=0,_e=[],Jt=[],Zt=!1,Pa=it,Bt=function(){Je=0,ct=0,it=[],wt=[],_e=[],$t=kt(),qt=kt()};U.__private__.setCustomOutputDestination=function(oe){Zt=!0,Pa=oe};var la=function(oe){Zt||(Pa=oe)};U.__private__.resetCustomOutputDestination=function(){Zt=!1,Pa=it};var Rt=U.__private__.out=function(oe){return oe=oe.toString(),ct+=oe.length+1,Pa.push(oe),Pa},yr=U.__private__.write=function(oe){return Rt(arguments.length===1?oe.toString():Array.prototype.join.call(arguments," "))},za=U.__private__.getArrayBuffer=function(oe){for(var Ke=oe.length,Dt=new ArrayBuffer(Ke),Wt=new Uint8Array(Dt);Ke--;)Wt[Ke]=oe.charCodeAt(Ke);return Dt},Va=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];U.__private__.getStandardFonts=function(){return Va};var er=t.fontSize||16;U.__private__.setFontSize=U.setFontSize=function(oe){return er=de===ie.ADVANCED?oe/ca:oe,this};var cr,ur=U.__private__.getFontSize=U.getFontSize=function(){return de===ie.COMPAT?er:er*ca},Pr=t.R2L||!1;U.__private__.setR2L=U.setR2L=function(oe){return Pr=oe,this},U.__private__.getR2L=U.getR2L=function(){return Pr};var ka,jr=U.__private__.setZoomMode=function(oe){var Ke=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(oe))cr=oe;else if(isNaN(oe)){if(Ke.indexOf(oe)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+oe+'" is not recognized.');cr=oe}else cr=parseInt(oe,10)};U.__private__.getZoomMode=function(){return cr};var pn,Dn=U.__private__.setPageMode=function(oe){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(oe)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+oe+'" is not recognized.');ka=oe};U.__private__.getPageMode=function(){return ka};var Rn=U.__private__.setLayoutMode=function(oe){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(oe)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+oe+'" is not recognized.');pn=oe};U.__private__.getLayoutMode=function(){return pn},U.__private__.setDisplayMode=U.setDisplayMode=function(oe,Ke,Dt){return jr(oe),Rn(Ke),Dn(Dt),this};var va={title:"",subject:"",author:"",keywords:"",creator:""};U.__private__.getDocumentProperty=function(oe){if(Object.keys(va).indexOf(oe)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return va[oe]},U.__private__.getDocumentProperties=function(){return va},U.__private__.setDocumentProperties=U.setProperties=U.setDocumentProperties=function(oe){for(var Ke in va)va.hasOwnProperty(Ke)&&oe[Ke]&&(va[Ke]=oe[Ke]);return this},U.__private__.setDocumentProperty=function(oe,Ke){if(Object.keys(va).indexOf(oe)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return va[oe]=Ke};var Wa,ca,Qa,gr,Zn,Mn={},mn={},en=[],Er={},As={},Bi={},Qi={},Oo=null,Ni=0,fn=[],ui=new DZ(U),Ec=t.hotfixes||[],Us={},Xt={},xe=[],Oe=function oe(Ke,Dt,Wt,ha,Da,rr){if(!(this instanceof oe))return new oe(Ke,Dt,Wt,ha,Da,rr);isNaN(Ke)&&(Ke=1),isNaN(Dt)&&(Dt=0),isNaN(Wt)&&(Wt=0),isNaN(ha)&&(ha=1),isNaN(Da)&&(Da=0),isNaN(rr)&&(rr=0),this._matrix=[Ke,Dt,Wt,ha,Da,rr]};Object.defineProperty(Oe.prototype,"sx",{get:function(){return this._matrix[0]},set:function(oe){this._matrix[0]=oe}}),Object.defineProperty(Oe.prototype,"shy",{get:function(){return this._matrix[1]},set:function(oe){this._matrix[1]=oe}}),Object.defineProperty(Oe.prototype,"shx",{get:function(){return this._matrix[2]},set:function(oe){this._matrix[2]=oe}}),Object.defineProperty(Oe.prototype,"sy",{get:function(){return this._matrix[3]},set:function(oe){this._matrix[3]=oe}}),Object.defineProperty(Oe.prototype,"tx",{get:function(){return this._matrix[4]},set:function(oe){this._matrix[4]=oe}}),Object.defineProperty(Oe.prototype,"ty",{get:function(){return this._matrix[5]},set:function(oe){this._matrix[5]=oe}}),Object.defineProperty(Oe.prototype,"a",{get:function(){return this._matrix[0]},set:function(oe){this._matrix[0]=oe}}),Object.defineProperty(Oe.prototype,"b",{get:function(){return this._matrix[1]},set:function(oe){this._matrix[1]=oe}}),Object.defineProperty(Oe.prototype,"c",{get:function(){return this._matrix[2]},set:function(oe){this._matrix[2]=oe}}),Object.defineProperty(Oe.prototype,"d",{get:function(){return this._matrix[3]},set:function(oe){this._matrix[3]=oe}}),Object.defineProperty(Oe.prototype,"e",{get:function(){return this._matrix[4]},set:function(oe){this._matrix[4]=oe}}),Object.defineProperty(Oe.prototype,"f",{get:function(){return this._matrix[5]},set:function(oe){this._matrix[5]=oe}}),Object.defineProperty(Oe.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Oe.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Oe.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Oe.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Oe.prototype.join=function(oe){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(me).join(oe)},Oe.prototype.multiply=function(oe){var Ke=oe.sx*this.sx+oe.shy*this.shx,Dt=oe.sx*this.shy+oe.shy*this.sy,Wt=oe.shx*this.sx+oe.sy*this.shx,ha=oe.shx*this.shy+oe.sy*this.sy,Da=oe.tx*this.sx+oe.ty*this.shx+this.tx,rr=oe.tx*this.shy+oe.ty*this.sy+this.ty;return new Oe(Ke,Dt,Wt,ha,Da,rr)},Oe.prototype.decompose=function(){var oe=this.sx,Ke=this.shy,Dt=this.shx,Wt=this.sy,ha=this.tx,Da=this.ty,rr=Math.sqrt(oe*oe+Ke*Ke),wr=(oe/=rr)*Dt+(Ke/=rr)*Wt;Dt-=oe*wr,Wt-=Ke*wr;var $r=Math.sqrt(Dt*Dt+Wt*Wt);return wr/=$r,oe*(Wt/=$r)<Ke*(Dt/=$r)&&(oe=-oe,Ke=-Ke,wr=-wr,rr=-rr),{scale:new Oe(rr,0,0,$r,0,0),translate:new Oe(1,0,0,1,ha,Da),rotate:new Oe(oe,Ke,-Ke,oe,0,0),skew:new Oe(1,0,wr,1,0,0)}},Oe.prototype.toString=function(oe){return this.join(" ")},Oe.prototype.inversed=function(){var oe=this.sx,Ke=this.shy,Dt=this.shx,Wt=this.sy,ha=this.tx,Da=this.ty,rr=1/(oe*Wt-Ke*Dt),wr=Wt*rr,$r=-Ke*rr,Sn=-Dt*rr,Nn=oe*rr;return new Oe(wr,$r,Sn,Nn,-wr*ha-Sn*Da,-$r*ha-Nn*Da)},Oe.prototype.applyToPoint=function(oe){var Ke=oe.x*this.sx+oe.y*this.shx+this.tx,Dt=oe.x*this.shy+oe.y*this.sy+this.ty;return new pu(Ke,Dt)},Oe.prototype.applyToRectangle=function(oe){var Ke=this.applyToPoint(oe),Dt=this.applyToPoint(new pu(oe.x+oe.w,oe.y+oe.h));return new mu(Ke.x,Ke.y,Dt.x-Ke.x,Dt.y-Ke.y)},Oe.prototype.clone=function(){var oe=this.sx,Ke=this.shy,Dt=this.shx,Wt=this.sy,ha=this.tx,Da=this.ty;return new Oe(oe,Ke,Dt,Wt,ha,Da)},U.Matrix=Oe;var rt=U.matrixMult=function(oe,Ke){return Ke.multiply(oe)},_t=new Oe(1,0,0,1,0,0);U.unitMatrix=U.identityMatrix=_t;var yt=function(oe,Ke){if(!As[oe]){var Dt=(Ke instanceof GA?"Sh":"P")+(Object.keys(Er).length+1).toString(10);Ke.id=Dt,As[oe]=Dt,Er[Dt]=Ke,ui.publish("addPattern",Ke)}};U.ShadingPattern=GA,U.TilingPattern=z_,U.addShadingPattern=function(oe,Ke){return Re("addShadingPattern()"),yt(oe,Ke),this},U.beginTilingPattern=function(oe){Re("beginTilingPattern()"),Hl(oe.boundingBox[0],oe.boundingBox[1],oe.boundingBox[2]-oe.boundingBox[0],oe.boundingBox[3]-oe.boundingBox[1],oe.matrix)},U.endTilingPattern=function(oe,Ke){Re("endTilingPattern()"),Ke.stream=Jt[Se].join(`
`),yt(oe,Ke),ui.publish("endTilingPattern",Ke),xe.pop().restore()};var bt=U.__private__.newObject=function(){var oe=kt();return Et(oe,!0),oe},kt=U.__private__.newObjectDeferred=function(){return Je++,wt[Je]=function(){return ct},Je},Et=function(oe,Ke){return Ke=typeof Ke=="boolean"&&Ke,wt[oe]=ct,Ke&&Rt(oe+" 0 obj"),oe},Ht=U.__private__.newAdditionalObject=function(){var oe={objId:kt(),content:""};return _e.push(oe),oe},$t=kt(),qt=kt(),Ra=U.__private__.decodeColorString=function(oe){var Ke=oe.split(" ");if(Ke.length!==2||Ke[1]!=="g"&&Ke[1]!=="G")Ke.length===5&&(Ke[4]==="k"||Ke[4]==="K")&&(Ke=[(1-Ke[0])*(1-Ke[3]),(1-Ke[1])*(1-Ke[3]),(1-Ke[2])*(1-Ke[3]),"r"]);else{var Dt=parseFloat(Ke[0]);Ke=[Dt,Dt,Dt,"r"]}for(var Wt="#",ha=0;ha<3;ha++)Wt+=("0"+Math.floor(255*parseFloat(Ke[ha])).toString(16)).slice(-2);return Wt},Ma=U.__private__.encodeColorString=function(oe){var Ke;typeof oe=="string"&&(oe={ch1:oe});var Dt=oe.ch1,Wt=oe.ch2,ha=oe.ch3,Da=oe.ch4,rr=oe.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Dt=="string"&&Dt.charAt(0)!=="#"){var wr=new ZJ(Dt);if(wr.ok)Dt=wr.toHex();else if(!/^\d*\.?\d*$/.test(Dt))throw new Error('Invalid color "'+Dt+'" passed to jsPDF.encodeColorString.')}if(typeof Dt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Dt)&&(Dt="#"+Dt[1]+Dt[1]+Dt[2]+Dt[2]+Dt[3]+Dt[3]),typeof Dt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Dt)){var $r=parseInt(Dt.substr(1),16);Dt=$r>>16&255,Wt=$r>>8&255,ha=255&$r}if(Wt===void 0||Da===void 0&&Dt===Wt&&Wt===ha)if(typeof Dt=="string")Ke=Dt+" "+rr[0];else switch(oe.precision){case 2:Ke=De(Dt/255)+" "+rr[0];break;case 3:default:Ke=ne(Dt/255)+" "+rr[0]}else if(Da===void 0||Ls(Da)==="object"){if(Da&&!isNaN(Da.a)&&Da.a===0)return Ke=["1.","1.","1.",rr[1]].join(" ");if(typeof Dt=="string")Ke=[Dt,Wt,ha,rr[1]].join(" ");else switch(oe.precision){case 2:Ke=[De(Dt/255),De(Wt/255),De(ha/255),rr[1]].join(" ");break;default:case 3:Ke=[ne(Dt/255),ne(Wt/255),ne(ha/255),rr[1]].join(" ")}}else if(typeof Dt=="string")Ke=[Dt,Wt,ha,Da,rr[2]].join(" ");else switch(oe.precision){case 2:Ke=[De(Dt),De(Wt),De(ha),De(Da),rr[2]].join(" ");break;case 3:default:Ke=[ne(Dt),ne(Wt),ne(ha),ne(Da),rr[2]].join(" ")}return Ke},Ba=U.__private__.getFilters=function(){return h},_r=U.__private__.putStream=function(oe){var Ke=(oe=oe||{}).data||"",Dt=oe.filters||Ba(),Wt=oe.alreadyAppliedFilters||[],ha=oe.addLength1||!1,Da=Ke.length,rr=oe.objectId,wr=function(es){return es};if(E!==null&&rr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");E!==null&&(wr=lo.encryptor(rr,0));var $r={};Dt===!0&&(Dt=["FlateEncode"]);var Sn=oe.additionalKeyValues||[],Nn=($r=jn.API.processDataByFilters!==void 0?jn.API.processDataByFilters(Ke,Dt):{data:Ke,reverseChain:[]}).reverseChain+(Array.isArray(Wt)?Wt.join(" "):Wt.toString());if($r.data.length!==0&&(Sn.push({key:"Length",value:$r.data.length}),ha===!0&&Sn.push({key:"Length1",value:Da})),Nn.length!=0)if(Nn.split("/").length-1==1)Sn.push({key:"Filter",value:Nn});else{Sn.push({key:"Filter",value:"["+Nn+"]"});for(var mi=0;mi<Sn.length;mi+=1)if(Sn[mi].key==="DecodeParms"){for(var Ss=[],Cs=0;Cs<$r.reverseChain.split("/").length-1;Cs+=1)Ss.push("null");Ss.push(Sn[mi].value),Sn[mi].value="["+Ss.join(" ")+"]"}}Rt("<<");for(var Js=0;Js<Sn.length;Js++)Rt("/"+Sn[Js].key+" "+Sn[Js].value);Rt(">>"),$r.data.length!==0&&(Rt("stream"),Rt(wr($r.data)),Rt("endstream"))},Nr=U.__private__.putPage=function(oe){var Ke=oe.number,Dt=oe.data,Wt=oe.objId,ha=oe.contentsObjId;Et(Wt,!0),Rt("<</Type /Page"),Rt("/Parent "+oe.rootDictionaryObjId+" 0 R"),Rt("/Resources "+oe.resourceDictionaryObjId+" 0 R"),Rt("/MediaBox ["+parseFloat(me(oe.mediaBox.bottomLeftX))+" "+parseFloat(me(oe.mediaBox.bottomLeftY))+" "+me(oe.mediaBox.topRightX)+" "+me(oe.mediaBox.topRightY)+"]"),oe.cropBox!==null&&Rt("/CropBox ["+me(oe.cropBox.bottomLeftX)+" "+me(oe.cropBox.bottomLeftY)+" "+me(oe.cropBox.topRightX)+" "+me(oe.cropBox.topRightY)+"]"),oe.bleedBox!==null&&Rt("/BleedBox ["+me(oe.bleedBox.bottomLeftX)+" "+me(oe.bleedBox.bottomLeftY)+" "+me(oe.bleedBox.topRightX)+" "+me(oe.bleedBox.topRightY)+"]"),oe.trimBox!==null&&Rt("/TrimBox ["+me(oe.trimBox.bottomLeftX)+" "+me(oe.trimBox.bottomLeftY)+" "+me(oe.trimBox.topRightX)+" "+me(oe.trimBox.topRightY)+"]"),oe.artBox!==null&&Rt("/ArtBox ["+me(oe.artBox.bottomLeftX)+" "+me(oe.artBox.bottomLeftY)+" "+me(oe.artBox.topRightX)+" "+me(oe.artBox.topRightY)+"]"),typeof oe.userUnit=="number"&&oe.userUnit!==1&&Rt("/UserUnit "+oe.userUnit),ui.publish("putPage",{objId:Wt,pageContext:fn[Ke],pageNumber:Ke,page:Dt}),Rt("/Contents "+ha+" 0 R"),Rt(">>"),Rt("endobj");var Da=Dt.join(`
`);return de===ie.ADVANCED&&(Da+=`
Q`),Et(ha,!0),_r({data:Da,filters:Ba(),objectId:ha}),Rt("endobj"),Wt},Vr=U.__private__.putPages=function(){var oe,Ke,Dt=[];for(oe=1;oe<=Ni;oe++)fn[oe].objId=kt(),fn[oe].contentsObjId=kt();for(oe=1;oe<=Ni;oe++)Dt.push(Nr({number:oe,data:Jt[oe],objId:fn[oe].objId,contentsObjId:fn[oe].contentsObjId,mediaBox:fn[oe].mediaBox,cropBox:fn[oe].cropBox,bleedBox:fn[oe].bleedBox,trimBox:fn[oe].trimBox,artBox:fn[oe].artBox,userUnit:fn[oe].userUnit,rootDictionaryObjId:$t,resourceDictionaryObjId:qt}));Et($t,!0),Rt("<</Type /Pages");var Wt="/Kids [";for(Ke=0;Ke<Ni;Ke++)Wt+=Dt[Ke]+" 0 R ";Rt(Wt+"]"),Rt("/Count "+Ni),Rt(">>"),Rt("endobj"),ui.publish("postPutPages")},Gr=function(oe){ui.publish("putFont",{font:oe,out:Rt,newObject:bt,putStream:_r}),oe.isAlreadyPutted!==!0&&(oe.objectNumber=bt(),Rt("<<"),Rt("/Type /Font"),Rt("/BaseFont /"+T_(oe.postScriptName)),Rt("/Subtype /Type1"),typeof oe.encoding=="string"&&Rt("/Encoding /"+oe.encoding),Rt("/FirstChar 32"),Rt("/LastChar 255"),Rt(">>"),Rt("endobj"))},zn=function(){for(var oe in Mn)Mn.hasOwnProperty(oe)&&(z===!1||z===!0&&k.hasOwnProperty(oe))&&Gr(Mn[oe])},Jn=function(oe){oe.objectNumber=bt();var Ke=[];Ke.push({key:"Type",value:"/XObject"}),Ke.push({key:"Subtype",value:"/Form"}),Ke.push({key:"BBox",value:"["+[me(oe.x),me(oe.y),me(oe.x+oe.width),me(oe.y+oe.height)].join(" ")+"]"}),Ke.push({key:"Matrix",value:"["+oe.matrix.toString()+"]"});var Dt=oe.pages[1].join(`
`);_r({data:Dt,additionalKeyValues:Ke,objectId:oe.objectNumber}),Rt("endobj")},qr=function(){for(var oe in Us)Us.hasOwnProperty(oe)&&Jn(Us[oe])},yn=function(oe,Ke){var Dt,Wt=[],ha=1/(Ke-1);for(Dt=0;Dt<1;Dt+=ha)Wt.push(Dt);if(Wt.push(1),oe[0].offset!=0){var Da={offset:0,color:oe[0].color};oe.unshift(Da)}if(oe[oe.length-1].offset!=1){var rr={offset:1,color:oe[oe.length-1].color};oe.push(rr)}for(var wr="",$r=0,Sn=0;Sn<Wt.length;Sn++){for(Dt=Wt[Sn];Dt>oe[$r+1].offset;)$r++;var Nn=oe[$r].offset,mi=(Dt-Nn)/(oe[$r+1].offset-Nn),Ss=oe[$r].color,Cs=oe[$r+1].color;wr+=ft(Math.round((1-mi)*Ss[0]+mi*Cs[0]).toString(16))+ft(Math.round((1-mi)*Ss[1]+mi*Cs[1]).toString(16))+ft(Math.round((1-mi)*Ss[2]+mi*Cs[2]).toString(16))}return wr.trim()},Hr=function(oe,Ke){Ke||(Ke=21);var Dt=bt(),Wt=yn(oe.colors,Ke),ha=[];ha.push({key:"FunctionType",value:"0"}),ha.push({key:"Domain",value:"[0.0 1.0]"}),ha.push({key:"Size",value:"["+Ke+"]"}),ha.push({key:"BitsPerSample",value:"8"}),ha.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ha.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),_r({data:Wt,additionalKeyValues:ha,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Dt}),Rt("endobj"),oe.objectNumber=bt(),Rt("<< /ShadingType "+oe.type),Rt("/ColorSpace /DeviceRGB");var Da="/Coords ["+me(parseFloat(oe.coords[0]))+" "+me(parseFloat(oe.coords[1]))+" ";oe.type===2?Da+=me(parseFloat(oe.coords[2]))+" "+me(parseFloat(oe.coords[3])):Da+=me(parseFloat(oe.coords[2]))+" "+me(parseFloat(oe.coords[3]))+" "+me(parseFloat(oe.coords[4]))+" "+me(parseFloat(oe.coords[5])),Rt(Da+="]"),oe.matrix&&Rt("/Matrix ["+oe.matrix.toString()+"]"),Rt("/Function "+Dt+" 0 R"),Rt("/Extend [true true]"),Rt(">>"),Rt("endobj")},In=function(oe,Ke){var Dt=kt(),Wt=bt();Ke.push({resourcesOid:Dt,objectOid:Wt}),oe.objectNumber=Wt;var ha=[];ha.push({key:"Type",value:"/Pattern"}),ha.push({key:"PatternType",value:"1"}),ha.push({key:"PaintType",value:"1"}),ha.push({key:"TilingType",value:"1"}),ha.push({key:"BBox",value:"["+oe.boundingBox.map(me).join(" ")+"]"}),ha.push({key:"XStep",value:me(oe.xStep)}),ha.push({key:"YStep",value:me(oe.yStep)}),ha.push({key:"Resources",value:Dt+" 0 R"}),oe.matrix&&ha.push({key:"Matrix",value:"["+oe.matrix.toString()+"]"}),_r({data:oe.stream,additionalKeyValues:ha,objectId:oe.objectNumber}),Rt("endobj")},Vi=function(oe){var Ke;for(Ke in Er)Er.hasOwnProperty(Ke)&&(Er[Ke]instanceof GA?Hr(Er[Ke]):Er[Ke]instanceof z_&&In(Er[Ke],oe))},Gi=function(oe){for(var Ke in oe.objectNumber=bt(),Rt("<<"),oe)switch(Ke){case"opacity":Rt("/ca "+De(oe[Ke]));break;case"stroke-opacity":Rt("/CA "+De(oe[Ke]))}Rt(">>"),Rt("endobj")},_s=function(){var oe;for(oe in Bi)Bi.hasOwnProperty(oe)&&Gi(Bi[oe])},vs=function(){for(var oe in Rt("/XObject <<"),Us)Us.hasOwnProperty(oe)&&Us[oe].objectNumber>=0&&Rt("/"+oe+" "+Us[oe].objectNumber+" 0 R");ui.publish("putXobjectDict"),Rt(">>")},Do=function(){lo.oid=bt(),Rt("<<"),Rt("/Filter /Standard"),Rt("/V "+lo.v),Rt("/R "+lo.r),Rt("/U <"+lo.toHexString(lo.U)+">"),Rt("/O <"+lo.toHexString(lo.O)+">"),Rt("/P "+lo.P),Rt(">>"),Rt("endobj")},ws=function(){for(var oe in Rt("/Font <<"),Mn)Mn.hasOwnProperty(oe)&&(z===!1||z===!0&&k.hasOwnProperty(oe))&&Rt("/"+oe+" "+Mn[oe].objectNumber+" 0 R");Rt(">>")},ks=function(){if(Object.keys(Er).length>0){for(var oe in Rt("/Shading <<"),Er)Er.hasOwnProperty(oe)&&Er[oe]instanceof GA&&Er[oe].objectNumber>=0&&Rt("/"+oe+" "+Er[oe].objectNumber+" 0 R");ui.publish("putShadingPatternDict"),Rt(">>")}},nc=function(oe){if(Object.keys(Er).length>0){for(var Ke in Rt("/Pattern <<"),Er)Er.hasOwnProperty(Ke)&&Er[Ke]instanceof U.TilingPattern&&Er[Ke].objectNumber>=0&&Er[Ke].objectNumber<oe&&Rt("/"+Ke+" "+Er[Ke].objectNumber+" 0 R");ui.publish("putTilingPatternDict"),Rt(">>")}},Yo=function(){if(Object.keys(Bi).length>0){var oe;for(oe in Rt("/ExtGState <<"),Bi)Bi.hasOwnProperty(oe)&&Bi[oe].objectNumber>=0&&Rt("/"+oe+" "+Bi[oe].objectNumber+" 0 R");ui.publish("putGStateDict"),Rt(">>")}},zi=function(oe){Et(oe.resourcesOid,!0),Rt("<<"),Rt("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ws(),ks(),nc(oe.objectOid),Yo(),vs(),Rt(">>"),Rt("endobj")},Gl=function(){var oe=[];zn(),_s(),qr(),Vi(oe),ui.publish("putResources"),oe.forEach(zi),zi({resourcesOid:qt,objectOid:Number.MAX_SAFE_INTEGER}),ui.publish("postPutResources")},Mo=function(){ui.publish("putAdditionalObjects");for(var oe=0;oe<_e.length;oe++){var Ke=_e[oe];Et(Ke.objId,!0),Rt(Ke.content),Rt("endobj")}ui.publish("postPutAdditionalObjects")},_d=function(oe){mn[oe.fontName]=mn[oe.fontName]||{},mn[oe.fontName][oe.fontStyle]=oe.id},Nc=function(oe,Ke,Dt,Wt,ha){var Da={id:"F"+(Object.keys(Mn).length+1).toString(10),postScriptName:oe,fontName:Ke,fontStyle:Dt,encoding:Wt,isStandardFont:ha||!1,metadata:{}};return ui.publish("addFont",{font:Da,instance:this}),Mn[Da.id]=Da,_d(Da),Da.id},ah=function(oe){for(var Ke=0,Dt=Va.length;Ke<Dt;Ke++){var Wt=Nc.call(this,oe[Ke][0],oe[Ke][1],oe[Ke][2],Va[Ke][3],!0);z===!1&&(k[Wt]=!0);var ha=oe[Ke][0].split("-");_d({id:Wt,fontName:ha[0],fontStyle:ha[1]||""})}ui.publish("addFonts",{fonts:Mn,dictionary:mn})},du=function(oe){return oe.foo=function(){try{return oe.apply(this,arguments)}catch(Wt){var Ke=Wt.stack||"";~Ke.indexOf(" at ")&&(Ke=Ke.split(" at ")[1]);var Dt="Error in function "+Ke.split(`
`)[0].split("<")[0]+": "+Wt.message;if(!Kn.console)throw new Error(Dt);Kn.console.error(Dt,Wt),Kn.alert&&alert(Dt)}},oe.foo.bar=oe,oe.foo},Vc=function(oe,Ke){var Dt,Wt,ha,Da,rr,wr,$r,Sn,Nn;if(ha=(Ke=Ke||{}).sourceEncoding||"Unicode",rr=Ke.outputEncoding,(Ke.autoencode||rr)&&Mn[Wa].metadata&&Mn[Wa].metadata[ha]&&Mn[Wa].metadata[ha].encoding&&(Da=Mn[Wa].metadata[ha].encoding,!rr&&Mn[Wa].encoding&&(rr=Mn[Wa].encoding),!rr&&Da.codePages&&(rr=Da.codePages[0]),typeof rr=="string"&&(rr=Da[rr]),rr)){for($r=!1,wr=[],Dt=0,Wt=oe.length;Dt<Wt;Dt++)(Sn=rr[oe.charCodeAt(Dt)])?wr.push(String.fromCharCode(Sn)):wr.push(oe[Dt]),wr[Dt].charCodeAt(0)>>8&&($r=!0);oe=wr.join("")}for(Dt=oe.length;$r===void 0&&Dt!==0;)oe.charCodeAt(Dt-1)>>8&&($r=!0),Dt--;if(!$r)return oe;for(wr=Ke.noBOM?[]:[254,255],Dt=0,Wt=oe.length;Dt<Wt;Dt++){if((Nn=(Sn=oe.charCodeAt(Dt))>>8)>>8)throw new Error("Character at position "+Dt+" of string '"+oe+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");wr.push(Nn),wr.push(Sn-(Nn<<8))}return String.fromCharCode.apply(void 0,wr)},hl=U.__private__.pdfEscape=U.pdfEscape=function(oe,Ke){return Vc(oe,Ke).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Xs=U.__private__.beginPage=function(oe){Jt[++Ni]=[],fn[Ni]={objId:0,contentsObjId:0,userUnit:Number(n),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(oe[0]),topRightY:Number(oe[1])}},hu(Ni),la(Jt[Se])},Io=function(oe,Ke){var Dt,Wt,ha;switch(a=Ke||a,typeof oe=="string"&&(Dt=J(oe.toLowerCase()),Array.isArray(Dt)&&(Wt=Dt[0],ha=Dt[1])),Array.isArray(oe)&&(Wt=oe[0]*ca,ha=oe[1]*ca),isNaN(Wt)&&(Wt=s[0],ha=s[1]),(Wt>14400||ha>14400)&&(io.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Wt=Math.min(14400,Wt),ha=Math.min(14400,ha)),s=[Wt,ha],a.substr(0,1)){case"l":ha>Wt&&(s=[ha,Wt]);break;case"p":Wt>ha&&(s=[ha,Wt])}Xs(s),Rd(bi),Rt(Cl),Vh!==0&&Rt(Vh+" J"),ko!==0&&Rt(ko+" j"),ui.publish("addPage",{pageNumber:Ni})},jl=function(oe){oe>0&&oe<=Ni&&(Jt.splice(oe,1),fn.splice(oe,1),Ni--,Se>Ni&&(Se=Ni),this.setPage(Se))},hu=function(oe){oe>0&&oe<=Ni&&(Se=oe)},oo=U.__private__.getNumberOfPages=U.getNumberOfPages=function(){return Jt.length-1},Lo=function(oe,Ke,Dt){var Wt,ha=void 0;return Dt=Dt||{},oe=oe!==void 0?oe:Mn[Wa].fontName,Ke=Ke!==void 0?Ke:Mn[Wa].fontStyle,Wt=oe.toLowerCase(),mn[Wt]!==void 0&&mn[Wt][Ke]!==void 0?ha=mn[Wt][Ke]:mn[oe]!==void 0&&mn[oe][Ke]!==void 0?ha=mn[oe][Ke]:Dt.disableWarning===!1&&io.warn("Unable to look up font label for font '"+oe+"', '"+Ke+"'. Refer to getFontList() for available fonts."),ha||Dt.noFallback||(ha=mn.times[Ke])==null&&(ha=mn.times.normal),ha},vd=U.__private__.putInfo=function(){var oe=bt(),Ke=function(Wt){return Wt};for(var Dt in E!==null&&(Ke=lo.encryptor(oe,0)),Rt("<<"),Rt("/Producer ("+hl(Ke("jsPDF "+jn.version))+")"),va)va.hasOwnProperty(Dt)&&va[Dt]&&Rt("/"+Dt.substr(0,1).toUpperCase()+Dt.substr(1)+" ("+hl(Ke(va[Dt]))+")");Rt("/CreationDate ("+hl(Ke(Le))+")"),Rt(">>"),Rt("endobj")},Fu=U.__private__.putCatalog=function(oe){var Ke=(oe=oe||{}).rootDictionaryObjId||$t;switch(bt(),Rt("<<"),Rt("/Type /Catalog"),Rt("/Pages "+Ke+" 0 R"),cr||(cr="fullwidth"),cr){case"fullwidth":Rt("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Rt("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Rt("/OpenAction [3 0 R /Fit]");break;case"original":Rt("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Dt=""+cr;Dt.substr(Dt.length-1)==="%"&&(cr=parseInt(cr)/100),typeof cr=="number"&&Rt("/OpenAction [3 0 R /XYZ null null "+De(cr)+"]")}switch(pn||(pn="continuous"),pn){case"continuous":Rt("/PageLayout /OneColumn");break;case"single":Rt("/PageLayout /SinglePage");break;case"two":case"twoleft":Rt("/PageLayout /TwoColumnLeft");break;case"tworight":Rt("/PageLayout /TwoColumnRight")}ka&&Rt("/PageMode /"+ka),ui.publish("putCatalog"),Rt(">>"),Rt("endobj")},df=U.__private__.putTrailer=function(){Rt("trailer"),Rt("<<"),Rt("/Size "+(Je+1)),Rt("/Root "+Je+" 0 R"),Rt("/Info "+(Je-1)+" 0 R"),E!==null&&Rt("/Encrypt "+lo.oid+" 0 R"),Rt("/ID [ <"+Ie+"> <"+Ie+"> ]"),Rt(">>")},Zl=U.__private__.putHeader=function(){Rt("%PDF-"+Z),Rt("%")},Fo=U.__private__.putXRef=function(){var oe="0000000000";Rt("xref"),Rt("0 "+(Je+1)),Rt("0000000000 65535 f ");for(var Ke=1;Ke<=Je;Ke++)typeof wt[Ke]=="function"?Rt((oe+wt[Ke]()).slice(-10)+" 00000 n "):wt[Ke]!==void 0?Rt((oe+wt[Ke]).slice(-10)+" 00000 n "):Rt("0000000000 00000 n ")},Uu=U.__private__.buildDocument=function(){Bt(),la(it),ui.publish("buildDocument"),Zl(),Vr(),Mo(),Gl(),E!==null&&Do(),vd(),Fu();var oe=ct;return Fo(),df(),Rt("startxref"),Rt(""+oe),Rt("%%EOF"),la(Jt[Se]),it.join(`
`)},rh=U.__private__.getBlob=function(oe){return new Blob([za(oe)],{type:"application/pdf"})},Xo=U.output=U.__private__.output=du(function(oe,Ke){switch(typeof(Ke=Ke||{})=="string"?Ke={filename:Ke}:Ke.filename=Ke.filename||"generated.pdf",oe){case void 0:return Uu();case"save":U.save(Ke.filename);break;case"arraybuffer":return za(Uu());case"blob":return rh(Uu());case"bloburi":case"bloburl":if(Kn.URL!==void 0&&typeof Kn.URL.createObjectURL=="function")return Kn.URL&&Kn.URL.createObjectURL(rh(Uu()))||void 0;io.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Dt="",Wt=Uu();try{Dt=$M(Wt)}catch{Dt=$M(unescape(encodeURIComponent(Wt)))}return"data:application/pdf;filename="+Ke.filename+";base64,"+Dt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Kn)==="[object Window]"){var ha="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Da=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ke.pdfObjectUrl&&(ha=Ke.pdfObjectUrl,Da="");var rr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ha+'"'+Da+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ke)+");<\/script></body></html>",wr=Kn.open();return wr!==null&&wr.document.write(rr),wr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Kn)==="[object Window]"){var $r='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ke.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ke.filename+'" width="500px" height="400px" /></body></html>',Sn=Kn.open();if(Sn!==null){Sn.document.write($r);var Nn=this;Sn.document.documentElement.querySelector("#pdfViewer").onload=function(){Sn.document.title=Ke.filename,Sn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Nn.output("bloburl"))}}return Sn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Kn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var mi='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ke)+'"></iframe></body></html>',Ss=Kn.open();if(Ss!==null&&(Ss.document.write(mi),Ss.document.title=Ke.filename),Ss||typeof safari>"u")return Ss;break;case"datauri":case"dataurl":return Kn.document.location.href=this.output("datauristring",Ke);default:return null}}),bn=function(oe){return Array.isArray(Ec)===!0&&Ec.indexOf(oe)>-1};switch(r){case"pt":ca=1;break;case"mm":ca=72/25.4;break;case"cm":ca=72/2.54;break;case"in":ca=72;break;case"px":ca=bn("px_scaling")==1?.75:96/72;break;case"pc":case"em":ca=12;break;case"ex":ca=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);ca=r}var lo=null;He(),ke();var hr=function(oe){return E!==null?lo.encryptor(oe,0):function(Ke){return Ke}},zc=U.__private__.getPageInfo=U.getPageInfo=function(oe){if(isNaN(oe)||oe%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:fn[oe].objId,pageNumber:oe,pageContext:fn[oe]}},gn=U.__private__.getPageInfoByObjId=function(oe){if(isNaN(oe)||oe%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ke in fn)if(fn[Ke].objId===oe)break;return zc(Ke)},nh=U.__private__.getCurrentPageInfo=U.getCurrentPageInfo=function(){return{objId:fn[Se].objId,pageNumber:Se,pageContext:fn[Se]}};U.addPage=function(){return Io.apply(this,arguments),this},U.setPage=function(){return hu.apply(this,arguments),la.call(this,Jt[Se]),this},U.insertPage=function(oe){return this.addPage(),this.movePage(Se,oe),this},U.movePage=function(oe,Ke){var Dt,Wt;if(oe>Ke){Dt=Jt[oe],Wt=fn[oe];for(var ha=oe;ha>Ke;ha--)Jt[ha]=Jt[ha-1],fn[ha]=fn[ha-1];Jt[Ke]=Dt,fn[Ke]=Wt,this.setPage(Ke)}else if(oe<Ke){Dt=Jt[oe],Wt=fn[oe];for(var Da=oe;Da<Ke;Da++)Jt[Da]=Jt[Da+1],fn[Da]=fn[Da+1];Jt[Ke]=Dt,fn[Ke]=Wt,this.setPage(Ke)}return this},U.deletePage=function(){return jl.apply(this,arguments),this},U.__private__.text=U.text=function(oe,Ke,Dt,Wt,ha){var Da,rr,wr,$r,Sn,Nn,mi,Ss,Cs,Js=(Wt=Wt||{}).scope||this;if(typeof oe=="number"&&typeof Ke=="number"&&(typeof Dt=="string"||Array.isArray(Dt))){var es=Dt;Dt=Ke,Ke=oe,oe=es}if(arguments[3]instanceof Oe?(Re("The transform parameter of text() with a Matrix value"),Cs=ha):(wr=arguments[4],$r=arguments[5],Ls(mi=arguments[3])==="object"&&mi!==null||(typeof wr=="string"&&($r=wr,wr=null),typeof mi=="string"&&($r=mi,mi=null),typeof mi=="number"&&(wr=mi,mi=null),Wt={flags:mi,angle:wr,align:$r})),isNaN(Ke)||isNaN(Dt)||oe==null)throw new Error("Invalid arguments passed to jsPDF.text");if(oe.length===0)return Js;var br="",ir=!1,fl=typeof Wt.lineHeightFactor=="number"?Wt.lineHeightFactor:Li,Rr=Js.internal.scaleFactor;function yu(Xn){return Xn=Xn.split("	").join(Array(Wt.TabLen||9).join(" ")),hl(Xn,mi)}function Kl(Xn){for(var ai,qi=Xn.concat(),is=[],Xl=qi.length;Xl--;)typeof(ai=qi.shift())=="string"?is.push(ai):Array.isArray(Xn)&&(ai.length===1||ai[1]===void 0&&ai[2]===void 0)?is.push(ai[0]):is.push([ai[0],ai[1],ai[2]]);return is}function vr(Xn,ai){var qi;if(typeof Xn=="string")qi=ai(Xn)[0];else if(Array.isArray(Xn)){for(var is,Xl,Fc=Xn.concat(),el=[],Jl=Fc.length;Jl--;)typeof(is=Fc.shift())=="string"?el.push(ai(is)[0]):Array.isArray(is)&&typeof is[0]=="string"&&(Xl=ai(is[0],is[1],is[2]),el.push([Xl[0],Xl[1],Xl[2]]));qi=el}return qi}var sh=!1,Wl=!0;if(typeof oe=="string")sh=!0;else if(Array.isArray(oe)){var uc=oe.concat();rr=[];for(var Cd,bs=uc.length;bs--;)(typeof(Cd=uc.shift())!="string"||Array.isArray(Cd)&&typeof Cd[0]!="string")&&(Wl=!1);sh=Wl}if(sh===!1)throw new Error('Type of text must be string or Array. "'+oe+'" is not recognized.');typeof oe=="string"&&(oe=oe.match(/[\r?\n]/)?oe.split(/\r\n|\r|\n/g):[oe]);var Ai=er/Js.internal.scaleFactor,cc=Ai*(fl-1);switch(Wt.baseline){case"bottom":Dt-=cc;break;case"top":Dt+=Ai-cc;break;case"hanging":Dt+=Ai-2*cc;break;case"middle":Dt+=Ai/2-cc}if((Nn=Wt.maxWidth||0)>0&&(typeof oe=="string"?oe=Js.splitTextToSize(oe,Nn):Object.prototype.toString.call(oe)==="[object Array]"&&(oe=oe.reduce(function(Xn,ai){return Xn.concat(Js.splitTextToSize(ai,Nn))},[]))),Da={text:oe,x:Ke,y:Dt,options:Wt,mutex:{pdfEscape:hl,activeFontKey:Wa,fonts:Mn,activeFontSize:er}},ui.publish("preProcessText",Da),oe=Da.text,wr=(Wt=Da.options).angle,!(Cs instanceof Oe)&&wr&&typeof wr=="number"){wr*=Math.PI/180,Wt.rotationDirection===0&&(wr=-wr),de===ie.ADVANCED&&(wr=-wr);var Na=Math.cos(wr),bd=Math.sin(wr);Cs=new Oe(Na,bd,-bd,Na,0,0)}else wr&&wr instanceof Oe&&(Cs=wr);de!==ie.ADVANCED||Cs||(Cs=_t),(Sn=Wt.charSpace||ql)!==void 0&&(br+=me(ye(Sn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ss=Wt.horizontalScale)!==void 0&&(br+=me(100*Ss)+` Tz
`),Wt.lang;var qs=-1,co=Wt.renderingMode!==void 0?Wt.renderingMode:Wt.stroke,pf=Js.internal.getCurrentPageInfo().pageContext;switch(co){case 0:case!1:case"fill":qs=0;break;case 1:case!0:case"stroke":qs=1;break;case 2:case"fillThenStroke":qs=2;break;case 3:case"invisible":qs=3;break;case 4:case"fillAndAddForClipping":qs=4;break;case 5:case"strokeAndAddPathForClipping":qs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":qs=6;break;case 7:case"addToPathForClipping":qs=7}var zh=pf.usedRenderingMode!==void 0?pf.usedRenderingMode:-1;qs!==-1?br+=qs+` Tr
`:zh!==-1&&(br+=`0 Tr
`),qs!==-1&&(pf.usedRenderingMode=qs),$r=Wt.align||"left";var ho,Os=er*fl,bl=Js.internal.pageSize.getWidth(),Oc=Mn[Wa];Sn=Wt.charSpace||ql,Nn=Wt.maxWidth||0,mi=Object.assign({autoencode:!0,noBOM:!0},Wt.flags);var Yl=[],oh=function(Xn){return Js.getStringUnitWidth(Xn,{font:Oc,charSpace:Sn,fontSize:er,doKerning:!1})*er/Rr};if(Object.prototype.toString.call(oe)==="[object Array]"){var xl;rr=Kl(oe),$r!=="left"&&(ho=rr.map(oh));var Ro,xd=0;if($r==="right"){Ke-=ho[0],oe=[],bs=rr.length;for(var Dc=0;Dc<bs;Dc++)Dc===0?(Ro=Jo(Ke),xl=us(Dt)):(Ro=ye(xd-ho[Dc]),xl=-Os),oe.push([rr[Dc],Ro,xl]),xd=ho[Dc]}else if($r==="center"){Ke-=ho[0]/2,oe=[],bs=rr.length;for(var Pl=0;Pl<bs;Pl++)Pl===0?(Ro=Jo(Ke),xl=us(Dt)):(Ro=ye((xd-ho[Pl])/2),xl=-Os),oe.push([rr[Pl],Ro,xl]),xd=ho[Pl]}else if($r==="left"){oe=[],bs=rr.length;for(var dc=0;dc<bs;dc++)oe.push(rr[dc])}else if($r==="justify"&&Oc.encoding==="Identity-H"){oe=[],bs=rr.length,Nn=Nn!==0?Nn:bl;for(var gu=0,Zi=0;Zi<bs;Zi++)if(xl=Zi===0?us(Dt):-Os,Ro=Zi===0?Jo(Ke):gu,Zi<bs-1){var mf=ye((Nn-ho[Zi])/(rr[Zi].split(" ").length-1)),Qs=rr[Zi].split(" ");oe.push([Qs[0]+" ",Ro,xl]),gu=0;for(var fo=1;fo<Qs.length;fo++){var Pd=(oh(Qs[fo-1]+" "+Qs[fo])-oh(Qs[fo]))*Rr+mf;fo==Qs.length-1?oe.push([Qs[fo],Pd,0]):oe.push([Qs[fo]+" ",Pd,0]),gu-=Pd}}else oe.push([rr[Zi],Ro,xl]);oe.push(["",gu,0])}else{if($r!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(oe=[],bs=rr.length,Nn=Nn!==0?Nn:bl,Zi=0;Zi<bs;Zi++)xl=Zi===0?us(Dt):-Os,Ro=Zi===0?Jo(Ke):0,Zi<bs-1?Yl.push(me(ye((Nn-ho[Zi])/(rr[Zi].split(" ").length-1)))):Yl.push(0),oe.push([rr[Zi],Ro,xl])}}var Ed=typeof Wt.R2L=="boolean"?Wt.R2L:Pr;Ed===!0&&(oe=vr(oe,function(Xn,ai,qi){return[Xn.split("").reverse().join(""),ai,qi]})),Da={text:oe,x:Ke,y:Dt,options:Wt,mutex:{pdfEscape:hl,activeFontKey:Wa,fonts:Mn,activeFontSize:er}},ui.publish("postProcessText",Da),oe=Da.text,ir=Da.mutex.isHex||!1;var eo=Mn[Wa].encoding;eo!=="WinAnsiEncoding"&&eo!=="StandardEncoding"||(oe=vr(oe,function(Xn,ai,qi){return[yu(Xn),ai,qi]})),rr=Kl(oe),oe=[];for(var Mc,hc,Au,Ic=0,_u=1,Lc=Array.isArray(rr[0])?_u:Ic,fc="",Bu=function(Xn,ai,qi){var is="";return qi instanceof Oe?(qi=typeof Wt.angle=="number"?rt(qi,new Oe(1,0,0,1,Xn,ai)):rt(new Oe(1,0,0,1,Xn,ai),qi),de===ie.ADVANCED&&(qi=rt(new Oe(1,0,0,-1,0,0),qi)),is=qi.join(" ")+` Tm
`):is=me(Xn)+" "+me(ai)+` Td
`,is},Bo=0;Bo<rr.length;Bo++){switch(fc="",Lc){case _u:Au=(ir?"<":"(")+rr[Bo][0]+(ir?">":")"),Mc=parseFloat(rr[Bo][1]),hc=parseFloat(rr[Bo][2]);break;case Ic:Au=(ir?"<":"(")+rr[Bo]+(ir?">":")"),Mc=Jo(Ke),hc=us(Dt)}Yl!==void 0&&Yl[Bo]!==void 0&&(fc=Yl[Bo]+` Tw
`),Bo===0?oe.push(fc+Bu(Mc,hc,Cs)+Au):Lc===Ic?oe.push(fc+Au):Lc===_u&&oe.push(fc+Bu(Mc,hc,Cs)+Au)}oe=Lc===Ic?oe.join(` Tj
T* `):oe.join(` Tj
`),oe+=` Tj
`;var cs=`BT
/`;return cs+=Wa+" "+er+` Tf
`,cs+=me(er*fl)+` TL
`,cs+=ji+`
`,cs+=br,cs+=oe,Rt(cs+="ET"),k[Wa]=!0,Js};var Tn=U.__private__.clip=U.clip=function(oe){return Rt(oe==="evenodd"?"W*":"W"),this};U.clipEvenOdd=function(){return Tn("evenodd")},U.__private__.discardPath=U.discardPath=function(){return Rt("n"),this};var Bs=U.__private__.isValidStyle=function(oe){var Ke=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(oe)!==-1&&(Ke=!0),Ke};U.__private__.setDefaultPathOperation=U.setDefaultPathOperation=function(oe){return Bs(oe)&&(T=oe),this};var ic=U.__private__.getStyle=U.getStyle=function(oe){var Ke=T;switch(oe){case"D":case"S":Ke="S";break;case"F":Ke="f";break;case"FD":case"DF":Ke="B";break;case"f":case"f*":case"B":case"B*":Ke=oe}return Ke},sc=U.close=function(){return Rt("h"),this};U.stroke=function(){return Rt("S"),this},U.fill=function(oe){return Xa("f",oe),this},U.fillEvenOdd=function(oe){return Xa("f*",oe),this},U.fillStroke=function(oe){return Xa("B",oe),this},U.fillStrokeEvenOdd=function(oe){return Xa("B*",oe),this};var Xa=function(oe,Ke){Ls(Ke)==="object"?Gs(Ke,oe):Rt(oe)},an=function(oe){oe===null||de===ie.ADVANCED&&oe===void 0||(oe=ic(oe),Rt(oe))};function An(oe,Ke,Dt,Wt,ha){var Da=new z_(Ke||this.boundingBox,Dt||this.xStep,Wt||this.yStep,this.gState,ha||this.matrix);Da.stream=this.stream;var rr=oe+"$$"+this.cloneIndex+++"$$";return yt(rr,Da),Da}var Gs=function(oe,Ke){var Dt=As[oe.key],Wt=Er[Dt];if(Wt instanceof GA)Rt("q"),Rt(wd(Ke)),Wt.gState&&U.setGState(Wt.gState),Rt(oe.matrix.toString()+" cm"),Rt("/"+Dt+" sh"),Rt("Q");else if(Wt instanceof z_){var ha=new Oe(1,0,0,-1,0,$l());oe.matrix&&(ha=ha.multiply(oe.matrix||_t),Dt=An.call(Wt,oe.key,oe.boundingBox,oe.xStep,oe.yStep,ha).id),Rt("q"),Rt("/Pattern cs"),Rt("/"+Dt+" scn"),Wt.gState&&U.setGState(Wt.gState),Rt(Ke),Rt("Q")}},wd=function(oe){switch(oe){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},un=U.moveTo=function(oe,Ke){return Rt(me(ye(oe))+" "+me(ze(Ke))+" m"),this},Uo=U.lineTo=function(oe,Ke){return Rt(me(ye(oe))+" "+me(ze(Ke))+" l"),this},fu=U.curveTo=function(oe,Ke,Dt,Wt,ha,Da){return Rt([me(ye(oe)),me(ze(Ke)),me(ye(Dt)),me(ze(Wt)),me(ye(ha)),me(ze(Da)),"c"].join(" ")),this};U.__private__.line=U.line=function(oe,Ke,Dt,Wt,ha){if(isNaN(oe)||isNaN(Ke)||isNaN(Dt)||isNaN(Wt)||!Bs(ha))throw new Error("Invalid arguments passed to jsPDF.line");return de===ie.COMPAT?this.lines([[Dt-oe,Wt-Ke]],oe,Ke,[1,1],ha||"S"):this.lines([[Dt-oe,Wt-Ke]],oe,Ke,[1,1]).stroke()},U.__private__.lines=U.lines=function(oe,Ke,Dt,Wt,ha,Da){var rr,wr,$r,Sn,Nn,mi,Ss,Cs,Js,es,br,ir;if(typeof oe=="number"&&(ir=Dt,Dt=Ke,Ke=oe,oe=ir),Wt=Wt||[1,1],Da=Da||!1,isNaN(Ke)||isNaN(Dt)||!Array.isArray(oe)||!Array.isArray(Wt)||!Bs(ha)||typeof Da!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(un(Ke,Dt),rr=Wt[0],wr=Wt[1],Sn=oe.length,es=Ke,br=Dt,$r=0;$r<Sn;$r++)(Nn=oe[$r]).length===2?(es=Nn[0]*rr+es,br=Nn[1]*wr+br,Uo(es,br)):(mi=Nn[0]*rr+es,Ss=Nn[1]*wr+br,Cs=Nn[2]*rr+es,Js=Nn[3]*wr+br,es=Nn[4]*rr+es,br=Nn[5]*wr+br,fu(mi,Ss,Cs,Js,es,br));return Da&&sc(),an(ha),this},U.path=function(oe){for(var Ke=0;Ke<oe.length;Ke++){var Dt=oe[Ke],Wt=Dt.c;switch(Dt.op){case"m":un(Wt[0],Wt[1]);break;case"l":Uo(Wt[0],Wt[1]);break;case"c":fu.apply(this,Wt);break;case"h":sc()}}return this},U.__private__.rect=U.rect=function(oe,Ke,Dt,Wt,ha){if(isNaN(oe)||isNaN(Ke)||isNaN(Dt)||isNaN(Wt)||!Bs(ha))throw new Error("Invalid arguments passed to jsPDF.rect");return de===ie.COMPAT&&(Wt=-Wt),Rt([me(ye(oe)),me(ze(Ke)),me(ye(Dt)),me(ye(Wt)),"re"].join(" ")),an(ha),this},U.__private__.triangle=U.triangle=function(oe,Ke,Dt,Wt,ha,Da,rr){if(isNaN(oe)||isNaN(Ke)||isNaN(Dt)||isNaN(Wt)||isNaN(ha)||isNaN(Da)||!Bs(rr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Dt-oe,Wt-Ke],[ha-Dt,Da-Wt],[oe-ha,Ke-Da]],oe,Ke,[1,1],rr,!0),this},U.__private__.roundedRect=U.roundedRect=function(oe,Ke,Dt,Wt,ha,Da,rr){if(isNaN(oe)||isNaN(Ke)||isNaN(Dt)||isNaN(Wt)||isNaN(ha)||isNaN(Da)||!Bs(rr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var wr=4/3*(Math.SQRT2-1);return ha=Math.min(ha,.5*Dt),Da=Math.min(Da,.5*Wt),this.lines([[Dt-2*ha,0],[ha*wr,0,ha,Da-Da*wr,ha,Da],[0,Wt-2*Da],[0,Da*wr,-ha*wr,Da,-ha,Da],[2*ha-Dt,0],[-ha*wr,0,-ha,-Da*wr,-ha,-Da],[0,2*Da-Wt],[0,-Da*wr,ha*wr,-Da,ha,-Da]],oe+ha,Ke,[1,1],rr,!0),this},U.__private__.ellipse=U.ellipse=function(oe,Ke,Dt,Wt,ha){if(isNaN(oe)||isNaN(Ke)||isNaN(Dt)||isNaN(Wt)||!Bs(ha))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Da=4/3*(Math.SQRT2-1)*Dt,rr=4/3*(Math.SQRT2-1)*Wt;return un(oe+Dt,Ke),fu(oe+Dt,Ke-rr,oe+Da,Ke-Wt,oe,Ke-Wt),fu(oe-Da,Ke-Wt,oe-Dt,Ke-rr,oe-Dt,Ke),fu(oe-Dt,Ke+rr,oe-Da,Ke+Wt,oe,Ke+Wt),fu(oe+Da,Ke+Wt,oe+Dt,Ke+rr,oe+Dt,Ke),an(ha),this},U.__private__.circle=U.circle=function(oe,Ke,Dt,Wt){if(isNaN(oe)||isNaN(Ke)||isNaN(Dt)||!Bs(Wt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(oe,Ke,Dt,Dt,Wt)},U.setFont=function(oe,Ke,Dt){return Dt&&(Ke=Ae(Ke,Dt)),Wa=Lo(oe,Ke,{disableWarning:!1}),this};var Rs=U.__private__.getFont=U.getFont=function(){return Mn[Lo.apply(U,arguments)]};U.__private__.getFontList=U.getFontList=function(){var oe,Ke,Dt={};for(oe in mn)if(mn.hasOwnProperty(oe))for(Ke in Dt[oe]=[],mn[oe])mn[oe].hasOwnProperty(Ke)&&Dt[oe].push(Ke);return Dt},U.addFont=function(oe,Ke,Dt,Wt,ha){var Da=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Da.indexOf(arguments[3])!==-1?ha=arguments[3]:arguments[3]&&Da.indexOf(arguments[3])==-1&&(Dt=Ae(Dt,Wt)),ha=ha||"Identity-H",Nc.call(this,oe,Ke,Dt,ha)};var Li,bi=t.lineWidth||.200025,uo=U.__private__.getLineWidth=U.getLineWidth=function(){return bi},Rd=U.__private__.setLineWidth=U.setLineWidth=function(oe){return bi=oe,Rt(me(ye(oe))+" w"),this};U.__private__.setLineDash=jn.API.setLineDash=jn.API.setLineDashPattern=function(oe,Ke){if(oe=oe||[],Ke=Ke||0,isNaN(Ke)||!Array.isArray(oe))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return oe=oe.map(function(Dt){return me(ye(Dt))}).join(" "),Ke=me(ye(Ke)),Rt("["+oe+"] "+Ke+" d"),this};var ih=U.__private__.getLineHeight=U.getLineHeight=function(){return er*Li};U.__private__.getLineHeight=U.getLineHeight=function(){return er*Li};var oc=U.__private__.setLineHeightFactor=U.setLineHeightFactor=function(oe){return typeof(oe=oe||1.15)=="number"&&(Li=oe),this},lc=U.__private__.getLineHeightFactor=U.getLineHeightFactor=function(){return Li};oc(t.lineHeight);var Jo=U.__private__.getHorizontalCoordinate=function(oe){return ye(oe)},us=U.__private__.getVerticalCoordinate=function(oe){return de===ie.ADVANCED?oe:fn[Se].mediaBox.topRightY-fn[Se].mediaBox.bottomLeftY-ye(oe)},ku=U.__private__.getHorizontalCoordinateString=U.getHorizontalCoordinateString=function(oe){return me(Jo(oe))},Ts=U.__private__.getVerticalCoordinateString=U.getVerticalCoordinateString=function(oe){return me(us(oe))},Cl=t.strokeColor||"0 G";U.__private__.getStrokeColor=U.getDrawColor=function(){return Ra(Cl)},U.__private__.setStrokeColor=U.setDrawColor=function(oe,Ke,Dt,Wt){return Cl=Ma({ch1:oe,ch2:Ke,ch3:Dt,ch4:Wt,pdfColorType:"draw",precision:2}),Rt(Cl),this};var Qo=t.fillColor||"0 g";U.__private__.getFillColor=U.getFillColor=function(){return Ra(Qo)},U.__private__.setFillColor=U.setFillColor=function(oe,Ke,Dt,Wt){return Qo=Ma({ch1:oe,ch2:Ke,ch3:Dt,ch4:Wt,pdfColorType:"fill",precision:2}),Rt(Qo),this};var ji=t.textColor||"0 g",js=U.__private__.getTextColor=U.getTextColor=function(){return Ra(ji)};U.__private__.setTextColor=U.setTextColor=function(oe,Ke,Dt,Wt){return ji=Ma({ch1:oe,ch2:Ke,ch3:Dt,ch4:Wt,pdfColorType:"text",precision:3}),this};var ql=t.charSpace,ns=U.__private__.getCharSpace=U.getCharSpace=function(){return parseFloat(ql||0)};U.__private__.setCharSpace=U.setCharSpace=function(oe){if(isNaN(oe))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ql=oe,this};var Vh=0;U.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},U.__private__.setLineCap=U.setLineCap=function(oe){var Ke=U.CapJoinStyles[oe];if(Ke===void 0)throw new Error("Line cap style of '"+oe+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Vh=Ke,Rt(Ke+" J"),this};var ko=0;U.__private__.setLineJoin=U.setLineJoin=function(oe){var Ke=U.CapJoinStyles[oe];if(Ke===void 0)throw new Error("Line join style of '"+oe+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ko=Ke,Rt(Ke+" j"),this},U.__private__.setLineMiterLimit=U.__private__.setMiterLimit=U.setLineMiterLimit=U.setMiterLimit=function(oe){if(oe=oe||0,isNaN(oe))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Rt(me(ye(oe))+" M"),this},U.GState=C2,U.setGState=function(oe){(oe=typeof oe=="string"?Bi[Qi[oe]]:Td(null,oe)).equals(Oo)||(Rt("/"+oe.id+" gs"),Oo=oe)};var Td=function(oe,Ke){if(!oe||!Qi[oe]){var Dt=!1;for(var Wt in Bi)if(Bi.hasOwnProperty(Wt)&&Bi[Wt].equals(Ke)){Dt=!0;break}if(Dt)Ke=Bi[Wt];else{var ha="GS"+(Object.keys(Bi).length+1).toString(10);Bi[ha]=Ke,Ke.id=ha}return oe&&(Qi[oe]=Ke.id),ui.publish("addGState",Ke),Ke}};U.addGState=function(oe,Ke){return Td(oe,Ke),this},U.saveGraphicsState=function(){return Rt("q"),en.push({key:Wa,size:er,color:ji}),this},U.restoreGraphicsState=function(){Rt("Q");var oe=en.pop();return Wa=oe.key,er=oe.size,ji=oe.color,Oo=null,this},U.setCurrentTransformationMatrix=function(oe){return Rt(oe.toString()+" cm"),this},U.comment=function(oe){return Rt("#"+oe),this};var pu=function(oe,Ke){var Dt=oe||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Dt},set:function(Da){isNaN(Da)||(Dt=parseFloat(Da))}});var Wt=Ke||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Wt},set:function(Da){isNaN(Da)||(Wt=parseFloat(Da))}});var ha="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ha},set:function(Da){ha=Da.toString()}}),this},mu=function(oe,Ke,Dt,Wt){pu.call(this,oe,Ke),this.type="rect";var ha=Dt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ha},set:function(rr){isNaN(rr)||(ha=parseFloat(rr))}});var Da=Wt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Da},set:function(rr){isNaN(rr)||(Da=parseFloat(rr))}}),this},Hf=function(){this.page=Ni,this.currentPage=Se,this.pages=Jt.slice(0),this.pagesContext=fn.slice(0),this.x=Qa,this.y=gr,this.matrix=Zn,this.width=Zs(Se),this.height=$l(Se),this.outputDestination=Pa,this.id="",this.objectNumber=-1};Hf.prototype.restore=function(){Ni=this.page,Se=this.currentPage,fn=this.pagesContext,Jt=this.pages,Qa=this.x,gr=this.y,Zn=this.matrix,hf(Se,this.width),ff(Se,this.height),Pa=this.outputDestination};var Hl=function(oe,Ke,Dt,Wt,ha){xe.push(new Hf),Ni=Se=0,Jt=[],Qa=oe,gr=Ke,Zn=ha,Xs([Dt,Wt])},Im=function(oe){if(Xt[oe])xe.pop().restore();else{var Ke=new Hf,Dt="Xo"+(Object.keys(Us).length+1).toString(10);Ke.id=Dt,Xt[oe]=Dt,Us[Dt]=Ke,ui.publish("addFormObject",Ke),xe.pop().restore()}};for(var Sd in U.beginFormObject=function(oe,Ke,Dt,Wt,ha){return Hl(oe,Ke,Dt,Wt,ha),this},U.endFormObject=function(oe){return Im(oe),this},U.doFormObject=function(oe,Ke){var Dt=Us[Xt[oe]];return Rt("q"),Rt(Ke.toString()+" cm"),Rt("/"+Dt.id+" Do"),Rt("Q"),this},U.getFormObject=function(oe){var Ke=Us[Xt[oe]];return{x:Ke.x,y:Ke.y,width:Ke.width,height:Ke.height,matrix:Ke.matrix}},U.save=function(oe,Ke){return oe=oe||"generated.pdf",(Ke=Ke||{}).returnPromise=Ke.returnPromise||!1,Ke.returnPromise===!1?(kA(rh(Uu()),oe),typeof kA.unload=="function"&&Kn.setTimeout&&setTimeout(kA.unload,911),this):new Promise(function(Dt,Wt){try{var ha=kA(rh(Uu()),oe);typeof kA.unload=="function"&&Kn.setTimeout&&setTimeout(kA.unload,911),Dt(ha)}catch(Da){Wt(Da.message)}})},jn.API)jn.API.hasOwnProperty(Sd)&&(Sd==="events"&&jn.API.events.length?function(oe,Ke){var Dt,Wt,ha;for(ha=Ke.length-1;ha!==-1;ha--)Dt=Ke[ha][0],Wt=Ke[ha][1],oe.subscribe.apply(oe,[Dt].concat(typeof Wt=="function"?[Wt]:Wt))}(ui,jn.API.events):U[Sd]=jn.API[Sd]);var Zs=U.getPageWidth=function(oe){return(fn[oe=oe||Se].mediaBox.topRightX-fn[oe].mediaBox.bottomLeftX)/ca},hf=U.setPageWidth=function(oe,Ke){fn[oe].mediaBox.topRightX=Ke*ca+fn[oe].mediaBox.bottomLeftX},$l=U.getPageHeight=function(oe){return(fn[oe=oe||Se].mediaBox.topRightY-fn[oe].mediaBox.bottomLeftY)/ca},ff=U.setPageHeight=function(oe,Ke){fn[oe].mediaBox.topRightY=Ke*ca+fn[oe].mediaBox.bottomLeftY};return U.internal={pdfEscape:hl,getStyle:ic,getFont:Rs,getFontSize:ur,getCharSpace:ns,getTextColor:js,getLineHeight:ih,getLineHeightFactor:lc,getLineWidth:uo,write:yr,getHorizontalCoordinate:Jo,getVerticalCoordinate:us,getCoordinateString:ku,getVerticalCoordinateString:Ts,collections:{},newObject:bt,newAdditionalObject:Ht,newObjectDeferred:kt,newObjectDeferredBegin:Et,getFilters:Ba,putStream:_r,events:ui,scaleFactor:ca,pageSize:{getWidth:function(){return Zs(Se)},setWidth:function(oe){hf(Se,oe)},getHeight:function(){return $l(Se)},setHeight:function(oe){ff(Se,oe)}},encryptionOptions:E,encryption:lo,getEncryptor:hr,output:Xo,getNumberOfPages:oo,pages:Jt,out:Rt,f2:De,f3:ne,getPageInfo:zc,getPageInfoByObjId:gn,getCurrentPageInfo:nh,getPDFVersion:q,Point:pu,Rectangle:mu,Matrix:Oe,hasHotfix:bn},Object.defineProperty(U.internal.pageSize,"width",{get:function(){return Zs(Se)},set:function(oe){hf(Se,oe)},enumerable:!0,configurable:!0}),Object.defineProperty(U.internal.pageSize,"height",{get:function(){return $l(Se)},set:function(oe){ff(Se,oe)},enumerable:!0,configurable:!0}),ah.call(U,Va),Wa="F1",Io(s,a),ui.publish("initialized"),U}R_.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},R_.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},R_.prototype.hexToBytes=function(t){for(var e=[],a=0;a<t.length;a+=2)e.push(String.fromCharCode(parseInt(t.substr(a,2),16)));return e.join("")},R_.prototype.processOwnerPassword=function(t,e){return WM(KM(e).substr(0,5),t)},R_.prototype.encryptor=function(t,e){var a=KM(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return WM(a,r)}},C2.prototype.equals=function(t){var e,a="id,objectNumber,equals";if(!t||Ls(t)!==Ls(this))return!1;var r=0;for(e in this)if(!(a.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&a.indexOf(e)<0&&r--;return r===0},jn.API={events:[]},jn.version="3.0.1";var Rl=jn.API,V4=1,x0=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},g_=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},li=function(t){return t.toFixed(2)},hg=function(t){return t.toFixed(5)};Rl.__acroform__={};var Nh=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},MZ=function(t){return t*V4},ym=function(t){var e=new KJ,a=Qr.internal.getHeight(t)||0,r=Qr.internal.getWidth(t)||0;return e.BBox=[0,0,Number(li(r)),Number(li(a))],e},pPe=Rl.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},mPe=Rl.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},yPe=Rl.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},Ul=Rl.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return yPe(t,e-1)},kl=Rl.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return pPe(t,e-1)},Bl=Rl.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return mPe(t,e-1)},gPe=Rl.__acroform__.calculateCoordinates=function(t,e){var a=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,s=t[0],l=t[1],h=t[2],n=t[3],w={};return w.lowerLeft_X=a(s)||0,w.lowerLeft_Y=r(l+n)||0,w.upperRight_X=a(s+h)||0,w.upperRight_Y=r(l)||0,[Number(li(w.lowerLeft_X)),Number(li(w.lowerLeft_Y)),Number(li(w.upperRight_X)),Number(li(w.upperRight_Y))]},APe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],a=t._V||t.DV,r=YM(t,a),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+li(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var l=ym(t);return l.scope=t.scope,l.stream=e.join(`
`),l}},YM=function(t,e){var a=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(ne){return ne.split(`
`)}):s.map(function(ne){return[ne]});var l=a,h=Qr.internal.getHeight(t)||0;h=h<0?-h:h;var n=Qr.internal.getWidth(t)||0;n=n<0?-n:n;var w=function(ne,ye,Me){if(ne+1<s.length){var ze=ye+" "+s[ne+1][0];return wC(ze,t,Me).width<=n-4}return!1};l++;e:for(;l>0;){e="",l--;var T,E,z=wC("3",t,l).height,k=t.multiline?h-l:(h-z)/2,U=k+=2,Z=0,q=0,$=0;if(l<=0){e=`(...) Tj
`,e+="% Width of Text: "+wC(e,t,l=12).width+", FieldWidth:"+n+`
`;break}for(var J="",ie=0,de=0;de<s.length;de++)if(s.hasOwnProperty(de)){var ge=!1;if(s[de].length!==1&&$!==s[de].length-1){if((z+2)*(ie+2)+2>h)continue e;J+=s[de][$],ge=!0,q=de,de--}else{J=(J+=s[de][$]+" ").substr(J.length-1)==" "?J.substr(0,J.length-1):J;var he=parseInt(de),Ae=w(he,J,l),me=de>=s.length-1;if(Ae&&!me){J+=" ",$=0;continue}if(Ae||me){if(me)q=he;else if(t.multiline&&(z+2)*(ie+2)+2>h)continue e}else{if(!t.multiline||(z+2)*(ie+2)+2>h)continue e;q=he}}for(var Re="",be=Z;be<=q;be++){var De=s[be];if(t.multiline){if(be===q){Re+=De[$]+" ",$=($+1)%De.length;continue}if(be===Z){Re+=De[De.length-1]+" ";continue}}Re+=De[0]+" "}switch(Re=Re.substr(Re.length-1)==" "?Re.substr(0,Re.length-1):Re,E=wC(Re,t,l).width,t.textAlign){case"right":T=n-E-2;break;case"center":T=(n-E)/2;break;case"left":default:T=2}e+=li(T)+" "+li(U)+` Td
`,e+="("+x0(Re)+`) Tj
`,e+=-li(T)+` 0 Td
`,U=-(l+2),E=0,Z=ge?q:q+1,ie++,J=""}break}return r.text=e,r.fontSize=l,r},wC=function(t,e,a){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(a),charSpace:0})*parseFloat(a);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(a),charSpace:0})*parseFloat(a)*1.5,width:s}},_Pe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},vPe=function(t,e){var a={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===a.type&&r.object===a.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(a)},wPe=function(t,e){for(var a in t)if(t.hasOwnProperty(a)){var r=a,s=t[a];e.internal.newObjectDeferredBegin(s.objId,!0),Ls(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete t[r]}},RPe=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Up.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(_Pe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");V4=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new WJ,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(a){a.internal.events.unsubscribe(a.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete a.internal.acroformPlugin.acroFormDictionaryRoot._eventID,a.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(a){a.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=a.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in r)if(r.hasOwnProperty(s)){var l=r[s];l.objId=void 0,l.hasAnnotation&&vPe(l,a)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(a){if(a.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");a.internal.write("/AcroForm "+a.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(a){(function(r,s){var l=!r;for(var h in r||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(h)){var n=r[h],w=[],T=n.Rect;if(n.Rect&&(n.Rect=gPe(n.Rect,s)),s.internal.newObjectDeferredBegin(n.objId,!0),n.DA=Qr.createDefaultAppearanceStream(n),Ls(n)==="object"&&typeof n.getKeyValueListForStream=="function"&&(w=n.getKeyValueListForStream()),n.Rect=T,n.hasAppearanceStream&&!n.appearanceStreamContent){var E=APe(n);w.push({key:"AP",value:"<</N "+E+">>"}),s.internal.acroformPlugin.xForms.push(E)}if(n.appearanceStreamContent){var z="";for(var k in n.appearanceStreamContent)if(n.appearanceStreamContent.hasOwnProperty(k)){var U=n.appearanceStreamContent[k];if(z+="/"+k+" ",z+="<<",Object.keys(U).length>=1||Array.isArray(U)){for(var h in U)if(U.hasOwnProperty(h)){var Z=U[h];typeof Z=="function"&&(Z=Z.call(s,n)),z+="/"+h+" "+Z+" ",s.internal.acroformPlugin.xForms.indexOf(Z)>=0||s.internal.acroformPlugin.xForms.push(Z)}}else typeof(Z=U)=="function"&&(Z=Z.call(s,n)),z+="/"+h+" "+Z,s.internal.acroformPlugin.xForms.indexOf(Z)>=0||s.internal.acroformPlugin.xForms.push(Z);z+=">>"}w.push({key:"AP",value:`<<
`+z+">>"})}s.internal.putStream({additionalKeyValues:w,objectId:n.objId}),s.internal.out("endobj")}l&&wPe(s.internal.acroformPlugin.xForms,s)})(a,t)}),t.internal.acroformPlugin.isInitialized=!0}},$J=Rl.__acroform__.arrayToPdfArray=function(t,e,a){var r=function(h){return h};if(Array.isArray(t)){for(var s="[",l=0;l<t.length;l++)switch(l!==0&&(s+=" "),Ls(t[l])){case"boolean":case"number":case"object":s+=t[l].toString();break;case"string":t[l].substr(0,1)!=="/"?(e!==void 0&&a&&(r=a.internal.getEncryptor(e)),s+="("+x0(r(t[l].toString()))+")"):s+=t[l].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},R5=function(t,e,a){var r=function(s){return s};return e!==void 0&&a&&(r=a.internal.getEncryptor(e)),(t=t||"").toString(),t="("+x0(r(t))+")"},Rm=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Rm.prototype.toString=function(){return this.objId+" 0 R"},Rm.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Rm.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(l){return l!="content"&&l!="appearanceStreamContent"&&l!="scope"&&l!="objId"&&l.substring(0,1)!="_"});for(var a in e)if(Object.getOwnPropertyDescriptor(this,e[a]).configurable===!1){var r=e[a],s=this[r];s&&(Array.isArray(s)?t.push({key:r,value:$J(s,this.objId,this.scope)}):s instanceof Rm?(s.scope=this.scope,t.push({key:r,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:r,value:s}))}return t};var KJ=function(){Rm.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(a){t=a.trim()},get:function(){return t||null}})};Nh(KJ,Rm);var WJ=function(){Rm.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var a=function(r){return r};return this.scope&&(a=this.scope.internal.getEncryptor(this.objId)),"("+x0(a(t))+")"}},set:function(a){t=a}})};Nh(WJ,Rm);var Up=function t(){Rm.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(J){if(isNaN(J))throw new Error('Invalid value "'+J+'" for attribute F supplied.');e=J}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ul(e,3)},set:function(J){J?this.F=kl(e,3):this.F=Bl(e,3)}});var a=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return a},set:function(J){if(isNaN(J))throw new Error('Invalid value "'+J+'" for attribute Ff supplied.');a=J}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(J){r=J!==void 0?J:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(J){r[0]=J}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(J){r[1]=J}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(J){r[2]=J}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(J){r[3]=J}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(J){switch(J){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=J;break;default:throw new Error('Invalid value "'+J+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof b2)return;l="FieldObject"+t.FieldNum++}var J=function(ie){return ie};return this.scope&&(J=this.scope.internal.getEncryptor(this.objId)),"("+x0(J(l))+")"},set:function(J){l=J.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function(J){l=J}});var h="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return h},set:function(J){h=J}});var n="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return n},set:function(J){n=J}});var w=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return w},set:function(J){w=J}});var T=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return T===void 0?50/V4:T},set:function(J){T=J}});var E="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return E},set:function(J){E=J}});var z="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!z||this instanceof b2||this instanceof r0))return R5(z,this.objId,this.scope)},set:function(J){J=J.toString(),z=J}});var k=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(k)return this instanceof Qu?k:R5(k,this.objId,this.scope)},set:function(J){J=J.toString(),k=this instanceof Qu?J:J.substr(0,1)==="("?g_(J.substr(1,J.length-2)):g_(J)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qu?g_(k.substr(1,k.length-1)):k},set:function(J){J=J.toString(),k=this instanceof Qu?"/"+J:J}});var U=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(U)return U},set:function(J){this.V=J}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(U)return this instanceof Qu?U:R5(U,this.objId,this.scope)},set:function(J){J=J.toString(),U=this instanceof Qu?J:J.substr(0,1)==="("?g_(J.substr(1,J.length-2)):g_(J)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qu?g_(U.substr(1,U.length-1)):U},set:function(J){J=J.toString(),U=this instanceof Qu?"/"+J:J}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var Z,q=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return q},set:function(J){J=!!J,q=J}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(Z)return Z},set:function(J){Z=J}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ul(this.Ff,1)},set:function(J){J?this.Ff=kl(this.Ff,1):this.Ff=Bl(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ul(this.Ff,2)},set:function(J){J?this.Ff=kl(this.Ff,2):this.Ff=Bl(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ul(this.Ff,3)},set:function(J){J?this.Ff=kl(this.Ff,3):this.Ff=Bl(this.Ff,3)}});var $=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if($!==null)return $},set:function(J){if([0,1,2].indexOf(J)===-1)throw new Error('Invalid value "'+J+'" for attribute Q supplied.');$=J}}),Object.defineProperty(this,"textAlign",{get:function(){var J;switch($){case 0:default:J="left";break;case 1:J="center";break;case 2:J="right"}return J},configurable:!0,enumerable:!0,set:function(J){switch(J){case"right":case 2:$=2;break;case"center":case 1:$=1;break;case"left":case 0:default:$=0}}})};Nh(Up,Rm);var j_=function(){Up.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(a){t=a}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return $J(e,this.objId,this.scope)},set:function(a){var r,s;s=[],typeof(r=a)=="string"&&(s=function(l,h,n){n||(n=1);for(var w,T=[];w=h.exec(l);)T.push(w[n]);return T}(r,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(a){e=a,this.sort&&e.sort()},this.addOption=function(a){a=(a=a||"").toString(),e.push(a),this.sort&&e.sort()},this.removeOption=function(a,r){for(r=r||!1,a=(a=a||"").toString();e.indexOf(a)!==-1&&(e.splice(e.indexOf(a),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ul(this.Ff,18)},set:function(a){a?this.Ff=kl(this.Ff,18):this.Ff=Bl(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ul(this.Ff,19)},set:function(a){this.combo===!0&&(a?this.Ff=kl(this.Ff,19):this.Ff=Bl(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ul(this.Ff,20)},set:function(a){a?(this.Ff=kl(this.Ff,20),e.sort()):this.Ff=Bl(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ul(this.Ff,22)},set:function(a){a?this.Ff=kl(this.Ff,22):this.Ff=Bl(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ul(this.Ff,23)},set:function(a){a?this.Ff=kl(this.Ff,23):this.Ff=Bl(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ul(this.Ff,27)},set:function(a){a?this.Ff=kl(this.Ff,27):this.Ff=Bl(this.Ff,27)}}),this.hasAppearanceStream=!1};Nh(j_,Up);var Z_=function(){j_.call(this),this.fontName="helvetica",this.combo=!1};Nh(Z_,j_);var q_=function(){Z_.call(this),this.combo=!0};Nh(q_,Z_);var ZC=function(){q_.call(this),this.edit=!0};Nh(ZC,q_);var Qu=function(){Up.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ul(this.Ff,15)},set:function(a){a?this.Ff=kl(this.Ff,15):this.Ff=Bl(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ul(this.Ff,16)},set:function(a){a?this.Ff=kl(this.Ff,16):this.Ff=Bl(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ul(this.Ff,17)},set:function(a){a?this.Ff=kl(this.Ff,17):this.Ff=Bl(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ul(this.Ff,26)},set:function(a){a?this.Ff=kl(this.Ff,26):this.Ff=Bl(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};if(this.scope&&(a=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,s=[];for(r in s.push("<<"),e)s.push("/"+r+" ("+x0(a(e[r]))+")");return s.push(">>"),s.join(`
`)}},set:function(a){Ls(a)==="object"&&(e=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(a){typeof a=="string"&&(e.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(a){t="/"+a}})};Nh(Qu,Up);var qC=function(){Qu.call(this),this.pushButton=!0};Nh(qC,Qu);var H_=function(){Qu.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Nh(H_,Qu);var b2=function(){var t,e;Up.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var a,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(n){return n};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var l,h=[];for(l in h.push("<<"),r)h.push("/"+l+" ("+x0(s(r[l]))+")");return h.push(">>"),h.join(`
`)},set:function(s){Ls(s)==="object"&&(r=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(s){typeof s=="string"&&(r.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return a},set:function(s){a=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return a.substr(1,a.length-1)},set:function(s){a="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Qr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Nh(b2,Up),H_.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var a=this.Kids[e];a.appearanceStreamContent=t.createAppearanceStream(a.optionName),a.caption=t.getCA()}},H_.prototype.createOption=function(t){var e=new b2;return e.Parent=this,e.optionName=t,this.Kids.push(e),TPe.call(this.scope,e),e};var HC=function(){Qu.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Qr.CheckBox.createAppearanceStream()};Nh(HC,Qu);var r0=function(){Up.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ul(this.Ff,13)},set:function(e){e?this.Ff=kl(this.Ff,13):this.Ff=Bl(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ul(this.Ff,21)},set:function(e){e?this.Ff=kl(this.Ff,21):this.Ff=Bl(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ul(this.Ff,23)},set:function(e){e?this.Ff=kl(this.Ff,23):this.Ff=Bl(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ul(this.Ff,24)},set:function(e){e?this.Ff=kl(this.Ff,24):this.Ff=Bl(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ul(this.Ff,25)},set:function(e){e?this.Ff=kl(this.Ff,25):this.Ff=Bl(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ul(this.Ff,26)},set:function(e){e?this.Ff=kl(this.Ff,26):this.Ff=Bl(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Nh(r0,Up);var $C=function(){r0.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ul(this.Ff,14)},set:function(t){t?this.Ff=kl(this.Ff,14):this.Ff=Bl(this.Ff,14)}}),this.password=!0};Nh($C,r0);var Qr={CheckBox:{createAppearanceStream:function(){return{N:{On:Qr.CheckBox.YesNormal},D:{On:Qr.CheckBox.YesPushDown,Off:Qr.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=ym(t);e.scope=t.scope;var a=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),l=YM(t,t.caption);return a.push("0.749023 g"),a.push("0 0 "+li(Qr.internal.getWidth(t))+" "+li(Qr.internal.getHeight(t))+" re"),a.push("f"),a.push("BMC"),a.push("q"),a.push("0 0 1 rg"),a.push("/"+r+" "+li(l.fontSize)+" Tf "+s),a.push("BT"),a.push(l.text),a.push("ET"),a.push("Q"),a.push("EMC"),e.stream=a.join(`
`),e},YesNormal:function(t){var e=ym(t);e.scope=t.scope;var a=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),s=[],l=Qr.internal.getHeight(t),h=Qr.internal.getWidth(t),n=YM(t,t.caption);return s.push("1 g"),s.push("0 0 "+li(h)+" "+li(l)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+li(h-1)+" "+li(l-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+a+" "+li(n.fontSize)+" Tf "+r),s.push(n.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=ym(t);e.scope=t.scope;var a=[];return a.push("0.749023 g"),a.push("0 0 "+li(Qr.internal.getWidth(t))+" "+li(Qr.internal.getHeight(t))+" re"),a.push("f"),e.stream=a.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Qr.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Qr.RadioButton.Circle.YesNormal,e.D[t]=Qr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=ym(t);e.scope=t.scope;var a=[],r=Qr.internal.getWidth(t)<=Qr.internal.getHeight(t)?Qr.internal.getWidth(t)/4:Qr.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Qr.internal.Bezier_C,l=Number((r*s).toFixed(5));return a.push("q"),a.push("1 0 0 1 "+hg(Qr.internal.getWidth(t)/2)+" "+hg(Qr.internal.getHeight(t)/2)+" cm"),a.push(r+" 0 m"),a.push(r+" "+l+" "+l+" "+r+" 0 "+r+" c"),a.push("-"+l+" "+r+" -"+r+" "+l+" -"+r+" 0 c"),a.push("-"+r+" -"+l+" -"+l+" -"+r+" 0 -"+r+" c"),a.push(l+" -"+r+" "+r+" -"+l+" "+r+" 0 c"),a.push("f"),a.push("Q"),e.stream=a.join(`
`),e},YesPushDown:function(t){var e=ym(t);e.scope=t.scope;var a=[],r=Qr.internal.getWidth(t)<=Qr.internal.getHeight(t)?Qr.internal.getWidth(t)/4:Qr.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),l=Number((s*Qr.internal.Bezier_C).toFixed(5)),h=Number((r*Qr.internal.Bezier_C).toFixed(5));return a.push("0.749023 g"),a.push("q"),a.push("1 0 0 1 "+hg(Qr.internal.getWidth(t)/2)+" "+hg(Qr.internal.getHeight(t)/2)+" cm"),a.push(s+" 0 m"),a.push(s+" "+l+" "+l+" "+s+" 0 "+s+" c"),a.push("-"+l+" "+s+" -"+s+" "+l+" -"+s+" 0 c"),a.push("-"+s+" -"+l+" -"+l+" -"+s+" 0 -"+s+" c"),a.push(l+" -"+s+" "+s+" -"+l+" "+s+" 0 c"),a.push("f"),a.push("Q"),a.push("0 g"),a.push("q"),a.push("1 0 0 1 "+hg(Qr.internal.getWidth(t)/2)+" "+hg(Qr.internal.getHeight(t)/2)+" cm"),a.push(r+" 0 m"),a.push(r+" "+h+" "+h+" "+r+" 0 "+r+" c"),a.push("-"+h+" "+r+" -"+r+" "+h+" -"+r+" 0 c"),a.push("-"+r+" -"+h+" -"+h+" -"+r+" 0 -"+r+" c"),a.push(h+" -"+r+" "+r+" -"+h+" "+r+" 0 c"),a.push("f"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=ym(t);e.scope=t.scope;var a=[],r=Qr.internal.getWidth(t)<=Qr.internal.getHeight(t)?Qr.internal.getWidth(t)/4:Qr.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),l=Number((s*Qr.internal.Bezier_C).toFixed(5));return a.push("0.749023 g"),a.push("q"),a.push("1 0 0 1 "+hg(Qr.internal.getWidth(t)/2)+" "+hg(Qr.internal.getHeight(t)/2)+" cm"),a.push(s+" 0 m"),a.push(s+" "+l+" "+l+" "+s+" 0 "+s+" c"),a.push("-"+l+" "+s+" -"+s+" "+l+" -"+s+" 0 c"),a.push("-"+s+" -"+l+" -"+l+" -"+s+" 0 -"+s+" c"),a.push(l+" -"+s+" "+s+" -"+l+" "+s+" 0 c"),a.push("f"),a.push("Q"),e.stream=a.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Qr.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Qr.RadioButton.Cross.YesNormal,e.D[t]=Qr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=ym(t);e.scope=t.scope;var a=[],r=Qr.internal.calculateCross(t);return a.push("q"),a.push("1 1 "+li(Qr.internal.getWidth(t)-2)+" "+li(Qr.internal.getHeight(t)-2)+" re"),a.push("W"),a.push("n"),a.push(li(r.x1.x)+" "+li(r.x1.y)+" m"),a.push(li(r.x2.x)+" "+li(r.x2.y)+" l"),a.push(li(r.x4.x)+" "+li(r.x4.y)+" m"),a.push(li(r.x3.x)+" "+li(r.x3.y)+" l"),a.push("s"),a.push("Q"),e.stream=a.join(`
`),e},YesPushDown:function(t){var e=ym(t);e.scope=t.scope;var a=Qr.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+li(Qr.internal.getWidth(t))+" "+li(Qr.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+li(Qr.internal.getWidth(t)-2)+" "+li(Qr.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(li(a.x1.x)+" "+li(a.x1.y)+" m"),r.push(li(a.x2.x)+" "+li(a.x2.y)+" l"),r.push(li(a.x4.x)+" "+li(a.x4.y)+" m"),r.push(li(a.x3.x)+" "+li(a.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=ym(t);e.scope=t.scope;var a=[];return a.push("0.749023 g"),a.push("0 0 "+li(Qr.internal.getWidth(t))+" "+li(Qr.internal.getHeight(t))+" re"),a.push("f"),e.stream=a.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+a}};Qr.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Qr.internal.getWidth(t),a=Qr.internal.getHeight(t),r=Math.min(e,a);return{x1:{x:(e-r)/2,y:(a-r)/2+r},x2:{x:(e-r)/2+r,y:(a-r)/2},x3:{x:(e-r)/2,y:(a-r)/2},x4:{x:(e-r)/2+r,y:(a-r)/2+r}}}},Qr.internal.getWidth=function(t){var e=0;return Ls(t)==="object"&&(e=MZ(t.Rect[2])),e},Qr.internal.getHeight=function(t){var e=0;return Ls(t)==="object"&&(e=MZ(t.Rect[3])),e};var TPe=Rl.addField=function(t){if(RPe(this,t),!(t instanceof Up))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Rl.AcroFormChoiceField=j_,Rl.AcroFormListBox=Z_,Rl.AcroFormComboBox=q_,Rl.AcroFormEditBox=ZC,Rl.AcroFormButton=Qu,Rl.AcroFormPushButton=qC,Rl.AcroFormRadioButton=H_,Rl.AcroFormCheckBox=HC,Rl.AcroFormTextField=r0,Rl.AcroFormPasswordField=$C,Rl.AcroFormAppearance=Qr,Rl.AcroForm={ChoiceField:j_,ListBox:Z_,ComboBox:q_,EditBox:ZC,Button:Qu,PushButton:qC,RadioButton:H_,CheckBox:HC,TextField:r0,PasswordField:$C,Appearance:Qr},jn.AcroForm={ChoiceField:j_,ListBox:Z_,ComboBox:q_,EditBox:ZC,Button:Qu,PushButton:qC,RadioButton:H_,CheckBox:HC,TextField:r0,PasswordField:$C,Appearance:Qr};jn.AcroForm;function YJ(t){return t.reduce(function(e,a,r){return e[a]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",a={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(ne,ye){var Me,ze,Le,Ie,qe,ke=e;if((ye=ye||e)==="RGBA"||ne.data!==void 0&&ne.data instanceof Uint8ClampedArray&&"height"in ne&&"width"in ne)return"RGBA";if(Ae(ne))for(qe in a)for(Le=a[qe],Me=0;Me<Le.length;Me+=1){for(Ie=!0,ze=0;ze<Le[Me].length;ze+=1)if(Le[Me][ze]!==void 0&&Le[Me][ze]!==ne[ze]){Ie=!1;break}if(Ie===!0){ke=qe;break}}else for(qe in a)for(Le=a[qe],Me=0;Me<Le.length;Me+=1){for(Ie=!0,ze=0;ze<Le[Me].length;ze+=1)if(Le[Me][ze]!==void 0&&Le[Me][ze]!==ne.charCodeAt(ze)){Ie=!1;break}if(Ie===!0){ke=qe;break}}return ke===e&&ye!==e&&(ke=ye),ke},s=function ne(ye){for(var Me=this.internal.write,ze=this.internal.putStream,Le=(0,this.internal.getFilters)();Le.indexOf("FlateEncode")!==-1;)Le.splice(Le.indexOf("FlateEncode"),1);ye.objectId=this.internal.newObject();var Ie=[];if(Ie.push({key:"Type",value:"/XObject"}),Ie.push({key:"Subtype",value:"/Image"}),Ie.push({key:"Width",value:ye.width}),Ie.push({key:"Height",value:ye.height}),ye.colorSpace===$.INDEXED?Ie.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(ye.palette.length/3-1)+" "+("sMask"in ye&&ye.sMask!==void 0?ye.objectId+2:ye.objectId+1)+" 0 R]"}):(Ie.push({key:"ColorSpace",value:"/"+ye.colorSpace}),ye.colorSpace===$.DEVICE_CMYK&&Ie.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Ie.push({key:"BitsPerComponent",value:ye.bitsPerComponent}),"decodeParameters"in ye&&ye.decodeParameters!==void 0&&Ie.push({key:"DecodeParms",value:"<<"+ye.decodeParameters+">>"}),"transparency"in ye&&Array.isArray(ye.transparency)){for(var qe="",ke=0,tt=ye.transparency.length;ke<tt;ke++)qe+=ye.transparency[ke]+" "+ye.transparency[ke]+" ";Ie.push({key:"Mask",value:"["+qe+"]"})}ye.sMask!==void 0&&Ie.push({key:"SMask",value:ye.objectId+1+" 0 R"});var Ue=ye.filter!==void 0?["/"+ye.filter]:void 0;if(ze({data:ye.data,additionalKeyValues:Ie,alreadyAppliedFilters:Ue,objectId:ye.objectId}),Me("endobj"),"sMask"in ye&&ye.sMask!==void 0){var He="/Predictor "+ye.predictor+" /Colors 1 /BitsPerComponent "+ye.bitsPerComponent+" /Columns "+ye.width,Ce={width:ye.width,height:ye.height,colorSpace:"DeviceGray",bitsPerComponent:ye.bitsPerComponent,decodeParameters:He,data:ye.sMask};"filter"in ye&&(Ce.filter=ye.filter),ne.call(this,Ce)}if(ye.colorSpace===$.INDEXED){var Se=this.internal.newObject();ze({data:Re(new Uint8Array(ye.palette)),objectId:Se}),Me("endobj")}},l=function(){var ne=this.internal.collections.addImage_images;for(var ye in ne)s.call(this,ne[ye])},h=function(){var ne,ye=this.internal.collections.addImage_images,Me=this.internal.write;for(var ze in ye)Me("/I"+(ne=ye[ze]).index,ne.objectId,"0","R")},n=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",h))},w=function(){var ne=this.internal.collections.addImage_images;return n.call(this),ne},T=function(){return Object.keys(this.internal.collections.addImage_images).length},E=function(ne){return typeof t["process"+ne.toUpperCase()]=="function"},z=function(ne){return Ls(ne)==="object"&&ne.nodeType===1},k=function(ne,ye){if(ne.nodeName==="IMG"&&ne.hasAttribute("src")){var Me=""+ne.getAttribute("src");if(Me.indexOf("data:image/")===0)return Xw(unescape(Me).split("base64,").pop());var ze=t.loadFile(Me,!0);if(ze!==void 0)return ze}if(ne.nodeName==="CANVAS"){if(ne.width===0||ne.height===0)throw new Error("Given canvas must have data. Canvas width: "+ne.width+", height: "+ne.height);var Le;switch(ye){case"PNG":Le="image/png";break;case"WEBP":Le="image/webp";break;case"JPEG":case"JPG":default:Le="image/jpeg"}return Xw(ne.toDataURL(Le,1).split("base64,").pop())}},U=function(ne){var ye=this.internal.collections.addImage_images;if(ye){for(var Me in ye)if(ne===ye[Me].alias)return ye[Me]}},Z=function(ne,ye,Me){return ne||ye||(ne=-96,ye=-96),ne<0&&(ne=-1*Me.width*72/ne/this.internal.scaleFactor),ye<0&&(ye=-1*Me.height*72/ye/this.internal.scaleFactor),ne===0&&(ne=ye*Me.width/Me.height),ye===0&&(ye=ne*Me.height/Me.width),[ne,ye]},q=function(ne,ye,Me,ze,Le,Ie){var qe=Z.call(this,Me,ze,Le),ke=this.internal.getCoordinateString,tt=this.internal.getVerticalCoordinateString,Ue=w.call(this);if(Me=qe[0],ze=qe[1],Ue[Le.index]=Le,Ie){Ie*=Math.PI/180;var He=Math.cos(Ie),Ce=Math.sin(Ie),Se=function(ft){return ft.toFixed(4)},$e=[Se(He),Se(Ce),Se(-1*Ce),Se(He),0,0,"cm"]}this.internal.write("q"),Ie?(this.internal.write([1,"0","0",1,ke(ne),tt(ye+ze),"cm"].join(" ")),this.internal.write($e.join(" ")),this.internal.write([ke(Me),"0","0",ke(ze),"0","0","cm"].join(" "))):this.internal.write([ke(Me),"0","0",ke(ze),ke(ne),tt(ye+ze),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Le.index+" Do"),this.internal.write("Q")},$=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var J=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},ie=t.__addimage__.sHashCode=function(ne){var ye,Me,ze=0;if(typeof ne=="string")for(Me=ne.length,ye=0;ye<Me;ye++)ze=(ze<<5)-ze+ne.charCodeAt(ye),ze|=0;else if(Ae(ne))for(Me=ne.byteLength/2,ye=0;ye<Me;ye++)ze=(ze<<5)-ze+ne[ye],ze|=0;return ze},de=t.__addimage__.validateStringAsBase64=function(ne){(ne=ne||"").toString().trim();var ye=!0;return ne.length===0&&(ye=!1),ne.length%4!=0&&(ye=!1),/^[A-Za-z0-9+/]+$/.test(ne.substr(0,ne.length-2))===!1&&(ye=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(ne.substr(-2))===!1&&(ye=!1),ye},ge=t.__addimage__.extractImageFromDataUrl=function(ne){if(ne==null||!(ne=ne.trim()).startsWith("data:"))return null;var ye=ne.indexOf(",");return ye<0?null:ne.substring(0,ye).trim().endsWith("base64")?ne.substring(ye+1):null},he=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(ne){return he()&&ne instanceof ArrayBuffer};var Ae=t.__addimage__.isArrayBufferView=function(ne){return he()&&typeof Uint32Array<"u"&&(ne instanceof Int8Array||ne instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&ne instanceof Uint8ClampedArray||ne instanceof Int16Array||ne instanceof Uint16Array||ne instanceof Int32Array||ne instanceof Uint32Array||ne instanceof Float32Array||ne instanceof Float64Array)},me=t.__addimage__.binaryStringToUint8Array=function(ne){for(var ye=ne.length,Me=new Uint8Array(ye),ze=0;ze<ye;ze++)Me[ze]=ne.charCodeAt(ze);return Me},Re=t.__addimage__.arrayBufferToBinaryString=function(ne){for(var ye="",Me=Ae(ne)?ne:new Uint8Array(ne),ze=0;ze<Me.length;ze+=8192)ye+=String.fromCharCode.apply(null,Me.subarray(ze,ze+8192));return ye};t.addImage=function(){var ne,ye,Me,ze,Le,Ie,qe,ke,tt;if(typeof arguments[1]=="number"?(ye=e,Me=arguments[1],ze=arguments[2],Le=arguments[3],Ie=arguments[4],qe=arguments[5],ke=arguments[6],tt=arguments[7]):(ye=arguments[1],Me=arguments[2],ze=arguments[3],Le=arguments[4],Ie=arguments[5],qe=arguments[6],ke=arguments[7],tt=arguments[8]),Ls(ne=arguments[0])==="object"&&!z(ne)&&"imageData"in ne){var Ue=ne;ne=Ue.imageData,ye=Ue.format||ye||e,Me=Ue.x||Me||0,ze=Ue.y||ze||0,Le=Ue.w||Ue.width||Le,Ie=Ue.h||Ue.height||Ie,qe=Ue.alias||qe,ke=Ue.compression||ke,tt=Ue.rotation||Ue.angle||tt}var He=this.internal.getFilters();if(ke===void 0&&He.indexOf("FlateEncode")!==-1&&(ke="SLOW"),isNaN(Me)||isNaN(ze))throw new Error("Invalid coordinates passed to jsPDF.addImage");n.call(this);var Ce=be.call(this,ne,ye,qe,ke);return q.call(this,Me,ze,Le,Ie,Ce,tt),this};var be=function(ne,ye,Me,ze){var Le,Ie,qe;if(typeof ne=="string"&&r(ne)===e){ne=unescape(ne);var ke=De(ne,!1);(ke!==""||(ke=t.loadFile(ne,!0))!==void 0)&&(ne=ke)}if(z(ne)&&(ne=k(ne,ye)),ye=r(ne,ye),!E(ye))throw new Error("addImage does not support files of type '"+ye+"', please ensure that a plugin for '"+ye+"' support is added.");if(((qe=Me)==null||qe.length===0)&&(Me=function(tt){return typeof tt=="string"||Ae(tt)?ie(tt):Ae(tt.data)?ie(tt.data):null}(ne)),(Le=U.call(this,Me))||(he()&&(ne instanceof Uint8Array||ye==="RGBA"||(Ie=ne,ne=me(ne))),Le=this["process"+ye.toUpperCase()](ne,T.call(this),Me,function(tt){return tt&&typeof tt=="string"&&(tt=tt.toUpperCase()),tt in t.image_compression?tt:J.NONE}(ze),Ie)),!Le)throw new Error("An unknown error occurred whilst processing the image.");return Le},De=t.__addimage__.convertBase64ToBinaryString=function(ne,ye){ye=typeof ye!="boolean"||ye;var Me,ze="";if(typeof ne=="string"){var Le;Me=(Le=ge(ne))!==null&&Le!==void 0?Le:ne;try{ze=Xw(Me)}catch(Ie){if(ye)throw de(Me)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Ie.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ze};t.getImageProperties=function(ne){var ye,Me,ze="";if(z(ne)&&(ne=k(ne)),typeof ne=="string"&&r(ne)===e&&((ze=De(ne,!1))===""&&(ze=t.loadFile(ne)||""),ne=ze),Me=r(ne),!E(Me))throw new Error("addImage does not support files of type '"+Me+"', please ensure that a plugin for '"+Me+"' support is added.");if(!he()||ne instanceof Uint8Array||(ne=me(ne)),!(ye=this["process"+Me.toUpperCase()](ne)))throw new Error("An unknown error occurred whilst processing the image");return ye.fileType=Me,ye}})(jn.API),function(t){var e=function(a){if(a!==void 0&&a!="")return!0};jn.API.events.push(["addPage",function(a){this.internal.getPageInfo(a.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(a){for(var r,s,l,h=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,w=this.internal.getPageInfoByObjId(a.objId),T=a.pageContext.annotations,E=!1,z=0;z<T.length&&!E;z++)switch((r=T[z]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(E=!0);break;case"reference":case"text":case"freetext":E=!0}if(E!=0){this.internal.write("/Annots [");for(var k=0;k<T.length;k++){r=T[k];var U=this.internal.pdfEscape,Z=this.internal.getEncryptor(a.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var q=this.internal.newAdditionalObject(),$=this.internal.newAdditionalObject(),J=this.internal.getEncryptor(q.objId),ie=r.title||"Note";l="<</Type /Annot /Subtype /Text "+(s="/Rect ["+h(r.bounds.x)+" "+n(r.bounds.y+r.bounds.h)+" "+h(r.bounds.x+r.bounds.w)+" "+n(r.bounds.y)+"] ")+"/Contents ("+U(J(r.contents))+")",l+=" /Popup "+$.objId+" 0 R",l+=" /P "+w.objId+" 0 R",l+=" /T ("+U(J(ie))+") >>",q.content=l;var de=q.objId+" 0 R";l="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+h(r.bounds.x+30)+" "+n(r.bounds.y+r.bounds.h)+" "+h(r.bounds.x+r.bounds.w+30)+" "+n(r.bounds.y)+"] ")+" /Parent "+de,r.open&&(l+=" /Open true"),l+=" >>",$.content=l,this.internal.write(q.objId,"0 R",$.objId,"0 R");break;case"freetext":s="/Rect ["+h(r.bounds.x)+" "+n(r.bounds.y)+" "+h(r.bounds.x+r.bounds.w)+" "+n(r.bounds.y+r.bounds.h)+"] ";var ge=r.color||"#000000";l="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+U(Z(r.contents))+")",l+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+ge+")",l+=" /Border [0 0 0]",l+=" >>",this.internal.write(l);break;case"link":if(r.options.name){var he=this.annotations._nameMap[r.options.name];r.options.pageNumber=he.page,r.options.top=he.y}else r.options.top||(r.options.top=0);if(s="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",l="",r.options.url)l="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+U(Z(r.options.url))+") >>";else if(r.options.pageNumber)switch(l="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":l+=" /Fit]";break;case"FitH":l+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,l+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var Ae=n(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),l+=" /XYZ "+r.options.left+" "+Ae+" "+r.options.zoom+"]"}l!=""&&(l+=" >>",this.internal.write(l))}}this.internal.write("]")}}]),t.createAnnotation=function(a){var r=this.internal.getCurrentPageInfo();switch(a.type){case"link":this.link(a.bounds.x,a.bounds.y,a.bounds.w,a.bounds.h,a);break;case"text":case"freetext":r.pageContext.annotations.push(a)}},t.link=function(a,r,s,l,h){var n=this.internal.getCurrentPageInfo(),w=this.internal.getCoordinateString,T=this.internal.getVerticalCoordinateString;n.pageContext.annotations.push({finalBounds:{x:w(a),y:T(r),w:w(a+s),h:T(r+l)},options:h,type:"link"})},t.textWithLink=function(a,r,s,l){var h,n,w=this.getTextWidth(a),T=this.internal.getLineHeight()/this.internal.scaleFactor;if(l.maxWidth!==void 0){n=l.maxWidth;var E=this.splitTextToSize(a,n).length;h=Math.ceil(T*E)}else n=w,h=T;return this.text(a,r,s,l),s+=.2*T,l.align==="center"&&(r-=w/2),l.align==="right"&&(r-=w),this.link(r,s-T,n,h,l),w},t.getTextWidth=function(a){var r=this.internal.getFontSize();return this.getStringUnitWidth(a)*r/this.internal.scaleFactor}}(jn.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},a={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var l=t.__arabicParser__.isInArabicSubstitutionA=function(q){return e[q.charCodeAt(0)]!==void 0},h=t.__arabicParser__.isArabicLetter=function(q){return typeof q=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(q)},n=t.__arabicParser__.isArabicEndLetter=function(q){return h(q)&&l(q)&&e[q.charCodeAt(0)].length<=2},w=t.__arabicParser__.isArabicAlfLetter=function(q){return h(q)&&s.indexOf(q.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(q){return h(q)&&l(q)&&e[q.charCodeAt(0)].length>=1};var T=t.__arabicParser__.arabicLetterHasFinalForm=function(q){return h(q)&&l(q)&&e[q.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(q){return h(q)&&l(q)&&e[q.charCodeAt(0)].length>=3};var E=t.__arabicParser__.arabicLetterHasMedialForm=function(q){return h(q)&&l(q)&&e[q.charCodeAt(0)].length==4},z=t.__arabicParser__.resolveLigatures=function(q){var $=0,J=a,ie="",de=0;for($=0;$<q.length;$+=1)J[q.charCodeAt($)]!==void 0?(de++,typeof(J=J[q.charCodeAt($)])=="number"&&(ie+=String.fromCharCode(J),J=a,de=0),$===q.length-1&&(J=a,ie+=q.charAt($-(de-1)),$-=de-1,de=0)):(J=a,ie+=q.charAt($-de),$-=de,de=0);return ie};t.__arabicParser__.isArabicDiacritic=function(q){return q!==void 0&&r[q.charCodeAt(0)]!==void 0};var k=t.__arabicParser__.getCorrectForm=function(q,$,J){return h(q)?l(q)===!1?-1:!T(q)||!h($)&&!h(J)||!h(J)&&n($)||n(q)&&!h($)||n(q)&&w($)||n(q)&&n($)?0:E(q)&&h($)&&!n($)&&h(J)&&T(J)?3:n(q)||!h(J)?1:2:-1},U=function(q){var $=0,J=0,ie=0,de="",ge="",he="",Ae=(q=q||"").split("\\s+"),me=[];for($=0;$<Ae.length;$+=1){for(me.push(""),J=0;J<Ae[$].length;J+=1)de=Ae[$][J],ge=Ae[$][J-1],he=Ae[$][J+1],h(de)?(ie=k(de,ge,he),me[$]+=ie!==-1?String.fromCharCode(e[de.charCodeAt(0)][ie]):de):me[$]+=de;me[$]=z(me[$])}return me.join(" ")},Z=t.__arabicParser__.processArabic=t.processArabic=function(){var q,$=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,J=[];if(Array.isArray($)){var ie=0;for(J=[],ie=0;ie<$.length;ie+=1)Array.isArray($[ie])?J.push([U($[ie][0]),$[ie][1],$[ie][2]]):J.push([U($[ie])]);q=J}else q=U($);return typeof arguments[0]=="string"?q:(arguments[0].text=q,arguments[0])};t.events.push(["preProcessText",Z])}(jn.API),jn.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var a=void 0;Object.defineProperty(this,"pdf",{get:function(){return a},set:function(n){a=n}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(n){r=isNaN(n)||Number.isInteger(n)===!1||n<0?150:n,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(n){s=isNaN(n)||Number.isInteger(n)===!1||n<0?300:n,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var l=[];Object.defineProperty(this,"childNodes",{get:function(){return l},set:function(n){l=n}});var h={};Object.defineProperty(this,"style",{get:function(){return h},set:function(n){h=n}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(a,r){var s;if((a=a||"2d")!=="2d")return null;for(s in r)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=r[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(jn.API),function(t){var e={left:0,top:0,bottom:0,right:0},a=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var w=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return w},set:function(q){w=q}});var T=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return T},set:function(q){T=q}});var E=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return E},set:function(q){E=q}});var z=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return z},set:function(q){z=q}});var k=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return k},set:function(q){k=q}});var U=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return U},set:function(q){U=q}});var Z=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return Z},set:function(q){Z=q}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(w){return r.call(this),this.internal.__cell__.headerFunction=typeof w=="function"?w:void 0,this},t.getTextDimensions=function(w,T){r.call(this);var E=(T=T||{}).fontSize||this.getFontSize(),z=T.font||this.getFont(),k=T.scaleFactor||this.internal.scaleFactor,U=0,Z=0,q=0,$=this;if(!Array.isArray(w)&&typeof w!="string"){if(typeof w!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");w=String(w)}var J=T.maxWidth;J>0?typeof w=="string"?w=this.splitTextToSize(w,J):Object.prototype.toString.call(w)==="[object Array]"&&(w=w.reduce(function(de,ge){return de.concat($.splitTextToSize(ge,J))},[])):w=Array.isArray(w)?w:[w];for(var ie=0;ie<w.length;ie++)U<(q=this.getStringUnitWidth(w[ie],{font:z})*E)&&(U=q);return U!==0&&(Z=w.length),{w:U/=k,h:Math.max((Z*E*this.getLineHeightFactor()-E*(this.getLineHeightFactor()-1))/k,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var w=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new l(w.left,w.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var h=t.cell=function(){var w;w=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var T=this.internal.__cell__.lastCell,E=this.internal.__cell__.padding,z=this.internal.__cell__.margins||e,k=this.internal.__cell__.tableHeaderRow,U=this.internal.__cell__.printHeaders;return T.lineNumber!==void 0&&(T.lineNumber===w.lineNumber?(w.x=(T.x||0)+(T.width||0),w.y=T.y||0):T.y+T.height+w.height+z.bottom>this.getPageHeight()?(this.cellAddPage(),w.y=z.top,U&&k&&(this.printHeaderRow(w.lineNumber,!0),w.y+=k[0].height)):w.y=T.y+T.height||w.y),w.text[0]!==void 0&&(this.rect(w.x,w.y,w.width,w.height,a===!0?"FD":void 0),w.align==="right"?this.text(w.text,w.x+w.width-E,w.y+E,{align:"right",baseline:"top"}):w.align==="center"?this.text(w.text,w.x+w.width/2,w.y+E,{align:"center",baseline:"top",maxWidth:w.width-E-E}):this.text(w.text,w.x+E,w.y+E,{align:"left",baseline:"top",maxWidth:w.width-E-E})),this.internal.__cell__.lastCell=w,this};t.table=function(w,T,E,z,k){if(r.call(this),!E)throw new Error("No data for PDF table.");var U,Z,q,$,J=[],ie=[],de=[],ge={},he={},Ae=[],me=[],Re=(k=k||{}).autoSize||!1,be=k.printHeaders!==!1,De=k.css&&k.css["font-size"]!==void 0?16*k.css["font-size"]:k.fontSize||12,ne=k.margins||Object.assign({width:this.getPageWidth()},e),ye=typeof k.padding=="number"?k.padding:3,Me=k.headerBackgroundColor||"#c8c8c8",ze=k.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=be,this.internal.__cell__.margins=ne,this.internal.__cell__.table_font_size=De,this.internal.__cell__.padding=ye,this.internal.__cell__.headerBackgroundColor=Me,this.internal.__cell__.headerTextColor=ze,this.setFontSize(De),z==null)ie=J=Object.keys(E[0]),de=J.map(function(){return"left"});else if(Array.isArray(z)&&Ls(z[0])==="object")for(J=z.map(function(Ue){return Ue.name}),ie=z.map(function(Ue){return Ue.prompt||Ue.name||""}),de=z.map(function(Ue){return Ue.align||"left"}),U=0;U<z.length;U+=1)he[z[U].name]=z[U].width*(19.049976/25.4);else Array.isArray(z)&&typeof z[0]=="string"&&(ie=J=z,de=J.map(function(){return"left"}));if(Re||Array.isArray(z)&&typeof z[0]=="string")for(U=0;U<J.length;U+=1){for(ge[$=J[U]]=E.map(function(Ue){return Ue[$]}),this.setFont(void 0,"bold"),Ae.push(this.getTextDimensions(ie[U],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),Z=ge[$],this.setFont(void 0,"normal"),q=0;q<Z.length;q+=1)Ae.push(this.getTextDimensions(Z[q],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);he[$]=Math.max.apply(null,Ae)+ye+ye,Ae=[]}if(be){var Le={};for(U=0;U<J.length;U+=1)Le[J[U]]={},Le[J[U]].text=ie[U],Le[J[U]].align=de[U];var Ie=n.call(this,Le,he);me=J.map(function(Ue){return new l(w,T,he[Ue],Ie,Le[Ue].text,void 0,Le[Ue].align)}),this.setTableHeaderRow(me),this.printHeaderRow(1,!1)}var qe=z.reduce(function(Ue,He){return Ue[He.name]=He.align,Ue},{});for(U=0;U<E.length;U+=1){"rowStart"in k&&k.rowStart instanceof Function&&k.rowStart({row:U,data:E[U]},this);var ke=n.call(this,E[U],he);for(q=0;q<J.length;q+=1){var tt=E[U][J[q]];"cellStart"in k&&k.cellStart instanceof Function&&k.cellStart({row:U,col:q,data:tt},this),h.call(this,new l(w,T,he[J[q]],ke,tt,U+2,qe[J[q]]))}}return this.internal.__cell__.table_x=w,this.internal.__cell__.table_y=T,this};var n=function(w,T){var E=this.internal.__cell__.padding,z=this.internal.__cell__.table_font_size,k=this.internal.scaleFactor;return Object.keys(w).map(function(U){var Z=w[U];return this.splitTextToSize(Z.hasOwnProperty("text")?Z.text:Z,T[U]-E-E)},this).map(function(U){return this.getLineHeightFactor()*U.length*z/k+E+E},this).reduce(function(U,Z){return Math.max(U,Z)},0)};t.setTableHeaderRow=function(w){r.call(this),this.internal.__cell__.tableHeaderRow=w},t.printHeaderRow=function(w,T){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var E;if(a=!0,typeof this.internal.__cell__.headerFunction=="function"){var z=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(z[0],z[1],z[2],z[3],void 0,-1)}this.setFont(void 0,"bold");for(var k=[],U=0;U<this.internal.__cell__.tableHeaderRow.length;U+=1){E=this.internal.__cell__.tableHeaderRow[U].clone(),T&&(E.y=this.internal.__cell__.margins.top||0,k.push(E)),E.lineNumber=w;var Z=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),h.call(this,E),this.setTextColor(Z)}k.length>0&&this.setTableHeaderRow(k),this.setFont(void 0,"normal"),a=!1}}(jn.API);var XJ={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},JJ=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],XM=YJ(JJ),QJ=[100,200,300,400,500,600,700,800,900],SPe=YJ(QJ);function JM(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),a=function(l){return XJ[l=l||"normal"]?l:"normal"}(t.style),r=function(l){if(!l)return 400;if(typeof l=="number")return l>=100&&l<=900&&l%100==0?l:400;if(/^\d00$/.test(l))return parseInt(l);switch(l){case"bold":return 700;case"normal":default:return 400}}(t.weight),s=function(l){return typeof XM[l=l||"normal"]=="number"?l:"normal"}(t.stretch);return{family:e,style:a,weight:r,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,a,r].join(" ")}}}function IZ(t,e,a,r){var s;for(s=a;s>=0&&s<e.length;s+=r)if(t[e[s]])return t[e[s]];for(s=a;s>=0&&s<e.length;s-=r)if(t[e[s]])return t[e[s]]}var CPe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},LZ={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function FZ(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function bPe(t,e,a){for(var r=(a=a||{}).defaultFontFamily||"times",s=Object.assign({},CPe,a.genericFontFamilies||{}),l=null,h=null,n=0;n<e.length;++n)if(s[(l=JM(e[n])).family]&&(l.family=s[l.family]),t.hasOwnProperty(l.family)){h=t[l.family];break}if(!(h=h||t[r]))throw new Error("Could not find a font-family for the rule '"+FZ(l)+"' and default family '"+r+"'.");if(h=function(w,T){if(T[w])return T[w];var E=XM[w],z=E<=XM.normal?-1:1,k=IZ(T,JJ,E,z);if(!k)throw new Error("Could not find a matching font-stretch value for "+w);return k}(l.stretch,h),h=function(w,T){if(T[w])return T[w];for(var E=XJ[w],z=0;z<E.length;++z)if(T[E[z]])return T[E[z]];throw new Error("Could not find a matching font-style for "+w)}(l.style,h),!(h=function(w,T){if(T[w])return T[w];if(w===400&&T[500])return T[500];if(w===500&&T[400])return T[400];var E=SPe[w],z=IZ(T,QJ,E,w<400?-1:1);if(!z)throw new Error("Could not find a matching font-weight for value "+w);return z}(l.weight,h)))throw new Error("Failed to resolve a font for the rule '"+FZ(l)+"'.");return h}function UZ(t){return t.trimLeft()}function xPe(t,e){for(var a=0;a<t.length;){if(t.charAt(a)===e)return[t.substring(0,a),t.substring(a+1)];a+=1}return null}function PPe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var RC,kZ,BZ,T5=["times"];(function(t){var e,a,r,s,l,h,n,w,T,E=function(Ce){return Ce=Ce||{},this.isStrokeTransparent=Ce.isStrokeTransparent||!1,this.strokeOpacity=Ce.strokeOpacity||1,this.strokeStyle=Ce.strokeStyle||"#000000",this.fillStyle=Ce.fillStyle||"#000000",this.isFillTransparent=Ce.isFillTransparent||!1,this.fillOpacity=Ce.fillOpacity||1,this.font=Ce.font||"10px sans-serif",this.textBaseline=Ce.textBaseline||"alphabetic",this.textAlign=Ce.textAlign||"left",this.lineWidth=Ce.lineWidth||1,this.lineJoin=Ce.lineJoin||"miter",this.lineCap=Ce.lineCap||"butt",this.path=Ce.path||[],this.transform=Ce.transform!==void 0?Ce.transform.clone():new w,this.globalCompositeOperation=Ce.globalCompositeOperation||"normal",this.globalAlpha=Ce.globalAlpha||1,this.clip_path=Ce.clip_path||[],this.currentPoint=Ce.currentPoint||new h,this.miterLimit=Ce.miterLimit||10,this.lastPoint=Ce.lastPoint||new h,this.lineDashOffset=Ce.lineDashOffset||0,this.lineDash=Ce.lineDash||[],this.margin=Ce.margin||[0,0,0,0],this.prevPageLastElemOffset=Ce.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Ce.ignoreClearRect!="boolean"||Ce.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new z(this),e=this.internal.f2,a=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,h=this.internal.Point,n=this.internal.Rectangle,w=this.internal.Matrix,T=new E}]);var z=function(Ce){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Se=Ce;Object.defineProperty(this,"pdf",{get:function(){return Se}});var $e=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return $e},set:function(la){$e=!!la}});var ft=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ft},set:function(la){ft=!!la}});var Je=0;Object.defineProperty(this,"posX",{get:function(){return Je},set:function(la){isNaN(la)||(Je=la)}});var wt=0;Object.defineProperty(this,"posY",{get:function(){return wt},set:function(la){isNaN(la)||(wt=la)}}),Object.defineProperty(this,"margin",{get:function(){return T.margin},set:function(la){var Rt;typeof la=="number"?Rt=[la,la,la,la]:((Rt=new Array(4))[0]=la[0],Rt[1]=la.length>=2?la[1]:Rt[0],Rt[2]=la.length>=3?la[2]:Rt[0],Rt[3]=la.length>=4?la[3]:Rt[1]),T.margin=Rt}});var it=!1;Object.defineProperty(this,"autoPaging",{get:function(){return it},set:function(la){it=la}});var ct=0;Object.defineProperty(this,"lastBreak",{get:function(){return ct},set:function(la){ct=la}});var _e=[];Object.defineProperty(this,"pageBreaks",{get:function(){return _e},set:function(la){_e=la}}),Object.defineProperty(this,"ctx",{get:function(){return T},set:function(la){la instanceof E&&(T=la)}}),Object.defineProperty(this,"path",{get:function(){return T.path},set:function(la){T.path=la}});var Jt=[];Object.defineProperty(this,"ctxStack",{get:function(){return Jt},set:function(la){Jt=la}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(la){var Rt;Rt=k(la),this.ctx.fillStyle=Rt.style,this.ctx.isFillTransparent=Rt.a===0,this.ctx.fillOpacity=Rt.a,this.pdf.setFillColor(Rt.r,Rt.g,Rt.b,{a:Rt.a}),this.pdf.setTextColor(Rt.r,Rt.g,Rt.b,{a:Rt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(la){var Rt=k(la);this.ctx.strokeStyle=Rt.style,this.ctx.isStrokeTransparent=Rt.a===0,this.ctx.strokeOpacity=Rt.a,Rt.a===0?this.pdf.setDrawColor(255,255,255):(Rt.a,this.pdf.setDrawColor(Rt.r,Rt.g,Rt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(la){["butt","round","square"].indexOf(la)!==-1&&(this.ctx.lineCap=la,this.pdf.setLineCap(la))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(la){isNaN(la)||(this.ctx.lineWidth=la,this.pdf.setLineWidth(la))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(la){["bevel","round","miter"].indexOf(la)!==-1&&(this.ctx.lineJoin=la,this.pdf.setLineJoin(la))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(la){isNaN(la)||(this.ctx.miterLimit=la,this.pdf.setMiterLimit(la))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(la){this.ctx.textBaseline=la}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(la){["right","end","center","left","start"].indexOf(la)!==-1&&(this.ctx.textAlign=la)}});var Zt=null;function Pa(la,Rt){if(Zt===null){var yr=function(za){var Va=[];return Object.keys(za).forEach(function(er){za[er].forEach(function(cr){var ur=null;switch(cr){case"bold":ur={family:er,weight:"bold"};break;case"italic":ur={family:er,style:"italic"};break;case"bolditalic":ur={family:er,weight:"bold",style:"italic"};break;case"":case"normal":ur={family:er}}ur!==null&&(ur.ref={name:er,style:cr},Va.push(ur))})}),Va}(la.getFontList());Zt=function(za){for(var Va={},er=0;er<za.length;++er){var cr=JM(za[er]),ur=cr.family,Pr=cr.stretch,ka=cr.style,jr=cr.weight;Va[ur]=Va[ur]||{},Va[ur][Pr]=Va[ur][Pr]||{},Va[ur][Pr][ka]=Va[ur][Pr][ka]||{},Va[ur][Pr][ka][jr]=cr}return Va}(yr.concat(Rt))}return Zt}var Bt=null;Object.defineProperty(this,"fontFaces",{get:function(){return Bt},set:function(la){Zt=null,Bt=la}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(la){var Rt;if(this.ctx.font=la,(Rt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(la))!==null){var yr=Rt[1];Rt[2];var za=Rt[3],Va=Rt[4];Rt[5];var er=Rt[6],cr=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Va)[2];Va=Math.floor(cr==="px"?parseFloat(Va)*this.pdf.internal.scaleFactor:cr==="em"?parseFloat(Va)*this.pdf.getFontSize():parseFloat(Va)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Va);var ur=function(va){var Wa,ca,Qa=[],gr=va.trim();if(gr==="")return T5;if(gr in LZ)return[LZ[gr]];for(;gr!=="";){switch(ca=null,Wa=(gr=UZ(gr)).charAt(0)){case'"':case"'":ca=xPe(gr.substring(1),Wa);break;default:ca=PPe(gr)}if(ca===null||(Qa.push(ca[0]),(gr=UZ(ca[1]))!==""&&gr.charAt(0)!==","))return T5;gr=gr.replace(/^,/,"")}return Qa}(er);if(this.fontFaces){var Pr=bPe(Pa(this.pdf,this.fontFaces),ur.map(function(va){return{family:va,stretch:"normal",weight:za,style:yr}}));this.pdf.setFont(Pr.ref.name,Pr.ref.style)}else{var ka="";(za==="bold"||parseInt(za,10)>=700||yr==="bold")&&(ka="bold"),yr==="italic"&&(ka+="italic"),ka.length===0&&(ka="normal");for(var jr="",pn={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Dn=0;Dn<ur.length;Dn++){if(this.pdf.internal.getFont(ur[Dn],ka,{noFallback:!0,disableWarning:!0})!==void 0){jr=ur[Dn];break}if(ka==="bolditalic"&&this.pdf.internal.getFont(ur[Dn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)jr=ur[Dn],ka="bold";else if(this.pdf.internal.getFont(ur[Dn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){jr=ur[Dn],ka="normal";break}}if(jr===""){for(var Rn=0;Rn<ur.length;Rn++)if(pn[ur[Rn]]){jr=pn[ur[Rn]];break}}jr=jr===""?"Times":jr,this.pdf.setFont(jr,ka)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(la){this.ctx.globalCompositeOperation=la}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(la){this.ctx.globalAlpha=la}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(la){this.ctx.lineDashOffset=la,He.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(la){this.ctx.lineDash=la,He.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(la){this.ctx.ignoreClearRect=!!la}})};z.prototype.setLineDash=function(Ce){this.lineDash=Ce},z.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},z.prototype.fill=function(){ge.call(this,"fill",!1)},z.prototype.stroke=function(){ge.call(this,"stroke",!1)},z.prototype.beginPath=function(){this.path=[{type:"begin"}]},z.prototype.moveTo=function(Ce,Se){if(isNaN(Ce)||isNaN(Se))throw io.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var $e=this.ctx.transform.applyToPoint(new h(Ce,Se));this.path.push({type:"mt",x:$e.x,y:$e.y}),this.ctx.lastPoint=new h(Ce,Se)},z.prototype.closePath=function(){var Ce=new h(0,0),Se=0;for(Se=this.path.length-1;Se!==-1;Se--)if(this.path[Se].type==="begin"&&Ls(this.path[Se+1])==="object"&&typeof this.path[Se+1].x=="number"){Ce=new h(this.path[Se+1].x,this.path[Se+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new h(Ce.x,Ce.y)},z.prototype.lineTo=function(Ce,Se){if(isNaN(Ce)||isNaN(Se))throw io.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var $e=this.ctx.transform.applyToPoint(new h(Ce,Se));this.path.push({type:"lt",x:$e.x,y:$e.y}),this.ctx.lastPoint=new h($e.x,$e.y)},z.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),ge.call(this,null,!0)},z.prototype.quadraticCurveTo=function(Ce,Se,$e,ft){if(isNaN($e)||isNaN(ft)||isNaN(Ce)||isNaN(Se))throw io.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Je=this.ctx.transform.applyToPoint(new h($e,ft)),wt=this.ctx.transform.applyToPoint(new h(Ce,Se));this.path.push({type:"qct",x1:wt.x,y1:wt.y,x:Je.x,y:Je.y}),this.ctx.lastPoint=new h(Je.x,Je.y)},z.prototype.bezierCurveTo=function(Ce,Se,$e,ft,Je,wt){if(isNaN(Je)||isNaN(wt)||isNaN(Ce)||isNaN(Se)||isNaN($e)||isNaN(ft))throw io.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var it=this.ctx.transform.applyToPoint(new h(Je,wt)),ct=this.ctx.transform.applyToPoint(new h(Ce,Se)),_e=this.ctx.transform.applyToPoint(new h($e,ft));this.path.push({type:"bct",x1:ct.x,y1:ct.y,x2:_e.x,y2:_e.y,x:it.x,y:it.y}),this.ctx.lastPoint=new h(it.x,it.y)},z.prototype.arc=function(Ce,Se,$e,ft,Je,wt){if(isNaN(Ce)||isNaN(Se)||isNaN($e)||isNaN(ft)||isNaN(Je))throw io.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(wt=!!wt,!this.ctx.transform.isIdentity){var it=this.ctx.transform.applyToPoint(new h(Ce,Se));Ce=it.x,Se=it.y;var ct=this.ctx.transform.applyToPoint(new h(0,$e)),_e=this.ctx.transform.applyToPoint(new h(0,0));$e=Math.sqrt(Math.pow(ct.x-_e.x,2)+Math.pow(ct.y-_e.y,2))}Math.abs(Je-ft)>=2*Math.PI&&(ft=0,Je=2*Math.PI),this.path.push({type:"arc",x:Ce,y:Se,radius:$e,startAngle:ft,endAngle:Je,counterclockwise:wt})},z.prototype.arcTo=function(Ce,Se,$e,ft,Je){throw new Error("arcTo not implemented.")},z.prototype.rect=function(Ce,Se,$e,ft){if(isNaN(Ce)||isNaN(Se)||isNaN($e)||isNaN(ft))throw io.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Ce,Se),this.lineTo(Ce+$e,Se),this.lineTo(Ce+$e,Se+ft),this.lineTo(Ce,Se+ft),this.lineTo(Ce,Se),this.lineTo(Ce+$e,Se),this.lineTo(Ce,Se)},z.prototype.fillRect=function(Ce,Se,$e,ft){if(isNaN(Ce)||isNaN(Se)||isNaN($e)||isNaN(ft))throw io.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!U.call(this)){var Je={};this.lineCap!=="butt"&&(Je.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Je.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Ce,Se,$e,ft),this.fill(),Je.hasOwnProperty("lineCap")&&(this.lineCap=Je.lineCap),Je.hasOwnProperty("lineJoin")&&(this.lineJoin=Je.lineJoin)}},z.prototype.strokeRect=function(Ce,Se,$e,ft){if(isNaN(Ce)||isNaN(Se)||isNaN($e)||isNaN(ft))throw io.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");Z.call(this)||(this.beginPath(),this.rect(Ce,Se,$e,ft),this.stroke())},z.prototype.clearRect=function(Ce,Se,$e,ft){if(isNaN(Ce)||isNaN(Se)||isNaN($e)||isNaN(ft))throw io.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Ce,Se,$e,ft))},z.prototype.save=function(Ce){Ce=typeof Ce!="boolean"||Ce;for(var Se=this.pdf.internal.getCurrentPageInfo().pageNumber,$e=0;$e<this.pdf.internal.getNumberOfPages();$e++)this.pdf.setPage($e+1),this.pdf.internal.out("q");if(this.pdf.setPage(Se),Ce){this.ctx.fontSize=this.pdf.internal.getFontSize();var ft=new E(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ft}},z.prototype.restore=function(Ce){Ce=typeof Ce!="boolean"||Ce;for(var Se=this.pdf.internal.getCurrentPageInfo().pageNumber,$e=0;$e<this.pdf.internal.getNumberOfPages();$e++)this.pdf.setPage($e+1),this.pdf.internal.out("Q");this.pdf.setPage(Se),Ce&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},z.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var k=function(Ce){var Se,$e,ft,Je;if(Ce.isCanvasGradient===!0&&(Ce=Ce.getColor()),!Ce)return{r:0,g:0,b:0,a:0,style:Ce};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Ce))Se=0,$e=0,ft=0,Je=0;else{var wt=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Ce);if(wt!==null)Se=parseInt(wt[1]),$e=parseInt(wt[2]),ft=parseInt(wt[3]),Je=1;else if((wt=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Ce))!==null)Se=parseInt(wt[1]),$e=parseInt(wt[2]),ft=parseInt(wt[3]),Je=parseFloat(wt[4]);else{if(Je=1,typeof Ce=="string"&&Ce.charAt(0)!=="#"){var it=new ZJ(Ce);Ce=it.ok?it.toHex():"#000000"}Ce.length===4?(Se=Ce.substring(1,2),Se+=Se,$e=Ce.substring(2,3),$e+=$e,ft=Ce.substring(3,4),ft+=ft):(Se=Ce.substring(1,3),$e=Ce.substring(3,5),ft=Ce.substring(5,7)),Se=parseInt(Se,16),$e=parseInt($e,16),ft=parseInt(ft,16)}}return{r:Se,g:$e,b:ft,a:Je,style:Ce}},U=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},Z=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};z.prototype.fillText=function(Ce,Se,$e,ft){if(isNaN(Se)||isNaN($e)||typeof Ce!="string")throw io.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ft=isNaN(ft)?void 0:ft,!U.call(this)){var Je=ke(this.ctx.transform.rotation),wt=this.ctx.transform.scaleX;ye.call(this,{text:Ce,x:Se,y:$e,scale:wt,angle:Je,align:this.textAlign,maxWidth:ft})}},z.prototype.strokeText=function(Ce,Se,$e,ft){if(isNaN(Se)||isNaN($e)||typeof Ce!="string")throw io.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!Z.call(this)){ft=isNaN(ft)?void 0:ft;var Je=ke(this.ctx.transform.rotation),wt=this.ctx.transform.scaleX;ye.call(this,{text:Ce,x:Se,y:$e,scale:wt,renderingMode:"stroke",angle:Je,align:this.textAlign,maxWidth:ft})}},z.prototype.measureText=function(Ce){if(typeof Ce!="string")throw io.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Se=this.pdf,$e=this.pdf.internal.scaleFactor,ft=Se.internal.getFontSize(),Je=Se.getStringUnitWidth(Ce)*ft/Se.internal.scaleFactor,wt=function(it){var ct=(it=it||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ct}}),this};return new wt({width:Je*=Math.round(96*$e/72*1e4)/1e4})},z.prototype.scale=function(Ce,Se){if(isNaN(Ce)||isNaN(Se))throw io.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var $e=new w(Ce,0,0,Se,0,0);this.ctx.transform=this.ctx.transform.multiply($e)},z.prototype.rotate=function(Ce){if(isNaN(Ce))throw io.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Se=new w(Math.cos(Ce),Math.sin(Ce),-Math.sin(Ce),Math.cos(Ce),0,0);this.ctx.transform=this.ctx.transform.multiply(Se)},z.prototype.translate=function(Ce,Se){if(isNaN(Ce)||isNaN(Se))throw io.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var $e=new w(1,0,0,1,Ce,Se);this.ctx.transform=this.ctx.transform.multiply($e)},z.prototype.transform=function(Ce,Se,$e,ft,Je,wt){if(isNaN(Ce)||isNaN(Se)||isNaN($e)||isNaN(ft)||isNaN(Je)||isNaN(wt))throw io.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var it=new w(Ce,Se,$e,ft,Je,wt);this.ctx.transform=this.ctx.transform.multiply(it)},z.prototype.setTransform=function(Ce,Se,$e,ft,Je,wt){Ce=isNaN(Ce)?1:Ce,Se=isNaN(Se)?0:Se,$e=isNaN($e)?0:$e,ft=isNaN(ft)?1:ft,Je=isNaN(Je)?0:Je,wt=isNaN(wt)?0:wt,this.ctx.transform=new w(Ce,Se,$e,ft,Je,wt)};var q=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};z.prototype.drawImage=function(Ce,Se,$e,ft,Je,wt,it,ct,_e){var Jt=this.pdf.getImageProperties(Ce),Zt=1,Pa=1,Bt=1,la=1;ft!==void 0&&ct!==void 0&&(Bt=ct/ft,la=_e/Je,Zt=Jt.width/ft*ct/ft,Pa=Jt.height/Je*_e/Je),wt===void 0&&(wt=Se,it=$e,Se=0,$e=0),ft!==void 0&&ct===void 0&&(ct=ft,_e=Je),ft===void 0&&ct===void 0&&(ct=Jt.width,_e=Jt.height);for(var Rt,yr=this.ctx.transform.decompose(),za=ke(yr.rotate.shx),Va=new w,er=(Va=(Va=(Va=Va.multiply(yr.translate)).multiply(yr.skew)).multiply(yr.scale)).applyToRectangle(new n(wt-Se*Bt,it-$e*la,ft*Zt,Je*Pa)),cr=$.call(this,er),ur=[],Pr=0;Pr<cr.length;Pr+=1)ur.indexOf(cr[Pr])===-1&&ur.push(cr[Pr]);if(de(ur),this.autoPaging)for(var ka=ur[0],jr=ur[ur.length-1],pn=ka;pn<jr+1;pn++){this.pdf.setPage(pn);var Dn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Rn=pn===1?this.posY+this.margin[0]:this.margin[0],va=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Wa=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ca=pn===1?0:va+(pn-2)*Wa;if(this.ctx.clip_path.length!==0){var Qa=this.path;Rt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ie(Rt,this.posX+this.margin[3],-ca+Rn+this.ctx.prevPageLastElemOffset),he.call(this,"fill",!0),this.path=Qa}var gr=JSON.parse(JSON.stringify(er));gr=ie([gr],this.posX+this.margin[3],-ca+Rn+this.ctx.prevPageLastElemOffset)[0];var Zn=(pn>ka||pn<jr)&&q.call(this);Zn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Dn,Wa,null).clip().discardPath()),this.pdf.addImage(Ce,"JPEG",gr.x,gr.y,gr.w,gr.h,null,null,za),Zn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(Ce,"JPEG",er.x,er.y,er.w,er.h,null,null,za)};var $=function(Ce,Se,$e){var ft=[];Se=Se||this.pdf.internal.pageSize.width,$e=$e||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Je=this.posY+this.ctx.prevPageLastElemOffset;switch(Ce.type){default:case"mt":case"lt":ft.push(Math.floor((Ce.y+Je)/$e)+1);break;case"arc":ft.push(Math.floor((Ce.y+Je-Ce.radius)/$e)+1),ft.push(Math.floor((Ce.y+Je+Ce.radius)/$e)+1);break;case"qct":var wt=tt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Ce.x1,Ce.y1,Ce.x,Ce.y);ft.push(Math.floor((wt.y+Je)/$e)+1),ft.push(Math.floor((wt.y+wt.h+Je)/$e)+1);break;case"bct":var it=Ue(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Ce.x1,Ce.y1,Ce.x2,Ce.y2,Ce.x,Ce.y);ft.push(Math.floor((it.y+Je)/$e)+1),ft.push(Math.floor((it.y+it.h+Je)/$e)+1);break;case"rect":ft.push(Math.floor((Ce.y+Je)/$e)+1),ft.push(Math.floor((Ce.y+Ce.h+Je)/$e)+1)}for(var ct=0;ct<ft.length;ct+=1)for(;this.pdf.internal.getNumberOfPages()<ft[ct];)J.call(this);return ft},J=function(){var Ce=this.fillStyle,Se=this.strokeStyle,$e=this.font,ft=this.lineCap,Je=this.lineWidth,wt=this.lineJoin;this.pdf.addPage(),this.fillStyle=Ce,this.strokeStyle=Se,this.font=$e,this.lineCap=ft,this.lineWidth=Je,this.lineJoin=wt},ie=function(Ce,Se,$e){for(var ft=0;ft<Ce.length;ft++)switch(Ce[ft].type){case"bct":Ce[ft].x2+=Se,Ce[ft].y2+=$e;case"qct":Ce[ft].x1+=Se,Ce[ft].y1+=$e;case"mt":case"lt":case"arc":default:Ce[ft].x+=Se,Ce[ft].y+=$e}return Ce},de=function(Ce){return Ce.sort(function(Se,$e){return Se-$e})},ge=function(Ce,Se){for(var $e,ft,Je=this.fillStyle,wt=this.strokeStyle,it=this.lineCap,ct=this.lineWidth,_e=Math.abs(ct*this.ctx.transform.scaleX),Jt=this.lineJoin,Zt=JSON.parse(JSON.stringify(this.path)),Pa=JSON.parse(JSON.stringify(this.path)),Bt=[],la=0;la<Pa.length;la++)if(Pa[la].x!==void 0)for(var Rt=$.call(this,Pa[la]),yr=0;yr<Rt.length;yr+=1)Bt.indexOf(Rt[yr])===-1&&Bt.push(Rt[yr]);for(var za=0;za<Bt.length;za++)for(;this.pdf.internal.getNumberOfPages()<Bt[za];)J.call(this);if(de(Bt),this.autoPaging)for(var Va=Bt[0],er=Bt[Bt.length-1],cr=Va;cr<er+1;cr++){this.pdf.setPage(cr),this.fillStyle=Je,this.strokeStyle=wt,this.lineCap=it,this.lineWidth=_e,this.lineJoin=Jt;var ur=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Pr=cr===1?this.posY+this.margin[0]:this.margin[0],ka=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],jr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pn=cr===1?0:ka+(cr-2)*jr;if(this.ctx.clip_path.length!==0){var Dn=this.path;$e=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ie($e,this.posX+this.margin[3],-pn+Pr+this.ctx.prevPageLastElemOffset),he.call(this,Ce,!0),this.path=Dn}if(ft=JSON.parse(JSON.stringify(Zt)),this.path=ie(ft,this.posX+this.margin[3],-pn+Pr+this.ctx.prevPageLastElemOffset),Se===!1||cr===0){var Rn=(cr>Va||cr<er)&&q.call(this);Rn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ur,jr,null).clip().discardPath()),he.call(this,Ce,Se),Rn&&this.pdf.restoreGraphicsState()}this.lineWidth=ct}else this.lineWidth=_e,he.call(this,Ce,Se),this.lineWidth=ct;this.path=Zt},he=function(Ce,Se){if((Ce!=="stroke"||Se||!Z.call(this))&&(Ce==="stroke"||Se||!U.call(this))){for(var $e,ft,Je=[],wt=this.path,it=0;it<wt.length;it++){var ct=wt[it];switch(ct.type){case"begin":Je.push({begin:!0});break;case"close":Je.push({close:!0});break;case"mt":Je.push({start:ct,deltas:[],abs:[]});break;case"lt":var _e=Je.length;if(wt[it-1]&&!isNaN(wt[it-1].x)&&($e=[ct.x-wt[it-1].x,ct.y-wt[it-1].y],_e>0)){for(;_e>=0;_e--)if(Je[_e-1].close!==!0&&Je[_e-1].begin!==!0){Je[_e-1].deltas.push($e),Je[_e-1].abs.push(ct);break}}break;case"bct":$e=[ct.x1-wt[it-1].x,ct.y1-wt[it-1].y,ct.x2-wt[it-1].x,ct.y2-wt[it-1].y,ct.x-wt[it-1].x,ct.y-wt[it-1].y],Je[Je.length-1].deltas.push($e);break;case"qct":var Jt=wt[it-1].x+2/3*(ct.x1-wt[it-1].x),Zt=wt[it-1].y+2/3*(ct.y1-wt[it-1].y),Pa=ct.x+2/3*(ct.x1-ct.x),Bt=ct.y+2/3*(ct.y1-ct.y),la=ct.x,Rt=ct.y;$e=[Jt-wt[it-1].x,Zt-wt[it-1].y,Pa-wt[it-1].x,Bt-wt[it-1].y,la-wt[it-1].x,Rt-wt[it-1].y],Je[Je.length-1].deltas.push($e);break;case"arc":Je.push({deltas:[],abs:[],arc:!0}),Array.isArray(Je[Je.length-1].abs)&&Je[Je.length-1].abs.push(ct)}}ft=Se?null:Ce==="stroke"?"stroke":"fill";for(var yr=!1,za=0;za<Je.length;za++)if(Je[za].arc)for(var Va=Je[za].abs,er=0;er<Va.length;er++){var cr=Va[er];cr.type==="arc"?Re.call(this,cr.x,cr.y,cr.radius,cr.startAngle,cr.endAngle,cr.counterclockwise,void 0,Se,!yr):Me.call(this,cr.x,cr.y),yr=!0}else if(Je[za].close===!0)this.pdf.internal.out("h"),yr=!1;else if(Je[za].begin!==!0){var ur=Je[za].start.x,Pr=Je[za].start.y;ze.call(this,Je[za].deltas,ur,Pr),yr=!0}ft&&be.call(this,ft),Se&&De.call(this)}},Ae=function(Ce){var Se=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,$e=Se*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Ce-$e;case"top":return Ce+Se-$e;case"hanging":return Ce+Se-2*$e;case"middle":return Ce+Se/2-$e;case"ideographic":return Ce;case"alphabetic":default:return Ce}},me=function(Ce){return Ce+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};z.prototype.createLinearGradient=function(){var Ce=function(){};return Ce.colorStops=[],Ce.addColorStop=function(Se,$e){this.colorStops.push([Se,$e])},Ce.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Ce.isCanvasGradient=!0,Ce},z.prototype.createPattern=function(){return this.createLinearGradient()},z.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Re=function(Ce,Se,$e,ft,Je,wt,it,ct,_e){for(var Jt=Ie.call(this,$e,ft,Je,wt),Zt=0;Zt<Jt.length;Zt++){var Pa=Jt[Zt];Zt===0&&(_e?ne.call(this,Pa.x1+Ce,Pa.y1+Se):Me.call(this,Pa.x1+Ce,Pa.y1+Se)),Le.call(this,Ce,Se,Pa.x2,Pa.y2,Pa.x3,Pa.y3,Pa.x4,Pa.y4)}ct?De.call(this):be.call(this,it)},be=function(Ce){switch(Ce){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},De=function(){this.pdf.clip(),this.pdf.discardPath()},ne=function(Ce,Se){this.pdf.internal.out(a(Ce)+" "+r(Se)+" m")},ye=function(Ce){var Se;switch(Ce.align){case"right":case"end":Se="right";break;case"center":Se="center";break;case"left":case"start":default:Se="left"}var $e=this.pdf.getTextDimensions(Ce.text),ft=Ae.call(this,Ce.y),Je=me.call(this,ft)-$e.h,wt=this.ctx.transform.applyToPoint(new h(Ce.x,ft)),it=this.ctx.transform.decompose(),ct=new w;ct=(ct=(ct=ct.multiply(it.translate)).multiply(it.skew)).multiply(it.scale);for(var _e,Jt,Zt,Pa=this.ctx.transform.applyToRectangle(new n(Ce.x,ft,$e.w,$e.h)),Bt=ct.applyToRectangle(new n(Ce.x,Je,$e.w,$e.h)),la=$.call(this,Bt),Rt=[],yr=0;yr<la.length;yr+=1)Rt.indexOf(la[yr])===-1&&Rt.push(la[yr]);if(de(Rt),this.autoPaging)for(var za=Rt[0],Va=Rt[Rt.length-1],er=za;er<Va+1;er++){this.pdf.setPage(er);var cr=er===1?this.posY+this.margin[0]:this.margin[0],ur=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Pr=this.pdf.internal.pageSize.height-this.margin[2],ka=Pr-this.margin[0],jr=this.pdf.internal.pageSize.width-this.margin[1],pn=jr-this.margin[3],Dn=er===1?0:ur+(er-2)*ka;if(this.ctx.clip_path.length!==0){var Rn=this.path;_e=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ie(_e,this.posX+this.margin[3],-1*Dn+cr),he.call(this,"fill",!0),this.path=Rn}var va=ie([JSON.parse(JSON.stringify(Bt))],this.posX+this.margin[3],-Dn+cr+this.ctx.prevPageLastElemOffset)[0];Ce.scale>=.01&&(Jt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Jt*Ce.scale),Zt=this.lineWidth,this.lineWidth=Zt*Ce.scale);var Wa=this.autoPaging!=="text";if(Wa||va.y+va.h<=Pr){if(Wa||va.y>=cr&&va.x<=jr){var ca=Wa?Ce.text:this.pdf.splitTextToSize(Ce.text,Ce.maxWidth||jr-va.x)[0],Qa=ie([JSON.parse(JSON.stringify(Pa))],this.posX+this.margin[3],-Dn+cr+this.ctx.prevPageLastElemOffset)[0],gr=Wa&&(er>za||er<Va)&&q.call(this);gr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pn,ka,null).clip().discardPath()),this.pdf.text(ca,Qa.x,Qa.y,{angle:Ce.angle,align:Se,renderingMode:Ce.renderingMode}),gr&&this.pdf.restoreGraphicsState()}}else va.y<Pr&&(this.ctx.prevPageLastElemOffset+=Pr-va.y);Ce.scale>=.01&&(this.pdf.setFontSize(Jt),this.lineWidth=Zt)}else Ce.scale>=.01&&(Jt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Jt*Ce.scale),Zt=this.lineWidth,this.lineWidth=Zt*Ce.scale),this.pdf.text(Ce.text,wt.x+this.posX,wt.y+this.posY,{angle:Ce.angle,align:Se,renderingMode:Ce.renderingMode,maxWidth:Ce.maxWidth}),Ce.scale>=.01&&(this.pdf.setFontSize(Jt),this.lineWidth=Zt)},Me=function(Ce,Se,$e,ft){$e=$e||0,ft=ft||0,this.pdf.internal.out(a(Ce+$e)+" "+r(Se+ft)+" l")},ze=function(Ce,Se,$e){return this.pdf.lines(Ce,Se,$e,null,null)},Le=function(Ce,Se,$e,ft,Je,wt,it,ct){this.pdf.internal.out([e(s($e+Ce)),e(l(ft+Se)),e(s(Je+Ce)),e(l(wt+Se)),e(s(it+Ce)),e(l(ct+Se)),"c"].join(" "))},Ie=function(Ce,Se,$e,ft){for(var Je=2*Math.PI,wt=Math.PI/2;Se>$e;)Se-=Je;var it=Math.abs($e-Se);it<Je&&ft&&(it=Je-it);for(var ct=[],_e=ft?-1:1,Jt=Se;it>1e-5;){var Zt=Jt+_e*Math.min(it,wt);ct.push(qe.call(this,Ce,Jt,Zt)),it-=Math.abs(Zt-Jt),Jt=Zt}return ct},qe=function(Ce,Se,$e){var ft=($e-Se)/2,Je=Ce*Math.cos(ft),wt=Ce*Math.sin(ft),it=Je,ct=-wt,_e=it*it+ct*ct,Jt=_e+it*Je+ct*wt,Zt=4/3*(Math.sqrt(2*_e*Jt)-Jt)/(it*wt-ct*Je),Pa=it-Zt*ct,Bt=ct+Zt*it,la=Pa,Rt=-Bt,yr=ft+Se,za=Math.cos(yr),Va=Math.sin(yr);return{x1:Ce*Math.cos(Se),y1:Ce*Math.sin(Se),x2:Pa*za-Bt*Va,y2:Pa*Va+Bt*za,x3:la*za-Rt*Va,y3:la*Va+Rt*za,x4:Ce*Math.cos($e),y4:Ce*Math.sin($e)}},ke=function(Ce){return 180*Ce/Math.PI},tt=function(Ce,Se,$e,ft,Je,wt){var it=Ce+.5*($e-Ce),ct=Se+.5*(ft-Se),_e=Je+.5*($e-Je),Jt=wt+.5*(ft-wt),Zt=Math.min(Ce,Je,it,_e),Pa=Math.max(Ce,Je,it,_e),Bt=Math.min(Se,wt,ct,Jt),la=Math.max(Se,wt,ct,Jt);return new n(Zt,Bt,Pa-Zt,la-Bt)},Ue=function(Ce,Se,$e,ft,Je,wt,it,ct){var _e,Jt,Zt,Pa,Bt,la,Rt,yr,za,Va,er,cr,ur,Pr,ka=$e-Ce,jr=ft-Se,pn=Je-$e,Dn=wt-ft,Rn=it-Je,va=ct-wt;for(Jt=0;Jt<41;Jt++)za=(Rt=(Zt=Ce+(_e=Jt/40)*ka)+_e*((Bt=$e+_e*pn)-Zt))+_e*(Bt+_e*(Je+_e*Rn-Bt)-Rt),Va=(yr=(Pa=Se+_e*jr)+_e*((la=ft+_e*Dn)-Pa))+_e*(la+_e*(wt+_e*va-la)-yr),Jt==0?(er=za,cr=Va,ur=za,Pr=Va):(er=Math.min(er,za),cr=Math.min(cr,Va),ur=Math.max(ur,za),Pr=Math.max(Pr,Va));return new n(Math.round(er),Math.round(cr),Math.round(ur-er),Math.round(Pr-cr))},He=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Ce,Se,$e=(Ce=this.ctx.lineDash,Se=this.ctx.lineDashOffset,JSON.stringify({lineDash:Ce,lineDashOffset:Se}));this.prevLineDash!==$e&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=$e)}}})(jn.API),function(t){var e=function(l){var h,n,w,T,E,z,k,U,Z,q;for(n=[],w=0,T=(l+=h="\0\0\0\0".slice(l.length%4||4)).length;T>w;w+=4)(E=(l.charCodeAt(w)<<24)+(l.charCodeAt(w+1)<<16)+(l.charCodeAt(w+2)<<8)+l.charCodeAt(w+3))!==0?(z=(E=((E=((E=((E=(E-(q=E%85))/85)-(Z=E%85))/85)-(U=E%85))/85)-(k=E%85))/85)%85,n.push(z+33,k+33,U+33,Z+33,q+33)):n.push(122);return function($,J){for(var ie=J;ie>0;ie--)$.pop()}(n,h.length),String.fromCharCode.apply(String,n)+"~>"},a=function(l){var h,n,w,T,E,z=String,k="length",U=255,Z="charCodeAt",q="slice",$="replace";for(l[q](-2),l=l[q](0,-2)[$](/\s/g,"")[$]("z","!!!!!"),w=[],T=0,E=(l+=h="uuuuu"[q](l[k]%5||5))[k];E>T;T+=5)n=52200625*(l[Z](T)-33)+614125*(l[Z](T+1)-33)+7225*(l[Z](T+2)-33)+85*(l[Z](T+3)-33)+(l[Z](T+4)-33),w.push(U&n>>24,U&n>>16,U&n>>8,U&n);return function(J,ie){for(var de=ie;de>0;de--)J.pop()}(w,h[k]),z.fromCharCode.apply(z,w)},r=function(l){var h=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),h.test(l)===!1)return"";for(var n="",w=0;w<l.length;w+=2)n+=String.fromCharCode("0x"+(l[w]+l[w+1]));return n},s=function(l){for(var h=new Uint8Array(l.length),n=l.length;n--;)h[n]=l.charCodeAt(n);return l=(h=HM(h)).reduce(function(w,T){return w+String.fromCharCode(T)},"")};t.processDataByFilters=function(l,h){var n=0,w=l||"",T=[];for(typeof(h=h||[])=="string"&&(h=[h]),n=0;n<h.length;n+=1)switch(h[n]){case"ASCII85Decode":case"/ASCII85Decode":w=a(w),T.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":w=e(w),T.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":w=r(w),T.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":w=w.split("").map(function(E){return("0"+E.charCodeAt().toString(16)).slice(-2)}).join("")+">",T.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":w=s(w),T.push("/FlateDecode");break;default:throw new Error('The filter: "'+h[n]+'" is not implemented')}return{data:w,reverseChain:T.reverse().join(" ")}}}(jn.API),function(t){t.loadFile=function(e,a,r){return function(s,l,h){l=l!==!1,h=typeof h=="function"?h:function(){};var n=void 0;try{n=function(w,T,E){var z=new XMLHttpRequest,k=0,U=function(Z){var q=Z.length,$=[],J=String.fromCharCode;for(k=0;k<q;k+=1)$.push(J(255&Z.charCodeAt(k)));return $.join("")};if(z.open("GET",w,!T),z.overrideMimeType("text/plain; charset=x-user-defined"),T===!1&&(z.onload=function(){z.status===200?E(U(this.responseText)):E(void 0)}),z.send(null),T&&z.status===200)return U(z.responseText)}(s,l,h)}catch{}return n}(e,a,r)},t.loadImageFile=t.loadFile}(jn.API),function(t){function e(){return(Kn.html2canvas?Promise.resolve(Kn.html2canvas):BM(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load html2canvas: "+h))}).then(function(h){return h.default?h.default:h})}function a(){return(Kn.DOMPurify?Promise.resolve(Kn.DOMPurify):BM(()=>import("./purify.es-Ci5xwkH_.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load dompurify: "+h))}).then(function(h){return h.default?h.default:h})}var r=function(h){var n=Ls(h);return n==="undefined"?"undefined":n==="string"||h instanceof String?"string":n==="number"||h instanceof Number?"number":n==="function"||h instanceof Function?"function":h&&h.constructor===Array?"array":h&&h.nodeType===1?"element":n==="object"?"object":"unknown"},s=function(h,n){var w=document.createElement(h);for(var T in n.className&&(w.className=n.className),n.innerHTML&&n.dompurify&&(w.innerHTML=n.dompurify.sanitize(n.innerHTML)),n.style)w.style[T]=n.style[T];return w},l=function h(n){var w=Object.assign(h.convert(Promise.resolve()),JSON.parse(JSON.stringify(h.template))),T=h.convert(Promise.resolve(),w);return T=(T=T.setProgress(1,h,1,[h])).set(n)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(h,n){return h.__proto__=n||l.prototype,h},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(h,n){return this.then(function(){switch(n=n||function(w){switch(r(w)){case"string":return"string";case"element":return w.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(h)){case"string":return this.then(a).then(function(w){return this.set({src:s("div",{innerHTML:h,dompurify:w})})});case"element":return this.set({src:h});case"canvas":return this.set({canvas:h});case"img":return this.set({img:h});default:return this.error("Unknown source type.")}})},l.prototype.to=function(h){switch(h){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var h={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},n=function w(T,E){for(var z=T.nodeType===3?document.createTextNode(T.nodeValue):T.cloneNode(!1),k=T.firstChild;k;k=k.nextSibling)E!==!0&&k.nodeType===1&&k.nodeName==="SCRIPT"||z.appendChild(w(k,E));return T.nodeType===1&&(T.nodeName==="CANVAS"?(z.width=T.width,z.height=T.height,z.getContext("2d").drawImage(T,0,0)):T.nodeName!=="TEXTAREA"&&T.nodeName!=="SELECT"||(z.value=T.value),z.addEventListener("load",function(){z.scrollTop=T.scrollTop,z.scrollLeft=T.scrollLeft},!0)),z}(this.prop.src,this.opt.html2canvas.javascriptEnabled);n.tagName==="BODY"&&(h.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:h}),this.prop.container.appendChild(n),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var h=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(h).then(e).then(function(n){var w=Object.assign({},this.opt.html2canvas);return delete w.onrendered,n(this.prop.container,w)}).then(function(n){(this.opt.html2canvas.onrendered||function(){})(n),this.prop.canvas=n,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var h=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(h).then(e).then(function(n){var w=this.opt.jsPDF,T=this.opt.fontFaces,E=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,z=Object.assign({async:!0,allowTaint:!0,scale:E,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete z.onrendered,w.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,w.context2d.posX=this.opt.x,w.context2d.posY=this.opt.y,w.context2d.margin=this.opt.margin,w.context2d.fontFaces=T,T)for(var k=0;k<T.length;++k){var U=T[k],Z=U.src.find(function(q){return q.format==="truetype"});Z&&w.addFont(Z.url,U.ref.name,U.ref.style)}return z.windowHeight=z.windowHeight||0,z.windowHeight=z.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):z.windowHeight,w.context2d.save(!0),n(this.prop.container,z)}).then(function(n){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(n),this.prop.canvas=n,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var h=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=h})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(h,n,w){return(w=w||"pdf").toLowerCase()==="img"||w.toLowerCase()==="image"?this.outputImg(h,n):this.outputPdf(h,n)},l.prototype.outputPdf=function(h,n){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(h,n)})},l.prototype.outputImg=function(h){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(h){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+h+'" is not supported.'}})},l.prototype.save=function(h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(h?{filename:h}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(h){if(r(h)!=="object")return this;var n=Object.keys(h||{}).map(function(w){if(w in l.template.prop)return function(){this.prop[w]=h[w]};switch(w){case"margin":return this.setMargin.bind(this,h.margin);case"jsPDF":return function(){return this.opt.jsPDF=h.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,h.pageSize);default:return function(){this.opt[w]=h[w]}}},this);return this.then(function(){return this.thenList(n)})},l.prototype.get=function(h,n){return this.then(function(){var w=h in l.template.prop?this.prop[h]:this.opt[h];return n?n(w):w})},l.prototype.setMargin=function(h){return this.then(function(){switch(r(h)){case"number":h=[h,h,h,h];case"array":if(h.length===2&&(h=[h[0],h[1],h[0],h[1]]),h.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=h}).then(this.setPageSize)},l.prototype.setPageSize=function(h){function n(w,T){return Math.floor(w*T/72*96)}return this.then(function(){(h=h||jn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(h.inner={width:h.width-this.opt.margin[1]-this.opt.margin[3],height:h.height-this.opt.margin[0]-this.opt.margin[2]},h.inner.px={width:n(h.inner.width,h.k),height:n(h.inner.height,h.k)},h.inner.ratio=h.inner.height/h.inner.width),this.prop.pageSize=h})},l.prototype.setProgress=function(h,n,w,T){return h!=null&&(this.progress.val=h),n!=null&&(this.progress.state=n),w!=null&&(this.progress.n=w),T!=null&&(this.progress.stack=T),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(h,n,w,T){return this.setProgress(h?this.progress.val+h:null,n||null,w?this.progress.n+w:null,T?this.progress.stack.concat(T):null)},l.prototype.then=function(h,n){var w=this;return this.thenCore(h,n,function(T,E){return w.updateProgress(null,null,1,[T]),Promise.prototype.then.call(this,function(z){return w.updateProgress(null,T),z}).then(T,E).then(function(z){return w.updateProgress(1),z})})},l.prototype.thenCore=function(h,n,w){w=w||Promise.prototype.then,h&&(h=h.bind(this)),n&&(n=n.bind(this));var T=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:l.convert(Object.assign({},this),Promise.prototype),E=w.call(T,h,n);return l.convert(E,this.__proto__)},l.prototype.thenExternal=function(h,n){return Promise.prototype.then.call(this,h,n)},l.prototype.thenList=function(h){var n=this;return h.forEach(function(w){n=n.thenCore(w)}),n},l.prototype.catch=function(h){h&&(h=h.bind(this));var n=Promise.prototype.catch.call(this,h);return l.convert(n,this)},l.prototype.catchExternal=function(h){return Promise.prototype.catch.call(this,h)},l.prototype.error=function(h){return this.then(function(){throw new Error(h)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,jn.getPageSize=function(h,n,w){if(Ls(h)==="object"){var T=h;h=T.orientation,n=T.unit||n,w=T.format||w}n=n||"mm",w=w||"a4",h=(""+(h||"P")).toLowerCase();var E,z=(""+w).toLowerCase(),k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(n){case"pt":E=1;break;case"mm":E=72/25.4;break;case"cm":E=72/2.54;break;case"in":E=72;break;case"px":E=.75;break;case"pc":case"em":E=12;break;case"ex":E=6;break;default:throw"Invalid unit: "+n}var U,Z=0,q=0;if(k.hasOwnProperty(z))Z=k[z][1]/E,q=k[z][0]/E;else try{Z=w[1],q=w[0]}catch{throw new Error("Invalid format: "+w)}if(h==="p"||h==="portrait")h="p",q>Z&&(U=q,q=Z,Z=U);else{if(h!=="l"&&h!=="landscape")throw"Invalid orientation: "+h;h="l",Z>q&&(U=q,q=Z,Z=U)}return{width:q,height:Z,unit:n,k:E,orientation:h}},t.html=function(h,n){(n=n||{}).callback=n.callback||function(){},n.html2canvas=n.html2canvas||{},n.html2canvas.canvas=n.html2canvas.canvas||this.canvas,n.jsPDF=n.jsPDF||this,n.fontFaces=n.fontFaces?n.fontFaces.map(JM):null;var w=new l(n);return n.worker?w:w.from(h).doCallback()}}(jn.API),jn.API.addJS=function(t){return BZ=t,this.internal.events.subscribe("postPutResources",function(){RC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(RC+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),kZ=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+BZ+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){RC!==void 0&&kZ!==void 0&&this.internal.out("/Names <</JavaScript "+RC+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var a=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=a.outline.render().split(/\r\n/),l=0;l<s.length;l++){var h=s[l],n=r.exec(h);if(n!=null){var w=n[1];a.internal.newObjectDeferredBegin(w,!1)}a.internal.write(h)}if(this.outline.createNamedDestinations){var T=this.internal.pages.length,E=[];for(l=0;l<T;l++){var z=a.internal.newObject();E.push(z);var k=a.internal.getPageInfo(l+1);a.internal.write("<< /D["+k.objId+" 0 R /XYZ null null null]>> endobj")}var U=a.internal.newObject();for(a.internal.write("<< /Names [ "),l=0;l<E.length;l++)a.internal.write("(page_"+(l+1)+")"+E[l]+" 0 R");a.internal.write(" ] >>","endobj"),e=a.internal.newObject(),a.internal.write("<< /Dests "+U+" 0 R"),a.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var a=this;a.outline={createNamedDestinations:!1,root:{children:[]}},a.outline.add=function(r,s,l){var h={title:s,options:l,children:[]};return r==null&&(r=this.root),r.children.push(h),h},a.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=a,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},a.outline.genIds_r=function(r){r.id=a.internal.newObjectDeferred();for(var s=0;s<r.children.length;s++)this.genIds_r(r.children[s])},a.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},a.outline.renderItems=function(r){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,l=0;l<r.children.length;l++){var h=r.children[l];this.objStart(h),this.line("/Title "+this.makeString(h.title)),this.line("/Parent "+this.makeRef(r)),l>0&&this.line("/Prev "+this.makeRef(r.children[l-1])),l<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[l+1])),h.children.length>0&&(this.line("/First "+this.makeRef(h.children[0])),this.line("/Last "+this.makeRef(h.children[h.children.length-1])));var n=this.count=this.count_r({count:0},h);if(n>0&&this.line("/Count "+n),h.options&&h.options.pageNumber){var w=a.internal.getPageInfo(h.options.pageNumber);this.line("/Dest ["+w.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var T=0;T<r.children.length;T++)this.renderItems(r.children[T])},a.outline.line=function(r){this.ctx.val+=r+`\r
`},a.outline.makeRef=function(r){return r.id+" 0 R"},a.outline.makeString=function(r){return"("+a.internal.pdfEscape(r)+")"},a.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},a.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},a.outline.count_r=function(r,s){for(var l=0;l<s.children.length;l++)r.count++,this.count_r(r,s.children[l]);return r.count}}])}(jn.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(a,r,s,l,h,n){var w,T=this.decode.DCT_DECODE,E=null;if(typeof a=="string"||this.__addimage__.isArrayBuffer(a)||this.__addimage__.isArrayBufferView(a)){switch(a=h||a,a=this.__addimage__.isArrayBuffer(a)?new Uint8Array(a):a,(w=function(z){for(var k,U=256*z.charCodeAt(4)+z.charCodeAt(5),Z=z.length,q={width:0,height:0,numcomponents:1},$=4;$<Z;$+=2){if($+=U,e.indexOf(z.charCodeAt($+1))!==-1){k=256*z.charCodeAt($+5)+z.charCodeAt($+6),q={width:256*z.charCodeAt($+7)+z.charCodeAt($+8),height:k,numcomponents:z.charCodeAt($+9)};break}U=256*z.charCodeAt($+2)+z.charCodeAt($+3)}return q}(a=this.__addimage__.isArrayBufferView(a)?this.__addimage__.arrayBufferToBinaryString(a):a)).numcomponents){case 1:n=this.color_spaces.DEVICE_GRAY;break;case 4:n=this.color_spaces.DEVICE_CMYK;break;case 3:n=this.color_spaces.DEVICE_RGB}E={data:a,width:w.width,height:w.height,colorSpace:n,bitsPerComponent:8,filter:T,index:r,alias:s}}return E}}(jn.API);var A_,TC,GZ,jZ,ZZ,EPe=function(){var t,e,a;function r(l){var h,n,w,T,E,z,k,U,Z,q,$,J,ie,de;for(this.data=l,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},z=null;;){switch(h=this.readUInt32(),Z=(function(){var ge,he;for(he=[],ge=0;ge<4;++ge)he.push(String.fromCharCode(this.data[this.pos++]));return he}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(h);break;case"fcTL":z&&this.animation.frames.push(z),this.pos+=4,z={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},E=this.readUInt16(),T=this.readUInt16()||100,z.delay=1e3*E/T,z.disposeOp=this.data[this.pos++],z.blendOp=this.data[this.pos++],z.data=[];break;case"IDAT":case"fdAT":for(Z==="fdAT"&&(this.pos+=4,h-=4),l=(z!=null?z.data:void 0)||this.imgData,J=0;0<=h?J<h:J>h;0<=h?++J:--J)l.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(w=this.palette.length/3,this.transparency.indexed=this.read(h),this.transparency.indexed.length>w)throw new Error("More transparent colors than palette size");if((q=w-this.transparency.indexed.length)>0)for(ie=0;0<=q?ie<q:ie>q;0<=q?++ie:--ie)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(h)[0];break;case 2:this.transparency.rgb=this.read(h)}break;case"tEXt":k=($=this.read(h)).indexOf(0),U=String.fromCharCode.apply(String,$.slice(0,k)),this.text[U]=String.fromCharCode.apply(String,$.slice(k+1));break;case"IEND":return z&&this.animation.frames.push(z),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(de=this.colorType)===4||de===6,n=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*n,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=h}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(l){var h,n;for(n=[],h=0;0<=l?h<l:h>l;0<=l?++h:--h)n.push(this.data[this.pos++]);return n},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(l){var h=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*h),w=0,T=this;if(l==null&&(l=this.imgData),l.length===0)return new Uint8Array(0);function E(z,k,U,Z){var q,$,J,ie,de,ge,he,Ae,me,Re,be,De,ne,ye,Me,ze,Le,Ie,qe,ke,tt,Ue=Math.ceil((T.width-z)/U),He=Math.ceil((T.height-k)/Z),Ce=T.width==Ue&&T.height==He;for(ye=h*Ue,De=Ce?n:new Uint8Array(ye*He),ge=l.length,ne=0,$=0;ne<He&&w<ge;){switch(l[w++]){case 0:for(ie=Le=0;Le<ye;ie=Le+=1)De[$++]=l[w++];break;case 1:for(ie=Ie=0;Ie<ye;ie=Ie+=1)q=l[w++],de=ie<h?0:De[$-h],De[$++]=(q+de)%256;break;case 2:for(ie=qe=0;qe<ye;ie=qe+=1)q=l[w++],J=(ie-ie%h)/h,Me=ne&&De[(ne-1)*ye+J*h+ie%h],De[$++]=(Me+q)%256;break;case 3:for(ie=ke=0;ke<ye;ie=ke+=1)q=l[w++],J=(ie-ie%h)/h,de=ie<h?0:De[$-h],Me=ne&&De[(ne-1)*ye+J*h+ie%h],De[$++]=(q+Math.floor((de+Me)/2))%256;break;case 4:for(ie=tt=0;tt<ye;ie=tt+=1)q=l[w++],J=(ie-ie%h)/h,de=ie<h?0:De[$-h],ne===0?Me=ze=0:(Me=De[(ne-1)*ye+J*h+ie%h],ze=J&&De[(ne-1)*ye+(J-1)*h+ie%h]),he=de+Me-ze,Ae=Math.abs(he-de),Re=Math.abs(he-Me),be=Math.abs(he-ze),me=Ae<=Re&&Ae<=be?de:Re<=be?Me:ze,De[$++]=(q+me)%256;break;default:throw new Error("Invalid filter algorithm: "+l[w-1])}if(!Ce){var Se=((k+ne*Z)*T.width+z)*h,$e=ne*ye;for(ie=0;ie<Ue;ie+=1){for(var ft=0;ft<h;ft+=1)n[Se++]=De[$e++];Se+=(U-1)*h}}ne++}}return l=oPe(l),T.interlaceMethod==1?(E(0,0,8,8),E(4,0,8,8),E(0,4,4,8),E(2,0,4,4),E(0,2,2,4),E(1,0,2,2),E(0,1,1,2)):E(0,0,1,1),n},r.prototype.decodePalette=function(){var l,h,n,w,T,E,z,k,U;for(n=this.palette,E=this.transparency.indexed||[],T=new Uint8Array((E.length||0)+n.length),w=0,l=0,h=z=0,k=n.length;z<k;h=z+=3)T[w++]=n[h],T[w++]=n[h+1],T[w++]=n[h+2],T[w++]=(U=E[l++])!=null?U:255;return T},r.prototype.copyToImageData=function(l,h){var n,w,T,E,z,k,U,Z,q,$,J;if(w=this.colors,q=null,n=this.hasAlphaChannel,this.palette.length&&(q=(J=this._decodedPalette)!=null?J:this._decodedPalette=this.decodePalette(),w=4,n=!0),Z=(T=l.data||l).length,z=q||h,E=k=0,w===1)for(;E<Z;)U=q?4*h[E/4]:k,$=z[U++],T[E++]=$,T[E++]=$,T[E++]=$,T[E++]=n?z[U++]:255,k=U;else for(;E<Z;)U=q?4*h[E/4]:k,T[E++]=z[U++],T[E++]=z[U++],T[E++]=z[U++],T[E++]=n?z[U++]:255,k=U},r.prototype.decode=function(){var l;return l=new Uint8Array(this.width*this.height*4),this.copyToImageData(l,this.decodePixels()),l};var s=function(){if(Object.prototype.toString.call(Kn)==="[object Window]"){try{e=Kn.document.createElement("canvas"),a=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),t=function(l){var h;if(s()===!0)return a.width=l.width,a.height=l.height,a.clearRect(0,0,l.width,l.height),a.putImageData(l,0,0),(h=new Image).src=e.toDataURL(),h;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(l){var h,n,w,T,E,z,k,U;if(this.animation){for(U=[],n=E=0,z=(k=this.animation.frames).length;E<z;n=++E)h=k[n],w=l.createImageData(h.width,h.height),T=this.decodePixels(new Uint8Array(h.data)),this.copyToImageData(w,T),h.imageData=w,U.push(h.image=t(w));return U}},r.prototype.renderFrame=function(l,h){var n,w,T;return n=(w=this.animation.frames)[h],T=w[h-1],h===0&&l.clearRect(0,0,this.width,this.height),(T!=null?T.disposeOp:void 0)===1?l.clearRect(T.xOffset,T.yOffset,T.width,T.height):(T!=null?T.disposeOp:void 0)===2&&l.putImageData(T.imageData,T.xOffset,T.yOffset),n.blendOp===0&&l.clearRect(n.xOffset,n.yOffset,n.width,n.height),l.drawImage(n.image,n.xOffset,n.yOffset)},r.prototype.animate=function(l){var h,n,w,T,E,z,k=this;return n=0,z=this.animation,T=z.numFrames,w=z.frames,E=z.numPlays,(h=function(){var U,Z;if(U=n++%T,Z=w[U],k.renderFrame(l,U),T>1&&n/T<E)return k.animation._timeout=setTimeout(h,Z.delay)})()},r.prototype.stopAnimation=function(){var l;return clearTimeout((l=this.animation)!=null?l._timeout:void 0)},r.prototype.render=function(l){var h,n;return l._png&&l._png.stopAnimation(),l._png=this,l.width=this.width,l.height=this.height,h=l.getContext("2d"),this.animation?(this.decodeFrames(h),this.animate(h)):(n=h.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),h.putImageData(n,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function NPe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var a=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,s=t[e++],l=s>>7,h=1<<(7&s)+1;t[e++],t[e++];var n=null,w=null;l&&(n=e,w=h,e+=3*h);var T=!0,E=[],z=0,k=null,U=0,Z=null;for(this.width=a,this.height=r;T&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,Z=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((ne=t[e++])>=0))throw Error("Invalid block size");if(ne===0)break;e+=ne}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var q=t[e++];z=t[e++]|t[e++]<<8,k=t[e++],(1&q)==0&&(k=null),U=q>>2&7,e++;break;case 254:for(;;){if(!((ne=t[e++])>=0))throw Error("Invalid block size");if(ne===0)break;e+=ne}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var $=t[e++]|t[e++]<<8,J=t[e++]|t[e++]<<8,ie=t[e++]|t[e++]<<8,de=t[e++]|t[e++]<<8,ge=t[e++],he=ge>>6&1,Ae=1<<(7&ge)+1,me=n,Re=w,be=!1;ge>>7&&(be=!0,me=e,Re=Ae,e+=3*Ae);var De=e;for(e++;;){var ne;if(!((ne=t[e++])>=0))throw Error("Invalid block size");if(ne===0)break;e+=ne}E.push({x:$,y:J,width:ie,height:de,has_local_palette:be,palette_offset:me,palette_size:Re,data_offset:De,data_length:e-De,transparent_index:k,interlaced:!!he,delay:z,disposal:U});break;case 59:T=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return E.length},this.loopCount=function(){return Z},this.frameInfo=function(ye){if(ye<0||ye>=E.length)throw new Error("Frame index out of range.");return E[ye]},this.decodeAndBlitFrameBGRA=function(ye,Me){var ze=this.frameInfo(ye),Le=ze.width*ze.height,Ie=new Uint8Array(Le);qZ(t,ze.data_offset,Ie,Le);var qe=ze.palette_offset,ke=ze.transparent_index;ke===null&&(ke=256);var tt=ze.width,Ue=a-tt,He=tt,Ce=4*(ze.y*a+ze.x),Se=4*((ze.y+ze.height)*a+ze.x),$e=Ce,ft=4*Ue;ze.interlaced===!0&&(ft+=4*a*7);for(var Je=8,wt=0,it=Ie.length;wt<it;++wt){var ct=Ie[wt];if(He===0&&(He=tt,($e+=ft)>=Se&&(ft=4*Ue+4*a*(Je-1),$e=Ce+(tt+Ue)*(Je<<1),Je>>=1)),ct===ke)$e+=4;else{var _e=t[qe+3*ct],Jt=t[qe+3*ct+1],Zt=t[qe+3*ct+2];Me[$e++]=Zt,Me[$e++]=Jt,Me[$e++]=_e,Me[$e++]=255}--He}},this.decodeAndBlitFrameRGBA=function(ye,Me){var ze=this.frameInfo(ye),Le=ze.width*ze.height,Ie=new Uint8Array(Le);qZ(t,ze.data_offset,Ie,Le);var qe=ze.palette_offset,ke=ze.transparent_index;ke===null&&(ke=256);var tt=ze.width,Ue=a-tt,He=tt,Ce=4*(ze.y*a+ze.x),Se=4*((ze.y+ze.height)*a+ze.x),$e=Ce,ft=4*Ue;ze.interlaced===!0&&(ft+=4*a*7);for(var Je=8,wt=0,it=Ie.length;wt<it;++wt){var ct=Ie[wt];if(He===0&&(He=tt,($e+=ft)>=Se&&(ft=4*Ue+4*a*(Je-1),$e=Ce+(tt+Ue)*(Je<<1),Je>>=1)),ct===ke)$e+=4;else{var _e=t[qe+3*ct],Jt=t[qe+3*ct+1],Zt=t[qe+3*ct+2];Me[$e++]=_e,Me[$e++]=Jt,Me[$e++]=Zt,Me[$e++]=255}--He}}}function qZ(t,e,a,r){for(var s=t[e++],l=1<<s,h=l+1,n=h+1,w=s+1,T=(1<<w)-1,E=0,z=0,k=0,U=t[e++],Z=new Int32Array(4096),q=null;;){for(;E<16&&U!==0;)z|=t[e++]<<E,E+=8,U===1?U=t[e++]:--U;if(E<w)break;var $=z&T;if(z>>=w,E-=w,$!==l){if($===h)break;for(var J=$<n?$:q,ie=0,de=J;de>l;)de=Z[de]>>8,++ie;var ge=de;if(k+ie+(J!==$?1:0)>r)return void io.log("Warning, gif stream longer than expected.");a[k++]=ge;var he=k+=ie;for(J!==$&&(a[k++]=ge),de=J;ie--;)de=Z[de],a[--he]=255&de,de>>=8;q!==null&&n<4096&&(Z[n++]=q<<8|ge,n>=T+1&&w<12&&(++w,T=T<<1|1)),q=$}else n=h+1,T=(1<<(w=s+1))-1,q=null}return k!==r&&io.log("Warning, gif stream shorter than expected."),a}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function S5(t){var e,a,r,s,l,h=Math.floor,n=new Array(64),w=new Array(64),T=new Array(64),E=new Array(64),z=new Array(65535),k=new Array(65535),U=new Array(64),Z=new Array(64),q=[],$=0,J=7,ie=new Array(64),de=new Array(64),ge=new Array(64),he=new Array(256),Ae=new Array(2048),me=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Re=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],be=[0,1,2,3,4,5,6,7,8,9,10,11],De=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],ne=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],ye=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Me=[0,1,2,3,4,5,6,7,8,9,10,11],ze=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Le=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Ie(Ce,Se){for(var $e=0,ft=0,Je=new Array,wt=1;wt<=16;wt++){for(var it=1;it<=Ce[wt];it++)Je[Se[ft]]=[],Je[Se[ft]][0]=$e,Je[Se[ft]][1]=wt,ft++,$e++;$e*=2}return Je}function qe(Ce){for(var Se=Ce[0],$e=Ce[1]-1;$e>=0;)Se&1<<$e&&($|=1<<J),$e--,--J<0&&($==255?(ke(255),ke(0)):ke($),J=7,$=0)}function ke(Ce){q.push(Ce)}function tt(Ce){ke(Ce>>8&255),ke(255&Ce)}function Ue(Ce,Se,$e,ft,Je){for(var wt,it=Je[0],ct=Je[240],_e=function(Va,er){var cr,ur,Pr,ka,jr,pn,Dn,Rn,va,Wa,ca=0;for(va=0;va<8;++va){cr=Va[ca],ur=Va[ca+1],Pr=Va[ca+2],ka=Va[ca+3],jr=Va[ca+4],pn=Va[ca+5],Dn=Va[ca+6];var Qa=cr+(Rn=Va[ca+7]),gr=cr-Rn,Zn=ur+Dn,Mn=ur-Dn,mn=Pr+pn,en=Pr-pn,Er=ka+jr,As=ka-jr,Bi=Qa+Er,Qi=Qa-Er,Oo=Zn+mn,Ni=Zn-mn;Va[ca]=Bi+Oo,Va[ca+4]=Bi-Oo;var fn=.707106781*(Ni+Qi);Va[ca+2]=Qi+fn,Va[ca+6]=Qi-fn;var ui=.382683433*((Bi=As+en)-(Ni=Mn+gr)),Ec=.5411961*Bi+ui,Us=1.306562965*Ni+ui,Xt=.707106781*(Oo=en+Mn),xe=gr+Xt,Oe=gr-Xt;Va[ca+5]=Oe+Ec,Va[ca+3]=Oe-Ec,Va[ca+1]=xe+Us,Va[ca+7]=xe-Us,ca+=8}for(ca=0,va=0;va<8;++va){cr=Va[ca],ur=Va[ca+8],Pr=Va[ca+16],ka=Va[ca+24],jr=Va[ca+32],pn=Va[ca+40],Dn=Va[ca+48];var rt=cr+(Rn=Va[ca+56]),_t=cr-Rn,yt=ur+Dn,bt=ur-Dn,kt=Pr+pn,Et=Pr-pn,Ht=ka+jr,$t=ka-jr,qt=rt+Ht,Ra=rt-Ht,Ma=yt+kt,Ba=yt-kt;Va[ca]=qt+Ma,Va[ca+32]=qt-Ma;var _r=.707106781*(Ba+Ra);Va[ca+16]=Ra+_r,Va[ca+48]=Ra-_r;var Nr=.382683433*((qt=$t+Et)-(Ba=bt+_t)),Vr=.5411961*qt+Nr,Gr=1.306562965*Ba+Nr,zn=.707106781*(Ma=Et+bt),Jn=_t+zn,qr=_t-zn;Va[ca+40]=qr+Vr,Va[ca+24]=qr-Vr,Va[ca+8]=Jn+Gr,Va[ca+56]=Jn-Gr,ca++}for(va=0;va<64;++va)Wa=Va[va]*er[va],U[va]=Wa>0?Wa+.5|0:Wa-.5|0;return U}(Ce,Se),Jt=0;Jt<64;++Jt)Z[me[Jt]]=_e[Jt];var Zt=Z[0]-$e;$e=Z[0],Zt==0?qe(ft[0]):(qe(ft[k[wt=32767+Zt]]),qe(z[wt]));for(var Pa=63;Pa>0&&Z[Pa]==0;)Pa--;if(Pa==0)return qe(it),$e;for(var Bt,la=1;la<=Pa;){for(var Rt=la;Z[la]==0&&la<=Pa;)++la;var yr=la-Rt;if(yr>=16){Bt=yr>>4;for(var za=1;za<=Bt;++za)qe(ct);yr&=15}wt=32767+Z[la],qe(Je[(yr<<4)+k[wt]]),qe(z[wt]),la++}return Pa!=63&&qe(it),$e}function He(Ce){Ce=Math.min(Math.max(Ce,1),100),l!=Ce&&(function(Se){for(var $e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ft=0;ft<64;ft++){var Je=h(($e[ft]*Se+50)/100);Je=Math.min(Math.max(Je,1),255),n[me[ft]]=Je}for(var wt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],it=0;it<64;it++){var ct=h((wt[it]*Se+50)/100);ct=Math.min(Math.max(ct,1),255),w[me[it]]=ct}for(var _e=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Jt=0,Zt=0;Zt<8;Zt++)for(var Pa=0;Pa<8;Pa++)T[Jt]=1/(n[me[Jt]]*_e[Zt]*_e[Pa]*8),E[Jt]=1/(w[me[Jt]]*_e[Zt]*_e[Pa]*8),Jt++}(Ce<50?Math.floor(5e3/Ce):Math.floor(200-2*Ce)),l=Ce)}this.encode=function(Ce,Se){Se&&He(Se),q=new Array,$=0,J=7,tt(65496),tt(65504),tt(16),ke(74),ke(70),ke(73),ke(70),ke(0),ke(1),ke(1),ke(0),tt(1),tt(1),ke(0),ke(0),function(){tt(65499),tt(132),ke(0);for(var ur=0;ur<64;ur++)ke(n[ur]);ke(1);for(var Pr=0;Pr<64;Pr++)ke(w[Pr])}(),function(ur,Pr){tt(65472),tt(17),ke(8),tt(Pr),tt(ur),ke(3),ke(1),ke(17),ke(0),ke(2),ke(17),ke(1),ke(3),ke(17),ke(1)}(Ce.width,Ce.height),function(){tt(65476),tt(418),ke(0);for(var ur=0;ur<16;ur++)ke(Re[ur+1]);for(var Pr=0;Pr<=11;Pr++)ke(be[Pr]);ke(16);for(var ka=0;ka<16;ka++)ke(De[ka+1]);for(var jr=0;jr<=161;jr++)ke(ne[jr]);ke(1);for(var pn=0;pn<16;pn++)ke(ye[pn+1]);for(var Dn=0;Dn<=11;Dn++)ke(Me[Dn]);ke(17);for(var Rn=0;Rn<16;Rn++)ke(ze[Rn+1]);for(var va=0;va<=161;va++)ke(Le[va])}(),tt(65498),tt(12),ke(3),ke(1),ke(0),ke(2),ke(17),ke(3),ke(17),ke(0),ke(63),ke(0);var $e=0,ft=0,Je=0;$=0,J=7,this.encode.displayName="_encode_";for(var wt,it,ct,_e,Jt,Zt,Pa,Bt,la,Rt=Ce.data,yr=Ce.width,za=Ce.height,Va=4*yr,er=0;er<za;){for(wt=0;wt<Va;){for(Jt=Va*er+wt,Pa=-1,Bt=0,la=0;la<64;la++)Zt=Jt+(Bt=la>>3)*Va+(Pa=4*(7&la)),er+Bt>=za&&(Zt-=Va*(er+1+Bt-za)),wt+Pa>=Va&&(Zt-=wt+Pa-Va+4),it=Rt[Zt++],ct=Rt[Zt++],_e=Rt[Zt++],ie[la]=(Ae[it]+Ae[ct+256>>0]+Ae[_e+512>>0]>>16)-128,de[la]=(Ae[it+768>>0]+Ae[ct+1024>>0]+Ae[_e+1280>>0]>>16)-128,ge[la]=(Ae[it+1280>>0]+Ae[ct+1536>>0]+Ae[_e+1792>>0]>>16)-128;$e=Ue(ie,T,$e,e,r),ft=Ue(de,E,ft,a,s),Je=Ue(ge,E,Je,a,s),wt+=32}er+=8}if(J>=0){var cr=[];cr[1]=J+1,cr[0]=(1<<J+1)-1,qe(cr)}return tt(65497),new Uint8Array(q)},t=t||50,function(){for(var Ce=String.fromCharCode,Se=0;Se<256;Se++)he[Se]=Ce(Se)}(),e=Ie(Re,be),a=Ie(ye,Me),r=Ie(De,ne),s=Ie(ze,Le),function(){for(var Ce=1,Se=2,$e=1;$e<=15;$e++){for(var ft=Ce;ft<Se;ft++)k[32767+ft]=$e,z[32767+ft]=[],z[32767+ft][1]=$e,z[32767+ft][0]=ft;for(var Je=-(Se-1);Je<=-Ce;Je++)k[32767+Je]=$e,z[32767+Je]=[],z[32767+Je][1]=$e,z[32767+Je][0]=Se-1+Je;Ce<<=1,Se<<=1}}(),function(){for(var Ce=0;Ce<256;Ce++)Ae[Ce]=19595*Ce,Ae[Ce+256>>0]=38470*Ce,Ae[Ce+512>>0]=7471*Ce+32768,Ae[Ce+768>>0]=-11059*Ce,Ae[Ce+1024>>0]=-21709*Ce,Ae[Ce+1280>>0]=32768*Ce+8421375,Ae[Ce+1536>>0]=-27439*Ce,Ae[Ce+1792>>0]=-5329*Ce}(),He(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Rp(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function HZ(t){function e(Re){if(!Re)throw Error("assert :P")}function a(Re,be,De){for(var ne=0;4>ne;ne++)if(Re[be+ne]!=De.charCodeAt(ne))return!0;return!1}function r(Re,be,De,ne,ye){for(var Me=0;Me<ye;Me++)Re[be+Me]=De[ne+Me]}function s(Re,be,De,ne){for(var ye=0;ye<ne;ye++)Re[be+ye]=De}function l(Re){return new Int32Array(Re)}function h(Re,be){for(var De=[],ne=0;ne<Re;ne++)De.push(new be);return De}function n(Re,be){var De=[];return function ne(ye,Me,ze){for(var Le=ze[Me],Ie=0;Ie<Le&&(ye.push(ze.length>Me+1?[]:new be),!(ze.length<Me+1));Ie++)ne(ye[Ie],Me+1,ze)}(De,0,Re),De}var w=function(){var Re=this;function be(G,Q){for(var fe=1<<Q-1>>>0;G&fe;)fe>>>=1;return fe?(G&fe-1)+fe:G}function De(G,Q,fe,Ne,Ge){e(!(Ne%fe));do G[Q+(Ne-=fe)]=Ge;while(0<Ne)}function ne(G,Q,fe,Ne,Ge){if(e(2328>=Ge),512>=Ge)var Qe=l(512);else if((Qe=l(Ge))==null)return 0;return function(at,ut,pt,Ct,Qt,Pt){var Aa,ra,wa=ut,fa=1<<pt,vt=l(16),ta=l(16);for(e(Qt!=0),e(Ct!=null),e(at!=null),e(0<pt),ra=0;ra<Qt;++ra){if(15<Ct[ra])return 0;++vt[Ct[ra]]}if(vt[0]==Qt)return 0;for(ta[1]=0,Aa=1;15>Aa;++Aa){if(vt[Aa]>1<<Aa)return 0;ta[Aa+1]=ta[Aa]+vt[Aa]}for(ra=0;ra<Qt;++ra)Aa=Ct[ra],0<Ct[ra]&&(Pt[ta[Aa]++]=ra);if(ta[15]==1)return(Ct=new ye).g=0,Ct.value=Pt[0],De(at,wa,1,fa,Ct),fa;var Ga,Ka=-1,qa=fa-1,Sr=0,fr=1,rn=1,lr=1<<pt;for(ra=0,Aa=1,Qt=2;Aa<=pt;++Aa,Qt<<=1){if(fr+=rn<<=1,0>(rn-=vt[Aa]))return 0;for(;0<vt[Aa];--vt[Aa])(Ct=new ye).g=Aa,Ct.value=Pt[ra++],De(at,wa+Sr,Qt,lr,Ct),Sr=be(Sr,Aa)}for(Aa=pt+1,Qt=2;15>=Aa;++Aa,Qt<<=1){if(fr+=rn<<=1,0>(rn-=vt[Aa]))return 0;for(;0<vt[Aa];--vt[Aa]){if(Ct=new ye,(Sr&qa)!=Ka){for(wa+=lr,Ga=1<<(Ka=Aa)-pt;15>Ka&&!(0>=(Ga-=vt[Ka]));)++Ka,Ga<<=1;fa+=lr=1<<(Ga=Ka-pt),at[ut+(Ka=Sr&qa)].g=Ga+pt,at[ut+Ka].value=wa-ut-Ka}Ct.g=Aa-pt,Ct.value=Pt[ra++],De(at,wa+(Sr>>pt),Qt,lr,Ct),Sr=be(Sr,Aa)}}return fr!=2*ta[15]-1?0:fa}(G,Q,fe,Ne,Ge,Qe)}function ye(){this.value=this.g=0}function Me(){this.value=this.g=0}function ze(){this.G=h(5,ye),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=h(bs,Me)}function Le(G,Q,fe,Ne){e(G!=null),e(Q!=null),e(2147483648>Ne),G.Ca=254,G.I=0,G.b=-8,G.Ka=0,G.oa=Q,G.pa=fe,G.Jd=Q,G.Yc=fe+Ne,G.Zc=4<=Ne?fe+Ne-4+1:fe,wt(G)}function Ie(G,Q){for(var fe=0;0<Q--;)fe|=ct(G,128)<<Q;return fe}function qe(G,Q){var fe=Ie(G,Q);return it(G)?-fe:fe}function ke(G,Q,fe,Ne){var Ge,Qe=0;for(e(G!=null),e(Q!=null),e(4294967288>Ne),G.Sb=Ne,G.Ra=0,G.u=0,G.h=0,4<Ne&&(Ne=4),Ge=0;Ge<Ne;++Ge)Qe+=Q[fe+Ge]<<8*Ge;G.Ra=Qe,G.bb=Ne,G.oa=Q,G.pa=fe}function tt(G){for(;8<=G.u&&G.bb<G.Sb;)G.Ra>>>=8,G.Ra+=G.oa[G.pa+G.bb]<<Na-8>>>0,++G.bb,G.u-=8;$e(G)&&(G.h=1,G.u=0)}function Ue(G,Q){if(e(0<=Q),!G.h&&Q<=cc){var fe=Se(G)&Ai[Q];return G.u+=Q,tt(G),fe}return G.h=1,G.u=0}function He(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Ce(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Se(G){return G.Ra>>>(G.u&Na-1)>>>0}function $e(G){return e(G.bb<=G.Sb),G.h||G.bb==G.Sb&&G.u>Na}function ft(G,Q){G.u=Q,G.h=$e(G)}function Je(G){G.u>=bd&&(e(G.u>=bd),tt(G))}function wt(G){e(G!=null&&G.oa!=null),G.pa<G.Zc?(G.I=(G.oa[G.pa++]|G.I<<8)>>>0,G.b+=8):(e(G!=null&&G.oa!=null),G.pa<G.Yc?(G.b+=8,G.I=G.oa[G.pa++]|G.I<<8):G.Ka?G.b=0:(G.I<<=8,G.b+=8,G.Ka=1))}function it(G){return Ie(G,1)}function ct(G,Q){var fe=G.Ca;0>G.b&&wt(G);var Ne=G.b,Ge=fe*Q>>>8,Qe=(G.I>>>Ne>Ge)+0;for(Qe?(fe-=Ge,G.I-=Ge+1<<Ne>>>0):fe=Ge+1,Ne=fe,Ge=0;256<=Ne;)Ge+=8,Ne>>=8;return Ne=7^Ge+qs[Ne],G.b-=Ne,G.Ca=(fe<<Ne)-1,Qe}function _e(G,Q,fe){G[Q+0]=fe>>24&255,G[Q+1]=fe>>16&255,G[Q+2]=fe>>8&255,G[Q+3]=fe>>0&255}function Jt(G,Q){return G[Q+0]<<0|G[Q+1]<<8}function Zt(G,Q){return Jt(G,Q)|G[Q+2]<<16}function Pa(G,Q){return Jt(G,Q)|Jt(G,Q+2)<<16}function Bt(G,Q){var fe=1<<Q;return e(G!=null),e(0<Q),G.X=l(fe),G.X==null?0:(G.Mb=32-Q,G.Xa=Q,1)}function la(G,Q){e(G!=null),e(Q!=null),e(G.Xa==Q.Xa),r(Q.X,0,G.X,0,1<<Q.Xa)}function Rt(){this.X=[],this.Xa=this.Mb=0}function yr(G,Q,fe,Ne){e(fe!=null),e(Ne!=null);var Ge=fe[0],Qe=Ne[0];return Ge==0&&(Ge=(G*Qe+Q/2)/Q),Qe==0&&(Qe=(Q*Ge+G/2)/G),0>=Ge||0>=Qe?0:(fe[0]=Ge,Ne[0]=Qe,1)}function za(G,Q){return G+(1<<Q)-1>>>Q}function Va(G,Q){return((4278255360&G)+(4278255360&Q)>>>0&4278255360)+((16711935&G)+(16711935&Q)>>>0&16711935)>>>0}function er(G,Q){Re[Q]=function(fe,Ne,Ge,Qe,at,ut,pt){var Ct;for(Ct=0;Ct<at;++Ct){var Qt=Re[G](ut[pt+Ct-1],Ge,Qe+Ct);ut[pt+Ct]=Va(fe[Ne+Ct],Qt)}}}function cr(){this.ud=this.hd=this.jd=0}function ur(G,Q){return((4278124286&(G^Q))>>>1)+(G&Q)>>>0}function Pr(G){return 0<=G&&256>G?G:0>G?0:255<G?255:void 0}function ka(G,Q){return Pr(G+(G-Q+.5>>1))}function jr(G,Q,fe){return Math.abs(Q-fe)-Math.abs(G-fe)}function pn(G,Q,fe,Ne,Ge,Qe,at){for(Ne=Qe[at-1],fe=0;fe<Ge;++fe)Qe[at+fe]=Ne=Va(G[Q+fe],Ne)}function Dn(G,Q,fe,Ne,Ge){var Qe;for(Qe=0;Qe<fe;++Qe){var at=G[Q+Qe],ut=at>>8&255,pt=16711935&(pt=(pt=16711935&at)+((ut<<16)+ut));Ne[Ge+Qe]=(4278255360&at)+pt>>>0}}function Rn(G,Q){Q.jd=G>>0&255,Q.hd=G>>8&255,Q.ud=G>>16&255}function va(G,Q,fe,Ne,Ge,Qe){var at;for(at=0;at<Ne;++at){var ut=Q[fe+at],pt=ut>>>8,Ct=ut,Qt=255&(Qt=(Qt=ut>>>16)+((G.jd<<24>>24)*(pt<<24>>24)>>>5));Ct=255&(Ct=(Ct=Ct+((G.hd<<24>>24)*(pt<<24>>24)>>>5))+((G.ud<<24>>24)*(Qt<<24>>24)>>>5)),Ge[Qe+at]=(4278255360&ut)+(Qt<<16)+Ct}}function Wa(G,Q,fe,Ne,Ge){Re[Q]=function(Qe,at,ut,pt,Ct,Qt,Pt,Aa,ra){for(pt=Pt;pt<Aa;++pt)for(Pt=0;Pt<ra;++Pt)Ct[Qt++]=Ge(ut[Ne(Qe[at++])])},Re[G]=function(Qe,at,ut,pt,Ct,Qt,Pt){var Aa=8>>Qe.b,ra=Qe.Ea,wa=Qe.K[0],fa=Qe.w;if(8>Aa)for(Qe=(1<<Qe.b)-1,fa=(1<<Aa)-1;at<ut;++at){var vt,ta=0;for(vt=0;vt<ra;++vt)vt&Qe||(ta=Ne(pt[Ct++])),Qt[Pt++]=Ge(wa[ta&fa]),ta>>=Aa}else Re["VP8LMapColor"+fe](pt,Ct,wa,fa,Qt,Pt,at,ut,ra)}}function ca(G,Q,fe,Ne,Ge){for(fe=Q+fe;Q<fe;){var Qe=G[Q++];Ne[Ge++]=Qe>>16&255,Ne[Ge++]=Qe>>8&255,Ne[Ge++]=Qe>>0&255}}function Qa(G,Q,fe,Ne,Ge){for(fe=Q+fe;Q<fe;){var Qe=G[Q++];Ne[Ge++]=Qe>>16&255,Ne[Ge++]=Qe>>8&255,Ne[Ge++]=Qe>>0&255,Ne[Ge++]=Qe>>24&255}}function gr(G,Q,fe,Ne,Ge){for(fe=Q+fe;Q<fe;){var Qe=(at=G[Q++])>>16&240|at>>12&15,at=at>>0&240|at>>28&15;Ne[Ge++]=Qe,Ne[Ge++]=at}}function Zn(G,Q,fe,Ne,Ge){for(fe=Q+fe;Q<fe;){var Qe=(at=G[Q++])>>16&248|at>>13&7,at=at>>5&224|at>>3&31;Ne[Ge++]=Qe,Ne[Ge++]=at}}function Mn(G,Q,fe,Ne,Ge){for(fe=Q+fe;Q<fe;){var Qe=G[Q++];Ne[Ge++]=Qe>>0&255,Ne[Ge++]=Qe>>8&255,Ne[Ge++]=Qe>>16&255}}function mn(G,Q,fe,Ne,Ge,Qe){if(Qe==0)for(fe=Q+fe;Q<fe;)_e(Ne,((Qe=G[Q++])[0]>>24|Qe[1]>>8&65280|Qe[2]<<8&16711680|Qe[3]<<24)>>>0),Ge+=32;else r(Ne,Ge,G,Q,fe)}function en(G,Q){Re[Q][0]=Re[G+"0"],Re[Q][1]=Re[G+"1"],Re[Q][2]=Re[G+"2"],Re[Q][3]=Re[G+"3"],Re[Q][4]=Re[G+"4"],Re[Q][5]=Re[G+"5"],Re[Q][6]=Re[G+"6"],Re[Q][7]=Re[G+"7"],Re[Q][8]=Re[G+"8"],Re[Q][9]=Re[G+"9"],Re[Q][10]=Re[G+"10"],Re[Q][11]=Re[G+"11"],Re[Q][12]=Re[G+"12"],Re[Q][13]=Re[G+"13"],Re[Q][14]=Re[G+"0"],Re[Q][15]=Re[G+"0"]}function Er(G){return G==vu||G==Gu||G==mc||G==Bp}function As(){this.eb=[],this.size=this.A=this.fb=0}function Bi(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Qi(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new As,this.f.kb=new Bi,this.sd=null}function Oo(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ni(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function fn(G){return alert("todo:WebPSamplerProcessPlane"),G.T}function ui(G,Q){var fe=G.T,Ne=Q.ba.f.RGBA,Ge=Ne.eb,Qe=Ne.fb+G.ka*Ne.A,at=rl[Q.ba.S],ut=G.y,pt=G.O,Ct=G.f,Qt=G.N,Pt=G.ea,Aa=G.W,ra=Q.cc,wa=Q.dc,fa=Q.Mc,vt=Q.Nc,ta=G.ka,Ga=G.ka+G.T,Ka=G.U,qa=Ka+1>>1;for(ta==0?at(ut,pt,null,null,Ct,Qt,Pt,Aa,Ct,Qt,Pt,Aa,Ge,Qe,null,null,Ka):(at(Q.ec,Q.fc,ut,pt,ra,wa,fa,vt,Ct,Qt,Pt,Aa,Ge,Qe-Ne.A,Ge,Qe,Ka),++fe);ta+2<Ga;ta+=2)ra=Ct,wa=Qt,fa=Pt,vt=Aa,Qt+=G.Rc,Aa+=G.Rc,Qe+=2*Ne.A,at(ut,(pt+=2*G.fa)-G.fa,ut,pt,ra,wa,fa,vt,Ct,Qt,Pt,Aa,Ge,Qe-Ne.A,Ge,Qe,Ka);return pt+=G.fa,G.j+Ga<G.o?(r(Q.ec,Q.fc,ut,pt,Ka),r(Q.cc,Q.dc,Ct,Qt,qa),r(Q.Mc,Q.Nc,Pt,Aa,qa),fe--):1&Ga||at(ut,pt,null,null,Ct,Qt,Pt,Aa,Ct,Qt,Pt,Aa,Ge,Qe+Ne.A,null,null,Ka),fe}function Ec(G,Q,fe){var Ne=G.F,Ge=[G.J];if(Ne!=null){var Qe=G.U,at=Q.ba.S,ut=at==tl||at==mc;Q=Q.ba.f.RGBA;var pt=[0],Ct=G.ka;pt[0]=G.T,G.Kb&&(Ct==0?--pt[0]:(--Ct,Ge[0]-=G.width),G.j+G.ka+G.T==G.o&&(pt[0]=G.o-G.j-Ct));var Qt=Q.eb;Ct=Q.fb+Ct*Q.A,G=ai(Ne,Ge[0],G.width,Qe,pt,Qt,Ct+(ut?0:3),Q.A),e(fe==pt),G&&Er(at)&&cs(Qt,Ct,ut,Qe,pt,Q.A)}return 0}function Us(G){var Q=G.ma,fe=Q.ba.S,Ne=11>fe,Ge=fe==Nd||fe==Oh||fe==tl||fe==pl||fe==12||Er(fe);if(Q.memory=null,Q.Ib=null,Q.Jb=null,Q.Nd=null,!Wl(Q.Oa,G,Ge?11:12))return 0;if(Ge&&Er(fe)&&rr(),G.da)alert("todo:use_scaling");else{if(Ne){if(Q.Ib=fn,G.Kb){if(fe=G.U+1>>1,Q.memory=l(G.U+2*fe),Q.memory==null)return 0;Q.ec=Q.memory,Q.fc=0,Q.cc=Q.ec,Q.dc=Q.fc+G.U,Q.Mc=Q.cc,Q.Nc=Q.dc+fe,Q.Ib=ui,rr()}}else alert("todo:EmitYUV");Ge&&(Q.Jb=Ec,Ne&&ha())}if(Ne&&!Zu){for(G=0;256>G;++G)jc[G]=89858*(G-128)+Tu>>Dd,Zc[G]=-22014*(G-128)+Tu,Id[G]=-45773*(G-128),Kf[G]=113618*(G-128)+Tu>>Dd;for(G=Md;G<Gc;++G)Q=76283*(G-16)+Tu>>Dd,Ds[G-Md]=fl(Q,255),Zp[G-Md]=fl(Q+8>>4,15);Zu=1}return 1}function Xt(G){var Q=G.ma,fe=G.U,Ne=G.T;return e(!(1&G.ka)),0>=fe||0>=Ne?0:(fe=Q.Ib(G,Q),Q.Jb!=null&&Q.Jb(G,Q,fe),Q.Dc+=fe,1)}function xe(G){G.ma.memory=null}function Oe(G,Q,fe,Ne){return Ue(G,8)!=47?0:(Q[0]=Ue(G,14)+1,fe[0]=Ue(G,14)+1,Ne[0]=Ue(G,1),Ue(G,3)!=0?0:!G.h)}function rt(G,Q){if(4>G)return G+1;var fe=G-2>>1;return(2+(1&G)<<fe)+Ue(Q,fe)+1}function _t(G,Q){return 120<Q?Q-120:1<=(fe=((fe=Ql[Q-1])>>4)*G+(8-(15&fe)))?fe:1;var fe}function yt(G,Q,fe){var Ne=Se(fe),Ge=G[Q+=255&Ne].g-8;return 0<Ge&&(ft(fe,fe.u+8),Ne=Se(fe),Q+=G[Q].value,Q+=Ne&(1<<Ge)-1),ft(fe,fe.u+G[Q].g),G[Q].value}function bt(G,Q,fe){return fe.g+=G.g,fe.value+=G.value<<Q>>>0,e(8>=fe.g),G.g}function kt(G,Q,fe){var Ne=G.xc;return e((Q=Ne==0?0:G.vc[G.md*(fe>>Ne)+(Q>>Ne)])<G.Wb),G.Ya[Q]}function Et(G,Q,fe,Ne){var Ge=G.ab,Qe=G.c*Q,at=G.C;Q=at+Q;var ut=fe,pt=Ne;for(Ne=G.Ta,fe=G.Ua;0<Ge--;){var Ct=G.gc[Ge],Qt=at,Pt=Q,Aa=ut,ra=pt,wa=(pt=Ne,ut=fe,Ct.Ea);switch(e(Qt<Pt),e(Pt<=Ct.nc),Ct.hc){case 2:zh(Aa,ra,(Pt-Qt)*wa,pt,ut);break;case 0:var fa=Qt,vt=Pt,ta=pt,Ga=ut,Ka=(lr=Ct).Ea;fa==0&&(co(Aa,ra,null,null,1,ta,Ga),pn(Aa,ra+1,0,0,Ka-1,ta,Ga+1),ra+=Ka,Ga+=Ka,++fa);for(var qa=1<<lr.b,Sr=qa-1,fr=za(Ka,lr.b),rn=lr.K,lr=lr.w+(fa>>lr.b)*fr;fa<vt;){var vi=rn,xi=lr,qn=1;for(pf(Aa,ra,ta,Ga-Ka,1,ta,Ga);qn<Ka;){var ri=(qn&~Sr)+qa;ri>Ka&&(ri=Ka),(0,Yl[vi[xi++]>>8&15])(Aa,ra+ +qn,ta,Ga+qn-Ka,ri-qn,ta,Ga+qn),qn=ri}ra+=Ka,Ga+=Ka,++fa&Sr||(lr+=fr)}Pt!=Ct.nc&&r(pt,ut-wa,pt,ut+(Pt-Qt-1)*wa,wa);break;case 1:for(wa=Aa,vt=ra,Ka=(Aa=Ct.Ea)-(Ga=Aa&~(ta=(ra=1<<Ct.b)-1)),fa=za(Aa,Ct.b),qa=Ct.K,Ct=Ct.w+(Qt>>Ct.b)*fa;Qt<Pt;){for(Sr=qa,fr=Ct,rn=new cr,lr=vt+Ga,vi=vt+Aa;vt<lr;)Rn(Sr[fr++],rn),oh(rn,wa,vt,ra,pt,ut),vt+=ra,ut+=ra;vt<vi&&(Rn(Sr[fr++],rn),oh(rn,wa,vt,Ka,pt,ut),vt+=Ka,ut+=Ka),++Qt&ta||(Ct+=fa)}break;case 3:if(Aa==pt&&ra==ut&&0<Ct.b){for(vt=pt,Aa=wa=ut+(Pt-Qt)*wa-(Ga=(Pt-Qt)*za(Ct.Ea,Ct.b)),ra=pt,ta=ut,fa=[],Ga=(Ka=Ga)-1;0<=Ga;--Ga)fa[Ga]=ra[ta+Ga];for(Ga=Ka-1;0<=Ga;--Ga)vt[Aa+Ga]=fa[Ga];ho(Ct,Qt,Pt,pt,wa,pt,ut)}else ho(Ct,Qt,Pt,Aa,ra,pt,ut)}ut=Ne,pt=fe}pt!=fe&&r(Ne,fe,ut,pt,Qe)}function Ht(G,Q){var fe=G.V,Ne=G.Ba+G.c*G.C,Ge=Q-G.C;if(e(Q<=G.l.o),e(16>=Ge),0<Ge){var Qe=G.l,at=G.Ta,ut=G.Ua,pt=Qe.width;if(Et(G,Ge,fe,Ne),Ge=ut=[ut],e((fe=G.C)<(Ne=Q)),e(Qe.v<Qe.va),Ne>Qe.o&&(Ne=Qe.o),fe<Qe.j){var Ct=Qe.j-fe;fe=Qe.j,Ge[0]+=Ct*pt}if(fe>=Ne?fe=0:(Ge[0]+=4*Qe.v,Qe.ka=fe-Qe.j,Qe.U=Qe.va-Qe.v,Qe.T=Ne-fe,fe=1),fe){if(ut=ut[0],11>(fe=G.ca).S){var Qt=fe.f.RGBA,Pt=(Ne=fe.S,Ge=Qe.U,Qe=Qe.T,Ct=Qt.eb,Qt.A),Aa=Qe;for(Qt=Qt.fb+G.Ma*Qt.A;0<Aa--;){var ra=at,wa=ut,fa=Ge,vt=Ct,ta=Qt;switch(Ne){case pc:xl(ra,wa,fa,vt,ta);break;case Nd:Ro(ra,wa,fa,vt,ta);break;case vu:Ro(ra,wa,fa,vt,ta),cs(vt,ta,0,fa,1,0);break;case di:Pl(ra,wa,fa,vt,ta);break;case Oh:mn(ra,wa,fa,vt,ta,1);break;case Gu:mn(ra,wa,fa,vt,ta,1),cs(vt,ta,0,fa,1,0);break;case tl:mn(ra,wa,fa,vt,ta,0);break;case mc:mn(ra,wa,fa,vt,ta,0),cs(vt,ta,1,fa,1,0);break;case pl:xd(ra,wa,fa,vt,ta);break;case Bp:xd(ra,wa,fa,vt,ta),Xn(vt,ta,fa,1,0);break;case kc:Dc(ra,wa,fa,vt,ta);break;default:e(0)}ut+=pt,Qt+=Pt}G.Ma+=Qe}else alert("todo:EmitRescaledRowsYUVA");e(G.Ma<=fe.height)}}G.C=Q,e(G.C<=G.i)}function $t(G){var Q;if(0<G.ua)return 0;for(Q=0;Q<G.Wb;++Q){var fe=G.Ya[Q].G,Ne=G.Ya[Q].H;if(0<fe[1][Ne[1]+0].g||0<fe[2][Ne[2]+0].g||0<fe[3][Ne[3]+0].g)return 0}return 1}function qt(G,Q,fe,Ne,Ge,Qe){if(G.Z!=0){var at=G.qd,ut=G.rd;for(e(ml[G.Z]!=null);Q<fe;++Q)ml[G.Z](at,ut,Ne,Ge,Ne,Ge,Qe),at=Ne,ut=Ge,Ge+=Qe;G.qd=at,G.rd=ut}}function Ra(G,Q){var fe=G.l.ma,Ne=fe.Z==0||fe.Z==1?G.l.j:G.C;if(Ne=G.C<Ne?Ne:G.C,e(Q<=G.l.o),Q>Ne){var Ge=G.l.width,Qe=fe.ca,at=fe.tb+Ge*Ne,ut=G.V,pt=G.Ba+G.c*Ne,Ct=G.gc;e(G.ab==1),e(Ct[0].hc==3),bl(Ct[0],Ne,Q,ut,pt,Qe,at),qt(fe,Ne,Q,Qe,at,Ge)}G.C=G.Ma=Q}function Ma(G,Q,fe,Ne,Ge,Qe,at){var ut=G.$/Ne,pt=G.$%Ne,Ct=G.m,Qt=G.s,Pt=fe+G.$,Aa=Pt;Ge=fe+Ne*Ge;var ra=fe+Ne*Qe,wa=280+Qt.ua,fa=G.Pb?ut:16777216,vt=0<Qt.ua?Qt.Wa:null,ta=Qt.wc,Ga=Pt<ra?kt(Qt,pt,ut):null;e(G.C<Qe),e(ra<=Ge);var Ka=!1;e:for(;;){for(;Ka||Pt<ra;){var qa=0;if(ut>=fa){var Sr=Pt-fe;e((fa=G).Pb),fa.wd=fa.m,fa.xd=Sr,0<fa.s.ua&&la(fa.s.Wa,fa.s.vb),fa=ut+$f}if(pt&ta||(Ga=kt(Qt,pt,ut)),e(Ga!=null),Ga.Qb&&(Q[Pt]=Ga.qb,Ka=!0),!Ka)if(Je(Ct),Ga.jc){qa=Ct,Sr=Q;var fr=Pt,rn=Ga.pd[Se(qa)&bs-1];e(Ga.jc),256>rn.g?(ft(qa,qa.u+rn.g),Sr[fr]=rn.value,qa=0):(ft(qa,qa.u+rn.g-256),e(256<=rn.value),qa=rn.value),qa==0&&(Ka=!0)}else qa=yt(Ga.G[0],Ga.H[0],Ct);if(Ct.h)break;if(Ka||256>qa){if(!Ka)if(Ga.nd)Q[Pt]=(Ga.qb|qa<<8)>>>0;else{if(Je(Ct),Ka=yt(Ga.G[1],Ga.H[1],Ct),Je(Ct),Sr=yt(Ga.G[2],Ga.H[2],Ct),fr=yt(Ga.G[3],Ga.H[3],Ct),Ct.h)break;Q[Pt]=(fr<<24|Ka<<16|qa<<8|Sr)>>>0}if(Ka=!1,++Pt,++pt>=Ne&&(pt=0,++ut,at!=null&&ut<=Qe&&!(ut%16)&&at(G,ut),vt!=null))for(;Aa<Pt;)qa=Q[Aa++],vt.X[(506832829*qa&4294967295)>>>vt.Mb]=qa}else if(280>qa){if(qa=rt(qa-256,Ct),Sr=yt(Ga.G[4],Ga.H[4],Ct),Je(Ct),Sr=_t(Ne,Sr=rt(Sr,Ct)),Ct.h)break;if(Pt-fe<Sr||Ge-Pt<qa)break e;for(fr=0;fr<qa;++fr)Q[Pt+fr]=Q[Pt+fr-Sr];for(Pt+=qa,pt+=qa;pt>=Ne;)pt-=Ne,++ut,at!=null&&ut<=Qe&&!(ut%16)&&at(G,ut);if(e(Pt<=Ge),pt&ta&&(Ga=kt(Qt,pt,ut)),vt!=null)for(;Aa<Pt;)qa=Q[Aa++],vt.X[(506832829*qa&4294967295)>>>vt.Mb]=qa}else{if(!(qa<wa))break e;for(Ka=qa-280,e(vt!=null);Aa<Pt;)qa=Q[Aa++],vt.X[(506832829*qa&4294967295)>>>vt.Mb]=qa;qa=Pt,e(!(Ka>>>(Sr=vt).Xa)),Q[qa]=Sr.X[Ka],Ka=!0}Ka||e(Ct.h==$e(Ct))}if(G.Pb&&Ct.h&&Pt<Ge)e(G.m.h),G.a=5,G.m=G.wd,G.$=G.xd,0<G.s.ua&&la(G.s.vb,G.s.Wa);else{if(Ct.h)break e;at!=null&&at(G,ut>Qe?Qe:ut),G.a=0,G.$=Pt-fe}return 1}return G.a=3,0}function Ba(G){e(G!=null),G.vc=null,G.yc=null,G.Ya=null;var Q=G.Wa;Q!=null&&(Q.X=null),G.vb=null,e(G!=null)}function _r(){var G=new Im;return G==null?null:(G.a=0,G.xb=Fh,en("Predictor","VP8LPredictors"),en("Predictor","VP8LPredictors_C"),en("PredictorAdd","VP8LPredictorsAdd"),en("PredictorAdd","VP8LPredictorsAdd_C"),zh=Dn,oh=va,xl=ca,Ro=Qa,xd=gr,Dc=Zn,Pl=Mn,Re.VP8LMapColor32b=Os,Re.VP8LMapColor8b=Oc,G)}function Nr(G,Q,fe,Ne,Ge){var Qe=1,at=[G],ut=[Q],pt=Ne.m,Ct=Ne.s,Qt=null,Pt=0;e:for(;;){if(fe)for(;Qe&&Ue(pt,1);){var Aa=at,ra=ut,wa=Ne,fa=1,vt=wa.m,ta=wa.gc[wa.ab],Ga=Ue(vt,2);if(wa.Oc&1<<Ga)Qe=0;else{switch(wa.Oc|=1<<Ga,ta.hc=Ga,ta.Ea=Aa[0],ta.nc=ra[0],ta.K=[null],++wa.ab,e(4>=wa.ab),Ga){case 0:case 1:ta.b=Ue(vt,3)+2,fa=Nr(za(ta.Ea,ta.b),za(ta.nc,ta.b),0,wa,ta.K),ta.K=ta.K[0];break;case 3:var Ka,qa=Ue(vt,8)+1,Sr=16<qa?0:4<qa?1:2<qa?2:3;if(Aa[0]=za(ta.Ea,Sr),ta.b=Sr,Ka=fa=Nr(qa,1,0,wa,ta.K)){var fr,rn=qa,lr=ta,vi=1<<(8>>lr.b),xi=l(vi);if(xi==null)Ka=0;else{var qn=lr.K[0],ri=lr.w;for(xi[0]=lr.K[0][0],fr=1;fr<1*rn;++fr)xi[fr]=Va(qn[ri+fr],xi[fr-1]);for(;fr<4*vi;++fr)xi[fr]=0;lr.K[0]=null,lr.K[0]=xi,Ka=1}}fa=Ka;break;case 2:break;default:e(0)}Qe=fa}}if(at=at[0],ut=ut[0],Qe&&Ue(pt,1)&&!(Qe=1<=(Pt=Ue(pt,4))&&11>=Pt)){Ne.a=3;break e}var $i;if($i=Qe)t:{var kn,_n,ds,Fi=Ne,Bn=at,po=ut,wi=Pt,ss=fe,vn=Fi.m,Ii=Fi.s,Hs=[null],To=1,il=0,Vl=wu[wi];a:for(;;){if(ss&&Ue(vn,1)){var xs=Ue(vn,3)+2,zl=za(Bn,xs),Su=za(po,xs),Ca=zl*Su;if(!Nr(zl,Su,0,Fi,Hs))break a;for(Hs=Hs[0],Ii.xc=xs,kn=0;kn<Ca;++kn){var Ua=Hs[kn]>>8&65535;Hs[kn]=Ua,Ua>=To&&(To=Ua+1)}}if(vn.h)break a;for(_n=0;5>_n;++_n){var Ki=al[_n];!_n&&0<wi&&(Ki+=1<<wi),il<Ki&&(il=Ki)}var Oi=h(To*Vl,ye),Gt=To,Hp=h(Gt,ze);if(Hp==null)var uh=null;else e(65536>=Gt),uh=Hp;var ch=l(il);if(uh==null||ch==null||Oi==null){Fi.a=1;break a}var dh=Oi;for(kn=ds=0;kn<To;++kn){var Cu=uh[kn],hh=Cu.G,qu=Cu.H,Um=0,Wf=1,km=0;for(_n=0;5>_n;++_n){Ki=al[_n],hh[_n]=dh,qu[_n]=ds,!_n&&0<wi&&(Ki+=1<<wi);n:{var fh,Ol=Ki,Bh=Fi,qc=ch,Hc=dh,Yf=ds,$c=0,sl=Bh.m,Bm=Ue(sl,1);if(s(qc,0,0,Ol),Bm){var ao=Ue(sl,1)+1,Oy=Ue(sl,1),ph=Ue(sl,Oy==0?1:8);qc[ph]=1,ao==2&&(qc[ph=Ue(sl,8)]=1);var ni=1}else{var xn=l(19),Xf=Ue(sl,4)+4;if(19<Xf){Bh.a=3;var bu=0;break n}for(fh=0;fh<Xf;++fh)xn[_i[fh]]=Ue(sl,3);var Ld=void 0,xu=void 0,Kc=Bh,vf=xn,Gh=Ol,Dl=qc,wf=0,So=Kc.m,Fd=8,Jf=h(128,ye);r:for(;ne(Jf,0,7,vf,19);){if(Ue(So,1)){var Qf=2+2*Ue(So,3);if((Ld=2+Ue(So,Qf))>Gh)break r}else Ld=Gh;for(xu=0;xu<Gh&&Ld--;){Je(So);var mh=Jf[0+(127&Se(So))];ft(So,So.u+mh.g);var Wc=mh.value;if(16>Wc)Dl[xu++]=Wc,Wc!=0&&(Fd=Wc);else{var Yc=Wc==16,ep=Wc-16,Ud=Mh[ep],Pu=Ue(So,Dh[ep])+Ud;if(xu+Pu>Gh)break r;for(var Ac=Yc?Fd:0;0<Pu--;)Dl[xu++]=Ac}}wf=1;break r}wf||(Kc.a=3),ni=wf}(ni=ni&&!sl.h)&&($c=ne(Hc,Yf,8,qc,Ol)),ni&&$c!=0?bu=$c:(Bh.a=3,bu=0)}if(bu==0)break a;if(Wf&&Hi[_n]==1&&(Wf=dh[ds].g==0),Um+=dh[ds].g,ds+=bu,3>=_n){var eu,_c=ch[0];for(eu=1;eu<Ki;++eu)ch[eu]>_c&&(_c=ch[eu]);km+=_c}}if(Cu.nd=Wf,Cu.Qb=0,Wf&&(Cu.qb=(hh[3][qu[3]+0].value<<24|hh[1][qu[1]+0].value<<16|hh[2][qu[2]+0].value)>>>0,Um==0&&256>hh[0][qu[0]+0].value&&(Cu.Qb=1,Cu.qb+=hh[0][qu[0]+0].value<<8)),Cu.jc=!Cu.Qb&&6>km,Cu.jc){var Ps,tu=Cu;for(Ps=0;Ps<bs;++Ps){var Hu=Ps,$s=tu.pd[Hu],Eu=tu.G[0][tu.H[0]+Hu];256<=Eu.value?($s.g=Eu.g+256,$s.value=Eu.value):($s.g=0,$s.value=0,Hu>>=bt(Eu,8,$s),Hu>>=bt(tu.G[1][tu.H[1]+Hu],16,$s),Hu>>=bt(tu.G[2][tu.H[2]+Hu],0,$s),bt(tu.G[3][tu.H[3]+Hu],24,$s))}}}Ii.vc=Hs,Ii.Wb=To,Ii.Ya=uh,Ii.yc=Oi,$i=1;break t}$i=0}if(!(Qe=$i)){Ne.a=3;break e}if(0<Pt){if(Ct.ua=1<<Pt,!Bt(Ct.Wa,Pt)){Ne.a=1,Qe=0;break e}}else Ct.ua=0;var yh=Ne,tp=at,jh=ut,gh=yh.s,kd=gh.xc;if(yh.c=tp,yh.i=jh,gh.md=za(tp,kd),gh.wc=kd==0?-1:(1<<kd)-1,fe){Ne.xb=zy;break e}if((Qt=l(at*ut))==null){Ne.a=1,Qe=0;break e}Qe=(Qe=Ma(Ne,Qt,0,at,ut,ut,null))&&!pt.h;break e}return Qe?(Ge!=null?Ge[0]=Qt:(e(Qt==null),e(fe)),Ne.$=0,fe||Ba(Ct)):Ba(Ct),Qe}function Vr(G,Q){var fe=G.c*G.i,Ne=fe+Q+16*Q;return e(G.c<=Q),G.V=l(Ne),G.V==null?(G.Ta=null,G.Ua=0,G.a=1,0):(G.Ta=G.V,G.Ua=G.Ba+fe+Q,1)}function Gr(G,Q){var fe=G.C,Ne=Q-fe,Ge=G.V,Qe=G.Ba+G.c*fe;for(e(Q<=G.l.o);0<Ne;){var at=16<Ne?16:Ne,ut=G.l.ma,pt=G.l.width,Ct=pt*at,Qt=ut.ca,Pt=ut.tb+pt*fe,Aa=G.Ta,ra=G.Ua;Et(G,at,Ge,Qe),qi(Aa,ra,Qt,Pt,Ct),qt(ut,fe,fe+at,Qt,Pt,pt),Ne-=at,Ge+=at*G.c,fe+=at}e(fe==Q),G.C=G.Ma=Q}function zn(){this.ub=this.yd=this.td=this.Rb=0}function Jn(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function qr(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function yn(){this.Yb=function(){var G=[];return function Q(fe,Ne,Ge){for(var Qe=Ge[Ne],at=0;at<Qe&&(fe.push(Ge.length>Ne+1?[]:0),!(Ge.length<Ne+1));at++)Q(fe[at],Ne+1,Ge)}(G,0,[3,11]),G}()}function Hr(){this.jb=l(3),this.Wc=n([4,8],yn),this.Xc=n([4,17],yn)}function In(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function Vi(){this.ld=this.La=this.dd=this.tc=0}function Gi(){this.Na=this.la=0}function _s(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function vs(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Do(){this.uc=this.M=this.Nb=0,this.wa=Array(new Vi),this.Y=0,this.ya=Array(new vs),this.aa=0,this.l=new nc}function ws(){this.y=l(16),this.f=l(8),this.ea=l(8)}function ks(){this.cb=this.a=0,this.sc="",this.m=new He,this.Od=new zn,this.Kc=new Jn,this.ed=new In,this.Qa=new qr,this.Ic=this.$c=this.Aa=0,this.D=new Do,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=h(8,He),this.ia=0,this.pb=h(4,_s),this.Pa=new Hr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ws),this.Hd=0,this.rb=Array(new Gi),this.sb=0,this.wa=Array(new Vi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new vs),this.L=this.aa=0,this.gd=n([4,2],Vi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function nc(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Yo(){var G=new ks;return G!=null&&(G.a=0,G.sc="OK",G.cb=0,G.Xb=0,Vd||(Vd=_d)),G}function zi(G,Q,fe){return G.a==0&&(G.a=Q,G.sc=fe,G.cb=0),0}function Gl(G,Q,fe){return 3<=fe&&G[Q+0]==157&&G[Q+1]==1&&G[Q+2]==42}function Mo(G,Q){if(G==null)return 0;if(G.a=0,G.sc="OK",Q==null)return zi(G,2,"null VP8Io passed to VP8GetHeaders()");var fe=Q.data,Ne=Q.w,Ge=Q.ha;if(4>Ge)return zi(G,7,"Truncated header.");var Qe=fe[Ne+0]|fe[Ne+1]<<8|fe[Ne+2]<<16,at=G.Od;if(at.Rb=!(1&Qe),at.td=Qe>>1&7,at.yd=Qe>>4&1,at.ub=Qe>>5,3<at.td)return zi(G,3,"Incorrect keyframe parameters.");if(!at.yd)return zi(G,4,"Frame not displayable.");Ne+=3,Ge-=3;var ut=G.Kc;if(at.Rb){if(7>Ge)return zi(G,7,"cannot parse picture header");if(!Gl(fe,Ne,Ge))return zi(G,3,"Bad code word");ut.c=16383&(fe[Ne+4]<<8|fe[Ne+3]),ut.Td=fe[Ne+4]>>6,ut.i=16383&(fe[Ne+6]<<8|fe[Ne+5]),ut.Ud=fe[Ne+6]>>6,Ne+=7,Ge-=7,G.za=ut.c+15>>4,G.Ub=ut.i+15>>4,Q.width=ut.c,Q.height=ut.i,Q.Da=0,Q.j=0,Q.v=0,Q.va=Q.width,Q.o=Q.height,Q.da=0,Q.ib=Q.width,Q.hb=Q.height,Q.U=Q.width,Q.T=Q.height,s((Qe=G.Pa).jb,0,255,Qe.jb.length),e((Qe=G.Qa)!=null),Qe.Cb=0,Qe.Bb=0,Qe.Fb=1,s(Qe.Zb,0,0,Qe.Zb.length),s(Qe.Lb,0,0,Qe.Lb)}if(at.ub>Ge)return zi(G,7,"bad partition length");Le(Qe=G.m,fe,Ne,at.ub),Ne+=at.ub,Ge-=at.ub,at.Rb&&(ut.Ld=it(Qe),ut.Kd=it(Qe)),ut=G.Qa;var pt,Ct=G.Pa;if(e(Qe!=null),e(ut!=null),ut.Cb=it(Qe),ut.Cb){if(ut.Bb=it(Qe),it(Qe)){for(ut.Fb=it(Qe),pt=0;4>pt;++pt)ut.Zb[pt]=it(Qe)?qe(Qe,7):0;for(pt=0;4>pt;++pt)ut.Lb[pt]=it(Qe)?qe(Qe,6):0}if(ut.Bb)for(pt=0;3>pt;++pt)Ct.jb[pt]=it(Qe)?Ie(Qe,8):255}else ut.Bb=0;if(Qe.Ka)return zi(G,3,"cannot parse segment header");if((ut=G.ed).zd=it(Qe),ut.Tb=Ie(Qe,6),ut.wb=Ie(Qe,3),ut.Pc=it(Qe),ut.Pc&&it(Qe)){for(Ct=0;4>Ct;++Ct)it(Qe)&&(ut.vd[Ct]=qe(Qe,6));for(Ct=0;4>Ct;++Ct)it(Qe)&&(ut.od[Ct]=qe(Qe,6))}if(G.L=ut.Tb==0?0:ut.zd?1:2,Qe.Ka)return zi(G,3,"cannot parse filter header");var Qt=Ge;if(Ge=pt=Ne,Ne=pt+Qt,ut=Qt,G.Xb=(1<<Ie(G.m,2))-1,Qt<3*(Ct=G.Xb))fe=7;else{for(pt+=3*Ct,ut-=3*Ct,Qt=0;Qt<Ct;++Qt){var Pt=fe[Ge+0]|fe[Ge+1]<<8|fe[Ge+2]<<16;Pt>ut&&(Pt=ut),Le(G.Jc[+Qt],fe,pt,Pt),pt+=Pt,ut-=Pt,Ge+=3}Le(G.Jc[+Ct],fe,pt,ut),fe=pt<Ne?0:5}if(fe!=0)return zi(G,fe,"cannot parse partitions");for(fe=Ie(pt=G.m,7),Ge=it(pt)?qe(pt,4):0,Ne=it(pt)?qe(pt,4):0,ut=it(pt)?qe(pt,4):0,Ct=it(pt)?qe(pt,4):0,pt=it(pt)?qe(pt,4):0,Qt=G.Qa,Pt=0;4>Pt;++Pt){if(Qt.Cb){var Aa=Qt.Zb[Pt];Qt.Fb||(Aa+=fe)}else{if(0<Pt){G.pb[Pt]=G.pb[0];continue}Aa=fe}var ra=G.pb[Pt];ra.Sc[0]=yc[fl(Aa+Ge,127)],ra.Sc[1]=yf[fl(Aa+0,127)],ra.Eb[0]=2*yc[fl(Aa+Ne,127)],ra.Eb[1]=101581*yf[fl(Aa+ut,127)]>>16,8>ra.Eb[1]&&(ra.Eb[1]=8),ra.Qc[0]=yc[fl(Aa+Ct,117)],ra.Qc[1]=yf[fl(Aa+pt,127)],ra.lc=Aa+pt}if(!at.Rb)return zi(G,4,"Not a key frame.");for(it(Qe),at=G.Pa,fe=0;4>fe;++fe){for(Ge=0;8>Ge;++Ge)for(Ne=0;3>Ne;++Ne)for(ut=0;11>ut;++ut)Ct=ct(Qe,lh[fe][Ge][Ne][ut])?Ie(Qe,8):gf[fe][Ge][Ne][ut],at.Wc[fe][Ge].Yb[Ne][ut]=Ct;for(Ge=0;17>Ge;++Ge)at.Xc[fe][Ge]=at.Wc[fe][Vy[Ge]]}return G.kc=it(Qe),G.kc&&(G.Bd=Ie(Qe,8)),G.cb=1}function _d(G,Q,fe,Ne,Ge,Qe,at){var ut=Q[Ge].Yb[fe];for(fe=0;16>Ge;++Ge){if(!ct(G,ut[fe+0]))return Ge;for(;!ct(G,ut[fe+1]);)if(ut=Q[++Ge].Yb[0],fe=0,Ge==16)return 16;var pt=Q[Ge+1].Yb;if(ct(G,ut[fe+2])){var Ct=G,Qt=0;if(ct(Ct,(Aa=ut)[(Pt=fe)+3]))if(ct(Ct,Aa[Pt+6])){for(ut=0,Pt=2*(Qt=ct(Ct,Aa[Pt+8]))+(Aa=ct(Ct,Aa[Pt+9+Qt])),Qt=0,Aa=Ih[Pt];Aa[ut];++ut)Qt+=Qt+ct(Ct,Aa[ut]);Qt+=3+(8<<Pt)}else ct(Ct,Aa[Pt+7])?(Qt=7+2*ct(Ct,165),Qt+=ct(Ct,145)):Qt=5+ct(Ct,159);else Qt=ct(Ct,Aa[Pt+4])?3+ct(Ct,Aa[Pt+5]):2;ut=pt[2]}else Qt=1,ut=pt[1];pt=at+Lh[Ge],0>(Ct=G).b&&wt(Ct);var Pt,Aa=Ct.b,ra=(Pt=Ct.Ca>>1)-(Ct.I>>Aa)>>31;--Ct.b,Ct.Ca+=ra,Ct.Ca|=1,Ct.I-=(Pt+1&ra)<<Aa,Qe[pt]=((Qt^ra)-ra)*Ne[(0<Ge)+0]}return 16}function Nc(G){var Q=G.rb[G.sb-1];Q.la=0,Q.Na=0,s(G.zc,0,0,G.zc.length),G.ja=0}function ah(G,Q){if(G==null)return 0;if(Q==null)return zi(G,2,"NULL VP8Io parameter in VP8Decode().");if(!G.cb&&!Mo(G,Q))return 0;if(e(G.cb),Q.ac==null||Q.ac(Q)){Q.ob&&(G.L=0);var fe=_f[G.L];if(G.L==2?(G.yb=0,G.zb=0):(G.yb=Q.v-fe>>4,G.zb=Q.j-fe>>4,0>G.yb&&(G.yb=0),0>G.zb&&(G.zb=0)),G.Va=Q.o+15+fe>>4,G.Hb=Q.va+15+fe>>4,G.Hb>G.za&&(G.Hb=G.za),G.Va>G.Ub&&(G.Va=G.Ub),0<G.L){var Ne=G.ed;for(fe=0;4>fe;++fe){var Ge;if(G.Qa.Cb){var Qe=G.Qa.Lb[fe];G.Qa.Fb||(Qe+=Ne.Tb)}else Qe=Ne.Tb;for(Ge=0;1>=Ge;++Ge){var at=G.gd[fe][Ge],ut=Qe;if(Ne.Pc&&(ut+=Ne.vd[0],Ge&&(ut+=Ne.od[0])),0<(ut=0>ut?0:63<ut?63:ut)){var pt=ut;0<Ne.wb&&(pt=4<Ne.wb?pt>>2:pt>>1)>9-Ne.wb&&(pt=9-Ne.wb),1>pt&&(pt=1),at.dd=pt,at.tc=2*ut+pt,at.ld=40<=ut?2:15<=ut?1:0}else at.tc=0;at.La=Ge}}}fe=0}else zi(G,6,"Frame setup failed"),fe=G.a;if(fe=fe==0){if(fe){G.$c=0,0<G.Aa||(G.Ic=to);e:{fe=G.Ic,Ne=4*(pt=G.za);var Ct=32*pt,Qt=pt+1,Pt=0<G.L?pt*(0<G.Aa?2:1):0,Aa=(G.Aa==2?2:1)*pt;if((at=Ne+832+(Ge=3*(16*fe+_f[G.L])/2*Ct)+(Qe=G.Fa!=null&&0<G.Fa.length?G.Kc.c*G.Kc.i:0))!=at)fe=0;else{if(at>G.Vb){if(G.Vb=0,G.Ec=l(at),G.Fc=0,G.Ec==null){fe=zi(G,1,"no memory during frame initialization.");break e}G.Vb=at}at=G.Ec,ut=G.Fc,G.Ac=at,G.Bc=ut,ut+=Ne,G.Gd=h(Ct,ws),G.Hd=0,G.rb=h(Qt+1,Gi),G.sb=1,G.wa=Pt?h(Pt,Vi):null,G.Y=0,G.D.Nb=0,G.D.wa=G.wa,G.D.Y=G.Y,0<G.Aa&&(G.D.Y+=pt),e(!0),G.oc=at,G.pc=ut,ut+=832,G.ya=h(Aa,vs),G.aa=0,G.D.ya=G.ya,G.D.aa=G.aa,G.Aa==2&&(G.D.aa+=pt),G.R=16*pt,G.B=8*pt,pt=(Ct=_f[G.L])*G.R,Ct=Ct/2*G.B,G.sa=at,G.ta=ut+pt,G.qa=G.sa,G.ra=G.ta+16*fe*G.R+Ct,G.Ha=G.qa,G.Ia=G.ra+8*fe*G.B+Ct,G.$c=0,ut+=Ge,G.mb=Qe?at:null,G.nb=Qe?ut:null,e(ut+Qe<=G.Fc+G.Vb),Nc(G),s(G.Ac,G.Bc,0,Ne),fe=1}}if(fe){if(Q.ka=0,Q.y=G.sa,Q.O=G.ta,Q.f=G.qa,Q.N=G.ra,Q.ea=G.Ha,Q.Vd=G.Ia,Q.fa=G.R,Q.Rc=G.B,Q.F=null,Q.J=0,!Jl){for(fe=-255;255>=fe;++fe)is[255+fe]=0>fe?-fe:fe;for(fe=-1020;1020>=fe;++fe)Xl[1020+fe]=-128>fe?-128:127<fe?127:fe;for(fe=-112;112>=fe;++fe)Fc[112+fe]=-16>fe?-16:15<fe?15:fe;for(fe=-255;510>=fe;++fe)el[255+fe]=0>fe?0:255<fe?255:fe;Jl=1}dc=vd,gu=jl,mf=hu,Qs=oo,fo=Lo,Zi=Io,Pd=Qo,Ed=ji,eo=ns,Mc=Vh,hc=js,Au=ql,Ic=ko,_u=Td,Lc=lc,fc=Jo,Bu=us,Bo=ku,ju[0]=Bs,ju[1]=df,ju[2]=nh,ju[3]=Tn,ju[4]=ic,ju[5]=Xa,ju[6]=sc,ju[7]=an,ju[8]=Gs,ju[9]=An,gc[0]=bn,gc[1]=Fo,gc[2]=Uu,gc[3]=rh,gc[4]=lo,gc[5]=hr,gc[6]=zc,Ru[0]=fu,Ru[1]=Zl,Ru[2]=wd,Ru[3]=un,Ru[4]=Li,Ru[5]=Rs,Ru[6]=bi,fe=1}else fe=0}fe&&(fe=function(ra,wa){for(ra.M=0;ra.M<ra.Va;++ra.M){var fa,vt=ra.Jc[ra.M&ra.Xb],ta=ra.m,Ga=ra;for(fa=0;fa<Ga.za;++fa){var Ka=ta,qa=Ga,Sr=qa.Ac,fr=qa.Bc+4*fa,rn=qa.zc,lr=qa.ya[qa.aa+fa];if(qa.Qa.Bb?lr.$b=ct(Ka,qa.Pa.jb[0])?2+ct(Ka,qa.Pa.jb[2]):ct(Ka,qa.Pa.jb[1]):lr.$b=0,qa.kc&&(lr.Ad=ct(Ka,qa.Bd)),lr.Za=!ct(Ka,145)+0,lr.Za){var vi=lr.Ob,xi=0;for(qa=0;4>qa;++qa){var qn,ri=rn[0+qa];for(qn=0;4>qn;++qn){ri=Lm[Sr[fr+qn]][ri];for(var $i=zd[ct(Ka,ri[0])];0<$i;)$i=zd[2*$i+ct(Ka,ri[$i])];ri=-$i,Sr[fr+qn]=ri}r(vi,xi,Sr,fr,4),xi+=4,rn[0+qa]=ri}}else ri=ct(Ka,156)?ct(Ka,128)?1:3:ct(Ka,163)?2:0,lr.Ob[0]=ri,s(Sr,fr,ri,4),s(rn,0,ri,4);lr.Dd=ct(Ka,142)?ct(Ka,114)?ct(Ka,183)?1:3:2:0}if(Ga.m.Ka)return zi(ra,7,"Premature end-of-partition0 encountered.");for(;ra.ja<ra.za;++ra.ja){if(Ga=vt,Ka=(ta=ra).rb[ta.sb-1],Sr=ta.rb[ta.sb+ta.ja],fa=ta.ya[ta.aa+ta.ja],fr=ta.kc?fa.Ad:0)Ka.la=Sr.la=0,fa.Za||(Ka.Na=Sr.Na=0),fa.Hc=0,fa.Gc=0,fa.ia=0;else{var kn,_n;if(Ka=Sr,Sr=Ga,fr=ta.Pa.Xc,rn=ta.ya[ta.aa+ta.ja],lr=ta.pb[rn.$b],qa=rn.ad,vi=0,xi=ta.rb[ta.sb-1],ri=qn=0,s(qa,vi,0,384),rn.Za)var ds=0,Fi=fr[3];else{$i=l(16);var Bn=Ka.Na+xi.Na;if(Bn=Vd(Sr,fr[1],Bn,lr.Eb,0,$i,0),Ka.Na=xi.Na=(0<Bn)+0,1<Bn)dc($i,0,qa,vi);else{var po=$i[0]+3>>3;for($i=0;256>$i;$i+=16)qa[vi+$i]=po}ds=1,Fi=fr[0]}var wi=15&Ka.la,ss=15&xi.la;for($i=0;4>$i;++$i){var vn=1&ss;for(po=_n=0;4>po;++po)wi=wi>>1|(vn=(Bn=Vd(Sr,Fi,Bn=vn+(1&wi),lr.Sc,ds,qa,vi))>ds)<<7,_n=_n<<2|(3<Bn?3:1<Bn?2:qa[vi+0]!=0),vi+=16;wi>>=4,ss=ss>>1|vn<<7,qn=(qn<<8|_n)>>>0}for(Fi=wi,ds=ss>>4,kn=0;4>kn;kn+=2){for(_n=0,wi=Ka.la>>4+kn,ss=xi.la>>4+kn,$i=0;2>$i;++$i){for(vn=1&ss,po=0;2>po;++po)Bn=vn+(1&wi),wi=wi>>1|(vn=0<(Bn=Vd(Sr,fr[2],Bn,lr.Qc,0,qa,vi)))<<3,_n=_n<<2|(3<Bn?3:1<Bn?2:qa[vi+0]!=0),vi+=16;wi>>=2,ss=ss>>1|vn<<5}ri|=_n<<4*kn,Fi|=wi<<4<<kn,ds|=(240&ss)<<kn}Ka.la=Fi,xi.la=ds,rn.Hc=qn,rn.Gc=ri,rn.ia=43690&ri?0:lr.ia,fr=!(qn|ri)}if(0<ta.L&&(ta.wa[ta.Y+ta.ja]=ta.gd[fa.$b][fa.Za],ta.wa[ta.Y+ta.ja].La|=!fr),Ga.Ka)return zi(ra,7,"Premature end-of-file encountered.")}if(Nc(ra),ta=wa,Ga=1,fa=(vt=ra).D,Ka=0<vt.L&&vt.M>=vt.zb&&vt.M<=vt.Va,vt.Aa==0)e:{if(fa.M=vt.M,fa.uc=Ka,vr(vt,fa),Ga=1,fa=(_n=vt.D).Nb,Ka=(ri=_f[vt.L])*vt.R,Sr=ri/2*vt.B,$i=16*fa*vt.R,po=8*fa*vt.B,fr=vt.sa,rn=vt.ta-Ka+$i,lr=vt.qa,qa=vt.ra-Sr+po,vi=vt.Ha,xi=vt.Ia-Sr+po,ss=(wi=_n.M)==0,qn=wi>=vt.Va-1,vt.Aa==2&&vr(vt,_n),_n.uc)for(vn=(Bn=vt).D.M,e(Bn.D.uc),_n=Bn.yb;_n<Bn.Hb;++_n){ds=_n,Fi=vn;var Ii=(Hs=(Ki=Bn).D).Nb;kn=Ki.R;var Hs=Hs.wa[Hs.Y+ds],To=Ki.sa,il=Ki.ta+16*Ii*kn+16*ds,Vl=Hs.dd,xs=Hs.tc;if(xs!=0)if(e(3<=xs),Ki.L==1)0<ds&&fc(To,il,kn,xs+4),Hs.La&&Bo(To,il,kn,xs),0<Fi&&Lc(To,il,kn,xs+4),Hs.La&&Bu(To,il,kn,xs);else{var zl=Ki.B,Su=Ki.qa,Ca=Ki.ra+8*Ii*zl+8*ds,Ua=Ki.Ha,Ki=Ki.Ia+8*Ii*zl+8*ds;Ii=Hs.ld,0<ds&&(Ed(To,il,kn,xs+4,Vl,Ii),Mc(Su,Ca,Ua,Ki,zl,xs+4,Vl,Ii)),Hs.La&&(Au(To,il,kn,xs,Vl,Ii),_u(Su,Ca,Ua,Ki,zl,xs,Vl,Ii)),0<Fi&&(Pd(To,il,kn,xs+4,Vl,Ii),eo(Su,Ca,Ua,Ki,zl,xs+4,Vl,Ii)),Hs.La&&(hc(To,il,kn,xs,Vl,Ii),Ic(Su,Ca,Ua,Ki,zl,xs,Vl,Ii))}}if(vt.ia&&alert("todo:DitherRow"),ta.put!=null){if(_n=16*wi,wi=16*(wi+1),ss?(ta.y=vt.sa,ta.O=vt.ta+$i,ta.f=vt.qa,ta.N=vt.ra+po,ta.ea=vt.Ha,ta.W=vt.Ia+po):(_n-=ri,ta.y=fr,ta.O=rn,ta.f=lr,ta.N=qa,ta.ea=vi,ta.W=xi),qn||(wi-=ri),wi>ta.o&&(wi=ta.o),ta.F=null,ta.J=null,vt.Fa!=null&&0<vt.Fa.length&&_n<wi&&(ta.J=ff(vt,ta,_n,wi-_n),ta.F=vt.mb,ta.F==null&&ta.F.length==0)){Ga=zi(vt,3,"Could not decode alpha data.");break e}_n<ta.j&&(ri=ta.j-_n,_n=ta.j,e(!(1&ri)),ta.O+=vt.R*ri,ta.N+=vt.B*(ri>>1),ta.W+=vt.B*(ri>>1),ta.F!=null&&(ta.J+=ta.width*ri)),_n<wi&&(ta.O+=ta.v,ta.N+=ta.v>>1,ta.W+=ta.v>>1,ta.F!=null&&(ta.J+=ta.v),ta.ka=_n-ta.j,ta.U=ta.va-ta.v,ta.T=wi-_n,Ga=ta.put(ta))}fa+1!=vt.Ic||qn||(r(vt.sa,vt.ta-Ka,fr,rn+16*vt.R,Ka),r(vt.qa,vt.ra-Sr,lr,qa+8*vt.B,Sr),r(vt.Ha,vt.Ia-Sr,vi,xi+8*vt.B,Sr))}if(!Ga)return zi(ra,6,"Output aborted.")}return 1}(G,Q)),Q.bc!=null&&Q.bc(Q),fe&=1}return fe?(G.cb=0,fe):0}function du(G,Q,fe,Ne,Ge){Ge=G[Q+fe+32*Ne]+(Ge>>3),G[Q+fe+32*Ne]=-256&Ge?0>Ge?0:255:Ge}function Vc(G,Q,fe,Ne,Ge,Qe){du(G,Q,0,fe,Ne+Ge),du(G,Q,1,fe,Ne+Qe),du(G,Q,2,fe,Ne-Qe),du(G,Q,3,fe,Ne-Ge)}function hl(G){return(20091*G>>16)+G}function Xs(G,Q,fe,Ne){var Ge,Qe=0,at=l(16);for(Ge=0;4>Ge;++Ge){var ut=G[Q+0]+G[Q+8],pt=G[Q+0]-G[Q+8],Ct=(35468*G[Q+4]>>16)-hl(G[Q+12]),Qt=hl(G[Q+4])+(35468*G[Q+12]>>16);at[Qe+0]=ut+Qt,at[Qe+1]=pt+Ct,at[Qe+2]=pt-Ct,at[Qe+3]=ut-Qt,Qe+=4,Q++}for(Ge=Qe=0;4>Ge;++Ge)ut=(G=at[Qe+0]+4)+at[Qe+8],pt=G-at[Qe+8],Ct=(35468*at[Qe+4]>>16)-hl(at[Qe+12]),du(fe,Ne,0,0,ut+(Qt=hl(at[Qe+4])+(35468*at[Qe+12]>>16))),du(fe,Ne,1,0,pt+Ct),du(fe,Ne,2,0,pt-Ct),du(fe,Ne,3,0,ut-Qt),Qe++,Ne+=32}function Io(G,Q,fe,Ne){var Ge=G[Q+0]+4,Qe=35468*G[Q+4]>>16,at=hl(G[Q+4]),ut=35468*G[Q+1]>>16;Vc(fe,Ne,0,Ge+at,G=hl(G[Q+1]),ut),Vc(fe,Ne,1,Ge+Qe,G,ut),Vc(fe,Ne,2,Ge-Qe,G,ut),Vc(fe,Ne,3,Ge-at,G,ut)}function jl(G,Q,fe,Ne,Ge){Xs(G,Q,fe,Ne),Ge&&Xs(G,Q+16,fe,Ne+4)}function hu(G,Q,fe,Ne){gu(G,Q+0,fe,Ne,1),gu(G,Q+32,fe,Ne+128,1)}function oo(G,Q,fe,Ne){var Ge;for(G=G[Q+0]+4,Ge=0;4>Ge;++Ge)for(Q=0;4>Q;++Q)du(fe,Ne,Q,Ge,G)}function Lo(G,Q,fe,Ne){G[Q+0]&&Qs(G,Q+0,fe,Ne),G[Q+16]&&Qs(G,Q+16,fe,Ne+4),G[Q+32]&&Qs(G,Q+32,fe,Ne+128),G[Q+48]&&Qs(G,Q+48,fe,Ne+128+4)}function vd(G,Q,fe,Ne){var Ge,Qe=l(16);for(Ge=0;4>Ge;++Ge){var at=G[Q+0+Ge]+G[Q+12+Ge],ut=G[Q+4+Ge]+G[Q+8+Ge],pt=G[Q+4+Ge]-G[Q+8+Ge],Ct=G[Q+0+Ge]-G[Q+12+Ge];Qe[0+Ge]=at+ut,Qe[8+Ge]=at-ut,Qe[4+Ge]=Ct+pt,Qe[12+Ge]=Ct-pt}for(Ge=0;4>Ge;++Ge)at=(G=Qe[0+4*Ge]+3)+Qe[3+4*Ge],ut=Qe[1+4*Ge]+Qe[2+4*Ge],pt=Qe[1+4*Ge]-Qe[2+4*Ge],Ct=G-Qe[3+4*Ge],fe[Ne+0]=at+ut>>3,fe[Ne+16]=Ct+pt>>3,fe[Ne+32]=at-ut>>3,fe[Ne+48]=Ct-pt>>3,Ne+=64}function Fu(G,Q,fe){var Ne,Ge=Q-32,Qe=El,at=255-G[Ge-1];for(Ne=0;Ne<fe;++Ne){var ut,pt=Qe,Ct=at+G[Q-1];for(ut=0;ut<fe;++ut)G[Q+ut]=pt[Ct+G[Ge+ut]];Q+=32}}function df(G,Q){Fu(G,Q,4)}function Zl(G,Q){Fu(G,Q,8)}function Fo(G,Q){Fu(G,Q,16)}function Uu(G,Q){var fe;for(fe=0;16>fe;++fe)r(G,Q+32*fe,G,Q-32,16)}function rh(G,Q){var fe;for(fe=16;0<fe;--fe)s(G,Q,G[Q-1],16),Q+=32}function Xo(G,Q,fe){var Ne;for(Ne=0;16>Ne;++Ne)s(Q,fe+32*Ne,G,16)}function bn(G,Q){var fe,Ne=16;for(fe=0;16>fe;++fe)Ne+=G[Q-1+32*fe]+G[Q+fe-32];Xo(Ne>>5,G,Q)}function lo(G,Q){var fe,Ne=8;for(fe=0;16>fe;++fe)Ne+=G[Q-1+32*fe];Xo(Ne>>4,G,Q)}function hr(G,Q){var fe,Ne=8;for(fe=0;16>fe;++fe)Ne+=G[Q+fe-32];Xo(Ne>>4,G,Q)}function zc(G,Q){Xo(128,G,Q)}function gn(G,Q,fe){return G+2*Q+fe+2>>2}function nh(G,Q){var fe,Ne=Q-32;for(Ne=new Uint8Array([gn(G[Ne-1],G[Ne+0],G[Ne+1]),gn(G[Ne+0],G[Ne+1],G[Ne+2]),gn(G[Ne+1],G[Ne+2],G[Ne+3]),gn(G[Ne+2],G[Ne+3],G[Ne+4])]),fe=0;4>fe;++fe)r(G,Q+32*fe,Ne,0,Ne.length)}function Tn(G,Q){var fe=G[Q-1],Ne=G[Q-1+32],Ge=G[Q-1+64],Qe=G[Q-1+96];_e(G,Q+0,16843009*gn(G[Q-1-32],fe,Ne)),_e(G,Q+32,16843009*gn(fe,Ne,Ge)),_e(G,Q+64,16843009*gn(Ne,Ge,Qe)),_e(G,Q+96,16843009*gn(Ge,Qe,Qe))}function Bs(G,Q){var fe,Ne=4;for(fe=0;4>fe;++fe)Ne+=G[Q+fe-32]+G[Q-1+32*fe];for(Ne>>=3,fe=0;4>fe;++fe)s(G,Q+32*fe,Ne,4)}function ic(G,Q){var fe=G[Q-1+0],Ne=G[Q-1+32],Ge=G[Q-1+64],Qe=G[Q-1-32],at=G[Q+0-32],ut=G[Q+1-32],pt=G[Q+2-32],Ct=G[Q+3-32];G[Q+0+96]=gn(Ne,Ge,G[Q-1+96]),G[Q+1+96]=G[Q+0+64]=gn(fe,Ne,Ge),G[Q+2+96]=G[Q+1+64]=G[Q+0+32]=gn(Qe,fe,Ne),G[Q+3+96]=G[Q+2+64]=G[Q+1+32]=G[Q+0+0]=gn(at,Qe,fe),G[Q+3+64]=G[Q+2+32]=G[Q+1+0]=gn(ut,at,Qe),G[Q+3+32]=G[Q+2+0]=gn(pt,ut,at),G[Q+3+0]=gn(Ct,pt,ut)}function sc(G,Q){var fe=G[Q+1-32],Ne=G[Q+2-32],Ge=G[Q+3-32],Qe=G[Q+4-32],at=G[Q+5-32],ut=G[Q+6-32],pt=G[Q+7-32];G[Q+0+0]=gn(G[Q+0-32],fe,Ne),G[Q+1+0]=G[Q+0+32]=gn(fe,Ne,Ge),G[Q+2+0]=G[Q+1+32]=G[Q+0+64]=gn(Ne,Ge,Qe),G[Q+3+0]=G[Q+2+32]=G[Q+1+64]=G[Q+0+96]=gn(Ge,Qe,at),G[Q+3+32]=G[Q+2+64]=G[Q+1+96]=gn(Qe,at,ut),G[Q+3+64]=G[Q+2+96]=gn(at,ut,pt),G[Q+3+96]=gn(ut,pt,pt)}function Xa(G,Q){var fe=G[Q-1+0],Ne=G[Q-1+32],Ge=G[Q-1+64],Qe=G[Q-1-32],at=G[Q+0-32],ut=G[Q+1-32],pt=G[Q+2-32],Ct=G[Q+3-32];G[Q+0+0]=G[Q+1+64]=Qe+at+1>>1,G[Q+1+0]=G[Q+2+64]=at+ut+1>>1,G[Q+2+0]=G[Q+3+64]=ut+pt+1>>1,G[Q+3+0]=pt+Ct+1>>1,G[Q+0+96]=gn(Ge,Ne,fe),G[Q+0+64]=gn(Ne,fe,Qe),G[Q+0+32]=G[Q+1+96]=gn(fe,Qe,at),G[Q+1+32]=G[Q+2+96]=gn(Qe,at,ut),G[Q+2+32]=G[Q+3+96]=gn(at,ut,pt),G[Q+3+32]=gn(ut,pt,Ct)}function an(G,Q){var fe=G[Q+0-32],Ne=G[Q+1-32],Ge=G[Q+2-32],Qe=G[Q+3-32],at=G[Q+4-32],ut=G[Q+5-32],pt=G[Q+6-32],Ct=G[Q+7-32];G[Q+0+0]=fe+Ne+1>>1,G[Q+1+0]=G[Q+0+64]=Ne+Ge+1>>1,G[Q+2+0]=G[Q+1+64]=Ge+Qe+1>>1,G[Q+3+0]=G[Q+2+64]=Qe+at+1>>1,G[Q+0+32]=gn(fe,Ne,Ge),G[Q+1+32]=G[Q+0+96]=gn(Ne,Ge,Qe),G[Q+2+32]=G[Q+1+96]=gn(Ge,Qe,at),G[Q+3+32]=G[Q+2+96]=gn(Qe,at,ut),G[Q+3+64]=gn(at,ut,pt),G[Q+3+96]=gn(ut,pt,Ct)}function An(G,Q){var fe=G[Q-1+0],Ne=G[Q-1+32],Ge=G[Q-1+64],Qe=G[Q-1+96];G[Q+0+0]=fe+Ne+1>>1,G[Q+2+0]=G[Q+0+32]=Ne+Ge+1>>1,G[Q+2+32]=G[Q+0+64]=Ge+Qe+1>>1,G[Q+1+0]=gn(fe,Ne,Ge),G[Q+3+0]=G[Q+1+32]=gn(Ne,Ge,Qe),G[Q+3+32]=G[Q+1+64]=gn(Ge,Qe,Qe),G[Q+3+64]=G[Q+2+64]=G[Q+0+96]=G[Q+1+96]=G[Q+2+96]=G[Q+3+96]=Qe}function Gs(G,Q){var fe=G[Q-1+0],Ne=G[Q-1+32],Ge=G[Q-1+64],Qe=G[Q-1+96],at=G[Q-1-32],ut=G[Q+0-32],pt=G[Q+1-32],Ct=G[Q+2-32];G[Q+0+0]=G[Q+2+32]=fe+at+1>>1,G[Q+0+32]=G[Q+2+64]=Ne+fe+1>>1,G[Q+0+64]=G[Q+2+96]=Ge+Ne+1>>1,G[Q+0+96]=Qe+Ge+1>>1,G[Q+3+0]=gn(ut,pt,Ct),G[Q+2+0]=gn(at,ut,pt),G[Q+1+0]=G[Q+3+32]=gn(fe,at,ut),G[Q+1+32]=G[Q+3+64]=gn(Ne,fe,at),G[Q+1+64]=G[Q+3+96]=gn(Ge,Ne,fe),G[Q+1+96]=gn(Qe,Ge,Ne)}function wd(G,Q){var fe;for(fe=0;8>fe;++fe)r(G,Q+32*fe,G,Q-32,8)}function un(G,Q){var fe;for(fe=0;8>fe;++fe)s(G,Q,G[Q-1],8),Q+=32}function Uo(G,Q,fe){var Ne;for(Ne=0;8>Ne;++Ne)s(Q,fe+32*Ne,G,8)}function fu(G,Q){var fe,Ne=8;for(fe=0;8>fe;++fe)Ne+=G[Q+fe-32]+G[Q-1+32*fe];Uo(Ne>>4,G,Q)}function Rs(G,Q){var fe,Ne=4;for(fe=0;8>fe;++fe)Ne+=G[Q+fe-32];Uo(Ne>>3,G,Q)}function Li(G,Q){var fe,Ne=4;for(fe=0;8>fe;++fe)Ne+=G[Q-1+32*fe];Uo(Ne>>3,G,Q)}function bi(G,Q){Uo(128,G,Q)}function uo(G,Q,fe){var Ne=G[Q-fe],Ge=G[Q+0],Qe=3*(Ge-Ne)+tn[1020+G[Q-2*fe]-G[Q+fe]],at=Uc[112+(Qe+4>>3)];G[Q-fe]=El[255+Ne+Uc[112+(Qe+3>>3)]],G[Q+0]=El[255+Ge-at]}function Rd(G,Q,fe,Ne){var Ge=G[Q+0],Qe=G[Q+fe];return ts[255+G[Q-2*fe]-G[Q-fe]]>Ne||ts[255+Qe-Ge]>Ne}function ih(G,Q,fe,Ne){return 4*ts[255+G[Q-fe]-G[Q+0]]+ts[255+G[Q-2*fe]-G[Q+fe]]<=Ne}function oc(G,Q,fe,Ne,Ge){var Qe=G[Q-3*fe],at=G[Q-2*fe],ut=G[Q-fe],pt=G[Q+0],Ct=G[Q+fe],Qt=G[Q+2*fe],Pt=G[Q+3*fe];return 4*ts[255+ut-pt]+ts[255+at-Ct]>Ne?0:ts[255+G[Q-4*fe]-Qe]<=Ge&&ts[255+Qe-at]<=Ge&&ts[255+at-ut]<=Ge&&ts[255+Pt-Qt]<=Ge&&ts[255+Qt-Ct]<=Ge&&ts[255+Ct-pt]<=Ge}function lc(G,Q,fe,Ne){var Ge=2*Ne+1;for(Ne=0;16>Ne;++Ne)ih(G,Q+Ne,fe,Ge)&&uo(G,Q+Ne,fe)}function Jo(G,Q,fe,Ne){var Ge=2*Ne+1;for(Ne=0;16>Ne;++Ne)ih(G,Q+Ne*fe,1,Ge)&&uo(G,Q+Ne*fe,1)}function us(G,Q,fe,Ne){var Ge;for(Ge=3;0<Ge;--Ge)lc(G,Q+=4*fe,fe,Ne)}function ku(G,Q,fe,Ne){var Ge;for(Ge=3;0<Ge;--Ge)Jo(G,Q+=4,fe,Ne)}function Ts(G,Q,fe,Ne,Ge,Qe,at,ut){for(Qe=2*Qe+1;0<Ge--;){if(oc(G,Q,fe,Qe,at))if(Rd(G,Q,fe,ut))uo(G,Q,fe);else{var pt=G,Ct=Q,Qt=fe,Pt=pt[Ct-2*Qt],Aa=pt[Ct-Qt],ra=pt[Ct+0],wa=pt[Ct+Qt],fa=pt[Ct+2*Qt],vt=27*(Ga=tn[1020+3*(ra-Aa)+tn[1020+Pt-wa]])+63>>7,ta=18*Ga+63>>7,Ga=9*Ga+63>>7;pt[Ct-3*Qt]=El[255+pt[Ct-3*Qt]+Ga],pt[Ct-2*Qt]=El[255+Pt+ta],pt[Ct-Qt]=El[255+Aa+vt],pt[Ct+0]=El[255+ra-vt],pt[Ct+Qt]=El[255+wa-ta],pt[Ct+2*Qt]=El[255+fa-Ga]}Q+=Ne}}function Cl(G,Q,fe,Ne,Ge,Qe,at,ut){for(Qe=2*Qe+1;0<Ge--;){if(oc(G,Q,fe,Qe,at))if(Rd(G,Q,fe,ut))uo(G,Q,fe);else{var pt=G,Ct=Q,Qt=fe,Pt=pt[Ct-Qt],Aa=pt[Ct+0],ra=pt[Ct+Qt],wa=Uc[112+((fa=3*(Aa-Pt))+4>>3)],fa=Uc[112+(fa+3>>3)],vt=wa+1>>1;pt[Ct-2*Qt]=El[255+pt[Ct-2*Qt]+vt],pt[Ct-Qt]=El[255+Pt+fa],pt[Ct+0]=El[255+Aa-wa],pt[Ct+Qt]=El[255+ra-vt]}Q+=Ne}}function Qo(G,Q,fe,Ne,Ge,Qe){Ts(G,Q,fe,1,16,Ne,Ge,Qe)}function ji(G,Q,fe,Ne,Ge,Qe){Ts(G,Q,1,fe,16,Ne,Ge,Qe)}function js(G,Q,fe,Ne,Ge,Qe){var at;for(at=3;0<at;--at)Cl(G,Q+=4*fe,fe,1,16,Ne,Ge,Qe)}function ql(G,Q,fe,Ne,Ge,Qe){var at;for(at=3;0<at;--at)Cl(G,Q+=4,1,fe,16,Ne,Ge,Qe)}function ns(G,Q,fe,Ne,Ge,Qe,at,ut){Ts(G,Q,Ge,1,8,Qe,at,ut),Ts(fe,Ne,Ge,1,8,Qe,at,ut)}function Vh(G,Q,fe,Ne,Ge,Qe,at,ut){Ts(G,Q,1,Ge,8,Qe,at,ut),Ts(fe,Ne,1,Ge,8,Qe,at,ut)}function ko(G,Q,fe,Ne,Ge,Qe,at,ut){Cl(G,Q+4*Ge,Ge,1,8,Qe,at,ut),Cl(fe,Ne+4*Ge,Ge,1,8,Qe,at,ut)}function Td(G,Q,fe,Ne,Ge,Qe,at,ut){Cl(G,Q+4,1,Ge,8,Qe,at,ut),Cl(fe,Ne+4,1,Ge,8,Qe,at,ut)}function pu(){this.ba=new Qi,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ni,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function mu(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Hf(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Hl(){this.ua=0,this.Wa=new Rt,this.vb=new Rt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ze,this.yc=new ye}function Im(){this.xb=this.a=0,this.l=new nc,this.ca=new Qi,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Ce,this.Pb=0,this.wd=new Ce,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Hl,this.ab=0,this.gc=h(4,Hf),this.Oc=0}function Sd(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new nc,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Zs(G,Q,fe,Ne,Ge,Qe,at){for(G=G==null?0:G[Q+0],Q=0;Q<at;++Q)Ge[Qe+Q]=G+fe[Ne+Q]&255,G=Ge[Qe+Q]}function hf(G,Q,fe,Ne,Ge,Qe,at){var ut;if(G==null)Zs(null,null,fe,Ne,Ge,Qe,at);else for(ut=0;ut<at;++ut)Ge[Qe+ut]=G[Q+ut]+fe[Ne+ut]&255}function $l(G,Q,fe,Ne,Ge,Qe,at){if(G==null)Zs(null,null,fe,Ne,Ge,Qe,at);else{var ut,pt=G[Q+0],Ct=pt,Qt=pt;for(ut=0;ut<at;++ut)Ct=Qt+(pt=G[Q+ut])-Ct,Qt=fe[Ne+ut]+(-256&Ct?0>Ct?0:255:Ct)&255,Ct=pt,Ge[Qe+ut]=Qt}}function ff(G,Q,fe,Ne){var Ge=Q.width,Qe=Q.o;if(e(G!=null&&Q!=null),0>fe||0>=Ne||fe+Ne>Qe)return null;if(!G.Cc){if(G.ga==null){var at;if(G.ga=new Sd,(at=G.ga==null)||(at=Q.width*Q.o,e(G.Gb.length==0),G.Gb=l(at),G.Uc=0,G.Gb==null?at=0:(G.mb=G.Gb,G.nb=G.Uc,G.rc=null,at=1),at=!at),!at){at=G.ga;var ut=G.Fa,pt=G.P,Ct=G.qc,Qt=G.mb,Pt=G.nb,Aa=pt+1,ra=Ct-1,wa=at.l;if(e(ut!=null&&Qt!=null&&Q!=null),ml[0]=null,ml[1]=Zs,ml[2]=hf,ml[3]=$l,at.ca=Qt,at.tb=Pt,at.c=Q.width,at.i=Q.height,e(0<at.c&&0<at.i),1>=Ct)Q=0;else if(at.$a=ut[pt+0]>>0&3,at.Z=ut[pt+0]>>2&3,at.Lc=ut[pt+0]>>4&3,pt=ut[pt+0]>>6&3,0>at.$a||1<at.$a||4<=at.Z||1<at.Lc||pt)Q=0;else if(wa.put=Xt,wa.ac=Us,wa.bc=xe,wa.ma=at,wa.width=Q.width,wa.height=Q.height,wa.Da=Q.Da,wa.v=Q.v,wa.va=Q.va,wa.j=Q.j,wa.o=Q.o,at.$a)e:{e(at.$a==1),Q=_r();t:for(;;){if(Q==null){Q=0;break e}if(e(at!=null),at.mc=Q,Q.c=at.c,Q.i=at.i,Q.l=at.l,Q.l.ma=at,Q.l.width=at.c,Q.l.height=at.i,Q.a=0,ke(Q.m,ut,Aa,ra),!Nr(at.c,at.i,1,Q,null)||(Q.ab==1&&Q.gc[0].hc==3&&$t(Q.s)?(at.ic=1,ut=Q.c*Q.i,Q.Ta=null,Q.Ua=0,Q.V=l(ut),Q.Ba=0,Q.V==null?(Q.a=1,Q=0):Q=1):(at.ic=0,Q=Vr(Q,at.c)),!Q))break t;Q=1;break e}at.mc=null,Q=0}else Q=ra>=at.c*at.i;at=!Q}if(at)return null;G.ga.Lc!=1?G.Ga=0:Ne=Qe-fe}e(G.ga!=null),e(fe+Ne<=Qe);e:{if(Q=(ut=G.ga).c,Qe=ut.l.o,ut.$a==0){if(Aa=G.rc,ra=G.Vc,wa=G.Fa,pt=G.P+1+fe*Q,Ct=G.mb,Qt=G.nb+fe*Q,e(pt<=G.P+G.qc),ut.Z!=0)for(e(ml[ut.Z]!=null),at=0;at<Ne;++at)ml[ut.Z](Aa,ra,wa,pt,Ct,Qt,Q),Aa=Ct,ra=Qt,Qt+=Q,pt+=Q;else for(at=0;at<Ne;++at)r(Ct,Qt,wa,pt,Q),Aa=Ct,ra=Qt,Qt+=Q,pt+=Q;G.rc=Aa,G.Vc=ra}else{if(e(ut.mc!=null),Q=fe+Ne,e((at=ut.mc)!=null),e(Q<=at.i),at.C>=Q)Q=1;else if(ut.ic||ha(),ut.ic){ut=at.V,Aa=at.Ba,ra=at.c;var fa=at.i,vt=(wa=1,pt=at.$/ra,Ct=at.$%ra,Qt=at.m,Pt=at.s,at.$),ta=ra*fa,Ga=ra*Q,Ka=Pt.wc,qa=vt<Ga?kt(Pt,Ct,pt):null;e(vt<=ta),e(Q<=fa),e($t(Pt));t:for(;;){for(;!Qt.h&&vt<Ga;){if(Ct&Ka||(qa=kt(Pt,Ct,pt)),e(qa!=null),Je(Qt),256>(fa=yt(qa.G[0],qa.H[0],Qt)))ut[Aa+vt]=fa,++vt,++Ct>=ra&&(Ct=0,++pt<=Q&&!(pt%16)&&Ra(at,pt));else{if(!(280>fa)){wa=0;break t}fa=rt(fa-256,Qt);var Sr,fr=yt(qa.G[4],qa.H[4],Qt);if(Je(Qt),!(vt>=(fr=_t(ra,fr=rt(fr,Qt)))&&ta-vt>=fa)){wa=0;break t}for(Sr=0;Sr<fa;++Sr)ut[Aa+vt+Sr]=ut[Aa+vt+Sr-fr];for(vt+=fa,Ct+=fa;Ct>=ra;)Ct-=ra,++pt<=Q&&!(pt%16)&&Ra(at,pt);vt<Ga&&Ct&Ka&&(qa=kt(Pt,Ct,pt))}e(Qt.h==$e(Qt))}Ra(at,pt>Q?Q:pt);break t}!wa||Qt.h&&vt<ta?(wa=0,at.a=Qt.h?5:3):at.$=vt,Q=wa}else Q=Ma(at,at.V,at.Ba,at.c,at.i,Q,Gr);if(!Q){Ne=0;break e}}fe+Ne>=Qe&&(G.Cc=1),Ne=1}if(!Ne)return null;if(G.Cc&&((Ne=G.ga)!=null&&(Ne.mc=null),G.ga=null,0<G.Ga))return alert("todo:WebPDequantizeLevels"),null}return G.nb+fe*Ge}function oe(G,Q,fe,Ne,Ge,Qe){for(;0<Ge--;){var at,ut=G,pt=Q+(fe?1:0),Ct=G,Qt=Q+(fe?0:3);for(at=0;at<Ne;++at){var Pt=Ct[Qt+4*at];Pt!=255&&(Pt*=32897,ut[pt+4*at+0]=ut[pt+4*at+0]*Pt>>23,ut[pt+4*at+1]=ut[pt+4*at+1]*Pt>>23,ut[pt+4*at+2]=ut[pt+4*at+2]*Pt>>23)}Q+=Qe}}function Ke(G,Q,fe,Ne,Ge){for(;0<Ne--;){var Qe;for(Qe=0;Qe<fe;++Qe){var at=G[Q+2*Qe+0],ut=15&(Ct=G[Q+2*Qe+1]),pt=4369*ut,Ct=(240&Ct|Ct>>4)*pt>>16;G[Q+2*Qe+0]=(240&at|at>>4)*pt>>16&240|(15&at|at<<4)*pt>>16>>4&15,G[Q+2*Qe+1]=240&Ct|ut}Q+=Ge}}function Dt(G,Q,fe,Ne,Ge,Qe,at,ut){var pt,Ct,Qt=255;for(Ct=0;Ct<Ge;++Ct){for(pt=0;pt<Ne;++pt){var Pt=G[Q+pt];Qe[at+4*pt]=Pt,Qt&=Pt}Q+=fe,at+=ut}return Qt!=255}function Wt(G,Q,fe,Ne,Ge){var Qe;for(Qe=0;Qe<Ge;++Qe)fe[Ne+Qe]=G[Q+Qe]>>8}function ha(){cs=oe,Xn=Ke,ai=Dt,qi=Wt}function Da(G,Q,fe){Re[G]=function(Ne,Ge,Qe,at,ut,pt,Ct,Qt,Pt,Aa,ra,wa,fa,vt,ta,Ga,Ka){var qa,Sr=Ka-1>>1,fr=ut[pt+0]|Ct[Qt+0]<<16,rn=Pt[Aa+0]|ra[wa+0]<<16;e(Ne!=null);var lr=3*fr+rn+131074>>2;for(Q(Ne[Ge+0],255&lr,lr>>16,fa,vt),Qe!=null&&(lr=3*rn+fr+131074>>2,Q(Qe[at+0],255&lr,lr>>16,ta,Ga)),qa=1;qa<=Sr;++qa){var vi=ut[pt+qa]|Ct[Qt+qa]<<16,xi=Pt[Aa+qa]|ra[wa+qa]<<16,qn=fr+vi+rn+xi+524296,ri=qn+2*(vi+rn)>>3;lr=ri+fr>>1,fr=(qn=qn+2*(fr+xi)>>3)+vi>>1,Q(Ne[Ge+2*qa-1],255&lr,lr>>16,fa,vt+(2*qa-1)*fe),Q(Ne[Ge+2*qa-0],255&fr,fr>>16,fa,vt+(2*qa-0)*fe),Qe!=null&&(lr=qn+rn>>1,fr=ri+xi>>1,Q(Qe[at+2*qa-1],255&lr,lr>>16,ta,Ga+(2*qa-1)*fe),Q(Qe[at+2*qa+0],255&fr,fr>>16,ta,Ga+(2*qa+0)*fe)),fr=vi,rn=xi}1&Ka||(lr=3*fr+rn+131074>>2,Q(Ne[Ge+Ka-1],255&lr,lr>>16,fa,vt+(Ka-1)*fe),Qe!=null&&(lr=3*rn+fr+131074>>2,Q(Qe[at+Ka-1],255&lr,lr>>16,ta,Ga+(Ka-1)*fe)))}}function rr(){rl[pc]=Uh,rl[Nd]=Gp,rl[di]=Od,rl[Oh]=jp,rl[tl]=Bc,rl[pl]=Af,rl[kc]=nl,rl[vu]=Gp,rl[Gu]=jp,rl[mc]=Bc,rl[Bp]=Af}function wr(G){return G&-16384?0>G?0:255:G>>Nl}function $r(G,Q){return wr((19077*G>>8)+(26149*Q>>8)-14234)}function Sn(G,Q,fe){return wr((19077*G>>8)-(6419*Q>>8)-(13320*fe>>8)+8708)}function Nn(G,Q){return wr((19077*G>>8)+(33050*Q>>8)-17685)}function mi(G,Q,fe,Ne,Ge){Ne[Ge+0]=$r(G,fe),Ne[Ge+1]=Sn(G,Q,fe),Ne[Ge+2]=Nn(G,Q)}function Ss(G,Q,fe,Ne,Ge){Ne[Ge+0]=Nn(G,Q),Ne[Ge+1]=Sn(G,Q,fe),Ne[Ge+2]=$r(G,fe)}function Cs(G,Q,fe,Ne,Ge){var Qe=Sn(G,Q,fe);Q=Qe<<3&224|Nn(G,Q)>>3,Ne[Ge+0]=248&$r(G,fe)|Qe>>5,Ne[Ge+1]=Q}function Js(G,Q,fe,Ne,Ge){var Qe=240&Nn(G,Q)|15;Ne[Ge+0]=240&$r(G,fe)|Sn(G,Q,fe)>>4,Ne[Ge+1]=Qe}function es(G,Q,fe,Ne,Ge){Ne[Ge+0]=255,mi(G,Q,fe,Ne,Ge+1)}function br(G,Q,fe,Ne,Ge){Ss(G,Q,fe,Ne,Ge),Ne[Ge+3]=255}function ir(G,Q,fe,Ne,Ge){mi(G,Q,fe,Ne,Ge),Ne[Ge+3]=255}function fl(G,Q){return 0>G?0:G>Q?Q:G}function Rr(G,Q,fe){Re[G]=function(Ne,Ge,Qe,at,ut,pt,Ct,Qt,Pt){for(var Aa=Qt+(-2&Pt)*fe;Qt!=Aa;)Q(Ne[Ge+0],Qe[at+0],ut[pt+0],Ct,Qt),Q(Ne[Ge+1],Qe[at+0],ut[pt+0],Ct,Qt+fe),Ge+=2,++at,++pt,Qt+=2*fe;1&Pt&&Q(Ne[Ge+0],Qe[at+0],ut[pt+0],Ct,Qt)}}function yu(G,Q,fe){return fe==0?G==0?Q==0?6:5:Q==0?4:0:fe}function Kl(G,Q,fe,Ne,Ge){switch(G>>>30){case 3:gu(Q,fe,Ne,Ge,0);break;case 2:Zi(Q,fe,Ne,Ge);break;case 1:Qs(Q,fe,Ne,Ge)}}function vr(G,Q){var fe,Ne,Ge=Q.M,Qe=Q.Nb,at=G.oc,ut=G.pc+40,pt=G.oc,Ct=G.pc+584,Qt=G.oc,Pt=G.pc+600;for(fe=0;16>fe;++fe)at[ut+32*fe-1]=129;for(fe=0;8>fe;++fe)pt[Ct+32*fe-1]=129,Qt[Pt+32*fe-1]=129;for(0<Ge?at[ut-1-32]=pt[Ct-1-32]=Qt[Pt-1-32]=129:(s(at,ut-32-1,127,21),s(pt,Ct-32-1,127,9),s(Qt,Pt-32-1,127,9)),Ne=0;Ne<G.za;++Ne){var Aa=Q.ya[Q.aa+Ne];if(0<Ne){for(fe=-1;16>fe;++fe)r(at,ut+32*fe-4,at,ut+32*fe+12,4);for(fe=-1;8>fe;++fe)r(pt,Ct+32*fe-4,pt,Ct+32*fe+4,4),r(Qt,Pt+32*fe-4,Qt,Pt+32*fe+4,4)}var ra=G.Gd,wa=G.Hd+Ne,fa=Aa.ad,vt=Aa.Hc;if(0<Ge&&(r(at,ut-32,ra[wa].y,0,16),r(pt,Ct-32,ra[wa].f,0,8),r(Qt,Pt-32,ra[wa].ea,0,8)),Aa.Za){var ta=at,Ga=ut-32+16;for(0<Ge&&(Ne>=G.za-1?s(ta,Ga,ra[wa].y[15],4):r(ta,Ga,ra[wa+1].y,0,4)),fe=0;4>fe;fe++)ta[Ga+128+fe]=ta[Ga+256+fe]=ta[Ga+384+fe]=ta[Ga+0+fe];for(fe=0;16>fe;++fe,vt<<=2)ta=at,Ga=ut+Fm[fe],ju[Aa.Ob[fe]](ta,Ga),Kl(vt,fa,16*+fe,ta,Ga)}else if(ta=yu(Ne,Ge,Aa.Ob[0]),gc[ta](at,ut),vt!=0)for(fe=0;16>fe;++fe,vt<<=2)Kl(vt,fa,16*+fe,at,ut+Fm[fe]);for(fe=Aa.Gc,ta=yu(Ne,Ge,Aa.Dd),Ru[ta](pt,Ct),Ru[ta](Qt,Pt),vt=fa,ta=pt,Ga=Ct,255&(Aa=fe>>0)&&(170&Aa?mf(vt,256,ta,Ga):fo(vt,256,ta,Ga)),Aa=Qt,vt=Pt,255&(fe>>=8)&&(170&fe?mf(fa,320,Aa,vt):fo(fa,320,Aa,vt)),Ge<G.Ub-1&&(r(ra[wa].y,0,at,ut+480,16),r(ra[wa].f,0,pt,Ct+224,8),r(ra[wa].ea,0,Qt,Pt+224,8)),fe=8*Qe*G.B,ra=G.sa,wa=G.ta+16*Ne+16*Qe*G.R,fa=G.qa,Aa=G.ra+8*Ne+fe,vt=G.Ha,ta=G.Ia+8*Ne+fe,fe=0;16>fe;++fe)r(ra,wa+fe*G.R,at,ut+32*fe,16);for(fe=0;8>fe;++fe)r(fa,Aa+fe*G.B,pt,Ct+32*fe,8),r(vt,ta+fe*G.B,Qt,Pt+32*fe,8)}}function sh(G,Q,fe,Ne,Ge,Qe,at,ut,pt){var Ct=[0],Qt=[0],Pt=0,Aa=pt!=null?pt.kd:0,ra=pt??new mu;if(G==null||12>fe)return 7;ra.data=G,ra.w=Q,ra.ha=fe,Q=[Q],fe=[fe],ra.gb=[ra.gb];e:{var wa=Q,fa=fe,vt=ra.gb;if(e(G!=null),e(fa!=null),e(vt!=null),vt[0]=0,12<=fa[0]&&!a(G,wa[0],"RIFF")){if(a(G,wa[0]+8,"WEBP")){vt=3;break e}var ta=Pa(G,wa[0]+4);if(12>ta||4294967286<ta){vt=3;break e}if(Aa&&ta>fa[0]-8){vt=7;break e}vt[0]=ta,wa[0]+=12,fa[0]-=12}vt=0}if(vt!=0)return vt;for(ta=0<ra.gb[0],fe=fe[0];;){e:{var Ga=G;fa=Q,vt=fe;var Ka=Ct,qa=Qt,Sr=wa=[0];if((lr=Pt=[Pt])[0]=0,8>vt[0])vt=7;else{if(!a(Ga,fa[0],"VP8X")){if(Pa(Ga,fa[0]+4)!=10){vt=3;break e}if(18>vt[0]){vt=7;break e}var fr=Pa(Ga,fa[0]+8),rn=1+Zt(Ga,fa[0]+12);if(2147483648<=rn*(Ga=1+Zt(Ga,fa[0]+15))){vt=3;break e}Sr!=null&&(Sr[0]=fr),Ka!=null&&(Ka[0]=rn),qa!=null&&(qa[0]=Ga),fa[0]+=18,vt[0]-=18,lr[0]=1}vt=0}}if(Pt=Pt[0],wa=wa[0],vt!=0)return vt;if(fa=!!(2&wa),!ta&&Pt)return 3;if(Qe!=null&&(Qe[0]=!!(16&wa)),at!=null&&(at[0]=fa),ut!=null&&(ut[0]=0),at=Ct[0],wa=Qt[0],Pt&&fa&&pt==null){vt=0;break}if(4>fe){vt=7;break}if(ta&&Pt||!ta&&!Pt&&!a(G,Q[0],"ALPH")){fe=[fe],ra.na=[ra.na],ra.P=[ra.P],ra.Sa=[ra.Sa];e:{fr=G,vt=Q,ta=fe;var lr=ra.gb;Ka=ra.na,qa=ra.P,Sr=ra.Sa,rn=22,e(fr!=null),e(ta!=null),Ga=vt[0];var vi=ta[0];for(e(Ka!=null),e(Sr!=null),Ka[0]=null,qa[0]=null,Sr[0]=0;;){if(vt[0]=Ga,ta[0]=vi,8>vi){vt=7;break e}var xi=Pa(fr,Ga+4);if(4294967286<xi){vt=3;break e}var qn=8+xi+1&-2;if(rn+=qn,0<lr&&rn>lr){vt=3;break e}if(!a(fr,Ga,"VP8 ")||!a(fr,Ga,"VP8L")){vt=0;break e}if(vi[0]<qn){vt=7;break e}a(fr,Ga,"ALPH")||(Ka[0]=fr,qa[0]=Ga+8,Sr[0]=xi),Ga+=qn,vi-=qn}}if(fe=fe[0],ra.na=ra.na[0],ra.P=ra.P[0],ra.Sa=ra.Sa[0],vt!=0)break}fe=[fe],ra.Ja=[ra.Ja],ra.xa=[ra.xa];e:if(lr=G,vt=Q,ta=fe,Ka=ra.gb[0],qa=ra.Ja,Sr=ra.xa,fr=vt[0],Ga=!a(lr,fr,"VP8 "),rn=!a(lr,fr,"VP8L"),e(lr!=null),e(ta!=null),e(qa!=null),e(Sr!=null),8>ta[0])vt=7;else{if(Ga||rn){if(lr=Pa(lr,fr+4),12<=Ka&&lr>Ka-12){vt=3;break e}if(Aa&&lr>ta[0]-8){vt=7;break e}qa[0]=lr,vt[0]+=8,ta[0]-=8,Sr[0]=rn}else Sr[0]=5<=ta[0]&&lr[fr+0]==47&&!(lr[fr+4]>>5),qa[0]=ta[0];vt=0}if(fe=fe[0],ra.Ja=ra.Ja[0],ra.xa=ra.xa[0],Q=Q[0],vt!=0)break;if(4294967286<ra.Ja)return 3;if(ut==null||fa||(ut[0]=ra.xa?2:1),at=[at],wa=[wa],ra.xa){if(5>fe){vt=7;break}ut=at,Aa=wa,fa=Qe,G==null||5>fe?G=0:5<=fe&&G[Q+0]==47&&!(G[Q+4]>>5)?(ta=[0],lr=[0],Ka=[0],ke(qa=new Ce,G,Q,fe),Oe(qa,ta,lr,Ka)?(ut!=null&&(ut[0]=ta[0]),Aa!=null&&(Aa[0]=lr[0]),fa!=null&&(fa[0]=Ka[0]),G=1):G=0):G=0}else{if(10>fe){vt=7;break}ut=wa,G==null||10>fe||!Gl(G,Q+3,fe-3)?G=0:(Aa=G[Q+0]|G[Q+1]<<8|G[Q+2]<<16,fa=16383&(G[Q+7]<<8|G[Q+6]),G=16383&(G[Q+9]<<8|G[Q+8]),1&Aa||3<(Aa>>1&7)||!(Aa>>4&1)||Aa>>5>=ra.Ja||!fa||!G?G=0:(at&&(at[0]=fa),ut&&(ut[0]=G),G=1))}if(!G||(at=at[0],wa=wa[0],Pt&&(Ct[0]!=at||Qt[0]!=wa)))return 3;pt!=null&&(pt[0]=ra,pt.offset=Q-pt.w,e(4294967286>Q-pt.w),e(pt.offset==pt.ha-fe));break}return vt==0||vt==7&&Pt&&pt==null?(Qe!=null&&(Qe[0]|=ra.na!=null&&0<ra.na.length),Ne!=null&&(Ne[0]=at),Ge!=null&&(Ge[0]=wa),0):vt}function Wl(G,Q,fe){var Ne=Q.width,Ge=Q.height,Qe=0,at=0,ut=Ne,pt=Ge;if(Q.Da=G!=null&&0<G.Da,Q.Da&&(ut=G.cd,pt=G.bd,Qe=G.v,at=G.j,11>fe||(Qe&=-2,at&=-2),0>Qe||0>at||0>=ut||0>=pt||Qe+ut>Ne||at+pt>Ge))return 0;if(Q.v=Qe,Q.j=at,Q.va=Qe+ut,Q.o=at+pt,Q.U=ut,Q.T=pt,Q.da=G!=null&&0<G.da,Q.da){if(!yr(ut,pt,fe=[G.ib],Qe=[G.hb]))return 0;Q.ib=fe[0],Q.hb=Qe[0]}return Q.ob=G!=null&&G.ob,Q.Kb=G==null||!G.Sd,Q.da&&(Q.ob=Q.ib<3*Ne/4&&Q.hb<3*Ge/4,Q.Kb=0),1}function uc(G){if(G==null)return 2;if(11>G.S){var Q=G.f.RGBA;Q.fb+=(G.height-1)*Q.A,Q.A=-Q.A}else Q=G.f.kb,G=G.height,Q.O+=(G-1)*Q.fa,Q.fa=-Q.fa,Q.N+=(G-1>>1)*Q.Ab,Q.Ab=-Q.Ab,Q.W+=(G-1>>1)*Q.Db,Q.Db=-Q.Db,Q.F!=null&&(Q.J+=(G-1)*Q.lb,Q.lb=-Q.lb);return 0}function Cd(G,Q,fe,Ne){if(Ne==null||0>=G||0>=Q)return 2;if(fe!=null){if(fe.Da){var Ge=fe.cd,Qe=fe.bd,at=-2&fe.v,ut=-2&fe.j;if(0>at||0>ut||0>=Ge||0>=Qe||at+Ge>G||ut+Qe>Q)return 2;G=Ge,Q=Qe}if(fe.da){if(!yr(G,Q,Ge=[fe.ib],Qe=[fe.hb]))return 2;G=Ge[0],Q=Qe[0]}}Ne.width=G,Ne.height=Q;e:{var pt=Ne.width,Ct=Ne.height;if(G=Ne.S,0>=pt||0>=Ct||!(G>=pc&&13>G))G=2;else{if(0>=Ne.Rd&&Ne.sd==null){at=Qe=Ge=Q=0;var Qt=(ut=pt*kh[G])*Ct;if(11>G||(Qe=(Ct+1)/2*(Q=(pt+1)/2),G==12&&(at=(Ge=pt)*Ct)),(Ct=l(Qt+2*Qe+at))==null){G=1;break e}Ne.sd=Ct,11>G?((pt=Ne.f.RGBA).eb=Ct,pt.fb=0,pt.A=ut,pt.size=Qt):((pt=Ne.f.kb).y=Ct,pt.O=0,pt.fa=ut,pt.Fd=Qt,pt.f=Ct,pt.N=0+Qt,pt.Ab=Q,pt.Cd=Qe,pt.ea=Ct,pt.W=0+Qt+Qe,pt.Db=Q,pt.Ed=Qe,G==12&&(pt.F=Ct,pt.J=0+Qt+2*Qe),pt.Tc=at,pt.lb=Ge)}if(Q=1,Ge=Ne.S,Qe=Ne.width,at=Ne.height,Ge>=pc&&13>Ge)if(11>Ge)G=Ne.f.RGBA,Q&=(ut=Math.abs(G.A))*(at-1)+Qe<=G.size,Q&=ut>=Qe*kh[Ge],Q&=G.eb!=null;else{G=Ne.f.kb,ut=(Qe+1)/2,Qt=(at+1)/2,pt=Math.abs(G.fa),Ct=Math.abs(G.Ab);var Pt=Math.abs(G.Db),Aa=Math.abs(G.lb),ra=Aa*(at-1)+Qe;Q&=pt*(at-1)+Qe<=G.Fd,Q&=Ct*(Qt-1)+ut<=G.Cd,Q=(Q&=Pt*(Qt-1)+ut<=G.Ed)&pt>=Qe&Ct>=ut&Pt>=ut,Q&=G.y!=null,Q&=G.f!=null,Q&=G.ea!=null,Ge==12&&(Q&=Aa>=Qe,Q&=ra<=G.Tc,Q&=G.F!=null)}else Q=0;G=Q?0:2}}return G!=0||fe!=null&&fe.fd&&(G=uc(Ne)),G}var bs=64,Ai=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],cc=24,Na=32,bd=8,qs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];er("Predictor0","PredictorAdd0"),Re.Predictor0=function(){return 4278190080},Re.Predictor1=function(G){return G},Re.Predictor2=function(G,Q,fe){return Q[fe+0]},Re.Predictor3=function(G,Q,fe){return Q[fe+1]},Re.Predictor4=function(G,Q,fe){return Q[fe-1]},Re.Predictor5=function(G,Q,fe){return ur(ur(G,Q[fe+1]),Q[fe+0])},Re.Predictor6=function(G,Q,fe){return ur(G,Q[fe-1])},Re.Predictor7=function(G,Q,fe){return ur(G,Q[fe+0])},Re.Predictor8=function(G,Q,fe){return ur(Q[fe-1],Q[fe+0])},Re.Predictor9=function(G,Q,fe){return ur(Q[fe+0],Q[fe+1])},Re.Predictor10=function(G,Q,fe){return ur(ur(G,Q[fe-1]),ur(Q[fe+0],Q[fe+1]))},Re.Predictor11=function(G,Q,fe){var Ne=Q[fe+0];return 0>=jr(Ne>>24&255,G>>24&255,(Q=Q[fe-1])>>24&255)+jr(Ne>>16&255,G>>16&255,Q>>16&255)+jr(Ne>>8&255,G>>8&255,Q>>8&255)+jr(255&Ne,255&G,255&Q)?Ne:G},Re.Predictor12=function(G,Q,fe){var Ne=Q[fe+0];return(Pr((G>>24&255)+(Ne>>24&255)-((Q=Q[fe-1])>>24&255))<<24|Pr((G>>16&255)+(Ne>>16&255)-(Q>>16&255))<<16|Pr((G>>8&255)+(Ne>>8&255)-(Q>>8&255))<<8|Pr((255&G)+(255&Ne)-(255&Q)))>>>0},Re.Predictor13=function(G,Q,fe){var Ne=Q[fe-1];return(ka((G=ur(G,Q[fe+0]))>>24&255,Ne>>24&255)<<24|ka(G>>16&255,Ne>>16&255)<<16|ka(G>>8&255,Ne>>8&255)<<8|ka(G>>0&255,Ne>>0&255))>>>0};var co=Re.PredictorAdd0;Re.PredictorAdd1=pn,er("Predictor2","PredictorAdd2"),er("Predictor3","PredictorAdd3"),er("Predictor4","PredictorAdd4"),er("Predictor5","PredictorAdd5"),er("Predictor6","PredictorAdd6"),er("Predictor7","PredictorAdd7"),er("Predictor8","PredictorAdd8"),er("Predictor9","PredictorAdd9"),er("Predictor10","PredictorAdd10"),er("Predictor11","PredictorAdd11"),er("Predictor12","PredictorAdd12"),er("Predictor13","PredictorAdd13");var pf=Re.PredictorAdd2;Wa("ColorIndexInverseTransform","MapARGB","32b",function(G){return G>>8&255},function(G){return G}),Wa("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(G){return G},function(G){return G>>8&255});var zh,ho=Re.ColorIndexInverseTransform,Os=Re.MapARGB,bl=Re.VP8LColorIndexInverseTransformAlpha,Oc=Re.MapAlpha,Yl=Re.VP8LPredictorsAdd=[];Yl.length=16,(Re.VP8LPredictors=[]).length=16,(Re.VP8LPredictorsAdd_C=[]).length=16,(Re.VP8LPredictors_C=[]).length=16;var oh,xl,Ro,xd,Dc,Pl,dc,gu,Zi,mf,Qs,fo,Pd,Ed,eo,Mc,hc,Au,Ic,_u,Lc,fc,Bu,Bo,cs,Xn,ai,qi,is=l(511),Xl=l(2041),Fc=l(225),el=l(767),Jl=0,tn=Xl,Uc=Fc,El=el,ts=is,pc=0,Nd=1,di=2,Oh=3,tl=4,pl=5,kc=6,vu=7,Gu=8,mc=9,Bp=10,Dh=[2,3,7],Mh=[3,3,11],al=[280,256,256,256,40],Hi=[0,1,1,1,0],_i=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ql=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],wu=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],$f=8,yc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],yf=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Vd=null,Ih=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Lh=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],zd=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],gf=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Lm=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],lh=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Vy=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],gc=[],ju=[],Ru=[],zy=1,Fh=2,ml=[],rl=[];Da("UpsampleRgbLinePair",mi,3),Da("UpsampleBgrLinePair",Ss,3),Da("UpsampleRgbaLinePair",ir,4),Da("UpsampleBgraLinePair",br,4),Da("UpsampleArgbLinePair",es,4),Da("UpsampleRgba4444LinePair",Js,2),Da("UpsampleRgb565LinePair",Cs,2);var Uh=Re.UpsampleRgbLinePair,Od=Re.UpsampleBgrLinePair,Gp=Re.UpsampleRgbaLinePair,jp=Re.UpsampleBgraLinePair,Bc=Re.UpsampleArgbLinePair,Af=Re.UpsampleRgba4444LinePair,nl=Re.UpsampleRgb565LinePair,Dd=16,Tu=1<<Dd-1,Md=-227,Gc=482,Nl=6,Zu=0,jc=l(256),Kf=l(256),Id=l(256),Zc=l(256),Ds=l(Gc-Md),Zp=l(Gc-Md);Rr("YuvToRgbRow",mi,3),Rr("YuvToBgrRow",Ss,3),Rr("YuvToRgbaRow",ir,4),Rr("YuvToBgraRow",br,4),Rr("YuvToArgbRow",es,4),Rr("YuvToRgba4444Row",Js,2),Rr("YuvToRgb565Row",Cs,2);var Fm=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],_f=[0,2,8],qp=[8,7,6,4,4,2,2,2,1,1,1,1],to=1;this.WebPDecodeRGBA=function(G,Q,fe,Ne,Ge){var Qe=Nd,at=new pu,ut=new Qi;at.ba=ut,ut.S=Qe,ut.width=[ut.width],ut.height=[ut.height];var pt=ut.width,Ct=ut.height,Qt=new Oo;if(Qt==null||G==null)var Pt=2;else e(Qt!=null),Pt=sh(G,Q,fe,Qt.width,Qt.height,Qt.Pd,Qt.Qd,Qt.format,null);if(Pt!=0?pt=0:(pt!=null&&(pt[0]=Qt.width[0]),Ct!=null&&(Ct[0]=Qt.height[0]),pt=1),pt){ut.width=ut.width[0],ut.height=ut.height[0],Ne!=null&&(Ne[0]=ut.width),Ge!=null&&(Ge[0]=ut.height);e:{if(Ne=new nc,(Ge=new mu).data=G,Ge.w=Q,Ge.ha=fe,Ge.kd=1,Q=[0],e(Ge!=null),((G=sh(Ge.data,Ge.w,Ge.ha,null,null,null,Q,null,Ge))==0||G==7)&&Q[0]&&(G=4),(Q=G)==0){if(e(at!=null),Ne.data=Ge.data,Ne.w=Ge.w+Ge.offset,Ne.ha=Ge.ha-Ge.offset,Ne.put=Xt,Ne.ac=Us,Ne.bc=xe,Ne.ma=at,Ge.xa){if((G=_r())==null){at=1;break e}if(function(Aa,ra){var wa=[0],fa=[0],vt=[0];t:for(;;){if(Aa==null)return 0;if(ra==null)return Aa.a=2,0;if(Aa.l=ra,Aa.a=0,ke(Aa.m,ra.data,ra.w,ra.ha),!Oe(Aa.m,wa,fa,vt)){Aa.a=3;break t}if(Aa.xb=Fh,ra.width=wa[0],ra.height=fa[0],!Nr(wa[0],fa[0],1,Aa,null))break t;return 1}return e(Aa.a!=0),0}(G,Ne)){if(Ne=(Q=Cd(Ne.width,Ne.height,at.Oa,at.ba))==0){t:{Ne=G;a:for(;;){if(Ne==null){Ne=0;break t}if(e(Ne.s.yc!=null),e(Ne.s.Ya!=null),e(0<Ne.s.Wb),e((fe=Ne.l)!=null),e((Ge=fe.ma)!=null),Ne.xb!=0){if(Ne.ca=Ge.ba,Ne.tb=Ge.tb,e(Ne.ca!=null),!Wl(Ge.Oa,fe,Oh)){Ne.a=2;break a}if(!Vr(Ne,fe.width)||fe.da)break a;if((fe.da||Er(Ne.ca.S))&&ha(),11>Ne.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Ne.ca.f.kb.F!=null&&ha()),Ne.Pb&&0<Ne.s.ua&&Ne.s.vb.X==null&&!Bt(Ne.s.vb,Ne.s.Wa.Xa)){Ne.a=1;break a}Ne.xb=0}if(!Ma(Ne,Ne.V,Ne.Ba,Ne.c,Ne.i,fe.o,Ht))break a;Ge.Dc=Ne.Ma,Ne=1;break t}e(Ne.a!=0),Ne=0}Ne=!Ne}Ne&&(Q=G.a)}else Q=G.a}else{if((G=new Yo)==null){at=1;break e}if(G.Fa=Ge.na,G.P=Ge.P,G.qc=Ge.Sa,Mo(G,Ne)){if((Q=Cd(Ne.width,Ne.height,at.Oa,at.ba))==0){if(G.Aa=0,fe=at.Oa,e((Ge=G)!=null),fe!=null){if(0<(pt=0>(pt=fe.Md)?0:100<pt?255:255*pt/100)){for(Ct=Qt=0;4>Ct;++Ct)12>(Pt=Ge.pb[Ct]).lc&&(Pt.ia=pt*qp[0>Pt.lc?0:Pt.lc]>>3),Qt|=Pt.ia;Qt&&(alert("todo:VP8InitRandom"),Ge.ia=1)}Ge.Ga=fe.Id,100<Ge.Ga?Ge.Ga=100:0>Ge.Ga&&(Ge.Ga=0)}ah(G,Ne)||(Q=G.a)}}else Q=G.a}Q==0&&at.Oa!=null&&at.Oa.fd&&(Q=uc(at.ba))}at=Q}Qe=at!=0?null:11>Qe?ut.f.RGBA.eb:ut.f.kb.y}else Qe=null;return Qe};var kh=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function T(Re,be){for(var De="",ne=0;ne<4;ne++)De+=String.fromCharCode(Re[be++]);return De}function E(Re,be){return(Re[be+0]<<0|Re[be+1]<<8|Re[be+2]<<16)>>>0}function z(Re,be){return(Re[be+0]<<0|Re[be+1]<<8|Re[be+2]<<16|Re[be+3]<<24)>>>0}new w;var k=[0],U=[0],Z=[],q=new w,$=t,J=function(Re,be){var De={},ne=0,ye=!1,Me=0,ze=0;if(De.frames=[],!function(Se,$e,ft,Je){for(var wt=0;wt<Je;wt++)if(Se[$e+wt]!=ft.charCodeAt(wt))return!0;return!1}(Re,be,"RIFF",4)){for(z(Re,be+=4),be+=8;be<Re.length;){var Le=T(Re,be),Ie=z(Re,be+=4);be+=4;var qe=Ie+(1&Ie);switch(Le){case"VP8 ":case"VP8L":De.frames[ne]===void 0&&(De.frames[ne]={}),(Ue=De.frames[ne]).src_off=ye?ze:be-8,Ue.src_size=Me+Ie+8,ne++,ye&&(ye=!1,Me=0,ze=0);break;case"VP8X":(Ue=De.header={}).feature_flags=Re[be];var ke=be+4;Ue.canvas_width=1+E(Re,ke),ke+=3,Ue.canvas_height=1+E(Re,ke),ke+=3;break;case"ALPH":ye=!0,Me=qe+8,ze=be-8;break;case"ANIM":(Ue=De.header).bgcolor=z(Re,be),ke=be+4,Ue.loop_count=(He=Re)[(Ce=ke)+0]<<0|He[Ce+1]<<8,ke+=2;break;case"ANMF":var tt,Ue;(Ue=De.frames[ne]={}).offset_x=2*E(Re,be),be+=3,Ue.offset_y=2*E(Re,be),be+=3,Ue.width=1+E(Re,be),be+=3,Ue.height=1+E(Re,be),be+=3,Ue.duration=E(Re,be),be+=3,tt=Re[be++],Ue.dispose=1&tt,Ue.blend=tt>>1&1}Le!="ANMF"&&(be+=qe)}var He,Ce;return De}}($,0);J.response=$,J.rgbaoutput=!0,J.dataurl=!1;var ie=J.header?J.header:null,de=J.frames?J.frames:null;if(ie){ie.loop_counter=ie.loop_count,k=[ie.canvas_height],U=[ie.canvas_width];for(var ge=0;ge<de.length&&de[ge].blend!=0;ge++);}var he=de[0],Ae=q.WebPDecodeRGBA($,he.src_off,he.src_size,U,k);he.rgba=Ae,he.imgwidth=U[0],he.imgheight=k[0];for(var me=0;me<U[0]*k[0]*4;me++)Z[me]=Ae[me];return this.width=U,this.height=k,this.data=Z,this}(function(t){var e=function(){return typeof HM=="function"},a=function(k,U,Z,q){var $=4,J=h;switch(q){case t.image_compression.FAST:$=1,J=l;break;case t.image_compression.MEDIUM:$=6,J=n;break;case t.image_compression.SLOW:$=9,J=w}k=r(k,U,Z,J);var ie=HM(k,{level:$});return t.__addimage__.arrayBufferToBinaryString(ie)},r=function(k,U,Z,q){for(var $,J,ie,de=k.length/U,ge=new Uint8Array(k.length+de),he=E(),Ae=0;Ae<de;Ae+=1){if(ie=Ae*U,$=k.subarray(ie,ie+U),q)ge.set(q($,Z,J),ie+Ae);else{for(var me,Re=he.length,be=[];me<Re;me+=1)be[me]=he[me]($,Z,J);var De=z(be.concat());ge.set(be[De],ie+Ae)}J=$}return ge},s=function(k){var U=Array.apply([],k);return U.unshift(0),U},l=function(k,U){var Z,q=[],$=k.length;q[0]=1;for(var J=0;J<$;J+=1)Z=k[J-U]||0,q[J+1]=k[J]-Z+256&255;return q},h=function(k,U,Z){var q,$=[],J=k.length;$[0]=2;for(var ie=0;ie<J;ie+=1)q=Z&&Z[ie]||0,$[ie+1]=k[ie]-q+256&255;return $},n=function(k,U,Z){var q,$,J=[],ie=k.length;J[0]=3;for(var de=0;de<ie;de+=1)q=k[de-U]||0,$=Z&&Z[de]||0,J[de+1]=k[de]+256-(q+$>>>1)&255;return J},w=function(k,U,Z){var q,$,J,ie,de=[],ge=k.length;de[0]=4;for(var he=0;he<ge;he+=1)q=k[he-U]||0,$=Z&&Z[he]||0,J=Z&&Z[he-U]||0,ie=T(q,$,J),de[he+1]=k[he]-ie+256&255;return de},T=function(k,U,Z){if(k===U&&U===Z)return k;var q=Math.abs(U-Z),$=Math.abs(k-Z),J=Math.abs(k+U-Z-Z);return q<=$&&q<=J?k:$<=J?U:Z},E=function(){return[s,l,h,n,w]},z=function(k){var U=k.map(function(Z){return Z.reduce(function(q,$){return q+Math.abs($)},0)});return U.indexOf(Math.min.apply(null,U))};t.processPNG=function(k,U,Z,q){var $,J,ie,de,ge,he,Ae,me,Re,be,De,ne,ye,Me,ze,Le=this.decode.FLATE_DECODE,Ie="";if(this.__addimage__.isArrayBuffer(k)&&(k=new Uint8Array(k)),this.__addimage__.isArrayBufferView(k)){if(k=(ie=new EPe(k)).imgData,J=ie.bits,$=ie.colorSpace,ge=ie.colors,[4,6].indexOf(ie.colorType)!==-1){if(ie.bits===8){Re=(me=ie.pixelBitlength==32?new Uint32Array(ie.decodePixels().buffer):ie.pixelBitlength==16?new Uint16Array(ie.decodePixels().buffer):new Uint8Array(ie.decodePixels().buffer)).length,De=new Uint8Array(Re*ie.colors),be=new Uint8Array(Re);var qe,ke=ie.pixelBitlength-ie.bits;for(Me=0,ze=0;Me<Re;Me++){for(ye=me[Me],qe=0;qe<ke;)De[ze++]=ye>>>qe&255,qe+=ie.bits;be[Me]=ye>>>qe&255}}if(ie.bits===16){Re=(me=new Uint32Array(ie.decodePixels().buffer)).length,De=new Uint8Array(Re*(32/ie.pixelBitlength)*ie.colors),be=new Uint8Array(Re*(32/ie.pixelBitlength)),ne=ie.colors>1,Me=0,ze=0;for(var tt=0;Me<Re;)ye=me[Me++],De[ze++]=ye>>>0&255,ne&&(De[ze++]=ye>>>16&255,ye=me[Me++],De[ze++]=ye>>>0&255),be[tt++]=ye>>>16&255;J=8}q!==t.image_compression.NONE&&e()?(k=a(De,ie.width*ie.colors,ie.colors,q),Ae=a(be,ie.width,1,q)):(k=De,Ae=be,Le=void 0)}if(ie.colorType===3&&($=this.color_spaces.INDEXED,he=ie.palette,ie.transparency.indexed)){var Ue=ie.transparency.indexed,He=0;for(Me=0,Re=Ue.length;Me<Re;++Me)He+=Ue[Me];if((He/=255)===Re-1&&Ue.indexOf(0)!==-1)de=[Ue.indexOf(0)];else if(He!==Re){for(me=ie.decodePixels(),be=new Uint8Array(me.length),Me=0,Re=me.length;Me<Re;Me++)be[Me]=Ue[me[Me]];Ae=a(be,ie.width,1)}}var Ce=function(Se){var $e;switch(Se){case t.image_compression.FAST:$e=11;break;case t.image_compression.MEDIUM:$e=13;break;case t.image_compression.SLOW:$e=14;break;default:$e=12}return $e}(q);return Le===this.decode.FLATE_DECODE&&(Ie="/Predictor "+Ce+" "),Ie+="/Colors "+ge+" /BitsPerComponent "+J+" /Columns "+ie.width,(this.__addimage__.isArrayBuffer(k)||this.__addimage__.isArrayBufferView(k))&&(k=this.__addimage__.arrayBufferToBinaryString(k)),(Ae&&this.__addimage__.isArrayBuffer(Ae)||this.__addimage__.isArrayBufferView(Ae))&&(Ae=this.__addimage__.arrayBufferToBinaryString(Ae)),{alias:Z,data:k,index:U,filter:Le,decodeParameters:Ie,transparency:de,palette:he,sMask:Ae,predictor:Ce,width:ie.width,height:ie.height,bitsPerComponent:J,colorSpace:$}}}})(jn.API),function(t){t.processGIF89A=function(e,a,r,s){var l=new NPe(e),h=l.width,n=l.height,w=[];l.decodeAndBlitFrameRGBA(0,w);var T={data:w,width:h,height:n},E=new S5(100).encode(T,100);return t.processJPEG.call(this,E,a,r,s)},t.processGIF87A=t.processGIF89A}(jn.API),Rp.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var a=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:r,blue:a,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Rp.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(a){io.log("bit decode error:"+a)}},Rp.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),a=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var l=this.datav.getUint8(this.pos++,!0),h=r*this.width*4+8*s*4,n=0;n<8&&8*s+n<this.width;n++){var w=this.palette[l>>7-n&1];this.data[h+4*n]=w.blue,this.data[h+4*n+1]=w.green,this.data[h+4*n+2]=w.red,this.data[h+4*n+3]=255}a!==0&&(this.pos+=4-a)}},Rp.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,a=this.height-1;a>=0;a--){for(var r=this.bottom_up?a:this.height-1-a,s=0;s<t;s++){var l=this.datav.getUint8(this.pos++,!0),h=r*this.width*4+2*s*4,n=l>>4,w=15&l,T=this.palette[n];if(this.data[h]=T.blue,this.data[h+1]=T.green,this.data[h+2]=T.red,this.data[h+3]=255,2*s+1>=this.width)break;T=this.palette[w],this.data[h+4]=T.blue,this.data[h+4+1]=T.green,this.data[h+4+2]=T.red,this.data[h+4+3]=255}e!==0&&(this.pos+=4-e)}},Rp.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var a=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),l=a*this.width*4+4*r;if(s<this.palette.length){var h=this.palette[s];this.data[l]=h.red,this.data[l+1]=h.green,this.data[l+2]=h.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}t!==0&&(this.pos+=4-t)}},Rp.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),a=this.height-1;a>=0;a--){for(var r=this.bottom_up?a:this.height-1-a,s=0;s<this.width;s++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var h=(l&e)/e*255|0,n=(l>>5&e)/e*255|0,w=(l>>10&e)/e*255|0,T=l>>15?255:0,E=r*this.width*4+4*s;this.data[E]=w,this.data[E+1]=n,this.data[E+2]=h,this.data[E+3]=T}this.pos+=t}},Rp.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),a=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,l=0;l<this.width;l++){var h=this.datav.getUint16(this.pos,!0);this.pos+=2;var n=(h&e)/e*255|0,w=(h>>5&a)/a*255|0,T=(h>>11)/e*255|0,E=s*this.width*4+4*l;this.data[E]=T,this.data[E+1]=w,this.data[E+2]=n,this.data[E+3]=255}this.pos+=t}},Rp.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),h=e*this.width*4+4*a;this.data[h]=l,this.data[h+1]=s,this.data[h+2]=r,this.data[h+3]=255}this.pos+=this.width%4}},Rp.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),h=this.datav.getUint8(this.pos++,!0),n=e*this.width*4+4*a;this.data[n]=l,this.data[n+1]=s,this.data[n+2]=r,this.data[n+3]=h}},Rp.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,a,r,s){var l=new Rp(e,!1),h=l.width,n=l.height,w={data:l.getData(),width:h,height:n},T=new S5(100).encode(w,100);return t.processJPEG.call(this,T,a,r,s)}}(jn.API),HZ.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,a,r,s){var l=new HZ(e),h=l.width,n=l.height,w={data:l.getData(),width:h,height:n},T=new S5(100).encode(w,100);return t.processJPEG.call(this,T,a,r,s)}}(jn.API),jn.API.processRGBA=function(t,e,a){for(var r=t.data,s=r.length,l=new Uint8Array(s/4*3),h=new Uint8Array(s/4),n=0,w=0,T=0;T<s;T+=4){var E=r[T],z=r[T+1],k=r[T+2],U=r[T+3];l[n++]=E,l[n++]=z,l[n++]=k,h[w++]=U}var Z=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(h),data:Z,index:e,alias:a,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},jn.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},A_=jn.API,TC=A_.getCharWidthsArray=function(t,e){var a,r,s=(e=e||{}).font||this.internal.getFont(),l=e.fontSize||this.internal.getFontSize(),h=e.charSpace||this.internal.getCharSpace(),n=e.widths?e.widths:s.metadata.Unicode.widths,w=n.fof?n.fof:1,T=e.kerning?e.kerning:s.metadata.Unicode.kerning,E=T.fof?T.fof:1,z=e.doKerning!==!1,k=0,U=t.length,Z=0,q=n[0]||w,$=[];for(a=0;a<U;a++)r=t.charCodeAt(a),typeof s.metadata.widthOfString=="function"?$.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(r))+h*(1e3/l)||0)/1e3):(k=z&&Ls(T[r])==="object"&&!isNaN(parseInt(T[r][Z],10))?T[r][Z]/E:0,$.push((n[r]||q)/w+k)),Z=r;return $},GZ=A_.getStringUnitWidth=function(t,e){var a=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return A_.processArabic&&(t=A_.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,a,s)/a:TC.apply(this,arguments).reduce(function(l,h){return l+h},0)},jZ=function(t,e,a,r){for(var s=[],l=0,h=t.length,n=0;l!==h&&n+e[l]<a;)n+=e[l],l++;s.push(t.slice(0,l));var w=l;for(n=0;l!==h;)n+e[l]>r&&(s.push(t.slice(w,l)),n=0,w=l),n+=e[l],l++;return w!==l&&s.push(t.slice(w,l)),s},ZZ=function(t,e,a){a||(a={});var r,s,l,h,n,w,T,E=[],z=[E],k=a.textIndent||0,U=0,Z=0,q=t.split(" "),$=TC.apply(this,[" ",a])[0];if(w=a.lineIndent===-1?q[0].length+2:a.lineIndent||0){var J=Array(w).join(" "),ie=[];q.map(function(ge){(ge=ge.split(/\s*\n/)).length>1?ie=ie.concat(ge.map(function(he,Ae){return(Ae&&he.length?`
`:"")+he})):ie.push(ge[0])}),q=ie,w=GZ.apply(this,[J,a])}for(l=0,h=q.length;l<h;l++){var de=0;if(r=q[l],w&&r[0]==`
`&&(r=r.substr(1),de=1),k+U+(Z=(s=TC.apply(this,[r,a])).reduce(function(ge,he){return ge+he},0))>e||de){if(Z>e){for(n=jZ.apply(this,[r,s,e-(k+U),e]),E.push(n.shift()),E=[n.pop()];n.length;)z.push([n.shift()]);Z=s.slice(r.length-(E[0]?E[0].length:0)).reduce(function(ge,he){return ge+he},0)}else E=[r];z.push(E),k=Z+w,U=$}else E.push(r),k+=U+Z,U=$}return T=w?function(ge,he){return(he?J:"")+ge.join(" ")}:function(ge){return ge.join(" ")},z.map(T)},A_.splitTextToSize=function(t,e,a){var r,s=(a=a||{}).fontSize||this.internal.getFontSize(),l=(function(E){if(E.widths&&E.kerning)return{widths:E.widths,kerning:E.kerning};var z=this.internal.getFont(E.fontName,E.fontStyle);return z.metadata.Unicode?{widths:z.metadata.Unicode.widths||{0:1},kerning:z.metadata.Unicode.kerning||{}}:{font:z.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,a);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var h=1*this.internal.scaleFactor*e/s;l.textIndent=a.textIndent?1*a.textIndent*this.internal.scaleFactor/s:0,l.lineIndent=a.lineIndent;var n,w,T=[];for(n=0,w=r.length;n<w;n++)T=T.concat(ZZ.apply(this,[r[n],h,l]));return T},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",a={},r={},s=0;s<e.length;s++)a[e[s]]="0123456789abcdef"[s],r["0123456789abcdef"[s]]=e[s];var l=function(z){return"0x"+parseInt(z,10).toString(16)},h=t.__fontmetrics__.compress=function(z){var k,U,Z,q,$=["{"];for(var J in z){if(k=z[J],isNaN(parseInt(J,10))?U="'"+J+"'":(J=parseInt(J,10),U=(U=l(J).slice(2)).slice(0,-1)+r[U.slice(-1)]),typeof k=="number")k<0?(Z=l(k).slice(3),q="-"):(Z=l(k).slice(2),q=""),Z=q+Z.slice(0,-1)+r[Z.slice(-1)];else{if(Ls(k)!=="object")throw new Error("Don't know what to do with value type "+Ls(k)+".");Z=h(k)}$.push(U+Z)}return $.push("}"),$.join("")},n=t.__fontmetrics__.uncompress=function(z){if(typeof z!="string")throw new Error("Invalid argument passed to uncompress.");for(var k,U,Z,q,$={},J=1,ie=$,de=[],ge="",he="",Ae=z.length-1,me=1;me<Ae;me+=1)(q=z[me])=="'"?k?(Z=k.join(""),k=void 0):k=[]:k?k.push(q):q=="{"?(de.push([ie,Z]),ie={},Z=void 0):q=="}"?((U=de.pop())[0][U[1]]=ie,Z=void 0,ie=U[0]):q=="-"?J=-1:Z===void 0?a.hasOwnProperty(q)?(ge+=a[q],Z=parseInt(ge,16)*J,J=1,ge=""):ge+=q:a.hasOwnProperty(q)?(he+=a[q],ie[Z]=parseInt(he,16)*J,J=1,Z=void 0,he=""):he+=q;return $},w={codePages:["WinAnsiEncoding"],WinAnsiEncoding:n("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},T={Unicode:{Courier:w,"Courier-Bold":w,"Courier-BoldOblique":w,"Courier-Oblique":w,Helvetica:w,"Helvetica-Bold":w,"Helvetica-BoldOblique":w,"Helvetica-Oblique":w,"Times-Roman":w,"Times-Bold":w,"Times-BoldItalic":w,"Times-Italic":w}},E={Unicode:{"Courier-Oblique":n("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":n("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":n("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:n("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":n("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":n("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:n("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:n("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":n("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:n("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":n("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":n("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":n("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":n("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(z){var k=z.font,U=E.Unicode[k.postScriptName];U&&(k.metadata.Unicode={},k.metadata.Unicode.widths=U.widths,k.metadata.Unicode.kerning=U.kerning);var Z=T.Unicode[k.postScriptName];Z&&(k.metadata.Unicode.encoding=Z,k.encoding=Z.codePages[0])}])}(jn.API),function(t){var e=function(a){for(var r=a.length,s=new Uint8Array(r),l=0;l<r;l++)s[l]=a.charCodeAt(l);return s};t.API.events.push(["addFont",function(a){var r=void 0,s=a.font,l=a.instance;if(!s.isStandardFont){if(l===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(r=l.existsFileInVFS(s.postScriptName)===!1?l.loadFile(s.postScriptName):l.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(h,n){n=/^\x00\x01\x00\x00/.test(n)?e(n):e(Xw(n)),h.metadata=t.API.TTFFont.open(n),h.metadata.Unicode=h.metadata.Unicode||{encoding:{},kerning:{},widths:[]},h.metadata.glyIdsUsed=[0]})(s,r)}}])}(jn),function(t){function e(){return(Kn.canvg?Promise.resolve(Kn.canvg):BM(()=>import("./index.es-DjpQYpOD.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load canvg: "+a))}).then(function(a){return a.default?a.default:a})}jn.API.addSvgAsImage=function(a,r,s,l,h,n,w,T){if(isNaN(r)||isNaN(s))throw io.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(l)||isNaN(h))throw io.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var E=document.createElement("canvas");E.width=l,E.height=h;var z=E.getContext("2d");z.fillStyle="#fff",z.fillRect(0,0,E.width,E.height);var k={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},U=this;return e().then(function(Z){return Z.fromString(z,a,k)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(Z){return Z.render(k)}).then(function(){U.addImage(E.toDataURL("image/jpeg",1),r,s,l,h,w,T)})}}(),jn.API.putTotalPages=function(t){var e,a=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),a=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),a=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var s=0;s<this.internal.pages[r].length;s++)this.internal.pages[r][s]=this.internal.pages[r][s].replace(e,a);return this},jn.API.viewerPreferences=function(t,e){var a;t=t||{},e=e||!1;var r,s,l,h={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},n=Object.keys(h),w=[],T=0,E=0,z=0;function k(Z,q){var $,J=!1;for($=0;$<Z.length;$+=1)Z[$]===q&&(J=!0);return J}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(h)),this.internal.viewerpreferences.isSubscribed=!1),a=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var U=n.length;for(z=0;z<U;z+=1)a[n[z]].value=a[n[z]].defaultValue,a[n[z]].explicitSet=!1}if(Ls(t)==="object"){for(s in t)if(l=t[s],k(n,s)&&l!==void 0){if(a[s].type==="boolean"&&typeof l=="boolean")a[s].value=l;else if(a[s].type==="name"&&k(a[s].valueSet,l))a[s].value=l;else if(a[s].type==="integer"&&Number.isInteger(l))a[s].value=l;else if(a[s].type==="array"){for(T=0;T<l.length;T+=1)if(r=!0,l[T].length===1&&typeof l[T][0]=="number")w.push(String(l[T]-1));else if(l[T].length>1){for(E=0;E<l[T].length;E+=1)typeof l[T][E]!="number"&&(r=!1);r===!0&&w.push([l[T][0]-1,l[T][1]-1].join(" "))}a[s].value="["+w.join(" ")+"]"}else a[s].value=a[s].defaultValue;a[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var Z,q=[];for(Z in a)a[Z].explicitSet===!0&&(a[Z].type==="name"?q.push("/"+Z+" /"+a[Z].value):q.push("/"+Z+" "+a[Z].value));q.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+q.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=a,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),l=unescape(encodeURIComponent(r)),h=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),n=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),w=unescape(encodeURIComponent("</x:xmpmeta>")),T=l.length+h.length+n.length+s.length+w.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+T+" >>"),this.internal.write("stream"),this.internal.write(s+l+h+n+w),this.internal.write("endstream"),this.internal.write("endobj")},a=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",a),this.internal.events.subscribe("postPutResources",e)),this}}(jn.API),function(t){var e=t.API,a=e.pdfEscape16=function(l,h){for(var n,w=h.metadata.Unicode.widths,T=["","0","00","000","0000"],E=[""],z=0,k=l.length;z<k;++z){if(n=h.metadata.characterToGlyph(l.charCodeAt(z)),h.metadata.glyIdsUsed.push(n),h.metadata.toUnicode[n]=l.charCodeAt(z),w.indexOf(n)==-1&&(w.push(n),w.push([parseInt(h.metadata.widthOfGlyph(n),10)])),n=="0")return E.join("");n=n.toString(16),E.push(T[4-n.length],n)}return E.join("")},r=function(l){var h,n,w,T,E,z,k;for(E=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,w=[],z=0,k=(n=Object.keys(l).sort(function(U,Z){return U-Z})).length;z<k;z++)h=n[z],w.length>=100&&(E+=`
`+w.length+` beginbfchar
`+w.join(`
`)+`
endbfchar`,w=[]),l[h]!==void 0&&l[h]!==null&&typeof l[h].toString=="function"&&(T=("0000"+l[h].toString(16)).slice(-4),h=("0000"+(+h).toString(16)).slice(-4),w.push("<"+h+"><"+T+">"));return w.length&&(E+=`
`+w.length+` beginbfchar
`+w.join(`
`)+`
endbfchar
`),E+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(l){(function(h){var n=h.font,w=h.out,T=h.newObject,E=h.putStream;if(n.metadata instanceof t.API.TTFFont&&n.encoding==="Identity-H"){for(var z=n.metadata.Unicode.widths,k=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),U="",Z=0;Z<k.length;Z++)U+=String.fromCharCode(k[Z]);var q=T();E({data:U,addLength1:!0,objectId:q}),w("endobj");var $=T();E({data:r(n.metadata.toUnicode),addLength1:!0,objectId:$}),w("endobj");var J=T();w("<<"),w("/Type /FontDescriptor"),w("/FontName /"+T_(n.fontName)),w("/FontFile2 "+q+" 0 R"),w("/FontBBox "+t.API.PDFObject.convert(n.metadata.bbox)),w("/Flags "+n.metadata.flags),w("/StemV "+n.metadata.stemV),w("/ItalicAngle "+n.metadata.italicAngle),w("/Ascent "+n.metadata.ascender),w("/Descent "+n.metadata.decender),w("/CapHeight "+n.metadata.capHeight),w(">>"),w("endobj");var ie=T();w("<<"),w("/Type /Font"),w("/BaseFont /"+T_(n.fontName)),w("/FontDescriptor "+J+" 0 R"),w("/W "+t.API.PDFObject.convert(z)),w("/CIDToGIDMap /Identity"),w("/DW 1000"),w("/Subtype /CIDFontType2"),w("/CIDSystemInfo"),w("<<"),w("/Supplement 0"),w("/Registry (Adobe)"),w("/Ordering ("+n.encoding+")"),w(">>"),w(">>"),w("endobj"),n.objectNumber=T(),w("<<"),w("/Type /Font"),w("/Subtype /Type0"),w("/ToUnicode "+$+" 0 R"),w("/BaseFont /"+T_(n.fontName)),w("/Encoding /"+n.encoding),w("/DescendantFonts ["+ie+" 0 R]"),w(">>"),w("endobj"),n.isAlreadyPutted=!0}})(l)}]),e.events.push(["putFont",function(l){(function(h){var n=h.font,w=h.out,T=h.newObject,E=h.putStream;if(n.metadata instanceof t.API.TTFFont&&n.encoding==="WinAnsiEncoding"){for(var z=n.metadata.rawData,k="",U=0;U<z.length;U++)k+=String.fromCharCode(z[U]);var Z=T();E({data:k,addLength1:!0,objectId:Z}),w("endobj");var q=T();E({data:r(n.metadata.toUnicode),addLength1:!0,objectId:q}),w("endobj");var $=T();w("<<"),w("/Descent "+n.metadata.decender),w("/CapHeight "+n.metadata.capHeight),w("/StemV "+n.metadata.stemV),w("/Type /FontDescriptor"),w("/FontFile2 "+Z+" 0 R"),w("/Flags 96"),w("/FontBBox "+t.API.PDFObject.convert(n.metadata.bbox)),w("/FontName /"+T_(n.fontName)),w("/ItalicAngle "+n.metadata.italicAngle),w("/Ascent "+n.metadata.ascender),w(">>"),w("endobj"),n.objectNumber=T();for(var J=0;J<n.metadata.hmtx.widths.length;J++)n.metadata.hmtx.widths[J]=parseInt(n.metadata.hmtx.widths[J]*(1e3/n.metadata.head.unitsPerEm));w("<</Subtype/TrueType/Type/Font/ToUnicode "+q+" 0 R/BaseFont/"+T_(n.fontName)+"/FontDescriptor "+$+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),w("endobj"),n.isAlreadyPutted=!0}})(l)}]);var s=function(l){var h,n=l.text||"",w=l.x,T=l.y,E=l.options||{},z=l.mutex||{},k=z.pdfEscape,U=z.activeFontKey,Z=z.fonts,q=U,$="",J=0,ie="",de=Z[q].encoding;if(Z[q].encoding!=="Identity-H")return{text:n,x:w,y:T,options:E,mutex:z};for(ie=n,q=U,Array.isArray(n)&&(ie=n[0]),J=0;J<ie.length;J+=1)Z[q].metadata.hasOwnProperty("cmap")&&(h=Z[q].metadata.cmap.unicode.codeMap[ie[J].charCodeAt(0)]),h||ie[J].charCodeAt(0)<256&&Z[q].metadata.hasOwnProperty("Unicode")?$+=ie[J]:$+="";var ge="";return parseInt(q.slice(1))<14||de==="WinAnsiEncoding"?ge=k($,q).split("").map(function(he){return he.charCodeAt(0).toString(16)}).join(""):de==="Identity-H"&&(ge=a($,Z[q])),z.isHex=!0,{text:ge,x:w,y:T,options:E,mutex:z}};e.events.push(["postProcessText",function(l){var h=l.text||"",n=[],w={text:h,x:l.x,y:l.y,options:l.options,mutex:l.mutex};if(Array.isArray(h)){var T=0;for(T=0;T<h.length;T+=1)Array.isArray(h[T])&&h[T].length===3?n.push([s(Object.assign({},w,{text:h[T][0]})).text,h[T][1],h[T][2]]):n.push(s(Object.assign({},w,{text:h[T]})).text);l.text=n}else l.text=s(Object.assign({},w,{text:h})).text}])}(jn),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(a){return e.call(this),this.internal.vFS[a]!==void 0},t.addFileToVFS=function(a,r){return e.call(this),this.internal.vFS[a]=r,this},t.getFileFromVFS=function(a){return e.call(this),this.internal.vFS[a]!==void 0?this.internal.vFS[a]:null}}(jn.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var s,l,h,n,w,T,E,z=e,k=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],U=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],Z={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},q={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},$=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],J=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),ie=!1,de=0;this.__bidiEngine__={};var ge=function(ne){var ye=ne.charCodeAt(),Me=ye>>8,ze=q[Me];return ze!==void 0?z[256*ze+(255&ye)]:Me===252||Me===253?"AL":J.test(Me)?"L":Me===8?"R":"N"},he=function(ne){for(var ye,Me=0;Me<ne.length;Me++){if((ye=ge(ne.charAt(Me)))==="L")return!1;if(ye==="R")return!0}return!1},Ae=function(ne,ye,Me,ze){var Le,Ie,qe,ke,tt=ye[ze];switch(tt){case"L":case"R":ie=!1;break;case"N":case"AN":break;case"EN":ie&&(tt="AN");break;case"AL":ie=!0,tt="R";break;case"WS":tt="N";break;case"CS":ze<1||ze+1>=ye.length||(Le=Me[ze-1])!=="EN"&&Le!=="AN"||(Ie=ye[ze+1])!=="EN"&&Ie!=="AN"?tt="N":ie&&(Ie="AN"),tt=Ie===Le?Ie:"N";break;case"ES":tt=(Le=ze>0?Me[ze-1]:"B")==="EN"&&ze+1<ye.length&&ye[ze+1]==="EN"?"EN":"N";break;case"ET":if(ze>0&&Me[ze-1]==="EN"){tt="EN";break}if(ie){tt="N";break}for(qe=ze+1,ke=ye.length;qe<ke&&ye[qe]==="ET";)qe++;tt=qe<ke&&ye[qe]==="EN"?"EN":"N";break;case"NSM":if(h&&!n){for(ke=ye.length,qe=ze+1;qe<ke&&ye[qe]==="NSM";)qe++;if(qe<ke){var Ue=ne[ze],He=Ue>=1425&&Ue<=2303||Ue===64286;if(Le=ye[qe],He&&(Le==="R"||Le==="AL")){tt="R";break}}}tt=ze<1||(Le=ye[ze-1])==="B"?"N":Me[ze-1];break;case"B":ie=!1,s=!0,tt=de;break;case"S":l=!0,tt="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":ie=!1;break;case"BN":tt="N"}return tt},me=function(ne,ye,Me){var ze=ne.split("");return Me&&Re(ze,Me,{hiLevel:de}),ze.reverse(),ye&&ye.reverse(),ze.join("")},Re=function(ne,ye,Me){var ze,Le,Ie,qe,ke,tt=-1,Ue=ne.length,He=0,Ce=[],Se=de?U:k,$e=[];for(ie=!1,s=!1,l=!1,Le=0;Le<Ue;Le++)$e[Le]=ge(ne[Le]);for(Ie=0;Ie<Ue;Ie++){if(ke=He,Ce[Ie]=Ae(ne,$e,Ce,Ie),ze=240&(He=Se[ke][Z[Ce[Ie]]]),He&=15,ye[Ie]=qe=Se[He][5],ze>0)if(ze===16){for(Le=tt;Le<Ie;Le++)ye[Le]=1;tt=-1}else tt=-1;if(Se[He][6])tt===-1&&(tt=Ie);else if(tt>-1){for(Le=tt;Le<Ie;Le++)ye[Le]=qe;tt=-1}$e[Ie]==="B"&&(ye[Ie]=0),Me.hiLevel|=qe}l&&function(ft,Je,wt){for(var it=0;it<wt;it++)if(ft[it]==="S"){Je[it]=de;for(var ct=it-1;ct>=0&&ft[ct]==="WS";ct--)Je[ct]=de}}($e,ye,Ue)},be=function(ne,ye,Me,ze,Le){if(!(Le.hiLevel<ne)){if(ne===1&&de===1&&!s)return ye.reverse(),void(Me&&Me.reverse());for(var Ie,qe,ke,tt,Ue=ye.length,He=0;He<Ue;){if(ze[He]>=ne){for(ke=He+1;ke<Ue&&ze[ke]>=ne;)ke++;for(tt=He,qe=ke-1;tt<qe;tt++,qe--)Ie=ye[tt],ye[tt]=ye[qe],ye[qe]=Ie,Me&&(Ie=Me[tt],Me[tt]=Me[qe],Me[qe]=Ie);He=ke}He++}}},De=function(ne,ye,Me){var ze=ne.split(""),Le={hiLevel:de};return Me||(Me=[]),Re(ze,Me,Le),function(Ie,qe,ke){if(ke.hiLevel!==0&&E)for(var tt,Ue=0;Ue<Ie.length;Ue++)qe[Ue]===1&&(tt=$.indexOf(Ie[Ue]))>=0&&(Ie[Ue]=$[tt+1])}(ze,Me,Le),be(2,ze,ye,Me,Le),be(1,ze,ye,Me,Le),ze.join("")};return this.__bidiEngine__.doBidiReorder=function(ne,ye,Me){if(function(Le,Ie){if(Ie)for(var qe=0;qe<Le.length;qe++)Ie[qe]=qe;n===void 0&&(n=he(Le)),T===void 0&&(T=he(Le))}(ne,ye),h||!w||T)if(h&&w&&n^T)de=n?1:0,ne=me(ne,ye,Me);else if(!h&&w&&T)de=n?1:0,ne=De(ne,ye,Me),ne=me(ne,ye);else if(!h||n||w||T){if(h&&!w&&n^T)ne=me(ne,ye),n?(de=0,ne=De(ne,ye,Me)):(de=1,ne=De(ne,ye,Me),ne=me(ne,ye));else if(h&&n&&!w&&T)de=1,ne=De(ne,ye,Me),ne=me(ne,ye);else if(!h&&!w&&n^T){var ze=E;n?(de=1,ne=De(ne,ye,Me),de=0,E=!1,ne=De(ne,ye,Me),E=ze):(de=0,ne=De(ne,ye,Me),ne=me(ne,ye),de=1,E=!1,ne=De(ne,ye,Me),E=ze,ne=me(ne,ye))}}else de=0,ne=De(ne,ye,Me);else de=n?1:0,ne=De(ne,ye,Me);return ne},this.__bidiEngine__.setOptions=function(ne){ne&&(h=ne.isInputVisual,w=ne.isOutputVisual,n=ne.isInputRtl,T=ne.isOutputRtl,E=ne.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],a=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var s=r.text;r.x,r.y;var l=r.options||{};r.mutex,l.lang;var h=[];if(l.isInputVisual=typeof l.isInputVisual!="boolean"||l.isInputVisual,a.setOptions(l),Object.prototype.toString.call(s)==="[object Array]"){var n=0;for(h=[],n=0;n<s.length;n+=1)Object.prototype.toString.call(s[n])==="[object Array]"?h.push([a.doBidiReorder(s[n][0]),s[n][1],s[n][2]]):h.push([a.doBidiReorder(s[n])]);r.text=h}else r.text=a.doBidiReorder(s);a.setOptions({isInputVisual:!0})}])}(jn),jn.API.TTFFont=function(){function t(e){var a;if(this.rawData=e,a=this.contents=new Lg(e),this.contents.pos=4,a.readString(4)==="ttcf")throw new Error("TTCF not supported.");a.pos=0,this.parse(),this.subset=new qPe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new VPe(this.contents),this.head=new OPe(this),this.name=new FPe(this),this.cmap=new eQ(this),this.toUnicode={},this.hhea=new DPe(this),this.maxp=new UPe(this),this.hmtx=new kPe(this),this.post=new IPe(this),this.os2=new MPe(this),this.loca=new ZPe(this),this.glyf=new BPe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,a,r,s,l;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var h,n,w,T;for(T=[],h=0,n=(w=this.bbox).length;h<n;h++)e=w[h],T.push(Math.round(e*this.scaleFactor));return T}).call(this),this.stemV=0,this.post.exists?(r=255&(s=this.post.italic_angle),(32768&(a=s>>16))!=0&&(a=-(1+(65535^a))),this.italicAngle=+(a+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(l=this.familyClass)===1||l===2||l===3||l===4||l===5||l===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var a;return((a=this.cmap.unicode)!=null?a.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var a;return a=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*a},t.prototype.widthOfString=function(e,a,r){var s,l,h,n;for(h=0,l=0,n=(e=""+e).length;0<=n?l<n:l>n;l=0<=n?++l:--l)s=e.charCodeAt(l),h+=this.widthOfGlyph(this.characterToGlyph(s))+r*(1e3/a)||0;return h*(a/1e3)},t.prototype.lineHeight=function(e,a){var r;return a==null&&(a=!1),r=a?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var kp,Lg=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var a,r;for(r=[],a=0;0<=e?a<e:a>e;a=0<=e?++a:--a)r[a]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var a,r,s;for(s=[],a=0,r=e.length;0<=r?a<r:a>r;a=0<=r?++a:--a)s.push(this.writeByte(e.charCodeAt(a)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,a,r,s,l,h,n,w;return e=this.readByte(),a=this.readByte(),r=this.readByte(),s=this.readByte(),l=this.readByte(),h=this.readByte(),n=this.readByte(),w=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^a)+1099511627776*(255^r)+4294967296*(255^s)+16777216*(255^l)+65536*(255^h)+256*(255^n)+(255^w)+1):72057594037927940*e+281474976710656*a+1099511627776*r+4294967296*s+16777216*l+65536*h+256*n+w},t.prototype.writeLongLong=function(e){var a,r;return a=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var a,r;for(a=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)a.push(this.readByte());return a},t.prototype.write=function(e){var a,r,s,l;for(l=[],r=0,s=e.length;r<s;r++)a=e[r],l.push(this.writeByte(a));return l},t}(),VPe=function(){var t;function e(a){var r,s,l;for(this.scalarType=a.readInt(),this.tableCount=a.readShort(),this.searchRange=a.readShort(),this.entrySelector=a.readShort(),this.rangeShift=a.readShort(),this.tables={},s=0,l=this.tableCount;0<=l?s<l:s>l;s=0<=l?++s:--s)r={tag:a.readString(4),checksum:a.readInt(),offset:a.readInt(),length:a.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(a){var r,s,l,h,n,w,T,E,z,k,U,Z,q;for(q in U=Object.keys(a).length,w=Math.log(2),z=16*Math.floor(Math.log(U)/w),h=Math.floor(z/w),E=16*U-z,(s=new Lg).writeInt(this.scalarType),s.writeShort(U),s.writeShort(z),s.writeShort(h),s.writeShort(E),l=16*U,T=s.pos+l,n=null,Z=[],a)for(k=a[q],s.writeString(q),s.writeInt(t(k)),s.writeInt(T),s.writeInt(k.length),Z=Z.concat(k),q==="head"&&(n=T),T+=k.length;T%4;)Z.push(0),T++;return s.write(Z),r=2981146554-t(s.data),s.pos=n+8,s.writeUInt32(r),s.data},t=function(a){var r,s,l,h;for(a=tQ.call(a);a.length%4;)a.push(0);for(l=new Lg(a),s=0,r=0,h=a.length;r<h;r=r+=4)s+=l.readUInt32();return 4294967295&s},e}(),zPe={}.hasOwnProperty,Mm=function(t,e){for(var a in e)zPe.call(e,a)&&(t[a]=e[a]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};kp=function(){function t(e){var a;this.file=e,a=this.file.directory.tables[this.tag],this.exists=!!a,a&&(this.offset=a.offset,this.length=a.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var OPe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Mm(e,kp),e.prototype.tag="head",e.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.revision=a.readInt(),this.checkSumAdjustment=a.readInt(),this.magicNumber=a.readInt(),this.flags=a.readShort(),this.unitsPerEm=a.readShort(),this.created=a.readLongLong(),this.modified=a.readLongLong(),this.xMin=a.readShort(),this.yMin=a.readShort(),this.xMax=a.readShort(),this.yMax=a.readShort(),this.macStyle=a.readShort(),this.lowestRecPPEM=a.readShort(),this.fontDirectionHint=a.readShort(),this.indexToLocFormat=a.readShort(),this.glyphDataFormat=a.readShort()},e.prototype.encode=function(a){var r;return(r=new Lg).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(a),r.writeShort(this.glyphDataFormat),r.data},e}(),$Z=function(){function t(e,a){var r,s,l,h,n,w,T,E,z,k,U,Z,q,$,J,ie,de;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=a+e.readInt(),z=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(w=0;w<256;++w)this.codeMap[w]=e.readByte();break;case 4:for(U=e.readUInt16(),k=U/2,e.pos+=6,l=function(){var ge,he;for(he=[],w=ge=0;0<=k?ge<k:ge>k;w=0<=k?++ge:--ge)he.push(e.readUInt16());return he}(),e.pos+=2,q=function(){var ge,he;for(he=[],w=ge=0;0<=k?ge<k:ge>k;w=0<=k?++ge:--ge)he.push(e.readUInt16());return he}(),T=function(){var ge,he;for(he=[],w=ge=0;0<=k?ge<k:ge>k;w=0<=k?++ge:--ge)he.push(e.readUInt16());return he}(),E=function(){var ge,he;for(he=[],w=ge=0;0<=k?ge<k:ge>k;w=0<=k?++ge:--ge)he.push(e.readUInt16());return he}(),s=(this.length-e.pos+this.offset)/2,n=function(){var ge,he;for(he=[],w=ge=0;0<=s?ge<s:ge>s;w=0<=s?++ge:--ge)he.push(e.readUInt16());return he}(),w=J=0,de=l.length;J<de;w=++J)for($=l[w],r=ie=Z=q[w];Z<=$?ie<=$:ie>=$;r=Z<=$?++ie:--ie)E[w]===0?h=r+T[w]:(h=n[E[w]/2+(r-Z)-(k-w)]||0)!==0&&(h+=T[w]),this.codeMap[r]=65535&h}e.pos=z}return t.encode=function(e,a){var r,s,l,h,n,w,T,E,z,k,U,Z,q,$,J,ie,de,ge,he,Ae,me,Re,be,De,ne,ye,Me,ze,Le,Ie,qe,ke,tt,Ue,He,Ce,Se,$e,ft,Je,wt,it,ct,_e,Jt,Zt;switch(ze=new Lg,h=Object.keys(e).sort(function(Pa,Bt){return Pa-Bt}),a){case"macroman":for(q=0,$=function(){var Pa=[];for(Z=0;Z<256;++Z)Pa.push(0);return Pa}(),ie={0:0},l={},Le=0,tt=h.length;Le<tt;Le++)ie[ct=e[s=h[Le]]]==null&&(ie[ct]=++q),l[s]={old:e[s],new:ie[e[s]]},$[s]=ie[e[s]];return ze.writeUInt16(1),ze.writeUInt16(0),ze.writeUInt32(12),ze.writeUInt16(0),ze.writeUInt16(262),ze.writeUInt16(0),ze.write($),{charMap:l,subtable:ze.data,maxGlyphID:q+1};case"unicode":for(ye=[],z=[],de=0,ie={},r={},J=T=null,Ie=0,Ue=h.length;Ie<Ue;Ie++)ie[he=e[s=h[Ie]]]==null&&(ie[he]=++de),r[s]={old:he,new:ie[he]},n=ie[he]-s,J!=null&&n===T||(J&&z.push(J),ye.push(s),T=n),J=s;for(J&&z.push(J),z.push(65535),ye.push(65535),De=2*(be=ye.length),Re=2*Math.pow(Math.log(be)/Math.LN2,2),k=Math.log(Re/2)/Math.LN2,me=2*be-Re,w=[],Ae=[],U=[],Z=qe=0,He=ye.length;qe<He;Z=++qe){if(ne=ye[Z],E=z[Z],ne===65535){w.push(0),Ae.push(0);break}if(ne-(Me=r[ne].new)>=32768)for(w.push(0),Ae.push(2*(U.length+be-Z)),s=ke=ne;ne<=E?ke<=E:ke>=E;s=ne<=E?++ke:--ke)U.push(r[s].new);else w.push(Me-ne),Ae.push(0)}for(ze.writeUInt16(3),ze.writeUInt16(1),ze.writeUInt32(12),ze.writeUInt16(4),ze.writeUInt16(16+8*be+2*U.length),ze.writeUInt16(0),ze.writeUInt16(De),ze.writeUInt16(Re),ze.writeUInt16(k),ze.writeUInt16(me),wt=0,Ce=z.length;wt<Ce;wt++)s=z[wt],ze.writeUInt16(s);for(ze.writeUInt16(0),it=0,Se=ye.length;it<Se;it++)s=ye[it],ze.writeUInt16(s);for(_e=0,$e=w.length;_e<$e;_e++)n=w[_e],ze.writeUInt16(n);for(Jt=0,ft=Ae.length;Jt<ft;Jt++)ge=Ae[Jt],ze.writeUInt16(ge);for(Zt=0,Je=U.length;Zt<Je;Zt++)q=U[Zt],ze.writeUInt16(q);return{charMap:r,subtable:ze.data,maxGlyphID:de+1}}},t}(),eQ=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Mm(e,kp),e.prototype.tag="cmap",e.prototype.parse=function(a){var r,s,l;for(a.pos=this.offset,this.version=a.readUInt16(),l=a.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=l?s<l:s>l;s=0<=l?++s:--s)r=new $Z(a,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(a,r){var s,l;return r==null&&(r="macroman"),s=$Z.encode(a,r),(l=new Lg).writeUInt16(0),l.writeUInt16(1),s.table=l.data.concat(s.subtable),s},e}(),DPe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Mm(e,kp),e.prototype.tag="hhea",e.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.ascender=a.readShort(),this.decender=a.readShort(),this.lineGap=a.readShort(),this.advanceWidthMax=a.readShort(),this.minLeftSideBearing=a.readShort(),this.minRightSideBearing=a.readShort(),this.xMaxExtent=a.readShort(),this.caretSlopeRise=a.readShort(),this.caretSlopeRun=a.readShort(),this.caretOffset=a.readShort(),a.pos+=8,this.metricDataFormat=a.readShort(),this.numberOfMetrics=a.readUInt16()},e}(),MPe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Mm(e,kp),e.prototype.tag="OS/2",e.prototype.parse=function(a){if(a.pos=this.offset,this.version=a.readUInt16(),this.averageCharWidth=a.readShort(),this.weightClass=a.readUInt16(),this.widthClass=a.readUInt16(),this.type=a.readShort(),this.ySubscriptXSize=a.readShort(),this.ySubscriptYSize=a.readShort(),this.ySubscriptXOffset=a.readShort(),this.ySubscriptYOffset=a.readShort(),this.ySuperscriptXSize=a.readShort(),this.ySuperscriptYSize=a.readShort(),this.ySuperscriptXOffset=a.readShort(),this.ySuperscriptYOffset=a.readShort(),this.yStrikeoutSize=a.readShort(),this.yStrikeoutPosition=a.readShort(),this.familyClass=a.readShort(),this.panose=function(){var r,s;for(s=[],r=0;r<10;++r)s.push(a.readByte());return s}(),this.charRange=function(){var r,s;for(s=[],r=0;r<4;++r)s.push(a.readInt());return s}(),this.vendorID=a.readString(4),this.selection=a.readShort(),this.firstCharIndex=a.readShort(),this.lastCharIndex=a.readShort(),this.version>0&&(this.ascent=a.readShort(),this.descent=a.readShort(),this.lineGap=a.readShort(),this.winAscent=a.readShort(),this.winDescent=a.readShort(),this.codePageRange=function(){var r,s;for(s=[],r=0;r<2;r=++r)s.push(a.readInt());return s}(),this.version>1))return this.xHeight=a.readShort(),this.capHeight=a.readShort(),this.defaultChar=a.readShort(),this.breakChar=a.readShort(),this.maxContext=a.readShort()},e}(),IPe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Mm(e,kp),e.prototype.tag="post",e.prototype.parse=function(a){var r,s,l;switch(a.pos=this.offset,this.format=a.readInt(),this.italicAngle=a.readInt(),this.underlinePosition=a.readShort(),this.underlineThickness=a.readShort(),this.isFixedPitch=a.readInt(),this.minMemType42=a.readInt(),this.maxMemType42=a.readInt(),this.minMemType1=a.readInt(),this.maxMemType1=a.readInt(),this.format){case 65536:break;case 131072:var h;for(s=a.readUInt16(),this.glyphNameIndex=[],h=0;0<=s?h<s:h>s;h=0<=s?++h:--h)this.glyphNameIndex.push(a.readUInt16());for(this.names=[],l=[];a.pos<this.offset+this.length;)r=a.readByte(),l.push(this.names.push(a.readString(r)));return l;case 151552:return s=a.readUInt16(),this.offsets=a.read(s);case 196608:break;case 262144:return this.map=(function(){var n,w,T;for(T=[],h=n=0,w=this.file.maxp.numGlyphs;0<=w?n<w:n>w;h=0<=w?++n:--n)T.push(a.readUInt32());return T}).call(this)}},e}(),LPe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},FPe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Mm(e,kp),e.prototype.tag="name",e.prototype.parse=function(a){var r,s,l,h,n,w,T,E,z,k,U;for(a.pos=this.offset,a.readShort(),r=a.readShort(),w=a.readShort(),s=[],h=0;0<=r?h<r:h>r;h=0<=r?++h:--h)s.push({platformID:a.readShort(),encodingID:a.readShort(),languageID:a.readShort(),nameID:a.readShort(),length:a.readShort(),offset:this.offset+w+a.readShort()});for(T={},h=z=0,k=s.length;z<k;h=++z)l=s[h],a.pos=l.offset,E=a.readString(l.length),n=new LPe(E,l),T[U=l.nameID]==null&&(T[U]=[]),T[l.nameID].push(n);this.strings=T,this.copyright=T[0],this.fontFamily=T[1],this.fontSubfamily=T[2],this.uniqueSubfamily=T[3],this.fontName=T[4],this.version=T[5];try{this.postscriptName=T[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=T[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=T[7],this.manufacturer=T[8],this.designer=T[9],this.description=T[10],this.vendorUrl=T[11],this.designerUrl=T[12],this.license=T[13],this.licenseUrl=T[14],this.preferredFamily=T[15],this.preferredSubfamily=T[17],this.compatibleFull=T[18],this.sampleText=T[19]},e}(),UPe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Mm(e,kp),e.prototype.tag="maxp",e.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.numGlyphs=a.readUInt16(),this.maxPoints=a.readUInt16(),this.maxContours=a.readUInt16(),this.maxCompositePoints=a.readUInt16(),this.maxComponentContours=a.readUInt16(),this.maxZones=a.readUInt16(),this.maxTwilightPoints=a.readUInt16(),this.maxStorage=a.readUInt16(),this.maxFunctionDefs=a.readUInt16(),this.maxInstructionDefs=a.readUInt16(),this.maxStackElements=a.readUInt16(),this.maxSizeOfInstructions=a.readUInt16(),this.maxComponentElements=a.readUInt16(),this.maxComponentDepth=a.readUInt16()},e}(),kPe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Mm(e,kp),e.prototype.tag="hmtx",e.prototype.parse=function(a){var r,s,l,h,n,w,T;for(a.pos=this.offset,this.metrics=[],r=0,w=this.file.hhea.numberOfMetrics;0<=w?r<w:r>w;r=0<=w?++r:--r)this.metrics.push({advance:a.readUInt16(),lsb:a.readInt16()});for(l=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var E,z;for(z=[],r=E=0;0<=l?E<l:E>l;r=0<=l?++E:--E)z.push(a.readInt16());return z}(),this.widths=(function(){var E,z,k,U;for(U=[],E=0,z=(k=this.metrics).length;E<z;E++)h=k[E],U.push(h.advance);return U}).call(this),s=this.widths[this.widths.length-1],T=[],r=n=0;0<=l?n<l:n>l;r=0<=l?++n:--n)T.push(this.widths.push(s));return T},e.prototype.forGlyph=function(a){return a in this.metrics?this.metrics[a]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[a-this.metrics.length]}},e}(),tQ=[].slice,BPe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Mm(e,kp),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(a){var r,s,l,h,n,w,T,E,z,k;return a in this.cache?this.cache[a]:(h=this.file.loca,r=this.file.contents,s=h.indexOf(a),(l=h.lengthOf(a))===0?this.cache[a]=null:(r.pos=this.offset+s,n=(w=new Lg(r.read(l))).readShort(),E=w.readShort(),k=w.readShort(),T=w.readShort(),z=w.readShort(),this.cache[a]=n===-1?new jPe(w,E,k,T,z):new GPe(w,n,E,k,T,z),this.cache[a]))},e.prototype.encode=function(a,r,s){var l,h,n,w,T;for(n=[],h=[],w=0,T=r.length;w<T;w++)l=a[r[w]],h.push(n.length),l&&(n=n.concat(l.encode(s)));return h.push(n.length),{table:n,offsets:h}},e}(),GPe=function(){function t(e,a,r,s,l,h){this.raw=e,this.numberOfContours=a,this.xMin=r,this.yMin=s,this.xMax=l,this.yMax=h,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),jPe=function(){function t(e,a,r,s,l){var h,n;for(this.raw=e,this.xMin=a,this.yMin=r,this.xMax=s,this.yMax=l,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],h=this.raw;n=h.readShort(),this.glyphOffsets.push(h.pos),this.glyphIDs.push(h.readUInt16()),32&n;)h.pos+=1&n?4:2,128&n?h.pos+=8:64&n?h.pos+=4:8&n&&(h.pos+=2)}return t.prototype.encode=function(){var e,a,r;for(a=new Lg(tQ.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)a.pos=this.glyphOffsets[e];return a.data},t}(),ZPe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Mm(e,kp),e.prototype.tag="loca",e.prototype.parse=function(a){var r,s;return a.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var l,h;for(h=[],s=0,l=this.length;s<l;s+=2)h.push(2*a.readUInt16());return h}).call(this):(function(){var l,h;for(h=[],s=0,l=this.length;s<l;s+=4)h.push(a.readUInt32());return h}).call(this)},e.prototype.indexOf=function(a){return this.offsets[a]},e.prototype.lengthOf=function(a){return this.offsets[a+1]-this.offsets[a]},e.prototype.encode=function(a,r){for(var s=new Uint32Array(this.offsets.length),l=0,h=0,n=0;n<s.length;++n)if(s[n]=l,h<r.length&&r[h]==n){++h,s[n]=l;var w=this.offsets[n],T=this.offsets[n+1]-w;T>0&&(l+=T)}for(var E=new Array(4*s.length),z=0;z<s.length;++z)E[4*z+3]=255&s[z],E[4*z+2]=(65280&s[z])>>8,E[4*z+1]=(16711680&s[z])>>16,E[4*z]=(4278190080&s[z])>>24;return E},e}(),qPe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,a,r,s,l;for(a in s=this.font.cmap.tables[0].codeMap,e={},l=this.subset)r=l[a],e[a]=s[r];return e},t.prototype.glyphsFor=function(e){var a,r,s,l,h,n,w;for(s={},h=0,n=e.length;h<n;h++)s[l=e[h]]=this.font.glyf.glyphFor(l);for(l in a=[],s)(r=s[l])!=null&&r.compound&&a.push.apply(a,r.glyphIDs);if(a.length>0)for(l in w=this.glyphsFor(a))r=w[l],s[l]=r;return s},t.prototype.encode=function(e,a){var r,s,l,h,n,w,T,E,z,k,U,Z,q,$,J;for(s in r=eQ.encode(this.generateCmap(),"unicode"),h=this.glyphsFor(e),U={0:0},J=r.charMap)U[(w=J[s]).old]=w.new;for(Z in k=r.maxGlyphID,h)Z in U||(U[Z]=k++);return E=function(ie){var de,ge;for(de in ge={},ie)ge[ie[de]]=de;return ge}(U),z=Object.keys(E).sort(function(ie,de){return ie-de}),q=function(){var ie,de,ge;for(ge=[],ie=0,de=z.length;ie<de;ie++)n=z[ie],ge.push(E[n]);return ge}(),l=this.font.glyf.encode(h,q,U),T=this.font.loca.encode(l.offsets,q),$={cmap:this.font.cmap.raw(),glyf:l.table,loca:T,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(a)},this.font.os2.exists&&($["OS/2"]=this.font.os2.raw()),this.font.directory.encode($)},t}();jn.API.PDFObject=function(){var t;function e(){}return t=function(a,r){return(Array(r+1).join("0")+a).slice(-r)},e.convert=function(a){var r,s,l,h;if(Array.isArray(a))return"["+function(){var n,w,T;for(T=[],n=0,w=a.length;n<w;n++)r=a[n],T.push(e.convert(r));return T}().join(" ")+"]";if(typeof a=="string")return"/"+a;if(a!=null&&a.isString)return"("+a+")";if(a instanceof Date)return"(D:"+t(a.getUTCFullYear(),4)+t(a.getUTCMonth(),2)+t(a.getUTCDate(),2)+t(a.getUTCHours(),2)+t(a.getUTCMinutes(),2)+t(a.getUTCSeconds(),2)+"Z)";if({}.toString.call(a)==="[object Object]"){for(s in l=["<<"],a)h=a[s],l.push("/"+s+" "+e.convert(h));return l.push(">>"),l.join(`
`)}return""+a},e}();const HPe=()=>{const[t,e]=nt.useState("available"),[a,r]=nt.useState("bike"),[s,l]=nt.useState(null),[h,n]=nt.useState([]),[w,T]=nt.useState(null),[E,z]=nt.useState(""),[k,U]=nt.useState(!1),[Z,q]=nt.useState(!1),[$,J]=nt.useState(null),[ie,de]=nt.useState(!1),[ge,he]=nt.useState(""),[Ae,me]=nt.useState(""),[Re,be]=nt.useState("all"),[De,ne]=nt.useState(1),[ye]=nt.useState(10);nt.useEffect(()=>{Me()},[]);const Me=async()=>{const ct=(await Xi(Wn(zr,"bikes"))).docs.map(_e=>({id:_e.id,..._e.data()}));n(ct)},ze=it=>{l(it.target.files[0])},Le=()=>{const it=h.filter(Zt=>Zt.bikeCategory==="Regular Bicycle").length+1,ct=h.filter(Zt=>Zt.bikeCategory==="Electric Bicycle").length+1;return`${Ae==="Regular Bicycle"?"BK":"EBK"}-${String(Ae==="Regular Bicycle"?it:ct).padStart(3,"0")}`},Ie=async()=>{if(!s)return null;const it=new FormData;it.append("bikePhoto",s);try{return(await Ko.post("http://192.168.6.200:4000/api/upload-bike-photo",it,{headers:{"Content-Type":"multipart/form-data"}})).data.bikePhotoUrl}catch(ct){return console.error("Error uploading image:",ct),null}},qe=async it=>{it.preventDefault();const ct=await Ie();if(!ct){alert("Image upload failed. Try again.");return}const Jt={bikeId:Le(),bikeName:ge,bikeCategory:Ae,bikeType:a,imageUrl:ct,bikeStatus:"Available",isAvailable:!0,createdAt:new Date};try{await gR(Wn(zr,"bikes"),Jt),alert("Bike added successfully!"),n([...h,Jt]),U(!1),Ue()}catch(Zt){console.error("Error adding bike:",Zt)}},ke=async it=>{it.preventDefault();const ct=await Ie(),_e={bikeName:ge,bikeCategory:Ae,bikeType:a,bikeStatus:t,imageUrl:ct||w.imageUrl};try{await cd(Is(zr,"bikes",w.id),_e),alert("Bike updated successfully!"),T(null),q(!1),Me(),Ue()}catch(Jt){console.error("Error updating bike:",Jt)}},tt=(it,ct)=>{ct.stopPropagation(),T(it),he(it.bikeName),me(it.bikeCategory),r(it.bikeType),e(it.bikeStatus),q(!0)},Ue=()=>{he(""),me(""),r(""),l(null),e("Available"),T(null)},He=async()=>{const it=new jn,ct=40,_e=5,Jt=3;let Zt=10,Pa=10;for(let Bt=0;Bt<h.length;Bt++){const la=h[Bt];try{const Rt=await Hxe.toDataURL(la.id,{type:"image/jpeg"});Rt?(it.text(`Bike ID: ${la.bikeId}`,Zt,Pa+ct+5),it.addImage(Rt,"JPEG",Zt,Pa,ct,ct),Zt+=ct+_e,(Bt+1)%Jt===0&&(Zt=10,Pa+=ct+20),Pa+ct+20>it.internal.pageSize.height&&(it.addPage(),Zt=10,Pa=10)):console.error("QR code generation failed for bike:",la.bikeId)}catch(Rt){console.error("Error generating QR code: ",Rt)}}it.save("bike_qr_codes.pdf")},Ce=it=>{z(it.target.value.toUpperCase()),ne(1)},Se=it=>{be(it.target.value),ne(1)},$e=De*ye,ft=$e-ye,Je=Math.ceil(h.length/ye),wt=()=>({regularBikes:h.filter(it=>it.bikeCategory==="Regular Bicycle").length,electricBikes:h.filter(it=>it.bikeCategory==="Electric Bicycle").length,available:h.filter(it=>it.bikeStatus==="Available").length,inUse:h.filter(it=>it.bikeStatus==="In Use").length,toRepair:h.filter(it=>it.bikeStatus==="To Repair").length,toReplace:h.filter(it=>it.bikeStatus==="To Replace").length,retired:h.filter(it=>it.bikeStatus==="Retired").length});return K.jsxs(S0,{children:[K.jsx(jg,{title:"Bike Management"}),K.jsxs("div",{className:"bike-management-container",children:[K.jsx("div",{className:"bike-management-header",children:K.jsx("h2",{children:"Bike Management"})}),K.jsxs("div",{className:"search-container",children:[K.jsx("input",{type:"text",placeholder:" Search by Bike ID (e.g., BK-001)...",className:"search-box",value:E,onChange:Ce}),K.jsxs("button",{className:"add-bike-btn",onClick:()=>U(!0),children:[K.jsx(RI,{})," Add Bike"]}),K.jsx("button",{className:"generate-pdf-btn",onClick:He,children:"Generate QR (PDF)"}),K.jsxs("div",{className:"sort-container",children:[K.jsx("label",{className:"sort-label",children:"Sort By:"}),K.jsxs("select",{value:Re,onChange:Se,className:"sort-dropdown",children:[K.jsx("option",{value:"all",children:"All Bikes"}),K.jsx("option",{value:"Regular Bicycle",children:"Regular Bikes"}),K.jsx("option",{value:"Electric Bicycle",children:"Electric Bikes"}),K.jsxs("optgroup",{label:"Status",children:[K.jsx("option",{value:"Available",children:"Available"}),K.jsx("option",{value:"In Use",children:"In Use"}),K.jsx("option",{value:"To Repair",children:"To Repair"}),K.jsx("option",{value:"To Replace",children:"To Replace"}),K.jsx("option",{value:"Retired",children:"Retired"})]})]})]})]}),k&&K.jsx("div",{className:"modal-overlay",children:K.jsxs("div",{className:"modal-content",children:[K.jsx("h2",{children:"Adding New Bike"}),K.jsxs("form",{className:"bike-form",onSubmit:qe,children:[K.jsx("div",{className:"upload-box",children:K.jsxs("label",{className:"upload-label",children:[K.jsx(IU,{})," Upload Bike Image",K.jsx("input",{type:"file",accept:"image/*",onChange:ze,required:!0})]})}),K.jsx("label",{children:"Bike Name:"}),K.jsx("input",{type:"text",value:ge,onChange:it=>he(it.target.value),required:!0}),K.jsx("label",{children:"Category of Bike:"}),K.jsxs("select",{value:Ae,onChange:it=>me(it.target.value),required:!0,children:[K.jsx("option",{value:"",children:"Select Category"}),K.jsx("option",{value:"Regular Bicycle",children:"Regular Bicycle"}),K.jsx("option",{value:"Electric Bicycle",children:"Electric Bicycle"})]}),K.jsx("label",{children:"Bike Type:"}),K.jsxs("select",{value:a,onChange:it=>r(it.target.value),required:!0,children:[K.jsx("option",{value:"",children:"Select Bike Type"}),K.jsx("option",{value:"Road Bike",children:"Road Bike"}),K.jsx("option",{value:"Mountain Bike",children:"Mountain Bike"}),K.jsx("option",{value:"City Bike",children:"City Bike"}),K.jsx("option",{value:"Fat Bike",children:"Fat Bike"}),K.jsx("option",{value:"BMX",children:"BMX"}),K.jsx("option",{value:"Electric Bike",children:"Electric Bike"})]}),K.jsxs("div",{className:"modal-buttons",children:[K.jsx("button",{type:"submit",className:"save-btn",children:"Save"}),K.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>U(!1),children:"Cancel"})]})]})]})}),K.jsxs("div",{className:"bike-stats-overlay",children:[K.jsxs("div",{className:"stats-row",children:[K.jsxs("div",{className:"stat-card regular",children:[K.jsx("h3",{children:"Regular Bikes"}),K.jsx("p",{children:wt().regularBikes})]}),K.jsxs("div",{className:"stat-card electric",children:[K.jsx("h3",{children:"Electric Bikes"}),K.jsx("p",{children:wt().electricBikes})]}),K.jsxs("div",{className:"stat-card available",children:[K.jsx("h3",{children:"Available"}),K.jsx("p",{children:wt().available})]}),K.jsxs("div",{className:"stat-card in-use",children:[K.jsx("h3",{children:"In Use"}),K.jsx("p",{children:wt().inUse})]})]}),K.jsxs("div",{className:"stats-row",children:[K.jsxs("div",{className:"stat-card repair",children:[K.jsx("h3",{children:"To Repair"}),K.jsx("p",{children:wt().toRepair})]}),K.jsxs("div",{className:"stat-card replace",children:[K.jsx("h3",{children:"To Replace"}),K.jsx("p",{children:wt().toReplace})]}),K.jsxs("div",{className:"stat-card retired",children:[K.jsx("h3",{children:"Retired"}),K.jsx("p",{children:wt().retired})]}),K.jsxs("div",{className:"stat-card total",children:[K.jsx("h3",{children:"Total Bikes"}),K.jsx("p",{children:h.length})]})]})]}),K.jsx("div",{className:"bike-list",children:K.jsxs("table",{children:[K.jsx("thead",{children:K.jsxs("tr",{children:[K.jsx("th",{children:"Bike Name"}),K.jsx("th",{children:"Bike ID"}),K.jsx("th",{children:"Category"}),K.jsx("th",{children:"Type"}),K.jsx("th",{children:"Image"}),K.jsx("th",{children:"Status"}),K.jsx("th",{children:"Action"})]})}),K.jsx("tbody",{children:h.filter(it=>it.bikeId.toUpperCase().includes(E)&&(Re==="all"||Re==="Regular Bicycle"&&it.bikeCategory==="Regular Bicycle"||Re==="Electric Bicycle"&&it.bikeCategory==="Electric Bicycle"||it.bikeStatus===Re)).slice(ft,$e).map(it=>K.jsxs("tr",{onClick:()=>{J(it),de(!0)},className:"clickable-row",children:[K.jsx("td",{children:it.bikeName||"No Name"}),K.jsx("td",{children:K.jsx("strong",{children:it.bikeId})}),K.jsx("td",{children:it.bikeCategory}),K.jsx("td",{children:it.bikeType}),K.jsx("td",{children:K.jsx("img",{src:it.imageUrl,alt:it.bikeName,className:"table-bike-image",onClick:ct=>{ct.stopPropagation(),J(it),de(!0)}})}),K.jsx("td",{children:K.jsx("div",{className:`status-container status-${it.bikeStatus.replace(/\s+/g,"-")}`,children:it.bikeStatus})}),K.jsx("td",{children:K.jsx("button",{className:"edit-btn",onClick:ct=>tt(it,ct),children:K.jsx(Bw,{})})})]},it.id))})]})}),ie&&$&&K.jsx("div",{className:"modal-overlay",children:K.jsxs("div",{className:"modal-content",children:[K.jsx("h2",{children:"Bike Details"}),K.jsx("div",{className:"bike-image-container",children:K.jsx("img",{src:$.imageUrl,alt:"Bike",className:"bike-preview"})}),K.jsxs("p",{children:[K.jsx("strong",{children:"Bike Name:"})," ",$.bikeName]}),K.jsxs("p",{children:[K.jsx("strong",{children:"Bike ID:"})," ",$.bikeId]}),K.jsxs("p",{children:[K.jsx("strong",{children:"Category:"})," ",$.bikeCategory]}),K.jsxs("p",{children:[K.jsx("strong",{children:"Bike Type:"})," ",$.bikeType]}),K.jsxs("p",{children:[K.jsx("strong",{children:"Status:"})," ",$.bikeStatus]}),K.jsx("div",{className:"modal-buttons",children:K.jsx("button",{className:"cancel-btn",onClick:()=>de(!1),children:"Close"})})]})}),Z&&w&&K.jsx("div",{className:"modal-overlay",children:K.jsxs("div",{className:"modal-content",children:[K.jsx("h2",{children:"Edit Bike"}),K.jsxs("form",{className:"bike-form",onSubmit:ke,children:[K.jsxs("div",{className:"upload-box",children:[K.jsxs("label",{className:"upload-label",children:[K.jsx(IU,{})," Upload New Image",K.jsx("input",{type:"file",accept:"image/*",onChange:ze})]}),w.imageUrl&&K.jsx("img",{src:w.imageUrl,alt:"Current Bike",className:"bike-preview"})]}),K.jsx("label",{children:"Bike Name:"}),K.jsx("input",{type:"text",value:ge,onChange:it=>he(it.target.value),required:!0}),K.jsx("label",{children:"Category of Bike:"}),K.jsxs("select",{value:Ae,onChange:it=>me(it.target.value),required:!0,children:[K.jsx("option",{value:"",children:"Select Category"}),K.jsx("option",{value:"Regular Bicycle",children:"Regular Bicycle"}),K.jsx("option",{value:"Electric Bicycle",children:"Electric Bicycle"})]}),K.jsx("label",{children:"Bike Type:"}),K.jsxs("select",{value:a,onChange:it=>r(it.target.value),required:!0,children:[K.jsx("option",{value:"",children:"Select Bike Type"}),K.jsx("option",{value:"Road Bike",children:"Road Bike"}),K.jsx("option",{value:"Mountain Bike",children:"Mountain Bike"}),K.jsx("option",{value:"City Bike",children:"City Bike"}),K.jsx("option",{value:"Fat Bike",children:"Fat Bike"}),K.jsx("option",{value:"BMX",children:"BMX"}),K.jsx("option",{value:"Electric Bike",children:"Electric Bike"})]}),K.jsx("label",{children:"Status:"}),K.jsxs("select",{value:t,onChange:it=>e(it.target.value),required:!0,children:[K.jsx("option",{value:"Available",children:"Available"}),K.jsx("option",{value:"To Repair",children:"To Repair"}),K.jsx("option",{value:"To Replace",children:"To Replace"}),K.jsx("option",{value:"Retired",children:"Retired"})]}),K.jsxs("div",{className:"modal-buttons",children:[K.jsx("button",{type:"submit",className:"save-btn",children:"Update"}),K.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>{q(!1),Ue()},children:"Cancel"})]})]})]})})]}),K.jsxs("div",{className:"pagination-controls",children:[K.jsx("button",{className:"pagination-button",onClick:()=>ne(De-1),disabled:De===1,children:"Previous"}),K.jsxs("span",{className:"pagination-info",children:["Page ",De," of ",Je]}),K.jsx("button",{className:"pagination-button",onClick:()=>ne(De+1),disabled:De===Je,children:"Next"})]})]})},$Pe="/ecpcaps/assets/bike_icon-CFICwI6a.png";kf.accessToken="pk.eyJ1IjoiY29jb2xlbW9uMTIiLCJhIjoiY204YTBoMnZpMHplbzJzcTR3dDFmOXc4NiJ9.NqqEHSBe8cn9Gy9knbUqew";const KPe=({onEditStation:t})=>{const[e,a]=nt.useState(null),[r,s]=nt.useState([]),[l,h]=nt.useState(null),[n,w]=nt.useState(!1),[T,E]=nt.useState([]),[z,k]=nt.useState(!0),[U,Z]=nt.useState([]),[q,$]=nt.useState(""),[J,ie]=nt.useState("all"),[de,ge]=nt.useState([]);nt.useEffect(()=>{if(!e){const me=new kf.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[120.9882053036898,14.693467677226026],zoom:12});me.on("load",()=>{a(me)})}},[e]),nt.useEffect(()=>e?(r.forEach(Re=>Re.remove()),(async()=>{try{const Re=await Xi(Wn(zr,"stations")),be=await Xi(Wn(zr,"admins")),De={};be.docs.forEach(ye=>{const Me=ye.data();De[ye.id]={name:Me.name,profilePhoto:Me.profilePhoto}});const ne=[];if(Re.docs.forEach(ye=>{const Me=ye.data(),ze=Me.tanodAssigned||[],Le=Array.isArray(ze)?ze:[ze],Ie={id:ye.id,...Me,tanodAssigned:Le,tanodAssignedName:Le.map(qe=>{var ke;return((ke=De[qe])==null?void 0:ke.name)||"Unknown"}).join(", "),tanodAssignedAvatar:Le.map(qe=>{var ke;return(ke=De[qe])==null?void 0:ke.profilePhoto}).filter(qe=>qe)};if(Ie.coordinates&&Array.isArray(Ie.coordinates)&&Ie.coordinates.length===2){const qe=document.createElement("div");qe.className="custom-marker";const ke=document.createElement("div");ke.className="station-name",ke.textContent=Ie.stationName,qe.appendChild(ke);const tt=document.createElement("img");tt.src=$Pe,tt.className="marker-icon",qe.appendChild(tt),qe.addEventListener("click",()=>{h(Ie),w(!0)});const Ue=new kf.Marker(qe).setLngLat([Ie.coordinates[1],Ie.coordinates[0]]).addTo(e);ne.push(Ue)}}),s(ne),ne.length>0){const ye=new kf.LngLatBounds;Re.docs.forEach(Me=>{const ze=Me.data();ze.coordinates&&Array.isArray(ze.coordinates)&&ze.coordinates.length===2&&ye.extend([ze.coordinates[1],ze.coordinates[0]])}),e.fitBounds(ye,{padding:50})}}catch(Re){console.error("Error fetching stations:",Re)}})(),()=>{r.forEach(Re=>Re.remove())}):void 0,[e]);const he=async()=>{try{const Re=(await Xi(Wn(zr,"admins"))).docs.map(be=>({id:be.id,...be.data()}));ge(Re)}catch(me){console.error("Error fetching admins:",me)}};nt.useEffect(()=>{he()},[]);const Ae=({station:me,onClose:Re})=>{const[be,De]=nt.useState(!1),[ne,ye]=nt.useState(!1),[Me,ze]=nt.useState(!1),[Le,Ie]=nt.useState([]),[qe,ke]=nt.useState([]),[tt,Ue]=nt.useState([]),[He,Ce]=nt.useState([]),[Se,$e]=nt.useState(0),[ft,Je]=nt.useState(!1),[wt,it]=nt.useState(!1),[ct,_e]=nt.useState(!1),[Jt,Zt]=nt.useState(null),[Pa,Bt]=nt.useState(!1),[la,Rt]=nt.useState([]),[yr,za]=nt.useState(!1),[Va,er]=nt.useState(!1),[cr,ur]=nt.useState(null),[Pr,ka]=nt.useState([]);nt.useEffect(()=>{jr(),pn(),Dn()},[me.id]);const jr=async()=>{try{const Qa=(await Xi(Wn(zr,"bikes"))).docs.map(gr=>({id:gr.id,...gr.data()})).filter(gr=>gr.stationAssigned===me.id);Ue(Qa)}catch(ca){console.error("Error fetching station bikes:",ca)}},pn=async()=>{try{const Qa=(await Xi(Wn(zr,"bikes"))).docs.map(gr=>({id:gr.id,...gr.data()})).filter(gr=>!gr.stationAssigned);Ce(Qa)}catch(ca){console.error("Error fetching unassigned bikes:",ca)}},Dn=async()=>{try{const Qa=(await Xi(Wn(zr,"admins"))).docs.map(gr=>({id:gr.id,...gr.data()})).filter(gr=>{var Zn;return!((Zn=me.tanodAssigned)!=null&&Zn.includes(gr.id))&&!gr.stationAssignedTo});Rt(Qa)}catch(ca){console.error("Error fetching unassigned admins:",ca)}},Rn=async()=>{try{De(!0);const ca=Le.map(Qa=>cd(Is(zr,"bikes",Qa),{stationAssigned:null}));await Promise.all(ca),ye(!1),Ie([]),jr()}catch(ca){console.error("Error removing bikes:",ca),alert("Failed to remove bikes")}finally{De(!1)}},va=async()=>{try{De(!0);const ca=qe.map(Qa=>cd(Is(zr,"bikes",Qa),{stationAssigned:me.id}));await Promise.all(ca),ze(!1),ke([]),jr()}catch(ca){console.error("Error adding bikes:",ca),alert("Failed to add bikes")}finally{De(!1)}},Wa=async ca=>{try{De(!0);const Qa=me.tanodAssigned||[];await cd(Is(zr,"stations",me.id),{tanodAssigned:[...Qa,...ca]});const gr=ca.map(Zn=>cd(Is(zr,"admins",Zn),{stationAssignedTo:me.id}));await Promise.all(gr),Bt(!1),window.location.reload()}catch(Qa){console.error("Error assigning admins:",Qa),alert("Failed to assign admins")}finally{De(!1)}};return K.jsx("div",{className:"map-modal-overlay",children:K.jsxs("div",{className:"map-modal-content large",children:[K.jsxs("div",{className:"modal-header",children:[K.jsxs("div",{className:"station-header",children:[K.jsx("h2",{children:me.stationName}),K.jsx("p",{className:"station-address",children:me.stationAddress})]}),K.jsx("button",{className:"close-button",onClick:Re,children:""})]}),K.jsxs("div",{className:"modal-body",children:[K.jsxs("div",{className:"admin-section",children:[K.jsxs("div",{className:"count-card",children:[K.jsxs("div",{className:"count-header",children:[K.jsx("h3",{children:"Station Admin"}),K.jsx("button",{className:"edit-btn",onClick:()=>Bt(!Pa),children:K.jsx(Bw,{})})]}),Pa&&K.jsx("div",{className:"action-dropdown",children:K.jsx("button",{onClick:()=>{za(!0),er(!1),Bt(!1),Dn()},children:"Add Admin"})})]}),K.jsx("div",{className:"admin-content",children:yr?K.jsxs("div",{className:"admin-list",children:[K.jsx("h4",{children:"Select Admin to Assign"}),K.jsx("div",{className:"admin-grid",children:la.map(ca=>K.jsxs("div",{className:"admin-card",children:[K.jsx("input",{type:"checkbox",className:"admin-checkbox",checked:Pr.includes(ca.id),onChange:Qa=>{Qa.target.checked?ka([...Pr,ca.id]):ka(Pr.filter(gr=>gr!==ca.id))}}),K.jsx("img",{src:ca.profilePhoto||"/default-avatar.png",alt:ca.name,className:"admin-photo"}),K.jsx("span",{className:"admin-name",children:ca.name})]},ca.id))}),K.jsxs("div",{className:"action-buttons",children:[K.jsx("button",{className:"save-btn",onClick:()=>{Pr.length>0&&Wa(Pr)},disabled:Pr.length===0||be,children:be?"Saving...":"Save Changes"}),K.jsx("button",{className:"discard-btn",onClick:()=>{za(!1),ka([])},children:"Discard Changes"})]})]}):K.jsx("div",{className:"admin-profile",children:Array.isArray(me.tanodAssigned)&&me.tanodAssigned.length>0?me.tanodAssigned.map(ca=>{const Qa=de.find(gr=>gr.id===ca);return K.jsxs("div",{className:"admin-avatar",children:[K.jsx("img",{src:(Qa==null?void 0:Qa.profilePhoto)||"/default-avatar.png",alt:Qa==null?void 0:Qa.name}),K.jsx("span",{children:(Qa==null?void 0:Qa.name)||"Unknown Admin"})]},ca)}):K.jsx("div",{className:"no-admin",children:K.jsx("span",{children:"No Admin Assigned"})})})})]}),K.jsxs("div",{className:"bikes-section",children:[K.jsxs("div",{className:"bikes-header-section",children:[K.jsx("h3",{children:"Station Bikes"}),K.jsx("div",{className:"counts-section",children:K.jsxs("div",{className:"count-cards",children:[K.jsxs("div",{className:"count-card",children:[K.jsxs("div",{className:"count-header",children:[K.jsxs("span",{children:["Regular Bikes:"," ",tt.filter(ca=>ca.bikeCategory==="Regular Bicycle").length]}),K.jsx("button",{className:"edit-btn",onClick:()=>it(!wt),children:K.jsx(Bw,{})})]}),wt&&K.jsxs("div",{className:"action-dropdown",children:[K.jsx("button",{onClick:()=>{ze(!0),ye(!1),Zt("Regular"),it(!1)},children:"Add Bikes"}),K.jsx("button",{onClick:()=>{ye(!0),ze(!1),Zt("Regular"),it(!1)},children:"Remove Bikes"})]})]}),K.jsxs("div",{className:"count-card",children:[K.jsxs("div",{className:"count-header",children:[K.jsxs("span",{children:["E-Bikes:"," ",tt.filter(ca=>ca.bikeCategory==="Electric Bicycle").length]}),K.jsx("button",{className:"edit-btn",onClick:()=>_e(!ct),children:K.jsx(Bw,{})})]}),ct&&K.jsxs("div",{className:"action-dropdown",children:[K.jsx("button",{onClick:()=>{ze(!0),ye(!1),Zt("Electric"),_e(!1)},children:"Add E-Bikes"}),K.jsx("button",{onClick:()=>{ye(!0),ze(!1),Zt("Electric"),_e(!1)},children:"Remove E-Bikes"})]})]})]})})]}),K.jsx("div",{className:"bikes-content",children:K.jsx("div",{className:"bikes-grid",children:(ne||Me?ne?tt.filter(ca=>Jt==="Regular"?ca.bikeCategory==="Regular Bicycle":ca.bikeCategory==="Electric Bicycle"):He.filter(ca=>Jt==="Regular"?ca.bikeCategory==="Regular Bicycle":ca.bikeCategory==="Electric Bicycle"):tt).slice(Se*6,(Se+1)*6).map(ca=>K.jsxs("div",{className:"bike-card",children:[(ne||Me)&&K.jsx("input",{type:"checkbox",className:"bike-checkbox",checked:ne?Le.includes(ca.id):qe.includes(ca.id),onChange:Qa=>{const gr=ne?Ie:ke,Zn=ne?Le:qe;Qa.target.checked?gr([...Zn,ca.id]):gr(Zn.filter(Mn=>Mn!==ca.id))}}),K.jsx("img",{src:ca.imageUrl||"/default-bike.png",alt:ca.bikeName}),K.jsxs("div",{className:"bike-info",children:[K.jsx("span",{className:"bike-id",children:ca.bikeId}),K.jsx("span",{className:"bike-name",children:ca.bikeName})]})]},ca.id))})}),K.jsxs("div",{className:"bikes-footer",children:[K.jsxs("div",{className:"pagination",children:[K.jsx("button",{onClick:()=>$e(ca=>ca-1),disabled:Se===0,className:"page-btn",children:K.jsx(dce,{})}),K.jsxs("span",{children:["Page ",Se+1]}),K.jsx("button",{onClick:()=>$e(ca=>ca+1),disabled:(Se+1)*6>=(ne?tt.length:Me?He.length:tt.length),className:"page-btn",children:K.jsx(hce,{})})]}),(ne||Me)&&K.jsxs("div",{className:"action-buttons",children:[K.jsx("button",{className:"save-btn",onClick:ne?Rn:va,disabled:be||(ne?Le.length===0:qe.length===0),children:be?"Saving...":"Save Changes"}),K.jsx("button",{className:"discard-btn",onClick:()=>{ye(!1),ze(!1),Ie([]),ke([]),Zt(null)},children:"Discard Changes"})]})]})]})]})]})})};return K.jsxs("div",{className:"map-container",children:[K.jsx("div",{id:"map",className:"map-element"}),n&&K.jsx(Ae,{station:l,onClose:()=>w(!1)})]})};kf.accessToken="pk.eyJ1IjoiY29jb2xlbW9uMTIiLCJhIjoiY204YTBoMnZpMHplbzJzcTR3dDFmOXc4NiJ9.NqqEHSBe8cn9Gy9knbUqew";const WPe=({onSelectLocation:t,isSelectingLocation:e})=>{const a=nt.useRef(null),r=nt.useRef(null),s=nt.useRef(null);return nt.useEffect(()=>{if(!r.current)return r.current=new kf.Map({container:a.current,style:"mapbox://styles/mapbox/streets-v11",center:[120.9882053036898,14.693467677226026],zoom:12}),()=>{r.current&&(r.current.remove(),r.current=null)}},[]),nt.useEffect(()=>{if(!r.current)return;const l=h=>{e&&(s.current&&s.current.remove(),s.current=new kf.Marker({draggable:!0,color:"#FF0000",scale:.8}).setLngLat([h.lngLat.lng,h.lngLat.lat]).addTo(r.current),s.current.on("dragend",()=>{const n=s.current.getLngLat();t([n.lat,n.lng])}),t([h.lngLat.lat,h.lngLat.lng]))};return e?(r.current.getCanvas().style.cursor="crosshair",r.current.on("click",l)):(r.current.getCanvas().style.cursor="",r.current.off("click",l)),()=>{r.current&&(r.current.off("click",l),r.current.getCanvas().style.cursor=""),s.current&&(s.current.remove(),s.current=null)}},[e,t]),K.jsx("div",{ref:a,className:"add-station-map"})},YPe=()=>{const[t,e]=nt.useState([]),[a,r]=nt.useState([]),[s,l]=nt.useState(!1),[h,n]=nt.useState(!1),[w,T]=nt.useState(null),[E,z]=nt.useState(!1),[k,U]=nt.useState(null),[Z,q]=nt.useState(""),[$,J]=nt.useState(""),[ie,de]=nt.useState(""),[ge,he]=nt.useState(""),[Ae,me]=nt.useState([]),[Re,be]=nt.useState([]),[De,ne]=nt.useState([]),[ye,Me]=nt.useState([]),[ze,Le]=nt.useState(!1),[Ie,qe]=nt.useState(!1),[ke,tt]=nt.useState(!1),[Ue,He]=nt.useState(!1),[Ce,Se]=nt.useState([]),[$e,ft]=nt.useState([]),[Je,wt]=nt.useState(!1),[it,ct]=nt.useState(!1),[_e,Jt]=nt.useState("");nt.useEffect(()=>{Zt(),Pa(),Bt(),la()},[]);const Zt=async()=>{try{const Wa=(await Xi(Wn(zr,"admins"))).docs.map(ca=>({id:ca.id,...ca.data()}));ft(Wa)}catch(va){console.error("Error fetching all admins:",va)}},Pa=async()=>{try{const ca=(await Xi(Wn(zr,"admins"))).docs.map(Qa=>({id:Qa.id,...Qa.data()})).filter(Qa=>!Qa.stationAssignedTo);Se(ca)}catch(va){console.error("Error fetching unassigned admins:",va)}},Bt=async()=>{try{const va=await Xi(Wn(zr,"admins")),Wa={};va.docs.forEach(mn=>{const en=mn.data();Wa[mn.id]=en.name});const Qa=(await Xi(Wn(zr,"stations"))).docs.map(mn=>{const en=mn.data(),Er=en.tanodAssigned||[],As=Array.isArray(Er)?Er:[Er];return{id:mn.id,...en,tanodAssignedID:As,tanodAssignedName:As.map(Bi=>Wa[Bi]||"Unknown").join(", ")||"Not Assigned"}}),Zn=(await Xi(Wn(zr,"bikes"))).docs.map(mn=>({id:mn.id,...mn.data()})),Mn=Qa.map(mn=>{const en=Zn.filter(As=>As.stationAssigned===mn.id&&As.bikeCategory==="Regular Bicycle"&&As.bikeStatus==="Available"&&As.isAvailable===!0).length,Er=Zn.filter(As=>As.stationAssigned===mn.id&&As.bikeCategory==="Electric Bicycle"&&As.bikeStatus==="Available"&&As.isAvailable===!0).length;return{...mn,totalRegularBikes:en,totalElectricBikes:Er}});e(Mn)}catch(va){console.error("Error fetching stations:",va)}},la=async()=>{const Wa=(await Xi(Wn(zr,"bikes"))).docs.map(Qa=>({id:Qa.id,...Qa.data()})),ca=Wa.filter(Qa=>!Qa.stationAssigned&&Qa.bikeStatus==="Available"&&Qa.isAvailable===!0);r(Wa),ne(ca.filter(Qa=>Qa.bikeCategory==="Regular Bicycle")),Me(ca.filter(Qa=>Qa.bikeCategory==="Electric Bicycle"))},Rt=async va=>{if(window.confirm("Are you sure you want to delete this station?"))try{const Wa=Is(zr,"stations",va),Qa=(await Ep(Wa)).data(),gr=(Qa==null?void 0:Qa.tanodAssigned)||[],Mn=(Array.isArray(gr)?gr:[gr]).map(mn=>cd(Is(zr,"admins",mn),{stationAssignedTo:null}));await Promise.all(Mn),await wI(Wa)}catch(Wa){console.error("Error deleting station:",Wa)}},yr=async va=>{T(va),q(va.stationName||""),J(va.stationAddress||""),he(va.coordinates||""),de(va.tanodAssignedID||""),n(!0);const ca=(await Xi(Wn(zr,"bikes"))).docs.map(Qa=>({id:Qa.id,...Qa.data()}));me(ca.filter(Qa=>Qa.bikeCategory==="Regular Bicycle"&&Qa.stationAssigned===va.id).map(Qa=>Qa.id)),be(ca.filter(Qa=>Qa.bikeCategory==="Electric Bicycle"&&Qa.stationAssigned===va.id).map(Qa=>Qa.id)),la()},za=()=>{T(null),q(""),J(""),he(""),de(""),me([]),be([]),wt(!1),l(!0)},Va=async(va,Wa)=>{try{const ca=await Ko.get(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${va}&lon=${Wa}`);J(ca.data.display_name||"Unknown Address")}catch(ca){console.error("Error fetching address:",ca)}},er=va=>{const Wa=va.target.value;he(Wa);const[ca,Qa]=Wa.split(",");ca&&Qa&&Va(ca.trim(),Qa.trim())},cr=va=>{he(va.join(",")),Va(va[0],va[1])},ur=async va=>{if(va.preventDefault(),!ie){alert("Please select an admin (or allow none).");return}try{const Wa=typeof ge=="string"?ge.split(",").map(gr=>parseFloat(gr.trim())):[],ca=Array.isArray(ie)?ie:[ie];let Qa;if(w)Qa=Is(zr,"stations",w.id),await cd(Qa,{stationName:Z,stationAddress:$,coordinates:Wa,tanodAssigned:ca}),Jt("Station updated successfully!"),n(!1);else{const gr={stationName:Z,stationAddress:$,coordinates:Wa,tanodAssigned:ca};Qa=await gR(Wn(zr,"stations"),gr),Jt("Station added successfully!"),l(!1)}if(Qa&&Qa.id){const gr=ca.map(Zn=>cd(Is(zr,"admins",Zn),{stationAssignedTo:Qa.id}));await Promise.all(gr),await Pr(Qa.id),Pa(),Bt(),ct(!0),setTimeout(()=>{ct(!1)},2e3)}}catch(Wa){console.error("Error saving station:",Wa)}},Pr=async va=>{try{for(const Wa of Ae){const ca=Is(zr,"bikes",Wa);await cd(ca,{stationAssigned:va})}for(const Wa of Re){const ca=Is(zr,"bikes",Wa);await cd(ca,{stationAssigned:va})}console.log("Bikes assigned successfully:",va)}catch(Wa){console.error("Error assigning bikes:",Wa)}},ka=va=>{va==="Regular Bicycle"?qe(!0):Le(!0)},jr=va=>{va==="Regular Bicycle"?(tt(!0),He(!1)):(He(!0),tt(!1))},pn=async(va,Wa)=>{try{const ca=Is(zr,"bikes",va);await cd(ca,{stationAssigned:null}),Wa==="Regular Bicycle"?me(Qa=>Qa.filter(gr=>gr!==va)):be(Qa=>Qa.filter(gr=>gr!==va)),la(),console.log(`Bike ${va} unassigned successfully.`)}catch(ca){console.error("Error unassigning bike:",ca)}},Dn=({station:va,onClose:Wa})=>K.jsx("div",{className:"modal-overlay",onClick:Wa,children:K.jsxs("div",{className:"modal-content",onClick:ca=>ca.stopPropagation(),children:[K.jsx("h2",{children:va.stationName}),K.jsxs("p",{children:[K.jsx("strong",{children:"Address:"})," ",va.stationAddress]}),K.jsxs("p",{children:[K.jsx("strong",{children:"Coordinates:"})," ",va.coordinates]}),K.jsxs("p",{children:[K.jsx("strong",{children:"Tanod Assigned:"})," ",va.tanodAssignedName||"Not Assigned"]}),K.jsxs("p",{children:[K.jsx("strong",{children:"Total Bikes:"})," ",va.totalRegularBikes||0," ","(Regular), ",va.totalElectricBikes||0," (Electric)"]}),K.jsx("button",{className:"cancel-btn",onClick:Wa,children:"Close"})]})}),Rn=({message:va})=>K.jsx("div",{className:"success-overlay",children:K.jsxs("div",{className:"success-content",children:[K.jsx("div",{className:"success-icon",children:""}),K.jsx("p",{children:va})]})});return K.jsxs(S0,{children:[K.jsx(jg,{title:"Station Management"}),K.jsxs("div",{className:"station-management-container",children:[K.jsxs("div",{className:"station-management-header",children:[K.jsx("h2",{children:"Station Overview"}),K.jsxs("button",{className:"add-station-btn",onClick:za,children:[K.jsx(RI,{})," Add New Station"]})]}),K.jsxs("div",{className:"station-map-section",children:[K.jsx("h2",{children:"Station Locations"}),K.jsx("div",{className:"map-container",children:K.jsx(KPe,{onEditStation:va=>{yr(va)}})})]}),K.jsx("div",{className:"station-list",children:K.jsxs("table",{children:[K.jsx("thead",{children:K.jsxs("tr",{children:[K.jsx("th",{children:"Station Name"}),K.jsx("th",{children:"Station Address"}),K.jsx("th",{children:"Total Bikes"}),K.jsx("th",{children:"Total E-Bikes"}),K.jsx("th",{children:"Tanod Assigned"}),K.jsx("th",{children:"Action"})]})}),K.jsx("tbody",{children:t.length>0?t.map(va=>K.jsxs("tr",{children:[K.jsx("td",{children:K.jsx("strong",{children:va.stationName})}),K.jsx("td",{children:K.jsx("span",{onClick:()=>{U(va),z(!0)},style:{cursor:"pointer",color:"#00796b"},children:va.stationAddress})}),K.jsx("td",{children:va.totalRegularBikes||0}),K.jsx("td",{children:va.totalElectricBikes||0}),K.jsx("td",{children:K.jsx("strong",{children:va.tanodAssignedName||"Not Assigned"})}),K.jsx("td",{children:K.jsx("button",{className:"delete-btn",onClick:()=>Rt(va.id),children:K.jsx(EK,{})})})]},va.id)):K.jsx("tr",{children:K.jsx("td",{colSpan:"6",style:{textAlign:"center",padding:"10px"},children:"No stations available"})})})]})}),E&&k&&K.jsx(Dn,{station:k,onClose:()=>z(!1)}),s&&K.jsx("div",{className:"modal-overlay",children:K.jsxs("div",{className:"modal-content large",children:[K.jsxs("div",{className:"modal-header",children:[K.jsx("h2",{children:"Add Station"}),K.jsx("button",{className:"close-modal-btn",onClick:()=>{wt(!1),l(!1)},children:K.jsx(PK,{})})]}),K.jsxs("form",{onSubmit:ur,children:[K.jsx("label",{children:"Station Name:"}),K.jsx("input",{type:"text",value:Z,onChange:va=>q(va.target.value),required:!0}),K.jsx("label",{children:"Location:"}),K.jsxs("div",{className:"location-selection",children:[K.jsxs("div",{className:"coordinates-input",children:[K.jsx("input",{type:"text",value:ge,onChange:er,placeholder:"Click on map or enter lat,long",readOnly:!0}),K.jsx("button",{type:"button",className:`select-location-btn ${Je?"active":""}`,onClick:()=>wt(!Je),children:Je?"Done Selecting":"Select on Map"})]}),K.jsx("div",{className:"map-container",children:K.jsx(WPe,{onSelectLocation:cr,isSelectingLocation:Je})})]}),K.jsx("label",{children:"Address:"}),K.jsx("textarea",{value:$,readOnly:!0}),K.jsx("label",{children:"Tanod Assigned:"}),K.jsxs("select",{value:ie,onChange:va=>de(va.target.value),required:!0,children:[K.jsx("option",{value:"",children:"Select Tanod"}),Ce.map(va=>K.jsxs("option",{value:va.id,children:[va.name," (",va.email,")"]},va.id))]}),K.jsx("label",{children:"Add Bikes:"}),K.jsxs("div",{className:"bike-selection",children:[K.jsx("button",{type:"button",onClick:()=>ka("Regular Bicycle"),children:""}),K.jsx("input",{type:"text",value:`${Ae.length} Selected`,readOnly:!0})]}),K.jsx("label",{children:"Add E-Bikes:"}),K.jsxs("div",{className:"bike-selection",children:[K.jsx("button",{type:"button",onClick:()=>ka("Electric Bicycle"),children:""}),K.jsx("input",{type:"text",value:`${Re.length} Selected`,readOnly:!0})]}),K.jsxs("div",{className:"modal-buttons",children:[K.jsx("button",{type:"submit",className:"save-btn",children:"Save"}),K.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>l(!1),children:"Cancel"})]})]})]})}),Ie&&K.jsx("div",{className:"add-bike-modal-overlay",children:K.jsxs("div",{className:"add-bike-modal",children:[K.jsx("h2",{children:"Select Regular Bikes"}),K.jsx("div",{className:"bike-list-container",children:De.length>0?De.map(va=>K.jsxs("div",{className:"bike-item",children:[K.jsxs("label",{children:[va.bikeName," (",va.bikeId,")"]}),K.jsx("input",{type:"checkbox",checked:Ae.includes(va.id),onChange:()=>{me(Wa=>Wa.includes(va.id)?Wa.filter(ca=>ca!==va.id):[...Wa,va.id])}})]},va.id)):K.jsx("p",{children:"No unassigned bikes available"})}),K.jsx("button",{className:"save-btn",onClick:()=>qe(!1),children:"Done"})]})}),ze&&K.jsx("div",{className:"add-bike-modal-overlay",children:K.jsxs("div",{className:"add-bike-modal",children:[K.jsx("h2",{children:"Select Electric Bikes"}),K.jsx("div",{className:"bike-list-container",children:ye.length>0?ye.map(va=>K.jsxs("div",{className:"bike-item",children:[K.jsxs("label",{children:[va.bikeName," (",va.bikeId,")"]}),K.jsx("input",{type:"checkbox",checked:Re.includes(va.id),onChange:()=>{be(Wa=>Wa.includes(va.id)?Wa.filter(ca=>ca!==va.id):[...Wa,va.id])}})]},va.id)):K.jsx("p",{children:"No unassigned e-bikes available"})}),K.jsx("button",{className:"save-btn",onClick:()=>Le(!1),children:"Done"})]})}),ke&&K.jsx("div",{className:"assigned-bike-overlay",children:K.jsxs("div",{className:"assigned-bike-modal",children:[K.jsx("h2",{children:"Remove Assigned Regular Bikes"}),K.jsx("div",{className:"bike-list-container",children:Ae.length>0?Ae.map(va=>{const Wa=a.find(ca=>ca.id===va);return K.jsxs("div",{className:"bike-item",children:[K.jsxs("label",{children:[Wa==null?void 0:Wa.bikeName," (",Wa==null?void 0:Wa.bikeId,")"]}),K.jsx("button",{className:"remove-btn",onClick:()=>pn(va,"Regular Bicycle"),children:" Remove"})]},va)}):K.jsx("p",{children:"No assigned bikes."})}),K.jsx("button",{className:"save-btn",onClick:()=>tt(!1),children:"Done"})]})}),Ue&&K.jsx("div",{className:"assigned-bike-overlay",children:K.jsxs("div",{className:"assigned-bike-modal",children:[K.jsx("h2",{children:"Remove Assigned Electric Bikes"}),K.jsx("div",{className:"bike-list-container",children:Re.length>0?Re.map(va=>{const Wa=a.find(ca=>ca.id===va);return K.jsxs("div",{className:"bike-item",children:[K.jsxs("label",{children:[Wa==null?void 0:Wa.bikeName," (",Wa==null?void 0:Wa.bikeId,")"]}),K.jsx("button",{className:"remove-btn",onClick:()=>pn(va,"Electric Bicycle"),children:" Remove"})]},va)}):K.jsx("p",{children:"No assigned e-bikes."})}),K.jsx("button",{className:"save-btn",onClick:()=>He(!1),children:"Done"})]})}),h&&w&&K.jsx("div",{className:"modal-overlay",children:K.jsxs("div",{className:"modal-content",children:[K.jsx("h2",{children:"Edit Station"}),K.jsxs("form",{onSubmit:ur,children:[K.jsx("label",{children:"Station Name:"}),K.jsx("input",{type:"text",value:Z,onChange:va=>q(va.target.value),required:!0}),K.jsx("label",{children:"Coordinates:"}),K.jsx("input",{type:"text",value:ge,onChange:er,placeholder:"Enter lat,long"}),K.jsx("label",{children:"Address:"}),K.jsx("textarea",{value:$,readOnly:!0}),K.jsx("label",{children:"Tanod Assigned:"}),(()=>{const va=w.tanodAssignedID,Wa=$e.find(Qa=>Qa.id===va);let ca=[...Ce];return Wa&&!ca.some(Qa=>Qa.id===Wa.id)&&ca.unshift(Wa),K.jsxs("select",{value:ie,onChange:Qa=>de(Qa.target.value),required:!0,children:[K.jsx("option",{value:"",children:"Select Tanod"}),ca.map(Qa=>K.jsxs("option",{value:Qa.id,children:[Qa.name," (",Qa.email,")"]},Qa.id))]})})(),K.jsx("label",{children:"Assigned Bikes:"}),K.jsxs("div",{className:"bike-selection",children:[K.jsx("button",{type:"button",onClick:()=>jr("Regular Bicycle"),children:""}),K.jsx("input",{type:"text",value:`${Ae.length} Assigned`,readOnly:!0}),K.jsx("button",{type:"button",onClick:()=>ka("Regular Bicycle"),children:""})]}),K.jsx("label",{children:"Assigned E-Bikes:"}),K.jsxs("div",{className:"bike-selection",children:[K.jsx("button",{type:"button",onClick:()=>jr("Electric Bicycle"),children:""}),K.jsx("input",{type:"text",value:`${Re.length} Assigned`,readOnly:!0}),K.jsx("button",{type:"button",onClick:()=>ka("Electric Bicycle"),children:""})]}),K.jsxs("div",{className:"modal-buttons",children:[K.jsx("button",{type:"submit",className:"save-btn",children:"Save"}),K.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>n(!1),children:"Cancel"})]})]})]})}),it&&K.jsx(Rn,{message:_e})]})]})},XPe=()=>{const[t,e]=nt.useState([]),[a,r]=nt.useState(""),[s,l]=nt.useState(""),[h,n]=nt.useState(""),[w,T]=nt.useState(null),[E,z]=nt.useState(""),[k,U]=nt.useState(!1),[Z,q]=nt.useState("station_manager"),[$,J]=nt.useState(!1),[ie,de]=nt.useState(null),[ge,he]=nt.useState(null),[Ae,me]=nt.useState({adminId:null,role:""}),[Re,be]=nt.useState([]),[De,ne]=nt.useState({total:0,active:0,inactive:0,onBreak:0}),[ye,Me]=nt.useState(null),ze={ACTIVE:"Active",INACTIVE:"Inactive",ON_BREAK:"On Break"},Le={Active:"#4CAF50",Inactive:"#F44336","On Break":"#FFC107"},Ie=Je=>{const wt={total:Je.length,active:0,inactive:0,onBreak:0};return Je.forEach(it=>{switch(it.status){case ze.ACTIVE:wt.active++;break;case ze.INACTIVE:wt.inactive++;break;case ze.ON_BREAK:wt.onBreak++;break;default:wt.inactive++;break}}),wt};nt.useEffect(()=>{const Je=async()=>{const it=await Xi(Wn(zr,"stations")),ct={};return it.docs.forEach(_e=>{ct[_e.id]={stationName:_e.data().stationName,stationAddress:_e.data().stationAddress}}),be(ct),ct},wt=it=>{const ct=Wn(zr,"admins");return ay(ct,_e=>{const Jt=_e.docs.map(Zt=>({id:Zt.id,...Zt.data(),stationDetails:Zt.data().stationAssignedTo?it[Zt.data().stationAssignedTo]:null}));e(Jt),ne(Ie(Jt))})};Je().then(it=>{const ct=wt(it);return()=>ct()})},[]);const qe=async(Je,wt)=>{try{const it=Is(zr,"admins",Je);await cd(it,{roles:[wt],updatedAt:new Date}),alert("Role updated successfully!")}catch(it){console.error("Error updating role:",it),alert("Failed to update admin role. Please try again.")}},ke=(Je,wt)=>{me({adminId:Je,role:wt||"Station Manager"})},tt=async()=>{if(!Ae.adminId||!Ae.role){alert("Please select a role");return}try{await qe(Ae.adminId,Ae.role),me({adminId:null,role:""})}catch(Je){console.error("Error saving role:",Je),alert("Failed to save role changes")}},Ue=async Je=>{const wt=new FormData;wt.append("profilePhoto",Je);try{return(await Ko.post("http://192.168.6.200:4000/api/upload-profile-photo",wt,{headers:{"Content-Type":"multipart/form-data"}})).data.profilePhotoUrl}catch(it){return console.error("Error uploading to AWS:",it),null}},He=async Je=>{if(Je.preventDefault(),!a||!s||!h){alert("Please fill in all fields.");return}let wt="";if(w&&(wt=await Ue(w),!wt)){alert("Failed to upload profile image.");return}try{const it=await Ko.post("http://localhost:4001/api/create-admin",{name:a,email:s,password:h,roles:[],profilePhoto:wt||"",status:"Active",stationAssignedTo:null});it.data.success?(alert("Admin added successfully!"),r(""),l(""),n(""),T(null),z(""),U(!1)):alert("Error: "+it.data.message)}catch(it){console.error("Error creating admin:",it),alert("There was an error creating the admin. Please try again.")}},Ce=async Je=>{if(window.confirm("Are you sure you want to delete this admin?"))try{await wI(Is(zr,"admins",Je))}catch(wt){console.error("Error deleting admin:",wt)}},Se=Je=>{de(Je),J(!0),he(null),q(Je.roles[0])},$e=async Je=>{if(Je.preventDefault(),!ge){alert("Please select a new profile image.");return}const wt=await Ue(ge);if(!wt){alert("Failed to upload new profile image.");return}try{const it=Is(zr,"admins",ie.id);await cd(it,{profilePhoto:wt}),alert("Profile photo updated successfully!"),J(!1),de(null),he(null)}catch(it){console.error("Error updating admin profile photo:",it),alert("Failed to update admin profile photo. Please try again.")}},ft=()=>{J(!1),de(null),he(null)};return K.jsxs(S0,{children:[K.jsx(jg,{title:"Admin Management"}),K.jsxs("div",{className:"admin-management-container",children:[K.jsxs("div",{className:"stats-container",children:[K.jsxs("div",{className:"stat-card",children:[K.jsx("h3",{children:"Total Admins"}),K.jsx("p",{children:De.total})]}),K.jsxs("div",{className:"stat-card active",children:[K.jsx("h3",{children:"Active"}),K.jsx("p",{children:De.active})]}),K.jsxs("div",{className:"stat-card break",children:[K.jsx("h3",{children:"On Break"}),K.jsx("p",{children:De.onBreak})]}),K.jsxs("div",{className:"stat-card inactive",children:[K.jsx("h3",{children:"Inactive"}),K.jsx("p",{children:De.inactive})]})]}),K.jsxs("div",{className:"admin-management-header",children:[K.jsx("h2",{children:"Admin Creation"}),K.jsxs("button",{className:"btn-create-admin",onClick:()=>U(!0),children:[K.jsx(RI,{})," Create New Admin Account"]})]}),K.jsx("div",{className:"admin-gallery",children:t.length>0?t.map(Je=>{var wt,it;return K.jsxs("div",{className:"admin-card",children:[K.jsxs("div",{className:"edit-container",children:[K.jsx("button",{className:"edit-toggle",onClick:()=>Me(ye===Je.id?null:Je.id),children:K.jsx(yce,{})}),ye===Je.id&&K.jsxs("div",{className:"edit-options",children:[K.jsxs("button",{onClick:()=>{Se(Je),Me(null)},children:[K.jsx(cce,{})," Change Photo"]}),K.jsxs("button",{onClick:()=>{var ct;ke(Je.id,(ct=Je.roles)==null?void 0:ct[0]),Me(null)},children:[K.jsx(gce,{})," Change Role"]}),K.jsxs("button",{onClick:()=>{Ce(Je.id),Me(null)},children:[K.jsx(EK,{})," Delete Admin"]})]})]}),K.jsxs("div",{className:"admin-photo",children:[K.jsxs("div",{className:"status-dot-container",children:[K.jsx("span",{className:`status-dot ${(wt=Je.status)==null?void 0:wt.toLowerCase()}`,style:{backgroundColor:Le[Je.status]||Le.Inactive}}),K.jsxs("div",{className:"status-tooltip",children:[Je.status||"Inactive","  Last updated:"," ",Je.statusUpdatedAt?Ui(Je.statusUpdatedAt.toDate()).format("MMM D, HH:mm"):"Not available"]})]}),Je.profilePhoto?K.jsx("img",{src:Je.profilePhoto,alt:"Admin"}):K.jsx("div",{className:"placeholder",children:"No Image"})]}),K.jsxs("div",{className:"admin-info",children:[K.jsx("h4",{children:Je.name}),K.jsx("p",{children:Je.email}),K.jsx("div",{className:"role-badge",children:((it=Je.roles)==null?void 0:it[0])||"No Role"}),K.jsx("div",{className:"station-info",children:Je.stationDetails?K.jsxs("span",{className:"station-name",children:[" ",Je.stationDetails.stationName]}):K.jsx("span",{className:"no-station",children:"No Station Assigned"})})]})]},Je.id)}):K.jsx("p",{children:"No admins found"})}),k&&K.jsx("div",{className:"modal-overlay",children:K.jsxs("div",{className:"modal-content",children:[K.jsx("h3",{children:"Create Admin Account"}),K.jsxs("form",{onSubmit:He,children:[K.jsxs("div",{className:"form-group",children:[K.jsx("label",{children:"Name:"}),K.jsx("input",{type:"text",value:a,onChange:Je=>r(Je.target.value),required:!0})]}),K.jsxs("div",{className:"form-group",children:[K.jsx("label",{children:"Role:"}),K.jsxs("select",{value:Z,onChange:Je=>q(Je.target.value),children:[K.jsx("option",{value:"Station Manager",children:"Station Manager"}),K.jsx("option",{value:"User Support",children:"User Support"})]})]}),K.jsxs("div",{className:"form-group",children:[K.jsx("label",{children:"Email:"}),K.jsx("input",{type:"email",value:s,onChange:Je=>l(Je.target.value),required:!0})]}),K.jsxs("div",{className:"form-group",children:[K.jsx("label",{children:"Password:"}),K.jsx("input",{type:"password",value:h,onChange:Je=>n(Je.target.value),required:!0})]}),K.jsxs("div",{className:"form-group",children:[K.jsx("label",{children:"Profile Picture:"}),K.jsx("input",{type:"file",accept:"image/*",onChange:Je=>T(Je.target.files[0])})]}),w&&K.jsx("div",{className:"preview-image",children:K.jsx("img",{src:URL.createObjectURL(w),alt:"Preview"})}),K.jsx("button",{type:"submit",className:"btn-create",children:"Create"}),K.jsx("button",{type:"button",className:"btn-cancel",onClick:()=>U(!1),children:"Cancel"})]})]})}),$&&ie&&K.jsx("div",{className:"modal-overlay",children:K.jsxs("div",{className:"modal-content",children:[K.jsxs("h3",{children:["Edit Profile Photo for ",ie.name]}),K.jsxs("form",{onSubmit:$e,children:[K.jsxs("div",{className:"form-group",children:[K.jsx("label",{children:"New Profile Picture:"}),K.jsx("input",{type:"file",accept:"image/*",onChange:Je=>he(Je.target.files[0])})]}),ge&&K.jsx("div",{className:"preview-image",children:K.jsx("img",{src:URL.createObjectURL(ge),alt:"Preview"})}),K.jsx("button",{type:"submit",className:"btn-update",children:"Update Photo"}),K.jsx("button",{type:"button",className:"btn-cancel",onClick:ft,children:"Cancel"})]})]})}),Ae.adminId&&K.jsx("div",{className:"modal-overlay",children:K.jsxs("div",{className:"modal-content",children:[K.jsx("h3",{children:"Change Admin Role"}),K.jsxs("form",{onSubmit:Je=>{Je.preventDefault(),tt()},children:[K.jsxs("div",{className:"form-group",children:[K.jsx("label",{children:"Select Role:"}),K.jsxs("select",{value:Ae.role,onChange:Je=>me({...Ae,role:Je.target.value}),children:[K.jsx("option",{value:"Station Manager",children:"Station Manager"}),K.jsx("option",{value:"User Support",children:"User Support"})]})]}),K.jsxs("div",{className:"button-group",children:[K.jsx("button",{type:"submit",className:"btn-update",children:"Save Role"}),K.jsx("button",{type:"button",className:"btn-cancel",onClick:()=>me({adminId:null,role:""}),children:"Cancel"})]})]})]})})]})]})},C5={RegularBicycle:"Regular Bicycle",ElectricBicycle:"Electric Bicycle"},JPe=()=>{const[t,e]=nt.useState([]),[a,r]=nt.useState(!0),[s,l]=nt.useState(null),[h,n]=nt.useState(""),[w,T]=nt.useState([]),[E,z]=nt.useState([]),[k,U]=nt.useState(!1),[Z,q]=nt.useState("daily"),[$,J]=nt.useState({daily:{revenue:0,rides:0},weekly:{revenue:0,rides:0},monthly:{revenue:0,rides:0},total:{revenue:0,rides:0},all:{revenue:0,rides:0}}),[ie,de]=nt.useState({key:"revenue",direction:"desc"}),ge=ne=>{de({key:ne,direction:ie.key===ne&&ie.direction==="asc"?"desc":"asc"})};nt.useEffect(()=>{he(),Ae(),me()},[]),nt.useEffect(()=>{me()},[Z]);const he=async()=>{try{const ye=(await Xi(Wn(zr,"rentalRates"))).docs.map(Me=>({id:Me.id,...Me.data()}));e(ye)}catch(ne){console.error("Error fetching rental rates:",ne)}finally{r(!1)}},Ae=async()=>{try{const ne=Wn(zr,"rateHistory"),ye=b_(ne,AK("timestamp","desc")),ze=(await Xi(ye)).docs.map(Le=>({id:Le.id,...Le.data()}));T(ze)}catch(ne){console.error("Error fetching rate history:",ne)}},me=async()=>{try{const ne=Wn(zr,"stations"),ye=await Xi(ne),Me=new Map;ye.forEach(Ue=>{const He=Ue.data();Me.set(Ue.id,{id:Ue.id,stationName:He.stationName,revenue:0,rides:0})});const ze=Wn(zr,"ride_history"),Le=await Xi(ze),Ie=Le.docs.length,qe=Ui(),ke={daily:{revenue:0,rides:0},weekly:{revenue:0,rides:0},monthly:{revenue:0,rides:0},total:{revenue:0,rides:0}};Le.docs.forEach(Ue=>{const He=Ue.data(),Ce=Ui(He.rideEndedAt.toDate()),Se=Number(He.amountPaid||0);if((Z==="all"?!0:Z==="daily"?Ce.isSame(qe,"day"):Z==="weekly"?Ce.isAfter(qe.subtract(1,"week")):Z==="monthly"?Ce.isAfter(qe.subtract(1,"month")):!0)&&He.startStation){const ft=Me.get(He.startStation);ft&&(ft.rides+=1,ft.revenue+=Se)}ke.total.rides+=1,ke.total.revenue+=Se,Ce.isSame(qe,"day")&&(ke.daily.rides+=1,ke.daily.revenue+=Se),Ce.isAfter(qe.subtract(1,"week"))&&(ke.weekly.rides+=1,ke.weekly.revenue+=Se),Ce.isAfter(qe.subtract(1,"month"))&&(ke.monthly.rides+=1,ke.monthly.revenue+=Se)}),J({daily:ke.daily,weekly:ke.weekly,monthly:ke.monthly,total:ke.total,all:ke.total});const tt=Array.from(Me.values()).sort((Ue,He)=>He.revenue-Ue.revenue).map(Ue=>({...Ue,totalSystemRides:Ie}));z(tt)}catch(ne){console.error("Error fetching station revenue:",ne)}},Re=ne=>{var ye;l(ne),n(((ye=ne.pricePerMinute)==null?void 0:ye.toString())||"")},be=()=>{l(null),n("")},De=async()=>{if(!s)return;const ne=parseFloat(h);if(isNaN(ne)||ne<=0){alert("Please enter a valid number greater than 0 for the price.");return}try{const ye=jv.currentUser;if(!ye)throw new Error("No user is signed in");const Me=Is(zr,"users",ye.uid),ze=await Ep(Me),Le=ze.exists()?ze.data().name:"Unknown User",Ie=Is(zr,"rentalRates",s.id);await cd(Ie,{pricePerMinute:ne}),await gR(Wn(zr,"rateHistory"),{bikeType:s.id,oldPrice:s.pricePerMinute,newPrice:ne,timestamp:new Date,updatedBy:Le});const qe=t.map(ke=>ke.id===s.id?{...ke,pricePerMinute:ne}:ke);e(qe),await Ae(),be()}catch(ye){console.error("Error updating rate:",ye),alert("Failed to update the rate. See console for details.")}};return K.jsxs(S0,{children:[K.jsx(jg,{title:"Bike Management"}),K.jsxs("div",{className:"rate-management-container",children:[K.jsx("h2",{children:"Rental Rate Management"}),a?K.jsx("p",{children:"Loading..."}):K.jsx(K.Fragment,{children:K.jsx("div",{className:"table-container",children:K.jsxs("table",{className:"rate-table",children:[K.jsx("thead",{children:K.jsxs("tr",{children:[K.jsx("th",{children:"Bike Type"}),K.jsx("th",{children:"Price Per Minute ()"}),K.jsx("th",{children:"Actions"})]})}),K.jsx("tbody",{children:t.length>0?t.map(ne=>{var Me;const ye=C5[ne.id]||ne.id;return K.jsxs("tr",{children:[K.jsx("td",{children:ye}),K.jsx("td",{children:(Me=ne.pricePerMinute)==null?void 0:Me.toFixed(2)}),K.jsx("td",{children:K.jsxs("button",{className:"edit-btn",onClick:()=>Re(ne),children:[K.jsx(Bw,{})," Edit"]})})]},ne.id)}):K.jsx("tr",{children:K.jsx("td",{colSpan:"3",style:{textAlign:"center"},children:"No rental rates available."})})})]})})}),K.jsxs("div",{className:"revenue-section",children:[K.jsx("h3",{children:"Station Revenue"}),K.jsx("div",{className:"controls",children:K.jsxs("div",{className:"time-filter",children:[K.jsx("button",{className:`filter-btn ${Z==="all"?"active":""}`,onClick:()=>q("all"),children:"All Time"}),K.jsx("button",{className:`filter-btn ${Z==="daily"?"active":""}`,onClick:()=>q("daily"),children:"Today"}),K.jsx("button",{className:`filter-btn ${Z==="weekly"?"active":""}`,onClick:()=>q("weekly"),children:"This Week"}),K.jsx("button",{className:`filter-btn ${Z==="monthly"?"active":""}`,onClick:()=>q("monthly"),children:"This Month"})]})}),K.jsx("div",{className:"table-container",children:K.jsxs("table",{className:"revenue-table",children:[K.jsx("thead",{children:K.jsxs("tr",{children:[K.jsxs("th",{onClick:()=>ge("stationName"),children:["Station Name"," ",ie.key==="stationName"&&(ie.direction==="asc"?"":"")]}),K.jsxs("th",{onClick:()=>ge("revenue"),children:["Total Revenue ()"," ",ie.key==="revenue"&&(ie.direction==="asc"?"":"")]}),K.jsxs("th",{onClick:()=>ge("rides"),children:["Total Rides"," ",ie.key==="rides"&&(ie.direction==="asc"?"":"")]})]})}),K.jsxs("tbody",{children:[E.sort((ne,ye)=>ie.key==="stationName"?ie.direction==="asc"?ne.stationName.localeCompare(ye.stationName):ye.stationName.localeCompare(ne.stationName):ie.direction==="asc"?ne[ie.key]-ye[ie.key]:ye[ie.key]-ne[ie.key]).map(ne=>K.jsxs("tr",{children:[K.jsx("td",{children:ne.stationName}),K.jsx("td",{children:ne.revenue.toFixed(2)}),K.jsx("td",{children:ne.rides})]},ne.id)),K.jsxs("tr",{className:"total-row",children:[K.jsx("td",{children:K.jsx("strong",{children:"Total"})}),K.jsx("td",{children:K.jsxs("strong",{children:["",$[Z].revenue.toFixed(2)]})}),K.jsx("td",{children:K.jsx("strong",{children:$[Z].rides})})]})]})]})})]}),K.jsxs("div",{className:"history-section",children:[K.jsxs("div",{className:"history-header",children:[K.jsx("h3",{children:"Rate History"}),K.jsxs("button",{className:"history-toggle-btn",onClick:()=>U(!k),children:[K.jsx(pce,{})," ",k?"Hide History":"Show History"]})]}),k&&K.jsx("div",{className:"table-container",children:K.jsxs("table",{className:"history-table",children:[K.jsx("thead",{children:K.jsxs("tr",{children:[K.jsx("th",{children:"Date"}),K.jsx("th",{children:"Bike Type"}),K.jsx("th",{children:"Old Price ()"}),K.jsx("th",{children:"New Price ()"}),K.jsx("th",{children:"Updated By"})]})}),K.jsx("tbody",{children:w.map(ne=>{var ye;return K.jsxs("tr",{children:[K.jsx("td",{children:Ui(ne.timestamp.toDate()).format("MMM D, YYYY HH:mm")}),K.jsx("td",{children:C5[ne.bikeType]||ne.bikeType}),K.jsx("td",{children:(ye=ne.oldPrice)==null?void 0:ye.toFixed(2)}),K.jsx("td",{children:ne.newPrice.toFixed(2)}),K.jsx("td",{children:ne.updatedBy})]},ne.id)})})]})})]}),s&&K.jsx("div",{className:"modal-overlay",onClick:be,children:K.jsxs("div",{className:"modal-content",onClick:ne=>ne.stopPropagation(),children:[K.jsx("h3",{children:"Edit Rental Rate"}),K.jsxs("p",{children:["Bike Type:"," ",K.jsx("strong",{children:C5[s.id]||s.id})]}),K.jsx("label",{children:"Price Per Minute ():"}),K.jsx("input",{type:"number",step:"0.01",value:h,onChange:ne=>n(ne.target.value)}),K.jsxs("div",{className:"modal-buttons",children:[K.jsx("button",{className:"save-btn",onClick:De,children:"Save"}),K.jsx("button",{className:"cancel-btn",onClick:be,children:"Cancel"})]})]})})]})]})};var KC={exports:{}},QPe=KC.exports,KZ;function eEe(){return KZ||(KZ=1,function(t,e){(function(a,r){t.exports=r()})(QPe,function(){var a="week",r="year";return function(s,l,h){var n=l.prototype;n.week=function(w){if(w===void 0&&(w=null),w!==null)return this.add(7*(w-this.week()),"day");var T=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var E=h(this).startOf(r).add(1,r).date(T),z=h(this).endOf(a);if(E.isBefore(z))return 1}var k=h(this).startOf(r).date(T).startOf(a).subtract(1,"millisecond"),U=this.diff(k,a,!0);return U<0?h(this).startOf("week").week():Math.ceil(U)},n.weeks=function(w){return w===void 0&&(w=null),this.week(w)}}})}(KC)),KC.exports}var tEe=eEe();const aEe=Ji(tEe);var WC={exports:{}},rEe=WC.exports,WZ;function nEe(){return WZ||(WZ=1,function(t,e){(function(a,r){t.exports=r()})(rEe,function(){return function(a,r,s){r.prototype.isBetween=function(l,h,n,w){var T=s(l),E=s(h),z=(w=w||"()")[0]==="(",k=w[1]===")";return(z?this.isAfter(T,n):!this.isBefore(T,n))&&(k?this.isBefore(E,n):!this.isAfter(E,n))||(z?this.isBefore(T,n):!this.isAfter(T,n))&&(k?this.isAfter(E,n):!this.isBefore(E,n))}}})}(WC)),WC.exports}var iEe=nEe();const sEe=Ji(iEe);Ui.extend(aEe);Ui.extend(sEe);const oEe=({text:t})=>{const e=new RegExp("(?<![A-Za-z])(?<!-)(?<!\\/)\\b(\\d+\\.?\\d*)\\b(?![A-Za-z])","g"),a=t.split(e);return K.jsx("span",{children:a.map((r,s)=>e.test(r)?K.jsx("span",{className:"highlighted-number",children:r},s):K.jsx("span",{children:r},s))})},fg=({title:t,analysis:e})=>K.jsxs("div",{className:"analysis-card",children:[K.jsx("h3",{children:t}),K.jsx("p",{children:K.jsx(oEe,{text:e})})]}),lEe=()=>{var me,Re,be,De;const[t,e]=nt.useState([]),[a,r]=nt.useState({calories:[],distance:[],duration:[],carbonSaved:[]}),[s,l]=nt.useState([]),[h,n]=nt.useState([]),[w,T]=nt.useState("monthly"),[E,z]=nt.useState([]),[k,U]=nt.useState([]),Z=[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"}],q=["#009C8C","#4CAF50","#2196F3","#FFA726","#FF5722","#9C27B0","#673AB7","#3F51B5","#00BCD4","#795548"],$=(ne,ye,Me)=>{const ze=Ui(),Le=new Map;return ye.filter(qe=>{const ke=Ui(qe.rideEndedAt);switch(Me){case"daily":return ke.isSame(ze,"day");case"weekly":return ke.isAfter(ze.subtract(1,"week"));case"monthly":return ke.isAfter(ze.subtract(1,"month"));default:return!0}}).forEach(qe=>{qe.startStation&&Le.set(qe.startStation,(Le.get(qe.startStation)||0)+1)}),ne.map(qe=>({id:qe.id,stationName:qe.stationName,rides:Le.get(qe.id)||0})).sort((qe,ke)=>ke.rides-qe.rides)},J=(ne,ye)=>{const Me=new Map,ze=Ui();let Le,Ie;switch(ye){case"daily":Le=ze.subtract(6,"day").startOf("day"),Ie=ze.endOf("day");break;case"weekly":Le=ze.subtract(11,"week").startOf("week"),Ie=ze.endOf("week");break;case"monthly":Le=ze.subtract(11,"month").startOf("month"),Ie=ze.endOf("month");break;default:const ke=ne.map(tt=>Ui(tt.rideEndedAt));Le=Ui.min(ke),Ie=ze}let qe=Le;for(;qe.isBefore(Ie);){let ke;switch(ye){case"daily":ke=qe.format("MMM DD"),qe=qe.add(1,"day");break;case"weekly":ke=`Week ${qe.week()} - ${qe.format("MMM")}`,qe=qe.add(1,"week");break;case"monthly":ke=qe.format("MMM YYYY"),qe=qe.add(1,"month");break}Me.set(ke,{period:ke,revenue:0,calories:0,distance:0,duration:0,carbonSaved:0,rides:0})}return ne.forEach(ke=>{const tt=Ui(ke.rideEndedAt);if(tt.isBetween(Le,Ie,null,"[]")){let Ue;switch(ye){case"daily":Ue=tt.format("MMM DD");break;case"weekly":Ue=`Week ${tt.week()} - ${tt.format("MMM")}`;break;case"monthly":Ue=tt.format("MMM YYYY");break}if(Me.has(Ue)){const He=Me.get(Ue);He.revenue+=Number(ke.amountPaid||0),He.calories+=Number(ke.caloriesBurned||0),He.distance+=Number(ke.distance||0),He.duration+=Number(ke.duration||0)/60,He.carbonSaved+=Number(ke.carbonSaved||0),He.rides+=1}}}),Array.from(Me.values()).map(ke=>({...ke,avgCalories:ke.rides>0?ke.calories/ke.rides:0,avgDistance:ke.rides>0?ke.distance/ke.rides:0,avgDuration:ke.rides>0?ke.duration/ke.rides:0,avgCarbonSaved:ke.rides>0?ke.carbonSaved/ke.rides:0}))},ie=(ne,ye)=>{const Me=Ui();switch(ye){case"daily":return ne.filter(ze=>Ui(ze.rideEndedAt).isSame(Me,"day"));case"weekly":return ne.filter(ze=>Ui(ze.rideEndedAt).isAfter(Me.subtract(1,"week")));case"monthly":return ne.filter(ze=>Ui(ze.rideEndedAt).isAfter(Me.subtract(1,"month")));default:return ne}},de=(ne,ye)=>{if(!ne||ne.length===0)return"No data available";const Me=ie(E,w),ze=Me.reduce((qe,ke)=>{switch(ye){case"revenue":return qe+(ke.amountPaid||0);case"calories":return qe+(ke.caloriesBurned||0);case"distance":return qe+(ke.distance||0);case"duration":return qe+(ke.duration||0)/60;case"carbonSaved":return qe+(ke.carbonSaved||0);default:return qe}},0),Le=Me.length,Ie=w==="daily"?"today":w==="weekly"?"this week":"this month";switch(ye){case"revenue":const qe=Le>0?ze/Le:0;return`The EcoRide Parada system generated ${ze.toFixed(2)} in revenue ${Ie}. 
                With ${Le} rides completed, residents spent an average of ${qe.toFixed(2)} per trip. 
                These funds support system maintenance and expansion, creating sustainable transportation
                infrastructure for Barangay Parada while providing an affordable alternative to motor vehicles.`;case"calories":const ke=ze*.26;return`Barangay Parada residents burned ${ze.toFixed(0)} calories through cycling ${Ie}, 
                equivalent to approximately ${Math.round(ze/100)} healthy meals worth of energy. 
                This active transportation promotes community health and wellness, generating estimated healthcare 
                cost savings of ${ke.toFixed(2)} through preventative exercise. Regular cyclists in Parada 
                report improved cardiovascular health and reduced stress levels, creating a healthier community.`;case"distance":const Ue=ze*.25;return`EcoRide users covered ${ze.toFixed(2)} km by bike ${Ie}. 
                Based on Metro Manila traffic research, each bike takes up only 0.25 car units 
                of road space, representing approximately ${Math.round(Ue)} car-equivalent 
                trips removed from local roads. This efficient use of road space helps reduce 
                traffic congestion in Barangay Parada's busiest areas.`;case"duration":const He=Math.floor(ze/60),Ce=Math.floor(ze%60),Se=Le*5,$e=ze*.3;return`Barangay Parada cyclists spent ${He} hours and ${Ce} minutes riding ${Ie}. 
                By choosing EcoRide over cars, residents collectively saved approximately ${Math.round(Se/60+$e)} hours 
                on parking and traffic delays. This represents significant quality-of-life improvement for
                community members while reducing road congestion by an estimated ${Math.round(Le*.8)} vehicles during 
                peak hours, improving mobility for all Parada residents.`;case"carbonSaved":const ft=(ze/21).toFixed(1),Je=(ze/.251).toFixed(1),wt=(ze*.05).toFixed(1);return`The EcoRide system prevented ${ze.toFixed(2)} kg of CO2 emissions in Barangay Parada ${Ie}, 
                equivalent to the yearly CO2 absorption of ${ft} trees. This translates to approximately 
                ${Je} km of car travel removed from local roads and an estimated ${wt}% 
                improvement in local air quality. Every ride contributes to Parada's sustainability goals, helping 
                transform the barangay into a model for eco-friendly transportation in Metro Manila.`;default:return"No analysis available"}},ge=(ne,ye)=>{const Me=new Map;return Ui(),ne.forEach(ze=>{const Le=Ui(ze.timestamp);let Ie;switch(ye){case"daily":Ie=Le.format("MMM DD");break;case"weekly":Ie=`Week ${Le.week()} - ${Le.format("MMM")}`;break;case"monthly":Ie=Le.format("MMM YYYY");break}if(!Me.has(Ie))Me.set(Ie,{period:Ie,averageRating:ze.rating,totalRatings:1});else{const qe=Me.get(Ie);qe.averageRating=(qe.averageRating*qe.totalRatings+ze.rating)/(qe.totalRatings+1),qe.totalRatings+=1}}),Array.from(Me.values())},he=async()=>{try{const ne=Wn(zr,"ride_history"),Me=(await Xi(ne)).docs.map(Je=>{var wt;return{id:Je.id,...Je.data(),rideEndedAt:(wt=Je.data().rideEndedAt)!=null&&wt.toDate?Je.data().rideEndedAt.toDate():new Date(Je.data().rideEndedAt.seconds*1e3)}});z(Me);const ze=Wn(zr,"stations"),Ie=(await Xi(ze)).docs.map(Je=>({id:Je.id,stationName:Je.data().stationName})),qe=$(Ie,Me,w);n(qe);const ke=J(Me,"monthly"),tt=J(Me,"weekly"),Ue=J(Me,"daily");l({monthly:ke,weekly:tt,daily:Ue});const He=new Map;Ie.forEach(Je=>{He.set(Je.id,{stationName:Je.stationName,revenue:0,rides:0})}),Me.forEach(Je=>{if(Je.startStation){const wt=He.get(Je.startStation);wt&&(wt.revenue+=Number(Je.amountPaid),wt.rides+=1)}});const Ce=Array.from(He.values()).sort((Je,wt)=>wt.revenue-Je.revenue);e(Ce);const Se=Wn(zr,"ride_ratings"),ft=(await Xi(Se)).docs.map(Je=>{var wt;return{id:Je.id,...Je.data(),timestamp:(wt=Je.data().timestamp)!=null&&wt.toDate?Je.data().timestamp.toDate():new Date(Je.data().timestamp.seconds*1e3)}});U(ft)}catch(ne){console.error("Error fetching analytics:",ne)}};nt.useEffect(()=>{he()},[w]);const Ae=(ne,ye)=>ne[ye]||[];return K.jsxs(S0,{children:[K.jsx(jg,{})," ",K.jsxs("div",{className:"analytics-container",children:[K.jsxs("div",{className:"analytics-header",children:[K.jsx("h1",{children:"System Analytics"}),K.jsx("div",{className:"time-filter",children:Z.map(ne=>K.jsx("button",{className:`filter-btn ${w===ne.value?"active":""}`,onClick:()=>T(ne.value),children:ne.label},ne.value))})]}),K.jsxs("div",{className:"charts-grid",children:[K.jsxs("div",{className:"chart-section full-width",children:[K.jsx("h2",{children:"Revenue Trend"}),K.jsxs("div",{className:"chart-with-analysis",children:[K.jsx(Sp,{width:"100%",height:500,children:K.jsxs(vw,{data:Ae(s,w),margin:{top:20,right:30,left:20,bottom:90},children:[K.jsx("defs",{children:K.jsxs("linearGradient",{id:"revenueGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[K.jsx("stop",{offset:"5%",stopColor:"#009C8C",stopOpacity:.8}),K.jsx("stop",{offset:"95%",stopColor:"#009C8C",stopOpacity:.1})]})}),K.jsx(xp,{strokeDasharray:"3 3"}),K.jsx(od,{dataKey:"period",angle:-45,textAnchor:"end",height:80,interval:0}),K.jsx(ld,{tickFormatter:ne=>`${ne.toFixed(0)}`,label:{value:"Revenue ()",angle:-90,position:"insideLeft",offset:10,dy:50}}),K.jsx(ou,{formatter:ne=>[`${ne.toFixed(2)}`,"Revenue"]}),K.jsx(tf,{verticalAlign:"bottom",height:36,wrapperStyle:{paddingTop:"20px",marginBottom:"10px"}}),K.jsx(rf,{type:"monotone",dataKey:"revenue",stroke:"#009C8C",fill:"url(#revenueGradient)",name:"Revenue",dot:{r:4}})]})}),K.jsx(fg,{title:"Revenue Analysis",analysis:de(Ae(s,w),"revenue")})]})]}),K.jsxs("div",{className:"chart-section full-width",children:[K.jsx("h2",{children:"Revenue by Station"}),K.jsxs("div",{className:"chart-with-analysis",children:[K.jsx(Sp,{width:"100%",height:500,children:K.jsxs(DM,{data:t.filter(ne=>ne.revenue>0),margin:{top:20,right:30,left:20,bottom:120},children:[K.jsx(xp,{strokeDasharray:"3 3"}),K.jsx(od,{dataKey:"stationName",angle:-45,textAnchor:"end",height:100,interval:0,tick:{fontSize:12}}),K.jsx(ld,{tickFormatter:ne=>`${ne.toFixed(2)}`}),K.jsx(ou,{formatter:ne=>`${ne.toFixed(2)}`}),K.jsx(Ip,{dataKey:"revenue",children:t.filter(ne=>ne.revenue>0).map((ne,ye)=>K.jsx(lv,{fill:q[ye%q.length]},`cell-${ye}`))})]})}),K.jsx(fg,{title:"Station Revenue Analysis",analysis:`The top earning station is ${((me=t[0])==null?void 0:me.stationName)||"N/A"} with ${(Re=t[0])==null?void 0:Re.revenue.toFixed(2)} in revenue. There are ${t.filter(ne=>ne.revenue>0).length} stations generating revenue, with a total system revenue of ${t.reduce((ne,ye)=>ne+ye.revenue,0).toFixed(2)}.`})]})]}),K.jsxs("div",{className:"chart-section full-width",children:[K.jsx("h2",{children:"Average Calories Burned"}),K.jsxs("div",{className:"chart-with-analysis",children:[K.jsx(Sp,{width:"100%",height:500,children:K.jsxs(vw,{data:Ae(s,w),margin:{top:20,right:30,left:20,bottom:70},children:[K.jsx("defs",{children:K.jsxs("linearGradient",{id:"caloriesGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[K.jsx("stop",{offset:"5%",stopColor:"#FF5722",stopOpacity:.8}),K.jsx("stop",{offset:"95%",stopColor:"#FF5722",stopOpacity:.1})]})}),K.jsx(xp,{strokeDasharray:"3 3"}),K.jsx(od,{dataKey:"period"}),K.jsx(ld,{}),K.jsx(ou,{}),K.jsx(tf,{}),K.jsx(rf,{type:"monotone",dataKey:"calories",stroke:"#FF5722",fill:"url(#caloriesGradient)",name:"Calories Burned",dot:{fill:"#FF5722"}})]})}),K.jsx(fg,{title:"Health Impact Analysis",analysis:de(Ae(s,w),"calories")})]})]}),K.jsxs("div",{className:"chart-section full-width",children:[K.jsx("h2",{children:"Average Distance Covered"}),K.jsxs("div",{className:"chart-with-analysis",children:[K.jsx(Sp,{width:"100%",height:500,children:K.jsxs(vw,{data:Ae(s,w),margin:{top:20,right:30,left:20,bottom:70},children:[K.jsx("defs",{children:K.jsxs("linearGradient",{id:"distanceGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[K.jsx("stop",{offset:"5%",stopColor:"#2196F3",stopOpacity:.8}),K.jsx("stop",{offset:"95%",stopColor:"#2196F3",stopOpacity:.1})]})}),K.jsx(xp,{strokeDasharray:"3 3"}),K.jsx(od,{dataKey:"period"}),K.jsx(ld,{}),K.jsx(ou,{}),K.jsx(tf,{}),K.jsx(rf,{type:"monotone",dataKey:"distance",stroke:"#2196F3",fill:"url(#distanceGradient)",name:"Distance (km)",dot:{fill:"#2196F3"}})]})}),K.jsx(fg,{title:"Distance Analysis",analysis:de(Ae(s,w),"distance")})]})]}),K.jsxs("div",{className:"chart-section full-width",children:[K.jsx("h2",{children:"Average Ride Duration"}),K.jsxs("div",{className:"chart-with-analysis",children:[K.jsx(Sp,{width:"100%",height:500,children:K.jsxs(vw,{data:Ae(s,w),margin:{top:20,right:30,left:20,bottom:70},children:[K.jsx("defs",{children:K.jsxs("linearGradient",{id:"durationGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[K.jsx("stop",{offset:"5%",stopColor:"#9C27B0",stopOpacity:.8}),K.jsx("stop",{offset:"95%",stopColor:"#9C27B0",stopOpacity:.1})]})}),K.jsx(xp,{strokeDasharray:"3 3"}),K.jsx(od,{dataKey:"period"}),K.jsx(ld,{}),K.jsx(ou,{formatter:(ne,ye)=>[`${ne.toFixed(0)} minutes`,"Duration"]}),K.jsx(tf,{}),K.jsx(rf,{type:"monotone",dataKey:"duration",stroke:"#9C27B0",fill:"url(#durationGradient)",name:"Duration (minutes)",dot:{fill:"#9C27B0"}})]})}),K.jsx(fg,{title:"Duration Analysis",analysis:de(Ae(s,w),"duration")})]})]}),K.jsxs("div",{className:"chart-section full-width",children:[K.jsx("h2",{children:"Average CO2 Saved"}),K.jsxs("div",{className:"chart-with-analysis",children:[K.jsx(Sp,{width:"100%",height:500,children:K.jsxs(vw,{data:Ae(s,w),margin:{top:20,right:30,left:20,bottom:70},children:[K.jsx("defs",{children:K.jsxs("linearGradient",{id:"co2Gradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[K.jsx("stop",{offset:"5%",stopColor:"#4CAF50",stopOpacity:.8}),K.jsx("stop",{offset:"95%",stopColor:"#4CAF50",stopOpacity:.1})]})}),K.jsx(xp,{strokeDasharray:"3 3"}),K.jsx(od,{dataKey:"period"}),K.jsx(ld,{}),K.jsx(ou,{}),K.jsx(tf,{}),K.jsx(rf,{type:"monotone",dataKey:"carbonSaved",stroke:"#4CAF50",fill:"url(#co2Gradient)",name:"CO2 Saved (kg)",dot:{fill:"#4CAF50"}})]})}),K.jsx(fg,{title:"Environmental Impact Analysis",analysis:de(Ae(s,w),"carbonSaved")})]})]}),K.jsxs("div",{className:"chart-section full-width",children:[K.jsx("h2",{children:"User Ride Ratings"}),K.jsxs("div",{className:"chart-with-analysis",children:[K.jsx(Sp,{width:"100%",height:500,children:K.jsxs(Lbe,{data:ge(k,w),margin:{top:20,right:30,left:20,bottom:70},children:[K.jsx(xp,{strokeDasharray:"3 3"}),K.jsx(od,{dataKey:"period",angle:-45,textAnchor:"end",height:80,interval:0}),K.jsx(ld,{domain:[0,5],ticks:[0,1,2,3,4,5],label:{value:"Average Rating",angle:-90,position:"insideLeft",offset:10}}),K.jsx(ou,{formatter:(ne,ye)=>[ye==="averageRating"?`${ne.toFixed(2)} stars`:ne,ye==="averageRating"?"Average Rating":"Total Ratings"]}),K.jsx(tf,{}),K.jsx(Ip,{dataKey:"totalRatings",fill:"#82ca9d",name:"Total Ratings",opacity:.3}),K.jsx(T0,{type:"monotone",dataKey:"averageRating",stroke:"#ff7300",name:"Average Rating",strokeWidth:2,dot:{fill:"#ff7300"}})]})}),K.jsx(fg,{title:"User Satisfaction Analysis",analysis:(()=>{const ne=ge(k,w);if(ne.length===0)return"No ratings data available for this period.";const ye=ne.reduce((Le,Ie)=>Le+Ie.totalRatings,0),Me=ne.reduce((Le,Ie)=>Le+Ie.averageRating*Ie.totalRatings,0)/ye;return`Users submitted ${ye} ride ratings ${w==="daily"?"today":w==="weekly"?"this week":"this month"}, with an average satisfaction score of ${Me.toFixed(2)} out of 5 stars. ${Me>=4.5?"Users are highly satisfied with the service.":Me>=4?"Users are generally satisfied with the service.":Me>=3.5?"Users find the service acceptable but there's room for improvement.":"User satisfaction needs attention and improvement measures should be considered."}`})()})]})]}),K.jsxs("div",{className:"chart-section full-width",children:[K.jsxs("h2",{children:["Most Popular Stations (",w,")"]}),K.jsxs("div",{className:"chart-with-analysis",children:[K.jsx(Sp,{width:"100%",height:600,children:K.jsxs(Ibe,{children:[K.jsx(Ny,{data:$(h,E,w).filter(ne=>ne.rides>0).slice(0,5),dataKey:"rides",nameKey:"stationName",cx:"50%",cy:"50%",outerRadius:180,label:({name:ne,percent:ye})=>`${ne} ${(ye*100).toFixed(0)}%`,children:$(h,E,w).filter(ne=>ne.rides>0).slice(0,5).map((ne,ye)=>K.jsx(lv,{fill:q[ye%q.length]},`cell-${ye}`))}),K.jsx(ou,{formatter:(ne,ye)=>[`${ne} rides`,ye]}),K.jsx(tf,{verticalAlign:"bottom",height:36})]})}),K.jsx(fg,{title:`Station Usage Analysis (${w})`,analysis:`For this ${w} period, the top stations account for ${$(h,E,w).filter(ne=>ne.rides>0).slice(0,5).reduce((ne,ye)=>ne+ye.rides,0)} rides out of ${E.length} total system rides. ${((be=$(h,E,w)[0])==null?void 0:be.stationName)||"N/A"} is currently the most active station with ${((De=$(h,E,w)[0])==null?void 0:De.rides)||0} rides in this period.`})]})]})]})]})]})},uEe=()=>{const[t,e]=nt.useState([]),[a,r]=nt.useState({}),[s,l]=nt.useState({}),[h,n]=nt.useState({}),[w,T]=nt.useState(!0),[E,z]=nt.useState("all"),[k,U]=nt.useState({key:"rideEndedAt",direction:"desc"}),[Z,q]=nt.useState(1),$=10,[J,ie]=nt.useState({totalRides:0,totalRevenue:0,totalDistance:0,totalDuration:0,totalCalories:0,totalCarbonSaved:0});nt.useEffect(()=>{de()},[]);const de=async()=>{try{const be=Wn(zr,"bikes"),De=await Xi(be),ne={};De.docs.forEach(He=>{ne[He.id]=He.data()}),r(ne);const ye=Wn(zr,"approved_users"),Me=await Xi(ye),ze={};Me.docs.forEach(He=>{const Ce=He.data();ze[He.id]=`${Ce.first_name} ${Ce.surname}`}),l(ze);const Le=Wn(zr,"stations"),Ie=await Xi(Le),qe={};Ie.docs.forEach(He=>{qe[He.id]=He.data().stationName}),n(qe);const ke=Wn(zr,"ride_history"),Ue=(await Xi(ke)).docs.map(He=>{var Ce;return{id:He.id,...He.data(),rideEndedAt:((Ce=He.data().rideEndedAt)==null?void 0:Ce.toDate())||new Date(He.data().rideEndedAt.seconds*1e3)}});e(Ue),T(!1)}catch(be){console.error("Error fetching data:",be),T(!1)}},ge=be=>{const De=Ui();switch(E){case"today":return be.filter(ne=>Ui(ne.rideEndedAt).isSame(De,"day"));case"week":return be.filter(ne=>Ui(ne.rideEndedAt).isAfter(De.subtract(1,"week")));case"month":return be.filter(ne=>Ui(ne.rideEndedAt).isAfter(De.subtract(1,"month")));default:return be}};nt.useEffect(()=>{const De=ge(t).reduce((ne,ye)=>({totalRides:ne.totalRides+1,totalRevenue:ne.totalRevenue+(ye.amountPaid||0),totalDistance:ne.totalDistance+(ye.distance||0),totalDuration:ne.totalDuration+(ye.duration||0),totalCalories:ne.totalCalories+(ye.caloriesBurned||0),totalCarbonSaved:ne.totalCarbonSaved+(ye.carbonSaved||0)}),{totalRides:0,totalRevenue:0,totalDistance:0,totalDuration:0,totalCalories:0,totalCarbonSaved:0});ie(De)},[t,E]);const he=be=>{U({key:be,direction:k.key===be&&k.direction==="asc"?"desc":"asc"})},Ae=Vt.useMemo(()=>[...ge(t)].sort((De,ne)=>k.key==="rideEndedAt"?k.direction==="asc"?De[k.key]-ne[k.key]:ne[k.key]-De[k.key]:k.direction==="asc"?De[k.key]>ne[k.key]?1:-1:De[k.key]<ne[k.key]?1:-1),[t,E,k]),me=Ae.slice((Z-1)*$,Z*$),Re=Math.ceil(Ae.length/$);return K.jsxs(S0,{children:[K.jsx(jg,{})," ",K.jsxs("div",{className:"ride-details-container",children:[K.jsx("h1",{children:"Ride Details"}),K.jsx("div",{className:"controls",children:K.jsxs("div",{className:"time-filter",children:[K.jsx("button",{className:`filter-btn ${E==="all"?"active":""}`,onClick:()=>z("all"),children:"All Time"}),K.jsx("button",{className:`filter-btn ${E==="today"?"active":""}`,onClick:()=>z("today"),children:"Today"}),K.jsx("button",{className:`filter-btn ${E==="week"?"active":""}`,onClick:()=>z("week"),children:"This Week"}),K.jsx("button",{className:`filter-btn ${E==="month"?"active":""}`,onClick:()=>z("month"),children:"This Month"})]})}),K.jsxs("div",{className:"stats-grid",children:[K.jsxs("div",{className:"stat-card",children:[K.jsx("h3",{children:"Total Rides"}),K.jsx("p",{children:J.totalRides})]}),K.jsxs("div",{className:"stat-card",children:[K.jsx("h3",{children:"Total Revenue"}),K.jsxs("p",{children:["",J.totalRevenue.toFixed(2)]})]}),K.jsxs("div",{className:"stat-card",children:[K.jsx("h3",{children:"Total Distance"}),K.jsxs("p",{children:[J.totalDistance.toFixed(2)," km"]})]}),K.jsxs("div",{className:"stat-card",children:[K.jsx("h3",{children:"Total Duration"}),K.jsxs("p",{children:[Math.round(J.totalDuration/60)," min"]})]}),K.jsxs("div",{className:"stat-card",children:[K.jsx("h3",{children:"Calories Burned"}),K.jsxs("p",{children:[Math.round(J.totalCalories)," cal"]})]}),K.jsxs("div",{className:"stat-card",children:[K.jsx("h3",{children:"CO2 Saved"}),K.jsxs("p",{children:[J.totalCarbonSaved.toFixed(2)," kg"]})]})]}),w?K.jsx("div",{className:"loading",children:"Loading..."}):K.jsxs(K.Fragment,{children:[K.jsx("div",{className:"table-container",children:K.jsxs("table",{children:[K.jsx("thead",{children:K.jsxs("tr",{children:[K.jsxs("th",{onClick:()=>he("rideEndedAt"),children:["Date"," ",k.key==="rideEndedAt"&&(k.direction==="asc"?"":"")]}),K.jsxs("th",{onClick:()=>he("userId"),children:["User"," ",k.key==="userId"&&(k.direction==="asc"?"":"")]}),K.jsxs("th",{onClick:()=>he("bikeId"),children:["Bike"," ",k.key==="bikeId"&&(k.direction==="asc"?"":"")]}),K.jsxs("th",{onClick:()=>he("duration"),children:["Duration"," ",k.key==="duration"&&(k.direction==="asc"?"":"")]}),K.jsxs("th",{onClick:()=>he("distance"),children:["Distance"," ",k.key==="distance"&&(k.direction==="asc"?"":"")]}),K.jsxs("th",{onClick:()=>he("caloriesBurned"),children:["Calories"," ",k.key==="caloriesBurned"&&(k.direction==="asc"?"":"")]}),K.jsxs("th",{onClick:()=>he("carbonSaved"),children:["CO2 Saved"," ",k.key==="carbonSaved"&&(k.direction==="asc"?"":"")]}),K.jsxs("th",{onClick:()=>he("amountPaid"),children:["Amount"," ",k.key==="amountPaid"&&(k.direction==="asc"?"":"")]}),K.jsx("th",{children:"Start Station"}),K.jsx("th",{children:"End Station"})]})}),K.jsx("tbody",{children:me.map(be=>{var De,ne,ye,Me;return K.jsxs("tr",{children:[K.jsx("td",{children:Ui(be.rideEndedAt).format("MMM D, YYYY HH:mm")}),K.jsx("td",{children:s[be.userId]||"Unknown User"}),K.jsx("td",{children:((De=a[be.bikeId])==null?void 0:De.bikeName)||"Unknown Bike"}),K.jsxs("td",{children:[Math.round(be.duration/60)," min"]}),K.jsxs("td",{children:[((ne=be.distance)==null?void 0:ne.toFixed(2))||0," km"]}),K.jsxs("td",{children:[Math.round(be.caloriesBurned)||0," cal"]}),K.jsxs("td",{children:[((ye=be.carbonSaved)==null?void 0:ye.toFixed(2))||0," kg"]}),K.jsxs("td",{children:["",((Me=be.amountPaid)==null?void 0:Me.toFixed(2))||0]}),K.jsx("td",{children:h[be.startStation]||"Unknown Station"}),K.jsx("td",{children:h[be.endStation]||"Unknown Station"})]},be.id)})})]})}),K.jsxs("div",{className:"pagination-controls",children:[K.jsx("button",{className:"pagination-button",onClick:()=>q(be=>Math.max(1,be-1)),disabled:Z===1,children:"Previous"}),K.jsxs("span",{className:"pagination-info",children:["Page ",Z," of ",Re]}),K.jsx("button",{className:"pagination-button",onClick:()=>q(be=>Math.min(Re,be+1)),disabled:Z===Re,children:"Next"})]})]})]})]})};class cEe extends Vt.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,a){console.error("Error caught by boundary:",e,a)}render(){return this.state.hasError?K.jsxs("div",{className:"error-container",children:[K.jsx("h2",{children:"Something went wrong."}),K.jsx("p",{children:"Please refresh the page or try again later."})]}):this.props.children}}const dEe=()=>{const[t,e]=nt.useState(null);return nt.useEffect(()=>{jv.onAuthStateChanged(a=>{e(a)})},[]),K.jsx(cEe,{children:K.jsx(pae,{children:K.jsxs(qte,{children:[K.jsx(Tp,{path:"/login",element:t?K.jsx(jO,{}):K.jsx(fm,{})}),K.jsx(Tp,{path:"/dashboard",element:t?K.jsx(jO,{}):K.jsx(fm,{})}),K.jsx(Tp,{path:"/user-management",element:t?K.jsx(Kbe,{}):K.jsx(fm,{})}),K.jsx(Tp,{path:"/bike-management",element:t?K.jsx(HPe,{}):K.jsx(fm,{})}),K.jsx(Tp,{path:"/stations",element:t?K.jsx(YPe,{}):K.jsx(fm,{})}),K.jsx(Tp,{path:"/admin-management",element:t?K.jsx(XPe,{}):K.jsx(fm,{})}),K.jsx(Tp,{path:"/rate-management",element:t?K.jsx(JPe,{}):K.jsx(fm,{})}),K.jsx(Tp,{path:"/system-analytics",element:t?K.jsx(lEe,{}):K.jsx(fm,{})}),K.jsx(Tp,{path:"/ride-details",element:t?K.jsx(uEe,{}):K.jsx(fm,{})}),K.jsx(Tp,{path:"/",element:t?K.jsx(jO,{}):K.jsx(fm,{})})]})})})};tte.createRoot(document.getElementById("root")).render(K.jsx(nt.StrictMode,{children:K.jsx(dEe,{})}));export{Ls as _,$S as c,Ji as g};
